{"items":[{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1660143005,"post_id":73306978,"comment_id":129464035,"body_markdown":"You should show your entities, but it sounds like you&#39;ve mapped the same relationship in two ways - treating the relational table as a relationship AND as an entity. Why? Why not have your classes setup to use a 1:M to the new entity? You will need to be able to access and set attributes on the &#39;relationship&#39; entries, but you can write accessors that only return a list of the referenced entity (like a M:M), so your model usage doesn&#39;t have to change. If you do both though, you will have inconsistencies and problems keeping them in synch, and not overwriting each other.","body":"You should show your entities, but it sounds like you&#39;ve mapped the same relationship in two ways - treating the relational table as a relationship AND as an entity. Why? Why not have your classes setup to use a 1:M to the new entity? You will need to be able to access and set attributes on the &#39;relationship&#39; entries, but you can write accessors that only return a list of the referenced entity (like a M:M), so your model usage doesn&#39;t have to change. If you do both though, you will have inconsistencies and problems keeping them in synch, and not overwriting each other."},{"owner":{"account_id":20561213,"reputation":160,"user_id":15091679,"display_name":"Tim Lammarsch"},"score":0,"creation_date":1660145179,"post_id":73306978,"comment_id":129464961,"body_markdown":"I already suspected as much. As to why, I probably &quot;hurt&quot; from having an n:m relationship and not modelling it in the entity at all. However, after some testing, I have to agree that modelling it twice does create more problems than solving anything. I think I got what you are proposing, and I will report if that works for me.","body":"I already suspected as much. As to why, I probably &quot;hurt&quot; from having an n:m relationship and not modelling it in the entity at all. However, after some testing, I have to agree that modelling it twice does create more problems than solving anything. I think I got what you are proposing, and I will report if that works for me."}],"answers":[{"tags":[],"owner":{"account_id":20732441,"reputation":1553,"user_id":15224052,"display_name":"Oliver"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660145206,"creation_date":1660145206,"answer_id":73308932,"question_id":73306978,"body_markdown":"[This](https://stackoverflow.com/questions/36129040/hibernate-join-table-with-additional-column) should help.\r\n\r\nHere is how I do it:\r\n\r\n```java\r\n@Entity\r\n@Table(name = &quot;person&quot;, schema = &quot;crm&quot;)\r\npublic final class Person implements Serializable {\r\n  @Id\r\n  @Column(name = &quot;id&quot;, unique = true, nullable = false, updatable = false, columnDefinition = &quot;bigserial&quot;)\r\n  private Long id;\r\n\r\n  @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;person&quot;, orphanRemoval = true)\r\n  private Set&lt;PersonEmail&gt; emails = new HashSet&lt;&gt;();\r\n}\r\n```\r\n\r\n```java\r\n@Entity\r\n@Table(name = &quot;email&quot;, schema = &quot;crm&quot;)\r\npublic final class Email implements Serializable {\r\n  @Id\r\n  @Column(name = &quot;id&quot;, unique = true, nullable = false, updatable = false, columnDefinition = &quot;bigserial&quot;)\r\n  private Long id;\r\n\r\n  @Column(name = &quot;email&quot;, nullable = false, length = 64, columnDefinition = &quot;varchar(64)&quot;)\r\n  private String localPart;\r\n\r\n  @Column(name = &quot;domain&quot;, nullable = false, length = 255, columnDefinition = &quot;varchar(255)&quot;)\r\n  private String domain;\r\n}\r\n```\r\n\r\n```java\r\n@Entity\r\n@Table(name = &quot;person_email&quot;, schema = &quot;crm&quot;)\r\npublic final class PersonEmail implements Serializable {\r\n  @EmbeddedId\r\n  private PersonEmailId id;\r\n\r\n  // The mapped objects are fetched lazily.\r\n  // This is a choice.\r\n  @ToString.Exclude\r\n  @MapsId(&quot;personId&quot;)\r\n  @ManyToOne(fetch = FetchType.LAZY, optional = false)\r\n  private Person person;\r\n\r\n  @ToString.Exclude\r\n  @MapsId(&quot;emailId&quot;)\r\n  @ManyToOne(fetch = FetchType.LAZY, optional = false)\r\n  private Email email;\r\n\r\n  // Here&#39;s an extra column.\r\n  @Column(name = &quot;type&quot;, nullable = false, columnDefinition = &quot;email_type_t&quot;)\r\n  @Convert(converter = EmailType.EmailTypeConverter.class)\r\n  private EmailType type;\r\n\r\n  public final void setPerson(final Person person) {\r\n    this.person = person;\r\n\r\n    id.setPersonId(this.person.getId());\r\n  }\r\n\r\n  public final void setEmail(final Email email) {\r\n    this.email = email;\r\n\r\n    id.setEmailId(this.email.getId());\r\n  }\r\n\r\n  @Embeddable\r\n  public static final class PersonEmailId implements Serializable {\r\n    @Column(name = &quot;person_id&quot;, nullable = false, insertable = false, updatable = false, columnDefinition = &quot;bigint&quot;)\r\n    private Long personId;\r\n\r\n    @Column(name = &quot;email_id&quot;, nullable = false, insertable = false, updatable = false, columnDefinition = &quot;bigint&quot;)\r\n    private Long emailId;\r\n}\r\n```\r\n","title":"Circumventing Attribute Limitations of Many-to-Many Relations in JPA","body":"<p><a href=\"https://stackoverflow.com/questions/36129040/hibernate-join-table-with-additional-column\">This</a> should help.</p>\n<p>Here is how I do it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;person&quot;, schema = &quot;crm&quot;)\npublic final class Person implements Serializable {\n  @Id\n  @Column(name = &quot;id&quot;, unique = true, nullable = false, updatable = false, columnDefinition = &quot;bigserial&quot;)\n  private Long id;\n\n  @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;person&quot;, orphanRemoval = true)\n  private Set&lt;PersonEmail&gt; emails = new HashSet&lt;&gt;();\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;email&quot;, schema = &quot;crm&quot;)\npublic final class Email implements Serializable {\n  @Id\n  @Column(name = &quot;id&quot;, unique = true, nullable = false, updatable = false, columnDefinition = &quot;bigserial&quot;)\n  private Long id;\n\n  @Column(name = &quot;email&quot;, nullable = false, length = 64, columnDefinition = &quot;varchar(64)&quot;)\n  private String localPart;\n\n  @Column(name = &quot;domain&quot;, nullable = false, length = 255, columnDefinition = &quot;varchar(255)&quot;)\n  private String domain;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;person_email&quot;, schema = &quot;crm&quot;)\npublic final class PersonEmail implements Serializable {\n  @EmbeddedId\n  private PersonEmailId id;\n\n  // The mapped objects are fetched lazily.\n  // This is a choice.\n  @ToString.Exclude\n  @MapsId(&quot;personId&quot;)\n  @ManyToOne(fetch = FetchType.LAZY, optional = false)\n  private Person person;\n\n  @ToString.Exclude\n  @MapsId(&quot;emailId&quot;)\n  @ManyToOne(fetch = FetchType.LAZY, optional = false)\n  private Email email;\n\n  // Here's an extra column.\n  @Column(name = &quot;type&quot;, nullable = false, columnDefinition = &quot;email_type_t&quot;)\n  @Convert(converter = EmailType.EmailTypeConverter.class)\n  private EmailType type;\n\n  public final void setPerson(final Person person) {\n    this.person = person;\n\n    id.setPersonId(this.person.getId());\n  }\n\n  public final void setEmail(final Email email) {\n    this.email = email;\n\n    id.setEmailId(this.email.getId());\n  }\n\n  @Embeddable\n  public static final class PersonEmailId implements Serializable {\n    @Column(name = &quot;person_id&quot;, nullable = false, insertable = false, updatable = false, columnDefinition = &quot;bigint&quot;)\n    private Long personId;\n\n    @Column(name = &quot;email_id&quot;, nullable = false, insertable = false, updatable = false, columnDefinition = &quot;bigint&quot;)\n    private Long emailId;\n}\n</code></pre>\n"}],"owner":{"account_id":20561213,"reputation":160,"user_id":15091679,"display_name":"Tim Lammarsch"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73308932,"answer_count":1,"score":1,"last_activity_date":1660145206,"creation_date":1660137192,"question_id":73306978,"body_markdown":"I am using PostgreSQL 12.11, JPA 3.1.0, and Hibernate 5.6.10. This might become important because I am doing things that apparently do not work with JPA 2.0.\r\n\r\nMy goal is to add an attribute to a many-to-many relationship. I found [this][1] posting. @Mikko Maunu states that &quot;There is no concept of having additional persistent attribute in relation in JPA (2.0).&quot; To me, this sounds like what I want to do is not possible. However, the answer is rather old and might not be complete anymore.\r\n\r\nBeside the time gap and the version gap, this is, in my opinion, a new question because I am doing something that is probably questionable and not part of the original thread.\r\n\r\nWhat I did is this:\r\n\r\n1. Create a `@ManyToMany` relationship in JPA and specify a `@JoinTable`.\r\n2. Manually define an entity with identical table name to the table specified in 1. For this table, I chose a composite primary key using `@IdClass`. I also added my attribute.\r\n3. Inside one of the n:m-connected entities, create a `@OneToMany` relationship to the connection-table-entity created in 2. However, I did not create a corresponding `@ManyToOne` relationship as that would have created an error.\r\n\r\nAs a result, I can access the original entities and their relation as many-to-many, but also the relation itself, which is not an entity in the original ERM, but it is for JPA. First tests show this seems to be working.\r\n\r\nI am aware, however, that I basically access the same part of the persistence (the PostgreSQL database) through two different ways at the same time.\r\n\r\nNow my questions are:\r\n1. Is this a valid way to do it? Or will I get in bad trouble at one point?\r\n2. Is there a situation where I will need to refresh to prevent trouble?\r\n3. Is this something new in JPA &gt; 2.0, or just an extension to the original answer?\r\n\r\n  [1]: https://stackoverflow.com/questions/9816932/mapping-extra-attribute-in-a-join-table-jpa-2","title":"Circumventing Attribute Limitations of Many-to-Many Relations in JPA","body":"<p>I am using PostgreSQL 12.11, JPA 3.1.0, and Hibernate 5.6.10. This might become important because I am doing things that apparently do not work with JPA 2.0.</p>\n<p>My goal is to add an attribute to a many-to-many relationship. I found <a href=\"https://stackoverflow.com/questions/9816932/mapping-extra-attribute-in-a-join-table-jpa-2\">this</a> posting. @Mikko Maunu states that &quot;There is no concept of having additional persistent attribute in relation in JPA (2.0).&quot; To me, this sounds like what I want to do is not possible. However, the answer is rather old and might not be complete anymore.</p>\n<p>Beside the time gap and the version gap, this is, in my opinion, a new question because I am doing something that is probably questionable and not part of the original thread.</p>\n<p>What I did is this:</p>\n<ol>\n<li>Create a <code>@ManyToMany</code> relationship in JPA and specify a <code>@JoinTable</code>.</li>\n<li>Manually define an entity with identical table name to the table specified in 1. For this table, I chose a composite primary key using <code>@IdClass</code>. I also added my attribute.</li>\n<li>Inside one of the n:m-connected entities, create a <code>@OneToMany</code> relationship to the connection-table-entity created in 2. However, I did not create a corresponding <code>@ManyToOne</code> relationship as that would have created an error.</li>\n</ol>\n<p>As a result, I can access the original entities and their relation as many-to-many, but also the relation itself, which is not an entity in the original ERM, but it is for JPA. First tests show this seems to be working.</p>\n<p>I am aware, however, that I basically access the same part of the persistence (the PostgreSQL database) through two different ways at the same time.</p>\n<p>Now my questions are:</p>\n<ol>\n<li>Is this a valid way to do it? Or will I get in bad trouble at one point?</li>\n<li>Is there a situation where I will need to refresh to prevent trouble?</li>\n<li>Is this something new in JPA &gt; 2.0, or just an extension to the original answer?</li>\n</ol>\n"},{"tags":["java","maven","maven-jar-plugin"],"answers":[{"tags":[],"owner":{"account_id":15182024,"reputation":36,"user_id":10955078,"display_name":"stormguard82"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660144428,"creation_date":1548239537,"answer_id":54325182,"question_id":48299910,"body_markdown":"What version of the maven archiver plugin are you using? Version 3.0.2 has [a bug in ManifestConfiguration.class](https://issues.apache.org/jira/browse/MSHARED-551):\r\n\r\n     public String getClasspathLayoutType()\r\n     {\r\n        return &quot;simple&quot;.equals(this.classpathLayoutType) ? &quot;repository&quot; : this.classpathLayoutType;\r\n      }\r\n\r\nThe method for the ClasspathLayoutType is returning the wrong type.\r\nIn maven archiver version 3.1.1 the bug is fixed, with layout types taking these possible values:\r\n\r\n\r\n      public static final String CLASSPATH_LAYOUT_TYPE_SIMPLE = &quot;simple&quot;;\r\n      public static final String CLASSPATH_LAYOUT_TYPE_REPOSITORY = &quot;repository&quot;;\r\n      public static final String CLASSPATH_LAYOUT_TYPE_CUSTOM = &quot;custom&quot;;\r\n\r\nJust try a higher fixed version.\r\n","title":"Maven: Simple classpathLayoutType is generating classpath similar to repository classpathLayoutType","body":"<p>What version of the maven archiver plugin are you using? Version 3.0.2 has <a href=\"https://issues.apache.org/jira/browse/MSHARED-551\" rel=\"nofollow noreferrer\">a bug in ManifestConfiguration.class</a>:</p>\n<pre><code> public String getClasspathLayoutType()\n {\n    return &quot;simple&quot;.equals(this.classpathLayoutType) ? &quot;repository&quot; : this.classpathLayoutType;\n  }\n</code></pre>\n<p>The method for the ClasspathLayoutType is returning the wrong type.\nIn maven archiver version 3.1.1 the bug is fixed, with layout types taking these possible values:</p>\n<pre><code>  public static final String CLASSPATH_LAYOUT_TYPE_SIMPLE = &quot;simple&quot;;\n  public static final String CLASSPATH_LAYOUT_TYPE_REPOSITORY = &quot;repository&quot;;\n  public static final String CLASSPATH_LAYOUT_TYPE_CUSTOM = &quot;custom&quot;;\n</code></pre>\n<p>Just try a higher fixed version.</p>\n"}],"owner":{"account_id":4060371,"reputation":6747,"user_id":3337089,"accept_rate":86,"display_name":"Nagabhushan S N"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1104,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":54325182,"answer_count":1,"score":2,"last_activity_date":1660144996,"creation_date":1516188093,"question_id":48299910,"body_markdown":"I have a maven project which does the following: \r\n\r\n - Generates the jar and copies it into `target/dist` directory.  \r\n - Copies all dependency jars into `target/dist/lib` directory.\r\n - Distributes the `dist` folder.\r\n - Requires the dependency jars to be executed in the classpath when running the jar.\r\n \r\nWhen I added this code in my pom: \r\n\r\n    &lt;plugin&gt;\r\n      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n      &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;3.0.0&lt;/version&gt;\r\n      &lt;configuration&gt;\r\n        &lt;archive&gt;\r\n          &lt;manifest&gt;\r\n            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n            &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\r\n          &lt;/manifest&gt;\r\n        &lt;/archive&gt;\r\n      &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\nIt generated the following classpath in the jar:\r\n\r\n    Class-Path: lib/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1.jar lib/com/google/code/gson/gson/2.8.2/gson-2.8.2.jar\r\n\r\nObviously, this won&#39;t work because the classpath I need is as follows:\r\n\r\n    Class-Path: lib/commons-logging-1.1.1.jar lib/gson-2.8.2.jar\r\n\r\nI went to[this page][1]. According the documentation, what I need is the default `classpathLayoutType` of `simple`. But the classpath generated is in a repository layout. I even tried explicitly adding the below tag, but with no success. \r\n\r\n    &lt;classpathLayoutType&gt;simple&lt;/classpathLayoutType&gt;\r\n\r\nWhy isn&#39;t the `simple` layout type not working?\r\n\r\n**EDIT**\r\n--------\r\n\r\nI have achieved what I need using custom layout type as follows:\r\n\r\n    &lt;classpathLayoutType&gt;custom&lt;/classpathLayoutType&gt;\r\n    &lt;customClasspathLayout&gt;lib/$${artifact.artifactId}-$${artifact.version}$${dashClassifier?}.$${artifact.extension}&lt;/customClasspathLayout&gt;\r\n\r\n\r\n  [1]: https://maven.apache.org/shared/maven-archiver/examples/classpath.html","title":"Maven: Simple classpathLayoutType is generating classpath similar to repository classpathLayoutType","body":"<p>I have a maven project which does the following:</p>\n<ul>\n<li>Generates the jar and copies it into <code>target/dist</code> directory.</li>\n<li>Copies all dependency jars into <code>target/dist/lib</code> directory.</li>\n<li>Distributes the <code>dist</code> folder.</li>\n<li>Requires the dependency jars to be executed in the classpath when running the jar.</li>\n</ul>\n<p>When I added this code in my pom:</p>\n<pre><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n  &lt;version&gt;3.0.0&lt;/version&gt;\n  &lt;configuration&gt;\n    &lt;archive&gt;\n      &lt;manifest&gt;\n        &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n        &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\n      &lt;/manifest&gt;\n    &lt;/archive&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>It generated the following classpath in the jar:</p>\n<pre><code>Class-Path: lib/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1.jar lib/com/google/code/gson/gson/2.8.2/gson-2.8.2.jar\n</code></pre>\n<p>Obviously, this won't work because the classpath I need is as follows:</p>\n<pre><code>Class-Path: lib/commons-logging-1.1.1.jar lib/gson-2.8.2.jar\n</code></pre>\n<p>I went to<a href=\"https://maven.apache.org/shared/maven-archiver/examples/classpath.html\" rel=\"nofollow noreferrer\">this page</a>. According the documentation, what I need is the default <code>classpathLayoutType</code> of <code>simple</code>. But the classpath generated is in a repository layout. I even tried explicitly adding the below tag, but with no success.</p>\n<pre><code>&lt;classpathLayoutType&gt;simple&lt;/classpathLayoutType&gt;\n</code></pre>\n<p>Why isn't the <code>simple</code> layout type not working?</p>\n<h2><strong>EDIT</strong></h2>\n<p>I have achieved what I need using custom layout type as follows:</p>\n<pre><code>&lt;classpathLayoutType&gt;custom&lt;/classpathLayoutType&gt;\n&lt;customClasspathLayout&gt;lib/$${artifact.artifactId}-$${artifact.version}$${dashClassifier?}.$${artifact.extension}&lt;/customClasspathLayout&gt;\n</code></pre>\n"},{"tags":["java","css","javafx"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1540469721,"post_id":52988670,"comment_id":92883123,"body_markdown":"visibleAmount is the length of the thumb, the value of the scrollbar probably the middle of the thumb, so you can calculate start/end position","body":"visibleAmount is the length of the thumb, the value of the scrollbar probably the middle of the thumb, so you can calculate start/end position"},{"owner":{"account_id":14579297,"reputation":31,"user_id":10530296,"display_name":"Olisepreen"},"score":0,"creation_date":1540470258,"post_id":52988670,"comment_id":92883482,"body_markdown":"if the value is the middle of the thumb, then when the value is 1, start position of the thumb will be less than zero.","body":"if the value is the middle of the thumb, then when the value is 1, start position of the thumb will be less than zero."},{"owner":{"account_id":14579297,"reputation":31,"user_id":10530296,"display_name":"Olisepreen"},"score":0,"creation_date":1540470320,"post_id":52988670,"comment_id":92883521,"body_markdown":"I meant how to get visible value range of the scrollbar.","body":"I meant how to get visible value range of the scrollbar."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1540475448,"post_id":52988670,"comment_id":92887170,"body_markdown":"oops ... good catch, just looked at the sources of ScrollBarSkin, which maps the thumb width to visibleAmount. Then you need to do additional math as long as the value &lt; amount/2 (or &gt; width - amount/2)","body":"oops ... good catch, just looked at the sources of ScrollBarSkin, which maps the thumb width to visibleAmount. Then you need to do additional math as long as the value &lt; amount/2 (or &gt; width - amount/2)"}],"answers":[{"tags":[],"owner":{"account_id":3583958,"reputation":80987,"user_id":2991525,"display_name":"fabian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1540476102,"creation_date":1540475517,"answer_id":52991029,"question_id":52988670,"body_markdown":"The `ScrollBar` indicates a position, not a range. The position is available via the `value` property. The `visualAmount` property determines the size of the slider.\r\n\r\nIf `value == max` the thumb is in the rightmost/bottommost position. Your &quot;max value of thumb&quot; would exceed `max`.\r\n\r\nYou should therefore decide how many items to display and calculate `visibleAmount` and `max` based on this:\r\n\r\n    max           = itemCount - displayedItems\r\n    visibleAmount = max * displayedItems / itemCount\r\n\r\nExample for a `ScrollPane`-like implementation:\r\n\r\n    @Override\r\n    public void start(Stage stage) {\r\n        ScrollBar scrollBar = new ScrollBar();\r\n        scrollBar.setOrientation(Orientation.VERTICAL);\r\n        StackPane.setAlignment(scrollBar, Pos.CENTER_RIGHT);\r\n        \r\n        VBox container = new VBox();\r\n        StackPane.setAlignment(container, Pos.TOP_LEFT);\r\n        \r\n        StackPane root = new StackPane(container, scrollBar);\r\n        \r\n        InvalidationListener listener = o -&gt; {\r\n            // adjust scrollbar properties on resize of root or content\r\n            double rootHeight = root.getHeight();\r\n            double contentHeight = container.getHeight();\r\n            \r\n            double max = Math.max(0, contentHeight - rootHeight);\r\n            scrollBar.setMax(max);\r\n            scrollBar.setVisibleAmount(max * rootHeight / contentHeight);\r\n        };\r\n        root.heightProperty().addListener(listener);\r\n        container.heightProperty().addListener(listener);\r\n        \r\n        // move container up based on the scrollbar value\r\n        container.translateYProperty().bind(scrollBar.valueProperty().negate());\r\n        \r\n        // generate some content\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            Rectangle rect = new Rectangle(100, 100, (i &amp; 1) == 0 ? Color.BLACK : Color.LIGHTGRAY);\r\n            container.getChildren().add(rect);\r\n        }\r\n\r\n        Scene scene = new Scene(root, 300, 300);\r\n        stage.setScene(scene);\r\n        stage.show();\r\n    }","title":"How to get thumb value range of ScrollBar in JavaFX?","body":"<p>The <code>ScrollBar</code> indicates a position, not a range. The position is available via the <code>value</code> property. The <code>visualAmount</code> property determines the size of the slider.</p>\n\n<p>If <code>value == max</code> the thumb is in the rightmost/bottommost position. Your \"max value of thumb\" would exceed <code>max</code>.</p>\n\n<p>You should therefore decide how many items to display and calculate <code>visibleAmount</code> and <code>max</code> based on this:</p>\n\n<pre><code>max           = itemCount - displayedItems\nvisibleAmount = max * displayedItems / itemCount\n</code></pre>\n\n<p>Example for a <code>ScrollPane</code>-like implementation:</p>\n\n<pre><code>@Override\npublic void start(Stage stage) {\n    ScrollBar scrollBar = new ScrollBar();\n    scrollBar.setOrientation(Orientation.VERTICAL);\n    StackPane.setAlignment(scrollBar, Pos.CENTER_RIGHT);\n\n    VBox container = new VBox();\n    StackPane.setAlignment(container, Pos.TOP_LEFT);\n\n    StackPane root = new StackPane(container, scrollBar);\n\n    InvalidationListener listener = o -&gt; {\n        // adjust scrollbar properties on resize of root or content\n        double rootHeight = root.getHeight();\n        double contentHeight = container.getHeight();\n\n        double max = Math.max(0, contentHeight - rootHeight);\n        scrollBar.setMax(max);\n        scrollBar.setVisibleAmount(max * rootHeight / contentHeight);\n    };\n    root.heightProperty().addListener(listener);\n    container.heightProperty().addListener(listener);\n\n    // move container up based on the scrollbar value\n    container.translateYProperty().bind(scrollBar.valueProperty().negate());\n\n    // generate some content\n    for (int i = 0; i &lt; 10; i++) {\n        Rectangle rect = new Rectangle(100, 100, (i &amp; 1) == 0 ? Color.BLACK : Color.LIGHTGRAY);\n        container.getChildren().add(rect);\n    }\n\n    Scene scene = new Scene(root, 300, 300);\n    stage.setScene(scene);\n    stage.show();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26007396,"reputation":1,"user_id":19716940,"display_name":"Prince"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1660144561,"creation_date":1659952104,"answer_id":73275914,"question_id":52988670,"body_markdown":"The answer is very simple. Let the height of scrollbar be 600 and height of thumb is 200. Now if you substract the thumb&#39;s height and calculate the value to scroll according to leftover height(400) then there is no need of repressing the max value from the end.\r\n\r\nYou need to use some condition so that the thumb may not exceed the size. As here the thumb(200px) should not exceed 400px height as then it will not be visible to user.","title":"How to get thumb value range of ScrollBar in JavaFX?","body":"<p>The answer is very simple. Let the height of scrollbar be 600 and height of thumb is 200. Now if you substract the thumb's height and calculate the value to scroll according to leftover height(400) then there is no need of repressing the max value from the end.</p>\n<p>You need to use some condition so that the thumb may not exceed the size. As here the thumb(200px) should not exceed 400px height as then it will not be visible to user.</p>\n"}],"owner":{"account_id":14579297,"reputation":31,"user_id":10530296,"display_name":"Olisepreen"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":982,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1660144561,"creation_date":1540468434,"question_id":52988670,"body_markdown":"For instance say we have a scrollbar for showing/manipulating data on some application. Scrollbar has min, max values and visible amount as well. But there is a bit confusing thing about the range of the values to be shown according scrollbar value.\r\n\r\nAs an example here is an image\r\n\r\n&lt;img src=&quot;https://i.stack.imgur.com/rk6bj.png&quot;/&gt;\r\n\r\nand \r\n\r\n&lt;img src=&quot;https://i.stack.imgur.com/i5MSm.png&quot;/&gt;\r\n\r\nBut it is calculated according different sides of the thumb of the scrollbar.\r\n\r\nSay I need to show some data from database, and min value will be min id and max value will be max id as well. and consider I want to show 100 items, and I am going to set visible amount to 100 in scrollbar. While scrolling If the value of scroolbar is equal to 1, and getting the range from the database will be as simple as just adding 100 (visible amount) to 1, but this won&#39;t work when the value is equal to max. So that is why I need to get value range of the scrollbar thumb, but when looking at scrollbar source code I could not find the implementation of this feature.\r\n\r\nHow to get min and max values of the thumb or visible value range of the scrollbar?\r\n\r\n&lt;img src=&quot;https://i.stack.imgur.com/gjCMv.png&quot;/&gt;","title":"How to get thumb value range of ScrollBar in JavaFX?","body":"<p>For instance say we have a scrollbar for showing/manipulating data on some application. Scrollbar has min, max values and visible amount as well. But there is a bit confusing thing about the range of the values to be shown according scrollbar value.</p>\n\n<p>As an example here is an image</p>\n\n<p><img src=\"https://i.stack.imgur.com/rk6bj.png\"/></p>\n\n<p>and </p>\n\n<p><img src=\"https://i.stack.imgur.com/i5MSm.png\"/></p>\n\n<p>But it is calculated according different sides of the thumb of the scrollbar.</p>\n\n<p>Say I need to show some data from database, and min value will be min id and max value will be max id as well. and consider I want to show 100 items, and I am going to set visible amount to 100 in scrollbar. While scrolling If the value of scroolbar is equal to 1, and getting the range from the database will be as simple as just adding 100 (visible amount) to 1, but this won't work when the value is equal to max. So that is why I need to get value range of the scrollbar thumb, but when looking at scrollbar source code I could not find the implementation of this feature.</p>\n\n<p>How to get min and max values of the thumb or visible value range of the scrollbar?</p>\n\n<p><img src=\"https://i.stack.imgur.com/gjCMv.png\"/></p>\n"},{"tags":["java","mysql","spring","sqlite","spring-data-jpa"],"comments":[{"owner":{"account_id":16530625,"reputation":116,"user_id":11943976,"display_name":"KASMI G."},"score":0,"creation_date":1660158059,"post_id":73308018,"comment_id":129469312,"body_markdown":"In your WHERE clause you&#39;re comparing your param with &quot;user_id&quot;, you have not defined that attribute","body":"In your WHERE clause you&#39;re comparing your param with &quot;user_id&quot;, you have not defined that attribute"},{"owner":{"account_id":25887820,"reputation":107,"user_id":19615643,"display_name":"Grimalkin"},"score":1,"creation_date":1660161824,"post_id":73308018,"comment_id":129470533,"body_markdown":"@KASMIG. I think you are right I changed that while switching databases because I like my forgein and primary key to have the same name but I forgot to change It in these queries. Thank you I was loosing my mind","body":"@KASMIG. I think you are right I changed that while switching databases because I like my forgein and primary key to have the same name but I forgot to change It in these queries. Thank you I was loosing my mind"}],"owner":{"account_id":25887820,"reputation":107,"user_id":19615643,"display_name":"Grimalkin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":268,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660144163,"creation_date":1660141399,"question_id":73308018,"body_markdown":"When I execute query that is expected to return no results my application crashes, the database that I am currently using is SQLite. When I was using MariaDB this error hasn&#39;t been ocurring, error:\r\n```\r\n2022-08-10 16:10:47.160  WARN 15512 --- [nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: null\r\n2022-08-10 16:10:47.160 ERROR 15512 --- [nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : Query does not return results\r\n2022-08-10 16:10:47.207 ERROR 15512 --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.orm.jpa.JpaSystemException: could not extract ResultSet; nested exception is org.hibernate.exception.GenericJDBCException: could not extract ResultSet] with root cause\r\n```\r\nQuery:\r\n```\r\n@Query(value = &quot;SELECT * FROM Port WHERE user_id=:userId&quot;, nativeQuery = true)\r\nPort checkIfUserHasPort(@Param(&quot;userId&quot;) Long userId);\r\n```\r\nExecuting method inside try catch did not work. Any idea how to workaround this?\r\n\r\nPort entity:\r\n```\r\n@Entity\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class Port {\r\n    @Id\r\n    private int port;\r\n    private boolean active;\r\n    private LocalDateTime expiration;\r\n    @OneToOne\r\n    @JoinColumn(name=&quot;id&quot;)\r\n    private User user;\r\n}\r\n```\r\nUser entity\r\n```\r\n@Entity\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Table(name = &quot;user&quot;)\r\npublic class User {\r\n    @Id\r\n    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator = &quot;id_Sequence&quot;)\r\n    @SequenceGenerator(name = &quot;id_Sequence&quot;, sequenceName = &quot;ID_SEQ&quot;)\r\n    private Long id;\r\n    @JsonIgnore\r\n    private String username;\r\n    @JsonIgnore\r\n    private String password;\r\n    @JsonIgnore\r\n    @OneToOne(mappedBy = &quot;user&quot;)\r\n    private Port port;\r\n    @JsonIgnore\r\n    @ManyToMany(fetch = EAGER)\r\n    private Collection&lt;Role&gt; roles = new ArrayList&lt;&gt;();\r\n    @JsonIgnore\r\n    @OneToMany(mappedBy = &quot;user&quot;)\r\n    private Set&lt;Log&gt; logs=new HashSet&lt;&gt;();\r\n}\r\n\r\n```","title":"Spring application crashes when database doesn&#39;t return results","body":"<p>When I execute query that is expected to return no results my application crashes, the database that I am currently using is SQLite. When I was using MariaDB this error hasn't been ocurring, error:</p>\n<pre><code>2022-08-10 16:10:47.160  WARN 15512 --- [nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: null\n2022-08-10 16:10:47.160 ERROR 15512 --- [nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : Query does not return results\n2022-08-10 16:10:47.207 ERROR 15512 --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.orm.jpa.JpaSystemException: could not extract ResultSet; nested exception is org.hibernate.exception.GenericJDBCException: could not extract ResultSet] with root cause\n</code></pre>\n<p>Query:</p>\n<pre><code>@Query(value = &quot;SELECT * FROM Port WHERE user_id=:userId&quot;, nativeQuery = true)\nPort checkIfUserHasPort(@Param(&quot;userId&quot;) Long userId);\n</code></pre>\n<p>Executing method inside try catch did not work. Any idea how to workaround this?</p>\n<p>Port entity:</p>\n<pre><code>@Entity\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Port {\n    @Id\n    private int port;\n    private boolean active;\n    private LocalDateTime expiration;\n    @OneToOne\n    @JoinColumn(name=&quot;id&quot;)\n    private User user;\n}\n</code></pre>\n<p>User entity</p>\n<pre><code>@Entity\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Table(name = &quot;user&quot;)\npublic class User {\n    @Id\n    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator = &quot;id_Sequence&quot;)\n    @SequenceGenerator(name = &quot;id_Sequence&quot;, sequenceName = &quot;ID_SEQ&quot;)\n    private Long id;\n    @JsonIgnore\n    private String username;\n    @JsonIgnore\n    private String password;\n    @JsonIgnore\n    @OneToOne(mappedBy = &quot;user&quot;)\n    private Port port;\n    @JsonIgnore\n    @ManyToMany(fetch = EAGER)\n    private Collection&lt;Role&gt; roles = new ArrayList&lt;&gt;();\n    @JsonIgnore\n    @OneToMany(mappedBy = &quot;user&quot;)\n    private Set&lt;Log&gt; logs=new HashSet&lt;&gt;();\n}\n\n</code></pre>\n"},{"tags":["java","eclipse","junit","java-6"],"comments":[{"owner":{"account_id":1668843,"reputation":2514,"user_id":1535706,"accept_rate":67,"display_name":"rslemos"},"score":0,"creation_date":1660144434,"post_id":73308663,"comment_id":129464661,"body_markdown":"I&#39;m open to install an earlier version of Eclipse (or even vscode) if I knew the last version that worked with java-6. This compatibility matrix however is not easy to find (for mockito and powermock, for instance, I resorted to binary search until I got the versions right).","body":"I&#39;m open to install an earlier version of Eclipse (or even vscode) if I knew the last version that worked with java-6. This compatibility matrix however is not easy to find (for mockito and powermock, for instance, I resorted to binary search until I got the versions right)."},{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":0,"creation_date":1660146613,"post_id":73308663,"comment_id":129465522,"body_markdown":"Do you know that you can run Eclipse itself under a different JVM than you use for developing and running your code/applications? In your project in Eclipse, have you specified the 1.6 JVM that you&#39;re targeting? If you don&#39;t do that, applications use whatever Java is running Eclipse, by default.","body":"Do you know that you can run Eclipse itself under a different JVM than you use for developing and running your code/applications? In your project in Eclipse, have you specified the 1.6 JVM that you&#39;re targeting? If you don&#39;t do that, applications use whatever Java is running Eclipse, by default."},{"owner":{"account_id":1668843,"reputation":2514,"user_id":1535706,"accept_rate":67,"display_name":"rslemos"},"score":0,"creation_date":1660147617,"post_id":73308663,"comment_id":129465932,"body_markdown":"@E-Riz yes. My Eclipse actually runs in a jvm 16 (java.vm.version=16.0.2+7-67). Eclipse grabs all jvm version configuration from maven. I&#39;ve configured installed JREs and execution environments (JavaSE-1.6 specifically). These are all set, and all ok. Actually there lies the problem: eclipse indeed uses jvm 6 to run my tests (as I asked it to do, by means of maven configuration); but I guess eclipse classes were not compiled for java 6, whence the classfile version greater than 50.0. I&#39;m looking for either a workaround or the last eclipse version still compiled for 50.0.","body":"@E-Riz yes. My Eclipse actually runs in a jvm 16 (java.vm.version=16.0.2+7-67). Eclipse grabs all jvm version configuration from maven. I&#39;ve configured installed JREs and execution environments (JavaSE-1.6 specifically). These are all set, and all ok. Actually there lies the problem: eclipse indeed uses jvm 6 to run my tests (as I asked it to do, by means of maven configuration); but I guess eclipse classes were not compiled for java 6, whence the classfile version greater than 50.0. I&#39;m looking for either a workaround or the last eclipse version still compiled for 50.0."},{"owner":{"account_id":1668843,"reputation":2514,"user_id":1535706,"accept_rate":67,"display_name":"rslemos"},"score":0,"creation_date":1660147654,"post_id":73308663,"comment_id":129465953,"body_markdown":"@E-Riz by the way: I cannot run this version of Eclipse (2022-03 (4.23.0)) in anything lower than jvm 11.","body":"@E-Riz by the way: I cannot run this version of Eclipse (2022-03 (4.23.0)) in anything lower than jvm 11."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1660149313,"post_id":73308663,"comment_id":129466602,"body_markdown":"Does running the tests from within Eclipse via Maven work for you as shown here? https://youtu.be/GnNnQY5ujFg?t=370","body":"Does running the tests from within Eclipse via Maven work for you as shown here? <a href=\"https://youtu.be/GnNnQY5ujFg?t=370\" rel=\"nofollow noreferrer\">youtu.be/GnNnQY5ujFg?t=370</a>"},{"owner":{"account_id":1668843,"reputation":2514,"user_id":1535706,"accept_rate":67,"display_name":"rslemos"},"score":0,"creation_date":1660154170,"post_id":73308663,"comment_id":129468128,"body_markdown":"@howlger no it doesn&#39;t work, because Eclipse is dumb enough to try to run maven itself in JVM 6, which does not work for this version of maven (whichever version it is): `java.lang.UnsupportedClassVersionError: org/codehaus/plexus/classworlds/launcher/Launcher : Unsupported major.minor version 51.0` (that maven was compiled using jdk 7). On the command line `mvn test` works though, because maven itself is using java 11, and it forks JVM 6 (per `maven-toolchains-plugin` configuration).","body":"@howlger no it doesn&#39;t work, because Eclipse is dumb enough to try to run maven itself in JVM 6, which does not work for this version of maven (whichever version it is): <code>java.lang.UnsupportedClassVersionError: org&#47;codehaus&#47;plexus&#47;classworlds&#47;launcher&#47;Launcher : Unsupported major.minor version 51.0</code> (that maven was compiled using jdk 7). On the command line <code>mvn test</code> works though, because maven itself is using java 11, and it forks JVM 6 (per <code>maven-toolchains-plugin</code> configuration)."},{"owner":{"account_id":1668843,"reputation":2514,"user_id":1535706,"accept_rate":67,"display_name":"rslemos"},"score":0,"creation_date":1660154511,"post_id":73308663,"comment_id":129468244,"body_markdown":"@howlger but by running a mvn build within Eclipse specially crafted to use a newer JVM it worked! Well, worked just like it does on the terminal (aka command line), forking JVM 6 along the way. At least the stacktraces are now clickable inside Eclipse! I think this is enough as a workaround. No line code coverage unfortunately.","body":"@howlger but by running a mvn build within Eclipse specially crafted to use a newer JVM it worked! Well, worked just like it does on the terminal (aka command line), forking JVM 6 along the way. At least the stacktraces are now clickable inside Eclipse! I think this is enough as a workaround. No line code coverage unfortunately."},{"owner":{"account_id":1668843,"reputation":2514,"user_id":1535706,"accept_rate":67,"display_name":"rslemos"},"score":0,"creation_date":1660225509,"post_id":73308663,"comment_id":129486512,"body_markdown":"Per someone suggestion (whose comment has been deleted now), I&#39;ve tried in neon.3, and it works. Then I binary searched some versions. Known to work: neon.3, oxygen.3a, photon.r, 2019-12.r, 2021-03.r (the last one working with JVM 6). Known to not work: 2021-06.r, 2021-09.r, 2021-12.r and 2022-03.r. So, I&#39;m sticking with 2021-03.r now, with full junit support + code coverage, using jvm 6.","body":"Per someone suggestion (whose comment has been deleted now), I&#39;ve tried in neon.3, and it works. Then I binary searched some versions. Known to work: neon.3, oxygen.3a, photon.r, 2019-12.r, 2021-03.r (the last one working with JVM 6). Known to not work: 2021-06.r, 2021-09.r, 2021-12.r and 2022-03.r. So, I&#39;m sticking with 2021-03.r now, with full junit support + code coverage, using jvm 6."}],"owner":{"account_id":1668843,"reputation":2514,"user_id":1535706,"accept_rate":67,"display_name":"rslemos"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":530,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660144117,"creation_date":1660144117,"question_id":73308663,"body_markdown":"I have a legacy application that absolutely must compile and run in JVM 1.6.\r\n\r\nBut it not enough to specify `-source 6 -target 6` to a newer compiler (8, 11, 16 whatever JDK version newer than 1.6).\r\n\r\nI really need to develop and test in a &quot;concrete&quot;† JVM 1.6, in my case: OpenJDK 64-Bit Server VM (build 23.25-b01, mixed mode), because the server hosting this application cannot get a JVM update.\r\n\r\nI&#39;ve managed to configure maven to do it all (the `maven.compiler.*` properties and the `maven-toolchains-plugin`) and everything works fine (`mvn test` -wise): \r\n```\r\n[...]\r\n[INFO]\r\n[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ [...] ---\r\n[INFO] Toolchain in surefire-plugin: JDK[openjdk-1.6.0-unofficial-b31-windows-amd64-image]\r\n[INFO] Surefire report directory: [...]\\target\\surefire-reports\r\n\r\n-------------------------------------------------------\r\n T E S T S\r\n-------------------------------------------------------\r\nRunning [...]Test\r\nTests run: 18, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.149 sec\r\n[...]\r\n```\r\n\r\nTo be really comfortable however, I need to run the unit tests (junit 4.13.2 + mockito-inline 2.8.47 +  powermock 1.7.4) inside Eclipse. But it errors with the following output:\r\n```\r\njava.lang.UnsupportedClassVersionError: org/eclipse/jdt/internal/junit/runner/RemoteTestRunner : Unsupported major.minor version 52.0\r\n\tat java.lang.ClassLoader.defineClass1(Native Method)\r\n\tat java.lang.ClassLoader.defineClass(ClassLoader.java:643)\r\n\tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\r\n\tat java.net.URLClassLoader.defineClass(URLClassLoader.java:277)\r\n\tat java.net.URLClassLoader.access$000(URLClassLoader.java:73)\r\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:212)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:205)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:323)\r\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:268)\r\nException in thread &quot;main&quot; \r\n```\r\n\r\nI can only guess that Eclipse tries to inject some `TestRunner` (indeed a `RemoteTestRunner`) in my application classpath when running the tests, which was compiled under for a newer JVM (class file version 52, which IIRC is compatible with java 8 upwards).\r\n\r\n**Is there a official/unofficial configuration or workaround for this?**\r\n\r\n\r\n† It&#39;s fun to apply &quot;concrete&quot; quality to a &quot;virtual&quot; machine haha.\r\n\r\n\r\nPS: In vscode I get the very same error (yes, even the &quot;org/eclipse/jdt/internal/junit/runner/RemoteTestRunner&quot; part and the line numbers in stacktrace), with the addition of the message &quot;Could not find the main class: org.eclipse.jdt.internal.junit.runner.RemoteTestRunner. Program will exit.&quot;.\r\n","title":"Running JUnit test with JVM 1.6 under Eclipse 2022-03 (4.23.0)","body":"<p>I have a legacy application that absolutely must compile and run in JVM 1.6.</p>\n<p>But it not enough to specify <code>-source 6 -target 6</code> to a newer compiler (8, 11, 16 whatever JDK version newer than 1.6).</p>\n<p>I really need to develop and test in a &quot;concrete&quot;† JVM 1.6, in my case: OpenJDK 64-Bit Server VM (build 23.25-b01, mixed mode), because the server hosting this application cannot get a JVM update.</p>\n<p>I've managed to configure maven to do it all (the <code>maven.compiler.*</code> properties and the <code>maven-toolchains-plugin</code>) and everything works fine (<code>mvn test</code> -wise):</p>\n<pre><code>[...]\n[INFO]\n[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ [...] ---\n[INFO] Toolchain in surefire-plugin: JDK[openjdk-1.6.0-unofficial-b31-windows-amd64-image]\n[INFO] Surefire report directory: [...]\\target\\surefire-reports\n\n-------------------------------------------------------\n T E S T S\n-------------------------------------------------------\nRunning [...]Test\nTests run: 18, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.149 sec\n[...]\n</code></pre>\n<p>To be really comfortable however, I need to run the unit tests (junit 4.13.2 + mockito-inline 2.8.47 +  powermock 1.7.4) inside Eclipse. But it errors with the following output:</p>\n<pre><code>java.lang.UnsupportedClassVersionError: org/eclipse/jdt/internal/junit/runner/RemoteTestRunner : Unsupported major.minor version 52.0\n    at java.lang.ClassLoader.defineClass1(Native Method)\n    at java.lang.ClassLoader.defineClass(ClassLoader.java:643)\n    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)\n    at java.net.URLClassLoader.access$000(URLClassLoader.java:73)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:212)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:323)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:268)\nException in thread &quot;main&quot; \n</code></pre>\n<p>I can only guess that Eclipse tries to inject some <code>TestRunner</code> (indeed a <code>RemoteTestRunner</code>) in my application classpath when running the tests, which was compiled under for a newer JVM (class file version 52, which IIRC is compatible with java 8 upwards).</p>\n<p><strong>Is there a official/unofficial configuration or workaround for this?</strong></p>\n<p>† It's fun to apply &quot;concrete&quot; quality to a &quot;virtual&quot; machine haha.</p>\n<p>PS: In vscode I get the very same error (yes, even the &quot;org/eclipse/jdt/internal/junit/runner/RemoteTestRunner&quot; part and the line numbers in stacktrace), with the addition of the message &quot;Could not find the main class: org.eclipse.jdt.internal.junit.runner.RemoteTestRunner. Program will exit.&quot;.</p>\n"},{"tags":["java","json","string","serialization","jackson"],"comments":[{"owner":{"account_id":1398557,"reputation":9636,"user_id":1327788,"accept_rate":84,"display_name":"Giovanni Botta"},"score":0,"creation_date":1398446090,"post_id":23297402,"comment_id":35667166,"body_markdown":"It depends on the annotations on the type or how the mapper is configured, e.g., see [this](http://stackoverflow.com/questions/11757487/how-to-tell-jackson-to-ignore-a-field-during-serialization-if-its-value-is-null).","body":"It depends on the annotations on the type or how the mapper is configured, e.g., see <a href=\"http://stackoverflow.com/questions/11757487/how-to-tell-jackson-to-ignore-a-field-during-serialization-if-its-value-is-null\">this</a>."}],"answers":[{"tags":[],"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1398447880,"creation_date":1398447880,"answer_id":23299705,"question_id":23297402,"body_markdown":"Jackson should serialize `null` fields to `null` by default. See the following example\r\n\r\n    public class Example {\r\n    \r\n    \tpublic static void main(String... args) throws Exception {\r\n    \t\tObjectMapper mapper = new ObjectMapper();\r\n    \t\tmapper.configure(SerializationFeature.INDENT_OUTPUT, true);\r\n    \t\tString json = mapper.writeValueAsString(new Test());\r\n    \t\tSystem.out.println(json);\r\n    \t}\r\n    \r\n    \tstatic class Test {\r\n    \t\tprivate String help = &quot;something&quot;;\r\n    \t\tprivate String nope = null;\r\n    \r\n    \t\tpublic String getHelp() {\r\n    \t\t\treturn help;\r\n    \t\t}\r\n    \r\n    \t\tpublic void setHelp(String help) {\r\n    \t\t\tthis.help = help;\r\n    \t\t}\r\n    \r\n    \t\tpublic String getNope() {\r\n    \t\t\treturn nope;\r\n    \t\t}\r\n    \r\n    \t\tpublic void setNope(String nope) {\r\n    \t\t\tthis.nope = nope;\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nprints\r\n\r\n    {\r\n      &quot;help&quot; : &quot;something&quot;,\r\n      &quot;nope&quot; : null\r\n    }\r\n\r\nYou don&#39;t need to do anything special.\r\n","title":"Enable Object Mapper writeValueAsString method to include null values","body":"<p>Jackson should serialize <code>null</code> fields to <code>null</code> by default. See the following example</p>\n\n<pre><code>public class Example {\n\n    public static void main(String... args) throws Exception {\n        ObjectMapper mapper = new ObjectMapper();\n        mapper.configure(SerializationFeature.INDENT_OUTPUT, true);\n        String json = mapper.writeValueAsString(new Test());\n        System.out.println(json);\n    }\n\n    static class Test {\n        private String help = \"something\";\n        private String nope = null;\n\n        public String getHelp() {\n            return help;\n        }\n\n        public void setHelp(String help) {\n            this.help = help;\n        }\n\n        public String getNope() {\n            return nope;\n        }\n\n        public void setNope(String nope) {\n            this.nope = nope;\n        }\n    }\n}\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>{\n  \"help\" : \"something\",\n  \"nope\" : null\n}\n</code></pre>\n\n<p>You don't need to do anything special.</p>\n"},{"tags":[],"owner":{"account_id":2734023,"reputation":2572,"user_id":2357083,"display_name":"Abbin Varghese"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1568313951,"creation_date":1488546535,"answer_id":42579739,"question_id":23297402,"body_markdown":"`Include.ALWAYS` worked for me.\r\n    objectMapper.setSerializationInclusion(com.fasterxml.jackson.annotation.JsonInclude.Include.ALWAYS);\r\n\r\nOther possible values for `Include` are:\r\n\r\n - `Include.NON_DEFAULT`  \r\n - `Include.NON_EMPTY` \r\n - `Include.NON_NULL`","title":"Enable Object Mapper writeValueAsString method to include null values","body":"<p><code>Include.ALWAYS</code> worked for me.\n    objectMapper.setSerializationInclusion(com.fasterxml.jackson.annotation.JsonInclude.Include.ALWAYS);</p>\n\n<p>Other possible values for <code>Include</code> are:</p>\n\n<ul>\n<li><code>Include.NON_DEFAULT</code>  </li>\n<li><code>Include.NON_EMPTY</code> </li>\n<li><code>Include.NON_NULL</code></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2604846,"reputation":2439,"user_id":2256217,"accept_rate":95,"display_name":"Ananda G"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660143627,"creation_date":1660143627,"answer_id":73308550,"question_id":23297402,"body_markdown":"I&#39;ve faced similar issue with `SpringBoot`, it could miss the getter function for the entity class. \r\n\r\nI included `@Getter` in spring entity class and it was fixed. ","title":"Enable Object Mapper writeValueAsString method to include null values","body":"<p>I've faced similar issue with <code>SpringBoot</code>, it could miss the getter function for the entity class.</p>\n<p>I included <code>@Getter</code> in spring entity class and it was fixed.</p>\n"}],"owner":{"account_id":1483810,"reputation":3590,"user_id":1392498,"accept_rate":76,"display_name":"LINGS"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93603,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":3,"score":13,"last_activity_date":1660143627,"creation_date":1398440210,"question_id":23297402,"body_markdown":"I have a JSON object which may contain a few `null` values.\r\nI use `ObjectMapper` from `com.fasterxml.jackson.databind` to convert my JSON object as `String`.\r\n\r\n    private ObjectMapper mapper = new ObjectMapper();\r\n    String json = mapper.writeValueAsString(object);\r\n\r\nIf my object contains any field that contains a value as `null`, then that field is not included in the `String` that comes from `writeValueAsString()`.\r\nI want my `ObjectMapper` to give me all fields in the `String` even if their value is `null`.\r\n\r\nExample:\r\n\r\n    object = {&quot;name&quot;: &quot;John&quot;, &quot;id&quot;: 10}\r\n    json   = {&quot;name&quot;: &quot;John&quot;, &quot;id&quot;: 10}\r\n\r\n    object = {&quot;name&quot;: &quot;John&quot;, &quot;id&quot;: null}\r\n    json   = {&quot;name&quot;: &quot;John&quot;}\r\n\r\n","title":"Enable Object Mapper writeValueAsString method to include null values","body":"<p>I have a JSON object which may contain a few <code>null</code> values.\nI use <code>ObjectMapper</code> from <code>com.fasterxml.jackson.databind</code> to convert my JSON object as <code>String</code>.</p>\n\n<pre><code>private ObjectMapper mapper = new ObjectMapper();\nString json = mapper.writeValueAsString(object);\n</code></pre>\n\n<p>If my object contains any field that contains a value as <code>null</code>, then that field is not included in the <code>String</code> that comes from <code>writeValueAsString()</code>.\nI want my <code>ObjectMapper</code> to give me all fields in the <code>String</code> even if their value is <code>null</code>.</p>\n\n<p>Example:</p>\n\n<pre><code>object = {\"name\": \"John\", \"id\": 10}\njson   = {\"name\": \"John\", \"id\": 10}\n\nobject = {\"name\": \"John\", \"id\": null}\njson   = {\"name\": \"John\"}\n</code></pre>\n"},{"tags":["java","bigdecimal"],"comments":[{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1651761460,"post_id":72127397,"comment_id":127444383,"body_markdown":"Do you want to actually modify the number or simply provided a rounded representation of the number?","body":"Do you want to actually modify the number or simply provided a rounded representation of the number?"}],"answers":[{"tags":[],"owner":{"account_id":24732895,"reputation":1,"user_id":18620663,"display_name":"Agus Ocampo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651754973,"creation_date":1651754973,"answer_id":72127450,"question_id":72127397,"body_markdown":"You should try this\r\n\r\n     DecimalFormat df = new DecimalFormat(&quot;###.###&quot;);\r\n\r\nHere&#39;s a Baeldung article about it:\r\n [https://www.baeldung.com/java-round-decimal-number][1]\r\n\r\nHope it helps!\r\n\r\n\r\n  [1]: https://www.baeldung.com/java-round-decimal-number","title":"How to round decimal part of number so it doesn&#39;t affect whole the part of number?","body":"<p>You should try this</p>\n<pre><code> DecimalFormat df = new DecimalFormat(&quot;###.###&quot;);\n</code></pre>\n<p>Here's a Baeldung article about it:\n<a href=\"https://www.baeldung.com/java-round-decimal-number\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-round-decimal-number</a></p>\n<p>Hope it helps!</p>\n"},{"tags":[],"owner":{"account_id":9072254,"reputation":1014,"user_id":6754986,"display_name":"LinFelix"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651755015,"creation_date":1651755015,"answer_id":72127465,"question_id":72127397,"body_markdown":"You cannot really do that because floats and doubles do not work like that.\r\n\r\nHowever, this could solve your problem:\r\n\r\n```java\r\nround((-68.65121847597993)*10)/10f;\r\n```\r\n\r\nalso see: https://stackoverflow.com/questions/5051395/java-float-123-129456-to-123-12-without-rounding","title":"How to round decimal part of number so it doesn&#39;t affect whole the part of number?","body":"<p>You cannot really do that because floats and doubles do not work like that.</p>\n<p>However, this could solve your problem:</p>\n<pre class=\"lang-java prettyprint-override\"><code>round((-68.65121847597993)*10)/10f;\n</code></pre>\n<p>also see: <a href=\"https://stackoverflow.com/questions/5051395/java-float-123-129456-to-123-12-without-rounding\">Java float 123.129456 to 123.12 without rounding</a></p>\n"},{"tags":[],"owner":{"account_id":24183082,"reputation":582,"user_id":18143450,"display_name":"Matei Piele"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651755148,"creation_date":1651755148,"answer_id":72127483,"question_id":72127397,"body_markdown":"If your value is a double, this method takes the lowest time on compiling:\r\n\r\n    Math.round(num * 10d) / 10d\r\n\r\nNumber of 0&#39;s = number of decimals","title":"How to round decimal part of number so it doesn&#39;t affect whole the part of number?","body":"<p>If your value is a double, this method takes the lowest time on compiling:</p>\n<pre><code>Math.round(num * 10d) / 10d\n</code></pre>\n<p>Number of 0's = number of decimals</p>\n"},{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651822956,"creation_date":1651755402,"answer_id":72127545,"question_id":72127397,"body_markdown":"I would do it as in nearly every other language:\r\n```\r\ndouble input = -68.65121847597993;\r\ndouble rounded = Math.floor(input * 10.0 + 0.5)/10.0;\r\n```\r\n\r\nWith a `BigDecimal` you have more options like a rounding mode and `setScale` if you need that.\r\n\r\nAnd there are third party libraries like [decimal4j][1] or [Apache Commons Math][2] - though I didn&#39;t test them.\r\n\r\n\r\n  [1]: https://github.com/tools4j/decimal4j\r\n  [2]: https://commons.apache.org/proper/commons-math/","title":"How to round decimal part of number so it doesn&#39;t affect whole the part of number?","body":"<p>I would do it as in nearly every other language:</p>\n<pre><code>double input = -68.65121847597993;\ndouble rounded = Math.floor(input * 10.0 + 0.5)/10.0;\n</code></pre>\n<p>With a <code>BigDecimal</code> you have more options like a rounding mode and <code>setScale</code> if you need that.</p>\n<p>And there are third party libraries like <a href=\"https://github.com/tools4j/decimal4j\" rel=\"nofollow noreferrer\">decimal4j</a> or <a href=\"https://commons.apache.org/proper/commons-math/\" rel=\"nofollow noreferrer\">Apache Commons Math</a> - though I didn't test them.</p>\n"},{"tags":[],"owner":{"account_id":25203462,"reputation":26,"user_id":19042111,"display_name":"Vijay Nayar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1651755498,"creation_date":1651755498,"answer_id":72127573,"question_id":72127397,"body_markdown":"In order to represent a number with that many decimal points, I presume you are using `BigDecimal` rather than `double`, which can only accurately represent approximately [15 significant digits][1].\r\n\r\nStarting from a [BigDecimal][2], which you can initialize with a string, a double, or anything else you have, you can call [BigDecimal::setScale][3] to get the value you want.\r\n\r\nFor example:\r\n```\r\nimport java.math.*;\r\n\r\npublic class HelloWorld {\r\n  public static void main(String []args){\r\n    BigDecimal b = new BigDecimal(&quot;68.65121847597993&quot;);\r\n    BigDecimal rounded = b.setScale(2, RoundingMode.HALF_UP);\r\n    System.out.println(rounded);  // 68.65\r\n  }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/13542944/how-many-significant-digits-do-floats-and-doubles-have-in-java\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html\r\n  [3]: https://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#setScale(int,%20java.math.RoundingMode)","title":"How to round decimal part of number so it doesn&#39;t affect whole the part of number?","body":"<p>In order to represent a number with that many decimal points, I presume you are using <code>BigDecimal</code> rather than <code>double</code>, which can only accurately represent approximately <a href=\"https://stackoverflow.com/questions/13542944/how-many-significant-digits-do-floats-and-doubles-have-in-java\">15 significant digits</a>.</p>\n<p>Starting from a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\">BigDecimal</a>, which you can initialize with a string, a double, or anything else you have, you can call <a href=\"https://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#setScale(int,%20java.math.RoundingMode)\" rel=\"nofollow noreferrer\">BigDecimal::setScale</a> to get the value you want.</p>\n<p>For example:</p>\n<pre><code>import java.math.*;\n\npublic class HelloWorld {\n  public static void main(String []args){\n    BigDecimal b = new BigDecimal(&quot;68.65121847597993&quot;);\n    BigDecimal rounded = b.setScale(2, RoundingMode.HALF_UP);\n    System.out.println(rounded);  // 68.65\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23598221,"reputation":40,"user_id":17635091,"display_name":"Alecasa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651756772,"creation_date":1651756772,"answer_id":72127873,"question_id":72127397,"body_markdown":"Try this \r\n\r\n    BigDecimal bd = new BigDecimal(Double.toString(number));\r\n    bd = bd.setScale(decimalPlaces, RoundingMode.HALF_UP);\r\n    return bd.doubleValue();","title":"How to round decimal part of number so it doesn&#39;t affect whole the part of number?","body":"<p>Try this</p>\n<pre><code>BigDecimal bd = new BigDecimal(Double.toString(number));\nbd = bd.setScale(decimalPlaces, RoundingMode.HALF_UP);\nreturn bd.doubleValue();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651761788,"creation_date":1651761788,"answer_id":72129114,"question_id":72127397,"body_markdown":"Rather than change the number (so its current precision can be still used in subsequent calculations), you can control the display as follows.\r\n```\r\ndouble v = 68.65121847597993;\r\nSystem.out.printf(&quot;%.1f%n&quot;, v);\r\n```\r\nprints\r\n```\r\n68.7","title":"How to round decimal part of number so it doesn&#39;t affect whole the part of number?","body":"<p>Rather than change the number (so its current precision can be still used in subsequent calculations), you can control the display as follows.</p>\n<pre><code>double v = 68.65121847597993;\nSystem.out.printf(&quot;%.1f%n&quot;, v);\n</code></pre>\n<p>prints</p>\n<pre><code>68.7\n</code></pre>\n"}],"owner":{"account_id":24002641,"reputation":30,"user_id":17995870,"display_name":"Artur May"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":134,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1651854342,"accepted_answer_id":72127573,"answer_count":7,"score":-2,"last_activity_date":1660143597,"creation_date":1651754690,"question_id":72127397,"body_markdown":"I have this BigDecimal number - `68.65121847597993` and I want to round it like this - `68.7`, so only decimical part of number would be rounded up, but not the whole number.\r\n\r\nI tried to use RoundingMode.HALF_UP but it rounds up the whole number as well.\r\nIs there a way to round up only decimical part of number using java?\r\n","title":"How to round decimal part of number so it doesn&#39;t affect whole the part of number?","body":"<p>I have this BigDecimal number - <code>68.65121847597993</code> and I want to round it like this - <code>68.7</code>, so only decimical part of number would be rounded up, but not the whole number.</p>\n<p>I tried to use RoundingMode.HALF_UP but it rounds up the whole number as well.\nIs there a way to round up only decimical part of number using java?</p>\n"},{"tags":["java","completable-future"],"answers":[{"tags":[],"owner":{"account_id":319988,"reputation":10970,"user_id":638028,"accept_rate":91,"display_name":"Klitos Kyriacou"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1659990068,"creation_date":1659959459,"answer_id":73277439,"question_id":73277128,"body_markdown":"The &quot;surprising&quot; results are due to how `findPricesStream` is implemented: it returns `shops.stream().map(shop -&gt; CompletableFuture.supplyAsync(...)`. The CompletableFuture is not constructed until a terminal operation is applied to the returned stream. This is done in your own method, after you call `.toList()`.\r\n\r\nThe terminal operation `toList()` does this:\r\n1. For the first `shop`, it constructs a `CompletableFuture`, which starts running.\r\n2. The CompletableFuture is joined, i.e. the main thread waits until it is finished.\r\n3. Then the next CompletableFuture is constructed for the next shop, and so on.\r\n\r\nSo the prices are calculated sequentially. To make the calculations run in parallel, create the list first (so that all futures are started) and _then_ join them:\r\n\r\n    3.     List&lt;CompletableFuture&lt;Void&gt;&gt; futures = findPricesStream(WHATEVER_PRODUCT_NAME)\r\n    4.             .map(completableFuture -&gt; completableFuture.thenAccept(\r\n    5.                     s -&gt; System.out.println(s + &quot; (done in &quot; + (System.nanoTime() - start) / 1_000_000 + &quot; msecs)&quot;)))\r\n    6.             .toList();\r\n    7.     List&lt;Void&gt; results = futures.stream()\r\n               .map(CompletableFuture::join)\r\n               .toList();\r\n","title":"How to use join for a stream of CompletableFuture","body":"<p>The &quot;surprising&quot; results are due to how <code>findPricesStream</code> is implemented: it returns <code>shops.stream().map(shop -&gt; CompletableFuture.supplyAsync(...)</code>. The CompletableFuture is not constructed until a terminal operation is applied to the returned stream. This is done in your own method, after you call <code>.toList()</code>.</p>\n<p>The terminal operation <code>toList()</code> does this:</p>\n<ol>\n<li>For the first <code>shop</code>, it constructs a <code>CompletableFuture</code>, which starts running.</li>\n<li>The CompletableFuture is joined, i.e. the main thread waits until it is finished.</li>\n<li>Then the next CompletableFuture is constructed for the next shop, and so on.</li>\n</ol>\n<p>So the prices are calculated sequentially. To make the calculations run in parallel, create the list first (so that all futures are started) and <em>then</em> join them:</p>\n<pre><code>3.     List&lt;CompletableFuture&lt;Void&gt;&gt; futures = findPricesStream(WHATEVER_PRODUCT_NAME)\n4.             .map(completableFuture -&gt; completableFuture.thenAccept(\n5.                     s -&gt; System.out.println(s + &quot; (done in &quot; + (System.nanoTime() - start) / 1_000_000 + &quot; msecs)&quot;)))\n6.             .toList();\n7.     List&lt;Void&gt; results = futures.stream()\n           .map(CompletableFuture::join)\n           .toList();\n</code></pre>\n"}],"owner":{"account_id":7438670,"reputation":991,"user_id":5657159,"display_name":"Uvuvwevwevwe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3518,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":73277439,"answer_count":1,"score":4,"last_activity_date":1660143596,"creation_date":1659958018,"question_id":73277128,"body_markdown":"Supposedly, I have the following method\r\n\r\n````\r\npublic static Stream&lt;CompletableFuture&lt;String&gt;&gt; findPricesStream(String product) {}\r\n````\r\n\r\nThis method will look for the cheapest price given a ``product`` and it returns a stream of CompletableFuture.\r\n\r\nNow I want to react to the value in the stream as soon as it is available. To do that, \r\nI adopt the method ``thenAccept`` and the implementation could be as following\r\n\r\n````\r\n    1. public static void reactToEarliestResultWithRaw() {\r\n    2.     long start = System.nanoTime();\r\n    3.     CompletableFuture[] priceFuture = findPricesStream(WHATEVER_PRODUCT_NAME)\r\n    4.             .map(completableFuture -&gt; completableFuture.thenAccept(\r\n    5.                     s -&gt; System.out.println(s + &quot; (done in &quot; + (System.nanoTime() - start) / 1_000_000 + &quot; msecs)&quot;)))\r\n    6.             .toArray(CompletableFuture[]::new);\r\n    7.     CompletableFuture.allOf(priceFuture).join();\r\n    8.     System.out.println(&quot;All shops have now responded in &quot; + (System.nanoTime() - start) / 1_000_000 + &quot; msecs&quot;);\r\n    9. }\r\n````\r\n\r\nWith this implementation, I got the desired output\r\n\r\n````\r\nLetsSaveBig price is 151.227 (done in 5476 msecs)\r\nBuyItAll price is 211.66 (done in 5747 msecs)\r\nMyFavoriteShop price is 206.30200000000002 (done in 6968 msecs)\r\nBestPrice price is 131.917 (done in 8110 msecs)\r\nAll shops have now responded in 8110 msecs\r\n````\r\n\r\nNow I would like to take a further step to make the code more readable.\r\nI chained another map that is responsible for joining all of CompletableFuture\r\n\r\n````\r\n    1. public static void reactToEarliestResultWithoutRaw() {\r\n    2.     long start = System.nanoTime();\r\n    3.     List&lt;Void&gt; completeFutures = findPricesStream(WHATEVER_PRODUCT_NAME)\r\n    4.             .map(completableFuture -&gt; completableFuture.thenAccept(\r\n    5.                     s -&gt; System.out.println(s + &quot; (done in &quot; + (System.nanoTime() - start) / 1_000_000 + &quot; msecs)&quot;)))\r\n    6.             .map(CompletableFuture::join)\r\n    7.             .toList();\r\n    8.     int size = completeFutures.size();\r\n    9.     if (isComplete(size)) {\r\n    10.         System.out.println(&quot;All shops have now responded in &quot; + (System.nanoTime() - start) / 1_000_000 + &quot; msecs&quot;);\r\n    11. }\r\n    12.\r\n    13. private static boolean isComplete(int size) {\r\n    14.     return size == shops.size();\r\n    15. }    \r\n````\r\n\r\nI got the output\r\n\r\n````\r\nBestPrice price is 123.17400000000002 (done in 2060 msecs)\r\nLetsSaveBig price is 109.67200000000001 (done in 6025 msecs)\r\nMyFavoriteShop price is 131.21099999999998 (done in 13860 msecs)\r\nBuyItAll price is 164.392 (done in 18434 msecs)\r\nAll shops have now responded in 18434 msecs\r\n````\r\n\r\nThe result makes me surprised!\r\nI expect the elapsed time for both should be somehow _the same_, but they are a huge difference.\r\n\r\nDo I misunderstand the way of using ``join`` here?\r\n\r\n# Reference\r\nThe implementation comes from the book ``Modern Java in Action: Lambdas, streams, functional and reactive programming 2nd Edition`` and\r\nI have modified it a bit for the experiment.\r\n","title":"How to use join for a stream of CompletableFuture","body":"<p>Supposedly, I have the following method</p>\n<pre><code>public static Stream&lt;CompletableFuture&lt;String&gt;&gt; findPricesStream(String product) {}\n</code></pre>\n<p>This method will look for the cheapest price given a <code>product</code> and it returns a stream of CompletableFuture.</p>\n<p>Now I want to react to the value in the stream as soon as it is available. To do that,\nI adopt the method <code>thenAccept</code> and the implementation could be as following</p>\n<pre><code>    1. public static void reactToEarliestResultWithRaw() {\n    2.     long start = System.nanoTime();\n    3.     CompletableFuture[] priceFuture = findPricesStream(WHATEVER_PRODUCT_NAME)\n    4.             .map(completableFuture -&gt; completableFuture.thenAccept(\n    5.                     s -&gt; System.out.println(s + &quot; (done in &quot; + (System.nanoTime() - start) / 1_000_000 + &quot; msecs)&quot;)))\n    6.             .toArray(CompletableFuture[]::new);\n    7.     CompletableFuture.allOf(priceFuture).join();\n    8.     System.out.println(&quot;All shops have now responded in &quot; + (System.nanoTime() - start) / 1_000_000 + &quot; msecs&quot;);\n    9. }\n</code></pre>\n<p>With this implementation, I got the desired output</p>\n<pre><code>LetsSaveBig price is 151.227 (done in 5476 msecs)\nBuyItAll price is 211.66 (done in 5747 msecs)\nMyFavoriteShop price is 206.30200000000002 (done in 6968 msecs)\nBestPrice price is 131.917 (done in 8110 msecs)\nAll shops have now responded in 8110 msecs\n</code></pre>\n<p>Now I would like to take a further step to make the code more readable.\nI chained another map that is responsible for joining all of CompletableFuture</p>\n<pre><code>    1. public static void reactToEarliestResultWithoutRaw() {\n    2.     long start = System.nanoTime();\n    3.     List&lt;Void&gt; completeFutures = findPricesStream(WHATEVER_PRODUCT_NAME)\n    4.             .map(completableFuture -&gt; completableFuture.thenAccept(\n    5.                     s -&gt; System.out.println(s + &quot; (done in &quot; + (System.nanoTime() - start) / 1_000_000 + &quot; msecs)&quot;)))\n    6.             .map(CompletableFuture::join)\n    7.             .toList();\n    8.     int size = completeFutures.size();\n    9.     if (isComplete(size)) {\n    10.         System.out.println(&quot;All shops have now responded in &quot; + (System.nanoTime() - start) / 1_000_000 + &quot; msecs&quot;);\n    11. }\n    12.\n    13. private static boolean isComplete(int size) {\n    14.     return size == shops.size();\n    15. }    \n</code></pre>\n<p>I got the output</p>\n<pre><code>BestPrice price is 123.17400000000002 (done in 2060 msecs)\nLetsSaveBig price is 109.67200000000001 (done in 6025 msecs)\nMyFavoriteShop price is 131.21099999999998 (done in 13860 msecs)\nBuyItAll price is 164.392 (done in 18434 msecs)\nAll shops have now responded in 18434 msecs\n</code></pre>\n<p>The result makes me surprised!\nI expect the elapsed time for both should be somehow <em>the same</em>, but they are a huge difference.</p>\n<p>Do I misunderstand the way of using <code>join</code> here?</p>\n<h1>Reference</h1>\n<p>The implementation comes from the book <code>Modern Java in Action: Lambdas, streams, functional and reactive programming 2nd Edition</code> and\nI have modified it a bit for the experiment.</p>\n"},{"tags":["java","amazon-web-services","redis","amazon-eks"],"comments":[{"owner":{"account_id":1022874,"reputation":33518,"user_id":1032785,"accept_rate":50,"display_name":"jordanm"},"score":0,"creation_date":1660144052,"post_id":73308336,"comment_id":129464485,"body_markdown":"What ingress controller are you using? Not all of them can do TCP services.","body":"What ingress controller are you using? Not all of them can do TCP services."},{"owner":{"account_id":14445834,"reputation":65,"user_id":10435004,"display_name":"Bakula33"},"score":0,"creation_date":1660202384,"post_id":73308336,"comment_id":129478236,"body_markdown":"AWS ingress controller","body":"AWS ingress controller"},{"owner":{"account_id":1022874,"reputation":33518,"user_id":1032785,"accept_rate":50,"display_name":"jordanm"},"score":0,"creation_date":1660227892,"post_id":73308336,"comment_id":129487569,"body_markdown":"AWS ingress controller provisions a ALB, which can not do TCP. You can create an NLB using that controller by doing a service with `type: LoadBalancer` instead of an ingress, which does do TCP.","body":"AWS ingress controller provisions a ALB, which can not do TCP. You can create an NLB using that controller by doing a service with <code>type: LoadBalancer</code> instead of an ingress, which does do TCP."}],"owner":{"account_id":14445834,"reputation":65,"user_id":10435004,"display_name":"Bakula33"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":247,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660142712,"creation_date":1660142712,"question_id":73308336,"body_markdown":"I am running Redis Cluster on EKS as a statefulset and the service is headless. Everything is working properly but the backend application has a test which need to access the host url during the build process. I have tried to expose service with ingress, but still not working. Can you please suggest me some solution?\r\n\r\nThank you in advance!","title":"Exposing Redis Service on EKS Cluster","body":"<p>I am running Redis Cluster on EKS as a statefulset and the service is headless. Everything is working properly but the backend application has a test which need to access the host url during the build process. I have tried to expose service with ingress, but still not working. Can you please suggest me some solution?</p>\n<p>Thank you in advance!</p>\n"},{"tags":["java","spring","date"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1660138880,"post_id":73307289,"comment_id":129462243,"body_markdown":"An `Instant` has no `DayOfWeek`. Try to use the `ZonedDateTime` directly","body":"An <code>Instant</code> has no <code>DayOfWeek</code>. Try to use the <code>ZonedDateTime</code> directly"},{"owner":{"account_id":20732441,"reputation":1553,"user_id":15224052,"display_name":"Oliver"},"score":1,"creation_date":1660138882,"post_id":73307289,"comment_id":129462244,"body_markdown":"What line/statement throws the exception? `Instant` has no `DayOfWeek`, so that is probably the issue.","body":"What line/statement throws the exception? <code>Instant</code> has no <code>DayOfWeek</code>, so that is probably the issue."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":3,"creation_date":1660139614,"post_id":73307289,"comment_id":129462587,"body_markdown":"A `ZonedDateTime` is a `Temporal` but it isn&#39;t a `Comparable` and it needs both hence the compilation error. So it doesn&#39;t fulfill the contract. A plain instant is just a point in time it doesn&#39;t have a notion of day of week. Using a `LocalDateTime` or `OffsetDateTime` should work.","body":"A <code>ZonedDateTime</code> is a <code>Temporal</code> but it isn&#39;t a <code>Comparable</code> and it needs both hence the compilation error. So it doesn&#39;t fulfill the contract. A plain instant is just a point in time it doesn&#39;t have a notion of day of week. Using a <code>LocalDateTime</code> or <code>OffsetDateTime</code> should work."},{"owner":{"account_id":13998926,"reputation":41,"user_id":10111061,"display_name":"Eloyas"},"score":2,"creation_date":1660140348,"post_id":73307289,"comment_id":129462928,"body_markdown":"I see comparable in the implemented interfaces on ZonedDateTime: https://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html\nAm I not reading it right?","body":"I see comparable in the implemented interfaces on ZonedDateTime: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.ht&zwnj;&#8203;ml</a> Am I not reading it right?"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1660141486,"post_id":73307289,"comment_id":129463390,"body_markdown":"Oliver&#39;s answer seems to work when I try it. How come you get a compile error? Can you try again? If it still gives you an error, try compiling Oliver&#39;s code in a new empty project and go from there.","body":"Oliver&#39;s answer seems to work when I try it. How come you get a compile error? Can you try again? If it still gives you an error, try compiling Oliver&#39;s code in a new empty project and go from there."},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1660141607,"post_id":73307289,"comment_id":129463441,"body_markdown":"@M.Deinum in what way is ZonedDateTime not a Comparable?","body":"@M.Deinum in what way is ZonedDateTime not a Comparable?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1660142065,"post_id":73307289,"comment_id":129463618,"body_markdown":"Hmm not sure which version I was looking at, but I had one which didn&#39;t implement `Comparable`... Weird.","body":"Hmm not sure which version I was looking at, but I had one which didn&#39;t implement <code>Comparable</code>... Weird."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1660142393,"post_id":73307289,"comment_id":129463755,"body_markdown":"I was looking at the source and it implements `Comparable` through `ChronoZonedDateTime`. However that actually breaks as the `Comparable` is for `Comparable&lt;ChronoZonedDateTime&gt;` as `T` resolved to `ZonedDateTime`. So it probably has to do with the hierarchy of the `ZonedDateTime` (or the generic declaration of the `next` method) that it doesn&#39;t match.","body":"I was looking at the source and it implements <code>Comparable</code> through <code>ChronoZonedDateTime</code>. However that actually breaks as the <code>Comparable</code> is for <code>Comparable&lt;ChronoZonedDateTime&gt;</code> as <code>T</code> resolved to <code>ZonedDateTime</code>. So it probably has to do with the hierarchy of the <code>ZonedDateTime</code> (or the generic declaration of the <code>next</code> method) that it doesn&#39;t match."}],"answers":[{"tags":[],"owner":{"account_id":20732441,"reputation":1553,"user_id":15224052,"display_name":"Oliver"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1660139152,"creation_date":1660139152,"answer_id":73307460,"question_id":73307289,"body_markdown":"As I mentioned in my comment, `Instant` has no `DayOfWeek`.\r\n\r\n```java\r\nString cron = &quot;0 0 21 * * MON-FRI&quot;;\r\nCronExpression cronExpression = CronExpression.parse(cron);\r\nZonedDateTime next = cronExpression.next(ZonedDateTime.now());\r\n```","title":"Can&#39;t use Spring-context&#39;s cronExpression with ZonedDateTime","body":"<p>As I mentioned in my comment, <code>Instant</code> has no <code>DayOfWeek</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String cron = &quot;0 0 21 * * MON-FRI&quot;;\nCronExpression cronExpression = CronExpression.parse(cron);\nZonedDateTime next = cronExpression.next(ZonedDateTime.now());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13998926,"reputation":41,"user_id":10111061,"display_name":"Eloyas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660142471,"creation_date":1660141694,"answer_id":73308102,"question_id":73307289,"body_markdown":"Using an OffsetDateTime instead of ZonedDateTime solved the problem, but I&#39;m still not sure why. Maybe there&#39;s a problem  in the implementation of CronExpression?\r\n\r\nTrying to skip the conversion to Instant, with ZonedDateTime and LocalDateTime resulted in a compilation error. It worked with OffsetDateTime, though.","title":"Can&#39;t use Spring-context&#39;s cronExpression with ZonedDateTime","body":"<p>Using an OffsetDateTime instead of ZonedDateTime solved the problem, but I'm still not sure why. Maybe there's a problem  in the implementation of CronExpression?</p>\n<p>Trying to skip the conversion to Instant, with ZonedDateTime and LocalDateTime resulted in a compilation error. It worked with OffsetDateTime, though.</p>\n"}],"owner":{"account_id":13998926,"reputation":41,"user_id":10111061,"display_name":"Eloyas"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":568,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73308102,"answer_count":2,"score":1,"last_activity_date":1660142471,"creation_date":1660138494,"question_id":73307289,"body_markdown":"I&#39;m trying to get the next execution of a cron in spring.\r\nPreviously, I was using CronSequenceGenerator, but since it is deprecated, I&#39;m trying to update to CronExpression. I use a ZonedDateTime as the current date to find the next one.\r\n\r\n    String cron = &quot;0 0 21 * * MON-FRI&quot;;\r\n    CronExpression cronExpression = CronExpression.parse(cron);\r\n    ZonedDateTime date = ZonedDateTime.parse(&quot;2021-04-12T21:00-04:00[America/Montreal]&quot;);\r\n    Instant next = cronExpression.next(date.toInstant());\r\n\r\n\r\nThe problem is that when I try, I always get an exception, no matter the cron.\r\n\r\n    java.time.temporal.UnsupportedTemporalTypeException: Unsupported field: DayOfWeek\r\n        at java.base/java.time.Instant.get(Instant.java:565)\r\n    \tat org.springframework.scheduling.support.CronField$Type.get(CronField.java:200)\r\n    \tat org.springframework.scheduling.support.BitsCronField.nextOrSame(BitsCronField.java:180)\r\n    \tat org.springframework.scheduling.support.CronExpression.nextOrSameInternal(CronExpression.java:264)\r\n    \tat org.springframework.scheduling.support.CronExpression.nextOrSame(CronExpression.java:252)\r\n    \tat org.springframework.scheduling.support.CronExpression.next(CronExpression.java:245)\r\n        [...]\r\n\r\nI don&#39;t know why I&#39;m getting this error. If I try to just pass the ZonedDateTime (as it is a Temporal and cronExpression.next takes Temporal) I get a compilation error.\r\n\r\n    java: incompatible types: inference variable T has incompatible bounds\r\n    lower bounds: java.time.Instant,java.time.chrono.ChronoZonedDateTime&lt;?&gt;,java.lang.Object,java.time.temporal.Temporal,java.lang.Comparable&lt;? super T&gt;\r\n    lower bounds: java.time.ZonedDateTime\r\n\r\nCan anyone tell me what I&#39;m doing wrong?\r\n\r\nI&#39;m using Java11 with spring-context 5.3.20\r\n\r\nHere&#39;s the documentation I&#39;m consulting:\r\nhttps://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/support/CronExpression.html\r\nhttps://docs.oracle.com/javase/8/docs/api/java/time/temporal/Temporal.html?is-external=true","title":"Can&#39;t use Spring-context&#39;s cronExpression with ZonedDateTime","body":"<p>I'm trying to get the next execution of a cron in spring.\nPreviously, I was using CronSequenceGenerator, but since it is deprecated, I'm trying to update to CronExpression. I use a ZonedDateTime as the current date to find the next one.</p>\n<pre><code>String cron = &quot;0 0 21 * * MON-FRI&quot;;\nCronExpression cronExpression = CronExpression.parse(cron);\nZonedDateTime date = ZonedDateTime.parse(&quot;2021-04-12T21:00-04:00[America/Montreal]&quot;);\nInstant next = cronExpression.next(date.toInstant());\n</code></pre>\n<p>The problem is that when I try, I always get an exception, no matter the cron.</p>\n<pre><code>java.time.temporal.UnsupportedTemporalTypeException: Unsupported field: DayOfWeek\n    at java.base/java.time.Instant.get(Instant.java:565)\n    at org.springframework.scheduling.support.CronField$Type.get(CronField.java:200)\n    at org.springframework.scheduling.support.BitsCronField.nextOrSame(BitsCronField.java:180)\n    at org.springframework.scheduling.support.CronExpression.nextOrSameInternal(CronExpression.java:264)\n    at org.springframework.scheduling.support.CronExpression.nextOrSame(CronExpression.java:252)\n    at org.springframework.scheduling.support.CronExpression.next(CronExpression.java:245)\n    [...]\n</code></pre>\n<p>I don't know why I'm getting this error. If I try to just pass the ZonedDateTime (as it is a Temporal and cronExpression.next takes Temporal) I get a compilation error.</p>\n<pre><code>java: incompatible types: inference variable T has incompatible bounds\nlower bounds: java.time.Instant,java.time.chrono.ChronoZonedDateTime&lt;?&gt;,java.lang.Object,java.time.temporal.Temporal,java.lang.Comparable&lt;? super T&gt;\nlower bounds: java.time.ZonedDateTime\n</code></pre>\n<p>Can anyone tell me what I'm doing wrong?</p>\n<p>I'm using Java11 with spring-context 5.3.20</p>\n<p>Here's the documentation I'm consulting:\n<a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/support/CronExpression.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/support/CronExpression.html</a>\n<a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/temporal/Temporal.html?is-external=true\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/time/temporal/Temporal.html?is-external=true</a></p>\n"},{"tags":["java","authentication"],"comments":[{"owner":{"account_id":6921189,"reputation":1490,"user_id":5313817,"display_name":"Rishal"},"score":0,"creation_date":1660143623,"post_id":73308256,"comment_id":129464317,"body_markdown":"share your url details which are working which are not working.","body":"share your url details which are working which are not working."},{"owner":{"account_id":25539177,"reputation":1,"user_id":19325607,"display_name":"dkrspeedline"},"score":0,"creation_date":1660394569,"post_id":73308256,"comment_id":129525711,"body_markdown":"This one does not work: http://localhost:8080/getall The working entpoints are: http://localhost:8080/auth/register and http://localhost:8080/auth/login","body":"This one does not work: <a href=\"http://localhost:8080/getall\" rel=\"nofollow noreferrer\">localhost:8080/getall</a> The working entpoints are: <a href=\"http://localhost:8080/auth/register\" rel=\"nofollow noreferrer\">localhost:8080/auth/register</a> and <a href=\"http://localhost:8080/auth/login\" rel=\"nofollow noreferrer\">localhost:8080/auth/login</a>"}],"owner":{"account_id":25539177,"reputation":1,"user_id":19325607,"display_name":"dkrspeedline"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660142346,"creation_date":1660142346,"question_id":73308256,"body_markdown":"I am using SpringSecurity and JSON Webtoken to authenticate to my Backend. To test my API i use Postman.\r\nI am able to Register. (Response: 200)\r\nI am able to Login. (Respons: 200 + BearerToken)\r\nI am not(!) able to request any other entry point. (Response: 401 Unauthorized)\r\n\r\nThe error Message is: &quot;Full authentication is required to access this resource&quot;\r\n\r\nParts of my POM:\r\n\r\n        &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\r\n            &lt;version&gt;0.9.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\nSecurity configuration\r\n\r\n    @EnableWebSecurity\r\n    public class SecurityConfiguration {\r\n    \r\n        // Token Entry Point\r\n    \r\n        @Autowired\r\n        private JwtAuthentificationEntryPoint jwtAuthentificationEntryPoint;\r\n    \r\n        // Token Filter\r\n    \r\n        @Bean\r\n        public JwtAuthentificationFilter jwtAuthentificationFilter(){\r\n            return new JwtAuthentificationFilter();\r\n        }\r\n    \r\n        // Passwort Encoder\r\n    \r\n        @Bean\r\n        public PasswordEncoder passwordEncoder(){\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n    \r\n        @Bean\r\n        public AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration) throws Exception {\r\n            return authenticationConfiguration.getAuthenticationManager();\r\n        }\r\n    \r\n        // Filter Chain\r\n    \r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception{\r\n            log.info(&quot;-----&gt; Filterchain called! &quot;);\r\n            http\r\n                    .cors()\r\n                    .and()\r\n                    .csrf()\r\n                    .disable()\r\n                    .exceptionHandling()\r\n                    .authenticationEntryPoint(jwtAuthentificationEntryPoint)\r\n                    .and()\r\n                    .sessionManagement()\r\n                    .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                    .and()\r\n                    .authorizeHttpRequests()\r\n                    .antMatchers(&quot;/auth/**&quot;)\r\n                    .permitAll()\r\n                    .anyRequest()\r\n                    .authenticated();\r\n            return http.build();\r\n        }\r\n    }\r\n\r\nMy authentication Controller\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/auth&quot;)\r\n    public class AuthController {\r\n\r\n    private UserRepository userRepository;\r\n\r\n    private PasswordEncoder passwordEncoder;\r\n\r\n    private AuthenticationManager authenticationManager;\r\n\r\n    private JwtTokenProvider jwtTokenProvider;\r\n\r\n    public AuthController(UserRepository userRepository, PasswordEncoder passwordEncoder, AuthenticationManager authenticationManager, JwtTokenProvider jwtTokenProvider) {\r\n        this.userRepository = userRepository;\r\n        this.passwordEncoder = passwordEncoder;\r\n        this.authenticationManager = authenticationManager;\r\n        this.jwtTokenProvider = jwtTokenProvider;\r\n    }\r\n\r\n    @PostMapping(value = &quot;/register&quot;)\r\n    public ResponseEntity&lt;UserEntity&gt; register(@RequestBody AuthRequest authRequest){\r\n        Optional&lt;UserEntity&gt; userOptional = userRepository.findByEmail(authRequest.getEmail());\r\n\r\n        if(userOptional.isPresent()){\r\n            log.info(&quot;User {} existiert bereits&quot;,authRequest.getEmail());\r\n            return ResponseEntity.badRequest().build();\r\n        }\r\n\r\n        UserEntity user = new UserEntity();\r\n        user.setEmail(authRequest.getEmail());\r\n        user.setPassword(passwordEncoder.encode(authRequest.getPassword()));\r\n\r\n        UserEntity createdUser = userRepository.save(user);\r\n        log.info(&quot;Benutzer {} erfolgreich registriert&quot;, user.getEmail());\r\n        return ResponseEntity.ok(createdUser);\r\n    }\r\n\r\n    @PostMapping(value = &quot;/login&quot;)\r\n    public ResponseEntity&lt;String&gt; login(@RequestBody AuthRequest authRequest){\r\n        log.info(&quot;Login Request {}&quot;, authRequest.getEmail());\r\n        Authentication authentication = authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(authRequest.getEmail(), authRequest.getPassword()));\r\n        return ResponseEntity.ok(jwtTokenProvider.generiereToken(authentication));\r\n    }\r\n}\r\n\r\nAuthenticationEntryPoint\r\n\r\n    @Component\r\n    public class JwtAuthentificationEntryPoint implements AuthenticationEntryPoint {\r\n\r\n    @Override\r\n    public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException) throws IOException, ServletException {\r\n        log.info(&quot;jwtEntryPoint called&quot;);\r\n        log.info(String.valueOf(&quot;---------- request getUserPrincipal ----------&quot;));\r\n        log.info(String.valueOf(request.getUserPrincipal()));\r\n        log.info(String.valueOf(&quot;---------- request getRequestURL ----------&quot;));\r\n        log.info(String.valueOf(request.getRequestURL()));\r\n        log.info(String.valueOf(&quot;---------- request getMethod ----------&quot;));\r\n        log.info(String.valueOf(request.getMethod()));\r\n        log.info(String.valueOf(&quot;---------- response Status ----------&quot;));\r\n        log.info(String.valueOf(response.getStatus()));\r\n        log.info(String.valueOf(&quot;---------- authException ----------&quot;));\r\n        log.info(String.valueOf(authException));\r\n        response.sendError(HttpServletResponse.SC_UNAUTHORIZED);\r\n    }\r\n}\r\n\r\nJWTAuthenticationFilter\r\n\r\n    public class JwtAuthentificationFilter extends OncePerRequestFilter {\r\n\r\n    @Autowired\r\n    private JwtTokenProvider jwtTokenProvider;\r\n\r\n    @Autowired\r\n    private CustomUserDetailsService customUserDetailsService;\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n        log.info(&quot;dofilter im JwtAuthenticationFilter called.&quot;);\r\n        String jwt = getJwtFromRequest(request);\r\n        if(StringUtils.hasText(jwt) &amp;&amp;  jwtTokenProvider.validateToken(jwt)){\r\n            log.info(&quot;---------- Bedingung true ----------&quot;);\r\n            //log.info(jwt);\r\n            //log.info(String.valueOf(jwtTokenProvider.validateToken(jwt)));\r\n        }\r\n        else {\r\n            log.info(&quot;---------- Bedingung false ----------&quot;);\r\n            //String.valueOf(jwtTokenProvider.validateToken(jwt));\r\n        }\r\n        if(StringUtils.hasText(jwt) &amp;&amp;  jwtTokenProvider.validateToken(jwt)){\r\n            String mail = jwtTokenProvider.getUserMailFromToken(jwt);\r\n            log.info(&quot;---------- mail ----------&quot;);\r\n            log.info(mail);\r\n            UserDetails userDetails = customUserDetailsService.loadUserByUsername(mail);\r\n            log.info(String.valueOf(&quot;---------- userDetails ----------&quot;));\r\n            log.info(String.valueOf(userDetails));\r\n            UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(userDetails,null,userDetails.getAuthorities());\r\n            log.info(String.valueOf(&quot;---------- authentication ----------&quot;));\r\n            log.info(String.valueOf(authentication));\r\n            authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n            SecurityContextHolder.getContext().setAuthentication(authentication);\r\n        }\r\n        filterChain.doFilter(request,response);\r\n    }\r\n\r\n    private String getJwtFromRequest(HttpServletRequest request){\r\n        log.info(&quot;getJwtTokenFromRequest called.&quot;);\r\n        log.info(&quot;---------- Request Header ----------&quot;);\r\n        log.info(String.valueOf(request.getHeader(&quot;Authorization&quot;)));\r\n        String bearertoken = request.getHeader(&quot;Authorization&quot;);\r\n\r\n        if (StringUtils.hasText(bearertoken) &amp;&amp; bearertoken.startsWith(&quot;Bearer &quot;)){\r\n            log.info(&quot;Bearer Token in getJwtFromRequest konnte ermittelt werden.&quot;);\r\n            return bearertoken.substring(7);\r\n        }\r\n        log.error(&quot;Bearer Token in getJwtFromRequest konnte nicht ermittelt werden.&quot;);\r\n        log.info(&quot;---------- Token ----------&quot;);\r\n        log.info(bearertoken);\r\n        return null;\r\n    }\r\n}\r\n\r\nJWTTokenProvider\r\n\r\n    @Component\r\n    public class JwtTokenProvider {\r\n\r\n    @Value(&quot;{$app.jwtsecret}&quot;)\r\n    private String jwtSecret;\r\n\r\n    public String generiereToken(String userEmail){\r\n        Instant jetzt = Instant.now();\r\n        Instant ablauf = jetzt.plus(7, ChronoUnit.DAYS);\r\n\r\n        return Jwts.builder()\r\n                .setSubject(userEmail)\r\n                .setIssuedAt(Date.from(jetzt))\r\n                .setExpiration(Date.from(ablauf))\r\n                .signWith(SignatureAlgorithm.HS512, jwtSecret)\r\n                .compact();\r\n    }\r\n\r\n    public String generiereToken(Authentication authentication){\r\n        User user = (User) authentication.getPrincipal();\r\n        return generiereToken(user.getUsername());\r\n    }\r\n\r\n    public String getUserMailFromToken(String token){\r\n        Claims claims = Jwts\r\n                .parser()\r\n                .setSigningKey(jwtSecret)\r\n                .parseClaimsJws(token)\r\n                .getBody();\r\n\r\n        return claims.getSubject();\r\n    }\r\n\r\n    public boolean validateToken(String token){\r\n        try{\r\n            Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(token);\r\n            return true;\r\n        } catch (ExpiredJwtException e) {\r\n            e.printStackTrace();\r\n            log.info(&quot;Token abgelaufen&quot;);\r\n        } catch (UnsupportedJwtException e) {\r\n            e.printStackTrace();\r\n            log.info(&quot;Token nicht supported.&quot;);\r\n        } catch (MalformedJwtException e) {\r\n            e.printStackTrace();\r\n            log.info(&quot;MalformedJwtException&quot;);\r\n        } catch (SignatureException e) {\r\n            e.printStackTrace();\r\n            log.info(&quot;Signatur ung&#252;ltig&quot;);\r\n        } catch (IllegalArgumentException e) {\r\n            e.printStackTrace();\r\n            log.info(&quot;IllegalArgumentException&quot;);\r\n        }\r\n        return false;\r\n    }\r\n\r\n}\r\n\r\n\r\nThe entry point i try to call after successful login\r\n\r\n    @RestController\r\n    public class aktivitaetenAPI {\r\n\r\n    @Autowired\r\n    AktivitaetenService aktivitaetenService;\r\n\r\n    @GetMapping(&quot;/getall&quot;)\r\n    public List&lt;AktivitaetenEntity&gt; getAll(){\r\n        log.info(&quot;getall request&quot;);\r\n        return aktivitaetenService.findAll();\r\n    }\r\n}\r\n\r\nI am really happy for any answers.\r\nThanks in advance!\r\n\r\nDaniel\r\n\r\n","title":"SpringSecurity &quot;Full authentication is required to access this resource&quot; / JWT Token / Access API after login","body":"<p>I am using SpringSecurity and JSON Webtoken to authenticate to my Backend. To test my API i use Postman.\nI am able to Register. (Response: 200)\nI am able to Login. (Respons: 200 + BearerToken)\nI am not(!) able to request any other entry point. (Response: 401 Unauthorized)</p>\n<p>The error Message is: &quot;Full authentication is required to access this resource&quot;</p>\n<p>Parts of my POM:</p>\n<pre><code>    &lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n        &lt;artifactId&gt;h2&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n        &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\n        &lt;version&gt;0.9.1&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>Security configuration</p>\n<pre><code>@EnableWebSecurity\npublic class SecurityConfiguration {\n\n    // Token Entry Point\n\n    @Autowired\n    private JwtAuthentificationEntryPoint jwtAuthentificationEntryPoint;\n\n    // Token Filter\n\n    @Bean\n    public JwtAuthentificationFilter jwtAuthentificationFilter(){\n        return new JwtAuthentificationFilter();\n    }\n\n    // Passwort Encoder\n\n    @Bean\n    public PasswordEncoder passwordEncoder(){\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration) throws Exception {\n        return authenticationConfiguration.getAuthenticationManager();\n    }\n\n    // Filter Chain\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception{\n        log.info(&quot;-----&gt; Filterchain called! &quot;);\n        http\n                .cors()\n                .and()\n                .csrf()\n                .disable()\n                .exceptionHandling()\n                .authenticationEntryPoint(jwtAuthentificationEntryPoint)\n                .and()\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .authorizeHttpRequests()\n                .antMatchers(&quot;/auth/**&quot;)\n                .permitAll()\n                .anyRequest()\n                .authenticated();\n        return http.build();\n    }\n}\n</code></pre>\n<p>My authentication Controller</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/auth&quot;)\npublic class AuthController {\n\nprivate UserRepository userRepository;\n\nprivate PasswordEncoder passwordEncoder;\n\nprivate AuthenticationManager authenticationManager;\n\nprivate JwtTokenProvider jwtTokenProvider;\n\npublic AuthController(UserRepository userRepository, PasswordEncoder passwordEncoder, AuthenticationManager authenticationManager, JwtTokenProvider jwtTokenProvider) {\n    this.userRepository = userRepository;\n    this.passwordEncoder = passwordEncoder;\n    this.authenticationManager = authenticationManager;\n    this.jwtTokenProvider = jwtTokenProvider;\n}\n\n@PostMapping(value = &quot;/register&quot;)\npublic ResponseEntity&lt;UserEntity&gt; register(@RequestBody AuthRequest authRequest){\n    Optional&lt;UserEntity&gt; userOptional = userRepository.findByEmail(authRequest.getEmail());\n\n    if(userOptional.isPresent()){\n        log.info(&quot;User {} existiert bereits&quot;,authRequest.getEmail());\n        return ResponseEntity.badRequest().build();\n    }\n\n    UserEntity user = new UserEntity();\n    user.setEmail(authRequest.getEmail());\n    user.setPassword(passwordEncoder.encode(authRequest.getPassword()));\n\n    UserEntity createdUser = userRepository.save(user);\n    log.info(&quot;Benutzer {} erfolgreich registriert&quot;, user.getEmail());\n    return ResponseEntity.ok(createdUser);\n}\n\n@PostMapping(value = &quot;/login&quot;)\npublic ResponseEntity&lt;String&gt; login(@RequestBody AuthRequest authRequest){\n    log.info(&quot;Login Request {}&quot;, authRequest.getEmail());\n    Authentication authentication = authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(authRequest.getEmail(), authRequest.getPassword()));\n    return ResponseEntity.ok(jwtTokenProvider.generiereToken(authentication));\n}\n</code></pre>\n<p>}</p>\n<p>AuthenticationEntryPoint</p>\n<pre><code>@Component\npublic class JwtAuthentificationEntryPoint implements AuthenticationEntryPoint {\n\n@Override\npublic void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException) throws IOException, ServletException {\n    log.info(&quot;jwtEntryPoint called&quot;);\n    log.info(String.valueOf(&quot;---------- request getUserPrincipal ----------&quot;));\n    log.info(String.valueOf(request.getUserPrincipal()));\n    log.info(String.valueOf(&quot;---------- request getRequestURL ----------&quot;));\n    log.info(String.valueOf(request.getRequestURL()));\n    log.info(String.valueOf(&quot;---------- request getMethod ----------&quot;));\n    log.info(String.valueOf(request.getMethod()));\n    log.info(String.valueOf(&quot;---------- response Status ----------&quot;));\n    log.info(String.valueOf(response.getStatus()));\n    log.info(String.valueOf(&quot;---------- authException ----------&quot;));\n    log.info(String.valueOf(authException));\n    response.sendError(HttpServletResponse.SC_UNAUTHORIZED);\n}\n</code></pre>\n<p>}</p>\n<p>JWTAuthenticationFilter</p>\n<pre><code>public class JwtAuthentificationFilter extends OncePerRequestFilter {\n\n@Autowired\nprivate JwtTokenProvider jwtTokenProvider;\n\n@Autowired\nprivate CustomUserDetailsService customUserDetailsService;\n\n@Override\nprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n    log.info(&quot;dofilter im JwtAuthenticationFilter called.&quot;);\n    String jwt = getJwtFromRequest(request);\n    if(StringUtils.hasText(jwt) &amp;&amp;  jwtTokenProvider.validateToken(jwt)){\n        log.info(&quot;---------- Bedingung true ----------&quot;);\n        //log.info(jwt);\n        //log.info(String.valueOf(jwtTokenProvider.validateToken(jwt)));\n    }\n    else {\n        log.info(&quot;---------- Bedingung false ----------&quot;);\n        //String.valueOf(jwtTokenProvider.validateToken(jwt));\n    }\n    if(StringUtils.hasText(jwt) &amp;&amp;  jwtTokenProvider.validateToken(jwt)){\n        String mail = jwtTokenProvider.getUserMailFromToken(jwt);\n        log.info(&quot;---------- mail ----------&quot;);\n        log.info(mail);\n        UserDetails userDetails = customUserDetailsService.loadUserByUsername(mail);\n        log.info(String.valueOf(&quot;---------- userDetails ----------&quot;));\n        log.info(String.valueOf(userDetails));\n        UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(userDetails,null,userDetails.getAuthorities());\n        log.info(String.valueOf(&quot;---------- authentication ----------&quot;));\n        log.info(String.valueOf(authentication));\n        authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n        SecurityContextHolder.getContext().setAuthentication(authentication);\n    }\n    filterChain.doFilter(request,response);\n}\n\nprivate String getJwtFromRequest(HttpServletRequest request){\n    log.info(&quot;getJwtTokenFromRequest called.&quot;);\n    log.info(&quot;---------- Request Header ----------&quot;);\n    log.info(String.valueOf(request.getHeader(&quot;Authorization&quot;)));\n    String bearertoken = request.getHeader(&quot;Authorization&quot;);\n\n    if (StringUtils.hasText(bearertoken) &amp;&amp; bearertoken.startsWith(&quot;Bearer &quot;)){\n        log.info(&quot;Bearer Token in getJwtFromRequest konnte ermittelt werden.&quot;);\n        return bearertoken.substring(7);\n    }\n    log.error(&quot;Bearer Token in getJwtFromRequest konnte nicht ermittelt werden.&quot;);\n    log.info(&quot;---------- Token ----------&quot;);\n    log.info(bearertoken);\n    return null;\n}\n</code></pre>\n<p>}</p>\n<p>JWTTokenProvider</p>\n<pre><code>@Component\npublic class JwtTokenProvider {\n\n@Value(&quot;{$app.jwtsecret}&quot;)\nprivate String jwtSecret;\n\npublic String generiereToken(String userEmail){\n    Instant jetzt = Instant.now();\n    Instant ablauf = jetzt.plus(7, ChronoUnit.DAYS);\n\n    return Jwts.builder()\n            .setSubject(userEmail)\n            .setIssuedAt(Date.from(jetzt))\n            .setExpiration(Date.from(ablauf))\n            .signWith(SignatureAlgorithm.HS512, jwtSecret)\n            .compact();\n}\n\npublic String generiereToken(Authentication authentication){\n    User user = (User) authentication.getPrincipal();\n    return generiereToken(user.getUsername());\n}\n\npublic String getUserMailFromToken(String token){\n    Claims claims = Jwts\n            .parser()\n            .setSigningKey(jwtSecret)\n            .parseClaimsJws(token)\n            .getBody();\n\n    return claims.getSubject();\n}\n\npublic boolean validateToken(String token){\n    try{\n        Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(token);\n        return true;\n    } catch (ExpiredJwtException e) {\n        e.printStackTrace();\n        log.info(&quot;Token abgelaufen&quot;);\n    } catch (UnsupportedJwtException e) {\n        e.printStackTrace();\n        log.info(&quot;Token nicht supported.&quot;);\n    } catch (MalformedJwtException e) {\n        e.printStackTrace();\n        log.info(&quot;MalformedJwtException&quot;);\n    } catch (SignatureException e) {\n        e.printStackTrace();\n        log.info(&quot;Signatur ungültig&quot;);\n    } catch (IllegalArgumentException e) {\n        e.printStackTrace();\n        log.info(&quot;IllegalArgumentException&quot;);\n    }\n    return false;\n}\n</code></pre>\n<p>}</p>\n<p>The entry point i try to call after successful login</p>\n<pre><code>@RestController\npublic class aktivitaetenAPI {\n\n@Autowired\nAktivitaetenService aktivitaetenService;\n\n@GetMapping(&quot;/getall&quot;)\npublic List&lt;AktivitaetenEntity&gt; getAll(){\n    log.info(&quot;getall request&quot;);\n    return aktivitaetenService.findAll();\n}\n</code></pre>\n<p>}</p>\n<p>I am really happy for any answers.\nThanks in advance!</p>\n<p>Daniel</p>\n"},{"tags":["java","android","textview"],"comments":[{"owner":{"account_id":1731053,"reputation":17266,"user_id":1584654,"accept_rate":72,"display_name":"GVillani82"},"score":1,"creation_date":1491940268,"post_id":43354972,"comment_id":73773154,"body_markdown":"The context that you pass in your constructor is probably null","body":"The context that you pass in your constructor is probably null"},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":1,"creation_date":1491940331,"post_id":43354972,"comment_id":73773188,"body_markdown":"No maybe, that&#39;s the only way it can happen.","body":"No maybe, that&#39;s the only way it can happen."},{"owner":{"account_id":6484476,"reputation":481,"user_id":5020491,"accept_rate":70,"display_name":"ksivakumar"},"score":0,"creation_date":1491941580,"post_id":43354972,"comment_id":73773864,"body_markdown":"I understand that there is something that is null, but it is not helpful to just say the error is that. I&#39;m new to Android so I&#39;m looking for an explanation as to what is null and why I need to instantiate it. I thought I instantiated everything I need.","body":"I understand that there is something that is null, but it is not helpful to just say the error is that. I&#39;m new to Android so I&#39;m looking for an explanation as to what is null and why I need to instantiate it. I thought I instantiated everything I need."},{"owner":{"account_id":6484476,"reputation":481,"user_id":5020491,"accept_rate":70,"display_name":"ksivakumar"},"score":0,"creation_date":1491941624,"post_id":43354972,"comment_id":73773888,"body_markdown":"@GVillani82 how do I set my context so it is not null?","body":"@GVillani82 how do I set my context so it is not null?"},{"owner":{"account_id":1731053,"reputation":17266,"user_id":1584654,"accept_rate":72,"display_name":"GVillani82"},"score":0,"creation_date":1491941718,"post_id":43354972,"comment_id":73773945,"body_markdown":"I have no idea: I don&#39;t see the part of your code where you pass the context to the constructor","body":"I have no idea: I don&#39;t see the part of your code where you pass the context to the constructor"}],"owner":{"account_id":6484476,"reputation":481,"user_id":5020491,"accept_rate":70,"display_name":"ksivakumar"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1491940297,"answer_count":0,"score":0,"last_activity_date":1660142233,"creation_date":1491940075,"question_id":43354972,"body_markdown":"I am currently editing the AprilTags code from GitHub found here: https://github.com/johnjwang/apriltag-android/tree/master/src/main. I am trying to set a TextView in an inner static class. \r\n\r\n    static class LinesProgram {\r\n        private static final String vertexShaderCode =\r\n                &quot;uniform mat4 uMVPMatrix;\\n&quot; +\r\n                &quot;attribute vec4 aPosition;\\n&quot; +\r\n                &quot;void main() {\\n&quot; +\r\n                &quot;    gl_Position = uMVPMatrix * aPosition;\\n&quot; +\r\n                &quot;}\\n&quot;;\r\n\r\n        private static final String fragmentShaderCode =\r\n                &quot;precision mediump float;\\n&quot; +\r\n                &quot;uniform vec4 uColor;\\n&quot; +\r\n                &quot;void main() {\\n&quot; +\r\n                &quot;    gl_FragColor = uColor;\\n&quot; +\r\n                &quot;}\\n&quot;;\r\n\r\n        private FloatBuffer buffer;\r\n        private Context context;\r\n\r\n        int programId;\r\n\r\n        int aPositionLoc;\r\n        int uMVPMatrixLoc;\r\n        int uColorLoc;\r\n\r\n        public LinesProgram(Context context) {\r\n            // Compile the shader code into a GL program\r\n            this.context = context;\r\n            int vid = loadShader(GLES20.GL_VERTEX_SHADER, vertexShaderCode);\r\n            int fid = loadShader(GLES20.GL_FRAGMENT_SHADER, fragmentShaderCode);\r\n            programId = GLES20.glCreateProgram();\r\n            checkGlError(&quot;glCreateProgram&quot;);\r\n            GLES20.glAttachShader(programId, vid);\r\n            checkGlError(&quot;glAttachShader&quot;);\r\n            GLES20.glAttachShader(programId, fid);\r\n            checkGlError(&quot;glAttachShader&quot;);\r\n            GLES20.glLinkProgram(programId);\r\n            int[] linkStatus = new int[1];\r\n            GLES20.glGetProgramiv(programId, GLES20.GL_LINK_STATUS, linkStatus, 0);\r\n            if (linkStatus[0] != GLES20.GL_TRUE) {\r\n                Log.e(TAG, &quot;Could not link program: &quot;);\r\n                Log.e(TAG, GLES20.glGetProgramInfoLog(programId));\r\n                GLES20.glDeleteProgram(programId);\r\n            }\r\n\r\n            // Get handles to attributes and uniforms\r\n            aPositionLoc = GLES20.glGetAttribLocation(programId, &quot;aPosition&quot;);\r\n            checkGlError(&quot;get aPosition&quot;);\r\n            uMVPMatrixLoc = GLES20.glGetUniformLocation(programId, &quot;uMVPMatrix&quot;);\r\n            checkGlError(&quot;get uMVPMatrix&quot;);\r\n            uColorLoc = GLES20.glGetUniformLocation(programId, &quot;uColor&quot;);\r\n            checkGlError(&quot;get uColor&quot;);\r\n        }\r\n\r\n        // points = [x0 y0 x1 y1 ...]\r\n        // npoints = number of xy pairs in points (e.g. points is expected to have\r\n        //           a length of at least 2*npoints)\r\n        public void draw(float[] PVM, float[] points, int npoints, float[] rgba, int type) {\r\n            // Reuse points buffer if possible\r\n            if (buffer == null || 2*npoints &gt; buffer.capacity()) {\r\n                int nbytes = 4 * 2*npoints;\r\n                ByteBuffer bb = ByteBuffer.allocateDirect(nbytes);\r\n                bb.order(ByteOrder.nativeOrder());\r\n                buffer = bb.asFloatBuffer();\r\n            }\r\n            buffer.position(0);\r\n            buffer.put(points, 0, 2*npoints);\r\n            buffer.position(0);\r\n\r\n            GLES20.glUseProgram(programId);\r\n            checkGlError(&quot;glUseProgram&quot;);\r\n\r\n            GLES20.glUniformMatrix4fv(uMVPMatrixLoc, 1, false, PVM, 0);\r\n            checkGlError(&quot;glUniformMatrix4fv&quot;);\r\n\r\n            GLES20.glUniform4fv(uColorLoc, 1, rgba, 0);\r\n            checkGlError(&quot;glUniform4fv&quot;);\r\n\r\n            // Render frame\r\n            GLES20.glEnableVertexAttribArray(aPositionLoc);\r\n            GLES20.glVertexAttribPointer(aPositionLoc, 2,\r\n                    GLES20.GL_FLOAT, false, 8, buffer);\r\n\r\n            GLES20.glLineWidth(4.0f);\r\n            GLES20.glDrawArrays(type, 0, npoints);\r\n\r\n            GLES20.glDisableVertexAttribArray(aPositionLoc);\r\n            GLES20.glUseProgram(0);\r\n\r\n            TextView coordinates = (TextView) ((Activity)context).findViewById(R.id.textView1);\r\n            //for (int i = 0; i &lt; points.length; i++) {\r\n            //    coordinates.setText(String.valueOf(points[i]));\r\n            //}\r\n\r\n        }\r\n    }\r\n\r\nHowever, I am getting this error:\r\n\r\n    java.lang.NullPointerException: Attempt to invoke virtual method &#39;android.view.View android.app.Activity.findViewById(int)&#39; on a null object reference\r\n\r\nand the app crashes when it gets to where I set the TextView.\r\n\r\nI&#39;m sure the text view id is the same as defined in the main.xml file. The TextView is within a FrameLayout if that is important.\r\n\r\nIn the onCreate function I defined at the top, `public TextView coordinates;`.\r\n\r\n\r\n","title":"Setting a TextView in an Inner Static Class - Android","body":"<p>I am currently editing the AprilTags code from GitHub found here: <a href=\"https://github.com/johnjwang/apriltag-android/tree/master/src/main\" rel=\"nofollow noreferrer\">https://github.com/johnjwang/apriltag-android/tree/master/src/main</a>. I am trying to set a TextView in an inner static class.</p>\n<pre><code>static class LinesProgram {\n    private static final String vertexShaderCode =\n            &quot;uniform mat4 uMVPMatrix;\\n&quot; +\n            &quot;attribute vec4 aPosition;\\n&quot; +\n            &quot;void main() {\\n&quot; +\n            &quot;    gl_Position = uMVPMatrix * aPosition;\\n&quot; +\n            &quot;}\\n&quot;;\n\n    private static final String fragmentShaderCode =\n            &quot;precision mediump float;\\n&quot; +\n            &quot;uniform vec4 uColor;\\n&quot; +\n            &quot;void main() {\\n&quot; +\n            &quot;    gl_FragColor = uColor;\\n&quot; +\n            &quot;}\\n&quot;;\n\n    private FloatBuffer buffer;\n    private Context context;\n\n    int programId;\n\n    int aPositionLoc;\n    int uMVPMatrixLoc;\n    int uColorLoc;\n\n    public LinesProgram(Context context) {\n        // Compile the shader code into a GL program\n        this.context = context;\n        int vid = loadShader(GLES20.GL_VERTEX_SHADER, vertexShaderCode);\n        int fid = loadShader(GLES20.GL_FRAGMENT_SHADER, fragmentShaderCode);\n        programId = GLES20.glCreateProgram();\n        checkGlError(&quot;glCreateProgram&quot;);\n        GLES20.glAttachShader(programId, vid);\n        checkGlError(&quot;glAttachShader&quot;);\n        GLES20.glAttachShader(programId, fid);\n        checkGlError(&quot;glAttachShader&quot;);\n        GLES20.glLinkProgram(programId);\n        int[] linkStatus = new int[1];\n        GLES20.glGetProgramiv(programId, GLES20.GL_LINK_STATUS, linkStatus, 0);\n        if (linkStatus[0] != GLES20.GL_TRUE) {\n            Log.e(TAG, &quot;Could not link program: &quot;);\n            Log.e(TAG, GLES20.glGetProgramInfoLog(programId));\n            GLES20.glDeleteProgram(programId);\n        }\n\n        // Get handles to attributes and uniforms\n        aPositionLoc = GLES20.glGetAttribLocation(programId, &quot;aPosition&quot;);\n        checkGlError(&quot;get aPosition&quot;);\n        uMVPMatrixLoc = GLES20.glGetUniformLocation(programId, &quot;uMVPMatrix&quot;);\n        checkGlError(&quot;get uMVPMatrix&quot;);\n        uColorLoc = GLES20.glGetUniformLocation(programId, &quot;uColor&quot;);\n        checkGlError(&quot;get uColor&quot;);\n    }\n\n    // points = [x0 y0 x1 y1 ...]\n    // npoints = number of xy pairs in points (e.g. points is expected to have\n    //           a length of at least 2*npoints)\n    public void draw(float[] PVM, float[] points, int npoints, float[] rgba, int type) {\n        // Reuse points buffer if possible\n        if (buffer == null || 2*npoints &gt; buffer.capacity()) {\n            int nbytes = 4 * 2*npoints;\n            ByteBuffer bb = ByteBuffer.allocateDirect(nbytes);\n            bb.order(ByteOrder.nativeOrder());\n            buffer = bb.asFloatBuffer();\n        }\n        buffer.position(0);\n        buffer.put(points, 0, 2*npoints);\n        buffer.position(0);\n\n        GLES20.glUseProgram(programId);\n        checkGlError(&quot;glUseProgram&quot;);\n\n        GLES20.glUniformMatrix4fv(uMVPMatrixLoc, 1, false, PVM, 0);\n        checkGlError(&quot;glUniformMatrix4fv&quot;);\n\n        GLES20.glUniform4fv(uColorLoc, 1, rgba, 0);\n        checkGlError(&quot;glUniform4fv&quot;);\n\n        // Render frame\n        GLES20.glEnableVertexAttribArray(aPositionLoc);\n        GLES20.glVertexAttribPointer(aPositionLoc, 2,\n                GLES20.GL_FLOAT, false, 8, buffer);\n\n        GLES20.glLineWidth(4.0f);\n        GLES20.glDrawArrays(type, 0, npoints);\n\n        GLES20.glDisableVertexAttribArray(aPositionLoc);\n        GLES20.glUseProgram(0);\n\n        TextView coordinates = (TextView) ((Activity)context).findViewById(R.id.textView1);\n        //for (int i = 0; i &lt; points.length; i++) {\n        //    coordinates.setText(String.valueOf(points[i]));\n        //}\n\n    }\n}\n</code></pre>\n<p>However, I am getting this error:</p>\n<pre><code>java.lang.NullPointerException: Attempt to invoke virtual method 'android.view.View android.app.Activity.findViewById(int)' on a null object reference\n</code></pre>\n<p>and the app crashes when it gets to where I set the TextView.</p>\n<p>I'm sure the text view id is the same as defined in the main.xml file. The TextView is within a FrameLayout if that is important.</p>\n<p>In the onCreate function I defined at the top, <code>public TextView coordinates;</code>.</p>\n"},{"tags":["java","sockets","systemd"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1470914080,"post_id":38893293,"comment_id":65148671,"body_markdown":"*Why* does your Java service take 60 seconds to become ready? and why are you starting your clients before all your system services are ready?","body":"<i>Why</i> does your Java service take 60 seconds to become ready? and why are you starting your clients before all your system services are ready?"},{"owner":{"account_id":6512884,"reputation":4874,"user_id":5039582,"accept_rate":29,"display_name":"Mandragor"},"score":0,"creation_date":1470914219,"post_id":38893293,"comment_id":65148758,"body_markdown":"i am not sure what it does. It &quot;optimizes&quot; its database and takes about 60 seconds (sometimes much more) and then it is ready to &quot;serve&quot;. The second is a &quot;client service&quot; , like everybody uses DNS as a client (e.g. nginx to resolve host names). So you cannot run without having the former service up.","body":"i am not sure what it does. It &quot;optimizes&quot; its database and takes about 60 seconds (sometimes much more) and then it is ready to &quot;serve&quot;. The second is a &quot;client service&quot; , like everybody uses DNS as a client (e.g. nginx to resolve host names). So you cannot run without having the former service up."}],"answers":[{"tags":[],"owner":{"account_id":73817,"reputation":19425,"user_id":212378,"accept_rate":57,"display_name":"Alexis Wilke"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1660142074,"creation_date":1472273002,"answer_id":39177539,"question_id":38893293,"body_markdown":"# Initialization Process Requires Forking\r\n\r\nsystemd waits for a daemon to initialize itself if the daemon forks. In your situation, that&#39;s pretty much the only way you have to do this.\r\n\r\nThe daemon offering the HTTP service must do all of its initialization in the main thread, once that initialization is done and the socket is listening for connections, it will `fork()`. The main process then exits. At that point systemd knows that your process was successfully initialized (exit 0) or not (exit 1).\r\n\r\nSuch a service receives the [Type=...][1] value of forking as follow:\r\n\r\n    [Service]\r\n    Type=forking\r\n    ...\r\n\r\n_**Note:** If you are writing new code, consider not using fork. systemd already creates a new process for you so you do not have to fork. That was an old System V boot requirement for services._\r\n\r\n# &quot;Requires&quot; will make sure the process waits\r\n\r\nThe other services have to wait so they have to require the first to be started. Say your first service is called A, you would have a [Requires][2] like this:\r\n\r\n    [Unit]\r\n    ...\r\n    Requires=A\r\n    ...\r\n\r\n# Program with Patience in Mind\r\n\r\nOf course, there is always another way which is for the other services to know to be patient. That means try to connect to the HTTP port, if it fails, sleep for a bit (in your case, 1 or 2 seconds would be just fine) then try again, until it works.\r\n\r\nI have developed both methods and they both work very well.\r\n\r\n_**Note:** A powerful aspect to this method, if service **A** gets restarted, you&#39;d get a new socket. This server can then auto-reconnect to the new socket when it detects that the old one goes down. This means you don&#39;t have to restart the other services when restarting service **A**. I like this method, but it&#39;s a bit more work to make sure it&#39;s all properly implemented._\r\n\r\n# Use the systemd Auto-Restart Feature?\r\n\r\nAnother way, maybe, would be to use the [restart on failure][3]. So if the child attempts to connect to that HTTP service and fails, it should fail, right? systemd can automatically restart your process over and over again until it succeeds. It&#39;s sucky, but if you have no control over the code of those daemons, it&#39;s probably the easiest way.\r\n\r\n    [Service]\r\n    ...\r\n    Restart=on-failure\r\n    RestartSec=10\r\n    #SuccessExitStatus=3 7   # if success is not always just 0\r\n    ...\r\n\r\nThis example waits 10 seconds after a failure before attempting to restart.\r\n\r\n# Hack (last resort, not recommended)\r\n\r\nYou could attempt a hack, although I do not ever recommend such things because something could happen that breaks such... in the services, change the files so that they have a sleep 60 then start the main process. For that, just write a script like so:\r\n\r\n    #!/bin/sh\r\n    sleep 60\r\n    &quot;$@&quot;\r\n\r\nThen in the .service files, call that script as in:\r\n\r\n    ExecStart=/path/to/script /path/to/service args to service\r\n\r\nThis will run the script instead of directly your code. The script will first sleep for 60 seconds and then try to run your service. So if for some reason this time the HTTP service takes 90 seconds... it will still fail.\r\n\r\nStill, this can be useful to know since that script could do all sorts of things, such as use the [`nc`][4] tool to probe the port before actually starting the service process. You could even write your own probing tool.\r\n\r\n    #!/bin/sh\r\n    while true\r\n    do\r\n      sleep 1\r\n      if probe\r\n      then\r\n        break\r\n      fi\r\n    done\r\n    &quot;$@&quot;\r\n\r\nHowever, notice that such a loop is blocking until `probe` returns with exit code 0.\r\n\r\n\r\n  [1]: https://www.freedesktop.org/software/systemd/man/systemd.service.html#Type=\r\n  [2]: https://www.freedesktop.org/software/systemd/man/systemd.unit.html#Requires=\r\n  [3]: https://www.freedesktop.org/software/systemd/man/systemd.service.html#Restart=\r\n  [4]: http://linux.die.net/man/1/nc","title":"wait with systemd until a service socket becomes available and then start a depended service","body":"<h1>Initialization Process Requires Forking</h1>\n<p>systemd waits for a daemon to initialize itself if the daemon forks. In your situation, that's pretty much the only way you have to do this.</p>\n<p>The daemon offering the HTTP service must do all of its initialization in the main thread, once that initialization is done and the socket is listening for connections, it will <code>fork()</code>. The main process then exits. At that point systemd knows that your process was successfully initialized (exit 0) or not (exit 1).</p>\n<p>Such a service receives the <a href=\"https://www.freedesktop.org/software/systemd/man/systemd.service.html#Type=\" rel=\"nofollow noreferrer\">Type=...</a> value of forking as follow:</p>\n<pre><code>[Service]\nType=forking\n...\n</code></pre>\n<p><em><strong>Note:</strong> If you are writing new code, consider not using fork. systemd already creates a new process for you so you do not have to fork. That was an old System V boot requirement for services.</em></p>\n<h1>&quot;Requires&quot; will make sure the process waits</h1>\n<p>The other services have to wait so they have to require the first to be started. Say your first service is called A, you would have a <a href=\"https://www.freedesktop.org/software/systemd/man/systemd.unit.html#Requires=\" rel=\"nofollow noreferrer\">Requires</a> like this:</p>\n<pre><code>[Unit]\n...\nRequires=A\n...\n</code></pre>\n<h1>Program with Patience in Mind</h1>\n<p>Of course, there is always another way which is for the other services to know to be patient. That means try to connect to the HTTP port, if it fails, sleep for a bit (in your case, 1 or 2 seconds would be just fine) then try again, until it works.</p>\n<p>I have developed both methods and they both work very well.</p>\n<p><em><strong>Note:</strong> A powerful aspect to this method, if service <strong>A</strong> gets restarted, you'd get a new socket. This server can then auto-reconnect to the new socket when it detects that the old one goes down. This means you don't have to restart the other services when restarting service <strong>A</strong>. I like this method, but it's a bit more work to make sure it's all properly implemented.</em></p>\n<h1>Use the systemd Auto-Restart Feature?</h1>\n<p>Another way, maybe, would be to use the <a href=\"https://www.freedesktop.org/software/systemd/man/systemd.service.html#Restart=\" rel=\"nofollow noreferrer\">restart on failure</a>. So if the child attempts to connect to that HTTP service and fails, it should fail, right? systemd can automatically restart your process over and over again until it succeeds. It's sucky, but if you have no control over the code of those daemons, it's probably the easiest way.</p>\n<pre><code>[Service]\n...\nRestart=on-failure\nRestartSec=10\n#SuccessExitStatus=3 7   # if success is not always just 0\n...\n</code></pre>\n<p>This example waits 10 seconds after a failure before attempting to restart.</p>\n<h1>Hack (last resort, not recommended)</h1>\n<p>You could attempt a hack, although I do not ever recommend such things because something could happen that breaks such... in the services, change the files so that they have a sleep 60 then start the main process. For that, just write a script like so:</p>\n<pre><code>#!/bin/sh\nsleep 60\n&quot;$@&quot;\n</code></pre>\n<p>Then in the .service files, call that script as in:</p>\n<pre><code>ExecStart=/path/to/script /path/to/service args to service\n</code></pre>\n<p>This will run the script instead of directly your code. The script will first sleep for 60 seconds and then try to run your service. So if for some reason this time the HTTP service takes 90 seconds... it will still fail.</p>\n<p>Still, this can be useful to know since that script could do all sorts of things, such as use the <a href=\"http://linux.die.net/man/1/nc\" rel=\"nofollow noreferrer\"><code>nc</code></a> tool to probe the port before actually starting the service process. You could even write your own probing tool.</p>\n<pre><code>#!/bin/sh\nwhile true\ndo\n  sleep 1\n  if probe\n  then\n    break\n  fi\ndone\n&quot;$@&quot;\n</code></pre>\n<p>However, notice that such a loop is blocking until <code>probe</code> returns with exit code 0.</p>\n"},{"tags":[],"owner":{"account_id":1520428,"reputation":2614,"user_id":1420237,"accept_rate":71,"display_name":"Lucas Werkmeister"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1527780400,"creation_date":1527780400,"answer_id":50627840,"question_id":38893293,"body_markdown":"You have several options here.\r\n\r\n# Use a socket unit\r\n\r\nThe most elegant solution is to let systemd manage the socket for you. If you control the source code of the Java service, change it to use [`System.inheritedChannel()`](https://docs.oracle.com/javase/10/docs/api/java/lang/System.html#inheritedChannel()) instead of allocating its own socket, and then use systemd units like this:\r\n\r\n    # example.socket\r\n    [Socket]\r\n    ListenStream=%t/example\r\n    \r\n    [Install]\r\n    WantedBy=sockets.target\r\n\r\n&amp;nbsp;\r\n\r\n    # example.service\r\n    [Service]\r\n    ExecStart=/usr/bin/java ...\r\n    StandardInput=socket\r\n    StandardOutput=socket\r\n    StandardError=journal\r\n\r\n\r\nsystemd will create the socket immediately (`%t` is the runtime directory, so in a system unit, the socket will be `/run/example`), and start the service as soon as the first connection attempt is made. (If you want the service to be started unconditionally, add an `Install` section to it as well, with `WantedBy=multi-user.target`.) When your client program connects to the socket, it will be queued by the kernel and block until the server is ready to accept connections on the socket. One additional benefit from this is that you can restart the service without any downtime on the socket – connection attempts will be queued until the restarted service is ready to accept connections again.\r\n\r\n# Make the service signal readiness to systemd\r\n\r\nAlternatively, you can set up the service so that it signals to systemd when it is ready, and order the client after it. (Note that this requires `After=example.service`, not just `Requires=example.service`! Dependencies and ordering are orthogonal – without `After=`, both will be started in parallel.) There are two main service types that might make this possible:\r\n\r\n- `Type=forking`: systemd will consider the service to be ready as soon as the main program exits. Since you can’t `fork` in Java, I think you would have to write a small shell script which starts the server in the background and then waits until the socket is available (`while ! test -S /run/example; do sleep 1s; done`). Once the script exits, the service is considered ready.\r\n\r\n- `Type=notify`: systemd will wait for a message from the service before it is considered ready. Ideally, the message should be sent from the service PID itself: check if you can call the `sd_notify` function from libsystemd via JNI/JNA/whatever (specifically, `sd_notify(0, &quot;READY=1&quot;)`). If that’s not possible, you can use the `systemd-notify` command-line tool (`--ready` option), but then you need to set `NotifyAccess=all` in the service unit (by default, only the main process may send notifications), and even then it likely will not work (systemd needs to process the message before `systemd-notify` exits, otherwise it will not be able to verify which cgroup the message came from).","title":"wait with systemd until a service socket becomes available and then start a depended service","body":"<p>You have several options here.</p>\n\n<h1>Use a socket unit</h1>\n\n<p>The most elegant solution is to let systemd manage the socket for you. If you control the source code of the Java service, change it to use <a href=\"https://docs.oracle.com/javase/10/docs/api/java/lang/System.html#inheritedChannel()\" rel=\"noreferrer\"><code>System.inheritedChannel()</code></a> instead of allocating its own socket, and then use systemd units like this:</p>\n\n<pre><code># example.socket\n[Socket]\nListenStream=%t/example\n\n[Install]\nWantedBy=sockets.target\n</code></pre>\n\n<p>&nbsp;</p>\n\n<pre><code># example.service\n[Service]\nExecStart=/usr/bin/java ...\nStandardInput=socket\nStandardOutput=socket\nStandardError=journal\n</code></pre>\n\n<p>systemd will create the socket immediately (<code>%t</code> is the runtime directory, so in a system unit, the socket will be <code>/run/example</code>), and start the service as soon as the first connection attempt is made. (If you want the service to be started unconditionally, add an <code>Install</code> section to it as well, with <code>WantedBy=multi-user.target</code>.) When your client program connects to the socket, it will be queued by the kernel and block until the server is ready to accept connections on the socket. One additional benefit from this is that you can restart the service without any downtime on the socket – connection attempts will be queued until the restarted service is ready to accept connections again.</p>\n\n<h1>Make the service signal readiness to systemd</h1>\n\n<p>Alternatively, you can set up the service so that it signals to systemd when it is ready, and order the client after it. (Note that this requires <code>After=example.service</code>, not just <code>Requires=example.service</code>! Dependencies and ordering are orthogonal – without <code>After=</code>, both will be started in parallel.) There are two main service types that might make this possible:</p>\n\n<ul>\n<li><p><code>Type=forking</code>: systemd will consider the service to be ready as soon as the main program exits. Since you can’t <code>fork</code> in Java, I think you would have to write a small shell script which starts the server in the background and then waits until the socket is available (<code>while ! test -S /run/example; do sleep 1s; done</code>). Once the script exits, the service is considered ready.</p></li>\n<li><p><code>Type=notify</code>: systemd will wait for a message from the service before it is considered ready. Ideally, the message should be sent from the service PID itself: check if you can call the <code>sd_notify</code> function from libsystemd via JNI/JNA/whatever (specifically, <code>sd_notify(0, \"READY=1\")</code>). If that’s not possible, you can use the <code>systemd-notify</code> command-line tool (<code>--ready</code> option), but then you need to set <code>NotifyAccess=all</code> in the service unit (by default, only the main process may send notifications), and even then it likely will not work (systemd needs to process the message before <code>systemd-notify</code> exits, otherwise it will not be able to verify which cgroup the message came from).</p></li>\n</ul>\n"}],"owner":{"account_id":6512884,"reputation":4874,"user_id":5039582,"accept_rate":29,"display_name":"Mandragor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13515,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":39177539,"answer_count":2,"score":6,"last_activity_date":1660142074,"creation_date":1470909982,"question_id":38893293,"body_markdown":"Currently I have slow starting java service in systemd which takes about 60 seconds until it opens its HTTP port and serves other clients.\r\n\r\nAnother client service expects this service to be available (is a client of the this service), otherwise it dies after a certain retry. It also started with systemd. This is to be clear also a service. But uses the former like database.\r\n\r\nCan I configure systemd to wait until the first service has made his socket available?  (something like if the socket is actually listens , then the second client service should start).\r\n\r\n","title":"wait with systemd until a service socket becomes available and then start a depended service","body":"<p>Currently I have slow starting java service in systemd which takes about 60 seconds until it opens its HTTP port and serves other clients.</p>\n\n<p>Another client service expects this service to be available (is a client of the this service), otherwise it dies after a certain retry. It also started with systemd. This is to be clear also a service. But uses the former like database.</p>\n\n<p>Can I configure systemd to wait until the first service has made his socket available?  (something like if the socket is actually listens , then the second client service should start).</p>\n"},{"tags":["java","html","css","selenium","selenium-webdriver"],"comments":[{"owner":{"account_id":12340469,"reputation":82,"user_id":9003853,"display_name":"Bhala T R"},"score":0,"creation_date":1660134269,"post_id":73303214,"comment_id":129460327,"body_markdown":"Try the JavascriptExecutorof Selenium WebDriver \n```\nJavascriptExecutor js = (JavascriptExecutor) driver;  \njs.executeScript(Script);\n```\nHere the Script is something like for your case: &quot;document.getElementsByClassName(&quot;color_11&quot;).value&quot;","body":"Try the JavascriptExecutorof Selenium WebDriver  ``` JavascriptExecutor js = (JavascriptExecutor) driver;   js.executeScript(Script); ``` Here the Script is something like for your case: &quot;document.getElementsByClassName(&quot;color_11&quot;).value&quot;"},{"owner":{"account_id":12347179,"reputation":53,"user_id":9007595,"display_name":"Erhan Yumer"},"score":0,"creation_date":1660139527,"post_id":73303214,"comment_id":129462544,"body_markdown":"Nope. not working. Also I am using Java, not JS. Btw what should I do if that element is inside an iframe? Should I switch to it and then locate element itself? How can I do it?","body":"Nope. not working. Also I am using Java, not JS. Btw what should I do if that element is inside an iframe? Should I switch to it and then locate element itself? How can I do it?"}],"answers":[{"tags":[],"owner":{"account_id":12347179,"reputation":53,"user_id":9007595,"display_name":"Erhan Yumer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660141953,"creation_date":1660141953,"answer_id":73308164,"question_id":73303214,"body_markdown":"Ok so I was not aware of the existence of iframes. The element I was looking for is inside of an iframe. First, I had to locate the iframe, then switch to it and then I located the element itself.\r\n\r\nThe code I used for that is below:\r\n\r\n    driver.switchTo().frame(&quot;iframe&quot;).findElement(By.cssSelector(&quot;#comp-kvi6khho &gt; p:nth-child(1) &gt; span:nth-child(1) &gt; span:nth-child(1)&quot;)).getText();","title":"Selenium WebDriver get text inside of a span","body":"<p>Ok so I was not aware of the existence of iframes. The element I was looking for is inside of an iframe. First, I had to locate the iframe, then switch to it and then I located the element itself.</p>\n<p>The code I used for that is below:</p>\n<pre><code>driver.switchTo().frame(&quot;iframe&quot;).findElement(By.cssSelector(&quot;#comp-kvi6khho &gt; p:nth-child(1) &gt; span:nth-child(1) &gt; span:nth-child(1)&quot;)).getText();\n</code></pre>\n"}],"owner":{"account_id":12347179,"reputation":53,"user_id":9007595,"display_name":"Erhan Yumer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":360,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73308164,"answer_count":1,"score":0,"last_activity_date":1660141953,"creation_date":1660120752,"question_id":73303214,"body_markdown":"I&#39;m trying to extract the `&quot;This is our address&quot;` text inside of a span where HTML code are as follows:\r\n\r\n    &lt;div id=&quot;comp-kvi6khho&quot; class=&quot;2hij5_3bcaz&quot;&gt;\r\n    &lt;p class=&quot;font_8&quot;&gt;\r\n    &lt;span style=&quot;letter-spacing:normal;&quot;&gt;\r\n    &lt;span class=&quot;color_11&quot;&gt;This is our address&lt;/span&gt;\r\n\r\nI have tried: \r\n\r\n    driver.findElement(By.className(&quot;color_11&quot;)).getText();\r\n    driver.findElement(By.cssSelector(&quot;#comp-kvi6khho &gt; p:nth-child(1) &gt; span:nth-child(1) &gt; span:nth-child(1)&quot;)).getText();\r\n    driver.findElement(By.xpath(&quot;/html/body/div[1]/div/div[3]/div/main/div/div/div/div[2]/div/div/div/section[9]/div[2]/div[1]/div[2]/div/div[4]/p/span/span&quot;)).getAttribute(&quot;InnerHTML&quot;);\r\n\r\nso far. But all of them I get `Unable to locate element` error. \r\nHow can I extract the text inside of most inner span class?\r\n\r\n","title":"Selenium WebDriver get text inside of a span","body":"<p>I'm trying to extract the <code>&quot;This is our address&quot;</code> text inside of a span where HTML code are as follows:</p>\n<pre><code>&lt;div id=&quot;comp-kvi6khho&quot; class=&quot;2hij5_3bcaz&quot;&gt;\n&lt;p class=&quot;font_8&quot;&gt;\n&lt;span style=&quot;letter-spacing:normal;&quot;&gt;\n&lt;span class=&quot;color_11&quot;&gt;This is our address&lt;/span&gt;\n</code></pre>\n<p>I have tried:</p>\n<pre><code>driver.findElement(By.className(&quot;color_11&quot;)).getText();\ndriver.findElement(By.cssSelector(&quot;#comp-kvi6khho &gt; p:nth-child(1) &gt; span:nth-child(1) &gt; span:nth-child(1)&quot;)).getText();\ndriver.findElement(By.xpath(&quot;/html/body/div[1]/div/div[3]/div/main/div/div/div/div[2]/div/div/div/section[9]/div[2]/div[1]/div[2]/div/div[4]/p/span/span&quot;)).getAttribute(&quot;InnerHTML&quot;);\n</code></pre>\n<p>so far. But all of them I get <code>Unable to locate element</code> error.\nHow can I extract the text inside of most inner span class?</p>\n"},{"tags":["java","algorithm","printing","tree","directory"],"comments":[{"owner":{"account_id":3564480,"reputation":1938,"user_id":2976424,"display_name":"Kumaresan Perumal"},"score":0,"creation_date":1446212770,"post_id":33437166,"comment_id":54663008,"body_markdown":"refer this link too http://stackoverflow.com/questions/10655085/print-directory-tree","body":"refer this link too <a href=\"http://stackoverflow.com/questions/10655085/print-directory-tree\">stackoverflow.com/questions/10655085/print-directory-tree</a>"},{"owner":{"account_id":1512481,"reputation":3083,"user_id":1414214,"accept_rate":88,"display_name":"Bon"},"score":0,"creation_date":1447902063,"post_id":33437166,"comment_id":55355648,"body_markdown":"Hi Rick, have you got a good answer?","body":"Hi Rick, have you got a good answer?"}],"answers":[{"tags":[],"owner":{"account_id":3564480,"reputation":1938,"user_id":2976424,"display_name":"Kumaresan Perumal"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1446212724,"creation_date":1446212724,"answer_id":33437515,"question_id":33437166,"body_markdown":"    import java.io.File;\r\n    public class FileAssert {\r\n    \r\n    /**\r\n     * Pretty print the directory tree and its file names.\r\n     * \r\n     * @param folder\r\n     *            must be a folder.\r\n     * @return\r\n     */\r\n    public static String printDirectoryTree(File folder) {\r\n        if (!folder.isDirectory()) {\r\n            throw new IllegalArgumentException(&quot;folder is not a Directory&quot;);\r\n        }\r\n        int indent = 0;\r\n        StringBuilder sb = new StringBuilder();\r\n        printDirectoryTree(folder, indent, sb);\r\n        return sb.toString();\r\n    }\r\n    \r\n    private static void printDirectoryTree(File folder, int indent,\r\n            StringBuilder sb) {\r\n        if (!folder.isDirectory()) {\r\n            throw new IllegalArgumentException(&quot;folder is not a Directory&quot;);\r\n        }\r\n        sb.append(getIndentString(indent));\r\n        sb.append(&quot;+--&quot;);\r\n        sb.append(folder.getName());\r\n        sb.append(&quot;/&quot;);\r\n        sb.append(&quot;\\n&quot;);\r\n        for (File file : folder.listFiles()) {\r\n            if (file.isDirectory()) {\r\n                printDirectoryTree(file, indent + 1, sb);\r\n            } else {\r\n                printFile(file, indent + 1, sb);\r\n            }\r\n        }\r\n    \r\n    }\r\n    \r\n    private static void printFile(File file, int indent, StringBuilder sb) {\r\n        sb.append(getIndentString(indent));\r\n        sb.append(&quot;+--&quot;);\r\n        sb.append(file.getName());\r\n        sb.append(&quot;\\n&quot;);\r\n    }\r\n    \r\n    private static String getIndentString(int indent) {\r\n        StringBuilder sb = new StringBuilder();\r\n        for (int i = 0; i &lt; indent; i++) {\r\n            sb.append(&quot;|  &quot;);\r\n        }\r\n        return sb.toString();\r\n    }\r\n    }","title":"print directory like tree command","body":"<pre><code>import java.io.File;\npublic class FileAssert {\n\n/**\n * Pretty print the directory tree and its file names.\n * \n * @param folder\n *            must be a folder.\n * @return\n */\npublic static String printDirectoryTree(File folder) {\n    if (!folder.isDirectory()) {\n        throw new IllegalArgumentException(\"folder is not a Directory\");\n    }\n    int indent = 0;\n    StringBuilder sb = new StringBuilder();\n    printDirectoryTree(folder, indent, sb);\n    return sb.toString();\n}\n\nprivate static void printDirectoryTree(File folder, int indent,\n        StringBuilder sb) {\n    if (!folder.isDirectory()) {\n        throw new IllegalArgumentException(\"folder is not a Directory\");\n    }\n    sb.append(getIndentString(indent));\n    sb.append(\"+--\");\n    sb.append(folder.getName());\n    sb.append(\"/\");\n    sb.append(\"\\n\");\n    for (File file : folder.listFiles()) {\n        if (file.isDirectory()) {\n            printDirectoryTree(file, indent + 1, sb);\n        } else {\n            printFile(file, indent + 1, sb);\n        }\n    }\n\n}\n\nprivate static void printFile(File file, int indent, StringBuilder sb) {\n    sb.append(getIndentString(indent));\n    sb.append(\"+--\");\n    sb.append(file.getName());\n    sb.append(\"\\n\");\n}\n\nprivate static String getIndentString(int indent) {\n    StringBuilder sb = new StringBuilder();\n    for (int i = 0; i &lt; indent; i++) {\n        sb.append(\"|  \");\n    }\n    return sb.toString();\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3568716,"reputation":28786,"user_id":2979617,"display_name":"M Oehm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1446212887,"creation_date":1446212887,"answer_id":33437572,"question_id":33437166,"body_markdown":"You must keep the information whether an item is the last one in the folder for all parent levels. That is, you should make `isLast` an array.\r\n\r\nFor example, when you try to print the item `b111`, that list should be `[true, true, false, true]`. The first entries tell you whether or not to print a vertical line, the last entry tells you wheher to print a corner or a T-junction.","title":"print directory like tree command","body":"<p>You must keep the information whether an item is the last one in the folder for all parent levels. That is, you should make <code>isLast</code> an array.</p>\n\n<p>For example, when you try to print the item <code>b111</code>, that list should be <code>[true, true, false, true]</code>. The first entries tell you whether or not to print a vertical line, the last entry tells you wheher to print a corner or a T-junction.</p>\n"},{"tags":[],"owner":{"account_id":1512481,"reputation":3083,"user_id":1414214,"accept_rate":88,"display_name":"Bon"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660141726,"creation_date":1446215687,"answer_id":33438475,"question_id":33437166,"body_markdown":"Try this one, I added another parameter into your methods called hierarchyTree to indicate if at a certain level, we should print | or empty space.\r\n\r\nIt is used as a stack to easily maintain the folder levels based on the recursion level.\r\n\r\n    public static void main(final String[] args) {\r\n        final File folder = new File(&quot;example&quot;);\r\n        final StringBuilder sb = renderFolder(folder);\r\n        System.out.println(sb.toString());\r\n    }\r\n\r\n    private static StringBuilder renderFolder(File folder) {\r\n        return renderFolder(folder, 0, new StringBuilder(), false, new ArrayList&lt;&gt;());\r\n    }\r\n    \r\n    private static StringBuilder renderFolder(File folder, int level, StringBuilder sb, boolean isLast, List&lt;Boolean&gt; hierarchyTree) {\r\n        indent(sb, level, isLast, hierarchyTree).append(folder.getName()).append(&quot;\\n&quot;);\r\n\r\n        File[] objects = folder.listFiles(new FilenameFilter() {\r\n            @Override\r\n            public boolean accept(File current, String name) {\r\n                return new File(current, name).isDirectory();\r\n            }\r\n        });\r\n\r\n        for (int i = 0; i &lt; objects.length; i++) {\r\n            boolean last = ((i + 1) == objects.length);\r\n\r\n            // this means if the current folder will still need to print subfolders at this level, if yes, then we need to continue print |\r\n            hierarchyTree.add(i != objects.length - 1);\r\n            renderFolder(objects[i], level + 1, sb, last, hierarchyTree);\r\n\r\n            // pop the last value as we return from a lower level to a higher level\r\n            hierarchyTree.remove(hierarchyTree.size() - 1);\r\n        }\r\n        return sb;\r\n    }\r\n\r\n\r\n    private static StringBuilder indent(StringBuilder sb, int level, boolean isLast, List&lt;Boolean&gt; hierarchyTree) {\r\n        String indentContent = &quot;\\u2502   &quot;;\r\n        for (int i = 0; i &lt; hierarchyTree.size() - 1; ++i) {\r\n            // determines if we need to print | at this level to show the tree structure\r\n            // i.e. if this folder has a sibling foler that is going to be printed later\r\n            if (hierarchyTree.get(i)) {\r\n                sb.append(indentContent);\r\n            } else {\r\n                sb.append(&quot;    &quot;); // otherwise print empty space\r\n            }\r\n        }\r\n\r\n        if (level &gt; 0) {\r\n            sb.append(isLast\r\n                    ? &quot;\\u2514\\u2500\\u2500&quot;\r\n                    : &quot;\\u251c\\u2500\\u2500&quot;).append(&quot; &quot;);\r\n        }\r\n\r\n        return sb;\r\n    }\r\n\r\nA sample result:\r\n\r\n    example\r\n    ├── a\r\n    ├── b\r\n    │   └── b1\r\n    │       ├── b11\r\n    │       │   └── b111\r\n    │       └── b12\r\n    │           ├── b121\r\n    │           └── b122\r\n    │               └── b1221\r\n    └── c","title":"print directory like tree command","body":"<p>Try this one, I added another parameter into your methods called hierarchyTree to indicate if at a certain level, we should print | or empty space.</p>\n<p>It is used as a stack to easily maintain the folder levels based on the recursion level.</p>\n<pre><code>public static void main(final String[] args) {\n    final File folder = new File(&quot;example&quot;);\n    final StringBuilder sb = renderFolder(folder);\n    System.out.println(sb.toString());\n}\n\nprivate static StringBuilder renderFolder(File folder) {\n    return renderFolder(folder, 0, new StringBuilder(), false, new ArrayList&lt;&gt;());\n}\n\nprivate static StringBuilder renderFolder(File folder, int level, StringBuilder sb, boolean isLast, List&lt;Boolean&gt; hierarchyTree) {\n    indent(sb, level, isLast, hierarchyTree).append(folder.getName()).append(&quot;\\n&quot;);\n\n    File[] objects = folder.listFiles(new FilenameFilter() {\n        @Override\n        public boolean accept(File current, String name) {\n            return new File(current, name).isDirectory();\n        }\n    });\n\n    for (int i = 0; i &lt; objects.length; i++) {\n        boolean last = ((i + 1) == objects.length);\n\n        // this means if the current folder will still need to print subfolders at this level, if yes, then we need to continue print |\n        hierarchyTree.add(i != objects.length - 1);\n        renderFolder(objects[i], level + 1, sb, last, hierarchyTree);\n\n        // pop the last value as we return from a lower level to a higher level\n        hierarchyTree.remove(hierarchyTree.size() - 1);\n    }\n    return sb;\n}\n\n\nprivate static StringBuilder indent(StringBuilder sb, int level, boolean isLast, List&lt;Boolean&gt; hierarchyTree) {\n    String indentContent = &quot;\\u2502   &quot;;\n    for (int i = 0; i &lt; hierarchyTree.size() - 1; ++i) {\n        // determines if we need to print | at this level to show the tree structure\n        // i.e. if this folder has a sibling foler that is going to be printed later\n        if (hierarchyTree.get(i)) {\n            sb.append(indentContent);\n        } else {\n            sb.append(&quot;    &quot;); // otherwise print empty space\n        }\n    }\n\n    if (level &gt; 0) {\n        sb.append(isLast\n                ? &quot;\\u2514\\u2500\\u2500&quot;\n                : &quot;\\u251c\\u2500\\u2500&quot;).append(&quot; &quot;);\n    }\n\n    return sb;\n}\n</code></pre>\n<p>A sample result:</p>\n<pre><code>example\n├── a\n├── b\n│   └── b1\n│       ├── b11\n│       │   └── b111\n│       └── b12\n│           ├── b121\n│           └── b122\n│               └── b1221\n└── c\n</code></pre>\n"}],"owner":{"account_id":7213725,"reputation":49,"user_id":5506942,"display_name":"RickGrimes"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3299,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"answer_count":3,"score":4,"last_activity_date":1660141726,"creation_date":1446211692,"question_id":33437166,"body_markdown":"I have to print a directory tree.\r\nI have the following code:\r\n\r\n    public static void main(String[] args) throws Exception\r\n    {\r\n        \r\n      File root = new File(&quot;C:\\\\Users\\\\User\\\\Desktop\\\\example&quot;);\r\n\r\n      if (!root.isDirectory())\r\n      {\r\n        throw new IllegalArgumentException(&quot;Invalid directory: &quot; + root.getName());\r\n      }\r\n\r\n      int level = 0;\r\n      System.out.println(renderFolder(root, level, new StringBuilder(), false));\r\n    }\r\n\r\n    private static StringBuilder renderFolder(File folder, int level, StringBuilder sb, boolean isLast)\r\n    {\r\n      indent(sb, level, isLast).append(folder.getName()).append(&quot;\\n&quot;);\r\n\r\n      File[] objects = folder.listFiles();\r\n\r\n      for (int i = 0; i &lt; objects.length; i++)\r\n      {\r\n        boolean last = ((i + 1) == objects.length);\r\n\r\n        if (objects[i].isDirectory())\r\n        {\r\n          renderFolder(objects[i], level + 1, sb, last);\r\n        }\r\n      }\r\n      return sb;\r\n    }\r\n\r\n   \r\n    private static StringBuilder indent(StringBuilder sb, int level, boolean isLast)\r\n    {\r\n     \r\n      for (int i = 1; i &lt; level; i++)\r\n      {\r\n         sb.append(&quot;\\u2502   &quot;);\r\n      }\r\n\r\n      if (level &gt; 0)\r\n      {\r\n        sb.append(isLast\r\n          ? &quot;\\u2514\\u2500\\u2500&quot;\r\n          : &quot;\\u251c\\u2500\\u2500&quot;);\r\n      }\r\n\r\n      return sb;\r\n    }\r\n  \r\nwith this output:\r\n\r\n   \r\n\r\n    example\r\n    ├──a\r\n    └──b\r\n    │   └──b1\r\n    │   │   ├──b11\r\n    │   │   │   └──b111\r\n    │   │   └──b12\r\n    │   │   │   ├──b121\r\n    │   │   │   └──b122\r\n    │   │   │   │   └──b1221\r\n\r\nI didn&#39;t manage to remove the useless deep lines. How to do this?  \r\nAlso my answer is: &quot;How can I keep lines connected(as much as the cmd&#39;s tree command)?&quot;\r\n\r\n\r\n ","title":"print directory like tree command","body":"<p>I have to print a directory tree.\nI have the following code:</p>\n\n<pre><code>public static void main(String[] args) throws Exception\n{\n\n  File root = new File(\"C:\\\\Users\\\\User\\\\Desktop\\\\example\");\n\n  if (!root.isDirectory())\n  {\n    throw new IllegalArgumentException(\"Invalid directory: \" + root.getName());\n  }\n\n  int level = 0;\n  System.out.println(renderFolder(root, level, new StringBuilder(), false));\n}\n\nprivate static StringBuilder renderFolder(File folder, int level, StringBuilder sb, boolean isLast)\n{\n  indent(sb, level, isLast).append(folder.getName()).append(\"\\n\");\n\n  File[] objects = folder.listFiles();\n\n  for (int i = 0; i &lt; objects.length; i++)\n  {\n    boolean last = ((i + 1) == objects.length);\n\n    if (objects[i].isDirectory())\n    {\n      renderFolder(objects[i], level + 1, sb, last);\n    }\n  }\n  return sb;\n}\n\n\nprivate static StringBuilder indent(StringBuilder sb, int level, boolean isLast)\n{\n\n  for (int i = 1; i &lt; level; i++)\n  {\n     sb.append(\"\\u2502   \");\n  }\n\n  if (level &gt; 0)\n  {\n    sb.append(isLast\n      ? \"\\u2514\\u2500\\u2500\"\n      : \"\\u251c\\u2500\\u2500\");\n  }\n\n  return sb;\n}\n</code></pre>\n\n<p>with this output:</p>\n\n<pre><code>example\n├──a\n└──b\n│   └──b1\n│   │   ├──b11\n│   │   │   └──b111\n│   │   └──b12\n│   │   │   ├──b121\n│   │   │   └──b122\n│   │   │   │   └──b1221\n</code></pre>\n\n<p>I didn't manage to remove the useless deep lines. How to do this?<br>\nAlso my answer is: \"How can I keep lines connected(as much as the cmd's tree command)?\"</p>\n"},{"tags":["java","ant","mysql"],"answers":[{"tags":[],"owner":{"account_id":54362,"reputation":11938,"user_id":162634,"accept_rate":62,"display_name":"Victor Sorokin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1252675322,"creation_date":1252675322,"answer_id":1410833,"question_id":1410795,"body_markdown":"You can use Exec task, which will start your script which will perform all actions necessary for dumping (or whatever).","title":"How do I dump a MySQL database using ant?","body":"<p>You can use Exec task, which will start your script which will perform all actions necessary for dumping (or whatever).</p>\n"},{"tags":[],"owner":{"account_id":38278,"reputation":9130,"user_id":109774,"accept_rate":78,"display_name":"Tom van Zummeren"},"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1252675983,"creation_date":1252675586,"answer_id":1410859,"question_id":1410795,"body_markdown":"Create a target that runs the &quot;mysqldump&quot; command like this:\r\n\r\n    &lt;target name=&quot;dump-database&quot;&gt;  \r\n        &lt;exec executable=&quot;mysqldump&quot; output=&quot;database-dump.sql&quot;&gt;  \r\n            &lt;arg value=&quot;--user=username&quot; /&gt;  \r\n            &lt;arg value=&quot;--password=password&quot; /&gt;  \r\n            &lt;arg value=&quot;--host=localhost&quot; /&gt;  \r\n            &lt;arg value=&quot;--port=3306&quot; /&gt;  \r\n            &lt;arg value=&quot;mydatabase&quot; /&gt;  \r\n        &lt;/exec&gt;  \r\n    &lt;/target&gt;  \r\n\r\nNow you can make the dump by executing **ant dump-database**","title":"How do I dump a MySQL database using ant?","body":"<p>Create a target that runs the \"mysqldump\" command like this:</p>\n\n<pre><code>&lt;target name=\"dump-database\"&gt;  \n    &lt;exec executable=\"mysqldump\" output=\"database-dump.sql\"&gt;  \n        &lt;arg value=\"--user=username\" /&gt;  \n        &lt;arg value=\"--password=password\" /&gt;  \n        &lt;arg value=\"--host=localhost\" /&gt;  \n        &lt;arg value=\"--port=3306\" /&gt;  \n        &lt;arg value=\"mydatabase\" /&gt;  \n    &lt;/exec&gt;  \n&lt;/target&gt;  \n</code></pre>\n\n<p>Now you can make the dump by executing <strong>ant dump-database</strong></p>\n"},{"tags":[],"owner":{"account_id":251787,"reputation":5774,"user_id":529403,"accept_rate":76,"display_name":"Ricardo Martins"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1403710051,"creation_date":1343664117,"answer_id":11725166,"question_id":1410795,"body_markdown":"And **to import** some sql file using ant, that is also useful:\r\n\r\n\t\t&lt;exec executable=&quot;mysql&quot; failonerror=&quot;true&quot; input=&quot;file.sql&quot;&gt;\r\n\t\t\t&lt;arg value=&quot;-u ${user}&quot; /&gt;  \r\n\t        &lt;arg value=&quot;-p${pass}&quot; /&gt;  \r\n\t        &lt;arg value=&quot;-h ${host}&quot; /&gt;  \r\n\t        &lt;arg value=&quot;-P 3306&quot; /&gt;  \r\n\t        &lt;arg value=&quot;-D ${database}&quot; /&gt;  \r\n\t\t&lt;/exec&gt;\r\n\r\n*note that the correct is **-ppassword**  and not **-p password**\r\n\r\nor:\r\n\r\n\t\t&lt;exec executable=&quot;mysql&quot; failonerror=&quot;true&quot; input=&quot;file.sql&quot;&gt;\r\n\t\t\t&lt;arg value=&quot;--user=${user}&quot; /&gt;  \r\n\t        &lt;arg value=&quot;--password=${pass}&quot; /&gt;  \r\n\t        &lt;arg value=&quot;--host=${host}&quot; /&gt;  \r\n\t        &lt;arg value=&quot;--port=3306&quot; /&gt;  \r\n\t        &lt;arg value=&quot;--database=${database}&quot; /&gt;  \r\n\t\t&lt;/exec&gt;\r\n\r\nIt&#39;s also nice because it doesn&#39;t use external libs/sql drivers like org.gjt.mm.mysql.Driver.","title":"How do I dump a MySQL database using ant?","body":"<p>And <strong>to import</strong> some sql file using ant, that is also useful:</p>\n\n<pre><code>    &lt;exec executable=\"mysql\" failonerror=\"true\" input=\"file.sql\"&gt;\n        &lt;arg value=\"-u ${user}\" /&gt;  \n        &lt;arg value=\"-p${pass}\" /&gt;  \n        &lt;arg value=\"-h ${host}\" /&gt;  \n        &lt;arg value=\"-P 3306\" /&gt;  \n        &lt;arg value=\"-D ${database}\" /&gt;  \n    &lt;/exec&gt;\n</code></pre>\n\n<p>*note that the correct is <strong>-ppassword</strong>  and not <strong>-p password</strong></p>\n\n<p>or:</p>\n\n<pre><code>    &lt;exec executable=\"mysql\" failonerror=\"true\" input=\"file.sql\"&gt;\n        &lt;arg value=\"--user=${user}\" /&gt;  \n        &lt;arg value=\"--password=${pass}\" /&gt;  \n        &lt;arg value=\"--host=${host}\" /&gt;  \n        &lt;arg value=\"--port=3306\" /&gt;  \n        &lt;arg value=\"--database=${database}\" /&gt;  \n    &lt;/exec&gt;\n</code></pre>\n\n<p>It's also nice because it doesn't use external libs/sql drivers like org.gjt.mm.mysql.Driver.</p>\n"},{"tags":[],"owner":{"account_id":2929630,"reputation":445,"user_id":2510229,"accept_rate":33,"display_name":"Adam Morgan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1448503057,"creation_date":1448503057,"answer_id":33929434,"question_id":1410795,"body_markdown":"If you wanna make it data driven, try this guy out using the ant sql task:\r\n\r\n    &lt;macrodef name=&quot;sql-retrieve-table-schema&quot;&gt;\r\n\t\t&lt;attribute name=&quot;schema-name&quot;/&gt;\r\n\t\t&lt;attribute name=&quot;table-name&quot;/&gt;\r\n\t\t&lt;attribute name=&quot;connection-url&quot;/&gt;\r\n\t\t&lt;attribute name=&quot;output-file&quot;/&gt;\r\n\t\t&lt;sequential&gt;\r\n\t\t\t&lt;sql userid=&quot;username&quot; url=&quot;@{connection-url}&quot;  classpathref=&quot;compile.classpath&quot;\r\n\t\t\t\tpassword=&quot;apassword&quot; driver=&quot;com.mysql.jdbc.Driver&quot; print=&quot;true&quot; output=&quot;@{output-file}&quot;\r\n\t\t\t\tshowheaders=&quot;false&quot; showtrailers=&quot;false&quot;&gt;\r\n\t\t\t\tSHOW CREATE TABLE @{table-name};\r\n\t\t\t&lt;/sql&gt;\r\n\t\t&lt;/sequential&gt;\r\n\t&lt;/macrodef&gt;","title":"How do I dump a MySQL database using ant?","body":"<p>If you wanna make it data driven, try this guy out using the ant sql task:</p>\n\n<pre><code>&lt;macrodef name=\"sql-retrieve-table-schema\"&gt;\n    &lt;attribute name=\"schema-name\"/&gt;\n    &lt;attribute name=\"table-name\"/&gt;\n    &lt;attribute name=\"connection-url\"/&gt;\n    &lt;attribute name=\"output-file\"/&gt;\n    &lt;sequential&gt;\n        &lt;sql userid=\"username\" url=\"@{connection-url}\"  classpathref=\"compile.classpath\"\n            password=\"apassword\" driver=\"com.mysql.jdbc.Driver\" print=\"true\" output=\"@{output-file}\"\n            showheaders=\"false\" showtrailers=\"false\"&gt;\n            SHOW CREATE TABLE @{table-name};\n        &lt;/sql&gt;\n    &lt;/sequential&gt;\n&lt;/macrodef&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26029501,"reputation":1,"user_id":19735954,"display_name":"antenia_jlucas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660140762,"creation_date":1660140762,"answer_id":73307828,"question_id":1410795,"body_markdown":"When I use this solution https://stackoverflow.com/a/1410859/19735954, my dump takes 3 hours to complete while it only takes 20 minutes using the mysqldump command directly (backup weighs 20Go).\r\n\r\nDirect command : \r\n\r\n    mysqldump --login-path=mysql_serv --skip-comments --max-allowed-packet=128M --extended-insert mysql_database &gt; /road/to/output/file.sql\r\n\r\nAnt task : \r\n\r\n    &lt;target name=&quot;backupBDD&quot;&gt;\r\n\t\t&lt;exec executable=&quot;mysqldump&quot; output=&quot;/road/to/output/file.sql&quot;&gt;\r\n\t\t\t&lt;arg value=&quot;--login-path=mysql_serv&quot;/&gt;\r\n\t\t\t&lt;arg value=&quot;--skip-comments&quot; /&gt;\r\n\t\t\t&lt;arg value=&quot;--max-allowed-packet=128M&quot; /&gt;\r\n\t\t\t&lt;arg value=&quot;--extended-insert&quot; /&gt;\r\n\t\t\t&lt;arg value=&quot;mysql_database&quot; /&gt;\r\n\t\t&lt;/exec&gt;\r\n\t&lt;/target&gt;\r\n\r\n\r\nHow to explain this difference ?","title":"How do I dump a MySQL database using ant?","body":"<p>When I use this solution <a href=\"https://stackoverflow.com/a/1410859/19735954\">https://stackoverflow.com/a/1410859/19735954</a>, my dump takes 3 hours to complete while it only takes 20 minutes using the mysqldump command directly (backup weighs 20Go).</p>\n<p>Direct command :</p>\n<pre><code>mysqldump --login-path=mysql_serv --skip-comments --max-allowed-packet=128M --extended-insert mysql_database &gt; /road/to/output/file.sql\n</code></pre>\n<p>Ant task :</p>\n<pre><code>&lt;target name=&quot;backupBDD&quot;&gt;\n    &lt;exec executable=&quot;mysqldump&quot; output=&quot;/road/to/output/file.sql&quot;&gt;\n        &lt;arg value=&quot;--login-path=mysql_serv&quot;/&gt;\n        &lt;arg value=&quot;--skip-comments&quot; /&gt;\n        &lt;arg value=&quot;--max-allowed-packet=128M&quot; /&gt;\n        &lt;arg value=&quot;--extended-insert&quot; /&gt;\n        &lt;arg value=&quot;mysql_database&quot; /&gt;\n    &lt;/exec&gt;\n&lt;/target&gt;\n</code></pre>\n<p>How to explain this difference ?</p>\n"}],"owner":{"account_id":41087,"reputation":3756,"user_id":119333,"accept_rate":86,"display_name":"Martin Magakian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6114,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":1410859,"answer_count":5,"score":10,"last_activity_date":1660140762,"creation_date":1252674918,"question_id":1410795,"body_markdown":"I couldn&#39;t find any information about how to dump a MySQL database with an ant task.\r\n\r\nDo I have to create my own task to do this?\r\n\r\n    ANT script ===generate==&gt; myDataBase.sql","title":"How do I dump a MySQL database using ant?","body":"<p>I couldn't find any information about how to dump a MySQL database with an ant task.</p>\n\n<p>Do I have to create my own task to do this?</p>\n\n<pre><code>ANT script ===generate==&gt; myDataBase.sql\n</code></pre>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":7349100,"reputation":10066,"user_id":5595926,"display_name":"ΓDΛ"},"score":0,"creation_date":1660140581,"post_id":73307736,"comment_id":129463032,"body_markdown":"the relevant code will not help. please share logcat.","body":"the relevant code will not help. please share logcat."},{"owner":{"account_id":1849514,"reputation":193868,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"score":1,"creation_date":1660141728,"post_id":73307736,"comment_id":129463491,"body_markdown":"When your app crashes, your activity gets finished, just as if `onBackPressed()` was hit. Look in your logcat for an error message.","body":"When your app crashes, your activity gets finished, just as if <code>onBackPressed()</code> was hit. Look in your logcat for an error message."},{"owner":{"account_id":5396039,"reputation":33,"user_id":4297233,"display_name":"Isaya Exavery"},"score":0,"creation_date":1660143369,"post_id":73307736,"comment_id":129464212,"body_markdown":"App does not crush, I want it to remain in the same activity after sending msg but it moves to previous actually (as if onbackpressed called)","body":"App does not crush, I want it to remain in the same activity after sending msg but it moves to previous actually (as if onbackpressed called)"}],"owner":{"account_id":5396039,"reputation":33,"user_id":4297233,"display_name":"Isaya Exavery"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660140362,"creation_date":1660140362,"question_id":73307736,"body_markdown":"I am trying to add feature, a very simple chat in my project android app using real time firebase database. The chat is working but if someone clicks send button after message is received in firebase the activity is automatically going to the previous activity.\r\n\r\n```\r\n  DatabaseReference ref = FirebaseDatabase.getInstance().getReference(&quot;MyGroups&quot;).child(&quot;1234&quot;).child(&quot;chats&quot;);\r\n\r\n        String message = messageTxt.getText().toString();\r\n        String messageKey = ref.push().getKey();\r\n\r\n        final String timeStamp = String.valueOf(System.currentTimeMillis());\r\n\r\n            HashMap&lt;String,Object&gt; messageInfoMap =new HashMap&lt;&gt;();\r\n            messageInfoMap.put(&quot;senderName&quot;,username);\r\n            messageInfoMap.put(&quot;senderId&quot;, mAuth.getUid());\r\n            messageInfoMap.put(&quot;message&quot;,message);\r\n            messageInfoMap.put(&quot;timeStamp&quot;, timeStamp);\r\n            messageInfoMap.put(&quot;messageId&quot;, messageKey);\r\n            ref.child(messageKey).updateChildren(messageInfoMap).addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\r\n                @Override\r\n                public void onSuccess(Void unused) {\r\n                    //Toast.makeText(GroupChat.this, &quot;Sent&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            });\r\n```\r\nActivity is like auto onbackpressed after the message &#39;sent&#39;","title":"Why there is auto onBackPressed?","body":"<p>I am trying to add feature, a very simple chat in my project android app using real time firebase database. The chat is working but if someone clicks send button after message is received in firebase the activity is automatically going to the previous activity.</p>\n<pre><code>  DatabaseReference ref = FirebaseDatabase.getInstance().getReference(&quot;MyGroups&quot;).child(&quot;1234&quot;).child(&quot;chats&quot;);\n\n        String message = messageTxt.getText().toString();\n        String messageKey = ref.push().getKey();\n\n        final String timeStamp = String.valueOf(System.currentTimeMillis());\n\n            HashMap&lt;String,Object&gt; messageInfoMap =new HashMap&lt;&gt;();\n            messageInfoMap.put(&quot;senderName&quot;,username);\n            messageInfoMap.put(&quot;senderId&quot;, mAuth.getUid());\n            messageInfoMap.put(&quot;message&quot;,message);\n            messageInfoMap.put(&quot;timeStamp&quot;, timeStamp);\n            messageInfoMap.put(&quot;messageId&quot;, messageKey);\n            ref.child(messageKey).updateChildren(messageInfoMap).addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\n                @Override\n                public void onSuccess(Void unused) {\n                    //Toast.makeText(GroupChat.this, &quot;Sent&quot;, Toast.LENGTH_SHORT).show();\n                }\n            });\n</code></pre>\n<p>Activity is like auto onbackpressed after the message 'sent'</p>\n"},{"tags":["java","ssl","pem","feign"],"answers":[{"tags":[],"owner":{"account_id":9107988,"reputation":3190,"user_id":6777695,"display_name":"Hakan54"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660140332,"creation_date":1660139221,"answer_id":73307476,"question_id":73291331,"body_markdown":"I am the library maintainer of the `SSLFactory` which you posted in your question. It is pretty easy to use pem files without converting them to keystore files. You need an extion library to enable that feature. Can you add the following library:\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.github.hakky54&lt;/groupId&gt;\r\n    &lt;artifactId&gt;sslcontext-kickstart-for-pem&lt;/artifactId&gt;\r\n    &lt;version&gt;7.4.5&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nAfter importing the library you can use the following snippet\r\n```java\r\npublic class App {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        X509ExtendedKeyManager keyManager = PemUtils.loadIdentityMaterial(Paths.get(&quot;/path/to/your/certificate-chain.pem&quot;), Paths.get(&quot;/path/to/your/private-key.pem&quot;));\r\n        X509ExtendedTrustManager trustManager = PemUtils.loadTrustMaterial(Paths.get(&quot;/path/to/your/some-trusted-certificate.pem&quot;));\r\n\r\n        SSLFactory sslFactory = SSLFactory.builder()\r\n                  .withIdentityMaterial(keyManager)\r\n                  .withTrustMaterial(trustManager)\r\n                  .build();\r\n\r\n        Feign.Builder client = Feign.builder()\r\n                .client(new Client.Default(sslFactory.getSslSocketFactory(), sslFactory.getHostnameVerifier()));\r\n    }\r\n\r\n}\r\n```\r\n\r\n### Update\r\nIt seems like the OP wants to supply a pem file as identity which contains the certificate chain and private key as a single file. On my initial answer I posted an example where two separate files need to be provided, but a single file is also possible, see here for the example:\r\n\r\n```java\r\nX509ExtendedKeyManager keyManager = PemUtils.loadIdentityMaterial(Paths.get(&quot;/path/to/your/identity.pem&quot;));\r\n```\r\n\r\nIf your private key is encrypted you can provide the password as second parameter as shown below:\r\n```java\r\nX509ExtendedKeyManager keyManager = PemUtils.loadIdentityMaterial(Paths.get(&quot;/path/to/your/identity.pem&quot;), &quot;password&quot;.toCharArray());\r\n```\r\n\r\nAll possible usages can be found in the unit test of the PemUtils here: \r\nhttps://github.com/Hakky54/sslcontext-kickstart/blob/5bcc06a862d654e5e59daa4175c39abe230b8fb6/sslcontext-kickstart-for-pem/src/test/java/nl/altindag/ssl/util/PemUtilsShould.java#L65","title":"How to import a pem file directly to use with a FeignClient?","body":"<p>I am the library maintainer of the <code>SSLFactory</code> which you posted in your question. It is pretty easy to use pem files without converting them to keystore files. You need an extion library to enable that feature. Can you add the following library:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.github.hakky54&lt;/groupId&gt;\n    &lt;artifactId&gt;sslcontext-kickstart-for-pem&lt;/artifactId&gt;\n    &lt;version&gt;7.4.5&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>After importing the library you can use the following snippet</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class App {\n\n    public static void main(String[] args) throws Exception {\n        X509ExtendedKeyManager keyManager = PemUtils.loadIdentityMaterial(Paths.get(&quot;/path/to/your/certificate-chain.pem&quot;), Paths.get(&quot;/path/to/your/private-key.pem&quot;));\n        X509ExtendedTrustManager trustManager = PemUtils.loadTrustMaterial(Paths.get(&quot;/path/to/your/some-trusted-certificate.pem&quot;));\n\n        SSLFactory sslFactory = SSLFactory.builder()\n                  .withIdentityMaterial(keyManager)\n                  .withTrustMaterial(trustManager)\n                  .build();\n\n        Feign.Builder client = Feign.builder()\n                .client(new Client.Default(sslFactory.getSslSocketFactory(), sslFactory.getHostnameVerifier()));\n    }\n\n}\n</code></pre>\n<h3>Update</h3>\n<p>It seems like the OP wants to supply a pem file as identity which contains the certificate chain and private key as a single file. On my initial answer I posted an example where two separate files need to be provided, but a single file is also possible, see here for the example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>X509ExtendedKeyManager keyManager = PemUtils.loadIdentityMaterial(Paths.get(&quot;/path/to/your/identity.pem&quot;));\n</code></pre>\n<p>If your private key is encrypted you can provide the password as second parameter as shown below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>X509ExtendedKeyManager keyManager = PemUtils.loadIdentityMaterial(Paths.get(&quot;/path/to/your/identity.pem&quot;), &quot;password&quot;.toCharArray());\n</code></pre>\n<p>All possible usages can be found in the unit test of the PemUtils here:\n<a href=\"https://github.com/Hakky54/sslcontext-kickstart/blob/5bcc06a862d654e5e59daa4175c39abe230b8fb6/sslcontext-kickstart-for-pem/src/test/java/nl/altindag/ssl/util/PemUtilsShould.java#L65\" rel=\"nofollow noreferrer\">https://github.com/Hakky54/sslcontext-kickstart/blob/5bcc06a862d654e5e59daa4175c39abe230b8fb6/sslcontext-kickstart-for-pem/src/test/java/nl/altindag/ssl/util/PemUtilsShould.java#L65</a></p>\n"}],"owner":{"account_id":9893206,"reputation":791,"user_id":7325581,"accept_rate":20,"display_name":"Michael Tsai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":572,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73307476,"answer_count":1,"score":1,"last_activity_date":1660140332,"creation_date":1660045905,"question_id":73291331,"body_markdown":"I have a client certificate .pem file including private key and certificate. I want to use Feign to call the restful api which requires client certificate. \r\n\r\nI googled a lot of examples but those examples teach that import keys from jks like below:\r\n\r\n    public class App {\r\n\r\n        public static void main(String[] args) throws Exception {\r\n            SSLFactory sslFactory = SSLFactory.builder()\r\n                    .withIdentityMaterial(&quot;identity.jks&quot;, &quot;password&quot;.toCharArray())\r\n                    .withTrustMaterial(&quot;truststore.jks&quot;, &quot;password&quot;.toCharArray())\r\n                    .build();\r\n    \r\n            Feign.Builder client = Feign.builder()\r\n                    .client(new Client.Default(sslFactory.getSslSocketFactory(), sslFactory.getHostnameVerifier()));\r\n        }\r\n    \r\n    }\r\n\r\nHowever, I want to import the cert from .pem file directly because I don&#39;t have .jks file and don&#39;t want convert it by manual because the .pem file is fetched programmatically periodically from other servers. How can I do that?","title":"How to import a pem file directly to use with a FeignClient?","body":"<p>I have a client certificate .pem file including private key and certificate. I want to use Feign to call the restful api which requires client certificate.</p>\n<p>I googled a lot of examples but those examples teach that import keys from jks like below:</p>\n<pre><code>public class App {\n\n    public static void main(String[] args) throws Exception {\n        SSLFactory sslFactory = SSLFactory.builder()\n                .withIdentityMaterial(&quot;identity.jks&quot;, &quot;password&quot;.toCharArray())\n                .withTrustMaterial(&quot;truststore.jks&quot;, &quot;password&quot;.toCharArray())\n                .build();\n\n        Feign.Builder client = Feign.builder()\n                .client(new Client.Default(sslFactory.getSslSocketFactory(), sslFactory.getHostnameVerifier()));\n    }\n\n}\n</code></pre>\n<p>However, I want to import the cert from .pem file directly because I don't have .jks file and don't want convert it by manual because the .pem file is fetched programmatically periodically from other servers. How can I do that?</p>\n"},{"tags":["java","grid","pdfbox"],"comments":[{"owner":{"account_id":25841185,"reputation":23,"user_id":19576687,"display_name":"Vishu Dhanawade"},"score":0,"creation_date":1660135661,"post_id":73306611,"comment_id":129460852,"body_markdown":"new Output(globalParam) it sis my Grid Class","body":"new Output(globalParam) it sis my Grid Class"},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1660136264,"post_id":73306611,"comment_id":129461098,"body_markdown":"You can edit your question. It makes no sense, what is a &quot;grid class&quot;? Or are you really asking &quot;how to draw a grid&quot;? And why are you using 2.0.17?","body":"You can edit your question. It makes no sense, what is a &quot;grid class&quot;? Or are you really asking &quot;how to draw a grid&quot;? And why are you using 2.0.17?"},{"owner":{"account_id":25841185,"reputation":23,"user_id":19576687,"display_name":"Vishu Dhanawade"},"score":0,"creation_date":1660136391,"post_id":73306611,"comment_id":129461147,"body_markdown":"i am asking is i already have class. in that class i have a 3 grid now i want to sent that grids as a pdf","body":"i am asking is i already have class. in that class i have a 3 grid now i want to sent that grids as a pdf"},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1660136723,"post_id":73306611,"comment_id":129461290,"body_markdown":"`i am asking is i already have class` - I have no idea what you mean. The second sentence seems to indicate you have an own class with a &quot;3 grid&quot;. PDFBox doesn&#39;t know your code so you can&#39;t send your class. PDFBox doesn&#39;t support grid drawing anyway but there are libraries on top of PDFBox, e.g. EasyTable or Boxable.","body":"<code>i am asking is i already have class</code> - I have no idea what you mean. The second sentence seems to indicate you have an own class with a &quot;3 grid&quot;. PDFBox doesn&#39;t know your code so you can&#39;t send your class. PDFBox doesn&#39;t support grid drawing anyway but there are libraries on top of PDFBox, e.g. EasyTable or Boxable."},{"owner":{"account_id":4726205,"reputation":12248,"user_id":4420967,"display_name":"James Z"},"score":0,"creation_date":1660140312,"post_id":73306611,"comment_id":129462910,"body_markdown":"Please don&#39;t Write with Random upper case Letters like This. It&#39;s very Annoying to read text Like that.","body":"Please don&#39;t Write with Random upper case Letters like This. It&#39;s very Annoying to read text Like that."}],"owner":{"account_id":25841185,"reputation":23,"user_id":19576687,"display_name":"Vishu Dhanawade"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660140262,"creation_date":1660135577,"question_id":73306611,"body_markdown":"I want to send my grid class as a PDF through mail but I guess I am missing something. Please provide me appropriate answer for that.\r\n\r\nin my grid class i have 3 grids and i want to sent that grids as a PDF. How can I use pdfbox for that? Kindly suggest me examples.\r\n\r\njava code \r\n\r\n    PDDocument doc = new PDDocument();     \r\n\t\tdoc.(new Output(globalParam);\r\n\r\n\r\npom xml\r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.0.17&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n","title":"Convert and sent Grid to PDF","body":"<p>I want to send my grid class as a PDF through mail but I guess I am missing something. Please provide me appropriate answer for that.</p>\n<p>in my grid class i have 3 grids and i want to sent that grids as a PDF. How can I use pdfbox for that? Kindly suggest me examples.</p>\n<p>java code</p>\n<pre><code>PDDocument doc = new PDDocument();     \n    doc.(new Output(globalParam);\n</code></pre>\n<p>pom xml</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\n        &lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\n        &lt;version&gt;2.0.17&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","tizen","samsung-smart-tv","tizen-studio"],"comments":[{"owner":{"account_id":5467620,"reputation":2033,"user_id":4347950,"accept_rate":100,"display_name":"Joshua Dannemann"},"score":0,"creation_date":1642533759,"post_id":67401253,"comment_id":125094849,"body_markdown":"I am having the same issue with Windows 11 and have followed all of the troubleshooting advice and still no success.","body":"I am having the same issue with Windows 11 and have followed all of the troubleshooting advice and still no success."}],"answers":[{"tags":[],"owner":{"account_id":6786304,"reputation":218,"user_id":5224957,"display_name":"imdungnguyen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620281532,"creation_date":1620281532,"answer_id":67412747,"question_id":67401253,"body_markdown":"Your PC name contains space character (Maxime Guenneteau).\r\nIt will cause many issue. You can change it (remove space) and retry.","title":"Device Manager for Tizen won&#39;t open (0xc000007b)","body":"<p>Your PC name contains space character (Maxime Guenneteau).\nIt will cause many issue. You can change it (remove space) and retry.</p>\n"},{"tags":[],"owner":{"account_id":112817,"reputation":827,"user_id":297440,"accept_rate":81,"display_name":"Xoundboy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1622547102,"creation_date":1622547102,"answer_id":67788044,"question_id":67401253,"body_markdown":"Device Manager in Tizen Studio isn&#39;t really necessary. You can just use the device select field instead... \r\n\r\n[![enter image description here][2]][2]\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1vj8r.jpg\r\n  [2]: https://i.stack.imgur.com/6byxZ.jpg","title":"Device Manager for Tizen won&#39;t open (0xc000007b)","body":"<p>Device Manager in Tizen Studio isn't really necessary. You can just use the device select field instead...</p>\n<p><a href=\"https://i.stack.imgur.com/6byxZ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6byxZ.jpg\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/1vj8r.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1vj8r.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":18194217,"reputation":1,"user_id":13239584,"display_name":"Theo Psallidas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660140147,"creation_date":1660140147,"answer_id":73307684,"question_id":67401253,"body_markdown":"You can access the device manager by running the device-ui-3.0.jar located in the C:\\tizen-studio\\tools\\device-manager\\bin directory. \r\n","title":"Device Manager for Tizen won&#39;t open (0xc000007b)","body":"<p>You can access the device manager by running the device-ui-3.0.jar located in the C:\\tizen-studio\\tools\\device-manager\\bin directory.</p>\n"}],"owner":{"account_id":21497809,"reputation":11,"user_id":15842550,"display_name":"Mad Max Baxx"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2243,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1660140147,"creation_date":1620217533,"question_id":67401253,"body_markdown":"I&#39;m facing a problem with Tizen Studio, my device-manager does not work. At first I had a DLL problem (mscvp120.dll) that I managed to correct. I am now facing a second problem when I launch Device-manager I get this error (0xc000007b). I&#39;ve already found some topics that talk about it and propose solutions, but I&#39;ve tried everything nothing works: \r\n- I have installed jdk8 as recommended by the samsung developers. \r\n- I have correctly configured the environment variables for java\r\n- Re-install Tizen Studio \r\n- Re-install Java 8 and JDK 8 \r\n- The Device Manager package is correctly installed \r\n- shutdown/start up my computer\r\n\r\nNothing worked. If you have any clues I would be delighted.\r\n\r\n\r\nError Message\r\n\r\n[![][1]][1]\r\n\r\nCorrect installation of java and jdk\r\n\r\n[![][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/P383Y.png\r\n  [2]: https://i.stack.imgur.com/NVyEa.png","title":"Device Manager for Tizen won&#39;t open (0xc000007b)","body":"<p>I'm facing a problem with Tizen Studio, my device-manager does not work. At first I had a DLL problem (mscvp120.dll) that I managed to correct. I am now facing a second problem when I launch Device-manager I get this error (0xc000007b). I've already found some topics that talk about it and propose solutions, but I've tried everything nothing works:</p>\n<ul>\n<li>I have installed jdk8 as recommended by the samsung developers.</li>\n<li>I have correctly configured the environment variables for java</li>\n<li>Re-install Tizen Studio</li>\n<li>Re-install Java 8 and JDK 8</li>\n<li>The Device Manager package is correctly installed</li>\n<li>shutdown/start up my computer</li>\n</ul>\n<p>Nothing worked. If you have any clues I would be delighted.</p>\n<p>Error Message</p>\n<p><a href=\"https://i.stack.imgur.com/P383Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/P383Y.png\" alt=\"\" /></a></p>\n<p>Correct installation of java and jdk</p>\n<p><a href=\"https://i.stack.imgur.com/NVyEa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NVyEa.png\" alt=\"\" /></a></p>\n"},{"tags":["java","stream","zip","filenames"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1585118531,"post_id":60843868,"comment_id":107648489,"body_markdown":"Since you&#39;re keeping the ZIP &quot;file&quot; in memory it doesn&#39;t have an inherent name. I&#39;m also not sure what you&#39;re trying to accomplish with the &quot;file.zip&quot; entry. What are you doing with the bytes afterwards? Knowing your intentions may help with providing a solution.","body":"Since you&#39;re keeping the ZIP &quot;file&quot; in memory it doesn&#39;t have an inherent name. I&#39;m also not sure what you&#39;re trying to accomplish with the &quot;file.zip&quot; entry. What are you doing with the bytes afterwards? Knowing your intentions may help with providing a solution."},{"owner":{"account_id":13846599,"reputation":21,"user_id":10012803,"display_name":"M.Fischer"},"score":0,"creation_date":1585119508,"post_id":60843868,"comment_id":107648741,"body_markdown":"I&#39;m sorry, I guess there was some information missing. The byte[] is used for a new InputStream which in turn is used in a HTTP response to offer the file for download.","body":"I&#39;m sorry, I guess there was some information missing. The byte[] is used for a new InputStream which in turn is used in a HTTP response to offer the file for download."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1585120847,"post_id":60843868,"comment_id":107649189,"body_markdown":"In that case, you can communicate the intended file name via the `Content-Disposition` header.","body":"In that case, you can communicate the intended file name via the <code>Content-Disposition</code> header."}],"answers":[{"tags":[],"owner":{"account_id":21675906,"reputation":11,"user_id":15992879,"display_name":"Felipe Ferreira Campos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660140031,"creation_date":1660140031,"answer_id":73307664,"question_id":60843868,"body_markdown":"    public byte[] zipBytesFile(List&lt;byte[]&gt; files) throws IOException {\r\n\t\tByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n\t\tZipOutputStream zos = new ZipOutputStream(baos);\r\n\r\n\t\tint i = 0;\r\n\t\tfor (byte[] file : files) {\r\n\t\t\tZipEntry entry = new ZipEntry(++i + &quot;.pdf&quot;);\r\n\t\t\tentry.setSize(file.length);\r\n\t\t\tzos.putNextEntry(entry);\r\n\t\t\tzos.write(file);\r\n\t\t}\r\n\r\n\t\tzos.closeEntry();\r\n\t\tzos.close();\r\n\t\treturn baos.toByteArray();\r\n\t}","title":"Set filename of an only streamed zip file","body":"<pre><code>public byte[] zipBytesFile(List&lt;byte[]&gt; files) throws IOException {\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\n    ZipOutputStream zos = new ZipOutputStream(baos);\n\n    int i = 0;\n    for (byte[] file : files) {\n        ZipEntry entry = new ZipEntry(++i + &quot;.pdf&quot;);\n        entry.setSize(file.length);\n        zos.putNextEntry(entry);\n        zos.write(file);\n    }\n\n    zos.closeEntry();\n    zos.close();\n    return baos.toByteArray();\n}\n</code></pre>\n"}],"owner":{"account_id":13846599,"reputation":21,"user_id":10012803,"display_name":"M.Fischer"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":706,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660140031,"creation_date":1585117710,"question_id":60843868,"body_markdown":"i am currently creating a zip file and filling it with various json files and images. All this should only run in memory and not on the hard disk. Therefore I have the following construct so far: \r\n\r\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n    ZipOutputStream zip = null;\r\n    String FILE_NAME = &quot;file.zip&quot;;\r\n    \r\n    try {\r\n       zip = new ZipOutputStream(baos);\r\n       //now the critical part where the name of the file should be set\r\n       ZipEntry entry = new ZipEntry(FILE_NAME);\r\n       zip.putNextEntry(entry);\r\n       byte[] data = FILE_NAME.getBytes();\r\n       zip.write(data, 0, data.length);\r\n       zip.closeEntry();\r\n       //end of critical part and filling the rest of the zip\r\n       //...\r\n       //\r\n    }finally{\r\n       IOUtils.closeQuietly(zip);\r\n       byte[] byteFile = baos.toByteArray();\r\n       IOUtils.closeQuietly(baos);}\r\n\r\nThe problem is that the zip-file is called file.zip, but also contains a file.zip itself.\r\nHow can I name my Zip file from the ZipOutputStream without packing into this one file with the same name? Unfortunately I only found this solution here. \r\n","title":"Set filename of an only streamed zip file","body":"<p>i am currently creating a zip file and filling it with various json files and images. All this should only run in memory and not on the hard disk. Therefore I have the following construct so far: </p>\n\n<pre><code>ByteArrayOutputStream baos = new ByteArrayOutputStream();\nZipOutputStream zip = null;\nString FILE_NAME = \"file.zip\";\n\ntry {\n   zip = new ZipOutputStream(baos);\n   //now the critical part where the name of the file should be set\n   ZipEntry entry = new ZipEntry(FILE_NAME);\n   zip.putNextEntry(entry);\n   byte[] data = FILE_NAME.getBytes();\n   zip.write(data, 0, data.length);\n   zip.closeEntry();\n   //end of critical part and filling the rest of the zip\n   //...\n   //\n}finally{\n   IOUtils.closeQuietly(zip);\n   byte[] byteFile = baos.toByteArray();\n   IOUtils.closeQuietly(baos);}\n</code></pre>\n\n<p>The problem is that the zip-file is called file.zip, but also contains a file.zip itself.\nHow can I name my Zip file from the ZipOutputStream without packing into this one file with the same name? Unfortunately I only found this solution here. </p>\n"},{"tags":["java","soapui","ws-security"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1660163476,"post_id":73307624,"comment_id":129471008,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":26028868,"reputation":1,"user_id":19735418,"display_name":"Pradeep"},"score":0,"creation_date":1660197666,"post_id":73307624,"comment_id":129476959,"body_markdown":"I don&#39;t have any code.  I&#39;m new to Soap Request WS configurations.  Few reference code I collected from different websites are working.  Basically, I need a Java Code to post a soap request from existing XML file with above WS security configurations.","body":"I don&#39;t have any code.  I&#39;m new to Soap Request WS configurations.  Few reference code I collected from different websites are working.  Basically, I need a Java Code to post a soap request from existing XML file with above WS security configurations."}],"owner":{"account_id":26028868,"reputation":1,"user_id":19735418,"display_name":"Pradeep"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660139853,"creation_date":1660139853,"question_id":73307624,"body_markdown":"I&#39;m looking for a complete Java code (along with imports and maven dependencies) to post a soap request with signature.  I&#39;ve a XML file, the Java code should read this XML and post it with Outgoing and Incoming Web Security configurations.  I&#39;m able to post this request with signature in Soap UI tool.\r\n\r\n**Outgoing WS Config**:\r\n\r\nKeystore: Cert.jks file from C:\\Certificates\r\n\r\nAlias: TestCert\r\n\r\nKey Identifier Type: Binary Security Token\r\n\r\nSignature Algorithm: rs-sha512\r\n\r\nSignature Canonicalization: xml-exc-c14n#\r\n\r\nDigest Algorithm: xmlenc#sha512\r\n\r\nUse Single Certificate: Checked\r\n\r\nParts:\r\n\r\nTimeStamp:  URL as Element\r\n\r\n**Incoming WS Config**:\r\n\r\nDecrypt Keystore: Cert.jks file from C:\\Certificates\r\n\r\nI&#39;ve tried with DocumentBuilder but when I parse the XML file I&#39;m getting [#document:null].\r\n\r\nAny support will be highly helpful.\r\n","title":"Java Code to Post Soap Request (from existing xml) with Signature","body":"<p>I'm looking for a complete Java code (along with imports and maven dependencies) to post a soap request with signature.  I've a XML file, the Java code should read this XML and post it with Outgoing and Incoming Web Security configurations.  I'm able to post this request with signature in Soap UI tool.</p>\n<p><strong>Outgoing WS Config</strong>:</p>\n<p>Keystore: Cert.jks file from C:\\Certificates</p>\n<p>Alias: TestCert</p>\n<p>Key Identifier Type: Binary Security Token</p>\n<p>Signature Algorithm: rs-sha512</p>\n<p>Signature Canonicalization: xml-exc-c14n#</p>\n<p>Digest Algorithm: xmlenc#sha512</p>\n<p>Use Single Certificate: Checked</p>\n<p>Parts:</p>\n<p>TimeStamp:  URL as Element</p>\n<p><strong>Incoming WS Config</strong>:</p>\n<p>Decrypt Keystore: Cert.jks file from C:\\Certificates</p>\n<p>I've tried with DocumentBuilder but when I parse the XML file I'm getting [#document:null].</p>\n<p>Any support will be highly helpful.</p>\n"},{"tags":["java","serviceloader"],"answers":[{"tags":[],"owner":{"account_id":2527429,"reputation":143,"user_id":2196511,"display_name":"Artem"},"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1552992107,"creation_date":1536239182,"answer_id":52204855,"question_id":52204709,"body_markdown":"When I hear something about `ServiceLoader`, the first thing, which comes to my mind, is `JDBC`. This technology provides loading JDBC driver classes from a classpath without using `Class.forName(Class&lt;?&gt;clazz)`. \r\n\r\nAlso, I am sure there are many examples of using `ServiceLoader`, beside **JDBC**","title":"What is ServiceLoader and how is it used?","body":"<p>When I hear something about <code>ServiceLoader</code>, the first thing, which comes to my mind, is <code>JDBC</code>. This technology provides loading JDBC driver classes from a classpath without using <code>Class.forName(Class&lt;?&gt;clazz)</code>. </p>\n\n<p>Also, I am sure there are many examples of using <code>ServiceLoader</code>, beside <strong>JDBC</strong></p>\n"},{"tags":[],"owner":{"account_id":6340208,"reputation":48515,"user_id":4922375,"accept_rate":96,"display_name":"Andrew Tobilko"},"down_vote_count":4,"up_vote_count":6,"is_accepted":false,"score":2,"last_activity_date":1536241240,"creation_date":1536239688,"answer_id":52204994,"question_id":52204709,"body_markdown":"Are you familiar with the principle [&quot;Inversion of Control&quot;][1]?\r\n\r\nJava implemented it by `ServiceLoader`. The class is designed to locate implementation classes of an interface on the classpath. You pass in a service interface, you get an implementation(s) of that service.\r\n\r\nYou might find a good practical example [here][2].\r\n\r\n---\r\n\r\n*P.S: Even though it&#39;s an out-of-the-box solution and a quite simple tool, I think it&#39;s outdated and not flexible enough compared to the Spring IoC Container and Google Guice.*\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Inversion_of_control\r\n  [2]: https://dzone.com/articles/play-with-java-serviceloader-forget-about-dependen","title":"What is ServiceLoader and how is it used?","body":"<p>Are you familiar with the principle <a href=\"https://en.wikipedia.org/wiki/Inversion_of_control\" rel=\"nofollow noreferrer\">\"Inversion of Control\"</a>?</p>\n\n<p>Java implemented it by <code>ServiceLoader</code>. The class is designed to locate implementation classes of an interface on the classpath. You pass in a service interface, you get an implementation(s) of that service.</p>\n\n<p>You might find a good practical example <a href=\"https://dzone.com/articles/play-with-java-serviceloader-forget-about-dependen\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<hr>\n\n<p><em>P.S: Even though it's an out-of-the-box solution and a quite simple tool, I think it's outdated and not flexible enough compared to the Spring IoC Container and Google Guice.</em></p>\n"},{"tags":[],"owner":{"account_id":332120,"reputation":4862,"user_id":657224,"accept_rate":17,"display_name":"Mike"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1536239949,"creation_date":1536239949,"answer_id":52205050,"question_id":52204709,"body_markdown":"`ServiceLoader` is Java&#39;s light weight alternative to a full blown IoC container such as Spring, Guice, etc. It has far less bells and whistles than those frameworks, but works well for basic use cases when you just want to find what classes implement an interface.\r\n\r\nMost application servers will have some usages of ServiceLoader you can see in practice:\r\n\r\nhttps://github.com/apache/tomee/search?q=ServiceLoader&amp;unscoped_q=ServiceLoader\r\n\r\nhttps://github.com/apache/tomcat/search?q=ServiceLoader&amp;unscoped_q=ServiceLoader\r\n\r\nhttps://github.com/wildfly/wildfly/search?q=ServiceLoader&amp;unscoped_q=ServiceLoader ","title":"What is ServiceLoader and how is it used?","body":"<p><code>ServiceLoader</code> is Java's light weight alternative to a full blown IoC container such as Spring, Guice, etc. It has far less bells and whistles than those frameworks, but works well for basic use cases when you just want to find what classes implement an interface.</p>\n\n<p>Most application servers will have some usages of ServiceLoader you can see in practice:</p>\n\n<p><a href=\"https://github.com/apache/tomee/search?q=ServiceLoader&amp;unscoped_q=ServiceLoader\" rel=\"nofollow noreferrer\">https://github.com/apache/tomee/search?q=ServiceLoader&amp;unscoped_q=ServiceLoader</a></p>\n\n<p><a href=\"https://github.com/apache/tomcat/search?q=ServiceLoader&amp;unscoped_q=ServiceLoader\" rel=\"nofollow noreferrer\">https://github.com/apache/tomcat/search?q=ServiceLoader&amp;unscoped_q=ServiceLoader</a></p>\n\n<p><a href=\"https://github.com/wildfly/wildfly/search?q=ServiceLoader&amp;unscoped_q=ServiceLoader\" rel=\"nofollow noreferrer\">https://github.com/wildfly/wildfly/search?q=ServiceLoader&amp;unscoped_q=ServiceLoader</a> </p>\n"},{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1658926552,"creation_date":1536245726,"answer_id":52206921,"question_id":52204709,"body_markdown":"You use ServiceLoader when you want your program to have a “plugin” functionality.  When you want to allow people to customize your application by adding jar files to the classpath which contain implementations of a specific subset of functionality, you can use a ServiceLoader to look for those implementations in the classpath.\r\n\r\nServiceLoader is itself an implementation of the [jar SPI specification](https://www2.cs.duke.edu/csed/java/jdk1.4.2/docs/guide/jar/jar.html#Service%20Provider), which has been around for a long time.  (I believe it was introduced in Java 1.3.)\r\n\r\nJava SE already uses it for exactly that purpose in a lot of places, including:\r\n\r\n* additional charsets via [CharsetProvider](https://docs.oracle.com/javase/10/docs/api/java/nio/charset/spi/CharsetProvider.html)\r\n* additional filesystems via [FileSystemProvider](https://docs.oracle.com/javase/10/docs/api/java/nio/file/spi/FileSystemProvider.html) (see [FileSystems](https://docs.oracle.com/javase/10/docs/api/java/nio/file/FileSystems.html))\r\n* additional file content type analyzers via [FileTypeDetector](https://docs.oracle.com/javase/10/docs/api/java/nio/file/spi/FileTypeDetector.html) (see [Files.probeContentType](https://docs.oracle.com/javase/10/docs/api/java/nio/file/Files.html#probeContentType(java.nio.file.Path)))\r\n* additional preferences implementations via [PreferencesFactory](https://docs.oracle.com/javase/10/docs/api/java/util/prefs/PreferencesFactory.html) (see [Preferences](https://docs.oracle.com/javase/10/docs/api/java/util/prefs/Preferences.html))\r\n* custom ResourceBundle.Control via [ResourceBundleControlProvider](https://docs.oracle.com/javase/10/docs/api/java/util/spi/ResourceBundleControlProvider.html)\r\n* All subclasses of [LocaleServiceProvider](https://docs.oracle.com/javase/10/docs/api/java/util/spi/LocaleServiceProvider.html):\r\n    * additional calendars via [CalendarDataProvider](https://docs.oracle.com/javase/10/docs/api/java/util/spi/CalendarDataProvider.html) and [CalendarNameProvider](https://docs.oracle.com/javase/10/docs/api/java/util/spi/CalendarNameProvider.html)\r\n    * additional currency via [CurrencyNameProvider](https://docs.oracle.com/javase/10/docs/api/java/util/spi/CurrencyNameProvider.html)\r\n    * additional locales via [LocaleNameProvider](https://docs.oracle.com/javase/10/docs/api/java/util/spi/LocaleNameProvider.html)\r\n    * additional timezones via [TimeZoneNameProvider](https://docs.oracle.com/javase/10/docs/api/java/util/spi/TimeZoneNameProvider.html)\r\n* additional image formats via [IIORegistry](https://docs.oracle.com/javase/10/docs/api/javax/imageio/spi/IIORegistry.html)\r\n* additional printers via [PrintServiceLookup](https://docs.oracle.com/javase/10/docs/api/javax/print/PrintServiceLookup.html)\r\n* custom scripting engines via [ScriptEngineFactory](https://docs.oracle.com/javase/10/docs/api/javax/script/ScriptEngineFactory.html)\r\n","title":"What is ServiceLoader and how is it used?","body":"<p>You use ServiceLoader when you want your program to have a “plugin” functionality.  When you want to allow people to customize your application by adding jar files to the classpath which contain implementations of a specific subset of functionality, you can use a ServiceLoader to look for those implementations in the classpath.</p>\n<p>ServiceLoader is itself an implementation of the <a href=\"https://www2.cs.duke.edu/csed/java/jdk1.4.2/docs/guide/jar/jar.html#Service%20Provider\" rel=\"nofollow noreferrer\">jar SPI specification</a>, which has been around for a long time.  (I believe it was introduced in Java 1.3.)</p>\n<p>Java SE already uses it for exactly that purpose in a lot of places, including:</p>\n<ul>\n<li>additional charsets via <a href=\"https://docs.oracle.com/javase/10/docs/api/java/nio/charset/spi/CharsetProvider.html\" rel=\"nofollow noreferrer\">CharsetProvider</a></li>\n<li>additional filesystems via <a href=\"https://docs.oracle.com/javase/10/docs/api/java/nio/file/spi/FileSystemProvider.html\" rel=\"nofollow noreferrer\">FileSystemProvider</a> (see <a href=\"https://docs.oracle.com/javase/10/docs/api/java/nio/file/FileSystems.html\" rel=\"nofollow noreferrer\">FileSystems</a>)</li>\n<li>additional file content type analyzers via <a href=\"https://docs.oracle.com/javase/10/docs/api/java/nio/file/spi/FileTypeDetector.html\" rel=\"nofollow noreferrer\">FileTypeDetector</a> (see <a href=\"https://docs.oracle.com/javase/10/docs/api/java/nio/file/Files.html#probeContentType(java.nio.file.Path)\" rel=\"nofollow noreferrer\">Files.probeContentType</a>)</li>\n<li>additional preferences implementations via <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/prefs/PreferencesFactory.html\" rel=\"nofollow noreferrer\">PreferencesFactory</a> (see <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/prefs/Preferences.html\" rel=\"nofollow noreferrer\">Preferences</a>)</li>\n<li>custom ResourceBundle.Control via <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/spi/ResourceBundleControlProvider.html\" rel=\"nofollow noreferrer\">ResourceBundleControlProvider</a></li>\n<li>All subclasses of <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/spi/LocaleServiceProvider.html\" rel=\"nofollow noreferrer\">LocaleServiceProvider</a>:\n<ul>\n<li>additional calendars via <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/spi/CalendarDataProvider.html\" rel=\"nofollow noreferrer\">CalendarDataProvider</a> and <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/spi/CalendarNameProvider.html\" rel=\"nofollow noreferrer\">CalendarNameProvider</a></li>\n<li>additional currency via <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/spi/CurrencyNameProvider.html\" rel=\"nofollow noreferrer\">CurrencyNameProvider</a></li>\n<li>additional locales via <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/spi/LocaleNameProvider.html\" rel=\"nofollow noreferrer\">LocaleNameProvider</a></li>\n<li>additional timezones via <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/spi/TimeZoneNameProvider.html\" rel=\"nofollow noreferrer\">TimeZoneNameProvider</a></li>\n</ul>\n</li>\n<li>additional image formats via <a href=\"https://docs.oracle.com/javase/10/docs/api/javax/imageio/spi/IIORegistry.html\" rel=\"nofollow noreferrer\">IIORegistry</a></li>\n<li>additional printers via <a href=\"https://docs.oracle.com/javase/10/docs/api/javax/print/PrintServiceLookup.html\" rel=\"nofollow noreferrer\">PrintServiceLookup</a></li>\n<li>custom scripting engines via <a href=\"https://docs.oracle.com/javase/10/docs/api/javax/script/ScriptEngineFactory.html\" rel=\"nofollow noreferrer\">ScriptEngineFactory</a></li>\n</ul>\n"}],"owner":{"account_id":3351092,"reputation":3461,"user_id":2815144,"accept_rate":34,"display_name":"Patrik Mihalčin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1648,"favorite_count":0,"down_vote_count":3,"up_vote_count":7,"answer_count":4,"score":4,"last_activity_date":1660139769,"creation_date":1536238748,"question_id":52204709,"body_markdown":"I came across [the documentation of `ServiceLoader`][1] and am unclear as to what use cases it suits.\r\n\r\nWhen would one use `ServiceLoader`?\r\n\r\n[1]: https://docs.oracle.com/javase/7/docs/api/java/util/ServiceLoader.html ","title":"What is ServiceLoader and how is it used?","body":"<p>I came across <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/ServiceLoader.html\" rel=\"nofollow noreferrer\">the documentation of <code>ServiceLoader</code></a> and am unclear as to what use cases it suits.</p>\n\n<p>When would one use <code>ServiceLoader</code>?</p>\n"},{"tags":["java","spring-boot","jpa","stream","apache-poi"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":3,"creation_date":1660141094,"post_id":73307529,"comment_id":129463257,"body_markdown":"The max number of rows in Excel will be 1,048,576, and you will have to load all to create the Workbook. So streaming will not help much","body":"The max number of rows in Excel will be 1,048,576, and you will have to load all to create the Workbook. So streaming will not help much"},{"owner":{"account_id":5469638,"reputation":41,"user_id":4349366,"display_name":"Veerendra"},"score":0,"creation_date":1660143129,"post_id":73307529,"comment_id":129464101,"body_markdown":"max number of rows per sheet will be 1,048,576, we will create multiple sheets","body":"max number of rows per sheet will be 1,048,576, we will create multiple sheets"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":2,"creation_date":1660143223,"post_id":73307529,"comment_id":129464137,"body_markdown":"As you appear to have an [_XY problem_](http://meta.stackoverflow.com/q/66377/163188), please [edit] your question to reframe it; more [here](https://answers.microsoft.com/en-us/msoffice/forum/all/how-to-exceed-excels-limits-number-of-rows/783984c2-5ab4-41c8-8e7e-948d7bf58edc).","body":"As you appear to have an <a href=\"http://meta.stackoverflow.com/q/66377/163188\"><i>XY problem</i></a>, please <a href=\"https://stackoverflow.com/posts/73307529/edit\">edit</a> your question to reframe it; more <a href=\"https://answers.microsoft.com/en-us/msoffice/forum/all/how-to-exceed-excels-limits-number-of-rows/783984c2-5ab4-41c8-8e7e-948d7bf58edc\" rel=\"nofollow noreferrer\">here</a>."},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1660145786,"post_id":73307529,"comment_id":129465198,"body_markdown":"There is not any well working streaming approach to write Excel files because of the complex internal structure of all kinds of Excel files. There are partially working tries, `SXSSF` for example. But even this is not really a full streaming approach.","body":"There is not any well working streaming approach to write Excel files because of the complex internal structure of all kinds of Excel files. There are partially working tries, <code>SXSSF</code> for example. But even this is not really a full streaming approach."},{"owner":{"account_id":964210,"reputation":1018,"user_id":987959,"display_name":"PJ Fanning"},"score":1,"creation_date":1660167452,"post_id":73307529,"comment_id":129472135,"body_markdown":"why do you need excel format? Excel is not a good data interchange format - it is a proprietary Microsoft solution and the file format has numerous weaknesses - exchanging large data is better done with formats like CSV, JSON, Parquet, etc.","body":"why do you need excel format? Excel is not a good data interchange format - it is a proprietary Microsoft solution and the file format has numerous weaknesses - exchanging large data is better done with formats like CSV, JSON, Parquet, etc."},{"owner":{"account_id":5469638,"reputation":41,"user_id":4349366,"display_name":"Veerendra"},"score":0,"creation_date":1660222350,"post_id":73307529,"comment_id":129485149,"body_markdown":"we are using csv, want to give option for excel download as well","body":"we are using csv, want to give option for excel download as well"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1660235144,"post_id":73307529,"comment_id":129490445,"body_markdown":"Users likely complained they couldn&#39;t open such enormous `.csv` files. As an alternative, consider offering users an archive of segments that Excel _can_ use.","body":"Users likely complained they couldn&#39;t open such enormous <code>.csv</code> files. As an alternative, consider offering users an archive of segments that Excel <i>can</i> use."}],"owner":{"account_id":5469638,"reputation":41,"user_id":4349366,"display_name":"Veerendra"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1236,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660139406,"creation_date":1660139406,"question_id":73307529,"body_markdown":"\r\nWe are trying to stream million number of DB records from postgraes sql using JPA stream, and download as excel (using Apache poi to create excel, other library also fine). \r\n\r\nsimilar solution like csv: https://www.geekyhacker.com/2019/03/26/high-performance-data-fetching-using-spring-data-jpa-stream/\r\n\r\nExample snippet:\r\n\r\nBookRepository class:\r\n\r\n     @QueryHints(value = {\r\n         @QueryHint(name = HINT_FETCH_SIZE, value = &quot;10000&quot;)\r\n     })\r\n     @Query(&quot;select b from Book&quot;)\r\n     Stream&lt;Book&gt; getAll();\r\n\r\nController:\r\n\r\n     @Transactional(readOnly = true)\r\n     public void processBooks() {\r\n      Stream&lt;Book&gt; bookStream = bookRepository.getAll();\r\n      OutputStream  outputStream  = response.getOutputStream();\r\n      bookStream.forEach(book -&gt; {\r\n      //Excel file rows and workbook creation and streaming here\r\n      workbook.write(outputStream);//getting stream closed error\r\n     });\r\n    }","title":"Streaming data using Spring Data JPA to excel file download as chunks java","body":"<p>We are trying to stream million number of DB records from postgraes sql using JPA stream, and download as excel (using Apache poi to create excel, other library also fine).</p>\n<p>similar solution like csv: <a href=\"https://www.geekyhacker.com/2019/03/26/high-performance-data-fetching-using-spring-data-jpa-stream/\" rel=\"nofollow noreferrer\">https://www.geekyhacker.com/2019/03/26/high-performance-data-fetching-using-spring-data-jpa-stream/</a></p>\n<p>Example snippet:</p>\n<p>BookRepository class:</p>\n<pre><code> @QueryHints(value = {\n     @QueryHint(name = HINT_FETCH_SIZE, value = &quot;10000&quot;)\n })\n @Query(&quot;select b from Book&quot;)\n Stream&lt;Book&gt; getAll();\n</code></pre>\n<p>Controller:</p>\n<pre><code> @Transactional(readOnly = true)\n public void processBooks() {\n  Stream&lt;Book&gt; bookStream = bookRepository.getAll();\n  OutputStream  outputStream  = response.getOutputStream();\n  bookStream.forEach(book -&gt; {\n  //Excel file rows and workbook creation and streaming here\n  workbook.write(outputStream);//getting stream closed error\n });\n}\n</code></pre>\n"},{"tags":["java","android","manifest"],"comments":[{"owner":{"account_id":14722107,"reputation":5143,"user_id":10632369,"display_name":"tomerpacific"},"score":0,"creation_date":1660137264,"post_id":73306497,"comment_id":129461537,"body_markdown":"Why do you need two services for this?","body":"Why do you need two services for this?"}],"answers":[{"tags":[],"owner":{"account_id":25792631,"reputation":1,"user_id":19536445,"display_name":"yydinc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660138636,"creation_date":1660138636,"answer_id":73307327,"question_id":73306497,"body_markdown":"mistake in your code is writing class names with comma .&lt;br&gt;\r\n     \r\n    android:name=&quot;.ClassGen1&quot;,&quot;.ClassGen2&quot;\r\n\r\nValue of name attribute cannot be written with comma in android . You should declare them separately in different service tags . Like as below&lt;br&gt;\r\n\r\n    &lt;service \r\n        android:name=&quot;.ClassGen1&quot;\r\n        android:permission=&quot;android.permission.BIND_ACCESSIBILITY_SERVICE&quot;\r\n        android:persistent=&quot;true&quot;&gt;\r\n        &lt;intent-filter&gt;\r\n            &lt;action android:name=&quot;android.accessibilityservice.AccessibilityService&quot; /&gt;\r\n        &lt;/intent-filter&gt;\r\n    &lt;/service&gt;\r\n    &lt;service \r\n        android:name=&quot;.ClassGen2&quot;\r\n        android:permission=&quot;android.permission.BIND_ACCESSIBILITY_SERVICE&quot;\r\n        android:persistent=&quot;true&quot;&gt;\r\n        &lt;intent-filter&gt;\r\n            &lt;action android:name=&quot;android.accessibilityservice.AccessibilityService&quot; /&gt;\r\n        &lt;/intent-filter&gt;\r\n    &lt;/service&gt;","title":"how to seperate classes in manifest?","body":"<p>mistake in your code is writing class names with comma .<br></p>\n<pre><code>android:name=&quot;.ClassGen1&quot;,&quot;.ClassGen2&quot;\n</code></pre>\n<p>Value of name attribute cannot be written with comma in android . You should declare them separately in different service tags . Like as below<br></p>\n<pre><code>&lt;service \n    android:name=&quot;.ClassGen1&quot;\n    android:permission=&quot;android.permission.BIND_ACCESSIBILITY_SERVICE&quot;\n    android:persistent=&quot;true&quot;&gt;\n    &lt;intent-filter&gt;\n        &lt;action android:name=&quot;android.accessibilityservice.AccessibilityService&quot; /&gt;\n    &lt;/intent-filter&gt;\n&lt;/service&gt;\n&lt;service \n    android:name=&quot;.ClassGen2&quot;\n    android:permission=&quot;android.permission.BIND_ACCESSIBILITY_SERVICE&quot;\n    android:persistent=&quot;true&quot;&gt;\n    &lt;intent-filter&gt;\n        &lt;action android:name=&quot;android.accessibilityservice.AccessibilityService&quot; /&gt;\n    &lt;/intent-filter&gt;\n&lt;/service&gt;\n</code></pre>\n"}],"owner":{"account_id":21239565,"reputation":17,"user_id":15623276,"display_name":"shohel hossain"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1660139184,"creation_date":1660135185,"question_id":73306497,"body_markdown":"I want to add two classes in accessibility service\r\nI have tried this and its showing some errors of tag\r\n\r\n    &lt;service\r\n                android:name=&quot;.ClassGen1&quot;,&quot;.ClassGen2&quot;\r\n                android:permission=&quot;android.permission.BIND_ACCESSIBILITY_SERVICE&quot;\r\n                android:persistent=&quot;true&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.accessibilityservice.AccessibilityService&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n\r\n","title":"how to seperate classes in manifest?","body":"<p>I want to add two classes in accessibility service\nI have tried this and its showing some errors of tag</p>\n<pre><code>&lt;service\n            android:name=&quot;.ClassGen1&quot;,&quot;.ClassGen2&quot;\n            android:permission=&quot;android.permission.BIND_ACCESSIBILITY_SERVICE&quot;\n            android:persistent=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.accessibilityservice.AccessibilityService&quot; /&gt;\n            &lt;/intent-filter&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","apache-kafka","kafka-consumer-api","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169326,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660139095,"creation_date":1660139095,"answer_id":73307447,"question_id":73306967,"body_markdown":"You can examine the consumer metrics and inspect them, for example:\r\n\r\n    MetricName [name=network-io-total, group=consumer-metrics, description=The total number of network operations (reads or writes) on all connections\r\n    MetricName [name=connection-count, group=consumer-metrics, description=The current number of active connections.\r\n\r\nThere are other metrics that might be useful, e.g `last-poll-seconds-ago`.\r\n\r\n```java\r\n/**\r\n * Return metrics kept by this container&#39;s consumer(s), grouped by {@code client-id}.\r\n * @return the consumer(s) metrics grouped by {@code client-id}\r\n * @since 1.3\r\n * @see org.apache.kafka.clients.consumer.Consumer#metrics()\r\n */\r\nMap&lt;String, Map&lt;MetricName, ? extends Metric&gt;&gt; metrics();\r\n```\r\n","title":"Has someone a convenient solution to determine if a Spring-Kafka-Consumer is listening","body":"<p>You can examine the consumer metrics and inspect them, for example:</p>\n<pre><code>MetricName [name=network-io-total, group=consumer-metrics, description=The total number of network operations (reads or writes) on all connections\nMetricName [name=connection-count, group=consumer-metrics, description=The current number of active connections.\n</code></pre>\n<p>There are other metrics that might be useful, e.g <code>last-poll-seconds-ago</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Return metrics kept by this container's consumer(s), grouped by {@code client-id}.\n * @return the consumer(s) metrics grouped by {@code client-id}\n * @since 1.3\n * @see org.apache.kafka.clients.consumer.Consumer#metrics()\n */\nMap&lt;String, Map&lt;MetricName, ? extends Metric&gt;&gt; metrics();\n</code></pre>\n"}],"owner":{"account_id":11512222,"reputation":87,"user_id":8436642,"display_name":"Nico S."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":447,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1660139095,"creation_date":1660137150,"question_id":73306967,"body_markdown":"I am looking for a convenient solution to determine if a Spring-Kafka-Consumer is listening.\r\nWe are using a KafkaListenerContainerFactory to create our listener container and now we want to check if it is connected to the broker and listening to the topic(s).\r\n\r\nCould someone please help out i found nothing in the internet that works.\r\nmessageListenerContainer.isRunning() does show true even if the broker isnt available so that doesnt work.","title":"Has someone a convenient solution to determine if a Spring-Kafka-Consumer is listening","body":"<p>I am looking for a convenient solution to determine if a Spring-Kafka-Consumer is listening.\nWe are using a KafkaListenerContainerFactory to create our listener container and now we want to check if it is connected to the broker and listening to the topic(s).</p>\n<p>Could someone please help out i found nothing in the internet that works.\nmessageListenerContainer.isRunning() does show true even if the broker isnt available so that doesnt work.</p>\n"},{"tags":["java","android","firebase","google-signin"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1660124847,"post_id":73298906,"comment_id":129456761,"body_markdown":"I think that this [resource](https://medium.com/firebase-tips-tricks/how-to-create-a-clean-firebase-authentication-using-mvvm-37f9b8eb7336) might help.","body":"I think that this <a href=\"https://medium.com/firebase-tips-tricks/how-to-create-a-clean-firebase-authentication-using-mvvm-37f9b8eb7336\" rel=\"nofollow noreferrer\">resource</a> might help."}],"answers":[{"tags":[],"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660086480,"creation_date":1660086480,"answer_id":73299005,"question_id":73298906,"body_markdown":"When a `Task` fails, it contains an exception with details about why it failed. Log that error message, and you can see the cause of the failure and fix that.\r\n\r\n    if (task.isSuccessful()) {\r\n        ...\r\n    } else {\r\n        Log.e(&quot;SIGNIN&quot;, &quot;Failed to Sign In with Google&quot;, task.getException()); // &#128072;\r\n        Toast.makeText(LoginActivity.this, &quot;Failed to Sign In with Google! Please check your credentials.&quot;, Toast.LENGTH_LONG).show();\r\n    }\r\n\r\n\r\n","title":"Why Sign In With Google using Firebase not work with me?","body":"<p>When a <code>Task</code> fails, it contains an exception with details about why it failed. Log that error message, and you can see the cause of the failure and fix that.</p>\n<pre><code>if (task.isSuccessful()) {\n    ...\n} else {\n    Log.e(&quot;SIGNIN&quot;, &quot;Failed to Sign In with Google&quot;, task.getException()); // 👈\n    Toast.makeText(LoginActivity.this, &quot;Failed to Sign In with Google! Please check your credentials.&quot;, Toast.LENGTH_LONG).show();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19810459,"reputation":1,"user_id":14509427,"display_name":"Mohammad Abu Saada"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660138827,"creation_date":1660138827,"answer_id":73307372,"question_id":73298906,"body_markdown":"Well, I solved my problem.. It was that I wasn&#39;t putting the application&#39;s SHA-1 into the Firebase project. After I installed it, the problem disappeared.","title":"Why Sign In With Google using Firebase not work with me?","body":"<p>Well, I solved my problem.. It was that I wasn't putting the application's SHA-1 into the Firebase project. After I installed it, the problem disappeared.</p>\n"}],"owner":{"account_id":19810459,"reputation":1,"user_id":14509427,"display_name":"Mohammad Abu Saada"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660138827,"creation_date":1660085624,"question_id":73298906,"body_markdown":"I am trying to use **Google Sihn In with Firebase** but it is not working. I have been trying for hours on this please help.\r\n\r\nThis is my Code:\r\n\r\n\r\n```\r\n\r\npublic class LoginActivity extends AppCompatActivity {\r\n\r\n    \r\n\r\n    private RelativeLayout signInWithGoogleBtn;\r\n\r\n    private GoogleSignInOptions gso;\r\n    private GoogleSignInClient mGoogleSignInClient;\r\n\r\n    private static final int RC_SIGN_IN = 123;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_login);\r\n\r\n        signInWithGoogleBtn = findViewById(R.id.signInWithGoogleBtn);\r\n\r\n        mAuth = FirebaseAuth.getInstance();\r\n\r\n        GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestIdToken(getString(R.string.default_web_client_id))\r\n                .requestEmail()\r\n                .build();\r\n\r\n        mGoogleSignInClient = GoogleSignIn.getClient(this, gso);\r\n\r\n\r\n        signInWithGoogleBtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                googleSignIn();\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n\r\n    private void googleSignIn() {\r\n        Intent intent = mGoogleSignInClient.getSignInIntent();\r\n        startActivityForResult(intent, RC_SIGN_IN);\r\n    }\r\n\r\n    @Override\r\n    public void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        if (requestCode == RC_SIGN_IN) {\r\n            Task&lt;GoogleSignInAccount&gt; task = GoogleSignIn.getSignedInAccountFromIntent(data);\r\n            try {\r\n                GoogleSignInAccount account = task.getResult(ApiException.class);\r\n                firebaseAuthWithGoogle(account.getIdToken());\r\n            } catch (ApiException e) {\r\n                Toast.makeText(LoginActivity.this, &quot;Error&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    }\r\n\r\n    private void firebaseAuthWithGoogle(String idToken) {\r\n\r\n        AuthCredential credential = GoogleAuthProvider.getCredential(idToken, null);\r\n        mAuth.signInWithCredential(credential)\r\n                .addOnCompleteListener(this, new OnCompleteListener&lt;AuthResult&gt;() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\r\n                        if (task.isSuccessful()) {\r\n\r\n                            Toast.makeText(LoginActivity.this, &quot;Google Sign In Success&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n                            FirebaseUser user = mAuth.getCurrentUser();\r\n\r\n                            startActivity(new Intent(LoginActivity.this, MainActivity.class));\r\n                            LoginActivity.this.finish();\r\n\r\n                        } else {\r\n                            Toast.makeText(LoginActivity.this, &quot;Failed to Sign In with Google! Please check your credentials.&quot;, Toast.LENGTH_LONG).show();\r\n\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n}\r\n```\r\n\r\nWhat happens is that when I press the &quot;Sign in with Google&quot; button and choose the account, the &quot;error message&quot; in Toast appears.\r\n\r\nPlease help and I will be really thankful","title":"Why Sign In With Google using Firebase not work with me?","body":"<p>I am trying to use <strong>Google Sihn In with Firebase</strong> but it is not working. I have been trying for hours on this please help.</p>\n<p>This is my Code:</p>\n<pre><code>\npublic class LoginActivity extends AppCompatActivity {\n\n    \n\n    private RelativeLayout signInWithGoogleBtn;\n\n    private GoogleSignInOptions gso;\n    private GoogleSignInClient mGoogleSignInClient;\n\n    private static final int RC_SIGN_IN = 123;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_login);\n\n        signInWithGoogleBtn = findViewById(R.id.signInWithGoogleBtn);\n\n        mAuth = FirebaseAuth.getInstance();\n\n        GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\n                .requestIdToken(getString(R.string.default_web_client_id))\n                .requestEmail()\n                .build();\n\n        mGoogleSignInClient = GoogleSignIn.getClient(this, gso);\n\n\n        signInWithGoogleBtn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                googleSignIn();\n            }\n        });\n    }\n\n\n\n    private void googleSignIn() {\n        Intent intent = mGoogleSignInClient.getSignInIntent();\n        startActivityForResult(intent, RC_SIGN_IN);\n    }\n\n    @Override\n    public void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n\n        if (requestCode == RC_SIGN_IN) {\n            Task&lt;GoogleSignInAccount&gt; task = GoogleSignIn.getSignedInAccountFromIntent(data);\n            try {\n                GoogleSignInAccount account = task.getResult(ApiException.class);\n                firebaseAuthWithGoogle(account.getIdToken());\n            } catch (ApiException e) {\n                Toast.makeText(LoginActivity.this, &quot;Error&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n    }\n\n    private void firebaseAuthWithGoogle(String idToken) {\n\n        AuthCredential credential = GoogleAuthProvider.getCredential(idToken, null);\n        mAuth.signInWithCredential(credential)\n                .addOnCompleteListener(this, new OnCompleteListener&lt;AuthResult&gt;() {\n                    @Override\n                    public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\n                        if (task.isSuccessful()) {\n\n                            Toast.makeText(LoginActivity.this, &quot;Google Sign In Success&quot;, Toast.LENGTH_SHORT).show();\n\n                            FirebaseUser user = mAuth.getCurrentUser();\n\n                            startActivity(new Intent(LoginActivity.this, MainActivity.class));\n                            LoginActivity.this.finish();\n\n                        } else {\n                            Toast.makeText(LoginActivity.this, &quot;Failed to Sign In with Google! Please check your credentials.&quot;, Toast.LENGTH_LONG).show();\n\n                        }\n                    }\n                });\n    }\n}\n</code></pre>\n<p>What happens is that when I press the &quot;Sign in with Google&quot; button and choose the account, the &quot;error message&quot; in Toast appears.</p>\n<p>Please help and I will be really thankful</p>\n"},{"tags":["java","spring-boot","jpa"],"comments":[{"owner":{"account_id":10771493,"reputation":1873,"user_id":7924858,"display_name":"abhinavsinghvirsen"},"score":0,"creation_date":1660135198,"post_id":73306471,"comment_id":129460674,"body_markdown":"use prepare statement","body":"use prepare statement"}],"answers":[{"tags":[],"owner":{"account_id":21975986,"reputation":21,"user_id":16251791,"display_name":"Kryszak"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660138409,"creation_date":1660135355,"answer_id":73306543,"question_id":73306471,"body_markdown":"You could use projection to select only `name` property:\r\n```\r\ninterface CustomerNameProjection {\r\n   String getName();\r\n}\r\n```\r\n\r\nand then use it in `Repository` class:\r\n```\r\nList&lt;CustomerNameProjection&gt; findAllProjectedBy();\r\n```\r\n\r\nedit: corrected repository method name","title":"Return List&lt;String&gt; or String in hibernate query without query annotation","body":"<p>You could use projection to select only <code>name</code> property:</p>\n<pre><code>interface CustomerNameProjection {\n   String getName();\n}\n</code></pre>\n<p>and then use it in <code>Repository</code> class:</p>\n<pre><code>List&lt;CustomerNameProjection&gt; findAllProjectedBy();\n</code></pre>\n<p>edit: corrected repository method name</p>\n"},{"tags":[],"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660137068,"creation_date":1660137068,"answer_id":73306942,"question_id":73306471,"body_markdown":"[Spring Data JPA][1] supports this quite well. You can define a POJO that represents the (reduced) object (the projection) you want of the entity, then [define a method that describes the query][2], returns the appropriate type, and Spring Data will generate all the code necessary to execute the query and map the results.\r\n\r\nHere&#39;s an example of a custom repository interface that uses this technique (untested pseudo-code):\r\n\r\n```java\r\npublic class CustomerSummary {\r\n    private String name;\r\n    // constructor and getters\r\n}\r\n\r\n@Repository\r\npublic interface CustomerRepository extends CrudRepository&lt;Customer, Long&gt; {\r\n    List&lt;CustomerSummary&gt; getAllSummaries();\r\n}\r\n```\r\n\r\nI&#39;m not sure if you can use &quot;simple&quot; types such as `String` in the return type, but I wouldn&#39;t be surprised if that is supported.\r\n\r\nAlso, you might have to tweak the exact method naming of `` to make sure Spring Data correctly interprets it as you want. [Here][3] is some additional reference documentation.\r\n\r\n\r\n  [1]: https://spring.io/projects/spring-data-jpa\r\n  [2]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods\r\n  [3]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repository-query-keywords","title":"Return List&lt;String&gt; or String in hibernate query without query annotation","body":"<p><a href=\"https://spring.io/projects/spring-data-jpa\" rel=\"nofollow noreferrer\">Spring Data JPA</a> supports this quite well. You can define a POJO that represents the (reduced) object (the projection) you want of the entity, then <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods\" rel=\"nofollow noreferrer\">define a method that describes the query</a>, returns the appropriate type, and Spring Data will generate all the code necessary to execute the query and map the results.</p>\n<p>Here's an example of a custom repository interface that uses this technique (untested pseudo-code):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CustomerSummary {\n    private String name;\n    // constructor and getters\n}\n\n@Repository\npublic interface CustomerRepository extends CrudRepository&lt;Customer, Long&gt; {\n    List&lt;CustomerSummary&gt; getAllSummaries();\n}\n</code></pre>\n<p>I'm not sure if you can use &quot;simple&quot; types such as <code>String</code> in the return type, but I wouldn't be surprised if that is supported.</p>\n<p>Also, you might have to tweak the exact method naming of `` to make sure Spring Data correctly interprets it as you want. <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repository-query-keywords\" rel=\"nofollow noreferrer\">Here</a> is some additional reference documentation.</p>\n"},{"tags":[],"owner":{"account_id":66967,"reputation":500,"user_id":196207,"display_name":"Sankozi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660137306,"creation_date":1660137306,"answer_id":73307007,"question_id":73306471,"body_markdown":"Inject EntityManager and call [createQuery][1].\r\n\r\n    entityManager.createQuery(&quot;select c.name from Customer c&quot;)\r\n        .getResultList()\r\n\r\n\r\n  [1]: https://docs.oracle.com/javaee/7/api/javax/persistence/EntityManager.html#createQuery-java.lang.String-","title":"Return List&lt;String&gt; or String in hibernate query without query annotation","body":"<p>Inject EntityManager and call <a href=\"https://docs.oracle.com/javaee/7/api/javax/persistence/EntityManager.html#createQuery-java.lang.String-\" rel=\"nofollow noreferrer\">createQuery</a>.</p>\n<pre><code>entityManager.createQuery(&quot;select c.name from Customer c&quot;)\n    .getResultList()\n</code></pre>\n"}],"owner":{"account_id":1469313,"reputation":5983,"user_id":1381266,"accept_rate":46,"display_name":"Galet"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":618,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73306942,"answer_count":3,"score":0,"last_activity_date":1660138409,"creation_date":1660135069,"question_id":73306471,"body_markdown":"I am using Spring Boot application. I am using following method to return `List&lt;String&gt;` using *@Query*\r\n\r\n annotation.\r\n\r\n    @Query(&quot;select c.name from Customer c&quot;)\r\n    List&lt;String&gt; findAllNames();\r\n\r\n\r\nIs there a way to get the above result without @Query or @NativeQuery annotations?","title":"Return List&lt;String&gt; or String in hibernate query without query annotation","body":"<p>I am using Spring Boot application. I am using following method to return <code>List&lt;String&gt;</code> using <em>@Query</em></p>\n<p>annotation.</p>\n<pre><code>@Query(&quot;select c.name from Customer c&quot;)\nList&lt;String&gt; findAllNames();\n</code></pre>\n<p>Is there a way to get the above result without @Query or @NativeQuery annotations?</p>\n"},{"tags":["java","cassandra"],"owner":{"account_id":13081129,"reputation":758,"user_id":9451651,"display_name":"Guts"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":143,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660138201,"creation_date":1659969885,"question_id":73279758,"body_markdown":"I have cassandra cluster with 3 nodes. After adding column to table I started seeing those errors in 2 of my cassandra nodes:\r\n\r\n\r\n```\r\nWARN  [SharedPool-Worker-1] 2022-08-08 10:34:29,219 AbstractLocalAwareExecutorService.java:169 - Uncaught exception on thread Thread[SharedPool-Worker-1,5,main]: {}\r\njava.io.IOError: java.io.IOException: Corrupt empty row found in unfiltered partition\r\n        at org.apache.cassandra.db.rows.UnfilteredRowIteratorSerializer$1.computeNext(UnfilteredRowIteratorSerializer.java:222) ~[apache-cassandra-3.0.8.jar:3.0.8]\r\n        at org.apache.cassandra.db.rows.UnfilteredRowIteratorSerializer$1.computeNext(UnfilteredRowIteratorSerializer.java:210) ~[apache-cassandra-3.0.8.jar:3.0.8]\r\n        at org.apache.cassandra.utils.AbstractIterator.hasNext(AbstractIterator.java:47) ~[apache-cassandra-3.0.8.jar:3.0.8]\r\n        at org.apache.cassandra.db.partitions.PartitionUpdate$PartitionUpdateSerializer.deserialize30(PartitionUpdate.java:670) ~[apache-cassandra-3.0.8.jar:3.0.8]\r\n        at org.apache.cassandra.db.partitions.PartitionUpdate$PartitionUpdateSerializer.deserialize(PartitionUpdate.java:645) ~[apache-cassandra-3.0.8.jar:3.0.8]\r\n        at org.apache.cassandra.db.partitions.PartitionUpdate.fromBytes(PartitionUpdate.java:235) ~[apache-cassandra-3.0.8.jar:3.0.8]\r\n        at org.apache.cassandra.db.SystemKeyspace.loadPaxosState(SystemKeyspace.java:1103) ~[apache-cassandra-3.0.8.jar:3.0.8]\r\n        at org.apache.cassandra.service.paxos.PaxosState.prepare(PaxosState.java:74) ~[apache-cassandra-3.0.8.jar:3.0.8]\r\n        at org.apache.cassandra.service.paxos.PrepareVerbHandler.doVerb(PrepareVerbHandler.java:33) ~[apache-cassandra-3.0.8.jar:3.0.8]\r\n        at org.apache.cassandra.net.MessageDeliveryTask.run(MessageDeliveryTask.java:67) ~[apache-cassandra-3.0.8.jar:3.0.8]\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0_172]\r\n        at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$FutureTask.run(AbstractLocalAwareExecutorService.java:164) ~[apache-cassandra-3.0.8.jar:3.0.8]\r\n        at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$LocalSessionFutureTask.run(AbstractLocalAwareExecutorService.java:136) [apache-cassandra-3.0.8.jar:3.0.8]\r\n        at org.apache.cassandra.concurrent.SEPWorker.run(SEPWorker.java:105) [apache-cassandra-3.0.8.jar:3.0.8]\r\n        at java.lang.Thread.run(Thread.java:748) [na:1.8.0_172]\r\nCaused by: java.io.IOException: Corrupt empty row found in unfiltered partition\r\n        at org.apache.cassandra.db.rows.UnfilteredSerializer.deserialize(UnfilteredSerializer.java:368) ~[apache-cassandra-3.0.8.jar:3.0.8]\r\n        at org.apache.cassandra.db.rows.UnfilteredRowIteratorSerializer$1.computeNext(UnfilteredRowIteratorSerializer.java:217) ~[apache-cassandra-3.0.8.jar:3.0.8]\r\n        ... 14 common frames omitted\r\n```\r\n\r\nThey appear when I make specific query in my application which throws this error:\r\n```\r\ncom.datastax.driver.core.exceptions.ReadTimeoutException: Cassandra timeout during read query at consistency LOCAL_SERIAL (2 responses were required but only 0 replica responded)\r\n\tat com.datastax.driver.core.exceptions.ReadTimeoutException.copy(ReadTimeoutException.java:88)\r\n\tat com.datastax.driver.core.exceptions.ReadTimeoutException.copy(ReadTimeoutException.java:25)\r\n\tat com.datastax.driver.core.DriverThrowables.propagateCause(DriverThrowables.java:37)\r\n\tat com.datastax.driver.core.DefaultResultSetFuture.getUninterruptibly(DefaultResultSetFuture.java:245)\r\n\tat com.datastax.driver.core.AbstractSession.execute(AbstractSession.java:68)\r\n\tat com.twd.persistence.cassandra.BasicTable.getColumns(BasicTable.java:136)\r\n\tat com.twd.persistence.cassandra.BasicTable.getColumns(BasicTable.java:109)\r\n\tat com.tradeweb.tws.repository.impl.OrderServiceRepositoryImpl.getTrades(OrderServiceRepositoryImpl.java:80)\r\n\tat com.tradeweb.tws.service.impl.OrderServiceImpl.getTrades(OrderServiceImpl.java:124)\r\n\tat com.tradeweb.tws.web.controller.OrderResource.getOrders(OrderResource.java:81)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory$1.invoke(ResourceMethodInvocationHandlerFactory.java:81)\r\n\tat org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:144)\r\n\tat org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:161)\r\n\tat org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:160)\r\n\tat org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:99)\r\n\tat org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:389)\r\n\tat org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:347)\r\n\tat org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:102)\r\n\tat org.glassfish.jersey.server.ServerRuntime$2.run(ServerRuntime.java:326)\r\n\tat org.glassfish.jersey.internal.Errors$1.call(Errors.java:271)\r\n\tat org.glassfish.jersey.internal.Errors$1.call(Errors.java:267)\r\n\tat org.glassfish.jersey.internal.Errors.process(Errors.java:315)\r\n\tat org.glassfish.jersey.internal.Errors.process(Errors.java:297)\r\n\tat org.glassfish.jersey.internal.Errors.process(Errors.java:267)\r\n\tat org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:317)\r\n\tat org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:305)\r\n\tat org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:1154)\r\n\tat org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:471)\r\n\tat org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:425)\r\n\tat org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:383)\r\n\tat org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:336)\r\n\tat org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat org.apache.catalina.filters.CorsFilter.handleNonCORS(CorsFilter.java:436)\r\n\tat org.apache.catalina.filters.CorsFilter.doFilter(CorsFilter.java:177)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.tradeweb.tws.web.filter.TWDContentSecurityFilter.doFilter(TWDContentSecurityFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat com.tradeweb.tws.web.filter.TWDHttpHeaderSecurityFilter.doFilter(TWDHttpHeaderSecurityFilter.java:105)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\r\n\tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:617)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)\r\n\tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)\r\n\tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1527)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1484)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\nCaused by: com.datastax.driver.core.exceptions.ReadTimeoutException: Cassandra timeout during read query at consistency LOCAL_SERIAL (2 responses were required but only 0 replica responded)\r\n\tat com.datastax.driver.core.exceptions.ReadTimeoutException.copy(ReadTimeoutException.java:115)\r\n\tat com.datastax.driver.core.Responses$Error.asException(Responses.java:124)\r\n\tat com.datastax.driver.core.RequestHandler$SpeculativeExecution.onSet(RequestHandler.java:473)\r\n\tat com.datastax.driver.core.Connection$Dispatcher.channelRead0(Connection.java:1070)\r\n\tat com.datastax.driver.core.Connection$Dispatcher.channelRead0(Connection.java:993)\r\n\tat io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:105)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\r\n\tat io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\r\n\tat io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:102)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:323)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:297)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1434)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:965)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:163)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:648)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:583)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:500)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:462)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:897)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 common frames omitted\r\nCaused by: com.datastax.driver.core.exceptions.ReadTimeoutException: Cassandra timeout during read query at consistency LOCAL_SERIAL (2 responses were required but only 0 replica responded)\r\n\tat com.datastax.driver.core.Responses$Error$1.decode(Responses.java:62)\r\n\tat com.datastax.driver.core.Responses$Error$1.decode(Responses.java:37)\r\n\tat com.datastax.driver.core.Message$ProtocolDecoder.decode(Message.java:289)\r\n\tat com.datastax.driver.core.Message$ProtocolDecoder.decode(Message.java:269)\r\n\tat io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:88)\r\n\t... 20 common frames omitted\r\n```\r\n\r\n\r\nI have run nodetool describecluster and it showed that schema on one of the nodes is unreachable. After that I restarted this node and describecluster showed that every schema is correct. This however did not stop those errors from showing. Since that I restarted every node like it is described here: https://stackoverflow.com/a/59678908/9451651. I have also run nodetool repair -pr too on each node. Nothing helped and I am still seeing those errors. Anyone knows how to solve this issue?\r\n\r\n\r\nUpdate:\r\nI found with nodetool scrub and sstablescrub commands that sstables for this table were broken. I truncated the table and repopulated it with the same data (I made backup with sql inserts). After running the inserts it threw an error that one row is corrupted. I removed this row and then repopulted the table again. This time no error. Now when I run nodetool scrub and sstablescrub it shows no issues with sstables however I am still seeing my original errors. I think that despite my sstables being correct right now the commit logs/caches are still broken. Do you know how I can fix that?\r\n\r\nUpdate 2:\r\nI resolved this issue by dropping the corrupted table and recreating it from backup we had before this issue started. Other fixes did not work in this case. \r\n","title":"Cassandra error: Corrupt empty row found in unfiltered partition","body":"<p>I have cassandra cluster with 3 nodes. After adding column to table I started seeing those errors in 2 of my cassandra nodes:</p>\n<pre><code>WARN  [SharedPool-Worker-1] 2022-08-08 10:34:29,219 AbstractLocalAwareExecutorService.java:169 - Uncaught exception on thread Thread[SharedPool-Worker-1,5,main]: {}\njava.io.IOError: java.io.IOException: Corrupt empty row found in unfiltered partition\n        at org.apache.cassandra.db.rows.UnfilteredRowIteratorSerializer$1.computeNext(UnfilteredRowIteratorSerializer.java:222) ~[apache-cassandra-3.0.8.jar:3.0.8]\n        at org.apache.cassandra.db.rows.UnfilteredRowIteratorSerializer$1.computeNext(UnfilteredRowIteratorSerializer.java:210) ~[apache-cassandra-3.0.8.jar:3.0.8]\n        at org.apache.cassandra.utils.AbstractIterator.hasNext(AbstractIterator.java:47) ~[apache-cassandra-3.0.8.jar:3.0.8]\n        at org.apache.cassandra.db.partitions.PartitionUpdate$PartitionUpdateSerializer.deserialize30(PartitionUpdate.java:670) ~[apache-cassandra-3.0.8.jar:3.0.8]\n        at org.apache.cassandra.db.partitions.PartitionUpdate$PartitionUpdateSerializer.deserialize(PartitionUpdate.java:645) ~[apache-cassandra-3.0.8.jar:3.0.8]\n        at org.apache.cassandra.db.partitions.PartitionUpdate.fromBytes(PartitionUpdate.java:235) ~[apache-cassandra-3.0.8.jar:3.0.8]\n        at org.apache.cassandra.db.SystemKeyspace.loadPaxosState(SystemKeyspace.java:1103) ~[apache-cassandra-3.0.8.jar:3.0.8]\n        at org.apache.cassandra.service.paxos.PaxosState.prepare(PaxosState.java:74) ~[apache-cassandra-3.0.8.jar:3.0.8]\n        at org.apache.cassandra.service.paxos.PrepareVerbHandler.doVerb(PrepareVerbHandler.java:33) ~[apache-cassandra-3.0.8.jar:3.0.8]\n        at org.apache.cassandra.net.MessageDeliveryTask.run(MessageDeliveryTask.java:67) ~[apache-cassandra-3.0.8.jar:3.0.8]\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0_172]\n        at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$FutureTask.run(AbstractLocalAwareExecutorService.java:164) ~[apache-cassandra-3.0.8.jar:3.0.8]\n        at org.apache.cassandra.concurrent.AbstractLocalAwareExecutorService$LocalSessionFutureTask.run(AbstractLocalAwareExecutorService.java:136) [apache-cassandra-3.0.8.jar:3.0.8]\n        at org.apache.cassandra.concurrent.SEPWorker.run(SEPWorker.java:105) [apache-cassandra-3.0.8.jar:3.0.8]\n        at java.lang.Thread.run(Thread.java:748) [na:1.8.0_172]\nCaused by: java.io.IOException: Corrupt empty row found in unfiltered partition\n        at org.apache.cassandra.db.rows.UnfilteredSerializer.deserialize(UnfilteredSerializer.java:368) ~[apache-cassandra-3.0.8.jar:3.0.8]\n        at org.apache.cassandra.db.rows.UnfilteredRowIteratorSerializer$1.computeNext(UnfilteredRowIteratorSerializer.java:217) ~[apache-cassandra-3.0.8.jar:3.0.8]\n        ... 14 common frames omitted\n</code></pre>\n<p>They appear when I make specific query in my application which throws this error:</p>\n<pre><code>com.datastax.driver.core.exceptions.ReadTimeoutException: Cassandra timeout during read query at consistency LOCAL_SERIAL (2 responses were required but only 0 replica responded)\n    at com.datastax.driver.core.exceptions.ReadTimeoutException.copy(ReadTimeoutException.java:88)\n    at com.datastax.driver.core.exceptions.ReadTimeoutException.copy(ReadTimeoutException.java:25)\n    at com.datastax.driver.core.DriverThrowables.propagateCause(DriverThrowables.java:37)\n    at com.datastax.driver.core.DefaultResultSetFuture.getUninterruptibly(DefaultResultSetFuture.java:245)\n    at com.datastax.driver.core.AbstractSession.execute(AbstractSession.java:68)\n    at com.twd.persistence.cassandra.BasicTable.getColumns(BasicTable.java:136)\n    at com.twd.persistence.cassandra.BasicTable.getColumns(BasicTable.java:109)\n    at com.tradeweb.tws.repository.impl.OrderServiceRepositoryImpl.getTrades(OrderServiceRepositoryImpl.java:80)\n    at com.tradeweb.tws.service.impl.OrderServiceImpl.getTrades(OrderServiceImpl.java:124)\n    at com.tradeweb.tws.web.controller.OrderResource.getOrders(OrderResource.java:81)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory$1.invoke(ResourceMethodInvocationHandlerFactory.java:81)\n    at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:144)\n    at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:161)\n    at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:160)\n    at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:99)\n    at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:389)\n    at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:347)\n    at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:102)\n    at org.glassfish.jersey.server.ServerRuntime$2.run(ServerRuntime.java:326)\n    at org.glassfish.jersey.internal.Errors$1.call(Errors.java:271)\n    at org.glassfish.jersey.internal.Errors$1.call(Errors.java:267)\n    at org.glassfish.jersey.internal.Errors.process(Errors.java:315)\n    at org.glassfish.jersey.internal.Errors.process(Errors.java:297)\n    at org.glassfish.jersey.internal.Errors.process(Errors.java:267)\n    at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:317)\n    at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:305)\n    at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:1154)\n    at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:471)\n    at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:425)\n    at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:383)\n    at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:336)\n    at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:223)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.filters.CorsFilter.handleNonCORS(CorsFilter.java:436)\n    at org.apache.catalina.filters.CorsFilter.doFilter(CorsFilter.java:177)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at com.tradeweb.tws.web.filter.TWDContentSecurityFilter.doFilter(TWDContentSecurityFilter.java:51)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at com.tradeweb.tws.web.filter.TWDHttpHeaderSecurityFilter.doFilter(TWDHttpHeaderSecurityFilter.java:105)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\n    at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:617)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1527)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1484)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: com.datastax.driver.core.exceptions.ReadTimeoutException: Cassandra timeout during read query at consistency LOCAL_SERIAL (2 responses were required but only 0 replica responded)\n    at com.datastax.driver.core.exceptions.ReadTimeoutException.copy(ReadTimeoutException.java:115)\n    at com.datastax.driver.core.Responses$Error.asException(Responses.java:124)\n    at com.datastax.driver.core.RequestHandler$SpeculativeExecution.onSet(RequestHandler.java:473)\n    at com.datastax.driver.core.Connection$Dispatcher.channelRead0(Connection.java:1070)\n    at com.datastax.driver.core.Connection$Dispatcher.channelRead0(Connection.java:993)\n    at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:105)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\n    at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\n    at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:102)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\n    at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:323)\n    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:297)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)\n    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1434)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)\n    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:965)\n    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:163)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:648)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:583)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:500)\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:462)\n    at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:897)\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n    ... 1 common frames omitted\nCaused by: com.datastax.driver.core.exceptions.ReadTimeoutException: Cassandra timeout during read query at consistency LOCAL_SERIAL (2 responses were required but only 0 replica responded)\n    at com.datastax.driver.core.Responses$Error$1.decode(Responses.java:62)\n    at com.datastax.driver.core.Responses$Error$1.decode(Responses.java:37)\n    at com.datastax.driver.core.Message$ProtocolDecoder.decode(Message.java:289)\n    at com.datastax.driver.core.Message$ProtocolDecoder.decode(Message.java:269)\n    at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:88)\n    ... 20 common frames omitted\n</code></pre>\n<p>I have run nodetool describecluster and it showed that schema on one of the nodes is unreachable. After that I restarted this node and describecluster showed that every schema is correct. This however did not stop those errors from showing. Since that I restarted every node like it is described here: <a href=\"https://stackoverflow.com/a/59678908/9451651\">https://stackoverflow.com/a/59678908/9451651</a>. I have also run nodetool repair -pr too on each node. Nothing helped and I am still seeing those errors. Anyone knows how to solve this issue?</p>\n<p>Update:\nI found with nodetool scrub and sstablescrub commands that sstables for this table were broken. I truncated the table and repopulated it with the same data (I made backup with sql inserts). After running the inserts it threw an error that one row is corrupted. I removed this row and then repopulted the table again. This time no error. Now when I run nodetool scrub and sstablescrub it shows no issues with sstables however I am still seeing my original errors. I think that despite my sstables being correct right now the commit logs/caches are still broken. Do you know how I can fix that?</p>\n<p>Update 2:\nI resolved this issue by dropping the corrupted table and recreating it from backup we had before this issue started. Other fixes did not work in this case.</p>\n"},{"tags":["java","kotlin","intellij-idea","intellij-plugin"],"answers":[{"tags":[],"owner":{"account_id":6921189,"reputation":1490,"user_id":5313817,"display_name":"Rishal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660138098,"creation_date":1660138098,"answer_id":73307193,"question_id":73307047,"body_markdown":"Intellij does provide a way to inspect the code, You can explore it out[![enter image description here][1]][1]\r\n\r\nYou can enable the type of configuration you want and then do a code inspect.\r\n\r\nas below\r\n[![enter image description here][2]][2]\r\n\r\nin summary you can see as per below image, declaration suggesting `never used method`.\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jbGBR.png\r\n  [2]: https://i.stack.imgur.com/kudmC.png\r\n  [3]: https://i.stack.imgur.com/zZ9vy.png","title":"Find non-called methods in the project in Inteliji IDEA","body":"<p>Intellij does provide a way to inspect the code, You can explore it out<a href=\"https://i.stack.imgur.com/jbGBR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jbGBR.png\" alt=\"enter image description here\" /></a></p>\n<p>You can enable the type of configuration you want and then do a code inspect.</p>\n<p>as below\n<a href=\"https://i.stack.imgur.com/kudmC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kudmC.png\" alt=\"enter image description here\" /></a></p>\n<p>in summary you can see as per below image, declaration suggesting <code>never used method</code>.\n<a href=\"https://i.stack.imgur.com/zZ9vy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zZ9vy.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":16189468,"reputation":804,"user_id":11688668,"display_name":"Ilya Y"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1660224233,"accepted_answer_id":73307193,"answer_count":1,"score":0,"last_activity_date":1660138098,"creation_date":1660137489,"question_id":73307047,"body_markdown":"Is there some kind of plugin or keyboard shortcut to search for all non-called methods in IDEA?","title":"Find non-called methods in the project in Inteliji IDEA","body":"<p>Is there some kind of plugin or keyboard shortcut to search for all non-called methods in IDEA?</p>\n"},{"tags":["java","excel","apache-poi","stream-processing"],"comments":[{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":1,"creation_date":1540490638,"post_id":52995027,"comment_id":92895990,"body_markdown":"Swap to a streamable format like CSV? Excel files have forwards-and-backwards references in them that make a pure stream-as-you-generate approach at best super super tricky, and impossible in many situations...","body":"Swap to a streamable format like CSV? Excel files have forwards-and-backwards references in them that make a pure stream-as-you-generate approach at best super super tricky, and impossible in many situations..."},{"owner":{"account_id":171189,"reputation":38109,"user_id":398441,"accept_rate":87,"display_name":"Johan"},"score":0,"creation_date":1540491526,"post_id":52995027,"comment_id":92896396,"body_markdown":"Unfortunately an actual Excel file is required :(","body":"Unfortunately an actual Excel file is required :("},{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":1,"creation_date":1540495877,"post_id":52995027,"comment_id":92898471,"body_markdown":"You&#39;re going to have to change one part of your requirements then, or spend a man-month or so writing Java code for Excel files...","body":"You&#39;re going to have to change one part of your requirements then, or spend a man-month or so writing Java code for Excel files..."},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1540532178,"post_id":52995027,"comment_id":92908215,"body_markdown":"A `*.xlsx` file is nothing else than a `ZIP` archive containing the rows of a sheet in a `/xl/worksheets/sheet*.xml` file in that archive. You wants streaming that `*.xlsx` file content through to an HTTP response. So your requrement is streaming the rows into a substream to `/xl/worksheets/sheet*.xml` within the main stream of the `*.xlsx` file content. Possible? Not that I was aware of. You could streaming the data through to an HTTP response and then creating the `*.xlsx` file on client side from that data. But `CSV` would not be my favorit for streaming the data. My favorit would be `XML`.","body":"A <code>*.xlsx</code> file is nothing else than a <code>ZIP</code> archive containing the rows of a sheet in a <code>&#47;xl&#47;worksheets&#47;sheet*.xml</code> file in that archive. You wants streaming that <code>*.xlsx</code> file content through to an HTTP response. So your requrement is streaming the rows into a substream to <code>&#47;xl&#47;worksheets&#47;sheet*.xml</code> within the main stream of the <code>*.xlsx</code> file content. Possible? Not that I was aware of. You could streaming the data through to an HTTP response and then creating the <code>*.xlsx</code> file on client side from that data. But <code>CSV</code> would not be my favorit for streaming the data. My favorit would be <code>XML</code>."},{"owner":{"account_id":171189,"reputation":38109,"user_id":398441,"accept_rate":87,"display_name":"Johan"},"score":0,"creation_date":1540534942,"post_id":52995027,"comment_id":92909177,"body_markdown":"Thanks, I was not aware of this. I guess this is why I haven&#39;t found any libraries that supports it. Maybe this even answers the question?","body":"Thanks, I was not aware of this. I guess this is why I haven&#39;t found any libraries that supports it. Maybe this even answers the question?"}],"owner":{"account_id":171189,"reputation":38109,"user_id":398441,"accept_rate":87,"display_name":"Johan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":998,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660137874,"creation_date":1540488689,"question_id":52995027,"body_markdown":"I&#39;m looking for a way to generate very large Excel documents (on the fly) in a streaming fashion _without_ holding too much intermediary state in-memory (and preferably not on disk either). What I have is a lazy stream of data, `Stream&lt;Data&gt;`, potentially containing hundreds of thousands of `Data` objects. I want to continuously convert this data stream into excel rows written to an `OutputStream`. The end goal is _not_ to write the Excel document to disk, I want to stream it through to an HTTP response. \r\n\r\nI&#39;ve tried using [Apache POI][1] (4.0.0) but the problem with POI and its [SXSSFWorkbook](https://poi.apache.org/apidocs/org/apache/poi/xssf/streaming/SXSSFWorkbook.html) is that you can only write to the `OutputStream` once! I.e. this won&#39;t work:\r\n\r\n    OutputStream os = ..\r\n    Stream&lt;Data&gt; dataStream = ...\r\n    SXSSFWorkbook wb = new SXSSFWorkbook(100); // keep 100 rows in memory, exceeding rows will be flushed to disk\r\n    Sheet sh = wb.createSheet();\r\n    partition(dataStream, 100)\r\n         .peek((List&lt;Data&gt; data) -&gt; addRow(sh, data))\r\n         .forEach(__ -&gt; wb.write(os));\r\n\r\nWhat I try to do here is to partition the data stream (`Stream&lt;Data&gt;`) into chunks of 100 and then call the `addRow` method (not shown here) which converts the data into an Excel row and writes it to the `Sheet` (called `sh`). This actually ought to work fine if it weren&#39;t for the fact that `wb.write(..)` throws an exception when it&#39;s called the second time (i.e. when we reach the second chunk):\r\n\r\n    java.io.IOException: Stream closed\r\n    \tat java.io.BufferedWriter.ensureOpen(BufferedWriter.java:116)\r\n    \tat java.io.BufferedWriter.write(BufferedWriter.java:221)\r\n    \tat java.io.Writer.write(Writer.java:157)\r\n    \tat org.apache.poi.xssf.streaming.SheetDataWriter.beginRow(SheetDataWriter.java:213)\r\n    \tat org.apache.poi.xssf.streaming.SheetDataWriter.writeRow(SheetDataWriter.java:203)\r\n    \tat org.apache.poi.xssf.streaming.SXSSFSheet.flushOneRow(SXSSFSheet.java:1876)\r\n    \tat org.apache.poi.xssf.streaming.SXSSFSheet.flushRows(SXSSFSheet.java:1851)\r\n    \tat org.apache.poi.xssf.streaming.SXSSFSheet.flushRows(SXSSFSheet.java:1865)\r\n    \tat org.apache.poi.xssf.streaming.SXSSFWorkbook.flushSheets(SXSSFWorkbook.java:949)\r\n    \tat org.apache.poi.xssf.streaming.SXSSFWorkbook.write(SXSSFWorkbook.java:923)\r\n\r\nI&#39;ve tried various hacks such as:\r\n\r\n    OutputStream os = ..\r\n    Stream&lt;Data&gt; dataStream = ...\r\n    SXSSFWorkbook wb = new SXSSFWorkbook(100); // keep 100 rows in memory, exceeding rows will be flushed to disk\r\n    Sheet sh = wb.createSheet();\r\n    partition(dataStream, 100)\r\n         .peek((List&lt;Data&gt; data) -&gt; addRow(sh, data))\r\n         .forEach(__ -&gt; {\r\n                        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\r\n                        wb.write(byteArrayOutputStream);\r\n                        outputStream.write(byteArrayOutputStream.toByteArray());\r\n                    });\r\n\r\nBut this doesn&#39;t seem to work either. I could of course just do something like this:\r\n\r\n    OutputStream os = ..\r\n    Stream&lt;Data&gt; dataStream = ...\r\n    SXSSFWorkbook wb = new SXSSFWorkbook(100); // keep 100 rows in memory, exceeding rows will be flushed to disk\r\n    Sheet sh = wb.createSheet();\r\n    dataStream.forEach(row -&gt; addRow(sh, row));\r\n    wb.write(os);\r\n\r\nBut the problem with this approach is that the entire Excel document is created (and temporarily stored on disk) before the first bytes are pushed to the `OutputStream`. This means that the `OutputStream` consumer needs to wait unnecessarily long before the data even begins to stream.\r\n\r\nSo my questions is: How can I generate an Excel document with very large set of rows _in chunks_ without waiting for the entire document to be generated first?\r\n\r\nNote that Apache POI is not a requirement and I&#39;m happy to switch to another library if necessary.\r\n\r\n  [1]: https://poi.apache.org/\r\n\r\n\r\n\r\n","title":"Lazily generate Excel document in Java in chunks","body":"<p>I'm looking for a way to generate very large Excel documents (on the fly) in a streaming fashion <em>without</em> holding too much intermediary state in-memory (and preferably not on disk either). What I have is a lazy stream of data, <code>Stream&lt;Data&gt;</code>, potentially containing hundreds of thousands of <code>Data</code> objects. I want to continuously convert this data stream into excel rows written to an <code>OutputStream</code>. The end goal is <em>not</em> to write the Excel document to disk, I want to stream it through to an HTTP response. </p>\n\n<p>I've tried using <a href=\"https://poi.apache.org/\" rel=\"nofollow noreferrer\">Apache POI</a> (4.0.0) but the problem with POI and its <a href=\"https://poi.apache.org/apidocs/org/apache/poi/xssf/streaming/SXSSFWorkbook.html\" rel=\"nofollow noreferrer\">SXSSFWorkbook</a> is that you can only write to the <code>OutputStream</code> once! I.e. this won't work:</p>\n\n<pre><code>OutputStream os = ..\nStream&lt;Data&gt; dataStream = ...\nSXSSFWorkbook wb = new SXSSFWorkbook(100); // keep 100 rows in memory, exceeding rows will be flushed to disk\nSheet sh = wb.createSheet();\npartition(dataStream, 100)\n     .peek((List&lt;Data&gt; data) -&gt; addRow(sh, data))\n     .forEach(__ -&gt; wb.write(os));\n</code></pre>\n\n<p>What I try to do here is to partition the data stream (<code>Stream&lt;Data&gt;</code>) into chunks of 100 and then call the <code>addRow</code> method (not shown here) which converts the data into an Excel row and writes it to the <code>Sheet</code> (called <code>sh</code>). This actually ought to work fine if it weren't for the fact that <code>wb.write(..)</code> throws an exception when it's called the second time (i.e. when we reach the second chunk):</p>\n\n<pre><code>java.io.IOException: Stream closed\n    at java.io.BufferedWriter.ensureOpen(BufferedWriter.java:116)\n    at java.io.BufferedWriter.write(BufferedWriter.java:221)\n    at java.io.Writer.write(Writer.java:157)\n    at org.apache.poi.xssf.streaming.SheetDataWriter.beginRow(SheetDataWriter.java:213)\n    at org.apache.poi.xssf.streaming.SheetDataWriter.writeRow(SheetDataWriter.java:203)\n    at org.apache.poi.xssf.streaming.SXSSFSheet.flushOneRow(SXSSFSheet.java:1876)\n    at org.apache.poi.xssf.streaming.SXSSFSheet.flushRows(SXSSFSheet.java:1851)\n    at org.apache.poi.xssf.streaming.SXSSFSheet.flushRows(SXSSFSheet.java:1865)\n    at org.apache.poi.xssf.streaming.SXSSFWorkbook.flushSheets(SXSSFWorkbook.java:949)\n    at org.apache.poi.xssf.streaming.SXSSFWorkbook.write(SXSSFWorkbook.java:923)\n</code></pre>\n\n<p>I've tried various hacks such as:</p>\n\n<pre><code>OutputStream os = ..\nStream&lt;Data&gt; dataStream = ...\nSXSSFWorkbook wb = new SXSSFWorkbook(100); // keep 100 rows in memory, exceeding rows will be flushed to disk\nSheet sh = wb.createSheet();\npartition(dataStream, 100)\n     .peek((List&lt;Data&gt; data) -&gt; addRow(sh, data))\n     .forEach(__ -&gt; {\n                    ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\n                    wb.write(byteArrayOutputStream);\n                    outputStream.write(byteArrayOutputStream.toByteArray());\n                });\n</code></pre>\n\n<p>But this doesn't seem to work either. I could of course just do something like this:</p>\n\n<pre><code>OutputStream os = ..\nStream&lt;Data&gt; dataStream = ...\nSXSSFWorkbook wb = new SXSSFWorkbook(100); // keep 100 rows in memory, exceeding rows will be flushed to disk\nSheet sh = wb.createSheet();\ndataStream.forEach(row -&gt; addRow(sh, row));\nwb.write(os);\n</code></pre>\n\n<p>But the problem with this approach is that the entire Excel document is created (and temporarily stored on disk) before the first bytes are pushed to the <code>OutputStream</code>. This means that the <code>OutputStream</code> consumer needs to wait unnecessarily long before the data even begins to stream.</p>\n\n<p>So my questions is: How can I generate an Excel document with very large set of rows <em>in chunks</em> without waiting for the entire document to be generated first?</p>\n\n<p>Note that Apache POI is not a requirement and I'm happy to switch to another library if necessary.</p>\n"},{"tags":["java","android","memory-leaks","out-of-memory","clone"],"comments":[{"owner":{"account_id":22755735,"reputation":555,"user_id":16915219,"display_name":"JumperBot_"},"score":0,"creation_date":1660140073,"post_id":73307031,"comment_id":129462805,"body_markdown":"Your [image](https://i.stack.imgur.com/HtO6Y.jpg) looks like an image I would take on an old/unfocused/incorrectly configured/plugged-in camera, that might not be the result of the memory leak. Also, I suggest not cloning arrays too much since it doubles the memory used by the array. In other words, use the original array when it&#39;s performance and/or memory-wise.","body":"Your <a href=\"https://i.stack.imgur.com/HtO6Y.jpg\" rel=\"nofollow noreferrer\">image</a> looks like an image I would take on an old/unfocused/incorrectly configured/plugged-in camera, that might not be the result of the memory leak. Also, I suggest not cloning arrays too much since it doubles the memory used by the array. In other words, use the original array when it&#39;s performance and/or memory-wise."},{"owner":{"account_id":25402705,"reputation":1,"user_id":19211894,"display_name":"mkollu"},"score":0,"creation_date":1660195965,"post_id":73307031,"comment_id":129476568,"body_markdown":"@JumperBot_ When I create an image using **byte data from the camera** with clone(), the image comes out fine. But as you said, this event increases memory usage and causes OutOfMemory in the loop. The original sequence leads to the above [distorted image](https://i.stack.imgur.com/HtO6Y.jpg). There must be another way to record video without OutOfMemory and without using the original data.","body":"@JumperBot_ When I create an image using <b>byte data from the camera</b> with clone(), the image comes out fine. But as you said, this event increases memory usage and causes OutOfMemory in the loop. The original sequence leads to the above <a href=\"https://i.stack.imgur.com/HtO6Y.jpg\" rel=\"nofollow noreferrer\">distorted image</a>. There must be another way to record video without OutOfMemory and without using the original data."},{"owner":{"account_id":22755735,"reputation":555,"user_id":16915219,"display_name":"JumperBot_"},"score":0,"creation_date":1660199841,"post_id":73307031,"comment_id":129477530,"body_markdown":"Have you tried to **modify the methods** that need them so that you can just process it one byte at a time? If not, you might need to **lower the resolution** to lower memory usage even if the UX suffers drastically.","body":"Have you tried to <b>modify the methods</b> that need them so that you can just process it one byte at a time? If not, you might need to <b>lower the resolution</b> to lower memory usage even if the UX suffers drastically."},{"owner":{"account_id":25402705,"reputation":1,"user_id":19211894,"display_name":"mkollu"},"score":0,"creation_date":1660218319,"post_id":73307031,"comment_id":129483716,"body_markdown":"When I send 30 frames per second, the method I use cannot keep up with the speed of the accumulating frames. Since my arraylist holding byte[]s is inflated, it becomes OOM. I don&#39;t know how to solve this. Lowering resolution is not a solution for my project.","body":"When I send 30 frames per second, the method I use cannot keep up with the speed of the accumulating frames. Since my arraylist holding byte[]s is inflated, it becomes OOM. I don&#39;t know how to solve this. Lowering resolution is not a solution for my project."}],"owner":{"account_id":25402705,"reputation":1,"user_id":19211894,"display_name":"mkollu"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":247,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660137414,"creation_date":1660137414,"question_id":73307031,"body_markdown":"I am streaming RTSP from my Android device using [libstreaming](https://github.com/fyhertz/libstreaming). I also want to record video when I press the button while streaming. I started a thread inside the net\\majorkernelpanic\\streaming\\video\\VideoStream.java class to record video. I am posting **camera** and **data** objects from **onPreviewFrame(byte[] data, Camera camera)** to this thread. When I send the **data** using Arrays.copyOf(), System.arrayCopy() or data.clone(), OutOfMemory is occurs. When I send **data** directly, there is no memory leak, but color shift occurs in the video. I would be happy if you can help.\r\n\r\n[Capture frame from Video using data without clone() or etc.][1]\r\n\r\n[Profiler - clicked record video button at second 00:20,769 ][2]\r\n\r\n**VideoStream.java**\r\n\r\n``` \r\n   recordVideoThread.start();\r\n\r\n   Camera.PreviewCallback callback = new Camera.PreviewCallback() {\r\n\t    long now = System.nanoTime()/1000;\r\n        @Override\r\n\t\tpublic void onPreviewFrame(byte[] data, Camera camera) {\r\n\t\t\tnow = System.nanoTime()/1000;\r\n\r\n\t\t\tif (RtspServerActivity.getRecordVideoButtonActive()){\r\n\t\t\t\t//Creating object to add bytelist\r\n\t\t\t\tRecordParameters recordParameters = new RecordParameters(data, camera);\r\n\t\t\t\t//Adding objects to list\r\n\t\t\t\trecordVideo.addByteToList(recordParameters);\r\n\t\t\t}\r\n```\r\n\r\n**RecordParameters**\r\n```\r\npublic class RecordParameters {\r\n    private static final String TAG = &quot;RecordParameters&quot;;\r\n\r\n    private byte[] byteData;\r\n    private Camera camera_obj;\r\n\r\n    public RecordParameters(byte[] byteData, Camera camera_obj) {\r\n        this.byteData = byteData;\r\n        this.camera_obj = camera_obj;\r\n    }\r\n\r\n    public RecordParameters(){}\r\n\r\n    public byte[] getByteData() {\r\n        return byteData;\r\n    }\r\n\r\n    public Camera getCamera_obj() {\r\n        return camera_obj;\r\n    }\r\n\r\n    public void recordVideo(byte[] byteData, Camera camera_obj, VideoWriter videoWriter)  {\r\n        Camera.Parameters parameters = camera_obj.getParameters();\r\n        int width = parameters.getPreviewSize().width;\r\n        int height = parameters.getPreviewSize().height;\r\n        YuvImage yuv = new YuvImage(byteData, parameters.getPreviewFormat(), width, height, null);\r\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n        yuv.compressToJpeg(new Rect(0, 0, width, height), 100, out);\r\n        Mat mat = yuvtoMat(out);\r\n        videoWriter.write(mat);\r\n        mat.release();\r\n    }\r\n\r\n    public Mat yuvtoMat(ByteArrayOutputStream baos){\r\n        return Imgcodecs.imdecode(new MatOfByte(baos.toByteArray()), Imgcodecs.IMREAD_COLOR);\r\n    }\r\n\r\n}\r\n```\r\n\r\n**RecordVideoThread**\r\n```\r\npublic class RecordVideoThread extends Thread {\r\n    private final String TAG = &quot;RecordVideo&quot;;\r\n    boolean isVideoRecording = false;\r\n    List&lt;RecordParameters&gt; byteList = new ArrayList&lt;&gt;();\r\n    VideoWriter videoWriter = null;\r\n    RecordParameters recordParameters = new RecordParameters();\r\n\r\n    @Override\r\n    public void run() {\r\n        while(true){\r\n            if(byteList.size()!=0){\r\n                if(videoWriter == null){\r\n                    long now = System.nanoTime();\r\n                    Camera.Parameters parameters = byteList.get(0).getCamera_obj().getParameters();\r\n                    int width = parameters.getPreviewSize().width;\r\n                    int height = parameters.getPreviewSize().height;\r\n                    int frameRate = parameters.getPreviewFrameRate();\r\n                    Size frameSize = new Size(width, height);\r\n                    Log.i(TAG, &quot;VideoWriter is null&quot;);\r\n                    videoWriter= new VideoWriter(\r\n                            &quot;/data/data/com.example.RTSP/files/&quot; + now + &quot;.avi&quot;,\r\n                            VideoWriter.fourcc(&#39;M&#39;, &#39;J&#39;,&#39;P&#39;,&#39;G&#39;),\r\n                            frameRate,\r\n                            frameSize,\r\n                            true);\r\n\r\n                    Log.i(TAG, &quot;videowriter &quot;+ width +&quot; &quot;+height+&quot; &quot;+frameRate);\r\n                }\r\n                //Log.i(TAG, &quot;byte list   &quot;+ byteList.size()+&quot;   &quot;+ Arrays.toString(byteList.get(0).getByteData()));\r\n                recordParameters.recordVideo(byteList.get(0).getByteData(),byteList.get(0).getCamera_obj(), videoWriter);\r\n                byteList.remove(byteList.get(0));\r\n                System.gc();\r\n                System.runFinalization();\r\n                isVideoRecording = true;\r\n            }\r\n            if(!RtspServerActivity.getRecordVideoButtonActive() &amp; isRunning()){\r\n                Log.i(TAG, &quot;Video Writer released&quot;);\r\n                videoWriter.release();\r\n                stopRecord();\r\n            }\r\n            try {\r\n                Thread.sleep(5);\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/HtO6Y.jpg\r\n  [2]: https://i.stack.imgur.com/Myast.png","title":"Memory leak when cloning byte[] in a loop - Android","body":"<p>I am streaming RTSP from my Android device using <a href=\"https://github.com/fyhertz/libstreaming\" rel=\"nofollow noreferrer\">libstreaming</a>. I also want to record video when I press the button while streaming. I started a thread inside the net\\majorkernelpanic\\streaming\\video\\VideoStream.java class to record video. I am posting <strong>camera</strong> and <strong>data</strong> objects from <strong>onPreviewFrame(byte[] data, Camera camera)</strong> to this thread. When I send the <strong>data</strong> using Arrays.copyOf(), System.arrayCopy() or data.clone(), OutOfMemory is occurs. When I send <strong>data</strong> directly, there is no memory leak, but color shift occurs in the video. I would be happy if you can help.</p>\n<p><a href=\"https://i.stack.imgur.com/HtO6Y.jpg\" rel=\"nofollow noreferrer\">Capture frame from Video using data without clone() or etc.</a></p>\n<p><a href=\"https://i.stack.imgur.com/Myast.png\" rel=\"nofollow noreferrer\">Profiler - clicked record video button at second 00:20,769 </a></p>\n<p><strong>VideoStream.java</strong></p>\n<pre><code>   recordVideoThread.start();\n\n   Camera.PreviewCallback callback = new Camera.PreviewCallback() {\n        long now = System.nanoTime()/1000;\n        @Override\n        public void onPreviewFrame(byte[] data, Camera camera) {\n            now = System.nanoTime()/1000;\n\n            if (RtspServerActivity.getRecordVideoButtonActive()){\n                //Creating object to add bytelist\n                RecordParameters recordParameters = new RecordParameters(data, camera);\n                //Adding objects to list\n                recordVideo.addByteToList(recordParameters);\n            }\n</code></pre>\n<p><strong>RecordParameters</strong></p>\n<pre><code>public class RecordParameters {\n    private static final String TAG = &quot;RecordParameters&quot;;\n\n    private byte[] byteData;\n    private Camera camera_obj;\n\n    public RecordParameters(byte[] byteData, Camera camera_obj) {\n        this.byteData = byteData;\n        this.camera_obj = camera_obj;\n    }\n\n    public RecordParameters(){}\n\n    public byte[] getByteData() {\n        return byteData;\n    }\n\n    public Camera getCamera_obj() {\n        return camera_obj;\n    }\n\n    public void recordVideo(byte[] byteData, Camera camera_obj, VideoWriter videoWriter)  {\n        Camera.Parameters parameters = camera_obj.getParameters();\n        int width = parameters.getPreviewSize().width;\n        int height = parameters.getPreviewSize().height;\n        YuvImage yuv = new YuvImage(byteData, parameters.getPreviewFormat(), width, height, null);\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\n        yuv.compressToJpeg(new Rect(0, 0, width, height), 100, out);\n        Mat mat = yuvtoMat(out);\n        videoWriter.write(mat);\n        mat.release();\n    }\n\n    public Mat yuvtoMat(ByteArrayOutputStream baos){\n        return Imgcodecs.imdecode(new MatOfByte(baos.toByteArray()), Imgcodecs.IMREAD_COLOR);\n    }\n\n}\n</code></pre>\n<p><strong>RecordVideoThread</strong></p>\n<pre><code>public class RecordVideoThread extends Thread {\n    private final String TAG = &quot;RecordVideo&quot;;\n    boolean isVideoRecording = false;\n    List&lt;RecordParameters&gt; byteList = new ArrayList&lt;&gt;();\n    VideoWriter videoWriter = null;\n    RecordParameters recordParameters = new RecordParameters();\n\n    @Override\n    public void run() {\n        while(true){\n            if(byteList.size()!=0){\n                if(videoWriter == null){\n                    long now = System.nanoTime();\n                    Camera.Parameters parameters = byteList.get(0).getCamera_obj().getParameters();\n                    int width = parameters.getPreviewSize().width;\n                    int height = parameters.getPreviewSize().height;\n                    int frameRate = parameters.getPreviewFrameRate();\n                    Size frameSize = new Size(width, height);\n                    Log.i(TAG, &quot;VideoWriter is null&quot;);\n                    videoWriter= new VideoWriter(\n                            &quot;/data/data/com.example.RTSP/files/&quot; + now + &quot;.avi&quot;,\n                            VideoWriter.fourcc('M', 'J','P','G'),\n                            frameRate,\n                            frameSize,\n                            true);\n\n                    Log.i(TAG, &quot;videowriter &quot;+ width +&quot; &quot;+height+&quot; &quot;+frameRate);\n                }\n                //Log.i(TAG, &quot;byte list   &quot;+ byteList.size()+&quot;   &quot;+ Arrays.toString(byteList.get(0).getByteData()));\n                recordParameters.recordVideo(byteList.get(0).getByteData(),byteList.get(0).getCamera_obj(), videoWriter);\n                byteList.remove(byteList.get(0));\n                System.gc();\n                System.runFinalization();\n                isVideoRecording = true;\n            }\n            if(!RtspServerActivity.getRecordVideoButtonActive() &amp; isRunning()){\n                Log.i(TAG, &quot;Video Writer released&quot;);\n                videoWriter.release();\n                stopRecord();\n            }\n            try {\n                Thread.sleep(5);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","jackson-databind","localdate"],"comments":[{"owner":{"account_id":12626017,"reputation":5868,"user_id":10426557,"display_name":"Jonathan JOhx"},"score":1,"creation_date":1601696853,"post_id":64180429,"comment_id":113493027,"body_markdown":"Register this one more, `.registerModule(new JSR310Module());`","body":"Register this one more, <code>.registerModule(new JSR310Module());</code>"},{"owner":{"account_id":4255606,"reputation":145,"user_id":3481377,"display_name":"Artemoon"},"score":0,"creation_date":1611193600,"post_id":64180429,"comment_id":116375062,"body_markdown":"@JonathanJOhx, this is deprecated, it&#39;s better to use this -- `.registerModule(new JavaTimeModule());`","body":"@JonathanJOhx, this is deprecated, it&#39;s better to use this -- <code>.registerModule(new JavaTimeModule());</code>"}],"owner":{"account_id":10378051,"reputation":11,"user_id":7674598,"display_name":"Airton cruz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":659,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660137135,"creation_date":1601695829,"question_id":64180429,"body_markdown":"I tried several ways to change the default jackson configuration within the spring boot and it doesn&#39;t work.\r\nit simply ignores all configuration\r\n\r\n\r\n    @SpringBootApplication\r\n    public class AvaliacaoairtonApplication {\r\n\r\n\tpublic static final String URL = &quot;*&quot;;\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(AvaliacaoairtonApplication.class, args);\r\n\t}\r\n\r\n\t@Bean\r\n\t@Primary\r\n\tpublic ObjectMapper objectMapper(Jackson2ObjectMapperBuilder builder) {\r\n\r\n\t\tObjectMapper objectMapper = builder.build();\r\n\r\n\t\tobjectMapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);\r\n\r\n\t\tJavaTimeModule javaTimeModule = new JavaTimeModule();\r\n\t\tjavaTimeModule.addSerializer(LocalDate.class, new StdScalarSerializer&lt;LocalDate&gt;(LocalDate.class) {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void serialize(LocalDate localDate, JsonGenerator jsonGenerator,\r\n\t\t\t\t\t\t\t\t  SerializerProvider serializerProvider) throws IOException {\r\n\r\n\t\t\t\tjsonGenerator.writeString(localDate.format(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;)));\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tobjectMapper.registerModule(javaTimeModule);\r\n\r\n\t\treturn objectMapper;\r\n\t}\r\n\r\n}\r\n\r\napplication.properties\r\nspring.jackson.serialization.write-dates-as-timestamps=false\r\n\r\nPOM\r\n\r\n    &lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.3.4.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;br.com.softplan&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;avaliacaoairton&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;packaging&gt;war&lt;/packaging&gt;\r\n\t&lt;name&gt;avaliacaoairton&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;6.0.2.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-validator-annotation-processor&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;6.0.2.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\nresult\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yQpC4.png","title":"Serialize LocalDate as TimeStamp using Spring Boot 2.3.4.RELEASE Jackson2ObjectMapper","body":"<p>I tried several ways to change the default jackson configuration within the spring boot and it doesn't work.\nit simply ignores all configuration</p>\n<pre><code>@SpringBootApplication\npublic class AvaliacaoairtonApplication {\n\npublic static final String URL = &quot;*&quot;;\n\npublic static void main(String[] args) {\n    SpringApplication.run(AvaliacaoairtonApplication.class, args);\n}\n\n@Bean\n@Primary\npublic ObjectMapper objectMapper(Jackson2ObjectMapperBuilder builder) {\n\n    ObjectMapper objectMapper = builder.build();\n\n    objectMapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);\n\n    JavaTimeModule javaTimeModule = new JavaTimeModule();\n    javaTimeModule.addSerializer(LocalDate.class, new StdScalarSerializer&lt;LocalDate&gt;(LocalDate.class) {\n\n        @Override\n        public void serialize(LocalDate localDate, JsonGenerator jsonGenerator,\n                              SerializerProvider serializerProvider) throws IOException {\n\n            jsonGenerator.writeString(localDate.format(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;)));\n        }\n    });\n\n    objectMapper.registerModule(javaTimeModule);\n\n    return objectMapper;\n}\n</code></pre>\n<p>}</p>\n<p>application.properties\nspring.jackson.serialization.write-dates-as-timestamps=false</p>\n<p>POM</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.3.4.RELEASE&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n&lt;groupId&gt;br.com.softplan&lt;/groupId&gt;\n&lt;artifactId&gt;avaliacaoairton&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;packaging&gt;war&lt;/packaging&gt;\n&lt;name&gt;avaliacaoairton&lt;/name&gt;\n&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n&lt;properties&gt;\n    &lt;java.version&gt;11&lt;/java.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n        &lt;version&gt;6.0.2.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-validator-annotation-processor&lt;/artifactId&gt;\n        &lt;version&gt;6.0.2.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n                &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p>result\n<a href=\"https://i.stack.imgur.com/yQpC4.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","file","pdf","itext"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1660127800,"post_id":73304632,"comment_id":129457869,"body_markdown":"*&quot;this line will save the modified file to the given location but how to convert it to File object.&quot;* - What do you mean by that question? If *the modified file is saved to the given location*, there is a file object at the given location, isn&#39;t there?","body":"<i>&quot;this line will save the modified file to the given location but how to convert it to File object.&quot;</i> - What do you mean by that question? If <i>the modified file is saved to the given location</i>, there is a file object at the given location, isn&#39;t there?"},{"owner":{"account_id":22415459,"reputation":66,"user_id":16623601,"display_name":"Lucifer"},"score":0,"creation_date":1660130324,"post_id":73304632,"comment_id":129458773,"body_markdown":"@mkl \n\nPdfStamper pdfStamper = new PdfStamper(pdfReader, new FileOutputStream(&quot;C:\\\\Users\\\\user1\\\\iTextPDFSamples\\\\user1\\\\ModifiedTestFile.pdf&quot;));\n\nthis line creates the modified file and when we close it that will write the content, there is no file object but FileOutstream instance is there","body":"@mkl   PdfStamper pdfStamper = new PdfStamper(pdfReader, new FileOutputStream(&quot;C:\\\\Users\\\\user1\\\\iTextPDFSamples\\\\user1\\\\&zwnj;&#8203;ModifiedTestFile.pdf&zwnj;&#8203;&quot;));  this line creates the modified file and when we close it that will write the content, there is no file object but FileOutstream instance is there"}],"answers":[{"tags":[],"owner":{"account_id":22415459,"reputation":66,"user_id":16623601,"display_name":"Lucifer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660136942,"creation_date":1660136942,"answer_id":73306913,"question_id":73304632,"body_markdown":"Solved the issue :\r\n\r\n*File **tempFile** = File.createTempFile(&quot;Tempfile&quot;,&quot;.pdf&quot;);*\r\n\r\ncreated one tempfile and used this tempfile for pdfstamper&#39;s \r\n\r\n```\r\nPdfStamper pdfStamper = new PdfStamper(pdfReader, new FileOutputStream(tempFile));\r\n```\r\n\r\nThis solved the issue.","title":"save Pdfstamper output to file object","body":"<p>Solved the issue :</p>\n<p><em>File <strong>tempFile</strong> = File.createTempFile(&quot;Tempfile&quot;,&quot;.pdf&quot;);</em></p>\n<p>created one tempfile and used this tempfile for pdfstamper's</p>\n<pre><code>PdfStamper pdfStamper = new PdfStamper(pdfReader, new FileOutputStream(tempFile));\n</code></pre>\n<p>This solved the issue.</p>\n"}],"owner":{"account_id":22415459,"reputation":66,"user_id":16623601,"display_name":"Lucifer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":493,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660136942,"creation_date":1660127200,"question_id":73304632,"body_markdown":"I am using iTextPdf for appending data to pdf but I want to save the modified file to a File object so that I can send that file to client server.\r\n\r\nCode :\r\n\r\n```\r\npackage doc;\r\n\r\nimport java.io.FileOutputStream;\r\n\r\nimport com.itextpdf.text.pdf.BaseFont;\r\nimport com.itextpdf.text.pdf.PdfContentByte;\r\nimport com.itextpdf.text.pdf.PdfReader;\r\nimport com.itextpdf.text.pdf.PdfStamper;\r\n\r\npublic class Doc_demo {\r\n\tpublic static void main(String args[]){\r\n\t\ttry {\r\n\t\t\t\t\t\t\r\n\t\t    //Create PdfReader instance.\r\n\t\t    PdfReader pdfReader = \r\n\t\t\t\tnew PdfReader(&quot;C:\\\\Users\\\\user1\\\\iTextPDFSamples\\\\user1\\\\SAMPLE_A071W471.pdf&quot;);\t\r\n \r\n\t\t    //Create PdfStamper instance.\r\n\t\t    PdfStamper pdfStamper = new PdfStamper(pdfReader,\r\n\t\t\tnew FileOutputStream(&quot;C:\\\\Users\\\\user1\\\\iTextPDFSamples\\\\user1\\\\ModifiedTestFile.pdf&quot;));\r\n \r\n\t\t    //Create BaseFont instance.\r\n\t\t    BaseFont baseFont = BaseFont.createFont(\r\n\t                BaseFont.TIMES_ROMAN, \r\n\t                BaseFont.CP1252, BaseFont.NOT_EMBEDDED);\r\n \r\n\t\t    //Get the number of pages in pdf.\r\n\t\t    int pages = pdfReader.getNumberOfPages(); \r\n \r\n\t\t    //Iterate the pdf through pages.\r\n\t\t    for(int i=1; i&lt;=1; i++) { //i&lt;=pages\r\n\t\t\t//Contain the pdf data.\r\n\t\t\tPdfContentByte pageContentByte = \r\n\t\t\t\t\tpdfStamper.getOverContent(i);\r\n\t\t\t//Set text font and size.\r\n\t\t\tpageContentByte.setFontAndSize(baseFont, 8);\r\n \r\n\t\t\tpageContentByte.beginText();\r\n\t\t\tpageContentByte.setTextMatrix(379, 615);\r\n\t\t\tpageContentByte.showText(&quot;SN01234567890&quot;);\r\n\t\t\tpageContentByte.endText();\r\n\t\t\t\r\n\t\t\tpageContentByte.beginText();\r\n\t\t\tpageContentByte.setTextMatrix(450, 615);\r\n\t\t\tpageContentByte.showText(&quot;European Union&quot;);\r\n\t\t\tpageContentByte.endText();\r\n\t\t    }\r\n \r\n\t\t    //Close the pdfStamper.\r\n\t\t    pdfStamper.close();\t\r\n \r\n\t\t    System.out.println(&quot;PDF modified successfully.&quot;);\r\n\t\t} catch (Exception e) {\r\n\t\t    e.printStackTrace();\r\n\t\t}\r\n\t}\r\n}\r\n\r\n```\r\nCode works fine.\r\n\r\n```pdfStamper.close();``` this line will save the modified file to the given location but how to convert it to File object.\r\n\r\n","title":"save Pdfstamper output to file object","body":"<p>I am using iTextPdf for appending data to pdf but I want to save the modified file to a File object so that I can send that file to client server.</p>\n<p>Code :</p>\n<pre><code>package doc;\n\nimport java.io.FileOutputStream;\n\nimport com.itextpdf.text.pdf.BaseFont;\nimport com.itextpdf.text.pdf.PdfContentByte;\nimport com.itextpdf.text.pdf.PdfReader;\nimport com.itextpdf.text.pdf.PdfStamper;\n\npublic class Doc_demo {\n    public static void main(String args[]){\n        try {\n                        \n            //Create PdfReader instance.\n            PdfReader pdfReader = \n                new PdfReader(&quot;C:\\\\Users\\\\user1\\\\iTextPDFSamples\\\\user1\\\\SAMPLE_A071W471.pdf&quot;); \n \n            //Create PdfStamper instance.\n            PdfStamper pdfStamper = new PdfStamper(pdfReader,\n            new FileOutputStream(&quot;C:\\\\Users\\\\user1\\\\iTextPDFSamples\\\\user1\\\\ModifiedTestFile.pdf&quot;));\n \n            //Create BaseFont instance.\n            BaseFont baseFont = BaseFont.createFont(\n                    BaseFont.TIMES_ROMAN, \n                    BaseFont.CP1252, BaseFont.NOT_EMBEDDED);\n \n            //Get the number of pages in pdf.\n            int pages = pdfReader.getNumberOfPages(); \n \n            //Iterate the pdf through pages.\n            for(int i=1; i&lt;=1; i++) { //i&lt;=pages\n            //Contain the pdf data.\n            PdfContentByte pageContentByte = \n                    pdfStamper.getOverContent(i);\n            //Set text font and size.\n            pageContentByte.setFontAndSize(baseFont, 8);\n \n            pageContentByte.beginText();\n            pageContentByte.setTextMatrix(379, 615);\n            pageContentByte.showText(&quot;SN01234567890&quot;);\n            pageContentByte.endText();\n            \n            pageContentByte.beginText();\n            pageContentByte.setTextMatrix(450, 615);\n            pageContentByte.showText(&quot;European Union&quot;);\n            pageContentByte.endText();\n            }\n \n            //Close the pdfStamper.\n            pdfStamper.close(); \n \n            System.out.println(&quot;PDF modified successfully.&quot;);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n\n</code></pre>\n<p>Code works fine.</p>\n<p><code>pdfStamper.close();</code> this line will save the modified file to the given location but how to convert it to File object.</p>\n"},{"tags":["java","maven","pdf-generation","markdown","maven-plugin"],"comments":[{"owner":{"account_id":1240435,"reputation":3209,"user_id":1203182,"display_name":"spy"},"score":0,"creation_date":1699117747,"post_id":60729468,"comment_id":136492221,"body_markdown":"maven pdf plugin has a descriptor xml file, it will only include that with the pdf","body":"maven pdf plugin has a descriptor xml file, it will only include that with the pdf"}],"answers":[{"tags":[],"owner":{"account_id":1929456,"reputation":601,"user_id":1739193,"display_name":"btafarelo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660136890,"creation_date":1660136890,"answer_id":73306899,"question_id":60729468,"body_markdown":"This way you are able to generate the pdf on linux, if you want to run it on Windows as well, add a profile and pass the profile on build time.\r\n\r\n      &lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;1.2.1&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;pandoc&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;exec&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;                            \r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;executable&gt;pandoc&lt;/executable&gt;\r\n\t\t\t\t\t&lt;workingDirectory&gt;&lt;/workingDirectory&gt;\r\n\t\t\t\t\t&lt;arguments&gt;\r\n\t\t\t\t\t\t&lt;argument&gt;-o&lt;/argument&gt;\r\n\t\t\t\t\t\t&lt;argument&gt;README.pdf&lt;/argument&gt;\r\n\t\t\t\t\t\t&lt;argument&gt;README.md&lt;/argument&gt;\r\n\t\t\t\t\t&lt;/arguments&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;   \r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\nRunning:\r\n\r\n&gt; mvn exec:exec\r\n\r\nDependencies:\r\n\r\n    apt install -y pandoc texmaker","title":"Generate PDF docs from Markdown files during the Maven build","body":"<p>This way you are able to generate the pdf on linux, if you want to run it on Windows as well, add a profile and pass the profile on build time.</p>\n<pre><code>  &lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.2.1&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;pandoc&lt;/id&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;exec&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;                            \n            &lt;/executions&gt;\n            &lt;configuration&gt;\n                &lt;executable&gt;pandoc&lt;/executable&gt;\n                &lt;workingDirectory&gt;&lt;/workingDirectory&gt;\n                &lt;arguments&gt;\n                    &lt;argument&gt;-o&lt;/argument&gt;\n                    &lt;argument&gt;README.pdf&lt;/argument&gt;\n                    &lt;argument&gt;README.md&lt;/argument&gt;\n                &lt;/arguments&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;   \n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p>Running:</p>\n<blockquote>\n<p>mvn exec:exec</p>\n</blockquote>\n<p>Dependencies:</p>\n<pre><code>apt install -y pandoc texmaker\n</code></pre>\n"}],"owner":{"account_id":2492679,"reputation":20748,"user_id":2169845,"accept_rate":91,"display_name":"zappee"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2459,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":1,"score":12,"last_activity_date":1660136890,"creation_date":1584475470,"question_id":60729468,"body_markdown":"I have a Java project with the Maven Assembly plugin. The Assembly Plugin builds a final ZIP release file that contains binary (*.war), config files and some PDF documentation.\r\n\r\nThe documents are written in Markdown and the PDF docs for the release need to be generated manually (ex. with [Markdown to PDF online tool][1]) before I execute the build with Maven. Then the Assembly plugin takes the PDFs and put them to the final ZIP.\r\n\r\nAlmost every time when I create a release ZIP file, I forgot to generate PDFs manually so usually the final ZIP contains old documentation. This is so bad.\r\n\r\nI would like to automate PDF generation. I have checked four MD to PDF maven plugins, but none of them works fine. I have found a plugin to generates MD to HTML (without any default stylesheet) and maybe I can use another plugin to convert HTML to PDF, but it is so painful.\r\n\r\n**What I tried:**\r\n\r\n - [maven-site-plugin + doxia][2]: only generates HTML, not PDF\r\n - [markdown-page-generator-plugin][3]: only generates HTML without default stylesheet, and needs to have external header, footer template HTMLs\r\n - [maven-pdf-plugin][4]: makes a big report contains almost the &quot;whole world&quot;, not only *.md files\r\n - [markdowndoc-maven-plugin][5]: it comes from a different repo and plugin repo, which I am not able to add to the pom.xml, and complicated to use.\r\n\r\nIs there any easy way to generate PDF files with Maven, based on the Markdown files during the build process?\r\n\r\n\r\n  [1]: https://www.markdowntopdf.com/\r\n  [2]: https://maven.apache.org/plugins/maven-site-plugin/faq.html\r\n  [3]: https://github.com/walokra/markdown-page-generator-plugin\r\n  [4]: https://maven.apache.org/plugins/maven-pdf-plugin/\r\n  [5]: https://github.com/tombensve/MarkdownDoc/blob/master/Docs/MarkdownDoc-User-Guide.md","title":"Generate PDF docs from Markdown files during the Maven build","body":"<p>I have a Java project with the Maven Assembly plugin. The Assembly Plugin builds a final ZIP release file that contains binary (*.war), config files and some PDF documentation.</p>\n\n<p>The documents are written in Markdown and the PDF docs for the release need to be generated manually (ex. with <a href=\"https://www.markdowntopdf.com/\" rel=\"noreferrer\">Markdown to PDF online tool</a>) before I execute the build with Maven. Then the Assembly plugin takes the PDFs and put them to the final ZIP.</p>\n\n<p>Almost every time when I create a release ZIP file, I forgot to generate PDFs manually so usually the final ZIP contains old documentation. This is so bad.</p>\n\n<p>I would like to automate PDF generation. I have checked four MD to PDF maven plugins, but none of them works fine. I have found a plugin to generates MD to HTML (without any default stylesheet) and maybe I can use another plugin to convert HTML to PDF, but it is so painful.</p>\n\n<p><strong>What I tried:</strong></p>\n\n<ul>\n<li><a href=\"https://maven.apache.org/plugins/maven-site-plugin/faq.html\" rel=\"noreferrer\">maven-site-plugin + doxia</a>: only generates HTML, not PDF</li>\n<li><a href=\"https://github.com/walokra/markdown-page-generator-plugin\" rel=\"noreferrer\">markdown-page-generator-plugin</a>: only generates HTML without default stylesheet, and needs to have external header, footer template HTMLs</li>\n<li><a href=\"https://maven.apache.org/plugins/maven-pdf-plugin/\" rel=\"noreferrer\">maven-pdf-plugin</a>: makes a big report contains almost the \"whole world\", not only *.md files</li>\n<li><a href=\"https://github.com/tombensve/MarkdownDoc/blob/master/Docs/MarkdownDoc-User-Guide.md\" rel=\"noreferrer\">markdowndoc-maven-plugin</a>: it comes from a different repo and plugin repo, which I am not able to add to the pom.xml, and complicated to use.</li>\n</ul>\n\n<p>Is there any easy way to generate PDF files with Maven, based on the Markdown files during the build process?</p>\n"},{"tags":["java","json","jackson","websphere","ejb-3.0"],"comments":[{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":1,"creation_date":1659996395,"post_id":73283874,"comment_id":129424186,"body_markdown":"When you call *what* method? With what data?","body":"When you call <i>what</i> method? With what data?"},{"owner":{"account_id":20701840,"reputation":871,"user_id":15200705,"display_name":"Luciana Oliveira"},"score":0,"creation_date":1660006369,"post_id":73283874,"comment_id":129425691,"body_markdown":"I call in a resource class. It&#39;s a PUT. The data come the front end angular.","body":"I call in a resource class. It&#39;s a PUT. The data come the front end angular."}],"answers":[{"tags":[],"owner":{"account_id":24018229,"reputation":313,"user_id":18000902,"display_name":"Omar Hussien"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660030607,"creation_date":1660030607,"answer_id":73288086,"question_id":73283874,"body_markdown":"&gt; The start of the object should be like this   **{**   ,Make sure the json from the Front doesn&#39;t start with   **[**\r\n\r\n    {\r\n      &quot;data&quot;: &quot;any value&quot;\r\n    }","title":"ERROR: Can not deserialize instance of java.lang.String out of START_OBJECT token","body":"<blockquote>\n<p>The start of the object should be like this   <strong>{</strong>   ,Make sure the json from the Front doesn't start with   <strong>[</strong></p>\n</blockquote>\n<pre><code>{\n  &quot;data&quot;: &quot;any value&quot;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20701840,"reputation":871,"user_id":15200705,"display_name":"Luciana Oliveira"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660136501,"creation_date":1660136501,"answer_id":73306825,"question_id":73283874,"body_markdown":"It&#39;s a beginner question, so if you have the same error with different types the solution is the same. \r\n\r\n**JsonMappingException: Can Not Deserialize Instance Of**\r\n\r\n***The Problem :*** This exception is thrown if the wrong type is used while deserializing.\r\n\r\n***The Solution:*** Checking the attribute has the different types.\r\n\r\nIn my problem, the solution was to change the type of angular date to a  angular&#39;s native date to match to backend java type. You can create a `main` class to test your backend code like below.\r\n\r\nThanks the developers that comment this post. I could see the rubber duck  technique applyed here. Thanks a lot.\r\n\r\n    public static void main(String[] args) {\r\n        \r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n        String json = &quot;&quot;; //Use your string json\r\n    \t\r\n        try {\r\n        \tPerson personDeserialized = objectMapper.readValue(json, Person.class);\r\n        \r\n        } catch (JsonParseException e) {\r\n        \t// TODO Auto-generated catch block\r\n        \te.printStackTrace();\r\n        } catch (JsonMappingException e) {\r\n        \t// TODO Auto-generated catch block\r\n        \te.printStackTrace();\r\n        } catch (IOException e) {\r\n        \t// TODO Auto-generated catch block\r\n        \te.printStackTrace();\r\n        }\r\n    }\r\n\r\n","title":"ERROR: Can not deserialize instance of java.lang.String out of START_OBJECT token","body":"<p>It's a beginner question, so if you have the same error with different types the solution is the same.</p>\n<p><strong>JsonMappingException: Can Not Deserialize Instance Of</strong></p>\n<p><em><strong>The Problem :</strong></em> This exception is thrown if the wrong type is used while deserializing.</p>\n<p><em><strong>The Solution:</strong></em> Checking the attribute has the different types.</p>\n<p>In my problem, the solution was to change the type of angular date to a  angular's native date to match to backend java type. You can create a <code>main</code> class to test your backend code like below.</p>\n<p>Thanks the developers that comment this post. I could see the rubber duck  technique applyed here. Thanks a lot.</p>\n<pre><code>public static void main(String[] args) {\n    \n    ObjectMapper objectMapper = new ObjectMapper();\n    String json = &quot;&quot;; //Use your string json\n    \n    try {\n        Person personDeserialized = objectMapper.readValue(json, Person.class);\n    \n    } catch (JsonParseException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } catch (JsonMappingException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } catch (IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":20701840,"reputation":871,"user_id":15200705,"display_name":"Luciana Oliveira"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4837,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73306825,"answer_count":2,"score":0,"last_activity_date":1660136501,"creation_date":1659991900,"question_id":73283874,"body_markdown":"I&#39;m using Jackson version 2.7.4 + EJB 3.0 with WebSphere 9.0. The classe has an attribute `String date` as below:\r\n\r\n **Class:**\r\n\r\n    @Data\r\n    @EqualsAndHashCode(callSuper = false)\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class filter {\r\n    \r\n    \tprivate String date;\r\n        ...\r\n    }\r\n\r\nWhen I call the method shows the error below.\r\n\r\n**Error**:\r\n\r\n&gt; Caused by: org.codehaus.jackson.map.JsonMappingException: Can not\r\n&gt; deserialize instance of java.lang.String out of START_OBJECT token  at\r\n&gt; [Source:\r\n&gt; org.apache.cxf.transport.http.AbstractHTTPDestination$1@b3f4efe6;\r\n&gt; line: 1, column: 163] \tat\r\n&gt; org.codehaus.jackson.map.JsonMappingException.from(JsonMappingException.java:160)\r\n&gt; \tat\r\n&gt; org.codehaus.jackson.map.deser.StdDeserializationContext.mappingException(StdDeserializationContext.java:194)\r\n&gt; \tat\r\n&gt; org.codehaus.jackson.map.deser.StdDeserializer$StringDeserializer.deserialize(StdDeserializer.java:607)\r\n&gt; \tat\r\n&gt; org.codehaus.jackson.map.deser.StdDeserializer$StringDeserializer.deserialize(StdDeserializer.java:576)\r\n&gt; \tat\r\n&gt; org.codehaus.jackson.map.deser.SettableBeanProperty.deserialize(SettableBeanProperty.java:149)\r\n&gt; \tat\r\n&gt; org.codehaus.jackson.map.deser.SettableBeanProperty$MethodProperty.deserializeAndSet(SettableBeanProperty.java:237)\r\n&gt; \tat\r\n&gt; org.codehaus.jackson.map.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:496)\r\n&gt; \tat\r\n&gt; org.codehaus.jackson.map.deser.BeanDeserializer.deserialize(BeanDeserializer.java:350)\r\n&gt; \tat\r\n&gt; org.codehaus.jackson.map.ObjectMapper._readValue(ObjectMapper.java:1961)\r\n&gt; \tat\r\n&gt; org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:889)\r\n&gt; \tat\r\n&gt; org.codehaus.jackson.jaxrs.JacksonJsonProvider.readFrom(JacksonJsonProvider.java:410)\r\n&gt; \tat org.apache.cxf.jaxrs.utils.JAXRSUtils$2.run(JAXRSUtils.java:1408)\r\n&gt; \tat\r\n&gt; java.security.AccessController.doPrivileged(AccessController.java:738)\r\n&gt; \tat\r\n&gt; org.apache.cxf.jaxrs.utils.JAXRSUtils.readFromMessageBodyReader(JAXRSUtils.java:1404)\r\n&gt; \tat\r\n&gt; org.apache.cxf.jaxrs.utils.JAXRSUtils.readFromMessageBody(JAXRSUtils.java:1354)\r\n&gt; \tat\r\n&gt; org.apache.cxf.jaxrs.utils.JAXRSUtils.processParameter(JAXRSUtils.java:878)\r\n&gt; \tat\r\n&gt; org.apache.cxf.jaxrs.utils.JAXRSUtils.processParameters(JAXRSUtils.java:837)\r\n&gt; \tat\r\n&gt; org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.processRequest(JAXRSInInterceptor.java:265)\r\n&gt; \tat\r\n&gt; org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.handleMessage(JAXRSInInterceptor.java:95)\r\n&gt; \t... 29 more\r\n\r\n**Maven dependencies:**\r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.4&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.4&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\nDoes anyone have any idea?","title":"ERROR: Can not deserialize instance of java.lang.String out of START_OBJECT token","body":"<p>I'm using Jackson version 2.7.4 + EJB 3.0 with WebSphere 9.0. The classe has an attribute <code>String date</code> as below:</p>\n<p><strong>Class:</strong></p>\n<pre><code>@Data\n@EqualsAndHashCode(callSuper = false)\n@NoArgsConstructor\n@AllArgsConstructor\npublic class filter {\n\n    private String date;\n    ...\n}\n</code></pre>\n<p>When I call the method shows the error below.</p>\n<p><strong>Error</strong>:</p>\n<blockquote>\n<p>Caused by: org.codehaus.jackson.map.JsonMappingException: Can not\ndeserialize instance of java.lang.String out of START_OBJECT token  at\n[Source:\norg.apache.cxf.transport.http.AbstractHTTPDestination$1@b3f4efe6;\nline: 1, column: 163]     at\norg.codehaus.jackson.map.JsonMappingException.from(JsonMappingException.java:160)\nat\norg.codehaus.jackson.map.deser.StdDeserializationContext.mappingException(StdDeserializationContext.java:194)\nat\norg.codehaus.jackson.map.deser.StdDeserializer$StringDeserializer.deserialize(StdDeserializer.java:607)\nat\norg.codehaus.jackson.map.deser.StdDeserializer$StringDeserializer.deserialize(StdDeserializer.java:576)\nat\norg.codehaus.jackson.map.deser.SettableBeanProperty.deserialize(SettableBeanProperty.java:149)\nat\norg.codehaus.jackson.map.deser.SettableBeanProperty$MethodProperty.deserializeAndSet(SettableBeanProperty.java:237)\nat\norg.codehaus.jackson.map.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:496)\nat\norg.codehaus.jackson.map.deser.BeanDeserializer.deserialize(BeanDeserializer.java:350)\nat\norg.codehaus.jackson.map.ObjectMapper._readValue(ObjectMapper.java:1961)\nat\norg.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:889)\nat\norg.codehaus.jackson.jaxrs.JacksonJsonProvider.readFrom(JacksonJsonProvider.java:410)\nat org.apache.cxf.jaxrs.utils.JAXRSUtils$2.run(JAXRSUtils.java:1408)\nat\njava.security.AccessController.doPrivileged(AccessController.java:738)\nat\norg.apache.cxf.jaxrs.utils.JAXRSUtils.readFromMessageBodyReader(JAXRSUtils.java:1404)\nat\norg.apache.cxf.jaxrs.utils.JAXRSUtils.readFromMessageBody(JAXRSUtils.java:1354)\nat\norg.apache.cxf.jaxrs.utils.JAXRSUtils.processParameter(JAXRSUtils.java:878)\nat\norg.apache.cxf.jaxrs.utils.JAXRSUtils.processParameters(JAXRSUtils.java:837)\nat\norg.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.processRequest(JAXRSInInterceptor.java:265)\nat\norg.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.handleMessage(JAXRSInInterceptor.java:95)\n... 29 more</p>\n</blockquote>\n<p><strong>Maven dependencies:</strong></p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n    &lt;version&gt;2.7.4&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n    &lt;version&gt;2.7.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Does anyone have any idea?</p>\n"},{"tags":["java","spring-boot","jackson","json-deserialization"],"comments":[{"owner":{"account_id":1471892,"reputation":9718,"user_id":1383240,"accept_rate":38,"display_name":"NiVeR"},"score":0,"creation_date":1544177243,"post_id":53667217,"comment_id":94192121,"body_markdown":"Breakpoint in the deserializer and find what is `null`. I suspect `appUserService` is not injected and you get NPE there","body":"Breakpoint in the deserializer and find what is <code>null</code>. I suspect <code>appUserService</code> is not injected and you get NPE there"},{"owner":{"account_id":8354266,"reputation":355,"user_id":6275189,"display_name":"nkengbeza"},"score":0,"creation_date":1544177830,"post_id":53667217,"comment_id":94192411,"body_markdown":"@NiVeR Here is the observation: `node: &quot;1&quot;` and `appUserService = null`. I don&#39;t know why it&#39;s null. I annotated the service with `@Service` and I guess I have properly injected it.","body":"@NiVeR Here is the observation: <code>node: &quot;1&quot;</code> and <code>appUserService = null</code>. I don&#39;t know why it&#39;s null. I annotated the service with <code>@Service</code> and I guess I have properly injected it."}],"answers":[{"tags":[],"owner":{"account_id":2016713,"reputation":26480,"user_id":1803853,"accept_rate":71,"display_name":"Davide Lorenzo MARINO"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1544184199,"creation_date":1544177852,"answer_id":53667475,"question_id":53667217,"body_markdown":"**Updated answer:**\r\nYou can&#39;t use autowired properties because you are not in the Spring context. You are passing the class `AppUserDeserializer` as a reference in the annotation  \r\n\r\n    @JsonDeserialize(using = AppUserDeserializer.class)\r\n\r\nIn this situation is the *FasterJackson* library that creates the instance of `AppUserDeserializer`, so the `Autowired` annotation is not taken in consideration.\r\n\r\nYou can solve your problem with a little trick. Add a static reference to the instance created by spring in the `AppUserService`:\r\n\r\n     @Service\r\n     public AppUserService {\r\n\r\n       public static AppUserService instance;\r\n\r\n       public AppUserService() {\r\n         // Modify the constructor setting a static variable holding a\r\n         // reference to the instance created by spring\r\n         AppUserService.instance = this;\r\n       }\r\n\r\n       ...\r\n     }\r\n\r\nUse that reference in the `AppUserDeserializer`:\r\n\r\n    public class AppUserDeserializer extends JsonDeserializer implements Serializable {\r\n\r\n        private AppUserService appUserService;\r\n\r\n        public AppUserDeserializer() {\r\n          // Set appUserService to the instance created by spring\r\n          this.appUserService = AppUserService.instance;\r\n        }\r\n\r\n        ...\r\n\r\n    }\r\n\r\n-----\r\n\r\n\r\nOriginal answer: To have a correct initialization of an `Autowired` property you have to annotate your class `AppUserDeserializer`, otherwise `appUserService` is null if you don&#39;t explicitly init it using the set method. \r\n\r\nTry to annotate `AppUserDeserializer` with `@Component`:\r\n\r\n    @Component   // Add this annotation\r\n    public class AppUserDeserializer extends JsonDeserializer implements Serializable {\r\n       ...\r\n    }\r\n","title":"Jackson Custom Deserializer Not Working In Spring Boot","body":"<p><strong>Updated answer:</strong>\nYou can't use autowired properties because you are not in the Spring context. You are passing the class <code>AppUserDeserializer</code> as a reference in the annotation  </p>\n\n<pre><code>@JsonDeserialize(using = AppUserDeserializer.class)\n</code></pre>\n\n<p>In this situation is the <em>FasterJackson</em> library that creates the instance of <code>AppUserDeserializer</code>, so the <code>Autowired</code> annotation is not taken in consideration.</p>\n\n<p>You can solve your problem with a little trick. Add a static reference to the instance created by spring in the <code>AppUserService</code>:</p>\n\n<pre><code> @Service\n public AppUserService {\n\n   public static AppUserService instance;\n\n   public AppUserService() {\n     // Modify the constructor setting a static variable holding a\n     // reference to the instance created by spring\n     AppUserService.instance = this;\n   }\n\n   ...\n }\n</code></pre>\n\n<p>Use that reference in the <code>AppUserDeserializer</code>:</p>\n\n<pre><code>public class AppUserDeserializer extends JsonDeserializer implements Serializable {\n\n    private AppUserService appUserService;\n\n    public AppUserDeserializer() {\n      // Set appUserService to the instance created by spring\n      this.appUserService = AppUserService.instance;\n    }\n\n    ...\n\n}\n</code></pre>\n\n<hr>\n\n<p>Original answer: To have a correct initialization of an <code>Autowired</code> property you have to annotate your class <code>AppUserDeserializer</code>, otherwise <code>appUserService</code> is null if you don't explicitly init it using the set method. </p>\n\n<p>Try to annotate <code>AppUserDeserializer</code> with <code>@Component</code>:</p>\n\n<pre><code>@Component   // Add this annotation\npublic class AppUserDeserializer extends JsonDeserializer implements Serializable {\n   ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5599633,"reputation":2115,"user_id":4436257,"display_name":"Aditya Narayan Dixit"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1544177884,"creation_date":1544177884,"answer_id":53667491,"question_id":53667217,"body_markdown":"Try changing this line of code:\r\n\r\n    private boolean active;\r\n\r\nto \r\n\r\n    private Boolean active;\r\n\r\nboolean primitive can&#39;t handle nulls and may result in NPE.","title":"Jackson Custom Deserializer Not Working In Spring Boot","body":"<p>Try changing this line of code:</p>\n\n<pre><code>private boolean active;\n</code></pre>\n\n<p>to </p>\n\n<pre><code>private Boolean active;\n</code></pre>\n\n<p>boolean primitive can't handle nulls and may result in NPE.</p>\n"},{"tags":[],"owner":{"account_id":1471892,"reputation":9718,"user_id":1383240,"accept_rate":38,"display_name":"NiVeR"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1544180721,"creation_date":1544180721,"answer_id":53668253,"question_id":53667217,"body_markdown":"You could go on and try to inject correctly the `AppUserService` but according to me this is not the cleanest solution. Generally I dislike the idea to use `@Entity` as communication models or view models. In this way you are coupling the entity to the producer/consumer of the view model. You are basically short-circuiting the model part. \r\n\r\nWhat I would do is to map the contents of the json to a different class in deserialization phase, and use this one later on to construct the corresponding entity. ","title":"Jackson Custom Deserializer Not Working In Spring Boot","body":"<p>You could go on and try to inject correctly the <code>AppUserService</code> but according to me this is not the cleanest solution. Generally I dislike the idea to use <code>@Entity</code> as communication models or view models. In this way you are coupling the entity to the producer/consumer of the view model. You are basically short-circuiting the model part. </p>\n\n<p>What I would do is to map the contents of the json to a different class in deserialization phase, and use this one later on to construct the corresponding entity. </p>\n"}],"owner":{"account_id":8354266,"reputation":355,"user_id":6275189,"display_name":"nkengbeza"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7843,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":53667475,"answer_count":3,"score":2,"last_activity_date":1660135937,"creation_date":1544176870,"question_id":53667217,"body_markdown":"I created a custom deserializer for my entities but it keeps on throwing exception:\r\n\r\nI have two classes: AppUser and AppUserAvatar\r\n\r\n**AppUser.java**\r\n\r\n    @Entity\r\n    @Table(name = &quot;user&quot;)\r\n    public class AppUser implements Serializable {\r\n\r\n        @Transient\r\n        private static final long serialVersionUID = -3536455219051825651L;\r\n\r\n        @JsonProperty(access = JsonProperty.Access.WRITE_ONLY)\r\n        @Column(name = &quot;password&quot;, nullable = false, length = 256)\r\n        private String password;\r\n\r\n        @JsonIgnore\r\n        @Column(name = &quot;is_active&quot;, nullable = false)\r\n        private boolean active;\r\n\r\n        @JsonIgnore\r\n        @OneToMany(mappedBy = &quot;appUser&quot;, targetEntity = AppUserAvatar.class, fetch = FetchType.LAZY)\r\n        private List&lt;AppUserAvatar&gt; appUserAvatars;\r\n\r\n        //// Getters and Setters and toString() ////\r\n    }\r\n\r\n**AppUserAvatar.java**\r\n\r\n    @Entity\r\n    @Table(name = &quot;user_avatar&quot;)\r\n    public class AppUserAvatar extends BaseEntityD implements Serializable {\r\n    \r\n        @Transient\r\n        private static final long serialVersionUID = 8992425872747011681L;\r\n    \r\n        @Column(name = &quot;avatar&quot;, nullable = false)\r\n        @Digits(integer = 20, fraction = 0)\r\n        @NotEmpty\r\n        private Long avatar;\r\n    \r\n        @JsonDeserialize(using = AppUserDeserializer.class)\r\n        @JsonProperty(access = JsonProperty.Access.WRITE_ONLY)\r\n        @ManyToOne(fetch = FetchType.LAZY)\r\n        @JoinColumn(name = &quot;user_id&quot;, nullable = false)\r\n        private AppUser appUser;\r\n    \r\n        //// Getters and Setters and toString() ////\r\n    }\r\n\r\n**AppUserDeserializer.java**\r\n    package com.nk.accountservice.deserializer;\r\n    \r\n    import com.edoctar.accountservice.config.exception.InputNotFoundException;\r\n    import com.edoctar.accountservice.domain.candidate.AppUser;\r\n    import com.edoctar.accountservice.service.candidate.AppUserService;\r\n    import com.fasterxml.jackson.core.JsonParser;\r\n    import com.fasterxml.jackson.databind.DeserializationContext;\r\n    import com.fasterxml.jackson.databind.JsonDeserializer;\r\n    import com.fasterxml.jackson.databind.JsonNode;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    \r\n    import java.io.IOException;\r\n    import java.io.Serializable;\r\n    \r\n    public class AppUserDeserializer extends JsonDeserializer implements Serializable {\r\n    \r\n        private static final long serialVersionUID = -9012464195937554378L;\r\n    \r\n        private AppUserService appUserService;\r\n    \r\n        @Autowired\r\n        public void setAppUserService(AppUserService appUserService) {\r\n            this.appUserService = appUserService;\r\n        }\r\n    \r\n        @Override\r\n        public Object deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException {\r\n            JsonNode node = jsonParser.getCodec().readTree(jsonParser);\r\n            Long userId = node.asLong();\r\n            System.out.println(node);\r\n            System.out.println(node.asLong());\r\n            AppUser appUser = appUserService.findById(userId);\r\n            System.out.println(&quot;appuser: &quot; + appUser);\r\n            if (appUser == null) try {\r\n                throw new InputNotFoundException(&quot;User not found!&quot;);\r\n            } catch (InputNotFoundException e) {\r\n                e.printStackTrace();\r\n                return null;\r\n            }\r\n    \r\n            return appUser;\r\n        }\r\n    }\r\n\r\nSample xhr boy is:\r\n\r\n    {\r\n      &quot;appUser&quot;: 1,\r\n      &quot;avatar&quot;: 1\r\n    }\r\n\r\nAn exception is thrown each time I submit the request.\r\n\r\n    Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: (was java.lang.NullPointerException); nested exception is com.fasterxml.jackson.databind.JsonMappingException: (was java.lang.NullPointerException) (through reference chain: com.edoctar.accountservice.domain.candidate.AppUserAvatar[&quot;appUser&quot;])]\r\n\r\n[![Here&#39;s the screenshoot of my console.][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bF0k3.png\r\n\r\nI discovered that the `appUserService.findById()` method is not being called. I am really confused. I don&#39;t know where I went wrong. Will be greatful for any solution. Thanks.","title":"Jackson Custom Deserializer Not Working In Spring Boot","body":"<p>I created a custom deserializer for my entities but it keeps on throwing exception:</p>\n<p>I have two classes: AppUser and AppUserAvatar</p>\n<p><strong>AppUser.java</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;user&quot;)\npublic class AppUser implements Serializable {\n\n    @Transient\n    private static final long serialVersionUID = -3536455219051825651L;\n\n    @JsonProperty(access = JsonProperty.Access.WRITE_ONLY)\n    @Column(name = &quot;password&quot;, nullable = false, length = 256)\n    private String password;\n\n    @JsonIgnore\n    @Column(name = &quot;is_active&quot;, nullable = false)\n    private boolean active;\n\n    @JsonIgnore\n    @OneToMany(mappedBy = &quot;appUser&quot;, targetEntity = AppUserAvatar.class, fetch = FetchType.LAZY)\n    private List&lt;AppUserAvatar&gt; appUserAvatars;\n\n    //// Getters and Setters and toString() ////\n}\n</code></pre>\n<p><strong>AppUserAvatar.java</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;user_avatar&quot;)\npublic class AppUserAvatar extends BaseEntityD implements Serializable {\n\n    @Transient\n    private static final long serialVersionUID = 8992425872747011681L;\n\n    @Column(name = &quot;avatar&quot;, nullable = false)\n    @Digits(integer = 20, fraction = 0)\n    @NotEmpty\n    private Long avatar;\n\n    @JsonDeserialize(using = AppUserDeserializer.class)\n    @JsonProperty(access = JsonProperty.Access.WRITE_ONLY)\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;user_id&quot;, nullable = false)\n    private AppUser appUser;\n\n    //// Getters and Setters and toString() ////\n}\n</code></pre>\n<p><strong>AppUserDeserializer.java</strong>\npackage com.nk.accountservice.deserializer;</p>\n<pre><code>import com.edoctar.accountservice.config.exception.InputNotFoundException;\nimport com.edoctar.accountservice.domain.candidate.AppUser;\nimport com.edoctar.accountservice.service.candidate.AppUserService;\nimport com.fasterxml.jackson.core.JsonParser;\nimport com.fasterxml.jackson.databind.DeserializationContext;\nimport com.fasterxml.jackson.databind.JsonDeserializer;\nimport com.fasterxml.jackson.databind.JsonNode;\nimport org.springframework.beans.factory.annotation.Autowired;\n\nimport java.io.IOException;\nimport java.io.Serializable;\n\npublic class AppUserDeserializer extends JsonDeserializer implements Serializable {\n\n    private static final long serialVersionUID = -9012464195937554378L;\n\n    private AppUserService appUserService;\n\n    @Autowired\n    public void setAppUserService(AppUserService appUserService) {\n        this.appUserService = appUserService;\n    }\n\n    @Override\n    public Object deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException {\n        JsonNode node = jsonParser.getCodec().readTree(jsonParser);\n        Long userId = node.asLong();\n        System.out.println(node);\n        System.out.println(node.asLong());\n        AppUser appUser = appUserService.findById(userId);\n        System.out.println(&quot;appuser: &quot; + appUser);\n        if (appUser == null) try {\n            throw new InputNotFoundException(&quot;User not found!&quot;);\n        } catch (InputNotFoundException e) {\n            e.printStackTrace();\n            return null;\n        }\n\n        return appUser;\n    }\n}\n</code></pre>\n<p>Sample xhr boy is:</p>\n<pre><code>{\n  &quot;appUser&quot;: 1,\n  &quot;avatar&quot;: 1\n}\n</code></pre>\n<p>An exception is thrown each time I submit the request.</p>\n<pre><code>Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: (was java.lang.NullPointerException); nested exception is com.fasterxml.jackson.databind.JsonMappingException: (was java.lang.NullPointerException) (through reference chain: com.edoctar.accountservice.domain.candidate.AppUserAvatar[&quot;appUser&quot;])]\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/bF0k3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bF0k3.png\" alt=\"Here's the screenshoot of my console.\" /></a></p>\n<p>I discovered that the <code>appUserService.findById()</code> method is not being called. I am really confused. I don't know where I went wrong. Will be greatful for any solution. Thanks.</p>\n"},{"tags":["java","eclipse","encoding","utf-8"],"comments":[{"owner":{"account_id":3685403,"reputation":9772,"user_id":3069254,"display_name":"Jorge_B"},"score":0,"creation_date":1437990559,"post_id":31649879,"comment_id":51245120,"body_markdown":"Tried with getCanonicalPath?","body":"Tried with getCanonicalPath?"},{"owner":{"account_id":3685403,"reputation":9772,"user_id":3069254,"display_name":"Jorge_B"},"score":0,"creation_date":1437990706,"post_id":31649879,"comment_id":51245215,"body_markdown":"Maybe this is a kind of confusion with the output device.  Are you trying to ouput your special characters through windows console?  Have you tried to output it to a file with a Writer with the proper encoding?  Maybe your data have been always well and the problem lies in Windows console painting it wrong","body":"Maybe this is a kind of confusion with the output device.  Are you trying to ouput your special characters through windows console?  Have you tried to output it to a file with a Writer with the proper encoding?  Maybe your data have been always well and the problem lies in Windows console painting it wrong"},{"owner":{"account_id":2544160,"reputation":3291,"user_id":2209329,"accept_rate":92,"display_name":"Michał Szydłowski"},"score":0,"creation_date":1437990811,"post_id":31649879,"comment_id":51245287,"body_markdown":"But it isn&#39;t a matter of displaying in console. The path is clearly wrong, because when I use it as an argument to a function opening the file, it says it doesn&#39;t exist. If I copy and paste raw path, with Polish characters properly encoded, it works fine.","body":"But it isn&#39;t a matter of displaying in console. The path is clearly wrong, because when I use it as an argument to a function opening the file, it says it doesn&#39;t exist. If I copy and paste raw path, with Polish characters properly encoded, it works fine."}],"answers":[{"tags":[],"owner":{"account_id":3439841,"reputation":14084,"user_id":2882051,"display_name":"chengpohi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1437990996,"creation_date":1437990996,"answer_id":31650082,"question_id":31649879,"body_markdown":"    URI uri = new File(Swagger2MarkupConverterTest.class.getResource(\r\n                &quot;/json/swagger.json&quot;).getFile()).toURI(); \r\n    File f = new File(uri);\r\n    System.out.println(f.exists());\r\n\r\nYou can use `URI` to encode your path, and open `File` by `URI`.","title":"How to get absolute path with proper character encoding in Java?","body":"<pre><code>URI uri = new File(Swagger2MarkupConverterTest.class.getResource(\n            \"/json/swagger.json\").getFile()).toURI(); \nFile f = new File(uri);\nSystem.out.println(f.exists());\n</code></pre>\n\n<p>You can use <code>URI</code> to encode your path, and open <code>File</code> by <code>URI</code>.</p>\n"},{"tags":[],"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1660135886,"creation_date":1437991119,"answer_id":31650123,"question_id":31649879,"body_markdown":"The `URL.getFile` call you are using returns the file part of a URL encoded according to the URL encoding rules. You need to decode the string using `URLDecoder` before giving it to `File`:\r\n\r\n    String path = Swagger2MarkupConverterTest.class.getResource(\r\n            &quot;/json/swagger.json&quot;).getFile();\r\n\r\n    path = URLDecoder.decode(path, &quot;UTF-8&quot;);\r\n\r\n    File file = new File(path);\r\n\r\nFrom Java 7 onwards you can use `StandardCharsets.UTF_8`\r\n\r\n    path = URLDecoder.decode(path, StandardCharsets.UTF_8);\r\n\r\n","title":"How to get absolute path with proper character encoding in Java?","body":"<p>The <code>URL.getFile</code> call you are using returns the file part of a URL encoded according to the URL encoding rules. You need to decode the string using <code>URLDecoder</code> before giving it to <code>File</code>:</p>\n<pre><code>String path = Swagger2MarkupConverterTest.class.getResource(\n        &quot;/json/swagger.json&quot;).getFile();\n\npath = URLDecoder.decode(path, &quot;UTF-8&quot;);\n\nFile file = new File(path);\n</code></pre>\n<p>From Java 7 onwards you can use <code>StandardCharsets.UTF_8</code></p>\n<pre><code>path = URLDecoder.decode(path, StandardCharsets.UTF_8);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2088215,"reputation":193,"user_id":1858630,"display_name":"Abhinav Sahu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1437991734,"creation_date":1437991734,"answer_id":31650335,"question_id":31649879,"body_markdown":"You can use simply \r\n\r\n    File file = new File(&quot;file_path&quot;);\r\n    String charset = &quot;UTF-8&quot;;\r\n    BufferedReader reader = new BufferedReader(new InputStreamReader(\r\n        \t\t\t\tnew FileInputStream(file), charset));\r\n\r\ngive the charset at the time of read the file.","title":"How to get absolute path with proper character encoding in Java?","body":"<p>You can use simply </p>\n\n<pre><code>File file = new File(\"file_path\");\nString charset = \"UTF-8\";\nBufferedReader reader = new BufferedReader(new InputStreamReader(\n                    new FileInputStream(file), charset));\n</code></pre>\n\n<p>give the charset at the time of read the file.</p>\n"},{"tags":[],"owner":{"account_id":1813358,"reputation":9087,"user_id":1648987,"accept_rate":25,"display_name":"Karol S"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1438013317,"creation_date":1438013317,"answer_id":31658055,"question_id":31649879,"body_markdown":"The simplest way, that doesn&#39;t involve decoding anything, is this:\r\n\r\n    URL resource = YourClass.class.getResource(&quot;abc&quot;);\r\n    Paths.get(resource.toURI()).toFile();\r\n    // or, equivalently:\r\n    new File(resource.toURI());\r\n\r\nIt doesn&#39;t matter now where the file in the classpath physically is, it will be found as long as the resource is actually a file and not a JAR entry.","title":"How to get absolute path with proper character encoding in Java?","body":"<p>The simplest way, that doesn't involve decoding anything, is this:</p>\n\n<pre><code>URL resource = YourClass.class.getResource(\"abc\");\nPaths.get(resource.toURI()).toFile();\n// or, equivalently:\nnew File(resource.toURI());\n</code></pre>\n\n<p>It doesn't matter now where the file in the classpath physically is, it will be found as long as the resource is actually a file and not a JAR entry.</p>\n"}],"owner":{"account_id":2544160,"reputation":3291,"user_id":2209329,"accept_rate":92,"display_name":"Michał Szydłowski"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11493,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":31650123,"answer_count":4,"score":9,"last_activity_date":1660135886,"creation_date":1437990487,"question_id":31649879,"body_markdown":"I&#39;d like to get the absolute path of a file, so that I can use it further to locate this file. I do it the following way:\r\n\r\n    File file = new File(Swagger2MarkupConverterTest.class.getResource(\r\n\t\t\t\t&quot;/json/swagger.json&quot;).getFile());\t\r\n\tString tempPath = file.getAbsolutePath();\r\n\tString path = tempPath.replace(&quot;\\\\&quot;, &quot;\\\\\\\\&quot;);\r\n\r\nThe path irl looks like this:\r\n\r\n    C:\\\\Users\\\\Michał Szydłowski\\\\workspace2\\\\swagger2markup\\\\bin\\\\json\\\\swagger.json\r\n\r\nHowever, since it contains Polish characters and spaces, what I get from `getAbsolutPath` is:\r\n\r\n    C:\\\\Users\\\\Micha%c5%82%20Szyd%c5%82owski\\\\workspace2\\\\swagger2markup\\\\bin\\\\json\\\\swagger.json\r\n\r\nHow can I get it to do it the right way? This is problematic, because with this path, it cannot locate the file (says it doesn&#39;t exist). ","title":"How to get absolute path with proper character encoding in Java?","body":"<p>I'd like to get the absolute path of a file, so that I can use it further to locate this file. I do it the following way:</p>\n\n<pre><code>File file = new File(Swagger2MarkupConverterTest.class.getResource(\n            \"/json/swagger.json\").getFile());   \nString tempPath = file.getAbsolutePath();\nString path = tempPath.replace(\"\\\\\", \"\\\\\\\\\");\n</code></pre>\n\n<p>The path irl looks like this:</p>\n\n<pre><code>C:\\\\Users\\\\Michał Szydłowski\\\\workspace2\\\\swagger2markup\\\\bin\\\\json\\\\swagger.json\n</code></pre>\n\n<p>However, since it contains Polish characters and spaces, what I get from <code>getAbsolutPath</code> is:</p>\n\n<pre><code>C:\\\\Users\\\\Micha%c5%82%20Szyd%c5%82owski\\\\workspace2\\\\swagger2markup\\\\bin\\\\json\\\\swagger.json\n</code></pre>\n\n<p>How can I get it to do it the right way? This is problematic, because with this path, it cannot locate the file (says it doesn't exist). </p>\n"},{"tags":["java","android","kotlin","sockets"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1647508878,"post_id":71509490,"comment_id":126390628,"body_markdown":"It makes no sense to use a buffer size with buffered input stream. Instead if you want to read 233 bytes then declare a byte buffer of that much bytes and read until full. You could alse use  `count = inputStream.read(byteArray, 0, 233)`","body":"It makes no sense to use a buffer size with buffered input stream. Instead if you want to read 233 bytes then declare a byte buffer of that much bytes and read until full. You could alse use  <code>count = inputStream.read(byteArray, 0, 233)</code>"}],"answers":[{"tags":[],"owner":{"account_id":1320752,"reputation":171,"user_id":1266638,"accept_rate":43,"display_name":"dr_yand"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647854157,"creation_date":1647854157,"answer_id":71555197,"question_id":71509490,"body_markdown":"I found a solution for my problem. I set \r\n\r\n    socket?.receiveBufferSize = 512\r\n    socket?.tcpNoDelay = true","title":"Exchanging small chunks of data over socket in Android","body":"<p>I found a solution for my problem. I set</p>\n<pre><code>socket?.receiveBufferSize = 512\nsocket?.tcpNoDelay = true\n</code></pre>\n"}],"owner":{"account_id":1320752,"reputation":171,"user_id":1266638,"accept_rate":43,"display_name":"dr_yand"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660135198,"creation_date":1647507421,"question_id":71509490,"body_markdown":"I need to receive small portions of data (100-300 bytes) from the server.\r\nTo do this, I use a BufferedInputStream with bufferSize = 256. Sometimes the data arrives with a very long delay.\r\n\r\n    socket.getInputStream().buffered(256)?.use {inputStream-&gt;\r\n                do {\r\n                    val byteArray = ByteArray(4096)\r\n                    var count = -1\r\n                    try {\r\n                        count = inputStream.read(byteArray)\r\n                    }\r\n                    catch (ex : Exception){\r\n                        ex.printStackTrace()\r\n                    }\r\n                    if(count==-1){\r\n                        break\r\n                    }\r\n                }while (count&gt;-1 &amp;&amp; isConnected())\r\n            }","title":"Exchanging small chunks of data over socket in Android","body":"<p>I need to receive small portions of data (100-300 bytes) from the server.\nTo do this, I use a BufferedInputStream with bufferSize = 256. Sometimes the data arrives with a very long delay.</p>\n<pre><code>socket.getInputStream().buffered(256)?.use {inputStream-&gt;\n            do {\n                val byteArray = ByteArray(4096)\n                var count = -1\n                try {\n                    count = inputStream.read(byteArray)\n                }\n                catch (ex : Exception){\n                    ex.printStackTrace()\n                }\n                if(count==-1){\n                    break\n                }\n            }while (count&gt;-1 &amp;&amp; isConnected())\n        }\n</code></pre>\n"},{"tags":["java","android","android-navigation","android-navigation-graph"],"answers":[{"tags":[],"owner":{"account_id":21390158,"reputation":801,"user_id":15754377,"display_name":"Vivek Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660053044,"creation_date":1660053044,"answer_id":73293015,"question_id":73284438,"body_markdown":"Recently, I came across same situation for fab and toolbar. \r\nI created a BaseFragment () class and I let all my fragments extended from this. \r\nIn BaseFragment, declared two variables one for fab&#39;s visibility and other for toolbar. \r\n        \r\n        BaseFragment () {\r\n\r\n         protected int isBottombarVisible = \r\n         View.Visible;\r\n         //inside oncreateView\r\n          Activity activity = \r\n          getRequireActivity() //whatever \r\n          //the java method to get activity \r\n           //inside fragment \r\n          \r\n          activity\r\n         .setBottomBarVisibility\r\n         (isBottombarVisible) \r\n         //define this method in your main \r\n         // activity class \r\n        }\r\n\r\nInside MainActivity (wherever fragment reside) \r\n\r\n        public setBottombarVisibility(int\r\n        visibility) {\r\n        binding.toolbar = visibility\r\n        }\r\n\r\nNow, inside fragment which was extended from BaseFragment () , override above variable \r\n\r\n        class Loginfragment() extends \r\n        BaseFragment() {\r\n        override int isBottombarVisible = \r\n        View.Gone\r\n        }\r\n\r\nI tried to type above code as much as possible in java.. \r\nFor kotlin refer to link\r\n[https://github.com/vivekgupta4Git/TacklingNephrotic][1]\r\n\r\n\r\n  [1]: https://github.com/vivekgupta4Git/TacklingNephrotic","title":"How to hide NavController &amp; AppBarConfiguration in a fragment &amp; activity","body":"<p>Recently, I came across same situation for fab and toolbar.\nI created a BaseFragment () class and I let all my fragments extended from this.\nIn BaseFragment, declared two variables one for fab's visibility and other for toolbar.</p>\n<pre><code>    BaseFragment () {\n\n     protected int isBottombarVisible = \n     View.Visible;\n     //inside oncreateView\n      Activity activity = \n      getRequireActivity() //whatever \n      //the java method to get activity \n       //inside fragment \n      \n      activity\n     .setBottomBarVisibility\n     (isBottombarVisible) \n     //define this method in your main \n     // activity class \n    }\n</code></pre>\n<p>Inside MainActivity (wherever fragment reside)</p>\n<pre><code>    public setBottombarVisibility(int\n    visibility) {\n    binding.toolbar = visibility\n    }\n</code></pre>\n<p>Now, inside fragment which was extended from BaseFragment () , override above variable</p>\n<pre><code>    class Loginfragment() extends \n    BaseFragment() {\n    override int isBottombarVisible = \n    View.Gone\n    }\n</code></pre>\n<p>I tried to type above code as much as possible in java..\nFor kotlin refer to link\n<a href=\"https://github.com/vivekgupta4Git/TacklingNephrotic\" rel=\"nofollow noreferrer\">https://github.com/vivekgupta4Git/TacklingNephrotic</a></p>\n"}],"owner":{"account_id":24580690,"reputation":33,"user_id":18485872,"display_name":"Iam Me"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":826,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73293015,"answer_count":1,"score":0,"last_activity_date":1660135009,"creation_date":1659995900,"question_id":73284438,"body_markdown":"I&#39;m using a navigation graph in my Android app (Java) and have set up a NavController &amp; AppBarConfiguration in my home activity. This is how I have it set up:\r\n\r\n    public class Activity extends BaseActivity {\r\n        NavController navController;\r\n        private AppBarConfiguration appBarConfiguration;\r\n        private ActivityBinding activityBinding;\r\n    \r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);\r\n            getWindow().getDecorView().setSystemUiVisibility(\r\n                    View.SYSTEM_UI_FLAG_LAYOUT_STABLE);\r\n            activityBinding = ActivityBinding.inflate(getLayoutInflater());\r\n            View view = activityBinding.getRoot();\r\n            setContentView(view);\r\n    \r\n            Toolbar toolbar = findViewById(R.id.toolbar);\r\n            setSupportActionBar(toolbar);\r\n    \r\n            navController = Navigation.findNavController(Activity.this, R.id.fragment);\r\n    \r\n            appBarConfiguration =\r\n                    new AppBarConfiguration.Builder(navController.getGraph()).build();\r\n    \r\n            setupActionBar(navController, appBarConfiguration);\r\n    \r\n            activityBinding.bottomBar.setOnItemSelectedListener(new NavigationBarView.OnItemSelectedListener() {\r\n                @Override\r\n                public boolean onNavigationItemSelected(@NonNull MenuItem item) {\r\n                    switch (item.getItemId()) {\r\n                        case R.id.mainFragment:\r\n                            navController.navigate(R.id.mainFragment);\r\n                            return true;\r\n                        case R.id.secondFragment:\r\n                            navController.navigate(R.id.secondFragment);\r\n                            return true;\r\n                        case R.id.thirdFragment:\r\n                            navController.navigate(R.id.thirdFragment);\r\n                            return true;\r\n                    }\r\n                    return false;\r\n                }\r\n            });\r\n        }\r\n    \r\n        private void setupActionBar(NavController navController,\r\n                                    AppBarConfiguration appBarConfig) {\r\n            NavigationUI.setupActionBarWithNavController(this, navController, appBarConfig);\r\n        }\r\n    \r\n    \r\n        @Override\r\n        public boolean onSupportNavigateUp() {\r\n            return NavigationUI.navigateUp(Navigation.findNavController(this, R.id.fragment), appBarConfiguration);\r\n        }\r\n    }\r\n\r\nI want the NavController &amp; AppBarConfiguration to be hidden to allow for fullscreen visibility in one fragment &amp; one activity. For my fragment, I&#39;ve tried this solution:\r\n\r\n    @Override\r\n    public void onResume() {\r\n        super.onResume();\r\n        ActionBar supportActionBar = ((AppCompatActivity) requireActivity()).getSupportActionBar();\r\n        if (supportActionBar != null)\r\n            supportActionBar.hide();\r\n    }\r\n    \r\n    @Override\r\n    public void onStop() {\r\n        super.onStop();\r\n        ActionBar supportActionBar = ((AppCompatActivity) requireActivity()).getSupportActionBar();\r\n        if (supportActionBar != null)\r\n            supportActionBar.show();\r\n    }\r\n\r\nAnd this solution:\r\n\r\n    \r\n\r\n    getActivity().getWindow().setFlags(\r\n                WindowManager.LayoutParams.FLAG_FULLSCREEN,\r\n                WindowManager.LayoutParams.FLAG_FULLSCREEN);\r\n\r\nAnd this solution:\r\n\r\n    getActivity().getWindow().getDecorView().setSystemUiVisibility(\r\n                    View.SYSTEM_UI_FLAG_LAYOUT_STABLE\r\n                            | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION\r\n                            | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN\r\n                            | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION // hide nav bar\r\n                            | View.SYSTEM_UI_FLAG_FULLSCREEN // hide status bar\r\n                            | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY);\r\n\r\nNone of these have worked. Does anyone know how to properly show a full screen when using a NavController &amp; AppBarConfiguration?\r\n\r\nSolution:\r\nAs suggested, I added this to my home activity:\r\n\r\n    public void setBottombarVisibility(int visibility){\r\n        activityBinding.bottomBar.setVisibility(visibility);\r\n    }\r\n\r\nAnd I have the Fragment where I want the nav to disappear extend this BaseFragment: \r\n\r\n    public class BaseFragment extends Fragment {\r\n    \r\n        protected int isBottomBarVisible = View.GONE;\r\n    \r\n        @Nullable\r\n        @Override\r\n        public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n            Activity act = getActivity();\r\n            if (act instanceof Activity) ((Activity) act).setBottombarVisibility(isBottomBarVisible);\r\n            return super.onCreateView(inflater, container, savedInstanceState);\r\n    \r\n        }\r\n    }\r\n\r\nNav is gone.","title":"How to hide NavController &amp; AppBarConfiguration in a fragment &amp; activity","body":"<p>I'm using a navigation graph in my Android app (Java) and have set up a NavController &amp; AppBarConfiguration in my home activity. This is how I have it set up:</p>\n<pre><code>public class Activity extends BaseActivity {\n    NavController navController;\n    private AppBarConfiguration appBarConfiguration;\n    private ActivityBinding activityBinding;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);\n        getWindow().getDecorView().setSystemUiVisibility(\n                View.SYSTEM_UI_FLAG_LAYOUT_STABLE);\n        activityBinding = ActivityBinding.inflate(getLayoutInflater());\n        View view = activityBinding.getRoot();\n        setContentView(view);\n\n        Toolbar toolbar = findViewById(R.id.toolbar);\n        setSupportActionBar(toolbar);\n\n        navController = Navigation.findNavController(Activity.this, R.id.fragment);\n\n        appBarConfiguration =\n                new AppBarConfiguration.Builder(navController.getGraph()).build();\n\n        setupActionBar(navController, appBarConfiguration);\n\n        activityBinding.bottomBar.setOnItemSelectedListener(new NavigationBarView.OnItemSelectedListener() {\n            @Override\n            public boolean onNavigationItemSelected(@NonNull MenuItem item) {\n                switch (item.getItemId()) {\n                    case R.id.mainFragment:\n                        navController.navigate(R.id.mainFragment);\n                        return true;\n                    case R.id.secondFragment:\n                        navController.navigate(R.id.secondFragment);\n                        return true;\n                    case R.id.thirdFragment:\n                        navController.navigate(R.id.thirdFragment);\n                        return true;\n                }\n                return false;\n            }\n        });\n    }\n\n    private void setupActionBar(NavController navController,\n                                AppBarConfiguration appBarConfig) {\n        NavigationUI.setupActionBarWithNavController(this, navController, appBarConfig);\n    }\n\n\n    @Override\n    public boolean onSupportNavigateUp() {\n        return NavigationUI.navigateUp(Navigation.findNavController(this, R.id.fragment), appBarConfiguration);\n    }\n}\n</code></pre>\n<p>I want the NavController &amp; AppBarConfiguration to be hidden to allow for fullscreen visibility in one fragment &amp; one activity. For my fragment, I've tried this solution:</p>\n<pre><code>@Override\npublic void onResume() {\n    super.onResume();\n    ActionBar supportActionBar = ((AppCompatActivity) requireActivity()).getSupportActionBar();\n    if (supportActionBar != null)\n        supportActionBar.hide();\n}\n\n@Override\npublic void onStop() {\n    super.onStop();\n    ActionBar supportActionBar = ((AppCompatActivity) requireActivity()).getSupportActionBar();\n    if (supportActionBar != null)\n        supportActionBar.show();\n}\n</code></pre>\n<p>And this solution:</p>\n<pre><code>getActivity().getWindow().setFlags(\n            WindowManager.LayoutParams.FLAG_FULLSCREEN,\n            WindowManager.LayoutParams.FLAG_FULLSCREEN);\n</code></pre>\n<p>And this solution:</p>\n<pre><code>getActivity().getWindow().getDecorView().setSystemUiVisibility(\n                View.SYSTEM_UI_FLAG_LAYOUT_STABLE\n                        | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION\n                        | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN\n                        | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION // hide nav bar\n                        | View.SYSTEM_UI_FLAG_FULLSCREEN // hide status bar\n                        | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY);\n</code></pre>\n<p>None of these have worked. Does anyone know how to properly show a full screen when using a NavController &amp; AppBarConfiguration?</p>\n<p>Solution:\nAs suggested, I added this to my home activity:</p>\n<pre><code>public void setBottombarVisibility(int visibility){\n    activityBinding.bottomBar.setVisibility(visibility);\n}\n</code></pre>\n<p>And I have the Fragment where I want the nav to disappear extend this BaseFragment:</p>\n<pre><code>public class BaseFragment extends Fragment {\n\n    protected int isBottomBarVisible = View.GONE;\n\n    @Nullable\n    @Override\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\n        Activity act = getActivity();\n        if (act instanceof Activity) ((Activity) act).setBottombarVisibility(isBottomBarVisible);\n        return super.onCreateView(inflater, container, savedInstanceState);\n\n    }\n}\n</code></pre>\n<p>Nav is gone.</p>\n"},{"tags":["java","docker","docker-compose","dockerfile","java-ee-6"],"comments":[{"owner":{"account_id":8063342,"reputation":681,"user_id":6078268,"display_name":"vladtkachuk"},"score":0,"creation_date":1660134384,"post_id":73306161,"comment_id":129460373,"body_markdown":"error logs would be helpful","body":"error logs would be helpful"}],"answers":[{"tags":[],"owner":{"account_id":8063342,"reputation":681,"user_id":6078268,"display_name":"vladtkachuk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660134573,"creation_date":1660134573,"answer_id":73306360,"question_id":73306161,"body_markdown":"First issue I notice is that the DataSourse URL should use the DB port within a docker network, i.e., `3306`","title":"can&#39;t run containers in javaee correctly","body":"<p>First issue I notice is that the DataSourse URL should use the DB port within a docker network, i.e., <code>3306</code></p>\n"}],"owner":{"account_id":24706020,"reputation":31,"user_id":18596831,"display_name":"Matvey Androsyuk"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660134573,"creation_date":1660133703,"question_id":73306161,"body_markdown":"I am getting acquainted with Docker and i need to inject it to my application. I have some problems:\r\n\r\nMy container always fall down and restarts, may be somebody faced a docker-compose in JavaEE application with MySQL.\r\n\r\nMy dockerfile:\r\n\r\n```\r\nFROM maven:3.6.3-jdk-11\r\n\r\nCOPY ./ ./\r\n\r\nRUN mvn clean package\r\n\r\nCMD [&quot;java&quot;, &quot;-war&quot;,&quot;target/javaee_rest_jdbc_todo_list.war&quot;]\r\n```\r\n\r\ndocker-compose file\r\n```\r\nversion: &quot;3.7&quot;\r\nservices:\r\n  api_service:\r\n    build: .\r\n    hostname: api_service\r\n    restart: always\r\n    ports:\r\n      - 8090:8080\r\n    depends_on:\r\n      - mysql_db\r\n  mysql_db:\r\n    image: &quot;mysql:8.0&quot;\r\n    hostname: mysql_db\r\n    restart: always\r\n    ports:\r\n      - 3308:3306\r\n    environment:\r\n      MYSQL_DATABASE: javaee_task_db\r\n      MYSQL_USER: user228\r\n      MYSQL_PASSWORD: user228\r\n      MYSQL_ROOT_PASSWORD: 13574637480326\r\n```\r\n\r\nAlso i have flyway plugin in my pom.xml file:\r\n\r\n```\r\n        &lt;plugin&gt;\r\n          &lt;groupId&gt;com.googlecode.flyway&lt;/groupId&gt;\r\n          &lt;artifactId&gt;flyway-maven-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;1.5&lt;/version&gt;\r\n          &lt;configuration&gt;\r\n            &lt;user&gt;user228&lt;/user&gt;\r\n            &lt;password&gt;user228&lt;/password&gt;\r\n            &lt;driver&gt;com.mysql.jdbc.Driver&lt;/driver&gt;\r\n            &lt;url&gt;jdbc:mysql://mysql_db:3308/javaee_task_db?autoReconnect=true&amp;amp;useUnicode=true&amp;amp;characterEncoding=UTF-8&amp;amp;connectionCollation=utf8_general_ci&amp;amp;characterSetResults=UTF-8&lt;/url&gt;\r\n          &lt;/configuration&gt;\r\n        &lt;/plugin&gt;\r\n```\r\n\r\nAnd my dataSourse url connection:\r\n\r\n```\r\n    final static String URL = &quot;jdbc:mysql://mysql_db:3308/javaee_task_db?useSSL=false&quot;;\r\n```\r\n\r\nI also attach link to github - https://github.com/MatveyAndrosyukk/javaee_rest_jdbc_todo_list.\r\n\r\nI will be veery grateful for your help!","title":"can&#39;t run containers in javaee correctly","body":"<p>I am getting acquainted with Docker and i need to inject it to my application. I have some problems:</p>\n<p>My container always fall down and restarts, may be somebody faced a docker-compose in JavaEE application with MySQL.</p>\n<p>My dockerfile:</p>\n<pre><code>FROM maven:3.6.3-jdk-11\n\nCOPY ./ ./\n\nRUN mvn clean package\n\nCMD [&quot;java&quot;, &quot;-war&quot;,&quot;target/javaee_rest_jdbc_todo_list.war&quot;]\n</code></pre>\n<p>docker-compose file</p>\n<pre><code>version: &quot;3.7&quot;\nservices:\n  api_service:\n    build: .\n    hostname: api_service\n    restart: always\n    ports:\n      - 8090:8080\n    depends_on:\n      - mysql_db\n  mysql_db:\n    image: &quot;mysql:8.0&quot;\n    hostname: mysql_db\n    restart: always\n    ports:\n      - 3308:3306\n    environment:\n      MYSQL_DATABASE: javaee_task_db\n      MYSQL_USER: user228\n      MYSQL_PASSWORD: user228\n      MYSQL_ROOT_PASSWORD: 13574637480326\n</code></pre>\n<p>Also i have flyway plugin in my pom.xml file:</p>\n<pre><code>        &lt;plugin&gt;\n          &lt;groupId&gt;com.googlecode.flyway&lt;/groupId&gt;\n          &lt;artifactId&gt;flyway-maven-plugin&lt;/artifactId&gt;\n          &lt;version&gt;1.5&lt;/version&gt;\n          &lt;configuration&gt;\n            &lt;user&gt;user228&lt;/user&gt;\n            &lt;password&gt;user228&lt;/password&gt;\n            &lt;driver&gt;com.mysql.jdbc.Driver&lt;/driver&gt;\n            &lt;url&gt;jdbc:mysql://mysql_db:3308/javaee_task_db?autoReconnect=true&amp;amp;useUnicode=true&amp;amp;characterEncoding=UTF-8&amp;amp;connectionCollation=utf8_general_ci&amp;amp;characterSetResults=UTF-8&lt;/url&gt;\n          &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p>And my dataSourse url connection:</p>\n<pre><code>    final static String URL = &quot;jdbc:mysql://mysql_db:3308/javaee_task_db?useSSL=false&quot;;\n</code></pre>\n<p>I also attach link to github - <a href=\"https://github.com/MatveyAndrosyukk/javaee_rest_jdbc_todo_list\" rel=\"nofollow noreferrer\">https://github.com/MatveyAndrosyukk/javaee_rest_jdbc_todo_list</a>.</p>\n<p>I will be veery grateful for your help!</p>\n"},{"tags":["java","amazon-kinesis","amazon-kinesis-firehose","amazon-kinesis-kpl"],"answers":[{"tags":[],"owner":{"account_id":968743,"reputation":3452,"user_id":991710,"accept_rate":82,"display_name":"filpa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660134340,"creation_date":1660060772,"answer_id":73294807,"question_id":73238205,"body_markdown":"I&#39;ve finally figured out the problem and it&#39;s quite dumb.\r\n\r\nWhat it boils down to, is that the transformer that converts data to parquet in Firehose expects a pure JSON payload. It expects records in the form:\r\n\r\n```\r\n{&quot;itemId&quot;: 1, &quot;itemName&quot;: &quot;someItem&quot;}{&quot;itemId&quot;: 2, &quot;itemName&quot;: &quot;otherItem&quot;}\r\n```\r\n\r\nIt seemingly does not accept the same data in a different format.\r\nThis means that Avro-compatible JSON (where the above `itemId` would look like `&quot;itemId&quot;: {&quot;long&quot;: 1}`, or e.g. binary Avro data, is *not* compatible with the Kinesis Firehose parquet transformer, regardless of the fact that my schema definition in the Glue Schema Registry is explicitly registered as being in Avro format.\r\n\r\nIn addition, the Firehose parquet transformer requires the use of a Glue *table* - creating this table from an imported Avro schema simply *does not work* (see [this](https://stackoverflow.com/questions/68125501/invalid-schema-error-in-aws-glue-created-via-terraform/69440421?noredirect=1#comment129358143_69440421) answer), and had to be created manually. Luckily, even though it can&#39;t use the table that is based on an existing schema, the table definition was the same (with the exception of the Serde it needs to use), so it was relatively easy to fix...\r\n\r\nTo sum up, to get the above code to work I had to:\r\n\r\n1. Create a Glue table for the schema *manually* (you can use the first table created from the existing schema as a template for creating this second table, but you can&#39;t have Firehose link to the first table)\r\n\r\n2. Change the above code: \r\n```java\r\nkinesisProducer.addUserRecord(&quot;my-data-stream&quot;, key, randomExplicitHashKey(), value.toByteBuffer(), gsrSchema);\r\n```\r\n\r\nto:\r\n```java\r\nByteBuffer data = ByteBuffer.wrap(value.toString().getBytes(StandardCharsets.UTF_8));\r\nkinesisProducer.addUserRecord(&quot;my-data-stream&quot;, key, randomExplicitHashKey(), data);\r\n```\r\n\r\nNote that the I am now using the overloaded `addUserRecord` function that does *not* include a `Schema` parameter, which internally invokes the previous function with a `null` schema parameter. This prevents the KPL from encoding my payload and instead sends the &#39;plain&#39; JSON over to KDS. \r\n\r\nThis is **contrary** to the only [AWS Docs example](https://docs.aws.amazon.com/glue/latest/dg/schema-registry-integrations.html#schema-registry-integrations-kds) that I could find on the topic, which likely is meant for a Firehose stream which does *not* convert the data prior to sending it to its destination.\r\n\r\nI can&#39;t quite understand the reasons for all these undocumented limitations, and it was a pain to debug seeing how neither of the KPL functions nor KDS explicitly mentions anywhere that I can find that this is the expected behaviour. I feel like it&#39;s not worth trying to open an issue/PR over at the KPL repo seeing how it seems like Amazon doesn&#39;t really care about maintaining it that much... \r\n\r\nI&#39;ll probably switch over to the plain [Kinesis Client](https://github.com/awslabs/amazon-kinesis-client) + [Kinesis Aggregation](https://github.com/awslabs/kinesis-aggregation) for a more robust solution in the future, but hey, at least it works. ","title":"Streaming data from Kinesis to S3 fails with Illegal Character that KPL itself writes","body":"<p>I've finally figured out the problem and it's quite dumb.</p>\n<p>What it boils down to, is that the transformer that converts data to parquet in Firehose expects a pure JSON payload. It expects records in the form:</p>\n<pre><code>{&quot;itemId&quot;: 1, &quot;itemName&quot;: &quot;someItem&quot;}{&quot;itemId&quot;: 2, &quot;itemName&quot;: &quot;otherItem&quot;}\n</code></pre>\n<p>It seemingly does not accept the same data in a different format.\nThis means that Avro-compatible JSON (where the above <code>itemId</code> would look like <code>&quot;itemId&quot;: {&quot;long&quot;: 1}</code>, or e.g. binary Avro data, is <em>not</em> compatible with the Kinesis Firehose parquet transformer, regardless of the fact that my schema definition in the Glue Schema Registry is explicitly registered as being in Avro format.</p>\n<p>In addition, the Firehose parquet transformer requires the use of a Glue <em>table</em> - creating this table from an imported Avro schema simply <em>does not work</em> (see <a href=\"https://stackoverflow.com/questions/68125501/invalid-schema-error-in-aws-glue-created-via-terraform/69440421?noredirect=1#comment129358143_69440421\">this</a> answer), and had to be created manually. Luckily, even though it can't use the table that is based on an existing schema, the table definition was the same (with the exception of the Serde it needs to use), so it was relatively easy to fix...</p>\n<p>To sum up, to get the above code to work I had to:</p>\n<ol>\n<li><p>Create a Glue table for the schema <em>manually</em> (you can use the first table created from the existing schema as a template for creating this second table, but you can't have Firehose link to the first table)</p>\n</li>\n<li><p>Change the above code:</p>\n</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>kinesisProducer.addUserRecord(&quot;my-data-stream&quot;, key, randomExplicitHashKey(), value.toByteBuffer(), gsrSchema);\n</code></pre>\n<p>to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ByteBuffer data = ByteBuffer.wrap(value.toString().getBytes(StandardCharsets.UTF_8));\nkinesisProducer.addUserRecord(&quot;my-data-stream&quot;, key, randomExplicitHashKey(), data);\n</code></pre>\n<p>Note that the I am now using the overloaded <code>addUserRecord</code> function that does <em>not</em> include a <code>Schema</code> parameter, which internally invokes the previous function with a <code>null</code> schema parameter. This prevents the KPL from encoding my payload and instead sends the 'plain' JSON over to KDS.</p>\n<p>This is <strong>contrary</strong> to the only <a href=\"https://docs.aws.amazon.com/glue/latest/dg/schema-registry-integrations.html#schema-registry-integrations-kds\" rel=\"nofollow noreferrer\">AWS Docs example</a> that I could find on the topic, which likely is meant for a Firehose stream which does <em>not</em> convert the data prior to sending it to its destination.</p>\n<p>I can't quite understand the reasons for all these undocumented limitations, and it was a pain to debug seeing how neither of the KPL functions nor KDS explicitly mentions anywhere that I can find that this is the expected behaviour. I feel like it's not worth trying to open an issue/PR over at the KPL repo seeing how it seems like Amazon doesn't really care about maintaining it that much...</p>\n<p>I'll probably switch over to the plain <a href=\"https://github.com/awslabs/amazon-kinesis-client\" rel=\"nofollow noreferrer\">Kinesis Client</a> + <a href=\"https://github.com/awslabs/kinesis-aggregation\" rel=\"nofollow noreferrer\">Kinesis Aggregation</a> for a more robust solution in the future, but hey, at least it works.</p>\n"}],"owner":{"account_id":968743,"reputation":3452,"user_id":991710,"accept_rate":82,"display_name":"filpa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":395,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73294807,"answer_count":1,"score":0,"last_activity_date":1660134340,"creation_date":1659625443,"question_id":73238205,"body_markdown":"I have a relatively straightforward use case:\r\n\r\n1. Read Avro data from a Kafka topic\r\n2. Use KPL (`v0.14.12`) to send this data to Kinesis Data Streams\r\n3. Use Kinesis Firehose to transform this data into Parquet and transfer it to S3.\r\n\r\nThe Kafka topic was written into by Kafka Streams using the following producer Configuration:\r\n\r\n```java\r\nprivate void addAwsGlueSpecificProperties(Map&lt;String, Object&gt; props) {\r\n    props.put(AWSSchemaRegistryConstants.AWS_REGION, &quot;eu-central-1&quot;);\r\n    props.put(AWSSchemaRegistryConstants.DATA_FORMAT, DataFormat.AVRO.name());\r\n    props.put(AWSSchemaRegistryConstants.SCHEMA_AUTO_REGISTRATION_SETTING, true);\r\n    props.put(AWSSchemaRegistryConstants.REGISTRY_NAME, &quot;Kinesis_Schema_Registry&quot;);\r\n    props.put(AWSSchemaRegistryConstants.COMPRESSION_TYPE, AWSSchemaRegistryConstants.COMPRESSION.ZLIB.name());\r\n    props.put(DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.String().getClass().getName());\r\n    props.put(DEFAULT_VALUE_SERDE_CLASS_CONFIG, GlueSchemaRegistryKafkaStreamsSerde.class.getName());\r\n}\r\n```\r\n\r\nMost notably, I&#39;ve set `SCHEMA_AUTO_REGISTRATION_SETTING` to `true` to try and rule out problems with my schema definition. The auto-registration itself worked without any issues.\r\n\r\nI have a very simple loop running for test purposes, which does step 1 and 2 of the above. It looks as follows:\r\n\r\n```java\r\nKinesisProducer kinesisProducer = new KinesisProducer(getKinesisConfig());\r\ntry (final KafkaConsumer&lt;String, AvroEvent&gt; consumer = new KafkaConsumer&lt;&gt;(properties)) {\r\n    consumer.subscribe(Collections.singletonList(TOPIC));\r\n    while (true) {\r\n        log.info(&quot;Polling...&quot;);\r\n        final ConsumerRecords&lt;String, AvroEvent&gt; records = consumer.poll(Duration.ofMillis(100));\r\n        for (final ConsumerRecord&lt;String, AvroEvent&gt; record : records) {\r\n            final String key = record.key();\r\n\r\n            ListenableFuture&lt;UserRecordResult&gt; request = kinesisProducer.addUserRecord(&quot;my-data-stream&quot;, key, randomExplicitHashKey(), value.toByteBuffer(), gsrSchema);\r\n\r\n            Futures.addCallback(request, CALLBACK, executor);\r\n        }\r\n        Thread.sleep(Duration.ofSeconds(10).toMillis());\r\n    }\r\n}\r\n```\r\n\r\nThe callback just does a bit of logging on success/failure.\r\n\r\nMy Kinesis Config looks as follows:\r\n\r\n```java\r\nprivate static KinesisProducerConfiguration getKinesisConfig() {\r\n    KinesisProducerConfiguration config = new KinesisProducerConfiguration();\r\n    GlueSchemaRegistryConfiguration schemaRegistryConfiguration = getGlueSchemaRegistryConfiguration();\r\n    config.setGlueSchemaRegistryConfiguration(schemaRegistryConfiguration);\r\n    config.setRegion(&quot;eu-central-1&quot;);\r\n    config.setCredentialsProvider(new DefaultAWSCredentialsProviderChain());\r\n    config.setMaxConnections(2);\r\n    config.setThreadingModel(KinesisProducerConfiguration.ThreadingModel.POOLED);\r\n    config.setThreadPoolSize(2);\r\n    config.setRateLimit(100L);\r\n    return config;\r\n}\r\n\r\nprivate static GlueSchemaRegistryConfiguration getGlueSchemaRegistryConfiguration() {\r\n    GlueSchemaRegistryConfiguration gsrConfig = new GlueSchemaRegistryConfiguration(&quot;eu-central-1&quot;);\r\n    gsrConfig.setAvroRecordType(AvroRecordType.GENERIC_RECORD ); // have also tried SPECIFIC_RECORD\r\n    gsrConfig.setRegistryName(&quot;Kinesis_Schema_Registry&quot;);\r\n    gsrConfig.setCompressionType(AWSSchemaRegistryConstants.COMPRESSION.ZLIB);\r\n    return gsrConfig;\r\n}\r\n```\r\n\r\nThis setup allows me to read Specific Avro records from Kafka and send them to Kinesis. I have also verified that the correct schema version ID is queried from GSR by my code. However, when my data gets to Firehose, I receive only the following error message for all my records (one per record):\r\n\r\n\r\n```json\r\n{\r\n  &quot;attemptsMade&quot;: 1,\r\n  &quot;arrivalTimestamp&quot;: 1659622848304,\r\n  &quot;lastErrorCode&quot;: &quot;DataFormatConversion.ParseError&quot;,\r\n  &quot;lastErrorMessage&quot;: &quot;Encountered malformed JSON. Illegal character ((CTRL-CHAR, code 3)): only regular white space (\\\\r, \\\\n, \\\\t) is allowed between tokens\\n at [Source: com.fasterxml.jackson.databind.util.ByteBufferBackedInputStream@6252e7eb; line: 1, column: 2]&quot;,\r\n  &quot;attemptEndingTimestamp&quot;: 1659623152452,\r\n  &quot;rawData&quot;: &quot;&lt;base64EncodedData&gt;&quot;,\r\n  &quot;sequenceNumber&quot;: &quot;&lt;seqNum&gt;&quot;,\r\n  &quot;dataCatalogTable&quot;: {\r\n    &quot;databaseName&quot;: &quot;&lt;Glue database name&gt;&quot;,\r\n    &quot;tableName&quot;: &quot;&lt;Glue table name&gt;&quot;,\r\n    &quot;region&quot;: &quot;eu-central-1&quot;,\r\n    &quot;versionId&quot;: &quot;LATEST&quot;,\r\n    &quot;roleArn&quot;: &quot;&lt;arn&gt;&quot;\r\n  }\r\n}\r\n```\r\n\r\nUnfortunately I can&#39;t post the entirety of the data as it is sensitive. However, the relevant part is that it always starts with the above control character that is causing the problem:\r\n\r\n```\r\n0x03 0x05 &lt;schemaVersionId&gt; &lt;data&gt;\r\n```\r\n\r\nMy original data does not contain these control characters. After some debugging, I&#39;ve found that KPL *explicitly* adds these bytes to the beginning of a UserRecord. In `com.amazonaws.services.schemaregistry.serializers.SerializationDataEncoder#write`:\r\n\r\n```java\r\npublic byte[] write(final byte[] objectBytes, UUID schemaVersionId) {\r\n    byte[] bytes;\r\n    try (ByteArrayOutputStream out = new ByteArrayOutputStream()) {          \r\n        \r\n        writeHeaderVersionBytes(out);\r\n        writeCompressionBytes(out);\r\n        writeSchemaVersionId(out, schemaVersionId);\r\n\r\n        boolean shouldCompress = this.compressionHandler != null;\r\n        bytes = writeToExistingStream(out, shouldCompress ? compressData(objectBytes) : objectBytes);\r\n\r\n    } catch (Exception e) {\r\n        throw new AWSSchemaRegistryException(e.getMessage(), e);\r\n    }\r\n\r\n    return bytes;\r\n}\r\n```\r\n\r\nWith `writeHeaderVersionBytes(out)` and `writeCompressionBytes(out)` writing to the front of the stream, respectively:\r\n\r\n```java\r\n// byte HEADER_VERSION_BYTE = (byte) 3;\r\nprivate void writeHeaderVersionBytes(ByteArrayOutputStream out) {\r\n    out.write(AWSSchemaRegistryConstants.HEADER_VERSION_BYTE);\r\n}\r\n\r\n// byte COMPRESSION_BYTE = (byte) 5\r\n// byte COMPRESSION_DEFAULT_BYTE = (byte) 0\r\nprivate void writeCompressionBytes(ByteArrayOutputStream out) {\r\n    out.write(compressionHandler != null ? AWSSchemaRegistryConstants.COMPRESSION_BYTE\r\n            : AWSSchemaRegistryConstants.COMPRESSION_DEFAULT_BYTE);\r\n}\r\n```\r\n\r\nWhy is Kinesis unable to parse a message that is produced by the library that is supposed to be best suited for writing to it? What am I missing?","title":"Streaming data from Kinesis to S3 fails with Illegal Character that KPL itself writes","body":"<p>I have a relatively straightforward use case:</p>\n<ol>\n<li>Read Avro data from a Kafka topic</li>\n<li>Use KPL (<code>v0.14.12</code>) to send this data to Kinesis Data Streams</li>\n<li>Use Kinesis Firehose to transform this data into Parquet and transfer it to S3.</li>\n</ol>\n<p>The Kafka topic was written into by Kafka Streams using the following producer Configuration:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void addAwsGlueSpecificProperties(Map&lt;String, Object&gt; props) {\n    props.put(AWSSchemaRegistryConstants.AWS_REGION, &quot;eu-central-1&quot;);\n    props.put(AWSSchemaRegistryConstants.DATA_FORMAT, DataFormat.AVRO.name());\n    props.put(AWSSchemaRegistryConstants.SCHEMA_AUTO_REGISTRATION_SETTING, true);\n    props.put(AWSSchemaRegistryConstants.REGISTRY_NAME, &quot;Kinesis_Schema_Registry&quot;);\n    props.put(AWSSchemaRegistryConstants.COMPRESSION_TYPE, AWSSchemaRegistryConstants.COMPRESSION.ZLIB.name());\n    props.put(DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.String().getClass().getName());\n    props.put(DEFAULT_VALUE_SERDE_CLASS_CONFIG, GlueSchemaRegistryKafkaStreamsSerde.class.getName());\n}\n</code></pre>\n<p>Most notably, I've set <code>SCHEMA_AUTO_REGISTRATION_SETTING</code> to <code>true</code> to try and rule out problems with my schema definition. The auto-registration itself worked without any issues.</p>\n<p>I have a very simple loop running for test purposes, which does step 1 and 2 of the above. It looks as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>KinesisProducer kinesisProducer = new KinesisProducer(getKinesisConfig());\ntry (final KafkaConsumer&lt;String, AvroEvent&gt; consumer = new KafkaConsumer&lt;&gt;(properties)) {\n    consumer.subscribe(Collections.singletonList(TOPIC));\n    while (true) {\n        log.info(&quot;Polling...&quot;);\n        final ConsumerRecords&lt;String, AvroEvent&gt; records = consumer.poll(Duration.ofMillis(100));\n        for (final ConsumerRecord&lt;String, AvroEvent&gt; record : records) {\n            final String key = record.key();\n\n            ListenableFuture&lt;UserRecordResult&gt; request = kinesisProducer.addUserRecord(&quot;my-data-stream&quot;, key, randomExplicitHashKey(), value.toByteBuffer(), gsrSchema);\n\n            Futures.addCallback(request, CALLBACK, executor);\n        }\n        Thread.sleep(Duration.ofSeconds(10).toMillis());\n    }\n}\n</code></pre>\n<p>The callback just does a bit of logging on success/failure.</p>\n<p>My Kinesis Config looks as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static KinesisProducerConfiguration getKinesisConfig() {\n    KinesisProducerConfiguration config = new KinesisProducerConfiguration();\n    GlueSchemaRegistryConfiguration schemaRegistryConfiguration = getGlueSchemaRegistryConfiguration();\n    config.setGlueSchemaRegistryConfiguration(schemaRegistryConfiguration);\n    config.setRegion(&quot;eu-central-1&quot;);\n    config.setCredentialsProvider(new DefaultAWSCredentialsProviderChain());\n    config.setMaxConnections(2);\n    config.setThreadingModel(KinesisProducerConfiguration.ThreadingModel.POOLED);\n    config.setThreadPoolSize(2);\n    config.setRateLimit(100L);\n    return config;\n}\n\nprivate static GlueSchemaRegistryConfiguration getGlueSchemaRegistryConfiguration() {\n    GlueSchemaRegistryConfiguration gsrConfig = new GlueSchemaRegistryConfiguration(&quot;eu-central-1&quot;);\n    gsrConfig.setAvroRecordType(AvroRecordType.GENERIC_RECORD ); // have also tried SPECIFIC_RECORD\n    gsrConfig.setRegistryName(&quot;Kinesis_Schema_Registry&quot;);\n    gsrConfig.setCompressionType(AWSSchemaRegistryConstants.COMPRESSION.ZLIB);\n    return gsrConfig;\n}\n</code></pre>\n<p>This setup allows me to read Specific Avro records from Kafka and send them to Kinesis. I have also verified that the correct schema version ID is queried from GSR by my code. However, when my data gets to Firehose, I receive only the following error message for all my records (one per record):</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;attemptsMade&quot;: 1,\n  &quot;arrivalTimestamp&quot;: 1659622848304,\n  &quot;lastErrorCode&quot;: &quot;DataFormatConversion.ParseError&quot;,\n  &quot;lastErrorMessage&quot;: &quot;Encountered malformed JSON. Illegal character ((CTRL-CHAR, code 3)): only regular white space (\\\\r, \\\\n, \\\\t) is allowed between tokens\\n at [Source: com.fasterxml.jackson.databind.util.ByteBufferBackedInputStream@6252e7eb; line: 1, column: 2]&quot;,\n  &quot;attemptEndingTimestamp&quot;: 1659623152452,\n  &quot;rawData&quot;: &quot;&lt;base64EncodedData&gt;&quot;,\n  &quot;sequenceNumber&quot;: &quot;&lt;seqNum&gt;&quot;,\n  &quot;dataCatalogTable&quot;: {\n    &quot;databaseName&quot;: &quot;&lt;Glue database name&gt;&quot;,\n    &quot;tableName&quot;: &quot;&lt;Glue table name&gt;&quot;,\n    &quot;region&quot;: &quot;eu-central-1&quot;,\n    &quot;versionId&quot;: &quot;LATEST&quot;,\n    &quot;roleArn&quot;: &quot;&lt;arn&gt;&quot;\n  }\n}\n</code></pre>\n<p>Unfortunately I can't post the entirety of the data as it is sensitive. However, the relevant part is that it always starts with the above control character that is causing the problem:</p>\n<pre><code>0x03 0x05 &lt;schemaVersionId&gt; &lt;data&gt;\n</code></pre>\n<p>My original data does not contain these control characters. After some debugging, I've found that KPL <em>explicitly</em> adds these bytes to the beginning of a UserRecord. In <code>com.amazonaws.services.schemaregistry.serializers.SerializationDataEncoder#write</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public byte[] write(final byte[] objectBytes, UUID schemaVersionId) {\n    byte[] bytes;\n    try (ByteArrayOutputStream out = new ByteArrayOutputStream()) {          \n        \n        writeHeaderVersionBytes(out);\n        writeCompressionBytes(out);\n        writeSchemaVersionId(out, schemaVersionId);\n\n        boolean shouldCompress = this.compressionHandler != null;\n        bytes = writeToExistingStream(out, shouldCompress ? compressData(objectBytes) : objectBytes);\n\n    } catch (Exception e) {\n        throw new AWSSchemaRegistryException(e.getMessage(), e);\n    }\n\n    return bytes;\n}\n</code></pre>\n<p>With <code>writeHeaderVersionBytes(out)</code> and <code>writeCompressionBytes(out)</code> writing to the front of the stream, respectively:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// byte HEADER_VERSION_BYTE = (byte) 3;\nprivate void writeHeaderVersionBytes(ByteArrayOutputStream out) {\n    out.write(AWSSchemaRegistryConstants.HEADER_VERSION_BYTE);\n}\n\n// byte COMPRESSION_BYTE = (byte) 5\n// byte COMPRESSION_DEFAULT_BYTE = (byte) 0\nprivate void writeCompressionBytes(ByteArrayOutputStream out) {\n    out.write(compressionHandler != null ? AWSSchemaRegistryConstants.COMPRESSION_BYTE\n            : AWSSchemaRegistryConstants.COMPRESSION_DEFAULT_BYTE);\n}\n</code></pre>\n<p>Why is Kinesis unable to parse a message that is produced by the library that is supposed to be best suited for writing to it? What am I missing?</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":20867359,"reputation":101,"user_id":15328090,"display_name":"Igor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660134271,"creation_date":1660134271,"answer_id":73306286,"question_id":73306117,"body_markdown":"Perhaps you could create a separate class which would be responsible for creating `Measure` objects. There you could inject your `MeasureConstraint` beans and perform the logic of validating data before creating measures.\r\n\r\nSomething like that:\r\n\r\n    @Component\r\n    public class MeasureFactory {\r\n        @Autowired // actually it&#39;s better to inject via constructor\r\n        private List&lt;MeasureConstraint&gt; constraints;\r\n        \r\n\r\n        public Measure createMeasure(BigDecimal value, Unit unit) {\r\n            // perform validation using constraints\r\n            return new Measure(value, unit);\r\n        }\r\n    }","title":"How to check constraints before creating an object using Spring?","body":"<p>Perhaps you could create a separate class which would be responsible for creating <code>Measure</code> objects. There you could inject your <code>MeasureConstraint</code> beans and perform the logic of validating data before creating measures.</p>\n<p>Something like that:</p>\n<pre><code>@Component\npublic class MeasureFactory {\n    @Autowired // actually it's better to inject via constructor\n    private List&lt;MeasureConstraint&gt; constraints;\n    \n\n    public Measure createMeasure(BigDecimal value, Unit unit) {\n        // perform validation using constraints\n        return new Measure(value, unit);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23950021,"reputation":5,"user_id":19271356,"display_name":"Alexey"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":205,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73306286,"answer_count":1,"score":0,"last_activity_date":1660134271,"creation_date":1660133535,"question_id":73306117,"body_markdown":"I write my own unit converter. I have Measure.class, which have fields `BigDecimal value` and `Unit unit` (Unit.class is my own abstract class with many implementations, which means e.g. meter, inches, kelvin etc)\r\n\r\n    @Component\r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @FieldDefaults(level = AccessLevel.PRIVATE)\r\n    public class Measure {\r\n        BigDecimal value;\r\n        Unit unit;\r\n\r\n        public Measure(BigDecimal value, Unit unit) {\r\n            this.value = value;\r\n            this.unit = unit;\r\n        }\r\n    }\r\n\r\nAlso I&#39;ve created abstract MeasureConstraint.class with `check()` method and a lot of it&#39;s implemetations (like TemperatureConstraint.class). `check()` method should be called when object Measure created. \r\n\r\nWhat do I want to get, for example: \r\n\r\n    Measure measure = new Measure (5, *Kelvin*); // OK\r\n    Measure measure = new Measure (-5, *Kelvin*); // exception, Kelvin should be 0 or greater\r\n\r\nI&#39;ve tried to insert field `List&lt;MeasureConstraint&gt; constraints` to the Measure.class (and add this field to constructor parameters for @Autowired), filter by type this list to get needed constraint and call it&#39;s `check()` method in constructor.\r\n\r\nBut this solution makes it impossible for me to simple create Measure objects by myself (not using Spring) at the other classes in my application, because now I must create by myself `List&lt;MeasureConstraint&gt; constraints` too (I understand that Spring does not work in this situation). The reason I need to create Measure object by myself is because I need to create temporary variable during the conversion process.\r\n\r\nI just started learning Spring and do not completely understand conceptions of IoC and DI. Maybe I shouldn&#39;t use manual object creation ever and nowhere if I&#39;m using Spring? Should I inject all temporary variables as fields of my Converter.class and use them in `convert() method thus avoiding manual object creation? Please give me some advices.\r\n\r\n*Sory for my /Google translate/ English =)*","title":"How to check constraints before creating an object using Spring?","body":"<p>I write my own unit converter. I have Measure.class, which have fields <code>BigDecimal value</code> and <code>Unit unit</code> (Unit.class is my own abstract class with many implementations, which means e.g. meter, inches, kelvin etc)</p>\n<pre><code>@Component\n@Getter\n@Setter\n@NoArgsConstructor\n@FieldDefaults(level = AccessLevel.PRIVATE)\npublic class Measure {\n    BigDecimal value;\n    Unit unit;\n\n    public Measure(BigDecimal value, Unit unit) {\n        this.value = value;\n        this.unit = unit;\n    }\n}\n</code></pre>\n<p>Also I've created abstract MeasureConstraint.class with <code>check()</code> method and a lot of it's implemetations (like TemperatureConstraint.class). <code>check()</code> method should be called when object Measure created.</p>\n<p>What do I want to get, for example:</p>\n<pre><code>Measure measure = new Measure (5, *Kelvin*); // OK\nMeasure measure = new Measure (-5, *Kelvin*); // exception, Kelvin should be 0 or greater\n</code></pre>\n<p>I've tried to insert field <code>List&lt;MeasureConstraint&gt; constraints</code> to the Measure.class (and add this field to constructor parameters for @Autowired), filter by type this list to get needed constraint and call it's <code>check()</code> method in constructor.</p>\n<p>But this solution makes it impossible for me to simple create Measure objects by myself (not using Spring) at the other classes in my application, because now I must create by myself <code>List&lt;MeasureConstraint&gt; constraints</code> too (I understand that Spring does not work in this situation). The reason I need to create Measure object by myself is because I need to create temporary variable during the conversion process.</p>\n<p>I just started learning Spring and do not completely understand conceptions of IoC and DI. Maybe I shouldn't use manual object creation ever and nowhere if I'm using Spring? Should I inject all temporary variables as fields of my Converter.class and use them in `convert() method thus avoiding manual object creation? Please give me some advices.</p>\n<p><em>Sory for my /Google translate/ English =)</em></p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":26020744,"reputation":61,"user_id":19728482,"display_name":"Alex Roman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660061148,"creation_date":1660061148,"answer_id":73294889,"question_id":73294823,"body_markdown":"replaced \r\n\r\n    int durationOfProgram = scanner.nextInt();\r\nwith\r\n\r\n    int durationOfProgram = Integer.valueOf(scanner.nextLine());\r\n\r\nand now it works but i still don&#39;t get why","title":"Why does my while loop break after I add one object to the list","body":"<p>replaced</p>\n<pre><code>int durationOfProgram = scanner.nextInt();\n</code></pre>\n<p>with</p>\n<pre><code>int durationOfProgram = Integer.valueOf(scanner.nextLine());\n</code></pre>\n<p>and now it works but i still don't get why</p>\n"}],"owner":{"account_id":26020744,"reputation":61,"user_id":19728482,"display_name":"Alex Roman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1660061390,"answer_count":1,"score":-2,"last_activity_date":1660134178,"creation_date":1660060813,"question_id":73294823,"body_markdown":"I&#39;m doing the Java MOOC fi course. I&#39;m supposed to make a list of show names and durations, and print the ones that are shorten than certain duration.  \r\nI want the while loop to end after I enter a blank name but it ends after the first object I add to the list.\r\n\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Scanner;\r\n    \r\n    public class Main {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t// implement here your program that uses the TelevisionProgram class\r\n    \r\n    \t\tArrayList&lt;TelevisionProgram&gt; programs = new ArrayList&lt;&gt;();\r\n    \t\tScanner scanner = new Scanner(System.in);\r\n    \r\n    \t\twhile (true) {\r\n    \t\t\tSystem.out.print(&quot;Name: &quot;);\r\n    \t\t\tString programName = scanner.nextLine();\r\n    \t\t\tif (programName.isEmpty()) {\r\n    \t\t\t\tbreak;\r\n    \t\t\t}\r\n    \t\t\tSystem.out.print(&quot;Duration: &quot;);\r\n    \t\t\tint durationOfProgram = scanner.nextInt();\r\n    \t\t\tprograms.add(new TelevisionProgram(programName, durationOfProgram));\r\n    \t\t}\r\n    \t\tSystem.out.println();\r\n    \t\tSystem.out.print(&quot;Program&#39;s maximum duration? &quot;);\r\n    \t\tint maxDuration = scanner.nextInt();\r\n    \t\tfor (TelevisionProgram show : programs) {\r\n    \t\t\tif (show.getDuration() &lt;= maxDuration) {\r\n    \t\t\t\tSystem.out.println(show);\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t}\r\n    }","title":"Why does my while loop break after I add one object to the list","body":"<p>I'm doing the Java MOOC fi course. I'm supposed to make a list of show names and durations, and print the ones that are shorten than certain duration.<br />\nI want the while loop to end after I enter a blank name but it ends after the first object I add to the list.</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.Scanner;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        // implement here your program that uses the TelevisionProgram class\n\n        ArrayList&lt;TelevisionProgram&gt; programs = new ArrayList&lt;&gt;();\n        Scanner scanner = new Scanner(System.in);\n\n        while (true) {\n            System.out.print(&quot;Name: &quot;);\n            String programName = scanner.nextLine();\n            if (programName.isEmpty()) {\n                break;\n            }\n            System.out.print(&quot;Duration: &quot;);\n            int durationOfProgram = scanner.nextInt();\n            programs.add(new TelevisionProgram(programName, durationOfProgram));\n        }\n        System.out.println();\n        System.out.print(&quot;Program's maximum duration? &quot;);\n        int maxDuration = scanner.nextInt();\n        for (TelevisionProgram show : programs) {\n            if (show.getDuration() &lt;= maxDuration) {\n                System.out.println(show);\n            }\n        }\n\n    }\n}\n</code></pre>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1660134137,"post_id":73306208,"comment_id":129460280,"body_markdown":"You might try out a **maven** project with src/main/java/ and src/test/java/.","body":"You might try out a <b>maven</b> project with src/main/java/ and src/test/java/."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1660134159,"post_id":73306208,"comment_id":129460288,"body_markdown":"Do you have any folders marked as &quot;test source directory&quot;? How did you create your project? Purely in IDEA or using something like Maven/Gradle?","body":"Do you have any folders marked as &quot;test source directory&quot;? How did you create your project? Purely in IDEA or using something like Maven/Gradle?"},{"owner":{"account_id":14155962,"reputation":578,"user_id":10226695,"display_name":"Shavk with a Hoon"},"score":0,"creation_date":1660141373,"post_id":73306208,"comment_id":129463349,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":12340469,"reputation":82,"user_id":9003853,"display_name":"Bhala T R"},"score":0,"creation_date":1660211906,"post_id":73306208,"comment_id":129481535,"body_markdown":"In IntelliJ IDEA, go to File --&gt; Project Structure --&gt; Project --&gt; Compiler output, there select the appropriate folder/directory to have the generated test classes. Also, you can ignore those generated test classes in .gitignore if you don&#39;t want to commit to a remote repository.","body":"In IntelliJ IDEA, go to File --&gt; Project Structure --&gt; Project --&gt; Compiler output, there select the appropriate folder/directory to have the generated test classes. Also, you can ignore those generated test classes in .gitignore if you don&#39;t want to commit to a remote repository."}],"owner":{"account_id":20627330,"reputation":1,"user_id":15142871,"display_name":"mikkkkk"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660133903,"creation_date":1660133903,"question_id":73306208,"body_markdown":"I&#39;m using idea to generate test class after clicking right mouse button by using JUnit ，However the test class will be in /src fold，But I want this test class will be in  out of /src to keep my project clear，How can i deal question to change the default generated test class location...","title":"how change the default generated test class in IDEA？","body":"<p>I'm using idea to generate test class after clicking right mouse button by using JUnit ，However the test class will be in /src fold，But I want this test class will be in  out of /src to keep my project clear，How can i deal question to change the default generated test class location...</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":8425000,"reputation":1382,"user_id":6322589,"accept_rate":57,"display_name":"lucasvw"},"score":0,"creation_date":1467049253,"post_id":38059596,"comment_id":63558938,"body_markdown":"Can you provide an example of numbers that you expect to work, but that aren&#39;t working as you expect?","body":"Can you provide an example of numbers that you expect to work, but that aren&#39;t working as you expect?"},{"owner":{"account_id":8699749,"reputation":1117,"user_id":6510058,"accept_rate":62,"display_name":"leonz"},"score":0,"creation_date":1467049435,"post_id":38059596,"comment_id":63559026,"body_markdown":"Well for example, if I have number that is pi rounded to 20 decimals. That wouldn&#39;t work because Expression.PI is rounded to 100 decimals.","body":"Well for example, if I have number that is pi rounded to 20 decimals. That wouldn&#39;t work because Expression.PI is rounded to 100 decimals."},{"owner":{"account_id":8425000,"reputation":1382,"user_id":6322589,"accept_rate":57,"display_name":"lucasvw"},"score":0,"creation_date":1467049657,"post_id":38059596,"comment_id":63559153,"body_markdown":"So you&#39;re sure you have `d` equal to **exactly** pi rounded to 20 places? For one thing, it is hard to believe you need that much precision. You could try rounding to, say 5 places and see what happens.","body":"So you&#39;re sure you have <code>d</code> equal to <b>exactly</b> pi rounded to 20 places? For one thing, it is hard to believe you need that much precision. You could try rounding to, say 5 places and see what happens."},{"owner":{"account_id":8699749,"reputation":1117,"user_id":6510058,"accept_rate":62,"display_name":"leonz"},"score":0,"creation_date":1467050695,"post_id":38059596,"comment_id":63559684,"body_markdown":"It was just an example to clarify the question. And the question way not how much precision I need. Anyway, it really isn&#39;t important, the way to do this is important. Once I find out how to do this, I can simply change precision.","body":"It was just an example to clarify the question. And the question way not how much precision I need. Anyway, it really isn&#39;t important, the way to do this is important. Once I find out how to do this, I can simply change precision."},{"owner":{"account_id":8425000,"reputation":1382,"user_id":6322589,"accept_rate":57,"display_name":"lucasvw"},"score":1,"creation_date":1467051898,"post_id":38059596,"comment_id":63560341,"body_markdown":"But I&#39;m pretty sure what you have **is** the way to do this. That&#39;s why I&#39;m curious about the exact values you have tried.","body":"But I&#39;m pretty sure what you have <b>is</b> the way to do this. That&#39;s why I&#39;m curious about the exact values you have tried."},{"owner":{"account_id":8699749,"reputation":1117,"user_id":6510058,"accept_rate":62,"display_name":"leonz"},"score":0,"creation_date":1467052099,"post_id":38059596,"comment_id":63560456,"body_markdown":"Hmm. Then the problem might be somewhere else in my code. Thank you","body":"Hmm. Then the problem might be somewhere else in my code. Thank you"}],"answers":[{"tags":[],"owner":{"account_id":322545,"reputation":2399,"user_id":642006,"display_name":"Mike"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1467057020,"creation_date":1467057020,"answer_id":38062133,"question_id":38059596,"body_markdown":"As lucasvw mentioned in the comments, I think you&#39;re already doing it correctly and there must be a problem with your &#39;d&#39; value. Here is a test class that shows the correct result.\r\n\r\n    import java.math.BigDecimal;\r\n    import java.math.RoundingMode;\r\n\r\n    public class BigDecimalTest {\r\n\t\r\n\tpublic static void main(String args[]) {\r\n\t\tBigDecimal PI = new BigDecimal(&quot;3.14159265358979323846264338327950288419&quot;);\r\n\t\tBigDecimal otherValue = new BigDecimal(&quot;3.14159&quot;);\r\n\t\t\r\n\t\tboolean test = PI.setScale(5, RoundingMode.HALF_UP).compareTo(otherValue) == 0;\r\n\t\t\r\n\t\tSystem.out.println(&quot;compareTo: &quot; + test);\r\n\t}\r\n    }","title":"How to compare BigDecimal, but approximately?","body":"<p>As lucasvw mentioned in the comments, I think you're already doing it correctly and there must be a problem with your 'd' value. Here is a test class that shows the correct result.</p>\n\n<pre><code>import java.math.BigDecimal;\nimport java.math.RoundingMode;\n\npublic class BigDecimalTest {\n\npublic static void main(String args[]) {\n    BigDecimal PI = new BigDecimal(\"3.14159265358979323846264338327950288419\");\n    BigDecimal otherValue = new BigDecimal(\"3.14159\");\n\n    boolean test = PI.setScale(5, RoundingMode.HALF_UP).compareTo(otherValue) == 0;\n\n    System.out.println(\"compareTo: \" + test);\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1144833,"reputation":7270,"user_id":1127843,"accept_rate":86,"display_name":"kayz1"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660133876,"creation_date":1660133876,"answer_id":73306200,"question_id":38059596,"body_markdown":"    public static final boolean isWithinTolerance(final BigDecimal bigDecimal1, final BigDecimal bigDecimal2, final BigDecimal tolerance)\r\n\t{\r\n\t\tif (bigDecimal1 == null || bigDecimal2 == null || tolerance == null)\r\n\t\t{\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfinal BigDecimal diff = bigDecimal1.abs().subtract(bigDecimal2.abs()).abs();\r\n\r\n\t\treturn diff.compareTo(tolerance) &lt; 0;\r\n\t}","title":"How to compare BigDecimal, but approximately?","body":"<pre><code>public static final boolean isWithinTolerance(final BigDecimal bigDecimal1, final BigDecimal bigDecimal2, final BigDecimal tolerance)\n{\n    if (bigDecimal1 == null || bigDecimal2 == null || tolerance == null)\n    {\n        return false;\n    }\n\n    final BigDecimal diff = bigDecimal1.abs().subtract(bigDecimal2.abs()).abs();\n\n    return diff.compareTo(tolerance) &lt; 0;\n}\n</code></pre>\n"}],"owner":{"account_id":8699749,"reputation":1117,"user_id":6510058,"accept_rate":62,"display_name":"leonz"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5711,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1660133876,"creation_date":1467047530,"question_id":38059596,"body_markdown":"I have this code:\r\n\r\n    BigDecimal d = ...;\r\n    if (d.compareTo(Expression.PI) == 0) {\r\n        //do something\r\n    }\r\n\r\nwhere Expression.PI is pi rounded to 100th decimal.\r\n\r\nBut I don&#39;t need to compare if d is equal to pi with up to 100 decimals, but only let&#39;s say up to 20th decimal. To put it other way, how to check if d is approximately equal to pi?\r\n\r\nI tried \r\n\r\n    Expression.PI.setScale(20, RoundingMode.HALF_UP).compareTo(d.setScale(20, RoundingMode.HALF_UP)) == 0;\r\n\r\nand \r\n\r\n    Expression.PI.setScale(20, RoundingMode.HALF_UP).compareTo(d) == 0;\r\n\r\nBut none of these two seem to work. What am I doing wrong here?\r\n","title":"How to compare BigDecimal, but approximately?","body":"<p>I have this code:</p>\n\n<pre><code>BigDecimal d = ...;\nif (d.compareTo(Expression.PI) == 0) {\n    //do something\n}\n</code></pre>\n\n<p>where Expression.PI is pi rounded to 100th decimal.</p>\n\n<p>But I don't need to compare if d is equal to pi with up to 100 decimals, but only let's say up to 20th decimal. To put it other way, how to check if d is approximately equal to pi?</p>\n\n<p>I tried </p>\n\n<pre><code>Expression.PI.setScale(20, RoundingMode.HALF_UP).compareTo(d.setScale(20, RoundingMode.HALF_UP)) == 0;\n</code></pre>\n\n<p>and </p>\n\n<pre><code>Expression.PI.setScale(20, RoundingMode.HALF_UP).compareTo(d) == 0;\n</code></pre>\n\n<p>But none of these two seem to work. What am I doing wrong here?</p>\n"},{"tags":["java","spring","jpa"],"answers":[{"tags":[],"owner":{"account_id":8627776,"reputation":593,"user_id":6460453,"display_name":"K.Nikita"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660133829,"creation_date":1660133829,"answer_id":73306187,"question_id":73305131,"body_markdown":"I&#39;m not like this solution, but this is work:\r\n\r\n\r\n    public Parent mainMethod(long parentId) {\r\n        Parent parent = parentRepository.findById(parentId)\r\n            .orElseThrow(() -&gt; new Exception(String.format(&quot;Not found %s&quot;, parentId)));\r\n            \r\n        Parent updatedParent = new Parent();\r\n        updatedParen.setId(parent.getId())\r\n        ...\r\n        // map all values from parent to updatedParent\r\n        \r\n        \r\n        Child child = new Child();\r\n        child.setParent(updatedParent);\r\n        Set&lt;Child&gt; childSet = new HashSet&lt;&gt;();\r\n        childSet.add(child);\r\n        parent.setChildren(childSet);\r\n        \r\n        updatedParent = parentRepository.save(updatedParent);\r\n    \r\n        return updatedParent;\r\n    }","title":"How to delete children in JPA correctly with nullable=false columns","body":"<p>I'm not like this solution, but this is work:</p>\n<pre><code>public Parent mainMethod(long parentId) {\n    Parent parent = parentRepository.findById(parentId)\n        .orElseThrow(() -&gt; new Exception(String.format(&quot;Not found %s&quot;, parentId)));\n        \n    Parent updatedParent = new Parent();\n    updatedParen.setId(parent.getId())\n    ...\n    // map all values from parent to updatedParent\n    \n    \n    Child child = new Child();\n    child.setParent(updatedParent);\n    Set&lt;Child&gt; childSet = new HashSet&lt;&gt;();\n    childSet.add(child);\n    parent.setChildren(childSet);\n    \n    updatedParent = parentRepository.save(updatedParent);\n\n    return updatedParent;\n}\n</code></pre>\n"}],"owner":{"account_id":26026095,"reputation":1,"user_id":19732988,"display_name":"ztde7spdjq"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":301,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660133829,"creation_date":1660129313,"question_id":73305131,"body_markdown":"I have the following schema in my code:\r\n\r\n```java\r\n\r\nclass Parent {\r\n\r\n\tlong id;\r\n\t\r\n\t@OneToMany(\r\n        mappedBy = &quot;parent&quot;, //parent is in Child class\r\n        cascade = CascadeType.ALL,\r\n        orphanRemoval = true,\r\n        targetEntity = Child.class)\r\n    @ToString.Exclude\r\n    @Builder.Default\r\n\tSet&lt;Child&gt; children;\r\n\t\r\n\tpublic Set&lt;Child&gt; getChildren() {\r\n        return this.children;\r\n    }\r\n}\r\n\r\nclass Child {\r\n\r\n\tlong id;\r\n\t\r\n\t@ManyToOne(targetEntity = Parent.class, optional = false)\r\n    @JoinColumn(name = &quot;parent_id&quot;, foreignKey = @ForeignKey(name = &quot;fk_child_parent&quot;))\r\n    @ToString.Exclude\r\n    @EqualsAndHashCode.Exclude\r\n\tParent parent;\r\n\t\r\n\t// parent is in GrandChild class\r\n\t@OneToMany(mappedBy = &quot;parent&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\r\n    @ToString.Exclude\r\n    @Builder.Default\r\n\tSet&lt;GrandChild&gt; grandChildren;\r\n\t\r\n\t@Column(nullable = false)\r\n    private boolean deleted;\r\n}\r\n\r\nclass GrandChild {\r\n\r\n\tlong id;\r\n\t\r\n\t@ManyToOne(targetEntity = Child.class, optional = false)\r\n    @JoinColumn(name = &quot;child_id&quot;, foreignKey = @ForeignKey(name = &quot;fk_grandchild_child&quot;))\r\n    @ToString.Exclude\r\n    @EqualsAndHashCode.Exclude\r\n\tChild parent;\r\n}\r\n\r\n```\r\n\r\nWhat I want to do is, I want to find existing entities (parent entity) in database, delete its children (child and grandchild), and then create a new child and grandchild entities and assign to the parent and save.\r\n\r\n```java\r\n// service class\r\npublic Parent mainMethod(long parentId) {\r\n\tParent parent = parentRepository.findById(parentId)\r\n\t\t.orElseThrow(() -&gt; new Exception(String.format(&quot;Not found %s&quot;, parentId)));\r\n\t\t\r\n\tparent.getChildren().clear();\r\n\tparentRepository.saveAndFlush(parent);\r\n\t\r\n\t// for simplicity, ignore grandchild\r\n\tChild child = new Child();\r\n\tchild.setParent(parent);\r\n\tparent.getChildren().add(child);\r\n\t\r\n    parent = parentRepository.save(parent);\r\n\r\n\tsomeAuditRepository.save(parent);\r\n\treturn parent;\r\n}\r\n```\r\n\r\nJust when I return from the function, I am receiving the following error (note that, since I have simplified some fields, the PLSQL statement is kind of long)\r\n\r\n```\r\n2022-08-10 12:47:25.313 ERROR 4744 --- [nio-8080-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : ERROR: null value in column &quot;deleted&quot; violates not-null constraint\r\n  Detail: Failing row contains (499881, 39924, 2, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null).\r\n\r\norg.springframework.orm.jpa.JpaSystemException: Unable to perform beforeTransactionCompletion callback: org.hibernate.exception.ConstraintViolationException: could not execute statement; nested exception is org.hibernate.HibernateException: Unable to perform beforeTransactionCompletion callback: org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\r\nCaused by: org.postgresql.util.PSQLException: ERROR: null value in column &quot;deleted&quot; violates not-null constraint\r\n  Detail: Failing row contains (499881, 39924, 2, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null).\r\n```\r\n\r\nI know that it happens because the `@Column(nullable = false)` in deleted field of Child class. However, I need this nullable property. How can I delete existing entries completely, and then add new ones without facing this error? Also, I do not know at what point I am receiving this error. There are several invoked methods and what I know that it happens after the return statement.\r\n\r\nThere is no &quot;Transactional&quot; attribute on the method. The method is called from a REST endpoint directly (Rest controller calls the service method, that&#39;s it).\r\n\r\n```java\r\n// Rest controller\r\npublic ResponseEntity&lt;Parent&gt; someMethod(@PathVariable long parentId) {\r\n     Parent created = service.mainMethod(parentId);\r\n     return ResponseEntity.ok(created);\r\n}\r\n```","title":"How to delete children in JPA correctly with nullable=false columns","body":"<p>I have the following schema in my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nclass Parent {\n\n    long id;\n    \n    @OneToMany(\n        mappedBy = &quot;parent&quot;, //parent is in Child class\n        cascade = CascadeType.ALL,\n        orphanRemoval = true,\n        targetEntity = Child.class)\n    @ToString.Exclude\n    @Builder.Default\n    Set&lt;Child&gt; children;\n    \n    public Set&lt;Child&gt; getChildren() {\n        return this.children;\n    }\n}\n\nclass Child {\n\n    long id;\n    \n    @ManyToOne(targetEntity = Parent.class, optional = false)\n    @JoinColumn(name = &quot;parent_id&quot;, foreignKey = @ForeignKey(name = &quot;fk_child_parent&quot;))\n    @ToString.Exclude\n    @EqualsAndHashCode.Exclude\n    Parent parent;\n    \n    // parent is in GrandChild class\n    @OneToMany(mappedBy = &quot;parent&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\n    @ToString.Exclude\n    @Builder.Default\n    Set&lt;GrandChild&gt; grandChildren;\n    \n    @Column(nullable = false)\n    private boolean deleted;\n}\n\nclass GrandChild {\n\n    long id;\n    \n    @ManyToOne(targetEntity = Child.class, optional = false)\n    @JoinColumn(name = &quot;child_id&quot;, foreignKey = @ForeignKey(name = &quot;fk_grandchild_child&quot;))\n    @ToString.Exclude\n    @EqualsAndHashCode.Exclude\n    Child parent;\n}\n\n</code></pre>\n<p>What I want to do is, I want to find existing entities (parent entity) in database, delete its children (child and grandchild), and then create a new child and grandchild entities and assign to the parent and save.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// service class\npublic Parent mainMethod(long parentId) {\n    Parent parent = parentRepository.findById(parentId)\n        .orElseThrow(() -&gt; new Exception(String.format(&quot;Not found %s&quot;, parentId)));\n        \n    parent.getChildren().clear();\n    parentRepository.saveAndFlush(parent);\n    \n    // for simplicity, ignore grandchild\n    Child child = new Child();\n    child.setParent(parent);\n    parent.getChildren().add(child);\n    \n    parent = parentRepository.save(parent);\n\n    someAuditRepository.save(parent);\n    return parent;\n}\n</code></pre>\n<p>Just when I return from the function, I am receiving the following error (note that, since I have simplified some fields, the PLSQL statement is kind of long)</p>\n<pre><code>2022-08-10 12:47:25.313 ERROR 4744 --- [nio-8080-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : ERROR: null value in column &quot;deleted&quot; violates not-null constraint\n  Detail: Failing row contains (499881, 39924, 2, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null).\n\norg.springframework.orm.jpa.JpaSystemException: Unable to perform beforeTransactionCompletion callback: org.hibernate.exception.ConstraintViolationException: could not execute statement; nested exception is org.hibernate.HibernateException: Unable to perform beforeTransactionCompletion callback: org.hibernate.exception.ConstraintViolationException: could not execute statement\n\nCaused by: org.postgresql.util.PSQLException: ERROR: null value in column &quot;deleted&quot; violates not-null constraint\n  Detail: Failing row contains (499881, 39924, 2, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null).\n</code></pre>\n<p>I know that it happens because the <code>@Column(nullable = false)</code> in deleted field of Child class. However, I need this nullable property. How can I delete existing entries completely, and then add new ones without facing this error? Also, I do not know at what point I am receiving this error. There are several invoked methods and what I know that it happens after the return statement.</p>\n<p>There is no &quot;Transactional&quot; attribute on the method. The method is called from a REST endpoint directly (Rest controller calls the service method, that's it).</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Rest controller\npublic ResponseEntity&lt;Parent&gt; someMethod(@PathVariable long parentId) {\n     Parent created = service.mainMethod(parentId);\n     return ResponseEntity.ok(created);\n}\n</code></pre>\n"},{"tags":["java","jpa","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":10309761,"reputation":944,"user_id":7605967,"display_name":"Keshavram Kuduwa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660133554,"creation_date":1660133554,"answer_id":73306124,"question_id":73306123,"body_markdown":"To achieve this, we can pass in the parameter the same way we accept a parameter in Query DSL. So for example, if we want to sort all the `Surveys` with respect to `teamName`, we have to simply pass `team_teamName` as property to `Sort.by` method i.e. `Sort sort = Sort.by(Sort.Direction.ASC, &quot;team_teamName&quot;);`","title":"Spring Data JPA Sort with Nested Object&#39;s Property","body":"<p>To achieve this, we can pass in the parameter the same way we accept a parameter in Query DSL. So for example, if we want to sort all the <code>Surveys</code> with respect to <code>teamName</code>, we have to simply pass <code>team_teamName</code> as property to <code>Sort.by</code> method i.e. <code>Sort sort = Sort.by(Sort.Direction.ASC, &quot;team_teamName&quot;);</code></p>\n"}],"owner":{"account_id":10309761,"reputation":944,"user_id":7605967,"display_name":"Keshavram Kuduwa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1091,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73306124,"answer_count":1,"score":0,"last_activity_date":1660133554,"creation_date":1660133554,"question_id":73306123,"body_markdown":"Consider the following structure:\r\n```java\r\npublic class Survey {\r\n  @ManyToOne\r\n  @JoinColumn(name = &quot;team_id&quot;)\r\n  private Team team;\r\n}\r\n\r\npublic class Team {\r\n  private String teamName;\r\n}\r\n```\r\nI&#39;ve created a REST endpoint to get all surveys. It also provides paging and sorting capabilities:\r\n```java\r\n  @GetMapping(&quot;/all&quot;)\r\n  public ResponseEntity&lt;SurveyListViewResponse&gt; getAllSurveys(\r\n      @RequestParam(required = false) String userName,\r\n      @RequestParam(required = false) String userEmail,\r\n      @RequestParam(required = false) String teamName,\r\n      @RequestParam(value = &quot;quarter&quot;, required = false) String namedQuarter,\r\n      @RequestParam(defaultValue = &quot;id&quot;) String orderBy,\r\n      @RequestParam(defaultValue = &quot;DESC&quot;) Sort.Direction direction,\r\n      @RequestParam(defaultValue = AppConstant.DEFAULT_PAGE) int page,\r\n      @RequestParam(defaultValue = AppConstant.DEFAULT_PAGE_SIZE) int size,\r\n      @RequestParam(required = false) SurveyStatus status) {\r\n\r\n    Sort sort = Sort.by(direction, orderBy);\r\n    Pageable paging = PageRequest.of(page, size, sort);\r\n\r\n    SurveyListViewResponse surveyListViewResponse =\r\n        surveyService.findAllSurveys(surveySpecification, paging);\r\n\r\n    return ResponseEntity.status(HttpStatus.OK).body(surveyListViewResponse);\r\n  }\r\n```\r\nSo while accepting `orderBy`, there&#39;s a requirement to sort with properties within the nested objects like `teamName`, `userName`, `userEmail`, etc.\r\n\r\nPassing these properties to the `Sort.by` method is not possible.","title":"Spring Data JPA Sort with Nested Object&#39;s Property","body":"<p>Consider the following structure:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Survey {\n  @ManyToOne\n  @JoinColumn(name = &quot;team_id&quot;)\n  private Team team;\n}\n\npublic class Team {\n  private String teamName;\n}\n</code></pre>\n<p>I've created a REST endpoint to get all surveys. It also provides paging and sorting capabilities:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @GetMapping(&quot;/all&quot;)\n  public ResponseEntity&lt;SurveyListViewResponse&gt; getAllSurveys(\n      @RequestParam(required = false) String userName,\n      @RequestParam(required = false) String userEmail,\n      @RequestParam(required = false) String teamName,\n      @RequestParam(value = &quot;quarter&quot;, required = false) String namedQuarter,\n      @RequestParam(defaultValue = &quot;id&quot;) String orderBy,\n      @RequestParam(defaultValue = &quot;DESC&quot;) Sort.Direction direction,\n      @RequestParam(defaultValue = AppConstant.DEFAULT_PAGE) int page,\n      @RequestParam(defaultValue = AppConstant.DEFAULT_PAGE_SIZE) int size,\n      @RequestParam(required = false) SurveyStatus status) {\n\n    Sort sort = Sort.by(direction, orderBy);\n    Pageable paging = PageRequest.of(page, size, sort);\n\n    SurveyListViewResponse surveyListViewResponse =\n        surveyService.findAllSurveys(surveySpecification, paging);\n\n    return ResponseEntity.status(HttpStatus.OK).body(surveyListViewResponse);\n  }\n</code></pre>\n<p>So while accepting <code>orderBy</code>, there's a requirement to sort with properties within the nested objects like <code>teamName</code>, <code>userName</code>, <code>userEmail</code>, etc.</p>\n<p>Passing these properties to the <code>Sort.by</code> method is not possible.</p>\n"},{"tags":["java","spring-boot","spring-websocket"],"answers":[{"tags":[],"owner":{"account_id":19052762,"reputation":31,"user_id":13910577,"display_name":"edurric"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660133368,"creation_date":1660133368,"answer_id":73306082,"question_id":73278967,"body_markdown":"I had not realized, I was using a &quot;gateway&quot; component, and that is where the maximum payload was configured by default to 64K. By setting the property like in [this answer][1] I was able to fix the issue.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/58216046/how-to-increase-websocketmaxframepayloadlength-in-httpclientconfiguration","title":"Spring WebSocketMessageBroker - Cannot send messages longer than 64KB, and cannot increase limit via configuration","body":"<p>I had not realized, I was using a &quot;gateway&quot; component, and that is where the maximum payload was configured by default to 64K. By setting the property like in <a href=\"https://stackoverflow.com/questions/58216046/how-to-increase-websocketmaxframepayloadlength-in-httpclientconfiguration\">this answer</a> I was able to fix the issue.</p>\n"}],"owner":{"account_id":19052762,"reputation":31,"user_id":13910577,"display_name":"edurric"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":520,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73306082,"answer_count":1,"score":2,"last_activity_date":1660133368,"creation_date":1659966584,"question_id":73278967,"body_markdown":"I have an app with a front-end in React and back-end in Java &amp; Spring Boot.\r\n\r\nThe front-end subscribes to many topics via websockets, and it always goes fine, except when the messages are too long. It turns out, when the websocket message is longer than 64KB, the message is not sent, but no error is reported. Plus, any subsequent attempts to send more messages on that connection, even if the message is short, are also lost.\r\n\r\nOn the back-end, first we configure the websocket.\r\nI tried the suggestions of other answers that say to increase size limits: [here][1] and [here][2], but none of them worked. It seems that those values are ignored altogether, as if I set a ridiculously low value, longer messages can still go through (if less than 64K).\r\n\r\n    @Configuration\r\n    @EnableWebSocketMessageBroker\r\n    public class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\r\n        @Override\r\n        public void configureMessageBroker(MessageBrokerRegistry config)\r\n        {\r\n            config.enableSimpleBroker(&quot;/ws&quot;);\r\n        }\r\n        @Override\r\n        public void registerStompEndpoints(StompEndpointRegistry registry)\r\n        {\r\n            registry.addEndpoint(&quot;/ws&quot;).setAllowedOriginPatterns(&quot;*&quot;).withSockJS();\r\n        }\r\n    \r\n        @Override\r\n        public void configureWebSocketTransport(WebSocketTransportRegistration registry)\r\n        {\r\n            registry.setMessageSizeLimit(1000000);\r\n            registry.setSendBufferSizeLimit(1000000);\r\n            registry.setSendTimeLimit(100000);\r\n        }\r\n    }\r\n\r\nHere is a simplified example that sends the websocket messages, that I have also tested and continues to have the same issue. Just calling an HTTP endpoint from the application so it will trigger the notification.\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/greeting&quot;)\r\n    public class GreetingController {\r\n    \r\n        @Autowired\r\n        private SimpMessagingTemplate messageTemplate;\r\n        \r\n        @GetMapping(&quot;/{length}&quot;)\r\n        public ResponseEntity&lt;?&gt; sendGreeting(@PathVariable int length)\r\n        {\r\n            String destination = &quot;/ws/subscribedGreeting&quot;;\r\n            \r\n            char[] charArray = new char[length];\r\n            Arrays.fill(charArray, &#39;*&#39;);\r\n            String messageString = new String(charArray);\r\n            \r\n            messageTemplate.convertAndSend(destination, messageString);\r\n    \r\n            return ResponseEntity.noContent().build();\r\n        }\r\n    }\r\n\r\nAnd sample code in the front-end:\r\n\r\n    import SockJS        from &#39;sockjs-client&#39;;\r\n    import Stomp         from &#39;stomp-websocket&#39;;\r\n\r\n    ...\r\n\r\n    useEffect(() =&gt; {\r\n      const sock        = new SockJS(&#39;my-ws-url&#39;); // replace depending on your environment\r\n      const stompClient = Stomp.over(sock);\r\n\r\n      stompClient.connect({}, () =&gt; {\r\n        stompClient.subscribe(&#39;/ws/subscribedGreeting&#39;, (messageFromSocket) =&gt; {\r\n          console.log(`Message! ${messageFromSocket.body.length}`);\r\n        });\r\n      });\r\n    }, []);\r\n\r\nAnd finally, make calls to the `/greeting/{length}` endpoint. I just did it with Postman for quick testing.\r\n\r\nWorks well (logs to console the length) if I call with low length values: `/greeting/100`, `/greeting/10000`, `/greeting/60000`, but if I set `greeting/70000`, the message is not received and any further calls will not work (but it&#39;s OK for any new subscriptions). The worst part is that there are no logs of any sort reporting a problem.\r\n\r\nI have been looking for alternatives for a couple of days now but have not found any answer.\r\n\r\nAny ideas? How is it that the values I configured do not work? Perhaps there is an alternate way to set the size limits?\r\n\r\nThanks in advance.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/51120587/13910577\r\n  [2]: https://stackoverflow.com/a/57771476/13910577","title":"Spring WebSocketMessageBroker - Cannot send messages longer than 64KB, and cannot increase limit via configuration","body":"<p>I have an app with a front-end in React and back-end in Java &amp; Spring Boot.</p>\n<p>The front-end subscribes to many topics via websockets, and it always goes fine, except when the messages are too long. It turns out, when the websocket message is longer than 64KB, the message is not sent, but no error is reported. Plus, any subsequent attempts to send more messages on that connection, even if the message is short, are also lost.</p>\n<p>On the back-end, first we configure the websocket.\nI tried the suggestions of other answers that say to increase size limits: <a href=\"https://stackoverflow.com/a/51120587/13910577\">here</a> and <a href=\"https://stackoverflow.com/a/57771476/13910577\">here</a>, but none of them worked. It seems that those values are ignored altogether, as if I set a ridiculously low value, longer messages can still go through (if less than 64K).</p>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\n    @Override\n    public void configureMessageBroker(MessageBrokerRegistry config)\n    {\n        config.enableSimpleBroker(&quot;/ws&quot;);\n    }\n    @Override\n    public void registerStompEndpoints(StompEndpointRegistry registry)\n    {\n        registry.addEndpoint(&quot;/ws&quot;).setAllowedOriginPatterns(&quot;*&quot;).withSockJS();\n    }\n\n    @Override\n    public void configureWebSocketTransport(WebSocketTransportRegistration registry)\n    {\n        registry.setMessageSizeLimit(1000000);\n        registry.setSendBufferSizeLimit(1000000);\n        registry.setSendTimeLimit(100000);\n    }\n}\n</code></pre>\n<p>Here is a simplified example that sends the websocket messages, that I have also tested and continues to have the same issue. Just calling an HTTP endpoint from the application so it will trigger the notification.</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/greeting&quot;)\npublic class GreetingController {\n\n    @Autowired\n    private SimpMessagingTemplate messageTemplate;\n    \n    @GetMapping(&quot;/{length}&quot;)\n    public ResponseEntity&lt;?&gt; sendGreeting(@PathVariable int length)\n    {\n        String destination = &quot;/ws/subscribedGreeting&quot;;\n        \n        char[] charArray = new char[length];\n        Arrays.fill(charArray, '*');\n        String messageString = new String(charArray);\n        \n        messageTemplate.convertAndSend(destination, messageString);\n\n        return ResponseEntity.noContent().build();\n    }\n}\n</code></pre>\n<p>And sample code in the front-end:</p>\n<pre><code>import SockJS        from 'sockjs-client';\nimport Stomp         from 'stomp-websocket';\n\n...\n\nuseEffect(() =&gt; {\n  const sock        = new SockJS('my-ws-url'); // replace depending on your environment\n  const stompClient = Stomp.over(sock);\n\n  stompClient.connect({}, () =&gt; {\n    stompClient.subscribe('/ws/subscribedGreeting', (messageFromSocket) =&gt; {\n      console.log(`Message! ${messageFromSocket.body.length}`);\n    });\n  });\n}, []);\n</code></pre>\n<p>And finally, make calls to the <code>/greeting/{length}</code> endpoint. I just did it with Postman for quick testing.</p>\n<p>Works well (logs to console the length) if I call with low length values: <code>/greeting/100</code>, <code>/greeting/10000</code>, <code>/greeting/60000</code>, but if I set <code>greeting/70000</code>, the message is not received and any further calls will not work (but it's OK for any new subscriptions). The worst part is that there are no logs of any sort reporting a problem.</p>\n<p>I have been looking for alternatives for a couple of days now but have not found any answer.</p>\n<p>Any ideas? How is it that the values I configured do not work? Perhaps there is an alternate way to set the size limits?</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"score":0,"creation_date":1660145240,"post_id":73306015,"comment_id":129464984,"body_markdown":"Can you explain a bit further why you need this? Is your intention to read from the logs whenever the query is executed? If that&#39;s the case, why not simply log a message right before you call the query? As for the reason: JPA requires constants in order to work. Any type of variable would throw an error (I&#39;ve tried that myself for a different purpose). The closer you can get to this is by using the EntityManager directly.","body":"Can you explain a bit further why you need this? Is your intention to read from the logs whenever the query is executed? If that&#39;s the case, why not simply log a message right before you call the query? As for the reason: JPA requires constants in order to work. Any type of variable would throw an error (I&#39;ve tried that myself for a different purpose). The closer you can get to this is by using the EntityManager directly."},{"owner":{"account_id":4308682,"reputation":12623,"user_id":3520404,"display_name":"saran3h"},"score":0,"creation_date":1660190832,"post_id":73306015,"comment_id":129475803,"body_markdown":"I’m investigating a problem with Splunk potentially not capturing all the query logs. This query will be fired by 100users at once as part of a performance test suit. The logs that I get from database supposedly shows far more queries than Splunk. Couldn’t find an easier way to compare and find which query is missing (if any).","body":"I’m investigating a problem with Splunk potentially not capturing all the query logs. This query will be fired by 100users at once as part of a performance test suit. The logs that I get from database supposedly shows far more queries than Splunk. Couldn’t find an easier way to compare and find which query is missing (if any)."},{"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"score":0,"creation_date":1660228212,"post_id":73306015,"comment_id":129487690,"body_markdown":"Well, I unfortunately (to me) cannot say I understand, but at least is clearer why you&#39;d need this. I can provide a very simple example of direct EntityManager usage if you&#39;d like, but I suspect it won&#39;t be of much use in the end","body":"Well, I unfortunately (to me) cannot say I understand, but at least is clearer why you&#39;d need this. I can provide a very simple example of direct EntityManager usage if you&#39;d like, but I suspect it won&#39;t be of much use in the end"}],"owner":{"account_id":4308682,"reputation":12623,"user_id":3520404,"display_name":"saran3h"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660133058,"creation_date":1660133058,"question_id":73306015,"body_markdown":"I&#39;m in a unique situation where I need to include a unique random number as a comment within a query in order to debug an issue.\r\n\r\nI&#39;m using @NamedNativeQuery as below:\r\n\r\nEntity.java\r\n\r\n```\r\n@NamedNativeQuery(\r\n\t\tname = &quot;myQuery&quot;,\r\n\t\tquery = NativeQuery.MY_QUERY, // throws compilation error\r\n\t\tresultSetMapping = &quot;someEntityMapping&quot;\r\n)\r\n@Table(name = &quot;my_table&quot;)\r\npublic class MyEntity {\r\n...\r\n}\r\n```\r\n\r\n\r\nHere is `MY_QUERY`:\r\n```\r\npublic final class NativeQuery {\r\nprivate NativeQuery() {\r\n\t}\r\n\r\npublic static final String ACCOUNT_HISTORY_BY_PARTY_ID = &quot;/*[ID: &quot; + RandomStringUtils.randomNumeric(8) + &quot;]*/ SELECT col_1 FROM ABC&quot;;\r\n}\r\n```\r\n\r\nThe code does not compile stating that I need a constant value in the attribute.\r\n\r\nIs there any other way to achieve that? I cannot include an additional column in the table as that&#39;s simply not allowed.","title":"Use dynamic named query (@NamedNativeQuery) in Spring data JPA","body":"<p>I'm in a unique situation where I need to include a unique random number as a comment within a query in order to debug an issue.</p>\n<p>I'm using @NamedNativeQuery as below:</p>\n<p>Entity.java</p>\n<pre><code>@NamedNativeQuery(\n        name = &quot;myQuery&quot;,\n        query = NativeQuery.MY_QUERY, // throws compilation error\n        resultSetMapping = &quot;someEntityMapping&quot;\n)\n@Table(name = &quot;my_table&quot;)\npublic class MyEntity {\n...\n}\n</code></pre>\n<p>Here is <code>MY_QUERY</code>:</p>\n<pre><code>public final class NativeQuery {\nprivate NativeQuery() {\n    }\n\npublic static final String ACCOUNT_HISTORY_BY_PARTY_ID = &quot;/*[ID: &quot; + RandomStringUtils.randomNumeric(8) + &quot;]*/ SELECT col_1 FROM ABC&quot;;\n}\n</code></pre>\n<p>The code does not compile stating that I need a constant value in the attribute.</p>\n<p>Is there any other way to achieve that? I cannot include an additional column in the table as that's simply not allowed.</p>\n"},{"tags":["java","raspberry-pi","wav","clip"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1660126107,"post_id":73304322,"comment_id":129457262,"body_markdown":"Any error messages?","body":"Any error messages?"},{"owner":{"account_id":25503464,"reputation":5,"user_id":19296274,"display_name":"FXPoWer_"},"score":0,"creation_date":1660126419,"post_id":73304322,"comment_id":129457367,"body_markdown":"yes, some exceptions but anyway my program doesn&#39;t go ahead, it crashes.","body":"yes, some exceptions but anyway my program doesn&#39;t go ahead, it crashes."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1660126460,"post_id":73304322,"comment_id":129457384,"body_markdown":"So show us the messages. Maybe we can help you at this point","body":"So show us the messages. Maybe we can help you at this point"},{"owner":{"account_id":25503464,"reputation":5,"user_id":19296274,"display_name":"FXPoWer_"},"score":0,"creation_date":1660126671,"post_id":73304322,"comment_id":129457461,"body_markdown":"EXCEPTIONS:\norg.classpath.icedtea.pulseaudio.PulseAudioDataLine.create Stream(PulseAudioDataLine.java:142)\norg.classpath.icedtea.pulseaudio.PulseAudioDataLine.open(PulseAudioDataLine.java:99)\norg.classpath.icedtea.pulseaudio.PulseAudioDataLine.Open(PulseAudioDataLine.java:283)\norg.classpath.icedtea.pulseaudio.PulseAudioDataLine.Open(PulseAudioDataLine.java:402)\norg.classpath.icedtea.pulseaudio.PulseAudioDataLine.Open(PulseAudioDataLine.java:453)\nThermaskin(MyProgram).advEnd(Thermaskin.java:1432)\nThermaskin.accesso$4100(Thermaskin.java:71)","body":"EXCEPTIONS: org.classpath.icedtea.pulseaudio.PulseAudioDataLine.create Stream(PulseAudioDataLine.java:142) org.classpath.icedtea.pulseaudio.PulseAudioDataLine.open(Pul&zwnj;&#8203;seAudioDataLine.java&zwnj;&#8203;:99) org.classpath.icedtea.pulseaudio.PulseAudioDataLine.Open(Pul&zwnj;&#8203;seAudioDataLine.java&zwnj;&#8203;:283) org.classpath.icedtea.pulseaudio.PulseAudioDataLine.Open(Pul&zwnj;&#8203;seAudioDataLine.java&zwnj;&#8203;:402) org.classpath.icedtea.pulseaudio.PulseAudioDataLine.Open(Pul&zwnj;&#8203;seAudioDataLine.java&zwnj;&#8203;:453) Thermaskin(MyProgram).advEnd(Thermaskin.java:1432) Thermaskin.accesso$4100(Thermaskin.java:71)"},{"owner":{"account_id":25503464,"reputation":5,"user_id":19296274,"display_name":"FXPoWer_"},"score":0,"creation_date":1660126764,"post_id":73304322,"comment_id":129457489,"body_markdown":"it also says &quot;invalid format&quot; but I don&#39;t understand ... Why did it work before and now it doesn&#39;t?","body":"it also says &quot;invalid format&quot; but I don&#39;t understand ... Why did it work before and now it doesn&#39;t?"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1660126950,"post_id":73304322,"comment_id":129457548,"body_markdown":"What changes you have done. Maybe a corrupted wav file? You should also printout the stacktrace to see what is happening","body":"What changes you have done. Maybe a corrupted wav file? You should also printout the stacktrace to see what is happening"},{"owner":{"account_id":25503464,"reputation":5,"user_id":19296274,"display_name":"FXPoWer_"},"score":0,"creation_date":1660127259,"post_id":73304322,"comment_id":129457672,"body_markdown":"Ehm, let me explain. I&#39;m programming on a Windows PC, and after doing whatever I have to do, I copy it and move it to a raspberry with a pendrive. The .wav file works perfectly on windows, but not on the raspberry (I don&#39;t even have a way to debug)","body":"Ehm, let me explain. I&#39;m programming on a Windows PC, and after doing whatever I have to do, I copy it and move it to a raspberry with a pendrive. The .wav file works perfectly on windows, but not on the raspberry (I don&#39;t even have a way to debug)"},{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1660132921,"post_id":73304322,"comment_id":129459746,"body_markdown":"What do you mean with &quot;reproduce&quot;?","body":"What do you mean with &quot;reproduce&quot;?"},{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1660134665,"post_id":73304322,"comment_id":129460486,"body_markdown":"Wav files can contain audio in several different audio coding formats. You may have one that Windows can deal with but Pulse Audio doesn&#39;t handle.","body":"Wav files can contain audio in several different audio coding formats. You may have one that Windows can deal with but Pulse Audio doesn&#39;t handle."},{"owner":{"account_id":25503464,"reputation":5,"user_id":19296274,"display_name":"FXPoWer_"},"score":0,"creation_date":1660200165,"post_id":73304322,"comment_id":129477609,"body_markdown":"thanks everyone for replying, I solved the problem. The problem was that I had installed version 8.0 of the jdk instead of version 11.","body":"thanks everyone for replying, I solved the problem. The problem was that I had installed version 8.0 of the jdk instead of version 11."}],"answers":[{"tags":[],"owner":{"account_id":1387645,"reputation":7926,"user_id":1319284,"accept_rate":69,"display_name":"kutschkem"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660131574,"creation_date":1660131574,"answer_id":73305653,"question_id":73304322,"body_markdown":"I found this blog post which may or may not help:\r\n\r\nhttps://nealvs.wordpress.com/2017/08/11/java-sound-on-a-raspberry-pi-with-openjdk/\r\n\r\n&gt; I was pretty bummed when my sound stopped playing on my Raspberry Pi\r\n&gt; when I switched to OpenJDK 8 after originally using Oracle JDK 8.\r\n&gt; \r\n&gt; Editing the sound.properties for the OpenJDK solved my problem.\r\n&gt; \r\n&gt; sudo vim /etc/java-8-openjdk/sound.properties  \r\n&gt; \r\n&gt; Comment out the icedtea classpath configs:\r\n&gt; \r\n&gt; #javax.sound.sampled.Clip=org.classpath.icedtea.pulseaudio.PulseAudioMixerProvider\r\n&gt; #javax.sound.sampled.Port=org.classpath.icedtea.pulseaudio.PulseAudioMixerProvider\r\n&gt; #javax.sound.sampled.SourceDataLine=org.classpath.icedtea.pulseaudio.PulseAudioMixerProvider\r\n&gt; #javax.sound.sampled.TargetDataLine=org.classpath.icedtea.pulseaudio.PulseAudioMixerProvider\r\n&gt; \r\n&gt; \r\n&gt; Remove the comments from the sun classpath configs:\r\n&gt; \r\n&gt; javax.sound.sampled.Clip=com.sun.media.sound.DirectAudioDeviceProvider\r\n&gt; javax.sound.sampled.Port=com.sun.media.sound.PortMixerProvider\r\n&gt; javax.sound.sampled.SourceDataLine=com.sun.media.sound.DirectAudioDeviceProvider\r\n&gt; javax.sound.sampled.TargetDataLine=com.sun.media.sound.DirectAudioDeviceProvider\r\n&gt; \r\n&gt; \r\n&gt; Problem solved.\r\n\r\nIn other words, you might have a different JDK between your Windows and Raspi, and they need different configuration.","title":"Play wav file on Raspberry using Java","body":"<p>I found this blog post which may or may not help:</p>\n<p><a href=\"https://nealvs.wordpress.com/2017/08/11/java-sound-on-a-raspberry-pi-with-openjdk/\" rel=\"nofollow noreferrer\">https://nealvs.wordpress.com/2017/08/11/java-sound-on-a-raspberry-pi-with-openjdk/</a></p>\n<blockquote>\n<p>I was pretty bummed when my sound stopped playing on my Raspberry Pi\nwhen I switched to OpenJDK 8 after originally using Oracle JDK 8.</p>\n<p>Editing the sound.properties for the OpenJDK solved my problem.</p>\n<p>sudo vim /etc/java-8-openjdk/sound.properties</p>\n<p>Comment out the icedtea classpath configs:</p>\n<p>#javax.sound.sampled.Clip=org.classpath.icedtea.pulseaudio.PulseAudioMixerProvider\n#javax.sound.sampled.Port=org.classpath.icedtea.pulseaudio.PulseAudioMixerProvider\n#javax.sound.sampled.SourceDataLine=org.classpath.icedtea.pulseaudio.PulseAudioMixerProvider\n#javax.sound.sampled.TargetDataLine=org.classpath.icedtea.pulseaudio.PulseAudioMixerProvider</p>\n<p>Remove the comments from the sun classpath configs:</p>\n<p>javax.sound.sampled.Clip=com.sun.media.sound.DirectAudioDeviceProvider\njavax.sound.sampled.Port=com.sun.media.sound.PortMixerProvider\njavax.sound.sampled.SourceDataLine=com.sun.media.sound.DirectAudioDeviceProvider\njavax.sound.sampled.TargetDataLine=com.sun.media.sound.DirectAudioDeviceProvider</p>\n<p>Problem solved.</p>\n</blockquote>\n<p>In other words, you might have a different JDK between your Windows and Raspi, and they need different configuration.</p>\n"}],"owner":{"account_id":25503464,"reputation":5,"user_id":19296274,"display_name":"FXPoWer_"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73305653,"answer_count":1,"score":0,"last_activity_date":1660132899,"creation_date":1660125824,"question_id":73304322,"body_markdown":"How can I reproduce a .wav file using Java on Raspberry (OS: Raspbian)?\r\nI tried this and it worked, but not anymore: now the program crashes when it tries to play the file (and I don&#39;t know why):\r\n\r\n    try{\r\n       File adv = new File(pathRasp+&quot;Suoni/avviso20.wav&quot;);\r\n       Clip clip = AudioSystem.getClip();\r\n       clip.open(AudioSystem.getAudioInputStream(adv));\r\n       clip.start();\r\n    }catch(IOException | LineUnavailableException | UnsupportedAudioFileException ex){\r\n       System.out.println(&quot;ERROR&quot; + ex);\r\n    }\r\n\r\nAnyone know any other ways to reproduce .wav files?","title":"Play wav file on Raspberry using Java","body":"<p>How can I reproduce a .wav file using Java on Raspberry (OS: Raspbian)?\nI tried this and it worked, but not anymore: now the program crashes when it tries to play the file (and I don't know why):</p>\n<pre><code>try{\n   File adv = new File(pathRasp+&quot;Suoni/avviso20.wav&quot;);\n   Clip clip = AudioSystem.getClip();\n   clip.open(AudioSystem.getAudioInputStream(adv));\n   clip.start();\n}catch(IOException | LineUnavailableException | UnsupportedAudioFileException ex){\n   System.out.println(&quot;ERROR&quot; + ex);\n}\n</code></pre>\n<p>Anyone know any other ways to reproduce .wav files?</p>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":196869,"reputation":402535,"user_id":440558,"accept_rate":75,"display_name":"Some programmer dude"},"score":0,"creation_date":1660124560,"post_id":73304021,"comment_id":129456639,"body_markdown":"My suggestion when you&#39;re dealing with &quot;words&quot; from a &quot;sentence&quot; is to split it up at word-boundary into a *container*. Then for example to remove &quot;words&quot; is easy, as it&#39;s just to remove the corresponding element from the container.","body":"My suggestion when you&#39;re dealing with &quot;words&quot; from a &quot;sentence&quot; is to split it up at word-boundary into a <i>container</i>. Then for example to remove &quot;words&quot; is easy, as it&#39;s just to remove the corresponding element from the container."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1660124884,"post_id":73304021,"comment_id":129456784,"body_markdown":"Is `from` the sitring index `for (i = from;` or the word no `spaces &lt; amount + from`?","body":"Is <code>from</code> the sitring index <code>for (i = from;</code> or the word no <code>spaces &lt; amount + from</code>?"}],"answers":[{"tags":[],"owner":{"account_id":23568015,"reputation":136,"user_id":17608510,"display_name":"John"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660125520,"creation_date":1660125520,"answer_id":73304264,"question_id":73304021,"body_markdown":"I recommend in this case using this: \r\n\r\n    String.split(&quot; &quot;); \r\n\r\n\r\nThe split() methods splits an existing String into substings. The substrings will be stored in a String[]. \r\n\r\n\r\n**The split methods works as following:**\r\n\r\nIt takes a &quot;Pattern&quot; (Regex) as a Parameter, that defines where the String has to be split. So if you want to split the String &quot;My name is John&quot;, you can use \r\nthe example above to split the String at all spaces.\r\n\r\nThe result is the String[], containing the 4 words at the first 4 indexes.\r\n  \r\n**This would look like:**\r\n\r\n    [0] = &quot;My&quot;  \r\n    [1] = &quot;name&quot;   \r\n    [2] = &quot;is&quot;   \r\n    [3] = &quot;John&quot;   \r\n\r\nSo if you want to delete the first x words from a String, an easy way is to loop from index x to end and to concatenate the remaining indices with a space between them. ","title":"Delete the x first words from a string","body":"<p>I recommend in this case using this:</p>\n<pre><code>String.split(&quot; &quot;); \n</code></pre>\n<p>The split() methods splits an existing String into substings. The substrings will be stored in a String[].</p>\n<p><strong>The split methods works as following:</strong></p>\n<p>It takes a &quot;Pattern&quot; (Regex) as a Parameter, that defines where the String has to be split. So if you want to split the String &quot;My name is John&quot;, you can use\nthe example above to split the String at all spaces.</p>\n<p>The result is the String[], containing the 4 words at the first 4 indexes.</p>\n<p><strong>This would look like:</strong></p>\n<pre><code>[0] = &quot;My&quot;  \n[1] = &quot;name&quot;   \n[2] = &quot;is&quot;   \n[3] = &quot;John&quot;   \n</code></pre>\n<p>So if you want to delete the first x words from a String, an easy way is to loop from index x to end and to concatenate the remaining indices with a space between them.</p>\n"},{"tags":[],"owner":{"display_name":"user19734087"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660132107,"creation_date":1660129501,"answer_id":73305167,"question_id":73304021,"body_markdown":"Try this out\r\n\r\n    static String anyWords(String s, int amount, int from) {\r\n        int spaces = 0;\r\n        int i;\r\n        String[] stringArray = s.split(&quot; &quot;);\r\n        StringBuilder sentence = new StringBuilder();\r\n        for (int j = 0; j &lt; from; j++)\r\n            stringArray[j] = &quot;&quot;;\r\n        for (String value : stringArray)\r\n            if (!Objects.equals(value, &quot;&quot;))\r\n                sentence.append(value).append(&quot; &quot;);\r\n        for (i = 0; i &lt; sentence.length() &amp;&amp; spaces &lt; amount; i++)\r\n            if (sentence.charAt(i) == &#39; &#39;) spaces++;\r\n        return sentence.substring(0, i);\r\n    }\r\n\r\nI hope i can help","title":"Delete the x first words from a string","body":"<p>Try this out</p>\n<pre><code>static String anyWords(String s, int amount, int from) {\n    int spaces = 0;\n    int i;\n    String[] stringArray = s.split(&quot; &quot;);\n    StringBuilder sentence = new StringBuilder();\n    for (int j = 0; j &lt; from; j++)\n        stringArray[j] = &quot;&quot;;\n    for (String value : stringArray)\n        if (!Objects.equals(value, &quot;&quot;))\n            sentence.append(value).append(&quot; &quot;);\n    for (i = 0; i &lt; sentence.length() &amp;&amp; spaces &lt; amount; i++)\n        if (sentence.charAt(i) == ' ') spaces++;\n    return sentence.substring(0, i);\n}\n</code></pre>\n<p>I hope i can help</p>\n"}],"owner":{"display_name":"user19726483"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73305167,"answer_count":2,"score":-1,"last_activity_date":1660132858,"creation_date":1660124376,"question_id":73304021,"body_markdown":"This function displays only as many dice as you specify in the &#39;amount&#39;. Now, I want to be able to tell from where it takes the words. From where it starts to display the words. And not always from the beginning.\r\n\r\n    static String firstTwoWords(String s, int amount, int from) {\r\n        int spaces = 0;\r\n        int i;\r\n        //from = delete the front records from the string\r\n        for (i = 0; i &lt; s.length() &amp;&amp; spaces &lt; amount; i++)\r\n            if (s.charAt(i) == &#39; &#39;) spaces++;\r\n        return s.substring(0, i);\r\n    }\r\n\r\n","title":"Delete the x first words from a string","body":"<p>This function displays only as many dice as you specify in the 'amount'. Now, I want to be able to tell from where it takes the words. From where it starts to display the words. And not always from the beginning.</p>\n<pre><code>static String firstTwoWords(String s, int amount, int from) {\n    int spaces = 0;\n    int i;\n    //from = delete the front records from the string\n    for (i = 0; i &lt; s.length() &amp;&amp; spaces &lt; amount; i++)\n        if (s.charAt(i) == ' ') spaces++;\n    return s.substring(0, i);\n}\n</code></pre>\n"},{"tags":["java","spring-boot","spring-mvc","spring-webflux"],"answers":[{"tags":[],"owner":{"account_id":23011234,"reputation":26,"user_id":17133755,"display_name":"Long Ngo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660114829,"creation_date":1660114829,"answer_id":73301951,"question_id":73301425,"body_markdown":"When you want to get values from form data, you can create a model like a DTO, with field of both entity (employee) and additional data (otherValues). Because ```@ModelAttribute``` can bind data to only one named model attribute","title":"For multipart request, how to use using @ModelAttribute and Hashmap together?","body":"<p>When you want to get values from form data, you can create a model like a DTO, with field of both entity (employee) and additional data (otherValues). Because <code>@ModelAttribute</code> can bind data to only one named model attribute</p>\n"},{"tags":[],"owner":{"account_id":2428271,"reputation":211,"user_id":2119761,"display_name":"bmck"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660132796,"creation_date":1660120173,"answer_id":73303087,"question_id":73301425,"body_markdown":"This is working for **Spring MVC**. But When you work with Spring **WebFlux** for **reactive applications**, it doesn&#39;t work. \r\n```\r\n@RequestMapping(path = &quot;/employee&quot;, method = POST, consumes ={MediaType.MULTIPART_FORM_DATA_VALUE })\r\npublic Employee saveEmployee(\r\n@ModelAttribute Employee employee, \r\n@RequestParam Map&lt;Object,Object&gt; otherValues,\r\n@RequestParam(&quot;file&quot;) MultipartFile file) {\r\nSystem.out.println(otherValues.get(&quot;key1&quot;).toString());\r\nreturn employeeService.save(employee);\r\n}\r\n```\r\nMain trick is to use Object for key and value;\r\n```\r\n@RequestParam Map&lt;Object,Object&gt; otherValues\r\n```","title":"For multipart request, how to use using @ModelAttribute and Hashmap together?","body":"<p>This is working for <strong>Spring MVC</strong>. But When you work with Spring <strong>WebFlux</strong> for <strong>reactive applications</strong>, it doesn't work.</p>\n<pre><code>@RequestMapping(path = &quot;/employee&quot;, method = POST, consumes ={MediaType.MULTIPART_FORM_DATA_VALUE })\npublic Employee saveEmployee(\n@ModelAttribute Employee employee, \n@RequestParam Map&lt;Object,Object&gt; otherValues,\n@RequestParam(&quot;file&quot;) MultipartFile file) {\nSystem.out.println(otherValues.get(&quot;key1&quot;).toString());\nreturn employeeService.save(employee);\n}\n</code></pre>\n<p>Main trick is to use Object for key and value;</p>\n<pre><code>@RequestParam Map&lt;Object,Object&gt; otherValues\n</code></pre>\n"}],"owner":{"account_id":2428271,"reputation":211,"user_id":2119761,"display_name":"bmck"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":476,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660132796,"creation_date":1660111855,"question_id":73301425,"body_markdown":"First of all, thank you in advance for your support.\r\n\r\nMy problem;\r\n\r\nFirst I am successfully getting my specific parameters in Employer. However, I also have a constantly changing parameter list in request. I want to get them with Map too.\r\n\r\n\r\nMy dto:\r\n```\r\npublic class Employee {\r\n    private String name;\r\n    private MultipartFile document;\r\n}\r\n```\r\n```\r\n@RequestMapping(path = &quot;/employee&quot;, method = POST, consumes = { MediaType.MULTIPART_FORM_DATA_VALUE })\r\npublic Mono&lt;Employee&gt; saveEmployee(@ModelAttribute Employee employee, Map&lt;String,Object&gt; otherValues) {\r\nSystem.out.println(otherValues.get(&quot;key1&quot;).toString());\r\nreturn employeeService.save(employee);\r\n}\r\n```\r\n\r\nI attached a request example aslo.\r\n\r\nNOTE:\r\nI used @RequestParam, @RequestPart before Map&lt;String,Object&gt; otherValues like this;\r\n```\r\n @RequestParam Map&lt;String,Object&gt; otherValues\r\n @RequestPart Map&lt;String,Object&gt; otherValues\r\n```\r\nBut I still couldn&#39;t get the rest of the data.\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kbFyQ.png","title":"For multipart request, how to use using @ModelAttribute and Hashmap together?","body":"<p>First of all, thank you in advance for your support.</p>\n<p>My problem;</p>\n<p>First I am successfully getting my specific parameters in Employer. However, I also have a constantly changing parameter list in request. I want to get them with Map too.</p>\n<p>My dto:</p>\n<pre><code>public class Employee {\n    private String name;\n    private MultipartFile document;\n}\n</code></pre>\n<pre><code>@RequestMapping(path = &quot;/employee&quot;, method = POST, consumes = { MediaType.MULTIPART_FORM_DATA_VALUE })\npublic Mono&lt;Employee&gt; saveEmployee(@ModelAttribute Employee employee, Map&lt;String,Object&gt; otherValues) {\nSystem.out.println(otherValues.get(&quot;key1&quot;).toString());\nreturn employeeService.save(employee);\n}\n</code></pre>\n<p>I attached a request example aslo.</p>\n<p>NOTE:\nI used @RequestParam, @RequestPart before Map&lt;String,Object&gt; otherValues like this;</p>\n<pre><code> @RequestParam Map&lt;String,Object&gt; otherValues\n @RequestPart Map&lt;String,Object&gt; otherValues\n</code></pre>\n<p>But I still couldn't get the rest of the data.</p>\n<p><a href=\"https://i.stack.imgur.com/kbFyQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kbFyQ.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","encryption","aes-gcm"],"comments":[{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1520871425,"post_id":49228671,"comment_id":85483359,"body_markdown":"The description doesn&#39;t make any sense. You say it was AES-GCM encrypted. OK, that means it has an authentication tag. A tag length of zero is not supported, the smallest length (for special cases only) is 32. Then you say it doesn&#39;t contain authentication information. Maybe it isn&#39;t encrypted with AES-GCM.","body":"The description doesn&#39;t make any sense. You say it was AES-GCM encrypted. OK, that means it has an authentication tag. A tag length of zero is not supported, the smallest length (for special cases only) is 32. Then you say it doesn&#39;t contain authentication information. Maybe it isn&#39;t encrypted with AES-GCM."},{"owner":{"account_id":203680,"reputation":112068,"user_id":451475,"accept_rate":100,"display_name":"zaph"},"score":0,"creation_date":1520897411,"post_id":49228671,"comment_id":85495793,"body_markdown":"@user1802492 Perhaps you mean there is no associated data not that it does not have authentication. There is no point in GCM mode without authentication..","body":"@user1802492 Perhaps you mean there is no associated data not that it does not have authentication. There is no point in GCM mode without authentication.."},{"owner":{"account_id":2014959,"reputation":334,"user_id":1802492,"display_name":"Dijesh"},"score":0,"creation_date":1521118070,"post_id":49228671,"comment_id":85601390,"body_markdown":"@JamesKPolk , I am getting this data from a third party application which encrypt data with AES/GCM and it is not providing authentication information, I want to decrypt this to know the actual data from device.","body":"@JamesKPolk , I am getting this data from a third party application which encrypt data with AES/GCM and it is not providing authentication information, I want to decrypt this to know the actual data from device."},{"owner":{"account_id":2014959,"reputation":334,"user_id":1802492,"display_name":"Dijesh"},"score":0,"creation_date":1521118357,"post_id":49228671,"comment_id":85601584,"body_markdown":"I got a temporary solution for this issue, Not sure if this is correct method","body":"I got a temporary solution for this issue, Not sure if this is correct method"},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1535096752,"post_id":49228671,"comment_id":90948496,"body_markdown":"Please put the edit in an answer instead of in the question. The code is OK, but only if `c.update` does always return the plaintext data before validating the authentication tag. And that&#39;s implementation specific. It&#39;s also relatively inefficient wrt memory, but for a make-shift solution it is OK. Oh yeah, and the `if(decrypted_index&gt;=len){` test is of course bunk given the test within the while loop; `decrypted_index` must be `&gt;= len`.","body":"Please put the edit in an answer instead of in the question. The code is OK, but only if <code>c.update</code> does always return the plaintext data before validating the authentication tag. And that&#39;s implementation specific. It&#39;s also relatively inefficient wrt memory, but for a make-shift solution it is OK. Oh yeah, and the <code>if(decrypted_index&gt;=len){</code> test is of course bunk given the test within the while loop; <code>decrypted_index</code> must be <code>&gt;= len</code>."}],"answers":[{"tags":[],"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1648563640,"creation_date":1520890817,"answer_id":49244840,"question_id":49228671,"body_markdown":"**Warning: hazardous material**. Only proceed if you understand the implications of handling the resulting plaintext without verifying the authentication tag first. This could lead not just to an attacker changing the message, but also compromising confidentiality through plaintext oracle attacks.\r\n\r\n---\r\n\r\nYes, it is possible to  decrypt the message without the authentication tag: if you read the GCM specification you can see that the IV for CTR is simply the IV, appended with four bytes `00000002` (i.e. a counter starting at zero, increased by one for calculating the authentication tag and again for the starting value of the counter for encryption).\r\n\r\nSo here&#39;s the code, where I do the `inc` twice as I  used it to validate my counter code; it is of course possible to simply set the last byte to value `0x02` as well. \r\n\r\n    package nl.owlstead.so;\r\n\r\n    import java.nio.charset.StandardCharsets;\r\n    \r\n    import javax.crypto.Cipher;\r\n    import javax.crypto.SecretKey;\r\n    import javax.crypto.spec.GCMParameterSpec;\r\n    import javax.crypto.spec.IvParameterSpec;\r\n    import javax.crypto.spec.SecretKeySpec;\r\n    \r\n    import org.bouncycastle.util.Arrays;\r\n    \r\n    public class DecryptGCMWithoutVerification {\r\n    \r\n        private static final int TAG_SIZE = 128;\r\n\r\n    \tpublic DecryptGCMWithoutVerification() {\r\n    \t\t// TODO Auto-generated constructor stub\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t\t\r\n    \t\t// --- encryption using GCM\r\n    \t\t\r\n    \t\tCipher gcm = Cipher.getInstance(&quot;AES/GCM/NoPadding&quot;);\r\n    \t\tSecretKey key = new SecretKeySpec(new byte[16], &quot;AES&quot;);\r\n    \t\tbyte[] ivBytes = new byte[12];\r\n    \t\tGCMParameterSpec iv = new GCMParameterSpec(TAG_SIZE, ivBytes);\r\n    \t\tgcm.init(Cipher.ENCRYPT_MODE, key, iv);\r\n    \t\tbyte[] ct = gcm.doFinal(&quot;owlstead&quot;.getBytes(StandardCharsets.US_ASCII));\r\n    \t\t\r\n    \t\t// --- decryption using underlying CTR mode\r\n    \t\t\r\n    \t\tCipher ctr = Cipher.getInstance(&quot;AES/CTR/NoPadding&quot;);\r\n\r\n            // WARNING: this is only correct for a 12 byte IV in GCM mode\r\n    \t\tbyte[] counter = Arrays.concatenate(ivBytes, new byte[4]);\r\n    \t\tinc(counter);\r\n    \t\tinc(counter);\r\n    \t\tIvParameterSpec ctrIV = new IvParameterSpec(counter);\r\n    \t\tctr.init(Cipher.DECRYPT_MODE, key, ctrIV);\r\n    \t\t\r\n    \t\tbyte[] pt = ctr.doFinal(ct, 0, ct.length - TAG_SIZE / Byte.SIZE);\r\n    \t\t\r\n    \t\tSystem.out.println(new String(pt, StandardCharsets.US_ASCII));\r\n    \t}\r\n    \t\r\n    \tprivate static final byte inc(byte[] counter) {\r\n    \t\tfor (int i = counter.length - 1; i &gt;= 0; i--) {\r\n    \t\t\tif (++counter[i] != 0) {\r\n    \t\t\t\treturn 0;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn 1;\r\n    \t}\r\n    \r\n    }\r\n\r\nEDIT: this code is for an invalid tag or a tag that cannot be recalculated (the AAD could be missing, for instance). Remove `- TAG_SIZE / Byte.SIZE` from `doFinal` if the tag is missing entirely.\r\n\r\nEDIT 2: note that this assumes a 12 byte / 96 bit IV, the default IV size for GCM. For any other size you need to calculate the IV first.","title":"AES GCM decryption bypassing authentication in JAVA","body":"<p><strong>Warning: hazardous material</strong>. Only proceed if you understand the implications of handling the resulting plaintext without verifying the authentication tag first. This could lead not just to an attacker changing the message, but also compromising confidentiality through plaintext oracle attacks.</p>\n<hr />\n<p>Yes, it is possible to  decrypt the message without the authentication tag: if you read the GCM specification you can see that the IV for CTR is simply the IV, appended with four bytes <code>00000002</code> (i.e. a counter starting at zero, increased by one for calculating the authentication tag and again for the starting value of the counter for encryption).</p>\n<p>So here's the code, where I do the <code>inc</code> twice as I  used it to validate my counter code; it is of course possible to simply set the last byte to value <code>0x02</code> as well.</p>\n<pre><code>package nl.owlstead.so;\n\nimport java.nio.charset.StandardCharsets;\n\nimport javax.crypto.Cipher;\nimport javax.crypto.SecretKey;\nimport javax.crypto.spec.GCMParameterSpec;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.SecretKeySpec;\n\nimport org.bouncycastle.util.Arrays;\n\npublic class DecryptGCMWithoutVerification {\n\n    private static final int TAG_SIZE = 128;\n\n    public DecryptGCMWithoutVerification() {\n        // TODO Auto-generated constructor stub\n    }\n\n    public static void main(String[] args) throws Exception {\n        \n        // --- encryption using GCM\n        \n        Cipher gcm = Cipher.getInstance(&quot;AES/GCM/NoPadding&quot;);\n        SecretKey key = new SecretKeySpec(new byte[16], &quot;AES&quot;);\n        byte[] ivBytes = new byte[12];\n        GCMParameterSpec iv = new GCMParameterSpec(TAG_SIZE, ivBytes);\n        gcm.init(Cipher.ENCRYPT_MODE, key, iv);\n        byte[] ct = gcm.doFinal(&quot;owlstead&quot;.getBytes(StandardCharsets.US_ASCII));\n        \n        // --- decryption using underlying CTR mode\n        \n        Cipher ctr = Cipher.getInstance(&quot;AES/CTR/NoPadding&quot;);\n\n        // WARNING: this is only correct for a 12 byte IV in GCM mode\n        byte[] counter = Arrays.concatenate(ivBytes, new byte[4]);\n        inc(counter);\n        inc(counter);\n        IvParameterSpec ctrIV = new IvParameterSpec(counter);\n        ctr.init(Cipher.DECRYPT_MODE, key, ctrIV);\n        \n        byte[] pt = ctr.doFinal(ct, 0, ct.length - TAG_SIZE / Byte.SIZE);\n        \n        System.out.println(new String(pt, StandardCharsets.US_ASCII));\n    }\n    \n    private static final byte inc(byte[] counter) {\n        for (int i = counter.length - 1; i &gt;= 0; i--) {\n            if (++counter[i] != 0) {\n                return 0;\n            }\n        }\n        return 1;\n    }\n\n}\n</code></pre>\n<p>EDIT: this code is for an invalid tag or a tag that cannot be recalculated (the AAD could be missing, for instance). Remove <code>- TAG_SIZE / Byte.SIZE</code> from <code>doFinal</code> if the tag is missing entirely.</p>\n<p>EDIT 2: note that this assumes a 12 byte / 96 bit IV, the default IV size for GCM. For any other size you need to calculate the IV first.</p>\n"}],"owner":{"account_id":2014959,"reputation":334,"user_id":1802492,"display_name":"Dijesh"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4895,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":49244840,"answer_count":1,"score":2,"last_activity_date":1660132489,"creation_date":1520832645,"question_id":49228671,"body_markdown":"I have some AES/GCM encrypted data and wanted to decrypt it. I want to decrypt it bypassing authentication as the data does not contain authentication information(Data is encrypted by a third party application). I tried decryption with javax.crypto  package and it is always throwing tag mismatch error. Is there any way to bypass this tag checking and decrypt data. Data is encrypted with AES128 and it is using 12 byte initialization vector.\r\n\r\nEdit: I got a temporary solution for this issue. Not sure if this is correct method.  \r\n                \r\n                Key key = new SecretKeySpec(hlsKey, &quot;AES&quot;);\r\n                GCMParameterSpec gCMParameterSpec = new     GCMParameterSpec(96, initialisationVector);\r\n                final Cipher c = Cipher.getInstance(&quot;AES/GCM/NoPadding&quot;, &quot;BC&quot;);\r\n                c.init(Cipher.DECRYPT_MODE, key, gCMParameterSpec);\r\n                \r\n                byte[] nodata = new byte[len * 2];\r\n                System.arraycopy(cipherText, 0, nodata, 0, len);\r\n                byte[] plaindata = new byte[len * 2];\r\n                try { \r\n                    \r\n                    int decrypted_index = 0;\r\n                    while (decrypted_index &lt; len) {\r\n                        int cp = c.update(nodata, decrypted_index, nodata.length - decrypted_index, plaindata, decrypted_index);//doFinal(nodata);\r\n                        decrypted_index += cp;\r\n                    }\r\n                   if(decrypted_index&gt;=len){\r\n                       System.arraycopy(plaindata, 0, plainText, 0, len);\r\n                       retvalue=1;\r\n                   }\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }","title":"AES GCM decryption bypassing authentication in JAVA","body":"<p>I have some AES/GCM encrypted data and wanted to decrypt it. I want to decrypt it bypassing authentication as the data does not contain authentication information(Data is encrypted by a third party application). I tried decryption with javax.crypto  package and it is always throwing tag mismatch error. Is there any way to bypass this tag checking and decrypt data. Data is encrypted with AES128 and it is using 12 byte initialization vector.</p>\n\n<p>Edit: I got a temporary solution for this issue. Not sure if this is correct method.  </p>\n\n<pre><code>            Key key = new SecretKeySpec(hlsKey, \"AES\");\n            GCMParameterSpec gCMParameterSpec = new     GCMParameterSpec(96, initialisationVector);\n            final Cipher c = Cipher.getInstance(\"AES/GCM/NoPadding\", \"BC\");\n            c.init(Cipher.DECRYPT_MODE, key, gCMParameterSpec);\n\n            byte[] nodata = new byte[len * 2];\n            System.arraycopy(cipherText, 0, nodata, 0, len);\n            byte[] plaindata = new byte[len * 2];\n            try { \n\n                int decrypted_index = 0;\n                while (decrypted_index &lt; len) {\n                    int cp = c.update(nodata, decrypted_index, nodata.length - decrypted_index, plaindata, decrypted_index);//doFinal(nodata);\n                    decrypted_index += cp;\n                }\n               if(decrypted_index&gt;=len){\n                   System.arraycopy(plaindata, 0, plainText, 0, len);\n                   retvalue=1;\n               }\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n</code></pre>\n"},{"tags":["java","spring-boot","netflix-zuul","access-denied","spring-cloud-gateway"],"owner":{"account_id":26028313,"reputation":11,"user_id":19734923,"display_name":"Ananya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660132416,"creation_date":1660132340,"question_id":73305819,"body_markdown":"Initially I&#39;m using zuul for gateway operations, now migrated to spring cloud gateway. After migrating getting access denied error with the below code. \r\n\r\n\r\n    @Bean\r\n    public SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http) {\r\n        DelegatingServerLogoutHandler logoutHandler = new DelegatingServerLogoutHandler(\r\n                new CsrfServerLogoutHandler(csrfTokenRepository()),\r\n                new SecurityContextServerLogoutHandler(),\r\n                new WebSessionServerLogoutHandler(),\r\n                new HeaderWriterServerLogoutHandler(new ClearSiteDataServerHttpHeadersWriter(ClearSiteDataServerHttpHeadersWriter.Directive.ALL))\r\n        );\r\n\r\n        http\r\n                .oauth2Login().and()\r\n                .authorizeExchange()\r\n                .pathMatchers(&quot;/somePath/**&quot;).hasRole(&quot;SuperAdmin&quot;)\r\n                .pathMatchers(&quot;/somePathSquare/**&quot;).hasRole(&quot;SuperAdmin&quot;)\r\n                .pathMatchers(&quot;/somePathCube/**&quot;).hasRole(&quot;SuperAdmin&quot;)\r\n                .csrf().requireCsrfProtectionMatcher(createDefaultRequestMacher()).and()\r\n\r\n                .csrf(csrf -&gt; csrf.csrfTokenRepository(csrfTokenRepository())) \r\n                .addFilterAfter(csrfFilter,  SecurityWebFiltersOrder.CSRF) \r\n                .logout()\r\n                .logoutHandler(logoutHandler)\r\n                .logoutSuccessHandler(logoutSuccessHandler())\r\n                .and()\r\n                .authorizeExchange().anyExchange().permitAll()\r\n        ;\r\n\r\n        return http.build();\r\n    }\r\n\r\n\r\n\r\n\r\nAlso tried changing the `hasRole(&quot;SuperAdmin&quot;) to hasRole(&quot;ROLE_SuperAdmin&quot;) &amp; hasAuthority(&quot;SuperAdmin&quot;) &amp; hasAuthority(&quot;ROLE_SuperAdmin&quot;)`. \r\nGetting same error access denied in all the cases. \r\n\r\nCan anyone share your thoughts and workarounds on how to fix this?","title":"antMatchers hasRole throwing 403 access denied using spring cloud gateway","body":"<p>Initially I'm using zuul for gateway operations, now migrated to spring cloud gateway. After migrating getting access denied error with the below code.</p>\n<pre><code>@Bean\npublic SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http) {\n    DelegatingServerLogoutHandler logoutHandler = new DelegatingServerLogoutHandler(\n            new CsrfServerLogoutHandler(csrfTokenRepository()),\n            new SecurityContextServerLogoutHandler(),\n            new WebSessionServerLogoutHandler(),\n            new HeaderWriterServerLogoutHandler(new ClearSiteDataServerHttpHeadersWriter(ClearSiteDataServerHttpHeadersWriter.Directive.ALL))\n    );\n\n    http\n            .oauth2Login().and()\n            .authorizeExchange()\n            .pathMatchers(&quot;/somePath/**&quot;).hasRole(&quot;SuperAdmin&quot;)\n            .pathMatchers(&quot;/somePathSquare/**&quot;).hasRole(&quot;SuperAdmin&quot;)\n            .pathMatchers(&quot;/somePathCube/**&quot;).hasRole(&quot;SuperAdmin&quot;)\n            .csrf().requireCsrfProtectionMatcher(createDefaultRequestMacher()).and()\n\n            .csrf(csrf -&gt; csrf.csrfTokenRepository(csrfTokenRepository())) \n            .addFilterAfter(csrfFilter,  SecurityWebFiltersOrder.CSRF) \n            .logout()\n            .logoutHandler(logoutHandler)\n            .logoutSuccessHandler(logoutSuccessHandler())\n            .and()\n            .authorizeExchange().anyExchange().permitAll()\n    ;\n\n    return http.build();\n}\n</code></pre>\n<p>Also tried changing the <code>hasRole(&quot;SuperAdmin&quot;) to hasRole(&quot;ROLE_SuperAdmin&quot;) &amp; hasAuthority(&quot;SuperAdmin&quot;) &amp; hasAuthority(&quot;ROLE_SuperAdmin&quot;)</code>.\nGetting same error access denied in all the cases.</p>\n<p>Can anyone share your thoughts and workarounds on how to fix this?</p>\n"},{"tags":["java","maven","nexus"],"comments":[{"owner":{"account_id":60521,"reputation":34336,"user_id":180719,"accept_rate":88,"display_name":"Olivier Gr&#233;goire"},"score":2,"creation_date":1660131927,"post_id":73305702,"comment_id":129459338,"body_markdown":"What do you want to retrieve, based on which criteria? Without this, your question is totally unclear.","body":"What do you want to retrieve, based on which criteria? Without this, your question is totally unclear."},{"owner":{"account_id":8136080,"reputation":115,"user_id":6127658,"accept_rate":38,"display_name":"priyam singh"},"score":0,"creation_date":1660132288,"post_id":73305702,"comment_id":129459491,"body_markdown":"I want to retrieve jar based on GAV co-ordinates. I have updated my question.","body":"I want to retrieve jar based on GAV co-ordinates. I have updated my question."},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1660132949,"post_id":73305702,"comment_id":129459755,"body_markdown":"You could make use of the original libraries from org.eclipse.aether that are also used by Maven to work with artifacts.","body":"You could make use of the original libraries from org.eclipse.aether that are also used by Maven to work with artifacts."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1660133032,"post_id":73305702,"comment_id":129459795,"body_markdown":"Why not using Maven itself???","body":"Why not using Maven itself???"},{"owner":{"account_id":8136080,"reputation":115,"user_id":6127658,"accept_rate":38,"display_name":"priyam singh"},"score":0,"creation_date":1660134422,"post_id":73305702,"comment_id":129460395,"body_markdown":"@Robert  Could you please provide example code?","body":"@Robert  Could you please provide example code?"},{"owner":{"account_id":8136080,"reputation":115,"user_id":6127658,"accept_rate":38,"display_name":"priyam singh"},"score":0,"creation_date":1660134448,"post_id":73305702,"comment_id":129460405,"body_markdown":"@khmarbaise Could you please provide example code?","body":"@khmarbaise Could you please provide example code?"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1660136539,"post_id":73305702,"comment_id":129461195,"body_markdown":"https://maven.apache.org/guides/getting-started/index.html#How_do_I_setup_Maven","body":"<a href=\"https://maven.apache.org/guides/getting-started/index.html#How_do_I_setup_Maven\" rel=\"nofollow noreferrer\">maven.apache.org/guides/getting-started/&hellip;</a>"},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1660139433,"post_id":73305702,"comment_id":129462488,"body_markdown":"Your question is too broad to provide sample code. But we are talking about an open source library that is documented and used in various other open source projects, so just search for it you will find a code where org.eclipse.aether is used.","body":"Your question is too broad to provide sample code. But we are talking about an open source library that is documented and used in various other open source projects, so just search for it you will find a code where org.eclipse.aether is used."}],"owner":{"account_id":8136080,"reputation":115,"user_id":6127658,"accept_rate":38,"display_name":"priyam singh"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":219,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660132336,"creation_date":1660131829,"question_id":73305702,"body_markdown":"I am developing a java REST API to retrieve the jar based on GAV coordinates from nexus repository. I saw NexusIndexer (https://maven.apache.org/maven-indexer/apidocs/org/apache/maven/index/NexusIndexer.html ) documentation to scan the jars from remote repository. It seems to confusing to me, I am wondering if anyone can have simple solution for that.\r\n\r\nAny leads would be helpful here.","title":"is there any recommended way to scan nexus repository to retrieve the jar?","body":"<p>I am developing a java REST API to retrieve the jar based on GAV coordinates from nexus repository. I saw NexusIndexer (<a href=\"https://maven.apache.org/maven-indexer/apidocs/org/apache/maven/index/NexusIndexer.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/maven-indexer/apidocs/org/apache/maven/index/NexusIndexer.html</a> ) documentation to scan the jars from remote repository. It seems to confusing to me, I am wondering if anyone can have simple solution for that.</p>\n<p>Any leads would be helpful here.</p>\n"},{"tags":["java","selenium"],"answers":[{"tags":[],"owner":{"account_id":16422586,"reputation":1841,"user_id":11863448,"display_name":"Akzy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660132245,"creation_date":1660132245,"answer_id":73305795,"question_id":73304304,"body_markdown":"You can use like:\r\n\r\n**First Approach** By pressing ctrl+end\r\n\r\n    driver.findElement(By.cssSelector(&quot;body&quot;)).sendKeys(Keys.CONTROL, Keys.END);\r\n\r\n**Second Approach** : By using Java Robot class\r\n\r\n    Robot robot = new Robot();\r\n    robot.keyPress(KeyEvent.VK_CONTROL);\r\n    robot.keyPress(KeyEvent.VK_END);\r\n    robot.keyRelease(KeyEvent.VK_END);\r\n    robot.keyRelease(KeyEvent.VK_CONTROL);\r\n\r\n**OR you can use the below by extending your code** \r\n\r\n\r\n     try {\r\n            Object lastHeight = ((JavascriptExecutor) driver).executeScript(&quot;return document.body.scrollHeight&quot;);\r\n    \r\n            while (true) {\r\n                ((JavascriptExecutor) driver).executeScript(&quot;window.scrollTo(0, document.body.scrollHeight);&quot;);\r\n                Thread.sleep(2000);\r\n    \r\n                Object newHeight = ((JavascriptExecutor) driver).executeScript(&quot;return document.body.scrollHeight&quot;);\r\n                if (newHeight.equals(lastHeight)) {\r\n                    break;\r\n                }\r\n                lastHeight = newHeight;\r\n            }\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }","title":"How to assert Listing data which is having lazy loading in selenium java","body":"<p>You can use like:</p>\n<p><strong>First Approach</strong> By pressing ctrl+end</p>\n<pre><code>driver.findElement(By.cssSelector(&quot;body&quot;)).sendKeys(Keys.CONTROL, Keys.END);\n</code></pre>\n<p><strong>Second Approach</strong> : By using Java Robot class</p>\n<pre><code>Robot robot = new Robot();\nrobot.keyPress(KeyEvent.VK_CONTROL);\nrobot.keyPress(KeyEvent.VK_END);\nrobot.keyRelease(KeyEvent.VK_END);\nrobot.keyRelease(KeyEvent.VK_CONTROL);\n</code></pre>\n<p><strong>OR you can use the below by extending your code</strong></p>\n<pre><code> try {\n        Object lastHeight = ((JavascriptExecutor) driver).executeScript(&quot;return document.body.scrollHeight&quot;);\n\n        while (true) {\n            ((JavascriptExecutor) driver).executeScript(&quot;window.scrollTo(0, document.body.scrollHeight);&quot;);\n            Thread.sleep(2000);\n\n            Object newHeight = ((JavascriptExecutor) driver).executeScript(&quot;return document.body.scrollHeight&quot;);\n            if (newHeight.equals(lastHeight)) {\n                break;\n            }\n            lastHeight = newHeight;\n        }\n    } catch (InterruptedException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":15174837,"reputation":1,"user_id":10949875,"display_name":"Rutvij Patel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660132315,"creation_date":1660125714,"question_id":73304304,"body_markdown":"    JavascriptExecutor js = (JavascriptExecutor) driver;\r\n    js.executeScript(&quot;window.scrollTo(0, document.body.scrollHeight)&quot;);\r\n\r\n\r\n\r\nAfter using this it will load more 20 records till list is not getting ended so how I can get the hall list size and how I can print the hall list data ","title":"How to assert Listing data which is having lazy loading in selenium java","body":"<pre><code>JavascriptExecutor js = (JavascriptExecutor) driver;\njs.executeScript(&quot;window.scrollTo(0, document.body.scrollHeight)&quot;);\n</code></pre>\n<p>After using this it will load more 20 records till list is not getting ended so how I can get the hall list size and how I can print the hall list data</p>\n"},{"tags":["java","android","zip","apache-commons","7zip"],"comments":[{"owner":{"account_id":251706,"reputation":5323,"user_id":529282,"display_name":"Martheen"},"score":0,"creation_date":1648094709,"post_id":71596913,"comment_id":126538986,"body_markdown":"You just can&#39;t. https://commons.apache.org/proper/commons-compress/limitations.html For 7z, &quot;Encryption, solid compression and header compression are only supported when reading archives&quot; while for zip, &quot;no support for encryption&quot;, use http://sevenzipjbind.sourceforge.net/compression_snippets.html#create-encrypted instead","body":"You just can&#39;t. <a href=\"https://commons.apache.org/proper/commons-compress/limitations.html\" rel=\"nofollow noreferrer\">commons.apache.org/proper/commons-compress/limitations.html</a> For 7z, &quot;Encryption, solid compression and header compression are only supported when reading archives&quot; while for zip, &quot;no support for encryption&quot;, use <a href=\"http://sevenzipjbind.sourceforge.net/compression_snippets.html#create-encrypted\" rel=\"nofollow noreferrer\">sevenzipjbind.sourceforge.net/&hellip;</a> instead"},{"owner":{"account_id":11974931,"reputation":1042,"user_id":8762338,"display_name":"Astha Garg"},"score":0,"creation_date":1648095175,"post_id":71596913,"comment_id":126539040,"body_markdown":"Yes the limitation doc says so, but I&#39;m able to extract an encrypted zip file using apache so thought this documentation is not updated it seems.","body":"Yes the limitation doc says so, but I&#39;m able to extract an encrypted zip file using apache so thought this documentation is not updated it seems."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1660132343,"post_id":71596913,"comment_id":129459513,"body_markdown":"The historical issue is that passwords of zips are not very secure. Better to encrypt a mail or such.","body":"The historical issue is that passwords of zips are not very secure. Better to encrypt a mail or such."}],"answers":[{"tags":[],"owner":{"account_id":11974931,"reputation":1042,"user_id":8762338,"display_name":"Astha Garg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660132025,"creation_date":1660132025,"answer_id":73305743,"question_id":71596913,"body_markdown":"Apache compress library does not support creating archives(zip/7zip files)","title":"How to create password protected zip/7zip file using apache.compress","body":"<p>Apache compress library does not support creating archives(zip/7zip files)</p>\n"}],"owner":{"account_id":11974931,"reputation":1042,"user_id":8762338,"display_name":"Astha Garg"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":936,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73305743,"answer_count":1,"score":0,"last_activity_date":1660132025,"creation_date":1648094276,"question_id":71596913,"body_markdown":"In my `Android` project, I&#39;m using below dependency in my `build.gradle` file to support extraction/compression of archive files\r\n\r\n    implementation &#39;org.apache.commons:commons-compress:1.21&#39;\r\n\r\nI want to know how can I create password protected zip/7zip file using apache.compress.\r\nI&#39;m referring this documentation [Apache Compress][1]\r\n\r\nI&#39;m able to create zip/7zip archives but not able to set password to those archives.\r\n\r\nI tried but couldn&#39;t find anywhere.\r\n\r\nThanks in Advance.\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-compress/index.html","title":"How to create password protected zip/7zip file using apache.compress","body":"<p>In my <code>Android</code> project, I'm using below dependency in my <code>build.gradle</code> file to support extraction/compression of archive files</p>\n<pre><code>implementation 'org.apache.commons:commons-compress:1.21'\n</code></pre>\n<p>I want to know how can I create password protected zip/7zip file using apache.compress.\nI'm referring this documentation <a href=\"https://commons.apache.org/proper/commons-compress/index.html\" rel=\"nofollow noreferrer\">Apache Compress</a></p>\n<p>I'm able to create zip/7zip archives but not able to set password to those archives.</p>\n<p>I tried but couldn't find anywhere.</p>\n<p>Thanks in Advance.</p>\n"},{"tags":["java","hibernate","hibernate-search"],"answers":[{"tags":[],"owner":{"account_id":8974783,"reputation":9445,"user_id":6692043,"display_name":"yrodiere"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660131994,"creation_date":1660131994,"answer_id":73305731,"question_id":73305492,"body_markdown":"It&#39;s in the documentation: [`score` projection](https://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/#search-dsl-projection-score).\r\n\r\n```\r\nList&lt;Float&gt; hits = searchSession.search( Book.class )\r\n        .select( f -&gt; f.score() )\r\n        .where( f -&gt; f.match().field( &quot;title&quot; )\r\n                .matching( &quot;robot dawn&quot; ) )\r\n        .fetchHits( 20 );\r\n```\r\n\r\nAnd if you want the entity *and* the score, use both the `score` projection and the [`entity` projection](https://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/#search-dsl-projection-entity), and combine them with a [`composite` projection](https://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/#search-dsl-projection-composite).\r\n\r\n```\r\nList&lt;MyPair&lt;Book, Float&gt;&gt; hits = searchSession.search( Book.class )\r\n        .select( f -&gt; f.composite( \r\n                MyPair::new, \r\n                f.entity(), \r\n                f.score() \r\n        ) )\r\n        .where( f -&gt; f.matchAll() )\r\n        .fetchHits( 20 ); \r\n```\r\n\r\nNote that Hibernate Search 6.2 (still in development) will introduce a slightly more explicit syntax:\r\n\r\n```\r\nList&lt;MyPair&lt;Book, Float&gt;&gt; hits = searchSession.search( Book.class )\r\n        .select( f -&gt; f.composite()\r\n                .from( f.entity(), f.score() )\r\n                .as( MyPair::new ) )\r\n        .where( f -&gt; f.matchAll() )\r\n        .fetchHits( 20 ); \r\n```","title":"Get document scores within Hibernate Search","body":"<p>It's in the documentation: <a href=\"https://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/#search-dsl-projection-score\" rel=\"nofollow noreferrer\"><code>score</code> projection</a>.</p>\n<pre><code>List&lt;Float&gt; hits = searchSession.search( Book.class )\n        .select( f -&gt; f.score() )\n        .where( f -&gt; f.match().field( &quot;title&quot; )\n                .matching( &quot;robot dawn&quot; ) )\n        .fetchHits( 20 );\n</code></pre>\n<p>And if you want the entity <em>and</em> the score, use both the <code>score</code> projection and the <a href=\"https://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/#search-dsl-projection-entity\" rel=\"nofollow noreferrer\"><code>entity</code> projection</a>, and combine them with a <a href=\"https://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/#search-dsl-projection-composite\" rel=\"nofollow noreferrer\"><code>composite</code> projection</a>.</p>\n<pre><code>List&lt;MyPair&lt;Book, Float&gt;&gt; hits = searchSession.search( Book.class )\n        .select( f -&gt; f.composite( \n                MyPair::new, \n                f.entity(), \n                f.score() \n        ) )\n        .where( f -&gt; f.matchAll() )\n        .fetchHits( 20 ); \n</code></pre>\n<p>Note that Hibernate Search 6.2 (still in development) will introduce a slightly more explicit syntax:</p>\n<pre><code>List&lt;MyPair&lt;Book, Float&gt;&gt; hits = searchSession.search( Book.class )\n        .select( f -&gt; f.composite()\n                .from( f.entity(), f.score() )\n                .as( MyPair::new ) )\n        .where( f -&gt; f.matchAll() )\n        .fetchHits( 20 ); \n</code></pre>\n"}],"owner":{"account_id":2497210,"reputation":1189,"user_id":2173320,"accept_rate":65,"display_name":"padmalcom"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73305731,"answer_count":1,"score":0,"last_activity_date":1660131994,"creation_date":1660130901,"question_id":73305492,"body_markdown":"we query multiple indices but with different field names and merge the result into a global search. To add pagination, I want to use the scores by sorting the results by score and calculate the page myself.\r\n\r\nMy question is now: How to I get the score for each document? I saw that I can sort by score but not how the get the actual score value.\r\n\r\nAny help is apreciated!\r\n\r\nP.S. I&#39;m using an Elasticsearch backend and hibernate search 6.1.5","title":"Get document scores within Hibernate Search","body":"<p>we query multiple indices but with different field names and merge the result into a global search. To add pagination, I want to use the scores by sorting the results by score and calculate the page myself.</p>\n<p>My question is now: How to I get the score for each document? I saw that I can sort by score but not how the get the actual score value.</p>\n<p>Any help is apreciated!</p>\n<p>P.S. I'm using an Elasticsearch backend and hibernate search 6.1.5</p>\n"},{"tags":["java","oracle","javafx","javafx-2"],"comments":[{"owner":{"account_id":1956160,"reputation":36345,"user_id":1759128,"accept_rate":54,"display_name":"ItachiUchiha"},"score":0,"creation_date":1409216228,"post_id":25543015,"comment_id":39884930,"body_markdown":"Do you want different `MenuBar` for different `Scene` ?","body":"Do you want different <code>MenuBar</code> for different <code>Scene</code> ?"},{"owner":{"account_id":1482404,"reputation":952,"user_id":1391454,"accept_rate":43,"display_name":"Mubasher"},"score":0,"creation_date":1409217396,"post_id":25543015,"comment_id":39885642,"body_markdown":"No I Said One MenuBar for All Scenes. All Scenes should use one menu bar defined by &quot;menus.fxml&quot;","body":"No I Said One MenuBar for All Scenes. All Scenes should use one menu bar defined by &quot;menus.fxml&quot;"},{"owner":{"account_id":1956160,"reputation":36345,"user_id":1759128,"accept_rate":54,"display_name":"ItachiUchiha"},"score":1,"creation_date":1409217469,"post_id":25543015,"comment_id":39885697,"body_markdown":"Why do you need multiple scenes to have same `MenuBar` ? Even if that the case, why do you need multiple `Scene` ? May be you should explain the use of multiple scenes in your application and how are you swapping between the scenes. The reason I am asking these questions is because I feel there is no need for multiple scenes in your application","body":"Why do you need multiple scenes to have same <code>MenuBar</code> ? Even if that the case, why do you need multiple <code>Scene</code> ? May be you should explain the use of multiple scenes in your application and how are you swapping between the scenes. The reason I am asking these questions is because I feel there is no need for multiple scenes in your application"},{"owner":{"account_id":1482404,"reputation":952,"user_id":1391454,"accept_rate":43,"display_name":"Mubasher"},"score":0,"creation_date":1409218084,"post_id":25543015,"comment_id":39886017,"body_markdown":"First Scene Has split Pane (no tool bar), 2nd Scene is a Web View with its tool bar. Now both should has same menu bar at top which shows Alerts, Options, Help. These Menus Required By both Scenes. I switch by calling   parrentStage.setScene(myNewScene);","body":"First Scene Has split Pane (no tool bar), 2nd Scene is a Web View with its tool bar. Now both should has same menu bar at top which shows Alerts, Options, Help. These Menus Required By both Scenes. I switch by calling   parrentStage.setScene(myNewScene);"},{"owner":{"account_id":1482404,"reputation":952,"user_id":1391454,"accept_rate":43,"display_name":"Mubasher"},"score":0,"creation_date":1409218843,"post_id":25543015,"comment_id":39886454,"body_markdown":"can you suggest me a way by which i don&#39;t have to switch scenes. I mean can I achieve switching layouts in one scene, and switching is CPU friendly, as both layout loaded with heavy components.","body":"can you suggest me a way by which i don&#39;t have to switch scenes. I mean can I achieve switching layouts in one scene, and switching is CPU friendly, as both layout loaded with heavy components."}],"answers":[{"tags":[],"owner":{"account_id":1956160,"reputation":36345,"user_id":1759128,"accept_rate":54,"display_name":"ItachiUchiha"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1409227853,"creation_date":1409227853,"answer_id":25548506,"question_id":25543015,"body_markdown":"The approach I would prefer is to use a `Scene` with `BorderPane` as its root\r\n\r\n    scene.setRoot(borderPane);\r\n\r\nYou can add the `MenuBar` to the top of the `BorderPane` and at its `Center` you can place `SplitPane`\r\n\r\n    BorderPane borderPane = new BorderPane();\r\n    borderPane.setTop(menuBar);\r\n    borderPane.setCenter(splitPane);\r\n\r\nWhenever you need to switch to `WebView` just replace it with `SplitPane` :\r\n\r\n    borderPane.setCenter(webView);\r\n\r\nFollowing this approach, your `MenuBar` will always remain on **TOP** and you can switch between `SplitPane` and `WebView`","title":"How to Achieve One Menubar for more then one scenes in javaFx","body":"<p>The approach I would prefer is to use a <code>Scene</code> with <code>BorderPane</code> as its root</p>\n\n<pre><code>scene.setRoot(borderPane);\n</code></pre>\n\n<p>You can add the <code>MenuBar</code> to the top of the <code>BorderPane</code> and at its <code>Center</code> you can place <code>SplitPane</code></p>\n\n<pre><code>BorderPane borderPane = new BorderPane();\nborderPane.setTop(menuBar);\nborderPane.setCenter(splitPane);\n</code></pre>\n\n<p>Whenever you need to switch to <code>WebView</code> just replace it with <code>SplitPane</code> :</p>\n\n<pre><code>borderPane.setCenter(webView);\n</code></pre>\n\n<p>Following this approach, your <code>MenuBar</code> will always remain on <strong>TOP</strong> and you can switch between <code>SplitPane</code> and <code>WebView</code></p>\n"}],"owner":{"account_id":1482404,"reputation":952,"user_id":1391454,"accept_rate":43,"display_name":"Mubasher"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6398,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":25548506,"answer_count":1,"score":3,"last_activity_date":1660131992,"creation_date":1409210613,"question_id":25543015,"body_markdown":"I am basically new to Java FX 2. \r\n\r\nScenario: \r\n\r\n   I have 3 Scenes and I want a way to add menu-bar such that I don&#39;t i don&#39;t want to explicitly remove the menu bar from previous scene and add it to new one. Like Some thing a Parent Scene or some way menu-bar is attached to Stage. I mean menu-bar is added just one time and always be present whatever scene is in front or not. \r\n\r\nIf This is Possible How Can I do this.\r\n\r\nHere is the Default Example Provided by Oracle Docs of JavaFX http://docs.oracle.com/javafx/2/ui_controls/MenuSample.java.html\r\n\r\n    \r\n\r\n    public class Main extends Application {\r\n     final ImageView pic = new ImageView();\r\n     final Label name = new Label();\r\n     final Label binName = new Label();\r\n     final Label description = new Label();\r\n\r\n     public static void main(String[] args) {\r\n        launch(args);\r\n     }\r\n\r\n     @Override\r\n     public void start(Stage stage) {\r\n    \r\n       stage.setTitle(&quot;Menu Sample&quot;);\r\n       Scene scene = new Scene(new VBox(), 400, 350);\r\n       scene.setFill(Color.OLDLACE);\r\n\r\n       MenuBar menuBar = new MenuBar();\r\n\r\n       // --- Graphical elements\r\n        final VBox vbox = new VBox();\r\n        vbox.setAlignment(Pos.CENTER);\r\n        vbox.setSpacing(10);        \r\n        vbox.setPadding(new Insets(0, 10, 0, 10));\r\n        makeContentsForVBox();// in this vBox area will be fill with name pic desrciption\r\n        vbox.getChildren().addAll(name, binName, pic, description); // name is lable\r\n\r\n\r\n       // --- Menu File\r\n        Menu menuFile = new Menu(&quot;File&quot;);\r\n        MenuItem add = new MenuItem(&quot;Shuffle&quot;,\r\n            new ImageView(new Image(getClass().getResourceAsStream(&quot;new.png&quot;))));\r\n        add.setOnAction(new EventHandler&lt;ActionEvent&gt;() {\r\n            public void handle(ActionEvent t) {\r\n                shuffle();\r\n                vbox.setVisible(true);\r\n            }\r\n        });\r\n\r\n        MenuItem clear = new MenuItem(&quot;Clear&quot;);\r\n        clear.setAccelerator(KeyCombination.keyCombination(&quot;Ctrl+X&quot;));\r\n        clear.setOnAction(new EventHandler&lt;ActionEvent&gt;() {\r\n            public void handle(ActionEvent t) {\r\n                vbox.setVisible(false);\r\n            }\r\n        });\r\n\r\n        MenuItem exit = new MenuItem(&quot;Exit&quot;);\r\n        exit.setOnAction(new EventHandler&lt;ActionEvent&gt;() {\r\n            public void handle(ActionEvent t) {\r\n                System.exit(0);\r\n            }\r\n        });\r\n\r\n        menuFile.getItems().addAll(add, clear, new SeparatorMenuItem(), exit);\r\n        ((VBox) scene.getRoot()).getChildren().addAll(menuBar, vbox);\r\n\r\n        stage.setScene(scene);\r\n        stage.show();\r\n     }\r\n    }\r\n    \r\nSo Here menuBar is added to a scene. if i swap the scene and bring an other scene in front ... What will i do. i think I remove menuBar from this scene and add to other or simply add to new one. so every time i have to do this when i change. Is there any way to avoid this??","title":"How to Achieve One Menubar for more then one scenes in javaFx","body":"<p>I am basically new to Java FX 2. </p>\n\n<p>Scenario: </p>\n\n<p>I have 3 Scenes and I want a way to add menu-bar such that I don't i don't want to explicitly remove the menu bar from previous scene and add it to new one. Like Some thing a Parent Scene or some way menu-bar is attached to Stage. I mean menu-bar is added just one time and always be present whatever scene is in front or not. </p>\n\n<p>If This is Possible How Can I do this.</p>\n\n<p>Here is the Default Example Provided by Oracle Docs of JavaFX <a href=\"http://docs.oracle.com/javafx/2/ui_controls/MenuSample.java.html\" rel=\"nofollow\">http://docs.oracle.com/javafx/2/ui_controls/MenuSample.java.html</a></p>\n\n<pre><code>public class Main extends Application {\n final ImageView pic = new ImageView();\n final Label name = new Label();\n final Label binName = new Label();\n final Label description = new Label();\n\n public static void main(String[] args) {\n    launch(args);\n }\n\n @Override\n public void start(Stage stage) {\n\n   stage.setTitle(\"Menu Sample\");\n   Scene scene = new Scene(new VBox(), 400, 350);\n   scene.setFill(Color.OLDLACE);\n\n   MenuBar menuBar = new MenuBar();\n\n   // --- Graphical elements\n    final VBox vbox = new VBox();\n    vbox.setAlignment(Pos.CENTER);\n    vbox.setSpacing(10);        \n    vbox.setPadding(new Insets(0, 10, 0, 10));\n    makeContentsForVBox();// in this vBox area will be fill with name pic desrciption\n    vbox.getChildren().addAll(name, binName, pic, description); // name is lable\n\n\n   // --- Menu File\n    Menu menuFile = new Menu(\"File\");\n    MenuItem add = new MenuItem(\"Shuffle\",\n        new ImageView(new Image(getClass().getResourceAsStream(\"new.png\"))));\n    add.setOnAction(new EventHandler&lt;ActionEvent&gt;() {\n        public void handle(ActionEvent t) {\n            shuffle();\n            vbox.setVisible(true);\n        }\n    });\n\n    MenuItem clear = new MenuItem(\"Clear\");\n    clear.setAccelerator(KeyCombination.keyCombination(\"Ctrl+X\"));\n    clear.setOnAction(new EventHandler&lt;ActionEvent&gt;() {\n        public void handle(ActionEvent t) {\n            vbox.setVisible(false);\n        }\n    });\n\n    MenuItem exit = new MenuItem(\"Exit\");\n    exit.setOnAction(new EventHandler&lt;ActionEvent&gt;() {\n        public void handle(ActionEvent t) {\n            System.exit(0);\n        }\n    });\n\n    menuFile.getItems().addAll(add, clear, new SeparatorMenuItem(), exit);\n    ((VBox) scene.getRoot()).getChildren().addAll(menuBar, vbox);\n\n    stage.setScene(scene);\n    stage.show();\n }\n}\n</code></pre>\n\n<p>So Here menuBar is added to a scene. if i swap the scene and bring an other scene in front ... What will i do. i think I remove menuBar from this scene and add to other or simply add to new one. so every time i have to do this when i change. Is there any way to avoid this??</p>\n"},{"tags":["java","csv","jmeter","performance-testing"],"answers":[{"tags":[],"owner":{"account_id":1666939,"reputation":1710,"user_id":1534157,"display_name":"Janesh Kodikara"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1578722870,"creation_date":1578706019,"answer_id":59690894,"question_id":59683724,"body_markdown":"It was possible to achieve your objective \r\n\r\n&gt; http request 1, http request 2, http request 3, http request 3, http\r\n&gt; request 3 (since csv has 3 records)\r\n\r\nWith following configuration in the [CSV Data Set Config][1] \r\n\r\n[![enter image description here][2]][2]\r\n\r\nFollowing condition was set in the While controller.\r\n\r\n\r\n    ${__jexl3(&quot;${UNAME}&quot;!=&quot;&lt;EOF&gt;&quot;)}\r\n\r\nWhere UNAME is a column name \r\n\r\nSince the condition is executed in while controller additional condition check was necessary before executing the http request 3 \r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\nPlease see the structure of the control in the following.\r\n[![enter image description here][4]][4]\r\n\r\n\r\nHope this is useful \r\n\r\n\r\n\r\nAlso it is possible repeat the test with several iterations with following modifications. Added a JSR223 Sampler for resetting the variable and add text EOF to the end of the CSV file. \r\n\r\n[![enter image description here][5]][5]\r\n\r\n\r\nSample [JMeter test][6] plan and [CSV file][6] are available in the GitHub. \r\n\r\n\r\n  [1]: http://jmeter.apache.org/usermanual/component_reference.html#CSV_Data_Set_Config\r\n  [2]: https://i.stack.imgur.com/MFu9x.png\r\n  [3]: https://i.stack.imgur.com/s49Te.png\r\n  [4]: https://i.stack.imgur.com/sQqwn.gif\r\n  [5]: https://i.stack.imgur.com/mEaX5.png\r\n  [6]: https://github.com/pragmatictesters/JMeter/tree/master/stackoverflow/answers/59683724","title":"How to achieve multiple http requests with csv file in jmeter?","body":"<p>It was possible to achieve your objective </p>\n\n<blockquote>\n  <p>http request 1, http request 2, http request 3, http request 3, http\n  request 3 (since csv has 3 records)</p>\n</blockquote>\n\n<p>With following configuration in the <a href=\"http://jmeter.apache.org/usermanual/component_reference.html#CSV_Data_Set_Config\" rel=\"nofollow noreferrer\">CSV Data Set Config</a> </p>\n\n<p><a href=\"https://i.stack.imgur.com/MFu9x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MFu9x.png\" alt=\"enter image description here\"></a></p>\n\n<p>Following condition was set in the While controller.</p>\n\n<pre><code>${__jexl3(\"${UNAME}\"!=\"&lt;EOF&gt;\")}\n</code></pre>\n\n<p>Where UNAME is a column name </p>\n\n<p>Since the condition is executed in while controller additional condition check was necessary before executing the http request 3 </p>\n\n<p><a href=\"https://i.stack.imgur.com/s49Te.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s49Te.png\" alt=\"enter image description here\"></a></p>\n\n<p>Please see the structure of the control in the following.\n<a href=\"https://i.stack.imgur.com/sQqwn.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sQqwn.gif\" alt=\"enter image description here\"></a></p>\n\n<p>Hope this is useful </p>\n\n<p>Also it is possible repeat the test with several iterations with following modifications. Added a JSR223 Sampler for resetting the variable and add text EOF to the end of the CSV file. </p>\n\n<p><a href=\"https://i.stack.imgur.com/mEaX5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mEaX5.png\" alt=\"enter image description here\"></a></p>\n\n<p>Sample <a href=\"https://github.com/pragmatictesters/JMeter/tree/master/stackoverflow/answers/59683724\" rel=\"nofollow noreferrer\">JMeter test</a> plan and <a href=\"https://github.com/pragmatictesters/JMeter/tree/master/stackoverflow/answers/59683724\" rel=\"nofollow noreferrer\">CSV file</a> are available in the GitHub. </p>\n"},{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1578905099,"creation_date":1578905099,"answer_id":59713103,"question_id":59683724,"body_markdown":" 1. Amend your [While Controller][1] condition to look like:\r\n\r\n        ${__jexl3(&quot;${myVar}&quot; != &quot;&lt;EOF&gt;&quot;,)}\r\n\r\n    [![enter image description here][2]][2]\r\n 2. Put your CSV Data Set Config as a child of the While Controller and configure it as follows:\r\n\r\n    [![enter image description here][3]][3]\r\n 3. Add [If Controller][4] after the CSV Data Set Config and use the same [__jexl3() function][5] as the condition:\r\n\r\n    [![enter image description here][6]][6]\r\n 4. Put your Sampler as a child of the If Controller\r\n 5. That&#39;s it, you should be able to run your script and get the number of executions equal to the number of lines in the CSV file:\r\n\r\n    [![enter image description here][7]][7]\r\n\r\n\r\n  [1]: https://www.blazemeter.com/blog/using-while-controller-jmeter/\r\n  [2]: https://i.stack.imgur.com/xIOOl.png\r\n  [3]: https://i.stack.imgur.com/gaKam.png\r\n  [4]: https://jmeter.apache.org/usermanual/component_reference.html#If_Controller\r\n  [5]: https://jmeter.apache.org/usermanual/functions.html#__jexl3\r\n  [6]: https://i.stack.imgur.com/kj9r2.png\r\n  [7]: https://i.stack.imgur.com/loF1e.png","title":"How to achieve multiple http requests with csv file in jmeter?","body":"<ol>\n<li><p>Amend your <a href=\"https://www.blazemeter.com/blog/using-while-controller-jmeter/\" rel=\"nofollow noreferrer\">While Controller</a> condition to look like:</p>\n\n<pre><code>${__jexl3(\"${myVar}\" != \"&lt;EOF&gt;\",)}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/xIOOl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xIOOl.png\" alt=\"enter image description here\"></a></p></li>\n<li><p>Put your CSV Data Set Config as a child of the While Controller and configure it as follows:</p>\n\n<p><a href=\"https://i.stack.imgur.com/gaKam.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gaKam.png\" alt=\"enter image description here\"></a></p></li>\n<li><p>Add <a href=\"https://jmeter.apache.org/usermanual/component_reference.html#If_Controller\" rel=\"nofollow noreferrer\">If Controller</a> after the CSV Data Set Config and use the same <a href=\"https://jmeter.apache.org/usermanual/functions.html#__jexl3\" rel=\"nofollow noreferrer\">__jexl3() function</a> as the condition:</p>\n\n<p><a href=\"https://i.stack.imgur.com/kj9r2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kj9r2.png\" alt=\"enter image description here\"></a></p></li>\n<li>Put your Sampler as a child of the If Controller</li>\n<li><p>That's it, you should be able to run your script and get the number of executions equal to the number of lines in the CSV file:</p>\n\n<p><a href=\"https://i.stack.imgur.com/loF1e.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/loF1e.png\" alt=\"enter image description here\"></a></p></li>\n</ol>\n"}],"owner":{"account_id":4117144,"reputation":165,"user_id":3378450,"accept_rate":56,"display_name":"Zeeshan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2567,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":59690894,"answer_count":2,"score":0,"last_activity_date":1660131959,"creation_date":1578666612,"question_id":59683724,"body_markdown":"I want to simulate a user with 2 http request and 1 http request multiple times via csv file. Below is my structure\r\n\r\n```\r\nTest Plan\r\n- Thread Group *[No. of threads = 2, Ramp-up = 1, Loop count = 1]*\r\n- - View Results Tree\r\n- - Simple Controller\r\n- - - http request 1\r\n- - - http request 2\r\n- - - while controller *[condition = ${no} (variable from csv file)]*\r\n- - - - http request 3\r\n- - - - CSV Data set Config *[Recycle on EOF = False, Stop on EOF = False, Sharing Mode = All threads] and CSV file has 3 records*\r\n```\r\n\r\nExpected: 1 user should execute \r\n&gt; http request 1, http request 2, http request 3, http request 3, http request 3 (since csv has 3 records)\r\n\r\n&lt;br&gt;\r\n\r\n- If i keep **Recycle on EOF = False, Stop on EOF = False** it keeps on running the request until script ends and after end of data (ie 3 rows) it starts throwing error\r\n- If i keep **Recycle on EOF = True, Stop on EOF = True** it runs for only 1 user and stops.\r\n- If i keep **Recycle on EOF = True, Stop on EOF = False** it keeps on running the request until script ends\r\n- If i keep **Recycle on EOF = False, Stop on EOF = True** it runs for only 1 user and stops.\r\n\r\n&lt;br&gt;\r\nBut can&#39;t simulate as per my expectation. Any help would be appreciated. Thanks.","title":"How to achieve multiple http requests with csv file in jmeter?","body":"<p>I want to simulate a user with 2 http request and 1 http request multiple times via csv file. Below is my structure</p>\n\n<pre><code>Test Plan\n- Thread Group *[No. of threads = 2, Ramp-up = 1, Loop count = 1]*\n- - View Results Tree\n- - Simple Controller\n- - - http request 1\n- - - http request 2\n- - - while controller *[condition = ${no} (variable from csv file)]*\n- - - - http request 3\n- - - - CSV Data set Config *[Recycle on EOF = False, Stop on EOF = False, Sharing Mode = All threads] and CSV file has 3 records*\n</code></pre>\n\n<p>Expected: 1 user should execute </p>\n\n<blockquote>\n  <p>http request 1, http request 2, http request 3, http request 3, http request 3 (since csv has 3 records)</p>\n</blockquote>\n\n<p><br></p>\n\n<ul>\n<li>If i keep <strong>Recycle on EOF = False, Stop on EOF = False</strong> it keeps on running the request until script ends and after end of data (ie 3 rows) it starts throwing error</li>\n<li>If i keep <strong>Recycle on EOF = True, Stop on EOF = True</strong> it runs for only 1 user and stops.</li>\n<li>If i keep <strong>Recycle on EOF = True, Stop on EOF = False</strong> it keeps on running the request until script ends</li>\n<li>If i keep <strong>Recycle on EOF = False, Stop on EOF = True</strong> it runs for only 1 user and stops.</li>\n</ul>\n\n<p><br>\nBut can't simulate as per my expectation. Any help would be appreciated. Thanks.</p>\n"},{"tags":["java","eclipse","gradle","vert.x"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1659994926,"post_id":73281648,"comment_id":129423873,"body_markdown":"Is `vertx-core-4.2.6.jar` shown below the _Project and External Dependencies_ node? If no, right-click the project and choose _Gradle &gt; Refresh Gradle Project_. If yes, do you have a `module-info.java` file? What quick fixes are provided when you go to the line with the import and hit Ctrl+1?","body":"Is <code>vertx-core-4.2.6.jar</code> shown below the <i>Project and External Dependencies</i> node? If no, right-click the project and choose <i>Gradle &gt; Refresh Gradle Project</i>. If yes, do you have a <code>module-info.java</code> file? What quick fixes are provided when you go to the line with the import and hit Ctrl+1?"},{"owner":{"account_id":25987036,"reputation":41,"user_id":19699873,"display_name":"Tommaso Ascani"},"score":0,"creation_date":1660000246,"post_id":73281648,"comment_id":129424886,"body_markdown":"I don&#39;t have Project and External Dependencies node and neither module-info.java.\nIf i hit ctrl+1 over the line with the import, it tells me to create the class","body":"I don&#39;t have Project and External Dependencies node and neither module-info.java. If i hit ctrl+1 over the line with the import, it tells me to create the class"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1660026778,"post_id":73281648,"comment_id":129428758,"body_markdown":"Please show a screenshot showing your project structure.","body":"Please show a screenshot showing your project structure."},{"owner":{"account_id":25987036,"reputation":41,"user_id":19699873,"display_name":"Tommaso Ascani"},"score":0,"creation_date":1660039467,"post_id":73281648,"comment_id":129432969,"body_markdown":"Posted in the ask","body":"Posted in the ask"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1660063733,"post_id":73281648,"comment_id":129442588,"body_markdown":"Which Buildship version do you have? Which Gradle version is used in your project? Better use `id &#39;application&#39;` instead of `id &#39;java-library&#39;`.","body":"Which Buildship version do you have? Which Gradle version is used in your project? Better use <code>id &#39;application&#39;</code> instead of <code>id &#39;java-library&#39;</code>."},{"owner":{"account_id":25987036,"reputation":41,"user_id":19699873,"display_name":"Tommaso Ascani"},"score":0,"creation_date":1660068336,"post_id":73281648,"comment_id":129444042,"body_markdown":"Don&#39;t know the versions but i tried what you said and nothing...","body":"Don&#39;t know the versions but i tried what you said and nothing..."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1660118780,"post_id":73281648,"comment_id":129454573,"body_markdown":"What exactly did you try? Please describe it in detail so that it can be reproduced (which buttons did you click, etc.). Why does your question still show `id &#39;java-library&#39;` and `jcenter()` rather than `id &#39;application&#39;` and `mavenCentral()`? For the Buildship version see _Help &gt; About Eclipse IDE: Installation Details_, and for the used Gradle version see _Project &gt; Properties: Gradle_.","body":"What exactly did you try? Please describe it in detail so that it can be reproduced (which buttons did you click, etc.). Why does your question still show <code>id &#39;java-library&#39;</code> and <code>jcenter()</code> rather than <code>id &#39;application&#39;</code> and <code>mavenCentral()</code>? For the Buildship version see <i>Help &gt; About Eclipse IDE: Installation Details</i>, and for the used Gradle version see <i>Project &gt; Properties: Gradle</i>."},{"owner":{"account_id":25987036,"reputation":41,"user_id":19699873,"display_name":"Tommaso Ascani"},"score":0,"creation_date":1660132015,"post_id":73281648,"comment_id":129459380,"body_markdown":"Sorry man i&#39;m so hopeless.\n\nNow i try to explain better","body":"Sorry man i&#39;m so hopeless.  Now i try to explain better"},{"owner":{"account_id":25987036,"reputation":41,"user_id":19699873,"display_name":"Tommaso Ascani"},"score":0,"creation_date":1660133954,"post_id":73281648,"comment_id":129460203,"body_markdown":"I  downloaded the project from my professor repo and imported in eclipse, but the funniest thing is that a friend of mine did the same and it works!!\n\nAfter i followed your advices, i changed the build.gradle, i checked the build path, i downloaded again the jdk and the jre, i tried to biuld the project with all of them but nothing, it doesn&#39;t work.\n\nI don&#39;t know what to do really","body":"I  downloaded the project from my professor repo and imported in eclipse, but the funniest thing is that a friend of mine did the same and it works!!  After i followed your advices, i changed the build.gradle, i checked the build path, i downloaded again the jdk and the jre, i tried to biuld the project with all of them but nothing, it doesn&#39;t work.  I don&#39;t know what to do really"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1660134915,"post_id":73281648,"comment_id":129460576,"body_markdown":"Having both, `id &#39;application&#39;` and `id &#39;java-library&#39;` does not make sense and `id &#39;eclipse&#39;` is not needed. It might caused by the Gradle version, Buildship version and Java version used. So please tell the Buildship version and what you have in _Project &gt; Properties: Gradle_.","body":"Having both, <code>id &#39;application&#39;</code> and <code>id &#39;java-library&#39;</code> does not make sense and <code>id &#39;eclipse&#39;</code> is not needed. It might caused by the Gradle version, Buildship version and Java version used. So please tell the Buildship version and what you have in <i>Project &gt; Properties: Gradle</i>."},{"owner":{"account_id":25987036,"reputation":41,"user_id":19699873,"display_name":"Tommaso Ascani"},"score":0,"creation_date":1660135977,"post_id":73281648,"comment_id":129460997,"body_markdown":"GUYS I DON&#39;T WHY BUT IT WORKS! \n\nI LOVE YOU &lt;3","body":"GUYS I DON&#39;T WHY BUT IT WORKS!   I LOVE YOU &lt;3"}],"answers":[{"tags":[],"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660012583,"creation_date":1660012583,"answer_id":73285974,"question_id":73281648,"body_markdown":"JCenter was [deprecated and made read-only][1] last year. Newer versions from this year, like the ones you&#39;re trying to use, will never be on JCenter. You need to replace it with `mavenCentral()`.\r\n\r\n\r\n  [1]: https://blog.gradle.org/jcenter-shutdown","title":"Gradle don&#39;t import VertX library in Eclipse","body":"<p>JCenter was <a href=\"https://blog.gradle.org/jcenter-shutdown\" rel=\"nofollow noreferrer\">deprecated and made read-only</a> last year. Newer versions from this year, like the ones you're trying to use, will never be on JCenter. You need to replace it with <code>mavenCentral()</code>.</p>\n"}],"owner":{"account_id":25987036,"reputation":41,"user_id":19699873,"display_name":"Tommaso Ascani"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1660131942,"creation_date":1659978412,"question_id":73281648,"body_markdown":"I imported a java project on eclipse where there is build.gradle as follow:\r\n\r\n    plugins {\r\n        // Apply the java-library plugin to add support for Java Library\r\n        id &#39;application&#39;\r\n        id &#39;java-library&#39;\r\n        id &#39;eclipse&#39;\r\n    }\r\n\r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n\r\n    dependencies {\r\n\r\n        implementation &#39;io.vertx:vertx-core:4.2.6&#39;    \r\n        implementation &#39;io.vertx:vertx-web:4.2.6&#39;\r\n        implementation &#39;io.vertx:vertx-web-client:4.2.6&#39;\r\n        implementation &#39;io.vertx:vertx-mqtt:4.2.6&#39;\r\n\r\n        // Use JUnit test framework\r\n        testImplementation &#39;junit:junit:4.13.2&#39;\r\n\r\n\t    /* for logging */\r\n\t    implementation &#39;org.slf4j:slf4j-api:1.7.25&#39;\r\n\t    implementation &#39;org.slf4j:slf4j-jdk14:1.7.36&#39;\r\n    }\r\n\r\nBut eclipse show an error &quot;The import io cannot be resolved&quot;, in the code:\r\n\r\n    import io.vertx.core.Vertx;\r\n\r\n    /*\r\n     * Data Service as a vertx event-loop \r\n     */\r\n    public class RunService {\r\n\r\n\r\n\t    public static void main(String[] args) {\r\n\t\t    Vertx vertx = Vertx.vertx();\r\n\t\t    DataService service = new DataService(8080);\r\n\t\t    vertx.deployVerticle(service);\r\n\t    }\r\n    }\r\n\r\nWhat can i do?\r\n\r\nProject structure:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fKcVz.png","title":"Gradle don&#39;t import VertX library in Eclipse","body":"<p>I imported a java project on eclipse where there is build.gradle as follow:</p>\n<pre><code>plugins {\n    // Apply the java-library plugin to add support for Java Library\n    id 'application'\n    id 'java-library'\n    id 'eclipse'\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n\n    implementation 'io.vertx:vertx-core:4.2.6'    \n    implementation 'io.vertx:vertx-web:4.2.6'\n    implementation 'io.vertx:vertx-web-client:4.2.6'\n    implementation 'io.vertx:vertx-mqtt:4.2.6'\n\n    // Use JUnit test framework\n    testImplementation 'junit:junit:4.13.2'\n\n    /* for logging */\n    implementation 'org.slf4j:slf4j-api:1.7.25'\n    implementation 'org.slf4j:slf4j-jdk14:1.7.36'\n}\n</code></pre>\n<p>But eclipse show an error &quot;The import io cannot be resolved&quot;, in the code:</p>\n<pre><code>import io.vertx.core.Vertx;\n\n/*\n * Data Service as a vertx event-loop \n */\npublic class RunService {\n\n\n    public static void main(String[] args) {\n        Vertx vertx = Vertx.vertx();\n        DataService service = new DataService(8080);\n        vertx.deployVerticle(service);\n    }\n}\n</code></pre>\n<p>What can i do?</p>\n<p>Project structure:</p>\n<p><a href=\"https://i.stack.imgur.com/fKcVz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fKcVz.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","apache-flink"],"comments":[{"owner":{"account_id":2274094,"reputation":40354,"user_id":2000823,"display_name":"David Anderson"},"score":1,"creation_date":1660071151,"post_id":73294487,"comment_id":129444941,"body_markdown":"You need to somehow get it to be a TIMESTAMP(3) rather than a TIMESTAMP(9).","body":"You need to somehow get it to be a TIMESTAMP(3) rather than a TIMESTAMP(9)."},{"owner":{"account_id":1044206,"reputation":380,"user_id":1049536,"display_name":"Elmar Macek"},"score":0,"creation_date":1660072276,"post_id":73294487,"comment_id":129445278,"body_markdown":"Thank you, David! I will try that out tomorrow. Your answers here are so valuable and I am always happy to stumble upon them. :)","body":"Thank you, David! I will try that out tomorrow. Your answers here are so valuable and I am always happy to stumble upon them. :)"},{"owner":{"account_id":1044206,"reputation":380,"user_id":1049536,"display_name":"Elmar Macek"},"score":0,"creation_date":1660124179,"post_id":73294487,"comment_id":129456497,"body_markdown":"@DavidAnderson I tried to achieve what you suggested, but I somehow have problems with this. I updated the question respectively.","body":"@DavidAnderson I tried to achieve what you suggested, but I somehow have problems with this. I updated the question respectively."}],"answers":[{"tags":[],"owner":{"account_id":1044206,"reputation":380,"user_id":1049536,"display_name":"Elmar Macek"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660131734,"creation_date":1660126672,"answer_id":73304510,"question_id":73294487,"body_markdown":"Ok, I found the solution to the problem. If you got a stream containing a timestamp which you want to define as event time column for watermarks, you can use this function:\r\n\r\n    Table inputTable = tableEnv.fromDataStream(\r\n                    stream,\r\n                    Schema.newBuilder()\r\n                            .column(&quot;campaign_id&quot;, &quot;STRING&quot;)\r\n                            .column(&quot;auction_id&quot;, &quot;STRING&quot;)\r\n                            .column(&quot;ts&quot;, &quot;TIMESTAMP(3)&quot;)\r\n                            .watermark(&quot;ts&quot;, &quot;SOURCE_WATERMARK()&quot;)\r\n                            .build()\r\n            );\r\n\r\nThe important part is, that you can &quot;cast&quot; the timestamp `ts` from TIMESTAMP(9)  &quot;down&quot; to TIMESTAMP(3) or any other precision below 4 and you can set the column to contain the water mark. \r\n\r\nAnother mention that seems important to me is, that only Timestamps of type `java.time.LocalDateTime` actually worked for later use as watermarks for tumbling windows.\r\n\r\nAny other attempts to influence the precision of the timestamps by differently creating java.sql.Timestamp or java.time.LocalDateTime failed. This seemed to be the only viable way.\r\n","title":"Set WatermarkStrategy for Event Timestamps","body":"<p>Ok, I found the solution to the problem. If you got a stream containing a timestamp which you want to define as event time column for watermarks, you can use this function:</p>\n<pre><code>Table inputTable = tableEnv.fromDataStream(\n                stream,\n                Schema.newBuilder()\n                        .column(&quot;campaign_id&quot;, &quot;STRING&quot;)\n                        .column(&quot;auction_id&quot;, &quot;STRING&quot;)\n                        .column(&quot;ts&quot;, &quot;TIMESTAMP(3)&quot;)\n                        .watermark(&quot;ts&quot;, &quot;SOURCE_WATERMARK()&quot;)\n                        .build()\n        );\n</code></pre>\n<p>The important part is, that you can &quot;cast&quot; the timestamp <code>ts</code> from TIMESTAMP(9)  &quot;down&quot; to TIMESTAMP(3) or any other precision below 4 and you can set the column to contain the water mark.</p>\n<p>Another mention that seems important to me is, that only Timestamps of type <code>java.time.LocalDateTime</code> actually worked for later use as watermarks for tumbling windows.</p>\n<p>Any other attempts to influence the precision of the timestamps by differently creating java.sql.Timestamp or java.time.LocalDateTime failed. This seemed to be the only viable way.</p>\n"}],"owner":{"account_id":1044206,"reputation":380,"user_id":1049536,"display_name":"Elmar Macek"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":419,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1660131734,"creation_date":1660059327,"question_id":73294487,"body_markdown":"I am trying to do a windowed aggregation query on a data stream that contains over 40 attributes in Flink. The stream&#39;s schema contains an epoch timestamp which I want to use for the WatermarkStrategy so I can actually define tumbling windows over it.\r\n\r\nI know from the [docs][1], that you can define a Timestamp using the SQL Api in an `CREATE TABLE`-query by first using `TO_TIMESTAMP_LTZ` on the epochs to convert it to a proper timestamp which can be used in the following `WATERMARK FOR`-statement. Since I got a really huge schema tho, I want to deserialise and provide the schema NOT by completely writing the complete `CREATE TABLE`-statement containing all columns BUT by using a custom class derived from the proto file that cointains the schema. As far as I know, this is only possible by providing a deserializer for the KafkaSourceBuilder and calling the `results` function of the stream on the class derived from the protofile with `protoc`. Which means, that I have to define the table using the stream api. \r\n\r\nInspired by the answer to this [question][2], I do it like this:\r\n\r\n            WatermarkStrategy watermarkStrategy = WatermarkStrategy\r\n                    .&lt;Row&gt;forBoundedOutOfOrderness(Duration.ofSeconds(10))\r\n                    .withTimestampAssigner( (event, ts) -&gt; (Long) event.getField(&quot;ts&quot;));\r\n            \r\n            tableEnv.createTemporaryView(\r\n                    &quot;bidevents&quot;,\r\n                    stream\r\n                            .returns(BiddingEvent.BidEvent.class)\r\n                            .map(e -&gt; Row.of(\r\n                                    e.getTracking().getCampaign().getId(),\r\n                                    e.getTracking().getAuction().getId(),\r\n                                    Timestamp.from(Instant.ofEpochSecond(e.getTimestamp().getMilliseconds() / 1000))\r\n                                )\r\n                            )\r\n                            .returns(Types.ROW_NAMED(new String[] {&quot;campaign_id&quot;, &quot;auction_id&quot;, &quot;ts&quot;}, Types.STRING, Types.STRING, Types.SQL_TIMESTAMP))\r\n                            .assignTimestampsAndWatermarks(watermarkStrategy)\r\n            );\r\n    \r\n    \r\n            tableEnv.executeSql(&quot;DESCRIBE bidevents&quot;).print();\r\n    \r\n            Table resultTable = tableEnv.sqlQuery(&quot;&quot; +\r\n                    &quot;SELECT &quot; +\r\n                    &quot;   TUMBLE_START(ts, INTERVAL &#39;1&#39; DAY) AS window_start, &quot; +\r\n                    &quot;   TUMBLE_END(ts, INTERVAL &#39;1&#39; DAY) AS window_end, &quot; +\r\n                    &quot;   campaign_id, &quot; +\r\n                    &quot;   count(distinct auction_id) auctions &quot; +\r\n                    &quot;FROM bidevents &quot; +\r\n                    &quot;GROUP BY TUMBLE(ts, INTERVAL &#39;1&#39; DAY), campaign_id&quot;);\r\n    \r\n            DataStream&lt;Row&gt; resultStream = tableEnv.toDataStream(resultTable);\r\n            resultStream.print();\r\n            env.execute();\r\n\r\nI get this error:\r\n\r\n    Caused by: org.apache.flink.client.program.ProgramInvocationException: The main method caused an error: Window aggregate can only be defined over a time attribute column, but TIMESTAMP(9) encountered.\r\n    \tat org.apache.flink.client.program.PackagedProgram.callMainMethod(PackagedProgram.java:372) ~[flink-dist-1.15.1.jar:1.15.1]\r\n    \tat org.apache.flink.client.program.PackagedProgram.invokeInteractiveModeForExecution(PackagedProgram.java:222) ~[flink-dist-1.15.1.jar:1.15.1]\r\n    \tat org.apache.flink.client.ClientUtils.executeProgram(ClientUtils.java:114) ~[flink-dist-1.15.1.jar:1.15.1]\r\n    \tat org.apache.flink.client.deployment.application.ApplicationDispatcherBootstrap.runApplicationEntryPoint(ApplicationDispatcherBootstrap.java:291) ~[flink-dist-1.15.1.jar:1.15.1]\r\n\r\nThis seems kind of logical, since in `line 3` I cast a java.sql.Timestamp to a Long value, which it is not (but also the stacktrace does not indicate that an error occurred during the cast). But when I do not convert the epoch (in Long-Format) during the `map`-statement to a Timestamp, I get this exception:\r\n\r\n    &quot;Cannot apply &#39;$TUMBLE&#39; to arguments of type &#39;$TUMBLE(&lt;BIGINT&gt;, &lt;INTERVAL DAY&gt;)&#39;&quot;\r\n\r\nHow can I assign the watermark AFTER the `map`-statement and use the column in the later SQL Query to create a tumbling window?\r\n\r\n\r\n\r\n\r\n__======UPDATE=====__\r\n\r\nThanks to a comment from David, I understand that I need the column to be of type `TIMESTAMP(p)` with precision `p &lt;= 3`. To my understanding this means, that my timestamp may not be more precise than having full milliseconds. So i tried different ways to create Java Timestamps (java.sql.Timestamps and java.time.LocaleDateTime) which correspond to the Flink timestamps.\r\nSome examples are:\r\n\r\n__1__ Trying to convert epochs into a LocalDateTime by setting `nanoseconds` (the 2nd parameter of `ofEpochSecond` to 0):\r\n\r\n    LocalDateTime.ofEpochSecond(e.getTimestamp().getMilliseconds() / 1000, 0, ZoneOffset.UTC )\r\n\r\n\r\n__2__ After reading the answer from Svend in this [question][3] who uses `LocalDateTime.parse` on timestamps that look like this `&quot;2021-11-16T08:19:30.123&quot;`, I tried this:\r\n\r\n    LocalDateTime.parse(\r\n          DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss&quot;).format(\r\n                LocalDateTime.ofInstant(\r\n                      Instant.ofEpochSecond(e.getTimestamp().getMilliseconds() / 1000),\r\n                      ZoneId.systemDefault()\r\n                )\r\n          )\r\n    )\r\nAs you can see, the timestamps even only have seconds-granularity (which i checked when looking at the printed output of the stream I created) which I assume should mean, they have a precision of 0. But actually when using this stream for defining a table/view, it once again has the type `TIMESTAMP(9)`.\r\n\r\n__3__ I also tried it with the sql timestamps:\r\n\r\n    new Timestamp(e.getTimestamp().getMilliseconds() )\r\n\r\nThis also did not change anything. I somehow always end up with a precision of 9.\r\n\r\nCan somebody please help me how I can fix this?\r\n\r\n\r\n  [1]: https://nightlies.apache.org/flink/flink-docs-master/docs/dev/table/concepts/time_attributes/#defining-in-ddl\r\n\r\n  [2]: https://stackoverflow.com/questions/66204166/flink-table-exception-window-aggregate-can-only-be-defined-over-a-time-attribu\r\n\r\n  [3]: https://stackoverflow.com/questions/68617522/how-to-map-java-localdatetime-to-flink-timestamp-when-using-table-api\r\n","title":"Set WatermarkStrategy for Event Timestamps","body":"<p>I am trying to do a windowed aggregation query on a data stream that contains over 40 attributes in Flink. The stream's schema contains an epoch timestamp which I want to use for the WatermarkStrategy so I can actually define tumbling windows over it.</p>\n<p>I know from the <a href=\"https://nightlies.apache.org/flink/flink-docs-master/docs/dev/table/concepts/time_attributes/#defining-in-ddl\" rel=\"nofollow noreferrer\">docs</a>, that you can define a Timestamp using the SQL Api in an <code>CREATE TABLE</code>-query by first using <code>TO_TIMESTAMP_LTZ</code> on the epochs to convert it to a proper timestamp which can be used in the following <code>WATERMARK FOR</code>-statement. Since I got a really huge schema tho, I want to deserialise and provide the schema NOT by completely writing the complete <code>CREATE TABLE</code>-statement containing all columns BUT by using a custom class derived from the proto file that cointains the schema. As far as I know, this is only possible by providing a deserializer for the KafkaSourceBuilder and calling the <code>results</code> function of the stream on the class derived from the protofile with <code>protoc</code>. Which means, that I have to define the table using the stream api.</p>\n<p>Inspired by the answer to this <a href=\"https://stackoverflow.com/questions/66204166/flink-table-exception-window-aggregate-can-only-be-defined-over-a-time-attribu\">question</a>, I do it like this:</p>\n<pre><code>        WatermarkStrategy watermarkStrategy = WatermarkStrategy\n                .&lt;Row&gt;forBoundedOutOfOrderness(Duration.ofSeconds(10))\n                .withTimestampAssigner( (event, ts) -&gt; (Long) event.getField(&quot;ts&quot;));\n        \n        tableEnv.createTemporaryView(\n                &quot;bidevents&quot;,\n                stream\n                        .returns(BiddingEvent.BidEvent.class)\n                        .map(e -&gt; Row.of(\n                                e.getTracking().getCampaign().getId(),\n                                e.getTracking().getAuction().getId(),\n                                Timestamp.from(Instant.ofEpochSecond(e.getTimestamp().getMilliseconds() / 1000))\n                            )\n                        )\n                        .returns(Types.ROW_NAMED(new String[] {&quot;campaign_id&quot;, &quot;auction_id&quot;, &quot;ts&quot;}, Types.STRING, Types.STRING, Types.SQL_TIMESTAMP))\n                        .assignTimestampsAndWatermarks(watermarkStrategy)\n        );\n\n\n        tableEnv.executeSql(&quot;DESCRIBE bidevents&quot;).print();\n\n        Table resultTable = tableEnv.sqlQuery(&quot;&quot; +\n                &quot;SELECT &quot; +\n                &quot;   TUMBLE_START(ts, INTERVAL '1' DAY) AS window_start, &quot; +\n                &quot;   TUMBLE_END(ts, INTERVAL '1' DAY) AS window_end, &quot; +\n                &quot;   campaign_id, &quot; +\n                &quot;   count(distinct auction_id) auctions &quot; +\n                &quot;FROM bidevents &quot; +\n                &quot;GROUP BY TUMBLE(ts, INTERVAL '1' DAY), campaign_id&quot;);\n\n        DataStream&lt;Row&gt; resultStream = tableEnv.toDataStream(resultTable);\n        resultStream.print();\n        env.execute();\n</code></pre>\n<p>I get this error:</p>\n<pre><code>Caused by: org.apache.flink.client.program.ProgramInvocationException: The main method caused an error: Window aggregate can only be defined over a time attribute column, but TIMESTAMP(9) encountered.\n    at org.apache.flink.client.program.PackagedProgram.callMainMethod(PackagedProgram.java:372) ~[flink-dist-1.15.1.jar:1.15.1]\n    at org.apache.flink.client.program.PackagedProgram.invokeInteractiveModeForExecution(PackagedProgram.java:222) ~[flink-dist-1.15.1.jar:1.15.1]\n    at org.apache.flink.client.ClientUtils.executeProgram(ClientUtils.java:114) ~[flink-dist-1.15.1.jar:1.15.1]\n    at org.apache.flink.client.deployment.application.ApplicationDispatcherBootstrap.runApplicationEntryPoint(ApplicationDispatcherBootstrap.java:291) ~[flink-dist-1.15.1.jar:1.15.1]\n</code></pre>\n<p>This seems kind of logical, since in <code>line 3</code> I cast a java.sql.Timestamp to a Long value, which it is not (but also the stacktrace does not indicate that an error occurred during the cast). But when I do not convert the epoch (in Long-Format) during the <code>map</code>-statement to a Timestamp, I get this exception:</p>\n<pre><code>&quot;Cannot apply '$TUMBLE' to arguments of type '$TUMBLE(&lt;BIGINT&gt;, &lt;INTERVAL DAY&gt;)'&quot;\n</code></pre>\n<p>How can I assign the watermark AFTER the <code>map</code>-statement and use the column in the later SQL Query to create a tumbling window?</p>\n<p><strong>======UPDATE=====</strong></p>\n<p>Thanks to a comment from David, I understand that I need the column to be of type <code>TIMESTAMP(p)</code> with precision <code>p &lt;= 3</code>. To my understanding this means, that my timestamp may not be more precise than having full milliseconds. So i tried different ways to create Java Timestamps (java.sql.Timestamps and java.time.LocaleDateTime) which correspond to the Flink timestamps.\nSome examples are:</p>\n<p><strong>1</strong> Trying to convert epochs into a LocalDateTime by setting <code>nanoseconds</code> (the 2nd parameter of <code>ofEpochSecond</code> to 0):</p>\n<pre><code>LocalDateTime.ofEpochSecond(e.getTimestamp().getMilliseconds() / 1000, 0, ZoneOffset.UTC )\n</code></pre>\n<p><strong>2</strong> After reading the answer from Svend in this <a href=\"https://stackoverflow.com/questions/68617522/how-to-map-java-localdatetime-to-flink-timestamp-when-using-table-api\">question</a> who uses <code>LocalDateTime.parse</code> on timestamps that look like this <code>&quot;2021-11-16T08:19:30.123&quot;</code>, I tried this:</p>\n<pre><code>LocalDateTime.parse(\n      DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd'T'HH:mm:ss&quot;).format(\n            LocalDateTime.ofInstant(\n                  Instant.ofEpochSecond(e.getTimestamp().getMilliseconds() / 1000),\n                  ZoneId.systemDefault()\n            )\n      )\n)\n</code></pre>\n<p>As you can see, the timestamps even only have seconds-granularity (which i checked when looking at the printed output of the stream I created) which I assume should mean, they have a precision of 0. But actually when using this stream for defining a table/view, it once again has the type <code>TIMESTAMP(9)</code>.</p>\n<p><strong>3</strong> I also tried it with the sql timestamps:</p>\n<pre><code>new Timestamp(e.getTimestamp().getMilliseconds() )\n</code></pre>\n<p>This also did not change anything. I somehow always end up with a precision of 9.</p>\n<p>Can somebody please help me how I can fix this?</p>\n"},{"tags":["java","apache-spark","apache-spark-sql"],"answers":[{"tags":[],"owner":{"account_id":408696,"reputation":66310,"user_id":779513,"accept_rate":66,"display_name":"Justin Pihony"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1449724720,"creation_date":1449724720,"answer_id":34194225,"question_id":34194019,"body_markdown":"A `DataFrame` is stored as `Row`s, so you can use [the methods there to cast from untyped to typed][1]. Take a look at the `get` methods.\r\n\r\n\r\n  [1]: https://spark.apache.org/docs/latest/api/java/org/apache/spark/sql/Row.html","title":"Convert Spark DataFrame to Pojo Object","body":"<p>A <code>DataFrame</code> is stored as <code>Row</code>s, so you can use <a href=\"https://spark.apache.org/docs/latest/api/java/org/apache/spark/sql/Row.html\" rel=\"nofollow\">the methods there to cast from untyped to typed</a>. Take a look at the <code>get</code> methods.</p>\n"},{"tags":[],"owner":{"account_id":8957266,"reputation":584,"user_id":6681123,"display_name":"Rahul"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1471689217,"creation_date":1471682396,"answer_id":39052201,"question_id":34194019,"body_markdown":"DataFrame&#160;is simply a type alias of&#160;Dataset[Row]&#160;. These operations are also referred as “untyped transformations” in contrast to “typed transformations” that come with strongly typed Scala/Java Datasets.\r\n\r\nThe conversion from Dataset[Row] to Dataset[Person] is very simple in spark\r\n\r\n\r\n&lt;code&gt;DataFrame result = sQLContext.sql(&quot;SELECT * FROM peoples WHERE name=&#39;test&#39;&quot;);&lt;/code&gt;\r\n\r\nAt this point, Spark converts your data into DataFrame = Dataset[Row], a collection of generic Row object, since it does not know the exact type.\r\n\r\n    // Create an Encoders for Java beans\r\n    Encoder&lt;Person&gt; personEncoder = Encoders.bean(Person.class); \r\n    Dataset&lt;Person&gt; personDF = result.as(personEncoder);\r\n    personDF.show();\r\n\r\nNow, Spark converts the Dataset[Row] -&gt; Dataset[Person] type-specific Scala / Java  JVM object, as dictated by the class Person.\r\n\r\n\r\n\r\nPlease refer to below link provided by  databricks for further details\r\n\r\n&lt;link&gt;https://databricks.com/blog/2016/07/14/a-tale-of-three-apache-spark-apis-rdds-dataframes-and-datasets.html&lt;link&gt;\r\n","title":"Convert Spark DataFrame to Pojo Object","body":"<p>DataFrame is simply a type alias of Dataset[Row] . These operations are also referred as “untyped transformations” in contrast to “typed transformations” that come with strongly typed Scala/Java Datasets.</p>\n\n<p>The conversion from Dataset[Row] to Dataset[Person] is very simple in spark</p>\n\n<p><code>DataFrame result = sQLContext.sql(\"SELECT * FROM peoples WHERE name='test'\");</code></p>\n\n<p>At this point, Spark converts your data into DataFrame = Dataset[Row], a collection of generic Row object, since it does not know the exact type.</p>\n\n<pre><code>// Create an Encoders for Java beans\nEncoder&lt;Person&gt; personEncoder = Encoders.bean(Person.class); \nDataset&lt;Person&gt; personDF = result.as(personEncoder);\npersonDF.show();\n</code></pre>\n\n<p>Now, Spark converts the Dataset[Row] -> Dataset[Person] type-specific Scala / Java  JVM object, as dictated by the class Person.</p>\n\n<p>Please refer to below link provided by  databricks for further details</p>\n\n<p><a href=\"https://databricks.com/blog/2016/07/14/a-tale-of-three-apache-spark-apis-rdds-dataframes-and-datasets.html\" rel=\"noreferrer\">https://databricks.com/blog/2016/07/14/a-tale-of-three-apache-spark-apis-rdds-dataframes-and-datasets.html</a></p>\n"},{"tags":[],"owner":{"account_id":9706811,"reputation":2870,"user_id":7200018,"display_name":"GnanaJeyam"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660131604,"creation_date":1660131604,"answer_id":73305661,"question_id":34194019,"body_markdown":"If someone looking for **conversion of json string column** in `Dataset&lt;Row&gt;` to `Dataset&lt;PojoClass&gt;` \r\n\r\n**Sample pojo: Testing**\r\n\r\n    @Data\r\n    public class Testing implements Serializable {\r\n        private String name;\r\n        private String dept;\r\n    }\r\n\r\nIn the above code `@Data` is an annotation from Lombok to generate getters and setters for this `Testing` class.\r\n\r\n**Actual conversion logic in Spark**\r\n\r\n    @Test\r\n    void shouldConvertJsonStringToPojo() {\r\n       var sparkSession  = SparkSession.builder().getOrCreate(); \r\n       var structType =  new StructType(new StructField[] {\r\n            new StructField(&quot;employee&quot;, DataTypes.StringType, false, Metadata.empty()),\r\n        });\r\n\r\n        var ds = sparkSession.createDataFrame(new ArrayList&lt;&gt;(\r\n            Arrays.asList(RowFactory.create(new Object[]{&quot;{ \\&quot;name\\&quot;: \\&quot;test\\&quot;, \\&quot;dept\\&quot;: \\&quot;IT\\&quot;}&quot;}))), structType);\r\n\r\n        var objectMapper = new ObjectMapper();\r\n        var bean = Encoders.bean(Testing.class);\r\n\r\n        var testingDataset = ds.map((MapFunction&lt;Row, Testing&gt;) row -&gt; {\r\n            var dept = row.&lt;String&gt;getAs(&quot;employee&quot;);\r\n\r\n            return objectMapper.readValue(dept, Testing.class);\r\n        }, bean);\r\n\r\n        assertEquals(&quot;test&quot;, testingDataset.head().getName());\r\n    }","title":"Convert Spark DataFrame to Pojo Object","body":"<p>If someone looking for <strong>conversion of json string column</strong> in <code>Dataset&lt;Row&gt;</code> to <code>Dataset&lt;PojoClass&gt;</code></p>\n<p><strong>Sample pojo: Testing</strong></p>\n<pre><code>@Data\npublic class Testing implements Serializable {\n    private String name;\n    private String dept;\n}\n</code></pre>\n<p>In the above code <code>@Data</code> is an annotation from Lombok to generate getters and setters for this <code>Testing</code> class.</p>\n<p><strong>Actual conversion logic in Spark</strong></p>\n<pre><code>@Test\nvoid shouldConvertJsonStringToPojo() {\n   var sparkSession  = SparkSession.builder().getOrCreate(); \n   var structType =  new StructType(new StructField[] {\n        new StructField(&quot;employee&quot;, DataTypes.StringType, false, Metadata.empty()),\n    });\n\n    var ds = sparkSession.createDataFrame(new ArrayList&lt;&gt;(\n        Arrays.asList(RowFactory.create(new Object[]{&quot;{ \\&quot;name\\&quot;: \\&quot;test\\&quot;, \\&quot;dept\\&quot;: \\&quot;IT\\&quot;}&quot;}))), structType);\n\n    var objectMapper = new ObjectMapper();\n    var bean = Encoders.bean(Testing.class);\n\n    var testingDataset = ds.map((MapFunction&lt;Row, Testing&gt;) row -&gt; {\n        var dept = row.&lt;String&gt;getAs(&quot;employee&quot;);\n\n        return objectMapper.readValue(dept, Testing.class);\n    }, bean);\n\n    assertEquals(&quot;test&quot;, testingDataset.head().getName());\n}\n</code></pre>\n"}],"owner":{"account_id":3718296,"reputation":156,"user_id":3093899,"display_name":"Don Mathew"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17250,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1660131604,"creation_date":1449723658,"question_id":34194019,"body_markdown":"Please see below code:\r\n\r\n        //Create Spark Context\r\n        SparkConf sparkConf = new SparkConf().setAppName(&quot;TestWithObjects&quot;).setMaster(&quot;local&quot;);\r\n        JavaSparkContext javaSparkContext = new JavaSparkContext(sparkConf);\r\n        //Creating RDD\r\n        JavaRDD&lt;Person&gt; personsRDD = javaSparkContext.parallelize(persons);\r\n        //Creating SQL context\r\n        SQLContext sQLContext = new SQLContext(javaSparkContext);\r\n        DataFrame personDataFrame = sQLContext.createDataFrame(personsRDD, Person.class);\r\n        personDataFrame.show();\r\n        personDataFrame.printSchema();\r\n        personDataFrame.select(&quot;name&quot;).show();\r\n        personDataFrame.registerTempTable(&quot;peoples&quot;);\r\n        DataFrame result = sQLContext.sql(&quot;SELECT * FROM peoples WHERE name=&#39;test&#39;&quot;);\r\n        result.show();\r\nAfter this I need to convert the DataFrame - &#39;result&#39; to Person Object or List&lt;Person&gt;. Thanks in advance.","title":"Convert Spark DataFrame to Pojo Object","body":"<p>Please see below code:</p>\n\n<pre><code>    //Create Spark Context\n    SparkConf sparkConf = new SparkConf().setAppName(\"TestWithObjects\").setMaster(\"local\");\n    JavaSparkContext javaSparkContext = new JavaSparkContext(sparkConf);\n    //Creating RDD\n    JavaRDD&lt;Person&gt; personsRDD = javaSparkContext.parallelize(persons);\n    //Creating SQL context\n    SQLContext sQLContext = new SQLContext(javaSparkContext);\n    DataFrame personDataFrame = sQLContext.createDataFrame(personsRDD, Person.class);\n    personDataFrame.show();\n    personDataFrame.printSchema();\n    personDataFrame.select(\"name\").show();\n    personDataFrame.registerTempTable(\"peoples\");\n    DataFrame result = sQLContext.sql(\"SELECT * FROM peoples WHERE name='test'\");\n    result.show();\n</code></pre>\n\n<p>After this I need to convert the DataFrame - 'result' to Person Object or List. Thanks in advance.</p>\n"},{"tags":["java","multithreading","volatile"],"comments":[{"owner":{"account_id":45934,"reputation":203659,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":5,"creation_date":1660130276,"post_id":73305174,"comment_id":129458754,"body_markdown":"Your thread has a `Thread.sleep(1000);` so it does not stop immediately when you set `running` to `false`; it only checks the `running` flag once per second. So it can take up to a second before the thread stops.","body":"Your thread has a <code>Thread.sleep(1000);</code> so it does not stop immediately when you set <code>running</code> to <code>false</code>; it only checks the <code>running</code> flag once per second. So it can take up to a second before the thread stops."}],"answers":[{"tags":[],"owner":{"account_id":8987085,"reputation":361,"user_id":6700319,"display_name":"Isuru Perera"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1660131360,"creation_date":1660130671,"answer_id":73305436,"question_id":73305174,"body_markdown":"The `volatile` keyword is used when you need to keep a variable only in the main memory, instead of duplicating the variable in CPU cache. So, using a volatile variable is not relevant to the problem you&#39;re having.\r\n\r\nI believe when you press enter, the value of `running` will become false. However, if the thread is asleep when you press enter, the program will not exit until the thread wakes up and starts the next iteration of the while loop. If you need to stop the thread immediately without waiting till it wakes up, you need to interrupt the thread. Use following code in your `shutDown` method in order to interrupt the thread.\r\n\r\n    public void shutDown() {\r\n        this.running = false;\r\n        this.interrupt();\r\n    }","title":"Why calling method of another thread which changes volatile variable doesn&#39;t stop the thread?","body":"<p>The <code>volatile</code> keyword is used when you need to keep a variable only in the main memory, instead of duplicating the variable in CPU cache. So, using a volatile variable is not relevant to the problem you're having.</p>\n<p>I believe when you press enter, the value of <code>running</code> will become false. However, if the thread is asleep when you press enter, the program will not exit until the thread wakes up and starts the next iteration of the while loop. If you need to stop the thread immediately without waiting till it wakes up, you need to interrupt the thread. Use following code in your <code>shutDown</code> method in order to interrupt the thread.</p>\n<pre><code>public void shutDown() {\n    this.running = false;\n    this.interrupt();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660131044,"creation_date":1660130691,"answer_id":73305440,"question_id":73305174,"body_markdown":"From the code, I would say that you are just too impatient.\r\n\r\nYou start `main()`, that in turn triggers the new thread in `MyThread` (that does not run yet!), then `main()` starts an I/O operation that suspends it (the `scanner.nextLine()` line).\r\n\r\nNow the other thread will be executed, prints &quot;Hello&quot; and goes to sleep for a second – and it will not return to life before this second has elapsed, no matter how often you hit ENTER!\r\n\r\nWhen you hit ENTER the first time, `main()` proceeds, calls `shutdown()` (that will set `running` to `false`) and terminates. But because `MyThread` is not a demon thread, the JVM continues to run.\r\n\r\nNow the second has elapsed, `MyThread` checks `running` (now `false`) and terminates, too.\r\n\r\nSo the program terminates after your first hitting ENTER, but your conception of that is different … all consecutive ENTERs are going to `/dev/null` or another type of limbo or void.\r\n\r\nThe [answer][1] from Isuru Perera shows how you can modify your code so that the program (and the JVM) terminates after the first ENTER. \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/73305436/1554195","title":"Why calling method of another thread which changes volatile variable doesn&#39;t stop the thread?","body":"<p>From the code, I would say that you are just too impatient.</p>\n<p>You start <code>main()</code>, that in turn triggers the new thread in <code>MyThread</code> (that does not run yet!), then <code>main()</code> starts an I/O operation that suspends it (the <code>scanner.nextLine()</code> line).</p>\n<p>Now the other thread will be executed, prints &quot;Hello&quot; and goes to sleep for a second – and it will not return to life before this second has elapsed, no matter how often you hit ENTER!</p>\n<p>When you hit ENTER the first time, <code>main()</code> proceeds, calls <code>shutdown()</code> (that will set <code>running</code> to <code>false</code>) and terminates. But because <code>MyThread</code> is not a demon thread, the JVM continues to run.</p>\n<p>Now the second has elapsed, <code>MyThread</code> checks <code>running</code> (now <code>false</code>) and terminates, too.</p>\n<p>So the program terminates after your first hitting ENTER, but your conception of that is different … all consecutive ENTERs are going to <code>/dev/null</code> or another type of limbo or void.</p>\n<p>The <a href=\"https://stackoverflow.com/a/73305436/1554195\">answer</a> from Isuru Perera shows how you can modify your code so that the program (and the JVM) terminates after the first ENTER.</p>\n"}],"owner":{"account_id":23112067,"reputation":11,"user_id":19734625,"display_name":"Yuliya Kiseleva"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1660131360,"creation_date":1660129537,"question_id":73305174,"body_markdown":"I am writing a code using Java volatile keyword now and I am wondering why thread stops after I press enter for 2-3 times, not just 1 time.\r\nThe code:\r\n```\r\npublic class RunThread {\r\n    public static void main(String[] args) {\r\n        MyThread myThread = new MyThread();\r\n        myThread.start();\r\n\r\n        Scanner scanner = new Scanner(System.in);\r\n        scanner.nextLine();\r\n\r\n        myThread.shutDown();\r\n    }\r\n}\r\n\r\nclass MyThread extends Thread {\r\n\r\n    public volatile boolean running = true;\r\n\r\n    public void run() {\r\n        while (running) {\r\n            System.out.println(&quot;Hello&quot;);\r\n            try {\r\n                Thread.sleep(1000);\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n    public void shutDown() {\r\n        this.running = false;\r\n    }\r\n}\r\n```\r\nThanks in advance for you help!","title":"Why calling method of another thread which changes volatile variable doesn&#39;t stop the thread?","body":"<p>I am writing a code using Java volatile keyword now and I am wondering why thread stops after I press enter for 2-3 times, not just 1 time.\nThe code:</p>\n<pre><code>public class RunThread {\n    public static void main(String[] args) {\n        MyThread myThread = new MyThread();\n        myThread.start();\n\n        Scanner scanner = new Scanner(System.in);\n        scanner.nextLine();\n\n        myThread.shutDown();\n    }\n}\n\nclass MyThread extends Thread {\n\n    public volatile boolean running = true;\n\n    public void run() {\n        while (running) {\n            System.out.println(&quot;Hello&quot;);\n            try {\n                Thread.sleep(1000);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n\n    public void shutDown() {\n        this.running = false;\n    }\n}\n</code></pre>\n<p>Thanks in advance for you help!</p>\n"},{"tags":["java","spring-boot","maven","http-status-code-404","executable-jar"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1660124750,"post_id":73303921,"comment_id":129456715,"body_markdown":"There is far too little information. You need to check the server as to why you get the error. The client side error isn&#39;t useful. If it works on your local system it should work on the server. If it doesn&#39;t you are probably trying to access a db that isn&#39;t accessible or trying to load resource from the classpath in the wrong way (most common issues). But without seeing what your app does and the actual server side error we cannot help.","body":"There is far too little information. You need to check the server as to why you get the error. The client side error isn&#39;t useful. If it works on your local system it should work on the server. If it doesn&#39;t you are probably trying to access a db that isn&#39;t accessible or trying to load resource from the classpath in the wrong way (most common issues). But without seeing what your app does and the actual server side error we cannot help."},{"owner":{"account_id":26026849,"reputation":1,"user_id":19733648,"display_name":"Celina"},"score":0,"creation_date":1660125413,"post_id":73303921,"comment_id":129456992,"body_markdown":"That&#39;s the thing I don&#39;t get any error on the server side nor on the db. So which information can I show you.","body":"That&#39;s the thing I don&#39;t get any error on the server side nor on the db. So which information can I show you."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1660126141,"post_id":73303921,"comment_id":129457275,"body_markdown":"I doubt that you don&#39;t get information. There will be some error/logging in the logfile. Else start the app with debug logging enabled `--debug` when starting the jar and check the logs.","body":"I doubt that you don&#39;t get information. There will be some error/logging in the logfile. Else start the app with debug logging enabled <code>--debug</code> when starting the jar and check the logs."},{"owner":{"account_id":26026849,"reputation":1,"user_id":19733648,"display_name":"Celina"},"score":0,"creation_date":1660130154,"post_id":73303921,"comment_id":129458706,"body_markdown":"That&#39;s my log now","body":"That&#39;s my log now"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1660130496,"post_id":73303921,"comment_id":129458843,"body_markdown":"Please dont post logs/code etc. as comments they are totally unreadable, instead edit your question. But as you can see there is nothing for `/` mapped (according to the stack).","body":"Please dont post logs/code etc. as comments they are totally unreadable, instead edit your question. But as you can see there is nothing for <code>&#47;</code> mapped (according to the stack)."}],"owner":{"account_id":26026849,"reputation":1,"user_id":19733648,"display_name":"Celina"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660131063,"creation_date":1660123918,"question_id":73303921,"body_markdown":"I have a SpringBoot application and I used the Maven command ```mvn clean package ``` to create an executable jar. \r\nMy application works fine when I start it in IntelliJ but the jar which I start from cmd throws a white label error. The weird thing is that sometimes it works and when I reload or switch the HTML page the error pops up again. \r\n\r\nThis is the only error I get: \r\n\r\n[no information where the error comes from][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bU5lF.png\r\n\r\nMy Application is not in any of the subpackages and has the annotation ```@SpringBootApplication```.\r\n\r\nI used a PostgreSQL database and Bootstrap as frontend framework. \r\n\r\nThe things I tried: \r\n- ```@ComponentScan(&quot;...&quot;)```\r\n- ```@SpringBootApplication(scanBasePackages = &quot;...&quot;)```\r\n- different WLANs\r\n- starting without firewall\r\n- putting all classes in one subpackage\r\n- different JDKs\r\n- different computers\r\n\r\nMy pom.xml looks like this: \r\n```&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.5.6&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;at.test&lt;/groupId&gt;\r\n    &lt;artifactId&gt;Test&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;Testname&lt;/name&gt;\r\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;11&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;excludes&gt;\r\n                        &lt;exclude&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                        &lt;/exclude&gt;\r\n                    &lt;/excludes&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nMy log looks like this: \r\n\r\n```2022-08-10 13:09:05.201  INFO 18536 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms\r\n2022-08-10 13:09:05.217 DEBUG 18536 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET &quot;/&quot;, parameters={}\r\n2022-08-10 13:09:05.248 DEBUG 18536 --- [nio-8080-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [ServletContext [/]]\r\n2022-08-10 13:09:05.264 DEBUG 18536 --- [nio-8080-exec-1] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found\r\n2022-08-10 13:09:05.264 DEBUG 18536 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND\r\n2022-08-10 13:09:05.279 DEBUG 18536 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : &quot;ERROR&quot; dispatch for GET &quot;/error&quot;, parameters={}\r\n2022-08-10 13:09:05.279 DEBUG 18536 --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)\r\n2022-08-10 13:09:05.358 DEBUG 18536 --- [nio-8080-exec-1] o.s.w.s.v.ContentNegotiatingViewResolver : Selected &#39;text/html&#39; given [text/html, text/html;q=0.8]\r\n2022-08-10 13:09:05.374 DEBUG 18536 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Exiting from &quot;ERROR&quot; dispatch, status 404```\r\n\r\nHas anyone solved this problem or has an idea how it can be solved? \r\nI would also appreciate if somebody knows a simple alternative!!\r\n","title":"Why throws only the executable JAR a white label error?","body":"<p>I have a SpringBoot application and I used the Maven command <code>mvn clean package </code> to create an executable jar.\nMy application works fine when I start it in IntelliJ but the jar which I start from cmd throws a white label error. The weird thing is that sometimes it works and when I reload or switch the HTML page the error pops up again.</p>\n<p>This is the only error I get:</p>\n<p><a href=\"https://i.stack.imgur.com/bU5lF.png\" rel=\"nofollow noreferrer\">no information where the error comes from</a></p>\n<p>My Application is not in any of the subpackages and has the annotation <code>@SpringBootApplication</code>.</p>\n<p>I used a PostgreSQL database and Bootstrap as frontend framework.</p>\n<p>The things I tried:</p>\n<ul>\n<li><code>@ComponentScan(&quot;...&quot;)</code></li>\n<li><code>@SpringBootApplication(scanBasePackages = &quot;...&quot;)</code></li>\n<li>different WLANs</li>\n<li>starting without firewall</li>\n<li>putting all classes in one subpackage</li>\n<li>different JDKs</li>\n<li>different computers</li>\n</ul>\n<p>My pom.xml looks like this:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.5.6&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;at.test&lt;/groupId&gt;\n    &lt;artifactId&gt;Test&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;Testname&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>My log looks like this:</p>\n<pre><code>2022-08-10 13:09:05.217 DEBUG 18536 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET &quot;/&quot;, parameters={}\n2022-08-10 13:09:05.248 DEBUG 18536 --- [nio-8080-exec-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [ServletContext [/]]\n2022-08-10 13:09:05.264 DEBUG 18536 --- [nio-8080-exec-1] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found\n2022-08-10 13:09:05.264 DEBUG 18536 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 404 NOT_FOUND\n2022-08-10 13:09:05.279 DEBUG 18536 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : &quot;ERROR&quot; dispatch for GET &quot;/error&quot;, parameters={}\n2022-08-10 13:09:05.279 DEBUG 18536 --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)\n2022-08-10 13:09:05.358 DEBUG 18536 --- [nio-8080-exec-1] o.s.w.s.v.ContentNegotiatingViewResolver : Selected 'text/html' given [text/html, text/html;q=0.8]\n2022-08-10 13:09:05.374 DEBUG 18536 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Exiting from &quot;ERROR&quot; dispatch, status 404```\n\nHas anyone solved this problem or has an idea how it can be solved? \nI would also appreciate if somebody knows a simple alternative!!\n</code></pre>\n"},{"tags":["java","selenium","microsoft-edge"],"answers":[{"tags":[],"owner":{"account_id":25983853,"reputation":1595,"user_id":19697081,"display_name":"Kendrick Li"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660100616,"creation_date":1660100480,"answer_id":73300159,"question_id":73297771,"body_markdown":"This code might be of some help: \r\n  \r\n        \r\n    prefs.put(&quot;profile.default_content_setting_values.javascript&quot;, 2);\r\n    EdgeOptions options = new EdgeOptions();\r\n    options.setExperimentalOption(&quot;prefs&quot;, prefs);\r\n    WebDriver driver = new EdgeDriver(options);\r\n    driver.get(&quot;site url&quot;);\r\n","title":"How to disable JavaScript setting in Microsoft Egde using Selenium/Java?","body":"<p>This code might be of some help:</p>\n<pre><code>prefs.put(&quot;profile.default_content_setting_values.javascript&quot;, 2);\nEdgeOptions options = new EdgeOptions();\noptions.setExperimentalOption(&quot;prefs&quot;, prefs);\nWebDriver driver = new EdgeDriver(options);\ndriver.get(&quot;site url&quot;);\n</code></pre>\n"}],"owner":{"account_id":19709076,"reputation":3,"user_id":14430046,"display_name":"Anny"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":288,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73300159,"answer_count":1,"score":0,"last_activity_date":1660130433,"creation_date":1660077037,"question_id":73297771,"body_markdown":"I&#39;ve tried to use this one to solve this problem, but it doesn&#39;t disable javascript setting in the **Microsoft Edge** browser.\r\nCould someone help with this?\r\nThanks!\r\n\r\n    EdgeOptions options = new EdgeOptions();\r\n    \r\n    options.setCapability(&quot;javascript.enabled&quot;, false);","title":"How to disable JavaScript setting in Microsoft Egde using Selenium/Java?","body":"<p>I've tried to use this one to solve this problem, but it doesn't disable javascript setting in the <strong>Microsoft Edge</strong> browser.\nCould someone help with this?\nThanks!</p>\n<pre><code>EdgeOptions options = new EdgeOptions();\n\noptions.setCapability(&quot;javascript.enabled&quot;, false);\n</code></pre>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":22771689,"reputation":1,"user_id":16929012,"display_name":"pearl bell"},"down_vote_count":2,"up_vote_count":0,"is_accepted":true,"score":-2,"last_activity_date":1660130380,"creation_date":1659519911,"answer_id":73219557,"question_id":73219390,"body_markdown":"~~~\r\n@Configuration\r\n@EnableTransactionManagement()\r\n@EnableJpaRepositories(entityManagerFactoryRef = &quot;entitymangaer&quot;,transactionManagerRef=&quot;transactionManager&quot;,basePackages=&quot;com.master.dto&quot;)\r\npublic class DbConfig {\r\n\t\r\n\t @Bean\r\n\t\t@Primary\r\n\t\t@ConfigurationProperties(&quot;spring.datasource&quot;)\r\n\t\tpublic HikariDataSource memberDataSourceProperties() {\r\n\t\t    return new HikariDataSource();\r\n\t\t}\r\n\t\t\r\n\t\t@Bean(name =&quot;erp_cha_ngpillai&quot;)\r\n\t\t@ConfigurationProperties(prefix = &quot;spring.datasource.configuration&quot;)\r\n\t\tpublic DataSource datasourceMaster() {\r\n\t\t\tmemberDataSourceProperties().setMaximumPoolSize(1);\r\n\t\t\tmemberDataSourceProperties().setUsername(&quot;test&quot;);\r\n\t\t\tmemberDataSourceProperties().setPassword(&quot;test&quot;);\r\n\t\t\tmemberDataSourceProperties().setJdbcUrl(&quot;jdbc:mysql://localhost/test?sessionVariables=sql_mode=&#39;NO_ENGINE_SUBSTITUTION&#39;&amp;jdbcCompliantTruncation=false&quot;);\r\n\t\t\tmemberDataSourceProperties().setDriverClassName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n\t\t\treturn memberDataSourceProperties();\r\n\t\t}\r\n   \r\n\r\n\t@Bean(name = &quot;entitymangaer&quot;)\r\n\t@Primary\r\n\tpublic LocalContainerEntityManagerFactoryBean masterEntityManagerFactory(EntityManagerFactoryBuilder builder,@Qualifier(&quot;erp_cha_ngpillai&quot;) DataSource dataSource) {\r\n\r\n\t\treturn  builder.dataSource(dataSource).packages(PlaceOrganizationDao.class).build(); \r\n\t}\r\n\r\n\t@Bean(name =&quot;transactionManager&quot;)\r\n\t@Primary\r\n\tpublic PlatformTransactionManager  masterManager(@Qualifier(&quot;entitymangaer&quot;) EntityManagerFactory entityManagerFactory)\r\n\t{\r\n\t\treturn new JpaTransactionManager(entityManagerFactory);\r\n\t}\r\n\r\n}\r\n~~~","title":"How to set Hikari Pool MaximumSize","body":"<pre><code>@Configuration\n@EnableTransactionManagement()\n@EnableJpaRepositories(entityManagerFactoryRef = &quot;entitymangaer&quot;,transactionManagerRef=&quot;transactionManager&quot;,basePackages=&quot;com.master.dto&quot;)\npublic class DbConfig {\n    \n     @Bean\n        @Primary\n        @ConfigurationProperties(&quot;spring.datasource&quot;)\n        public HikariDataSource memberDataSourceProperties() {\n            return new HikariDataSource();\n        }\n        \n        @Bean(name =&quot;erp_cha_ngpillai&quot;)\n        @ConfigurationProperties(prefix = &quot;spring.datasource.configuration&quot;)\n        public DataSource datasourceMaster() {\n            memberDataSourceProperties().setMaximumPoolSize(1);\n            memberDataSourceProperties().setUsername(&quot;test&quot;);\n            memberDataSourceProperties().setPassword(&quot;test&quot;);\n            memberDataSourceProperties().setJdbcUrl(&quot;jdbc:mysql://localhost/test?sessionVariables=sql_mode='NO_ENGINE_SUBSTITUTION'&amp;jdbcCompliantTruncation=false&quot;);\n            memberDataSourceProperties().setDriverClassName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n            return memberDataSourceProperties();\n        }\n   \n\n    @Bean(name = &quot;entitymangaer&quot;)\n    @Primary\n    public LocalContainerEntityManagerFactoryBean masterEntityManagerFactory(EntityManagerFactoryBuilder builder,@Qualifier(&quot;erp_cha_ngpillai&quot;) DataSource dataSource) {\n\n        return  builder.dataSource(dataSource).packages(PlaceOrganizationDao.class).build(); \n    }\n\n    @Bean(name =&quot;transactionManager&quot;)\n    @Primary\n    public PlatformTransactionManager  masterManager(@Qualifier(&quot;entitymangaer&quot;) EntityManagerFactory entityManagerFactory)\n    {\n        return new JpaTransactionManager(entityManagerFactory);\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":22771689,"reputation":1,"user_id":16929012,"display_name":"pearl bell"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":163,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73219557,"answer_count":1,"score":-1,"last_activity_date":1660130380,"creation_date":1659519119,"question_id":73219390,"body_markdown":"Hikari size set total 1 how to set in dbConfig\r\n\r\n\r\n\r\n\r\n","title":"How to set Hikari Pool MaximumSize","body":"<p>Hikari size set total 1 how to set in dbConfig</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":18881067,"reputation":47,"user_id":13773454,"display_name":"B Santhosh"},"score":0,"creation_date":1660126745,"post_id":73304509,"comment_id":129457483,"body_markdown":"giving little snippet is fine","body":"giving little snippet is fine"},{"owner":{"account_id":9706811,"reputation":2870,"user_id":7200018,"display_name":"GnanaJeyam"},"score":1,"creation_date":1660126914,"post_id":73304509,"comment_id":129457537,"body_markdown":"`We can add different query parameters here!` Are you referring to there will be more than 2 query parameters ?","body":"<code>We can add different query parameters here!</code> Are you referring to there will be more than 2 query parameters ?"},{"owner":{"account_id":18881067,"reputation":47,"user_id":13773454,"display_name":"B Santhosh"},"score":0,"creation_date":1660127464,"post_id":73304509,"comment_id":129457744,"body_markdown":"Yes..sometimes single parameter","body":"Yes..sometimes single parameter"}],"answers":[{"tags":[],"owner":{"account_id":20443259,"reputation":1,"user_id":14999646,"display_name":"Surge99"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660128016,"creation_date":1660128016,"answer_id":73304813,"question_id":73304509,"body_markdown":"    @GetMapping(&quot;/api/buy&quot;)\r\n    @ResponseBody\r\n    public String getBuy(@RequestParam String protectId) {\r\n        return &quot;ID: &quot; + protectId;\r\n\r\n    }\r\n\r\n    example request will be\r\n    http://localhost:8080/api/buy?protectId=abc","title":"How to query data based based on different query parameter spring boot","body":"<pre><code>@GetMapping(&quot;/api/buy&quot;)\n@ResponseBody\npublic String getBuy(@RequestParam String protectId) {\n    return &quot;ID: &quot; + protectId;\n\n}\n\nexample request will be\nhttp://localhost:8080/api/buy?protectId=abc\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7739148,"reputation":3345,"user_id":5859654,"display_name":"Nemanja"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660128935,"creation_date":1660128935,"answer_id":73305033,"question_id":73304509,"body_markdown":"you can pass multiple params in url like, for example:\r\n\r\n   \r\n\r\n    http://localhost:2000/custom?brand=dell&amp;limit=20&amp;price=20000&amp;sort=asc\r\n\r\nand in order to get this query fields , you can use map like \r\n\r\n  \r\n\r\n    @RequestMapping(method = RequestMethod.GET, value = &quot;/custom&quot;)\r\n    public String controllerMethod(@RequestParam Map&lt;String, String&gt; customQuery) {\r\n    \r\n        System.out.println(&quot;customQuery = brand &quot; + customQuery.get(&quot;brand&quot;));\r\n        System.out.println(&quot;customQuery = limit &quot; + customQuery.get(&quot;limit&quot;));\r\n        System.out.println(&quot;customQuery = price &quot; + customQuery.get(&quot;price&quot;));\r\n        System.out.println(&quot;customQuery = other &quot; + customQuery.get(&quot;other&quot;));\r\n        System.out.println(&quot;customQuery = sort &quot; + customQuery.get(&quot;sort&quot;));\r\n    \r\n        return customQuery.toString();\r\n    }","title":"How to query data based based on different query parameter spring boot","body":"<p>you can pass multiple params in url like, for example:</p>\n<pre><code>http://localhost:2000/custom?brand=dell&amp;limit=20&amp;price=20000&amp;sort=asc\n</code></pre>\n<p>and in order to get this query fields , you can use map like</p>\n<pre><code>@RequestMapping(method = RequestMethod.GET, value = &quot;/custom&quot;)\npublic String controllerMethod(@RequestParam Map&lt;String, String&gt; customQuery) {\n\n    System.out.println(&quot;customQuery = brand &quot; + customQuery.get(&quot;brand&quot;));\n    System.out.println(&quot;customQuery = limit &quot; + customQuery.get(&quot;limit&quot;));\n    System.out.println(&quot;customQuery = price &quot; + customQuery.get(&quot;price&quot;));\n    System.out.println(&quot;customQuery = other &quot; + customQuery.get(&quot;other&quot;));\n    System.out.println(&quot;customQuery = sort &quot; + customQuery.get(&quot;sort&quot;));\n\n    return customQuery.toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25979974,"reputation":11,"user_id":19693867,"display_name":"KUVAR VAIBHAV SINGH"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660130266,"creation_date":1660129416,"answer_id":73305151,"question_id":73304509,"body_markdown":" 1. **You can use like below and add more request param.**\r\n       \r\n        @GetMapping(&quot;/buy&quot;)\r\n        public String buy(@RequestParam(&quot;projectionId&quot;) long projectionId, \r\n                 @RequestParam(&quot;place&quot;) String place){\r\n           return &quot;some response&quot;; \r\n        } \r\nAPI ENDPOINT: http://your hostname:port/buy?projectionId=value1&amp;place=value2\r\n    \r\n    If you have multiple parameter you can prepare one json.\r\n    \r\n    {\r\n      &quot;field1&quot;: &quot;value1&quot;,\r\n      &quot;field2&quot;: &quot;value2&quot;, \r\n      &quot;field3&quot;: &quot;value&quot;, \r\n      &quot;field4&quot;: &quot;value&quot;,\r\n      &quot;field5&quot;: &quot;value5&quot;,\r\n      &quot;field6&quot;: &quot;value6&quot; \r\n    }\r\n    \r\n    **This JSON take as a payload.**\r\n    \r\n     public String buy(@RequestBody String payload){  \r\n    if(StringUtils.isNotBlank(payload)){\r\n         //String convert into class.\r\n         Test test = new ObjectMapper().readValue(payload, Test.class);\r\n         //Then whatever you want you can use it.\r\n    \r\n       } \r\n     return &quot;some response&quot;;\r\n}\r\n\r\nAPI ENDPOINT: http://your hostname:port/buy\r\n\r\nRequest body:  {\r\n      &quot;field1&quot;: &quot;value1&quot;,\r\n      &quot;field2&quot;: &quot;value2&quot;, \r\n      &quot;field3&quot;: &quot;value&quot;, \r\n      &quot;field4&quot;: &quot;value&quot;,\r\n      &quot;field5&quot;: &quot;value5&quot;,\r\n      &quot;field6&quot;: &quot;value6&quot; \r\n    }\r\n","title":"How to query data based based on different query parameter spring boot","body":"<ol>\n<li><p><strong>You can use like below and add more request param.</strong></p>\n<pre><code>@GetMapping(&quot;/buy&quot;)\npublic String buy(@RequestParam(&quot;projectionId&quot;) long projectionId, \n         @RequestParam(&quot;place&quot;) String place){\n   return &quot;some response&quot;; \n} \n</code></pre>\n</li>\n</ol>\n<p>API ENDPOINT: http://your hostname:port/buy?projectionId=value1&amp;place=value2</p>\n<pre><code>If you have multiple parameter you can prepare one json.\n\n{\n  &quot;field1&quot;: &quot;value1&quot;,\n  &quot;field2&quot;: &quot;value2&quot;, \n  &quot;field3&quot;: &quot;value&quot;, \n  &quot;field4&quot;: &quot;value&quot;,\n  &quot;field5&quot;: &quot;value5&quot;,\n  &quot;field6&quot;: &quot;value6&quot; \n}\n\n**This JSON take as a payload.**\n\n public String buy(@RequestBody String payload){  \nif(StringUtils.isNotBlank(payload)){\n     //String convert into class.\n     Test test = new ObjectMapper().readValue(payload, Test.class);\n     //Then whatever you want you can use it.\n\n   } \n return &quot;some response&quot;;\n</code></pre>\n<p>}</p>\n<p>API ENDPOINT: http://your hostname:port/buy</p>\n<p>Request body:  {\n&quot;field1&quot;: &quot;value1&quot;,\n&quot;field2&quot;: &quot;value2&quot;,\n&quot;field3&quot;: &quot;value&quot;,\n&quot;field4&quot;: &quot;value&quot;,\n&quot;field5&quot;: &quot;value5&quot;,\n&quot;field6&quot;: &quot;value6&quot;\n}</p>\n"}],"owner":{"account_id":18881067,"reputation":47,"user_id":13773454,"display_name":"B Santhosh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1328,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1660147294,"accepted_answer_id":73305033,"answer_count":3,"score":0,"last_activity_date":1660130266,"creation_date":1660126666,"question_id":73304509,"body_markdown":"I&#39;m new to spring boot framework and i was developing spring boot rest API.\r\n\r\n\r\ni have endpoint and i have query the database from spring boot\r\n\r\n    /buy?projectionId=value1&amp;place=value2  // we can add different query parameters here\r\n\r\nhow to write a controller and service using spring boot.","title":"How to query data based based on different query parameter spring boot","body":"<p>I'm new to spring boot framework and i was developing spring boot rest API.</p>\n<p>i have endpoint and i have query the database from spring boot</p>\n<pre><code>/buy?projectionId=value1&amp;place=value2  // we can add different query parameters here\n</code></pre>\n<p>how to write a controller and service using spring boot.</p>\n"},{"tags":["java","arrays","algorithm","sorting"],"answers":[{"tags":[],"owner":{"account_id":18725089,"reputation":1634,"user_id":13651978,"display_name":"Yash Shah"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1596391778,"creation_date":1596391432,"answer_id":63219431,"question_id":63219244,"body_markdown":"Performing Some changes in your code as shown below, it worked for the test cases mentioned in the problem above...\r\n\r\n**1.** Suppose the value at index i+1 violates the sorted order then you should take temp1 = i and temp2 = i+2.\r\n\r\n**2.** Find the maximum value in array2 which lies between temp1 and temp2.\r\n\r\n\r\n\r\n    // &quot;static void main&quot; must be defined in a public class.\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n          \r\n       Scanner s = new Scanner(System.in);      \r\n            \r\n       int n1 = s.nextInt();\r\n       s.nextLine();\r\n       int[] array1 = new int[n1];\r\n       for (int i = 0; i &lt; n1; i++) \r\n           array1[i] = s.nextInt();\r\n       s.nextLine();\r\n       \r\n       int n2 = s.nextInt();\r\n       s.nextLine();\r\n       int[] array2 = new int[n2];\r\n       for (int i = 0; i &lt; n2; i++) \r\n           array2[i] = s.nextInt();\r\n       s.nextLine();\r\n      \r\n       \r\n        int temp1=0;\r\n        int temp2=0;\r\n     \r\n        \r\n        for(int i=0; i &lt; array1.length-1;i++) \r\n           if (array1[i] &gt; array1[i+1]){ \r\n               temp1=array1[i];\r\n               temp2=array1[i+2];\r\n           }   \r\n    \r\n       \r\n       int temp3 = -1;\r\n       for(int j=0; j&lt;array2.length-1;j++) \r\n           if(array2[j] &gt; temp1 &amp;&amp; array2[j] &lt; temp2)\r\n               if(array2[j]&gt;temp3)\r\n                   temp3 = array2[j];\r\n    \r\n        if(temp3 == -1)\r\n            System.out.println(&quot;Not Possible\\n&quot;);\r\n        else\r\n            System.out.println(temp3);\r\n    \r\n        }\r\n    }","title":"Replacing element in an almost sorted array with an element from another array","body":"<p>Performing Some changes in your code as shown below, it worked for the test cases mentioned in the problem above...</p>\n<p><strong>1.</strong> Suppose the value at index i+1 violates the sorted order then you should take temp1 = i and temp2 = i+2.</p>\n<p><strong>2.</strong> Find the maximum value in array2 which lies between temp1 and temp2.</p>\n<pre><code>// &quot;static void main&quot; must be defined in a public class.\npublic class Main {\n    public static void main(String[] args) {\n      \n   Scanner s = new Scanner(System.in);      \n        \n   int n1 = s.nextInt();\n   s.nextLine();\n   int[] array1 = new int[n1];\n   for (int i = 0; i &lt; n1; i++) \n       array1[i] = s.nextInt();\n   s.nextLine();\n   \n   int n2 = s.nextInt();\n   s.nextLine();\n   int[] array2 = new int[n2];\n   for (int i = 0; i &lt; n2; i++) \n       array2[i] = s.nextInt();\n   s.nextLine();\n  \n   \n    int temp1=0;\n    int temp2=0;\n \n    \n    for(int i=0; i &lt; array1.length-1;i++) \n       if (array1[i] &gt; array1[i+1]){ \n           temp1=array1[i];\n           temp2=array1[i+2];\n       }   \n\n   \n   int temp3 = -1;\n   for(int j=0; j&lt;array2.length-1;j++) \n       if(array2[j] &gt; temp1 &amp;&amp; array2[j] &lt; temp2)\n           if(array2[j]&gt;temp3)\n               temp3 = array2[j];\n\n    if(temp3 == -1)\n        System.out.println(&quot;Not Possible\\n&quot;);\n    else\n        System.out.println(temp3);\n\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":15950635,"reputation":45,"user_id":11510068,"display_name":"Donita0937"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":960,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":63219431,"answer_count":1,"score":0,"last_activity_date":1660130137,"creation_date":1596390316,"question_id":63219244,"body_markdown":"My first array is almost sorted. I need to replace the unsorted element with the max possible element from the second array. The wrongly placed element would not be on the 0th or n-1 index. And if array1[i] is less than array1[i-1], then index i is the wrong index. \r\n\r\nFor ex: \r\nfirst input 5\r\nfirst array: 2 7 8 6 13\r\nsecond input 4\r\nsecond array 15 11 9 5\r\nMy result would be 11\r\n\r\nhowever, If there is no possible element I could take from the second array, it would print not possible. for instance : 14 15 16 17 or if it has 0 element.\r\n\r\nHow can I fix this code?\r\n\r\n\r\n\r\n  \r\n   \r\n\r\n       \r\n       int n1 = s.nextInt();\r\n       int[] array1 = new int[n1];\r\n       for (int i = 0; i &lt; n1; i++) {\r\n           array1[i] = s.nextInt();\r\n       }\r\n       \r\n       int n2 = s.nextInt();\r\n       int[] array2 = new int[n2];\r\n       for (int i = 0; i &lt; n2; i++) {\r\n           array2[i] = s.nextInt();\r\n       }\r\n      \r\n       \r\n        int temp1=0;\r\n        int temp2=0;\r\n     \r\n        \r\n        for(int i=0; i &lt; array1.length-1;i++) {\r\n           if (array1[i] &gt; array1[i+1]) {\r\n               temp1=array1[i+1];\r\n               temp2=array1[i+2];\r\n               break;\r\n           }\r\n           \r\n       }\r\n       \r\n    int temp3 = 0;\r\n       for(int j=0; j&lt;=array2.length-1;j++) {\r\n           if(array2[j] &gt; temp1 &amp;&amp; array2[j] &lt; temp2){\r\n               temp3 = array2[j];\r\n               break;\r\n           }\r\n       }\r\n       System.out.println(temp3);\r\n    \r\n       }\r\n    \r\n    }\r\n\r\n","title":"Replacing element in an almost sorted array with an element from another array","body":"<p>My first array is almost sorted. I need to replace the unsorted element with the max possible element from the second array. The wrongly placed element would not be on the 0th or n-1 index. And if array1[i] is less than array1[i-1], then index i is the wrong index.</p>\n<p>For ex:\nfirst input 5\nfirst array: 2 7 8 6 13\nsecond input 4\nsecond array 15 11 9 5\nMy result would be 11</p>\n<p>however, If there is no possible element I could take from the second array, it would print not possible. for instance : 14 15 16 17 or if it has 0 element.</p>\n<p>How can I fix this code?</p>\n<pre><code>   int n1 = s.nextInt();\n   int[] array1 = new int[n1];\n   for (int i = 0; i &lt; n1; i++) {\n       array1[i] = s.nextInt();\n   }\n   \n   int n2 = s.nextInt();\n   int[] array2 = new int[n2];\n   for (int i = 0; i &lt; n2; i++) {\n       array2[i] = s.nextInt();\n   }\n  \n   \n    int temp1=0;\n    int temp2=0;\n \n    \n    for(int i=0; i &lt; array1.length-1;i++) {\n       if (array1[i] &gt; array1[i+1]) {\n           temp1=array1[i+1];\n           temp2=array1[i+2];\n           break;\n       }\n       \n   }\n   \nint temp3 = 0;\n   for(int j=0; j&lt;=array2.length-1;j++) {\n       if(array2[j] &gt; temp1 &amp;&amp; array2[j] &lt; temp2){\n           temp3 = array2[j];\n           break;\n       }\n   }\n   System.out.println(temp3);\n\n   }\n\n}\n</code></pre>\n"},{"tags":["java","arrays","char","output"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1353553292,"post_id":13505274,"comment_id":18484881,"body_markdown":"You could simply do `System.out.println(new String(b));` Using one of String&#39;s constructors to convert the char array into a String.","body":"You could simply do <code>System.out.println(new String(b));</code> Using one of String&#39;s constructors to convert the char array into a String."}],"answers":[{"tags":[],"owner":{"account_id":1968635,"reputation":21509,"user_id":1768226,"accept_rate":80,"display_name":"shazin"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1353553110,"creation_date":1353553110,"answer_id":13505297,"question_id":13505274,"body_markdown":"Use \r\n\r\n    System.out.println(&quot;char[] b: &quot; + Arrays.toString(b));\r\n\r\nThe gibrish you get is the Class name followed by the memory address of the object. Problem occurs when you try to append b with a string `char[] b:` in this case the char array b.toString() method is called thus [C@56e5b723 is printed. \r\n\r\n[ indicates that it is an array\r\nC indicates the class in this case char\r\n@56e5b723 indicates the memory location","title":"Java: println with char array gives gibberish","body":"<p>Use </p>\n\n<pre><code>System.out.println(\"char[] b: \" + Arrays.toString(b));\n</code></pre>\n\n<p>The gibrish you get is the Class name followed by the memory address of the object. Problem occurs when you try to append b with a string <code>char[] b:</code> in this case the char array b.toString() method is called thus [C@56e5b723 is printed. </p>\n\n<p>[ indicates that it is an array\nC indicates the class in this case char\n@56e5b723 indicates the memory location</p>\n"},{"tags":[],"owner":{"account_id":106662,"reputation":4499,"user_id":284051,"accept_rate":90,"display_name":"Doug Moscrop"},"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1353553292,"creation_date":1353553292,"answer_id":13505323,"question_id":13505274,"body_markdown":"When you say\r\n\r\n    System.out.println(b);\r\n\r\nIt results in a call to `print(char[] s)` then `println()`\r\n\r\nThe JavaDoc for `print(char[] s)` says:\r\n\r\n&gt; Print an array of characters. The characters are converted into bytes\r\n&gt; according to the platform&#39;s default character encoding, and these\r\n&gt; bytes are written in exactly the manner of the write(int) method.\r\n\r\nSo it performs a byte-by-byte print out.\r\n\r\nWhen you say\r\n\r\n    System.out.println(&quot;char[] b: &quot; + b);\r\n\r\nIt results in a call to `print(String)`, and so what you&#39;re actually doing is appending to a `String` an `Object` which invokes `toString()` on the `Object` -- this, as with all `Object` by default, and in the case of an `Array`, prints the value of the reference (the memory address).\r\n\r\nYou could do:\r\n\r\n    System.out.println(&quot;char[] b: &quot; + new String(b));\r\n\r\nNote that this is &quot;wrong&quot; in the sense that you&#39;re not paying any mind to encoding and are using the system default. Learn about encoding sooner rather than later.","title":"Java: println with char array gives gibberish","body":"<p>When you say</p>\n\n<pre><code>System.out.println(b);\n</code></pre>\n\n<p>It results in a call to <code>print(char[] s)</code> then <code>println()</code></p>\n\n<p>The JavaDoc for <code>print(char[] s)</code> says:</p>\n\n<blockquote>\n  <p>Print an array of characters. The characters are converted into bytes\n  according to the platform's default character encoding, and these\n  bytes are written in exactly the manner of the write(int) method.</p>\n</blockquote>\n\n<p>So it performs a byte-by-byte print out.</p>\n\n<p>When you say</p>\n\n<pre><code>System.out.println(\"char[] b: \" + b);\n</code></pre>\n\n<p>It results in a call to <code>print(String)</code>, and so what you're actually doing is appending to a <code>String</code> an <code>Object</code> which invokes <code>toString()</code> on the <code>Object</code> -- this, as with all <code>Object</code> by default, and in the case of an <code>Array</code>, prints the value of the reference (the memory address).</p>\n\n<p>You could do:</p>\n\n<pre><code>System.out.println(\"char[] b: \" + new String(b));\n</code></pre>\n\n<p>Note that this is \"wrong\" in the sense that you're not paying any mind to encoding and are using the system default. Learn about encoding sooner rather than later.</p>\n"},{"tags":[],"owner":{"account_id":18250,"reputation":39302,"user_id":41655,"accept_rate":76,"display_name":"millimoose"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1353553334,"creation_date":1353553334,"answer_id":13505328,"question_id":13505274,"body_markdown":"An array&#39;s `toString()` method (which is what&#39;s called when you do `&quot;...&quot; + b`) is only meant to give debugging output. There isn&#39;t a special case where a `char[]`&#39;s `toString()` will give you the original string - arrays of all types have the same `toString()` implementation.\r\n\r\nIf you want to get the original string from the char array, use:\r\n\r\n    String a2 = new String(b);","title":"Java: println with char array gives gibberish","body":"<p>An array's <code>toString()</code> method (which is what's called when you do <code>\"...\" + b</code>) is only meant to give debugging output. There isn't a special case where a <code>char[]</code>'s <code>toString()</code> will give you the original string - arrays of all types have the same <code>toString()</code> implementation.</p>\n\n<p>If you want to get the original string from the char array, use:</p>\n\n<pre><code>String a2 = new String(b);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2068902,"reputation":71,"user_id":1843802,"display_name":"chenyun"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1353553366,"creation_date":1353553366,"answer_id":13505330,"question_id":13505274,"body_markdown":"    System.out.println(&quot;char[] b: &quot; + b);\r\n\r\nThis is just like \r\n\r\n    System.out.println((&quot;char[] b: &quot; + b.toString());\r\n\r\nYou can look up &quot;Object.toString()&quot;","title":"Java: println with char array gives gibberish","body":"<pre><code>System.out.println(\"char[] b: \" + b);\n</code></pre>\n\n<p>This is just like </p>\n\n<pre><code>System.out.println((\"char[] b: \" + b.toString());\n</code></pre>\n\n<p>You can look up \"Object.toString()\"</p>\n"},{"tags":[],"owner":{"account_id":2261229,"reputation":100,"user_id":1991275,"display_name":"user1991275"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1461653798,"creation_date":1461653798,"answer_id":36857429,"question_id":13505274,"body_markdown":"Use\r\n3:e row!\r\n\r\n    Scanner input = new Scanner(System.in);\r\n    char[] txt = input.next().toCharArray();\r\n    System.out.println((char[])txt);\r\n\r\n","title":"Java: println with char array gives gibberish","body":"<p>Use\n3:e row!</p>\n\n<pre><code>Scanner input = new Scanner(System.in);\nchar[] txt = input.next().toCharArray();\nSystem.out.println((char[])txt);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24014985,"reputation":1,"user_id":17998055,"display_name":"Akriti Singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660130126,"creation_date":1660130109,"answer_id":73305315,"question_id":13505274,"body_markdown":"    private void print(char[] arr) {\r\n        try {\r\n            PrintStream stream\r\n                    = new PrintStream(System.out);\r\n            stream.println(arr);\r\n            stream.flush();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }","title":"Java: println with char array gives gibberish","body":"<pre><code>private void print(char[] arr) {\n    try {\n        PrintStream stream\n                = new PrintStream(System.out);\n        stream.println(arr);\n        stream.flush();\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1112829,"reputation":1096,"user_id":1102945,"accept_rate":75,"display_name":"stephenwade"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43841,"favorite_count":0,"down_vote_count":0,"up_vote_count":28,"accepted_answer_id":13505323,"answer_count":6,"score":28,"last_activity_date":1660130126,"creation_date":1353552929,"question_id":13505274,"body_markdown":"Here&#39;s the problem. This code:\r\n\r\n    String a = &quot;0000&quot;;\r\n     System.out.println(a);\r\n    char[] b = a.toCharArray();\r\n     System.out.println(b);\r\n\r\nreturns\r\n\r\n&lt;pre&gt;\r\n0000\r\n0000\r\n&lt;/pre&gt;\r\n\r\n&lt;br /&gt;But this code:\r\n\r\n    String a = &quot;0000&quot;;\r\n     System.out.println(&quot;String a: &quot; + a);\r\n    char[] b = a.toCharArray();\r\n     System.out.println(&quot;char[] b: &quot; + b);\r\n\r\nreturns\r\n\r\n&lt;pre&gt;\r\nString a: 0000\r\nchar[] b: [C@56e5b723\r\n&lt;/pre&gt;\r\n\r\n&lt;br /&gt;What in the world is going on? Seems there should be a simple enough solution, but I can&#39;t seem to figure it out.","title":"Java: println with char array gives gibberish","body":"<p>Here's the problem. This code:</p>\n\n<pre><code>String a = \"0000\";\n System.out.println(a);\nchar[] b = a.toCharArray();\n System.out.println(b);\n</code></pre>\n\n<p>returns</p>\n\n<pre>\n0000\n0000\n</pre>\n\n<p><br />But this code:</p>\n\n<pre><code>String a = \"0000\";\n System.out.println(\"String a: \" + a);\nchar[] b = a.toCharArray();\n System.out.println(\"char[] b: \" + b);\n</code></pre>\n\n<p>returns</p>\n\n<pre>\nString a: 0000\nchar[] b: [C@56e5b723\n</pre>\n\n<p><br />What in the world is going on? Seems there should be a simple enough solution, but I can't seem to figure it out.</p>\n"},{"tags":["java","maven","maven-dependency-plugin","maven-war-plugin"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1660121261,"post_id":73302996,"comment_id":129455447,"body_markdown":"Would it be ok to pass in the value as a system property or environment variable and let logback look up the value itself at runtime?","body":"Would it be ok to pass in the value as a system property or environment variable and let logback look up the value itself at runtime?"},{"owner":{"account_id":6747606,"reputation":87,"user_id":5198733,"display_name":"ceepan"},"score":0,"creation_date":1660122030,"post_id":73302996,"comment_id":129455741,"body_markdown":"It is possible but would still require the setup for everything we did.  We were hoping for something a bit simpler that meant everything we do gets the correct name in log files without much in the way of setup.","body":"It is possible but would still require the setup for everything we did.  We were hoping for something a bit simpler that meant everything we do gets the correct name in log files without much in the way of setup."}],"answers":[{"tags":[],"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660129406,"creation_date":1660128833,"answer_id":73305010,"question_id":73302996,"body_markdown":"After this logback.xml file is put inside an artifact jar file, it cannot be changed easily anymore during build time. \r\n\r\nI would suggest a slightly different approach:\r\n\r\n* rename this file to e.g. `logback-YOURCOMPANY.xml` and change it so it can be included.\r\n* create a tiny logback.xml file put in each project as-is which sets the property as you do, and then includes `logback-YOURCOMPANY.xml`\r\n* enable filtering on this tiny logback.xml file so the variable is expanded during Maven build.\r\n\r\nSee https://logback.qos.ch/manual/configuration.html#fileInclusion for details.\r\n\r\n","title":"Getting a logback.xml from a dependency jar and filtering it with the maven-war-plugin","body":"<p>After this logback.xml file is put inside an artifact jar file, it cannot be changed easily anymore during build time.</p>\n<p>I would suggest a slightly different approach:</p>\n<ul>\n<li>rename this file to e.g. <code>logback-YOURCOMPANY.xml</code> and change it so it can be included.</li>\n<li>create a tiny logback.xml file put in each project as-is which sets the property as you do, and then includes <code>logback-YOURCOMPANY.xml</code></li>\n<li>enable filtering on this tiny logback.xml file so the variable is expanded during Maven build.</li>\n</ul>\n<p>See <a href=\"https://logback.qos.ch/manual/configuration.html#fileInclusion\" rel=\"nofollow noreferrer\">https://logback.qos.ch/manual/configuration.html#fileInclusion</a> for details.</p>\n"}],"owner":{"account_id":6747606,"reputation":87,"user_id":5198733,"display_name":"ceepan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":884,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660129406,"creation_date":1660119648,"question_id":73302996,"body_markdown":"We have a common logback.xml file that we would like to use across different web apps.  It includes a RollinFileAppender which should see files named as the project artifactId.  The logback.xml includes a property like so \r\n\r\n    &lt;property name=&quot;LOG_FILE_NAME&quot; value=&quot;$project.artifactId}&quot;/&gt;\r\n\r\nWithin our web project we would like to include a dependency e.g. logging-setup\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;our.group.id&lt;/groupId&gt;\r\n        &lt;artifactId&gt;logging-setup&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nHow do we easily allow the maven-war-plugin to filter this file so that the ${project.artifactId} reference is replaced with the actual project.artifactId?  I think it can be done using a combination of the maven-dependency-plugin and the maven-war-plugin something like below.  However that would need to be included in every project POM.  Is there an easier way?\r\n\r\nThanks,\r\nPaul\r\n\r\n    &lt;build&gt;\r\n    \t\t&lt;resources&gt;\r\n    \t\t\t&lt;resource&gt;\r\n    \t\t\t\t&lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n    \t\t\t\t&lt;filtering&gt;true&lt;/filtering&gt;\r\n    \t\t\t&lt;/resource&gt;\r\n    \t\t&lt;/resources&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${maven-dependency-plugin.version}&lt;/version&gt;\r\n    \t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;id&gt;unpack&lt;/id&gt;\r\n    \t\t\t\t\t\t&lt;phase&gt;compile&lt;/phase&gt;\r\n    \t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t&lt;goal&gt;unpack&lt;/goal&gt;\r\n    \t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t\t&lt;artifactItems&gt;\r\n    \t\t\t\t\t\t\t\t&lt;artifactItem&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;groupId&gt;our.group.id&lt;/groupId&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;artifactId&gt;logging-setup&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;version&gt;${logging-setup.version}&lt;/version&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;type&gt;jar&lt;/type&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;overWrite&gt;true&lt;/overWrite&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;outputDirectory&gt;${basedir}/src/main/resources&lt;/outputDirectory&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;includes&gt;**/logback.xml&lt;/includes&gt;\r\n    \t\t\t\t\t\t\t\t&lt;/artifactItem&gt;\r\n    \t\t\t\t\t\t\t&lt;/artifactItems&gt;\r\n    \t\t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;/executions&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n    \t\t\t\t\t&lt;webResources&gt;\r\n    \t\t\t\t\t\t&lt;resource&gt;\r\n    \t\t\t\t\t\t\t&lt;directory&gt;${basedir}/src/main/resources&lt;/directory&gt;\r\n    \t\t\t\t\t\t\t&lt;filtering&gt;true&lt;/filtering&gt;\r\n    \t\t\t\t\t\t\t&lt;targetPath&gt;WEB-INF/classes&lt;/targetPath&gt;\r\n    \t\t\t\t\t\t\t&lt;includes&gt;\r\n    \t\t\t\t\t\t\t\t&lt;include&gt;logback.xml&lt;/include&gt;\r\n    \t\t\t\t\t\t\t&lt;/includes&gt;\r\n    \t\t\t\t\t\t&lt;/resource&gt;\r\n    \t\t\t\t\t&lt;/webResources&gt;\r\n    \t\t\t\t\t&lt;packagingExcludes&gt;WEB-INF/lib/logging-setup-*.jar&lt;/packagingExcludes&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;","title":"Getting a logback.xml from a dependency jar and filtering it with the maven-war-plugin","body":"<p>We have a common logback.xml file that we would like to use across different web apps.  It includes a RollinFileAppender which should see files named as the project artifactId.  The logback.xml includes a property like so</p>\n<pre><code>&lt;property name=&quot;LOG_FILE_NAME&quot; value=&quot;$project.artifactId}&quot;/&gt;\n</code></pre>\n<p>Within our web project we would like to include a dependency e.g. logging-setup</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;our.group.id&lt;/groupId&gt;\n    &lt;artifactId&gt;logging-setup&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>How do we easily allow the maven-war-plugin to filter this file so that the ${project.artifactId} reference is replaced with the actual project.artifactId?  I think it can be done using a combination of the maven-dependency-plugin and the maven-war-plugin something like below.  However that would need to be included in every project POM.  Is there an easier way?</p>\n<p>Thanks,\nPaul</p>\n<pre><code>&lt;build&gt;\n        &lt;resources&gt;\n            &lt;resource&gt;\n                &lt;directory&gt;src/main/resources&lt;/directory&gt;\n                &lt;filtering&gt;true&lt;/filtering&gt;\n            &lt;/resource&gt;\n        &lt;/resources&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven-dependency-plugin.version}&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;unpack&lt;/id&gt;\n                        &lt;phase&gt;compile&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;unpack&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;artifactItems&gt;\n                                &lt;artifactItem&gt;\n                                    &lt;groupId&gt;our.group.id&lt;/groupId&gt;\n                                    &lt;artifactId&gt;logging-setup&lt;/artifactId&gt;\n                                    &lt;version&gt;${logging-setup.version}&lt;/version&gt;\n                                    &lt;type&gt;jar&lt;/type&gt;\n                                    &lt;overWrite&gt;true&lt;/overWrite&gt;\n                                    &lt;outputDirectory&gt;${basedir}/src/main/resources&lt;/outputDirectory&gt;\n                                    &lt;includes&gt;**/logback.xml&lt;/includes&gt;\n                                &lt;/artifactItem&gt;\n                            &lt;/artifactItems&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n                    &lt;webResources&gt;\n                        &lt;resource&gt;\n                            &lt;directory&gt;${basedir}/src/main/resources&lt;/directory&gt;\n                            &lt;filtering&gt;true&lt;/filtering&gt;\n                            &lt;targetPath&gt;WEB-INF/classes&lt;/targetPath&gt;\n                            &lt;includes&gt;\n                                &lt;include&gt;logback.xml&lt;/include&gt;\n                            &lt;/includes&gt;\n                        &lt;/resource&gt;\n                    &lt;/webResources&gt;\n                    &lt;packagingExcludes&gt;WEB-INF/lib/logging-setup-*.jar&lt;/packagingExcludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n"},{"tags":["java","android-studio","android-fragments","android-edittext","parent-child"],"comments":[{"owner":{"account_id":10927511,"reputation":3072,"user_id":8031784,"display_name":"Aniruddh Parihar"},"score":0,"creation_date":1659509771,"post_id":73208022,"comment_id":129308758,"body_markdown":"where you have taken addProduct button in layout? Share the crash logs exactly.","body":"where you have taken addProduct button in layout? Share the crash logs exactly."},{"owner":{"account_id":2113491,"reputation":536,"user_id":6854117,"accept_rate":72,"display_name":"Moeez"},"score":0,"creation_date":1659510294,"post_id":73208022,"comment_id":129308925,"body_markdown":"@AniruddhParihar I have updated my code pl check","body":"@AniruddhParihar I have updated my code pl check"},{"owner":{"account_id":10927511,"reputation":3072,"user_id":8031784,"display_name":"Aniruddh Parihar"},"score":0,"creation_date":1659510417,"post_id":73208022,"comment_id":129308967,"body_markdown":"share the crash logs exactly","body":"share the crash logs exactly"},{"owner":{"account_id":2113491,"reputation":536,"user_id":6854117,"accept_rate":72,"display_name":"Moeez"},"score":0,"creation_date":1659514094,"post_id":73208022,"comment_id":129310179,"body_markdown":"@AniruddhParihar pl check","body":"@AniruddhParihar pl check"},{"owner":{"account_id":10927511,"reputation":3072,"user_id":8031784,"display_name":"Aniruddh Parihar"},"score":0,"creation_date":1659521572,"post_id":73208022,"comment_id":129312969,"body_markdown":"layout2 = LayoutInflater.from(mContext).inflate(R.layout.product_layout, mLinearLayout, false);\n\non both places where inflating the view, don&#39;t pass the mLinearLayout as ViewGroup, Pass null instead of that.","body":"layout2 = LayoutInflater.from(mContext).inflate(R.layout.product_layou&zwnj;&#8203;t, mLinearLayout, false);  on both places where inflating the view, don&#39;t pass the mLinearLayout as ViewGroup, Pass null instead of that."},{"owner":{"account_id":2113491,"reputation":536,"user_id":6854117,"accept_rate":72,"display_name":"Moeez"},"score":0,"creation_date":1659533382,"post_id":73208022,"comment_id":129317442,"body_markdown":"@AniruddhParihar it does work but now I am unable to search any product. When I type in the name it doesn&#39;t gives me any product name","body":"@AniruddhParihar it does work but now I am unable to search any product. When I type in the name it doesn&#39;t gives me any product name"},{"owner":{"account_id":2113491,"reputation":536,"user_id":6854117,"accept_rate":72,"display_name":"Moeez"},"score":0,"creation_date":1659533674,"post_id":73208022,"comment_id":129317553,"body_markdown":"In other words now my auto complete text view is not working","body":"In other words now my auto complete text view is not working"},{"owner":{"account_id":10927511,"reputation":3072,"user_id":8031784,"display_name":"Aniruddh Parihar"},"score":0,"creation_date":1659534439,"post_id":73208022,"comment_id":129317758,"body_markdown":"it will not affect Auto Suggestion, if you think so then don&#39;t remove mLinearLayout from onCreateView Method.","body":"it will not affect Auto Suggestion, if you think so then don&#39;t remove mLinearLayout from onCreateView Method."},{"owner":{"account_id":2113491,"reputation":536,"user_id":6854117,"accept_rate":72,"display_name":"Moeez"},"score":0,"creation_date":1659534656,"post_id":73208022,"comment_id":129317829,"body_markdown":"I didn&#39;t remove it from onCreateView because I am passing the layout2 to my `this.initElementsPrd(layout2);` to render the fields from other layout","body":"I didn&#39;t remove it from onCreateView because I am passing the layout2 to my <code>this.initElementsPrd(layout2);</code> to render the fields from other layout"},{"owner":{"account_id":2113491,"reputation":536,"user_id":6854117,"accept_rate":72,"display_name":"Moeez"},"score":0,"creation_date":1659590306,"post_id":73208022,"comment_id":129331484,"body_markdown":"@AniruddhParihar can you pl check my new upated?","body":"@AniruddhParihar can you pl check my new upated?"},{"owner":{"account_id":12731703,"reputation":3217,"user_id":9248098,"display_name":"Gowtham K K"},"score":0,"creation_date":1659859288,"post_id":73208022,"comment_id":129391285,"body_markdown":"@Moeez Please check my answer whether you are missing the same thing.","body":"@Moeez Please check my answer whether you are missing the same thing."}],"answers":[{"tags":[],"owner":{"account_id":12731703,"reputation":3217,"user_id":9248098,"display_name":"Gowtham K K"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659859237,"creation_date":1659859237,"answer_id":73265811,"question_id":73208022,"body_markdown":"You are adding a layout by calling this method. But autocomplete textview will not work for the newly added layout because you haven&#39;t set the adapter to newly added Layout.\r\nYou need to call setProd() in addLayout() to bind adapter to autocomplete text view when new layout is added. \r\n\r\n     private void addLayout(){\r\n        layout2 = LayoutInflater.from(mContext).inflate(R.layout.product_layout, mLinearLayout, false);\r\n        productAuto = (AutoCompleteTextView) view.findViewById(R.id.tv_product);\r\n        qtyEditText = (EditText) view.findViewById(R.id.prod_qty);\r\n        prodPriceEditText = (EditText)view.findViewById(R.id.prod_price);\r\n        prodSpecsEditText = (EditText)view.findViewById(R.id.prod_specs);\r\n        setProd();\r\n     }\r\n\r\n&gt; Note: For handling dynamic layouts it would be better to handle view object in a list and handle instead of reinstantiating every time to existing object. ","title":"Android studio app crashes on the button click","body":"<p>You are adding a layout by calling this method. But autocomplete textview will not work for the newly added layout because you haven't set the adapter to newly added Layout.\nYou need to call setProd() in addLayout() to bind adapter to autocomplete text view when new layout is added.</p>\n<pre><code> private void addLayout(){\n    layout2 = LayoutInflater.from(mContext).inflate(R.layout.product_layout, mLinearLayout, false);\n    productAuto = (AutoCompleteTextView) view.findViewById(R.id.tv_product);\n    qtyEditText = (EditText) view.findViewById(R.id.prod_qty);\n    prodPriceEditText = (EditText)view.findViewById(R.id.prod_price);\n    prodSpecsEditText = (EditText)view.findViewById(R.id.prod_specs);\n    setProd();\n }\n</code></pre>\n<blockquote>\n<p>Note: For handling dynamic layouts it would be better to handle view object in a list and handle instead of reinstantiating every time to existing object.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2113491,"reputation":536,"user_id":6854117,"accept_rate":72,"display_name":"Moeez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660129161,"creation_date":1660129161,"answer_id":73305097,"question_id":73208022,"body_markdown":"Following the [Gowtham K K][1] answer I have done the following changes in my code \r\n\r\n    private void addLayout() {\r\n        layout2 = LayoutInflater.from(mContext).inflate(R.layout.product_layout, mLinearLayout, false);\r\n        productAuto = (AutoCompleteTextView) layout2.findViewById(R.id.tv_product);\r\n        qtyEditText = (EditText) layout2.findViewById(R.id.prod_qty);\r\n        prodPriceEditText = (EditText)layout2.findViewById(R.id.prod_price);\r\n        prodSpecsEditText = (EditText)layout2.findViewById(R.id.prod_specs);\r\n        removeProduct = (Button)layout2.findViewById(R.id.btn_rmv);\r\n       \r\n        setProd();\r\n        \r\n    }\r\n\r\nThen in my `setProd()` function\r\n\r\n     prodArrayList = new ArrayList&lt;String&gt;();\r\n        if (isNewSurvey) {\r\n            prodArrayList.addAll(new ProductManager(getActivity()).getAvailableProducts());\r\n            Log.d(&quot;Ali&quot;, &quot;prod is new booking&quot;);\r\n        } else {\r\n            prodArrayList.addAll(new ProductManager(getActivity()).getProducts());\r\n            Log.d(&quot;Ali&quot;, &quot;sub div edit survey&quot;);\r\n        }\r\n        prodAdapter = new ArrayAdapter&lt;String&gt;(getActivity(), android.R.layout.simple_spinner_dropdown_item, prodArrayList);\r\n        productAuto.setAdapter(prodAdapter);\r\n\r\nImplementing the above solution my program is working now\r\n\r\n  [1]: https://stackoverflow.com/a/73265811/6854117","title":"Android studio app crashes on the button click","body":"<p>Following the <a href=\"https://stackoverflow.com/a/73265811/6854117\">Gowtham K K</a> answer I have done the following changes in my code</p>\n<pre><code>private void addLayout() {\n    layout2 = LayoutInflater.from(mContext).inflate(R.layout.product_layout, mLinearLayout, false);\n    productAuto = (AutoCompleteTextView) layout2.findViewById(R.id.tv_product);\n    qtyEditText = (EditText) layout2.findViewById(R.id.prod_qty);\n    prodPriceEditText = (EditText)layout2.findViewById(R.id.prod_price);\n    prodSpecsEditText = (EditText)layout2.findViewById(R.id.prod_specs);\n    removeProduct = (Button)layout2.findViewById(R.id.btn_rmv);\n   \n    setProd();\n    \n}\n</code></pre>\n<p>Then in my <code>setProd()</code> function</p>\n<pre><code> prodArrayList = new ArrayList&lt;String&gt;();\n    if (isNewSurvey) {\n        prodArrayList.addAll(new ProductManager(getActivity()).getAvailableProducts());\n        Log.d(&quot;Ali&quot;, &quot;prod is new booking&quot;);\n    } else {\n        prodArrayList.addAll(new ProductManager(getActivity()).getProducts());\n        Log.d(&quot;Ali&quot;, &quot;sub div edit survey&quot;);\n    }\n    prodAdapter = new ArrayAdapter&lt;String&gt;(getActivity(), android.R.layout.simple_spinner_dropdown_item, prodArrayList);\n    productAuto.setAdapter(prodAdapter);\n</code></pre>\n<p>Implementing the above solution my program is working now</p>\n"}],"owner":{"account_id":2113491,"reputation":536,"user_id":6854117,"accept_rate":72,"display_name":"Moeez"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1637,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":73305097,"answer_count":2,"score":1,"last_activity_date":1660129161,"creation_date":1659445238,"question_id":73208022,"body_markdown":"I am working on android studio. I have created some `fragments` and they are smoothly working. The app would be collecting data from users for order booking. Now, I have a button and on this button click, I am calling another layout to enter the products. The data is selected from the json file. Below is my code \r\n\r\n**Fragment** \r\n\r\n    Button addProduct;\r\n    private LinearLayout mLinearLayout;\r\n    public View layout2;\r\n    public View view = null;\r\n\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n\r\n       if (view == null) {\r\n            view = inflater.inflate(R.layout.new_survey_form_layout, container, false); // my main layout\r\n            mLinearLayout = view.findViewById(R.id.ll_prod);// the layout in which I want to call my below layout\r\n            layout2 = inflater.inflate(R.layout.product_layout, mLinearLayout, false);// product layout\r\n\r\n\r\n            this.initElements(view);// all of my fields against my new_survey_layout_form_layout\r\n            this.initElementsPrd(layout2); // the fields of my second layout\r\n        }\r\n    }\r\n\r\n     private void initElementsPrd(View view) {\r\n        productAuto = (AutoCompleteTextView) view.findViewById(R.id.tv_product);\r\n        qtyEditText = (EditText) view.findViewById(R.id.prod_qty);\r\n        prodPriceEditText = (EditText)view.findViewById(R.id.prod_price);\r\n        prodSpecsEditText = (EditText)view.findViewById(R.id.prod_specs);\r\n        setProd();// to set the adapters for selecting the product name\r\n    }\r\n     private void setProd()\r\n    {\r\n        Log.d(&quot;Ali&quot;, &quot;sub div&quot;);\r\n        if (prodArrayList == null) {\r\n            prodArrayList = new ArrayList&lt;String&gt;();\r\n            Log.d(&quot;Ali&quot;, &quot;prod new&quot;);\r\n        } else {\r\n            prodArrayList.clear();\r\n            Log.d(&quot;Ali&quot;, &quot;prod clear&quot;);\r\n        }\r\n\r\n        if (isNewSurvey) {\r\n            prodArrayList.addAll(new ProductManager(getActivity()).getAvailableProducts());\r\n            Log.d(&quot;Ali&quot;, &quot;prod is new booking&quot;);\r\n        } else {\r\n            prodArrayList.addAll(new ProductManager(getActivity()).getProducts());\r\n            Log.d(&quot;Ali&quot;, &quot;sub div edit survey&quot;);\r\n        }\r\n        if (prodAdapter == null) {\r\n            Log.d(&quot;Ali&quot;, &quot;sub div new adapter&quot;);\r\n            prodAdapter = new ArrayAdapter&lt;String&gt;(getActivity(), android.R.layout.simple_spinner_dropdown_item, prodArrayList);\r\n            productAuto.setAdapter(prodAdapter);\r\n        } else {\r\n            Log.d(&quot;Ali&quot;, &quot;sub div notify&quot;);\r\n            prodAdapter.notifyDataSetChanged();\r\n        }\r\n    }\r\n\r\n            addProduct.setOnClickListener(v -&gt; {\r\n\r\n\r\n            addLayout();\r\n\r\n        });\r\n\r\nNow when I click the add button for the first time it does show the layout of the product but when I click on the same button for the second time the app crashes. Below is the working\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**Error Message**\r\n\r\n&gt; The specified child already has a parent. You must call removeView() on the child&#39;s parent first.\r\n\r\n**Solution Tried**\r\n\r\n\r\nInside add layout function I have done the following \r\n\r\n     private void addLayout(){\r\n        layout2 = LayoutInflater.from(mContext).inflate(R.layout.product_layout, mLinearLayout, false);\r\n        productAuto = (AutoCompleteTextView) view.findViewById(R.id.tv_product);\r\n        qtyEditText = (EditText) view.findViewById(R.id.prod_qty);\r\n        prodPriceEditText = (EditText)view.findViewById(R.id.prod_price);\r\n        prodSpecsEditText = (EditText)view.findViewById(R.id.prod_specs);\r\n\r\n     }\r\n\r\nThe product form is shown every time when I click on the `Add new Product` button. But I can&#39;t select a product in this case. \r\n\r\n**Update 1**\r\n\r\nI have taken `addProduct` button in `this.initElements(view);` \r\n\r\n    private void initElements(View view) {\r\n\r\n        newSurveyScrollview = (ScrollView) view.findViewById(R.id.new_survey_scrollview);\r\n     refNofield1 = (EditText) view.findViewById(R.id.ref_no_field_1);\r\n        consumerNameEditText = (EditText) view.findViewById(R.id.consumer_name);\r\n        consumerAddressEditText = (EditText) view.findViewById(R.id.consumer_address);\r\n        latitudeEditText = (EditText) view.findViewById(R.id.latitude);\r\n        longitudeEditText = (EditText) view.findViewById(R.id.longitude);\r\n        placeEditText = (EditText) view.findViewById(R.id.place);\r\n        subDivisionSpinner = (Spinner) view.findViewById(R.id.sub_division_spinner);\r\n    cameraButton = (Button) view.findViewById(R.id.open_camera);\r\n        saveButton = (Button) view.findViewById(R.id.save_survey_form);\r\n        resetButton = (Button) view.findViewById(R.id.survey_reset);\r\n        getRefNoButton = (Button) view.findViewById(R.id.get_ref_no_button);\r\n        getLatLangButton = (ImageButton) view.findViewById(R.id.get_lat_lang_button);\r\n        addProduct = (Button)view.findViewById(R.id.btn_prd);\r\n\r\n    }\r\n\r\n**Error Log**\r\n\r\n    Process: com.example.thumbsol.accuratesurvey, PID: 6854\r\n    java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child&#39;s parent first.\r\n        at android.view.ViewGroup.addViewInner(ViewGroup.java:5038)\r\n        at android.view.ViewGroup.addView(ViewGroup.java:4869)\r\n        at android.view.ViewGroup.addView(ViewGroup.java:4809)\r\n        at android.view.ViewGroup.addView(ViewGroup.java:4782)\r\n        at com.example.thumbsol.accuratesurvey.fragments.SurveyFormFragment.addLayout(SurveyFormFragment.java:1904)\r\n        at com.example.thumbsol.accuratesurvey.fragments.SurveyFormFragment.lambda$initListeners$1$com-example-thumbsol-accuratesurvey-fragments-SurveyFormFragment(SurveyFormFragment.java:550)\r\n        at com.example.thumbsol.accuratesurvey.fragments.SurveyFormFragment$$ExternalSyntheticLambda3.onClick(Unknown Source:2)\r\n        at android.view.View.performClick(View.java:6608)\r\n        at android.view.View.performClickInternal(View.java:6585)\r\n        at android.view.View.access$3100(View.java:785)\r\n        at android.view.View$PerformClick.run(View.java:25921)\r\n        at android.os.Handler.handleCallback(Handler.java:873)\r\n        at android.os.Handler.dispatchMessage(Handler.java:99)\r\n        at android.os.Looper.loop(Looper.java:201)\r\n        at android.app.ActivityThread.main(ActivityThread.java:6810)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:547)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:873)\r\n\r\nThe error comes at below part \r\n\r\n     private void addLayout() {\r\n\r\n        mLinearLayout.addView(layout2);\r\n    }\r\n\r\n**Update 2**\r\n\r\nI have removed the second layout part from `onCreatView` and done the following \r\n\r\n    private void addLayout() {\r\n       layout2 = LayoutInflater.from(mContext).inflate(R.layout.product_layout, mLinearLayout, false);\r\n        this.initElementsPrd(layout2);\r\n        mLinearLayout.addView(layout2);\r\n    }\r\n\r\nBelow is what I am getting now \r\n\r\n[![enter image description here][2]][2]\r\n\r\nThe autocomplete is working for the 1st one but for the second or 3rd upto `N` its not working.\r\n\r\nAny help would be highly appreciated. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zyrpT.gif\r\n  [2]: https://i.stack.imgur.com/7rwtz.gif","title":"Android studio app crashes on the button click","body":"<p>I am working on android studio. I have created some <code>fragments</code> and they are smoothly working. The app would be collecting data from users for order booking. Now, I have a button and on this button click, I am calling another layout to enter the products. The data is selected from the json file. Below is my code</p>\n<p><strong>Fragment</strong></p>\n<pre><code>Button addProduct;\nprivate LinearLayout mLinearLayout;\npublic View layout2;\npublic View view = null;\n\npublic View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n\n   if (view == null) {\n        view = inflater.inflate(R.layout.new_survey_form_layout, container, false); // my main layout\n        mLinearLayout = view.findViewById(R.id.ll_prod);// the layout in which I want to call my below layout\n        layout2 = inflater.inflate(R.layout.product_layout, mLinearLayout, false);// product layout\n\n\n        this.initElements(view);// all of my fields against my new_survey_layout_form_layout\n        this.initElementsPrd(layout2); // the fields of my second layout\n    }\n}\n\n private void initElementsPrd(View view) {\n    productAuto = (AutoCompleteTextView) view.findViewById(R.id.tv_product);\n    qtyEditText = (EditText) view.findViewById(R.id.prod_qty);\n    prodPriceEditText = (EditText)view.findViewById(R.id.prod_price);\n    prodSpecsEditText = (EditText)view.findViewById(R.id.prod_specs);\n    setProd();// to set the adapters for selecting the product name\n}\n private void setProd()\n{\n    Log.d(&quot;Ali&quot;, &quot;sub div&quot;);\n    if (prodArrayList == null) {\n        prodArrayList = new ArrayList&lt;String&gt;();\n        Log.d(&quot;Ali&quot;, &quot;prod new&quot;);\n    } else {\n        prodArrayList.clear();\n        Log.d(&quot;Ali&quot;, &quot;prod clear&quot;);\n    }\n\n    if (isNewSurvey) {\n        prodArrayList.addAll(new ProductManager(getActivity()).getAvailableProducts());\n        Log.d(&quot;Ali&quot;, &quot;prod is new booking&quot;);\n    } else {\n        prodArrayList.addAll(new ProductManager(getActivity()).getProducts());\n        Log.d(&quot;Ali&quot;, &quot;sub div edit survey&quot;);\n    }\n    if (prodAdapter == null) {\n        Log.d(&quot;Ali&quot;, &quot;sub div new adapter&quot;);\n        prodAdapter = new ArrayAdapter&lt;String&gt;(getActivity(), android.R.layout.simple_spinner_dropdown_item, prodArrayList);\n        productAuto.setAdapter(prodAdapter);\n    } else {\n        Log.d(&quot;Ali&quot;, &quot;sub div notify&quot;);\n        prodAdapter.notifyDataSetChanged();\n    }\n}\n\n        addProduct.setOnClickListener(v -&gt; {\n\n\n        addLayout();\n\n    });\n</code></pre>\n<p>Now when I click the add button for the first time it does show the layout of the product but when I click on the same button for the second time the app crashes. Below is the working</p>\n<p><a href=\"https://i.stack.imgur.com/zyrpT.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zyrpT.gif\" alt=\"enter image description here\" /></a></p>\n<p><strong>Error Message</strong></p>\n<blockquote>\n<p>The specified child already has a parent. You must call removeView() on the child's parent first.</p>\n</blockquote>\n<p><strong>Solution Tried</strong></p>\n<p>Inside add layout function I have done the following</p>\n<pre><code> private void addLayout(){\n    layout2 = LayoutInflater.from(mContext).inflate(R.layout.product_layout, mLinearLayout, false);\n    productAuto = (AutoCompleteTextView) view.findViewById(R.id.tv_product);\n    qtyEditText = (EditText) view.findViewById(R.id.prod_qty);\n    prodPriceEditText = (EditText)view.findViewById(R.id.prod_price);\n    prodSpecsEditText = (EditText)view.findViewById(R.id.prod_specs);\n\n }\n</code></pre>\n<p>The product form is shown every time when I click on the <code>Add new Product</code> button. But I can't select a product in this case.</p>\n<p><strong>Update 1</strong></p>\n<p>I have taken <code>addProduct</code> button in <code>this.initElements(view);</code></p>\n<pre><code>private void initElements(View view) {\n\n    newSurveyScrollview = (ScrollView) view.findViewById(R.id.new_survey_scrollview);\n refNofield1 = (EditText) view.findViewById(R.id.ref_no_field_1);\n    consumerNameEditText = (EditText) view.findViewById(R.id.consumer_name);\n    consumerAddressEditText = (EditText) view.findViewById(R.id.consumer_address);\n    latitudeEditText = (EditText) view.findViewById(R.id.latitude);\n    longitudeEditText = (EditText) view.findViewById(R.id.longitude);\n    placeEditText = (EditText) view.findViewById(R.id.place);\n    subDivisionSpinner = (Spinner) view.findViewById(R.id.sub_division_spinner);\ncameraButton = (Button) view.findViewById(R.id.open_camera);\n    saveButton = (Button) view.findViewById(R.id.save_survey_form);\n    resetButton = (Button) view.findViewById(R.id.survey_reset);\n    getRefNoButton = (Button) view.findViewById(R.id.get_ref_no_button);\n    getLatLangButton = (ImageButton) view.findViewById(R.id.get_lat_lang_button);\n    addProduct = (Button)view.findViewById(R.id.btn_prd);\n\n}\n</code></pre>\n<p><strong>Error Log</strong></p>\n<pre><code>Process: com.example.thumbsol.accuratesurvey, PID: 6854\njava.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.\n    at android.view.ViewGroup.addViewInner(ViewGroup.java:5038)\n    at android.view.ViewGroup.addView(ViewGroup.java:4869)\n    at android.view.ViewGroup.addView(ViewGroup.java:4809)\n    at android.view.ViewGroup.addView(ViewGroup.java:4782)\n    at com.example.thumbsol.accuratesurvey.fragments.SurveyFormFragment.addLayout(SurveyFormFragment.java:1904)\n    at com.example.thumbsol.accuratesurvey.fragments.SurveyFormFragment.lambda$initListeners$1$com-example-thumbsol-accuratesurvey-fragments-SurveyFormFragment(SurveyFormFragment.java:550)\n    at com.example.thumbsol.accuratesurvey.fragments.SurveyFormFragment$$ExternalSyntheticLambda3.onClick(Unknown Source:2)\n    at android.view.View.performClick(View.java:6608)\n    at android.view.View.performClickInternal(View.java:6585)\n    at android.view.View.access$3100(View.java:785)\n    at android.view.View$PerformClick.run(View.java:25921)\n    at android.os.Handler.handleCallback(Handler.java:873)\n    at android.os.Handler.dispatchMessage(Handler.java:99)\n    at android.os.Looper.loop(Looper.java:201)\n    at android.app.ActivityThread.main(ActivityThread.java:6810)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:547)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:873)\n</code></pre>\n<p>The error comes at below part</p>\n<pre><code> private void addLayout() {\n\n    mLinearLayout.addView(layout2);\n}\n</code></pre>\n<p><strong>Update 2</strong></p>\n<p>I have removed the second layout part from <code>onCreatView</code> and done the following</p>\n<pre><code>private void addLayout() {\n   layout2 = LayoutInflater.from(mContext).inflate(R.layout.product_layout, mLinearLayout, false);\n    this.initElementsPrd(layout2);\n    mLinearLayout.addView(layout2);\n}\n</code></pre>\n<p>Below is what I am getting now</p>\n<p><a href=\"https://i.stack.imgur.com/7rwtz.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7rwtz.gif\" alt=\"enter image description here\" /></a></p>\n<p>The autocomplete is working for the 1st one but for the second or 3rd upto <code>N</code> its not working.</p>\n<p>Any help would be highly appreciated.</p>\n"},{"tags":["java","eclipse","swt"],"answers":[{"tags":[],"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1660128689,"creation_date":1377764967,"answer_id":18505856,"question_id":18505427,"body_markdown":"Version 3.11 of JFace which is in Eclipse 4.5 (Mars) adds a `noDefaultButton()` method which turns off just the &#39;restore defaults&#39; button.\r\n\r\nOn older versions you can call `noDefaultAndApplyButton()` to suppress the default buttons and override the `contributeButtons` method to add your own Apply button - you will have to handle this button yourself.\r\n\r\nSomething like:\r\n\r\n      @Override\r\n      protected void contributeButtons(final Composite parent)\r\n      {\r\n        final Button applyButton = new Button(parent, SWT.PUSH);\r\n        applyButton.setText(&quot;Apply&quot;);\r\n    \r\n        final int widthHint = convertHorizontalDLUsToPixels(IDialogConstants.BUTTON_WIDTH);\r\n        final GridData data = new GridData(SWT.FILL, SWT.CENTER, false, false);\r\n        final Point minButtonSize = applyButton.computeSize(SWT.DEFAULT, SWT.DEFAULT, true);\r\n        data.widthHint = Math.max(widthHint, minButtonSize.x);\r\n        applyButton.setLayoutData(data);\r\n\r\n        applyButton.addSelectionListener(new SelectionAdapter() {\r\n          @Override\r\n          public void widgetSelected(final SelectionEvent e) {\r\n            performApply();\r\n          }\r\n        });\r\n    \r\n        final GridLayout layout = (GridLayout)parent.getLayout();\r\n        layout.numColumns++;\r\n      }\r\n","title":"How to remove “restore defaults” button in custom Preference Page","body":"<p>Version 3.11 of JFace which is in Eclipse 4.5 (Mars) adds a <code>noDefaultButton()</code> method which turns off just the 'restore defaults' button.</p>\n<p>On older versions you can call <code>noDefaultAndApplyButton()</code> to suppress the default buttons and override the <code>contributeButtons</code> method to add your own Apply button - you will have to handle this button yourself.</p>\n<p>Something like:</p>\n<pre><code>  @Override\n  protected void contributeButtons(final Composite parent)\n  {\n    final Button applyButton = new Button(parent, SWT.PUSH);\n    applyButton.setText(&quot;Apply&quot;);\n\n    final int widthHint = convertHorizontalDLUsToPixels(IDialogConstants.BUTTON_WIDTH);\n    final GridData data = new GridData(SWT.FILL, SWT.CENTER, false, false);\n    final Point minButtonSize = applyButton.computeSize(SWT.DEFAULT, SWT.DEFAULT, true);\n    data.widthHint = Math.max(widthHint, minButtonSize.x);\n    applyButton.setLayoutData(data);\n\n    applyButton.addSelectionListener(new SelectionAdapter() {\n      @Override\n      public void widgetSelected(final SelectionEvent e) {\n        performApply();\n      }\n    });\n\n    final GridLayout layout = (GridLayout)parent.getLayout();\n    layout.numColumns++;\n  }\n</code></pre>\n"}],"owner":{"account_id":2652287,"reputation":687,"user_id":2293647,"accept_rate":43,"display_name":"Shruti Rawat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":563,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1377810654,"answer_count":1,"score":2,"last_activity_date":1660128689,"creation_date":1377763629,"question_id":18505427,"body_markdown":"Using `noDefaultAndApplyButton()` is removing both the apply and restore default button but i need to remove only restore default button. Any idea how to do it?","title":"How to remove “restore defaults” button in custom Preference Page","body":"<p>Using <code>noDefaultAndApplyButton()</code> is removing both the apply and restore default button but i need to remove only restore default button. Any idea how to do it?</p>\n"},{"tags":["java","spring-boot","spring-security","jwt"],"comments":[{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":0,"creation_date":1660082179,"post_id":73297747,"comment_id":129447912,"body_markdown":"I can&#39;t tell how you&#39;re constructing your `GrantedAuthority` in `JwtUtils`. A common mistake is that people confuse authorities with roles. Did you check whether `.hasAuthority(&quot;ADMIN&quot;)` works in your `SecurityConfiguration`?","body":"I can&#39;t tell how you&#39;re constructing your <code>GrantedAuthority</code> in <code>JwtUtils</code>. A common mistake is that people confuse authorities with roles. Did you check whether <code>.hasAuthority(&quot;ADMIN&quot;)</code> works in your <code>SecurityConfiguration</code>?"}],"answers":[{"tags":[],"owner":{"account_id":7739148,"reputation":3345,"user_id":5859654,"display_name":"Nemanja"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660087481,"creation_date":1660082643,"answer_id":73298574,"question_id":73297747,"body_markdown":"Your decoded token looks like this :\r\n\r\n    {\r\n      &quot;sub&quot;: &quot;kent1&quot;,\r\n      &quot;roles&quot;: &quot;ADMIN&quot;,\r\n      &quot;exp&quot;: 1661155145295,\r\n      &quot;iat&quot;: 1660075145295\r\n    }\r\n\r\n\r\nAs far as I can see, the problem is in the user roles. Your roles should be in this format:\r\n\r\n    ROLE_ADMIN, or ROLE_CUSTOMER, etc.. (notice prefix ROLE_)\r\n\r\n \r\nWith `@RolesAllowed(&quot;ADMIN&quot;)`annotation being set, this part : \r\n\r\n  \r\n     .antMatchers(&quot;/users/all&quot;).hasRole(&quot;ADMIN&quot;)\r\n\r\nis not needed.\r\n\r\nBTW, in your `JwtUtils` class I noticed this line of code:\r\n\r\n    claims.put(&quot;roles&quot;,authentication.getAuthorities());\r\n\r\nWith this line of code, you are setting this\r\n\r\n    Collection&lt;? extends GrantedAuthority&gt; authorities = authentication.getAuthorities();\r\n\r\nlist as a value for your &quot;roles&quot; key in map.\r\n Since this list will contain whole `GrantedAuthority` objects, that&#39;s not what Spring expects.\r\nAssuming that your **role** table looks like this:\r\n\r\n    +---------+------------+\r\n    | id_role | role_name  |\r\n    +---------+------------+\r\n    |       1 | ROLE_ADMIN |\r\n    |       2 | ROLE_USER  |\r\n    +---------+------------+\r\n\r\nYou can do something like this :\r\n\r\n    Collection&lt;? extends GrantedAuthority&gt; authorities = authentication.getAuthorities();\r\n    \t\tList&lt;String&gt; roles = new ArrayList&lt;&gt;();\r\n    \t\tfor(GrantedAuthority authority: authorities){\r\n    \t\t\tif(authority.getAuthority().startsWith(&quot;ROLE&quot;)){\r\n    \t\t\t\troles.add(authority.getAuthority());\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tclaims.put(&quot;roles&quot;,roles);\r\n\r\nand that will resolve problem that I just described.\r\n\r\n\r\n","title":"JWT (java) : roles in my token is not considered by HTTP-Request with error 403","body":"<p>Your decoded token looks like this :</p>\n<pre><code>{\n  &quot;sub&quot;: &quot;kent1&quot;,\n  &quot;roles&quot;: &quot;ADMIN&quot;,\n  &quot;exp&quot;: 1661155145295,\n  &quot;iat&quot;: 1660075145295\n}\n</code></pre>\n<p>As far as I can see, the problem is in the user roles. Your roles should be in this format:</p>\n<pre><code>ROLE_ADMIN, or ROLE_CUSTOMER, etc.. (notice prefix ROLE_)\n</code></pre>\n<p>With <code>@RolesAllowed(&quot;ADMIN&quot;)</code>annotation being set, this part :</p>\n<pre><code> .antMatchers(&quot;/users/all&quot;).hasRole(&quot;ADMIN&quot;)\n</code></pre>\n<p>is not needed.</p>\n<p>BTW, in your <code>JwtUtils</code> class I noticed this line of code:</p>\n<pre><code>claims.put(&quot;roles&quot;,authentication.getAuthorities());\n</code></pre>\n<p>With this line of code, you are setting this</p>\n<pre><code>Collection&lt;? extends GrantedAuthority&gt; authorities = authentication.getAuthorities();\n</code></pre>\n<p>list as a value for your &quot;roles&quot; key in map.\nSince this list will contain whole <code>GrantedAuthority</code> objects, that's not what Spring expects.\nAssuming that your <strong>role</strong> table looks like this:</p>\n<pre><code>+---------+------------+\n| id_role | role_name  |\n+---------+------------+\n|       1 | ROLE_ADMIN |\n|       2 | ROLE_USER  |\n+---------+------------+\n</code></pre>\n<p>You can do something like this :</p>\n<pre><code>Collection&lt;? extends GrantedAuthority&gt; authorities = authentication.getAuthorities();\n        List&lt;String&gt; roles = new ArrayList&lt;&gt;();\n        for(GrantedAuthority authority: authorities){\n            if(authority.getAuthority().startsWith(&quot;ROLE&quot;)){\n                roles.add(authority.getAuthority());\n            }\n        }\n        claims.put(&quot;roles&quot;,roles);\n</code></pre>\n<p>and that will resolve problem that I just described.</p>\n"}],"owner":{"account_id":15253172,"reputation":155,"user_id":11005875,"display_name":"Quentin Genet"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":647,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73298574,"answer_count":1,"score":0,"last_activity_date":1660128461,"creation_date":1660076935,"question_id":73297747,"body_markdown":"I &#39;m coding a back-end/APIRest, part of an personal app.\r\nI&#39;m trying to set an **authentication by JWT**, with roles : ADMIN and USER. because i want to filter the following endpoint only for role ADMIN : `/users/all` \r\nBut when i send my http request from Insomnia App, with `localhost:7777/users/all` i have an **error 403 forbidden**. I don&#39;t know why.\r\n\r\n\r\nJust bellow, this is a generated JWT by my sended request, you can check it on [jwt.io][2] : \r\n  \r\n\r\n    eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJrZW50MSIsInJvbGVzIjoiQURNSU4iLCJleHAiOjE2NjExNTUxNDUyOTUsImlhdCI6MTY2MDA3NTE0NTI5NX0.RGJzJVkM6bB0g6YlK6FFMzbjjTZ8qPqGf9pfHMeKHfyDV_OM9lF1w8SDzys3SC-iNdBMgXMjVP972URcISwJ_A\r\n\r\n/*CONCERNED ENDPOINT CONTROLLER*/\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/users&quot;)\r\n    public class AppUserController {\r\n\r\n    \t@RolesAllowed(&quot;ADMIN&quot;)\r\n    \t@GetMapping(&quot;/all&quot;)\r\n    \tpublic ResponseEntity&lt;List&lt;AppUserListDto&gt;&gt; getAllAppUsers() {\r\n    \t\tlogger.info(&quot;GET /users/all&quot;);\r\n    \t\t\treturn new ResponseEntity&lt;List&lt;AppUserListDto&gt;&gt;(appUserServiceImpl.getAllUsers(), HttpStatus.OK);\r\n    \t\t}\r\n    \r\n    \t}\r\n\r\n/*SECURITY CONFIGURATION*/\r\n\r\n    @EnableWebSecurity\r\n    @Configuration\r\n    @EnableGlobalMethodSecurity(\r\n    \t\tprePostEnabled = true,\r\n    \t\tsecuredEnabled = true,\r\n    \t\tjsr250Enabled = true)\r\n    public class SecurityConfiguration {\r\n    \r\n    \t@Autowired\r\n    \tRestAuthenticationEntryPoint restAuthenticationEntryPoint;\r\n    \r\n    \t@Autowired\r\n    \tJwtFilter jwtFilter;\t\r\n    \r\n    \t@Bean\r\n    \tSecurityFilterChain web(HttpSecurity http) throws Exception {\r\n    \t\thttp.csrf().disable().exceptionHandling().authenticationEntryPoint(restAuthenticationEntryPoint).and()\r\n    \t\t\t\t.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n    \t\t\t\t.authorizeRequests()\r\n    \t\t\t\t.antMatchers(&quot;/login&quot;).permitAll()\r\n    \t\t\t\t.antMatchers(&quot;/users/add&quot;).permitAll()\r\n    \t\t\t\t.antMatchers(&quot;/users/all&quot;).hasRole(&quot;ADMIN&quot;)\r\n    \t\t\t\t.anyRequest().authenticated();\r\n    \r\n    \t\thttp.addFilterBefore(jwtFilter, UsernamePasswordAuthenticationFilter.class);\r\n    \t\treturn http.build();\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tPasswordEncoder passwordEncoder() {\r\n    \t\treturn new BCryptPasswordEncoder();\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic RoleHierarchy roleHierarchy() {\r\n    \t\tRoleHierarchyImpl roleHierarchy = new RoleHierarchyImpl();\r\n    \t\tString hierarchy = &quot;ADMIN &gt; USER&quot;;\r\n    \t\troleHierarchy.setHierarchy(hierarchy);\r\n    \t\treturn roleHierarchy;\r\n    \t}\r\n    \t@Bean\r\n    \tpublic DefaultWebSecurityExpressionHandler webSecurityExpressionHandler() {\r\n    \t\tDefaultWebSecurityExpressionHandler expressionHandler = new DefaultWebSecurityExpressionHandler();\r\n    \t\texpressionHandler.setRoleHierarchy(roleHierarchy());\r\n    \t\treturn expressionHandler;\r\n    \t}\r\n    \r\n    }\r\n\r\n/*MY USER DETAILS SERVICE*/\r\n\r\n    @Service\r\n    public class MyUserDetailService implements UserDetailsService  {\r\n    \r\n    \t@Autowired\r\n    \tAppUserRepository appUserRepository;\r\n    \r\n    \t@Autowired\r\n    \tRoleRepository roleRepository;\r\n    \r\n    \t@Override\r\n    \tpublic UserDetails loadUserByUsername(String appUsername) throws UsernameNotFoundException {\r\n    \t\tAppUserEntity appUser = appUserRepository.findByAppUsername(appUsername);\r\n            if (appUser == null) {\r\n                return new org.springframework.security.core.userdetails.User(\r\n                  &quot; &quot;, &quot; &quot;, true, true, true, true, \r\n                  getAuthorities(Arrays.asList(\r\n                    roleRepository.findByRoleName(&quot;USER&quot;))));\r\n            }\r\n    \t\treturn new org.springframework.security.core.userdetails.User(\r\n    \t\t\tappUser.getAppUsername(), appUser.getPassword(), true, true, true, \r\n    \t\t\ttrue, getAuthorities(appUser.getRoles()));\r\n    \t}\r\n    \r\n    \tprivate Collection&lt;? extends GrantedAuthority&gt; getAuthorities(\r\n    \t\t\tCollection&lt;Role&gt; roles) {\r\n    \r\n    \t\treturn getGrantedAuthorities(getPrivileges(roles));\r\n    \t}\r\n    \r\n    \tprivate List&lt;String&gt; getPrivileges(Collection&lt;Role&gt; roles) {\r\n    \r\n    \t\tList&lt;String&gt; privileges = new ArrayList&lt;&gt;();\r\n    \t\tList&lt;Privilege&gt; collection = new ArrayList&lt;&gt;();\r\n    \t\tfor (Role role : roles) {\r\n    \t\t\tprivileges.add(role.getRoleName());\r\n    \t\t\tcollection.addAll(role.getPrivileges());\r\n    \t\t}\r\n    \t\tfor (Privilege item : collection) {\r\n    \t\t\tprivileges.add(item.getName());\r\n    \t\t}\r\n    \t\treturn privileges;\r\n    \t}\r\n    \r\n    \tprivate List&lt;GrantedAuthority&gt; getGrantedAuthorities(List&lt;String&gt; privileges) {\r\n    \t\tList&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\r\n    \t\tfor (String privilege : privileges) {\r\n    \t\t\tauthorities.add(new SimpleGrantedAuthority(privilege));\r\n    \t\t}\r\n    \t\treturn authorities;\r\n    \t}\r\n    }\r\n/*JWT UTILS*/\r\n\r\n    @Component\r\n    public class JwtUtils {\r\n    \r\n    \t@Autowired\r\n    \tAppUserRepository appUserRepository;\r\n    \r\n    \tlong JWT_VALIDITY = 5 * 60 * 60 * 60;\r\n    \r\n    \t@Value(&quot;${jwt.secret}&quot;)\r\n    \tString secret;\r\n    \r\n    \tprivate final Logger logger = LoggerFactory.getLogger(JwtUtils.class);\r\n    \r\n    \tpublic String generateToken(Authentication authentication) {\r\n    \r\n    \t\tMap&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\r\n    \t\tclaims.put(&quot;roles&quot;,authentication.getAuthorities().stream().map(role -&gt; role.getAuthority()).findFirst().orElseThrow(NoSuchElementException::new));\r\n    \t\tclaims.put(&quot;iat&quot;,new Date(System.currentTimeMillis()));\r\n    \t\tclaims.put(&quot;exp&quot;, new Date(System.currentTimeMillis() + JWT_VALIDITY * 1000));\r\n    \t\tclaims.put(&quot;sub&quot;, authentication.getName());\r\n    \r\n    \t\tMap&lt;String, Object&gt; headerJwt = new HashMap&lt;&gt;();\r\n    \t\theaderJwt.put(&quot;alg&quot;, &quot;HS512&quot;);\r\n    \t\theaderJwt.put(&quot;typ&quot;, &quot;JWT&quot;);\r\n    \r\n    \t\t//TODO Later : Header, claims, jwt... will be Base64urlEncoded\r\n    \t\treturn Jwts.builder()\r\n    \t\t\t\t.setHeader(headerJwt)\r\n    \t\t\t\t.setClaims(claims)\r\n    \t\t\t\t.signWith(SignatureAlgorithm.HS512, secret).compact();\r\n    \t}\r\n    \r\n    \tpublic Authentication getAuthentication(String token) {\r\n    \t\tClaims claims = Jwts.parser().setSigningKey(secret).parseClaimsJws(token).getBody();\r\n    \t\tAppUserEntity appUser = appUserRepository.findByAppUsername(claims.getSubject());\r\n    \t\tlogger.info(&quot;THIS IS THE SUBJECT FROM CLAIMS : {}&quot;, claims.getSubject());\r\n    \r\n    \t\tCollection&lt;? extends GrantedAuthority&gt; authorities = getAuthorities(appUser.getRoles());\r\n    \r\n    \t\tUser principal = new User(claims.getSubject(), &quot;&quot;, authorities);\r\n    \r\n    \t\treturn new UsernamePasswordAuthenticationToken(principal, token, authorities);\r\n    \t}\r\n    \r\n    \tprivate Collection&lt;? extends GrantedAuthority&gt; getAuthorities(\r\n    \t\t\tCollection&lt;Role&gt; roles) {\r\n    \r\n    \t\treturn getGrantedAuthorities(getPrivileges(roles));\r\n    \t}\r\n    \r\n    \tprivate List&lt;String&gt; getPrivileges(Collection&lt;Role&gt; roles) {\r\n    \r\n    \t\tList&lt;String&gt; privileges = new ArrayList&lt;&gt;();\r\n    \t\tList&lt;Privilege&gt; collection = new ArrayList&lt;&gt;();\r\n    \t\tfor (Role role : roles) {\r\n    \t\t\tprivileges.add(role.getRoleName());\r\n    \t\t\tcollection.addAll(role.getPrivileges());\r\n    \t\t}\r\n    \t\tfor (Privilege item : collection) {\r\n    \t\t\tprivileges.add(item.getName());\r\n    \t\t}\r\n    \t\treturn privileges;\r\n    \t}\r\n    \r\n    \tprivate List&lt;GrantedAuthority&gt; getGrantedAuthorities(List&lt;String&gt; privileges) {\r\n    \t\tList&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\r\n    \t\tfor (String privilege : privileges) {\r\n    \t\t\tauthorities.add(new SimpleGrantedAuthority(privilege));\r\n    \t\t}\r\n    \t\treturn authorities;\r\n    \t}\r\n    \r\n    }\r\n\r\n/*JWT CONTROLLER*/\r\n\r\n    @RestController\r\n    public class JwtController {\r\n    \r\n    \t@Autowired\r\n    \tJwtUtils jwtUtils;\r\n    \t\r\n    \t@Autowired\r\n    \tAuthenticationManagerBuilder authenticationManagerBuilder;\r\n    \r\n    \t@PostMapping(&quot;/login&quot;)\r\n    \tpublic ResponseEntity&lt;?&gt; createAuthToken(@RequestBody JwtRequest jwtRequest) {\r\n    \t\tAuthentication authentication = logUser(jwtRequest.getAppUsername(), jwtRequest.getPassword());\r\n    \t\tString jwt = jwtUtils.generateToken(authentication);\r\n    \t\tHttpHeaders httpHeaders = new HttpHeaders();\r\n    \t\thttpHeaders.add(AUTHORIZATION_HEADER, &quot;Bearer &quot; + jwt);\r\n    \t\tObject principal = authentication.getPrincipal();\r\n    \t\t return new ResponseEntity&lt;&gt;(new JwtResponse(((User) principal).getUsername()), httpHeaders, HttpStatus.OK);\r\n    \t}\r\n    \r\n    \tpublic Authentication logUser(String appUsername, String password) {\r\n    \t\tAuthentication authentication = authenticationManagerBuilder.getObject()\r\n    \t\t\t\t.authenticate(new UsernamePasswordAuthenticationToken(appUsername, password));\r\n    \r\n    \t\tSecurityContextHolder.getContext().setAuthentication(authentication);\r\n    \t\treturn authentication;\r\n    \t}\r\n    }\r\n\r\n/*JWT FILTER*/\r\n\r\n    @Component\r\n    public class JwtFilter extends OncePerRequestFilter {\r\n    \r\n    \t@Autowired\r\n    \tJwtUtils jwtUtils;\r\n    \r\n    \tpublic static final String AUTHORIZATION_HEADER = &quot;Authorization&quot;;\r\n    \r\n    \t@Override\r\n    \tprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)\r\n    \t\t\tthrows ServletException, IOException {\r\n    \t\tString jwt = resolveToken(request);\r\n    \t\tif (StringUtils.hasText(jwt)) {\r\n    \t\t\tAuthentication authentication = jwtUtils.getAuthentication(jwt);\r\n    \t\t\tSecurityContextHolder.getContext().setAuthentication(authentication);\r\n    \t\t}\r\n    \t\tchain.doFilter(request, response);\r\n    \t}\r\n    \r\n    \tprivate String resolveToken(HttpServletRequest request) {\r\n    \t\tString bearerToken = request.getHeader(AUTHORIZATION_HEADER);\r\n    \t\tif (StringUtils.hasText(bearerToken) &amp;&amp; bearerToken.startsWith(&quot;Bearer &quot;)) {\r\n    \t\t\treturn bearerToken.substring(7);\r\n    \t\t}\r\n    \t\treturn null;\r\n    \t}\r\n    }\r\n\r\n\r\n\r\n  [2]: https://jwt.io/","title":"JWT (java) : roles in my token is not considered by HTTP-Request with error 403","body":"<p>I 'm coding a back-end/APIRest, part of an personal app.\nI'm trying to set an <strong>authentication by JWT</strong>, with roles : ADMIN and USER. because i want to filter the following endpoint only for role ADMIN : <code>/users/all</code>\nBut when i send my http request from Insomnia App, with <code>localhost:7777/users/all</code> i have an <strong>error 403 forbidden</strong>. I don't know why.</p>\n<p>Just bellow, this is a generated JWT by my sended request, you can check it on <a href=\"https://jwt.io/\" rel=\"nofollow noreferrer\">jwt.io</a> :</p>\n<pre><code>eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJrZW50MSIsInJvbGVzIjoiQURNSU4iLCJleHAiOjE2NjExNTUxNDUyOTUsImlhdCI6MTY2MDA3NTE0NTI5NX0.RGJzJVkM6bB0g6YlK6FFMzbjjTZ8qPqGf9pfHMeKHfyDV_OM9lF1w8SDzys3SC-iNdBMgXMjVP972URcISwJ_A\n</code></pre>\n<p>/<em>CONCERNED ENDPOINT CONTROLLER</em>/</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/users&quot;)\npublic class AppUserController {\n\n    @RolesAllowed(&quot;ADMIN&quot;)\n    @GetMapping(&quot;/all&quot;)\n    public ResponseEntity&lt;List&lt;AppUserListDto&gt;&gt; getAllAppUsers() {\n        logger.info(&quot;GET /users/all&quot;);\n            return new ResponseEntity&lt;List&lt;AppUserListDto&gt;&gt;(appUserServiceImpl.getAllUsers(), HttpStatus.OK);\n        }\n\n    }\n</code></pre>\n<p>/<em>SECURITY CONFIGURATION</em>/</p>\n<pre><code>@EnableWebSecurity\n@Configuration\n@EnableGlobalMethodSecurity(\n        prePostEnabled = true,\n        securedEnabled = true,\n        jsr250Enabled = true)\npublic class SecurityConfiguration {\n\n    @Autowired\n    RestAuthenticationEntryPoint restAuthenticationEntryPoint;\n\n    @Autowired\n    JwtFilter jwtFilter;    \n\n    @Bean\n    SecurityFilterChain web(HttpSecurity http) throws Exception {\n        http.csrf().disable().exceptionHandling().authenticationEntryPoint(restAuthenticationEntryPoint).and()\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n                .authorizeRequests()\n                .antMatchers(&quot;/login&quot;).permitAll()\n                .antMatchers(&quot;/users/add&quot;).permitAll()\n                .antMatchers(&quot;/users/all&quot;).hasRole(&quot;ADMIN&quot;)\n                .anyRequest().authenticated();\n\n        http.addFilterBefore(jwtFilter, UsernamePasswordAuthenticationFilter.class);\n        return http.build();\n    }\n\n    @Bean\n    PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    public RoleHierarchy roleHierarchy() {\n        RoleHierarchyImpl roleHierarchy = new RoleHierarchyImpl();\n        String hierarchy = &quot;ADMIN &gt; USER&quot;;\n        roleHierarchy.setHierarchy(hierarchy);\n        return roleHierarchy;\n    }\n    @Bean\n    public DefaultWebSecurityExpressionHandler webSecurityExpressionHandler() {\n        DefaultWebSecurityExpressionHandler expressionHandler = new DefaultWebSecurityExpressionHandler();\n        expressionHandler.setRoleHierarchy(roleHierarchy());\n        return expressionHandler;\n    }\n\n}\n</code></pre>\n<p>/<em>MY USER DETAILS SERVICE</em>/</p>\n<pre><code>@Service\npublic class MyUserDetailService implements UserDetailsService  {\n\n    @Autowired\n    AppUserRepository appUserRepository;\n\n    @Autowired\n    RoleRepository roleRepository;\n\n    @Override\n    public UserDetails loadUserByUsername(String appUsername) throws UsernameNotFoundException {\n        AppUserEntity appUser = appUserRepository.findByAppUsername(appUsername);\n        if (appUser == null) {\n            return new org.springframework.security.core.userdetails.User(\n              &quot; &quot;, &quot; &quot;, true, true, true, true, \n              getAuthorities(Arrays.asList(\n                roleRepository.findByRoleName(&quot;USER&quot;))));\n        }\n        return new org.springframework.security.core.userdetails.User(\n            appUser.getAppUsername(), appUser.getPassword(), true, true, true, \n            true, getAuthorities(appUser.getRoles()));\n    }\n\n    private Collection&lt;? extends GrantedAuthority&gt; getAuthorities(\n            Collection&lt;Role&gt; roles) {\n\n        return getGrantedAuthorities(getPrivileges(roles));\n    }\n\n    private List&lt;String&gt; getPrivileges(Collection&lt;Role&gt; roles) {\n\n        List&lt;String&gt; privileges = new ArrayList&lt;&gt;();\n        List&lt;Privilege&gt; collection = new ArrayList&lt;&gt;();\n        for (Role role : roles) {\n            privileges.add(role.getRoleName());\n            collection.addAll(role.getPrivileges());\n        }\n        for (Privilege item : collection) {\n            privileges.add(item.getName());\n        }\n        return privileges;\n    }\n\n    private List&lt;GrantedAuthority&gt; getGrantedAuthorities(List&lt;String&gt; privileges) {\n        List&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\n        for (String privilege : privileges) {\n            authorities.add(new SimpleGrantedAuthority(privilege));\n        }\n        return authorities;\n    }\n}\n</code></pre>\n<p>/<em>JWT UTILS</em>/</p>\n<pre><code>@Component\npublic class JwtUtils {\n\n    @Autowired\n    AppUserRepository appUserRepository;\n\n    long JWT_VALIDITY = 5 * 60 * 60 * 60;\n\n    @Value(&quot;${jwt.secret}&quot;)\n    String secret;\n\n    private final Logger logger = LoggerFactory.getLogger(JwtUtils.class);\n\n    public String generateToken(Authentication authentication) {\n\n        Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\n        claims.put(&quot;roles&quot;,authentication.getAuthorities().stream().map(role -&gt; role.getAuthority()).findFirst().orElseThrow(NoSuchElementException::new));\n        claims.put(&quot;iat&quot;,new Date(System.currentTimeMillis()));\n        claims.put(&quot;exp&quot;, new Date(System.currentTimeMillis() + JWT_VALIDITY * 1000));\n        claims.put(&quot;sub&quot;, authentication.getName());\n\n        Map&lt;String, Object&gt; headerJwt = new HashMap&lt;&gt;();\n        headerJwt.put(&quot;alg&quot;, &quot;HS512&quot;);\n        headerJwt.put(&quot;typ&quot;, &quot;JWT&quot;);\n\n        //TODO Later : Header, claims, jwt... will be Base64urlEncoded\n        return Jwts.builder()\n                .setHeader(headerJwt)\n                .setClaims(claims)\n                .signWith(SignatureAlgorithm.HS512, secret).compact();\n    }\n\n    public Authentication getAuthentication(String token) {\n        Claims claims = Jwts.parser().setSigningKey(secret).parseClaimsJws(token).getBody();\n        AppUserEntity appUser = appUserRepository.findByAppUsername(claims.getSubject());\n        logger.info(&quot;THIS IS THE SUBJECT FROM CLAIMS : {}&quot;, claims.getSubject());\n\n        Collection&lt;? extends GrantedAuthority&gt; authorities = getAuthorities(appUser.getRoles());\n\n        User principal = new User(claims.getSubject(), &quot;&quot;, authorities);\n\n        return new UsernamePasswordAuthenticationToken(principal, token, authorities);\n    }\n\n    private Collection&lt;? extends GrantedAuthority&gt; getAuthorities(\n            Collection&lt;Role&gt; roles) {\n\n        return getGrantedAuthorities(getPrivileges(roles));\n    }\n\n    private List&lt;String&gt; getPrivileges(Collection&lt;Role&gt; roles) {\n\n        List&lt;String&gt; privileges = new ArrayList&lt;&gt;();\n        List&lt;Privilege&gt; collection = new ArrayList&lt;&gt;();\n        for (Role role : roles) {\n            privileges.add(role.getRoleName());\n            collection.addAll(role.getPrivileges());\n        }\n        for (Privilege item : collection) {\n            privileges.add(item.getName());\n        }\n        return privileges;\n    }\n\n    private List&lt;GrantedAuthority&gt; getGrantedAuthorities(List&lt;String&gt; privileges) {\n        List&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\n        for (String privilege : privileges) {\n            authorities.add(new SimpleGrantedAuthority(privilege));\n        }\n        return authorities;\n    }\n\n}\n</code></pre>\n<p>/<em>JWT CONTROLLER</em>/</p>\n<pre><code>@RestController\npublic class JwtController {\n\n    @Autowired\n    JwtUtils jwtUtils;\n    \n    @Autowired\n    AuthenticationManagerBuilder authenticationManagerBuilder;\n\n    @PostMapping(&quot;/login&quot;)\n    public ResponseEntity&lt;?&gt; createAuthToken(@RequestBody JwtRequest jwtRequest) {\n        Authentication authentication = logUser(jwtRequest.getAppUsername(), jwtRequest.getPassword());\n        String jwt = jwtUtils.generateToken(authentication);\n        HttpHeaders httpHeaders = new HttpHeaders();\n        httpHeaders.add(AUTHORIZATION_HEADER, &quot;Bearer &quot; + jwt);\n        Object principal = authentication.getPrincipal();\n         return new ResponseEntity&lt;&gt;(new JwtResponse(((User) principal).getUsername()), httpHeaders, HttpStatus.OK);\n    }\n\n    public Authentication logUser(String appUsername, String password) {\n        Authentication authentication = authenticationManagerBuilder.getObject()\n                .authenticate(new UsernamePasswordAuthenticationToken(appUsername, password));\n\n        SecurityContextHolder.getContext().setAuthentication(authentication);\n        return authentication;\n    }\n}\n</code></pre>\n<p>/<em>JWT FILTER</em>/</p>\n<pre><code>@Component\npublic class JwtFilter extends OncePerRequestFilter {\n\n    @Autowired\n    JwtUtils jwtUtils;\n\n    public static final String AUTHORIZATION_HEADER = &quot;Authorization&quot;;\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)\n            throws ServletException, IOException {\n        String jwt = resolveToken(request);\n        if (StringUtils.hasText(jwt)) {\n            Authentication authentication = jwtUtils.getAuthentication(jwt);\n            SecurityContextHolder.getContext().setAuthentication(authentication);\n        }\n        chain.doFilter(request, response);\n    }\n\n    private String resolveToken(HttpServletRequest request) {\n        String bearerToken = request.getHeader(AUTHORIZATION_HEADER);\n        if (StringUtils.hasText(bearerToken) &amp;&amp; bearerToken.startsWith(&quot;Bearer &quot;)) {\n            return bearerToken.substring(7);\n        }\n        return null;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-mvc"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1660123576,"post_id":73303783,"comment_id":129456274,"body_markdown":"Have you rebuild/reload your project after the pom was changed?","body":"Have you rebuild/reload your project after the pom was changed?"},{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1660123803,"post_id":73303783,"comment_id":129456351,"body_markdown":"Why don&#39;t you just use `empty_list.isEmpty()`?","body":"Why don&#39;t you just use <code>empty_list.isEmpty()</code>?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1660126057,"post_id":73303783,"comment_id":129457244,"body_markdown":"You can use the spring `CollectionUtil` or just call `isEmpty()`. Why pull in a full library for just this check. That being said you should import the class not the package, basically your import statement is wrong.","body":"You can use the spring <code>CollectionUtil</code> or just call <code>isEmpty()</code>. Why pull in a full library for just this check. That being said you should import the class not the package, basically your import statement is wrong."},{"owner":{"account_id":26026455,"reputation":11,"user_id":19733311,"display_name":"Alex.m"},"score":0,"creation_date":1660129063,"post_id":73303783,"comment_id":129458298,"body_markdown":"I have to test smt with CollectionUtils.isEmpty. Are CollectionUtils.isEmpty and isEmpty() the same?","body":"I have to test smt with CollectionUtils.isEmpty. Are CollectionUtils.isEmpty and isEmpty() the same?"}],"answers":[{"tags":[],"owner":{"account_id":3455253,"reputation":1709,"user_id":2893903,"accept_rate":85,"display_name":"Roman Cherepanov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660127084,"creation_date":1660127084,"answer_id":73304606,"question_id":73303783,"body_markdown":"You should fix import for `CollectionUtils`\r\n\r\n    import org.apache.commons.collections4.CollectionUtils;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class main {\r\n        public static void main(String[] args) {\r\n            List&lt;Integer&gt; empty_list = new ArrayList&lt;Integer&gt;();\r\n            if (CollectionUtils.isEmpty(empty_list)) {\r\n                System.out.println(&quot;List is empty&quot;);\r\n            }\r\n        }\r\n    }","title":"How to import org.apache.commons.collections4","body":"<p>You should fix import for <code>CollectionUtils</code></p>\n<pre><code>import org.apache.commons.collections4.CollectionUtils;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class main {\n    public static void main(String[] args) {\n        List&lt;Integer&gt; empty_list = new ArrayList&lt;Integer&gt;();\n        if (CollectionUtils.isEmpty(empty_list)) {\n            System.out.println(&quot;List is empty&quot;);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17658182,"reputation":1,"user_id":12817244,"display_name":"JackCheng"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1660128372,"creation_date":1660128372,"answer_id":73304900,"question_id":73303783,"body_markdown":"if you use IntelliJ IDEA - JetBrains. you should do this.\r\n\r\n1. In the Maven tool window, right-click a linked project.\r\n2. From the context menu, select Reload project .","title":"How to import org.apache.commons.collections4","body":"<p>if you use IntelliJ IDEA - JetBrains. you should do this.</p>\n<ol>\n<li>In the Maven tool window, right-click a linked project.</li>\n<li>From the context menu, select Reload project .</li>\n</ol>\n"}],"owner":{"account_id":26026455,"reputation":11,"user_id":19733311,"display_name":"Alex.m"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2130,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1660128372,"creation_date":1660123395,"question_id":73303783,"body_markdown":"I would like to use \r\n\r\n&gt; CollectionUtils.isEmpty\r\n\r\nfunction in my spring mvc project. To do that I added following block to my pom.xml file:\r\n\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-collections4&lt;/artifactId&gt;\r\n            &lt;version&gt;4.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nand my java class is:\r\n\r\n    import org.apache.commons.collections4;\r\n    public class main {\r\n        public static void main(String[] args) {\r\n            List&lt;Integer&gt; empty_list = new ArrayList&lt;Integer&gt;();\r\n            if (CollectionUtils.isEmpty(empty_list)) {\r\n                System.out.println(&quot;List is empty&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\nWhen I run the code, I got the following error:\r\n\r\n&gt; java: package org.apache.commons.collections4 does not exist\r\n\r\nIt is already in my pom.xml file, what should I do to solve this problem?\r\n\r\n","title":"How to import org.apache.commons.collections4","body":"<p>I would like to use</p>\n<blockquote>\n<p>CollectionUtils.isEmpty</p>\n</blockquote>\n<p>function in my spring mvc project. To do that I added following block to my pom.xml file:</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-collections4&lt;/artifactId&gt;\n        &lt;version&gt;4.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>and my java class is:</p>\n<pre><code>import org.apache.commons.collections4;\npublic class main {\n    public static void main(String[] args) {\n        List&lt;Integer&gt; empty_list = new ArrayList&lt;Integer&gt;();\n        if (CollectionUtils.isEmpty(empty_list)) {\n            System.out.println(&quot;List is empty&quot;);\n        }\n    }\n}\n</code></pre>\n<p>When I run the code, I got the following error:</p>\n<blockquote>\n<p>java: package org.apache.commons.collections4 does not exist</p>\n</blockquote>\n<p>It is already in my pom.xml file, what should I do to solve this problem?</p>\n"},{"tags":["java","c++","tomcat","java-native-interface","openprocess"],"comments":[{"owner":{"account_id":25534785,"reputation":532,"user_id":19322069,"display_name":"access violation"},"score":0,"creation_date":1660048042,"post_id":73291698,"comment_id":129436007,"body_markdown":"Process opening - in Windows, any time a system call fails, there will be error information available to the program, e.g. GetLastError().  This explains why the call failed.  But my guess is it&#39;ll be ACCESS_DENIED.","body":"Process opening - in Windows, any time a system call fails, there will be error information available to the program, e.g. GetLastError().  This explains why the call failed.  But my guess is it&#39;ll be ACCESS_DENIED."},{"owner":{"account_id":25534785,"reputation":532,"user_id":19322069,"display_name":"access violation"},"score":2,"creation_date":1660048190,"post_id":73291698,"comment_id":129436059,"body_markdown":"Running a web server under the SYSTEM identity sounds crazy dangerous, by the way.","body":"Running a web server under the SYSTEM identity sounds crazy dangerous, by the way."},{"owner":{"account_id":4726205,"reputation":12248,"user_id":4420967,"display_name":"James Z"},"score":0,"creation_date":1660058317,"post_id":73291698,"comment_id":129440471,"body_markdown":"The same question seem to have been closed when it was asked few hours earlier, and now same thing with a new account: https://stackoverflow.com/questions/73290486/i-have-try-to-open-process-in-cpp-by-using-psapi-library-but-some-process-not","body":"The same question seem to have been closed when it was asked few hours earlier, and now same thing with a new account: <a href=\"https://stackoverflow.com/questions/73290486/i-have-try-to-open-process-in-cpp-by-using-psapi-library-but-some-process-not\" title=\"i have try to open process in cpp by using psapi library but some process not\">stackoverflow.com/questions/73290486/&hellip;</a>"},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1660127859,"post_id":73291698,"comment_id":129457894,"body_markdown":"Voting to close. These should be separate questions focused on a single topic. You tagged this as [jni], but only the last sentence shows any relation to JNI, without code nota bene.","body":"Voting to close. These should be separate questions focused on a single topic. You tagged this as [jni], but only the last sentence shows any relation to JNI, without code nota bene."}],"answers":[{"tags":[],"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660128349,"creation_date":1660128349,"answer_id":73304889,"question_id":73291698,"body_markdown":"Answering a part of your problem: the TCHAR to Java string conversion depends on how the program is being compiled.\r\nIf `-DUNICODE` is set, `TCHAR` is a `wchar_t`, otherwise it is a `unsigned char`. You seem to assume the latter in every case.\r\n\r\nLucky for you, the fix is fairly simple:\r\n```\r\njstring fromTCHAR(JNIEnv *env, TCHAR *in) {\r\n#ifdef UNICODE\r\n  return env-&gt;NewString(in);\r\n#else\r\n  return env-&gt;NewStringUTF(in);\r\n#endif\r\n}","title":"I have try to open process in cpp by using psapi library but *some process not openning* and I displaying it in webpage using tomcat server and jni","body":"<p>Answering a part of your problem: the TCHAR to Java string conversion depends on how the program is being compiled.\nIf <code>-DUNICODE</code> is set, <code>TCHAR</code> is a <code>wchar_t</code>, otherwise it is a <code>unsigned char</code>. You seem to assume the latter in every case.</p>\n<p>Lucky for you, the fix is fairly simple:</p>\n<pre><code>jstring fromTCHAR(JNIEnv *env, TCHAR *in) {\n#ifdef UNICODE\n  return env-&gt;NewString(in);\n#else\n  return env-&gt;NewStringUTF(in);\n#endif\n}\n</code></pre>\n"}],"owner":{"account_id":26018486,"reputation":21,"user_id":19726496,"display_name":"Abella"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":155,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1660128349,"creation_date":1660047557,"question_id":73291698,"body_markdown":"\r\n**Problem 1**\r\n\r\nI try to open process in cpp by using psapi library but some SYSTEM process not opening and display it in webpage using tomcat server.\r\ni am using jni to transfer data between cpp to java (servlet).\r\n\r\nprocess in task manager (fig 1)\r\n\r\n[![][1]][1]\r\n\r\nprocess listed in webpage (fig 2)\r\n\r\n[![][2]][2]\r\n\r\nIn (fig 1) task manager is displaying all process details\r\nbut in (fig 2) webpage not displaying because cpp unable to open these process.\r\n\r\n**cpp code snippet** \r\n\r\n```\r\n    #include &lt;psapi.h&gt;\r\n\r\n    // processID is process id\r\n    HANDLE process = OpenProcess(PROCESS_ALL_ACCESS , FALSE , processID );\r\n     if (NULL != process )\r\n    {\r\n        //do something\r\n     }\r\n     else{\r\n        //process not opening \r\n     }\r\n```\r\n\r\nIn the above snippet some process not opening and variable ```process``` became ```NULL```\r\n\r\nI used ```EnumProcesses()``` function to get All process id. this giving all process id.\r\nbut  ```OpenProcess()``` not opening some process.\r\n\r\nI tried the below code to open process but not working.\r\n\r\n```\r\nHANDLE process = OpenProcess(READ_CONTROL | PROCESS_ALL_ACCESS | PROCESS_CREATE_PROCESS | PROCESS_CREATE_THREAD | PROCESS_DUP_HANDLE | PROCESS_QUERY_INFORMATION  | PROCESS_QUERY_LIMITED_INFORMATION | PROCESS_SET_INFORMATION | PROCESS_SET_QUOTA |  PROCESS_SUSPEND_RESUME | PROCESS_TERMINATE | PROCESS_VM_OPERATION  | PROCESS_VM_READ | PROCESS_VM_WRITE | SYNCHRONIZE , FALSE , processID );\r\n```\r\n\r\n\r\n**Another thing**\r\n\r\nFirst, no process is opened. Then I thought that tomcat does not have permission to read the process.\r\nSo, I was changed tomcat settings  in Tomcat 10.0/bin/Tomcat10W.exe \r\n\r\nTomcat Setting (fig 3)\r\n\r\n[![][3]][3] \r\n\r\nI changed the radio button to (local system account) and checked (Allow service to interact with desktop) Box option as in (fig 3).\r\n\r\nThen after changing the above settings only All process displayed for me. Except some process.\r\n\r\n**Error code**\r\n\r\nAfter these. I try to read error code using ```GetLastError()``` function. \r\n```\r\nHANDLE process = OpenProcess(PROCESS_ALL_ACCESS , FALSE , processID );\r\nDWORD error_code =  GetLastError();\r\n```\r\nweb page with error code\r\n[![][4]][4]\r\n\r\n\r\nBelow are the meaning of the error code\r\n\r\n**ERROR_SUCCESS**  \r\n0 (0x0)  \r\nThe operation completed successfully.\r\n\r\n**ERROR_ACCESS_DENIED**  \r\n5 (0x5)  \r\nAccess is denied.\r\n\r\n**ERROR_INVALID_HANDLE**  \r\n6 (0x6)  \r\nThe handle is invalid.\r\n\r\n**ERROR_INVALID_PARAMETER**  \r\n87 (0x57)  \r\nThe parameter is incorrect.\r\n\r\n\r\n\r\nIt showing these error.\r\n1. Some process show (error code 5) access denied.\r\n2. For process id: 1356. shows (error code 6) the handle is invalid (process opened but have some problem). \r\n3. For process id: 0. shows (error code 87)  the parameter is incorrect.\r\n\r\nTask manager process id: (0) and process id: (-) \r\n[![][5]][5]\r\n\r\nprocess id (-) not read by ```EnumProcesses()``` and process id (0)\r\nnot opened by ```OpenProcess```.\r\n\r\nHow can I open these processes.\r\n\r\nI think Tomcat need some more special permission to read those process.\r\nI am not sure.  \r\n\r\n\r\n**Problem 2**\r\n\r\nI am reading the name of all process. \r\n```\r\nTCHAR processName[MAX_PATH];\r\nGetModuleBaseName( process, NULL , processName , sizeof(processName ) );\r\n```\r\nAfter getting the name of the process. I am using ```env-&gt;NewStringUTF(processName)``` this line to convert TCHAR to java.lang.String because then only we can able to pass data from cpp to java using jni.\r\n\r\nAll process Name are displaying perfectly except one process.\r\n\r\n\r\nProcess name in task manager (fig 4)\r\n\r\n[![][6]][6]\r\n\r\nIn above (fig 4) image process id 1356 showing process name &quot;Lsalso.exe&quot; correctly. \r\n\r\nProcess name in webpage (fig 5)\r\n\r\n[![][7]][7]\r\n\r\nProcess name in webpage after refreshing (fig 6)\r\n\r\n[![][8]][8]\r\n\r\nbut in webpage(fig 5)(fig 6) not showing the correct name.\r\nthe name of that process in web page changing randomly while refresh.\r\n\r\nI try to print that name in console. It showing like this\r\n\r\n&gt; 1. \\n\\u00126\\u0001\r\n&gt; 2.  Cګ\\u0019\r\n&gt; 3. C&#194;&#231;\\u0019\r\n&gt; 4. pڢ\\u001a\r\n&gt; 5. f}\\u0005&#224;�\r\n&gt; 6. pڢ\r\n\r\nI tried 6 times. Each time it shows different random text which does not have meaning.\r\n\r\n**Error code**\r\n\r\nI try to read error code using ```GetLastError()``` function. \r\n\r\n```\r\nGetModuleBaseName( process, NULL , processName , sizeof(processName ) );\r\nDWORD error_code =  GetLastError();\r\n```\r\n\r\nIt shows error code (998).\r\n\r\n**ERROR_NOACCESS**  \r\n998 (0x3E6)  \r\nInvalid access to memory location.  \r\n\r\n\r\nThis process shows error code (6) while opening process as I already said above.\r\n\r\nI thing  ```GetModuleBaseName()``` function not reading the name properly or conversion from TCHAR to java.lang.String ```env-&gt;NewStringUTF(processName)``` is problem.\r\n\r\nI don&#39;t know why  \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ja0ty.png\r\n  [2]: https://i.stack.imgur.com/GXocC.png\r\n  [3]: https://i.stack.imgur.com/el5As.png\r\n  [4]: https://i.stack.imgur.com/usksI.jpg\r\n  [5]: https://i.stack.imgur.com/YrRd1.png\r\n  [6]: https://i.stack.imgur.com/A8mrQ.png\r\n  [7]: https://i.stack.imgur.com/Zbe9r.png\r\n  [8]: https://i.stack.imgur.com/tzmMQ.png\r\n","title":"I have try to open process in cpp by using psapi library but *some process not openning* and I displaying it in webpage using tomcat server and jni","body":"<p><strong>Problem 1</strong></p>\n<p>I try to open process in cpp by using psapi library but some SYSTEM process not opening and display it in webpage using tomcat server.\ni am using jni to transfer data between cpp to java (servlet).</p>\n<p>process in task manager (fig 1)</p>\n<p><a href=\"https://i.stack.imgur.com/ja0ty.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ja0ty.png\" alt=\"\" /></a></p>\n<p>process listed in webpage (fig 2)</p>\n<p><a href=\"https://i.stack.imgur.com/GXocC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GXocC.png\" alt=\"\" /></a></p>\n<p>In (fig 1) task manager is displaying all process details\nbut in (fig 2) webpage not displaying because cpp unable to open these process.</p>\n<p><strong>cpp code snippet</strong></p>\n<pre><code>    #include &lt;psapi.h&gt;\n\n    // processID is process id\n    HANDLE process = OpenProcess(PROCESS_ALL_ACCESS , FALSE , processID );\n     if (NULL != process )\n    {\n        //do something\n     }\n     else{\n        //process not opening \n     }\n</code></pre>\n<p>In the above snippet some process not opening and variable <code>process</code> became <code>NULL</code></p>\n<p>I used <code>EnumProcesses()</code> function to get All process id. this giving all process id.\nbut  <code>OpenProcess()</code> not opening some process.</p>\n<p>I tried the below code to open process but not working.</p>\n<pre><code>HANDLE process = OpenProcess(READ_CONTROL | PROCESS_ALL_ACCESS | PROCESS_CREATE_PROCESS | PROCESS_CREATE_THREAD | PROCESS_DUP_HANDLE | PROCESS_QUERY_INFORMATION  | PROCESS_QUERY_LIMITED_INFORMATION | PROCESS_SET_INFORMATION | PROCESS_SET_QUOTA |  PROCESS_SUSPEND_RESUME | PROCESS_TERMINATE | PROCESS_VM_OPERATION  | PROCESS_VM_READ | PROCESS_VM_WRITE | SYNCHRONIZE , FALSE , processID );\n</code></pre>\n<p><strong>Another thing</strong></p>\n<p>First, no process is opened. Then I thought that tomcat does not have permission to read the process.\nSo, I was changed tomcat settings  in Tomcat 10.0/bin/Tomcat10W.exe</p>\n<p>Tomcat Setting (fig 3)</p>\n<p><a href=\"https://i.stack.imgur.com/el5As.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/el5As.png\" alt=\"\" /></a></p>\n<p>I changed the radio button to (local system account) and checked (Allow service to interact with desktop) Box option as in (fig 3).</p>\n<p>Then after changing the above settings only All process displayed for me. Except some process.</p>\n<p><strong>Error code</strong></p>\n<p>After these. I try to read error code using <code>GetLastError()</code> function.</p>\n<pre><code>HANDLE process = OpenProcess(PROCESS_ALL_ACCESS , FALSE , processID );\nDWORD error_code =  GetLastError();\n</code></pre>\n<p>web page with error code\n<a href=\"https://i.stack.imgur.com/usksI.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/usksI.jpg\" alt=\"\" /></a></p>\n<p>Below are the meaning of the error code</p>\n<p><strong>ERROR_SUCCESS</strong><br />\n0 (0x0)<br />\nThe operation completed successfully.</p>\n<p><strong>ERROR_ACCESS_DENIED</strong><br />\n5 (0x5)<br />\nAccess is denied.</p>\n<p><strong>ERROR_INVALID_HANDLE</strong><br />\n6 (0x6)<br />\nThe handle is invalid.</p>\n<p><strong>ERROR_INVALID_PARAMETER</strong><br />\n87 (0x57)<br />\nThe parameter is incorrect.</p>\n<p>It showing these error.</p>\n<ol>\n<li>Some process show (error code 5) access denied.</li>\n<li>For process id: 1356. shows (error code 6) the handle is invalid (process opened but have some problem).</li>\n<li>For process id: 0. shows (error code 87)  the parameter is incorrect.</li>\n</ol>\n<p>Task manager process id: (0) and process id: (-)\n<a href=\"https://i.stack.imgur.com/YrRd1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YrRd1.png\" alt=\"\" /></a></p>\n<p>process id (-) not read by <code>EnumProcesses()</code> and process id (0)\nnot opened by <code>OpenProcess</code>.</p>\n<p>How can I open these processes.</p>\n<p>I think Tomcat need some more special permission to read those process.\nI am not sure.</p>\n<p><strong>Problem 2</strong></p>\n<p>I am reading the name of all process.</p>\n<pre><code>TCHAR processName[MAX_PATH];\nGetModuleBaseName( process, NULL , processName , sizeof(processName ) );\n</code></pre>\n<p>After getting the name of the process. I am using <code>env-&gt;NewStringUTF(processName)</code> this line to convert TCHAR to java.lang.String because then only we can able to pass data from cpp to java using jni.</p>\n<p>All process Name are displaying perfectly except one process.</p>\n<p>Process name in task manager (fig 4)</p>\n<p><a href=\"https://i.stack.imgur.com/A8mrQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A8mrQ.png\" alt=\"\" /></a></p>\n<p>In above (fig 4) image process id 1356 showing process name &quot;Lsalso.exe&quot; correctly.</p>\n<p>Process name in webpage (fig 5)</p>\n<p><a href=\"https://i.stack.imgur.com/Zbe9r.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Zbe9r.png\" alt=\"\" /></a></p>\n<p>Process name in webpage after refreshing (fig 6)</p>\n<p><a href=\"https://i.stack.imgur.com/tzmMQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tzmMQ.png\" alt=\"\" /></a></p>\n<p>but in webpage(fig 5)(fig 6) not showing the correct name.\nthe name of that process in web page changing randomly while refresh.</p>\n<p>I try to print that name in console. It showing like this</p>\n<blockquote>\n<ol>\n<li>\\n\\u00126\\u0001</li>\n<li>Cګ\\u0019</li>\n<li>CÂç\\u0019</li>\n<li>pڢ\\u001a</li>\n<li>f}\\u0005à�</li>\n<li>pڢ</li>\n</ol>\n</blockquote>\n<p>I tried 6 times. Each time it shows different random text which does not have meaning.</p>\n<p><strong>Error code</strong></p>\n<p>I try to read error code using <code>GetLastError()</code> function.</p>\n<pre><code>GetModuleBaseName( process, NULL , processName , sizeof(processName ) );\nDWORD error_code =  GetLastError();\n</code></pre>\n<p>It shows error code (998).</p>\n<p><strong>ERROR_NOACCESS</strong><br />\n998 (0x3E6)<br />\nInvalid access to memory location.</p>\n<p>This process shows error code (6) while opening process as I already said above.</p>\n<p>I thing  <code>GetModuleBaseName()</code> function not reading the name properly or conversion from TCHAR to java.lang.String <code>env-&gt;NewStringUTF(processName)</code> is problem.</p>\n<p>I don't know why</p>\n"},{"tags":["java","archive","tar"],"comments":[{"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":0,"creation_date":1446141482,"post_id":315618,"comment_id":54632268,"body_markdown":"skiphoppy, after 2008 when I originally answered, the Apache Commons Compress project was released. You should probably accept [this answer](http://stackoverflow.com/a/7556307/3474) so that it&#39;s highlighted more.","body":"skiphoppy, after 2008 when I originally answered, the Apache Commons Compress project was released. You should probably accept <a href=\"http://stackoverflow.com/a/7556307/3474\">this answer</a> so that it&#39;s highlighted more."}],"answers":[{"tags":[],"owner":{"account_id":16147,"reputation":11216,"user_id":34880,"accept_rate":73,"display_name":"Fernando Migu&#233;lez"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1227563704,"creation_date":1227563704,"answer_id":315640,"question_id":315618,"body_markdown":"What about using this [API][1] for tar files, this [other one][2] included inside Ant for BZIP2 and the [standard one][3] for GZIP?\r\n\r\n\r\n  [1]: http://www.trustice.com/java/tar/\r\n  [2]: http://www.kohsuke.org/bzip2/\r\n  [3]: http://java.sun.com/j2se/1.4.2/docs/api/java/util/zip/GZIPInputStream.html","title":"How do I extract a tar file in Java?","body":"<p>What about using this <a href=\"http://www.trustice.com/java/tar/\" rel=\"nofollow noreferrer\">API</a> for tar files, this <a href=\"http://www.kohsuke.org/bzip2/\" rel=\"nofollow noreferrer\">other one</a> included inside Ant for BZIP2 and the <a href=\"http://java.sun.com/j2se/1.4.2/docs/api/java/util/zip/GZIPInputStream.html\" rel=\"nofollow noreferrer\">standard one</a> for GZIP?</p>\n"},{"tags":[],"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"down_vote_count":4,"up_vote_count":26,"is_accepted":true,"score":22,"last_activity_date":1446141655,"creation_date":1227564041,"answer_id":315668,"question_id":315618,"body_markdown":"*Note:* This functionality was later published through a separate project, Apache Commons Compress, as [described in another answer.][1] This answer is out of date.\r\n\r\n---\r\n\r\nI haven&#39;t used a tar API directly, but tar and bzip2 are implemented in Ant; you could borrow their implementation, or possibly use Ant to do what you need.\r\n\r\n[Gzip is part of Java SE][2] (and I&#39;m guessing the Ant implementation follows the same model).\r\n\r\n`GZIPInputStream` is just an `InputStream` decorator. You can wrap, for example, a `FileInputStream` in a `GZIPInputStream` and use it in the same way you&#39;d use any `InputStream`:\r\n\r\n    InputStream is = new GZIPInputStream(new FileInputStream(file));\r\n\r\n(Note that the GZIPInputStream has its own, internal buffer, so wrapping the `FileInputStream` in a `BufferedInputStream` would probably decrease performance.)\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/7556307/3474\r\n  [2]: http://java.sun.com/j2se/1.5.0/docs/api/java/util/zip/package-summary.html","title":"How do I extract a tar file in Java?","body":"<p><em>Note:</em> This functionality was later published through a separate project, Apache Commons Compress, as <a href=\"https://stackoverflow.com/a/7556307/3474\">described in another answer.</a> This answer is out of date.</p>\n\n<hr>\n\n<p>I haven't used a tar API directly, but tar and bzip2 are implemented in Ant; you could borrow their implementation, or possibly use Ant to do what you need.</p>\n\n<p><a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/zip/package-summary.html\" rel=\"noreferrer\">Gzip is part of Java SE</a> (and I'm guessing the Ant implementation follows the same model).</p>\n\n<p><code>GZIPInputStream</code> is just an <code>InputStream</code> decorator. You can wrap, for example, a <code>FileInputStream</code> in a <code>GZIPInputStream</code> and use it in the same way you'd use any <code>InputStream</code>:</p>\n\n<pre><code>InputStream is = new GZIPInputStream(new FileInputStream(file));\n</code></pre>\n\n<p>(Note that the GZIPInputStream has its own, internal buffer, so wrapping the <code>FileInputStream</code> in a <code>BufferedInputStream</code> would probably decrease performance.)</p>\n"},{"tags":[],"owner":{"account_id":217270,"reputation":2444,"user_id":472992,"display_name":"J&#246;rg"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1307011557,"creation_date":1289567940,"answer_id":4165005,"question_id":315618,"body_markdown":"In addition to gzip and bzip2, [Apache Commons Compress API][1] has also tar support, originally based on [ICE Engineering Java Tar Package][2], which is both API and standalone tool.\r\n\r\n\r\n  [1]: http://commons.apache.org/compress/\r\n  [2]: http://www.trustice.com/java/tar/","title":"How do I extract a tar file in Java?","body":"<p>In addition to gzip and bzip2, <a href=\"http://commons.apache.org/compress/\" rel=\"nofollow\">Apache Commons Compress API</a> has also tar support, originally based on <a href=\"http://www.trustice.com/java/tar/\" rel=\"nofollow\">ICE Engineering Java Tar Package</a>, which is both API and standalone tool.</p>\n"},{"tags":[],"owner":{"account_id":217270,"reputation":2444,"user_id":472992,"display_name":"J&#246;rg"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1553595825,"creation_date":1289568610,"answer_id":4165096,"question_id":315618,"body_markdown":"[Apache Commons VFS][1] supports tar as a &lt;b&gt;virtual file system&lt;/b&gt;, which supports URLs like this one &lt;code&gt;tar:gz:http://anyhost/dir/mytar.tar.gz!/mytar.tar!/path/in/tar/README.txt&lt;/code&gt;&lt;br&gt;\r\n\r\n[TrueZip][2] or its successor [TrueVFS][3] does the same ... it&#39;s also available from Maven Central.\r\n\r\n\r\n  [1]: http://commons.apache.org/vfs/filesystems.html\r\n  [2]: https://christian-schlichtherle.bitbucket.io/truezip/\r\n  [3]: http://truevfs.net/","title":"How do I extract a tar file in Java?","body":"<p><a href=\"http://commons.apache.org/vfs/filesystems.html\" rel=\"nofollow noreferrer\">Apache Commons VFS</a> supports tar as a <b>virtual file system</b>, which supports URLs like this one <code>tar:gz:<a href=\"http://anyhost/dir/mytar.tar.gz!/mytar.tar!/path/in/tar/README.txt\" rel=\"nofollow noreferrer\">http://anyhost/dir/mytar.tar.gz!/mytar.tar!/path/in/tar/README.txt</a></code><br></p>\n\n<p><a href=\"https://christian-schlichtherle.bitbucket.io/truezip/\" rel=\"nofollow noreferrer\">TrueZip</a> or its successor <a href=\"http://truevfs.net/\" rel=\"nofollow noreferrer\">TrueVFS</a> does the same ... it's also available from Maven Central.</p>\n"},{"tags":[],"owner":{"account_id":43036,"reputation":16153,"user_id":125617,"accept_rate":74,"display_name":"Renaud"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1323445762,"creation_date":1316812663,"answer_id":7534962,"question_id":315618,"body_markdown":"I just tried a bunch of the suggested libs (TrueZip, Apache Compress), but no luck.\r\n\r\nHere is an example with Apache Commons VFS:\r\n\r\n    FileSystemManager fsManager = VFS.getManager();\r\n    FileObject archive = fsManager.resolveFile(&quot;tgz:file://&quot; + fileName);\r\n\r\n    // List the children of the archive file\r\n    FileObject[] children = archive.getChildren();\r\n    System.out.println(&quot;Children of &quot; + archive.getName().getURI()+&quot; are &quot;);\r\n    for (int i = 0; i &lt; children.length; i++) {\r\n        FileObject fo = children[i];\r\n        System.out.println(fo.getName().getBaseName());\r\n        if (fo.isReadable() &amp;&amp; fo.getType() == FileType.FILE\r\n            &amp;&amp; fo.getName().getExtension().equals(&quot;nxml&quot;)) {\r\n            FileContent fc = fo.getContent();\r\n            InputStream is = fc.getInputStream();\r\n        }\r\n    }\r\n\r\n\r\nAnd the maven dependency:\r\n\r\n    \t&lt;dependency&gt;\r\n          &lt;groupId&gt;commons-vfs&lt;/groupId&gt;\r\n          &lt;artifactId&gt;commons-vfs&lt;/artifactId&gt;\r\n          &lt;version&gt;1.0&lt;/version&gt;\r\n        &lt;/dependency&gt;","title":"How do I extract a tar file in Java?","body":"<p>I just tried a bunch of the suggested libs (TrueZip, Apache Compress), but no luck.</p>\n\n<p>Here is an example with Apache Commons VFS:</p>\n\n<pre><code>FileSystemManager fsManager = VFS.getManager();\nFileObject archive = fsManager.resolveFile(\"tgz:file://\" + fileName);\n\n// List the children of the archive file\nFileObject[] children = archive.getChildren();\nSystem.out.println(\"Children of \" + archive.getName().getURI()+\" are \");\nfor (int i = 0; i &lt; children.length; i++) {\n    FileObject fo = children[i];\n    System.out.println(fo.getName().getBaseName());\n    if (fo.isReadable() &amp;&amp; fo.getType() == FileType.FILE\n        &amp;&amp; fo.getName().getExtension().equals(\"nxml\")) {\n        FileContent fc = fo.getContent();\n        InputStream is = fc.getInputStream();\n    }\n}\n</code></pre>\n\n<p>And the maven dependency:</p>\n\n<pre><code>    &lt;dependency&gt;\n      &lt;groupId&gt;commons-vfs&lt;/groupId&gt;\n      &lt;artifactId&gt;commons-vfs&lt;/artifactId&gt;\n      &lt;version&gt;1.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":240417,"reputation":3459,"user_id":510638,"display_name":"Dan Borza"},"down_vote_count":0,"up_vote_count":76,"is_accepted":false,"score":76,"last_activity_date":1504248505,"creation_date":1317045915,"answer_id":7556307,"question_id":315618,"body_markdown":"You can do this with the Apache Commons Compress library. You can download the 1.2 version from http://mvnrepository.com/artifact/org.apache.commons/commons-compress/1.2. \r\n\r\nHere are two methods: one that unzips a file and another one that untars it. So, for a file\r\n&amp;lt;fileName&amp;gt;tar.gz, you need to first unzip it and after that untar it. Please note that the tar archive may contain folders as well, case in which they need to be created on the local filesystem.\r\n\r\nEnjoy.\r\n\r\n    /** Untar an input file into an output file.\r\n\r\n\t * The output file is created in the output folder, having the same name\r\n\t * as the input file, minus the &#39;.tar&#39; extension. \r\n\t * \r\n\t * @param inputFile\t\tthe input .tar file\r\n\t * @param outputDir \tthe output directory file. \r\n\t * @throws IOException \r\n\t * @throws FileNotFoundException\r\n\t *  \r\n\t * @return\tThe {@link List} of {@link File}s with the untared content.\r\n\t * @throws ArchiveException \r\n\t */\r\n\tprivate static List&lt;File&gt; unTar(final File inputFile, final File outputDir) throws FileNotFoundException, IOException, ArchiveException {\r\n\t\t\r\n\t\tLOG.info(String.format(&quot;Untaring %s to dir %s.&quot;, inputFile.getAbsolutePath(), outputDir.getAbsolutePath()));\r\n\r\n\t\tfinal List&lt;File&gt; untaredFiles = new LinkedList&lt;File&gt;();\r\n\t\tfinal InputStream is = new FileInputStream(inputFile); \r\n\t\tfinal TarArchiveInputStream debInputStream = (TarArchiveInputStream) new ArchiveStreamFactory().createArchiveInputStream(&quot;tar&quot;, is);\r\n\t\tTarArchiveEntry entry = null; \r\n\t\twhile ((entry = (TarArchiveEntry)debInputStream.getNextEntry()) != null) {\r\n\t\t\tfinal File outputFile = new File(outputDir, entry.getName());\r\n\t\t\tif (entry.isDirectory()) {\r\n\t\t\t\tLOG.info(String.format(&quot;Attempting to write output directory %s.&quot;, outputFile.getAbsolutePath()));\r\n\t\t\t\tif (!outputFile.exists()) {\r\n\t\t\t\t\tLOG.info(String.format(&quot;Attempting to create output directory %s.&quot;, outputFile.getAbsolutePath()));\r\n\t\t\t\t\tif (!outputFile.mkdirs()) {\r\n\t\t\t\t\t\tthrow new IllegalStateException(String.format(&quot;Couldn&#39;t create directory %s.&quot;, outputFile.getAbsolutePath()));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tLOG.info(String.format(&quot;Creating output file %s.&quot;, outputFile.getAbsolutePath()));\r\n\t\t\t\tfinal OutputStream outputFileStream = new FileOutputStream(outputFile); \r\n\t\t\t\tIOUtils.copy(debInputStream, outputFileStream);\r\n\t\t\t\toutputFileStream.close();\r\n\t\t\t}\r\n\t\t\tuntaredFiles.add(outputFile);\r\n\t\t}\r\n\t\tdebInputStream.close(); \r\n\t    \r\n\t\treturn untaredFiles;\r\n\t}\r\n\r\n    /**\r\n\t * Ungzip an input file into an output file.\r\n\t * &lt;p&gt;\r\n\t * The output file is created in the output folder, having the same name\r\n\t * as the input file, minus the &#39;.gz&#39; extension. \r\n\t * \r\n\t * @param inputFile\t\tthe input .gz file\r\n\t * @param outputDir \tthe output directory file. \r\n\t * @throws IOException \r\n\t * @throws FileNotFoundException\r\n\t *  \r\n\t * @return\tThe {@File} with the ungzipped content.\r\n\t */\r\n\tprivate static File unGzip(final File inputFile, final File outputDir) throws FileNotFoundException, IOException {\r\n\t\t\r\n\t\tLOG.info(String.format(&quot;Ungzipping %s to dir %s.&quot;, inputFile.getAbsolutePath(), outputDir.getAbsolutePath()));\r\n\r\n\t\tfinal File outputFile = new File(outputDir, inputFile.getName().substring(0, inputFile.getName().length() - 3));\r\n\t\t\r\n\t\tfinal GZIPInputStream in = new GZIPInputStream(new FileInputStream(inputFile));\r\n\t\tfinal FileOutputStream out = new FileOutputStream(outputFile);\r\n\t\t\r\n\t    IOUtils.copy(in, out);\r\n\t    \r\n\t    in.close();\r\n\t    out.close();\r\n\t    \r\n\t\treturn outputFile;\r\n\t}","title":"How do I extract a tar file in Java?","body":"<p>You can do this with the Apache Commons Compress library. You can download the 1.2 version from <a href=\"http://mvnrepository.com/artifact/org.apache.commons/commons-compress/1.2\" rel=\"noreferrer\">http://mvnrepository.com/artifact/org.apache.commons/commons-compress/1.2</a>. </p>\n\n<p>Here are two methods: one that unzips a file and another one that untars it. So, for a file\n&lt;fileName&gt;tar.gz, you need to first unzip it and after that untar it. Please note that the tar archive may contain folders as well, case in which they need to be created on the local filesystem.</p>\n\n<p>Enjoy.</p>\n\n<pre><code>/** Untar an input file into an output file.\n\n * The output file is created in the output folder, having the same name\n * as the input file, minus the '.tar' extension. \n * \n * @param inputFile     the input .tar file\n * @param outputDir     the output directory file. \n * @throws IOException \n * @throws FileNotFoundException\n *  \n * @return  The {@link List} of {@link File}s with the untared content.\n * @throws ArchiveException \n */\nprivate static List&lt;File&gt; unTar(final File inputFile, final File outputDir) throws FileNotFoundException, IOException, ArchiveException {\n\n    LOG.info(String.format(\"Untaring %s to dir %s.\", inputFile.getAbsolutePath(), outputDir.getAbsolutePath()));\n\n    final List&lt;File&gt; untaredFiles = new LinkedList&lt;File&gt;();\n    final InputStream is = new FileInputStream(inputFile); \n    final TarArchiveInputStream debInputStream = (TarArchiveInputStream) new ArchiveStreamFactory().createArchiveInputStream(\"tar\", is);\n    TarArchiveEntry entry = null; \n    while ((entry = (TarArchiveEntry)debInputStream.getNextEntry()) != null) {\n        final File outputFile = new File(outputDir, entry.getName());\n        if (entry.isDirectory()) {\n            LOG.info(String.format(\"Attempting to write output directory %s.\", outputFile.getAbsolutePath()));\n            if (!outputFile.exists()) {\n                LOG.info(String.format(\"Attempting to create output directory %s.\", outputFile.getAbsolutePath()));\n                if (!outputFile.mkdirs()) {\n                    throw new IllegalStateException(String.format(\"Couldn't create directory %s.\", outputFile.getAbsolutePath()));\n                }\n            }\n        } else {\n            LOG.info(String.format(\"Creating output file %s.\", outputFile.getAbsolutePath()));\n            final OutputStream outputFileStream = new FileOutputStream(outputFile); \n            IOUtils.copy(debInputStream, outputFileStream);\n            outputFileStream.close();\n        }\n        untaredFiles.add(outputFile);\n    }\n    debInputStream.close(); \n\n    return untaredFiles;\n}\n\n/**\n * Ungzip an input file into an output file.\n * &lt;p&gt;\n * The output file is created in the output folder, having the same name\n * as the input file, minus the '.gz' extension. \n * \n * @param inputFile     the input .gz file\n * @param outputDir     the output directory file. \n * @throws IOException \n * @throws FileNotFoundException\n *  \n * @return  The {@File} with the ungzipped content.\n */\nprivate static File unGzip(final File inputFile, final File outputDir) throws FileNotFoundException, IOException {\n\n    LOG.info(String.format(\"Ungzipping %s to dir %s.\", inputFile.getAbsolutePath(), outputDir.getAbsolutePath()));\n\n    final File outputFile = new File(outputDir, inputFile.getName().substring(0, inputFile.getName().length() - 3));\n\n    final GZIPInputStream in = new GZIPInputStream(new FileInputStream(inputFile));\n    final FileOutputStream out = new FileOutputStream(outputFile);\n\n    IOUtils.copy(in, out);\n\n    in.close();\n    out.close();\n\n    return outputFile;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4190770,"reputation":151,"user_id":3433434,"display_name":"D3iv"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1395151448,"creation_date":1395151448,"answer_id":22481757,"question_id":315618,"body_markdown":"    Archiver archiver = ArchiverFactory.createArchiver(&quot;tar&quot;, &quot;gz&quot;);\r\n    archiver.extract(archiveFile, destDir);\r\n\r\nDependency:\r\n   \r\n\r\n     &lt;dependency&gt;\r\n            &lt;groupId&gt;org.rauschig&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jarchivelib&lt;/artifactId&gt;\r\n            &lt;version&gt;0.5.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n","title":"How do I extract a tar file in Java?","body":"<pre><code>Archiver archiver = ArchiverFactory.createArchiver(\"tar\", \"gz\");\narchiver.extract(archiveFile, destDir);\n</code></pre>\n\n<p>Dependency:</p>\n\n<pre><code> &lt;dependency&gt;\n        &lt;groupId&gt;org.rauschig&lt;/groupId&gt;\n        &lt;artifactId&gt;jarchivelib&lt;/artifactId&gt;\n        &lt;version&gt;0.5.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":71656,"reputation":514,"user_id":207245,"display_name":"Wade Walker"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1550851615,"creation_date":1550851615,"answer_id":54830968,"question_id":315618,"body_markdown":"Here&#39;s a version based on [this earlier answer][1] by Dan Borza that uses [Apache Commons Compress][2] and Java NIO (i.e. Path instead of File). It also does the uncompression and untarring in one stream so there&#39;s no intermediate file creation.\r\n\r\n```\r\npublic static void unTarGz( Path pathInput, Path pathOutput ) throws IOException {\r\n    TarArchiveInputStream tararchiveinputstream =\r\n        new TarArchiveInputStream(\r\n            new GzipCompressorInputStream(\r\n                new BufferedInputStream( Files.newInputStream( pathInput ) ) ) );\r\n\r\n    ArchiveEntry archiveentry = null;\r\n    while( (archiveentry = tararchiveinputstream.getNextEntry()) != null ) {\r\n        Path pathEntryOutput = pathOutput.resolve( archiveentry.getName() );\r\n        if( archiveentry.isDirectory() ) {\r\n            if( !Files.exists( pathEntryOutput ) )\r\n                Files.createDirectory( pathEntryOutput );\r\n        }\r\n        else\r\n            Files.copy( tararchiveinputstream, pathEntryOutput );\r\n    }\r\n\r\n    tararchiveinputstream.close();\r\n}\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/7556307/207245\r\n  [2]: https://mvnrepository.com/artifact/org.apache.commons/commons-compress/1.18","title":"How do I extract a tar file in Java?","body":"<p>Here's a version based on <a href=\"https://stackoverflow.com/a/7556307/207245\">this earlier answer</a> by Dan Borza that uses <a href=\"https://mvnrepository.com/artifact/org.apache.commons/commons-compress/1.18\" rel=\"noreferrer\">Apache Commons Compress</a> and Java NIO (i.e. Path instead of File). It also does the uncompression and untarring in one stream so there's no intermediate file creation.</p>\n\n<pre><code>public static void unTarGz( Path pathInput, Path pathOutput ) throws IOException {\n    TarArchiveInputStream tararchiveinputstream =\n        new TarArchiveInputStream(\n            new GzipCompressorInputStream(\n                new BufferedInputStream( Files.newInputStream( pathInput ) ) ) );\n\n    ArchiveEntry archiveentry = null;\n    while( (archiveentry = tararchiveinputstream.getNextEntry()) != null ) {\n        Path pathEntryOutput = pathOutput.resolve( archiveentry.getName() );\n        if( archiveentry.isDirectory() ) {\n            if( !Files.exists( pathEntryOutput ) )\n                Files.createDirectory( pathEntryOutput );\n        }\n        else\n            Files.copy( tararchiveinputstream, pathEntryOutput );\n    }\n\n    tararchiveinputstream.close();\n}\n</code></pre>\n"}],"owner":{"account_id":9733,"reputation":98806,"user_id":18103,"accept_rate":68,"display_name":"skiphoppy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":114050,"favorite_count":0,"down_vote_count":0,"up_vote_count":69,"accepted_answer_id":315668,"answer_count":8,"score":69,"last_activity_date":1660128205,"creation_date":1227563283,"question_id":315618,"body_markdown":"How do I extract a tar (or tar.gz, or tar.bz2) file in Java?","title":"How do I extract a tar file in Java?","body":"<p>How do I extract a tar (or tar.gz, or tar.bz2) file in Java?</p>\n"},{"tags":["java","sorting"],"answers":[{"tags":[],"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1296052357,"creation_date":1296051981,"answer_id":4805618,"question_id":4805606,"body_markdown":"Use `Comparator` and then put objects into `Collection`,  then `Collections.sort();`\r\n\r\n\r\n\r\n    class Person {\r\n    \r\n        String fname;\r\n        String lname;\r\n        int age;\r\n    \r\n        public Person() {\r\n        }\r\n    \r\n        public int getAge() {\r\n            return age;\r\n        }\r\n    \r\n        public void setAge(int age) {\r\n            this.age = age;\r\n        }\r\n    \r\n        public String getFname() {\r\n            return fname;\r\n        }\r\n    \r\n        public void setFname(String fname) {\r\n            this.fname = fname;\r\n        }\r\n    \r\n        public String getLname() {\r\n            return lname;\r\n        }\r\n    \r\n        public void setLname(String lname) {\r\n            this.lname = lname;\r\n        }\r\n    \r\n        public Person(String fname, String lname, int age) {\r\n            this.fname = fname;\r\n            this.lname = lname;\r\n            this.age = age;\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return fname + &quot;,&quot; + lname + &quot;,&quot; + age;\r\n        }\r\n    }\r\n    \r\n    public class Main{\r\n    \r\n        public static void main(String[] args) {\r\n            List&lt;Person&gt; persons = new java.util.ArrayList&lt;Person&gt;();\r\n            persons.add(new Person(&quot;abc3&quot;, &quot;def3&quot;, 10));\r\n            persons.add(new Person(&quot;abc2&quot;, &quot;def2&quot;, 32));\r\n            persons.add(new Person(&quot;abc1&quot;, &quot;def1&quot;, 65));\r\n            persons.add(new Person(&quot;abc4&quot;, &quot;def4&quot;, 10));\r\n            System.out.println(persons);\r\n            Collections.sort(persons, new Comparator&lt;Person&gt;() {\r\n    \r\n                @Override\r\n                public int compare(Person t, Person t1) {\r\n                    return t.getAge() - t1.getAge();\r\n                }\r\n            });\r\n            System.out.println(persons);\r\n    \r\n        }\r\n    }\r\n\r\n","title":"How to sort by two fields in Java?","body":"<p>Use <code>Comparator</code> and then put objects into <code>Collection</code>,  then <code>Collections.sort();</code></p>\n\n<pre><code>class Person {\n\n    String fname;\n    String lname;\n    int age;\n\n    public Person() {\n    }\n\n    public int getAge() {\n        return age;\n    }\n\n    public void setAge(int age) {\n        this.age = age;\n    }\n\n    public String getFname() {\n        return fname;\n    }\n\n    public void setFname(String fname) {\n        this.fname = fname;\n    }\n\n    public String getLname() {\n        return lname;\n    }\n\n    public void setLname(String lname) {\n        this.lname = lname;\n    }\n\n    public Person(String fname, String lname, int age) {\n        this.fname = fname;\n        this.lname = lname;\n        this.age = age;\n    }\n\n    @Override\n    public String toString() {\n        return fname + \",\" + lname + \",\" + age;\n    }\n}\n\npublic class Main{\n\n    public static void main(String[] args) {\n        List&lt;Person&gt; persons = new java.util.ArrayList&lt;Person&gt;();\n        persons.add(new Person(\"abc3\", \"def3\", 10));\n        persons.add(new Person(\"abc2\", \"def2\", 32));\n        persons.add(new Person(\"abc1\", \"def1\", 65));\n        persons.add(new Person(\"abc4\", \"def4\", 10));\n        System.out.println(persons);\n        Collections.sort(persons, new Comparator&lt;Person&gt;() {\n\n            @Override\n            public int compare(Person t, Person t1) {\n                return t.getAge() - t1.getAge();\n            }\n        });\n        System.out.println(persons);\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":104911,"reputation":119202,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1296052896,"creation_date":1296051989,"answer_id":4805621,"question_id":4805606,"body_markdown":"You need to implement your own `Comparator`, and then use it: for example\r\n\r\n    Arrays.sort(persons, new PersonComparator());\r\n\r\nYour Comparator could look a bit like this:\r\n\r\n    public class PersonComparator implements Comparator&lt;? extends Person&gt; {\r\n\r\n      public int compare(Person p1, Person p2) {\r\n         int nameCompare = p1.name.compareToIgnoreCase(p2.name);\r\n         if (nameCompare != 0) {\r\n            return nameCompare;\r\n         } else {\r\n           return Integer.valueOf(p1.age).compareTo(Integer.valueOf(p2.age));\r\n         }\r\n      }\r\n    }\r\n\r\nThe comparator first compares the names, if they are not equals it returns the result from comparing them, else it returns the compare result when comparing the ages of both persons.\r\n\r\n*This code is only a draft: because the class is immutable you could think of building an singleton of it, instead creating a new instance for each sorting.*","title":"How to sort by two fields in Java?","body":"<p>You need to implement your own <code>Comparator</code>, and then use it: for example</p>\n\n<pre><code>Arrays.sort(persons, new PersonComparator());\n</code></pre>\n\n<p>Your Comparator could look a bit like this:</p>\n\n<pre><code>public class PersonComparator implements Comparator&lt;? extends Person&gt; {\n\n  public int compare(Person p1, Person p2) {\n     int nameCompare = p1.name.compareToIgnoreCase(p2.name);\n     if (nameCompare != 0) {\n        return nameCompare;\n     } else {\n       return Integer.valueOf(p1.age).compareTo(Integer.valueOf(p2.age));\n     }\n  }\n}\n</code></pre>\n\n<p>The comparator first compares the names, if they are not equals it returns the result from comparing them, else it returns the compare result when comparing the ages of both persons.</p>\n\n<p><em>This code is only a draft: because the class is immutable you could think of building an singleton of it, instead creating a new instance for each sorting.</em></p>\n"},{"tags":[],"owner":{"account_id":61630,"reputation":38237,"user_id":183579,"accept_rate":68,"display_name":"Richard H"},"down_vote_count":3,"up_vote_count":287,"is_accepted":true,"score":284,"last_activity_date":1522247455,"creation_date":1296052292,"answer_id":4805676,"question_id":4805606,"body_markdown":"You can use `Collections.sort` as follows:\r\n\r\n    private static void order(List&lt;Person&gt; persons) {\r\n\t\t\r\n\t\tCollections.sort(persons, new Comparator() {\r\n\r\n\t\t\tpublic int compare(Object o1, Object o2) {\r\n\r\n                String x1 = ((Person) o1).getName();\r\n                String x2 = ((Person) o2).getName();\r\n                int sComp = x1.compareTo(x2);\r\n\r\n                if (sComp != 0) {\r\n                   return sComp;\r\n                } \r\n          \r\n                Integer x1 = ((Person) o1).getAge();\r\n\t\t        Integer x2 = ((Person) o2).getAge();\r\n\t\t        return x1.compareTo(x2);\r\n\t\t}});\r\n\t}\r\n\r\n`List&lt;Persons&gt;` is now sorted by name, then by age.\r\n    \r\n`String.compareTo` &quot;Compares two strings lexicographically&quot; - from the [docs][1].\r\n\r\n`Collections.sort` is a static method in the native Collections library. It does the actual sorting, you just need to provide a Comparator which defines how two elements in your list should be compared: this is achieved by providing your own implementation of the `compare` method.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html","title":"How to sort by two fields in Java?","body":"<p>You can use <code>Collections.sort</code> as follows:</p>\n\n<pre><code>private static void order(List&lt;Person&gt; persons) {\n\n    Collections.sort(persons, new Comparator() {\n\n        public int compare(Object o1, Object o2) {\n\n            String x1 = ((Person) o1).getName();\n            String x2 = ((Person) o2).getName();\n            int sComp = x1.compareTo(x2);\n\n            if (sComp != 0) {\n               return sComp;\n            } \n\n            Integer x1 = ((Person) o1).getAge();\n            Integer x2 = ((Person) o2).getAge();\n            return x1.compareTo(x2);\n    }});\n}\n</code></pre>\n\n<p><code>List&lt;Persons&gt;</code> is now sorted by name, then by age.</p>\n\n<p><code>String.compareTo</code> \"Compares two strings lexicographically\" - from the <a href=\"http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html\" rel=\"noreferrer\">docs</a>.</p>\n\n<p><code>Collections.sort</code> is a static method in the native Collections library. It does the actual sorting, you just need to provide a Comparator which defines how two elements in your list should be compared: this is achieved by providing your own implementation of the <code>compare</code> method.</p>\n"},{"tags":[],"owner":{"account_id":264830,"reputation":70811,"user_id":551406,"accept_rate":95,"display_name":"Michael Berry"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1296052352,"creation_date":1296052352,"answer_id":4805688,"question_id":4805606,"body_markdown":"Have your person class implement `Comparable&lt;Person&gt;` and then implement the compareTo method, for instance:\r\n\r\n    public int compareTo(Person o) {\r\n        int result = name.compareToIgnoreCase(o.name);\r\n        if(result==0) {\r\n            return Integer.valueOf(age).compareTo(o.age);\r\n        }\r\n        else {\r\n            return result;\r\n        }\r\n    }\r\n\r\nThat will sort first by name (case insensitively) and then by age. You can then run `Arrays.sort()` or `Collections.sort()` on the collection or array of Person objects.\r\n\r\n","title":"How to sort by two fields in Java?","body":"<p>Have your person class implement <code>Comparable&lt;Person&gt;</code> and then implement the compareTo method, for instance:</p>\n\n<pre><code>public int compareTo(Person o) {\n    int result = name.compareToIgnoreCase(o.name);\n    if(result==0) {\n        return Integer.valueOf(age).compareTo(o.age);\n    }\n    else {\n        return result;\n    }\n}\n</code></pre>\n\n<p>That will sort first by name (case insensitively) and then by age. You can then run <code>Arrays.sort()</code> or <code>Collections.sort()</code> on the collection or array of Person objects.</p>\n"},{"tags":[],"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1296052352,"creation_date":1296052352,"answer_id":4805689,"question_id":4805606,"body_markdown":"Or you can exploit the fact that `Collections.sort()` (or `Arrays.sort()`) is stable (it doesn&#39;t reorder elements that are equal) and use a `Comparator` to sort by age first and then another one to sort by name.\r\n\r\nIn this specific case this isn&#39;t a very good idea but if you have to be able to change the sort order in runtime, it might be useful.","title":"How to sort by two fields in Java?","body":"<p>Or you can exploit the fact that <code>Collections.sort()</code> (or <code>Arrays.sort()</code>) is stable (it doesn't reorder elements that are equal) and use a <code>Comparator</code> to sort by age first and then another one to sort by name.</p>\n\n<p>In this specific case this isn't a very good idea but if you have to be able to change the sort order in runtime, it might be useful.</p>\n"},{"tags":[],"owner":{"account_id":230303,"reputation":14381,"user_id":493823,"display_name":"fmucar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1296057053,"creation_date":1296052673,"answer_id":4805748,"question_id":4805606,"body_markdown":"    Arrays.sort(persons, new PersonComparator());\r\n\r\n\r\n    \r\n    import java.util.Comparator;\r\n    \r\n    public class PersonComparator implements Comparator&lt;? extends Person&gt; {\r\n    \r\n    \t@Override\r\n    \tpublic int compare(Person o1, Person o2) {\r\n    \t\tif(null == o1 || null == o2  || null == o1.getName() || null== o2.getName() ){\r\n    \t\t\tthrow new NullPointerException();\r\n    \t\t}else{\r\n    \t\t\tint nameComparisonResult = o1.getName().compareTo(o2.getName());\r\n    \t\t\tif(0 == nameComparisonResult){\r\n    \t\t\t\treturn o1.getAge()-o2.getAge();\r\n    \t\t\t}else{\r\n    \t\t\t\treturn nameComparisonResult;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n    \r\n    \r\n    class Person{\r\n    \tint age; String name;\r\n    \r\n    \tpublic int getAge() {\r\n    \t\treturn age;\r\n    \t}\r\n    \r\n    \tpublic void setAge(int age) {\r\n    \t\tthis.age = age;\r\n    \t}\r\n    \r\n    \tpublic String getName() {\r\n    \t\treturn name;\r\n    \t}\r\n    \r\n    \tpublic void setName(String name) {\r\n    \t\tthis.name = name;\r\n    \t}\r\n    \t\r\n    }\r\n\r\n\r\n\r\nUpdated version:\r\n\r\n\r\n \r\n\r\n    public class PersonComparator implements Comparator&lt;? extends Person&gt; {\r\n        \r\n       @Override\r\n       public int compare(Person o1, Person o2) {\r\n       \t\r\n          int nameComparisonResult = o1.getName().compareToIgnoreCase(o2.getName());\r\n          return 0 == nameComparisonResult?o1.getAge()-o2.getAge():nameComparisonResult;\r\n        \t\t\r\n       }\r\n     }\r\n\r\n","title":"How to sort by two fields in Java?","body":"<pre><code>Arrays.sort(persons, new PersonComparator());\n\n\n\nimport java.util.Comparator;\n\npublic class PersonComparator implements Comparator&lt;? extends Person&gt; {\n\n    @Override\n    public int compare(Person o1, Person o2) {\n        if(null == o1 || null == o2  || null == o1.getName() || null== o2.getName() ){\n            throw new NullPointerException();\n        }else{\n            int nameComparisonResult = o1.getName().compareTo(o2.getName());\n            if(0 == nameComparisonResult){\n                return o1.getAge()-o2.getAge();\n            }else{\n                return nameComparisonResult;\n            }\n        }\n    }\n}\n\n\nclass Person{\n    int age; String name;\n\n    public int getAge() {\n        return age;\n    }\n\n    public void setAge(int age) {\n        this.age = age;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n}\n</code></pre>\n\n<p>Updated version:</p>\n\n<pre><code>public class PersonComparator implements Comparator&lt;? extends Person&gt; {\n\n   @Override\n   public int compare(Person o1, Person o2) {\n\n      int nameComparisonResult = o1.getName().compareToIgnoreCase(o2.getName());\n      return 0 == nameComparisonResult?o1.getAge()-o2.getAge():nameComparisonResult;\n\n   }\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":206081,"reputation":724,"user_id":455169,"accept_rate":50,"display_name":"Maheshkumar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1354073420,"creation_date":1354073420,"answer_id":13597316,"question_id":4805606,"body_markdown":"You can use generic serial Comparator to sort collections by multiple fields.\r\n\r\n    import org.apache.commons.lang3.reflect.FieldUtils;\r\n    import java.util.Arrays;\r\n    import java.util.Comparator;\r\n    import java.util.List;\r\n\r\n    /**\r\n    * @author MaheshRPM\r\n    */\r\n    public class SerialComparator&lt;T&gt; implements Comparator&lt;T&gt; {\r\n\tList&lt;String&gt; sortingFields;\r\n\r\n\tpublic SerialComparator(List&lt;String&gt; sortingFields) {\r\n\t\tthis.sortingFields = sortingFields;\r\n\t}\r\n\r\n\tpublic SerialComparator(String... sortingFields) {\r\n\t\tthis.sortingFields = Arrays.asList(sortingFields);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic int compare(T o1, T o2) {\r\n\t\tint result = 0;\r\n\t\ttry {\r\n\t\t\tfor (String sortingField : sortingFields) {\r\n\t\t\t\tif (result == 0) {\r\n\t\t\t\t\tObject value1 = FieldUtils.readField(o1, sortingField, true);\r\n\t\t\t\t\tObject value2 = FieldUtils.readField(o2, sortingField, true);\r\n\t\t\t\t\tif (value1 instanceof Comparable &amp;&amp; value2 instanceof Comparable) {\r\n\t\t\t\t\t\tComparable comparable1 = (Comparable) value1;\r\n\t\t\t\t\t\tComparable comparable2 = (Comparable) value2;\r\n\t\t\t\t\t\tresult = comparable1.compareTo(comparable2);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new RuntimeException(&quot;Cannot compare non Comparable fields. &quot; + value1.getClass()\r\n\t\t\t\t\t\t\t\t.getName() + &quot; must implement Comparable&lt;&quot; + value1.getClass().getName() + &quot;&gt;&quot;);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (IllegalAccessException e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n    }\r\n","title":"How to sort by two fields in Java?","body":"<p>You can use generic serial Comparator to sort collections by multiple fields.</p>\n\n<pre><code>import org.apache.commons.lang3.reflect.FieldUtils;\nimport java.util.Arrays;\nimport java.util.Comparator;\nimport java.util.List;\n\n/**\n* @author MaheshRPM\n*/\npublic class SerialComparator&lt;T&gt; implements Comparator&lt;T&gt; {\nList&lt;String&gt; sortingFields;\n\npublic SerialComparator(List&lt;String&gt; sortingFields) {\n    this.sortingFields = sortingFields;\n}\n\npublic SerialComparator(String... sortingFields) {\n    this.sortingFields = Arrays.asList(sortingFields);\n}\n\n@Override\npublic int compare(T o1, T o2) {\n    int result = 0;\n    try {\n        for (String sortingField : sortingFields) {\n            if (result == 0) {\n                Object value1 = FieldUtils.readField(o1, sortingField, true);\n                Object value2 = FieldUtils.readField(o2, sortingField, true);\n                if (value1 instanceof Comparable &amp;&amp; value2 instanceof Comparable) {\n                    Comparable comparable1 = (Comparable) value1;\n                    Comparable comparable2 = (Comparable) value2;\n                    result = comparable1.compareTo(comparable2);\n                } else {\n                    throw new RuntimeException(\"Cannot compare non Comparable fields. \" + value1.getClass()\n                            .getName() + \" must implement Comparable&lt;\" + value1.getClass().getName() + \"&gt;\");\n                }\n            } else {\n                break;\n            }\n        }\n    } catch (IllegalAccessException e) {\n        throw new RuntimeException(e);\n    }\n    return result;\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":82472,"reputation":4043,"user_id":231860,"accept_rate":40,"display_name":"Luke Machowski"},"down_vote_count":0,"up_vote_count":195,"is_accepted":false,"score":195,"last_activity_date":1415709485,"creation_date":1415709485,"answer_id":26865122,"question_id":4805606,"body_markdown":"For those able to use the Java 8 streaming API, there is a neater approach that is well documented here:\r\n[Lambdas and sorting][1]\r\n\r\nI was looking for the equivalent of the C# LINQ:\r\n\r\n    .ThenBy(...)\r\nI found the mechanism in Java 8 on the Comparator:\r\n\r\n    .thenComparing(...)\r\n\r\nSo here is the snippet that demonstrates the algorithm.\r\n\r\n        Comparator&lt;Person&gt; comparator = Comparator.comparing(person -&gt; person.name);\r\n        comparator = comparator.thenComparing(Comparator.comparing(person -&gt; person.age));\r\n\r\n\r\nCheck out the link above for a neater way and an explanation about how Java&#39;s type inference makes it a bit more clunky to define compared to LINQ.\r\n\r\nHere is the full unit test for reference:\r\n\r\n    @Test\r\n    public void testChainedSorting()\r\n    {\r\n        // Create the collection of people:\r\n        ArrayList&lt;Person&gt; people = new ArrayList&lt;&gt;();\r\n        people.add(new Person(&quot;Dan&quot;, 4));\r\n        people.add(new Person(&quot;Andi&quot;, 2));\r\n        people.add(new Person(&quot;Bob&quot;, 42));\r\n        people.add(new Person(&quot;Debby&quot;, 3));\r\n        people.add(new Person(&quot;Bob&quot;, 72));\r\n        people.add(new Person(&quot;Barry&quot;, 20));\r\n        people.add(new Person(&quot;Cathy&quot;, 40));\r\n        people.add(new Person(&quot;Bob&quot;, 40));\r\n        people.add(new Person(&quot;Barry&quot;, 50));\r\n\r\n        // Define chained comparators:\r\n        // Great article explaining this and how to make it even neater:\r\n        // http://blog.jooq.org/2014/01/31/java-8-friday-goodies-lambdas-and-sorting/\r\n        Comparator&lt;Person&gt; comparator = Comparator.comparing(person -&gt; person.name);\r\n        comparator = comparator.thenComparing(Comparator.comparing(person -&gt; person.age));\r\n\r\n        // Sort the stream:\r\n        Stream&lt;Person&gt; personStream = people.stream().sorted(comparator);\r\n\r\n        // Make sure that the output is as expected:\r\n        List&lt;Person&gt; sortedPeople = personStream.collect(Collectors.toList());\r\n        Assert.assertEquals(&quot;Andi&quot;,  sortedPeople.get(0).name); Assert.assertEquals(2,  sortedPeople.get(0).age);\r\n        Assert.assertEquals(&quot;Barry&quot;, sortedPeople.get(1).name); Assert.assertEquals(20, sortedPeople.get(1).age);\r\n        Assert.assertEquals(&quot;Barry&quot;, sortedPeople.get(2).name); Assert.assertEquals(50, sortedPeople.get(2).age);\r\n        Assert.assertEquals(&quot;Bob&quot;,   sortedPeople.get(3).name); Assert.assertEquals(40, sortedPeople.get(3).age);\r\n        Assert.assertEquals(&quot;Bob&quot;,   sortedPeople.get(4).name); Assert.assertEquals(42, sortedPeople.get(4).age);\r\n        Assert.assertEquals(&quot;Bob&quot;,   sortedPeople.get(5).name); Assert.assertEquals(72, sortedPeople.get(5).age);\r\n        Assert.assertEquals(&quot;Cathy&quot;, sortedPeople.get(6).name); Assert.assertEquals(40, sortedPeople.get(6).age);\r\n        Assert.assertEquals(&quot;Dan&quot;,   sortedPeople.get(7).name); Assert.assertEquals(4,  sortedPeople.get(7).age);\r\n        Assert.assertEquals(&quot;Debby&quot;, sortedPeople.get(8).name); Assert.assertEquals(3,  sortedPeople.get(8).age);\r\n        // Andi     : 2\r\n        // Barry    : 20\r\n        // Barry    : 50\r\n        // Bob      : 40\r\n        // Bob      : 42\r\n        // Bob      : 72\r\n        // Cathy    : 40\r\n        // Dan      : 4\r\n        // Debby    : 3\r\n    }\r\n\r\n    /**\r\n     * A person in our system.\r\n     */\r\n    public static class Person\r\n    {\r\n        /**\r\n         * Creates a new person.\r\n         * @param name The name of the person.\r\n         * @param age The age of the person.\r\n         */\r\n        public Person(String name, int age)\r\n        {\r\n            this.age = age;\r\n            this.name = name;\r\n        }\r\n\r\n        /**\r\n         * The name of the person.\r\n         */\r\n        public String name;\r\n\r\n        /**\r\n         * The age of the person.\r\n         */\r\n        public int age;\r\n\r\n        @Override\r\n        public String toString()\r\n        {\r\n            if (name == null) return super.toString();\r\n            else return String.format(&quot;%s : %d&quot;, this.name, this.age);\r\n        }\r\n    }\r\n\r\n  [1]: http://blog.jooq.org/2014/01/31/java-8-friday-goodies-lambdas-and-sorting/","title":"How to sort by two fields in Java?","body":"<p>For those able to use the Java 8 streaming API, there is a neater approach that is well documented here:\n<a href=\"http://blog.jooq.org/2014/01/31/java-8-friday-goodies-lambdas-and-sorting/\" rel=\"noreferrer\">Lambdas and sorting</a></p>\n\n<p>I was looking for the equivalent of the C# LINQ:</p>\n\n<pre><code>.ThenBy(...)\n</code></pre>\n\n<p>I found the mechanism in Java 8 on the Comparator:</p>\n\n<pre><code>.thenComparing(...)\n</code></pre>\n\n<p>So here is the snippet that demonstrates the algorithm.</p>\n\n<pre><code>    Comparator&lt;Person&gt; comparator = Comparator.comparing(person -&gt; person.name);\n    comparator = comparator.thenComparing(Comparator.comparing(person -&gt; person.age));\n</code></pre>\n\n<p>Check out the link above for a neater way and an explanation about how Java's type inference makes it a bit more clunky to define compared to LINQ.</p>\n\n<p>Here is the full unit test for reference:</p>\n\n<pre><code>@Test\npublic void testChainedSorting()\n{\n    // Create the collection of people:\n    ArrayList&lt;Person&gt; people = new ArrayList&lt;&gt;();\n    people.add(new Person(\"Dan\", 4));\n    people.add(new Person(\"Andi\", 2));\n    people.add(new Person(\"Bob\", 42));\n    people.add(new Person(\"Debby\", 3));\n    people.add(new Person(\"Bob\", 72));\n    people.add(new Person(\"Barry\", 20));\n    people.add(new Person(\"Cathy\", 40));\n    people.add(new Person(\"Bob\", 40));\n    people.add(new Person(\"Barry\", 50));\n\n    // Define chained comparators:\n    // Great article explaining this and how to make it even neater:\n    // http://blog.jooq.org/2014/01/31/java-8-friday-goodies-lambdas-and-sorting/\n    Comparator&lt;Person&gt; comparator = Comparator.comparing(person -&gt; person.name);\n    comparator = comparator.thenComparing(Comparator.comparing(person -&gt; person.age));\n\n    // Sort the stream:\n    Stream&lt;Person&gt; personStream = people.stream().sorted(comparator);\n\n    // Make sure that the output is as expected:\n    List&lt;Person&gt; sortedPeople = personStream.collect(Collectors.toList());\n    Assert.assertEquals(\"Andi\",  sortedPeople.get(0).name); Assert.assertEquals(2,  sortedPeople.get(0).age);\n    Assert.assertEquals(\"Barry\", sortedPeople.get(1).name); Assert.assertEquals(20, sortedPeople.get(1).age);\n    Assert.assertEquals(\"Barry\", sortedPeople.get(2).name); Assert.assertEquals(50, sortedPeople.get(2).age);\n    Assert.assertEquals(\"Bob\",   sortedPeople.get(3).name); Assert.assertEquals(40, sortedPeople.get(3).age);\n    Assert.assertEquals(\"Bob\",   sortedPeople.get(4).name); Assert.assertEquals(42, sortedPeople.get(4).age);\n    Assert.assertEquals(\"Bob\",   sortedPeople.get(5).name); Assert.assertEquals(72, sortedPeople.get(5).age);\n    Assert.assertEquals(\"Cathy\", sortedPeople.get(6).name); Assert.assertEquals(40, sortedPeople.get(6).age);\n    Assert.assertEquals(\"Dan\",   sortedPeople.get(7).name); Assert.assertEquals(4,  sortedPeople.get(7).age);\n    Assert.assertEquals(\"Debby\", sortedPeople.get(8).name); Assert.assertEquals(3,  sortedPeople.get(8).age);\n    // Andi     : 2\n    // Barry    : 20\n    // Barry    : 50\n    // Bob      : 40\n    // Bob      : 42\n    // Bob      : 72\n    // Cathy    : 40\n    // Dan      : 4\n    // Debby    : 3\n}\n\n/**\n * A person in our system.\n */\npublic static class Person\n{\n    /**\n     * Creates a new person.\n     * @param name The name of the person.\n     * @param age The age of the person.\n     */\n    public Person(String name, int age)\n    {\n        this.age = age;\n        this.name = name;\n    }\n\n    /**\n     * The name of the person.\n     */\n    public String name;\n\n    /**\n     * The age of the person.\n     */\n    public int age;\n\n    @Override\n    public String toString()\n    {\n        if (name == null) return super.toString();\n        else return String.format(\"%s : %d\", this.name, this.age);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6006179,"reputation":2415,"user_id":4718042,"display_name":"Bradley D"},"down_vote_count":0,"up_vote_count":156,"is_accepted":false,"score":156,"last_activity_date":1660127365,"creation_date":1463962425,"answer_id":37380950,"question_id":4805606,"body_markdown":"Using the Java 8 Streams approach, with method references on the getters...\r\n\r\n    // Create a stream...\r\n    var sortedList = persons.stream()\r\n        // sort it (does not sort the original list)...\r\n        .sorted(Comparator.comparing(Person::getName)\r\n                          .thenComparing(Person::getAge));\r\n        // and collect to a new list\r\n        .collect(Collectors.toList());\r\n\r\nCollection to an array ist also possible:\r\n\r\n    persons.stream()\r\n        .sorted(Comparator.comparing(Person::getName)\r\n                          .thenComparing(Person::getAge));\r\n        .toArray(String[]::new);\r\n\r\nAnd the Java 8 Lambda approach...\r\n\r\n    //Sorts the original list Lambda style\r\n    persons.sort((p1, p2) -&gt; {\r\n\t        if (p1.getName().compareTo(p2.getName()) == 0) {\r\n\t            return p1.getAge().compareTo(p2.getAge());\r\n\t        } else {\r\n                return p1.getName().compareTo(p2.getName());\r\n\t        } \r\n\t    });\r\n\r\nLastly...\r\n\r\n    // This syntax is similar to the Streams example above, but sorts the original list!!!\r\n    persons.sort(Comparator.comparing(Person::getName).thenComparing(Person::getAge));","title":"How to sort by two fields in Java?","body":"<p>Using the Java 8 Streams approach, with method references on the getters...</p>\n<pre><code>// Create a stream...\nvar sortedList = persons.stream()\n    // sort it (does not sort the original list)...\n    .sorted(Comparator.comparing(Person::getName)\n                      .thenComparing(Person::getAge));\n    // and collect to a new list\n    .collect(Collectors.toList());\n</code></pre>\n<p>Collection to an array ist also possible:</p>\n<pre><code>persons.stream()\n    .sorted(Comparator.comparing(Person::getName)\n                      .thenComparing(Person::getAge));\n    .toArray(String[]::new);\n</code></pre>\n<p>And the Java 8 Lambda approach...</p>\n<pre><code>//Sorts the original list Lambda style\npersons.sort((p1, p2) -&gt; {\n        if (p1.getName().compareTo(p2.getName()) == 0) {\n            return p1.getAge().compareTo(p2.getAge());\n        } else {\n            return p1.getName().compareTo(p2.getName());\n        } \n    });\n</code></pre>\n<p>Lastly...</p>\n<pre><code>// This syntax is similar to the Streams example above, but sorts the original list!!!\npersons.sort(Comparator.comparing(Person::getName).thenComparing(Person::getAge));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9508571,"reputation":1,"user_id":7067192,"display_name":"Jackey Dada Bob"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1477373273,"creation_date":1477361195,"answer_id":40230257,"question_id":4805606,"body_markdown":"For a class `Book` like this: \r\n    \r\n    package books;\r\n    \r\n    public class Book {\r\n    \r\n        private Integer id;\r\n        private Integer number;\r\n        private String name;\r\n    \r\n        public Integer getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(Integer id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        public Integer getNumber() {\r\n            return number;\r\n        }\r\n    \r\n        public void setNumber(Integer number) {\r\n            this.number = number;\r\n        }\r\n    \r\n        public String getName() {\r\n            return name;\r\n        }\r\n    \r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return &quot;book{&quot; +\r\n                    &quot;id=&quot; + id +\r\n                    &quot;, number=&quot; + number +\r\n                    &quot;, name=&#39;&quot; + name + &#39;\\&#39;&#39; + &#39;\\n&#39; +\r\n                    &#39;}&#39;;\r\n        }\r\n    }\r\n    \r\nsorting main class with mock objects \r\n    \r\n    package books;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.Collections;\r\n    import java.util.Comparator;\r\n    import java.util.List;\r\n    \r\n    \r\n    public class Main {\r\n    \r\n        public static void main(String[] args) {\r\n            System.out.println(&quot;Hello World!&quot;);\r\n    \r\n            Book b = new Book();\r\n    \r\n            Book c = new Book();\r\n    \r\n            Book d = new Book();\r\n    \r\n            Book e = new Book();\r\n    \r\n            Book f = new Book();\r\n    \r\n            Book g = new Book();\r\n            Book g1 = new Book();\r\n            Book g2 = new Book();\r\n            Book g3 = new Book();\r\n            Book g4 = new Book();\r\n            \r\n            \r\n    \r\n    \r\n            b.setId(1);\r\n            b.setNumber(12);\r\n            b.setName(&quot;gk&quot;);\r\n    \r\n            c.setId(2);\r\n            c.setNumber(12);\r\n            c.setName(&quot;gk&quot;);\r\n    \r\n            d.setId(2);\r\n            d.setNumber(13);\r\n            d.setName(&quot;maths&quot;);\r\n    \r\n            e.setId(3);\r\n            e.setNumber(3);\r\n            e.setName(&quot;geometry&quot;);\r\n    \r\n            f.setId(3);\r\n            f.setNumber(34);\r\n            b.setName(&quot;gk&quot;);\r\n    \r\n            g.setId(3);\r\n            g.setNumber(11);\r\n            g.setName(&quot;gk&quot;);\r\n            \r\n            g1.setId(3);\r\n            g1.setNumber(88);\r\n            g1.setName(&quot;gk&quot;);\r\n            g2.setId(3);\r\n            g2.setNumber(91);\r\n            g2.setName(&quot;gk&quot;);\r\n            g3.setId(3);\r\n            g3.setNumber(101);\r\n            g3.setName(&quot;gk&quot;);\r\n            g4.setId(3);\r\n            g4.setNumber(4);\r\n            g4.setName(&quot;gk&quot;);\r\n    \r\n    \r\n    \r\n    \r\n    \r\n            List&lt;Book&gt; allBooks = new ArrayList&lt;Book&gt;();\r\n    \r\n            allBooks.add(b);\r\n            allBooks.add(c);\r\n            allBooks.add(d);\r\n            allBooks.add(e);\r\n            allBooks.add(f);\r\n            allBooks.add(g);\r\n            allBooks.add(g1);\r\n            allBooks.add(g2);\r\n            allBooks.add(g3);\r\n            allBooks.add(g4);\r\n    \r\n    \r\n    \r\n            System.out.println(allBooks.size());\r\n            \r\n            \r\n            Collections.sort(allBooks, new Comparator&lt;Book&gt;() {\r\n    \r\n                @Override\r\n                public int compare(Book t, Book t1) {\r\n                    int a =  t.getId()- t1.getId();\r\n                    \r\n                    if(a == 0){\r\n                    \tint a1 = t.getNumber() - t1.getNumber();\r\n                    \treturn a1;\r\n                    }\r\n                    else\r\n                    \treturn a;\r\n                }\r\n            });\r\n            System.out.println(allBooks);\r\n    \r\n        }\r\n        \r\n    \r\n       }","title":"How to sort by two fields in Java?","body":"<p>For a class <code>Book</code> like this: </p>\n\n<pre><code>package books;\n\npublic class Book {\n\n    private Integer id;\n    private Integer number;\n    private String name;\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public Integer getNumber() {\n        return number;\n    }\n\n    public void setNumber(Integer number) {\n        this.number = number;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    @Override\n    public String toString() {\n        return \"book{\" +\n                \"id=\" + id +\n                \", number=\" + number +\n                \", name='\" + name + '\\'' + '\\n' +\n                '}';\n    }\n}\n</code></pre>\n\n<p>sorting main class with mock objects </p>\n\n<pre><code>package books;\n\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.Comparator;\nimport java.util.List;\n\n\npublic class Main {\n\n    public static void main(String[] args) {\n        System.out.println(\"Hello World!\");\n\n        Book b = new Book();\n\n        Book c = new Book();\n\n        Book d = new Book();\n\n        Book e = new Book();\n\n        Book f = new Book();\n\n        Book g = new Book();\n        Book g1 = new Book();\n        Book g2 = new Book();\n        Book g3 = new Book();\n        Book g4 = new Book();\n\n\n\n\n        b.setId(1);\n        b.setNumber(12);\n        b.setName(\"gk\");\n\n        c.setId(2);\n        c.setNumber(12);\n        c.setName(\"gk\");\n\n        d.setId(2);\n        d.setNumber(13);\n        d.setName(\"maths\");\n\n        e.setId(3);\n        e.setNumber(3);\n        e.setName(\"geometry\");\n\n        f.setId(3);\n        f.setNumber(34);\n        b.setName(\"gk\");\n\n        g.setId(3);\n        g.setNumber(11);\n        g.setName(\"gk\");\n\n        g1.setId(3);\n        g1.setNumber(88);\n        g1.setName(\"gk\");\n        g2.setId(3);\n        g2.setNumber(91);\n        g2.setName(\"gk\");\n        g3.setId(3);\n        g3.setNumber(101);\n        g3.setName(\"gk\");\n        g4.setId(3);\n        g4.setNumber(4);\n        g4.setName(\"gk\");\n\n\n\n\n\n        List&lt;Book&gt; allBooks = new ArrayList&lt;Book&gt;();\n\n        allBooks.add(b);\n        allBooks.add(c);\n        allBooks.add(d);\n        allBooks.add(e);\n        allBooks.add(f);\n        allBooks.add(g);\n        allBooks.add(g1);\n        allBooks.add(g2);\n        allBooks.add(g3);\n        allBooks.add(g4);\n\n\n\n        System.out.println(allBooks.size());\n\n\n        Collections.sort(allBooks, new Comparator&lt;Book&gt;() {\n\n            @Override\n            public int compare(Book t, Book t1) {\n                int a =  t.getId()- t1.getId();\n\n                if(a == 0){\n                    int a1 = t.getNumber() - t1.getNumber();\n                    return a1;\n                }\n                else\n                    return a;\n            }\n        });\n        System.out.println(allBooks);\n\n    }\n\n\n   }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5001640,"reputation":590,"user_id":4020474,"display_name":"Tiago Redaelli"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1496215190,"creation_date":1496214582,"answer_id":44277989,"question_id":4805606,"body_markdown":"I&#39;m not sure if it&#39;s ugly to write the compartor inside the Person class in this case. Did it like this:\r\n\r\n    public class Person implements Comparable &lt;Person&gt; {\r\n    \r\n        private String lastName;\r\n        private String firstName;\r\n        private int age;\r\n        \r\n        public Person(String firstName, String lastName, int BirthDay) {\r\n            this.firstName = firstName;\r\n            this.lastName = lastName;\r\n            this.age = BirthDay;\r\n        }\r\n        \r\n        public int getAge() {\r\n            return age;\r\n        }\r\n        \r\n        public String getFirstName() {\r\n            return firstName;\r\n        }\r\n        \r\n        public String getLastName() {\r\n            return lastName;\r\n        }\r\n       \r\n        @Override\r\n        public int compareTo(Person o) {\r\n            // default compareTo\r\n        }\r\n        \r\n        @Override\r\n        public String toString() {\r\n            return firstName + &quot; &quot; + lastName + &quot; &quot; + age + &quot;&quot;;\r\n        }\r\n        \r\n        public static class firstNameComperator implements Comparator&lt;Person&gt; {\r\n            @Override\r\n            public int compare(Person o1, Person o2) {\r\n                return o1.firstName.compareTo(o2.firstName);\r\n            }\r\n        }\r\n        \r\n        public static class lastNameComperator implements Comparator&lt;Person&gt; {\r\n            @Override\r\n            public int compare(Person o1, Person o2) {\r\n                return o1.lastName.compareTo(o2.lastName);\r\n            }\r\n        }\r\n        \r\n        public static class ageComperator implements Comparator&lt;Person&gt; {\r\n            @Override\r\n            public int compare(Person o1, Person o2) {\r\n                return o1.age - o2.age;\r\n            }\r\n        }\r\n    }\r\n    public class Test {\r\n        private static void print() {\r\n           ArrayList&lt;Person&gt; list = new ArrayList();\r\n            list.add(new Person(&quot;Diana&quot;, &quot;Agron&quot;, 31));\r\n            list.add(new Person(&quot;Kay&quot;, &quot;Panabaker&quot;, 27));\r\n            list.add(new Person(&quot;Lucy&quot;, &quot;Hale&quot;, 28));\r\n            list.add(new Person(&quot;Ashley&quot;, &quot;Benson&quot;, 28));\r\n            list.add(new Person(&quot;Megan&quot;, &quot;Park&quot;, 31));\r\n            list.add(new Person(&quot;Lucas&quot;, &quot;Till&quot;, 27));\r\n            list.add(new Person(&quot;Nicholas&quot;, &quot;Hoult&quot;, 28));\r\n            list.add(new Person(&quot;Aly&quot;, &quot;Michalka&quot;, 28));\r\n            list.add(new Person(&quot;Adam&quot;, &quot;Brody&quot;, 38));\r\n            list.add(new Person(&quot;Chris&quot;, &quot;Pine&quot;, 37));\r\n            Collections.sort(list, new Person.lastNameComperator());\r\n            Iterator&lt;Person&gt; it = list.iterator();\r\n            while(it.hasNext()) \r\n                System.out.println(it.next().toString()); \r\n         }  \r\n    }    \r\n","title":"How to sort by two fields in Java?","body":"<p>I'm not sure if it's ugly to write the compartor inside the Person class in this case. Did it like this:</p>\n\n<pre><code>public class Person implements Comparable &lt;Person&gt; {\n\n    private String lastName;\n    private String firstName;\n    private int age;\n\n    public Person(String firstName, String lastName, int BirthDay) {\n        this.firstName = firstName;\n        this.lastName = lastName;\n        this.age = BirthDay;\n    }\n\n    public int getAge() {\n        return age;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    @Override\n    public int compareTo(Person o) {\n        // default compareTo\n    }\n\n    @Override\n    public String toString() {\n        return firstName + \" \" + lastName + \" \" + age + \"\";\n    }\n\n    public static class firstNameComperator implements Comparator&lt;Person&gt; {\n        @Override\n        public int compare(Person o1, Person o2) {\n            return o1.firstName.compareTo(o2.firstName);\n        }\n    }\n\n    public static class lastNameComperator implements Comparator&lt;Person&gt; {\n        @Override\n        public int compare(Person o1, Person o2) {\n            return o1.lastName.compareTo(o2.lastName);\n        }\n    }\n\n    public static class ageComperator implements Comparator&lt;Person&gt; {\n        @Override\n        public int compare(Person o1, Person o2) {\n            return o1.age - o2.age;\n        }\n    }\n}\npublic class Test {\n    private static void print() {\n       ArrayList&lt;Person&gt; list = new ArrayList();\n        list.add(new Person(\"Diana\", \"Agron\", 31));\n        list.add(new Person(\"Kay\", \"Panabaker\", 27));\n        list.add(new Person(\"Lucy\", \"Hale\", 28));\n        list.add(new Person(\"Ashley\", \"Benson\", 28));\n        list.add(new Person(\"Megan\", \"Park\", 31));\n        list.add(new Person(\"Lucas\", \"Till\", 27));\n        list.add(new Person(\"Nicholas\", \"Hoult\", 28));\n        list.add(new Person(\"Aly\", \"Michalka\", 28));\n        list.add(new Person(\"Adam\", \"Brody\", 38));\n        list.add(new Person(\"Chris\", \"Pine\", 37));\n        Collections.sort(list, new Person.lastNameComperator());\n        Iterator&lt;Person&gt; it = list.iterator();\n        while(it.hasNext()) \n            System.out.println(it.next().toString()); \n     }  \n}    \n</code></pre>\n"},{"tags":[],"owner":{"account_id":9938803,"reputation":128,"user_id":7466089,"display_name":"Fabian Brand&#227;o"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1498566295,"creation_date":1498566295,"answer_id":44780258,"question_id":4805606,"body_markdown":"Create as many comparators as necessary. After, call the method &quot;thenComparing&quot; for each order category. It&#39;s a way of doing by Streams. See:\r\n\r\n    //Sort by first and last name\r\n\tSystem.out.println(&quot;\\n2.Sort list of person objects by firstName then &quot;\r\n\t\t\t\t\t\t\t\t\t\t\t+ &quot;by lastName then by age&quot;);\r\n\tComparator&lt;Person&gt; sortByFirstName \r\n\t\t\t\t\t\t\t\t= (p, o) -&gt; p.firstName.compareToIgnoreCase(o.firstName);\r\n\tComparator&lt;Person&gt; sortByLastName \r\n\t\t\t\t\t\t\t\t= (p, o) -&gt; p.lastName.compareToIgnoreCase(o.lastName);\r\n\tComparator&lt;Person&gt; sortByAge \r\n\t\t\t\t\t\t\t\t= (p, o) -&gt; Integer.compare(p.age,o.age);\r\n\t\t\r\n\t//Sort by first Name then Sort by last name then sort by age\r\n\tpersonList.stream().sorted(\r\n\t\tsortByFirstName\r\n\t\t\t.thenComparing(sortByLastName)\r\n\t\t\t.thenComparing(sortByAge)\r\n\t     ).forEach(person-&gt;\r\n\t\t\tSystem.out.println(person));\t\t\r\n\r\nLook: [Sort user defined object on multiple fields – Comparator (lambda stream)][1]\r\n\r\n\r\n  [1]: http://www.makeinjava.com/sort-object-multiple-fields-properties-comparator-interface-lambda-stream-java-8/","title":"How to sort by two fields in Java?","body":"<p>Create as many comparators as necessary. After, call the method \"thenComparing\" for each order category. It's a way of doing by Streams. See:</p>\n\n<pre><code>//Sort by first and last name\nSystem.out.println(\"\\n2.Sort list of person objects by firstName then \"\n                                        + \"by lastName then by age\");\nComparator&lt;Person&gt; sortByFirstName \n                            = (p, o) -&gt; p.firstName.compareToIgnoreCase(o.firstName);\nComparator&lt;Person&gt; sortByLastName \n                            = (p, o) -&gt; p.lastName.compareToIgnoreCase(o.lastName);\nComparator&lt;Person&gt; sortByAge \n                            = (p, o) -&gt; Integer.compare(p.age,o.age);\n\n//Sort by first Name then Sort by last name then sort by age\npersonList.stream().sorted(\n    sortByFirstName\n        .thenComparing(sortByLastName)\n        .thenComparing(sortByAge)\n     ).forEach(person-&gt;\n        System.out.println(person));        \n</code></pre>\n\n<p>Look: <a href=\"http://www.makeinjava.com/sort-object-multiple-fields-properties-comparator-interface-lambda-stream-java-8/\" rel=\"nofollow noreferrer\">Sort user defined object on multiple fields – Comparator (lambda stream)</a></p>\n"},{"tags":[],"owner":{"account_id":4742105,"reputation":3877,"user_id":3834496,"accept_rate":29,"display_name":"Pritesh Mhatre"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1498635779,"creation_date":1498635779,"answer_id":44796436,"question_id":4805606,"body_markdown":"Guava&#39;s `ComparisonChain` provides a clean way of doing it. Refer to this [link][1].\r\n\r\nA utility for performing a chained comparison statement. For example:\r\n\r\n       public int compareTo(Foo that) {\r\n         return ComparisonChain.start()\r\n             .compare(this.aString, that.aString)\r\n             .compare(this.anInt, that.anInt)\r\n             .compare(this.anEnum, that.anEnum, Ordering.natural().nullsLast())\r\n             .result();\r\n       }\r\n\r\n  [1]: https://google.github.io/guava/releases/19.0/api/docs/com/google/common/collect/ComparisonChain.html\r\n","title":"How to sort by two fields in Java?","body":"<p>Guava's <code>ComparisonChain</code> provides a clean way of doing it. Refer to this <a href=\"https://google.github.io/guava/releases/19.0/api/docs/com/google/common/collect/ComparisonChain.html\" rel=\"noreferrer\">link</a>.</p>\n\n<p>A utility for performing a chained comparison statement. For example:</p>\n\n<pre><code>   public int compareTo(Foo that) {\n     return ComparisonChain.start()\n         .compare(this.aString, that.aString)\n         .compare(this.anInt, that.anInt)\n         .compare(this.anEnum, that.anEnum, Ordering.natural().nullsLast())\n         .result();\n   }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4162753,"reputation":608,"user_id":3490098,"display_name":"rafambbr"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1500046073,"creation_date":1500046073,"answer_id":45106675,"question_id":4805606,"body_markdown":"You can do like this:\r\n\r\n    List&lt;User&gt; users = Lists.newArrayList(\r\n      new User(&quot;Pedro&quot;, 12), \r\n      new User(&quot;Maria&quot;, 10), \r\n      new User(&quot;Rafael&quot;,12)\r\n    );\r\n    \r\n    users.sort(\r\n      Comparator.comparing(User::getName).thenComparing(User::getAge)\r\n    );","title":"How to sort by two fields in Java?","body":"<p>You can do like this:</p>\n\n<pre><code>List&lt;User&gt; users = Lists.newArrayList(\n  new User(\"Pedro\", 12), \n  new User(\"Maria\", 10), \n  new User(\"Rafael\",12)\n);\n\nusers.sort(\n  Comparator.comparing(User::getName).thenComparing(User::getAge)\n);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1836471,"reputation":416,"user_id":1666753,"display_name":"Guido Medina"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1542284606,"creation_date":1542284606,"answer_id":53319449,"question_id":4805606,"body_markdown":"I would be careful when using Guava&#39;s `ComparisonChain` because it creates an instance of it per element been compared so you would be looking at a creation of `N x Log N` comparison chains just to compare if you are sorting, or `N` instances if you are iterating and checking for equality.\r\n\r\nI would instead create a static `Comparator` using the newest Java 8 API if possible or Guava&#39;s `Ordering` API which allows you to do that, here is an example with Java 8:\r\n\r\n    import java.util.Comparator;\r\n    import static java.util.Comparator.naturalOrder;\r\n    import static java.util.Comparator.nullsLast;\r\n    \r\n    private static final Comparator&lt;Person&gt; COMPARATOR = Comparator\r\n      .comparing(Person::getName, nullsLast(naturalOrder()))\r\n      .thenComparingInt(Person::getAge);\r\n\r\n    @Override\r\n    public int compareTo(@NotNull Person other) {\r\n      return COMPARATOR.compare(this, other);\r\n    }\r\n\r\nHere is how to use the Guava&#39;s `Ordering` API: https://github.com/google/guava/wiki/OrderingExplained","title":"How to sort by two fields in Java?","body":"<p>I would be careful when using Guava's <code>ComparisonChain</code> because it creates an instance of it per element been compared so you would be looking at a creation of <code>N x Log N</code> comparison chains just to compare if you are sorting, or <code>N</code> instances if you are iterating and checking for equality.</p>\n\n<p>I would instead create a static <code>Comparator</code> using the newest Java 8 API if possible or Guava's <code>Ordering</code> API which allows you to do that, here is an example with Java 8:</p>\n\n<pre><code>import java.util.Comparator;\nimport static java.util.Comparator.naturalOrder;\nimport static java.util.Comparator.nullsLast;\n\nprivate static final Comparator&lt;Person&gt; COMPARATOR = Comparator\n  .comparing(Person::getName, nullsLast(naturalOrder()))\n  .thenComparingInt(Person::getAge);\n\n@Override\npublic int compareTo(@NotNull Person other) {\n  return COMPARATOR.compare(this, other);\n}\n</code></pre>\n\n<p>Here is how to use the Guava's <code>Ordering</code> API: <a href=\"https://github.com/google/guava/wiki/OrderingExplained\" rel=\"noreferrer\">https://github.com/google/guava/wiki/OrderingExplained</a></p>\n"}],"owner":{"account_id":225869,"reputation":54669,"user_id":486578,"accept_rate":58,"display_name":"Damir"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":283931,"favorite_count":0,"down_vote_count":0,"up_vote_count":229,"accepted_answer_id":4805676,"answer_count":15,"score":229,"last_activity_date":1660127365,"creation_date":1296051900,"question_id":4805606,"body_markdown":"I have array of objects `person (int age; String name;)`.\r\n\r\nHow can I sort this array alphabetically by name and then by age?\r\n\r\nWhich algorithm would you use for this ?","title":"How to sort by two fields in Java?","body":"<p>I have array of objects <code>person (int age; String name;)</code>.</p>\n\n<p>How can I sort this array alphabetically by name and then by age?</p>\n\n<p>Which algorithm would you use for this ?</p>\n"},{"tags":["java","selenium","serenity-bdd"],"answers":[{"tags":[],"owner":{"account_id":23946271,"reputation":69,"user_id":17938577,"display_name":"DAHUANGGO"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660127304,"creation_date":1660127304,"answer_id":73304644,"question_id":73303548,"body_markdown":"If you want to change some non-configuration file settings, I may only provide configuration related to the springboot project, you can set your vm option:\r\n\r\n    --serenity.timeout=1000\r\n    --secretVariable=24C20-00034D2\r\n    --serenity.verbose.steps=FALSE\r\n\r\nOr you can modify the args parameter of your launch:\r\n\r\n     String[] arg=new String[3];\r\n     arg[0]=&quot;--serenity.timeout=1000&quot;;\r\n     arg[1]=&quot;--secretVariable=24C20-00034D2&quot;;\r\n     arg[2]=&quot;--serenity.verbose.steps=FALSE&quot;;\r\n\r\nThis is the method I can think of. I have not tried to use maven to manage these parameter configurations, but I have used maven to manage parameter modules. You can use this method to manage, and it supports .yml and .proerties, I will give you an example, but for the specific usage method, you need to go to the official springboot documentation to find the detailed usage method:\r\n\r\n**maven:**\r\n\r\n    &lt;!--Configure maven multi-environment development--&gt;\r\n    &lt;profiles&gt;\r\n        &lt;profile&gt;\r\n            &lt;id&gt;enc_dev&lt;/id&gt;\r\n            &lt;properties&gt;\r\n                &lt;profile.active&gt;dev&lt;/profile.active&gt;\r\n            &lt;/properties&gt;\r\n            &lt;activation&gt;\r\n                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\r\n            &lt;/activation&gt;\r\n        &lt;/profile&gt;\r\n        &lt;profile&gt;\r\n            &lt;id&gt;enc_dev&lt;/id&gt;\r\n            &lt;properties&gt;\r\n                &lt;profile.active&gt;dev&lt;/profile.active&gt;\r\n            &lt;/properties&gt;\r\n        &lt;/profile&gt;\r\n    &lt;/profiles&gt;\r\n\r\n**application.proerties:**\r\n\r\n    spring.profiles.active=@profile.active@\r\n    spring.profiles.group.dev=devMVC,devDB\r\n    spring.profiles.group.pro=proMVC\r\n\r\nThis way you can easily manage the modules you want and do targeted configuration, hope this helps you.\r\n","title":"how to preload a Serenity properties file configuration executing some java code before","body":"<p>If you want to change some non-configuration file settings, I may only provide configuration related to the springboot project, you can set your vm option:</p>\n<pre><code>--serenity.timeout=1000\n--secretVariable=24C20-00034D2\n--serenity.verbose.steps=FALSE\n</code></pre>\n<p>Or you can modify the args parameter of your launch:</p>\n<pre><code> String[] arg=new String[3];\n arg[0]=&quot;--serenity.timeout=1000&quot;;\n arg[1]=&quot;--secretVariable=24C20-00034D2&quot;;\n arg[2]=&quot;--serenity.verbose.steps=FALSE&quot;;\n</code></pre>\n<p>This is the method I can think of. I have not tried to use maven to manage these parameter configurations, but I have used maven to manage parameter modules. You can use this method to manage, and it supports .yml and .proerties, I will give you an example, but for the specific usage method, you need to go to the official springboot documentation to find the detailed usage method:</p>\n<p><strong>maven:</strong></p>\n<pre><code>&lt;!--Configure maven multi-environment development--&gt;\n&lt;profiles&gt;\n    &lt;profile&gt;\n        &lt;id&gt;enc_dev&lt;/id&gt;\n        &lt;properties&gt;\n            &lt;profile.active&gt;dev&lt;/profile.active&gt;\n        &lt;/properties&gt;\n        &lt;activation&gt;\n            &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\n        &lt;/activation&gt;\n    &lt;/profile&gt;\n    &lt;profile&gt;\n        &lt;id&gt;enc_dev&lt;/id&gt;\n        &lt;properties&gt;\n            &lt;profile.active&gt;dev&lt;/profile.active&gt;\n        &lt;/properties&gt;\n    &lt;/profile&gt;\n&lt;/profiles&gt;\n</code></pre>\n<p><strong>application.proerties:</strong></p>\n<pre><code>spring.profiles.active=@profile.active@\nspring.profiles.group.dev=devMVC,devDB\nspring.profiles.group.pro=proMVC\n</code></pre>\n<p>This way you can easily manage the modules you want and do targeted configuration, hope this helps you.</p>\n"}],"owner":{"account_id":6702525,"reputation":1,"user_id":5168566,"display_name":"solidusAndryi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":726,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660127304,"creation_date":1660122363,"question_id":73303548,"body_markdown":"I&#39;ve got a project with Serenity properties file configuration and I want to put a security code before to start the test, so at the beginning when I prepare the test, I clean the value like this:\r\n\r\n    ...\r\n    serenity.timeout=1000\r\n    secretVariable=\r\n    serenity.verbose.steps=FALSE\r\n    ...\r\n\r\nbut when I run the test, I want to change the serenity.properties like this:\r\n\r\n    ...\r\n    serenity.timeout=1000\r\n    secretVariable=24C20-00034D2\r\n    serenity.verbose.steps=FALSE\r\n    ...\r\n\r\nSo , my question is, is this possible using a java code and/or maven configuration?","title":"how to preload a Serenity properties file configuration executing some java code before","body":"<p>I've got a project with Serenity properties file configuration and I want to put a security code before to start the test, so at the beginning when I prepare the test, I clean the value like this:</p>\n<pre><code>...\nserenity.timeout=1000\nsecretVariable=\nserenity.verbose.steps=FALSE\n...\n</code></pre>\n<p>but when I run the test, I want to change the serenity.properties like this:</p>\n<pre><code>...\nserenity.timeout=1000\nsecretVariable=24C20-00034D2\nserenity.verbose.steps=FALSE\n...\n</code></pre>\n<p>So , my question is, is this possible using a java code and/or maven configuration?</p>\n"},{"tags":["java","mongodb","spring-data-mongodb"],"comments":[{"owner":{"account_id":10343230,"reputation":961,"user_id":7628937,"display_name":"1sina1"},"score":0,"creation_date":1660125919,"post_id":73304066,"comment_id":129457186,"body_markdown":"is this what you want? https://mongoplayground.net/p/X9qhCSvNpmZ","body":"is this what you want? <a href=\"https://mongoplayground.net/p/X9qhCSvNpmZ\" rel=\"nofollow noreferrer\">mongoplayground.net/p/X9qhCSvNpmZ</a>"}],"answers":[{"tags":[],"owner":{"account_id":17261940,"reputation":232,"user_id":12499617,"display_name":"Shuvro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660126986,"creation_date":1660126986,"answer_id":73304580,"question_id":73304066,"body_markdown":" \r\n**You can try this, I hope it work**\r\n   \r\n\r\n    let student = await this.students.findOne({&quot;StudentHobby&quot;:{&quot;$in&quot;:[&quot;Teaching&quot;]}})","title":"How to query MongoDB for a value in and array","body":"<p><strong>You can try this, I hope it work</strong></p>\n<pre><code>let student = await this.students.findOne({&quot;StudentHobby&quot;:{&quot;$in&quot;:[&quot;Teaching&quot;]}})\n</code></pre>\n"}],"owner":{"account_id":6166039,"reputation":469,"user_id":7210926,"display_name":"Vipul Kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660126986,"creation_date":1660124622,"question_id":73304066,"body_markdown":"Can anyone help me with a Mongodb query for following \r\n\r\n\r\n\r\n    {[\r\n       &quot;_id&quot; : ObjectId(&quot;5c92ba9d36de59bd9de063a4&quot;),\r\n       &quot;StudentName&quot; : &quot;Robert&quot;,\r\n       &quot;StudentAge&quot; : 21,\r\n       &quot;StudentCountryName&quot; : &quot;UK&quot;,\r\n       &quot;StudentHobby&quot; : [\r\n          &quot;Teaching&quot;,\r\n          &quot;Photography&quot;\r\n       ]\r\n    }\r\n\r\n\r\nWant to search students with hobby as *Teaching*.\r\n\r\nIf possible can come someone provide Spring Data MongoDB equivalent or native query is also fine which can be executed in mongodb compass ","title":"How to query MongoDB for a value in and array","body":"<p>Can anyone help me with a Mongodb query for following</p>\n<pre><code>{[\n   &quot;_id&quot; : ObjectId(&quot;5c92ba9d36de59bd9de063a4&quot;),\n   &quot;StudentName&quot; : &quot;Robert&quot;,\n   &quot;StudentAge&quot; : 21,\n   &quot;StudentCountryName&quot; : &quot;UK&quot;,\n   &quot;StudentHobby&quot; : [\n      &quot;Teaching&quot;,\n      &quot;Photography&quot;\n   ]\n}\n</code></pre>\n<p>Want to search students with hobby as <em>Teaching</em>.</p>\n<p>If possible can come someone provide Spring Data MongoDB equivalent or native query is also fine which can be executed in mongodb compass</p>\n"},{"tags":["java","session","cookies","weblogic","microservices"],"comments":[{"owner":{"account_id":3606204,"reputation":4664,"user_id":3008323,"accept_rate":100,"display_name":"jacks"},"score":1,"creation_date":1443018746,"post_id":32741333,"comment_id":53325580,"body_markdown":"Are you using a distributed cache? This is how I currently manage a similar scenario. Authentication tokens into cache - of course you need unique IDs for cache entries that any microservice that needs to go to cache knows about.","body":"Are you using a distributed cache? This is how I currently manage a similar scenario. Authentication tokens into cache - of course you need unique IDs for cache entries that any microservice that needs to go to cache knows about."},{"owner":{"account_id":3149924,"reputation":1492,"user_id":2663572,"accept_rate":58,"display_name":"Fahim Farook"},"score":0,"creation_date":1443120924,"post_id":32741333,"comment_id":53376803,"body_markdown":"Thanks @Nio. I&#39;m not using a distributed cache, but can consider. How do you generate auth tokens? Do you need an OAuth server in place? Also what is the distributed cache you are using? Please share links for my reference if you have any.","body":"Thanks @Nio. I&#39;m not using a distributed cache, but can consider. How do you generate auth tokens? Do you need an OAuth server in place? Also what is the distributed cache you are using? Please share links for my reference if you have any."},{"owner":{"account_id":3606204,"reputation":4664,"user_id":3008323,"accept_rate":100,"display_name":"jacks"},"score":1,"creation_date":1443168135,"post_id":32741333,"comment_id":53393456,"body_markdown":"Fahim, I use both memcached and Redis for caching. If you are not sure which, I would go with Redis. There are quite a few ways of managing Auth tokens. OAuth is one of the standardised ways and although it has a bit of a learning curve to get your head around Grant flows it is a worthwhile thing to have on your CV. There are loads of examples of implementing an OAuth server in Java https://www.google.co.uk/webhp?sourceid=chrome-instant&amp;ion=1&amp;espv=2&amp;ie=UTF-8#q=github+java+oauth+client+server","body":"Fahim, I use both memcached and Redis for caching. If you are not sure which, I would go with Redis. There are quite a few ways of managing Auth tokens. OAuth is one of the standardised ways and although it has a bit of a learning curve to get your head around Grant flows it is a worthwhile thing to have on your CV. There are loads of examples of implementing an OAuth server in Java <a href=\"https://www.google.co.uk/webhp?sourceid=chrome-instant&amp;ion=1&amp;espv=2&amp;ie=UTF-8#q=github+java+oauth+client+server\" rel=\"nofollow noreferrer\">google.co.uk/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"down_vote_count":0,"up_vote_count":35,"is_accepted":true,"score":35,"last_activity_date":1503303523,"creation_date":1443020559,"answer_id":32743085,"question_id":32741333,"body_markdown":"Let me share my opinion. \r\n\r\nFirst of all, if you can keep your application stateless, by all means do so :)\r\nIt will be the best solution in terms of both performance and scalability.\r\n \r\nNow, if its impossible, then you should maintain some distributed session management layer.\r\n\r\nThe gateway responsible for authentication could generate some unique session identifier which could later be used as a key. \r\nThis key could be propagated to all the microservices and be a part of the API or something.\r\n\r\nIn order to access the session, the microservice could &#39;get&#39; value by key and work with it.\r\n\r\nIn terms of implementation: I would take a look on NoSQL solutions. Some of them that can suit your need are:\r\n\r\n1. [Redis][1]. Take a look on &#39;&#39;hset&#39;&#39; there\r\n2. [Hazelcast][2]. Its more a in-memory grid but if the solution is java only, you can also implement the required functionality\r\n3. [Memcache.d][3]. It will give you an old good map, just distributed :)\r\n\r\nThere are also other solutions I believe.\r\n\r\nNow, the performance is crucial here, otherwise the whole solution will be just too slow. So In my understanding, using an RDBMS would be not be good here, moreover potentially it would be harder to scale it out.\r\n\r\nHope this helps\r\n\r\n\r\n  [1]: https://redislabs.com/\r\n  [2]: https://hazelcast.com/\r\n  [3]: http://memcached.org/","title":"Session Management in microservices","body":"<p>Let me share my opinion. </p>\n\n<p>First of all, if you can keep your application stateless, by all means do so :)\nIt will be the best solution in terms of both performance and scalability.</p>\n\n<p>Now, if its impossible, then you should maintain some distributed session management layer.</p>\n\n<p>The gateway responsible for authentication could generate some unique session identifier which could later be used as a key. \nThis key could be propagated to all the microservices and be a part of the API or something.</p>\n\n<p>In order to access the session, the microservice could 'get' value by key and work with it.</p>\n\n<p>In terms of implementation: I would take a look on NoSQL solutions. Some of them that can suit your need are:</p>\n\n<ol>\n<li><a href=\"https://redislabs.com/\" rel=\"noreferrer\">Redis</a>. Take a look on ''hset'' there</li>\n<li><a href=\"https://hazelcast.com/\" rel=\"noreferrer\">Hazelcast</a>. Its more a in-memory grid but if the solution is java only, you can also implement the required functionality</li>\n<li><a href=\"http://memcached.org/\" rel=\"noreferrer\">Memcache.d</a>. It will give you an old good map, just distributed :)</li>\n</ol>\n\n<p>There are also other solutions I believe.</p>\n\n<p>Now, the performance is crucial here, otherwise the whole solution will be just too slow. So In my understanding, using an RDBMS would be not be good here, moreover potentially it would be harder to scale it out.</p>\n\n<p>Hope this helps</p>\n"},{"tags":[],"owner":{"account_id":2005001,"reputation":821,"user_id":1795145,"display_name":"indika"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1573533723,"creation_date":1557728317,"answer_id":56106687,"question_id":32741333,"body_markdown":"**1)Should API Gateway be state-full while other microservices are stateless?**\r\n\r\nYes, As in [12 Factor App guide lines][1] all the services should be stateless.\r\n\r\n**2)If so, how should the user session data be shared between API Gateway and microservices?**\r\n\r\n   Your API should be stateless therefore do not share the session state to the microservices. The recommended approach is to set up a Redis cache to store session data. \r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://12factor.net\r\n  [2]: https://i.stack.imgur.com/8eazE.png","title":"Session Management in microservices","body":"<p><strong>1)Should API Gateway be state-full while other microservices are stateless?</strong></p>\n\n<p>Yes, As in <a href=\"https://12factor.net\" rel=\"noreferrer\">12 Factor App guide lines</a> all the services should be stateless.</p>\n\n<p><strong>2)If so, how should the user session data be shared between API Gateway and microservices?</strong></p>\n\n<p>Your API should be stateless therefore do not share the session state to the microservices. The recommended approach is to set up a Redis cache to store session data. </p>\n\n<p><a href=\"https://i.stack.imgur.com/8eazE.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/8eazE.png\" alt=\"enter image description here\"></a></p>\n"}],"owner":{"account_id":3149924,"reputation":1492,"user_id":2663572,"accept_rate":58,"display_name":"Fahim Farook"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40998,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"accepted_answer_id":32743085,"answer_count":2,"score":29,"last_activity_date":1660126916,"creation_date":1443015795,"question_id":32741333,"body_markdown":"We have the following setup.\r\n\r\n1. STM (Stingrey Traffic Manager) does load balancing + session stickiness\r\n2. Weblogic &#39;cluster&#39;\r\n3. Auth handled by a third party tool\r\n\r\nTherefore I do not have to worry about session with regards to horizontal scaling/ running multiple instances of the application. STM/ Weblogic cluster makes sure that the subsequent request come to same managed server.\r\n\r\nWhat we currently have is a monolithic application and we are trying to move to microservices. Also we do not wan&#39;t to move out of current infrastructure (i.e. STM/ Weblogic cluster/ Auth tool). What we have planned is:\r\n\r\n1. A Gateway WAR which routes requests to other microservices\r\n2. N x Microservices (WAR) for each functional sub-domain\r\n3. Only the API Gateway receives user requests and other microservices are not accessible from outside\r\n\r\n\r\nSo my question is\r\n\r\n1. Should API Gateway be state-full while other microsevices are stateless?\r\n2. If so, how should the user session data be shared between API Gateway and microservices?\r\n\r\nPlease suggest any better alternatives and resources/links as well.  Thanks.","title":"Session Management in microservices","body":"<p>We have the following setup.</p>\n\n<ol>\n<li>STM (Stingrey Traffic Manager) does load balancing + session stickiness</li>\n<li>Weblogic 'cluster'</li>\n<li>Auth handled by a third party tool</li>\n</ol>\n\n<p>Therefore I do not have to worry about session with regards to horizontal scaling/ running multiple instances of the application. STM/ Weblogic cluster makes sure that the subsequent request come to same managed server.</p>\n\n<p>What we currently have is a monolithic application and we are trying to move to microservices. Also we do not wan't to move out of current infrastructure (i.e. STM/ Weblogic cluster/ Auth tool). What we have planned is:</p>\n\n<ol>\n<li>A Gateway WAR which routes requests to other microservices</li>\n<li>N x Microservices (WAR) for each functional sub-domain</li>\n<li>Only the API Gateway receives user requests and other microservices are not accessible from outside</li>\n</ol>\n\n<p>So my question is</p>\n\n<ol>\n<li>Should API Gateway be state-full while other microsevices are stateless?</li>\n<li>If so, how should the user session data be shared between API Gateway and microservices?</li>\n</ol>\n\n<p>Please suggest any better alternatives and resources/links as well.  Thanks.</p>\n"},{"tags":["java","eclipse","loops","primes"],"answers":[{"tags":[],"owner":{"account_id":9492614,"reputation":174,"user_id":7058912,"display_name":"creeperdomain"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1477196982,"creation_date":1477196982,"answer_id":40199526,"question_id":40199440,"body_markdown":"Your method for finding if your number is prime is the correct method.\r\nTo make it so that it does not consistently print out whether or not the number is prime, you could have an external variable, which represents whether or not the number is prime. \r\n\r\nSuch as \r\n\r\n        boolean prime = true;\r\n        for (int p = 2; p &lt; sum; p++) {\r\n            if (sum % p == 0) {\r\n                prime = false;\r\n                break;\r\n            }\r\n        }\r\n        if (prime)\r\n            System.out.println(&quot;The sum is a prime number.&quot;);\r\n        else\r\n            System.out.println(&quot;The sum is not a prime number.&quot;);\r\n\r\nBy doing this method the program will assume the number is prime until it proves that wrong. So when it finds it is not prime it sets the variable to false and breaks out of the loop.\r\n\r\nThen after the loop finishes you just have to print whether or not the number was prime.\r\n\r\nA way that you could make this loop faster is to go from when p = 2 to when p = the square root of sum. So using this method your for loop will look like this:\r\n\r\n        double sq = Math.sqrt((double)sum);\r\n        for (int p = 2; p &lt; sq; p++) {\r\n            //Rest of code goes here\r\n        }\r\n\r\nHope this helps","title":"How to determine if a number is prime","body":"<p>Your method for finding if your number is prime is the correct method.\nTo make it so that it does not consistently print out whether or not the number is prime, you could have an external variable, which represents whether or not the number is prime. </p>\n\n<p>Such as </p>\n\n<pre><code>    boolean prime = true;\n    for (int p = 2; p &lt; sum; p++) {\n        if (sum % p == 0) {\n            prime = false;\n            break;\n        }\n    }\n    if (prime)\n        System.out.println(\"The sum is a prime number.\");\n    else\n        System.out.println(\"The sum is not a prime number.\");\n</code></pre>\n\n<p>By doing this method the program will assume the number is prime until it proves that wrong. So when it finds it is not prime it sets the variable to false and breaks out of the loop.</p>\n\n<p>Then after the loop finishes you just have to print whether or not the number was prime.</p>\n\n<p>A way that you could make this loop faster is to go from when p = 2 to when p = the square root of sum. So using this method your for loop will look like this:</p>\n\n<pre><code>    double sq = Math.sqrt((double)sum);\n    for (int p = 2; p &lt; sq; p++) {\n        //Rest of code goes here\n    }\n</code></pre>\n\n<p>Hope this helps</p>\n"},{"tags":[],"owner":{"account_id":4616172,"reputation":126,"user_id":3742620,"display_name":"Unamanic"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1477196984,"creation_date":1477196984,"answer_id":40199527,"question_id":40199440,"body_markdown":"You need to store whether or not the number is prime in a boolean outside of the loop: \r\n\r\n    //Determine if the sum is prime and display results\r\n    boolean isPrime = true;\r\n    for(int p = 2; p &lt; sum; p++) {\r\n        if(sum % p == 0){\r\n            isPrime = false;\r\n            break;\r\n        }\r\n    }\r\n    if(isPrime){\r\n       System.out.println(&quot;The sum is a prime number.&quot;);\r\n    } else {\r\n       System.out.println(&quot;The sum is not a prime number.&quot;); \r\n    }\r\n\r\n","title":"How to determine if a number is prime","body":"<p>You need to store whether or not the number is prime in a boolean outside of the loop: </p>\n\n<pre><code>//Determine if the sum is prime and display results\nboolean isPrime = true;\nfor(int p = 2; p &lt; sum; p++) {\n    if(sum % p == 0){\n        isPrime = false;\n        break;\n    }\n}\nif(isPrime){\n   System.out.println(\"The sum is a prime number.\");\n} else {\n   System.out.println(\"The sum is not a prime number.\"); \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9470810,"reputation":106,"user_id":7041714,"display_name":"Yuvalal Liron"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1477198259,"creation_date":1477198259,"answer_id":40199645,"question_id":40199440,"body_markdown":"You are right, currently your code tests dividing by two, and the break command is stopping after one loop.\r\n\r\nAfter the first go of your loop (p==2), the `break` will always stop the loop.\r\n\r\nThe fastest fix to your code will change the loop part like this:\r\n\r\n    boolean isPrime=true;\r\n    for(int p = 2; p &lt; sum; p++) {\r\n        if(sum % p == 0) {\r\n            isPrime=false;\r\n            System.out.println(&quot;The sum is not a prime number.&quot;);\r\n            break;\r\n        }\r\n    }\r\n    if (isPrime)\r\n        System.out.println(&quot;The sum is a prime number.&quot;); \r\n\r\nThis code can be improved for efficiency and for code elegance.\r\n\r\nFor efficiency, you don&#39;t need to check divisibility by all numbers smaller than sum, it&#39;s enough to check all numbers smaller by square-root of sum.\r\n\r\nFor better code, create a seperate function to test if a number is prime. \r\n\r\nHere is an example that implements both.\r\n\r\n     // tests if n is prime\r\n     public static boolean isPrime(int n) {\r\n         if (n&lt;2) return false;\r\n         for(int p = 2; p &lt; Math.sqrt(n); p++) {\r\n            if(n % p == 0) return false;  // enough to find one devisor to show n is not a prime\r\n         }\r\n         return true; // no factors smaller than sqrt(n) were found\r\n     }\r\n     \r\n     public static void main(String []args){\r\n        ...\r\n        System.out.println(&quot;sum is &quot;+ sum);\r\n        if (isPrime(sum)) \r\n            System.out.println(&quot;The sum is a prime number.&quot;);\r\n        else \r\n            System.out.println(&quot;The sum is not a prime number.&quot;);\r\n     }","title":"How to determine if a number is prime","body":"<p>You are right, currently your code tests dividing by two, and the break command is stopping after one loop.</p>\n\n<p>After the first go of your loop (p==2), the <code>break</code> will always stop the loop.</p>\n\n<p>The fastest fix to your code will change the loop part like this:</p>\n\n<pre><code>boolean isPrime=true;\nfor(int p = 2; p &lt; sum; p++) {\n    if(sum % p == 0) {\n        isPrime=false;\n        System.out.println(\"The sum is not a prime number.\");\n        break;\n    }\n}\nif (isPrime)\n    System.out.println(\"The sum is a prime number.\"); \n</code></pre>\n\n<p>This code can be improved for efficiency and for code elegance.</p>\n\n<p>For efficiency, you don't need to check divisibility by all numbers smaller than sum, it's enough to check all numbers smaller by square-root of sum.</p>\n\n<p>For better code, create a seperate function to test if a number is prime. </p>\n\n<p>Here is an example that implements both.</p>\n\n<pre><code> // tests if n is prime\n public static boolean isPrime(int n) {\n     if (n&lt;2) return false;\n     for(int p = 2; p &lt; Math.sqrt(n); p++) {\n        if(n % p == 0) return false;  // enough to find one devisor to show n is not a prime\n     }\n     return true; // no factors smaller than sqrt(n) were found\n }\n\n public static void main(String []args){\n    ...\n    System.out.println(\"sum is \"+ sum);\n    if (isPrime(sum)) \n        System.out.println(\"The sum is a prime number.\");\n    else \n        System.out.println(\"The sum is not a prime number.\");\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3796206,"reputation":916,"user_id":3151210,"accept_rate":100,"display_name":"Ashish Kumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1480847677,"creation_date":1480847677,"answer_id":40957692,"question_id":40199440,"body_markdown":"So many answers have been posted so far which are correct but none of them is optimized. That&#39;s why I thought to share the optimized code to determine prime number here with you. Please have a look at below code snippet...\r\n\r\n    private static boolean isPrime(int iNum) {\r\n\tboolean bResult = true;\r\n\tif (iNum &lt;= 1 || iNum != 2 &amp;&amp; iNum % 2 == 0) {\r\n\t    bResult = false;\r\n\t} else {\r\n\t    int iSqrt = (int) Math.sqrt(iNum);\r\n\t    for (int i = 3; i &lt; iSqrt; i += 2) {\r\n\t\tif (iNum % i == 0) {\r\n\t\t    bResult = false;\r\n\t\t    break;\r\n\t\t}\r\n\t    }\r\n\t}\r\n\treturn bResult;\r\n    }\r\n\r\n&gt; Benefits of above code-:\r\n\r\n 1. It&#39;ll work for negative numbers and 0 &amp; 1 as well.\r\n 2. It&#39;ll run the `for` loop only for odd numbers.\r\n 3. It&#39;ll increment the `for` loop variable by 2 rather than 1.\r\n 4. It&#39;ll iterate the `for` loop only upto square root of number rather than upto number.\r\n\r\n&gt; Explanation-:\r\n\r\nI have mentioned the four points above which I&#39;ll explain one by one. Code must be appropriately written for the **invalid inputs rather the only for valid input**. Whatever answers have been written so far are restricted to valid range of input in which number `iNum &gt;=2`.\r\n\r\nWe should be aware that **only odd numbers can be prime**, ***Note-: 2 is the only one even prime.*** So we must not run `for` loop for even numbers.\r\n\r\nWe must not run `for` loop for even values of it&#39;s variable `i` as we know that only even numbers can be devided by even number. I have already mentioned in the above point that only odd numbers can be prime except 2 as even. **So no need to run code inside `for` loop for even values of variable `i` in `for`**.\r\n\r\nWe should iterate `for` loop only upto **square root** of number rather than upto number. Few of the answers has implemented this point but still I thought to mention it here.","title":"How to determine if a number is prime","body":"<p>So many answers have been posted so far which are correct but none of them is optimized. That's why I thought to share the optimized code to determine prime number here with you. Please have a look at below code snippet...</p>\n\n<pre><code>private static boolean isPrime(int iNum) {\nboolean bResult = true;\nif (iNum &lt;= 1 || iNum != 2 &amp;&amp; iNum % 2 == 0) {\n    bResult = false;\n} else {\n    int iSqrt = (int) Math.sqrt(iNum);\n    for (int i = 3; i &lt; iSqrt; i += 2) {\n    if (iNum % i == 0) {\n        bResult = false;\n        break;\n    }\n    }\n}\nreturn bResult;\n}\n</code></pre>\n\n<blockquote>\n  <p>Benefits of above code-:</p>\n</blockquote>\n\n<ol>\n<li>It'll work for negative numbers and 0 &amp; 1 as well.</li>\n<li>It'll run the <code>for</code> loop only for odd numbers.</li>\n<li>It'll increment the <code>for</code> loop variable by 2 rather than 1.</li>\n<li>It'll iterate the <code>for</code> loop only upto square root of number rather than upto number.</li>\n</ol>\n\n<blockquote>\n  <p>Explanation-:</p>\n</blockquote>\n\n<p>I have mentioned the four points above which I'll explain one by one. Code must be appropriately written for the <strong>invalid inputs rather the only for valid input</strong>. Whatever answers have been written so far are restricted to valid range of input in which number <code>iNum &gt;=2</code>.</p>\n\n<p>We should be aware that <strong>only odd numbers can be prime</strong>, <strong><em>Note-: 2 is the only one even prime.</em></strong> So we must not run <code>for</code> loop for even numbers.</p>\n\n<p>We must not run <code>for</code> loop for even values of it's variable <code>i</code> as we know that only even numbers can be devided by even number. I have already mentioned in the above point that only odd numbers can be prime except 2 as even. <strong>So no need to run code inside <code>for</code> loop for even values of variable <code>i</code> in <code>for</code></strong>.</p>\n\n<p>We should iterate <code>for</code> loop only upto <strong>square root</strong> of number rather than upto number. Few of the answers has implemented this point but still I thought to mention it here.</p>\n"},{"tags":[],"owner":{"account_id":1853929,"reputation":6195,"user_id":1679903,"accept_rate":88,"display_name":"kinjelom"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1653656416,"creation_date":1495796684,"answer_id":44199957,"question_id":40199440,"body_markdown":"# Small prime numbers\r\nUse [Apache Commons Math](http://commons.apache.org/proper/commons-math/download_math.cgi) **primality test**, method is related to prime numbers in the range of `int`. You can find source code on [GitHub](https://github.com/apache/commons-math/blob/master/src/main/java/org/apache/commons/math4/primes/Primes.java). \r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n        &lt;artifactId&gt;commons-math3&lt;/artifactId&gt;\r\n        &lt;version&gt;3.6.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    // org.apache.commons.math3.primes.Primes\r\n    Primes.isPrime(2147483629);\r\n\r\n&gt; It uses the Miller-Rabin probabilistic test in such a way that a\r\n&gt; result is guaranteed: it uses the firsts prime numbers as successive\r\n&gt; base (see Handbook of applied cryptography by [Menezes, table 4.1](http://cacr.uwaterloo.ca/hac/about/chap4.pdf) / page 140).\r\n\r\n\r\n# Big prime numbers\r\nIf you are looking for primes larger than `Integer.MAX_VALUE`:\r\n\r\n1. Use [`BigInteger#isProbablePrime(int certainty)`](https://docs.oracle.com/javase/8/docs/api/java/math/BigInteger.html#isProbablePrime-int-) to pre-verify the prime candidate \r\n\r\n    &gt; Returns true if this BigInteger is probably prime, false if it&#39;s\r\n    &gt; definitely composite. If certainty is ≤ 0, true is returned.\r\n    &gt; Parameters: certainty - a measure of the uncertainty that the caller\r\n    &gt; is willing to tolerate: if the call returns true the probability that\r\n    &gt; this BigInteger is prime exceeds (1 - 1/2certainty). The execution\r\n    &gt; time of this method is proportional to the value of this parameter.\r\n\r\n2. Next use [&quot;AKS Primality Test&quot;](https://www.geeksforgeeks.org/aks-primality-test/) to check whether the candidate is indeed prime. \r\n\r\n  [1]: https://mvnrepository.com/artifact/org.apache.commons/commons-math3/3.6.1\r\n","title":"How to determine if a number is prime","body":"<h1>Small prime numbers</h1>\n<p>Use <a href=\"http://commons.apache.org/proper/commons-math/download_math.cgi\" rel=\"nofollow noreferrer\">Apache Commons Math</a> <strong>primality test</strong>, method is related to prime numbers in the range of <code>int</code>. You can find source code on <a href=\"https://github.com/apache/commons-math/blob/master/src/main/java/org/apache/commons/math4/primes/Primes.java\" rel=\"nofollow noreferrer\">GitHub</a>.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-math3&lt;/artifactId&gt;\n    &lt;version&gt;3.6.1&lt;/version&gt;\n&lt;/dependency&gt;\n\n// org.apache.commons.math3.primes.Primes\nPrimes.isPrime(2147483629);\n</code></pre>\n<blockquote>\n<p>It uses the Miller-Rabin probabilistic test in such a way that a\nresult is guaranteed: it uses the firsts prime numbers as successive\nbase (see Handbook of applied cryptography by <a href=\"http://cacr.uwaterloo.ca/hac/about/chap4.pdf\" rel=\"nofollow noreferrer\">Menezes, table 4.1</a> / page 140).</p>\n</blockquote>\n<h1>Big prime numbers</h1>\n<p>If you are looking for primes larger than <code>Integer.MAX_VALUE</code>:</p>\n<ol>\n<li><p>Use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/math/BigInteger.html#isProbablePrime-int-\" rel=\"nofollow noreferrer\"><code>BigInteger#isProbablePrime(int certainty)</code></a> to pre-verify the prime candidate</p>\n<blockquote>\n<p>Returns true if this BigInteger is probably prime, false if it's\ndefinitely composite. If certainty is ≤ 0, true is returned.\nParameters: certainty - a measure of the uncertainty that the caller\nis willing to tolerate: if the call returns true the probability that\nthis BigInteger is prime exceeds (1 - 1/2certainty). The execution\ntime of this method is proportional to the value of this parameter.</p>\n</blockquote>\n</li>\n<li><p>Next use <a href=\"https://www.geeksforgeeks.org/aks-primality-test/\" rel=\"nofollow noreferrer\">&quot;AKS Primality Test&quot;</a> to check whether the candidate is indeed prime.</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":9475267,"reputation":115,"user_id":7044810,"display_name":"Sameer Shrestha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1561295756,"creation_date":1526914834,"answer_id":50451548,"question_id":40199440,"body_markdown":"With most efficient time Complexity ie O(sqrt(n)) :\r\n\r\n    public static boolean isPrime(int num) {\r\n\r\n\t\tfor (int i = 2; i * i &lt;= num; i++) {\r\n\t\t\tif (num % i == 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}","title":"How to determine if a number is prime","body":"<p>With most efficient time Complexity ie O(sqrt(n)) :</p>\n\n<pre><code>public static boolean isPrime(int num) {\n\n    for (int i = 2; i * i &lt;= num; i++) {\n        if (num % i == 0) {\n            return false;\n        }\n    }\n\n    return true;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14589181,"reputation":285,"user_id":10536936,"display_name":"Ali Zedan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660126792,"creation_date":1652092664,"answer_id":72170637,"question_id":40199440,"body_markdown":"you can use the Java BigInteger class&#39; isProbablePrime method to determine and print whether the sum is prime or not prime in an easy way. \r\n\r\n \r\n\r\n     BigInteger number = new BigInteger(sum);\r\n            if(number.isProbablePrime(1)){\r\n                System.out.println(&quot;prime&quot;);\r\n            }\r\n            else{\r\n                System.out.println(&quot;not prime&quot;);\r\n            }\r\n\r\nYou can read more about this method here https://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html#isProbablePrime%28int%29 ","title":"How to determine if a number is prime","body":"<p>you can use the Java BigInteger class' isProbablePrime method to determine and print whether the sum is prime or not prime in an easy way.</p>\n<pre><code> BigInteger number = new BigInteger(sum);\n        if(number.isProbablePrime(1)){\n            System.out.println(&quot;prime&quot;);\n        }\n        else{\n            System.out.println(&quot;not prime&quot;);\n        }\n</code></pre>\n<p>You can read more about this method here <a href=\"https://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html#isProbablePrime%28int%29\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html#isProbablePrime%28int%29</a></p>\n"}],"owner":{"account_id":9496028,"reputation":39,"user_id":7059006,"accept_rate":60,"display_name":"senpaimaster"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11544,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":40199526,"answer_count":7,"score":4,"last_activity_date":1660126792,"creation_date":1477195946,"question_id":40199440,"body_markdown":"Okay my issue is less of how to figure out if a number is prime, because I think I figured that out, but more of how to get it to display properly.\r\n\r\nHere&#39;s my code:\r\n\r\n    public static void main(String[] args) {\r\n\t\t// Declare Variables\r\n\t\tint randomNumbers = 0;\r\n\t\tint sum = 0;\r\n\t\t//Loop for number generation and print out numbers\r\n\t\tSystem.out.print(&quot;The five random numbers are: &quot;);\r\n\t\tfor (int i = 0; i &lt;= 4; i++)\r\n\t\t{\r\n\t\t    randomNumbers = (int)(Math.random()*20);\r\n\t\t    sum += randomNumbers;\r\n\t\t    \r\n\t\t    if (i == 4) {\r\n\t\t    \tSystem.out.println(&quot;and &quot; + randomNumbers + &quot;.&quot;);\r\n\t\t    }\r\n\t\t    else {\r\n\t\t    \tSystem.out.print(randomNumbers + &quot;, &quot;);\r\n\t\t    }\r\n\t\t}\r\n\t\t//Display Sum\r\n\t\tSystem.out.println(&quot;\\nThe sum of these five numbers is &quot; + sum + &quot;.\\n&quot;);\r\n\t\t\r\n\t\t//Determine if the sum is prime and display results\r\n\t\tfor(int p = 2; p &lt; sum; p++) {\r\n\t\t\tif(sum % p == 0)\r\n\t\t\t\tSystem.out.println(&quot;The sum is not a prime number.&quot;);\r\n\t\t\telse \r\n\t\t\t\tSystem.out.println(&quot;The sum is a prime number.&quot;);\r\n\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t}\r\n\r\n\r\nNow my problem is, if the number ends up being something like 9, it&#39;ll say it is a prime number, which it is not. I think the issue is that the break is stopping it after one loop so it&#39;s not incrementing variable p so it&#39;s only testing dividing by 2 (I think). But if I remove the break point it will print out &quot;The sum is/is not a prime number&quot; on every pass until it exits the loop. Not sure what to do here.\r\n","title":"How to determine if a number is prime","body":"<p>Okay my issue is less of how to figure out if a number is prime, because I think I figured that out, but more of how to get it to display properly.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>public static void main(String[] args) {\n    // Declare Variables\n    int randomNumbers = 0;\n    int sum = 0;\n    //Loop for number generation and print out numbers\n    System.out.print(\"The five random numbers are: \");\n    for (int i = 0; i &lt;= 4; i++)\n    {\n        randomNumbers = (int)(Math.random()*20);\n        sum += randomNumbers;\n\n        if (i == 4) {\n            System.out.println(\"and \" + randomNumbers + \".\");\n        }\n        else {\n            System.out.print(randomNumbers + \", \");\n        }\n    }\n    //Display Sum\n    System.out.println(\"\\nThe sum of these five numbers is \" + sum + \".\\n\");\n\n    //Determine if the sum is prime and display results\n    for(int p = 2; p &lt; sum; p++) {\n        if(sum % p == 0)\n            System.out.println(\"The sum is not a prime number.\");\n        else \n            System.out.println(\"The sum is a prime number.\");\n        break;\n        }\n    }\n\n\n}\n</code></pre>\n\n<p>Now my problem is, if the number ends up being something like 9, it'll say it is a prime number, which it is not. I think the issue is that the break is stopping it after one loop so it's not incrementing variable p so it's only testing dividing by 2 (I think). But if I remove the break point it will print out \"The sum is/is not a prime number\" on every pass until it exits the loop. Not sure what to do here.</p>\n"},{"tags":["java","xml","android-studio","binding"],"answers":[{"tags":[],"owner":{"account_id":25520737,"reputation":41,"user_id":19310679,"display_name":"asapsonter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660126683,"creation_date":1660126461,"answer_id":73304460,"question_id":73295981,"body_markdown":"I solved this by add adding my project package.R.id\r\n\r\n**example** \r\n\r\n*com.project.package.R.id*\r\n\r\n```\r\ncom.mqtt.workactiv.R.id.action_navigation_setting_to_gatewayFragment\r\n```\r\n\r\nreference for other methods of solving the issue [solutions][1]\r\n\r\n\r\n  [1]: https://www.geeksforgeeks.org/different-ways-to-fix-cannot-resolve-symbol-r-in-android-studio/","title":"I am trying to bind a fragment to another using view binding","body":"<p>I solved this by add adding my project package.R.id</p>\n<p><strong>example</strong></p>\n<p><em>com.project.package.R.id</em></p>\n<pre><code>com.mqtt.workactiv.R.id.action_navigation_setting_to_gatewayFragment\n</code></pre>\n<p>reference for other methods of solving the issue <a href=\"https://www.geeksforgeeks.org/different-ways-to-fix-cannot-resolve-symbol-r-in-android-studio/\" rel=\"nofollow noreferrer\">solutions</a></p>\n"}],"owner":{"account_id":25520737,"reputation":41,"user_id":19310679,"display_name":"asapsonter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":477,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73304460,"answer_count":1,"score":0,"last_activity_date":1660126683,"creation_date":1660066682,"question_id":73295981,"body_markdown":"\r\nI am trying to use the binding method in android studio to connect two fragments using onCreate and onViewCreated methods. so far i am getting id not resolved error. I have already connected the fragments on the xml graph. Bellow is the code of the settings java file.\r\nI am new to android development pls help\r\n\r\nerror says \r\n**Cannot resolve symbol &#39;R&#39;**\r\n\r\n   **Cannot resolve symbol &#39;navController&#39;**\r\n\r\n*settingsFragment*\r\n\r\n```java\r\npackage com.mqtt.workactiv.ui.settings;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.lifecycle.ViewModelProvider;\r\n\r\nimport com.mqtt.workactiv.databinding.FragmentSettingsBinding;\r\n\r\npublic class SettingsFragment extends Fragment {\r\n\r\n    private FragmentSettingsBinding binding;\r\n\r\n\r\n    public View onCreateView(@NonNull LayoutInflater inflater,\r\n                             ViewGroup container, Bundle savedInstanceState) {\r\n        SettingsViewModel settingsViewModel =\r\n                new ViewModelProvider(this).get(SettingsViewModel.class);\r\n\r\n        binding = FragmentSettingsBinding.inflate(inflater, container, false);\r\n        View root = binding.getRoot();\r\n\r\n        return root;\r\n    }\r\n\r\n    @Override\r\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n\r\n        binding.gatewayConnButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                navController.navigate(R.id.action_navigation_setting_to_accountFragment);\r\n\r\n            }\r\n        });\r\n    }\r\n}\r\n```\r\n\r\n*navgraph.xml\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;navigation xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:id=&quot;@+id/mobile_navigation&quot;\r\n    app:startDestination=&quot;@id/navigation_setting&quot;&gt;\r\n\r\n    &lt;fragment\r\n        android:id=&quot;@+id/navigation_home&quot;\r\n        android:name=&quot;com.mqtt.workactiv.ui.home.HomeFragment&quot;\r\n        android:label=&quot;@string/title_home&quot;\r\n        tools:layout=&quot;@layout/fragment_home&quot; /&gt;\r\n\r\n    &lt;fragment\r\n        android:id=&quot;@+id/navigation_control&quot;\r\n        android:name=&quot;com.mqtt.workactiv.ui.control.ControlFragment&quot;\r\n        android:label=&quot;@string/title_control&quot;\r\n        tools:layout=&quot;@layout/fragment_control&quot; /&gt;\r\n\r\n    &lt;fragment\r\n        android:id=&quot;@+id/navigation_setting&quot;\r\n        android:name=&quot;com.mqtt.workactiv.ui.settings.SettingsFragment&quot;\r\n        android:label=&quot;@string/title_settings&quot;\r\n        tools:layout=&quot;@layout/fragment_settings&quot; &gt;\r\n        &lt;action\r\n            android:id=&quot;@+id/action_navigation_setting_to_accountFragment&quot;\r\n            app:destination=&quot;@id/accountFragment&quot; /&gt;\r\n    &lt;/fragment&gt;\r\n    &lt;fragment\r\n        android:id=&quot;@+id/accountFragment&quot;\r\n        android:name=&quot;com.mqtt.workactiv.ui.AccountFragment&quot;\r\n        android:label=&quot;fragment_account&quot;\r\n        tools:layout=&quot;@layout/fragment_account&quot; /&gt;\r\n&lt;/navigation&gt;\r\n```\r\n\r\n*mainActivity.java\r\n```java\r\npackage com.mqtt.workactiv;\r\n\r\nimport android.content.res.Configuration;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\n\r\nimport com.google.android.material.bottomnavigation.BottomNavigationView;\r\nimport com.mqtt.workactiv.databinding.ActivityMainBinding;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.navigation.NavController;\r\nimport androidx.navigation.Navigation;\r\nimport androidx.navigation.ui.NavigationUI;\r\n\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private ActivityMainBinding binding;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        binding = ActivityMainBinding.inflate(getLayoutInflater());\r\n        setContentView(binding.getRoot());\r\n\r\n        BottomNavigationView navView = findViewById(R.id.nav_view);\r\n        NavController navController = Navigation.findNavController(this, R.id.nav_host_fragment_activity_main);\r\n        NavigationUI.setupWithNavController(binding.navView, navController);\r\n\r\n        this.getWindow().setStatusBarColor(getColor(R.color.gray_background));\r\n        this.getWindow().setNavigationBarColor(getColor(R.color.white));\r\n        getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR);\r\n        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {\r\n            View decorView = getWindow().getDecorView();\r\n            int uiOptions = View.SYSTEM_UI_FLAG_HIDE_NAVIGATION | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY;\r\n            decorView.setSystemUiVisibility(uiOptions);\r\n        }\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onWindowFocusChanged(boolean hasFocus) {\r\n        super.onWindowFocusChanged(hasFocus);\r\n        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {\r\n            View decorView = getWindow().getDecorView();\r\n            int uiOptions = View.SYSTEM_UI_FLAG_HIDE_NAVIGATION | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY;\r\n            decorView.setSystemUiVisibility(uiOptions);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n","title":"I am trying to bind a fragment to another using view binding","body":"<p>I am trying to use the binding method in android studio to connect two fragments using onCreate and onViewCreated methods. so far i am getting id not resolved error. I have already connected the fragments on the xml graph. Bellow is the code of the settings java file.\nI am new to android development pls help</p>\n<p>error says\n<strong>Cannot resolve symbol 'R'</strong></p>\n<p><strong>Cannot resolve symbol 'navController'</strong></p>\n<p><em>settingsFragment</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.mqtt.workactiv.ui.settings;\n\nimport android.os.Bundle;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\n\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.fragment.app.Fragment;\nimport androidx.lifecycle.ViewModelProvider;\n\nimport com.mqtt.workactiv.databinding.FragmentSettingsBinding;\n\npublic class SettingsFragment extends Fragment {\n\n    private FragmentSettingsBinding binding;\n\n\n    public View onCreateView(@NonNull LayoutInflater inflater,\n                             ViewGroup container, Bundle savedInstanceState) {\n        SettingsViewModel settingsViewModel =\n                new ViewModelProvider(this).get(SettingsViewModel.class);\n\n        binding = FragmentSettingsBinding.inflate(inflater, container, false);\n        View root = binding.getRoot();\n\n        return root;\n    }\n\n    @Override\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\n        super.onViewCreated(view, savedInstanceState);\n\n        binding.gatewayConnButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                navController.navigate(R.id.action_navigation_setting_to_accountFragment);\n\n            }\n        });\n    }\n}\n</code></pre>\n<p>*navgraph.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;navigation xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/mobile_navigation&quot;\n    app:startDestination=&quot;@id/navigation_setting&quot;&gt;\n\n    &lt;fragment\n        android:id=&quot;@+id/navigation_home&quot;\n        android:name=&quot;com.mqtt.workactiv.ui.home.HomeFragment&quot;\n        android:label=&quot;@string/title_home&quot;\n        tools:layout=&quot;@layout/fragment_home&quot; /&gt;\n\n    &lt;fragment\n        android:id=&quot;@+id/navigation_control&quot;\n        android:name=&quot;com.mqtt.workactiv.ui.control.ControlFragment&quot;\n        android:label=&quot;@string/title_control&quot;\n        tools:layout=&quot;@layout/fragment_control&quot; /&gt;\n\n    &lt;fragment\n        android:id=&quot;@+id/navigation_setting&quot;\n        android:name=&quot;com.mqtt.workactiv.ui.settings.SettingsFragment&quot;\n        android:label=&quot;@string/title_settings&quot;\n        tools:layout=&quot;@layout/fragment_settings&quot; &gt;\n        &lt;action\n            android:id=&quot;@+id/action_navigation_setting_to_accountFragment&quot;\n            app:destination=&quot;@id/accountFragment&quot; /&gt;\n    &lt;/fragment&gt;\n    &lt;fragment\n        android:id=&quot;@+id/accountFragment&quot;\n        android:name=&quot;com.mqtt.workactiv.ui.AccountFragment&quot;\n        android:label=&quot;fragment_account&quot;\n        tools:layout=&quot;@layout/fragment_account&quot; /&gt;\n&lt;/navigation&gt;\n</code></pre>\n<p>*mainActivity.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.mqtt.workactiv;\n\nimport android.content.res.Configuration;\nimport android.os.Bundle;\nimport android.view.View;\n\nimport com.google.android.material.bottomnavigation.BottomNavigationView;\nimport com.mqtt.workactiv.databinding.ActivityMainBinding;\n\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.navigation.NavController;\nimport androidx.navigation.Navigation;\nimport androidx.navigation.ui.NavigationUI;\n\n\npublic class MainActivity extends AppCompatActivity {\n\n    private ActivityMainBinding binding;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        binding = ActivityMainBinding.inflate(getLayoutInflater());\n        setContentView(binding.getRoot());\n\n        BottomNavigationView navView = findViewById(R.id.nav_view);\n        NavController navController = Navigation.findNavController(this, R.id.nav_host_fragment_activity_main);\n        NavigationUI.setupWithNavController(binding.navView, navController);\n\n        this.getWindow().setStatusBarColor(getColor(R.color.gray_background));\n        this.getWindow().setNavigationBarColor(getColor(R.color.white));\n        getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR);\n        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {\n            View decorView = getWindow().getDecorView();\n            int uiOptions = View.SYSTEM_UI_FLAG_HIDE_NAVIGATION | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY;\n            decorView.setSystemUiVisibility(uiOptions);\n        }\n\n\n    }\n\n    @Override\n    public void onWindowFocusChanged(boolean hasFocus) {\n        super.onWindowFocusChanged(hasFocus);\n        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {\n            View decorView = getWindow().getDecorView();\n            int uiOptions = View.SYSTEM_UI_FLAG_HIDE_NAVIGATION | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY;\n            decorView.setSystemUiVisibility(uiOptions);\n        }\n    }\n}\n\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-batch"],"answers":[{"tags":[],"owner":{"account_id":2258217,"reputation":546,"user_id":1988915,"accept_rate":29,"display_name":"Anuj Acharya"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1436303482,"creation_date":1436303482,"answer_id":31279336,"question_id":31276011,"body_markdown":"I was able to know whats going on, I am using custom reader/processor/writer. When springboot application starts it actually try to do dependency injection of this custom beans beans where I have written some application logic.\r\n\r\nExample\r\n\r\n** TestConfiguration.class**\r\n\r\n        @Configuration\r\n        @EnableBatchProcessing\r\n        public class TestConfiguration {\r\n        \r\n        \t@Bean\r\n        \t@Conditional(Employee.class)\r\n        \tpublic ItemWriter&lt;Employee&gt; writer_employee(DataSource dataSource) throws IOException {\r\n            \tFlatFileItemWriter&lt;Employee&gt; writer = new FlatFileItemWriter&lt;Employee&gt;();\r\n            \twriter.setResource(new FileSystemResource(FinanceReportUtil.createFile(&quot;Employee.csv&quot;)));\r\n            \twriter.setHeaderCallback(new FlatFileHeaderCallback() {\r\n                \t@Override\r\n                \t\tpublic void writeHeader(Writer writer) throws IOException {\r\n                    \twriter.write(&quot;id, name&quot;);\r\n               \t\t }\r\n           \t\t });\r\n            \tDelimitedLineAggregator&lt;Employee&gt; delLineAgg = new DelimitedLineAggregator&lt;Employee&gt;();\r\n            \tdelLineAgg.setDelimiter(&quot;,&quot;);\r\n            \tBeanWrapperFieldExtractor&lt;Employee&gt; fieldExtractor = new BeanWrapperFieldExtractor&lt;Employee&gt;();\r\n            \tfieldExtractor.setNames(new String[]{&quot;id&quot;, &quot;name&quot;});\r\n            \tdelLineAgg.setFieldExtractor(fieldExtractor);\r\n            \twriter.setLineAggregator(delLineAgg);\r\n            \treturn writer;\r\n       \t \t}\r\n       \t \t\r\n       \t \t@Bean\r\n        \t@Conditional(Manager.class)\r\n        \tpublic ItemWriter&lt;Person&gt; writer_manager(DataSource dataSource) throws IOException {\r\n        \r\n           \t\t// Does the same logic as employee\r\n        \t}\r\n\r\n            // Also has job and step etc.\r\n        }\r\n\r\nIt will create the file even with spring.batch.job.enabled=false, to overcome this I have created custom logic to inject the beans or not as below\r\n\r\n**application.properties**\r\n\r\n    # all, manager, employee\r\n    person=manager\r\n\r\n**ManagerCondition.class**\r\n\r\n    public class ManagerCondition implements Condition {\r\n\r\n    @Override\r\n    public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) {\r\n        String person= context.getEnvironment().getProperty(&quot;person&quot;);\r\n        return person.equals(&quot;manager&quot;);\r\n\r\n    }\r\n    ","title":"Spring boot spring.batch.job.enabled=false not able to recognize","body":"<p>I was able to know whats going on, I am using custom reader/processor/writer. When springboot application starts it actually try to do dependency injection of this custom beans beans where I have written some application logic.</p>\n\n<p>Example</p>\n\n<p>** TestConfiguration.class**</p>\n\n<pre><code>    @Configuration\n    @EnableBatchProcessing\n    public class TestConfiguration {\n\n        @Bean\n        @Conditional(Employee.class)\n        public ItemWriter&lt;Employee&gt; writer_employee(DataSource dataSource) throws IOException {\n            FlatFileItemWriter&lt;Employee&gt; writer = new FlatFileItemWriter&lt;Employee&gt;();\n            writer.setResource(new FileSystemResource(FinanceReportUtil.createFile(\"Employee.csv\")));\n            writer.setHeaderCallback(new FlatFileHeaderCallback() {\n                @Override\n                    public void writeHeader(Writer writer) throws IOException {\n                    writer.write(\"id, name\");\n                 }\n             });\n            DelimitedLineAggregator&lt;Employee&gt; delLineAgg = new DelimitedLineAggregator&lt;Employee&gt;();\n            delLineAgg.setDelimiter(\",\");\n            BeanWrapperFieldExtractor&lt;Employee&gt; fieldExtractor = new BeanWrapperFieldExtractor&lt;Employee&gt;();\n            fieldExtractor.setNames(new String[]{\"id\", \"name\"});\n            delLineAgg.setFieldExtractor(fieldExtractor);\n            writer.setLineAggregator(delLineAgg);\n            return writer;\n        }\n\n        @Bean\n        @Conditional(Manager.class)\n        public ItemWriter&lt;Person&gt; writer_manager(DataSource dataSource) throws IOException {\n\n            // Does the same logic as employee\n        }\n\n        // Also has job and step etc.\n    }\n</code></pre>\n\n<p>It will create the file even with spring.batch.job.enabled=false, to overcome this I have created custom logic to inject the beans or not as below</p>\n\n<p><strong>application.properties</strong></p>\n\n<pre><code># all, manager, employee\nperson=manager\n</code></pre>\n\n<p><strong>ManagerCondition.class</strong></p>\n\n<pre><code>public class ManagerCondition implements Condition {\n\n@Override\npublic boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) {\n    String person= context.getEnvironment().getProperty(\"person\");\n    return person.equals(\"manager\");\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10957879,"reputation":19,"user_id":8052066,"display_name":"Anuraj"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1525332533,"creation_date":1525332533,"answer_id":50149265,"question_id":31276011,"body_markdown":"I also faced the same issue, the property &#39;spring.batch.job.enabled=false&#39; was not recognising at start up when we give this in properties file. It could be because the properties might not have loaded into context before the batch initiated.\r\n\r\nSo i have set the property &#39;spring.batch.job.enabled=false&#39; in standalone.xml as a system property like below.\r\n\r\n    &lt;system-properties&gt;  \r\n            &lt;property name=&quot;spring.batch.job.enabled&quot; value=&quot;false&quot;/&gt;  \r\n    &lt;/system-properties&gt;  \r\n\r\nWith this it SUCCESSFULLY worked &amp; the spring batch jobs did not initialised on server start up. \r\n\r\nPlease note that the system-properties must be placed right after the extensions tag in standalone.xml. ","title":"Spring boot spring.batch.job.enabled=false not able to recognize","body":"<p>I also faced the same issue, the property 'spring.batch.job.enabled=false' was not recognising at start up when we give this in properties file. It could be because the properties might not have loaded into context before the batch initiated.</p>\n\n<p>So i have set the property 'spring.batch.job.enabled=false' in standalone.xml as a system property like below.</p>\n\n<pre><code>&lt;system-properties&gt;  \n        &lt;property name=\"spring.batch.job.enabled\" value=\"false\"/&gt;  \n&lt;/system-properties&gt;  \n</code></pre>\n\n<p>With this it SUCCESSFULLY worked &amp; the spring batch jobs did not initialised on server start up. </p>\n\n<p>Please note that the system-properties must be placed right after the extensions tag in standalone.xml. </p>\n"},{"tags":[],"owner":{"account_id":15699222,"reputation":370,"user_id":11327766,"display_name":"Hai Mai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660126540,"creation_date":1660126540,"answer_id":73304483,"question_id":31276011,"body_markdown":"You can put debug breakpoint in a  read() method in your Reader then Step Out of that method to trace what method call read(), keep going you will find the method launching the batch job. \r\n```\r\n@Component\r\npublic class ActSpeedSubTaskReader implements ItemReader&lt;ActSpeedTask&gt; {\r\n\r\n  \r\n\r\n  @Override\r\n  public ActSpeedTask read()\r\n      throws Exception, UnexpectedInputException, ParseException, NonTransientResourceException {\r\n   // put the breakpoint here\r\n   // read here\r\n    return null;\r\n}\r\n```","title":"Spring boot spring.batch.job.enabled=false not able to recognize","body":"<p>You can put debug breakpoint in a  read() method in your Reader then Step Out of that method to trace what method call read(), keep going you will find the method launching the batch job.</p>\n<pre><code>@Component\npublic class ActSpeedSubTaskReader implements ItemReader&lt;ActSpeedTask&gt; {\n\n  \n\n  @Override\n  public ActSpeedTask read()\n      throws Exception, UnexpectedInputException, ParseException, NonTransientResourceException {\n   // put the breakpoint here\n   // read here\n    return null;\n}\n</code></pre>\n"}],"owner":{"account_id":2258217,"reputation":546,"user_id":1988915,"accept_rate":29,"display_name":"Anuj Acharya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22203,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1660126540,"creation_date":1436291898,"question_id":31276011,"body_markdown":"I tried `spring.batch.job.enabled=false` in application.properties and `-Dspring.batch.job.enabled=false` when running the jar file.\r\n\r\nHowever `@EnableBatchProcessing` automatically start running the batch jobs on application start. How i can debug such scenario?\r\n\r\n**TestConfiguration.class**\r\n\r\n    @Configuration\r\n    @EnableBatchProcessing\r\n    public class TestConfiguration {...}\r\n\r\n**MainApplication**\r\n\r\n    @ComponentScan(&quot;com.demo&quot;)\r\n    @EnableAutoConfiguration\r\n    public class MainApplication {\r\n    public static void main(String[] args) throws BeansException, JobExecutionAlreadyRunningException, JobInstanceAlreadyCompleteException, JobParametersInvalidException, InterruptedException, JobRestartException {\r\n\r\n    ConfigurableApplicationContext ctx = SpringApplication.run(TestConfiguration.class, args);\r\n    ...}\r\n\r\n**pom.xml**\r\nI am using dependency as spring boot and not as parent\r\n\r\n    &lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;!-- Import dependecy for spring boot from here--&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;1.2.4.RELEASE&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n","title":"Spring boot spring.batch.job.enabled=false not able to recognize","body":"<p>I tried <code>spring.batch.job.enabled=false</code> in application.properties and <code>-Dspring.batch.job.enabled=false</code> when running the jar file.</p>\n\n<p>However <code>@EnableBatchProcessing</code> automatically start running the batch jobs on application start. How i can debug such scenario?</p>\n\n<p><strong>TestConfiguration.class</strong></p>\n\n<pre><code>@Configuration\n@EnableBatchProcessing\npublic class TestConfiguration {...}\n</code></pre>\n\n<p><strong>MainApplication</strong></p>\n\n<pre><code>@ComponentScan(\"com.demo\")\n@EnableAutoConfiguration\npublic class MainApplication {\npublic static void main(String[] args) throws BeansException, JobExecutionAlreadyRunningException, JobInstanceAlreadyCompleteException, JobParametersInvalidException, InterruptedException, JobRestartException {\n\nConfigurableApplicationContext ctx = SpringApplication.run(TestConfiguration.class, args);\n...}\n</code></pre>\n\n<p><strong>pom.xml</strong>\nI am using dependency as spring boot and not as parent</p>\n\n<pre><code>&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;!-- Import dependecy for spring boot from here--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n            &lt;version&gt;1.2.4.RELEASE&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","web-services","ssl-certificate","soapui","rest-assured"],"answers":[{"tags":[],"owner":{"account_id":18676717,"reputation":1,"user_id":13614229,"display_name":"automaton"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660126474,"creation_date":1660126474,"answer_id":73304463,"question_id":65317348,"body_markdown":"got same error recently.After some research I figured out that requestSpec.relaxedHttpsValidation() works for me but requestSpecBuilder.setRelaxedHTTPSValidation() not","title":"RestAssured certificate issue","body":"<p>got same error recently.After some research I figured out that requestSpec.relaxedHttpsValidation() works for me but requestSpecBuilder.setRelaxedHTTPSValidation() not</p>\n"}],"owner":{"account_id":20014922,"reputation":31,"user_id":14671177,"display_name":"achyuth pydmarri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":164,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1660126474,"creation_date":1608092988,"question_id":65317348,"body_markdown":"I have configured webservices in Soapui and added .jks file with password in SSL Keystore in the soapui settings and I was able to successfuly post the message with a positive response.\r\n\r\nI am trying to replicate it with RestAssured using below code\r\n\r\n    resBuilder= new RequestSpecBuilder();\r\n    resBuilder.setKeyStore(cert,password);\r\n    resBuilder.setRelaxedHTTPSValidation();\t\r\n    RequestSpecification requestSpec = resBuilder.build();\r\n    \t\t\tresponse = given()\r\n    \t\t\t.spec(requestSpec)\r\n    \t\t\t.when()\r\n    \t\t\t.post(url);\r\n    \t\t\tda.addResponses(response);\r\n\r\n\r\nWhen i execute the code, i am getting below error\r\n\r\n    &lt;env:Envelope xmlns:env=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\r\n      &lt;env:Body&gt;\r\n        &lt;env:Fault&gt;\r\n          &lt;faultcode&gt;No SSL Certificate Sent By Client&lt;/faultcode&gt;\r\n          &lt;faultstring&gt;Authorization Failure&lt;/faultstring&gt;\r\n        &lt;/env:Fault&gt;\r\n      &lt;/env:Body&gt;\r\n    &lt;/env:Envelope&gt;\r\n    &lt;env:Envelope xmlns:env=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\r\n      &lt;env:Body&gt;\r\n        &lt;env:Fault&gt;\r\n          &lt;faultcode&gt;No SSL Certificate Sent By Client&lt;/faultcode&gt;\r\n          &lt;faultstring&gt;Authorization Failure&lt;/faultstring&gt;\r\n        &lt;/env:Fault&gt;\r\n      &lt;/env:Body&gt;\r\n    &lt;/env:Envelope&gt;\r\n\r\nI tried to create trust store but chrome show certificate as invalid and not sure how to proceed further","title":"RestAssured certificate issue","body":"<p>I have configured webservices in Soapui and added .jks file with password in SSL Keystore in the soapui settings and I was able to successfuly post the message with a positive response.</p>\n<p>I am trying to replicate it with RestAssured using below code</p>\n<pre><code>resBuilder= new RequestSpecBuilder();\nresBuilder.setKeyStore(cert,password);\nresBuilder.setRelaxedHTTPSValidation(); \nRequestSpecification requestSpec = resBuilder.build();\n            response = given()\n            .spec(requestSpec)\n            .when()\n            .post(url);\n            da.addResponses(response);\n</code></pre>\n<p>When i execute the code, i am getting below error</p>\n<pre><code>&lt;env:Envelope xmlns:env=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\n  &lt;env:Body&gt;\n    &lt;env:Fault&gt;\n      &lt;faultcode&gt;No SSL Certificate Sent By Client&lt;/faultcode&gt;\n      &lt;faultstring&gt;Authorization Failure&lt;/faultstring&gt;\n    &lt;/env:Fault&gt;\n  &lt;/env:Body&gt;\n&lt;/env:Envelope&gt;\n&lt;env:Envelope xmlns:env=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\n  &lt;env:Body&gt;\n    &lt;env:Fault&gt;\n      &lt;faultcode&gt;No SSL Certificate Sent By Client&lt;/faultcode&gt;\n      &lt;faultstring&gt;Authorization Failure&lt;/faultstring&gt;\n    &lt;/env:Fault&gt;\n  &lt;/env:Body&gt;\n&lt;/env:Envelope&gt;\n</code></pre>\n<p>I tried to create trust store but chrome show certificate as invalid and not sure how to proceed further</p>\n"},{"tags":["java","jakarta-mail"],"answers":[{"tags":[],"owner":{"account_id":1612778,"reputation":2546,"user_id":1491278,"accept_rate":80,"display_name":"Grantly"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1413417237,"creation_date":1413417237,"answer_id":26394078,"question_id":26393906,"body_markdown":"Try smtp.gmail.com, and Port 587.  These are the settings I use. (With STARTTLS, but &#39;normal&#39; password for authentication....I believe your SSLOnConnect is fine the way it is)","title":"Error sending email with gmail","body":"<p>Try smtp.gmail.com, and Port 587.  These are the settings I use. (With STARTTLS, but 'normal' password for authentication....I believe your SSLOnConnect is fine the way it is)</p>\n"},{"tags":[],"owner":{"account_id":1032936,"reputation":29659,"user_id":1040885,"display_name":"Bill Shannon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1413433800,"creation_date":1413433800,"answer_id":26396248,"question_id":26393906,"body_markdown":"The JavaMail FAQ has [tips for debugging connection problems][1].\r\n\r\nMost likely there&#39;s a firewall or antivirus program preventing you from connecting.\r\n\r\n\r\n  [1]: http://www.oracle.com/technetwork/java/javamail/faq/index.html#condebug","title":"Error sending email with gmail","body":"<p>The JavaMail FAQ has <a href=\"http://www.oracle.com/technetwork/java/javamail/faq/index.html#condebug\" rel=\"nofollow\">tips for debugging connection problems</a>.</p>\n\n<p>Most likely there's a firewall or antivirus program preventing you from connecting.</p>\n"},{"tags":[],"owner":{"account_id":3340410,"reputation":5354,"user_id":2806819,"accept_rate":97,"display_name":"k_rollo"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1443840938,"creation_date":1420619434,"answer_id":27815241,"question_id":26393906,"body_markdown":"I believe that snippet is taken from the [Apache Commons Email API User Guide][1].\r\n\r\nGMail blocks **`Access for less secure apps`** by default for security reasons so this might be causing your problem (as it did mine).\r\n\r\nLog in to your GMail account and go to this URL:\r\n\r\n`https://www.google.com/settings/security/lesssecureapps`\r\n\r\n![enter image description here][2]\r\n\r\nSet to **`Enable`**.\r\n\r\n    Email email = new SimpleEmail();\r\n    \r\n    try {\r\n    \temail.setHostName(&quot;smtp.googlemail.com&quot;);\r\n    \temail.setSmtpPort(465);\r\n    \temail.setAuthenticator(\r\n    \t\tnew DefaultAuthenticator(&quot;hogwarts-mailer@gmail.com&quot;, &quot;password&quot;));\r\n    \temail.setSSLOnConnect(true); // disable in case of EmailException\r\n    \temail.setFrom(&quot;hogwarts-school@gmail.com&quot;, &quot;Hogwarts School&quot;);\r\n    \temail.setSubject(&quot;Hogwarts Acceptance Letter&quot;);\r\n    \temail.setMsg(&quot;We are pleased to inform you that you have a place at &quot;\r\n    \t\t+ &quot;Hogwarts School of Witchcraft and Wizardry.&quot;);\r\n    \temail.addTo(&quot;harry-potter@hedwig.com&quot;);\r\n    \temail.send();\r\n    \r\n    } catch(EmailException ee) {\r\n    \tee.printStackTrace();\r\n    }\r\n\r\n&gt; **DISCLAIMER:**\r\n&gt; \r\n&gt; By doing so, you have disabled one of GMail&#39;s security features.\r\n&gt; Proceed at your own risk (or use a dummy email).\r\n\r\n**Related reading:** [Sending E-Mail Using GMail SMTP via Apache Commons Emails][3]\r\n\r\n\r\n  [1]: http://commons.apache.org/proper/commons-email/userguide.html\r\n  [2]: http://i.stack.imgur.com/qVSE6.png\r\n  [3]: https://gerrydevstory.com/2013/07/26/sending-e-mail-using-gmail-smtp-via-apache-commons-emails/","title":"Error sending email with gmail","body":"<p>I believe that snippet is taken from the <a href=\"http://commons.apache.org/proper/commons-email/userguide.html\" rel=\"noreferrer\">Apache Commons Email API User Guide</a>.</p>\n\n<p>GMail blocks <strong><code>Access for less secure apps</code></strong> by default for security reasons so this might be causing your problem (as it did mine).</p>\n\n<p>Log in to your GMail account and go to this URL:</p>\n\n<p><code>https://www.google.com/settings/security/lesssecureapps</code></p>\n\n<p><img src=\"https://i.stack.imgur.com/qVSE6.png\" alt=\"enter image description here\"></p>\n\n<p>Set to <strong><code>Enable</code></strong>.</p>\n\n<pre><code>Email email = new SimpleEmail();\n\ntry {\n    email.setHostName(\"smtp.googlemail.com\");\n    email.setSmtpPort(465);\n    email.setAuthenticator(\n        new DefaultAuthenticator(\"hogwarts-mailer@gmail.com\", \"password\"));\n    email.setSSLOnConnect(true); // disable in case of EmailException\n    email.setFrom(\"hogwarts-school@gmail.com\", \"Hogwarts School\");\n    email.setSubject(\"Hogwarts Acceptance Letter\");\n    email.setMsg(\"We are pleased to inform you that you have a place at \"\n        + \"Hogwarts School of Witchcraft and Wizardry.\");\n    email.addTo(\"harry-potter@hedwig.com\");\n    email.send();\n\n} catch(EmailException ee) {\n    ee.printStackTrace();\n}\n</code></pre>\n\n<blockquote>\n  <p><strong>DISCLAIMER:</strong></p>\n  \n  <p>By doing so, you have disabled one of GMail's security features.\n  Proceed at your own risk (or use a dummy email).</p>\n</blockquote>\n\n<p><strong>Related reading:</strong> <a href=\"https://gerrydevstory.com/2013/07/26/sending-e-mail-using-gmail-smtp-via-apache-commons-emails/\" rel=\"noreferrer\">Sending E-Mail Using GMail SMTP via Apache Commons Emails</a></p>\n"},{"tags":[],"owner":{"account_id":14555019,"reputation":11,"user_id":10512808,"display_name":"Krishnendu Das"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1539693160,"creation_date":1539693160,"answer_id":52835567,"question_id":26393906,"body_markdown":"Not required to put it in try and catch only changing the settings in gmail to allow lesser secure apps will do.\r\n\r\nJust go to:\r\n\r\n1.My account&gt;&gt;Sign in &amp; Security&gt;&gt;Scroll to the bottom of the page and u will see the section:&quot;**Allow less secure apps: OFF**&quot;\r\n\r\n2.**Just turn it on** and it will be done.\r\n\r\nImg:[Secure access image][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ikgGP.png","title":"Error sending email with gmail","body":"<p>Not required to put it in try and catch only changing the settings in gmail to allow lesser secure apps will do.</p>\n\n<p>Just go to:</p>\n\n<p>1.My account>>Sign in &amp; Security>>Scroll to the bottom of the page and u will see the section:\"<strong>Allow less secure apps: OFF</strong>\"</p>\n\n<p>2.<strong>Just turn it on</strong> and it will be done.</p>\n\n<p>Img:<a href=\"https://i.stack.imgur.com/ikgGP.png\" rel=\"nofollow noreferrer\">Secure access image</a></p>\n"},{"tags":[],"owner":{"account_id":361261,"reputation":5134,"user_id":703742,"accept_rate":62,"display_name":"Ondřej Z"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1563714939,"creation_date":1563714939,"answer_id":57133574,"question_id":26393906,"body_markdown":"This happened to me as well when I tried to send email from `ktor` server app using `SimpleEmail`. The difference in my case was that I had my email at custom g-suit domain with 2-step verification turned on and I couldn&#39;t use &quot;less secure apps&quot; settings: \r\n\r\n&gt; This setting is not available for accounts with 2-Step Verification enabled. Such accounts require an application-specific password for less secure apps access\r\n\r\nI generated app spefific password and used it instead of my main gmail password and it worked.\r\n\r\n            val email = SimpleEmail()\r\n            email.hostName = &quot;smtp.gmail.com&quot;\r\n            email.setSmtpPort(587)\r\n            email.setAuthenticator(DefaultAuthenticator(&quot;info@customdomain.app&quot;, &quot;APPLICATION_SPECIFIC_PASSWORD&quot;))\r\n            email.isSSLOnConnect = true\r\n            email.setFrom(&quot;info@customdomain.app&quot;)\r\n            email.subject = &quot;TestMail&quot;\r\n            email.setMsg(&quot;This is a test mail... :-)&quot;)\r\n            email.addTo(&quot;foo@bar.com&quot;)\r\n            email.send()\r\n\r\n[Create app password info][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/26393906/error-sending-email-with-gmail#","title":"Error sending email with gmail","body":"<p>This happened to me as well when I tried to send email from <code>ktor</code> server app using <code>SimpleEmail</code>. The difference in my case was that I had my email at custom g-suit domain with 2-step verification turned on and I couldn't use \"less secure apps\" settings: </p>\n\n<blockquote>\n  <p>This setting is not available for accounts with 2-Step Verification enabled. Such accounts require an application-specific password for less secure apps access</p>\n</blockquote>\n\n<p>I generated app spefific password and used it instead of my main gmail password and it worked.</p>\n\n<pre><code>        val email = SimpleEmail()\n        email.hostName = \"smtp.gmail.com\"\n        email.setSmtpPort(587)\n        email.setAuthenticator(DefaultAuthenticator(\"info@customdomain.app\", \"APPLICATION_SPECIFIC_PASSWORD\"))\n        email.isSSLOnConnect = true\n        email.setFrom(\"info@customdomain.app\")\n        email.subject = \"TestMail\"\n        email.setMsg(\"This is a test mail... :-)\")\n        email.addTo(\"foo@bar.com\")\n        email.send()\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/26393906/error-sending-email-with-gmail#\">Create app password info</a></p>\n"},{"tags":[],"owner":{"account_id":16811709,"reputation":111,"user_id":12154574,"display_name":"Bhushan Maniyar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660125339,"creation_date":1660125074,"answer_id":73304160,"question_id":26393906,"body_markdown":"Since Google has [disabled 3rd party app access][1] \r\nyou may need to create an App password and use that in your application it may work.\r\n\r\nyou can create an app password from [here][2].\r\n\r\n        val email = SimpleEmail()\r\n        email.hostName = &quot;smtp.googlemail.com&quot;\r\n        email.setSmtpPort(587)\r\n        email.setAuthenticator(DefaultAuthenticator(&quot;YOUR_EMAIL&quot;, &quot;APP_PASSWORD&quot;))\r\n        email.isSSLOnConnect = true\r\n        email.setFrom(&quot;YOUR_EMAIL&quot;)\r\n        email.subject = &quot;Test Email&quot;\r\n        email.setMsg(&quot;Mail testing&quot;)\r\n        email.addTo(&quot;recipient email.&quot;)\r\n        val mime = email.send()\r\n\r\n\r\n  [1]: https://support.google.com/accounts/answer/6010255?hl=en\r\n  [2]: https://accounts.google.com/signin/v2/challenge/pwd?continue=https%3A%2F%2Fmyaccount.google.com%2Fapppasswords&amp;service=accountsettings&amp;osid=1&amp;rart=ANgoxcf0Bi2LMC3PfA_buymp7cr6zttuf3s0GKX26mTjAb7soNBk5SgJoY3kMhO9OFrmtZule3EnekoTt2AQ65WWki3v3f-_cQ&amp;TL=AKqFyY-suXe8pgwBrVNdDnOxa7uuWkETRHttd-quPmG1yfUM4Fbfx-86tJgWA_uW&amp;flowName=GlifWebSignIn&amp;cid=1&amp;flowEntry=ServiceLogin","title":"Error sending email with gmail","body":"<p>Since Google has <a href=\"https://support.google.com/accounts/answer/6010255?hl=en\" rel=\"nofollow noreferrer\">disabled 3rd party app access</a>\nyou may need to create an App password and use that in your application it may work.</p>\n<p>you can create an app password from <a href=\"https://accounts.google.com/signin/v2/challenge/pwd?continue=https%3A%2F%2Fmyaccount.google.com%2Fapppasswords&amp;service=accountsettings&amp;osid=1&amp;rart=ANgoxcf0Bi2LMC3PfA_buymp7cr6zttuf3s0GKX26mTjAb7soNBk5SgJoY3kMhO9OFrmtZule3EnekoTt2AQ65WWki3v3f-_cQ&amp;TL=AKqFyY-suXe8pgwBrVNdDnOxa7uuWkETRHttd-quPmG1yfUM4Fbfx-86tJgWA_uW&amp;flowName=GlifWebSignIn&amp;cid=1&amp;flowEntry=ServiceLogin\" rel=\"nofollow noreferrer\">here</a>.</p>\n<pre><code>    val email = SimpleEmail()\n    email.hostName = &quot;smtp.googlemail.com&quot;\n    email.setSmtpPort(587)\n    email.setAuthenticator(DefaultAuthenticator(&quot;YOUR_EMAIL&quot;, &quot;APP_PASSWORD&quot;))\n    email.isSSLOnConnect = true\n    email.setFrom(&quot;YOUR_EMAIL&quot;)\n    email.subject = &quot;Test Email&quot;\n    email.setMsg(&quot;Mail testing&quot;)\n    email.addTo(&quot;recipient email.&quot;)\n    val mime = email.send()\n</code></pre>\n"}],"owner":{"account_id":4153066,"reputation":21,"user_id":3404957,"accept_rate":25,"display_name":"Ruth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11907,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":6,"score":0,"last_activity_date":1660125339,"creation_date":1413416301,"question_id":26393906,"body_markdown":"I have the following code:\r\n      \r\n     Email email = new SimpleEmail();\r\n    \temail.setHostName(&quot;smtp.googlemail.com&quot;);\r\n    \temail.setSmtpPort(465);\r\n    \temail.setAuthenticator(new DefaultAuthenticator(&quot;ruth.sistem@gmail.com&quot;, &quot;XXXXXX&quot;));\r\n    \temail.setSSLOnConnect(true);\r\n    \temail.setFrom(&quot;ruth.sistem@gmail.com&quot;);\r\n    \temail.setSubject(&quot;TestMail&quot;);\r\n    \temail.setMsg(&quot;This is a test mail ... :-)&quot;);\r\n    \temail.addTo(&quot;ruth.sistem@gmail.com&quot;);\r\n    \temail.send();\r\n\r\nI can not connect to gmail, an error burst with connection appears, however all connection information are correct, do not know what is blocking the connection from my code for sending the email, I can not send a simple email and I do not slightest idea what it is.\r\n\r\n\r\n     org.apache.commons.mail.EmailException: Sending the email to the following server failed :                                                          smtp.googlemail.com:465\r\n\tat org.apache.commons.mail.Email.sendMimeMessage(Email.java:1410)\r\n\tat org.apache.commons.mail.Email.send(Email.java:1437)\r\n\tat com.observatorioLegislativo.util.EmailTeste.enviaEmailSimples(EmailTeste.java:27)\r\n\tat com.observatorioLegislativo.util.EmailTeste.&lt;init&gt;(EmailTeste.java:13)\r\n\tat com.observatorioLegislativo.bean.Teste.main(Teste.java:41)\r\n    Caused by: javax.mail.MessagingException: Could not connect to SMTP host: smtp.googlemail.com,  port: 465;\r\n     nested exception is:\r\n\tjava.net.ConnectException: Connection timed out: connect\r\n\tat com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1972)\r\n\tat com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:642)\r\n\tat javax.mail.Service.connect(Service.java:317)\r\n\tat javax.mail.Service.connect(Service.java:176)\r\n\tat javax.mail.Service.connect(Service.java:125)\r\n\tat javax.mail.Transport.send0(Transport.java:194)\r\n\tat javax.mail.Transport.send(Transport.java:124)\r\n\tat org.apache.commons.mail.Email.sendMimeMessage(Email.java:1400)\r\n\t... 4 more\r\n\r\n\r\n    Caused by: java.net.ConnectException: Connection timed out: connect\r\n\tat java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)\r\n\tat java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)\r\n\tat java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)\r\n\tat java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)\r\n\tat java.net.AbstractPlainSocketImpl.connect(Unknown Source)\r\n\tat java.net.PlainSocketImpl.connect(Unknown Source)\r\n\tat java.net.SocksSocketImpl.connect(Unknown Source)\r\n\tat java.net.Socket.connect(Unknown Source)\r\n\tat sun.security.ssl.SSLSocketImpl.connect(Unknown Source)\r\n\tat com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:317)\r\n\tat com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:207)\r\n\tat com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1938)\r\n\t... 11 more\r\n\r\n\r\nappreciate the help\r\n    \t","title":"Error sending email with gmail","body":"<p>I have the following code:</p>\n\n<pre><code> Email email = new SimpleEmail();\n    email.setHostName(\"smtp.googlemail.com\");\n    email.setSmtpPort(465);\n    email.setAuthenticator(new DefaultAuthenticator(\"ruth.sistem@gmail.com\", \"XXXXXX\"));\n    email.setSSLOnConnect(true);\n    email.setFrom(\"ruth.sistem@gmail.com\");\n    email.setSubject(\"TestMail\");\n    email.setMsg(\"This is a test mail ... :-)\");\n    email.addTo(\"ruth.sistem@gmail.com\");\n    email.send();\n</code></pre>\n\n<p>I can not connect to gmail, an error burst with connection appears, however all connection information are correct, do not know what is blocking the connection from my code for sending the email, I can not send a simple email and I do not slightest idea what it is.</p>\n\n<pre><code> org.apache.commons.mail.EmailException: Sending the email to the following server failed :                                                          smtp.googlemail.com:465\nat org.apache.commons.mail.Email.sendMimeMessage(Email.java:1410)\nat org.apache.commons.mail.Email.send(Email.java:1437)\nat com.observatorioLegislativo.util.EmailTeste.enviaEmailSimples(EmailTeste.java:27)\nat com.observatorioLegislativo.util.EmailTeste.&lt;init&gt;(EmailTeste.java:13)\nat com.observatorioLegislativo.bean.Teste.main(Teste.java:41)\nCaused by: javax.mail.MessagingException: Could not connect to SMTP host: smtp.googlemail.com,  port: 465;\n nested exception is:\njava.net.ConnectException: Connection timed out: connect\nat com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1972)\nat com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:642)\nat javax.mail.Service.connect(Service.java:317)\nat javax.mail.Service.connect(Service.java:176)\nat javax.mail.Service.connect(Service.java:125)\nat javax.mail.Transport.send0(Transport.java:194)\nat javax.mail.Transport.send(Transport.java:124)\nat org.apache.commons.mail.Email.sendMimeMessage(Email.java:1400)\n... 4 more\n\n\nCaused by: java.net.ConnectException: Connection timed out: connect\nat java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)\nat java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)\nat java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)\nat java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)\nat java.net.AbstractPlainSocketImpl.connect(Unknown Source)\nat java.net.PlainSocketImpl.connect(Unknown Source)\nat java.net.SocksSocketImpl.connect(Unknown Source)\nat java.net.Socket.connect(Unknown Source)\nat sun.security.ssl.SSLSocketImpl.connect(Unknown Source)\nat com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:317)\nat com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:207)\nat com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1938)\n... 11 more\n</code></pre>\n\n<p>appreciate the help</p>\n"},{"tags":["java","validation","bean-validation","hibernate-validator"],"owner":{"account_id":1580105,"reputation":1275,"user_id":1465635,"accept_rate":50,"display_name":"Mauro Molinari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1660125111,"creation_date":1660063391,"question_id":73295372,"body_markdown":"Indeed, this is somewhat a duplicate of [a previous question][1], however I was wondering whether, after nine years and some new specification versions being published, the situation has changed in any way, or whether at least a non portable way to solve this problem exists (I mean: does Hibernate Validator allow to do this, even if the API does not?).\r\n\r\nThe question is: is there a way I can make my custom constraint validator detect the validation groups that were passed to the validator instance causing the validation to occur, by inspecting the `ConstraintValidatorContext`?\r\n\r\nExample, suppose I have my bean:\r\n\r\n```java\r\npublic class MyBean {\r\n\r\n  @MyConstraint(value = 5, groups = V1.class)\r\n  @MyConstraint(value = 10, groups = {V2.class, V3.class})\r\n  private int foo;\r\n\r\n  // cut\r\n}\r\n```\r\n\r\nand a validator call:\r\n\r\n```java\r\nvalidator.validateValue(MyBean.class, &quot;foo&quot;, 7, V2.class);\r\n```\r\n\r\ncan my constraint validator detect that `V2.class` validation group was requested, in this specific case?\r\n\r\n```java\r\npublic class MyConstraintValidator implements ConstraintValidator&lt;MyConstraint, Integer&gt; {\r\n\r\n  // cut\r\n\r\n  @Override\r\n  public boolean isValid(Integer value, ConstraintValidatorContext context) {\r\n    Class&lt;?&gt;[] requestedValidationGroups = // expected {V2.class} here, in case of the above call\r\n  }\r\n}\r\n```\r\n\r\nIn the `initialize` method I can get an information about the static declaration of the constraint annotation, so in the above example I could get `{V1.class}` or `{V2.class, V3.class}` depending on which of the two constraints the implementation detects as the one being applied. However, I would need to get just `{V2.class}` in this case.\r\n\r\nIs it possible in some way?\r\n\r\nLooking at Hibernate Validator 6.0 sources, I see I would need access to `org.hibernate.validator.internal.engine.ValueContext&lt;T, V&gt;`, in particular its `currentGroup` property, but neither this group nor the `ValueContext` itself is passed to the Hibernate Validator constraint validator context implementation implementation  (`org.hibernate.validator.internal.engine.constraintvalidation.ConstraintValidatorContextImpl`), whose creation, on the other hand, seems not to be customisable (there&#39;s a direct `new ConstraintValidatorContextImpl(...)` call in `org.hibernate.validator.internal.engine.constraintvalidation.SimpleConstraintTree.validateConstraints(ValidationContext&lt;T&gt;, ValueContext&lt;?, ?&gt;, Set&lt;ConstraintViolation&lt;T&gt;&gt;)`).\r\n\r\nAny further hint?\r\n\r\n  [1]: https://stackoverflow.com/questions/17385256/bean-validation-get-validation-groups","title":"Bean Validation API / Hibernate Validator: any way to detect the requested validation groups during validation?","body":"<p>Indeed, this is somewhat a duplicate of <a href=\"https://stackoverflow.com/questions/17385256/bean-validation-get-validation-groups\">a previous question</a>, however I was wondering whether, after nine years and some new specification versions being published, the situation has changed in any way, or whether at least a non portable way to solve this problem exists (I mean: does Hibernate Validator allow to do this, even if the API does not?).</p>\n<p>The question is: is there a way I can make my custom constraint validator detect the validation groups that were passed to the validator instance causing the validation to occur, by inspecting the <code>ConstraintValidatorContext</code>?</p>\n<p>Example, suppose I have my bean:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyBean {\n\n  @MyConstraint(value = 5, groups = V1.class)\n  @MyConstraint(value = 10, groups = {V2.class, V3.class})\n  private int foo;\n\n  // cut\n}\n</code></pre>\n<p>and a validator call:</p>\n<pre class=\"lang-java prettyprint-override\"><code>validator.validateValue(MyBean.class, &quot;foo&quot;, 7, V2.class);\n</code></pre>\n<p>can my constraint validator detect that <code>V2.class</code> validation group was requested, in this specific case?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyConstraintValidator implements ConstraintValidator&lt;MyConstraint, Integer&gt; {\n\n  // cut\n\n  @Override\n  public boolean isValid(Integer value, ConstraintValidatorContext context) {\n    Class&lt;?&gt;[] requestedValidationGroups = // expected {V2.class} here, in case of the above call\n  }\n}\n</code></pre>\n<p>In the <code>initialize</code> method I can get an information about the static declaration of the constraint annotation, so in the above example I could get <code>{V1.class}</code> or <code>{V2.class, V3.class}</code> depending on which of the two constraints the implementation detects as the one being applied. However, I would need to get just <code>{V2.class}</code> in this case.</p>\n<p>Is it possible in some way?</p>\n<p>Looking at Hibernate Validator 6.0 sources, I see I would need access to <code>org.hibernate.validator.internal.engine.ValueContext&lt;T, V&gt;</code>, in particular its <code>currentGroup</code> property, but neither this group nor the <code>ValueContext</code> itself is passed to the Hibernate Validator constraint validator context implementation implementation  (<code>org.hibernate.validator.internal.engine.constraintvalidation.ConstraintValidatorContextImpl</code>), whose creation, on the other hand, seems not to be customisable (there's a direct <code>new ConstraintValidatorContextImpl(...)</code> call in <code>org.hibernate.validator.internal.engine.constraintvalidation.SimpleConstraintTree.validateConstraints(ValidationContext&lt;T&gt;, ValueContext&lt;?, ?&gt;, Set&lt;ConstraintViolation&lt;T&gt;&gt;)</code>).</p>\n<p>Any further hint?</p>\n"},{"tags":["java","intellij-idea","lambda","java-8","jvm"],"comments":[{"owner":{"account_id":17693330,"reputation":3781,"user_id":12844632,"display_name":"Egor Klepikov"},"score":0,"creation_date":1660143364,"post_id":73304159,"comment_id":129464207,"body_markdown":"Please clarify what result you&#39;d like to see after evaluating expression. If possible prepare and provide a [minimal reproducible project sample](https://stackoverflow.com/help/minimal-reproducible-example) to investigate the problem.","body":"Please clarify what result you&#39;d like to see after evaluating expression. If possible prepare and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible project sample</a> to investigate the problem."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1661196382,"post_id":73304159,"comment_id":129710011,"body_markdown":"It looks like this Evaluate feature creates interface instances via [`MethodHandleProxies`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/invoke/MethodHandleProxies.html) which is a different (though similar) feature than the facility for statically compiled code (`LambdaMetafactory`). This is reasonable as the `SerializedLambda` requires an actual [capturing class](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/invoke/SerializedLambda.html#getCapturingClass()) which must declare a `$deserializeLambda$(SerializedLambda)` method for restoring.","body":"It looks like this Evaluate feature creates interface instances via <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/invoke/MethodHandleProxies.html\" rel=\"nofollow noreferrer\"><code>MethodHandleProxies</code></a> which is a different (though similar) feature than the facility for statically compiled code (<code>LambdaMetafactory</code>). This is reasonable as the <code>SerializedLambda</code> requires an actual <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/invoke/SerializedLambda.html#getCapturingClass()\" rel=\"nofollow noreferrer\">capturing class</a> which must declare a <code>$deserializeLambda$(SerializedLambda)</code> method for restoring."}],"owner":{"account_id":11459983,"reputation":39,"user_id":8399913,"display_name":"Old Letter"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660125072,"creation_date":1660125072,"question_id":73304159,"body_markdown":"1.Usual,in my program i Define a SerializedLambda  variable name lambda \r\n```java\r\n\t\tFunc1&lt;MyTeacher, String&gt; lambda = MyTeacher::getAge;\r\n```\r\nFunc1 is ```public interface Func1&lt;P, R&gt; extends Serializable```\r\n\r\nwhen i in idea debug i can use he following code get SerializedLambda  \r\n[![enter image description here][1]][1]\r\n\r\nBut when i  define a SerializedLambda  variable in Evaluate\r\n\r\nlike this and  I get a `com.sun.proxy.$Proxy4@7382f612` class  [![enter image description here][2]][2] \r\n\r\nI try to reflection，but it don&#39;t have `writeReplace` method,\r\nI use \r\n[![enter image description here][3]][3]\r\n```Field h = lambda.getClass().getSuperclass().getDeclaredField(&quot;h&quot;);\r\n  Field h = lambda.getClass().getSuperclass().getDeclaredField(&quot;h&quot;);\r\nh.setAccessible(true);\r\nh.get(lambda)\r\n\r\n```\r\nbut i don&#39;t,what should i do if i want get SerializedLambda  \r\n\r\n  [1]: https://i.stack.imgur.com/jeTOP.png\r\n  [2]: https://i.stack.imgur.com/pjvSN.png\r\n  [3]: https://i.stack.imgur.com/hGdCO.png","title":"In jetbrains idea，how to get SerializedLambda in debug mode","body":"<p>1.Usual,in my program i Define a SerializedLambda  variable name lambda</p>\n<pre class=\"lang-java prettyprint-override\"><code>        Func1&lt;MyTeacher, String&gt; lambda = MyTeacher::getAge;\n</code></pre>\n<p>Func1 is <code>public interface Func1&lt;P, R&gt; extends Serializable</code></p>\n<p>when i in idea debug i can use he following code get SerializedLambda<br />\n<a href=\"https://i.stack.imgur.com/jeTOP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jeTOP.png\" alt=\"enter image description here\" /></a></p>\n<p>But when i  define a SerializedLambda  variable in Evaluate</p>\n<p>like this and  I get a <code>com.sun.proxy.$Proxy4@7382f612</code> class  <a href=\"https://i.stack.imgur.com/pjvSN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pjvSN.png\" alt=\"enter image description here\" /></a></p>\n<p>I try to reflection，but it don't have <code>writeReplace</code> method,\nI use\n<a href=\"https://i.stack.imgur.com/hGdCO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hGdCO.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>  Field h = lambda.getClass().getSuperclass().getDeclaredField(&quot;h&quot;);\nh.setAccessible(true);\nh.get(lambda)\n\n</code></pre>\n<p>but i don't,what should i do if i want get SerializedLambda</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"score":0,"creation_date":1649446287,"post_id":71802056,"comment_id":126886570,"body_markdown":"Please, post your code, not images. It is significantly easier for others to copy-paste your code to test it rather than writing all down.\n\nAlso, how are you getting this error (What do you do to get it)? Provide your POM file as well.","body":"Please, post your code, not images. It is significantly easier for others to copy-paste your code to test it rather than writing all down.  Also, how are you getting this error (What do you do to get it)? Provide your POM file as well."},{"owner":{"account_id":5428050,"reputation":103,"user_id":4319757,"accept_rate":25,"display_name":"Rohit Kumar"},"score":0,"creation_date":1649446744,"post_id":71802056,"comment_id":126886692,"body_markdown":"Have updated the Q with code snippets and POM.xml file. This error is coming when I am trying to run this project as Run as &quot;Run on Server&quot;.","body":"Have updated the Q with code snippets and POM.xml file. This error is coming when I am trying to run this project as Run as &quot;Run on Server&quot;."},{"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"score":0,"creation_date":1649447607,"post_id":71802056,"comment_id":126886953,"body_markdown":"I&#39;ve just created a project with the same dependencies and the `pom.xml` differs from yours. Did you modified anything from this file? Usually, with the `spring-web` dependency, you&#39;ll find the embedded tomcat, so you can run the project without a standalone server.","body":"I&#39;ve just created a project with the same dependencies and the <code>pom.xml</code> differs from yours. Did you modified anything from this file? Usually, with the <code>spring-web</code> dependency, you&#39;ll find the embedded tomcat, so you can run the project without a standalone server."},{"owner":{"account_id":5428050,"reputation":103,"user_id":4319757,"accept_rate":25,"display_name":"Rohit Kumar"},"score":1,"creation_date":1649450637,"post_id":71802056,"comment_id":126887715,"body_markdown":"Thanks a lot. Didn&#39;t know that Spring Boot can be executed as  Run as Application due to Embedded Tomcat Container. I generated the project again from the https://start.spring.io/ and updated the code as above &amp; then executed as Run as Application. It worked.","body":"Thanks a lot. Didn&#39;t know that Spring Boot can be executed as  Run as Application due to Embedded Tomcat Container. I generated the project again from the <a href=\"https://start.spring.io/\" rel=\"nofollow noreferrer\">start.spring.io</a> and updated the code as above &amp; then executed as Run as Application. It worked."}],"answers":[{"tags":[],"owner":{"account_id":6115769,"reputation":29,"user_id":4770872,"display_name":"Desi boys"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1649448718,"creation_date":1649446049,"answer_id":71802252,"question_id":71802056,"body_markdown":"I have modified your code as below:  \r\n```\r\n@RequestMapping\r\n@RestController\r\npublic class ThisWorldSpringContainer {\r\n\t\r\n\t@GetMapping(value = &quot;/hello-world&quot;)\r\n    public String getWelcome() {\r\n        \r\n        return &quot;Hello World&quot;;\r\n    }\r\n\r\n}\r\n```\r\nI thinking you are missing \r\n\r\n    @Requestmapping\r\n\r\n in classlevel\r\n","title":"Simple Spring Boot Project is giving 404 Error","body":"<p>I have modified your code as below:</p>\n<pre><code>@RequestMapping\n@RestController\npublic class ThisWorldSpringContainer {\n    \n    @GetMapping(value = &quot;/hello-world&quot;)\n    public String getWelcome() {\n        \n        return &quot;Hello World&quot;;\n    }\n\n}\n</code></pre>\n<p>I thinking you are missing</p>\n<pre><code>@Requestmapping\n</code></pre>\n<p>in classlevel</p>\n"},{"tags":[],"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1649448604,"creation_date":1649448604,"answer_id":71802676,"question_id":71802056,"body_markdown":"Since you don&#39;t have the Tomcat dependency, I&#39;m implying that you want your application to run in a standalone Tomcat instance. Also, given your comment, I believe you&#39;re working on either Eclipse or Spring Tools Suite (Which is the same, really).\r\n\r\nWith that, it seems your problem is the lack of a packaging method. Tomcat needs the code its going to run in a package. This package is a zip-like file with `.war` extension. Maven, the program that handles the dependencies of your project according to the `pom.xml` file, can package it in either `war` of `jar` format. Since you are running it in an external Tomcat, you want the `war` extension. So please, add the following line to your `pom.xml` file. It has to be in the same level as `&lt;name&gt;`:\r\n\r\n```xml\r\n&lt;packaging&gt;war&lt;/packaging&gt;\r\n```\r\n\r\nThen, update your project (Alt + F5, check your project and hit OK) then try running your project again. You should see an stylish &quot;SPRING&quot; output in your console. \r\n\r\nNow, since you are running this externally, you need to specify the name of the project, so you should call your endpoint with\r\n\r\n`http://localhost:8080/&lt;your_project_name_here&gt;/hello-world`","title":"Simple Spring Boot Project is giving 404 Error","body":"<p>Since you don't have the Tomcat dependency, I'm implying that you want your application to run in a standalone Tomcat instance. Also, given your comment, I believe you're working on either Eclipse or Spring Tools Suite (Which is the same, really).</p>\n<p>With that, it seems your problem is the lack of a packaging method. Tomcat needs the code its going to run in a package. This package is a zip-like file with <code>.war</code> extension. Maven, the program that handles the dependencies of your project according to the <code>pom.xml</code> file, can package it in either <code>war</code> of <code>jar</code> format. Since you are running it in an external Tomcat, you want the <code>war</code> extension. So please, add the following line to your <code>pom.xml</code> file. It has to be in the same level as <code>&lt;name&gt;</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;packaging&gt;war&lt;/packaging&gt;\n</code></pre>\n<p>Then, update your project (Alt + F5, check your project and hit OK) then try running your project again. You should see an stylish &quot;SPRING&quot; output in your console.</p>\n<p>Now, since you are running this externally, you need to specify the name of the project, so you should call your endpoint with</p>\n<p><code>http://localhost:8080/&lt;your_project_name_here&gt;/hello-world</code></p>\n"},{"tags":[],"owner":{"account_id":9438623,"reputation":11,"user_id":7019867,"display_name":"Mathieu Vibert"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660125000,"creation_date":1660124430,"answer_id":73304031,"question_id":71802056,"body_markdown":"I advise you to check this new change in Spring Boot 2.6 :\r\n\r\n[PathPattern Based Path Matching Strategy for Spring MVC][1]\r\n\r\nIn this release, the default strategy for matching request paths against registered Spring MVC handler mappings has changed from **AntPathMatcher** to **PathPatternParser**.\r\n\r\nIf you need to switch the default strategy back to **AntPathMatcher**, you can set the property **spring.mvc.pathmatch.matching-strategy** to **ant-path-matcher** as in the line below to add in the file **application.properties** :\r\n\r\n    spring.mvc.pathmatch.matching-strategy=ant-path-matcher\r\n\r\nI encountered the same issue of HTTP 404 error when upgrading to Spring Boot 2.6 and adding this property solved my problem and should solve yours.\r\n\r\n\r\n  [1]: https://[https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.6-Release-Notes#pathpattern-based-path-matching-strategy-for-spring-mvc]","title":"Simple Spring Boot Project is giving 404 Error","body":"<p>I advise you to check this new change in Spring Boot 2.6 :</p>\n<p><a href=\"https://%5Bhttps://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.6-Release-Notes#pathpattern-based-path-matching-strategy-for-spring-mvc%5D\" rel=\"nofollow noreferrer\">PathPattern Based Path Matching Strategy for Spring MVC</a></p>\n<p>In this release, the default strategy for matching request paths against registered Spring MVC handler mappings has changed from <strong>AntPathMatcher</strong> to <strong>PathPatternParser</strong>.</p>\n<p>If you need to switch the default strategy back to <strong>AntPathMatcher</strong>, you can set the property <strong>spring.mvc.pathmatch.matching-strategy</strong> to <strong>ant-path-matcher</strong> as in the line below to add in the file <strong>application.properties</strong> :</p>\n<pre><code>spring.mvc.pathmatch.matching-strategy=ant-path-matcher\n</code></pre>\n<p>I encountered the same issue of HTTP 404 error when upgrading to Spring Boot 2.6 and adding this property solved my problem and should solve yours.</p>\n"}],"owner":{"account_id":5428050,"reputation":103,"user_id":4319757,"accept_rate":25,"display_name":"Rohit Kumar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4162,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1660125000,"creation_date":1649444802,"question_id":71802056,"body_markdown":"I am learning Spring Boot but I am not able to execute the basic &quot;Hello World&quot; program. I have built the basic project using https://start.spring.io/ and updated the code as per below code snippets:\r\n\r\nSpring Boot Main Class:\r\n\r\n    package com.rohit.springboot.practice.selfspringboot;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    \r\n    \r\n    @SpringBootApplication\r\n    @ComponentScan(basePackages = &quot;com.rohit.springboot.practice.selfspringboot&quot;)\r\n    public class SelfSpringBootApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(SelfSpringBootApplication.class, args);\r\n    \t}\r\n    \r\n    }\r\n\r\nController Class:\r\n\r\n    package com.rohit.springboot.practice.selfspringboot;\r\n    \r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RequestMethod;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n    @RestController\r\n    public class ThisWorldSpringContainer {\r\n    \t\r\n    \t\r\n    \t@RequestMapping(method = RequestMethod.GET, value = &quot;/hello-world&quot;)\r\n    \tpublic String getWelcome() {\r\n    \t\t\r\n    \t\treturn &quot;Hello World&quot;;\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n\r\nPOM.xml file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.6.6&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.rohit.springboot.practice&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;self-spring-boot&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;self-spring-boot&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;8&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\nError:\r\n\r\n    Message: The requested resource [/hello-world] is not available\r\n\r\nI know this question has been asked by multiple people but i have gone through those answers and tried those given answers but didn&#39;t work. \r\n\r\nTechnologies used are Java 8, Tomcat 9, Spring Boot 2.6.6 etc. \r\n\r\nKindly help.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Stu97.png\r\n  [2]: https://i.stack.imgur.com/V0QuD.png","title":"Simple Spring Boot Project is giving 404 Error","body":"<p>I am learning Spring Boot but I am not able to execute the basic &quot;Hello World&quot; program. I have built the basic project using <a href=\"https://start.spring.io/\" rel=\"nofollow noreferrer\">https://start.spring.io/</a> and updated the code as per below code snippets:</p>\n<p>Spring Boot Main Class:</p>\n<pre><code>package com.rohit.springboot.practice.selfspringboot;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.ComponentScan;\n\n\n@SpringBootApplication\n@ComponentScan(basePackages = &quot;com.rohit.springboot.practice.selfspringboot&quot;)\npublic class SelfSpringBootApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(SelfSpringBootApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>Controller Class:</p>\n<pre><code>package com.rohit.springboot.practice.selfspringboot;\n\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class ThisWorldSpringContainer {\n    \n    \n    @RequestMapping(method = RequestMethod.GET, value = &quot;/hello-world&quot;)\n    public String getWelcome() {\n        \n        return &quot;Hello World&quot;;\n    }\n\n}\n</code></pre>\n<p>POM.xml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.6&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.rohit.springboot.practice&lt;/groupId&gt;\n    &lt;artifactId&gt;self-spring-boot&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;self-spring-boot&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Error:</p>\n<pre><code>Message: The requested resource [/hello-world] is not available\n</code></pre>\n<p>I know this question has been asked by multiple people but i have gone through those answers and tried those given answers but didn't work.</p>\n<p>Technologies used are Java 8, Tomcat 9, Spring Boot 2.6.6 etc.</p>\n<p>Kindly help.</p>\n"},{"tags":["java","spring-boot","oop","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1660062590,"post_id":73295169,"comment_id":129442164,"body_markdown":"*but this doesnt work* is not an error description. Do you get any error? `tagRepository.save(updatedTag)` should return the updated object. So try `return tagRepository.save(updatedTag)`","body":"<i>but this doesnt work</i> is not an error description. Do you get any error? <code>tagRepository.save(updatedTag)</code> should return the updated object. So try <code>return tagRepository.save(updatedTag)</code>"},{"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"score":0,"creation_date":1660064985,"post_id":73295169,"comment_id":129442955,"body_markdown":"You are also casting a `Product` to a `List&lt;Product&gt;` why?","body":"You are also casting a <code>Product</code> to a <code>List&lt;Product&gt;</code> why?"},{"owner":{"account_id":2862360,"reputation":814,"user_id":2457352,"accept_rate":80,"display_name":"David SK"},"score":0,"creation_date":1660070899,"post_id":73295169,"comment_id":129444864,"body_markdown":"Reconsider the logic of your method. if you&#39;re trying to add a product to the tag, or a tag to the product, consider changing the method name to addProduct, addTag. If you&#39;re updating the entire entity, consider using a list as a parameter.","body":"Reconsider the logic of your method. if you&#39;re trying to add a product to the tag, or a tag to the product, consider changing the method name to addProduct, addTag. If you&#39;re updating the entire entity, consider using a list as a parameter."}],"answers":[{"tags":[],"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660069554,"creation_date":1660066357,"answer_id":73295922,"question_id":73295169,"body_markdown":"You want to ADD the product to the list, not cast the `Product` to a `List`.  Also, consider renaming your `product` variable in `Tag` to `products` because it is a `Collection` of `Product`.  Also, you should consider using a `Set` for your `ManyToMany` mappings.  Dig around on the interwebs to understand the differences of `List` vs `Set` for `OneToMany` and `ManyToMany` mappings.\r\n\r\n    public Tag update(Long productID, Long tagID, Tag tag){\r\n\r\n      Tag udpatedTag = tagRepository.findById(tagID).get();\r\n      Product product = productRepository.findById(productID).get();\r\n\r\n      // Get the Collection and add the product to it\r\n      updatedTag.getProduct().add(product);\r\n      tagRepository.save(updatedTag)\r\n\r\n      return updatedTag;\r\n    }","title":"Spring boot - set one entity to list in another entity. ManyToMany relationship","body":"<p>You want to ADD the product to the list, not cast the <code>Product</code> to a <code>List</code>.  Also, consider renaming your <code>product</code> variable in <code>Tag</code> to <code>products</code> because it is a <code>Collection</code> of <code>Product</code>.  Also, you should consider using a <code>Set</code> for your <code>ManyToMany</code> mappings.  Dig around on the interwebs to understand the differences of <code>List</code> vs <code>Set</code> for <code>OneToMany</code> and <code>ManyToMany</code> mappings.</p>\n<pre><code>public Tag update(Long productID, Long tagID, Tag tag){\n\n  Tag udpatedTag = tagRepository.findById(tagID).get();\n  Product product = productRepository.findById(productID).get();\n\n  // Get the Collection and add the product to it\n  updatedTag.getProduct().add(product);\n  tagRepository.save(updatedTag)\n\n  return updatedTag;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25984152,"reputation":1,"user_id":19697342,"display_name":"Abdullah Uguz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660073451,"creation_date":1660073451,"answer_id":73297163,"question_id":73295169,"body_markdown":"If you want to use many to many structures, you need to create a separate table.\r\n\r\n\r\nFor example ;\r\n[enter image description here][1]\r\n\r\n[1]: https://i.stack.imgur.com/hqS6v.jpg\r\n\r\nYou can check this site -&gt; https://www.bezkoder.com/jpa-many-to-many/\r\n","title":"Spring boot - set one entity to list in another entity. ManyToMany relationship","body":"<p>If you want to use many to many structures, you need to create a separate table.</p>\n<p>For example ;\n<a href=\"https://i.stack.imgur.com/hqS6v.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>You can check this site -&gt; <a href=\"https://www.bezkoder.com/jpa-many-to-many/\" rel=\"nofollow noreferrer\">https://www.bezkoder.com/jpa-many-to-many/</a></p>\n"},{"tags":[],"owner":{"account_id":15413608,"reputation":99,"user_id":11529048,"display_name":"Akhil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660123996,"creation_date":1660117671,"answer_id":73302583,"question_id":73295169,"body_markdown":"As Iane.maxwell suggested its better if you create a seperate tablelike this :\r\n\r\nProduct 1---M Product_Tag M----1 Tag\r\n\r\nSo that you have control of that table. But if you want to use @ManyToMany annotation don&#39;t forget to use mappedBy inside the annotation or it will create 2 tables i.e product_tag and tag_product.\r\n\r\n\r\nI did what Iane.maxwell suggested and I got the output like this :\r\n\r\n    {\r\n        &quot;id&quot;: 1,\r\n        &quot;tagName&quot;: &quot;tag-1&quot;,\r\n        &quot;product&quot;: [\r\n            {\r\n                &quot;id&quot;: 1,\r\n                &quot;productName&quot;: &quot;product-1&quot;,\r\n                &quot;tag&quot;: []\r\n            }\r\n        ]\r\n    }","title":"Spring boot - set one entity to list in another entity. ManyToMany relationship","body":"<p>As Iane.maxwell suggested its better if you create a seperate tablelike this :</p>\n<p>Product 1---M Product_Tag M----1 Tag</p>\n<p>So that you have control of that table. But if you want to use @ManyToMany annotation don't forget to use mappedBy inside the annotation or it will create 2 tables i.e product_tag and tag_product.</p>\n<p>I did what Iane.maxwell suggested and I got the output like this :</p>\n<pre><code>{\n    &quot;id&quot;: 1,\n    &quot;tagName&quot;: &quot;tag-1&quot;,\n    &quot;product&quot;: [\n        {\n            &quot;id&quot;: 1,\n            &quot;productName&quot;: &quot;product-1&quot;,\n            &quot;tag&quot;: []\n        }\n    ]\n}\n</code></pre>\n"}],"owner":{"account_id":23727935,"reputation":117,"user_id":17747601,"display_name":"m_novak"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1580,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1660123996,"creation_date":1660062352,"question_id":73295169,"body_markdown":"I have two entities Product and Tag. The relationship between them is ManyToMany, so one product can have multiple tags and one tag can be assigned to multiple products. The way the application works is that Product and Tag are created first and then assigned through PutMapping.\r\n\r\nSo my question is how can I assign Product to the List of Products in Tag Entity?\r\n\r\nEntities:\r\n\r\n    public class Product {\r\n    \t@Id\r\n    \t@GeneratedValue(strategy = GenerationType.AUTO)\r\n    \tprivate Long id;\r\n    \tprivate String productName;\r\n    \t@ManyToMany\r\n    \tprivate List&lt;Tag&gt; tag;\r\n    }\r\n    \r\n    public class Tag{\r\n    \t@Id\r\n    \t@GeneratedValue(strategy = GenerationType.AUTO)\r\n    \tprivate Long id;\r\n    \tprivate String tagName;\r\n    \t@ManyToMany\r\n    \tprivate List&lt;Product&gt; product;\r\n    }\r\n\r\nAnd methods that assign Product to the List in Tag and updates it, but this doesnt work.\r\nFirst Im trying to find the existing Tag and Product and then set the product to the List in Tag entity.\r\n\r\n    public Tag update(Long productID, Long tagID, Tag tag){\r\n    \r\n     Tag udpatedTag = tagRepository.findById(tagID).get();\r\n     Product product = productRepository.findById(productID).get();\r\n    \r\n     updatedTag.setProduct((List &lt;Product&gt;) product);\r\n     tagRepository.save(updatedTag)\r\n    \r\n     return updatedTag;\r\n    }\r\n\r\n","title":"Spring boot - set one entity to list in another entity. ManyToMany relationship","body":"<p>I have two entities Product and Tag. The relationship between them is ManyToMany, so one product can have multiple tags and one tag can be assigned to multiple products. The way the application works is that Product and Tag are created first and then assigned through PutMapping.</p>\n<p>So my question is how can I assign Product to the List of Products in Tag Entity?</p>\n<p>Entities:</p>\n<pre><code>public class Product {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    private String productName;\n    @ManyToMany\n    private List&lt;Tag&gt; tag;\n}\n\npublic class Tag{\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    private String tagName;\n    @ManyToMany\n    private List&lt;Product&gt; product;\n}\n</code></pre>\n<p>And methods that assign Product to the List in Tag and updates it, but this doesnt work.\nFirst Im trying to find the existing Tag and Product and then set the product to the List in Tag entity.</p>\n<pre><code>public Tag update(Long productID, Long tagID, Tag tag){\n\n Tag udpatedTag = tagRepository.findById(tagID).get();\n Product product = productRepository.findById(productID).get();\n\n updatedTag.setProduct((List &lt;Product&gt;) product);\n tagRepository.save(updatedTag)\n\n return updatedTag;\n}\n</code></pre>\n"},{"tags":["java","unit-testing","mockito"],"comments":[{"owner":{"account_id":944889,"reputation":878,"user_id":972314,"accept_rate":48,"display_name":"sree"},"score":0,"creation_date":1664118928,"post_id":73303939,"comment_id":130393421,"body_markdown":"nixon,  are you able to fix this?","body":"nixon,  are you able to fix this?"},{"owner":{"account_id":5218565,"reputation":1034,"user_id":6540591,"display_name":"User51"},"score":1,"creation_date":1674238933,"post_id":73303939,"comment_id":132679740,"body_markdown":"The answer on this question helped me..  Was a NoClassDefFound error that was hidden in the `mockStatic` call.  Calling the method directly provoked the NoClassDefFound exception, which when fixed, resolved the redefinition error.  https://stackoverflow.com/questions/65852144/mockito-latest-versions-support-to-surpress-static-block","body":"The answer on this question helped me..  Was a NoClassDefFound error that was hidden in the <code>mockStatic</code> call.  Calling the method directly provoked the NoClassDefFound exception, which when fixed, resolved the redefinition error.  <a href=\"https://stackoverflow.com/questions/65852144/mockito-latest-versions-support-to-surpress-static-block\" title=\"mockito latest versions support to surpress static block\">stackoverflow.com/questions/65852144/&hellip;</a>"}],"owner":{"account_id":25986825,"reputation":21,"user_id":19699689,"display_name":"nixon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2960,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1660123986,"creation_date":1660123986,"question_id":73303939,"body_markdown":"I am trying to Mock this class so that it is ignored when called during tests. When trying to mock &quot;TemplateRendererUtil&quot; I am getting &quot;class redefinition failed: invalid class&quot;. Maybe there is a simpler way of approaching this so that I don&#39;t need to mock the class? will what I am trying to do work?\r\n\r\n    try (MockedStatic&lt;TemplateRendererUtil&gt; mockedStatic = Mockito.mockStatic(TemplateRendererUtil.class))\r\n\r\nClass being referenced\r\n\r\n    public class TemplateRendererUtil {\r\n        private static final ResponseTemplateRenderer RENDERER = ResponseTemplateRenderer.getInstance();\r\n    \r\n    private TemplateRendererUtil() {\r\n    }\r\n    \r\n    public static void render(HttpServletRequest req, HttpServletResponse resp, String templateFile, Map&lt;String, Object&gt; params) throws TemplateRendererUtilException {\r\n        try {\r\n            RENDERER.render(req, resp, templateFile, params);\r\n        } catch (ResponseTemplateRendererException var5) {\r\n            throw new TemplateRendererUtilException(var5);\r\n        }\r\n    }\r\n\r\nStack trace\r\n\r\n    java.lang.InternalError: class redefinition failed: invalid class\r\n\r\n\tat java.instrument/sun.instrument.InstrumentationImpl.retransformClasses0(Native Method)\r\n\tat java.instrument/sun.instrument.InstrumentationImpl.retransformClasses(InstrumentationImpl.java:167)\r\n\tat org.mockito.internal.creation.bytebuddy.InlineBytecodeGenerator.triggerRetransformation(InlineBytecodeGenerator.java:280)\r\n\tat org.mockito.internal.creation.bytebuddy.InlineBytecodeGenerator.mockClassStatic(InlineBytecodeGenerator.java:225)\r\n\tat org.mockito.internal.creation.bytebuddy.TypeCachingBytecodeGenerator.mockClassStatic(TypeCachingBytecodeGenerator.java:63)\r\n\tat org.mockito.internal.creation.bytebuddy.InlineDelegateByteBuddyMockMaker.createStaticMock(InlineDelegateByteBuddyMockMaker.java:560)\r\n\tat org.mockito.internal.creation.bytebuddy.InlineByteBuddyMockMaker.createStaticMock(InlineByteBuddyMockMaker.java:83)\r\n\tat org.mockito.internal.util.MockUtil.createStaticMock(MockUtil.java:147)\r\n\tat org.mockito.internal.MockitoCore.mockStatic(MockitoCore.java:142)\r\n\tat org.mockito.Mockito.mockStatic(Mockito.java:2181)\r\n\tat org.mockito.Mockito.mockStatic(Mockito.java:2118)\r\n\tat com.nnixon.MySecondAdapterTest.testLookUpAuthWithInvalidAttributes(MySecondAdapterTest.java:107)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\r\n\tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\r\n\tat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n\tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\n\r\n\r\nProcess finished with exit code 255","title":"Mockito.mockStatic &quot;java.lang.InternalError: class redefinition failed: invalid class&quot;","body":"<p>I am trying to Mock this class so that it is ignored when called during tests. When trying to mock &quot;TemplateRendererUtil&quot; I am getting &quot;class redefinition failed: invalid class&quot;. Maybe there is a simpler way of approaching this so that I don't need to mock the class? will what I am trying to do work?</p>\n<pre><code>try (MockedStatic&lt;TemplateRendererUtil&gt; mockedStatic = Mockito.mockStatic(TemplateRendererUtil.class))\n</code></pre>\n<p>Class being referenced</p>\n<pre><code>public class TemplateRendererUtil {\n    private static final ResponseTemplateRenderer RENDERER = ResponseTemplateRenderer.getInstance();\n\nprivate TemplateRendererUtil() {\n}\n\npublic static void render(HttpServletRequest req, HttpServletResponse resp, String templateFile, Map&lt;String, Object&gt; params) throws TemplateRendererUtilException {\n    try {\n        RENDERER.render(req, resp, templateFile, params);\n    } catch (ResponseTemplateRendererException var5) {\n        throw new TemplateRendererUtilException(var5);\n    }\n}\n</code></pre>\n<p>Stack trace</p>\n<pre><code>java.lang.InternalError: class redefinition failed: invalid class\n\nat java.instrument/sun.instrument.InstrumentationImpl.retransformClasses0(Native Method)\nat java.instrument/sun.instrument.InstrumentationImpl.retransformClasses(InstrumentationImpl.java:167)\nat org.mockito.internal.creation.bytebuddy.InlineBytecodeGenerator.triggerRetransformation(InlineBytecodeGenerator.java:280)\nat org.mockito.internal.creation.bytebuddy.InlineBytecodeGenerator.mockClassStatic(InlineBytecodeGenerator.java:225)\nat org.mockito.internal.creation.bytebuddy.TypeCachingBytecodeGenerator.mockClassStatic(TypeCachingBytecodeGenerator.java:63)\nat org.mockito.internal.creation.bytebuddy.InlineDelegateByteBuddyMockMaker.createStaticMock(InlineDelegateByteBuddyMockMaker.java:560)\nat org.mockito.internal.creation.bytebuddy.InlineByteBuddyMockMaker.createStaticMock(InlineByteBuddyMockMaker.java:83)\nat org.mockito.internal.util.MockUtil.createStaticMock(MockUtil.java:147)\nat org.mockito.internal.MockitoCore.mockStatic(MockitoCore.java:142)\nat org.mockito.Mockito.mockStatic(Mockito.java:2181)\nat org.mockito.Mockito.mockStatic(Mockito.java:2118)\nat com.nnixon.MySecondAdapterTest.testLookUpAuthWithInvalidAttributes(MySecondAdapterTest.java:107)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:566)\nat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)\nat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\nat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)\nat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)\nat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)\nat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)\nat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\nat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)\nat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\nat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\nat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\nat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\nat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\nat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\nat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\nat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\nat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\nat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\nat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\n</code></pre>\n<p>Process finished with exit code 255</p>\n"},{"tags":["java","arraylist"],"comments":[{"owner":{"account_id":1079267,"reputation":776,"user_id":1076703,"display_name":"Vipul Gulhane"},"score":0,"creation_date":1531652947,"post_id":8520808,"comment_id":89668171,"body_markdown":"@Ripon\\ @Sanu . Try using **Iterator remove();** method.and while Iterating remove the mathcing element from ArrayList","body":"@Ripon\\ @Sanu . Try using <b>Iterator remove();</b> method.and while Iterating remove the mathcing element from ArrayList"}],"answers":[{"tags":[],"owner":{"account_id":237365,"reputation":1500,"user_id":505482,"display_name":"Valchev"},"down_vote_count":0,"up_vote_count":50,"is_accepted":true,"score":50,"last_activity_date":1575017900,"creation_date":1323955583,"answer_id":8520823,"question_id":8520808,"body_markdown":"`ArrayList` removes objects based on the `equals(Object obj)` method. So you should implement properly this method. Something like:\r\n\r\n    public boolean equals(Object obj) {\r\n        if (obj == null) return false;\r\n        if (obj == this) return true;\r\n        if (!(obj instanceof ArrayTest)) return false;\r\n        ArrayTest o = (ArrayTest) obj;\r\n        return o.i == this.i;\r\n    }\r\n\r\nOr\r\n\r\n    public boolean equals(Object obj) {\r\n        if (obj instanceof ArrayTest) {\r\n            ArrayTest o = (ArrayTest) obj;\r\n            return o.i == this.i;\r\n        }\r\n        return false;\r\n    }\r\n","title":"How to remove specific object from ArrayList in Java?","body":"<p><code>ArrayList</code> removes objects based on the <code>equals(Object obj)</code> method. So you should implement properly this method. Something like:</p>\n\n<pre><code>public boolean equals(Object obj) {\n    if (obj == null) return false;\n    if (obj == this) return true;\n    if (!(obj instanceof ArrayTest)) return false;\n    ArrayTest o = (ArrayTest) obj;\n    return o.i == this.i;\n}\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>public boolean equals(Object obj) {\n    if (obj instanceof ArrayTest) {\n        ArrayTest o = (ArrayTest) obj;\n        return o.i == this.i;\n    }\n    return false;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18835,"reputation":82183,"user_id":43582,"accept_rate":83,"display_name":"Bombe"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1323955962,"creation_date":1323955641,"answer_id":8520835,"question_id":8520808,"body_markdown":"In general an object can be removed in two ways from an [`ArrayList`][2] (or generally any [`List`][1]), by index ([`remove(int)`][3]) and by object ([`remove(Object)`][4]).\r\n\r\nIn this particular scenario: Add an [`equals(Object)`][5] method to your `ArrayTest` class. That will allow [`ArrayList.remove(Object)`][6] to identify the correct object.\r\n\r\n[1]: http://docs.oracle.com/javase/6/docs/api/java/util/List.html\r\n[2]: http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html\r\n[3]: http://docs.oracle.com/javase/6/docs/api/java/util/List.html#remove(int)\r\n[4]: http://docs.oracle.com/javase/6/docs/api/java/util/List.html#remove(java.lang.Object)\r\n[5]: http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#equals(java.lang.Object)\r\n[6]: http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#remove(java.lang.Object)","title":"How to remove specific object from ArrayList in Java?","body":"<p>In general an object can be removed in two ways from an <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html\" rel=\"noreferrer\"><code>ArrayList</code></a> (or generally any <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/List.html\" rel=\"noreferrer\"><code>List</code></a>), by index (<a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/List.html#remove(int)\" rel=\"noreferrer\"><code>remove(int)</code></a>) and by object (<a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/List.html#remove(java.lang.Object)\" rel=\"noreferrer\"><code>remove(Object)</code></a>).</p>\n\n<p>In this particular scenario: Add an <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#equals(java.lang.Object)\" rel=\"noreferrer\"><code>equals(Object)</code></a> method to your <code>ArrayTest</code> class. That will allow <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#remove(java.lang.Object)\" rel=\"noreferrer\"><code>ArrayList.remove(Object)</code></a> to identify the correct object.</p>\n"},{"tags":[],"owner":{"account_id":1038159,"reputation":1304,"user_id":1044804,"accept_rate":84,"display_name":"Pritom"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1323956120,"creation_date":1323955723,"answer_id":8520849,"question_id":8520808,"body_markdown":"        ArrayTest obj=new ArrayTest(1);\r\n        test.add(obj);\r\n        ArrayTest obj1=new ArrayTest(2);\r\n        test.add(obj1);\r\n        ArrayTest obj2=new ArrayTest(3);\r\n        test.add(obj2);\r\n\r\n        test.remove(object of ArrayTest);\r\n\r\nyou can specify how you control each object.","title":"How to remove specific object from ArrayList in Java?","body":"<pre><code>    ArrayTest obj=new ArrayTest(1);\n    test.add(obj);\n    ArrayTest obj1=new ArrayTest(2);\n    test.add(obj1);\n    ArrayTest obj2=new ArrayTest(3);\n    test.add(obj2);\n\n    test.remove(object of ArrayTest);\n</code></pre>\n\n<p>you can specify how you control each object.</p>\n"},{"tags":[],"owner":{"account_id":893907,"reputation":2615,"user_id":931622,"display_name":"Kashif Khan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1323955729,"creation_date":1323955729,"answer_id":8520853,"question_id":8520808,"body_markdown":"use this code\r\n\r\n    test.remove(test.indexOf(obj));\r\n\r\n    test is your ArrayList and obj is the Object, first you find the index of obj in ArrayList and then you remove it from the ArrayList.","title":"How to remove specific object from ArrayList in Java?","body":"<p>use this code</p>\n\n<pre><code>test.remove(test.indexOf(obj));\n\ntest is your ArrayList and obj is the Object, first you find the index of obj in ArrayList and then you remove it from the ArrayList.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1059483,"reputation":656,"user_id":1169171,"display_name":"Tatarasanu Victor"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1323956040,"creation_date":1323956040,"answer_id":8520909,"question_id":8520808,"body_markdown":"AValchev is right.\r\nA quicker solution would be to parse all elements and compare by an unique property. \r\n\r\n    String property = &quot;property to delete&quot;;\r\n    \r\n    for(int j = 0; j &lt; i.size(); j++)\r\n    {\r\n        Student obj = i.get(j);\r\n    \r\n        if(obj.getProperty().equals(property)){\r\n           //found, delete.\r\n            i.remove(j);\r\n            break;\r\n        }\r\n    \r\n    }\r\n\r\nTHis is a quick solution. You&#39;d better implement object comparison for larger projects.","title":"How to remove specific object from ArrayList in Java?","body":"<p>AValchev is right.\nA quicker solution would be to parse all elements and compare by an unique property. </p>\n\n<pre><code>String property = \"property to delete\";\n\nfor(int j = 0; j &lt; i.size(); j++)\n{\n    Student obj = i.get(j);\n\n    if(obj.getProperty().equals(property)){\n       //found, delete.\n        i.remove(j);\n        break;\n    }\n\n}\n</code></pre>\n\n<p>THis is a quick solution. You'd better implement object comparison for larger projects.</p>\n"},{"tags":[],"owner":{"account_id":368566,"reputation":817,"user_id":715454,"display_name":"Alan Delimon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1323956334,"creation_date":1323956334,"answer_id":8520971,"question_id":8520808,"body_markdown":"You can use Collections.binarySearch to find the element, then call remove on the returned index.\r\n\r\nSee the documentation for Collections.binarySearch here:\r\nhttp://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#binarySearch%28java.util.List,%20java.lang.Object%29\r\n\r\nThis would require the ArrayTest object to have .equals implemented though.  You would also need to call Collections.sort to sort the list.  Finally, ArrayTest would have to implement the Comparable interface, so that binarySearch would run correctly.\r\n\r\nThis is the &quot;proper&quot; way to do it in Java.  If you are just looking to solve the problem in a quick and dirty fashion, then you can just iterate over the elements and remove the one with the attribute you are looking for.","title":"How to remove specific object from ArrayList in Java?","body":"<p>You can use Collections.binarySearch to find the element, then call remove on the returned index.</p>\n\n<p>See the documentation for Collections.binarySearch here:\n<a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#binarySearch%28java.util.List,%20java.lang.Object%29\" rel=\"nofollow\">http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#binarySearch%28java.util.List,%20java.lang.Object%29</a></p>\n\n<p>This would require the ArrayTest object to have .equals implemented though.  You would also need to call Collections.sort to sort the list.  Finally, ArrayTest would have to implement the Comparable interface, so that binarySearch would run correctly.</p>\n\n<p>This is the \"proper\" way to do it in Java.  If you are just looking to solve the problem in a quick and dirty fashion, then you can just iterate over the elements and remove the one with the attribute you are looking for.</p>\n"},{"tags":[],"owner":{"account_id":5468777,"reputation":1,"user_id":4348724,"display_name":"Nathan Nelson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1418279545,"creation_date":1418279545,"answer_id":27416711,"question_id":8520808,"body_markdown":"This helped me:\r\n\r\n    \r\n\t\t\tcard temperaryCardFour = theDeck.get(theDeck.size() - 1);\r\n\t\t\ttheDeck.remove(temperaryCardFour);    \r\n\r\ninstead of \r\n\r\n    theDeck.remove(numberNeededRemoved);\r\n\r\nI got a removal conformation on the first snippet of code and an un removal conformation on the second.\r\n\r\nTry switching your code with the first snippet I think that is your problem.\r\n\r\nNathan Nelson","title":"How to remove specific object from ArrayList in Java?","body":"<p>This helped me:</p>\n\n<pre><code>        card temperaryCardFour = theDeck.get(theDeck.size() - 1);\n        theDeck.remove(temperaryCardFour);    \n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>theDeck.remove(numberNeededRemoved);\n</code></pre>\n\n<p>I got a removal conformation on the first snippet of code and an un removal conformation on the second.</p>\n\n<p>Try switching your code with the first snippet I think that is your problem.</p>\n\n<p>Nathan Nelson</p>\n"},{"tags":[],"owner":{"account_id":7192840,"reputation":419,"user_id":5492541,"display_name":"Aman Goyal"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1516192488,"creation_date":1516190688,"answer_id":48300761,"question_id":8520808,"body_markdown":"For removing the particular object from arrayList there are two ways. Call the function of arrayList.\r\n\r\n\r\n1. Removing on the basis of the object.\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    arrayList.remove(object);\r\n\r\nThis will remove your object but in most cases when arrayList contains the items of UserDefined DataTypes, this method does not give you the correct result. It works fine only for Primitive DataTypes. Because user want to remove the item on the basis of object field value and that can not be compared by remove function automatically.\r\n\r\n2. Removing on the basis of specified index position of arrayList. The best way to remove any item or object from arrayList. First, find the index of the item which you want to remove. Then call this arrayList method, this method removes the item on index basis. And it will give the correct result.\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    arrayList.remove(index);  \r\n\r\n","title":"How to remove specific object from ArrayList in Java?","body":"<p>For removing the particular object from arrayList there are two ways. Call the function of arrayList.</p>\n\n<ol>\n<li>Removing on the basis of the object.</li>\n</ol>\n\n<pre class=\"lang-java prettyprint-override\"><code>arrayList.remove(object);\n</code></pre>\n\n<p>This will remove your object but in most cases when arrayList contains the items of UserDefined DataTypes, this method does not give you the correct result. It works fine only for Primitive DataTypes. Because user want to remove the item on the basis of object field value and that can not be compared by remove function automatically.</p>\n\n<ol start=\"2\">\n<li>Removing on the basis of specified index position of arrayList. The best way to remove any item or object from arrayList. First, find the index of the item which you want to remove. Then call this arrayList method, this method removes the item on index basis. And it will give the correct result.</li>\n</ol>\n\n<pre class=\"lang-java prettyprint-override\"><code>arrayList.remove(index);  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":2141099,"reputation":1371,"user_id":1899700,"accept_rate":100,"display_name":"Tmh"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1645774814,"creation_date":1516889411,"answer_id":48444874,"question_id":8520808,"body_markdown":"If you are using Java 8 or above:\r\n\r\n    test.removeIf(t -&gt; t.i == 1);\r\n\r\nJava 8 has a `removeIf` method in the collection interface. For the ArrayList, it has an advanced implementation (order of n).\r\n","title":"How to remove specific object from ArrayList in Java?","body":"<p>If you are using Java 8 or above:</p>\n<pre><code>test.removeIf(t -&gt; t.i == 1);\n</code></pre>\n<p>Java 8 has a <code>removeIf</code> method in the collection interface. For the ArrayList, it has an advanced implementation (order of n).</p>\n"},{"tags":[],"owner":{"account_id":3422848,"reputation":5363,"user_id":2869767,"accept_rate":67,"display_name":"Sagar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1524118618,"creation_date":1524118618,"answer_id":49913963,"question_id":8520808,"body_markdown":"If you want to remove multiple objects that are matching to the property try this.\r\n\r\nI have used following code to remove element from object array it helped me.\r\n\r\nIn general an object can be removed in two ways from an `ArrayList` (or generally any List), by `index` (remove(int)) and by `object` (remove(Object)).\r\n\r\nsome time for you `arrayList.remove(index)`or `arrayList.remove(obj.get(index))` using these lines may not work try to use following code.\r\n\r\n    for (Iterator&lt;DetailInbox&gt; iter = detailInboxArray.iterator(); iter.hasNext(); ) {\r\n        DetailInbox element = iter.next();\r\n       if (element.isSelected()) {\r\n          iter.remove();\r\n       }\r\n    }","title":"How to remove specific object from ArrayList in Java?","body":"<p>If you want to remove multiple objects that are matching to the property try this.</p>\n\n<p>I have used following code to remove element from object array it helped me.</p>\n\n<p>In general an object can be removed in two ways from an <code>ArrayList</code> (or generally any List), by <code>index</code> (remove(int)) and by <code>object</code> (remove(Object)).</p>\n\n<p>some time for you <code>arrayList.remove(index)</code>or <code>arrayList.remove(obj.get(index))</code> using these lines may not work try to use following code.</p>\n\n<pre><code>for (Iterator&lt;DetailInbox&gt; iter = detailInboxArray.iterator(); iter.hasNext(); ) {\n    DetailInbox element = iter.next();\n   if (element.isSelected()) {\n      iter.remove();\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1079267,"reputation":776,"user_id":1076703,"display_name":"Vipul Gulhane"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1531652636,"creation_date":1531652636,"answer_id":51347757,"question_id":8520808,"body_markdown":"Here is full example. we have to use \r\n**Iterator&#39;s remove()** method\r\n\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.Iterator;\r\n    \r\n    public class ArrayTest {\r\n    \tint i;\r\n    \tpublic static void main(String args[]) {\r\n    \t\tArrayList&lt;ArrayTest&gt; test = new ArrayList&lt;ArrayTest&gt;();\r\n    \t\tArrayTest obj;\r\n    \t\tobj = new ArrayTest(1);\r\n    \t\ttest.add(obj);\r\n    \t\tobj = new ArrayTest(2);\r\n    \t\ttest.add(obj);\r\n    \t\tobj = new ArrayTest(3);\r\n    \t\ttest.add(obj);\r\n    \t\tSystem.out.println(&quot;Before removing size is &quot; + test.size() + &quot; And Element are : &quot; + test);\r\n    \t\tIterator&lt;ArrayTest&gt; itr = test.iterator();\r\n    \t\twhile (itr.hasNext()) {\r\n    \t\t\tArrayTest number = itr.next();\r\n    \t\t\tif (number.i == 1) {\r\n    \t\t\t\titr.remove();\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tSystem.out.println(&quot;After removing size is &quot; + test.size() + &quot; And Element are :&quot; + test);\r\n    \t}\r\n    \tpublic ArrayTest(int i) {\r\n    \t\tthis.i = i;\r\n    \t}\r\n    \t@Override\r\n    \tpublic String toString() {\r\n    \t\treturn &quot;ArrayTest [i=&quot; + i + &quot;]&quot;;\r\n    \t}\r\n    \r\n    }\r\n\r\n[![Working demo Screen][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/uXyTW.png","title":"How to remove specific object from ArrayList in Java?","body":"<p>Here is full example. we have to use \n<strong>Iterator's remove()</strong> method</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Iterator;\n\npublic class ArrayTest {\n    int i;\n    public static void main(String args[]) {\n        ArrayList&lt;ArrayTest&gt; test = new ArrayList&lt;ArrayTest&gt;();\n        ArrayTest obj;\n        obj = new ArrayTest(1);\n        test.add(obj);\n        obj = new ArrayTest(2);\n        test.add(obj);\n        obj = new ArrayTest(3);\n        test.add(obj);\n        System.out.println(\"Before removing size is \" + test.size() + \" And Element are : \" + test);\n        Iterator&lt;ArrayTest&gt; itr = test.iterator();\n        while (itr.hasNext()) {\n            ArrayTest number = itr.next();\n            if (number.i == 1) {\n                itr.remove();\n            }\n        }\n        System.out.println(\"After removing size is \" + test.size() + \" And Element are :\" + test);\n    }\n    public ArrayTest(int i) {\n        this.i = i;\n    }\n    @Override\n    public String toString() {\n        return \"ArrayTest [i=\" + i + \"]\";\n    }\n\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/uXyTW.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/uXyTW.png\" alt=\"Working demo Screen\"></a></p>\n"},{"tags":[],"owner":{"account_id":13008431,"reputation":11,"user_id":9402274,"display_name":"user9402274"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1547123695,"creation_date":1547121128,"answer_id":54128098,"question_id":8520808,"body_markdown":"I have tried this and it works for me:\r\n\r\n    ArrayList&lt;cartItem&gt; cartItems= new ArrayList&lt;&gt;();\r\n    \r\n    //filling the cartItems\r\n    \r\n    cartItem ci=new cartItem(itemcode,itemQuantity);//the one I want to remove\r\n    \r\n    Iterator&lt;cartItem&gt; itr =cartItems.iterator();\r\n    while (itr.hasNext()){\r\n       cartItem ci_itr=itr.next();\r\n       if (ci_itr.getClass() == ci.getClass()){\r\n          itr.remove();\r\n          return;\r\n        }\r\n    }","title":"How to remove specific object from ArrayList in Java?","body":"<p>I have tried this and it works for me:</p>\n\n<pre><code>ArrayList&lt;cartItem&gt; cartItems= new ArrayList&lt;&gt;();\n\n//filling the cartItems\n\ncartItem ci=new cartItem(itemcode,itemQuantity);//the one I want to remove\n\nIterator&lt;cartItem&gt; itr =cartItems.iterator();\nwhile (itr.hasNext()){\n   cartItem ci_itr=itr.next();\n   if (ci_itr.getClass() == ci.getClass()){\n      itr.remove();\n      return;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8331617,"reputation":331,"user_id":6259838,"display_name":"Ali"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1607329795,"creation_date":1607329795,"answer_id":65178276,"question_id":8520808,"body_markdown":"simple use remove() function. and pass object as param u want to remove.\r\nur arraylist.remove(obj)","title":"How to remove specific object from ArrayList in Java?","body":"<p>simple use remove() function. and pass object as param u want to remove.\nur arraylist.remove(obj)</p>\n"},{"tags":[],"owner":{"account_id":8331617,"reputation":331,"user_id":6259838,"display_name":"Ali"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1607335207,"creation_date":1607335207,"answer_id":65179553,"question_id":8520808,"body_markdown":"or you can use java 8 lambda\r\n\r\ntest.removeIf(i -&gt; i==2);\r\n\r\nit will simply remove all object that meet the condition","title":"How to remove specific object from ArrayList in Java?","body":"<p>or you can use java 8 lambda</p>\n<p>test.removeIf(i -&gt; i==2);</p>\n<p>it will simply remove all object that meet the condition</p>\n"},{"tags":[],"owner":{"account_id":117016,"reputation":2407,"user_id":9115195,"display_name":"Pratik Dodiya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619607289,"creation_date":1619607289,"answer_id":67298886,"question_id":8520808,"body_markdown":"Below one is used when removed ArrayTest(1) from **test ArrayList**\r\n\r\n    test.removeIf(\r\n         (intValue) -&gt; {\r\n             boolean remove = false;\r\n             remove = (intValue == 1);\r\n             if (remove) {\r\n                //Success\r\n             }\r\n             return remove;\r\n          });","title":"How to remove specific object from ArrayList in Java?","body":"<p>Below one is used when removed ArrayTest(1) from <strong>test ArrayList</strong></p>\n<pre><code>test.removeIf(\n     (intValue) -&gt; {\n         boolean remove = false;\n         remove = (intValue == 1);\n         if (remove) {\n            //Success\n         }\n         return remove;\n      });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10313291,"reputation":1698,"user_id":7608371,"display_name":"Noor Hossain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633714299,"creation_date":1633714299,"answer_id":69499730,"question_id":8520808,"body_markdown":"Example within  a  simple String List, if anyone wants : \r\n\r\n     public ArrayList&lt;String&gt; listAfterRemoved(ArrayList&lt;String&gt; arrayList, String toRemove) {\r\n    \r\n            for (int i = 0; i &lt; arrayList.size(); i++) {\r\n                if (arrayList.get(i).equals(toRemove)) {\r\n                    arrayList.remove(toRemove);\r\n                }\r\n            }\r\n            return arrayList;\r\n        }\r\n\r\nAnd the call is : \r\n\r\n    ArrayList&lt;String&gt; arrayList = new ArrayList&lt;&gt;();\r\n            arrayList.add(&quot;1&quot;);\r\n            arrayList.add(&quot;2&quot;);\r\n            arrayList.add(&quot;3&quot;);\r\n            arrayList.add(&quot;4&quot;);\r\n    \r\n            System.out.println(&quot;Array List before: &quot; + arrayList.toString());\r\n            arrayList = listAfterRemoved(arrayList, &quot;2&quot;);\r\n            System.out.println(&quot;Array List after : &quot; + arrayList.toString());\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Vf69v.png","title":"How to remove specific object from ArrayList in Java?","body":"<p>Example within  a  simple String List, if anyone wants :</p>\n<pre><code> public ArrayList&lt;String&gt; listAfterRemoved(ArrayList&lt;String&gt; arrayList, String toRemove) {\n\n        for (int i = 0; i &lt; arrayList.size(); i++) {\n            if (arrayList.get(i).equals(toRemove)) {\n                arrayList.remove(toRemove);\n            }\n        }\n        return arrayList;\n    }\n</code></pre>\n<p>And the call is :</p>\n<pre><code>ArrayList&lt;String&gt; arrayList = new ArrayList&lt;&gt;();\n        arrayList.add(&quot;1&quot;);\n        arrayList.add(&quot;2&quot;);\n        arrayList.add(&quot;3&quot;);\n        arrayList.add(&quot;4&quot;);\n\n        System.out.println(&quot;Array List before: &quot; + arrayList.toString());\n        arrayList = listAfterRemoved(arrayList, &quot;2&quot;);\n        System.out.println(&quot;Array List after : &quot; + arrayList.toString());\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/Vf69v.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Vf69v.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":11249374,"reputation":401,"user_id":8250946,"display_name":"vikash"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660123953,"creation_date":1660123953,"answer_id":73303930,"question_id":8520808,"body_markdown":"If you want to remove or filter specific object from ArrayList, there are many ways that you can use it as given below:\r\n\r\nSuppose list is the reference variable of arrayList.\r\n\r\n    List&lt;Student&gt; list = ...;// Stored the objects here  \r\n\r\nIf you know the specific Student object that you want to delete then you can use it simply:\r\n\r\n    list.remove(student) //if you know the student object\r\n\r\nIf you know the specific id or name of that student, in that case, use java 8 **Collection.removeIf()**:\r\n\r\n    list.removeIf(fandom -&gt; id == fandom.getId());\r\n\r\nAnother way that you can use that is **Collectors.partitioningBy**:\r\n\r\n    Map&lt;Boolean, List&lt;Student&gt;&gt; studentsElements = list\r\n    .stream()\r\n    .collect(Collectors.partitioningBy((Student st) -&gt;       \r\n                      !name.equals(st.getName())));\r\n\r\n    // All Students who do have not that specific name\r\n    List&lt;Student&gt; matching = studentsElements.get(true));\r\n    // All Student who has only that specific name\r\n    List&lt;Student&gt; nonMatching = studentsElements.get(false));\r\n\r\nOr you can simply filter that specific Object\r\n\r\n    List&lt;Student&gt; studentsElements = list\r\n    .stream()\r\n    .filter(e -&gt; !name.equals(st.getName()))\r\n    .collect(Collectors.toList());","title":"How to remove specific object from ArrayList in Java?","body":"<p>If you want to remove or filter specific object from ArrayList, there are many ways that you can use it as given below:</p>\n<p>Suppose list is the reference variable of arrayList.</p>\n<pre><code>List&lt;Student&gt; list = ...;// Stored the objects here  \n</code></pre>\n<p>If you know the specific Student object that you want to delete then you can use it simply:</p>\n<pre><code>list.remove(student) //if you know the student object\n</code></pre>\n<p>If you know the specific id or name of that student, in that case, use java 8 <strong>Collection.removeIf()</strong>:</p>\n<pre><code>list.removeIf(fandom -&gt; id == fandom.getId());\n</code></pre>\n<p>Another way that you can use that is <strong>Collectors.partitioningBy</strong>:</p>\n<pre><code>Map&lt;Boolean, List&lt;Student&gt;&gt; studentsElements = list\n.stream()\n.collect(Collectors.partitioningBy((Student st) -&gt;       \n                  !name.equals(st.getName())));\n\n// All Students who do have not that specific name\nList&lt;Student&gt; matching = studentsElements.get(true));\n// All Student who has only that specific name\nList&lt;Student&gt; nonMatching = studentsElements.get(false));\n</code></pre>\n<p>Or you can simply filter that specific Object</p>\n<pre><code>List&lt;Student&gt; studentsElements = list\n.stream()\n.filter(e -&gt; !name.equals(st.getName()))\n.collect(Collectors.toList());\n</code></pre>\n"}],"owner":{"account_id":386668,"reputation":1448,"user_id":744553,"accept_rate":52,"display_name":"sAaNu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":260016,"favorite_count":0,"down_vote_count":0,"up_vote_count":33,"accepted_answer_id":8520823,"answer_count":17,"score":33,"last_activity_date":1660123953,"creation_date":1323955482,"question_id":8520808,"body_markdown":"How can I remove specific object from ArrayList?\r\nSuppose I have a class as below:\r\n\r\n    import java.util.ArrayList;    \r\n    public class ArrayTest {\r\n    \tint i;\r\n    \t\r\n    \tpublic static void main(String args[]){\r\n    \t\tArrayList&lt;ArrayTest&gt; test=new ArrayList&lt;ArrayTest&gt;();\r\n    \t\tArrayTest obj;\r\n    \t\tobj=new ArrayTest(1);\r\n    \t\ttest.add(obj);\r\n    \t\tobj=new ArrayTest(2);\r\n    \t\ttest.add(obj);\r\n    \t\tobj=new ArrayTest(3);\r\n    \t\ttest.add(obj);\r\n    \t}\r\n    \tpublic ArrayTest(int i){\r\n    \t\tthis.i=i;\r\n    \t}\r\n    }\r\n\r\n\r\nHow can I remove object with `new ArrayTest(1)` from my `ArrayList&lt;ArrayList&gt;`","title":"How to remove specific object from ArrayList in Java?","body":"<p>How can I remove specific object from ArrayList?\nSuppose I have a class as below:</p>\n\n<pre><code>import java.util.ArrayList;    \npublic class ArrayTest {\n    int i;\n\n    public static void main(String args[]){\n        ArrayList&lt;ArrayTest&gt; test=new ArrayList&lt;ArrayTest&gt;();\n        ArrayTest obj;\n        obj=new ArrayTest(1);\n        test.add(obj);\n        obj=new ArrayTest(2);\n        test.add(obj);\n        obj=new ArrayTest(3);\n        test.add(obj);\n    }\n    public ArrayTest(int i){\n        this.i=i;\n    }\n}\n</code></pre>\n\n<p>How can I remove object with <code>new ArrayTest(1)</code> from my <code>ArrayList&lt;ArrayList&gt;</code></p>\n"},{"tags":["java","jit","jvm-hotspot"],"comments":[{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1660123970,"post_id":73303907,"comment_id":129456418,"body_markdown":"As far as I&#39;m aware, you can only disable it at startup, not at runtime.","body":"As far as I&#39;m aware, you can only disable it at startup, not at runtime."},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":1,"creation_date":1660124891,"post_id":73303907,"comment_id":129456791,"body_markdown":"You could perhaps try to tune the `-XX:CompileThreshold` option to see if you can get it to compile your code earlier (or later).","body":"You could perhaps try to tune the <code>-XX:CompileThreshold</code> option to see if you can get it to compile your code earlier (or later)."},{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1660126190,"post_id":73303907,"comment_id":129457285,"body_markdown":"What is OS/JVM version? It&#39;s possible to disable JIT in runtime, but this seems to me an [XY problem](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem). JIT compiler threads are running in background. How do you see they affect latency?","body":"What is OS/JVM version? It&#39;s possible to disable JIT in runtime, but this seems to me an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>. JIT compiler threads are running in background. How do you see they affect latency?"},{"owner":{"account_id":7597353,"reputation":111,"user_id":5763136,"display_name":"Touisteur EmporteUneVache"},"score":0,"creation_date":1660134379,"post_id":73303907,"comment_id":129460372,"body_markdown":"Hi, @apangin I see the difference in running times over very long period of times, where whenever the JIT spouts a trace, I see some latency jitter in the specific code. Disabling at start-up makes the execution time perfectly constant (but awfully slow) even on very long period of times. The threads are shielded with cpuset+isolcpus, I&#39;ve tried many things before focusing on JIT, and the latency spikes seem really correlated with JIT passes.","body":"Hi, @apangin I see the difference in running times over very long period of times, where whenever the JIT spouts a trace, I see some latency jitter in the specific code. Disabling at start-up makes the execution time perfectly constant (but awfully slow) even on very long period of times. The threads are shielded with cpuset+isolcpus, I&#39;ve tried many things before focusing on JIT, and the latency spikes seem really correlated with JIT passes."},{"owner":{"account_id":7597353,"reputation":111,"user_id":5763136,"display_name":"Touisteur EmporteUneVache"},"score":0,"creation_date":1660134506,"post_id":73303907,"comment_id":129460436,"body_markdown":"@Hulk I tried different values, but it seems that in any case it recompiles some part or others of the application, and it&#39;s very finnicky to tune (for every code modification I had to retune).","body":"@Hulk I tried different values, but it seems that in any case it recompiles some part or others of the application, and it&#39;s very finnicky to tune (for every code modification I had to retune)."},{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":1,"creation_date":1660144041,"post_id":73303907,"comment_id":129464472,"body_markdown":"Correlation does not yet mean that disabling JIT will help. If the latency spike is caused by deoptimization (quite likely), then it will still happen even with JIT disabled in runtime, with the only difference that the program will become &quot;awfully slow&quot; after deoptimization, like when JIT is disabled from the very beginning.","body":"Correlation does not yet mean that disabling JIT will help. If the latency spike is caused by deoptimization (quite likely), then it will still happen even with JIT disabled in runtime, with the only difference that the program will become &quot;awfully slow&quot; after deoptimization, like when JIT is disabled from the very beginning."},{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1660144298,"post_id":73303907,"comment_id":129464598,"body_markdown":"So yes, this is an XY problem - I&#39;d suggest you ask about your *original* problem (e.g. how to detect the actual reason of a latency spike), rather than a hypothetical solution which won&#39;t probably help.","body":"So yes, this is an XY problem - I&#39;d suggest you ask about your <i>original</i> problem (e.g. how to detect the actual reason of a latency spike), rather than a hypothetical solution which won&#39;t probably help."},{"owner":{"account_id":7597353,"reputation":111,"user_id":5763136,"display_name":"Touisteur EmporteUneVache"},"score":0,"creation_date":1660235995,"post_id":73303907,"comment_id":129490806,"body_markdown":"I appreciate the advice about XY problems, but: I&#39;m saying the latency spike is happening not in my code but because the JIT *compiler* starts spuriously and interrupts my code. The code in question is not deoptimized, it is just in competition for the same resource as the JIT compiler. I&#39;d like to disable it after my code is optimized (after it was JITed). Detailed perf recording (with probes) and analysis, all say &#39;your code has been interrupted by the JIT&#39;. I&#39;m just looking for an answer to the specific question? Please?","body":"I appreciate the advice about XY problems, but: I&#39;m saying the latency spike is happening not in my code but because the JIT <i>compiler</i> starts spuriously and interrupts my code. The code in question is not deoptimized, it is just in competition for the same resource as the JIT compiler. I&#39;d like to disable it after my code is optimized (after it was JITed). Detailed perf recording (with probes) and analysis, all say &#39;your code has been interrupted by the JIT&#39;. I&#39;m just looking for an answer to the specific question? Please?"},{"owner":{"account_id":497130,"reputation":1166,"user_id":1885085,"display_name":"Gilles D."},"score":0,"creation_date":1660821685,"post_id":73303907,"comment_id":129626140,"body_markdown":"If the JIT triggers, doesn&#39;t it mean that some new code has become hot and needs to be compiled?\nI suppose by &quot;interrupted by the JIT&quot; you mean that the JIT is stealing some CPU time that would otherwise be used by your application?\nDoes the system stabilize after some reasonable time (i.e., no more &quot;JIT compilation spikes&quot;)?","body":"If the JIT triggers, doesn&#39;t it mean that some new code has become hot and needs to be compiled? I suppose by &quot;interrupted by the JIT&quot; you mean that the JIT is stealing some CPU time that would otherwise be used by your application? Does the system stabilize after some reasonable time (i.e., no more &quot;JIT compilation spikes&quot;)?"}],"owner":{"account_id":7597353,"reputation":111,"user_id":5763136,"display_name":"Touisteur EmporteUneVache"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":156,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1660123952,"creation_date":1660123869,"question_id":73303907,"body_markdown":"Is there a way/API to disable (or tune) the java JIT during execution, of a java program.\r\n\r\nMy use case is a code that is executed a large number of times, and after some time (let&#39;s say 10 seconds), I want to prevent the JIT from running, as we&#39;re seeing latency spikes related to JIT (from traces) on that specific code (or any code in the program if it&#39;s the only way).\r\n\r\nI know one can disable it at start-up but I&#39;m more looking for a way to interact with it at runtime : still getting the performance on already JITed code, but preventing further execution of the JIT compiler.","title":"Disabling Java JIT at runtime","body":"<p>Is there a way/API to disable (or tune) the java JIT during execution, of a java program.</p>\n<p>My use case is a code that is executed a large number of times, and after some time (let's say 10 seconds), I want to prevent the JIT from running, as we're seeing latency spikes related to JIT (from traces) on that specific code (or any code in the program if it's the only way).</p>\n<p>I know one can disable it at start-up but I'm more looking for a way to interact with it at runtime : still getting the performance on already JITed code, but preventing further execution of the JIT compiler.</p>\n"},{"tags":["java","android","spannable","sketchware"],"owner":{"account_id":19668389,"reputation":19,"user_id":14398162,"display_name":"RJA programer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660123778,"creation_date":1603244951,"question_id":64455540,"body_markdown":"I want to apply Text Format Options on ```EditText```. I am able to apply Bold, Italic, Strike, Underline after spacebar is trigger but i can&#39;t bring it back to normal typeface. I want to apply this typeface on the current cursor position, also able to bring it back to normal typeface.\r\n\r\ni am using Sketchware App.\r\n\r\nhere&#39;s my code: \r\n\r\n    if (editText_is_Italic) {\r\n\teditText_is_Italic = false; btn_italic.setColorFilter(0xFFFFFFFF, PorterDuff.Mode.MULTIPLY);\r\n\tStyleSpan Spantxt = new StyleSpan(Typeface.NORMAL);\r\n\tint start = edittext2.getSelectionStart();\r\n\tint end = edittext2.getSelectionEnd();\r\n\tint flag = Spannable.SPAN_INCLUSIVE_INCLUSIVE;\r\n\tedittext2.getText().setSpan(Spantxt, start, end, flag);\r\n    }\r\n    else {\r\n    if (!editText_is_Italic) {\r\n\r\n\t\teditText_is_Italic = true;\r\n\t\tbtn_italic.setColorFilter(0xFFFFC107, PorterDuff.Mode.MULTIPLY);\r\n\t\tStyleSpan Spantxt = new StyleSpan(Typeface.ITALIC);\r\n\t\tint start = edittext2.getSelectionStart();\r\n\t\tint end = edittext2.getSelectionEnd();\r\n\t\tint flag = Spannable.SPAN_INCLUSIVE_INCLUSIVE;\r\n\t\tedittext2.getText().setSpan(Spantxt, start, end, flag);\r\n\t}\r\n    }\r\n\r\nI&#39;ve try to use ```.removeSpan();``` and ```.clearSpans();``` on removing span, also i&#39;ve try ```Spannable.SPAN_EXCLUSIVE_INCLUSIVE``` to set this on current cursor position. But no one succed.","title":"How to set italic typeface for future text in current cursor position on edittext and to bring it back to normal?","body":"<p>I want to apply Text Format Options on <code>EditText</code>. I am able to apply Bold, Italic, Strike, Underline after spacebar is trigger but i can't bring it back to normal typeface. I want to apply this typeface on the current cursor position, also able to bring it back to normal typeface.</p>\n<p>i am using Sketchware App.</p>\n<p>here's my code:</p>\n<pre><code>if (editText_is_Italic) {\neditText_is_Italic = false; btn_italic.setColorFilter(0xFFFFFFFF, PorterDuff.Mode.MULTIPLY);\nStyleSpan Spantxt = new StyleSpan(Typeface.NORMAL);\nint start = edittext2.getSelectionStart();\nint end = edittext2.getSelectionEnd();\nint flag = Spannable.SPAN_INCLUSIVE_INCLUSIVE;\nedittext2.getText().setSpan(Spantxt, start, end, flag);\n}\nelse {\nif (!editText_is_Italic) {\n\n    editText_is_Italic = true;\n    btn_italic.setColorFilter(0xFFFFC107, PorterDuff.Mode.MULTIPLY);\n    StyleSpan Spantxt = new StyleSpan(Typeface.ITALIC);\n    int start = edittext2.getSelectionStart();\n    int end = edittext2.getSelectionEnd();\n    int flag = Spannable.SPAN_INCLUSIVE_INCLUSIVE;\n    edittext2.getText().setSpan(Spantxt, start, end, flag);\n}\n}\n</code></pre>\n<p>I've try to use <code>.removeSpan();</code> and <code>.clearSpans();</code> on removing span, also i've try <code>Spannable.SPAN_EXCLUSIVE_INCLUSIVE</code> to set this on current cursor position. But no one succed.</p>\n"},{"tags":["java","json","jackson","gson"],"comments":[{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1646664438,"post_id":71380933,"comment_id":126172951,"body_markdown":"Have a look at [BSON](https://en.wikipedia.org/wiki/BSON).","body":"Have a look at <a href=\"https://en.wikipedia.org/wiki/BSON\" rel=\"nofollow noreferrer\">BSON</a>."},{"owner":{"account_id":4034876,"reputation":1557,"user_id":3319725,"display_name":"AnatolyG"},"score":0,"creation_date":1646671211,"post_id":71380933,"comment_id":126175921,"body_markdown":"You are on the right way. The most efficient approach to process large files is to use Streaming APIs. You may take a look at an alternative library which doesn&#39;t require to iterate over tokens, but provides a set of callbacks instead https://stackoverflow.com/questions/59041703/query-a-json-file-with-java-large-file/59179114#59179114 Anyway, an efficient way usually means more complex way)","body":"You are on the right way. The most efficient approach to process large files is to use Streaming APIs. You may take a look at an alternative library which doesn&#39;t require to iterate over tokens, but provides a set of callbacks instead <a href=\"https://stackoverflow.com/questions/59041703/query-a-json-file-with-java-large-file/59179114#59179114\" title=\"query a json file with java large file\">stackoverflow.com/questions/59041703/&hellip;</a> Anyway, an efficient way usually means more complex way)"}],"answers":[{"tags":[],"owner":{"account_id":272789,"reputation":1127,"user_id":3775452,"display_name":"Dennys Fredericci"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647286999,"creation_date":1646661370,"answer_id":71382187,"question_id":71380933,"body_markdown":"Did you check [JsonPath][1]? You can use Gson or Jackson as a provider, but by default, it uses Json-smart, which is performance-focused.\r\n\r\nHere is an example based on your attached JSON.\r\n\r\n\r\n    InputStream inputStream = Main.class.getClassLoader().getResourceAsStream(&quot;file.json&quot;);\r\n    String[] textArray = JsonPath.parse(inputStream).read(&quot;files[*].content[*].fileContent.subList[*].subList[*].text&quot;, String[].class);\r\n    Arrays.stream(textArray).forEach(System.out::println);\r\n\r\n\r\n\r\nJsonPath gonna use a lot of memory. If you don&#39;t have enough memory to handle large files, you can use a stream/token approach. The code below could handle json files of 6GB with 900MB of Heap or less if you don&#39;t store texts.\r\n\r\n\r\n    public class Main {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n\r\n        try (InputStream inputStream = getJsonAsInputStream()) {\r\n            EnumMap&lt;JsonToken, JsonTokenHandler&gt; map = getJsonTokenHandler();\r\n\r\n            Context context = new Context();\r\n            JsonReader reader = new JsonReader(new InputStreamReader(inputStream));\r\n\r\n            while (true) {\r\n                JsonToken token = reader.peek();\r\n                JsonTokenHandler jsonTokenHandler = map.get(token);\r\n                jsonTokenHandler.handle(reader, context);\r\n                if (token.equals(END_DOCUMENT)) {\r\n                    break;\r\n                }\r\n            }\r\n\r\n            context.getTexts().forEach(System.out::println);\r\n        }\r\n    }\r\n\r\n    private static EnumMap&lt;JsonToken, JsonTokenHandler&gt; getJsonTokenHandler() {\r\n        EnumMap&lt;JsonToken, JsonTokenHandler&gt; map = new EnumMap&lt;&gt;(JsonToken.class);\r\n        map.put(BEGIN_ARRAY, (reader, context) -&gt; reader.beginArray());\r\n        map.put(END_ARRAY, (reader, context) -&gt; reader.endArray());\r\n        map.put(BEGIN_OBJECT, (reader, context) -&gt; reader.beginObject());\r\n        map.put(END_OBJECT, (reader, context) -&gt; reader.endObject());\r\n        map.put(NAME, (reader, context) -&gt; {\r\n            reader.nextName();\r\n            context.setCurrentPath(reader.getPath());\r\n        });\r\n        map.put(STRING, (reader, context) -&gt; {\r\n            String string = reader.nextString();\r\n            if (context.isTextAttribute()) {\r\n                context.addText(string);\r\n            }\r\n\r\n        });\r\n        map.put(NUMBER, (reader, context) -&gt; reader.nextString());\r\n        map.put(BOOLEAN, (reader, context) -&gt; reader.nextBoolean());\r\n        map.put(NULL, (reader, context) -&gt; reader.nextNull());\r\n        map.put(END_DOCUMENT, (reader, context) -&gt; {\r\n        });\r\n        return map;\r\n    }\r\n\r\n    private static InputStream getJsonAsInputStream() throws FileNotFoundException {\r\n        File inFile = new File(&quot;/path/to/your/large/file.json&quot;);\r\n        ReadableByteChannel rChannel = new RandomAccessFile(inFile, &quot;r&quot;).getChannel();\r\n        return Channels.newInputStream(rChannel);\r\n    }\r\n\r\n\r\n    static class Context {\r\n        private String currentPath;\r\n        private List&lt;String&gt; texts = new ArrayList&lt;&gt;();\r\n\r\n        public void addText(String text) {\r\n            texts.add(text);\r\n        }\r\n\r\n        public List&lt;String&gt; getTexts() {\r\n            return texts;\r\n        }\r\n\r\n        public void setCurrentPath(String path) {\r\n            this.currentPath = path;\r\n        }\r\n\r\n        public boolean isTextAttribute() {\r\n            return currentPath.matches(&quot;\\\\$\\\\.files\\\\[\\\\d+\\\\]\\\\.content\\\\[\\\\d+\\\\]\\\\.fileContent\\\\.subList\\\\[\\\\d+\\\\]\\\\.subList\\\\[\\\\d+\\\\]\\\\.text&quot;);\r\n        }\r\n    }\r\n\r\n    interface JsonTokenHandler {\r\n        void handle(JsonReader reader, Context context) throws IOException;\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n\r\n  [1]: https://github.com/json-path/JsonPath","title":"Streaming large JSON from input stream efficiently in Java","body":"<p>Did you check <a href=\"https://github.com/json-path/JsonPath\" rel=\"nofollow noreferrer\">JsonPath</a>? You can use Gson or Jackson as a provider, but by default, it uses Json-smart, which is performance-focused.</p>\n<p>Here is an example based on your attached JSON.</p>\n<pre><code>InputStream inputStream = Main.class.getClassLoader().getResourceAsStream(&quot;file.json&quot;);\nString[] textArray = JsonPath.parse(inputStream).read(&quot;files[*].content[*].fileContent.subList[*].subList[*].text&quot;, String[].class);\nArrays.stream(textArray).forEach(System.out::println);\n</code></pre>\n<p>JsonPath gonna use a lot of memory. If you don't have enough memory to handle large files, you can use a stream/token approach. The code below could handle json files of 6GB with 900MB of Heap or less if you don't store texts.</p>\n<pre><code>public class Main {\n\npublic static void main(String[] args) throws Exception {\n\n    try (InputStream inputStream = getJsonAsInputStream()) {\n        EnumMap&lt;JsonToken, JsonTokenHandler&gt; map = getJsonTokenHandler();\n\n        Context context = new Context();\n        JsonReader reader = new JsonReader(new InputStreamReader(inputStream));\n\n        while (true) {\n            JsonToken token = reader.peek();\n            JsonTokenHandler jsonTokenHandler = map.get(token);\n            jsonTokenHandler.handle(reader, context);\n            if (token.equals(END_DOCUMENT)) {\n                break;\n            }\n        }\n\n        context.getTexts().forEach(System.out::println);\n    }\n}\n\nprivate static EnumMap&lt;JsonToken, JsonTokenHandler&gt; getJsonTokenHandler() {\n    EnumMap&lt;JsonToken, JsonTokenHandler&gt; map = new EnumMap&lt;&gt;(JsonToken.class);\n    map.put(BEGIN_ARRAY, (reader, context) -&gt; reader.beginArray());\n    map.put(END_ARRAY, (reader, context) -&gt; reader.endArray());\n    map.put(BEGIN_OBJECT, (reader, context) -&gt; reader.beginObject());\n    map.put(END_OBJECT, (reader, context) -&gt; reader.endObject());\n    map.put(NAME, (reader, context) -&gt; {\n        reader.nextName();\n        context.setCurrentPath(reader.getPath());\n    });\n    map.put(STRING, (reader, context) -&gt; {\n        String string = reader.nextString();\n        if (context.isTextAttribute()) {\n            context.addText(string);\n        }\n\n    });\n    map.put(NUMBER, (reader, context) -&gt; reader.nextString());\n    map.put(BOOLEAN, (reader, context) -&gt; reader.nextBoolean());\n    map.put(NULL, (reader, context) -&gt; reader.nextNull());\n    map.put(END_DOCUMENT, (reader, context) -&gt; {\n    });\n    return map;\n}\n\nprivate static InputStream getJsonAsInputStream() throws FileNotFoundException {\n    File inFile = new File(&quot;/path/to/your/large/file.json&quot;);\n    ReadableByteChannel rChannel = new RandomAccessFile(inFile, &quot;r&quot;).getChannel();\n    return Channels.newInputStream(rChannel);\n}\n\n\nstatic class Context {\n    private String currentPath;\n    private List&lt;String&gt; texts = new ArrayList&lt;&gt;();\n\n    public void addText(String text) {\n        texts.add(text);\n    }\n\n    public List&lt;String&gt; getTexts() {\n        return texts;\n    }\n\n    public void setCurrentPath(String path) {\n        this.currentPath = path;\n    }\n\n    public boolean isTextAttribute() {\n        return currentPath.matches(&quot;\\\\$\\\\.files\\\\[\\\\d+\\\\]\\\\.content\\\\[\\\\d+\\\\]\\\\.fileContent\\\\.subList\\\\[\\\\d+\\\\]\\\\.subList\\\\[\\\\d+\\\\]\\\\.text&quot;);\n    }\n}\n\ninterface JsonTokenHandler {\n    void handle(JsonReader reader, Context context) throws IOException;\n}\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":16914570,"reputation":1532,"user_id":12232870,"display_name":"terrorrussia-keeps-killing"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646809944,"creation_date":1646756129,"answer_id":71398156,"question_id":71380933,"body_markdown":"In short,\r\n\r\n* your code does not work because it implements a wrong algorithm;\r\n* JsonPath, as it has been suggested, seems to be a good DSL implementation, but it uses a DOM approach collecting entire JSON tree into memory, therefore you&#39;ll run into OOM again.\r\n\r\nYou have two solutions:\r\n\r\n* implement a proper algorithm within your current approach (and I agree you were on a right way);\r\n* try implementing something similar to what JsonPath implements breaking down the problem to smaller ones supporting really streaming approach.\r\n\r\nI wouldn&#39;t document much of my code since it&#39;s pretty easy to understand and adapt to other libraries, but you can develop a more advanced thing of the following code using Java 17 (w/ preview features enabled) and `javax.json` (+ some Lombok for Java boilerplate):\r\n\r\n```java\r\n@RequiredArgsConstructor(access = AccessLevel.PRIVATE)\r\npublic final class PathJsonParser\r\n\t\timplements JsonParser, Iterator&lt;JsonParser.Event&gt; {\r\n\r\n\tprivate static final int DEFAULT_PATH_LENGTH = 32;\r\n\r\n\tprivate final JsonParser jsonParser;\r\n\tprivate final AbstractPathElement[] path;\r\n\tprivate int last;\r\n\r\n\tpublic static PathJsonParser create(final JsonParser jsonParser) {\r\n\t\tfinal int maxPathLength = DEFAULT_PATH_LENGTH;\r\n\t\tfinal PathJsonParser pathJsonParser = new PathJsonParser(jsonParser, new AbstractPathElement[maxPathLength]);\r\n\t\tpathJsonParser.path[0] = AbstractPathElement.Root.instance;\r\n\t\tfor ( int i = 1; i &lt; maxPathLength; i++ ) {\r\n\t\t\tpathJsonParser.path[i] = new AbstractPathElement.Container();\r\n\t\t}\r\n\t\treturn pathJsonParser;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic Event next() {\r\n\t\tfinal Event event = jsonParser.next();\r\n\t\tswitch ( event ) {\r\n\t\tcase START_ARRAY -&gt; {\r\n\t\t\tpath[last].tryIncreaseIndex();\r\n\t\t\tpath[++last].reset(JsonValue.ValueType.ARRAY);\r\n\t\t}\r\n\t\tcase START_OBJECT -&gt; {\r\n\t\t\tpath[last].tryIncreaseIndex();\r\n\t\t\tpath[++last].reset(JsonValue.ValueType.OBJECT);\r\n\t\t}\r\n\t\tcase KEY_NAME -&gt; path[last].setKeyName(jsonParser.getString());\r\n\t\tcase VALUE_STRING -&gt; path[last].tryIncreaseIndex();\r\n\t\tcase VALUE_NUMBER -&gt; path[last].tryIncreaseIndex();\r\n\t\tcase VALUE_TRUE -&gt; path[last].tryIncreaseIndex();\r\n\t\tcase VALUE_FALSE -&gt; path[last].tryIncreaseIndex();\r\n\t\tcase VALUE_NULL -&gt; path[last].tryIncreaseIndex();\r\n\t\tcase END_OBJECT -&gt; --last;\r\n\t\tcase END_ARRAY -&gt; --last;\r\n\t\tdefault -&gt; throw new AssertionError(event);\r\n\t\t}\r\n\t\treturn event;\r\n\t}\r\n\r\n\tpublic boolean matchesRoot(final int at) {\r\n\t\t@Nullable\r\n\t\tfinal AbstractPathElement e = tryElementAt(at);\r\n\t\treturn e != null &amp;&amp; e.matchesRoot();\r\n\t}\r\n\r\n\tpublic boolean matchesIndex(final int at, final IntPredicate predicate) {\r\n\t\t@Nullable\r\n\t\tfinal AbstractPathElement e = tryElementAt(at);\r\n\t\treturn e != null &amp;&amp; e.matchesIndex(predicate);\r\n\t}\r\n\r\n\tpublic boolean matchesName(final int at, final Predicate&lt;? super String&gt; predicate) {\r\n\t\t@Nullable\r\n\t\tfinal AbstractPathElement e = tryElementAt(at);\r\n\t\treturn e != null &amp;&amp; e.matchesName(predicate);\r\n\t}\r\n\r\n\t// @formatter:off\r\n\t@Override public boolean hasNext() { return jsonParser.hasNext(); }\r\n\t@Override public String getString() { return jsonParser.getString(); }\r\n\t@Override public boolean isIntegralNumber() { return jsonParser.isIntegralNumber(); }\r\n\t@Override public int getInt() { return jsonParser.getInt(); }\r\n\t@Override public long getLong() { return jsonParser.getLong(); }\r\n\t@Override public BigDecimal getBigDecimal() { return jsonParser.getBigDecimal(); }\r\n\t@Override public JsonLocation getLocation() { return jsonParser.getLocation(); }\r\n\t@Override @SuppressWarnings(&quot;MethodDoesntCallSuperMethod&quot;) public JsonObject getObject() { return jsonParser.getObject(); }\r\n\t@Override @SuppressWarnings(&quot;MethodDoesntCallSuperMethod&quot;) public JsonValue getValue() { return jsonParser.getValue(); }\r\n\t@Override @SuppressWarnings(&quot;MethodDoesntCallSuperMethod&quot;) public JsonArray getArray() { return jsonParser.getArray(); }\r\n\t@Override @SuppressWarnings(&quot;MethodDoesntCallSuperMethod&quot;) public Stream&lt;JsonValue&gt; getArrayStream() { return jsonParser.getArrayStream(); }\r\n\t@Override @SuppressWarnings(&quot;MethodDoesntCallSuperMethod&quot;) public Stream&lt;Map.Entry&lt;String, JsonValue&gt;&gt; getObjectStream() { return jsonParser.getObjectStream(); }\r\n\t@Override @SuppressWarnings(&quot;MethodDoesntCallSuperMethod&quot;) public Stream&lt;JsonValue&gt; getValueStream() { return jsonParser.getValueStream(); }\r\n\t@Override @SuppressWarnings(&quot;MethodDoesntCallSuperMethod&quot;) public void skipArray() { jsonParser.skipArray(); }\r\n\t@Override @SuppressWarnings(&quot;MethodDoesntCallSuperMethod&quot;) public void skipObject() { jsonParser.skipObject(); }\r\n\t@Override public void close() { jsonParser.close(); }\r\n\t// @formatter:on\r\n\r\n\t@Nullable\r\n\tprivate AbstractPathElement tryElementAt(final int at) {\r\n\t\tfinal int pathAt;\r\n\t\tif ( at &gt;= 0 ) {\r\n\t\t\tpathAt = at;\r\n\t\t} else {\r\n\t\t\tpathAt = last + at + 1;\r\n\t\t}\r\n\t\tif ( pathAt &lt; 0 || pathAt &gt; last ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn path[pathAt];\r\n\t}\r\n\r\n\tprivate abstract static sealed class AbstractPathElement\r\n\t\t\tpermits AbstractPathElement.Root, AbstractPathElement.Container {\r\n\r\n\t\tabstract void reset(JsonValue.ValueType valueType);\r\n\r\n\t\tabstract void setKeyName(String keyName);\r\n\r\n\t\tabstract void tryIncreaseIndex();\r\n\r\n\t\tabstract boolean matchesRoot();\r\n\r\n\t\tabstract boolean matchesIndex(IntPredicate predicate);\r\n\r\n\t\tabstract boolean matchesName(Predicate&lt;? super String&gt; predicate);\r\n\r\n\t\t@RequiredArgsConstructor(access = AccessLevel.PRIVATE)\r\n\t\tprivate static final class Root\r\n\t\t\t\textends AbstractPathElement {\r\n\r\n\t\t\tprivate static final AbstractPathElement instance = new Root();\r\n\r\n\t\t\t@Override\r\n\t\t\tvoid reset(final JsonValue.ValueType valueType) {\r\n\t\t\t\tthrow new UnsupportedOperationException();\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tvoid setKeyName(final String keyName) {\r\n\t\t\t\tthrow new UnsupportedOperationException();\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tvoid tryIncreaseIndex() {\r\n\t\t\t\t// do nothing\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tboolean matchesRoot() {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tboolean matchesIndex(final IntPredicate predicate) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tboolean matchesName(final Predicate&lt;? super String&gt; predicate) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t@RequiredArgsConstructor(access = AccessLevel.PACKAGE)\r\n\t\tprivate static final class Container\r\n\t\t\t\textends AbstractPathElement {\r\n\r\n\t\t\tprivate static final String NO_KEY_NAME = null;\r\n\t\t\tprivate static final int NO_INDEX = -1;\r\n\r\n\t\t\tprivate JsonValue.ValueType valueType;\r\n\t\t\tprivate String keyName = NO_KEY_NAME;\r\n\t\t\tprivate int index = NO_INDEX;\r\n\r\n\t\t\t@Override\r\n\t\t\tvoid reset(final JsonValue.ValueType valueType) {\r\n\t\t\t\tthis.valueType = valueType;\r\n\t\t\t\tkeyName = NO_KEY_NAME;\r\n\t\t\t\tindex = NO_INDEX;\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tvoid setKeyName(final String keyName) {\r\n\t\t\t\tthis.keyName = keyName;\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tvoid tryIncreaseIndex() {\r\n\t\t\t\tif ( valueType == JsonValue.ValueType.ARRAY ) {\r\n\t\t\t\t\tindex++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tboolean matchesRoot() {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tboolean matchesIndex(final IntPredicate predicate) {\r\n\t\t\t\treturn switch ( valueType ) {\r\n\t\t\t\t\tcase ARRAY -&gt; index != NO_INDEX &amp;&amp; predicate.test(index);\r\n\t\t\t\t\tcase OBJECT -&gt; false;\r\n\t\t\t\t\tcase STRING, NUMBER, TRUE, FALSE, NULL -&gt; throw new AssertionError(valueType);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tboolean matchesName(final Predicate&lt;? super String&gt; predicate) {\r\n\t\t\t\treturn switch ( valueType ) {\r\n\t\t\t\t\tcase ARRAY -&gt; false;\r\n\t\t\t\t\tcase OBJECT -&gt; !Objects.equals(keyName, NO_KEY_NAME) &amp;&amp; predicate.test(keyName);\r\n\t\t\t\t\tcase STRING, NUMBER, TRUE, FALSE, NULL -&gt; throw new AssertionError(valueType);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n```\r\n\r\nExample of use:\r\n\r\n```java\r\npublic final class PathJsonParserTest {\r\n\r\n\t// $.files.0.content.0.fileContent.subList.0.subList.0.text\r\n\tprivate static boolean matches(final PathJsonParser parser) {\r\n\t\treturn parser.matchesName(-1, name -&gt; name.equals(&quot;text&quot;))\r\n\t\t\t\t&amp;&amp; parser.matchesIndex(-2, index -&gt; true)\r\n\t\t\t\t&amp;&amp; parser.matchesName(-3, name -&gt; name.equals(&quot;subList&quot;))\r\n\t\t\t\t&amp;&amp; parser.matchesIndex(-4, index -&gt; true)\r\n\t\t\t\t&amp;&amp; parser.matchesName(-5, name -&gt; name.equals(&quot;subList&quot;))\r\n\t\t\t\t&amp;&amp; parser.matchesName(-6, name -&gt; name.equals(&quot;fileContent&quot;))\r\n\t\t\t\t&amp;&amp; parser.matchesIndex(-7, index -&gt; true)\r\n\t\t\t\t&amp;&amp; parser.matchesName(-8, name -&gt; name.equals(&quot;content&quot;))\r\n\t\t\t\t&amp;&amp; parser.matchesIndex(-9, index -&gt; true)\r\n\t\t\t\t&amp;&amp; parser.matchesName(-10, name -&gt; name.equals(&quot;files&quot;))\r\n\t\t\t\t&amp;&amp; parser.matchesRoot(-11);\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void test()\r\n\t\t\tthrows IOException {\r\n\t\ttry ( final PathJsonParser parser = PathJsonParser.create(JsonParsers.openFromResource(PathJsonParserTest.class, &quot;input.json&quot;)) ) {\r\n\t\t\tfor ( ; parser.hasNext(); parser.next() ) {\r\n\t\t\t\tif ( matches(parser) ) {\r\n\t\t\t\t\tparser.next();\r\n\t\t\t\t\tSystem.out.println(parser.getValue());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n```\r\n\r\nOf course, not that cool-looking as JsonPath is, but you can do the following:\r\n\r\n* implement a matcher builder API to make it look nicer;\r\n* implement a JSON Path-compliant parser to build matchers;\r\n* wrap the `for/if/next()` pattern into a generic algorithm (similar to what `BufferedReader.readLine()` implements or wrap it for Stream API);\r\n* implement some kind of simple JSON-to-objects deserializer.\r\n\r\nOr, if possible, find a good code generator that can generate a streamed parser having as small runtime cost as possible (its outcome would be very similar to yours, but working). (Ping me please if you are aware of any.)","title":"Streaming large JSON from input stream efficiently in Java","body":"<p>In short,</p>\n<ul>\n<li>your code does not work because it implements a wrong algorithm;</li>\n<li>JsonPath, as it has been suggested, seems to be a good DSL implementation, but it uses a DOM approach collecting entire JSON tree into memory, therefore you'll run into OOM again.</li>\n</ul>\n<p>You have two solutions:</p>\n<ul>\n<li>implement a proper algorithm within your current approach (and I agree you were on a right way);</li>\n<li>try implementing something similar to what JsonPath implements breaking down the problem to smaller ones supporting really streaming approach.</li>\n</ul>\n<p>I wouldn't document much of my code since it's pretty easy to understand and adapt to other libraries, but you can develop a more advanced thing of the following code using Java 17 (w/ preview features enabled) and <code>javax.json</code> (+ some Lombok for Java boilerplate):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequiredArgsConstructor(access = AccessLevel.PRIVATE)\npublic final class PathJsonParser\n        implements JsonParser, Iterator&lt;JsonParser.Event&gt; {\n\n    private static final int DEFAULT_PATH_LENGTH = 32;\n\n    private final JsonParser jsonParser;\n    private final AbstractPathElement[] path;\n    private int last;\n\n    public static PathJsonParser create(final JsonParser jsonParser) {\n        final int maxPathLength = DEFAULT_PATH_LENGTH;\n        final PathJsonParser pathJsonParser = new PathJsonParser(jsonParser, new AbstractPathElement[maxPathLength]);\n        pathJsonParser.path[0] = AbstractPathElement.Root.instance;\n        for ( int i = 1; i &lt; maxPathLength; i++ ) {\n            pathJsonParser.path[i] = new AbstractPathElement.Container();\n        }\n        return pathJsonParser;\n    }\n\n    @Override\n    public Event next() {\n        final Event event = jsonParser.next();\n        switch ( event ) {\n        case START_ARRAY -&gt; {\n            path[last].tryIncreaseIndex();\n            path[++last].reset(JsonValue.ValueType.ARRAY);\n        }\n        case START_OBJECT -&gt; {\n            path[last].tryIncreaseIndex();\n            path[++last].reset(JsonValue.ValueType.OBJECT);\n        }\n        case KEY_NAME -&gt; path[last].setKeyName(jsonParser.getString());\n        case VALUE_STRING -&gt; path[last].tryIncreaseIndex();\n        case VALUE_NUMBER -&gt; path[last].tryIncreaseIndex();\n        case VALUE_TRUE -&gt; path[last].tryIncreaseIndex();\n        case VALUE_FALSE -&gt; path[last].tryIncreaseIndex();\n        case VALUE_NULL -&gt; path[last].tryIncreaseIndex();\n        case END_OBJECT -&gt; --last;\n        case END_ARRAY -&gt; --last;\n        default -&gt; throw new AssertionError(event);\n        }\n        return event;\n    }\n\n    public boolean matchesRoot(final int at) {\n        @Nullable\n        final AbstractPathElement e = tryElementAt(at);\n        return e != null &amp;&amp; e.matchesRoot();\n    }\n\n    public boolean matchesIndex(final int at, final IntPredicate predicate) {\n        @Nullable\n        final AbstractPathElement e = tryElementAt(at);\n        return e != null &amp;&amp; e.matchesIndex(predicate);\n    }\n\n    public boolean matchesName(final int at, final Predicate&lt;? super String&gt; predicate) {\n        @Nullable\n        final AbstractPathElement e = tryElementAt(at);\n        return e != null &amp;&amp; e.matchesName(predicate);\n    }\n\n    // @formatter:off\n    @Override public boolean hasNext() { return jsonParser.hasNext(); }\n    @Override public String getString() { return jsonParser.getString(); }\n    @Override public boolean isIntegralNumber() { return jsonParser.isIntegralNumber(); }\n    @Override public int getInt() { return jsonParser.getInt(); }\n    @Override public long getLong() { return jsonParser.getLong(); }\n    @Override public BigDecimal getBigDecimal() { return jsonParser.getBigDecimal(); }\n    @Override public JsonLocation getLocation() { return jsonParser.getLocation(); }\n    @Override @SuppressWarnings(&quot;MethodDoesntCallSuperMethod&quot;) public JsonObject getObject() { return jsonParser.getObject(); }\n    @Override @SuppressWarnings(&quot;MethodDoesntCallSuperMethod&quot;) public JsonValue getValue() { return jsonParser.getValue(); }\n    @Override @SuppressWarnings(&quot;MethodDoesntCallSuperMethod&quot;) public JsonArray getArray() { return jsonParser.getArray(); }\n    @Override @SuppressWarnings(&quot;MethodDoesntCallSuperMethod&quot;) public Stream&lt;JsonValue&gt; getArrayStream() { return jsonParser.getArrayStream(); }\n    @Override @SuppressWarnings(&quot;MethodDoesntCallSuperMethod&quot;) public Stream&lt;Map.Entry&lt;String, JsonValue&gt;&gt; getObjectStream() { return jsonParser.getObjectStream(); }\n    @Override @SuppressWarnings(&quot;MethodDoesntCallSuperMethod&quot;) public Stream&lt;JsonValue&gt; getValueStream() { return jsonParser.getValueStream(); }\n    @Override @SuppressWarnings(&quot;MethodDoesntCallSuperMethod&quot;) public void skipArray() { jsonParser.skipArray(); }\n    @Override @SuppressWarnings(&quot;MethodDoesntCallSuperMethod&quot;) public void skipObject() { jsonParser.skipObject(); }\n    @Override public void close() { jsonParser.close(); }\n    // @formatter:on\n\n    @Nullable\n    private AbstractPathElement tryElementAt(final int at) {\n        final int pathAt;\n        if ( at &gt;= 0 ) {\n            pathAt = at;\n        } else {\n            pathAt = last + at + 1;\n        }\n        if ( pathAt &lt; 0 || pathAt &gt; last ) {\n            return null;\n        }\n        return path[pathAt];\n    }\n\n    private abstract static sealed class AbstractPathElement\n            permits AbstractPathElement.Root, AbstractPathElement.Container {\n\n        abstract void reset(JsonValue.ValueType valueType);\n\n        abstract void setKeyName(String keyName);\n\n        abstract void tryIncreaseIndex();\n\n        abstract boolean matchesRoot();\n\n        abstract boolean matchesIndex(IntPredicate predicate);\n\n        abstract boolean matchesName(Predicate&lt;? super String&gt; predicate);\n\n        @RequiredArgsConstructor(access = AccessLevel.PRIVATE)\n        private static final class Root\n                extends AbstractPathElement {\n\n            private static final AbstractPathElement instance = new Root();\n\n            @Override\n            void reset(final JsonValue.ValueType valueType) {\n                throw new UnsupportedOperationException();\n            }\n\n            @Override\n            void setKeyName(final String keyName) {\n                throw new UnsupportedOperationException();\n            }\n\n            @Override\n            void tryIncreaseIndex() {\n                // do nothing\n            }\n\n            @Override\n            boolean matchesRoot() {\n                return true;\n            }\n\n            @Override\n            boolean matchesIndex(final IntPredicate predicate) {\n                return false;\n            }\n\n            @Override\n            boolean matchesName(final Predicate&lt;? super String&gt; predicate) {\n                return false;\n            }\n\n        }\n\n        @RequiredArgsConstructor(access = AccessLevel.PACKAGE)\n        private static final class Container\n                extends AbstractPathElement {\n\n            private static final String NO_KEY_NAME = null;\n            private static final int NO_INDEX = -1;\n\n            private JsonValue.ValueType valueType;\n            private String keyName = NO_KEY_NAME;\n            private int index = NO_INDEX;\n\n            @Override\n            void reset(final JsonValue.ValueType valueType) {\n                this.valueType = valueType;\n                keyName = NO_KEY_NAME;\n                index = NO_INDEX;\n            }\n\n            @Override\n            void setKeyName(final String keyName) {\n                this.keyName = keyName;\n            }\n\n            @Override\n            void tryIncreaseIndex() {\n                if ( valueType == JsonValue.ValueType.ARRAY ) {\n                    index++;\n                }\n            }\n\n            @Override\n            boolean matchesRoot() {\n                return false;\n            }\n\n            @Override\n            boolean matchesIndex(final IntPredicate predicate) {\n                return switch ( valueType ) {\n                    case ARRAY -&gt; index != NO_INDEX &amp;&amp; predicate.test(index);\n                    case OBJECT -&gt; false;\n                    case STRING, NUMBER, TRUE, FALSE, NULL -&gt; throw new AssertionError(valueType);\n                };\n            }\n\n            @Override\n            boolean matchesName(final Predicate&lt;? super String&gt; predicate) {\n                return switch ( valueType ) {\n                    case ARRAY -&gt; false;\n                    case OBJECT -&gt; !Objects.equals(keyName, NO_KEY_NAME) &amp;&amp; predicate.test(keyName);\n                    case STRING, NUMBER, TRUE, FALSE, NULL -&gt; throw new AssertionError(valueType);\n                };\n            }\n\n        }\n\n    }\n\n}\n</code></pre>\n<p>Example of use:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public final class PathJsonParserTest {\n\n    // $.files.0.content.0.fileContent.subList.0.subList.0.text\n    private static boolean matches(final PathJsonParser parser) {\n        return parser.matchesName(-1, name -&gt; name.equals(&quot;text&quot;))\n                &amp;&amp; parser.matchesIndex(-2, index -&gt; true)\n                &amp;&amp; parser.matchesName(-3, name -&gt; name.equals(&quot;subList&quot;))\n                &amp;&amp; parser.matchesIndex(-4, index -&gt; true)\n                &amp;&amp; parser.matchesName(-5, name -&gt; name.equals(&quot;subList&quot;))\n                &amp;&amp; parser.matchesName(-6, name -&gt; name.equals(&quot;fileContent&quot;))\n                &amp;&amp; parser.matchesIndex(-7, index -&gt; true)\n                &amp;&amp; parser.matchesName(-8, name -&gt; name.equals(&quot;content&quot;))\n                &amp;&amp; parser.matchesIndex(-9, index -&gt; true)\n                &amp;&amp; parser.matchesName(-10, name -&gt; name.equals(&quot;files&quot;))\n                &amp;&amp; parser.matchesRoot(-11);\n    }\n\n    @Test\n    public void test()\n            throws IOException {\n        try ( final PathJsonParser parser = PathJsonParser.create(JsonParsers.openFromResource(PathJsonParserTest.class, &quot;input.json&quot;)) ) {\n            for ( ; parser.hasNext(); parser.next() ) {\n                if ( matches(parser) ) {\n                    parser.next();\n                    System.out.println(parser.getValue());\n                }\n            }\n        }\n    }\n\n}\n</code></pre>\n<p>Of course, not that cool-looking as JsonPath is, but you can do the following:</p>\n<ul>\n<li>implement a matcher builder API to make it look nicer;</li>\n<li>implement a JSON Path-compliant parser to build matchers;</li>\n<li>wrap the <code>for/if/next()</code> pattern into a generic algorithm (similar to what <code>BufferedReader.readLine()</code> implements or wrap it for Stream API);</li>\n<li>implement some kind of simple JSON-to-objects deserializer.</li>\n</ul>\n<p>Or, if possible, find a good code generator that can generate a streamed parser having as small runtime cost as possible (its outcome would be very similar to yours, but working). (Ping me please if you are aware of any.)</p>\n"},{"tags":[],"owner":{"account_id":5909119,"reputation":93,"user_id":4649936,"display_name":"Netsab612"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660123460,"creation_date":1660123460,"answer_id":73303798,"question_id":71380933,"body_markdown":"There might be a really easy solution to your problem.\r\nYou can use Jackson &quot;JsonParser&quot; to stream your objects and ObjectMapper to parse them without re-writing the parsing logic.\r\n\r\nThis would look like this :\r\n\r\n    try (JsonParser jsonParser = objectMapper.getFactory().createParser(inputStreamReader)) {\r\n      if (jsonParser.nextToken() != JsonToken.START_ARRAY) {\r\n        throw new IllegalStateException(&quot;Expected content to be an array&quot;);\r\n      }\r\n\r\n      while (jsonParser.nextToken() != JsonToken.END_ARRAY) {\r\n        MyObject myObject = objectMapper.readValue(jsonParser, MyObject.class);\r\n        log.info(&quot;This is my object: {}&quot;, myObject);\r\n      }\r\n    }\r\n\r\nIf each of your object are small enough (which is the case most of the time) you can handle easily files with GB of data. And it is not specific to your case.\r\n\r\nOnly catch is this will not work if one of your object is huge.\r\n\r\nI hope it helps someone.","title":"Streaming large JSON from input stream efficiently in Java","body":"<p>There might be a really easy solution to your problem.\nYou can use Jackson &quot;JsonParser&quot; to stream your objects and ObjectMapper to parse them without re-writing the parsing logic.</p>\n<p>This would look like this :</p>\n<pre><code>try (JsonParser jsonParser = objectMapper.getFactory().createParser(inputStreamReader)) {\n  if (jsonParser.nextToken() != JsonToken.START_ARRAY) {\n    throw new IllegalStateException(&quot;Expected content to be an array&quot;);\n  }\n\n  while (jsonParser.nextToken() != JsonToken.END_ARRAY) {\n    MyObject myObject = objectMapper.readValue(jsonParser, MyObject.class);\n    log.info(&quot;This is my object: {}&quot;, myObject);\n  }\n}\n</code></pre>\n<p>If each of your object are small enough (which is the case most of the time) you can handle easily files with GB of data. And it is not specific to your case.</p>\n<p>Only catch is this will not work if one of your object is huge.</p>\n<p>I hope it helps someone.</p>\n"}],"owner":{"account_id":9582475,"reputation":179,"user_id":7116503,"accept_rate":75,"display_name":"pcCC28"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3569,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":71398156,"answer_count":3,"score":2,"last_activity_date":1660123460,"creation_date":1646655293,"question_id":71380933,"body_markdown":"In order to save memory and avoid an OOM error, I want to stream a large JSON from an input stream and extract the desired things from it. More exactly, I want to extract and save some strings from that JSON: \r\n\r\n 1. files.content.fileContent.subList.text = &quot;some text in file&quot;\r\n 2. files.content.fileContent.subList.text = &quot;some text in file2&quot;\r\n\r\nand save them into a String variable:\r\n\r\n    String result = &quot;some text in file \\r\\nsome text in file2&quot;\r\n\r\nI tried to parse the JSON using Jackson:\r\n\r\n```\r\n        JsonFactory jsonFactory = new JsonFactory();\r\n\r\n        StringBuilder result = new StringBuilder();\r\n        try (JsonParser jsonParser = jsonFactory.createParser(jsonAsInputStream)) {\r\n            String fieldName;\r\n            while (jsonParser.nextToken() != JsonToken.END_OBJECT) {\r\n                jsonParser.nextToken();\r\n                fieldName = jsonParser.getCurrentName();\r\n                if (&quot;files&quot;.equals(fieldName)) {\r\n\r\n                    while (true) {\r\n                        jsonParser.nextToken();\r\n                        fieldName = jsonParser.getCurrentName();\r\n                        if (&quot;content&quot;.equals(fieldName)) {\r\n                            jsonParser.nextToken();\r\n                            fieldName = jsonParser.getCurrentName();\r\n                            while (true) {\r\n                                if (&quot;text&quot;.equals(fieldName)) {\r\n                                    result.append(jsonParser.getText());\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            LOGGER.info(&quot;result: {}&quot;, result);\r\n        } catch (JsonParseException e) {\r\n            e.printStackTrace();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n```\r\n\r\nThe above is not working at all, that solution gets complicated. Is there any simple way to parse the JSON inputStream and extract some text from it?\r\n\r\nBelow is the JSON attached:\r\n\r\n    {\r\n    &quot;id&quot;: &quot;1&quot;,\r\n    &quot;name&quot;: &quot;TestFile.xlsx&quot;,\r\n    &quot;files&quot;: [\r\n        {\r\n            &quot;id&quot;: &quot;1&quot;,\r\n            &quot;fileName&quot;: &quot;TestFile.xlsx&quot;,\r\n            &quot;types&quot;: {\r\n                &quot;fileId&quot;: &quot;1&quot;,\r\n                &quot;context&quot;: [\r\n                    {\r\n                        &quot;id&quot;: 1,\r\n                        &quot;contextId&quot;: &quot;xyz&quot;,\r\n                        &quot;metadata&quot;: {\r\n                            &quot;abc&quot;: &quot;1&quot;\r\n                        }\r\n                    },\r\n                    {\r\n                        &quot;id&quot;: 2,\r\n                        &quot;contextId&quot;: &quot;abc&quot;\r\n                    }\r\n                ],\r\n                &quot;fileSettings&quot;: [\r\n                    {\r\n                        &quot;id&quot;: 1,\r\n                        &quot;settingId&quot;: 1\r\n                    },\r\n                    {\r\n                        &quot;id&quot;: 2,\r\n                        &quot;settingId&quot;: 2\r\n                    }\r\n                    \r\n                ],\r\n                &quot;fileAttachments&quot;: [\r\n                    {\r\n                        &quot;id&quot;: 1,\r\n                        &quot;canDelete&quot;: true,\r\n                        &quot;canAttach&quot;: []\r\n                    }\r\n                ],\r\n                &quot;replacements&quot;: [\r\n                    {\r\n                        &quot;id&quot;: 1,\r\n                        &quot;replacementText&quot;: &quot;xcv&quot;\r\n                    }\r\n                ]\r\n            },\r\n            &quot;content&quot;: [\r\n                {\r\n                    &quot;id&quot;: &quot;1&quot;,\r\n                    &quot;contextList&quot;: [\r\n                        1,\r\n                        2,\r\n                        3\r\n                    ],\r\n                    &quot;fileContent&quot;: {\r\n                        &quot;contentType&quot;: &quot;text&quot;,\r\n                        &quot;subList&quot;: [\r\n                            {\r\n                                &quot;id&quot;: &quot;1&quot;,\r\n                                &quot;subList&quot;: [\r\n                                    {\r\n                                        &quot;id&quot;: &quot;1&quot;,\r\n                                        &quot;text&quot;: &quot;some text in file&quot;,\r\n                                        &quot;type&quot;: &quot;text&quot;\r\n                                    }\r\n                                ]\r\n                            }\r\n                        ]\r\n                    },\r\n                    &quot;externalContent&quot;: {\r\n                        &quot;id&quot;: &quot;1&quot;,\r\n                        &quot;children&quot;: [\r\n                            {\r\n                                &quot;id&quot;: &quot;1&quot;,\r\n                                &quot;contentType&quot;: &quot;text corrupted&quot;,\r\n                                &quot;children&quot;: []\r\n                            }\r\n                        ]\r\n                    }\r\n                },\r\n                {\r\n                    &quot;id&quot;: &quot;2&quot;,\r\n                    &quot;contextList&quot;: [\r\n                        1,\r\n                        2\r\n                    ],\r\n                    &quot;fileContent&quot;: {\r\n                        &quot;contentType&quot;: &quot;text&quot;,\r\n                        &quot;subList&quot;: [\r\n                            {\r\n                                &quot;id&quot;: &quot;2&quot;,\r\n                                &quot;subList&quot;: [\r\n                                    {\r\n                                        &quot;id&quot;: &quot;1&quot;,\r\n                                        &quot;text&quot;: &quot;some text in file2&quot;,\r\n                                        &quot;type&quot;: &quot;text&quot;\r\n                                    }\r\n                                ]\r\n                            }\r\n                        ]\r\n                    },\r\n                    &quot;externalContent&quot;: {\r\n                        &quot;id&quot;: &quot;2&quot;,\r\n                        &quot;children&quot;: [\r\n                            {\r\n                                &quot;id&quot;: &quot;2&quot;,\r\n                                &quot;contentType&quot;: &quot;text corrupted2&quot;,\r\n                                &quot;children&quot;: []\r\n                            }\r\n                        ]\r\n                    }\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n}","title":"Streaming large JSON from input stream efficiently in Java","body":"<p>In order to save memory and avoid an OOM error, I want to stream a large JSON from an input stream and extract the desired things from it. More exactly, I want to extract and save some strings from that JSON:</p>\n<ol>\n<li>files.content.fileContent.subList.text = &quot;some text in file&quot;</li>\n<li>files.content.fileContent.subList.text = &quot;some text in file2&quot;</li>\n</ol>\n<p>and save them into a String variable:</p>\n<pre><code>String result = &quot;some text in file \\r\\nsome text in file2&quot;\n</code></pre>\n<p>I tried to parse the JSON using Jackson:</p>\n<pre><code>        JsonFactory jsonFactory = new JsonFactory();\n\n        StringBuilder result = new StringBuilder();\n        try (JsonParser jsonParser = jsonFactory.createParser(jsonAsInputStream)) {\n            String fieldName;\n            while (jsonParser.nextToken() != JsonToken.END_OBJECT) {\n                jsonParser.nextToken();\n                fieldName = jsonParser.getCurrentName();\n                if (&quot;files&quot;.equals(fieldName)) {\n\n                    while (true) {\n                        jsonParser.nextToken();\n                        fieldName = jsonParser.getCurrentName();\n                        if (&quot;content&quot;.equals(fieldName)) {\n                            jsonParser.nextToken();\n                            fieldName = jsonParser.getCurrentName();\n                            while (true) {\n                                if (&quot;text&quot;.equals(fieldName)) {\n                                    result.append(jsonParser.getText());\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            LOGGER.info(&quot;result: {}&quot;, result);\n        } catch (JsonParseException e) {\n            e.printStackTrace();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n</code></pre>\n<p>The above is not working at all, that solution gets complicated. Is there any simple way to parse the JSON inputStream and extract some text from it?</p>\n<p>Below is the JSON attached:</p>\n<pre><code>{\n&quot;id&quot;: &quot;1&quot;,\n&quot;name&quot;: &quot;TestFile.xlsx&quot;,\n&quot;files&quot;: [\n    {\n        &quot;id&quot;: &quot;1&quot;,\n        &quot;fileName&quot;: &quot;TestFile.xlsx&quot;,\n        &quot;types&quot;: {\n            &quot;fileId&quot;: &quot;1&quot;,\n            &quot;context&quot;: [\n                {\n                    &quot;id&quot;: 1,\n                    &quot;contextId&quot;: &quot;xyz&quot;,\n                    &quot;metadata&quot;: {\n                        &quot;abc&quot;: &quot;1&quot;\n                    }\n                },\n                {\n                    &quot;id&quot;: 2,\n                    &quot;contextId&quot;: &quot;abc&quot;\n                }\n            ],\n            &quot;fileSettings&quot;: [\n                {\n                    &quot;id&quot;: 1,\n                    &quot;settingId&quot;: 1\n                },\n                {\n                    &quot;id&quot;: 2,\n                    &quot;settingId&quot;: 2\n                }\n                \n            ],\n            &quot;fileAttachments&quot;: [\n                {\n                    &quot;id&quot;: 1,\n                    &quot;canDelete&quot;: true,\n                    &quot;canAttach&quot;: []\n                }\n            ],\n            &quot;replacements&quot;: [\n                {\n                    &quot;id&quot;: 1,\n                    &quot;replacementText&quot;: &quot;xcv&quot;\n                }\n            ]\n        },\n        &quot;content&quot;: [\n            {\n                &quot;id&quot;: &quot;1&quot;,\n                &quot;contextList&quot;: [\n                    1,\n                    2,\n                    3\n                ],\n                &quot;fileContent&quot;: {\n                    &quot;contentType&quot;: &quot;text&quot;,\n                    &quot;subList&quot;: [\n                        {\n                            &quot;id&quot;: &quot;1&quot;,\n                            &quot;subList&quot;: [\n                                {\n                                    &quot;id&quot;: &quot;1&quot;,\n                                    &quot;text&quot;: &quot;some text in file&quot;,\n                                    &quot;type&quot;: &quot;text&quot;\n                                }\n                            ]\n                        }\n                    ]\n                },\n                &quot;externalContent&quot;: {\n                    &quot;id&quot;: &quot;1&quot;,\n                    &quot;children&quot;: [\n                        {\n                            &quot;id&quot;: &quot;1&quot;,\n                            &quot;contentType&quot;: &quot;text corrupted&quot;,\n                            &quot;children&quot;: []\n                        }\n                    ]\n                }\n            },\n            {\n                &quot;id&quot;: &quot;2&quot;,\n                &quot;contextList&quot;: [\n                    1,\n                    2\n                ],\n                &quot;fileContent&quot;: {\n                    &quot;contentType&quot;: &quot;text&quot;,\n                    &quot;subList&quot;: [\n                        {\n                            &quot;id&quot;: &quot;2&quot;,\n                            &quot;subList&quot;: [\n                                {\n                                    &quot;id&quot;: &quot;1&quot;,\n                                    &quot;text&quot;: &quot;some text in file2&quot;,\n                                    &quot;type&quot;: &quot;text&quot;\n                                }\n                            ]\n                        }\n                    ]\n                },\n                &quot;externalContent&quot;: {\n                    &quot;id&quot;: &quot;2&quot;,\n                    &quot;children&quot;: [\n                        {\n                            &quot;id&quot;: &quot;2&quot;,\n                            &quot;contentType&quot;: &quot;text corrupted2&quot;,\n                            &quot;children&quot;: []\n                        }\n                    ]\n                }\n            }\n        ]\n    }\n]\n</code></pre>\n<p>}</p>\n"},{"tags":["java","list","math","java-stream","vectorization"],"comments":[{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":3,"creation_date":1660069029,"post_id":73296071,"comment_id":129444267,"body_markdown":"Just curious: Do you have any evidence that using a Java stream-based approach might be &quot;_faster and less resource heavy_&quot; than a &quot;standard&quot; `for` loop in your situation? (I don&#39;t know one way or the other, by the way - and I expect any attempt to micro-benchmark results in a meaningful way could be challenging).","body":"Just curious: Do you have any evidence that using a Java stream-based approach might be &quot;<i>faster and less resource heavy</i>&quot; than a &quot;standard&quot; <code>for</code> loop in your situation? (I don&#39;t know one way or the other, by the way - and I expect any attempt to micro-benchmark results in a meaningful way could be challenging)."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1660114535,"post_id":73296071,"comment_id":129453165,"body_markdown":"By the way, [`List.of`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html#of(E,E,E,E,E)) in Java 9+.","body":"By the way, <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html#of(E,E,E,E,E)\" rel=\"nofollow noreferrer\"><code>List.of</code></a> in Java 9+."}],"answers":[{"tags":[],"owner":{"account_id":5569841,"reputation":3750,"user_id":4415625,"display_name":"dani-vta"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1660068340,"creation_date":1660068112,"answer_id":73296277,"question_id":73296071,"body_markdown":"You can multiply the elements of your arrays with each other via stream, but it won&#39;t be more efficient than a traditional loop. However, for such small sets of data the overhead is so small it won&#39;t make any difference.\r\n\r\nHere is an implementation via stream. Basically, you could use the `IntStream` class to iterate both of your lists from 0 to the size of the smallest list (excluded). Then, map each int index to a Double object representing the product of the i-th element of the `margins` list with the i-th element of the `quantity` list and finally collect the results into a `List&lt;Double&gt;`.\r\n\r\n```\r\nList&lt;Double&gt; margins = Arrays.asList(1.0, 2.0, 3.0, 4.0, 5.0);\r\nList&lt;Integer&gt; quantity = Arrays.asList(1, 2, 3, 4, 5);\r\n\r\nList&lt;Double&gt; res = IntStream.range(0, Math.min(margins.size(), quantity.size()))\r\n        .mapToObj(i -&gt; margins.get(i) * quantity.get(i))\r\n        .collect(Collectors.toList());\r\n```","title":"How to use Java Streams API to do element wise multiplication between 2 lists of same dimension","body":"<p>You can multiply the elements of your arrays with each other via stream, but it won't be more efficient than a traditional loop. However, for such small sets of data the overhead is so small it won't make any difference.</p>\n<p>Here is an implementation via stream. Basically, you could use the <code>IntStream</code> class to iterate both of your lists from 0 to the size of the smallest list (excluded). Then, map each int index to a Double object representing the product of the i-th element of the <code>margins</code> list with the i-th element of the <code>quantity</code> list and finally collect the results into a <code>List&lt;Double&gt;</code>.</p>\n<pre><code>List&lt;Double&gt; margins = Arrays.asList(1.0, 2.0, 3.0, 4.0, 5.0);\nList&lt;Integer&gt; quantity = Arrays.asList(1, 2, 3, 4, 5);\n\nList&lt;Double&gt; res = IntStream.range(0, Math.min(margins.size(), quantity.size()))\n        .mapToObj(i -&gt; margins.get(i) * quantity.get(i))\n        .collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1660122915,"creation_date":1660121568,"answer_id":73303387,"question_id":73296071,"body_markdown":"&gt; Something like what Python ML does with numpy arrays; instead of making a `for` loop they **vectorize** the thing which makes it faster.\r\n\r\nIf you&#39;re interested in [**Vectorization**](https://en.wikipedia.org/wiki/Array_programming), then Stream API is **not** what you&#39;re looking for.\r\n\r\nSince Java 16 we have [*Vector API*](https://docs.oracle.com/en/java/javase/18/docs/api/jdk.incubator.vector/jdk/incubator/vector/package-summary.html) as an [*incubating feature*](https://openjdk.org/jeps/11) (meaning that it&#39;s not the final state of the API, it&#39;s there for testing and collecting feedback, and you shouldn&#39;t use it in production).\r\n\r\nIn order to use incubating features in Java, you need to do some extra work to get files from an incubating module imported.\r\n\r\nOne of the ways to make sure that classes from the package `jdk.incubator.vector` would be imported is to create a *module* to explicitly specify that it requires this package.\r\n\r\nConsider a simple test project having the following folder-structure:\r\n```\r\n- [src]\r\n  - [main]\r\n    - [java]\r\n      - module-info.java\r\n      - [vectorization.test]\r\n        - Main.java\r\n      - resources\r\n\r\n// other things\r\n```\r\n`module-info.java` - here we&#39;re requesting Vector API&#39;s files:\r\n```\r\nmodule vectorization.test {\r\n    requires jdk.incubator.vector;\r\n}\r\n```\r\n`Main.java`\r\n```\r\npackage vectorization.test;\r\n\r\nimport jdk.incubator.vector.DoubleVector;\r\nimport jdk.incubator.vector.VectorSpecies;\r\n\r\nimport java.util.Arrays;\r\n\r\npublic class Main {\r\n    \r\n    public static void main(String[] args) {\r\n        double[] margins = {1.0, 2.0, 3.0, 4.0, 5.0};\r\n        double[] quantity = {1, 2, 3, 4, 5};\r\n        double[] result = new double[margins.length];\r\n    \r\n        multiply(margins, quantity, result);\r\n    \r\n        System.out.println(Arrays.toString(result));\r\n    }\r\n    \r\n    public static final VectorSpecies&lt;Double&gt; SPECIES = DoubleVector.SPECIES_PREFERRED;\r\n    \r\n    public static void multiply(double[] margins, double[] quantity, double[] result) {\r\n        int i = 0;\r\n        for (; i &lt; SPECIES.loopBound(margins.length); i += SPECIES.length()) {\r\n            DoubleVector marginsVector = DoubleVector.fromArray(SPECIES, margins, i);\r\n            DoubleVector quantityVector = DoubleVector.fromArray(SPECIES, quantity, i);\r\n            DoubleVector resultVector = marginsVector.mul(quantityVector);\r\n            resultVector.intoArray(result, i);\r\n        }\r\n        for (; i &lt; margins.length; i++) {\r\n            result[i] = margins[i] * quantity[i];\r\n        }\r\n    }\r\n}\r\n```\r\n*Output:*\r\n```\r\n[1.0, 4.0, 9.0, 16.0, 25.0]\r\n```\r\n\r\nFor more information related to the Vector API, have a look at the [*JEP 426*](https://openjdk.org/jeps/426).\r\n\r\nSpeaking of Streams they are not more performant than plain loop (*if case of sequential streams*), in fact they are **slower** because streams require creation of additional objects to perform iteration, to make transformation, and to accumulate the result. No magic here.\r\n\r\nParallel streams might be faster, but it&#39;s a tool which should be used with care because you also might get the opposite effect. You need your task to be parallelizable, there should free CPU cores for your threads to do the job, and amount of data should be massive to make the usage of parallel streams justifiable (and still have to measure the performance to find out whether it makes difference in your case).\r\n\r\nOne of the main goals of introducing Functional programming features in Java was to provide a concise and well readable way of structuring the code.\r\n\r\nFor instance, that how you can populate your resulting array of products by using [`Arrays.setAll()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Arrays.html#setAll(int%5B%5D,java.util.function.IntUnaryOperator)):\r\n```\r\nArrays.setAll(result, i -&gt; margins[i] * quantity[i]);\r\n```","title":"How to use Java Streams API to do element wise multiplication between 2 lists of same dimension","body":"<blockquote>\n<p>Something like what Python ML does with numpy arrays; instead of making a <code>for</code> loop they <strong>vectorize</strong> the thing which makes it faster.</p>\n</blockquote>\n<p>If you're interested in <a href=\"https://en.wikipedia.org/wiki/Array_programming\" rel=\"nofollow noreferrer\"><strong>Vectorization</strong></a>, then Stream API is <strong>not</strong> what you're looking for.</p>\n<p>Since Java 16 we have <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/jdk.incubator.vector/jdk/incubator/vector/package-summary.html\" rel=\"nofollow noreferrer\"><em>Vector API</em></a> as an <a href=\"https://openjdk.org/jeps/11\" rel=\"nofollow noreferrer\"><em>incubating feature</em></a> (meaning that it's not the final state of the API, it's there for testing and collecting feedback, and you shouldn't use it in production).</p>\n<p>In order to use incubating features in Java, you need to do some extra work to get files from an incubating module imported.</p>\n<p>One of the ways to make sure that classes from the package <code>jdk.incubator.vector</code> would be imported is to create a <em>module</em> to explicitly specify that it requires this package.</p>\n<p>Consider a simple test project having the following folder-structure:</p>\n<pre><code>- [src]\n  - [main]\n    - [java]\n      - module-info.java\n      - [vectorization.test]\n        - Main.java\n      - resources\n\n// other things\n</code></pre>\n<p><code>module-info.java</code> - here we're requesting Vector API's files:</p>\n<pre><code>module vectorization.test {\n    requires jdk.incubator.vector;\n}\n</code></pre>\n<p><code>Main.java</code></p>\n<pre><code>package vectorization.test;\n\nimport jdk.incubator.vector.DoubleVector;\nimport jdk.incubator.vector.VectorSpecies;\n\nimport java.util.Arrays;\n\npublic class Main {\n    \n    public static void main(String[] args) {\n        double[] margins = {1.0, 2.0, 3.0, 4.0, 5.0};\n        double[] quantity = {1, 2, 3, 4, 5};\n        double[] result = new double[margins.length];\n    \n        multiply(margins, quantity, result);\n    \n        System.out.println(Arrays.toString(result));\n    }\n    \n    public static final VectorSpecies&lt;Double&gt; SPECIES = DoubleVector.SPECIES_PREFERRED;\n    \n    public static void multiply(double[] margins, double[] quantity, double[] result) {\n        int i = 0;\n        for (; i &lt; SPECIES.loopBound(margins.length); i += SPECIES.length()) {\n            DoubleVector marginsVector = DoubleVector.fromArray(SPECIES, margins, i);\n            DoubleVector quantityVector = DoubleVector.fromArray(SPECIES, quantity, i);\n            DoubleVector resultVector = marginsVector.mul(quantityVector);\n            resultVector.intoArray(result, i);\n        }\n        for (; i &lt; margins.length; i++) {\n            result[i] = margins[i] * quantity[i];\n        }\n    }\n}\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>[1.0, 4.0, 9.0, 16.0, 25.0]\n</code></pre>\n<p>For more information related to the Vector API, have a look at the <a href=\"https://openjdk.org/jeps/426\" rel=\"nofollow noreferrer\"><em>JEP 426</em></a>.</p>\n<p>Speaking of Streams they are not more performant than plain loop (<em>if case of sequential streams</em>), in fact they are <strong>slower</strong> because streams require creation of additional objects to perform iteration, to make transformation, and to accumulate the result. No magic here.</p>\n<p>Parallel streams might be faster, but it's a tool which should be used with care because you also might get the opposite effect. You need your task to be parallelizable, there should free CPU cores for your threads to do the job, and amount of data should be massive to make the usage of parallel streams justifiable (and still have to measure the performance to find out whether it makes difference in your case).</p>\n<p>One of the main goals of introducing Functional programming features in Java was to provide a concise and well readable way of structuring the code.</p>\n<p>For instance, that how you can populate your resulting array of products by using <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Arrays.html#setAll(int%5B%5D,java.util.function.IntUnaryOperator)\" rel=\"nofollow noreferrer\"><code>Arrays.setAll()</code></a>:</p>\n<pre><code>Arrays.setAll(result, i -&gt; margins[i] * quantity[i]);\n</code></pre>\n"}],"owner":{"account_id":18383045,"reputation":517,"user_id":13604662,"display_name":"Soumalya Bhattacharya"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":342,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":73303387,"answer_count":2,"score":3,"last_activity_date":1660122915,"creation_date":1660067099,"question_id":73296071,"body_markdown":"I have 2 lists like:\r\n\r\n    List&lt;Double&gt; margins =  Arrays.asList(1.0,2.0,3.0,4.0,5.0);\r\n    List&lt;Integer&gt; quantity = Arrays.asList(1,2,3,4,5);\r\n\r\nI want to do element wise multiplication between them, I know I can do it with standard for loop, but I was wondering if we can achieve the same via the Stream API by making the process faster and less resource heavy? \r\n\r\nSomething like what *Python* ML does with *NumPy* arrays; instead of making a `for` loop they **vectorize** the thing which makes it faster.","title":"How to use Java Streams API to do element wise multiplication between 2 lists of same dimension","body":"<p>I have 2 lists like:</p>\n<pre><code>List&lt;Double&gt; margins =  Arrays.asList(1.0,2.0,3.0,4.0,5.0);\nList&lt;Integer&gt; quantity = Arrays.asList(1,2,3,4,5);\n</code></pre>\n<p>I want to do element wise multiplication between them, I know I can do it with standard for loop, but I was wondering if we can achieve the same via the Stream API by making the process faster and less resource heavy?</p>\n<p>Something like what <em>Python</em> ML does with <em>NumPy</em> arrays; instead of making a <code>for</code> loop they <strong>vectorize</strong> the thing which makes it faster.</p>\n"},{"tags":["java","spring-boot","autowired","spring-boot-test","postconstruct"],"answers":[{"tags":[],"owner":{"account_id":15988209,"reputation":150,"user_id":11538031,"display_name":"Емилиян Йорданов"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660112302,"creation_date":1660112302,"answer_id":73301498,"question_id":73298459,"body_markdown":"I don&#39;t know how to mark it as duplicate. But please take a look of this https://stackoverflow.com/a/58517289/11538031 ","title":"How to mock behaviour of a bean used in @PostConstruct in @SpringBootTest","body":"<p>I don't know how to mark it as duplicate. But please take a look of this <a href=\"https://stackoverflow.com/a/58517289/11538031\">https://stackoverflow.com/a/58517289/11538031</a></p>\n"},{"tags":[],"owner":{"account_id":12341551,"reputation":108,"user_id":9004515,"display_name":"Gabriel Carrera"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660122129,"creation_date":1660122129,"answer_id":73303488,"question_id":73298459,"body_markdown":"The solution remains like this:\r\n```java\r\n@Component\r\nclass A {\r\n    private final B b;\r\n    private String s;\r\n\r\n    public A(B b) {this.b = b;}\r\n\r\n    @PostConstruct\r\n    public void postConstruct() {\r\n        s = b.get().getString().toUpperCase();\r\n    }\r\n}\r\n\r\n@Component\r\nclass B {\r\n    private final C c;\r\n\r\n    public B(C c) {this.c = c;}\r\n\r\n    public C get() {return c;}\r\n}\r\n\r\n@Component\r\nclass C {\r\n    public C() throws Exception {throw new Exception();}\r\n\r\n    String getString() {return &quot;C&quot;;}\r\n}\r\n```\r\n```java\r\n@SpringBootTest\r\nclass DemoApplicationTests {\r\n\r\n    @Autowired\r\n    A a;\r\n\r\n    @Test\r\n    public void canLoadContext() {\r\n        assertThat(a).isNotNull();\r\n    }\r\n\r\n    @TestConfiguration\r\n    public static class TestContext {\r\n        @Bean\r\n        @Primary\r\n        public C c() {\r\n            return when(mock(C.class).getString())\r\n                .thenReturn(&quot;C_mocked&quot;).getMock();\r\n        }\r\n    }\r\n}\r\n\r\n```","title":"How to mock behaviour of a bean used in @PostConstruct in @SpringBootTest","body":"<p>The solution remains like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\nclass A {\n    private final B b;\n    private String s;\n\n    public A(B b) {this.b = b;}\n\n    @PostConstruct\n    public void postConstruct() {\n        s = b.get().getString().toUpperCase();\n    }\n}\n\n@Component\nclass B {\n    private final C c;\n\n    public B(C c) {this.c = c;}\n\n    public C get() {return c;}\n}\n\n@Component\nclass C {\n    public C() throws Exception {throw new Exception();}\n\n    String getString() {return &quot;C&quot;;}\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest\nclass DemoApplicationTests {\n\n    @Autowired\n    A a;\n\n    @Test\n    public void canLoadContext() {\n        assertThat(a).isNotNull();\n    }\n\n    @TestConfiguration\n    public static class TestContext {\n        @Bean\n        @Primary\n        public C c() {\n            return when(mock(C.class).getString())\n                .thenReturn(&quot;C_mocked&quot;).getMock();\n        }\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":12341551,"reputation":108,"user_id":9004515,"display_name":"Gabriel Carrera"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":546,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1660122516,"creation_date":1660081815,"question_id":73298459,"body_markdown":"I have been searching for a while and I can&#39;t find a solution for this. I need to mock a class that is used in the @PostConstruct of another class. My classes are like this:\r\n```java\r\n@Component\r\nclass A {\r\n    private final B b;\r\n    private String s;\r\n\r\n    public A(B b) {this.b = b;}\r\n\r\n    @PostConstruct\r\n    public void postConstruct() {\r\n        s = b.get().getString().toUpperCase();\r\n    }\r\n}\r\n\r\n@Component\r\nclass B {\r\n    private final C c;\r\n\r\n    public B(C c) {this.c = c;}\r\n\r\n    public C get() {return c;}\r\n}\r\n\r\n@Component\r\nclass C {\r\n    public C() throws Exception {throw new Exception();}\r\n\r\n    String getString() {return &quot;C&quot;;}\r\n}\r\n```\r\n\r\nNow I create the test that fails because the constructor of `C` fails:\r\n```java\r\n@SpringBootTest\r\nclass DemoApplicationTests {\r\n    @Autowired A a;\r\n\r\n    @Test\r\n    public void canLoadContext() {\r\n        assertThat(a).isNotNull();\r\n    }\r\n}\r\n```\r\nSo I try to mock the `C` class:\r\n```java\r\n@SpringBootTest\r\nclass DemoApplicationTests {\r\n    @MockBean\r\n    static C c;\r\n\r\n    @Autowired\r\n    A a;\r\n\r\n    @BeforeEach\r\n    public void beforeEach() {\r\n        when(c.getString())\r\n            .thenReturn(&quot;C_mocked&quot;);\r\n    }\r\n\r\n    @Test\r\n    public void canLoadContext() {\r\n        assertThat(a).isNotNull();\r\n    }\r\n}\r\n```\r\nBut this way it fails with a NPE in the line `s = b.get().getString().toUpperCase();` because the `C` object in `b` is not the same that I have mocked with `@MockBean`. When `getString()` is called, it returns `null` and we get a NPE when calling `.toUpperCase()`.\r\n\r\nI have also tried to overwrite the mock like this:\r\n```java\r\n    @Configuration\r\n    @AutoConfigureBefore\r\n    static class TestContext {\r\n        @Primary\r\n        public C c() {\r\n            return when(mock(C.class).getString())\r\n                .thenReturn(&quot;C_mocked&quot;).getMock();\r\n        }\r\n    }\r\n```\r\nBut in this case I get this error:\r\n\r\n&gt; No qualifying bean of type &#39;com.example.demo.A&#39; available: expected at\r\n&gt; least 1 bean which qualifies as autowire candidate.\r\n\r\nCould please somebody help out with this?\r\n\r\n","title":"How to mock behaviour of a bean used in @PostConstruct in @SpringBootTest","body":"<p>I have been searching for a while and I can't find a solution for this. I need to mock a class that is used in the @PostConstruct of another class. My classes are like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\nclass A {\n    private final B b;\n    private String s;\n\n    public A(B b) {this.b = b;}\n\n    @PostConstruct\n    public void postConstruct() {\n        s = b.get().getString().toUpperCase();\n    }\n}\n\n@Component\nclass B {\n    private final C c;\n\n    public B(C c) {this.c = c;}\n\n    public C get() {return c;}\n}\n\n@Component\nclass C {\n    public C() throws Exception {throw new Exception();}\n\n    String getString() {return &quot;C&quot;;}\n}\n</code></pre>\n<p>Now I create the test that fails because the constructor of <code>C</code> fails:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest\nclass DemoApplicationTests {\n    @Autowired A a;\n\n    @Test\n    public void canLoadContext() {\n        assertThat(a).isNotNull();\n    }\n}\n</code></pre>\n<p>So I try to mock the <code>C</code> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest\nclass DemoApplicationTests {\n    @MockBean\n    static C c;\n\n    @Autowired\n    A a;\n\n    @BeforeEach\n    public void beforeEach() {\n        when(c.getString())\n            .thenReturn(&quot;C_mocked&quot;);\n    }\n\n    @Test\n    public void canLoadContext() {\n        assertThat(a).isNotNull();\n    }\n}\n</code></pre>\n<p>But this way it fails with a NPE in the line <code>s = b.get().getString().toUpperCase();</code> because the <code>C</code> object in <code>b</code> is not the same that I have mocked with <code>@MockBean</code>. When <code>getString()</code> is called, it returns <code>null</code> and we get a NPE when calling <code>.toUpperCase()</code>.</p>\n<p>I have also tried to overwrite the mock like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Configuration\n    @AutoConfigureBefore\n    static class TestContext {\n        @Primary\n        public C c() {\n            return when(mock(C.class).getString())\n                .thenReturn(&quot;C_mocked&quot;).getMock();\n        }\n    }\n</code></pre>\n<p>But in this case I get this error:</p>\n<blockquote>\n<p>No qualifying bean of type 'com.example.demo.A' available: expected at\nleast 1 bean which qualifies as autowire candidate.</p>\n</blockquote>\n<p>Could please somebody help out with this?</p>\n"},{"tags":["java","date-difference","java.util.calendar","timeofday","online-compilation"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":5,"creation_date":1660117811,"post_id":73302563,"comment_id":129454265,"body_markdown":"Very likely a timezone difference. However, in general I advice against using java.util.Calendar etc. but go for the newer java.time API.","body":"Very likely a timezone difference. However, in general I advice against using java.util.Calendar etc. but go for the newer java.time API."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":2,"creation_date":1660117816,"post_id":73302563,"comment_id":129454267,"body_markdown":"Maybe an other Timezone?","body":"Maybe an other Timezone?"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":2,"creation_date":1660120234,"post_id":73302563,"comment_id":129455068,"body_markdown":"This is almost certainly a timezone issue. Can you explain (in English) what it is you are trying to do? Where do the two long values come from? What do they represent and what calculation do you want to do?","body":"This is almost certainly a timezone issue. Can you explain (in English) what it is you are trying to do? Where do the two long values come from? What do they represent and what calculation do you want to do?"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1660121476,"post_id":73302563,"comment_id":129455522,"body_markdown":"I strongly recommend you don&#39;t use `Calendar`. That class was cumbersome and error-prone to work with and is now long outdated. I think you want `Instant.ofEpochMilli(1_659_304_800_000L).atZone(ZoneId.of(&quot;Asia/Qatar&quot;)).toLocalTime()`. And similar for the end time. And then you want `Duration.between()` for the -- well, the name says. One of the many advantages of java.time, the modern Java date and time API.","body":"I strongly recommend you don&#39;t use <code>Calendar</code>. That class was cumbersome and error-prone to work with and is now long outdated. I think you want <code>Instant.ofEpochMilli(1_659_304_800_000L).atZone(ZoneId.of(&quot;A&zwnj;&#8203;sia&#47;Qatar&quot;)).toLocal&zwnj;&#8203;Time()</code>. And similar for the end time. And then you want <code>Duration.between()</code> for the -- well, the name says. One of the many advantages of java.time, the modern Java date and time API."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1660121524,"post_id":73302563,"comment_id":129455548,"body_markdown":"In UTC -- a likely default time zone for an online compiler -- your start time is at 22:00 and end at 00:00, so the correct and expected difference is -22 hours, which is what you got. In Qatar, for example, the times are 01:00 and 03:00 and the difference +2 hours, which is what you got locally. In many other time zones you will too.","body":"In UTC -- a likely default time zone for an online compiler -- your start time is at 22:00 and end at 00:00, so the correct and expected difference is -22 hours, which is what you got. In Qatar, for example, the times are 01:00 and 03:00 and the difference +2 hours, which is what you got locally. In many other time zones you will too."},{"owner":{"account_id":1054762,"reputation":1539,"user_id":1057740,"accept_rate":100,"display_name":"A.Alqadomi"},"score":0,"creation_date":1660124572,"post_id":73302563,"comment_id":129456643,"body_markdown":"@JoachimSauer the values are static ones that I have used just to check the result, I know that the diff between them is 7200000 and wanted to use them to test the logic . the reason behind this code is that we have a system that is providing events and with each there is a start and end timestamps . I want to insert them to the android calendar system in a correct way so I need to calculate the duration of the event on each day and the number of days to supply them to the android calendar intent in a format that is understandable to the calendar app.","body":"@JoachimSauer the values are static ones that I have used just to check the result, I know that the diff between them is 7200000 and wanted to use them to test the logic . the reason behind this code is that we have a system that is providing events and with each there is a start and end timestamps . I want to insert them to the android calendar system in a correct way so I need to calculate the duration of the event on each day and the number of days to supply them to the android calendar intent in a format that is understandable to the calendar app."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1660124694,"post_id":73302563,"comment_id":129456695,"body_markdown":"@A.Alqadomi: If I understood correctly, you must consciously decide which timezone you do that calculation in, which you don&#39;t do anywhere in your code, which is why it probides different results when run on different systems (which use different default timezones). And I echo everyone elses suggestion: don&#39;t use `java.util.Calendar` (or `java.util.Date` for that matter), switch to the much saner API in `java.time` instead.","body":"@A.Alqadomi: If I understood correctly, you must consciously decide which timezone you do that calculation in, which you don&#39;t do anywhere in your code, which is why it probides different results when run on different systems (which use different default timezones). And I echo everyone elses suggestion: don&#39;t use <code>java.util.Calendar</code> (or <code>java.util.Date</code> for that matter), switch to the much saner API in <code>java.time</code> instead."},{"owner":{"account_id":1054762,"reputation":1539,"user_id":1057740,"accept_rate":100,"display_name":"A.Alqadomi"},"score":0,"creation_date":1660124902,"post_id":73302563,"comment_id":129456799,"body_markdown":"@OleV.V. your answer makes total sense to me.can you please provide it as an answer to I can select it . as for why I don&#39;t use the newer APIs I am developing for android and I got warning that these APIs require level 26 . I think I need to make some changes to migrate to the new APIs","body":"@OleV.V. your answer makes total sense to me.can you please provide it as an answer to I can select it . as for why I don&#39;t use the newer APIs I am developing for android and I got warning that these APIs require level 26 . I think I need to make some changes to migrate to the new APIs"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":2,"creation_date":1660130429,"post_id":73302563,"comment_id":129458814,"body_markdown":"@A.Alqadomi: you can use most of `java.time` on Android by using [desugaring](https://developer.android.com/studio/write/java8-support-table) and it&#39;s definitely a worthwhile path.","body":"@A.Alqadomi: you can use most of <code>java.time</code> on Android by using <a href=\"https://developer.android.com/studio/write/java8-support-table\" rel=\"nofollow noreferrer\">desugaring</a> and it&#39;s definitely a worthwhile path."},{"owner":{"account_id":1054762,"reputation":1539,"user_id":1057740,"accept_rate":100,"display_name":"A.Alqadomi"},"score":0,"creation_date":1660131614,"post_id":73302563,"comment_id":129459223,"body_markdown":"@JoachimSauer Thanks for the suggestion . I just included the desugaring in the project today.","body":"@JoachimSauer Thanks for the suggestion . I just included the desugaring in the project today."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1660139728,"post_id":73302563,"comment_id":129462649,"body_markdown":"You don&#39;t need to rewrite all use of the old date and time classes when you introduce java.time. The two can live happily side by side for many years. For when you need to interface old code, the old classes after desugaring come with conversion methods to and from the new types.","body":"You don&#39;t need to rewrite all use of the old date and time classes when you introduce java.time. The two can live happily side by side for many years. For when you need to interface old code, the old classes after desugaring come with conversion methods to and from the new types."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1660139811,"post_id":73302563,"comment_id":129462690,"body_markdown":"And thanks for trusting me to write an answer. I no longer contribute answers here for reasons that I try to explain in [my profile](https://stackoverflow.com/users/5772882/ole-v-v). I you want to key in the answer yourself, I shall be happy to upvote.","body":"And thanks for trusting me to write an answer. I no longer contribute answers here for reasons that I try to explain in <a href=\"https://stackoverflow.com/users/5772882/ole-v-v\">my profile</a>. I you want to key in the answer yourself, I shall be happy to upvote."}],"owner":{"account_id":1054762,"reputation":1539,"user_id":1057740,"accept_rate":100,"display_name":"A.Alqadomi"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":153,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1660122018,"creation_date":1660117576,"question_id":73302563,"body_markdown":"The code simply extract the time portion of two timestamps and sub them from each other to get the duration \r\n\r\n\r\n    import java.util.Calendar;\r\n    public class Test {\r\n    \r\n        public static void main(String[] args) {\r\n            Calendar cal = Calendar.getInstance();\r\n            cal.setTimeInMillis(1659304800000L);\r\n            getTimePortionFromCalendar(cal);\r\n            Long startMillis = cal.getTimeInMillis();\r\n            cal.setTimeInMillis(1660089600000L);\r\n            getTimePortionFromCalendar(cal);\r\n            Long endMillis = cal.getTimeInMillis();\r\n            long duration =endMillis - startMillis;\r\n    \r\n            System.out.println(duration);\r\n        }\r\n    \r\n        private static void getTimePortionFromCalendar(Calendar start) {\r\n            start.set(1970,Calendar.JANUARY,1, start.get(Calendar.HOUR_OF_DAY), start.get(Calendar.MINUTE), start.get(Calendar.SECOND));\r\n        }\r\n    }\r\n\r\n\r\nUsing eclipse and intelliJ yielded the expected answer (7200000) while all online compilers such as \r\nhttps://www.tutorialspoint.com/compile_java_online.php\r\n\r\nhttps://www.onlinegdb.com/online_java_compiler\r\n\r\nhttps://www.programiz.com/java-programming/online-compiler/\r\n\r\nhttps://www.jdoodle.com/online-java-compiler/\r\n\r\nprinted (-79200000) as the result\r\n\r\nAny Idea why ? \r\n","title":"online java compilers gives different results than eclipse and intelliJ","body":"<p>The code simply extract the time portion of two timestamps and sub them from each other to get the duration</p>\n<pre><code>import java.util.Calendar;\npublic class Test {\n\n    public static void main(String[] args) {\n        Calendar cal = Calendar.getInstance();\n        cal.setTimeInMillis(1659304800000L);\n        getTimePortionFromCalendar(cal);\n        Long startMillis = cal.getTimeInMillis();\n        cal.setTimeInMillis(1660089600000L);\n        getTimePortionFromCalendar(cal);\n        Long endMillis = cal.getTimeInMillis();\n        long duration =endMillis - startMillis;\n\n        System.out.println(duration);\n    }\n\n    private static void getTimePortionFromCalendar(Calendar start) {\n        start.set(1970,Calendar.JANUARY,1, start.get(Calendar.HOUR_OF_DAY), start.get(Calendar.MINUTE), start.get(Calendar.SECOND));\n    }\n}\n</code></pre>\n<p>Using eclipse and intelliJ yielded the expected answer (7200000) while all online compilers such as\n<a href=\"https://www.tutorialspoint.com/compile_java_online.php\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/compile_java_online.php</a></p>\n<p><a href=\"https://www.onlinegdb.com/online_java_compiler\" rel=\"nofollow noreferrer\">https://www.onlinegdb.com/online_java_compiler</a></p>\n<p><a href=\"https://www.programiz.com/java-programming/online-compiler/\" rel=\"nofollow noreferrer\">https://www.programiz.com/java-programming/online-compiler/</a></p>\n<p><a href=\"https://www.jdoodle.com/online-java-compiler/\" rel=\"nofollow noreferrer\">https://www.jdoodle.com/online-java-compiler/</a></p>\n<p>printed (-79200000) as the result</p>\n<p>Any Idea why ?</p>\n"},{"tags":["java","json","spring-boot","encoding","opencsv"],"answers":[{"tags":[],"owner":{"account_id":48638,"reputation":5943,"user_id":144578,"accept_rate":79,"display_name":"Sebastiaan van den Broek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660121642,"creation_date":1660121642,"answer_id":73303399,"question_id":73303329,"body_markdown":"I don&#39;t think this is a problem with JSON conversion but with your character encoding. Make sure both your CSV file and the output to JSON are in the same encoding, it&#39;s probably best to use UTF8. If you explicitly set `produces = APPLICATION_JSON_VALUE` on your controller annotation, it should already use UTF8 for that. So if it then still fails, the question remains whether the CSV is in UTF8.\r\n\r\nAlso, if you don&#39;t know what I&#39;m talking about, https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/ is pretty much a must-read.","title":"SpringBoot Restful Web API not handling special characters well: json file displayed with wrong encoding","body":"<p>I don't think this is a problem with JSON conversion but with your character encoding. Make sure both your CSV file and the output to JSON are in the same encoding, it's probably best to use UTF8. If you explicitly set <code>produces = APPLICATION_JSON_VALUE</code> on your controller annotation, it should already use UTF8 for that. So if it then still fails, the question remains whether the CSV is in UTF8.</p>\n<p>Also, if you don't know what I'm talking about, <a href=\"https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/\" rel=\"nofollow noreferrer\">https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/</a> is pretty much a must-read.</p>\n"}],"owner":{"account_id":22415012,"reputation":466,"user_id":16623197,"display_name":"Noskario"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":874,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660121642,"creation_date":1660121316,"question_id":73303329,"body_markdown":"I want to create a website/API, that reads in a csv and returns the wanted resoureces. I use SpringBoot: the Spring Web dependency. For reading in the csv I import `implementation(&#39;com.opencsv:opencsv:5.6&#39;)` to `dependencies` in my `build.gradle`-file. I decided to use the following structure:\r\n\r\nFour java-files in `src\\main\\java\\com\\example\\so`:\r\n\r\nThe bean `Car.java`:\r\n```\r\npackage com.example.so;\r\n\r\nimport com.opencsv.bean.CsvBindByName;\r\n\r\nimport java.math.BigDecimal;\r\n\r\npublic class Car {\r\n\r\n    @CsvBindByName\r\n    private int id;\r\n    @CsvBindByName(column = &quot;name&quot;)\r\n    private String brand;\r\n    @CsvBindByName\r\n    private BigDecimal price;\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getBrand() {\r\n        return brand;\r\n    }\r\n\r\n    public void setBrand(String brand) {\r\n        this.brand = brand;\r\n    }\r\n\r\n    public BigDecimal getPrice() {\r\n        return price;\r\n    }\r\n\r\n    public void setPrice(BigDecimal price) {\r\n        this.price = price;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Car{&quot; +\r\n                &quot;id=&quot; + id +\r\n                &quot;, brand=&#39;&quot; + brand + &#39;\\&#39;&#39; +\r\n                &quot;, price=&quot; + price +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n```\r\n\r\nTo display the correct car I use `CarController.java`:\r\n```\r\npackage com.example.so;\r\n\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\nimport org.springframework.web.bind.annotation.RequestParam;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\npublic class CarController {\r\n\r\n    @GetMapping(&quot;/car/{id}&quot;)\r\n    public Car findcar(@PathVariable int id) {\r\n        for (Car car: ReadInCSV.cars){\r\n            if (car.getId()==id){\r\n                System.out.println(car.toString());\r\n                return car;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    @GetMapping(&quot;&quot;)\r\n    public String findcar() {\r\n        return &quot;Hi!&quot;;\r\n    }\r\n}\r\n```\r\n\r\nTo read in the csv-file `ReadInCSV.java`:\r\n```\r\npackage com.example.so;\r\n\r\nimport com.opencsv.bean.CsvToBeanBuilder;\r\n\r\nimport java.io.FileNotFoundException;\r\nimport java.io.FileReader;\r\nimport java.util.List;\r\n\r\npublic class ReadInCSV {\r\n    static final String fileName=&quot;src/main/resources/static/abc.csv&quot;;\r\n    static List&lt;Car&gt; cars;\r\n    static {\r\n        try {\r\n            cars= new CsvToBeanBuilder(new FileReader(fileName)).withType(Car.class).build().parse();\r\n        } catch (FileNotFoundException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nand to start the webservice `SoApplication.java`:\r\n```\r\npackage com.example.so;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class SoApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(SoApplication.class, args);\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\nThe file with the data `abc.csv`:\r\n```\r\nid,name,price\r\n1,Audi,52642\r\n2,Mercedes,57127\r\n3,Skoda,9000\r\n4,Volvo,29000\r\n5,Bentley,350000\r\n6,Citro&#235;n,21000\r\n7,F&#252;ll,41400\r\n8,Ros&#233;,21600\r\n9,Toyota,26700\r\n\r\n```\r\n\r\n\r\nIt works more or less fine, but when you enter `http://localhost:8080/car/6`, my browser (Firefox) displays &quot;Citro&#195;&#171;n&quot; instead of &quot;Citro&#235;n&quot;. Reading in the csv seems to work fine, because when you print the bean using its `.toString()` you get `Car{id=6, brand=&#39;Citro&#235;n&#39;, price=21000}`. So apparently the json-conversion is the problem. What can I do to solve this issue?\r\n\r\nI am new to world of java-web, so feel free telling me if there are some other problems with my approach.","title":"SpringBoot Restful Web API not handling special characters well: json file displayed with wrong encoding","body":"<p>I want to create a website/API, that reads in a csv and returns the wanted resoureces. I use SpringBoot: the Spring Web dependency. For reading in the csv I import <code>implementation('com.opencsv:opencsv:5.6')</code> to <code>dependencies</code> in my <code>build.gradle</code>-file. I decided to use the following structure:</p>\n<p>Four java-files in <code>src\\main\\java\\com\\example\\so</code>:</p>\n<p>The bean <code>Car.java</code>:</p>\n<pre><code>package com.example.so;\n\nimport com.opencsv.bean.CsvBindByName;\n\nimport java.math.BigDecimal;\n\npublic class Car {\n\n    @CsvBindByName\n    private int id;\n    @CsvBindByName(column = &quot;name&quot;)\n    private String brand;\n    @CsvBindByName\n    private BigDecimal price;\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getBrand() {\n        return brand;\n    }\n\n    public void setBrand(String brand) {\n        this.brand = brand;\n    }\n\n    public BigDecimal getPrice() {\n        return price;\n    }\n\n    public void setPrice(BigDecimal price) {\n        this.price = price;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Car{&quot; +\n                &quot;id=&quot; + id +\n                &quot;, brand='&quot; + brand + '\\'' +\n                &quot;, price=&quot; + price +\n                '}';\n    }\n}\n</code></pre>\n<p>To display the correct car I use <code>CarController.java</code>:</p>\n<pre><code>package com.example.so;\n\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class CarController {\n\n    @GetMapping(&quot;/car/{id}&quot;)\n    public Car findcar(@PathVariable int id) {\n        for (Car car: ReadInCSV.cars){\n            if (car.getId()==id){\n                System.out.println(car.toString());\n                return car;\n            }\n        }\n        return null;\n    }\n\n    @GetMapping(&quot;&quot;)\n    public String findcar() {\n        return &quot;Hi!&quot;;\n    }\n}\n</code></pre>\n<p>To read in the csv-file <code>ReadInCSV.java</code>:</p>\n<pre><code>package com.example.so;\n\nimport com.opencsv.bean.CsvToBeanBuilder;\n\nimport java.io.FileNotFoundException;\nimport java.io.FileReader;\nimport java.util.List;\n\npublic class ReadInCSV {\n    static final String fileName=&quot;src/main/resources/static/abc.csv&quot;;\n    static List&lt;Car&gt; cars;\n    static {\n        try {\n            cars= new CsvToBeanBuilder(new FileReader(fileName)).withType(Car.class).build().parse();\n        } catch (FileNotFoundException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n\n</code></pre>\n<p>and to start the webservice <code>SoApplication.java</code>:</p>\n<pre><code>package com.example.so;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class SoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(SoApplication.class, args);\n    }\n\n}\n\n</code></pre>\n<p>The file with the data <code>abc.csv</code>:</p>\n<pre><code>id,name,price\n1,Audi,52642\n2,Mercedes,57127\n3,Skoda,9000\n4,Volvo,29000\n5,Bentley,350000\n6,Citroën,21000\n7,Füll,41400\n8,Rosé,21600\n9,Toyota,26700\n\n</code></pre>\n<p>It works more or less fine, but when you enter <code>http://localhost:8080/car/6</code>, my browser (Firefox) displays &quot;CitroÃ«n&quot; instead of &quot;Citroën&quot;. Reading in the csv seems to work fine, because when you print the bean using its <code>.toString()</code> you get <code>Car{id=6, brand='Citroën', price=21000}</code>. So apparently the json-conversion is the problem. What can I do to solve this issue?</p>\n<p>I am new to world of java-web, so feel free telling me if there are some other problems with my approach.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8872,"page":1120,"page_size":100}
