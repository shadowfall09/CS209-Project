{"items":[{"tags":["java","mysql","spring-boot","asynchronous","spring-data-jpa"],"owner":{"account_id":21686495,"reputation":67,"user_id":16001866,"display_name":"Coolroo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675475265,"creation_date":1675472071,"question_id":75342311,"body_markdown":"I am currently working on a program that will have multiple different sequences that a user can activate. Still, they all take similar input e.g. (Select a country then a city, or select another player, then choose a country) that then executes unique code, and I&#39;m trying to figure out what the best way to approach this is.\r\n\r\nRight now I am using CompletableFutures that hold lambda functions that describe the behavior, and then have a set of methods that allow the users to provide input to these futures. EG: \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    @JsonIgnore\r\n        private Optional&lt;CompletableFuture&lt;CountryChoice&gt;&gt; countryChoice;\r\n\r\n        @JsonIgnore\r\n        private Optional&lt;CompletableFuture&lt;Country&gt;&gt; infectChoice;\r\n\r\n        @JsonIgnore\r\n        private Optional&lt;CompletableFuture&lt;Integer&gt;&gt; deathFuture;\r\n\r\n        //Event Futures\r\n\r\n        @JsonIgnore\r\n        private Optional&lt;CompletableFuture&lt;CitySelection&gt;&gt; citySelectionFuture;\r\n\r\n        @JsonIgnore\r\n        private Optional&lt;CompletableFuture&lt;Country&gt;&gt; countrySelectionFuture;\r\n\r\n        @JsonIgnore\r\n        private Optional&lt;CompletableFuture&lt;TraitCard&gt;&gt; selectTraitCard;\r\n\r\n        @JsonIgnore\r\n        private Optional&lt;CompletableFuture&lt;Continent&gt;&gt; selectContinent;\r\n\r\n        @JsonIgnore\r\n        private Optional&lt;CompletableFuture&lt;Integer&gt;&gt; selectTraitSlot;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nHowever, I want to be able to persist this class in a MySQL database, and I&#39;m not sure if persisting a Future is a good idea.\r\n\r\nI am probably approaching this completely wrong, but I&#39;d like to know if anyone here has any insight onto a better implementation/how I can do this better :)\r\n\r\nThanks!","title":"Spring Boot: Handling multi step user input for various similar sequences with serialized data","body":"<p>I am currently working on a program that will have multiple different sequences that a user can activate. Still, they all take similar input e.g. (Select a country then a city, or select another player, then choose a country) that then executes unique code, and I'm trying to figure out what the best way to approach this is.</p>\n<p>Right now I am using CompletableFutures that hold lambda functions that describe the behavior, and then have a set of methods that allow the users to provide input to these futures. EG:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>@JsonIgnore\n    private Optional&lt;CompletableFuture&lt;CountryChoice&gt;&gt; countryChoice;\n\n    @JsonIgnore\n    private Optional&lt;CompletableFuture&lt;Country&gt;&gt; infectChoice;\n\n    @JsonIgnore\n    private Optional&lt;CompletableFuture&lt;Integer&gt;&gt; deathFuture;\n\n    //Event Futures\n\n    @JsonIgnore\n    private Optional&lt;CompletableFuture&lt;CitySelection&gt;&gt; citySelectionFuture;\n\n    @JsonIgnore\n    private Optional&lt;CompletableFuture&lt;Country&gt;&gt; countrySelectionFuture;\n\n    @JsonIgnore\n    private Optional&lt;CompletableFuture&lt;TraitCard&gt;&gt; selectTraitCard;\n\n    @JsonIgnore\n    private Optional&lt;CompletableFuture&lt;Continent&gt;&gt; selectContinent;\n\n    @JsonIgnore\n    private Optional&lt;CompletableFuture&lt;Integer&gt;&gt; selectTraitSlot;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>However, I want to be able to persist this class in a MySQL database, and I'm not sure if persisting a Future is a good idea.</p>\n<p>I am probably approaching this completely wrong, but I'd like to know if anyone here has any insight onto a better implementation/how I can do this better :)</p>\n<p>Thanks!</p>\n"},{"tags":["java","reflection","package"],"comments":[{"owner":{"account_id":44736,"reputation":98412,"user_id":131433,"accept_rate":76,"display_name":"bmargulies"},"score":0,"creation_date":1259355617,"post_id":1810614,"comment_id":1699477,"body_markdown":"please edit this to be legible. What is a &#39;javapackage&#39;. What is a &#39;commands wish&#39;.","body":"please edit this to be legible. What is a &#39;javapackage&#39;. What is a &#39;commands wish&#39;."},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1259356207,"post_id":1810614,"comment_id":1699512,"body_markdown":"The topic subject is perfect: http://google.com/search?q=Getting+all+Classes+from+a+Package =)","body":"The topic subject is perfect: <a href=\"http://google.com/search?q=Getting+all+Classes+from+a+Package\" rel=\"nofollow noreferrer\">google.com/search?q=Getting+all+Classes+from+a+Package</a> =)"},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1259399357,"post_id":1810614,"comment_id":1701087,"body_markdown":"@balusc, but the /correct/ answer is hard.","body":"@balusc, but the /correct/ answer is hard."}],"answers":[{"tags":[],"owner":{"account_id":44736,"reputation":98412,"user_id":131433,"accept_rate":76,"display_name":"bmargulies"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1259355880,"creation_date":1259355880,"answer_id":1810629,"question_id":1810614,"body_markdown":"Start with public  Classloader.getResources(String name). Ask the classloader for a class corresponding to each name in the package you are interested. Repeat for all classloaders of relevance.\r\n\r\n","title":"Getting all Classes from a Package","body":"<p>Start with public  Classloader.getResources(String name). Ask the classloader for a class corresponding to each name in the package you are interested. Repeat for all classloaders of relevance.</p>\n"},{"tags":[],"owner":{"account_id":29773,"reputation":14194,"user_id":80701,"accept_rate":87,"display_name":"monksy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1259356576,"creation_date":1259356209,"answer_id":1810639,"question_id":1810614,"body_markdown":"Yes but its not the easiest thing to do. There are lots of issues with this. Not all of the classes are easy to find. Some classes could be in a: Jar, as a class file, over the network etc.\r\n\r\nTake a look [at this thread.][1]\r\n\r\nTo make sure they were the ICommand type then you would have to use reflection to check for the inheriting class.\r\n\r\n  [1]: https://stackoverflow.com/questions/1498122/java-loop-on-all-the-classes-in-the-classpath","title":"Getting all Classes from a Package","body":"<p>Yes but its not the easiest thing to do. There are lots of issues with this. Not all of the classes are easy to find. Some classes could be in a: Jar, as a class file, over the network etc.</p>\n\n<p>Take a look <a href=\"https://stackoverflow.com/questions/1498122/java-loop-on-all-the-classes-in-the-classpath\">at this thread.</a></p>\n\n<p>To make sure they were the ICommand type then you would have to use reflection to check for the inheriting class.</p>\n"},{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1259356375,"creation_date":1259356375,"answer_id":1810648,"question_id":1810614,"body_markdown":"Here is an utility method, using Spring.\r\n\r\nDetails about the pattern can be found &lt;a href=&quot;http://static.springsource.org/spring/docs/2.5.6/api/org/springframework/core/io/support/PathMatchingResourcePatternResolver.html&quot;&gt;here&lt;/a&gt;\r\n\r\n        public static List&lt;Class&gt; listMatchingClasses(String matchPattern) throws IOException {\r\n        List&lt;Class&gt; classes = new LinkedList&lt;Class&gt;();\r\n        PathMatchingResourcePatternResolver scanner = new PathMatchingResourcePatternResolver();\r\n        Resource[] resources = scanner.getResources(matchPattern);\r\n\r\n        for (Resource resource : resources) {\r\n            Class&lt;?&gt; clazz = getClassFromResource(resource);\r\n            classes.add(clazz);\r\n        }\r\n\r\n        return classes;\r\n    }\r\n\r\n\r\n\r\n    public static Class getClassFromResource(Resource resource) {\r\n        try {\r\n            String resourceUri = resource.getURI().toString();\r\n            resourceUri = resourceUri.replace(esourceUri.indexOf(&quot;.class&quot;), &quot;&quot;).replace(&quot;/&quot;, &quot;.&quot;);\r\n            // try printing the resourceUri before calling forName, to see if it is OK.\r\n            return Class.forName(resourceUri);\r\n        } catch (Exception ex) {\r\n            ex.printStackTrace();\r\n        }\r\n        return null;\r\n    }\r\n\r\n","title":"Getting all Classes from a Package","body":"<p>Here is an utility method, using Spring.</p>\n\n<p>Details about the pattern can be found <a href=\"http://static.springsource.org/spring/docs/2.5.6/api/org/springframework/core/io/support/PathMatchingResourcePatternResolver.html\" rel=\"nofollow noreferrer\">here</a></p>\n\n<pre><code>    public static List&lt;Class&gt; listMatchingClasses(String matchPattern) throws IOException {\n    List&lt;Class&gt; classes = new LinkedList&lt;Class&gt;();\n    PathMatchingResourcePatternResolver scanner = new PathMatchingResourcePatternResolver();\n    Resource[] resources = scanner.getResources(matchPattern);\n\n    for (Resource resource : resources) {\n        Class&lt;?&gt; clazz = getClassFromResource(resource);\n        classes.add(clazz);\n    }\n\n    return classes;\n}\n\n\n\npublic static Class getClassFromResource(Resource resource) {\n    try {\n        String resourceUri = resource.getURI().toString();\n        resourceUri = resourceUri.replace(esourceUri.indexOf(\".class\"), \"\").replace(\"/\", \".\");\n        // try printing the resourceUri before calling forName, to see if it is OK.\n        return Class.forName(resourceUri);\n    } catch (Exception ex) {\n        ex.printStackTrace();\n    }\n    return null;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1409397,"reputation":12315,"user_id":1336310,"accept_rate":90,"display_name":"Menno"},"score":3,"creation_date":1367662348,"post_id":1810665,"comment_id":23462959,"body_markdown":"+1, though a small improvement: `root.getFile()` should be `URLDecoder.decode(root.getFile(), &quot;UTF-8&quot;)` in case of any spaces in `classloader` path. `getResource()` will convert this to `%20`, along with other characters I suppose.","body":"+1, though a small improvement: <code>root.getFile()</code> should be <code>URLDecoder.decode(root.getFile(), &quot;UTF-8&quot;)</code> in case of any spaces in <code>classloader</code> path. <code>getResource()</code> will convert this to <code>%20</code>, along with other characters I suppose."},{"owner":{"account_id":13462875,"reputation":1315,"user_id":9714255,"display_name":"LoukasPap"},"score":0,"creation_date":1698362282,"post_id":1810665,"comment_id":136399442,"body_markdown":"I put `&quot;java.base&quot;` in the `.getResource` but it returns null... Do you know why?","body":"I put <code>&quot;java.base&quot;</code> in the <code>.getResource</code> but it returns null... Do you know why?"}],"tags":[],"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"comment_count":2,"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1259356767,"creation_date":1259356767,"answer_id":1810665,"question_id":1810614,"body_markdown":"Here&#39;s a basic example, assuming that classes are not JAR-packaged:\r\n\r\n    // Prepare.\r\n    String packageName = &quot;com.example.commands&quot;;\r\n    List&lt;Class&lt;ICommand&gt;&gt; commands = new ArrayList&lt;Class&lt;ICommand&gt;&gt;();\r\n    URL root = Thread.currentThread().getContextClassLoader().getResource(packageName.replace(&quot;.&quot;, &quot;/&quot;));\r\n    \r\n    // Filter .class files.\r\n    File[] files = new File(root.getFile()).listFiles(new FilenameFilter() {\r\n        public boolean accept(File dir, String name) {\r\n            return name.endsWith(&quot;.class&quot;);\r\n        }\r\n    });\r\n\r\n    // Find classes implementing ICommand.\r\n    for (File file : files) {\r\n        String className = file.getName().replaceAll(&quot;.class$&quot;, &quot;&quot;);\r\n        Class&lt;?&gt; cls = Class.forName(packageName + &quot;.&quot; + className);\r\n        if (ICommand.class.isAssignableFrom(cls)) {\r\n            commands.add((Class&lt;ICommand&gt;) cls);\r\n        }\r\n    }\r\n","title":"Getting all Classes from a Package","body":"<p>Here's a basic example, assuming that classes are not JAR-packaged:</p>\n\n<pre><code>// Prepare.\nString packageName = \"com.example.commands\";\nList&lt;Class&lt;ICommand&gt;&gt; commands = new ArrayList&lt;Class&lt;ICommand&gt;&gt;();\nURL root = Thread.currentThread().getContextClassLoader().getResource(packageName.replace(\".\", \"/\"));\n\n// Filter .class files.\nFile[] files = new File(root.getFile()).listFiles(new FilenameFilter() {\n    public boolean accept(File dir, String name) {\n        return name.endsWith(\".class\");\n    }\n});\n\n// Find classes implementing ICommand.\nfor (File file : files) {\n    String className = file.getName().replaceAll(\".class$\", \"\");\n    Class&lt;?&gt; cls = Class.forName(packageName + \".\" + className);\n    if (ICommand.class.isAssignableFrom(cls)) {\n        commands.add((Class&lt;ICommand&gt;) cls);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":26957,"reputation":564401,"user_id":70604,"display_name":"Pascal Thivent"},"score":0,"creation_date":1259368290,"post_id":1810998,"comment_id":1700117,"body_markdown":"Something like the JSR-199 API? See http://stackoverflow.com/questions/1810614/getting-all-classes-from-a-package/1811120#1811120","body":"Something like the JSR-199 API? See <a href=\"http://stackoverflow.com/questions/1810614/getting-all-classes-from-a-package/1811120#1811120\" title=\"getting all classes from a package\">stackoverflow.com/questions/1810614/&hellip;</a>"}],"tags":[],"owner":{"account_id":76511,"reputation":44893,"user_id":218978,"accept_rate":100,"display_name":"irreputable"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1259364716,"creation_date":1259364716,"answer_id":1810998,"question_id":1810614,"body_markdown":"This would be a very useful tool we need, and JDK should provide some support. \r\n\r\nBut it&#39;s probably better done during build. You know where all your class files are and you can inspect them statically and build a graph. At runtime you can query this graph to get all subtypes. This requires more work, but I believe it really belongs to the build process.","title":"Getting all Classes from a Package","body":"<p>This would be a very useful tool we need, and JDK should provide some support. </p>\n\n<p>But it's probably better done during build. You know where all your class files are and you can inspect them statically and build a graph. At runtime you can query this graph to get all subtypes. This requires more work, but I believe it really belongs to the build process.</p>\n"},{"comments":[{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1259369479,"post_id":1811120,"comment_id":1700160,"body_markdown":"Interesting, but `ToolProvider.getSystemJavaCompiler()` returns `null` in both Eclipse and CLI? Is something more needed?","body":"Interesting, but <code>ToolProvider.getSystemJavaCompiler()</code> returns <code>null</code> in both Eclipse and CLI? Is something more needed?"},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":1,"creation_date":1259369989,"post_id":1811120,"comment_id":1700187,"body_markdown":"After digging, this apparently requires a JDK instead of JRE (which I however have in CLI, I&#39;ll dig later why this doesn&#39;t work). That would mean that you need to install a JDK in the final/prod environment to get it to work. That may be a showstopper.","body":"After digging, this apparently requires a JDK instead of JRE (which I however have in CLI, I&#39;ll dig later why this doesn&#39;t work). That would mean that you need to install a JDK in the final/prod environment to get it to work. That may be a showstopper."},{"owner":{"account_id":26957,"reputation":564401,"user_id":70604,"display_name":"Pascal Thivent"},"score":2,"creation_date":1259376651,"post_id":1811120,"comment_id":1700428,"body_markdown":"Indeed, you need a JDK to get a non `null` compiler object (see http://bit.ly/89HtA0) so this API doesn&#39;t really target the desktop. It should be OK on the server-side though (most app servers use a JDK after all, e.g. for JSP compilation). But of course, there might be exceptions. Actually, I just wanted to show that there was some support in the JDK even if this isn&#39;t a perfect use case for the Compiler API (it&#39;s a poor usage here). This API can do more, much more, for example compiling on the fly Java source code generated dynamically in-memory (which is already more interesting).","body":"Indeed, you need a JDK to get a non <code>null</code> compiler object (see <a href=\"http://bit.ly/89HtA0\" rel=\"nofollow noreferrer\">bit.ly/89HtA0</a>) so this API doesn&#39;t really target the desktop. It should be OK on the server-side though (most app servers use a JDK after all, e.g. for JSP compilation). But of course, there might be exceptions. Actually, I just wanted to show that there was some support in the JDK even if this isn&#39;t a perfect use case for the Compiler API (it&#39;s a poor usage here). This API can do more, much more, for example compiling on the fly Java source code generated dynamically in-memory (which is already more interesting)."},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1259378975,"post_id":1811120,"comment_id":1700505,"body_markdown":"It&#39;s indeed an interesting API. But unfortunately really only for the developer.","body":"It&#39;s indeed an interesting API. But unfortunately really only for the developer."},{"owner":{"account_id":32722,"reputation":8502,"user_id":91012,"accept_rate":67,"display_name":"mR_fr0g"},"score":2,"creation_date":1331230787,"post_id":1811120,"comment_id":12211391,"body_markdown":"When i run this javaFileObject.getClass() returns the class of the javaFileObject ie com.sun.tools.javac.util.DefaultFileManager$RegularFileObject. This class does not override Object.getClass()","body":"When i run this javaFileObject.getClass() returns the class of the javaFileObject ie com.sun.tools.javac.util.DefaultFileManager$RegularFileObjec&zwnj;&#8203;t. This class does not override Object.getClass()"},{"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"score":0,"creation_date":1455645398,"post_id":1811120,"comment_id":58577253,"body_markdown":"It is incorrect as @mR_fr0g mentions.  `javaFileObject.getClass()` doesn&#39;t return a corresponding class. It calls `Object.getClass()`.","body":"It is incorrect as @mR_fr0g mentions.  <code>javaFileObject.getClass()</code> doesn&#39;t return a corresponding class. It calls <code>Object.getClass()</code>."},{"owner":{"account_id":2211284,"reputation":2132,"user_id":1953056,"display_name":"Popeye"},"score":1,"creation_date":1457872383,"post_id":1811120,"comment_id":59594618,"body_markdown":"Use javaFileObject.getName() to get something like /somewhere/project.jar/(com/example/Example.class) while classes are packaged in a jar, or /somewhere/com/example/Example.class when not packaged in a jar, such as running in IDE. Then use string manipulations to get the class names. Of course, you may need to take care inner classes which ended with $1 or $n..","body":"Use javaFileObject.getName() to get something like /somewhere/project.jar/(com/example/Example.class) while classes are packaged in a jar, or /somewhere/com/example/Example.class when not packaged in a jar, such as running in IDE. Then use string manipulations to get the class names. Of course, you may need to take care inner classes which ended with $1 or $n.."}],"tags":[],"owner":{"account_id":26957,"reputation":564401,"user_id":70604,"display_name":"Pascal Thivent"},"comment_count":7,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1675474743,"creation_date":1259368209,"answer_id":1811120,"question_id":1810614,"body_markdown":"Below is an implementation using the JSR-199 API, i.e. classes from `javax.tools.*`:\r\n\r\n    List&lt;Class&gt; commands = new ArrayList&lt;&gt;();\r\n\r\n    JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();\r\n    StandardJavaFileManager fileManager = compiler.getStandardFileManager(\r\n            null, null, null);\r\n\r\n    StandardLocation location = StandardLocation.CLASS_PATH;\r\n    String packageName = &quot;commands&quot;;\r\n    Set&lt;JavaFileObject.Kind&gt; kinds = new HashSet&lt;&gt;();\r\n    kinds.add(JavaFileObject.Kind.CLASS);\r\n    boolean recurse = false;\r\n\r\n    Iterable&lt;JavaFileObject&gt; list = fileManager.list(location, packageName,\r\n            kinds, recurse);\r\n\r\n    for (JavaFileObject classFile : list) {\r\n        String name = classFile.getName().replaceAll(&quot;.*/|[.]class.*&quot;,&quot;&quot;);\r\n        commands.add(Class.forName(packageName + &quot;.&quot; + name));\r\n    }\r\n\r\nWorks for all packages and classes on the class path, packaged in jar files or without. For classes not explicitly added to the class path, i.e. those loaded by the bootstrap class loader, try setting location to `PLATFORM_CLASS_PATH` instead.","title":"Getting all Classes from a Package","body":"<p>Below is an implementation using the JSR-199 API, i.e. classes from <code>javax.tools.*</code>:</p>\n<pre><code>List&lt;Class&gt; commands = new ArrayList&lt;&gt;();\n\nJavaCompiler compiler = ToolProvider.getSystemJavaCompiler();\nStandardJavaFileManager fileManager = compiler.getStandardFileManager(\n        null, null, null);\n\nStandardLocation location = StandardLocation.CLASS_PATH;\nString packageName = &quot;commands&quot;;\nSet&lt;JavaFileObject.Kind&gt; kinds = new HashSet&lt;&gt;();\nkinds.add(JavaFileObject.Kind.CLASS);\nboolean recurse = false;\n\nIterable&lt;JavaFileObject&gt; list = fileManager.list(location, packageName,\n        kinds, recurse);\n\nfor (JavaFileObject classFile : list) {\n    String name = classFile.getName().replaceAll(&quot;.*/|[.]class.*&quot;,&quot;&quot;);\n    commands.add(Class.forName(packageName + &quot;.&quot; + name));\n}\n</code></pre>\n<p>Works for all packages and classes on the class path, packaged in jar files or without. For classes not explicitly added to the class path, i.e. those loaded by the bootstrap class loader, try setting location to <code>PLATFORM_CLASS_PATH</code> instead.</p>\n"},{"tags":[],"owner":{"account_id":5966,"reputation":2321,"user_id":9843,"accept_rate":67,"display_name":"Nicolas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1261169265,"creation_date":1261169265,"answer_id":1930598,"question_id":1810614,"body_markdown":"Using [Johannes Link&#39;s ClasspathSuite][1], I was able to do it like this:\r\n\r\n    import org.junit.extensions.cpsuite.ClassTester;\r\n    import org.junit.extensions.cpsuite.ClasspathClassesFinder;\r\n\r\n    public static List&lt;Class&lt;?&gt;&gt; getClasses(final Package pkg, final boolean includeChildPackages) {\r\n        return new ClasspathClassesFinder(new ClassTester() {\r\n            @Override public boolean searchInJars() { return true; }\r\n            @Override public boolean acceptInnerClass() { return false; }\r\n            @Override public boolean acceptClassName(String name) {\r\n                return name.startsWith(pkg.getName()) &amp;&amp; (includeChildPackages || name.indexOf(&quot;.&quot;, pkg.getName().length()) != -1);\r\n            }\r\n            @Override public boolean acceptClass(Class&lt;?&gt; c) { return true; }\r\n        }, System.getProperty(&quot;java.class.path&quot;)).find();\r\n    }\r\n\r\nThe ClasspathClassesFinder looks for class files and jars in the system classpath.\r\n\r\nIn your specific case, you could modify acceptClass like this:\r\n\r\n    @Override public boolean acceptClass(Class&lt;?&gt; c) {\r\n        return ICommand.class.isAssignableFrom(c);\r\n    }\r\n\r\nOne thing to note: be careful what you return in acceptClassName, as the next thing ClasspathClassesFinder does is to load the class and call acceptClass. If acceptClassName always return true, you&#39;ll end up loading every class in the classpath and that may cause an OutOfMemoryError.\r\n\r\n  [1]: http://www.johanneslink.net/projects/cpsuite.jsp","title":"Getting all Classes from a Package","body":"<p>Using <a href=\"http://www.johanneslink.net/projects/cpsuite.jsp\" rel=\"nofollow noreferrer\">Johannes Link's ClasspathSuite</a>, I was able to do it like this:</p>\n\n<pre><code>import org.junit.extensions.cpsuite.ClassTester;\nimport org.junit.extensions.cpsuite.ClasspathClassesFinder;\n\npublic static List&lt;Class&lt;?&gt;&gt; getClasses(final Package pkg, final boolean includeChildPackages) {\n    return new ClasspathClassesFinder(new ClassTester() {\n        @Override public boolean searchInJars() { return true; }\n        @Override public boolean acceptInnerClass() { return false; }\n        @Override public boolean acceptClassName(String name) {\n            return name.startsWith(pkg.getName()) &amp;&amp; (includeChildPackages || name.indexOf(\".\", pkg.getName().length()) != -1);\n        }\n        @Override public boolean acceptClass(Class&lt;?&gt; c) { return true; }\n    }, System.getProperty(\"java.class.path\")).find();\n}\n</code></pre>\n\n<p>The ClasspathClassesFinder looks for class files and jars in the system classpath.</p>\n\n<p>In your specific case, you could modify acceptClass like this:</p>\n\n<pre><code>@Override public boolean acceptClass(Class&lt;?&gt; c) {\n    return ICommand.class.isAssignableFrom(c);\n}\n</code></pre>\n\n<p>One thing to note: be careful what you return in acceptClassName, as the next thing ClasspathClassesFinder does is to load the class and call acceptClass. If acceptClassName always return true, you'll end up loading every class in the classpath and that may cause an OutOfMemoryError.</p>\n"},{"tags":[],"owner":{"account_id":317715,"reputation":294,"user_id":634553,"display_name":"Osman Shoukry"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1346126654,"creation_date":1346126654,"answer_id":12152609,"question_id":1810614,"body_markdown":"You could use [OpenPojo][1] and do this:\r\n\r\n    final List&lt;PojoClass&gt; pojoClasses = PojoClassFactory.getPojoClassesRecursively(&quot;my.package.path&quot;, null);\r\n\r\nThen you can go over the list and perform any functionality you desire.\r\n\r\n  [1]: http://openpojo.com\r\n","title":"Getting all Classes from a Package","body":"<p>You could use <a href=\"http://openpojo.com\" rel=\"nofollow\">OpenPojo</a> and do this:</p>\n\n<pre><code>final List&lt;PojoClass&gt; pojoClasses = PojoClassFactory.getPojoClassesRecursively(\"my.package.path\", null);\n</code></pre>\n\n<p>Then you can go over the list and perform any functionality you desire.</p>\n"},{"tags":[],"owner":{"display_name":"user4718768"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1573342635,"creation_date":1573244389,"answer_id":58773271,"question_id":1810614,"body_markdown":"If you do not want to use external depencies and you want to work on your IDE / on a JAR file, you can try this:\r\n\r\n\tpublic static List&lt;Class&lt;?&gt;&gt; getClassesForPackage(final String pkgName) throws IOException, URISyntaxException {\r\n\t\tfinal String pkgPath = pkgName.replace(&#39;.&#39;, &#39;/&#39;);\r\n\t\tfinal URI pkg = Objects.requireNonNull(ClassLoader.getSystemClassLoader().getResource(pkgPath)).toURI();\r\n\t\tfinal ArrayList&lt;Class&lt;?&gt;&gt; allClasses = new ArrayList&lt;Class&lt;?&gt;&gt;();\r\n\r\n\t\tPath root;\r\n\t\tif (pkg.toString().startsWith(&quot;jar:&quot;)) {\r\n\t\t\ttry {\r\n\t\t\t\troot = FileSystems.getFileSystem(pkg).getPath(pkgPath);\r\n\t\t\t} catch (final FileSystemNotFoundException e) {\r\n\t\t\t\troot = FileSystems.newFileSystem(pkg, Collections.emptyMap()).getPath(pkgPath);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\troot = Paths.get(pkg);\r\n\t\t}\r\n\r\n\t\tfinal String extension = &quot;.class&quot;;\r\n\t\ttry (final Stream&lt;Path&gt; allPaths = Files.walk(root)) {\r\n\t\t\tallPaths.filter(Files::isRegularFile).forEach(file -&gt; {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfinal String path = file.toString().replace(&#39;/&#39;, &#39;.&#39;);\r\n\t\t\t\t\tfinal String name = path.substring(path.indexOf(pkgName), path.length() - extension.length());\r\n\t\t\t\t\tallClasses.add(Class.forName(name));\r\n\t\t\t\t} catch (final ClassNotFoundException | StringIndexOutOfBoundsException ignored) {\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn allClasses;\r\n\t}\r\n\r\nFrom: https://stackoverflow.com/questions/520328/can-you-find-all-classes-in-a-package-using-reflection/58773038#58773038","title":"Getting all Classes from a Package","body":"<p>If you do not want to use external depencies and you want to work on your IDE / on a JAR file, you can try this:</p>\n\n<pre><code>public static List&lt;Class&lt;?&gt;&gt; getClassesForPackage(final String pkgName) throws IOException, URISyntaxException {\n    final String pkgPath = pkgName.replace('.', '/');\n    final URI pkg = Objects.requireNonNull(ClassLoader.getSystemClassLoader().getResource(pkgPath)).toURI();\n    final ArrayList&lt;Class&lt;?&gt;&gt; allClasses = new ArrayList&lt;Class&lt;?&gt;&gt;();\n\n    Path root;\n    if (pkg.toString().startsWith(\"jar:\")) {\n        try {\n            root = FileSystems.getFileSystem(pkg).getPath(pkgPath);\n        } catch (final FileSystemNotFoundException e) {\n            root = FileSystems.newFileSystem(pkg, Collections.emptyMap()).getPath(pkgPath);\n        }\n    } else {\n        root = Paths.get(pkg);\n    }\n\n    final String extension = \".class\";\n    try (final Stream&lt;Path&gt; allPaths = Files.walk(root)) {\n        allPaths.filter(Files::isRegularFile).forEach(file -&gt; {\n            try {\n                final String path = file.toString().replace('/', '.');\n                final String name = path.substring(path.indexOf(pkgName), path.length() - extension.length());\n                allClasses.add(Class.forName(name));\n            } catch (final ClassNotFoundException | StringIndexOutOfBoundsException ignored) {\n            }\n        });\n    }\n    return allClasses;\n}\n</code></pre>\n\n<p>From: <a href=\"https://stackoverflow.com/questions/520328/can-you-find-all-classes-in-a-package-using-reflection/58773038#58773038\">Can you find all classes in a package using reflection?</a></p>\n"}],"owner":{"account_id":65066,"reputation":1257,"user_id":191733,"accept_rate":86,"display_name":"JustMaximumPower"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30194,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":1810665,"answer_count":9,"score":16,"last_activity_date":1675474743,"creation_date":1259355437,"question_id":1810614,"body_markdown":"Lets say I have a java package `commands` which contains classes that all inherit from `ICommand` can I get all of those classes somehow? I&#39;m locking for something among the lines of:\r\n\r\n    Package p = Package.getPackage(&quot;commands&quot;);\r\n    Class&lt;ICommand&gt;[] c = p.getAllPackagedClasses(); //not real \r\n\r\nIs something like that possible?","title":"Getting all Classes from a Package","body":"<p>Lets say I have a java package <code>commands</code> which contains classes that all inherit from <code>ICommand</code> can I get all of those classes somehow? I'm locking for something among the lines of:</p>\n\n<pre><code>Package p = Package.getPackage(\"commands\");\nClass&lt;ICommand&gt;[] c = p.getAllPackagedClasses(); //not real \n</code></pre>\n\n<p>Is something like that possible?</p>\n"},{"tags":["java","junit"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1675478042,"post_id":75342389,"comment_id":132943754,"body_markdown":"Mockito 3.4.0 and higher allows you to mock static methods.  You don&#39;t need PowerMock if that&#39;s all you&#39;re using it for.","body":"Mockito 3.4.0 and higher allows you to mock static methods.  You don&#39;t need PowerMock if that&#39;s all you&#39;re using it for."}],"owner":{"account_id":3291597,"reputation":133,"user_id":2769790,"accept_rate":25,"display_name":"user2769790"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675473504,"creation_date":1675473504,"question_id":75342389,"body_markdown":"My following Unit test is failing.\r\nI&#39;m getting an error ```The class com.xyz.sys.PluginManager not prepared for test.```\r\n```\r\n\r\n// @RunWith(PowerMockRunner.class)\r\n@RunWith(GlideUiRunner.class)\r\npublic class TestClass extends BaseITClass {\r\n\r\n\tprivate static final String PLUGIN_MESSAGE = &quot;texttt&quot;;\r\n\r\n\t@Before\r\n\tpublic void initMocks() {\r\n\t\tMockitoAnnotations.initMocks(this);\r\n\t\t// PowerMockito.mockStatic(RecordCache.class);\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void testUpgradeMonitorDontShowAtfPluginWarningMessage() {\r\n\t\topen(UPGRADE_PAGE);\r\n\t\tString actualMsg = findElement(By.xpath(&quot;//div[@ng-if=&#39;divElementName&#39;]&quot;)).getText();\r\n\t\tPowerMockito.mockStatic(PluginManager.class);\r\n\t\tPowerMockito.when(PluginManager.isActive(&quot;pluginName&quot;)).thenReturn(true);\r\n\t\tAssert.assertFalse(actualMsg.contains(PLUGIN_MESSAGE));\r\n\t}\r\n}\r\n```\r\n\r\nAny suggestions where the issue is?\r\nNote: I need to use GlideUiRunner.class.. Can&#39;t remove that.","title":"JUnit Powermock failure","body":"<p>My following Unit test is failing.\nI'm getting an error <code>The class com.xyz.sys.PluginManager not prepared for test.</code></p>\n<pre><code>\n// @RunWith(PowerMockRunner.class)\n@RunWith(GlideUiRunner.class)\npublic class TestClass extends BaseITClass {\n\n    private static final String PLUGIN_MESSAGE = &quot;texttt&quot;;\n\n    @Before\n    public void initMocks() {\n        MockitoAnnotations.initMocks(this);\n        // PowerMockito.mockStatic(RecordCache.class);\n    }\n\n    @Test\n    public void testUpgradeMonitorDontShowAtfPluginWarningMessage() {\n        open(UPGRADE_PAGE);\n        String actualMsg = findElement(By.xpath(&quot;//div[@ng-if='divElementName']&quot;)).getText();\n        PowerMockito.mockStatic(PluginManager.class);\n        PowerMockito.when(PluginManager.isActive(&quot;pluginName&quot;)).thenReturn(true);\n        Assert.assertFalse(actualMsg.contains(PLUGIN_MESSAGE));\n    }\n}\n</code></pre>\n<p>Any suggestions where the issue is?\nNote: I need to use GlideUiRunner.class.. Can't remove that.</p>\n"},{"tags":["java","jtable","jtextpane","typography","word-processor"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1675291170,"post_id":75314276,"comment_id":132899979,"body_markdown":"That will not work.  A JTable is not text, it’s a Swing component.  What you can do, however, is [install](https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/javax/swing/JTextPane.html#setEditorKit(javax.swing.text.EditorKit)) an [HTMLEditorKit](https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/javax/swing/text/html/HTMLEditorKit.html) and then add an HTML table.","body":"That will not work.  A JTable is not text, it’s a Swing component.  What you can do, however, is <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/javax/swing/JTextPane.html#setEditorKit(javax.swing.text.EditorKit)\" rel=\"nofollow noreferrer\">install</a> an <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/javax/swing/text/html/HTMLEditorKit.html\" rel=\"nofollow noreferrer\">HTMLEditorKit</a> and then add an HTML table."},{"owner":{"account_id":27678168,"reputation":1,"user_id":21127538,"display_name":"Ying Li"},"score":0,"creation_date":1675375063,"post_id":75314276,"comment_id":132921556,"body_markdown":"Hello, VGR. Thanks alot for your help. But if I can use HTML to insert a table, how can I apply style changes beyond CSS?","body":"Hello, VGR. Thanks alot for your help. But if I can use HTML to insert a table, how can I apply style changes beyond CSS?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1675377420,"post_id":75314276,"comment_id":132922051,"body_markdown":"The same way you do it with other text.","body":"The same way you do it with other text."},{"owner":{"account_id":27678168,"reputation":1,"user_id":21127538,"display_name":"Ying Li"},"score":0,"creation_date":1675395093,"post_id":75314276,"comment_id":132924556,"body_markdown":"Sorry to bother you again and again, but I need to clarify it. For other text outside table, I use StyledEditorKit. In other words, how can you bold the text in online table?","body":"Sorry to bother you again and again, but I need to clarify it. For other text outside table, I use StyledEditorKit. In other words, how can you bold the text in online table?"}],"answers":[{"comments":[{"owner":{"account_id":27678168,"reputation":1,"user_id":21127538,"display_name":"Ying Li"},"score":0,"creation_date":1675534975,"post_id":75342332,"comment_id":132951655,"body_markdown":"I don&#39;t know how to express my appreciation to you for spending time on it. It works great from the point of view of HTML kit. I want to email you my program which uses StyledDocument to implement word processor. And I tried to set textPane.setEditorKit(\n            textPane.getEditorKitForContentType(&quot;text/html&quot;));","body":"I don&#39;t know how to express my appreciation to you for spending time on it. It works great from the point of view of HTML kit. I want to email you my program which uses StyledDocument to implement word processor. And I tried to set textPane.setEditorKit(             textPane.getEditorKitForContentType(&quot;text/html&quot;));"},{"owner":{"account_id":27678168,"reputation":1,"user_id":21127538,"display_name":"Ying Li"},"score":0,"creation_date":1675535579,"post_id":75342332,"comment_id":132951756,"body_markdown":"yingzi1.calgary@gmail.com. University of Calgary computer science graduate. Sorry to bother your time. I wrote a word processer using Java and hope to send it to you for the question background, if you are interested in it. Anyway, Thanks a lot!!!!!!!!!!!!!!!!I appreciate it very very much.","body":"yingzi1.calgary@gmail.com. University of Calgary computer science graduate. Sorry to bother your time. I wrote a word processer using Java and hope to send it to you for the question background, if you are interested in it. Anyway, Thanks a lot!!!!!!!!!!!!!!!!I appreciate it very very much."}],"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675472363,"creation_date":1675472363,"answer_id":75342332,"question_id":75314276,"body_markdown":"A JTable is a component, not text.  It cannot be styled using document styling.\r\n\r\nYou can, however, install an [HTMLEditorKit]() on your JTextPane, which allows you to add HTML [table](https://www.w3.org/TR/html4/struct/tables.html#h-11.2.1) to your document.  An HTML table is comprised of text, so you can apply styles to it:\r\n\r\n    import java.io.StringReader;\r\n    import java.io.IOException;\r\n\r\n    import java.awt.Color;\r\n    import java.awt.EventQueue;\r\n\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JScrollPane;\r\n    import javax.swing.JTextPane;\r\n\r\n    import javax.swing.text.Style;\r\n    import javax.swing.text.StyleConstants;\r\n    import javax.swing.text.BadLocationException;\r\n\r\n    public class TableInTextPane {\r\n        static void showTextPane() {\r\n            JTextPane textPane = new JTextPane();\r\n            textPane.setEditorKit(\r\n                textPane.getEditorKitForContentType(&quot;text/html&quot;));\r\n\r\n            Style red = textPane.addStyle(&quot;red&quot;, null);\r\n            StyleConstants.setForeground(red, Color.RED);\r\n\r\n            Style green = textPane.addStyle(&quot;green&quot;, null);\r\n            StyleConstants.setForeground(green, Color.GREEN);\r\n\r\n            textPane.setLogicalStyle(red);\r\n\r\n            try {\r\n                textPane.getStyledDocument().insertString(0, &quot;Red text&quot;, red);\r\n            } catch (BadLocationException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n\r\n            String table =\r\n                &quot;&lt;table border=1&gt;&quot;\r\n                + &quot;&lt;tr&gt;&lt;th&gt;Country      &lt;th&gt;Group&lt;th&gt;Position&quot;\r\n                + &quot;&lt;tr&gt;&lt;td&gt;Netherlands  &lt;td&gt;A&lt;td&gt;1&quot;\r\n                + &quot;&lt;tr&gt;&lt;td&gt;Senegal      &lt;td&gt;A&lt;td&gt;2&quot;\r\n                + &quot;&lt;tr&gt;&lt;td&gt;Ecuador      &lt;td&gt;A&lt;td&gt;3&quot;\r\n                + &quot;&lt;tr&gt;&lt;td&gt;Qatar        &lt;td&gt;A&lt;td&gt;4&quot;\r\n                + &quot;&lt;tr&gt;&lt;td&gt;England      &lt;td&gt;B&lt;td&gt;1&quot;\r\n                + &quot;&lt;tr&gt;&lt;td&gt;United States&lt;td&gt;B&lt;td&gt;2&quot;\r\n                + &quot;&lt;tr&gt;&lt;td&gt;Iran         &lt;td&gt;B&lt;td&gt;3&quot;\r\n                + &quot;&lt;tr&gt;&lt;td&gt;Wales        &lt;td&gt;B&lt;td&gt;4&quot;\r\n                + &quot;&lt;/table&gt;&quot;;\r\n\r\n            int tableStartOffset = textPane.getDocument().getLength();\r\n            try {\r\n                textPane.getEditorKit().read(\r\n                    new StringReader(table),\r\n                    textPane.getDocument(),\r\n                    tableStartOffset);\r\n            } catch (BadLocationException | IOException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n            int tableEndOffset = textPane.getDocument().getLength();\r\n\r\n            int caretPosition = textPane.getCaretPosition();\r\n\r\n            textPane.select(tableStartOffset, tableEndOffset);\r\n            textPane.setCharacterAttributes(green, false);\r\n\r\n            textPane.select(caretPosition, caretPosition);\r\n\r\n            showInWindow(textPane);\r\n        }\r\n\r\n        private static void showInWindow(JTextPane textPane) {\r\n            JFrame frame = new JFrame(&quot;Table Test&quot;);\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\r\n            frame.getContentPane().add(new JScrollPane(textPane));\r\n            frame.pack();\r\n\r\n            frame.setLocationByPlatform(true);\r\n            frame.setVisible(true);\r\n        }\r\n\r\n        public static void main(String[] args) {\r\n            EventQueue.invokeLater(() -&gt; showTextPane());\r\n        }\r\n    }\r\n","title":"How to apply style changes (such as bold, Italic, color, adding bullets, etc) inside a JTable in Java?","body":"<p>A JTable is a component, not text.  It cannot be styled using document styling.</p>\n<p>You can, however, install an HTMLEditorKit on your JTextPane, which allows you to add HTML <a href=\"https://www.w3.org/TR/html4/struct/tables.html#h-11.2.1\" rel=\"nofollow noreferrer\">table</a> to your document.  An HTML table is comprised of text, so you can apply styles to it:</p>\n<pre><code>import java.io.StringReader;\nimport java.io.IOException;\n\nimport java.awt.Color;\nimport java.awt.EventQueue;\n\nimport javax.swing.JFrame;\nimport javax.swing.JScrollPane;\nimport javax.swing.JTextPane;\n\nimport javax.swing.text.Style;\nimport javax.swing.text.StyleConstants;\nimport javax.swing.text.BadLocationException;\n\npublic class TableInTextPane {\n    static void showTextPane() {\n        JTextPane textPane = new JTextPane();\n        textPane.setEditorKit(\n            textPane.getEditorKitForContentType(&quot;text/html&quot;));\n\n        Style red = textPane.addStyle(&quot;red&quot;, null);\n        StyleConstants.setForeground(red, Color.RED);\n\n        Style green = textPane.addStyle(&quot;green&quot;, null);\n        StyleConstants.setForeground(green, Color.GREEN);\n\n        textPane.setLogicalStyle(red);\n\n        try {\n            textPane.getStyledDocument().insertString(0, &quot;Red text&quot;, red);\n        } catch (BadLocationException e) {\n            throw new RuntimeException(e);\n        }\n\n        String table =\n            &quot;&lt;table border=1&gt;&quot;\n            + &quot;&lt;tr&gt;&lt;th&gt;Country      &lt;th&gt;Group&lt;th&gt;Position&quot;\n            + &quot;&lt;tr&gt;&lt;td&gt;Netherlands  &lt;td&gt;A&lt;td&gt;1&quot;\n            + &quot;&lt;tr&gt;&lt;td&gt;Senegal      &lt;td&gt;A&lt;td&gt;2&quot;\n            + &quot;&lt;tr&gt;&lt;td&gt;Ecuador      &lt;td&gt;A&lt;td&gt;3&quot;\n            + &quot;&lt;tr&gt;&lt;td&gt;Qatar        &lt;td&gt;A&lt;td&gt;4&quot;\n            + &quot;&lt;tr&gt;&lt;td&gt;England      &lt;td&gt;B&lt;td&gt;1&quot;\n            + &quot;&lt;tr&gt;&lt;td&gt;United States&lt;td&gt;B&lt;td&gt;2&quot;\n            + &quot;&lt;tr&gt;&lt;td&gt;Iran         &lt;td&gt;B&lt;td&gt;3&quot;\n            + &quot;&lt;tr&gt;&lt;td&gt;Wales        &lt;td&gt;B&lt;td&gt;4&quot;\n            + &quot;&lt;/table&gt;&quot;;\n\n        int tableStartOffset = textPane.getDocument().getLength();\n        try {\n            textPane.getEditorKit().read(\n                new StringReader(table),\n                textPane.getDocument(),\n                tableStartOffset);\n        } catch (BadLocationException | IOException e) {\n            throw new RuntimeException(e);\n        }\n        int tableEndOffset = textPane.getDocument().getLength();\n\n        int caretPosition = textPane.getCaretPosition();\n\n        textPane.select(tableStartOffset, tableEndOffset);\n        textPane.setCharacterAttributes(green, false);\n\n        textPane.select(caretPosition, caretPosition);\n\n        showInWindow(textPane);\n    }\n\n    private static void showInWindow(JTextPane textPane) {\n        JFrame frame = new JFrame(&quot;Table Test&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        frame.getContentPane().add(new JScrollPane(textPane));\n        frame.pack();\n\n        frame.setLocationByPlatform(true);\n        frame.setVisible(true);\n    }\n\n    public static void main(String[] args) {\n        EventQueue.invokeLater(() -&gt; showTextPane());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":27678168,"reputation":1,"user_id":21127538,"display_name":"Ying Li"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675472363,"creation_date":1675274159,"question_id":75314276,"body_markdown":"I implement a mini word processor using JTextPane in Java. I created a tool bar that makes me be able to bold, underline, and color the texts which the users can input. \r\n\r\nNow I insert a JTable into this JTextPane and I hope to be able to do what I can do outside the table. Can I do that? Using cell renderer and editor to introduce the outside environment? Or use LayerUI to draw a table on the top of the JTextPane? I can draw, but how to edit in the image?\r\n\r\nI am a new beginner in Java programming. If you can give me some hints, I would appreciate it very very much!\r\n\r\nWhat I expect is that I can type in the JTable and apply bold, italic, underline and color changes, even add bullets, etc.","title":"How to apply style changes (such as bold, Italic, color, adding bullets, etc) inside a JTable in Java?","body":"<p>I implement a mini word processor using JTextPane in Java. I created a tool bar that makes me be able to bold, underline, and color the texts which the users can input.</p>\n<p>Now I insert a JTable into this JTextPane and I hope to be able to do what I can do outside the table. Can I do that? Using cell renderer and editor to introduce the outside environment? Or use LayerUI to draw a table on the top of the JTextPane? I can draw, but how to edit in the image?</p>\n<p>I am a new beginner in Java programming. If you can give me some hints, I would appreciate it very very much!</p>\n<p>What I expect is that I can type in the JTable and apply bold, italic, underline and color changes, even add bullets, etc.</p>\n"},{"tags":["java","netty","micronaut"],"comments":[{"owner":{"account_id":5311013,"reputation":1462,"user_id":4237346,"display_name":"itwasntme"},"score":0,"creation_date":1675476346,"post_id":75342295,"comment_id":132943649,"body_markdown":"How the event-loop is shared with clients in your case? I don&#39;t know any framework that would easily share the event-loop, the state of course, but with state is that the client modifies the state and sends it back to the server which reads it with its normal event-loop.\nNo parent loop? Who&#39;s the child? Client? nah. Event-loop-group&#39;s&#39; are something different. Event-loop groups are the threads assigned to that loop.\nI might be wrong, but if so, please clarify a little bit more in the question or comment, thanks.","body":"How the event-loop is shared with clients in your case? I don&#39;t know any framework that would easily share the event-loop, the state of course, but with state is that the client modifies the state and sends it back to the server which reads it with its normal event-loop. No parent loop? Who&#39;s the child? Client? nah. Event-loop-group&#39;s&#39; are something different. Event-loop groups are the threads assigned to that loop. I might be wrong, but if so, please clarify a little bit more in the question or comment, thanks."},{"owner":{"account_id":100045,"reputation":2725,"user_id":269876,"accept_rate":0,"display_name":"Lo-Tan"},"score":0,"creation_date":1685987179,"post_id":75342295,"comment_id":134734747,"body_markdown":"I love how there&#39;s zero documentation for the parent event-loop or how it differentiates from the worker thread group. Let&#39;s say the worker thread group is being slow. Is that bottle necking the server which could lead to dropped requests? Or does that only happen if you block the parent event loop threads. Where are the architecture diagrams? Why am I using Micronaut again :(","body":"I love how there&#39;s zero documentation for the parent event-loop or how it differentiates from the worker thread group. Let&#39;s say the worker thread group is being slow. Is that bottle necking the server which could lead to dropped requests? Or does that only happen if you block the parent event loop threads. Where are the architecture diagrams? Why am I using Micronaut again :("}],"owner":{"account_id":1718673,"reputation":1,"user_id":1575190,"display_name":"martinsk"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":598,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675471790,"creation_date":1675471790,"question_id":75342295,"body_markdown":"I&#39;m trying to configure a HTTP Server for an API made in Micronaut 3.7.5. Reviewing the Micronaut [documentation](https://docs.micronaut.io/latest/guide/index.html#serverConfiguration) I found many ways to do it and I not sure which is the best way.\r\n\r\n1. **Worker event-loop:**. If I set a event-loop name not used \r\n\r\n```\r\nmicronaut.server.netty.worker.event-loop-group\r\nmicronaut.server.netty.worker.threads\r\n```\r\n\r\n2. **Default event-loop:** This event-loop is shared with clients also, unless I specify a diferent event-loop for them\r\n\r\n```\r\nmicronaut.netty.event-loops.default.num-threads\r\n```\r\n\r\n3. **Parent event-loop:** I cound&#39;t find any documentation about it and how to use it\r\n\r\n\r\n```\r\nmicronaut.server.netty.parent.event-loop-group\r\nmicronaut.server.netty.parent.threads\r\n```","title":"How to configure the Thread Pool for a HTTP Server in Micronaut","body":"<p>I'm trying to configure a HTTP Server for an API made in Micronaut 3.7.5. Reviewing the Micronaut <a href=\"https://docs.micronaut.io/latest/guide/index.html#serverConfiguration\" rel=\"nofollow noreferrer\">documentation</a> I found many ways to do it and I not sure which is the best way.</p>\n<ol>\n<li><strong>Worker event-loop:</strong>. If I set a event-loop name not used</li>\n</ol>\n<pre><code>micronaut.server.netty.worker.event-loop-group\nmicronaut.server.netty.worker.threads\n</code></pre>\n<ol start=\"2\">\n<li><strong>Default event-loop:</strong> This event-loop is shared with clients also, unless I specify a diferent event-loop for them</li>\n</ol>\n<pre><code>micronaut.netty.event-loops.default.num-threads\n</code></pre>\n<ol start=\"3\">\n<li><strong>Parent event-loop:</strong> I cound't find any documentation about it and how to use it</li>\n</ol>\n<pre><code>micronaut.server.netty.parent.event-loop-group\nmicronaut.server.netty.parent.threads\n</code></pre>\n"},{"tags":["java","maven-2","jar","packaging"],"comments":[{"owner":{"account_id":440421,"reputation":16338,"user_id":829970,"accept_rate":89,"display_name":"Moshe Katz"},"score":1,"creation_date":1430164653,"post_id":1729054,"comment_id":47932294,"body_markdown":"possible duplicate of [How can I create an executable jar with dependencies using Maven?](http://stackoverflow.com/questions/574594/how-can-i-create-an-executable-jar-with-dependencies-using-maven)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/574594/how-can-i-create-an-executable-jar-with-dependencies-using-maven\">How can I create an executable jar with dependencies using Maven?</a>"},{"owner":{"account_id":7469704,"reputation":7861,"user_id":5678086,"accept_rate":73,"display_name":"Thanga"},"score":0,"creation_date":1505117959,"post_id":1729054,"comment_id":79263742,"body_markdown":"https://stackoverflow.com/questions/35217128/is-it-possible-to-build-a-java-project-only-once-using-eclipse-and-share/35359756#35359756","body":"<a href=\"https://stackoverflow.com/questions/35217128/is-it-possible-to-build-a-java-project-only-once-using-eclipse-and-share/35359756#35359756\" title=\"is it possible to build a java project only once using eclipse and share\">stackoverflow.com/questions/35217128/&hellip;</a>"},{"owner":{"account_id":49078,"reputation":44646,"user_id":145989,"accept_rate":59,"display_name":"Ondra Žižka"},"score":1,"creation_date":1666829819,"post_id":1729054,"comment_id":131030936,"body_markdown":"Flattening the dependencies into a single JAR is a bad idea in general. It causes a LOT of troubles, because of the special-purpose resources.","body":"Flattening the dependencies into a single JAR is a bad idea in general. It causes a LOT of troubles, because of the special-purpose resources."}],"answers":[{"comments":[{"owner":{"account_id":1800364,"reputation":3399,"user_id":1638871,"accept_rate":100,"display_name":"D. A."},"score":62,"creation_date":1395354879,"post_id":1729094,"comment_id":34314276,"body_markdown":"In case any new mvn folks got stuck like me, add the plugin to &lt;plugins&gt; inside &lt;build&gt; which is inside &lt;project&gt;.","body":"In case any new mvn folks got stuck like me, add the plugin to &lt;plugins&gt; inside &lt;build&gt; which is inside &lt;project&gt;."},{"owner":{"account_id":80600,"reputation":7025,"user_id":227821,"accept_rate":94,"display_name":"lony"},"score":2,"creation_date":1397047140,"post_id":1729094,"comment_id":35060547,"body_markdown":"How can I avoid including libraries I don&#39;t use in my code? My jar just using SSJ sums up to 10 MB :(","body":"How can I avoid including libraries I don&#39;t use in my code? My jar just using SSJ sums up to 10 MB :("},{"owner":{"account_id":480691,"reputation":8333,"user_id":894065,"accept_rate":100,"display_name":"lux"},"score":2,"creation_date":1404933205,"post_id":1729094,"comment_id":38232398,"body_markdown":"@D.A. Why people leave out relevant (read: pertinent) details like that are beyond me.","body":"@D.A. Why people leave out relevant (read: pertinent) details like that are beyond me."},{"owner":{"account_id":5131784,"reputation":15928,"user_id":4111710,"accept_rate":49,"display_name":"Hobbyist"},"score":1,"creation_date":1417625044,"post_id":1729094,"comment_id":43023020,"body_markdown":"Still can&#39;t get this to work, I&#39;ve followed like 15 different answers on different questions too.","body":"Still can&#39;t get this to work, I&#39;ve followed like 15 different answers on different questions too."},{"owner":{"account_id":1153814,"reputation":3543,"user_id":1134961,"accept_rate":50,"display_name":"technocrat"},"score":17,"creation_date":1425926632,"post_id":1729094,"comment_id":46152849,"body_markdown":"@Christian.tucker There&#39;s a 2nd jar in the target directory created like this: \n**./target/example-0.0.1-SNAPSHOT.jar**  and \n**./target/example-0.0.1-SNAPSHOT-jar-with-dependencies.jar**","body":"@Christian.tucker There&#39;s a 2nd jar in the target directory created like this:  <b>./target/example-0.0.1-SNAPSHOT.jar</b>  and  <b>./target/example-0.0.1-SNAPSHOT-jar-with-dependencies.jar</b>"},{"owner":{"account_id":2372918,"reputation":4836,"user_id":2077101,"accept_rate":64,"display_name":"James Watkins"},"score":0,"creation_date":1426383227,"post_id":1729094,"comment_id":46349743,"body_markdown":"How can I get the install goal to put the jar-with-dependencies into the repo?","body":"How can I get the install goal to put the jar-with-dependencies into the repo?"},{"owner":{"account_id":1507058,"reputation":2933,"user_id":1410212,"accept_rate":88,"display_name":"lilalinux"},"score":0,"creation_date":1439364545,"post_id":1729094,"comment_id":51825408,"body_markdown":"@Christian.tucker mvn assembly:assembly -DdescriptorId=jar-with-dependencies","body":"@Christian.tucker mvn assembly:assembly -DdescriptorId=jar-with-dependencies"},{"owner":{"account_id":3805046,"reputation":1192,"user_id":3157709,"accept_rate":28,"display_name":"Hammad Hassan"},"score":5,"creation_date":1440067954,"post_id":1729094,"comment_id":52125134,"body_markdown":"Just add one more thing in configuration. Your main class information.\n&lt;archive&gt;\n              &lt;manifest&gt;\n                  &lt;mainClass&gt;fully qualified name&lt;/mainClass&gt;\n              &lt;/manifest&gt;\n&lt;/archive&gt;","body":"Just add one more thing in configuration. Your main class information. &lt;archive&gt;               &lt;manifest&gt;                   &lt;mainClass&gt;fully qualified name&lt;/mainClass&gt;               &lt;/manifest&gt; &lt;/archive&gt;"},{"owner":{"account_id":24932,"reputation":2474,"user_id":63730,"accept_rate":83,"display_name":"geschema"},"score":4,"creation_date":1512399662,"post_id":1729094,"comment_id":82230181,"body_markdown":"It works but I&#39;m seeing two JARs in the target directory: with and without dependencies. How do I generate only the JAR that has the dependencies?","body":"It works but I&#39;m seeing two JARs in the target directory: with and without dependencies. How do I generate only the JAR that has the dependencies?"},{"owner":{"account_id":3974488,"reputation":1237,"user_id":3278010,"accept_rate":10,"display_name":"Kush Patel"},"score":1,"creation_date":1552556200,"post_id":1729094,"comment_id":97057375,"body_markdown":"How to include a jar file into jar file in maven ?","body":"How to include a jar file into jar file in maven ?"},{"owner":{"account_id":10372385,"reputation":125,"user_id":7649668,"display_name":"Kachopsticks"},"score":0,"creation_date":1593705815,"post_id":1729094,"comment_id":110880245,"body_markdown":"Hello, if you use this plugin, will it grab jars from a local lib folder? I reference some dependencies this way in the project that I want to build into a jar...\n`\t\t&lt;dependency&gt;\n\t\t\t&lt;groupId&gt;com.kachop&lt;/groupId&gt;\n\t\t\t&lt;artifactId&gt;mylocal&lt;/artifactId&gt;\n\t\t\t&lt;version&gt;1.0.0&lt;/version&gt;\n\t\t\t&lt;scope&gt;system&lt;/scope&gt;\n\t\t\t&lt;systemPath&gt;${basedir}/lib/lk/mylocal.jar&lt;/systemPath&gt;\n\t\t&lt;/dependency&gt;`","body":"Hello, if you use this plugin, will it grab jars from a local lib folder? I reference some dependencies this way in the project that I want to build into a jar... `\t\t&lt;dependency&gt; \t\t\t&lt;groupId&gt;com.kachop&lt;/groupId&gt; \t\t\t&lt;artifactId&gt;mylocal&lt;/artifactId&gt; \t\t\t&lt;version&gt;1.0.0&lt;/version&gt; \t\t\t&lt;scope&gt;system&lt;/scope&gt; \t\t\t&lt;systemPath&gt;${basedir}/lib/lk/mylocal.jar&lt;/systemPath&gt; \t\t&lt;/dependency&gt;`"}],"tags":[],"owner":{"account_id":3995,"reputation":16180,"user_id":5874,"accept_rate":86,"display_name":"John Stauffer"},"comment_count":11,"down_vote_count":3,"up_vote_count":583,"is_accepted":true,"score":580,"last_activity_date":1429782873,"creation_date":1258117315,"answer_id":1729094,"question_id":1729054,"body_markdown":"You can do this using the maven-assembly plugin with the &quot;jar-with-dependencies&quot; descriptor. Here&#39;s the relevant chunk from one of our pom.xml&#39;s that does this:\r\n\r\n&lt;!-- language-all: xml --&gt;\r\n\r\n      &lt;build&gt;\r\n        &lt;plugins&gt;\r\n          &lt;!-- any other plugins --&gt;\r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;phase&gt;package&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;single&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n            &lt;configuration&gt;\r\n              &lt;descriptorRefs&gt;\r\n                &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n              &lt;/descriptorRefs&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n","title":"Including dependencies in a jar with Maven","body":"<p>You can do this using the maven-assembly plugin with the \"jar-with-dependencies\" descriptor. Here's the relevant chunk from one of our pom.xml's that does this:</p>\n\n\n\n<pre class=\"lang-xml prettyprint-override\"><code>  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;!-- any other plugins --&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;single&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n        &lt;configuration&gt;\n          &lt;descriptorRefs&gt;\n            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n          &lt;/descriptorRefs&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2360404,"reputation":379,"user_id":2067197,"accept_rate":58,"display_name":"Kyle"},"score":3,"creation_date":1496800208,"post_id":1729095,"comment_id":75804108,"body_markdown":"if you don&#39;t like jar-with-dependencies as part of the file name.","body":"if you don&#39;t like jar-with-dependencies as part of the file name."},{"owner":{"account_id":6241436,"reputation":2512,"user_id":4854931,"accept_rate":33,"display_name":"Alex78191"},"score":0,"creation_date":1524225137,"post_id":1729095,"comment_id":86897821,"body_markdown":"minimize feature https://maven.apache.org/plugins/maven-shade-plugin/examples/includes-excludes.html","body":"minimize feature <a href=\"https://maven.apache.org/plugins/maven-shade-plugin/examples/includes-excludes.html\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-shade-plugin/examples/&hellip;</a>"}],"tags":[],"owner":{"account_id":50098,"reputation":32608,"user_id":149311,"accept_rate":80,"display_name":"Thomas Jung"},"comment_count":2,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1258117323,"creation_date":1258117323,"answer_id":1729095,"question_id":1729054,"body_markdown":"There&#39;s the [shade maven plugin][1]. It can be used to **package and rename** dependencies (to omit dependency problems on the classpath).\r\n\r\n\r\n  [1]: http://maven.apache.org/plugins/maven-shade-plugin/index.html","title":"Including dependencies in a jar with Maven","body":"<p>There's the <a href=\"http://maven.apache.org/plugins/maven-shade-plugin/index.html\" rel=\"noreferrer\">shade maven plugin</a>. It can be used to <strong>package and rename</strong> dependencies (to omit dependency problems on the classpath).</p>\n"},{"comments":[{"owner":{"account_id":129863,"reputation":6504,"user_id":328725,"accept_rate":66,"display_name":"posdef"},"score":0,"creation_date":1338215063,"post_id":1729202,"comment_id":14028599,"body_markdown":"I am trying exactly this, however the plugin is not run and the jar file is not created even though the build executes smoothly. Is there a common pitfall that I might have gotten stuck with?","body":"I am trying exactly this, however the plugin is not run and the jar file is not created even though the build executes smoothly. Is there a common pitfall that I might have gotten stuck with?"},{"owner":{"account_id":2793472,"reputation":177,"user_id":2403222,"display_name":"Souvik Bhattacharya"},"score":9,"creation_date":1378190854,"post_id":1729202,"comment_id":27350041,"body_markdown":"It&#39;s working for me but have a questing. after build now two jars are created one with project artifactid-version and another with artifactid-version-&quot;jar-with-dependencies&quot;. But I want only one jar to be build. Is there any other way","body":"It&#39;s working for me but have a questing. after build now two jars are created one with project artifactid-version and another with artifactid-version-&quot;jar-with-dependencies&quot;. But I want only one jar to be build. Is there any other way"},{"owner":{"account_id":3743019,"reputation":1273,"user_id":3112373,"display_name":"amucunguzi"},"score":5,"creation_date":1599143877,"post_id":1729202,"comment_id":112688418,"body_markdown":"@SouvikBhattacharya add `&lt;appendAssemblyId&gt;false&lt;/appendAssemblyId&gt;` to `maven-assembly-plugin` configutation.","body":"@SouvikBhattacharya add <code>&lt;appendAssemblyId&gt;false&lt;&#47;appendAssemblyId&gt;</code> to <code>maven-assembly-plugin</code> configutation."}],"tags":[],"owner":{"account_id":26957,"reputation":564401,"user_id":70604,"display_name":"Pascal Thivent"},"comment_count":3,"down_vote_count":1,"up_vote_count":178,"is_accepted":false,"score":177,"last_activity_date":1550498053,"creation_date":1258118945,"answer_id":1729202,"question_id":1729054,"body_markdown":"With Maven 2, the right way to do this is to use the [Maven2 Assembly Plugin][1] which has a [pre-defined descriptor file][2] for this purpose and that you could just use on the command line:\r\n\r\n    mvn assembly:assembly -DdescriptorId=jar-with-dependencies\r\n\r\nIf you want to make this jar executable, just add the main class to be run to the plugin configuration:\r\n\r\n    &lt;plugin&gt;\r\n      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n      &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n      &lt;configuration&gt;\r\n        &lt;archive&gt;\r\n          &lt;manifest&gt;\r\n            &lt;mainClass&gt;my.package.to.my.MainClass&lt;/mainClass&gt;\r\n          &lt;/manifest&gt;\r\n        &lt;/archive&gt;\r\n      &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\nIf you want to create that assembly as part of the normal build process, you should bind the [single][3] or [directory-single][4] goal (the `assembly` goal should ONLY be run from the command line) to a lifecycle phase (`package` makes sense), something like this:\r\n\r\n    &lt;plugin&gt;\r\n      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n      &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n      &lt;executions&gt;\r\n        &lt;execution&gt;\r\n          &lt;id&gt;create-my-bundle&lt;/id&gt;\r\n          &lt;phase&gt;package&lt;/phase&gt;\r\n          &lt;goals&gt;\r\n            &lt;goal&gt;single&lt;/goal&gt;\r\n          &lt;/goals&gt;\r\n          &lt;configuration&gt;\r\n            &lt;descriptorRefs&gt;\r\n              &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n            &lt;/descriptorRefs&gt;\r\n            ...\r\n          &lt;/configuration&gt;\r\n        &lt;/execution&gt;\r\n      &lt;/executions&gt;\r\n    &lt;/plugin&gt;\r\n\r\nAdapt the `configuration` element to suit your needs (for example with the manifest stuff as spoken).\r\n\r\n  [1]: http://maven.apache.org/plugins/maven-assembly-plugin/index.html\r\n  [2]: http://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html#jar-with-dependencies\r\n  [3]: http://maven.apache.org/plugins/maven-assembly-plugin/single-mojo.html\r\n  [4]: http://maven.apache.org/plugins/maven-assembly-plugin/directory-single-mojo.html","title":"Including dependencies in a jar with Maven","body":"<p>With Maven 2, the right way to do this is to use the <a href=\"http://maven.apache.org/plugins/maven-assembly-plugin/index.html\" rel=\"noreferrer\">Maven2 Assembly Plugin</a> which has a <a href=\"http://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html#jar-with-dependencies\" rel=\"noreferrer\">pre-defined descriptor file</a> for this purpose and that you could just use on the command line:</p>\n\n<pre><code>mvn assembly:assembly -DdescriptorId=jar-with-dependencies\n</code></pre>\n\n<p>If you want to make this jar executable, just add the main class to be run to the plugin configuration:</p>\n\n<pre><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n  &lt;configuration&gt;\n    &lt;archive&gt;\n      &lt;manifest&gt;\n        &lt;mainClass&gt;my.package.to.my.MainClass&lt;/mainClass&gt;\n      &lt;/manifest&gt;\n    &lt;/archive&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>If you want to create that assembly as part of the normal build process, you should bind the <a href=\"http://maven.apache.org/plugins/maven-assembly-plugin/single-mojo.html\" rel=\"noreferrer\">single</a> or <a href=\"http://maven.apache.org/plugins/maven-assembly-plugin/directory-single-mojo.html\" rel=\"noreferrer\">directory-single</a> goal (the <code>assembly</code> goal should ONLY be run from the command line) to a lifecycle phase (<code>package</code> makes sense), something like this:</p>\n\n<pre><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n  &lt;executions&gt;\n    &lt;execution&gt;\n      &lt;id&gt;create-my-bundle&lt;/id&gt;\n      &lt;phase&gt;package&lt;/phase&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;single&lt;/goal&gt;\n      &lt;/goals&gt;\n      &lt;configuration&gt;\n        &lt;descriptorRefs&gt;\n          &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n        &lt;/descriptorRefs&gt;\n        ...\n      &lt;/configuration&gt;\n    &lt;/execution&gt;\n  &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>Adapt the <code>configuration</code> element to suit your needs (for example with the manifest stuff as spoken).</p>\n"},{"comments":[{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1359431252,"post_id":1729339,"comment_id":20341098,"body_markdown":"There is also a Maven plugin for One-JAR: http://onejar-maven-plugin.googlecode.com/svn/mavensite/usage.html","body":"There is also a Maven plugin for One-JAR: <a href=\"http://onejar-maven-plugin.googlecode.com/svn/mavensite/usage.html\" rel=\"nofollow noreferrer\">onejar-maven-plugin.googlecode.com/svn/mavensite/usage.html</a>"}],"tags":[],"owner":{"account_id":72159,"reputation":9614,"user_id":208446,"accept_rate":89,"display_name":"mohdajami"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1258120600,"creation_date":1258120600,"answer_id":1729339,"question_id":1729054,"body_markdown":"Putting Maven aside, you can put JAR libraries inside the Main Jar but you will need to use your own classloader.\r\n\r\nCheck this project: One-JAR [link text][1]\r\n\r\n\r\n  [1]: http://one-jar.sourceforge.net/","title":"Including dependencies in a jar with Maven","body":"<p>Putting Maven aside, you can put JAR libraries inside the Main Jar but you will need to use your own classloader.</p>\n\n<p>Check this project: One-JAR <a href=\"http://one-jar.sourceforge.net/\" rel=\"nofollow noreferrer\">link text</a></p>\n"},{"tags":[],"owner":{"account_id":709772,"reputation":835,"user_id":1340178,"display_name":"lasantha"},"comment_count":0,"down_vote_count":3,"up_vote_count":21,"is_accepted":false,"score":18,"last_activity_date":1500997057,"creation_date":1326913825,"answer_id":8915870,"question_id":1729054,"body_markdown":"You can use the newly created jar using a `&lt;classifier&gt;` tag.\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;your.group.id&lt;/groupId&gt;\r\n            &lt;artifactId&gt;your.artifact.id&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0&lt;/version&gt;\r\n            &lt;type&gt;jar&lt;/type&gt;\r\n            &lt;classifier&gt;jar-with-dependencies&lt;/classifier&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;","title":"Including dependencies in a jar with Maven","body":"<p>You can use the newly created jar using a <code>&lt;classifier&gt;</code> tag.</p>\n\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;your.group.id&lt;/groupId&gt;\n        &lt;artifactId&gt;your.artifact.id&lt;/artifactId&gt;\n        &lt;version&gt;1.0&lt;/version&gt;\n        &lt;type&gt;jar&lt;/type&gt;\n        &lt;classifier&gt;jar-with-dependencies&lt;/classifier&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5745825,"reputation":11553,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"score":0,"creation_date":1517505443,"post_id":16591441,"comment_id":84132870,"body_markdown":"Is it the same as Eclipse &quot;Export as Runnable jar&quot;? Because with this you can choose to &quot;package all dependencies with the JAR&quot;, you then get all dependencies in project-lib folder, along your jar.","body":"Is it the same as Eclipse &quot;Export as Runnable jar&quot;? Because with this you can choose to &quot;package all dependencies with the JAR&quot;, you then get all dependencies in project-lib folder, along your jar."},{"owner":{"account_id":905874,"reputation":3369,"user_id":940794,"accept_rate":59,"display_name":"Rop"},"score":0,"creation_date":1517521750,"post_id":16591441,"comment_id":84141349,"body_markdown":"@FaithReaper -- It might be &quot;the same&quot;, I never tried that. \nBut I guess if you use Eclipse, it&#39;s not easily scriptable, which is a requirement, if you want to implement an *automated* build+deploy-pipeline. For example, let Jenkins-server do the build from your git source-repository, or similar.","body":"@FaithReaper -- It might be &quot;the same&quot;, I never tried that.  But I guess if you use Eclipse, it&#39;s not easily scriptable, which is a requirement, if you want to implement an <i>automated</i> build+deploy-pipeline. For example, let Jenkins-server do the build from your git source-repository, or similar."}],"tags":[],"owner":{"account_id":905874,"reputation":3369,"user_id":940794,"accept_rate":59,"display_name":"Rop"},"comment_count":2,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1431115835,"creation_date":1368717693,"answer_id":16591441,"question_id":1729054,"body_markdown":"If you (like me) dont particularly like the *jar-with-dependencies* approach described above,\r\nthe maven-solution I prefer is to simply build a WAR-project,\r\neven if it is only a stand-alone java application you are building:\r\n\r\n1. Make a normal maven jar-project, that will build your jar-file (without the dependencies).\r\n\r\n2. Also, setup a maven war-project (with only an empty **src/main/webapp/WEB-INF/web.xml** file, which will avoid a warning/error in the maven-build), that only has your jar-project as a dependency, and make your jar-project a `&lt;module&gt;` under your war-project. (This war-project is only a simple trick to wrap all your jar-file dependencies into a zip-file.)\r\n\r\n3. Build the war-project to produce the war-file.\r\n\r\n4. In the deployment-step, simply rename your .war-file to *.zip and unzip it.\r\n\r\nYou should now have a lib-directory (which you can move where you want it) with your jar and all the dependencies you need to run your application:\r\n\r\n    java -cp &#39;path/lib/*&#39; MainClass\r\n\r\n(The wildcard in classpath works in Java-6 or higher)\r\n\r\nI think this is both simpler to setup in maven (no need  to mess around with the assembly plugin) and also gives you a clearer view of the application-structure (you will see the version-numbers of all dependent jars in plain view, and avoid clogging everything into a single jar-file).\r\n","title":"Including dependencies in a jar with Maven","body":"<p>If you (like me) dont particularly like the <em>jar-with-dependencies</em> approach described above,\nthe maven-solution I prefer is to simply build a WAR-project,\neven if it is only a stand-alone java application you are building:</p>\n\n<ol>\n<li><p>Make a normal maven jar-project, that will build your jar-file (without the dependencies).</p></li>\n<li><p>Also, setup a maven war-project (with only an empty <strong>src/main/webapp/WEB-INF/web.xml</strong> file, which will avoid a warning/error in the maven-build), that only has your jar-project as a dependency, and make your jar-project a <code>&lt;module&gt;</code> under your war-project. (This war-project is only a simple trick to wrap all your jar-file dependencies into a zip-file.)</p></li>\n<li><p>Build the war-project to produce the war-file.</p></li>\n<li><p>In the deployment-step, simply rename your .war-file to *.zip and unzip it.</p></li>\n</ol>\n\n<p>You should now have a lib-directory (which you can move where you want it) with your jar and all the dependencies you need to run your application:</p>\n\n<pre><code>java -cp 'path/lib/*' MainClass\n</code></pre>\n\n<p>(The wildcard in classpath works in Java-6 or higher)</p>\n\n<p>I think this is both simpler to setup in maven (no need  to mess around with the assembly plugin) and also gives you a clearer view of the application-structure (you will see the version-numbers of all dependent jars in plain view, and avoid clogging everything into a single jar-file).</p>\n"},{"tags":[],"owner":{"account_id":2325310,"reputation":384,"user_id":2039966,"display_name":"Francois Gergaud"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1415470735,"creation_date":1415470735,"answer_id":26820468,"question_id":1729054,"body_markdown":"This post may be a bit old, but I also had the same problem recently. The first solution proposed by John Stauffer is a good one, but I had some problems as I am working this spring. The spring&#39;s dependency-jars I use have some property files and xml-schemas declaration which share the same paths and names. Although these jars come from the same versions, the *jar-with-dependencies* maven-goal was overwriting theses file with the last file found. \r\n\r\nIn the end, the application was not able to start as the spring jars could not find the correct properties files. In this case the solution propose by Rop have solved my problem.\r\n\r\nAlso since then, the spring-boot project now exist. It has a very cool way to manage this problem by providing a maven goal which overload the package goal and provide its own class loader. See [spring-boots Reference Guide][1]\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#getting-started-first-application-executable-jar","title":"Including dependencies in a jar with Maven","body":"<p>This post may be a bit old, but I also had the same problem recently. The first solution proposed by John Stauffer is a good one, but I had some problems as I am working this spring. The spring's dependency-jars I use have some property files and xml-schemas declaration which share the same paths and names. Although these jars come from the same versions, the <em>jar-with-dependencies</em> maven-goal was overwriting theses file with the last file found. </p>\n\n<p>In the end, the application was not able to start as the spring jars could not find the correct properties files. In this case the solution propose by Rop have solved my problem.</p>\n\n<p>Also since then, the spring-boot project now exist. It has a very cool way to manage this problem by providing a maven goal which overload the package goal and provide its own class loader. See <a href=\"http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#getting-started-first-application-executable-jar\" rel=\"nofollow\">spring-boots Reference Guide</a></p>\n"},{"comments":[{"owner":{"account_id":4086960,"reputation":909,"user_id":3356028,"display_name":"vitro"},"score":2,"creation_date":1564271196,"post_id":32316071,"comment_id":100975934,"body_markdown":"Not quite true regarding services, shade plugin has transformers and one of them is for concatenating contents of files under the `META-INF/services` directory. More info here: https://maven.apache.org/plugins/maven-shade-plugin/examples/resource-transformers.html","body":"Not quite true regarding services, shade plugin has transformers and one of them is for concatenating contents of files under the <code>META-INF&#47;services</code> directory. More info here: <a href=\"https://maven.apache.org/plugins/maven-shade-plugin/examples/resource-transformers.html\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-shade-plugin/examples/&hellip;</a>"},{"owner":{"account_id":15611,"reputation":14858,"user_id":33165,"accept_rate":80,"display_name":"tcurdt"},"score":0,"creation_date":1599589336,"post_id":32316071,"comment_id":112818166,"body_markdown":"It basically encapsulates the artifact in its own namespace. I cannot think of any scenario where this still allows for clashes.","body":"It basically encapsulates the artifact in its own namespace. I cannot think of any scenario where this still allows for clashes."}],"tags":[],"owner":{"account_id":2456349,"reputation":1752,"user_id":2141469,"display_name":"Andr&#233; Willik Valenti"},"comment_count":2,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1475883704,"creation_date":1441039599,"answer_id":32316071,"question_id":1729054,"body_markdown":"http://fiji.sc/Uber-JAR provides an excellent explanation of the alternatives: \r\n\r\n&gt; There are three common methods for constructing an uber-JAR:\r\n&gt; \r\n&gt; 1. Unshaded. Unpack all JAR files, then repack them into a single JAR.\r\n* Pro: Works with Java&#39;s default class loader.\r\n* Con: Files present in multiple JAR files with the same path (e.g.,\r\n&gt; META-INF/services/javax.script.ScriptEngineFactory) will overwrite one\r\n&gt; another, resulting in faulty behavior.\r\n* Tools: Maven Assembly\r\n&gt; Plugin, Classworlds Uberjar\r\n&gt; 1. Shaded. Same as unshaded, but rename (i.e., &quot;shade&quot;) all packages of all dependencies.\r\n* Pro: Works with Java&#39;s default class loader.\r\n&gt; Avoids some (not all) dependency version clashes.\r\n* Con: Files\r\n&gt; present in multiple JAR files with the same path (e.g.,\r\n&gt; META-INF/services/javax.script.ScriptEngineFactory) will overwrite one\r\n&gt; another, resulting in faulty behavior.\r\n* Tools: Maven Shade Plugin\r\n&gt; 1. JAR of JARs. The final JAR file contains the other JAR files embedded within.\r\n* Pro: Avoids dependency version clashes. All\r\n&gt; resource files are preserved.\r\n* Con: Needs to bundle a special\r\n&gt; &quot;bootstrap&quot; classloader to enable Java to load classes from the\r\n&gt; wrapped JAR files. Debugging class loader issues becomes more complex.\r\n&gt; * Tools: Eclipse JAR File Exporter, One-JAR.","title":"Including dependencies in a jar with Maven","body":"<p><a href=\"http://fiji.sc/Uber-JAR\" rel=\"noreferrer\">http://fiji.sc/Uber-JAR</a> provides an excellent explanation of the alternatives: </p>\n\n<blockquote>\n  <p>There are three common methods for constructing an uber-JAR:</p>\n  \n  <ol>\n  <li>Unshaded. Unpack all JAR files, then repack them into a single JAR.\n  \n  <ul>\n  <li>Pro: Works with Java's default class loader.</li>\n  <li>Con: Files present in multiple JAR files with the same path (e.g.,\n  META-INF/services/javax.script.ScriptEngineFactory) will overwrite one\n  another, resulting in faulty behavior.</li>\n  <li>Tools: Maven Assembly\n  Plugin, Classworlds Uberjar</li>\n  </ul></li>\n  <li>Shaded. Same as unshaded, but rename (i.e., \"shade\") all packages of all dependencies.\n  \n  <ul>\n  <li>Pro: Works with Java's default class loader.\n  Avoids some (not all) dependency version clashes.</li>\n  <li>Con: Files\n  present in multiple JAR files with the same path (e.g.,\n  META-INF/services/javax.script.ScriptEngineFactory) will overwrite one\n  another, resulting in faulty behavior.</li>\n  <li>Tools: Maven Shade Plugin</li>\n  </ul></li>\n  <li>JAR of JARs. The final JAR file contains the other JAR files embedded within.\n  \n  <ul>\n  <li>Pro: Avoids dependency version clashes. All\n  resource files are preserved.</li>\n  <li>Con: Needs to bundle a special\n  \"bootstrap\" classloader to enable Java to load classes from the\n  wrapped JAR files. Debugging class loader issues becomes more complex.</li>\n  <li>Tools: Eclipse JAR File Exporter, One-JAR.</li>\n  </ul></li>\n  </ol>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":6934811,"reputation":71,"user_id":5323129,"display_name":"Glaucio Southier"},"score":0,"creation_date":1441922642,"post_id":32512343,"comment_id":52883680,"body_markdown":"the maven-dependency-plugin &lt;outputDirectory&gt; dont work, always write on &quot;dependency&quot; folder","body":"the maven-dependency-plugin &lt;outputDirectory&gt; dont work, always write on &quot;dependency&quot; folder"},{"owner":{"account_id":6934811,"reputation":71,"user_id":5323129,"display_name":"Glaucio Southier"},"score":0,"creation_date":1441922996,"post_id":32512343,"comment_id":52883804,"body_markdown":"create a jar with a internal folder &quot;dependency&quot;  containing project dependencies and put it on MANIFEST.MF","body":"create a jar with a internal folder &quot;dependency&quot;  containing project dependencies and put it on MANIFEST.MF"},{"owner":{"account_id":6934811,"reputation":71,"user_id":5323129,"display_name":"Glaucio Southier"},"score":0,"creation_date":1446046832,"post_id":32512343,"comment_id":54582056,"body_markdown":"&lt;resources&gt;\n\t\t\t&lt;resource&gt;\n\t\t\t\t&lt;directory&gt;src/main/java&lt;/directory&gt;\n\t\t\t\t&lt;includes&gt;\n\t\t\t\t\t&lt;include&gt;**/*.java&lt;/include&gt;\n\t\t\t\t\t&lt;include&gt;**/*.properties&lt;/include&gt;\n\t\t\t\t&lt;/includes&gt;\n\t\t\t&lt;/resource&gt;\n\t\t\t&lt;resource&gt;\n\t\t\t\t&lt;directory&gt;src/main/resources&lt;/directory&gt;\n\t\t\t\t&lt;filtering&gt;true&lt;/filtering&gt;\n\t\t\t\t&lt;includes&gt;\n\t\t\t\t\t&lt;include&gt;**/*&lt;/include&gt;\n\t\t\t\t&lt;/includes&gt;\n\t\t\t\t&lt;targetPath&gt;META-INF/&lt;/targetPath&gt;\n\t\t\t&lt;/resource&gt;\n\t\t\t&lt;resource&gt;\n\t\t\t\t&lt;directory&gt;${project.build.directory}/dependency/&lt;/directory&gt;\n\t\t\t\t&lt;includes&gt;\n\t\t\t\t\t&lt;include&gt;*.jar&lt;/include&gt;\n\t\t\t\t&lt;/includes&gt;\n\t\t\t\t&lt;targetPath&gt;lib/&lt;/targetPath&gt;\n\t\t\t&lt;/resource&gt;\n\t\t&lt;/resources&gt;","body":"&lt;resources&gt; \t\t\t&lt;resource&gt; \t\t\t\t&lt;directory&gt;src/main/java&lt;/directory&gt; \t\t\t\t&lt;includes&gt; \t\t\t\t\t&lt;include&gt;**/*.java&lt;/include&gt; \t\t\t\t\t&lt;include&gt;**/*.properties&lt;/include&gt; \t\t\t\t&lt;/includes&gt; \t\t\t&lt;/resource&gt; \t\t\t&lt;resource&gt; \t\t\t\t&lt;directory&gt;src/main/resources&lt;/directory&gt; \t\t\t\t&lt;filtering&gt;true&lt;/filtering&gt; \t\t\t\t&lt;includes&gt; \t\t\t\t\t&lt;include&gt;**/*&lt;/include&gt; \t\t\t\t&lt;/includes&gt; \t\t\t\t&lt;targetPath&gt;META-INF/&lt;/targetPath&gt; \t\t\t&lt;/resource&gt; \t\t\t&lt;resource&gt; \t\t\t\t&lt;directory&gt;${project.build.directory}/dependency/&lt;/direc&zwnj;&#8203;tory&gt; \t\t\t\t&lt;includes&gt; \t\t\t\t\t&lt;include&gt;*.jar&lt;/include&gt; \t\t\t\t&lt;/includes&gt; \t\t\t\t&lt;targetPath&gt;lib/&lt;/targetPath&gt; \t\t\t&lt;/resource&gt; \t\t&lt;/resources&gt;"},{"owner":{"account_id":35074,"reputation":8877,"user_id":99248,"accept_rate":38,"display_name":"raisercostin"},"score":1,"creation_date":1471563746,"post_id":32512343,"comment_id":65408770,"body_markdown":"Based on this answer I created this project. You shouldn&#39;t need to change anything except the pom file: https://github.com/raisercostin/jarinjarloader","body":"Based on this answer I created this project. You shouldn&#39;t need to change anything except the pom file: <a href=\"https://github.com/raisercostin/jarinjarloader\" rel=\"nofollow noreferrer\">github.com/raisercostin/jarinjarloader</a>"}],"tags":[],"owner":{"account_id":6934811,"reputation":71,"user_id":5323129,"display_name":"Glaucio Southier"},"comment_count":4,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1446048099,"creation_date":1441922512,"answer_id":32512343,"question_id":1729054,"body_markdown":"My definitive solution on Eclipse Luna and m2eclipse:\r\nCustom Classloader (download and add to your project, 5 classes only)\r\n:http://git.eclipse.org/c/jdt/eclipse.jdt.ui.git/plain/org.eclipse.jdt.ui/jar%20in%20jar%20loader/org/eclipse/jdt/internal/jarinjarloader/;\r\nthis classloader is very best of one-jar classloader and very fast;\r\n\r\n`&lt;project.mainClass&gt;org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader&lt;/project.mainClass&gt;\r\n&lt;project.realMainClass&gt;my.Class&lt;/project.realMainClass&gt;`\r\n\r\nEdit in JIJConstants &quot;Rsrc-Class-Path&quot; to &quot;Class-Path&quot;&lt;br/&gt;\r\n    mvn clean dependency:copy-dependencies package &lt;br/&gt;\r\nis created a jar with dependencies in lib folder with a thin classloader \r\n\r\n    &lt;build&gt;\r\n\t\t&lt;resources&gt;\r\n\t\t\t&lt;resource&gt;\r\n\t\t\t\t&lt;directory&gt;src/main/java&lt;/directory&gt;\r\n\t\t\t\t&lt;includes&gt;\r\n\t\t\t\t\t&lt;include&gt;**/*.java&lt;/include&gt;\r\n\t\t\t\t\t&lt;include&gt;**/*.properties&lt;/include&gt;\r\n\t\t\t\t&lt;/includes&gt;\r\n\t\t\t&lt;/resource&gt;\r\n\t\t\t&lt;resource&gt;\r\n\t\t\t\t&lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n\t\t\t\t&lt;filtering&gt;true&lt;/filtering&gt;\r\n\t\t\t\t&lt;includes&gt;\r\n\t\t\t\t\t&lt;include&gt;**/*&lt;/include&gt;\r\n\t\t\t\t&lt;/includes&gt;\r\n\t\t\t\t&lt;targetPath&gt;META-INF/&lt;/targetPath&gt;\r\n\t\t\t&lt;/resource&gt;\r\n\t\t\t&lt;resource&gt;\r\n\t\t\t\t&lt;directory&gt;${project.build.directory}/dependency/&lt;/directory&gt;\r\n\t\t\t\t&lt;includes&gt;\r\n\t\t\t\t\t&lt;include&gt;*.jar&lt;/include&gt;\r\n\t\t\t\t&lt;/includes&gt;\r\n\t\t\t\t&lt;targetPath&gt;lib/&lt;/targetPath&gt;\r\n\t\t\t&lt;/resource&gt;\r\n\t\t&lt;/resources&gt;\r\n    &lt;pluginManagement&gt;\r\n\t\t\t&lt;plugins&gt;\r\n\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t&lt;archive&gt;\r\n\t\t\t\t\t\t\t&lt;manifest&gt;\r\n\t\t\t\t\t\t\t\t&lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n\t\t\t\t\t\t\t\t&lt;mainClass&gt;${project.mainClass}&lt;/mainClass&gt;\r\n\t\t\t\t\t\t\t\t&lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\r\n\t\t\t\t\t\t\t&lt;/manifest&gt;\r\n\r\n\t\t\t\t\t\t\t&lt;manifestEntries&gt;\r\n\t\t\t\t\t\t\t\t&lt;Rsrc-Main-Class&gt;${project.realMainClass}  &lt;/Rsrc-Main-Class&gt;\r\n\t\t\t\t\t\t\t\t&lt;Class-Path&gt;./&lt;/Class-Path&gt;\r\n\t\t\t\t\t\t\t&lt;/manifestEntries&gt;\r\n\r\n\t\t\t\t\t\t&lt;/archive&gt;\r\n\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n    &lt;plugin&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t\t&lt;id&gt;copy-dependencies&lt;/id&gt;\r\n\t\t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n\t\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t\t&lt;goal&gt;copy-dependencies&lt;/goal&gt;\r\n\t\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t\t&lt;/executions&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;/plugins&gt;\r\n\t\t&lt;/pluginManagement&gt;\r\n\t&lt;/build&gt;\r\n\r\n","title":"Including dependencies in a jar with Maven","body":"<p>My definitive solution on Eclipse Luna and m2eclipse:\nCustom Classloader (download and add to your project, 5 classes only)\n:<a href=\"http://git.eclipse.org/c/jdt/eclipse.jdt.ui.git/plain/org.eclipse.jdt.ui/jar%20in%20jar%20loader/org/eclipse/jdt/internal/jarinjarloader/\" rel=\"nofollow\">http://git.eclipse.org/c/jdt/eclipse.jdt.ui.git/plain/org.eclipse.jdt.ui/jar%20in%20jar%20loader/org/eclipse/jdt/internal/jarinjarloader/</a>;\nthis classloader is very best of one-jar classloader and very fast;</p>\n\n<p><code>&lt;project.mainClass&gt;org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader&lt;/project.mainClass&gt;\n&lt;project.realMainClass&gt;my.Class&lt;/project.realMainClass&gt;</code></p>\n\n<p>Edit in JIJConstants \"Rsrc-Class-Path\" to \"Class-Path\"<br/>\n    mvn clean dependency:copy-dependencies package <br/>\nis created a jar with dependencies in lib folder with a thin classloader </p>\n\n<pre><code>&lt;build&gt;\n    &lt;resources&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;src/main/java&lt;/directory&gt;\n            &lt;includes&gt;\n                &lt;include&gt;**/*.java&lt;/include&gt;\n                &lt;include&gt;**/*.properties&lt;/include&gt;\n            &lt;/includes&gt;\n        &lt;/resource&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;src/main/resources&lt;/directory&gt;\n            &lt;filtering&gt;true&lt;/filtering&gt;\n            &lt;includes&gt;\n                &lt;include&gt;**/*&lt;/include&gt;\n            &lt;/includes&gt;\n            &lt;targetPath&gt;META-INF/&lt;/targetPath&gt;\n        &lt;/resource&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;${project.build.directory}/dependency/&lt;/directory&gt;\n            &lt;includes&gt;\n                &lt;include&gt;*.jar&lt;/include&gt;\n            &lt;/includes&gt;\n            &lt;targetPath&gt;lib/&lt;/targetPath&gt;\n        &lt;/resource&gt;\n    &lt;/resources&gt;\n&lt;pluginManagement&gt;\n        &lt;plugins&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                            &lt;mainClass&gt;${project.mainClass}&lt;/mainClass&gt;\n                            &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\n                        &lt;/manifest&gt;\n\n                        &lt;manifestEntries&gt;\n                            &lt;Rsrc-Main-Class&gt;${project.realMainClass}  &lt;/Rsrc-Main-Class&gt;\n                            &lt;Class-Path&gt;./&lt;/Class-Path&gt;\n                        &lt;/manifestEntries&gt;\n\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n&lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;copy-dependencies&lt;/id&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n&lt;/build&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2136376,"reputation":351,"user_id":1896066,"display_name":"millebi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1466196617,"creation_date":1466196617,"answer_id":37890200,"question_id":1729054,"body_markdown":"[Have a look at this answer:][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/8293741/download-war-from-snapshot-repository-and-deploy-to-local-jboss-using-mvn\r\n\r\nI am creating an installer that runs as a Java JAR file and it needs to unpack WAR and JAR files into appropriate places in the installation directory. The dependency plugin can be used in the package phase with the copy goal and it will download any file in the Maven repository (including WAR files) and write them where ever you need them. I changed the output directory to ${project.build.directory}/classes and then end result is that the normal JAR task includes my files just fine. I can then extract them and write them into the installation directory.\r\n\r\n    &lt;plugin&gt;\r\n\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n\t&lt;executions&gt;\r\n\t\t&lt;execution&gt;\r\n\t\t\t&lt;id&gt;getWar&lt;/id&gt;\r\n\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n\t\t\t&lt;goals&gt;\r\n\t\t\t\t&lt;goal&gt;copy&lt;/goal&gt;\r\n\t\t\t&lt;/goals&gt;\r\n\t\t\t&lt;configuration&gt;\r\n\t\t\t\t&lt;artifactItems&gt;\r\n\t\t\t\t\t&lt;artifactItem&gt;\r\n\t\t\t\t\t\t&lt;groupId&gt;the.group.I.use&lt;/groupId&gt;\r\n\t\t\t\t\t\t&lt;artifactId&gt;MyServerServer&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;version&gt;${env.JAVA_SERVER_REL_VER}&lt;/version&gt;\r\n\t\t\t\t\t\t&lt;type&gt;war&lt;/type&gt;\r\n\t\t\t\t\t\t&lt;destFileName&gt;myWar.war&lt;/destFileName&gt;\r\n\t\t\t\t\t&lt;/artifactItem&gt;\r\n\t\t\t\t&lt;/artifactItems&gt;\r\n\t\t\t\t&lt;outputDirectory&gt;${project.build.directory}/classes&lt;/outputDirectory&gt;\r\n\t\t\t&lt;/configuration&gt;\r\n\t\t&lt;/execution&gt;\r\n\t&lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n","title":"Including dependencies in a jar with Maven","body":"<p><a href=\"https://stackoverflow.com/questions/8293741/download-war-from-snapshot-repository-and-deploy-to-local-jboss-using-mvn\">Have a look at this answer:</a></p>\n\n<p>I am creating an installer that runs as a Java JAR file and it needs to unpack WAR and JAR files into appropriate places in the installation directory. The dependency plugin can be used in the package phase with the copy goal and it will download any file in the Maven repository (including WAR files) and write them where ever you need them. I changed the output directory to ${project.build.directory}/classes and then end result is that the normal JAR task includes my files just fine. I can then extract them and write them into the installation directory.</p>\n\n<pre><code>&lt;plugin&gt;\n&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n&lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n&lt;executions&gt;\n    &lt;execution&gt;\n        &lt;id&gt;getWar&lt;/id&gt;\n        &lt;phase&gt;package&lt;/phase&gt;\n        &lt;goals&gt;\n            &lt;goal&gt;copy&lt;/goal&gt;\n        &lt;/goals&gt;\n        &lt;configuration&gt;\n            &lt;artifactItems&gt;\n                &lt;artifactItem&gt;\n                    &lt;groupId&gt;the.group.I.use&lt;/groupId&gt;\n                    &lt;artifactId&gt;MyServerServer&lt;/artifactId&gt;\n                    &lt;version&gt;${env.JAVA_SERVER_REL_VER}&lt;/version&gt;\n                    &lt;type&gt;war&lt;/type&gt;\n                    &lt;destFileName&gt;myWar.war&lt;/destFileName&gt;\n                &lt;/artifactItem&gt;\n            &lt;/artifactItems&gt;\n            &lt;outputDirectory&gt;${project.build.directory}/classes&lt;/outputDirectory&gt;\n        &lt;/configuration&gt;\n    &lt;/execution&gt;\n&lt;/executions&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":[],"owner":{"account_id":2938635,"reputation":1870,"user_id":2517035,"display_name":"Rajeev Rathor"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1476696969,"creation_date":1476695842,"answer_id":40082562,"question_id":1729054,"body_markdown":"Thanks\r\nI have added below snippet in POM.xml file and Mp problem resolved and \r\ncreate fat jar file that include all dependent jars.\r\n    \r\n    &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n    \t    &lt;executions&gt;\r\n    \t\t    &lt;execution&gt;\r\n    \t\t\t    &lt;phase&gt;package&lt;/phase&gt;\r\n    \t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t    &lt;goal&gt;single&lt;/goal&gt;\r\n    \t\t        &lt;/goals&gt;\r\n    \t\t    &lt;/execution&gt;\r\n    \t\t&lt;/executions&gt;\r\n    \t    &lt;configuration&gt;\r\n    \t\t    &lt;descriptorRefs&gt;\r\n    \t\t\t    &lt;descriptorRef&gt;dependencies&lt;/descriptorRef&gt;\r\n    \t\t\t&lt;/descriptorRefs&gt;\r\n    \t\t&lt;/configuration&gt;\r\n    \t&lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n\r\n","title":"Including dependencies in a jar with Maven","body":"<p>Thanks\nI have added below snippet in POM.xml file and Mp problem resolved and \ncreate fat jar file that include all dependent jars.</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n        &lt;executions&gt;\n            &lt;execution&gt;\n                &lt;phase&gt;package&lt;/phase&gt;\n                &lt;goals&gt;\n                    &lt;goal&gt;single&lt;/goal&gt;\n                &lt;/goals&gt;\n            &lt;/execution&gt;\n        &lt;/executions&gt;\n        &lt;configuration&gt;\n            &lt;descriptorRefs&gt;\n                &lt;descriptorRef&gt;dependencies&lt;/descriptorRef&gt;\n            &lt;/descriptorRefs&gt;\n        &lt;/configuration&gt;\n    &lt;/plugin&gt;\n&lt;/plugins&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3868910,"reputation":4935,"user_id":3204706,"accept_rate":53,"display_name":"Tina J"},"score":3,"creation_date":1546623862,"post_id":41383973,"comment_id":94922897,"body_markdown":"Why is the name of jar appended by &quot;jar-with-dependencies&quot;?! Any workarounds?","body":"Why is the name of jar appended by &quot;jar-with-dependencies&quot;?! Any workarounds?"},{"owner":{"account_id":3356749,"reputation":472,"user_id":2819501,"display_name":"ccu"},"score":11,"creation_date":1575216709,"post_id":41383973,"comment_id":104483012,"body_markdown":"@Tina J you can add `&lt;appendAssemblyId&gt;false&lt;/appendAssemblyId&gt;` inside the `&lt;configuration&gt;` tag to exclude the &quot;-jar-with-dependencies&quot; suffix in the final name.","body":"@Tina J you can add <code>&lt;appendAssemblyId&gt;false&lt;&#47;appendAssemblyId&gt;</code> inside the <code>&lt;configuration&gt;</code> tag to exclude the &quot;-jar-with-dependencies&quot; suffix in the final name."}],"tags":[],"owner":{"account_id":5631987,"reputation":2078,"user_id":4458667,"accept_rate":88,"display_name":"abdiel"},"comment_count":2,"down_vote_count":0,"up_vote_count":57,"is_accepted":false,"score":57,"last_activity_date":1483031893,"creation_date":1483030503,"answer_id":41383973,"question_id":1729054,"body_markdown":"If you want to do an executable jar file, them need set the main class too. So the full configuration should be.\r\n\r\n    \r\n\r\n        &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                     &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n                     &lt;executions&gt;\r\n                         &lt;execution&gt;\r\n                              &lt;phase&gt;package&lt;/phase&gt;\r\n                              &lt;goals&gt;\r\n                                  &lt;goal&gt;single&lt;/goal&gt;\r\n                              &lt;/goals&gt;\r\n                          &lt;/execution&gt;\r\n                      &lt;/executions&gt;\r\n                      &lt;configuration&gt;\r\n                           &lt;!-- ... --&gt;\r\n                           &lt;archive&gt;\r\n                               &lt;manifest&gt;\r\n                                     &lt;mainClass&gt;fully.qualified.MainClass&lt;/mainClass&gt;\r\n                               &lt;/manifest&gt;\r\n                           &lt;/archive&gt;\r\n                           &lt;descriptorRefs&gt;\r\n                               &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n                          &lt;/descriptorRefs&gt;\r\n                     &lt;/configuration&gt;\r\n             &lt;/plugin&gt;\r\n       &lt;/plugins&gt;","title":"Including dependencies in a jar with Maven","body":"<p>If you want to do an executable jar file, them need set the main class too. So the full configuration should be.</p>\n\n<pre><code>    &lt;plugins&gt;\n            &lt;plugin&gt;\n                 &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n                 &lt;executions&gt;\n                     &lt;execution&gt;\n                          &lt;phase&gt;package&lt;/phase&gt;\n                          &lt;goals&gt;\n                              &lt;goal&gt;single&lt;/goal&gt;\n                          &lt;/goals&gt;\n                      &lt;/execution&gt;\n                  &lt;/executions&gt;\n                  &lt;configuration&gt;\n                       &lt;!-- ... --&gt;\n                       &lt;archive&gt;\n                           &lt;manifest&gt;\n                                 &lt;mainClass&gt;fully.qualified.MainClass&lt;/mainClass&gt;\n                           &lt;/manifest&gt;\n                       &lt;/archive&gt;\n                       &lt;descriptorRefs&gt;\n                           &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                      &lt;/descriptorRefs&gt;\n                 &lt;/configuration&gt;\n         &lt;/plugin&gt;\n   &lt;/plugins&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6645879,"reputation":1048,"user_id":5130011,"accept_rate":100,"display_name":"Kalesh Kaladharan"},"score":0,"creation_date":1634916536,"post_id":49398943,"comment_id":123163977,"body_markdown":"The first option is the best for faster rebuilds. `assembly-plugin` just takes too much time packaging dependencies, which is expected.","body":"The first option is the best for faster rebuilds. <code>assembly-plugin</code> just takes too much time packaging dependencies, which is expected."},{"owner":{"display_name":"user4538583"},"score":0,"creation_date":1639406883,"post_id":49398943,"comment_id":124333875,"body_markdown":"I tried the first approach here. In the documentation, it states &quot;&quot;Note: The Class-Path header points to classes or JAR files on the local network, not JAR files within the JAR file or classes accessible over Internet protocols. To load classes in JAR files within a JAR file into the class path, you must write custom code to load those classes.&quot; In your Method 1, are you referring people to writing custom jar loaders?","body":"I tried the first approach here. In the documentation, it states &quot;&quot;Note: The Class-Path header points to classes or JAR files on the local network, not JAR files within the JAR file or classes accessible over Internet protocols. To load classes in JAR files within a JAR file into the class path, you must write custom code to load those classes.&quot; In your Method 1, are you referring people to writing custom jar loaders?"},{"owner":{"display_name":"user4538583"},"score":0,"creation_date":1639406932,"post_id":49398943,"comment_id":124333898,"body_markdown":"I noticed there was a difference in the copying and unpacking in comparison to the assembly. I kept getting &quot;ClassNotFoundException&quot; when trying to run my jar file for my server. How do you recommend proceeding if using your method 1? I couldn&#39;t get mine to work.","body":"I noticed there was a difference in the copying and unpacking in comparison to the assembly. I kept getting &quot;ClassNotFoundException&quot; when trying to run my jar file for my server. How do you recommend proceeding if using your method 1? I couldn&#39;t get mine to work."},{"owner":{"account_id":3915840,"reputation":570,"user_id":3239668,"accept_rate":58,"display_name":"Tianbing Leng"},"score":0,"creation_date":1651019959,"post_id":49398943,"comment_id":127260893,"body_markdown":"Option 2 works for me, thanks!","body":"Option 2 works for me, thanks!"},{"owner":{"account_id":2690516,"reputation":105,"user_id":2323972,"display_name":"Mic"},"score":1,"creation_date":1656947394,"post_id":49398943,"comment_id":128688878,"body_markdown":"For option 1 (If you don&#39;t want to copy JUnit dependencies to target folder) you must add &lt;includeScope&gt;compile&lt;/includeScope&gt; to the maven-dependency-plugin &lt;configuration&gt;","body":"For option 1 (If you don&#39;t want to copy JUnit dependencies to target folder) you must add &lt;includeScope&gt;compile&lt;/includeScope&gt; to the maven-dependency-plugin &lt;configuration&gt;"}],"tags":[],"owner":{"account_id":13190028,"reputation":241,"user_id":9526595,"display_name":"Leslie Li"},"comment_count":5,"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1666829542,"creation_date":1521610785,"answer_id":49398943,"question_id":1729054,"body_markdown":"Method 1: Copy the dependencies&#39; JAR files into `target/lib` and then add them to the JAR&#39;s classpath in MANIFEST:\r\n\r\n\r\n\t\t\t&lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;outputDirectory&gt;${project.build.directory}/lib&lt;/outputDirectory&gt;\r\n                    &lt;excludeTransitive&gt;false&lt;/excludeTransitive&gt; \r\n                    &lt;stripVersion&gt;false&lt;/stripVersion&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;copy-dependencies&lt;/id&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;copy-dependencies&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;!-- Add LIB folder to classPath --&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.4&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;archive&gt;\r\n                        &lt;manifest&gt;\r\n                            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n                            &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\r\n                        &lt;/manifest&gt;\r\n                    &lt;/archive&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n\r\n\r\nMethod 2: Unpack all dependencies and repack their classes and resources into one flat JAR. Note: The overlapping resources will be randomly lost!\r\n\r\n    &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n        &lt;executions&gt;\r\n            &lt;execution&gt;\r\n                &lt;phase&gt;package&lt;/phase&gt;\r\n                &lt;goals&gt;&lt;goal&gt;single&lt;/goal&gt;&lt;/goals&gt;\r\n            &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n        &lt;configuration&gt;\r\n            &lt;descriptorRefs&gt;\r\n                &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n            &lt;/descriptorRefs&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/plugin&gt;","title":"Including dependencies in a jar with Maven","body":"<p>Method 1: Copy the dependencies' JAR files into <code>target/lib</code> and then add them to the JAR's classpath in MANIFEST:</p>\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;outputDirectory&gt;${project.build.directory}/lib&lt;/outputDirectory&gt;\n                &lt;excludeTransitive&gt;false&lt;/excludeTransitive&gt; \n                &lt;stripVersion&gt;false&lt;/stripVersion&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;copy-dependencies&lt;/id&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n        &lt;!-- Add LIB folder to classPath --&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.4&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;archive&gt;\n                    &lt;manifest&gt;\n                        &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                        &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\n                    &lt;/manifest&gt;\n                &lt;/archive&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p>Method 2: Unpack all dependencies and repack their classes and resources into one flat JAR. Note: The overlapping resources will be randomly lost!</p>\n<pre><code>&lt;plugin&gt;\n    &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;&lt;goal&gt;single&lt;/goal&gt;&lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n    &lt;configuration&gt;\n        &lt;descriptorRefs&gt;\n            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n        &lt;/descriptorRefs&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":16427407,"reputation":164,"user_id":11867095,"display_name":"Harihara_K"},"score":0,"creation_date":1624534562,"post_id":66114712,"comment_id":120388418,"body_markdown":"Please describe, how it exactly solves the problem","body":"Please describe, how it exactly solves the problem"},{"owner":{"account_id":1356587,"reputation":6293,"user_id":1294870,"accept_rate":36,"display_name":"NIrav Modi"},"score":0,"creation_date":1624603316,"post_id":66114712,"comment_id":120408141,"body_markdown":"I have added only this plugin","body":"I have added only this plugin"},{"owner":{"account_id":49078,"reputation":44646,"user_id":145989,"accept_rate":59,"display_name":"Ondra Žižka"},"score":0,"creation_date":1666830270,"post_id":66114712,"comment_id":131030994,"body_markdown":"This is for something else: A Spring Boot specific solution, and needs  Spring Boot to understand the resulting archive. See https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/#packaging.layers","body":"This is for something else: A Spring Boot specific solution, and needs  Spring Boot to understand the resulting archive. See <a href=\"https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/#packaging.layers\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/maven-plugin/referen&zwnj;&#8203;ce/&hellip;</a>"}],"tags":[],"owner":{"account_id":1356587,"reputation":6293,"user_id":1294870,"accept_rate":36,"display_name":"NIrav Modi"},"comment_count":3,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1612856050,"creation_date":1612856050,"answer_id":66114712,"question_id":1729054,"body_markdown":"To make it more simple, You can use the below plugin.\r\n\r\n                 &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;repackage&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;classifier&gt;spring-boot&lt;/classifier&gt;\r\n                                &lt;mainClass&gt;\r\n                                    com.nirav.certificate.CertificateUtility\r\n                                &lt;/mainClass&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;","title":"Including dependencies in a jar with Maven","body":"<p>To make it more simple, You can use the below plugin.</p>\n<pre><code>             &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;repackage&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;classifier&gt;spring-boot&lt;/classifier&gt;\n                            &lt;mainClass&gt;\n                                com.nirav.certificate.CertificateUtility\n                            &lt;/mainClass&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11935386,"reputation":1283,"user_id":8734046,"display_name":"jwpol"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1615390943,"creation_date":1615390943,"answer_id":66568110,"question_id":1729054,"body_markdown":"I was trying to do sth similar, but I didn&#39;t want all jars to be included. I wanted to include some specific directories from the given dependency. In addition classifier tag was already occupied, so I couldn&#39;t do:\r\n```\r\n&lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;your.group.id&lt;/groupId&gt;\r\n        &lt;artifactId&gt;your.artifact.id&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0&lt;/version&gt;\r\n        &lt;type&gt;jar&lt;/type&gt;\r\n        &lt;classifier&gt;jar-with-dependencies&lt;/classifier&gt;\r\n    &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```\r\n\r\n 1. I used maven-dependency-plugin and unpack goal\r\n 2. And unpacked what I wanted to the ```${project.build.directory}/classes```, otherwise it will be omitted\r\n 3. Because it was in the classes directory, maven finally placed it in the jar\r\n\r\n```\r\n&lt;plugin&gt;\r\n\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n\t&lt;executions&gt;\r\n\t\t&lt;execution&gt;\r\n\t\t\t&lt;id&gt;unpack&lt;/id&gt;\r\n\t\t\t&lt;phase&gt;prepare-package&lt;/phase&gt;\r\n\t\t\t&lt;goals&gt;\r\n\t\t\t\t&lt;goal&gt;unpack&lt;/goal&gt;\r\n\t\t\t&lt;/goals&gt;\r\n\t\t\t&lt;configuration&gt;\r\n\t\t\t\t&lt;artifactItems&gt;\r\n\t\t\t\t\t&lt;artifactItem&gt;\r\n\t\t\t\t\t\t&lt;groupId&gt;my.group&lt;/groupId&gt;\r\n\t\t\t\t\t\t&lt;artifactId&gt;my.artifact&lt;/artifactId&gt;\r\n                        &lt;classifier&gt;occupied&lt;/classifier&gt;\r\n\t\t\t\t\t\t&lt;version&gt;1.0&lt;/version&gt;\r\n\t\t\t\t\t\t&lt;type&gt;jar&lt;/type&gt;\r\n\t\t\t\t\t&lt;/artifactItem&gt;\r\n\t\t\t\t&lt;/artifactItems&gt;\r\n\t\t\t\t&lt;outputDirectory&gt;${project.build.directory}/classes&lt;/outputDirectory&gt;\r\n\t\t\t\t&lt;includes&gt;aaa/**, bbb/**, ccc/**&lt;/includes&gt;\r\n\t\t\t&lt;/configuration&gt;\r\n\t\t&lt;/execution&gt;\r\n\t&lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```","title":"Including dependencies in a jar with Maven","body":"<p>I was trying to do sth similar, but I didn't want all jars to be included. I wanted to include some specific directories from the given dependency. In addition classifier tag was already occupied, so I couldn't do:</p>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;your.group.id&lt;/groupId&gt;\n        &lt;artifactId&gt;your.artifact.id&lt;/artifactId&gt;\n        &lt;version&gt;1.0&lt;/version&gt;\n        &lt;type&gt;jar&lt;/type&gt;\n        &lt;classifier&gt;jar-with-dependencies&lt;/classifier&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<ol>\n<li>I used maven-dependency-plugin and unpack goal</li>\n<li>And unpacked what I wanted to the <code>${project.build.directory}/classes</code>, otherwise it will be omitted</li>\n<li>Because it was in the classes directory, maven finally placed it in the jar</li>\n</ol>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;unpack&lt;/id&gt;\n            &lt;phase&gt;prepare-package&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;unpack&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;artifactItems&gt;\n                    &lt;artifactItem&gt;\n                        &lt;groupId&gt;my.group&lt;/groupId&gt;\n                        &lt;artifactId&gt;my.artifact&lt;/artifactId&gt;\n                        &lt;classifier&gt;occupied&lt;/classifier&gt;\n                        &lt;version&gt;1.0&lt;/version&gt;\n                        &lt;type&gt;jar&lt;/type&gt;\n                    &lt;/artifactItem&gt;\n                &lt;/artifactItems&gt;\n                &lt;outputDirectory&gt;${project.build.directory}/classes&lt;/outputDirectory&gt;\n                &lt;includes&gt;aaa/**, bbb/**, ccc/**&lt;/includes&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1115726,"reputation":631,"user_id":1105098,"accept_rate":77,"display_name":"Reece"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675468905,"creation_date":1675468905,"answer_id":75342089,"question_id":1729054,"body_markdown":"I found this to be the clearest answer; other answers here were missing things that weren&#39;t obvious to me such as mvn clean package command for example, and adding the plugin separately as a dependancy also.  All of which are probably obvious to more habitual maven users.\r\n\r\nhttps://howtodoinjava.com/maven/executable-jar-with-dependencies/ ","title":"Including dependencies in a jar with Maven","body":"<p>I found this to be the clearest answer; other answers here were missing things that weren't obvious to me such as mvn clean package command for example, and adding the plugin separately as a dependancy also.  All of which are probably obvious to more habitual maven users.</p>\n<p><a href=\"https://howtodoinjava.com/maven/executable-jar-with-dependencies/\" rel=\"nofollow noreferrer\">https://howtodoinjava.com/maven/executable-jar-with-dependencies/</a></p>\n"}],"owner":{"account_id":72985,"reputation":4507,"user_id":210441,"accept_rate":82,"display_name":"racer"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":625762,"favorite_count":0,"down_vote_count":1,"up_vote_count":443,"accepted_answer_id":1729094,"answer_count":16,"score":442,"last_activity_date":1675468905,"creation_date":1258116684,"question_id":1729054,"body_markdown":"Is there a way to force maven(2.0.9) to include all the dependencies in a single jar file?\r\n\r\nI have a project the builds into a single jar file. I want the classes from dependencies to be copied into the jar as well.\r\n\r\n**Update:** I know that I cant just include a jar file in a jar file. I&#39;m searching for a way to unpack the jars that are specified as dependencies, and package the class files into my jar.","title":"Including dependencies in a jar with Maven","body":"<p>Is there a way to force maven(2.0.9) to include all the dependencies in a single jar file?</p>\n\n<p>I have a project the builds into a single jar file. I want the classes from dependencies to be copied into the jar as well.</p>\n\n<p><strong>Update:</strong> I know that I cant just include a jar file in a jar file. I'm searching for a way to unpack the jars that are specified as dependencies, and package the class files into my jar.</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":195169,"reputation":2946,"user_id":1128593,"display_name":"David Jones"},"score":2,"creation_date":1675464940,"post_id":75341693,"comment_id":132942328,"body_markdown":"All you are doing is setting the root of the current scene.  You aren&#39;t creating a new scene so of course the state of the scene hasn&#39;t changed.","body":"All you are doing is setting the root of the current scene.  You aren&#39;t creating a new scene so of course the state of the scene hasn&#39;t changed."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1675472960,"post_id":75341693,"comment_id":132943351,"body_markdown":"Always try to supply a [mcve] for debugging issues, so your problem can be easily replicated.","body":"Always try to supply a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for debugging issues, so your problem can be easily replicated."}],"owner":{"account_id":22454879,"reputation":33,"user_id":16657698,"display_name":"Pilonyen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675468026,"creation_date":1675464171,"question_id":75341693,"body_markdown":"Everything works fine after switching to scene with my method (swichScene) at the first time.\r\nBut if I go to another scene and switch back (second time opening scene) the Buttons in my GameController aren&#39;t reassigned, so I have the old Buttons and can&#39;t change anything.\r\nThe variables get updated when pressing the Button.\r\n\r\nSteps to recreate:\r\n1) create 2 fxml scenes with at least 2 buttons in the second\r\n2) switch to second scene and change the Image in the button which isn&#39;t pressed (When the other one is pressed)\r\n-&gt; works\r\n3) Switch back to scene 1 and repeat step 2\r\n-&gt; doesn&#39;t work\r\n\r\nMy Controller:\r\n\r\n    public class GameController {\r\n    ... some stuff ...\r\n        @FXML\r\n        private Button gameField0;\r\n    ... some stuff...\r\n\r\nMy Button in game.fxml which has GameController as controller\r\n\r\n    &lt;AnchorPane maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; prefHeight=&quot;700.0&quot; prefWidth=&quot;1000.0&quot; style=&quot;-fx-background-color: #0E328C;&quot; xmlns=&quot;http://javafx.com/javafx/19&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot;\r\n    fx:controller=&quot;com.example.tictactoe.GameController&quot;&gt;\r\n    ... some stuff ...\r\n                            &lt;Button fx:id=&quot;gameField0&quot; alignment=&quot;CENTER&quot; contentDisplay=&quot;CENTER&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#pressedField0&quot; prefHeight=&quot;100.0&quot; prefWidth=&quot;100.0&quot; styleClass=&quot;tttfield&quot;&gt;\r\n                               &lt;graphic&gt;\r\n                                  &lt;ImageView fitHeight=&quot;75.0&quot; fitWidth=&quot;75.0&quot; pickOnBounds=&quot;true&quot; preserveRatio=&quot;true&quot; /&gt;\r\n                               &lt;/graphic&gt;\r\n                            &lt;/Button&gt;\r\n    ... some stuff ...\r\n\r\nMy start():\r\n\r\n    public void start(Stage stage) throws IOException {\r\n        FXMLLoader fxmlLoader = new FXMLLoader(App.class.getResource(&quot;startpage.fxml&quot;));\r\n        Scene scene = new Scene(fxmlLoader.load());\r\n        // Stage setup\r\n        stage.setTitle(&quot;TicTacToe&quot;);\r\n        Image icon = new Image(App.class.getResource(&quot;icon.png&quot;).toString());\r\n        stage.getIcons().add(icon);\r\n        stage.setScene(scene);\r\n        stage.show();\r\n        this.stage = stage;\r\n        this.scene = scene;\r\n    }\r\n\r\nSwitching to game.fxml which has GameController as controller\r\n\r\n    public static void swichScene(Scene currentScene, Stage stage) throws IOException {\r\n        FXMLLoader fxmlLoader = new FXMLLoader(App.class.getResource(game.fxml));\r\n        currentScene.setRoot(fxmlLoader.load());\r\n        stage.setScene(scene);\r\n        stage.show();\r\n    }","title":"JavaFx - fx:id not changed after creating scene second time","body":"<p>Everything works fine after switching to scene with my method (swichScene) at the first time.\nBut if I go to another scene and switch back (second time opening scene) the Buttons in my GameController aren't reassigned, so I have the old Buttons and can't change anything.\nThe variables get updated when pressing the Button.</p>\n<p>Steps to recreate:</p>\n<ol>\n<li>create 2 fxml scenes with at least 2 buttons in the second</li>\n<li>switch to second scene and change the Image in the button which isn't pressed (When the other one is pressed)\n-&gt; works</li>\n<li>Switch back to scene 1 and repeat step 2\n-&gt; doesn't work</li>\n</ol>\n<p>My Controller:</p>\n<pre><code>public class GameController {\n... some stuff ...\n    @FXML\n    private Button gameField0;\n... some stuff...\n</code></pre>\n<p>My Button in game.fxml which has GameController as controller</p>\n<pre><code>&lt;AnchorPane maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; prefHeight=&quot;700.0&quot; prefWidth=&quot;1000.0&quot; style=&quot;-fx-background-color: #0E328C;&quot; xmlns=&quot;http://javafx.com/javafx/19&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot;\nfx:controller=&quot;com.example.tictactoe.GameController&quot;&gt;\n... some stuff ...\n                        &lt;Button fx:id=&quot;gameField0&quot; alignment=&quot;CENTER&quot; contentDisplay=&quot;CENTER&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#pressedField0&quot; prefHeight=&quot;100.0&quot; prefWidth=&quot;100.0&quot; styleClass=&quot;tttfield&quot;&gt;\n                           &lt;graphic&gt;\n                              &lt;ImageView fitHeight=&quot;75.0&quot; fitWidth=&quot;75.0&quot; pickOnBounds=&quot;true&quot; preserveRatio=&quot;true&quot; /&gt;\n                           &lt;/graphic&gt;\n                        &lt;/Button&gt;\n... some stuff ...\n</code></pre>\n<p>My start():</p>\n<pre><code>public void start(Stage stage) throws IOException {\n    FXMLLoader fxmlLoader = new FXMLLoader(App.class.getResource(&quot;startpage.fxml&quot;));\n    Scene scene = new Scene(fxmlLoader.load());\n    // Stage setup\n    stage.setTitle(&quot;TicTacToe&quot;);\n    Image icon = new Image(App.class.getResource(&quot;icon.png&quot;).toString());\n    stage.getIcons().add(icon);\n    stage.setScene(scene);\n    stage.show();\n    this.stage = stage;\n    this.scene = scene;\n}\n</code></pre>\n<p>Switching to game.fxml which has GameController as controller</p>\n<pre><code>public static void swichScene(Scene currentScene, Stage stage) throws IOException {\n    FXMLLoader fxmlLoader = new FXMLLoader(App.class.getResource(game.fxml));\n    currentScene.setRoot(fxmlLoader.load());\n    stage.setScene(scene);\n    stage.show();\n}\n</code></pre>\n"},{"tags":["java","minecraft-forge"],"comments":[{"owner":{"account_id":15152392,"reputation":147,"user_id":10934377,"display_name":"Heiko Ribberink"},"score":0,"creation_date":1644830374,"post_id":71109024,"comment_id":125700642,"body_markdown":"Use [Discord4j](https://discord4j.com/), you can probably find what you need in the documentation.","body":"Use <a href=\"https://discord4j.com/\" rel=\"nofollow noreferrer\">Discord4j</a>, you can probably find what you need in the documentation."}],"answers":[{"tags":[],"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1644835432,"creation_date":1644835432,"answer_id":71110576,"question_id":71109024,"body_markdown":"You can use [this](https://gist.github.com/k3kdude/fba6f6b37594eae3d6f9475330733bdb) which personally works for me. This is the full code if the gist expire:\r\n```\r\nimport javax.net.ssl.HttpsURLConnection;\r\nimport java.awt.Color;\r\nimport java.io.IOException;\r\nimport java.io.OutputStream;\r\nimport java.lang.reflect.Array;\r\nimport java.net.URL;\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.Set;\r\n\r\n/**\r\n * Class used to execute Discord Webhooks with low effort\r\n * Come from: https://gist.github.com/k3kdude/fba6f6b37594eae3d6f9475330733bdb\r\n */\r\npublic class DiscordWebhook {\r\n\r\n    private final String url;\r\n    private String content;\r\n    private String username;\r\n    private String avatarUrl;\r\n    private boolean tts;\r\n    private List&lt;EmbedObject&gt; embeds = new ArrayList&lt;&gt;();\r\n\r\n    /**\r\n     * Constructs a new DiscordWebhook instance\r\n     *\r\n     * @param url The webhook URL obtained in Discord\r\n     */\r\n    public DiscordWebhook(String url) {\r\n        this.url = url;\r\n    }\r\n\r\n    public void setContent(String content) {\r\n        this.content = content;\r\n    }\r\n\r\n    public void setUsername(String username) {\r\n        this.username = username;\r\n    }\r\n\r\n    public void setAvatarUrl(String avatarUrl) {\r\n        this.avatarUrl = avatarUrl;\r\n    }\r\n\r\n    public void setTts(boolean tts) {\r\n        this.tts = tts;\r\n    }\r\n\r\n    public void addEmbed(EmbedObject embed) {\r\n        this.embeds.add(embed);\r\n    }\r\n\r\n    public void execute() throws IOException {\r\n        if (this.content == null &amp;&amp; this.embeds.isEmpty()) {\r\n            throw new IllegalArgumentException(&quot;Set content or add at least one EmbedObject&quot;);\r\n        }\r\n\r\n        JSONObject json = new JSONObject();\r\n\r\n        json.put(&quot;content&quot;, this.content);\r\n        json.put(&quot;username&quot;, this.username);\r\n        json.put(&quot;avatar_url&quot;, this.avatarUrl);\r\n        json.put(&quot;tts&quot;, this.tts);\r\n\r\n        if (!this.embeds.isEmpty()) {\r\n            List&lt;JSONObject&gt; embedObjects = new ArrayList&lt;&gt;();\r\n\r\n            for (EmbedObject embed : this.embeds) {\r\n                JSONObject jsonEmbed = new JSONObject();\r\n\r\n                jsonEmbed.put(&quot;title&quot;, embed.getTitle());\r\n                jsonEmbed.put(&quot;description&quot;, embed.getDescription());\r\n                jsonEmbed.put(&quot;url&quot;, embed.getUrl());\r\n\r\n                if (embed.getColor() != null) {\r\n                    Color color = embed.getColor();\r\n                    int rgb = color.getRed();\r\n                    rgb = (rgb &lt;&lt; 8) + color.getGreen();\r\n                    rgb = (rgb &lt;&lt; 8) + color.getBlue();\r\n\r\n                    jsonEmbed.put(&quot;color&quot;, rgb);\r\n                }\r\n\r\n                EmbedObject.Footer footer = embed.getFooter();\r\n                EmbedObject.Image image = embed.getImage();\r\n                EmbedObject.Thumbnail thumbnail = embed.getThumbnail();\r\n                EmbedObject.Author author = embed.getAuthor();\r\n                List&lt;EmbedObject.Field&gt; fields = embed.getFields();\r\n\r\n                if (footer != null) {\r\n                    JSONObject jsonFooter = new JSONObject();\r\n\r\n                    jsonFooter.put(&quot;text&quot;, footer.getText());\r\n                    jsonFooter.put(&quot;icon_url&quot;, footer.getIconUrl());\r\n                    jsonEmbed.put(&quot;footer&quot;, jsonFooter);\r\n                }\r\n\r\n                if (image != null) {\r\n                    JSONObject jsonImage = new JSONObject();\r\n\r\n                    jsonImage.put(&quot;url&quot;, image.getUrl());\r\n                    jsonEmbed.put(&quot;image&quot;, jsonImage);\r\n                }\r\n\r\n                if (thumbnail != null) {\r\n                    JSONObject jsonThumbnail = new JSONObject();\r\n\r\n                    jsonThumbnail.put(&quot;url&quot;, thumbnail.getUrl());\r\n                    jsonEmbed.put(&quot;thumbnail&quot;, jsonThumbnail);\r\n                }\r\n\r\n                if (author != null) {\r\n                    JSONObject jsonAuthor = new JSONObject();\r\n\r\n                    jsonAuthor.put(&quot;name&quot;, author.getName());\r\n                    jsonAuthor.put(&quot;url&quot;, author.getUrl());\r\n                    jsonAuthor.put(&quot;icon_url&quot;, author.getIconUrl());\r\n                    jsonEmbed.put(&quot;author&quot;, jsonAuthor);\r\n                }\r\n\r\n                List&lt;JSONObject&gt; jsonFields = new ArrayList&lt;&gt;();\r\n                for (EmbedObject.Field field : fields) {\r\n                    JSONObject jsonField = new JSONObject();\r\n\r\n                    jsonField.put(&quot;name&quot;, field.getName());\r\n                    jsonField.put(&quot;value&quot;, field.getValue());\r\n                    jsonField.put(&quot;inline&quot;, field.isInline());\r\n\r\n                    jsonFields.add(jsonField);\r\n                }\r\n\r\n                jsonEmbed.put(&quot;fields&quot;, jsonFields.toArray());\r\n                embedObjects.add(jsonEmbed);\r\n            }\r\n\r\n            json.put(&quot;embeds&quot;, embedObjects.toArray());\r\n        }\r\n\r\n        URL url = new URL(this.url);\r\n        HttpsURLConnection connection = (HttpsURLConnection) url.openConnection();\r\n        connection.addRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n        connection.addRequestProperty(&quot;User-Agent&quot;, &quot;Java-DiscordWebhook-BY-Gelox_&quot;);\r\n        connection.setDoOutput(true);\r\n        connection.setRequestMethod(&quot;POST&quot;);\r\n\r\n        OutputStream stream = connection.getOutputStream();\r\n        stream.write(json.toString().getBytes());\r\n        stream.flush();\r\n        stream.close();\r\n\r\n        connection.getInputStream().close(); //I&#39;m not sure why but it doesn&#39;t work without getting the InputStream\r\n        connection.disconnect();\r\n    }\r\n\r\n    public static class EmbedObject {\r\n        private String title;\r\n        private String description;\r\n        private String url;\r\n        private Color color;\r\n\r\n        private Footer footer;\r\n        private Thumbnail thumbnail;\r\n        private Image image;\r\n        private Author author;\r\n        private List&lt;Field&gt; fields = new ArrayList&lt;&gt;();\r\n\r\n        public String getTitle() {\r\n            return title;\r\n        }\r\n\r\n        public String getDescription() {\r\n            return description;\r\n        }\r\n\r\n        public String getUrl() {\r\n            return url;\r\n        }\r\n\r\n        public Color getColor() {\r\n            return color;\r\n        }\r\n\r\n        public Footer getFooter() {\r\n            return footer;\r\n        }\r\n\r\n        public Thumbnail getThumbnail() {\r\n            return thumbnail;\r\n        }\r\n\r\n        public Image getImage() {\r\n            return image;\r\n        }\r\n\r\n        public Author getAuthor() {\r\n            return author;\r\n        }\r\n\r\n        public List&lt;Field&gt; getFields() {\r\n            return fields;\r\n        }\r\n\r\n        public EmbedObject setTitle(String title) {\r\n            this.title = title;\r\n            return this;\r\n        }\r\n\r\n        public EmbedObject setDescription(String description) {\r\n            this.description = description;\r\n            return this;\r\n        }\r\n\r\n        public EmbedObject setUrl(String url) {\r\n            this.url = url;\r\n            return this;\r\n        }\r\n\r\n        public EmbedObject setColor(Color color) {\r\n            this.color = color;\r\n            return this;\r\n        }\r\n\r\n        public EmbedObject setFooter(String text, String icon) {\r\n            this.footer = new Footer(text, icon);\r\n            return this;\r\n        }\r\n\r\n        public EmbedObject setThumbnail(String url) {\r\n            this.thumbnail = new Thumbnail(url);\r\n            return this;\r\n        }\r\n\r\n        public EmbedObject setImage(String url) {\r\n            this.image = new Image(url);\r\n            return this;\r\n        }\r\n\r\n        public EmbedObject setAuthor(String name, String url, String icon) {\r\n            this.author = new Author(name, url, icon);\r\n            return this;\r\n        }\r\n\r\n        public EmbedObject addField(String name, String value, boolean inline) {\r\n            this.fields.add(new Field(name, value, inline));\r\n            return this;\r\n        }\r\n\r\n        private class Footer {\r\n            private String text;\r\n            private String iconUrl;\r\n\r\n            private Footer(String text, String iconUrl) {\r\n                this.text = text;\r\n                this.iconUrl = iconUrl;\r\n            }\r\n\r\n            private String getText() {\r\n                return text;\r\n            }\r\n\r\n            private String getIconUrl() {\r\n                return iconUrl;\r\n            }\r\n        }\r\n\r\n        private class Thumbnail {\r\n            private String url;\r\n\r\n            private Thumbnail(String url) {\r\n                this.url = url;\r\n            }\r\n\r\n            private String getUrl() {\r\n                return url;\r\n            }\r\n        }\r\n\r\n        private class Image {\r\n            private String url;\r\n\r\n            private Image(String url) {\r\n                this.url = url;\r\n            }\r\n\r\n            private String getUrl() {\r\n                return url;\r\n            }\r\n        }\r\n\r\n        private class Author {\r\n            private String name;\r\n            private String url;\r\n            private String iconUrl;\r\n\r\n            private Author(String name, String url, String iconUrl) {\r\n                this.name = name;\r\n                this.url = url;\r\n                this.iconUrl = iconUrl;\r\n            }\r\n\r\n            private String getName() {\r\n                return name;\r\n            }\r\n\r\n            private String getUrl() {\r\n                return url;\r\n            }\r\n\r\n            private String getIconUrl() {\r\n                return iconUrl;\r\n            }\r\n        }\r\n\r\n        private class Field {\r\n            private String name;\r\n            private String value;\r\n            private boolean inline;\r\n\r\n            private Field(String name, String value, boolean inline) {\r\n                this.name = name;\r\n                this.value = value;\r\n                this.inline = inline;\r\n            }\r\n\r\n            private String getName() {\r\n                return name;\r\n            }\r\n\r\n            private String getValue() {\r\n                return value;\r\n            }\r\n\r\n            private boolean isInline() {\r\n                return inline;\r\n            }\r\n        }\r\n    }\r\n\r\n    private class JSONObject {\r\n\r\n        private final HashMap&lt;String, Object&gt; map = new HashMap&lt;&gt;();\r\n\r\n        void put(String key, Object value) {\r\n            if (value != null) {\r\n                map.put(key, value);\r\n            }\r\n        }\r\n\r\n        @Override\r\n        public String toString() {\r\n            StringBuilder builder = new StringBuilder();\r\n            Set&lt;Map.Entry&lt;String, Object&gt;&gt; entrySet = map.entrySet();\r\n            builder.append(&quot;{&quot;);\r\n\r\n            int i = 0;\r\n            for (Map.Entry&lt;String, Object&gt; entry : entrySet) {\r\n                Object val = entry.getValue();\r\n                builder.append(quote(entry.getKey())).append(&quot;:&quot;);\r\n\r\n                if (val instanceof String) {\r\n                    builder.append(quote(String.valueOf(val)));\r\n                } else if (val instanceof Integer) {\r\n                    builder.append(Integer.valueOf(String.valueOf(val)));\r\n                } else if (val instanceof Boolean) {\r\n                    builder.append(val);\r\n                } else if (val instanceof JSONObject) {\r\n                    builder.append(val.toString());\r\n                } else if (val.getClass().isArray()) {\r\n                    builder.append(&quot;[&quot;);\r\n                    int len = Array.getLength(val);\r\n                    for (int j = 0; j &lt; len; j++) {\r\n                        builder.append(Array.get(val, j).toString()).append(j != len - 1 ? &quot;,&quot; : &quot;&quot;);\r\n                    }\r\n                    builder.append(&quot;]&quot;);\r\n                }\r\n\r\n                builder.append(++i == entrySet.size() ? &quot;}&quot; : &quot;,&quot;);\r\n            }\r\n\r\n            return builder.toString();\r\n        }\r\n\r\n        private String quote(String string) {\r\n            return &quot;\\&quot;&quot; + string + &quot;\\&quot;&quot;;\r\n        }\r\n    }\r\n}\r\n```\r\nTo use it, you have to do something like that:\r\n```\r\nDiscordWebhook webhook = new DiscordWebhook(&quot;https://discordapp.com/api/webhooks/...&quot;);\r\n    webhook.setContent(&quot;Any message!&quot;);\r\n    webhook.setAvatarUrl(&quot;https://your.awesome/image.png&quot;);\r\n    webhook.setUsername(&quot;Custom Usernames!&quot;);\r\n    webhook.setTts(true);\r\n    webhook.addEmbed(new DiscordWebhook.EmbedObject()\r\n            .setTitle(&quot;Title&quot;)\r\n            .setDescription(&quot;This is a description&quot;)\r\n            .setColor(Color.RED)\r\n            .addField(&quot;1st Field&quot;, &quot;Inline&quot;, true)\r\n    .addField(&quot;2nd Field&quot;, &quot;Inline&quot;, true)\r\n    .addField(&quot;3rd Field&quot;, &quot;No-Inline&quot;, false)\r\n    .setThumbnail(&quot;https://kryptongta.com/images/kryptonlogo.png&quot;)\r\n    .setFooter(&quot;Footer text&quot;, &quot;https://kryptongta.com/images/kryptonlogodark.png&quot;)\r\n    .setImage(&quot;https://kryptongta.com/images/kryptontitle2.png&quot;)\r\n    .setAuthor(&quot;Author Name&quot;, &quot;https://kryptongta.com&quot;, &quot;https://kryptongta.com/images/kryptonlogowide.png&quot;)\r\n    .setUrl(&quot;https://kryptongta.com&quot;));\r\n    webhook.addEmbed(new DiscordWebhook.EmbedObject()\r\n    .setDescription(&quot;Just another added embed object!&quot;));\r\n    webhook.execute(); //Handle exception\r\n```","title":"How to send data to a discord webhook in java using a single .java file?","body":"<p>You can use <a href=\"https://gist.github.com/k3kdude/fba6f6b37594eae3d6f9475330733bdb\" rel=\"nofollow noreferrer\">this</a> which personally works for me. This is the full code if the gist expire:</p>\n<pre><code>import javax.net.ssl.HttpsURLConnection;\nimport java.awt.Color;\nimport java.io.IOException;\nimport java.io.OutputStream;\nimport java.lang.reflect.Array;\nimport java.net.URL;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\n\n/**\n * Class used to execute Discord Webhooks with low effort\n * Come from: https://gist.github.com/k3kdude/fba6f6b37594eae3d6f9475330733bdb\n */\npublic class DiscordWebhook {\n\n    private final String url;\n    private String content;\n    private String username;\n    private String avatarUrl;\n    private boolean tts;\n    private List&lt;EmbedObject&gt; embeds = new ArrayList&lt;&gt;();\n\n    /**\n     * Constructs a new DiscordWebhook instance\n     *\n     * @param url The webhook URL obtained in Discord\n     */\n    public DiscordWebhook(String url) {\n        this.url = url;\n    }\n\n    public void setContent(String content) {\n        this.content = content;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public void setAvatarUrl(String avatarUrl) {\n        this.avatarUrl = avatarUrl;\n    }\n\n    public void setTts(boolean tts) {\n        this.tts = tts;\n    }\n\n    public void addEmbed(EmbedObject embed) {\n        this.embeds.add(embed);\n    }\n\n    public void execute() throws IOException {\n        if (this.content == null &amp;&amp; this.embeds.isEmpty()) {\n            throw new IllegalArgumentException(&quot;Set content or add at least one EmbedObject&quot;);\n        }\n\n        JSONObject json = new JSONObject();\n\n        json.put(&quot;content&quot;, this.content);\n        json.put(&quot;username&quot;, this.username);\n        json.put(&quot;avatar_url&quot;, this.avatarUrl);\n        json.put(&quot;tts&quot;, this.tts);\n\n        if (!this.embeds.isEmpty()) {\n            List&lt;JSONObject&gt; embedObjects = new ArrayList&lt;&gt;();\n\n            for (EmbedObject embed : this.embeds) {\n                JSONObject jsonEmbed = new JSONObject();\n\n                jsonEmbed.put(&quot;title&quot;, embed.getTitle());\n                jsonEmbed.put(&quot;description&quot;, embed.getDescription());\n                jsonEmbed.put(&quot;url&quot;, embed.getUrl());\n\n                if (embed.getColor() != null) {\n                    Color color = embed.getColor();\n                    int rgb = color.getRed();\n                    rgb = (rgb &lt;&lt; 8) + color.getGreen();\n                    rgb = (rgb &lt;&lt; 8) + color.getBlue();\n\n                    jsonEmbed.put(&quot;color&quot;, rgb);\n                }\n\n                EmbedObject.Footer footer = embed.getFooter();\n                EmbedObject.Image image = embed.getImage();\n                EmbedObject.Thumbnail thumbnail = embed.getThumbnail();\n                EmbedObject.Author author = embed.getAuthor();\n                List&lt;EmbedObject.Field&gt; fields = embed.getFields();\n\n                if (footer != null) {\n                    JSONObject jsonFooter = new JSONObject();\n\n                    jsonFooter.put(&quot;text&quot;, footer.getText());\n                    jsonFooter.put(&quot;icon_url&quot;, footer.getIconUrl());\n                    jsonEmbed.put(&quot;footer&quot;, jsonFooter);\n                }\n\n                if (image != null) {\n                    JSONObject jsonImage = new JSONObject();\n\n                    jsonImage.put(&quot;url&quot;, image.getUrl());\n                    jsonEmbed.put(&quot;image&quot;, jsonImage);\n                }\n\n                if (thumbnail != null) {\n                    JSONObject jsonThumbnail = new JSONObject();\n\n                    jsonThumbnail.put(&quot;url&quot;, thumbnail.getUrl());\n                    jsonEmbed.put(&quot;thumbnail&quot;, jsonThumbnail);\n                }\n\n                if (author != null) {\n                    JSONObject jsonAuthor = new JSONObject();\n\n                    jsonAuthor.put(&quot;name&quot;, author.getName());\n                    jsonAuthor.put(&quot;url&quot;, author.getUrl());\n                    jsonAuthor.put(&quot;icon_url&quot;, author.getIconUrl());\n                    jsonEmbed.put(&quot;author&quot;, jsonAuthor);\n                }\n\n                List&lt;JSONObject&gt; jsonFields = new ArrayList&lt;&gt;();\n                for (EmbedObject.Field field : fields) {\n                    JSONObject jsonField = new JSONObject();\n\n                    jsonField.put(&quot;name&quot;, field.getName());\n                    jsonField.put(&quot;value&quot;, field.getValue());\n                    jsonField.put(&quot;inline&quot;, field.isInline());\n\n                    jsonFields.add(jsonField);\n                }\n\n                jsonEmbed.put(&quot;fields&quot;, jsonFields.toArray());\n                embedObjects.add(jsonEmbed);\n            }\n\n            json.put(&quot;embeds&quot;, embedObjects.toArray());\n        }\n\n        URL url = new URL(this.url);\n        HttpsURLConnection connection = (HttpsURLConnection) url.openConnection();\n        connection.addRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\n        connection.addRequestProperty(&quot;User-Agent&quot;, &quot;Java-DiscordWebhook-BY-Gelox_&quot;);\n        connection.setDoOutput(true);\n        connection.setRequestMethod(&quot;POST&quot;);\n\n        OutputStream stream = connection.getOutputStream();\n        stream.write(json.toString().getBytes());\n        stream.flush();\n        stream.close();\n\n        connection.getInputStream().close(); //I'm not sure why but it doesn't work without getting the InputStream\n        connection.disconnect();\n    }\n\n    public static class EmbedObject {\n        private String title;\n        private String description;\n        private String url;\n        private Color color;\n\n        private Footer footer;\n        private Thumbnail thumbnail;\n        private Image image;\n        private Author author;\n        private List&lt;Field&gt; fields = new ArrayList&lt;&gt;();\n\n        public String getTitle() {\n            return title;\n        }\n\n        public String getDescription() {\n            return description;\n        }\n\n        public String getUrl() {\n            return url;\n        }\n\n        public Color getColor() {\n            return color;\n        }\n\n        public Footer getFooter() {\n            return footer;\n        }\n\n        public Thumbnail getThumbnail() {\n            return thumbnail;\n        }\n\n        public Image getImage() {\n            return image;\n        }\n\n        public Author getAuthor() {\n            return author;\n        }\n\n        public List&lt;Field&gt; getFields() {\n            return fields;\n        }\n\n        public EmbedObject setTitle(String title) {\n            this.title = title;\n            return this;\n        }\n\n        public EmbedObject setDescription(String description) {\n            this.description = description;\n            return this;\n        }\n\n        public EmbedObject setUrl(String url) {\n            this.url = url;\n            return this;\n        }\n\n        public EmbedObject setColor(Color color) {\n            this.color = color;\n            return this;\n        }\n\n        public EmbedObject setFooter(String text, String icon) {\n            this.footer = new Footer(text, icon);\n            return this;\n        }\n\n        public EmbedObject setThumbnail(String url) {\n            this.thumbnail = new Thumbnail(url);\n            return this;\n        }\n\n        public EmbedObject setImage(String url) {\n            this.image = new Image(url);\n            return this;\n        }\n\n        public EmbedObject setAuthor(String name, String url, String icon) {\n            this.author = new Author(name, url, icon);\n            return this;\n        }\n\n        public EmbedObject addField(String name, String value, boolean inline) {\n            this.fields.add(new Field(name, value, inline));\n            return this;\n        }\n\n        private class Footer {\n            private String text;\n            private String iconUrl;\n\n            private Footer(String text, String iconUrl) {\n                this.text = text;\n                this.iconUrl = iconUrl;\n            }\n\n            private String getText() {\n                return text;\n            }\n\n            private String getIconUrl() {\n                return iconUrl;\n            }\n        }\n\n        private class Thumbnail {\n            private String url;\n\n            private Thumbnail(String url) {\n                this.url = url;\n            }\n\n            private String getUrl() {\n                return url;\n            }\n        }\n\n        private class Image {\n            private String url;\n\n            private Image(String url) {\n                this.url = url;\n            }\n\n            private String getUrl() {\n                return url;\n            }\n        }\n\n        private class Author {\n            private String name;\n            private String url;\n            private String iconUrl;\n\n            private Author(String name, String url, String iconUrl) {\n                this.name = name;\n                this.url = url;\n                this.iconUrl = iconUrl;\n            }\n\n            private String getName() {\n                return name;\n            }\n\n            private String getUrl() {\n                return url;\n            }\n\n            private String getIconUrl() {\n                return iconUrl;\n            }\n        }\n\n        private class Field {\n            private String name;\n            private String value;\n            private boolean inline;\n\n            private Field(String name, String value, boolean inline) {\n                this.name = name;\n                this.value = value;\n                this.inline = inline;\n            }\n\n            private String getName() {\n                return name;\n            }\n\n            private String getValue() {\n                return value;\n            }\n\n            private boolean isInline() {\n                return inline;\n            }\n        }\n    }\n\n    private class JSONObject {\n\n        private final HashMap&lt;String, Object&gt; map = new HashMap&lt;&gt;();\n\n        void put(String key, Object value) {\n            if (value != null) {\n                map.put(key, value);\n            }\n        }\n\n        @Override\n        public String toString() {\n            StringBuilder builder = new StringBuilder();\n            Set&lt;Map.Entry&lt;String, Object&gt;&gt; entrySet = map.entrySet();\n            builder.append(&quot;{&quot;);\n\n            int i = 0;\n            for (Map.Entry&lt;String, Object&gt; entry : entrySet) {\n                Object val = entry.getValue();\n                builder.append(quote(entry.getKey())).append(&quot;:&quot;);\n\n                if (val instanceof String) {\n                    builder.append(quote(String.valueOf(val)));\n                } else if (val instanceof Integer) {\n                    builder.append(Integer.valueOf(String.valueOf(val)));\n                } else if (val instanceof Boolean) {\n                    builder.append(val);\n                } else if (val instanceof JSONObject) {\n                    builder.append(val.toString());\n                } else if (val.getClass().isArray()) {\n                    builder.append(&quot;[&quot;);\n                    int len = Array.getLength(val);\n                    for (int j = 0; j &lt; len; j++) {\n                        builder.append(Array.get(val, j).toString()).append(j != len - 1 ? &quot;,&quot; : &quot;&quot;);\n                    }\n                    builder.append(&quot;]&quot;);\n                }\n\n                builder.append(++i == entrySet.size() ? &quot;}&quot; : &quot;,&quot;);\n            }\n\n            return builder.toString();\n        }\n\n        private String quote(String string) {\n            return &quot;\\&quot;&quot; + string + &quot;\\&quot;&quot;;\n        }\n    }\n}\n</code></pre>\n<p>To use it, you have to do something like that:</p>\n<pre><code>DiscordWebhook webhook = new DiscordWebhook(&quot;https://discordapp.com/api/webhooks/...&quot;);\n    webhook.setContent(&quot;Any message!&quot;);\n    webhook.setAvatarUrl(&quot;https://your.awesome/image.png&quot;);\n    webhook.setUsername(&quot;Custom Usernames!&quot;);\n    webhook.setTts(true);\n    webhook.addEmbed(new DiscordWebhook.EmbedObject()\n            .setTitle(&quot;Title&quot;)\n            .setDescription(&quot;This is a description&quot;)\n            .setColor(Color.RED)\n            .addField(&quot;1st Field&quot;, &quot;Inline&quot;, true)\n    .addField(&quot;2nd Field&quot;, &quot;Inline&quot;, true)\n    .addField(&quot;3rd Field&quot;, &quot;No-Inline&quot;, false)\n    .setThumbnail(&quot;https://kryptongta.com/images/kryptonlogo.png&quot;)\n    .setFooter(&quot;Footer text&quot;, &quot;https://kryptongta.com/images/kryptonlogodark.png&quot;)\n    .setImage(&quot;https://kryptongta.com/images/kryptontitle2.png&quot;)\n    .setAuthor(&quot;Author Name&quot;, &quot;https://kryptongta.com&quot;, &quot;https://kryptongta.com/images/kryptonlogowide.png&quot;)\n    .setUrl(&quot;https://kryptongta.com&quot;));\n    webhook.addEmbed(new DiscordWebhook.EmbedObject()\n    .setDescription(&quot;Just another added embed object!&quot;));\n    webhook.execute(); //Handle exception\n</code></pre>\n"}],"owner":{"account_id":20540509,"reputation":1,"user_id":15075540,"display_name":"Divlocket"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5186,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675467542,"creation_date":1644827731,"question_id":71109024,"body_markdown":"I&#39;m working on a Minecraft mod that requires sending a string of data to a discord webhook. What would the most efficient way to achieve this using a singular .java file?","title":"How to send data to a discord webhook in java using a single .java file?","body":"<p>I'm working on a Minecraft mod that requires sending a string of data to a discord webhook. What would the most efficient way to achieve this using a singular .java file?</p>\n"},{"tags":["java","android-gradle-plugin"],"owner":{"account_id":23547220,"reputation":19,"user_id":17590465,"display_name":"Adem k&#246;seoğlu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675467466,"creation_date":1675467466,"question_id":75341988,"body_markdown":"I am using versions of Gradle that are compatible with Java. However, I am getting a strange error as in the screenshot. I received information to add some directories to google, but I did not fully understand. Is there anyone who can help?\r\n\r\nJava Version : 19.0.2\r\nGradle Version : 7.6\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XFakE.png","title":"Project startup error related to Gradle or Java","body":"<p>I am using versions of Gradle that are compatible with Java. However, I am getting a strange error as in the screenshot. I received information to add some directories to google, but I did not fully understand. Is there anyone who can help?</p>\n<p>Java Version : 19.0.2\nGradle Version : 7.6</p>\n<p><a href=\"https://i.stack.imgur.com/XFakE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XFakE.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","spring-mvc","spring-security"],"comments":[{"owner":{"account_id":282589,"reputation":8239,"user_id":579580,"accept_rate":85,"display_name":"aviad"},"score":0,"creation_date":1424379529,"post_id":28616569,"comment_id":45536579,"body_markdown":"can be that you are missing some getter/setter in  one of your beans?","body":"can be that you are missing some getter/setter in  one of your beans?"},{"owner":{"display_name":"user3697569"},"score":0,"creation_date":1424380682,"post_id":28616569,"comment_id":45537172,"body_markdown":"I don&#39;t think so, if a delete both classes, everything works fine.","body":"I don&#39;t think so, if a delete both classes, everything works fine."},{"owner":{"account_id":3796139,"reputation":8113,"user_id":3151168,"accept_rate":100,"display_name":"ksokol"},"score":0,"creation_date":1424412646,"post_id":28616569,"comment_id":45547088,"body_markdown":"I suppose that you are using Spring Security 3.2.5 RELEASE because you are referencing the docs accordingly?","body":"I suppose that you are using Spring Security 3.2.5 RELEASE because you are referencing the docs accordingly?"},{"owner":{"display_name":"user3697569"},"score":0,"creation_date":1424446197,"post_id":28616569,"comment_id":45565012,"body_markdown":"Yes, i am using that version of Spring Security.","body":"Yes, i am using that version of Spring Security."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1424449766,"post_id":28616569,"comment_id":45567331,"body_markdown":"Can you Show the complete stacktrace and the filter definition.?","body":"Can you Show the complete stacktrace and the filter definition.?"},{"owner":{"display_name":"user3697569"},"score":0,"creation_date":1424451719,"post_id":28616569,"comment_id":45568487,"body_markdown":"Done! The filter definition of the spring security is that both classes.","body":"Done! The filter definition of the spring security is that both classes."}],"answers":[{"tags":[],"owner":{"account_id":132437,"reputation":7807,"user_id":333125,"accept_rate":54,"display_name":"Mithun"},"comment_count":0,"down_vote_count":0,"up_vote_count":49,"is_accepted":true,"score":49,"last_activity_date":1424618172,"creation_date":1424591591,"answer_id":28655714,"question_id":28616569,"body_markdown":"I copied your spring security configuration and was able to reproduce the error.\r\n\r\nFollowing line in the stacktrace gives the root cause of the exception:\r\n\r\n    at org.springframework.security.provisioning.InMemoryUserDetailsManager.createUser(InMemoryUserDetailsManager.java:59)\r\n\r\nIn `InMemoryUserDetailsManager` class, `createUser()` method, Spring checks if the user exists before creating an user. In your case you are adding two user with same username, hence there is an `IllegalArgumentException`.\r\n\r\nI added two users with different usernames and it started working fine. ","title":"Error creating bean with name &#39;springSecurityFilterChain&#39;","body":"<p>I copied your spring security configuration and was able to reproduce the error.</p>\n\n<p>Following line in the stacktrace gives the root cause of the exception:</p>\n\n<pre><code>at org.springframework.security.provisioning.InMemoryUserDetailsManager.createUser(InMemoryUserDetailsManager.java:59)\n</code></pre>\n\n<p>In <code>InMemoryUserDetailsManager</code> class, <code>createUser()</code> method, Spring checks if the user exists before creating an user. In your case you are adding two user with same username, hence there is an <code>IllegalArgumentException</code>.</p>\n\n<p>I added two users with different usernames and it started working fine. </p>\n"},{"tags":[],"owner":{"account_id":8442660,"reputation":148,"user_id":6334567,"display_name":"Blagoje Stankovic"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1522225039,"creation_date":1522225039,"answer_id":49529389,"question_id":28616569,"body_markdown":"I had the same problem. I fixed it deleting `http.antMatchers(&quot;&quot;)`.The problem was &quot;&quot; - **SpringSecurityFilterChain** throws an error, because pattern could not be empty or null.\r\n\r\n","title":"Error creating bean with name &#39;springSecurityFilterChain&#39;","body":"<p>I had the same problem. I fixed it deleting <code>http.antMatchers(\"\")</code>.The problem was \"\" - <strong>SpringSecurityFilterChain</strong> throws an error, because pattern could not be empty or null.</p>\n"},{"comments":[{"owner":{"account_id":16303727,"reputation":193,"user_id":11774167,"display_name":"Hamza Abbas"},"score":0,"creation_date":1634691494,"post_id":66798444,"comment_id":123091399,"body_markdown":"Ahh wow.. Somehow I did have 3 users in inMemory with same username, thanks man.","body":"Ahh wow.. Somehow I did have 3 users in inMemory with same username, thanks man."}],"tags":[],"owner":{"account_id":7745608,"reputation":1158,"user_id":5863519,"display_name":"KR93"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1616671250,"creation_date":1616671250,"answer_id":66798444,"question_id":28616569,"body_markdown":"Simply, You can&#39;t create 2 users with same user name. But passwords can be same. Just rename the username","title":"Error creating bean with name &#39;springSecurityFilterChain&#39;","body":"<p>Simply, You can't create 2 users with same user name. But passwords can be same. Just rename the username</p>\n"},{"tags":[],"owner":{"account_id":19571779,"reputation":448,"user_id":14322782,"display_name":"Jesper van den Munckhof"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1619561751,"creation_date":1619561751,"answer_id":67291348,"question_id":28616569,"body_markdown":"Fixed it by changing .antMatchers(&quot;/api/**&quot;, &quot;&quot;) to .antMatchers(&quot;/api/**&quot;)","title":"Error creating bean with name &#39;springSecurityFilterChain&#39;","body":"<p>Fixed it by changing .antMatchers(&quot;/api/<strong>&quot;, &quot;&quot;) to .antMatchers(&quot;/api/</strong>&quot;)</p>\n"},{"comments":[{"owner":{"account_id":395534,"reputation":617,"user_id":758529,"display_name":"Ray"},"score":0,"creation_date":1682896449,"post_id":67358612,"comment_id":134282788,"body_markdown":"Thank youuuuuu! I was going crazy trying to figure out what was wrong! This fixed the issue for me.","body":"Thank youuuuuu! I was going crazy trying to figure out what was wrong! This fixed the issue for me."}],"tags":[],"owner":{"account_id":4143607,"reputation":773,"user_id":3398044,"accept_rate":62,"display_name":"vuhoanghiep1993"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1619972297,"creation_date":1619972297,"answer_id":67358612,"question_id":28616569,"body_markdown":"With java 11 please add this to pom file\r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.0.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;","title":"Error creating bean with name &#39;springSecurityFilterChain&#39;","body":"<p>With java 11 please add this to pom file</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;\n        &lt;version&gt;2.3.0.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n        &lt;version&gt;2.3.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n        &lt;version&gt;2.3.1&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21029082,"reputation":11,"user_id":15453861,"display_name":"Wissal El Aagueb"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1627816209,"creation_date":1627816209,"answer_id":68609793,"question_id":28616569,"body_markdown":"I fixed it by updating my spring-security-config version to the latest one.","title":"Error creating bean with name &#39;springSecurityFilterChain&#39;","body":"<p>I fixed it by updating my spring-security-config version to the latest one.</p>\n"},{"tags":[],"owner":{"account_id":10059115,"reputation":324,"user_id":7436412,"accept_rate":67,"display_name":"Zap"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652186420,"creation_date":1652186420,"answer_id":72186484,"question_id":28616569,"body_markdown":"In my case (having a previously running program yield this error), I merely needed to swap back from Java 11 to Java 8 (after developing a different application). I recommend [sdkman][1] in order to ease this process.\r\n\r\n\r\n  [1]: https://sdkman.io/","title":"Error creating bean with name &#39;springSecurityFilterChain&#39;","body":"<p>In my case (having a previously running program yield this error), I merely needed to swap back from Java 11 to Java 8 (after developing a different application). I recommend <a href=\"https://sdkman.io/\" rel=\"nofollow noreferrer\">sdkman</a> in order to ease this process.</p>\n"},{"tags":[],"owner":{"account_id":22860846,"reputation":31,"user_id":17004953,"display_name":"Lewis99"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658318080,"creation_date":1658318080,"answer_id":73051199,"question_id":28616569,"body_markdown":"works for me only when i changed the version of spring security all to \r\nthe same:\r\n\r\nmy spring security was:\r\n\r\n```\r\n&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;**5.6.3**&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;**5.3.0.RELEASE**&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nand i changed to:\r\n\r\n\r\n```\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;**4.1.1.RELEASE**&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;**4.1.1.RELEASE**&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n```","title":"Error creating bean with name &#39;springSecurityFilterChain&#39;","body":"<p>works for me only when i changed the version of spring security all to\nthe same:</p>\n<p>my spring security was:</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\n            &lt;version&gt;**5.6.3**&lt;/version&gt;\n        &lt;/dependency&gt;\n&lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\n            &lt;version&gt;**5.3.0.RELEASE**&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>and i changed to:</p>\n<pre><code>\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\n            &lt;version&gt;**4.1.1.RELEASE**&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\n            &lt;version&gt;**4.1.1.RELEASE**&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1661678091,"post_id":73468751,"comment_id":129824754,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/73468751/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":15310172,"reputation":1,"user_id":11045700,"display_name":"anjali"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661325073,"creation_date":1661324526,"answer_id":73468751,"question_id":28616569,"body_markdown":"**if the above Answers does work check the maven version is compatible with your java version** \r\n\r\n \r\n\r\nmy application runs with java version 1.8 but I had maven with version 3.8.1 which is not compatible hence downgrading the maven version to 3.6.2 solved the above error\r\n\r\n","title":"Error creating bean with name &#39;springSecurityFilterChain&#39;","body":"<p><strong>if the above Answers does work check the maven version is compatible with your java version</strong></p>\n<p>my application runs with java version 1.8 but I had maven with version 3.8.1 which is not compatible hence downgrading the maven version to 3.6.2 solved the above error</p>\n"},{"tags":[],"owner":{"account_id":9557519,"reputation":543,"user_id":7099541,"display_name":"afshar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671423724,"creation_date":1671423724,"answer_id":74846269,"question_id":28616569,"body_markdown":"if you are using **spring boot 3** must be considered that In **Spring Security 5.7.0-M2 the WebSecurityConfigurerAdapter is deprecated**. so you must Upgrade the Deprecated WebSecurityConfigurerAdapter with the correct beans.\r\n\r\nBelow is an example configuration using the **WebSecurityConfigurerAdapter** that secures all endpoints with HTTP Basic:\r\n\r\n    @Configuration\r\n    public class SecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http\r\n                .authorizeHttpRequests((authz) -&gt; authz\r\n                    .anyRequest().authenticated()\r\n                )\r\n                .httpBasic(withDefaults());\r\n        }\r\n    \r\n    }\r\n\r\nGoing forward, the recommended way of doing this is registering a **SecurityFilterChain** bean:\r\n\r\n    @Configuration\r\n    public class SecurityConfiguration {\r\n    \r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            http\r\n                .authorizeHttpRequests((authz) -&gt; authz\r\n                    .anyRequest().authenticated()\r\n                )\r\n                .httpBasic(withDefaults());\r\n            return http.build();\r\n        }\r\n    \r\n    }\r\n\r\nfor more information click [here][1] and [here][2]\r\n\r\n\r\n  [1]: https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\r\n  [2]: https://www.baeldung.com/spring-deprecated-websecurityconfigureradapter","title":"Error creating bean with name &#39;springSecurityFilterChain&#39;","body":"<p>if you are using <strong>spring boot 3</strong> must be considered that In <strong>Spring Security 5.7.0-M2 the WebSecurityConfigurerAdapter is deprecated</strong>. so you must Upgrade the Deprecated WebSecurityConfigurerAdapter with the correct beans.</p>\n<p>Below is an example configuration using the <strong>WebSecurityConfigurerAdapter</strong> that secures all endpoints with HTTP Basic:</p>\n<pre><code>@Configuration\npublic class SecurityConfiguration extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n            .authorizeHttpRequests((authz) -&gt; authz\n                .anyRequest().authenticated()\n            )\n            .httpBasic(withDefaults());\n    }\n\n}\n</code></pre>\n<p>Going forward, the recommended way of doing this is registering a <strong>SecurityFilterChain</strong> bean:</p>\n<pre><code>@Configuration\npublic class SecurityConfiguration {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n            .authorizeHttpRequests((authz) -&gt; authz\n                .anyRequest().authenticated()\n            )\n            .httpBasic(withDefaults());\n        return http.build();\n    }\n\n}\n</code></pre>\n<p>for more information click <a href=\"https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://www.baeldung.com/spring-deprecated-websecurityconfigureradapter\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":27192813,"reputation":49,"user_id":20726233,"display_name":"Luca Rosato"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675467149,"creation_date":1675467149,"answer_id":75341968,"question_id":28616569,"body_markdown":"I had the same error message and the problem was that I had 2 RequestMappings defined with the same path, and honestly the error message is the least specific thing ever, maybe someone reading this review is running with the same issue right now, so please check that! :)","title":"Error creating bean with name &#39;springSecurityFilterChain&#39;","body":"<p>I had the same error message and the problem was that I had 2 RequestMappings defined with the same path, and honestly the error message is the least specific thing ever, maybe someone reading this review is running with the same issue right now, so please check that! :)</p>\n"}],"owner":{"display_name":"user3697569"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":164934,"favorite_count":0,"down_vote_count":0,"up_vote_count":42,"accepted_answer_id":28655714,"answer_count":11,"score":42,"last_activity_date":1675467149,"creation_date":1424378836,"question_id":28616569,"body_markdown":"I have been following the [Spring Security Reference](http://docs.spring.io/spring-security/site/docs/3.2.5.RELEASE/reference/htmlsingle/) and i added only this classes:\r\n\r\n\t@Configuration\r\n\t@EnableWebMvcSecurity\r\n\tpublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n\t\t\r\n\t\t@Override\r\n\t\tprotected void configure(HttpSecurity http) throws Exception {\r\n\t\t\thttp\r\n\t        .authorizeRequests()\r\n\t            .anyRequest().authenticated()\r\n\t            .and()\r\n\t        .formLogin().loginPage(&quot;/login&quot;)\r\n\t        .permitAll()\r\n\t        \t.and()\r\n\t        .logout()\r\n\t        .permitAll();\r\n\t\t}\r\n\t\t\r\n\t    @Autowired\r\n\t    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\r\n\t        auth\r\n\t            .inMemoryAuthentication()\r\n\t                .withUser(&quot;user&quot;).password(&quot;password&quot;).roles(&quot;USER&quot;).and()\r\n\t    \t\t\t.withUser(&quot;user&quot;).password(&quot;password&quot;).roles(&quot;USER&quot;, &quot;ADMIN&quot;);\r\n\t    }\r\n\t}\r\n\r\nand\r\n\r\n\tpublic class SecurityInitializer extends AbstractSecurityWebApplicationInitializer {\r\n\t\t\r\n\t\t\r\n\t}\r\n\r\nbut when i run the server, an exception is thrown, i don&#39;t know what i am doing wrong, can you help me please?\r\n\r\nThis is the stacktrace:\r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;springSecurityFilterChain&#39; defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; threw exception; nested exception is java.lang.IllegalArgumentException: [Assertion failed] - this expression must be true\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:602)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1113)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1008)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:505)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:302)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:229)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:298)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:762)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:757)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:480)\r\n\tat org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:663)\r\n\tat org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:629)\r\n\tat org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:677)\r\n\tat org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:548)\r\n\tat org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:489)\r\n\tat org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:136)\r\n\tat javax.servlet.GenericServlet.init(GenericServlet.java:241)\r\n\tat org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:440)\r\n\tat org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:263)\r\n\tat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)\r\n\tat org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)\r\n\tat org.mortbay.jetty.servlet.Context.startContext(Context.java:140)\r\n\tat org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1272)\r\n\tat org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)\r\n\tat org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:489)\r\n\tat org.gradle.api.plugins.jetty.internal.JettyPluginWebAppContext.doStart(JettyPluginWebAppContext.java:112)\r\n\tat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)\r\n\tat org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:152)\r\n\tat org.mortbay.jetty.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:156)\r\n\tat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)\r\n\tat org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:152)\r\n\tat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)\r\n\tat org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)\r\n\tat org.mortbay.jetty.Server.doStart(Server.java:224)\r\n\tat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)\r\n\tat org.gradle.api.plugins.jetty.internal.Jetty6PluginServer.start(Jetty6PluginServer.java:111)\r\n\tat org.gradle.api.plugins.jetty.AbstractJettyRunTask.startJettyInternal(AbstractJettyRunTask.java:238)\r\n\tat org.gradle.api.plugins.jetty.AbstractJettyRunTask.startJetty(AbstractJettyRunTask.java:191)\r\n\tat org.gradle.api.plugins.jetty.AbstractJettyRunTask.start(AbstractJettyRunTask.java:162)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:483)\r\n\tat org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:63)\r\n\tat org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$StandardTaskAction.doExecute(AnnotationProcessingTaskFactory.java:218)\r\n\tat org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$StandardTaskAction.execute(AnnotationProcessingTaskFactory.java:211)\r\n\tat org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$StandardTaskAction.execute(AnnotationProcessingTaskFactory.java:200)\r\n\tat org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:579)\r\n\tat org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:562)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:80)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:61)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:46)\r\n\tat org.gradle.api.internal.tasks.execution.PostExecutionAnalysisTaskExecuter.execute(PostExecutionAnalysisTaskExecuter.java:35)\r\n\tat org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:64)\r\n\tat org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:58)\r\n\tat org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:42)\r\n\tat org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:52)\r\n\tat org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:53)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\r\n\tat org.gradle.api.internal.AbstractTask.executeWithoutThrowingTaskFailure(AbstractTask.java:305)\r\n\tat org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.executeTask(AbstractTaskPlanExecutor.java:79)\r\n\tat org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.processTask(AbstractTaskPlanExecutor.java:63)\r\n\tat org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.run(AbstractTaskPlanExecutor.java:51)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.process(DefaultTaskPlanExecutor.java:23)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:88)\r\n\tat org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:29)\r\n\tat org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:62)\r\n\tat org.gradle.execution.DefaultBuildExecuter.access$200(DefaultBuildExecuter.java:23)\r\n\tat org.gradle.execution.DefaultBuildExecuter$2.proceed(DefaultBuildExecuter.java:68)\r\n\tat org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:32)\r\n\tat org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:62)\r\n\tat org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:55)\r\n\tat org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:149)\r\n\tat org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:106)\r\n\tat org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:86)\r\n\tat org.gradle.launcher.exec.InProcessBuildActionExecuter$DefaultBuildController.run(InProcessBuildActionExecuter.java:80)\r\n\tat org.gradle.launcher.cli.ExecuteBuildAction.run(ExecuteBuildAction.java:33)\r\n\tat org.gradle.launcher.cli.ExecuteBuildAction.run(ExecuteBuildAction.java:24)\r\n\tat org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:36)\r\n\tat org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:26)\r\n\tat org.gradle.launcher.cli.RunBuildAction.run(RunBuildAction.java:51)\r\n\tat org.gradle.internal.Actions$RunnableActionAdapter.execute(Actions.java:171)\r\n\tat org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:237)\r\n\tat org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:210)\r\n\tat org.gradle.launcher.cli.JavaRuntimeValidationAction.execute(JavaRuntimeValidationAction.java:35)\r\n\tat org.gradle.launcher.cli.JavaRuntimeValidationAction.execute(JavaRuntimeValidationAction.java:24)\r\n\tat org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:206)\r\n\tat org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:169)\r\n\tat org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:33)\r\n\tat org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:22)\r\n\tat org.gradle.launcher.Main.doAction(Main.java:33)\r\n\tat org.gradle.launcher.bootstrap.EntryPoint.run(EntryPoint.java:45)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:483)\r\n\tat org.gradle.launcher.bootstrap.ProcessBootstrap.runNoExit(ProcessBootstrap.java:54)\r\n\tat org.gradle.launcher.bootstrap.ProcessBootstrap.run(ProcessBootstrap.java:35)\r\n\tat org.gradle.launcher.GradleMain.main(GradleMain.java:23)\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; threw exception; nested exception is java.lang.IllegalArgumentException: [Assertion failed] - this expression must be true\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:189)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:591)\r\n\t... 102 more\r\n    Caused by: java.lang.IllegalArgumentException: [Assertion failed] - this expression must be true\r\n\tat org.springframework.util.Assert.isTrue(Assert.java:65)\r\n\tat org.springframework.util.Assert.isTrue(Assert.java:77)\r\n\tat org.springframework.security.provisioning.InMemoryUserDetailsManager.createUser(InMemoryUserDetailsManager.java:59)\r\n\tat org.springframework.security.config.annotation.authentication.configurers.provisioning.UserDetailsManagerConfigurer.initUserDetailsService(UserDetailsManagerConfigurer.java:61)\r\n\tat org.springframework.security.config.annotation.authentication.configurers.userdetails.UserDetailsServiceConfigurer.configure(UserDetailsServiceConfigurer.java:48)\r\n\tat org.springframework.security.config.annotation.authentication.configurers.userdetails.UserDetailsServiceConfigurer.configure(UserDetailsServiceConfigurer.java:33)\r\n\tat org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.configure(AbstractConfiguredSecurityBuilder.java:376)\r\n\tat org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.doBuild(AbstractConfiguredSecurityBuilder.java:325)\r\n\tat org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:39)\r\n\tat org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration.getAuthenticationManager(AuthenticationConfiguration.java:78)\r\n\tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter.authenticationManager(WebSecurityConfigurerAdapter.java:236)\r\n\tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter.getHttp(WebSecurityConfigurerAdapter.java:178)\r\n\tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter.init(WebSecurityConfigurerAdapter.java:283)\r\n\tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter.init(WebSecurityConfigurerAdapter.java:68)\r\n\tat org.munaycoop.taskmanager.security.WebSecurityConfig$$EnhancerBySpringCGLIB$$4b88c0dc.init(&lt;generated&gt;)\r\n\tat org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.init(AbstractConfiguredSecurityBuilder.java:367)\r\n\tat org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.doBuild(AbstractConfiguredSecurityBuilder.java:320)\r\n\tat org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:39)\r\n\tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration.springSecurityFilterChain(WebSecurityConfiguration.java:92)\r\n\tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$$EnhancerBySpringCGLIB$$40bdb18f.CGLIB$springSecurityFilterChain$4(&lt;generated&gt;)\r\n\tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$$EnhancerBySpringCGLIB$$40bdb18f$$FastClassBySpringCGLIB$$80796866.invoke(&lt;generated&gt;)\r\n\tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228)\r\n\tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:312)\r\n\tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$$EnhancerBySpringCGLIB$$40bdb18f.springSecurityFilterChain(&lt;generated&gt;)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:483)\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:162)\r\n\t... 103 more","title":"Error creating bean with name &#39;springSecurityFilterChain&#39;","body":"<p>I have been following the <a href=\"http://docs.spring.io/spring-security/site/docs/3.2.5.RELEASE/reference/htmlsingle/\">Spring Security Reference</a> and i added only this classes:</p>\n\n<pre><code>@Configuration\n@EnableWebMvcSecurity\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n        .authorizeRequests()\n            .anyRequest().authenticated()\n            .and()\n        .formLogin().loginPage(\"/login\")\n        .permitAll()\n            .and()\n        .logout()\n        .permitAll();\n    }\n\n    @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\n        auth\n            .inMemoryAuthentication()\n                .withUser(\"user\").password(\"password\").roles(\"USER\").and()\n                .withUser(\"user\").password(\"password\").roles(\"USER\", \"ADMIN\");\n    }\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>public class SecurityInitializer extends AbstractSecurityWebApplicationInitializer {\n\n\n}\n</code></pre>\n\n<p>but when i run the server, an exception is thrown, i don't know what i am doing wrong, can you help me please?</p>\n\n<p>This is the stacktrace:</p>\n\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method 'springSecurityFilterChain' threw exception; nested exception is java.lang.IllegalArgumentException: [Assertion failed] - this expression must be true\nat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:602)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1113)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1008)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:505)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)\nat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:302)\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:229)\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:298)\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:762)\nat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:757)\nat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:480)\nat org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:663)\nat org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:629)\nat org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:677)\nat org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:548)\nat org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:489)\nat org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:136)\nat javax.servlet.GenericServlet.init(GenericServlet.java:241)\nat org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:440)\nat org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:263)\nat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)\nat org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)\nat org.mortbay.jetty.servlet.Context.startContext(Context.java:140)\nat org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1272)\nat org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)\nat org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:489)\nat org.gradle.api.plugins.jetty.internal.JettyPluginWebAppContext.doStart(JettyPluginWebAppContext.java:112)\nat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)\nat org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:152)\nat org.mortbay.jetty.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:156)\nat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)\nat org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:152)\nat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)\nat org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)\nat org.mortbay.jetty.Server.doStart(Server.java:224)\nat org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)\nat org.gradle.api.plugins.jetty.internal.Jetty6PluginServer.start(Jetty6PluginServer.java:111)\nat org.gradle.api.plugins.jetty.AbstractJettyRunTask.startJettyInternal(AbstractJettyRunTask.java:238)\nat org.gradle.api.plugins.jetty.AbstractJettyRunTask.startJetty(AbstractJettyRunTask.java:191)\nat org.gradle.api.plugins.jetty.AbstractJettyRunTask.start(AbstractJettyRunTask.java:162)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:483)\nat org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:63)\nat org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$StandardTaskAction.doExecute(AnnotationProcessingTaskFactory.java:218)\nat org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$StandardTaskAction.execute(AnnotationProcessingTaskFactory.java:211)\nat org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$StandardTaskAction.execute(AnnotationProcessingTaskFactory.java:200)\nat org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:579)\nat org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:562)\nat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:80)\nat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:61)\nat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:46)\nat org.gradle.api.internal.tasks.execution.PostExecutionAnalysisTaskExecuter.execute(PostExecutionAnalysisTaskExecuter.java:35)\nat org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:64)\nat org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:58)\nat org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:42)\nat org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:52)\nat org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:53)\nat org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\nat org.gradle.api.internal.AbstractTask.executeWithoutThrowingTaskFailure(AbstractTask.java:305)\nat org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.executeTask(AbstractTaskPlanExecutor.java:79)\nat org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.processTask(AbstractTaskPlanExecutor.java:63)\nat org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.run(AbstractTaskPlanExecutor.java:51)\nat org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.process(DefaultTaskPlanExecutor.java:23)\nat org.gradle.execution.taskgraph.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:88)\nat org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:29)\nat org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:62)\nat org.gradle.execution.DefaultBuildExecuter.access$200(DefaultBuildExecuter.java:23)\nat org.gradle.execution.DefaultBuildExecuter$2.proceed(DefaultBuildExecuter.java:68)\nat org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:32)\nat org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:62)\nat org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:55)\nat org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:149)\nat org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:106)\nat org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:86)\nat org.gradle.launcher.exec.InProcessBuildActionExecuter$DefaultBuildController.run(InProcessBuildActionExecuter.java:80)\nat org.gradle.launcher.cli.ExecuteBuildAction.run(ExecuteBuildAction.java:33)\nat org.gradle.launcher.cli.ExecuteBuildAction.run(ExecuteBuildAction.java:24)\nat org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:36)\nat org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:26)\nat org.gradle.launcher.cli.RunBuildAction.run(RunBuildAction.java:51)\nat org.gradle.internal.Actions$RunnableActionAdapter.execute(Actions.java:171)\nat org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:237)\nat org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:210)\nat org.gradle.launcher.cli.JavaRuntimeValidationAction.execute(JavaRuntimeValidationAction.java:35)\nat org.gradle.launcher.cli.JavaRuntimeValidationAction.execute(JavaRuntimeValidationAction.java:24)\nat org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:206)\nat org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:169)\nat org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:33)\nat org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:22)\nat org.gradle.launcher.Main.doAction(Main.java:33)\nat org.gradle.launcher.bootstrap.EntryPoint.run(EntryPoint.java:45)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:483)\nat org.gradle.launcher.bootstrap.ProcessBootstrap.runNoExit(ProcessBootstrap.java:54)\nat org.gradle.launcher.bootstrap.ProcessBootstrap.run(ProcessBootstrap.java:35)\nat org.gradle.launcher.GradleMain.main(GradleMain.java:23)\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method 'springSecurityFilterChain' threw exception; nested exception is java.lang.IllegalArgumentException: [Assertion failed] - this expression must be true\nat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:189)\nat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:591)\n... 102 more\nCaused by: java.lang.IllegalArgumentException: [Assertion failed] - this expression must be true\nat org.springframework.util.Assert.isTrue(Assert.java:65)\nat org.springframework.util.Assert.isTrue(Assert.java:77)\nat org.springframework.security.provisioning.InMemoryUserDetailsManager.createUser(InMemoryUserDetailsManager.java:59)\nat org.springframework.security.config.annotation.authentication.configurers.provisioning.UserDetailsManagerConfigurer.initUserDetailsService(UserDetailsManagerConfigurer.java:61)\nat org.springframework.security.config.annotation.authentication.configurers.userdetails.UserDetailsServiceConfigurer.configure(UserDetailsServiceConfigurer.java:48)\nat org.springframework.security.config.annotation.authentication.configurers.userdetails.UserDetailsServiceConfigurer.configure(UserDetailsServiceConfigurer.java:33)\nat org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.configure(AbstractConfiguredSecurityBuilder.java:376)\nat org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.doBuild(AbstractConfiguredSecurityBuilder.java:325)\nat org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:39)\nat org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration.getAuthenticationManager(AuthenticationConfiguration.java:78)\nat org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter.authenticationManager(WebSecurityConfigurerAdapter.java:236)\nat org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter.getHttp(WebSecurityConfigurerAdapter.java:178)\nat org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter.init(WebSecurityConfigurerAdapter.java:283)\nat org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter.init(WebSecurityConfigurerAdapter.java:68)\nat org.munaycoop.taskmanager.security.WebSecurityConfig$$EnhancerBySpringCGLIB$$4b88c0dc.init(&lt;generated&gt;)\nat org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.init(AbstractConfiguredSecurityBuilder.java:367)\nat org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.doBuild(AbstractConfiguredSecurityBuilder.java:320)\nat org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:39)\nat org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration.springSecurityFilterChain(WebSecurityConfiguration.java:92)\nat org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$$EnhancerBySpringCGLIB$$40bdb18f.CGLIB$springSecurityFilterChain$4(&lt;generated&gt;)\nat org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$$EnhancerBySpringCGLIB$$40bdb18f$$FastClassBySpringCGLIB$$80796866.invoke(&lt;generated&gt;)\nat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228)\nat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:312)\nat org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$$EnhancerBySpringCGLIB$$40bdb18f.springSecurityFilterChain(&lt;generated&gt;)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:483)\nat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:162)\n... 103 more\n</code></pre>\n"},{"tags":["java","mime"],"comments":[{"owner":{"account_id":467725,"reputation":19389,"user_id":873282,"accept_rate":55,"display_name":"koppor"},"score":5,"creation_date":1368828953,"post_id":51438,"comment_id":23893802,"body_markdown":"A good overview on available libraries is given at http://www.rgagnon.com/javadetails/java-0487.html","body":"A good overview on available libraries is given at <a href=\"http://www.rgagnon.com/javadetails/java-0487.html\" rel=\"nofollow noreferrer\">rgagnon.com/javadetails/java-0487.html</a>"},{"owner":{"account_id":110909,"reputation":45713,"user_id":293280,"accept_rate":77,"display_name":"Joshua Pinter"},"score":0,"creation_date":1395129438,"post_id":51438,"comment_id":34185114,"body_markdown":"I used the class that was posted as an answer here: http://stackoverflow.com/a/10140531/293280","body":"I used the class that was posted as an answer here: <a href=\"http://stackoverflow.com/a/10140531/293280\">stackoverflow.com/a/10140531/293280</a>"},{"owner":{"account_id":13696,"reputation":17531,"user_id":27657,"accept_rate":65,"display_name":"javamonkey79"},"score":4,"creation_date":1450108279,"post_id":51438,"comment_id":56283913,"body_markdown":"Tika should be the answer now. The other answers below make light of many dependencies with Tika, but I see none with tika-core.","body":"Tika should be the answer now. The other answers below make light of many dependencies with Tika, but I see none with tika-core."},{"owner":{"account_id":2027319,"reputation":756,"user_id":1811966,"accept_rate":37,"display_name":"Cool Techie"},"score":0,"creation_date":1490594265,"post_id":51438,"comment_id":73162632,"body_markdown":"@javamonkey79 when we use TIka, it coverts the file and it&#39;s no longer usable. String contentType = tika.detect(is) .","body":"@javamonkey79 when we use TIka, it coverts the file and it&#39;s no longer usable. String contentType = tika.detect(is) ."}],"answers":[{"comments":[{"owner":{"account_id":1079937,"reputation":3752,"user_id":1077177,"accept_rate":86,"display_name":"Yuriy Nakonechnyy"},"score":8,"creation_date":1352459365,"post_id":847849,"comment_id":18148034,"body_markdown":"Perfect solution - helped me a lot! Wrapping `FileInputStream` into `BufferedInputStream` is crucial part - otherwise `guessContentTypeFromStream` returns `null` (passed `InputStream` instance should support marks)","body":"Perfect solution - helped me a lot! Wrapping <code>FileInputStream</code> into <code>BufferedInputStream</code> is crucial part - otherwise <code>guessContentTypeFromStream</code> returns <code>null</code> (passed <code>InputStream</code> instance should support marks)"},{"owner":{"account_id":915985,"reputation":3050,"user_id":948774,"accept_rate":82,"display_name":"kpentchev"},"score":16,"creation_date":1374049535,"post_id":847849,"comment_id":25782281,"body_markdown":"Howerver, `URLConnection` has a very limited set of content types that it does recognizes. For example it is not able to detect `application/pdf`.","body":"Howerver, <code>URLConnection</code> has a very limited set of content types that it does recognizes. For example it is not able to detect <code>application&#47;pdf</code>."},{"owner":{"account_id":2251113,"reputation":1157,"user_id":1983342,"accept_rate":33,"display_name":"FeinesFabi"},"score":0,"creation_date":1394625444,"post_id":847849,"comment_id":33970826,"body_markdown":"@kpentchev it detects pdf for me. But it doesn&#39;t detect office files, e.g. *.doc","body":"@kpentchev it detects pdf for me. But it doesn&#39;t detect office files, e.g. *.doc"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":3,"creation_date":1398988831,"post_id":847849,"comment_id":35887659,"body_markdown":"It only leaves it locked because you&#39;ve left yourself no way to close it. Disconnecting the URLConnection would unlock it.","body":"It only leaves it locked because you&#39;ve left yourself no way to close it. Disconnecting the URLConnection would unlock it."},{"owner":{"account_id":75221,"reputation":5709,"user_id":215838,"accept_rate":67,"display_name":"Hartmut Pfarr"},"score":1,"creation_date":1438191767,"post_id":847849,"comment_id":51353236,"body_markdown":"both guessContentTypeFromStream nor guessContentTypeFromName do NOT recognize e.g. mp4","body":"both guessContentTypeFromStream nor guessContentTypeFromName do NOT recognize e.g. mp4"},{"owner":{"account_id":1700244,"reputation":2204,"user_id":1560536,"accept_rate":92,"display_name":"Govinnage  Rasika Perera"},"score":3,"creation_date":1440914145,"post_id":847849,"comment_id":52464306,"body_markdown":"`guessContentTypeFromName()` uses default `$JAVA_HOME/lib/content-types.properties` file. you can add your own extended file by changing system property `System.setProperty(&quot;content.types.user.table&quot;,&quot;/lib/path/to/your/property/file&quot;);`","body":"<code>guessContentTypeFromName()</code> uses default <code>$JAVA_HOME&#47;lib&#47;content-types.properties</code> file. you can add your own extended file by changing system property <code>System.setProperty(&quot;content.types.user.table&quot;,&quot;&#47;lib&#47;path&#47;to&#47;&zwnj;&#8203;your&#47;property&#47;file&quot;)&zwnj;&#8203;;</code>"},{"owner":{"account_id":3915346,"reputation":833,"user_id":3711029,"accept_rate":57,"display_name":"vjnan369"},"score":1,"creation_date":1485346156,"post_id":847849,"comment_id":70886263,"body_markdown":"It is not detecting .js, .css files. Is there any other method to detect these files too?","body":"It is not detecting .js, .css files. Is there any other method to detect these files too?"},{"owner":{"account_id":1301815,"reputation":31771,"user_id":1251549,"accept_rate":29,"display_name":"Cherry"},"score":1,"creation_date":1507903677,"post_id":847849,"comment_id":80409819,"body_markdown":"Any links to `Mime-Util` ??? I have found project in [github](https://github.com/thkoch2001/mime-util) but is does not contain any description :(","body":"Any links to <code>Mime-Util</code> ??? I have found project in <a href=\"https://github.com/thkoch2001/mime-util\" rel=\"nofollow noreferrer\">github</a> but is does not contain any description :("},{"owner":{"account_id":4821703,"reputation":5944,"user_id":3892213,"accept_rate":80,"display_name":"best wishes"},"score":0,"creation_date":1528539070,"post_id":847849,"comment_id":88553490,"body_markdown":"guessContentTypeFromName uses this\n```synchronized FileNameMap getFileNameMap```\ngood luck in multithreading","body":"guessContentTypeFromName uses this <code>synchronized FileNameMap getFileNameMap</code> good luck in multithreading"}],"tags":[],"owner":{"account_id":17503,"reputation":18878,"user_id":39242,"accept_rate":71,"display_name":"Joshua Fox"},"comment_count":9,"down_vote_count":1,"up_vote_count":240,"is_accepted":false,"score":239,"last_activity_date":1275838601,"creation_date":1242044482,"answer_id":847849,"question_id":51438,"body_markdown":"Unfortunately,\r\n\r\n    mimeType = file.toURL().openConnection().getContentType();\r\n\r\ndoes not work, since this use of URL leaves a file locked, so that, for example, it is undeletable.\r\n\r\nHowever, you have this:\r\n\r\n    mimeType= URLConnection.guessContentTypeFromName(file.getName());\r\n\r\nand also the following, which has the advantage of going beyond mere use of file extension, and takes  a peek at content\r\n\r\n    InputStream is = new BufferedInputStream(new FileInputStream(file));\r\n    mimeType = URLConnection.guessContentTypeFromStream(is);\r\n     //...close stream\r\n\r\nHowever, as suggested by the comment above, the built-in table of mime-types is quite limited, not including, for example, MSWord and PDF. So, if you want to generalize, you&#39;ll need to go beyond the built-in libraries, using, e.g., Mime-Util (which is a great library, using both file extension and content).\r\n","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<p>Unfortunately,</p>\n\n<pre><code>mimeType = file.toURL().openConnection().getContentType();\n</code></pre>\n\n<p>does not work, since this use of URL leaves a file locked, so that, for example, it is undeletable.</p>\n\n<p>However, you have this:</p>\n\n<pre><code>mimeType= URLConnection.guessContentTypeFromName(file.getName());\n</code></pre>\n\n<p>and also the following, which has the advantage of going beyond mere use of file extension, and takes  a peek at content</p>\n\n<pre><code>InputStream is = new BufferedInputStream(new FileInputStream(file));\nmimeType = URLConnection.guessContentTypeFromStream(is);\n //...close stream\n</code></pre>\n\n<p>However, as suggested by the comment above, the built-in table of mime-types is quite limited, not including, for example, MSWord and PDF. So, if you want to generalize, you'll need to go beyond the built-in libraries, using, e.g., Mime-Util (which is a great library, using both file extension and content).</p>\n"},{"comments":[{"owner":{"account_id":72546,"reputation":13553,"user_id":209427,"accept_rate":76,"display_name":"Matyas"},"score":4,"creation_date":1319466449,"post_id":1902146,"comment_id":9611850,"body_markdown":"Unfortunately, as the javadoc for `getContentType(File)` states: _Returns the MIME type of the file object.The implementation in this class calls\n     `getContentType(f.getName())`._","body":"Unfortunately, as the javadoc for <code>getContentType(File)</code> states: <i>Returns the MIME type of the file object.The implementation in this class calls      <code>getContentType(f.getName())</code>.</i>"},{"owner":{"account_id":1174380,"reputation":1876,"user_id":1150744,"accept_rate":67,"display_name":"Chexpir"},"score":3,"creation_date":1390475570,"post_id":1902146,"comment_id":32111788,"body_markdown":"And remember you can extend this functionality with META-INF/mime.types file so it is perfect if you are forced to use Java 6.\nhttp://docs.oracle.com/javaee/5/api/javax/activation/MimetypesFileTypeMap.html","body":"And remember you can extend this functionality with META-INF/mime.types file so it is perfect if you are forced to use Java 6. <a href=\"http://docs.oracle.com/javaee/5/api/javax/activation/MimetypesFileTypeMap.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javaee/5/api/javax/activation/&hellip;</a>"},{"owner":{"account_id":246417,"reputation":17570,"user_id":520567,"accept_rate":71,"display_name":"akostadinov"},"score":9,"creation_date":1424683266,"post_id":1902146,"comment_id":45634611,"body_markdown":"you can skip creating a new object by `MimetypesFileTypeMap.getDefaultFileTypeMap().getContentType(file)`","body":"you can skip creating a new object by <code>MimetypesFileTypeMap.getDefaultFileTypeMap().getContentType(&zwnj;&#8203;file)</code>"},{"owner":{"account_id":1044212,"reputation":3002,"user_id":1049542,"accept_rate":36,"display_name":"Sergey Ponomarev"},"score":0,"creation_date":1549399217,"post_id":1902146,"comment_id":95886469,"body_markdown":"But it still return content type only based on the filename. And this is especially dangerous for files uploaded by users.","body":"But it still return content type only based on the filename. And this is especially dangerous for files uploaded by users."},{"owner":{"account_id":11653603,"reputation":2210,"user_id":8534088,"display_name":"Dmitriy Popov"},"score":1,"creation_date":1599739173,"post_id":1902146,"comment_id":112870426,"body_markdown":"This does not work, for example, for pdf files (`application/octet-stream` is returned).","body":"This does not work, for example, for pdf files (<code>application&#47;octet-stream</code> is returned)."}],"tags":[],"owner":{"account_id":52680,"reputation":804,"user_id":157423,"display_name":"Adam Hošek"},"comment_count":5,"down_vote_count":0,"up_vote_count":54,"is_accepted":false,"score":54,"last_activity_date":1260810170,"creation_date":1260810170,"answer_id":1902146,"question_id":51438,"body_markdown":"The JAF API is part of JDK 6. Look at `javax.activation` package.\r\n\r\nMost interesting classes are `javax.activation.MimeType` - an actual MIME type holder - and `javax.activation.MimetypesFileTypeMap` - class whose instance can resolve MIME type as String for a file:\r\n\r\n    String fileName = &quot;/path/to/file&quot;;\r\n    MimetypesFileTypeMap mimeTypesMap = new MimetypesFileTypeMap();\r\n\r\n    // only by file name\r\n    String mimeType = mimeTypesMap.getContentType(fileName);\r\n\r\n    // or by actual File instance\r\n    File file = new File(fileName);\r\n    mimeType = mimeTypesMap.getContentType(file);","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<p>The JAF API is part of JDK 6. Look at <code>javax.activation</code> package.</p>\n\n<p>Most interesting classes are <code>javax.activation.MimeType</code> - an actual MIME type holder - and <code>javax.activation.MimetypesFileTypeMap</code> - class whose instance can resolve MIME type as String for a file:</p>\n\n<pre><code>String fileName = \"/path/to/file\";\nMimetypesFileTypeMap mimeTypesMap = new MimetypesFileTypeMap();\n\n// only by file name\nString mimeType = mimeTypesMap.getContentType(fileName);\n\n// or by actual File instance\nFile file = new File(fileName);\nmimeType = mimeTypesMap.getContentType(file);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":193707,"reputation":34691,"user_id":435605,"accept_rate":45,"display_name":"AlikElzin-kilaka"},"score":7,"creation_date":1372077336,"post_id":6899179,"comment_id":25043653,"body_markdown":"Whoever down-voted the answer, please add a comment so I (and others) may learn to post better answers.","body":"Whoever down-voted the answer, please add a comment so I (and others) may learn to post better answers."},{"owner":{"account_id":106792,"reputation":2784,"user_id":284314,"accept_rate":73,"display_name":"Ovidiu Buligan"},"score":3,"creation_date":1378391984,"post_id":6899179,"comment_id":27442076,"body_markdown":"I didn&#39;t vote you down but , getFileNameMap doesn&#39;t work for many basic file types , for example &#39;bmp&#39; . Also URLConnection.guessContentTypeFromName returns the same thing","body":"I didn&#39;t vote you down but , getFileNameMap doesn&#39;t work for many basic file types , for example &#39;bmp&#39; . Also URLConnection.guessContentTypeFromName returns the same thing"},{"owner":{"account_id":356975,"reputation":2590,"user_id":696836,"accept_rate":56,"display_name":"djsumdog"},"score":5,"creation_date":1398763830,"post_id":6899179,"comment_id":35779176,"body_markdown":"Very incomplete function. As of Java 7, html, pdf and jpeg extensions return the correct mime-type but js and css return null!","body":"Very incomplete function. As of Java 7, html, pdf and jpeg extensions return the correct mime-type but js and css return null!"},{"owner":{"account_id":917116,"reputation":411,"user_id":949682,"accept_rate":67,"display_name":"Henrique Rocha"},"score":0,"creation_date":1471876945,"post_id":6899179,"comment_id":65512651,"body_markdown":"I tested with &#39;webm&#39; and it returned null.","body":"I tested with &#39;webm&#39; and it returned null."},{"owner":{"account_id":540190,"reputation":957,"user_id":908316,"display_name":"Freddie"},"score":0,"creation_date":1695372430,"post_id":6899179,"comment_id":136018407,"body_markdown":"To clarify, Files.probeContentType(Path.of(&quot;my-file.css&quot;)) is a much better way to handle (I tested in java11) as it supports more file types.","body":"To clarify, Files.probeContentType(Path.of(&quot;my-file.css&quot;)) is a much better way to handle (I tested in java11) as it supports more file types."}],"tags":[],"owner":{"account_id":193707,"reputation":34691,"user_id":435605,"accept_rate":45,"display_name":"AlikElzin-kilaka"},"comment_count":5,"down_vote_count":3,"up_vote_count":22,"is_accepted":false,"score":19,"last_activity_date":1312205699,"creation_date":1312205699,"answer_id":6899179,"question_id":51438,"body_markdown":"From [roseindia][1]:\r\n\r\n    FileNameMap fileNameMap = URLConnection.getFileNameMap();\r\n    String mimeType = fileNameMap.getContentTypeFor(&quot;alert.gif&quot;);\r\n\r\n  [1]: http://www.roseindia.net/java/java-get-example/get-mime-type.shtml\r\n","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<p>From <a href=\"http://www.roseindia.net/java/java-get-example/get-mime-type.shtml\">roseindia</a>:</p>\n\n<pre><code>FileNameMap fileNameMap = URLConnection.getFileNameMap();\nString mimeType = fileNameMap.getContentTypeFor(\"alert.gif\");\n</code></pre>\n"},{"comments":[{"owner":{"account_id":118925,"reputation":5299,"user_id":310297,"accept_rate":97,"display_name":"Jazzepi"},"score":0,"creation_date":1342558114,"post_id":8973468,"comment_id":15243202,"body_markdown":"This was very helpful since the mime-util website appears to be down and I can&#39;t tell if the library is being maintained at all!","body":"This was very helpful since the mime-util website appears to be down and I can&#39;t tell if the library is being maintained at all!"},{"owner":{"account_id":1614893,"reputation":4452,"user_id":1492861,"accept_rate":93,"display_name":"ldam"},"score":0,"creation_date":1355828414,"post_id":8973468,"comment_id":19207085,"body_markdown":"This works well, however I have not found a way to add more file types that I understand. For example an ISO image returns null, as does a .zip archive and even an ini configuration file.","body":"This works well, however I have not found a way to add more file types that I understand. For example an ISO image returns null, as does a .zip archive and even an ini configuration file."},{"owner":{"account_id":214247,"reputation":6689,"user_id":468112,"accept_rate":89,"display_name":"Chris Mowforth"},"score":0,"creation_date":1374882566,"post_id":8973468,"comment_id":26132382,"body_markdown":"@james.garriss and it&#39;s earned me more points than any other answer I&#39;ve ever given! Crazy, huh? :)","body":"@james.garriss and it&#39;s earned me more points than any other answer I&#39;ve ever given! Crazy, huh? :)"},{"owner":{"account_id":2151671,"reputation":1085,"user_id":1907891,"accept_rate":56,"display_name":"Silver"},"score":74,"creation_date":1385065916,"post_id":8973468,"comment_id":30001895,"body_markdown":"Be aware that Files.probeContentType(Path) is buggy on several OSes and a lot of bug reports have been filed. I have had a problem with software working on ubuntu but failing on windows. It seemed that on windows Files.probeContentType(Path) always returned null. It was not my system so I didn&#39;t check the JRE or windows version. It was windows 7 or 8 probably with oracle JRE for java 7.","body":"Be aware that Files.probeContentType(Path) is buggy on several OSes and a lot of bug reports have been filed. I have had a problem with software working on ubuntu but failing on windows. It seemed that on windows Files.probeContentType(Path) always returned null. It was not my system so I didn&#39;t check the JRE or windows version. It was windows 7 or 8 probably with oracle JRE for java 7."},{"owner":{"display_name":"user372743"},"score":21,"creation_date":1393513182,"post_id":8973468,"comment_id":33471565,"body_markdown":"I&#39;m running on OS X 10.9 and I get `null` out for `.xml`, `.png`, and `.xhtml` files. I don&#39;t know if I&#39;m just doing something horribly wrong, but that seems rather terrible.","body":"I&#39;m running on OS X 10.9 and I get <code>null</code> out for <code>.xml</code>, <code>.png</code>, and <code>.xhtml</code> files. I don&#39;t know if I&#39;m just doing something horribly wrong, but that seems rather terrible."},{"owner":{"account_id":961675,"reputation":4991,"user_id":985906,"accept_rate":93,"display_name":"JoshDM"},"score":1,"creation_date":1411497748,"post_id":8973468,"comment_id":40722196,"body_markdown":"I have not been able to get this to work successfully if the file does not have an extension.","body":"I have not been able to get this to work successfully if the file does not have an extension."},{"owner":{"account_id":41061,"reputation":727,"user_id":119259,"accept_rate":80,"display_name":"Thomas Jung"},"score":0,"creation_date":1424538776,"post_id":8973468,"comment_id":45594769,"body_markdown":"It appears that at least on *nix-like systems, the default file type detector just returns null and one has to manually add one or more detector implementations, which doesn&#39;t appear to be all too straight-forward. So at least for the use case I had, which is a simple method to map a file extension to a mime type, this solution does not work.","body":"It appears that at least on *nix-like systems, the default file type detector just returns null and one has to manually add one or more detector implementations, which doesn&#39;t appear to be all too straight-forward. So at least for the use case I had, which is a simple method to map a file extension to a mime type, this solution does not work."},{"owner":{"account_id":5785597,"reputation":9456,"user_id":4564945,"display_name":"Necreaux"},"score":46,"creation_date":1427825160,"post_id":8973468,"comment_id":46931271,"body_markdown":"A major limitation with this is that the file must exist on the file system. This does not work with a stream or a byte array, etc.","body":"A major limitation with this is that the file must exist on the file system. This does not work with a stream or a byte array, etc."},{"owner":{"account_id":1372373,"reputation":3200,"user_id":1307108,"accept_rate":40,"display_name":"Groostav"},"score":0,"creation_date":1435966114,"post_id":8973468,"comment_id":50431570,"body_markdown":"Even weirder, I&#39;ve got two windows 8.1 laptops, one of which gets `application/x-zip-compressed` and the other gets `null` as a result of calling this on a zip file. Completely unreliable :\\. So, given that I want my application to switch on the encoding scheme of a file (lets say my application takes both XML and JSON configuration), and the file is simply called &#39;configuration&#39; (without an extension), whats the most reliable way to determine the type of that file, sort of cheating and reading a few bytes?","body":"Even weirder, I&#39;ve got two windows 8.1 laptops, one of which gets <code>application&#47;x-zip-compressed</code> and the other gets <code>null</code> as a result of calling this on a zip file. Completely unreliable :\\. So, given that I want my application to switch on the encoding scheme of a file (lets say my application takes both XML and JSON configuration), and the file is simply called &#39;configuration&#39; (without an extension), whats the most reliable way to determine the type of that file, sort of cheating and reading a few bytes?"},{"owner":{"account_id":2255489,"reputation":1281,"user_id":1986767,"accept_rate":47,"display_name":"Sarkhan"},"score":4,"creation_date":1465067318,"post_id":8973468,"comment_id":62749764,"body_markdown":"this method can not return mime type when i remove extension from the name.For exmaple if name is test.mp4 i change it into &quot;test&quot; and method returns null.Also i change movie extension to png etc it returns png mime type","body":"this method can not return mime type when i remove extension from the name.For exmaple if name is test.mp4 i change it into &quot;test&quot; and method returns null.Also i change movie extension to png etc it returns png mime type"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":13,"creation_date":1468620684,"post_id":8973468,"comment_id":64219880,"body_markdown":"This is useless if the file has a missing or wrong extension.","body":"This is useless if the file has a missing or wrong extension."},{"owner":{"account_id":136322,"reputation":18453,"user_id":339736,"accept_rate":83,"display_name":"Russ Bateman"},"score":1,"creation_date":1468946046,"post_id":8973468,"comment_id":64331979,"body_markdown":"The Linux-based implementation appears to use Linux /usr/bin/file, which is good, unless there&#39;s an extension, which it just believes without looking deeper, which is bad. If you rename an XML file to .json, this will tell you it&#39;s JSON. Garbage in, garbage out. You just don&#39;t really want to trust this approach unless you&#39;re sure of your file data.","body":"The Linux-based implementation appears to use Linux /usr/bin/file, which is good, unless there&#39;s an extension, which it just believes without looking deeper, which is bad. If you rename an XML file to .json, this will tell you it&#39;s JSON. Garbage in, garbage out. You just don&#39;t really want to trust this approach unless you&#39;re sure of your file data."},{"owner":{"account_id":323574,"reputation":3424,"user_id":643675,"accept_rate":69,"display_name":"elhefe"},"score":0,"creation_date":1486064103,"post_id":8973468,"comment_id":71197090,"body_markdown":"@RussBateman `unless there&#39;s an extension, which it just believes without looking deeper, which is bad.` Do nginx/apache etc. do more than just look at the extension?","body":"@RussBateman <code>unless there&#39;s an extension, which it just believes without looking deeper, which is bad.</code> Do nginx/apache etc. do more than just look at the extension?"},{"owner":{"account_id":216960,"reputation":121,"user_id":472509,"display_name":"romulusnr"},"score":1,"creation_date":1585080939,"post_id":8973468,"comment_id":107639345,"body_markdown":"This method is poor, it goes off extension, doesn&#39;t bother with magic number, and returns null on different systems... even with same OS. Was fooled into using it and cannot recommend. You may as well just compare the file extension.","body":"This method is poor, it goes off extension, doesn&#39;t bother with magic number, and returns null on different systems... even with same OS. Was fooled into using it and cannot recommend. You may as well just compare the file extension."},{"owner":{"account_id":1326683,"reputation":2390,"user_id":1271359,"display_name":"Holger Ludvigsen"},"score":0,"creation_date":1602673745,"post_id":8973468,"comment_id":113793526,"body_markdown":"And to get the `Path` from a `String`, use `Paths.get(str)`","body":"And to get the <code>Path</code> from a <code>String</code>, use <code>Paths.get(str)</code>"},{"owner":{"account_id":3377351,"reputation":66,"user_id":2835247,"display_name":"And-y"},"score":0,"creation_date":1614830728,"post_id":8973468,"comment_id":117506492,"body_markdown":"On the Windows it uses only extensions to determine file type. On the Linux, until Java 8, it had used bunch of detectors: content-based detectors based on Gnome I/O, Gnome VFS and libmagic libraries as well as extension-based, implemented over `/etc/mime.types`. \nBut starting from Java9 all content-based detectors were removed from JDK ([1](https://bugs.openjdk.java.net/browse/JDK-8129633) [2](https://bugs.openjdk.java.net/browse/JDK-8162624)) and only extension-based detectors were left for Linux. So if your file does not have an extension, this method will always return `null` :(","body":"On the Windows it uses only extensions to determine file type. On the Linux, until Java 8, it had used bunch of detectors: content-based detectors based on Gnome I/O, Gnome VFS and libmagic libraries as well as extension-based, implemented over <code>&#47;etc&#47;mime.types</code>.  But starting from Java9 all content-based detectors were removed from JDK (<a href=\"https://bugs.openjdk.java.net/browse/JDK-8129633\" rel=\"nofollow noreferrer\">1</a> <a href=\"https://bugs.openjdk.java.net/browse/JDK-8162624\" rel=\"nofollow noreferrer\">2</a>) and only extension-based detectors were left for Linux. So if your file does not have an extension, this method will always return <code>null</code> :("},{"owner":{"account_id":968058,"reputation":983,"user_id":991131,"display_name":"Sutra"},"score":0,"creation_date":1627734309,"post_id":8973468,"comment_id":121238450,"body_markdown":"The default implementation in JDK is probe by file extension name, add https://github.com/overview/mime-types as dependency, it will use it by SPI, then probes by the magic number.","body":"The default implementation in JDK is probe by file extension name, add <a href=\"https://github.com/overview/mime-types\" rel=\"nofollow noreferrer\">github.com/overview/mime-types</a> as dependency, it will use it by SPI, then probes by the magic number."}],"tags":[],"owner":{"account_id":214247,"reputation":6689,"user_id":468112,"accept_rate":89,"display_name":"Chris Mowforth"},"comment_count":17,"down_vote_count":10,"up_vote_count":361,"is_accepted":true,"score":351,"last_activity_date":1374882592,"creation_date":1327330163,"answer_id":8973468,"question_id":51438,"body_markdown":"In Java 7 you can now just use [`Files.probeContentType(path)`][1].\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#probeContentType%28java.nio.file.Path%29","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<p>In Java 7 you can now just use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#probeContentType%28java.nio.file.Path%29\" rel=\"noreferrer\"><code>Files.probeContentType(path)</code></a>.</p>\n"},{"comments":[{"owner":{"account_id":114904,"reputation":808,"user_id":301955,"accept_rate":56,"display_name":"Brian Pipa"},"score":5,"creation_date":1355251529,"post_id":12534954,"comment_id":19027026,"body_markdown":"I had no success at all with MimeUtil2 - almost everything came back as application/octet-stream. I used MimeUtil.getMimeTypes() with much more success after initializing with `     MimeUtil.registerMimeDetector(&quot;eu.medsea.mimeutil.detector.MagicMimeMimeDetector&quot;);\n        MimeUtil.registerMimeDetector(&quot;eu.medsea.mimeutil.detector.ExtensionMimeDetector&quot;);\n        MimeUtil.registerMimeDetector(&quot;eu.medsea.mimeutil.detector.OpendesktopMimeDetector&quot;); `","body":"I had no success at all with MimeUtil2 - almost everything came back as application/octet-stream. I used MimeUtil.getMimeTypes() with much more success after initializing with `     MimeUtil.registerMimeDetector(&quot;eu.medsea.mimeutil.detector.M&zwnj;&#8203;agicMimeMimeDetector&zwnj;&#8203;&quot;);         MimeUtil.registerMimeDetector(&quot;eu.medsea.mimeutil.detector.E&zwnj;&#8203;xtensionMimeDetector&zwnj;&#8203;&quot;);         MimeUtil.registerMimeDetector(&quot;eu.medsea.mimeutil.detector.O&zwnj;&#8203;pendesktopMimeDetect&zwnj;&#8203;or&quot;); `"},{"owner":{"account_id":227071,"reputation":4683,"user_id":488514,"display_name":"Rob Juurlink"},"score":2,"creation_date":1359671300,"post_id":12534954,"comment_id":20446380,"body_markdown":"Thanks for the working solution. The documentation of mime-util is not very clear about how to instantiate the utility class. Finally got it up and running, but replaced the classname string with the actual class.\n\nMimeUtil.registerMimeDetector(ExtensionMimeDetector.class.getName());\nString mimeType = MimeUtil.getMostSpecificMimeType(MimeUtil.getMimeTypes(filename)).toString();","body":"Thanks for the working solution. The documentation of mime-util is not very clear about how to instantiate the utility class. Finally got it up and running, but replaced the classname string with the actual class.  MimeUtil.registerMimeDetector(ExtensionMimeDetector.class.ge&zwnj;&#8203;tName()); String mimeType = MimeUtil.getMostSpecificMimeType(MimeUtil.getMimeTypes(filen&zwnj;&#8203;ame)).toString();"}],"tags":[],"owner":{"account_id":1142875,"reputation":131,"user_id":1126309,"accept_rate":12,"display_name":"ricardoc"},"comment_count":2,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1487116571,"creation_date":1348247031,"answer_id":12534954,"question_id":51438,"body_markdown":"I tried several ways to do it, including the first ones said by @Joshua Fox. But some don&#39;t recognize frequent mimetypes like for PDF files, and other could not be trustable with fake files (I tried with a RAR file with extension changed to TIF). The solution I found, as also is said by @Joshua Fox in a superficial way, is to use [MimeUtil2][1], like this:\r\n\r\n    MimeUtil2 mimeUtil = new MimeUtil2();\r\n    mimeUtil.registerMimeDetector(&quot;eu.medsea.mimeutil.detector.MagicMimeMimeDetector&quot;);\r\n    String mimeType = MimeUtil2.getMostSpecificMimeType(mimeUtil.getMimeTypes(file)).toString();\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/eu.medsea.mimeutil/mime-util/2.1.2","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<p>I tried several ways to do it, including the first ones said by @Joshua Fox. But some don't recognize frequent mimetypes like for PDF files, and other could not be trustable with fake files (I tried with a RAR file with extension changed to TIF). The solution I found, as also is said by @Joshua Fox in a superficial way, is to use <a href=\"https://mvnrepository.com/artifact/eu.medsea.mimeutil/mime-util/2.1.2\" rel=\"nofollow noreferrer\">MimeUtil2</a>, like this:</p>\n\n<pre><code>MimeUtil2 mimeUtil = new MimeUtil2();\nmimeUtil.registerMimeDetector(\"eu.medsea.mimeutil.detector.MagicMimeMimeDetector\");\nString mimeType = MimeUtil2.getMostSpecificMimeType(mimeUtil.getMimeTypes(file)).toString();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3307208,"reputation":1506,"user_id":2781649,"accept_rate":35,"display_name":"nmxprime"},"score":3,"creation_date":1451538680,"post_id":13889946,"comment_id":56824702,"body_markdown":"This is also works if tried with local file paths such as &quot;/sdcard/path/to/video.extension&quot;. The problem is if the local file contains space in its path, it always returns null","body":"This is also works if tried with local file paths such as &quot;/sdcard/path/to/video.extension&quot;. The problem is if the local file contains space in its path, it always returns null"}],"tags":[],"owner":{"account_id":1447316,"reputation":1213,"user_id":1365340,"accept_rate":40,"display_name":"Pawan"},"comment_count":1,"down_vote_count":1,"up_vote_count":27,"is_accepted":false,"score":26,"last_activity_date":1355552619,"creation_date":1355552619,"answer_id":13889946,"question_id":51438,"body_markdown":"If you&#39;re an Android developer, you can use a utility class `android.webkit.MimeTypeMap` which maps MIME-types to file extensions and vice versa. &lt;p&gt; Following code snippet may help you.\r\n\r\n\tprivate static String getMimeType(String fileUrl) {\r\n\t\tString extension = MimeTypeMap.getFileExtensionFromUrl(fileUrl);\r\n\t\treturn MimeTypeMap.getSingleton().getMimeTypeFromExtension(extension);\r\n\t}","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<p>If you're an Android developer, you can use a utility class <code>android.webkit.MimeTypeMap</code> which maps MIME-types to file extensions and vice versa. <p> Following code snippet may help you.</p>\n\n<pre><code>private static String getMimeType(String fileUrl) {\n    String extension = MimeTypeMap.getFileExtensionFromUrl(fileUrl);\n    return MimeTypeMap.getSingleton().getMimeTypeFromExtension(extension);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1645220,"reputation":5070,"user_id":1516873,"display_name":"user1516873"},"score":1,"creation_date":1492438805,"post_id":16626396,"comment_id":73961873,"body_markdown":"+1  Also `Metadata.RESOURCE_NAME_KEY` can be omitted (if you don&#39;t have any or cannot rely on original name), but in that case you will get wrong result in some cases (office documents for example).","body":"+1  Also <code>Metadata.RESOURCE_NAME_KEY</code> can be omitted (if you don&#39;t have any or cannot rely on original name), but in that case you will get wrong result in some cases (office documents for example)."},{"owner":{"account_id":2204848,"reputation":4377,"user_id":1948325,"accept_rate":43,"display_name":"Oscar P&#233;rez"},"score":1,"creation_date":1515070037,"post_id":16626396,"comment_id":83165861,"body_markdown":"It has some problems detecting XLSX if there&#39;s no extension on filename... but this solution is simple and elegant.","body":"It has some problems detecting XLSX if there&#39;s no extension on filename... but this solution is simple and elegant."}],"tags":[],"owner":{"account_id":467725,"reputation":19389,"user_id":873282,"accept_rate":55,"display_name":"koppor"},"comment_count":2,"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1605272199,"creation_date":1368893694,"answer_id":16626396,"question_id":51438,"body_markdown":"[Apache Tika](https://tika.apache.org/) offers in [tika-core](https://search.maven.org/artifact/org.apache.tika/tika-core) a mime type detection based based on magic markers in the stream prefix. `tika-core` does not fetch other dependencies, which makes it as lightweight as the currently unmaintained [Mime Type Detection Utility](http://sourceforge.net/projects/mime-util/).\r\n\r\nSimple code example (Java 7), using the variables `theInputStream` and `theFileName`\r\n\r\n    try (InputStream is = theInputStream;\r\n            BufferedInputStream bis = new BufferedInputStream(is);) {\r\n        AutoDetectParser parser = new AutoDetectParser();\r\n        Detector detector = parser.getDetector();\r\n        Metadata md = new Metadata();\r\n        md.add(Metadata.RESOURCE_NAME_KEY, theFileName);\r\n        MediaType mediaType = detector.detect(bis, md);\r\n        return mediaType.toString();\r\n    }\r\n\r\nPlease note that `MediaType.detect(...)` cannot be used directly ([TIKA-1120](https://issues.apache.org/jira/browse/TIKA-1120)). More hints are provided at &lt;https://tika.apache.org/1.24/detection.html&gt;.\r\n","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<p><a href=\"https://tika.apache.org/\" rel=\"noreferrer\">Apache Tika</a> offers in <a href=\"https://search.maven.org/artifact/org.apache.tika/tika-core\" rel=\"noreferrer\">tika-core</a> a mime type detection based based on magic markers in the stream prefix. <code>tika-core</code> does not fetch other dependencies, which makes it as lightweight as the currently unmaintained <a href=\"http://sourceforge.net/projects/mime-util/\" rel=\"noreferrer\">Mime Type Detection Utility</a>.</p>\n<p>Simple code example (Java 7), using the variables <code>theInputStream</code> and <code>theFileName</code></p>\n<pre><code>try (InputStream is = theInputStream;\n        BufferedInputStream bis = new BufferedInputStream(is);) {\n    AutoDetectParser parser = new AutoDetectParser();\n    Detector detector = parser.getDetector();\n    Metadata md = new Metadata();\n    md.add(Metadata.RESOURCE_NAME_KEY, theFileName);\n    MediaType mediaType = detector.detect(bis, md);\n    return mediaType.toString();\n}\n</code></pre>\n<p>Please note that <code>MediaType.detect(...)</code> cannot be used directly (<a href=\"https://issues.apache.org/jira/browse/TIKA-1120\" rel=\"noreferrer\">TIKA-1120</a>). More hints are provided at <a href=\"https://tika.apache.org/1.24/detection.html\" rel=\"noreferrer\">https://tika.apache.org/1.24/detection.html</a>.</p>\n"},{"comments":[{"owner":{"account_id":2108977,"reputation":4151,"user_id":1874627,"display_name":"saurabheights"},"score":2,"creation_date":1471011735,"post_id":17302243,"comment_id":65197292,"body_markdown":"Tested it on multiple image files. All had extension renamed. Your awesome library handled it properly. Ofcourse its light too :).","body":"Tested it on multiple image files. All had extension renamed. Your awesome library handled it properly. Ofcourse its light too :)."},{"owner":{"account_id":5410217,"reputation":995,"user_id":4307281,"display_name":"jkincali"},"score":1,"creation_date":1487596328,"post_id":17302243,"comment_id":71842171,"body_markdown":"Yes, this works well.  And for those needing to use this solution within Android, you can simply include the following in the build.gradle file: compile(&#39;com.j256.simplemagic:simplemagic:1.10&#39;)","body":"Yes, this works well.  And for those needing to use this solution within Android, you can simply include the following in the build.gradle file: compile(&#39;com.j256.simplemagic:simplemagic:1.10&#39;)"},{"owner":{"account_id":6648924,"reputation":75,"user_id":5131843,"display_name":"keivan shirkoubian"},"score":0,"creation_date":1659155738,"post_id":17302243,"comment_id":129231481,"body_markdown":"This library works with all files. better than all other libraries since it works for documents such as PDF, XLS, XLSX, DOC and DOCX. it doesn&#39;t work for XLS properly but you can check it from other methods of `ContentInfo` like `getMessage()`","body":"This library works with all files. better than all other libraries since it works for documents such as PDF, XLS, XLSX, DOC and DOCX. it doesn&#39;t work for XLS properly but you can check it from other methods of <code>ContentInfo</code> like <code>getMessage()</code>"},{"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"score":0,"creation_date":1659222313,"post_id":17302243,"comment_id":129243729,"body_markdown":"Can you file an issue with it @keivanshirkoubian with a sample xls that isn&#39;t done correctly?  https://github.com/j256/simplemagic/issues","body":"Can you file an issue with it @keivanshirkoubian with a sample xls that isn&#39;t done correctly?  <a href=\"https://github.com/j256/simplemagic/issues\" rel=\"nofollow noreferrer\">github.com/j256/simplemagic/issues</a>"},{"owner":{"account_id":6648924,"reputation":75,"user_id":5131843,"display_name":"keivan shirkoubian"},"score":0,"creation_date":1659249487,"post_id":17302243,"comment_id":129246415,"body_markdown":"ok I will do it @Gray when I have time.","body":"ok I will do it @Gray when I have time."},{"owner":{"account_id":6648924,"reputation":75,"user_id":5131843,"display_name":"keivan shirkoubian"},"score":1,"creation_date":1659429729,"post_id":17302243,"comment_id":129286861,"body_markdown":"@Gray I&#39;ve sent an issue in your repository about the old excel files.\n[issue link](https://github.com/j256/simplemagic/issues/85)","body":"@Gray I&#39;ve sent an issue in your repository about the old excel files. <a href=\"https://github.com/j256/simplemagic/issues/85\" rel=\"nofollow noreferrer\">issue link</a>"}],"tags":[],"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"comment_count":6,"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1496180281,"creation_date":1372176462,"answer_id":17302243,"question_id":51438,"body_markdown":"&gt; I was just wondering how most people fetch a mime type from a file in Java? \r\n\r\nI&#39;ve published my [SimpleMagic][1] Java package which allows content-type (mime-type) determination from files and byte arrays. It is designed to read and run the Unix file(1) command magic files that are a part of most ~Unix OS configurations.\r\n\r\nI tried Apache Tika but it is _huge_ with tons of dependencies, `URLConnection` doesn&#39;t use the bytes of the files, and `MimetypesFileTypeMap` also just looks at files names.\r\n\r\nWith SimpleMagic you can do something like:\r\n\r\n    // create a magic utility using the internal magic file\r\n    ContentInfoUtil util = new ContentInfoUtil();\r\n    // if you want to use a different config file(s), you can load them by hand:\r\n    // ContentInfoUtil util = new ContentInfoUtil(&quot;/etc/magic&quot;);\r\n    ...\r\n    ContentInfo info = util.findMatch(&quot;/tmp/upload.tmp&quot;);\r\n    // or\r\n    ContentInfo info = util.findMatch(inputStream);\r\n    // or\r\n    ContentInfo info = util.findMatch(contentByteArray);\r\n\r\n    // null if no match\r\n    if (info != null) {\r\n       String mimeType = info.getMimeType();\r\n    }\r\n\r\n  [1]: http://256stuff.com/sources/simplemagic/","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<blockquote>\n  <p>I was just wondering how most people fetch a mime type from a file in Java? </p>\n</blockquote>\n\n<p>I've published my <a href=\"http://256stuff.com/sources/simplemagic/\" rel=\"noreferrer\">SimpleMagic</a> Java package which allows content-type (mime-type) determination from files and byte arrays. It is designed to read and run the Unix file(1) command magic files that are a part of most ~Unix OS configurations.</p>\n\n<p>I tried Apache Tika but it is <em>huge</em> with tons of dependencies, <code>URLConnection</code> doesn't use the bytes of the files, and <code>MimetypesFileTypeMap</code> also just looks at files names.</p>\n\n<p>With SimpleMagic you can do something like:</p>\n\n<pre><code>// create a magic utility using the internal magic file\nContentInfoUtil util = new ContentInfoUtil();\n// if you want to use a different config file(s), you can load them by hand:\n// ContentInfoUtil util = new ContentInfoUtil(\"/etc/magic\");\n...\nContentInfo info = util.findMatch(\"/tmp/upload.tmp\");\n// or\nContentInfo info = util.findMatch(inputStream);\n// or\nContentInfo info = util.findMatch(contentByteArray);\n\n// null if no match\nif (info != null) {\n   String mimeType = info.getMimeType();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":106792,"reputation":2784,"user_id":284314,"accept_rate":73,"display_name":"Ovidiu Buligan"},"comment_count":0,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1542148890,"creation_date":1378394430,"answer_id":18640199,"question_id":51438,"body_markdown":"**If you are stuck with java 5-6** then this utility class from [servoy open source product][1].\r\n\r\nYou only need this function \r\n\r\n    public static String getContentType(byte[] data, String name)\r\n\r\nIt probes the first bytes of the content and returns the content types based on that content and not by file extension.\r\n\r\n  [1]: https://github.com/Servoy/servoy-client/blob/e7f5bce3c3dc0f0eb1cd240fce48c75143a25432/servoy_shared/src/com/servoy/j2db/util/MimeTypes.java#L34","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<p><strong>If you are stuck with java 5-6</strong> then this utility class from <a href=\"https://github.com/Servoy/servoy-client/blob/e7f5bce3c3dc0f0eb1cd240fce48c75143a25432/servoy_shared/src/com/servoy/j2db/util/MimeTypes.java#L34\" rel=\"nofollow noreferrer\">servoy open source product</a>.</p>\n\n<p>You only need this function </p>\n\n<pre><code>public static String getContentType(byte[] data, String name)\n</code></pre>\n\n<p>It probes the first bytes of the content and returns the content types based on that content and not by file extension.</p>\n"},{"tags":[],"owner":{"account_id":2389385,"reputation":968,"user_id":2089557,"accept_rate":100,"display_name":"javacreed"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1408440363,"creation_date":1408440363,"answer_id":25379881,"question_id":51438,"body_markdown":"It is better to use two layer validation for files upload. \r\n\r\nFirst you can check for the mimeType and validate it. \r\n\r\nSecond you should look to convert the first 4 bytes of your file to hexadecimal and then compare it with the magic numbers. Then it will be a really secure way to check for file validations.","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<p>It is better to use two layer validation for files upload. </p>\n\n<p>First you can check for the mimeType and validate it. </p>\n\n<p>Second you should look to convert the first 4 bytes of your file to hexadecimal and then compare it with the magic numbers. Then it will be a really secure way to check for file validations.</p>\n"},{"comments":[{"owner":{"account_id":1299767,"reputation":560,"user_id":1249938,"accept_rate":100,"display_name":"ToVine"},"score":4,"creation_date":1445190202,"post_id":27342079,"comment_id":54206957,"body_markdown":"This will work, but is IMO a bad practice as it ties your code to a specific OS and requires the external utility to be present at the system running it. Don&#39;t get me wrong; it&#39;s a fully valid solution, but breaks portability - which is one of the main reasons to use Java in the first place...","body":"This will work, but is IMO a bad practice as it ties your code to a specific OS and requires the external utility to be present at the system running it. Don&#39;t get me wrong; it&#39;s a fully valid solution, but breaks portability - which is one of the main reasons to use Java in the first place..."},{"owner":{"account_id":3331775,"reputation":1275,"user_id":2800562,"display_name":"EmpathicSage"},"score":0,"creation_date":1535313405,"post_id":27342079,"comment_id":91009956,"body_markdown":"@ToVine: For the record, I&#39;m going to respectfully disagree. Not every Java program is required to be portable. Let context and the programmer make that decision. https://en.wikipedia.org/wiki/Java_Native_Interface","body":"@ToVine: For the record, I&#39;m going to respectfully disagree. Not every Java program is required to be portable. Let context and the programmer make that decision. <a href=\"https://en.wikipedia.org/wiki/Java_Native_Interface\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Java_Native_Interface</a>"}],"tags":[],"owner":{"account_id":388570,"reputation":88666,"user_id":747579,"accept_rate":72,"display_name":"Abdennour TOUMI"},"comment_count":2,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1453631521,"creation_date":1417951068,"answer_id":27342079,"question_id":51438,"body_markdown":"if you work on linux OS ,there is a command line `file --mimetype`: \r\n\r\n\r\n\r\n    String mimetype(file){\r\n\r\n       //1. run cmd\r\n       Object cmd=Runtime.getRuntime().exec(&quot;file --mime-type &quot;+file);\r\n       \r\n       //2 get output of cmd , then \r\n        //3. parse mimetype\r\n        if(output){return output.split(&quot;:&quot;)[1].trim(); }\r\n        return &quot;&quot;;\r\n    }\r\n\r\nThen\r\n\r\n    mimetype(&quot;/home/nyapp.war&quot;) //  &#39;application/zip&#39;\r\n    \r\n    mimetype(&quot;/var/www/ggg/au.mp3&quot;) //  &#39;audio/mp3&#39;\r\n\r\n","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<p>if you work on linux OS ,there is a command line <code>file --mimetype</code>: </p>\n\n<pre><code>String mimetype(file){\n\n   //1. run cmd\n   Object cmd=Runtime.getRuntime().exec(\"file --mime-type \"+file);\n\n   //2 get output of cmd , then \n    //3. parse mimetype\n    if(output){return output.split(\":\")[1].trim(); }\n    return \"\";\n}\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>mimetype(\"/home/nyapp.war\") //  'application/zip'\n\nmimetype(\"/var/www/ggg/au.mp3\") //  'audio/mp3'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":954177,"reputation":785,"user_id":979765,"accept_rate":71,"display_name":"Ahmad R. Nazemi"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1461670393,"creation_date":1461670393,"answer_id":36863737,"question_id":51438,"body_markdown":"in spring **MultipartFile** file;\r\n\r\n&gt; org.springframework.web.multipart.MultipartFile\r\n\r\n  `file.getContentType();`","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<p>in spring <strong>MultipartFile</strong> file;</p>\n\n<blockquote>\n  <p>org.springframework.web.multipart.MultipartFile</p>\n</blockquote>\n\n<p><code>file.getContentType();</code></p>\n"},{"tags":[],"owner":{"account_id":393856,"reputation":11926,"user_id":755932,"accept_rate":67,"display_name":"K. Siva Prasad Reddy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1464266124,"creation_date":1464266124,"answer_id":37461034,"question_id":51438,"body_markdown":"After trying various other libraries I settled with mime-util.\r\n\r\n    &lt;groupId&gt;eu.medsea.mimeutil&lt;/groupId&gt;\r\n    \t  &lt;artifactId&gt;mime-util&lt;/artifactId&gt;\r\n    \t  &lt;version&gt;2.1.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    File file = new File(&quot;D:/test.tif&quot;);\r\n    MimeUtil.registerMimeDetector(&quot;eu.medsea.mimeutil.detector.MagicMimeMimeDetector&quot;);\r\n    Collection&lt;?&gt; mimeTypes = MimeUtil.getMimeTypes(file);\r\n    System.out.println(mimeTypes);","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<p>After trying various other libraries I settled with mime-util.</p>\n\n<pre><code>&lt;groupId&gt;eu.medsea.mimeutil&lt;/groupId&gt;\n      &lt;artifactId&gt;mime-util&lt;/artifactId&gt;\n      &lt;version&gt;2.1.3&lt;/version&gt;\n&lt;/dependency&gt;\n\nFile file = new File(\"D:/test.tif\");\nMimeUtil.registerMimeDetector(\"eu.medsea.mimeutil.detector.MagicMimeMimeDetector\");\nCollection&lt;?&gt; mimeTypes = MimeUtil.getMimeTypes(file);\nSystem.out.println(mimeTypes);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1560920,"reputation":958,"user_id":1450799,"display_name":"Reza Rahimi"},"score":0,"creation_date":1512041455,"post_id":40765798,"comment_id":82101716,"body_markdown":"This method Files.probeContentType(String) is available since JDK version 1.7 and it works very good for me.","body":"This method Files.probeContentType(String) is available since JDK version 1.7 and it works very good for me."}],"tags":[],"owner":{"account_id":4059905,"reputation":1265,"user_id":3541666,"accept_rate":0,"display_name":"Vazgen Torosyan"},"comment_count":1,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1479907578,"creation_date":1479907578,"answer_id":40765798,"question_id":51438,"body_markdown":"    public String getFileContentType(String fileName) {\r\n        String fileType = &quot;Undetermined&quot;;\r\n        final File file = new File(fileName);\r\n        try\r\n        {\r\n            fileType = Files.probeContentType(file.toPath());\r\n        }\r\n        catch (IOException ioException)\r\n        {\r\n            System.out.println(\r\n                    &quot;ERROR: Unable to determine file type for &quot; + fileName\r\n                            + &quot; due to exception &quot; + ioException);\r\n        }\r\n        return fileType;\r\n    }","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<pre><code>public String getFileContentType(String fileName) {\n    String fileType = \"Undetermined\";\n    final File file = new File(fileName);\n    try\n    {\n        fileType = Files.probeContentType(file.toPath());\n    }\n    catch (IOException ioException)\n    {\n        System.out.println(\n                \"ERROR: Unable to determine file type for \" + fileName\n                        + \" due to exception \" + ioException);\n    }\n    return fileType;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1932170,"reputation":9187,"user_id":1741343,"accept_rate":75,"display_name":"helmy"},"score":2,"creation_date":1511376503,"post_id":42229928,"comment_id":81838820,"body_markdown":"One bad thing about Tika, lots of dependency bloat. It increased the size of my jar by 54MB!!!","body":"One bad thing about Tika, lots of dependency bloat. It increased the size of my jar by 54MB!!!"},{"owner":{"account_id":6152216,"reputation":1284,"user_id":4796321,"accept_rate":100,"display_name":"Sainan"},"score":2,"creation_date":1516630878,"post_id":42229928,"comment_id":83754174,"body_markdown":"@helmyTika 1.17 is standalone and only 648 KB big.","body":"@helmyTika 1.17 is standalone and only 648 KB big."},{"owner":{"account_id":145555,"reputation":21469,"user_id":355438,"display_name":"Ilya Serbis"},"score":0,"creation_date":1528196365,"post_id":42229928,"comment_id":88405943,"body_markdown":"... or just `new Tika().detect(file.toPath())` for the file&#39;s extension based detection rather than detection based on the file&#39;s content","body":"... or just <code>new Tika().detect(file.toPath())</code> for the file&#39;s extension based detection rather than detection based on the file&#39;s content"},{"owner":{"account_id":5275077,"reputation":5463,"user_id":4212150,"accept_rate":58,"display_name":"delucasvb"},"score":0,"creation_date":1530268290,"post_id":42229928,"comment_id":89186673,"body_markdown":"@Lu55 docs say that still uses the document content. I think you mean `new Tika().detect(file.getPath())`, which only uses the file extension","body":"@Lu55 docs say that still uses the document content. I think you mean <code>new Tika().detect(file.getPath())</code>, which only uses the file extension"}],"tags":[],"owner":{"account_id":4065672,"reputation":15658,"user_id":3340702,"accept_rate":58,"display_name":"lifeisfoo"},"comment_count":4,"down_vote_count":0,"up_vote_count":67,"is_accepted":false,"score":67,"last_activity_date":1508150567,"creation_date":1487085860,"answer_id":42229928,"question_id":51438,"body_markdown":"With [Apache Tika](http://tika.apache.org) you need only **three lines of code**:\r\n\r\n\r\n    File file = new File(&quot;/path/to/file&quot;);\r\n    Tika tika = new Tika();\r\n    System.out.println(tika.detect(file));\r\n\r\n\r\nIf you have a groovy console, just paste and run this code to play with it:\r\n\r\n\r\n    @Grab(&#39;org.apache.tika:tika-core:1.14&#39;)\r\n    import org.apache.tika.Tika;\r\n\r\n    def tika = new Tika()\r\n    def file = new File(&quot;/path/to/file&quot;)\r\n    println tika.detect(file)\r\n\r\nKeep in mind that its APIs are rich, it can parse &quot;anything&quot;. As of tika-core 1.14, you have:\r\n\r\n    String \tdetect(byte[] prefix)\r\n    String \tdetect(byte[] prefix, String name)\r\n    String \tdetect(File file)\r\n    String \tdetect(InputStream stream)\r\n    String \tdetect(InputStream stream, Metadata metadata)\r\n    String \tdetect(InputStream stream, String name)\r\n    String \tdetect(Path path)\r\n    String \tdetect(String name)\r\n    String \tdetect(URL url)\r\n\r\nSee [the apidocs](http://tika.apache.org/1.14/api/) for more information.","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<p>With <a href=\"http://tika.apache.org\" rel=\"noreferrer\">Apache Tika</a> you need only <strong>three lines of code</strong>:</p>\n\n<pre><code>File file = new File(\"/path/to/file\");\nTika tika = new Tika();\nSystem.out.println(tika.detect(file));\n</code></pre>\n\n<p>If you have a groovy console, just paste and run this code to play with it:</p>\n\n<pre><code>@Grab('org.apache.tika:tika-core:1.14')\nimport org.apache.tika.Tika;\n\ndef tika = new Tika()\ndef file = new File(\"/path/to/file\")\nprintln tika.detect(file)\n</code></pre>\n\n<p>Keep in mind that its APIs are rich, it can parse \"anything\". As of tika-core 1.14, you have:</p>\n\n<pre><code>String  detect(byte[] prefix)\nString  detect(byte[] prefix, String name)\nString  detect(File file)\nString  detect(InputStream stream)\nString  detect(InputStream stream, Metadata metadata)\nString  detect(InputStream stream, String name)\nString  detect(Path path)\nString  detect(String name)\nString  detect(URL url)\n</code></pre>\n\n<p>See <a href=\"http://tika.apache.org/1.14/api/\" rel=\"noreferrer\">the apidocs</a> for more information.</p>\n"},{"tags":[],"owner":{"account_id":3778003,"reputation":6793,"user_id":3138238,"accept_rate":74,"display_name":"madx"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1487859401,"creation_date":1487859401,"answer_id":42418284,"question_id":51438,"body_markdown":"This is the simplest way I found for doing this:\r\n\r\n    byte[] byteArray = ...\r\n    InputStream is = new BufferedInputStream(new ByteArrayInputStream(byteArray));\r\n    String mimeType = URLConnection.guessContentTypeFromStream(is);","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<p>This is the simplest way I found for doing this:</p>\n\n<pre><code>byte[] byteArray = ...\nInputStream is = new BufferedInputStream(new ByteArrayInputStream(byteArray));\nString mimeType = URLConnection.guessContentTypeFromStream(is);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2620418,"reputation":3788,"user_id":2268559,"display_name":"nidalpres"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1506348208,"creation_date":1506348208,"answer_id":46407125,"question_id":51438,"body_markdown":"To chip in with my 5 cents:\r\n\r\n**TL,DR**\r\n\r\nI use [MimetypesFileTypeMap][1] and add any mime that is not there and I specifically need it, into mime.types file.\r\n\r\n*And now, the long read:*\r\n\r\nFirst of all, MIME types list is *huge*, see here: https://www.iana.org/assignments/media-types/media-types.xhtml\r\n\r\nI like to use standard facilities provided by JDK first, and if that doesn&#39;t work, I&#39;ll go and look for something else.\r\n\r\n**Determine file type from file extension**\r\n\r\nSince 1.6, Java has MimetypesFileTypeMap, as pointed in one of the answers above, and it is the simplest way to determine mime type:\r\n\r\n    new MimetypesFileTypeMap().getContentType( fileName );\r\n\r\nIn its vanilla implementation this does not do much (i.e. it works for .html but it doesn&#39;t for .png). It is, however, super simple to add any content type you may need:\r\n\r\n 1. Create file named &#39;mime.types&#39; in META-INF folder in your project\r\n 2. Add a line for every mime type you need and default implementation doesn&#39;t provide (there are hundreds of mime types and list grows as time goes by).\r\n\r\nExample entries for png and js files would be:\r\n\r\n    image/png png PNG\r\n    application/javascript js\r\n\r\nFor mime.types file format, see more details here: https://docs.oracle.com/javase/7/docs/api/javax/activation/MimetypesFileTypeMap.html\r\n\r\n**Determine file type from file content**\r\n\r\nSince 1.7, Java has [java.nio.file.spi.FileTypeDetector][2], which defines a standard API for determining a file type in *implementation specific way*.\r\n\r\nTo fetch mime type for a file, you would simply use [Files][3] and do this in your code:\r\n\r\n    Files.probeContentType(Paths.get(&quot;either file name or full path goes here&quot;));\r\n\r\nThe API definition provides for facilities that support either for determining file mime type from file name or from file content (magic bytes). That is why [probeContentType()][4] method throws IOException, in case an implementation of this API uses Path provided to it to actually try to open the file associated with it.\r\n\r\nAgain, vanilla *implementation* of this (the one that comes with JDK) leaves a lot to be desired.\r\n\r\nIn some ideal world in a galaxy far, far away, all these libraries which try to solve this file-to-mime-type problem would simply implement [java.nio.file.spi.FileTypeDetector][2], you would drop in the preferred implementing library&#39;s jar file into your classpath and that would be it.\r\n\r\nIn the real world, the one where you need TL,DR section, you should find the library with most stars next to it&#39;s name and use it. For this particular case, I don&#39;t need one (yet ;) ).\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/javax/activation/MimetypesFileTypeMap.html\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/nio/file/spi/FileTypeDetector.html\r\n  [3]: http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#probeContentType(java.nio.file.Path)\r\n  [4]: http://docs.oracle.com/javase/7/docs/api/java/nio/file/spi/FileTypeDetector.html#probeContentType(java.nio.file.Path)","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<p>To chip in with my 5 cents:</p>\n\n<p><strong>TL,DR</strong></p>\n\n<p>I use <a href=\"https://docs.oracle.com/javase/7/docs/api/javax/activation/MimetypesFileTypeMap.html\" rel=\"noreferrer\">MimetypesFileTypeMap</a> and add any mime that is not there and I specifically need it, into mime.types file.</p>\n\n<p><em>And now, the long read:</em></p>\n\n<p>First of all, MIME types list is <em>huge</em>, see here: <a href=\"https://www.iana.org/assignments/media-types/media-types.xhtml\" rel=\"noreferrer\">https://www.iana.org/assignments/media-types/media-types.xhtml</a></p>\n\n<p>I like to use standard facilities provided by JDK first, and if that doesn't work, I'll go and look for something else.</p>\n\n<p><strong>Determine file type from file extension</strong></p>\n\n<p>Since 1.6, Java has MimetypesFileTypeMap, as pointed in one of the answers above, and it is the simplest way to determine mime type:</p>\n\n<pre><code>new MimetypesFileTypeMap().getContentType( fileName );\n</code></pre>\n\n<p>In its vanilla implementation this does not do much (i.e. it works for .html but it doesn't for .png). It is, however, super simple to add any content type you may need:</p>\n\n<ol>\n<li>Create file named 'mime.types' in META-INF folder in your project</li>\n<li>Add a line for every mime type you need and default implementation doesn't provide (there are hundreds of mime types and list grows as time goes by).</li>\n</ol>\n\n<p>Example entries for png and js files would be:</p>\n\n<pre><code>image/png png PNG\napplication/javascript js\n</code></pre>\n\n<p>For mime.types file format, see more details here: <a href=\"https://docs.oracle.com/javase/7/docs/api/javax/activation/MimetypesFileTypeMap.html\" rel=\"noreferrer\">https://docs.oracle.com/javase/7/docs/api/javax/activation/MimetypesFileTypeMap.html</a></p>\n\n<p><strong>Determine file type from file content</strong></p>\n\n<p>Since 1.7, Java has <a href=\"http://docs.oracle.com/javase/7/docs/api/java/nio/file/spi/FileTypeDetector.html\" rel=\"noreferrer\">java.nio.file.spi.FileTypeDetector</a>, which defines a standard API for determining a file type in <em>implementation specific way</em>.</p>\n\n<p>To fetch mime type for a file, you would simply use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#probeContentType(java.nio.file.Path)\" rel=\"noreferrer\">Files</a> and do this in your code:</p>\n\n<pre><code>Files.probeContentType(Paths.get(\"either file name or full path goes here\"));\n</code></pre>\n\n<p>The API definition provides for facilities that support either for determining file mime type from file name or from file content (magic bytes). That is why <a href=\"http://docs.oracle.com/javase/7/docs/api/java/nio/file/spi/FileTypeDetector.html#probeContentType(java.nio.file.Path)\" rel=\"noreferrer\">probeContentType()</a> method throws IOException, in case an implementation of this API uses Path provided to it to actually try to open the file associated with it.</p>\n\n<p>Again, vanilla <em>implementation</em> of this (the one that comes with JDK) leaves a lot to be desired.</p>\n\n<p>In some ideal world in a galaxy far, far away, all these libraries which try to solve this file-to-mime-type problem would simply implement <a href=\"http://docs.oracle.com/javase/7/docs/api/java/nio/file/spi/FileTypeDetector.html\" rel=\"noreferrer\">java.nio.file.spi.FileTypeDetector</a>, you would drop in the preferred implementing library's jar file into your classpath and that would be it.</p>\n\n<p>In the real world, the one where you need TL,DR section, you should find the library with most stars next to it's name and use it. For this particular case, I don't need one (yet ;) ).</p>\n"},{"tags":[],"owner":{"account_id":2852249,"reputation":7603,"user_id":2449199,"display_name":"Cassio Seffrin"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1524277694,"creation_date":1517622273,"answer_id":48593136,"question_id":51438,"body_markdown":"You can do it with just one line:  **MimetypesFileTypeMap().getContentType(new File(&quot;filename.ext&quot;))**. Look the complete test code (Java 7):\r\n\r\n    import java.io.File;\r\n    import javax.activation.MimetypesFileTypeMap;\r\n    public class MimeTest {\r\n    \tpublic static void main(String a[]){\r\n    \t\t System.out.println(new MimetypesFileTypeMap().getContentType(\r\n               new File(&quot;/path/filename.txt&quot;)));\r\n    \t}\r\n    }\r\n\r\nThis code produces the follow output: **text/plain**\r\n","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<p>You can do it with just one line:  <strong>MimetypesFileTypeMap().getContentType(new File(\"filename.ext\"))</strong>. Look the complete test code (Java 7):</p>\n\n<pre><code>import java.io.File;\nimport javax.activation.MimetypesFileTypeMap;\npublic class MimeTest {\n    public static void main(String a[]){\n         System.out.println(new MimetypesFileTypeMap().getContentType(\n           new File(\"/path/filename.txt\")));\n    }\n}\n</code></pre>\n\n<p>This code produces the follow output: <strong>text/plain</strong></p>\n"},{"comments":[{"owner":{"account_id":411877,"reputation":22062,"user_id":965146,"accept_rate":85,"display_name":"4b0"},"score":4,"creation_date":1558090306,"post_id":56183154,"comment_id":98995021,"body_markdown":"While this code may solve the question, [including an explanation](https://meta.stackexchange.com/questions/114762/explaining-entirely-code-based-answers) really helps to improve the quality of your post.","body":"While this code may solve the question, <a href=\"https://meta.stackexchange.com/questions/114762/explaining-entirely-code-based-answers\">including an explanation</a> really helps to improve the quality of your post."}],"tags":[],"owner":{"account_id":14375936,"reputation":9,"user_id":10384381,"display_name":"ganesh vechalapu"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1558084249,"creation_date":1558084141,"answer_id":56183154,"question_id":51438,"body_markdown":"    File file = new File(PropertiesReader.FILE_PATH);\r\n    MimetypesFileTypeMap fileTypeMap = new MimetypesFileTypeMap();\r\n    String mimeType = fileTypeMap.getContentType(file);\r\n    URLConnection uconnection = file.toURL().openConnection();\r\n    mimeType = uconnection.getContentType();\r\n\r\n","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<pre><code>File file = new File(PropertiesReader.FILE_PATH);\nMimetypesFileTypeMap fileTypeMap = new MimetypesFileTypeMap();\nString mimeType = fileTypeMap.getContentType(file);\nURLConnection uconnection = file.toURL().openConnection();\nmimeType = uconnection.getContentType();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3634578,"reputation":142,"user_id":3358877,"display_name":"sahmad"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1564605230,"creation_date":1564605230,"answer_id":57298455,"question_id":51438,"body_markdown":"I did it with following code. \r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.InputStream;\r\n    import java.io.InputStreamReader;\r\n    import java.net.HttpURLConnection;\r\n    import java.net.URL;\r\n    \r\n    public class MimeFileType {\r\n    \r\n        public static void main(String args[]){\r\n    \r\n            try{\r\n                URL url = new URL (&quot;https://www.url.com.pdf&quot;);\r\n                \r\n                HttpURLConnection connection = (HttpURLConnection) url.openConnection();\r\n                connection.setRequestMethod(&quot;GET&quot;);\r\n                connection.setDoOutput(true);\r\n                InputStream content = (InputStream)connection.getInputStream();\r\n                connection.getHeaderField(&quot;Content-Type&quot;);\r\n                \r\n                System.out.println(&quot;Content-Type &quot;+ connection.getHeaderField(&quot;Content-Type&quot;));\r\n    \r\n                BufferedReader in = new BufferedReader (new InputStreamReader(content));\r\n                \r\n            }catch (Exception e){\r\n    \r\n            }\r\n        }\r\n    }","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<p>I did it with following code. </p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\n\npublic class MimeFileType {\n\n    public static void main(String args[]){\n\n        try{\n            URL url = new URL (\"https://www.url.com.pdf\");\n\n            HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n            connection.setRequestMethod(\"GET\");\n            connection.setDoOutput(true);\n            InputStream content = (InputStream)connection.getInputStream();\n            connection.getHeaderField(\"Content-Type\");\n\n            System.out.println(\"Content-Type \"+ connection.getHeaderField(\"Content-Type\"));\n\n            BufferedReader in = new BufferedReader (new InputStreamReader(content));\n\n        }catch (Exception e){\n\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1290949,"reputation":3762,"user_id":1243068,"accept_rate":64,"display_name":"e-info128"},"score":1,"creation_date":1588221642,"post_id":58796361,"comment_id":108817619,"body_markdown":"What is `getServletContext`?","body":"What is <code>getServletContext</code>?"},{"owner":{"account_id":3155211,"reputation":79,"user_id":2667766,"display_name":"Eelco"},"score":0,"creation_date":1701253378,"post_id":58796361,"comment_id":136751789,"body_markdown":"A method in the HttpServlet-class.","body":"A method in the HttpServlet-class."}],"tags":[],"owner":{"account_id":1194890,"reputation":340,"user_id":1166830,"display_name":"Ramishka Dasanayaka"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1573452828,"creation_date":1573452828,"answer_id":58796361,"question_id":51438,"body_markdown":"If you are working with a Servlet and if the servlet context is available to you, you can use :\r\n\r\n    getServletContext().getMimeType( fileName );","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<p>If you are working with a Servlet and if the servlet context is available to you, you can use :</p>\n\n<pre><code>getServletContext().getMimeType( fileName );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7718945,"reputation":709,"user_id":5845739,"display_name":"Pratik Gaurav"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1589134487,"creation_date":1589134487,"answer_id":61716681,"question_id":51438,"body_markdown":"Apache Tika.\r\n\r\n```\r\n&lt;!-- https://mvnrepository.com/artifact/org.apache.tika/tika-parsers --&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.tika&lt;/groupId&gt;\r\n    &lt;artifactId&gt;tika-parsers&lt;/artifactId&gt;\r\n    &lt;version&gt;1.24&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n```\r\n\r\nand Two line of code.\r\n```\r\nTika tika=new Tika();\r\ntika.detect(inputStream);\r\n```\r\n\r\nScreenshot below\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zGTrB.png","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<p>Apache Tika.</p>\n\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/org.apache.tika/tika-parsers --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.tika&lt;/groupId&gt;\n    &lt;artifactId&gt;tika-parsers&lt;/artifactId&gt;\n    &lt;version&gt;1.24&lt;/version&gt;\n&lt;/dependency&gt;\n\n</code></pre>\n\n<p>and Two line of code.</p>\n\n<pre><code>Tika tika=new Tika();\ntika.detect(inputStream);\n</code></pre>\n\n<p>Screenshot below</p>\n\n<p><a href=\"https://i.stack.imgur.com/zGTrB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zGTrB.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":7737504,"reputation":1056,"user_id":5989906,"accept_rate":100,"display_name":"Samuel Prevost"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1605877367,"creation_date":1604439853,"answer_id":64671146,"question_id":51438,"body_markdown":"I couldn&#39;t find anything to check for `video/mp4` MIME type so I made my own solution.\r\nI happened to observe that Wikipedia was wrong and that the `00 00 00 18 66 74 79 70 69 73 6F 6D` file signature is not correct. the fourth byte (`18`) and all `70` (excluded) after changes quite a lot amongst otherwise valid `mp4` files.\r\n\r\nThis code is essentially a copy/paste of `URLConnection.guessContentTypeFromStream` code but tailored to `video/mp4`.\r\n\r\n```java\r\nBufferedInputStream bis = new BufferedInputStream(new ByteArrayInputStream(content));\r\nString mimeType = URLConnection.guessContentTypeFromStream(bis);\r\n\r\n// Goes full barbaric and processes the bytes manually\r\nif (mimeType == null){\r\n    // These ints converted in hex ar:\r\n    // 00 00 00 18 66 74 79 70 69 73 6F 6D\r\n    // which are the file signature (magic bytes) for .mp4 files\r\n    // from https://www.wikiwand.com/en/List_of_file_signatures\r\n    // just ctrl+f &quot;mp4&quot;\r\n    int[] mp4_sig = {0, 0, 0, 24, 102, 116, 121, 112};\r\n\r\n    bis.reset();\r\n    bis.mark(16);\r\n    int[] firstBytes = new int[8];\r\n    for (int i = 0; i &lt; 8; i++) {\r\n        firstBytes[i] = bis.read();\r\n    }\r\n    // This byte doesn&#39;t matter for the file signature and changes\r\n    mp4_sig[3] = content[3];\r\n\r\n    bis.reset();\r\n    if (Arrays.equals(firstBytes, mp4_sig)){\r\n        mimeType = &quot;video/mp4&quot;;\r\n    }\r\n}\r\n```\r\n\r\nTested successfully against 10 different `.mp4` files.\r\n\r\nEDIT: [Here is a useful link (if it is still online) where you can find samples of many types][1]. I don&#39;t own those videos, don&#39;t know who does either, but they&#39;re useful for testing the above code.\r\n\r\n\r\n  [1]: http://mirrors.standaloneinstaller.com/video-sample/","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<p>I couldn't find anything to check for <code>video/mp4</code> MIME type so I made my own solution.\nI happened to observe that Wikipedia was wrong and that the <code>00 00 00 18 66 74 79 70 69 73 6F 6D</code> file signature is not correct. the fourth byte (<code>18</code>) and all <code>70</code> (excluded) after changes quite a lot amongst otherwise valid <code>mp4</code> files.</p>\n<p>This code is essentially a copy/paste of <code>URLConnection.guessContentTypeFromStream</code> code but tailored to <code>video/mp4</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>BufferedInputStream bis = new BufferedInputStream(new ByteArrayInputStream(content));\nString mimeType = URLConnection.guessContentTypeFromStream(bis);\n\n// Goes full barbaric and processes the bytes manually\nif (mimeType == null){\n    // These ints converted in hex ar:\n    // 00 00 00 18 66 74 79 70 69 73 6F 6D\n    // which are the file signature (magic bytes) for .mp4 files\n    // from https://www.wikiwand.com/en/List_of_file_signatures\n    // just ctrl+f &quot;mp4&quot;\n    int[] mp4_sig = {0, 0, 0, 24, 102, 116, 121, 112};\n\n    bis.reset();\n    bis.mark(16);\n    int[] firstBytes = new int[8];\n    for (int i = 0; i &lt; 8; i++) {\n        firstBytes[i] = bis.read();\n    }\n    // This byte doesn't matter for the file signature and changes\n    mp4_sig[3] = content[3];\n\n    bis.reset();\n    if (Arrays.equals(firstBytes, mp4_sig)){\n        mimeType = &quot;video/mp4&quot;;\n    }\n}\n</code></pre>\n<p>Tested successfully against 10 different <code>.mp4</code> files.</p>\n<p>EDIT: <a href=\"http://mirrors.standaloneinstaller.com/video-sample/\" rel=\"nofollow noreferrer\">Here is a useful link (if it is still online) where you can find samples of many types</a>. I don't own those videos, don't know who does either, but they're useful for testing the above code.</p>\n"},{"tags":[],"owner":{"account_id":3896812,"reputation":591,"user_id":3225638,"display_name":"Lorenzo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617555450,"creation_date":1610517070,"answer_id":65696342,"question_id":51438,"body_markdown":"Check the magic bytes of the stream or file:\r\n\r\nhttps://stackoverflow.com/a/65667558/3225638\r\n\r\nIt uses pure Java, but requires you to define an `enum` of the types you want to detect.","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<p>Check the magic bytes of the stream or file:</p>\n<p><a href=\"https://stackoverflow.com/a/65667558/3225638\">https://stackoverflow.com/a/65667558/3225638</a></p>\n<p>It uses pure Java, but requires you to define an <code>enum</code> of the types you want to detect.</p>\n"},{"comments":[{"owner":{"account_id":23551,"reputation":30672,"user_id":59087,"accept_rate":99,"display_name":"Dave Jarvis"},"score":1,"creation_date":1675465903,"post_id":66944463,"comment_id":132942472,"body_markdown":"I&#39;ll save you some effort: There&#39;s no easy way to capture SVG/XML if the XML declaration is sent because the first 11 bytes are all the same for every type of XML file. One solution would be to check for XML, then gobble up to the first opening element to check for `&lt;svg` case insensitively. In practice, I ended up using the Content-Type retrieved from the HTTP connection for the SVG resource.","body":"I&#39;ll save you some effort: There&#39;s no easy way to capture SVG/XML if the XML declaration is sent because the first 11 bytes are all the same for every type of XML file. One solution would be to check for XML, then gobble up to the first opening element to check for <code>&lt;svg</code> case insensitively. In practice, I ended up using the Content-Type retrieved from the HTTP connection for the SVG resource."},{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":0,"creation_date":1675466103,"post_id":66944463,"comment_id":132942506,"body_markdown":"My derivative version: https://gist.github.com/erizzo/deb52e8f74f937d2ea2aa74f494dcb9f","body":"My derivative version: <a href=\"https://gist.github.com/erizzo/deb52e8f74f937d2ea2aa74f494dcb9f\" rel=\"nofollow noreferrer\">gist.github.com/erizzo/deb52e8f74f937d2ea2aa74f494dcb9f</a>"},{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":0,"creation_date":1675466334,"post_id":66944463,"comment_id":132942546,"body_markdown":"The challenge with checking for `&lt;?xml...` and skipping it, is that there can be comments before the `&lt;svg` root node. In fact, Adobe Illustrator inserts a lengthy comment of varying length. :-(","body":"The challenge with checking for <code>&lt;?xml...</code> and skipping it, is that there can be comments before the <code>&lt;svg</code> root node. In fact, Adobe Illustrator inserts a lengthy comment of varying length. :-("},{"owner":{"account_id":23551,"reputation":30672,"user_id":59087,"accept_rate":99,"display_name":"Dave Jarvis"},"score":0,"creation_date":1675466456,"post_id":66944463,"comment_id":132942563,"body_markdown":"Thanks for posting the derivative. Remember to cite your sources as per the terms of the StackOverflow license agreement.","body":"Thanks for posting the derivative. Remember to cite your sources as per the terms of the StackOverflow license agreement."}],"tags":[],"owner":{"account_id":23551,"reputation":30672,"user_id":59087,"accept_rate":99,"display_name":"Dave Jarvis"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675466420,"creation_date":1617560207,"answer_id":66944463,"question_id":51438,"body_markdown":"A solution to detecting a file&#39;s [Media Type][1]&lt;sup&gt;1&lt;/sup&gt; has the following parts:\r\n\r\n* A list of file signatures (see [Kessler&#39;s list][2], [Wikipedia&#39;s list][3], and [Space Maker&#39;s list][4])\r\n* A list of Media Types\r\n* A map of Media Types to file name extensions\r\n* Comparing file signatures against `File`, `Path`, or `InputStream` data sources\r\n\r\nPlease remember to give credit if you copy the code.\r\n\r\n# StreamMediaType.java\r\n\r\nIn the following code `-1` means skip comparing the byte at that index; a `-2` denotes end of file type signature. This detects binary formats, primarily images, and a few plain text format variations (HTML, SVG, XML). The code uses up to the first 11 &quot;magic&quot; bytes from the data source&#39;s header. Optimizations and improvements that shorten the logic are welcome.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    import java.io.FileInputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.nio.file.Path;\r\n    import java.util.LinkedHashMap;\r\n    import java.util.Map;\r\n    \r\n    import static com.keenwrite.io.MediaType.*;\r\n    import static java.lang.System.arraycopy;\r\n    \r\n    public class StreamMediaType {\r\n      private static final int FORMAT_LENGTH = 11;\r\n      private static final int END_OF_DATA = -2;\r\n    \r\n      private static final Map&lt;int[], MediaType&gt; FORMAT = new LinkedHashMap&lt;&gt;();\r\n    \r\n      static {\r\n        //@formatter:off\r\n        FORMAT.put( ints( 0x3C, 0x73, 0x76, 0x67, 0x20 ), IMAGE_SVG_XML );\r\n        FORMAT.put( ints( 0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A ), IMAGE_PNG );\r\n        FORMAT.put( ints( 0xFF, 0xD8, 0xFF, 0xE0 ), IMAGE_JPEG );\r\n        FORMAT.put( ints( 0xFF, 0xD8, 0xFF, 0xEE ), IMAGE_JPEG );\r\n        FORMAT.put( ints( 0xFF, 0xD8, 0xFF, 0xE1, -1, -1, 0x45, 0x78, 0x69, 0x66, 0x00 ), IMAGE_JPEG );\r\n        FORMAT.put( ints( 0x49, 0x49, 0x2A, 0x00 ), IMAGE_TIFF );\r\n        FORMAT.put( ints( 0x4D, 0x4D, 0x00, 0x2A ), IMAGE_TIFF );\r\n        FORMAT.put( ints( 0x47, 0x49, 0x46, 0x38 ), IMAGE_GIF );\r\n        FORMAT.put( ints( 0x8A, 0x4D, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A ), VIDEO_MNG );\r\n        FORMAT.put( ints( 0x25, 0x50, 0x44, 0x46, 0x2D, 0x31, 0x2E ), APP_PDF );\r\n        FORMAT.put( ints( 0x38, 0x42, 0x50, 0x53, 0x00, 0x01 ), IMAGE_PHOTOSHOP );\r\n        FORMAT.put( ints( 0x25, 0x21, 0x50, 0x53, 0x2D, 0x41, 0x64, 0x6F, 0x62, 0x65, 0x2D ), APP_EPS );\r\n        FORMAT.put( ints( 0x25, 0x21, 0x50, 0x53 ), APP_PS );\r\n        FORMAT.put( ints( 0xFF, 0xFB, 0x30 ), AUDIO_MP3 );\r\n        FORMAT.put( ints( 0x49, 0x44, 0x33 ), AUDIO_MP3 );\r\n        FORMAT.put( ints( 0x3C, 0x21 ), TEXT_HTML );\r\n        FORMAT.put( ints( 0x3C, 0x68, 0x74, 0x6D, 0x6C ), TEXT_HTML );\r\n        FORMAT.put( ints( 0x3C, 0x68, 0x65, 0x61, 0x64 ), TEXT_HTML );\r\n        FORMAT.put( ints( 0x3C, 0x62, 0x6F, 0x64, 0x79 ), TEXT_HTML );\r\n        FORMAT.put( ints( 0x3C, 0x48, 0x54, 0x4D, 0x4C ), TEXT_HTML );\r\n        FORMAT.put( ints( 0x3C, 0x48, 0x45, 0x41, 0x44 ), TEXT_HTML );\r\n        FORMAT.put( ints( 0x3C, 0x42, 0x4F, 0x44, 0x59 ), TEXT_HTML );\r\n        FORMAT.put( ints( 0x3C, 0x3F, 0x78, 0x6D, 0x6C, 0x20 ), TEXT_XML );\r\n        FORMAT.put( ints( 0xFE, 0xFF, 0x00, 0x3C, 0x00, 0x3f, 0x00, 0x78 ), TEXT_XML );\r\n        FORMAT.put( ints( 0xFF, 0xFE, 0x3C, 0x00, 0x3F, 0x00, 0x78, 0x00 ), TEXT_XML );\r\n        FORMAT.put( ints( 0x42, 0x4D ), IMAGE_BMP );\r\n        FORMAT.put( ints( 0x23, 0x64, 0x65, 0x66 ), IMAGE_X_BITMAP );\r\n        FORMAT.put( ints( 0x21, 0x20, 0x58, 0x50, 0x4D, 0x32 ), IMAGE_X_PIXMAP );\r\n        FORMAT.put( ints( 0x2E, 0x73, 0x6E, 0x64 ), AUDIO_BASIC );\r\n        FORMAT.put( ints( 0x64, 0x6E, 0x73, 0x2E ), AUDIO_BASIC );\r\n        FORMAT.put( ints( 0x52, 0x49, 0x46, 0x46 ), AUDIO_WAV );\r\n        FORMAT.put( ints( 0x50, 0x4B ), APP_ZIP );\r\n        FORMAT.put( ints( 0x41, 0x43, -1, -1, -1, -1, 0x00, 0x00, 0x00, 0x00, 0x00 ), APP_ACAD );\r\n        FORMAT.put( ints( 0xCA, 0xFE, 0xBA, 0xBE ), APP_JAVA );\r\n        FORMAT.put( ints( 0xAC, 0xED ), APP_JAVA_OBJECT );\r\n        //@formatter:on\r\n      }\r\n    \r\n      private StreamMediaType() {\r\n      }\r\n    \r\n      public static MediaType getMediaType( final Path path ) throws IOException {\r\n        return getMediaType( path.toFile() );\r\n      }\r\n    \r\n      public static MediaType getMediaType( final java.io.File file )\r\n        throws IOException {\r\n        try( final var fis = new FileInputStream( file ) ) {\r\n          return getMediaType( fis );\r\n        }\r\n      }\r\n    \r\n      public static MediaType getMediaType( final InputStream is )\r\n        throws IOException {\r\n        final var input = new byte[ FORMAT_LENGTH ];\r\n        final var count = is.read( input, 0, FORMAT_LENGTH );\r\n    \r\n        if( count &gt; 1 ) {\r\n          final var available = new byte[ count ];\r\n          arraycopy( input, 0, available, 0, count );\r\n          return getMediaType( available );\r\n        }\r\n    \r\n        return UNDEFINED;\r\n      }\r\n    \r\n      public static MediaType getMediaType( final byte[] data ) {\r\n        assert data != null;\r\n    \r\n        final var source = new int[]{\r\n          0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF};\r\n    \r\n        for( int i = 0; i &lt; source.length; i++ ) {\r\n          source[ i ] = data[ i ] &amp; 0xFF;\r\n        }\r\n    \r\n        for( final var key : FORMAT.keySet() ) {\r\n          int i = -1;\r\n          boolean matches = true;\r\n    \r\n          while( ++i &lt; FORMAT_LENGTH &amp;&amp; key[ i ] != END_OF_DATA &amp;&amp; matches ) {\r\n            matches = key[ i ] == source[ i ] || key[ i ] == -1;\r\n          }\r\n    \r\n          if( matches ) {\r\n            return FORMAT.get( key );\r\n          }\r\n        }\r\n    \r\n        return UNDEFINED;\r\n      }\r\n    \r\n      private static int[] ints( final int... data ) {\r\n        final var magic = new int[ FORMAT_LENGTH ];\r\n        int i = -1;\r\n        while( ++i &lt; data.length ) {\r\n          magic[ i ] = data[ i ];\r\n        }\r\n    \r\n        while( i &lt; FORMAT_LENGTH ) {\r\n          magic[ i++ ] = END_OF_DATA;\r\n        }\r\n    \r\n        return magic;\r\n      }\r\n    }\r\n\r\n# MediaType.java\r\n\r\nDefine the file formats according to the [IANA Media Type][1] list. Notice that the file name extensions are mapped in `MediaTypeExtension`. There&#39;s a dependency on Apache&#39;s FilenameUtils class for its `getExtension` function.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    import java.io.File;\r\n    import java.io.IOException;\r\n    import java.nio.file.Path;\r\n    \r\n    import static MediaType.TypeName.*;\r\n    import static MediaTypeExtension.getMediaType;\r\n    import static org.apache.commons.io.FilenameUtils.getExtension;\r\n\r\n    public enum MediaType {\r\n      APP_ACAD( APPLICATION, &quot;acad&quot; ),\r\n      APP_JAVA_OBJECT( APPLICATION, &quot;x-java-serialized-object&quot; ),\r\n      APP_JAVA( APPLICATION, &quot;java&quot; ),\r\n      APP_PS( APPLICATION, &quot;postscript&quot; ),\r\n      APP_EPS( APPLICATION, &quot;eps&quot; ),\r\n      APP_PDF( APPLICATION, &quot;pdf&quot; ),\r\n      APP_ZIP( APPLICATION, &quot;zip&quot; ),\r\n      FONT_OTF( &quot;otf&quot; ),\r\n      FONT_TTF( &quot;ttf&quot; ),\r\n      IMAGE_APNG( &quot;apng&quot; ),\r\n      IMAGE_ACES( &quot;aces&quot; ),\r\n      IMAGE_AVCI( &quot;avci&quot; ),\r\n      IMAGE_AVCS( &quot;avcs&quot; ),\r\n      IMAGE_BMP( &quot;bmp&quot; ),\r\n      IMAGE_CGM( &quot;cgm&quot; ),\r\n      IMAGE_DICOM_RLE( &quot;dicom_rle&quot; ),\r\n      IMAGE_EMF( &quot;emf&quot; ),\r\n      IMAGE_EXAMPLE( &quot;example&quot; ),\r\n      IMAGE_FITS( &quot;fits&quot; ),\r\n      IMAGE_G3FAX( &quot;g3fax&quot; ),\r\n      IMAGE_GIF( &quot;gif&quot; ),\r\n      IMAGE_HEIC( &quot;heic&quot; ),\r\n      IMAGE_HEIF( &quot;heif&quot; ),\r\n      IMAGE_HEJ2K( &quot;hej2k&quot; ),\r\n      IMAGE_HSJ2( &quot;hsj2&quot; ),\r\n      IMAGE_X_ICON( &quot;x-icon&quot; ),\r\n      IMAGE_JLS( &quot;jls&quot; ),\r\n      IMAGE_JP2( &quot;jp2&quot; ),\r\n      IMAGE_JPEG( &quot;jpeg&quot; ),\r\n      IMAGE_JPH( &quot;jph&quot; ),\r\n      IMAGE_JPHC( &quot;jphc&quot; ),\r\n      IMAGE_JPM( &quot;jpm&quot; ),\r\n      IMAGE_JPX( &quot;jpx&quot; ),\r\n      IMAGE_JXR( &quot;jxr&quot; ),\r\n      IMAGE_JXRA( &quot;jxrA&quot; ),\r\n      IMAGE_JXRS( &quot;jxrS&quot; ),\r\n      IMAGE_JXS( &quot;jxs&quot; ),\r\n      IMAGE_JXSC( &quot;jxsc&quot; ),\r\n      IMAGE_JXSI( &quot;jxsi&quot; ),\r\n      IMAGE_JXSS( &quot;jxss&quot; ),\r\n      IMAGE_KTX( &quot;ktx&quot; ),\r\n      IMAGE_KTX2( &quot;ktx2&quot; ),\r\n      IMAGE_NAPLPS( &quot;naplps&quot; ),\r\n      IMAGE_PNG( &quot;png&quot; ),\r\n      IMAGE_PHOTOSHOP( &quot;photoshop&quot; ),\r\n      IMAGE_SVG_XML( &quot;svg+xml&quot; ),\r\n      IMAGE_T38( &quot;t38&quot; ),\r\n      IMAGE_TIFF( &quot;tiff&quot; ),\r\n      IMAGE_WEBP( &quot;webp&quot; ),\r\n      IMAGE_WMF( &quot;wmf&quot; ),\r\n      IMAGE_X_BITMAP( &quot;x-xbitmap&quot; ),\r\n      IMAGE_X_PIXMAP( &quot;x-xpixmap&quot; ),\r\n      AUDIO_BASIC( AUDIO, &quot;basic&quot; ),\r\n      AUDIO_MP3( AUDIO, &quot;mp3&quot; ),\r\n      AUDIO_WAV( AUDIO, &quot;x-wav&quot; ),\r\n      VIDEO_MNG( VIDEO, &quot;x-mng&quot; ),\r\n      TEXT_HTML( TEXT, &quot;html&quot; ),\r\n      TEXT_MARKDOWN( TEXT, &quot;markdown&quot; ),\r\n      TEXT_PLAIN( TEXT, &quot;plain&quot; ),\r\n      TEXT_XHTML( TEXT, &quot;xhtml+xml&quot; ),\r\n      TEXT_XML( TEXT, &quot;xml&quot; ),\r\n      TEXT_YAML( TEXT, &quot;yaml&quot; ),\r\n    \r\n      /*\r\n       * When all other lights go out.\r\n       */\r\n      UNDEFINED( TypeName.UNDEFINED, &quot;undefined&quot; );\r\n    \r\n      public enum TypeName {\r\n        APPLICATION,\r\n        AUDIO,\r\n        IMAGE,\r\n        TEXT,\r\n        UNDEFINED,\r\n        VIDEO\r\n      }\r\n    \r\n      private final String mMediaType;\r\n      private final TypeName mTypeName;\r\n      private final String mSubtype;\r\n    \r\n      MediaType( final String subtype ) {\r\n        this( IMAGE, subtype );\r\n      }\r\n    \r\n      MediaType( final TypeName typeName, final String subtype ) {\r\n        mTypeName = typeName;\r\n        mSubtype = subtype;\r\n        mMediaType = typeName.toString().toLowerCase() + &#39;/&#39; + subtype;\r\n      }\r\n    \r\n      public static MediaType valueFrom( final File file ) {\r\n        assert file != null;\r\n        return fromFilename( file.getName() );\r\n      }\r\n    \r\n      public static MediaType fromFilename( final String filename ) {\r\n        assert filename != null;\r\n        return getMediaType( getExtension( filename ) );\r\n      }\r\n    \r\n      public static MediaType valueFrom( final Path path ) {\r\n        assert path != null;\r\n        return valueFrom( path.toFile() );\r\n      }\r\n    \r\n      public static MediaType valueFrom( String contentType ) {\r\n        if( contentType == null || contentType.isBlank() ) {\r\n          return UNDEFINED;\r\n        }\r\n    \r\n        var i = contentType.indexOf( &#39;;&#39; );\r\n        contentType = contentType.substring(\r\n          0, i == -1 ? contentType.length() : i );\r\n    \r\n        i = contentType.indexOf( &#39;/&#39; );\r\n        i = i == -1 ? contentType.length() : i;\r\n        final var type = contentType.substring( 0, i );\r\n        final var subtype = contentType.substring( i + 1 );\r\n    \r\n        return valueFrom( type, subtype );\r\n      }\r\n    \r\n      public static MediaType valueFrom(\r\n        final String type, final String subtype ) {\r\n        assert type != null;\r\n        assert subtype != null;\r\n    \r\n        for( final var mediaType : values() ) {\r\n          if( mediaType.equals( type, subtype ) ) {\r\n            return mediaType;\r\n          }\r\n        }\r\n    \r\n        return UNDEFINED;\r\n      }\r\n    \r\n      public boolean equals( final String type, final String subtype ) {\r\n        assert type != null;\r\n        assert subtype != null;\r\n    \r\n        return mTypeName.name().equalsIgnoreCase( type ) &amp;&amp;\r\n          mSubtype.equalsIgnoreCase( subtype );\r\n      }\r\n    \r\n      public boolean isType( final TypeName typeName ) {\r\n        return mTypeName == typeName;\r\n      }\r\n    \r\n      public String getSubtype() {\r\n        return mSubtype;\r\n      }\r\n       \r\n      @Override\r\n      public String toString() {\r\n        return mMediaType;\r\n      }\r\n    }\r\n\r\n# MediaTypeExtension.java\r\n\r\nLast piece of the puzzle is a map of `MediaType`s to their known and common/popular file name extensions. This allows bidirectional lookup based on file name extensions.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    import static MediaType.*;\r\n    import static java.util.List.of;\r\n\r\n    public enum MediaTypeExtension {\r\n      MEDIA_APP_ACAD( APP_ACAD, of( &quot;dwg&quot; ) ),\r\n      MEDIA_APP_PDF( APP_PDF ),\r\n      MEDIA_APP_PS( APP_PS, of( &quot;ps&quot; ) ),\r\n      MEDIA_APP_EPS( APP_EPS ),\r\n      MEDIA_APP_ZIP( APP_ZIP ),\r\n    \r\n      MEDIA_AUDIO_MP3( AUDIO_MP3 ),\r\n      MEDIA_AUDIO_BASIC( AUDIO_BASIC, of( &quot;au&quot; ) ),\r\n      MEDIA_AUDIO_WAV( AUDIO_WAV, of( &quot;wav&quot; ) ),\r\n    \r\n      MEDIA_FONT_OTF( FONT_OTF ),\r\n      MEDIA_FONT_TTF( FONT_TTF ),\r\n    \r\n      MEDIA_IMAGE_APNG( IMAGE_APNG ),\r\n      MEDIA_IMAGE_BMP( IMAGE_BMP ),\r\n      MEDIA_IMAGE_GIF( IMAGE_GIF ),\r\n      MEDIA_IMAGE_JPEG( IMAGE_JPEG,\r\n                        of( &quot;jpg&quot;, &quot;jpe&quot;, &quot;jpeg&quot;, &quot;jfif&quot;, &quot;pjpeg&quot;, &quot;pjp&quot; ) ),\r\n      MEDIA_IMAGE_PNG( IMAGE_PNG ),\r\n      MEDIA_IMAGE_PSD( IMAGE_PHOTOSHOP, of( &quot;psd&quot; ) ),\r\n      MEDIA_IMAGE_SVG( IMAGE_SVG_XML, of( &quot;svg&quot; ) ),\r\n      MEDIA_IMAGE_TIFF( IMAGE_TIFF, of( &quot;tiff&quot;, &quot;tif&quot; ) ),\r\n      MEDIA_IMAGE_WEBP( IMAGE_WEBP ),\r\n      MEDIA_IMAGE_X_BITMAP( IMAGE_X_BITMAP, of( &quot;xbm&quot; ) ),\r\n      MEDIA_IMAGE_X_PIXMAP( IMAGE_X_PIXMAP, of( &quot;xpm&quot; ) ),\r\n    \r\n      MEDIA_VIDEO_MNG( VIDEO_MNG, of( &quot;mng&quot; ) ),\r\n    \r\n      MEDIA_TEXT_MARKDOWN( TEXT_MARKDOWN, of(\r\n        &quot;md&quot;, &quot;markdown&quot;, &quot;mdown&quot;, &quot;mdtxt&quot;, &quot;mdtext&quot;, &quot;mdwn&quot;, &quot;mkd&quot;, &quot;mkdown&quot;,\r\n        &quot;mkdn&quot; ) ),\r\n      MEDIA_TEXT_PLAIN( TEXT_PLAIN, of( &quot;txt&quot;, &quot;asc&quot;, &quot;ascii&quot;, &quot;text&quot;, &quot;utxt&quot; ) ),\r\n      MEDIA_TEXT_R_MARKDOWN( TEXT_R_MARKDOWN, of( &quot;Rmd&quot; ) ),\r\n      MEDIA_TEXT_R_XML( TEXT_R_XML, of( &quot;Rxml&quot; ) ),\r\n      MEDIA_TEXT_XHTML( TEXT_XHTML, of( &quot;xhtml&quot; ) ),\r\n      MEDIA_TEXT_XML( TEXT_XML ),\r\n      MEDIA_TEXT_YAML( TEXT_YAML, of( &quot;yaml&quot;, &quot;yml&quot; ) ),\r\n    \r\n      MEDIA_UNDEFINED( UNDEFINED, of( &quot;undefined&quot; ) );\r\n    \r\n      private final MediaType mMediaType;\r\n      private final List&lt;String&gt; mExtensions;\r\n    \r\n      MediaTypeExtension( final MediaType mediaType ) {\r\n        this( mediaType, of( mediaType.getSubtype() ) );\r\n      }\r\n    \r\n      MediaTypeExtension(\r\n        final MediaType mediaType, final List&lt;String&gt; extensions ) {\r\n        assert mediaType != null;\r\n        assert extensions != null;\r\n        assert !extensions.isEmpty();\r\n    \r\n        mMediaType = mediaType;\r\n        mExtensions = extensions;\r\n      }\r\n    \r\n      public String getExtension() {\r\n        return mExtensions.get( 0 );\r\n      }\r\n\r\n      public static MediaTypeExtension valueFrom( final MediaType mediaType ) {\r\n        for( final var type : values() ) {\r\n          if( type.isMediaType( mediaType ) ) {\r\n            return type;\r\n          }\r\n        }\r\n    \r\n        return MEDIA_UNDEFINED;\r\n      }\r\n    \r\n      boolean isMediaType( final MediaType mediaType ) {\r\n        return mMediaType == mediaType;\r\n      }\r\n    \r\n      static MediaType getMediaType( final String extension ) {\r\n        final var sanitized = sanitize( extension );\r\n    \r\n        for( final var mediaType : MediaTypeExtension.values() ) {\r\n          if( mediaType.isType( sanitized ) ) {\r\n            return mediaType.getMediaType();\r\n          }\r\n        }\r\n    \r\n        return UNDEFINED;\r\n      }\r\n    \r\n      private boolean isType( final String sanitized ) {\r\n        for( final var extension : mExtensions ) {\r\n          if( extension.equalsIgnoreCase( sanitized ) ) {\r\n            return true;\r\n          }\r\n        }\r\n    \r\n        return false;\r\n      }\r\n    \r\n      private static String sanitize( final String extension ) {\r\n        return extension == null ? &quot;&quot; : extension.toLowerCase();\r\n      }\r\n    \r\n      private MediaType getMediaType() {\r\n        return mMediaType;\r\n      }\r\n    }\r\n\r\n---\r\n\r\nUsages:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    // EXAMPLE -- Detect media type\r\n    //\r\n    final File image = new File( &quot;filename.jpg&quot; );\r\n    final MediaType mt = StreamMediaType.getMediaType( image );\r\n\r\n    // Tricky! The JPG could be a PNG in disguise.\r\n    if( mt.isType( MediaType.TypeName.IMAGE ) ) {\r\n\r\n      if( mt == MediaType.IMAGE_PNG ) {\r\n        // Nice try! Sneaky sneak.\r\n      }\r\n    }\r\n\r\n    // EXAMPLE -- Get typical media type file name extension\r\n    //\r\n    final String ext = MediaTypeExtension.valueFrom( MediaType.IMAGE_SVG_XML ).getExtension();\r\n\r\n    // EXAMPLE -- Get media type from HTTP request\r\n    //\r\n    final var url = new URL( &quot;https://localhost/path/file.ext&quot; );\r\n    final var conn = (HttpURLConnection) url.openConnection();\r\n    final var contentType = conn.getContentType();\r\n    MediaType mediaType = valueFrom( contentType );\r\n\r\n    // Fall back to stream detection probe\r\n    if( mediaType == UNDEFINED ) {\r\n      mediaType = StreamMediaType.getMediaType( conn.getInputStream() );\r\n    }\r\n\r\n    conn.disconnect();\r\n\r\nYou get the idea.\r\n\r\n---\r\n\r\nShort library review:\r\n\r\n* [Apache Tika][5] -- 600kb bloat, needs multiple lines to configure, and multiple JAR files.\r\n* [jMimeMagic][6] -- Unfinished, needs multiple lines to configure.\r\n* [MimeUtil2][7] -- Fairly large, didn&#39;t work out-of-the-box.\r\n* [FileTypeDetector][8] -- Bundled with JDK, buggier than a mountain pine beetle infested forest.\r\n* [Files.probeContentType][8] -- Detection is platform-specific and considered unreliable ([source][9]).\r\n* [MimetypesFileTypeMap][10] -- Bundled with activation.jar, uses file name extension.\r\n\r\n---\r\n\r\nSample audio, video, and image files for testing:\r\n\r\n * http://mirrors.standaloneinstaller.com/video-sample/\r\n * https://www.w3.org/People/mimasa/test/imgformat/\r\n\r\n---\r\n\r\nNote that nearly all XML documents will begin the same way:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; standalone=&quot;no&quot;?&gt;\r\n\r\nSince SVG documents are XML documents, many SVG documents will contain that XML declaration and may also contain:\r\n\r\n    &lt;!DOCTYPE svg PUBLIC &quot;-//W3C//DTD SVG 1.0//EN&quot; &quot;http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd&quot;&gt;\r\n\r\nDetecting the SVG doctype would be possible by bumping the magic bytes from 11 to 13. Still, the doctype is not required, meaning that the SVG document could also begin after the XML declaration as follows:\r\n\r\n    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;\r\n\r\nMeaning, use caution when using this code to detect SVG file formats, as it is not reliable. Instead, consider using the HTTP Content-Type or filename extension.\r\n\r\nCompounding the issue is that comments of arbitrary length can be inserted before the `&lt;svg` tag, making detection extra-difficult.\r\n\r\n---\r\n\r\n&lt;sup&gt;1&lt;/sup&gt; &quot;MIME type&quot; is a deprecated term.\r\n\r\n\r\n  [1]: https://www.iana.org/assignments/media-types/media-types.xhtml\r\n  [2]: https://www.garykessler.net/library/file_sigs.html\r\n  [3]: https://en.wikipedia.org/wiki/List_of_file_signatures\r\n  [4]: https://github.com/veniware/Space-Maker/blob/master/FileSignatures.cs\r\n  [5]: https://tika.apache.org/\r\n  [6]: https://github.com/arimus/jmimemagic/\r\n  [7]: http://mime-util.sourceforge.net/\r\n  [8]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/file/spi/FileTypeDetector.html\r\n  [9]: https://stackoverflow.com/a/65966588/59087\r\n  [10]: https://docs.oracle.com/javase/7/docs/api/javax/activation/MimetypesFileTypeMap.html\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<p>A solution to detecting a file's <a href=\"https://www.iana.org/assignments/media-types/media-types.xhtml\" rel=\"nofollow noreferrer\">Media Type</a><sup>1</sup> has the following parts:</p>\n<ul>\n<li>A list of file signatures (see <a href=\"https://www.garykessler.net/library/file_sigs.html\" rel=\"nofollow noreferrer\">Kessler's list</a>, <a href=\"https://en.wikipedia.org/wiki/List_of_file_signatures\" rel=\"nofollow noreferrer\">Wikipedia's list</a>, and <a href=\"https://github.com/veniware/Space-Maker/blob/master/FileSignatures.cs\" rel=\"nofollow noreferrer\">Space Maker's list</a>)</li>\n<li>A list of Media Types</li>\n<li>A map of Media Types to file name extensions</li>\n<li>Comparing file signatures against <code>File</code>, <code>Path</code>, or <code>InputStream</code> data sources</li>\n</ul>\n<p>Please remember to give credit if you copy the code.</p>\n<h1>StreamMediaType.java</h1>\n<p>In the following code <code>-1</code> means skip comparing the byte at that index; a <code>-2</code> denotes end of file type signature. This detects binary formats, primarily images, and a few plain text format variations (HTML, SVG, XML). The code uses up to the first 11 &quot;magic&quot; bytes from the data source's header. Optimizations and improvements that shorten the logic are welcome.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.FileInputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.nio.file.Path;\nimport java.util.LinkedHashMap;\nimport java.util.Map;\n\nimport static com.keenwrite.io.MediaType.*;\nimport static java.lang.System.arraycopy;\n\npublic class StreamMediaType {\n  private static final int FORMAT_LENGTH = 11;\n  private static final int END_OF_DATA = -2;\n\n  private static final Map&lt;int[], MediaType&gt; FORMAT = new LinkedHashMap&lt;&gt;();\n\n  static {\n    //@formatter:off\n    FORMAT.put( ints( 0x3C, 0x73, 0x76, 0x67, 0x20 ), IMAGE_SVG_XML );\n    FORMAT.put( ints( 0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A ), IMAGE_PNG );\n    FORMAT.put( ints( 0xFF, 0xD8, 0xFF, 0xE0 ), IMAGE_JPEG );\n    FORMAT.put( ints( 0xFF, 0xD8, 0xFF, 0xEE ), IMAGE_JPEG );\n    FORMAT.put( ints( 0xFF, 0xD8, 0xFF, 0xE1, -1, -1, 0x45, 0x78, 0x69, 0x66, 0x00 ), IMAGE_JPEG );\n    FORMAT.put( ints( 0x49, 0x49, 0x2A, 0x00 ), IMAGE_TIFF );\n    FORMAT.put( ints( 0x4D, 0x4D, 0x00, 0x2A ), IMAGE_TIFF );\n    FORMAT.put( ints( 0x47, 0x49, 0x46, 0x38 ), IMAGE_GIF );\n    FORMAT.put( ints( 0x8A, 0x4D, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A ), VIDEO_MNG );\n    FORMAT.put( ints( 0x25, 0x50, 0x44, 0x46, 0x2D, 0x31, 0x2E ), APP_PDF );\n    FORMAT.put( ints( 0x38, 0x42, 0x50, 0x53, 0x00, 0x01 ), IMAGE_PHOTOSHOP );\n    FORMAT.put( ints( 0x25, 0x21, 0x50, 0x53, 0x2D, 0x41, 0x64, 0x6F, 0x62, 0x65, 0x2D ), APP_EPS );\n    FORMAT.put( ints( 0x25, 0x21, 0x50, 0x53 ), APP_PS );\n    FORMAT.put( ints( 0xFF, 0xFB, 0x30 ), AUDIO_MP3 );\n    FORMAT.put( ints( 0x49, 0x44, 0x33 ), AUDIO_MP3 );\n    FORMAT.put( ints( 0x3C, 0x21 ), TEXT_HTML );\n    FORMAT.put( ints( 0x3C, 0x68, 0x74, 0x6D, 0x6C ), TEXT_HTML );\n    FORMAT.put( ints( 0x3C, 0x68, 0x65, 0x61, 0x64 ), TEXT_HTML );\n    FORMAT.put( ints( 0x3C, 0x62, 0x6F, 0x64, 0x79 ), TEXT_HTML );\n    FORMAT.put( ints( 0x3C, 0x48, 0x54, 0x4D, 0x4C ), TEXT_HTML );\n    FORMAT.put( ints( 0x3C, 0x48, 0x45, 0x41, 0x44 ), TEXT_HTML );\n    FORMAT.put( ints( 0x3C, 0x42, 0x4F, 0x44, 0x59 ), TEXT_HTML );\n    FORMAT.put( ints( 0x3C, 0x3F, 0x78, 0x6D, 0x6C, 0x20 ), TEXT_XML );\n    FORMAT.put( ints( 0xFE, 0xFF, 0x00, 0x3C, 0x00, 0x3f, 0x00, 0x78 ), TEXT_XML );\n    FORMAT.put( ints( 0xFF, 0xFE, 0x3C, 0x00, 0x3F, 0x00, 0x78, 0x00 ), TEXT_XML );\n    FORMAT.put( ints( 0x42, 0x4D ), IMAGE_BMP );\n    FORMAT.put( ints( 0x23, 0x64, 0x65, 0x66 ), IMAGE_X_BITMAP );\n    FORMAT.put( ints( 0x21, 0x20, 0x58, 0x50, 0x4D, 0x32 ), IMAGE_X_PIXMAP );\n    FORMAT.put( ints( 0x2E, 0x73, 0x6E, 0x64 ), AUDIO_BASIC );\n    FORMAT.put( ints( 0x64, 0x6E, 0x73, 0x2E ), AUDIO_BASIC );\n    FORMAT.put( ints( 0x52, 0x49, 0x46, 0x46 ), AUDIO_WAV );\n    FORMAT.put( ints( 0x50, 0x4B ), APP_ZIP );\n    FORMAT.put( ints( 0x41, 0x43, -1, -1, -1, -1, 0x00, 0x00, 0x00, 0x00, 0x00 ), APP_ACAD );\n    FORMAT.put( ints( 0xCA, 0xFE, 0xBA, 0xBE ), APP_JAVA );\n    FORMAT.put( ints( 0xAC, 0xED ), APP_JAVA_OBJECT );\n    //@formatter:on\n  }\n\n  private StreamMediaType() {\n  }\n\n  public static MediaType getMediaType( final Path path ) throws IOException {\n    return getMediaType( path.toFile() );\n  }\n\n  public static MediaType getMediaType( final java.io.File file )\n    throws IOException {\n    try( final var fis = new FileInputStream( file ) ) {\n      return getMediaType( fis );\n    }\n  }\n\n  public static MediaType getMediaType( final InputStream is )\n    throws IOException {\n    final var input = new byte[ FORMAT_LENGTH ];\n    final var count = is.read( input, 0, FORMAT_LENGTH );\n\n    if( count &gt; 1 ) {\n      final var available = new byte[ count ];\n      arraycopy( input, 0, available, 0, count );\n      return getMediaType( available );\n    }\n\n    return UNDEFINED;\n  }\n\n  public static MediaType getMediaType( final byte[] data ) {\n    assert data != null;\n\n    final var source = new int[]{\n      0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF};\n\n    for( int i = 0; i &lt; source.length; i++ ) {\n      source[ i ] = data[ i ] &amp; 0xFF;\n    }\n\n    for( final var key : FORMAT.keySet() ) {\n      int i = -1;\n      boolean matches = true;\n\n      while( ++i &lt; FORMAT_LENGTH &amp;&amp; key[ i ] != END_OF_DATA &amp;&amp; matches ) {\n        matches = key[ i ] == source[ i ] || key[ i ] == -1;\n      }\n\n      if( matches ) {\n        return FORMAT.get( key );\n      }\n    }\n\n    return UNDEFINED;\n  }\n\n  private static int[] ints( final int... data ) {\n    final var magic = new int[ FORMAT_LENGTH ];\n    int i = -1;\n    while( ++i &lt; data.length ) {\n      magic[ i ] = data[ i ];\n    }\n\n    while( i &lt; FORMAT_LENGTH ) {\n      magic[ i++ ] = END_OF_DATA;\n    }\n\n    return magic;\n  }\n}\n</code></pre>\n<h1>MediaType.java</h1>\n<p>Define the file formats according to the <a href=\"https://www.iana.org/assignments/media-types/media-types.xhtml\" rel=\"nofollow noreferrer\">IANA Media Type</a> list. Notice that the file name extensions are mapped in <code>MediaTypeExtension</code>. There's a dependency on Apache's FilenameUtils class for its <code>getExtension</code> function.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.File;\nimport java.io.IOException;\nimport java.nio.file.Path;\n\nimport static MediaType.TypeName.*;\nimport static MediaTypeExtension.getMediaType;\nimport static org.apache.commons.io.FilenameUtils.getExtension;\n\npublic enum MediaType {\n  APP_ACAD( APPLICATION, &quot;acad&quot; ),\n  APP_JAVA_OBJECT( APPLICATION, &quot;x-java-serialized-object&quot; ),\n  APP_JAVA( APPLICATION, &quot;java&quot; ),\n  APP_PS( APPLICATION, &quot;postscript&quot; ),\n  APP_EPS( APPLICATION, &quot;eps&quot; ),\n  APP_PDF( APPLICATION, &quot;pdf&quot; ),\n  APP_ZIP( APPLICATION, &quot;zip&quot; ),\n  FONT_OTF( &quot;otf&quot; ),\n  FONT_TTF( &quot;ttf&quot; ),\n  IMAGE_APNG( &quot;apng&quot; ),\n  IMAGE_ACES( &quot;aces&quot; ),\n  IMAGE_AVCI( &quot;avci&quot; ),\n  IMAGE_AVCS( &quot;avcs&quot; ),\n  IMAGE_BMP( &quot;bmp&quot; ),\n  IMAGE_CGM( &quot;cgm&quot; ),\n  IMAGE_DICOM_RLE( &quot;dicom_rle&quot; ),\n  IMAGE_EMF( &quot;emf&quot; ),\n  IMAGE_EXAMPLE( &quot;example&quot; ),\n  IMAGE_FITS( &quot;fits&quot; ),\n  IMAGE_G3FAX( &quot;g3fax&quot; ),\n  IMAGE_GIF( &quot;gif&quot; ),\n  IMAGE_HEIC( &quot;heic&quot; ),\n  IMAGE_HEIF( &quot;heif&quot; ),\n  IMAGE_HEJ2K( &quot;hej2k&quot; ),\n  IMAGE_HSJ2( &quot;hsj2&quot; ),\n  IMAGE_X_ICON( &quot;x-icon&quot; ),\n  IMAGE_JLS( &quot;jls&quot; ),\n  IMAGE_JP2( &quot;jp2&quot; ),\n  IMAGE_JPEG( &quot;jpeg&quot; ),\n  IMAGE_JPH( &quot;jph&quot; ),\n  IMAGE_JPHC( &quot;jphc&quot; ),\n  IMAGE_JPM( &quot;jpm&quot; ),\n  IMAGE_JPX( &quot;jpx&quot; ),\n  IMAGE_JXR( &quot;jxr&quot; ),\n  IMAGE_JXRA( &quot;jxrA&quot; ),\n  IMAGE_JXRS( &quot;jxrS&quot; ),\n  IMAGE_JXS( &quot;jxs&quot; ),\n  IMAGE_JXSC( &quot;jxsc&quot; ),\n  IMAGE_JXSI( &quot;jxsi&quot; ),\n  IMAGE_JXSS( &quot;jxss&quot; ),\n  IMAGE_KTX( &quot;ktx&quot; ),\n  IMAGE_KTX2( &quot;ktx2&quot; ),\n  IMAGE_NAPLPS( &quot;naplps&quot; ),\n  IMAGE_PNG( &quot;png&quot; ),\n  IMAGE_PHOTOSHOP( &quot;photoshop&quot; ),\n  IMAGE_SVG_XML( &quot;svg+xml&quot; ),\n  IMAGE_T38( &quot;t38&quot; ),\n  IMAGE_TIFF( &quot;tiff&quot; ),\n  IMAGE_WEBP( &quot;webp&quot; ),\n  IMAGE_WMF( &quot;wmf&quot; ),\n  IMAGE_X_BITMAP( &quot;x-xbitmap&quot; ),\n  IMAGE_X_PIXMAP( &quot;x-xpixmap&quot; ),\n  AUDIO_BASIC( AUDIO, &quot;basic&quot; ),\n  AUDIO_MP3( AUDIO, &quot;mp3&quot; ),\n  AUDIO_WAV( AUDIO, &quot;x-wav&quot; ),\n  VIDEO_MNG( VIDEO, &quot;x-mng&quot; ),\n  TEXT_HTML( TEXT, &quot;html&quot; ),\n  TEXT_MARKDOWN( TEXT, &quot;markdown&quot; ),\n  TEXT_PLAIN( TEXT, &quot;plain&quot; ),\n  TEXT_XHTML( TEXT, &quot;xhtml+xml&quot; ),\n  TEXT_XML( TEXT, &quot;xml&quot; ),\n  TEXT_YAML( TEXT, &quot;yaml&quot; ),\n\n  /*\n   * When all other lights go out.\n   */\n  UNDEFINED( TypeName.UNDEFINED, &quot;undefined&quot; );\n\n  public enum TypeName {\n    APPLICATION,\n    AUDIO,\n    IMAGE,\n    TEXT,\n    UNDEFINED,\n    VIDEO\n  }\n\n  private final String mMediaType;\n  private final TypeName mTypeName;\n  private final String mSubtype;\n\n  MediaType( final String subtype ) {\n    this( IMAGE, subtype );\n  }\n\n  MediaType( final TypeName typeName, final String subtype ) {\n    mTypeName = typeName;\n    mSubtype = subtype;\n    mMediaType = typeName.toString().toLowerCase() + '/' + subtype;\n  }\n\n  public static MediaType valueFrom( final File file ) {\n    assert file != null;\n    return fromFilename( file.getName() );\n  }\n\n  public static MediaType fromFilename( final String filename ) {\n    assert filename != null;\n    return getMediaType( getExtension( filename ) );\n  }\n\n  public static MediaType valueFrom( final Path path ) {\n    assert path != null;\n    return valueFrom( path.toFile() );\n  }\n\n  public static MediaType valueFrom( String contentType ) {\n    if( contentType == null || contentType.isBlank() ) {\n      return UNDEFINED;\n    }\n\n    var i = contentType.indexOf( ';' );\n    contentType = contentType.substring(\n      0, i == -1 ? contentType.length() : i );\n\n    i = contentType.indexOf( '/' );\n    i = i == -1 ? contentType.length() : i;\n    final var type = contentType.substring( 0, i );\n    final var subtype = contentType.substring( i + 1 );\n\n    return valueFrom( type, subtype );\n  }\n\n  public static MediaType valueFrom(\n    final String type, final String subtype ) {\n    assert type != null;\n    assert subtype != null;\n\n    for( final var mediaType : values() ) {\n      if( mediaType.equals( type, subtype ) ) {\n        return mediaType;\n      }\n    }\n\n    return UNDEFINED;\n  }\n\n  public boolean equals( final String type, final String subtype ) {\n    assert type != null;\n    assert subtype != null;\n\n    return mTypeName.name().equalsIgnoreCase( type ) &amp;&amp;\n      mSubtype.equalsIgnoreCase( subtype );\n  }\n\n  public boolean isType( final TypeName typeName ) {\n    return mTypeName == typeName;\n  }\n\n  public String getSubtype() {\n    return mSubtype;\n  }\n   \n  @Override\n  public String toString() {\n    return mMediaType;\n  }\n}\n</code></pre>\n<h1>MediaTypeExtension.java</h1>\n<p>Last piece of the puzzle is a map of <code>MediaType</code>s to their known and common/popular file name extensions. This allows bidirectional lookup based on file name extensions.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static MediaType.*;\nimport static java.util.List.of;\n\npublic enum MediaTypeExtension {\n  MEDIA_APP_ACAD( APP_ACAD, of( &quot;dwg&quot; ) ),\n  MEDIA_APP_PDF( APP_PDF ),\n  MEDIA_APP_PS( APP_PS, of( &quot;ps&quot; ) ),\n  MEDIA_APP_EPS( APP_EPS ),\n  MEDIA_APP_ZIP( APP_ZIP ),\n\n  MEDIA_AUDIO_MP3( AUDIO_MP3 ),\n  MEDIA_AUDIO_BASIC( AUDIO_BASIC, of( &quot;au&quot; ) ),\n  MEDIA_AUDIO_WAV( AUDIO_WAV, of( &quot;wav&quot; ) ),\n\n  MEDIA_FONT_OTF( FONT_OTF ),\n  MEDIA_FONT_TTF( FONT_TTF ),\n\n  MEDIA_IMAGE_APNG( IMAGE_APNG ),\n  MEDIA_IMAGE_BMP( IMAGE_BMP ),\n  MEDIA_IMAGE_GIF( IMAGE_GIF ),\n  MEDIA_IMAGE_JPEG( IMAGE_JPEG,\n                    of( &quot;jpg&quot;, &quot;jpe&quot;, &quot;jpeg&quot;, &quot;jfif&quot;, &quot;pjpeg&quot;, &quot;pjp&quot; ) ),\n  MEDIA_IMAGE_PNG( IMAGE_PNG ),\n  MEDIA_IMAGE_PSD( IMAGE_PHOTOSHOP, of( &quot;psd&quot; ) ),\n  MEDIA_IMAGE_SVG( IMAGE_SVG_XML, of( &quot;svg&quot; ) ),\n  MEDIA_IMAGE_TIFF( IMAGE_TIFF, of( &quot;tiff&quot;, &quot;tif&quot; ) ),\n  MEDIA_IMAGE_WEBP( IMAGE_WEBP ),\n  MEDIA_IMAGE_X_BITMAP( IMAGE_X_BITMAP, of( &quot;xbm&quot; ) ),\n  MEDIA_IMAGE_X_PIXMAP( IMAGE_X_PIXMAP, of( &quot;xpm&quot; ) ),\n\n  MEDIA_VIDEO_MNG( VIDEO_MNG, of( &quot;mng&quot; ) ),\n\n  MEDIA_TEXT_MARKDOWN( TEXT_MARKDOWN, of(\n    &quot;md&quot;, &quot;markdown&quot;, &quot;mdown&quot;, &quot;mdtxt&quot;, &quot;mdtext&quot;, &quot;mdwn&quot;, &quot;mkd&quot;, &quot;mkdown&quot;,\n    &quot;mkdn&quot; ) ),\n  MEDIA_TEXT_PLAIN( TEXT_PLAIN, of( &quot;txt&quot;, &quot;asc&quot;, &quot;ascii&quot;, &quot;text&quot;, &quot;utxt&quot; ) ),\n  MEDIA_TEXT_R_MARKDOWN( TEXT_R_MARKDOWN, of( &quot;Rmd&quot; ) ),\n  MEDIA_TEXT_R_XML( TEXT_R_XML, of( &quot;Rxml&quot; ) ),\n  MEDIA_TEXT_XHTML( TEXT_XHTML, of( &quot;xhtml&quot; ) ),\n  MEDIA_TEXT_XML( TEXT_XML ),\n  MEDIA_TEXT_YAML( TEXT_YAML, of( &quot;yaml&quot;, &quot;yml&quot; ) ),\n\n  MEDIA_UNDEFINED( UNDEFINED, of( &quot;undefined&quot; ) );\n\n  private final MediaType mMediaType;\n  private final List&lt;String&gt; mExtensions;\n\n  MediaTypeExtension( final MediaType mediaType ) {\n    this( mediaType, of( mediaType.getSubtype() ) );\n  }\n\n  MediaTypeExtension(\n    final MediaType mediaType, final List&lt;String&gt; extensions ) {\n    assert mediaType != null;\n    assert extensions != null;\n    assert !extensions.isEmpty();\n\n    mMediaType = mediaType;\n    mExtensions = extensions;\n  }\n\n  public String getExtension() {\n    return mExtensions.get( 0 );\n  }\n\n  public static MediaTypeExtension valueFrom( final MediaType mediaType ) {\n    for( final var type : values() ) {\n      if( type.isMediaType( mediaType ) ) {\n        return type;\n      }\n    }\n\n    return MEDIA_UNDEFINED;\n  }\n\n  boolean isMediaType( final MediaType mediaType ) {\n    return mMediaType == mediaType;\n  }\n\n  static MediaType getMediaType( final String extension ) {\n    final var sanitized = sanitize( extension );\n\n    for( final var mediaType : MediaTypeExtension.values() ) {\n      if( mediaType.isType( sanitized ) ) {\n        return mediaType.getMediaType();\n      }\n    }\n\n    return UNDEFINED;\n  }\n\n  private boolean isType( final String sanitized ) {\n    for( final var extension : mExtensions ) {\n      if( extension.equalsIgnoreCase( sanitized ) ) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  private static String sanitize( final String extension ) {\n    return extension == null ? &quot;&quot; : extension.toLowerCase();\n  }\n\n  private MediaType getMediaType() {\n    return mMediaType;\n  }\n}\n</code></pre>\n<hr />\n<p>Usages:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// EXAMPLE -- Detect media type\n//\nfinal File image = new File( &quot;filename.jpg&quot; );\nfinal MediaType mt = StreamMediaType.getMediaType( image );\n\n// Tricky! The JPG could be a PNG in disguise.\nif( mt.isType( MediaType.TypeName.IMAGE ) ) {\n\n  if( mt == MediaType.IMAGE_PNG ) {\n    // Nice try! Sneaky sneak.\n  }\n}\n\n// EXAMPLE -- Get typical media type file name extension\n//\nfinal String ext = MediaTypeExtension.valueFrom( MediaType.IMAGE_SVG_XML ).getExtension();\n\n// EXAMPLE -- Get media type from HTTP request\n//\nfinal var url = new URL( &quot;https://localhost/path/file.ext&quot; );\nfinal var conn = (HttpURLConnection) url.openConnection();\nfinal var contentType = conn.getContentType();\nMediaType mediaType = valueFrom( contentType );\n\n// Fall back to stream detection probe\nif( mediaType == UNDEFINED ) {\n  mediaType = StreamMediaType.getMediaType( conn.getInputStream() );\n}\n\nconn.disconnect();\n</code></pre>\n<p>You get the idea.</p>\n<hr />\n<p>Short library review:</p>\n<ul>\n<li><a href=\"https://tika.apache.org/\" rel=\"nofollow noreferrer\">Apache Tika</a> -- 600kb bloat, needs multiple lines to configure, and multiple JAR files.</li>\n<li><a href=\"https://github.com/arimus/jmimemagic/\" rel=\"nofollow noreferrer\">jMimeMagic</a> -- Unfinished, needs multiple lines to configure.</li>\n<li><a href=\"http://mime-util.sourceforge.net/\" rel=\"nofollow noreferrer\">MimeUtil2</a> -- Fairly large, didn't work out-of-the-box.</li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/file/spi/FileTypeDetector.html\" rel=\"nofollow noreferrer\">FileTypeDetector</a> -- Bundled with JDK, buggier than a mountain pine beetle infested forest.</li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/file/spi/FileTypeDetector.html\" rel=\"nofollow noreferrer\">Files.probeContentType</a> -- Detection is platform-specific and considered unreliable (<a href=\"https://stackoverflow.com/a/65966588/59087\">source</a>).</li>\n<li><a href=\"https://docs.oracle.com/javase/7/docs/api/javax/activation/MimetypesFileTypeMap.html\" rel=\"nofollow noreferrer\">MimetypesFileTypeMap</a> -- Bundled with activation.jar, uses file name extension.</li>\n</ul>\n<hr />\n<p>Sample audio, video, and image files for testing:</p>\n<ul>\n<li><a href=\"http://mirrors.standaloneinstaller.com/video-sample/\" rel=\"nofollow noreferrer\">http://mirrors.standaloneinstaller.com/video-sample/</a></li>\n<li><a href=\"https://www.w3.org/People/mimasa/test/imgformat/\" rel=\"nofollow noreferrer\">https://www.w3.org/People/mimasa/test/imgformat/</a></li>\n</ul>\n<hr />\n<p>Note that nearly all XML documents will begin the same way:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; standalone=&quot;no&quot;?&gt;\n</code></pre>\n<p>Since SVG documents are XML documents, many SVG documents will contain that XML declaration and may also contain:</p>\n<pre><code>&lt;!DOCTYPE svg PUBLIC &quot;-//W3C//DTD SVG 1.0//EN&quot; &quot;http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd&quot;&gt;\n</code></pre>\n<p>Detecting the SVG doctype would be possible by bumping the magic bytes from 11 to 13. Still, the doctype is not required, meaning that the SVG document could also begin after the XML declaration as follows:</p>\n<pre><code>&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;\n</code></pre>\n<p>Meaning, use caution when using this code to detect SVG file formats, as it is not reliable. Instead, consider using the HTTP Content-Type or filename extension.</p>\n<p>Compounding the issue is that comments of arbitrary length can be inserted before the <code>&lt;svg</code> tag, making detection extra-difficult.</p>\n<hr />\n<p><sup>1</sup> &quot;MIME type&quot; is a deprecated term.</p>\n"},{"tags":[],"owner":{"account_id":1045732,"reputation":11348,"user_id":1050755,"accept_rate":51,"display_name":"user1050755"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621341655,"creation_date":1621341332,"answer_id":67586306,"question_id":51438,"body_markdown":"If you want a reliable (ie. consistent) way of mapping file extensions to mime-types, here is what I use:\r\n\r\nhttps://github.com/jjYBdx4IL/misc/blob/master/text-utils/src/main/java/com/github/jjYBdx4IL/utils/text/MimeType.java\r\n\r\nIt includes a bundled mime types database and basically inverts the logic of javax.activation&#39;s MimetypesFileTypeMap class by using the database to initialize the &quot;programmatic&quot; entries. That way the library-defined types always have precedence over what may be defined in unbundled resources.","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<p>If you want a reliable (ie. consistent) way of mapping file extensions to mime-types, here is what I use:</p>\n<p><a href=\"https://github.com/jjYBdx4IL/misc/blob/master/text-utils/src/main/java/com/github/jjYBdx4IL/utils/text/MimeType.java\" rel=\"nofollow noreferrer\">https://github.com/jjYBdx4IL/misc/blob/master/text-utils/src/main/java/com/github/jjYBdx4IL/utils/text/MimeType.java</a></p>\n<p>It includes a bundled mime types database and basically inverts the logic of javax.activation's MimetypesFileTypeMap class by using the database to initialize the &quot;programmatic&quot; entries. That way the library-defined types always have precedence over what may be defined in unbundled resources.</p>\n"},{"tags":[],"owner":{"account_id":6210245,"reputation":55,"user_id":4836726,"display_name":"MIsmail"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1635332521,"creation_date":1635332521,"answer_id":69737453,"question_id":51438,"body_markdown":"Actually, [Apache Tika detector][1] `Tika.detect(File)` is the best option and more accurate than `Files.probeContentType(path)`.\r\n\r\ncheck this [great quick reference][2] which contains examples and code samples.\r\n\r\n\r\n  [1]: https://tika.apache.org/2.1.0/detection.html\r\n  [2]: https://dzone.com/articles/determining-file-types-java","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<p>Actually, <a href=\"https://tika.apache.org/2.1.0/detection.html\" rel=\"nofollow noreferrer\">Apache Tika detector</a> <code>Tika.detect(File)</code> is the best option and more accurate than <code>Files.probeContentType(path)</code>.</p>\n<p>check this <a href=\"https://dzone.com/articles/determining-file-types-java\" rel=\"nofollow noreferrer\">great quick reference</a> which contains examples and code samples.</p>\n"},{"tags":[],"owner":{"account_id":14139946,"reputation":86,"user_id":10215082,"display_name":"yashpal singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674893856,"creation_date":1674893856,"answer_id":75266293,"question_id":51438,"body_markdown":"in Java, the URLConnection class has a method called guessContentTypeFromName(String fileName) that can be used to guess the MIME media type (also known as the content type) of a file based on its file name. The method uses the file name’s extension to determine the content type.\r\n\r\n    String fileName = &quot;image.jpg&quot;;\r\n    String contentType = URLConnection.guessContentTypeFromName(fileName);\r\n    System.out.println(contentType); // &quot;image/jpeg&quot;\r\n\r\n[To know more Read this article][1]\r\n\r\n\r\n  [1]: https://factorialprogram.com/2023/01/28/java-network-programming/guessing-mime-media-types-in-java-with-example/","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<p>in Java, the URLConnection class has a method called guessContentTypeFromName(String fileName) that can be used to guess the MIME media type (also known as the content type) of a file based on its file name. The method uses the file name’s extension to determine the content type.</p>\n<pre><code>String fileName = &quot;image.jpg&quot;;\nString contentType = URLConnection.guessContentTypeFromName(fileName);\nSystem.out.println(contentType); // &quot;image/jpeg&quot;\n</code></pre>\n<p><a href=\"https://factorialprogram.com/2023/01/28/java-network-programming/guessing-mime-media-types-in-java-with-example/\" rel=\"nofollow noreferrer\">To know more Read this article</a></p>\n"}],"owner":{"account_id":1425,"reputation":8501,"user_id":1900,"accept_rate":84,"display_name":"Lee Theobald"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":510590,"favorite_count":0,"down_vote_count":1,"up_vote_count":384,"accepted_answer_id":8973468,"answer_count":28,"score":383,"last_activity_date":1675466420,"creation_date":1220951466,"question_id":51438,"body_markdown":"How do you get a Media Type (MIME type) from a file using Java?  So far I&#39;ve tried JMimeMagic &amp; Mime-Util. The first gave me memory exceptions, the second doesn&#39;t close its streams properly.\r\n\r\nHow would you probe the file to determine its actual type (not merely based on the extension)?","title":"How to get a file&#39;s Media Type (MIME type)?","body":"<p>How do you get a Media Type (MIME type) from a file using Java?  So far I've tried JMimeMagic &amp; Mime-Util. The first gave me memory exceptions, the second doesn't close its streams properly.</p>\n<p>How would you probe the file to determine its actual type (not merely based on the extension)?</p>\n"},{"tags":["java","hibernate","jpa","persistence"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1675460588,"post_id":75341183,"comment_id":132941501,"body_markdown":"Not sure what you are asking for exactly - is it a question on when JPA calls your method, if at all, or how to write code to use JPA? Persist a new entity, commit, read it back in a new context, update it, commit - basically do what your app will do and see what calls JPA makes on your entity vs what your application makes.","body":"Not sure what you are asking for exactly - is it a question on when JPA calls your method, if at all, or how to write code to use JPA? Persist a new entity, commit, read it back in a new context, update it, commit - basically do what your app will do and see what calls JPA makes on your entity vs what your application makes."},{"owner":{"account_id":2658598,"reputation":111,"user_id":2298785,"display_name":"Romillion"},"score":0,"creation_date":1675499497,"post_id":75341183,"comment_id":132945602,"body_markdown":"The base question is what @Access changing on the Entity and how can prove it on jUnit test","body":"The base question is what @Access changing on the Entity and how can prove it on jUnit test"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1675569434,"post_id":75341183,"comment_id":132956451,"body_markdown":"That is two very different questions. Test is pretty straightforward - run some JPA methods and see what you see. As for what it does: it tells JPA any time it needs to access that value to use the property you&#39;ve defned. That includes internal access when loading the entity from the DB and even when merging in values from detached instances. If you are just learning how it works, you are better off with a debugger or printing the stack instead of manipulating values or you will get &quot;LastName: LastName: LastName: originalLN&quot; effects. Just printing off where/when it is called should be enough","body":"That is two very different questions. Test is pretty straightforward - run some JPA methods and see what you see. As for what it does: it tells JPA any time it needs to access that value to use the property you&#39;ve defned. That includes internal access when loading the entity from the DB and even when merging in values from detached instances. If you are just learning how it works, you are better off with a debugger or printing the stack instead of manipulating values or you will get &quot;LastName: LastName: LastName: originalLN&quot; effects. Just printing off where/when it is called should be enough"}],"answers":[{"comments":[{"owner":{"account_id":2658598,"reputation":111,"user_id":2298785,"display_name":"Romillion"},"score":0,"creation_date":1675499123,"post_id":75341897,"comment_id":132945541,"body_markdown":"Thank you. i&#39;m not sure that i still understand. without Access(value= AccessType.PROPERTY) it would works on that way too because you call student.setFirstName(&quot;John&quot;) and \n    student.setLastName(&quot;Doe&quot;);","body":"Thank you. i&#39;m not sure that i still understand. without Access(value= AccessType.PROPERTY) it would works on that way too because you call student.setFirstName(&quot;John&quot;) and      student.setLastName(&quot;Doe&quot;);"}],"tags":[],"owner":{"account_id":27085849,"reputation":291,"user_id":20634376,"display_name":"Georgii Vlasov"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675466252,"creation_date":1675466252,"answer_id":75341897,"question_id":75341183,"body_markdown":"    I suppose that you can write something like this:\r\n    \r\n    `\r\n    @Test\r\n    public void testAccessAnnotation() {\r\n        // Create a new instance of the Student entity\r\n        Student student = new Student();\r\n        student.setFirstName(&quot;John&quot;);\r\n        student.setLastName(&quot;Doe&quot;);\r\n    \r\n        EntityManager entityManager = entityManagerFactory.createEntityManager();\r\n        entityManager.getTransaction().begin();\r\n        entityManager.persist(student);\r\n        entityManager.getTransaction().commit();\r\n        entityManager.clear();\r\n    \r\n        TypedQuery&lt;Student&gt; query = entityManager.createQuery(&quot;SELECT s FROM Student s WHERE s.ID = :id&quot;, Student.class);\r\n        query.setParameter(&quot;id&quot;, student.getID());\r\n        student = query.getSingleResult();\r\n    \r\n        assertEquals(&quot;John&quot;, student.getFirstName());\r\n        assertEquals(&quot;LastName: Doe&quot;, student.getLastName());\r\n    }\r\n    \r\n    `","title":"JPA annotation @Access","body":"<pre><code>I suppose that you can write something like this:\n\n`\n@Test\npublic void testAccessAnnotation() {\n    // Create a new instance of the Student entity\n    Student student = new Student();\n    student.setFirstName(&quot;John&quot;);\n    student.setLastName(&quot;Doe&quot;);\n\n    EntityManager entityManager = entityManagerFactory.createEntityManager();\n    entityManager.getTransaction().begin();\n    entityManager.persist(student);\n    entityManager.getTransaction().commit();\n    entityManager.clear();\n\n    TypedQuery&lt;Student&gt; query = entityManager.createQuery(&quot;SELECT s FROM Student s WHERE s.ID = :id&quot;, Student.class);\n    query.setParameter(&quot;id&quot;, student.getID());\n    student = query.getSingleResult();\n\n    assertEquals(&quot;John&quot;, student.getFirstName());\n    assertEquals(&quot;LastName: Doe&quot;, student.getLastName());\n}\n\n`\n</code></pre>\n"}],"owner":{"account_id":2658598,"reputation":111,"user_id":2298785,"display_name":"Romillion"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675466252,"creation_date":1675459710,"question_id":75341183,"body_markdown":"**@Access annotation**\r\n\r\ni&#39;m confused how this annotation works. I know by default, the access type is defined by the place where we put the identifier annotation (@Id). \r\nIf we put it on the field – it will be AccessType.FIELD, \r\nif we put it on the getter – it will be AccessType.PROPERTY.\r\n\r\nThis is my entity\r\n```\r\n@Entity\r\npublic class Student  {\r\n    @Id\r\n    @GeneratedValue\r\n    private Long ID;\r\n\r\n    private String firstName;\r\n\r\n    @Access(value= AccessType.PROPERTY)\r\n    private String lastName;\r\n\r\n    public String getFirstName() {\r\n        System.out.println(&quot;~~~~~~~~getFirstName~~~~~~~~~&quot;);\r\n        return firstName;\r\n    }\r\n\r\n    public void setFirstName(String firstName) {\r\n        this.firstName = &quot;FirstName: &quot; + firstName;\r\n        System.out.println(&quot;~~~~~~~~setFirstName~~~~~~~~~&quot;);\r\n    }\r\n\r\n    public String getlastName() {\r\n        System.out.println(&quot;~~~~~~~~getlastName~~~~~~~~~&quot;);\r\n        return lastName;\r\n    }\r\n\r\n    public void setLastName(String lastName) {\r\n        this.lastName = &quot;LastName: &quot;+ lastName;\r\n        System.out.println(&quot;~~~~~~~~setLastname~~~~~~~~~&quot;);\r\n    }\r\n}\r\n```\r\nI add to the Setter prefix (&quot;FirstName: &quot; and &quot;LastName: &quot;) to check if it will be called.\r\n\r\nAs i have @Id on the field that&#39;s means AccessType.FIELD, but i change it in **lastName** to AccessType.PROPERTY. \r\n\r\n**As i understood on this case JPA should save to the database firstName field without prefix but lastName with** (because it will call setter *setLastName*)\r\n\r\n\r\nI&#39;m not sure that i understand how to use this on project and how to check if it works. I want to write a test to prove it but i don&#39;t know how to implement this. can you please help me. I want to prove that JPA does not call Getter/Setter to **firstName** and call it for **lastName** fields.\r\n\r\nThis is my test without implementation\r\n\r\n```\r\nclass StudentTest {\r\n    private EntityManagerFactory entityManagerFactory;\r\n    private EntityManager entityManager;\r\n\r\n    @BeforeEach\r\n    public void init() {\r\n        entityManagerFactory = Persistence.createEntityManagerFactory( &quot;in.memory.test&quot;);\r\n        entityManager = entityManagerFactory.createEntityManager();\r\n        entityManager.getTransaction().begin();\r\n    }\r\n    @AfterEach\r\n    public void destroy() {\r\n        entityManager.getTransaction().commit();\r\n        entityManager.close();\r\n        entityManagerFactory.close();\r\n    }\r\n\r\n    @Test\r\n    public void studentFirstName(){\r\n\r\n    }\r\n\r\n    @Test\r\n    public void studentLastName(){\r\n\r\n    }\r\n}\r\n```\r\n\r\n\r\n","title":"JPA annotation @Access","body":"<p><strong>@Access annotation</strong></p>\n<p>i'm confused how this annotation works. I know by default, the access type is defined by the place where we put the identifier annotation (@Id).\nIf we put it on the field – it will be AccessType.FIELD,\nif we put it on the getter – it will be AccessType.PROPERTY.</p>\n<p>This is my entity</p>\n<pre><code>@Entity\npublic class Student  {\n    @Id\n    @GeneratedValue\n    private Long ID;\n\n    private String firstName;\n\n    @Access(value= AccessType.PROPERTY)\n    private String lastName;\n\n    public String getFirstName() {\n        System.out.println(&quot;~~~~~~~~getFirstName~~~~~~~~~&quot;);\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = &quot;FirstName: &quot; + firstName;\n        System.out.println(&quot;~~~~~~~~setFirstName~~~~~~~~~&quot;);\n    }\n\n    public String getlastName() {\n        System.out.println(&quot;~~~~~~~~getlastName~~~~~~~~~&quot;);\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = &quot;LastName: &quot;+ lastName;\n        System.out.println(&quot;~~~~~~~~setLastname~~~~~~~~~&quot;);\n    }\n}\n</code></pre>\n<p>I add to the Setter prefix (&quot;FirstName: &quot; and &quot;LastName: &quot;) to check if it will be called.</p>\n<p>As i have @Id on the field that's means AccessType.FIELD, but i change it in <strong>lastName</strong> to AccessType.PROPERTY.</p>\n<p><strong>As i understood on this case JPA should save to the database firstName field without prefix but lastName with</strong> (because it will call setter <em>setLastName</em>)</p>\n<p>I'm not sure that i understand how to use this on project and how to check if it works. I want to write a test to prove it but i don't know how to implement this. can you please help me. I want to prove that JPA does not call Getter/Setter to <strong>firstName</strong> and call it for <strong>lastName</strong> fields.</p>\n<p>This is my test without implementation</p>\n<pre><code>class StudentTest {\n    private EntityManagerFactory entityManagerFactory;\n    private EntityManager entityManager;\n\n    @BeforeEach\n    public void init() {\n        entityManagerFactory = Persistence.createEntityManagerFactory( &quot;in.memory.test&quot;);\n        entityManager = entityManagerFactory.createEntityManager();\n        entityManager.getTransaction().begin();\n    }\n    @AfterEach\n    public void destroy() {\n        entityManager.getTransaction().commit();\n        entityManager.close();\n        entityManagerFactory.close();\n    }\n\n    @Test\n    public void studentFirstName(){\n\n    }\n\n    @Test\n    public void studentLastName(){\n\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","database","mongodb","repository"],"owner":{"account_id":18766850,"reputation":41,"user_id":13684522,"display_name":"Madhan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675465450,"creation_date":1675465450,"question_id":75341825,"body_markdown":"I&#39;m creating dynamic collections by using mongoTemplate in service layer. Upto this everything went well but when saving into collection dynamically makes issue. explaining here...\r\n\r\nService Layer\r\n```\r\n    public void createCollection(String collectionName) {\r\n        mongoTemplate.createCollection(collectionName);\r\n    }\r\n\r\npublic Object updateLessonOrSurveyOrQuery(String courseID, int levelNo, CourseAsset courseAssetToUpdate) {\r\n      .....\r\n        courseAssetRepo.saveByCourseID(courseID, courseAssetToUpdate);\r\n      .....\r\n}\r\n```\r\n\r\nRepo Layer\r\n\r\n```\r\n@Repository\r\npublic interface CourseAssetRepo extends MongoRepository&lt;CourseAsset, String&gt; {\r\n    ArrayList&lt;CourseAsset&gt; findAllByCourseID(String courseID);\r\n    void saveByCourseID( String courseID, CourseAsset courseAsset);\r\n}\r\n\r\n```\r\nfindAllByCourseID working but saveByCourseID not woking;\r\n\r\nPOJO class\r\n```\r\n@Data\r\npublic class CourseAsset {\r\n    private int level;\r\n    private String title;\r\n    private String courseID;\r\n}\r\n\r\n```\r\n\r\nERROR :\r\n```\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;courseAssetRepo&#39; defined in com.dotbw.learn.repo.CourseAssetRepo defined in @EnableMongoRepositories declared on MongoRepositoriesRegistrar.EnableMongoRepositoriesConfiguration: Could not create query for public abstract void com.dotbw.learn.repo.CourseAssetRepo.saveByCourseID(java.lang.String,com.dotbw.learn.model.CourseAsset); Reason: No property &#39;saveByCourseID&#39; found for type &#39;CourseAsset&#39;\r\n```\r\n\r\ni can understand repo expects CourseAsset Data inside the pojo class. But while saving how we can provide this value.\r\n\r\n\r\n\r\n\r\ni have tried many way as ChatGPT said but nothing worked.","title":"Passing Dynamic collection name on Spring MongoRepository not working","body":"<p>I'm creating dynamic collections by using mongoTemplate in service layer. Upto this everything went well but when saving into collection dynamically makes issue. explaining here...</p>\n<p>Service Layer</p>\n<pre><code>    public void createCollection(String collectionName) {\n        mongoTemplate.createCollection(collectionName);\n    }\n\npublic Object updateLessonOrSurveyOrQuery(String courseID, int levelNo, CourseAsset courseAssetToUpdate) {\n      .....\n        courseAssetRepo.saveByCourseID(courseID, courseAssetToUpdate);\n      .....\n}\n</code></pre>\n<p>Repo Layer</p>\n<pre><code>@Repository\npublic interface CourseAssetRepo extends MongoRepository&lt;CourseAsset, String&gt; {\n    ArrayList&lt;CourseAsset&gt; findAllByCourseID(String courseID);\n    void saveByCourseID( String courseID, CourseAsset courseAsset);\n}\n\n</code></pre>\n<p>findAllByCourseID working but saveByCourseID not woking;</p>\n<p>POJO class</p>\n<pre><code>@Data\npublic class CourseAsset {\n    private int level;\n    private String title;\n    private String courseID;\n}\n\n</code></pre>\n<p>ERROR :</p>\n<pre><code>Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'courseAssetRepo' defined in com.dotbw.learn.repo.CourseAssetRepo defined in @EnableMongoRepositories declared on MongoRepositoriesRegistrar.EnableMongoRepositoriesConfiguration: Could not create query for public abstract void com.dotbw.learn.repo.CourseAssetRepo.saveByCourseID(java.lang.String,com.dotbw.learn.model.CourseAsset); Reason: No property 'saveByCourseID' found for type 'CourseAsset'\n</code></pre>\n<p>i can understand repo expects CourseAsset Data inside the pojo class. But while saving how we can provide this value.</p>\n<p>i have tried many way as ChatGPT said but nothing worked.</p>\n"},{"tags":["java","http","filter","micronaut"],"answers":[{"tags":[],"owner":{"account_id":930977,"reputation":8260,"user_id":960875,"accept_rate":98,"display_name":"saw303"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675465226,"creation_date":1675465226,"answer_id":75341802,"question_id":75340931,"body_markdown":"You can do this by returning a response directly created in the filter.\r\n\r\n```java\r\n\r\n@Filter(&quot;/hello&quot;)\r\npublic class HelloWorldFilter implements HttpServerFilter {\r\n    @Override\r\n    public Publisher&lt;MutableHttpResponse&lt;?&gt;&gt; doFilter(HttpRequest&lt;?&gt; request, ServerFilterChain chain) {\r\n\r\n        if(HelloWorldValidator.valid(request){\r\n           //if valid, keep proceeding further\r\n           return chain.proceed(request);\r\n        }\r\n        else {\r\n           // if not valid, I want to stop here and return the 403 response\r\n           return Mono.just(HttpResponse.status(HttpStatus.FORBIDDEN));\r\n        }\r\n    }\r\n}\r\n```","title":"How to stop proceeding the request further with Micronaut filter","body":"<p>You can do this by returning a response directly created in the filter.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Filter(&quot;/hello&quot;)\npublic class HelloWorldFilter implements HttpServerFilter {\n    @Override\n    public Publisher&lt;MutableHttpResponse&lt;?&gt;&gt; doFilter(HttpRequest&lt;?&gt; request, ServerFilterChain chain) {\n\n        if(HelloWorldValidator.valid(request){\n           //if valid, keep proceeding further\n           return chain.proceed(request);\n        }\n        else {\n           // if not valid, I want to stop here and return the 403 response\n           return Mono.just(HttpResponse.status(HttpStatus.FORBIDDEN));\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":16453853,"reputation":29,"user_id":11886595,"display_name":"Rionash"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":198,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1675465226,"creation_date":1675457546,"question_id":75340931,"body_markdown":"I&#39;d like to use filter to validate the request. \r\nLooking for a way to response with 403 if it&#39;s not valid.\r\n\r\n\r\n\r\n```\r\n@Filter(&quot;/hello&quot;)\r\npublic class HelloWorldFilter implements HttpServerFilter {\r\n    @Override\r\n    public Publisher&lt;MutableHttpResponse&lt;?&gt;&gt; doFilter(HttpRequest&lt;?&gt; request, ServerFilterChain chain) {\r\n        if(HelloWorldValidator.valid(request){\r\n//if valid, keep proceeding further\r\n           return chain.proceed(request);\r\n        }else{\r\n//if not valid, I want to stop here and return the 400 response\r\n        ...\r\n        }\r\n\r\n    }\r\n}\r\n\r\n```","title":"How to stop proceeding the request further with Micronaut filter","body":"<p>I'd like to use filter to validate the request.\nLooking for a way to response with 403 if it's not valid.</p>\n<pre><code>@Filter(&quot;/hello&quot;)\npublic class HelloWorldFilter implements HttpServerFilter {\n    @Override\n    public Publisher&lt;MutableHttpResponse&lt;?&gt;&gt; doFilter(HttpRequest&lt;?&gt; request, ServerFilterChain chain) {\n        if(HelloWorldValidator.valid(request){\n//if valid, keep proceeding further\n           return chain.proceed(request);\n        }else{\n//if not valid, I want to stop here and return the 400 response\n        ...\n        }\n\n    }\n}\n\n</code></pre>\n"},{"tags":["java","spring-boot","unit-testing","resilience4j"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1675466144,"post_id":75341743,"comment_id":132942512,"body_markdown":"Does this answer your question? [Spring @Value TypeMismatchException:Failed to convert value of type &#39;java.lang.String&#39; to required type &#39;java.lang.Double&#39;](https://stackoverflow.com/questions/42733067/spring-value-typemismatchexceptionfailed-to-convert-value-of-type-java-lang-s)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/42733067/spring-value-typemismatchexceptionfailed-to-convert-value-of-type-java-lang-s\">Spring @Value TypeMismatchException:Failed to convert value of type &#39;java.lang.String&#39; to required type &#39;java.lang.Double&#39;</a>"},{"owner":{"account_id":7129598,"reputation":872,"user_id":5451356,"accept_rate":73,"display_name":"terrabl"},"score":0,"creation_date":1675659107,"post_id":75341743,"comment_id":132969339,"body_markdown":"That code is not a part of a repo that I can alter.","body":"That code is not a part of a repo that I can alter."}],"owner":{"account_id":7129598,"reputation":872,"user_id":5451356,"accept_rate":73,"display_name":"terrabl"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675464595,"creation_date":1675464595,"question_id":75341743,"body_markdown":"I&#39;m attempting to unit test a resilience4j CircuitBreaker, and according to the documentation and my testing, I need to utilize the `@SpringBootTest` annotation in order to correctly instantiate the circuit breaker for the unit test. \r\n\r\nWhen I attempt to run the unit test I am receiving a UnsatisfiedDependencyException when it tries to instantiate a downstream bean because the value of the property instead of being &quot;true&quot; or &quot;false&quot; is the string value of the property `${boolean.property:true}` instead of when I normally run the project manually it is just `true`.\r\n\r\nMy unit test is as follows (I am using JUnit 5 and Spring Boot 2.6.6)\r\n\r\n```java\r\n@SpringBootTest(classes = Application.class)\r\nclass CircuitBreakerTest {\r\n\r\n    @MockBean\r\n    private Webservice webservice;\r\n\r\n    private final Handler handler = new Handler();\r\n\r\n    @Test\r\n    public void testChangeMatrixCircuitBreaker() {\r\n\r\n        when(webservice.process(any())).thenThrow(new RuntimeException());\r\n\r\n        for (int i = 0; i &lt; 11; i++) {\r\n            // circuit breaker should trip after 10 failures\r\n            ResponseEntity response = handler.processClientRequest(&quot;id&quot;, &quot;&lt;body/&gt;&quot;);\r\n            if (i &gt; 9) {\r\n                assertTrue(&quot;CircuitBreaker tripped&quot;.equals((String) response.getBody()));\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nApplication.java\r\n```java\r\n@SpringBootApplication\r\n@EnableMBeanExport(registration = RegistrationPolicy.IGNORE_EXISTING)\r\n@ImportResource({&quot;classpath:serviceContext.xml&quot;})\r\n@ComponentScan({&quot;application.foundation&quot;, &quot;config&quot;})\r\npublic class Application {\r\n\r\n   private static final Logger LOGGER = LogManager.getLogger(AISApplication.class);\r\n\r\n   public static void main(String[] args) {\r\n      SpringApplication.run(AISApplication.class, args);\r\n   }\r\n\r\n   @PreDestroy\r\n   public void tearDown() {\r\n      LOGGER.info(&quot;PreDestroy - Shutting Down&quot;);\r\n   }\r\n\r\n}\r\n```\r\n\r\nThe bean that is causing the exception is defined inside of the `application.foundation` component scan. More exactly inside of the resource that it imports.\r\n```java\r\npackage application.foundation.security;\r\n\r\n@Configuration\r\n@ImportResource({ &quot;classpath:securedClientContext.xml&quot; })\r\npublic class OutboundSecurityConfiguration {\r\n    ...\r\n}\r\n```\r\n\r\nsecuredClientContext.xml (note that I do not have the ability to change this file)\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n       xmlns:util=&quot;http://www.springframework.org/schema/util&quot;\r\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\r\n   http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd&quot;&gt;\r\n    \t&lt;bean id=&quot;beanIDontControl&quot; class=&quot;bean.i.dont.control.security.BeanIDontControlBean&quot;&gt;\r\n\t\t   &lt;constructor-arg name=&quot;unique&quot; value=&quot;${boolean.property:true}&quot; /&gt;\r\n\t    &lt;/bean&gt;\r\n\r\n&lt;/beans&gt;\r\n```\r\n\r\nThe stack trace is as follows:\r\n\r\n```\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: \r\nError creating bean with name &#39;beanIDontControl&#39; defined in class path resource [securedClientContext.xml]: \r\nUnsatisfied dependency expressed through constructor parameter 0: Could not convert argument value of type [java.lang.String] to required type [boolean]: \r\nFailed to convert value of type &#39;java.lang.String&#39; to required type &#39;boolean&#39;; nested exception is java.lang.IllegalArgumentException: Invalid boolean value [${boolean.property:true}]\r\n```\r\n\r\nIt&#39;s failing on line 761 of `ContructorResolver`\r\n```java\r\n// when i unit test originalValue = ${boolean.property:true} when i run normally it is just true\r\nconvertedValue = converter.convertIfNecessary(originalValue, paramType, methodParam);\r\n```\r\n\r\nDoes anyone know a way that I could possibly mock or ignore this bean? Maybe even ignore the whole component scale of that security package? I&#39;ve tried use @TestConfiguration, I&#39;ve tried everything around @TestPropertySource, I&#39;ve tried using the property field within @SpringBootTest to manually set the values, no matter what I do I cannot see a change in that property.\r\n","title":"Getting a UnsatisfiedDependencyException In SpringBootTest when trying to convert property (i.e. ${service.version}) to boolean value","body":"<p>I'm attempting to unit test a resilience4j CircuitBreaker, and according to the documentation and my testing, I need to utilize the <code>@SpringBootTest</code> annotation in order to correctly instantiate the circuit breaker for the unit test.</p>\n<p>When I attempt to run the unit test I am receiving a UnsatisfiedDependencyException when it tries to instantiate a downstream bean because the value of the property instead of being &quot;true&quot; or &quot;false&quot; is the string value of the property <code>${boolean.property:true}</code> instead of when I normally run the project manually it is just <code>true</code>.</p>\n<p>My unit test is as follows (I am using JUnit 5 and Spring Boot 2.6.6)</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest(classes = Application.class)\nclass CircuitBreakerTest {\n\n    @MockBean\n    private Webservice webservice;\n\n    private final Handler handler = new Handler();\n\n    @Test\n    public void testChangeMatrixCircuitBreaker() {\n\n        when(webservice.process(any())).thenThrow(new RuntimeException());\n\n        for (int i = 0; i &lt; 11; i++) {\n            // circuit breaker should trip after 10 failures\n            ResponseEntity response = handler.processClientRequest(&quot;id&quot;, &quot;&lt;body/&gt;&quot;);\n            if (i &gt; 9) {\n                assertTrue(&quot;CircuitBreaker tripped&quot;.equals((String) response.getBody()));\n            }\n        }\n    }\n}\n</code></pre>\n<p>Application.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\n@EnableMBeanExport(registration = RegistrationPolicy.IGNORE_EXISTING)\n@ImportResource({&quot;classpath:serviceContext.xml&quot;})\n@ComponentScan({&quot;application.foundation&quot;, &quot;config&quot;})\npublic class Application {\n\n   private static final Logger LOGGER = LogManager.getLogger(AISApplication.class);\n\n   public static void main(String[] args) {\n      SpringApplication.run(AISApplication.class, args);\n   }\n\n   @PreDestroy\n   public void tearDown() {\n      LOGGER.info(&quot;PreDestroy - Shutting Down&quot;);\n   }\n\n}\n</code></pre>\n<p>The bean that is causing the exception is defined inside of the <code>application.foundation</code> component scan. More exactly inside of the resource that it imports.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package application.foundation.security;\n\n@Configuration\n@ImportResource({ &quot;classpath:securedClientContext.xml&quot; })\npublic class OutboundSecurityConfiguration {\n    ...\n}\n</code></pre>\n<p>securedClientContext.xml (note that I do not have the ability to change this file)</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n       xmlns:util=&quot;http://www.springframework.org/schema/util&quot;\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n   http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd&quot;&gt;\n        &lt;bean id=&quot;beanIDontControl&quot; class=&quot;bean.i.dont.control.security.BeanIDontControlBean&quot;&gt;\n           &lt;constructor-arg name=&quot;unique&quot; value=&quot;${boolean.property:true}&quot; /&gt;\n        &lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre>\n<p>The stack trace is as follows:</p>\n<pre><code>Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: \nError creating bean with name 'beanIDontControl' defined in class path resource [securedClientContext.xml]: \nUnsatisfied dependency expressed through constructor parameter 0: Could not convert argument value of type [java.lang.String] to required type [boolean]: \nFailed to convert value of type 'java.lang.String' to required type 'boolean'; nested exception is java.lang.IllegalArgumentException: Invalid boolean value [${boolean.property:true}]\n</code></pre>\n<p>It's failing on line 761 of <code>ContructorResolver</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>// when i unit test originalValue = ${boolean.property:true} when i run normally it is just true\nconvertedValue = converter.convertIfNecessary(originalValue, paramType, methodParam);\n</code></pre>\n<p>Does anyone know a way that I could possibly mock or ignore this bean? Maybe even ignore the whole component scale of that security package? I've tried use @TestConfiguration, I've tried everything around @TestPropertySource, I've tried using the property field within @SpringBootTest to manually set the values, no matter what I do I cannot see a change in that property.</p>\n"},{"tags":["java","bufferedimage"],"comments":[{"owner":{"account_id":1435086,"reputation":4492,"user_id":2323964,"accept_rate":87,"display_name":"Novaterata"},"score":1,"creation_date":1675447618,"post_id":75338944,"comment_id":132938438,"body_markdown":"Wrap your closable resources like writers/IO streams in try-with-resources blocks","body":"Wrap your closable resources like writers/IO streams in try-with-resources blocks"},{"owner":{"account_id":7405785,"reputation":2672,"user_id":5634769,"display_name":"gpasch"},"score":0,"creation_date":1675487116,"post_id":75338944,"comment_id":132944387,"body_markdown":"&quot;I tried to change the compression quality but it doesn&#39;t seem working,&quot;: if you try with quality factor less than 0.5 it will definitely reduce the size. so your image is at around 0.5 no visible change in the compressed image is there? So definittely you can bring the size down - e.g. if you compress with 0.1 DID YOU TRY THAt?","body":"&quot;I tried to change the compression quality but it doesn&#39;t seem working,&quot;: if you try with quality factor less than 0.5 it will definitely reduce the size. so your image is at around 0.5 no visible change in the compressed image is there? So definittely you can bring the size down - e.g. if you compress with 0.1 DID YOU TRY THAt?"},{"owner":{"account_id":21926009,"reputation":1,"user_id":16208622,"display_name":"Jason"},"score":0,"creation_date":1675499296,"post_id":75338944,"comment_id":132945567,"body_markdown":"Yes, I if I change the quality factor below 0.5 the size of the image is smaller but I&#39;m wondering why the size of the compressed image when the factor is &gt;= 0.5 is larger than the original photo @gpasch","body":"Yes, I if I change the quality factor below 0.5 the size of the image is smaller but I&#39;m wondering why the size of the compressed image when the factor is &gt;= 0.5 is larger than the original photo @gpasch"}],"answers":[{"comments":[{"owner":{"account_id":195169,"reputation":2946,"user_id":1128593,"display_name":"David Jones"},"score":0,"creation_date":1675466263,"post_id":75339503,"comment_id":132942534,"body_markdown":"I&#39;m not sure it&#39;s accurate to say &quot;header data&quot; causes larger file size.  (JFIF files have a short header.)  Perhaps it&#39;s that the Huffman coding of the coefficients is less efficient after multiple compressions?","body":"I&#39;m not sure it&#39;s accurate to say &quot;header data&quot; causes larger file size.  (JFIF files have a short header.)  Perhaps it&#39;s that the Huffman coding of the coefficients is less efficient after multiple compressions?"},{"owner":{"account_id":7405785,"reputation":2672,"user_id":5634769,"display_name":"gpasch"},"score":0,"creation_date":1675485510,"post_id":75339503,"comment_id":132944278,"body_markdown":"it&#39;s definitely incorrect.","body":"it&#39;s definitely incorrect."}],"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"comment_count":2,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1675447337,"creation_date":1675447337,"answer_id":75339503,"question_id":75338944,"body_markdown":"jpeg images are already compressed. “Compressing” an already compressed file makes it a bit bigger (header data) each time.\r\n\r\nA text file on the other hand will get much smaller.","title":"Java - Compressed Image size is bigger than original (BufferedImage)","body":"<p>jpeg images are already compressed. “Compressing” an already compressed file makes it a bit bigger (header data) each time.</p>\n<p>A text file on the other hand will get much smaller.</p>\n"}],"owner":{"account_id":21926009,"reputation":1,"user_id":16208622,"display_name":"Jason"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1675464063,"creation_date":1675444092,"question_id":75338944,"body_markdown":"I&#39;m trying to compress an image to upload to S3 Bucket but after the image is compressed, the size of the compressed image is larger than the original. From 227KB -&gt; 236KB\r\nCan anybody explain for me why this happened?\r\n\r\nHere&#39;s my code:\r\n\r\n```java\r\n BufferedImage bufferedImage = ImageIO.read(photoFile);\r\n File compressedImageFile = new File(&quot;compressed_image.jpeg&quot;);\r\n OutputStream outputStream = new FileOutputStream(compressedImageFile);\r\n\r\n Iterator&lt;ImageWriter&gt; writers = ImageIO.getImageWritersByFormatName(&quot;jpeg&quot;);\r\n ImageWriter imageWriter = writers.next();\r\n\r\n ImageOutputStream imageOutputStream =  ImageIO.createImageOutputStream(outputStream);\r\n imageWriter.setOutput(imageOutputStream);\r\n\r\n ImageWriteParam imageWriteParam = imageWriter.getDefaultWriteParam();\r\n\r\n  if (imageWriteParam.canWriteCompressed()) {\r\n                    imageWriteParam.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);\r\n  imageWriteParam.setCompressionQuality(0.5f);\r\n  }\r\n    imageWriter.write(null, new IIOImage(bufferedImage, null, null), imageWriteParam);\r\n\r\n  log.info(&quot;Close stream&quot;);\r\n  outputStream.close();\r\n  imageOutputStream.close();\r\n  imageWriter.dispose();\r\n```\r\n\r\nHere&#39;s my image:\r\n[original](https://i.stack.imgur.com/vZ8MQ.jpg) - 227KB\r\n[compressed](https://i.stack.imgur.com/39cAF.jpg) - 236KB\r\n\r\n\r\nI tried to change the compression quality but it doesn&#39;t seem working, and this problem happens in some case, not all","title":"Java - Compressed Image size is bigger than original (BufferedImage)","body":"<p>I'm trying to compress an image to upload to S3 Bucket but after the image is compressed, the size of the compressed image is larger than the original. From 227KB -&gt; 236KB\nCan anybody explain for me why this happened?</p>\n<p>Here's my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code> BufferedImage bufferedImage = ImageIO.read(photoFile);\n File compressedImageFile = new File(&quot;compressed_image.jpeg&quot;);\n OutputStream outputStream = new FileOutputStream(compressedImageFile);\n\n Iterator&lt;ImageWriter&gt; writers = ImageIO.getImageWritersByFormatName(&quot;jpeg&quot;);\n ImageWriter imageWriter = writers.next();\n\n ImageOutputStream imageOutputStream =  ImageIO.createImageOutputStream(outputStream);\n imageWriter.setOutput(imageOutputStream);\n\n ImageWriteParam imageWriteParam = imageWriter.getDefaultWriteParam();\n\n  if (imageWriteParam.canWriteCompressed()) {\n                    imageWriteParam.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);\n  imageWriteParam.setCompressionQuality(0.5f);\n  }\n    imageWriter.write(null, new IIOImage(bufferedImage, null, null), imageWriteParam);\n\n  log.info(&quot;Close stream&quot;);\n  outputStream.close();\n  imageOutputStream.close();\n  imageWriter.dispose();\n</code></pre>\n<p>Here's my image:\n<a href=\"https://i.stack.imgur.com/vZ8MQ.jpg\" rel=\"nofollow noreferrer\">original</a> - 227KB\n<a href=\"https://i.stack.imgur.com/39cAF.jpg\" rel=\"nofollow noreferrer\">compressed</a> - 236KB</p>\n<p>I tried to change the compression quality but it doesn't seem working, and this problem happens in some case, not all</p>\n"},{"tags":["java","android","listview"],"owner":{"account_id":27687005,"reputation":1,"user_id":21134580,"display_name":"PaulK"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675463326,"creation_date":1675355203,"question_id":75326128,"body_markdown":"I have a custom listview, inside of which there is another one. And the one that is nested will not scroll. Perhaps you need to register something in the parent setOnTouchListener? I don&#39;t have anything like that in getView.\r\n[image](https://i.stack.imgur.com/MJdbO.png)\r\n\r\n**my layout**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:background=&quot;@color/gray&quot;\r\n        tools:context=&quot;.invoice.ListPruducts&quot;&gt;\r\n    \r\n        &lt;ListView\r\n            android:id=&quot;@+id/lv1&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;0dp&quot;\r\n            android:divider=&quot;@android:color/transparent&quot;\r\n            android:dividerHeight=&quot;10.0sp&quot;\r\n            android:paddingHorizontal=&quot;10dp&quot;\r\n            android:paddingVertical=&quot;10dp&quot;\r\n            android:stackFromBottom=&quot;true&quot;\r\n            app:layout_constraintBottom_toTopOf=&quot;@+id/materialCardView2&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            tools:layout_editor_absoluteX=&quot;10dp&quot; /&gt;\r\n    \r\n        &lt;com.google.android.material.card.MaterialCardView\r\n            android:id=&quot;@+id/materialCardView2&quot;\r\n            android:background=&quot;@color/zxing_transparent&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            style=&quot;@style/CustomCardViewStyle&quot;\r\n            android:layout_marginTop=&quot;10dp&quot;\r\n            app:cardElevation=&quot;10dp&quot;\r\n            android:clickable=&quot;true&quot;\r\n            android:focusable=&quot;true&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;&gt;\r\n    \r\n            &lt;RelativeLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n                &lt;com.google.android.material.textfield.MaterialAutoCompleteTextView\r\n                    android:id=&quot;@+id/productName&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_marginHorizontal=&quot;5dp&quot;\r\n                    android:backgroundTint=&quot;@color/yellow&quot;\r\n                    android:enabled=&quot;false&quot;\r\n                    android:hint=&quot;Наименование&quot;\r\n                    android:textColor=&quot;@color/black&quot;\r\n                    android:textColorHint=&quot;@color/black&quot;\r\n                    android:textSize=&quot;24sp&quot;\r\n                    android:textStyle=&quot;bold&quot; /&gt;\r\n    \r\n    \r\n                &lt;LinearLayout\r\n                    android:id=&quot;@+id/ll123&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_below=&quot;@+id/productName&quot;\r\n                    android:layout_marginHorizontal=&quot;5dp&quot;\r\n                    android:layout_marginTop=&quot;5dp&quot;\r\n                    android:baselineAligned=&quot;false&quot;\r\n                    android:orientation=&quot;horizontal&quot;&gt;\r\n    \r\n                    &lt;com.google.android.material.textfield.MaterialAutoCompleteTextView\r\n                        android:id=&quot;@+id/search_barCode&quot;\r\n                        android:layout_width=&quot;match_parent&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:layout_weight=&quot;1&quot;\r\n                        android:backgroundTint=&quot;@color/green&quot;\r\n                        android:ems=&quot;15&quot;\r\n                        android:focusable=&quot;true&quot;\r\n                        android:hint=&quot;Считайте ш/к&quot;\r\n                        android:textColorHint=&quot;@color/DefGray&quot;\r\n                        android:inputType=&quot;number&quot;\r\n                        android:maxLength=&quot;15&quot;\r\n                        android:textSize=&quot;18sp&quot;\r\n                        android:singleLine=&quot;true&quot; /&gt;\r\n    \r\n                    &lt;com.google.android.material.textfield.MaterialAutoCompleteTextView\r\n                        android:id=&quot;@+id/coutOfProduct&quot;\r\n                        android:layout_width=&quot;match_parent&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:layout_weight=&quot;1.1&quot;\r\n                        android:backgroundTint=&quot;@color/green&quot;\r\n                        android:hint=&quot;Кол-во: &quot;\r\n                        android:inputType=&quot;numberSigned|numberDecimal&quot;\r\n                        android:maxLength=&quot;13&quot;\r\n                        android:singleLine=&quot;true&quot;\r\n                        android:textColor=&quot;@color/black&quot;\r\n                        android:textColorHint=&quot;@color/DefGray&quot;\r\n                        android:textSize=&quot;18sp&quot; /&gt;\r\n                &lt;/LinearLayout&gt;\r\n            &lt;/RelativeLayout&gt;\r\n        &lt;/com.google.android.material.card.MaterialCardView&gt;\r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n    `\r\n\r\n\r\n**my getView**\r\n\r\n    public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {\r\n        GoodsCreate_SQL myItemFromList = getItem(position);\r\n\r\n        LayoutInflater inflater = LayoutInflater.from(mContext);\r\n        convertView = inflater.inflate(mResourse, parent, false);\r\n\r\n        TextView tvMark = convertView.findViewById(R.id.tvMark);\r\n        CheckBox cb = convertView.findViewById(R.id.checkBox2);\r\n\r\n        tvMark.setText(myItemFromList.Mark);\r\n        if (myItemFromList.myMark.equals(&quot;1&quot;)){\r\n            cb.setChecked(true);\r\n        }\r\n        return convertView;\r\n    }\r\nTried `setOnTouchListener` to write `view.getParent().requestDisallowInterceptTouchEvent(true);`","title":"Listview not scrolling inside custom listview","body":"<p>I have a custom listview, inside of which there is another one. And the one that is nested will not scroll. Perhaps you need to register something in the parent setOnTouchListener? I don't have anything like that in getView.\n<a href=\"https://i.stack.imgur.com/MJdbO.png\" rel=\"nofollow noreferrer\">image</a></p>\n<p><strong>my layout</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:background=&quot;@color/gray&quot;\n    tools:context=&quot;.invoice.ListPruducts&quot;&gt;\n\n    &lt;ListView\n        android:id=&quot;@+id/lv1&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;0dp&quot;\n        android:divider=&quot;@android:color/transparent&quot;\n        android:dividerHeight=&quot;10.0sp&quot;\n        android:paddingHorizontal=&quot;10dp&quot;\n        android:paddingVertical=&quot;10dp&quot;\n        android:stackFromBottom=&quot;true&quot;\n        app:layout_constraintBottom_toTopOf=&quot;@+id/materialCardView2&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        tools:layout_editor_absoluteX=&quot;10dp&quot; /&gt;\n\n    &lt;com.google.android.material.card.MaterialCardView\n        android:id=&quot;@+id/materialCardView2&quot;\n        android:background=&quot;@color/zxing_transparent&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        style=&quot;@style/CustomCardViewStyle&quot;\n        android:layout_marginTop=&quot;10dp&quot;\n        app:cardElevation=&quot;10dp&quot;\n        android:clickable=&quot;true&quot;\n        android:focusable=&quot;true&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;&gt;\n\n        &lt;RelativeLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;&gt;\n\n            &lt;com.google.android.material.textfield.MaterialAutoCompleteTextView\n                android:id=&quot;@+id/productName&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_marginHorizontal=&quot;5dp&quot;\n                android:backgroundTint=&quot;@color/yellow&quot;\n                android:enabled=&quot;false&quot;\n                android:hint=&quot;Наименование&quot;\n                android:textColor=&quot;@color/black&quot;\n                android:textColorHint=&quot;@color/black&quot;\n                android:textSize=&quot;24sp&quot;\n                android:textStyle=&quot;bold&quot; /&gt;\n\n\n            &lt;LinearLayout\n                android:id=&quot;@+id/ll123&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_below=&quot;@+id/productName&quot;\n                android:layout_marginHorizontal=&quot;5dp&quot;\n                android:layout_marginTop=&quot;5dp&quot;\n                android:baselineAligned=&quot;false&quot;\n                android:orientation=&quot;horizontal&quot;&gt;\n\n                &lt;com.google.android.material.textfield.MaterialAutoCompleteTextView\n                    android:id=&quot;@+id/search_barCode&quot;\n                    android:layout_width=&quot;match_parent&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_weight=&quot;1&quot;\n                    android:backgroundTint=&quot;@color/green&quot;\n                    android:ems=&quot;15&quot;\n                    android:focusable=&quot;true&quot;\n                    android:hint=&quot;Считайте ш/к&quot;\n                    android:textColorHint=&quot;@color/DefGray&quot;\n                    android:inputType=&quot;number&quot;\n                    android:maxLength=&quot;15&quot;\n                    android:textSize=&quot;18sp&quot;\n                    android:singleLine=&quot;true&quot; /&gt;\n\n                &lt;com.google.android.material.textfield.MaterialAutoCompleteTextView\n                    android:id=&quot;@+id/coutOfProduct&quot;\n                    android:layout_width=&quot;match_parent&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_weight=&quot;1.1&quot;\n                    android:backgroundTint=&quot;@color/green&quot;\n                    android:hint=&quot;Кол-во: &quot;\n                    android:inputType=&quot;numberSigned|numberDecimal&quot;\n                    android:maxLength=&quot;13&quot;\n                    android:singleLine=&quot;true&quot;\n                    android:textColor=&quot;@color/black&quot;\n                    android:textColorHint=&quot;@color/DefGray&quot;\n                    android:textSize=&quot;18sp&quot; /&gt;\n            &lt;/LinearLayout&gt;\n        &lt;/RelativeLayout&gt;\n    &lt;/com.google.android.material.card.MaterialCardView&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n`\n</code></pre>\n<p><strong>my getView</strong></p>\n<pre><code>public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {\n    GoodsCreate_SQL myItemFromList = getItem(position);\n\n    LayoutInflater inflater = LayoutInflater.from(mContext);\n    convertView = inflater.inflate(mResourse, parent, false);\n\n    TextView tvMark = convertView.findViewById(R.id.tvMark);\n    CheckBox cb = convertView.findViewById(R.id.checkBox2);\n\n    tvMark.setText(myItemFromList.Mark);\n    if (myItemFromList.myMark.equals(&quot;1&quot;)){\n        cb.setChecked(true);\n    }\n    return convertView;\n}\n</code></pre>\n<p>Tried <code>setOnTouchListener</code> to write <code>view.getParent().requestDisallowInterceptTouchEvent(true);</code></p>\n"},{"tags":["java","spring","spring-boot","rest","spring-security"],"comments":[{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1675452809,"post_id":75340084,"comment_id":132939802,"body_markdown":"Can you share `FilterA` and `FilterB`?","body":"Can you share <code>FilterA</code> and <code>FilterB</code>?"}],"answers":[{"tags":[],"owner":{"account_id":2862565,"reputation":223,"user_id":2457521,"display_name":"Alejandro Venegas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675454681,"creation_date":1675454681,"answer_id":75340534,"question_id":75340084,"body_markdown":"i suggest you to you use AuthenticationEntryPoint\r\nand then add filters before or after entryPoint.\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.csrf().disable()\r\n                .headers().frameOptions().disable()\r\n                .and().requestCache().requestCache(getHttpSessionRequestCache())\r\n                .and().exceptionHandling().authenticationEntryPoint(authenticationEntrypoint)\r\n                .and().authorizeRequests().anyRequest().authenticated().and()\r\n                .addFilterAfter(new myAFilter(), BasicAuthenticationFilter.class).addFilter(new Filter() {\r\n                    @Override\r\n                    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\r\n                        filterChain.doFilter(servletRequest,servletResponse);\r\n                    }\r\n                });\r\n    }","title":"Spring security filter chain is not working","body":"<p>i suggest you to you use AuthenticationEntryPoint\nand then add filters before or after entryPoint.</p>\n<pre><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http.csrf().disable()\n            .headers().frameOptions().disable()\n            .and().requestCache().requestCache(getHttpSessionRequestCache())\n            .and().exceptionHandling().authenticationEntryPoint(authenticationEntrypoint)\n            .and().authorizeRequests().anyRequest().authenticated().and()\n            .addFilterAfter(new myAFilter(), BasicAuthenticationFilter.class).addFilter(new Filter() {\n                @Override\n                public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\n                    filterChain.doFilter(servletRequest,servletResponse);\n                }\n            });\n}\n</code></pre>\n"}],"owner":{"account_id":10814699,"reputation":11,"user_id":7954118,"display_name":"Ranjini Varadharajan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1107,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1675463029,"creation_date":1675451478,"question_id":75340084,"body_markdown":"I am using Spring Security to validate my `GET` and `POST` requests. The auth mechanisms for `GET` and `POST` are not the same. The below snippet is from my `SecurityConfig`s configure method. \r\n\r\n`FilterA` is for `GET` request and I have defined a `customBAuthenticationManager` bean which implements `AuthenticationManager` for it. \r\n\r\n`FilterB` is for `POST` requests and I have defined `customAuthProvider` with `UserDetails` service. These `GET` and `POST` requests work fine when added alone. But when both these filters are added  one after the other, first request in the filter chain fails but the second request works fine. \r\n\r\nFor instance, with the below code, my `POST` request works fine but `GET` request (1st in the chain) throws 401 error. If I swap the order of `GET` and `POST`, then the `GET` would work fine but `POST` (1st in the chain) throws 403 error. \r\n\r\nBut all the cases, I could see that the custom authentication manager/provider work fine.\r\n\r\nCan someone help me understand what&#39;s going wrong here?\r\n\r\n```java\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableGlobalMethodSecurity(securedEnabled = true)\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n\t@Override\r\n\tprotected void configure(HttpSecurity httpSecurity) throws Exception {\r\n\t\tFilterA filtera = new FilterA();\r\n\t\tfiltera.setCheckForPrincipalChanges(true);\r\n\t\tfiltera.setAuthenticationManager(customBAuthenticationManager());\r\n\r\n\t\tFilterB filterb = new FilterB();\r\n\t\tfilterb.setCheckForPrincipalChanges(true);\r\n\t\tfilterb.setAuthenticationManager(authenticationManager());\r\n\r\n\t\thttpSecurity\r\n\t\t\t.headers()\r\n\t\t\t\t.frameOptions()\r\n\t\t\t\t\t.disable()\r\n\t\t\t\t.and()\r\n\t\t\t.mvcMatcher(&quot;/**&quot;)\r\n\t\t\t.csrf()\r\n\t\t\t\t.disable()\r\n\t\t\t.requestCache()\r\n\t\t\t\t.requestCache(getHttpSessionRequestCache())\r\n\t\t\t\t.and()\r\n\t\t\t.sessionManagement()\r\n\t\t\t\t.maximumSessions(1)\r\n\t\t\t\t.and()\r\n    \t\t\t.and()\r\n\t\t\t.addFilter(filtera)\r\n\t\t\t.authorizeRequests()\r\n\t\t\t\t.mvcMatchers(&quot;/getrequest/**&quot;).authenticated()\r\n    \t\t\t.and()\r\n\t\t\t.addFilter(filterb)\r\n\t\t\t.authenticationProvider(customAauthProvider())\r\n\t\t\t.authorizeRequests()\r\n\t\t\t\t.mvcMatchers(&quot;/postrequest/**&quot;).authenticated()\r\n    \t\t\t.and()\r\n\t\t\t.authorizeRequests()\r\n\t\t\t\t.mvcMatchers(&quot;/different-open-request/**&quot;).permitAll()\r\n\t\t\t\t.and()\r\n\t\t\t.httpBasic();\r\n```\r\n\r\nTried changing the order of the filters in filter chain. Tried removing one of the request from the filter chain, and that works fine. ","title":"Spring security filter chain is not working","body":"<p>I am using Spring Security to validate my <code>GET</code> and <code>POST</code> requests. The auth mechanisms for <code>GET</code> and <code>POST</code> are not the same. The below snippet is from my <code>SecurityConfig</code>s configure method.</p>\n<p><code>FilterA</code> is for <code>GET</code> request and I have defined a <code>customBAuthenticationManager</code> bean which implements <code>AuthenticationManager</code> for it.</p>\n<p><code>FilterB</code> is for <code>POST</code> requests and I have defined <code>customAuthProvider</code> with <code>UserDetails</code> service. These <code>GET</code> and <code>POST</code> requests work fine when added alone. But when both these filters are added  one after the other, first request in the filter chain fails but the second request works fine.</p>\n<p>For instance, with the below code, my <code>POST</code> request works fine but <code>GET</code> request (1st in the chain) throws 401 error. If I swap the order of <code>GET</code> and <code>POST</code>, then the <code>GET</code> would work fine but <code>POST</code> (1st in the chain) throws 403 error.</p>\n<p>But all the cases, I could see that the custom authentication manager/provider work fine.</p>\n<p>Can someone help me understand what's going wrong here?</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(securedEnabled = true)\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity httpSecurity) throws Exception {\n        FilterA filtera = new FilterA();\n        filtera.setCheckForPrincipalChanges(true);\n        filtera.setAuthenticationManager(customBAuthenticationManager());\n\n        FilterB filterb = new FilterB();\n        filterb.setCheckForPrincipalChanges(true);\n        filterb.setAuthenticationManager(authenticationManager());\n\n        httpSecurity\n            .headers()\n                .frameOptions()\n                    .disable()\n                .and()\n            .mvcMatcher(&quot;/**&quot;)\n            .csrf()\n                .disable()\n            .requestCache()\n                .requestCache(getHttpSessionRequestCache())\n                .and()\n            .sessionManagement()\n                .maximumSessions(1)\n                .and()\n                .and()\n            .addFilter(filtera)\n            .authorizeRequests()\n                .mvcMatchers(&quot;/getrequest/**&quot;).authenticated()\n                .and()\n            .addFilter(filterb)\n            .authenticationProvider(customAauthProvider())\n            .authorizeRequests()\n                .mvcMatchers(&quot;/postrequest/**&quot;).authenticated()\n                .and()\n            .authorizeRequests()\n                .mvcMatchers(&quot;/different-open-request/**&quot;).permitAll()\n                .and()\n            .httpBasic();\n</code></pre>\n<p>Tried changing the order of the filters in filter chain. Tried removing one of the request from the filter chain, and that works fine.</p>\n"},{"tags":["python","java","websocket","raspberry-pi","micronaut"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1673949931,"post_id":75144737,"comment_id":132605672,"body_markdown":"What happens if you run your python code on the same machine as the server? If it works than chances are it is a network problem.","body":"What happens if you run your python code on the same machine as the server? If it works than chances are it is a network problem."},{"owner":{"account_id":2426236,"reputation":183,"user_id":2118151,"accept_rate":75,"display_name":"Daniel Cazares"},"score":0,"creation_date":1673949969,"post_id":75144737,"comment_id":132605688,"body_markdown":"Can you clarify what you&#39;ve tried to do to troubleshoot so far?","body":"Can you clarify what you&#39;ve tried to do to troubleshoot so far?"},{"owner":{"account_id":26999501,"reputation":11,"user_id":20561010,"display_name":"Franz M"},"score":0,"creation_date":1673955125,"post_id":75144737,"comment_id":132607187,"body_markdown":"@DanielCazares I tried Federicos suggestion before asking this queston, and it worked.\nI made sure that everything isn&#39;t connected to &quot;localhost&quot;, but to the IP-Adress of my host machine instead","body":"@DanielCazares I tried Federicos suggestion before asking this queston, and it worked. I made sure that everything isn&#39;t connected to &quot;localhost&quot;, but to the IP-Adress of my host machine instead"},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1673957372,"post_id":75144737,"comment_id":132607850,"body_markdown":"@Franz M, On Windows, try to Temporarily turn off Windows Firewall. `Settings` -&gt; `Network &amp; Internet` -&gt; `Status` -&gt; `Windows Firewall` -&gt;  `Public network`\n-&gt; `Windows Defender Firewall` (`ON` -&gt; `Off`). This is to clarify whether the connection is refused because of Windows Firewall?","body":"@Franz M, On Windows, try to Temporarily turn off Windows Firewall. <code>Settings</code> -&gt; <code>Network &amp; Internet</code> -&gt; <code>Status</code> -&gt; <code>Windows Firewall</code> -&gt;  <code>Public network</code> -&gt; <code>Windows Defender Firewall</code> (<code>ON</code> -&gt; <code>Off</code>). This is to clarify whether the connection is refused because of Windows Firewall?"},{"owner":{"account_id":26999501,"reputation":11,"user_id":20561010,"display_name":"Franz M"},"score":0,"creation_date":1673958473,"post_id":75144737,"comment_id":132608222,"body_markdown":"@life888888 Turned off the public network firewall, still didn&#39;t work","body":"@life888888 Turned off the public network firewall, still didn&#39;t work"},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1673958710,"post_id":75144737,"comment_id":132608302,"body_markdown":"@Franz M, Can you execute your Python script on Windows to connect to Java Micronaut ServerWebSocket on the same machine?","body":"@Franz M, Can you execute your Python script on Windows to connect to Java Micronaut ServerWebSocket on the same machine?"},{"owner":{"account_id":26999501,"reputation":11,"user_id":20561010,"display_name":"Franz M"},"score":0,"creation_date":1673959795,"post_id":75144737,"comment_id":132608697,"body_markdown":"@life888888 I did execute the Python script on Windows before asking this question and it worked.\nMy problem is, is that the code for the client _specifically_ doesn&#39;t work on a Raspberry Pi. On Windows, everything is fine and works properly, but the problem start to arise as soon as the Raspberry Pi comes into play.\n\nSomething interesting to note is that the Pi can communicate with Windows when I am using a python socket instead of the Micronaut one.","body":"@life888888 I did execute the Python script on Windows before asking this question and it worked. My problem is, is that the code for the client <i>specifically</i> doesn&#39;t work on a Raspberry Pi. On Windows, everything is fine and works properly, but the problem start to arise as soon as the Raspberry Pi comes into play.  Something interesting to note is that the Pi can communicate with Windows when I am using a python socket instead of the Micronaut one."},{"owner":{"account_id":1300508,"reputation":594,"user_id":7076615,"accept_rate":92,"display_name":"Daniel Donnelly"},"score":0,"creation_date":1688502546,"post_id":75144737,"comment_id":135081629,"body_markdown":"Having the same issue.","body":"Having the same issue."}],"answers":[{"tags":[],"owner":{"account_id":26999501,"reputation":11,"user_id":20561010,"display_name":"Franz M"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675461587,"creation_date":1674042336,"answer_id":75158763,"question_id":75144737,"body_markdown":"As [@life888888](https://stackoverflow.com/questions/75144737/raspberry-pi-unable-to-connect-to-windows-websocket#comment132607850_75144737) suggested, it had something to do with Windows firewall.\r\n\r\nBut instead of the public firewall being the problem, it was the one for the domain network instead.","title":"Raspberry Pi unable to connect to Windows Websocket","body":"<p>As <a href=\"https://stackoverflow.com/questions/75144737/raspberry-pi-unable-to-connect-to-windows-websocket#comment132607850_75144737\">@life888888</a> suggested, it had something to do with Windows firewall.</p>\n<p>But instead of the public firewall being the problem, it was the one for the domain network instead.</p>\n"}],"owner":{"account_id":26999501,"reputation":11,"user_id":20561010,"display_name":"Franz M"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":239,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75158763,"answer_count":1,"score":1,"last_activity_date":1675461587,"creation_date":1673949733,"question_id":75144737,"body_markdown":"I am attempting to send data from a Python script running on a Raspberry Pi to a Java Micronaut ServerWebSocket running on a Windows machine, but I am getting `asyncio.exceptions.TimeoutError` errors during the process.\r\n\r\nI attempted to use the `websockets` library in Python on the Raspberry Pi to establish a websocket connection, but encountered a `ConnectionRefusedError`. Is this issue related to a network problem as mentioned [here](https://stackoverflow.com/a/29789333/20561010), and should I ask somewhere else like Superuser or Serverfault? Or is there another solution to this problem?","title":"Raspberry Pi unable to connect to Windows Websocket","body":"<p>I am attempting to send data from a Python script running on a Raspberry Pi to a Java Micronaut ServerWebSocket running on a Windows machine, but I am getting <code>asyncio.exceptions.TimeoutError</code> errors during the process.</p>\n<p>I attempted to use the <code>websockets</code> library in Python on the Raspberry Pi to establish a websocket connection, but encountered a <code>ConnectionRefusedError</code>. Is this issue related to a network problem as mentioned <a href=\"https://stackoverflow.com/a/29789333/20561010\">here</a>, and should I ask somewhere else like Superuser or Serverfault? Or is there another solution to this problem?</p>\n"},{"tags":["java","xml","android-studio"],"owner":{"account_id":27668325,"reputation":1,"user_id":21119690,"display_name":"Shad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675461478,"creation_date":1675379483,"question_id":75329864,"body_markdown":"I am trying to create an ```ImageButton``` and use it for adding a new note.\r\n\r\nBut when I click on that ```ImageButton```, a message appears (Failed) without mentioning the reason for the failure.\r\n\r\nThe **xml** layout:  \r\n```xml\r\n&lt;?xml version=&quot;1.0&quot;     encoding=&quot;utf-8&quot;?&gt;\r\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\nxmlns:app=&quot;http://schemas.android.com/apk/res-auto\r\nxmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\nandroid:layout_width=&quot;match_parent&quot;\r\nandroid:layout_height=&quot;match_parent&quot;\r\nandroid:background=&quot;@color/my_primary&quot;\r\nandroid:padding=&quot;16dp&quot;\r\ntools:context=&quot;.NoteDetailsActivity&quot;&gt;\r\n\r\n    &lt;RelativeLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/title_bar_layout&quot;&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/page_title&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Add New Note&quot;\r\n            android:textColor=&quot;@color/white&quot;\r\n            android:textSize=&quot;32sp&quot;\r\n            android:textStyle=&quot;bold&quot; /&gt;\r\n    \r\n        &lt;ImageButton\r\n            android:layout_width=&quot;36dp&quot;\r\n            android:layout_height=&quot;36dp&quot;\r\n            android:id=&quot;@+id/save_note_btn&quot;\r\n            android:src=&quot;@drawable/ic_baseline_done_24&quot;\r\n            android:layout_alignParentEnd=&quot;true&quot;\r\n            android:layout_centerVertical=&quot;true&quot;\r\n            app:tint=&quot;@color/white&quot;\r\n            android:background=&quot;?attr/selectableItemBackgroundBorderless&quot;\r\n    \r\n            /&gt;\r\n    \r\n    &lt;/RelativeLayout&gt;\r\n    \r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_below=&quot;@id/title_bar_layout&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:padding=&quot;16dp&quot;\r\n        android:layout_marginVertical=&quot;26dp&quot;\r\n        android:backgroundTint=&quot;@color/white&quot;\r\n        android:background=&quot;@drawable/rounded_corner&quot;&gt;\r\n    \r\n        &lt;EditText\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:id=&quot;@+id/notes_title_text&quot;\r\n            android:hint=&quot;Title&quot;\r\n            android:textSize=&quot;20sp&quot;\r\n            android:textStyle=&quot;bold&quot;\r\n            android:layout_marginVertical=&quot;8dp&quot;\r\n            android:padding=&quot;12dp&quot;\r\n            android:textColor=&quot;@color/black&quot;/&gt;\r\n        &lt;EditText\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:id=&quot;@+id/notes_content_text&quot;\r\n            android:hint=&quot;Content&quot;\r\n            android:minLines=&quot;15&quot;\r\n            android:gravity=&quot;top&quot;\r\n            android:textSize=&quot;20sp&quot;\r\n            android:layout_marginVertical=&quot;8dp&quot;\r\n            android:padding=&quot;12dp&quot;\r\n            android:textColor=&quot;@color/black&quot;/&gt;\r\n    \r\n    \r\n    &lt;/LinearLayout&gt;\r\n    \r\n    &lt;TextView\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/delete_note_text_view_btn&quot;\r\n        android:text=&quot;Delete note&quot;\r\n        android:layout_alignParentBottom=&quot;true&quot;\r\n        android:gravity=&quot;center&quot;\r\n        android:textSize=&quot;18sp&quot;\r\n        android:visibility=&quot;gone&quot;\r\n        android:textColor=&quot;#FF0000&quot;/&gt;\r\n```\r\n\r\nAnd this is my **Activity** class:\r\n```java\r\npackage easy.tuto.notespro;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageButton;\r\nimport android.widget.TextView;\r\n\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.Timestamp;\r\nimport com.google.firebase.firestore.DocumentReference;\r\n\r\npublic class NoteDetailsActivity extends AppCompatActivity {\r\n\r\n    EditText titleEditText,contentEditText;\r\n    ImageButton saveNoteBtn;\r\n    TextView pageTitleTextView;\r\n    String title,content,docId;\r\n    boolean isEditMode = false;\r\n    TextView deleteNoteTextViewBtn;\r\n    \r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_note_details);\r\n    \r\n        titleEditText = findViewById(R.id.notes_title_text);\r\n        contentEditText = findViewById(R.id.notes_content_text);\r\n        saveNoteBtn = findViewById(R.id.save_note_btn);\r\n        pageTitleTextView = findViewById(R.id.page_title);\r\n        deleteNoteTextViewBtn  = findViewById(R.id.delete_note_text_view_btn);\r\n    \r\n        //receive data\r\n        title = getIntent().getStringExtra(&quot;title&quot;);\r\n        content= getIntent().getStringExtra(&quot;content&quot;);\r\n        docId = getIntent().getStringExtra(&quot;docId&quot;);\r\n    \r\n        if(docId!=null &amp;&amp; !docId.isEmpty()){\r\n            isEditMode = true;\r\n        }\r\n    \r\n        titleEditText.setText(title);\r\n        contentEditText.setText(content);\r\n        if(isEditMode){\r\n            pageTitleTextView.setText(&quot;Edit your note&quot;);\r\n            deleteNoteTextViewBtn.setVisibility(View.VISIBLE);\r\n        }\r\n    \r\n        saveNoteBtn.setOnClickListener( (v)-&gt; saveNote());\r\n    \r\n        deleteNoteTextViewBtn.setOnClickListener((v)-&gt; deleteNoteFromFirebase() );\r\n    \r\n    }\r\n    \r\n    void saveNote(){\r\n        String noteTitle = titleEditText.getText().toString();\r\n        String noteContent = contentEditText.getText().toString();\r\n        if(noteTitle==null || noteTitle.isEmpty() ){\r\n            titleEditText.setError(&quot;Title is required&quot;);\r\n            return;\r\n        }\r\n        Note note = new Note();\r\n        note.setTitle(noteTitle);\r\n        note.setContent(noteContent);\r\n        note.setTimestamp(Timestamp.now());\r\n    \r\n        saveNoteToFirebase(note);\r\n    \r\n    }\r\n    \r\n    void saveNoteToFirebase(Note note){\r\n        DocumentReference documentReference;\r\n        if(isEditMode){\r\n            //update the note\r\n            documentReference = Utility.getCollectionReferenceForNotes().document(docId);\r\n        }else{\r\n            //create new note\r\n            documentReference = Utility.getCollectionReferenceForNotes().document();\r\n        }\r\n    \r\n    \r\n    \r\n        documentReference.set(note).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\r\n            @Override\r\n            public void onComplete(@NonNull Task&lt;Void&gt; task) {\r\n                if(task.isSuccessful()){\r\n                    //note is added\r\n                    Utility.showToast(NoteDetailsActivity.this,&quot;Note added successfully&quot;);\r\n                    finish();\r\n                }else{\r\n                    Utility.showToast(NoteDetailsActivity.this,&quot;Failed while adding note&quot;);\r\n                }\r\n            }\r\n        });\r\n    \r\n    }\r\n    \r\n    void deleteNoteFromFirebase(){\r\n        DocumentReference documentReference;\r\n            documentReference = Utility.getCollectionReferenceForNotes().document(docId);\r\n        documentReference.delete().addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\r\n            @Override\r\n            public void onComplete(@NonNull Task&lt;Void&gt; task) {\r\n                if(task.isSuccessful()){\r\n                    //note is deleted\r\n                    Utility.showToast(NoteDetailsActivity.this,&quot;Note deleted successfully&quot;);\r\n                    finish();\r\n                }else{\r\n                    Utility.showToast(NoteDetailsActivity.this,&quot;Failed while deleting note&quot;);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n```\r\n\r\nPlease help me find out the reason and how to solve the problem, thank you.","title":"Clicking on ImageButton prompts Failed without reason","body":"<p>I am trying to create an <code>ImageButton</code> and use it for adding a new note.</p>\n<p>But when I click on that <code>ImageButton</code>, a message appears (Failed) without mentioning the reason for the failure.</p>\n<p>The <strong>xml</strong> layout:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot;     encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nxmlns:app=&quot;http://schemas.android.com/apk/res-auto\nxmlns:tools=&quot;http://schemas.android.com/tools&quot;\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;match_parent&quot;\nandroid:background=&quot;@color/my_primary&quot;\nandroid:padding=&quot;16dp&quot;\ntools:context=&quot;.NoteDetailsActivity&quot;&gt;\n\n    &lt;RelativeLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:id=&quot;@+id/title_bar_layout&quot;&gt;\n    \n        &lt;TextView\n            android:id=&quot;@+id/page_title&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;Add New Note&quot;\n            android:textColor=&quot;@color/white&quot;\n            android:textSize=&quot;32sp&quot;\n            android:textStyle=&quot;bold&quot; /&gt;\n    \n        &lt;ImageButton\n            android:layout_width=&quot;36dp&quot;\n            android:layout_height=&quot;36dp&quot;\n            android:id=&quot;@+id/save_note_btn&quot;\n            android:src=&quot;@drawable/ic_baseline_done_24&quot;\n            android:layout_alignParentEnd=&quot;true&quot;\n            android:layout_centerVertical=&quot;true&quot;\n            app:tint=&quot;@color/white&quot;\n            android:background=&quot;?attr/selectableItemBackgroundBorderless&quot;\n    \n            /&gt;\n    \n    &lt;/RelativeLayout&gt;\n    \n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_below=&quot;@id/title_bar_layout&quot;\n        android:orientation=&quot;vertical&quot;\n        android:padding=&quot;16dp&quot;\n        android:layout_marginVertical=&quot;26dp&quot;\n        android:backgroundTint=&quot;@color/white&quot;\n        android:background=&quot;@drawable/rounded_corner&quot;&gt;\n    \n        &lt;EditText\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:id=&quot;@+id/notes_title_text&quot;\n            android:hint=&quot;Title&quot;\n            android:textSize=&quot;20sp&quot;\n            android:textStyle=&quot;bold&quot;\n            android:layout_marginVertical=&quot;8dp&quot;\n            android:padding=&quot;12dp&quot;\n            android:textColor=&quot;@color/black&quot;/&gt;\n        &lt;EditText\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:id=&quot;@+id/notes_content_text&quot;\n            android:hint=&quot;Content&quot;\n            android:minLines=&quot;15&quot;\n            android:gravity=&quot;top&quot;\n            android:textSize=&quot;20sp&quot;\n            android:layout_marginVertical=&quot;8dp&quot;\n            android:padding=&quot;12dp&quot;\n            android:textColor=&quot;@color/black&quot;/&gt;\n    \n    \n    &lt;/LinearLayout&gt;\n    \n    &lt;TextView\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:id=&quot;@+id/delete_note_text_view_btn&quot;\n        android:text=&quot;Delete note&quot;\n        android:layout_alignParentBottom=&quot;true&quot;\n        android:gravity=&quot;center&quot;\n        android:textSize=&quot;18sp&quot;\n        android:visibility=&quot;gone&quot;\n        android:textColor=&quot;#FF0000&quot;/&gt;\n</code></pre>\n<p>And this is my <strong>Activity</strong> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package easy.tuto.notespro;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.EditText;\nimport android.widget.ImageButton;\nimport android.widget.TextView;\n\nimport com.google.android.gms.tasks.OnCompleteListener;\nimport com.google.android.gms.tasks.Task;\nimport com.google.firebase.Timestamp;\nimport com.google.firebase.firestore.DocumentReference;\n\npublic class NoteDetailsActivity extends AppCompatActivity {\n\n    EditText titleEditText,contentEditText;\n    ImageButton saveNoteBtn;\n    TextView pageTitleTextView;\n    String title,content,docId;\n    boolean isEditMode = false;\n    TextView deleteNoteTextViewBtn;\n    \n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_note_details);\n    \n        titleEditText = findViewById(R.id.notes_title_text);\n        contentEditText = findViewById(R.id.notes_content_text);\n        saveNoteBtn = findViewById(R.id.save_note_btn);\n        pageTitleTextView = findViewById(R.id.page_title);\n        deleteNoteTextViewBtn  = findViewById(R.id.delete_note_text_view_btn);\n    \n        //receive data\n        title = getIntent().getStringExtra(&quot;title&quot;);\n        content= getIntent().getStringExtra(&quot;content&quot;);\n        docId = getIntent().getStringExtra(&quot;docId&quot;);\n    \n        if(docId!=null &amp;&amp; !docId.isEmpty()){\n            isEditMode = true;\n        }\n    \n        titleEditText.setText(title);\n        contentEditText.setText(content);\n        if(isEditMode){\n            pageTitleTextView.setText(&quot;Edit your note&quot;);\n            deleteNoteTextViewBtn.setVisibility(View.VISIBLE);\n        }\n    \n        saveNoteBtn.setOnClickListener( (v)-&gt; saveNote());\n    \n        deleteNoteTextViewBtn.setOnClickListener((v)-&gt; deleteNoteFromFirebase() );\n    \n    }\n    \n    void saveNote(){\n        String noteTitle = titleEditText.getText().toString();\n        String noteContent = contentEditText.getText().toString();\n        if(noteTitle==null || noteTitle.isEmpty() ){\n            titleEditText.setError(&quot;Title is required&quot;);\n            return;\n        }\n        Note note = new Note();\n        note.setTitle(noteTitle);\n        note.setContent(noteContent);\n        note.setTimestamp(Timestamp.now());\n    \n        saveNoteToFirebase(note);\n    \n    }\n    \n    void saveNoteToFirebase(Note note){\n        DocumentReference documentReference;\n        if(isEditMode){\n            //update the note\n            documentReference = Utility.getCollectionReferenceForNotes().document(docId);\n        }else{\n            //create new note\n            documentReference = Utility.getCollectionReferenceForNotes().document();\n        }\n    \n    \n    \n        documentReference.set(note).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n            @Override\n            public void onComplete(@NonNull Task&lt;Void&gt; task) {\n                if(task.isSuccessful()){\n                    //note is added\n                    Utility.showToast(NoteDetailsActivity.this,&quot;Note added successfully&quot;);\n                    finish();\n                }else{\n                    Utility.showToast(NoteDetailsActivity.this,&quot;Failed while adding note&quot;);\n                }\n            }\n        });\n    \n    }\n    \n    void deleteNoteFromFirebase(){\n        DocumentReference documentReference;\n            documentReference = Utility.getCollectionReferenceForNotes().document(docId);\n        documentReference.delete().addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n            @Override\n            public void onComplete(@NonNull Task&lt;Void&gt; task) {\n                if(task.isSuccessful()){\n                    //note is deleted\n                    Utility.showToast(NoteDetailsActivity.this,&quot;Note deleted successfully&quot;);\n                    finish();\n                }else{\n                    Utility.showToast(NoteDetailsActivity.this,&quot;Failed while deleting note&quot;);\n                }\n            }\n        });\n    }\n\n}\n</code></pre>\n<p>Please help me find out the reason and how to solve the problem, thank you.</p>\n"},{"tags":["java","docker","maven"],"owner":{"account_id":14482834,"reputation":3924,"user_id":10461625,"display_name":"PatPanda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675460914,"creation_date":1675460914,"question_id":75341330,"body_markdown":"Small question regarding maven and the deploy command ```mvn deploy``` and push it to Dockerhub please.\r\n\r\nI have a small springboot project, very straightforward.\r\n\r\nI build and create a docker image from this project using ```mvn spring-boot:build-image``` after this command is run, I get a jar, but I also get a docker image which I can see using ```docker images```, very happy.\r\n\r\nMy next step would consist into running a small two lines shell script which does:\r\n```\r\ndocker tag myapp dockerhub/myapp\r\ndocker push dockerhub/myapp\r\n```\r\n\r\nTherefore, my pipeline can be summarized as:\r\nstep 1 maven to clean install build the jar + generate the docker image\r\nstep 2 docker to tag + docker push to docker hub.\r\n\r\nI am wondering, is it possible to simply use the maven deploy command, and have the deploy tagging and pushing to dockerhub please?\r\n\r\nWhat I tried:\r\nRuning the deploy command, but it is not pushing to dockerhub at all.\r\n\r\nWhat would be a way to leverage maven deploy, or maybe other maven commands, to have a pipeline build a jar + generate the docker image + tag it + push it please?\r\n\r\nI cannot afford any CI/CD pipeline, and this is light enough, so hoping to get a maven command which can also push to dockerhub.\r\n\r\nThank you\r\n","title":"maven+deploy =&gt; docker+tag+push","body":"<p>Small question regarding maven and the deploy command <code>mvn deploy</code> and push it to Dockerhub please.</p>\n<p>I have a small springboot project, very straightforward.</p>\n<p>I build and create a docker image from this project using <code>mvn spring-boot:build-image</code> after this command is run, I get a jar, but I also get a docker image which I can see using <code>docker images</code>, very happy.</p>\n<p>My next step would consist into running a small two lines shell script which does:</p>\n<pre><code>docker tag myapp dockerhub/myapp\ndocker push dockerhub/myapp\n</code></pre>\n<p>Therefore, my pipeline can be summarized as:\nstep 1 maven to clean install build the jar + generate the docker image\nstep 2 docker to tag + docker push to docker hub.</p>\n<p>I am wondering, is it possible to simply use the maven deploy command, and have the deploy tagging and pushing to dockerhub please?</p>\n<p>What I tried:\nRuning the deploy command, but it is not pushing to dockerhub at all.</p>\n<p>What would be a way to leverage maven deploy, or maybe other maven commands, to have a pipeline build a jar + generate the docker image + tag it + push it please?</p>\n<p>I cannot afford any CI/CD pipeline, and this is light enough, so hoping to get a maven command which can also push to dockerhub.</p>\n<p>Thank you</p>\n"},{"tags":["java","hashmap"],"answers":[{"comments":[{"owner":{"account_id":4546904,"reputation":152,"user_id":3693223,"display_name":"Lucho82"},"score":0,"creation_date":1675446673,"post_id":75338464,"comment_id":132938169,"body_markdown":"thanks @WJS good option ... make sense :) . I will try and come back later.","body":"thanks @WJS good option ... make sense :) . I will try and come back later."}],"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675460677,"creation_date":1675441463,"answer_id":75338464,"question_id":75337858,"body_markdown":"This may do what you want. Just filter out bad elements and assign to the same map.\r\n```\r\nHashMap&lt;String, HashMap&lt;String, String&gt;&gt; h = new HashMap&lt;&gt;();\r\n\r\nHashMap&lt;String, String&gt; h1 = new HashMap&lt;&gt;();\r\n\r\nh1.put(&quot;key10&quot;, &quot;value10&quot;);\r\nh1.put(&quot;key11&quot;, &quot;value11&quot;);\r\nh1.put(&quot;date&quot;, &quot;2018-10-18T00:00:57.907Z&quot;);\r\nh.put(&quot;1#100&quot;, h1);\r\n\r\nHashMap&lt;String, String&gt; h2 = new HashMap&lt;&gt;();\r\n\r\nh2.put(&quot;key20&quot;, &quot;value20&quot;);\r\nh2.put(&quot;key21&quot;, &quot;value21&quot;);\r\nh2.put(&quot;date&quot;, &quot;2023-02-04T10:00:00.907Z&quot;);\r\nh.put(&quot;2#000&quot;, h2);\r\n\r\n     \r\n\r\n\r\n// any instant after `now` will pass the filter and be put in the map\r\nPredicate&lt;String&gt; check = str -&gt; Instant.parse(str)\r\n.isAfter(Instant.now());\r\n\r\n\r\nh = h.entrySet().stream()\r\n        .filter(e -&gt; check.test(e.getValue().get(&quot;date&quot;)))\r\n        .collect(Collectors.toMap(Entry::getKey, Entry::getValue,\r\n                (a,b)-&gt;a,\r\n                HashMap::new));\r\n\r\nh.values().forEach(m -&gt; {\r\n    m.entrySet().forEach(System.out::println);\r\n});\r\n     \r\n```\r\nprints\r\n```  \r\ndate=2023-02-04T10:00:00.907Z\r\nkey21=value21\r\nkey20=value20\r\n```\r\nMy predicate simply deleted the date if it expired.  Yours was a tighter threshold.\r\n\r\n**Updated**     \r\n\r\nHere is another option in case building a new map takes too long. It uses an iterator to run thru the loop and modify the existing map by removing Maps with old dates.\r\n```\r\nIterator&lt;Entry&lt;String,Map&lt;String,String&gt;&gt;&gt; it = h.entrySet().iterator();\r\nwhile (it.hasNext()) {\r\n    Entry&lt;String,Map&lt;String, String&gt;&gt; e = it.next();\r\n    if (!check.test(e.getValue().get(&quot;date&quot;))) {\r\n        it.remove();\r\n    }\r\n} ","title":"delete from parent hashmap from a nested hashmap condition","body":"<p>This may do what you want. Just filter out bad elements and assign to the same map.</p>\n<pre><code>HashMap&lt;String, HashMap&lt;String, String&gt;&gt; h = new HashMap&lt;&gt;();\n\nHashMap&lt;String, String&gt; h1 = new HashMap&lt;&gt;();\n\nh1.put(&quot;key10&quot;, &quot;value10&quot;);\nh1.put(&quot;key11&quot;, &quot;value11&quot;);\nh1.put(&quot;date&quot;, &quot;2018-10-18T00:00:57.907Z&quot;);\nh.put(&quot;1#100&quot;, h1);\n\nHashMap&lt;String, String&gt; h2 = new HashMap&lt;&gt;();\n\nh2.put(&quot;key20&quot;, &quot;value20&quot;);\nh2.put(&quot;key21&quot;, &quot;value21&quot;);\nh2.put(&quot;date&quot;, &quot;2023-02-04T10:00:00.907Z&quot;);\nh.put(&quot;2#000&quot;, h2);\n\n     \n\n\n// any instant after `now` will pass the filter and be put in the map\nPredicate&lt;String&gt; check = str -&gt; Instant.parse(str)\n.isAfter(Instant.now());\n\n\nh = h.entrySet().stream()\n        .filter(e -&gt; check.test(e.getValue().get(&quot;date&quot;)))\n        .collect(Collectors.toMap(Entry::getKey, Entry::getValue,\n                (a,b)-&gt;a,\n                HashMap::new));\n\nh.values().forEach(m -&gt; {\n    m.entrySet().forEach(System.out::println);\n});\n     \n</code></pre>\n<p>prints</p>\n<pre><code>date=2023-02-04T10:00:00.907Z\nkey21=value21\nkey20=value20\n</code></pre>\n<p>My predicate simply deleted the date if it expired.  Yours was a tighter threshold.</p>\n<p><strong>Updated</strong></p>\n<p>Here is another option in case building a new map takes too long. It uses an iterator to run thru the loop and modify the existing map by removing Maps with old dates.</p>\n<pre><code>Iterator&lt;Entry&lt;String,Map&lt;String,String&gt;&gt;&gt; it = h.entrySet().iterator();\nwhile (it.hasNext()) {\n    Entry&lt;String,Map&lt;String, String&gt;&gt; e = it.next();\n    if (!check.test(e.getValue().get(&quot;date&quot;))) {\n        it.remove();\n    }\n} \n</code></pre>\n"}],"owner":{"account_id":4546904,"reputation":152,"user_id":3693223,"display_name":"Lucho82"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75338464,"answer_count":1,"score":2,"last_activity_date":1675460677,"creation_date":1675438218,"question_id":75337858,"body_markdown":"I have the following structure \r\n\r\n    HashMap&lt;String, HashMap&lt;String, String&gt;&gt; h = new HashMap&lt;&gt;();\r\n\r\n    HashMap&lt;String, String&gt;&gt; h1 = new HashMap&lt;&gt;();\r\n\r\n    h1.put(&quot;key10&quot;, &quot;value10&quot;)\r\n    h1.put(&quot;key11&quot;, &quot;value11&quot;)\r\n    h1.put(&quot;date&quot;, &quot;2018-10-18T00:00:57.907Z&quot;)\r\n    h.put(&quot;1#100&quot;, h1)\r\n\r\n    HashMap&lt;String, String&gt;&gt; h2 = new HashMap&lt;&gt;();\r\n    \r\n    h2.put(&quot;key20&quot;, &quot;value20&quot;)\r\n    h2.put(&quot;key21&quot;, &quot;value21&quot;)\r\n    h2.put(&quot;date&quot;, &quot;2023-02-03T10:00:00.907Z&quot;)\r\n    h.put(&quot;2#000&quot;, h2)\r\n\r\nImagine I have many entries like the examples above.\r\nIn certain moment (scheduler) i have this requirement:\r\n\r\n - check all nested hash maps (for each/stream)\r\n - see if date condition is true\r\n - find parent key &lt;String&gt; and delete from main hash map\r\n\r\nIn this exemple the final hash map will be\r\n\r\n    h2.put(&quot;key20&quot;, &quot;value20&quot;)\r\n    h2.put(&quot;key21&quot;, &quot;value21&quot;)\r\n    h2.put(&quot;date&quot;, &quot;2023-02-03T10:00:00.907Z&quot;)\r\n    h.put(&quot;2#000&quot;, h2)\r\n    \r\n    h2 =&gt; {key20 =&gt; value20, key21 =&gt; value21, date =&gt; 2023-02-03T10:00:00.907Z}\r\n\r\ni have this code right now\r\n\r\n     h.forEach((k,v) -&gt; {\r\n                v.entrySet()\r\n                .stream()\r\n                .filter(e -&gt; e.getKey().equals(&quot;date&quot;))\r\n                .filter(t -&gt; Timestamp.from(Instant.now()).getTime() - Timestamp.valueOf(t.getValue()).getTime() &gt; milisDiff)\r\n                //need now to access parent and delete with by k key\r\n\r\n\r\nCan do in one step (lambda) or i need to have extra structure to collect parent keys and after proceed to delete within for each ?","title":"delete from parent hashmap from a nested hashmap condition","body":"<p>I have the following structure</p>\n<pre><code>HashMap&lt;String, HashMap&lt;String, String&gt;&gt; h = new HashMap&lt;&gt;();\n\nHashMap&lt;String, String&gt;&gt; h1 = new HashMap&lt;&gt;();\n\nh1.put(&quot;key10&quot;, &quot;value10&quot;)\nh1.put(&quot;key11&quot;, &quot;value11&quot;)\nh1.put(&quot;date&quot;, &quot;2018-10-18T00:00:57.907Z&quot;)\nh.put(&quot;1#100&quot;, h1)\n\nHashMap&lt;String, String&gt;&gt; h2 = new HashMap&lt;&gt;();\n\nh2.put(&quot;key20&quot;, &quot;value20&quot;)\nh2.put(&quot;key21&quot;, &quot;value21&quot;)\nh2.put(&quot;date&quot;, &quot;2023-02-03T10:00:00.907Z&quot;)\nh.put(&quot;2#000&quot;, h2)\n</code></pre>\n<p>Imagine I have many entries like the examples above.\nIn certain moment (scheduler) i have this requirement:</p>\n<ul>\n<li>check all nested hash maps (for each/stream)</li>\n<li>see if date condition is true</li>\n<li>find parent key  and delete from main hash map</li>\n</ul>\n<p>In this exemple the final hash map will be</p>\n<pre><code>h2.put(&quot;key20&quot;, &quot;value20&quot;)\nh2.put(&quot;key21&quot;, &quot;value21&quot;)\nh2.put(&quot;date&quot;, &quot;2023-02-03T10:00:00.907Z&quot;)\nh.put(&quot;2#000&quot;, h2)\n\nh2 =&gt; {key20 =&gt; value20, key21 =&gt; value21, date =&gt; 2023-02-03T10:00:00.907Z}\n</code></pre>\n<p>i have this code right now</p>\n<pre><code> h.forEach((k,v) -&gt; {\n            v.entrySet()\n            .stream()\n            .filter(e -&gt; e.getKey().equals(&quot;date&quot;))\n            .filter(t -&gt; Timestamp.from(Instant.now()).getTime() - Timestamp.valueOf(t.getValue()).getTime() &gt; milisDiff)\n            //need now to access parent and delete with by k key\n</code></pre>\n<p>Can do in one step (lambda) or i need to have extra structure to collect parent keys and after proceed to delete within for each ?</p>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":10685095,"reputation":283,"user_id":7865867,"accept_rate":100,"display_name":"New2Java"},"score":0,"creation_date":1687502688,"post_id":75338103,"comment_id":134948553,"body_markdown":"Were you able to solve this issue?If yes, how did you solve this, please let me know","body":"Were you able to solve this issue?If yes, how did you solve this, please let me know"}],"owner":{"account_id":20958252,"reputation":3,"user_id":15398234,"display_name":"Ramzan Niazi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675459418,"creation_date":1675439508,"question_id":75338103,"body_markdown":"I have the code which create table of content like this:\r\n[image screenshot][1] ,\r\nbut i want resualt like this:\r\n[image screenshot][2] ,\r\n\r\nand this is my code \r\n\r\n     package com.example;\r\n\r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.io.FileNotFoundException;\r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n    \r\n    import org.apache.commons.compress.archivers.dump.InvalidFormatException;\r\n    import org.apache.poi.openxml4j.exceptions.OpenXML4JException;\r\n    import org.apache.poi.xwpf.usermodel.XWPFDocument;\r\n    import org.apache.poi.xwpf.usermodel.XWPFParagraph;\r\n    import org.apache.poi.xwpf.usermodel.XWPFRun;\r\n    import org.openxmlformats.schemas.wordprocessingml.x2006.main.CTSimpleField;\r\n    \r\nThese are libraries which I&#39;m using for this project \r\n\r\n&gt; and I&#39;m also using the maven package manager\r\n\r\n\r\n    public class toc {\r\n        public static void main(String[] args) throws IOException, OpenXML4JException {\r\n            XWPFDocument docTemplate = null;\r\n            try {\r\n\r\n            File file = new File(\r\n                    &quot;outfile02.docx&quot;); // &quot;C:\\\\Reports\\\\Template.docx&quot;;\r\n            FileInputStream fis = new FileInputStream(file);\r\n            docTemplate = new XWPFDocument(fis);\r\n            generateTOC(docTemplate);\r\n            saveDocument(docTemplate);\r\n        } catch (FileNotFoundException e) {\r\n            e.printStackTrace();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n            if (docTemplate != null) {\r\n                docTemplate.close();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\nsave function\r\n\r\n\r\n\r\n    private static void saveDocument(XWPFDocument docTemplate) throws FileNotFoundException, IOException {\r\n        FileOutputStream outputFile = null;\r\n        try {\r\n            outputFile = new FileOutputStream(&quot;outfile03.docx&quot;);\r\n            docTemplate.write(outputFile);\r\n        } finally {\r\n            if (outputFile != null) {\r\n                outputFile.close();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nTOC generator function\r\n\r\n\r\n\r\n    public static void generateTOC(XWPFDocument document)\r\n            throws InvalidFormatException, FileNotFoundException, IOException {\r\n        String findText = &quot;${TOC}&quot;;\r\n        String replaceText = &quot;&quot;;\r\n        for (XWPFParagraph p : document.getParagraphs()) {\r\n            for (XWPFRun r : p.getRuns()) {\r\n                int pos = r.getTextPosition();\r\n                String text = r.getText(pos);\r\n                if (text != null &amp;&amp; text.contains(findText)) {\r\n                    text = text.replace(findText, replaceText);\r\n                    r.setText(text, 0);\r\n                    addField(p, &quot;TOC \\\\o \\&quot;1-3\\&quot; \\\\h \\\\z \\\\u&quot;);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\nand this is last function\r\n\r\n\r\n\r\n    private static void addField(XWPFParagraph paragraph, String fieldName) {\r\n        CTSimpleField ctSimpleField = paragraph.getCTP().addNewFldSimple();\r\n        // ctSimpleField.setInstr(fieldName + &quot; \\\\h &quot;);\r\n        ctSimpleField.setInstr(fieldName);\r\n        ctSimpleField.addNewR().addNewT().setStringValue(&quot;outfile03.docx&quot;);\r\n    }\r\n\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/t4zRv.jpg\r\n  [2]: https://i.stack.imgur.com/JlQOM.jpg","title":"How I can create TOC using apache poi","body":"<p>I have the code which create table of content like this:\n<a href=\"https://i.stack.imgur.com/t4zRv.jpg\" rel=\"nofollow noreferrer\">image screenshot</a> ,\nbut i want resualt like this:\n<a href=\"https://i.stack.imgur.com/JlQOM.jpg\" rel=\"nofollow noreferrer\">image screenshot</a> ,</p>\n<p>and this is my code</p>\n<pre><code> package com.example;\n\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\n\nimport org.apache.commons.compress.archivers.dump.InvalidFormatException;\nimport org.apache.poi.openxml4j.exceptions.OpenXML4JException;\nimport org.apache.poi.xwpf.usermodel.XWPFDocument;\nimport org.apache.poi.xwpf.usermodel.XWPFParagraph;\nimport org.apache.poi.xwpf.usermodel.XWPFRun;\nimport org.openxmlformats.schemas.wordprocessingml.x2006.main.CTSimpleField;\n</code></pre>\n<p>These are libraries which I'm using for this project</p>\n<blockquote>\n<p>and I'm also using the maven package manager</p>\n</blockquote>\n<pre><code>public class toc {\n    public static void main(String[] args) throws IOException, OpenXML4JException {\n        XWPFDocument docTemplate = null;\n        try {\n\n        File file = new File(\n                &quot;outfile02.docx&quot;); // &quot;C:\\\\Reports\\\\Template.docx&quot;;\n        FileInputStream fis = new FileInputStream(file);\n        docTemplate = new XWPFDocument(fis);\n        generateTOC(docTemplate);\n        saveDocument(docTemplate);\n    } catch (FileNotFoundException e) {\n        e.printStackTrace();\n    } catch (IOException e) {\n        e.printStackTrace();\n    } finally {\n        if (docTemplate != null) {\n            docTemplate.close();\n        }\n    }\n}\n</code></pre>\n<p>save function</p>\n<pre><code>private static void saveDocument(XWPFDocument docTemplate) throws FileNotFoundException, IOException {\n    FileOutputStream outputFile = null;\n    try {\n        outputFile = new FileOutputStream(&quot;outfile03.docx&quot;);\n        docTemplate.write(outputFile);\n    } finally {\n        if (outputFile != null) {\n            outputFile.close();\n        }\n    }\n}\n</code></pre>\n<p>TOC generator function</p>\n<pre><code>public static void generateTOC(XWPFDocument document)\n        throws InvalidFormatException, FileNotFoundException, IOException {\n    String findText = &quot;${TOC}&quot;;\n    String replaceText = &quot;&quot;;\n    for (XWPFParagraph p : document.getParagraphs()) {\n        for (XWPFRun r : p.getRuns()) {\n            int pos = r.getTextPosition();\n            String text = r.getText(pos);\n            if (text != null &amp;&amp; text.contains(findText)) {\n                text = text.replace(findText, replaceText);\n                r.setText(text, 0);\n                addField(p, &quot;TOC \\\\o \\&quot;1-3\\&quot; \\\\h \\\\z \\\\u&quot;);\n                break;\n            }\n        }\n    }\n}\n</code></pre>\n<p>and this is last function</p>\n<pre><code>private static void addField(XWPFParagraph paragraph, String fieldName) {\n    CTSimpleField ctSimpleField = paragraph.getCTP().addNewFldSimple();\n    // ctSimpleField.setInstr(fieldName + &quot; \\\\h &quot;);\n    ctSimpleField.setInstr(fieldName);\n    ctSimpleField.addNewR().addNewT().setStringValue(&quot;outfile03.docx&quot;);\n}\n\n}\n</code></pre>\n"},{"tags":["java","netbeans"],"owner":{"account_id":14860946,"reputation":1,"user_id":10731772,"display_name":"Jason C"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1675455196,"answer_count":0,"score":0,"last_activity_date":1675459297,"creation_date":1675454731,"question_id":75340545,"body_markdown":"I am tasked with creating a box grid using Java with NetBeans v16 IDE.  I have implemented the code however the grid is being displayed. I can provide the actual code I am using if its needed.\r\n\r\nThe program runs and I have validated the Unicode values are properly formatted and I am not using a code for a question mark.  \r\n\r\n    private static final char WALL_TOP_BOTTOM = 0x2550;\r\n    private static final char WALL_LEFT_RIGHT = 0x2551;\r\n    private static final char WALL_TOP_LEFT_CORNER = 0x2554;\r\n    private static final char WALL_TOP_RIGHT_CORNER = 0x2557;\r\n    private static final char WALL_BOTTOM_RIGHT_CORNER = 0x255D;\r\n    private static final char WALL_BOTTOM_LEFT_CORNER = 0x255A;\r\n    private static final char BOX_CHAR = 0x2588;\r\n    private static final char EMPTY = 0x2591;\r\n\r\nWhen running the program I receive:\r\n```none\r\n-- exec-maven-plugin:3.0.0:exec (default-cli) @ GridApp ---\r\n????????????\r\n????????????\r\n????????????\r\n????????????\r\n????????????\r\n????????????\r\n????????????\r\n????????????\r\n????????????\r\n????????????\r\n????????????\r\n????????????\r\nEnter (U)p, (D)own, (L)eft, (R)ight, or (E)xit:\r\n``` ","title":"Java Box Grid - Receiving Question Marks Instead of a Grid","body":"<p>I am tasked with creating a box grid using Java with NetBeans v16 IDE.  I have implemented the code however the grid is being displayed. I can provide the actual code I am using if its needed.</p>\n<p>The program runs and I have validated the Unicode values are properly formatted and I am not using a code for a question mark.</p>\n<pre><code>private static final char WALL_TOP_BOTTOM = 0x2550;\nprivate static final char WALL_LEFT_RIGHT = 0x2551;\nprivate static final char WALL_TOP_LEFT_CORNER = 0x2554;\nprivate static final char WALL_TOP_RIGHT_CORNER = 0x2557;\nprivate static final char WALL_BOTTOM_RIGHT_CORNER = 0x255D;\nprivate static final char WALL_BOTTOM_LEFT_CORNER = 0x255A;\nprivate static final char BOX_CHAR = 0x2588;\nprivate static final char EMPTY = 0x2591;\n</code></pre>\n<p>When running the program I receive:</p>\n<pre class=\"lang-none prettyprint-override\"><code>-- exec-maven-plugin:3.0.0:exec (default-cli) @ GridApp ---\n????????????\n????????????\n????????????\n????????????\n????????????\n????????????\n????????????\n????????????\n????????????\n????????????\n????????????\n????????????\nEnter (U)p, (D)own, (L)eft, (R)ight, or (E)xit:\n</code></pre>\n"},{"tags":["java","debugging","apache-httpclient-4.x","apache-httpcomponents","apache-httpclient-5.x"],"comments":[{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1585898138,"post_id":61005981,"comment_id":107930895,"body_markdown":"Check if you have the same issue on version 4.x","body":"Check if you have the same issue on version 4.x"},{"owner":{"account_id":133909,"reputation":26610,"user_id":335638,"display_name":"ok2c"},"score":1,"creation_date":1585931732,"post_id":61005981,"comment_id":107947768,"body_markdown":"Behavior of HttpClient 4.x is exactly the same by design. If someone does not want transparent content compression one can easily disable it when building HttpClient","body":"Behavior of HttpClient 4.x is exactly the same by design. If someone does not want transparent content compression one can easily disable it when building HttpClient"},{"owner":{"account_id":7063700,"reputation":7125,"user_id":5407848,"accept_rate":94,"display_name":"Accountant م"},"score":0,"creation_date":1585945755,"post_id":61005981,"comment_id":107954102,"body_markdown":"@ok2c Thanks I have read your answer [here](https://stackoverflow.com/a/30218535) , yes this solution will prevent HttpClient from sending the `Accept-Encoding` header automatically, and If I set this header manually, HttpClient will not decompress the response content, is there any way to get the response decompressed and the response headers also ? should I ask another question for that ?","body":"@ok2c Thanks I have read your answer <a href=\"https://stackoverflow.com/a/30218535\">here</a> , yes this solution will prevent HttpClient from sending the <code>Accept-Encoding</code> header automatically, and If I set this header manually, HttpClient will not decompress the response content, is there any way to get the response decompressed and the response headers also ? should I ask another question for that ?"},{"owner":{"account_id":133909,"reputation":26610,"user_id":335638,"display_name":"ok2c"},"score":0,"creation_date":1585987036,"post_id":61005981,"comment_id":107962704,"body_markdown":"@Accountantم Those headers are removed for a good reason. But if you are absolutely sure you can replace the standard `ContentCompressionExec` with a custom exec interceptor.","body":"@Accountantم Those headers are removed for a good reason. But if you are absolutely sure you can replace the standard <code>ContentCompressionExec</code> with a custom exec interceptor."},{"owner":{"account_id":7063700,"reputation":7125,"user_id":5407848,"accept_rate":94,"display_name":"Accountant م"},"score":0,"creation_date":1585987430,"post_id":61005981,"comment_id":107962815,"body_markdown":"@ok2c that seems like a painful job, I will check it, but if it&#39;s really hard to do, I have no way but sacrificing those headers :(","body":"@ok2c that seems like a painful job, I will check it, but if it&#39;s really hard to do, I have no way but sacrificing those headers :("}],"answers":[{"comments":[{"owner":{"account_id":7063700,"reputation":7125,"user_id":5407848,"accept_rate":94,"display_name":"Accountant م"},"score":0,"creation_date":1585901067,"post_id":61006813,"comment_id":107932182,"body_markdown":"OK, yes it works only if I sent the `Accept-Encoding: identity` header, otherwise `HttpClient` will not show the `Content-Length` header :( .Regarding counting the bytes workaround, I don&#39;t want to do that as I will use the library intensively, and counting the bytes for every http request I do could produce a performance issue that can be avoided only if HttpClient tells me all the headers. Thank you very much for your help","body":"OK, yes it works only if I sent the <code>Accept-Encoding: identity</code> header, otherwise <code>HttpClient</code> will not show the <code>Content-Length</code> header :( .Regarding counting the bytes workaround, I don&#39;t want to do that as I will use the library intensively, and counting the bytes for every http request I do could produce a performance issue that can be avoided only if HttpClient tells me all the headers. Thank you very much for your help"},{"owner":{"account_id":109278,"reputation":9687,"user_id":289625,"accept_rate":100,"display_name":"Dave G"},"score":0,"creation_date":1585915336,"post_id":61006813,"comment_id":107938671,"body_markdown":"You&#39;re welcome - I wish I had a better solution for what you were after. Please mark this answer as accepted if you are satisfied with it.","body":"You&#39;re welcome - I wish I had a better solution for what you were after. Please mark this answer as accepted if you are satisfied with it."},{"owner":{"account_id":7063700,"reputation":7125,"user_id":5407848,"accept_rate":94,"display_name":"Accountant م"},"score":0,"creation_date":1585945241,"post_id":61006813,"comment_id":107953911,"body_markdown":"Thanks Dave G, yes your answer helped me lot, and I upvoted it yesterday, however seeing the actual lines of code that causes this behavior in the accepted answer may help the later reader much, I wish I can accept both answers.","body":"Thanks Dave G, yes your answer helped me lot, and I upvoted it yesterday, however seeing the actual lines of code that causes this behavior in the accepted answer may help the later reader much, I wish I can accept both answers."}],"tags":[],"owner":{"account_id":109278,"reputation":9687,"user_id":289625,"accept_rate":100,"display_name":"Dave G"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1585898168,"creation_date":1585898168,"answer_id":61006813,"question_id":61005981,"body_markdown":"The content-length may be potentially ignored in this case.\r\n\r\n    HttpGet request = new HttpGet(new URI(&quot;https://www.example.com&quot;));\r\n    request.setHeader(&quot;Accept-Encoding&quot;, &quot;identity&quot;);\r\n    CloseableHttpResponse response = httpclient.execute(request);\r\n\r\nI can see the following\r\n\r\n\tHttpEntity entity = response.getEntity();\r\n    System.out.println(entity.getContentLength());\r\n    System.out.println(entity.getContentEncoding());\r\n\r\nOutput\r\n\r\n    ...\r\n    2020-04-03 03:04:17.760 DEBUG 34196 --- [           main] org.apache.hc.client5.http.headers       : http-outgoing-0 &lt;&lt; Content-Length: 1256\r\n    ...\r\n    1256\r\n    null\r\n\r\nI&#39;d like to direct your attention to this header being sent:\r\n\r\n    http-outgoing-0 &gt;&gt; Accept-Encoding: gzip, x-gzip, deflate\r\n\r\nThat tells the server that this client can accept gzip, x-gzip, and deflate content in response. The response is stating it is &#39;gzip&#39; encoded.\r\n\r\n    http-outgoing-0 &lt;&lt; Content-Encoding: gzip\r\n\r\nI believe that HttpClient is transparently handling this internally and making the content available.\r\n\r\nAs stated in the other article you referenced, one of the answers indicated that the method `EntityUtils.toByteArray(httpResponse.getEntity()).length` could be applied to get the content length.\r\n\r\n","title":"Apache HttpClient is not showing Content-Length and Content-Encoding headers of the response","body":"<p>The content-length may be potentially ignored in this case.</p>\n\n<pre><code>HttpGet request = new HttpGet(new URI(\"https://www.example.com\"));\nrequest.setHeader(\"Accept-Encoding\", \"identity\");\nCloseableHttpResponse response = httpclient.execute(request);\n</code></pre>\n\n<p>I can see the following</p>\n\n<pre><code>HttpEntity entity = response.getEntity();\nSystem.out.println(entity.getContentLength());\nSystem.out.println(entity.getContentEncoding());\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>...\n2020-04-03 03:04:17.760 DEBUG 34196 --- [           main] org.apache.hc.client5.http.headers       : http-outgoing-0 &lt;&lt; Content-Length: 1256\n...\n1256\nnull\n</code></pre>\n\n<p>I'd like to direct your attention to this header being sent:</p>\n\n<pre><code>http-outgoing-0 &gt;&gt; Accept-Encoding: gzip, x-gzip, deflate\n</code></pre>\n\n<p>That tells the server that this client can accept gzip, x-gzip, and deflate content in response. The response is stating it is 'gzip' encoded.</p>\n\n<pre><code>http-outgoing-0 &lt;&lt; Content-Encoding: gzip\n</code></pre>\n\n<p>I believe that HttpClient is transparently handling this internally and making the content available.</p>\n\n<p>As stated in the other article you referenced, one of the answers indicated that the method <code>EntityUtils.toByteArray(httpResponse.getEntity()).length</code> could be applied to get the content length.</p>\n"},{"comments":[{"owner":{"account_id":7063700,"reputation":7125,"user_id":5407848,"accept_rate":94,"display_name":"Accountant م"},"score":0,"creation_date":1585945166,"post_id":61011806,"comment_id":107953878,"body_markdown":"Thank you very much Michael-O for your time in HttpComponents and for having an active account here on SO. But Michael I&#39;m greed and need both features (the decompressed content + all response headers) for example like curl.\nI don&#39;t have to sacrifice one of them, why are you removing these headers ? they are actual headers returned from the server. **Is there any way to get the decompressed content and the headers?**","body":"Thank you very much Michael-O for your time in HttpComponents and for having an active account here on SO. But Michael I&#39;m greed and need both features (the decompressed content + all response headers) for example like curl. I don&#39;t have to sacrifice one of them, why are you removing these headers ? they are actual headers returned from the server. <b>Is there any way to get the decompressed content and the headers?</b>"},{"owner":{"account_id":356850,"reputation":18179,"user_id":696632,"accept_rate":62,"display_name":"Michael-O"},"score":1,"creation_date":1586003212,"post_id":61011806,"comment_id":107967435,"body_markdown":"@Accountantم As ok2c pointed out you cannot have both, unless you write custom code. You should perform the decompression manually. This will retain all headers. Regarding curl, I consider this to be a bug. I have raised an issue.","body":"@Accountantم As ok2c pointed out you cannot have both, unless you write custom code. You should perform the decompression manually. This will retain all headers. Regarding curl, I consider this to be a bug. I have raised an issue."},{"owner":{"account_id":7063700,"reputation":7125,"user_id":5407848,"accept_rate":94,"display_name":"Accountant م"},"score":0,"creation_date":1586048050,"post_id":61011806,"comment_id":107982134,"body_markdown":"I have commented on the curl issue on GitHub, please Michael reconsider allowing your consumers to get the response headers as sent from the server, even if as raw string.","body":"I have commented on the curl issue on GitHub, please Michael reconsider allowing your consumers to get the response headers as sent from the server, even if as raw string."},{"owner":{"account_id":356850,"reputation":18179,"user_id":696632,"accept_rate":62,"display_name":"Michael-O"},"score":1,"creation_date":1586075866,"post_id":61011806,"comment_id":107987485,"body_markdown":"@Accountantم you can have access. Disable automatic decompression.","body":"@Accountantم you can have access. Disable automatic decompression."},{"owner":{"account_id":7063700,"reputation":7125,"user_id":5407848,"accept_rate":94,"display_name":"Accountant م"},"score":0,"creation_date":1586149245,"post_id":61011806,"comment_id":108010822,"body_markdown":"Michael :) you know I mean while having the response automatically decompressed. Anyway in the mean time I have nothing but sacrificing these headers, we have to finish the project in the planned time and we have no time for implementing our own decompression. Thank you for your time and effort in HttpComponents and **I hope you change your mind one day and think of it from another perspective as the user of the library not the maker of the library.**","body":"Michael :) you know I mean while having the response automatically decompressed. Anyway in the mean time I have nothing but sacrificing these headers, we have to finish the project in the planned time and we have no time for implementing our own decompression. Thank you for your time and effort in HttpComponents and <b>I hope you change your mind one day and think of it from another perspective as the user of the library not the maker of the library.</b>"}],"tags":[],"owner":{"account_id":356850,"reputation":18179,"user_id":696632,"accept_rate":62,"display_name":"Michael-O"},"comment_count":5,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1675459231,"creation_date":1585916392,"answer_id":61011806,"question_id":61005981,"body_markdown":"HttpComponents committer here...\r\n\r\nYou did not closely pay attention what Dave G said. By default, `HttpClientBuilder` will enable transparent decompression and the reason why you don&#39;t see some headers anymore is [here](https://github.com/apache/httpcomponents-client/blob/92100e13a6aeb9ce04d23df2561c01b330cb961a/httpclient5/src/main/java/org/apache/hc/client5/http/impl/classic/ContentCompressionExec.java#L141-L145):\r\n\r\n```java\r\nif (decoderFactory != null) {\r\n  response.setEntity(new DecompressingEntity(response.getEntity(), decoderFactory));\r\n  response.removeHeaders(HttpHeaders.CONTENT_LENGTH);\r\n  response.removeHeaders(HttpHeaders.CONTENT_ENCODING);\r\n  response.removeHeaders(HttpHeaders.CONTENT_MD5);\r\n} ...\r\n```\r\n\r\nRegarding the JDK HttpClient, it will not perform any transparent decompression, therefore you see the length of the compressed stream. You have to decompress on your own.\r\n\r\ncurl committer here...\r\n\r\nI have [raised an issue](https://github.com/curl/curl/issues/5182) too.\r\n\r\n*Update: 03 Feb. &#39;23* The secret codez to disable automatic decompression are:\r\n\r\n    CloseableHttpClient httpclient = HttpClients.createSimple();\r\n    // OR\r\n    CloseableHttpClient httpclient = HttpClients.custom().disableContentCompression().build();","title":"Apache HttpClient is not showing Content-Length and Content-Encoding headers of the response","body":"<p>HttpComponents committer here...</p>\n<p>You did not closely pay attention what Dave G said. By default, <code>HttpClientBuilder</code> will enable transparent decompression and the reason why you don't see some headers anymore is <a href=\"https://github.com/apache/httpcomponents-client/blob/92100e13a6aeb9ce04d23df2561c01b330cb961a/httpclient5/src/main/java/org/apache/hc/client5/http/impl/classic/ContentCompressionExec.java#L141-L145\" rel=\"nofollow noreferrer\">here</a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (decoderFactory != null) {\n  response.setEntity(new DecompressingEntity(response.getEntity(), decoderFactory));\n  response.removeHeaders(HttpHeaders.CONTENT_LENGTH);\n  response.removeHeaders(HttpHeaders.CONTENT_ENCODING);\n  response.removeHeaders(HttpHeaders.CONTENT_MD5);\n} ...\n</code></pre>\n<p>Regarding the JDK HttpClient, it will not perform any transparent decompression, therefore you see the length of the compressed stream. You have to decompress on your own.</p>\n<p>curl committer here...</p>\n<p>I have <a href=\"https://github.com/curl/curl/issues/5182\" rel=\"nofollow noreferrer\">raised an issue</a> too.</p>\n<p><em>Update: 03 Feb. '23</em> The secret codez to disable automatic decompression are:</p>\n<pre><code>CloseableHttpClient httpclient = HttpClients.createSimple();\n// OR\nCloseableHttpClient httpclient = HttpClients.custom().disableContentCompression().build();\n</code></pre>\n"}],"owner":{"account_id":7063700,"reputation":7125,"user_id":5407848,"accept_rate":94,"display_name":"Accountant م"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4646,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":61011806,"answer_count":2,"score":2,"last_activity_date":1675459231,"creation_date":1585894112,"question_id":61005981,"body_markdown":"I installed [Apache httpcomponents-client-5.0.x](https://hc.apache.org/httpcomponents-client-5.0.x/index.html) and while reviewing the headers of the http response, I was shocked it doesn&#39;t show the `Content-Length` and `Content-Encoding` headers, this is the code I used for testing\r\n\r\n    import org.apache.hc.client5.http.impl.classic.CloseableHttpClient;\r\n    import org.apache.hc.client5.http.impl.classic.CloseableHttpResponse;\r\n    import org.apache.hc.client5.http.impl.classic.HttpClients;\r\n    import com.sun.net.httpserver.Headers;\r\n\r\n    CloseableHttpClient httpclient = HttpClients.createDefault();\r\n    HttpGet request = new HttpGet(new URI(&quot;https://www.example.com&quot;));\r\n    CloseableHttpResponse response = httpclient.execute(request);\r\n    Header[] responseHeaders = response.getHeaders();\r\n    for(Header header: responseHeaders) {\t\t\t\t\r\n        System.out.println(header.getName());\r\n    }\r\n    // this prints all the headers except \r\n    // status code header\r\n    // Content-Length\r\n    // Content-Encoding\r\n\r\nNo matter what I try I get the same result, like this\r\n\r\n    Iterator&lt;Header&gt; headersItr = response.headerIterator();\r\n    while(headersItr.hasNext()) {\r\n        Header header = headersItr.next();\r\n        System.out.println(header.getName());\r\n    }\r\n\r\nOr this\r\n\r\n    HttpEntity entity = response.getEntity();\r\n    System.out.println(entity.getContentEncoding()); // NULL\r\n    System.out.println(entity.getContentLength());   // -1\r\n\r\nAccording to [this question](https://stackoverflow.com/questions/18726892/apache-httpclient-response-content-length-returns-1) that has been asked 6 years ago, it seems like an old issue even with older versions of Apache HttpClient.\r\n\r\nOf-course the server is actually returning those headers as confirmed by Wireshark, and Apache HttpClient logs itself\r\n\r\n    2020-04-03 07:59:09,106 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; HTTP/1.1 200 OK\r\n    2020-04-03 07:59:09,106 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; Content-Encoding: gzip\r\n    2020-04-03 07:59:09,106 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; Accept-Ranges: bytes\r\n    2020-04-03 07:59:09,107 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; Age: 451956\r\n    2020-04-03 07:59:09,107 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; Cache-Control: max-age=604800\r\n    2020-04-03 07:59:09,107 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; Content-Type: text/html; charset=UTF-8\r\n    2020-04-03 07:59:09,107 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; Date: Fri, 03 Apr 2020 05:59:09 GMT\r\n    2020-04-03 07:59:09,108 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; Etag: &quot;3147526947+gzip&quot;\r\n    2020-04-03 07:59:09,108 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; Expires: Fri, 10 Apr 2020 05:59:09 GMT\r\n    2020-04-03 07:59:09,108 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; Last-Modified: Thu, 17 Oct 2019 07:18:26 GMT\r\n    2020-04-03 07:59:09,108 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; Server: ECS (dcb/7EEB)\r\n    2020-04-03 07:59:09,108 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; Vary: Accept-Encoding\r\n    2020-04-03 07:59:09,109 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; X-Cache: HIT\r\n    2020-04-03 07:59:09,109 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; Content-Length: 648\r\n\r\nBTW, `java.net.http` library known as [`JDK HttpClient`](https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpClient.html) works great and show all the headers.\r\n\r\nIs there something wrong I did, or should I report a bug that been there for years ?\r\n\r\n\r\n\r\n","title":"Apache HttpClient is not showing Content-Length and Content-Encoding headers of the response","body":"<p>I installed <a href=\"https://hc.apache.org/httpcomponents-client-5.0.x/index.html\" rel=\"nofollow noreferrer\">Apache httpcomponents-client-5.0.x</a> and while reviewing the headers of the http response, I was shocked it doesn't show the <code>Content-Length</code> and <code>Content-Encoding</code> headers, this is the code I used for testing</p>\n\n<pre><code>import org.apache.hc.client5.http.impl.classic.CloseableHttpClient;\nimport org.apache.hc.client5.http.impl.classic.CloseableHttpResponse;\nimport org.apache.hc.client5.http.impl.classic.HttpClients;\nimport com.sun.net.httpserver.Headers;\n\nCloseableHttpClient httpclient = HttpClients.createDefault();\nHttpGet request = new HttpGet(new URI(\"https://www.example.com\"));\nCloseableHttpResponse response = httpclient.execute(request);\nHeader[] responseHeaders = response.getHeaders();\nfor(Header header: responseHeaders) {               \n    System.out.println(header.getName());\n}\n// this prints all the headers except \n// status code header\n// Content-Length\n// Content-Encoding\n</code></pre>\n\n<p>No matter what I try I get the same result, like this</p>\n\n<pre><code>Iterator&lt;Header&gt; headersItr = response.headerIterator();\nwhile(headersItr.hasNext()) {\n    Header header = headersItr.next();\n    System.out.println(header.getName());\n}\n</code></pre>\n\n<p>Or this</p>\n\n<pre><code>HttpEntity entity = response.getEntity();\nSystem.out.println(entity.getContentEncoding()); // NULL\nSystem.out.println(entity.getContentLength());   // -1\n</code></pre>\n\n<p>According to <a href=\"https://stackoverflow.com/questions/18726892/apache-httpclient-response-content-length-returns-1\">this question</a> that has been asked 6 years ago, it seems like an old issue even with older versions of Apache HttpClient.</p>\n\n<p>Of-course the server is actually returning those headers as confirmed by Wireshark, and Apache HttpClient logs itself</p>\n\n<pre><code>2020-04-03 07:59:09,106 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; HTTP/1.1 200 OK\n2020-04-03 07:59:09,106 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; Content-Encoding: gzip\n2020-04-03 07:59:09,106 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; Accept-Ranges: bytes\n2020-04-03 07:59:09,107 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; Age: 451956\n2020-04-03 07:59:09,107 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; Cache-Control: max-age=604800\n2020-04-03 07:59:09,107 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; Content-Type: text/html; charset=UTF-8\n2020-04-03 07:59:09,107 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; Date: Fri, 03 Apr 2020 05:59:09 GMT\n2020-04-03 07:59:09,108 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; Etag: \"3147526947+gzip\"\n2020-04-03 07:59:09,108 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; Expires: Fri, 10 Apr 2020 05:59:09 GMT\n2020-04-03 07:59:09,108 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; Last-Modified: Thu, 17 Oct 2019 07:18:26 GMT\n2020-04-03 07:59:09,108 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; Server: ECS (dcb/7EEB)\n2020-04-03 07:59:09,108 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; Vary: Accept-Encoding\n2020-04-03 07:59:09,109 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; X-Cache: HIT\n2020-04-03 07:59:09,109 DEBUG [org.apache.hc.client5.http.headers] http-outgoing-0 &lt;&lt; Content-Length: 648\n</code></pre>\n\n<p>BTW, <code>java.net.http</code> library known as <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpClient.html\" rel=\"nofollow noreferrer\"><code>JDK HttpClient</code></a> works great and show all the headers.</p>\n\n<p>Is there something wrong I did, or should I report a bug that been there for years ?</p>\n"},{"tags":["java","azure","graphql"],"answers":[{"tags":[],"owner":{"account_id":11793351,"reputation":1057,"user_id":8628731,"display_name":"Billy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675459210,"creation_date":1675459210,"answer_id":75341122,"question_id":75302664,"body_markdown":"The problem was the update intellij from 2019.x.x to 2022.3.2 community version. The IDE comes with a kotlin plugin that fixes the issue.","title":"Building Graph-QL for Microsoft Azure // &quot;import okhttp3.Request&quot; not importing","body":"<p>The problem was the update intellij from 2019.x.x to 2022.3.2 community version. The IDE comes with a kotlin plugin that fixes the issue.</p>\n"}],"owner":{"account_id":11793351,"reputation":1057,"user_id":8628731,"display_name":"Billy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75341122,"answer_count":1,"score":0,"last_activity_date":1675459210,"creation_date":1675196174,"question_id":75302664,"body_markdown":"Trying to follow https://learn.microsoft.com/en-us/graph/tutorials/java?tabs=aad&amp;tutorial-step=3 to build connectivity to Microsoft Azure AD.\r\nI have taken directly from the sample, so far I&#39;m able to import everything except the `import okhttp3.Request` jar? See screenshots showing I have dependency but not able to use. This is needed for the GraphServiceClient&lt;T&gt; type?\r\n\r\nThank you\r\n\r\n[![enter image description here][1]][1]\r\n[![enter image description here][2]][2]\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GqRbA.png\r\n  [2]: https://i.stack.imgur.com/yaaY1.png\r\n  [3]: https://i.stack.imgur.com/nFHIq.png","title":"Building Graph-QL for Microsoft Azure // &quot;import okhttp3.Request&quot; not importing","body":"<p>Trying to follow <a href=\"https://learn.microsoft.com/en-us/graph/tutorials/java?tabs=aad&amp;tutorial-step=3\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/graph/tutorials/java?tabs=aad&amp;tutorial-step=3</a> to build connectivity to Microsoft Azure AD.\nI have taken directly from the sample, so far I'm able to import everything except the <code>import okhttp3.Request</code> jar? See screenshots showing I have dependency but not able to use. This is needed for the GraphServiceClient type?</p>\n<p>Thank you</p>\n<p><a href=\"https://i.stack.imgur.com/GqRbA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GqRbA.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/yaaY1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yaaY1.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/nFHIq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nFHIq.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring-boot","spring-mvc","exception"],"comments":[{"owner":{"account_id":4412829,"reputation":99,"user_id":3595211,"accept_rate":50,"display_name":"Ashish Srivastava"},"score":0,"creation_date":1675456471,"post_id":75340690,"comment_id":132940633,"body_markdown":"You can create a custom exception class that extends RuntimeException and define the error message and status code. Then in your GlobalExceptionHandler, you can catch this custom exception and return a ResponseEntity of type ApiResponse with the error message and status code. This way, your error handling logic remains in the GlobalExceptionHandler and your controller returns a consistent response format.","body":"You can create a custom exception class that extends RuntimeException and define the error message and status code. Then in your GlobalExceptionHandler, you can catch this custom exception and return a ResponseEntity of type ApiResponse with the error message and status code. This way, your error handling logic remains in the GlobalExceptionHandler and your controller returns a consistent response format."},{"owner":{"display_name":"user21099360"},"score":0,"creation_date":1675458342,"post_id":75340690,"comment_id":132941077,"body_markdown":"Thanks a lot for your helps. I added my update to clarify you a little bit more. So, under these conditions, should I merge my `ApiResponse` and `ErrorResponse` classes and return the same type like `ResponseEntity&lt;MergedApiResponse&lt;T&gt;&gt;`  using `MergedApiResponse` ?","body":"Thanks a lot for your helps. I added my update to clarify you a little bit more. So, under these conditions, should I merge my <code>ApiResponse</code> and <code>ErrorResponse</code> classes and return the same type like <code>ResponseEntity&lt;MergedApiResponse&lt;T&gt;&gt;</code>  using <code>MergedApiResponse</code> ?"},{"owner":{"display_name":"user21099360"},"score":0,"creation_date":1675525764,"post_id":75340690,"comment_id":132949708,"body_markdown":"@AshishSrivastava Chico? Are you there?","body":"@AshishSrivastava Chico? Are you there?"}],"owner":{"display_name":"user21099360"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":208,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675458222,"creation_date":1675455754,"question_id":75340690,"body_markdown":"In my Spring Boot app, I implemented a global exception handler class as shown below:\r\n\r\n```\r\n@RestControllerAdvice\r\npublic class GlobalExceptionHandler extends ResponseEntityExceptionHandler {\r\n\r\n    @Override\r\n    @ResponseStatus(HttpStatus.UNPROCESSABLE_ENTITY)\r\n    protected ResponseEntity&lt;Object&gt; handleMethodArgumentNotValid() {\r\n        // code omitted for brevity \r\n\r\n        return ResponseEntity.unprocessableEntity().body(errorResponse);\r\n    }\r\n    \r\n    // other type of exceptions\r\n}\r\n```\r\n\r\nAnd in my Controller, I return `ResponseEntity&lt;ApiResponse&gt;` as shown below:\r\n\r\n```\r\n@GetMapping(&quot;/categories/{id}&quot;)\r\npublic ResponseEntity&lt;ApiResponse&lt;CategoryResponse&gt;&gt; findById(@PathVariable long id){\r\n    final CategoryResponse response = categoryService.findById(id);\r\n    return ResponseEntity.ok(\r\n        new ApiResponse&lt;&gt;(\r\n            Instant.now(clock).toEpochMilli(), Constants.SUCCESS, response));\r\n}\r\n```\r\n\r\nHere is my `ApiResponse` class:\r\n\r\n```\r\n@Data\r\n@AllArgsConstructor\r\npublic class ApiResponse&lt;T&gt; {\r\n\r\n    private Long timestamp;\r\n    private final String message;\r\n    private final T data;\r\n\r\n    public ApiResponse(Long timestamp, String message) {\r\n        this.timestamp = timestamp;\r\n        this.message = message;\r\n        this.data = null;\r\n    }\r\n}\r\n```\r\n\r\nMy problem is that; when there is an error, I cannot catch it on Controller and `GlobalExceptionHandler` directly return error in `ResponseEntity&lt;Object&gt;` type. When I send requests via Postman, I get the error message, but when I implemented a frontend app, I realized that this format is different than return type when there is no error. \r\n\r\nSo, I think I should manage the exception as well in the Controller and return the same type data to frontend so that the return value can easily be manipulated. How should I solve this problem? I do not want to use try-catch and do not move my business logic to the Controller. Instead, maybe I should change return type of `ResponseEntity&lt;Object&gt;` in the exception handler to a similar one in the Controller. Or may need to return exception to the Controller. What should I do? \r\n\r\n&lt;br/&gt;\r\n\r\n**Update:** I had already implemented a custom exception class:\r\n\r\n```\r\npublic class ElementAlreadyExistsException extends RuntimeException {\r\n\r\n    public ElementAlreadyExistsException() {\r\n        super();\r\n    }\r\n\r\n    public ElementAlreadyExistsException(String message) {\r\n        super(message);\r\n    }\r\n\r\n    public ElementAlreadyExistsException(String message, Throwable cause) {\r\n        super(message, cause);\r\n    }\r\n}\r\n```\r\n\r\n&lt;br/&gt;\r\nAnd use it in my `GlobalExceptionHandler` as shown below:\r\n\r\n```\r\n@ExceptionHandler(ElementAlreadyExistsException.class)\r\n@ResponseStatus(HttpStatus.CONFLICT)\r\npublic ResponseEntity&lt;Object&gt; handleElementAlreadyExistsException(ElementAlreadyExistsException ex, WebRequest request) {\r\n    return buildErrorResponse(ex, HttpStatus.CONFLICT, request);\r\n}\r\n```\r\n\r\nAnd the errors are build as shown below:\r\n\r\n```\r\nprivate ResponseEntity&lt;Object&gt; buildErrorResponse(Exception ex,\r\n                                                      HttpStatus httpStatus,\r\n                                                      WebRequest request) {\r\n        ErrorResponse errorResponse = new ErrorResponse(httpStatus.value(), message);\r\n        return ResponseEntity.status(httpStatus).body(errorResponse);\r\n    }\r\n```\r\n\r\nAnd here is the response class that I use for exception:\r\n\r\n```\r\n@Data\r\n@JsonInclude(JsonInclude.Include.NON_NULL)\r\npublic class ErrorResponse {\r\n\r\n    private final int status;\r\n    private final String message;\r\n    private String stackTrace;\r\n    private List&lt;ValidationError&gt; errors;\r\n\r\n    @Data\r\n    private static class ValidationError {\r\n        private final String field;\r\n        private final String message;\r\n    }\r\n\r\n    public void addValidationError(String field, String message) {\r\n        if (Objects.isNull(errors)) {\r\n            errors = new ArrayList&lt;&gt;();\r\n        }\r\n        errors.add(new ValidationError(field, message));\r\n    }\r\n}\r\n```","title":"Cannot catch exception in Controller in Spring Boot app","body":"<p>In my Spring Boot app, I implemented a global exception handler class as shown below:</p>\n<pre><code>@RestControllerAdvice\npublic class GlobalExceptionHandler extends ResponseEntityExceptionHandler {\n\n    @Override\n    @ResponseStatus(HttpStatus.UNPROCESSABLE_ENTITY)\n    protected ResponseEntity&lt;Object&gt; handleMethodArgumentNotValid() {\n        // code omitted for brevity \n\n        return ResponseEntity.unprocessableEntity().body(errorResponse);\n    }\n    \n    // other type of exceptions\n}\n</code></pre>\n<p>And in my Controller, I return <code>ResponseEntity&lt;ApiResponse&gt;</code> as shown below:</p>\n<pre><code>@GetMapping(&quot;/categories/{id}&quot;)\npublic ResponseEntity&lt;ApiResponse&lt;CategoryResponse&gt;&gt; findById(@PathVariable long id){\n    final CategoryResponse response = categoryService.findById(id);\n    return ResponseEntity.ok(\n        new ApiResponse&lt;&gt;(\n            Instant.now(clock).toEpochMilli(), Constants.SUCCESS, response));\n}\n</code></pre>\n<p>Here is my <code>ApiResponse</code> class:</p>\n<pre><code>@Data\n@AllArgsConstructor\npublic class ApiResponse&lt;T&gt; {\n\n    private Long timestamp;\n    private final String message;\n    private final T data;\n\n    public ApiResponse(Long timestamp, String message) {\n        this.timestamp = timestamp;\n        this.message = message;\n        this.data = null;\n    }\n}\n</code></pre>\n<p>My problem is that; when there is an error, I cannot catch it on Controller and <code>GlobalExceptionHandler</code> directly return error in <code>ResponseEntity&lt;Object&gt;</code> type. When I send requests via Postman, I get the error message, but when I implemented a frontend app, I realized that this format is different than return type when there is no error.</p>\n<p>So, I think I should manage the exception as well in the Controller and return the same type data to frontend so that the return value can easily be manipulated. How should I solve this problem? I do not want to use try-catch and do not move my business logic to the Controller. Instead, maybe I should change return type of <code>ResponseEntity&lt;Object&gt;</code> in the exception handler to a similar one in the Controller. Or may need to return exception to the Controller. What should I do?</p>\n<br/>\n<p><strong>Update:</strong> I had already implemented a custom exception class:</p>\n<pre><code>public class ElementAlreadyExistsException extends RuntimeException {\n\n    public ElementAlreadyExistsException() {\n        super();\n    }\n\n    public ElementAlreadyExistsException(String message) {\n        super(message);\n    }\n\n    public ElementAlreadyExistsException(String message, Throwable cause) {\n        super(message, cause);\n    }\n}\n</code></pre>\n<br/>\nAnd use it in my `GlobalExceptionHandler` as shown below:\n<pre><code>@ExceptionHandler(ElementAlreadyExistsException.class)\n@ResponseStatus(HttpStatus.CONFLICT)\npublic ResponseEntity&lt;Object&gt; handleElementAlreadyExistsException(ElementAlreadyExistsException ex, WebRequest request) {\n    return buildErrorResponse(ex, HttpStatus.CONFLICT, request);\n}\n</code></pre>\n<p>And the errors are build as shown below:</p>\n<pre><code>private ResponseEntity&lt;Object&gt; buildErrorResponse(Exception ex,\n                                                      HttpStatus httpStatus,\n                                                      WebRequest request) {\n        ErrorResponse errorResponse = new ErrorResponse(httpStatus.value(), message);\n        return ResponseEntity.status(httpStatus).body(errorResponse);\n    }\n</code></pre>\n<p>And here is the response class that I use for exception:</p>\n<pre><code>@Data\n@JsonInclude(JsonInclude.Include.NON_NULL)\npublic class ErrorResponse {\n\n    private final int status;\n    private final String message;\n    private String stackTrace;\n    private List&lt;ValidationError&gt; errors;\n\n    @Data\n    private static class ValidationError {\n        private final String field;\n        private final String message;\n    }\n\n    public void addValidationError(String field, String message) {\n        if (Objects.isNull(errors)) {\n            errors = new ArrayList&lt;&gt;();\n        }\n        errors.add(new ValidationError(field, message));\n    }\n}\n</code></pre>\n"},{"tags":["java","hibernate"],"owner":{"account_id":25632945,"reputation":41,"user_id":19403013,"display_name":"John Hendricks"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675458089,"creation_date":1675455450,"question_id":75340649,"body_markdown":"I am trying to setup my first Java Hibernate project and decided to follow the instructions on this YouTube video: https://www.youtube.com/watch?v=QJddHc41xrM&amp;t=535s I made it to @08:50 where &quot;jpa&quot; was entered and the entitymanager setup was compiled. I can&#39;t get intellij to recognize this input and compile the code like in the video. What would be the next step to get this application working so I can simply enter 1 row into my database. Attached to this question are pictures of my class file setup and structure. I will also attach code to show how my entities, pom.xml, and persistence.xml file is setup. My main class that would start the transaction is empty and I want to know how I can make this work or what additional information I need to make it work. Any help would be much appreciated. \r\n[![enter image description here][1]][1]\r\n[![enter image description here][2]][2]\r\n\r\nThe code below is from my pom.xml file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n        &lt;artifactId&gt;HibernateJPA&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;name&gt;HibernateJPA&lt;/name&gt;\r\n        &lt;packaging&gt;war&lt;/packaging&gt;\r\n        &lt;properties&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n            &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n            &lt;junit.version&gt;5.9.1&lt;/junit.version&gt;\r\n        &lt;/properties&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\r\n                &lt;version&gt;5.0.0&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n                &lt;version&gt;6.0.2.Final&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.2&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n                &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n                &lt;version&gt;${junit.version}&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n                &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n                &lt;version&gt;${junit.version}&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n                &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n                &lt;version&gt;8.0.32&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.3.2&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\nThe code below is from my persistence.xml file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\r\n    &lt;persistence xmlns=&quot;https://jakarta.ee/xml/ns/persistence&quot;\r\n                 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n                 xsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/persistence https://jakarta.ee/xml/ns/persistence/persistence_3_0.xsd&quot;\r\n                 version=&quot;3.0&quot;&gt;\r\n        &lt;persistence-unit name=&quot;default&quot;&gt;\r\n    \r\n            &lt;class&gt;entity.EmployeeEntity&lt;/class&gt;\r\n            &lt;properties&gt;\r\n                &lt;property name=&quot;hibernate.connection.url&quot; value=&quot;jdbc:mysql://localhost:3306/testDB&quot;/&gt;\r\n                &lt;property name=&quot;hibernate.connection.driver_class&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;\r\n                &lt;property name=&quot;hibernate.connection.username&quot; value=&quot;root&quot;/&gt;\r\n                &lt;property name=&quot;hibernate.connection.password&quot; value=&quot;&quot;/&gt;\r\n            &lt;/properties&gt;\r\n        &lt;/persistence-unit&gt;\r\n    &lt;/persistence&gt;\r\n\r\nThe code below is from my Entity Employee class:\r\n\r\n    package entity;\r\n    \r\n    import jakarta.persistence.*;\r\n    \r\n    import java.util.Objects;\r\n    \r\n    @Entity\r\n    @Table(name = &quot;employee&quot;, schema = &quot;testdb&quot;, catalog = &quot;&quot;)\r\n    public class EmployeeEntity {\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Id\r\n        @Column(name = &quot;id&quot;)\r\n        private int id;\r\n        @Basic\r\n        @Column(name = &quot;first_name&quot;)\r\n        private String firstName;\r\n        @Basic\r\n        @Column(name = &quot;last_name&quot;)\r\n        private String lastName;\r\n        @Basic\r\n        @Column(name = &quot;salary&quot;)\r\n        private Integer salary;\r\n    \r\n        public int getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(int id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        public String getFirstName() {\r\n            return firstName;\r\n        }\r\n    \r\n        public void setFirstName(String firstName) {\r\n            this.firstName = firstName;\r\n        }\r\n    \r\n        public String getLastName() {\r\n            return lastName;\r\n        }\r\n    \r\n        public void setLastName(String lastName) {\r\n            this.lastName = lastName;\r\n        }\r\n    \r\n        public Integer getSalary() {\r\n            return salary;\r\n        }\r\n    \r\n        public void setSalary(Integer salary) {\r\n            this.salary = salary;\r\n        }\r\n    \r\n        @Override\r\n        public boolean equals(Object o) {\r\n            if (this == o) return true;\r\n            if (o == null || getClass() != o.getClass()) return false;\r\n            EmployeeEntity that = (EmployeeEntity) o;\r\n            return id == that.id &amp;&amp; Objects.equals(firstName, that.firstName) &amp;&amp; Objects.equals(lastName, that.lastName) &amp;&amp; Objects.equals(salary, that.salary);\r\n        }\r\n    \r\n        @Override\r\n        public int hashCode() {\r\n            return Objects.hash(id, firstName, lastName, salary);\r\n        }\r\n    }\r\n\r\n  [1]: https://i.stack.imgur.com/jDIsE.png\r\n  [2]: https://i.stack.imgur.com/9Iikg.png","title":"IntelliJ Jakarta EE Hibernate Setup Question","body":"<p>I am trying to setup my first Java Hibernate project and decided to follow the instructions on this YouTube video: <a href=\"https://www.youtube.com/watch?v=QJddHc41xrM&amp;t=535s\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=QJddHc41xrM&amp;t=535s</a> I made it to @08:50 where &quot;jpa&quot; was entered and the entitymanager setup was compiled. I can't get intellij to recognize this input and compile the code like in the video. What would be the next step to get this application working so I can simply enter 1 row into my database. Attached to this question are pictures of my class file setup and structure. I will also attach code to show how my entities, pom.xml, and persistence.xml file is setup. My main class that would start the transaction is empty and I want to know how I can make this work or what additional information I need to make it work. Any help would be much appreciated.\n<a href=\"https://i.stack.imgur.com/jDIsE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jDIsE.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/9Iikg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9Iikg.png\" alt=\"enter image description here\" /></a></p>\n<p>The code below is from my pom.xml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;HibernateJPA&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;HibernateJPA&lt;/name&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n        &lt;junit.version&gt;5.9.1&lt;/junit.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;5.0.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;6.0.2.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\n            &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;version&gt;8.0.32&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.2&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>The code below is from my persistence.xml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\n&lt;persistence xmlns=&quot;https://jakarta.ee/xml/ns/persistence&quot;\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n             xsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/persistence https://jakarta.ee/xml/ns/persistence/persistence_3_0.xsd&quot;\n             version=&quot;3.0&quot;&gt;\n    &lt;persistence-unit name=&quot;default&quot;&gt;\n\n        &lt;class&gt;entity.EmployeeEntity&lt;/class&gt;\n        &lt;properties&gt;\n            &lt;property name=&quot;hibernate.connection.url&quot; value=&quot;jdbc:mysql://localhost:3306/testDB&quot;/&gt;\n            &lt;property name=&quot;hibernate.connection.driver_class&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;\n            &lt;property name=&quot;hibernate.connection.username&quot; value=&quot;root&quot;/&gt;\n            &lt;property name=&quot;hibernate.connection.password&quot; value=&quot;&quot;/&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<p>The code below is from my Entity Employee class:</p>\n<pre><code>package entity;\n\nimport jakarta.persistence.*;\n\nimport java.util.Objects;\n\n@Entity\n@Table(name = &quot;employee&quot;, schema = &quot;testdb&quot;, catalog = &quot;&quot;)\npublic class EmployeeEntity {\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Id\n    @Column(name = &quot;id&quot;)\n    private int id;\n    @Basic\n    @Column(name = &quot;first_name&quot;)\n    private String firstName;\n    @Basic\n    @Column(name = &quot;last_name&quot;)\n    private String lastName;\n    @Basic\n    @Column(name = &quot;salary&quot;)\n    private Integer salary;\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public Integer getSalary() {\n        return salary;\n    }\n\n    public void setSalary(Integer salary) {\n        this.salary = salary;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        EmployeeEntity that = (EmployeeEntity) o;\n        return id == that.id &amp;&amp; Objects.equals(firstName, that.firstName) &amp;&amp; Objects.equals(lastName, that.lastName) &amp;&amp; Objects.equals(salary, that.salary);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(id, firstName, lastName, salary);\n    }\n}\n</code></pre>\n"},{"tags":["java","google-app-engine","google-cloud-datastore"],"answers":[{"comments":[{"owner":{"account_id":2678394,"reputation":1625,"user_id":2314229,"accept_rate":50,"display_name":"Pouton Gerald"},"score":0,"creation_date":1369951764,"post_id":16846485,"comment_id":24294063,"body_markdown":"Thanks for the thought on sharded counters. +1. But the problem is if I use sharding, I won&#39;t be able to call `ORDER BY` votes on my candidates.","body":"Thanks for the thought on sharded counters. +1. But the problem is if I use sharding, I won&#39;t be able to call <code>ORDER BY</code> votes on my candidates."},{"owner":{"account_id":1014752,"reputation":15023,"user_id":1026572,"accept_rate":72,"display_name":"dragonx"},"score":0,"creation_date":1370013494,"post_id":16846485,"comment_id":24318344,"body_markdown":"If you aren&#39;t worried about performance, you can keep the vote count in the actual Candidate entity, and then you can do ORDER_BY.  Otherwise, you can&#39;t.  But it&#39;s trivial to sort yourself after you&#39;ve pullled the counts.","body":"If you aren&#39;t worried about performance, you can keep the vote count in the actual Candidate entity, and then you can do ORDER_BY.  Otherwise, you can&#39;t.  But it&#39;s trivial to sort yourself after you&#39;ve pullled the counts."}],"tags":[],"owner":{"account_id":1014752,"reputation":15023,"user_id":1026572,"accept_rate":72,"display_name":"dragonx"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1369950825,"creation_date":1369950825,"answer_id":16846485,"question_id":16846243,"body_markdown":"If by aggregating you mean having the datastore compute the total # of votes for you, then no, the datastore won&#39;t do that.\r\n\r\nThe best way to do what you&#39;re describing is:\r\n\r\n- Create a set of sharded counters per candidate (google search for app engine sharded counters).\r\n- When someone votes, update the sharded counter for the given delegate.\r\n- When you want to read the votes, query for your delegates, then for each delegate, query for the sharded counters and sum them up.\r\n- Memcache for better performance, the GAE sharding counters example available in the docs shows this pretty well.","title":"google datastore aggregate query","body":"<p>If by aggregating you mean having the datastore compute the total # of votes for you, then no, the datastore won't do that.</p>\n\n<p>The best way to do what you're describing is:</p>\n\n<ul>\n<li>Create a set of sharded counters per candidate (google search for app engine sharded counters).</li>\n<li>When someone votes, update the sharded counter for the given delegate.</li>\n<li>When you want to read the votes, query for your delegates, then for each delegate, query for the sharded counters and sum them up.</li>\n<li>Memcache for better performance, the GAE sharding counters example available in the docs shows this pretty well.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4960320,"reputation":1031,"user_id":3991696,"display_name":"vishwarajanand"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675456834,"creation_date":1675456834,"answer_id":75340847,"question_id":16846243,"body_markdown":"Its recently launched and available for use now: https://cloud.google.com/datastore/docs/aggregation-queries.\r\n\r\nThere are various client libraries also which support this particular feature.","title":"google datastore aggregate query","body":"<p>Its recently launched and available for use now: <a href=\"https://cloud.google.com/datastore/docs/aggregation-queries\" rel=\"nofollow noreferrer\">https://cloud.google.com/datastore/docs/aggregation-queries</a>.</p>\n<p>There are various client libraries also which support this particular feature.</p>\n"}],"owner":{"account_id":2678394,"reputation":1625,"user_id":2314229,"accept_rate":50,"display_name":"Pouton Gerald"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1049,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":16846485,"answer_count":2,"score":0,"last_activity_date":1675456834,"creation_date":1369949702,"question_id":16846243,"body_markdown":"I have been reading a lot on ways to do aggregate queries on the datastore (thru stackoverflow and elsewhere). The preponderance of answers is that it cannot be done in a pleasant way. But then those answers are dated, and the same people tend to also claim that you cannot do things such as `order by` on the datastore.\r\n\r\nAs it exists today, you actually can specify `ORDER BY` on the [datastore][1]. So I am wondering if aggregation is also possible.\r\n\r\nConsider the scenario where I have five candidates Alpha, Brave, Charie, Delta and Echo; and 10,000 voters. I want to retrieve the candidates and the number of votes each received in order. How would I do that on the datastore? I am using java.\r\n\r\nAlso, as an aside, if the answer is still no and fanning-in is my best option: is fan-in thread safe? By fanning-in I mean keeping an explicit counter that counts the vote each candidate receives (in a separate `table`). Could I experience a race condition or some other faults in the data when multiple users are voting concurrently?\r\n\r\n\r\n  [1]: https://developers.google.com/appengine/docs/java/datastore/queries#Sort_Orders","title":"google datastore aggregate query","body":"<p>I have been reading a lot on ways to do aggregate queries on the datastore (thru stackoverflow and elsewhere). The preponderance of answers is that it cannot be done in a pleasant way. But then those answers are dated, and the same people tend to also claim that you cannot do things such as <code>order by</code> on the datastore.</p>\n\n<p>As it exists today, you actually can specify <code>ORDER BY</code> on the <a href=\"https://developers.google.com/appengine/docs/java/datastore/queries#Sort_Orders\" rel=\"nofollow\">datastore</a>. So I am wondering if aggregation is also possible.</p>\n\n<p>Consider the scenario where I have five candidates Alpha, Brave, Charie, Delta and Echo; and 10,000 voters. I want to retrieve the candidates and the number of votes each received in order. How would I do that on the datastore? I am using java.</p>\n\n<p>Also, as an aside, if the answer is still no and fanning-in is my best option: is fan-in thread safe? By fanning-in I mean keeping an explicit counter that counts the vote each candidate receives (in a separate <code>table</code>). Could I experience a race condition or some other faults in the data when multiple users are voting concurrently?</p>\n"},{"tags":["java","spring","annotations","autowired"],"comments":[{"owner":{"account_id":1259089,"reputation":730,"user_id":1217913,"display_name":"Willa"},"score":7,"creation_date":1412254130,"post_id":10604298,"comment_id":41012399,"body_markdown":"Is there anywhere @Bean can be used apart from Configuration class?","body":"Is there anywhere @Bean can be used apart from Configuration class?"},{"owner":{"account_id":435063,"reputation":4304,"user_id":821436,"accept_rate":79,"display_name":"Martin Schr&#246;der"},"score":5,"creation_date":1438087916,"post_id":10604298,"comment_id":51295592,"body_markdown":"See also [What&#39;s the difference between `@Component`, `@Repository` &amp; `@Service` annotations in Spring?](http://stackoverflow.com/q/6827752)","body":"See also <a href=\"http://stackoverflow.com/q/6827752\">What&#39;s the difference between <code>@Component</code>, <code>@Repository</code> &amp; <code>@Service</code> annotations in Spring?</a>"},{"owner":{"account_id":97325,"reputation":62295,"user_id":264052,"accept_rate":66,"display_name":"smwikipedia"},"score":1,"creation_date":1452146020,"post_id":10604298,"comment_id":57041903,"body_markdown":"@Willa Yes, there is. That&#39;s called `Lite mode`. And it is not recommended. See here: http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#beans-java-basic-concepts","body":"@Willa Yes, there is. That&#39;s called <code>Lite mode</code>. And it is not recommended. See here: <a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#beans-java-basic-concepts\" rel=\"nofollow noreferrer\">docs.spring.io/spring/docs/current/spring-framework-referenc&zwnj;&#8203;e/&hellip;</a>"},{"owner":{"account_id":1352092,"reputation":21242,"user_id":1291428,"accept_rate":82,"display_name":"Sebas"},"score":13,"creation_date":1488646485,"post_id":10604298,"comment_id":72328269,"body_markdown":"I&#39;d summarize it saying a method with `@bean` returns a customizable instance of spring bean, while `@component` defines a class that may be later instanciated by spring IoC engine when needed.","body":"I&#39;d summarize it saying a method with <code>@bean</code> returns a customizable instance of spring bean, while <code>@component</code> defines a class that may be later instanciated by spring IoC engine when needed."},{"owner":{"account_id":15249757,"reputation":141,"user_id":11003540,"display_name":"treedust"},"score":0,"creation_date":1645597608,"post_id":10604298,"comment_id":125910896,"body_markdown":"Configuration vs [IoC Spring container](https://docs.spring.io/spring-framework/docs/3.2.x/spring-framework-reference/html/beans.html#beans-dependency-resolution), is \n[Type Component](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/stereotype/Component.html), vs [Type Bean](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Bean.html)","body":"Configuration vs <a href=\"https://docs.spring.io/spring-framework/docs/3.2.x/spring-framework-reference/html/beans.html#beans-dependency-resolution\" rel=\"nofollow noreferrer\">IoC Spring container</a>, is  <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/stereotype/Component.html\" rel=\"nofollow noreferrer\">Type Component</a>, vs <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Bean.html\" rel=\"nofollow noreferrer\">Type Bean</a>"},{"owner":{"account_id":16287950,"reputation":1194,"user_id":11762199,"display_name":"mhrsalehi"},"score":1,"creation_date":1652101149,"post_id":10604298,"comment_id":127517085,"body_markdown":"@Willa yes, `@Bean` can be used in inside a class annotiated with `@Component`. &quot;You can use the @Bean annotation in a @Configuration-annotated or in a @Component-annotated class.&quot;  https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-java-bean-annotation","body":"@Willa yes, <code>@Bean</code> can be used in inside a class annotiated with <code>@Component</code>. &quot;You can use the @Bean annotation in a @Configuration-annotated or in a @Component-annotated class.&quot;  <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-java-bean-annotation\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/docs/current/reference/html/&zwnj;&#8203;&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":2386817,"reputation":15505,"user_id":2087628,"accept_rate":42,"display_name":"JaskeyLam"},"score":3,"creation_date":1447848046,"post_id":10604537,"comment_id":55325392,"body_markdown":"So I can only use `@Component` when autowired is needed?  It seems `@Bean` can not affect `@Autowired`","body":"So I can only use <code>@Component</code> when autowired is needed?  It seems <code>@Bean</code> can not affect <code>@Autowired</code>"},{"owner":{"account_id":371004,"reputation":5445,"user_id":719278,"accept_rate":75,"display_name":"Junchen Liu"},"score":5,"creation_date":1452188135,"post_id":10604537,"comment_id":57068570,"body_markdown":"use &#39;@component&#39; for service based classes, &#39;@Bean&#39; as factory more tailor made objects, e.g jdbc datasource","body":"use &#39;@component&#39; for service based classes, &#39;@Bean&#39; as factory more tailor made objects, e.g jdbc datasource"},{"owner":{"account_id":199983,"reputation":8331,"user_id":445600,"accept_rate":73,"display_name":"starcorn"},"score":5,"creation_date":1457085230,"post_id":10604537,"comment_id":59255614,"body_markdown":"@Jaskey you can use `@Autowired` with `@Bean` if you have annotated your bean class with `@Configuration`","body":"@Jaskey you can use <code>@Autowired</code> with <code>@Bean</code> if you have annotated your bean class with <code>@Configuration</code>"},{"owner":{"account_id":6373600,"reputation":1609,"user_id":4945303,"accept_rate":75,"display_name":"PowerFlower"},"score":0,"creation_date":1493651822,"post_id":10604537,"comment_id":74486490,"body_markdown":"@madhairsilence i agree","body":"@madhairsilence i agree"},{"owner":{"account_id":60816,"reputation":3394,"user_id":181551,"accept_rate":41,"display_name":"Alex Worden"},"score":21,"creation_date":1507394399,"post_id":10604537,"comment_id":80195808,"body_markdown":"Sorry but I can&#39;t understand a word of your explanation. You clearly understand this so please would you write a clear explanation or point to the appropriate documentation?","body":"Sorry but I can&#39;t understand a word of your explanation. You clearly understand this so please would you write a clear explanation or point to the appropriate documentation?"},{"owner":{"account_id":60816,"reputation":3394,"user_id":181551,"accept_rate":41,"display_name":"Alex Worden"},"score":31,"creation_date":1507394686,"post_id":10604537,"comment_id":80195912,"body_markdown":"Now that I understand the concept (from reading other people&#39;s answers), your explanation makes sense. Which tells me all the more that your explanation is no good to anyone who doesn&#39;t already understand the concepts.","body":"Now that I understand the concept (from reading other people&#39;s answers), your explanation makes sense. Which tells me all the more that your explanation is no good to anyone who doesn&#39;t already understand the concepts."},{"owner":{"account_id":7768559,"reputation":236,"user_id":5878974,"accept_rate":0,"display_name":"Jon Betts"},"score":2,"creation_date":1532082623,"post_id":10604537,"comment_id":89851068,"body_markdown":"Looks like &quot;Dan Vega&quot; liked your answer as he&#39;s copied the exact wording on his website! https://therealdanvega.com/blog/2017/05/17/spring-component-vs-bean","body":"Looks like &quot;Dan Vega&quot; liked your answer as he&#39;s copied the exact wording on his website! <a href=\"https://therealdanvega.com/blog/2017/05/17/spring-component-vs-bean\" rel=\"nofollow noreferrer\">therealdanvega.com/blog/2017/05/17/spring-component-vs-bean</a>"},{"owner":{"account_id":108205,"reputation":27809,"user_id":287316,"accept_rate":87,"display_name":"The Student"},"score":0,"creation_date":1592699250,"post_id":10604537,"comment_id":110518829,"body_markdown":"&quot;one bean per class&quot;, in other words, Singleton, if used correctly (you could break it by instantiating a class instead of injecting)","body":"&quot;one bean per class&quot;, in other words, Singleton, if used correctly (you could break it by instantiating a class instead of injecting)"}],"tags":[],"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"comment_count":8,"down_vote_count":1,"up_vote_count":570,"is_accepted":false,"score":569,"last_activity_date":1337097549,"creation_date":1337097549,"answer_id":10604537,"question_id":10604298,"body_markdown":"`@Component` and `@Bean` do two quite different things, and shouldn&#39;t be confused.\r\n\r\n`@Component` (and `@Service` and `@Repository`) are used to auto-detect and auto-configure beans using classpath scanning. There&#39;s an implicit one-to-one mapping between the annotated class and the bean (i.e. one bean per class). Control of wiring is quite limited with this approach, since it&#39;s purely declarative.\r\n\r\n`@Bean` is used to *explicitly* declare a single bean, rather than letting Spring do it automatically as above.  It decouples the declaration of the bean from the class definition, and lets you create and configure beans exactly how you choose.\r\n\r\nTo answer your question...\r\n\r\n&gt;would it have been possible to re-use the `@Component` annotation instead of introducing `@Bean` annotation? \r\n\r\nSure, probably; but they chose not to, since the two are quite different. Spring&#39;s already confusing enough without muddying the waters further.","title":"Spring: @Component versus @Bean","body":"<p><code>@Component</code> and <code>@Bean</code> do two quite different things, and shouldn't be confused.</p>\n\n<p><code>@Component</code> (and <code>@Service</code> and <code>@Repository</code>) are used to auto-detect and auto-configure beans using classpath scanning. There's an implicit one-to-one mapping between the annotated class and the bean (i.e. one bean per class). Control of wiring is quite limited with this approach, since it's purely declarative.</p>\n\n<p><code>@Bean</code> is used to <em>explicitly</em> declare a single bean, rather than letting Spring do it automatically as above.  It decouples the declaration of the bean from the class definition, and lets you create and configure beans exactly how you choose.</p>\n\n<p>To answer your question...</p>\n\n<blockquote>\n  <p>would it have been possible to re-use the <code>@Component</code> annotation instead of introducing <code>@Bean</code> annotation? </p>\n</blockquote>\n\n<p>Sure, probably; but they chose not to, since the two are quite different. Spring's already confusing enough without muddying the waters further.</p>\n"},{"comments":[{"owner":{"account_id":6373600,"reputation":1609,"user_id":4945303,"accept_rate":75,"display_name":"PowerFlower"},"score":6,"creation_date":1493655068,"post_id":32307013,"comment_id":74488175,"body_markdown":"How you you call that example class?","body":"How you you call that example class?"},{"owner":{"account_id":1245419,"reputation":14808,"user_id":1206998,"accept_rate":80,"display_name":"Juh_"},"score":11,"creation_date":1568368798,"post_id":32307013,"comment_id":102260534,"body_markdown":"@PowerFlower This method should be in a configuration class, annotated with `@Configuration`","body":"@PowerFlower This method should be in a configuration class, annotated with <code>@Configuration</code>"},{"owner":{"account_id":3958707,"reputation":105,"user_id":3266417,"display_name":"Yusufu"},"score":0,"creation_date":1645932423,"post_id":32307013,"comment_id":125998359,"body_markdown":"@Lookup\n  public SomeService getSomeService(){\n    return null; \n  }\nCuz it is prototype scoped","body":"@Lookup   public SomeService getSomeService(){     return null;    } Cuz it is prototype scoped"}],"tags":[],"owner":{"account_id":5387395,"reputation":5281,"user_id":4290860,"accept_rate":60,"display_name":"outdev"},"comment_count":3,"down_vote_count":0,"up_vote_count":235,"is_accepted":false,"score":235,"last_activity_date":1545137627,"creation_date":1441010031,"answer_id":32307013,"question_id":10604298,"body_markdown":"Let&#39;s consider I want specific implementation depending on some dynamic state.\r\n`@Bean` is perfect for that case.\r\n\r\n    @Bean\r\n    @Scope(&quot;prototype&quot;)\r\n    public SomeService someService() {\r\n        switch (state) {\r\n        case 1:\r\n            return new Impl1();\r\n        case 2:\r\n            return new Impl2();\r\n        case 3:\r\n            return new Impl3();\r\n        default:\r\n            return new Impl();\r\n        }\r\n    }\r\n\r\nHowever there is no way to do that with `@Component`.","title":"Spring: @Component versus @Bean","body":"<p>Let's consider I want specific implementation depending on some dynamic state.\n<code>@Bean</code> is perfect for that case.</p>\n\n<pre><code>@Bean\n@Scope(\"prototype\")\npublic SomeService someService() {\n    switch (state) {\n    case 1:\n        return new Impl1();\n    case 2:\n        return new Impl2();\n    case 3:\n        return new Impl3();\n    default:\n        return new Impl();\n    }\n}\n</code></pre>\n\n<p>However there is no way to do that with <code>@Component</code>.</p>\n"},{"comments":[{"owner":{"account_id":34640,"reputation":20249,"user_id":97964,"accept_rate":88,"display_name":"jocull"},"score":31,"creation_date":1532350780,"post_id":40861225,"comment_id":89927217,"body_markdown":"I think this makes the most sense. If I understand correctly `@Component` goes on classes themselves while `@Bean` goes on class methods (which yield instances of class objects).","body":"I think this makes the most sense. If I understand correctly <code>@Component</code> goes on classes themselves while <code>@Bean</code> goes on class methods (which yield instances of class objects)."},{"owner":{"account_id":3404868,"reputation":3924,"user_id":2856202,"accept_rate":50,"display_name":"daparic"},"score":21,"creation_date":1605005254,"post_id":40861225,"comment_id":114514503,"body_markdown":"I was in a limbo, until I read `what if you don&#39;t have the source codes` ? And then, kablaam! Of course, `@Component` if you own the source code, but if ever you want to componentize other classes of which you don&#39;t have the source code, then `@Bean`. I&#39;m sure there are other differences, but this, ladies and gentlemen, nails it.","body":"I was in a limbo, until I read <code>what if you don&#39;t have the source codes</code> ? And then, kablaam! Of course, <code>@Component</code> if you own the source code, but if ever you want to componentize other classes of which you don&#39;t have the source code, then <code>@Bean</code>. I&#39;m sure there are other differences, but this, ladies and gentlemen, nails it."},{"owner":{"account_id":10224670,"reputation":2468,"user_id":7547722,"accept_rate":75,"display_name":"asn"},"score":0,"creation_date":1646160610,"post_id":40861225,"comment_id":126053450,"body_markdown":"I still didn&#39;t get this - if you don&#39;t have the source code, how does spring knows the about the class that we have `@Bean`ed?","body":"I still didn&#39;t get this - if you don&#39;t have the source code, how does spring knows the about the class that we have <code>@Bean</code>ed?"},{"owner":{"account_id":947871,"reputation":64287,"user_id":974731,"display_name":"cybersam"},"score":0,"creation_date":1648229844,"post_id":40861225,"comment_id":126580089,"body_markdown":"@ajaysinghnegi: You don&#39;t own the code in the libraries that your app depends on, and yet you (and Spring) know about the classes in those libraries.","body":"@ajaysinghnegi: You don&#39;t own the code in the libraries that your app depends on, and yet you (and Spring) know about the classes in those libraries."},{"owner":{"account_id":285328,"reputation":1549,"user_id":583925,"accept_rate":75,"display_name":"Haitham Gad"},"score":0,"creation_date":1658716643,"post_id":40861225,"comment_id":129112078,"body_markdown":"So kinda like the @Inject/@Provides annotations in the Guice/Dagger world I guess.","body":"So kinda like the @Inject/@Provides annotations in the Guice/Dagger world I guess."},{"owner":{"account_id":6335097,"reputation":367,"user_id":4918747,"display_name":"Pubudu Mahesh Meththananda"},"score":2,"creation_date":1659783751,"post_id":40861225,"comment_id":129380024,"body_markdown":"@ajaysinghnegi, Here &quot;source code is not available&quot; means, you don&#39;t have editable source code but you can use it as a external library or dependency.","body":"@ajaysinghnegi, Here &quot;source code is not available&quot; means, you don&#39;t have editable source code but you can use it as a external library or dependency."},{"owner":{"account_id":7536911,"reputation":101,"user_id":5722876,"display_name":"Ikemefuna Nwodo"},"score":0,"creation_date":1660049899,"post_id":40861225,"comment_id":129436773,"body_markdown":"@HaithamGad I guess so, too. You come from the Android world?","body":"@HaithamGad I guess so, too. You come from the Android world?"},{"owner":{"account_id":285328,"reputation":1549,"user_id":583925,"accept_rate":75,"display_name":"Haitham Gad"},"score":0,"creation_date":1660275850,"post_id":40861225,"comment_id":129499250,"body_markdown":"@IkemefunaNwodo Nope.","body":"@IkemefunaNwodo Nope."}],"tags":[],"owner":{"account_id":1913170,"reputation":19646,"user_id":1726413,"accept_rate":50,"display_name":"MagGGG"},"comment_count":8,"down_vote_count":0,"up_vote_count":678,"is_accepted":false,"score":678,"last_activity_date":1488646278,"creation_date":1480408827,"answer_id":40861225,"question_id":10604298,"body_markdown":"**@Component**\r\nPreferable for component scanning and automatic wiring. \r\n\r\n*When should you use **@Bean**?* \r\n\r\nSometimes automatic configuration is not an option. **When?** Let&#39;s imagine that you want to wire components from 3rd-party libraries (you don&#39;t have the source code so you can&#39;t annotate its classes with @Component), so automatic configuration is not possible. \r\n\r\nThe **@Bean** annotation **returns an object** that spring should register as bean in application context. The **body of the method** bears the logic responsible for creating the instance.","title":"Spring: @Component versus @Bean","body":"<p><strong>@Component</strong>\nPreferable for component scanning and automatic wiring. </p>\n\n<p><em>When should you use <strong>@Bean</strong>?</em> </p>\n\n<p>Sometimes automatic configuration is not an option. <strong>When?</strong> Let's imagine that you want to wire components from 3rd-party libraries (you don't have the source code so you can't annotate its classes with @Component), so automatic configuration is not possible. </p>\n\n<p>The <strong>@Bean</strong> annotation <strong>returns an object</strong> that spring should register as bean in application context. The <strong>body of the method</strong> bears the logic responsible for creating the instance.</p>\n"},{"comments":[{"owner":{"account_id":10674784,"reputation":403,"user_id":7858692,"display_name":"Jac Frall"},"score":0,"creation_date":1590701238,"post_id":43825317,"comment_id":109788559,"body_markdown":"What is a type?","body":"What is a type?"},{"owner":{"account_id":5454790,"reputation":447,"user_id":4338565,"display_name":"m4110c"},"score":1,"creation_date":1604864203,"post_id":43825317,"comment_id":114470545,"body_markdown":"@JacFrall: Simply put, a type is a class. Any instance of that class is of that class&#39; type. So if you have a class &quot;Dog&quot; and create a `Dog rex = new Dog()`, then the object named &quot;rex&quot; is of type &quot;Dog&quot;, because it&#39;s an instance of the &quot;Dog&quot; class.","body":"@JacFrall: Simply put, a type is a class. Any instance of that class is of that class&#39; type. So if you have a class &quot;Dog&quot; and create a <code>Dog rex = new Dog()</code>, then the object named &quot;rex&quot; is of type &quot;Dog&quot;, because it&#39;s an instance of the &quot;Dog&quot; class."},{"owner":{"account_id":555095,"reputation":1782,"user_id":1262187,"accept_rate":18,"display_name":"simar"},"score":1,"creation_date":1621173744,"post_id":43825317,"comment_id":119409787,"body_markdown":"Not just that. Those beans handled by spring differently. Just got into trouble. `@ConditionalOnBean(SomeBean)` doesn&#39;t work, if SomeBean is made of @Bean annotation. But it works if SomeBean is `@Component`. \nThis even doesn&#39;t work despite `@Bean=&gt; SomeBean`  method is called and bean is created and added to the context.  Still, `@ConditionaOnBean` unable to see this bean (or may be order of beans created using `@Bean vs (@Component @Service @Respository @Service @Configuration)` differs and @Bean annotated methods are called at the end of application context after scanning is done).","body":"Not just that. Those beans handled by spring differently. Just got into trouble. <code>@ConditionalOnBean(SomeBean)</code> doesn&#39;t work, if SomeBean is made of @Bean annotation. But it works if SomeBean is <code>@Component</code>.  This even doesn&#39;t work despite <code>@Bean=&gt; SomeBean</code>  method is called and bean is created and added to the context.  Still, <code>@ConditionaOnBean</code> unable to see this bean (or may be order of beans created using <code>@Bean vs (@Component @Service @Respository @Service @Configuration)</code> differs and @Bean annotated methods are called at the end of application context after scanning is done)."}],"tags":[],"owner":{"account_id":1161452,"reputation":1509,"user_id":1147388,"accept_rate":29,"display_name":"Oiew"},"comment_count":3,"down_vote_count":0,"up_vote_count":119,"is_accepted":false,"score":119,"last_activity_date":1494105065,"creation_date":1494104222,"answer_id":43825317,"question_id":10604298,"body_markdown":"Both approaches aim to register target type in Spring container.\r\n\r\nThe difference is that `@Bean` is applicable to **methods**, whereas `@Component` is applicable to **types**.\r\n\r\nTherefore when you use `@Bean` annotation you control instance creation logic in method&#39;s body (see [example above][1]). With `@Component` annotation you cannot.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/32307013/1147388","title":"Spring: @Component versus @Bean","body":"<p>Both approaches aim to register target type in Spring container.</p>\n\n<p>The difference is that <code>@Bean</code> is applicable to <strong>methods</strong>, whereas <code>@Component</code> is applicable to <strong>types</strong>.</p>\n\n<p>Therefore when you use <code>@Bean</code> annotation you control instance creation logic in method's body (see <a href=\"https://stackoverflow.com/a/32307013/1147388\">example above</a>). With <code>@Component</code> annotation you cannot.</p>\n"},{"tags":[],"owner":{"account_id":1955813,"reputation":478,"user_id":1758839,"display_name":"SomeGuy"},"comment_count":0,"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1516386559,"creation_date":1516386209,"answer_id":48347345,"question_id":10604298,"body_markdown":"When you use the `@Component` tag, it&#39;s the same as having a POJO (Plain Old Java Object) with a vanilla bean declaration method (annotated with `@Bean`). For example, the following method 1 and 2 will give the same result.\r\n\r\n**Method 1**\r\n\r\n    @Component\r\n    public class SomeClass {\r\n        \r\n        private int number;\r\n        \r\n        public SomeClass(Integer theNumber){\r\n            this.number = theNumber.intValue();\r\n        }\r\n\r\n        public int getNumber(){\r\n            return this.number;\r\n        }\r\n    }\r\nwith a bean for &#39;theNumber&#39;:\r\n\r\n    @Bean\r\n    Integer theNumber(){\r\n        return new Integer(3456);\r\n    }\r\n\r\n\r\n**Method 2**\r\n\r\n    //Note: no @Component tag\r\n    public class SomeClass {\r\n        \r\n        private int number;\r\n        \r\n        public SomeClass(Integer theNumber){\r\n            this.number = theNumber.intValue();\r\n        }\r\n\r\n        public int getNumber(){\r\n            return this.number;\r\n        }\r\n    }\r\nwith the beans for both:\r\n\r\n    @Bean\r\n    Integer theNumber(){\r\n        return new Integer(3456);\r\n    }\r\n\r\n    @Bean\r\n    SomeClass someClass(Integer theNumber){\r\n        return new SomeClass(theNumber);\r\n    }\r\n\r\nMethod 2 allows you to keep bean declarations together, it&#39;s a bit more flexible etc. You may even want to add another non-vanilla SomeClass bean like the following:\r\n\r\n    @Bean\r\n    SomeClass strawberryClass(){\r\n        return new SomeClass(new Integer(1));\r\n    }","title":"Spring: @Component versus @Bean","body":"<p>When you use the <code>@Component</code> tag, it's the same as having a POJO (Plain Old Java Object) with a vanilla bean declaration method (annotated with <code>@Bean</code>). For example, the following method 1 and 2 will give the same result.</p>\n\n<p><strong>Method 1</strong></p>\n\n<pre><code>@Component\npublic class SomeClass {\n\n    private int number;\n\n    public SomeClass(Integer theNumber){\n        this.number = theNumber.intValue();\n    }\n\n    public int getNumber(){\n        return this.number;\n    }\n}\n</code></pre>\n\n<p>with a bean for 'theNumber':</p>\n\n<pre><code>@Bean\nInteger theNumber(){\n    return new Integer(3456);\n}\n</code></pre>\n\n<p><strong>Method 2</strong></p>\n\n<pre><code>//Note: no @Component tag\npublic class SomeClass {\n\n    private int number;\n\n    public SomeClass(Integer theNumber){\n        this.number = theNumber.intValue();\n    }\n\n    public int getNumber(){\n        return this.number;\n    }\n}\n</code></pre>\n\n<p>with the beans for both:</p>\n\n<pre><code>@Bean\nInteger theNumber(){\n    return new Integer(3456);\n}\n\n@Bean\nSomeClass someClass(Integer theNumber){\n    return new SomeClass(theNumber);\n}\n</code></pre>\n\n<p>Method 2 allows you to keep bean declarations together, it's a bit more flexible etc. You may even want to add another non-vanilla SomeClass bean like the following:</p>\n\n<pre><code>@Bean\nSomeClass strawberryClass(){\n    return new SomeClass(new Integer(1));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5145207,"reputation":2728,"user_id":4121405,"accept_rate":0,"display_name":"alok"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1520881339,"creation_date":1520880686,"answer_id":49242515,"question_id":10604298,"body_markdown":"- @component and its specializations(@Controller, @service, @repository) allow for auto-detection\r\nusing classpath scanning. If we see component class like @Controller, @service, @repository will be scan automatically by the spring framework using the component scan.\r\n- @Bean on the other hand can only be used to explicitly declare a single bean in a configuration class. \r\n- @Bean used to explicitly declare a single bean, rather than letting spring do it automatically. Its make septate declaration of bean from the class definition.\r\n- In short @Controller, @service, @repository are for auto-detection and @Bean to create seprate bean from class\r\n&lt;pre&gt;\r\n    - @Controller\r\n    public class LoginController \r\n    { --code-- }\r\n    \r\n    - @Configuration\r\n    public class AppConfig {\r\n    @Bean\r\n    public SessionFactory sessionFactory() \r\n    {--code-- }\r\n&lt;/pre&gt;\r\n","title":"Spring: @Component versus @Bean","body":"<ul>\n<li>@component and its specializations(@Controller, @service, @repository) allow for auto-detection\nusing classpath scanning. If we see component class like @Controller, @service, @repository will be scan automatically by the spring framework using the component scan.</li>\n<li>@Bean on the other hand can only be used to explicitly declare a single bean in a configuration class. </li>\n<li>@Bean used to explicitly declare a single bean, rather than letting spring do it automatically. Its make septate declaration of bean from the class definition.</li>\n<li>In short @Controller, @service, @repository are for auto-detection and @Bean to create seprate bean from class</li>\n</ul>\n\n<pre>\n    - @Controller\n    public class LoginController \n    { --code-- }\n\n    - @Configuration\n    public class AppConfig {\n    @Bean\n    public SessionFactory sessionFactory() \n    {--code-- }\n</pre>\n"},{"comments":[{"owner":{"account_id":2602712,"reputation":1273,"user_id":4776486,"accept_rate":40,"display_name":"voipp"},"score":9,"creation_date":1548756542,"post_id":51238724,"comment_id":95646696,"body_markdown":"4. Actually @Bean could be declared in non-configuration class. It&#39;s known as lite mode","body":"4. Actually @Bean could be declared in non-configuration class. It&#39;s known as lite mode"},{"owner":{"account_id":13624644,"reputation":1269,"user_id":9828197,"display_name":"eugen"},"score":1,"creation_date":1584503028,"post_id":51238724,"comment_id":107453604,"body_markdown":"Regarding point 5. I think we put a bean inside the spring container. So, every class is outside the spring container. I guess, point 5 should be rewarded","body":"Regarding point 5. I think we put a bean inside the spring container. So, every class is outside the spring container. I guess, point 5 should be rewarded"},{"owner":{"account_id":1295263,"reputation":799,"user_id":1534250,"accept_rate":50,"display_name":"egemen"},"score":0,"creation_date":1618480859,"post_id":51238724,"comment_id":118616248,"body_markdown":"It is the one of the most answering question of  spring boot.","body":"It is the one of the most answering question of  spring boot."},{"owner":{"account_id":2016836,"reputation":155,"user_id":3521337,"display_name":"Fuad Efendi"},"score":1,"creation_date":1631189745,"post_id":51238724,"comment_id":122159209,"body_markdown":"Point 5. What is the definition of &quot;outside of Spring container&quot;?","body":"Point 5. What is the definition of &quot;outside of Spring container&quot;?"},{"owner":{"account_id":3316004,"reputation":1326,"user_id":2788374,"accept_rate":25,"display_name":"lcfd"},"score":1,"creation_date":1658298631,"post_id":51238724,"comment_id":129013639,"body_markdown":"@FuadEfendi If the class is in a library, so you cannot annotate the source code. But you can instantiate it and make a Bean out of it.","body":"@FuadEfendi If the class is in a library, so you cannot annotate the source code. But you can instantiate it and make a Bean out of it."},{"owner":{"account_id":11020509,"reputation":354,"user_id":8094926,"display_name":"chocalaca"},"score":1,"creation_date":1671224240,"post_id":51238724,"comment_id":132061196,"body_markdown":"@Saurabh Prakash: very nice!","body":"@Saurabh Prakash: very nice!"}],"tags":[],"owner":{"account_id":9470793,"reputation":2775,"user_id":7041698,"display_name":"Saurabh Prakash"},"comment_count":6,"down_vote_count":0,"up_vote_count":260,"is_accepted":false,"score":260,"last_activity_date":1591492235,"creation_date":1531114241,"answer_id":51238724,"question_id":10604298,"body_markdown":" 1. @Component **auto detects** and configures the beans using classpath scanning whereas @Bean **explicitly declares** a single bean, rather than letting Spring do it automatically.\r\n 2. @Component **does not decouple** the declaration of the bean from the class definition where as @Bean **decouples** the declaration of the bean from the class definition.\r\n 3. @Component is a **class level annotation** whereas @Bean is a **method level annotation** and name of the method serves as the bean name.\r\n 4. @Component **need not to be used with the @Configuration** annotation where as @Bean annotation has to be **used within the class which is annotated with @Configuration**. \r\n 5. We **cannot create a bean** of a class using @Component, if the class is outside spring container whereas we **can create a bean** of a class using @Bean even if the class is present **outside the spring container**.\r\n 6. @Component has **different specializations** like @Controller, @Repository and @Service whereas @Bean has **no specializations**.\r\n\r\n ","title":"Spring: @Component versus @Bean","body":"<ol>\n<li>@Component <strong>auto detects</strong> and configures the beans using classpath scanning whereas @Bean <strong>explicitly declares</strong> a single bean, rather than letting Spring do it automatically.</li>\n<li>@Component <strong>does not decouple</strong> the declaration of the bean from the class definition where as @Bean <strong>decouples</strong> the declaration of the bean from the class definition.</li>\n<li>@Component is a <strong>class level annotation</strong> whereas @Bean is a <strong>method level annotation</strong> and name of the method serves as the bean name.</li>\n<li>@Component <strong>need not to be used with the @Configuration</strong> annotation where as @Bean annotation has to be <strong>used within the class which is annotated with @Configuration</strong>. </li>\n<li>We <strong>cannot create a bean</strong> of a class using @Component, if the class is outside spring container whereas we <strong>can create a bean</strong> of a class using @Bean even if the class is present <strong>outside the spring container</strong>.</li>\n<li>@Component has <strong>different specializations</strong> like @Controller, @Repository and @Service whereas @Bean has <strong>no specializations</strong>.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":14461133,"reputation":489,"user_id":10445920,"display_name":"Dai Niu"},"comment_count":0,"down_vote_count":1,"up_vote_count":24,"is_accepted":false,"score":23,"last_activity_date":1546154704,"creation_date":1546154704,"answer_id":53975920,"question_id":10604298,"body_markdown":"  You have two ways to generate beans. \r\n  One is to create a class with an annotation `@Component`.\r\n  The other is to create a method and annotate it with `@Bean`. For those classes containing method with `@Bean` should be annotated with `@Configuration`\r\n  Once you run your spring project, the class with a `@ComponentScan` annotation would scan every class with `@Component` on it, and restore the instance of this class to the Ioc Container. Another thing the `@ComponentScan` would do is running the methods with `@Bean` on it and restore the return object to the Ioc Container as a bean.\r\n So when you need to decide which kind of beans you want to create depending upon current states, you need to use `@Bean`. You can write the logic and return the object you want.\r\n Another thing worth to mention is the name of the method with `@Bean` is the default name of bean.","title":"Spring: @Component versus @Bean","body":"<p>You have two ways to generate beans. \n  One is to create a class with an annotation <code>@Component</code>.\n  The other is to create a method and annotate it with <code>@Bean</code>. For those classes containing method with <code>@Bean</code> should be annotated with <code>@Configuration</code>\n  Once you run your spring project, the class with a <code>@ComponentScan</code> annotation would scan every class with <code>@Component</code> on it, and restore the instance of this class to the Ioc Container. Another thing the <code>@ComponentScan</code> would do is running the methods with <code>@Bean</code> on it and restore the return object to the Ioc Container as a bean.\n So when you need to decide which kind of beans you want to create depending upon current states, you need to use <code>@Bean</code>. You can write the logic and return the object you want.\n Another thing worth to mention is the name of the method with <code>@Bean</code> is the default name of bean.</p>\n"},{"tags":[],"owner":{"account_id":8497760,"reputation":342,"user_id":6371836,"display_name":"Daniel Andres Pelaez Lopez"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1556394868,"creation_date":1556394868,"answer_id":55884365,"question_id":10604298,"body_markdown":"@Bean was created to avoid coupling Spring and your business rules in compile time. It means you can reuse your business rules in other frameworks like PlayFramework or JEE. \r\n\r\nMoreover, you have total control on how create beans, where it is not enough the default Spring instantation.\r\n\r\nI wrote a post talking about it.\r\n\r\nhttps://coderstower.com/2019/04/23/factory-methods-decoupling-ioc-container-abstraction/\r\n\r\n","title":"Spring: @Component versus @Bean","body":"<p>@Bean was created to avoid coupling Spring and your business rules in compile time. It means you can reuse your business rules in other frameworks like PlayFramework or JEE. </p>\n\n<p>Moreover, you have total control on how create beans, where it is not enough the default Spring instantation.</p>\n\n<p>I wrote a post talking about it.</p>\n\n<p><a href=\"https://coderstower.com/2019/04/23/factory-methods-decoupling-ioc-container-abstraction/\" rel=\"noreferrer\">https://coderstower.com/2019/04/23/factory-methods-decoupling-ioc-container-abstraction/</a></p>\n"},{"comments":[{"owner":{"account_id":2729652,"reputation":5593,"user_id":2353713,"accept_rate":69,"display_name":"Andy"},"score":33,"creation_date":1573751528,"post_id":56185718,"comment_id":103995465,"body_markdown":"I think it is not necessary to get the User object from ApplicationContext when you use `@Bean` approach. You can still use `@Autowire` to get the bean as you would do in case of `@Component`. `@Bean` just adds the Bean to the Spring Container just as would `@Component` does. \nThe difference is as follows.\n1. Using `@Bean`, you can add Third Party Classes to Spring Container.\n2. Using `@Bean`, you can get the desired implementation of an interface at run-time(Using factory design pattern)","body":"I think it is not necessary to get the User object from ApplicationContext when you use <code>@Bean</code> approach. You can still use <code>@Autowire</code> to get the bean as you would do in case of <code>@Component</code>. <code>@Bean</code> just adds the Bean to the Spring Container just as would <code>@Component</code> does.  The difference is as follows. 1. Using <code>@Bean</code>, you can add Third Party Classes to Spring Container. 2. Using <code>@Bean</code>, you can get the desired implementation of an interface at run-time(Using factory design pattern)"},{"owner":{"account_id":14981485,"reputation":338,"user_id":10815363,"display_name":"semicolon"},"score":0,"creation_date":1654753144,"post_id":56185718,"comment_id":128167727,"body_markdown":"@Andy *You can still use @ Autowire to get the bean as you would do in case of @ Component* how ? When you use @ Autowired and User user, it will take the default implementation right. How to code it to take specific implementation.","body":"@Andy <i>You can still use @ Autowire to get the bean as you would do in case of @ Component</i> how ? When you use @ Autowired and User user, it will take the default implementation right. How to code it to take specific implementation."},{"owner":{"account_id":2729652,"reputation":5593,"user_id":2353713,"accept_rate":69,"display_name":"Andy"},"score":1,"creation_date":1654777647,"post_id":56185718,"comment_id":128176067,"body_markdown":"There are a fews ways you can achieve this. Let&#39;s say you hav Employee interface &amp; 2 implementations EmployeeImpla &amp; EmployeeImplb. \n\nLet&#39;s say you have a class called SalaryImpl which is annotated as @Component and you want to use EmployeeImplA implementation in that class.\n\nOPTION 1\nyou can do something like \n`Employee employeeImplA`\n\nOPTION 2\n`@Qulaifier(&quot;employeeImplA&quot;)\nEmployee employee`","body":"There are a fews ways you can achieve this. Let&#39;s say you hav Employee interface &amp; 2 implementations EmployeeImpla &amp; EmployeeImplb.   Let&#39;s say you have a class called SalaryImpl which is annotated as @Component and you want to use EmployeeImplA implementation in that class.  OPTION 1 you can do something like  <code>Employee employeeImplA</code>  OPTION 2 <code>@Qulaifier(&quot;employeeImplA&quot;) Employee employee</code>"}],"tags":[],"owner":{"account_id":4597700,"reputation":3125,"user_id":3729270,"accept_rate":0,"display_name":"xpioneer"},"comment_count":3,"down_vote_count":0,"up_vote_count":65,"is_accepted":false,"score":65,"last_activity_date":1603199248,"creation_date":1558093330,"answer_id":56185718,"question_id":10604298,"body_markdown":"I see a lot of answers and almost everywhere it&#39;s mentioned `@Component` is for autowiring where component is scanned, and `@Bean` is *exactly* declaring that bean to be used differently. Let me show how it&#39;s different. \r\n\r\n - @Bean\r\n\r\nFirst it&#39;s a method level annotation. \r\nSecond you generally use it to configure beans in Java code (if you are not using xml configuration) and then call it from a class using the\r\n `ApplicationContext.getBean` method. Example:\r\n\r\n\r\n    @Configuration\r\n    class MyConfiguration{\r\n    \t@Bean\r\n    \tpublic User getUser() {\r\n    \t\treturn new User();\r\n    \t}\r\n    }\r\n    \r\n    class User{\r\n    }    \r\n    \t\t\r\n    // Getting Bean \r\n    User user = applicationContext.getBean(&quot;getUser&quot;);\r\n\r\n \r\n\r\n- @Component\r\n\r\nIt is the general way to annotate a bean and not a specialized bean. \r\nIt is a class level annotation and is used to avoid all that configuration stuff through java or xml configuration. \r\n\r\nWe get something like this. \r\n\r\n    @Component\r\n    class User {\r\n    }\r\n    \r\n    // to get Bean\r\n    @Autowired\r\n    User user;\r\n\r\nThat&#39;s it. It was just introduced to avoid all the configuration steps to instantiate and use that bean. \r\n\r\n","title":"Spring: @Component versus @Bean","body":"<p>I see a lot of answers and almost everywhere it's mentioned <code>@Component</code> is for autowiring where component is scanned, and <code>@Bean</code> is <em>exactly</em> declaring that bean to be used differently. Let me show how it's different.</p>\n<ul>\n<li>@Bean</li>\n</ul>\n<p>First it's a method level annotation.\nSecond you generally use it to configure beans in Java code (if you are not using xml configuration) and then call it from a class using the\n<code>ApplicationContext.getBean</code> method. Example:</p>\n<pre><code>@Configuration\nclass MyConfiguration{\n    @Bean\n    public User getUser() {\n        return new User();\n    }\n}\n\nclass User{\n}    \n        \n// Getting Bean \nUser user = applicationContext.getBean(&quot;getUser&quot;);\n</code></pre>\n<ul>\n<li>@Component</li>\n</ul>\n<p>It is the general way to annotate a bean and not a specialized bean.\nIt is a class level annotation and is used to avoid all that configuration stuff through java or xml configuration.</p>\n<p>We get something like this.</p>\n<pre><code>@Component\nclass User {\n}\n\n// to get Bean\n@Autowired\nUser user;\n</code></pre>\n<p>That's it. It was just introduced to avoid all the configuration steps to instantiate and use that bean.</p>\n"},{"comments":[{"owner":{"account_id":141717,"reputation":5347,"user_id":348956,"accept_rate":82,"display_name":"softarn"},"score":2,"creation_date":1578912601,"post_id":56898875,"comment_id":105580996,"body_markdown":"Would be nice if this answer was updated with an example of how that bean is used as well","body":"Would be nice if this answer was updated with an example of how that bean is used as well"},{"owner":{"account_id":2508599,"reputation":374,"user_id":2181576,"display_name":"veritas"},"score":0,"creation_date":1580754269,"post_id":56898875,"comment_id":106193480,"body_markdown":"How would you wrap an @Bean over a third party class if the source code does not allow modification?","body":"How would you wrap an @Bean over a third party class if the source code does not allow modification?"},{"owner":{"account_id":1806717,"reputation":1339,"user_id":1643686,"accept_rate":50,"display_name":"Fida"},"score":0,"creation_date":1593104640,"post_id":56898875,"comment_id":110670381,"body_markdown":"usage\n```\n@AutoWired\n\nViewResolver viewResolver\n```","body":"usage ``` @AutoWired  ViewResolver viewResolver ```"}],"tags":[],"owner":{"account_id":2090997,"reputation":844,"user_id":7516740,"display_name":"elvis"},"comment_count":3,"down_vote_count":0,"up_vote_count":41,"is_accepted":false,"score":41,"last_activity_date":1562313386,"creation_date":1562313386,"answer_id":56898875,"question_id":10604298,"body_markdown":"You can use `@Bean` to make an existing third-party class available to your Spring framework application context.\r\n\r\n    @Bean\r\n    public ViewResolver viewResolver() {\r\n    \t\r\n    \tInternalResourceViewResolver viewResolver = new InternalResourceViewResolver();\r\n    \t\r\n    \tviewResolver.setPrefix(&quot;/WEB-INF/view/&quot;);\r\n    \tviewResolver.setSuffix(&quot;.jsp&quot;);\r\n    \t\r\n    \treturn viewResolver;\r\n    }\r\n\r\nBy using the `@Bean` annotation, you can wrap a third-party class (it may not have `@Component` and it may not use Spring), as a Spring bean. And then once it is wrapped using `@Bean`, it is as a singleton object and available in your Spring framework application context. You can now easily share/reuse this bean in your app using dependency injection and `@Autowired`. \r\n\r\nSo think of the `@Bean` annotation is a wrapper/adapter for third-party classes. You want to make the third-party classes available to your Spring framework application context.\r\n\r\nBy using `@Bean` in the code above, I&#39;m explicitly declare a single bean because inside of the method, I&#39;m explicitly creating the object using the `new` keyword. I&#39;m also manually calling setter methods of the given class. So I can change the value of the prefix field. So this manual work is referred to as explicit creation. If I use the `@Component` for the same class, the bean registered in the Spring container will have default value for the prefix field.\r\n\r\nOn the other hand, when we annotate a class with `@Component`, no need for us to manually use the `new` keyword. It is handled automatically by Spring.\r\n\r\n","title":"Spring: @Component versus @Bean","body":"<p>You can use <code>@Bean</code> to make an existing third-party class available to your Spring framework application context.</p>\n\n<pre><code>@Bean\npublic ViewResolver viewResolver() {\n\n    InternalResourceViewResolver viewResolver = new InternalResourceViewResolver();\n\n    viewResolver.setPrefix(\"/WEB-INF/view/\");\n    viewResolver.setSuffix(\".jsp\");\n\n    return viewResolver;\n}\n</code></pre>\n\n<p>By using the <code>@Bean</code> annotation, you can wrap a third-party class (it may not have <code>@Component</code> and it may not use Spring), as a Spring bean. And then once it is wrapped using <code>@Bean</code>, it is as a singleton object and available in your Spring framework application context. You can now easily share/reuse this bean in your app using dependency injection and <code>@Autowired</code>. </p>\n\n<p>So think of the <code>@Bean</code> annotation is a wrapper/adapter for third-party classes. You want to make the third-party classes available to your Spring framework application context.</p>\n\n<p>By using <code>@Bean</code> in the code above, I'm explicitly declare a single bean because inside of the method, I'm explicitly creating the object using the <code>new</code> keyword. I'm also manually calling setter methods of the given class. So I can change the value of the prefix field. So this manual work is referred to as explicit creation. If I use the <code>@Component</code> for the same class, the bean registered in the Spring container will have default value for the prefix field.</p>\n\n<p>On the other hand, when we annotate a class with <code>@Component</code>, no need for us to manually use the <code>new</code> keyword. It is handled automatically by Spring.</p>\n"},{"tags":[],"owner":{"account_id":8241995,"reputation":77,"user_id":6199391,"display_name":"Martin521Wang"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1578127256,"creation_date":1578125498,"answer_id":59589059,"question_id":10604298,"body_markdown":"**1. About @Component**&lt;br&gt;\r\n@Component functs similarily to @Configuration.&lt;br&gt;&lt;br&gt;\r\nThey both indicate that the annotated class has one or more beans need to be registered to `Spring-IOC-Container`.&lt;br&gt;&lt;br&gt;\r\nThe class annotated by @Component, we call it `Component of Spring`. It is a concept that contains several beans.&lt;br&gt;&lt;br&gt;\r\n`Component class` needs to be auto-scanned by Spring for registering those beans of the `component class`.\r\n\r\n**2. About @Bean**&lt;br&gt;\r\n@Bean is used to annotate the method of `component-class`(as mentioned above). It indicate the instance retured by the annotated method needs to be registered to `Spring-IOC-Container`.\r\n\r\n**3. Conclusion**&lt;br&gt;\r\nThe difference between them two is relatively obivious, they are used in `different circumstances`. \r\nThe general usage is:\r\n```\r\n    // @Configuration is implemented by @Component\r\n    @Configuration\r\n    public ComponentClass {\r\n\r\n      @Bean\r\n      public FirstBean FirstBeanMethod() {\r\n        return new FirstBean();\r\n      }\r\n\r\n      @Bean\r\n      public SecondBean SecondBeanMethod() {\r\n        return new SecondBean();\r\n      }\r\n    }\r\n```","title":"Spring: @Component versus @Bean","body":"<p><strong>1. About @Component</strong><br>\n@Component functs similarily to @Configuration.<br><br>\nThey both indicate that the annotated class has one or more beans need to be registered to <code>Spring-IOC-Container</code>.<br><br>\nThe class annotated by @Component, we call it <code>Component of Spring</code>. It is a concept that contains several beans.<br><br>\n<code>Component class</code> needs to be auto-scanned by Spring for registering those beans of the <code>component class</code>.</p>\n\n<p><strong>2. About @Bean</strong><br>\n@Bean is used to annotate the method of <code>component-class</code>(as mentioned above). It indicate the instance retured by the annotated method needs to be registered to <code>Spring-IOC-Container</code>.</p>\n\n<p><strong>3. Conclusion</strong><br>\nThe difference between them two is relatively obivious, they are used in <code>different circumstances</code>. \nThe general usage is:</p>\n\n<pre><code>    // @Configuration is implemented by @Component\n    @Configuration\n    public ComponentClass {\n\n      @Bean\n      public FirstBean FirstBeanMethod() {\n        return new FirstBean();\n      }\n\n      @Bean\n      public SecondBean SecondBeanMethod() {\n        return new SecondBean();\n      }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2370095,"reputation":552,"user_id":2074888,"display_name":"AzarEJ"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1588151834,"creation_date":1588151834,"answer_id":61498279,"question_id":10604298,"body_markdown":"**Additional Points from above answers**\r\n\r\nLet’s say we got a module which is shared in multiple apps and it contains a few services. Not all are needed for each app.\r\n\r\nIf use @Component on those service classes and the component scan in the application, \r\n\r\n&gt; we might end up detecting more beans than necessary\r\n\r\n In this case, you either had to adjust the filtering of the component scan or provide the configuration that even the unused beans can run. Otherwise, the application context won’t start.\r\n\r\nIn this case, it is better to work with @Bean annotation and only instantiate those beans, \r\n\r\n&gt; which are required individually in each app\r\n\r\n\r\nSo, essentially, use @Bean for adding third-party classes to the context. And @Component if it is just inside your single application.","title":"Spring: @Component versus @Bean","body":"<p><strong>Additional Points from above answers</strong></p>\n\n<p>Let’s say we got a module which is shared in multiple apps and it contains a few services. Not all are needed for each app.</p>\n\n<p>If use @Component on those service classes and the component scan in the application, </p>\n\n<blockquote>\n  <p>we might end up detecting more beans than necessary</p>\n</blockquote>\n\n<p>In this case, you either had to adjust the filtering of the component scan or provide the configuration that even the unused beans can run. Otherwise, the application context won’t start.</p>\n\n<p>In this case, it is better to work with @Bean annotation and only instantiate those beans, </p>\n\n<blockquote>\n  <p>which are required individually in each app</p>\n</blockquote>\n\n<p>So, essentially, use @Bean for adding third-party classes to the context. And @Component if it is just inside your single application.</p>\n"},{"comments":[{"owner":{"account_id":2928320,"reputation":1666,"user_id":5946480,"display_name":"Rishi Prakash"},"score":11,"creation_date":1595322396,"post_id":61516730,"comment_id":111427275,"body_markdown":"for 3rd party libs, I think @ Bean is possible as @ Bean does not require class definition to be present inside Spring container, on the contrary @ Component is not possible in this case.","body":"for 3rd party libs, I think @ Bean is possible as @ Bean does not require class definition to be present inside Spring container, on the contrary @ Component is not possible in this case."}],"tags":[],"owner":{"account_id":2370095,"reputation":552,"user_id":2074888,"display_name":"AzarEJ"},"comment_count":1,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1588225950,"creation_date":1588225950,"answer_id":61516730,"question_id":10604298,"body_markdown":"Difference between Bean and Component:\r\n\r\n[![Difference between Bean and Component][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/e8RlG.png","title":"Spring: @Component versus @Bean","body":"<p>Difference between Bean and Component:</p>\n\n<p><a href=\"https://i.stack.imgur.com/e8RlG.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/e8RlG.png\" alt=\"Difference between Bean and Component\"></a></p>\n"},{"tags":[],"owner":{"account_id":9221177,"reputation":2312,"user_id":6850561,"display_name":"Partho"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1636452844,"creation_date":1636270734,"answer_id":69870569,"question_id":10604298,"body_markdown":"Spring supports multiple types annotations such as @Component, @Service, @Repository. All theses can be found under the org.springframework.stereotype package.\r\n\r\n\r\n**@Bean can be found under the org.springframework.context.annotation package.** \r\n\r\nWhen classes in our application are annotated with any of the above mentioned annotation then during project startup spring scan(using @ComponentScan) each class and inject the instance of the classes to the IOC container. Another thing the @ComponentScan would do is running the methods with @Bean on it and restore the return object to the Ioc Container as a bean.\r\n\r\n@Component\r\n----------\r\n\r\nIf we mark a class with @Component or one of the other Stereotype annotations these classes will be auto-detected using classpath scanning. As long as these classes are in under our base package or Spring is aware of another package to scan, a new bean will be created for each of these classes. \r\n\r\n\r\n    package com.beanvscomponent.controller;\r\n\r\n    import org.springframework.stereotype.Controller;\r\n\r\n    @Controller\r\n    public class HomeController {\r\n\r\n        public String home(){\r\n           return &quot;Hello, World!&quot;;\r\n       }\r\n\r\n     }\r\n\r\nThere&#39;s an implicit one-to-one mapping between the annotated class and the bean (i.e. one bean per class). Control of wiring is quite limited with this approach since it&#39;s purely declarative.  It is also important to note that the stereotype annotations are class level annotations. \r\n\r\n@Bean\r\n-----\r\n\r\n@Bean is used to explicitly declare a single bean, rather than letting Spring do it automatically like we did with @Controller. It decouples the declaration of the bean from the class definition and lets you create and configure beans exactly how you choose. With @Bean you aren&#39;t placing this annotation at the class level. If you tried to do that you would get an invalid type error. The @Bean documentation defines it as:\r\n\r\n    Indicates that a method produces a bean to be managed by the Spring container.\r\n\r\nTypically, @Bean methods are declared within @Configuration classes.We have a user class that we needed to instantiate and then create a bean using that instance. This is where I said earlier that we have a little more control over how the bean is defined. \r\n\r\n    package com.beanvscomponent;\r\n\r\n    public class User {\r\n\r\n    private String first;\r\n    private String last;\r\n\r\n    public User(String first, String last) {\r\n        this.first = first;\r\n        this.last = last;\r\n       }\r\n    }\r\n\r\nAs i mentioned earlier @Bean methods should be declared within @Configuration classes.\r\n\r\n    package com.beanvscomponent;\r\n\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n\r\n    @Configuration\r\n    public class ApplicationConfig {\r\n\r\n    @Bean\r\n    public User superUser() {\r\n        return new User(&quot;Partho&quot;,&quot;Bappy&quot;);\r\n       }\r\n\r\n    }\r\n\r\nThe name of the method is actually going to be the name of our bean. If we pull up the /beans endpoint in the actuator we can see the bean defined. \r\n\r\n    {\r\n    &quot;beans&quot;: &quot;superUser&quot;,\r\n    &quot;aliases&quot;: [],\r\n    &quot;scope&quot;: &quot;singleton&quot;,\r\n    &quot;type&quot;: &quot;com.beanvscomponent.User&quot;,\r\n    &quot;resource&quot;: &quot;class path resource \r\n        [com/beanvscomponent/ApplicationConfig.class]&quot;,\r\n    &quot;dependencies&quot;: []\r\n    }\r\n\r\n## @Component vs @Bean ##\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zJpux.png\r\n\r\n\r\nI hope that cleared up some things on when to use @Component and when to use @Bean. It can be a little confusing but as you start to write more applications it will become pretty natural.","title":"Spring: @Component versus @Bean","body":"<p>Spring supports multiple types annotations such as @Component, @Service, @Repository. All theses can be found under the org.springframework.stereotype package.</p>\n<p><strong>@Bean can be found under the org.springframework.context.annotation package.</strong></p>\n<p>When classes in our application are annotated with any of the above mentioned annotation then during project startup spring scan(using @ComponentScan) each class and inject the instance of the classes to the IOC container. Another thing the @ComponentScan would do is running the methods with @Bean on it and restore the return object to the Ioc Container as a bean.</p>\n<h2>@Component</h2>\n<p>If we mark a class with @Component or one of the other Stereotype annotations these classes will be auto-detected using classpath scanning. As long as these classes are in under our base package or Spring is aware of another package to scan, a new bean will be created for each of these classes.</p>\n<pre><code>package com.beanvscomponent.controller;\n\nimport org.springframework.stereotype.Controller;\n\n@Controller\npublic class HomeController {\n\n    public String home(){\n       return &quot;Hello, World!&quot;;\n   }\n\n }\n</code></pre>\n<p>There's an implicit one-to-one mapping between the annotated class and the bean (i.e. one bean per class). Control of wiring is quite limited with this approach since it's purely declarative.  It is also important to note that the stereotype annotations are class level annotations.</p>\n<h2>@Bean</h2>\n<p>@Bean is used to explicitly declare a single bean, rather than letting Spring do it automatically like we did with @Controller. It decouples the declaration of the bean from the class definition and lets you create and configure beans exactly how you choose. With @Bean you aren't placing this annotation at the class level. If you tried to do that you would get an invalid type error. The @Bean documentation defines it as:</p>\n<pre><code>Indicates that a method produces a bean to be managed by the Spring container.\n</code></pre>\n<p>Typically, @Bean methods are declared within @Configuration classes.We have a user class that we needed to instantiate and then create a bean using that instance. This is where I said earlier that we have a little more control over how the bean is defined.</p>\n<pre><code>package com.beanvscomponent;\n\npublic class User {\n\nprivate String first;\nprivate String last;\n\npublic User(String first, String last) {\n    this.first = first;\n    this.last = last;\n   }\n}\n</code></pre>\n<p>As i mentioned earlier @Bean methods should be declared within @Configuration classes.</p>\n<pre><code>package com.beanvscomponent;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class ApplicationConfig {\n\n@Bean\npublic User superUser() {\n    return new User(&quot;Partho&quot;,&quot;Bappy&quot;);\n   }\n\n}\n</code></pre>\n<p>The name of the method is actually going to be the name of our bean. If we pull up the /beans endpoint in the actuator we can see the bean defined.</p>\n<pre><code>{\n&quot;beans&quot;: &quot;superUser&quot;,\n&quot;aliases&quot;: [],\n&quot;scope&quot;: &quot;singleton&quot;,\n&quot;type&quot;: &quot;com.beanvscomponent.User&quot;,\n&quot;resource&quot;: &quot;class path resource \n    [com/beanvscomponent/ApplicationConfig.class]&quot;,\n&quot;dependencies&quot;: []\n}\n</code></pre>\n<h2>@Component vs @Bean</h2>\n<p><a href=\"https://i.stack.imgur.com/zJpux.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/zJpux.png\" alt=\"enter image description here\" /></a></p>\n<p>I hope that cleared up some things on when to use @Component and when to use @Bean. It can be a little confusing but as you start to write more applications it will become pretty natural.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1675714354,"post_id":75340826,"comment_id":132984633,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/75340826/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":27698107,"reputation":11,"user_id":21143320,"display_name":"Lian Yang"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675456731,"creation_date":1675456731,"answer_id":75340826,"question_id":10604298,"body_markdown":"@Bean can be scoped and @component cannot\r\nsuch as \r\n@Scope(value = WebApplicationContext.SCOPE_REQUEST, proxyMode = ScopedProxyMode.TARGET_CLASS)","title":"Spring: @Component versus @Bean","body":"<p>@Bean can be scoped and @component cannot\nsuch as\n@Scope(value = WebApplicationContext.SCOPE_REQUEST, proxyMode = ScopedProxyMode.TARGET_CLASS)</p>\n"}],"owner":{"account_id":1488987,"reputation":7201,"user_id":1396576,"display_name":"user1396576"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":463689,"favorite_count":0,"down_vote_count":0,"up_vote_count":719,"answer_count":16,"score":719,"last_activity_date":1675456731,"creation_date":1337096746,"question_id":10604298,"body_markdown":"I understand that `@Component` annotation was introduced in spring 2.5 in order to get rid of xml bean definition by using classpath scanning.\r\n\r\n`@Bean` was introduced in spring 3.0 and can be used with `@Configuration` in order to fully get rid of xml file and use java config instead.\r\n\r\nWould it have been possible to re-use the `@Component` annotation instead of introducing `@Bean` annotation? My understanding is that the final goal is to create beans in both cases.\r\n","title":"Spring: @Component versus @Bean","body":"<p>I understand that <code>@Component</code> annotation was introduced in spring 2.5 in order to get rid of xml bean definition by using classpath scanning.</p>\n\n<p><code>@Bean</code> was introduced in spring 3.0 and can be used with <code>@Configuration</code> in order to fully get rid of xml file and use java config instead.</p>\n\n<p>Would it have been possible to re-use the <code>@Component</code> annotation instead of introducing <code>@Bean</code> annotation? My understanding is that the final goal is to create beans in both cases.</p>\n"},{"tags":["java","swing","ubuntu","awt"],"owner":{"account_id":27643928,"reputation":1,"user_id":21100271,"display_name":"VIRTUAL_MEMORY"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1675456048,"answer_count":0,"score":0,"last_activity_date":1675455953,"creation_date":1675455953,"question_id":75340713,"body_markdown":"I want to Run Java AWT and Swing (GUI) code Applications on my Ubuntu System , How Can i do so ?\r\n\r\nWhen i tried to run a Java Code that was having Swing Components it is Not working . \r\n\r\nIt is Displaying this \r\n\r\n\r\njava.awt.HeadlessException: \r\nNo X11 DISPLAY variable was set,\r\nor no headful library support was found,\r\n","title":"Is there any way to Run Java GUI (AWT &amp; Swing) Codes in Linux Ubuntu?","body":"<p>I want to Run Java AWT and Swing (GUI) code Applications on my Ubuntu System , How Can i do so ?</p>\n<p>When i tried to run a Java Code that was having Swing Components it is Not working .</p>\n<p>It is Displaying this</p>\n<p>java.awt.HeadlessException:\nNo X11 DISPLAY variable was set,\nor no headful library support was found,</p>\n"},{"tags":["java","hibernate","hibernate-envers"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":1,"creation_date":1675152719,"post_id":75216707,"comment_id":132861696,"body_markdown":"What are your versions of hibernate and envers? What does you `PartyMetaDef` actually look like?","body":"What are your versions of hibernate and envers? What does you <code>PartyMetaDef</code> actually look like?"}],"owner":{"account_id":1701699,"reputation":121,"user_id":1561583,"display_name":"StaMai"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":164,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675455602,"creation_date":1674524312,"question_id":75216707,"body_markdown":"Hibernate Envers appears not to work with org.hibernate.type.AnyType.\r\nWhen [@Any][1] hibernate annotation is used to describe specific polymorphic mapping use case, auditing with Envers does not work out of the box.\r\nWith entity field defined as:\r\n\r\n```lang-java\r\n    @Any(\r\n            metaDef = &quot;PartyMetaDef&quot;,\r\n            metaColumn = @Column( name = &quot;dest_type&quot; )\r\n    )\r\n    @JoinColumn( name = &quot;dest_id&quot; )\r\n    private Party destination;\r\n```\r\n\r\nwhere Party is abstract class and finally comes in one of two flavors. \r\nActual party type is decided via PartyMetaDef, and ends up in dest_type (CHAR) column in database.\r\nActual parent entity id is stored in dest_id (LONG).\r\n\r\nNow, for some reason Envers cannot work with this and gives\r\n\r\n    org.hibernate.MappingException: Type not supported for auditing: org.hibernate.type.AnyType, on entity MyEntity, property &#39;destination&#39;.\r\n    at org.hibernate.envers.configuration.internal.metadata.AuditMetadataGenerator.throwUnsupportedTypeException(AuditMetadataGenerator.java:764) ~[hibernate-envers-5.4.32.Final.jar:5.4.32.Final]\r\n    \tat org.hibernate.envers.configuration.internal.metadata.AuditMetadataGenerator.addValueInFirstPass(AuditMetadataGenerator.java:212) ~[hibernate-envers-5.4.32.Final.jar:5.4.32.Final]\r\n    \tat org.hibernate.envers.configuration.internal.metadata.AuditMetadataGenerator.addValue(AuditMetadataGenerator.java:316) ~[hibernate-envers-5.4.32.Final.jar:5.4.32.Final]\r\n    \tat org.hibernate.envers.configuration.internal.metadata.AuditMetadataGenerator.addProperties(AuditMetadataGenerator.java:350) ~[hibernate-envers-5.4.32.Final.jar:5.4.32.Final]\r\n\r\nHibernate and Envers versions are both 5.4.32.Final\r\n\r\nPartyMetaDef is defined as:\r\n```lang-java\r\n@AnyMetaDefs(\r\n        @AnyMetaDef( name= &quot;PartyMetaDef&quot;, metaType = &quot;string&quot;, idType = &quot;long&quot;,\r\n                metaValues = {\r\n                        @MetaValue(value = &quot;C&quot;, targetEntity = Contact.class),\r\n                        @MetaValue(value = &quot;W&quot;, targetEntity = Warehouse.class)\r\n                }\r\n        )\r\n)\r\n```\r\n\r\nBoth Contact and Warehouse inherit from Party abstract class.\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#associations-any","title":"Hibernate Envers does not recognize Any type","body":"<p>Hibernate Envers appears not to work with org.hibernate.type.AnyType.\nWhen <a href=\"https://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#associations-any\" rel=\"nofollow noreferrer\">@Any</a> hibernate annotation is used to describe specific polymorphic mapping use case, auditing with Envers does not work out of the box.\nWith entity field defined as:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Any(\n            metaDef = &quot;PartyMetaDef&quot;,\n            metaColumn = @Column( name = &quot;dest_type&quot; )\n    )\n    @JoinColumn( name = &quot;dest_id&quot; )\n    private Party destination;\n</code></pre>\n<p>where Party is abstract class and finally comes in one of two flavors.\nActual party type is decided via PartyMetaDef, and ends up in dest_type (CHAR) column in database.\nActual parent entity id is stored in dest_id (LONG).</p>\n<p>Now, for some reason Envers cannot work with this and gives</p>\n<pre><code>org.hibernate.MappingException: Type not supported for auditing: org.hibernate.type.AnyType, on entity MyEntity, property 'destination'.\nat org.hibernate.envers.configuration.internal.metadata.AuditMetadataGenerator.throwUnsupportedTypeException(AuditMetadataGenerator.java:764) ~[hibernate-envers-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.envers.configuration.internal.metadata.AuditMetadataGenerator.addValueInFirstPass(AuditMetadataGenerator.java:212) ~[hibernate-envers-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.envers.configuration.internal.metadata.AuditMetadataGenerator.addValue(AuditMetadataGenerator.java:316) ~[hibernate-envers-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.envers.configuration.internal.metadata.AuditMetadataGenerator.addProperties(AuditMetadataGenerator.java:350) ~[hibernate-envers-5.4.32.Final.jar:5.4.32.Final]\n</code></pre>\n<p>Hibernate and Envers versions are both 5.4.32.Final</p>\n<p>PartyMetaDef is defined as:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@AnyMetaDefs(\n        @AnyMetaDef( name= &quot;PartyMetaDef&quot;, metaType = &quot;string&quot;, idType = &quot;long&quot;,\n                metaValues = {\n                        @MetaValue(value = &quot;C&quot;, targetEntity = Contact.class),\n                        @MetaValue(value = &quot;W&quot;, targetEntity = Warehouse.class)\n                }\n        )\n)\n</code></pre>\n<p>Both Contact and Warehouse inherit from Party abstract class.</p>\n"},{"tags":["java","apache-kafka","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675450704,"creation_date":1675450704,"answer_id":75339957,"question_id":75339878,"body_markdown":"See `KafkaAdminOperations` Javadocs for more info:\r\n\r\n\t/**\r\n\t * Create topics if they don&#39;t exist or increase the number of partitions if needed.\r\n\t * @param topics the topics.\r\n\t */\r\n\tvoid createOrModifyTopics(NewTopic... topics);\r\n\r\nNot sure in your logic around `partitionIdExists` though, since the partition in the Kafka topic is just an index number. So, if there is partition `3`, it doesn&#39;t mean that there is no partitions `1` or `2`. Therefore a `NewTopic` API is just that simple as `numPartitions`. Nothing more. \r\n\r\nTechnically, what you are asking is just covered by that `createOrModifyTopics()` and that&#39;s it: you don&#39;t need to check for topics yourself.","title":"Add partitions for Kafka topic dynamically using Spring Boot?","body":"<p>See <code>KafkaAdminOperations</code> Javadocs for more info:</p>\n<pre><code>/**\n * Create topics if they don't exist or increase the number of partitions if needed.\n * @param topics the topics.\n */\nvoid createOrModifyTopics(NewTopic... topics);\n</code></pre>\n<p>Not sure in your logic around <code>partitionIdExists</code> though, since the partition in the Kafka topic is just an index number. So, if there is partition <code>3</code>, it doesn't mean that there is no partitions <code>1</code> or <code>2</code>. Therefore a <code>NewTopic</code> API is just that simple as <code>numPartitions</code>. Nothing more.</p>\n<p>Technically, what you are asking is just covered by that <code>createOrModifyTopics()</code> and that's it: you don't need to check for topics yourself.</p>\n"}],"owner":{"account_id":8210886,"reputation":814,"user_id":20390023,"display_name":"Wrapper"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":484,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75339957,"answer_count":1,"score":1,"last_activity_date":1675455392,"creation_date":1675450110,"question_id":75339878,"body_markdown":"I was able to inspect particular topic for its partitions:\r\n\r\n    public  void addPartitionIfNotExists(int partitionId){\r\n        Map&lt;String, TopicDescription&gt; games = kafkaAdmin.describeTopics(&quot;games&quot;);\r\n        TopicDescription gamesTopicDescription = games.get(&quot;games&quot;);\r\n        List&lt;TopicPartitionInfo&gt; partitionsInfo = gamesTopicDescription.partitions();\r\n        boolean partitionIdExists = partitionsInfo.stream().anyMatch(partitionInfo -&gt; partitionInfo.partition() == partitionId);\r\n        if (!partitionIdExists){\r\n            //missing part\r\n        }\r\n    }\r\n\r\nBut I haven&#39;t been able to add new partition to a already existing topic during runtime. Don&#39;t know if that is even possible.","title":"Add partitions for Kafka topic dynamically using Spring Boot?","body":"<p>I was able to inspect particular topic for its partitions:</p>\n<pre><code>public  void addPartitionIfNotExists(int partitionId){\n    Map&lt;String, TopicDescription&gt; games = kafkaAdmin.describeTopics(&quot;games&quot;);\n    TopicDescription gamesTopicDescription = games.get(&quot;games&quot;);\n    List&lt;TopicPartitionInfo&gt; partitionsInfo = gamesTopicDescription.partitions();\n    boolean partitionIdExists = partitionsInfo.stream().anyMatch(partitionInfo -&gt; partitionInfo.partition() == partitionId);\n    if (!partitionIdExists){\n        //missing part\n    }\n}\n</code></pre>\n<p>But I haven't been able to add new partition to a already existing topic during runtime. Don't know if that is even possible.</p>\n"},{"tags":["java","oop"],"comments":[{"owner":{"account_id":4963389,"reputation":72161,"user_id":3993662,"accept_rate":93,"display_name":"baao"},"score":0,"creation_date":1561382234,"post_id":56737417,"comment_id":100033549,"body_markdown":"That&#39;s perfectly fine","body":"That&#39;s perfectly fine"},{"owner":{"account_id":10247968,"reputation":759,"user_id":11504689,"display_name":"mwarren"},"score":2,"creation_date":1561382256,"post_id":56737417,"comment_id":100033564,"body_markdown":"Personally I don&#39;t like it but it is used in JavaFX.","body":"Personally I don&#39;t like it but it is used in JavaFX."},{"owner":{"account_id":2232270,"reputation":3823,"user_id":2351110,"display_name":"mattmess1221"},"score":3,"creation_date":1561382325,"post_id":56737417,"comment_id":100033595,"body_markdown":"While not illegal, it may be undesired. You can return an immutable list to prevent this. Either guava&#39;s `ImmutableList.copyOf()` or java&#39;s `Collections.unmodifiableList()`","body":"While not illegal, it may be undesired. You can return an immutable list to prevent this. Either guava&#39;s <code>ImmutableList.copyOf()</code> or java&#39;s <code>Collections.unmodifiableList()</code>"},{"owner":{"account_id":69443,"reputation":85343,"user_id":202009,"accept_rate":79,"display_name":"Andy Thomas"},"score":0,"creation_date":1561382910,"post_id":56737417,"comment_id":100033965,"body_markdown":"It depends. Is the list a part of the representation of the containing object, or just associated with it? If the former, the representation might change, and the containing object might need to know about state changes.","body":"It depends. Is the list a part of the representation of the containing object, or just associated with it? If the former, the representation might change, and the containing object might need to know about state changes."},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1561458532,"post_id":56737417,"comment_id":100061485,"body_markdown":"Any comments on the answers? although your question is closed, you still might accept one of the answers!","body":"Any comments on the answers? although your question is closed, you still might accept one of the answers!"}],"answers":[{"tags":[],"owner":{"account_id":8319552,"reputation":407,"user_id":10063655,"display_name":"vc73"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1561382338,"creation_date":1561382338,"answer_id":56737476,"question_id":56737417,"body_markdown":"It depends on what you want to achieve with your object, if you need your object to be immutable(except by using some methods provided), then you would need to show a copy of that object(or make it immutable by using methods like `Collections.Immutable`).\r\nTo answer your question: it&#39;s perfectly fine to modify a list returned by a method(if that is what you want).","title":"Is it a bad practice to change the value of an object, bypassing the setter?","body":"<p>It depends on what you want to achieve with your object, if you need your object to be immutable(except by using some methods provided), then you would need to show a copy of that object(or make it immutable by using methods like <code>Collections.Immutable</code>).\nTo answer your question: it's perfectly fine to modify a list returned by a method(if that is what you want).</p>\n"},{"tags":[],"owner":{"account_id":6340208,"reputation":48515,"user_id":4922375,"accept_rate":96,"display_name":"Andrew Tobilko"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1561382894,"creation_date":1561382550,"answer_id":56737535,"question_id":56737417,"body_markdown":"&gt; Is it a bad practice to change the value of an object, bypassing the setter?\r\n\r\nA good API won&#39;t allow you to change the value. `getMyListFromPojo()` would return an unmodifiable collection, no one from the outside would be able to alter the value returned.\r\n\r\nOn the other hand, a POJO class is supposed to be a very simple class. I rarely see POJO methods return something more complex (for instance, a copy or an immutable object) than a reference to a corresponding field.","title":"Is it a bad practice to change the value of an object, bypassing the setter?","body":"<blockquote>\n  <p>Is it a bad practice to change the value of an object, bypassing the setter?</p>\n</blockquote>\n\n<p>A good API won't allow you to change the value. <code>getMyListFromPojo()</code> would return an unmodifiable collection, no one from the outside would be able to alter the value returned.</p>\n\n<p>On the other hand, a POJO class is supposed to be a very simple class. I rarely see POJO methods return something more complex (for instance, a copy or an immutable object) than a reference to a corresponding field.</p>\n"},{"tags":[],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1561383739,"creation_date":1561382639,"answer_id":56737561,"question_id":56737417,"body_markdown":"&gt; This code will change the value in the field myListFromPojo! Is this a normal practice?\r\n\r\nIt is your code, thus your decision.\r\n\r\nIf you want to allow for such things, nicely document that in JavaDoc, and ensure that the underlying List is an `ArrayList` for example that allows any kind of modification.\r\n\r\nIf, on the other hand, you do **not** want such changes to take place, then nicely document that in JavaDoc, to then ensure that your APIs do not allow for it to happen. For example by making sure that the List instance is actually some sort of ImmutableList.\r\n\r\nAnd note that *both* ways can be legit. It is really up to the person defining the APIs here what is acceptable and what not. Of course, the first premise would be that all things in your API behave in the same way. \r\n\r\nBeyond that, such DTOs/Beans are typically meant to only contain values, so updating them is often allowed. But of course, it *can* lead to problems when multiple threads come into play. From a consistency point of view, you are always better off to **forbid** modifications (instead: changes create new objects with new content). But sometimes the performance penalty for doing that might be considered too high.","title":"Is it a bad practice to change the value of an object, bypassing the setter?","body":"<blockquote>\n  <p>This code will change the value in the field myListFromPojo! Is this a normal practice?</p>\n</blockquote>\n\n<p>It is your code, thus your decision.</p>\n\n<p>If you want to allow for such things, nicely document that in JavaDoc, and ensure that the underlying List is an <code>ArrayList</code> for example that allows any kind of modification.</p>\n\n<p>If, on the other hand, you do <strong>not</strong> want such changes to take place, then nicely document that in JavaDoc, to then ensure that your APIs do not allow for it to happen. For example by making sure that the List instance is actually some sort of ImmutableList.</p>\n\n<p>And note that <em>both</em> ways can be legit. It is really up to the person defining the APIs here what is acceptable and what not. Of course, the first premise would be that all things in your API behave in the same way. </p>\n\n<p>Beyond that, such DTOs/Beans are typically meant to only contain values, so updating them is often allowed. But of course, it <em>can</em> lead to problems when multiple threads come into play. From a consistency point of view, you are always better off to <strong>forbid</strong> modifications (instead: changes create new objects with new content). But sometimes the performance penalty for doing that might be considered too high.</p>\n"},{"comments":[{"owner":{"account_id":6340208,"reputation":48515,"user_id":4922375,"accept_rate":96,"display_name":"Andrew Tobilko"},"score":0,"creation_date":1561383297,"post_id":56737612,"comment_id":100034188,"body_markdown":"eventually, it might clutter the class with all Collection&#39;s add-remove methods","body":"eventually, it might clutter the class with all Collection&#39;s add-remove methods"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1561383495,"post_id":56737612,"comment_id":100034318,"body_markdown":"@AndrewTobilko sure, this an example of one of the options and not a perfect idea, just one that keeps responsibilities.","body":"@AndrewTobilko sure, this an example of one of the options and not a perfect idea, just one that keeps responsibilities."}],"tags":[],"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"comment_count":2,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1561382806,"creation_date":1561382806,"answer_id":56737612,"question_id":56737417,"body_markdown":"I would instead write two methods:  \r\n\r\n- one for adding a single object to the list\r\n\r\n```java\r\n    public void addToListFromPojo(Object object) {\r\n        this.myListFromPojo.add(object);\r\n    }\r\n```\r\n\r\n- and another one for adding a list of objects to it\r\n\r\n```java\r\n    public void addAllToListOfPojo(List&lt;Object&gt; objectList) {\r\n        this.myListFromPojo.addAll(objectList);\r\n    }\r\n```\r\n\r\nThat would result in more (theoretically unnecessary) code, but it would support readability and  \r\n**keep the responsibility of changing the fields inside the class**.\r\n\r\n&gt;If you don&#39;t care for responsibilities of units of your code, then just use less code ==&gt; your example","title":"Is it a bad practice to change the value of an object, bypassing the setter?","body":"<p>I would instead write two methods:  </p>\n\n<ul>\n<li>one for adding a single object to the list</li>\n</ul>\n\n<pre class=\"lang-java prettyprint-override\"><code>    public void addToListFromPojo(Object object) {\n        this.myListFromPojo.add(object);\n    }\n</code></pre>\n\n<ul>\n<li>and another one for adding a list of objects to it</li>\n</ul>\n\n<pre class=\"lang-java prettyprint-override\"><code>    public void addAllToListOfPojo(List&lt;Object&gt; objectList) {\n        this.myListFromPojo.addAll(objectList);\n    }\n</code></pre>\n\n<p>That would result in more (theoretically unnecessary) code, but it would support readability and<br>\n<strong>keep the responsibility of changing the fields inside the class</strong>.</p>\n\n<blockquote>\n  <p>If you don't care for responsibilities of units of your code, then just use less code ==> your example</p>\n</blockquote>\n"}],"owner":{"account_id":12875307,"reputation":381,"user_id":9312228,"display_name":"maksim2112"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":556,"favorite_count":0,"down_vote_count":2,"up_vote_count":5,"closed_date":1561383259,"accepted_answer_id":56737535,"answer_count":4,"score":3,"last_activity_date":1675455305,"creation_date":1561382151,"question_id":56737417,"body_markdown":"That is, I get the object through the get-method. And then change the value. Thus, I do not create a copy of this object, but change the value of the original.\r\n\r\n Example with `List`:\r\n\r\n    getMyListFromPojo().addAll(additionalList);\r\n\r\nThis code will change the value in the field `myListFromPojo`! Is this a normal practice?","title":"Is it a bad practice to change the value of an object, bypassing the setter?","body":"<p>That is, I get the object through the get-method. And then change the value. Thus, I do not create a copy of this object, but change the value of the original.</p>\n\n<p>Example with <code>List</code>:</p>\n\n<pre><code>getMyListFromPojo().addAll(additionalList);\n</code></pre>\n\n<p>This code will change the value in the field <code>myListFromPojo</code>! Is this a normal practice?</p>\n"},{"tags":["java","apache-kafka"],"answers":[{"comments":[{"owner":{"account_id":19254051,"reputation":5,"user_id":14071381,"display_name":"yigi"},"score":0,"creation_date":1675711071,"post_id":75340605,"comment_id":132983755,"body_markdown":"I will join data with KStream and KTable for my logic. Thank you for your Kafka Stream suggestion. By the way, the actual topic names are different than topic1 and topic2 but I was no sure if I can regex too. Cool!","body":"I will join data with KStream and KTable for my logic. Thank you for your Kafka Stream suggestion. By the way, the actual topic names are different than topic1 and topic2 but I was no sure if I can regex too. Cool!"}],"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675455167,"creation_date":1675455167,"answer_id":75340605,"question_id":75333577,"body_markdown":"&gt; consume these topic1 and topic2 at the same time\r\n\r\nUse a regex pattern\r\n\r\n    Consumer.subscribe(&quot;topic[12]&quot;);\r\n\r\n&gt; aggregate/process these payloads. What should I do?\r\n\r\nDon&#39;t use the consumer API for this. Use Kafka Streams. \r\n\r\n&gt; Some source say the topics should have the same key \r\n\r\nTo _join_ the data, yes. Not to consume both, in parallel. ","title":"Consume multiple topics at the same time from single consumer","body":"<blockquote>\n<p>consume these topic1 and topic2 at the same time</p>\n</blockquote>\n<p>Use a regex pattern</p>\n<pre><code>Consumer.subscribe(&quot;topic[12]&quot;);\n</code></pre>\n<blockquote>\n<p>aggregate/process these payloads. What should I do?</p>\n</blockquote>\n<p>Don't use the consumer API for this. Use Kafka Streams.</p>\n<blockquote>\n<p>Some source say the topics should have the same key</p>\n</blockquote>\n<p>To <em>join</em> the data, yes. Not to consume both, in parallel.</p>\n"}],"owner":{"account_id":19254051,"reputation":5,"user_id":14071381,"display_name":"yigi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75340605,"answer_count":1,"score":0,"last_activity_date":1675455167,"creation_date":1675415316,"question_id":75333577,"body_markdown":"There are multiple topics and these topics have no key value relation. The first payload of topic1 (has no key) example as it follows:\r\n\r\n```json\r\n{ &quot;bookList&quot;: [{&quot;bookId&quot;: &quot;1&quot;}, {&quot;bookId&quot;: &quot;2&quot;} ],&quot;magazineList&quot;: [{&quot;magazineId&quot;: &quot;1&quot;}, {&quot;magazineId&quot;: &quot;2&quot;} ]\r\n```\r\n\r\nthe second payload of topic2 (has a random integer key value) is:\r\n\r\n```json\r\n{ &quot;libraryId&quot;: &quot;1&quot;, &quot;cityId&quot;: &quot;1&quot; }\r\n```\r\n\r\nLet&#39;s assume these payloads consume at the same t time and these topics in the same consumer group. What I am trying to do is to consume these topic1 and topic2 at the same time (maybe using stream) and aggregate/process these payloads. What should I do?\r\n\r\nSome source say the topics should have the same key to process different topics but I am new to Kafka and couldn&#39;t find my answer. Is the below approach correct?\r\n\r\n```java\r\nKafkaConsumer&lt;String,String&gt; Consumer = new KafkaConsumer&lt;String,String&gt;(properties);\r\n       Consumer.subscribe(&quot;topic1&quot;);\r\n       Consumer.subscribe(&quot;topic2&quot;);\r\n\r\n        \r\n        while (true) {\r\n            ConsumerRecords&lt;Integer,String&gt; records=Consumer.poll(Duration.ofMillis(100));  \r\n                 for(ConsumerRecord&lt;String,String&gt; record: records){  \r\n            System.out.println(record);\r\n            }\r\n        }\r\n```","title":"Consume multiple topics at the same time from single consumer","body":"<p>There are multiple topics and these topics have no key value relation. The first payload of topic1 (has no key) example as it follows:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{ &quot;bookList&quot;: [{&quot;bookId&quot;: &quot;1&quot;}, {&quot;bookId&quot;: &quot;2&quot;} ],&quot;magazineList&quot;: [{&quot;magazineId&quot;: &quot;1&quot;}, {&quot;magazineId&quot;: &quot;2&quot;} ]\n</code></pre>\n<p>the second payload of topic2 (has a random integer key value) is:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{ &quot;libraryId&quot;: &quot;1&quot;, &quot;cityId&quot;: &quot;1&quot; }\n</code></pre>\n<p>Let's assume these payloads consume at the same t time and these topics in the same consumer group. What I am trying to do is to consume these topic1 and topic2 at the same time (maybe using stream) and aggregate/process these payloads. What should I do?</p>\n<p>Some source say the topics should have the same key to process different topics but I am new to Kafka and couldn't find my answer. Is the below approach correct?</p>\n<pre class=\"lang-java prettyprint-override\"><code>KafkaConsumer&lt;String,String&gt; Consumer = new KafkaConsumer&lt;String,String&gt;(properties);\n       Consumer.subscribe(&quot;topic1&quot;);\n       Consumer.subscribe(&quot;topic2&quot;);\n\n        \n        while (true) {\n            ConsumerRecords&lt;Integer,String&gt; records=Consumer.poll(Duration.ofMillis(100));  \n                 for(ConsumerRecord&lt;String,String&gt; record: records){  \n            System.out.println(record);\n            }\n        }\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1675455282,"post_id":75340597,"comment_id":132940352,"body_markdown":"You&#39;re doing int division which will of necessity return an int result. To do double division either the numerator or denominator, or both, must be a double. One solution is to cast the top number to double:  `double totalPrice = foodPrice + (double) tipPercent / 100;` or you could declare the denominator to be double: `double totalPrice = foodPrice + tipPercent / 100.0;`","body":"You&#39;re doing int division which will of necessity return an int result. To do double division either the numerator or denominator, or both, must be a double. One solution is to cast the top number to double:  <code>double totalPrice = foodPrice + (double) tipPercent &#47; 100;</code> or you could declare the denominator to be double: <code>double totalPrice = foodPrice + tipPercent &#47; 100.0;</code>"}],"owner":{"account_id":26223653,"reputation":7,"user_id":19900650,"display_name":"Ryan Hansen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1675455244,"answer_count":0,"score":0,"last_activity_date":1675455097,"creation_date":1675455097,"question_id":75340597,"body_markdown":"the division always computes the solution to 0. I use multiply or addition and the solution returns correctly.\r\n\r\n    //get customers&#39;s price of food or subtotal\r\n    Scanner scan = new Scanner(System.in);\r\n    System.out.println(&quot;Please enter the cost of the your meal&quot;);\r\n    double foodPrice = scan.nextDouble();\r\n\r\n    //get customer&#39;s tip percentage\r\n    System.out.println(&quot;What is the percent you would like to tip your server?&quot;);\r\n    int tipPercent = scan.nextInt();\r\n\r\n   \r\n\r\n    //calculate the total\r\n        double totalPrice = foodPrice + tipPercent / 100;\r\n\r\n\r\n\r\n    //display the total price of the cutomer&#39;s meal\r\n        System.out.println(&quot;Your total bill with the tip is $&quot; + totalPrice); ","title":"Why wont my tip calculator divide my tip percentage to a decimal?","body":"<p>the division always computes the solution to 0. I use multiply or addition and the solution returns correctly.</p>\n<pre><code>//get customers's price of food or subtotal\nScanner scan = new Scanner(System.in);\nSystem.out.println(&quot;Please enter the cost of the your meal&quot;);\ndouble foodPrice = scan.nextDouble();\n\n//get customer's tip percentage\nSystem.out.println(&quot;What is the percent you would like to tip your server?&quot;);\nint tipPercent = scan.nextInt();\n\n\n\n//calculate the total\n    double totalPrice = foodPrice + tipPercent / 100;\n\n\n\n//display the total price of the cutomer's meal\n    System.out.println(&quot;Your total bill with the tip is $&quot; + totalPrice); \n</code></pre>\n"},{"tags":["java","multithreading","debugging","intellij-idea","kill"],"comments":[{"owner":{"account_id":6074821,"reputation":593,"user_id":4742511,"accept_rate":21,"display_name":"TheCurious"},"score":0,"creation_date":1580300986,"post_id":28747138,"comment_id":106051019,"body_markdown":"Execute System.exit(0).","body":"Execute System.exit(0)."}],"answers":[{"comments":[{"owner":{"account_id":5702461,"reputation":1191,"user_id":4507034,"accept_rate":100,"display_name":"Radu Linu"},"score":3,"creation_date":1512737408,"post_id":30377746,"comment_id":82389458,"body_markdown":"In order to have the possibility of **Interrupt thread** you have to: `right click on threads` -&gt; `Customize Threads View` -&gt; check  `Show method arguments types`","body":"In order to have the possibility of <b>Interrupt thread</b> you have to: <code>right click on threads</code> -&gt; <code>Customize Threads View</code> -&gt; check  <code>Show method arguments types</code>"}],"tags":[],"owner":{"account_id":126031,"reputation":510,"user_id":322240,"display_name":"Foyta"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1432221195,"creation_date":1432221195,"answer_id":30377746,"question_id":28747138,"body_markdown":"There is a little icon on the right side of the Debug view:\r\n\r\n![Threads icon][1]\r\n\r\nThis will open &#39;Threads&#39; tab and there you can right-click on some of them and select &#39;Interrupt&#39; (and press F9 if you are sleeping on some breakpoint).\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/lwnji.png","title":"Kill java thread in Intellij-IDEA debugger","body":"<p>There is a little icon on the right side of the Debug view:</p>\n\n<p><img src=\"https://i.stack.imgur.com/lwnji.png\" alt=\"Threads icon\"></p>\n\n<p>This will open 'Threads' tab and there you can right-click on some of them and select 'Interrupt' (and press F9 if you are sleeping on some breakpoint).</p>\n"},{"tags":[],"owner":{"account_id":16657935,"reputation":834,"user_id":13927534,"display_name":"Miss Skooter"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675454767,"creation_date":1675257159,"answer_id":75310696,"question_id":28747138,"body_markdown":"The accepted answer is now outdated (at least it is different for me in IntelliJ 2022.3.2). Just in case anyone (like me) stumbles upon it, there is a button at the right side of the debugger that allows you to show threads (it is disabled by default).\r\nsee image below:\r\n[![enter image description here][1]][1]\r\n\r\nThen you&#39;ll be able to select the thread you want to modify through the debugger by right clicking it.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SGszI.png","title":"Kill java thread in Intellij-IDEA debugger","body":"<p>The accepted answer is now outdated (at least it is different for me in IntelliJ 2022.3.2). Just in case anyone (like me) stumbles upon it, there is a button at the right side of the debugger that allows you to show threads (it is disabled by default).\nsee image below:\n<a href=\"https://i.stack.imgur.com/SGszI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SGszI.png\" alt=\"enter image description here\" /></a></p>\n<p>Then you'll be able to select the thread you want to modify through the debugger by right clicking it.</p>\n"}],"owner":{"account_id":55436,"reputation":599,"user_id":166044,"accept_rate":83,"display_name":"vkolodrevskiy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5603,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":30377746,"answer_count":2,"score":5,"last_activity_date":1675454767,"creation_date":1424966662,"question_id":28747138,"body_markdown":"I&#39;ve found several posts with instructions of how to kill java thread with **jdb** http://www.rhcedan.com/2010/06/22/killing-a-java-thread/ or [on SO][1]. This works.\r\nNow I want to kill thread with Intellij-IDEA debugger. Is it possible to do?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/181615/java-threads-is-it-possible-view-pause-kill-a-particular-thread-from-a-differen/874335#874335","title":"Kill java thread in Intellij-IDEA debugger","body":"<p>I've found several posts with instructions of how to kill java thread with <strong>jdb</strong> <a href=\"http://www.rhcedan.com/2010/06/22/killing-a-java-thread/\" rel=\"noreferrer\">http://www.rhcedan.com/2010/06/22/killing-a-java-thread/</a> or <a href=\"https://stackoverflow.com/questions/181615/java-threads-is-it-possible-view-pause-kill-a-particular-thread-from-a-differen/874335#874335\">on SO</a>. This works.\nNow I want to kill thread with Intellij-IDEA debugger. Is it possible to do?</p>\n"},{"tags":["java","android","volume"],"owner":{"account_id":3910525,"reputation":11,"user_id":3236017,"display_name":"user3236017"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675454388,"creation_date":1559855116,"question_id":56485074,"body_markdown":"I am trying to use mediaplayer to create 3d audio locating for my game.\n\nThere is a weird problem however. When I adjust volumes for two channels individualy, it works. However sometimes some sound files doesn&#39;t play correctly. \n\nSound set for left channel only (1f, 0f) comes from both speakers. Then, if I set the volume, such, to mute left channel: \n```sound.setVolume(0f, 1f);```\nthen no sound comes.\n\nIf I set setVolume(1f,0f) then sound comes from both speakers.(Remember not for all sound files. Some sounds works as intended). \n\nWhy would I experience this setVolume misbehaviour?\r\n\r\n```\nsound = MediaPlayer.create(context, R.raw.soundfile);\r\nsound.start();\r\nsound.setVolume(volumeLeft, volumeRight);\n```","title":"Mediaplayer doesn&#39;t set volumes for individual channel","body":"<p>I am trying to use mediaplayer to create 3d audio locating for my game.</p>\n\n<p>There is a weird problem however. When I adjust volumes for two channels individualy, it works. However sometimes some sound files doesn't play correctly. </p>\n\n<p>Sound set for left channel only (1f, 0f) comes from both speakers. Then, if I set the volume, such, to mute left channel: \n<code>sound.setVolume(0f, 1f);</code>\nthen no sound comes.</p>\n\n<p>If I set setVolume(1f,0f) then sound comes from both speakers.(Remember not for all sound files. Some sounds works as intended). </p>\n\n<p>Why would I experience this setVolume misbehaviour?</p>\n\n<pre><code>sound = MediaPlayer.create(context, R.raw.soundfile);\nsound.start();\nsound.setVolume(volumeLeft, volumeRight);\n</code></pre>\n"},{"tags":["java","intellij-idea","build.gradle","intellij-plugin"],"comments":[{"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"score":1,"creation_date":1675454263,"post_id":75340440,"comment_id":132940101,"body_markdown":"The best place to ask would be https://intellij-support.jetbrains.com/hc/en-us/community/topics/200366979-IntelliJ-IDEA-Open-API-and-Plugin-Development.","body":"The best place to ask would be <a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/topics/200366979-IntelliJ-IDEA-Open-API-and-Plugin-Development\" rel=\"nofollow noreferrer\">intellij-support.jetbrains.com/hc/en-us/community/topics/&hellip;</a>."}],"owner":{"account_id":12713490,"reputation":23,"user_id":9236364,"display_name":"Maldz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675453995,"creation_date":1675453995,"question_id":75340440,"body_markdown":"I&#39;ve included a language server JAR in the lib folder of my IntelliJ plugin for my custom language plugin.  I&#39;ve also added it under dependencies in my build.gradle file like so:\r\n\r\n    compile files(&#39;lib/MyLangServer-1.1.jar&#39;)\r\n\r\nI&#39;m trying to access/run this jar from a preloading activity and while I can use `idea.plugins.path` to access the correct path to the installed jar when using runIde to test a sandbox instance of the plugin, when I build the plugin and install it from disk as a zip, the path is now returning null. \r\n\r\nIs this the correct way to reference the jar, or is there another way that I&#39;m missing, or could there be some other issue?  Thanks in advance.","title":"Unable to access JAR included in IntelliJ plugin from preloading activity","body":"<p>I've included a language server JAR in the lib folder of my IntelliJ plugin for my custom language plugin.  I've also added it under dependencies in my build.gradle file like so:</p>\n<pre><code>compile files('lib/MyLangServer-1.1.jar')\n</code></pre>\n<p>I'm trying to access/run this jar from a preloading activity and while I can use <code>idea.plugins.path</code> to access the correct path to the installed jar when using runIde to test a sandbox instance of the plugin, when I build the plugin and install it from disk as a zip, the path is now returning null.</p>\n<p>Is this the correct way to reference the jar, or is there another way that I'm missing, or could there be some other issue?  Thanks in advance.</p>\n"},{"tags":["java","multithreading","sockets","parallel-processing"],"answers":[{"comments":[{"owner":{"account_id":23497728,"reputation":322,"user_id":17547957,"display_name":"SupaMaggie70 b"},"score":0,"creation_date":1675454029,"post_id":75340437,"comment_id":132940050,"body_markdown":"I never knew try-catch closed sockets opened! Thats interesting, and I’ll keep it in mind.","body":"I never knew try-catch closed sockets opened! Thats interesting, and I’ll keep it in mind."},{"owner":{"account_id":37136,"reputation":57822,"user_id":106104,"accept_rate":62,"display_name":"user253751"},"score":0,"creation_date":1675454431,"post_id":75340437,"comment_id":132940145,"body_markdown":"@SupaMaggie70b that&#39;s the whole point of the try(){} as opposed to just try{}","body":"@SupaMaggie70b that&#39;s the whole point of the try(){} as opposed to just try{}"},{"owner":{"account_id":24650124,"reputation":5,"user_id":18547316,"display_name":"Ion J."},"score":0,"creation_date":1675454655,"post_id":75340437,"comment_id":132940200,"body_markdown":"@user253751 That seems to the fix. I thought try-with-recourses would close the socket when the user is done. Thanks a lot for the advice!","body":"@user253751 That seems to the fix. I thought try-with-recourses would close the socket when the user is done. Thanks a lot for the advice!"},{"owner":{"account_id":23497728,"reputation":322,"user_id":17547957,"display_name":"SupaMaggie70 b"},"score":0,"creation_date":1675455429,"post_id":75340437,"comment_id":132940387,"body_markdown":"@user253751 That makes sense now, I never even knew about the try() {} catch{} in the first place. But it seems like something I will use in the future if needed!","body":"@user253751 That makes sense now, I never even knew about the try() {} catch{} in the first place. But it seems like something I will use in the future if needed!"},{"owner":{"account_id":25589,"reputation":562161,"user_id":65863,"accept_rate":75,"display_name":"Remy Lebeau"},"score":0,"creation_date":1675563638,"post_id":75340437,"comment_id":132956033,"body_markdown":"See [The try-with-resources Statement](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html) in the Java documentation.","body":"See <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow noreferrer\">The try-with-resources Statement</a> in the Java documentation."}],"tags":[],"owner":{"account_id":37136,"reputation":57822,"user_id":106104,"accept_rate":62,"display_name":"user253751"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675453952,"creation_date":1675453952,"answer_id":75340437,"question_id":75340428,"body_markdown":"This part:\r\n```\r\ntry (Socket socket = serverSocket.accept()) {\r\n    System.out.println(&quot;Client connected: &quot; + socket);\r\n    new ClientHandler(socket).start();\r\n}\r\n```\r\n\r\naccepts a socket, then prints a message, then starts a new thread, then closes the socket. At some point later the new thread finishes starting up and tries to use the socket and realizes it was already closed.\r\n\r\n`try (...) {...}` (officially called *try-with-resources*) always closes the things when it gets to the `}`. That&#39;s the point of it. If you don&#39;t want to close the socket at the `}` then you shouldn&#39;t use this type of statement.","title":"Java - Getting error &quot;Socket is closed&quot; when my Client class connects on my Server class","body":"<p>This part:</p>\n<pre><code>try (Socket socket = serverSocket.accept()) {\n    System.out.println(&quot;Client connected: &quot; + socket);\n    new ClientHandler(socket).start();\n}\n</code></pre>\n<p>accepts a socket, then prints a message, then starts a new thread, then closes the socket. At some point later the new thread finishes starting up and tries to use the socket and realizes it was already closed.</p>\n<p><code>try (...) {...}</code> (officially called <em>try-with-resources</em>) always closes the things when it gets to the <code>}</code>. That's the point of it. If you don't want to close the socket at the <code>}</code> then you shouldn't use this type of statement.</p>\n"}],"owner":{"account_id":24650124,"reputation":5,"user_id":18547316,"display_name":"Ion J."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75340437,"answer_count":1,"score":0,"last_activity_date":1675453977,"creation_date":1675453850,"question_id":75340428,"body_markdown":"I made two classes in Java named Server.java and Client.java. The Server is listening to a port and is waiting for a Client to connect (using sockets). When the client connects he can type a pair of numbers separated by &quot;space&quot; and if that pair exists in my *edge_list.txt* file the Server returns &quot;1&quot; to the client, if not it returns &quot;0&quot;. After I completed my initial project I wanted to also use **Threads** so that it can handle multiple users at once, but when the Client connects I get -&gt; **java.net.SocketException: Socket is closed**.\r\n\r\nI reviewed my code and try using **flush()** instead of **close()**. Also, I thought I was closing the socket before the user can read the file, but it didn&#39;t seem that was the case. Below I will have the **Server.java** code block and not the **Client.java**, cause it doesn&#39;t seem to be the problem. \r\n\r\n# Server.java\r\n\r\n```\r\nimport java.io.*;\r\nimport java.net.*;\r\nimport java.util.*;\r\n\r\npublic class Server {\r\n    private static final int PORT = 9999;\r\n\r\n    public static void main(String[] args) {\r\n        try (ServerSocket serverSocket = new ServerSocket(PORT)) {\r\n            System.out.println(&quot;Server is listening on port &quot; + PORT);\r\n\r\n            while (true) {\r\n                try (Socket socket = serverSocket.accept()) {\r\n                    System.out.println(&quot;Client connected: &quot; + socket);\r\n                    new ClientHandler(socket).start();\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private static class ClientHandler extends Thread {\r\n        private Socket socket;\r\n        ClientHandler(Socket socket){\r\n            this.socket = socket;\r\n        }\r\n        @Override\r\n        public void run() {\r\n            try {\r\n                //Creating Sockets and Streams\r\n                InputStream input = socket.getInputStream();\r\n                BufferedReader reader = new BufferedReader(new InputStreamReader(input));\r\n                OutputStream output = socket.getOutputStream();\r\n                PrintWriter writer = new PrintWriter(new OutputStreamWriter(output));\r\n\r\n                while (socket.isConnected() &amp;&amp; !socket.isClosed()) {\r\n                    //Reading what the Client types\r\n                    String request = reader.readLine();\r\n                    //Split the values with &quot;space&quot; and store them in an array,\r\n                    //then parse those values to two integers\r\n                    String[] values = request.split(&quot; &quot;);\r\n                    int A = Integer.parseInt(values[0]);\r\n                    int B = Integer.parseInt(values[1]);\r\n                    //Check if the pair in the file exists using checkPairInFile() method\r\n                    boolean exists = checkPairInFile(A, B);\r\n                    //if it does print 1 else 0\r\n                    writer.println(exists ? &quot;1&quot; : &quot;0&quot;);\r\n                    //Flush the output to send the response back to the client\r\n                    writer.flush();\r\n                }\r\n\r\n                //Print the disconnected user\r\n                System.out.println(&quot;Client disconnected: &quot; + socket);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n    private static boolean checkPairInFile(int A, int B) {\r\n        try (Scanner scanner = new Scanner(new File(&quot;edge_list.txt&quot;))) {\r\n            //Scanning the file lines\r\n            while (scanner.hasNextLine()) {\r\n                String line = scanner.nextLine();\r\n                //Split the values with &quot;space&quot;\r\n                String[] values = line.split(&quot; &quot;);\r\n                //Parse the values from String -&gt; Int\r\n                int a = Integer.parseInt(values[0]);\r\n                int b = Integer.parseInt(values[1]);\r\n                //if both exist return true\r\n                if (A == a &amp;&amp; B == b) {\r\n                    return true;\r\n                }\r\n            }\r\n        } catch (FileNotFoundException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return false;\r\n    }\r\n}\r\n```\r\n\r\nP.S. Thanks in advance for your help, in case this is problem with my Client.java file I will update the post.\r\n","title":"Java - Getting error &quot;Socket is closed&quot; when my Client class connects on my Server class","body":"<p>I made two classes in Java named Server.java and Client.java. The Server is listening to a port and is waiting for a Client to connect (using sockets). When the client connects he can type a pair of numbers separated by &quot;space&quot; and if that pair exists in my <em>edge_list.txt</em> file the Server returns &quot;1&quot; to the client, if not it returns &quot;0&quot;. After I completed my initial project I wanted to also use <strong>Threads</strong> so that it can handle multiple users at once, but when the Client connects I get -&gt; <strong>java.net.SocketException: Socket is closed</strong>.</p>\n<p>I reviewed my code and try using <strong>flush()</strong> instead of <strong>close()</strong>. Also, I thought I was closing the socket before the user can read the file, but it didn't seem that was the case. Below I will have the <strong>Server.java</strong> code block and not the <strong>Client.java</strong>, cause it doesn't seem to be the problem.</p>\n<h1>Server.java</h1>\n<pre><code>import java.io.*;\nimport java.net.*;\nimport java.util.*;\n\npublic class Server {\n    private static final int PORT = 9999;\n\n    public static void main(String[] args) {\n        try (ServerSocket serverSocket = new ServerSocket(PORT)) {\n            System.out.println(&quot;Server is listening on port &quot; + PORT);\n\n            while (true) {\n                try (Socket socket = serverSocket.accept()) {\n                    System.out.println(&quot;Client connected: &quot; + socket);\n                    new ClientHandler(socket).start();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private static class ClientHandler extends Thread {\n        private Socket socket;\n        ClientHandler(Socket socket){\n            this.socket = socket;\n        }\n        @Override\n        public void run() {\n            try {\n                //Creating Sockets and Streams\n                InputStream input = socket.getInputStream();\n                BufferedReader reader = new BufferedReader(new InputStreamReader(input));\n                OutputStream output = socket.getOutputStream();\n                PrintWriter writer = new PrintWriter(new OutputStreamWriter(output));\n\n                while (socket.isConnected() &amp;&amp; !socket.isClosed()) {\n                    //Reading what the Client types\n                    String request = reader.readLine();\n                    //Split the values with &quot;space&quot; and store them in an array,\n                    //then parse those values to two integers\n                    String[] values = request.split(&quot; &quot;);\n                    int A = Integer.parseInt(values[0]);\n                    int B = Integer.parseInt(values[1]);\n                    //Check if the pair in the file exists using checkPairInFile() method\n                    boolean exists = checkPairInFile(A, B);\n                    //if it does print 1 else 0\n                    writer.println(exists ? &quot;1&quot; : &quot;0&quot;);\n                    //Flush the output to send the response back to the client\n                    writer.flush();\n                }\n\n                //Print the disconnected user\n                System.out.println(&quot;Client disconnected: &quot; + socket);\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n\n\n\n    private static boolean checkPairInFile(int A, int B) {\n        try (Scanner scanner = new Scanner(new File(&quot;edge_list.txt&quot;))) {\n            //Scanning the file lines\n            while (scanner.hasNextLine()) {\n                String line = scanner.nextLine();\n                //Split the values with &quot;space&quot;\n                String[] values = line.split(&quot; &quot;);\n                //Parse the values from String -&gt; Int\n                int a = Integer.parseInt(values[0]);\n                int b = Integer.parseInt(values[1]);\n                //if both exist return true\n                if (A == a &amp;&amp; B == b) {\n                    return true;\n                }\n            }\n        } catch (FileNotFoundException e) {\n            e.printStackTrace();\n        }\n        return false;\n    }\n}\n</code></pre>\n<p>P.S. Thanks in advance for your help, in case this is problem with my Client.java file I will update the post.</p>\n"},{"tags":["java","spring-boot","google-cloud-platform","cloud","google-cloud-vision"],"answers":[{"comments":[{"owner":{"account_id":21056107,"reputation":1,"user_id":15475349,"display_name":"Himanshu Saxena"},"score":0,"creation_date":1675771795,"post_id":75340377,"comment_id":132996508,"body_markdown":"Can we use Amazon Rekognition for face authentication with java?","body":"Can we use Amazon Rekognition for face authentication with java?"},{"owner":{"account_id":24281337,"reputation":441,"user_id":18227814,"display_name":"Luciano Martins"},"score":0,"creation_date":1677085761,"post_id":75340377,"comment_id":133269389,"body_markdown":"I have no idea.","body":"I have no idea."}],"tags":[],"owner":{"account_id":24281337,"reputation":441,"user_id":18227814,"display_name":"Luciano Martins"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675453521,"creation_date":1675453521,"answer_id":75340377,"question_id":75323438,"body_markdown":"I think you are mixing concepts here.\r\n\r\nThe feature you are using is something called [face detection](https://cloud.google.com/vision/docs/detecting-faces) which detects faces and its features (position, mood, etc) on a image - without identifying unique characteristics from each face that could be used to build a database of faces.\r\n\r\nTo perform something as face authentication, you do need something called [face recognition](https://en.wikipedia.org/wiki/Facial_recognition_system) where, in summary, you build a base of known faces embeddings and perform a similarity search of a new face against this database.\r\n\r\nGoogle Vision API doesn&#39;t provide face recognition mechanisms as it goes against the [Google AI Principles](https://ai.google/principles/).","title":"Face Authentication with Google Cloud Vision API in Spring Boot","body":"<p>I think you are mixing concepts here.</p>\n<p>The feature you are using is something called <a href=\"https://cloud.google.com/vision/docs/detecting-faces\" rel=\"nofollow noreferrer\">face detection</a> which detects faces and its features (position, mood, etc) on a image - without identifying unique characteristics from each face that could be used to build a database of faces.</p>\n<p>To perform something as face authentication, you do need something called <a href=\"https://en.wikipedia.org/wiki/Facial_recognition_system\" rel=\"nofollow noreferrer\">face recognition</a> where, in summary, you build a base of known faces embeddings and perform a similarity search of a new face against this database.</p>\n<p>Google Vision API doesn't provide face recognition mechanisms as it goes against the <a href=\"https://ai.google/principles/\" rel=\"nofollow noreferrer\">Google AI Principles</a>.</p>\n"}],"owner":{"account_id":21056107,"reputation":1,"user_id":15475349,"display_name":"Himanshu Saxena"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":304,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675453521,"creation_date":1675342134,"question_id":75323438,"body_markdown":"1- I am using Google Cloud Vision API for face authentication in spring boot.\r\n2- I have created an Account on Google Cloud Console and download a Json key file.\r\n3- I use this Json file in my project and get the response of face data from image like this:\r\n   \r\n   \r\n```\r\ngoogle.cloud.vision.v1.EntityAnnotation.mid : /m/025kyy\r\ngoogle.cloud.vision.v1.EntityAnnotation.description : Forehead\r\ngoogle.cloud.vision.v1.EntityAnnotation.score : 0.9846564\r\ngoogle.cloud.vision.v1.EntityAnnotation.topicality : 0.9846564\r\ngoogle.cloud.vision.v1.EntityAnnotation.mid : /m/0jyfg\r\ngoogle.cloud.vision.v1.EntityAnnotation.description : Glasses\r\ngoogle.cloud.vision.v1.EntityAnnotation.score : 0.9844217\r\ngoogle.cloud.vision.v1.EntityAnnotation.topicality : 0.9844217\r\ngoogle.cloud.vision.v1.EntityAnnotation.mid : /m/03q69\r\ngoogle.cloud.vision.v1.EntityAnnotation.description : Hair\r\ngoogle.cloud.vision.v1.EntityAnnotation.score : 0.9835347\r\ngoogle.cloud.vision.v1.EntityAnnotation.topicality : 0.9835347\r\ngoogle.cloud.vision.v1.EntityAnnotation.mid : /m/019nj4\r\ngoogle.cloud.vision.v1.EntityAnnotation.description : Smile\r\ngoogle.cloud.vision.v1.EntityAnnotation.score : 0.9771221\r\ngoogle.cloud.vision.v1.EntityAnnotation.topicality : 0.9771221\r\ngoogle.cloud.vision.v1.EntityAnnotation.mid : /m/0h8jxfl\r\ngoogle.cloud.vision.v1.EntityAnnotation.description : Vision care\r\ngoogle.cloud.vision.v1.EntityAnnotation.score : 0.9488289\r\ngoogle.cloud.vision.v1.EntityAnnotation.topicality : 0.9488289\r\ngoogle.cloud.vision.v1.EntityAnnotation.mid : /m/027n3_\r\ngoogle.cloud.vision.v1.EntityAnnotation.description : Eyebrow\r\ngoogle.cloud.vision.v1.EntityAnnotation.score : 0.93961227\r\ngoogle.cloud.vision.v1.EntityAnnotation.topicality : 0.93961227\r\ngoogle.cloud.vision.v1.EntityAnnotation.mid : /m/015h_t\r\ngoogle.cloud.vision.v1.EntityAnnotation.description : Beard\r\ngoogle.cloud.vision.v1.EntityAnnotation.score : 0.9188007\r\ngoogle.cloud.vision.v1.EntityAnnotation.topicality : 0.9188007\r\ngoogle.cloud.vision.v1.EntityAnnotation.mid : /m/01k9lj\r\ngoogle.cloud.vision.v1.EntityAnnotation.description : Jaw\r\ngoogle.cloud.vision.v1.EntityAnnotation.score : 0.8822703\r\ngoogle.cloud.vision.v1.EntityAnnotation.topicality : 0.8822703\r\ngoogle.cloud.vision.v1.EntityAnnotation.mid : /m/0dzd8\r\ngoogle.cloud.vision.v1.EntityAnnotation.description : Neck\r\ngoogle.cloud.vision.v1.EntityAnnotation.score : 0.87822306\r\ngoogle.cloud.vision.v1.EntityAnnotation.topicality : 0.87822306\r\ngoogle.cloud.vision.v1.EntityAnnotation.mid : /m/0j272k5\r\ngoogle.cloud.vision.v1.EntityAnnotation.description : Eyewear\r\ngoogle.cloud.vision.v1.EntityAnnotation.score : 0.8768612\r\ngoogle.cloud.vision.v1.EntityAnnotation.topicality : 0.8768612\r\n```\r\n\r\n\r\n\r\nBut Now I have save these detail in my database and comparing the face data at the time of face authentication. But it&#39;s not work.\r\n\r\nI am doing this(GCP) for the first time. So I don&#39;t know how to compare two faces here.\r\nPlease help me!","title":"Face Authentication with Google Cloud Vision API in Spring Boot","body":"<p>1- I am using Google Cloud Vision API for face authentication in spring boot.\n2- I have created an Account on Google Cloud Console and download a Json key file.\n3- I use this Json file in my project and get the response of face data from image like this:</p>\n<pre><code>google.cloud.vision.v1.EntityAnnotation.mid : /m/025kyy\ngoogle.cloud.vision.v1.EntityAnnotation.description : Forehead\ngoogle.cloud.vision.v1.EntityAnnotation.score : 0.9846564\ngoogle.cloud.vision.v1.EntityAnnotation.topicality : 0.9846564\ngoogle.cloud.vision.v1.EntityAnnotation.mid : /m/0jyfg\ngoogle.cloud.vision.v1.EntityAnnotation.description : Glasses\ngoogle.cloud.vision.v1.EntityAnnotation.score : 0.9844217\ngoogle.cloud.vision.v1.EntityAnnotation.topicality : 0.9844217\ngoogle.cloud.vision.v1.EntityAnnotation.mid : /m/03q69\ngoogle.cloud.vision.v1.EntityAnnotation.description : Hair\ngoogle.cloud.vision.v1.EntityAnnotation.score : 0.9835347\ngoogle.cloud.vision.v1.EntityAnnotation.topicality : 0.9835347\ngoogle.cloud.vision.v1.EntityAnnotation.mid : /m/019nj4\ngoogle.cloud.vision.v1.EntityAnnotation.description : Smile\ngoogle.cloud.vision.v1.EntityAnnotation.score : 0.9771221\ngoogle.cloud.vision.v1.EntityAnnotation.topicality : 0.9771221\ngoogle.cloud.vision.v1.EntityAnnotation.mid : /m/0h8jxfl\ngoogle.cloud.vision.v1.EntityAnnotation.description : Vision care\ngoogle.cloud.vision.v1.EntityAnnotation.score : 0.9488289\ngoogle.cloud.vision.v1.EntityAnnotation.topicality : 0.9488289\ngoogle.cloud.vision.v1.EntityAnnotation.mid : /m/027n3_\ngoogle.cloud.vision.v1.EntityAnnotation.description : Eyebrow\ngoogle.cloud.vision.v1.EntityAnnotation.score : 0.93961227\ngoogle.cloud.vision.v1.EntityAnnotation.topicality : 0.93961227\ngoogle.cloud.vision.v1.EntityAnnotation.mid : /m/015h_t\ngoogle.cloud.vision.v1.EntityAnnotation.description : Beard\ngoogle.cloud.vision.v1.EntityAnnotation.score : 0.9188007\ngoogle.cloud.vision.v1.EntityAnnotation.topicality : 0.9188007\ngoogle.cloud.vision.v1.EntityAnnotation.mid : /m/01k9lj\ngoogle.cloud.vision.v1.EntityAnnotation.description : Jaw\ngoogle.cloud.vision.v1.EntityAnnotation.score : 0.8822703\ngoogle.cloud.vision.v1.EntityAnnotation.topicality : 0.8822703\ngoogle.cloud.vision.v1.EntityAnnotation.mid : /m/0dzd8\ngoogle.cloud.vision.v1.EntityAnnotation.description : Neck\ngoogle.cloud.vision.v1.EntityAnnotation.score : 0.87822306\ngoogle.cloud.vision.v1.EntityAnnotation.topicality : 0.87822306\ngoogle.cloud.vision.v1.EntityAnnotation.mid : /m/0j272k5\ngoogle.cloud.vision.v1.EntityAnnotation.description : Eyewear\ngoogle.cloud.vision.v1.EntityAnnotation.score : 0.8768612\ngoogle.cloud.vision.v1.EntityAnnotation.topicality : 0.8768612\n</code></pre>\n<p>But Now I have save these detail in my database and comparing the face data at the time of face authentication. But it's not work.</p>\n<p>I am doing this(GCP) for the first time. So I don't know how to compare two faces here.\nPlease help me!</p>\n"},{"tags":["java","spring","docker","docker-compose","configuration"],"comments":[{"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"score":1,"creation_date":1675236673,"post_id":75306761,"comment_id":132882623,"body_markdown":"Try to use the absolute path instead of relative for `source`.","body":"Try to use the absolute path instead of relative for <code>source</code>."},{"owner":{"account_id":19985221,"reputation":21,"user_id":20708977,"display_name":"Valentine Ezerins"},"score":1,"creation_date":1675237063,"post_id":75306761,"comment_id":132882725,"body_markdown":"@NikolasCharalambidis i also try this","body":"@NikolasCharalambidis i also try this"}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1675396966,"post_id":75307219,"comment_id":132924781,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/75307219/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."},{"owner":{"account_id":13495527,"reputation":549,"user_id":9736497,"display_name":"Alexandros Kourtis"},"score":0,"creation_date":1675397001,"post_id":75307219,"comment_id":132924786,"body_markdown":"Can you please elaborate further on what you mean?","body":"Can you please elaborate further on what you mean?"},{"owner":{"account_id":19985221,"reputation":21,"user_id":20708977,"display_name":"Valentine Ezerins"},"score":0,"creation_date":1675458858,"post_id":75307219,"comment_id":132941172,"body_markdown":"@AlexandrosMaltezos jar application don’t support custom context. How I understand, jar support env variable’s","body":"@AlexandrosMaltezos jar application don’t support custom context. How I understand, jar support env variable’s"}],"tags":[],"owner":{"account_id":19985221,"reputation":21,"user_id":20708977,"display_name":"Valentine Ezerins"},"comment_count":3,"down_vote_count":2,"up_vote_count":1,"is_accepted":true,"score":-1,"last_activity_date":1675239299,"creation_date":1675239299,"answer_id":75307219,"question_id":75306761,"body_markdown":"Jar file cant read application.yaml. I should use war.","title":"Can&#39;t mount application.yaml into docker java 8 spring","body":"<p>Jar file cant read application.yaml. I should use war.</p>\n"}],"owner":{"account_id":19985221,"reputation":21,"user_id":20708977,"display_name":"Valentine Ezerins"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75307219,"answer_count":1,"score":1,"last_activity_date":1675452781,"creation_date":1675235957,"question_id":75306761,"body_markdown":"Can someone explain me, why it doesn&#39;t mounted and java don&#39;t read application.yaml?\r\n\r\nThis is my dockerfile:\r\n```\r\nFROM openjdk:17-jdk-slim\r\nWORKDIR /app\r\nCOPY build/libs/Notify-2.0-all.jar app.jar\r\nCOPY src/main/resources/application.yaml resources/application.yaml\r\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;app.jar&quot;]\r\n```\r\nand this is docker compose\r\n```\r\nversion: &#39;3.7&#39;\r\nservices:\r\n  discord-bot-cyberdawn-boosty:\r\n    image: discord-bot-v2\r\n    volumes:\r\n      - type: bind\r\n        source: ./application.yaml\r\n        target: /app/resources/application.yaml\r\n```\r\n\r\nI tried `${pwd}` but it still doesn&#39;t work.\r\n\r\nI also tried this\r\n\r\n```\r\nFROM openjdk:17\r\nWORKDIR /app\r\nCOPY build/libs/Notify-2.0-all.jar app.jar\r\nCOPY src/main/resources/application.yaml /app/application.yaml\r\nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;app.jar&quot;, &quot;--spring.config.name=application&quot;, &quot;--spring.config.location=file:/app/application.yaml&quot;]\r\n```\r\n\r\n```\r\nversion: &#39;3.9&#39;\r\nservices:\r\n  test-bot:\r\n    image: test-bot-v2\r\n    volumes:\r\n      - type: bind\r\n        source: ${PWD}/application.yaml\r\n        target: /app/application.yaml\r\n```\r\nand it&#39;s still doesn&#39;t work.\r\n\r\nThis doesn&#39;t work too:\r\n```\r\ndocker run -v /home/bot-v2/cyberdawn/application.yaml:/app/application.yaml test-bot-v2\r\n```\r\n","title":"Can&#39;t mount application.yaml into docker java 8 spring","body":"<p>Can someone explain me, why it doesn't mounted and java don't read application.yaml?</p>\n<p>This is my dockerfile:</p>\n<pre><code>FROM openjdk:17-jdk-slim\nWORKDIR /app\nCOPY build/libs/Notify-2.0-all.jar app.jar\nCOPY src/main/resources/application.yaml resources/application.yaml\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;app.jar&quot;]\n</code></pre>\n<p>and this is docker compose</p>\n<pre><code>version: '3.7'\nservices:\n  discord-bot-cyberdawn-boosty:\n    image: discord-bot-v2\n    volumes:\n      - type: bind\n        source: ./application.yaml\n        target: /app/resources/application.yaml\n</code></pre>\n<p>I tried <code>${pwd}</code> but it still doesn't work.</p>\n<p>I also tried this</p>\n<pre><code>FROM openjdk:17\nWORKDIR /app\nCOPY build/libs/Notify-2.0-all.jar app.jar\nCOPY src/main/resources/application.yaml /app/application.yaml\nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;app.jar&quot;, &quot;--spring.config.name=application&quot;, &quot;--spring.config.location=file:/app/application.yaml&quot;]\n</code></pre>\n<pre><code>version: '3.9'\nservices:\n  test-bot:\n    image: test-bot-v2\n    volumes:\n      - type: bind\n        source: ${PWD}/application.yaml\n        target: /app/application.yaml\n</code></pre>\n<p>and it's still doesn't work.</p>\n<p>This doesn't work too:</p>\n<pre><code>docker run -v /home/bot-v2/cyberdawn/application.yaml:/app/application.yaml test-bot-v2\n</code></pre>\n"},{"tags":["java","selenium"],"answers":[{"tags":[],"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675452255,"creation_date":1675452255,"answer_id":75340185,"question_id":75336022,"body_markdown":"I rewrote your code to simplify things.\r\n\r\n1. I think your main issue was that the script was not waiting properly so when it printed the number of rows for the last page, it was actually printing them for the previous page. The way to prevent this is to use `ExpectedConditions.stalenessOf()`. This takes an existing element on the page and then waits for it to go stale (no longer on the page). I added this at the bottom of every loop to make sure when the &gt; button is clicked to go to the next page, the script pauses until the next page is loaded.\r\n1. I added waits, where needed\r\n1. Instead of getting a count of pages, just loop until there&#39;s no &gt; (Next) button\r\n1. Instead of getting a count of rows, just loop through all rows\r\n1. I changed the URL to navigate straight to the sale/order page to save time\r\n1. I removed the implicit wait since you shouldn&#39;t mix implicit and explicit waits according to the docs\r\n1. Removed all support methods since they were no longer needed\r\n\r\nWith all these changes, the code is much shorter, simpler, and works successfully.\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n        WebDriverManager.chromedriver().setup();\r\n        driver = new ChromeDriver();\r\n        driver.manage().window().maximize();\r\n\t\tString url = &quot;https://demo.opencart.com/admin/index.php?route=sale/order&quot;;\r\n\t\tdriver.get(url);\r\n\r\n\t\tWebDriverWait wait = new WebDriverWait(driver, 10);\r\n\t\twait.until(ExpectedConditions.visibilityOfElementLocated(By.id(&quot;input-username&quot;))).sendKeys(&quot;demo&quot;);\r\n\t\twait.until(ExpectedConditions.visibilityOfElementLocated(By.id(&quot;input-password&quot;))).sendKeys(&quot;demo&quot;);\r\n\t\twait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;i.fa-key&quot;))).click();\r\n\r\n\t\t// loop until last page is reached\r\n\t\twhile (true) {\r\n\t\t\tfor (WebElement row : wait.until(ExpectedConditions.visibilityOfAllElementsLocatedBy(By.cssSelector(&quot;table tr&quot;)))) {\r\n\t\t\t\tString orderId = row.findElement(By.xpath(&quot;./td[2]&quot;)).getText();\r\n\t\t\t\tString store = row.findElement(By.xpath(&quot;./td[3]&quot;)).getText();\r\n\t\t\t\tString customer = row.findElement(By.xpath(&quot;./td[4]&quot;)).getText();\r\n\t\t\t\tString status = row.findElement(By.xpath(&quot;./td[5]&quot;)).getText();\r\n\t\t\t\tSystem.out.println(orderId + &quot;  &quot; + store + &quot;  &quot; + customer + &quot;  &quot; + status);\r\n\t\t\t}\r\n\r\n\t\t\tList&lt;WebElement&gt; nextButton = driver.findElements(By.xpath(&quot;//a[text()=&#39;&gt;&#39;]&quot;));\r\n\t\t\tif (nextButton.isEmpty()) {\r\n\t\t\t\tbreak;\r\n\t\t\t} else {\r\n\t\t\t\tnextButton.get(0).click();\r\n\t\t\t\twait.until(ExpectedConditions.stalenessOf(nextButton.get(0)));\r\n\t\t\t}\r\n\t\t}\r\n    }","title":"Dynamic Web Table : incorrect count of rows in table","body":"<p>I rewrote your code to simplify things.</p>\n<ol>\n<li>I think your main issue was that the script was not waiting properly so when it printed the number of rows for the last page, it was actually printing them for the previous page. The way to prevent this is to use <code>ExpectedConditions.stalenessOf()</code>. This takes an existing element on the page and then waits for it to go stale (no longer on the page). I added this at the bottom of every loop to make sure when the &gt; button is clicked to go to the next page, the script pauses until the next page is loaded.</li>\n<li>I added waits, where needed</li>\n<li>Instead of getting a count of pages, just loop until there's no &gt; (Next) button</li>\n<li>Instead of getting a count of rows, just loop through all rows</li>\n<li>I changed the URL to navigate straight to the sale/order page to save time</li>\n<li>I removed the implicit wait since you shouldn't mix implicit and explicit waits according to the docs</li>\n<li>Removed all support methods since they were no longer needed</li>\n</ol>\n<p>With all these changes, the code is much shorter, simpler, and works successfully.</p>\n<pre><code>public static void main(String[] args) throws InterruptedException {\n    WebDriverManager.chromedriver().setup();\n    driver = new ChromeDriver();\n    driver.manage().window().maximize();\n    String url = &quot;https://demo.opencart.com/admin/index.php?route=sale/order&quot;;\n    driver.get(url);\n\n    WebDriverWait wait = new WebDriverWait(driver, 10);\n    wait.until(ExpectedConditions.visibilityOfElementLocated(By.id(&quot;input-username&quot;))).sendKeys(&quot;demo&quot;);\n    wait.until(ExpectedConditions.visibilityOfElementLocated(By.id(&quot;input-password&quot;))).sendKeys(&quot;demo&quot;);\n    wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;i.fa-key&quot;))).click();\n\n    // loop until last page is reached\n    while (true) {\n        for (WebElement row : wait.until(ExpectedConditions.visibilityOfAllElementsLocatedBy(By.cssSelector(&quot;table tr&quot;)))) {\n            String orderId = row.findElement(By.xpath(&quot;./td[2]&quot;)).getText();\n            String store = row.findElement(By.xpath(&quot;./td[3]&quot;)).getText();\n            String customer = row.findElement(By.xpath(&quot;./td[4]&quot;)).getText();\n            String status = row.findElement(By.xpath(&quot;./td[5]&quot;)).getText();\n            System.out.println(orderId + &quot;  &quot; + store + &quot;  &quot; + customer + &quot;  &quot; + status);\n        }\n\n        List&lt;WebElement&gt; nextButton = driver.findElements(By.xpath(&quot;//a[text()='&gt;']&quot;));\n        if (nextButton.isEmpty()) {\n            break;\n        } else {\n            nextButton.get(0).click();\n            wait.until(ExpectedConditions.stalenessOf(nextButton.get(0)));\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":448713,"reputation":304,"user_id":843075,"accept_rate":17,"display_name":"fdama"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675452255,"creation_date":1675428766,"question_id":75336022,"body_markdown":"I have code that reads the rows from a web table that consists of multiple pages and prints them. On the last page there are only 2 rows, but the code counts 10 instead (10 is the max rows on a page). When I run it in debug mode and step through, it correctly counts 2 rows. I have no idea why this is happening and would like some help on this.\r\n \r\nHere is the web table : https://demo.opencart.com/admin/index.php?route=sale/order&amp;user_token=cf5c87b778476447f8451877fae6af2f\r\n\r\nHere is where the rows are counted in my code:\r\n\r\n    //get number of rows\r\n    \t\t\tint rows = driver.findElements(By.xpath(&quot;//table[@class=&#39;table table-bordered table-hover&#39;]//tbody/tr&quot;)).size();\r\n    \t\t\tSystem.out.println(&quot;No of Rows: &quot;+rows);\r\n\r\n\r\nHere is all my code:\r\n\r\n        package mypackage;\r\n    \r\n    import java.time.Duration;\r\n    \r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.JavascriptExecutor;\r\n    import org.openqa.selenium.StaleElementReferenceException;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.WebElement;\r\n    import org.openqa.selenium.chrome.ChromeDriver;\r\n    import org.openqa.selenium.support.ui.WebDriverWait;\r\n    \r\n    import io.github.bonigarcia.wdm.WebDriverManager;\r\n    \r\n    public class DynamicWebTable {\r\n    \tstatic WebDriver driver;\r\n    \r\n    \tpublic static void main(String[] args) throws InterruptedException {\r\n    \t\tWebDriverManager.chromedriver().setup();\r\n    \t\tdriver = new ChromeDriver();\r\n    \t\t\r\n    \t\tdriver.manage().timeouts().implicitlyWait(Duration.ofSeconds(10));\r\n    \t\t\r\n    \t\tdriver.get(&quot;https://demo.opencart.com/admin/&quot;);\r\n    \t\tdriver.manage().window().maximize();\r\n    \t\t\r\n    \t\t\r\n    \t\tWebElement username = driver.findElement(By.id(&quot;input-username&quot;));\r\n    \t\tusername.clear();\r\n    \t\tusername.sendKeys(&quot;demo&quot;);\r\n    \t\t\r\n    \t\tWebElement password = driver.findElement(By.id(&quot;input-password&quot;));\r\n    \t\tpassword.clear();\r\n    \t\tpassword.sendKeys(&quot;demo&quot;);\r\n    \t\t\r\n    \t\tdriver.findElement(By.xpath(&quot;//button[normalize-space()=&#39;Login&#39;]&quot;)).click();\r\n    \t\t\r\n    \t\t//Close popup\r\n    \t\tif(driver.findElement(By.xpath(&quot;//div[@class=&#39;modal-content&#39;]&quot;)).isDisplayed()) {\r\n    \t\t\tdriver.findElement(By.xpath(&quot;//button[@class=&#39;btn-close&#39;]&quot;)).click();\r\n    \t\t}\r\n    \t\t\r\n    \t\tdriver.findElement(By.xpath(&quot;//a[normalize-space()=&#39;Sales&#39;]&quot;)).click();\r\n    \t\tdriver.findElement(By.xpath(&quot;//a[normalize-space()=&#39;Orders&#39;]&quot;)).click();\r\n    \t\t\r\n    \t\t//get total no of pages\r\n    \t\tString textWithTotalPages = driver.findElement(By.xpath(&quot;//div[@class=&#39;col-sm-6 text-end&#39;]&quot;)).getText();\r\n    \t\tint pages = getNumberOfPages(textWithTotalPages);\r\n    \t\tSystem.out.println(pages);\r\n    \t\t\r\n    \t\t//go through each page\r\n    \t\tfor(int p = 1; p &lt;= pages; p++) {\r\n    \t\t\tSystem.out.println(&quot;Page no: &quot;+p);\r\n    \t\t\t\r\n    \t\t\t**//get number of rows\r\n    \t\t\tint rows = driver.findElements(By.xpath(&quot;//table[@class=&#39;table table-bordered table-hover&#39;]//tbody/tr&quot;)).size();\r\n    \t\t\tSystem.out.println(&quot;No of Rows: &quot;+rows);**\r\n    \t\t\t\r\n    \t\t\t//read rows from page\r\n    \t\t\tfor(int r=1; r&lt;=rows; r++) {\r\n    \t\t\t\tString orderId = retryingFindClick(By.xpath(&quot;//table[@class=&#39;table table-bordered table-hover&#39;]//tbody//tr[&quot;+r+&quot;]//td[2]&quot;)); \r\n    \t\t\t\tString store = retryingFindClick(By.xpath(&quot;//table[@class=&#39;table table-bordered table-hover&#39;]//tbody//tr[&quot;+r+&quot;]//td[3]&quot;));\r\n    \t\t\t\tString customer = retryingFindClick(By.xpath(&quot;//table[@class=&#39;table table-bordered table-hover&#39;]//tbody//tr[&quot;+r+&quot;]//td[4]&quot;));\r\n    \t\t\t\tString status = retryingFindClick(By.xpath(&quot;//table[@class=&#39;table table-bordered table-hover&#39;]//tbody//tr[\\&quot;+r+\\&quot;]//td[5]&quot;));\r\n    \t\t\t\t\r\n    \t\t\t\tSystem.out.println(orderId+ &quot;  &quot;+store+&quot;  &quot;+customer+&quot;  &quot;+status);\r\n    \t\t\t\t\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\t//stop when  finished with the last page\r\n    \t\t\tif(p == pages) {\r\n    \t\t\t\tbreak;\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\t//click next page\r\n    \t\t\tString nextPage = Integer.toString(p + 1);\r\n    \t\t\t\r\n    //\t\t\ttry {\r\n    //\t\t\t\tdriver.findElement(By.xpath(&quot;//ul[@class=&#39;pagination&#39;]//li//a[text()=&#39;&quot;+nextPage+&quot;&#39;]&quot;)).click(); \r\n    //\t\t\t}catch(ElementClickInterceptedException e) {}\r\n    \t\t\t\r\n    \t\t\tJavascriptExecutor js= (JavascriptExecutor) driver;\r\n    \t\t\tjs.executeScript(&quot;window.scrollTo(0,document.body.scrollHeight)&quot;);\r\n    \t\t\tThread.sleep(2000);\r\n    \t\t\tdriver.findElement(By.xpath(&quot;//ul[@class=&#39;pagination&#39;]//li//a[text()=&#39;&quot;+nextPage+&quot;&#39;]&quot;)).click(); \r\n    \t\t\t//waitAndLocate(By.xpath(&quot;//ul[@class=&#39;pagination&#39;]//li//a[text()=&#39;&quot;+nextPage+&quot;&#39;]&quot;)).click();\r\n    \t\t\t\r\n    \t\t\tSystem.out.println(&quot;Clicked page: &quot;+nextPage);\r\n    \t\t\t\r\n    \t\t}\r\n    \t\t\r\n    \t\t\r\n    \t\tdriver.quit();\r\n    \t}\r\n    \t\t\r\n    \t//extract number of pages from String \r\n    \tpublic static int getNumberOfPages(String text){\r\n    \t\t\r\n    \t\treturn Integer.valueOf(text.substring(text.indexOf(&quot;(&quot;)+1, text.indexOf(&quot;Pages&quot;)-1));\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \tpublic static String retryingFindClick(By by) {\r\n    \t    //boolean result = false;\r\n    \t\tString s = null;\r\n    \t    int attempts = 0;\r\n    \t    while(attempts &lt; 2) {\r\n    \t        try {\r\n    \t            s = driver.findElement(by).getText();\r\n    \t            //result = true;\r\n    \t            break;\r\n    \t        } catch(StaleElementReferenceException e) {\r\n    \t        }\r\n    \t        attempts++;\r\n    \t    }\r\n    \t    return s;\r\n    \t}\r\n    \t\r\n    \tpublic static WebElement waitAndLocate(By by) {\r\n    \t\treturn new WebDriverWait(driver, Duration.ofSeconds(2))\r\n    \t\t\t\t.until(driver -&gt; driver.findElement(by));\r\n    \t}\r\n    \t\t\r\n    \t\r\n    }\r\n    \r\n    \r\n     \r\n    \r\n      ","title":"Dynamic Web Table : incorrect count of rows in table","body":"<p>I have code that reads the rows from a web table that consists of multiple pages and prints them. On the last page there are only 2 rows, but the code counts 10 instead (10 is the max rows on a page). When I run it in debug mode and step through, it correctly counts 2 rows. I have no idea why this is happening and would like some help on this.</p>\n<p>Here is the web table : <a href=\"https://demo.opencart.com/admin/index.php?route=sale/order&amp;user_token=cf5c87b778476447f8451877fae6af2f\" rel=\"nofollow noreferrer\">https://demo.opencart.com/admin/index.php?route=sale/order&amp;user_token=cf5c87b778476447f8451877fae6af2f</a></p>\n<p>Here is where the rows are counted in my code:</p>\n<pre><code>//get number of rows\n            int rows = driver.findElements(By.xpath(&quot;//table[@class='table table-bordered table-hover']//tbody/tr&quot;)).size();\n            System.out.println(&quot;No of Rows: &quot;+rows);\n</code></pre>\n<p>Here is all my code:</p>\n<pre><code>    package mypackage;\n\nimport java.time.Duration;\n\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.JavascriptExecutor;\nimport org.openqa.selenium.StaleElementReferenceException;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.support.ui.WebDriverWait;\n\nimport io.github.bonigarcia.wdm.WebDriverManager;\n\npublic class DynamicWebTable {\n    static WebDriver driver;\n\n    public static void main(String[] args) throws InterruptedException {\n        WebDriverManager.chromedriver().setup();\n        driver = new ChromeDriver();\n        \n        driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(10));\n        \n        driver.get(&quot;https://demo.opencart.com/admin/&quot;);\n        driver.manage().window().maximize();\n        \n        \n        WebElement username = driver.findElement(By.id(&quot;input-username&quot;));\n        username.clear();\n        username.sendKeys(&quot;demo&quot;);\n        \n        WebElement password = driver.findElement(By.id(&quot;input-password&quot;));\n        password.clear();\n        password.sendKeys(&quot;demo&quot;);\n        \n        driver.findElement(By.xpath(&quot;//button[normalize-space()='Login']&quot;)).click();\n        \n        //Close popup\n        if(driver.findElement(By.xpath(&quot;//div[@class='modal-content']&quot;)).isDisplayed()) {\n            driver.findElement(By.xpath(&quot;//button[@class='btn-close']&quot;)).click();\n        }\n        \n        driver.findElement(By.xpath(&quot;//a[normalize-space()='Sales']&quot;)).click();\n        driver.findElement(By.xpath(&quot;//a[normalize-space()='Orders']&quot;)).click();\n        \n        //get total no of pages\n        String textWithTotalPages = driver.findElement(By.xpath(&quot;//div[@class='col-sm-6 text-end']&quot;)).getText();\n        int pages = getNumberOfPages(textWithTotalPages);\n        System.out.println(pages);\n        \n        //go through each page\n        for(int p = 1; p &lt;= pages; p++) {\n            System.out.println(&quot;Page no: &quot;+p);\n            \n            **//get number of rows\n            int rows = driver.findElements(By.xpath(&quot;//table[@class='table table-bordered table-hover']//tbody/tr&quot;)).size();\n            System.out.println(&quot;No of Rows: &quot;+rows);**\n            \n            //read rows from page\n            for(int r=1; r&lt;=rows; r++) {\n                String orderId = retryingFindClick(By.xpath(&quot;//table[@class='table table-bordered table-hover']//tbody//tr[&quot;+r+&quot;]//td[2]&quot;)); \n                String store = retryingFindClick(By.xpath(&quot;//table[@class='table table-bordered table-hover']//tbody//tr[&quot;+r+&quot;]//td[3]&quot;));\n                String customer = retryingFindClick(By.xpath(&quot;//table[@class='table table-bordered table-hover']//tbody//tr[&quot;+r+&quot;]//td[4]&quot;));\n                String status = retryingFindClick(By.xpath(&quot;//table[@class='table table-bordered table-hover']//tbody//tr[\\&quot;+r+\\&quot;]//td[5]&quot;));\n                \n                System.out.println(orderId+ &quot;  &quot;+store+&quot;  &quot;+customer+&quot;  &quot;+status);\n                \n            }\n            \n            //stop when  finished with the last page\n            if(p == pages) {\n                break;\n            }\n            \n            //click next page\n            String nextPage = Integer.toString(p + 1);\n            \n//          try {\n//              driver.findElement(By.xpath(&quot;//ul[@class='pagination']//li//a[text()='&quot;+nextPage+&quot;']&quot;)).click(); \n//          }catch(ElementClickInterceptedException e) {}\n            \n            JavascriptExecutor js= (JavascriptExecutor) driver;\n            js.executeScript(&quot;window.scrollTo(0,document.body.scrollHeight)&quot;);\n            Thread.sleep(2000);\n            driver.findElement(By.xpath(&quot;//ul[@class='pagination']//li//a[text()='&quot;+nextPage+&quot;']&quot;)).click(); \n            //waitAndLocate(By.xpath(&quot;//ul[@class='pagination']//li//a[text()='&quot;+nextPage+&quot;']&quot;)).click();\n            \n            System.out.println(&quot;Clicked page: &quot;+nextPage);\n            \n        }\n        \n        \n        driver.quit();\n    }\n        \n    //extract number of pages from String \n    public static int getNumberOfPages(String text){\n        \n        return Integer.valueOf(text.substring(text.indexOf(&quot;(&quot;)+1, text.indexOf(&quot;Pages&quot;)-1));\n        \n    }\n    \n    public static String retryingFindClick(By by) {\n        //boolean result = false;\n        String s = null;\n        int attempts = 0;\n        while(attempts &lt; 2) {\n            try {\n                s = driver.findElement(by).getText();\n                //result = true;\n                break;\n            } catch(StaleElementReferenceException e) {\n            }\n            attempts++;\n        }\n        return s;\n    }\n    \n    public static WebElement waitAndLocate(By by) {\n        return new WebDriverWait(driver, Duration.ofSeconds(2))\n                .until(driver -&gt; driver.findElement(by));\n    }\n        \n    \n}\n\n\n \n\n  \n</code></pre>\n"},{"tags":["java","spring","jpa","spring-data-jpa","lombok"],"answers":[{"comments":[{"owner":{"account_id":12272233,"reputation":58,"user_id":8957088,"display_name":"Pogryziony"},"score":0,"creation_date":1675452324,"post_id":75340132,"comment_id":132939682,"body_markdown":"So changing my fields to final and adding @NonNull annotation should solve my problem?","body":"So changing my fields to final and adding @NonNull annotation should solve my problem?"},{"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"score":1,"creation_date":1675452640,"post_id":75340132,"comment_id":132939755,"body_markdown":"you haven&#39;t specified what you want to achieve, which fields should present in your constructor depends on your business requirements. What I can say, specifying all the fields in constructor of entity class - is really bad idea. You should choose by yourself which fields you want to place into constructor, so, in your case you don&#39;t need to use lombok for generating constructor at all, except, for example, @NoArgsConsctructor, since you need it because your class is entity class.","body":"you haven&#39;t specified what you want to achieve, which fields should present in your constructor depends on your business requirements. What I can say, specifying all the fields in constructor of entity class - is really bad idea. You should choose by yourself which fields you want to place into constructor, so, in your case you don&#39;t need to use lombok for generating constructor at all, except, for example, @NoArgsConsctructor, since you need it because your class is entity class."},{"owner":{"account_id":12272233,"reputation":58,"user_id":8957088,"display_name":"Pogryziony"},"score":0,"creation_date":1675452911,"post_id":75340132,"comment_id":132939824,"body_markdown":"Alright, thank you. \nIt is working now just fine, and I will apply your advice in code.","body":"Alright, thank you.  It is working now just fine, and I will apply your advice in code."}],"tags":[],"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675452237,"creation_date":1675451847,"answer_id":75340132,"question_id":75340070,"body_markdown":"As [docs][1] of `@RequiredArgsConstructor` suggests:\r\n\r\n&gt; Generates a constructor with required arguments. Required arguments\r\n&gt; are final fields and fields with constraints such as @NonNull.\r\n\r\nSo, your class does not have fields that match those criteria\r\n\r\nWhereas [`@AllArgsConstructor`][2] :\r\n\r\n&gt; Generates an all-args constructor. An all-args constructor requires\r\n&gt; one argument for every field in the class.\r\n\r\nSo, everything works as expected.\r\n\r\n\r\n  [1]: https://projectlombok.org/api/lombok/RequiredArgsConstructor\r\n  [2]: https://projectlombok.org/api/lombok/AllArgsConstructor","title":"How should I fix &quot;Expected 0 arguments but found 3&quot; error if I want to use Lombok RequiredArgsConstructor annotation?","body":"<p>As <a href=\"https://projectlombok.org/api/lombok/RequiredArgsConstructor\" rel=\"nofollow noreferrer\">docs</a> of <code>@RequiredArgsConstructor</code> suggests:</p>\n<blockquote>\n<p>Generates a constructor with required arguments. Required arguments\nare final fields and fields with constraints such as @NonNull.</p>\n</blockquote>\n<p>So, your class does not have fields that match those criteria</p>\n<p>Whereas <a href=\"https://projectlombok.org/api/lombok/AllArgsConstructor\" rel=\"nofollow noreferrer\"><code>@AllArgsConstructor</code></a> :</p>\n<blockquote>\n<p>Generates an all-args constructor. An all-args constructor requires\none argument for every field in the class.</p>\n</blockquote>\n<p>So, everything works as expected.</p>\n"}],"owner":{"account_id":12272233,"reputation":58,"user_id":8957088,"display_name":"Pogryziony"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1030,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75340132,"answer_count":1,"score":0,"last_activity_date":1675452237,"creation_date":1675451367,"question_id":75340070,"body_markdown":"I am using Spring, JPA, Java17, MySQL.  \r\nIDE: IntelliJ IDEA 2022.2.4  \r\nJDK: Amazon Coretto 17.0.6\r\n\r\nI am getting an error &quot;Expected 0 arguments but found 3&quot;. (image)\r\n\r\n[![enter image description here](https://i.stack.imgur.com/4iozN.png)](https://i.stack.imgur.com/4iozN.png)\r\n\r\nHere is my Article entity class code and I am using Lombok to remove boilerplate code. For some reason RequiredArgsConstructor annotation cannot be well managed in test class and I need to create actual constructor to be able to work on it.\r\n\r\n```\r\n@Entity\r\n@Getter\r\n@Setter\r\n@RequiredArgsConstructor\r\n@Table(name = &quot;article&quot;, schema = &quot;chitchat&quot;)\r\npublic class Article {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;title&quot;, nullable = false, length = 150)\r\n    private String title;\r\n\r\n    @OneToOne\r\n    @JoinColumn(name = &quot;category_id&quot;)\r\n    private Category category;\r\n\r\n    @Column(name = &quot;comment_count&quot;, nullable = false)\r\n    private int commentCount;\r\n\r\n    @Column(name = &quot;view_count&quot;, nullable = false)\r\n    private int viewCount;\r\n\r\n    @ToString.Exclude\r\n    @OneToMany(mappedBy = &quot;article&quot;, orphanRemoval = true)\r\n    private Set&lt;Tag&gt; tags = new LinkedHashSet&lt;&gt;();\r\n\r\n    @Column(name = &quot;modification_date&quot;)\r\n    private LocalDateTime modificationDate;\r\n\r\n    @Column(name = &quot;creation_date&quot;, nullable = false)\r\n    private LocalDateTime creationDate;\r\n\r\n    @Column(name = &quot;content&quot;, nullable = false, length = 50000)\r\n    private String content;\r\n\r\n    @OneToOne(optional = false, orphanRemoval = true)\r\n    @JoinColumn(name = &quot;author_id&quot;, nullable = false)\r\n    private User author;\r\n\r\n    @Column(name = &quot;published&quot;, nullable = false)\r\n    private Boolean published = false;\r\n\r\n    @OneToMany(mappedBy = &quot;article&quot;)\r\n    private Set&lt;Comment&gt; comments = new LinkedHashSet&lt;&gt;();\r\n}\r\n```\r\n\r\nI tried using AllArgsConstructor and creating constructor by hand (works fine).","title":"How should I fix &quot;Expected 0 arguments but found 3&quot; error if I want to use Lombok RequiredArgsConstructor annotation?","body":"<p>I am using Spring, JPA, Java17, MySQL.<br />\nIDE: IntelliJ IDEA 2022.2.4<br />\nJDK: Amazon Coretto 17.0.6</p>\n<p>I am getting an error &quot;Expected 0 arguments but found 3&quot;. (image)</p>\n<p><a href=\"https://i.stack.imgur.com/4iozN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4iozN.png\" alt=\"enter image description here\" /></a></p>\n<p>Here is my Article entity class code and I am using Lombok to remove boilerplate code. For some reason RequiredArgsConstructor annotation cannot be well managed in test class and I need to create actual constructor to be able to work on it.</p>\n<pre><code>@Entity\n@Getter\n@Setter\n@RequiredArgsConstructor\n@Table(name = &quot;article&quot;, schema = &quot;chitchat&quot;)\npublic class Article {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(name = &quot;title&quot;, nullable = false, length = 150)\n    private String title;\n\n    @OneToOne\n    @JoinColumn(name = &quot;category_id&quot;)\n    private Category category;\n\n    @Column(name = &quot;comment_count&quot;, nullable = false)\n    private int commentCount;\n\n    @Column(name = &quot;view_count&quot;, nullable = false)\n    private int viewCount;\n\n    @ToString.Exclude\n    @OneToMany(mappedBy = &quot;article&quot;, orphanRemoval = true)\n    private Set&lt;Tag&gt; tags = new LinkedHashSet&lt;&gt;();\n\n    @Column(name = &quot;modification_date&quot;)\n    private LocalDateTime modificationDate;\n\n    @Column(name = &quot;creation_date&quot;, nullable = false)\n    private LocalDateTime creationDate;\n\n    @Column(name = &quot;content&quot;, nullable = false, length = 50000)\n    private String content;\n\n    @OneToOne(optional = false, orphanRemoval = true)\n    @JoinColumn(name = &quot;author_id&quot;, nullable = false)\n    private User author;\n\n    @Column(name = &quot;published&quot;, nullable = false)\n    private Boolean published = false;\n\n    @OneToMany(mappedBy = &quot;article&quot;)\n    private Set&lt;Comment&gt; comments = new LinkedHashSet&lt;&gt;();\n}\n</code></pre>\n<p>I tried using AllArgsConstructor and creating constructor by hand (works fine).</p>\n"},{"tags":["java","spring","spring-mvc","authentication","spring-security"],"comments":[{"owner":{"account_id":2562197,"reputation":859,"user_id":2223111,"display_name":"Asura"},"score":0,"creation_date":1439600506,"post_id":32020405,"comment_id":51943300,"body_markdown":"@Inject is part of import javax.inject.Inject; so if you get type error its because the jar is not part of your project.You need to edit your main pom.xml/file with dependency to add it or download the jar and add it to the build path.You took userService from the other example tread but it can be anything just so you know.","body":"@Inject is part of import javax.inject.Inject; so if you get type error its because the jar is not part of your project.You need to edit your main pom.xml/file with dependency to add it or download the jar and add it to the build path.You took userService from the other example tread but it can be anything just so you know."},{"owner":{"account_id":2562197,"reputation":859,"user_id":2223111,"display_name":"Asura"},"score":0,"creation_date":1439603035,"post_id":32020405,"comment_id":51943634,"body_markdown":"you add the depency given by maven repository, you put this within the &lt;dependencies&gt; tag in pom.xml.                                                          &lt;dependency&gt;\n\t\t\t&lt;groupId&gt;javax.inject&lt;/groupId&gt;\n\t\t\t&lt;artifactId&gt;javax.inject&lt;/artifactId&gt;\n\t\t\t&lt;version&gt;1&lt;/version&gt;\n&lt;/dependency&gt;","body":"you add the depency given by maven repository, you put this within the &lt;dependencies&gt; tag in pom.xml.                                                          &lt;dependency&gt; \t\t\t&lt;groupId&gt;javax.inject&lt;/groupId&gt; \t\t\t&lt;artifactId&gt;javax.inject&lt;/artifactId&gt; \t\t\t&lt;version&gt;1&lt;/version&gt; &lt;/dependency&gt;"},{"owner":{"account_id":4630748,"reputation":1789,"user_id":3753344,"accept_rate":33,"display_name":"MS Ibrahim"},"score":0,"creation_date":1439874520,"post_id":32020405,"comment_id":52025825,"body_markdown":"can i know why you are using hibernate over here? I think its not needed","body":"can i know why you are using hibernate over here? I think its not needed"},{"owner":{"account_id":4630748,"reputation":1789,"user_id":3753344,"accept_rate":33,"display_name":"MS Ibrahim"},"score":0,"creation_date":1439876699,"post_id":32020405,"comment_id":52026609,"body_markdown":"have u connected with ur db. which db r u using?? if connected means then no need to change.if there is a need such that if some thing can be done inside Spring JdbcTemplate means i will let you know.","body":"have u connected with ur db. which db r u using?? if connected means then no need to change.if there is a need such that if some thing can be done inside Spring JdbcTemplate means i will let you know."},{"owner":{"account_id":4630748,"reputation":1789,"user_id":3753344,"accept_rate":33,"display_name":"MS Ibrahim"},"score":0,"creation_date":1439877307,"post_id":32020405,"comment_id":52026832,"body_markdown":"ok..i will have a look into it","body":"ok..i will have a look into it"},{"owner":{"account_id":4630748,"reputation":1789,"user_id":3753344,"accept_rate":33,"display_name":"MS Ibrahim"},"score":0,"creation_date":1439879785,"post_id":32020405,"comment_id":52027925,"body_markdown":"if username+password is working. then adding pincode should also work as per my code..","body":"if username+password is working. then adding pincode should also work as per my code.."},{"owner":{"account_id":4630748,"reputation":1789,"user_id":3753344,"accept_rate":33,"display_name":"MS Ibrahim"},"score":0,"creation_date":1440437842,"post_id":32020405,"comment_id":52261896,"body_markdown":"2 step authentication is easy and possible too..","body":"2 step authentication is easy and possible too.."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1441023805,"post_id":32020405,"comment_id":52497307,"body_markdown":"Why are you mixing xml and java configuration for security? The xml stuff is breaking everything... The `/**` permits access to everyone, basically rendering your further configuration useless. Next to that your java configuraiotn isn&#39;t doing anything with the additional configuration stuff (the filter isn&#39;t registered). So not sure what you are trying to do but due to the complexity you introduced yourself (combining xml and java configuration) it doesn&#39;t work. Choose either xml or java don&#39;t try to mix them.","body":"Why are you mixing xml and java configuration for security? The xml stuff is breaking everything... The <code>&#47;**</code> permits access to everyone, basically rendering your further configuration useless. Next to that your java configuraiotn isn&#39;t doing anything with the additional configuration stuff (the filter isn&#39;t registered). So not sure what you are trying to do but due to the complexity you introduced yourself (combining xml and java configuration) it doesn&#39;t work. Choose either xml or java don&#39;t try to mix them."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1441084247,"post_id":32020405,"comment_id":52522419,"body_markdown":"The access denied is due to the fact your roles don&#39;t match, when the user logs in you give him the role `ROLE_PINCODE_USER`. However your security requires a role `registered` those don&#39;t match hence a 403.","body":"The access denied is due to the fact your roles don&#39;t match, when the user logs in you give him the role <code>ROLE_PINCODE_USER</code>. However your security requires a role <code>registered</code> those don&#39;t match hence a 403."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1441173166,"post_id":32020405,"comment_id":52564968,"body_markdown":"Because that is how you have written your `AuthenticationProvider`. You are always returning an `Authentication` object. You aren&#39;t checking anything or throwing exceptions. So everyone will get the role `registered`.","body":"Because that is how you have written your <code>AuthenticationProvider</code>. You are always returning an <code>Authentication</code> object. You aren&#39;t checking anything or throwing exceptions. So everyone will get the role <code>registered</code>."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1441192499,"post_id":32020405,"comment_id":52576249,"body_markdown":"I don&#39;t know either because that is the code YOU need to write. YOU know the specs we don&#39;t. Also you should be throwing an exception imho when the username/password doesn&#39;t match. To  me it looks like you are trying to put 3 tutorials together without knowing how the framework actually works.","body":"I don&#39;t know either because that is the code YOU need to write. YOU know the specs we don&#39;t. Also you should be throwing an exception imho when the username/password doesn&#39;t match. To  me it looks like you are trying to put 3 tutorials together without knowing how the framework actually works."}],"answers":[{"tags":[],"owner":{"account_id":3386246,"reputation":2684,"user_id":2842142,"display_name":"Apokralipsa"},"comment_count":0,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1439738752,"creation_date":1439634142,"answer_id":32023772,"question_id":32020405,"body_markdown":"First, some explanation about the interfaces you are working with and the role they play in the authentication process:\r\n\r\n - [`Authentication`][1] - represents the result of authenticating a user. Holds the authorities granted to that user and any additional details that may be needed about the user. As there is no way for the framework to know, what details are going to be needed, the authentication object has a [`getDetails`][2] method that can return any object\r\n \r\n - [`AuthenticationProvider`][3] - object that can create an `Authentication` object in some way. To make them more reusable, some (or most) of `AuthenticationProvider`s refrain from setting the user details on the `Authentication` object, as each application may need specific user details. Instead they delegate the process of resolving the user details to a settable `UserDetailsService`\r\n - [`UserDetailsService`][4] - a [strategy][5] for retrieving the user details required in your application.\r\n\r\nSo, if you are creating a custom `AuthenticationProvider` you may not even need to implement it in a way that requires a `UserDetailsService`. The decission is up to you and depends, on whether you plan on reusing your implementation in other projects.\r\n\r\nAs for the compilation problems in your code, you are mixing two ways of providing the `UserDetailsService`. In the `CustomAuthenticationProvider` you have annotated the `userService` field with the `@Inject` annotation .This means, that the container (Spring application context in your case) is to find a suitable implementation and inject it into that field at runtime using reflection. The process of setting this field by the context is called dependency injection. In the `SecurityConfig` class you are trying to provide the implementation yourself by setting the field through the `setUserDetailsService` method that does not exist in your class.\r\n\r\nTo resolve this problem you need to decide to use one of the ways to provide the UserDetails service and either:\r\n\r\n - remove the `@Inject` annotation and create the `setUserDetailsService` method, or\r\n - remove the line when you are calling the non-existant method and declare your implementation of the `UserDetailsService` as a bean\r\n\r\nAs for which of the ways should you choose, the dependecy injection way may by better if you can find a way of making your `SecurityConfig` class reusable in other projects. In that case you could just import it (by using the `@Import` annotaion) and declare a different `UserDetailsSerice` implementation as a bean in your next application and have it working.\r\n\r\nUsually, classes like the `SecurityConfig` are not really reusable, so creating the setter and removing the dependency injection would probably be my first choice.\r\n\r\n**EDIT**\r\n\r\nA working, albeit a simplistic implementation (based heavily on this [blog entry][6]) would be:\r\n\r\n    public class CustomAuthenticationProvider implements AuthenticationProvider{\r\n    \r\n        @Override\r\n        public Authentication authenticate(Authentication authentication) throws AuthenticationException {\r\n            String name = authentication.getName();\r\n            String password = authentication.getCredentials().toString();\r\n            List&lt;GrantedAuthority&gt; grantedAuths = new ArrayList&lt;&gt;();\r\n            if (name.equals(&quot;admin&quot;) &amp;&amp; password.equals(&quot;system&quot;)) {\r\n                grantedAuths.add(new SimpleGrantedAuthority(&quot;ROLE_ADMIN&quot;));  \r\n            } \r\n            if(pincodeEntered(name)){\r\n                grantedAuths.add(new SimpleGrantedAuthority(&quot;ROLE_PINCODE_USER&quot;));  \r\n            }\r\n            Authentication auth = new UsernamePasswordAuthenticationToken(name, password, grantedAuths);\r\n        }\r\n    \r\n        @Override\r\n        public boolean supports(Class&lt;?&gt; authentication) {\r\n            return authentication.equals(UsernamePasswordAuthenticationToken.class);\r\n        }\r\n\r\n        private boolean pincodeEntered(String userName){\r\n            // do your check here\r\n            return true;\r\n        }\r\n    }\r\n\r\n \r\nThen in your config class change the following method:\r\n\r\n    @Bean\r\n    AuthenticationProvider customAuthenticationProvider() {\r\n            return new CustomAuthenticationProvider();\r\n    }\r\n     \r\n\r\n \r\n\r\n\r\n  [1]: http://docs.spring.io/spring-security/site/docs/current/apidocs/org/springframework/security/core/Authentication.html\r\n  [2]: http://docs.spring.io/spring-security/site/docs/current/apidocs/org/springframework/security/core/Authentication.html#getDetails%28%29\r\n  [3]: http://docs.spring.io/spring-security/site/docs/current/apidocs/org/springframework/security/authentication/AuthenticationProvider.html\r\n  [4]: http://docs.spring.io/autorepo/docs/spring-security/3.2.2.RELEASE/apidocs/org/springframework/security/core/userdetails/UserDetailsService.html\r\n  [5]: https://en.wikipedia.org/wiki/Strategy_pattern\r\n  [6]: https://danielkaes.wordpress.com/2013/02/20/custom-authentication-provider-in-spring/","title":"Using Java configuration for n-factor authentication","body":"<p>First, some explanation about the interfaces you are working with and the role they play in the authentication process:</p>\n\n<ul>\n<li><p><a href=\"http://docs.spring.io/spring-security/site/docs/current/apidocs/org/springframework/security/core/Authentication.html\"><code>Authentication</code></a> - represents the result of authenticating a user. Holds the authorities granted to that user and any additional details that may be needed about the user. As there is no way for the framework to know, what details are going to be needed, the authentication object has a <a href=\"http://docs.spring.io/spring-security/site/docs/current/apidocs/org/springframework/security/core/Authentication.html#getDetails%28%29\"><code>getDetails</code></a> method that can return any object</p></li>\n<li><p><a href=\"http://docs.spring.io/spring-security/site/docs/current/apidocs/org/springframework/security/authentication/AuthenticationProvider.html\"><code>AuthenticationProvider</code></a> - object that can create an <code>Authentication</code> object in some way. To make them more reusable, some (or most) of <code>AuthenticationProvider</code>s refrain from setting the user details on the <code>Authentication</code> object, as each application may need specific user details. Instead they delegate the process of resolving the user details to a settable <code>UserDetailsService</code></p></li>\n<li><a href=\"http://docs.spring.io/autorepo/docs/spring-security/3.2.2.RELEASE/apidocs/org/springframework/security/core/userdetails/UserDetailsService.html\"><code>UserDetailsService</code></a> - a <a href=\"https://en.wikipedia.org/wiki/Strategy_pattern\">strategy</a> for retrieving the user details required in your application.</li>\n</ul>\n\n<p>So, if you are creating a custom <code>AuthenticationProvider</code> you may not even need to implement it in a way that requires a <code>UserDetailsService</code>. The decission is up to you and depends, on whether you plan on reusing your implementation in other projects.</p>\n\n<p>As for the compilation problems in your code, you are mixing two ways of providing the <code>UserDetailsService</code>. In the <code>CustomAuthenticationProvider</code> you have annotated the <code>userService</code> field with the <code>@Inject</code> annotation .This means, that the container (Spring application context in your case) is to find a suitable implementation and inject it into that field at runtime using reflection. The process of setting this field by the context is called dependency injection. In the <code>SecurityConfig</code> class you are trying to provide the implementation yourself by setting the field through the <code>setUserDetailsService</code> method that does not exist in your class.</p>\n\n<p>To resolve this problem you need to decide to use one of the ways to provide the UserDetails service and either:</p>\n\n<ul>\n<li>remove the <code>@Inject</code> annotation and create the <code>setUserDetailsService</code> method, or</li>\n<li>remove the line when you are calling the non-existant method and declare your implementation of the <code>UserDetailsService</code> as a bean</li>\n</ul>\n\n<p>As for which of the ways should you choose, the dependecy injection way may by better if you can find a way of making your <code>SecurityConfig</code> class reusable in other projects. In that case you could just import it (by using the <code>@Import</code> annotaion) and declare a different <code>UserDetailsSerice</code> implementation as a bean in your next application and have it working.</p>\n\n<p>Usually, classes like the <code>SecurityConfig</code> are not really reusable, so creating the setter and removing the dependency injection would probably be my first choice.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>A working, albeit a simplistic implementation (based heavily on this <a href=\"https://danielkaes.wordpress.com/2013/02/20/custom-authentication-provider-in-spring/\">blog entry</a>) would be:</p>\n\n<pre><code>public class CustomAuthenticationProvider implements AuthenticationProvider{\n\n    @Override\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\n        String name = authentication.getName();\n        String password = authentication.getCredentials().toString();\n        List&lt;GrantedAuthority&gt; grantedAuths = new ArrayList&lt;&gt;();\n        if (name.equals(\"admin\") &amp;&amp; password.equals(\"system\")) {\n            grantedAuths.add(new SimpleGrantedAuthority(\"ROLE_ADMIN\"));  \n        } \n        if(pincodeEntered(name)){\n            grantedAuths.add(new SimpleGrantedAuthority(\"ROLE_PINCODE_USER\"));  \n        }\n        Authentication auth = new UsernamePasswordAuthenticationToken(name, password, grantedAuths);\n    }\n\n    @Override\n    public boolean supports(Class&lt;?&gt; authentication) {\n        return authentication.equals(UsernamePasswordAuthenticationToken.class);\n    }\n\n    private boolean pincodeEntered(String userName){\n        // do your check here\n        return true;\n    }\n}\n</code></pre>\n\n<p>Then in your config class change the following method:</p>\n\n<pre><code>@Bean\nAuthenticationProvider customAuthenticationProvider() {\n        return new CustomAuthenticationProvider();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4630748,"reputation":1789,"user_id":3753344,"accept_rate":33,"display_name":"MS Ibrahim"},"comment_count":0,"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1440994077,"creation_date":1439876439,"answer_id":32064345,"question_id":32020405,"body_markdown":"The first thing we need to do is extend the [UsernamePasswordAuthenticationFilter][1] class so that it can handle a second input field.\r\n\r\n    public class TwoFactorAuthenticationFilter extends UsernamePasswordAuthenticationFilter\r\n    {\r\n        private String extraParameter = &quot;extra&quot;;\r\n        private String delimiter = &quot;:&quot;;\r\n        //getters and setters\r\n\r\n        @Override\r\n        protected String obtainUsername(HttpServletRequest request)\r\n        {\r\n            String username = request.getParameter(getUsernameParameter());\r\n            String extraInput = request.getParameter(getExtraParameter());\r\n            String combinedUsername = username + getDelimiter() + extraInput;\r\n            return combinedUsername;\r\n        }\r\n    \r\n    }\r\n\r\n\r\n\r\n**obtainUsername()** This method is to retrieve the username and “extra” input field from the HttpServletRequest object that’s passed in. \r\n\r\nIt then concatenates these two values into one string, separating them by the delimiter string (a colon, by default). \r\n\r\nIt then returns this combined string. The parameter from which the “extra” input field is read is extra by default.\r\n\r\n**UserDetailsService** should look like this:\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String input) throws UsernameNotFoundException, DataAccessException\r\n    {\r\n        String[] split = input.split(&quot;:&quot;);\r\n        if(split.length &lt; 2)\r\n        {\r\n            throw new UsernameNotFoundException(&quot;Must specify both username and corporate domain&quot;);\r\n        }\r\n    \r\n        String username = split[0];\r\n        String domain = split[1];\r\n        User user = userDao.findByUsernameAndDomain(username, domain);\r\n        if(user == null)\r\n        {\r\n            throw new UsernameNotFoundException(&quot;Invalid username or corporate domain&quot;);\r\n        }\r\n        return user;\r\n    }\r\n\r\nSplit the given username into its two components: the username and the extra field. In this example, the extra field is the user’s corporate domain. \r\n\r\nOnce we have the username and the domain, we can use our DAO to find the matching user.\r\n\r\nLast Puzzle:\r\n\r\n**TwoFactorAuthenticationFilter:**\r\n\r\n    \r\n        &lt;http use-expressions=&quot;true&quot; auto-config=&quot;false&quot; entry-point-ref=&quot;loginUrlAuthenticationEntryPoint&quot;&gt;\r\n            &lt;intercept-url pattern=&quot;/secured&quot; access=&quot;isAuthenticated()&quot; /&gt;\r\n            &lt;intercept-url pattern=&quot;/**&quot; access=&quot;permitAll&quot; /&gt;\r\n            &lt;custom-filter position=&quot;FORM_LOGIN_FILTER&quot; ref=&quot;twoFactorAuthenticationFilter&quot; /&gt;\r\n            &lt;logout logout-url=&quot;/logout&quot; /&gt;\r\n        &lt;/http&gt;\r\n    \r\n        &lt;authentication-manager alias=&quot;authenticationManager&quot;&gt;\r\n            &lt;authentication-provider ref=&quot;authenticationProvider&quot; /&gt;\r\n        &lt;/authentication-manager&gt;\r\n    \r\n        &lt;beans:bean id=&quot;authenticationProvider&quot; class=&quot;org.springframework.security.authentication.dao.DaoAuthenticationProvider&quot;&gt;\r\n            &lt;beans:property name=&quot;passwordEncoder&quot;&gt;\r\n                &lt;beans:bean class=&quot;org.springframework.security.authentication.encoding.ShaPasswordEncoder&quot; /&gt;\r\n            &lt;/beans:property&gt;\r\n            &lt;beans:property name=&quot;userDetailsService&quot; ref=&quot;userService&quot; /&gt;\r\n        &lt;/beans:bean&gt;\r\n    \r\n        &lt;beans:bean id=&quot;userService&quot; class=&quot;com.awnry.springexample.UserDetailsServiceImpl&quot; /&gt;\r\n    \r\n        &lt;beans:bean id=&quot;loginUrlAuthenticationEntryPoint&quot; class=&quot;org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint&quot;&gt;\r\n            &lt;beans:property name=&quot;loginFormUrl&quot; value=&quot;/login&quot; /&gt;\r\n        &lt;/beans:bean&gt;\r\n    \r\n        &lt;beans:bean id=&quot;twoFactorAuthenticationFilter&quot; class=&quot;com.awnry.springexample.TwoFactorAuthenticationFilter&quot;&gt;\r\n            &lt;beans:property name=&quot;authenticationManager&quot; ref=&quot;authenticationManager&quot; /&gt;\r\n            &lt;beans:property name=&quot;authenticationFailureHandler&quot; ref=&quot;failureHandler&quot; /&gt;\r\n            &lt;beans:property name=&quot;authenticationSuccessHandler&quot; ref=&quot;successHandler&quot; /&gt;\r\n            &lt;beans:property name=&quot;filterProcessesUrl&quot; value=&quot;/processLogin&quot; /&gt;\r\n            &lt;beans:property name=&quot;postOnly&quot; value=&quot;true&quot; /&gt;\r\n            &lt;beans:property name=&quot;extraParameter&quot; value=&quot;domain&quot; /&gt;\r\n        &lt;/beans:bean&gt;\r\n    \r\n        &lt;beans:bean id=&quot;successHandler&quot; class=&quot;org.springframework.security.web.authentication.SavedRequestAwareAuthenticationSuccessHandler&quot;&gt;\r\n            &lt;beans:property name=&quot;defaultTargetUrl&quot; value=&quot;/login&quot; /&gt;\r\n        &lt;/beans:bean&gt;\r\n    \r\n        &lt;beans:bean id=&quot;failureHandler&quot; class=&quot;org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler&quot;&gt;\r\n            &lt;beans:property name=&quot;defaultFailureUrl&quot; value=&quot;/login?login_error=true&quot; /&gt;\r\n        &lt;/beans:bean&gt;\r\n\r\nIn twoFactorAuthenticationFilter bean definition, we set the extraParameter property to “domain” which is the name of the input field to use in our login form. \r\n\r\nEDIT:\r\n\r\nHave a look into constructors of [User][2] class.\r\n\r\nIf you don&#39;t know what a granted authority get into a look over this below link:\r\n\r\n\r\nhttp://docs.spring.io/autorepo/docs/spring-security/3.2.1.RELEASE/apidocs/org/springframework/security/core/GrantedAuthority.html\r\n\r\nYour coding gives a different mode applicable only for normal username and password. My code works for n factor authentication. Try switch over to my code if any problem keep on persists.\r\n\r\n  [1]: http://docs.spring.io/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/UsernamePasswordAuthenticationFilter.html\r\n  [2]: http://docs.spring.io/autorepo/docs/spring-security/3.2.1.RELEASE/apidocs/org/springframework/security/core/userdetails/User.html","title":"Using Java configuration for n-factor authentication","body":"<p>The first thing we need to do is extend the <a href=\"http://docs.spring.io/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/UsernamePasswordAuthenticationFilter.html\" rel=\"nofollow\">UsernamePasswordAuthenticationFilter</a> class so that it can handle a second input field.</p>\n\n<pre><code>public class TwoFactorAuthenticationFilter extends UsernamePasswordAuthenticationFilter\n{\n    private String extraParameter = \"extra\";\n    private String delimiter = \":\";\n    //getters and setters\n\n    @Override\n    protected String obtainUsername(HttpServletRequest request)\n    {\n        String username = request.getParameter(getUsernameParameter());\n        String extraInput = request.getParameter(getExtraParameter());\n        String combinedUsername = username + getDelimiter() + extraInput;\n        return combinedUsername;\n    }\n\n}\n</code></pre>\n\n<p><strong>obtainUsername()</strong> This method is to retrieve the username and “extra” input field from the HttpServletRequest object that’s passed in. </p>\n\n<p>It then concatenates these two values into one string, separating them by the delimiter string (a colon, by default). </p>\n\n<p>It then returns this combined string. The parameter from which the “extra” input field is read is extra by default.</p>\n\n<p><strong>UserDetailsService</strong> should look like this:</p>\n\n<pre><code>@Override\npublic UserDetails loadUserByUsername(String input) throws UsernameNotFoundException, DataAccessException\n{\n    String[] split = input.split(\":\");\n    if(split.length &lt; 2)\n    {\n        throw new UsernameNotFoundException(\"Must specify both username and corporate domain\");\n    }\n\n    String username = split[0];\n    String domain = split[1];\n    User user = userDao.findByUsernameAndDomain(username, domain);\n    if(user == null)\n    {\n        throw new UsernameNotFoundException(\"Invalid username or corporate domain\");\n    }\n    return user;\n}\n</code></pre>\n\n<p>Split the given username into its two components: the username and the extra field. In this example, the extra field is the user’s corporate domain. </p>\n\n<p>Once we have the username and the domain, we can use our DAO to find the matching user.</p>\n\n<p>Last Puzzle:</p>\n\n<p><strong>TwoFactorAuthenticationFilter:</strong></p>\n\n<pre><code>    &lt;http use-expressions=\"true\" auto-config=\"false\" entry-point-ref=\"loginUrlAuthenticationEntryPoint\"&gt;\n        &lt;intercept-url pattern=\"/secured\" access=\"isAuthenticated()\" /&gt;\n        &lt;intercept-url pattern=\"/**\" access=\"permitAll\" /&gt;\n        &lt;custom-filter position=\"FORM_LOGIN_FILTER\" ref=\"twoFactorAuthenticationFilter\" /&gt;\n        &lt;logout logout-url=\"/logout\" /&gt;\n    &lt;/http&gt;\n\n    &lt;authentication-manager alias=\"authenticationManager\"&gt;\n        &lt;authentication-provider ref=\"authenticationProvider\" /&gt;\n    &lt;/authentication-manager&gt;\n\n    &lt;beans:bean id=\"authenticationProvider\" class=\"org.springframework.security.authentication.dao.DaoAuthenticationProvider\"&gt;\n        &lt;beans:property name=\"passwordEncoder\"&gt;\n            &lt;beans:bean class=\"org.springframework.security.authentication.encoding.ShaPasswordEncoder\" /&gt;\n        &lt;/beans:property&gt;\n        &lt;beans:property name=\"userDetailsService\" ref=\"userService\" /&gt;\n    &lt;/beans:bean&gt;\n\n    &lt;beans:bean id=\"userService\" class=\"com.awnry.springexample.UserDetailsServiceImpl\" /&gt;\n\n    &lt;beans:bean id=\"loginUrlAuthenticationEntryPoint\" class=\"org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint\"&gt;\n        &lt;beans:property name=\"loginFormUrl\" value=\"/login\" /&gt;\n    &lt;/beans:bean&gt;\n\n    &lt;beans:bean id=\"twoFactorAuthenticationFilter\" class=\"com.awnry.springexample.TwoFactorAuthenticationFilter\"&gt;\n        &lt;beans:property name=\"authenticationManager\" ref=\"authenticationManager\" /&gt;\n        &lt;beans:property name=\"authenticationFailureHandler\" ref=\"failureHandler\" /&gt;\n        &lt;beans:property name=\"authenticationSuccessHandler\" ref=\"successHandler\" /&gt;\n        &lt;beans:property name=\"filterProcessesUrl\" value=\"/processLogin\" /&gt;\n        &lt;beans:property name=\"postOnly\" value=\"true\" /&gt;\n        &lt;beans:property name=\"extraParameter\" value=\"domain\" /&gt;\n    &lt;/beans:bean&gt;\n\n    &lt;beans:bean id=\"successHandler\" class=\"org.springframework.security.web.authentication.SavedRequestAwareAuthenticationSuccessHandler\"&gt;\n        &lt;beans:property name=\"defaultTargetUrl\" value=\"/login\" /&gt;\n    &lt;/beans:bean&gt;\n\n    &lt;beans:bean id=\"failureHandler\" class=\"org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler\"&gt;\n        &lt;beans:property name=\"defaultFailureUrl\" value=\"/login?login_error=true\" /&gt;\n    &lt;/beans:bean&gt;\n</code></pre>\n\n<p>In twoFactorAuthenticationFilter bean definition, we set the extraParameter property to “domain” which is the name of the input field to use in our login form. </p>\n\n<p>EDIT:</p>\n\n<p>Have a look into constructors of <a href=\"http://docs.spring.io/autorepo/docs/spring-security/3.2.1.RELEASE/apidocs/org/springframework/security/core/userdetails/User.html\" rel=\"nofollow\">User</a> class.</p>\n\n<p>If you don't know what a granted authority get into a look over this below link:</p>\n\n<p><a href=\"http://docs.spring.io/autorepo/docs/spring-security/3.2.1.RELEASE/apidocs/org/springframework/security/core/GrantedAuthority.html\" rel=\"nofollow\">http://docs.spring.io/autorepo/docs/spring-security/3.2.1.RELEASE/apidocs/org/springframework/security/core/GrantedAuthority.html</a></p>\n\n<p>Your coding gives a different mode applicable only for normal username and password. My code works for n factor authentication. Try switch over to my code if any problem keep on persists.</p>\n"},{"tags":[],"owner":{"account_id":426537,"reputation":9134,"user_id":807797,"accept_rate":72,"display_name":"CodeMed"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1441838576,"creation_date":1440451576,"answer_id":32191991,"question_id":32020405,"body_markdown":"The easiest way to use java config for n-factor authentication is to start with a working example of single-factor authentication (username and password) that uses java config.  Then you only have to make a few very minor changes:  Assuming that you have a working single factor authentication app using java configuration, the steps are simply:  \r\n    \r\nFirst, define layered roles, with one role for each factor.  If you only have two factor authentication, keep your existing one role in the database, but then create a second role with full-access that you only assign at runtime.  Thus, when the user logs in, they are logged in to the minimal role stored in the database, and that minimal role is only given access to one view, which is a form allowing them to enter a pin code that your controller just sent them via text or email or some other method.  These layered roles get defined in `SecurityConfig.java`, as follows:  \r\n  \r\n    @Configuration\r\n    @EnableWebMvcSecurity\r\n    public class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    \t@Autowired\r\n        private UserDetailsService userDetailsService;\r\n\r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n          http\r\n            .csrf().disable()\r\n            .formLogin()\r\n                .loginPage(&quot;/login&quot;)\r\n                .defaultSuccessUrl(&quot;/getpin&quot;)\r\n                .usernameParameter(&quot;j_username&quot;)\r\n                .passwordParameter(&quot;j_password&quot;)\r\n                .loginProcessingUrl(&quot;/j_spring_security_check&quot;)\r\n                .failureUrl(&quot;/login&quot;)\r\n                .permitAll()\r\n                .and()\r\n            .logout()\r\n                .logoutUrl(&quot;/logout&quot;)\r\n                .logoutSuccessUrl(&quot;/login&quot;)\r\n                .and()\r\n            .authorizeRequests()\r\n            \t.antMatchers(&quot;/getpin&quot;).hasAuthority(&quot;get_pin&quot;)\r\n                .antMatchers(&quot;/securemain/**&quot;).hasAuthority(&quot;full_access&quot;)\r\n                .antMatchers(&quot;/j_spring_security_check&quot;).permitAll()\r\n                .and()\r\n            .userDetailsService(userDetailsService);\r\n        }\r\n    }\r\n  \r\nSecond, add code that upgrades the user&#39;s role to full-access upon successful entry of the correct pin code to the controller code that handles the pin code entry form `POST`.  The code to manually assign full access in the controller is:  \r\n  \r\n\tRole rl2 = new Role();rl2.setRole(&quot;full-access&quot;);//Don&#39;t save this one because we will manually assign it on login.\r\n\tSet&lt;Role&gt; rls = new HashSet&lt;Role&gt;();\r\n\trls.add(rl2);\r\n\tCustomUserDetailsService user = new CustomUserDetailsService(appService);\r\n\tAuthentication authentication = new UsernamePasswordAuthenticationToken(user, null, user.getAuthorities(rls));\r\n\tSecurityContextHolder.getContext().setAuthentication(authentication);\r\n\treturn &quot;redirect:/securemain&quot;;  \r\n  \r\nYou can add as many layers as you want to after `/getpin`.  You can also support multiple authorization roles and make it as complicated as you want to.  But this answer gives the simplest way to get it running with java config.","title":"Using Java configuration for n-factor authentication","body":"<p>The easiest way to use java config for n-factor authentication is to start with a working example of single-factor authentication (username and password) that uses java config.  Then you only have to make a few very minor changes:  Assuming that you have a working single factor authentication app using java configuration, the steps are simply:  </p>\n\n<p>First, define layered roles, with one role for each factor.  If you only have two factor authentication, keep your existing one role in the database, but then create a second role with full-access that you only assign at runtime.  Thus, when the user logs in, they are logged in to the minimal role stored in the database, and that minimal role is only given access to one view, which is a form allowing them to enter a pin code that your controller just sent them via text or email or some other method.  These layered roles get defined in <code>SecurityConfig.java</code>, as follows:  </p>\n\n<pre><code>@Configuration\n@EnableWebMvcSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    private UserDetailsService userDetailsService;\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n      http\n        .csrf().disable()\n        .formLogin()\n            .loginPage(\"/login\")\n            .defaultSuccessUrl(\"/getpin\")\n            .usernameParameter(\"j_username\")\n            .passwordParameter(\"j_password\")\n            .loginProcessingUrl(\"/j_spring_security_check\")\n            .failureUrl(\"/login\")\n            .permitAll()\n            .and()\n        .logout()\n            .logoutUrl(\"/logout\")\n            .logoutSuccessUrl(\"/login\")\n            .and()\n        .authorizeRequests()\n            .antMatchers(\"/getpin\").hasAuthority(\"get_pin\")\n            .antMatchers(\"/securemain/**\").hasAuthority(\"full_access\")\n            .antMatchers(\"/j_spring_security_check\").permitAll()\n            .and()\n        .userDetailsService(userDetailsService);\n    }\n}\n</code></pre>\n\n<p>Second, add code that upgrades the user's role to full-access upon successful entry of the correct pin code to the controller code that handles the pin code entry form <code>POST</code>.  The code to manually assign full access in the controller is:  </p>\n\n<pre><code>Role rl2 = new Role();rl2.setRole(\"full-access\");//Don't save this one because we will manually assign it on login.\nSet&lt;Role&gt; rls = new HashSet&lt;Role&gt;();\nrls.add(rl2);\nCustomUserDetailsService user = new CustomUserDetailsService(appService);\nAuthentication authentication = new UsernamePasswordAuthenticationToken(user, null, user.getAuthorities(rls));\nSecurityContextHolder.getContext().setAuthentication(authentication);\nreturn \"redirect:/securemain\";  \n</code></pre>\n\n<p>You can add as many layers as you want to after <code>/getpin</code>.  You can also support multiple authorization roles and make it as complicated as you want to.  But this answer gives the simplest way to get it running with java config.</p>\n"},{"comments":[{"owner":{"account_id":4630748,"reputation":1789,"user_id":3753344,"accept_rate":33,"display_name":"MS Ibrahim"},"score":0,"creation_date":1441186131,"post_id":32348464,"comment_id":52572171,"body_markdown":"@CodeMed Any changes inside the logic will reflect the configuration files also","body":"@CodeMed Any changes inside the logic will reflect the configuration files also"},{"owner":{"account_id":446135,"reputation":20184,"user_id":838992,"display_name":"J Richard Snape"},"score":0,"creation_date":1441188421,"post_id":32348464,"comment_id":52573719,"body_markdown":"@MSIbrahim I think I might remove this answer to be honest.  The question requires too many changes to my setup and I&#39;m not sure I can participate with the wording OP has put to try to specify conditions on an answer. Maybe you can work on the above to make your answer satisfactory for OP.","body":"@MSIbrahim I think I might remove this answer to be honest.  The question requires too many changes to my setup and I&#39;m not sure I can participate with the wording OP has put to try to specify conditions on an answer. Maybe you can work on the above to make your answer satisfactory for OP."},{"owner":{"account_id":446135,"reputation":20184,"user_id":838992,"display_name":"J Richard Snape"},"score":1,"creation_date":1441192641,"post_id":32348464,"comment_id":52576336,"body_markdown":"I set up all that (took a while - didn&#39;t have a working install of tomcat or anything), but Tomcat errors when running the project from eclipse, saying it can&#39;t find a class in one of the spring jars. `ContextLoaderListener`.  I haven&#39;t got time to debug it, I&#39;m afraid.  If I get chance later, I&#39;ll see if I can update some further ideas.","body":"I set up all that (took a while - didn&#39;t have a working install of tomcat or anything), but Tomcat errors when running the project from eclipse, saying it can&#39;t find a class in one of the spring jars. <code>ContextLoaderListener</code>.  I haven&#39;t got time to debug it, I&#39;m afraid.  If I get chance later, I&#39;ll see if I can update some further ideas."},{"owner":{"account_id":446135,"reputation":20184,"user_id":838992,"display_name":"J Richard Snape"},"score":0,"creation_date":1441194273,"post_id":32348464,"comment_id":52577416,"body_markdown":"Hmm - curiosity bit - I managed to get that working.  A web search makes me think you&#39;re trying to [adapt this blog post](http://blog.awnry.com/post/16183749439/two-factor-authentication-and-spring-security-3) - is that right?  If so - it&#39;s usually easier to put that up front in the question, so people know they&#39;re working on someone else&#39;s code that works in a different context.","body":"Hmm - curiosity bit - I managed to get that working.  A web search makes me think you&#39;re trying to <a href=\"http://blog.awnry.com/post/16183749439/two-factor-authentication-and-spring-security-3\" rel=\"nofollow noreferrer\">adapt this blog post</a> - is that right?  If so - it&#39;s usually easier to put that up front in the question, so people know they&#39;re working on someone else&#39;s code that works in a different context."},{"owner":{"account_id":446135,"reputation":20184,"user_id":838992,"display_name":"J Richard Snape"},"score":0,"creation_date":1441196066,"post_id":32348464,"comment_id":52578632,"body_markdown":"I can replicate both your initial problem (old zip) and the current one (new zip). I think there is too much to resolve on SO here. For instance, your `TwoFactorAuthenticationFilter` is not referenced anywhere in the project - i.e. it&#39;s not being used in authentication. Similarly `CustomUserDetailsService` is never used at all. The `CustomAuthenticaionProvider` doesn&#39;t work for the reason in the answer above. There are other (non-code) security issues - you shouldn&#39;t be storing raw passwords and pins in your database - they should be hashed.","body":"I can replicate both your initial problem (old zip) and the current one (new zip). I think there is too much to resolve on SO here. For instance, your <code>TwoFactorAuthenticationFilter</code> is not referenced anywhere in the project - i.e. it&#39;s not being used in authentication. Similarly <code>CustomUserDetailsService</code> is never used at all. The <code>CustomAuthenticaionProvider</code> doesn&#39;t work for the reason in the answer above. There are other (non-code) security issues - you shouldn&#39;t be storing raw passwords and pins in your database - they should be hashed."},{"owner":{"account_id":446135,"reputation":20184,"user_id":838992,"display_name":"J Richard Snape"},"score":0,"creation_date":1441395872,"post_id":32348464,"comment_id":52679249,"body_markdown":"@CodeMed I am worried that you are trying to shoehorn Stack Overflow into a role it can&#39;t meet. I don&#39;t require bounty.  rep is pretend internet points that cannot buy my time in any real sense. I help where I can and I&#39;m interested, but it requires questioners to play by the rules - in particular to ask concise questions about specific issues. Not to ask for project work in return for rep. Sure, it&#39;s a nice gesture to offer bounty and I often take a look at bounty questions. But the other rules still apply.  There is no onus on answerers to answer in a particular way etc.","body":"@CodeMed I am worried that you are trying to shoehorn Stack Overflow into a role it can&#39;t meet. I don&#39;t require bounty.  rep is pretend internet points that cannot buy my time in any real sense. I help where I can and I&#39;m interested, but it requires questioners to play by the rules - in particular to ask concise questions about specific issues. Not to ask for project work in return for rep. Sure, it&#39;s a nice gesture to offer bounty and I often take a look at bounty questions. But the other rules still apply.  There is no onus on answerers to answer in a particular way etc."},{"owner":{"account_id":446135,"reputation":20184,"user_id":838992,"display_name":"J Richard Snape"},"score":0,"creation_date":1441395956,"post_id":32348464,"comment_id":52679300,"body_markdown":"That being said - I&#39;ve had a look at your project.  Here&#39;s one further link - using [spring-security with spring-mvc](http://docs.spring.io/spring-security/site/docs/3.2.x/guides/hellomvc.html).  If you can get a minimal project going with one of the links I&#39;ve provided (truly minimal, not mixing the different types of security mechanisms) and have specific questions, then sure - I&#39;ll take a look.","body":"That being said - I&#39;ve had a look at your project.  Here&#39;s one further link - using <a href=\"http://docs.spring.io/spring-security/site/docs/3.2.x/guides/hellomvc.html\" rel=\"nofollow noreferrer\">spring-security with spring-mvc</a>.  If you can get a minimal project going with one of the links I&#39;ve provided (truly minimal, not mixing the different types of security mechanisms) and have specific questions, then sure - I&#39;ll take a look."},{"owner":{"account_id":446135,"reputation":20184,"user_id":838992,"display_name":"J Richard Snape"},"score":0,"creation_date":1441398142,"post_id":32348464,"comment_id":52680277,"body_markdown":"Sure, so it goes. That&#39;s an issue with the model here - sometimes its hard to tell what works. But it is the model. We&#39;ve interacted before on bouncycastle/pgp I recall. You can be sure, I&#39;ve downloaded your project, got it running and replicated your problems (took some hours, but I found it intriguing, my choice). I&#39;m telling you that it&#39;s not minimal and has (at least) two different security mechanisms mixed up in it. I cannot understand **specifically** what you can&#39;t replicate from a **single one** of the web examples (not mix of all) / why you can&#39;t extend your current single factor app.","body":"Sure, so it goes. That&#39;s an issue with the model here - sometimes its hard to tell what works. But it is the model. We&#39;ve interacted before on bouncycastle/pgp I recall. You can be sure, I&#39;ve downloaded your project, got it running and replicated your problems (took some hours, but I found it intriguing, my choice). I&#39;m telling you that it&#39;s not minimal and has (at least) two different security mechanisms mixed up in it. I cannot understand <b>specifically</b> what you can&#39;t replicate from a <b>single one</b> of the web examples (not mix of all) / why you can&#39;t extend your current single factor app."},{"owner":{"account_id":446135,"reputation":20184,"user_id":838992,"display_name":"J Richard Snape"},"score":0,"creation_date":1441398154,"post_id":32348464,"comment_id":52680282,"body_markdown":"Let us [continue this discussion in chat](http://chat.stackoverflow.com/rooms/88840/discussion-between-j-richard-snape-and-codemed).","body":"Let us <a href=\"http://chat.stackoverflow.com/rooms/88840/discussion-between-j-richard-snape-and-codemed\">continue this discussion in chat</a>."},{"owner":{"account_id":426537,"reputation":9134,"user_id":807797,"accept_rate":72,"display_name":"CodeMed"},"score":0,"creation_date":1450747712,"post_id":32348464,"comment_id":56556033,"body_markdown":"Do you know AngularJS?  I have a related question about setting up Spring Security as a REST service used by an AngularJS app.  Are you willing to comment?  Here is the link: http://stackoverflow.com/questions/34406376/hooking-up-mysql-user-data-to-angularjs-spring-security","body":"Do you know AngularJS?  I have a related question about setting up Spring Security as a REST service used by an AngularJS app.  Are you willing to comment?  Here is the link: <a href=\"http://stackoverflow.com/questions/34406376/hooking-up-mysql-user-data-to-angularjs-spring-security\" title=\"hooking up mysql user data to angularjs spring security\">stackoverflow.com/questions/34406376/&hellip;</a>"},{"owner":{"account_id":426537,"reputation":9134,"user_id":807797,"accept_rate":72,"display_name":"CodeMed"},"score":0,"creation_date":1450834150,"post_id":32348464,"comment_id":56595667,"body_markdown":"@JRichardSnape I think my problem was that I needed to create a dataSource bean for MySQL and inject it into SecurityConfiguration.java.  I got an example to work with Thymeleaf today.  Tomorrow I will try to replace Thymeleaf with AngularJS to solve the problem in my preceding link.  But for now I got the github code in the following link to work, and I decomposed it into its elements.  Spring security is a little different when there are separate apps running on client and server:  http://justinrodenbostel.com/2014/05/30/part-5-integrating-spring-security-with-spring-boot-web/","body":"@JRichardSnape I think my problem was that I needed to create a dataSource bean for MySQL and inject it into SecurityConfiguration.java.  I got an example to work with Thymeleaf today.  Tomorrow I will try to replace Thymeleaf with AngularJS to solve the problem in my preceding link.  But for now I got the github code in the following link to work, and I decomposed it into its elements.  Spring security is a little different when there are separate apps running on client and server:  <a href=\"http://justinrodenbostel.com/2014/05/30/part-5-integrating-spring-security-with-spring-boot-web/\" rel=\"nofollow noreferrer\">justinrodenbostel.com/2014/05/30/&hellip;</a>"},{"owner":{"account_id":426537,"reputation":9134,"user_id":807797,"accept_rate":72,"display_name":"CodeMed"},"score":0,"creation_date":1450908891,"post_id":32348464,"comment_id":56630898,"body_markdown":"@JRichardSnape In case you are interested, I resolved my new question.  I am sending you this because I get the sense you have an intellectual interest in the topic, but that you are just swamped with grad school.  Here is how I found the solution to the new problem:  http://stackoverflow.com/questions/34443843/how-do-i-merge-these-two-spring-boot-controllers/34443971","body":"@JRichardSnape In case you are interested, I resolved my new question.  I am sending you this because I get the sense you have an intellectual interest in the topic, but that you are just swamped with grad school.  Here is how I found the solution to the new problem:  <a href=\"http://stackoverflow.com/questions/34443843/how-do-i-merge-these-two-spring-boot-controllers/34443971\" title=\"how do i merge these two spring boot controllers\">stackoverflow.com/questions/34443843/&hellip;</a>"},{"owner":{"account_id":446135,"reputation":20184,"user_id":838992,"display_name":"J Richard Snape"},"score":0,"creation_date":1450917106,"post_id":32348464,"comment_id":56633515,"body_markdown":"@CodeMed Thanks - very interesting, but yes - study and christmas limiting my ability to digest :) Will read through when I can.  All the best!","body":"@CodeMed Thanks - very interesting, but yes - study and christmas limiting my ability to digest :) Will read through when I can.  All the best!"}],"tags":[],"owner":{"account_id":446135,"reputation":20184,"user_id":838992,"display_name":"J Richard Snape"},"comment_count":13,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1441287680,"creation_date":1441183364,"answer_id":32348464,"question_id":32020405,"body_markdown":"I&#39;m very concious that this post has undergone 28 edits, so I may have missed some context. I&#39;m also concious that you&#39;ve amalgamated some code from the other answers into your question and that the problem has been somewhat &quot;turned on its head&quot; from &quot;why won&#39;t a valid user authenticate?&quot; to &quot;why does every user authenticate?&quot;.\n\n### Current problem.\n\nHowever, as written, your `CustomAuthenticationProvider.authenticate()` method will always return an `Authentication` object that returns `auth.isAuthenticated() == true` because you instantiate using [this method][1] which warns you about that very thing.  Even if the `collection` you passed in as the third argument were empty, this would be the case.  In fact, the collection always contains a `GrantedAuthority` for &quot;registered&quot;, because `pincodeEntered(name)` always returns `true`.  So, you need to correct your logic in those methods.  `authenticate()` should return `null` if authentication is not successful.\n\n### Next steps\n\nYou&#39;ve [indicated][2] in [comments][3] that what you want is a reference implementation of multi factor authentication.  This is problematic - there is not necessarily agreement on what would constitute such a thing.  For instance some would argue that multi factor should include a possession factor, rather than n knowledge factors on a single login page.  It&#39;s also not really suited to an SO answer as it would need a blog post (or a series) - however generous the bounty.\n\nThere are working examples of multi factor authentication in spring on the web, [here][4] and [here][5], for example.  The latter I think you must have discovered as you appear to be using some of the code from there.\n\nMaking your `CustomAuthenticationProvider` work might take hours. Debugging might take even longer, as you have a mixture of methods in your example - it is not minimal.  In particular, the `TwoFactorAuthenticationFilter` class is supposed to be used to intercept input on a request from the login page and concatenate the username and pin.  In the example from the blog, this is [set up in XML][5] - you could add the `security` namespace to your `business-config.xml` and add those beans there for instance.\n\nHowever, the `SecurityConfig` class and `CustomAuthenticationProvider` is a different method again.\n\nNext, your project code references a `j_security_check` url, but that URL is not handled by anything.  I am not sure of the intent behind that, or where it comes from.  Finally, the MVC config for URL routing adds another element to the mix - one which I&#39;m not familiar with.\n\nI&#39;ve played with your example for a while. There are too many mixed methods and too much complexity for me to fix quickly - maybe others can.\n\nI ***strongly*** suggest that you start from the example in the blog exactly, then add the mvc config you want to over the top of that.\n\n### N.B. Setup for others trying to get the example to work\n\nThere were a couple of wrinkles in setting the project - it had an un-needed and unsatisfied dependency on `javax.mail`, you need to publish the maven dependencies to the server (in project-&gt;properties-&gt;deployment assembly) and you need to download and install adapters for the tomcat server if you don&#39;t already have it.\n\nYou also need to create the tables and columns in your database.\n\n\n  [1]: http://docs.spring.io/spring-security/site/docs/current/apidocs/org/springframework/security/authentication/UsernamePasswordAuthenticationToken.html#UsernamePasswordAuthenticationToken%28java.lang.Object,%20java.lang.Object,%20java.util.Collection%29\n  [2]: https://stackoverflow.com/questions/32020405/using-java-configuration-for-n-factor-authentication?answertab=active#comment52590659_32020405\n  [3]: https://stackoverflow.com/questions/32020405/using-java-configuration-for-n-factor-authentication?answertab=active#comment52591572_32348464\n  [4]: http://www.gobloomhealth.com/multi-factor-authentication-part-1/\n  [5]: http://blog.awnry.com/post/16183749439/two-factor-authentication-and-spring-security-3","title":"Using Java configuration for n-factor authentication","body":"<p>I'm very concious that this post has undergone 28 edits, so I may have missed some context. I'm also concious that you've amalgamated some code from the other answers into your question and that the problem has been somewhat &quot;turned on its head&quot; from &quot;why won't a valid user authenticate?&quot; to &quot;why does every user authenticate?&quot;.</p>\n<h3>Current problem.</h3>\n<p>However, as written, your <code>CustomAuthenticationProvider.authenticate()</code> method will always return an <code>Authentication</code> object that returns <code>auth.isAuthenticated() == true</code> because you instantiate using <a href=\"http://docs.spring.io/spring-security/site/docs/current/apidocs/org/springframework/security/authentication/UsernamePasswordAuthenticationToken.html#UsernamePasswordAuthenticationToken%28java.lang.Object,%20java.lang.Object,%20java.util.Collection%29\" rel=\"nofollow noreferrer\">this method</a> which warns you about that very thing.  Even if the <code>collection</code> you passed in as the third argument were empty, this would be the case.  In fact, the collection always contains a <code>GrantedAuthority</code> for &quot;registered&quot;, because <code>pincodeEntered(name)</code> always returns <code>true</code>.  So, you need to correct your logic in those methods.  <code>authenticate()</code> should return <code>null</code> if authentication is not successful.</p>\n<h3>Next steps</h3>\n<p>You've <a href=\"https://stackoverflow.com/questions/32020405/using-java-configuration-for-n-factor-authentication?answertab=active#comment52590659_32020405\">indicated</a> in <a href=\"https://stackoverflow.com/questions/32020405/using-java-configuration-for-n-factor-authentication?answertab=active#comment52591572_32348464\">comments</a> that what you want is a reference implementation of multi factor authentication.  This is problematic - there is not necessarily agreement on what would constitute such a thing.  For instance some would argue that multi factor should include a possession factor, rather than n knowledge factors on a single login page.  It's also not really suited to an SO answer as it would need a blog post (or a series) - however generous the bounty.</p>\n<p>There are working examples of multi factor authentication in spring on the web, <a href=\"http://www.gobloomhealth.com/multi-factor-authentication-part-1/\" rel=\"nofollow noreferrer\">here</a> and <a href=\"http://blog.awnry.com/post/16183749439/two-factor-authentication-and-spring-security-3\" rel=\"nofollow noreferrer\">here</a>, for example.  The latter I think you must have discovered as you appear to be using some of the code from there.</p>\n<p>Making your <code>CustomAuthenticationProvider</code> work might take hours. Debugging might take even longer, as you have a mixture of methods in your example - it is not minimal.  In particular, the <code>TwoFactorAuthenticationFilter</code> class is supposed to be used to intercept input on a request from the login page and concatenate the username and pin.  In the example from the blog, this is <a href=\"http://blog.awnry.com/post/16183749439/two-factor-authentication-and-spring-security-3\" rel=\"nofollow noreferrer\">set up in XML</a> - you could add the <code>security</code> namespace to your <code>business-config.xml</code> and add those beans there for instance.</p>\n<p>However, the <code>SecurityConfig</code> class and <code>CustomAuthenticationProvider</code> is a different method again.</p>\n<p>Next, your project code references a <code>j_security_check</code> url, but that URL is not handled by anything.  I am not sure of the intent behind that, or where it comes from.  Finally, the MVC config for URL routing adds another element to the mix - one which I'm not familiar with.</p>\n<p>I've played with your example for a while. There are too many mixed methods and too much complexity for me to fix quickly - maybe others can.</p>\n<p>I <em><strong>strongly</strong></em> suggest that you start from the example in the blog exactly, then add the mvc config you want to over the top of that.</p>\n<h3>N.B. Setup for others trying to get the example to work</h3>\n<p>There were a couple of wrinkles in setting the project - it had an un-needed and unsatisfied dependency on <code>javax.mail</code>, you need to publish the maven dependencies to the server (in project-&gt;properties-&gt;deployment assembly) and you need to download and install adapters for the tomcat server if you don't already have it.</p>\n<p>You also need to create the tables and columns in your database.</p>\n"}],"owner":{"account_id":426537,"reputation":9134,"user_id":807797,"accept_rate":72,"display_name":"CodeMed"},"comment_count":11,"delete_vote_count":2,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2445,"favorite_count":0,"down_vote_count":6,"up_vote_count":29,"closed_date":1446432195,"accepted_answer_id":32191991,"answer_count":4,"score":23,"last_activity_date":1675452182,"creation_date":1439599487,"question_id":32020405,"body_markdown":"In a Spring MVC app using Spring Security, I want to use a custom `AuthenticationProvider` to check **n-number** of additional fields beyond the default `username` and `password`.  For example, if a user wants to authenticate, I want her to have to supplement her username and password with a pin code she receives via email, a pincode she receives via text, and `n` number of other credentials.  However, to keep this question narrow, let&#39;s just focus on adding one additional pin to the login, but let&#39;s set it up in a way that enables us to add n-other credentials easily afterwards.  \r\n  \r\nI want to use Java configuration.  \r\n    \r\nI have created a custom `AuthenticationProvider`, a custom `AuthenticationFilter`, custom `UserDetailsService`, and a few other changes.\r\n  \r\nBut the app is granting access when a user tries to log in whether or not the user has valid credentials, as shown in a screen shot in the instructions for reproducing the problem below.  What specific changes need to be made to the code that I am sharing so that the custom n-factor authentication can function properly?\r\n\r\nThe structure of my test project is shown in the following screen shots:\r\n  \r\nHere is the Java code structure in eclipse project explorer:\r\n\r\n{ Image host not available }\r\n\r\nThe XML config files can be located by scrolling down in project explorer to show the following:  \r\n\r\n{ Image host not available }\r\n\r\nThe view code can be found by scrolling a little further down in project explorer as follows:  \r\n\r\n{ Image host not available }\r\n\r\nYou can download and explore all this code in a working Eclipse project:\r\n\r\n{ File now deleted }\r\n  \r\n`CustomAuthenticationProvider.java` is:  \r\n  \r\n    package my.app.config;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import org.springframework.security.authentication.AuthenticationProvider;\r\n    import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\n    import org.springframework.security.core.Authentication;\r\n    import org.springframework.security.core.AuthenticationException;\r\n    import org.springframework.security.core.GrantedAuthority;\r\n    import org.springframework.security.core.authority.SimpleGrantedAuthority;\r\n\r\n    public class CustomAuthenticationProvider implements AuthenticationProvider{\r\n\r\n        @Override\r\n        public Authentication authenticate(Authentication authentication) throws AuthenticationException {\r\n            String name = authentication.getName();\r\n            String password = authentication.getCredentials().toString();\r\n            List&lt;GrantedAuthority&gt; grantedAuths = new ArrayList&lt;&gt;();\r\n            if (name.equals(&quot;admin&quot;) &amp;&amp; password.equals(&quot;system&quot;)) {\r\n                grantedAuths.add(new SimpleGrantedAuthority(&quot;ROLE_ADMIN&quot;));  \r\n            } \r\n            if(pincodeEntered(name)){\r\n                grantedAuths.add(new SimpleGrantedAuthority(&quot;registered&quot;));  \r\n            }\r\n            Authentication auth = new UsernamePasswordAuthenticationToken(name, password, grantedAuths);\r\n            return auth;\r\n        }\r\n    \r\n        @Override\r\n        public boolean supports(Class&lt;?&gt; authentication) {\r\n            return authentication.equals(UsernamePasswordAuthenticationToken.class);\r\n        }\r\n    \r\n        private boolean pincodeEntered(String userName){\r\n            // do your check here\r\n            return true;\r\n        }\r\n    }\r\n  \r\n`MessageSecurityWebApplicationInitializer.java` is:  \r\n  \r\n    package my.app.config;\r\n\r\n    import org.springframework.core.annotation.Order;\r\n    import org.springframework.security.web.context.AbstractSecurityWebApplicationInitializer;\r\n\r\n    @Order(2)\r\n    public class MessageSecurityWebApplicationInitializer extends AbstractSecurityWebApplicationInitializer {\r\n    }\r\n\r\n`TwoFactorAuthenticationFilter.java` is:  \r\n  \r\n    package my.app.config;\r\n\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\r\n\r\n    public class TwoFactorAuthenticationFilter extends UsernamePasswordAuthenticationFilter\r\n    {\r\n        private String extraParameter = &quot;extra&quot;;\r\n        private String delimiter = &quot;:&quot;;\r\n\r\n\r\n        /**\r\n         * Given an {@link HttpServletRequest}, this method extracts the username and the extra input\r\n         * values and returns a combined username string of those values separated by the delimiter\r\n         * string.\r\n         *\r\n         * @param request The {@link HttpServletRequest} containing the HTTP request variables from\r\n         *   which the username client domain values can be extracted\r\n         */\r\n        @Override\r\n        protected String obtainUsername(HttpServletRequest request){\r\n            String username = request.getParameter(getUsernameParameter());\r\n            String extraInput = request.getParameter(getExtraParameter());\r\n            String combinedUsername = username + getDelimiter() + extraInput;\r\n            System.out.println(&quot;Combined username = &quot; + combinedUsername);\r\n            return combinedUsername;\r\n        }\r\n\r\n        /**\r\n         * @return The parameter name which will be used to obtain the extra input from the login request\r\n         */\r\n        public String getExtraParameter(){\r\n            return this.extraParameter;\r\n        }\r\n\r\n        /**\r\n         * @param extraParameter The parameter name which will be used to obtain the extra input from the login request\r\n         */\r\n        public void setExtraParameter(String extraParameter){\r\n            this.extraParameter = extraParameter;\r\n        }\r\n\r\n        /**\r\n         * @return The delimiter string used to separate the username and extra input values in the\r\n         * string returned by &lt;code&gt;obtainUsername()&lt;/code&gt;\r\n         */\r\n        public String getDelimiter(){\r\n            return this.delimiter;\r\n        }\r\n\r\n        /**\r\n         * @param delimiter The delimiter string used to separate the username and extra input values in the\r\n         * string returned by &lt;code&gt;obtainUsername()&lt;/code&gt;\r\n         */\r\n        public void setDelimiter(String delimiter){\r\n            this.delimiter = delimiter;\r\n        }\r\n    }\r\n  \r\n`SecurityConfig.java` is:  \r\n  \r\n    package my.app.config;\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.security.authentication.AuthenticationProvider;\r\n    import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\n    import org.springframework.security.config.annotation.web.servlet.configuration.EnableWebMvcSecurity;\r\n\r\n    @Configuration\r\n    @EnableWebMvcSecurity\r\n    public class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n    \t@Autowired\r\n\t    public void registerGlobalAuthentication(AuthenticationManagerBuilder auth) throws Exception {\r\n    \t        auth.authenticationProvider(customAuthenticationProvider());\r\n\t    }\r\n\r\n    \t@Bean\r\n\t    AuthenticationProvider customAuthenticationProvider() {\r\n\t            CustomAuthenticationProvider impl = new CustomAuthenticationProvider();\r\n\t            return impl ;\r\n    \t}\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http\r\n                .csrf().disable()\r\n                .formLogin()\r\n                    .loginPage(&quot;/login&quot;)\r\n                    .defaultSuccessUrl(&quot;/secure-home&quot;)\r\n                    .usernameParameter(&quot;j_username&quot;)\r\n                    .passwordParameter(&quot;j_password&quot;)\r\n                    .loginProcessingUrl(&quot;/j_spring_security_check&quot;)\r\n                    .failureUrl(&quot;/login&quot;)\r\n                    .permitAll()\r\n                    .and()\r\n                .logout()\r\n                    .logoutUrl(&quot;/logout&quot;)\r\n                    .logoutSuccessUrl(&quot;/login&quot;)\r\n                    .and()\r\n                .authorizeRequests()\r\n                    .antMatchers(&quot;/secure-home&quot;).hasAuthority(&quot;registered&quot;)\r\n                    .antMatchers(&quot;/j_spring_security_check&quot;).permitAll()\r\n                    .and()\r\n                .userDetailsService(userDetailsService());\r\n        }\r\n    }\r\n  \r\n`User.java` is:  \r\n  \r\n    package my.app.model;\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Collection;\r\n    import java.util.HashSet;\r\n    import java.util.Set;\r\n\r\n    import javax.persistence.CascadeType;\r\n    import javax.persistence.Column;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.FetchType;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.JoinColumn;\r\n    import javax.persistence.JoinTable;\r\n    import javax.persistence.ManyToMany;\r\n    import javax.persistence.Table;\r\n\r\n    import org.springframework.security.core.GrantedAuthority;\r\n    import org.springframework.security.core.userdetails.UserDetails;\r\n    \r\n    @Entity\r\n    @Table(name=&quot;users&quot;)\r\n    public class User implements UserDetails{\r\n  \r\n    \tprivate static final long serialVersionUID = 1L;\r\n\r\n    \t@Id\r\n\t    @GeneratedValue\r\n    \tprivate Integer id;\r\n\r\n    \t@Column(name= &quot;email&quot;, unique=true, nullable=false)\r\n    \tprivate String login;//must be a valid email address\r\n\t\r\n    \t@Column(name = &quot;password&quot;)\r\n\t    private String password;\r\n\r\n    \t@Column(name = &quot;phone&quot;)\r\n\t    private String phone;\r\n\t\r\n    \t@Column(name = &quot;pin&quot;)\r\n\t    private String pin;\r\n\t\r\n    \t@Column(name = &quot;sessionid&quot;)\r\n\t    private String sessionId;\r\n\t\r\n    \t@ManyToMany(cascade=CascadeType.ALL, fetch=FetchType.EAGER)\r\n\t    @JoinTable(name=&quot;user_roles&quot;,\r\n\t\t    joinColumns = {@JoinColumn(name=&quot;user_id&quot;, referencedColumnName=&quot;id&quot;)},\r\n    \t\tinverseJoinColumns = {@JoinColumn(name=&quot;role_id&quot;, referencedColumnName=&quot;id&quot;)}\r\n\t    )\r\n    \tprivate Set&lt;Role&gt; roles;\r\n\t\r\n    \tpublic Integer getId() {return id;}\r\n\t    public void setId(Integer id) {\tthis.id = id;}\r\n\t\r\n    \tpublic String getPhone(){return phone;}\r\n\t    public void setPhone(String pn){phone = pn;}\r\n\t\r\n    \tpublic String getPin(){return pin;}\r\n\t    public void setPin(String pi){pin = pi;}\r\n\t\r\n    \tpublic String getSessionId(){return sessionId;}\r\n\t    public void setSessionId(String sd){sessionId = sd;}\r\n\t\r\n    \tpublic String getLogin() {\r\n\t    \treturn login;\r\n    \t}\r\n\r\n    \tpublic void setLogin(String login) {\r\n\t    \tthis.login = login;\r\n    \t}\r\n\r\n    \tpublic String getPassword() {\r\n\t    \treturn password;\r\n    \t}\r\n\r\n    \tpublic void setPassword(String password) {\r\n\t    \tthis.password = password;\r\n    \t}\r\n\r\n        //roles methods\r\n        public void addRole(Role alg) {roles.add(alg);}\r\n        public Set&lt;Role&gt; getRoles(){\r\n        \tif(this.roles==null){this.roles = new HashSet&lt;Role&gt;();}\r\n    \t    return this.roles;\r\n        }\r\n        public void setRoles(Set&lt;Role&gt; alg){this.roles = alg;}\r\n        public boolean isInRoles(int aid){\r\n        \tArrayList&lt;Role&gt; mylgs = new ArrayList&lt;Role&gt;();\r\n    \t    mylgs.addAll(this.roles);\r\n        \tfor(int a=0;a&lt;mylgs.size();a++){if(mylgs.get(a).getId()==aid){return true;}}\r\n        \treturn false;\r\n        }\r\n\r\n    \t@Override\r\n\t    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n\t\t    // TODO Auto-generated method stub\r\n    \t\treturn null;\r\n    \t}\r\n\r\n    \t@Override\r\n\t    public String getUsername() {\r\n\t\t    // TODO Auto-generated method stub\r\n    \t\treturn null;\r\n    \t}\r\n\r\n    \t@Override\r\n\t    public boolean isAccountNonExpired() {\r\n\t\t    // TODO Auto-generated method stub\r\n    \t\treturn false;\r\n\t    }\r\n\r\n    \t@Override\r\n\t    public boolean isAccountNonLocked() {\r\n\t\t    // TODO Auto-generated method stub\r\n    \t\treturn false;\r\n\t    }\r\n\r\n    \t@Override\r\n\t    public boolean isCredentialsNonExpired() {\r\n\t\t    // TODO Auto-generated method stub\r\n    \t\treturn false;\r\n\t    }\r\n\r\n    \t@Override\r\n\t    public boolean isEnabled() {\r\n\t\t    // TODO Auto-generated method stub\r\n    \t\treturn false;\r\n    \t}\r\n    }\r\n  \r\nThe xml config is in `business-config.xml` and is:  \r\n  \r\n    &lt;beans profile=&quot;default,spring-data-jpa&quot;&gt;\r\n        &lt;!-- lots of other stuff --&gt;\r\n        &lt;bean class=&quot;my.app.config.SecurityConfig&quot;&gt;&lt;/bean&gt;\r\n    &lt;/beans&gt;  \r\n  \r\n    &lt;!-- lots of unrelated stuff --&gt;\r\n\r\nIn addition, `mvc-core-config.xml` contains the following:\r\n\r\n    &lt;!-- lots of other stuff --&gt;\r\n    &lt;mvc:view-controller path=&quot;/&quot; view-name=&quot;welcome&quot; /&gt;\r\n    &lt;mvc:view-controller path=&quot;/login&quot; view-name=&quot;login&quot; /&gt;\r\n\r\nAnd `login.jsp` looks like this:  \r\n  \r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot; ?&gt;\r\n    &lt;%@taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;\r\n    &lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot;    pageEncoding=&quot;ISO-8859-1&quot;%&gt;\r\n    &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;\r\n    &lt;html&gt;\r\n    &lt;head&gt;\r\n        &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=ISO-8859-1&quot; /&gt;\r\n        &lt;title&gt;Custom Login page&lt;/title&gt;\r\n        &lt;style&gt;.error {color: red;}&lt;/style&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n        &lt;div class=&quot;container&quot;&gt;\r\n            &lt;h1&gt;Custom Login page&lt;/h1&gt;\r\n            &lt;p&gt;\r\n            &lt;c:if test=&quot;${error == true}&quot;&gt;\r\n            \t&lt;b class=&quot;error&quot;&gt;Invalid login or password or pin.&lt;/b&gt;\r\n            &lt;/c:if&gt;\r\n            &lt;/p&gt;\r\n            &lt;form method=&quot;post&quot; action=&quot;&lt;c:url value=&#39;j_spring_security_check&#39;/&gt;&quot; &gt;\r\n            &lt;table&gt;\r\n            &lt;tbody&gt;\r\n            \t&lt;tr&gt;\r\n            \t\t&lt;td&gt;Login:&lt;/td&gt;\r\n            \t\t&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;j_username&quot; id=&quot;j_username&quot;size=&quot;30&quot; maxlength=&quot;40&quot;  /&gt;&lt;/td&gt;\r\n            \t&lt;/tr&gt;\r\n            \t&lt;tr&gt;\r\n            \t\t&lt;td&gt;Password:&lt;/td&gt;\r\n            \t\t&lt;td&gt;&lt;input type=&quot;password&quot; name=&quot;j_password&quot; id=&quot;j_password&quot; size=&quot;30&quot; maxlength=&quot;32&quot; /&gt;&lt;/td&gt;\r\n            \t&lt;/tr&gt;\r\n            \t&lt;tr&gt;\r\n            \t\t&lt;td&gt;Pin:&lt;/td&gt;\r\n            \t\t&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;pin&quot; id=&quot;pin&quot;size=&quot;30&quot; maxlength=&quot;40&quot;  /&gt;&lt;/td&gt;\r\n            \t&lt;/tr&gt;\r\n            \t&lt;tr&gt;\r\n            \t&lt;td colspan=2&gt;\r\n            \t\t  &lt;input type=&quot;hidden&quot; name=&quot;${_csrf.parameterName}&quot; value=&quot;${_csrf.token}&quot;/&gt;\r\n                &lt;/td&gt;\r\n            \t&lt;/tr&gt;\r\n            \t&lt;tr&gt;\r\n            \t\t&lt;td&gt;&lt;/td&gt;\r\n            \t\t&lt;td&gt;&lt;input type=&quot;submit&quot; value=&quot;Login&quot; /&gt;&lt;/td&gt;\r\n            \t&lt;/tr&gt;\r\n            &lt;/tbody&gt;\r\n            &lt;/table&gt;\r\n        &lt;/form&gt;\t\r\n        &lt;/div&gt;\r\n        &lt;/body&gt;\r\n    &lt;/html&gt;  \r\n\t\r\nThe spring security dependencies in &#39;pom.xml&#39; are:  \r\n  \r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;\r\n        &lt;version&gt;3.2.2.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\r\n        &lt;version&gt;3.2.2.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\r\n        &lt;version&gt;3.2.2.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-security-taglibs&lt;/artifactId&gt;\r\n        &lt;version&gt;3.2.2.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n   \r\n-----------------------------------------------------------------------------  \r\n  \r\nDownload and reproduce on your machine\r\n---\r\n    \r\nI have also uploaded a working Eclipse project which contains the bare minimum code required to reproduce the problem on your local devbox. You can download the Eclipse project here:\r\n\r\n{ File now deleted }\r\n  \r\nOnce you have downloaded the zipped project, you can reproduce the problem on your machine by following these steps:  \r\n  \r\n1.) Unzip the zip file to a new folder  \r\n  \r\n2.) In Eclipse, do `File &gt; Import &gt; Existing Maven Projects`  \r\n  \r\n3.) Click `Next`. Browse to folder of unzipped project.  Complete wizard to import project.  \r\n  \r\n4.) Right click on project name in eclipse and do `Maven &gt; Download sources`\r\n  \r\n5.) Right click on project name again in eclipse and do `Maven &gt; Update project`\r\n  \r\n6.) Open MySQL and create an empty new database called `somedb`\r\n  \r\n7.) In the Eclipse project, open `data-access.properties` as shown in the following picture, and change `someusername` and `somepassword` to your real username and password for your MySQL.\r\n\r\n{ Image host not available }\r\n\r\n8.) In Eclipse, right click the project and chose `Run As .. Run on server..` .  This should launch the app so that you see the following in your browser at the `http://localhost:8080/n_factor_auth/` url:  \r\n\r\n{ Image host not available }\r\n\r\n9.) Change the URL to `http://localhost:8080/n_factor_auth/secure-home` to see that you were redirected to `http://localhost:8080/n_factor_auth/login` which serves the sample custom login page, which requires a pin in addition to the username and password.  Note that the result needs to accommodate `n-factors` and not simply adding a single pin code:  \r\n\r\n{ Image host not available }\r\n\r\n10.) Insert test credentials into the MySQL database by running the following SQL commands, which you could put in a `.sql` file and run from the MySQL command line using the `source` command.  Note that the database objects will be deleted and recreated empty every time the app starts because `hbm2ddl` is enabled to simplify this example.  Thus, the following SQL commands will need to be re-run every time you reload the app in Eclipse.  \r\n  \r\n    SET FOREIGN_KEY_CHECKS=0;\r\n    INSERT INTO `roles` VALUES (100,&#39;registered&#39;);\r\n    INSERT INTO `user_roles` VALUES (100,100);\r\n    INSERT INTO `users` (id, email,password, phone, pin) VALUES (100,&#39;me@mydomain.com&#39;,&#39;somepassword&#39;,&#39;xxxxxxxxxx&#39;, &#39;yyyy&#39;);\r\n    SET FOREIGN_KEY_CHECKS=1;  \r\n  \r\n11.) Try to login using **any** credentials (valid or invalid), and get the following successful login screen (Note that the user gets logged in whether or not they give valid credentials):\r\n\r\n{ Image host not available }\r\n\r\nThat&#39;s it.  You now have the problem recreated on your machine, including all the code shown above, but in a working minimalist eclipse project.  So now how do you answer the OP above?  What changes do you make to the code above, and what else do you do in order to get the custom authenticator to engage upon login?\r\n   \r\nI am interested to learn what specific changes need to be made to the minimalist download app in order to enable n-factor authentication.  I will validate by checking your suggestions in the sample app on my machine.\r\n  \r\nThanks to various people (including M.Deinum) who have suggested deleting redundant XML config to create the current version shown in this posting.","title":"Using Java configuration for n-factor authentication","body":"<p>In a Spring MVC app using Spring Security, I want to use a custom <code>AuthenticationProvider</code> to check <strong>n-number</strong> of additional fields beyond the default <code>username</code> and <code>password</code>.  For example, if a user wants to authenticate, I want her to have to supplement her username and password with a pin code she receives via email, a pincode she receives via text, and <code>n</code> number of other credentials.  However, to keep this question narrow, let's just focus on adding one additional pin to the login, but let's set it up in a way that enables us to add n-other credentials easily afterwards.</p>\n<p>I want to use Java configuration.</p>\n<p>I have created a custom <code>AuthenticationProvider</code>, a custom <code>AuthenticationFilter</code>, custom <code>UserDetailsService</code>, and a few other changes.</p>\n<p>But the app is granting access when a user tries to log in whether or not the user has valid credentials, as shown in a screen shot in the instructions for reproducing the problem below.  What specific changes need to be made to the code that I am sharing so that the custom n-factor authentication can function properly?</p>\n<p>The structure of my test project is shown in the following screen shots:</p>\n<p>Here is the Java code structure in eclipse project explorer:</p>\n<p>{ Image host not available }</p>\n<p>The XML config files can be located by scrolling down in project explorer to show the following:</p>\n<p>{ Image host not available }</p>\n<p>The view code can be found by scrolling a little further down in project explorer as follows:</p>\n<p>{ Image host not available }</p>\n<p>You can download and explore all this code in a working Eclipse project:</p>\n<p>{ File now deleted }</p>\n<p><code>CustomAuthenticationProvider.java</code> is:</p>\n<pre><code>package my.app.config;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport org.springframework.security.authentication.AuthenticationProvider;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.core.AuthenticationException;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\n\npublic class CustomAuthenticationProvider implements AuthenticationProvider{\n\n    @Override\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\n        String name = authentication.getName();\n        String password = authentication.getCredentials().toString();\n        List&lt;GrantedAuthority&gt; grantedAuths = new ArrayList&lt;&gt;();\n        if (name.equals(&quot;admin&quot;) &amp;&amp; password.equals(&quot;system&quot;)) {\n            grantedAuths.add(new SimpleGrantedAuthority(&quot;ROLE_ADMIN&quot;));  \n        } \n        if(pincodeEntered(name)){\n            grantedAuths.add(new SimpleGrantedAuthority(&quot;registered&quot;));  \n        }\n        Authentication auth = new UsernamePasswordAuthenticationToken(name, password, grantedAuths);\n        return auth;\n    }\n\n    @Override\n    public boolean supports(Class&lt;?&gt; authentication) {\n        return authentication.equals(UsernamePasswordAuthenticationToken.class);\n    }\n\n    private boolean pincodeEntered(String userName){\n        // do your check here\n        return true;\n    }\n}\n</code></pre>\n<p><code>MessageSecurityWebApplicationInitializer.java</code> is:</p>\n<pre><code>package my.app.config;\n\nimport org.springframework.core.annotation.Order;\nimport org.springframework.security.web.context.AbstractSecurityWebApplicationInitializer;\n\n@Order(2)\npublic class MessageSecurityWebApplicationInitializer extends AbstractSecurityWebApplicationInitializer {\n}\n</code></pre>\n<p><code>TwoFactorAuthenticationFilter.java</code> is:</p>\n<pre><code>package my.app.config;\n\nimport javax.servlet.http.HttpServletRequest;\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\n\npublic class TwoFactorAuthenticationFilter extends UsernamePasswordAuthenticationFilter\n{\n    private String extraParameter = &quot;extra&quot;;\n    private String delimiter = &quot;:&quot;;\n\n\n    /**\n     * Given an {@link HttpServletRequest}, this method extracts the username and the extra input\n     * values and returns a combined username string of those values separated by the delimiter\n     * string.\n     *\n     * @param request The {@link HttpServletRequest} containing the HTTP request variables from\n     *   which the username client domain values can be extracted\n     */\n    @Override\n    protected String obtainUsername(HttpServletRequest request){\n        String username = request.getParameter(getUsernameParameter());\n        String extraInput = request.getParameter(getExtraParameter());\n        String combinedUsername = username + getDelimiter() + extraInput;\n        System.out.println(&quot;Combined username = &quot; + combinedUsername);\n        return combinedUsername;\n    }\n\n    /**\n     * @return The parameter name which will be used to obtain the extra input from the login request\n     */\n    public String getExtraParameter(){\n        return this.extraParameter;\n    }\n\n    /**\n     * @param extraParameter The parameter name which will be used to obtain the extra input from the login request\n     */\n    public void setExtraParameter(String extraParameter){\n        this.extraParameter = extraParameter;\n    }\n\n    /**\n     * @return The delimiter string used to separate the username and extra input values in the\n     * string returned by &lt;code&gt;obtainUsername()&lt;/code&gt;\n     */\n    public String getDelimiter(){\n        return this.delimiter;\n    }\n\n    /**\n     * @param delimiter The delimiter string used to separate the username and extra input values in the\n     * string returned by &lt;code&gt;obtainUsername()&lt;/code&gt;\n     */\n    public void setDelimiter(String delimiter){\n        this.delimiter = delimiter;\n    }\n}\n</code></pre>\n<p><code>SecurityConfig.java</code> is:</p>\n<pre><code>package my.app.config;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationProvider;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.config.annotation.web.servlet.configuration.EnableWebMvcSecurity;\n\n@Configuration\n@EnableWebMvcSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    public void registerGlobalAuthentication(AuthenticationManagerBuilder auth) throws Exception {\n            auth.authenticationProvider(customAuthenticationProvider());\n    }\n\n    @Bean\n    AuthenticationProvider customAuthenticationProvider() {\n            CustomAuthenticationProvider impl = new CustomAuthenticationProvider();\n            return impl ;\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n            .csrf().disable()\n            .formLogin()\n                .loginPage(&quot;/login&quot;)\n                .defaultSuccessUrl(&quot;/secure-home&quot;)\n                .usernameParameter(&quot;j_username&quot;)\n                .passwordParameter(&quot;j_password&quot;)\n                .loginProcessingUrl(&quot;/j_spring_security_check&quot;)\n                .failureUrl(&quot;/login&quot;)\n                .permitAll()\n                .and()\n            .logout()\n                .logoutUrl(&quot;/logout&quot;)\n                .logoutSuccessUrl(&quot;/login&quot;)\n                .and()\n            .authorizeRequests()\n                .antMatchers(&quot;/secure-home&quot;).hasAuthority(&quot;registered&quot;)\n                .antMatchers(&quot;/j_spring_security_check&quot;).permitAll()\n                .and()\n            .userDetailsService(userDetailsService());\n    }\n}\n</code></pre>\n<p><code>User.java</code> is:</p>\n<pre><code>package my.app.model;\n\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.HashSet;\nimport java.util.Set;\n\nimport javax.persistence.CascadeType;\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.JoinTable;\nimport javax.persistence.ManyToMany;\nimport javax.persistence.Table;\n\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\n\n@Entity\n@Table(name=&quot;users&quot;)\npublic class User implements UserDetails{\n\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue\n    private Integer id;\n\n    @Column(name= &quot;email&quot;, unique=true, nullable=false)\n    private String login;//must be a valid email address\n\n    @Column(name = &quot;password&quot;)\n    private String password;\n\n    @Column(name = &quot;phone&quot;)\n    private String phone;\n\n    @Column(name = &quot;pin&quot;)\n    private String pin;\n\n    @Column(name = &quot;sessionid&quot;)\n    private String sessionId;\n\n    @ManyToMany(cascade=CascadeType.ALL, fetch=FetchType.EAGER)\n    @JoinTable(name=&quot;user_roles&quot;,\n        joinColumns = {@JoinColumn(name=&quot;user_id&quot;, referencedColumnName=&quot;id&quot;)},\n        inverseJoinColumns = {@JoinColumn(name=&quot;role_id&quot;, referencedColumnName=&quot;id&quot;)}\n    )\n    private Set&lt;Role&gt; roles;\n\n    public Integer getId() {return id;}\n    public void setId(Integer id) { this.id = id;}\n\n    public String getPhone(){return phone;}\n    public void setPhone(String pn){phone = pn;}\n\n    public String getPin(){return pin;}\n    public void setPin(String pi){pin = pi;}\n\n    public String getSessionId(){return sessionId;}\n    public void setSessionId(String sd){sessionId = sd;}\n\n    public String getLogin() {\n        return login;\n    }\n\n    public void setLogin(String login) {\n        this.login = login;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    //roles methods\n    public void addRole(Role alg) {roles.add(alg);}\n    public Set&lt;Role&gt; getRoles(){\n        if(this.roles==null){this.roles = new HashSet&lt;Role&gt;();}\n        return this.roles;\n    }\n    public void setRoles(Set&lt;Role&gt; alg){this.roles = alg;}\n    public boolean isInRoles(int aid){\n        ArrayList&lt;Role&gt; mylgs = new ArrayList&lt;Role&gt;();\n        mylgs.addAll(this.roles);\n        for(int a=0;a&lt;mylgs.size();a++){if(mylgs.get(a).getId()==aid){return true;}}\n        return false;\n    }\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        // TODO Auto-generated method stub\n        return null;\n    }\n\n    @Override\n    public String getUsername() {\n        // TODO Auto-generated method stub\n        return null;\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        // TODO Auto-generated method stub\n        return false;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        // TODO Auto-generated method stub\n        return false;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        // TODO Auto-generated method stub\n        return false;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        // TODO Auto-generated method stub\n        return false;\n    }\n}\n</code></pre>\n<p>The xml config is in <code>business-config.xml</code> and is:</p>\n<pre><code>&lt;beans profile=&quot;default,spring-data-jpa&quot;&gt;\n    &lt;!-- lots of other stuff --&gt;\n    &lt;bean class=&quot;my.app.config.SecurityConfig&quot;&gt;&lt;/bean&gt;\n&lt;/beans&gt;  \n\n&lt;!-- lots of unrelated stuff --&gt;\n</code></pre>\n<p>In addition, <code>mvc-core-config.xml</code> contains the following:</p>\n<pre><code>&lt;!-- lots of other stuff --&gt;\n&lt;mvc:view-controller path=&quot;/&quot; view-name=&quot;welcome&quot; /&gt;\n&lt;mvc:view-controller path=&quot;/login&quot; view-name=&quot;login&quot; /&gt;\n</code></pre>\n<p>And <code>login.jsp</code> looks like this:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot; ?&gt;\n&lt;%@taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;\n&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot;    pageEncoding=&quot;ISO-8859-1&quot;%&gt;\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=ISO-8859-1&quot; /&gt;\n    &lt;title&gt;Custom Login page&lt;/title&gt;\n    &lt;style&gt;.error {color: red;}&lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div class=&quot;container&quot;&gt;\n        &lt;h1&gt;Custom Login page&lt;/h1&gt;\n        &lt;p&gt;\n        &lt;c:if test=&quot;${error == true}&quot;&gt;\n            &lt;b class=&quot;error&quot;&gt;Invalid login or password or pin.&lt;/b&gt;\n        &lt;/c:if&gt;\n        &lt;/p&gt;\n        &lt;form method=&quot;post&quot; action=&quot;&lt;c:url value='j_spring_security_check'/&gt;&quot; &gt;\n        &lt;table&gt;\n        &lt;tbody&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Login:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;j_username&quot; id=&quot;j_username&quot;size=&quot;30&quot; maxlength=&quot;40&quot;  /&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Password:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;password&quot; name=&quot;j_password&quot; id=&quot;j_password&quot; size=&quot;30&quot; maxlength=&quot;32&quot; /&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Pin:&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;pin&quot; id=&quot;pin&quot;size=&quot;30&quot; maxlength=&quot;40&quot;  /&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n            &lt;td colspan=2&gt;\n                  &lt;input type=&quot;hidden&quot; name=&quot;${_csrf.parameterName}&quot; value=&quot;${_csrf.token}&quot;/&gt;\n            &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;input type=&quot;submit&quot; value=&quot;Login&quot; /&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/tbody&gt;\n        &lt;/table&gt;\n    &lt;/form&gt; \n    &lt;/div&gt;\n    &lt;/body&gt;\n&lt;/html&gt;  \n</code></pre>\n<p>The spring security dependencies in 'pom.xml' are:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;\n    &lt;version&gt;3.2.2.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\n    &lt;version&gt;3.2.2.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\n    &lt;version&gt;3.2.2.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-security-taglibs&lt;/artifactId&gt;\n    &lt;version&gt;3.2.2.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<hr />\n<h2>Download and reproduce on your machine</h2>\n<p>I have also uploaded a working Eclipse project which contains the bare minimum code required to reproduce the problem on your local devbox. You can download the Eclipse project here:</p>\n<p>{ File now deleted }</p>\n<p>Once you have downloaded the zipped project, you can reproduce the problem on your machine by following these steps:</p>\n<p>1.) Unzip the zip file to a new folder</p>\n<p>2.) In Eclipse, do <code>File &gt; Import &gt; Existing Maven Projects</code></p>\n<p>3.) Click <code>Next</code>. Browse to folder of unzipped project.  Complete wizard to import project.</p>\n<p>4.) Right click on project name in eclipse and do <code>Maven &gt; Download sources</code></p>\n<p>5.) Right click on project name again in eclipse and do <code>Maven &gt; Update project</code></p>\n<p>6.) Open MySQL and create an empty new database called <code>somedb</code></p>\n<p>7.) In the Eclipse project, open <code>data-access.properties</code> as shown in the following picture, and change <code>someusername</code> and <code>somepassword</code> to your real username and password for your MySQL.</p>\n<p>{ Image host not available }</p>\n<p>8.) In Eclipse, right click the project and chose <code>Run As .. Run on server..</code> .  This should launch the app so that you see the following in your browser at the <code>http://localhost:8080/n_factor_auth/</code> url:</p>\n<p>{ Image host not available }</p>\n<p>9.) Change the URL to <code>http://localhost:8080/n_factor_auth/secure-home</code> to see that you were redirected to <code>http://localhost:8080/n_factor_auth/login</code> which serves the sample custom login page, which requires a pin in addition to the username and password.  Note that the result needs to accommodate <code>n-factors</code> and not simply adding a single pin code:</p>\n<p>{ Image host not available }</p>\n<p>10.) Insert test credentials into the MySQL database by running the following SQL commands, which you could put in a <code>.sql</code> file and run from the MySQL command line using the <code>source</code> command.  Note that the database objects will be deleted and recreated empty every time the app starts because <code>hbm2ddl</code> is enabled to simplify this example.  Thus, the following SQL commands will need to be re-run every time you reload the app in Eclipse.</p>\n<pre><code>SET FOREIGN_KEY_CHECKS=0;\nINSERT INTO `roles` VALUES (100,'registered');\nINSERT INTO `user_roles` VALUES (100,100);\nINSERT INTO `users` (id, email,password, phone, pin) VALUES (100,'me@mydomain.com','somepassword','xxxxxxxxxx', 'yyyy');\nSET FOREIGN_KEY_CHECKS=1;  \n</code></pre>\n<p>11.) Try to login using <strong>any</strong> credentials (valid or invalid), and get the following successful login screen (Note that the user gets logged in whether or not they give valid credentials):</p>\n<p>{ Image host not available }</p>\n<p>That's it.  You now have the problem recreated on your machine, including all the code shown above, but in a working minimalist eclipse project.  So now how do you answer the OP above?  What changes do you make to the code above, and what else do you do in order to get the custom authenticator to engage upon login?</p>\n<p>I am interested to learn what specific changes need to be made to the minimalist download app in order to enable n-factor authentication.  I will validate by checking your suggestions in the sample app on my machine.</p>\n<p>Thanks to various people (including M.Deinum) who have suggested deleting redundant XML config to create the current version shown in this posting.</p>\n"},{"tags":["java","spring","spring-boot","hibernate","spring-mvc"],"comments":[{"owner":{"account_id":9929339,"reputation":1941,"user_id":7349864,"display_name":"Sourcerer"},"score":0,"creation_date":1610478749,"post_id":65430810,"comment_id":116145065,"body_markdown":"Have you done any progress on it? I&#39;m suffering the same issue...","body":"Have you done any progress on it? I&#39;m suffering the same issue..."},{"owner":{"account_id":11090079,"reputation":133,"user_id":8142290,"display_name":"Vee Dee"},"score":0,"creation_date":1613042356,"post_id":65430810,"comment_id":116956302,"body_markdown":"The answer posted by @Piotr below is the correct one. This was exactly the issue i was facing in my case and importing the spring-cloud-starter-bootstrap resolved my issue.","body":"The answer posted by @Piotr below is the correct one. This was exactly the issue i was facing in my case and importing the spring-cloud-starter-bootstrap resolved my issue."}],"answers":[{"comments":[{"owner":{"account_id":11090079,"reputation":133,"user_id":8142290,"display_name":"Vee Dee"},"score":0,"creation_date":1613042388,"post_id":65778668,"comment_id":116956317,"body_markdown":"Yes, this was exactly the thing i needed. Thanks a lot for your help :))","body":"Yes, this was exactly the thing i needed. Thanks a lot for your help :))"}],"tags":[],"owner":{"account_id":16476095,"reputation":540,"user_id":11904038,"display_name":"Piotr"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1610988285,"creation_date":1610988285,"answer_id":65778668,"question_id":65430810,"body_markdown":"2020.0.0 Spring Cloud Config does not support bootstrap file. \r\n\r\n&gt; For a workaround use bootstrap.{yml|properties} and add a dependency on\r\n&gt; spring-cloud-starter-bootstrap to restore the old behavior.\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nMore information:  \r\n[https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-2020.0-Release-Notes#breaking-changes][1]\r\n\r\n\r\n  [1]: https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-2020.0-Release-Notes#breaking-changes","title":"Config Client is not working in Spring boot","body":"<p>2020.0.0 Spring Cloud Config does not support bootstrap file.</p>\n<blockquote>\n<p>For a workaround use bootstrap.{yml|properties} and add a dependency on\nspring-cloud-starter-bootstrap to restore the old behavior.</p>\n</blockquote>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>More information:<br />\n<a href=\"https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-2020.0-Release-Notes#breaking-changes\" rel=\"noreferrer\">https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-2020.0-Release-Notes#breaking-changes</a></p>\n"},{"tags":[],"owner":{"account_id":8920847,"reputation":490,"user_id":6657484,"display_name":"ayman.mostafa"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1614262340,"creation_date":1614262340,"answer_id":66370177,"question_id":65430810,"body_markdown":"However, this was working before, but now and as mentioned above you have to your client project\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n\r\nspring-boot ver=2.4.3\r\n\r\nspring-cloud ver=2020.0.1\r\n\r\nAlso, you can set the below property in your bootstrap. properties to make the client project fails to startup if fails to connect to the config server:\r\n\r\n    spring.cloud.config.fail-fast=true\r\n","title":"Config Client is not working in Spring boot","body":"<p>However, this was working before, but now and as mentioned above you have to your client project</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>spring-boot ver=2.4.3</p>\n<p>spring-cloud ver=2020.0.1</p>\n<p>Also, you can set the below property in your bootstrap. properties to make the client project fails to startup if fails to connect to the config server:</p>\n<pre><code>spring.cloud.config.fail-fast=true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13782778,"reputation":935,"user_id":9947525,"display_name":"Fazal Haroon"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675452136,"creation_date":1674760829,"answer_id":75250742,"question_id":65430810,"body_markdown":"To resolve this problem in Spring Cloud Config\r\n\r\nIf you are using a 2.4.0 or greater version of **spring boot** and \r\nIf you are using the 2020.0.0 or greater version of **spring-cloud**.\r\n\r\nyou need to add this dependency to the **pom.xml** (spring-cloud-config-client)\r\n\r\n        &lt;dependency&gt;\r\n           &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n           &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\r\n       &lt;/dependency&gt;\r\n\r\nExample of my **pom.xml** (spring-cloud-config-client)\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.7.8&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;pay-service&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;pay-service&lt;/name&gt;\r\n    \t&lt;description&gt;Pay project for Spring Boot&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n    \t\t&lt;spring-cloud.version&gt;2021.0.5&lt;/spring-cloud.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \t&lt;dependencyManagement&gt;\r\n    \t\t&lt;dependencies&gt;\r\n    \t\t\t&lt;dependency&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n    \t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n    \t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n    \t\t\t&lt;/dependency&gt;\r\n    \t\t&lt;/dependencies&gt;\r\n    \t&lt;/dependencyManagement&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\nTry like this, I hope it will work\r\n\r\nSometimes, it happen because you added the **&#39;config client of spring cloud config&#39;** dependency, it required configuration in **application.properties**, add the configuration of your config server so you see the example below\r\n\r\nsrc/main/resources/application.properties\r\n\r\n    server.port=8100\r\n    spring.config.import=optional:configserver:http://localhost:8888\r\n\r\n**Note:** SNAPSHOT, M1, M2, M3, and M4 releases typically WORK IN PROGRESS. The Spring team is still working on them, Recommend NOT using them.\r\n       \r\n","title":"Config Client is not working in Spring boot","body":"<p>To resolve this problem in Spring Cloud Config</p>\n<p>If you are using a 2.4.0 or greater version of <strong>spring boot</strong> and\nIf you are using the 2020.0.0 or greater version of <strong>spring-cloud</strong>.</p>\n<p>you need to add this dependency to the <strong>pom.xml</strong> (spring-cloud-config-client)</p>\n<pre><code>    &lt;dependency&gt;\n       &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n       &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\n   &lt;/dependency&gt;\n</code></pre>\n<p>Example of my <strong>pom.xml</strong> (spring-cloud-config-client)</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.8&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;pay-service&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;pay-service&lt;/name&gt;\n    &lt;description&gt;Pay project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;spring-cloud.version&gt;2021.0.5&lt;/spring-cloud.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Try like this, I hope it will work</p>\n<p>Sometimes, it happen because you added the <strong>'config client of spring cloud config'</strong> dependency, it required configuration in <strong>application.properties</strong>, add the configuration of your config server so you see the example below</p>\n<p>src/main/resources/application.properties</p>\n<pre><code>server.port=8100\nspring.config.import=optional:configserver:http://localhost:8888\n</code></pre>\n<p><strong>Note:</strong> SNAPSHOT, M1, M2, M3, and M4 releases typically WORK IN PROGRESS. The Spring team is still working on them, Recommend NOT using them.</p>\n"}],"owner":{"account_id":11090079,"reputation":133,"user_id":8142290,"display_name":"Vee Dee"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8246,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":65778668,"answer_count":3,"score":2,"last_activity_date":1675452136,"creation_date":1608756774,"question_id":65430810,"body_markdown":"**Config Client is not working in Spring boot**\r\n\r\nI was trying out config server client in Spring boot and came across this weird issue.\r\n\r\nI have been able to successfully spin up the config server up and running but while trying to start the config client/consumer, it seems like the client isn&#39;t fetching any information from the config server.\r\n\r\n**Output while running client:**\r\n```\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::                (v2.4.1)\r\n\r\n2020-12-24 02:01:28.717  INFO 3000 --- [           main] c.r.service.profile.ProfileApplication   : Starting ProfileApplication using Java 1.8.0_121 on DESKTOP-RID7KR with PID 3000 (E:\\Spring\\rent-a-car\\profile\\target\\classes started by Dawg in E:\\Spring\\rent-a-car\\profile)\r\n2020-12-24 02:01:28.727  INFO 3000 --- [           main] c.r.service.profile.ProfileApplication   : No active profile set, falling back to default profiles: default\r\n2020-12-24 02:01:30.161  INFO 3000 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n2020-12-24 02:01:30.263  INFO 3000 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 82 ms. Found 1 JPA repository interfaces.\r\n2020-12-24 02:01:30.642  INFO 3000 --- [           main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=99ce795d-c5e8-3f6e-87d9-3efbe096b86a\r\n2020-12-24 02:01:32.012  INFO 3000 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n2020-12-24 02:01:32.027  INFO 3000 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2020-12-24 02:01:32.027  INFO 3000 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.41]\r\n2020-12-24 02:01:32.287  INFO 3000 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2020-12-24 02:01:32.287  INFO 3000 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3430 ms\r\n2020-12-24 02:01:32.431  WARN 3000 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.cloud.autoconfigure.RefreshAutoConfiguration$JpaInvokerConfiguration&#39;: Invocation of init method failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.boot.autoconfigure.jdbc.DataSourceInitializerInvoker&#39;: Invocation of init method failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method &#39;dataSource&#39; threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\r\n2020-12-24 02:01:32.444  INFO 3000 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\n2020-12-24 02:01:32.478  INFO 3000 --- [           main] ConditionEvaluationReportLoggingListener : \r\n\r\nError starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n2020-12-24 02:01:32.513 ERROR 3000 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \r\n\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nFailed to configure a DataSource: &#39;url&#39; attribute is not specified and no embedded datasource could be configured.\r\n\r\nReason: Failed to determine a suitable driver class\r\n\r\n\r\nAction:\r\n\r\nConsider the following:\r\n\tIf you want an embedded database (H2, HSQL or Derby), please put it on the classpath.\r\n\tIf you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).\r\n\r\n\r\nProcess finished with exit code 1\r\n\r\n```\r\n\r\n\r\n**bootstrap.yml** (config-client)\r\n\r\n```\r\nspring:\r\n  application:\r\n    name: profile\r\n  profiles:\r\n    active: prod\r\n  cloud:\r\n    config:\r\n      name: profile\r\n      uri: http://localhost:8181\r\n```\r\nHave not included any **application.yml** file for config-client.\r\n\r\nMy config server is up on port 8181 and i am able to fetch the config from github successfully,\r\n\r\nSample success response:\r\n\r\n```\r\n{\r\n   &quot;name&quot;:&quot;profile&quot;,\r\n   &quot;profiles&quot;:[\r\n      &quot;prod&quot;\r\n   ],\r\n   &quot;label&quot;:null,\r\n   &quot;version&quot;:&quot;24275f56bf516d847f171c9fc419ddef141bd39b&quot;,\r\n   &quot;state&quot;:null,\r\n   &quot;propertySources&quot;:[\r\n      {\r\n         &quot;name&quot;:&quot;https://github.com/vishu221b/rentaca-config-store.git/file:C:\\\\Users\\\\Vishal\\\\AppData\\\\Local\\\\Temp\\\\config-repo-2331899650646506\\\\service-config\\\\profile-service\\\\profile-prod.yml&quot;,\r\n         &quot;source&quot;:{\r\n            &quot;server.port&quot;:8081\r\n         }\r\n      },\r\n      {\r\n         &quot;name&quot;:&quot;https://github.com/vishu221b/rentaca-config-store.git/file:C:\\\\Users\\\\Vishal\\\\AppData\\\\Local\\\\Temp\\\\config-repo-2331899650646506\\\\application.yml&quot;,\r\n         &quot;source&quot;:{\r\n            &quot;spring.datasource.url&quot;:&quot;jdbc:postgresql://127.0.0.1:5432/rent-a-car?createDatabaseIfNotExist=true&quot;,\r\n            &quot;spring.datasource.username&quot;:&quot;cofix&quot;,\r\n            &quot;spring.datasource.password&quot;:&quot;C0fiX&quot;,\r\n            &quot;spring.datasource.driver-class-name&quot;:&quot;org.postgresql.Driver&quot;,\r\n            &quot;spring.jpa.hibernate.naming.physical-strategy&quot;:&quot;org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl&quot;,\r\n            &quot;spring.jpa.properties.hibernate.dialect&quot;:&quot;org.hibernate.dialect.PostgreSQLDialect&quot;\r\n         }\r\n      }\r\n   ]\r\n}\r\n```\r\n\r\nI know there must be some key/value errors in the files above, i&#39;ll manage that but only given that my config-client starts fetching config from my config-server running successfully.\r\nThere is no security in my config-server so i won&#39;t need username, password.\r\n\r\n**pom.xml** (config-client)\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.4.1&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.reantacar.service&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;profile&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;profile&lt;/name&gt;\r\n\t&lt;description&gt;Profile service for Rent A Car application.&lt;/description&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t\t&lt;spring-cloud.version&gt;2020.0.0&lt;/spring-cloud.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-config --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n&lt;!--\t\t&amp;lt;!&amp;ndash;The jar needs to be imported to make the bootstrap.yml configuration file take effect &amp;ndash;&amp;gt;--&gt;\r\n&lt;!--\t\t&lt;dependency&gt;--&gt;\r\n&lt;!--\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;--&gt;\r\n&lt;!--\t\t\t&lt;artifactId&gt;spring-cloud-context&lt;/artifactId&gt;--&gt;\r\n&lt;!--\t\t&lt;/dependency&gt;--&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.rentacar.commons&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n\t&lt;repositories&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;spring-milestones&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Spring Milestones&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n\t\t&lt;/repository&gt;\r\n\t&lt;/repositories&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n**PS:** I have tried debugging this a lot over other stackoverflow questions and official docs on internet, but nothing seems to be fixing my issue. Initially i thought that my bootstrap.yml file must not be loading for some reasons, but now i am feeling that the config isn&#39;t working for my client at all because in the startup log it is mentioned that configuration from specific config-server-name/link:port was being tried to be fetched. \r\nAlso, please ignore the errors in my grammar :) ","title":"Config Client is not working in Spring boot","body":"<p><strong>Config Client is not working in Spring boot</strong></p>\n<p>I was trying out config server client in Spring boot and came across this weird issue.</p>\n<p>I have been able to successfully spin up the config server up and running but while trying to start the config client/consumer, it seems like the client isn't fetching any information from the config server.</p>\n<p><strong>Output while running client:</strong></p>\n<pre><code>  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v2.4.1)\n\n2020-12-24 02:01:28.717  INFO 3000 --- [           main] c.r.service.profile.ProfileApplication   : Starting ProfileApplication using Java 1.8.0_121 on DESKTOP-RID7KR with PID 3000 (E:\\Spring\\rent-a-car\\profile\\target\\classes started by Dawg in E:\\Spring\\rent-a-car\\profile)\n2020-12-24 02:01:28.727  INFO 3000 --- [           main] c.r.service.profile.ProfileApplication   : No active profile set, falling back to default profiles: default\n2020-12-24 02:01:30.161  INFO 3000 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2020-12-24 02:01:30.263  INFO 3000 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 82 ms. Found 1 JPA repository interfaces.\n2020-12-24 02:01:30.642  INFO 3000 --- [           main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=99ce795d-c5e8-3f6e-87d9-3efbe096b86a\n2020-12-24 02:01:32.012  INFO 3000 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2020-12-24 02:01:32.027  INFO 3000 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2020-12-24 02:01:32.027  INFO 3000 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.41]\n2020-12-24 02:01:32.287  INFO 3000 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2020-12-24 02:01:32.287  INFO 3000 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3430 ms\n2020-12-24 02:01:32.431  WARN 3000 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.cloud.autoconfigure.RefreshAutoConfiguration$JpaInvokerConfiguration': Invocation of init method failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.boot.autoconfigure.jdbc.DataSourceInitializerInvoker': Invocation of init method failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\n2020-12-24 02:01:32.444  INFO 3000 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2020-12-24 02:01:32.478  INFO 3000 --- [           main] ConditionEvaluationReportLoggingListener : \n\nError starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2020-12-24 02:01:32.513 ERROR 3000 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \n\n***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nFailed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.\n\nReason: Failed to determine a suitable driver class\n\n\nAction:\n\nConsider the following:\n    If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.\n    If you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).\n\n\nProcess finished with exit code 1\n\n</code></pre>\n<p><strong>bootstrap.yml</strong> (config-client)</p>\n<pre><code>spring:\n  application:\n    name: profile\n  profiles:\n    active: prod\n  cloud:\n    config:\n      name: profile\n      uri: http://localhost:8181\n</code></pre>\n<p>Have not included any <strong>application.yml</strong> file for config-client.</p>\n<p>My config server is up on port 8181 and i am able to fetch the config from github successfully,</p>\n<p>Sample success response:</p>\n<pre><code>{\n   &quot;name&quot;:&quot;profile&quot;,\n   &quot;profiles&quot;:[\n      &quot;prod&quot;\n   ],\n   &quot;label&quot;:null,\n   &quot;version&quot;:&quot;24275f56bf516d847f171c9fc419ddef141bd39b&quot;,\n   &quot;state&quot;:null,\n   &quot;propertySources&quot;:[\n      {\n         &quot;name&quot;:&quot;https://github.com/vishu221b/rentaca-config-store.git/file:C:\\\\Users\\\\Vishal\\\\AppData\\\\Local\\\\Temp\\\\config-repo-2331899650646506\\\\service-config\\\\profile-service\\\\profile-prod.yml&quot;,\n         &quot;source&quot;:{\n            &quot;server.port&quot;:8081\n         }\n      },\n      {\n         &quot;name&quot;:&quot;https://github.com/vishu221b/rentaca-config-store.git/file:C:\\\\Users\\\\Vishal\\\\AppData\\\\Local\\\\Temp\\\\config-repo-2331899650646506\\\\application.yml&quot;,\n         &quot;source&quot;:{\n            &quot;spring.datasource.url&quot;:&quot;jdbc:postgresql://127.0.0.1:5432/rent-a-car?createDatabaseIfNotExist=true&quot;,\n            &quot;spring.datasource.username&quot;:&quot;cofix&quot;,\n            &quot;spring.datasource.password&quot;:&quot;C0fiX&quot;,\n            &quot;spring.datasource.driver-class-name&quot;:&quot;org.postgresql.Driver&quot;,\n            &quot;spring.jpa.hibernate.naming.physical-strategy&quot;:&quot;org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl&quot;,\n            &quot;spring.jpa.properties.hibernate.dialect&quot;:&quot;org.hibernate.dialect.PostgreSQLDialect&quot;\n         }\n      }\n   ]\n}\n</code></pre>\n<p>I know there must be some key/value errors in the files above, i'll manage that but only given that my config-client starts fetching config from my config-server running successfully.\nThere is no security in my config-server so i won't need username, password.</p>\n<p><strong>pom.xml</strong> (config-client)</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.4.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.reantacar.service&lt;/groupId&gt;\n    &lt;artifactId&gt;profile&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;profile&lt;/name&gt;\n    &lt;description&gt;Profile service for Rent A Car application.&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;spring-cloud.version&gt;2020.0.0&lt;/spring-cloud.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-config --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n&lt;!--        &amp;lt;!&amp;ndash;The jar needs to be imported to make the bootstrap.yml configuration file take effect &amp;ndash;&amp;gt;--&gt;\n&lt;!--        &lt;dependency&gt;--&gt;\n&lt;!--            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;--&gt;\n&lt;!--            &lt;artifactId&gt;spring-cloud-context&lt;/artifactId&gt;--&gt;\n&lt;!--        &lt;/dependency&gt;--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.rentacar.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons&lt;/artifactId&gt;\n            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p><strong>PS:</strong> I have tried debugging this a lot over other stackoverflow questions and official docs on internet, but nothing seems to be fixing my issue. Initially i thought that my bootstrap.yml file must not be loading for some reasons, but now i am feeling that the config isn't working for my client at all because in the startup log it is mentioned that configuration from specific config-server-name/link:port was being tried to be fetched.\nAlso, please ignore the errors in my grammar :)</p>\n"},{"tags":["java","jsr352","jberet"],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675411514,"creation_date":1675409053,"answer_id":75332652,"question_id":75328038,"body_markdown":"Looking at https://www.ibm.com/support/pages/system/files/inline-files/WP102706_WLB_JSR352.002.pdf, especially the chapters *Chunk/The Processor* and *Chunk/The Writer* it becomes obvious that it is up to me.\r\n\r\nThe processor can return an object, and the writer will have to understand and write this object. So for the above case where the processor has zero, one or many items to write per input record, it should simply return a list. This list can contain zero, one or several elements. The writer has to understand the list and write its elements to the database.\r\n\r\nSince the logic is divided this way, the code is still pluggable and can easily be extended or maintained.\r\n\r\nAddon: Since both reader and writer this time connect to the same database, I perceived the problem that upon commit for each chunk the connection for the reader was also invalidated. The solution was to use a nonJTA datasource for the reader.","title":"How to distribute work correctly in JSR-352?","body":"<p>Looking at <a href=\"https://www.ibm.com/support/pages/system/files/inline-files/WP102706_WLB_JSR352.002.pdf\" rel=\"nofollow noreferrer\">https://www.ibm.com/support/pages/system/files/inline-files/WP102706_WLB_JSR352.002.pdf</a>, especially the chapters <em>Chunk/The Processor</em> and <em>Chunk/The Writer</em> it becomes obvious that it is up to me.</p>\n<p>The processor can return an object, and the writer will have to understand and write this object. So for the above case where the processor has zero, one or many items to write per input record, it should simply return a list. This list can contain zero, one or several elements. The writer has to understand the list and write its elements to the database.</p>\n<p>Since the logic is divided this way, the code is still pluggable and can easily be extended or maintained.</p>\n<p>Addon: Since both reader and writer this time connect to the same database, I perceived the problem that upon commit for each chunk the connection for the reader was also invalidated. The solution was to use a nonJTA datasource for the reader.</p>\n"},{"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1675459785,"post_id":75340173,"comment_id":132941354,"body_markdown":"If splitting a result over multiple objects is unsuitable for the Chunk step then I should stay with Batchlets? Or what other options are there?","body":"If splitting a result over multiple objects is unsuitable for the Chunk step then I should stay with Batchlets? Or what other options are there?"},{"owner":{"account_id":898267,"reputation":1088,"user_id":935066,"display_name":"cheng"},"score":0,"creation_date":1675635549,"post_id":75340173,"comment_id":132966731,"body_markdown":"I think chunk is still the best option, though it&#39;s not a clear fit with the current standard behavior, it can be made work with the above extra logic in item writer.","body":"I think chunk is still the best option, though it&#39;s not a clear fit with the current standard behavior, it can be made work with the above extra logic in item writer."}],"tags":[],"owner":{"account_id":898267,"reputation":1088,"user_id":935066,"display_name":"cheng"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675452134,"creation_date":1675452134,"answer_id":75340173,"question_id":75328038,"body_markdown":"Typically, an item processor processes an input item passed from an item reader, and the processing result can be null or a domain object. So it&#39;s not suited for your cases where the processing result may be split into multiple objects. I would assume even in your case, multiple objects from a processing iteration is not common. So I would suggest to use list or any collection type as the element type of the processed object only when necessary. In other more common cases, the item processor will still return null (to skip the current processed item) or a domain object.\r\n\r\nWhen the item writer iterates through accumulated items, it can check if it&#39;s a collection and then write out all contained elements. For domain object type, then just write it as usual.\r\n\r\nUsing non-jta datasource for the reader is fine. I think you would want to keep the reader connection open from the start to end to keep reading from the result set. In an item writer, the connection is typically acquired at the beginning of the write operation and closed at the end of the chunk transaction commit or rollback.\r\n\r\nSome resources that may be of help:\r\n\r\n[Jakarta Batch API][1], \r\n[jberet-support JdbcItemReader][2], \r\n[jberet-support JdbcItemWriter][3]\r\n\r\n\r\n  [1]: https://jakarta.ee/specifications/platform/10/apidocs/jakarta/batch/api/chunk/package-tree.html\r\n  [2]: https://github.com/jberet/jberet-support/blob/master/src/main/java/org/jberet/support/io/JdbcItemReader.java\r\n  [3]: https://github.com/jberet/jberet-support/blob/master/src/main/java/org/jberet/support/io/JdbcItemWriter.java","title":"How to distribute work correctly in JSR-352?","body":"<p>Typically, an item processor processes an input item passed from an item reader, and the processing result can be null or a domain object. So it's not suited for your cases where the processing result may be split into multiple objects. I would assume even in your case, multiple objects from a processing iteration is not common. So I would suggest to use list or any collection type as the element type of the processed object only when necessary. In other more common cases, the item processor will still return null (to skip the current processed item) or a domain object.</p>\n<p>When the item writer iterates through accumulated items, it can check if it's a collection and then write out all contained elements. For domain object type, then just write it as usual.</p>\n<p>Using non-jta datasource for the reader is fine. I think you would want to keep the reader connection open from the start to end to keep reading from the result set. In an item writer, the connection is typically acquired at the beginning of the write operation and closed at the end of the chunk transaction commit or rollback.</p>\n<p>Some resources that may be of help:</p>\n<p><a href=\"https://jakarta.ee/specifications/platform/10/apidocs/jakarta/batch/api/chunk/package-tree.html\" rel=\"nofollow noreferrer\">Jakarta Batch API</a>,\n<a href=\"https://github.com/jberet/jberet-support/blob/master/src/main/java/org/jberet/support/io/JdbcItemReader.java\" rel=\"nofollow noreferrer\">jberet-support JdbcItemReader</a>,\n<a href=\"https://github.com/jberet/jberet-support/blob/master/src/main/java/org/jberet/support/io/JdbcItemWriter.java\" rel=\"nofollow noreferrer\">jberet-support JdbcItemWriter</a></p>\n"}],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75332652,"answer_count":2,"score":0,"last_activity_date":1675452134,"creation_date":1675365767,"question_id":75328038,"body_markdown":"So I have been using Java Batch Processing for some time now. My jobs were either import/export jobs which chunked from a reader to a writer, or I would write Batchlets that would do some more complex processing. Since I am beginning to hit memory limits I need to rethink the architecture.\r\n\r\nSo I want to want to better leverage the chunked Reader/Processor/Writer pattern. And apparently I feel unsure how to distribute the work over the three items. During processing it becomes clear whether to write zero, one or several other records. \r\n\r\nThe reader is quite clear: It reads the data to be processed from the DB. But I am unsure how to write the records back to the database. I see these options:\r\n\r\n- Make the processor now store the variable amounts of data in the DB.\r\n- Make the processor send variable amount of data to the writer that would then perform the writing.\r\n- Place the entire logic into the writer.\r\n\r\nWhich way would be the best for this kind of task?","title":"How to distribute work correctly in JSR-352?","body":"<p>So I have been using Java Batch Processing for some time now. My jobs were either import/export jobs which chunked from a reader to a writer, or I would write Batchlets that would do some more complex processing. Since I am beginning to hit memory limits I need to rethink the architecture.</p>\n<p>So I want to want to better leverage the chunked Reader/Processor/Writer pattern. And apparently I feel unsure how to distribute the work over the three items. During processing it becomes clear whether to write zero, one or several other records.</p>\n<p>The reader is quite clear: It reads the data to be processed from the DB. But I am unsure how to write the records back to the database. I see these options:</p>\n<ul>\n<li>Make the processor now store the variable amounts of data in the DB.</li>\n<li>Make the processor send variable amount of data to the writer that would then perform the writing.</li>\n<li>Place the entire logic into the writer.</li>\n</ul>\n<p>Which way would be the best for this kind of task?</p>\n"},{"tags":["java","oop","domain-model"],"comments":[{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1675360938,"post_id":75326905,"comment_id":132917698,"body_markdown":"If the newFoos have a different data structure should they not be NewFoo extends Foo and NewFooRunner.runFoos do an instanceof NewFoo test. Alternatively a version field in the Foo class to manage.","body":"If the newFoos have a different data structure should they not be NewFoo extends Foo and NewFooRunner.runFoos do an instanceof NewFoo test. Alternatively a version field in the Foo class to manage."}],"answers":[{"tags":[],"owner":{"account_id":1455702,"reputation":15684,"user_id":1371329,"accept_rate":64,"display_name":"jaco0646"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675365091,"creation_date":1675365091,"answer_id":75327922,"question_id":75326905,"body_markdown":"* If you want `OldFoo` and `NewFoo` treated differently, then instantiate them as different classes with no common parent.\r\n* If you want `OldFoo` and `NewFoo` treated differently sometimes and equivalently other times, then instantiate them as different classes with a common parent.\r\n* If you want `OldFoo` and `NewFoo` treated equivalently, then instantiate them as the same class.\r\n\r\nThat&#39;s what the type system provides.","title":"How to model &quot;old&quot; and &quot;new&quot; list of things in Java to avoid accidental use of one or the other?","body":"<ul>\n<li>If you want <code>OldFoo</code> and <code>NewFoo</code> treated differently, then instantiate them as different classes with no common parent.</li>\n<li>If you want <code>OldFoo</code> and <code>NewFoo</code> treated differently sometimes and equivalently other times, then instantiate them as different classes with a common parent.</li>\n<li>If you want <code>OldFoo</code> and <code>NewFoo</code> treated equivalently, then instantiate them as the same class.</li>\n</ul>\n<p>That's what the type system provides.</p>\n"},{"tags":[],"owner":{"account_id":58050,"reputation":7570,"user_id":173852,"display_name":"mernst"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675451321,"creation_date":1675451321,"answer_id":75340060,"question_id":75326905,"body_markdown":"If you have the luxury of changing the types in your program, that is a good approach.\r\nIt does introduce a bit of clutter and a bit of inefficiency, and it introduces incompatibilities with existing code, but that tradeoff may be worthwhile.\r\n\r\nIf you can&#39;t, or don&#39;t want to, change the types in your program, then you can use [pluggable types](https://checkerframework.org/) to enforce the same guarantees at compile time.\r\nThere is a [tutorial](https://checkerframework.org/tutorial/webpages/encryption-checker-cmd.html) about how to [define a type alias](https://checkerframework.org/manual/#subtyping-checker).\r\n","title":"How to model &quot;old&quot; and &quot;new&quot; list of things in Java to avoid accidental use of one or the other?","body":"<p>If you have the luxury of changing the types in your program, that is a good approach.\nIt does introduce a bit of clutter and a bit of inefficiency, and it introduces incompatibilities with existing code, but that tradeoff may be worthwhile.</p>\n<p>If you can't, or don't want to, change the types in your program, then you can use <a href=\"https://checkerframework.org/\" rel=\"nofollow noreferrer\">pluggable types</a> to enforce the same guarantees at compile time.\nThere is a <a href=\"https://checkerframework.org/tutorial/webpages/encryption-checker-cmd.html\" rel=\"nofollow noreferrer\">tutorial</a> about how to <a href=\"https://checkerframework.org/manual/#subtyping-checker\" rel=\"nofollow noreferrer\">define a type alias</a>.</p>\n"}],"owner":{"account_id":129251,"reputation":5642,"user_id":327702,"accept_rate":63,"display_name":"opensourcegeek"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1675451321,"creation_date":1675359254,"question_id":75326905,"body_markdown":"I&#39;ve two different versions of a data structure, and there are bunch of methods that work against a list of these data structures as shown below,\r\n\r\n    class NewFooRunner {\r\n        public double runFoos(List&lt;Foo&gt; foos) {\r\n            // expecting new foos\r\n        }\r\n    }\r\n    \r\n\r\n    List&lt;Foo&gt; oldFoos = new ArrayList&lt;&gt;();\r\n    List&lt;Foo&gt; newFoos = new ArrayList&lt;&gt;();\r\n\r\n    class Foo {\r\n        private double someNum;\r\n    }\r\n\r\nHere NewFooRunner takes a list of Foo, and it&#39;s very easy to pass in oldFoos instead of newFoos. I wonder if there&#39;s something in the type system to avoid that. In languages with type aliasing, I could&#39;ve used that. I can create a concrete class to represent `OldFoos` and `NewFoos` which holds the list internally like below. \r\n\r\n    class NewFoos {\r\n        private List&lt;Foo&gt; newFoos\r\n    }\r\n\r\n    class NewFooRunner {\r\n        public double runFoos(List&lt;NewFoos&gt; foos) {\r\n            // expecting new foos\r\n        }\r\n    }\r\n\r\nIs that the only way to approach it?  \r\n\r\n","title":"How to model &quot;old&quot; and &quot;new&quot; list of things in Java to avoid accidental use of one or the other?","body":"<p>I've two different versions of a data structure, and there are bunch of methods that work against a list of these data structures as shown below,</p>\n<pre><code>class NewFooRunner {\n    public double runFoos(List&lt;Foo&gt; foos) {\n        // expecting new foos\n    }\n}\n\n\nList&lt;Foo&gt; oldFoos = new ArrayList&lt;&gt;();\nList&lt;Foo&gt; newFoos = new ArrayList&lt;&gt;();\n\nclass Foo {\n    private double someNum;\n}\n</code></pre>\n<p>Here NewFooRunner takes a list of Foo, and it's very easy to pass in oldFoos instead of newFoos. I wonder if there's something in the type system to avoid that. In languages with type aliasing, I could've used that. I can create a concrete class to represent <code>OldFoos</code> and <code>NewFoos</code> which holds the list internally like below.</p>\n<pre><code>class NewFoos {\n    private List&lt;Foo&gt; newFoos\n}\n\nclass NewFooRunner {\n    public double runFoos(List&lt;NewFoos&gt; foos) {\n        // expecting new foos\n    }\n}\n</code></pre>\n<p>Is that the only way to approach it?</p>\n"},{"tags":["java","input","double"],"comments":[{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":0,"creation_date":1675449827,"post_id":75339790,"comment_id":132939069,"body_markdown":"Have you tried using a comma as decimal point?","body":"Have you tried using a comma as decimal point?"},{"owner":{"account_id":22604780,"reputation":45,"user_id":16785829,"display_name":"Dimitris Malkotsis"},"score":0,"creation_date":1675449955,"post_id":75339790,"comment_id":132939097,"body_markdown":"I just did it and it worked :)","body":"I just did it and it worked :)"}],"answers":[{"tags":[],"owner":{"account_id":22604780,"reputation":45,"user_id":16785829,"display_name":"Dimitris Malkotsis"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1675449882,"creation_date":1675449882,"answer_id":75339847,"question_id":75339790,"body_markdown":"The fault was that I was typing the values with . (5.4) and I should type them with , (5,4).","title":"scanner skips double type numbers","body":"<p>The fault was that I was typing the values with . (5.4) and I should type them with , (5,4).</p>\n"},{"tags":[],"owner":{"account_id":22866153,"reputation":158,"user_id":17009760,"display_name":"Pioter88"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1675451097,"creation_date":1675450354,"answer_id":75339916,"question_id":75339790,"body_markdown":"The problem is the separator. If you wish to use period try this\r\n```\r\nScanner in = new Scanner(System.in).useLocale(Locale.US);\r\n```\r\n\r\nEDIT:\r\n\r\nAlso it is worth to mention, you should use ``in.nextLine();``\r\nafter every ``nextInt()`` or ``nextDouble()`` otherwise you will encoder problems with ``nextLine`` when entering text.\r\n\r\nTry this\r\n\r\n        System.out.print(&quot;Enter price of a six-pack beer: &quot;);\r\n        double packPrice = in.nextDouble();\r\n        System.out.println(&quot;this will be skipped&quot; +  in.nextLine());\r\n\r\n        System.out.print(&quot;Give the ml of a can: &quot;);\r\n        double canMl = in.nextDouble();\r\n        in.nextLine();\r\n        System.out.print(&quot;And now you can type: &quot;);\r\n        System.out.println(in.nextLine());\r\n    ","title":"scanner skips double type numbers","body":"<p>The problem is the separator. If you wish to use period try this</p>\n<pre><code>Scanner in = new Scanner(System.in).useLocale(Locale.US);\n</code></pre>\n<p>EDIT:</p>\n<p>Also it is worth to mention, you should use <code>in.nextLine();</code>\nafter every <code>nextInt()</code> or <code>nextDouble()</code> otherwise you will encoder problems with <code>nextLine</code> when entering text.</p>\n<p>Try this</p>\n<pre><code>    System.out.print(&quot;Enter price of a six-pack beer: &quot;);\n    double packPrice = in.nextDouble();\n    System.out.println(&quot;this will be skipped&quot; +  in.nextLine());\n\n    System.out.print(&quot;Give the ml of a can: &quot;);\n    double canMl = in.nextDouble();\n    in.nextLine();\n    System.out.print(&quot;And now you can type: &quot;);\n    System.out.println(in.nextLine());\n</code></pre>\n"}],"owner":{"account_id":22604780,"reputation":45,"user_id":16785829,"display_name":"Dimitris Malkotsis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75339916,"answer_count":2,"score":0,"last_activity_date":1675451097,"creation_date":1675449530,"question_id":75339790,"body_markdown":"Hello I&#39;m new in java and as i was making a program practicing input/output methods I came to this error:\r\n\r\nWhen I input a int value the program works well, but when I input a double value it shows me this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WAHlL.png\r\n\r\nHere is my code:\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class InpOutp\r\n    {\r\n        public static void main(String[] args)\r\n        {\r\n            Scanner in = new Scanner(System.in);  // creates a scanner\r\n\r\n            System.out.print(&quot;Enter price of a six-pack beer: &quot;);\r\n            double packPrice = in.nextDouble();\r\n\r\n            System.out.print(&quot;Give the ml of a can: &quot;);\r\n            double canMl = in.nextDouble();\r\n\r\n            final double CANS_PER_PACK = 6;\r\n            double packMl = canMl * CANS_PER_PACK;\r\n\r\n            // find the price per ml of a pack\r\n            double pricePerMl = packPrice / packMl;\r\n            System.out.printf(&quot;Price per ml: %8.3f&quot;, pricePerMl);\r\n            System.out.println();\r\n        }\r\n    }","title":"scanner skips double type numbers","body":"<p>Hello I'm new in java and as i was making a program practicing input/output methods I came to this error:</p>\n<p>When I input a int value the program works well, but when I input a double value it shows me this:</p>\n<p><a href=\"https://i.stack.imgur.com/WAHlL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WAHlL.png\" alt=\"enter image description here\" /></a></p>\n<p>Here is my code:</p>\n<pre><code>import java.util.Scanner;\n\npublic class InpOutp\n{\n    public static void main(String[] args)\n    {\n        Scanner in = new Scanner(System.in);  // creates a scanner\n\n        System.out.print(&quot;Enter price of a six-pack beer: &quot;);\n        double packPrice = in.nextDouble();\n\n        System.out.print(&quot;Give the ml of a can: &quot;);\n        double canMl = in.nextDouble();\n\n        final double CANS_PER_PACK = 6;\n        double packMl = canMl * CANS_PER_PACK;\n\n        // find the price per ml of a pack\n        double pricePerMl = packPrice / packMl;\n        System.out.printf(&quot;Price per ml: %8.3f&quot;, pricePerMl);\n        System.out.println();\n    }\n}\n</code></pre>\n"},{"tags":["java","hana"],"answers":[{"tags":[],"owner":{"account_id":5246088,"reputation":9998,"user_id":4191767,"display_name":"Lars Br."},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1505358635,"creation_date":1505358635,"answer_id":46209900,"question_id":46186702,"body_markdown":"That&#39;s not possible. SQL in HANA cannot &#39;dial out&#39; to JAVA.\n","title":"Is it possible to call a Java function from a HANA database","body":"<p>That's not possible. SQL in HANA cannot 'dial out' to JAVA.</p>\n"},{"tags":[],"owner":{"account_id":11857909,"reputation":154,"user_id":8677462,"display_name":"Remi sap"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1506444371,"creation_date":1506439700,"answer_id":46430461,"question_id":46186702,"body_markdown":"You could do this operation using the SQL function.\r\nXMLTABLE:\r\n\r\n     SELECT * FROM\r\n     XMLTABLE(&#39;/doc/item&#39; PASSING\r\n     &#39;&lt;doc&gt;\r\n       &lt;item&gt;&lt;id&gt;10&lt;/id&gt;&lt;name&gt;Box&lt;/name&gt;&lt;/item&gt;\r\n       &lt;item&gt;&lt;id&gt;20&lt;/id&gt;&lt;name&gt;Jar&lt;/name&gt;&lt;/item&gt;\r\n     &lt;/doc&gt;&#39;\r\n     COLUMNS \r\n     line_num FOR ORDINALITY,\r\n     ID INT PATH &#39;id&#39;, \r\n     NAME VARCHAR(20) PATH &#39;name&#39;\r\n     ) as XTABLE;\r\n\r\nOutput:\r\n\r\n    | line_num  | ID   | NAME   |  \r\n    | --------- | ---- | -----  |  \r\n    |    1      | 10   | Box    |  \r\n    |    2      | 20   | Jar    |  \r\n\r\nBear in mind in only works on HANA 2 SP 2.\r\n[official doc for xmltable function][1]\r\n\r\n\r\n  [1]: https://help.sap.com/viewer/4fe29514fd584807ac9f2a04f6754767/2.0.02/en-US/2bb8ab119e384b5f94635696bb9f68b5.html","title":"Is it possible to call a Java function from a HANA database","body":"<p>You could do this operation using the SQL function.\nXMLTABLE:</p>\n\n<pre><code> SELECT * FROM\n XMLTABLE('/doc/item' PASSING\n '&lt;doc&gt;\n   &lt;item&gt;&lt;id&gt;10&lt;/id&gt;&lt;name&gt;Box&lt;/name&gt;&lt;/item&gt;\n   &lt;item&gt;&lt;id&gt;20&lt;/id&gt;&lt;name&gt;Jar&lt;/name&gt;&lt;/item&gt;\n &lt;/doc&gt;'\n COLUMNS \n line_num FOR ORDINALITY,\n ID INT PATH 'id', \n NAME VARCHAR(20) PATH 'name'\n ) as XTABLE;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>| line_num  | ID   | NAME   |  \n| --------- | ---- | -----  |  \n|    1      | 10   | Box    |  \n|    2      | 20   | Jar    |  \n</code></pre>\n\n<p>Bear in mind in only works on HANA 2 SP 2.\n<a href=\"https://help.sap.com/viewer/4fe29514fd584807ac9f2a04f6754767/2.0.02/en-US/2bb8ab119e384b5f94635696bb9f68b5.html\" rel=\"nofollow noreferrer\">official doc for xmltable function</a></p>\n"}],"owner":{"account_id":2906526,"reputation":41,"user_id":2491705,"display_name":"user2491705"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":460,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1675451067,"creation_date":1505259161,"question_id":46186702,"body_markdown":"Is it possible to call a Java function from a HANA database? In my case, the Java function will take an input XML and return a formatted array output. What will the HANA SQL call look like?","title":"Is it possible to call a Java function from a HANA database","body":"<p>Is it possible to call a Java function from a HANA database? In my case, the Java function will take an input XML and return a formatted array output. What will the HANA SQL call look like?</p>\n"},{"tags":["java","spring-boot","maven","swagger"],"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675451059,"creation_date":1675451059,"question_id":75340017,"body_markdown":"Our SpringBoot app has a pom.xml that uses the swagger-maven-plugin, and when we run locally with &quot;mvn spring-boot:run&quot;, we can view the swagger docs successfully.\r\n\r\nHowever, if we run the app from Eclipse, using &quot;Run As&quot;-&gt;&quot;Spring Boot&quot;, and then visit the swagger page, it says it can&#39;t find the swagger.json file.\r\n\r\nI looked further and determined that the &quot;fat jar&quot; that we produce has the swagger.json file at `META-INF/resources/&lt;servicename&gt;/swagger/swagger.json`.  I tried simply extracting that file and placing it in `target/classes` and then running the app from Eclipse, and now I can see the swagger docs properly.\r\n\r\nI&#39;d like to make the build do this automatically.\r\n\r\nI inspected the docs for the swagger plugin, and I didn&#39;t see anything about this, but I didn&#39;t really expect to.  Is there some other way to do this cleanly?","title":"How to make swagger-maven-plugin write swagger.json into target/classes in addition to fat jar, so Eclipse can find it?","body":"<p>Our SpringBoot app has a pom.xml that uses the swagger-maven-plugin, and when we run locally with &quot;mvn spring-boot:run&quot;, we can view the swagger docs successfully.</p>\n<p>However, if we run the app from Eclipse, using &quot;Run As&quot;-&gt;&quot;Spring Boot&quot;, and then visit the swagger page, it says it can't find the swagger.json file.</p>\n<p>I looked further and determined that the &quot;fat jar&quot; that we produce has the swagger.json file at <code>META-INF/resources/&lt;servicename&gt;/swagger/swagger.json</code>.  I tried simply extracting that file and placing it in <code>target/classes</code> and then running the app from Eclipse, and now I can see the swagger docs properly.</p>\n<p>I'd like to make the build do this automatically.</p>\n<p>I inspected the docs for the swagger plugin, and I didn't see anything about this, but I didn't really expect to.  Is there some other way to do this cleanly?</p>\n"},{"tags":["java","dbunit"],"owner":{"account_id":2295846,"reputation":824,"user_id":2017299,"accept_rate":80,"display_name":"Kris Swat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1675451018,"creation_date":1675451018,"question_id":75340009,"body_markdown":"I need help to solve a unit testing problem using DBUnit. In my code I call nextvalue of the sequence. \r\n\r\nThis is failing as expected as my xml is not correct.\r\n\r\nI have a schema /dtd as expected with table elements. and the &lt;dataset&gt; in xml works ok.\r\n\r\nBut I want test my sequence also. some article are giving answers on how to reset\r\nhttps://stackoverflow.com/questions/20607704/reset-sequence-in-dbunit\r\n\r\n     &lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;\r\n        &lt;dataset reset_sequences=&quot;emp_seq, dept_seq&quot;&gt;\r\n            &lt;emp empno=&quot;1&quot; ename=&quot;Scott&quot; deptno=&quot;10&quot; job=&quot;project manager&quot; /&gt;\r\n            ....\r\n        &lt;/dataset&gt;\r\n\r\nBut my insert happens via code, and the dataset or other element should help me get next value (i.e. the sequence should exist)\r\n\r\nHow can I declare/define a sequence wither in DTD or dataset XML \r\n\r\nI could not find an answer. So please dont brand me lazy. I use only XML in this scenario . Please help\r\n\r\nhttps://stackoverflow.com/questions/16697740/how-to-use-oracle-sequence-numbers-in-dbunit\r\n\r\nhttps://github.com/springtestdbunit/spring-test-dbunit/pull/30","title":"How to declare a sequence in DBUnit XML - in core Java","body":"<p>I need help to solve a unit testing problem using DBUnit. In my code I call nextvalue of the sequence.</p>\n<p>This is failing as expected as my xml is not correct.</p>\n<p>I have a schema /dtd as expected with table elements. and the  in xml works ok.</p>\n<p>But I want test my sequence also. some article are giving answers on how to reset\n<a href=\"https://stackoverflow.com/questions/20607704/reset-sequence-in-dbunit\">Reset sequence in DBUnit?</a></p>\n<pre><code> &lt;?xml version='1.0' encoding='UTF-8'?&gt;\n    &lt;dataset reset_sequences=&quot;emp_seq, dept_seq&quot;&gt;\n        &lt;emp empno=&quot;1&quot; ename=&quot;Scott&quot; deptno=&quot;10&quot; job=&quot;project manager&quot; /&gt;\n        ....\n    &lt;/dataset&gt;\n</code></pre>\n<p>But my insert happens via code, and the dataset or other element should help me get next value (i.e. the sequence should exist)</p>\n<p>How can I declare/define a sequence wither in DTD or dataset XML</p>\n<p>I could not find an answer. So please dont brand me lazy. I use only XML in this scenario . Please help</p>\n<p><a href=\"https://stackoverflow.com/questions/16697740/how-to-use-oracle-sequence-numbers-in-dbunit\">How to use Oracle Sequence Numbers in DBUnit?</a></p>\n<p><a href=\"https://github.com/springtestdbunit/spring-test-dbunit/pull/30\" rel=\"nofollow noreferrer\">https://github.com/springtestdbunit/spring-test-dbunit/pull/30</a></p>\n"},{"tags":["java","cryptography","network-programming"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1675425963,"post_id":75333814,"comment_id":132931378,"body_markdown":"Try `byte[] decryptedMessage = decryptCipher.doFinal(receivePacket.getData(), 0, receivePacket.getLength());`","body":"Try <code>byte[] decryptedMessage = decryptCipher.doFinal(receivePacket.getData(), 0, receivePacket.getLength());</code>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1675450929,"post_id":75333814,"comment_id":132939335,"body_markdown":"I&#39;ll add it as an answer so you can mark it","body":"I&#39;ll add it as an answer so you can mark it"}],"answers":[{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675450993,"creation_date":1675450993,"answer_id":75340001,"question_id":75333814,"body_markdown":"You need to ensure that you&#39;re only dealing with the portion of the packet that contains the *message* as opposed to its entire buffer, so:\r\n\r\n    byte[] decryptedMessage = decryptCipher.doFinal(receivePacket.getData(), 0, receivePacket.getLength());","title":"Extra Characters appearing after RC4 decryption","body":"<p>You need to ensure that you're only dealing with the portion of the packet that contains the <em>message</em> as opposed to its entire buffer, so:</p>\n<pre><code>byte[] decryptedMessage = decryptCipher.doFinal(receivePacket.getData(), 0, receivePacket.getLength());\n</code></pre>\n"}],"owner":{"account_id":20612342,"reputation":3,"user_id":15131235,"display_name":"kai"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75340001,"answer_count":1,"score":0,"last_activity_date":1675450993,"creation_date":1675416690,"question_id":75333814,"body_markdown":"I am currently creating a UDP program in Java to simulate a secure communication channel. Between the Client and Server, I want to encrypt data before it is sent over to the other side. The problem I am facing now is that there are a lot of weird characters appearing after the decrypted message(example below). Why is this happening and how can I get rid of these characters?\r\n\r\nServer-side code:\r\n```\r\nString testMessage = &quot;this is a test message&quot;;\r\n\r\n        // initialise the key for RC4 encryption\r\n        Key key = new SecretKeySpec(&quot;password&quot;.getBytes(StandardCharsets.UTF_8), &quot;RC4&quot;);\r\n        System.out.println(&quot;key: &quot; + key);\r\n\r\n        // initialise cipher for encryption\r\n        Cipher encryptCipher = Cipher.getInstance(&quot;RC4&quot;);\r\n        encryptCipher.init(Cipher.ENCRYPT_MODE, key);\r\n\r\n        // encrypt the message\r\n        byte[] encryptedMessage = encryptCipher.doFinal(testMessage.getBytes(StandardCharsets.UTF_8));\r\n\r\n        // array of bytes to store encrypted data to be sent\r\n        byte[] sendData = encryptedMessage;\r\n\r\n        // send message\r\n        // byte[] testMessageBytes = testMessage.getBytes(StandardCharsets.UTF_8);\r\n        DatagramPacket sendPacket = new DatagramPacket(sendData, sendData.length, inet, senderPort);\r\n        socket.send(sendPacket);\r\n```\r\nClient-side code:\r\n\r\n```\r\n// initialise the key for RC4 encryption\r\n    Key key = new SecretKeySpec(&quot;password&quot;.getBytes(StandardCharsets.UTF_8), &quot;RC4&quot;);\r\n    System.out.println(&quot;key: &quot; + key);\r\n    \r\n    // Array of bytes to store data received in a packet\r\n    byte[] receiveData = new byte[1024];\r\n\r\n    // DatagramPacket to receive data\r\n    DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);\r\n    // receive data and print it to the console\r\n    socket.receive(receivePacket);\r\n    String receiveMessage = new String(receivePacket.getData(), StandardCharsets.UTF_8);\r\n    System.out.println(&quot;Message before decryption: &quot; + receiveMessage);\r\n\r\n    // initialise cipher for decryption\r\n    Cipher decryptCipher = Cipher.getInstance(&quot;RC4&quot;);\r\n    decryptCipher.init(Cipher.DECRYPT_MODE, key);\r\n\r\n    // decrypt the received message\r\n    byte[] decryptedMessage = decryptCipher.doFinal(receivePacket.getData());\r\n    receiveMessage = new String(decryptedMessage, StandardCharsets.UTF_8);\r\n    System.out.println(&quot;Message after decryption: &quot; + receiveMessage);\r\n```\r\n\r\n\r\nThis is the result i am getting:\r\n\r\nMessage before decryption: ??Q}lW?q?↓A??♂?r?(?\r\n\r\nMessage after decryption: this is a test message&amp;☺rL;?kj?W?♥?q???;g5z$&#39;D??RC?e?gj??P?n[J?|J#K}@?y&amp;??S??R♦?9??X?/m▬????♣J?M??]??|♫???AN\r\n??P?(?♂{^M???q?K?▬s?T♥?&#216;????l?R☼☻z ?♂V??}?49?P?????ZTG????/?/???J&quot;@9z???♀??I??9??{??????K?z?♠?.♣`?????mH\r\n→???↓☻???g?5??{?A1\\-f*?♥n%??1   V?q=C►?&#167;9♦U???☺??*?&quot;R%?@♦??☺?g?\r\n4???x`??Pht$◄?F►??◄g◄l?P9???▲?&gt;???IG?t???H??t↓??V?bC?:?▲?y@U)g↑g,t?f?U#?r?♠??[7%?e??XR↑??a??Vv\\??►_?u???#B?☻??FU?&#182;???????y▲?$??x=44?}??/?cn?↨??+{???↕?`6?:?&#182;?B?]?)=+8d↨?p\\?}3?q∟?▬?k-??o????}?W?M?Z◄&#166;&#191;?h??L?9?N?\\♥V??☻^~?e?W3J?↑?^↔▲m%?&gt;??P?H♫tCm☼*v☺?}??U&#39;]T?a 2?↑?↕???CN???fL?#C???dUCZ_↓?)]???▬DZc?⌂x?⌂??????@?   \r\n ??wHt????b\r\n?@??(→?KMZ[wx?6?`??b?Y.&quot;c??☻?Q?☻&#233;☻??c?-.??☼V9???☺6???ep~?q?↨&amp;???&#167;?? /&gt;??c???♥??C36???►K???↨?.??Lr\r\n\r\nI am very new to socket programming and cryptography, so pardon any inefficient code. I do know that RC4 is deprecated and should not be used anymore, but this is just for educational purposes. Please let me know if there is any information that I am lacking for this post. I appreciate any and all help.","title":"Extra Characters appearing after RC4 decryption","body":"<p>I am currently creating a UDP program in Java to simulate a secure communication channel. Between the Client and Server, I want to encrypt data before it is sent over to the other side. The problem I am facing now is that there are a lot of weird characters appearing after the decrypted message(example below). Why is this happening and how can I get rid of these characters?</p>\n<p>Server-side code:</p>\n<pre><code>String testMessage = &quot;this is a test message&quot;;\n\n        // initialise the key for RC4 encryption\n        Key key = new SecretKeySpec(&quot;password&quot;.getBytes(StandardCharsets.UTF_8), &quot;RC4&quot;);\n        System.out.println(&quot;key: &quot; + key);\n\n        // initialise cipher for encryption\n        Cipher encryptCipher = Cipher.getInstance(&quot;RC4&quot;);\n        encryptCipher.init(Cipher.ENCRYPT_MODE, key);\n\n        // encrypt the message\n        byte[] encryptedMessage = encryptCipher.doFinal(testMessage.getBytes(StandardCharsets.UTF_8));\n\n        // array of bytes to store encrypted data to be sent\n        byte[] sendData = encryptedMessage;\n\n        // send message\n        // byte[] testMessageBytes = testMessage.getBytes(StandardCharsets.UTF_8);\n        DatagramPacket sendPacket = new DatagramPacket(sendData, sendData.length, inet, senderPort);\n        socket.send(sendPacket);\n</code></pre>\n<p>Client-side code:</p>\n<pre><code>// initialise the key for RC4 encryption\n    Key key = new SecretKeySpec(&quot;password&quot;.getBytes(StandardCharsets.UTF_8), &quot;RC4&quot;);\n    System.out.println(&quot;key: &quot; + key);\n    \n    // Array of bytes to store data received in a packet\n    byte[] receiveData = new byte[1024];\n\n    // DatagramPacket to receive data\n    DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);\n    // receive data and print it to the console\n    socket.receive(receivePacket);\n    String receiveMessage = new String(receivePacket.getData(), StandardCharsets.UTF_8);\n    System.out.println(&quot;Message before decryption: &quot; + receiveMessage);\n\n    // initialise cipher for decryption\n    Cipher decryptCipher = Cipher.getInstance(&quot;RC4&quot;);\n    decryptCipher.init(Cipher.DECRYPT_MODE, key);\n\n    // decrypt the received message\n    byte[] decryptedMessage = decryptCipher.doFinal(receivePacket.getData());\n    receiveMessage = new String(decryptedMessage, StandardCharsets.UTF_8);\n    System.out.println(&quot;Message after decryption: &quot; + receiveMessage);\n</code></pre>\n<p>This is the result i am getting:</p>\n<p>Message before decryption: ??Q}lW?q?↓A??♂?r?(?</p>\n<p>Message after decryption: this is a test message&amp;☺rL;?kj?W?♥?q???;g5z$'D??RC?e?gj??P?n[J?|J#K}@?y&amp;??S??R♦?9??X?/m▬????♣J?M??]??|♫???AN\n??P?(?♂{^M???q?K?▬s?T♥?Ø????l?R☼☻z ?♂V??}?49?P?????ZTG????/?/???J&quot;@9z???♀??I??9??{??????K?z?♠?.♣<code>?????mH →???↓☻???g?5??{?A1\\-f*?♥n%??1   V?q=C►?§9♦U???☺??*?&quot;R%?@♦??☺?g? 4???x</code>??Pht$◄?F►??◄g◄l?P9???▲?&gt;???IG?t???H??t↓??V?bC?:?▲?y@U)g↑g,t?f?U#?r?♠??[7%?e??XR↑??a??Vv??►_?u???#B?☻??FU?¶???????y▲?$??x=44?}??/?cn?↨??+{???↕?<code>6?:?¶?B?]?)=+8d↨?p\\?}3?q∟?▬?k-??o????}?W?M?Z◄¦¿?h??L?9?N?\\♥V??☻^~?e?W3J?↑?^↔▲m%?&gt;??P?H♫tCm☼*v☺?}??U']T?a 2?↑?↕???CN???fL?#C???dUCZ_↓?)]???▬DZc?⌂x?⌂??????@?    ??wHt????b ?@??(→?KMZ[wx?6?</code>??b?Y.&quot;c??☻?Q?☻é☻??c?-.??☼V9???☺6???ep~?q?↨&amp;???§?? /&gt;??c???♥??C36???►K???↨?.??Lr</p>\n<p>I am very new to socket programming and cryptography, so pardon any inefficient code. I do know that RC4 is deprecated and should not be used anymore, but this is just for educational purposes. Please let me know if there is any information that I am lacking for this post. I appreciate any and all help.</p>\n"},{"tags":["java","gradle","build"],"comments":[{"owner":{"account_id":27690223,"reputation":11,"user_id":21137071,"display_name":"acommoner"},"score":0,"creation_date":1675799765,"post_id":75330280,"comment_id":133005596,"body_markdown":"At the very bottom of the docs, there is [a note about limitations](https://docs.gradle.org/current/userguide/dependency_locking.html#locking_limitations).\n\nI was originally assuming this only applied when suing remote source dependencies and not composite builds, but since they are very similar under the hood, I’m guessing this is a known limitation. Would be grateful if anyone is able to confirm.","body":"At the very bottom of the docs, there is <a href=\"https://docs.gradle.org/current/userguide/dependency_locking.html#locking_limitations\" rel=\"nofollow noreferrer\">a note about limitations</a>.  I was originally assuming this only applied when suing remote source dependencies and not composite builds, but since they are very similar under the hood, I’m guessing this is a known limitation. Would be grateful if anyone is able to confirm."}],"owner":{"account_id":27690223,"reputation":11,"user_id":21137071,"display_name":"acommoner"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675450835,"creation_date":1675383938,"question_id":75330280,"body_markdown":"I just started using dependency locking with version ranges (e.g. latest.release, 2.+, etc.) in one of my Java projects. To simplify, let’s say it has a structure like this:\r\n\r\n```\r\n:root:lib1\r\n:root:project1\r\n:root:project2\r\n```\r\n\r\nwhere lib1 is shared by the other 2 subprojects.\r\n\r\nI started using dependency locking in :root:project1 and everything works as intended. :smiling_face_with_three_hearts:\r\n\r\nThen I started using dependency locking with version ranges in `:root:lib1.` e.g. I would define a dependency like so: `implementation software.amazon.awssdk:sqs:latest.release` and then lock it to a version, say `1.0.0`. This works fine with the first project since I generate a separate lockfile for that project, which constrains the version of the library to whatever value is in that file.\r\n\r\nHowever, in project2, I have not yet switched to dependency locking, and I see that it’s pulling in transitive dependencies as version `latest.release` instead of `1.0.0` (the value in the lockfile for the library), which resolves to different version day to day.\r\n\r\nproject2 declares a dependency on lib1 using the project annotation\r\n```\r\n    implementation project(&#39;:root:lib1&#39;)\r\n```\r\n\r\nDo I need to publish the lib1 jar and consume a specific version of it in order to get the locked transitive dependencies? Or is there a way to transitively bring the locked versions from lib1 instead of the `latest.release` value? Any help is much appreciated :slight_smile:\r\n\r\nCurrently using Gradle version 7.4.2","title":"Use gradle dependency locking &amp; version ranges in local library","body":"<p>I just started using dependency locking with version ranges (e.g. latest.release, 2.+, etc.) in one of my Java projects. To simplify, let’s say it has a structure like this:</p>\n<pre><code>:root:lib1\n:root:project1\n:root:project2\n</code></pre>\n<p>where lib1 is shared by the other 2 subprojects.</p>\n<p>I started using dependency locking in :root:project1 and everything works as intended. :smiling_face_with_three_hearts:</p>\n<p>Then I started using dependency locking with version ranges in <code>:root:lib1.</code> e.g. I would define a dependency like so: <code>implementation software.amazon.awssdk:sqs:latest.release</code> and then lock it to a version, say <code>1.0.0</code>. This works fine with the first project since I generate a separate lockfile for that project, which constrains the version of the library to whatever value is in that file.</p>\n<p>However, in project2, I have not yet switched to dependency locking, and I see that it’s pulling in transitive dependencies as version <code>latest.release</code> instead of <code>1.0.0</code> (the value in the lockfile for the library), which resolves to different version day to day.</p>\n<p>project2 declares a dependency on lib1 using the project annotation</p>\n<pre><code>    implementation project(':root:lib1')\n</code></pre>\n<p>Do I need to publish the lib1 jar and consume a specific version of it in order to get the locked transitive dependencies? Or is there a way to transitively bring the locked versions from lib1 instead of the <code>latest.release</code> value? Any help is much appreciated :slight_smile:</p>\n<p>Currently using Gradle version 7.4.2</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6390592,"reputation":16008,"user_id":4956907,"display_name":"Michał Krzywański"},"score":0,"creation_date":1569441470,"post_id":58105040,"comment_id":102602275,"body_markdown":"The status can be cleared by using `Thread.interrupted()` method. `Thread.currentThread().interrupt();` sets the flag - it does not clear it. However I would advise to rethink the design and make your ThreadPool injectable and further seperate the task from the executor of this task.","body":"The status can be cleared by using <code>Thread.interrupted()</code> method. <code>Thread.currentThread().interrupt();</code> sets the flag - it does not clear it. However I would advise to rethink the design and make your ThreadPool injectable and further seperate the task from the executor of this task."},{"owner":{"account_id":10759610,"reputation":12648,"user_id":7916438,"display_name":"tevemadar"},"score":0,"creation_date":1569442369,"post_id":58105040,"comment_id":102602640,"body_markdown":"Being interrupted means almost nothing until someone actually checks if the thread is interrupted - and as a rule of thumb, those are the ones throwing `InterruptedException`. So you should show the other test, which are affected.","body":"Being interrupted means almost nothing until someone actually checks if the thread is interrupted - and as a rule of thumb, those are the ones throwing <code>InterruptedException</code>. So you should show the other test, which are affected."},{"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":0,"creation_date":1675451112,"post_id":58105040,"comment_id":132939370,"body_markdown":"Something doesn&#39;t add up about this. The interrupted status is visible only to the the current thread. Even if tests run in parallel, the interrupted status of one thread wouldn&#39;t impact tests running in other threads. As written (with the second `interrupt()` commented out), the interrupted status is clear when this test exits. I suspect the problem would only occur when that second `interrupt()` call (after the subject is tested) is uncommented.","body":"Something doesn&#39;t add up about this. The interrupted status is visible only to the the current thread. Even if tests run in parallel, the interrupted status of one thread wouldn&#39;t impact tests running in other threads. As written (with the second <code>interrupt()</code> commented out), the interrupted status is clear when this test exits. I suspect the problem would only occur when that second <code>interrupt()</code> call (after the subject is tested) is uncommented."}],"answers":[{"tags":[],"owner":{"account_id":5941531,"reputation":7,"user_id":4672563,"display_name":"Денис Тисов"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1569440912,"creation_date":1569440912,"answer_id":58105613,"question_id":58105040,"body_markdown":"You should simulate that your `Future` returns `InterruptedException`\r\n\r\nTry this \r\n\r\n    @RunWith(MockitoJUnitRunner.class)\r\n    public class ATest {\r\n\r\n    @Test(expected = CustomException1.class)\r\n    public void testMethod() throws ExecutionException, InterruptedException {\r\n        Future future = mock(Future.class);\r\n        when(future.get()).thenThrow(new InterruptedException());\r\n        A a = new A(future);\r\n\r\n        a.getNumber();\r\n    }\r\n\r\n    // another few tests .....\r\n}","title":"How to test InterruptedException","body":"<p>You should simulate that your <code>Future</code> returns <code>InterruptedException</code></p>\n\n<p>Try this </p>\n\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class ATest {\n\n@Test(expected = CustomException1.class)\npublic void testMethod() throws ExecutionException, InterruptedException {\n    Future future = mock(Future.class);\n    when(future.get()).thenThrow(new InterruptedException());\n    A a = new A(future);\n\n    a.getNumber();\n}\n\n// another few tests .....\n</code></pre>\n\n<p>}</p>\n"},{"comments":[{"owner":{"account_id":7458524,"reputation":651,"user_id":5670939,"display_name":"Radioactive"},"score":5,"creation_date":1621901074,"post_id":58105668,"comment_id":119628038,"body_markdown":"The first solution here is not right. Mockito will not allow to throw a checked exception. Executing this will result in :\n\n\norg.mockito.exceptions.base.MockitoException: \nChecked exception is invalid for this method!\nInvalid: java.lang.InterruptedException","body":"The first solution here is not right. Mockito will not allow to throw a checked exception. Executing this will result in :   org.mockito.exceptions.base.MockitoException:  Checked exception is invalid for this method! Invalid: java.lang.InterruptedException"}],"tags":[],"owner":{"account_id":4326367,"reputation":445,"user_id":3533079,"display_name":"Cλstor"},"comment_count":1,"down_vote_count":2,"up_vote_count":3,"is_accepted":true,"score":1,"last_activity_date":1569441314,"creation_date":1569441116,"answer_id":58105668,"question_id":58105040,"body_markdown":"I think the best way to do that is to Mock the interrupted exception\r\n\r\n    when(helper.method())).thenThrow(InterruptedException.class);\r\n\r\nBut you can also just clear the interruption flag by calling the method: \r\n\r\n    Thread.interrupted()","title":"How to test InterruptedException","body":"<p>I think the best way to do that is to Mock the interrupted exception</p>\n\n<pre><code>when(helper.method())).thenThrow(InterruptedException.class);\n</code></pre>\n\n<p>But you can also just clear the interruption flag by calling the method: </p>\n\n<pre><code>Thread.interrupted()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1848482,"reputation":111,"user_id":2565680,"display_name":"Andrei Constantinescu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675450831,"creation_date":1675450397,"answer_id":75339922,"question_id":58105040,"body_markdown":"Given that the accepted answer throws an Exception when used, as Radioactive pointed it out, I thought I&#39;d share a workaround to test this using Mockito, which makes use of the `willAnswer()` method. It would look something like this:\r\n    \r\n    import static org.mockito.BDDMockito.given;\r\n    \r\n    import org.junit.jupiter.api.Test;\r\n    import org.junit.jupiter.api.extension.ExtendWith;\r\n    import org.mockito.junit.jupiter.MockitoExtension;\r\n    \r\n    @ExtendWith(MockitoExtension.class)\r\n    class Test {\r\n        @Test\r\n        void test() {    \r\n            given(helper.method()).willAnswer(invocation -&gt; {\r\n                throw new InterruptedException();\r\n            });\r\n            ...\r\n        }\r\n    }","title":"How to test InterruptedException","body":"<p>Given that the accepted answer throws an Exception when used, as Radioactive pointed it out, I thought I'd share a workaround to test this using Mockito, which makes use of the <code>willAnswer()</code> method. It would look something like this:</p>\n<pre><code>import static org.mockito.BDDMockito.given;\n\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.junit.jupiter.MockitoExtension;\n\n@ExtendWith(MockitoExtension.class)\nclass Test {\n    @Test\n    void test() {    \n        given(helper.method()).willAnswer(invocation -&gt; {\n            throw new InterruptedException();\n        });\n        ...\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":13006738,"reputation":2531,"user_id":9401029,"display_name":"karvai"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8593,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":58105668,"answer_count":3,"score":6,"last_activity_date":1675450831,"creation_date":1569438279,"question_id":58105040,"body_markdown":"I have the following method which works fine. I am trying to test the scenario where an InterruptedException is thrown. This is how I am testing currently which works if I only run this single test. But if I were to run all remaining 5 tests in my test class, some starts failing. All tests passes when I run them individually thus clearly my Thread interrupt in the test is affecting other tests. How can I write my test in a way it won&#39;t affect other tests? \r\n\r\n\r\n\r\n    @Component\r\n    class A{\r\n        @Autowired\r\n        private Helper helper;\r\n\r\n        private static ExecutorService executor = Executors.newFixedThreadPool(10);\r\n    \r\n        // static variable in class\r\n        private final Future&lt;String&gt; number = executor.submit(() -&gt; helper.method());\r\n    \r\n        //method to be tested \r\n        public String getNumber() {\r\n            try {\r\n                return this.number.get();\r\n            } catch (InterruptedException e) {\r\n                Thread.currentThread().interrupt();\r\n                throw new CustomException1();\r\n            } catch (ExecutionException e) {\r\n                throw new CustomException2();\r\n            }\r\n        }\r\n    }\r\n    \r\n    @RunWith(MockitoJUnitRunner.class)\r\n    clas ATest{\r\n    \r\n        @InjectMocks\r\n        private A a;\r\n    \r\n        @Mock\r\n        private Helper helper;\r\n    \r\n        // this is my test method which passes when ran individually. But will affect other tests if everything is ran same time. \r\n        @Test\r\n        public void testMethod() {\r\n    \r\n            when(helper.method()).thenReturn(&quot;222&quot;);\r\n            String num = a.getNumber();\r\n    \r\n            // doing this on purpose so I would land inside the catch. This line is causing issues.\r\n            Thread.currentThread().interrupt();\r\n    \r\n            try {\r\n                assertEquals(&quot;222&quot;, num);\r\n            }catch (CustomException1 e){\r\n                // I will land here for this test as expected\r\n                // do some assertions\r\n            }\r\n    \r\n            // Thread.currentThread().interrupt(); // Tried calling it again here to clear the flag but doesn&#39;t work. \r\n        }\r\n    \r\n        // another few tests ..... \r\n    }","title":"How to test InterruptedException","body":"<p>I have the following method which works fine. I am trying to test the scenario where an InterruptedException is thrown. This is how I am testing currently which works if I only run this single test. But if I were to run all remaining 5 tests in my test class, some starts failing. All tests passes when I run them individually thus clearly my Thread interrupt in the test is affecting other tests. How can I write my test in a way it won't affect other tests? </p>\n\n<pre><code>@Component\nclass A{\n    @Autowired\n    private Helper helper;\n\n    private static ExecutorService executor = Executors.newFixedThreadPool(10);\n\n    // static variable in class\n    private final Future&lt;String&gt; number = executor.submit(() -&gt; helper.method());\n\n    //method to be tested \n    public String getNumber() {\n        try {\n            return this.number.get();\n        } catch (InterruptedException e) {\n            Thread.currentThread().interrupt();\n            throw new CustomException1();\n        } catch (ExecutionException e) {\n            throw new CustomException2();\n        }\n    }\n}\n\n@RunWith(MockitoJUnitRunner.class)\nclas ATest{\n\n    @InjectMocks\n    private A a;\n\n    @Mock\n    private Helper helper;\n\n    // this is my test method which passes when ran individually. But will affect other tests if everything is ran same time. \n    @Test\n    public void testMethod() {\n\n        when(helper.method()).thenReturn(\"222\");\n        String num = a.getNumber();\n\n        // doing this on purpose so I would land inside the catch. This line is causing issues.\n        Thread.currentThread().interrupt();\n\n        try {\n            assertEquals(\"222\", num);\n        }catch (CustomException1 e){\n            // I will land here for this test as expected\n            // do some assertions\n        }\n\n        // Thread.currentThread().interrupt(); // Tried calling it again here to clear the flag but doesn't work. \n    }\n\n    // another few tests ..... \n}\n</code></pre>\n"},{"tags":["java","option-type"],"comments":[{"owner":{"account_id":2829929,"reputation":5163,"user_id":2431702,"display_name":"DanielBarbarian"},"score":2,"creation_date":1675435103,"post_id":75337175,"comment_id":132934248,"body_markdown":"Does this help? https://stackoverflow.com/questions/37004579/convenient-way-of-checking-equality-for-optionals","body":"Does this help? <a href=\"https://stackoverflow.com/questions/37004579/convenient-way-of-checking-equality-for-optionals\" title=\"convenient way of checking equality for optionals\">stackoverflow.com/questions/37004579/&hellip;</a>"},{"owner":{"account_id":5860066,"reputation":13485,"user_id":4616087,"display_name":"Marvin"},"score":2,"creation_date":1675435134,"post_id":75337175,"comment_id":132934267,"body_markdown":"Would you see `if (INTERNAL_CUSTOMER.equals(order.getCustomer().orElse(null))) { ... }` as &quot;more concise&quot; (I wouldn&#39;t say it necessarily _is_)?","body":"Would you see <code>if (INTERNAL_CUSTOMER.equals(order.getCustomer().orElse(null))) { ... }</code> as &quot;more concise&quot; (I wouldn&#39;t say it necessarily <i>is</i>)?"},{"owner":{"account_id":60737,"reputation":15904,"user_id":181336,"display_name":"Adriaan Koster"},"score":0,"creation_date":1675435402,"post_id":75337175,"comment_id":132934362,"body_markdown":"if order.isEmpty() then order.getCustomer() will fail","body":"if order.isEmpty() then order.getCustomer() will fail"},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":1,"creation_date":1675435888,"post_id":75337175,"comment_id":132934507,"body_markdown":"`order.getCustomer()` won&#39;t even compile. You probably want `if (INTERNAL_CUSTOMER.equals(order.map(Order::getCustomer).orElse(null))) { ... }`","body":"<code>order.getCustomer()</code> won&#39;t even compile. You probably want <code>if (INTERNAL_CUSTOMER.equals(order.map(Order::getCustomer).orEl&zwnj;&#8203;se(null))) { ... }</code>"}],"answers":[{"comments":[{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1675444877,"post_id":75338237,"comment_id":132937622,"body_markdown":"While this code may answer the question, providing additional context regarding *why* and/or *how* this code answers the question improves its long-term value.","body":"While this code may answer the question, providing additional context regarding <i>why</i> and/or <i>how</i> this code answers the question improves its long-term value."}],"tags":[],"owner":{"account_id":5306592,"reputation":810,"user_id":4234254,"display_name":"anqit"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675450007,"creation_date":1675440211,"answer_id":75338237,"question_id":75337175,"body_markdown":"You can use the lambda expression using `map` and `filter`.\r\n`map` is used to `pull/manipulae` actual data coming from stream and `filter` will be used for `predicating` the value if it&#39;s true or false, `isPresent` will return true if `stream` returned any result after `filter`\r\n\r\n`if (order.map(Order::getCustomer).filter(INTERNAL_CUSTOMER::equals).isPresent()) { ... }`","title":"How to check if an optional value is present and equal to another value","body":"<p>You can use the lambda expression using <code>map</code> and <code>filter</code>.\n<code>map</code> is used to <code>pull/manipulae</code> actual data coming from stream and <code>filter</code> will be used for <code>predicating</code> the value if it's true or false, <code>isPresent</code> will return true if <code>stream</code> returned any result after <code>filter</code></p>\n<p><code>if (order.map(Order::getCustomer).filter(INTERNAL_CUSTOMER::equals).isPresent()) { ... }</code></p>\n"}],"owner":{"account_id":1035149,"reputation":16298,"user_id":1042646,"accept_rate":78,"display_name":"Punter Vicky"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":793,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":75338237,"answer_count":1,"score":-2,"last_activity_date":1675450007,"creation_date":1675434864,"question_id":75337175,"body_markdown":"Is there a way to express the below conditional in a more concise fashion?\r\n```java\r\n    Optional&lt;Order&gt; order = getOrder(); // API Call\r\n    if (\r\n      order.getCustomer().isPresent() &amp;&amp;\r\n      order.getCustomer().get().equals(INTERNAL_CUSTOMER)\r\n    ) {\r\n      return;\r\n    }\r\n```","title":"How to check if an optional value is present and equal to another value","body":"<p>Is there a way to express the below conditional in a more concise fashion?</p>\n<pre class=\"lang-java prettyprint-override\"><code>    Optional&lt;Order&gt; order = getOrder(); // API Call\n    if (\n      order.getCustomer().isPresent() &amp;&amp;\n      order.getCustomer().get().equals(INTERNAL_CUSTOMER)\n    ) {\n      return;\n    }\n</code></pre>\n"},{"tags":["java","agent-based-modeling","repast-simphony"],"comments":[{"owner":{"account_id":26696174,"reputation":21,"user_id":20303989,"display_name":"Bastien Boucherat"},"score":0,"creation_date":1675449612,"post_id":75176564,"comment_id":132939013,"body_markdown":"Is repast.score.impl.SGeographyImpl a legacy module? I cannot find it in the Repast documentation. Or could it be some homemade module ?","body":"Is repast.score.impl.SGeographyImpl a legacy module? I cannot find it in the Repast documentation. Or could it be some homemade module ?"},{"owner":{"account_id":26696174,"reputation":21,"user_id":20303989,"display_name":"Bastien Boucherat"},"score":0,"creation_date":1675451702,"post_id":75176564,"comment_id":132939525,"body_markdown":"I found that DefaultProjectionDescriptor precisely used in the model I was given is DEPRECATED in Repast documentation. \nDoes the fact that it is deprecated means that it can cause an error or is it only advised not to use it but it&#39;s still there for backward compatibility (and then the error is coming from somewhere else) ?","body":"I found that DefaultProjectionDescriptor precisely used in the model I was given is DEPRECATED in Repast documentation.  Does the fact that it is deprecated means that it can cause an error or is it only advised not to use it but it&#39;s still there for backward compatibility (and then the error is coming from somewhere else) ?"}],"owner":{"account_id":26696174,"reputation":21,"user_id":20303989,"display_name":"Bastien Boucherat"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675449702,"creation_date":1674151823,"question_id":75176564,"body_markdown":"I am launching a model that was created with an old version of repast (RepastSimphony 1.2.0) and I am trying to run it an the latest version of Repast.\r\n\r\nI have imported manually the scenarios files to the best of my abilities (I am a beginner with Repast).\r\n\r\nNow, when I launch the model in Repast, it has en error because it cannot find a certain file/library/module (I am unsure).\r\n\r\nNow, I am not sure whether this is a Repast internal library or some piece of code that I should have been given and that is missing...\r\n\r\nAny insight about this error will be welcome !\r\n\r\nThe error is this one:\r\n\r\n```\r\nWARN  [AWT-EventQueue-0] 13:20:38,158 ObjectActionLoader - Error loading information from data. Continuing with model loading.\r\ncom.thoughtworks.xstream.converters.ConversionException: repast.score.impl.SGeographyImpl : repast.score.impl.SGeographyImpl\r\n---- Debugging information ----\r\nmessage             : repast.score.impl.SGeographyImpl\r\ncause-exception     : com.thoughtworks.xstream.mapper.CannotResolveClassException\r\ncause-message       : repast.score.impl.SGeographyImpl\r\nclass               : java.util.ArrayList\r\nrequired-type       : java.util.ArrayList\r\nconverter-type      : com.thoughtworks.xstream.converters.collections.CollectionConverter\r\npath                : /repast.simphony.visualization.engine.DefaultDisplayDescriptor/projections/repast.score.impl.SGeographyImpl\r\nline number         : 61\r\nclass[1]            : repast.simphony.visualization.engine.DefaultDisplayDescriptor\r\nconverter-type[1]   : com.thoughtworks.xstream.converters.reflection.ReflectionConverter\r\nversion             : \r\n```\r\nI traced that the attempt to load something from the scenario description:\r\n\r\n```  &lt;projections&gt;\r\n    &lt;repast.score.impl.SGeographyImpl&gt;\r\n      &lt;name&gt;PeopleGeography&lt;/name&gt;\r\n    &lt;/repast.score.impl.SGeographyImpl&gt;\r\n  &lt;/projections&gt;\r\n  &lt;valueLayers/&gt;\r\n  &lt;projectionDescriptors&gt;\r\n    &lt;entry&gt;\r\n      &lt;string&gt;PeopleGeography&lt;/string&gt;\r\n      &lt;repast.simphony.visualization.engine.DefaultProjectionDescriptor&gt;\r\n        &lt;proj class=&quot;repast.score.impl.SGeographyImpl&quot; reference=&quot;../../../../projections/repast.score.impl.SGeographyImpl&quot;/&gt;\r\n        &lt;props/&gt;\r\n      &lt;/repast.simphony.visualization.engine.DefaultProjectionDescriptor&gt;\r\n    &lt;/entry&gt;\r\n  &lt;/projectionDescriptors&gt;\r\n```\r\n\r\nIncidentally, I tried to run a model from the model library (zombies) and it launches and works properly.","title":"Unknown error in Repast: does not find some module?","body":"<p>I am launching a model that was created with an old version of repast (RepastSimphony 1.2.0) and I am trying to run it an the latest version of Repast.</p>\n<p>I have imported manually the scenarios files to the best of my abilities (I am a beginner with Repast).</p>\n<p>Now, when I launch the model in Repast, it has en error because it cannot find a certain file/library/module (I am unsure).</p>\n<p>Now, I am not sure whether this is a Repast internal library or some piece of code that I should have been given and that is missing...</p>\n<p>Any insight about this error will be welcome !</p>\n<p>The error is this one:</p>\n<pre><code>WARN  [AWT-EventQueue-0] 13:20:38,158 ObjectActionLoader - Error loading information from data. Continuing with model loading.\ncom.thoughtworks.xstream.converters.ConversionException: repast.score.impl.SGeographyImpl : repast.score.impl.SGeographyImpl\n---- Debugging information ----\nmessage             : repast.score.impl.SGeographyImpl\ncause-exception     : com.thoughtworks.xstream.mapper.CannotResolveClassException\ncause-message       : repast.score.impl.SGeographyImpl\nclass               : java.util.ArrayList\nrequired-type       : java.util.ArrayList\nconverter-type      : com.thoughtworks.xstream.converters.collections.CollectionConverter\npath                : /repast.simphony.visualization.engine.DefaultDisplayDescriptor/projections/repast.score.impl.SGeographyImpl\nline number         : 61\nclass[1]            : repast.simphony.visualization.engine.DefaultDisplayDescriptor\nconverter-type[1]   : com.thoughtworks.xstream.converters.reflection.ReflectionConverter\nversion             : \n</code></pre>\n<p>I traced that the attempt to load something from the scenario description:</p>\n<pre><code>    &lt;repast.score.impl.SGeographyImpl&gt;\n      &lt;name&gt;PeopleGeography&lt;/name&gt;\n    &lt;/repast.score.impl.SGeographyImpl&gt;\n  &lt;/projections&gt;\n  &lt;valueLayers/&gt;\n  &lt;projectionDescriptors&gt;\n    &lt;entry&gt;\n      &lt;string&gt;PeopleGeography&lt;/string&gt;\n      &lt;repast.simphony.visualization.engine.DefaultProjectionDescriptor&gt;\n        &lt;proj class=&quot;repast.score.impl.SGeographyImpl&quot; reference=&quot;../../../../projections/repast.score.impl.SGeographyImpl&quot;/&gt;\n        &lt;props/&gt;\n      &lt;/repast.simphony.visualization.engine.DefaultProjectionDescriptor&gt;\n    &lt;/entry&gt;\n  &lt;/projectionDescriptors&gt;\n</code></pre>\n<p>Incidentally, I tried to run a model from the model library (zombies) and it launches and works properly.</p>\n"},{"tags":["java","bufferedreader","readline","processbuilder"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1667917019,"post_id":74362226,"comment_id":131278522,"body_markdown":"*Which* shell command?","body":"<i>Which</i> shell command?"},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1667917072,"post_id":74362226,"comment_id":131278543,"body_markdown":"@g00se **cURL** to get the response of a webpage.","body":"@g00se <b>cURL</b> to get the response of a webpage."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1667917305,"post_id":74362226,"comment_id":131278641,"body_markdown":"Why not read it directly into a string in Java? (Oversimplification): `String data = new String(new URL(site).openStream().readAllBytes());`","body":"Why not read it directly into a string in Java? (Oversimplification): <code>String data = new String(new URL(site).openStream().readAllBytes());</code>"},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1667917332,"post_id":74362226,"comment_id":131278651,"body_markdown":"I am making a curl call with *ProcessBuilder*. Once i have the webpage response as an *InputStream*, I am trying to convert the response into a String using *BufferedReader*. This process is CPU intensive [I have commented the code snippet that is CPU intensive above].","body":"I am making a curl call with <i>ProcessBuilder</i>. Once i have the webpage response as an <i>InputStream</i>, I am trying to convert the response into a String using <i>BufferedReader</i>. This process is CPU intensive [I have commented the code snippet that is CPU intensive above]."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1667917471,"post_id":74362226,"comment_id":131278719,"body_markdown":"See above for (simplified) code","body":"See above for (simplified) code"},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1667917525,"post_id":74362226,"comment_id":131278754,"body_markdown":"@g00se reading the url directly is not possible. My requirement is to get the webpage response using cURL.","body":"@g00se reading the url directly is not possible. My requirement is to get the webpage response using cURL."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1667917719,"post_id":74362226,"comment_id":131278841,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/249427/discussion-between-g00se-and-mang4521).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/249427/discussion-between-g00se-and-mang4521\">continue this discussion in chat</a>."},{"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"score":0,"creation_date":1667918817,"post_id":74362226,"comment_id":131279306,"body_markdown":"But what do you expect? Not suite understand your question... It is supposed to use all the CPU!","body":"But what do you expect? Not suite understand your question... It is supposed to use all the CPU!"},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1667921173,"post_id":74362226,"comment_id":131280395,"body_markdown":"@ACV I would like to make the code more efficient where the resource [CPU, memory, time etc] requirement is minimal.","body":"@ACV I would like to make the code more efficient where the resource [CPU, memory, time etc] requirement is minimal."},{"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"score":0,"creation_date":1667984632,"post_id":74362226,"comment_id":131295742,"body_markdown":"@mang4521 - the CPU is supposed to be used to max  by a process. It is up to the OS to allocate it to different processes. But I definitely want my process to use all the CPU available to complete the task as soon as possible. Memory is another thing altogether. The only way to control CPU time is to introduce sleeps in your processing thread.","body":"@mang4521 - the CPU is supposed to be used to max  by a process. It is up to the OS to allocate it to different processes. But I definitely want my process to use all the CPU available to complete the task as soon as possible. Memory is another thing altogether. The only way to control CPU time is to introduce sleeps in your processing thread."},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1667986526,"post_id":74362226,"comment_id":131296435,"body_markdown":"@ACV I understand that, but the code snippet mentioned above is resource hungry. There ideally should be more efficient ways of handling the same.","body":"@ACV I understand that, but the code snippet mentioned above is resource hungry. There ideally should be more efficient ways of handling the same."},{"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"score":0,"creation_date":1667989015,"post_id":74362226,"comment_id":131297273,"body_markdown":"@mang4521 - agree. In that case what you want to do is maybe separate into a thread of its own and let it read and persist the data it got and when it&#39;s done to notify the main thread. You&#39;re reading a large data stream - it is normal for it to consume CPU. Another approach is to somehow split this data stream into chunks and process them in batches or in parallel (but then need to think how to assemble them back)... Anyway, there is not much you can do here","body":"@mang4521 - agree. In that case what you want to do is maybe separate into a thread of its own and let it read and persist the data it got and when it&#39;s done to notify the main thread. You&#39;re reading a large data stream - it is normal for it to consume CPU. Another approach is to somehow split this data stream into chunks and process them in batches or in parallel (but then need to think how to assemble them back)... Anyway, there is not much you can do here"},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1667989501,"post_id":74362226,"comment_id":131297432,"body_markdown":"@ACV I already am running the *complete* code snippet shared above as separate threads for multiple incoming requests. I would therefore wish to avoid running the resource hungry snippet as a separate thread. What I would like to do is find out a more efficient way to read from ```ProcessBuilder``` and then convert it to a ```String``` if possible.","body":"@ACV I already am running the <i>complete</i> code snippet shared above as separate threads for multiple incoming requests. I would therefore wish to avoid running the resource hungry snippet as a separate thread. What I would like to do is find out a more efficient way to read from <code>ProcessBuilder</code> and then convert it to a <code>String</code> if possible."},{"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"score":0,"creation_date":1668098345,"post_id":74362226,"comment_id":131329441,"body_markdown":"You should move away from ProcessBuilder - it is not sustainable. Find another way as others suggested of fetching data from the internet.","body":"You should move away from ProcessBuilder - it is not sustainable. Find another way as others suggested of fetching data from the internet."},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1668098748,"post_id":74362226,"comment_id":131329611,"body_markdown":"@ACV I have scoured may webpages online to find other options apart from ProcessBuilder [for Java], havent found many. As you by any chance aware of any [to make a curl call using Java]?","body":"@ACV I have scoured may webpages online to find other options apart from ProcessBuilder [for Java], havent found many. As you by any chance aware of any [to make a curl call using Java]?"},{"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"score":0,"creation_date":1668157558,"post_id":74362226,"comment_id":131342291,"body_markdown":"@mang4521 as others pointed out, java has its own &quot;curl&quot;. You can use that. However! that would not resolve your &quot;problem&quot;. Your problem is that reading a large response from a website takes long. So if you don&#39;t want that to hold off other &quot;processes&quot; in your application, you must rethink the architecture. Make it a separate app running all the time and persisting the website responses to a database or something in a form which is easy for the main app to consume.","body":"@mang4521 as others pointed out, java has its own &quot;curl&quot;. You can use that. However! that would not resolve your &quot;problem&quot;. Your problem is that reading a large response from a website takes long. So if you don&#39;t want that to hold off other &quot;processes&quot; in your application, you must rethink the architecture. Make it a separate app running all the time and persisting the website responses to a database or something in a form which is easy for the main app to consume."},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1668162408,"post_id":74362226,"comment_id":131343959,"body_markdown":"@ACV What I do not understand is this. I have utilised say Apache HTTPClient to scrape a website. The CPU usage to obtain the response is around 20%. But , the same with cURL is a 100%. Even if we take efficient utilisation of resources on Apache&#39;s part, the difference shouldn&#39;t really be this big.","body":"@ACV What I do not understand is this. I have utilised say Apache HTTPClient to scrape a website. The CPU usage to obtain the response is around 20%. But , the same with cURL is a 100%. Even if we take efficient utilisation of resources on Apache&#39;s part, the difference shouldn&#39;t really be this big."},{"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"score":0,"creation_date":1668253376,"post_id":74362226,"comment_id":131363512,"body_markdown":"Probably something to do with how `Process` is implemented.. try increasing the wrapping `BufferedReader` buffer size in your code","body":"Probably something to do with how <code>Process</code> is implemented.. try increasing the wrapping <code>BufferedReader</code> buffer size in your code"},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":1,"creation_date":1668434455,"post_id":74362226,"comment_id":131397076,"body_markdown":"@ACV By increase in buffer size, are you referring to this? ```BufferedReader(Reader in, int size)```","body":"@ACV By increase in buffer size, are you referring to this? <code>BufferedReader(Reader in, int size)</code>"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1672761142,"post_id":74362226,"comment_id":132344734,"body_markdown":"What is `FileUtils.readFileToString`? And what actual file/string size are we talking about?","body":"What is <code>FileUtils.readFileToString</code>? And what actual file/string size are we talking about?"},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1672764253,"post_id":74362226,"comment_id":132345762,"body_markdown":"@Holger The first code snippet you see in the description is my solution. ```FileUtils.readFileToString``` is a line of code from one of the solutions suggested below [to read the stream into a file and then convert the file content into a string]. This solution did not help.","body":"@Holger The first code snippet you see in the description is my solution. <code>FileUtils.readFileToString</code> is a line of code from one of the solutions suggested below [to read the stream into a file and then convert the file content into a string]. This solution did not help."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1672764511,"post_id":74362226,"comment_id":132345857,"body_markdown":"Well, since `FileUtils.readFileToString` is not a standard method, it’s pointless to say that the method, whose implementation we don’t know, did not solve the problem. You also forgot to mention the sizes. And if we are at it, naming the total time would also help to judge the CPU utilization. Further things to clarify: how is the CPU utilization when using the same curl command without Java? And when you split the work into running the subprocess and reading the string, which part is then consuming the CPU?","body":"Well, since <code>FileUtils.readFileToString</code> is not a standard method, it’s pointless to say that the method, whose implementation we don’t know, did not solve the problem. You also forgot to mention the sizes. And if we are at it, naming the total time would also help to judge the CPU utilization. Further things to clarify: how is the CPU utilization when using the same curl command without Java? And when you split the work into running the subprocess and reading the string, which part is then consuming the CPU?"},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1672765629,"post_id":74362226,"comment_id":132346209,"body_markdown":"I tried running cURL with python (os) and the CPU utilisation was much lower. As far as splitting the subprocess is concerned, the process to extract the data from the &quot;stream&quot; object into a string is the most time consuming process.","body":"I tried running cURL with python (os) and the CPU utilisation was much lower. As far as splitting the subprocess is concerned, the process to extract the data from the &quot;stream&quot; object into a string is the most time consuming process."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1672989143,"post_id":74362226,"comment_id":132401368,"body_markdown":"Can you provide a [mre], so that we may profile the code ourselves?","body":"Can you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, so that we may profile the code ourselves?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1673019095,"post_id":74362226,"comment_id":132409812,"body_markdown":"Just to be clear. You’re saying that when you use `redirectOutput(ProcessBuilder.Redirect.appendTo(contentFile));`, followed by `FileUtils.readFileToString(contentFile)`, the subprocess is fast and the CPU time consumption is at the `readFileToString` call? You did verify this? Did you try `Redirect\nto(contentFile)` instead of `Redirect.appendTo(contentFile)`, to be sure that you didn’t read more data than necessary?","body":"Just to be clear. You’re saying that when you use <code>redirectOutput(ProcessBuilder.Redirect.appendTo(contentFile)&zwnj;&#8203;);</code>, followed by <code>FileUtils.readFileToString(contentFile)</code>, the subprocess is fast and the CPU time consumption is at the <code>readFileToString</code> call? You did verify this? Did you try <code>Redirect to(contentFile)</code> instead of <code>Redirect.appendTo(contentFile)</code>, to be sure that you didn’t read more data than necessary?"},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1673090715,"post_id":74362226,"comment_id":132422452,"body_markdown":"@Holger I have updated the description [made it more compact]. The code snippet shared in the description spends most of the CPU resources while retrieving the cURL response data and during the process of converting the response stream into a string.","body":"@Holger I have updated the description [made it more compact]. The code snippet shared in the description spends most of the CPU resources while retrieving the cURL response data and during the process of converting the response stream into a string."},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1673091326,"post_id":74362226,"comment_id":132422564,"body_markdown":"@Slaw the code snippet shared in the description should ideally be sufficient enough for you to run it successfully. The getArgs() method requires you to pass a url to scrape.\nAddition of imports [if required] is going to be tough here as there are other imports which are exclusive to the problem.","body":"@Slaw the code snippet shared in the description should ideally be sufficient enough for you to run it successfully. The getArgs() method requires you to pass a url to scrape. Addition of imports [if required] is going to be tough here as there are other imports which are exclusive to the problem."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1673098690,"post_id":74362226,"comment_id":132423823,"body_markdown":"These are the results for the case that you are reading from the pipe. I’d like to see the results for the other case, when you redirect `curl` to a file and read afterwards. That’s important for narrowing down the problem.","body":"These are the results for the case that you are reading from the pipe. I’d like to see the results for the other case, when you redirect <code>curl</code> to a file and read afterwards. That’s important for narrowing down the problem."},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1673106555,"post_id":74362226,"comment_id":132425489,"body_markdown":"@mang4521 would you mind describing what is present on &quot;profiler screenshot&quot;? Is it a `Sampler` or `Profiler` tab? How many executions of your scrape method it has captured during session? What is Java version?","body":"@mang4521 would you mind describing what is present on &quot;profiler screenshot&quot;? Is it a <code>Sampler</code> or <code>Profiler</code> tab? How many executions of your scrape method it has captured during session? What is Java version?"},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1673270045,"post_id":74362226,"comment_id":132453705,"body_markdown":"@AndreyB.Panfilov This is a profiler tab. I have profiled the service using VisualVM. It has captured over 30K executions. I am on java 8.","body":"@AndreyB.Panfilov This is a profiler tab. I have profiled the service using VisualVM. It has captured over 30K executions. I am on java 8."},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1673270209,"post_id":74362226,"comment_id":132453761,"body_markdown":"@Holger redirecting the curl response into a file and then reading the file did not improve the CPU usage.The CPU usage remained same as what was described with my original solution.","body":"@Holger redirecting the curl response into a file and then reading the file did not improve the CPU usage.The CPU usage remained same as what was described with my original solution."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1673270675,"post_id":74362226,"comment_id":132453979,"body_markdown":"That’s understood. You said it multiple times. You keep ignoring the question: *which part* is consuming the CPU time when you perform the operation in two steps? Is it still the execution of the `curl` command or is it the reading of the result, which can only happen after the completion of the `curl` command in that case?","body":"That’s understood. You said it multiple times. You keep ignoring the question: <i>which part</i> is consuming the CPU time when you perform the operation in two steps? Is it still the execution of the <code>curl</code> command or is it the reading of the result, which can only happen after the completion of the <code>curl</code> command in that case?"},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1673271174,"post_id":74362226,"comment_id":132454216,"body_markdown":"@Holger It is the process of reading the curl response as a stream which is the most CPU consuming process. Here the curl response is received as a stream and reading the stream takes up the most resource. Hope this answers your question.","body":"@Holger It is the process of reading the curl response as a stream which is the most CPU consuming process. Here the curl response is received as a stream and reading the stream takes up the most resource. Hope this answers your question."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1673273390,"post_id":74362226,"comment_id":132455076,"body_markdown":"So it boils down to “how to read a file into a string efficiently”. In your first example, you are reading line by line and appending to a `StringBuilder` which will result into a string without the line breaks. Is this a requirement or would an operation that reads the file as-is at once, keeping the line breaks, also work for you?","body":"So it boils down to “how to read a file into a string efficiently”. In your first example, you are reading line by line and appending to a <code>StringBuilder</code> which will result into a string without the line breaks. Is this a requirement or would an operation that reads the file as-is at once, keeping the line breaks, also work for you?"},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1673275482,"post_id":74362226,"comment_id":132455972,"body_markdown":"@Holger Actually no. Once a cURL request is made, the response has to be read as a ```Stream```. Now reading the response itself from the stream is a CPU intensive process [irrespective of whether it is converted into a string or not]. I have also tested the process where the line breaks are not removed. No change in the CPU usage observed there.","body":"@Holger Actually no. Once a cURL request is made, the response has to be read as a <code>Stream</code>. Now reading the response itself from the stream is a CPU intensive process [irrespective of whether it is converted into a string or not]. I have also tested the process where the line breaks are not removed. No change in the CPU usage observed there."},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1673277199,"post_id":74362226,"comment_id":132456643,"body_markdown":"@mang4521 using `StringBuilderWriter/WriterOutputStream` from commons-io seems to be bit faster than `BufferedReader#readLine()`,  writing to `ByteArrayOutputStream` and then calling `ByteArrayOutputStream.toString()` is faster than `StringBuilderWriter/WriterOutputStream` (I would think about pooling `ByteArrayOutputStream` objects), btw, what is your throughput expectations if it currently spends 81 secs for 30K executions (more that 300 rps)?","body":"@mang4521 using <code>StringBuilderWriter&#47;WriterOutputStream</code> from commons-io seems to be bit faster than <code>BufferedReader#readLine()</code>,  writing to <code>ByteArrayOutputStream</code> and then calling <code>ByteArrayOutputStream.toString()</code> is faster than <code>StringBuilderWriter&#47;WriterOutputStream</code> (I would think about pooling <code>ByteArrayOutputStream</code> objects), btw, what is your throughput expectations if it currently spends 81 secs for 30K executions (more that 300 rps)?"},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1673278038,"post_id":74362226,"comment_id":132456985,"body_markdown":"@AndreyB.Panfilov to be honest, speed isn&#39;t my primary concern here but the usage of CPU. My bandwidth would be around 25TPS per instance. There aren&#39;t expectations in terms of throughput atm.","body":"@AndreyB.Panfilov to be honest, speed isn&#39;t my primary concern here but the usage of CPU. My bandwidth would be around 25TPS per instance. There aren&#39;t expectations in terms of throughput atm."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1673278468,"post_id":74362226,"comment_id":132457156,"body_markdown":"Please stop interpreting everything I write as a question whether it changes the CPU usage. You don’t know what I would suggest, so you can’t know whether it will change the CPU usage. I asked about your requirements regarding the result. Your code example reads into a `StringBuilder`, eventually producing a single `String`. Now you write you need a `Stream`. The most efficient way to read a file into a single string is [`readString`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/file/Files.html#readString(java.nio.file.Path)), by the way. Unfortunately not for Java&#160;8.","body":"Please stop interpreting everything I write as a question whether it changes the CPU usage. You don’t know what I would suggest, so you can’t know whether it will change the CPU usage. I asked about your requirements regarding the result. Your code example reads into a <code>StringBuilder</code>, eventually producing a single <code>String</code>. Now you write you need a <code>Stream</code>. The most efficient way to read a file into a single string is <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/file/Files.html#readString(java.nio.file.Path)\" rel=\"nofollow noreferrer\"><code>readString</code></a>, by the way. Unfortunately not for Java 8."},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1673280869,"post_id":74362226,"comment_id":132458208,"body_markdown":"@Holger I am looking out for certain text in the response string. This I can accomplish either by removing the line breaks or by keeping the response string as is. Either case I can devise a ```java.util.regex.Matcher``` search regex.","body":"@Holger I am looking out for certain text in the response string. This I can accomplish either by removing the line breaks or by keeping the response string as is. Either case I can devise a <code>java.util.regex.Matcher</code> search regex."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1673290094,"post_id":74362226,"comment_id":132461293,"body_markdown":"That’s an important information. For example, you don’t need to call `toString()` on the `StringBuilder`, as the regex engine operates on the `CharSequence` interface, so you can search the `StringBuilder` directly. But if the pattern can not span multiple lines, you can simply perform a match attempt on each line right after reading it, instead of assembling the lines to a big string. You can also try `Scanner`. For the other approach, using the temporary file, you can also check [this answer](https://stackoverflow.com/a/52062570/2711488) for efficient pattern matching options.","body":"That’s an important information. For example, you don’t need to call <code>toString()</code> on the <code>StringBuilder</code>, as the regex engine operates on the <code>CharSequence</code> interface, so you can search the <code>StringBuilder</code> directly. But if the pattern can not span multiple lines, you can simply perform a match attempt on each line right after reading it, instead of assembling the lines to a big string. You can also try <code>Scanner</code>. For the other approach, using the temporary file, you can also check <a href=\"https://stackoverflow.com/a/52062570/2711488\">this answer</a> for efficient pattern matching options."},{"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"score":0,"creation_date":1673332450,"post_id":74362226,"comment_id":132468951,"body_markdown":"@Holger Certainly let me take a look. What if I still want to turn the response into a string [as a future reference]? Are there efficient ways of handling this?","body":"@Holger Certainly let me take a look. What if I still want to turn the response into a string [as a future reference]? Are there efficient ways of handling this?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1673337264,"post_id":74362226,"comment_id":132470114,"body_markdown":"As said, the most efficient solution is to upgrade to a recent Java version and use [`Files.readString`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/file/Files.html#readString(java.nio.file.Path)). In the best case, it does a single read and no copy operations, as it can access internals when converting the buffer to a string, which no other solution can. This depends on the chosen charset encoding and actual contents. Which has been discussed in [this answer](https://stackoverflow.com/a/70258672/2711488), for example.","body":"As said, the most efficient solution is to upgrade to a recent Java version and use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/file/Files.html#readString(java.nio.file.Path)\" rel=\"nofollow noreferrer\"><code>Files.readString</code></a>. In the best case, it does a single read and no copy operations, as it can access internals when converting the buffer to a string, which no other solution can. This depends on the chosen charset encoding and actual contents. Which has been discussed in <a href=\"https://stackoverflow.com/a/70258672/2711488\">this answer</a>, for example."}],"owner":{"account_id":18770885,"reputation":772,"user_id":13687718,"display_name":"mang4521"},"comment_count":42,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":409,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675449091,"creation_date":1667916895,"question_id":74362226,"body_markdown":"I have a piece of code which uses `ProcessBuilder` to run a shell command [cURL] and the response from the command is pretty huge [webpage content].\r\n\r\nI am utilising the `BufferedReader` to read the response from `ProcessBuilder` as shown below\r\n\r\n```java\r\nStringBuilder sb = new StringBuilder();\r\nProcessBuilder processBuilder = new ProcessBuilder();\r\nList&lt;String&gt; args = getArgs(&quot;url_to_be_passed&quot;);  // Getting my ProcessBuilder args here\r\nprocessBuilder.command(args);\r\nprocessBuilder.redirectErrorStream(true);\r\nProcess proc = processBuilder.start();\r\nBufferedReader br = null;\r\ntry {\r\n    InputStream inpc = proc.getInputStream();\r\n\r\n    /** Beginning of CPU intensive process **/\r\n    br = new BufferedReader(new InputStreamReader(inpc));\r\n    String line;\r\n    while ((line = br.readLine()) != null)\r\n        sb.append(line);\r\n\r\n    /** End of CPU intensive process **/\r\n\r\n    boolean termination = proc.waitFor(15, TimeUnit.SECONDS);\r\n    if (!termination)\r\n        throw new SocketTimeoutException(&quot;Socket Timed out&quot;);\r\n} finally {\r\n    if(null != br)\r\n        br.close();\r\n    proc.destroy();\r\n}\r\nString data = sb.toString();   // Convert data from ProcessBuilder into a String\r\n```\r\n\r\nThe getArgs() method is as follows:\r\n\r\n```\r\nprivate List&lt;String&gt; getArgs(String url) {\r\n        List&lt;String&gt; args = new LinkedList&lt;&gt;();\r\n        args.add(&quot;curl&quot;);\r\n        args.add(&quot;-L&quot;);\r\n        args.add(&quot;--silent&quot;);\r\n        args.add(&quot;--write-out&quot;);\r\n        args.add(&quot;HTTPSTATUS:%{http_code}&quot;);\r\n        args.add(url);\r\n        args.add(&quot;-XGET&quot;);\r\n        \r\n        args.add(&quot;--compressed&quot;);\r\n        args.add(&quot;--connect-timeout&quot;);\r\n        args.add(&quot;10&quot;);\r\n        \r\n        return args;\r\n    }\r\n```\r\n\r\nI have profiled this piece of code using VisualVM and the screenshot of the CPU intensive process is as shown below:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OgMI4.png\r\n\r\nMy queries are as follows:\r\n\r\n* What is the best way to convert the response from `ProcessBuilder` into a `String`?\r\n* If using `BufferedReader` indeed is a good way to read response from `ProcessBuilder`, how \r\n  to make it more CPU friendly?","title":"Reducing CPU usage with ProcessBuilder and BufferedWriter","body":"<p>I have a piece of code which uses <code>ProcessBuilder</code> to run a shell command [cURL] and the response from the command is pretty huge [webpage content].</p>\n<p>I am utilising the <code>BufferedReader</code> to read the response from <code>ProcessBuilder</code> as shown below</p>\n<pre class=\"lang-java prettyprint-override\"><code>StringBuilder sb = new StringBuilder();\nProcessBuilder processBuilder = new ProcessBuilder();\nList&lt;String&gt; args = getArgs(&quot;url_to_be_passed&quot;);  // Getting my ProcessBuilder args here\nprocessBuilder.command(args);\nprocessBuilder.redirectErrorStream(true);\nProcess proc = processBuilder.start();\nBufferedReader br = null;\ntry {\n    InputStream inpc = proc.getInputStream();\n\n    /** Beginning of CPU intensive process **/\n    br = new BufferedReader(new InputStreamReader(inpc));\n    String line;\n    while ((line = br.readLine()) != null)\n        sb.append(line);\n\n    /** End of CPU intensive process **/\n\n    boolean termination = proc.waitFor(15, TimeUnit.SECONDS);\n    if (!termination)\n        throw new SocketTimeoutException(&quot;Socket Timed out&quot;);\n} finally {\n    if(null != br)\n        br.close();\n    proc.destroy();\n}\nString data = sb.toString();   // Convert data from ProcessBuilder into a String\n</code></pre>\n<p>The getArgs() method is as follows:</p>\n<pre><code>private List&lt;String&gt; getArgs(String url) {\n        List&lt;String&gt; args = new LinkedList&lt;&gt;();\n        args.add(&quot;curl&quot;);\n        args.add(&quot;-L&quot;);\n        args.add(&quot;--silent&quot;);\n        args.add(&quot;--write-out&quot;);\n        args.add(&quot;HTTPSTATUS:%{http_code}&quot;);\n        args.add(url);\n        args.add(&quot;-XGET&quot;);\n        \n        args.add(&quot;--compressed&quot;);\n        args.add(&quot;--connect-timeout&quot;);\n        args.add(&quot;10&quot;);\n        \n        return args;\n    }\n</code></pre>\n<p>I have profiled this piece of code using VisualVM and the screenshot of the CPU intensive process is as shown below:</p>\n<p><a href=\"https://i.stack.imgur.com/OgMI4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OgMI4.png\" alt=\"enter image description here\" /></a></p>\n<p>My queries are as follows:</p>\n<ul>\n<li>What is the best way to convert the response from <code>ProcessBuilder</code> into a <code>String</code>?</li>\n<li>If using <code>BufferedReader</code> indeed is a good way to read response from <code>ProcessBuilder</code>, how\nto make it more CPU friendly?</li>\n</ul>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":3435599,"reputation":4037,"user_id":2878796,"display_name":"UnholySheep"},"score":0,"creation_date":1659202433,"post_id":73177768,"comment_id":129240008,"body_markdown":"I would have called `toCharArray` then changed every third index in that array to `&#39;X&#39;` then constructed a new string from that array","body":"I would have called <code>toCharArray</code> then changed every third index in that array to <code>&#39;X&#39;</code> then constructed a new string from that array"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1659204486,"post_id":73177768,"comment_id":129240412,"body_markdown":"If the input string is **abcdefghij** then shouldn&#39;t the output string be **abXdeXghXj** (rather than `abXdeXfgXij`) ?","body":"If the input string is <b>abcdefghij</b> then shouldn&#39;t the output string be <b>abXdeXghXj</b> (rather than <code>abXdeXfgXij</code>) ?"}],"answers":[{"tags":[],"owner":{"account_id":22112469,"reputation":74,"user_id":16367144,"display_name":"SquidXTV"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1659204153,"creation_date":1659204153,"answer_id":73177957,"question_id":73177768,"body_markdown":"this works fine for me\r\n```\r\nString ans = &quot;&quot;;\r\nString a = &quot;abcdefghij&quot;;\r\nfor(int i = 1; i&lt;=a.length(); i++) {\r\n    if(i%3==0) {\r\n        ans += &quot;X&quot;;\r\n    } else {\r\n        ans += a.charAt(i-1);\r\n    }\r\n}\r\nSystem.out.println(ans);\r\n```","title":"Change letters of a string at certain points","body":"<p>this works fine for me</p>\n<pre><code>String ans = &quot;&quot;;\nString a = &quot;abcdefghij&quot;;\nfor(int i = 1; i&lt;=a.length(); i++) {\n    if(i%3==0) {\n        ans += &quot;X&quot;;\n    } else {\n        ans += a.charAt(i-1);\n    }\n}\nSystem.out.println(ans);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1468853,"reputation":3627,"user_id":1380933,"display_name":"Vadik Sirekanyan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659204980,"creation_date":1659204469,"answer_id":73177997,"question_id":73177768,"body_markdown":"String concatenation doesn&#39;t work optimally because of string is copying on every step of the loop, consider using `StringBuilder`.\r\n\r\nTo solve your problem, just iterate on every char of the input string and copy every char to the output string builder, except for every third character (the character which index `i` satisfies the equality `i % 3 == 2`).\r\n\r\nYou will get something like this:\r\n\r\n```java\r\nString input = &quot;abcdefghijk&quot;;\r\nStringBuilder output = new StringBuilder();\r\nfor (int i = 0; i &lt; input.length(); i++) {\r\n    if (i % 3 == 2) {\r\n        output.append(&quot;X&quot;);\r\n    } else {\r\n        output.append(input.charAt(i));\r\n    }\r\n}\r\nString ans = output.toString();\r\n```","title":"Change letters of a string at certain points","body":"<p>String concatenation doesn't work optimally because of string is copying on every step of the loop, consider using <code>StringBuilder</code>.</p>\n<p>To solve your problem, just iterate on every char of the input string and copy every char to the output string builder, except for every third character (the character which index <code>i</code> satisfies the equality <code>i % 3 == 2</code>).</p>\n<p>You will get something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String input = &quot;abcdefghijk&quot;;\nStringBuilder output = new StringBuilder();\nfor (int i = 0; i &lt; input.length(); i++) {\n    if (i % 3 == 2) {\n        output.append(&quot;X&quot;);\n    } else {\n        output.append(input.charAt(i));\n    }\n}\nString ans = output.toString();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659205617,"creation_date":1659205617,"answer_id":73178125,"question_id":73177768,"body_markdown":"Simpler and shorter use regex:\r\n\r\n    String a     = &quot;abcabcabcab&quot;;\r\n    String regex = &quot;(..)(.)&quot;;\r\n    String ans   = a.replaceAll(regex,&quot;$1X&quot;);\r\n\r\nStrings should not be concatenated using &#39;+&#39; in a loop. If, how ever, you want to stick to that approach you should only itereate to the largest number multiple of three which is less than your input length. You also need to append possiblly not appended chars if your input length is not a multiple of three after the loop:\r\n\r\n    String a = &quot;abcabcabcab&quot;;\r\n    String ans = &quot;&quot;;\r\n\r\n    for (int j = 0; j &lt; a.length() / 3 * 3; j += 3) {\r\n        ans += a.substring(j, j+2) + &#39;X&#39;;\r\n    }\r\n    \r\n    ans += a.substring(ans.length());\r\n\r\n\r\n\r\n","title":"Change letters of a string at certain points","body":"<p>Simpler and shorter use regex:</p>\n<pre><code>String a     = &quot;abcabcabcab&quot;;\nString regex = &quot;(..)(.)&quot;;\nString ans   = a.replaceAll(regex,&quot;$1X&quot;);\n</code></pre>\n<p>Strings should not be concatenated using '+' in a loop. If, how ever, you want to stick to that approach you should only itereate to the largest number multiple of three which is less than your input length. You also need to append possiblly not appended chars if your input length is not a multiple of three after the loop:</p>\n<pre><code>String a = &quot;abcabcabcab&quot;;\nString ans = &quot;&quot;;\n\nfor (int j = 0; j &lt; a.length() / 3 * 3; j += 3) {\n    ans += a.substring(j, j+2) + 'X';\n}\n\nans += a.substring(ans.length());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6097291,"reputation":400,"user_id":4757683,"display_name":"Shaik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675449077,"creation_date":1675449077,"answer_id":75339737,"question_id":73177768,"body_markdown":"    public static String replaceEvery3rdChar(String input) \r\n    {\r\n         StringBuilder result = new StringBuilder();\r\n         for (int i = 0; i &lt; input.length(); i++) \r\n         {\r\n            if ((i + 1) % 3 == 0)\r\n            {\r\n              result.append(&quot;X&quot;);\r\n            } \r\n            else\r\n            {\r\n              result.append(input.charAt(i));\r\n            }\r\n         }\r\n         return result.toString();\r\n      }","title":"Change letters of a string at certain points","body":"<pre><code>public static String replaceEvery3rdChar(String input) \n{\n     StringBuilder result = new StringBuilder();\n     for (int i = 0; i &lt; input.length(); i++) \n     {\n        if ((i + 1) % 3 == 0)\n        {\n          result.append(&quot;X&quot;);\n        } \n        else\n        {\n          result.append(input.charAt(i));\n        }\n     }\n     return result.toString();\n  }\n</code></pre>\n"}],"owner":{"account_id":20904920,"reputation":69,"user_id":17512245,"display_name":"Nikolas Trapp"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73177957,"answer_count":4,"score":1,"last_activity_date":1675449077,"creation_date":1659202118,"question_id":73177768,"body_markdown":"I get a string from the keyboard and I want every 3 letters in the string to change the original letter to an &quot;X&quot;, but I&#39;m having trouble doing this algorithm.\r\n\r\nfor example: if I have the string **abcdefghij** I have to return the string **abXdeXfgXij**\r\nor if i have **hellokit** string i need to return **heXloXit**\r\n\r\nI&#39;ve done this so far:\r\n```\r\nString ans = &quot;&quot;;\r\nString a = &quot;abcdefghijk&quot;;\r\n\t\t\t  \r\nfor (int j = 0; j &lt; a.length(); j += 3) {\r\n\tans += a.substring(j, j+2) + x;\r\n}\r\n```\r\n\r\nbut it can happen to give the ```StringIndexOutOfBoundsException``` error.\r\n\r\nhow can i do this without resulting in error?\r\n\r\n","title":"Change letters of a string at certain points","body":"<p>I get a string from the keyboard and I want every 3 letters in the string to change the original letter to an &quot;X&quot;, but I'm having trouble doing this algorithm.</p>\n<p>for example: if I have the string <strong>abcdefghij</strong> I have to return the string <strong>abXdeXfgXij</strong>\nor if i have <strong>hellokit</strong> string i need to return <strong>heXloXit</strong></p>\n<p>I've done this so far:</p>\n<pre><code>String ans = &quot;&quot;;\nString a = &quot;abcdefghijk&quot;;\n              \nfor (int j = 0; j &lt; a.length(); j += 3) {\n    ans += a.substring(j, j+2) + x;\n}\n</code></pre>\n<p>but it can happen to give the <code>StringIndexOutOfBoundsException</code> error.</p>\n<p>how can i do this without resulting in error?</p>\n"},{"tags":["java","string","floating-point","format","double"],"comments":[{"owner":{"account_id":232,"reputation":29734,"user_id":287,"accept_rate":91,"display_name":"basszero"},"score":0,"creation_date":1238541072,"post_id":703396,"comment_id":516115,"body_markdown":"If all you want are integers, why not use a long? You get more bang at 2^63-1, no awkward formatting, and better performance.","body":"If all you want are integers, why not use a long? You get more bang at 2^63-1, no awkward formatting, and better performance."},{"owner":{"account_id":11354,"reputation":27694,"user_id":21838,"accept_rate":82,"display_name":"Pyrolistical"},"score":18,"creation_date":1238541154,"post_id":703396,"comment_id":516122,"body_markdown":"Because some values are actually doubles","body":"Because some values are actually doubles"},{"owner":{"account_id":11354,"reputation":27694,"user_id":21838,"accept_rate":82,"display_name":"Pyrolistical"},"score":2,"creation_date":1319271498,"post_id":703396,"comment_id":9584640,"body_markdown":"Some cases where this problem occured was a bug fixed in JDK 7: http://stackoverflow.com/questions/7564525/why-do-some-floating-point-numbers-appear-with-a-trailing-0","body":"Some cases where this problem occured was a bug fixed in JDK 7: <a href=\"http://stackoverflow.com/questions/7564525/why-do-some-floating-point-numbers-appear-with-a-trailing-0\" title=\"why do some floating point numbers appear with a trailing 0\">stackoverflow.com/questions/7564525/&hellip;</a>"},{"owner":{"account_id":4670132,"reputation":5867,"user_id":3782119,"display_name":"Shayan Amani"},"score":0,"creation_date":1575048509,"post_id":703396,"comment_id":104449363,"body_markdown":"`System.out.println(&quot;YOUR STRING&quot; + YOUR_DOUBLE_VARIABLE);`","body":"<code>System.out.println(&quot;YOUR STRING&quot; + YOUR_DOUBLE_VARIABLE);</code>"},{"owner":{"account_id":4297513,"reputation":2662,"user_id":3512164,"accept_rate":47,"display_name":"Ibrahim Disouki"},"score":0,"creation_date":1649071466,"post_id":703396,"comment_id":126775297,"body_markdown":"This is the correct [answer](https://stackoverflow.com/a/25542023/3512164)","body":"This is the correct <a href=\"https://stackoverflow.com/a/25542023/3512164\">answer</a>"}],"answers":[{"comments":[{"owner":{"account_id":11354,"reputation":27694,"user_id":21838,"accept_rate":82,"display_name":"Pyrolistical"},"score":0,"creation_date":1238545458,"post_id":703424,"comment_id":516293,"body_markdown":"If you are going to down vote, you need to at least leave a comment","body":"If you are going to down vote, you need to at least leave a comment"},{"owner":{"account_id":1885,"reputation":137382,"user_id":2598,"accept_rate":93,"display_name":"jjnguy"},"score":7,"creation_date":1238552908,"post_id":703424,"comment_id":516510,"body_markdown":"I downvoted because your solution is not the best way to go.  Have a look at String.format.  You need to use the correct format type, float in this instance.  Look at my above answer.","body":"I downvoted because your solution is not the best way to go.  Have a look at String.format.  You need to use the correct format type, float in this instance.  Look at my above answer."},{"owner":{"account_id":65788,"reputation":3165,"user_id":193375,"accept_rate":79,"display_name":"Obay"},"score":9,"creation_date":1295433536,"post_id":703424,"comment_id":5231777,"body_markdown":"I voted up because I am having the same problem, and nobody here seems to understand the problem.","body":"I voted up because I am having the same problem, and nobody here seems to understand the problem."},{"owner":{"account_id":32707,"reputation":10109,"user_id":90934,"accept_rate":100,"display_name":"Steve Pomeroy"},"score":1,"creation_date":1303888517,"post_id":703424,"comment_id":6652245,"body_markdown":"Downvoted as the DecimalFormat mentioned in Tom&#39;s post is exactly what you were looking for. It strips zeros quite effectively.","body":"Downvoted as the DecimalFormat mentioned in Tom&#39;s post is exactly what you were looking for. It strips zeros quite effectively."},{"owner":{"account_id":180740,"reputation":2722,"user_id":414266,"accept_rate":100,"display_name":"Zulaxia"},"score":0,"creation_date":1304157095,"post_id":703424,"comment_id":6707471,"body_markdown":"Down voted for the same reason as Steve Pomeroy. The DecimalFormat answer is the best way to do this and should really be the accepted answer here.","body":"Down voted for the same reason as Steve Pomeroy. The DecimalFormat answer is the best way to do this and should really be the accepted answer here."},{"owner":{"account_id":55899,"reputation":4236,"user_id":167485,"accept_rate":67,"display_name":"Rehno Lindeque"},"score":5,"creation_date":1317898196,"post_id":703424,"comment_id":9325784,"body_markdown":"To the above, maybe he wants to trim the zeros WITHOUT rounding? P.S. @Pyrolistical, surely you can just use number.replaceAll(&quot;.?0*$&quot;, &quot;&quot;); (after contains(&quot;.&quot;) of course)","body":"To the above, maybe he wants to trim the zeros WITHOUT rounding? P.S. @Pyrolistical, surely you can just use number.replaceAll(&quot;.?0*$&quot;, &quot;&quot;); (after contains(&quot;.&quot;) of course)"},{"owner":{"account_id":11354,"reputation":27694,"user_id":21838,"accept_rate":82,"display_name":"Pyrolistical"},"score":0,"creation_date":1319262572,"post_id":703424,"comment_id":9583991,"body_markdown":"Thanks, my regex was rather pathetic when I first posted that.  And Rehno nailed it on the head Tom&#39;s code rounds to 2 decimals places.","body":"Thanks, my regex was rather pathetic when I first posted that.  And Rehno nailed it on the head Tom&#39;s code rounds to 2 decimals places."},{"owner":{"account_id":53237,"reputation":4939,"user_id":159178,"accept_rate":73,"display_name":"Fletch"},"score":0,"creation_date":1326798722,"post_id":703424,"comment_id":11120356,"body_markdown":"This solution is not localisable, which is one example why it is the wrong way to do it. If one day your application runs under a European locale, which uses commas as the decimal separator, it won&#39;t work. Whereas DecimalFormat automatically works under any locale. You might not plan to ever run in Europe but there may be other gotchas you haven&#39;t considered - using the inbuilt methods gives you the best chance to avoid them.","body":"This solution is not localisable, which is one example why it is the wrong way to do it. If one day your application runs under a European locale, which uses commas as the decimal separator, it won&#39;t work. Whereas DecimalFormat automatically works under any locale. You might not plan to ever run in Europe but there may be other gotchas you haven&#39;t considered - using the inbuilt methods gives you the best chance to avoid them."},{"owner":{"account_id":11354,"reputation":27694,"user_id":21838,"accept_rate":82,"display_name":"Pyrolistical"},"score":1,"creation_date":1326869987,"post_id":703424,"comment_id":11139426,"body_markdown":"Ok, then how would you be able to achieve my objective with the DecimalFormat?","body":"Ok, then how would you be able to achieve my objective with the DecimalFormat?"},{"owner":{"account_id":11354,"reputation":27694,"user_id":21838,"accept_rate":82,"display_name":"Pyrolistical"},"score":1,"creation_date":1336414858,"post_id":703424,"comment_id":13553010,"body_markdown":"By the way if I had localisation concerns I can add more logic.  The most voted answer by @Tom does not fill the requirements.  Tom&#39;s code is arbitrarily round to 2 decimal places.","body":"By the way if I had localisation concerns I can add more logic.  The most voted answer by @Tom does not fill the requirements.  Tom&#39;s code is arbitrarily round to 2 decimal places."},{"owner":{"account_id":1660619,"reputation":905,"user_id":1528985,"display_name":"autra"},"score":1,"creation_date":1360938708,"post_id":703424,"comment_id":20892493,"body_markdown":"Upvoted for understanding the problem well. But the regex should be &quot;\\\\.?0*$&quot;. Otherwise, for 34.23298424000 it will give back 34.2329842 and not 34.23298424.","body":"Upvoted for understanding the problem well. But the regex should be &quot;\\\\.?0*$&quot;. Otherwise, for 34.23298424000 it will give back 34.2329842 and not 34.23298424."}],"tags":[],"owner":{"account_id":11354,"reputation":27694,"user_id":21838,"accept_rate":82,"display_name":"Pyrolistical"},"comment_count":11,"down_vote_count":16,"up_vote_count":33,"is_accepted":false,"score":17,"last_activity_date":1607423139,"creation_date":1238540635,"answer_id":703424,"question_id":703396,"body_markdown":"Naw, never mind. The performance loss due to string manipulation is zero.\r\n\r\nAnd here&#39;s the code to trim the end after `%f`:\r\n\r\n    private static String trimTrailingZeros(String number) {\r\n        if(!number.contains(&quot;.&quot;)) {\r\n            return number;\r\n        }\r\n\r\n        return number.replaceAll(&quot;\\\\.?0*$&quot;, &quot;&quot;);\r\n    }\r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>Naw, never mind. The performance loss due to string manipulation is zero.</p>\n<p>And here's the code to trim the end after <code>%f</code>:</p>\n<pre><code>private static String trimTrailingZeros(String number) {\n    if(!number.contains(&quot;.&quot;)) {\n        return number;\n    }\n\n    return number.replaceAll(&quot;\\\\.?0*$&quot;, &quot;&quot;);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":77295,"reputation":10156,"user_id":220726,"accept_rate":70,"display_name":"Emre Yazici"},"score":21,"creation_date":1265402720,"post_id":1276096,"comment_id":2161927,"body_markdown":"That&#39;s correct but always prints trailing zeros even if there is no fractional part. String.format(&quot;%.2f, 1.0005) prints 1.00 and not 1. Is there any format specifier for not to print fractional part if it does not exist?","body":"That&#39;s correct but always prints trailing zeros even if there is no fractional part. String.format(&quot;%.2f, 1.0005) prints 1.00 and not 1. Is there any format specifier for not to print fractional part if it does not exist?"},{"owner":{"account_id":180740,"reputation":2722,"user_id":414266,"accept_rate":100,"display_name":"Zulaxia"},"score":137,"creation_date":1304156920,"post_id":1276096,"comment_id":6707452,"body_markdown":"Down voted since the question is asking to strip all trailing zeros and this answer will always leave two floating points regardless of being zero.","body":"Down voted since the question is asking to strip all trailing zeros and this answer will always leave two floating points regardless of being zero."},{"owner":{"account_id":7436,"reputation":3729,"user_id":12919,"accept_rate":67,"display_name":"Timothy Lee Russell"},"score":0,"creation_date":1318046373,"post_id":1276096,"comment_id":9355609,"body_markdown":"The DecimalFormat was a nice trick -- although I ended up using this one for my situation (game level timer) as the trailing zeros looked better.","body":"The DecimalFormat was a nice trick -- although I ended up using this one for my situation (game level timer) as the trailing zeros looked better."},{"owner":{"account_id":62936,"reputation":57180,"user_id":186636,"accept_rate":87,"display_name":"Peter Ajtai"},"score":3,"creation_date":1325637372,"post_id":1276096,"comment_id":10856631,"body_markdown":"I think you can handle the trailing zeroes correctly by using g instead of f.","body":"I think you can handle the trailing zeroes correctly by using g instead of f."},{"owner":{"account_id":1473546,"reputation":1151,"user_id":1384513,"display_name":"hamish"},"score":4,"creation_date":1404818503,"post_id":1276096,"comment_id":38172831,"body_markdown":"I used this solution in a production system with &quot;%.5f&quot;, and it is really really bad, do not use it... because it printed this: 5.12E-4   instead of 0.000512","body":"I used this solution in a production system with &quot;%.5f&quot;, and it is really really bad, do not use it... because it printed this: 5.12E-4   instead of 0.000512"},{"owner":{"account_id":16070349,"reputation":567,"user_id":11598941,"display_name":"Yash Joshi"},"score":1,"creation_date":1622230466,"post_id":1276096,"comment_id":119742554,"body_markdown":"Although this is exactly opposite to what the OP is tryna ask but I&#39;m grateful this existed here, I was looking for just this!","body":"Although this is exactly opposite to what the OP is tryna ask but I&#39;m grateful this existed here, I was looking for just this!"},{"owner":{"account_id":6253582,"reputation":3528,"user_id":4862911,"accept_rate":76,"display_name":"aligur"},"score":4,"creation_date":1633122570,"post_id":1276096,"comment_id":122685585,"body_markdown":"i really dont understand why this answer is voted up ): its not related with question.","body":"i really dont understand why this answer is voted up ): its not related with question."}],"tags":[],"owner":{"account_id":37284,"reputation":4062,"user_id":106553,"accept_rate":17,"display_name":"Jeremy Slade"},"comment_count":7,"down_vote_count":158,"up_vote_count":394,"is_accepted":false,"score":236,"last_activity_date":1607423165,"creation_date":1250225565,"answer_id":1276096,"question_id":703396,"body_markdown":"    String.format(&quot;%.2f&quot;, value);\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<pre><code>String.format(&quot;%.2f&quot;, value);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":205984,"reputation":2548,"user_id":455020,"accept_rate":78,"display_name":"bakoyaro"},"score":1,"creation_date":1319646776,"post_id":7902679,"comment_id":9653452,"body_markdown":"This is a good solution to the question, if they were only interested in trailing zeroes being dropped, how would you change your code to also trim a trailing decimal point? i.e. &quot;1.&quot;","body":"This is a good solution to the question, if they were only interested in trailing zeroes being dropped, how would you change your code to also trim a trailing decimal point? i.e. &quot;1.&quot;"},{"owner":{"account_id":369687,"reputation":56616,"user_id":717214,"accept_rate":86,"display_name":"Aleks G"},"score":36,"creation_date":1336554972,"post_id":7902679,"comment_id":13593644,"body_markdown":"Be careful, your solution will convert 1000 into 1, which is wrong.","body":"Be careful, your solution will convert 1000 into 1, which is wrong."}],"tags":[],"owner":{"account_id":999347,"reputation":1,"user_id":1014558,"display_name":"Kadi"},"comment_count":2,"down_vote_count":13,"up_vote_count":2,"is_accepted":false,"score":-11,"last_activity_date":1319632765,"creation_date":1319632765,"answer_id":7902679,"question_id":703396,"body_markdown":"    String s = &quot;1.210000&quot;;\r\n    while (s.endsWith(&quot;0&quot;)){\r\n    \ts = (s.substring(0, s.length() - 1));\r\n    }\r\n\r\nThis will make the string to drop the tailing 0-s.","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<pre><code>String s = \"1.210000\";\nwhile (s.endsWith(\"0\")){\n    s = (s.substring(0, s.length() - 1));\n}\n</code></pre>\n\n<p>This will make the string to drop the tailing 0-s.</p>\n"},{"comments":[{"owner":{"account_id":369687,"reputation":56616,"user_id":717214,"accept_rate":86,"display_name":"Aleks G"},"score":3,"creation_date":1336555152,"post_id":10512935,"comment_id":13593725,"body_markdown":"DecimalFormat with format of &quot;#.##&quot; will not keep extra 0 if they are not needed: `System.out.println(new java.text.DecimalFormat(&quot;#.##&quot;).format(1.0005));` will print `1`","body":"DecimalFormat with format of &quot;#.##&quot; will not keep extra 0 if they are not needed: <code>System.out.println(new java.text.DecimalFormat(&quot;#.##&quot;).format(1.0005));</code> will print <code>1</code>"},{"owner":{"account_id":444584,"reputation":8231,"user_id":836487,"accept_rate":64,"display_name":"sethu"},"score":0,"creation_date":1336563209,"post_id":10512935,"comment_id":13596945,"body_markdown":"thats my point. What if you want the 0.0005 displayed if there is any. You will be rounding it 2 decimal digits.","body":"thats my point. What if you want the 0.0005 displayed if there is any. You will be rounding it 2 decimal digits."},{"owner":{"account_id":369687,"reputation":56616,"user_id":717214,"accept_rate":86,"display_name":"Aleks G"},"score":0,"creation_date":1336563306,"post_id":10512935,"comment_id":13596995,"body_markdown":"The OP is asking how to print integer values stored in doubles :)","body":"The OP is asking how to print integer values stored in doubles :)"}],"tags":[],"owner":{"account_id":444584,"reputation":8231,"user_id":836487,"accept_rate":64,"display_name":"sethu"},"comment_count":3,"down_vote_count":5,"up_vote_count":1,"is_accepted":false,"score":-4,"last_activity_date":1607423596,"creation_date":1336554255,"answer_id":10512935,"question_id":703396,"body_markdown":"The best way to do this is as below:\r\n\r\n    public class Test {\r\n\r\n        public static void main(String args[]){\r\n            System.out.println(String.format(&quot;%s something&quot;, new Double(3.456)));\r\n            System.out.println(String.format(&quot;%s something&quot;, new Double(3.456234523452)));\r\n            System.out.println(String.format(&quot;%s something&quot;, new Double(3.45)));\r\n            System.out.println(String.format(&quot;%s something&quot;, new Double(3)));\r\n        }\r\n    }\r\n\r\nOutput:\r\n\r\n```lang-none\r\n3.456 something\r\n3.456234523452 something\r\n3.45 something\r\n3.0 something\r\n```\r\n\r\nThe only issue is the last one where .0 doesn&#39;t get removed. But if you are able to live with that then this works best. %.2f will round it to the last two decimal digits. So will DecimalFormat. If you need all the decimal places, but not the trailing zeros then this works best.\r\n\r\n\r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>The best way to do this is as below:</p>\n<pre><code>public class Test {\n\n    public static void main(String args[]){\n        System.out.println(String.format(&quot;%s something&quot;, new Double(3.456)));\n        System.out.println(String.format(&quot;%s something&quot;, new Double(3.456234523452)));\n        System.out.println(String.format(&quot;%s something&quot;, new Double(3.45)));\n        System.out.println(String.format(&quot;%s something&quot;, new Double(3)));\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>3.456 something\n3.456234523452 something\n3.45 something\n3.0 something\n</code></pre>\n<p>The only issue is the last one where .0 doesn't get removed. But if you are able to live with that then this works best. %.2f will round it to the last two decimal digits. So will DecimalFormat. If you need all the decimal places, but not the trailing zeros then this works best.</p>\n"},{"comments":[{"owner":{"account_id":11354,"reputation":27694,"user_id":21838,"accept_rate":82,"display_name":"Pyrolistical"},"score":1,"creation_date":1355167683,"post_id":13573019,"comment_id":18995706,"body_markdown":"If you know the precision, then use a BigDecimal.  See http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html#setScale%28int,%20java.math.RoundingMode%29","body":"If you know the precision, then use a BigDecimal.  See <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html#setScale%28int,%20java.math.RoundingMode%29\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/1.5.0/docs/api/java/math/&hellip;</a>"}],"tags":[],"owner":{"account_id":140605,"reputation":2523,"user_id":347051,"accept_rate":36,"display_name":"Hiep"},"comment_count":1,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1607424065,"creation_date":1353963340,"answer_id":13573019,"question_id":703396,"body_markdown":"I made a `DoubleFormatter` to efficiently convert a great numbers of double values to a nice/presentable string:\r\n\r\n    double horribleNumber = 3598945.141658554548844;\r\n    DoubleFormatter df = new DoubleFormatter(4, 6); // 4 = MaxInteger, 6 = MaxDecimal\r\n    String beautyDisplay = df.format(horribleNumber);\r\n\r\n- If the integer part of V has more than MaxInteger =&gt; display V in scientific format (1.2345E+30). Otherwise, display in normal format (124.45678).\r\n- the MaxDecimal decide numbers of decimal digits (trim with [bankers&#39; rounding][1])\r\n\r\nHere the code:\r\n\r\n    import java.math.RoundingMode;\r\n    import java.text.DecimalFormat;\r\n    import java.text.DecimalFormatSymbols;\r\n    import java.text.NumberFormat;\r\n    import java.util.Locale;\r\n\r\n    import com.google.common.base.Preconditions;\r\n    import com.google.common.base.Strings;\r\n\r\n    /**\r\n     * Convert a double to a beautiful String (US-local):\r\n     *\r\n     * double horribleNumber = 3598945.141658554548844;\r\n     * DoubleFormatter df = new DoubleFormatter(4,6);\r\n     * String beautyDisplay = df.format(horribleNumber);\r\n     * String beautyLabel = df.formatHtml(horribleNumber);\r\n     *\r\n     * Manipulate 3 instances of NumberFormat to efficiently format a great number of double values.\r\n     * (avoid to create an object NumberFormat each call of format()).\r\n     *\r\n     * 3 instances of NumberFormat will be reused to format a value v:\r\n     *\r\n     * if v &lt; EXP_DOWN, uses nfBelow\r\n     * if EXP_DOWN &lt;= v &lt;= EXP_UP, uses nfNormal\r\n     * if EXP_UP &lt; v, uses nfAbove\r\n     *\r\n     * nfBelow, nfNormal and nfAbove will be generated base on the precision_ parameter.\r\n     *\r\n     * @author: DUONG Phu-Hiep\r\n     */\r\n    public class DoubleFormatter\r\n    {\r\n        private static final double EXP_DOWN = 1.e-3;\r\n        private double EXP_UP; // always = 10^maxInteger\r\n        private int maxInteger_;\r\n        private int maxFraction_;\r\n        private NumberFormat nfBelow_;\r\n        private NumberFormat nfNormal_;\r\n        private NumberFormat nfAbove_;\r\n\r\n        private enum NumberFormatKind {Below, Normal, Above}\r\n\r\n        public DoubleFormatter(int maxInteger, int maxFraction){\r\n            setPrecision(maxInteger, maxFraction);\r\n        }\r\n\r\n        public void setPrecision(int maxInteger, int maxFraction){\r\n            Preconditions.checkArgument(maxFraction&gt;=0);\r\n            Preconditions.checkArgument(maxInteger&gt;0 &amp;&amp; maxInteger&lt;17);\r\n\r\n            if (maxFraction == maxFraction_ &amp;&amp; maxInteger_ == maxInteger) {\r\n                return;\r\n            }\r\n\r\n            maxFraction_ = maxFraction;\r\n            maxInteger_ = maxInteger;\r\n            EXP_UP =  Math.pow(10, maxInteger);\r\n            nfBelow_ = createNumberFormat(NumberFormatKind.Below);\r\n            nfNormal_ = createNumberFormat(NumberFormatKind.Normal);\r\n            nfAbove_ = createNumberFormat(NumberFormatKind.Above);\r\n        }\r\n\r\n        private NumberFormat createNumberFormat(NumberFormatKind kind) {\r\n\r\n            // If you do not use the Guava library, replace it with createSharp(precision);\r\n            final String sharpByPrecision = Strings.repeat(&quot;#&quot;, maxFraction_);\r\n\r\n            NumberFormat f = NumberFormat.getInstance(Locale.US);\r\n\r\n            // Apply bankers&#39; rounding:  this is the rounding mode that\r\n            // statistically minimizes cumulative error when applied\r\n            // repeatedly over a sequence of calculations\r\n            f.setRoundingMode(RoundingMode.HALF_EVEN);\r\n\r\n            if (f instanceof DecimalFormat) {\r\n                DecimalFormat df = (DecimalFormat) f;\r\n                DecimalFormatSymbols dfs = df.getDecimalFormatSymbols();\r\n\r\n                // Set group separator to space instead of comma\r\n\r\n                //dfs.setGroupingSeparator(&#39; &#39;);\r\n\r\n                // Set Exponent symbol to minus &#39;e&#39; instead of &#39;E&#39;\r\n                if (kind == NumberFormatKind.Above) {\r\n                    dfs.setExponentSeparator(&quot;e+&quot;); //force to display the positive sign in the exponent part\r\n                } else {\r\n                    dfs.setExponentSeparator(&quot;e&quot;);\r\n                }\r\n\r\n                df.setDecimalFormatSymbols(dfs);\r\n\r\n                // Use exponent format if v is outside of [EXP_DOWN,EXP_UP]\r\n\r\n                if (kind == NumberFormatKind.Normal) {\r\n                    if (maxFraction_ == 0) {\r\n                        df.applyPattern(&quot;#,##0&quot;);\r\n                    } else {\r\n                        df.applyPattern(&quot;#,##0.&quot;+sharpByPrecision);\r\n                    }\r\n                } else {\r\n                    if (maxFraction_ == 0) {\r\n                        df.applyPattern(&quot;0E0&quot;);\r\n                    } else {\r\n                        df.applyPattern(&quot;0.&quot;+sharpByPrecision+&quot;E0&quot;);\r\n                    }\r\n                }\r\n            }\r\n            return f;\r\n        }\r\n\r\n        public String format(double v) {\r\n            if (Double.isNaN(v)) {\r\n                return &quot;-&quot;;\r\n            }\r\n            if (v==0) {\r\n                return &quot;0&quot;;\r\n            }\r\n            final double absv = Math.abs(v);\r\n\r\n            if (absv&lt;EXP_DOWN) {\r\n                return nfBelow_.format(v);\r\n            }\r\n\r\n            if (absv&gt;EXP_UP) {\r\n                return nfAbove_.format(v);\r\n            }\r\n\r\n            return nfNormal_.format(v);\r\n        }\r\n\r\n        /**\r\n         * Format and higlight the important part (integer part &amp; exponent part)\r\n         */\r\n        public String formatHtml(double v) {\r\n            if (Double.isNaN(v)) {\r\n                return &quot;-&quot;;\r\n            }\r\n            return htmlize(format(v));\r\n        }\r\n\r\n        /**\r\n         * This is the base alogrithm: create a instance of NumberFormat for the value, then format it. It should\r\n         * not be used to format a great numbers of value\r\n         *\r\n         * We will never use this methode, it is here only to understanding the Algo principal:\r\n         *\r\n         * format v to string. precision_ is numbers of digits after decimal.\r\n         * if EXP_DOWN &lt;= abs(v) &lt;= EXP_UP, display the normal format: 124.45678\r\n         * otherwise display scientist format with: 1.2345e+30\r\n         *\r\n         * pre-condition: precision &gt;= 1\r\n         */\r\n        @Deprecated\r\n        public String formatInefficient(double v) {\r\n\r\n            // If you do not use Guava library, replace with createSharp(precision);\r\n            final String sharpByPrecision = Strings.repeat(&quot;#&quot;, maxFraction_);\r\n\r\n            final double absv = Math.abs(v);\r\n\r\n            NumberFormat f = NumberFormat.getInstance(Locale.US);\r\n\r\n            // Apply bankers&#39; rounding:  this is the rounding mode that\r\n            // statistically minimizes cumulative error when applied\r\n            // repeatedly over a sequence of calculations\r\n            f.setRoundingMode(RoundingMode.HALF_EVEN);\r\n\r\n            if (f instanceof DecimalFormat) {\r\n                DecimalFormat df = (DecimalFormat) f;\r\n                DecimalFormatSymbols dfs = df.getDecimalFormatSymbols();\r\n\r\n                // Set group separator to space instead of comma\r\n\r\n                dfs.setGroupingSeparator(&#39; &#39;);\r\n\r\n                // Set Exponent symbol to minus &#39;e&#39; instead of &#39;E&#39;\r\n\r\n                if (absv&gt;EXP_UP) {\r\n                    dfs.setExponentSeparator(&quot;e+&quot;); //force to display the positive sign in the exponent part\r\n                } else {\r\n                    dfs.setExponentSeparator(&quot;e&quot;);\r\n                }\r\n                df.setDecimalFormatSymbols(dfs);\r\n\r\n                //use exponent format if v is out side of [EXP_DOWN,EXP_UP]\r\n\r\n                if (absv&lt;EXP_DOWN || absv&gt;EXP_UP) {\r\n                    df.applyPattern(&quot;0.&quot;+sharpByPrecision+&quot;E0&quot;);\r\n                } else {\r\n                    df.applyPattern(&quot;#,##0.&quot;+sharpByPrecision);\r\n                }\r\n            }\r\n            return f.format(v);\r\n        }\r\n\r\n        /**\r\n         * Convert &quot;3.1416e+12&quot; to &quot;&lt;b&gt;3&lt;/b&gt;.1416e&lt;b&gt;+12&lt;/b&gt;&quot;\r\n         * It is a html format of a number which highlight the integer and exponent part\r\n         */\r\n        private static String htmlize(String s) {\r\n            StringBuilder resu = new StringBuilder(&quot;&lt;b&gt;&quot;);\r\n            int p1 = s.indexOf(&#39;.&#39;);\r\n\r\n            if (p1&gt;0) {\r\n                resu.append(s.substring(0, p1));\r\n                resu.append(&quot;&lt;/b&gt;&quot;);\r\n            } else {\r\n                p1 = 0;\r\n            }\r\n\r\n            int p2 = s.lastIndexOf(&#39;e&#39;);\r\n            if (p2&gt;0) {\r\n                resu.append(s.substring(p1, p2));\r\n                resu.append(&quot;&lt;b&gt;&quot;);\r\n                resu.append(s.substring(p2, s.length()));\r\n                resu.append(&quot;&lt;/b&gt;&quot;);\r\n            } else {\r\n                resu.append(s.substring(p1, s.length()));\r\n                if (p1==0){\r\n                    resu.append(&quot;&lt;/b&gt;&quot;);\r\n                }\r\n            }\r\n            return resu.toString();\r\n        }\r\n    }\r\n\r\nNote: I used two functions from the [Guava][2] library. If you don&#39;t use Guava, code it yourself:\r\n\r\n    /**\r\n     * Equivalent to Strings.repeat(&quot;#&quot;, n) of the Guava library:\r\n     */\r\n    private static String createSharp(int n) {\r\n        StringBuilder sb = new StringBuilder();\r\n        for (int i=0; i&lt;n; i++) {\r\n            sb.append(&#39;#&#39;);\r\n        }\r\n        return sb.toString();\r\n    }\r\n\r\n  [1]: https://en.wiktionary.org/wiki/bankers%27_rounding\r\n  [2]: https://en.wikipedia.org/wiki/Google_Guava\r\n\r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>I made a <code>DoubleFormatter</code> to efficiently convert a great numbers of double values to a nice/presentable string:</p>\n<pre><code>double horribleNumber = 3598945.141658554548844;\nDoubleFormatter df = new DoubleFormatter(4, 6); // 4 = MaxInteger, 6 = MaxDecimal\nString beautyDisplay = df.format(horribleNumber);\n</code></pre>\n<ul>\n<li>If the integer part of V has more than MaxInteger =&gt; display V in scientific format (1.2345E+30). Otherwise, display in normal format (124.45678).</li>\n<li>the MaxDecimal decide numbers of decimal digits (trim with <a href=\"https://en.wiktionary.org/wiki/bankers%27_rounding\" rel=\"nofollow noreferrer\">bankers' rounding</a>)</li>\n</ul>\n<p>Here the code:</p>\n<pre><code>import java.math.RoundingMode;\nimport java.text.DecimalFormat;\nimport java.text.DecimalFormatSymbols;\nimport java.text.NumberFormat;\nimport java.util.Locale;\n\nimport com.google.common.base.Preconditions;\nimport com.google.common.base.Strings;\n\n/**\n * Convert a double to a beautiful String (US-local):\n *\n * double horribleNumber = 3598945.141658554548844;\n * DoubleFormatter df = new DoubleFormatter(4,6);\n * String beautyDisplay = df.format(horribleNumber);\n * String beautyLabel = df.formatHtml(horribleNumber);\n *\n * Manipulate 3 instances of NumberFormat to efficiently format a great number of double values.\n * (avoid to create an object NumberFormat each call of format()).\n *\n * 3 instances of NumberFormat will be reused to format a value v:\n *\n * if v &lt; EXP_DOWN, uses nfBelow\n * if EXP_DOWN &lt;= v &lt;= EXP_UP, uses nfNormal\n * if EXP_UP &lt; v, uses nfAbove\n *\n * nfBelow, nfNormal and nfAbove will be generated base on the precision_ parameter.\n *\n * @author: DUONG Phu-Hiep\n */\npublic class DoubleFormatter\n{\n    private static final double EXP_DOWN = 1.e-3;\n    private double EXP_UP; // always = 10^maxInteger\n    private int maxInteger_;\n    private int maxFraction_;\n    private NumberFormat nfBelow_;\n    private NumberFormat nfNormal_;\n    private NumberFormat nfAbove_;\n\n    private enum NumberFormatKind {Below, Normal, Above}\n\n    public DoubleFormatter(int maxInteger, int maxFraction){\n        setPrecision(maxInteger, maxFraction);\n    }\n\n    public void setPrecision(int maxInteger, int maxFraction){\n        Preconditions.checkArgument(maxFraction&gt;=0);\n        Preconditions.checkArgument(maxInteger&gt;0 &amp;&amp; maxInteger&lt;17);\n\n        if (maxFraction == maxFraction_ &amp;&amp; maxInteger_ == maxInteger) {\n            return;\n        }\n\n        maxFraction_ = maxFraction;\n        maxInteger_ = maxInteger;\n        EXP_UP =  Math.pow(10, maxInteger);\n        nfBelow_ = createNumberFormat(NumberFormatKind.Below);\n        nfNormal_ = createNumberFormat(NumberFormatKind.Normal);\n        nfAbove_ = createNumberFormat(NumberFormatKind.Above);\n    }\n\n    private NumberFormat createNumberFormat(NumberFormatKind kind) {\n\n        // If you do not use the Guava library, replace it with createSharp(precision);\n        final String sharpByPrecision = Strings.repeat(&quot;#&quot;, maxFraction_);\n\n        NumberFormat f = NumberFormat.getInstance(Locale.US);\n\n        // Apply bankers' rounding:  this is the rounding mode that\n        // statistically minimizes cumulative error when applied\n        // repeatedly over a sequence of calculations\n        f.setRoundingMode(RoundingMode.HALF_EVEN);\n\n        if (f instanceof DecimalFormat) {\n            DecimalFormat df = (DecimalFormat) f;\n            DecimalFormatSymbols dfs = df.getDecimalFormatSymbols();\n\n            // Set group separator to space instead of comma\n\n            //dfs.setGroupingSeparator(' ');\n\n            // Set Exponent symbol to minus 'e' instead of 'E'\n            if (kind == NumberFormatKind.Above) {\n                dfs.setExponentSeparator(&quot;e+&quot;); //force to display the positive sign in the exponent part\n            } else {\n                dfs.setExponentSeparator(&quot;e&quot;);\n            }\n\n            df.setDecimalFormatSymbols(dfs);\n\n            // Use exponent format if v is outside of [EXP_DOWN,EXP_UP]\n\n            if (kind == NumberFormatKind.Normal) {\n                if (maxFraction_ == 0) {\n                    df.applyPattern(&quot;#,##0&quot;);\n                } else {\n                    df.applyPattern(&quot;#,##0.&quot;+sharpByPrecision);\n                }\n            } else {\n                if (maxFraction_ == 0) {\n                    df.applyPattern(&quot;0E0&quot;);\n                } else {\n                    df.applyPattern(&quot;0.&quot;+sharpByPrecision+&quot;E0&quot;);\n                }\n            }\n        }\n        return f;\n    }\n\n    public String format(double v) {\n        if (Double.isNaN(v)) {\n            return &quot;-&quot;;\n        }\n        if (v==0) {\n            return &quot;0&quot;;\n        }\n        final double absv = Math.abs(v);\n\n        if (absv&lt;EXP_DOWN) {\n            return nfBelow_.format(v);\n        }\n\n        if (absv&gt;EXP_UP) {\n            return nfAbove_.format(v);\n        }\n\n        return nfNormal_.format(v);\n    }\n\n    /**\n     * Format and higlight the important part (integer part &amp; exponent part)\n     */\n    public String formatHtml(double v) {\n        if (Double.isNaN(v)) {\n            return &quot;-&quot;;\n        }\n        return htmlize(format(v));\n    }\n\n    /**\n     * This is the base alogrithm: create a instance of NumberFormat for the value, then format it. It should\n     * not be used to format a great numbers of value\n     *\n     * We will never use this methode, it is here only to understanding the Algo principal:\n     *\n     * format v to string. precision_ is numbers of digits after decimal.\n     * if EXP_DOWN &lt;= abs(v) &lt;= EXP_UP, display the normal format: 124.45678\n     * otherwise display scientist format with: 1.2345e+30\n     *\n     * pre-condition: precision &gt;= 1\n     */\n    @Deprecated\n    public String formatInefficient(double v) {\n\n        // If you do not use Guava library, replace with createSharp(precision);\n        final String sharpByPrecision = Strings.repeat(&quot;#&quot;, maxFraction_);\n\n        final double absv = Math.abs(v);\n\n        NumberFormat f = NumberFormat.getInstance(Locale.US);\n\n        // Apply bankers' rounding:  this is the rounding mode that\n        // statistically minimizes cumulative error when applied\n        // repeatedly over a sequence of calculations\n        f.setRoundingMode(RoundingMode.HALF_EVEN);\n\n        if (f instanceof DecimalFormat) {\n            DecimalFormat df = (DecimalFormat) f;\n            DecimalFormatSymbols dfs = df.getDecimalFormatSymbols();\n\n            // Set group separator to space instead of comma\n\n            dfs.setGroupingSeparator(' ');\n\n            // Set Exponent symbol to minus 'e' instead of 'E'\n\n            if (absv&gt;EXP_UP) {\n                dfs.setExponentSeparator(&quot;e+&quot;); //force to display the positive sign in the exponent part\n            } else {\n                dfs.setExponentSeparator(&quot;e&quot;);\n            }\n            df.setDecimalFormatSymbols(dfs);\n\n            //use exponent format if v is out side of [EXP_DOWN,EXP_UP]\n\n            if (absv&lt;EXP_DOWN || absv&gt;EXP_UP) {\n                df.applyPattern(&quot;0.&quot;+sharpByPrecision+&quot;E0&quot;);\n            } else {\n                df.applyPattern(&quot;#,##0.&quot;+sharpByPrecision);\n            }\n        }\n        return f.format(v);\n    }\n\n    /**\n     * Convert &quot;3.1416e+12&quot; to &quot;&lt;b&gt;3&lt;/b&gt;.1416e&lt;b&gt;+12&lt;/b&gt;&quot;\n     * It is a html format of a number which highlight the integer and exponent part\n     */\n    private static String htmlize(String s) {\n        StringBuilder resu = new StringBuilder(&quot;&lt;b&gt;&quot;);\n        int p1 = s.indexOf('.');\n\n        if (p1&gt;0) {\n            resu.append(s.substring(0, p1));\n            resu.append(&quot;&lt;/b&gt;&quot;);\n        } else {\n            p1 = 0;\n        }\n\n        int p2 = s.lastIndexOf('e');\n        if (p2&gt;0) {\n            resu.append(s.substring(p1, p2));\n            resu.append(&quot;&lt;b&gt;&quot;);\n            resu.append(s.substring(p2, s.length()));\n            resu.append(&quot;&lt;/b&gt;&quot;);\n        } else {\n            resu.append(s.substring(p1, s.length()));\n            if (p1==0){\n                resu.append(&quot;&lt;/b&gt;&quot;);\n            }\n        }\n        return resu.toString();\n    }\n}\n</code></pre>\n<p>Note: I used two functions from the <a href=\"https://en.wikipedia.org/wiki/Google_Guava\" rel=\"nofollow noreferrer\">Guava</a> library. If you don't use Guava, code it yourself:</p>\n<pre><code>/**\n * Equivalent to Strings.repeat(&quot;#&quot;, n) of the Guava library:\n */\nprivate static String createSharp(int n) {\n    StringBuilder sb = new StringBuilder();\n    for (int i=0; i&lt;n; i++) {\n        sb.append('#');\n    }\n    return sb.toString();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":642603,"reputation":4458,"user_id":424381,"accept_rate":90,"display_name":"jlh"},"score":13,"creation_date":1391431710,"post_id":14126736,"comment_id":32505209,"body_markdown":"Agreed, this is a bad answer, do not use it.  It fails to work with a `double` larger than the maximum `int` value.  Even with `long` it would still fail for huge numbers.  Further it will return a String in exponential form, e.g. &quot;1.0E10&quot;, for large values, which is probably not what the asker wants.  Use `%f` instead of `%s` in the second format string to fix that.","body":"Agreed, this is a bad answer, do not use it.  It fails to work with a <code>double</code> larger than the maximum <code>int</code> value.  Even with <code>long</code> it would still fail for huge numbers.  Further it will return a String in exponential form, e.g. &quot;1.0E10&quot;, for large values, which is probably not what the asker wants.  Use <code>%f</code> instead of <code>%s</code> in the second format string to fix that."},{"owner":{"account_id":508569,"reputation":16492,"user_id":1288598,"display_name":"JasonD"},"score":32,"creation_date":1391437566,"post_id":14126736,"comment_id":32508798,"body_markdown":"The OP stated explicitly that they did not *want* the output formatted using `%f`. The answer is specific to the situation described, and the desired output. The OP suggested their maximum value was a 32-bit unsigned int, which I took to mean that `int` was acceptable (unsigned not actually existing in Java, and no exemplar was problematic), but changing `int` to `long` is a trivial fix if the situation is different.","body":"The OP stated explicitly that they did not <i>want</i> the output formatted using <code>%f</code>. The answer is specific to the situation described, and the desired output. The OP suggested their maximum value was a 32-bit unsigned int, which I took to mean that <code>int</code> was acceptable (unsigned not actually existing in Java, and no exemplar was problematic), but changing <code>int</code> to <code>long</code> is a trivial fix if the situation is different."},{"owner":{"account_id":508569,"reputation":16492,"user_id":1288598,"display_name":"JasonD"},"score":1,"creation_date":1392744496,"post_id":14126736,"comment_id":33095028,"body_markdown":"Where in the question does it say it shouldn&#39;t do that?","body":"Where in the question does it say it shouldn&#39;t do that?"},{"owner":{"account_id":68306,"reputation":19143,"user_id":199364,"accept_rate":83,"display_name":"ToolmakerSteve"},"score":0,"creation_date":1415325259,"post_id":14126736,"comment_id":42160824,"body_markdown":"FYI, I changed &quot;int&quot; to &quot;long&quot;, to cover a larger range of values, as suggested in the comments above.","body":"FYI, I changed &quot;int&quot; to &quot;long&quot;, to cover a larger range of values, as suggested in the comments above."},{"owner":{"account_id":558770,"reputation":16438,"user_id":755804,"accept_rate":20,"display_name":"18446744073709551615"},"score":0,"creation_date":1426241236,"post_id":14126736,"comment_id":46300213,"body_markdown":"Depending on the current locale, you may get the number formatted with spaces and commas inside.","body":"Depending on the current locale, you may get the number formatted with spaces and commas inside."},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":11,"creation_date":1444863628,"post_id":14126736,"comment_id":54085694,"body_markdown":"`String.format(&quot;%s&quot;,d)`??? Talk about unnecessary overhead. Use `Double.toString(d)`. Same for the other: `Long.toString((long)d)`.","body":"<code>String.format(&quot;%s&quot;,d)</code>??? Talk about unnecessary overhead. Use <code>Double.toString(d)</code>. Same for the other: <code>Long.toString((long)d)</code>."},{"owner":{"account_id":273373,"reputation":1446,"user_id":564932,"display_name":"northernman"},"score":0,"creation_date":1451273240,"post_id":14126736,"comment_id":56716568,"body_markdown":"Good solution if you know that the &quot;d&quot; value is always in a valid range. Agree with Andreas about not using String.format() though.","body":"Good solution if you know that the &quot;d&quot; value is always in a valid range. Agree with Andreas about not using String.format() though."},{"owner":{"account_id":3074867,"reputation":5008,"user_id":2796524,"accept_rate":89,"display_name":"Felix Edelmann"},"score":22,"creation_date":1461087767,"post_id":14126736,"comment_id":61035360,"body_markdown":"The problem is that `%s` doesn&#39;t work with Locales. In German, we use a &quot;,&quot; instead of a &quot;.&quot; in decimal numbers. While `String.format(Locale.GERMAN, &quot;%f&quot;, 1.5)` returns &quot;1,500000&quot;, `String.format(Locale.GERMAN, &quot;%s&quot;, 1.5)` returns &quot;1.5&quot; – with a &quot;.&quot;, which is false in German language. Is there a locale-dependent version of &quot;%s&quot; as well?","body":"The problem is that <code>%s</code> doesn&#39;t work with Locales. In German, we use a &quot;,&quot; instead of a &quot;.&quot; in decimal numbers. While <code>String.format(Locale.GERMAN, &quot;%f&quot;, 1.5)</code> returns &quot;1,500000&quot;, <code>String.format(Locale.GERMAN, &quot;%s&quot;, 1.5)</code> returns &quot;1.5&quot; – with a &quot;.&quot;, which is false in German language. Is there a locale-dependent version of &quot;%s&quot; as well?"},{"owner":{"account_id":450787,"reputation":1364,"user_id":846300,"accept_rate":50,"display_name":"Lukas Hanacek"},"score":1,"creation_date":1517997290,"post_id":14126736,"comment_id":84318813,"body_markdown":"String value = (f == (long) f) ? String.valueOf((long) f) : String.valueOf(f);","body":"String value = (f == (long) f) ? String.valueOf((long) f) : String.valueOf(f);"},{"owner":{"account_id":5019662,"reputation":168,"user_id":4084252,"accept_rate":0,"display_name":"simonzhu"},"score":0,"creation_date":1523826345,"post_id":14126736,"comment_id":86708467,"body_markdown":"Came across this problem as I was working on a contest problem: I came across this solution as well, but it didn&#39;t seem to solve the problem for me as for some test cases, it would format the solution into scientific notation, which is not ideal.","body":"Came across this problem as I was working on a contest problem: I came across this solution as well, but it didn&#39;t seem to solve the problem for me as for some test cases, it would format the solution into scientific notation, which is not ideal."}],"tags":[],"owner":{"account_id":508569,"reputation":16492,"user_id":1288598,"display_name":"JasonD"},"comment_count":10,"down_vote_count":19,"up_vote_count":472,"is_accepted":true,"score":453,"last_activity_date":1410724782,"creation_date":1357149121,"answer_id":14126736,"question_id":703396,"body_markdown":"If the idea is to print integers stored as doubles as if they are integers, and otherwise print the doubles with the minimum necessary precision:\r\n\r\n    public static String fmt(double d)\r\n    {\r\n        if(d == (long) d)\r\n            return String.format(&quot;%d&quot;,(long)d);\r\n        else\r\n            return String.format(&quot;%s&quot;,d);\r\n    }\r\n    \r\nProduces:\r\n\r\n    232\r\n    0.18\r\n    1237875192\r\n    4.58\r\n    0\r\n    1.2345\r\n\r\nAnd does not rely on string manipulation.\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>If the idea is to print integers stored as doubles as if they are integers, and otherwise print the doubles with the minimum necessary precision:</p>\n\n<pre><code>public static String fmt(double d)\n{\n    if(d == (long) d)\n        return String.format(\"%d\",(long)d);\n    else\n        return String.format(\"%s\",d);\n}\n</code></pre>\n\n<p>Produces:</p>\n\n<pre><code>232\n0.18\n1237875192\n4.58\n0\n1.2345\n</code></pre>\n\n<p>And does not rely on string manipulation.</p>\n"},{"comments":[{"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"score":0,"creation_date":1368915935,"post_id":14272941,"comment_id":23912705,"body_markdown":"you should instead just search for the first non-zero-digit from the right and then use the subString ( and also verify that the string contains &quot;.&quot; of course). this way, you won&#39;t come into creating so many temporary strings on the way.","body":"you should instead just search for the first non-zero-digit from the right and then use the subString ( and also verify that the string contains &quot;.&quot; of course). this way, you won&#39;t come into creating so many temporary strings on the way."}],"tags":[],"owner":{"account_id":2217579,"reputation":291,"user_id":1957826,"accept_rate":80,"display_name":"kamal"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1369253382,"creation_date":1357885994,"answer_id":14272941,"question_id":703396,"body_markdown":"    String s = String.valueof(&quot;your int variable&quot;);\r\n    while (g.endsWith(&quot;0&quot;) &amp;&amp; g.contains(&quot;.&quot;)) {\r\n        g = g.substring(0, g.length() - 1);\r\n        if (g.endsWith(&quot;.&quot;))\r\n        {\r\n            g = g.substring(0, g.length() - 1);\r\n        }\r\n    }","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<pre><code>String s = String.valueof(\"your int variable\");\nwhile (g.endsWith(\"0\") &amp;&amp; g.contains(\".\")) {\n    g = g.substring(0, g.length() - 1);\n    if (g.endsWith(\".\"))\n    {\n        g = g.substring(0, g.length() - 1);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11354,"reputation":27694,"user_id":21838,"accept_rate":82,"display_name":"Pyrolistical"},"score":0,"creation_date":1369162306,"post_id":16629838,"comment_id":23997880,"body_markdown":"formatFloatToString can be vastly simplified with http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#indexOf(java.lang.String) and http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#indexOf(java.lang.String, int)","body":"formatFloatToString can be vastly simplified with <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#indexOf(java.lang.String)\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/6/docs/api/java/lang/&hellip;</a> and <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#indexOf(java.lang.String\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/6/docs/api/java/lang/&hellip;</a>, int)"},{"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"score":1,"creation_date":1369174613,"post_id":16629838,"comment_id":24003496,"body_markdown":"sometimes, when you make things more simple, the code behind is more complex and less optimized... but yes, you can use plenty of built in API functions...","body":"sometimes, when you make things more simple, the code behind is more complex and less optimized... but yes, you can use plenty of built in API functions..."},{"owner":{"account_id":11354,"reputation":27694,"user_id":21838,"accept_rate":82,"display_name":"Pyrolistical"},"score":1,"creation_date":1369177378,"post_id":16629838,"comment_id":24004325,"body_markdown":"You should start with simple and once you have determined you have a performance problem, then and only then should you optimize.  Code is for the human to read again and again.  Making it run fast is secondary.  By not using the standard API whenever possible you are more likely to introduce bugs and only makes it more difficult to change in the future.","body":"You should start with simple and once you have determined you have a performance problem, then and only then should you optimize.  Code is for the human to read again and again.  Making it run fast is secondary.  By not using the standard API whenever possible you are more likely to introduce bugs and only makes it more difficult to change in the future."},{"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"score":0,"creation_date":1369199929,"post_id":16629838,"comment_id":24009477,"body_markdown":"I disagree. Base code should run as fast as possible, as many others might use it. Performance is a huge concern and this is something people are taught about a lot at the university. You can&#39;t predict how much you function will be used. Only the most higher functions can be exactly as you say. As an example, think what would a delay of 1 second be for each time you use internet connection. would you agree to those who made the class if they told you that their code is slow because it&#39;s a simple code?","body":"I disagree. Base code should run as fast as possible, as many others might use it. Performance is a huge concern and this is something people are taught about a lot at the university. You can&#39;t predict how much you function will be used. Only the most higher functions can be exactly as you say. As an example, think what would a delay of 1 second be for each time you use internet connection. would you agree to those who made the class if they told you that their code is slow because it&#39;s a simple code?"},{"owner":{"account_id":11354,"reputation":27694,"user_id":21838,"accept_rate":82,"display_name":"Pyrolistical"},"score":3,"creation_date":1369244514,"post_id":16629838,"comment_id":24034192,"body_markdown":"I would argue code you write like that is NOT going to be any faster.  The JVM is very smart and you don&#39;t actually know how fast or slow something is until you profile it.  Performance problems can be detected and fixed when it becomes a problem.  You should not prematurely optimize for it.  Write code for people to read, not for how you imagine the machine is going to run it.  Once it becomes a performance problem, rewrite code with a profiler.","body":"I would argue code you write like that is NOT going to be any faster.  The JVM is very smart and you don&#39;t actually know how fast or slow something is until you profile it.  Performance problems can be detected and fixed when it becomes a problem.  You should not prematurely optimize for it.  Write code for people to read, not for how you imagine the machine is going to run it.  Once it becomes a performance problem, rewrite code with a profiler."},{"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"score":0,"creation_date":1369252543,"post_id":16629838,"comment_id":24038397,"body_markdown":"just tried to make a point. if you wish using a short code, you can look at the first example, which works fine, and might even work better.","body":"just tried to make a point. if you wish using a short code, you can look at the first example, which works fine, and might even work better."},{"owner":{"account_id":177718,"reputation":20062,"user_id":409228,"display_name":"Steve Vinoski"},"score":2,"creation_date":1440170647,"post_id":16629838,"comment_id":52177497,"body_markdown":"Somebody else edited the answer to improve the code formatting. I was reviewing several dozen edits for approval and was going to approve their edit here, but the edits were inconsistent so I fixed them. I also improved the grammar of the text snippets.","body":"Somebody else edited the answer to improve the code formatting. I was reviewing several dozen edits for approval and was going to approve their edit here, but the edits were inconsistent so I fixed them. I also improved the grammar of the text snippets."},{"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"score":0,"creation_date":1440173056,"post_id":16629838,"comment_id":52178957,"body_markdown":"@SteveVinoski Grammar of English - ok (English isn&#39;t my main langauge, and when I don&#39;t have enough time, I can&#39;t review what I write), but the code formatting doesn&#39;t need to get improved. It&#39;s a matter of taste, and what I use is always one of the standard code formatting. When the &quot;{&quot; align with the rest of the code block, it&#39;s called &quot;Whitesmiths &quot; : https://en.wikipedia.org/wiki/Indent_style#Whitesmiths_style . Any developer should be able to read this code formatting, just like any other code formatting. Besides, you can always copy and format via the IDE.","body":"@SteveVinoski Grammar of English - ok (English isn&#39;t my main langauge, and when I don&#39;t have enough time, I can&#39;t review what I write), but the code formatting doesn&#39;t need to get improved. It&#39;s a matter of taste, and what I use is always one of the standard code formatting. When the &quot;{&quot; align with the rest of the code block, it&#39;s called &quot;Whitesmiths &quot; : <a href=\"https://en.wikipedia.org/wiki/Indent_style#Whitesmiths_style\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Indent_style#Whitesmiths_style</a> . Any developer should be able to read this code formatting, just like any other code formatting. Besides, you can always copy and format via the IDE."},{"owner":{"account_id":894800,"reputation":1400,"user_id":932324,"accept_rate":94,"display_name":"OrhanC1"},"score":1,"creation_date":1467046470,"post_id":16629838,"comment_id":63557443,"body_markdown":"I don&#39;t understand. If you said the formatting didn&#39;t matter, why did you spend the time to change it back?","body":"I don&#39;t understand. If you said the formatting didn&#39;t matter, why did you spend the time to change it back?"},{"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"score":0,"creation_date":1467127190,"post_id":16629838,"comment_id":63596838,"body_markdown":"@OrhanC1 If it&#39;s not wrong in any way, it can stay with what I wrote.","body":"@OrhanC1 If it&#39;s not wrong in any way, it can stay with what I wrote."},{"owner":{"account_id":894800,"reputation":1400,"user_id":932324,"accept_rate":94,"display_name":"OrhanC1"},"score":1,"creation_date":1467128358,"post_id":16629838,"comment_id":63597681,"body_markdown":"I agree. But because you changed it back, it sounds like it matters. You actively put the effort in. That&#39;s all.","body":"I agree. But because you changed it back, it sounds like it matters. You actively put the effort in. That&#39;s all."}],"tags":[],"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"comment_count":11,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1607424233,"creation_date":1368918218,"answer_id":16629838,"question_id":703396,"body_markdown":"Here are two ways to achieve it. First, the shorter (and probably better) way:\r\n\r\n    public static String formatFloatToString(final float f)\r\n    {\r\n      final int i = (int)f;\r\n      if(f == i)\r\n        return Integer.toString(i);\r\n      return Float.toString(f);\r\n    }\r\n\r\nAnd here&#39;s the longer and probably worse way:\r\n\r\n    public static String formatFloatToString(final float f)\r\n    {\r\n      final String s = Float.toString(f);\r\n      int dotPos = -1;\r\n      for(int i=0; i&lt;s.length(); ++i)\r\n        if(s.charAt(i) == &#39;.&#39;)\r\n        {\r\n          dotPos = i;\r\n          break;\r\n        }\r\n\r\n      if(dotPos == -1)\r\n        return s;\r\n\r\n      int end = dotPos;\r\n      for(int i = dotPos + 1; i&lt;s.length(); ++i)\r\n      {\r\n        final char c = s.charAt(i);\r\n        if(c != &#39;0&#39;)\r\n          end = i + 1;\r\n      }\r\n      final String result = s.substring(0, end);\r\n      return result;\r\n    }\r\n\r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>Here are two ways to achieve it. First, the shorter (and probably better) way:</p>\n<pre><code>public static String formatFloatToString(final float f)\n{\n  final int i = (int)f;\n  if(f == i)\n    return Integer.toString(i);\n  return Float.toString(f);\n}\n</code></pre>\n<p>And here's the longer and probably worse way:</p>\n<pre><code>public static String formatFloatToString(final float f)\n{\n  final String s = Float.toString(f);\n  int dotPos = -1;\n  for(int i=0; i&lt;s.length(); ++i)\n    if(s.charAt(i) == '.')\n    {\n      dotPos = i;\n      break;\n    }\n\n  if(dotPos == -1)\n    return s;\n\n  int end = dotPos;\n  for(int i = dotPos + 1; i&lt;s.length(); ++i)\n  {\n    final char c = s.charAt(i);\n    if(c != '0')\n      end = i + 1;\n  }\n  final String result = s.substring(0, end);\n  return result;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1356368,"reputation":3757,"user_id":1294681,"accept_rate":43,"display_name":"VinceStyling"},"score":1,"creation_date":1384484729,"post_id":16721517,"comment_id":29766110,"body_markdown":"you did not replace the POINT, for example, &quot;100.0&quot; will be convert to &quot;100.&quot;","body":"you did not replace the POINT, for example, &quot;100.0&quot; will be convert to &quot;100.&quot;"},{"owner":{"account_id":407719,"reputation":3158,"user_id":777961,"accept_rate":51,"display_name":"Martin Klosi"},"score":0,"creation_date":1386038293,"post_id":16721517,"comment_id":30363121,"body_markdown":"if(f == (int)f) takes care of that.","body":"if(f == (int)f) takes care of that."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":2,"creation_date":1388877056,"post_id":16721517,"comment_id":31423590,"body_markdown":"Fails on f = 9999999999.00","body":"Fails on f = 9999999999.00"}],"tags":[],"owner":{"account_id":407719,"reputation":3158,"user_id":777961,"accept_rate":51,"display_name":"Martin Klosi"},"comment_count":3,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1369334492,"creation_date":1369334492,"answer_id":16721517,"question_id":703396,"body_markdown":"Here is an answer that actually works (combination of different answers here)\r\n\r\n\tpublic static String removeTrailingZeros(double f)\r\n\t{\r\n\t    if(f == (int)f) {\r\n\t        return String.format(&quot;%d&quot;, (int)f);\r\n\t    }\r\n\t    return String.format(&quot;%f&quot;, f).replaceAll(&quot;0*$&quot;, &quot;&quot;);\r\n\t}","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>Here is an answer that actually works (combination of different answers here)</p>\n\n<pre><code>public static String removeTrailingZeros(double f)\n{\n    if(f == (int)f) {\n        return String.format(\"%d\", (int)f);\n    }\n    return String.format(\"%f\", f).replaceAll(\"0*$\", \"\");\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":92486,"reputation":45195,"user_id":253468,"accept_rate":79,"display_name":"TWiStErRob"},"score":2,"creation_date":1469354419,"post_id":21665735,"comment_id":64492506,"body_markdown":"Hmm, this doesn&#39;t take locales into account, but neither does JasonD&#39;s.","body":"Hmm, this doesn&#39;t take locales into account, but neither does JasonD&#39;s."}],"tags":[],"owner":{"account_id":387941,"reputation":6875,"user_id":974531,"accept_rate":88,"display_name":"Rok Strniša"},"comment_count":1,"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1391983866,"creation_date":1391983866,"answer_id":21665735,"question_id":703396,"body_markdown":"On my machine, the following function is roughly 7 times faster than the function provided by [JasonD&#39;s answer](https://stackoverflow.com/a/14126736/974531), since it avoids `String.format`:\r\n\r\n    public static String prettyPrint(double d) {\r\n      int i = (int) d;\r\n      return d == i ? String.valueOf(i) : String.valueOf(d);\r\n    }","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>On my machine, the following function is roughly 7 times faster than the function provided by <a href=\"https://stackoverflow.com/a/14126736/974531\">JasonD's answer</a>, since it avoids <code>String.format</code>:</p>\n\n<pre><code>public static String prettyPrint(double d) {\n  int i = (int) d;\n  return d == i ? String.valueOf(i) : String.valueOf(d);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3533121,"reputation":1545,"user_id":2952093,"accept_rate":88,"display_name":"kap"},"score":0,"creation_date":1422981948,"post_id":25308216,"comment_id":44959645,"body_markdown":"This does not work for integers, e.g. &quot;2&quot; becomes &quot;2.&quot;","body":"This does not work for integers, e.g. &quot;2&quot; becomes &quot;2.&quot;"},{"owner":{"account_id":1606038,"reputation":12017,"user_id":1486125,"accept_rate":54,"display_name":"JBE"},"score":0,"creation_date":1423522173,"post_id":25308216,"comment_id":45175014,"body_markdown":"Thanks, I&#39;ve fixed the answer by using the pattern `0` instead of `#.`","body":"Thanks, I&#39;ve fixed the answer by using the pattern <code>0</code> instead of <code>#.</code>"},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1445611667,"post_id":25308216,"comment_id":54409242,"body_markdown":"You are not using the constant `DecimalFormat.DOUBLE_FRACTION_DIGITS` but you are using the value 340, which you then provide a comment for to show that it equals `DecimalFormat.DOUBLE_FRACTION_DIGITS`. Why not just use the constant???","body":"You are not using the constant <code>DecimalFormat.DOUBLE_FRACTION_DIGITS</code> but you are using the value 340, which you then provide a comment for to show that it equals <code>DecimalFormat.DOUBLE_FRACTION_DIGITS</code>. Why not just use the constant???"},{"owner":{"account_id":1606038,"reputation":12017,"user_id":1486125,"accept_rate":54,"display_name":"JBE"},"score":3,"creation_date":1445621224,"post_id":25308216,"comment_id":54415149,"body_markdown":"Because this attribute is not public ... it is &quot;package friendly&quot;","body":"Because this attribute is not public ... it is &quot;package friendly&quot;"},{"owner":{"account_id":3074867,"reputation":5008,"user_id":2796524,"accept_rate":89,"display_name":"Felix Edelmann"},"score":5,"creation_date":1461167861,"post_id":25308216,"comment_id":61079170,"body_markdown":"Thanks! In fact, this answer is the only one that really matches all requirements mentioned in the question – it doesn&#39;t show unnecessary zeros, doesn&#39;t round the numbers and is locale-dependant. Great!","body":"Thanks! In fact, this answer is the only one that really matches all requirements mentioned in the question – it doesn&#39;t show unnecessary zeros, doesn&#39;t round the numbers and is locale-dependant. Great!"},{"owner":{"account_id":2668183,"reputation":237,"user_id":2306084,"accept_rate":100,"display_name":"NurShomik"},"score":0,"creation_date":1485203480,"post_id":25308216,"comment_id":70818314,"body_markdown":"Thanks! My requirement was to remove the trailing zeroes without loosing precision. This is so far the best answer I&#39;ve found online. Initializing `df` just once in the class did the trick for all `double` number prints.","body":"Thanks! My requirement was to remove the trailing zeroes without loosing precision. This is so far the best answer I&#39;ve found online. Initializing <code>df</code> just once in the class did the trick for all <code>double</code> number prints."},{"owner":{"account_id":16011378,"reputation":381,"user_id":11555427,"display_name":"Demon App Programmer"},"score":0,"creation_date":1564425961,"post_id":25308216,"comment_id":101018724,"body_markdown":"Thanks, worked for me. This answer would have been accepted if it was me who posted the question. Great explaination","body":"Thanks, worked for me. This answer would have been accepted if it was me who posted the question. Great explaination"}],"tags":[],"owner":{"account_id":1606038,"reputation":12017,"user_id":1486125,"accept_rate":54,"display_name":"JBE"},"comment_count":7,"down_vote_count":0,"up_vote_count":139,"is_accepted":false,"score":139,"last_activity_date":1607424406,"creation_date":1408019714,"answer_id":25308216,"question_id":703396,"body_markdown":"**In short:**\r\n\r\nIf you want to get rid of trailing zeros and [locale][1] problems, then you should use:\r\n\r\n    double myValue = 0.00000021d;\r\n\r\n    DecimalFormat df = new DecimalFormat(&quot;0&quot;, DecimalFormatSymbols.getInstance(Locale.ENGLISH));\r\n    df.setMaximumFractionDigits(340); //340 = DecimalFormat.DOUBLE_FRACTION_DIGITS\r\n\r\n    System.out.println(df.format(myValue)); //output: 0.00000021\r\n\r\n\r\n**Explanation:**\r\n\r\nWhy other answers did not suit me:\r\n\r\n - `Double.toString()` or `System.out.println` or `FloatingDecimal.toJavaFormatString` uses scientific notations if double is less than 10^-3 or greater than or equal to 10^7\r\n\r\n        double myValue = 0.00000021d;\r\n        String.format(&quot;%s&quot;, myvalue); //output: 2.1E-7\r\n\r\n - by using `%f`, the default decimal precision is 6, otherwise you can hardcode it, but it results in extra zeros added if you have fewer decimals. Example:\r\n\r\n        double myValue = 0.00000021d;\r\n        String.format(&quot;%.12f&quot;, myvalue); // Output: 0.000000210000\r\n\r\n - by using `setMaximumFractionDigits(0);` or `%.0f` you remove any decimal precision, which is fine for integers/longs but not for double\r\n\r\n        double myValue = 0.00000021d;\r\n        System.out.println(String.format(&quot;%.0f&quot;, myvalue)); // Output: 0\r\n        DecimalFormat df = new DecimalFormat(&quot;0&quot;);\r\n        System.out.println(df.format(myValue)); // Output: 0\r\n - by using DecimalFormat, you are local dependent. In the French locale, the decimal separator is a comma, not a point:\r\n\r\n        double myValue = 0.00000021d;\r\n        DecimalFormat df = new DecimalFormat(&quot;0&quot;);\r\n        df.setMaximumFractionDigits(340);\r\n        System.out.println(df.format(myvalue)); // Output: 0,00000021\r\n   Using the ENGLISH locale makes sure you get a point for decimal separator, wherever your program will run.\r\n\r\nWhy using 340 then for `setMaximumFractionDigits`?\r\n\r\nTwo reasons:\r\n\r\n - `setMaximumFractionDigits` accepts an integer, but its implementation has a maximum digits allowed of `DecimalFormat.DOUBLE_FRACTION_DIGITS` which equals 340\r\n - `Double.MIN_VALUE = 4.9E-324` so with 340 digits you are sure not to round your double and lose precision\r\n\r\n  [1]: https://en.wiktionary.org/wiki/locale#Noun\r\n\r\n\r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p><strong>In short:</strong></p>\n<p>If you want to get rid of trailing zeros and <a href=\"https://en.wiktionary.org/wiki/locale#Noun\" rel=\"noreferrer\">locale</a> problems, then you should use:</p>\n<pre><code>double myValue = 0.00000021d;\n\nDecimalFormat df = new DecimalFormat(&quot;0&quot;, DecimalFormatSymbols.getInstance(Locale.ENGLISH));\ndf.setMaximumFractionDigits(340); //340 = DecimalFormat.DOUBLE_FRACTION_DIGITS\n\nSystem.out.println(df.format(myValue)); //output: 0.00000021\n</code></pre>\n<p><strong>Explanation:</strong></p>\n<p>Why other answers did not suit me:</p>\n<ul>\n<li><p><code>Double.toString()</code> or <code>System.out.println</code> or <code>FloatingDecimal.toJavaFormatString</code> uses scientific notations if double is less than 10^-3 or greater than or equal to 10^7</p>\n<pre><code> double myValue = 0.00000021d;\n String.format(&quot;%s&quot;, myvalue); //output: 2.1E-7\n</code></pre>\n</li>\n<li><p>by using <code>%f</code>, the default decimal precision is 6, otherwise you can hardcode it, but it results in extra zeros added if you have fewer decimals. Example:</p>\n<pre><code> double myValue = 0.00000021d;\n String.format(&quot;%.12f&quot;, myvalue); // Output: 0.000000210000\n</code></pre>\n</li>\n<li><p>by using <code>setMaximumFractionDigits(0);</code> or <code>%.0f</code> you remove any decimal precision, which is fine for integers/longs but not for double</p>\n<pre><code> double myValue = 0.00000021d;\n System.out.println(String.format(&quot;%.0f&quot;, myvalue)); // Output: 0\n DecimalFormat df = new DecimalFormat(&quot;0&quot;);\n System.out.println(df.format(myValue)); // Output: 0\n</code></pre>\n</li>\n<li><p>by using DecimalFormat, you are local dependent. In the French locale, the decimal separator is a comma, not a point:</p>\n<pre><code> double myValue = 0.00000021d;\n DecimalFormat df = new DecimalFormat(&quot;0&quot;);\n df.setMaximumFractionDigits(340);\n System.out.println(df.format(myvalue)); // Output: 0,00000021\n</code></pre>\n<p>Using the ENGLISH locale makes sure you get a point for decimal separator, wherever your program will run.</p>\n</li>\n</ul>\n<p>Why using 340 then for <code>setMaximumFractionDigits</code>?</p>\n<p>Two reasons:</p>\n<ul>\n<li><code>setMaximumFractionDigits</code> accepts an integer, but its implementation has a maximum digits allowed of <code>DecimalFormat.DOUBLE_FRACTION_DIGITS</code> which equals 340</li>\n<li><code>Double.MIN_VALUE = 4.9E-324</code> so with 340 digits you are sure not to round your double and lose precision</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":1768684,"reputation":2213,"user_id":1613961,"accept_rate":86,"display_name":"Jeff T."},"score":5,"creation_date":1444812293,"post_id":26132504,"comment_id":54054224,"body_markdown":"I prefer this answer by which we don&#39;t need to do type conversion.","body":"I prefer this answer by which we don&#39;t need to do type conversion."},{"owner":{"account_id":2294271,"reputation":1873,"user_id":2016165,"accept_rate":45,"display_name":"Neph"},"score":0,"creation_date":1571926506,"post_id":26132504,"comment_id":103408036,"body_markdown":"Short explanation: `&quot;%s&quot;` basically calls `d.toString()` but it doesn&#39;t work with `int` or if `d==null`!","body":"Short explanation: <code>&quot;%s&quot;</code> basically calls <code>d.toString()</code> but it doesn&#39;t work with <code>int</code> or if <code>d==null</code>!"},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1634935712,"post_id":26132504,"comment_id":123170293,"body_markdown":"very much like this.","body":"very much like this."}],"tags":[],"owner":{"account_id":54568,"reputation":3499,"user_id":163274,"display_name":"Valeriu Paloş"},"comment_count":3,"down_vote_count":0,"up_vote_count":49,"is_accepted":false,"score":49,"last_activity_date":1607424459,"creation_date":1412124839,"answer_id":26132504,"question_id":703396,"body_markdown":"Use:\r\n\r\n    if (d % 1.0 != 0)\r\n        return String.format(&quot;%s&quot;, d);\r\n    else\r\n        return String.format(&quot;%.0f&quot;, d);\r\n\r\nThis should work with the extreme values supported by Double. It yields:\r\n\r\n    0.12\r\n    12\r\n    12.144252\r\n    0\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>Use:</p>\n<pre><code>if (d % 1.0 != 0)\n    return String.format(&quot;%s&quot;, d);\nelse\n    return String.format(&quot;%.0f&quot;, d);\n</code></pre>\n<p>This should work with the extreme values supported by Double. It yields:</p>\n<pre><code>0.12\n12\n12.144252\n0\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11354,"reputation":27694,"user_id":21838,"accept_rate":82,"display_name":"Pyrolistical"},"score":1,"creation_date":1426268447,"post_id":29029840,"comment_id":46317900,"body_markdown":"you should add this as a comment to the accepted answer","body":"you should add this as a comment to the accepted answer"},{"owner":{"account_id":373266,"reputation":18587,"user_id":722804,"display_name":"Terry Jan Reedy"},"score":0,"creation_date":1426302069,"post_id":29029840,"comment_id":46329420,"body_markdown":"Comments do not allow the length or format of this addendum.  Since it adds possibly useful information, I think it should be allowed as is rather than deleted.","body":"Comments do not allow the length or format of this addendum.  Since it adds possibly useful information, I think it should be allowed as is rather than deleted."}],"tags":[],"owner":{"account_id":558770,"reputation":16438,"user_id":755804,"accept_rate":20,"display_name":"18446744073709551615"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1426492941,"creation_date":1426242292,"answer_id":29029840,"question_id":703396,"body_markdown":"Please note that `String.format(format, args...)` is ***locale-dependent*** because it formats _using the user&#39;s default locale,_ that is, probably with commas and even spaces inside like _123 456,789_ or _123,456.789_, which may be not exactly what you expect.\r\n\r\nYou may prefer to use `String.format((Locale)null, format, args...)`.\r\n\r\nFor example,\r\n\r\n        double f = 123456.789d;\r\n        System.out.println(String.format(Locale.FRANCE,&quot;%f&quot;,f));\r\n        System.out.println(String.format(Locale.GERMANY,&quot;%f&quot;,f));\r\n        System.out.println(String.format(Locale.US,&quot;%f&quot;,f));\r\n\r\nprints\r\n\r\n    123456,789000\r\n    123456,789000\r\n    123456.789000\r\n\r\nand this is what will `String.format(format, args...)` do in different countries.\r\n\r\nEDIT Ok, since there has been a discussion about formalities:\r\n\r\n        res += stripFpZeroes(String.format((Locale) null, (nDigits!=0 ? &quot;%.&quot;+nDigits+&quot;f&quot; : &quot;%f&quot;), value));\r\n        ...\r\n\r\n\tprotected static String stripFpZeroes(String fpnumber) {\r\n\t\tint n = fpnumber.indexOf(&#39;.&#39;);\r\n\t\tif (n == -1) {\r\n\t\t\treturn fpnumber;\r\n\t\t}\r\n\t\tif (n &lt; 2) {\r\n\t\t\tn = 2;\r\n\t\t}\r\n\t\tString s = fpnumber;\r\n\t\twhile (s.length() &gt; n &amp;&amp; s.endsWith(&quot;0&quot;)) {\r\n\t\t\ts = s.substring(0, s.length()-1);\r\n\t\t}\r\n\t\treturn s;\r\n\t}\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>Please note that <code>String.format(format, args...)</code> is <strong><em>locale-dependent</em></strong> because it formats <em>using the user's default locale,</em> that is, probably with commas and even spaces inside like <em>123 456,789</em> or <em>123,456.789</em>, which may be not exactly what you expect.</p>\n\n<p>You may prefer to use <code>String.format((Locale)null, format, args...)</code>.</p>\n\n<p>For example,</p>\n\n<pre><code>    double f = 123456.789d;\n    System.out.println(String.format(Locale.FRANCE,\"%f\",f));\n    System.out.println(String.format(Locale.GERMANY,\"%f\",f));\n    System.out.println(String.format(Locale.US,\"%f\",f));\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>123456,789000\n123456,789000\n123456.789000\n</code></pre>\n\n<p>and this is what will <code>String.format(format, args...)</code> do in different countries.</p>\n\n<p>EDIT Ok, since there has been a discussion about formalities:</p>\n\n<pre><code>    res += stripFpZeroes(String.format((Locale) null, (nDigits!=0 ? \"%.\"+nDigits+\"f\" : \"%f\"), value));\n    ...\n\nprotected static String stripFpZeroes(String fpnumber) {\n    int n = fpnumber.indexOf('.');\n    if (n == -1) {\n        return fpnumber;\n    }\n    if (n &lt; 2) {\n        n = 2;\n    }\n    String s = fpnumber;\n    while (s.length() &gt; n &amp;&amp; s.endsWith(\"0\")) {\n        s = s.substring(0, s.length()-1);\n    }\n    return s;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11354,"reputation":27694,"user_id":21838,"accept_rate":82,"display_name":"Pyrolistical"},"score":1,"creation_date":1446142798,"post_id":29815964,"comment_id":54633013,"body_markdown":"javascript made the same choice by the way :)","body":"javascript made the same choice by the way :)"},{"owner":{"account_id":5501406,"reputation":4041,"user_id":4370629,"accept_rate":67,"display_name":"Spotted"},"score":1,"creation_date":1446187482,"post_id":29815964,"comment_id":54648686,"body_markdown":"@Pyrolistical Can you explain a bit more your statement ? It&#39;s not quite clear for me... :)","body":"@Pyrolistical Can you explain a bit more your statement ? It&#39;s not quite clear for me... :)"}],"tags":[],"owner":{"account_id":5501406,"reputation":4041,"user_id":4370629,"accept_rate":67,"display_name":"Spotted"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1607424613,"creation_date":1429772390,"answer_id":29815964,"question_id":703396,"body_markdown":"You said you **choose** to store your numbers with the *double type*. I think this could be the root of the problem, because it forces you to store *integers* into doubles (and therefore losing the initial information about the value&#39;s nature). What about storing your numbers in instances of the [Number][1] class (superclass of both Double and Integer) and rely on polymorphism to determine the correct format of each number?\r\n\r\nI know it may not be acceptable to refactor a whole part of your code due to that, but it could produce the desired output without extra code/casting/parsing.\r\n\r\nExample:\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n\r\n    public class UseMixedNumbers {\r\n\r\n        public static void main(String[] args) {\r\n            List&lt;Number&gt; listNumbers = new ArrayList&lt;Number&gt;();\r\n\r\n            listNumbers.add(232);\r\n            listNumbers.add(0.18);\r\n            listNumbers.add(1237875192);\r\n            listNumbers.add(4.58);\r\n            listNumbers.add(0);\r\n            listNumbers.add(1.2345);\r\n\r\n            for (Number number : listNumbers) {\r\n                System.out.println(number);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\nWill produce the following output:\r\n\r\n    232\r\n    0.18\r\n    1237875192\r\n    4.58\r\n    0\r\n    1.2345\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/Number.html\r\n\r\n\r\n\r\n\r\n \r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>You said you <strong>choose</strong> to store your numbers with the <em>double type</em>. I think this could be the root of the problem, because it forces you to store <em>integers</em> into doubles (and therefore losing the initial information about the value's nature). What about storing your numbers in instances of the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Number.html\" rel=\"nofollow noreferrer\">Number</a> class (superclass of both Double and Integer) and rely on polymorphism to determine the correct format of each number?</p>\n<p>I know it may not be acceptable to refactor a whole part of your code due to that, but it could produce the desired output without extra code/casting/parsing.</p>\n<p>Example:</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class UseMixedNumbers {\n\n    public static void main(String[] args) {\n        List&lt;Number&gt; listNumbers = new ArrayList&lt;Number&gt;();\n\n        listNumbers.add(232);\n        listNumbers.add(0.18);\n        listNumbers.add(1237875192);\n        listNumbers.add(4.58);\n        listNumbers.add(0);\n        listNumbers.add(1.2345);\n\n        for (Number number : listNumbers) {\n            System.out.println(number);\n        }\n    }\n\n}\n</code></pre>\n<p>Will produce the following output:</p>\n<pre><code>232\n0.18\n1237875192\n4.58\n0\n1.2345\n</code></pre>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1607424703,"post_id":38656629,"comment_id":115262079,"body_markdown":"An explanation would be in order.","body":"An explanation would be in order."},{"owner":{"account_id":7010449,"reputation":19867,"user_id":5373542,"display_name":"Fabrizio Valencia"},"score":0,"creation_date":1623300866,"post_id":38656629,"comment_id":120040988,"body_markdown":"Nice answer, it doesn&#39;t need an explanation as it do it by itself.","body":"Nice answer, it doesn&#39;t need an explanation as it do it by itself."},{"owner":{"account_id":1707287,"reputation":453,"user_id":1566098,"accept_rate":33,"display_name":"fop6316"},"score":0,"creation_date":1623871449,"post_id":38656629,"comment_id":120204508,"body_markdown":"Explanation added. I hope this will deserve at least 2 more up-votes ;-)","body":"Explanation added. I hope this will deserve at least 2 more up-votes ;-)"}],"tags":[],"owner":{"account_id":1707287,"reputation":453,"user_id":1566098,"accept_rate":33,"display_name":"fop6316"},"comment_count":3,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1623871288,"creation_date":1469788387,"answer_id":38656629,"question_id":703396,"body_markdown":"    if (d == Math.floor(d)) {\r\n        return String.format(&quot;%.0f&quot;, d); //Format is: 0 places after decimal point\r\n    } else {\r\n        return Double.toString(d);\r\n    }\r\n\r\nMore info: https://docs.oracle.com/javase/tutorial/java/data/numberformat.html","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<pre><code>if (d == Math.floor(d)) {\n    return String.format(&quot;%.0f&quot;, d); //Format is: 0 places after decimal point\n} else {\n    return Double.toString(d);\n}\n</code></pre>\n<p>More info: <a href=\"https://docs.oracle.com/javase/tutorial/java/data/numberformat.html\" rel=\"noreferrer\">https://docs.oracle.com/javase/tutorial/java/data/numberformat.html</a></p>\n"},{"comments":[{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":3,"creation_date":1495020442,"post_id":38786041,"comment_id":75073368,"body_markdown":"Or just `return String.format(Locale.US, (n % 1 == 0 ? &quot;%.0f&quot; : &quot;%.1f&quot;), n);`.","body":"Or just <code>return String.format(Locale.US, (n % 1 == 0 ? &quot;%.0f&quot; : &quot;%.1f&quot;), n);</code>."},{"owner":{"account_id":3129869,"reputation":1542,"user_id":2647910,"accept_rate":92,"display_name":"aswzen"},"score":2,"creation_date":1544757449,"post_id":38786041,"comment_id":94397767,"body_markdown":"fail when 23.00123 ==&gt; 23.00","body":"fail when 23.00123 ==&gt; 23.00"},{"owner":{"account_id":10541959,"reputation":8904,"user_id":7767664,"accept_rate":63,"display_name":"user924"},"score":2,"creation_date":1606990331,"post_id":38786041,"comment_id":115133379,"body_markdown":"what are you doing? it always rounds to 1 digit after the dot, it&#39;s not answer to the question. why some people cannot read?","body":"what are you doing? it always rounds to 1 digit after the dot, it&#39;s not answer to the question. why some people cannot read?"},{"owner":{"account_id":10541959,"reputation":8904,"user_id":7767664,"accept_rate":63,"display_name":"user924"},"score":1,"creation_date":1606990419,"post_id":38786041,"comment_id":115133439,"body_markdown":"you wrong answer doesn&#39;t return `232\n0.18\n1237875192\n4.58\n0\n1.2345`","body":"you wrong answer doesn&#39;t return <code>232 0.18 1237875192 4.58 0 1.2345</code>"},{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1607424765,"post_id":38786041,"comment_id":115262103,"body_markdown":"Does it actually work? What is &#39;n&#39;? A floating point number of some kind? An integer?","body":"Does it actually work? What is &#39;n&#39;? A floating point number of some kind? An integer?"}],"tags":[],"owner":{"account_id":152022,"reputation":4063,"user_id":366253,"accept_rate":57,"display_name":"Fernando Gallego"},"comment_count":5,"down_vote_count":1,"up_vote_count":26,"is_accepted":false,"score":25,"last_activity_date":1607424731,"creation_date":1470389805,"answer_id":38786041,"question_id":703396,"body_markdown":"My two cents:\r\n\r\n    if(n % 1 == 0) {\r\n        return String.format(Locale.US, &quot;%.0f&quot;, n));\r\n    } else {\r\n        return String.format(Locale.US, &quot;%.1f&quot;, n));\r\n    }\r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>My two cents:</p>\n<pre><code>if(n % 1 == 0) {\n    return String.format(Locale.US, &quot;%.0f&quot;, n));\n} else {\n    return String.format(Locale.US, &quot;%.1f&quot;, n));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1312446,"reputation":915,"user_id":1262012,"accept_rate":65,"display_name":"Bialy"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1607424956,"creation_date":1473491396,"answer_id":39423559,"question_id":703396,"body_markdown":"This one will gets the job done nicely:\r\n\r\n        public static String removeZero(double number) {\r\n            DecimalFormat format = new DecimalFormat(&quot;#.###########&quot;);\r\n            return format.format(number);\r\n        }\r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>This one will gets the job done nicely:</p>\n<pre><code>    public static String removeZero(double number) {\n        DecimalFormat format = new DecimalFormat(&quot;#.###########&quot;);\n        return format.format(number);\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":295859,"reputation":13588,"user_id":600486,"accept_rate":80,"display_name":"blurfus"},"score":0,"creation_date":1500052448,"post_id":45098289,"comment_id":77188157,"body_markdown":"while this may provide a solution to the question, it is good practice to add a brief explanation for the community to benefit (and learn) from the answer","body":"while this may provide a solution to the question, it is good practice to add a brief explanation for the community to benefit (and learn) from the answer"},{"owner":{"account_id":10541959,"reputation":8904,"user_id":7767664,"accept_rate":63,"display_name":"user924"},"score":0,"creation_date":1606989704,"post_id":45098289,"comment_id":115133081,"body_markdown":"this is not answer to that question. it always rounds to one number after a dot. Such a bad answer and offtopic","body":"this is not answer to that question. it always rounds to one number after a dot. Such a bad answer and offtopic"},{"owner":{"account_id":10541959,"reputation":8904,"user_id":7767664,"accept_rate":63,"display_name":"user924"},"score":0,"creation_date":1606990400,"post_id":45098289,"comment_id":115133423,"body_markdown":"you wrong answer doesn&#39;t return `232\n0.18\n1237875192\n4.58\n0\n1.2345`","body":"you wrong answer doesn&#39;t return <code>232 0.18 1237875192 4.58 0 1.2345</code>"}],"tags":[],"owner":{"account_id":4441341,"reputation":1387,"user_id":3615816,"display_name":"Hossein Hajizadeh"},"comment_count":3,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1500093979,"creation_date":1500020987,"answer_id":45098289,"question_id":703396,"body_markdown":"\r\n    new DecimalFormat(&quot;00.#&quot;).format(20.236)\r\n    //out =20.2\r\n    \r\n    new DecimalFormat(&quot;00.#&quot;).format(2.236)\r\n    //out =02.2\r\n\r\n 1. 0 for minimum number of digits\r\n 2. Renders # digits\r\n\r\n\r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<pre><code>new DecimalFormat(\"00.#\").format(20.236)\n//out =20.2\n\nnew DecimalFormat(\"00.#\").format(2.236)\n//out =02.2\n</code></pre>\n\n<ol>\n<li>0 for minimum number of digits</li>\n<li>Renders # digits</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":5605957,"reputation":873,"user_id":4440561,"display_name":"ShAkKiR"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1607425015,"creation_date":1500983123,"answer_id":45302298,"question_id":703396,"body_markdown":"    public static String fmt(double d) {\r\n        String val = Double.toString(d);\r\n        String[] valArray = val.split(&quot;\\\\.&quot;);\r\n        long valLong = 0;\r\n        if(valArray.length == 2) {\r\n            valLong = Long.parseLong(valArray[1]);\r\n        }\r\n         if (valLong == 0)\r\n            return String.format(&quot;%d&quot;, (long) d);\r\n        else\r\n            return String.format(&quot;%s&quot;, d);\r\n    }\r\n\r\nI had to use this because `d == (long)d` was giving me violation in a [SonarQube][1] report.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/SonarQube\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<pre><code>public static String fmt(double d) {\n    String val = Double.toString(d);\n    String[] valArray = val.split(&quot;\\\\.&quot;);\n    long valLong = 0;\n    if(valArray.length == 2) {\n        valLong = Long.parseLong(valArray[1]);\n    }\n     if (valLong == 0)\n        return String.format(&quot;%d&quot;, (long) d);\n    else\n        return String.format(&quot;%s&quot;, d);\n}\n</code></pre>\n<p>I had to use this because <code>d == (long)d</code> was giving me violation in a <a href=\"https://en.wikipedia.org/wiki/SonarQube\" rel=\"nofollow noreferrer\">SonarQube</a> report.</p>\n"},{"comments":[{"owner":{"account_id":485260,"reputation":1134,"user_id":901465,"accept_rate":100,"display_name":"acrespo"},"score":0,"creation_date":1562075858,"post_id":46674987,"comment_id":100258303,"body_markdown":"I would add `setMaximumFractionDigits(2)` and `setGroupingUsed(false)` (OP&#39;s doesn&#39;t mention it but from example it seems that its required). Also, a small test case doesn&#39;t hurt since its trivial in this case. Still, since I think it its the simplest solution, an upvote is an upvote :)","body":"I would add <code>setMaximumFractionDigits(2)</code> and <code>setGroupingUsed(false)</code> (OP&#39;s doesn&#39;t mention it but from example it seems that its required). Also, a small test case doesn&#39;t hurt since its trivial in this case. Still, since I think it its the simplest solution, an upvote is an upvote :)"}],"tags":[],"owner":{"account_id":101088,"reputation":821,"user_id":272132,"display_name":"vlazzle"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1607425147,"creation_date":1507665561,"answer_id":46674987,"question_id":703396,"body_markdown":"Use a `DecimalFormat` and `setMinimumFractionDigits(0)`.\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>Use a <code>DecimalFormat</code> and <code>setMinimumFractionDigits(0)</code>.</p>\n"},{"comments":[{"owner":{"account_id":891564,"reputation":561,"user_id":929708,"display_name":"JJ Brown"},"score":1,"creation_date":1552068661,"post_id":49781460,"comment_id":96884960,"body_markdown":"Repeating what Felix Edelmann said elsewhere: this will create a Locale-independent string, which may not always be appropriate for the user.","body":"Repeating what Felix Edelmann said elsewhere: this will create a Locale-independent string, which may not always be appropriate for the user."},{"owner":{"account_id":1419056,"reputation":5266,"user_id":1344070,"accept_rate":100,"display_name":"keisar"},"score":0,"creation_date":1557439617,"post_id":49781460,"comment_id":98776122,"body_markdown":"fair point, for my use case this was not an issue, I&#39;m not entirely sure right now but I think one could use String.format (with the wanted Locale) instead of valueOf","body":"fair point, for my use case this was not an issue, I&#39;m not entirely sure right now but I think one could use String.format (with the wanted Locale) instead of valueOf"}],"tags":[],"owner":{"account_id":1419056,"reputation":5266,"user_id":1344070,"accept_rate":100,"display_name":"keisar"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1607425261,"creation_date":1523468713,"answer_id":49781460,"question_id":703396,"body_markdown":"This is what I came up with:\r\n\r\n      private static String format(final double dbl) {\r\n        return dbl % 1 != 0 ? String.valueOf(dbl) : String.valueOf((int) dbl);\r\n      }\r\n\r\nIt is a simple one-liner and only casts to int if it really needs to.\r\n\r\n \r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>This is what I came up with:</p>\n<pre><code>  private static String format(final double dbl) {\n    return dbl % 1 != 0 ? String.valueOf(dbl) : String.valueOf((int) dbl);\n  }\n</code></pre>\n<p>It is a simple one-liner and only casts to int if it really needs to.</p>\n"},{"tags":[],"owner":{"account_id":3300281,"reputation":1823,"user_id":2776623,"display_name":"oxied"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1607425443,"creation_date":1568201646,"answer_id":57888252,"question_id":703396,"body_markdown":"**Format price with grouping, rounding, and no unnecessary zeroes (in double).**\r\n\r\nRules:\r\n\r\n1. No zeroes at the end (`2.0000 = 2; 1.0100000 = 1.01`)\r\n2. Two digits maximum after a point (`2.010 = 2.01; 0.20 = 0.2`)\r\n3. Rounding after the 2nd digit after a point (`1.994 = 1.99; 1.995 = 2; 1.006 = 1.01; 0.0006 -&gt; 0`)\r\n4. Returns `0` (`null/-0 = 0`)\r\n5. Adds `$` (`= $56/-$56`)\r\n6. Grouping (`101101.02 = $101,101.02`)\r\n\r\nMore examples:\r\n\r\n&gt; `-99.985 = -$99.99`\r\n&gt;\r\n&gt; `10 = $10`\r\n&gt;\r\n&gt; `10.00 = $10`\r\n&gt;\r\n&gt; `20.01000089 = $20.01`\r\n\r\nIt is written in [Kotlin][1] as a fun extension of Double (because it is used in Android), but it can be converted to Java easily, because Java classes were used.\r\n\r\n    /**\r\n     * 23.0 -&gt; $23\r\n     *\r\n     * 23.1 -&gt; $23.1\r\n     *\r\n     * 23.01 -&gt; $23.01\r\n     *\r\n     * 23.99 -&gt; $23.99\r\n     *\r\n     * 23.999 -&gt; $24\r\n     *\r\n     * -0.0 -&gt; $0\r\n     *\r\n     * -5.00 -&gt; -$5\r\n     *\r\n     * -5.019 -&gt; -$5.02\r\n     */\r\n    fun Double?.formatUserAsSum(): String {\r\n        return when {\r\n            this == null || this == 0.0 -&gt; &quot;$0&quot;\r\n            this % 1 == 0.0 -&gt; DecimalFormat(&quot;$#,##0;-$#,##0&quot;).format(this)\r\n            else -&gt; DecimalFormat(&quot;$#,##0.##;-$#,##0.##&quot;).format(this)\r\n        }\r\n    }\r\n\r\nHow to use:\r\n\r\n    var yourDouble: Double? = -20.00\r\n    println(yourDouble.formatUserAsSum()) // will print -$20\r\n\r\n    yourDouble = null\r\n    println(yourDouble.formatUserAsSum()) // will print $0\r\n\r\n**About DecimalFormat**: https://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Kotlin_(programming_language)\r\n\r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p><strong>Format price with grouping, rounding, and no unnecessary zeroes (in double).</strong></p>\n<p>Rules:</p>\n<ol>\n<li>No zeroes at the end (<code>2.0000 = 2; 1.0100000 = 1.01</code>)</li>\n<li>Two digits maximum after a point (<code>2.010 = 2.01; 0.20 = 0.2</code>)</li>\n<li>Rounding after the 2nd digit after a point (<code>1.994 = 1.99; 1.995 = 2; 1.006 = 1.01; 0.0006 -&gt; 0</code>)</li>\n<li>Returns <code>0</code> (<code>null/-0 = 0</code>)</li>\n<li>Adds <code>$</code> (<code>= $56/-$56</code>)</li>\n<li>Grouping (<code>101101.02 = $101,101.02</code>)</li>\n</ol>\n<p>More examples:</p>\n<blockquote>\n<p><code>-99.985 = -$99.99</code></p>\n<p><code>10 = $10</code></p>\n<p><code>10.00 = $10</code></p>\n<p><code>20.01000089 = $20.01</code></p>\n</blockquote>\n<p>It is written in <a href=\"https://en.wikipedia.org/wiki/Kotlin_(programming_language)\" rel=\"nofollow noreferrer\">Kotlin</a> as a fun extension of Double (because it is used in Android), but it can be converted to Java easily, because Java classes were used.</p>\n<pre><code>/**\n * 23.0 -&gt; $23\n *\n * 23.1 -&gt; $23.1\n *\n * 23.01 -&gt; $23.01\n *\n * 23.99 -&gt; $23.99\n *\n * 23.999 -&gt; $24\n *\n * -0.0 -&gt; $0\n *\n * -5.00 -&gt; -$5\n *\n * -5.019 -&gt; -$5.02\n */\nfun Double?.formatUserAsSum(): String {\n    return when {\n        this == null || this == 0.0 -&gt; &quot;$0&quot;\n        this % 1 == 0.0 -&gt; DecimalFormat(&quot;$#,##0;-$#,##0&quot;).format(this)\n        else -&gt; DecimalFormat(&quot;$#,##0.##;-$#,##0.##&quot;).format(this)\n    }\n}\n</code></pre>\n<p>How to use:</p>\n<pre><code>var yourDouble: Double? = -20.00\nprintln(yourDouble.formatUserAsSum()) // will print -$20\n\nyourDouble = null\nprintln(yourDouble.formatUserAsSum()) // will print $0\n</code></pre>\n<p><strong>About DecimalFormat</strong>: <a href=\"https://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html</a></p>\n"},{"tags":[],"owner":{"account_id":4048971,"reputation":896,"user_id":3329281,"display_name":"Taras Lozovyi"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1607425480,"creation_date":1575540867,"answer_id":59192821,"question_id":703396,"body_markdown":"For Kotlin you can use an extension like:\r\n\r\n```\r\nfun Double.toPrettyString() =\r\n    if(this - this.toLong() == 0.0)\r\n        String.format(&quot;%d&quot;, this.toLong())\r\n    else\r\n        String.format(&quot;%s&quot;, this)\r\n```\r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>For Kotlin you can use an extension like:</p>\n<pre><code>fun Double.toPrettyString() =\n    if(this - this.toLong() == 0.0)\n        String.format(&quot;%d&quot;, this.toLong())\n    else\n        String.format(&quot;%s&quot;, this)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6241436,"reputation":2512,"user_id":4854931,"accept_rate":33,"display_name":"Alex78191"},"score":0,"creation_date":1582223083,"post_id":59250845,"comment_id":106712671,"body_markdown":"What about 1.23450000?","body":"What about 1.23450000?"},{"owner":{"account_id":10071729,"reputation":566,"user_id":7445066,"display_name":"Ahmed Mihoub"},"score":0,"creation_date":1583161472,"post_id":59250845,"comment_id":107013178,"body_markdown":"1.23450000 =&gt; 1.23","body":"1.23450000 =&gt; 1.23"},{"owner":{"account_id":6682011,"reputation":490,"user_id":5154785,"accept_rate":65,"display_name":"BekaBot"},"score":2,"creation_date":1600423882,"post_id":59250845,"comment_id":113090516,"body_markdown":"the only solution that satisfied me","body":"the only solution that satisfied me"},{"owner":{"account_id":5732440,"reputation":157,"user_id":4527543,"accept_rate":40,"display_name":"yaboong"},"score":1,"creation_date":1615826312,"post_id":59250845,"comment_id":117806063,"body_markdown":"DecimalFormat is not thread-safe. You have to be careful when using it.","body":"DecimalFormat is not thread-safe. You have to be careful when using it."},{"owner":{"account_id":14876397,"reputation":196,"user_id":10742321,"display_name":"Angad Cheema"},"score":1,"creation_date":1641117171,"post_id":59250845,"comment_id":124721642,"body_markdown":"finally this worked. Thanks.","body":"finally this worked. Thanks."}],"tags":[],"owner":{"account_id":10071729,"reputation":566,"user_id":7445066,"display_name":"Ahmed Mihoub"},"comment_count":5,"down_vote_count":2,"up_vote_count":22,"is_accepted":false,"score":20,"last_activity_date":1607425518,"creation_date":1575901336,"answer_id":59250845,"question_id":703396,"body_markdown":"    float price = 4.30;\r\n    DecimalFormat format = new DecimalFormat(&quot;0.##&quot;); // Choose the number of decimal places to work with in case they are different than zero and zero value will be removed\r\n    format.setRoundingMode(RoundingMode.DOWN); // Choose your Rounding Mode\r\n    System.out.println(format.format(price));\r\n\r\nThis is the result of some tests:\r\n\r\n    4.30     =&gt; 4.3\r\n    4.39     =&gt; 4.39  // Choose format.setRoundingMode(RoundingMode.UP) to get 4.4\r\n    4.000000 =&gt; 4\r\n    4        =&gt; 4\r\n\r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<pre><code>float price = 4.30;\nDecimalFormat format = new DecimalFormat(&quot;0.##&quot;); // Choose the number of decimal places to work with in case they are different than zero and zero value will be removed\nformat.setRoundingMode(RoundingMode.DOWN); // Choose your Rounding Mode\nSystem.out.println(format.format(price));\n</code></pre>\n<p>This is the result of some tests:</p>\n<pre><code>4.30     =&gt; 4.3\n4.39     =&gt; 4.39  // Choose format.setRoundingMode(RoundingMode.UP) to get 4.4\n4.000000 =&gt; 4\n4        =&gt; 4\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12401582,"reputation":2466,"user_id":9038584,"accept_rate":75,"display_name":"Tenten Ponce"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1589468855,"creation_date":1589468855,"answer_id":61800791,"question_id":703396,"body_markdown":"Here&#39;s another answer that has an option to append decimal **ONLY IF** decimal was not zero.\r\n\r\n```\r\n   /**\r\n     * Example: (isDecimalRequired = true)\r\n     * d = 12345\r\n     * returns 12,345.00\r\n     *\r\n     * d = 12345.12345\r\n     * returns 12,345.12\r\n     *\r\n     * ==================================================\r\n     * Example: (isDecimalRequired = false)\r\n     * d = 12345\r\n     * returns 12,345 (notice that there&#39;s no decimal since it&#39;s zero)\r\n     *\r\n     * d = 12345.12345\r\n     * returns 12,345.12\r\n     *\r\n     * @param d float to format\r\n     * @param zeroCount number decimal places\r\n     * @param isDecimalRequired true if it will put decimal even zero,\r\n     * false will remove the last decimal(s) if zero.\r\n     */\r\n    fun formatDecimal(d: Float? = 0f, zeroCount: Int, isDecimalRequired: Boolean = true): String {\r\n        val zeros = StringBuilder()\r\n\r\n        for (i in 0 until zeroCount) {\r\n            zeros.append(&quot;0&quot;)\r\n        }\r\n\r\n        var pattern = &quot;#,##0&quot;\r\n\r\n        if (zeros.isNotEmpty()) {\r\n            pattern += &quot;.$zeros&quot;\r\n        }\r\n\r\n        val numberFormat = DecimalFormat(pattern)\r\n\r\n        var formattedNumber = if (d != null) numberFormat.format(d) else &quot;0&quot;\r\n\r\n        if (!isDecimalRequired) {\r\n            for (i in formattedNumber.length downTo formattedNumber.length - zeroCount) {\r\n                val number = formattedNumber[i - 1]\r\n\r\n                if (number == &#39;0&#39; || number == &#39;.&#39;) {\r\n                    formattedNumber = formattedNumber.substring(0, formattedNumber.length - 1)\r\n                } else {\r\n                    break\r\n                }\r\n            }\r\n        }\r\n\r\n        return formattedNumber\r\n    }\r\n```","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>Here's another answer that has an option to append decimal <strong>ONLY IF</strong> decimal was not zero.</p>\n\n<pre><code>   /**\n     * Example: (isDecimalRequired = true)\n     * d = 12345\n     * returns 12,345.00\n     *\n     * d = 12345.12345\n     * returns 12,345.12\n     *\n     * ==================================================\n     * Example: (isDecimalRequired = false)\n     * d = 12345\n     * returns 12,345 (notice that there's no decimal since it's zero)\n     *\n     * d = 12345.12345\n     * returns 12,345.12\n     *\n     * @param d float to format\n     * @param zeroCount number decimal places\n     * @param isDecimalRequired true if it will put decimal even zero,\n     * false will remove the last decimal(s) if zero.\n     */\n    fun formatDecimal(d: Float? = 0f, zeroCount: Int, isDecimalRequired: Boolean = true): String {\n        val zeros = StringBuilder()\n\n        for (i in 0 until zeroCount) {\n            zeros.append(\"0\")\n        }\n\n        var pattern = \"#,##0\"\n\n        if (zeros.isNotEmpty()) {\n            pattern += \".$zeros\"\n        }\n\n        val numberFormat = DecimalFormat(pattern)\n\n        var formattedNumber = if (d != null) numberFormat.format(d) else \"0\"\n\n        if (!isDecimalRequired) {\n            for (i in formattedNumber.length downTo formattedNumber.length - zeroCount) {\n                val number = formattedNumber[i - 1]\n\n                if (number == '0' || number == '.') {\n                    formattedNumber = formattedNumber.substring(0, formattedNumber.length - 1)\n                } else {\n                    break\n                }\n            }\n        }\n\n        return formattedNumber\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1091376,"reputation":5589,"user_id":1085958,"accept_rate":83,"display_name":"djmj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1607425696,"creation_date":1603730119,"answer_id":64541281,"question_id":703396,"body_markdown":"I am using this for formatting numbers without trailing zeroes in our [JSF][1] application. The original built-in formatters required you to specify max numbers of fractional digits which could be useful here also in case you have too many fractional digits.\r\n\r\n    /**\r\n     * Formats the given Number as with as many fractional digits as precision\r\n     * available.&lt;br&gt;\r\n     * This is a convenient method in case all fractional digits shall be\r\n     * rendered and no custom format / pattern needs to be provided.&lt;br&gt;\r\n     * &lt;br&gt;\r\n     * This serves as a workaround for {@link NumberFormat#getNumberInstance()}\r\n     * which by default only renders up to three fractional digits.\r\n     *\r\n     * @param number\r\n     * @param locale\r\n     * @param groupingUsed &lt;code&gt;true&lt;/code&gt; if grouping shall be used\r\n     *\r\n     * @return\r\n     */\r\n    public static String formatNumberFraction(final Number number, final Locale locale, final boolean groupingUsed)\r\n    {\r\n        if (number == null)\r\n            return null;\r\n\r\n        final BigDecimal bDNumber = MathUtils.getBigDecimal(number);\r\n\r\n        final NumberFormat numberFormat = NumberFormat.getNumberInstance(locale);\r\n        numberFormat.setMaximumFractionDigits(Math.max(0, bDNumber.scale()));\r\n        numberFormat.setGroupingUsed(groupingUsed);\r\n\r\n        // Convert back for locale percent formatter\r\n        return numberFormat.format(bDNumber);\r\n    }\r\n\r\n    /**\r\n     * Formats the given Number as percent with as many fractional digits as\r\n     * precision available.&lt;br&gt;\r\n     * This is a convenient method in case all fractional digits shall be\r\n     * rendered and no custom format / pattern needs to be provided.&lt;br&gt;\r\n     * &lt;br&gt;\r\n     * This serves as a workaround for {@link NumberFormat#getPercentInstance()}\r\n     * which does not renders fractional digits.\r\n     *\r\n     * @param number Number in range of [0-1]\r\n     * @param locale\r\n     *\r\n     * @return\r\n     */\r\n    public static String formatPercentFraction(final Number number, final Locale locale)\r\n    {\r\n        if (number == null)\r\n            return null;\r\n\r\n        final BigDecimal bDNumber = MathUtils.getBigDecimal(number).multiply(new BigDecimal(100));\r\n\r\n        final NumberFormat percentScaleFormat = NumberFormat.getPercentInstance(locale);\r\n        percentScaleFormat.setMaximumFractionDigits(Math.max(0, bDNumber.scale() - 2));\r\n\r\n        final BigDecimal bDNumberPercent = bDNumber.multiply(new BigDecimal(0.01));\r\n\r\n        // Convert back for locale percent formatter\r\n        final String strPercent = percentScaleFormat.format(bDNumberPercent);\r\n\r\n        return strPercent;\r\n    }\r\n\r\n  [1]: https://en.wikipedia.org/wiki/JavaServer_Faces\r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>I am using this for formatting numbers without trailing zeroes in our <a href=\"https://en.wikipedia.org/wiki/JavaServer_Faces\" rel=\"nofollow noreferrer\">JSF</a> application. The original built-in formatters required you to specify max numbers of fractional digits which could be useful here also in case you have too many fractional digits.</p>\n<pre><code>/**\n * Formats the given Number as with as many fractional digits as precision\n * available.&lt;br&gt;\n * This is a convenient method in case all fractional digits shall be\n * rendered and no custom format / pattern needs to be provided.&lt;br&gt;\n * &lt;br&gt;\n * This serves as a workaround for {@link NumberFormat#getNumberInstance()}\n * which by default only renders up to three fractional digits.\n *\n * @param number\n * @param locale\n * @param groupingUsed &lt;code&gt;true&lt;/code&gt; if grouping shall be used\n *\n * @return\n */\npublic static String formatNumberFraction(final Number number, final Locale locale, final boolean groupingUsed)\n{\n    if (number == null)\n        return null;\n\n    final BigDecimal bDNumber = MathUtils.getBigDecimal(number);\n\n    final NumberFormat numberFormat = NumberFormat.getNumberInstance(locale);\n    numberFormat.setMaximumFractionDigits(Math.max(0, bDNumber.scale()));\n    numberFormat.setGroupingUsed(groupingUsed);\n\n    // Convert back for locale percent formatter\n    return numberFormat.format(bDNumber);\n}\n\n/**\n * Formats the given Number as percent with as many fractional digits as\n * precision available.&lt;br&gt;\n * This is a convenient method in case all fractional digits shall be\n * rendered and no custom format / pattern needs to be provided.&lt;br&gt;\n * &lt;br&gt;\n * This serves as a workaround for {@link NumberFormat#getPercentInstance()}\n * which does not renders fractional digits.\n *\n * @param number Number in range of [0-1]\n * @param locale\n *\n * @return\n */\npublic static String formatPercentFraction(final Number number, final Locale locale)\n{\n    if (number == null)\n        return null;\n\n    final BigDecimal bDNumber = MathUtils.getBigDecimal(number).multiply(new BigDecimal(100));\n\n    final NumberFormat percentScaleFormat = NumberFormat.getPercentInstance(locale);\n    percentScaleFormat.setMaximumFractionDigits(Math.max(0, bDNumber.scale() - 2));\n\n    final BigDecimal bDNumberPercent = bDNumber.multiply(new BigDecimal(0.01));\n\n    // Convert back for locale percent formatter\n    final String strPercent = percentScaleFormat.format(bDNumberPercent);\n\n    return strPercent;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":439547,"reputation":1775,"user_id":828551,"accept_rate":63,"display_name":"joninx"},"score":0,"creation_date":1653648240,"post_id":69077254,"comment_id":127907105,"body_markdown":"This is the read answer. I&#39;d point out that you can get an especific Locale based on its country code, such as `NumberFormat.getInstance(Locale.forLanguageTag(&quot;ES&quot;));`","body":"This is the read answer. I&#39;d point out that you can get an especific Locale based on its country code, such as <code>NumberFormat.getInstance(Locale.forLanguageTag(&quot;ES&quot;));</code>"}],"tags":[],"owner":{"account_id":1577409,"reputation":16015,"user_id":1463522,"accept_rate":64,"display_name":"holmis83"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1630943153,"creation_date":1630943153,"answer_id":69077254,"question_id":703396,"body_markdown":"A simple solution with locale in mind:\r\n\r\n    double d = 123.45;\r\n    NumberFormat numberFormat = NumberFormat.getInstance(Locale.GERMANY);\r\n    System.out.println(numberFormat.format(d));\r\n\r\nSince comma is used as decimal separator in Germany, the above will print:\r\n\r\n&gt; 123,45","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>A simple solution with locale in mind:</p>\n<pre><code>double d = 123.45;\nNumberFormat numberFormat = NumberFormat.getInstance(Locale.GERMANY);\nSystem.out.println(numberFormat.format(d));\n</code></pre>\n<p>Since comma is used as decimal separator in Germany, the above will print:</p>\n<blockquote>\n<p>123,45</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":4500973,"reputation":395,"user_id":3659492,"accept_rate":78,"display_name":"Mahbubur Rahman Khan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644962251,"creation_date":1644962251,"answer_id":71133898,"question_id":703396,"body_markdown":" work with given decimal length...\r\n\r\n\r\n    public static String getLocaleFloatValueDecimalWithLength(Locale loc, float value, int length) {\r\n            //make string from float value\r\n            return String.format(loc, (value % 1 == 0 ? &quot;%.0f&quot; : &quot;%.&quot;+length+&quot;f&quot;), value);\r\n        }","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>work with given decimal length...</p>\n<pre><code>public static String getLocaleFloatValueDecimalWithLength(Locale loc, float value, int length) {\n        //make string from float value\n        return String.format(loc, (value % 1 == 0 ? &quot;%.0f&quot; : &quot;%.&quot;+length+&quot;f&quot;), value);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9060283,"reputation":71,"user_id":6747017,"display_name":"pogo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675083009,"creation_date":1675083009,"answer_id":75284626,"question_id":703396,"body_markdown":"0.0 -&gt; 0%&lt;br&gt;\r\n1.0 -&gt; 100%&lt;br&gt;\r\n0.1 -&gt; 10%&lt;br&gt;\r\n0.11 -&gt; 11%&lt;br&gt;\r\n0.01 -&gt; 1%&lt;br&gt;\r\n0.111 -&gt; 11.1%&lt;br&gt;\r\n0.001 -&gt; 0.1%&lt;br&gt;\r\n0.1111 -&gt; 11.11%&lt;br&gt;\r\n0.0001 -&gt; 0.01%&lt;br&gt;\r\n\r\n&quot;.replace()&quot; is added because I was always getting wrong separator\r\n```\r\nimport java.text.NumberFormat\r\n\r\nfun Double.formating(): String {\r\n    val defaultFormat: NumberFormat = NumberFormat.getPercentInstance()\r\n    defaultFormat.minimumFractionDigits = 0\r\n    defaultFormat.maximumFractionDigits = 2\r\n\r\n    return defaultFormat.format(this).replace(&quot;,&quot;, &quot;.&quot;)\r\n}\r\n```","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>0.0 -&gt; 0%<br>\n1.0 -&gt; 100%<br>\n0.1 -&gt; 10%<br>\n0.11 -&gt; 11%<br>\n0.01 -&gt; 1%<br>\n0.111 -&gt; 11.1%<br>\n0.001 -&gt; 0.1%<br>\n0.1111 -&gt; 11.11%<br>\n0.0001 -&gt; 0.01%<br></p>\n<p>&quot;.replace()&quot; is added because I was always getting wrong separator</p>\n<pre><code>import java.text.NumberFormat\n\nfun Double.formating(): String {\n    val defaultFormat: NumberFormat = NumberFormat.getPercentInstance()\n    defaultFormat.minimumFractionDigits = 0\n    defaultFormat.maximumFractionDigits = 2\n\n    return defaultFormat.format(this).replace(&quot;,&quot;, &quot;.&quot;)\n}\n</code></pre>\n"}],"owner":{"account_id":11354,"reputation":27694,"user_id":21838,"accept_rate":82,"display_name":"Pyrolistical"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":832898,"favorite_count":0,"down_vote_count":2,"up_vote_count":614,"accepted_answer_id":14126736,"answer_count":29,"score":612,"last_activity_date":1675448983,"creation_date":1238540069,"question_id":703396,"body_markdown":"A 64-bit double can represent integer +/- 2&lt;sup&gt;53&lt;/sup&gt; exactly.\r\n\r\nGiven this fact, I choose to use a double type as a single type for all my types, since my largest integer is an unsigned 32-bit number.\r\n\r\nBut now I have to print these pseudo integers, but the problem is they are also mixed in with actual doubles.\r\n\r\nSo how do I print these doubles nicely in Java?\r\n\r\nI have tried `String.format(&quot;%f&quot;, value)`, which is close, except I get a lot of trailing zeros for small values.\r\n\r\nHere&#39;s an example output of of `%f`\r\n\r\n&lt;pre&gt;\r\n232.00000000\r\n0.18000000000\r\n1237875192.0\r\n4.5800000000\r\n0.00000000\r\n1.23450000\r\n&lt;/pre&gt;\r\n\r\nWhat I want is:\r\n\r\n&lt;pre&gt;\r\n232\r\n0.18\r\n1237875192\r\n4.58\r\n0\r\n1.2345\r\n&lt;/pre&gt;\r\n\r\nSure I can write a function to trim those zeros, but that&#39;s lot of performance loss due to string manipulation. Can I do better with other format code?\r\n\r\n&lt;hr/&gt;\r\n\r\nThe answers by Tom E. and Jeremy S. are unacceptable as they both arbitrarily rounds to two decimal places. Please understand the problem before answering.\r\n\r\n&lt;hr/&gt;\r\n\r\nPlease note that `String.format(format, args...)` is ***locale-dependent*** (see answers below).\r\n\r\n\r\n","title":"How to nicely format floating numbers to string without unnecessary decimal 0&#39;s","body":"<p>A 64-bit double can represent integer +/- 2<sup>53</sup> exactly.</p>\n<p>Given this fact, I choose to use a double type as a single type for all my types, since my largest integer is an unsigned 32-bit number.</p>\n<p>But now I have to print these pseudo integers, but the problem is they are also mixed in with actual doubles.</p>\n<p>So how do I print these doubles nicely in Java?</p>\n<p>I have tried <code>String.format(&quot;%f&quot;, value)</code>, which is close, except I get a lot of trailing zeros for small values.</p>\n<p>Here's an example output of of <code>%f</code></p>\n<pre>\n232.00000000\n0.18000000000\n1237875192.0\n4.5800000000\n0.00000000\n1.23450000\n</pre>\n<p>What I want is:</p>\n<pre>\n232\n0.18\n1237875192\n4.58\n0\n1.2345\n</pre>\n<p>Sure I can write a function to trim those zeros, but that's lot of performance loss due to string manipulation. Can I do better with other format code?</p>\n<hr/>\n<p>The answers by Tom E. and Jeremy S. are unacceptable as they both arbitrarily rounds to two decimal places. Please understand the problem before answering.</p>\n<hr/>\n<p>Please note that <code>String.format(format, args...)</code> is <em><strong>locale-dependent</strong></em> (see answers below).</p>\n"},{"tags":["java","string","date","simpledateformat","date-formatting"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":2,"creation_date":1675436236,"post_id":75337406,"comment_id":132934612,"body_markdown":"&quot;I had troubles understanding the correct usage of SimpleDateFormat for this case&quot; - do you *have* to use that class at all? I&#39;d strongly recommend using java.time, e.g. `java.time.LocalDate` to represent a date. Basically, you should parse the existing string into a `LocalDate`, and then format it into the format. `DateTimeFormatter` is the appropriate class to use for that.","body":"&quot;I had troubles understanding the correct usage of SimpleDateFormat for this case&quot; - do you <i>have</i> to use that class at all? I&#39;d strongly recommend using java.time, e.g. <code>java.time.LocalDate</code> to represent a date. Basically, you should parse the existing string into a <code>LocalDate</code>, and then format it into the format. <code>DateTimeFormatter</code> is the appropriate class to use for that."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1675612556,"post_id":75337406,"comment_id":132962511,"body_markdown":"The most correct way to use `SimpleDateFormat` is - *not* to use it at all. Seriously. That class is so troublesome and so long outdated, you will never want to use it. See the answer.","body":"The most correct way to use <code>SimpleDateFormat</code> is - <i>not</i> to use it at all. Seriously. That class is so troublesome and so long outdated, you will never want to use it. See the answer."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1675613063,"post_id":75337406,"comment_id":132962596,"body_markdown":"I am wondering a bit about the format you say you want, `02012023`. I don&#39;t imagine anyone wanting to read a date in that format. What do you want it for? Wouldn&#39;t your users want something more readable and unambiguous?","body":"I am wondering a bit about the format you say you want, <code>02012023</code>. I don&#39;t imagine anyone wanting to read a date in that format. What do you want it for? Wouldn&#39;t your users want something more readable and unambiguous?"},{"owner":{"account_id":27695576,"reputation":3,"user_id":21141382,"display_name":"Markus"},"score":0,"creation_date":1676029390,"post_id":75337406,"comment_id":133059553,"body_markdown":"@OleV.V. this is how date is stored on the backend, users are seeing in different format","body":"@OleV.V. this is how date is stored on the backend, users are seeing in different format"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1676030742,"post_id":75337406,"comment_id":133059962,"body_markdown":"That explains, or halfway, thanks. It’s also a non-recommended format for storage. If your storage doesn’t directly support a date type, I recommend storing as a string in [ISO 8601 format](https://en.wikipedia.org/wiki/ISO_8601), for example -- yes the format you have already got! `2023-02-01`.","body":"That explains, or halfway, thanks. It’s also a non-recommended format for storage. If your storage doesn’t directly support a date type, I recommend storing as a string in <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601 format</a>, for example -- yes the format you have already got! <code>2023-02-01</code>."}],"answers":[{"tags":[],"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1675436332,"creation_date":1675436332,"answer_id":75337462,"question_id":75337406,"body_markdown":"`SimpleDateFormat` is legacy now, try to use the modern `java.time` library instead:\r\n\r\n    String newStringDate = LocalDate.parse(&quot;2023-02-01&quot;)\r\n            .format(DateTimeFormatter.ofPattern(&quot;MMdduuuu&quot;));","title":"Convert Date string into another string with different format","body":"<p><code>SimpleDateFormat</code> is legacy now, try to use the modern <code>java.time</code> library instead:</p>\n<pre><code>String newStringDate = LocalDate.parse(&quot;2023-02-01&quot;)\n        .format(DateTimeFormatter.ofPattern(&quot;MMdduuuu&quot;));\n</code></pre>\n"}],"owner":{"account_id":27695576,"reputation":3,"user_id":21141382,"display_name":"Markus"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75337462,"answer_count":1,"score":0,"last_activity_date":1675448820,"creation_date":1675436022,"question_id":75337406,"body_markdown":"I&#39;m quite new to the Java and for the use case I would like to know how to convert String &quot;2023-02-01&quot; into &quot;02012023&quot;\r\nI had troubles understanding the correct usage of SimpleDateFormat for this case\r\n\r\nSo far I tried nothing","title":"Convert Date string into another string with different format","body":"<p>I'm quite new to the Java and for the use case I would like to know how to convert String &quot;2023-02-01&quot; into &quot;02012023&quot;\nI had troubles understanding the correct usage of SimpleDateFormat for this case</p>\n<p>So far I tried nothing</p>\n"},{"tags":["java","spring-boot","aws-ssm"],"comments":[{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":0,"creation_date":1675450693,"post_id":75339656,"comment_id":132939269,"body_markdown":"Your best bet is to create an IAM policy that gives access to Secret Manager from wherever you&#39;re deploying your spring-boot jar to.  See https://docs.aws.amazon.com/secretsmanager/latest/userguide/auth-and-access_examples.html","body":"Your best bet is to create an IAM policy that gives access to Secret Manager from wherever you&#39;re deploying your spring-boot jar to.  See <a href=\"https://docs.aws.amazon.com/secretsmanager/latest/userguide/auth-and-access_examples.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/secretsmanager/latest/userguide/&hellip;</a>"},{"owner":{"account_id":17051052,"reputation":17,"user_id":12336678,"display_name":"Micro"},"score":0,"creation_date":1675825977,"post_id":75339656,"comment_id":133010283,"body_markdown":"thanks for ur reply..@lane.maxwell. unfortunately team was saying that&#39; not an option. would u pls take a look at this https://stackoverflow.com/questions/75368893. Once i get the credentials can i store it or register as @Bean so it will be there till next deployment.","body":"thanks for ur reply..@lane.maxwell. unfortunately team was saying that&#39; not an option. would u pls take a look at this <a href=\"https://stackoverflow.com/questions/75368893\">stackoverflow.com/questions/75368893</a>. Once i get the credentials can i store it or register as @Bean so it will be there till next deployment."}],"owner":{"account_id":17051052,"reputation":17,"user_id":12336678,"display_name":"Micro"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":295,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1675448531,"creation_date":1675448531,"question_id":75339656,"body_markdown":"Currently we are having access key and secret access key stored in properties file and we are able to make all the Aws service calls, now we want to store access key and secret access key in ssm parameter store(we have been asked to store only in ssm not environment variable or system properties). \r\n\r\n\r\n\r\nPlan is to create a bean during bean instantiation which returns AwsCredentialsProvider with the values read from Ssm, not able to find how to make a call to ssm if the access key and secret access key are stored in ssm itself\r\n\r\n\r\nOne way we have tried is, there is a lambda function which returns all these params in ssm(here also same doubt how we can call without credentials).\r\nFor the above scenario there is a lambda authorizer but the token we will get once a req is made to backend and we don&#39;t want to hit lambda function everytime to get those params.\r\n\r\nWould pls someone suggest any way to achieve this or any workaround?","title":"Reading Access Key and Secret Access key from AWS Ssm Parameter Store with Spring Boot 2.1 AWS Java sdk v1","body":"<p>Currently we are having access key and secret access key stored in properties file and we are able to make all the Aws service calls, now we want to store access key and secret access key in ssm parameter store(we have been asked to store only in ssm not environment variable or system properties).</p>\n<p>Plan is to create a bean during bean instantiation which returns AwsCredentialsProvider with the values read from Ssm, not able to find how to make a call to ssm if the access key and secret access key are stored in ssm itself</p>\n<p>One way we have tried is, there is a lambda function which returns all these params in ssm(here also same doubt how we can call without credentials).\nFor the above scenario there is a lambda authorizer but the token we will get once a req is made to backend and we don't want to hit lambda function everytime to get those params.</p>\n<p>Would pls someone suggest any way to achieve this or any workaround?</p>\n"},{"tags":["java","encryption","udp","rc4-cipher"],"comments":[{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":0,"creation_date":1675419248,"post_id":75333589,"comment_id":132929406,"body_markdown":"If I&#39;m reading the code correctly, you always send the entire 65535-byte `buffer` regardless of how much content you actually wanted to send.","body":"If I&#39;m reading the code correctly, you always send the entire 65535-byte <code>buffer</code> regardless of how much content you actually wanted to send."},{"owner":{"account_id":22282664,"reputation":37,"user_id":16510829,"display_name":"Zeffia"},"score":0,"creation_date":1675420767,"post_id":75333589,"comment_id":132929845,"body_markdown":"Altering the size of the byte buffer on the client side does seem to change the decrypted output length, but I&#39;m not sure how to do it to make it fit the size of the response from host...","body":"Altering the size of the byte buffer on the client side does seem to change the decrypted output length, but I&#39;m not sure how to do it to make it fit the size of the response from host..."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1675426660,"post_id":75333589,"comment_id":132931555,"body_markdown":"You&#39;re trying to decrypt the entire packet buffer instead of that fraction of it that contains the actual message. See my comment [HERE](https://stackoverflow.com/questions/75333814/extra-characters-appearing-after-rc4-decryption)","body":"You&#39;re trying to decrypt the entire packet buffer instead of that fraction of it that contains the actual message. See my comment <a href=\"https://stackoverflow.com/questions/75333814/extra-characters-appearing-after-rc4-decryption\">HERE</a>"},{"owner":{"account_id":22282664,"reputation":37,"user_id":16510829,"display_name":"Zeffia"},"score":0,"creation_date":1675430552,"post_id":75333589,"comment_id":132932682,"body_markdown":"@g00se Yeah I figured that out myself after much time spent messing around. Appreciate the help though!","body":"@g00se Yeah I figured that out myself after much time spent messing around. Appreciate the help though!"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1675434157,"post_id":75333589,"comment_id":132933925,"body_markdown":"Then you should have processed the question instead of letting people like me waste their time","body":"Then you should have processed the question instead of letting people like me waste their time"}],"answers":[{"tags":[],"owner":{"account_id":22282664,"reputation":37,"user_id":16510829,"display_name":"Zeffia"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675447817,"creation_date":1675447817,"answer_id":75339565,"question_id":75333589,"body_markdown":"I was trying to decrypt the entire packet buffer instead of that fraction of it that contains the actual message, which resulted in the large wall of text after the actual decrypted message.\r\n\r\nAltering the decrypt function used to instead take in the appropriate packet size fixed the issue.","title":"Unknown ciphertext appended to decrypted plaintext","body":"<p>I was trying to decrypt the entire packet buffer instead of that fraction of it that contains the actual message, which resulted in the large wall of text after the actual decrypted message.</p>\n<p>Altering the decrypt function used to instead take in the appropriate packet size fixed the issue.</p>\n"}],"owner":{"account_id":22282664,"reputation":37,"user_id":16510829,"display_name":"Zeffia"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675447817,"creation_date":1675415406,"question_id":75333589,"body_markdown":"I&#39;m using a RC4 stream cipher to encrypt/decrypt data sent through a Java UDP client-server program. My code works as intended on the host program and displays the correct plaintext and ciphertext, but when the data is sent over to the client via UDP, the ciphertext in particular get a super long ciphertext appended to it. \r\n\r\nThe client is still able to decrypt it properly, I just don&#39;t understand where the random appended ciphertext is coming from.\r\n\r\n**Host program:**\r\n```\r\npublic class Host {\r\n\t\r\n\tprivate static final String ENCRYPTION_ALGORITHM = &quot;ARCFOUR&quot;; // or &quot;RC4&quot;\r\n\r\n\tpublic static void main(String[] args) throws Exception {\r\n\t\t\r\n\t\t//Use Java&#39;s built-in DatagramSocket and DatagramPacket to implement UDP\r\n\t\tDatagramSocket socket = new DatagramSocket(1500); //Create a socket to listen at port 1500\r\n\t    byte[] buf = new byte[65535]; //Byte array to wrap\r\n\t    \r\n\t    //Initialize P, G, H(PW), A variables\r\n\t    BigInteger P = null;\r\n\t    BigInteger G = null;\r\n\t    String hashedPW = null; //Hashed PW using SHA-1\r\n\t    BigInteger A = new BigInteger(10, new Random()); //Random number selected by Alice, maximum limit of 1000\r\n\t    BigInteger aliceKey = null;\r\n\t    \r\n\t    //Read in Diffie-Hellman parameters from param.txt\r\n\t    File file = new File(&quot;param.txt&quot;);\r\n\t    Scanner scan = new Scanner(file);\r\n\t    \r\n\t    //Loop through the entire file\r\n\t\twhile(scan.hasNextLine()) {\r\n\t\t\tint counter = 0;\r\n\t\t\tString delimiter = &quot;,&quot;; //Content in the file is separated using a comma\r\n\r\n\t\t\tString[] tokenValue = scan.nextLine().split(delimiter);\r\n\t\t\t\tfor (String token : tokenValue) {\r\n\t\t\t\t\tswitch (counter++) {\r\n\t\t\t\t\t\tcase 0: //Diffie-Hellman&#39;s P\r\n\t\t\t\t\t\t\tP = new BigInteger(token);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 1: //Diffie-Hellman&#39;s G\r\n\t\t\t\t\t\t\tG = new BigInteger(token);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 2: //Password hashed using SHA-1\r\n\t\t\t\t\t\t\thashedPW = token;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\tscan.close(); //Close scanner to prevent memory leaks\r\n\t\t\r\n\t\taliceKey = G.modPow(A, P); //Calculate g^a mod p to obtain Alice&#39;s public key\r\n\t\t\r\n\t\tbyte[] passwordBytes = hashedPW.getBytes();\r\n\t\t\r\n\t\t//Setting up RC4 stream cipher\r\n\t\tSecretKey secretKey = new SecretKeySpec(passwordBytes, 0 , passwordBytes.length, &quot;RC4&quot;); //Generate secret key using common password\r\n\t\tCipher rc4 = Cipher.getInstance(ENCRYPTION_ALGORITHM);\r\n\t\t\r\n\t    System.out.println(&quot;Parameters successfully read. Listening on port 1500...&quot;);\r\n\r\n\t    //While-loop to keep host running until terminated\r\n\t    while (true) {\r\n\t\t  DatagramPacket message = new DatagramPacket(buf, buf.length); //Create a packet to receive message\r\n\t      socket.receive(message); //Receive the message from Bob\r\n\t      \r\n\t      //If Alice receives a packet with the message &quot;Bob&quot;\r\n\t      if(new String(message.getData(),0,message.getLength()).equals(&quot;Bob&quot;)) {\r\n\t    \t  System.out.println(&quot;Bob has sent a connection request.&quot;);\r\n\t    \t  \r\n\t    \t  String msgToBob = hashedPW + &quot;,&quot; + P + &quot;,&quot; + G + &quot;,&quot; + aliceKey; //H(PW), P, G, G^A mod P\r\n\t    \t  message.setData(encrypt(msgToBob, secretKey, rc4)); //Encrypt data using RC4\r\n\t    \t  \r\n\t    \t  System.out.println(&quot;Ciphertext sent: &quot; + new String(message.getData(),0,message.getLength()));\r\n\t    \t  System.out.println(&quot;Decrypted text: &quot; + decrypt(secretKey, rc4, message.getData()));\r\n\t    \t  \r\n\t    \t  socket.send(message);\r\n\t      }\r\n\t    }\r\n\t}\r\n```\r\n\r\n**Client program:**\r\n```\r\npublic class Client {\r\n\t\r\n\tprivate static final String ENCRYPTION_ALGORITHM = &quot;ARCFOUR&quot;; // or &quot;RC4&quot;\r\n\r\n\tpublic static void main(String[] args) throws Exception {\r\n\t\t\r\n\t\t//Use Java&#39;s built-in DatagramSocket and DatagramPacket to implement UDP\r\n\t\tDatagramSocket socket = new DatagramSocket(); //Create socket object to send data\r\n\t\tbyte[] buffer = new byte[65535];\r\n\t\tsocket.setSoTimeout(5000); //Throw an exception if no data received within 5000ms\r\n\t\t\r\n\t    //Create scanner to grab user input\r\n\t    Scanner input = new Scanner(System.in);\r\n\t    System.out.print(&quot;Please enter the common password: &quot;);\r\n\t    String commonPW = input.nextLine(); //Storing the password\r\n\r\n\t    commonPW = encryptThisString(commonPW); //Hash using SHA-1\r\n\t    byte[] passwordBytes = commonPW.getBytes(); //Convert password to byte-array\r\n\t    \r\n\t\t//Setting up RC4 stream cipher\r\n\t\tSecretKey secretKey = new SecretKeySpec(passwordBytes, 0 , passwordBytes.length, &quot;RC4&quot;); //Generate secret key using common password\r\n        Cipher rc4 = Cipher.getInstance(ENCRYPTION_ALGORITHM);\r\n\t    \r\n        System.out.print(&quot;Enter a message to send to Alice: &quot;);\r\n\t    String bobInput = input.nextLine();\r\n\t    \r\n\t\t//Create packet containing message\r\n\t\tDatagramPacket message = new DatagramPacket(buffer, buffer.length, InetAddress.getByName(&quot;localhost&quot;), 1500);\r\n\t\tmessage.setData(bobInput.getBytes());\r\n\t\tsocket.send(message); //Send message to host\r\n\t\t\r\n\t\t//Create separate packet to receive response (so that its length is big enough to accept)\r\n\t\tDatagramPacket response = new DatagramPacket(buffer, buffer.length);\r\n\t\tsocket.receive(response);\r\n\t\t\r\n\t\tSystem.out.println(&quot;Received from Alice: &quot; + new String(response.getData(),0,response.getLength()));\r\n\t\tSystem.out.println(&quot;Decrypted text: &quot; + decrypt(secretKey, rc4, response.getData()));\r\n\t\t\r\n\t\tsocket.close();\r\n\t}\r\n```\r\nAnd here&#39;s the same methods in both programs used to encrypt/decrypt data:\r\n```\r\nprivate static byte[] encrypt(String plaintext, SecretKey secretKey, Cipher rc4) throws InvalidKeyException, IllegalBlockSizeException, BadPaddingException {\r\n          rc4.init(Cipher.ENCRYPT_MODE, secretKey);\r\n          byte[] plaintextBytes = plaintext.getBytes();\r\n          byte[] ciphertextBytes = rc4.doFinal(plaintextBytes);\r\n          //System.out.println(&quot;RC4 ciphertext base64 encoded: &quot; + Base64.encodeBase64String(ciphertextBytes));\r\n          return ciphertextBytes;\r\n      }\r\n\r\n      private static String decrypt(SecretKey secretKey, Cipher rc4, byte[] ciphertextBytes) throws InvalidKeyException, InvalidAlgorithmParameterException, IllegalBlockSizeException, BadPaddingException {\r\n          rc4.init(Cipher.DECRYPT_MODE, secretKey, rc4.getParameters());\r\n          byte[] byteDecryptedText = rc4.doFinal(ciphertextBytes);\r\n          String plaintextBack = new String(byteDecryptedText);\r\n          return plaintextBack;\r\n      }\r\n```\r\n\r\nThe console output for host:\r\n\r\n&gt; Parameters successfully read. Listening on port 1500...\r\n&gt; \r\n&gt; Bob has sent a connection request.\r\n&gt; \r\n&gt; q?Md`|-A????&#177;?h??♥?a????h&#182;^O&#160;e&#198;&#225;&lt;&#177;?&#255;.♂/?9&#167;}5?aaJj??f&#235;???7&#243;Ip&#167;T▬??&#241;k??l&#252;m&#181;&#197;⌂&#187;??=L?r&#250;k?&#167;}x☻?.☻j:A&#183;&#230;u?8&#235;∟2&#228;q*k∟♥?C?$??VZI&#249;?!0|?&#225;=I?X{♥&#178;&quot;‼&#176;▲|c??2&#178;ht??&#178;☻P=?T?&quot;?,9?ƒZ▼?X??M=d\r\n&gt; u&#246;&#229;&#228;$M☼&#241;?&quot;♂♀&#246;&#171;2&amp;??SC?&#238;?&#197;?|?#?B??⌂b9?♀??T?l&#198;ƒ&#238;\r\n&gt; D^&#237;?&#224;&#234;oO3{N3♦^L&#178;&#188;?=&#235;??-?|?O{???B?♣\r\n&gt; #&#198;??&#189;.&#236;V:&#243;?&#177;]&#220;4▲?|rA&#163;jEGJ&#233;??♠?$K&quot;&#39;=&#171;??D&#187;m←&#255;4?J↕&#165;&#167;y&#182;[&#163;↨?U&#172;y-?&#255;p&#235;&#241;&#249;&#171;←x→`↨[&#178;&#228;ueN???↨}☻zƒy??si??z?U[q??Q\r\n&gt; ?+?&#247;&#161;,7&#220;?S{6?l???&#178;??↨?%?+&#252;&#225;???\r\n&gt; &#39;&#189;?J??&#171;?&#182;?T.&#177;@=Q!&#243;??&gt;&#189;&#235;Y2?P☻a♂**?iLO???☺⌂♫?&#241;=N?&#246;?k$4??&#228;&#238;&#243;&#237;←?si?↓&#236;&#220;g∟Z6↕?&#181;&#225;&#249;&#189;R&#251;▲b?9&#181;,???g?6&#249;?→nv?&#251;y&#181;&#246;?M&#191;U♥&#226;?\r\n&gt; e[?V?Z&#244;$&#191;?&#162;&#244;q♥j????G??|?~0&#199;GZ?z♥68&amp;MoK??v&#183;$&lt;`?&#226;Z^??Ys??[g??    \r\n&gt; &#189;&#229;\\▬&#223;&#191;?&#183;↔!N???.?&#39;?AD?Vg?&#235;n&#162;-6&#244;\r\n&gt; ???0,&#246;???}l&#228;??Y?D?X&#241;&#172;?&#186;??&#178;☺r&#165;&#239;??1?#pq?►p?▬??FM&#220;-m&gt;&#223;&#241;&#232;,?&#161;r??&#181;&#177;@?C?&#182;&#163;?&#191;→?oi&#160;O??♥&#243;e&#242;M&#163;?N\r\n&gt; &#235;_?▲&#232;v&#161;&#239;?&#220;(?&#246;W♥w&#178;&#249;]q???e♠&#224;♠&#237;&#244;?&#237;^??QM?^?5&#233;&#209;??V(???&#160;V?`&gt;&#232;?&#224;%?D-r∟&#220;1??   \r\n&gt; N↑??&#183;*?A?tT&#223;&#230;i?[??&#250;&#172;c&#162;ƒl??↓▲&#255;ie→?♠tL&#161;??&#39;&#209;e&#247;∟ ƒ&#237;?♠↑4 &#196;?R;}?:&#39;&#161;!n6◄▲\r\n&gt; ☻&#39;??r?I???↨&#172;z?→X&#196;??☼&#196;{&#241;:&#226;⌂$&#234;{????&#224;&#223;?FR&#237;???☻&#170;3?#9‼/&#191;?$/&#239;?{&#231;      \r\n&gt; &#246;&#251;u&#189;Rz?▼?&#244;,??◄K[P∟►&#167;PS??))?&#226;?d▲&#237;♥?9??&#220;?&#161;?       &#171;&#171;+?☼☺?&lt;&lt;&#176;n&#188;?♂%&#243;&#238;↔&#250;&#246;g\r\n&gt; \r\n&gt; Decrypted text:\r\n&gt; 62a91401ef53536f5e4a282ca75ce2505b7f8dfe,133369106234410027239548844977121529173266794839390492022055432118963330212454946189658890281117740419231366102782626716256746218028068963594259491015958826219687167085932845323487318056081767660358673429760060452507829995471137991271021787608959982667244524929925606086596447565032707095625628293300812984091,15635507126291796032175381295261956049808038047523713881770866167494167302066120851790523759612392465402233123769308400911864440257625348397936936978922581645934310469147780992255584968935730234568508327975497520199946653504137607154138430285573487119797346741445139288140860073660395495603540644148828628224,96950246366083756365146382678616471348261490848687079335489625506702434220187716384031671233394087317377823909861019537627642960196032766557467991541000545780675424518198042877768900211198791646583260247888450303207379340549434158094990174523043323964083031376798844776809887666868545542060025549549427788304\r\n\r\nOutput for Client is similar except for the decrypted plaintext:\r\n\r\n&gt; Please enter the common password: Popcorn\r\n&gt; \r\n&gt; Enter a message to send to Alice: Bob\r\n&gt; \r\n&gt; q?Md`|-A????&#177;?h??♥?a????h&#182;^O&#160;e&#198;&#225;&lt;&#177;?&#255;.♂/?9&#167;}5?aaJj??f&#235;???7&#243;Ip&#167;T▬??&#241;k??l&#252;m&#181;&#197;⌂&#187;??=L?r&#250;k?&#167;}x☻?.☻j:A&#183;&#230;u?8&#235;∟2&#228;q*k∟♥?C?$??VZI&#249;?!0|?&#225;=I?X{♥&#178;&quot;‼&#176;▲|c??2&#178;ht??&#178;☻P=?T?&quot;?,9?ƒZ▼?X??M=d\r\n&gt; u&#246;&#229;&#228;$M☼&#241;?&quot;♂♀&#246;&#171;2&amp;??SC?&#238;?&#197;?|?#?B??⌂b9?♀??T?l&#198;ƒ&#238;\r\n&gt; D^&#237;?&#224;&#234;oO3{N3♦^L&#178;&#188;?=&#235;??-?|?O{???B?♣\r\n&gt; #&#198;??&#189;.&#236;V:&#243;?&#177;]&#220;4▲?|rA&#163;jEGJ&#233;??♠?$K&quot;&#39;=&#171;??D&#187;m←&#255;4?J↕&#165;&#167;y&#182;[&#163;↨?U&#172;y-?&#255;p&#235;&#241;&#249;&#171;←x→`↨[&#178;&#228;ueN???↨}☻zƒy??si??z?U[q??Q\r\n&gt; ?+?&#247;&#161;,7&#220;?S{6?l???&#178;??↨?%?+&#252;&#225;???\r\n&gt; &#39;&#189;?J??&#171;?&#182;?T.&#177;@=Q!&#243;??&gt;&#189;&#235;Y2?P☻a♂**?iLO???☺⌂♫?&#241;=N?&#246;?k$4??&#228;&#238;&#243;&#237;←?si?↓&#236;&#220;g∟Z6↕?&#181;&#225;&#249;&#189;R&#251;▲b?9&#181;,???g?6&#249;?→nv?&#251;y&#181;&#246;?M&#191;U♥&#226;?\r\n&gt; e[?V?Z&#244;$&#191;?&#162;&#244;q♥j????G??|?~0&#199;GZ?z♥68&amp;MoK??v&#183;$&lt;`?&#226;Z^??Ys??[g??    \r\n&gt; &#189;&#229;\\▬&#223;&#191;?&#183;↔!N???.?&#39;?AD?Vg?&#235;n&#162;-6&#244;\r\n&gt; ???0,&#246;???}l&#228;??Y?D?X&#241;&#172;?&#186;??&#178;☺r&#165;&#239;??1?#pq?►p?▬??FM&#220;-m&gt;&#223;&#241;&#232;,?&#161;r??&#181;&#177;@?C?&#182;&#163;?&#191;→?oi&#160;O??♥&#243;e&#242;M&#163;?N\r\n&gt; &#235;_?▲&#232;v&#161;&#239;?&#220;(?&#246;W♥w&#178;&#249;]q???e♠&#224;♠&#237;&#244;?&#237;^??QM?^?5&#233;&#209;??V(???&#160;V?`&gt;&#232;?&#224;%?D-r∟&#220;1??   \r\n&gt; N↑??&#183;*?A?tT&#223;&#230;i?[??&#250;&#172;c&#162;ƒl??↓▲&#255;ie→?♠tL&#161;??&#39;&#209;e&#247;∟ ƒ&#237;?♠↑4 &#196;?R;}?:&#39;&#161;!n6◄▲\r\n&gt; ☻&#39;??r?I???↨&#172;z?→X&#196;??☼&#196;{&#241;:&#226;⌂$&#234;{????&#224;&#223;?FR&#237;???☻&#170;3?#9‼/&#191;?$/&#239;?{&#231;      \r\n&gt; &#246;&#251;u&#189;Rz?▼?&#244;,??◄K[P∟►&#167;PS??))?&#226;?d▲&#237;♥?9??&#220;?&#161;?       &#171;&#171;+?☼☺?&lt;&lt;&#176;n&#188;?♂%&#243;&#238;↔&#250;&#246;g\r\n&gt; \r\n&gt; Decrypted text:\r\n&gt; 62a91401ef53536f5e4a282ca75ce2505b7f8dfe,133369106234410027239548844977121529173266794839390492022055432118963330212454946189658890281117740419231366102782626716256746218028068963594259491015958826219687167085932845323487318056081767660358673429760060452507829995471137991271021787608959982667244524929925606086596447565032707095625628293300812984091,15635507126291796032175381295261956049808038047523713881770866167494167302066120851790523759612392465402233123769308400911864440257625348397936936978922581645934310469147780992255584968935730234568508327975497520199946653504137607154138430285573487119797346741445139288140860073660395495603540644148828628224,96950246366083756365146382678616471348261490848687079335489625506702434220187716384031671233394087317377823909861019537627642960196032766557467991541000545780675424518198042877768900211198791646583260247888450303207379340549434158094990174523043323964083031376798844776809887666868545542060025549549427788304?&#250;mB&#189;&#196;????←&#234;???►\\d⌂h♦4LM♣☼&#187;??*&#209;?&#236;?&#231;t&#186;???&#236;?.◄☺????xK♥??&#196;4&#246;&#243;↑↨\r\n&gt; 4?&#225;☼m&#235;Q&#171;a\r\n\r\nThe actual output is much longer for the client program, I didn&#39;t copy the entire appended ciphertext. Not sure if it&#39;s relevant, but the console makes some Windows notification/error noise when it runs as well, although it doesn&#39;t actually give any compilation errors. I&#39;m running my program using command prompt.\r\n\r\nI don&#39;t think the issue lies with the decryption as I tested with some text on both the host and client programs and I managed to get the same decrypted plaintext just fine. Only when I send the data over UDP it causes this issue it seems.\r\n\r\n*The text infront of the original ciphertext such as &quot;Ciphertext sent: &quot; gets omitted in the output as well.*\r\n\r\nWhat am I missing?","title":"Unknown ciphertext appended to decrypted plaintext","body":"<p>I'm using a RC4 stream cipher to encrypt/decrypt data sent through a Java UDP client-server program. My code works as intended on the host program and displays the correct plaintext and ciphertext, but when the data is sent over to the client via UDP, the ciphertext in particular get a super long ciphertext appended to it.</p>\n<p>The client is still able to decrypt it properly, I just don't understand where the random appended ciphertext is coming from.</p>\n<p><strong>Host program:</strong></p>\n<pre><code>public class Host {\n    \n    private static final String ENCRYPTION_ALGORITHM = &quot;ARCFOUR&quot;; // or &quot;RC4&quot;\n\n    public static void main(String[] args) throws Exception {\n        \n        //Use Java's built-in DatagramSocket and DatagramPacket to implement UDP\n        DatagramSocket socket = new DatagramSocket(1500); //Create a socket to listen at port 1500\n        byte[] buf = new byte[65535]; //Byte array to wrap\n        \n        //Initialize P, G, H(PW), A variables\n        BigInteger P = null;\n        BigInteger G = null;\n        String hashedPW = null; //Hashed PW using SHA-1\n        BigInteger A = new BigInteger(10, new Random()); //Random number selected by Alice, maximum limit of 1000\n        BigInteger aliceKey = null;\n        \n        //Read in Diffie-Hellman parameters from param.txt\n        File file = new File(&quot;param.txt&quot;);\n        Scanner scan = new Scanner(file);\n        \n        //Loop through the entire file\n        while(scan.hasNextLine()) {\n            int counter = 0;\n            String delimiter = &quot;,&quot;; //Content in the file is separated using a comma\n\n            String[] tokenValue = scan.nextLine().split(delimiter);\n                for (String token : tokenValue) {\n                    switch (counter++) {\n                        case 0: //Diffie-Hellman's P\n                            P = new BigInteger(token);\n                            break;\n                        case 1: //Diffie-Hellman's G\n                            G = new BigInteger(token);\n                            break;\n                        case 2: //Password hashed using SHA-1\n                            hashedPW = token;\n                            break;\n                    }\n                }\n            }\n        scan.close(); //Close scanner to prevent memory leaks\n        \n        aliceKey = G.modPow(A, P); //Calculate g^a mod p to obtain Alice's public key\n        \n        byte[] passwordBytes = hashedPW.getBytes();\n        \n        //Setting up RC4 stream cipher\n        SecretKey secretKey = new SecretKeySpec(passwordBytes, 0 , passwordBytes.length, &quot;RC4&quot;); //Generate secret key using common password\n        Cipher rc4 = Cipher.getInstance(ENCRYPTION_ALGORITHM);\n        \n        System.out.println(&quot;Parameters successfully read. Listening on port 1500...&quot;);\n\n        //While-loop to keep host running until terminated\n        while (true) {\n          DatagramPacket message = new DatagramPacket(buf, buf.length); //Create a packet to receive message\n          socket.receive(message); //Receive the message from Bob\n          \n          //If Alice receives a packet with the message &quot;Bob&quot;\n          if(new String(message.getData(),0,message.getLength()).equals(&quot;Bob&quot;)) {\n              System.out.println(&quot;Bob has sent a connection request.&quot;);\n              \n              String msgToBob = hashedPW + &quot;,&quot; + P + &quot;,&quot; + G + &quot;,&quot; + aliceKey; //H(PW), P, G, G^A mod P\n              message.setData(encrypt(msgToBob, secretKey, rc4)); //Encrypt data using RC4\n              \n              System.out.println(&quot;Ciphertext sent: &quot; + new String(message.getData(),0,message.getLength()));\n              System.out.println(&quot;Decrypted text: &quot; + decrypt(secretKey, rc4, message.getData()));\n              \n              socket.send(message);\n          }\n        }\n    }\n</code></pre>\n<p><strong>Client program:</strong></p>\n<pre><code>public class Client {\n    \n    private static final String ENCRYPTION_ALGORITHM = &quot;ARCFOUR&quot;; // or &quot;RC4&quot;\n\n    public static void main(String[] args) throws Exception {\n        \n        //Use Java's built-in DatagramSocket and DatagramPacket to implement UDP\n        DatagramSocket socket = new DatagramSocket(); //Create socket object to send data\n        byte[] buffer = new byte[65535];\n        socket.setSoTimeout(5000); //Throw an exception if no data received within 5000ms\n        \n        //Create scanner to grab user input\n        Scanner input = new Scanner(System.in);\n        System.out.print(&quot;Please enter the common password: &quot;);\n        String commonPW = input.nextLine(); //Storing the password\n\n        commonPW = encryptThisString(commonPW); //Hash using SHA-1\n        byte[] passwordBytes = commonPW.getBytes(); //Convert password to byte-array\n        \n        //Setting up RC4 stream cipher\n        SecretKey secretKey = new SecretKeySpec(passwordBytes, 0 , passwordBytes.length, &quot;RC4&quot;); //Generate secret key using common password\n        Cipher rc4 = Cipher.getInstance(ENCRYPTION_ALGORITHM);\n        \n        System.out.print(&quot;Enter a message to send to Alice: &quot;);\n        String bobInput = input.nextLine();\n        \n        //Create packet containing message\n        DatagramPacket message = new DatagramPacket(buffer, buffer.length, InetAddress.getByName(&quot;localhost&quot;), 1500);\n        message.setData(bobInput.getBytes());\n        socket.send(message); //Send message to host\n        \n        //Create separate packet to receive response (so that its length is big enough to accept)\n        DatagramPacket response = new DatagramPacket(buffer, buffer.length);\n        socket.receive(response);\n        \n        System.out.println(&quot;Received from Alice: &quot; + new String(response.getData(),0,response.getLength()));\n        System.out.println(&quot;Decrypted text: &quot; + decrypt(secretKey, rc4, response.getData()));\n        \n        socket.close();\n    }\n</code></pre>\n<p>And here's the same methods in both programs used to encrypt/decrypt data:</p>\n<pre><code>private static byte[] encrypt(String plaintext, SecretKey secretKey, Cipher rc4) throws InvalidKeyException, IllegalBlockSizeException, BadPaddingException {\n          rc4.init(Cipher.ENCRYPT_MODE, secretKey);\n          byte[] plaintextBytes = plaintext.getBytes();\n          byte[] ciphertextBytes = rc4.doFinal(plaintextBytes);\n          //System.out.println(&quot;RC4 ciphertext base64 encoded: &quot; + Base64.encodeBase64String(ciphertextBytes));\n          return ciphertextBytes;\n      }\n\n      private static String decrypt(SecretKey secretKey, Cipher rc4, byte[] ciphertextBytes) throws InvalidKeyException, InvalidAlgorithmParameterException, IllegalBlockSizeException, BadPaddingException {\n          rc4.init(Cipher.DECRYPT_MODE, secretKey, rc4.getParameters());\n          byte[] byteDecryptedText = rc4.doFinal(ciphertextBytes);\n          String plaintextBack = new String(byteDecryptedText);\n          return plaintextBack;\n      }\n</code></pre>\n<p>The console output for host:</p>\n<blockquote>\n<p>Parameters successfully read. Listening on port 1500...</p>\n<p>Bob has sent a connection request.</p>\n<p>q?Md<code>|-A????±?h??♥?a????h¶^O eÆá&lt;±?ÿ.♂/?9§}5?aaJj??fë???7óIp§T▬??ñk??lümµÅ⌂»??=L?rúk?§}x☻?.☻j:A·æu?8ë∟2äq*k∟♥?C?$??VZIù?!0|?á=I?X{♥²&quot;‼°▲|c??2²ht??²☻P=?T?&quot;?,9?ƒZ▼?X??M=d uöåä$M☼ñ?&quot;♂♀ö«2&amp;??SC?î?Å?|?#?B??⌂b9?♀??T?lÆƒî D^í?àêoO3{N3♦^L²¼?=ë??-?|?O{???B?♣ #Æ??½.ìV:ó?±]Ü4▲?|rA£jEGJé??♠?$K&quot;'=«??D»m←ÿ4?J↕¥§y¶[£↨?U¬y-?ÿpëñù«←x→</code>↨[²äueN???↨}☻zƒy??si??z?U[q??Q\n?+?÷¡,7Ü?S{6?l???²??↨?%?+üá???\n'½?J??«?¶?T.±@=Q!ó??&gt;½ëY2?P☻a♂**?iLO???☺⌂♫?ñ=N?ö?k$4??äîóí←?si?↓ìÜg∟Z6↕?µáù½Rû▲b?9µ,???g?6ù?→nv?ûyµö?M¿U♥â?\ne[?V?Zô$¿?¢ôq♥j????G??|?~0ÇGZ?z♥68&amp;MoK??v·$&lt;<code>?âZ^??Ys??[g??     ½å\\▬ß¿?·↔!N???.?'?AD?Vg?ën¢-6ô ???0,ö???}lä??Y?D?Xñ¬?º??²☺r¥ï??1?#pq?►p?▬??FMÜ-m&gt;ßñè,?¡r??µ±@?C?¶£?¿→?oi O??♥óeòM£?N ë_?▲èv¡ï?Ü(?öW♥w²ù]q???e♠à♠íô?í^??QM?^?5éÑ??V(??? V?</code>&gt;è?à%?D-r∟Ü1??<br />\nN↑??·*?A?tTßæi?[??ú¬c¢ƒl??↓▲ÿie→?♠tL¡??'Ñe÷∟ ƒí?♠↑4 Ä?R;}?:'¡!n6◄▲\n☻'??r?I???↨¬z?→XÄ??☼Ä{ñ:â⌂$ê{????àß?FRí???☻ª3?#9‼/¿?$/ï?{ç<br />\nöûu½Rz?▼?ô,??◄K[P∟►§PS??))?â?d▲í♥?9??Ü?¡?       ««+?☼☺?&lt;&lt;°n¼?♂%óî↔úög</p>\n<p>Decrypted text:\n62a91401ef53536f5e4a282ca75ce2505b7f8dfe,133369106234410027239548844977121529173266794839390492022055432118963330212454946189658890281117740419231366102782626716256746218028068963594259491015958826219687167085932845323487318056081767660358673429760060452507829995471137991271021787608959982667244524929925606086596447565032707095625628293300812984091,15635507126291796032175381295261956049808038047523713881770866167494167302066120851790523759612392465402233123769308400911864440257625348397936936978922581645934310469147780992255584968935730234568508327975497520199946653504137607154138430285573487119797346741445139288140860073660395495603540644148828628224,96950246366083756365146382678616471348261490848687079335489625506702434220187716384031671233394087317377823909861019537627642960196032766557467991541000545780675424518198042877768900211198791646583260247888450303207379340549434158094990174523043323964083031376798844776809887666868545542060025549549427788304</p>\n</blockquote>\n<p>Output for Client is similar except for the decrypted plaintext:</p>\n<blockquote>\n<p>Please enter the common password: Popcorn</p>\n<p>Enter a message to send to Alice: Bob</p>\n<p>q?Md<code>|-A????±?h??♥?a????h¶^O eÆá&lt;±?ÿ.♂/?9§}5?aaJj??fë???7óIp§T▬??ñk??lümµÅ⌂»??=L?rúk?§}x☻?.☻j:A·æu?8ë∟2äq*k∟♥?C?$??VZIù?!0|?á=I?X{♥²&quot;‼°▲|c??2²ht??²☻P=?T?&quot;?,9?ƒZ▼?X??M=d uöåä$M☼ñ?&quot;♂♀ö«2&amp;??SC?î?Å?|?#?B??⌂b9?♀??T?lÆƒî D^í?àêoO3{N3♦^L²¼?=ë??-?|?O{???B?♣ #Æ??½.ìV:ó?±]Ü4▲?|rA£jEGJé??♠?$K&quot;'=«??D»m←ÿ4?J↕¥§y¶[£↨?U¬y-?ÿpëñù«←x→</code>↨[²äueN???↨}☻zƒy??si??z?U[q??Q\n?+?÷¡,7Ü?S{6?l???²??↨?%?+üá???\n'½?J??«?¶?T.±@=Q!ó??&gt;½ëY2?P☻a♂**?iLO???☺⌂♫?ñ=N?ö?k$4??äîóí←?si?↓ìÜg∟Z6↕?µáù½Rû▲b?9µ,???g?6ù?→nv?ûyµö?M¿U♥â?\ne[?V?Zô$¿?¢ôq♥j????G??|?~0ÇGZ?z♥68&amp;MoK??v·$&lt;<code>?âZ^??Ys??[g??     ½å\\▬ß¿?·↔!N???.?'?AD?Vg?ën¢-6ô ???0,ö???}lä??Y?D?Xñ¬?º??²☺r¥ï??1?#pq?►p?▬??FMÜ-m&gt;ßñè,?¡r??µ±@?C?¶£?¿→?oi O??♥óeòM£?N ë_?▲èv¡ï?Ü(?öW♥w²ù]q???e♠à♠íô?í^??QM?^?5éÑ??V(??? V?</code>&gt;è?à%?D-r∟Ü1??<br />\nN↑??·*?A?tTßæi?[??ú¬c¢ƒl??↓▲ÿie→?♠tL¡??'Ñe÷∟ ƒí?♠↑4 Ä?R;}?:'¡!n6◄▲\n☻'??r?I???↨¬z?→XÄ??☼Ä{ñ:â⌂$ê{????àß?FRí???☻ª3?#9‼/¿?$/ï?{ç<br />\nöûu½Rz?▼?ô,??◄K[P∟►§PS??))?â?d▲í♥?9??Ü?¡?       ««+?☼☺?&lt;&lt;°n¼?♂%óî↔úög</p>\n<p>Decrypted text:\n62a91401ef53536f5e4a282ca75ce2505b7f8dfe,133369106234410027239548844977121529173266794839390492022055432118963330212454946189658890281117740419231366102782626716256746218028068963594259491015958826219687167085932845323487318056081767660358673429760060452507829995471137991271021787608959982667244524929925606086596447565032707095625628293300812984091,15635507126291796032175381295261956049808038047523713881770866167494167302066120851790523759612392465402233123769308400911864440257625348397936936978922581645934310469147780992255584968935730234568508327975497520199946653504137607154138430285573487119797346741445139288140860073660395495603540644148828628224,96950246366083756365146382678616471348261490848687079335489625506702434220187716384031671233394087317377823909861019537627642960196032766557467991541000545780675424518198042877768900211198791646583260247888450303207379340549434158094990174523043323964083031376798844776809887666868545542060025549549427788304?úmB½Ä????←ê???►\\d⌂h♦4LM♣☼»??*Ñ?ì?çtº???ì?.◄☺????xK♥??Ä4öó↑↨\n4?á☼mëQ«a</p>\n</blockquote>\n<p>The actual output is much longer for the client program, I didn't copy the entire appended ciphertext. Not sure if it's relevant, but the console makes some Windows notification/error noise when it runs as well, although it doesn't actually give any compilation errors. I'm running my program using command prompt.</p>\n<p>I don't think the issue lies with the decryption as I tested with some text on both the host and client programs and I managed to get the same decrypted plaintext just fine. Only when I send the data over UDP it causes this issue it seems.</p>\n<p><em>The text infront of the original ciphertext such as &quot;Ciphertext sent: &quot; gets omitted in the output as well.</em></p>\n<p>What am I missing?</p>\n"},{"tags":["java","android","android-studio","kotlin"],"answers":[{"comments":[{"owner":{"account_id":5681081,"reputation":5785,"user_id":10082297,"display_name":"Henry Twist"},"score":0,"creation_date":1616509333,"post_id":66763680,"comment_id":118020413,"body_markdown":"This can only be thrown at runtime?","body":"This can only be thrown at runtime?"},{"owner":{"account_id":14313475,"reputation":88,"user_id":10338991,"display_name":"Ahmet Korkmaz"},"score":0,"creation_date":1616510054,"post_id":66763680,"comment_id":118020804,"body_markdown":"Yes. Here is compiler time : Log.e(String, String) (error)\nLog.w(String, String) (warning)\nLog.i(String, String) (information)\nLog.d(String, String) (debug)\nLog.v(String, String) (verbose)","body":"Yes. Here is compiler time : Log.e(String, String) (error) Log.w(String, String) (warning) Log.i(String, String) (information) Log.d(String, String) (debug) Log.v(String, String) (verbose)"},{"owner":{"account_id":5703575,"reputation":483,"user_id":14251124,"display_name":"Vym"},"score":0,"creation_date":1616511251,"post_id":66763680,"comment_id":118021431,"body_markdown":"@AhmetKorkmaz Please clarify. I assume that these are Logcat methods and I was pretty sure they&#39;re useful for logging at runtime only. And yes, I&#39;m also certain that `Exception`s are used for runtime errors.","body":"@AhmetKorkmaz Please clarify. I assume that these are Logcat methods and I was pretty sure they&#39;re useful for logging at runtime only. And yes, I&#39;m also certain that <code>Exception</code>s are used for runtime errors."},{"owner":{"account_id":5681081,"reputation":5785,"user_id":10082297,"display_name":"Henry Twist"},"score":0,"creation_date":1616516147,"post_id":66763680,"comment_id":118024127,"body_markdown":"Yes logging is also runtime, I have no experience in Swift but I presume the OP is specifically looking to generate compiler warnings.","body":"Yes logging is also runtime, I have no experience in Swift but I presume the OP is specifically looking to generate compiler warnings."},{"owner":{"account_id":5703575,"reputation":483,"user_id":14251124,"display_name":"Vym"},"score":0,"creation_date":1616539200,"post_id":66763680,"comment_id":118033699,"body_markdown":"@HenryTwist Your assumptions are, indeed, correct.","body":"@HenryTwist Your assumptions are, indeed, correct."}],"tags":[],"owner":{"account_id":14313475,"reputation":88,"user_id":10338991,"display_name":"Ahmet Korkmaz"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1616504485,"creation_date":1616504485,"answer_id":66763680,"question_id":66752057,"body_markdown":"If you are talking about throwing an exception: `throw new Exception(&quot;Exception message&quot;);` this is for Java. For Kotlin it&#39;s similar with a little change :[Kotlin nothing exception][1]\r\n\r\n\r\n  [1]: https://kotlinlang.org/docs/exceptions.html#the-nothing-type","title":"Can you force a compiler warning or error in Kotlin/Java?","body":"<p>If you are talking about throwing an exception: <code>throw new Exception(&quot;Exception message&quot;);</code> this is for Java. For Kotlin it's similar with a little change :<a href=\"https://kotlinlang.org/docs/exceptions.html#the-nothing-type\" rel=\"nofollow noreferrer\">Kotlin nothing exception</a></p>\n"},{"comments":[{"owner":{"account_id":5703575,"reputation":483,"user_id":14251124,"display_name":"Vym"},"score":0,"creation_date":1675467983,"post_id":75339551,"comment_id":132942797,"body_markdown":"Better late than never! That&#39;s what I ended up doing, too. However, I found that Android Studio is sometimes unreliable in picking up TODOs and FIXMEs scattered around the codebase. Plus, it&#39;s easy to forget to look into the TODO tab when you don&#39;t have a habit of doing so. Still, this does not allow to produce errors. Just as well, `#error`s in Swift can have flexible conditions; for example, you can wrap it with `#if DEBUG`/`#endif` so that it only produces a compiler error when building a Release version). I guess some fiddling with Gradle or kapt could replicate this feature (never tried).","body":"Better late than never! That&#39;s what I ended up doing, too. However, I found that Android Studio is sometimes unreliable in picking up TODOs and FIXMEs scattered around the codebase. Plus, it&#39;s easy to forget to look into the TODO tab when you don&#39;t have a habit of doing so. Still, this does not allow to produce errors. Just as well, <code>#error</code>s in Swift can have flexible conditions; for example, you can wrap it with <code>#if DEBUG</code>/<code>#endif</code> so that it only produces a compiler error when building a Release version). I guess some fiddling with Gradle or kapt could replicate this feature (never tried)."},{"owner":{"account_id":7557680,"reputation":2844,"user_id":5736633,"accept_rate":71,"display_name":"vatbub"},"score":0,"creation_date":1675548481,"post_id":75339551,"comment_id":132954122,"body_markdown":"Also, if you use a linter (like KtLint), you could create a rule that triggers on TODOs and FIXMEs. Otherwise, if you have some sort of issue-, bug- or ticket-system, you could instead just create a ticket and assign it to yourself, reminding you about the todo :)","body":"Also, if you use a linter (like KtLint), you could create a rule that triggers on TODOs and FIXMEs. Otherwise, if you have some sort of issue-, bug- or ticket-system, you could instead just create a ticket and assign it to yourself, reminding you about the todo :)"}],"tags":[],"owner":{"account_id":7557680,"reputation":2844,"user_id":5736633,"accept_rate":71,"display_name":"vatbub"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675447704,"creation_date":1675447704,"answer_id":75339551,"question_id":66752057,"body_markdown":"I know I&#39;m late to the party here, but for that specific case, `TODO` comments are great. They are just like any other comment, but Android Studio (and IntelliJ for that matter) will highlight them differently and there&#39;s a special TODO window available that shows all the TODO-comments in the file or project. Here&#39;s an example:\r\n\r\n    // TODO This will be hightlighted by Android Studio","title":"Can you force a compiler warning or error in Kotlin/Java?","body":"<p>I know I'm late to the party here, but for that specific case, <code>TODO</code> comments are great. They are just like any other comment, but Android Studio (and IntelliJ for that matter) will highlight them differently and there's a special TODO window available that shows all the TODO-comments in the file or project. Here's an example:</p>\n<pre><code>// TODO This will be hightlighted by Android Studio\n</code></pre>\n"}],"owner":{"account_id":5703575,"reputation":483,"user_id":14251124,"display_name":"Vym"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1145,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1675447704,"creation_date":1616438574,"question_id":66752057,"body_markdown":"Having a background in iOS development, I&#39;m quite used to using this directive for intentionally triggering a compiler warning (in Swift):\r\n\r\n```swift\r\n#warning(&quot;This will output as a warning during compilation&quot;)\r\n```\r\n\r\nor this one to trigger an error:\r\n\r\n```swift\r\n#error(&quot;This will output as an error during compilation&quot;)\r\n```\r\n\r\nThis is very useful if, for example, I need to defer attention to the code fragment in question, or when using conditional compiler directives. I really miss this feature during Android development (in Kotlin, preferably, but I&#39;m also curious about a similar Java feature). \r\n\r\nI&#39;d like to know if there&#39;s at least an alternative for doing this, especially if it&#39;s integrated well into Android Studio and the compiler.","title":"Can you force a compiler warning or error in Kotlin/Java?","body":"<p>Having a background in iOS development, I'm quite used to using this directive for intentionally triggering a compiler warning (in Swift):</p>\n<pre class=\"lang-swift prettyprint-override\"><code>#warning(&quot;This will output as a warning during compilation&quot;)\n</code></pre>\n<p>or this one to trigger an error:</p>\n<pre class=\"lang-swift prettyprint-override\"><code>#error(&quot;This will output as an error during compilation&quot;)\n</code></pre>\n<p>This is very useful if, for example, I need to defer attention to the code fragment in question, or when using conditional compiler directives. I really miss this feature during Android development (in Kotlin, preferably, but I'm also curious about a similar Java feature).</p>\n<p>I'd like to know if there's at least an alternative for doing this, especially if it's integrated well into Android Studio and the compiler.</p>\n"},{"tags":["java","generics","reflection"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":4,"creation_date":1675447283,"post_id":75339460,"comment_id":132938336,"body_markdown":"Have you tried this? Object IS a superclass of List, so this just works.","body":"Have you tried this? Object IS a superclass of List, so this just works."},{"owner":{"account_id":8865173,"reputation":135,"user_id":7028615,"accept_rate":40,"display_name":"Frank Ponte"},"score":1,"creation_date":1675447484,"post_id":75339460,"comment_id":132938394,"body_markdown":"@S&#246;ren Oh wow. Because of your comment i rechecked my code and it seems that I just had an extra parenthesis, I also thought that about Object being a super class that includes List, but overthought it instead going to the basics. Thank you!!","body":"@S&#246;ren Oh wow. Because of your comment i rechecked my code and it seems that I just had an extra parenthesis, I also thought that about Object being a super class that includes List, but overthought it instead going to the basics. Thank you!!"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1675451899,"post_id":75339460,"comment_id":132939574,"body_markdown":"Side note: you only need `Map.entry(…)` when you want to initialize a map with more than ten entries (or truly have a need for `Map.Entry` instances themselves). For the simple cases, you can just write `public static final Map&lt;String, Object&gt; INITIALIZER = Map.of(&quot;field1&quot;, &quot;String&quot;, &quot;field2&quot;, new BigDecimal(&quot;23.43&quot;), &quot;listField3&quot;, List.of(&quot;e1&quot;,&quot;e2&quot;));`","body":"Side note: you only need <code>Map.entry(…)</code> when you want to initialize a map with more than ten entries (or truly have a need for <code>Map.Entry</code> instances themselves). For the simple cases, you can just write <code>public static final Map&lt;String, Object&gt; INITIALIZER = Map.of(&quot;field1&quot;, &quot;String&quot;, &quot;field2&quot;, new BigDecimal(&quot;23.43&quot;), &quot;listField3&quot;, List.of(&quot;e1&quot;,&quot;e2&quot;));</code>"}],"owner":{"account_id":8865173,"reputation":135,"user_id":7028615,"accept_rate":40,"display_name":"Frank Ponte"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675447029,"creation_date":1675447029,"question_id":75339460,"body_markdown":"I&#39;m trying to initialize a class with Reflection and a Map (This due a more complex requirement, I just isolated the example)\r\n\r\n```\r\npublic class ParentDto {\r\n    private String field1;\r\n    private BigDecimal field2;\r\n    private List&lt;AClass&gt; listField3;\r\n}\r\n```\r\n\r\nI created a map to set values for the first 2 fields with a generic value Map\r\n\r\n```\r\npublic static final Map&lt;String, Object&gt; INITIALIZER = Map.ofEntries(\r\n    Map.entry(&quot;field1&quot;, &quot;String&quot;),\r\n    Map.entry(&quot;field2&quot;, new BigDecimal(&quot;23.43&quot;)\r\n```\r\n\r\nHowever, if i try to do the same for the list it will fail. It makes sense since Object is not a Base Class for List&lt;Object&gt;. My question is: Is there any way I can add\r\n```\r\nMap.entry(&quot;listField3&quot;, List.of(&quot;e1&quot;,&quot;e2&quot;))\r\n```\r\n\r\ninto my static map? A superclass that have in common both Objects and List&lt;Object&gt;","title":"Is there a generic type that contains any Object class and a List&lt;Object&gt; in Java?","body":"<p>I'm trying to initialize a class with Reflection and a Map (This due a more complex requirement, I just isolated the example)</p>\n<pre><code>public class ParentDto {\n    private String field1;\n    private BigDecimal field2;\n    private List&lt;AClass&gt; listField3;\n}\n</code></pre>\n<p>I created a map to set values for the first 2 fields with a generic value Map</p>\n<pre><code>public static final Map&lt;String, Object&gt; INITIALIZER = Map.ofEntries(\n    Map.entry(&quot;field1&quot;, &quot;String&quot;),\n    Map.entry(&quot;field2&quot;, new BigDecimal(&quot;23.43&quot;)\n</code></pre>\n<p>However, if i try to do the same for the list it will fail. It makes sense since Object is not a Base Class for List. My question is: Is there any way I can add</p>\n<pre><code>Map.entry(&quot;listField3&quot;, List.of(&quot;e1&quot;,&quot;e2&quot;))\n</code></pre>\n<p>into my static map? A superclass that have in common both Objects and List</p>\n"},{"tags":["java","flutter","gradle"],"owner":{"account_id":27573695,"reputation":11,"user_id":21044377,"display_name":"Maciej Wawryszuk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675447005,"creation_date":1675444241,"question_id":75338971,"body_markdown":"I have a problem , I am trying to connect to the FairBid plugin and it keeps giving me this error and the app is not building , is there any way to make it work so I can fire up the Flutter App and open the ad? I don&#39;t know if I imported everything correctly or if it&#39;s a problem with the code in Mainactivity.java , I would appreciate your help\r\n\r\n[My Error][1]\r\n\r\nMainActivity\r\n\r\n\r\n```\r\npackage com.example.firebirdtest;\r\nimport com.fyber.fairbid.ads.Rewarded;\r\nimport android.os.Bundle;\r\nimport android.widget.Toast;\r\nimport com.fyber.FairBid;\r\nimport com.fyber.fairbid.ads.rewarded.RewardedListener;\r\nimport com.fyber.fairbid.ads.*;\r\nimport androidx.annotation.NonNull;\r\nimport io.flutter.embedding.android.FlutterActivity;\r\nimport io.flutter.plugin.common.MethodCall;\r\nimport io.flutter.embedding.engine.FlutterEngine;\r\nimport io.flutter.plugin.common.MethodChannel;\r\nimport io.flutter.plugins.GeneratedPluginRegistrant;\r\n\r\npublic class MainActivity extends FlutterActivity {\r\n  private  static final String CHANNEL = &quot;toast.flutter.io/toast&quot;;\r\n  @Override\r\n  public void configureFlutterEngine(@NonNull FlutterEngine flutterEngine) {\r\n    GeneratedPluginRegistrant.registerWith(flutterEngine);\r\n    new MethodChannel(getFlutterEngine().getDartExecutor().getBinaryMessenger(),CHANNEL).setMethodCallHandler(new MethodChannel.MethodCallHandler() {\r\n      @Override\r\n      public void onMethodCall(MethodCall methodCall, MethodChannel.Result result) {\r\n        if(methodCall.method.equals(&quot;showToast&quot;)){\r\n          Toast.makeText(getApplicationContext(),&quot;Flutter Toast&quot;,Toast.LENGTH_SHORT).show();\r\n          FairBid.start(&quot;120661&quot; , getActivity());\r\n \r\n          String placementId = &quot;12345&quot;;\r\n          Rewarded.request(placementId);\r\n          Rewarded.setRewardedListener(new RewardedListener() {\r\n            public void onAvailable(String placementId) {\r\n                // Called when a rewarded ad from placement &#39;placementId&#39; becomes available\r\n                if (Rewarded.isAvailable(placementId)) {\r\n                  Rewarded.show(placementId, context);\r\n              }\r\n            }\r\n        });\r\n        } else {\r\n          result.notImplemented();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  \r\n}\r\n\r\n```\r\nbuild.gradle //App\r\n\r\n```\r\ndef localProperties = new Properties()\r\ndef localPropertiesFile = rootProject.file(&#39;local.properties&#39;)\r\nif (localPropertiesFile.exists()) {\r\n    localPropertiesFile.withReader(&#39;UTF-8&#39;) { reader -&gt;\r\n        localProperties.load(reader)\r\n    }\r\n}\r\n\r\ndef flutterRoot = localProperties.getProperty(&#39;flutter.sdk&#39;)\r\nif (flutterRoot == null) {\r\n    throw new FileNotFoundException(&quot;Flutter SDK not found. Define location with flutter.sdk in the local.properties file.&quot;)\r\n}\r\n\r\ndef flutterVersionCode = localProperties.getProperty(&#39;flutter.versionCode&#39;)\r\nif (flutterVersionCode == null) {\r\n    flutterVersionCode = &#39;1&#39;\r\n}\r\n\r\ndef flutterVersionName = localProperties.getProperty(&#39;flutter.versionName&#39;)\r\nif (flutterVersionName == null) {\r\n    flutterVersionName = &#39;1.0&#39;\r\n}\r\napply plugin: &#39;com.fyber.fairbid-sdk-plugin&#39;\r\napply plugin: &#39;com.android.application&#39;\r\napply plugin: &#39;kotlin-android&#39;\r\napply from: &quot;$flutterRoot/packages/flutter_tools/gradle/flutter.gradle&quot;\r\n\r\nbuildscript {\r\n    repositories { \r\n     mavenCentral()\r\n   }\r\n   \r\n}\r\nandroid {\r\n    compileSdkVersion flutter.compileSdkVersion\r\n    ndkVersion flutter.ndkVersion\r\n    namespace &#39;com.example.firebirdtest&#39;\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n\r\n    kotlinOptions {\r\n        jvmTarget = &#39;1.8&#39;\r\n    }\r\n\r\n    sourceSets {\r\n        main.java.srcDirs += &#39;src/main/kotlin&#39;\r\n    }\r\nallprojects {\r\n   repositories {\r\n       mavenCentral()\r\n  }\r\n}\r\n    defaultConfig {\r\n        // TODO: Specify your own unique Application ID (https://developer.android.com/studio/build/application-id.html).\r\n        applicationId &quot;com.example.firebirdtest&quot;\r\n        // You can update the following values to match your application needs.\r\n        // For more information, see: https://docs.flutter.dev/deployment/android#reviewing-the-build-configuration.\r\n        minSdkVersion flutter.minSdkVersion\r\n        targetSdkVersion flutter.targetSdkVersion\r\n        versionCode flutterVersionCode.toInteger()\r\n        versionName flutterVersionName\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled true\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            signingConfig signingConfigs.debug\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_11\r\n        targetCompatibility JavaVersion.VERSION_11\r\n    }\r\n\r\n    packagingOptions {\r\n        resources.excludes.add(&quot;META-INF/*&quot;)\r\n    }\r\n\r\n    kotlinOptions {\r\n        jvmTarget = JavaVersion.VERSION_11.toString()\r\n    }\r\n}\r\n\r\nflutter {\r\n    source &#39;../..&#39;\r\n}\r\n\r\ndependencies {\r\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\r\n}\r\n\r\n```\r\nbuild.gradle // Project\r\n```\r\nbuildscript {\r\n    ext.kotlin_version = &#39;1.6.10&#39;\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n    \r\n    dependencies {\r\n        classpath &#39;com.android.tools.build:gradle:7.1.2&#39;\r\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\r\n    }\r\n}\r\nplugins{\r\n        id &#39;com.fyber.fairbid-sdk-plugin&#39;\r\n}\r\nallprojects {\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n}\r\n\r\nrootProject.buildDir = &#39;../build&#39;\r\nsubprojects {\r\n    project.buildDir = &quot;${rootProject.buildDir}/${project.name}&quot;\r\n}\r\nsubprojects {\r\n    project.evaluationDependsOn(&#39;:app&#39;)\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}\r\n\r\n```\r\n     \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/etZhN.png","title":"Gradle &amp; Flutter in MainActivity.java I can&#39;t get the fyber SDK to work","body":"<p>I have a problem , I am trying to connect to the FairBid plugin and it keeps giving me this error and the app is not building , is there any way to make it work so I can fire up the Flutter App and open the ad? I don't know if I imported everything correctly or if it's a problem with the code in Mainactivity.java , I would appreciate your help</p>\n<p><a href=\"https://i.stack.imgur.com/etZhN.png\" rel=\"nofollow noreferrer\">My Error</a></p>\n<p>MainActivity</p>\n<pre><code>package com.example.firebirdtest;\nimport com.fyber.fairbid.ads.Rewarded;\nimport android.os.Bundle;\nimport android.widget.Toast;\nimport com.fyber.FairBid;\nimport com.fyber.fairbid.ads.rewarded.RewardedListener;\nimport com.fyber.fairbid.ads.*;\nimport androidx.annotation.NonNull;\nimport io.flutter.embedding.android.FlutterActivity;\nimport io.flutter.plugin.common.MethodCall;\nimport io.flutter.embedding.engine.FlutterEngine;\nimport io.flutter.plugin.common.MethodChannel;\nimport io.flutter.plugins.GeneratedPluginRegistrant;\n\npublic class MainActivity extends FlutterActivity {\n  private  static final String CHANNEL = &quot;toast.flutter.io/toast&quot;;\n  @Override\n  public void configureFlutterEngine(@NonNull FlutterEngine flutterEngine) {\n    GeneratedPluginRegistrant.registerWith(flutterEngine);\n    new MethodChannel(getFlutterEngine().getDartExecutor().getBinaryMessenger(),CHANNEL).setMethodCallHandler(new MethodChannel.MethodCallHandler() {\n      @Override\n      public void onMethodCall(MethodCall methodCall, MethodChannel.Result result) {\n        if(methodCall.method.equals(&quot;showToast&quot;)){\n          Toast.makeText(getApplicationContext(),&quot;Flutter Toast&quot;,Toast.LENGTH_SHORT).show();\n          FairBid.start(&quot;120661&quot; , getActivity());\n \n          String placementId = &quot;12345&quot;;\n          Rewarded.request(placementId);\n          Rewarded.setRewardedListener(new RewardedListener() {\n            public void onAvailable(String placementId) {\n                // Called when a rewarded ad from placement 'placementId' becomes available\n                if (Rewarded.isAvailable(placementId)) {\n                  Rewarded.show(placementId, context);\n              }\n            }\n        });\n        } else {\n          result.notImplemented();\n        }\n      }\n    });\n  }\n\n  \n}\n\n</code></pre>\n<p>build.gradle //App</p>\n<pre><code>def localProperties = new Properties()\ndef localPropertiesFile = rootProject.file('local.properties')\nif (localPropertiesFile.exists()) {\n    localPropertiesFile.withReader('UTF-8') { reader -&gt;\n        localProperties.load(reader)\n    }\n}\n\ndef flutterRoot = localProperties.getProperty('flutter.sdk')\nif (flutterRoot == null) {\n    throw new FileNotFoundException(&quot;Flutter SDK not found. Define location with flutter.sdk in the local.properties file.&quot;)\n}\n\ndef flutterVersionCode = localProperties.getProperty('flutter.versionCode')\nif (flutterVersionCode == null) {\n    flutterVersionCode = '1'\n}\n\ndef flutterVersionName = localProperties.getProperty('flutter.versionName')\nif (flutterVersionName == null) {\n    flutterVersionName = '1.0'\n}\napply plugin: 'com.fyber.fairbid-sdk-plugin'\napply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply from: &quot;$flutterRoot/packages/flutter_tools/gradle/flutter.gradle&quot;\n\nbuildscript {\n    repositories { \n     mavenCentral()\n   }\n   \n}\nandroid {\n    compileSdkVersion flutter.compileSdkVersion\n    ndkVersion flutter.ndkVersion\n    namespace 'com.example.firebirdtest'\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n\n    kotlinOptions {\n        jvmTarget = '1.8'\n    }\n\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n    }\nallprojects {\n   repositories {\n       mavenCentral()\n  }\n}\n    defaultConfig {\n        // TODO: Specify your own unique Application ID (https://developer.android.com/studio/build/application-id.html).\n        applicationId &quot;com.example.firebirdtest&quot;\n        // You can update the following values to match your application needs.\n        // For more information, see: https://docs.flutter.dev/deployment/android#reviewing-the-build-configuration.\n        minSdkVersion flutter.minSdkVersion\n        targetSdkVersion flutter.targetSdkVersion\n        versionCode flutterVersionCode.toInteger()\n        versionName flutterVersionName\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n            signingConfig signingConfigs.debug\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_11\n        targetCompatibility JavaVersion.VERSION_11\n    }\n\n    packagingOptions {\n        resources.excludes.add(&quot;META-INF/*&quot;)\n    }\n\n    kotlinOptions {\n        jvmTarget = JavaVersion.VERSION_11.toString()\n    }\n}\n\nflutter {\n    source '../..'\n}\n\ndependencies {\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\n}\n\n</code></pre>\n<p>build.gradle // Project</p>\n<pre><code>buildscript {\n    ext.kotlin_version = '1.6.10'\n    repositories {\n        google()\n        mavenCentral()\n    }\n    \n    dependencies {\n        classpath 'com.android.tools.build:gradle:7.1.2'\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n    }\n}\nplugins{\n        id 'com.fyber.fairbid-sdk-plugin'\n}\nallprojects {\n    repositories {\n        google()\n        mavenCentral()\n    }\n}\n\nrootProject.buildDir = '../build'\nsubprojects {\n    project.buildDir = &quot;${rootProject.buildDir}/${project.name}&quot;\n}\nsubprojects {\n    project.evaluationDependsOn(':app')\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n\n</code></pre>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":14632062,"reputation":585,"user_id":10671013,"display_name":"Tan Yu Hau Sean"},"score":0,"creation_date":1675442303,"post_id":75338290,"comment_id":132936744,"body_markdown":"what annotations did you try?","body":"what annotations did you try?"},{"owner":{"account_id":404521,"reputation":480,"user_id":772883,"accept_rate":50,"display_name":"No3x"},"score":0,"creation_date":1675442680,"post_id":75338290,"comment_id":132936877,"body_markdown":"`@JsonFormat(shape=JsonFormat.Shape.ARRAY)`, `@JsonValue`, `@JsonProperty` without change","body":"<code>@JsonFormat(shape=JsonFormat.Shape.ARRAY)</code>, <code>@JsonValue</code>, <code>@JsonProperty</code> without change"},{"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"score":2,"creation_date":1675444148,"post_id":75338290,"comment_id":132937370,"body_markdown":"have you tried this? https://stackoverflow.com/questions/69846490/how-to-fix-error-start-array-token-when-deserializing-json-with-modelmapper","body":"have you tried this? <a href=\"https://stackoverflow.com/questions/69846490/how-to-fix-error-start-array-token-when-deserializing-json-with-modelmapper\" title=\"how to fix error start array token when deserializing json with modelmapper\">stackoverflow.com/questions/69846490/&hellip;</a>"},{"owner":{"account_id":14632062,"reputation":585,"user_id":10671013,"display_name":"Tan Yu Hau Sean"},"score":0,"creation_date":1675444667,"post_id":75338290,"comment_id":132937550,"body_markdown":"thanks for pointing us in the right direction kerbermeister, all the searches i was making either didnt have a solution or was using custom deserializer and was quite convoluted","body":"thanks for pointing us in the right direction kerbermeister, all the searches i was making either didnt have a solution or was using custom deserializer and was quite convoluted"},{"owner":{"account_id":404521,"reputation":480,"user_id":772883,"accept_rate":50,"display_name":"No3x"},"score":0,"creation_date":1675444850,"post_id":75338290,"comment_id":132937610,"body_markdown":"@kerbermeister I also tried `@JsonCreator` but it did not work. Now I tried again on my non-corporate machine and it works! Maybe there is a difference in the versions. Please post it as answer.","body":"@kerbermeister I also tried <code>@JsonCreator</code> but it did not work. Now I tried again on my non-corporate machine and it works! Maybe there is a difference in the versions. Please post it as answer."},{"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"score":0,"creation_date":1675445128,"post_id":75338290,"comment_id":132937716,"body_markdown":"you&#39;re welcome, posted an answer, however, I agree it depends on the version of jackson you&#39;re using","body":"you&#39;re welcome, posted an answer, however, I agree it depends on the version of jackson you&#39;re using"},{"owner":{"account_id":404521,"reputation":480,"user_id":772883,"accept_rate":50,"display_name":"No3x"},"score":0,"creation_date":1675445235,"post_id":75338290,"comment_id":132937746,"body_markdown":"@kerbermeister so i might not able to use this approach because I&#39;m tied to the platform versions in corporate field. Maybe someone knows an alternative to `@JsonCreator`?","body":"@kerbermeister so i might not able to use this approach because I&#39;m tied to the platform versions in corporate field. Maybe someone knows an alternative to <code>@JsonCreator</code>?"},{"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"score":0,"creation_date":1675445553,"post_id":75338290,"comment_id":132937832,"body_markdown":"I&#39;ll try to research this","body":"I&#39;ll try to research this"},{"owner":{"account_id":404521,"reputation":480,"user_id":772883,"accept_rate":50,"display_name":"No3x"},"score":0,"creation_date":1675447991,"post_id":75338290,"comment_id":132938559,"body_markdown":"Seems to work on both machines/versions. Tested 2.13.4, 2.14.1","body":"Seems to work on both machines/versions. Tested 2.13.4, 2.14.1"}],"answers":[{"comments":[{"owner":{"account_id":404521,"reputation":480,"user_id":772883,"accept_rate":50,"display_name":"No3x"},"score":0,"creation_date":1675448131,"post_id":75339110,"comment_id":132938591,"body_markdown":"Unfortunately I&#39;m able to add annotations to fields, getter, setter or class only because of the limitations of code generation framework for beans. I&#39;m looking for an alternative.","body":"Unfortunately I&#39;m able to add annotations to fields, getter, setter or class only because of the limitations of code generation framework for beans. I&#39;m looking for an alternative."}],"tags":[],"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1675446919,"creation_date":1675445090,"answer_id":75339110,"question_id":75338290,"body_markdown":"Actually it is quite simple to serialize your models to the target json, but might be tricky to deserialize.\r\n\r\nSo, the solution for deserialization in this case could be using `@JsonCreator` annotation from `com.fasterxml.jackson.annotation` package above constructor:\r\n\r\n    @Data\r\n    public class GetPersonsReponseDto {\r\n    \r\n        public List&lt;Person&gt; persons;\r\n    \r\n        @JsonCreator // use this annotation for deserialization on constructor\r\n        public GetPersonsReponseDto(List&lt;Person&gt; persons) {\r\n            this.persons = persons;\r\n        }\r\n    \r\n        public GetPersonsReponseDto() {\r\n        }\r\n    }\r\n\r\nHowever, it might not work with some versions of jackson.","title":"How to deserialize JSON file starting with an array in Jackson - with Annotations only?","body":"<p>Actually it is quite simple to serialize your models to the target json, but might be tricky to deserialize.</p>\n<p>So, the solution for deserialization in this case could be using <code>@JsonCreator</code> annotation from <code>com.fasterxml.jackson.annotation</code> package above constructor:</p>\n<pre><code>@Data\npublic class GetPersonsReponseDto {\n\n    public List&lt;Person&gt; persons;\n\n    @JsonCreator // use this annotation for deserialization on constructor\n    public GetPersonsReponseDto(List&lt;Person&gt; persons) {\n        this.persons = persons;\n    }\n\n    public GetPersonsReponseDto() {\n    }\n}\n</code></pre>\n<p>However, it might not work with some versions of jackson.</p>\n"}],"owner":{"account_id":404521,"reputation":480,"user_id":772883,"accept_rate":50,"display_name":"No3x"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":869,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75339110,"answer_count":1,"score":2,"last_activity_date":1675446919,"creation_date":1675440618,"question_id":75338290,"body_markdown":"I have a Json response that looks like this:\r\n\r\n    [\r\n        { &quot;name&quot;:&quot;A&quot; },\r\n        { &quot;name&quot;:&quot;B&quot; }\r\n    ]\r\n\r\nI have Java classes representing a single `ResponseDto` and contains a List of `Person`:\r\n\r\n    public class GetPersonsResponseDto {\r\n        public List&lt;Person&gt; persons;\r\n    }\r\n\r\n    public class Person {\r\n        public String name;\r\n    }\r\n\r\nI would like to deserialize the by JSON using `ObjectMapper` but without use of a custom Deserializer and without collection type (no `Persons[].class` or `TypeReference&lt;List&lt;Person&gt;&gt;(){}`). What I really want is\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    mapper.readValue(in, GetPersonsResponseDto.class);\r\nBut I get:\r\n\r\n    jackson.map.JsonMappingException: \r\n    Can not deserialize instance of com.project.my.GetPersonsResponseDto out of START_ARRAY token\r\nI tried several Annotations but without success.","title":"How to deserialize JSON file starting with an array in Jackson - with Annotations only?","body":"<p>I have a Json response that looks like this:</p>\n<pre><code>[\n    { &quot;name&quot;:&quot;A&quot; },\n    { &quot;name&quot;:&quot;B&quot; }\n]\n</code></pre>\n<p>I have Java classes representing a single <code>ResponseDto</code> and contains a List of <code>Person</code>:</p>\n<pre><code>public class GetPersonsResponseDto {\n    public List&lt;Person&gt; persons;\n}\n\npublic class Person {\n    public String name;\n}\n</code></pre>\n<p>I would like to deserialize the by JSON using <code>ObjectMapper</code> but without use of a custom Deserializer and without collection type (no <code>Persons[].class</code> or <code>TypeReference&lt;List&lt;Person&gt;&gt;(){}</code>). What I really want is</p>\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nmapper.readValue(in, GetPersonsResponseDto.class);\n</code></pre>\n<p>But I get:</p>\n<pre><code>jackson.map.JsonMappingException: \nCan not deserialize instance of com.project.my.GetPersonsResponseDto out of START_ARRAY token\n</code></pre>\n<p>I tried several Annotations but without success.</p>\n"},{"tags":["java","eclipse","maven"],"comments":[{"owner":{"account_id":161274,"reputation":6294,"user_id":381897,"accept_rate":100,"display_name":"bhdrkn"},"score":2,"creation_date":1429555692,"post_id":29755373,"comment_id":47644070,"body_markdown":"Please share your pom.xml","body":"Please share your pom.xml"},{"owner":{"account_id":209503,"reputation":22800,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1429585630,"post_id":29755373,"comment_id":47656123,"body_markdown":"Also, see if you are using a JDK not a JRE, see it here for eclipse: http://stackoverflow.com/a/21099229/460557","body":"Also, see if you are using a JDK not a JRE, see it here for eclipse: <a href=\"http://stackoverflow.com/a/21099229/460557\">stackoverflow.com/a/21099229/460557</a>"},{"owner":{"account_id":201380,"reputation":151,"user_id":447786,"accept_rate":75,"display_name":"Raphael Milani"},"score":1,"creation_date":1429711550,"post_id":29755373,"comment_id":47728205,"body_markdown":"Hi @JorgeCampos: I am using JDK and I can&#180;t share my POM because it&#180;s of private Bank","body":"Hi @JorgeCampos: I am using JDK and I can&#180;t share my POM because it&#180;s of private Bank"},{"owner":{"account_id":209503,"reputation":22800,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1429750767,"post_id":29755373,"comment_id":47751259,"body_markdown":"This error is on eclipse or in the command line? Forget to ask before!","body":"This error is on eclipse or in the command line? Forget to ask before!"},{"owner":{"account_id":201380,"reputation":151,"user_id":447786,"accept_rate":75,"display_name":"Raphael Milani"},"score":0,"creation_date":1429821367,"post_id":29755373,"comment_id":47794251,"body_markdown":"Hi @JorgeCampos this issue happens in both","body":"Hi @JorgeCampos this issue happens in both"},{"owner":{"account_id":209503,"reputation":22800,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1429919276,"post_id":29755373,"comment_id":47844460,"body_markdown":"Go to your repository on this path `repository\\org\\apache\\maven\\plugins\\maven-surefire-plugin` see if there is a version of the plugin and if so see if there is a jar named `maven-surefire-plugin-x.xx.jar`","body":"Go to your repository on this path <code>repository\\org\\apache\\maven\\plugins\\maven-surefire-plugin</code> see if there is a version of the plugin and if so see if there is a jar named <code>maven-surefire-plugin-x.xx.jar</code>"},{"owner":{"account_id":201380,"reputation":151,"user_id":447786,"accept_rate":75,"display_name":"Raphael Milani"},"score":0,"creation_date":1430142342,"post_id":29755373,"comment_id":47917739,"body_markdown":"Hi @JorgeCampos on my repository there are many versions of maven-surefire-plugin.jar, but now occurs other exception: Caused by: java.lang.ClassNotFoundException: org.apache.maven.wagon.providers.http.HttpWagon","body":"Hi @JorgeCampos on my repository there are many versions of maven-surefire-plugin.jar, but now occurs other exception: Caused by: java.lang.ClassNotFoundException: org.apache.maven.wagon.providers.http.HttpWagon"},{"owner":{"account_id":209503,"reputation":22800,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1430143423,"post_id":29755373,"comment_id":47918595,"body_markdown":"Most probably you have a configuration problem then. Check if you have set the maven enviroment `M2_HOME`, check also if your console is pointing to the proper JDK not JRE (I know I said it before, double check it with just calling `javac -version`), another possible problem is the jar on your current repository is corrupted so, go to your maven repository e.g. `c:\\maven\\repository` and rename it to `c:\\maven\\repository_` and run mvn install again it will redownload every jar, so it take some time to finish...","body":"Most probably you have a configuration problem then. Check if you have set the maven enviroment <code>M2_HOME</code>, check also if your console is pointing to the proper JDK not JRE (I know I said it before, double check it with just calling <code>javac -version</code>), another possible problem is the jar on your current repository is corrupted so, go to your maven repository e.g. <code>c:\\maven\\repository</code> and rename it to <code>c:\\maven\\repository_</code> and run mvn install again it will redownload every jar, so it take some time to finish..."},{"owner":{"account_id":201380,"reputation":151,"user_id":447786,"accept_rate":75,"display_name":"Raphael Milani"},"score":0,"creation_date":1430143774,"post_id":29755373,"comment_id":47918861,"body_markdown":"Hi @JorgeCampos I am going to try that, but my problem is: Failed to read artifact descriptor for org.codehaus.plexus:plexus-archiver:jar:2.6.3: Could not transfer artifact org.codehaus.plexus:plexus-archiver:pom:2.6.3 from/to R2DS-Group (https://dsnexus.uk.hibm.hsbc:8082/nexus/content/groups/R2DS-Group/): No connector available to access repository R2DS-Group (https://dsnexus.uk.hibm.hsbc:8082/nexus/content/groups/R2DS-Group/) of type default using the available factories WagonRepositoryConnectorFactory","body":"Hi @JorgeCampos I am going to try that, but my problem is: Failed to read artifact descriptor for org.codehaus.plexus:plexus-archiver:jar:2.6.3: Could not transfer artifact org.codehaus.plexus:plexus-archiver:pom:2.6.3 from/to R2DS-Group (<a href=\"https://dsnexus.uk.hibm.hsbc:8082/nexus/content/groups/R2DS-Group/\" rel=\"nofollow noreferrer\">dsnexus.uk.hibm.hsbc:8082/nexus/content/groups/R2DS-Group</a>): No connector available to access repository R2DS-Group (<a href=\"https://dsnexus.uk.hibm.hsbc:8082/nexus/content/groups/R2DS-Group/\" rel=\"nofollow noreferrer\">dsnexus.uk.hibm.hsbc:8082/nexus/content/groups/R2DS-Group</a>) of type default using the available factories WagonRepositoryConnectorFactory"},{"owner":{"account_id":201380,"reputation":151,"user_id":447786,"accept_rate":75,"display_name":"Raphael Milani"},"score":0,"creation_date":1430155542,"post_id":29755373,"comment_id":47927024,"body_markdown":"Hi @JorgeCampos your suggestion worked! I &quot;redownloaded&quot; the whole internet.","body":"Hi @JorgeCampos your suggestion worked! I &quot;redownloaded&quot; the whole internet."},{"owner":{"account_id":209503,"reputation":22800,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1430158828,"post_id":29755373,"comment_id":47928866,"body_markdown":"hahahahaha good to know that I could Help. May I add this info as an answer?","body":"hahahahaha good to know that I could Help. May I add this info as an answer?"},{"owner":{"account_id":201380,"reputation":151,"user_id":447786,"accept_rate":75,"display_name":"Raphael Milani"},"score":0,"creation_date":1430160578,"post_id":29755373,"comment_id":47929947,"body_markdown":"Hi @JorgeCampos of course. Feel free!","body":"Hi @JorgeCampos of course. Feel free!"}],"answers":[{"comments":[{"owner":{"account_id":5954045,"reputation":3379,"user_id":4681265,"display_name":"Adrian"},"score":0,"creation_date":1541285634,"post_id":29904328,"comment_id":93165544,"body_markdown":"seems to be an unresolved (at this moment) bug: [SUREFIRE-1534](https://issues.apache.org/jira/browse/SUREFIRE-1534)","body":"seems to be an unresolved (at this moment) bug: <a href=\"https://issues.apache.org/jira/browse/SUREFIRE-1534\" rel=\"nofollow noreferrer\">SUREFIRE-1534</a>"},{"owner":{"account_id":194080,"reputation":998,"user_id":436183,"accept_rate":75,"display_name":"Jeryl Cook"},"score":1,"creation_date":1611156771,"post_id":29904328,"comment_id":116361381,"body_markdown":"blow away the maven-sunfire-plugin and maven-jar-plugin  maven (.m2) directory worked for me","body":"blow away the maven-sunfire-plugin and maven-jar-plugin  maven (.m2) directory worked for me"},{"owner":{"account_id":209503,"reputation":22800,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":1,"creation_date":1611164965,"post_id":29904328,"comment_id":116365576,"body_markdown":"@JerylCook Yeah, sometimes targeting only what seems to be the offending ones is also better than deleting everything :)","body":"@JerylCook Yeah, sometimes targeting only what seems to be the offending ones is also better than deleting everything :)"}],"tags":[],"owner":{"account_id":209503,"reputation":22800,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1430162922,"creation_date":1430162922,"answer_id":29904328,"question_id":29755373,"body_markdown":"There are a few things that you should check about this problem.\r\n\r\nI will enumarate then here so you could check.\r\n\r\n1. Check if you defined the JDK instead of the JRE on your path enviroment variables. Maven does not work properly only with the JRE. To check that go to your console and se if the `javac -version` command works.\r\n2. Check if you have the **M2_HOME** variable defined on your enviroment variables with the path where you installed maven.\r\n3. Since you are having a `ClassNotFoundException` on the `SurefireReportParameters` class check if the correspondent jar is on your local repository. It normally is on `maven_path\\repository\\org\\apache\\maven\\plugins\\maven-surefire-plugin` there it should have folder with versions and inside it a JAR file with the name: `maven-surefire-plugin-x.xx.jar`.\r\n4. Sometimes it happens that JAR files get corrupted from outside events of the O.S. or the IDE leading to the `ClassNotFoundException` as it would be very difficult to find all corrupted JARs I usually recomend to redownload the entiry repository again. **Note that** depending on the size of your project and number of dependencies you have on it this operation will take some time to complete. In order to do that you go to your repository folder (e.g. `c:\\maven\\repository`) and rename it (just the repository folder e.g. `c:\\maven\\repository_`) or delete it (just repository folder) then go to your project and run `mvn install`\r\n\r\nOne of this options should solve your problem. And as we discussed on the comments we already know which one it was. ;)","title":"Maven Issue SurefireReportParameters","body":"<p>There are a few things that you should check about this problem.</p>\n\n<p>I will enumarate then here so you could check.</p>\n\n<ol>\n<li>Check if you defined the JDK instead of the JRE on your path enviroment variables. Maven does not work properly only with the JRE. To check that go to your console and se if the <code>javac -version</code> command works.</li>\n<li>Check if you have the <strong>M2_HOME</strong> variable defined on your enviroment variables with the path where you installed maven.</li>\n<li>Since you are having a <code>ClassNotFoundException</code> on the <code>SurefireReportParameters</code> class check if the correspondent jar is on your local repository. It normally is on <code>maven_path\\repository\\org\\apache\\maven\\plugins\\maven-surefire-plugin</code> there it should have folder with versions and inside it a JAR file with the name: <code>maven-surefire-plugin-x.xx.jar</code>.</li>\n<li>Sometimes it happens that JAR files get corrupted from outside events of the O.S. or the IDE leading to the <code>ClassNotFoundException</code> as it would be very difficult to find all corrupted JARs I usually recomend to redownload the entiry repository again. <strong>Note that</strong> depending on the size of your project and number of dependencies you have on it this operation will take some time to complete. In order to do that you go to your repository folder (e.g. <code>c:\\maven\\repository</code>) and rename it (just the repository folder e.g. <code>c:\\maven\\repository_</code>) or delete it (just repository folder) then go to your project and run <code>mvn install</code></li>\n</ol>\n\n<p>One of this options should solve your problem. And as we discussed on the comments we already know which one it was. ;)</p>\n"},{"tags":[],"owner":{"account_id":8113332,"reputation":121,"user_id":6112633,"display_name":"nichole"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675446505,"creation_date":1675446505,"answer_id":75339349,"question_id":29755373,"body_markdown":"There are solutions posted for a similar question, but in the context of the Spring Framework.\r\n\r\nhttps://stackoverflow.com/questions/50661648/spring-boot-fails-to-run-maven-surefire-plugin-classnotfoundexception-org-apache/53261434#53261434\r\n\r\nOne answer is to use version 3.0.0-M1 of the maven-surefire-plugin.\r\n\r\n","title":"Maven Issue SurefireReportParameters","body":"<p>There are solutions posted for a similar question, but in the context of the Spring Framework.</p>\n<p><a href=\"https://stackoverflow.com/questions/50661648/spring-boot-fails-to-run-maven-surefire-plugin-classnotfoundexception-org-apache/53261434#53261434\">Spring Boot fails to run maven-surefire-plugin ClassNotFoundException org.apache.maven.surefire.booter.ForkedBooter</a></p>\n<p>One answer is to use version 3.0.0-M1 of the maven-surefire-plugin.</p>\n"}],"owner":{"account_id":201380,"reputation":151,"user_id":447786,"accept_rate":75,"display_name":"Raphael Milani"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4199,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":29904328,"answer_count":2,"score":2,"last_activity_date":1675446505,"creation_date":1429553698,"question_id":29755373,"body_markdown":"I&#39;ve been trying to build an app but when I run maven, I catch this exception:\r\n\r\n &gt; java.lang.ClassNotFoundException: org.apache.maven.plugin.surefire.SurefireReportParameters\r\n\r\nI installed the maven-plugin manually, but the issue still continues. Any suggestion will be appreciated.","title":"Maven Issue SurefireReportParameters","body":"<p>I've been trying to build an app but when I run maven, I catch this exception:</p>\n\n<blockquote>\n  <p>java.lang.ClassNotFoundException: org.apache.maven.plugin.surefire.SurefireReportParameters</p>\n</blockquote>\n\n<p>I installed the maven-plugin manually, but the issue still continues. Any suggestion will be appreciated.</p>\n"},{"tags":["java","spring-boot","tomcat","websocket","heap-dump"],"answers":[{"comments":[{"owner":{"account_id":6471625,"reputation":107,"user_id":5011579,"accept_rate":57,"display_name":"Jungle"},"score":0,"creation_date":1696444823,"post_id":75337702,"comment_id":136155233,"body_markdown":"What is your Spring Boot version?","body":"What is your Spring Boot version?"},{"owner":{"account_id":4602926,"reputation":31,"user_id":5039342,"display_name":"joe380"},"score":0,"creation_date":1697462452,"post_id":75337702,"comment_id":136279230,"body_markdown":"In the time of the issue occurrence it was 2.7.x, than 3.0.x. I think operations team was still complaining about heap (the change above somehow caused heap to grow with internal tomcat classes/instances) with version 3.0.x, but after going to version 3.1.x it somehow was gone.","body":"In the time of the issue occurrence it was 2.7.x, than 3.0.x. I think operations team was still complaining about heap (the change above somehow caused heap to grow with internal tomcat classes/instances) with version 3.0.x, but after going to version 3.1.x it somehow was gone."}],"tags":[],"owner":{"account_id":4602926,"reputation":31,"user_id":5039342,"display_name":"joe380"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675445867,"creation_date":1675437548,"answer_id":75337702,"question_id":75327130,"body_markdown":"I was able to find out what was the cause, so here the findings:\r\n- if you use the default configuration of websocket handler in a spring boot application it&#39;s provided from tomcat, as the underlying provider\r\n- we used the default @EnableWebSecurity =&gt; which means that for each websocket session there is also a classic StandardHttpSession created which is used for the authentication part\r\n- the default timeout for the StandartHttpSession is 60s (server.servlet.session.timeout=60) In case of tomcat these are always multiples of 60 =&gt; 60,120,180.... But in the production (without my knowledge) somebody set this property to -1 =&gt; which means the session never expires (this solved the first visible problem of losing the web socket connections, but caused one new problem which was seen after a year(now) due to increased load)\r\n- so the mechanics of the problem is, that after the timeout of the StandartHttpSession the &quot;underlying&quot; websocket session is closed EVEN-THOUGH were is visible communication. \r\n- the issue is that the &quot;activity&quot; in the websocket session is not propagated to the above StandardHttpSession =&gt; that means the http session comes to timeout and closes the underlying websocket session\r\n\r\nSolution for now (I need to test it) is to somehow overcome this 2 session constellation, or use a different provider like jetty, undertow....\r\nor a hack to pass the reference of the httpsession to the websocket session as an attribute and on events onConnected set the timeout to -1 and after the session is closed set it to 60s =&gt; so that after a minute the session is gone.\r\n\r\nThe fix was to enforce the session policy to NEVER!\r\n\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.csrf().disable()\r\n        http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.NEVER)\r\n            .and().csrf().disable()\r\n\r\n","title":"Issue with rising heap size in a spring boot app (running in k8s)","body":"<p>I was able to find out what was the cause, so here the findings:</p>\n<ul>\n<li>if you use the default configuration of websocket handler in a spring boot application it's provided from tomcat, as the underlying provider</li>\n<li>we used the default @EnableWebSecurity =&gt; which means that for each websocket session there is also a classic StandardHttpSession created which is used for the authentication part</li>\n<li>the default timeout for the StandartHttpSession is 60s (server.servlet.session.timeout=60) In case of tomcat these are always multiples of 60 =&gt; 60,120,180.... But in the production (without my knowledge) somebody set this property to -1 =&gt; which means the session never expires (this solved the first visible problem of losing the web socket connections, but caused one new problem which was seen after a year(now) due to increased load)</li>\n<li>so the mechanics of the problem is, that after the timeout of the StandartHttpSession the &quot;underlying&quot; websocket session is closed EVEN-THOUGH were is visible communication.</li>\n<li>the issue is that the &quot;activity&quot; in the websocket session is not propagated to the above StandardHttpSession =&gt; that means the http session comes to timeout and closes the underlying websocket session</li>\n</ul>\n<p>Solution for now (I need to test it) is to somehow overcome this 2 session constellation, or use a different provider like jetty, undertow....\nor a hack to pass the reference of the httpsession to the websocket session as an attribute and on events onConnected set the timeout to -1 and after the session is closed set it to 60s =&gt; so that after a minute the session is gone.</p>\n<p>The fix was to enforce the session policy to NEVER!</p>\n<pre><code>protected void configure(HttpSecurity http) throws Exception {\n    http.csrf().disable()\n    http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.NEVER)\n        .and().csrf().disable()\n</code></pre>\n"}],"owner":{"account_id":4602926,"reputation":31,"user_id":5039342,"display_name":"joe380"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":198,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1675445867,"creation_date":1675360520,"question_id":75327130,"body_markdown":"**Description of the service:**\r\n\r\nThis spring boot application is essentially a web socket proxy for charging stations (using OCPP protocol over websocket) running as multiple\r\nnodes behind a load balancer, to basically hold/keep open the connections, so that other microservices(actual consumers of the messages) which connect to this proxy over rabbitmq can be redeployed and maintained.\r\n\r\n**Heap dump:**\r\n\r\nThese devices (tens of thousands) tend to connect and disconnect very often. The issue is that the\r\n\r\n&gt; **sessions (attribute)** in org.apache.catalina.session.StandardManager\r\n\r\nkeeps adding sessions (more than 700 000) but not removing them (in a span of 7 days). [see picture (StandartManager)](https://i.stack.imgur.com/K0anZ.png)\r\n\r\nI also looked into\r\n\r\n&gt; **sessions (attribute)** in org.apache.tomcat.websocket.server.WsServerContainer\r\n\r\nwhich holds the websocket sessions (at the time of dump: 523) which was correct. [see picture (WsServerContainer)](https://i.stack.imgur.com/ABYub.png)\r\n\r\nThe application also keeps the active sessions (per node) in a concurrent map for own purposes:\r\n\r\n&gt; **sessions (attribute)** in WebsocketServerService\r\n\r\nat the time of dump: 530 (which correlates with the above sessions, do not mind the small difference, it&#39;s ok) [see picture (WebsocketServerService)](https://i.stack.imgur.com/slt1p.png)\r\n\r\nSo basically the expectation would be that all **sessions** attributes would hold almost the same amount of sessions, which is this case would be around 530 and NOT more than 700 000.\r\n\r\n**Question:**\r\n\r\nWhat might cause the everlasting rising of the standard sessions? I&#39;m not familiar with inner workings of tomcat, if a websocket connection is &quot;baked&quot; by a standart session (at least at the beginning of the connection) and not properly closing the socket (by both parties) could cause that the standard sessions will stick around and are not collected after a while. These are just assumptions.\r\n\r\nOne version of the possible cause (WIP) is that we are using the standard **WebSecurityConfigurerAdapter** \r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@AllArgsConstructor\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    private final WebsocketServerProperties websocketServerProperties;\r\n    private final StationAuthenticationProvider stationAuthenticationProvider;\r\n    private final AuthenticationEntryPoint authEntryPoint;\r\n\r\n    @Override\r\n    public void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n        auth.authenticationProvider(stationAuthenticationProvider);\r\n    }\r\n\r\n    @Override\r\n    @SuppressWarnings(&quot;squid:S4502&quot;)\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.csrf().disable()\r\n                .httpBasic()\r\n                .authenticationEntryPoint(authEntryPoint)\r\n                .and()\r\n                .antMatcher(websocketServerProperties.getWebsocketPathVpn() + &quot;/**&quot;).anonymous()\r\n                .and()\r\n                .antMatcher(websocketServerProperties.getWebsocketPathInternet() + &quot;/**&quot;)\r\n                .authorizeRequests()\r\n                .anyRequest()\r\n                .authenticated();\r\n    }\r\n\r\n}\r\n```\r\n\r\nand not the one mentioned here https://docs.spring.io/spring-security/reference/servlet/integrations/websocket.html#websocket-configuration\r\n\r\nSo if the station connects and there is an error for example  401, the socket is not properly closed, and the sessions increase without being properly closed and collected by GC (assumtion).\r\n\r\nThe implementations of the websocket controller is a standard one (at least by the reference doc):\r\n\r\n```\r\n@Configuration\r\n@EnableWebSocket\r\n@RequiredArgsConstructor\r\n@EnableConfigurationProperties(WebsocketServerProperties.class)\r\npublic class WebsocketServerConfig implements WebSocketConfigurer {\r\n    public static final String[] SUPPORTED_PROTOCOLS = new String[]{.....};\r\n\r\n    private final WebsocketServerProperties websocketServerProperties;\r\n    private final WebsocketHandShakeInterceptor websocketHandShakeInterceptor;\r\n    private final StationSocketHandler stationSocketHandler;\r\n\r\n    public void registerWebSocketHandlers(WebSocketHandlerRegistry registry) {\r\n        registry.addHandler(stationSocketHandler,\r\n                        websocketServerProperties.getWebsocketPathVpn() + &quot;/*&quot;,\r\n                        websocketServerProperties.getWebsocketPathInternet() + &quot;/*&quot;)\r\n                .addInterceptors(websocketHandShakeInterceptor)\r\n                .setHandshakeHandler(handshakeHandler())\r\n                .setAllowedOrigins(&quot;*&quot;);\r\n    }\r\n\r\n    private HandshakeHandler handshakeHandler() {\r\n        DefaultHandshakeHandler handler = new DefaultHandshakeHandler();\r\n        handler.setSupportedProtocols(SUPPORTED_PROTOCOLS);\r\n        return handler;\r\n    }\r\n\r\n    @Bean\r\n    public ServletServerContainerFactoryBean createWebSocketContainer() {\r\n        ServletServerContainerFactoryBean container = new ServletServerContainerFactoryBean();\r\n        container.setMaxTextMessageBufferSize(websocketServerProperties.getMaxTextMessageBufferSize());\r\n        container.setMaxSessionIdleTimeout(websocketServerProperties.getMaxSessionIdleTimeout());\r\n        return container;\r\n    }\r\n\r\n}\r\n```\r\n\r\n```\r\n@Slf4j\r\n@Component\r\n@RequiredArgsConstructor(onConstructor = @__({@Autowired}))\r\npublic class StationSocketHandler extends TextWebSocketHandler implements SubProtocolCapable {\r\n\r\n    public static final String DEVICE_ID = &quot;DEVICE_ID&quot;;\r\n    public static final String CONNECTION_ROUTE = &quot;CONNECTION_ROUTE&quot;;\r\n\r\n    private final OcppMessageParser ocppMessageParser;\r\n    private final WebsocketServerService websocketServerService;\r\n    private final PingPongService pingPongService;\r\n\r\n    @Override\r\n    public void handleTextMessage(final WebSocketSession session, TextMessage textMessage) {\r\n        OcppMessage message = ocppMessageParser.parsePayloadWithSessionId(session.getId(), textMessage.getPayload());\r\n        websocketServerService.processMessageFromStation(message);\r\n    }\r\n\r\n    @Override\r\n    public void afterConnectionEstablished(WebSocketSession session) {\r\n        Map&lt;String, Object&gt; attributes = session.getAttributes();\r\n        String deviceId = (String) attributes.get(DEVICE_ID);\r\n        String connectionRoute = (String) attributes.get(CONNECTION_ROUTE);\r\n        websocketServerService.connect(Route.toRoute(connectionRoute), deviceId, session);\r\n    }\r\n\r\n    @Override\r\n    public void afterConnectionClosed(WebSocketSession session, @NonNull CloseStatus status) {\r\n        log.info(&quot;WebSocketSession[{}][{}] closed with status {} and attributes {}&quot;,\r\n                session.getId(), session.isOpen(), status, session.getAttributes());\r\n        websocketServerService.disconnectSessionId(session.getId());\r\n    }\r\n\r\n    @Override\r\n    protected void handlePongMessage(WebSocketSession session, PongMessage message) throws Exception {\r\n        pingPongService.handlePong(session, message);\r\n    }\r\n\r\n    @Override\r\n    public @NonNull\r\n    List&lt;String&gt; getSubProtocols() {\r\n        return Arrays.asList(WebsocketServerConfig.SUPPORTED_PROTOCOLS);\r\n    }\r\n\r\n}\r\n```\r\n\r\nAny suggestion, idea what could cause this would be appreciated.\r\n\r\nI run some load tests to see if the sessions are rising and not correlating with the real state.\r\nThe heap dumps after test were (at least for now) not very helpful.\r\nAlso tried so simulate the errors, with no visible outcome.\r\n","title":"Issue with rising heap size in a spring boot app (running in k8s)","body":"<p><strong>Description of the service:</strong></p>\n<p>This spring boot application is essentially a web socket proxy for charging stations (using OCPP protocol over websocket) running as multiple\nnodes behind a load balancer, to basically hold/keep open the connections, so that other microservices(actual consumers of the messages) which connect to this proxy over rabbitmq can be redeployed and maintained.</p>\n<p><strong>Heap dump:</strong></p>\n<p>These devices (tens of thousands) tend to connect and disconnect very often. The issue is that the</p>\n<blockquote>\n<p><strong>sessions (attribute)</strong> in org.apache.catalina.session.StandardManager</p>\n</blockquote>\n<p>keeps adding sessions (more than 700 000) but not removing them (in a span of 7 days). <a href=\"https://i.stack.imgur.com/K0anZ.png\" rel=\"nofollow noreferrer\">see picture (StandartManager)</a></p>\n<p>I also looked into</p>\n<blockquote>\n<p><strong>sessions (attribute)</strong> in org.apache.tomcat.websocket.server.WsServerContainer</p>\n</blockquote>\n<p>which holds the websocket sessions (at the time of dump: 523) which was correct. <a href=\"https://i.stack.imgur.com/ABYub.png\" rel=\"nofollow noreferrer\">see picture (WsServerContainer)</a></p>\n<p>The application also keeps the active sessions (per node) in a concurrent map for own purposes:</p>\n<blockquote>\n<p><strong>sessions (attribute)</strong> in WebsocketServerService</p>\n</blockquote>\n<p>at the time of dump: 530 (which correlates with the above sessions, do not mind the small difference, it's ok) <a href=\"https://i.stack.imgur.com/slt1p.png\" rel=\"nofollow noreferrer\">see picture (WebsocketServerService)</a></p>\n<p>So basically the expectation would be that all <strong>sessions</strong> attributes would hold almost the same amount of sessions, which is this case would be around 530 and NOT more than 700 000.</p>\n<p><strong>Question:</strong></p>\n<p>What might cause the everlasting rising of the standard sessions? I'm not familiar with inner workings of tomcat, if a websocket connection is &quot;baked&quot; by a standart session (at least at the beginning of the connection) and not properly closing the socket (by both parties) could cause that the standard sessions will stick around and are not collected after a while. These are just assumptions.</p>\n<p>One version of the possible cause (WIP) is that we are using the standard <strong>WebSecurityConfigurerAdapter</strong></p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@AllArgsConstructor\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    private final WebsocketServerProperties websocketServerProperties;\n    private final StationAuthenticationProvider stationAuthenticationProvider;\n    private final AuthenticationEntryPoint authEntryPoint;\n\n    @Override\n    public void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.authenticationProvider(stationAuthenticationProvider);\n    }\n\n    @Override\n    @SuppressWarnings(&quot;squid:S4502&quot;)\n    protected void configure(HttpSecurity http) throws Exception {\n        http.csrf().disable()\n                .httpBasic()\n                .authenticationEntryPoint(authEntryPoint)\n                .and()\n                .antMatcher(websocketServerProperties.getWebsocketPathVpn() + &quot;/**&quot;).anonymous()\n                .and()\n                .antMatcher(websocketServerProperties.getWebsocketPathInternet() + &quot;/**&quot;)\n                .authorizeRequests()\n                .anyRequest()\n                .authenticated();\n    }\n\n}\n</code></pre>\n<p>and not the one mentioned here <a href=\"https://docs.spring.io/spring-security/reference/servlet/integrations/websocket.html#websocket-configuration\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/reference/servlet/integrations/websocket.html#websocket-configuration</a></p>\n<p>So if the station connects and there is an error for example  401, the socket is not properly closed, and the sessions increase without being properly closed and collected by GC (assumtion).</p>\n<p>The implementations of the websocket controller is a standard one (at least by the reference doc):</p>\n<pre><code>@Configuration\n@EnableWebSocket\n@RequiredArgsConstructor\n@EnableConfigurationProperties(WebsocketServerProperties.class)\npublic class WebsocketServerConfig implements WebSocketConfigurer {\n    public static final String[] SUPPORTED_PROTOCOLS = new String[]{.....};\n\n    private final WebsocketServerProperties websocketServerProperties;\n    private final WebsocketHandShakeInterceptor websocketHandShakeInterceptor;\n    private final StationSocketHandler stationSocketHandler;\n\n    public void registerWebSocketHandlers(WebSocketHandlerRegistry registry) {\n        registry.addHandler(stationSocketHandler,\n                        websocketServerProperties.getWebsocketPathVpn() + &quot;/*&quot;,\n                        websocketServerProperties.getWebsocketPathInternet() + &quot;/*&quot;)\n                .addInterceptors(websocketHandShakeInterceptor)\n                .setHandshakeHandler(handshakeHandler())\n                .setAllowedOrigins(&quot;*&quot;);\n    }\n\n    private HandshakeHandler handshakeHandler() {\n        DefaultHandshakeHandler handler = new DefaultHandshakeHandler();\n        handler.setSupportedProtocols(SUPPORTED_PROTOCOLS);\n        return handler;\n    }\n\n    @Bean\n    public ServletServerContainerFactoryBean createWebSocketContainer() {\n        ServletServerContainerFactoryBean container = new ServletServerContainerFactoryBean();\n        container.setMaxTextMessageBufferSize(websocketServerProperties.getMaxTextMessageBufferSize());\n        container.setMaxSessionIdleTimeout(websocketServerProperties.getMaxSessionIdleTimeout());\n        return container;\n    }\n\n}\n</code></pre>\n<pre><code>@Slf4j\n@Component\n@RequiredArgsConstructor(onConstructor = @__({@Autowired}))\npublic class StationSocketHandler extends TextWebSocketHandler implements SubProtocolCapable {\n\n    public static final String DEVICE_ID = &quot;DEVICE_ID&quot;;\n    public static final String CONNECTION_ROUTE = &quot;CONNECTION_ROUTE&quot;;\n\n    private final OcppMessageParser ocppMessageParser;\n    private final WebsocketServerService websocketServerService;\n    private final PingPongService pingPongService;\n\n    @Override\n    public void handleTextMessage(final WebSocketSession session, TextMessage textMessage) {\n        OcppMessage message = ocppMessageParser.parsePayloadWithSessionId(session.getId(), textMessage.getPayload());\n        websocketServerService.processMessageFromStation(message);\n    }\n\n    @Override\n    public void afterConnectionEstablished(WebSocketSession session) {\n        Map&lt;String, Object&gt; attributes = session.getAttributes();\n        String deviceId = (String) attributes.get(DEVICE_ID);\n        String connectionRoute = (String) attributes.get(CONNECTION_ROUTE);\n        websocketServerService.connect(Route.toRoute(connectionRoute), deviceId, session);\n    }\n\n    @Override\n    public void afterConnectionClosed(WebSocketSession session, @NonNull CloseStatus status) {\n        log.info(&quot;WebSocketSession[{}][{}] closed with status {} and attributes {}&quot;,\n                session.getId(), session.isOpen(), status, session.getAttributes());\n        websocketServerService.disconnectSessionId(session.getId());\n    }\n\n    @Override\n    protected void handlePongMessage(WebSocketSession session, PongMessage message) throws Exception {\n        pingPongService.handlePong(session, message);\n    }\n\n    @Override\n    public @NonNull\n    List&lt;String&gt; getSubProtocols() {\n        return Arrays.asList(WebsocketServerConfig.SUPPORTED_PROTOCOLS);\n    }\n\n}\n</code></pre>\n<p>Any suggestion, idea what could cause this would be appreciated.</p>\n<p>I run some load tests to see if the sessions are rising and not correlating with the real state.\nThe heap dumps after test were (at least for now) not very helpful.\nAlso tried so simulate the errors, with no visible outcome.</p>\n"},{"tags":["java","junit","mocking"],"comments":[{"owner":{"account_id":10108456,"reputation":3914,"user_id":7470253,"display_name":"M. Prokhorov"},"score":0,"creation_date":1675444110,"post_id":75338783,"comment_id":132937356,"body_markdown":"It seems like you don&#39;t mock the `new B()` and instead you create an actual instance of it. Would I be correct in this observation? If I am correct, then it&#39;s no surprising it doesn&#39;t behave exactly according to test expectation.","body":"It seems like you don&#39;t mock the <code>new B()</code> and instead you create an actual instance of it. Would I be correct in this observation? If I am correct, then it&#39;s no surprising it doesn&#39;t behave exactly according to test expectation."}],"answers":[{"tags":[],"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675444520,"creation_date":1675444520,"answer_id":75339019,"question_id":75338783,"body_markdown":"If you want to just verify that each `B` in your `Set` has its `bMethod` invoked, you can set up your test something like this:\r\n\r\n\t@Test\r\n\tpublic void givenAWithBSet_whenAMethodIsCalled_thenCallBMethodOnAllBs() {\r\n\t\tSet&lt;B&gt; bSet = new HashSet&lt;&gt;();\r\n\t\tfor (int i = 0; i&lt;10; i++) {\r\n\t\t\tbSet.add(Mockito.mock(B.class));\r\n\t\t}\r\n\r\n\t\tA a = new A(bSet);\r\n\r\n\t\ta.aMethod();\r\n\r\n\t\tfor (B b : a.getBSet()) {\r\n\t\t\tverify(b).bMethod();\r\n\t\t}\r\n\t}\r\n\r\nIt will verify that `bMethod` was called on each of the mocks.  It&#39;d be nice to use the same mock, but as you&#39;re using a `Set` and the mock uses the identity function for equality, you&#39;ll need to create multiples.","title":"Mocking object in set","body":"<p>If you want to just verify that each <code>B</code> in your <code>Set</code> has its <code>bMethod</code> invoked, you can set up your test something like this:</p>\n<pre><code>@Test\npublic void givenAWithBSet_whenAMethodIsCalled_thenCallBMethodOnAllBs() {\n    Set&lt;B&gt; bSet = new HashSet&lt;&gt;();\n    for (int i = 0; i&lt;10; i++) {\n        bSet.add(Mockito.mock(B.class));\n    }\n\n    A a = new A(bSet);\n\n    a.aMethod();\n\n    for (B b : a.getBSet()) {\n        verify(b).bMethod();\n    }\n}\n</code></pre>\n<p>It will verify that <code>bMethod</code> was called on each of the mocks.  It'd be nice to use the same mock, but as you're using a <code>Set</code> and the mock uses the identity function for equality, you'll need to create multiples.</p>\n"}],"owner":{"account_id":17056266,"reputation":455,"user_id":12340711,"display_name":"riggedCoinflip"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75339019,"answer_count":1,"score":0,"last_activity_date":1675445865,"creation_date":1675443097,"question_id":75338783,"body_markdown":"I have the following classes:\r\n\r\n```java\r\n@Getter //lombok\r\n@AllArgsConstructor //lombok\r\npublic class A {\r\n    private Set&lt;B&gt; bSet;\r\n\r\n    public void aMethod() {\r\n        for (B b: bSet) b.bMethod();\r\n    }\r\n}\r\n\r\n@AllArgsConstructor //lombok\r\npublic class B {\r\n    public void bMethod() { \r\n        //do something\r\n    }\r\n}\r\n```\r\n\r\nI would like to write a test that checks if bMethod() got called for every element of bSet without caring about the Implementation of bMethod(). A unit test.\r\n\r\nThis is my JUnit test case that needs to succeed:\r\n```java\r\n    @Test\r\n    public void givenAWithBSet_whenAMethodIsCalled_thenCallBMethodOnAllBs() {\r\n        //GIVEN a with bSet\r\n        Set&lt;B&gt; bSet = new HashSet&lt;&gt;();\r\n        bSet.add(new B());\r\n        bSet.add(new B());\r\n        \r\n        A a = new A(bSet);\r\n\r\n        //WHEN aMethodIsCalled\r\n        a.aMethod();\r\n\r\n        //then call bMethod on all bs\r\n        bSet.forEach(b -&gt; verify(b, times(1)).bMethod());\r\n        bSet.forEach(Mockito::verifyNoMoreInteractions);\r\n    }\r\n```\r\n\r\nI tried mocking it, but was unsuccessful and need your help","title":"Mocking object in set","body":"<p>I have the following classes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter //lombok\n@AllArgsConstructor //lombok\npublic class A {\n    private Set&lt;B&gt; bSet;\n\n    public void aMethod() {\n        for (B b: bSet) b.bMethod();\n    }\n}\n\n@AllArgsConstructor //lombok\npublic class B {\n    public void bMethod() { \n        //do something\n    }\n}\n</code></pre>\n<p>I would like to write a test that checks if bMethod() got called for every element of bSet without caring about the Implementation of bMethod(). A unit test.</p>\n<p>This is my JUnit test case that needs to succeed:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Test\n    public void givenAWithBSet_whenAMethodIsCalled_thenCallBMethodOnAllBs() {\n        //GIVEN a with bSet\n        Set&lt;B&gt; bSet = new HashSet&lt;&gt;();\n        bSet.add(new B());\n        bSet.add(new B());\n        \n        A a = new A(bSet);\n\n        //WHEN aMethodIsCalled\n        a.aMethod();\n\n        //then call bMethod on all bs\n        bSet.forEach(b -&gt; verify(b, times(1)).bMethod());\n        bSet.forEach(Mockito::verifyNoMoreInteractions);\n    }\n</code></pre>\n<p>I tried mocking it, but was unsuccessful and need your help</p>\n"},{"tags":["java","maven","github","github-actions","cicd"],"comments":[{"owner":{"account_id":10402418,"reputation":12349,"user_id":7670262,"display_name":"Azeem"},"score":0,"creation_date":1675446072,"post_id":75339194,"comment_id":132937995,"body_markdown":"Does this answer your question? [How to create and save files using PowerShell in GitHub action?](https://stackoverflow.com/questions/75320606/how-to-create-and-save-files-using-powershell-in-github-action)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/75320606/how-to-create-and-save-files-using-powershell-in-github-action\">How to create and save files using PowerShell in GitHub action?</a>"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1675447803,"post_id":75339194,"comment_id":132938499,"body_markdown":"Why is code changing source code even if it&#39;s in test area. Such things should be done in `target` directory and never in `src` because it&#39;s under version control... The question is why do you need such a change?","body":"Why is code changing source code even if it&#39;s in test area. Such things should be done in <code>target</code> directory and never in <code>src</code> because it&#39;s under version control... The question is why do you need such a change?"}],"owner":{"account_id":7419576,"reputation":1,"user_id":5644492,"display_name":"Beksultan Nurkulov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675445716,"creation_date":1675445641,"question_id":75339194,"body_markdown":"My question is: I have Maven Project that generates txt file and I&#39;m running it from GitHub Actions. Generated files not pushing into GitHub repo.\r\n\r\nDo I need to add some script into yaml?\r\n\r\n```yml\r\nname: Java CI with Maven\r\n\r\non:\r\n  push:\r\n    branches: [ &quot;master&quot; ]\r\n  pull_request:\r\n    branches: [ &quot;master&quot; ]\r\njobs:\r\n  build:\r\n\r\n    runs-on: ubuntu-latest\r\n\r\n    steps:\r\n    - uses: actions/checkout@v3\r\n    - name: Set up JDK 11\r\n      uses: actions/setup-java@v3\r\n      with:\r\n        java-version: &#39;11&#39;\r\n        distribution: &#39;temurin&#39;\r\n        cache: maven\r\n    - name: Build with Maven\r\n      run: mvn clean test -DsuiteXMLFILE=testng.xml\r\n```\r\n\r\n\r\n![screenshot from github](https://i.stack.imgur.com/PDv9O.png)\r\n\r\n![ss from framework](https://i.stack.imgur.com/HQ95P.png)\r\n\r\nThese two files not updating at all. \r\n\r\nAll paths are correct (used relative path).","title":"Generated txt file not pushing to GitHub repo","body":"<p>My question is: I have Maven Project that generates txt file and I'm running it from GitHub Actions. Generated files not pushing into GitHub repo.</p>\n<p>Do I need to add some script into yaml?</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>name: Java CI with Maven\n\non:\n  push:\n    branches: [ &quot;master&quot; ]\n  pull_request:\n    branches: [ &quot;master&quot; ]\njobs:\n  build:\n\n    runs-on: ubuntu-latest\n\n    steps:\n    - uses: actions/checkout@v3\n    - name: Set up JDK 11\n      uses: actions/setup-java@v3\n      with:\n        java-version: '11'\n        distribution: 'temurin'\n        cache: maven\n    - name: Build with Maven\n      run: mvn clean test -DsuiteXMLFILE=testng.xml\n</code></pre>\n<p><img src=\"https://i.stack.imgur.com/PDv9O.png\" alt=\"screenshot from github\" /></p>\n<p><img src=\"https://i.stack.imgur.com/HQ95P.png\" alt=\"ss from framework\" /></p>\n<p>These two files not updating at all.</p>\n<p>All paths are correct (used relative path).</p>\n"},{"tags":["java","mongodb","nosql"],"answers":[{"tags":[],"owner":{"account_id":4235689,"reputation":1161,"user_id":3466890,"display_name":"Hayden Braxton"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1474221708,"creation_date":1474221708,"answer_id":39560927,"question_id":39560890,"body_markdown":"[This tutorial](https://spring.io/guides/gs/accessing-mongodb-data-rest/) might help you out. Your question is a very general question. A google search would probably be more helpful than asking on SO.","title":"Is there any way to expose mongodb database as rest api","body":"<p><a href=\"https://spring.io/guides/gs/accessing-mongodb-data-rest/\" rel=\"nofollow\">This tutorial</a> might help you out. Your question is a very general question. A google search would probably be more helpful than asking on SO.</p>\n"},{"tags":[],"owner":{"account_id":1765900,"reputation":5015,"user_id":1611791,"accept_rate":25,"display_name":"4J41"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1474221741,"creation_date":1474221741,"answer_id":39560933,"question_id":39560890,"body_markdown":"Please find the details in [this official page][1].\r\n\r\nSome of the REST Interfaces.\r\n\r\n - RESTHeart\r\n - Mongodb Java REST server\r\n\r\n  [1]: https://docs.mongodb.com/ecosystem/tools/http-interfaces/#rest-interfaces","title":"Is there any way to expose mongodb database as rest api","body":"<p>Please find the details in <a href=\"https://docs.mongodb.com/ecosystem/tools/http-interfaces/#rest-interfaces\" rel=\"nofollow\">this official page</a>.</p>\n\n<p>Some of the REST Interfaces.</p>\n\n<ul>\n<li>RESTHeart</li>\n<li>Mongodb Java REST server</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":27696879,"reputation":1,"user_id":21142396,"display_name":"Sachin Patidar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675445559,"creation_date":1675445360,"answer_id":75339152,"question_id":39560890,"body_markdown":"You can use https://github.com/abilliondreams/mongodb-generic-rest-api\r\n\r\nGeneric REST API to perform CRUD operation on a monogodb collection.","title":"Is there any way to expose mongodb database as rest api","body":"<p>You can use <a href=\"https://github.com/abilliondreams/mongodb-generic-rest-api\" rel=\"nofollow noreferrer\">https://github.com/abilliondreams/mongodb-generic-rest-api</a></p>\n<p>Generic REST API to perform CRUD operation on a monogodb collection.</p>\n"}],"owner":{"account_id":4165992,"reputation":1,"user_id":3414953,"display_name":"user3414953"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1443,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1675445559,"creation_date":1474221452,"question_id":39560890,"body_markdown":"Is there any way to expose mongodb database as rest api.\r\n\r\nI would like to expose my mongo DB database as a rest API. ","title":"Is there any way to expose mongodb database as rest api","body":"<p>Is there any way to expose mongodb database as rest api.</p>\n\n<p>I would like to expose my mongo DB database as a rest API. </p>\n"},{"tags":["java","eclipse","settings","javadoc","java-18"],"answers":[{"comments":[{"owner":{"account_id":26470102,"reputation":15,"user_id":20110842,"display_name":"Heracless123"},"score":0,"creation_date":1675447910,"post_id":75339150,"comment_id":132938531,"body_markdown":"I tried your solution and now the javadoc tags get highlighted. The Error still appeared and I disabled spell checking, now it won&#39;t get error marked. It seems to be a problem with the spell checking. Thank you for your help!","body":"I tried your solution and now the javadoc tags get highlighted. The Error still appeared and I disabled spell checking, now it won&#39;t get error marked. It seems to be a problem with the spell checking. Thank you for your help!"},{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":1,"creation_date":1675453233,"post_id":75339150,"comment_id":132939896,"body_markdown":"Cool - glad you got it working.  The main point is that you need  the `/** ... */` comment delimiters so that the Javadoc tool can distinguish between a &quot;Javadoc comment block&quot; (which *SHOULD* be incorporated into the Javadoc output) and &quot;ordinary&quot; comments (which shouldn&#39;t).","body":"Cool - glad you got it working.  The main point is that you need  the <code>&#47;** ... *&#47;</code> comment delimiters so that the Javadoc tool can distinguish between a &quot;Javadoc comment block&quot; (which <i>SHOULD</i> be incorporated into the Javadoc output) and &quot;ordinary&quot; comments (which shouldn&#39;t)."},{"owner":{"account_id":26470102,"reputation":15,"user_id":20110842,"display_name":"Heracless123"},"score":0,"creation_date":1675514547,"post_id":75339150,"comment_id":132947733,"body_markdown":"Ahh that makes sense. That no one has told me before xD thanks again for your help.","body":"Ahh that makes sense. That no one has told me before xD thanks again for your help."}],"tags":[],"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675445344,"creation_date":1675445344,"answer_id":75339150,"question_id":75339120,"body_markdown":"Try opening your Javadoc comment block with `/**` instead of `/*`:\r\n\r\n**Example:**\r\n\r\n&gt; https://www.oracle.com/technical-resources/articles/java/javadoc-tool.html\r\n&gt; \r\n&gt;     /**\r\n&gt;     * Returns an Image object that can then be painted on the screen. \r\n&gt;     * The url argument must specify an absolute &lt;a href=&quot;#{@link}&quot;&gt;{@link URL}&lt;/a&gt;. The name\r\n&gt;     * argument is a specifier that is relative to the url argument. \r\n&gt;     * &lt;p&gt;\r\n&gt;     * This method always returns immediately, whether or not the \r\n&gt;     * image exists. When this applet attempts to draw the image on\r\n&gt;     * the screen, the data will be loaded. The graphics primitives \r\n&gt;     * that draw the image will incrementally paint on the screen. \r\n&gt;     *\r\n&gt;     * @param  url  an absolute URL giving the base location of the image\r\n&gt;     * @param  name the location of the image, relative to the url argument\r\n&gt;     * @return      the image at the specified URL\r\n&gt;     * @see         Image\r\n&gt;     */\r\n&gt;     public Image getImage(URL url, String name) {\r\n&gt;       try {\r\n&gt;         return getImage(new URL(url, name));\r\n&gt;       } \r\n&gt;       catch (MalformedURLException e) {\r\n&gt;         return null;\r\n&gt;       }\r\n&gt;     }\r\n\r\n","title":"why does eclipse show an error message when using the javadoc tag @param when commenting?","body":"<p>Try opening your Javadoc comment block with <code>/**</code> instead of <code>/*</code>:</p>\n<p><strong>Example:</strong></p>\n<blockquote>\n<p><a href=\"https://www.oracle.com/technical-resources/articles/java/javadoc-tool.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/technical-resources/articles/java/javadoc-tool.html</a></p>\n<pre><code>/**\n* Returns an Image object that can then be painted on the screen. \n* The url argument must specify an absolute &lt;a href=&quot;#{@link}&quot;&gt;{@link URL}&lt;/a&gt;. The name\n* argument is a specifier that is relative to the url argument. \n* &lt;p&gt;\n* This method always returns immediately, whether or not the \n* image exists. When this applet attempts to draw the image on\n* the screen, the data will be loaded. The graphics primitives \n* that draw the image will incrementally paint on the screen. \n*\n* @param  url  an absolute URL giving the base location of the image\n* @param  name the location of the image, relative to the url argument\n* @return      the image at the specified URL\n* @see         Image\n*/\npublic Image getImage(URL url, String name) {\n  try {\n    return getImage(new URL(url, name));\n  } \n  catch (MalformedURLException e) {\n    return null;\n  }\n}\n</code></pre>\n</blockquote>\n"}],"owner":{"account_id":26470102,"reputation":15,"user_id":20110842,"display_name":"Heracless123"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":182,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75339150,"answer_count":1,"score":1,"last_activity_date":1675445344,"creation_date":1675445143,"question_id":75339120,"body_markdown":"I was typing some code in eclipse and as soon as I start to use the javadoc @param tag the IDE show me an error mark as seen in the picture. When I use the given solution from eclipse, the IDE corrects for example @param board to @paramboard but this is not the correct notation as I know. The javadoc tag @see don&#39;t show such error as seen in the picture. Do I miss some setting here or do I mistaken here something?\r\n\r\nThanks in advance!\r\n[Screenshot of my IDE with the error mark](https://i.stack.imgur.com/DeAOe.png)","title":"why does eclipse show an error message when using the javadoc tag @param when commenting?","body":"<p>I was typing some code in eclipse and as soon as I start to use the javadoc @param tag the IDE show me an error mark as seen in the picture. When I use the given solution from eclipse, the IDE corrects for example @param board to @paramboard but this is not the correct notation as I know. The javadoc tag @see don't show such error as seen in the picture. Do I miss some setting here or do I mistaken here something?</p>\n<p>Thanks in advance!\n<a href=\"https://i.stack.imgur.com/DeAOe.png\" rel=\"nofollow noreferrer\">Screenshot of my IDE with the error mark</a></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":11188,"reputation":75684,"user_id":21441,"accept_rate":100,"display_name":"Mark Elliot"},"score":3,"creation_date":1288494476,"post_id":4061659,"comment_id":4363322,"body_markdown":"What do you want to happen when the size limit is exceeded? (should the add fail? should elements be removed to make room? if you want to remove elements, what&#39;s the criteria for removal?)","body":"What do you want to happen when the size limit is exceeded? (should the add fail? should elements be removed to make room? if you want to remove elements, what&#39;s the criteria for removal?)"},{"owner":{"account_id":314650,"reputation":1571,"user_id":745828,"display_name":"nabster"},"score":0,"creation_date":1538715812,"post_id":4061659,"comment_id":92247666,"body_markdown":"Possible duplicate of [Define a fixed-size list in Java](https://stackoverflow.com/questions/5207162/define-a-fixed-size-list-in-java)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/5207162/define-a-fixed-size-list-in-java\">Define a fixed-size list in Java</a>"}],"answers":[{"comments":[{"owner":{"account_id":55301,"reputation":15295,"user_id":165589,"accept_rate":99,"display_name":"Koerr"},"score":3,"creation_date":1288496698,"post_id":4061683,"comment_id":4363411,"body_markdown":"`if(list.size()&gt;10){list.remove(0);}` like this?","body":"<code>if(list.size()&gt;10){list.remove(0);}</code> like this?"},{"owner":{"account_id":25591,"reputation":61024,"user_id":65868,"accept_rate":68,"display_name":"TofuBeer"},"score":0,"creation_date":1288500324,"post_id":4061683,"comment_id":4363561,"body_markdown":"you would do that in the overridden add method.  you would need to look at addAll too.","body":"you would do that in the overridden add method.  you would need to look at addAll too."},{"owner":{"account_id":35502,"reputation":28362,"user_id":100565,"accept_rate":59,"display_name":"MeBigFatGuy"},"score":0,"creation_date":1288543215,"post_id":4061683,"comment_id":4366152,"body_markdown":"You could just derive from ArrayList, and override add and addAll and do the above.","body":"You could just derive from ArrayList, and override add and addAll and do the above."}],"tags":[],"owner":{"account_id":25591,"reputation":61024,"user_id":65868,"accept_rate":68,"display_name":"TofuBeer"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1288494713,"creation_date":1288494713,"answer_id":4061683,"question_id":4061659,"body_markdown":"I would look at the java.util.Collections class source and develop a SizeLimitedList similar to how they do a checkedList.  Then on add I would delete the first entry from the list if the list was full.","title":"How to limit the number of entries in a java List?","body":"<p>I would look at the java.util.Collections class source and develop a SizeLimitedList similar to how they do a checkedList.  Then on add I would delete the first entry from the list if the list was full.</p>\n"},{"tags":[],"owner":{"account_id":5278793,"reputation":784,"user_id":4214827,"display_name":"Martin Forte"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1538713745,"creation_date":1538713745,"answer_id":52658368,"question_id":4061659,"body_markdown":"You could try create a new list with streams. If are only 10 don&#39;t should be a performance problem create a new list.\r\n\r\n    list = list.stream().limit(10).collect(Collectors.toList());\r\n","title":"How to limit the number of entries in a java List?","body":"<p>You could try create a new list with streams. If are only 10 don't should be a performance problem create a new list.</p>\n\n<pre><code>list = list.stream().limit(10).collect(Collectors.toList());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":146322,"reputation":392,"user_id":356700,"display_name":"johncurrier"},"score":0,"creation_date":1684191663,"post_id":75339116,"comment_id":134478515,"body_markdown":"That throws an `IndexOutOfBoundsException` if the source list is too small.","body":"That throws an <code>IndexOutOfBoundsException</code> if the source list is too small."}],"tags":[],"owner":{"account_id":1055952,"reputation":106,"user_id":1058668,"display_name":"Splash"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675445109,"creation_date":1675445109,"answer_id":75339116,"question_id":4061659,"body_markdown":"```\r\nList b = new ArrayList&lt;&gt;(a.subList(0, 10));\r\n```","title":"How to limit the number of entries in a java List?","body":"<pre><code>List b = new ArrayList&lt;&gt;(a.subList(0, 10));\n</code></pre>\n"}],"owner":{"account_id":55301,"reputation":15295,"user_id":165589,"accept_rate":99,"display_name":"Koerr"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15199,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":4061683,"answer_count":3,"score":3,"last_activity_date":1675445109,"creation_date":1288494142,"question_id":4061659,"body_markdown":"I know how to limit size in Map ([like this][1],using LinkedHashMap.removeEldestEntry method does exactly that)\r\n\r\nI want to know how to limit size in a List,what is a best way to implement?\r\n\r\nthanks for help :)\r\n\r\n  [1]: https://stackoverflow.com/questions/422181/how-do-i-limit-the-number-of-entries-in-a-java-hashtable","title":"How to limit the number of entries in a java List?","body":"<p>I know how to limit size in Map (<a href=\"https://stackoverflow.com/questions/422181/how-do-i-limit-the-number-of-entries-in-a-java-hashtable\">like this</a>,using LinkedHashMap.removeEldestEntry method does exactly that)</p>\n\n<p>I want to know how to limit size in a List,what is a best way to implement?</p>\n\n<p>thanks for help :)</p>\n"},{"tags":["java","eclipse","builder"],"comments":[{"owner":{"account_id":1861886,"reputation":3121,"user_id":1686330,"accept_rate":83,"display_name":"Dirk Lachowski"},"score":1,"creation_date":1428417000,"post_id":29493898,"comment_id":47147006,"body_markdown":"A quick google search for `eclipse plugin builder pattern` got me (among others) https://code.google.com/p/fluent-builders-generator-eclipse-plugin/","body":"A quick google search for <code>eclipse plugin builder pattern</code> got me (among others) <a href=\"https://code.google.com/p/fluent-builders-generator-eclipse-plugin/\" rel=\"nofollow noreferrer\">code.google.com/p/fluent-builders-generator-eclipse-plugin</a>"},{"owner":{"account_id":2787344,"reputation":14687,"user_id":2398375,"accept_rate":75,"display_name":"Vince"},"score":0,"creation_date":1428417027,"post_id":29493898,"comment_id":47147021,"body_markdown":"Unless you can somehow achieve this by making a template, Annotation Processing is the only thing I can think of. It allows you to create an annotation, such as `@Build`, then create a processor to look for that annotation in your source code, raise an error when there&#39;s no builder class (optional), and allow the client to generate the builder code similar to how one automatically declared unimplemented methods. As for plugins, I&#39;m sure you know the rules by now /: It sucks, but you can&#39;t request for tools on here","body":"Unless you can somehow achieve this by making a template, Annotation Processing is the only thing I can think of. It allows you to create an annotation, such as <code>@Build</code>, then create a processor to look for that annotation in your source code, raise an error when there&#39;s no builder class (optional), and allow the client to generate the builder code similar to how one automatically declared unimplemented methods. As for plugins, I&#39;m sure you know the rules by now /: It sucks, but you can&#39;t request for tools on here"},{"owner":{"account_id":3446101,"reputation":11395,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"score":1,"creation_date":1435241222,"post_id":29493898,"comment_id":50126433,"body_markdown":"@Dirk - I do not like your answer. It&#39;s not possible to downvote the comments but I am virtually giving you -1. Maybe you should not be happy just with the pure existence of a link found by google. I have tried the Fluent Builder Generator and it has not been updated for 10 years and generates quite complicated code instead of a nice simple builder.","body":"@Dirk - I do not like your answer. It&#39;s not possible to downvote the comments but I am virtually giving you -1. Maybe you should not be happy just with the pure existence of a link found by google. I have tried the Fluent Builder Generator and it has not been updated for 10 years and generates quite complicated code instead of a nice simple builder."},{"owner":{"account_id":1861886,"reputation":3121,"user_id":1686330,"accept_rate":83,"display_name":"Dirk Lachowski"},"score":0,"creation_date":1435300896,"post_id":29493898,"comment_id":50152721,"body_markdown":"@HonzaZidek I think you have misunderstood the point of my comment. The OP hasn&#39;t shown any effort to find an answer by himself. I only wanted to point out the fact that some simple googling got me answers (plural, that&#39;s why i have written &#39;among others&#39;). I know that a &quot;here do you have a link&quot; isn&#39;t an answer - that&#39;s why i have put it in a comment. Maybe i better had voted to close...","body":"@HonzaZidek I think you have misunderstood the point of my comment. The OP hasn&#39;t shown any effort to find an answer by himself. I only wanted to point out the fact that some simple googling got me answers (plural, that&#39;s why i have written &#39;among others&#39;). I know that a &quot;here do you have a link&quot; isn&#39;t an answer - that&#39;s why i have put it in a comment. Maybe i better had voted to close..."},{"owner":{"account_id":3446101,"reputation":11395,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"score":0,"creation_date":1435304559,"post_id":29493898,"comment_id":50154794,"body_markdown":"@Dirk: I would not close it! I did myself some research and I have not found any useful eclipse plugin for the builder - that&#39;s how I came to this post. So I would enjoy if someone may *answer* the OP&#39;s question, not to close it! You may show your ability to use google and find something really working, configurable and up-to-date and post it as an answer :)","body":"@Dirk: I would not close it! I did myself some research and I have not found any useful eclipse plugin for the builder - that&#39;s how I came to this post. So I would enjoy if someone may <i>answer</i> the OP&#39;s question, not to close it! You may show your ability to use google and find something really working, configurable and up-to-date and post it as an answer :)"},{"owner":{"account_id":1861886,"reputation":3121,"user_id":1686330,"accept_rate":83,"display_name":"Dirk Lachowski"},"score":0,"creation_date":1435310156,"post_id":29493898,"comment_id":50157965,"body_markdown":"@HonzaZidek Using my google foo? I&#39;m sorely tempted :)","body":"@HonzaZidek Using my google foo? I&#39;m sorely tempted :)"},{"owner":{"account_id":1861886,"reputation":3121,"user_id":1686330,"accept_rate":83,"display_name":"Dirk Lachowski"},"score":1,"creation_date":1435310790,"post_id":29493898,"comment_id":50158329,"body_markdown":"@HonzaZidek It&#39;s not an eclipse plugin but maybe you&#39;ll give it a try: https://github.com/mkarneim/pojobuilder","body":"@HonzaZidek It&#39;s not an eclipse plugin but maybe you&#39;ll give it a try: <a href=\"https://github.com/mkarneim/pojobuilder\" rel=\"nofollow noreferrer\">github.com/mkarneim/pojobuilder</a>"},{"owner":{"account_id":367746,"reputation":24129,"user_id":714112,"accept_rate":80,"display_name":"Sridhar Sarnobat"},"score":0,"creation_date":1521424349,"post_id":29493898,"comment_id":85709791,"body_markdown":"Eclipse badly needs this functionality. Someone with more patience than me please file an issue ;)","body":"Eclipse badly needs this functionality. Someone with more patience than me please file an issue ;)"},{"owner":{"account_id":4318345,"reputation":6373,"user_id":3527464,"accept_rate":100,"display_name":"Pyves"},"score":1,"creation_date":1534800828,"post_id":29493898,"comment_id":90827678,"body_markdown":"@Sridhar-Sarnobat actually there is a bug report, hidden inside Bugzilla: https://bugs.eclipse.org/bugs/show_bug.cgi?id=458364","body":"@Sridhar-Sarnobat actually there is a bug report, hidden inside Bugzilla: <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=458364\" rel=\"nofollow noreferrer\">bugs.eclipse.org/bugs/show_bug.cgi?id=458364</a>"},{"owner":{"account_id":3746709,"reputation":1,"user_id":3115223,"display_name":"user3115223"},"score":0,"creation_date":1635173191,"post_id":29493898,"comment_id":123221760,"body_markdown":"One problem of lombok. It generate all in compile time. This can be a perfomance neck. Use with caution.","body":"One problem of lombok. It generate all in compile time. This can be a perfomance neck. Use with caution."}],"answers":[{"comments":[{"owner":{"account_id":2670372,"reputation":911,"user_id":2307921,"display_name":"Carsten Hoffmann"},"score":5,"creation_date":1445600492,"post_id":31655204,"comment_id":54401690,"body_markdown":"I do not think that you could write a template for a builder pattern. Even if it would work, it is a bad idea, because templates do not provide a way to be updated, you would have to manually delete the code and reapply the template.","body":"I do not think that you could write a template for a builder pattern. Even if it would work, it is a bad idea, because templates do not provide a way to be updated, you would have to manually delete the code and reapply the template."}],"tags":[],"owner":{"account_id":3889821,"reputation":586,"user_id":3220336,"accept_rate":90,"display_name":"unique_ptr"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1438005633,"creation_date":1438005633,"answer_id":31655204,"question_id":29493898,"body_markdown":"You could add your own template window -&gt; preferences -&gt; java -&gt; editor -&gt; templates and this will be activated with the content proposal but not by refactor action","title":"Automatically create builder for class in Eclipse","body":"<p>You could add your own template window -> preferences -> java -> editor -> templates and this will be activated with the content proposal but not by refactor action</p>\n"},{"comments":[{"owner":{"account_id":2670372,"reputation":911,"user_id":2307921,"display_name":"Carsten Hoffmann"},"score":1,"creation_date":1445600378,"post_id":31819370,"comment_id":54401622,"body_markdown":"A definitie +1 for directing me to a great project that I had never seen before. This solves the problem and simplifies some of the other hassles with generating boilerplate code as well :).","body":"A definitie +1 for directing me to a great project that I had never seen before. This solves the problem and simplifies some of the other hassles with generating boilerplate code as well :)."},{"owner":{"account_id":153021,"reputation":8348,"user_id":367988,"accept_rate":71,"display_name":"Basil Musa"},"score":2,"creation_date":1459201558,"post_id":31819370,"comment_id":60170507,"body_markdown":"Impressive capabilities. Wonder why lombok isn&#39;t popular?","body":"Impressive capabilities. Wonder why lombok isn&#39;t popular?"},{"owner":{"account_id":329906,"reputation":12901,"user_id":653708,"accept_rate":90,"display_name":"8bitjunkie"},"score":1,"creation_date":1491922953,"post_id":31819370,"comment_id":73762426,"body_markdown":"I found this answer when looking for an alternative to Lombok because the `@Builder` annotation still (in April 2017) does not work for members which are provided by parent classes (as Jaco mentions).","body":"I found this answer when looking for an alternative to Lombok because the <code>@Builder</code> annotation still (in April 2017) does not work for members which are provided by parent classes (as Jaco mentions)."},{"owner":{"account_id":298287,"reputation":2789,"user_id":604237,"accept_rate":47,"display_name":"inor"},"score":6,"creation_date":1523369316,"post_id":31819370,"comment_id":86526505,"body_markdown":"@BasilMusa whether lombok is or is not popular you should read &quot;What are the risks with Project Lombok?&quot; here: https://stackoverflow.com/questions/4589184/what-are-the-risks-with-project-lombok    and also &quot;Is it safe to use Project Lombok?&quot; here: https://stackoverflow.com/questions/3852091/is-it-safe-to-use-project-lombok","body":"@BasilMusa whether lombok is or is not popular you should read &quot;What are the risks with Project Lombok?&quot; here: <a href=\"https://stackoverflow.com/questions/4589184/what-are-the-risks-with-project-lombok\" title=\"what are the risks with project lombok\">stackoverflow.com/questions/4589184/&hellip;</a>    and also &quot;Is it safe to use Project Lombok?&quot; here: <a href=\"https://stackoverflow.com/questions/3852091/is-it-safe-to-use-project-lombok\" title=\"is it safe to use project lombok\">stackoverflow.com/questions/3852091/&hellip;</a>"}],"tags":[],"owner":{"account_id":4197127,"reputation":544,"user_id":3438277,"display_name":"jaco"},"comment_count":4,"down_vote_count":1,"up_vote_count":30,"is_accepted":false,"score":29,"last_activity_date":1438722514,"creation_date":1438722514,"answer_id":31819370,"question_id":29493898,"body_markdown":"You may want to look at [lombok][1] annotations to generate builders without the boiler plate code. For example:\r\n\r\n    @Builder\r\n    public class MyPojo {\r\n        private String name;\r\n    }\r\n        \r\n    MyPojoBuilder.builder().name(&quot;yourame&quot;).build();\r\n\r\nThe limitation is that this doesn&#39;t seem to work with abstract classes.\r\n\r\n  [1]: https://projectlombok.org","title":"Automatically create builder for class in Eclipse","body":"<p>You may want to look at <a href=\"https://projectlombok.org\">lombok</a> annotations to generate builders without the boiler plate code. For example:</p>\n\n<pre><code>@Builder\npublic class MyPojo {\n    private String name;\n}\n\nMyPojoBuilder.builder().name(\"yourame\").build();\n</code></pre>\n\n<p>The limitation is that this doesn't seem to work with abstract classes.</p>\n"},{"comments":[{"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"score":0,"creation_date":1442969031,"post_id":32729063,"comment_id":53300610,"body_markdown":"Unfortunately Google Code is closing, so this link will likely become invalid in a few months. Is this project available somewhere else?","body":"Unfortunately Google Code is closing, so this link will likely become invalid in a few months. Is this project available somewhere else?"},{"owner":{"account_id":5955901,"reputation":10524,"user_id":4682610,"accept_rate":29,"display_name":"Florian Schaetz"},"score":0,"creation_date":1459424034,"post_id":32729063,"comment_id":60286372,"body_markdown":"Unfortunately, this plugin doesn&#39;t seem to work anymore. It creates a builder but seems to be unable to list the fields.","body":"Unfortunately, this plugin doesn&#39;t seem to work anymore. It creates a builder but seems to be unable to list the fields."},{"owner":{"account_id":3739057,"reputation":3667,"user_id":3109248,"display_name":"Khanna111"},"score":0,"creation_date":1463436410,"post_id":32729063,"comment_id":62054786,"body_markdown":"@FlorianSchaetz: I just tried it on eclipse mars and it worked for me.","body":"@FlorianSchaetz: I just tried it on eclipse mars and it worked for me."},{"owner":{"account_id":189393,"reputation":23192,"user_id":428705,"accept_rate":76,"display_name":"Vivek Goel"},"score":0,"creation_date":1470779516,"post_id":32729063,"comment_id":65085989,"body_markdown":"@Khanna111 It is not working for me also. Using eclipse luna","body":"@Khanna111 It is not working for me also. Using eclipse luna"},{"owner":{"account_id":1036855,"reputation":13868,"user_id":1043882,"accept_rate":79,"display_name":"hasanghaforian"},"score":2,"creation_date":1488862355,"post_id":32729063,"comment_id":72408224,"body_markdown":"I used this plugin on `Eclipse Neon.2 Release (4.6.2)` and it works. Also this plugin has an advantage which does not need to annotations.","body":"I used this plugin on <code>Eclipse Neon.2 Release (4.6.2)</code> and it works. Also this plugin has an advantage which does not need to annotations."},{"owner":{"account_id":329906,"reputation":12901,"user_id":653708,"accept_rate":90,"display_name":"8bitjunkie"},"score":0,"creation_date":1491923789,"post_id":32729063,"comment_id":73763002,"body_markdown":"This plugin does not work when used on subclasses. The builder does not include the fields of a superclass.","body":"This plugin does not work when used on subclasses. The builder does not include the fields of a superclass."},{"owner":{"account_id":8692600,"reputation":484,"user_id":6505091,"display_name":"kaba713"},"score":0,"creation_date":1539955775,"post_id":32729063,"comment_id":92699337,"body_markdown":"This Builder also only uses non final fields.I do not know why it works like that. But still the most usable builder for me.","body":"This Builder also only uses non final fields.I do not know why it works like that. But still the most usable builder for me."}],"tags":[],"owner":{"account_id":3739057,"reputation":3667,"user_id":3109248,"display_name":"Khanna111"},"comment_count":7,"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1675444950,"creation_date":1442967300,"answer_id":32729063,"question_id":29493898,"body_markdown":"Maybe I am late to the party.\r\n\r\nEclipse on its own does not provide a way to generate code to support builder pattern. However it can be extended through plugins to enhance the functionality.\r\n\r\nThere is this plugin that I use this:\r\n\r\nhttps://github.com/henningjensen/bpep\r\n\r\n\r\n\r\nEdit: After 5 years, revisiting this topic, would recommend to use lombok that has become industry standard anyway and is also IDE agnostic ==&gt; would work if your team mates use a variety of IDEs.\r\nCheck out this annotation. You could also include pattern [inheritance][1] among classes. \r\n\r\n    @Builder(toBuilder = true)\r\n    // or you could use this for inheritance\r\n    @SuperBuilder\r\n\r\n\r\n\r\n  [1]: https://www.baeldung.com/lombok-builder-inheritance","title":"Automatically create builder for class in Eclipse","body":"<p>Maybe I am late to the party.</p>\n<p>Eclipse on its own does not provide a way to generate code to support builder pattern. However it can be extended through plugins to enhance the functionality.</p>\n<p>There is this plugin that I use this:</p>\n<p><a href=\"https://github.com/henningjensen/bpep\" rel=\"nofollow noreferrer\">https://github.com/henningjensen/bpep</a></p>\n<p>Edit: After 5 years, revisiting this topic, would recommend to use lombok that has become industry standard anyway and is also IDE agnostic ==&gt; would work if your team mates use a variety of IDEs.\nCheck out this annotation. You could also include pattern <a href=\"https://www.baeldung.com/lombok-builder-inheritance\" rel=\"nofollow noreferrer\">inheritance</a> among classes.</p>\n<pre><code>@Builder(toBuilder = true)\n// or you could use this for inheritance\n@SuperBuilder\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4487505,"reputation":131,"user_id":3649631,"display_name":"Atmega"},"score":0,"creation_date":1523906200,"post_id":39818392,"comment_id":86744722,"body_markdown":"its quite simple solution - create separate separate project with templates, and generate java classes form main","body":"its quite simple solution - create separate separate project with templates, and generate java classes form main"}],"tags":[],"owner":{"account_id":4487505,"reputation":131,"user_id":3649631,"display_name":"Atmega"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1475421085,"creation_date":1475421085,"answer_id":39818392,"question_id":29493898,"body_markdown":"Try https://github.com/vojtek/write-it-once\r\n\r\n    package ${cls.package.name};\r\n\r\n    public class ${cls.shortName}Builder {\r\n\r\n    public static ${cls.name}Builder builder() {\r\n        return new ${cls.name}Builder();\r\n    }\r\n    &lt;% for(field in cls.fields) {%&gt;\r\n    private ${field.type.name} ${field.name};\r\n    &lt;% } %&gt;\r\n    &lt;% for(field in cls.fields) {%&gt;\r\n    public ${cls.name}Builder ${field.name}(${field.type.name} ${field.name}) {\r\n        this.${field.name} = ${field.name};\r\n        return this;\r\n    }\r\n    &lt;% } %&gt;\r\n    public ${cls.name} build() {\r\n        final ${cls.name} data = new ${cls.name}();\r\n    &lt;% for(field in cls.fields) {%&gt;\r\n        data.${field.setter.name}(this.${field.name});\r\n    &lt;% } %&gt;\r\n        return data;\r\n    }\r\n    }","title":"Automatically create builder for class in Eclipse","body":"<p>Try <a href=\"https://github.com/vojtek/write-it-once\" rel=\"nofollow\">https://github.com/vojtek/write-it-once</a></p>\n\n<pre><code>package ${cls.package.name};\n\npublic class ${cls.shortName}Builder {\n\npublic static ${cls.name}Builder builder() {\n    return new ${cls.name}Builder();\n}\n&lt;% for(field in cls.fields) {%&gt;\nprivate ${field.type.name} ${field.name};\n&lt;% } %&gt;\n&lt;% for(field in cls.fields) {%&gt;\npublic ${cls.name}Builder ${field.name}(${field.type.name} ${field.name}) {\n    this.${field.name} = ${field.name};\n    return this;\n}\n&lt;% } %&gt;\npublic ${cls.name} build() {\n    final ${cls.name} data = new ${cls.name}();\n&lt;% for(field in cls.fields) {%&gt;\n    data.${field.setter.name}(this.${field.name});\n&lt;% } %&gt;\n    return data;\n}\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":197030,"reputation":1674,"user_id":440827,"accept_rate":86,"display_name":"Christian"},"score":1,"creation_date":1551779643,"post_id":44576754,"comment_id":96755418,"body_markdown":"Yes Spark builder works very well. And it has a lot of options. Like stage builder. Have a look.","body":"Yes Spark builder works very well. And it has a lot of options. Like stage builder. Have a look."}],"tags":[],"owner":{"account_id":45915,"reputation":3990,"user_id":135535,"accept_rate":59,"display_name":"Christoph"},"comment_count":1,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1598897340,"creation_date":1497559587,"answer_id":44576754,"question_id":29493898,"body_markdown":"I currently use **Spark Builder Generator** with Eclipse Neon.1a Release (4.6.1) and it works well. \r\n\r\n* https://marketplace.eclipse.org/content/sparkbuildergenerator \r\n* https://github.com/helospark/SparkBuilderGenerator\r\n\r\n\r\n&gt; You can set the preferences under:  \r\nWindow-&gt;Preferences-&gt;Java-&gt;Spark Builder Generator","title":"Automatically create builder for class in Eclipse","body":"<p>I currently use <strong>Spark Builder Generator</strong> with Eclipse Neon.1a Release (4.6.1) and it works well.</p>\n<ul>\n<li><a href=\"https://marketplace.eclipse.org/content/sparkbuildergenerator\" rel=\"nofollow noreferrer\">https://marketplace.eclipse.org/content/sparkbuildergenerator</a></li>\n<li><a href=\"https://github.com/helospark/SparkBuilderGenerator\" rel=\"nofollow noreferrer\">https://github.com/helospark/SparkBuilderGenerator</a></li>\n</ul>\n<blockquote>\n<p>You can set the preferences under:<br />\nWindow-&gt;Preferences-&gt;Java-&gt;Spark Builder Generator</p>\n</blockquote>\n"}],"owner":{"account_id":1036855,"reputation":13868,"user_id":1043882,"accept_rate":79,"display_name":"hasanghaforian"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38110,"favorite_count":0,"down_vote_count":0,"up_vote_count":51,"accepted_answer_id":32729063,"answer_count":5,"score":51,"last_activity_date":1675444950,"creation_date":1428416509,"question_id":29493898,"body_markdown":"Is there a way to use an *automatic builder* to create builder ([Joshua Bloch&#39;s Builder Pattern][1]) for classes in `Eclipse`? For example an option in the menu, a plugin or something else. I could not find anything under &quot;*`Refactor`*&quot;.\r\n\r\n  [1]: http://www.informit.com/articles/article.aspx?p=1216151&amp;seqNum=2","title":"Automatically create builder for class in Eclipse","body":"<p>Is there a way to use an <em>automatic builder</em> to create builder (<a href=\"http://www.informit.com/articles/article.aspx?p=1216151&amp;seqNum=2\" rel=\"noreferrer\">Joshua Bloch's Builder Pattern</a>) for classes in <code>Eclipse</code>? For example an option in the menu, a plugin or something else. I could not find anything under \"<em><code>Refactor</code></em>\".</p>\n"},{"tags":["java","spring-batch"],"comments":[{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":0,"creation_date":1401031214,"post_id":23847661,"comment_id":36716676,"body_markdown":"But is the FlatFileItemReader able to read zip files?","body":"But is the FlatFileItemReader able to read zip files?"},{"owner":{"account_id":3412463,"reputation":1246,"user_id":2862100,"accept_rate":33,"display_name":"Luke"},"score":0,"creation_date":1401057877,"post_id":23847661,"comment_id":36724493,"body_markdown":"inputZipFile is a leftover. I am passing txt file.","body":"inputZipFile is a leftover. I am passing txt file."}],"answers":[{"comments":[{"owner":{"account_id":3412463,"reputation":1246,"user_id":2862100,"accept_rate":33,"display_name":"Luke"},"score":6,"creation_date":1406146920,"post_id":23860699,"comment_id":38720664,"body_markdown":"BTW Michael Minella has explained this AOP magic here: http://stackoverflow.com/questions/21241683/spring-batch-beforestep-does-not-work-with-stepscope/21941127#21941127","body":"BTW Michael Minella has explained this AOP magic here: <a href=\"http://stackoverflow.com/questions/21241683/spring-batch-beforestep-does-not-work-with-stepscope/21941127#21941127\" title=\"spring batch beforestep does not work with stepscope\">stackoverflow.com/questions/21241683/&hellip;</a>"},{"owner":{"account_id":1851020,"reputation":4117,"user_id":1677594,"display_name":"Guillaume Husta"},"score":2,"creation_date":1489573273,"post_id":23860699,"comment_id":72726339,"body_markdown":"Indeed @StepScope is defined as `@Scope(value = &quot;step&quot;, proxyMode = ScopedProxyMode.TARGET_CLASS)`","body":"Indeed @StepScope is defined as <code>@Scope(value = &quot;step&quot;, proxyMode = ScopedProxyMode.TARGET_CLASS)</code>"}],"tags":[],"owner":{"account_id":3412463,"reputation":1246,"user_id":2862100,"accept_rate":33,"display_name":"Luke"},"comment_count":2,"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1401058239,"creation_date":1401058239,"answer_id":23860699,"question_id":23847661,"body_markdown":"The issue disappeared when I change the return type of my reader bean from Item&lt;Player&gt; to FlatFileItemReader&lt;Player&gt;. It is still not clear to me why this is a problem since chunk().reader() accepts ItemReader&lt;?&gt; as an input. I assume that there is some AOP magic under the hood which does FlatFileReader init and matches by the return type.","title":"Spring Batch: org.springframework.batch.item.ReaderNotOpenException: Reader must be open before it can be read","body":"<p>The issue disappeared when I change the return type of my reader bean from Item to FlatFileItemReader. It is still not clear to me why this is a problem since chunk().reader() accepts ItemReader as an input. I assume that there is some AOP magic under the hood which does FlatFileReader init and matches by the return type.</p>\n"},{"tags":[],"owner":{"account_id":4793143,"reputation":111,"user_id":3871744,"display_name":"user3871744"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1406185103,"creation_date":1406185103,"answer_id":24927005,"question_id":23847661,"body_markdown":"It is because ItemReader don&#39;t have the open method, using hte StepScope will create a proxy class based on the return type. It is also ok to return ItemStreamReader","title":"Spring Batch: org.springframework.batch.item.ReaderNotOpenException: Reader must be open before it can be read","body":"<p>It is because ItemReader don't have the open method, using hte StepScope will create a proxy class based on the return type. It is also ok to return ItemStreamReader</p>\n"},{"comments":[{"owner":{"account_id":2299600,"reputation":357,"user_id":2020180,"display_name":"Kyung Hwan  Min"},"score":0,"creation_date":1583163994,"post_id":30096121,"comment_id":107014553,"body_markdown":"It works for me.\n1. Add @StepScope\n2. For each ItemReader, ItemWriter method where return type is ItemReader, ItemWriter, change return type to actual implementation class such as JdbcCursorItemReader, JdbcCursorItemWriter.  Also, if you have Exception of &quot;close&quot; of reader, add @Bean(destroyMethod=&quot;&quot;)","body":"It works for me. 1. Add @StepScope 2. For each ItemReader, ItemWriter method where return type is ItemReader, ItemWriter, change return type to actual implementation class such as JdbcCursorItemReader, JdbcCursorItemWriter.  Also, if you have Exception of &quot;close&quot; of reader, add @Bean(destroyMethod=&quot;&quot;)"}],"tags":[],"owner":{"account_id":2221557,"reputation":3028,"user_id":1960816,"display_name":"Nick Vanderhoven"},"comment_count":1,"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1430988452,"creation_date":1430988452,"answer_id":30096121,"question_id":23847661,"body_markdown":"Since you put the reader in `StepScope`, the bean return type should be the implementing type `FlatFileItemReader`:\r\n\r\n    @Bean\r\n    @StepScope\r\n    public FlatFileItemReader&lt;Player&gt; reader(@Value(&quot;#{jobParameters[inputZipfile]}&quot;) String inputZipfile) {\r\n                ...\r\n                return reader;\r\n    }\r\n\r\nIf you specify the interface, the Spring proxy only has access to the methods and annotations specified on the interface `ItemReader` and is missing important annotations. There is also a warning (with a typo) in the logs:\r\n\r\n    2015-05-07 10:40:22,733 WARN  [main] org.springframework.batch.item.ItemReader is an interface.  The implementing class will not be queried for annotation based listener configurations.  If using @StepScope on a @Bean method, be sure to return the implementing class so listner annotations can be used.\r\n    2015-05-07 10:40:22,748 WARN  [main] org.springframework.batch.item.ItemReader is an interface.  The implementing class will not be queried for annotation based listener configurations.  If using @StepScope on a @Bean method, be sure to return the implementing class so listner annotations can be used. \r\n\r\nCurrently the Spring Boot Batch example is also returning the ItemReader, so I guess other people will struggle with the same issues.","title":"Spring Batch: org.springframework.batch.item.ReaderNotOpenException: Reader must be open before it can be read","body":"<p>Since you put the reader in <code>StepScope</code>, the bean return type should be the implementing type <code>FlatFileItemReader</code>:</p>\n\n<pre><code>@Bean\n@StepScope\npublic FlatFileItemReader&lt;Player&gt; reader(@Value(\"#{jobParameters[inputZipfile]}\") String inputZipfile) {\n            ...\n            return reader;\n}\n</code></pre>\n\n<p>If you specify the interface, the Spring proxy only has access to the methods and annotations specified on the interface <code>ItemReader</code> and is missing important annotations. There is also a warning (with a typo) in the logs:</p>\n\n<pre><code>2015-05-07 10:40:22,733 WARN  [main] org.springframework.batch.item.ItemReader is an interface.  The implementing class will not be queried for annotation based listener configurations.  If using @StepScope on a @Bean method, be sure to return the implementing class so listner annotations can be used.\n2015-05-07 10:40:22,748 WARN  [main] org.springframework.batch.item.ItemReader is an interface.  The implementing class will not be queried for annotation based listener configurations.  If using @StepScope on a @Bean method, be sure to return the implementing class so listner annotations can be used. \n</code></pre>\n\n<p>Currently the Spring Boot Batch example is also returning the ItemReader, so I guess other people will struggle with the same issues.</p>\n"},{"tags":[],"owner":{"account_id":1080401,"reputation":599,"user_id":1077548,"accept_rate":79,"display_name":"bodtx"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1452166439,"creation_date":1452166439,"answer_id":34654115,"question_id":23847661,"body_markdown":"Same problem here.\r\nChanging return type of my reader to the real implementation and adding to the reader\r\n\r\n    implements ItemStream\r\n\r\nDid the trick for me","title":"Spring Batch: org.springframework.batch.item.ReaderNotOpenException: Reader must be open before it can be read","body":"<p>Same problem here.\nChanging return type of my reader to the real implementation and adding to the reader</p>\n\n<pre><code>implements ItemStream\n</code></pre>\n\n<p>Did the trick for me</p>\n"},{"tags":[],"owner":{"account_id":4760125,"reputation":7,"user_id":6612111,"display_name":"Kiran Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1514452555,"creation_date":1514452555,"answer_id":48004717,"question_id":23847661,"body_markdown":"I think you should increase your chunk size in processPlayerStats() step bean class, i.e from chunk(10) to chunk(100/more may be). ","title":"Spring Batch: org.springframework.batch.item.ReaderNotOpenException: Reader must be open before it can be read","body":"<p>I think you should increase your chunk size in processPlayerStats() step bean class, i.e from chunk(10) to chunk(100/more may be). </p>\n"},{"comments":[{"owner":{"account_id":2662809,"reputation":1287,"user_id":2302083,"display_name":"Bhavin Shah"},"score":0,"creation_date":1571136238,"post_id":50528449,"comment_id":103131654,"body_markdown":"This actually worked for me after struggling for 1.5 days.","body":"This actually worked for me after struggling for 1.5 days."},{"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":1,"creation_date":1585317006,"post_id":50528449,"comment_id":107723888,"body_markdown":"This is a bad trick, not the right solution. Spring calls `reader.open()` automatically if you give him the possibility to do so: your `@Bean` method must return the implementing class as recommended by other answers.","body":"This is a bad trick, not the right solution. Spring calls <code>reader.open()</code> automatically if you give him the possibility to do so: your <code>@Bean</code> method must return the implementing class as recommended by other answers."},{"owner":{"account_id":1161864,"reputation":2061,"user_id":1141215,"display_name":"PJ_Finnegan"},"score":0,"creation_date":1633686492,"post_id":50528449,"comment_id":122831442,"body_markdown":"Thanks to this hack, I could recycle a Chunk step reader into a Tasklet step.","body":"Thanks to this hack, I could recycle a Chunk step reader into a Tasklet step."}],"tags":[],"owner":{"account_id":2149542,"reputation":767,"user_id":1906350,"display_name":"Amitabha Roy"},"comment_count":3,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1527248621,"creation_date":1527248621,"answer_id":50528449,"question_id":23847661,"body_markdown":"I have fixed it by:\r\n\r\n    reader.open(new ExecutionContext());","title":"Spring Batch: org.springframework.batch.item.ReaderNotOpenException: Reader must be open before it can be read","body":"<p>I have fixed it by:</p>\n\n<pre><code>reader.open(new ExecutionContext());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9758900,"reputation":487,"user_id":7234608,"display_name":"Ray"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1544601979,"creation_date":1544601979,"answer_id":53738574,"question_id":23847661,"body_markdown":"The method I defined is like below:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n        @Bean\r\n        @StepScope\r\n        public ItemReader&lt;BP&gt; BPReader(){\r\n           \r\n            JdbcCursorItemReader&lt;BP&gt; itemReader = new JdbcCursorItemReader&lt;BP&gt;();\r\n            ...\r\n            return itemReader;\r\n        }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nThe type I defined in the method is ItemReader which is an interface, the return type is JdbcCursorItemReader which is a sub-class of it. By changing the return type defination to JdbcCursorItemReader solved my problem","title":"Spring Batch: org.springframework.batch.item.ReaderNotOpenException: Reader must be open before it can be read","body":"<p>The method I defined is like below:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>    @Bean\r\n    @StepScope\r\n    public ItemReader&lt;BP&gt; BPReader(){\r\n       \r\n        JdbcCursorItemReader&lt;BP&gt; itemReader = new JdbcCursorItemReader&lt;BP&gt;();\r\n        ...\r\n        return itemReader;\r\n    }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>The type I defined in the method is ItemReader which is an interface, the return type is JdbcCursorItemReader which is a sub-class of it. By changing the return type defination to JdbcCursorItemReader solved my problem</p>\n"},{"tags":[],"owner":{"account_id":362810,"reputation":718,"user_id":706208,"display_name":"apetrelli"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675444941,"creation_date":1675444941,"answer_id":75339091,"question_id":23847661,"body_markdown":"Instead of returning `ItemReader`, return `ItemStreamReader`, since it&#39;s a combination of `ItemReader` and `ItemStream` interfaces, so it recognizes that there is the `open` method that needs to be called.","title":"Spring Batch: org.springframework.batch.item.ReaderNotOpenException: Reader must be open before it can be read","body":"<p>Instead of returning <code>ItemReader</code>, return <code>ItemStreamReader</code>, since it's a combination of <code>ItemReader</code> and <code>ItemStream</code> interfaces, so it recognizes that there is the <code>open</code> method that needs to be called.</p>\n"}],"owner":{"account_id":3412463,"reputation":1246,"user_id":2862100,"accept_rate":33,"display_name":"Luke"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31000,"favorite_count":0,"down_vote_count":0,"up_vote_count":31,"answer_count":8,"score":31,"last_activity_date":1675444941,"creation_date":1400951374,"question_id":23847661,"body_markdown":"I read SO related questions but the solutions don&#39;t work for me.\r\n\r\nI get the `org.springframework.batch.item.ReaderNotOpenException: Reader must be open before it can be read` exception.\r\n\r\nBelow is my configuration:\r\n\r\n\r\n \r\n\r\n    @Bean\r\n    @StepScope\r\n    public ItemReader&lt;Player&gt; reader(@Value(&quot;#{jobParameters[inputZipfile]}&quot;) String inputZipfile) {\r\n            \t\tfinal String [] header = { .. this part omitted for brevity ... };\r\n                    FlatFileItemReader&lt;Player&gt; reader = new FlatFileItemReader&lt;Player&gt;();\r\n                    \r\n            \r\n                    System.out.println(&quot;\\t\\t\\t\\t\\t&quot;+inputZipfile);\r\n            \r\n                    reader.setResource(new ClassPathResource(inputZipfile));\r\n                    reader.setLineMapper(new DefaultLineMapper&lt;Player&gt;() {{\r\n                        setLineTokenizer(new DelimitedLineTokenizer() {{\r\n                            setNames( header );\r\n                        }});\r\n                        setFieldSetMapper(new BeanWrapperFieldSetMapper&lt;Player&gt;() {{\r\n                            setTargetType(Player.class);\r\n                        }});\r\n                    }});\r\n                    reader.setComments( header );\r\n                    return reader;\r\n    }\r\n            \t\r\n    @Bean\r\n    @StepScope\r\n    public ItemProcessor&lt;Player, PlayersStats&gt; processor(@Value(&quot;#{jobParameters[statType]}&quot;) String statType,\r\n            \t\t\t\t\t\t\t\t\t\t\t\t\t\t @Value(&quot;#{jobParameters[season]}&quot;) String season){\r\n            \t\tPlayersStatsProcessor psp = new PlayersStatsProcessor();\r\n            \t\tpsp.setStatisticType( StatisticType.valueOf(statType) );\r\n            \t\tpsp.setSeason( season );\r\n                \treturn psp;\r\n    }\r\n            \t\r\n            \t\r\n    @Bean\r\n    @StepScope\r\n    public ItemWriter&lt;PlayersStats&gt; writer(){\r\n            \treturn new CustomWriter();\r\n    }\r\n        \r\n        \r\n    @Bean\r\n    public Job generateStatisticsJob() {\r\n            \r\n            return this.jobs.get(&quot;generateStatisticsJob&quot;)\r\n                    .incrementer(new RunIdIncrementer())\r\n                    .start(processPlayerStats())\r\n                    //.end()\r\n                    .build();\r\n    }\r\n            \t\r\n    @Bean\r\n    public Step processPlayerStats() {\r\n               return this.steps.get(&quot;processPlayerStats&quot;)        \r\n                            .&lt;Player, PlayersStats&gt; chunk(10)\r\n                            .reader(reader(null))\r\n                            .processor(processor(null,null))\r\n                            .writer(writer())\r\n                            .build();\r\n    }\r\n\r\nThe inputZipFile variable is set properly and the file exists on the drive.\r\nI checked in the FlatFileItemReader code and the ReaderNotOpenException occurs when the reader member of the reader class is not set. The reader member is set in doOpen method.\r\nIt looks that doOpen is not called. The question is why ?\r\n\r\n","title":"Spring Batch: org.springframework.batch.item.ReaderNotOpenException: Reader must be open before it can be read","body":"<p>I read SO related questions but the solutions don't work for me.</p>\n\n<p>I get the <code>org.springframework.batch.item.ReaderNotOpenException: Reader must be open before it can be read</code> exception.</p>\n\n<p>Below is my configuration:</p>\n\n<pre><code>@Bean\n@StepScope\npublic ItemReader&lt;Player&gt; reader(@Value(\"#{jobParameters[inputZipfile]}\") String inputZipfile) {\n                final String [] header = { .. this part omitted for brevity ... };\n                FlatFileItemReader&lt;Player&gt; reader = new FlatFileItemReader&lt;Player&gt;();\n\n\n                System.out.println(\"\\t\\t\\t\\t\\t\"+inputZipfile);\n\n                reader.setResource(new ClassPathResource(inputZipfile));\n                reader.setLineMapper(new DefaultLineMapper&lt;Player&gt;() {{\n                    setLineTokenizer(new DelimitedLineTokenizer() {{\n                        setNames( header );\n                    }});\n                    setFieldSetMapper(new BeanWrapperFieldSetMapper&lt;Player&gt;() {{\n                        setTargetType(Player.class);\n                    }});\n                }});\n                reader.setComments( header );\n                return reader;\n}\n\n@Bean\n@StepScope\npublic ItemProcessor&lt;Player, PlayersStats&gt; processor(@Value(\"#{jobParameters[statType]}\") String statType,\n                                                                 @Value(\"#{jobParameters[season]}\") String season){\n                PlayersStatsProcessor psp = new PlayersStatsProcessor();\n                psp.setStatisticType( StatisticType.valueOf(statType) );\n                psp.setSeason( season );\n                return psp;\n}\n\n\n@Bean\n@StepScope\npublic ItemWriter&lt;PlayersStats&gt; writer(){\n            return new CustomWriter();\n}\n\n\n@Bean\npublic Job generateStatisticsJob() {\n\n        return this.jobs.get(\"generateStatisticsJob\")\n                .incrementer(new RunIdIncrementer())\n                .start(processPlayerStats())\n                //.end()\n                .build();\n}\n\n@Bean\npublic Step processPlayerStats() {\n           return this.steps.get(\"processPlayerStats\")        \n                        .&lt;Player, PlayersStats&gt; chunk(10)\n                        .reader(reader(null))\n                        .processor(processor(null,null))\n                        .writer(writer())\n                        .build();\n}\n</code></pre>\n\n<p>The inputZipFile variable is set properly and the file exists on the drive.\nI checked in the FlatFileItemReader code and the ReaderNotOpenException occurs when the reader member of the reader class is not set. The reader member is set in doOpen method.\nIt looks that doOpen is not called. The question is why ?</p>\n"},{"tags":["java","amazon-web-services","aws-cloudformation","aws-api-gateway","bitbucket-pipelines"],"answers":[{"comments":[{"owner":{"account_id":15801712,"reputation":1288,"user_id":11402025,"display_name":"Tanu"},"score":0,"creation_date":1675444617,"post_id":75337880,"comment_id":132937529,"body_markdown":"same error again. Thanks. I updated the capabilities. Thanks","body":"same error again. Thanks. I updated the capabilities. Thanks"},{"owner":{"account_id":15768772,"reputation":372,"user_id":13930970,"display_name":"furydrive"},"score":0,"creation_date":1675446887,"post_id":75337880,"comment_id":132938227,"body_markdown":"you are still receiving `An error occurred (InsufficientCapabilitiesException) when calling the CreateStack operation: Requires capabilities : [CAPABILITY_AUTO_EXPAND]` ?","body":"you are still receiving <code>An error occurred (InsufficientCapabilitiesException) when calling the CreateStack operation: Requires capabilities : [CAPABILITY_AUTO_EXPAND]</code> ?"},{"owner":{"account_id":15801712,"reputation":1288,"user_id":11402025,"display_name":"Tanu"},"score":0,"creation_date":1675448461,"post_id":75337880,"comment_id":132938697,"body_markdown":"```ERROR: Failed to get information about stack stackname.\nAn error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id stackname does not exist\n✖ Failed to create the stack.\nAn error occurred (InsufficientCapabilitiesException) when calling the CreateStack operation: Requires capabilities : [CAPABILITY_AUTO_EXPAND]\n```","body":"<code>ERROR: Failed to get information about stack stackname. An error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id stackname does not exist ✖ Failed to create the stack. An error occurred (InsufficientCapabilitiesException) when calling the CreateStack operation: Requires capabilities : [CAPABILITY_AUTO_EXPAND] </code>"}],"tags":[],"owner":{"account_id":15768772,"reputation":372,"user_id":13930970,"display_name":"furydrive"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675438337,"creation_date":1675438337,"answer_id":75337880,"question_id":75337664,"body_markdown":"You need to add [CAPABILITY_AUTO_EXPAND] as the error describes\r\n\r\nthat would be,\r\n\r\n```\r\nstep:\r\n          name: Deploy to Cloudformation\r\n          script:\r\n            - pipe: atlassian/aws-sam-deploy:1.1.0\r\n              variables:\r\n                AWS_ACCESS_KEY_ID: &#39;my id here&#39;\r\n                AWS_SECRET_ACCESS_KEY: &#39;key here&#39;\r\n                AWS_SESSION_TOKEN: &#39;sessionToken&#39;\r\n                AWS_DEFAULT_REGION: &#39;us-east-1&#39;\r\n                S3_BUCKET: &#39;s3bucketname&#39;\r\n                STACK_NAME: &#39;stackname&#39;\r\n                s3_prefix: &#39;stackname&#39;\r\n                SAM_TEMPLATE: &#39;template.yaml&#39; \r\n                capabilities: [&#39;CAPABILITY_NAMED_IAM&#39;,&#39;CAPABILITY_AUTO_EXPAND&#39;]\r\n                parameter_overrides: [&quot;VPC=\\&quot;vpcenteredhere\\&quot; VPCEName=\\&quot;vpceenteredhere\\&quot; MyStageName=\\&quot;test\\&quot; ApplicationTag=\\&quot;project\\&quot;&quot;]\r\n```","title":"Getting error running Bitbucket pipeline for deploying to AWS Cloudformation","body":"<p>You need to add [CAPABILITY_AUTO_EXPAND] as the error describes</p>\n<p>that would be,</p>\n<pre><code>step:\n          name: Deploy to Cloudformation\n          script:\n            - pipe: atlassian/aws-sam-deploy:1.1.0\n              variables:\n                AWS_ACCESS_KEY_ID: 'my id here'\n                AWS_SECRET_ACCESS_KEY: 'key here'\n                AWS_SESSION_TOKEN: 'sessionToken'\n                AWS_DEFAULT_REGION: 'us-east-1'\n                S3_BUCKET: 's3bucketname'\n                STACK_NAME: 'stackname'\n                s3_prefix: 'stackname'\n                SAM_TEMPLATE: 'template.yaml' \n                capabilities: ['CAPABILITY_NAMED_IAM','CAPABILITY_AUTO_EXPAND']\n                parameter_overrides: [&quot;VPC=\\&quot;vpcenteredhere\\&quot; VPCEName=\\&quot;vpceenteredhere\\&quot; MyStageName=\\&quot;test\\&quot; ApplicationTag=\\&quot;project\\&quot;&quot;]\n</code></pre>\n"}],"owner":{"account_id":15801712,"reputation":1288,"user_id":11402025,"display_name":"Tanu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":182,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675444600,"creation_date":1675437308,"question_id":75337664,"body_markdown":"I am trying to deploy to AWS Cloud Formation using the script. I am using the values present in samconfig.toml. I am able to build it locally but it fails in bitbucket pipeline. \r\n\r\n```\r\nstep:\r\n          name: Deploy to Cloudformation\r\n          script:\r\n            - pipe: atlassian/aws-sam-deploy:1.1.0\r\n              variables:\r\n                AWS_ACCESS_KEY_ID: &#39;my id here&#39;\r\n                AWS_SECRET_ACCESS_KEY: &#39;key here&#39;\r\n                AWS_SESSION_TOKEN: &#39;sessionToken&#39;\r\n                AWS_DEFAULT_REGION: &#39;us-east-1&#39;\r\n                S3_BUCKET: &#39;s3bucketname&#39;\r\n                STACK_NAME: &#39;stackname&#39;\r\n                s3_prefix: &#39;stackname&#39;\r\n                SAM_TEMPLATE: &#39;template.yaml&#39; \r\n                capabilities: [&#39;CAPABILITY_NAMED_IAM&#39;, &#39;CAPABILITY_AUTO_EXPAND&#39;]\r\n                parameter_overrides: [&quot;VPC=\\&quot;vpcenteredhere\\&quot; VPCEName=\\&quot;vpceenteredhere\\&quot; MyStageName=\\&quot;test\\&quot; ApplicationTag=\\&quot;project\\&quot;&quot;]\r\n```\r\n\r\n```\r\n✖ Failed to create the stack.\r\nAn error occurred (InsufficientCapabilitiesException) when calling the CreateStack operation: Requires capabilities : [CAPABILITY_AUTO_EXPAND]\r\nERROR: Failed to get information about stack stackname.\r\nAn error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id stackname does not exist\r\n```","title":"Getting error running Bitbucket pipeline for deploying to AWS Cloudformation","body":"<p>I am trying to deploy to AWS Cloud Formation using the script. I am using the values present in samconfig.toml. I am able to build it locally but it fails in bitbucket pipeline.</p>\n<pre><code>step:\n          name: Deploy to Cloudformation\n          script:\n            - pipe: atlassian/aws-sam-deploy:1.1.0\n              variables:\n                AWS_ACCESS_KEY_ID: 'my id here'\n                AWS_SECRET_ACCESS_KEY: 'key here'\n                AWS_SESSION_TOKEN: 'sessionToken'\n                AWS_DEFAULT_REGION: 'us-east-1'\n                S3_BUCKET: 's3bucketname'\n                STACK_NAME: 'stackname'\n                s3_prefix: 'stackname'\n                SAM_TEMPLATE: 'template.yaml' \n                capabilities: ['CAPABILITY_NAMED_IAM', 'CAPABILITY_AUTO_EXPAND']\n                parameter_overrides: [&quot;VPC=\\&quot;vpcenteredhere\\&quot; VPCEName=\\&quot;vpceenteredhere\\&quot; MyStageName=\\&quot;test\\&quot; ApplicationTag=\\&quot;project\\&quot;&quot;]\n</code></pre>\n<pre><code>✖ Failed to create the stack.\nAn error occurred (InsufficientCapabilitiesException) when calling the CreateStack operation: Requires capabilities : [CAPABILITY_AUTO_EXPAND]\nERROR: Failed to get information about stack stackname.\nAn error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id stackname does not exist\n</code></pre>\n"},{"tags":["java","list","algorithm","data-structures"],"comments":[{"owner":{"account_id":22848,"reputation":131598,"user_id":56778,"accept_rate":93,"display_name":"Jim Mischel"},"score":0,"creation_date":1675442571,"post_id":75337081,"comment_id":132936840,"body_markdown":"I think your #3 should be &quot;A utility function that returns a list of persons in a group.&quot;","body":"I think your #3 should be &quot;A utility function that returns a list of persons in a group.&quot;"},{"owner":{"account_id":22848,"reputation":131598,"user_id":56778,"accept_rate":93,"display_name":"Jim Mischel"},"score":0,"creation_date":1675442677,"post_id":75337081,"comment_id":132936876,"body_markdown":"You said: &quot;Given a list of persons [Pi, Pj, Pm, ..., Pn], I want to find out all the groups present here.&quot; Where is &quot;here?&quot; Do you mean that, given a list of persons, you want to get a list of all the groups those persons represent?","body":"You said: &quot;Given a list of persons [Pi, Pj, Pm, ..., Pn], I want to find out all the groups present here.&quot; Where is &quot;here?&quot; Do you mean that, given a list of persons, you want to get a list of all the groups those persons represent?"},{"owner":{"account_id":22848,"reputation":131598,"user_id":56778,"accept_rate":93,"display_name":"Jim Mischel"},"score":0,"creation_date":1675442774,"post_id":75337081,"comment_id":132936914,"body_markdown":"Do all of the people in a group have to be present in order for the group to be considered present? Or is a group &quot;present&quot; if any one or more of the people from the group is present?","body":"Do all of the people in a group have to be present in order for the group to be considered present? Or is a group &quot;present&quot; if any one or more of the people from the group is present?"},{"owner":{"account_id":16666623,"reputation":21,"user_id":12045095,"display_name":"prasuna_16"},"score":0,"creation_date":1675443417,"post_id":75337081,"comment_id":132937123,"body_markdown":"Re `I think your #3 should be &quot;A utility function that returns a list of persons in a group.&quot;` - oops, sorry, thanks for pointing it out.","body":"Re <code>I think your #3 should be &quot;A utility function that returns a list of persons in a group.&quot;</code> - oops, sorry, thanks for pointing it out."},{"owner":{"account_id":16666623,"reputation":21,"user_id":12045095,"display_name":"prasuna_16"},"score":0,"creation_date":1675443633,"post_id":75337081,"comment_id":132937199,"body_markdown":"I&#39;ve updated the question to make it more clear.\nRe `Do you mean that, given a list of persons, you want to get a list of all the groups those persons represent?` - No, I want the groups where all the persons belonging to that group should be present in the input list of persons given.\nI&#39;ve made changes in the actual question too. Hope that clarifies it.","body":"I&#39;ve updated the question to make it more clear. Re <code>Do you mean that, given a list of persons, you want to get a list of all the groups those persons represent?</code> - No, I want the groups where all the persons belonging to that group should be present in the input list of persons given. I&#39;ve made changes in the actual question too. Hope that clarifies it."},{"owner":{"account_id":16666623,"reputation":21,"user_id":12045095,"display_name":"prasuna_16"},"score":0,"creation_date":1675443735,"post_id":75337081,"comment_id":132937242,"body_markdown":"Re `Do all of the people in a group have to be present in order for the group to be considered present?` - The order does not matter, if *all* the people are present in the group, we consider it present.","body":"Re <code>Do all of the people in a group have to be present in order for the group to be considered present?</code> - The order does not matter, if <i>all</i> the people are present in the group, we consider it present."}],"answers":[{"tags":[],"owner":{"account_id":286249,"reputation":43961,"user_id":585411,"accept_rate":60,"display_name":"btilly"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675444274,"creation_date":1675444274,"answer_id":75338979,"question_id":75337081,"body_markdown":"Your current code has poor performance because you are using `.containsAll` repeatedly.  This has to look through the entire list each time, to find what is missing.\r\n\r\nYou can improve performance by creating a [HashMap][1] mapping groups to the count of members.  Create another saying by group, how many times you found a person in that group.  Walk through the people, look at the groups that they are in, and populate both.  Compare the two. Any group the numbers match, then you saw all the members and the group is completely contained in your collection of people.\r\n\r\nThis algorithm should be linear in the number of times a person in your collection is a member of some group.  Which is required just to find which groups might be included.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html","title":"Efficient way to the find the groups present in a list","body":"<p>Your current code has poor performance because you are using <code>.containsAll</code> repeatedly.  This has to look through the entire list each time, to find what is missing.</p>\n<p>You can improve performance by creating a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html\" rel=\"nofollow noreferrer\">HashMap</a> mapping groups to the count of members.  Create another saying by group, how many times you found a person in that group.  Walk through the people, look at the groups that they are in, and populate both.  Compare the two. Any group the numbers match, then you saw all the members and the group is completely contained in your collection of people.</p>\n<p>This algorithm should be linear in the number of times a person in your collection is a member of some group.  Which is required just to find which groups might be included.</p>\n"}],"owner":{"account_id":16666623,"reputation":21,"user_id":12045095,"display_name":"prasuna_16"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1675444274,"creation_date":1675434404,"question_id":75337081,"body_markdown":"There are a few people in a class e.g. [P1, P2, P3, P4, P5, P6]. And there are some friends groups e.g. [G1, G2, G3, G4, G5, G6].\r\n\r\nGroup G1 = [P1, P2, P3, P4], this says the persons P1, P2, P3, P4 are friends with each other.&lt;br&gt;\r\nGroup G2 = [P1, P3, P4] this says P1, P3, and P4 are friends with each other.\r\n\r\nThis information is given to me as:\r\n1. List of persons belonging to a class.\r\n2. An utility function that returns the list of groups a person belongs to.&lt;br&gt;\r\nE.g. getGroups(Person P1) returns [G1, G3, G2,..]\r\n3. An utility function that returns the list of persons in a group.&lt;br&gt;\r\nE.g. getPersons(Group G1) returns [P2, P1, P3,..]&lt;br&gt;\r\nBut I cannot directly access all the groups present, and I don&#39;t even know how many groups are present.\r\n\r\nWhat I want:\r\nGiven a list of persons [Pi, Pj, Pm, ..., Pn], I want to find out the groups formed by any subset of persons in the list.&lt;br&gt;\r\nNeither the order (of elements) in input nor in the lists returned by utility functions matters.\r\n\r\nEg.&lt;br&gt;\r\n&lt;b&gt;Information 1&lt;/b&gt; (I cannot iterate over all the persons, but if I have the person&#39;s name I can access its data):&lt;br&gt;`P1 = G1, G2; P2 = G1, G3; P3 = G1; P4 = G1, G2, G3; P5 = G3`&lt;br&gt;\r\n&lt;b&gt;Information 2&lt;/b&gt; (I cannot iterate over these groups, but if I have group name I can access its data):&lt;br&gt;`G1 = [P1, P2, P3, P4]; G2 = [P1, P3, P4]; G3 = [P2, P4, P5]`\r\n\r\n&lt;b&gt;Query:&lt;/b&gt; `[P1, P3, P2, P4]`&lt;br&gt;\r\n&lt;b&gt;Output:&lt;/b&gt; `[G1, G2]` (any order)&lt;br&gt;\r\n&lt;b&gt;Explanation:&lt;/b&gt;&lt;br&gt;\r\nP1, P2, P3, P4 belongs to group G1.&lt;br&gt;\r\nP1, P3, P4 belongs to group G2.&lt;br&gt;\r\n&lt;i&gt;Group G3 is not outputted because P5 is not in the input query list.&lt;/i&gt;\r\n\r\n\r\n\r\nObvious way to solve this is to iterate over each person and each group.\r\n```\r\npersonsTracked = []\r\nresult = []\r\nfor (Person person : persons) {\r\n  personsTracked.add(person) // Using personsTracked to avoid duplicate groups addition to result\r\n  groupsPersonBelongsTo = person.getGroups()\r\n  for (Group group : groupsPersonBelongsTo) {\r\n    if (personsTracked.containsAll(group.getPersons())):\r\n      result.add(group)\r\n  }\r\n}\r\n```\r\n\r\nBut is there a way to optimise this? Any ideas are appreciated.\r\n\r\nThank you!","title":"Efficient way to the find the groups present in a list","body":"<p>There are a few people in a class e.g. [P1, P2, P3, P4, P5, P6]. And there are some friends groups e.g. [G1, G2, G3, G4, G5, G6].</p>\n<p>Group G1 = [P1, P2, P3, P4], this says the persons P1, P2, P3, P4 are friends with each other.<br>\nGroup G2 = [P1, P3, P4] this says P1, P3, and P4 are friends with each other.</p>\n<p>This information is given to me as:</p>\n<ol>\n<li>List of persons belonging to a class.</li>\n<li>An utility function that returns the list of groups a person belongs to.<br>\nE.g. getGroups(Person P1) returns [G1, G3, G2,..]</li>\n<li>An utility function that returns the list of persons in a group.<br>\nE.g. getPersons(Group G1) returns [P2, P1, P3,..]<br>\nBut I cannot directly access all the groups present, and I don't even know how many groups are present.</li>\n</ol>\n<p>What I want:\nGiven a list of persons [Pi, Pj, Pm, ..., Pn], I want to find out the groups formed by any subset of persons in the list.<br>\nNeither the order (of elements) in input nor in the lists returned by utility functions matters.</p>\n<p>Eg.<br>\n<b>Information 1</b> (I cannot iterate over all the persons, but if I have the person's name I can access its data):<br><code>P1 = G1, G2; P2 = G1, G3; P3 = G1; P4 = G1, G2, G3; P5 = G3</code><br>\n<b>Information 2</b> (I cannot iterate over these groups, but if I have group name I can access its data):<br><code>G1 = [P1, P2, P3, P4]; G2 = [P1, P3, P4]; G3 = [P2, P4, P5]</code></p>\n<p><b>Query:</b> <code>[P1, P3, P2, P4]</code><br>\n<b>Output:</b> <code>[G1, G2]</code> (any order)<br>\n<b>Explanation:</b><br>\nP1, P2, P3, P4 belongs to group G1.<br>\nP1, P3, P4 belongs to group G2.<br>\n<i>Group G3 is not outputted because P5 is not in the input query list.</i></p>\n<p>Obvious way to solve this is to iterate over each person and each group.</p>\n<pre><code>personsTracked = []\nresult = []\nfor (Person person : persons) {\n  personsTracked.add(person) // Using personsTracked to avoid duplicate groups addition to result\n  groupsPersonBelongsTo = person.getGroups()\n  for (Group group : groupsPersonBelongsTo) {\n    if (personsTracked.containsAll(group.getPersons())):\n      result.add(group)\n  }\n}\n</code></pre>\n<p>But is there a way to optimise this? Any ideas are appreciated.</p>\n<p>Thank you!</p>\n"},{"tags":["java","java-8","java-stream","option-type"],"comments":[{"owner":{"account_id":1223835,"reputation":75888,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":4,"creation_date":1545892901,"post_id":53938100,"comment_id":94720843,"body_markdown":"Why might the list be null? The preferred return for list-valued methods with no reply is `emptyList()`.","body":"Why might the list be null? The preferred return for list-valued methods with no reply is <code>emptyList()</code>."}],"answers":[{"tags":[],"owner":{"account_id":7743155,"reputation":55371,"user_id":5862071,"accept_rate":86,"display_name":"Ousmane D."},"comment_count":0,"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1545867269,"creation_date":1545865915,"answer_id":53938117,"question_id":53938100,"body_markdown":"&gt; if list not null or not empty, then it needs to be filtered.\r\n\r\n\r\nNo need for Optional here, as it&#39;s not intended to replace simple `if` checks.\r\n\r\n\r\n    ResponseEntry entry = null;\r\n    List&lt;ResponseEntry&gt; responseEntries = serviceResponse.getEntryList();\r\n    if(responseEntries != null &amp;&amp; !responseEntries.isEmpty()){\r\n        entry = responseEntries.stream()\r\n                    .filter(e -&gt; &quot;expectedValue&quot;.equals(e.getValue()))\r\n                    .findFirst()\r\n                    .orElse(null);\r\n    }\r\n\r\n - reads &quot;if `responseEntries` is not null and `responseEntries` is not empty then apply the filter operation and find the first item or else null&quot;. Very readable.\r\n\r\nOn the other hand, the optional approach:\r\n\r\n    ResponseEntry entry = Optional.ofNullable(serviceResponse.getEntryList())\r\n                                  .orElseGet(() -&gt; Collections.emptyList())\r\n                                  .stream()\r\n                                  .filter(e -&gt; &quot;expectedValue&quot;.equals(e.getValue()))\r\n                                  .findFirst();\r\n\r\n    if(!entry.isPresent()){ ... } // or entry.ifPresent(e -&gt; ...) depending on the logic you&#39;re performing inside the block\r\n\r\n - unnecessarily creates objects that could be avoided and not really the intention of optional to be used as a substitute for simple &quot;if&quot; checks.","title":"How to handle nullable lists using java 8?","body":"<blockquote>\n  <p>if list not null or not empty, then it needs to be filtered.</p>\n</blockquote>\n\n<p>No need for Optional here, as it's not intended to replace simple <code>if</code> checks.</p>\n\n<pre><code>ResponseEntry entry = null;\nList&lt;ResponseEntry&gt; responseEntries = serviceResponse.getEntryList();\nif(responseEntries != null &amp;&amp; !responseEntries.isEmpty()){\n    entry = responseEntries.stream()\n                .filter(e -&gt; \"expectedValue\".equals(e.getValue()))\n                .findFirst()\n                .orElse(null);\n}\n</code></pre>\n\n<ul>\n<li>reads \"if <code>responseEntries</code> is not null and <code>responseEntries</code> is not empty then apply the filter operation and find the first item or else null\". Very readable.</li>\n</ul>\n\n<p>On the other hand, the optional approach:</p>\n\n<pre><code>ResponseEntry entry = Optional.ofNullable(serviceResponse.getEntryList())\n                              .orElseGet(() -&gt; Collections.emptyList())\n                              .stream()\n                              .filter(e -&gt; \"expectedValue\".equals(e.getValue()))\n                              .findFirst();\n\nif(!entry.isPresent()){ ... } // or entry.ifPresent(e -&gt; ...) depending on the logic you're performing inside the block\n</code></pre>\n\n<ul>\n<li>unnecessarily creates objects that could be avoided and not really the intention of optional to be used as a substitute for simple \"if\" checks.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1545868549,"creation_date":1545868549,"answer_id":53938341,"question_id":53938100,"body_markdown":"In Java 9, you could use the new method [`Objects.requireNonNullElse(T,T)`](https://docs.oracle.com/javase/10/docs/api/java/util/Objects.html#requireNonNullElse(T,T)):\r\n\r\n    Objects.requireNonNullElse(serviceResponse.getEntryList(),\r\n                               Collections.emptyList())\r\n\r\nApache Commons Collections actually has a method [`ListUtils.emptyIfNull(List&lt;T&gt;)`](https://commons.apache.org/proper/commons-collections/javadocs/api-4.2/org/apache/commons/collections4/ListUtils.html#emptyIfNull-java.util.List-) which returns an empty list if the argument list is `null`. That&#39;s even better, but `Objects.requireNonNullElse` is the closest thing to it in Java SE.\r\n\r\nIf you&#39;re restricted to just Java 8, then I agree with Aomine&#39;s answer that trying to do something like go through `Optional` is worse than an `if` statement.","title":"How to handle nullable lists using java 8?","body":"<p>In Java 9, you could use the new method <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/Objects.html#requireNonNullElse(T,T)\" rel=\"noreferrer\"><code>Objects.requireNonNullElse(T,T)</code></a>:</p>\n\n<pre><code>Objects.requireNonNullElse(serviceResponse.getEntryList(),\n                           Collections.emptyList())\n</code></pre>\n\n<p>Apache Commons Collections actually has a method <a href=\"https://commons.apache.org/proper/commons-collections/javadocs/api-4.2/org/apache/commons/collections4/ListUtils.html#emptyIfNull-java.util.List-\" rel=\"noreferrer\"><code>ListUtils.emptyIfNull(List&lt;T&gt;)</code></a> which returns an empty list if the argument list is <code>null</code>. That's even better, but <code>Objects.requireNonNullElse</code> is the closest thing to it in Java SE.</p>\n\n<p>If you're restricted to just Java 8, then I agree with Aomine's answer that trying to do something like go through <code>Optional</code> is worse than an <code>if</code> statement.</p>\n"},{"tags":[],"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"comment_count":0,"down_vote_count":1,"up_vote_count":19,"is_accepted":false,"score":18,"last_activity_date":1545872966,"creation_date":1545871205,"answer_id":53938598,"question_id":53938100,"body_markdown":"## [`Stream.ofNullable`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Stream.html#ofNullable(T)) (Java-9)\r\n\r\n&gt; Returns a sequential Stream containing a ***single element***, *if non-null*,\r\n&gt; *otherwise* returns an ***empty Stream***.\r\n\r\n### Current Code\r\n\r\n    ResponseEntry entry = serviceResponse.getEntryList() // List&lt;ResponseEntry&gt;\r\n            .stream() // NPE here   // Stream&lt;ResponseEntry&gt;\r\n            .filter(e -&gt; &quot;expectedValue&quot;.equals(e.getValue())) // filter\r\n            .findFirst() // Optional&lt;ResponseEntry&gt;\r\n            .orElse(null); // or else null\r\n\r\n###Updated Code\r\n\r\n\r\n    ResponseEntry entry = Stream.ofNullable(serviceResponse.getEntryList()) // Stream&lt;List&lt;ResponseEntry&gt;&gt;\r\n            .flatMap(List::stream) // Stream&lt;ResponseEntry&gt;\r\n            .filter(e -&gt; &quot;expectedValue&quot;.equals(e.getValue())) // filter here\r\n            .findFirst() // Optional&lt;ResponseEntry&gt;\r\n            .orElse(null); // or else null\r\n\r\n----------\r\n\r\n## [`Optional.stream`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html#stream()) (Java-9)\r\n\r\n&gt; returns a sequential *Stream* containing ***only that value***, *otherwise*\r\n&gt; returns an ***empty Stream***.\r\n\r\n    ResponseEntry entry = Optional.ofNullable(serviceResponse.getEntryList())\r\n            .stream() // Stream&lt;List&lt;ResponseEntry&gt;&gt;\r\n            .flatMap(List::stream) // Stream&lt;ResponseEntry&gt;\r\n            .filter(e -&gt; &quot;expectedValue&quot;.equals(e.getValue())) // filter here\r\n            .findFirst() // Optional&lt;ResponseEntry&gt;\r\n            .orElse(null); // or else null\r\n\r\n\r\n----------\r\n\r\n\r\n## [`Optional.isEmpty`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html#isEmpty())(Java-11)\r\n\r\n&gt; If a value is *not present*, returns ***true***, *otherwise* ***false***\r\n\r\n    Optional&lt;ResponseEntry&gt; entry = Optional.ofNullable(serviceResponse.getEntryList()) // Optional&lt;List&lt;ResponseEntry&gt;&gt;\r\n            .orElseGet(Collections::emptyList) // or else empty List\r\n            .stream() // Stream&lt;ResponseEntry&gt;\r\n            .filter(e -&gt; &quot;expectedValue&quot;.equals(e.getValue())) // filter\r\n            .findFirst(); // Optional&lt;ResponseEntry&gt;\r\n\r\n    if (entry.isEmpty()) { // !entry.isPresent in java-8\r\n       // Do your work here\r\n    }","title":"How to handle nullable lists using java 8?","body":"<h2><a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Stream.html#ofNullable(T)\" rel=\"noreferrer\"><code>Stream.ofNullable</code></a> (Java-9)</h2>\n\n<blockquote>\n  <p>Returns a sequential Stream containing a <strong><em>single element</em></strong>, <em>if non-null</em>,\n  <em>otherwise</em> returns an <strong><em>empty Stream</em></strong>.</p>\n</blockquote>\n\n<h3>Current Code</h3>\n\n<pre><code>ResponseEntry entry = serviceResponse.getEntryList() // List&lt;ResponseEntry&gt;\n        .stream() // NPE here   // Stream&lt;ResponseEntry&gt;\n        .filter(e -&gt; \"expectedValue\".equals(e.getValue())) // filter\n        .findFirst() // Optional&lt;ResponseEntry&gt;\n        .orElse(null); // or else null\n</code></pre>\n\n<h3>Updated Code</h3>\n\n<pre><code>ResponseEntry entry = Stream.ofNullable(serviceResponse.getEntryList()) // Stream&lt;List&lt;ResponseEntry&gt;&gt;\n        .flatMap(List::stream) // Stream&lt;ResponseEntry&gt;\n        .filter(e -&gt; \"expectedValue\".equals(e.getValue())) // filter here\n        .findFirst() // Optional&lt;ResponseEntry&gt;\n        .orElse(null); // or else null\n</code></pre>\n\n<hr>\n\n<h2><a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html#stream()\" rel=\"noreferrer\"><code>Optional.stream</code></a> (Java-9)</h2>\n\n<blockquote>\n  <p>returns a sequential <em>Stream</em> containing <strong><em>only that value</em></strong>, <em>otherwise</em>\n  returns an <strong><em>empty Stream</em></strong>.</p>\n</blockquote>\n\n<pre><code>ResponseEntry entry = Optional.ofNullable(serviceResponse.getEntryList())\n        .stream() // Stream&lt;List&lt;ResponseEntry&gt;&gt;\n        .flatMap(List::stream) // Stream&lt;ResponseEntry&gt;\n        .filter(e -&gt; \"expectedValue\".equals(e.getValue())) // filter here\n        .findFirst() // Optional&lt;ResponseEntry&gt;\n        .orElse(null); // or else null\n</code></pre>\n\n<hr>\n\n<h2><a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html#isEmpty()\" rel=\"noreferrer\"><code>Optional.isEmpty</code></a>(Java-11)</h2>\n\n<blockquote>\n  <p>If a value is <em>not present</em>, returns <strong><em>true</em></strong>, <em>otherwise</em> <strong><em>false</em></strong></p>\n</blockquote>\n\n<pre><code>Optional&lt;ResponseEntry&gt; entry = Optional.ofNullable(serviceResponse.getEntryList()) // Optional&lt;List&lt;ResponseEntry&gt;&gt;\n        .orElseGet(Collections::emptyList) // or else empty List\n        .stream() // Stream&lt;ResponseEntry&gt;\n        .filter(e -&gt; \"expectedValue\".equals(e.getValue())) // filter\n        .findFirst(); // Optional&lt;ResponseEntry&gt;\n\nif (entry.isEmpty()) { // !entry.isPresent in java-8\n   // Do your work here\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2111403,"reputation":33698,"user_id":1876620,"accept_rate":94,"display_name":"fps"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1545875549,"creation_date":1545875549,"answer_id":53938922,"question_id":53938100,"body_markdown":"You could simply use the ternary operator:\r\n\r\n    ServiceResponse serviceResponse = service.getServiceResponse();\r\n    List&lt;ResponseEntry&gt; list = serviceResponse.getEntryList();\r\n\r\n    ResponseEntry entry = (list == null ? Collections.emptyList() : list)\r\n        .stream()\r\n        .filter(e -&gt; &quot;expectedValue&quot;.equals(e.getValue()))\r\n        .findFirst()\r\n        .orElse(null);\r\n\r\n    if (entry == null) { ... }\r\n\r\nSometimes, traditional is better IMO.\r\n","title":"How to handle nullable lists using java 8?","body":"<p>You could simply use the ternary operator:</p>\n\n<pre><code>ServiceResponse serviceResponse = service.getServiceResponse();\nList&lt;ResponseEntry&gt; list = serviceResponse.getEntryList();\n\nResponseEntry entry = (list == null ? Collections.emptyList() : list)\n    .stream()\n    .filter(e -&gt; \"expectedValue\".equals(e.getValue()))\n    .findFirst()\n    .orElse(null);\n\nif (entry == null) { ... }\n</code></pre>\n\n<p>Sometimes, traditional is better IMO.</p>\n"},{"tags":[],"owner":{"account_id":1042959,"reputation":638693,"user_id":1048572,"accept_rate":77,"display_name":"Bergi"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1545917832,"creation_date":1545917832,"answer_id":53945999,"question_id":53938100,"body_markdown":"Another option would be to use the `Optional` [monad](https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html#flatMap-java.util.function.Function-):\r\n\r\n    Optional&lt;ResponseEntry&gt; entry = Optional.ofNullable(serviceResponse.getEntryList()).flatMap(list -&gt;\r\n        list.stream().filter(e -&gt; &quot;expectedValue&quot;.equals(e.getValue())).findFirst()\r\n    );\r\n    \r\n    if (!entry.isPresent()) {\r\n        …\r\n    }\r\n\r\nYou might even use [`orElseGet`](https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html#orElseGet-java.util.function.Supplier-) instead of that `if` statement if your objective is to build (and return) a value, instead of executing a side effect.","title":"How to handle nullable lists using java 8?","body":"<p>Another option would be to use the <code>Optional</code> <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html#flatMap-java.util.function.Function-\" rel=\"nofollow noreferrer\">monad</a>:</p>\n\n<pre><code>Optional&lt;ResponseEntry&gt; entry = Optional.ofNullable(serviceResponse.getEntryList()).flatMap(list -&gt;\n    list.stream().filter(e -&gt; \"expectedValue\".equals(e.getValue())).findFirst()\n);\n\nif (!entry.isPresent()) {\n    …\n}\n</code></pre>\n\n<p>You might even use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html#orElseGet-java.util.function.Supplier-\" rel=\"nofollow noreferrer\"><code>orElseGet</code></a> instead of that <code>if</code> statement if your objective is to build (and return) a value, instead of executing a side effect.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1675668369,"post_id":75338955,"comment_id":132970825,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/75338955/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":25290010,"reputation":37,"user_id":19116298,"display_name":"Sachi97"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675444154,"creation_date":1675444154,"answer_id":75338955,"question_id":53938100,"body_markdown":"I am new to Optional and I may be wrong. Logic can be written like below if you want to have logic including only optional.\r\n\r\n    ServiceResponse serviceResponse = service.getServiceResponse();\r\n    ResponseEntry entry = \r\n\r\n    Optional.of(CollectionUtils.isNotEmpty(serviceResponse.getEntryList()))\r\n            .filter(BooleanUtils::isTrue)\r\n            .stream()\r\n            .filter(e -&gt; &quot;expectedValue&quot;.equals(e.getValue()))\r\n            .findFirst()\r\n            .orElse(null);","title":"How to handle nullable lists using java 8?","body":"<p>I am new to Optional and I may be wrong. Logic can be written like below if you want to have logic including only optional.</p>\n<pre><code>ServiceResponse serviceResponse = service.getServiceResponse();\nResponseEntry entry = \n\nOptional.of(CollectionUtils.isNotEmpty(serviceResponse.getEntryList()))\n        .filter(BooleanUtils::isTrue)\n        .stream()\n        .filter(e -&gt; &quot;expectedValue&quot;.equals(e.getValue()))\n        .findFirst()\n        .orElse(null);\n</code></pre>\n"}],"owner":{"account_id":11937666,"reputation":304,"user_id":8735547,"display_name":"Kyle Bak"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21723,"favorite_count":0,"down_vote_count":1,"up_vote_count":17,"accepted_answer_id":53938117,"answer_count":6,"score":16,"last_activity_date":1675444154,"creation_date":1545865777,"question_id":53938100,"body_markdown":"I&#39;m making a service call and trying to handle response. \r\nResponse might have a list of something. That list might be null.\r\n\r\nMoreover, if list not null or not empty, then\r\nit needs to be filtered. \r\nIn the code &quot;entry&quot; reference might be null if filtering gives nothing or response list is empty or null.\r\n\r\nCurrently i&#39;m getting NPE when i try to use stream() on a null response list. \r\nHow can i handle this situation?\r\n\r\n    @Getter\r\n    public class ServiceResponse {  \r\n        List&lt;ResponseEntry&gt; entryList;\r\n    }\r\n\r\n    @Getter\r\n    public class ResponseEntry {\r\n        String value;\r\n    }\r\n\r\n\r\n    ServiceResponse serviceResponse = service.getServiceResponse();\r\n    ResponseEntry entry = serviceResponse.getEntryList()\r\n        .stream()\r\n        .filter(e -&gt; &quot;expectedValue&quot;.equals(e.getValue()))\r\n        .findFirst()\r\n        .orElse(null);\r\n\r\n    if (entry == null) { ... }\r\n\r\n&lt;/code&gt;&lt;/pre&gt;","title":"How to handle nullable lists using java 8?","body":"<p>I'm making a service call and trying to handle response. \nResponse might have a list of something. That list might be null.</p>\n\n<p>Moreover, if list not null or not empty, then\nit needs to be filtered. \nIn the code \"entry\" reference might be null if filtering gives nothing or response list is empty or null.</p>\n\n<p>Currently i'm getting NPE when i try to use stream() on a null response list. \nHow can i handle this situation?</p>\n\n<pre><code>@Getter\npublic class ServiceResponse {  \n    List&lt;ResponseEntry&gt; entryList;\n}\n\n@Getter\npublic class ResponseEntry {\n    String value;\n}\n\n\nServiceResponse serviceResponse = service.getServiceResponse();\nResponseEntry entry = serviceResponse.getEntryList()\n    .stream()\n    .filter(e -&gt; \"expectedValue\".equals(e.getValue()))\n    .findFirst()\n    .orElse(null);\n\nif (entry == null) { ... }\n</code></pre>\n\n<p></p>\n"},{"tags":["java","algorithm","math","matrix"],"comments":[{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1675159956,"post_id":75295518,"comment_id":132863884,"body_markdown":"Please don&#39;t link to external code. Include all relevant code in the question itself. If you decide to take down the gist in future, this question will become useless for future readers.","body":"Please don&#39;t link to external code. Include all relevant code in the question itself. If you decide to take down the gist in future, this question will become useless for future readers."},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1675253325,"post_id":75295518,"comment_id":132887601,"body_markdown":"Happy to remove it when the question contains all the relevant code. If Stack Overflow complains that the ratio of text to code is too low, then you&#39;ll either need to add more explanation, or figure out how you can distill your problem to use less code. Once again, a gist is a poor solution for the reason I already described.","body":"Happy to remove it when the question contains all the relevant code. If Stack Overflow complains that the ratio of text to code is too low, then you&#39;ll either need to add more explanation, or figure out how you can distill your problem to use less code. Once again, a gist is a poor solution for the reason I already described."},{"owner":{"account_id":14035647,"reputation":851,"user_id":10138416,"display_name":"linker"},"score":0,"creation_date":1675267720,"post_id":75295518,"comment_id":132892842,"body_markdown":"@Michael Tbh there’s no other explanation I can possibly give other than how I have simply explained the problem. Since you have decided to stay unhappy until your wish is granted, I can only promise that my gist would not be taken down anytime in the future just the same way concerning some of your posts on Stack Overflow with external links you have no problem in believing associated websites or services where they are hosted won’t be taken down in the future. I only want you to be happy, that’s why I typed this much. I just really hope you can be happy though… after all I have typed","body":"@Michael Tbh there’s no other explanation I can possibly give other than how I have simply explained the problem. Since you have decided to stay unhappy until your wish is granted, I can only promise that my gist would not be taken down anytime in the future just the same way concerning some of your posts on Stack Overflow with external links you have no problem in believing associated websites or services where they are hosted won’t be taken down in the future. I only want you to be happy, that’s why I typed this much. I just really hope you can be happy though… after all I have typed"},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":1,"creation_date":1675268066,"post_id":75295518,"comment_id":132892982,"body_markdown":"It&#39;s not about me being unhappy, it&#39;s about no one person being above the rules. The rules exist to make things better for everyone. &quot;*just the same way concerning some of your posts on Stack Overflow with external links*&quot;. No, this is entirely different. Your question is *entirely predicated* on the existence of that link. My answers may be supplemented, but even if the links go down, the answers should stand on their own. If some don&#39;t stand on their own, then feel free to downvote them and comment on how they can be improved.","body":"It&#39;s not about me being unhappy, it&#39;s about no one person being above the rules. The rules exist to make things better for everyone. &quot;<i>just the same way concerning some of your posts on Stack Overflow with external links</i>&quot;. No, this is entirely different. Your question is <i>entirely predicated</i> on the existence of that link. My answers may be supplemented, but even if the links go down, the answers should stand on their own. If some don&#39;t stand on their own, then feel free to downvote them and comment on how they can be improved."},{"owner":{"account_id":20937,"reputation":167576,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"score":0,"creation_date":1675366125,"post_id":75295518,"comment_id":132919233,"body_markdown":"OK, the code is included in the question now. Perhaps someone is nice enough to go through it and spot the bug, but I think you&#39;ll have more luck by either commenting under the Gist to see if the original author knows what&#39;s going wrong, or by manually calculating the matrix operation and then stepping through the code to see if you spot the error yourself. Anyway, best of luck!","body":"OK, the code is included in the question now. Perhaps someone is nice enough to go through it and spot the bug, but I think you&#39;ll have more luck by either commenting under the Gist to see if the original author knows what&#39;s going wrong, or by manually calculating the matrix operation and then stepping through the code to see if you spot the error yourself. Anyway, best of luck!"},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":0,"creation_date":1675370342,"post_id":75295518,"comment_id":132920346,"body_markdown":"If you print the matrix after each pass, after pass two it has some alarming numbers in it (E16, E23). If this gives correct results for some matrices but not others, I would suspect loss of precision due to numerical instability of the chosen method.","body":"If you print the matrix after each pass, after pass two it has some alarming numbers in it (E16, E23). If this gives correct results for some matrices but not others, I would suspect loss of precision due to numerical instability of the chosen method."},{"owner":{"account_id":14035647,"reputation":851,"user_id":10138416,"display_name":"linker"},"score":0,"creation_date":1675432781,"post_id":75295518,"comment_id":132933419,"body_markdown":"@teapot418 I switched from working with floats initially to double because after each pass I noticed some funny numbers were showing up occasionally. Please what do you recommend in order to get better precision: BigDecimal?","body":"@teapot418 I switched from working with floats initially to double because after each pass I noticed some funny numbers were showing up occasionally. Please what do you recommend in order to get better precision: BigDecimal?"},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":1,"creation_date":1675433153,"post_id":75295518,"comment_id":132933567,"body_markdown":"I think LU decomposition is usually preferred as being less explody. I think you can get rref from LU, but I won&#39;t point you to a specific formula, this topic is complex and my memory of it fuzzy. Or you can cheat and [use fractions](https://rosettacode.org/wiki/Reduced_row_echelon_form#Java).","body":"I think LU decomposition is usually preferred as being less explody. I think you can get rref from LU, but I won&#39;t point you to a specific formula, this topic is complex and my memory of it fuzzy. Or you can cheat and <a href=\"https://rosettacode.org/wiki/Reduced_row_echelon_form#Java\" rel=\"nofollow noreferrer\">use fractions</a>."},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":1,"creation_date":1675433991,"post_id":75295518,"comment_id":132933873,"body_markdown":"The above probably rather with BigFraction, Fraction is int-based and can overflow.","body":"The above probably rather with BigFraction, Fraction is int-based and can overflow."},{"owner":{"account_id":7359583,"reputation":11343,"user_id":5603247,"display_name":"Hans Olsson"},"score":0,"creation_date":1675434653,"post_id":75295518,"comment_id":132934094,"body_markdown":"As I understand RREF is an ill-posed problem so if you start from the double-matrix as input you might work a lot to give better results, while ignoring that the input matrix may have been rounded to double precision and that rounding may cause differences as big as the one we see.","body":"As I understand RREF is an ill-posed problem so if you start from the double-matrix as input you might work a lot to give better results, while ignoring that the input matrix may have been rounded to double precision and that rounding may cause differences as big as the one we see."},{"owner":{"account_id":14035647,"reputation":851,"user_id":10138416,"display_name":"linker"},"score":0,"creation_date":1675434857,"post_id":75295518,"comment_id":132934173,"body_markdown":"@HansOlsson definitely","body":"@HansOlsson definitely"}],"answers":[{"comments":[{"owner":{"account_id":14035647,"reputation":851,"user_id":10138416,"display_name":"linker"},"score":0,"creation_date":1675438961,"post_id":75337196,"comment_id":132935579,"body_markdown":"you just made me realize that java is more than just a tea. big thanks @teapot. You’re the real OG","body":"you just made me realize that java is more than just a tea. big thanks @teapot. You’re the real OG"},{"owner":{"account_id":4230767,"reputation":521,"user_id":6077973,"display_name":"kagof"},"score":1,"creation_date":1675880173,"post_id":75337196,"comment_id":133025072,"body_markdown":"In addition to this, if you&#39;re doing math you may find the [BigDecimal](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigDecimal.html) class to be preferable over floating point implementations, which can suffer from inaccuracies due to rounding that may compound on each other. If you use a BigDecimal, you can check if an instance of it is 0 with `foo.signum() == 0`","body":"In addition to this, if you&#39;re doing math you may find the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\">BigDecimal</a> class to be preferable over floating point implementations, which can suffer from inaccuracies due to rounding that may compound on each other. If you use a BigDecimal, you can check if an instance of it is 0 with <code>foo.signum() == 0</code>"}],"tags":[],"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1675434957,"creation_date":1675434957,"answer_id":75337196,"question_id":75295518,"body_markdown":"You may actually have a &quot;do not compare floats for equality&quot; problem in there.\r\nIf I do:\r\n\r\n    public static boolean isZero(double foo) {\r\n        // demonstration only, replace with less silly implementation\r\n        return Math.abs(foo)&lt;0.0000001;\r\n    }\r\n\r\n      ...\r\n      while(isZero(matrix[cursor][columnIndex])){\r\n      //instead of\r\n      while(matrix[cursor][columnIndex] == 0){\r\n\r\nI get\r\n\r\n    [1.0, 0.0, 0.0, 1.3816531235294117E7, 0.0, 0.0]\r\n    [0.0, 1.0, 0.0, -0.6363636363636362, 0.0, 0.0]\r\n    [0.0, 0.0, 1.0, -1.3999999999999997, 0.0, 0.0]\r\n    [0.0, 0.0, 0.0, 0.0, 1.0, 0.0]\r\n    [0.0, 0.0, 0.0, 0.0, 0.0, 1.0]\r\n\r\nwhich is the result you wanted I believe.\r\n\r\nMore discussion e.g. in https://stackoverflow.com/questions/4915462/how-should-i-do-floating-point-comparison","title":"Reduced Row Echelon Implementation in Java","body":"<p>You may actually have a &quot;do not compare floats for equality&quot; problem in there.\nIf I do:</p>\n<pre><code>public static boolean isZero(double foo) {\n    // demonstration only, replace with less silly implementation\n    return Math.abs(foo)&lt;0.0000001;\n}\n\n  ...\n  while(isZero(matrix[cursor][columnIndex])){\n  //instead of\n  while(matrix[cursor][columnIndex] == 0){\n</code></pre>\n<p>I get</p>\n<pre><code>[1.0, 0.0, 0.0, 1.3816531235294117E7, 0.0, 0.0]\n[0.0, 1.0, 0.0, -0.6363636363636362, 0.0, 0.0]\n[0.0, 0.0, 1.0, -1.3999999999999997, 0.0, 0.0]\n[0.0, 0.0, 0.0, 0.0, 1.0, 0.0]\n[0.0, 0.0, 0.0, 0.0, 0.0, 1.0]\n</code></pre>\n<p>which is the result you wanted I believe.</p>\n<p>More discussion e.g. in <a href=\"https://stackoverflow.com/questions/4915462/how-should-i-do-floating-point-comparison\">How should I do floating point comparison?</a></p>\n"}],"owner":{"account_id":14035647,"reputation":851,"user_id":10138416,"display_name":"linker"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":431,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":75337196,"answer_count":1,"score":1,"last_activity_date":1675443873,"creation_date":1675159628,"question_id":75295518,"body_markdown":"Via this code:\r\n\r\n```java\r\nimport java.util.Arrays;\r\n\r\npublic class RREFS {\r\n\r\n    public static void main(String[] args){\r\n\r\n        double[][] rref;\r\n        double[][] matrix;\r\n        matrix=new double[][]{\r\n                new double[]{  8.385956100787163E-8,   0.9103664774626016, 0.41380294430118253,                 0.0, 0.0, 0.0  },\r\n                new double[]{ 2.0779736498353668E-8,  0.22558161873553792, -0.4962795612181877,  0.8383433249008051, 0.0, 0.0  },\r\n                new double[]{ 1.0081125874457642E-7, -0.34690893617920376,  0.7631996595942279,  0.5451426139958772, 0.0, 0.0  },\r\n                new double[]{                   0.0,                  0.0,                 0.0,                 0.0, 1.0, 0.0  },\r\n                new double[]{                   0.0,                  0.0,                 0.0,                 0.0, 0.0, 1.0  }\r\n        };\r\n        rref=RREFS.rref(matrix);\r\n        print(rref);\r\n\r\n//      this\r\n//      [ 8.385956100787163E-8,   0.9103664774626016, 0.41380294430118253,                 0.0, 0.0, 0.0]\r\n//      [2.0779736498353668E-8,  0.22558161873553792, -0.4962795612181877,  0.8383433249008051, 0.0, 0.0]\r\n//      [1.0081125874457642E-7, -0.34690893617920376,  0.7631996595942279,  0.5451426139958772, 0.0, 0.0]\r\n//      [                  0.0,                  0.0,                 0.0,                 0.0, 1.0, 0.0]\r\n//      [                  0.0,                  0.0,                 0.0,                 0.0, 0.0, 1.0]\r\n\r\n//       produces\r\n//       [1.0, 0.0, 0.0,                 0.0, 0.0, 0.0]\r\n//       [0.0, 1.0, 0.0,                 0.0, 0.0, 0.0]\r\n//       [0.0, 0.0, 1.0, -1.3999999999999997, 0.0, 0.0]\r\n//       [0.0, 0.0, 0.0,                 0.0, 1.0, 0.0]\r\n//       [0.0, 0.0, 0.0,                 0.0, 0.0, 1.0]\r\n\r\n//       insteada\r\n//       [1.0, 0.0, 0.0,  1.38165312352941182995E7, 0.0, 0.0]\r\n//       [0.0, 1.0, 0.0,        -0.636363636363636, 0.0, 0.0]\r\n//       [0.0, 0.0, 1.0,                      -1.4, 0.0, 0.0]\r\n//       [0.0, 0.0, 0.0,                         0, 1.0, 0.0]\r\n//       [0.0, 0.0, 0.0,                         0, 0.0, 1.0]\r\n​\r\n    }\r\n\r\n\r\n    /**\r\n     * Puts a matrix into reduced row echelon form\r\n     *\r\n     * @param matrix input matrix\r\n     *\r\n     * @return 2D result matrix\r\n     */\r\n    public static double[][] rref(double[][] matrix){\r\n        int columnIndex = 0;\r\n        int cursor;\r\n\r\n        // number of rows and columns in matrix\r\n        int getRowSize = matrix.length;\r\n        int getColumnSize = matrix[0].length;\r\n\r\n\r\n        loop:\r\n        for(int rowIndex = 0; rowIndex &lt; getRowSize; rowIndex++){\r\n            if(getColumnSize &lt;= columnIndex){\r\n                break loop;\r\n            }\r\n            cursor = rowIndex;\r\n            while(matrix[cursor][columnIndex] == 0){\r\n                cursor++;\r\n                if(getRowSize == cursor){\r\n                    cursor = rowIndex;\r\n                    columnIndex++;\r\n                    if(getColumnSize == columnIndex){\r\n                        break loop;\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            matrix = rowSwap(matrix, cursor, rowIndex);\r\n            if(matrix[rowIndex][columnIndex] != 0){\r\n                matrix = rowScale(matrix, rowIndex, (1/matrix[rowIndex][columnIndex]));\r\n            }\r\n\r\n            for(cursor = 0; cursor &lt; getRowSize; cursor++){\r\n                if(cursor != rowIndex){\r\n                    matrix = rowAddScale(matrix, rowIndex, cursor,((-1) * matrix[cursor][columnIndex]));\r\n                }\r\n            }columnIndex++;\r\n        }return matrix;\r\n    }\r\n\r\n    /**\r\n     * Swap positions of 2 rows\r\n     *\r\n     * @param matrix matrix before row additon\r\n     * @param rowIndex1 int index of row to swap\r\n     * @param rowIndex2 int index of row to swap\r\n     *\r\n     * @return matrix after row swap\r\n     */\r\n    private static double[][] rowSwap(double[][] matrix, int rowIndex1,\r\n                                      int rowIndex2){\r\n        // number of columns in matrix\r\n        int numColumns = matrix[0].length;\r\n\r\n        // holds number to be swapped\r\n        double hold;\r\n\r\n        for(int k = 0; k &lt; numColumns; k++){\r\n            hold = matrix[rowIndex2][k];\r\n            matrix[rowIndex2][k] = matrix[rowIndex1][k];\r\n            matrix[rowIndex1][k] = hold;\r\n        }\r\n\r\n        return matrix;\r\n    }\r\n\r\n    /**\r\n     * Adds 2 rows together row2 = row2 + row1\r\n     *\r\n     * @param matrix matrix before row additon\r\n     * @param rowIndex1 int index of row to be added\r\n     * @param rowIndex2 int index or row that row1 is added to\r\n     *\r\n     * @return matrix after row addition\r\n     */\r\n    private static double[][] rowAdd(double[][] matrix, int rowIndex1,\r\n                                     int rowIndex2){\r\n        // number of columns in matrix\r\n        int numColumns = matrix[0].length;\r\n\r\n        for(int k = 0; k &lt; numColumns; k++){\r\n            matrix[rowIndex2][k] += matrix[rowIndex1][k];\r\n        }\r\n\r\n        return matrix;\r\n    }\r\n\r\n    /**\r\n     * Multiplies a row by a scalar\r\n     *\r\n     * @param matrix matrix before row additon\r\n     * @param rowIndex int index of row to be scaled\r\n     * @param scalar double to scale row by\r\n     *\r\n     * @return matrix after row scaling\r\n     */\r\n    private static double[][] rowScale(double[][] matrix, int rowIndex,\r\n                                       double scalar){\r\n        // number of columns in matrix\r\n        int numColumns = matrix[0].length;\r\n\r\n        for(int k = 0; k &lt; numColumns; k++){\r\n            matrix[rowIndex][k] *= scalar;\r\n        }\r\n\r\n        return matrix;\r\n    }\r\n\r\n    /**\r\n     * Adds a row by the scalar of another row\r\n     * row2 = row2 + (row1 * scalar)\r\n     * @param matrix matrix before row additon\r\n     * @param rowIndex1 int index of row to be added\r\n     * @param rowIndex2 int index or row that row1 is added to\r\n     * @param scalar double to scale row by\r\n     *\r\n     * @return matrix after row addition\r\n     */\r\n    private static double[][] rowAddScale(double[][] matrix, int rowIndex1,\r\n                                          int rowIndex2, double scalar){\r\n        // number of columns in matrix\r\n        int numColumns = matrix[0].length;\r\n\r\n        for(int k = 0; k &lt; numColumns; k++){\r\n            matrix[rowIndex2][k] += (matrix[rowIndex1][k] * scalar);\r\n        }\r\n\r\n        return matrix;\r\n    }\r\n\r\n    public static void print(double[][] matrix) {\r\n        print(&quot;&quot;,matrix);\r\n    }\r\n    public static void print(String message, double[][] matrix) {\r\n        System.out.println(message);\r\n        for (int i = 0; i &lt; matrix.length; i++) {\r\n            System.out.println(Arrays.toString(matrix[i]));\r\n        }System.out.println();\r\n    }\r\n}\r\n```\r\n\r\nI am trying to build a custom rref calculator thus I have \r\n[edie-zhou&#39;s][2] [implementation][3] [asper][4].\r\n\r\nIt works with every simple matrix I have tested so far, However the result of \r\n\r\n     [ 8.385956100787163E-8,   0.9103664774626016, 0.41380294430118253,                 0.0, 0.0, 0.0]\r\n     [2.0779736498353668E-8,  0.22558161873553792, -0.4962795612181877,  0.8383433249008051, 0.0, 0.0]\r\n     [1.0081125874457642E-7, -0.34690893617920376,  0.7631996595942279,  0.5451426139958772, 0.0, 0.0]\r\n     [                  0.0,                  0.0,                 0.0,                 0.0, 1.0, 0.0]\r\n     [                  0.0,                  0.0,                 0.0,                 0.0, 0.0, 1.0]\r\n\r\nis this \r\n\r\n    [1.0, 0.0, 0.0,                 0.0, 0.0, 0.0]\r\n    [0.0, 1.0, 0.0,                 0.0, 0.0, 0.0]\r\n    [0.0, 0.0, 1.0, -1.3999999999999997, 0.0, 0.0]\r\n    [0.0, 0.0, 0.0,                 0.0, 1.0, 0.0]\r\n    [0.0, 0.0, 0.0,                 0.0, 0.0, 1.0]\r\n\r\ninstead of\r\n\r\n    [1.0, 0.0, 0.0,  1.38165312352941182995E7, 0.0, 0.0]\r\n    [0.0, 1.0, 0.0,        -0.636363636363636, 0.0, 0.0]\r\n    [0.0, 0.0, 1.0,                      -1.4, 0.0, 0.0]\r\n    [0.0, 0.0, 0.0,                         0, 1.0, 0.0]\r\n    [0.0, 0.0, 0.0,                         0, 0.0, 1.0]\r\n\r\naccording to this online [calculator][5] and some others I tested, please what seems to be the problem with the code.   \r\n\r\n\r\n  [1]: https://gist.github.com/54LiNKeR/ca76197806f4de9388bf165f25b25d73\r\n  [2]: https://github.com/edie-zhou\r\n  [3]: https://github.com/edie-zhou/Matrix-Calculator/blob/master/RREF.java\r\n  [4]: https://en.wikipedia.org/wiki/Row_echelon_form#Pseudocode_for_reduced_row_echelon_form\r\n  [5]: https://www.emathhelp.net/calculators/linear-algebra/reduced-row-echelon-form-rref-calculator/?i=%5B%5B8.385956100787163E-8%2C0.9103664774626016%2C0.41380294430118253%2C0%2C0%2C0%5D%2C%5B2.0779736498353668E-8%2C0.22558161873553792%2C-0.4962795612181877%2C0.8383433249008051%2C0%2C0%5D%2C%5B1.0081125874457642E-7%2C-0.34690893617920376%2C0.7631996595942279%2C0.5451426139958772%2C0%2C0%5D%2C%5B0%2C0%2C0%2C0%2C1%2C0%5D%2C%5B0%2C0%2C0%2C0%2C0%2C1%5D%5D&amp;reduced=on","title":"Reduced Row Echelon Implementation in Java","body":"<p>Via this code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Arrays;\n\npublic class RREFS {\n\n    public static void main(String[] args){\n\n        double[][] rref;\n        double[][] matrix;\n        matrix=new double[][]{\n                new double[]{  8.385956100787163E-8,   0.9103664774626016, 0.41380294430118253,                 0.0, 0.0, 0.0  },\n                new double[]{ 2.0779736498353668E-8,  0.22558161873553792, -0.4962795612181877,  0.8383433249008051, 0.0, 0.0  },\n                new double[]{ 1.0081125874457642E-7, -0.34690893617920376,  0.7631996595942279,  0.5451426139958772, 0.0, 0.0  },\n                new double[]{                   0.0,                  0.0,                 0.0,                 0.0, 1.0, 0.0  },\n                new double[]{                   0.0,                  0.0,                 0.0,                 0.0, 0.0, 1.0  }\n        };\n        rref=RREFS.rref(matrix);\n        print(rref);\n\n//      this\n//      [ 8.385956100787163E-8,   0.9103664774626016, 0.41380294430118253,                 0.0, 0.0, 0.0]\n//      [2.0779736498353668E-8,  0.22558161873553792, -0.4962795612181877,  0.8383433249008051, 0.0, 0.0]\n//      [1.0081125874457642E-7, -0.34690893617920376,  0.7631996595942279,  0.5451426139958772, 0.0, 0.0]\n//      [                  0.0,                  0.0,                 0.0,                 0.0, 1.0, 0.0]\n//      [                  0.0,                  0.0,                 0.0,                 0.0, 0.0, 1.0]\n\n//       produces\n//       [1.0, 0.0, 0.0,                 0.0, 0.0, 0.0]\n//       [0.0, 1.0, 0.0,                 0.0, 0.0, 0.0]\n//       [0.0, 0.0, 1.0, -1.3999999999999997, 0.0, 0.0]\n//       [0.0, 0.0, 0.0,                 0.0, 1.0, 0.0]\n//       [0.0, 0.0, 0.0,                 0.0, 0.0, 1.0]\n\n//       insteada\n//       [1.0, 0.0, 0.0,  1.38165312352941182995E7, 0.0, 0.0]\n//       [0.0, 1.0, 0.0,        -0.636363636363636, 0.0, 0.0]\n//       [0.0, 0.0, 1.0,                      -1.4, 0.0, 0.0]\n//       [0.0, 0.0, 0.0,                         0, 1.0, 0.0]\n//       [0.0, 0.0, 0.0,                         0, 0.0, 1.0]\n​\n    }\n\n\n    /**\n     * Puts a matrix into reduced row echelon form\n     *\n     * @param matrix input matrix\n     *\n     * @return 2D result matrix\n     */\n    public static double[][] rref(double[][] matrix){\n        int columnIndex = 0;\n        int cursor;\n\n        // number of rows and columns in matrix\n        int getRowSize = matrix.length;\n        int getColumnSize = matrix[0].length;\n\n\n        loop:\n        for(int rowIndex = 0; rowIndex &lt; getRowSize; rowIndex++){\n            if(getColumnSize &lt;= columnIndex){\n                break loop;\n            }\n            cursor = rowIndex;\n            while(matrix[cursor][columnIndex] == 0){\n                cursor++;\n                if(getRowSize == cursor){\n                    cursor = rowIndex;\n                    columnIndex++;\n                    if(getColumnSize == columnIndex){\n                        break loop;\n                    }\n                }\n\n            }\n\n            matrix = rowSwap(matrix, cursor, rowIndex);\n            if(matrix[rowIndex][columnIndex] != 0){\n                matrix = rowScale(matrix, rowIndex, (1/matrix[rowIndex][columnIndex]));\n            }\n\n            for(cursor = 0; cursor &lt; getRowSize; cursor++){\n                if(cursor != rowIndex){\n                    matrix = rowAddScale(matrix, rowIndex, cursor,((-1) * matrix[cursor][columnIndex]));\n                }\n            }columnIndex++;\n        }return matrix;\n    }\n\n    /**\n     * Swap positions of 2 rows\n     *\n     * @param matrix matrix before row additon\n     * @param rowIndex1 int index of row to swap\n     * @param rowIndex2 int index of row to swap\n     *\n     * @return matrix after row swap\n     */\n    private static double[][] rowSwap(double[][] matrix, int rowIndex1,\n                                      int rowIndex2){\n        // number of columns in matrix\n        int numColumns = matrix[0].length;\n\n        // holds number to be swapped\n        double hold;\n\n        for(int k = 0; k &lt; numColumns; k++){\n            hold = matrix[rowIndex2][k];\n            matrix[rowIndex2][k] = matrix[rowIndex1][k];\n            matrix[rowIndex1][k] = hold;\n        }\n\n        return matrix;\n    }\n\n    /**\n     * Adds 2 rows together row2 = row2 + row1\n     *\n     * @param matrix matrix before row additon\n     * @param rowIndex1 int index of row to be added\n     * @param rowIndex2 int index or row that row1 is added to\n     *\n     * @return matrix after row addition\n     */\n    private static double[][] rowAdd(double[][] matrix, int rowIndex1,\n                                     int rowIndex2){\n        // number of columns in matrix\n        int numColumns = matrix[0].length;\n\n        for(int k = 0; k &lt; numColumns; k++){\n            matrix[rowIndex2][k] += matrix[rowIndex1][k];\n        }\n\n        return matrix;\n    }\n\n    /**\n     * Multiplies a row by a scalar\n     *\n     * @param matrix matrix before row additon\n     * @param rowIndex int index of row to be scaled\n     * @param scalar double to scale row by\n     *\n     * @return matrix after row scaling\n     */\n    private static double[][] rowScale(double[][] matrix, int rowIndex,\n                                       double scalar){\n        // number of columns in matrix\n        int numColumns = matrix[0].length;\n\n        for(int k = 0; k &lt; numColumns; k++){\n            matrix[rowIndex][k] *= scalar;\n        }\n\n        return matrix;\n    }\n\n    /**\n     * Adds a row by the scalar of another row\n     * row2 = row2 + (row1 * scalar)\n     * @param matrix matrix before row additon\n     * @param rowIndex1 int index of row to be added\n     * @param rowIndex2 int index or row that row1 is added to\n     * @param scalar double to scale row by\n     *\n     * @return matrix after row addition\n     */\n    private static double[][] rowAddScale(double[][] matrix, int rowIndex1,\n                                          int rowIndex2, double scalar){\n        // number of columns in matrix\n        int numColumns = matrix[0].length;\n\n        for(int k = 0; k &lt; numColumns; k++){\n            matrix[rowIndex2][k] += (matrix[rowIndex1][k] * scalar);\n        }\n\n        return matrix;\n    }\n\n    public static void print(double[][] matrix) {\n        print(&quot;&quot;,matrix);\n    }\n    public static void print(String message, double[][] matrix) {\n        System.out.println(message);\n        for (int i = 0; i &lt; matrix.length; i++) {\n            System.out.println(Arrays.toString(matrix[i]));\n        }System.out.println();\n    }\n}\n</code></pre>\n<p>I am trying to build a custom rref calculator thus I have\n<a href=\"https://github.com/edie-zhou\" rel=\"nofollow noreferrer\">edie-zhou's</a> <a href=\"https://github.com/edie-zhou/Matrix-Calculator/blob/master/RREF.java\" rel=\"nofollow noreferrer\">implementation</a> <a href=\"https://en.wikipedia.org/wiki/Row_echelon_form#Pseudocode_for_reduced_row_echelon_form\" rel=\"nofollow noreferrer\">asper</a>.</p>\n<p>It works with every simple matrix I have tested so far, However the result of</p>\n<pre><code> [ 8.385956100787163E-8,   0.9103664774626016, 0.41380294430118253,                 0.0, 0.0, 0.0]\n [2.0779736498353668E-8,  0.22558161873553792, -0.4962795612181877,  0.8383433249008051, 0.0, 0.0]\n [1.0081125874457642E-7, -0.34690893617920376,  0.7631996595942279,  0.5451426139958772, 0.0, 0.0]\n [                  0.0,                  0.0,                 0.0,                 0.0, 1.0, 0.0]\n [                  0.0,                  0.0,                 0.0,                 0.0, 0.0, 1.0]\n</code></pre>\n<p>is this</p>\n<pre><code>[1.0, 0.0, 0.0,                 0.0, 0.0, 0.0]\n[0.0, 1.0, 0.0,                 0.0, 0.0, 0.0]\n[0.0, 0.0, 1.0, -1.3999999999999997, 0.0, 0.0]\n[0.0, 0.0, 0.0,                 0.0, 1.0, 0.0]\n[0.0, 0.0, 0.0,                 0.0, 0.0, 1.0]\n</code></pre>\n<p>instead of</p>\n<pre><code>[1.0, 0.0, 0.0,  1.38165312352941182995E7, 0.0, 0.0]\n[0.0, 1.0, 0.0,        -0.636363636363636, 0.0, 0.0]\n[0.0, 0.0, 1.0,                      -1.4, 0.0, 0.0]\n[0.0, 0.0, 0.0,                         0, 1.0, 0.0]\n[0.0, 0.0, 0.0,                         0, 0.0, 1.0]\n</code></pre>\n<p>according to this online <a href=\"https://www.emathhelp.net/calculators/linear-algebra/reduced-row-echelon-form-rref-calculator/?i=%5B%5B8.385956100787163E-8%2C0.9103664774626016%2C0.41380294430118253%2C0%2C0%2C0%5D%2C%5B2.0779736498353668E-8%2C0.22558161873553792%2C-0.4962795612181877%2C0.8383433249008051%2C0%2C0%5D%2C%5B1.0081125874457642E-7%2C-0.34690893617920376%2C0.7631996595942279%2C0.5451426139958772%2C0%2C0%5D%2C%5B0%2C0%2C0%2C0%2C1%2C0%5D%2C%5B0%2C0%2C0%2C0%2C0%2C1%5D%5D&amp;reduced=on\" rel=\"nofollow noreferrer\">calculator</a> and some others I tested, please what seems to be the problem with the code.</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"answers":[{"tags":[],"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675443342,"creation_date":1675443342,"answer_id":75338829,"question_id":75338387,"body_markdown":"The `peutJouer` property in the screenshot you shared is a numeric value. The code you use to read it however does:\r\n```\r\nsnapshot.getValue(String.class)\r\n```\r\n\r\nSince the snapshot does not have a `String` value, you can&#39;t retrieve it like that.\r\n\r\nInstead, you&#39;ll want to extract is with:\r\n\r\n```\r\npeutjouer = snapshot.getValue(Long.class);\r\n```","title":"Failed to convert value of type java.lang.Long to String - Android Studio - Firebase Realtime Database","body":"<p>The <code>peutJouer</code> property in the screenshot you shared is a numeric value. The code you use to read it however does:</p>\n<pre><code>snapshot.getValue(String.class)\n</code></pre>\n<p>Since the snapshot does not have a <code>String</code> value, you can't retrieve it like that.</p>\n<p>Instead, you'll want to extract is with:</p>\n<pre><code>peutjouer = snapshot.getValue(Long.class);\n</code></pre>\n"}],"owner":{"account_id":27453794,"reputation":3,"user_id":20945572,"display_name":"Hugo MERLE"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75338829,"answer_count":1,"score":0,"last_activity_date":1675443861,"creation_date":1675441063,"question_id":75338387,"body_markdown":"I&#39;m coding a Tic Tac Toe, and while executing it crashes when I tried to read a value from the database.\r\n\r\nI&#39;m getting the following error: \r\n\r\n&gt; com.google.firebase.database.DatabaseException: Failed to convert value of type java.lang.Long to String\r\n\r\nThe line where it crashes is the following : `canPlay = Long.parseLong(snapshot.getValue(String.class));`\r\n\r\nThe function is the following:\r\n \r\n\r\n```\r\nrefPeutJouer.addValueEventListener(new ValueEventListener() {\r\n    @Override\r\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n        peutjouer = Long.parseLong(snapshot.getValue(String.class));\r\n    }\r\n\r\n    @Override\r\n    public void onCancelled(@NonNull DatabaseError error) {}\r\n});\r\n```\r\n\r\nThe variable is declared as `private long peutjouer` at the beginning of the class.\r\nI have declared the `DatabaseReference` as follows: `private DatabaseReference refPeutJouer = database.getReference(&quot;peutJouer&quot;);`\r\n\r\nHere is a screenshot of the Firebase database: \r\n\r\n![Screenshot of the Database](https://i.stack.imgur.com/EEqEl.png)\r\n\r\nI tried to switch from an int to a long, but that didn&#39;t change anything.\r\n","title":"Failed to convert value of type java.lang.Long to String - Android Studio - Firebase Realtime Database","body":"<p>I'm coding a Tic Tac Toe, and while executing it crashes when I tried to read a value from the database.</p>\n<p>I'm getting the following error:</p>\n<blockquote>\n<p>com.google.firebase.database.DatabaseException: Failed to convert value of type java.lang.Long to String</p>\n</blockquote>\n<p>The line where it crashes is the following : <code>canPlay = Long.parseLong(snapshot.getValue(String.class));</code></p>\n<p>The function is the following:</p>\n<pre><code>refPeutJouer.addValueEventListener(new ValueEventListener() {\n    @Override\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\n        peutjouer = Long.parseLong(snapshot.getValue(String.class));\n    }\n\n    @Override\n    public void onCancelled(@NonNull DatabaseError error) {}\n});\n</code></pre>\n<p>The variable is declared as <code>private long peutjouer</code> at the beginning of the class.\nI have declared the <code>DatabaseReference</code> as follows: <code>private DatabaseReference refPeutJouer = database.getReference(&quot;peutJouer&quot;);</code></p>\n<p>Here is a screenshot of the Firebase database:</p>\n<p><img src=\"https://i.stack.imgur.com/EEqEl.png\" alt=\"Screenshot of the Database\" /></p>\n<p>I tried to switch from an int to a long, but that didn't change anything.</p>\n"},{"tags":["java","web-services","soap","client","cxf"],"comments":[{"owner":{"account_id":21804,"reputation":7207,"user_id":53300,"accept_rate":53,"display_name":"DaveH"},"score":0,"creation_date":1366111429,"post_id":16035612,"comment_id":22876953,"body_markdown":"Not sure if I understand what you are trying to achieve, but there are utilities that can be used to generate web service clients from a wsdl. wsimport comes as part of the standard jdk ( from Java 6 if I remember correctly )","body":"Not sure if I understand what you are trying to achieve, but there are utilities that can be used to generate web service clients from a wsdl. wsimport comes as part of the standard jdk ( from Java 6 if I remember correctly )"},{"owner":{"account_id":1645220,"reputation":5070,"user_id":1516873,"display_name":"user1516873"},"score":0,"creation_date":1366111553,"post_id":16035612,"comment_id":22877022,"body_markdown":"You can generate classes by wsdl using cxf `wsdl2java` command or using jax-ws `wsimport`","body":"You can generate classes by wsdl using cxf <code>wsdl2java</code> command or using jax-ws <code>wsimport</code>"},{"owner":{"account_id":2197855,"reputation":889,"user_id":1943085,"accept_rate":100,"display_name":"Lenymm"},"score":0,"creation_date":1366117461,"post_id":16035612,"comment_id":22880599,"body_markdown":"I wish you had asked about NetBeans (Right click the project, new, Web Service Client, from WSDL, done)\n\nAnyway - wsimport is sufficient for your problem.","body":"I wish you had asked about NetBeans (Right click the project, new, Web Service Client, from WSDL, done)  Anyway - wsimport is sufficient for your problem."}],"answers":[{"tags":[],"owner":{"account_id":1587132,"reputation":6980,"user_id":1471203,"accept_rate":89,"display_name":"Rais Alam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1366111503,"creation_date":1366111503,"answer_id":16035798,"question_id":16035612,"body_markdown":"You can take help of `Apache CXF` [Link][1] wsdl to java tool. `wsdl2java` - takes a WSDL document and generates fully annotated Java code from which to implement a service.\r\n\r\nYou can take help of eclipse plugin also.\r\n\r\n[Eclipse plugin to generate java class][2]\r\n\r\n\r\n  [1]: http://cxf.apache.org/docs/wsdl-to-java.html\r\n  [2]: http://sourceforge.net/projects/wsdl2javawizard/","title":"Create a SOAP Webservice Client Application in Java","body":"<p>You can take help of <code>Apache CXF</code> <a href=\"http://cxf.apache.org/docs/wsdl-to-java.html\" rel=\"nofollow\">Link</a> wsdl to java tool. <code>wsdl2java</code> - takes a WSDL document and generates fully annotated Java code from which to implement a service.</p>\n\n<p>You can take help of eclipse plugin also.</p>\n\n<p><a href=\"http://sourceforge.net/projects/wsdl2javawizard/\" rel=\"nofollow\">Eclipse plugin to generate java class</a></p>\n"},{"comments":[{"owner":{"display_name":"user1079425"},"score":0,"creation_date":1366112578,"post_id":16035836,"comment_id":22877555,"body_markdown":"Thank you :) Why create a proxy class ? I have used wsimport : `wsimport -keep -verbose http://127.0.0.1:8080/MCINTWebservice/services/McintWebservicePort?wsdl` and it generated me some classes..","body":"Thank you :) Why create a proxy class ? I have used wsimport : <code>wsimport -keep -verbose http:&#47;&#47;127.0.0.1:8080&#47;MCINTWebservice&#47;services&#47;McintWebservi&zwnj;&#8203;cePort?wsdl</code> and it generated me some classes.."},{"owner":{"account_id":431486,"reputation":3641,"user_id":815566,"accept_rate":81,"display_name":"Satheesh Cheveri"},"score":0,"creation_date":1366112704,"post_id":16035836,"comment_id":22877640,"body_markdown":"What you generate from wsimport is nothing but proxy classe and dependencies to access your service. you would need to create instances of proxy(of your service) to call your service method/","body":"What you generate from wsimport is nothing but proxy classe and dependencies to access your service. you would need to create instances of proxy(of your service) to call your service method/"},{"owner":{"display_name":"user1079425"},"score":0,"creation_date":1366114069,"post_id":16035836,"comment_id":22878419,"body_markdown":"Thank you I understand. I&#39;ve created the jar, but Please I don&#39;t understand `Use Service API to construct the end point, and then invoke service.`","body":"Thank you I understand. I&#39;ve created the jar, but Please I don&#39;t understand <code>Use Service API to construct the end point, and then invoke service.</code>"},{"owner":{"account_id":431486,"reputation":3641,"user_id":815566,"accept_rate":81,"display_name":"Satheesh Cheveri"},"score":0,"creation_date":1366114339,"post_id":16035836,"comment_id":22878597,"body_markdown":"Once you created client jar add it to build path of your client project. Then you in-order to invoke the service method, you need to create instance of proxy. You can reuse the example I have provided. Updated my answer above","body":"Once you created client jar add it to build path of your client project. Then you in-order to invoke the service method, you need to create instance of proxy. You can reuse the example I have provided. Updated my answer above"},{"owner":{"display_name":"user1079425"},"score":0,"creation_date":1366115747,"post_id":16035836,"comment_id":22879459,"body_markdown":"Thank you. my package is : `com.mcint.ws`, so it would be `http://ws.mcint.com`, and for the class Service do I have to use the proxy one or the Native class Java ? `PortInterface` would be the interface in Proxy classes right ? Finally PORTName, is it a field or an attribute ? what is it ? (Sorry I&#39;m new on SOAP weservice) Thank you :)","body":"Thank you. my package is : <code>com.mcint.ws</code>, so it would be <code>http:&#47;&#47;ws.mcint.com</code>, and for the class Service do I have to use the proxy one or the Native class Java ? <code>PortInterface</code> would be the interface in Proxy classes right ? Finally PORTName, is it a field or an attribute ? what is it ? (Sorry I&#39;m new on SOAP weservice) Thank you :)"},{"owner":{"account_id":431486,"reputation":3641,"user_id":815566,"accept_rate":81,"display_name":"Satheesh Cheveri"},"score":0,"creation_date":1366117731,"post_id":16035836,"comment_id":22880784,"body_markdown":"PORTName not a field attribute, open your wsdl and you can find from binding section.","body":"PORTName not a field attribute, open your wsdl and you can find from binding section."}],"tags":[],"owner":{"account_id":431486,"reputation":3641,"user_id":815566,"accept_rate":81,"display_name":"Satheesh Cheveri"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1366114462,"creation_date":1366111614,"answer_id":16035836,"question_id":16035612,"body_markdown":"You can send request to web service API as XML request. Only thing you would need to constuct SOAP complaint request with proper header and body. By using SoapUI you can generate the XML request structure, and then reuse it in your application. \r\n\r\nIf you are using Jax-RS(REST APIs), even http method also works\r\n\r\n\r\n**[update]**\r\n\r\nIf you are stuck with  how to create client classes, then you would follow this\r\n\r\n\r\n1. Use wsimport \r\n \r\n        &gt;  http : //hostname :port/wsdl.url on command line to create proxy classes\r\n\r\n2. Create jar file generated proxy classes\r\n3. Add jar file to class path\r\n4. Use Service API to construct the end point, and then invoke service.\r\n5. Sample test client is given below.\r\n\r\n\r\n\r\n\r\n\t\ttry {\r\n\r\n\t\t\tURL wsdlURL = new URL(&quot;http://localhost:8082/cxf/services/yourservice?wsdl&quot;);\r\n\r\n\t\t\tQName SERVICE_NAME = new QName(&quot;http://package.name/&quot;,&quot;PORTNAme&quot;);\r\n\r\n\t\t\tService service = Service.create(wsdlURL, SERVICE_NAME);\r\n\r\n\t\t\tclient = service.getPort(PORTInterface.class);\r\n\r\n\t\t\tclient.executeYourMethod()\r\n\r\n\t\t} catch (Exception e) {\r\n\r\n\t\t\t// TODO Auto-generated catch block\r\n\r\n\t\t\te.printStackTrace();\r\n\r\n\t\t}\r\n\r\n\t\r\n\r\n&gt; \r\n\r\n1. URL is WSDL url\r\n2. To create QName, need to provide namespace of the service interface(revers name of package,usually) and PORT name which you can find in WSDL in binding section.\r\n3. Also need to identify the Proxy class ( name would be similar to port name)\r\n\r\n\r\nCheers\r\nSatheesh","title":"Create a SOAP Webservice Client Application in Java","body":"<p>You can send request to web service API as XML request. Only thing you would need to constuct SOAP complaint request with proper header and body. By using SoapUI you can generate the XML request structure, and then reuse it in your application. </p>\n\n<p>If you are using Jax-RS(REST APIs), even http method also works</p>\n\n<p><strong>[update]</strong></p>\n\n<p>If you are stuck with  how to create client classes, then you would follow this</p>\n\n<ol>\n<li><p>Use wsimport </p>\n\n<pre><code>&gt;  http : //hostname :port/wsdl.url on command line to create proxy classes\n</code></pre></li>\n<li><p>Create jar file generated proxy classes</p></li>\n<li>Add jar file to class path</li>\n<li>Use Service API to construct the end point, and then invoke service.</li>\n<li><p>Sample test client is given below.</p>\n\n<pre><code>try {\n\n    URL wsdlURL = new URL(\"http://localhost:8082/cxf/services/yourservice?wsdl\");\n\n    QName SERVICE_NAME = new QName(\"http://package.name/\",\"PORTNAme\");\n\n    Service service = Service.create(wsdlURL, SERVICE_NAME);\n\n    client = service.getPort(PORTInterface.class);\n\n    client.executeYourMethod()\n\n} catch (Exception e) {\n\n    // TODO Auto-generated catch block\n\n    e.printStackTrace();\n\n}\n</code></pre></li>\n</ol>\n\n<blockquote>\n  <p></p>\n</blockquote>\n\n<ol>\n<li>URL is WSDL url</li>\n<li>To create QName, need to provide namespace of the service interface(revers name of package,usually) and PORT name which you can find in WSDL in binding section.</li>\n<li>Also need to identify the Proxy class ( name would be similar to port name)</li>\n</ol>\n\n<p>Cheers\nSatheesh</p>\n"}],"owner":{"display_name":"user1079425"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7831,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1675443705,"creation_date":1366110900,"question_id":16035612,"body_markdown":"I have created in eclipse a Webservice in Java using **Apache CXF**, now I have to create a WebService client application to consume and invoke it.\r\nI have been searching a way to do it, and I found that Client is always dependent to the server&#39;s Java Class.\r\n\r\nThe problem is that I have to develop a client class in an other Java environment. My question is : Is there a way to develop a client class which will be independent of webservice server&#39;s package, using only the **WSDL** file ?\r\n\r\nThank you :)","title":"Create a SOAP Webservice Client Application in Java","body":"<p>I have created in eclipse a Webservice in Java using <strong>Apache CXF</strong>, now I have to create a WebService client application to consume and invoke it.\nI have been searching a way to do it, and I found that Client is always dependent to the server's Java Class.</p>\n\n<p>The problem is that I have to develop a client class in an other Java environment. My question is : Is there a way to develop a client class which will be independent of webservice server's package, using only the <strong>WSDL</strong> file ?</p>\n\n<p>Thank you :)</p>\n"},{"tags":["java","postgresql","spring-boot","jdbc"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1675434226,"post_id":75337003,"comment_id":132933948,"body_markdown":"Please post the full exception stacktrace.","body":"Please post the full exception stacktrace."},{"owner":{"account_id":1674328,"reputation":2652,"user_id":1540177,"display_name":"grekier"},"score":3,"creation_date":1675435238,"post_id":75337003,"comment_id":132934297,"body_markdown":"Hard without the full trace but it seems that you are not loading the dev properties as it seems to try to connect to another URL than the one you show. Are you sure you start with the correct profile?","body":"Hard without the full trace but it seems that you are not loading the dev properties as it seems to try to connect to another URL than the one you show. Are you sure you start with the correct profile?"},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":3,"creation_date":1675441387,"post_id":75337003,"comment_id":132936440,"body_markdown":"`java.net.UnknownHostException: postgres`, but **application-dev.properties** , use jdbc:postgresql://**localhost**:5432, In most cases **localhost** cannot lead to **Unknown Host Exception**. So are you sure your application is using application-dev.properties file?","body":"<code>java.net.UnknownHostException: postgres</code>, but <b>application-dev.properties</b> , use jdbc:postgresql://**localhost**:5432, In most cases <b>localhost</b> cannot lead to <b>Unknown Host Exception</b>. So are you sure your application is using application-dev.properties file?"}],"answers":[{"tags":[],"owner":{"account_id":20506651,"reputation":95,"user_id":15049285,"display_name":"Lalarukh khan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675443440,"creation_date":1675443440,"answer_id":75338851,"question_id":75337003,"body_markdown":"I also faced the same issue and after a lot of working I finally resolved it this way:\r\nAs you&#39;re receiving unknown host means that your application can&#39;t detect your this file: **application-dev.properties**\r\n\r\nYou shall make this **application.yml** inside your project (yourprojectdirectory/application.yml) and this will automatically detects the DB information and all. \r\nAs you&#39;re using postgres as DB so, add this code inside this file:\r\n\r\n    spring:\r\n      datasource:\r\n        driver-class-name: org.postgresql.Driver\r\n        url: jdbc:postgresql:db_name\r\n        username: your-postgres-username\r\n        password: your-postgres-password\r\n    \r\nRun this command for application running: `mvn spring-boot:run -Dspring-boot.run.profiles`","title":"Java application is not connecting with Postgres Database","body":"<p>I also faced the same issue and after a lot of working I finally resolved it this way:\nAs you're receiving unknown host means that your application can't detect your this file: <strong>application-dev.properties</strong></p>\n<p>You shall make this <strong>application.yml</strong> inside your project (yourprojectdirectory/application.yml) and this will automatically detects the DB information and all.\nAs you're using postgres as DB so, add this code inside this file:</p>\n<pre><code>spring:\n  datasource:\n    driver-class-name: org.postgresql.Driver\n    url: jdbc:postgresql:db_name\n    username: your-postgres-username\n    password: your-postgres-password\n</code></pre>\n<p>Run this command for application running: <code>mvn spring-boot:run -Dspring-boot.run.profiles</code></p>\n"}],"owner":{"account_id":27695261,"reputation":19,"user_id":21141126,"display_name":"Meta Stack"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":561,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75338851,"answer_count":1,"score":0,"last_activity_date":1675443440,"creation_date":1675434030,"question_id":75337003,"body_markdown":"I recently setup a java application in my spring-boot. I&#39;m getting this error when i run it:\r\n\r\n    org.postgresql.util.PSQLException: The connection attempt failed.\r\n\tat org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:315)\r\n\tat org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:51)\r\n\tat org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:225)\r\n\tat org.postgresql.Driver.makeConnection(Driver.java:465)\r\n\tat org.postgresql.Driver.connect(Driver.java:264) ........\r\n    Caused by: java.net.UnknownHostException: postgres ........\r\n    Error starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n2023-02-03 17:24:15 - Application run failed\r\n\r\n\r\nMy application-dev.properties file in src/main/resources/ has this code:\r\n```none\r\nspring.datasource.url=jdbc:postgresql://localhost:5432/sofra_hybrid_7?useUnicode=yes&amp;characterEncoding=UTF-8\r\nspring.datasource.username=postgres\r\nspring.datasource.password=admin\r\n```\r\nI have made the database too as well in the postgres server with username &quot;postgres&quot; and pass &quot;admin:\r\n\r\n```none\r\nlalarukh=# CREATE DATABASE sofra_hybrid_7;\r\nCREATE DATABASE\r\nlalarukh=# grant all privileges on database sofra_hybrid_7 to postgres ;\r\nGRANT\r\n```\r\nI have even also used the jdbc postgres jar file inside the application to make the connection but all in vain.\r\nSeeking Help!\r\n\r\nI can&#39;t run my java application as postgres can&#39;t make connection with my app in spring boot.","title":"Java application is not connecting with Postgres Database","body":"<p>I recently setup a java application in my spring-boot. I'm getting this error when i run it:</p>\n<pre><code>org.postgresql.util.PSQLException: The connection attempt failed.\nat org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:315)\nat org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:51)\nat org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:225)\nat org.postgresql.Driver.makeConnection(Driver.java:465)\nat org.postgresql.Driver.connect(Driver.java:264) ........\nCaused by: java.net.UnknownHostException: postgres ........\nError starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n</code></pre>\n<p>2023-02-03 17:24:15 - Application run failed</p>\n<p>My application-dev.properties file in src/main/resources/ has this code:</p>\n<pre class=\"lang-none prettyprint-override\"><code>spring.datasource.url=jdbc:postgresql://localhost:5432/sofra_hybrid_7?useUnicode=yes&amp;characterEncoding=UTF-8\nspring.datasource.username=postgres\nspring.datasource.password=admin\n</code></pre>\n<p>I have made the database too as well in the postgres server with username &quot;postgres&quot; and pass &quot;admin:</p>\n<pre class=\"lang-none prettyprint-override\"><code>lalarukh=# CREATE DATABASE sofra_hybrid_7;\nCREATE DATABASE\nlalarukh=# grant all privileges on database sofra_hybrid_7 to postgres ;\nGRANT\n</code></pre>\n<p>I have even also used the jdbc postgres jar file inside the application to make the connection but all in vain.\nSeeking Help!</p>\n<p>I can't run my java application as postgres can't make connection with my app in spring boot.</p>\n"},{"tags":["java","yaml"],"answers":[{"tags":[],"owner":{"account_id":7846543,"reputation":11,"user_id":5931424,"display_name":"envfriendly"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675443418,"creation_date":1675443418,"answer_id":75338843,"question_id":75338766,"body_markdown":"    Map&lt;String, Object&gt; obj = yaml.load(inputStream);\r\n    obj.values();\r\n\r\nsee also: https://www.baeldung.com/java-snake-yaml\r\n","title":"How to get the title of the value from yaml to java","body":"<pre><code>Map&lt;String, Object&gt; obj = yaml.load(inputStream);\nobj.values();\n</code></pre>\n<p>see also: <a href=\"https://www.baeldung.com/java-snake-yaml\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-snake-yaml</a></p>\n"}],"owner":{"account_id":26120217,"reputation":1,"user_id":19812639,"display_name":"Chocorot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675443418,"creation_date":1675443023,"question_id":75338766,"body_markdown":"```\r\nfruits:\r\n    apple:\r\n        color: red\r\n    banana:\r\n        color: yellow\r\n    graps:\r\n        color: purple\r\n```\r\n\r\nis it posible to get a String\\[\\] with value of {&quot;apple&quot;, &quot;banana&quot;, &quot;grapes&quot;} in java\r\n\r\ni have tried many way but i still cant figure it out","title":"How to get the title of the value from yaml to java","body":"<pre><code>fruits:\n    apple:\n        color: red\n    banana:\n        color: yellow\n    graps:\n        color: purple\n</code></pre>\n<p>is it posible to get a String[] with value of {&quot;apple&quot;, &quot;banana&quot;, &quot;grapes&quot;} in java</p>\n<p>i have tried many way but i still cant figure it out</p>\n"},{"tags":["java","elasticsearch","elk","kibana-7"],"owner":{"account_id":25414251,"reputation":51,"user_id":19221489,"display_name":"TheCoder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675442830,"creation_date":1675441962,"question_id":75338563,"body_markdown":"I have 2 dashboards: an advanced and a basic dashboard. I want to provide link(url) of advanced dashboard in basic dashboard from the data saved in elasticsearch (which varies for each of the index pattern). \r\n\r\nI tried using markdown (Text) but there I am not able to add any data from elastic search.\r\n\r\nI am using elastic and kibana version 7.16","title":"Kibana navigate from one dashboard to other","body":"<p>I have 2 dashboards: an advanced and a basic dashboard. I want to provide link(url) of advanced dashboard in basic dashboard from the data saved in elasticsearch (which varies for each of the index pattern).</p>\n<p>I tried using markdown (Text) but there I am not able to add any data from elastic search.</p>\n<p>I am using elastic and kibana version 7.16</p>\n"},{"tags":["java","android","kotlin","background","autocompletetextview"],"answers":[{"tags":[],"owner":{"account_id":13654747,"reputation":38532,"user_id":9851608,"display_name":"Zain"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675442818,"creation_date":1675442818,"answer_id":75338721,"question_id":75333276,"body_markdown":"You can change the `AppCompatAutoCompleteTextView` selector background with `app:backgroundTint` attribute.\r\n\r\nAnd change the background of the dropdown list programmatically with either:\r\n```\r\nautoCompleteTV.setDropDownBackgroundDrawable(ColorDrawable(Color.RED))\r\nautoCompleteTV.setDropDownBackgroundResource(resourceId) // takes a color/drawable resource\r\n```\r\n\r\n\r\n","title":"AutoCompleteText not update popup background","body":"<p>You can change the <code>AppCompatAutoCompleteTextView</code> selector background with <code>app:backgroundTint</code> attribute.</p>\n<p>And change the background of the dropdown list programmatically with either:</p>\n<pre><code>autoCompleteTV.setDropDownBackgroundDrawable(ColorDrawable(Color.RED))\nautoCompleteTV.setDropDownBackgroundResource(resourceId) // takes a color/drawable resource\n</code></pre>\n"}],"owner":{"account_id":5019073,"reputation":3015,"user_id":4033050,"accept_rate":27,"display_name":"Seb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675442818,"creation_date":1675413548,"question_id":75333276,"body_markdown":"I am using `AppCompatAutoCompleteTextView` but I cannot change the background of the dropdown list or neither the color of the background of the selector. I tried color or drawable but nothing change.\r\n \r\n\r\n```\r\n     &lt;androidx.appcompat.widget.AppCompatAutoCompleteTextView\r\n                    android:id=&quot;@+id/topicEt&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;48dp&quot;\r\n                    android:layout_marginTop=&quot;4dp&quot;\r\n                    android:background=&quot;@drawable/corner_shape_spinner_darkness&quot;\r\n                    android:dropDownHeight=&quot;wrap_content&quot;\r\n                    android:hint=&quot;@string/support_select_topic&quot;\r\n                    android:inputType=&quot;none&quot;\r\n                    android:editable=&quot;false&quot;\r\n                    android:paddingStart=&quot;12dp&quot;\r\n                    android:textAppearance=&quot;@style/Body_12&quot;\r\n                    android:textColor=&quot;@color/white&quot;\r\n                    android:textColorHint=&quot;@color/gray200&quot;\r\n                    android:drawableEnd=&quot;@drawable/dropdown_icon_selector&quot;\r\n                    android:paddingEnd=&quot;14dp&quot;\r\n                    android:dropDownSelector=&quot;@color/lightness100&quot;\r\n                    android:popupBackground=&quot;@color/darkness100&quot;/&gt;\r\n```\r\n\r\nAny idea ?","title":"AutoCompleteText not update popup background","body":"<p>I am using <code>AppCompatAutoCompleteTextView</code> but I cannot change the background of the dropdown list or neither the color of the background of the selector. I tried color or drawable but nothing change.</p>\n<pre><code>     &lt;androidx.appcompat.widget.AppCompatAutoCompleteTextView\n                    android:id=&quot;@+id/topicEt&quot;\n                    android:layout_width=&quot;match_parent&quot;\n                    android:layout_height=&quot;48dp&quot;\n                    android:layout_marginTop=&quot;4dp&quot;\n                    android:background=&quot;@drawable/corner_shape_spinner_darkness&quot;\n                    android:dropDownHeight=&quot;wrap_content&quot;\n                    android:hint=&quot;@string/support_select_topic&quot;\n                    android:inputType=&quot;none&quot;\n                    android:editable=&quot;false&quot;\n                    android:paddingStart=&quot;12dp&quot;\n                    android:textAppearance=&quot;@style/Body_12&quot;\n                    android:textColor=&quot;@color/white&quot;\n                    android:textColorHint=&quot;@color/gray200&quot;\n                    android:drawableEnd=&quot;@drawable/dropdown_icon_selector&quot;\n                    android:paddingEnd=&quot;14dp&quot;\n                    android:dropDownSelector=&quot;@color/lightness100&quot;\n                    android:popupBackground=&quot;@color/darkness100&quot;/&gt;\n</code></pre>\n<p>Any idea ?</p>\n"},{"tags":["java","xstream"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1675403493,"post_id":75331775,"comment_id":132925666,"body_markdown":"Have a look at the source of ThrowableConverter and AbstractTruffleException","body":"Have a look at the source of ThrowableConverter and AbstractTruffleException"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1675408438,"post_id":75331775,"comment_id":132926524,"body_markdown":"The emitted message sounds more like you tried to deserialize that `IllegalArgumentException` - that is create the Java object from some external form...","body":"The emitted message sounds more like you tried to deserialize that <code>IllegalArgumentException</code> - that is create the Java object from some external form..."}],"answers":[{"tags":[],"owner":{"account_id":19796944,"reputation":51,"user_id":14498732,"display_name":"a stand-out flamingo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675442719,"creation_date":1675442719,"answer_id":75338709,"question_id":75331775,"body_markdown":"I think it&#39;s due to Graalvm&#39;s implementation of &quot;javax.script.ScriptEngine&quot; class, which are not implemented as what jdk has implemented.\r\nRemoving Graalvm dependency, everything works fine.","title":"UnsupportedOperationException was thrown when serializing a Throwable variable using XStream","body":"<p>I think it's due to Graalvm's implementation of &quot;javax.script.ScriptEngine&quot; class, which are not implemented as what jdk has implemented.\nRemoving Graalvm dependency, everything works fine.</p>\n"}],"owner":{"account_id":19796944,"reputation":51,"user_id":14498732,"display_name":"a stand-out flamingo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675442719,"creation_date":1675401300,"question_id":75331775,"body_markdown":"When I tried using XStream 1.4.9 to serialize an *IllegalArgumentException* type variable, there is a java.lang.UnsupportedOperationException. \r\n\r\nBelow is the stack trace information.\r\nI have no idea what this could mean. Information from online is limited.\r\n\r\n\r\n```\r\njava.lang.UnsupportedOperationException: Not supported. Pass in the cause using the constructors instead.\r\n\tat com.oracle.truffle.api.exception.AbstractTruffleException.initCause(AbstractTruffleException.java:413)\r\n\tat com.thoughtworks.xstream.converters.extended.ThrowableConverter.marshal(ThrowableConverter.java:56)\r\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:68)\r\n```\r\n\r\n```\r\n        try {\r\n            final ScriptEngine scriptEngine = new ScriptEngineManager()\r\n                    .getEngineByName(&quot;JavaScript&quot;);\r\n\r\n            Objects.toString(scriptEngine.eval(&quot;X&quot;), null);\r\n        } catch (Exception e) {\r\n            XStream xstream = new XStream();\r\n            System.err.println(xstream.toXML(e));\r\n        }\r\n```\r\nThis is a minimum example that I see.\r\nI realize that whenever I used *js-scriptengine* dependency, XStream fails to serialize it, while removing such dependency, everything works\r\n","title":"UnsupportedOperationException was thrown when serializing a Throwable variable using XStream","body":"<p>When I tried using XStream 1.4.9 to serialize an <em>IllegalArgumentException</em> type variable, there is a java.lang.UnsupportedOperationException.</p>\n<p>Below is the stack trace information.\nI have no idea what this could mean. Information from online is limited.</p>\n<pre><code>java.lang.UnsupportedOperationException: Not supported. Pass in the cause using the constructors instead.\n    at com.oracle.truffle.api.exception.AbstractTruffleException.initCause(AbstractTruffleException.java:413)\n    at com.thoughtworks.xstream.converters.extended.ThrowableConverter.marshal(ThrowableConverter.java:56)\n    at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:68)\n</code></pre>\n<pre><code>        try {\n            final ScriptEngine scriptEngine = new ScriptEngineManager()\n                    .getEngineByName(&quot;JavaScript&quot;);\n\n            Objects.toString(scriptEngine.eval(&quot;X&quot;), null);\n        } catch (Exception e) {\n            XStream xstream = new XStream();\n            System.err.println(xstream.toXML(e));\n        }\n</code></pre>\n<p>This is a minimum example that I see.\nI realize that whenever I used <em>js-scriptengine</em> dependency, XStream fails to serialize it, while removing such dependency, everything works</p>\n"},{"tags":["java","jpa"],"comments":[{"owner":{"account_id":9539331,"reputation":138,"user_id":7088224,"accept_rate":100,"display_name":"SW Jeong"},"score":0,"creation_date":1675442749,"post_id":75338700,"comment_id":132936908,"body_markdown":"That is because you have not assigned any value to your allocated variable id.","body":"That is because you have not assigned any value to your allocated variable id."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1675448481,"post_id":75338700,"comment_id":132938703,"body_markdown":"Component.getId() will be null until the insert statement to the database, which only happens when the persistence context is synchronized with the database - essentially when flush is called or the transaction is committed. Make sure also that your reference to the entity is a managed reference, as JPA will update the managed instance with the ID, but not a detached instance. Ie if you use em.merge, it will update the entity is passes back, not necessarily the one you pass into it.","body":"Component.getId() will be null until the insert statement to the database, which only happens when the persistence context is synchronized with the database - essentially when flush is called or the transaction is committed. Make sure also that your reference to the entity is a managed reference, as JPA will update the managed instance with the ID, but not a detached instance. Ie if you use em.merge, it will update the entity is passes back, not necessarily the one you pass into it."},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1675481984,"post_id":75338700,"comment_id":132944061,"body_markdown":"`@GeneratedValue(strategy = GenerationType.SEQUENCE)`","body":"<code>@GeneratedValue(strategy = GenerationType.SEQUENCE)</code>"}],"owner":{"account_id":27696237,"reputation":1,"user_id":21141905,"display_name":"Nima Saminasab"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675442679,"creation_date":1675442679,"question_id":75338700,"body_markdown":"\r\n    @Entity\r\n    public class Component {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id ;\r\n\r\n\r\n\r\nI only get null on component.id ","title":"How do I get Auto Increment on my Id variable?","body":"<pre><code>@Entity\npublic class Component {\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long id ;\n</code></pre>\n<p>I only get null on component.id</p>\n"},{"tags":["java","ignite"],"owner":{"account_id":1010382,"reputation":127,"user_id":1023077,"accept_rate":25,"display_name":"sushil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675442622,"creation_date":1674208831,"question_id":75182431,"body_markdown":"We have upgraded ignite 2.7.6 to 2.11.1 server. But getting below exception while querying the database:\r\n\r\n    [2023-01-18T04:56:14,637][ERROR][client-connector-#143][JdbcRequestHandler] Failed to execute SQL query [reqId=29, req=JdbcQueryExecuteRequest [schemaName=PUBLIC, pageSize=1024, maxRows=0, sqlQry=SELECT * FROM EMPLOYEE WHERE EMPLOYEE_ID IN (?), args=Object[] [1], stmtType=SELECT_STATEMENT_TYPE, autoCommit=true, partResReq=false, explicitTimeout=false, super=JdbcRequest [type=2, reqId=29]]]\r\n    javax.cache.CacheException: class org.apache.ignite.internal.processors.query.IgniteSQLException: General error: &quot;class org.apache.ignite.IgniteCheckedException: Runtime failure on lookup row: IndexSearchRowImpl [rowHnd=org.apache.ignite.internal.processors.query.h2.index.QueryIndexRowHandler@5b289c8e]&quot;; SQL statement:\r\n    SELECT * FROM EMPLOYEE WHERE EMPLOYEE_ID IN (?) [50000-197]\r\n    .\r\n    .\r\n    .\r\n    .\r\n    Caused by: org.apache.ignite.internal.processors.query.IgniteSQLException: General error: &quot;class org.apache.ignite.IgniteCheckedException: Runtime failure on lookup row: IndexSearchRowImpl [rowHnd=org.apache.ignite.internal.processors.query.h2.index.QueryIndexRowHandler@5b289c8e]&quot;; SQL statement:\r\n    SELECT * FROM EMPLOYEE WHERE EMPLOYEE_ID IN (?) [50000-197]\r\n    .\r\n    .\r\n    .\r\n    .\r\n    Caused by: org.h2.jdbc.JdbcSQLException: General error: &quot;class org.apache.ignite.IgniteCheckedException: Runtime failure on lookup row: IndexSearchRowImpl [rowHnd=org.apache.ignite.internal.processors.query.h2.index.QueryIndexRowHandler@5b289c8e]&quot;; SQL statement:\r\n    SELECT * FROM EMPLOYEE WHERE EMPLOYEE_ID IN (?) [50000-197]\r\n    .\r\n    .\r\n    .\r\n    .\r\n    Caused by: org.apache.ignite.IgniteCheckedException: Runtime failure on lookup row: IndexSearchRowImpl [rowHnd=org.apache.ignite.internal.processors.query.h2.index.QueryIndexRowHandler@5b289c8e]\r\n    .\r\n    .\r\n    .\r\n    .\r\n    Caused by: org.apache.ignite.IgniteCheckedException: Rows cannot be compared\r\n    .\r\n    .\r\n    .\r\n    .\r\n    Caused by: org.h2.message.DbException: Hexadecimal string with odd number of characters: &quot;1&quot; [90003-197]\r\n\r\nAny help/suggestion would really appreciated.\r\n\r\n","title":"Ignite org.h2.message.DbException: Hexadecimal string with odd number of characters:","body":"<p>We have upgraded ignite 2.7.6 to 2.11.1 server. But getting below exception while querying the database:</p>\n<pre><code>[2023-01-18T04:56:14,637][ERROR][client-connector-#143][JdbcRequestHandler] Failed to execute SQL query [reqId=29, req=JdbcQueryExecuteRequest [schemaName=PUBLIC, pageSize=1024, maxRows=0, sqlQry=SELECT * FROM EMPLOYEE WHERE EMPLOYEE_ID IN (?), args=Object[] [1], stmtType=SELECT_STATEMENT_TYPE, autoCommit=true, partResReq=false, explicitTimeout=false, super=JdbcRequest [type=2, reqId=29]]]\njavax.cache.CacheException: class org.apache.ignite.internal.processors.query.IgniteSQLException: General error: &quot;class org.apache.ignite.IgniteCheckedException: Runtime failure on lookup row: IndexSearchRowImpl [rowHnd=org.apache.ignite.internal.processors.query.h2.index.QueryIndexRowHandler@5b289c8e]&quot;; SQL statement:\nSELECT * FROM EMPLOYEE WHERE EMPLOYEE_ID IN (?) [50000-197]\n.\n.\n.\n.\nCaused by: org.apache.ignite.internal.processors.query.IgniteSQLException: General error: &quot;class org.apache.ignite.IgniteCheckedException: Runtime failure on lookup row: IndexSearchRowImpl [rowHnd=org.apache.ignite.internal.processors.query.h2.index.QueryIndexRowHandler@5b289c8e]&quot;; SQL statement:\nSELECT * FROM EMPLOYEE WHERE EMPLOYEE_ID IN (?) [50000-197]\n.\n.\n.\n.\nCaused by: org.h2.jdbc.JdbcSQLException: General error: &quot;class org.apache.ignite.IgniteCheckedException: Runtime failure on lookup row: IndexSearchRowImpl [rowHnd=org.apache.ignite.internal.processors.query.h2.index.QueryIndexRowHandler@5b289c8e]&quot;; SQL statement:\nSELECT * FROM EMPLOYEE WHERE EMPLOYEE_ID IN (?) [50000-197]\n.\n.\n.\n.\nCaused by: org.apache.ignite.IgniteCheckedException: Runtime failure on lookup row: IndexSearchRowImpl [rowHnd=org.apache.ignite.internal.processors.query.h2.index.QueryIndexRowHandler@5b289c8e]\n.\n.\n.\n.\nCaused by: org.apache.ignite.IgniteCheckedException: Rows cannot be compared\n.\n.\n.\n.\nCaused by: org.h2.message.DbException: Hexadecimal string with odd number of characters: &quot;1&quot; [90003-197]\n</code></pre>\n<p>Any help/suggestion would really appreciated.</p>\n"},{"tags":["java","apache-kafka","apache-kafka-streams"],"answers":[{"tags":[],"owner":{"account_id":2038203,"reputation":1330,"user_id":1820013,"display_name":"bbejeck"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675442433,"creation_date":1675442433,"answer_id":75338654,"question_id":75334869,"body_markdown":"TLDR; the keys won&#39;t overwrite each other; keys from either topic will get included in the aggregation.\r\n\r\nFor some context, Kafka Streams creates a `Task` for each input partition.  So if you have a topic with 4 partitions, you&#39;ll get 4 tasks.  When you have multiple topics in the source, the number of tasks Kafka streams creates is max(topic1.partitions, topic2.partitions), and the task will process records from the same partition from each topic.  For example, let&#39;s assume `topic1` and `topic2` each have 4 partitions - you&#39;ll end up with 4 tasks  `0_0, 1_1, 2_2, 3_3`, the first number is the task-id, and the second number is the partition it&#39;s responsible for.\r\n\r\nSo the `groupByKey` will group keys from either topic since all the records the task is processing belong to the nth partition.  If you want to treat records differently by topic, you&#39;ll need to use the [KStream.process][1] method, which gives you access to the [ProcessorContex][2]. From the `ProcessorContext`, you can use the `recordMetadata()` method to retrieve the [RecordMetadata][3] object from which you can get the source topic for that particular record.  In some cases, the topic name might not be available as explained in the [RecordMetadata.topic(][4]) Javadoc.\r\n\r\nHTH,\r\n\r\nBill\r\n\r\n\r\n  [1]: https://javadoc.io/static/org.apache.kafka/kafka-streams/3.3.2/org/apache/kafka/streams/kstream/KStream.html#process-org.apache.kafka.streams.processor.api.ProcessorSupplier-java.lang.String...-\r\n  [2]: https://javadoc.io/static/org.apache.kafka/kafka-streams/3.3.2/org/apache/kafka/streams/processor/ProcessorContext.html\r\n  [3]: https://javadoc.io/static/org.apache.kafka/kafka-streams/3.3.2/org/apache/kafka/streams/processor/api/RecordMetadata.html\r\n  [4]: https://javadoc.io/static/org.apache.kafka/kafka-streams/3.3.2/org/apache/kafka/streams/processor/api/RecordMetadata.html#topic--","title":"Is materialized store created per partition and key or only per key?","body":"<p>TLDR; the keys won't overwrite each other; keys from either topic will get included in the aggregation.</p>\n<p>For some context, Kafka Streams creates a <code>Task</code> for each input partition.  So if you have a topic with 4 partitions, you'll get 4 tasks.  When you have multiple topics in the source, the number of tasks Kafka streams creates is max(topic1.partitions, topic2.partitions), and the task will process records from the same partition from each topic.  For example, let's assume <code>topic1</code> and <code>topic2</code> each have 4 partitions - you'll end up with 4 tasks  <code>0_0, 1_1, 2_2, 3_3</code>, the first number is the task-id, and the second number is the partition it's responsible for.</p>\n<p>So the <code>groupByKey</code> will group keys from either topic since all the records the task is processing belong to the nth partition.  If you want to treat records differently by topic, you'll need to use the <a href=\"https://javadoc.io/static/org.apache.kafka/kafka-streams/3.3.2/org/apache/kafka/streams/kstream/KStream.html#process-org.apache.kafka.streams.processor.api.ProcessorSupplier-java.lang.String...-\" rel=\"nofollow noreferrer\">KStream.process</a> method, which gives you access to the <a href=\"https://javadoc.io/static/org.apache.kafka/kafka-streams/3.3.2/org/apache/kafka/streams/processor/ProcessorContext.html\" rel=\"nofollow noreferrer\">ProcessorContex</a>. From the <code>ProcessorContext</code>, you can use the <code>recordMetadata()</code> method to retrieve the <a href=\"https://javadoc.io/static/org.apache.kafka/kafka-streams/3.3.2/org/apache/kafka/streams/processor/api/RecordMetadata.html\" rel=\"nofollow noreferrer\">RecordMetadata</a> object from which you can get the source topic for that particular record.  In some cases, the topic name might not be available as explained in the <a href=\"https://javadoc.io/static/org.apache.kafka/kafka-streams/3.3.2/org/apache/kafka/streams/processor/api/RecordMetadata.html#topic--\" rel=\"nofollow noreferrer\">RecordMetadata.topic(</a>) Javadoc.</p>\n<p>HTH,</p>\n<p>Bill</p>\n"}],"owner":{"account_id":1193173,"reputation":4237,"user_id":1165499,"accept_rate":76,"display_name":"ashur"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75338654,"answer_count":1,"score":0,"last_activity_date":1675442433,"creation_date":1675422629,"question_id":75334869,"body_markdown":"I have the following topology definition:\r\n\r\n    KStream&lt;String, ObjectMessage&gt; stream = kStreamBuilder.stream(&quot;topic1&quot;, &quot;topic2&quot;);\r\n    stream.mapValues(new ProtobufObjectConverter())\r\n            .groupByKey()\r\n            .windowedBy(TimeWindows.ofSizeWithNoGrace(Duration.ofMillis(100)))\r\n            .aggregate(AggregatedObject::new, new ObjectAggregator(), buildStateStore(storeName))\r\n            .suppress(Suppressed.untilWindowCloses(Suppressed.BufferConfig.unbounded().withMaxRecords(config.suppressionBufferSize())))\r\n            .mapValues(new AggregatedObjectProtobufConverter())\r\n            .toStream((key, value) -&gt; key.key())\r\n            .to(outputTopic);\r\n\r\n    private Materialized&lt;String, AggregatedTicker, WindowStore&lt;Bytes, byte[]&gt;&gt; buildStateStore(String storeName) {\r\n        return Materialized.&lt;String, AggregatedObject, WindowStore&lt;Bytes, byte[]&gt;&gt;as(storeName)\r\n                .withKeySerde(Serdes.String())\r\n                .withValueSerde(new JsonSerde&lt;&gt;(AggregatedObject.class));\r\n    }\r\n\r\n\r\nBoth topics use the same key, but they mean different things. The question is, whether the keys put into store won&#39;t overwrite themself from different topics? I couldn&#39;t find easily such information in the code or documentation or didn&#39;t know where to particularly look to.\r\n\r\nWhat I want to achieve is to possibly use single store across all topics and their partitions and be sure that state won&#39;t be corrupted or lost.","title":"Is materialized store created per partition and key or only per key?","body":"<p>I have the following topology definition:</p>\n<pre><code>KStream&lt;String, ObjectMessage&gt; stream = kStreamBuilder.stream(&quot;topic1&quot;, &quot;topic2&quot;);\nstream.mapValues(new ProtobufObjectConverter())\n        .groupByKey()\n        .windowedBy(TimeWindows.ofSizeWithNoGrace(Duration.ofMillis(100)))\n        .aggregate(AggregatedObject::new, new ObjectAggregator(), buildStateStore(storeName))\n        .suppress(Suppressed.untilWindowCloses(Suppressed.BufferConfig.unbounded().withMaxRecords(config.suppressionBufferSize())))\n        .mapValues(new AggregatedObjectProtobufConverter())\n        .toStream((key, value) -&gt; key.key())\n        .to(outputTopic);\n\nprivate Materialized&lt;String, AggregatedTicker, WindowStore&lt;Bytes, byte[]&gt;&gt; buildStateStore(String storeName) {\n    return Materialized.&lt;String, AggregatedObject, WindowStore&lt;Bytes, byte[]&gt;&gt;as(storeName)\n            .withKeySerde(Serdes.String())\n            .withValueSerde(new JsonSerde&lt;&gt;(AggregatedObject.class));\n}\n</code></pre>\n<p>Both topics use the same key, but they mean different things. The question is, whether the keys put into store won't overwrite themself from different topics? I couldn't find easily such information in the code or documentation or didn't know where to particularly look to.</p>\n<p>What I want to achieve is to possibly use single store across all topics and their partitions and be sure that state won't be corrupted or lost.</p>\n"},{"tags":["java","swing","jtable"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1675178318,"post_id":75293942,"comment_id":132870081,"body_markdown":"*when I highlight cell 1, it will be highlighted with blue but when I click it again it won&#39;t be un-highlighted unless I click another cell then click cell 1 again* - So Is the requirement that only one cell can be highlighted at a time?","body":"<i>when I highlight cell 1, it will be highlighted with blue but when I click it again it won&#39;t be un-highlighted unless I click another cell then click cell 1 again</i> - So Is the requirement that only one cell can be highlighted at a time?"},{"owner":{"account_id":26631611,"reputation":3,"user_id":20248721,"display_name":"rewards110"},"score":0,"creation_date":1675178784,"post_id":75293942,"comment_id":132870290,"body_markdown":"I want to highlight cells one by one, then un-highlight each cell by clicking on it again. The problem is when I click a cell it is highlighted but when I click it again to un-highlight it, it won&#39;t be un-highlighted unless I click another cell. I do have a condition set within a mouse listener.","body":"I want to highlight cells one by one, then un-highlight each cell by clicking on it again. The problem is when I click a cell it is highlighted but when I click it again to un-highlight it, it won&#39;t be un-highlighted unless I click another cell. I do have a condition set within a mouse listener."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1675180608,"post_id":75293942,"comment_id":132870997,"body_markdown":"Keeping variable like &quot;oneCount, twoCount...&quot; is the wrong approach as this can get unmaintainable as the grid size increases. I would keep a 2D Array of boolean values to indicate whether a cell should be highlighted or not. A mouse pressed on the cell would toggle the value. The renderer would check the value do the the highlighting.","body":"Keeping variable like &quot;oneCount, twoCount...&quot; is the wrong approach as this can get unmaintainable as the grid size increases. I would keep a 2D Array of boolean values to indicate whether a cell should be highlighted or not. A mouse pressed on the cell would toggle the value. The renderer would check the value do the the highlighting."},{"owner":{"account_id":26631611,"reputation":3,"user_id":20248721,"display_name":"rewards110"},"score":0,"creation_date":1675181881,"post_id":75293942,"comment_id":132871451,"body_markdown":"I&#39;m a bit confused, can you please elaborate or give some example","body":"I&#39;m a bit confused, can you please elaborate or give some example"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1675184840,"post_id":75293942,"comment_id":132872449,"body_markdown":"In your renderer you keep a 2D Array to represent the state of each cell. You already have a MouseListener. You already know the row/column of the cell. So you then toggle the state of the cell in the renderer and invoke repaint() on the table.. You add code to the renderer to highlight the cell based on the state of the cell.","body":"In your renderer you keep a 2D Array to represent the state of each cell. You already have a MouseListener. You already know the row/column of the cell. So you then toggle the state of the cell in the renderer and invoke repaint() on the table.. You add code to the renderer to highlight the cell based on the state of the cell."},{"owner":{"account_id":26631611,"reputation":3,"user_id":20248721,"display_name":"rewards110"},"score":0,"creation_date":1675248659,"post_id":75293942,"comment_id":132886270,"body_markdown":"I initialized the 2D boolean array and it should be false by default. When I assign it to true I get the exception &quot;java.lang.ArrayIndexOutOfBounds Exception&quot;\n\nboolean cells[][] = new boolean[row][column];\ncells[row][column] = true;\n\nHow should I add it in a mouse listener and renderer?","body":"I initialized the 2D boolean array and it should be false by default. When I assign it to true I get the exception &quot;java.lang.ArrayIndexOutOfBounds Exception&quot;  boolean cells[][] = new boolean[row][column]; cells[row][column] = true;  How should I add it in a mouse listener and renderer?"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1675263399,"post_id":75293942,"comment_id":132891144,"body_markdown":"In the constructor of your renderer you need to create the 2D Array based on the size of your table, which appears to be 4x4.  In your renderer you also need a method like &quot;toggleCellHighlight(row, column). Now, in the MouseListener you invoke this method for the specific row/column. Also, you can&#39;t just set it to &quot;true&quot; because you also need the ability to reset it to &quot;false&quot; when you click on the cell again. Post a proper [mre] showing your attempt if you need more help.","body":"In the constructor of your renderer you need to create the 2D Array based on the size of your table, which appears to be 4x4.  In your renderer you also need a method like &quot;toggleCellHighlight(row, column). Now, in the MouseListener you invoke this method for the specific row/column. Also, you can&#39;t just set it to &quot;true&quot; because you also need the ability to reset it to &quot;false&quot; when you click on the cell again. Post a proper <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> showing your attempt if you need more help."},{"owner":{"account_id":26631611,"reputation":3,"user_id":20248721,"display_name":"rewards110"},"score":0,"creation_date":1675431471,"post_id":75293942,"comment_id":132932965,"body_markdown":"I&#39;ve edited the code and used the boolean variable isSelected to print whether the cells boolean 2D array changes from false to true but does not change so I can use the boolean on the change color method.","body":"I&#39;ve edited the code and used the boolean variable isSelected to print whether the cells boolean 2D array changes from false to true but does not change so I can use the boolean on the change color method."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1675432388,"post_id":75293942,"comment_id":132933272,"body_markdown":"@camickr _In your renderer you keep a 2D Array to represent the state of each cell_ ehh .. no: I would argue that keeping table state is __not__ the task of a renderer, all it might do is compare it&#39;s own location with some state of the table and configure itself accordingly. Maybe misunderstanding both the requirement and and your comment, though :)","body":"@camickr <i>In your renderer you keep a 2D Array to represent the state of each cell</i> ehh .. no: I would argue that keeping table state is <b>not</b> the task of a renderer, all it might do is compare it&#39;s own location with some state of the table and configure itself accordingly. Maybe misunderstanding both the requirement and and your comment, though :)"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1675432469,"post_id":75293942,"comment_id":132933298,"body_markdown":"also unrelated: please keep the your tags focused .. uitableView is clearly documented to be about iOS ..","body":"also unrelated: please keep the your tags focused .. uitableView is clearly documented to be about iOS .."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1675440950,"post_id":75293942,"comment_id":132936301,"body_markdown":"@kleopatra don&#39;t disagree that normally a renderer is generic and can be used by any table so it should not track state information. In this case we need custom data to track the highlight state of each cell. We then need the ability to toggle the state and finally render the state. I was thinking that it might be easier to have a single class handle this functionality, instead of having the logic split in multiple classes. In any case I made a simple example below which maybe you can improve upon.","body":"@kleopatra don&#39;t disagree that normally a renderer is generic and can be used by any table so it should not track state information. In this case we need custom data to track the highlight state of each cell. We then need the ability to toggle the state and finally render the state. I was thinking that it might be easier to have a single class handle this functionality, instead of having the logic split in multiple classes. In any case I made a simple example below which maybe you can improve upon."}],"answers":[{"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1675442124,"post_id":75338154,"comment_id":132936689,"body_markdown":"as long as the state is not kept in the renderer, any solution is good (or bad) as the other - particularly as long as we (or me at least ;) can&#39;t be really certain that highlight != selected :)","body":"as long as the state is not kept in the renderer, any solution is good (or bad) as the other - particularly as long as we (or me at least ;) can&#39;t be really certain that highlight != selected :)"},{"owner":{"account_id":26631611,"reputation":3,"user_id":20248721,"display_name":"rewards110"},"score":0,"creation_date":1675671516,"post_id":75338154,"comment_id":132971579,"body_markdown":"Sorry to respond late. Thank you for the answer and everyone&#39;s contributions.","body":"Sorry to respond late. Thank you for the answer and everyone&#39;s contributions."}],"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675441792,"creation_date":1675439817,"answer_id":75338154,"question_id":75293942,"body_markdown":"In the example below the &quot;state&quot; of the highlight is contained in a 2D Array that has been added as data to the table by using a &quot;client property&quot;.\r\n\r\nThe MouseListener is used to toggle the highlighting state every time you click on a cell. \r\n\r\nThe renderer will then query the highlighting state in order to paint the background.\r\n\r\n    import java.awt.*;\r\n    import javax.swing.*;\r\n    import javax.swing.table.*;\r\n    import java.awt.event.*;\r\n    \r\n    public class TableHighlight extends JPanel\r\n    {\r\n    \tpublic TableHighlight()\r\n    \t{\r\n    \t\tsetLayout( new BorderLayout() );\r\n    \r\n    \t\tJTable table = new JTable(4, 4);\r\n    \t\tadd( new JScrollPane( table ) );\r\n    \r\n    \t\tboolean[][] highlights = new boolean[4][4];\r\n    \t\ttable.setDefaultRenderer(Object.class, new TableRenderer());\r\n    \t\ttable.putClientProperty(&quot;highlights&quot;, highlights);\r\n    \r\n    \t\ttable.addMouseListener(new MouseAdapter()\r\n    \t\t{\r\n    \t        @Override\r\n        \t    public void mousePressed(final MouseEvent e)\r\n        \t    {\r\n    \t\t\t\tJTable table = (JTable)e.getSource();\r\n    \t\t\t\tint row = table.getSelectedRow();\r\n    \t\t\t\tint column = table.getSelectedColumn();\r\n    \r\n    \t\t\t\tboolean[][] highlights = (boolean[][])table.getClientProperty(&quot;highlights&quot;);\r\n    \t\t\t\thighlights[row][column] = !highlights[row][column];\r\n    \r\n    \t\t\t\ttable.repaint();\r\n    \t\t\t}\r\n    \t\t});\r\n    \t}\r\n    \r\n    \tprivate class TableRenderer extends DefaultTableCellRenderer\r\n    \t{\r\n    \t\t@Override\r\n    \t\tpublic Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\r\n    \r\n    \t\tComponent c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\r\n    \r\n    \t\tboolean[][] highlights = (boolean[][])table.getClientProperty(&quot;highlights&quot;);\r\n    \t\tboolean highlighted = highlights[row][column];\r\n    \r\n            if (highlighted)\r\n                c.setBackground(Color.BLUE);\r\n            else\r\n    \t        c.setBackground(Color.WHITE);\r\n    \r\n            return c;\r\n        }\r\n    }\r\n    \r\n    \tprivate static void createAndShowGUI()\r\n    \t{\r\n    \t\tJFrame frame = new JFrame(&quot;TableHighlight&quot;);\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \t\tframe.add(new TableHighlight());\r\n            frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\r\n    \t\tframe.pack();\r\n    \t\tframe.setLocationByPlatform( true );\r\n    \t\tframe.setVisible( true );\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) throws Exception\r\n    \t{\r\n    \t\tjava.awt.EventQueue.invokeLater( () -&gt; createAndShowGUI() );\r\n    \t}\r\n    }\r\n\r\n","title":"Jtable cell selection and highlighting","body":"<p>In the example below the &quot;state&quot; of the highlight is contained in a 2D Array that has been added as data to the table by using a &quot;client property&quot;.</p>\n<p>The MouseListener is used to toggle the highlighting state every time you click on a cell.</p>\n<p>The renderer will then query the highlighting state in order to paint the background.</p>\n<pre><code>import java.awt.*;\nimport javax.swing.*;\nimport javax.swing.table.*;\nimport java.awt.event.*;\n\npublic class TableHighlight extends JPanel\n{\n    public TableHighlight()\n    {\n        setLayout( new BorderLayout() );\n\n        JTable table = new JTable(4, 4);\n        add( new JScrollPane( table ) );\n\n        boolean[][] highlights = new boolean[4][4];\n        table.setDefaultRenderer(Object.class, new TableRenderer());\n        table.putClientProperty(&quot;highlights&quot;, highlights);\n\n        table.addMouseListener(new MouseAdapter()\n        {\n            @Override\n            public void mousePressed(final MouseEvent e)\n            {\n                JTable table = (JTable)e.getSource();\n                int row = table.getSelectedRow();\n                int column = table.getSelectedColumn();\n\n                boolean[][] highlights = (boolean[][])table.getClientProperty(&quot;highlights&quot;);\n                highlights[row][column] = !highlights[row][column];\n\n                table.repaint();\n            }\n        });\n    }\n\n    private class TableRenderer extends DefaultTableCellRenderer\n    {\n        @Override\n        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\n\n        Component c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\n\n        boolean[][] highlights = (boolean[][])table.getClientProperty(&quot;highlights&quot;);\n        boolean highlighted = highlights[row][column];\n\n        if (highlighted)\n            c.setBackground(Color.BLUE);\n        else\n            c.setBackground(Color.WHITE);\n\n        return c;\n    }\n}\n\n    private static void createAndShowGUI()\n    {\n        JFrame frame = new JFrame(&quot;TableHighlight&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.add(new TableHighlight());\n        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\n        frame.pack();\n        frame.setLocationByPlatform( true );\n        frame.setVisible( true );\n    }\n\n    public static void main(String[] args) throws Exception\n    {\n        java.awt.EventQueue.invokeLater( () -&gt; createAndShowGUI() );\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":26631611,"reputation":3,"user_id":20248721,"display_name":"rewards110"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":75338154,"answer_count":1,"score":-2,"last_activity_date":1675441792,"creation_date":1675150605,"question_id":75293942,"body_markdown":"I have an attached code, it working but with a little issue. I&#39;m able to highlight a cell with blue color. What I want is after highlighting a single cell with a blue color I want to be able to un-highlight the same cell by clicking it again. For example when I highlight cell 1, it will be highlighted with blue but when I click it again it won&#39;t be un-highlighted  unless I click another cell then click cell 1 again.\r\n\r\nHow can I fix this problem. \r\n\r\nIn the code I&#39;m only testing cell 1 to 4.\r\n\r\n```\r\n\r\nimport java.awt.BorderLayout;\r\nimport java.awt.Color;\r\nimport java.awt.Component;\r\nimport java.awt.Container;\r\nimport java.awt.Font;\r\nimport java.awt.event.MouseAdapter;\r\nimport java.awt.event.MouseEvent;\r\n\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JScrollPane;\r\nimport javax.swing.JTable;\r\nimport javax.swing.table.DefaultTableCellRenderer;\r\n\r\npublic class myJTable extends JFrame {\r\n\r\n    Container container;\r\n    JTable table;\r\n    JScrollPane pane;\r\n   \r\n    static String oneSelected = &quot;&quot;;\r\n    static String twoSelected = &quot;&quot;;\r\n    static String threeSelected = &quot;&quot;;\r\n    static String fourSelected = &quot;&quot;;\r\n   \r\n    int oneCount = 0;\r\n    int twoCount = 0;\r\n    int threeCount = 0;\r\n    int fourCount = 0;\r\n   \r\n    public myJTable() {\r\n\r\n        container = this.getContentPane();\r\n        container.setLayout(new BorderLayout());\r\n\r\n        String[] columnNames = {&quot;No.1&quot;,&quot;No.2&quot;, &quot;No.3&quot;, &quot;No.4&quot;};\r\n        Object[][] rowData = {{&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;},\r\n            {&quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;},\r\n            {&quot;9&quot;, &quot;10&quot;, &quot;11&quot;, &quot;12&quot;},\r\n            {&quot;13&quot;, &quot;14&quot;, &quot;15&quot;, &quot;16&quot;},\r\n            {&quot;17&quot;, &quot;18&quot;, &quot;19&quot;, &quot;20&quot;}};\r\n\r\n        table = new JTable(rowData, columnNames);\r\n        table.setRowHeight(50);\r\n        table.setDefaultRenderer(Object.class, new TableRenderer());\r\n        table.setCellSelectionEnabled(true);\r\n        pane = new JScrollPane(table);\r\n        container.add(pane);\r\n       \r\n           table.addMouseListener(new MouseAdapter() {\r\n        @Override\r\n        public void mouseClicked(final MouseEvent e) {\r\n        if (e.getClickCount() == 1) {\r\n        final JTable jTable= (JTable)e.getSource();\r\n        final int row = jTable.getSelectedRow();\r\n        final int column = jTable.getSelectedColumn();\r\n        final String cellValue = (String)jTable.getValueAt(row, column);\r\n        //textfield.setText(valueInCell);\r\n       \r\n        if (cellValue.equals(&quot;1&quot;) &amp;&amp; oneCount == 0) {\r\n        oneSelected  = cellValue;\r\n        oneCount++;\r\n        System.out.println(&quot;cell value is &quot; +oneSelected);\r\n        System.out.println(&quot;one count is &quot; +oneCount);\r\n        }\r\n        else if (cellValue.equals(&quot;1&quot;) &amp;&amp; oneCount &gt;= 1) {\r\n        oneSelected  = &quot;&quot;;\r\n        oneCount = 0;\r\n        System.out.println(&quot;cell value is &quot; +oneSelected);\r\n        System.out.println(&quot;one count is &quot; +oneCount);\r\n        }\r\n       \r\n            if (cellValue.equals(&quot;2&quot;) &amp;&amp; twoCount == 0) {\r\n          twoSelected  = cellValue;\r\n          twoCount++;\r\n          System.out.println(&quot;cell value is &quot; +twoSelected);\r\n        }\r\n            else if (cellValue.equals(&quot;2&quot;) &amp;&amp; twoCount &gt;= 1) {\r\n        twoSelected  = &quot;&quot;;\r\n        twoCount = 0;\r\n        System.out.println(&quot;cell value is &quot; +twoSelected);\r\n        System.out.println(&quot;two count is &quot; +twoCount);\r\n        }\r\n           \r\n            if (cellValue.equals(&quot;3&quot;) &amp;&amp; threeCount == 0) {\r\n          threeSelected  = cellValue;\r\n          threeCount++;\r\n          System.out.println(&quot;cell value is &quot; +threeSelected);\r\n           }\r\n            else if (cellValue.equals(&quot;3&quot;) &amp;&amp; threeCount &gt;= 1) {\r\n        threeSelected  = &quot;&quot;;\r\n        threeCount = 0;\r\n        System.out.println(&quot;cell value is &quot; +threeSelected);\r\n        System.out.println(&quot;three count is &quot; +threeCount);\r\n        }\r\n           \r\n            if (cellValue.equals(&quot;4&quot;) &amp;&amp; fourCount == 0) {\r\n         fourSelected  = cellValue;\r\n         fourCount++;\r\n         System.out.println(&quot;cell value is &quot; +fourSelected);\r\n           }\r\n            else if (cellValue.equals(&quot;4&quot;) &amp;&amp; fourCount &gt;= 1) {\r\n        fourSelected  = &quot;&quot;;\r\n        fourCount = 0;\r\n        System.out.println(&quot;cell value is &quot; +fourSelected);\r\n        System.out.println(&quot;four count is &quot; +fourCount);\r\n        }\r\n        }\r\n        }\r\n        });\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n   \r\n        myJTable frame = new myJTable();\r\n        frame.setTitle(&quot;JTable Example&quot;);\r\n        frame.setVisible(true);\r\n        frame.setSize(700, 300);\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    }\r\n}\r\n\r\nclass TableRenderer extends DefaultTableCellRenderer {\r\n\r\n    @Override\r\n   public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\r\n   \r\n    String oneSValue = myJTable.oneSelected;\r\n    String twoSValue = myJTable.twoSelected;\r\n    String threeSValue = myJTable.threeSelected;\r\n    String fourSValue = myJTable.fourSelected;\r\n       \r\n    Component c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\r\n       \r\n        if (value.equals(oneSValue) || value.equals(twoSValue) || value.equals(threeSValue) || value.equals(fourSValue)) {\r\n            c.setBackground(Color.BLUE);\r\n            c.setForeground(Color.WHITE);\r\n          }\r\n        else {\r\n        c.setBackground(Color.WHITE);\r\n        c.setForeground(Color.BLACK);\r\n        }\r\n       \r\n        return c;\r\n       \r\n    }\r\n}\r\n      \r\n\r\n```\r\n**FIRST EDIT:**\r\n\r\n*I&#39;ve edited the code and used the boolean variable isSelected to print whether the cells boolean 2D array changes from false to true but does not change*\r\n```\r\nclass TableRenderer extends DefaultTableCellRenderer {\r\n\r\n@Override\r\npublic Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\r\n\r\nboolean cells[][] = new boolean [4][4];\r\n\r\n\r\nComponent c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\r\n\r\nif(isSelected) {\r\nif(cells[0][0] == false) {\r\nSystem.out.println(&quot;cell 0 0 is &quot; + cells[0][0]);\r\ncells[0][0] = true;\r\n}\r\nelse if(cells[0][0] == true) {\r\nSystem.out.println(&quot;cell 0 0 is &quot; + cells[0][0]);\r\n}\r\n}\r\n\r\nreturn c;\r\n}\r\n}\r\n```\r\n","title":"Jtable cell selection and highlighting","body":"<p>I have an attached code, it working but with a little issue. I'm able to highlight a cell with blue color. What I want is after highlighting a single cell with a blue color I want to be able to un-highlight the same cell by clicking it again. For example when I highlight cell 1, it will be highlighted with blue but when I click it again it won't be un-highlighted  unless I click another cell then click cell 1 again.</p>\n<p>How can I fix this problem.</p>\n<p>In the code I'm only testing cell 1 to 4.</p>\n<pre><code>\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Component;\nimport java.awt.Container;\nimport java.awt.Font;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\n\nimport javax.swing.JFrame;\nimport javax.swing.JScrollPane;\nimport javax.swing.JTable;\nimport javax.swing.table.DefaultTableCellRenderer;\n\npublic class myJTable extends JFrame {\n\n    Container container;\n    JTable table;\n    JScrollPane pane;\n   \n    static String oneSelected = &quot;&quot;;\n    static String twoSelected = &quot;&quot;;\n    static String threeSelected = &quot;&quot;;\n    static String fourSelected = &quot;&quot;;\n   \n    int oneCount = 0;\n    int twoCount = 0;\n    int threeCount = 0;\n    int fourCount = 0;\n   \n    public myJTable() {\n\n        container = this.getContentPane();\n        container.setLayout(new BorderLayout());\n\n        String[] columnNames = {&quot;No.1&quot;,&quot;No.2&quot;, &quot;No.3&quot;, &quot;No.4&quot;};\n        Object[][] rowData = {{&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;},\n            {&quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;},\n            {&quot;9&quot;, &quot;10&quot;, &quot;11&quot;, &quot;12&quot;},\n            {&quot;13&quot;, &quot;14&quot;, &quot;15&quot;, &quot;16&quot;},\n            {&quot;17&quot;, &quot;18&quot;, &quot;19&quot;, &quot;20&quot;}};\n\n        table = new JTable(rowData, columnNames);\n        table.setRowHeight(50);\n        table.setDefaultRenderer(Object.class, new TableRenderer());\n        table.setCellSelectionEnabled(true);\n        pane = new JScrollPane(table);\n        container.add(pane);\n       \n           table.addMouseListener(new MouseAdapter() {\n        @Override\n        public void mouseClicked(final MouseEvent e) {\n        if (e.getClickCount() == 1) {\n        final JTable jTable= (JTable)e.getSource();\n        final int row = jTable.getSelectedRow();\n        final int column = jTable.getSelectedColumn();\n        final String cellValue = (String)jTable.getValueAt(row, column);\n        //textfield.setText(valueInCell);\n       \n        if (cellValue.equals(&quot;1&quot;) &amp;&amp; oneCount == 0) {\n        oneSelected  = cellValue;\n        oneCount++;\n        System.out.println(&quot;cell value is &quot; +oneSelected);\n        System.out.println(&quot;one count is &quot; +oneCount);\n        }\n        else if (cellValue.equals(&quot;1&quot;) &amp;&amp; oneCount &gt;= 1) {\n        oneSelected  = &quot;&quot;;\n        oneCount = 0;\n        System.out.println(&quot;cell value is &quot; +oneSelected);\n        System.out.println(&quot;one count is &quot; +oneCount);\n        }\n       \n            if (cellValue.equals(&quot;2&quot;) &amp;&amp; twoCount == 0) {\n          twoSelected  = cellValue;\n          twoCount++;\n          System.out.println(&quot;cell value is &quot; +twoSelected);\n        }\n            else if (cellValue.equals(&quot;2&quot;) &amp;&amp; twoCount &gt;= 1) {\n        twoSelected  = &quot;&quot;;\n        twoCount = 0;\n        System.out.println(&quot;cell value is &quot; +twoSelected);\n        System.out.println(&quot;two count is &quot; +twoCount);\n        }\n           \n            if (cellValue.equals(&quot;3&quot;) &amp;&amp; threeCount == 0) {\n          threeSelected  = cellValue;\n          threeCount++;\n          System.out.println(&quot;cell value is &quot; +threeSelected);\n           }\n            else if (cellValue.equals(&quot;3&quot;) &amp;&amp; threeCount &gt;= 1) {\n        threeSelected  = &quot;&quot;;\n        threeCount = 0;\n        System.out.println(&quot;cell value is &quot; +threeSelected);\n        System.out.println(&quot;three count is &quot; +threeCount);\n        }\n           \n            if (cellValue.equals(&quot;4&quot;) &amp;&amp; fourCount == 0) {\n         fourSelected  = cellValue;\n         fourCount++;\n         System.out.println(&quot;cell value is &quot; +fourSelected);\n           }\n            else if (cellValue.equals(&quot;4&quot;) &amp;&amp; fourCount &gt;= 1) {\n        fourSelected  = &quot;&quot;;\n        fourCount = 0;\n        System.out.println(&quot;cell value is &quot; +fourSelected);\n        System.out.println(&quot;four count is &quot; +fourCount);\n        }\n        }\n        }\n        });\n    }\n\n    public static void main(String[] args) {\n   \n        myJTable frame = new myJTable();\n        frame.setTitle(&quot;JTable Example&quot;);\n        frame.setVisible(true);\n        frame.setSize(700, 300);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    }\n}\n\nclass TableRenderer extends DefaultTableCellRenderer {\n\n    @Override\n   public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\n   \n    String oneSValue = myJTable.oneSelected;\n    String twoSValue = myJTable.twoSelected;\n    String threeSValue = myJTable.threeSelected;\n    String fourSValue = myJTable.fourSelected;\n       \n    Component c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\n       \n        if (value.equals(oneSValue) || value.equals(twoSValue) || value.equals(threeSValue) || value.equals(fourSValue)) {\n            c.setBackground(Color.BLUE);\n            c.setForeground(Color.WHITE);\n          }\n        else {\n        c.setBackground(Color.WHITE);\n        c.setForeground(Color.BLACK);\n        }\n       \n        return c;\n       \n    }\n}\n      \n\n</code></pre>\n<p><strong>FIRST EDIT:</strong></p>\n<p><em>I've edited the code and used the boolean variable isSelected to print whether the cells boolean 2D array changes from false to true but does not change</em></p>\n<pre><code>class TableRenderer extends DefaultTableCellRenderer {\n\n@Override\npublic Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\n\nboolean cells[][] = new boolean [4][4];\n\n\nComponent c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\n\nif(isSelected) {\nif(cells[0][0] == false) {\nSystem.out.println(&quot;cell 0 0 is &quot; + cells[0][0]);\ncells[0][0] = true;\n}\nelse if(cells[0][0] == true) {\nSystem.out.println(&quot;cell 0 0 is &quot; + cells[0][0]);\n}\n}\n\nreturn c;\n}\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1675436154,"post_id":75337410,"comment_id":132934580,"body_markdown":"[Please do not upload images of code/data/errors.](//meta.stackoverflow.com/q/285551) Instead [edit] your question to contain the output you get as (properly formatted) plain text.","body":"<a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of code/data/errors.</a> Instead <a href=\"https://stackoverflow.com/posts/75337410/edit\">edit</a> your question to contain the output you get as (properly formatted) plain text."},{"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":2,"creation_date":1675436380,"post_id":75337410,"comment_id":132934655,"body_markdown":"Capital `R` is encoded as 82, which is smaller than 97, suggesting that `D` became negative in the decryption formula, that&#39;s about as far as I debugged. Figure out why and fix that. You might be running into the fact that [`%` isn&#39;t exactly the same as `mod`](https://stackoverflow.com/questions/5385024/mod-in-java-produces-negative-numbers), especially when it comes to negative numbers.","body":"Capital <code>R</code> is encoded as 82, which is smaller than 97, suggesting that <code>D</code> became negative in the decryption formula, that&#39;s about as far as I debugged. Figure out why and fix that. You might be running into the fact that <a href=\"https://stackoverflow.com/questions/5385024/mod-in-java-produces-negative-numbers\"><code>%</code> isn&#39;t exactly the same as <code>mod</code></a>, especially when it comes to negative numbers."},{"owner":{"account_id":14632062,"reputation":585,"user_id":10671013,"display_name":"Tan Yu Hau Sean"},"score":0,"creation_date":1675436900,"post_id":75337410,"comment_id":132934815,"body_markdown":"% in Java is the remainder operation, which doesnt do complements. what I did to circumvent that was a while loop that while the number is negative, add the modulo value to it., you could probably make it a helper method to convert all your negatives after using %","body":"% in Java is the remainder operation, which doesnt do complements. what I did to circumvent that was a while loop that while the number is negative, add the modulo value to it., you could probably make it a helper method to convert all your negatives after using %"},{"owner":{"account_id":5018541,"reputation":12090,"user_id":4032703,"accept_rate":100,"display_name":"EJoshuaS - Stand with Ukraine"},"score":0,"creation_date":1675444855,"post_id":75337410,"comment_id":132937611,"body_markdown":"@JoachimSauer I edited on the OP&#39;s behalf, so the image is now available as text.","body":"@JoachimSauer I edited on the OP&#39;s behalf, so the image is now available as text."}],"answers":[{"comments":[{"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1675453119,"post_id":75337923,"comment_id":132939873,"body_markdown":"[`Math.floorMod()`](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Math.html#floorMod(int,int)) would also work.","body":"<a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Math.html#floorMod(int,int)\" rel=\"nofollow noreferrer\"><code>Math.floorMod()</code></a> would also work."}],"tags":[],"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675440056,"creation_date":1675438561,"answer_id":75337923,"question_id":75337410,"body_markdown":"As Joachim Sauer and Tan Yu Hau Sean suggest, `%` does things you may not expect on negative numbers. If `a` is negative, `a%b` will be a number between `-b` and `0`.\r\n\r\nIf you add a method like this\r\n\r\n    public static int mod(int a, int b) {\r\n        return (a%b+b)%b;\r\n    } \r\n\r\nand replace your instances of `%` with calls to it, e.g.:\r\n\r\n      int C = mod(a* val + b,26);\r\n\r\nthings will work a lot better.","title":"Affine Cypher in Java","body":"<p>As Joachim Sauer and Tan Yu Hau Sean suggest, <code>%</code> does things you may not expect on negative numbers. If <code>a</code> is negative, <code>a%b</code> will be a number between <code>-b</code> and <code>0</code>.</p>\n<p>If you add a method like this</p>\n<pre><code>public static int mod(int a, int b) {\n    return (a%b+b)%b;\n} \n</code></pre>\n<p>and replace your instances of <code>%</code> with calls to it, e.g.:</p>\n<pre><code>  int C = mod(a* val + b,26);\n</code></pre>\n<p>things will work a lot better.</p>\n"}],"owner":{"account_id":27695550,"reputation":13,"user_id":21141364,"display_name":"user21141364"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":75337923,"answer_count":1,"score":-1,"last_activity_date":1675440866,"creation_date":1675436038,"question_id":75337410,"body_markdown":"I&#39;m an Engineering Student and I&#39;m stuck on this part of the Affine Cypher.\r\n\r\n```\r\nimport java.util.Scanner;\r\npublic class abcd {\r\n\tpublic static int a, b;\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner sc = new Scanner(System.in);\r\n\t\tSystem.out.println(&quot;Enter key(a,b): &quot;);\r\n\t\ta = sc.nextInt();\r\n\t\tb = sc.nextInt();\r\n\t\tScanner hj = new Scanner(System.in);\r\n\t\tSystem.out.print(&quot;Enter String: &quot;);\r\n\t\tString word = hj.nextLine();\r\n\t\tsc.close();\r\n\t\thj.close();\r\n\r\n\t\t\r\n\t\tSystem.out.println(&quot;Cyphered text: &quot; + cypher(word));\r\n\t\tSystem.out.println(&quot;Decyphered text: &quot; + decypher(cypher(word)));\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic static String cypher(String plaintext) {\r\n\r\n\t\t\r\n\t\tString CT = &quot;&quot;;\r\n\t\tfor (int i = 0; i &lt; plaintext.length(); i++) {\r\n\t\t\tchar x = plaintext.charAt(i);\r\n\t\t\tint val = (char)x-97;\r\n\t\t\tint C = ((a* val + b)%26);\r\n\t\t\tchar n = (char) (C + 97);\r\n\t\t\tCT = CT + n;\r\n\t\t\t\r\n\t\t}\r\n\t\treturn CT;\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic static int inv (int a, int b) {\r\n\t\ta=a%b;\r\n\t\tfor (int x = 1; x&lt;26; x++) {\r\n\t\t\tif ((a*x)%26==1) {\r\n\t\t\t\treturn x;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn 1;\r\n\t}\r\n\t\r\n\tpublic static String decypher(String cyphertext) {\r\n\t\tString t = &quot;&quot;;\r\n\r\n\t\tfor (int i = 0; i&lt;cyphertext.length(); i++) {\r\n\t\t\tchar x = cyphertext.charAt(i);\r\n\t\t\tint val = (char)x - 97;\r\n\t\t\tint D = ((inv(a, 26)*(val-b))%26);\r\n\t\t\tchar n = (char)(D + 97);\r\n\t\t\tt = t + n;\r\n\t\t\t\t\t\r\n\t\t}return t;\r\n\t}\r\n\r\n}\r\n```\r\nThe cyphered text shows the desired output but the deciphered text doesn&#39;t match the original text.\r\n\r\nHere is my console input and output:\r\n\r\n    Enter key(a,b):\r\n    7\r\n    2\r\n    Enter String: hello\r\n    Cyphered text: zebbw\r\n    Decyphered text: heRRo\r\n\r\n![enter image description here](https://i.stack.imgur.com/ldJnr.png)\r\n\r\nI was expecting the deciphered text to match the original text since that is what it was supposed to do.","title":"Affine Cypher in Java","body":"<p>I'm an Engineering Student and I'm stuck on this part of the Affine Cypher.</p>\n<pre><code>import java.util.Scanner;\npublic class abcd {\n    public static int a, b;\n    \n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        System.out.println(&quot;Enter key(a,b): &quot;);\n        a = sc.nextInt();\n        b = sc.nextInt();\n        Scanner hj = new Scanner(System.in);\n        System.out.print(&quot;Enter String: &quot;);\n        String word = hj.nextLine();\n        sc.close();\n        hj.close();\n\n        \n        System.out.println(&quot;Cyphered text: &quot; + cypher(word));\n        System.out.println(&quot;Decyphered text: &quot; + decypher(cypher(word)));\n        \n    }\n    \n    public static String cypher(String plaintext) {\n\n        \n        String CT = &quot;&quot;;\n        for (int i = 0; i &lt; plaintext.length(); i++) {\n            char x = plaintext.charAt(i);\n            int val = (char)x-97;\n            int C = ((a* val + b)%26);\n            char n = (char) (C + 97);\n            CT = CT + n;\n            \n        }\n        return CT;\n        \n        \n    }\n    \n    public static int inv (int a, int b) {\n        a=a%b;\n        for (int x = 1; x&lt;26; x++) {\n            if ((a*x)%26==1) {\n                return x;\n            }\n        }\n        return 1;\n    }\n    \n    public static String decypher(String cyphertext) {\n        String t = &quot;&quot;;\n\n        for (int i = 0; i&lt;cyphertext.length(); i++) {\n            char x = cyphertext.charAt(i);\n            int val = (char)x - 97;\n            int D = ((inv(a, 26)*(val-b))%26);\n            char n = (char)(D + 97);\n            t = t + n;\n                    \n        }return t;\n    }\n\n}\n</code></pre>\n<p>The cyphered text shows the desired output but the deciphered text doesn't match the original text.</p>\n<p>Here is my console input and output:</p>\n<pre><code>Enter key(a,b):\n7\n2\nEnter String: hello\nCyphered text: zebbw\nDecyphered text: heRRo\n</code></pre>\n<p><img src=\"https://i.stack.imgur.com/ldJnr.png\" alt=\"enter image description here\" /></p>\n<p>I was expecting the deciphered text to match the original text since that is what it was supposed to do.</p>\n"},{"tags":["java","junit5","testcontainers"],"answers":[{"tags":[],"owner":{"account_id":1460128,"reputation":10123,"user_id":1374678,"accept_rate":93,"display_name":"rolve"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675357756,"creation_date":1675357412,"answer_id":75326573,"question_id":75326388,"body_markdown":"Yes, you can extend the `GenericContainer` class. By overriding methods like `containerIsStarted` or adding your own methods, you can customize the container&#39;s behavior.\r\n\r\nHave a look at how these modules are implemented, e.g., [the MongoDB one][1]. It overrides `containerIsStarted` to initialize a replica set:\r\n\r\n    @Override\r\n    protected void containerIsStarted(InspectContainerResponse containerInfo, boolean reused) {\r\n        if (reused &amp;&amp; isReplicationSetAlreadyInitialized()) {\r\n            log.debug(&quot;Replica set already initialized.&quot;);\r\n        } else {\r\n            initReplicaSet();\r\n        }\r\n    }\r\n\r\n\r\n\r\n  [1]: https://github.com/testcontainers/testcontainers-java/blob/main/modules/mongodb/src/main/java/org/testcontainers/containers/MongoDBContainer.java","title":"Create custom testcontainer modules?","body":"<p>Yes, you can extend the <code>GenericContainer</code> class. By overriding methods like <code>containerIsStarted</code> or adding your own methods, you can customize the container's behavior.</p>\n<p>Have a look at how these modules are implemented, e.g., <a href=\"https://github.com/testcontainers/testcontainers-java/blob/main/modules/mongodb/src/main/java/org/testcontainers/containers/MongoDBContainer.java\" rel=\"nofollow noreferrer\">the MongoDB one</a>. It overrides <code>containerIsStarted</code> to initialize a replica set:</p>\n<pre><code>@Override\nprotected void containerIsStarted(InspectContainerResponse containerInfo, boolean reused) {\n    if (reused &amp;&amp; isReplicationSetAlreadyInitialized()) {\n        log.debug(&quot;Replica set already initialized.&quot;);\n    } else {\n        initReplicaSet();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1203915,"reputation":10209,"user_id":1174024,"accept_rate":85,"display_name":"Nicholas DiPiazza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":146,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75326573,"answer_count":1,"score":1,"last_activity_date":1675440379,"creation_date":1675356490,"question_id":75326388,"body_markdown":"I am using JUnit5 + Testcontainers.\r\n\r\nI see there are Testcontainer modules such as these: https://github.com/testcontainers/testcontainers-java/tree/main/modules\r\n\r\nI would like to build my own Testcontainers custom module.\r\n\r\nIs there a way for developers to build their own?","title":"Create custom testcontainer modules?","body":"<p>I am using JUnit5 + Testcontainers.</p>\n<p>I see there are Testcontainer modules such as these: <a href=\"https://github.com/testcontainers/testcontainers-java/tree/main/modules\" rel=\"nofollow noreferrer\">https://github.com/testcontainers/testcontainers-java/tree/main/modules</a></p>\n<p>I would like to build my own Testcontainers custom module.</p>\n<p>Is there a way for developers to build their own?</p>\n"},{"tags":["java","itext","itext7"],"comments":[{"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"score":0,"creation_date":1675504046,"post_id":75338218,"comment_id":132946226,"body_markdown":"don&#39;t post images with code","body":"don&#39;t post images with code"}],"owner":{"account_id":27696109,"reputation":1,"user_id":21141804,"display_name":"Faustino Rojas Arellano"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675440115,"creation_date":1675440115,"question_id":75338218,"body_markdown":"is posible create this type of table?\r\n\r\nI&#180;m using itext 7 in java\r\n\r\n[enter image description here](https://i.stack.imgur.com/aZthX.png)\r\n\r\n\r\n\r\nI have this in my code\r\n\r\n[enter image description here](https://i.stack.imgur.com/eLTW3.png)\r\n\r\n[enter image description here](https://i.stack.imgur.com/HwGZy.png)","title":"Create custom table with header Itext 7","body":"<p>is posible create this type of table?</p>\n<p>I´m using itext 7 in java</p>\n<p><a href=\"https://i.stack.imgur.com/aZthX.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I have this in my code</p>\n<p><a href=\"https://i.stack.imgur.com/eLTW3.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p><a href=\"https://i.stack.imgur.com/HwGZy.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","nullpointerexception"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1675433833,"post_id":75336881,"comment_id":132933820,"body_markdown":"then check where it is thrown originally. a NullPointerException only has one possible origin: an action taken on a not instantiated instance of a class","body":"then check where it is thrown originally. a NullPointerException only has one possible origin: an action taken on a not instantiated instance of a class"},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":3,"creation_date":1675434174,"post_id":75336881,"comment_id":132933935,"body_markdown":"The exception happens somewhere within `ChMarginHeaderP.createCopy()`, but the sources of that are not available to the debugger, so it cannot give more details.","body":"The exception happens somewhere within <code>ChMarginHeaderP.createCopy()</code>, but the sources of that are not available to the debugger, so it cannot give more details."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1675434282,"post_id":75336881,"comment_id":132933967,"body_markdown":"It is entirely possible that `ChMarginHeaderP.createCopy` itself has a line `throw new NullPointerException()`.","body":"It is entirely possible that <code>ChMarginHeaderP.createCopy</code> itself has a line <code>throw new NullPointerException()</code>."},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":0,"creation_date":1675434788,"post_id":75336881,"comment_id":132934145,"body_markdown":"Out of curiosity, what library is `at com.clh.model.margin.table.classes.ChMarginHeaderP` from? I can&#39;t find anything about it, and the domain seems to be for sale...","body":"Out of curiosity, what library is <code>at com.clh.model.margin.table.classes.ChMarginHeaderP</code> from? I can&#39;t find anything about it, and the domain seems to be for sale..."},{"owner":{"account_id":21241583,"reputation":151,"user_id":15624965,"display_name":"Daniele Scalco"},"score":0,"creation_date":1675436469,"post_id":75336881,"comment_id":132934690,"body_markdown":"That library is of my company","body":"That library is of my company"},{"owner":{"account_id":21241583,"reputation":151,"user_id":15624965,"display_name":"Daniele Scalco"},"score":0,"creation_date":1675436791,"post_id":75336881,"comment_id":132934788,"body_markdown":"Why the source should not be available to the debugger?","body":"Why the source should not be available to the debugger?"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1675434297,"creation_date":1675434297,"answer_id":75337058,"question_id":75336881,"body_markdown":"The first line of the stack trace is where the NPE is actually thrown. As you can see, it is __not__ on the line you highlighted - that is where you call `createCopy()`, and that works fine (because `defaultChMarginHeaderP` is not null, as your debugger correctly tells you). It&#39;s some code _inside_ the `createCopy()` call that is either explicitly throwing the exception (literally, `throw new NullPointerException()` is in that method and is being executed), or, some code in there that dereferences a null pointer. Usually something like `foo.methodCall()` where `foo` is `null`. What is that code? Dunno - you are running ChMarginHeaderP as a class file (not as a source file), and the class file does not have debug info, hence, unknown line number and all that.\r\n\r\nDebugging this without such debug info means you have to read docs and toy around, figure out &#39;in the dark&#39; what precondition requirement of the createCopy method you are violating.\r\n\r\nNormally you have this info, which gives you a line number, that you can crosscheck with the source of ChMarginHeaderP and then you&#39;ll know much faster.\r\n","title":"NullPointerException on not null object","body":"<p>The first line of the stack trace is where the NPE is actually thrown. As you can see, it is <strong>not</strong> on the line you highlighted - that is where you call <code>createCopy()</code>, and that works fine (because <code>defaultChMarginHeaderP</code> is not null, as your debugger correctly tells you). It's some code <em>inside</em> the <code>createCopy()</code> call that is either explicitly throwing the exception (literally, <code>throw new NullPointerException()</code> is in that method and is being executed), or, some code in there that dereferences a null pointer. Usually something like <code>foo.methodCall()</code> where <code>foo</code> is <code>null</code>. What is that code? Dunno - you are running ChMarginHeaderP as a class file (not as a source file), and the class file does not have debug info, hence, unknown line number and all that.</p>\n<p>Debugging this without such debug info means you have to read docs and toy around, figure out 'in the dark' what precondition requirement of the createCopy method you are violating.</p>\n<p>Normally you have this info, which gives you a line number, that you can crosscheck with the source of ChMarginHeaderP and then you'll know much faster.</p>\n"}],"owner":{"account_id":21241583,"reputation":151,"user_id":15624965,"display_name":"Daniele Scalco"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675440110,"creation_date":1675433438,"question_id":75336881,"body_markdown":"I have a strange problem: I&#39;m debugging my application and I have this NullPointerException, but the object is not null.\r\n\r\n```\r\njava.lang.NullPointerException\r\n\tat com.clh.model.margin.table.classes.ChMarginHeaderP.createCopy(Unknown Source)\r\n\tat com.clh.controller.builders.EccFirstCallBean.buildDefaultComponent(EccFirstCallBean.java:710)\r\n\tat com.clh.controller.builders.EccFirstCallBean.buildFirstCall(EccFirstCallBean.java:549)\r\n\tat com.clh.controller.builders.EccFirstCallBean.buildMargin(EccFirstCallBean.java:403)\r\n\tat com.clh.controller.builders.EccFirstCallBean.elabThirdLevel(EccFirstCallBean.java:268)\r\n\tat com.clh.controller.builders.EccFirstCallBeanTest.elabThirdLevelTest(EccFirstCallBeanTest.java:529)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:606)\r\n\tat org.junit.internal.runners.TestMethod.invoke(TestMethod.java:68)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:326)\r\n\tat org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:89)\r\n\tat org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:97)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.executeTest(PowerMockJUnit44RunnerDelegateImpl.java:310)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTestInSuper(PowerMockJUnit47RunnerDelegateImpl.java:131)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.access$100(PowerMockJUnit47RunnerDelegateImpl.java:59)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner$TestExecutorStatement.evaluate(PowerMockJUnit47RunnerDelegateImpl.java:147)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.evaluateStatement(PowerMockJUnit47RunnerDelegateImpl.java:107)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTest(PowerMockJUnit47RunnerDelegateImpl.java:82)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runBeforesThenTestThenAfters(PowerMockJUnit44RunnerDelegateImpl.java:298)\r\n\tat org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:87)\r\n\tat org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:50)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:218)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:160)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:134)\r\n\tat org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)\r\n\tat org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:136)\r\n\tat org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:117)\r\n\tat org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:57)\r\n\tat org.powermock.modules.junit4.PowerMockRunner.run(PowerMockRunner.java:59)\r\n\tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)\r\n\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:542)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:770)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:464)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\r\n```\r\n\r\nThat&#39;s what is just before I press F5 to step into and getting the exception:\r\n[![Variable status before Exception][1]][1]\r\n\r\nThis is the createCopyMethod:\r\n\r\n```\r\npublic ChMarginHeaderP createCopy() {\r\n\t\tfinal ChMarginHeaderP copyChMarginHeaderP = new ChMarginHeaderP(\r\n\t\t\t\tnew ChMarginHeaderPPK(1), this.flgLock,this.flgIsLive, \r\n\t\t\t\tthis.referenceDate, this.userDescription,\r\n\t\t\t\tthis.chCounterpartyPk,\r\n\t\t\t\tthis.chCurrencyPk, this.chTypePk,\r\n\t\t\t\tthis.chPortfolioPk, this.chProductsPk, this.chEntitiesPk,\r\n\t\t\t\tthis.chStatusTradePk, this.chTypeCalledPk,this.segment, this.class_, this.section, this.division);\r\n\r\n\t\treturn copyChMarginHeaderP;\r\n\t}\r\n```\r\n\r\nThe .super() method belongs to the Object class\r\n```\r\npublic ChMarginHeaderP(final ChMarginHeaderPPK id, final boolean flgLock,\r\n\t\t\tfinal boolean flgLive, final Date referenceDate,\r\n\t\t\tfinal String userDescription, final String chCounterpartiesPk,\r\n\t\t\tfinal String chCurrenciesPk, final String chTypePk,\r\n\t\t\tfinal String chPortfolioPk, final String chProductsPk,\r\n\t\t\tfinal String chEntitiesPk, final String chStatusMargin,\r\n\t\t\tfinal String chTypeCalledPk, final String segment, \r\n\t\t\tfinal String class_, final String section, final String division) {\r\n\t\tsuper();\r\n\t\tthis.id = id;\r\n\t\tthis.flgLock = flgLock;\r\n\t\tthis.flgIsLive = flgLive;\r\n\t\tthis.referenceDate = referenceDate;\r\n\t\tthis.userDescription = userDescription;\r\n\t\tthis.chCounterpartyPk= chCounterpartiesPk;\r\n\t\tthis.chCurrencyPk = chCurrenciesPk;\r\n\t\tthis.chTypePk = chTypePk;\r\n\t\tthis.chPortfolioPk = chPortfolioPk;\r\n\t\tthis.chProductsPk = chProductsPk;\r\n\t\tthis.chEntitiesPk = chEntitiesPk;\r\n\t\tthis.chStatusTradePk = chStatusMargin;\r\n\t\tthis.chTypeCalledPk = chTypeCalledPk;\r\n\t\tthis.segment = segment;\r\n\t\tthis.class_ = class_;\r\n\t\tthis.section = section; \r\n\t\tthis.division = division;\r\n\t}\r\n```\r\n\r\nWhy my debugger can&#39;t see the source code of the method? Which are the possible causes? &quot;Add line number attribute...&quot; is checked in Compiler options in Preferences. I&#39;va also tried to remove all breakpoints, project clean, uncheck and then check the box but I can&#39;t.\r\n\r\n  [1]: https://i.stack.imgur.com/JRBVi.png","title":"NullPointerException on not null object","body":"<p>I have a strange problem: I'm debugging my application and I have this NullPointerException, but the object is not null.</p>\n<pre><code>java.lang.NullPointerException\n    at com.clh.model.margin.table.classes.ChMarginHeaderP.createCopy(Unknown Source)\n    at com.clh.controller.builders.EccFirstCallBean.buildDefaultComponent(EccFirstCallBean.java:710)\n    at com.clh.controller.builders.EccFirstCallBean.buildFirstCall(EccFirstCallBean.java:549)\n    at com.clh.controller.builders.EccFirstCallBean.buildMargin(EccFirstCallBean.java:403)\n    at com.clh.controller.builders.EccFirstCallBean.elabThirdLevel(EccFirstCallBean.java:268)\n    at com.clh.controller.builders.EccFirstCallBeanTest.elabThirdLevelTest(EccFirstCallBeanTest.java:529)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:606)\n    at org.junit.internal.runners.TestMethod.invoke(TestMethod.java:68)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:326)\n    at org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:89)\n    at org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:97)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.executeTest(PowerMockJUnit44RunnerDelegateImpl.java:310)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTestInSuper(PowerMockJUnit47RunnerDelegateImpl.java:131)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.access$100(PowerMockJUnit47RunnerDelegateImpl.java:59)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner$TestExecutorStatement.evaluate(PowerMockJUnit47RunnerDelegateImpl.java:147)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.evaluateStatement(PowerMockJUnit47RunnerDelegateImpl.java:107)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTest(PowerMockJUnit47RunnerDelegateImpl.java:82)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runBeforesThenTestThenAfters(PowerMockJUnit44RunnerDelegateImpl.java:298)\n    at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:87)\n    at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:50)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:218)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:160)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:134)\n    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)\n    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:136)\n    at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:117)\n    at org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:57)\n    at org.powermock.modules.junit4.PowerMockRunner.run(PowerMockRunner.java:59)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:542)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:770)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:464)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\n</code></pre>\n<p>That's what is just before I press F5 to step into and getting the exception:\n<a href=\"https://i.stack.imgur.com/JRBVi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JRBVi.png\" alt=\"Variable status before Exception\" /></a></p>\n<p>This is the createCopyMethod:</p>\n<pre><code>public ChMarginHeaderP createCopy() {\n        final ChMarginHeaderP copyChMarginHeaderP = new ChMarginHeaderP(\n                new ChMarginHeaderPPK(1), this.flgLock,this.flgIsLive, \n                this.referenceDate, this.userDescription,\n                this.chCounterpartyPk,\n                this.chCurrencyPk, this.chTypePk,\n                this.chPortfolioPk, this.chProductsPk, this.chEntitiesPk,\n                this.chStatusTradePk, this.chTypeCalledPk,this.segment, this.class_, this.section, this.division);\n\n        return copyChMarginHeaderP;\n    }\n</code></pre>\n<p>The .super() method belongs to the Object class</p>\n<pre><code>public ChMarginHeaderP(final ChMarginHeaderPPK id, final boolean flgLock,\n            final boolean flgLive, final Date referenceDate,\n            final String userDescription, final String chCounterpartiesPk,\n            final String chCurrenciesPk, final String chTypePk,\n            final String chPortfolioPk, final String chProductsPk,\n            final String chEntitiesPk, final String chStatusMargin,\n            final String chTypeCalledPk, final String segment, \n            final String class_, final String section, final String division) {\n        super();\n        this.id = id;\n        this.flgLock = flgLock;\n        this.flgIsLive = flgLive;\n        this.referenceDate = referenceDate;\n        this.userDescription = userDescription;\n        this.chCounterpartyPk= chCounterpartiesPk;\n        this.chCurrencyPk = chCurrenciesPk;\n        this.chTypePk = chTypePk;\n        this.chPortfolioPk = chPortfolioPk;\n        this.chProductsPk = chProductsPk;\n        this.chEntitiesPk = chEntitiesPk;\n        this.chStatusTradePk = chStatusMargin;\n        this.chTypeCalledPk = chTypeCalledPk;\n        this.segment = segment;\n        this.class_ = class_;\n        this.section = section; \n        this.division = division;\n    }\n</code></pre>\n<p>Why my debugger can't see the source code of the method? Which are the possible causes? &quot;Add line number attribute...&quot; is checked in Compiler options in Preferences. I'va also tried to remove all breakpoints, project clean, uncheck and then check the box but I can't.</p>\n"},{"tags":["java","apache-kafka","apache-flink"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1675350412,"post_id":75323626,"comment_id":132913928,"body_markdown":"Please show AllDataDeserializationSchema class","body":"Please show AllDataDeserializationSchema class"}],"answers":[{"comments":[{"owner":{"account_id":7935210,"reputation":21,"user_id":5991506,"display_name":"Abhinav"},"score":0,"creation_date":1675345850,"post_id":75323797,"comment_id":132912148,"body_markdown":"In my actual code, I am not using the JSONKeyValueDeserializationSchema since, I need to watermark based on a timestamp field from the messages.","body":"In my actual code, I am not using the JSONKeyValueDeserializationSchema since, I need to watermark based on a timestamp field from the messages."},{"owner":{"account_id":7935210,"reputation":21,"user_id":5991506,"display_name":"Abhinav"},"score":0,"creation_date":1675345957,"post_id":75323797,"comment_id":132912187,"body_markdown":"Hence using this: \n\nKafkaSource&lt;AllDataPOJO&gt; kafkaAllAlertsSource = KafkaSource.&lt;AllDataPOJO&gt;builder()\n                .setBootstrapServers(bootstrapServers)\n                .setTopics(Arrays.asList(&quot;topic_a&quot;))\n                .setProperties(properties)\n                .setGroupId(allEventsGroupID)\n                .setStartingOffsets(OffsetsInitializer.earliest())\n                .setValueOnlyDeserializer(new AllDataDeserializationSchema())\n                .build();\nBut AllData POJO has just 2 fields name and age... Messages from kafka can have other fields as specified above.","body":"Hence using this:   KafkaSource&lt;AllDataPOJO&gt; kafkaAllAlertsSource = KafkaSource.&lt;AllDataPOJO&gt;builder()                 .setBootstrapServers(bootstrapServers)                 .setTopics(Arrays.asList(&quot;topic_a&quot;))                 .setProperties(properties)                 .setGroupId(allEventsGroupID)                 .setStartingOffsets(OffsetsInitializer.earliest())                 .setValueOnlyDeserializer(new AllDataDeserializationSchema())                 .build(); But AllData POJO has just 2 fields name and age... Messages from kafka can have other fields as specified above."}],"tags":[],"owner":{"account_id":93136,"reputation":3176,"user_id":254934,"accept_rate":63,"display_name":"BenoitParis"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675344004,"creation_date":1675344004,"answer_id":75323797,"question_id":75323626,"body_markdown":"You might be interested in specifying your Deserialization Schema as:\r\n\r\n    .setDeserializer(KafkaRecordDeserializationSchema.of(new JSONKeyValueDeserializationSchema(false)))\r\n            \r\nThen you would then map and filter that source with, validating which fields are present:\r\n\r\n    Key fields can be accessed by calling objectNode.get(&quot;key&quot;).get(&lt;name&gt;).as(&lt;type&gt;)\r\n\r\n    Value fields can be accessed by calling objectNode.get(&quot;value&quot;).get(&lt;name&gt;).as(&lt;type&gt;)\r\n\r\nOr cast the objects to existing POJOs inside your map.","title":"Flink using multiple structures of data in java","body":"<p>You might be interested in specifying your Deserialization Schema as:</p>\n<pre><code>.setDeserializer(KafkaRecordDeserializationSchema.of(new JSONKeyValueDeserializationSchema(false)))\n        \n</code></pre>\n<p>Then you would then map and filter that source with, validating which fields are present:</p>\n<pre><code>Key fields can be accessed by calling objectNode.get(&quot;key&quot;).get(&lt;name&gt;).as(&lt;type&gt;)\n\nValue fields can be accessed by calling objectNode.get(&quot;value&quot;).get(&lt;name&gt;).as(&lt;type&gt;)\n</code></pre>\n<p>Or cast the objects to existing POJOs inside your map.</p>\n"},{"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675350673,"creation_date":1675350673,"answer_id":75325178,"question_id":75323626,"body_markdown":"You cannot use `&lt;AllDataPOJO&gt;` if you have other POJO classes with other fields.\r\n\r\nOr, you need to add all fields from all POJO types, and make them nullable when they don&#39;t exist in your data. But that may be error prone as name and pin could potentially exist in the same record, for example, but shouldn&#39;t. \r\n\r\nOtherwise, as the other answer says, use a more generic String/JSON deserializer, and then you can use filter/map operations to cast your data into more concrete types, depending on the fields that are available ","title":"Flink using multiple structures of data in java","body":"<p>You cannot use <code>&lt;AllDataPOJO&gt;</code> if you have other POJO classes with other fields.</p>\n<p>Or, you need to add all fields from all POJO types, and make them nullable when they don't exist in your data. But that may be error prone as name and pin could potentially exist in the same record, for example, but shouldn't.</p>\n<p>Otherwise, as the other answer says, use a more generic String/JSON deserializer, and then you can use filter/map operations to cast your data into more concrete types, depending on the fields that are available</p>\n"},{"tags":[],"owner":{"account_id":82425,"reputation":8280,"user_id":231762,"display_name":"kkrugler"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675440080,"creation_date":1675440080,"answer_id":75338207,"question_id":75323626,"body_markdown":"In situations like this I normally use the SimpleStringSchema, then follow the source with a ProcessFunction where I parse the string, and use side outputs (one per each message type). The added benefit to this approach is that if the JSON isn&#39;t deserializable, or it doesn&#39;t properly map to any of the target types, you have the opportunity to flexibly handle the error (e.g. send out to an error sink).","title":"Flink using multiple structures of data in java","body":"<p>In situations like this I normally use the SimpleStringSchema, then follow the source with a ProcessFunction where I parse the string, and use side outputs (one per each message type). The added benefit to this approach is that if the JSON isn't deserializable, or it doesn't properly map to any of the target types, you have the opportunity to flexibly handle the error (e.g. send out to an error sink).</p>\n"}],"owner":{"account_id":7935210,"reputation":21,"user_id":5991506,"display_name":"Abhinav"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":215,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1675440080,"creation_date":1675343138,"question_id":75323626,"body_markdown":"I am reading data from kafka in Java to perform some processing in Apache Flink and sink the results.\r\n\r\nI have the kafka topic **topic_a** which has some data like {name: &quot;abc&quot;, age: 20} and some data like {pin: 111, number: 999999, address: &quot;some place&quot;}\r\n\r\nWhen I read the data from kafka using KafkaSource, I deserialize the records into a POJO which has the fields String name, int age with their respective getter and setter functions and constructor.\r\n\r\nWhen I run the flink code, the deserliazer works fine for {name: &quot;abc&quot;, age: 20}\r\n```\r\nKafkaSource&lt;AllDataPOJO&gt; kafkaAllAlertsSource = KafkaSource.&lt;AllAlertsPOJO&gt;builder()\r\n                .setBootstrapServers(bootstrapServers)\r\n                .setTopics(Arrays.asList(&quot;topic_a&quot;))\r\n                .setProperties(properties)\r\n                .setGroupId(allEventsGroupID)\r\n                .setStartingOffsets(OffsetsInitializer.earliest())\r\n                .setValueOnlyDeserializer(new AllDataDeserializationSchema())\r\n                .build();\r\n```\r\n```\r\nAllDataPOJO\r\nprivate String name;\r\nprivate int age;\r\n```\r\n\r\nThe code runs fine for **{name: &quot;abc&quot;, age: 20}**, but as soon as **{pin: 111, number: 999999, address: &quot;some place&quot;}**, it starts failing. \r\n\r\n**2 questions:**\r\n\r\n1. Is there any way that I can read such varying formats of messages and perform the flink operations. Depending on what kind of message comes, I wish to route it to a different kafka topic.?\r\n2. When I get **{name: &quot;abc&quot;, age: 20}**, it should go to topic **user_basic** and **{pin: 111, number: 999999, address: &quot;some place&quot;}** should go to topic ** user_details**\r\n\r\nHow can I achieve the above with just 1 flink java code?\r\n","title":"Flink using multiple structures of data in java","body":"<p>I am reading data from kafka in Java to perform some processing in Apache Flink and sink the results.</p>\n<p>I have the kafka topic <strong>topic_a</strong> which has some data like {name: &quot;abc&quot;, age: 20} and some data like {pin: 111, number: 999999, address: &quot;some place&quot;}</p>\n<p>When I read the data from kafka using KafkaSource, I deserialize the records into a POJO which has the fields String name, int age with their respective getter and setter functions and constructor.</p>\n<p>When I run the flink code, the deserliazer works fine for {name: &quot;abc&quot;, age: 20}</p>\n<pre><code>KafkaSource&lt;AllDataPOJO&gt; kafkaAllAlertsSource = KafkaSource.&lt;AllAlertsPOJO&gt;builder()\n                .setBootstrapServers(bootstrapServers)\n                .setTopics(Arrays.asList(&quot;topic_a&quot;))\n                .setProperties(properties)\n                .setGroupId(allEventsGroupID)\n                .setStartingOffsets(OffsetsInitializer.earliest())\n                .setValueOnlyDeserializer(new AllDataDeserializationSchema())\n                .build();\n</code></pre>\n<pre><code>AllDataPOJO\nprivate String name;\nprivate int age;\n</code></pre>\n<p>The code runs fine for <strong>{name: &quot;abc&quot;, age: 20}</strong>, but as soon as <strong>{pin: 111, number: 999999, address: &quot;some place&quot;}</strong>, it starts failing.</p>\n<p><strong>2 questions:</strong></p>\n<ol>\n<li>Is there any way that I can read such varying formats of messages and perform the flink operations. Depending on what kind of message comes, I wish to route it to a different kafka topic.?</li>\n<li>When I get <strong>{name: &quot;abc&quot;, age: 20}</strong>, it should go to topic <strong>user_basic</strong> and <strong>{pin: 111, number: 999999, address: &quot;some place&quot;}</strong> should go to topic ** user_details**</li>\n</ol>\n<p>How can I achieve the above with just 1 flink java code?</p>\n"},{"tags":["java","spring","spring-boot","repository","entity"],"comments":[{"owner":{"account_id":12473930,"reputation":338,"user_id":15491774,"display_name":"stylepatrick"},"score":0,"creation_date":1675437228,"post_id":75337506,"comment_id":132934930,"body_markdown":"The @Repository Annotation is not necessary on your EmployeeRepository. This will be managed automatically because you extend the CrudRepository.","body":"The @Repository Annotation is not necessary on your EmployeeRepository. This will be managed automatically because you extend the CrudRepository."},{"owner":{"account_id":26889406,"reputation":35,"user_id":20468426,"display_name":"Bhorah"},"score":0,"creation_date":1675437717,"post_id":75337506,"comment_id":132935096,"body_markdown":"Good to know, thank you ! However it does not solve the problem :(","body":"Good to know, thank you ! However it does not solve the problem :("},{"owner":{"account_id":12473930,"reputation":338,"user_id":15491774,"display_name":"stylepatrick"},"score":0,"creation_date":1675437902,"post_id":75337506,"comment_id":132935166,"body_markdown":"Have you tried to remove the @EntityScan? I would also try to remove the two hibernate dependency in your pom.","body":"Have you tried to remove the @EntityScan? I would also try to remove the two hibernate dependency in your pom."},{"owner":{"account_id":12473930,"reputation":338,"user_id":15491774,"display_name":"stylepatrick"},"score":0,"creation_date":1675438226,"post_id":75337506,"comment_id":132935308,"body_markdown":"I would also add following properties to you applicatipn.properties to tell spring boot your datasource: spring.datasource.url=jdbc:h2:mem:testdb\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=","body":"I would also add following properties to you applicatipn.properties to tell spring boot your datasource: spring.datasource.url=jdbc:h2:mem:testdb spring.datasource.driverClassName=org.h2.Driver spring.datasource.username=sa spring.datasource.password="}],"answers":[{"comments":[{"owner":{"account_id":26889406,"reputation":35,"user_id":20468426,"display_name":"Bhorah"},"score":0,"creation_date":1675443871,"post_id":75338201,"comment_id":132937280,"body_markdown":"Thank you sooo much, this solved everything ! I was following a tutorial on Spring 2.idkwhatversion, which did use javax, and i didn&#39;t know it changed since !","body":"Thank you sooo much, this solved everything ! I was following a tutorial on Spring 2.idkwhatversion, which did use javax, and i didn&#39;t know it changed since !"}],"tags":[],"owner":{"account_id":22866153,"reputation":158,"user_id":17009760,"display_name":"Pioter88"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1675440073,"creation_date":1675440073,"answer_id":75338201,"question_id":75337506,"body_markdown":"when using spring jpa dependency you dont need hibernate alone\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0.0.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n            &lt;version&gt;6.1.5.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nYour imports in Employee come from \r\n```\r\njavax.persistence\r\n\r\nimport javax.persistence.Column;\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.GenerationType;\r\nimport javax.persistence.Id;\r\nimport javax.persistence.Table;\r\n```\r\n\r\nchange it for \r\n```\r\nimport jakarta.persistence.*;\r\n```\r\n\r\nplease see  \r\n[javax vs jakarta in Spring](https://stackoverflow.com/questions/71179660/spring-boot-3-jakarta-and-javax)\r\n\r\nalso ``@EntityScan(&quot;com.openclassrooms.api.models&quot;)`` is unnecessary  \r\n\r\n","title":"BeanCreationException error creating Repository with Spring Boot - &quot;Not a managed type&quot; error","body":"<p>when using spring jpa dependency you dont need hibernate alone</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;6.1.5.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>Your imports in Employee come from</p>\n<pre><code>javax.persistence\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n</code></pre>\n<p>change it for</p>\n<pre><code>import jakarta.persistence.*;\n</code></pre>\n<p>please see<br />\n<a href=\"https://stackoverflow.com/questions/71179660/spring-boot-3-jakarta-and-javax\">javax vs jakarta in Spring</a></p>\n<p>also <code>@EntityScan(&quot;com.openclassrooms.api.models&quot;)</code> is unnecessary</p>\n"}],"owner":{"account_id":26889406,"reputation":35,"user_id":20468426,"display_name":"Bhorah"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2209,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75338201,"answer_count":1,"score":1,"last_activity_date":1675440073,"creation_date":1675436579,"question_id":75337506,"body_markdown":"I am trying to learn Spring and most particularly Spring Boot, and I have made a set of classes, starting with a main, a model class and a repository class. However, when I try to start the main app, Spring does not boot and throws the following error :\r\n\r\n```\r\n\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::                (v3.0.2)\r\n\r\n2023-02-03T15:45:58.473+01:00  INFO 28388 --- [           main] com.openclassrooms.api.ApiApplication    : Starting ApiApplication using Java 17.0.5 with PID 28388 (C:\\Users\\Bastien ROY\\OneDrive\\Projet Transversal\\api\\target\\classes started by Bastien ROY in C:\\Users\\Bastien ROY\\OneDrive\\Projet Transversal\\api)\r\n2023-02-03T15:45:58.477+01:00  INFO 28388 --- [           main] com.openclassrooms.api.ApiApplication    : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-02-03T15:45:59.506+01:00  INFO 28388 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9000 (http)\r\n2023-02-03T15:45:59.813+01:00  INFO 28388 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at &#39;/h2-console&#39;. Database available at &#39;jdbc:h2:mem:bca07d4f-a527-494b-9b3f-460ee65f30e9&#39;\r\n2023-02-03T15:46:01.019+01:00 ERROR 28388 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;employeeRepository&#39; defined in com.openclassrooms.api.repository.EmployeeRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Not a managed type: class com.openclassrooms.api.models.Employee\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751) ~[spring-beans-6.0.4.jar:6.0.4]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.0.4.jar:6.0.4]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521) ~[spring-beans-6.0.4.jar:6.0.4]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.4.jar:6.0.4]\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.4.jar:6.0.4]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.4.jar:6.0.4]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.4.jar:6.0.4]\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-6.0.4.jar:6.0.4]\r\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:915) ~[spring-context-6.0.4.jar:6.0.4]\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[spring-context-6.0.4.jar:6.0.4]\r\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.0.2.jar:3.0.2]\r\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[spring-boot-3.0.2.jar:3.0.2]\r\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432) ~[spring-boot-3.0.2.jar:3.0.2]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-3.0.2.jar:3.0.2]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-3.0.2.jar:3.0.2]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[spring-boot-3.0.2.jar:3.0.2]\r\n        at com.openclassrooms.api.ApiApplication.main(ApiApplication.java:12) ~[classes/:na]\r\nCaused by: java.lang.IllegalArgumentException: Not a managed type: class com.openclassrooms.api.models.Employee\r\n        at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.managedType(JpaMetamodelImpl.java:181) ~[hibernate-core-6.1.5.Final.jar:6.1.5.Final]\r\n        at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:496) ~[hibernate-core-6.1.5.Final.jar:6.1.5.Final]\r\n        at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:99) ~[hibernate-core-6.1.5.Final.jar:6.1.5.Final]\r\n        at org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.&lt;init&gt;(JpaMetamodelEntityInformation.java:77) ~[spring-data-jpa-3.0.1.jar:3.0.1]\r\n        at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getEntityInformation(JpaEntityInformationSupport.java:69) ~[spring-data-jpa-3.0.1.jar:3.0.1]\r\n        at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:246) ~[spring-data-jpa-3.0.1.jar:3.0.1]\r\n        at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:211) ~[spring-data-jpa-3.0.1.jar:3.0.1]\r\n        at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:194) ~[spring-data-jpa-3.0.1.jar:3.0.1]\r\n        at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:81) ~[spring-data-jpa-3.0.1.jar:3.0.1]\r\n        at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:317) ~[spring-data-commons-3.0.1.jar:3.0.1]\r\n        at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.0.1.jar:3.0.1]\r\n        at org.springframework.data.util.Lazy.getNullable(Lazy.java:245) ~[spring-data-commons-3.0.1.jar:3.0.1]\r\n        at org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-3.0.1.jar:3.0.1]\r\n        at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.0.1.jar:3.0.1]\r\n        at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.0.1.jar:3.0.1]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797) ~[spring-beans-6.0.4.jar:6.0.4]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747) ~[spring-beans-6.0.4.jar:6.0.4]\r\n        ... 16 common frames omitted\r\n```\r\n\r\nThis bug keeps on appearing, whatever correction I try to make to repair it.\r\n\r\nMy Entity class :\r\n\r\n```\r\npackage com.openclassrooms.api.models;\r\n\r\nimport javax.persistence.Column;\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.GenerationType;\r\nimport javax.persistence.Id;\r\nimport javax.persistence.Table;\r\n\r\nimport lombok.Data;\r\n\r\n@Data\r\n@Entity\r\n@Table(name = &quot;employees&quot;)\r\npublic class Employee {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;first_name&quot;)\r\n    private String firstName;\r\n\r\n    @Column(name = &quot;last_name&quot;)\r\n    private String lastName;\r\n\r\n    private String mail;\r\n\r\n    private String password;\r\n\r\n}\r\n```\r\n\r\nMy repository class :\r\n\r\n```\r\n\r\npackage com.openclassrooms.api.repository;\r\n\r\nimport org.springframework.data.repository.CrudRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\nimport com.openclassrooms.api.models.Employee;\r\n\r\n@Repository\r\npublic interface EmployeeRepository extends CrudRepository&lt;Employee, Long&gt; {\r\n\r\n}\r\n```\r\n\r\nMy main class :\r\n\r\n```\r\npackage com.openclassrooms.api;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.boot.autoconfigure.domain.EntityScan;\r\n\r\n@SpringBootApplication\r\n@EntityScan(&quot;com.openclassrooms.api.models&quot;)\r\npublic class ApiApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(ApiApplication.class, args);\r\n\t\tSystem.out.println(&quot;Hello World !&quot;);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nMy dependencies in pom.xml :\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.openclassrooms&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;api&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;api&lt;/name&gt;\r\n\t&lt;description&gt;API with SpringBoot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.0.0.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n \t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n  \t\t\t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n  \t\t\t&lt;version&gt;6.1.5.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nMy project properties in application.properties :\r\n\r\n```\r\n#Global configuration\r\nspring.application.name=api\r\n\r\n#Tomcat configuration\r\nserver.port=9000\r\n\r\n#Log level configuration\r\nlogging.level.root=ERROR\r\nlogging.level.com.openclassrooms=INFO\r\nlogging.level.org.springframework.boot.autoconfigure.h2=INFO\r\nlogging.level.org.springframework.boot.web.embedded.tomcat=INFO\r\n\r\n#H2 Configuration\r\nspring.h2.console.enabled=true\r\n```\r\n\r\nIf you have any idea of where the problem could come from, I would be extremely thankful.","title":"BeanCreationException error creating Repository with Spring Boot - &quot;Not a managed type&quot; error","body":"<p>I am trying to learn Spring and most particularly Spring Boot, and I have made a set of classes, starting with a main, a model class and a repository class. However, when I try to start the main app, Spring does not boot and throws the following error :</p>\n<pre><code>\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v3.0.2)\n\n2023-02-03T15:45:58.473+01:00  INFO 28388 --- [           main] com.openclassrooms.api.ApiApplication    : Starting ApiApplication using Java 17.0.5 with PID 28388 (C:\\Users\\Bastien ROY\\OneDrive\\Projet Transversal\\api\\target\\classes started by Bastien ROY in C:\\Users\\Bastien ROY\\OneDrive\\Projet Transversal\\api)\n2023-02-03T15:45:58.477+01:00  INFO 28388 --- [           main] com.openclassrooms.api.ApiApplication    : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-02-03T15:45:59.506+01:00  INFO 28388 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9000 (http)\n2023-02-03T15:45:59.813+01:00  INFO 28388 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:bca07d4f-a527-494b-9b3f-460ee65f30e9'\n2023-02-03T15:46:01.019+01:00 ERROR 28388 --- [           main] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'employeeRepository' defined in com.openclassrooms.api.repository.EmployeeRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Not a managed type: class com.openclassrooms.api.models.Employee\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751) ~[spring-beans-6.0.4.jar:6.0.4]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.0.4.jar:6.0.4]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521) ~[spring-beans-6.0.4.jar:6.0.4]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.4.jar:6.0.4]\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.4.jar:6.0.4]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.4.jar:6.0.4]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.4.jar:6.0.4]\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-6.0.4.jar:6.0.4]\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:915) ~[spring-context-6.0.4.jar:6.0.4]\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[spring-context-6.0.4.jar:6.0.4]\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.0.2.jar:3.0.2]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[spring-boot-3.0.2.jar:3.0.2]\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432) ~[spring-boot-3.0.2.jar:3.0.2]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-3.0.2.jar:3.0.2]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-3.0.2.jar:3.0.2]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[spring-boot-3.0.2.jar:3.0.2]\n        at com.openclassrooms.api.ApiApplication.main(ApiApplication.java:12) ~[classes/:na]\nCaused by: java.lang.IllegalArgumentException: Not a managed type: class com.openclassrooms.api.models.Employee\n        at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.managedType(JpaMetamodelImpl.java:181) ~[hibernate-core-6.1.5.Final.jar:6.1.5.Final]\n        at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:496) ~[hibernate-core-6.1.5.Final.jar:6.1.5.Final]\n        at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:99) ~[hibernate-core-6.1.5.Final.jar:6.1.5.Final]\n        at org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.&lt;init&gt;(JpaMetamodelEntityInformation.java:77) ~[spring-data-jpa-3.0.1.jar:3.0.1]\n        at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getEntityInformation(JpaEntityInformationSupport.java:69) ~[spring-data-jpa-3.0.1.jar:3.0.1]\n        at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:246) ~[spring-data-jpa-3.0.1.jar:3.0.1]\n        at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:211) ~[spring-data-jpa-3.0.1.jar:3.0.1]\n        at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:194) ~[spring-data-jpa-3.0.1.jar:3.0.1]\n        at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:81) ~[spring-data-jpa-3.0.1.jar:3.0.1]\n        at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:317) ~[spring-data-commons-3.0.1.jar:3.0.1]\n        at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.0.1.jar:3.0.1]\n        at org.springframework.data.util.Lazy.getNullable(Lazy.java:245) ~[spring-data-commons-3.0.1.jar:3.0.1]\n        at org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-3.0.1.jar:3.0.1]\n        at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.0.1.jar:3.0.1]\n        at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.0.1.jar:3.0.1]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797) ~[spring-beans-6.0.4.jar:6.0.4]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747) ~[spring-beans-6.0.4.jar:6.0.4]\n        ... 16 common frames omitted\n</code></pre>\n<p>This bug keeps on appearing, whatever correction I try to make to repair it.</p>\n<p>My Entity class :</p>\n<pre><code>package com.openclassrooms.api.models;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\nimport lombok.Data;\n\n@Data\n@Entity\n@Table(name = &quot;employees&quot;)\npublic class Employee {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(name = &quot;first_name&quot;)\n    private String firstName;\n\n    @Column(name = &quot;last_name&quot;)\n    private String lastName;\n\n    private String mail;\n\n    private String password;\n\n}\n</code></pre>\n<p>My repository class :</p>\n<pre><code>\npackage com.openclassrooms.api.repository;\n\nimport org.springframework.data.repository.CrudRepository;\nimport org.springframework.stereotype.Repository;\n\nimport com.openclassrooms.api.models.Employee;\n\n@Repository\npublic interface EmployeeRepository extends CrudRepository&lt;Employee, Long&gt; {\n\n}\n</code></pre>\n<p>My main class :</p>\n<pre><code>package com.openclassrooms.api;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.autoconfigure.domain.EntityScan;\n\n@SpringBootApplication\n@EntityScan(&quot;com.openclassrooms.api.models&quot;)\npublic class ApiApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(ApiApplication.class, args);\n        System.out.println(&quot;Hello World !&quot;);\n    }\n\n}\n</code></pre>\n<p>My dependencies in pom.xml :</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.openclassrooms&lt;/groupId&gt;\n    &lt;artifactId&gt;api&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;api&lt;/name&gt;\n    &lt;description&gt;API with SpringBoot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;6.1.5.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>My project properties in application.properties :</p>\n<pre><code>#Global configuration\nspring.application.name=api\n\n#Tomcat configuration\nserver.port=9000\n\n#Log level configuration\nlogging.level.root=ERROR\nlogging.level.com.openclassrooms=INFO\nlogging.level.org.springframework.boot.autoconfigure.h2=INFO\nlogging.level.org.springframework.boot.web.embedded.tomcat=INFO\n\n#H2 Configuration\nspring.h2.console.enabled=true\n</code></pre>\n<p>If you have any idea of where the problem could come from, I would be extremely thankful.</p>\n"},{"tags":["java","spring-boot","hibernate","jpa","model"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1675452278,"post_id":75338199,"comment_id":132939669,"body_markdown":"Your first attempt is fine, but you mapped the ExperimentDetails instance as an entity and marked externalId as THE unique identifier when it is certainly not unique. Since multiple rows of your query returned the same externalId, JPA returns the same instance for those rows - that is the point of object identity within entities. So you don&#39;t really want a managed entity for this. If you map the underlying tables 1:1 with entity classes, you can easily do something in JPQL","body":"Your first attempt is fine, but you mapped the ExperimentDetails instance as an entity and marked externalId as THE unique identifier when it is certainly not unique. Since multiple rows of your query returned the same externalId, JPA returns the same instance for those rows - that is the point of object identity within entities. So you don&#39;t really want a managed entity for this. If you map the underlying tables 1:1 with entity classes, you can easily do something in JPQL"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1675452331,"post_id":75338199,"comment_id":132939684,"body_markdown":"something like like JPQL query &quot;&quot;Select package.ExperimentDetails(ce.externalId, ce.isid, ji.name.. ) from JurisdictionInfo ji join ji.substance s join s.controlledEvent ce on ce.callingSystemId = 402 AND ce.externalId = :externalId&quot;","body":"something like like JPQL query &quot;&quot;Select package.ExperimentDetails(ce.externalId, ce.isid, ji.name.. ) from JurisdictionInfo ji join ji.substance s join s.controlledEvent ce on ce.callingSystemId = 402 AND ce.externalId = :externalId&quot;"},{"owner":{"account_id":5084578,"reputation":399,"user_id":4079729,"display_name":"Altaf"},"score":0,"creation_date":1675453921,"post_id":75338199,"comment_id":132940024,"body_markdown":"Thanks @Chris. The `externalId` is unique, but `ExperimentDetails` can contain many compounds, so it&#39;s the way my query is written, I was just returning the `externalId` and `ISID`, so I can map it using a `HashMap` and return an API call in my service layer.  If I understand you correctly you&#39;re saying take out `@Embeddable` make `Compound` table an entity class and annotate with `@ONETOMANY` bc each experiment can have more than one compound, and then instead of Native Query use a JPQL query, I am not familiar with JPQL, but I&#39;ll research it. Is that correct?","body":"Thanks @Chris. The <code>externalId</code> is unique, but <code>ExperimentDetails</code> can contain many compounds, so it&#39;s the way my query is written, I was just returning the <code>externalId</code> and <code>ISID</code>, so I can map it using a <code>HashMap</code> and return an API call in my service layer.  If I understand you correctly you&#39;re saying take out <code>@Embeddable</code> make <code>Compound</code> table an entity class and annotate with <code>@ONETOMANY</code> bc each experiment can have more than one compound, and then instead of Native Query use a JPQL query, I am not familiar with JPQL, but I&#39;ll research it. Is that correct?"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1675457872,"post_id":75338199,"comment_id":132940959,"body_markdown":"No, I&#39;ve suggested you make 3 entities, one for each table in your Native SQL query, and map them as they look in the database. JPQL is pretty similar to SQL, the difference being it is more DB agnostic and based on your entity/java objects, not table constructs. It isn&#39;t necessary to be able to build the scalar results from the Native SQL query into a pojo object as I&#39;ve shown in the JPQL query, but it is the easiest  to show and describe - I don&#39;t know how to get Spring to use a Result set mapping but it is possible","body":"No, I&#39;ve suggested you make 3 entities, one for each table in your Native SQL query, and map them as they look in the database. JPQL is pretty similar to SQL, the difference being it is more DB agnostic and based on your entity/java objects, not table constructs. It isn&#39;t necessary to be able to build the scalar results from the Native SQL query into a pojo object as I&#39;ve shown in the JPQL query, but it is the easiest  to show and describe - I don&#39;t know how to get Spring to use a Result set mapping but it is possible"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1675457968,"post_id":75338199,"comment_id":132940983,"body_markdown":"see https://stackoverflow.com/a/13013323/496099 , https://stackoverflow.com/questions/13012584/jpa-how-to-convert-a-native-query-result-set-to-pojo-class-collection and https://thorben-janssen.com/spring-data-jpa-dto-native-queries/","body":"see <a href=\"https://stackoverflow.com/a/13013323/496099\">stackoverflow.com/a/13013323/496099</a> , <a href=\"https://stackoverflow.com/questions/13012584/jpa-how-to-convert-a-native-query-result-set-to-pojo-class-collection\" title=\"jpa how to convert a native query result set to pojo class collection\">stackoverflow.com/questions/13012584/&hellip;</a> and <a href=\"https://thorben-janssen.com/spring-data-jpa-dto-native-queries/\" rel=\"nofollow noreferrer\">thorben-janssen.com/spring-data-jpa-dto-native-queries</a>"},{"owner":{"account_id":5084578,"reputation":399,"user_id":4079729,"display_name":"Altaf"},"score":0,"creation_date":1675490862,"post_id":75338199,"comment_id":132944683,"body_markdown":"used the thorben-janssen article to solve my issue thanks","body":"used the thorben-janssen article to solve my issue thanks"}],"owner":{"account_id":5084578,"reputation":399,"user_id":4079729,"display_name":"Altaf"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675440046,"creation_date":1675440046,"question_id":75338199,"body_markdown":"I have this sql query I am running in my database:\r\n&gt; Select ce.external_id, ce.isid, ji.name, ji.controlled_status, ji.jurisdiction_name, ji.result_comments, ji.code_name, s.corporate_id\r\nfrom cs_jurisdiction_information ji\r\nJoin substance s on ji.substance_id = s.id\r\nJoin controlled_event ce on ce.id = s.controlled_event_id and ce.calling_system_id = 402 \r\nand ce.external_id = &#39;EXP-raoan-000011774&#39;;\r\n\r\n[![Results][1]][1]\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JdNMd.png\r\n\r\nWhich produces the above results.  Everything following the first two fields are compounds that I would like to map to my model, so when I run this query from my repository:\r\n\r\n```\r\npublic interface ExperimentDetailsRepository extends JpaRepository&lt;ExperimentDetails, String&gt; {\r\n\r\n    @Query(value = &quot;Select ce.external_id, ce.isid, ji.name, ji.controlled_status, &quot; +\r\n    &quot;ji.jurisdiction_name, ji.result_comments,&quot; +\r\n    &quot;ji.code_name, s.corporate_id &quot; +\r\n    &quot;from cs_jurisdiction_information ji &quot; +\r\n    &quot;Join substance s on ji.substance_id = s.id &quot; +\r\n    &quot;Join controlled_event ce on ce.id = s.controlled_event_id &quot; +\r\n    &quot;and ce.calling_system_id = 402 &quot; +\r\n    &quot;and ce.external_id = :externalId&quot;, nativeQuery = true)\r\n    List&lt;ExperimentDetails&gt; findByExternalId(@Param(&quot;externalId&quot;) String externalId);\r\n}\r\n```\r\n\r\nI first tried this model:\r\n\r\n```\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Entity\r\npublic class ExperimentDetails {\r\n    @Id\r\n    private String externalId;\r\n    private String isid;\r\n    private String name;\r\n    private String controlledStatus;\r\n    private String jurisdictionName;\r\n    private String resultComments;\r\n    private String codeName;\r\n    private String corporateId;\r\n}\r\n```\r\nCalling `findByExternalId(externalId)` in my service class produces the incorrect results, the method returns 3 objects which is fine, but only maps the first compound Cathine, and duplicates the result for the next two objects, which makes sense because my structure here is flat, when it actually should be an array for anything after `name` attribute.\r\n\r\nSo I tried using `@Embeddable` annotation to modify the model to the correct structure as below:\r\n\r\n```\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Entity\r\npublic class ExperimentDetails {\r\n    @Id\r\n    private String externalId;\r\n    private String isid;\r\n\r\n    @Embedded\r\n    @AttributeOverrides({\r\n        @AttributeOverride(name = &quot;name&quot;, column = @Column(name = &quot;name&quot;)),\r\n        @AttributeOverride(name = &quot;controlledStatus&quot;, column = @Column(name = &quot;controlled_status&quot;)),\r\n        @AttributeOverride(name = &quot;jurisdictionName&quot;, column = @Column(name = &quot;jurisdiction_name&quot;)),\r\n        @AttributeOverride(name = &quot;resultComments&quot;, column = @Column(name = &quot;result_comments&quot;)),\r\n        @AttributeOverride(name = &quot;codeName&quot;, column = @Column(name = &quot;code_name&quot;)),\r\n        @AttributeOverride(name = &quot;corporateId&quot;, column = @Column(name = &quot;corporate_id&quot;)),\r\n    })\r\n    private Compound compounds;\r\n}\r\n```\r\n\r\nand I created the Embeddable class:\r\n\r\n```\r\n@Embeddable\r\n@Data\r\npublic class Compound {\r\n    private String name;\r\n    private String controlledStatus;\r\n    private String jurisdictionName;\r\n    private String resultComments;\r\n    private String codeName;\r\n    private String corporateId;\r\n}\r\n```\r\n\r\nThis duplicates the same error in results as the previous model, which I then realized still doesn&#39;t produce the array of compounds, so I modified the model again:\r\n\r\n```\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Entity\r\npublic class ExperimentDetails {\r\n    @Id\r\n    private String externalId;\r\n    private String isid;\r\n\r\n    @Embedded\r\n    @AttributeOverrides({\r\n        @AttributeOverride(name = &quot;name&quot;, column = @Column(name = &quot;name&quot;)),\r\n        @AttributeOverride(name = &quot;controlledStatus&quot;, column = @Column(name = &quot;controlled_status&quot;)),\r\n        @AttributeOverride(name = &quot;jurisdictionName&quot;, column = @Column(name = &quot;jurisdiction_name&quot;)),\r\n        @AttributeOverride(name = &quot;resultComments&quot;, column = @Column(name = &quot;result_comments&quot;)),\r\n        @AttributeOverride(name = &quot;codeName&quot;, column = @Column(name = &quot;code_name&quot;)),\r\n        @AttributeOverride(name = &quot;corporateId&quot;, column = @Column(name = &quot;corporate_id&quot;)),\r\n    })\r\n    private List&lt;Compound&gt; compounds;\r\n}\r\n```\r\n\r\nThis time making `Compound` a list. However, running `findByExternalId(externalId)` now produces null for the embedded class, so no compounds are actually mapped.\r\n\r\nHow can I map my model correctly to produce the correct results for my query?","title":"How to Map Model correctly to a native query in my repository","body":"<p>I have this sql query I am running in my database:</p>\n<blockquote>\n<p>Select ce.external_id, ce.isid, ji.name, ji.controlled_status, ji.jurisdiction_name, ji.result_comments, ji.code_name, s.corporate_id\nfrom cs_jurisdiction_information ji\nJoin substance s on ji.substance_id = s.id\nJoin controlled_event ce on ce.id = s.controlled_event_id and ce.calling_system_id = 402\nand ce.external_id = 'EXP-raoan-000011774';</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/JdNMd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JdNMd.png\" alt=\"Results\" /></a></p>\n<p>Which produces the above results.  Everything following the first two fields are compounds that I would like to map to my model, so when I run this query from my repository:</p>\n<pre><code>public interface ExperimentDetailsRepository extends JpaRepository&lt;ExperimentDetails, String&gt; {\n\n    @Query(value = &quot;Select ce.external_id, ce.isid, ji.name, ji.controlled_status, &quot; +\n    &quot;ji.jurisdiction_name, ji.result_comments,&quot; +\n    &quot;ji.code_name, s.corporate_id &quot; +\n    &quot;from cs_jurisdiction_information ji &quot; +\n    &quot;Join substance s on ji.substance_id = s.id &quot; +\n    &quot;Join controlled_event ce on ce.id = s.controlled_event_id &quot; +\n    &quot;and ce.calling_system_id = 402 &quot; +\n    &quot;and ce.external_id = :externalId&quot;, nativeQuery = true)\n    List&lt;ExperimentDetails&gt; findByExternalId(@Param(&quot;externalId&quot;) String externalId);\n}\n</code></pre>\n<p>I first tried this model:</p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\npublic class ExperimentDetails {\n    @Id\n    private String externalId;\n    private String isid;\n    private String name;\n    private String controlledStatus;\n    private String jurisdictionName;\n    private String resultComments;\n    private String codeName;\n    private String corporateId;\n}\n</code></pre>\n<p>Calling <code>findByExternalId(externalId)</code> in my service class produces the incorrect results, the method returns 3 objects which is fine, but only maps the first compound Cathine, and duplicates the result for the next two objects, which makes sense because my structure here is flat, when it actually should be an array for anything after <code>name</code> attribute.</p>\n<p>So I tried using <code>@Embeddable</code> annotation to modify the model to the correct structure as below:</p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\npublic class ExperimentDetails {\n    @Id\n    private String externalId;\n    private String isid;\n\n    @Embedded\n    @AttributeOverrides({\n        @AttributeOverride(name = &quot;name&quot;, column = @Column(name = &quot;name&quot;)),\n        @AttributeOverride(name = &quot;controlledStatus&quot;, column = @Column(name = &quot;controlled_status&quot;)),\n        @AttributeOverride(name = &quot;jurisdictionName&quot;, column = @Column(name = &quot;jurisdiction_name&quot;)),\n        @AttributeOverride(name = &quot;resultComments&quot;, column = @Column(name = &quot;result_comments&quot;)),\n        @AttributeOverride(name = &quot;codeName&quot;, column = @Column(name = &quot;code_name&quot;)),\n        @AttributeOverride(name = &quot;corporateId&quot;, column = @Column(name = &quot;corporate_id&quot;)),\n    })\n    private Compound compounds;\n}\n</code></pre>\n<p>and I created the Embeddable class:</p>\n<pre><code>@Embeddable\n@Data\npublic class Compound {\n    private String name;\n    private String controlledStatus;\n    private String jurisdictionName;\n    private String resultComments;\n    private String codeName;\n    private String corporateId;\n}\n</code></pre>\n<p>This duplicates the same error in results as the previous model, which I then realized still doesn't produce the array of compounds, so I modified the model again:</p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\npublic class ExperimentDetails {\n    @Id\n    private String externalId;\n    private String isid;\n\n    @Embedded\n    @AttributeOverrides({\n        @AttributeOverride(name = &quot;name&quot;, column = @Column(name = &quot;name&quot;)),\n        @AttributeOverride(name = &quot;controlledStatus&quot;, column = @Column(name = &quot;controlled_status&quot;)),\n        @AttributeOverride(name = &quot;jurisdictionName&quot;, column = @Column(name = &quot;jurisdiction_name&quot;)),\n        @AttributeOverride(name = &quot;resultComments&quot;, column = @Column(name = &quot;result_comments&quot;)),\n        @AttributeOverride(name = &quot;codeName&quot;, column = @Column(name = &quot;code_name&quot;)),\n        @AttributeOverride(name = &quot;corporateId&quot;, column = @Column(name = &quot;corporate_id&quot;)),\n    })\n    private List&lt;Compound&gt; compounds;\n}\n</code></pre>\n<p>This time making <code>Compound</code> a list. However, running <code>findByExternalId(externalId)</code> now produces null for the embedded class, so no compounds are actually mapped.</p>\n<p>How can I map my model correctly to produce the correct results for my query?</p>\n"},{"tags":["java","android","android-service","foreground-service"],"owner":{"account_id":23786916,"reputation":26,"user_id":17926797,"display_name":"Max"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675439112,"creation_date":1675359300,"question_id":75326916,"body_markdown":"My Android application (targeting API 33) invokes a foreground service when the app is launched for the first time. The service is used for sending a &#39;heartbeat&#39; / status to an API which writes the timestamp of the last heartbeat / status update to a database.\r\n\r\nStarting the foreground service in the &#39;MainActivity&#39;:\r\n\r\n```\r\n@Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.login_activity);\r\n        if(!clientServiceRunning()) {\r\n            Intent serviceIntent = new Intent(this, ClientService.class);\r\n            this.startForegroundService(serviceIntent);\r\n        }\r\n        authenticateUser();\r\n        checkNetworkState();\r\n        storeTerminalId(TERMINAL_ID);\r\n    }\r\n```\r\n\r\nCode of the foreground service class:\r\n\r\n```\r\npublic class ClientService extends Service {\r\n\r\n    @Override\r\n    public IBinder onBind(Intent intent) {\r\n        throw new UnsupportedOperationException(&quot;Not yet implemented&quot;);\r\n    }\r\n\r\n    public ClientService() {\r\n        super();\r\n    }\r\n\r\n    @Override\r\n    public int onStartCommand(Intent intent, int flags, int startId) {\r\n\r\n        // Thread that sends the heartbeat to the API\r\n        new Thread(\r\n                new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        while (true) {\r\n                            Log.d(&quot;Client Service&quot;, &quot;Service is running&quot;);\r\n                            // Sends request to API using Androids Volley library\r\n                            sendHeartbeat();\r\n                            try {\r\n                                // Only send heartbeat every 2 minutes\r\n                                Thread.sleep(120000);\r\n                            } catch (InterruptedException ex) {\r\n                                ex.printStackTrace();\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n        ).start();\r\n\r\n        new Thread(\r\n            new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    // Some other task\r\n                }\r\n            }\r\n        ).start();\r\n\r\n        // Necessary notification details for foreground service\r\n        final String CHANNEL_ID = &quot;Client Service ID&quot;;\r\n        NotificationChannel notificationChannel = new NotificationChannel(\r\n                CHANNEL_ID,\r\n                CHANNEL_ID,\r\n                NotificationManager.IMPORTANCE_LOW\r\n        );\r\n\r\n        getSystemService(NotificationManager.class).createNotificationChannel(notificationChannel);\r\n        Notification.Builder serviceNotification = new Notification.Builder(this, CHANNEL_ID)\r\n                .setContentText(&quot;Client Service running the background&quot;)\r\n                .setSmallIcon(R.drawable.launcher_foreground_icon);\r\n\r\n        startForeground(1, serviceNotification.build());\r\n        return super.onStartCommand(intent, flags, startId);\r\n    }\r\n}\r\n```\r\n\r\nMethod that makes the API heartbeat request:\r\n(Note that JSONRequestNoResponse is a custom volley response class)\r\n\r\n```\r\nprivate void sendHeartbeat() {\r\n        try {\r\n            RequestQueue requestQueue = Volley.newRequestQueue(this);\r\n            String URL = &quot;https://api.myapplication.com/device/heartbeat&quot;;\r\n\r\n            JSONObject jsonBody = new JSONObject();\r\n            jsonBody.put(&quot;terminalId&quot;, String.valueOf(terminalId));\r\n            jsonBody.put(&quot;scannerConnectionState&quot;, String.valueOf(isScannerConnected));\r\n\r\n            JSONRequestNoResponse jsonRequest =  new JSONRequestNoResponse(Request.Method.PUT, URL, jsonBody,\r\n                    new Response.Listener&lt;&gt;() {\r\n                        @Override\r\n                        public void onResponse(JSONObject response) {\r\n                            Log.d(&quot;Volley&quot;, &quot;API: Heartbeat sent&quot;);\r\n                        }\r\n                    },\r\n                    new Response.ErrorListener() {\r\n                        @Override\r\n                        public void onErrorResponse(VolleyError error) {\r\n                            Log.w(&quot;Volley ERROR&quot;, &quot;Service - Error Response&quot;);\r\n                        }\r\n                    }\r\n            );\r\n\r\n            requestQueue.add(jsonRequest);\r\n\r\n        } catch (JSONException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n```\r\n\r\n\r\nWhen debugging and checking the Logcat output in Android Studio the `Log.d()` messages are displayed and I can see that in my database, the timestamp is renewed every two minutes since the service calls the API to initiate a this database update. The service also keeps running when the application is closed or when my device goes to sleep - as expected from a foreground service.\r\n\r\nNow to my problem: \r\nThe service and the hence calling the API only works when my test device is connected to Android Studio. (The device and my PC are connected via a USB C cable). As soon as I disconnect the device from my PC, the service keeps running but the timestamp in the database is not updated every two minutes anymore. \r\n\r\nWhen I reconnect my device to my PC and open Android Studio, the Logcat messages (&quot;Client Service&quot;, &quot;Service is running&quot;) resume and also the timestamp in the DB keeps updating regularly again. \r\n\r\nSo why does the service only really work when it is connected to a PC/Android Studio. I find this to be very peculiar.","title":"Android Service Thread only runs when connected to Android Studio","body":"<p>My Android application (targeting API 33) invokes a foreground service when the app is launched for the first time. The service is used for sending a 'heartbeat' / status to an API which writes the timestamp of the last heartbeat / status update to a database.</p>\n<p>Starting the foreground service in the 'MainActivity':</p>\n<pre><code>@Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.login_activity);\n        if(!clientServiceRunning()) {\n            Intent serviceIntent = new Intent(this, ClientService.class);\n            this.startForegroundService(serviceIntent);\n        }\n        authenticateUser();\n        checkNetworkState();\n        storeTerminalId(TERMINAL_ID);\n    }\n</code></pre>\n<p>Code of the foreground service class:</p>\n<pre><code>public class ClientService extends Service {\n\n    @Override\n    public IBinder onBind(Intent intent) {\n        throw new UnsupportedOperationException(&quot;Not yet implemented&quot;);\n    }\n\n    public ClientService() {\n        super();\n    }\n\n    @Override\n    public int onStartCommand(Intent intent, int flags, int startId) {\n\n        // Thread that sends the heartbeat to the API\n        new Thread(\n                new Runnable() {\n                    @Override\n                    public void run() {\n                        while (true) {\n                            Log.d(&quot;Client Service&quot;, &quot;Service is running&quot;);\n                            // Sends request to API using Androids Volley library\n                            sendHeartbeat();\n                            try {\n                                // Only send heartbeat every 2 minutes\n                                Thread.sleep(120000);\n                            } catch (InterruptedException ex) {\n                                ex.printStackTrace();\n                            }\n                        }\n                    }\n                }\n        ).start();\n\n        new Thread(\n            new Runnable() {\n                @Override\n                public void run() {\n                    // Some other task\n                }\n            }\n        ).start();\n\n        // Necessary notification details for foreground service\n        final String CHANNEL_ID = &quot;Client Service ID&quot;;\n        NotificationChannel notificationChannel = new NotificationChannel(\n                CHANNEL_ID,\n                CHANNEL_ID,\n                NotificationManager.IMPORTANCE_LOW\n        );\n\n        getSystemService(NotificationManager.class).createNotificationChannel(notificationChannel);\n        Notification.Builder serviceNotification = new Notification.Builder(this, CHANNEL_ID)\n                .setContentText(&quot;Client Service running the background&quot;)\n                .setSmallIcon(R.drawable.launcher_foreground_icon);\n\n        startForeground(1, serviceNotification.build());\n        return super.onStartCommand(intent, flags, startId);\n    }\n}\n</code></pre>\n<p>Method that makes the API heartbeat request:\n(Note that JSONRequestNoResponse is a custom volley response class)</p>\n<pre><code>private void sendHeartbeat() {\n        try {\n            RequestQueue requestQueue = Volley.newRequestQueue(this);\n            String URL = &quot;https://api.myapplication.com/device/heartbeat&quot;;\n\n            JSONObject jsonBody = new JSONObject();\n            jsonBody.put(&quot;terminalId&quot;, String.valueOf(terminalId));\n            jsonBody.put(&quot;scannerConnectionState&quot;, String.valueOf(isScannerConnected));\n\n            JSONRequestNoResponse jsonRequest =  new JSONRequestNoResponse(Request.Method.PUT, URL, jsonBody,\n                    new Response.Listener&lt;&gt;() {\n                        @Override\n                        public void onResponse(JSONObject response) {\n                            Log.d(&quot;Volley&quot;, &quot;API: Heartbeat sent&quot;);\n                        }\n                    },\n                    new Response.ErrorListener() {\n                        @Override\n                        public void onErrorResponse(VolleyError error) {\n                            Log.w(&quot;Volley ERROR&quot;, &quot;Service - Error Response&quot;);\n                        }\n                    }\n            );\n\n            requestQueue.add(jsonRequest);\n\n        } catch (JSONException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>When debugging and checking the Logcat output in Android Studio the <code>Log.d()</code> messages are displayed and I can see that in my database, the timestamp is renewed every two minutes since the service calls the API to initiate a this database update. The service also keeps running when the application is closed or when my device goes to sleep - as expected from a foreground service.</p>\n<p>Now to my problem:\nThe service and the hence calling the API only works when my test device is connected to Android Studio. (The device and my PC are connected via a USB C cable). As soon as I disconnect the device from my PC, the service keeps running but the timestamp in the database is not updated every two minutes anymore.</p>\n<p>When I reconnect my device to my PC and open Android Studio, the Logcat messages (&quot;Client Service&quot;, &quot;Service is running&quot;) resume and also the timestamp in the DB keeps updating regularly again.</p>\n<p>So why does the service only really work when it is connected to a PC/Android Studio. I find this to be very peculiar.</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1675416057,"post_id":75331682,"comment_id":132928417,"body_markdown":"[mcve] please ..","body":"<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please .."},{"owner":{"account_id":16559,"reputation":1856,"user_id":36223,"display_name":"DaveB"},"score":0,"creation_date":1675436159,"post_id":75331682,"comment_id":132934581,"body_markdown":"As @kleopatra has noted, there&#39;s not enough code here for a real answer.  I&#39;m going to guess, though, that it&#39;s not the MouseEvent that being missed, but the fact that you just have one ScaleTransition, it takes 100ms, and it&#39;s already running when the mouse exits.  So it doesn&#39;t run again.  You could change the setByX/setByY to setToX/setToY and use values of 1.75 and 1.00 which would allow you to cancel the running transition and then restart it with new parameters.  Alternatively, you could create a new transition each time and figure out how to queue them up.","body":"As @kleopatra has noted, there&#39;s not enough code here for a real answer.  I&#39;m going to guess, though, that it&#39;s not the MouseEvent that being missed, but the fact that you just have one ScaleTransition, it takes 100ms, and it&#39;s already running when the mouse exits.  So it doesn&#39;t run again.  You could change the setByX/setByY to setToX/setToY and use values of 1.75 and 1.00 which would allow you to cancel the running transition and then restart it with new parameters.  Alternatively, you could create a new transition each time and figure out how to queue them up."}],"answers":[{"comments":[{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1675545100,"post_id":75338006,"comment_id":132953600,"body_markdown":"I guess this was an [xy problem](https://xyproblem.info/) then.","body":"I guess this was an <a href=\"https://xyproblem.info/\" rel=\"nofollow noreferrer\">xy problem</a> then."}],"tags":[],"owner":{"account_id":16559,"reputation":1856,"user_id":36223,"display_name":"DaveB"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675438968,"creation_date":1675438968,"answer_id":75338006,"question_id":75331682,"body_markdown":"It&#39;s not the MouseExited that&#39;s being missed, it&#39;s the in progress transitions that cause the problem.\r\n\r\nTwo things need to be done.  First, the ScaleTransition has be set to absolutes targets, so setToX() not setByX().  Second, change the play() to playFromStart().  Like so...\r\n\r\n    class MouseOverExample : Application() {\r\n       override fun start(stage: Stage) {\r\n          stage.scene = Scene(createContent())\r\n          stage.show()\r\n       }\r\n    \r\n       private fun createContent(): Region = HBox(40.0).apply {\r\n          children += listOf(animatedPane(100.0), animatedPane(500.0), animatedPane(1200.0))\r\n          padding = Insets(40.0)\r\n       }\r\n    \r\n       private fun animatedPane(transitionDuration: Double): Region = StackPane().apply {\r\n          children += Label(&quot;H&quot;).apply { style = &quot;-fx-font-size: 40px;&quot; }\r\n          style = &quot;-fx-border-color: blue; -fx-border-width: 5px;&quot;\r\n          padding = Insets(20.0)\r\n          val transition: ScaleTransition = ScaleTransition().also {\r\n             it.node = this\r\n             it.duration = Duration(transitionDuration)\r\n          }\r\n          onMouseEntered = EventHandler {\r\n             with(transition) {\r\n                toX = 1.5\r\n                toY = 1.5\r\n                playFromStart()\r\n             }\r\n          }\r\n          onMouseExited = EventHandler {\r\n             with(transition) {\r\n                toX = 1.0\r\n                toY = 1.0\r\n                playFromStart()\r\n             }\r\n          }\r\n       }\r\n    }\r\n    \r\n    fun main() {\r\n       Application.launch(MouseOverExample::class.java)\r\n    }\r\n\r\nThis is Kotlin, but it should be easy enough to figure out. \r\n\r\nThis gives three Panes, each with a transition associated with it, and the durations are all different so that you can see how mouse speed has an impact. \r\n\r\nAt 100ms, a partial grow followed by a shrink looks just fine.  At 1200ms, if the mouse exits and the grow transition stops after, say, 100ms then it will still take 1200ms to shrink back to the original size, which is kind of goofy.  But in every case the Pane goes back to its original size no matter how fast you sweep the mouse through it.","title":"Is there a better method than onMouseExited that detects when it exits no matter how fast it moves?","body":"<p>It's not the MouseExited that's being missed, it's the in progress transitions that cause the problem.</p>\n<p>Two things need to be done.  First, the ScaleTransition has be set to absolutes targets, so setToX() not setByX().  Second, change the play() to playFromStart().  Like so...</p>\n<pre><code>class MouseOverExample : Application() {\n   override fun start(stage: Stage) {\n      stage.scene = Scene(createContent())\n      stage.show()\n   }\n\n   private fun createContent(): Region = HBox(40.0).apply {\n      children += listOf(animatedPane(100.0), animatedPane(500.0), animatedPane(1200.0))\n      padding = Insets(40.0)\n   }\n\n   private fun animatedPane(transitionDuration: Double): Region = StackPane().apply {\n      children += Label(&quot;H&quot;).apply { style = &quot;-fx-font-size: 40px;&quot; }\n      style = &quot;-fx-border-color: blue; -fx-border-width: 5px;&quot;\n      padding = Insets(20.0)\n      val transition: ScaleTransition = ScaleTransition().also {\n         it.node = this\n         it.duration = Duration(transitionDuration)\n      }\n      onMouseEntered = EventHandler {\n         with(transition) {\n            toX = 1.5\n            toY = 1.5\n            playFromStart()\n         }\n      }\n      onMouseExited = EventHandler {\n         with(transition) {\n            toX = 1.0\n            toY = 1.0\n            playFromStart()\n         }\n      }\n   }\n}\n\nfun main() {\n   Application.launch(MouseOverExample::class.java)\n}\n</code></pre>\n<p>This is Kotlin, but it should be easy enough to figure out.</p>\n<p>This gives three Panes, each with a transition associated with it, and the durations are all different so that you can see how mouse speed has an impact.</p>\n<p>At 100ms, a partial grow followed by a shrink looks just fine.  At 1200ms, if the mouse exits and the grow transition stops after, say, 100ms then it will still take 1200ms to shrink back to the original size, which is kind of goofy.  But in every case the Pane goes back to its original size no matter how fast you sweep the mouse through it.</p>\n"}],"owner":{"account_id":27691360,"reputation":13,"user_id":21137969,"display_name":"Crynda"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75338006,"answer_count":1,"score":0,"last_activity_date":1675438968,"creation_date":1675400229,"question_id":75331682,"body_markdown":"Can someone tell me how I can do so that an animation is made in a pane when the mouse is over said pane and make another when it is the opposite? I tried using the onMouseEntered and onMouseExited methods, with the first one there was no problem, however if we remove the mouse very quickly or abruptly, the program will not detect the exit of the mouse and therefore the animation will not be executed, can someone help me to solve this bug? please\r\n\r\nfirst add 2 methods to an events from the scene builder for the pane, these are said methods\r\n\r\n```\r\npublic void scale1 () {\r\n\t\tdouble currentScaleX = pane1.getScaleX();\r\n\t\tdouble currentScaleY = pane1.getScaleY();\r\n\t\t\r\n\t\tif(currentScaleX ==1.0 &amp;&amp; currentScaleY ==1.0) {\r\n\t\t\r\n\t\t\tscale.setNode(pane1);\r\n\t\t\tscale.setDuration(Duration.millis(100));\r\n\t\t\tscale.setByX(0.75);\r\n\t\t\tscale.setByY(0.75);\r\n\t\t\tscale.play();\r\n\t\t\t\r\n\t\t}\t\r\n\t}\r\n\r\npublic void scale1Re () {\r\n\t\tdouble currentScaleX = pane1.getScaleX();\r\n\t\tdouble currentScaleY = pane1.getScaleY();\r\n\r\n\t\tif(currentScaleX &gt;1.0 &amp;&amp; currentScaleY &gt;1.0) {\r\n\t\t\tscale.setNode(pane1);\r\n\t\t\tscale.setDuration(Duration.millis(100));\r\n\t\t\tscale.setByX(-0.75);\r\n\t\t\tscale.setByY(-0.75);\r\n\t\t\tscale.play();\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n```\r\nHowever, when executed it works, but if we move the mouse very quickly, it will not detect the change and sometimes it will only execute the first method[It is not seen in the screenshot, but my mouse is out of the pane](https://i.stack.imgur.com/HH0kd.png)\r\n\r\nI even tried to make a mouselistener class in my controller class so that it detects when the mouse is out of the pane or something and automatically executes the second method, but I think I did it wrong\r\n\r\n```\r\n@Override\r\n\tpublic void initialize(URL arg0, ResourceBundle arg1) {\r\n\t\tpane1.setOnMouseExited(new EventHandler&lt;MouseEvent&gt;() {\r\n\t\t    @Override\r\n\t\t    public void handle(MouseEvent mouseEvent) {\r\n\t\t        Bounds bounds = principalPane.getBoundsInParent();\r\n\t\t        if (bounds.contains(mouseEvent.getSceneX(), mouseEvent.getSceneY())) {\r\n\t\t        \tscale1Re();\r\n\t\t        }\r\n\t\t    }\r\n\t\t});\r\n\r\n\t\t\r\n\t}\r\n```","title":"Is there a better method than onMouseExited that detects when it exits no matter how fast it moves?","body":"<p>Can someone tell me how I can do so that an animation is made in a pane when the mouse is over said pane and make another when it is the opposite? I tried using the onMouseEntered and onMouseExited methods, with the first one there was no problem, however if we remove the mouse very quickly or abruptly, the program will not detect the exit of the mouse and therefore the animation will not be executed, can someone help me to solve this bug? please</p>\n<p>first add 2 methods to an events from the scene builder for the pane, these are said methods</p>\n<pre><code>public void scale1 () {\n        double currentScaleX = pane1.getScaleX();\n        double currentScaleY = pane1.getScaleY();\n        \n        if(currentScaleX ==1.0 &amp;&amp; currentScaleY ==1.0) {\n        \n            scale.setNode(pane1);\n            scale.setDuration(Duration.millis(100));\n            scale.setByX(0.75);\n            scale.setByY(0.75);\n            scale.play();\n            \n        }   \n    }\n\npublic void scale1Re () {\n        double currentScaleX = pane1.getScaleX();\n        double currentScaleY = pane1.getScaleY();\n\n        if(currentScaleX &gt;1.0 &amp;&amp; currentScaleY &gt;1.0) {\n            scale.setNode(pane1);\n            scale.setDuration(Duration.millis(100));\n            scale.setByX(-0.75);\n            scale.setByY(-0.75);\n            scale.play();\n            \n        }\n    }\n</code></pre>\n<p>However, when executed it works, but if we move the mouse very quickly, it will not detect the change and sometimes it will only execute the first method<a href=\"https://i.stack.imgur.com/HH0kd.png\" rel=\"nofollow noreferrer\">It is not seen in the screenshot, but my mouse is out of the pane</a></p>\n<p>I even tried to make a mouselistener class in my controller class so that it detects when the mouse is out of the pane or something and automatically executes the second method, but I think I did it wrong</p>\n<pre><code>@Override\n    public void initialize(URL arg0, ResourceBundle arg1) {\n        pane1.setOnMouseExited(new EventHandler&lt;MouseEvent&gt;() {\n            @Override\n            public void handle(MouseEvent mouseEvent) {\n                Bounds bounds = principalPane.getBoundsInParent();\n                if (bounds.contains(mouseEvent.getSceneX(), mouseEvent.getSceneY())) {\n                    scale1Re();\n                }\n            }\n        });\n\n        \n    }\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9546,"page":677,"page_size":100}
