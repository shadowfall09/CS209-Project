{"items":[{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":3830865,"reputation":13432,"user_id":3176419,"accept_rate":50,"display_name":"flyingfox"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662798541,"creation_date":1662798541,"answer_id":73670372,"question_id":73670223,"body_markdown":"Check the [Official document][1] of `CrossOrign`,we can found below description:\r\n[![enter image description here][2]][2]\r\n\r\nSo the reason is that you have made a wrong invocation,if you need to allow multiple origins,**you need to use an array contains of string instead of single string**\r\n\r\nIn order to make your code work,you can try with below:\r\n\r\n    @CrossOrigin(origins = {&quot;http://localhost:3000&quot;, &quot;http://server ip:3000&quot;, &quot;http://backend.com:3000&quot;})\r\n    @RestController\r\n    @RequestMapping(&quot;/member&quot;)\r\n    public class MemberController {\r\n    }\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/CrossOrigin.html\r\n  [2]: https://i.stack.imgur.com/kH4uU.png","title":"@CrossOrigin only works when register one domain","body":"<p>Check the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/CrossOrigin.html\" rel=\"nofollow noreferrer\">Official document</a> of <code>CrossOrign</code>,we can found below description:\n<a href=\"https://i.stack.imgur.com/kH4uU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kH4uU.png\" alt=\"enter image description here\" /></a></p>\n<p>So the reason is that you have made a wrong invocation,if you need to allow multiple origins,<strong>you need to use an array contains of string instead of single string</strong></p>\n<p>In order to make your code work,you can try with below:</p>\n<pre><code>@CrossOrigin(origins = {&quot;http://localhost:3000&quot;, &quot;http://server ip:3000&quot;, &quot;http://backend.com:3000&quot;})\n@RestController\n@RequestMapping(&quot;/member&quot;)\npublic class MemberController {\n}\n</code></pre>\n"}],"owner":{"account_id":21310254,"reputation":109,"user_id":15684755,"display_name":"codingRookie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73670372,"answer_count":1,"score":0,"last_activity_date":1662798541,"creation_date":1662796996,"question_id":73670223,"body_markdown":"I wanted to make an connection between frontend and backend so I used @CrossOrigin annotation Like below.\r\n\r\n```\r\n@CrossOrigin(origins = &quot;http://localhost:3000, http://server ip:3000, http://backend.com:3000&quot;)\r\n@RestController\r\n@RequestMapping(&quot;/member&quot;)\r\npublic class MemberController {\r\n\r\n    Logger logger = LoggerFactory.getLogger(MemberController.class);\r\n    private MemberService ms;\r\n    private Encryption encrypt;\r\n    private S3FileUploadService sfu;\r\n\r\n    @Autowired\r\n    public MemberController(MemberService ms, Encryption encrypt,S3FileUploadService sfu) {\r\n        this.ms = ms;\r\n        this.encrypt = encrypt;\r\n        this.sfu = sfu;\r\n    }\r\n\r\n    @GetMapping(&quot;/login&quot;)\r\n    public FrontMember login(@RequestHeader(&quot;Authorization&quot;) String autho) {\r\n        logger.info(&quot;Authorization : &quot; + autho);\r\n\r\n        String memberInform = encrypt.aesDecrypt(autho);\r\n        String[] idPwd = memberInform.split(&quot;/&quot;);\r\n        Member loginTry = new Member();\r\n        loginTry.setEmail(idPwd[0]);\r\n        loginTry.setPwd(encrypt.shaEncryption(idPwd[1]));\r\n        Member authorizedUser = ms.login(loginTry);\r\n        if(authorizedUser == null){\r\n            logger.warn(&quot;No member info&quot;);\r\n            return null;\r\n        }else{\r\n            logger.info(&quot;Member Get : &quot;+authorizedUser.toString());\r\n            String hashMemberNum = encrypt.aesEncrypt(Integer.toString(authorizedUser.getMemberNum()));\r\n            String mgHash = encrypt.aesEncrypt(Integer.toString(authorizedUser.getMg()));\r\n            FrontMember fm = new FrontMember(hashMemberNum, authorizedUser.getNickName(), authorizedUser.getPfUrl(),mgHash);\r\n            logger.info(&quot;Login User : &quot;+fm.toString());\r\n            return fm;\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nBut it doesn&#39;t work unless I only put one domain on origin like below.\r\n```\r\n@CrossOrigin(origins = &quot;http://localhost:3000&quot;)\r\n```\r\n\r\nI want to put several domain at crossorigin.\r\n\r\nHow can I solve this problem?","title":"@CrossOrigin only works when register one domain","body":"<p>I wanted to make an connection between frontend and backend so I used @CrossOrigin annotation Like below.</p>\n<pre><code>@CrossOrigin(origins = &quot;http://localhost:3000, http://server ip:3000, http://backend.com:3000&quot;)\n@RestController\n@RequestMapping(&quot;/member&quot;)\npublic class MemberController {\n\n    Logger logger = LoggerFactory.getLogger(MemberController.class);\n    private MemberService ms;\n    private Encryption encrypt;\n    private S3FileUploadService sfu;\n\n    @Autowired\n    public MemberController(MemberService ms, Encryption encrypt,S3FileUploadService sfu) {\n        this.ms = ms;\n        this.encrypt = encrypt;\n        this.sfu = sfu;\n    }\n\n    @GetMapping(&quot;/login&quot;)\n    public FrontMember login(@RequestHeader(&quot;Authorization&quot;) String autho) {\n        logger.info(&quot;Authorization : &quot; + autho);\n\n        String memberInform = encrypt.aesDecrypt(autho);\n        String[] idPwd = memberInform.split(&quot;/&quot;);\n        Member loginTry = new Member();\n        loginTry.setEmail(idPwd[0]);\n        loginTry.setPwd(encrypt.shaEncryption(idPwd[1]));\n        Member authorizedUser = ms.login(loginTry);\n        if(authorizedUser == null){\n            logger.warn(&quot;No member info&quot;);\n            return null;\n        }else{\n            logger.info(&quot;Member Get : &quot;+authorizedUser.toString());\n            String hashMemberNum = encrypt.aesEncrypt(Integer.toString(authorizedUser.getMemberNum()));\n            String mgHash = encrypt.aesEncrypt(Integer.toString(authorizedUser.getMg()));\n            FrontMember fm = new FrontMember(hashMemberNum, authorizedUser.getNickName(), authorizedUser.getPfUrl(),mgHash);\n            logger.info(&quot;Login User : &quot;+fm.toString());\n            return fm;\n        }\n    }\n}\n\n</code></pre>\n<p>But it doesn't work unless I only put one domain on origin like below.</p>\n<pre><code>@CrossOrigin(origins = &quot;http://localhost:3000&quot;)\n</code></pre>\n<p>I want to put several domain at crossorigin.</p>\n<p>How can I solve this problem?</p>\n"},{"tags":["java","algorithm","conditional-statements"],"answers":[{"tags":[],"owner":{"account_id":2818342,"reputation":299858,"user_id":2422776,"display_name":"Mureinik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662713339,"creation_date":1662713339,"answer_id":73659586,"question_id":73659517,"body_markdown":"If two triplets have the same difference from the target it means they either have the same sum, or that one has a positive difference and the other a negative difference from the target with the same absolute value. If this is the case, the triplet with the positive difference (that is larger than the negative difference, by definition) has the smaller sum, and should be picked.","title":"Triplet Sum close to target","body":"<p>If two triplets have the same difference from the target it means they either have the same sum, or that one has a positive difference and the other a negative difference from the target with the same absolute value. If this is the case, the triplet with the positive difference (that is larger than the negative difference, by definition) has the smaller sum, and should be picked.</p>\n"},{"tags":[],"owner":{"account_id":4826640,"reputation":25377,"user_id":3895960,"accept_rate":97,"display_name":"Dici"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662798449,"creation_date":1662713355,"answer_id":73659590,"question_id":73659517,"body_markdown":"When there are multiple triplets you want to return the one that has the smallest sum, therefore the one that has the largest diff. It&#39;s math, consider this:\r\n\r\n```none\r\nLet&#39;s assume that \r\n\r\ndiff1 = targetSum - sum(triplet1)\r\ndiff2 = targetSum - sum(triplet2)\r\nabs(diff1) = abs(diff2)\r\n\r\nif (sum(triplet1) &lt; sum(triplet2)), then \r\n\r\n-sum(triplet1) &gt; -sum(triplet2), therefore\r\n\r\ndiff2 &lt; diff1\r\n```\r\n\r\nYou want to select triplet1 as it has the smallest sum, which is equivalent to selecting the largest diff (`diff1`).","title":"Triplet Sum close to target","body":"<p>When there are multiple triplets you want to return the one that has the smallest sum, therefore the one that has the largest diff. It's math, consider this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Let's assume that \n\ndiff1 = targetSum - sum(triplet1)\ndiff2 = targetSum - sum(triplet2)\nabs(diff1) = abs(diff2)\n\nif (sum(triplet1) &lt; sum(triplet2)), then \n\n-sum(triplet1) &gt; -sum(triplet2), therefore\n\ndiff2 &lt; diff1\n</code></pre>\n<p>You want to select triplet1 as it has the smallest sum, which is equivalent to selecting the largest diff (<code>diff1</code>).</p>\n"},{"tags":[],"owner":{"display_name":"user1196549"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662719204,"creation_date":1662719204,"answer_id":73660716,"question_id":73659517,"body_markdown":"The logics to get the answer is as follows:\r\n\r\n- initialize with the first sum;\r\n\r\nFor all new candidate sums\r\n\r\n  - compute the absolute distance to the target;\r\n\r\n  - if smallest than the best distance found so far, keep the new sum;\r\n\r\n  - if equal to the best distance found so far and smaller than the best sum so far, keep the new sum.\r\n\r\nThat&#39;s it.","title":"Triplet Sum close to target","body":"<p>The logics to get the answer is as follows:</p>\n<ul>\n<li>initialize with the first sum;</li>\n</ul>\n<p>For all new candidate sums</p>\n<ul>\n<li><p>compute the absolute distance to the target;</p>\n</li>\n<li><p>if smallest than the best distance found so far, keep the new sum;</p>\n</li>\n<li><p>if equal to the best distance found so far and smaller than the best sum so far, keep the new sum.</p>\n</li>\n</ul>\n<p>That's it.</p>\n"}],"owner":{"account_id":14194543,"reputation":361,"user_id":10254216,"display_name":"isilia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":250,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1662798449,"creation_date":1662712948,"question_id":73659517,"body_markdown":"Given an array of unsorted numbers and a target number, find a triplet in the array whose sum is as close to the target number as possible, return the sum of the triplet. If there are more than one such triplet, return the sum of the triplet with the smallest sum.\r\n\r\nBelow is the code -\r\n\r\n```\r\nimport java.util.*;\r\n\r\nclass TripletSumCloseToTarget {\r\n\r\n  public static int searchTriplet(int[] arr, int targetSum) {\r\n    if (arr == null || arr.length &lt; 3)\r\n      throw new IllegalArgumentException();\r\n\r\n    Arrays.sort(arr);\r\n    int smallestDifference = Integer.MAX_VALUE;\r\n    for (int i = 0; i &lt; arr.length - 2; i++) {\r\n      int left = i + 1, right = arr.length - 1;\r\n      while (left &lt; right) {\r\n        // comparing the sum of three numbers to the &#39;targetSum&#39; can cause overflow\r\n        // so, we will try to find a target difference\r\n        int targetDiff = targetSum - arr[i] - arr[left] - arr[right];\r\n        if (targetDiff == 0) //  we&#39;ve found a triplet with an exact sum\r\n          return targetSum; // return sum of all the numbers\r\n\r\n        // the second part of the above &#39;if&#39; is to handle the smallest sum when we have more than one solution\r\n        if (Math.abs(targetDiff) &lt; Math.abs(smallestDifference)\r\n            || (Math.abs(targetDiff) == Math.abs(smallestDifference) &amp;&amp; targetDiff &gt; smallestDifference))\r\n          smallestDifference = targetDiff; // save the closest and the biggest difference  \r\n\r\n        if (targetDiff &gt; 0)\r\n          left++; // we need a triplet with a bigger sum\r\n        else\r\n          right--; // we need a triplet with a smaller sum\r\n      }\r\n    }\r\n    return targetSum - smallestDifference;\r\n  }\r\n\r\n  public static void main(String[] args) {\r\n    System.out.println(TripletSumCloseToTarget.searchTriplet(new int[] { -2, 0, 1, 2 }, 2));\r\n    System.out.println(TripletSumCloseToTarget.searchTriplet(new int[] { -3, -1, 1, 2 }, 1));\r\n    System.out.println(TripletSumCloseToTarget.searchTriplet(new int[] { 1, 0, 1, 1 }, 100));\r\n  }\r\n}\r\n```\r\n\r\nThe piece of code that I couldn&#39;t understand is below :\r\n\r\n```\r\nif (Math.abs(targetDiff) &lt; Math.abs(smallestDifference)\r\n            || (Math.abs(targetDiff) == Math.abs(smallestDifference) &amp;&amp; targetDiff &gt; smallestDifference))\r\n```\r\n\r\nMore specifically the expression ```(Math.abs(targetDiff) == Math.abs(smallestDifference) &amp;&amp; targetDiff &gt; smallestDifference))```. Suppose my previous smallest difference is -2 and in next step my targetDiff comes out to be 2 . Then why I am updating my smallest difference to targetDiff .\r\n\r\nFor instance my sum of triplets are say - 3,4,5 and my targetSum value is 8. Then the targetDiff comes out to be (5,4,3) and the smallestDifference is 3. That makes sense but in case of equality I couldn&#39;t get the logic. Please help.","title":"Triplet Sum close to target","body":"<p>Given an array of unsorted numbers and a target number, find a triplet in the array whose sum is as close to the target number as possible, return the sum of the triplet. If there are more than one such triplet, return the sum of the triplet with the smallest sum.</p>\n<p>Below is the code -</p>\n<pre><code>import java.util.*;\n\nclass TripletSumCloseToTarget {\n\n  public static int searchTriplet(int[] arr, int targetSum) {\n    if (arr == null || arr.length &lt; 3)\n      throw new IllegalArgumentException();\n\n    Arrays.sort(arr);\n    int smallestDifference = Integer.MAX_VALUE;\n    for (int i = 0; i &lt; arr.length - 2; i++) {\n      int left = i + 1, right = arr.length - 1;\n      while (left &lt; right) {\n        // comparing the sum of three numbers to the 'targetSum' can cause overflow\n        // so, we will try to find a target difference\n        int targetDiff = targetSum - arr[i] - arr[left] - arr[right];\n        if (targetDiff == 0) //  we've found a triplet with an exact sum\n          return targetSum; // return sum of all the numbers\n\n        // the second part of the above 'if' is to handle the smallest sum when we have more than one solution\n        if (Math.abs(targetDiff) &lt; Math.abs(smallestDifference)\n            || (Math.abs(targetDiff) == Math.abs(smallestDifference) &amp;&amp; targetDiff &gt; smallestDifference))\n          smallestDifference = targetDiff; // save the closest and the biggest difference  \n\n        if (targetDiff &gt; 0)\n          left++; // we need a triplet with a bigger sum\n        else\n          right--; // we need a triplet with a smaller sum\n      }\n    }\n    return targetSum - smallestDifference;\n  }\n\n  public static void main(String[] args) {\n    System.out.println(TripletSumCloseToTarget.searchTriplet(new int[] { -2, 0, 1, 2 }, 2));\n    System.out.println(TripletSumCloseToTarget.searchTriplet(new int[] { -3, -1, 1, 2 }, 1));\n    System.out.println(TripletSumCloseToTarget.searchTriplet(new int[] { 1, 0, 1, 1 }, 100));\n  }\n}\n</code></pre>\n<p>The piece of code that I couldn't understand is below :</p>\n<pre><code>if (Math.abs(targetDiff) &lt; Math.abs(smallestDifference)\n            || (Math.abs(targetDiff) == Math.abs(smallestDifference) &amp;&amp; targetDiff &gt; smallestDifference))\n</code></pre>\n<p>More specifically the expression <code>(Math.abs(targetDiff) == Math.abs(smallestDifference) &amp;&amp; targetDiff &gt; smallestDifference))</code>. Suppose my previous smallest difference is -2 and in next step my targetDiff comes out to be 2 . Then why I am updating my smallest difference to targetDiff .</p>\n<p>For instance my sum of triplets are say - 3,4,5 and my targetSum value is 8. Then the targetDiff comes out to be (5,4,3) and the smallestDifference is 3. That makes sense but in case of equality I couldn't get the logic. Please help.</p>\n"},{"tags":["java","web-services","netbeans"],"answers":[{"tags":[],"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1526602488,"creation_date":1526602488,"answer_id":50402094,"question_id":50397249,"body_markdown":"In an earlier release of NetBeans you could [create a web service directly from a WSDL file][1], but for some reason the approach is different, and less obvious, now:\r\n\r\n1. Create a simple web application using the wizard: **File &gt; New Project &gt; Java Web &gt; Web Application**. \r\n2. In the **Projects** panel select the node of that project, right click and select **New &gt; Web Service from WSDL...** from the dropdown menu:\r\n\r\n[![menuSelection][2]][2]\r\n\r\n3. In the **New Web Service from WSDL** dialog there is a field named **Select Local WSDL File or Enter WSDL URL** where you specify the WSDL file to be imported. \r\n\r\n[![importWsdlDialog][3]][3]\r\n\r\n\r\n  [1]: https://docs.oracle.com/cd/E19509-01/820-7006/ghyto/index.html\r\n  [2]: https://i.stack.imgur.com/VccCt.png\r\n  [3]: https://i.stack.imgur.com/f09rN.png","title":"Create web service from wsdl is missing in file types in Netbeans","body":"<p>In an earlier release of NetBeans you could <a href=\"https://docs.oracle.com/cd/E19509-01/820-7006/ghyto/index.html\" rel=\"nofollow noreferrer\">create a web service directly from a WSDL file</a>, but for some reason the approach is different, and less obvious, now:</p>\n\n<ol>\n<li>Create a simple web application using the wizard: <strong>File > New Project > Java Web > Web Application</strong>. </li>\n<li>In the <strong>Projects</strong> panel select the node of that project, right click and select <strong>New > Web Service from WSDL...</strong> from the dropdown menu:</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/VccCt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VccCt.png\" alt=\"menuSelection\"></a></p>\n\n<ol start=\"3\">\n<li>In the <strong>New Web Service from WSDL</strong> dialog there is a field named <strong>Select Local WSDL File or Enter WSDL URL</strong> where you specify the WSDL file to be imported. </li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/f09rN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/f09rN.png\" alt=\"importWsdlDialog\"></a></p>\n"}],"owner":{"account_id":13595053,"reputation":1,"user_id":9807362,"display_name":"Robert Pollet"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":497,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662798304,"creation_date":1526577881,"question_id":50397249,"body_markdown":"I want to create WEB Service from existing WSDL, but there is no such field as &quot;Create WS from WSDL&quot;.\r\n\r\nHow can I add it to file types?","title":"Create web service from wsdl is missing in file types in Netbeans","body":"<p>I want to create WEB Service from existing WSDL, but there is no such field as \"Create WS from WSDL\".</p>\n\n<p>How can I add it to file types?</p>\n"},{"tags":["java","spring-boot","spring-webflux","project-reactor"],"answers":[{"tags":[],"owner":{"account_id":14492583,"reputation":701,"user_id":10468291,"display_name":"Patrick Hooijer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1662797325,"creation_date":1662647554,"answer_id":73650829,"question_id":73650266,"body_markdown":"Since your elements come from a Mono that is repeated multiple times, you can achieve this my prepending your Flux with a single non-delayed database call Mono:\r\n\r\n```java\r\nvar singleCall = Mono.fromFuture(\r\n        () -&gt; dataCollector.getDataFromCassandra((CassandraExposureRetrieveRequest) command.getBody()));\r\nvar connection = singleCall\r\n        .concatWith(singleCall.delayElement(Duration.ofMillis(delayExposure))\r\n                .repeat())\r\n        .share();\r\n```\r\n\r\n**Edit:** By request, here is a solution if the data source is a Flux instead of a repeated Mono:\r\n\r\n## Flux solution\r\n\r\nTo split the first element from all other elements, I use [`Flux.switchOnFirst(BiFunction)`][1] to modify the Flux when the first signal is received. The `BiFunction` receives the first signal and the original Flux and maps it to the modified Flux. In this case, I map the original Flux to a Flux with its first element removed, then throttling all remaining elements , and lastly the first element is re-added at the start from the signal.\r\n\r\n```java\r\nvar connection = originalFlux.switchOnFirst((signal, flux) -&gt; {\r\n    if (signal.hasValue()) {\r\n        return flux.skip(1)\r\n                .delaySequence(Duration.ofMillis(delayExposure))\r\n                .startWith(signal.get());\r\n    }\r\n    return flux;\r\n});\r\n```\r\n\r\nNote that the BiFunction receives the first *signal*, which can also be an onError or an onComplete. To handle these, the Flux is only modified if the Signal has a value, else the Flux is returned unmodified.\r\n\r\nThis solution works for any operation that has to modify all the elements except the first one, for that replace the `.delaySequence` line with your desired operation(s).\r\n\r\n\r\n  [1]: https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Flux.html#switchOnFirst-java.util.function.BiFunction-","title":"Delay all next elements in Webflux after first one is emitted","body":"<p>Since your elements come from a Mono that is repeated multiple times, you can achieve this my prepending your Flux with a single non-delayed database call Mono:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var singleCall = Mono.fromFuture(\n        () -&gt; dataCollector.getDataFromCassandra((CassandraExposureRetrieveRequest) command.getBody()));\nvar connection = singleCall\n        .concatWith(singleCall.delayElement(Duration.ofMillis(delayExposure))\n                .repeat())\n        .share();\n</code></pre>\n<p><strong>Edit:</strong> By request, here is a solution if the data source is a Flux instead of a repeated Mono:</p>\n<h2>Flux solution</h2>\n<p>To split the first element from all other elements, I use <a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Flux.html#switchOnFirst-java.util.function.BiFunction-\" rel=\"nofollow noreferrer\"><code>Flux.switchOnFirst(BiFunction)</code></a> to modify the Flux when the first signal is received. The <code>BiFunction</code> receives the first signal and the original Flux and maps it to the modified Flux. In this case, I map the original Flux to a Flux with its first element removed, then throttling all remaining elements , and lastly the first element is re-added at the start from the signal.</p>\n<pre class=\"lang-java prettyprint-override\"><code>var connection = originalFlux.switchOnFirst((signal, flux) -&gt; {\n    if (signal.hasValue()) {\n        return flux.skip(1)\n                .delaySequence(Duration.ofMillis(delayExposure))\n                .startWith(signal.get());\n    }\n    return flux;\n});\n</code></pre>\n<p>Note that the BiFunction receives the first <em>signal</em>, which can also be an onError or an onComplete. To handle these, the Flux is only modified if the Signal has a value, else the Flux is returned unmodified.</p>\n<p>This solution works for any operation that has to modify all the elements except the first one, for that replace the <code>.delaySequence</code> line with your desired operation(s).</p>\n"}],"owner":{"account_id":9003090,"reputation":53,"user_id":6710955,"display_name":"Icarium"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1598,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73650829,"answer_count":1,"score":1,"last_activity_date":1662797325,"creation_date":1662645322,"question_id":73650266,"body_markdown":"I have in my app a reactive endpoint that returns a flux from database that never ends unless communication from the front stops. What I want to accomplish is to load first element as soon as possible and then throttle next elements by adding some delay. What I accomplished so far is to delay all elements that first one is loaded after same delay as every next one.\r\n````\r\n\r\n    var connection = Mono.fromFuture(\r\n                    () -&gt; dataCollector.getDataFromCassandra((CassandraExposureRetrieveRequest) command.getBody()))\r\n            .delayElement(Duration.ofMillis(delayExposure))\r\n            .repeat()\r\n            .share();\r\n\r\n````\r\n\r\nDoes anyone know if there is a rather simple way to delay second, third etc. element from the flux ? \r\n\r\nKind regards,\r\nBartek \r\n","title":"Delay all next elements in Webflux after first one is emitted","body":"<p>I have in my app a reactive endpoint that returns a flux from database that never ends unless communication from the front stops. What I want to accomplish is to load first element as soon as possible and then throttle next elements by adding some delay. What I accomplished so far is to delay all elements that first one is loaded after same delay as every next one.</p>\n<pre><code>\n    var connection = Mono.fromFuture(\n                    () -&gt; dataCollector.getDataFromCassandra((CassandraExposureRetrieveRequest) command.getBody()))\n            .delayElement(Duration.ofMillis(delayExposure))\n            .repeat()\n            .share();\n\n</code></pre>\n<p>Does anyone know if there is a rather simple way to delay second, third etc. element from the flux ?</p>\n<p>Kind regards,\nBartek</p>\n"},{"tags":["java","multithreading","concurrency","java-threads","reentrantlock"],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662796965,"creation_date":1571543333,"answer_id":58469881,"question_id":58463597,"body_markdown":"The `tryLock` method is thread-safe.  It does what it is supposed to do (according to the javadoc) reliably.\r\n\r\nHowever, the way that you are using the `trylock` results in a non-thread-safe implementation of `increment` and `decrement`.  If you are going to use `trylock` in that situation, you will need to do something like this:\r\n\r\n    try {\r\n        while (!lock.tryLock()) { }  // Try to get the lock until you get it\r\n        counter++;\r\n    } finally {\r\n        lock.unlock();\r\n    }\r\n\r\nBut that is a bad idea because you are effectively busy-waiting on the lock.  A better solution using a `Lock` would be:\r\n\r\n    try {\r\n        lock.lock();  // Block until the lock is acquired.\r\n        counter++;\r\n    } finally {\r\n        lock.unlock();\r\n    }\r\n\r\nBut if you are after a lock-free solution, then you should be using an atomic type:\r\n\r\n  - `java.util.concurrent.atomic.LongAdder` ([javadoc][1]) for Java 8 and later,\r\n  - `java.util.concurrent.atomic.AtomicLong` ([javadoc][2]) all versions of Java since Java 5 inclusive.\r\n\r\nApparently `LongAdder` performs better if there is a lot of contention:\r\n\r\n  - https://stackoverflow.com/questions/30691083/how-longadder-performs-better-than-atomiclong\r\n\r\n--------------------------\r\n\r\nNote that thread-safety is actually a difficult concept to define precisely.  You need to start from a behavioral specification of the *correct* behavior of an algorithm.  Then you can say that an implementation of the algorithm.\r\n\r\n&gt; Definition: When the algorithm is correct according to the specification when run on system with one processor, then it is *thread-safe* if it is also *always* correct according to the specification when there are multiple processors.\r\n\r\nFrom this, we see that:\r\n\r\n  - thread-safety is moot if the algorithm doesn&#39;t meet its behavioral specification in the single processor case, and\r\n  - thread-safety is moot if the algorithm cannot use multiple processors.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/LongAdder.html\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicLong.html","title":"Is lock.tryLock() thread Safe?","body":"<p>The <code>tryLock</code> method is thread-safe.  It does what it is supposed to do (according to the javadoc) reliably.</p>\n<p>However, the way that you are using the <code>trylock</code> results in a non-thread-safe implementation of <code>increment</code> and <code>decrement</code>.  If you are going to use <code>trylock</code> in that situation, you will need to do something like this:</p>\n<pre><code>try {\n    while (!lock.tryLock()) { }  // Try to get the lock until you get it\n    counter++;\n} finally {\n    lock.unlock();\n}\n</code></pre>\n<p>But that is a bad idea because you are effectively busy-waiting on the lock.  A better solution using a <code>Lock</code> would be:</p>\n<pre><code>try {\n    lock.lock();  // Block until the lock is acquired.\n    counter++;\n} finally {\n    lock.unlock();\n}\n</code></pre>\n<p>But if you are after a lock-free solution, then you should be using an atomic type:</p>\n<ul>\n<li><code>java.util.concurrent.atomic.LongAdder</code> (<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/LongAdder.html\" rel=\"nofollow noreferrer\">javadoc</a>) for Java 8 and later,</li>\n<li><code>java.util.concurrent.atomic.AtomicLong</code> (<a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicLong.html\" rel=\"nofollow noreferrer\">javadoc</a>) all versions of Java since Java 5 inclusive.</li>\n</ul>\n<p>Apparently <code>LongAdder</code> performs better if there is a lot of contention:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/30691083/how-longadder-performs-better-than-atomiclong\">How LongAdder performs better than AtomicLong</a></li>\n</ul>\n<hr />\n<p>Note that thread-safety is actually a difficult concept to define precisely.  You need to start from a behavioral specification of the <em>correct</em> behavior of an algorithm.  Then you can say that an implementation of the algorithm.</p>\n<blockquote>\n<p>Definition: When the algorithm is correct according to the specification when run on system with one processor, then it is <em>thread-safe</em> if it is also <em>always</em> correct according to the specification when there are multiple processors.</p>\n</blockquote>\n<p>From this, we see that:</p>\n<ul>\n<li>thread-safety is moot if the algorithm doesn't meet its behavioral specification in the single processor case, and</li>\n<li>thread-safety is moot if the algorithm cannot use multiple processors.</li>\n</ul>\n"}],"owner":{"account_id":4482535,"reputation":464,"user_id":5161634,"accept_rate":0,"display_name":"Sriharsha g.r.v"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":620,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1662796965,"creation_date":1571487447,"question_id":58463597,"body_markdown":"I tried the thread race program with Synchronization,lock.lock() and lock.tryLock(),I found that with synchronization and lock.lock() works fine,but lock.tryLock() itself is not thread safe.This method is not able to acquire the lock and hence giving unexpected results\r\n\r\n\r\n```\r\n\r\nimport java.util.concurrent.locks.ReentrantLock;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) throws InterruptedException {\r\n\r\n        for (int i = 0; i &lt; 10; i++) {\r\n\r\n\r\n            Resources resources = new Resources();\r\n            Thread userThread1 = new Increment(resources);\r\n            Thread userThread2 = new Decrement(resources);\r\n            userThread1.start();\r\n            userThread2.start();\r\n            userThread1.join();\r\n            userThread2.join();\r\n\r\n            System.out.println(resources.getCounter());\r\n        }\r\n    }\r\n\r\n    private static abstract class UserThread extends Thread {\r\n        protected Resources resources;\r\n\r\n        public UserThread(Resources resources) {\r\n            this.resources = resources;\r\n        }\r\n\r\n    }\r\n\r\n    private static class Increment extends UserThread {\r\n\r\n        public Increment(Resources resources) {\r\n            super(resources);\r\n        }\r\n\r\n        public void run() {\r\n            for (int i = 0; i &lt; 10000; i++) {\r\n                resources.increemnt();\r\n\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    private static class Decrement extends UserThread {\r\n\r\n        public Decrement(Resources resources) {\r\n            super(resources);\r\n        }\r\n\r\n        public void run() {\r\n\r\n            for (int i = 0; i &lt; 10000; i++) {\r\n                resources.decrement();\r\n\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    private static class Resources {\r\n\r\n        public ReentrantLock getLock() {\r\n            return lock;\r\n        }\r\n\r\n        private ReentrantLock lock = new ReentrantLock();\r\n\r\n        public int getCounter() {\r\n            return counter;\r\n        }\r\n\r\n        private int counter = 0;\r\n\r\n        public void increemnt() {\r\n            if (lock.tryLock()) {\r\n                try {\r\n                    counter++;\r\n                } finally {\r\n                    lock.unlock();\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        public void decrement() {\r\n            if (lock.tryLock()) {\r\n                try {\r\n                    counter--;\r\n                } finally {\r\n                    lock.unlock();\r\n                }\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n```\r\nExpected: 0,0,0,0,0,0,0,0,0,0\r\nActual output: its random for every run","title":"Is lock.tryLock() thread Safe?","body":"<p>I tried the thread race program with Synchronization,lock.lock() and lock.tryLock(),I found that with synchronization and lock.lock() works fine,but lock.tryLock() itself is not thread safe.This method is not able to acquire the lock and hence giving unexpected results</p>\n\n<pre><code>\nimport java.util.concurrent.locks.ReentrantLock;\n\npublic class Main {\n    public static void main(String[] args) throws InterruptedException {\n\n        for (int i = 0; i &lt; 10; i++) {\n\n\n            Resources resources = new Resources();\n            Thread userThread1 = new Increment(resources);\n            Thread userThread2 = new Decrement(resources);\n            userThread1.start();\n            userThread2.start();\n            userThread1.join();\n            userThread2.join();\n\n            System.out.println(resources.getCounter());\n        }\n    }\n\n    private static abstract class UserThread extends Thread {\n        protected Resources resources;\n\n        public UserThread(Resources resources) {\n            this.resources = resources;\n        }\n\n    }\n\n    private static class Increment extends UserThread {\n\n        public Increment(Resources resources) {\n            super(resources);\n        }\n\n        public void run() {\n            for (int i = 0; i &lt; 10000; i++) {\n                resources.increemnt();\n\n            }\n\n        }\n    }\n\n    private static class Decrement extends UserThread {\n\n        public Decrement(Resources resources) {\n            super(resources);\n        }\n\n        public void run() {\n\n            for (int i = 0; i &lt; 10000; i++) {\n                resources.decrement();\n\n            }\n\n        }\n    }\n\n    private static class Resources {\n\n        public ReentrantLock getLock() {\n            return lock;\n        }\n\n        private ReentrantLock lock = new ReentrantLock();\n\n        public int getCounter() {\n            return counter;\n        }\n\n        private int counter = 0;\n\n        public void increemnt() {\n            if (lock.tryLock()) {\n                try {\n                    counter++;\n                } finally {\n                    lock.unlock();\n                }\n\n            }\n        }\n\n        public void decrement() {\n            if (lock.tryLock()) {\n                try {\n                    counter--;\n                } finally {\n                    lock.unlock();\n                }\n\n            }\n        }\n    }\n\n}\n\n</code></pre>\n\n<p>Expected: 0,0,0,0,0,0,0,0,0,0\nActual output: its random for every run</p>\n"},{"tags":["java","spring","database","spring-boot","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":7788702,"reputation":836,"user_id":5892518,"display_name":"Harsh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662722360,"creation_date":1662722360,"answer_id":73661344,"question_id":73651283,"body_markdown":"I See this \r\n\r\n`java.lang.NoClassDefFoundError: org/hibernate/boot/model/naming/CamelCaseToUnderscoresNamingStrategy`\r\n\r\n`Caused by: java.lang.ClassNotFoundException: org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy`\r\n\r\n**Couple of solutions** \r\n\r\n1)  Check if you have this class `CamelCaseToUnderscoresNamingStrategy` under your `Maven dependencies -&gt; org.hibernate dependency -&gt; path boot/model/naming` \r\n\r\n2) If you can&#39;t locate that class, add a hibernate dependency with `version &gt;= 5.5.4` \r\n\r\n3) Check if this article helps https://stackoverflow.com/questions/71391152/spring-boot-application-and-hibernate-are-using-different-naming-strategies \r\n","title":"Can I run an empty spring boot application without getting an Error?","body":"<p>I See this</p>\n<p><code>java.lang.NoClassDefFoundError: org/hibernate/boot/model/naming/CamelCaseToUnderscoresNamingStrategy</code></p>\n<p><code>Caused by: java.lang.ClassNotFoundException: org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy</code></p>\n<p><strong>Couple of solutions</strong></p>\n<ol>\n<li><p>Check if you have this class <code>CamelCaseToUnderscoresNamingStrategy</code> under your <code>Maven dependencies -&gt; org.hibernate dependency -&gt; path boot/model/naming</code></p>\n</li>\n<li><p>If you can't locate that class, add a hibernate dependency with <code>version &gt;= 5.5.4</code></p>\n</li>\n<li><p>Check if this article helps <a href=\"https://stackoverflow.com/questions/71391152/spring-boot-application-and-hibernate-are-using-different-naming-strategies\">Spring boot application and hibernate are using different naming strategies</a></p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":25295509,"reputation":13,"user_id":19120735,"display_name":"Mandeep "},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662796889,"creation_date":1662796889,"answer_id":73670211,"question_id":73651283,"body_markdown":"I deleted the Hibernate folder from C:\\Users\\{User}\\.m2\\repository\\.\r\nThen I added below dependency in the pom file.\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n\t&lt;version&gt;5.5.4.Final&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nAlso add version to maven plugin -:\r\n```\r\n&lt;plugin&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n  **&lt;version&gt;${project.parent.version}&lt;/version&gt;**\r\n&lt;/plugin&gt;\r\n```\r\n\r\nDo the above steps if anyone gets the same Error.\r\n","title":"Can I run an empty spring boot application without getting an Error?","body":"<p>I deleted the Hibernate folder from C:\\Users{User}.m2\\repository.\nThen I added below dependency in the pom file.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n    &lt;version&gt;5.5.4.Final&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Also add version to maven plugin -:</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n  **&lt;version&gt;${project.parent.version}&lt;/version&gt;**\n&lt;/plugin&gt;\n</code></pre>\n<p>Do the above steps if anyone gets the same Error.</p>\n"}],"owner":{"account_id":25295509,"reputation":13,"user_id":19120735,"display_name":"Mandeep "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":618,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1662796889,"creation_date":1662649517,"question_id":73651283,"body_markdown":"I just Created this file from spring.initializer.\r\nIt is a brand new file. I am trying to run this because I have a previous project that have similar type of error. So I thought of making a new project and see if any error comes. below i the Error\r\n\r\n\r\n**My Error**\r\n\r\n```\r\n\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::                (v2.7.3)\r\n\r\n2022-09-08 20:15:36.021  INFO 8344 --- [           main] c.m.w.webproject.WebProjectApplication   : Starting WebProjectApplication using Java 17.0.4 on DESKTOP-4LDNK11 with PID 8344 (C:\\Users\\Lenovo\\Documents\\JAVA\\WebProject\\target\\classes started by Lenovo in C:\\Users\\Lenovo\\Documents\\JAVA\\WebProject)\r\n2022-09-08 20:15:36.027  INFO 8344 --- [           main] c.m.w.webproject.WebProjectApplication   : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2022-09-08 20:15:37.266  INFO 8344 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n2022-09-08 20:15:37.297  INFO 8344 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 11 ms. Found 0 JPA repository interfaces.\r\n2022-09-08 20:15:38.269  INFO 8344 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n2022-09-08 20:15:38.283  INFO 8344 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2022-09-08 20:15:38.284  INFO 8344 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.65]\r\n2022-09-08 20:15:38.489  INFO 8344 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2022-09-08 20:15:38.490  INFO 8344 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2328 ms\r\n2022-09-08 20:15:38.732  WARN 8344 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Factory method &#39;entityManagerFactory&#39; threw exception; nested exception is java.lang.NoClassDefFoundError: org/hibernate/boot/model/naming/CamelCaseToUnderscoresNamingStrategy\r\n2022-09-08 20:15:38.737  INFO 8344 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\n2022-09-08 20:15:38.755  INFO 8344 --- [           main] ConditionEvaluationReportLoggingListener : \r\n\r\nError starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n2022-09-08 20:15:38.789 ERROR 8344 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Factory method &#39;entityManagerFactory&#39; threw exception; nested exception is java.lang.NoClassDefFoundError: org/hibernate/boot/model/naming/CamelCaseToUnderscoresNamingStrategy\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658) ~[spring-beans-5.3.22.jar:5.3.22]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638) ~[spring-beans-5.3.22.jar:5.3.22]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.22.jar:5.3.22]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.22.jar:5.3.22]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.22.jar:5.3.22]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.22.jar:5.3.22]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.22.jar:5.3.22]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.22.jar:5.3.22]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.22.jar:5.3.22]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.22.jar:5.3.22]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.22.jar:5.3.22]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.22.jar:5.3.22]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.22.jar:5.3.22]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.3.jar:2.7.3]\r\n\tat com.mandeep.web.webproject.WebProjectApplication.main(WebProjectApplication.java:10) ~[classes/:na]\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Factory method &#39;entityManagerFactory&#39; threw exception; nested exception is java.lang.NoClassDefFoundError: org/hibernate/boot/model/naming/CamelCaseToUnderscoresNamingStrategy\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.3.22.jar:5.3.22]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653) ~[spring-beans-5.3.22.jar:5.3.22]\r\n\t... 19 common frames omitted\r\nCaused by: java.lang.NoClassDefFoundError: org/hibernate/boot/model/naming/CamelCaseToUnderscoresNamingStrategy\r\n\tat org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties$Naming.lambda$applyNamingStrategies$1(HibernateProperties.java:178) ~[spring-boot-autoconfigure-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties$Naming.lambda$applyNamingStrategy$2(HibernateProperties.java:187) ~[spring-boot-autoconfigure-2.7.3.jar:2.7.3]\r\n\tat java.base/java.util.HashMap.computeIfAbsent(HashMap.java:1220) ~[na:na]\r\n\tat org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties$Naming.applyNamingStrategy(HibernateProperties.java:187) ~[spring-boot-autoconfigure-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties$Naming.applyNamingStrategies(HibernateProperties.java:177) ~[spring-boot-autoconfigure-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties$Naming.access$000(HibernateProperties.java:146) ~[spring-boot-autoconfigure-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties.getAdditionalProperties(HibernateProperties.java:102) ~[spring-boot-autoconfigure-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties.determineHibernateProperties(HibernateProperties.java:95) ~[spring-boot-autoconfigure-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration.getVendorProperties(HibernateJpaConfiguration.java:132) ~[spring-boot-autoconfigure-2.7.3.jar:2.7.3]\r\n\tat org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.entityManagerFactory(JpaBaseConfiguration.java:132) ~[spring-boot-autoconfigure-2.7.3.jar:2.7.3]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.3.22.jar:5.3.22]\r\n\t... 20 common frames omitted\r\nCaused by: java.lang.ClassNotFoundException: org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\r\n\t... 35 common frames omitted\r\n\r\n\r\nProcess finished with exit code 1\r\n\r\n\r\n```\r\n**My POM.XML**\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.3&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.mandeep.web.webproject&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;WebProject&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;WebProject&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.validation&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;validation-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.0.1.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n**My properties file**\r\n```\r\nspring.datasource.url=jdbc:mysql://localhost:3306/WebProject\r\nspring.datasource.username=root\r\nspring.datasource.password=Sciman$@2569\r\nspring.jpa.show-sql=true\r\nspring.jpa.hibernate.ddl-auto=update\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5Dialect\r\n\r\n\r\nconnection.pool.initialPoolSize=1\r\nconnection.pool.minPoolSize=1\r\nconnection.pool.maxPoolSize=20\r\nconnection.pool.maxIdleTime=3000\r\n```\r\n**My Application File**\r\n```\r\npackage com.mandeep.web.webproject;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class WebProjectApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(WebProjectApplication.class, args);\r\n\t}\r\n\r\n}\r\n\r\n```","title":"Can I run an empty spring boot application without getting an Error?","body":"<p>I just Created this file from spring.initializer.\nIt is a brand new file. I am trying to run this because I have a previous project that have similar type of error. So I thought of making a new project and see if any error comes. below i the Error</p>\n<p><strong>My Error</strong></p>\n<pre><code>\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v2.7.3)\n\n2022-09-08 20:15:36.021  INFO 8344 --- [           main] c.m.w.webproject.WebProjectApplication   : Starting WebProjectApplication using Java 17.0.4 on DESKTOP-4LDNK11 with PID 8344 (C:\\Users\\Lenovo\\Documents\\JAVA\\WebProject\\target\\classes started by Lenovo in C:\\Users\\Lenovo\\Documents\\JAVA\\WebProject)\n2022-09-08 20:15:36.027  INFO 8344 --- [           main] c.m.w.webproject.WebProjectApplication   : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2022-09-08 20:15:37.266  INFO 8344 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2022-09-08 20:15:37.297  INFO 8344 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 11 ms. Found 0 JPA repository interfaces.\n2022-09-08 20:15:38.269  INFO 8344 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2022-09-08 20:15:38.283  INFO 8344 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2022-09-08 20:15:38.284  INFO 8344 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.65]\n2022-09-08 20:15:38.489  INFO 8344 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2022-09-08 20:15:38.490  INFO 8344 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2328 ms\n2022-09-08 20:15:38.732  WARN 8344 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Factory method 'entityManagerFactory' threw exception; nested exception is java.lang.NoClassDefFoundError: org/hibernate/boot/model/naming/CamelCaseToUnderscoresNamingStrategy\n2022-09-08 20:15:38.737  INFO 8344 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2022-09-08 20:15:38.755  INFO 8344 --- [           main] ConditionEvaluationReportLoggingListener : \n\nError starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2022-09-08 20:15:38.789 ERROR 8344 --- [           main] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Factory method 'entityManagerFactory' threw exception; nested exception is java.lang.NoClassDefFoundError: org/hibernate/boot/model/naming/CamelCaseToUnderscoresNamingStrategy\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.22.jar:5.3.22]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.22.jar:5.3.22]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.22.jar:5.3.22]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.3.jar:2.7.3]\n    at com.mandeep.web.webproject.WebProjectApplication.main(WebProjectApplication.java:10) ~[classes/:na]\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Factory method 'entityManagerFactory' threw exception; nested exception is java.lang.NoClassDefFoundError: org/hibernate/boot/model/naming/CamelCaseToUnderscoresNamingStrategy\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653) ~[spring-beans-5.3.22.jar:5.3.22]\n    ... 19 common frames omitted\nCaused by: java.lang.NoClassDefFoundError: org/hibernate/boot/model/naming/CamelCaseToUnderscoresNamingStrategy\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties$Naming.lambda$applyNamingStrategies$1(HibernateProperties.java:178) ~[spring-boot-autoconfigure-2.7.3.jar:2.7.3]\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties$Naming.lambda$applyNamingStrategy$2(HibernateProperties.java:187) ~[spring-boot-autoconfigure-2.7.3.jar:2.7.3]\n    at java.base/java.util.HashMap.computeIfAbsent(HashMap.java:1220) ~[na:na]\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties$Naming.applyNamingStrategy(HibernateProperties.java:187) ~[spring-boot-autoconfigure-2.7.3.jar:2.7.3]\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties$Naming.applyNamingStrategies(HibernateProperties.java:177) ~[spring-boot-autoconfigure-2.7.3.jar:2.7.3]\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties$Naming.access$000(HibernateProperties.java:146) ~[spring-boot-autoconfigure-2.7.3.jar:2.7.3]\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties.getAdditionalProperties(HibernateProperties.java:102) ~[spring-boot-autoconfigure-2.7.3.jar:2.7.3]\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties.determineHibernateProperties(HibernateProperties.java:95) ~[spring-boot-autoconfigure-2.7.3.jar:2.7.3]\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration.getVendorProperties(HibernateJpaConfiguration.java:132) ~[spring-boot-autoconfigure-2.7.3.jar:2.7.3]\n    at org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.entityManagerFactory(JpaBaseConfiguration.java:132) ~[spring-boot-autoconfigure-2.7.3.jar:2.7.3]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.3.22.jar:5.3.22]\n    ... 20 common frames omitted\nCaused by: java.lang.ClassNotFoundException: org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\n    ... 35 common frames omitted\n\n\nProcess finished with exit code 1\n\n\n</code></pre>\n<p><strong>My POM.XML</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.3&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.mandeep.web.webproject&lt;/groupId&gt;\n    &lt;artifactId&gt;WebProject&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;WebProject&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.validation&lt;/groupId&gt;\n            &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0.1.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p><strong>My properties file</strong></p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/WebProject\nspring.datasource.username=root\nspring.datasource.password=Sciman$@2569\nspring.jpa.show-sql=true\nspring.jpa.hibernate.ddl-auto=update\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5Dialect\n\n\nconnection.pool.initialPoolSize=1\nconnection.pool.minPoolSize=1\nconnection.pool.maxPoolSize=20\nconnection.pool.maxIdleTime=3000\n</code></pre>\n<p><strong>My Application File</strong></p>\n<pre><code>package com.mandeep.web.webproject;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class WebProjectApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(WebProjectApplication.class, args);\n    }\n\n}\n\n</code></pre>\n"},{"tags":["java","io"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1662829970,"post_id":73670046,"comment_id":130098844,"body_markdown":"By the way, Java has a [Files.copy](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/nio/file/Files.html#copy(java.nio.file.Path,java.nio.file.Path,java.nio.file.CopyOption...)) method.","body":"By the way, Java has a <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/nio/file/Files.html#copy(java.nio.file.Path,java.nio.file.Path,java.nio.file.CopyOption...)\" rel=\"nofollow noreferrer\">Files.copy</a> method."},{"owner":{"account_id":5745825,"reputation":11543,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"score":0,"creation_date":1679947359,"post_id":73670046,"comment_id":133809336,"body_markdown":"write(int) just read one byte; write(buffer) write with... buffer. write(int) can be converted to char if it&#39;s text: `(char)b`; but it&#39;s binary in your case so no sense.","body":"write(int) just read one byte; write(buffer) write with... buffer. write(int) can be converted to char if it&#39;s text: <code>(char)b</code>; but it&#39;s binary in your case so no sense."}],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1662796716,"creation_date":1662795113,"answer_id":73670072,"question_id":73670046,"body_markdown":"You&#39;re not writing out the first byte - you call `input.read()`, check that it&#39;s not -1, but then call `input.read()` again:\r\n\r\n```java\r\n// Broken code\r\nint byteRead = input.read();\r\nwhile (byteRead != -1) {\r\n    byteRead = input.read();\r\n    output.write(byteRead);\r\n    output.flush();\r\n}\r\n```\r\n\r\nIf you just move the next `input.read()` call to the end of the loop, it will work:\r\n\r\n```java\r\n// Working code with duplication\r\nint byteRead = input.read();\r\nwhile (byteRead != -1) {\r\n    output.write(byteRead);\r\n    output.flush();\r\n    byteRead = input.read();\r\n}\r\n```\r\n\r\nOr you could combine the &quot;read and test&quot; to avoid duplication:\r\n\r\n```java\r\n// Working code without duplication\r\nint byteRead;\r\nwhile ((byteRead = input.read()) != -1) {\r\n    output.write(byteRead);\r\n    output.flush();\r\n}\r\n```\r\n\r\nHowever, this is still a *very* inefficient way of copying a stream. Copying a chunk at a time, as per your first code, is much more efficient (or using the built-in `transferTo` method if you&#39;re using Java 9 or higher, as rostamn79 notes).","title":"IO Image reading and writing: Is writing array of bytes different from writing byte at a time using write(int b) method?","body":"<p>You're not writing out the first byte - you call <code>input.read()</code>, check that it's not -1, but then call <code>input.read()</code> again:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Broken code\nint byteRead = input.read();\nwhile (byteRead != -1) {\n    byteRead = input.read();\n    output.write(byteRead);\n    output.flush();\n}\n</code></pre>\n<p>If you just move the next <code>input.read()</code> call to the end of the loop, it will work:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Working code with duplication\nint byteRead = input.read();\nwhile (byteRead != -1) {\n    output.write(byteRead);\n    output.flush();\n    byteRead = input.read();\n}\n</code></pre>\n<p>Or you could combine the &quot;read and test&quot; to avoid duplication:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Working code without duplication\nint byteRead;\nwhile ((byteRead = input.read()) != -1) {\n    output.write(byteRead);\n    output.flush();\n}\n</code></pre>\n<p>However, this is still a <em>very</em> inefficient way of copying a stream. Copying a chunk at a time, as per your first code, is much more efficient (or using the built-in <code>transferTo</code> method if you're using Java 9 or higher, as rostamn79 notes).</p>\n"},{"tags":[],"owner":{"account_id":1782709,"reputation":332,"user_id":1625014,"accept_rate":60,"display_name":"rostamn739"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662795440,"creation_date":1662795440,"answer_id":73670086,"question_id":73670046,"body_markdown":"Baeldung.com provides information on stream.transferTo() method which does not incur an additional copy to Java heap\r\n\r\nhttps://www.baeldung.com/java-inputstream-to-outputstream\r\n\r\nExample code\r\n\r\n```java\r\n@Test\r\npublic void givenUsingJavaNine_whenCopyingInputStreamToOutputStream_thenCorrect() throws IOException {\r\n    String initialString = &quot;Hello World!&quot;;\r\n\r\n    try (InputStream inputStream = new ByteArrayInputStream(initialString.getBytes());\r\n         ByteArrayOutputStream targetStream = new ByteArrayOutputStream()) {\r\n        inputStream.transferTo(targetStream);\r\n\r\n        assertEquals(initialString, new String(targetStream.toByteArray()));\r\n    }\r\n}\r\n```\r\n\r\nSee how this `transferTo` is called with both streams as arguments","title":"IO Image reading and writing: Is writing array of bytes different from writing byte at a time using write(int b) method?","body":"<p>Baeldung.com provides information on stream.transferTo() method which does not incur an additional copy to Java heap</p>\n<p><a href=\"https://www.baeldung.com/java-inputstream-to-outputstream\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-inputstream-to-outputstream</a></p>\n<p>Example code</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void givenUsingJavaNine_whenCopyingInputStreamToOutputStream_thenCorrect() throws IOException {\n    String initialString = &quot;Hello World!&quot;;\n\n    try (InputStream inputStream = new ByteArrayInputStream(initialString.getBytes());\n         ByteArrayOutputStream targetStream = new ByteArrayOutputStream()) {\n        inputStream.transferTo(targetStream);\n\n        assertEquals(initialString, new String(targetStream.toByteArray()));\n    }\n}\n</code></pre>\n<p>See how this <code>transferTo</code> is called with both streams as arguments</p>\n"}],"owner":{"account_id":26293303,"reputation":3,"user_id":19959985,"display_name":"Mahmoud-310"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73670072,"answer_count":2,"score":0,"last_activity_date":1662796716,"creation_date":1662794749,"question_id":73670046,"body_markdown":"I am new to java IO and I tried to simply copy and paste a photo. I used two ways to achieve this the first works nicely but the second doesn&#39;t.\r\n\r\n This Code works fine.\r\n```java\r\ntry (BufferedInputStream input = new BufferedInputStream(new FileInputStream(&quot;photoOriginal.jpg&quot;));\r\n             BufferedOutputStream output =new BufferedOutputStream(new FileOutputStream(&quot;photoCopy.jpg&quot;))) {\r\n            try {\r\n                int n =0;\r\n                byte[] buf = new byte[4092];\r\n                while((n = input.read(buf))!=-1){\r\n                    output. Write(buf,0,n);\r\n                    output.flush();\r\n                }\r\n} \r\n  } catch (IOException e) {\r\n            System.out.println(&quot;Error: &quot; + e.getMessage());\r\n            e.printStackTrace();\r\n   }\r\n```\r\n\r\nBut the second doesn&#39;t work , after the program finished I find the copy File with the same exact size as the original but when trying to open it ,it shows format not supported error.\r\n```java\r\ntry (BufferedInputStream input = new BufferedInputStream(new FileInputStream(&quot;photoOriginal.jpg&quot;));\r\n             BufferedOutputStream output =new BufferedOutputStream(new FileOutputStream(&quot;photoCopy.jpg&quot;))) {\r\n            try {\r\n                int byteRead = input.read();\r\n                while (byteRead != -1) {\r\n                    byteRead = input.read();\r\n                    output.write(byteRead);\r\n                    output.flush();\r\n                }\r\n\r\n                }\r\n} \r\n  } catch (IOException e) {\r\n            System.out.println(&quot;Error: &quot; + e.getMessage());\r\n            e.printStackTrace();\r\n   }\r\n```\r\nI don&#39;t understand where the problem is, it seems that the 2 sample are doing the same thing.\r\nIs reading to and writing from byte array different from reading and writing single byte at a time ?\r\nIsn&#39;t writing int to a Stream with **write(int b)** method only writes the lowest 8 bits and vice versa as said in Documentation ?\r\n\r\n&gt;write  \r\npublic abstract void write(int b)  \r\n                    throws IOException  \r\nWrites the specified byte to this output stream. The general contract for write is that one byte is written to the output stream. The byte to be written is the **eight low-order bits** of the argument b. The 24 high-order bits of b are ignored.\r\n\r\nhope someone will help.\r\n\r\n\r\n","title":"IO Image reading and writing: Is writing array of bytes different from writing byte at a time using write(int b) method?","body":"<p>I am new to java IO and I tried to simply copy and paste a photo. I used two ways to achieve this the first works nicely but the second doesn't.</p>\n<p>This Code works fine.</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (BufferedInputStream input = new BufferedInputStream(new FileInputStream(&quot;photoOriginal.jpg&quot;));\n             BufferedOutputStream output =new BufferedOutputStream(new FileOutputStream(&quot;photoCopy.jpg&quot;))) {\n            try {\n                int n =0;\n                byte[] buf = new byte[4092];\n                while((n = input.read(buf))!=-1){\n                    output. Write(buf,0,n);\n                    output.flush();\n                }\n} \n  } catch (IOException e) {\n            System.out.println(&quot;Error: &quot; + e.getMessage());\n            e.printStackTrace();\n   }\n</code></pre>\n<p>But the second doesn't work , after the program finished I find the copy File with the same exact size as the original but when trying to open it ,it shows format not supported error.</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (BufferedInputStream input = new BufferedInputStream(new FileInputStream(&quot;photoOriginal.jpg&quot;));\n             BufferedOutputStream output =new BufferedOutputStream(new FileOutputStream(&quot;photoCopy.jpg&quot;))) {\n            try {\n                int byteRead = input.read();\n                while (byteRead != -1) {\n                    byteRead = input.read();\n                    output.write(byteRead);\n                    output.flush();\n                }\n\n                }\n} \n  } catch (IOException e) {\n            System.out.println(&quot;Error: &quot; + e.getMessage());\n            e.printStackTrace();\n   }\n</code></pre>\n<p>I don't understand where the problem is, it seems that the 2 sample are doing the same thing.\nIs reading to and writing from byte array different from reading and writing single byte at a time ?\nIsn't writing int to a Stream with <strong>write(int b)</strong> method only writes the lowest 8 bits and vice versa as said in Documentation ?</p>\n<blockquote>\n<p>write<br />\npublic abstract void write(int b)<br />\nthrows IOException<br />\nWrites the specified byte to this output stream. The general contract for write is that one byte is written to the output stream. The byte to be written is the <strong>eight low-order bits</strong> of the argument b. The 24 high-order bits of b are ignored.</p>\n</blockquote>\n<p>hope someone will help.</p>\n"},{"tags":["java","spring-boot","design-patterns","database-design","entity"],"comments":[{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1662666195,"post_id":73653774,"comment_id":130065076,"body_markdown":"1.  It&#39;s reasonable to expect that the application will do some date checking so that it&#39;s not all up to the database.  Having said that, you can create a `BookCar` row for each day of the booking.  2.  Assuming 200 cars in the inventory, all rented for 50 days, you&#39;d have 10,000 rows in your `BookCar` table.  That&#39;s not a large table.","body":"1.  It&#39;s reasonable to expect that the application will do some date checking so that it&#39;s not all up to the database.  Having said that, you can create a <code>BookCar</code> row for each day of the booking.  2.  Assuming 200 cars in the inventory, all rented for 50 days, you&#39;d have 10,000 rows in your <code>BookCar</code> table.  That&#39;s not a large table."},{"owner":{"account_id":17824321,"reputation":618,"user_id":12945919,"display_name":"Mayank Kumar Thakur"},"score":0,"creation_date":1662725672,"post_id":73653774,"comment_id":130078410,"body_markdown":"Hi @GilbertLeBlanc, thanks for commenting. For 1 booking of Car A for 50 days, we are adding 50 records in table BookCar and then there won&#39;t be any write operation for Car A for the next 50 days. Only read operations will be there. And if one user wants to book car A, then we have to search only 1 record i.e. composite (car A id, Date) that&#39;s it. Is it a good approach?","body":"Hi @GilbertLeBlanc, thanks for commenting. For 1 booking of Car A for 50 days, we are adding 50 records in table BookCar and then there won&#39;t be any write operation for Car A for the next 50 days. Only read operations will be there. And if one user wants to book car A, then we have to search only 1 record i.e. composite (car A id, Date) that&#39;s it. Is it a good approach?"},{"owner":{"account_id":4151902,"reputation":14863,"user_id":3404097,"display_name":"philipxy"},"score":2,"creation_date":1662794290,"post_id":73653774,"comment_id":130092498,"body_markdown":"Please ask 1 (specific researched non-duplicate) question. Please clarify via edits, not ccmments. [ask] [Help] What parts of this are you able to do?","body":"Please ask 1 (specific researched non-duplicate) question. Please clarify via edits, not ccmments. <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> <a href=\"https://stackoverflow.com/help\">Help center</a> What parts of this are you able to do?"}],"answers":[{"tags":[],"owner":{"account_id":1809965,"reputation":36736,"user_id":1646240,"accept_rate":91,"display_name":"StepUp"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662796513,"creation_date":1662702582,"answer_id":73657812,"question_id":73653774,"body_markdown":"In my vieq, we can use just two sql tables for booking. This is an example how classes can be looked based on sql tables: \r\n\r\n\tpublic class Car {\r\n\t\tprivate long id;\r\n\t\tprivate Type type;\t\t\r\n\t\t// other code is omitted for the brevity\r\n\t}\r\n\r\n\tpublic class Booking {\r\n\t\tprivate long id;\r\n\t\tprivate User userId;\r\n\t\tprivate long carId;\r\n\t\tprivate Date bookingStartDay; // day of booking\r\n\t\tprivate Date bookingFinishDay; // when user should return car\r\n\t\t\r\n\t\t// other code is omitted for the brevity\r\n\t}\r\n\t\r\n## What should we do when user book a car?\r\n\r\n**Case 1: There is no booking in booking table by `carId`**\r\n\r\nWe will just insert row in `Booking` table with date start (column `bookingStartDay`) and finish date (column `bookingFinishDay`). So if user book car `car_1` from 1 october till 3 october, then we need to insert the following row in `Booking` table:\r\n  \r\n```\r\nBooking:\r\n\tid: 1\r\n\tuserId: 1\r\n\tcarId: 1\r\n\tbookingStartDay: 2022-10-01\r\n\tbookingFinishDay: 2022-10-03\r\n```\r\n\t\r\nWe will **not add** any additional 3 rows in `Booking`\t table.\r\n\t\r\n  \r\n**Case 2: If there are bookings in booking table by `carId`**\r\n\r\n  We are running sql query which will check whether user&#39;s desired date is within `bookingStartDay` and `bookingFinishDay`. \r\n\r\nFor example, user want to book a car with `id = 1` from  1 October to 3 october, then [you can run a query][1] to check whether your `RangeFrom` and `RangeTill` are within date range between two dates `bookingStartDay` and `bookingFinishDay`:\r\n\r\n\tSELECT * FROM Booking \r\n\tWHERE NOT (From_date &gt; @RangeTill OR To_date &lt; @RangeFrom)\r\n        AND carId = 1\r\n\t\r\nThen you can return a message to user whether the car is available to be booked based on result of your query.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/14208958/select-data-from-date-range-between-two-dates","title":"LLD Car Rental Application SpringBoot | How to reserve a car for particular days so that other users can&#39;t re-book it for same period","body":"<p>In my vieq, we can use just two sql tables for booking. This is an example how classes can be looked based on sql tables:</p>\n<pre><code>public class Car {\n    private long id;\n    private Type type;      \n    // other code is omitted for the brevity\n}\n\npublic class Booking {\n    private long id;\n    private User userId;\n    private long carId;\n    private Date bookingStartDay; // day of booking\n    private Date bookingFinishDay; // when user should return car\n    \n    // other code is omitted for the brevity\n}\n</code></pre>\n<h2>What should we do when user book a car?</h2>\n<p><strong>Case 1: There is no booking in booking table by <code>carId</code></strong></p>\n<p>We will just insert row in <code>Booking</code> table with date start (column <code>bookingStartDay</code>) and finish date (column <code>bookingFinishDay</code>). So if user book car <code>car_1</code> from 1 october till 3 october, then we need to insert the following row in <code>Booking</code> table:</p>\n<pre><code>Booking:\n    id: 1\n    userId: 1\n    carId: 1\n    bookingStartDay: 2022-10-01\n    bookingFinishDay: 2022-10-03\n</code></pre>\n<p>We will <strong>not add</strong> any additional 3 rows in <code>Booking</code>   table.</p>\n<p><strong>Case 2: If there are bookings in booking table by <code>carId</code></strong></p>\n<p>We are running sql query which will check whether user's desired date is within <code>bookingStartDay</code> and <code>bookingFinishDay</code>.</p>\n<p>For example, user want to book a car with <code>id = 1</code> from  1 October to 3 october, then <a href=\"https://stackoverflow.com/questions/14208958/select-data-from-date-range-between-two-dates\">you can run a query</a> to check whether your <code>RangeFrom</code> and <code>RangeTill</code> are within date range between two dates <code>bookingStartDay</code> and <code>bookingFinishDay</code>:</p>\n<pre><code>SELECT * FROM Booking \nWHERE NOT (From_date &gt; @RangeTill OR To_date &lt; @RangeFrom)\n    AND carId = 1\n</code></pre>\n<p>Then you can return a message to user whether the car is available to be booked based on result of your query.</p>\n"}],"owner":{"account_id":17824321,"reputation":618,"user_id":12945919,"display_name":"Mayank Kumar Thakur"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":461,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":73657812,"answer_count":1,"score":0,"last_activity_date":1662796513,"creation_date":1662662708,"question_id":73653774,"body_markdown":"I am trying to solve a low level design problem for car rental application. I have created below models/entities.\r\n\r\n```java\r\npublic class Car{\r\n    private long id;\r\n    private Type type;\r\n    private String licenseNum;\r\n    private Color color;\r\n    private Location location;\r\n    //other details\r\n    //Color is enum for values RED, WHITE etc\r\n    //TYPE is enum for values SEDAN, SUV, HATCHBACK etc\r\n    //Location is another class that contains location related details\r\n}\r\n\r\npublic class Booking{\r\n    private long id;\r\n    private Date bookingStartDay;//day of booking\r\n    private int bookingDays;//number of days of the booking, maximum value 50\r\n    private User userId;\r\n    private Location pickUpLoc;\r\n    private Location dropLoc;\r\n    //User is another entity having user details such as id, name, address etc.\r\n}\r\n```\r\nA user can book a car for upto 50 days. Now, suppose one user is booking a car A from 1st Oct, 2022 for 3 days (i.e till 3rd Oct, 2022). To make sure other users can&#39;t book car A for 1st Oct, 2022. I have created a class BookCar which will use **carId** from entity Car and **bookingStartDay** from entity Booking as its composite key.\r\n\r\n```java\r\npublic class BookCar{\r\n    private long carId;\r\n    private Date bookingStartDay;\r\n    //carId and bookingStartDay forms a composite key;\r\n    private User user;\r\n    private BookingStatus status;\r\n    //BookingStatus is an enum with values CANCELLED, RESERVED\r\n}\r\n```\r\nSo, booking status for composite key (carId for A,01-10-2022) will be RESERVED in BookCar entity.\r\n\r\nBut there is a problem. Car A is booked from 1st Oct, 2022 to 3rd Oct, 2022. But if another user tries to book Car A for 2nd Oct, 2022. It wil shown as available because in BookCar, car A is reserved for (carId for A,01-10-2022) only not for 1st Oct, 2022 to 3rd Oct, 2022.\r\n\r\nSo, how can I store range of days in my BookCar table. So, that no other user can book the car for reserved days.\r\n\r\nI have other questions.\r\n1. Is there any other way to reserve the car for a range of days so that other users can&#39;t book it?\r\n2. For car A booking from 1st Oct, 2022 to 3rd Oct, 2022, I add records for (carId for A,01-10-2022), (carId for A,02-10-2022), (carId for A,013-10-2022) in BookCar table. Then, for booking of maximum 50 days for a car, 50 rows will be added in BookCar table or simply 50 write operations will be performed on this table. Is it good a approach to achieve it?\r\nI am using MySQL database for this application.\r\n\r\nPlease try to answer from interview perspective.\r\n","title":"LLD Car Rental Application SpringBoot | How to reserve a car for particular days so that other users can&#39;t re-book it for same period","body":"<p>I am trying to solve a low level design problem for car rental application. I have created below models/entities.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Car{\n    private long id;\n    private Type type;\n    private String licenseNum;\n    private Color color;\n    private Location location;\n    //other details\n    //Color is enum for values RED, WHITE etc\n    //TYPE is enum for values SEDAN, SUV, HATCHBACK etc\n    //Location is another class that contains location related details\n}\n\npublic class Booking{\n    private long id;\n    private Date bookingStartDay;//day of booking\n    private int bookingDays;//number of days of the booking, maximum value 50\n    private User userId;\n    private Location pickUpLoc;\n    private Location dropLoc;\n    //User is another entity having user details such as id, name, address etc.\n}\n</code></pre>\n<p>A user can book a car for upto 50 days. Now, suppose one user is booking a car A from 1st Oct, 2022 for 3 days (i.e till 3rd Oct, 2022). To make sure other users can't book car A for 1st Oct, 2022. I have created a class BookCar which will use <strong>carId</strong> from entity Car and <strong>bookingStartDay</strong> from entity Booking as its composite key.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class BookCar{\n    private long carId;\n    private Date bookingStartDay;\n    //carId and bookingStartDay forms a composite key;\n    private User user;\n    private BookingStatus status;\n    //BookingStatus is an enum with values CANCELLED, RESERVED\n}\n</code></pre>\n<p>So, booking status for composite key (carId for A,01-10-2022) will be RESERVED in BookCar entity.</p>\n<p>But there is a problem. Car A is booked from 1st Oct, 2022 to 3rd Oct, 2022. But if another user tries to book Car A for 2nd Oct, 2022. It wil shown as available because in BookCar, car A is reserved for (carId for A,01-10-2022) only not for 1st Oct, 2022 to 3rd Oct, 2022.</p>\n<p>So, how can I store range of days in my BookCar table. So, that no other user can book the car for reserved days.</p>\n<p>I have other questions.</p>\n<ol>\n<li>Is there any other way to reserve the car for a range of days so that other users can't book it?</li>\n<li>For car A booking from 1st Oct, 2022 to 3rd Oct, 2022, I add records for (carId for A,01-10-2022), (carId for A,02-10-2022), (carId for A,013-10-2022) in BookCar table. Then, for booking of maximum 50 days for a car, 50 rows will be added in BookCar table or simply 50 write operations will be performed on this table. Is it good a approach to achieve it?\nI am using MySQL database for this application.</li>\n</ol>\n<p>Please try to answer from interview perspective.</p>\n"},{"tags":["java","spring-webflux","project-reactor","reactor-netty"],"answers":[{"tags":[],"owner":{"account_id":14492583,"reputation":701,"user_id":10468291,"display_name":"Patrick Hooijer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662796247,"creation_date":1662796247,"answer_id":73670151,"question_id":73667748,"body_markdown":"You are almost there. Your `retryWhen` is configured correctly, and your `doOnNext` handles the cache correctly.\r\n\r\nTo handle errors, you can use [`Flux.doOnError`][1], which works similar as `doOnNext`.\r\n\r\n\r\n  [1]: https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Flux.html#doOnError-java.util.function.Consumer-","title":"Correct way of handling errors with Spring WebClient (Reactor HTTPClient)","body":"<p>You are almost there. Your <code>retryWhen</code> is configured correctly, and your <code>doOnNext</code> handles the cache correctly.</p>\n<p>To handle errors, you can use <a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Flux.html#doOnError-java.util.function.Consumer-\" rel=\"nofollow noreferrer\"><code>Flux.doOnError</code></a>, which works similar as <code>doOnNext</code>.</p>\n"}],"owner":{"account_id":16101295,"reputation":69,"user_id":11621988,"display_name":"Mk Domain"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":883,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73670151,"answer_count":1,"score":0,"last_activity_date":1662796247,"creation_date":1662759645,"question_id":73667748,"body_markdown":"I have a basic application that downloads data from a website, but the request often returns 404 not found errors or a `PrematureCloseException`. My question is how can I implement my client in a way that it automatically retries if it encounters a `PrematureCloseException`, but allows to handle 404 later in the stream while also setting a cache when the request is successful.\r\n\r\nCurrent code:\r\n```java\r\n httpClient.get()\r\n            .uri(URL)\r\n            .retrieve()\r\n            .bodyToMono(ByteArrayResource.class)\r\n//Retry until the server responds &quot;correctly&quot;\r\n            .retryWhen(Retry.indefinitely().filter(t -&gt; t instanceof PrematureCloseException))\r\n            .map(ByteArrayResource::getByteArray)\r\n            .doOnNext(next -&gt; cache.set(next)) //Set the cache only if the request is successful\r\n\r\n//Passed to another method\r\n            .ifError(error -&gt; logger.error(&quot;Error encountered {}&quot;, error)) //Somehow handle all exceptions (not the PrematureCloseExceptions)\r\n            .subscribe(data -&gt; {\r\n               //Successful request\r\n            })","title":"Correct way of handling errors with Spring WebClient (Reactor HTTPClient)","body":"<p>I have a basic application that downloads data from a website, but the request often returns 404 not found errors or a <code>PrematureCloseException</code>. My question is how can I implement my client in a way that it automatically retries if it encounters a <code>PrematureCloseException</code>, but allows to handle 404 later in the stream while also setting a cache when the request is successful.</p>\n<p>Current code:</p>\n<pre class=\"lang-java prettyprint-override\"><code> httpClient.get()\n            .uri(URL)\n            .retrieve()\n            .bodyToMono(ByteArrayResource.class)\n//Retry until the server responds &quot;correctly&quot;\n            .retryWhen(Retry.indefinitely().filter(t -&gt; t instanceof PrematureCloseException))\n            .map(ByteArrayResource::getByteArray)\n            .doOnNext(next -&gt; cache.set(next)) //Set the cache only if the request is successful\n\n//Passed to another method\n            .ifError(error -&gt; logger.error(&quot;Error encountered {}&quot;, error)) //Somehow handle all exceptions (not the PrematureCloseExceptions)\n            .subscribe(data -&gt; {\n               //Successful request\n            })\n</code></pre>\n"},{"tags":["java","generics","java-stream","type-inference","collectors"],"comments":[{"owner":{"account_id":20780824,"reputation":29180,"user_id":15261315,"display_name":"Chris"},"score":0,"creation_date":1662754566,"post_id":73667078,"comment_id":130087462,"body_markdown":"If you have s stream, why collect it into a List, then turn that into a stream immediately? This strikes me as a bit of an XY problem.","body":"If you have s stream, why collect it into a List, then turn that into a stream immediately? This strikes me as a bit of an XY problem."},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1662754677,"post_id":73667078,"comment_id":130087486,"body_markdown":"&quot;// if this line commented it doesn&#39;t compile&quot; Because it is not a statement :) \nplain 1+1 wont compile neither, but int i=1+1 will;","body":"&quot;// if this line commented it doesn&#39;t compile&quot; Because it is not a statement :)  plain 1+1 wont compile neither, but int i=1+1 will;"},{"owner":{"account_id":24515002,"reputation":179,"user_id":18428894,"display_name":"bbKing"},"score":1,"creation_date":1662755178,"post_id":73667078,"comment_id":130087610,"body_markdown":"@Antoniossss I don&#39;t think so. `input.stream().collect(Collectors.toSet())` will compile just fine and I can call `stream()` on the resulting set without assigning it to a set beforehand","body":"@Antoniossss I don&#39;t think so. <code>input.stream().collect(Collectors.toSet())</code> will compile just fine and I can call <code>stream()</code> on the resulting set without assigning it to a set beforehand"},{"owner":{"account_id":24515002,"reputation":179,"user_id":18428894,"display_name":"bbKing"},"score":0,"creation_date":1662755289,"post_id":73667078,"comment_id":130087638,"body_markdown":"@Chris That is exactly what I am trying to do: not store it in an intermediate `List&lt;List&lt;String&gt;&gt;`","body":"@Chris That is exactly what I am trying to do: not store it in an intermediate <code>List&lt;List&lt;String&gt;&gt;</code>"}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1662755980,"creation_date":1662755647,"answer_id":73667249,"question_id":73667078,"body_markdown":"Functions in Java have no type by itself. They are *poly expressions*. It means their type should be inferred from the context. It applies for all arguments of the `Collector.of()`.\r\n\r\n`List&lt;List&lt;String&gt;&gt; output` - provides the [target type](https://docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html#target_types), without it, type inference mechanism has no clue what type of object your Collector is expected to produce.\r\n\r\nTo make the code compile you can use the *type-witness* while calling `Collector.&lt;all the types of functions used in collector here&gt;of()`.\r\n\r\nThe simplest way to make this stream-statement compile is to provide explicit types of arguments of the *accumulator*:\r\n\r\n```\r\n(List&lt;List&lt;String&gt;&gt; accumulator, String item) -&gt;\r\n     {\r\n          ...\r\n     },\r\n```","title":"Java Stream - Type Inference issue inside a Collector","body":"<p>Functions in Java have no type by itself. They are <em>poly expressions</em>. It means their type should be inferred from the context. It applies for all arguments of the <code>Collector.of()</code>.</p>\n<p><code>List&lt;List&lt;String&gt;&gt; output</code> - provides the <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html#target_types\" rel=\"nofollow noreferrer\">target type</a>, without it, type inference mechanism has no clue what type of object your Collector is expected to produce.</p>\n<p>To make the code compile you can use the <em>type-witness</em> while calling <code>Collector.&lt;all the types of functions used in collector here&gt;of()</code>.</p>\n<p>The simplest way to make this stream-statement compile is to provide explicit types of arguments of the <em>accumulator</em>:</p>\n<pre><code>(List&lt;List&lt;String&gt;&gt; accumulator, String item) -&gt;\n     {\n          ...\n     },\n</code></pre>\n"}],"owner":{"account_id":24515002,"reputation":179,"user_id":18428894,"display_name":"bbKing"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73667249,"answer_count":1,"score":2,"last_activity_date":1662796224,"creation_date":1662754365,"question_id":73667078,"body_markdown":"I have a similar use case to [this][1] stack overflow question and was trying to use it without storing the result in a `List&lt;List&lt;String&gt;&gt;` but instead call `stream()` on it.\r\n\r\nI have a strange compile time error if I don&#39;t assign it to `List&lt;List&lt;String&gt;&gt;` because of type mismatch. To reproduce the issue, just comment out the assignment to output.\r\n\r\nThe question is why is this compile error occurs? And how to fix it?\r\n\r\n```\r\npublic static void main(String args[]) {\r\n    List&lt;String&gt; input = Arrays.asList(&quot;RED&quot;, &quot;RED&quot;, &quot;BLUE&quot;, &quot;BLUE&quot;, &quot;BLUE&quot;, &quot;BLUE&quot;, &quot;RED&quot;, &quot;RED&quot;);\r\n    List&lt;List&lt;String&gt;&gt; output =  // if this line commented it doesn&#39;t compile\r\n        input.stream()\r\n            .collect(Collector.of(\r\n                ArrayList::new,\r\n                (accumulator, item) -&gt; {\r\n                    if (accumulator.isEmpty()) {\r\n                        List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n                        list.add(item);\r\n                        accumulator.add(list);\r\n                    } else {\r\n                        List&lt;String&gt; last = accumulator.get(accumulator.size() - 1);\r\n                        if (last.isEmpty() || last.get(0).equals(item)) {\r\n                            last.add(item);\r\n                        } else {\r\n                            List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n                            list.add(item);\r\n                            accumulator.add(list);\r\n                        }\r\n                    }\r\n                },\r\n                (left, right) -&gt; {\r\n                    left.addAll(right);\r\n                    return left;\r\n                }\r\n            ));\r\n}\r\n```\r\n\r\nMy idea was to use it like:\r\n\r\n```\r\ninput.stream()\r\n    .collect(Collector.of(.....))\r\n    .stream()\r\n    .(and do something else)\r\n```\r\n\r\n  [1]: https://stackoverflow.com/questions/60568485/split-a-list-into-sublists-by-grouping-only-repeated-elements-that-are-adjac","title":"Java Stream - Type Inference issue inside a Collector","body":"<p>I have a similar use case to <a href=\"https://stackoverflow.com/questions/60568485/split-a-list-into-sublists-by-grouping-only-repeated-elements-that-are-adjac\">this</a> stack overflow question and was trying to use it without storing the result in a <code>List&lt;List&lt;String&gt;&gt;</code> but instead call <code>stream()</code> on it.</p>\n<p>I have a strange compile time error if I don't assign it to <code>List&lt;List&lt;String&gt;&gt;</code> because of type mismatch. To reproduce the issue, just comment out the assignment to output.</p>\n<p>The question is why is this compile error occurs? And how to fix it?</p>\n<pre><code>public static void main(String args[]) {\n    List&lt;String&gt; input = Arrays.asList(&quot;RED&quot;, &quot;RED&quot;, &quot;BLUE&quot;, &quot;BLUE&quot;, &quot;BLUE&quot;, &quot;BLUE&quot;, &quot;RED&quot;, &quot;RED&quot;);\n    List&lt;List&lt;String&gt;&gt; output =  // if this line commented it doesn't compile\n        input.stream()\n            .collect(Collector.of(\n                ArrayList::new,\n                (accumulator, item) -&gt; {\n                    if (accumulator.isEmpty()) {\n                        List&lt;String&gt; list = new ArrayList&lt;&gt;();\n                        list.add(item);\n                        accumulator.add(list);\n                    } else {\n                        List&lt;String&gt; last = accumulator.get(accumulator.size() - 1);\n                        if (last.isEmpty() || last.get(0).equals(item)) {\n                            last.add(item);\n                        } else {\n                            List&lt;String&gt; list = new ArrayList&lt;&gt;();\n                            list.add(item);\n                            accumulator.add(list);\n                        }\n                    }\n                },\n                (left, right) -&gt; {\n                    left.addAll(right);\n                    return left;\n                }\n            ));\n}\n</code></pre>\n<p>My idea was to use it like:</p>\n<pre><code>input.stream()\n    .collect(Collector.of(.....))\n    .stream()\n    .(and do something else)\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","spring-boot","spring-security"],"comments":[{"owner":{"account_id":1621503,"reputation":1451,"user_id":1497944,"display_name":"Kedar Joshi"},"score":0,"creation_date":1540038945,"post_id":52904227,"comment_id":92722040,"body_markdown":"Can you try disabling the line `.authenticationEntryPoint(this.jwtAuthenticationEntryPoint)` ? Usually entry point methods also return 401 status.","body":"Can you try disabling the line <code>.authenticationEntryPoint(this.jwtAuthenticationEntryPoint)</code> ? Usually entry point methods also return 401 status."},{"owner":{"account_id":9675677,"reputation":8158,"user_id":10257611,"display_name":"Ayoub k"},"score":0,"creation_date":1540242852,"post_id":52904227,"comment_id":92784856,"body_markdown":"it gives me 403 forbidden","body":"it gives me 403 forbidden"},{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1540282886,"post_id":52904227,"comment_id":92796649,"body_markdown":"Show your implementation of `JwtAuthenticationFilter`.","body":"Show your implementation of <code>JwtAuthenticationFilter</code>."},{"owner":{"account_id":989600,"reputation":30745,"user_id":1007273,"display_name":"hovanessyan"},"score":0,"creation_date":1540311042,"post_id":52904227,"comment_id":92814799,"body_markdown":"@Ayoubk Your config looks ok - can you try with removing the HttpMethod.POST and make it antMatchers(&quot;/api/auth/**&quot;) just for testing purposes. Can you confirm you&#39;re sending the correct HTTP request types from Postman when invoking the REST endpoints?","body":"@Ayoubk Your config looks ok - can you try with removing the HttpMethod.POST and make it antMatchers(&quot;/api/auth/**&quot;) just for testing purposes. Can you confirm you&#39;re sending the correct HTTP request types from Postman when invoking the REST endpoints?"},{"owner":{"account_id":4007082,"reputation":23327,"user_id":3301492,"display_name":"Boris"},"score":0,"creation_date":1540572158,"post_id":52904227,"comment_id":92929401,"body_markdown":"Please add the `signin` request to the question.","body":"Please add the <code>signin</code> request to the question."}],"answers":[{"tags":[],"owner":{"account_id":8673767,"reputation":830,"user_id":7103694,"accept_rate":43,"display_name":"shadow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1540350961,"creation_date":1540350961,"answer_id":52960594,"question_id":52904227,"body_markdown":"The last time i did it i remember the order is important.\r\n\r\n    @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http\r\n                    .cors()\r\n                    .and()\r\n                    .csrf()\r\n                    .disable()\r\n                    .exceptionHandling()\r\n                    .authenticationEntryPoint(this.jwtAuthenticationEntryPoint)\r\n                    .and()\r\n                    .sessionManagement()\r\n                    .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                    .and()\r\n                    .authorizeRequests()\r\n                    .antMatchers(HttpMethod.POST, &quot;/api/auth/**&quot;)\r\n                    .permitAll()\r\n                    .antMatchers(&quot;/&quot;,\r\n                            &quot;/favicon.ico&quot;,\r\n                            &quot;/**/*.png&quot;,\r\n                            &quot;/**/*.gif&quot;,\r\n                            &quot;/**/*.svg&quot;,\r\n                            &quot;/**/*.jpg&quot;,\r\n                            &quot;/**/*.html&quot;,\r\n                            &quot;/**/*.css&quot;,\r\n                            &quot;/**/*.js&quot;)\r\n                    .permitAll()                   \r\n                    .anyRequest()\r\n                    .authenticated();\r\n    \r\n            // Add our custom JWT security filter\r\n            http.addFilterBefore(jwtAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class);\r\n    \r\n        }","title":"Spring security 401 Unauthorized even with permitAll","body":"<p>The last time i did it i remember the order is important.</p>\n\n<pre><code>@Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                .cors()\n                .and()\n                .csrf()\n                .disable()\n                .exceptionHandling()\n                .authenticationEntryPoint(this.jwtAuthenticationEntryPoint)\n                .and()\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .authorizeRequests()\n                .antMatchers(HttpMethod.POST, \"/api/auth/**\")\n                .permitAll()\n                .antMatchers(\"/\",\n                        \"/favicon.ico\",\n                        \"/**/*.png\",\n                        \"/**/*.gif\",\n                        \"/**/*.svg\",\n                        \"/**/*.jpg\",\n                        \"/**/*.html\",\n                        \"/**/*.css\",\n                        \"/**/*.js\")\n                .permitAll()                   \n                .anyRequest()\n                .authenticated();\n\n        // Add our custom JWT security filter\n        http.addFilterBefore(jwtAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class);\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12971753,"reputation":339,"user_id":9377239,"display_name":"Kirill Shiryaev"},"down_vote_count":2,"up_vote_count":9,"is_accepted":true,"score":7,"last_activity_date":1540380507,"creation_date":1540380507,"answer_id":52967823,"question_id":52904227,"body_markdown":"I had the same issue, not sure, but I think you need this order:\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http\r\n                .authorizeRequests()\r\n                .antMatchers(HttpMethod.POST, &quot;/api/auth/**&quot;)\r\n                .permitAll()\r\n                .antMatchers(&quot;/&quot;,\r\n                        &quot;/favicon.ico&quot;,\r\n                        &quot;/**/*.png&quot;,\r\n                        &quot;/**/*.gif&quot;,\r\n                        &quot;/**/*.svg&quot;,\r\n                        &quot;/**/*.jpg&quot;,\r\n                        &quot;/**/*.html&quot;,\r\n                        &quot;/**/*.css&quot;,\r\n                        &quot;/**/*.js&quot;)\r\n                .permitAll()                   \r\n                .anyRequest()\r\n                .authenticated()\r\n                .and()\r\n                .cors()\r\n                .and()\r\n                .exceptionHandling()\r\n                .authenticationEntryPoint(this.jwtAuthenticationEntryPoint)\r\n                .and()\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                .and()\r\n                .csrf()\r\n                .disable();\r\n\r\n        // Add our custom JWT security filter\r\n        http.addFilterBefore(jwtAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class);\r\n\r\n    }","title":"Spring security 401 Unauthorized even with permitAll","body":"<p>I had the same issue, not sure, but I think you need this order:</p>\n\n<pre><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http\n            .authorizeRequests()\n            .antMatchers(HttpMethod.POST, \"/api/auth/**\")\n            .permitAll()\n            .antMatchers(\"/\",\n                    \"/favicon.ico\",\n                    \"/**/*.png\",\n                    \"/**/*.gif\",\n                    \"/**/*.svg\",\n                    \"/**/*.jpg\",\n                    \"/**/*.html\",\n                    \"/**/*.css\",\n                    \"/**/*.js\")\n            .permitAll()                   \n            .anyRequest()\n            .authenticated()\n            .and()\n            .cors()\n            .and()\n            .exceptionHandling()\n            .authenticationEntryPoint(this.jwtAuthenticationEntryPoint)\n            .and()\n            .sessionManagement()\n            .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n            .and()\n            .csrf()\n            .disable();\n\n    // Add our custom JWT security filter\n    http.addFilterBefore(jwtAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class);\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10944718,"reputation":826,"user_id":8043253,"display_name":"karans123"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1540640296,"creation_date":1540640296,"answer_id":53021520,"question_id":52904227,"body_markdown":"Your configuration is not working due to order in which the **antMatcher** is evaluated\r\n\r\n     .and()\r\n     .authorizeRequests()\r\n     .antMatchers(&quot;/&quot;,\r\n        &quot;/favicon.ico&quot;,\r\n        &quot;/**/*.png&quot;,\r\n        &quot;/**/*.gif&quot;,\r\n        &quot;/**/*.svg&quot;,\r\n        &quot;/**/*.jpg&quot;,\r\n        &quot;/**/*.html&quot;,\r\n        &quot;/**/*.css&quot;,\r\n        &quot;/**/*.js&quot;)\r\n     .permitAll()\r\n     .antMatchers(HttpMethod.POST, &quot;/api/auth/**&quot;)\r\n     .permitAll()\r\n     .anyRequest()\r\n     .authenticated();\r\n\r\nThe order of the request match rule matters and more specific rules should go first. There is some conflict between both **antMatcher** rules and therefore the second rule i.e **.antMatchers(HttpMethod.POST, &quot;/api/auth/**&quot;)** is ignored.\r\n\r\nTherefore the order should be following :-\r\n\r\n     .antMatchers(HttpMethod.POST, &quot;/api/auth/**&quot;)\r\n     .permitAll()\r\n     .antMatchers(&quot;/&quot;,\r\n        &quot;/favicon.ico&quot;,\r\n        &quot;/**/*.png&quot;,\r\n        &quot;/**/*.gif&quot;,\r\n        &quot;/**/*.svg&quot;,\r\n        &quot;/**/*.jpg&quot;,\r\n        &quot;/**/*.html&quot;,\r\n        &quot;/**/*.css&quot;,\r\n        &quot;/**/*.js&quot;)\r\n     .permitAll()\r\n\r\n","title":"Spring security 401 Unauthorized even with permitAll","body":"<p>Your configuration is not working due to order in which the <strong>antMatcher</strong> is evaluated</p>\n\n<pre><code> .and()\n .authorizeRequests()\n .antMatchers(\"/\",\n    \"/favicon.ico\",\n    \"/**/*.png\",\n    \"/**/*.gif\",\n    \"/**/*.svg\",\n    \"/**/*.jpg\",\n    \"/**/*.html\",\n    \"/**/*.css\",\n    \"/**/*.js\")\n .permitAll()\n .antMatchers(HttpMethod.POST, \"/api/auth/**\")\n .permitAll()\n .anyRequest()\n .authenticated();\n</code></pre>\n\n<p>The order of the request match rule matters and more specific rules should go first. There is some conflict between both <strong>antMatcher</strong> rules and therefore the second rule i.e <strong>.antMatchers(HttpMethod.POST, \"/api/auth/</strong>\")** is ignored.</p>\n\n<p>Therefore the order should be following :-</p>\n\n<pre><code> .antMatchers(HttpMethod.POST, \"/api/auth/**\")\n .permitAll()\n .antMatchers(\"/\",\n    \"/favicon.ico\",\n    \"/**/*.png\",\n    \"/**/*.gif\",\n    \"/**/*.svg\",\n    \"/**/*.jpg\",\n    \"/**/*.html\",\n    \"/**/*.css\",\n    \"/**/*.js\")\n .permitAll()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5768782,"reputation":2885,"user_id":4552842,"display_name":"Guru Cse"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1588111199,"creation_date":1588111199,"answer_id":61490676,"question_id":52904227,"body_markdown":"You need to add the following to your configure method\r\n/error is the default fall back when error occurs to the application due to any exception and it is secured by default.\r\n\r\n    \tprotected void configure(HttpSecurity httpSecurity) throws Exception {\r\n\t\t//disable CRSF\r\n\t\thttpSecurity\r\n\t\t\t\t//no authentication needed for these context paths\r\n\t\t\t\t.authorizeRequests()\r\n\t\t\t\t.antMatchers(&quot;/error&quot;).permitAll()\r\n\t\t\t\t.antMatchers(&quot;/error/**&quot;).permitAll()\r\n                .antMatchers(&quot;/your Urls that dosen&#39;t need security/**&quot;).permitAll()\r\n\r\n\r\n\r\n\r\nAlso the below code snippet\r\n  \r\n\r\n     @Override\r\n     public void configure(WebSecurity webSecurity) throws Exception\r\n       {\r\n         webSecurity\r\n        .ignoring()\r\n            // All of Spring Security will ignore the requests\r\n            .antMatchers(&quot;/error/**&quot;)\r\n         }\t\r\n\r\nNow you will not get 401 and get 500 exception with details when an exception occurred for permitAll Urls  ","title":"Spring security 401 Unauthorized even with permitAll","body":"<p>You need to add the following to your configure method\n/error is the default fall back when error occurs to the application due to any exception and it is secured by default.</p>\n\n<pre><code>    protected void configure(HttpSecurity httpSecurity) throws Exception {\n    //disable CRSF\n    httpSecurity\n            //no authentication needed for these context paths\n            .authorizeRequests()\n            .antMatchers(\"/error\").permitAll()\n            .antMatchers(\"/error/**\").permitAll()\n            .antMatchers(\"/your Urls that dosen't need security/**\").permitAll()\n</code></pre>\n\n<p>Also the below code snippet</p>\n\n<pre><code> @Override\n public void configure(WebSecurity webSecurity) throws Exception\n   {\n     webSecurity\n    .ignoring()\n        // All of Spring Security will ignore the requests\n        .antMatchers(\"/error/**\")\n     }  \n</code></pre>\n\n<p>Now you will not get 401 and get 500 exception with details when an exception occurred for permitAll Urls  </p>\n"},{"tags":[],"owner":{"account_id":11751385,"reputation":358,"user_id":8600439,"display_name":"Edgar Hernandez "},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614126189,"creation_date":1614126189,"answer_id":66342933,"question_id":52904227,"body_markdown":"I was having the same problem and it was due to the fact that **I wasn&#180;t using the default jdbc schema**, so I was passing the queries needed by the default UserDetailsService, and my authorities table was empty, so it was not getting results searching by the username.","title":"Spring security 401 Unauthorized even with permitAll","body":"<p>I was having the same problem and it was due to the fact that <strong>I wasn´t using the default jdbc schema</strong>, so I was passing the queries needed by the default UserDetailsService, and my authorities table was empty, so it was not getting results searching by the username.</p>\n"},{"tags":[],"owner":{"account_id":22572178,"reputation":1,"user_id":16758206,"display_name":"Abu-almagd"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656012026,"creation_date":1655825446,"answer_id":72703495,"question_id":52904227,"body_markdown":"I had the same error but my fault is to try login with the email and pass \r\ncredentials. But my userdetailsservice loaduser by name not by  email. After changing like below it worked successfully \r\n\r\n    public class UserDetailsImplServices implements UserDetailsService {\r\n    \r\n        @Autowired\r\n        private UserRepository UserRepository;\r\n    \r\n        @Override\r\n        public UserDetails loadUserByUsername(String email) throws UsernameNotFoundException {\r\n            //edit here to findbyemail not byname \r\n            UserModel user=UserRepository.findByEmail(email).get();\r\n            return UserDetailsImpl.build(user);\r\n        }\r\n        \r\n    } \r\n\r\n","title":"Spring security 401 Unauthorized even with permitAll","body":"<p>I had the same error but my fault is to try login with the email and pass\ncredentials. But my userdetailsservice loaduser by name not by  email. After changing like below it worked successfully</p>\n<pre><code>public class UserDetailsImplServices implements UserDetailsService {\n\n    @Autowired\n    private UserRepository UserRepository;\n\n    @Override\n    public UserDetails loadUserByUsername(String email) throws UsernameNotFoundException {\n        //edit here to findbyemail not byname \n        UserModel user=UserRepository.findByEmail(email).get();\n        return UserDetailsImpl.build(user);\n    }\n    \n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":2485743,"reputation":1,"user_id":2164197,"display_name":"user2164197"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662796012,"creation_date":1662795851,"answer_id":73670115,"question_id":52904227,"body_markdown":"```.anyRequest().authenticated()``` is preventing the permit all configuration.\r\nI tried to replace the .anyRequest() with ```antMatchers(&quot;/&lt;context-path&gt;/**&quot;)```. It worked for me.\r\n\r\n```java\r\n protected void configure(HttpSecurity http) throws Exception {\r\n        http\r\n                .cors()\r\n                .and()\r\n                .csrf()\r\n                .disable()\r\n                .exceptionHandling()\r\n                .authenticationEntryPoint(this.jwtAuthenticationEntryPoint)\r\n                .and()\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                .and()\r\n                .authorizeRequests()\r\n                .antMatchers(&quot;/&quot;,\r\n                        &quot;/favicon.ico&quot;,\r\n                        &quot;/**/*.png&quot;,\r\n                        &quot;/**/*.gif&quot;,\r\n                        &quot;/**/*.svg&quot;,\r\n                        &quot;/**/*.jpg&quot;,\r\n                        &quot;/**/*.html&quot;,\r\n                        &quot;/**/*.css&quot;,\r\n                        &quot;/**/*.js&quot;)\r\n                .permitAll()\r\n                .antMatchers(HttpMethod.POST, &quot;/api/auth/**&quot;)\r\n                .permitAll()\r\n                .antMatchers(&quot;/&lt;context-path&gt;/**&quot;)\r\n                .authenticated();\r\n\r\n        // Add our custom JWT security filter\r\n        http.addFilterBefore(jwtAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class);\r\n\r\n    }\r\n```","title":"Spring security 401 Unauthorized even with permitAll","body":"<p><code>.anyRequest().authenticated()</code> is preventing the permit all configuration.\nI tried to replace the .anyRequest() with <code>antMatchers(&quot;/&lt;context-path&gt;/**&quot;)</code>. It worked for me.</p>\n<pre class=\"lang-java prettyprint-override\"><code> protected void configure(HttpSecurity http) throws Exception {\n        http\n                .cors()\n                .and()\n                .csrf()\n                .disable()\n                .exceptionHandling()\n                .authenticationEntryPoint(this.jwtAuthenticationEntryPoint)\n                .and()\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .authorizeRequests()\n                .antMatchers(&quot;/&quot;,\n                        &quot;/favicon.ico&quot;,\n                        &quot;/**/*.png&quot;,\n                        &quot;/**/*.gif&quot;,\n                        &quot;/**/*.svg&quot;,\n                        &quot;/**/*.jpg&quot;,\n                        &quot;/**/*.html&quot;,\n                        &quot;/**/*.css&quot;,\n                        &quot;/**/*.js&quot;)\n                .permitAll()\n                .antMatchers(HttpMethod.POST, &quot;/api/auth/**&quot;)\n                .permitAll()\n                .antMatchers(&quot;/&lt;context-path&gt;/**&quot;)\n                .authenticated();\n\n        // Add our custom JWT security filter\n        http.addFilterBefore(jwtAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class);\n\n    }\n</code></pre>\n"}],"owner":{"account_id":9675677,"reputation":8158,"user_id":10257611,"display_name":"Ayoub k"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17488,"favorite_count":0,"down_vote_count":1,"up_vote_count":8,"accepted_answer_id":52967823,"answer_count":7,"score":7,"last_activity_date":1662796012,"creation_date":1540027822,"question_id":52904227,"body_markdown":"I&#39;m using Spring security to secure some endpoints in my REST service.\r\n\r\nhere&#39;s the security configuration class:\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableGlobalMethodSecurity(securedEnabled = true, jsr250Enabled = true, prePostEnabled = true)\r\n    public class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n        // Other methods\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http\r\n                    .cors()\r\n                    .and()\r\n                    .csrf()\r\n                    .disable()\r\n                    .exceptionHandling()\r\n                    .authenticationEntryPoint(this.jwtAuthenticationEntryPoint)\r\n                    .and()\r\n                    .sessionManagement()\r\n                    .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                    .and()\r\n                    .authorizeRequests()\r\n                    .antMatchers(&quot;/&quot;,\r\n                            &quot;/favicon.ico&quot;,\r\n                            &quot;/**/*.png&quot;,\r\n                            &quot;/**/*.gif&quot;,\r\n                            &quot;/**/*.svg&quot;,\r\n                            &quot;/**/*.jpg&quot;,\r\n                            &quot;/**/*.html&quot;,\r\n                            &quot;/**/*.css&quot;,\r\n                            &quot;/**/*.js&quot;)\r\n                    .permitAll()\r\n                    .antMatchers(HttpMethod.POST, &quot;/api/auth/**&quot;)\r\n                    .permitAll()\r\n                    .anyRequest()\r\n                    .authenticated();\r\n    \r\n            // Add our custom JWT security filter\r\n            http.addFilterBefore(jwtAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class);\r\n    \r\n        }\r\n    }\r\n\r\nAs you can see i&#39;m given the full access to **/api/auth/signup** and **/api/auth/signin** by using: **`.antMatchers(HttpMethod.POST, &quot;/api/auth/**&quot;).permitAll()`**\r\n\r\nfor some reason when i tried those request in the postman, the **&quot;signup&quot;** request worked fine, but **&quot;signin&quot;** didn&#39;t works and gives me **&quot;401 Unauthorized&quot;**  \r\ni tried also **`.antMatchers(&quot;/**&quot;).permitAll()`**\r\n\r\nhere&#39;s my controller:\r\n\r\n    @RestController\r\n    public class UserController {\r\n    \r\n        private UserService userService;\r\n    \r\n        @Autowired\r\n        public UserController(UserService userService) {\r\n            this.userService = userService;\r\n        }\r\n    \r\n        @PostMapping(&quot;/api/auth/signup&quot;)\r\n        public ResponseEntity&lt;RestResponse&gt; registerUser(@Valid @RequestBody SignUpRequest signUpRequest,\r\n                                                         UriComponentsBuilder uriComponentsBuilder)  {\r\n            RestResponse restResponse = this.userService.register(signUpRequest);\r\n            UriComponents uriComponents = uriComponentsBuilder.path(&quot;/users&quot;).buildAndExpand();\r\n            return ResponseEntity.created(uriComponents.toUri()).body(restResponse);\r\n        }\r\n    \r\n        @PostMapping(&quot;/api/auth/signin&quot;)\r\n        public ResponseEntity&lt;JwtAuthenticationResponse&gt; authenticateUser(@Valid @RequestBody LoginRequest loginRequest) {\r\n            return ResponseEntity.ok(this.userService.login(loginRequest));\r\n        }\r\n    }","title":"Spring security 401 Unauthorized even with permitAll","body":"<p>I'm using Spring security to secure some endpoints in my REST service.</p>\n\n<p>here's the security configuration class:</p>\n\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(securedEnabled = true, jsr250Enabled = true, prePostEnabled = true)\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    // Other methods\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                .cors()\n                .and()\n                .csrf()\n                .disable()\n                .exceptionHandling()\n                .authenticationEntryPoint(this.jwtAuthenticationEntryPoint)\n                .and()\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .authorizeRequests()\n                .antMatchers(\"/\",\n                        \"/favicon.ico\",\n                        \"/**/*.png\",\n                        \"/**/*.gif\",\n                        \"/**/*.svg\",\n                        \"/**/*.jpg\",\n                        \"/**/*.html\",\n                        \"/**/*.css\",\n                        \"/**/*.js\")\n                .permitAll()\n                .antMatchers(HttpMethod.POST, \"/api/auth/**\")\n                .permitAll()\n                .anyRequest()\n                .authenticated();\n\n        // Add our custom JWT security filter\n        http.addFilterBefore(jwtAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class);\n\n    }\n}\n</code></pre>\n\n<p>As you can see i'm given the full access to <strong>/api/auth/signup</strong> and <strong>/api/auth/signin</strong> by using: <strong><code>.antMatchers(HttpMethod.POST, \"/api/auth/**\").permitAll()</code></strong></p>\n\n<p>for some reason when i tried those request in the postman, the <strong>\"signup\"</strong> request worked fine, but <strong>\"signin\"</strong> didn't works and gives me <strong>\"401 Unauthorized\"</strong><br>\ni tried also <strong><code>.antMatchers(\"/**\").permitAll()</code></strong></p>\n\n<p>here's my controller:</p>\n\n<pre><code>@RestController\npublic class UserController {\n\n    private UserService userService;\n\n    @Autowired\n    public UserController(UserService userService) {\n        this.userService = userService;\n    }\n\n    @PostMapping(\"/api/auth/signup\")\n    public ResponseEntity&lt;RestResponse&gt; registerUser(@Valid @RequestBody SignUpRequest signUpRequest,\n                                                     UriComponentsBuilder uriComponentsBuilder)  {\n        RestResponse restResponse = this.userService.register(signUpRequest);\n        UriComponents uriComponents = uriComponentsBuilder.path(\"/users\").buildAndExpand();\n        return ResponseEntity.created(uriComponents.toUri()).body(restResponse);\n    }\n\n    @PostMapping(\"/api/auth/signin\")\n    public ResponseEntity&lt;JwtAuthenticationResponse&gt; authenticateUser(@Valid @RequestBody LoginRequest loginRequest) {\n        return ResponseEntity.ok(this.userService.login(loginRequest));\n    }\n}\n</code></pre>\n"},{"tags":["java","java-stream","max"],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1662768371,"creation_date":1662760519,"answer_id":73667831,"question_id":73667670,"body_markdown":"You could use a [`Map`][1], but using a class might be easier. \r\n\r\nDefine a [record][2] to hold each input `float`, and its resulting computation. Note that a record can be defined locally within a method, or defined separately. \r\n\r\nIn the old days, some people used `AbstractMap.SimpleEntry`,  [`AbstractMap.SimpleImmutableEntry`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/AbstractMap.SimpleImmutableEntry.html), or their interface [`Map.Entry`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.Entry.html), or in Java 9+ the convenient [`Map.entry(…)`][3] method, as a [tuple][4] for holding multiple values together. In Java 16+, the need for that vanishes. The new Records feature makes the code more explicit about your invention of a type. Having named fields makes the meaning clear. All the inherited [`Object`][5] methods being implicitly created by the compiler makes defining a `record` utterly simple. And the fact that a `record` can be defined locally keeps the code minimal and tidy. \r\n\r\nCore example code:\r\n\r\n```java\r\nrecord Comp( Float f , float computed ) { }  // Locally defines an entire class to communicate data transparently and immutably.\r\nOptional &lt; Comp &gt; compOptional =\r\n        list\r\n                .stream()\r\n                .map(\r\n                        f -&gt; new Comp( f , complexFunction( f ) )\r\n                )\r\n                .max(\r\n                        Comparator.comparingDouble( Comp :: computed )\r\n                );\r\n```\r\n\r\nWe could optimize a bit if we do not care about collecting all the `Comp` records. We could avoid instantiation of all but the winning `Comp` record by simply flipping the order of `.map` and `.max`.\r\n\r\n```java\r\nrecord Comp( Float f , float computed ) { }  // Locally defines an entire class to communicate data transparently and immutably.\r\nOptional &lt; Comp &gt; compOptional =\r\n        list\r\n                .stream()\r\n                .max(\r\n                        Comparator.comparingDouble( App :: complexFunction )\r\n                )\r\n                .map(\r\n                        f -&gt; new Comp( f , complexFunction( f ) )\r\n                );\r\n```\r\n\r\n\r\n\r\nFull example code:\r\n\r\n```java\r\npackage work.basil.example.modmax;\r\n\r\nimport java.util.Comparator;\r\nimport java.util.List;\r\nimport java.util.Optional;\r\n\r\npublic class App\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n        App app = new App();\r\n        app.demo();\r\n    }\r\n\r\n    private void demo ( )\r\n    {\r\n        List &lt; Float &gt; list = List.of( 7F , 99F , 42F , 1F );\r\n\r\n        record Comp( Float f , float computed ) { }  // Locally defines an entire class to communicate data transparently and immutably.\r\n        Optional &lt; Comp &gt; compOptional =\r\n                list\r\n                        .stream()\r\n                        .max(\r\n                                Comparator.comparingDouble( App :: complexFunction )\r\n                        )\r\n                        .map(\r\n                                f -&gt; new Comp( f , complexFunction( f ) )\r\n                        );\r\n\r\n        System.out.println( &quot;compOptional = &quot; + compOptional );\r\n    }\r\n\r\n    static float complexFunction ( Float f )\r\n    {\r\n        return f * 2;\r\n    }\r\n}\r\n```\r\n\r\nWhen run:\r\n\r\n&gt;Optional[Comp[f=99.0, computed=198.0]]\r\n\r\nYou could play around with `Float` versus `float` to minimize [auto-boxing][6]. But for small amounts of data infrequently processed, I would not bother.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html\r\n  [2]: https://openjdk.org/jeps/395?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJhdWQiOiJhY2Nlc3NfcmVzb3VyY2UiLCJleHAiOjE2NDc4Mjg4MTYsImciOiJlckFkUHk4WE1ZSU1ncEFHIiwiaWF0IjoxNjQ3ODI4NTE2LCJ1c2VySWQiOjYyMzI4fQ.ynfOAzT-LRbKklQwjiPLeDa_CCI6bOqgCISpiPyC3dE\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#entry(K,V)\r\n  [4]: https://en.wikipedia.org/wiki/Tuple\r\n  [5]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html\r\n  [6]: https://docs.oracle.com/javase/tutorial/java/data/autoboxing.html","title":"Obtain the Maximum Value which can be produced by a Function from a Stream Element and the Element itself","body":"<p>You could use a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html\" rel=\"nofollow noreferrer\"><code>Map</code></a>, but using a class might be easier.</p>\n<p>Define a <a href=\"https://openjdk.org/jeps/395?accessToken=eyJhbGciOiJIUzI1NiIsImtpZCI6ImRlZmF1bHQiLCJ0eXAiOiJKV1QifQ.eyJhdWQiOiJhY2Nlc3NfcmVzb3VyY2UiLCJleHAiOjE2NDc4Mjg4MTYsImciOiJlckFkUHk4WE1ZSU1ncEFHIiwiaWF0IjoxNjQ3ODI4NTE2LCJ1c2VySWQiOjYyMzI4fQ.ynfOAzT-LRbKklQwjiPLeDa_CCI6bOqgCISpiPyC3dE\" rel=\"nofollow noreferrer\">record</a> to hold each input <code>float</code>, and its resulting computation. Note that a record can be defined locally within a method, or defined separately.</p>\n<p>In the old days, some people used <code>AbstractMap.SimpleEntry</code>,  <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/AbstractMap.SimpleImmutableEntry.html\" rel=\"nofollow noreferrer\"><code>AbstractMap.SimpleImmutableEntry</code></a>, or their interface <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.Entry.html\" rel=\"nofollow noreferrer\"><code>Map.Entry</code></a>, or in Java 9+ the convenient <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#entry(K,V)\" rel=\"nofollow noreferrer\"><code>Map.entry(…)</code></a> method, as a <a href=\"https://en.wikipedia.org/wiki/Tuple\" rel=\"nofollow noreferrer\">tuple</a> for holding multiple values together. In Java 16+, the need for that vanishes. The new Records feature makes the code more explicit about your invention of a type. Having named fields makes the meaning clear. All the inherited <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html\" rel=\"nofollow noreferrer\"><code>Object</code></a> methods being implicitly created by the compiler makes defining a <code>record</code> utterly simple. And the fact that a <code>record</code> can be defined locally keeps the code minimal and tidy.</p>\n<p>Core example code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>record Comp( Float f , float computed ) { }  // Locally defines an entire class to communicate data transparently and immutably.\nOptional &lt; Comp &gt; compOptional =\n        list\n                .stream()\n                .map(\n                        f -&gt; new Comp( f , complexFunction( f ) )\n                )\n                .max(\n                        Comparator.comparingDouble( Comp :: computed )\n                );\n</code></pre>\n<p>We could optimize a bit if we do not care about collecting all the <code>Comp</code> records. We could avoid instantiation of all but the winning <code>Comp</code> record by simply flipping the order of <code>.map</code> and <code>.max</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>record Comp( Float f , float computed ) { }  // Locally defines an entire class to communicate data transparently and immutably.\nOptional &lt; Comp &gt; compOptional =\n        list\n                .stream()\n                .max(\n                        Comparator.comparingDouble( App :: complexFunction )\n                )\n                .map(\n                        f -&gt; new Comp( f , complexFunction( f ) )\n                );\n</code></pre>\n<p>Full example code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.modmax;\n\nimport java.util.Comparator;\nimport java.util.List;\nimport java.util.Optional;\n\npublic class App\n{\n    public static void main ( String[] args )\n    {\n        App app = new App();\n        app.demo();\n    }\n\n    private void demo ( )\n    {\n        List &lt; Float &gt; list = List.of( 7F , 99F , 42F , 1F );\n\n        record Comp( Float f , float computed ) { }  // Locally defines an entire class to communicate data transparently and immutably.\n        Optional &lt; Comp &gt; compOptional =\n                list\n                        .stream()\n                        .max(\n                                Comparator.comparingDouble( App :: complexFunction )\n                        )\n                        .map(\n                                f -&gt; new Comp( f , complexFunction( f ) )\n                        );\n\n        System.out.println( &quot;compOptional = &quot; + compOptional );\n    }\n\n    static float complexFunction ( Float f )\n    {\n        return f * 2;\n    }\n}\n</code></pre>\n<p>When run:</p>\n<blockquote>\n<p>Optional[Comp[f=99.0, computed=198.0]]</p>\n</blockquote>\n<p>You could play around with <code>Float</code> versus <code>float</code> to minimize <a href=\"https://docs.oracle.com/javase/tutorial/java/data/autoboxing.html\" rel=\"nofollow noreferrer\">auto-boxing</a>. But for small amounts of data infrequently processed, I would not bother.</p>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662795275,"creation_date":1662760526,"answer_id":73667832,"question_id":73667670,"body_markdown":"If I understood the problem correctly, you need to obtain only a single object for which your function produces maximum and its corresponding value.\r\n\r\nJudging by the usage of `get()`, I assume that you&#39;re OK with throwing an exception in case if the optional is empty. If you&#39;re using Java 10+ [`orElseThrow()`](https://docs.oracle.com/en/java/javase/17/docs/api//java.base/java/util/Optional.html#orElseThrow()) is a preferred option because it explicitly conveys your intention to the reader of the code.\r\n\r\nHere&#39;s how you can generate an auxiliary `Map` and associating each object with a *value* returned by the function using [`Collectors.toMap()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#toMap(java.util.function.Function,java.util.function.Function,java.util.function.BinaryOperator)), and then pick the *entry* containing the *highest value*.\r\n\r\n```\r\nMap.Entry&lt;MyType, Float&gt; maxEntry = list.stream()\r\n    .collect(Collectors.toMap(\r\n        Function.identity(),        // key\r\n        t -&gt; complexFunction(x, t), // value\r\n        (left, right) -&gt; left       // resolving duplicates\r\n    ))\r\n    .max(Map.Entry.comparingByValue())\r\n    .orElseThrow();\r\n\r\nMyType maxElement = maxEntry.getKey();\r\nfloat maxFunctionValue = maxEntry.getValue();\r\n```","title":"Obtain the Maximum Value which can be produced by a Function from a Stream Element and the Element itself","body":"<p>If I understood the problem correctly, you need to obtain only a single object for which your function produces maximum and its corresponding value.</p>\n<p>Judging by the usage of <code>get()</code>, I assume that you're OK with throwing an exception in case if the optional is empty. If you're using Java 10+ <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api//java.base/java/util/Optional.html#orElseThrow()\" rel=\"nofollow noreferrer\"><code>orElseThrow()</code></a> is a preferred option because it explicitly conveys your intention to the reader of the code.</p>\n<p>Here's how you can generate an auxiliary <code>Map</code> and associating each object with a <em>value</em> returned by the function using <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#toMap(java.util.function.Function,java.util.function.Function,java.util.function.BinaryOperator)\" rel=\"nofollow noreferrer\"><code>Collectors.toMap()</code></a>, and then pick the <em>entry</em> containing the <em>highest value</em>.</p>\n<pre><code>Map.Entry&lt;MyType, Float&gt; maxEntry = list.stream()\n    .collect(Collectors.toMap(\n        Function.identity(),        // key\n        t -&gt; complexFunction(x, t), // value\n        (left, right) -&gt; left       // resolving duplicates\n    ))\n    .max(Map.Entry.comparingByValue())\n    .orElseThrow();\n\nMyType maxElement = maxEntry.getKey();\nfloat maxFunctionValue = maxEntry.getValue();\n</code></pre>\n"}],"owner":{"account_id":8868218,"reputation":928,"user_id":6622697,"display_name":"Peter Kronenberg"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73667831,"answer_count":2,"score":0,"last_activity_date":1662795275,"creation_date":1662758998,"question_id":73667670,"body_markdown":"I have a function which computes a value from an object.\r\n\r\nAnd I have code like this:\r\n\r\n```\r\nList.stream()\r\n    .max((t1, t2) -&gt; Float.compare(complexFunction(x, t1), complexFunction(x,t2)))\r\n    .get();\r\n```\r\nThis successfully gets me the element for which `complexFunction` produces the highest value, but I want to get this value as well.  What&#39;s the best way to do this?\r\n\r\nI&#39;m thinking that I need to create a map first with all the elements and the values, and then do the max operation after that.  Is there anything better?","title":"Obtain the Maximum Value which can be produced by a Function from a Stream Element and the Element itself","body":"<p>I have a function which computes a value from an object.</p>\n<p>And I have code like this:</p>\n<pre><code>List.stream()\n    .max((t1, t2) -&gt; Float.compare(complexFunction(x, t1), complexFunction(x,t2)))\n    .get();\n</code></pre>\n<p>This successfully gets me the element for which <code>complexFunction</code> produces the highest value, but I want to get this value as well.  What's the best way to do this?</p>\n<p>I'm thinking that I need to create a map first with all the elements and the values, and then do the max operation after that.  Is there anything better?</p>\n"},{"tags":["java","android","firebase","google-cloud-platform","firebase-realtime-database"],"answers":[{"tags":[],"owner":{"account_id":25739271,"reputation":653,"user_id":19493508,"display_name":"Hanif Shaikh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662785880,"creation_date":1662785880,"answer_id":73669381,"question_id":73666842,"body_markdown":"   I think below line code help you.\r\n\r\n\r\n\r\n       databaseReference = FirebaseDatabase.getInstance().getReference().child(&quot;Fat Loss&quot;).child(&quot;Workout one&quot;).child(&quot;day 1&quot;)\r\n\r\n\r\n   \r\n\r\n         databaseReference.addValueEventListener(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                        allTaskList.clear();\r\n                        if (snapshot.exists()) {\r\n                            for (DataSnapshot dataSnapshot : snapshot.getChildren()) {\r\n                               //modal class object\r\n                               AddTODOListModal model = dataSnapshot.getValue(AddTODOListModal.class);\r\n                                assert model != null;\r\n                                model.setId(dataSnapshot.getKey());\r\n                                allTaskList.add(model);\r\n                            }\r\n                            adapter = new TODOListAdapter(TODOListHomeActivity.this, allTaskList);\r\n                            binding.rvTODO.setAdapter(adapter);\r\n                        }else {\r\n                            Utils.showToast(&quot;No Data Available&quot;);\r\n                        }\r\n                        Utils.dismissProgressDialog();\r\n                    }\r\n        \r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError error) {\r\n                        Utils.showToast(error.getDetails());\r\n                    }\r\n                });\r\n\r\n\r\n\r\n\r\nReference link :- https://firebase.google.com/docs/database/android/lists-of-data","title":"how do i retrieve a nested object from Firebase?","body":"<p>I think below line code help you.</p>\n<pre><code>   databaseReference = FirebaseDatabase.getInstance().getReference().child(&quot;Fat Loss&quot;).child(&quot;Workout one&quot;).child(&quot;day 1&quot;)\n\n\n\n\n     databaseReference.addValueEventListener(new ValueEventListener() {\n                @Override\n                public void onDataChange(@NonNull DataSnapshot snapshot) {\n                    allTaskList.clear();\n                    if (snapshot.exists()) {\n                        for (DataSnapshot dataSnapshot : snapshot.getChildren()) {\n                           //modal class object\n                           AddTODOListModal model = dataSnapshot.getValue(AddTODOListModal.class);\n                            assert model != null;\n                            model.setId(dataSnapshot.getKey());\n                            allTaskList.add(model);\n                        }\n                        adapter = new TODOListAdapter(TODOListHomeActivity.this, allTaskList);\n                        binding.rvTODO.setAdapter(adapter);\n                    }else {\n                        Utils.showToast(&quot;No Data Available&quot;);\n                    }\n                    Utils.dismissProgressDialog();\n                }\n    \n                @Override\n                public void onCancelled(@NonNull DatabaseError error) {\n                    Utils.showToast(error.getDetails());\n                }\n            });\n</code></pre>\n<p>Reference link :- <a href=\"https://firebase.google.com/docs/database/android/lists-of-data\" rel=\"nofollow noreferrer\">https://firebase.google.com/docs/database/android/lists-of-data</a></p>\n"},{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662794637,"creation_date":1662794637,"answer_id":73670038,"question_id":73666842,"body_markdown":"As I see in your screenshot, under the &quot;Workout one&quot; node, you have two nested levels of data. So to get all exercises for each day, you have to loop over the children twice:\r\n\r\n\tDatabaseReference db = FirebaseDatabase.getInstance().getReference();\r\n\tDatabaseReference workoutOneRef = db.child(&quot;Fat Loss&quot;).child(&quot;Workout one&quot;);\r\n    workoutOneRef.get().addOnCompleteListener(new OnCompleteListener&lt;DataSnapshot&gt;() {\r\n\t\t@Override\r\n\t\tpublic void onComplete(@NonNull Task&lt;DataSnapshot&gt; task) {\r\n\t\t\tif (task.isSuccessful()) {\r\n\t\t\t\tfor (DataSnapshot daySnapshot : task.getResult().getChildren()) {\r\n\t\t\t\t\tfor (DataSnapshot exerciseSnapshot : daySnapshot.getChildren()) {\r\n\t\t\t\t\t\tString name = exerciseSnapshot.child(&quot;name&quot;).getValue(String.class);\r\n\t\t\t\t\t\tLog.d(&quot;TAG&quot;, name);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tLog.d(&quot;TAG&quot;, task.getException().getMessage()); //Never ignore potential errors!\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\nPlease also don&#39;t forget that the Firebase API is asynchronous. So any code that needs data from the database needs to be inside the `onComplete()` method, or be called from there. To understand better, I recommend you check the following resource:\r\n\r\n* [How to read data from Firebase Realtime Database using get()?][1]\r\n\r\n\r\n  [1]: https://medium.com/firebase-tips-tricks/how-to-read-data-from-firebase-realtime-database-using-get-269ef3e179c5","title":"how do i retrieve a nested object from Firebase?","body":"<p>As I see in your screenshot, under the &quot;Workout one&quot; node, you have two nested levels of data. So to get all exercises for each day, you have to loop over the children twice:</p>\n<pre><code>DatabaseReference db = FirebaseDatabase.getInstance().getReference();\nDatabaseReference workoutOneRef = db.child(&quot;Fat Loss&quot;).child(&quot;Workout one&quot;);\nworkoutOneRef.get().addOnCompleteListener(new OnCompleteListener&lt;DataSnapshot&gt;() {\n    @Override\n    public void onComplete(@NonNull Task&lt;DataSnapshot&gt; task) {\n        if (task.isSuccessful()) {\n            for (DataSnapshot daySnapshot : task.getResult().getChildren()) {\n                for (DataSnapshot exerciseSnapshot : daySnapshot.getChildren()) {\n                    String name = exerciseSnapshot.child(&quot;name&quot;).getValue(String.class);\n                    Log.d(&quot;TAG&quot;, name);\n                }\n            }\n        } else {\n            Log.d(&quot;TAG&quot;, task.getException().getMessage()); //Never ignore potential errors!\n        }\n    }\n});\n</code></pre>\n<p>Please also don't forget that the Firebase API is asynchronous. So any code that needs data from the database needs to be inside the <code>onComplete()</code> method, or be called from there. To understand better, I recommend you check the following resource:</p>\n<ul>\n<li><a href=\"https://medium.com/firebase-tips-tricks/how-to-read-data-from-firebase-realtime-database-using-get-269ef3e179c5\" rel=\"nofollow noreferrer\">How to read data from Firebase Realtime Database using get()?</a></li>\n</ul>\n"}],"owner":{"display_name":"user19595313"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":416,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73670038,"answer_count":2,"score":-1,"last_activity_date":1662794702,"creation_date":1662752700,"question_id":73666842,"body_markdown":"I am trying to retrieve a nested list of workouts from a Realtime Database and I don&#39;t know how to do it.\r\n\r\nI made some research and still couldn&#39;t really figure out how am supposed to do it.\r\n\r\nThe Realtime Database JSON file looks like this :\r\n\r\n[![screenshot][1]][1]\r\n\r\nI am looking to retrieve data by workout, for example, if someone presses the workout one button I should retrieve the full workout one object. but I don&#39;t know how am supposed to design my query request nor how am supposed to structure my model object that conceives the received data.\r\n\r\n  [1]: https://i.stack.imgur.com/tlXxw.png","title":"how do i retrieve a nested object from Firebase?","body":"<p>I am trying to retrieve a nested list of workouts from a Realtime Database and I don't know how to do it.</p>\n<p>I made some research and still couldn't really figure out how am supposed to do it.</p>\n<p>The Realtime Database JSON file looks like this :</p>\n<p><a href=\"https://i.stack.imgur.com/tlXxw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tlXxw.png\" alt=\"screenshot\" /></a></p>\n<p>I am looking to retrieve data by workout, for example, if someone presses the workout one button I should retrieve the full workout one object. but I don't know how am supposed to design my query request nor how am supposed to structure my model object that conceives the received data.</p>\n"},{"tags":["java","angular","spring"],"comments":[{"owner":{"account_id":3597514,"reputation":117144,"user_id":3001761,"display_name":"jonrsharpe"},"score":1,"creation_date":1662489671,"post_id":73626485,"comment_id":130015948,"body_markdown":"What does _&quot;can&#39;t get it&quot;_ mean, exactly? I&#39;d guess a CORS problem, which you should research (and note making the request to localhost means this only works on your machine).","body":"What does <i>&quot;can&#39;t get it&quot;</i> mean, exactly? I&#39;d guess a CORS problem, which you should research (and note making the request to localhost means this only works on your machine)."},{"owner":{"account_id":25914628,"reputation":1,"user_id":19638193,"display_name":"Dimitri Degroise"},"score":0,"creation_date":1662489983,"post_id":73626485,"comment_id":130016061,"body_markdown":"It works on my machine with Postman, but using my browser I can&#39;t make the API call. What do you mean by a CORS problem? Cordially","body":"It works on my machine with Postman, but using my browser I can&#39;t make the API call. What do you mean by a CORS problem? Cordially"},{"owner":{"account_id":10604846,"reputation":620,"user_id":7810650,"display_name":"Taimoor Qureshi"},"score":0,"creation_date":1662490802,"post_id":73626485,"comment_id":130016280,"body_markdown":"have to enable CORS from the backend!","body":"have to enable CORS from the backend!"},{"owner":{"account_id":10604846,"reputation":620,"user_id":7810650,"display_name":"Taimoor Qureshi"},"score":0,"creation_date":1662490935,"post_id":73626485,"comment_id":130016330,"body_markdown":"are you getting any errors in the console or in the network tab?","body":"are you getting any errors in the console or in the network tab?"},{"owner":{"account_id":25914628,"reputation":1,"user_id":19638193,"display_name":"Dimitri Degroise"},"score":0,"creation_date":1662491160,"post_id":73626485,"comment_id":130016396,"body_markdown":"I have no errors in the console","body":"I have no errors in the console"},{"owner":{"account_id":25914628,"reputation":1,"user_id":19638193,"display_name":"Dimitri Degroise"},"score":0,"creation_date":1662491250,"post_id":73626485,"comment_id":130016422,"body_markdown":"How to enable cors @TaimoorQureshi ? `@CrossOrigin(origins = &quot;*&quot;, allowedHeaders = &quot;*&quot;)`","body":"How to enable cors @TaimoorQureshi ? <code>@CrossOrigin(origins = &quot;*&quot;, allowedHeaders = &quot;*&quot;)</code>"},{"owner":{"account_id":10604846,"reputation":620,"user_id":7810650,"display_name":"Taimoor Qureshi"},"score":0,"creation_date":1663106800,"post_id":73626485,"comment_id":130160767,"body_markdown":"you can find out on this platform. the following link could be helpful for you. https://stackoverflow.com/questions/36968963/how-to-configure-cors-in-a-spring-boot-spring-security-application","body":"you can find out on this platform. the following link could be helpful for you. <a href=\"https://stackoverflow.com/questions/36968963/how-to-configure-cors-in-a-spring-boot-spring-security-application\" title=\"how to configure cors in a spring boot spring security application\">stackoverflow.com/questions/36968963/&hellip;</a>"},{"owner":{"account_id":12329207,"reputation":1050,"user_id":8995812,"display_name":"Jakob Em"},"score":0,"creation_date":1668181817,"post_id":73626485,"comment_id":131350829,"body_markdown":"It looks like you are not subscribing to the observable returned from the http client. Therefore no request is made to your backend.","body":"It looks like you are not subscribing to the observable returned from the http client. Therefore no request is made to your backend."}],"owner":{"account_id":25914628,"reputation":1,"user_id":19638193,"display_name":"Dimitri Degroise"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662794579,"creation_date":1662489544,"question_id":73626485,"body_markdown":"I have a backend in java Spring :\r\n\r\n    @RequestMapping(value = &quot;/login&quot;, method = RequestMethod.POST)\r\n    public String getLogin(@RequestBody Credential credential) {\r\n        System.out.println(&quot;Hello moto&quot;);\r\n        System.out.println(credential.toString());\r\n        return &quot;Allo&quot;;\r\n    }\r\n\r\nI have my front in Angular with which I make my API call:\r\n\r\n     login() {\r\n    const body = {&quot;email&quot;: &quot;string&quot;, &quot;password&quot;: &quot;string&quot;}\r\n    this.http.post(&#39;http://localhost:8080/login/&#39;, {\r\n      &quot;email&quot;: &quot;string&quot;,\r\n      &quot;password&quot;: &quot;string&quot;\r\n    }, {responseType: &#39;json&#39;}).pipe(map(user =&gt; {\r\n      console.log(&quot;user : &quot;, user);\r\n    }));\r\n    console.log(&quot;userService&quot;)\r\n  }\r\n\r\nMy console.log is displayed fine when I click on the button.\r\nI manage to make the calls with PostMan I have the answer.. But I can&#39;t get it via Angular, do you have any solutions to offer me?\r\n\r\nThanks","title":"Java / Angular API call","body":"<p>I have a backend in java Spring :</p>\n<pre><code>@RequestMapping(value = &quot;/login&quot;, method = RequestMethod.POST)\npublic String getLogin(@RequestBody Credential credential) {\n    System.out.println(&quot;Hello moto&quot;);\n    System.out.println(credential.toString());\n    return &quot;Allo&quot;;\n}\n</code></pre>\n<p>I have my front in Angular with which I make my API call:</p>\n<pre><code> login() {\nconst body = {&quot;email&quot;: &quot;string&quot;, &quot;password&quot;: &quot;string&quot;}\nthis.http.post('http://localhost:8080/login/', {\n  &quot;email&quot;: &quot;string&quot;,\n  &quot;password&quot;: &quot;string&quot;\n}, {responseType: 'json'}).pipe(map(user =&gt; {\n  console.log(&quot;user : &quot;, user);\n}));\nconsole.log(&quot;userService&quot;)\n</code></pre>\n<p>}</p>\n<p>My console.log is displayed fine when I click on the button.\nI manage to make the calls with PostMan I have the answer.. But I can't get it via Angular, do you have any solutions to offer me?</p>\n<p>Thanks</p>\n"},{"tags":["java","spring-boot","validation","exception"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1662791417,"post_id":73669692,"comment_id":130092072,"body_markdown":"The error response, you posted refers to (a) JPA (exception) not to MethodArgumentNotValidException...(so seems 1. Validation not triggered 2. Some assumptions incorrect)","body":"The error response, you posted refers to (a) JPA (exception) not to MethodArgumentNotValidException...(so seems 1. Validation not triggered 2. Some assumptions incorrect)"},{"owner":{"account_id":18485634,"reputation":2328,"user_id":13466689,"display_name":"Faheem azaz Bhanej"},"score":0,"creation_date":1662791977,"post_id":73669692,"comment_id":130092169,"body_markdown":"@xerx593 How to handle this exception. And validation is triggered correctly in my Eclipse IDE.","body":"@xerx593 How to handle this exception. And validation is triggered correctly in my Eclipse IDE."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1662792271,"post_id":73669692,"comment_id":130092205,"body_markdown":"1. Inspect/post the stacktrace of 500 (&quot;my eclipse&quot; is important hint, i think)","body":"1. Inspect/post the stacktrace of 500 (&quot;my eclipse&quot; is important hint, i think)"},{"owner":{"account_id":18485634,"reputation":2328,"user_id":13466689,"display_name":"Faheem azaz Bhanej"},"score":0,"creation_date":1662792536,"post_id":73669692,"comment_id":130092251,"body_markdown":"@xerx593 I posted my eclipse ide stack trace in my updated question.","body":"@xerx593 I posted my eclipse ide stack trace in my updated question."},{"owner":{"account_id":18485634,"reputation":2328,"user_id":13466689,"display_name":"Faheem azaz Bhanej"},"score":0,"creation_date":1662792723,"post_id":73669692,"comment_id":130092273,"body_markdown":"@xerx593 I have `STS 4.15.1 released`","body":"@xerx593 I have <code>STS 4.15.1 released</code>"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1662793057,"post_id":73669692,"comment_id":130092323,"body_markdown":"..&quot;try to&quot; `ExceptionHandler(javax.validation.ConstraintViolationException.class)` ..broader!:)","body":"..&quot;try to&quot; <code>ExceptionHandler(javax.validation.ConstraintViolationExcepti&zwnj;&#8203;on.class)</code> ..broader!:)"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1662793231,"post_id":73669692,"comment_id":130092341,"body_markdown":"But then why BAD_GATEWAY? ;(;(502?)","body":"But then why BAD_GATEWAY? ;(;(502?)"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1662793365,"post_id":73669692,"comment_id":130092354,"body_markdown":"(Validation is triggered! Super! `Please enter your contact number !!`, but your handler is not invoked...)","body":"(Validation is triggered! Super! <code>Please enter your contact number !!</code>, but your handler is not invoked...)"}],"answers":[{"tags":[],"owner":{"account_id":18485634,"reputation":2328,"user_id":13466689,"display_name":"Faheem azaz Bhanej"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1662794520,"creation_date":1662794520,"answer_id":73670023,"question_id":73669692,"body_markdown":"Much thanks to [**xerx593**][1]. This guy is help me to solve this problem.\r\n\r\nWe have to handle `ConstraintViolationException` insted of `MethodArgumentNotValidException`.\r\n\r\nHere down is my modified exception handler:\r\n```\r\n@ExceptionHandler(ConstraintViolationException.class)\r\n@ResponseStatus(value = HttpStatus.BAD_GATEWAY)\r\npublic Map&lt;Path, String&gt; handleConstraintViolationException(ConstraintViolationException ex) {\r\n\tSet&lt;ConstraintViolation&lt;?&gt;&gt; constraintViolations = ex.getConstraintViolations();\r\n\t\t \r\n\tMap&lt;Path, String&gt; fieldException = new HashMap&lt;&gt;();\r\n\tconstraintViolations.stream().forEach(e -&gt; {\r\n\t\tfieldException.put(e.getPropertyPath(), e.getMessage());\r\n\t});\r\n\treturn fieldException;\r\n}\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/592355/xerx593","title":"Javax.validation throwing InternerServerError 500 instead of BadRequest 400","body":"<p>Much thanks to <a href=\"https://stackoverflow.com/users/592355/xerx593\"><strong>xerx593</strong></a>. This guy is help me to solve this problem.</p>\n<p>We have to handle <code>ConstraintViolationException</code> insted of <code>MethodArgumentNotValidException</code>.</p>\n<p>Here down is my modified exception handler:</p>\n<pre><code>@ExceptionHandler(ConstraintViolationException.class)\n@ResponseStatus(value = HttpStatus.BAD_GATEWAY)\npublic Map&lt;Path, String&gt; handleConstraintViolationException(ConstraintViolationException ex) {\n    Set&lt;ConstraintViolation&lt;?&gt;&gt; constraintViolations = ex.getConstraintViolations();\n         \n    Map&lt;Path, String&gt; fieldException = new HashMap&lt;&gt;();\n    constraintViolations.stream().forEach(e -&gt; {\n        fieldException.put(e.getPropertyPath(), e.getMessage());\n    });\n    return fieldException;\n}\n</code></pre>\n"}],"owner":{"account_id":18485634,"reputation":2328,"user_id":13466689,"display_name":"Faheem azaz Bhanej"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":782,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73670023,"answer_count":1,"score":1,"last_activity_date":1662794520,"creation_date":1662790634,"question_id":73669692,"body_markdown":"I have `User` entity in my project. I add a javax.validation in my project to validate field level annotation. While I&#39;m trying to insert User in a database with one null value, I get `500 Internal Server Error` but it should be `400 Bad Request` because I&#39;m trying to handle this exception and give proper error message in postman.\r\n\r\nHere is my code:\r\n\r\n*Entity*\r\n```\r\npublic class User {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.AUTO)\r\n\tprivate Integer userId;\r\n\t\r\n\t@NotBlank(message = &quot;Username should not be null !!&quot;)\r\n\tprivate String userName;\r\n\t\r\n\t@Email(message = &quot;Email is not valid !!&quot;)\r\n\tprivate String email;\r\n\t\r\n\t@NotBlank(message = &quot;Password should not be null !!&quot;)\r\n\tprivate String pasword;\r\n\r\n    @NotBlank(message = &quot;Please enter your contact number !!&quot;)\r\n\tprivate String contact;\r\n\r\n}\r\n```\r\n\r\n*Controller*\r\n```\r\n@RequestMapping(value = &quot;/&quot;, method = RequestMethod.POST)\r\npublic ResponseEntity&lt;User&gt; addUser(@Valid @RequestBody UserModel userModel){\r\n\treturn ResponseEntity.ok(userService.addUser(userModel));\r\n}\r\n```\r\n\r\n*Exception Handler*\r\n```\r\n@ExceptionHandler(MethodArgumentNotValidException.class)\r\n@ResponseStatus(value = HttpStatus.BAD_GATEWAY)\r\npublic Map&lt;String, String&gt; handleMethodArgumentNotValidException(MethodArgumentNotValidException methodArgumentNotValidException) {\r\n\tMap&lt;String, String&gt; fieldException = new HashMap&lt;&gt;();\r\n\r\n\tmethodArgumentNotValidException.getBindingResult().getAllErrors().forEach(e -&gt; {\r\n\t\tfieldException.put(((FieldError) e).getField(), e.getDefaultMessage());\r\n\t});\r\n\r\n\treturn fieldException;\r\n}\r\n```\r\n\r\n*Here is error I get in postman after POST user with one null value*\r\n```\r\n&quot;timestamp&quot;: &quot;2022-09-10T06:00:08.526+00:00&quot;,\r\n    &quot;status&quot;: 500,\r\n    &quot;error&quot;: &quot;Internal Server Error&quot;,\r\n    &quot;trace&quot;: &quot;org.springframework.transaction.TransactionSystemException: Could not commit JPA transaction; nested exception is javax.persistence.RollbackException: Error while committing the transaction\\r\\n\\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:571)\\r\\n\\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\\r\\n\\tat org.springframework.transaction.support.\r\n```\r\n\r\n*Here is my eclipse ide Stack trace*\r\n```\r\n\r\njavax.validation.ConstraintViolationException: Validation failed for classes [com.hotel.booking.entity.User] during persist time for groups [javax.validation.groups.Default, ]\r\nList of constraint violations:[\r\n\tConstraintViolationImpl{interpolatedMessage=&#39;Please enter your contact number !!&#39;, propertyPath=contact, rootBeanClass=class com.hotel.booking.entity.User, messageTemplate=&#39;Please enter your contact number !!&#39;}\r\n]\r\n\tat org.hibernate.cfg.beanvalidation.BeanValidationEventListener.validate(BeanValidationEventListener.java:140) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.cfg.beanvalidation.BeanValidationEventListener.onPreInsert(BeanValidationEventListener.java:80) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.action.internal.EntityInsertAction.preInsert(EntityInsertAction.java:214) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:100) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721) ~[na:na]\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3290) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2425) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562) ~[spring-orm-5.3.22.jar:5.3.22]\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743) ~[spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711) ~[spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654) ~[spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407) ~[spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174) ~[spring-data-jpa-2.7.2.jar:2.7.2]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) ~[spring-aop-5.3.22.jar:5.3.22]\r\n\tat jdk.proxy5/jdk.proxy5.$Proxy146.save(Unknown Source) ~[na:na]\r\n\tat com.hotel.booking.service.UserServiceImpl.addUpdateUser(UserServiceImpl.java:46) ~[classes/:na]\r\n\tat com.hotel.booking.controller.UserController.addUser(UserController.java:25) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.22.jar:5.3.22]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.22.jar:5.3.22]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.65.jar:4.0.FR]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.22.jar:5.3.22]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.65.jar:4.0.FR]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:166) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:223) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:217) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186) ~[spring-security-web-5.7.3.jar:5.7.3]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.22.jar:5.3.22]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.22.jar:5.3.22]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.22.jar:5.3.22]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.22.jar:5.3.22]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.22.jar:5.3.22]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n```","title":"Javax.validation throwing InternerServerError 500 instead of BadRequest 400","body":"<p>I have <code>User</code> entity in my project. I add a javax.validation in my project to validate field level annotation. While I'm trying to insert User in a database with one null value, I get <code>500 Internal Server Error</code> but it should be <code>400 Bad Request</code> because I'm trying to handle this exception and give proper error message in postman.</p>\n<p>Here is my code:</p>\n<p><em>Entity</em></p>\n<pre><code>public class User {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Integer userId;\n    \n    @NotBlank(message = &quot;Username should not be null !!&quot;)\n    private String userName;\n    \n    @Email(message = &quot;Email is not valid !!&quot;)\n    private String email;\n    \n    @NotBlank(message = &quot;Password should not be null !!&quot;)\n    private String pasword;\n\n    @NotBlank(message = &quot;Please enter your contact number !!&quot;)\n    private String contact;\n\n}\n</code></pre>\n<p><em>Controller</em></p>\n<pre><code>@RequestMapping(value = &quot;/&quot;, method = RequestMethod.POST)\npublic ResponseEntity&lt;User&gt; addUser(@Valid @RequestBody UserModel userModel){\n    return ResponseEntity.ok(userService.addUser(userModel));\n}\n</code></pre>\n<p><em>Exception Handler</em></p>\n<pre><code>@ExceptionHandler(MethodArgumentNotValidException.class)\n@ResponseStatus(value = HttpStatus.BAD_GATEWAY)\npublic Map&lt;String, String&gt; handleMethodArgumentNotValidException(MethodArgumentNotValidException methodArgumentNotValidException) {\n    Map&lt;String, String&gt; fieldException = new HashMap&lt;&gt;();\n\n    methodArgumentNotValidException.getBindingResult().getAllErrors().forEach(e -&gt; {\n        fieldException.put(((FieldError) e).getField(), e.getDefaultMessage());\n    });\n\n    return fieldException;\n}\n</code></pre>\n<p><em>Here is error I get in postman after POST user with one null value</em></p>\n<pre><code>&quot;timestamp&quot;: &quot;2022-09-10T06:00:08.526+00:00&quot;,\n    &quot;status&quot;: 500,\n    &quot;error&quot;: &quot;Internal Server Error&quot;,\n    &quot;trace&quot;: &quot;org.springframework.transaction.TransactionSystemException: Could not commit JPA transaction; nested exception is javax.persistence.RollbackException: Error while committing the transaction\\r\\n\\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:571)\\r\\n\\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\\r\\n\\tat org.springframework.transaction.support.\n</code></pre>\n<p><em>Here is my eclipse ide Stack trace</em></p>\n<pre><code>\njavax.validation.ConstraintViolationException: Validation failed for classes [com.hotel.booking.entity.User] during persist time for groups [javax.validation.groups.Default, ]\nList of constraint violations:[\n    ConstraintViolationImpl{interpolatedMessage='Please enter your contact number !!', propertyPath=contact, rootBeanClass=class com.hotel.booking.entity.User, messageTemplate='Please enter your contact number !!'}\n]\n    at org.hibernate.cfg.beanvalidation.BeanValidationEventListener.validate(BeanValidationEventListener.java:140) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.cfg.beanvalidation.BeanValidationEventListener.onPreInsert(BeanValidationEventListener.java:80) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.action.internal.EntityInsertAction.preInsert(EntityInsertAction.java:214) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:100) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721) ~[na:na]\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3290) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2425) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101) ~[hibernate-core-5.6.10.Final.jar:5.6.10.Final]\n    at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562) ~[spring-orm-5.3.22.jar:5.3.22]\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743) ~[spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711) ~[spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654) ~[spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407) ~[spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174) ~[spring-data-jpa-2.7.2.jar:2.7.2]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) ~[spring-aop-5.3.22.jar:5.3.22]\n    at jdk.proxy5/jdk.proxy5.$Proxy146.save(Unknown Source) ~[na:na]\n    at com.hotel.booking.service.UserServiceImpl.addUpdateUser(UserServiceImpl.java:46) ~[classes/:na]\n    at com.hotel.booking.controller.UserController.addUser(UserController.java:25) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.65.jar:4.0.FR]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.22.jar:5.3.22]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.65.jar:4.0.FR]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:166) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:223) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:217) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186) ~[spring-security-web-5.7.3.jar:5.7.3]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.22.jar:5.3.22]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.65.jar:9.0.65]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n</code></pre>\n"},{"tags":["java","eclipse","maven","emacs","language-server-protocol"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1662621778,"post_id":73641224,"comment_id":130049164,"body_markdown":"Disabling incrementally compiling slows down develop-&gt;test cycle, since for running a test the code has to be compiled. Better found out, what causes everything to recompile. Maybe you have projects with build cycles causing this.","body":"Disabling incrementally compiling slows down develop-&gt;test cycle, since for running a test the code has to be compiled. Better found out, what causes everything to recompile. Maybe you have projects with build cycles causing this."},{"owner":{"account_id":10143724,"reputation":68,"user_id":7492588,"display_name":"kballou"},"score":0,"creation_date":1662656436,"post_id":73641224,"comment_id":130062136,"body_markdown":"I could understand if I needed to recompile a few files, but not every single file in both the `main` and `test` trees for every `mvn test` invocation.","body":"I could understand if I needed to recompile a few files, but not every single file in both the <code>main</code> and <code>test</code> trees for every <code>mvn test</code> invocation."},{"owner":{"account_id":10143724,"reputation":68,"user_id":7492588,"display_name":"kballou"},"score":0,"creation_date":1662656670,"post_id":73641224,"comment_id":130062205,"body_markdown":"To the other point, this is a very simple project.  Single pom project.  Granted, there are some antlr grammars which require generating source, but that doesn&#39;t seem to induce a cycle.  In fact, the output of Maven seems to indicate that if the sources were generated and the grammar files haven&#39;t been edited, it doesn&#39;t need to regenerate the source files.  I&#39;m not sure what requires everything to recompile.  My suspicion is Eclipse&#39;s JDTLS and Maven not interacting well, thus, the desire to disable the Eclipse side compilation.","body":"To the other point, this is a very simple project.  Single pom project.  Granted, there are some antlr grammars which require generating source, but that doesn&#39;t seem to induce a cycle.  In fact, the output of Maven seems to indicate that if the sources were generated and the grammar files haven&#39;t been edited, it doesn&#39;t need to regenerate the source files.  I&#39;m not sure what requires everything to recompile.  My suspicion is Eclipse&#39;s JDTLS and Maven not interacting well, thus, the desire to disable the Eclipse side compilation."},{"owner":{"account_id":10143724,"reputation":68,"user_id":7492588,"display_name":"kballou"},"score":0,"creation_date":1662657001,"post_id":73641224,"comment_id":130062313,"body_markdown":"One final clarification: Maven &quot;recompiles the module&quot; even if I just rerun the test suite *without* making changes.","body":"One final clarification: Maven &quot;recompiles the module&quot; even if I just rerun the test suite <i>without</i> making changes."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1662666186,"post_id":73641224,"comment_id":130065073,"body_markdown":"Sure, `mvn test` will compile everything before running your tests. For a fast develop-&gt;test cycle, run your tests directly from within Eclipse (so the incremental Java compiler of Eclipse is used; in contrast, Maven uses `javac` by default).","body":"Sure, <code>mvn test</code> will compile everything before running your tests. For a fast develop-&gt;test cycle, run your tests directly from within Eclipse (so the incremental Java compiler of Eclipse is used; in contrast, Maven uses <code>javac</code> by default)."},{"owner":{"account_id":10143724,"reputation":68,"user_id":7492588,"display_name":"kballou"},"score":0,"creation_date":1662671890,"post_id":73641224,"comment_id":130066519,"body_markdown":"I&#39;m not being clear enough.  I do not/cannot use Eclipse directly for various reasons not worth unpacking.  After reading [this question](https://stackoverflow.com/questions/16963012/maven-compiler-recompile-all-files-instead-modified), I do not want to change what Maven is doing.  I simply want to disable Eclipse&#39;s compilation pass, ideally without disabling the other static analysis features.","body":"I&#39;m not being clear enough.  I do not/cannot use Eclipse directly for various reasons not worth unpacking.  After reading <a href=\"https://stackoverflow.com/questions/16963012/maven-compiler-recompile-all-files-instead-modified\">this question</a>, I do not want to change what Maven is doing.  I simply want to disable Eclipse&#39;s compilation pass, ideally without disabling the other static analysis features."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1662703298,"post_id":73641224,"comment_id":130071185,"body_markdown":"Does [lsp-java](https://github.com/emacs-lsp/lsp-java) support directly running of your tests? If yes, choose this way instead of running your tests via Maven. Maven does not support incremental compilation in the sense JDT does. And by the way, [according to the lsp-java documentation](https://github.com/emacs-lsp/lsp-java#supported-settings), the setting you are looking for is `lsp-java-autobuild-enabled`.","body":"Does <a href=\"https://github.com/emacs-lsp/lsp-java\" rel=\"nofollow noreferrer\">lsp-java</a> support directly running of your tests? If yes, choose this way instead of running your tests via Maven. Maven does not support incremental compilation in the sense JDT does. And by the way, <a href=\"https://github.com/emacs-lsp/lsp-java#supported-settings\" rel=\"nofollow noreferrer\">according to the lsp-java documentation</a>, the setting you are looking for is <code>lsp-java-autobuild-enabled</code>."},{"owner":{"account_id":10143724,"reputation":68,"user_id":7492588,"display_name":"kballou"},"score":0,"creation_date":1662747451,"post_id":73641224,"comment_id":130085712,"body_markdown":"I&#39;m not sure how I missed that.  I think `lsp-java-autobuild-enabled` is what I wanted.  I&#39;m not sure I&#39;m seeing what I expect, but thank you!  @howlger, you have answered the desired question and have been plenty patient with me!\n`lsp-java` does have a way to run the tests directly, but part of the desire for disabling the JDT compilation is becuase it doesn&#39;t seem to build correctly given all the dependencies and such.  Granted, I&#39;m not sure how that works with debugger plugins (which do work).  Maybe my issues are somewhere else, entirely possible!","body":"I&#39;m not sure how I missed that.  I think <code>lsp-java-autobuild-enabled</code> is what I wanted.  I&#39;m not sure I&#39;m seeing what I expect, but thank you!  @howlger, you have answered the desired question and have been plenty patient with me! <code>lsp-java</code> does have a way to run the tests directly, but part of the desire for disabling the JDT compilation is becuase it doesn&#39;t seem to build correctly given all the dependencies and such.  Granted, I&#39;m not sure how that works with debugger plugins (which do work).  Maybe my issues are somewhere else, entirely possible!"}],"answers":[{"tags":[],"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662793423,"creation_date":1662793423,"answer_id":73669913,"question_id":73641224,"body_markdown":"According to the [lsp-java documentation][1], the setting you are looking for is **`lsp-java-autobuild-enabled`**.\r\n\r\nHowever, if there is a way to run the tests directly rather than via Maven, it would be faster since Maven does not support incremental compiling like JDT does (ideally, compiling should be done incrementally on save and not when running the application or a test).\r\n\r\n\r\n  [1]: https://github.com/emacs-lsp/lsp-java#supported-settings","title":"How to (manually) disable Eclipse jdt.ls compilation in Maven/Java projects","body":"<p>According to the <a href=\"https://github.com/emacs-lsp/lsp-java#supported-settings\" rel=\"nofollow noreferrer\">lsp-java documentation</a>, the setting you are looking for is <strong><code>lsp-java-autobuild-enabled</code></strong>.</p>\n<p>However, if there is a way to run the tests directly rather than via Maven, it would be faster since Maven does not support incremental compiling like JDT does (ideally, compiling should be done incrementally on save and not when running the application or a test).</p>\n"}],"owner":{"account_id":10143724,"reputation":68,"user_id":7492588,"display_name":"kballou"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":472,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73669913,"answer_count":1,"score":0,"last_activity_date":1662793423,"creation_date":1662583047,"question_id":73641224,"body_markdown":"I currently have a Maven Java 11 project that builds fine.  However, I use Eclipse&#39;s implementation of the language-server for editing the code within Emacs.  This works fine, everything that I really need is available.\r\n\r\nHowever, my question, is how can I disable the Eclipse LSP/compiler from attempting to auto-compile the project?  It&#39;s not always an issue, but often the JDTLS seems to be recompile everything all the time to the point that when I run Maven, it has to recompile everything again.  At best, this is a slowdown in the develop-&gt;test cycle.  At worst, I have to clean build frequently.\r\n\r\nEclipse has an option in its GUI which &quot;builds automatically&quot;.  I am curious, is there a text file I can toggle this setting with?","title":"How to (manually) disable Eclipse jdt.ls compilation in Maven/Java projects","body":"<p>I currently have a Maven Java 11 project that builds fine.  However, I use Eclipse's implementation of the language-server for editing the code within Emacs.  This works fine, everything that I really need is available.</p>\n<p>However, my question, is how can I disable the Eclipse LSP/compiler from attempting to auto-compile the project?  It's not always an issue, but often the JDTLS seems to be recompile everything all the time to the point that when I run Maven, it has to recompile everything again.  At best, this is a slowdown in the develop-&gt;test cycle.  At worst, I have to clean build frequently.</p>\n<p>Eclipse has an option in its GUI which &quot;builds automatically&quot;.  I am curious, is there a text file I can toggle this setting with?</p>\n"},{"tags":["java","coordinates"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1662793438,"post_id":73669879,"comment_id":130092361,"body_markdown":"Hi&amp;welcome to [so]! &#128578;&#128075;","body":"Hi&amp;welcome to <a href=\"https://stackoverflow.com\">Stack Overflow</a>! 🙂👋"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1662796860,"post_id":73669879,"comment_id":130092846,"body_markdown":"Maybe (latest, oracle) [javadoc](https://docs.oracle.com/en/java/javase/18/docs/api/java.desktop/java/awt/GridLayout.html) can enlighten!? :)","body":"Maybe (latest, oracle) <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.desktop/java/awt/GridLayout.html\" rel=\"nofollow noreferrer\">javadoc</a> can enlighten!? :)"}],"owner":{"account_id":26296480,"reputation":1,"user_id":19962637,"display_name":"Zhin TheTyrant"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662793057,"creation_date":1662793057,"question_id":73669879,"body_markdown":"I have made a Snake project in which I used a grid layout\r\nwith width 20 and height 20. The problem is that when I want to access any square in the panel, it gets  the square with the reversed coordinates. For example: when I use lightMeUp() method, which can change the color of the square, if I choose to color the square with coordinates (1,2) it will color instead (2,1) , and not only that but  \r\nother functions inside my project are also affected like this. Like for example when I try to color the positions which are traversed by the snake I have to reverse the coordinates in order to get the right squares colored. I will leave here some code that will show how I built the grid and the threads:\r\n \r\n\r\n        import java.awt.GridLayout;\r\n        import java.util.ArrayList;\r\n        import java.awt.event.KeyListener;\r\n        \r\n        \r\n        import javax.swing.JFrame;\r\n    \r\n    public class Window extends JFrame{\r\n    \r\n    \tpublic static ArrayList&lt;ArrayList&lt;DataOfSquare&gt;&gt; Grid;\r\n    \tpublic static int width=20;\r\n    \tpublic static int height=20;\r\n    \tpublic Window() {\r\n    \t\t//Creates the arraylist that&#39;ll contain the threads\r\n    \tGrid=new ArrayList&lt;ArrayList&lt;DataOfSquare&gt;&gt;();\r\n    \t\tArrayList&lt;DataOfSquare&gt; data;\r\n    \t\t\r\n    \t\t//Creates Threads and its data and adds it to the arrayList\r\n    \t\tfor(int i=0;i&lt;height;i++) {\r\n    \t\t\tdata=new ArrayList&lt;DataOfSquare&gt;();\r\n    \t\t\tfor(int j=0;j&lt;width;j++) {\r\n    \t\t\t\tDataOfSquare c=new DataOfSquare(2);\r\n    \t\t\t\tdata.add(c);\r\n    \t\t\t}\r\n    \t\t\tGrid.add(data);\r\n    \t\t}\r\n    \t\t//Setting up the layout of the panel\r\n    \t\tgetContentPane().setLayout(new GridLayout(20,20,5,5));\r\n    \t\t//Start and pauses all threads, then adds every square of each thread to the panel\r\n    \t\tfor(int i=0;i&lt;height;i++) {\r\n    \t\t\tfor(int j=0;j&lt;width;j++) {\r\n    \t\t\t\tgetContentPane().add(Grid.get(i).get(j).square);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\t//initial position of the snake\r\n    \t\tTuple position=new Tuple(5,5);\r\n    \t\t//passing this value to the controller\r\n    \t\tThreadsController c=new ThreadsController(position);\r\n    \t\t//Let&#39;s start the game \r\n    \t\tc.start();\r\n    \t\t\r\n    \t\t//Links the window to the keyboardListener\r\n    \t\tthis.addKeyListener((KeyListener) new KeyboardListener());\r\n    \t\t\r\n    \t}\r\n    }&#39;\r\n\r\nI also have other classes inside this project, but I don`t think they have anything to do with this problem so I showed just the code responsible for the grid layout.\r\nThere are no errors in my code, the code is doing well if I reverse the coordinates but I just do not understand why it is working like this. \r\nWhat do I have to do in order to have the coordinates in the right place ?\r\n","title":"java-The threads in my griddlayout have reversed coordinates","body":"<p>I have made a Snake project in which I used a grid layout\nwith width 20 and height 20. The problem is that when I want to access any square in the panel, it gets  the square with the reversed coordinates. For example: when I use lightMeUp() method, which can change the color of the square, if I choose to color the square with coordinates (1,2) it will color instead (2,1) , and not only that but<br />\nother functions inside my project are also affected like this. Like for example when I try to color the positions which are traversed by the snake I have to reverse the coordinates in order to get the right squares colored. I will leave here some code that will show how I built the grid and the threads:</p>\n<pre><code>    import java.awt.GridLayout;\n    import java.util.ArrayList;\n    import java.awt.event.KeyListener;\n    \n    \n    import javax.swing.JFrame;\n\npublic class Window extends JFrame{\n\n    public static ArrayList&lt;ArrayList&lt;DataOfSquare&gt;&gt; Grid;\n    public static int width=20;\n    public static int height=20;\n    public Window() {\n        //Creates the arraylist that'll contain the threads\n    Grid=new ArrayList&lt;ArrayList&lt;DataOfSquare&gt;&gt;();\n        ArrayList&lt;DataOfSquare&gt; data;\n        \n        //Creates Threads and its data and adds it to the arrayList\n        for(int i=0;i&lt;height;i++) {\n            data=new ArrayList&lt;DataOfSquare&gt;();\n            for(int j=0;j&lt;width;j++) {\n                DataOfSquare c=new DataOfSquare(2);\n                data.add(c);\n            }\n            Grid.add(data);\n        }\n        //Setting up the layout of the panel\n        getContentPane().setLayout(new GridLayout(20,20,5,5));\n        //Start and pauses all threads, then adds every square of each thread to the panel\n        for(int i=0;i&lt;height;i++) {\n            for(int j=0;j&lt;width;j++) {\n                getContentPane().add(Grid.get(i).get(j).square);\n            }\n        }\n        //initial position of the snake\n        Tuple position=new Tuple(5,5);\n        //passing this value to the controller\n        ThreadsController c=new ThreadsController(position);\n        //Let's start the game \n        c.start();\n        \n        //Links the window to the keyboardListener\n        this.addKeyListener((KeyListener) new KeyboardListener());\n        \n    }\n}'\n</code></pre>\n<p>I also have other classes inside this project, but I don`t think they have anything to do with this problem so I showed just the code responsible for the grid layout.\nThere are no errors in my code, the code is doing well if I reverse the coordinates but I just do not understand why it is working like this.\nWhat do I have to do in order to have the coordinates in the right place ?</p>\n"},{"tags":["java","byte-buddy"],"answers":[{"tags":[],"owner":{"account_id":1284143,"reputation":43090,"user_id":1237575,"accept_rate":96,"display_name":"Rafael Winterhalter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662792949,"creation_date":1662792949,"answer_id":73669869,"question_id":73657139,"body_markdown":"Yes, on the builder:\r\n\r\n    builder.invokeable(isTypeInitializer()).intercept(...)\r\n\r\nThis way you can define it just as any static method.","title":"ByteBuddy: generate a static initializer?","body":"<p>Yes, on the builder:</p>\n<pre><code>builder.invokeable(isTypeInitializer()).intercept(...)\n</code></pre>\n<p>This way you can define it just as any static method.</p>\n"}],"owner":{"account_id":17213890,"reputation":1600,"user_id":12462444,"display_name":"andreoss"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73669869,"answer_count":1,"score":0,"last_activity_date":1662792949,"creation_date":1662695312,"question_id":73657139,"body_markdown":"ByteBuddy provides `LoadedTypeInitializer` but it is not persisted in generated bytecode.\r\n\r\nIs it possible to generate a static initialisation block?\r\n```\r\nclass Foo { static { /** Added code here **/ } }\r\n```","title":"ByteBuddy: generate a static initializer?","body":"<p>ByteBuddy provides <code>LoadedTypeInitializer</code> but it is not persisted in generated bytecode.</p>\n<p>Is it possible to generate a static initialisation block?</p>\n<pre><code>class Foo { static { /** Added code here **/ } }\n</code></pre>\n"},{"tags":["java","maven","jackson","pom.xml","apache-beam"],"answers":[{"tags":[],"owner":{"account_id":25689785,"reputation":233,"user_id":19451374,"display_name":"Mohamed Haydar"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1662631892,"creation_date":1662631892,"answer_id":73647374,"question_id":73646899,"body_markdown":"I have solved the problem it is not enough to add ```jackson-core``` and ```jackson-databind``` dependencies you need to add ```jackson-annotations``` also ensure that the version is &gt;= 2.12.0 which includes the **ToStringSerializerBase**:\r\n\r\nIn your ``pom.xml``:\r\n```\r\n&lt;jackson.version&gt;2.13.4&lt;/jackson.version&gt;\r\n```\r\n```\r\n&lt;dependency&gt;\r\n     &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n     &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n     &lt;version&gt;${jackson.version}&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n     &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n     &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n     &lt;version&gt;${jackson.version}&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n     &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n     &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n     &lt;version&gt;${jackson.version}&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Apche beam Class Not Found Exception: Jackson","body":"<p>I have solved the problem it is not enough to add <code>jackson-core</code> and <code>jackson-databind</code> dependencies you need to add <code>jackson-annotations</code> also ensure that the version is &gt;= 2.12.0 which includes the <strong>ToStringSerializerBase</strong>:</p>\n<p>In your <code>pom.xml</code>:</p>\n<pre><code>&lt;jackson.version&gt;2.13.4&lt;/jackson.version&gt;\n</code></pre>\n<pre><code>&lt;dependency&gt;\n     &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n     &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n     &lt;version&gt;${jackson.version}&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n     &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n     &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n     &lt;version&gt;${jackson.version}&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n     &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n     &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n     &lt;version&gt;${jackson.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":25689785,"reputation":233,"user_id":19451374,"display_name":"Mohamed Haydar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":449,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1662635961,"accepted_answer_id":73647374,"answer_count":1,"score":2,"last_activity_date":1662792285,"creation_date":1662630018,"question_id":73646899,"body_markdown":"I was upgrading my apache beam pipeline version **2.27.0** to the latest version **2.41.0**\r\nWhen I run my pipeline I got this error:\r\n```\r\nException in thread &quot;main&quot; java.util.ServiceConfigurationError: com.fasterxml.jackson.databind.Module: com.fasterxml.jackson.datatype.jsr310.JavaTimeModule Unable to get public no-arg constructor\r\n\tat java.base/java.util.ServiceLoader.fail(ServiceLoader.java:582)\r\n\tat java.base/java.util.ServiceLoader.getConstructor(ServiceLoader.java:673)\r\n\tat java.base/java.util.ServiceLoader$LazyClassPathLookupIterator.hasNextService(ServiceLoader.java:1233)\r\n\tat java.base/java.util.ServiceLoader$LazyClassPathLookupIterator.hasNext(ServiceLoader.java:1265)\r\n\tat java.base/java.util.ServiceLoader$2.hasNext(ServiceLoader.java:1300)\r\n\tat java.base/java.util.ServiceLoader$3.hasNext(ServiceLoader.java:1385)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.findModules(ObjectMapper.java:982)\r\n\tat org.apache.beam.sdk.options.PipelineOptionsFactory.&lt;clinit&gt;(PipelineOptionsFactory.java:502)\r\n\tat \r\nCaused by: java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/ser/std/ToStringSerializerBase\r\n\tat java.base/java.lang.ClassLoader.defineClass1(Native Method)\r\n\tat java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1016)\r\n\tat java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:174)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:800)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:698)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:621)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:579)\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\r\n\tat java.base/java.lang.Class.getDeclaredConstructors0(Native Method)\r\n\tat java.base/java.lang.Class.privateGetDeclaredConstructors(Class.java:3137)\r\n\tat java.base/java.lang.Class.getConstructor0(Class.java:3342)\r\n\tat java.base/java.lang.Class.getConstructor(Class.java:2151)\r\n\tat java.base/java.util.ServiceLoader$1.run(ServiceLoader.java:660)\r\n\tat java.base/java.util.ServiceLoader$1.run(ServiceLoader.java:657)\r\n\tat java.base/java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.base/java.util.ServiceLoader.getConstructor(ServiceLoader.java:668)\r\n\t... 7 more\r\nCaused by: java.lang.ClassNotFoundException: com.fasterxml.jackson.databind.ser.std.ToStringSerializerBase\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\r\n\t... 24 more\r\n\r\n```\r\nI have included the jackson core dependency but yet same error\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.12.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n**Note that before upgrading the apache beam version the pipeline was running without this dependency**\r\n","title":"Apche beam Class Not Found Exception: Jackson","body":"<p>I was upgrading my apache beam pipeline version <strong>2.27.0</strong> to the latest version <strong>2.41.0</strong>\nWhen I run my pipeline I got this error:</p>\n<pre><code>Exception in thread &quot;main&quot; java.util.ServiceConfigurationError: com.fasterxml.jackson.databind.Module: com.fasterxml.jackson.datatype.jsr310.JavaTimeModule Unable to get public no-arg constructor\n    at java.base/java.util.ServiceLoader.fail(ServiceLoader.java:582)\n    at java.base/java.util.ServiceLoader.getConstructor(ServiceLoader.java:673)\n    at java.base/java.util.ServiceLoader$LazyClassPathLookupIterator.hasNextService(ServiceLoader.java:1233)\n    at java.base/java.util.ServiceLoader$LazyClassPathLookupIterator.hasNext(ServiceLoader.java:1265)\n    at java.base/java.util.ServiceLoader$2.hasNext(ServiceLoader.java:1300)\n    at java.base/java.util.ServiceLoader$3.hasNext(ServiceLoader.java:1385)\n    at com.fasterxml.jackson.databind.ObjectMapper.findModules(ObjectMapper.java:982)\n    at org.apache.beam.sdk.options.PipelineOptionsFactory.&lt;clinit&gt;(PipelineOptionsFactory.java:502)\n    at \nCaused by: java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/ser/std/ToStringSerializerBase\n    at java.base/java.lang.ClassLoader.defineClass1(Native Method)\n    at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1016)\n    at java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:174)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:800)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:698)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:621)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:579)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\n    at java.base/java.lang.Class.getDeclaredConstructors0(Native Method)\n    at java.base/java.lang.Class.privateGetDeclaredConstructors(Class.java:3137)\n    at java.base/java.lang.Class.getConstructor0(Class.java:3342)\n    at java.base/java.lang.Class.getConstructor(Class.java:2151)\n    at java.base/java.util.ServiceLoader$1.run(ServiceLoader.java:660)\n    at java.base/java.util.ServiceLoader$1.run(ServiceLoader.java:657)\n    at java.base/java.security.AccessController.doPrivileged(Native Method)\n    at java.base/java.util.ServiceLoader.getConstructor(ServiceLoader.java:668)\n    ... 7 more\nCaused by: java.lang.ClassNotFoundException: com.fasterxml.jackson.databind.ser.std.ToStringSerializerBase\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\n    ... 24 more\n\n</code></pre>\n<p>I have included the jackson core dependency but yet same error</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n            &lt;version&gt;2.12.3&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p><strong>Note that before upgrading the apache beam version the pipeline was running without this dependency</strong></p>\n"},{"tags":["java","bubble-sort"],"comments":[{"owner":{"account_id":22450291,"reputation":364,"user_id":16653700,"display_name":"Alias Cartellano"},"score":0,"creation_date":1662761998,"post_id":73667817,"comment_id":130088934,"body_markdown":"I think the line `if (list.get(i).compareTo(list.get(i+1)) &gt; 0) {\n                    swap(i, i + 1);` may be the issue, did you mean j instead of I?","body":"I think the line <code>if (list.get(i).compareTo(list.get(i+1)) &gt; 0) {                     swap(i, i + 1);</code> may be the issue, did you mean j instead of I?"},{"owner":{"account_id":22991252,"reputation":1,"user_id":17116718,"display_name":"NinjaDoge"},"score":0,"creation_date":1662767588,"post_id":73667817,"comment_id":130089725,"body_markdown":"Thank you, I overlooked that.","body":"Thank you, I overlooked that."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1662769547,"post_id":73667817,"comment_id":130089918,"body_markdown":"If that solved the problem, you might want to delete the question.","body":"If that solved the problem, you might want to delete the question."},{"owner":{"account_id":10528158,"reputation":334,"user_id":7758485,"display_name":"DiLDoST"},"score":0,"creation_date":1662831773,"post_id":73667817,"comment_id":130099219,"body_markdown":"Questions must not be deleted, instead he can answer his question and mark ✓ so others can learn from it","body":"Questions must not be deleted, instead he can answer his question and mark ✓ so others can learn from it"}],"answers":[{"tags":[],"owner":{"account_id":10528158,"reputation":334,"user_id":7758485,"display_name":"DiLDoST"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662783710,"creation_date":1662781238,"answer_id":73669114,"question_id":73667817,"body_markdown":"This is how Android did (binary) sorting (edited to fix this situation):\r\n\r\n\tpublic void binarySort() {\r\n\t\tint lo = 0; // sort start\r\n\t\tfor (int start=lo ; start &lt; number; start++) {\r\n            String pivot = list.get(start);\r\n\r\n            // Set left (and right) to the index where list.get(start) (pivot) belongs\r\n            int left = 0;\r\n            int right = start;\r\n            assert left &lt;= right;\r\n            /*\r\n             * Invariants:\r\n             *   pivot &gt;= all in [lo, left].\r\n             *   pivot &lt;  all in [right, start].\r\n             */\r\n            while (left &lt; right) {\r\n                int mid = (left + right) &gt;&gt;&gt; 1;\r\n                if (pivot.compareTo(list.get(mid)) &lt; 0)\r\n                    right = mid;\r\n                else\r\n                    left = mid + 1;\r\n            }\r\n            assert left == right;\r\n\r\n            /*\r\n             * The invariants still hold: pivot &gt;= all in [lo, left] and\r\n             * pivot &lt; all in [left, start], so pivot belongs at left.  Note\r\n             * that if there are elements equal to pivot, left points to the\r\n             * first slot after them -- that&#39;s why this sort is stable.\r\n             * Slide elements over to make room for pivot.\r\n             */\r\n            int n = start - left;  // The number of elements to move\r\n            // Switch is just reshifter in default case\r\n            switch (n) {\r\n                case 2:  list.set(left + 2,list.get(left + 1));\r\n                case 1:  list.set(left + 1,list.get(left));\r\n\t\t\t\t\tbreak;\r\n                default: \r\n\t\t\t\tif(n&gt;0){\r\n\t\t\t\t\tlist.add(left,list.remove(left+n));\r\n\t\t\t\t}\r\n            }\r\n            list.set(left,pivot);\r\n        }\r\n    }\r\n\r\nThis is how you can do (bubble) sorting:\r\n\r\n\tpublic void bubbleSort() {\r\n\t\tfor (int i = 0; i &lt; number; i++) {\r\n\t\t\tfor (int j = i + 1; j &lt; number; j++) {\r\n\t\t\t\tif (list.get(i).compareTo(list.get(j)) &gt; 0) {\r\n\t\t\t\t\tswap(i, j);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nBUBBLE SORTING V/S BINARY SORTING:\r\n---------------------------------\r\n**OFF TOPIC:** As you can compare above, bubble sorting is easier to code/read/understand and is also faster as compared to binary sorting, because binary sorting (actually) uses array recreation many times which ofcourse takes more time compared to swap.","title":"How do I fix this Java BubbleSort algorithm?","body":"<p>This is how Android did (binary) sorting (edited to fix this situation):</p>\n<pre><code>public void binarySort() {\n    int lo = 0; // sort start\n    for (int start=lo ; start &lt; number; start++) {\n        String pivot = list.get(start);\n\n        // Set left (and right) to the index where list.get(start) (pivot) belongs\n        int left = 0;\n        int right = start;\n        assert left &lt;= right;\n        /*\n         * Invariants:\n         *   pivot &gt;= all in [lo, left].\n         *   pivot &lt;  all in [right, start].\n         */\n        while (left &lt; right) {\n            int mid = (left + right) &gt;&gt;&gt; 1;\n            if (pivot.compareTo(list.get(mid)) &lt; 0)\n                right = mid;\n            else\n                left = mid + 1;\n        }\n        assert left == right;\n\n        /*\n         * The invariants still hold: pivot &gt;= all in [lo, left] and\n         * pivot &lt; all in [left, start], so pivot belongs at left.  Note\n         * that if there are elements equal to pivot, left points to the\n         * first slot after them -- that's why this sort is stable.\n         * Slide elements over to make room for pivot.\n         */\n        int n = start - left;  // The number of elements to move\n        // Switch is just reshifter in default case\n        switch (n) {\n            case 2:  list.set(left + 2,list.get(left + 1));\n            case 1:  list.set(left + 1,list.get(left));\n                break;\n            default: \n            if(n&gt;0){\n                list.add(left,list.remove(left+n));\n            }\n        }\n        list.set(left,pivot);\n    }\n}\n</code></pre>\n<p>This is how you can do (bubble) sorting:</p>\n<pre><code>public void bubbleSort() {\n    for (int i = 0; i &lt; number; i++) {\n        for (int j = i + 1; j &lt; number; j++) {\n            if (list.get(i).compareTo(list.get(j)) &gt; 0) {\n                swap(i, j);\n            }\n        }\n    }\n}\n</code></pre>\n<h2>BUBBLE SORTING V/S BINARY SORTING:</h2>\n<p><strong>OFF TOPIC:</strong> As you can compare above, bubble sorting is easier to code/read/understand and is also faster as compared to binary sorting, because binary sorting (actually) uses array recreation many times which ofcourse takes more time compared to swap.</p>\n"},{"tags":[],"owner":{"account_id":14320275,"reputation":1315,"user_id":10343888,"display_name":"fatih"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662792046,"creation_date":1662792046,"answer_id":73669801,"question_id":73667817,"body_markdown":"Because there is a problem with your `bubbleSort()` method. Please try this way.\r\n\r\n    public void bubbleSort() {\r\n\t    for (int i = 0; i &lt; number; i++) {\r\n\t        for (int j = 1; j &lt; number - i; j++) {\r\n\t            if (list.get(j - 1).compareTo(list.get(j)) &gt; 0) {\r\n\t                swap(j - 1, j);\r\n\t            }\r\n\t        }\r\n\t    }\r\n    }\r\n\r\n","title":"How do I fix this Java BubbleSort algorithm?","body":"<p>Because there is a problem with your <code>bubbleSort()</code> method. Please try this way.</p>\n<pre><code>public void bubbleSort() {\n    for (int i = 0; i &lt; number; i++) {\n        for (int j = 1; j &lt; number - i; j++) {\n            if (list.get(j - 1).compareTo(list.get(j)) &gt; 0) {\n                swap(j - 1, j);\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":22991252,"reputation":1,"user_id":17116718,"display_name":"NinjaDoge"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1662792046,"creation_date":1662760382,"question_id":73667817,"body_markdown":"I&#39;m doing a Java programming assignment which involves bubble sorting a .dat file BetelgeuseNames.dat with strings in it alphabetically. My AP Computer Science A teacher told me my code is correct, but it still gives the wrong output.\r\n\r\nThere are three classes called BubbleSort, BubbleSortTimer, and StopWatch. The program runs from BubbleSortTimer.\r\n\r\nBubbleSort:\r\n```\r\nimport java.util.ArrayList;\r\nimport javax.swing.JOptionPane;\r\nimport java.io.FileWriter;\r\nimport java.io.IOException;\r\n\r\npublic class BubbleSort {\r\n\r\n// Private instance variables:\r\n    private ArrayList&lt;String&gt; list;\r\n    private int number;\r\n\r\n    public BubbleSort(ArrayList&lt;String&gt; a_list) {\r\n        list = a_list;\r\n    }\r\n\r\n    public void swap(int first, int second) {\r\n        String temp1 = list.get(first);\r\n        String temp2 = list.get(second);\r\n        list.set(first, temp2);\r\n        list.set(second, temp1);\r\n\r\n    }\r\n\r\n    public int getNumber() {\r\n        String numStr;\r\n        numStr = JOptionPane.showInputDialog(&quot;How many names do you want to sort?&quot;);\r\n        number = Integer.parseInt(numStr);\r\n        return number;\r\n    }\r\n\r\n    public void printSorted() {\r\n        try {\r\n            FileWriter writer = new FileWriter(&quot;sorted.dat&quot;);\r\n            for (int i = 0; i &lt; number; i++) {\r\n                writer.write(list.get(i) + &quot;\\n&quot;);\r\n            }\r\n            writer.close();\r\n        } catch (IOException exception) {\t\r\n            System.out.println(&quot;Error processing file: &quot; + exception);\r\n        }\r\n    }\r\n\r\n    public void bubbleSort() {\r\n        for (int i = 0; i &lt; number; i++) {\r\n            for (int j = 0; j &lt; number - i - 1; j++) {\r\n                if (list.get(i).compareTo(list.get(i+1)) &gt; 0) {\r\n                    swap(i, i + 1);\r\n                }\r\n            }\r\n        }\r\n    } // End method\r\n}\r\n```\r\nBubbleSortTimer:\r\n```\r\nimport java.util.ArrayList;\r\nimport java.io.BufferedReader;\r\nimport java.io.FileReader;\r\nimport javax.swing.JOptionPane;\r\nimport java.io.IOException;\r\n\r\npublic class BubbleSortTimer {\r\n\r\n\tprivate ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n\r\n\tpublic void readNames() {\r\n\t\ttry {\t\r\n\t\t\tFileReader reader = new FileReader(&quot;BetelgeuseNames.dat&quot;);\t\r\n\t\t\tBufferedReader in = new BufferedReader(reader);\r\n\t\t\tboolean done = false;\r\n\t\t\tString name;\r\n\t\t\twhile (done == false) {\r\n\t\t\t\tname = in.readLine();\r\n\t\t\t\tif (name == null) {\r\n\t\t\t\t\tdone = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlist.add(name);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treader.close();\r\n\t\t} catch (IOException exception) {\t\r\n\t\t\tSystem.out.println(&quot;Error processing file: &quot; + exception);\r\n\t\t}\r\n\t} // End method\r\n\r\n\tpublic void runSort() {\r\n\t\treadNames();\r\n\t\tStopWatch timer = new StopWatch();\r\n\t\tBubbleSort sorter = new BubbleSort(list);\r\n\t\tint number = sorter.getNumber();\r\n\t\ttimer.start();\r\n\t\tsorter.bubbleSort();\r\n\t\ttimer.stop();\r\n\t\tsorter.printSorted();\r\n\t\tString msg = &quot;Number of names sorted: &quot; + number + &quot;\\nMilliseconds required to sort: &quot; + timer.getElapsedTime() + &quot;\\nOutput file is \\&quot;sorted.dat\\&quot;&quot;;\r\n\t\tJOptionPane.showMessageDialog(null, msg);\r\n\t}\r\n\t\t\r\n\tpublic static void main(String[] args) {\r\n\t\tBubbleSortTimer bubble = new BubbleSortTimer();\r\n\t\tbubble.runSort();\r\n\t}\r\n}\r\n```\r\nStopWatch:\r\n```\r\n/**\r\n * A stopwatch accumulates time when it is running.  You can \r\n * repeatedly start and stop the stopwatch.  You can use a\r\n * stopwatch to measure the running time of a program.\r\n * from section 18.2 of Horstmann&#39;s CCJ\r\n */\r\npublic class StopWatch {\r\n\t/**\r\n\t * Constructs a stopwatch that is in the stopped state\r\n\t * and has no time accumulated.\r\n\t */\r\n\tpublic StopWatch() {\r\n\t\treset();\r\n\t}\r\n\t\r\n\t/**\r\n\t* Starts the stopwatch.  Times starts accumulating now.\r\n\t*/\r\n\tpublic void start() {\t\t\r\n\t\tif (isRunning) return;\r\n\t\tisRunning = true;\r\n\t\tstartTime = System.currentTimeMillis();  \t\r\n\t}\r\n\t\r\n\t/**\r\n\t* Stops the stopwatch.  Time stops accumulating and is \r\n\t* added to the elapsed time.\r\n\t*/\r\n\tpublic void stop() {\t\r\n\t\tif (!isRunning) return;\r\n\t\tisRunning = false;\r\n\t\tlong endTime = System.currentTimeMillis();\r\n\t\telapsedTime = elapsedTime + endTime - startTime;\r\n\t}\r\n\t\r\n\t/**\r\n\t* Returns the total elapsed time.\r\n\t@return the total elapsed time\r\n\t*/\r\n\tpublic long getElapsedTime() {\t\r\n\t\tif (isRunning) {\t\r\n\t\t\tlong endTime = System.currentTimeMillis();\r\n\t\t\telapsedTime = elapsedTime + endTime - startTime;\r\n\t\t\tstartTime = endTime;\r\n\t\t}\r\n\t\treturn elapsedTime;\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * Stops the watch and resets the elapsed time to 0.\r\n\t */\r\n\tpublic void reset() {\t\r\n\t\telapsedTime = 0;\r\n\t\tisRunning = false;\r\n\t}    \t\r\n\r\n\tprivate long elapsedTime;\r\n\tprivate long startTime;\r\n\tprivate boolean isRunning;\r\n\r\n}\r\n```\r\nInput:\r\n```\r\nMoewm\r\nBmlzvltcso\r\nAqxjor\r\nWwgjie\r\nQqqtpivd\r\nXgyhaerv\r\nWqpjwdvxjq\r\nEcsfnow\r\nZlptuqxctt\r\nJhtprwvopk\r\n```\r\nExpected Output:\r\n```\r\nAqxjor\r\nBmlzvltcso\r\nEcsfnow\r\nJhtprwvopk\r\nMoewm\r\nQqqtpivd\r\nWqpjwdvxjq\r\nWwgjie\r\nXgyhaerv\r\nZlptuqxctt\r\n```\r\nActual Output:\r\n```\r\nBmlzvltcso\r\nAqxjor\r\nMoewm\r\nQqqtpivd\r\nWwgjie\r\nWqpjwdvxjq\r\nEcsfnow\r\nXgyhaerv\r\nJhtprwvopk\r\nZlptuqxctt\r\n```","title":"How do I fix this Java BubbleSort algorithm?","body":"<p>I'm doing a Java programming assignment which involves bubble sorting a .dat file BetelgeuseNames.dat with strings in it alphabetically. My AP Computer Science A teacher told me my code is correct, but it still gives the wrong output.</p>\n<p>There are three classes called BubbleSort, BubbleSortTimer, and StopWatch. The program runs from BubbleSortTimer.</p>\n<p>BubbleSort:</p>\n<pre><code>import java.util.ArrayList;\nimport javax.swing.JOptionPane;\nimport java.io.FileWriter;\nimport java.io.IOException;\n\npublic class BubbleSort {\n\n// Private instance variables:\n    private ArrayList&lt;String&gt; list;\n    private int number;\n\n    public BubbleSort(ArrayList&lt;String&gt; a_list) {\n        list = a_list;\n    }\n\n    public void swap(int first, int second) {\n        String temp1 = list.get(first);\n        String temp2 = list.get(second);\n        list.set(first, temp2);\n        list.set(second, temp1);\n\n    }\n\n    public int getNumber() {\n        String numStr;\n        numStr = JOptionPane.showInputDialog(&quot;How many names do you want to sort?&quot;);\n        number = Integer.parseInt(numStr);\n        return number;\n    }\n\n    public void printSorted() {\n        try {\n            FileWriter writer = new FileWriter(&quot;sorted.dat&quot;);\n            for (int i = 0; i &lt; number; i++) {\n                writer.write(list.get(i) + &quot;\\n&quot;);\n            }\n            writer.close();\n        } catch (IOException exception) {   \n            System.out.println(&quot;Error processing file: &quot; + exception);\n        }\n    }\n\n    public void bubbleSort() {\n        for (int i = 0; i &lt; number; i++) {\n            for (int j = 0; j &lt; number - i - 1; j++) {\n                if (list.get(i).compareTo(list.get(i+1)) &gt; 0) {\n                    swap(i, i + 1);\n                }\n            }\n        }\n    } // End method\n}\n</code></pre>\n<p>BubbleSortTimer:</p>\n<pre><code>import java.util.ArrayList;\nimport java.io.BufferedReader;\nimport java.io.FileReader;\nimport javax.swing.JOptionPane;\nimport java.io.IOException;\n\npublic class BubbleSortTimer {\n\n    private ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\n\n    public void readNames() {\n        try {   \n            FileReader reader = new FileReader(&quot;BetelgeuseNames.dat&quot;);  \n            BufferedReader in = new BufferedReader(reader);\n            boolean done = false;\n            String name;\n            while (done == false) {\n                name = in.readLine();\n                if (name == null) {\n                    done = true;\n                } else {\n                    list.add(name);\n                }\n            }\n            reader.close();\n        } catch (IOException exception) {   \n            System.out.println(&quot;Error processing file: &quot; + exception);\n        }\n    } // End method\n\n    public void runSort() {\n        readNames();\n        StopWatch timer = new StopWatch();\n        BubbleSort sorter = new BubbleSort(list);\n        int number = sorter.getNumber();\n        timer.start();\n        sorter.bubbleSort();\n        timer.stop();\n        sorter.printSorted();\n        String msg = &quot;Number of names sorted: &quot; + number + &quot;\\nMilliseconds required to sort: &quot; + timer.getElapsedTime() + &quot;\\nOutput file is \\&quot;sorted.dat\\&quot;&quot;;\n        JOptionPane.showMessageDialog(null, msg);\n    }\n        \n    public static void main(String[] args) {\n        BubbleSortTimer bubble = new BubbleSortTimer();\n        bubble.runSort();\n    }\n}\n</code></pre>\n<p>StopWatch:</p>\n<pre><code>/**\n * A stopwatch accumulates time when it is running.  You can \n * repeatedly start and stop the stopwatch.  You can use a\n * stopwatch to measure the running time of a program.\n * from section 18.2 of Horstmann's CCJ\n */\npublic class StopWatch {\n    /**\n     * Constructs a stopwatch that is in the stopped state\n     * and has no time accumulated.\n     */\n    public StopWatch() {\n        reset();\n    }\n    \n    /**\n    * Starts the stopwatch.  Times starts accumulating now.\n    */\n    public void start() {       \n        if (isRunning) return;\n        isRunning = true;\n        startTime = System.currentTimeMillis();     \n    }\n    \n    /**\n    * Stops the stopwatch.  Time stops accumulating and is \n    * added to the elapsed time.\n    */\n    public void stop() {    \n        if (!isRunning) return;\n        isRunning = false;\n        long endTime = System.currentTimeMillis();\n        elapsedTime = elapsedTime + endTime - startTime;\n    }\n    \n    /**\n    * Returns the total elapsed time.\n    @return the total elapsed time\n    */\n    public long getElapsedTime() {  \n        if (isRunning) {    \n            long endTime = System.currentTimeMillis();\n            elapsedTime = elapsedTime + endTime - startTime;\n            startTime = endTime;\n        }\n        return elapsedTime;\n    }\n        \n    /**\n     * Stops the watch and resets the elapsed time to 0.\n     */\n    public void reset() {   \n        elapsedTime = 0;\n        isRunning = false;\n    }       \n\n    private long elapsedTime;\n    private long startTime;\n    private boolean isRunning;\n\n}\n</code></pre>\n<p>Input:</p>\n<pre><code>Moewm\nBmlzvltcso\nAqxjor\nWwgjie\nQqqtpivd\nXgyhaerv\nWqpjwdvxjq\nEcsfnow\nZlptuqxctt\nJhtprwvopk\n</code></pre>\n<p>Expected Output:</p>\n<pre><code>Aqxjor\nBmlzvltcso\nEcsfnow\nJhtprwvopk\nMoewm\nQqqtpivd\nWqpjwdvxjq\nWwgjie\nXgyhaerv\nZlptuqxctt\n</code></pre>\n<p>Actual Output:</p>\n<pre><code>Bmlzvltcso\nAqxjor\nMoewm\nQqqtpivd\nWwgjie\nWqpjwdvxjq\nEcsfnow\nXgyhaerv\nJhtprwvopk\nZlptuqxctt\n</code></pre>\n"},{"tags":["java","openapi","openapi-generator","codegen"],"comments":[{"owner":{"account_id":39252,"reputation":89802,"user_id":113116,"display_name":"Helen"},"score":0,"creation_date":1664484251,"post_id":73658959,"comment_id":130489069,"body_markdown":"Does this answer your question? [OpenAPI 3.0 valid minimum and maximum values](https://stackoverflow.com/q/60808674/113116)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/q/60808674/113116\">OpenAPI 3.0 valid minimum and maximum values</a>"}],"answers":[{"tags":[],"owner":{"account_id":10251787,"reputation":86,"user_id":7565792,"display_name":"Mihael Mihov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662791644,"creation_date":1662720246,"answer_id":73660919,"question_id":73658959,"body_markdown":"Maybe you should remove the format: float from your schema. Floating point arithmetic is unreliable. Leave the field as BigDecimal and see if it works.\r\n\r\n@DecimalMin and @DecimalMax work for BigDecimals and not float as per documentation\r\n\r\nhttps://docs.oracle.com/javaee/7/api/javax/validation/constraints/DecimalMin.html\r\n\r\nExcerpt from Oracle docs:\r\n\r\n&gt; Note that `double` and `float` are not supported due to rounding errors (some providers might provide some approximative support).\r\n&gt;\r\n&gt;`null` elements are considered valid.","title":"Set Min and Max values between 0.1 and 0.9 in OpenApi","body":"<p>Maybe you should remove the format: float from your schema. Floating point arithmetic is unreliable. Leave the field as BigDecimal and see if it works.</p>\n<p>@DecimalMin and @DecimalMax work for BigDecimals and not float as per documentation</p>\n<p><a href=\"https://docs.oracle.com/javaee/7/api/javax/validation/constraints/DecimalMin.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javaee/7/api/javax/validation/constraints/DecimalMin.html</a></p>\n<p>Excerpt from Oracle docs:</p>\n<blockquote>\n<p>Note that <code>double</code> and <code>float</code> are not supported due to rounding errors (some providers might provide some approximative support).</p>\n<p><code>null</code> elements are considered valid.</p>\n</blockquote>\n"}],"owner":{"account_id":12509045,"reputation":661,"user_id":9104942,"display_name":"Abdusoli"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":756,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662791644,"creation_date":1662709965,"question_id":73658959,"body_markdown":"I defined **missingRatio** variable in my openApi yaml file as below. Openapi version is **&quot;3.0.0&quot;**\r\n\r\n**api.yaml**\r\n```\r\nmissingRatio:\r\n  type: number\r\n  format: float\r\n  minimum: 0.1\r\n  maximum: 0.3\r\n  default: 0.2\r\n  multipleOf: 0.1\r\n  description: &quot;Ratio of data to remove for validation&quot;\r\n```\r\n\r\nBut unfortunately in generated code **min and max values are set to 0**. So when I use, it only accepts **0** as value.\r\n\r\n**generated code**\r\n```\r\n  /**\r\n   * Ratio of data to remove for validation\r\n   * minimum: 0\r\n   * maximum: 0\r\n   * @return missingRatio\r\n  **/\r\n  @ApiModelProperty(value = &quot;Ratio of data to remove for validation&quot;)\r\n\r\n  @DecimalMin(&quot;0&quot;) @DecimalMax(&quot;0&quot;) \r\n  public Float getMissingRatio() {\r\n    return missingRatio;\r\n  }\r\n```\r\n\r\nHow Can I resolve this issue?","title":"Set Min and Max values between 0.1 and 0.9 in OpenApi","body":"<p>I defined <strong>missingRatio</strong> variable in my openApi yaml file as below. Openapi version is <strong>&quot;3.0.0&quot;</strong></p>\n<p><strong>api.yaml</strong></p>\n<pre><code>missingRatio:\n  type: number\n  format: float\n  minimum: 0.1\n  maximum: 0.3\n  default: 0.2\n  multipleOf: 0.1\n  description: &quot;Ratio of data to remove for validation&quot;\n</code></pre>\n<p>But unfortunately in generated code <strong>min and max values are set to 0</strong>. So when I use, it only accepts <strong>0</strong> as value.</p>\n<p><strong>generated code</strong></p>\n<pre><code>  /**\n   * Ratio of data to remove for validation\n   * minimum: 0\n   * maximum: 0\n   * @return missingRatio\n  **/\n  @ApiModelProperty(value = &quot;Ratio of data to remove for validation&quot;)\n\n  @DecimalMin(&quot;0&quot;) @DecimalMax(&quot;0&quot;) \n  public Float getMissingRatio() {\n    return missingRatio;\n  }\n</code></pre>\n<p>How Can I resolve this issue?</p>\n"},{"tags":["java","maven","protocol-buffers","confluent-schema-registry"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1661868668,"post_id":73542573,"comment_id":129870768,"body_markdown":"Add debug=true to the registry properties, then look at the server logs","body":"Add debug=true to the registry properties, then look at the server logs"},{"owner":{"account_id":12694090,"reputation":11,"user_id":10790510,"display_name":"Maddin"},"score":1,"creation_date":1662020100,"post_id":73542573,"comment_id":129910732,"body_markdown":"@OneCricketeer thanks, I&#39;ll try that and see if there is a problem.","body":"@OneCricketeer thanks, I&#39;ll try that and see if there is a problem."},{"owner":{"account_id":12694090,"reputation":11,"user_id":10790510,"display_name":"Maddin"},"score":0,"creation_date":1662581947,"post_id":73542573,"comment_id":130041913,"body_markdown":"@OneCricketeer I did that, but the server does not get any request. The error happens in maven before it is send. I&#39;m a bit lost with that...","body":"@OneCricketeer I did that, but the server does not get any request. The error happens in maven before it is send. I&#39;m a bit lost with that..."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1662582037,"post_id":73542573,"comment_id":130041939,"body_markdown":"You are getting an HTML response from _some HTTP client_ trying to talk to some registry endpoint, not Maven itself.","body":"You are getting an HTML response from <i>some HTTP client</i> trying to talk to some registry endpoint, not Maven itself."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1662582127,"post_id":73542573,"comment_id":130041971,"body_markdown":"Worth pointing out that port 8098 is not the default registry address. Did you intend to change this for a specific reason?","body":"Worth pointing out that port 8098 is not the default registry address. Did you intend to change this for a specific reason?"},{"owner":{"account_id":12694090,"reputation":11,"user_id":10790510,"display_name":"Maddin"},"score":1,"creation_date":1662582470,"post_id":73542573,"comment_id":130042074,"body_markdown":"Yes, I used some other ports. It also was the problem because I had a typo. Oh shit, that is embarrassing ... sometimes you look on your code and miss the obvious. Thanks for the help anyway, pointed me in the right direction.","body":"Yes, I used some other ports. It also was the problem because I had a typo. Oh shit, that is embarrassing ... sometimes you look on your code and miss the obvious. Thanks for the help anyway, pointed me in the right direction."}],"answers":[{"tags":[],"owner":{"account_id":12694090,"reputation":11,"user_id":10790510,"display_name":"Maddin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662790791,"creation_date":1662790791,"answer_id":73669705,"question_id":73542573,"body_markdown":"I answer my own question and hope it helps someone. If you have this error, check the connection to the schema server. A bit embarrassing that I totally oversaw the typo in the port, but sometimes it happens that you do not see your obvious mistakes. \r\nThanks to @OneCricketeer pointed me in that direction, so that i checked this setting again. ","title":"Maven plugin with protobuf RestClientException: Unexpected character (&#39;&lt;&#39; (code 60)):","body":"<p>I answer my own question and hope it helps someone. If you have this error, check the connection to the schema server. A bit embarrassing that I totally oversaw the typo in the port, but sometimes it happens that you do not see your obvious mistakes.\nThanks to @OneCricketeer pointed me in that direction, so that i checked this setting again.</p>\n"}],"owner":{"account_id":12694090,"reputation":11,"user_id":10790510,"display_name":"Maddin"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":212,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73669705,"answer_count":1,"score":1,"last_activity_date":1662790791,"creation_date":1661863026,"question_id":73542573,"body_markdown":"i have a problem to get the maven plugin running in version 7.2.1. Versions of the server are also all 7.2.1. I have a simple development setup with kafka, zookeeper, schema registry and kqsldb. I configured the plugin according to the documentation and i always get the following error when I run the mojo register.\r\n\r\n```\r\nmvn -X -P Schema-registration kafka-schema-registry-maven-plugin:7.2.1:register\r\n\r\n[DEBUG] Processing schema for subject(law-download-events-value).\r\n[DEBUG] Calling register(&#39;law-download-events-value&#39;, &#39;syntax = &quot;proto3&quot;;\r\npackage datamanager.entities;\r\n\r\noption java_multiple_files = true;\r\noption java_package = &quot;org.mjm.DataManager.DMEntities.entities.protos&quot;;\r\noption java_outer_classname = &quot;LawDownloadEventProtos&quot;;\r\noption optimize_for = SPEED;\r\n\r\nmessage LawDownloadEvent {\r\n  LawDownloadEventType type = 1;\r\n\r\n  enum LawDownloadEventType {\r\n    CHECK_DECISIONS = 0;\r\n    CHECK_LAWS = 1;\r\n  }\r\n}\r\n&#39;)\r\n[DEBUG] Sending POST with input {&quot;schemaType&quot;:&quot;PROTOBUF&quot;,&quot;schema&quot;:&quot;syntax = \\&quot;proto3\\&quot;;\\npackage datamanager.entities;\\n\\noption java_multiple_files = true;\\noption java_package = \\&quot;org.mjm.DataManager.DMEntities.entities.protos\\&quot;;\\noption java_outer_classname = \\&quot;LawDownloadEventProtos\\&quot;;\\noption optimize_for = SPEED;\\n\\nmessage LawDownloadEvent {\\n  LawDownloadEventType type = 1;\\n\\n  enum LawDownloadEventType {\\n    CHECK_DECISIONS = 0;\\n    CHECK_LAWS = 1;\\n  }\\n}\\n&quot;} to http://127.0.0.1:8098/subjects/law-download-events-value/versions?normalize=false\r\n[ERROR] Exception thrown while processing law-download-events-value\r\nio.confluent.kafka.schemaregistry.client.rest.exceptions.RestClientException: Unexpected character (&#39;&lt;&#39; (code 60)): expected a valid value (JSON String, Number (or &#39;NaN&#39;/&#39;INF&#39;/&#39;+INF&#39;), Array, Object or token &#39;null&#39;, &#39;true&#39; or &#39;false&#39;)\r\n at [Source: (sun.net.www.protocol.http.HttpURLConnection$HttpInputStream); line: 1, column: 2]; error code: 50005\r\n    at io.confluent.kafka.schemaregistry.client.rest.RestService.sendHttpRequest (RestService.java:301)\r\n    at io.confluent.kafka.schemaregistry.client.rest.RestService.httpRequest (RestService.java:371)\r\n    at io.confluent.kafka.schemaregistry.client.rest.RestService.registerSchema (RestService.java:548)\r\n    at io.confluent.kafka.schemaregistry.client.rest.RestService.registerSchema (RestService.java:536)\r\n    at io.confluent.kafka.schemaregistry.client.rest.RestService.registerSchema (RestService.java:494)\r\n    at io.confluent.kafka.schemaregistry.client.CachedSchemaRegistryClient.registerAndGetId (CachedSchemaRegistryClient.java:274)\r\n    at io.confluent.kafka.schemaregistry.client.CachedSchemaRegistryClient.register (CachedSchemaRegistryClient.java:381)\r\n    at io.confluent.kafka.schemaregistry.client.CachedSchemaRegistryClient.register (CachedSchemaRegistryClient.java:354)\r\n    at io.confluent.kafka.schemaregistry.maven.RegisterSchemaRegistryMojo.processSchema (RegisterSchemaRegistryMojo.java:48)\r\n    at io.confluent.kafka.schemaregistry.maven.UploadSchemaRegistryMojo.processSubject (UploadSchemaRegistryMojo.java:121)\r\n    at io.confluent.kafka.schemaregistry.maven.UploadSchemaRegistryMojo.execute (UploadSchemaRegistryMojo.java:85)\r\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:370)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:351)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:171)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:163)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:294)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\r\n    at jdk.internal.reflect.DirectMethodHandleAccessor.invoke (DirectMethodHandleAccessor.java:104)\r\n    at java.lang.reflect.Method.invoke (Method.java:577)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  1.474 s\r\n[INFO] Finished at: 2022-08-28T12:15:08+02:00\r\n[INFO] ------------------------------------------------------------------------\r\n\r\n```\r\n\r\nIf I copy the schema from the post output and run it with curl (or Insomnia Rest Client) directly on the given url, it works normally. \r\nI can not find any solution to that problem. I checked all the files and the server logs and they are all fine (from my point of view). \r\n\r\nHere is the config of the plugin:\r\n\r\n```\r\n&lt;plugin&gt;\r\n                        &lt;groupId&gt;io.confluent&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;kafka-schema-registry-maven-plugin&lt;/artifactId&gt;\r\n                        &lt;version&gt;7.2.1&lt;/version&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;schemaRegistryUrls&gt;\r\n                                &lt;param&gt;http://127.0.0.1:8098&lt;/param&gt;\r\n                            &lt;/schemaRegistryUrls&gt;\r\n                            &lt;outputDirectory&gt;src/main/proto/downloaded&lt;/outputDirectory&gt;\r\n                            &lt;subjects&gt;\r\n                                &lt;law-download-events-value&gt;src/main/proto/law_download_event_proto.proto&lt;/law-download-events-value&gt;\r\n                            &lt;/subjects&gt;\r\n                            &lt;schemaTypes&gt;\r\n                                &lt;law-download-events-value&gt;PROTOBUF&lt;/law-download-events-value&gt;\r\n                            &lt;/schemaTypes&gt;\r\n                            &lt;compatibilityLevels/&gt;\r\n                            &lt;previousSchemaPaths/&gt;\r\n                            &lt;schemas/&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/plugin&gt;\r\n```\r\n\r\nHere is the example protobuf file:\r\n\r\n```\r\nsyntax = &quot;proto3&quot;;\r\n\r\npackage datamanager.entities;\r\n\r\noption java_multiple_files = true;\r\noption java_package = &quot;org.mjm.DataManager.DMEntities.entities.protos&quot;;\r\noption java_outer_classname = &quot;LawDownloadEventProtos&quot;;\r\noption optimize_for = SPEED;\r\n\r\nmessage LawDownloadEvent {\r\n  LawDownloadEventType type = 1;\r\n\r\n  enum LawDownloadEventType {\r\n    CHECK_DECISIONS = 0;\r\n    CHECK_LAWS = 1;\r\n  }\r\n}\r\n```\r\n\r\nI don&#39;t know where to look anymore. Any help is more than welcome. Thanks in advance ...\r\n\r\nBest Martin","title":"Maven plugin with protobuf RestClientException: Unexpected character (&#39;&lt;&#39; (code 60)):","body":"<p>i have a problem to get the maven plugin running in version 7.2.1. Versions of the server are also all 7.2.1. I have a simple development setup with kafka, zookeeper, schema registry and kqsldb. I configured the plugin according to the documentation and i always get the following error when I run the mojo register.</p>\n<pre><code>mvn -X -P Schema-registration kafka-schema-registry-maven-plugin:7.2.1:register\n\n[DEBUG] Processing schema for subject(law-download-events-value).\n[DEBUG] Calling register('law-download-events-value', 'syntax = &quot;proto3&quot;;\npackage datamanager.entities;\n\noption java_multiple_files = true;\noption java_package = &quot;org.mjm.DataManager.DMEntities.entities.protos&quot;;\noption java_outer_classname = &quot;LawDownloadEventProtos&quot;;\noption optimize_for = SPEED;\n\nmessage LawDownloadEvent {\n  LawDownloadEventType type = 1;\n\n  enum LawDownloadEventType {\n    CHECK_DECISIONS = 0;\n    CHECK_LAWS = 1;\n  }\n}\n')\n[DEBUG] Sending POST with input {&quot;schemaType&quot;:&quot;PROTOBUF&quot;,&quot;schema&quot;:&quot;syntax = \\&quot;proto3\\&quot;;\\npackage datamanager.entities;\\n\\noption java_multiple_files = true;\\noption java_package = \\&quot;org.mjm.DataManager.DMEntities.entities.protos\\&quot;;\\noption java_outer_classname = \\&quot;LawDownloadEventProtos\\&quot;;\\noption optimize_for = SPEED;\\n\\nmessage LawDownloadEvent {\\n  LawDownloadEventType type = 1;\\n\\n  enum LawDownloadEventType {\\n    CHECK_DECISIONS = 0;\\n    CHECK_LAWS = 1;\\n  }\\n}\\n&quot;} to http://127.0.0.1:8098/subjects/law-download-events-value/versions?normalize=false\n[ERROR] Exception thrown while processing law-download-events-value\nio.confluent.kafka.schemaregistry.client.rest.exceptions.RestClientException: Unexpected character ('&lt;' (code 60)): expected a valid value (JSON String, Number (or 'NaN'/'INF'/'+INF'), Array, Object or token 'null', 'true' or 'false')\n at [Source: (sun.net.www.protocol.http.HttpURLConnection$HttpInputStream); line: 1, column: 2]; error code: 50005\n    at io.confluent.kafka.schemaregistry.client.rest.RestService.sendHttpRequest (RestService.java:301)\n    at io.confluent.kafka.schemaregistry.client.rest.RestService.httpRequest (RestService.java:371)\n    at io.confluent.kafka.schemaregistry.client.rest.RestService.registerSchema (RestService.java:548)\n    at io.confluent.kafka.schemaregistry.client.rest.RestService.registerSchema (RestService.java:536)\n    at io.confluent.kafka.schemaregistry.client.rest.RestService.registerSchema (RestService.java:494)\n    at io.confluent.kafka.schemaregistry.client.CachedSchemaRegistryClient.registerAndGetId (CachedSchemaRegistryClient.java:274)\n    at io.confluent.kafka.schemaregistry.client.CachedSchemaRegistryClient.register (CachedSchemaRegistryClient.java:381)\n    at io.confluent.kafka.schemaregistry.client.CachedSchemaRegistryClient.register (CachedSchemaRegistryClient.java:354)\n    at io.confluent.kafka.schemaregistry.maven.RegisterSchemaRegistryMojo.processSchema (RegisterSchemaRegistryMojo.java:48)\n    at io.confluent.kafka.schemaregistry.maven.UploadSchemaRegistryMojo.processSubject (UploadSchemaRegistryMojo.java:121)\n    at io.confluent.kafka.schemaregistry.maven.UploadSchemaRegistryMojo.execute (UploadSchemaRegistryMojo.java:85)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:370)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:351)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:171)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:163)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:294)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\n    at jdk.internal.reflect.DirectMethodHandleAccessor.invoke (DirectMethodHandleAccessor.java:104)\n    at java.lang.reflect.Method.invoke (Method.java:577)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  1.474 s\n[INFO] Finished at: 2022-08-28T12:15:08+02:00\n[INFO] ------------------------------------------------------------------------\n\n</code></pre>\n<p>If I copy the schema from the post output and run it with curl (or Insomnia Rest Client) directly on the given url, it works normally.\nI can not find any solution to that problem. I checked all the files and the server logs and they are all fine (from my point of view).</p>\n<p>Here is the config of the plugin:</p>\n<pre><code>&lt;plugin&gt;\n                        &lt;groupId&gt;io.confluent&lt;/groupId&gt;\n                        &lt;artifactId&gt;kafka-schema-registry-maven-plugin&lt;/artifactId&gt;\n                        &lt;version&gt;7.2.1&lt;/version&gt;\n                        &lt;configuration&gt;\n                            &lt;schemaRegistryUrls&gt;\n                                &lt;param&gt;http://127.0.0.1:8098&lt;/param&gt;\n                            &lt;/schemaRegistryUrls&gt;\n                            &lt;outputDirectory&gt;src/main/proto/downloaded&lt;/outputDirectory&gt;\n                            &lt;subjects&gt;\n                                &lt;law-download-events-value&gt;src/main/proto/law_download_event_proto.proto&lt;/law-download-events-value&gt;\n                            &lt;/subjects&gt;\n                            &lt;schemaTypes&gt;\n                                &lt;law-download-events-value&gt;PROTOBUF&lt;/law-download-events-value&gt;\n                            &lt;/schemaTypes&gt;\n                            &lt;compatibilityLevels/&gt;\n                            &lt;previousSchemaPaths/&gt;\n                            &lt;schemas/&gt;\n                        &lt;/configuration&gt;\n                    &lt;/plugin&gt;\n</code></pre>\n<p>Here is the example protobuf file:</p>\n<pre><code>syntax = &quot;proto3&quot;;\n\npackage datamanager.entities;\n\noption java_multiple_files = true;\noption java_package = &quot;org.mjm.DataManager.DMEntities.entities.protos&quot;;\noption java_outer_classname = &quot;LawDownloadEventProtos&quot;;\noption optimize_for = SPEED;\n\nmessage LawDownloadEvent {\n  LawDownloadEventType type = 1;\n\n  enum LawDownloadEventType {\n    CHECK_DECISIONS = 0;\n    CHECK_LAWS = 1;\n  }\n}\n</code></pre>\n<p>I don't know where to look anymore. Any help is more than welcome. Thanks in advance ...</p>\n<p>Best Martin</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"answers":[{"tags":[],"owner":{"account_id":5534873,"reputation":18496,"user_id":4393565,"accept_rate":67,"display_name":"P.J.Meisch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662743933,"creation_date":1662743933,"answer_id":73665538,"question_id":73664685,"body_markdown":"Error 404 means that the endpoint (/api/authorization/company-login) is not found, meaning there is no controller registered on that path mapping.\r\n\r\nMake sure that this path is correct in your configuration and matches the controller mapping.","title":"SpringSecurityConfiguration - permitAll() does not work","body":"<p>Error 404 means that the endpoint (/api/authorization/company-login) is not found, meaning there is no controller registered on that path mapping.</p>\n<p>Make sure that this path is correct in your configuration and matches the controller mapping.</p>\n"},{"tags":[],"owner":{"account_id":21967042,"reputation":84,"user_id":16244113,"display_name":"mamJavad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662790562,"creation_date":1662790509,"answer_id":73669683,"question_id":73664685,"body_markdown":"if you are getting 404 so it is working because 404 is for not found and 403 is for authorization . check your URL at controller first and then check output of the calling method in controller.","title":"SpringSecurityConfiguration - permitAll() does not work","body":"<p>if you are getting 404 so it is working because 404 is for not found and 403 is for authorization . check your URL at controller first and then check output of the calling method in controller.</p>\n"}],"owner":{"account_id":9213369,"reputation":33,"user_id":6845613,"display_name":"TheBezwet"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":203,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1662790562,"creation_date":1662738843,"question_id":73664685,"body_markdown":"I&#39;m trying to configure SpringSecurity for my application, but despite using permitAll() for one of my endpoints(/api/authorization/company-login) I keep getting 404 exceptions. \r\nFor other endpoints, I get 403 (Forbidden) which is completely right cause I also use anyRequest().authenticated(), for the others. \r\nSo it seems that while anyRequest().authenticated() works, permitAll doesn&#39;t. \r\n\r\nI&#39;m also sure that I put it in the right order, cause my permitAll() is before anyRequest().authenticated(). \r\n\r\nPath to the endpoint also seems right cause if I would change path in: antMatchers(&quot;/api/authorization/company-login&quot;).permitAll() for some other then for /api/authorization/company-login I&#39;m getting 403 (what is expected in such case). I&#39;m not sure what is wrong in my configuration and how to make /api/authorization/company-login endpoint accessible for all.\r\n\r\n**Dependencies I use for spring security:**\r\n\r\n    &lt;!-- Spring Security --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n**My spring security configuration:**\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SpringSecurityConfiguration {\r\n    \r\n        @Autowired\r\n        private GoAuthorizationFilter goAuthorizationFilter;\r\n    \r\n        @Autowired\r\n        private GoAuthenticationEntryPoint goAuthenticationEntryPoint;\r\n    \r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            http.cors().and().csrf().disable()\r\n                    .exceptionHandling()\r\n                    .authenticationEntryPoint(goAuthenticationEntryPoint).and()\r\n                    .sessionManagement().and().sessionManagement()\r\n                    .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                    .and()\r\n                    .addFilterBefore(goAuthorizationFilter, UsernamePasswordAuthenticationFilter.class)\r\n                    .authorizeRequests()\r\n                    .antMatchers(&quot;/api/authorization/company-login&quot;).permitAll()\r\n                    .anyRequest().authenticated();\r\n    \r\n            return http.build();\r\n        }\r\n    \r\n\r\n**Authentication Entry Point:**\r\n\r\n    @Component\r\n    public class GoAuthenticationEntryPoint implements AuthenticationEntryPoint {\r\n        @Override\r\n        public void commence(HttpServletRequest request, HttpServletResponse response,\r\n                             AuthenticationException authException) throws IOException {\r\n            response.sendError(HttpServletResponse.SC_UNAUTHORIZED, &quot;Unauthorized&quot;);\r\n        }\r\n    }\r\n\r\n\r\n**GoAuthorizationFilter:**\r\n\r\n    @Service\r\n    public class GoAuthorizationFilter extends OncePerRequestFilter {\r\n    \r\n        @Transactional\r\n        @Override\r\n        protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n                throws ServletException, IOException {\r\n            filterChain.doFilter(request, response);\r\n        }\r\n    }\r\n\r\n\r\nWhile I was trying to make it work I also got rid of AuthenticationEntryPoint but it seemed to have no impact. What is more my filter has no logic implemented yet, so I know that it is not the cause of my problem.\r\n\r\n**My question is, what is wrong with my configuration, and why despite permitAll() I&#39;m receiving 404 exceptions?** ","title":"SpringSecurityConfiguration - permitAll() does not work","body":"<p>I'm trying to configure SpringSecurity for my application, but despite using permitAll() for one of my endpoints(/api/authorization/company-login) I keep getting 404 exceptions.\nFor other endpoints, I get 403 (Forbidden) which is completely right cause I also use anyRequest().authenticated(), for the others.\nSo it seems that while anyRequest().authenticated() works, permitAll doesn't.</p>\n<p>I'm also sure that I put it in the right order, cause my permitAll() is before anyRequest().authenticated().</p>\n<p>Path to the endpoint also seems right cause if I would change path in: antMatchers(&quot;/api/authorization/company-login&quot;).permitAll() for some other then for /api/authorization/company-login I'm getting 403 (what is expected in such case). I'm not sure what is wrong in my configuration and how to make /api/authorization/company-login endpoint accessible for all.</p>\n<p><strong>Dependencies I use for spring security:</strong></p>\n<pre><code>&lt;!-- Spring Security --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>My spring security configuration:</strong></p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SpringSecurityConfiguration {\n\n    @Autowired\n    private GoAuthorizationFilter goAuthorizationFilter;\n\n    @Autowired\n    private GoAuthenticationEntryPoint goAuthenticationEntryPoint;\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.cors().and().csrf().disable()\n                .exceptionHandling()\n                .authenticationEntryPoint(goAuthenticationEntryPoint).and()\n                .sessionManagement().and().sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .addFilterBefore(goAuthorizationFilter, UsernamePasswordAuthenticationFilter.class)\n                .authorizeRequests()\n                .antMatchers(&quot;/api/authorization/company-login&quot;).permitAll()\n                .anyRequest().authenticated();\n\n        return http.build();\n    }\n</code></pre>\n<p><strong>Authentication Entry Point:</strong></p>\n<pre><code>@Component\npublic class GoAuthenticationEntryPoint implements AuthenticationEntryPoint {\n    @Override\n    public void commence(HttpServletRequest request, HttpServletResponse response,\n                         AuthenticationException authException) throws IOException {\n        response.sendError(HttpServletResponse.SC_UNAUTHORIZED, &quot;Unauthorized&quot;);\n    }\n}\n</code></pre>\n<p><strong>GoAuthorizationFilter:</strong></p>\n<pre><code>@Service\npublic class GoAuthorizationFilter extends OncePerRequestFilter {\n\n    @Transactional\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n            throws ServletException, IOException {\n        filterChain.doFilter(request, response);\n    }\n}\n</code></pre>\n<p>While I was trying to make it work I also got rid of AuthenticationEntryPoint but it seemed to have no impact. What is more my filter has no logic implemented yet, so I know that it is not the cause of my problem.</p>\n<p><strong>My question is, what is wrong with my configuration, and why despite permitAll() I'm receiving 404 exceptions?</strong></p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","dto"],"comments":[{"owner":{"account_id":8794729,"reputation":15297,"user_id":6572971,"display_name":"Alien"},"score":1,"creation_date":1662778049,"post_id":73668754,"comment_id":130090790,"body_markdown":"Perform all the business logics and transformation in service class.","body":"Perform all the business logics and transformation in service class."},{"owner":{"account_id":8794729,"reputation":15297,"user_id":6572971,"display_name":"Alien"},"score":0,"creation_date":1662778255,"post_id":73668754,"comment_id":130090811,"body_markdown":"Does this answer your question? [Which layer should be used for conversion to DTO from Domain Object](https://stackoverflow.com/questions/47822938/which-layer-should-be-used-for-conversion-to-dto-from-domain-object)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/47822938/which-layer-should-be-used-for-conversion-to-dto-from-domain-object\">Which layer should be used for conversion to DTO from Domain Object</a>"}],"answers":[{"tags":[],"owner":{"account_id":21967042,"reputation":84,"user_id":16244113,"display_name":"mamJavad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662789751,"creation_date":1662789751,"answer_id":73669643,"question_id":73668754,"body_markdown":"I use DTO in service layer .\r\nbecause service must contain business logic .\r\ncontroller is just a middleware between processing data and show the result to user so It seems reasonable to map DTO to your entity in service","title":"Where should DTO conversion be done in MVC?","body":"<p>I use DTO in service layer .\nbecause service must contain business logic .\ncontroller is just a middleware between processing data and show the result to user so It seems reasonable to map DTO to your entity in service</p>\n"}],"owner":{"account_id":26053009,"reputation":3,"user_id":19755849,"display_name":"user19755849"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1662789751,"creation_date":1662774145,"question_id":73668754,"body_markdown":"Where should DTO conversion be done in MVC?\r\n\r\nI am using JPA.\r\nReceive DTO as parameter from Controller.\r\n\r\nAt this time, is it necessary to convert it in the controller and pass it to the service?\r\n\r\nOr, I wonder if the service receives the DTO and converts it.","title":"Where should DTO conversion be done in MVC?","body":"<p>Where should DTO conversion be done in MVC?</p>\n<p>I am using JPA.\nReceive DTO as parameter from Controller.</p>\n<p>At this time, is it necessary to convert it in the controller and pass it to the service?</p>\n<p>Or, I wonder if the service receives the DTO and converts it.</p>\n"},{"tags":["java","data-structures","collections"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":3,"creation_date":1662789331,"post_id":73669568,"comment_id":130091798,"body_markdown":"Seriously ... didn&#39;t you look at the javadocs?  And interface is not a data structure.  It is an API.","body":"Seriously ... didn&#39;t you look at the javadocs?  And interface is not a data structure.  It is an API."}],"answers":[{"tags":[],"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1662789187,"creation_date":1662789187,"answer_id":73669590,"question_id":73669568,"body_markdown":"[`java.util.concurrent.BlockingDeque`][1] is an **interface**, and [`java.util.concurrent.LinkedBlockingDeque`][2] is a concrete **class** implementing that interface. In fact, it is the only (public) implementation of `BlockingDeque` in the JavaSE API, so there is no choice to make (unless you want to implement your own or find another library implementing another `BlockingDeque`).\r\n\r\nSee also https://stackoverflow.com/questions/1413543/what-does-it-mean-to-program-to-an-interface\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/BlockingDeque.html\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/LinkedBlockingDeque.html","title":"Difference between blocking deque vs linked blocking deque","body":"<p><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/BlockingDeque.html\" rel=\"nofollow noreferrer\"><code>java.util.concurrent.BlockingDeque</code></a> is an <strong>interface</strong>, and <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/LinkedBlockingDeque.html\" rel=\"nofollow noreferrer\"><code>java.util.concurrent.LinkedBlockingDeque</code></a> is a concrete <strong>class</strong> implementing that interface. In fact, it is the only (public) implementation of <code>BlockingDeque</code> in the JavaSE API, so there is no choice to make (unless you want to implement your own or find another library implementing another <code>BlockingDeque</code>).</p>\n<p>See also <a href=\"https://stackoverflow.com/questions/1413543/what-does-it-mean-to-program-to-an-interface\">What does it mean to program to an interface?</a></p>\n"}],"owner":{"account_id":15246401,"reputation":327,"user_id":11001157,"display_name":"Prithvidiamond"},"comment_count":1,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":5,"up_vote_count":0,"closed_date":1662799218,"accepted_answer_id":73669590,"answer_count":1,"score":-5,"last_activity_date":1662789256,"creation_date":1662788952,"question_id":73669568,"body_markdown":"What is the difference between the two in Java? Is it just that blocking deque uses an array and linked blocking deque uses a linked list? I want to know this so that I can make a decision about which data structure I want to use for my audio track queue.","title":"Difference between blocking deque vs linked blocking deque","body":"<p>What is the difference between the two in Java? Is it just that blocking deque uses an array and linked blocking deque uses a linked list? I want to know this so that I can make a decision about which data structure I want to use for my audio track queue.</p>\n"},{"tags":["java","android","kotlin","formatting","duration"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1662780437,"post_id":73668250,"comment_id":130091005,"body_markdown":"First, use `java.time.Duration` or a Kotlin equivalent for a duration. Not a `Long`. Next search for how to format a duration in Java. It&#39;s been covered more than once already.","body":"First, use <code>java.time.Duration</code> or a Kotlin equivalent for a duration. Not a <code>Long</code>. Next search for how to format a duration in Java. It&#39;s been covered more than once already."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1662781479,"post_id":73668250,"comment_id":130091079,"body_markdown":"If `dur` is your `Duration` I’d probably use `String.format(Locale.US, &quot;%02d:%02d.%1d&quot;, dur.toMinutes(), dur.toSecondsPart(), dur.toMillisPart() / 100)`. Gives `03:04.9`. If you can’t avoid getting a `Long`, you will need `dur = Duration.ofMillis(data);` first.","body":"If <code>dur</code> is your <code>Duration</code> I’d probably use <code>String.format(Locale.US, &quot;%02d:%02d.%1d&quot;, dur.toMinutes(), dur.toSecondsPart(), dur.toMillisPart() &#47; 100)</code>. Gives <code>03:04.9</code>. If you can’t avoid getting a <code>Long</code>, you will need <code>dur = Duration.ofMillis(data);</code> first."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1662781774,"post_id":73668250,"comment_id":130091109,"body_markdown":"Not that you want it here, but formatting a decimal number with leading zeroes is not that hard when you know how. `String.format(Locale.US, &quot;%02d:%04.1f&quot;, minutes, seconds)` The `%04.1f` means zero-padded, total width of 4 including the decimal part and 1 decimal after the point, so it gives you what you asked for: `03:04.9`.","body":"Not that you want it here, but formatting a decimal number with leading zeroes is not that hard when you know how. <code>String.format(Locale.US, &quot;%02d:%04.1f&quot;, minutes, seconds)</code> The <code>%04.1f</code> means zero-padded, total width of 4 including the decimal part and 1 decimal after the point, so it gives you what you asked for: <code>03:04.9</code>."}],"answers":[{"tags":[],"owner":{"account_id":12731703,"reputation":3217,"user_id":9248098,"display_name":"Gowtham K K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662785548,"creation_date":1662766718,"answer_id":73668344,"question_id":73668250,"body_markdown":"As far as I know, its not possible to have control on leading zeros using string formatting.\r\nAlternately you can use [DecimalFormat][1] to achieve this.\r\n\r\n    fun formatTime(data: Long): String {\r\n        val seconds = ((data / 1000.0) % 60.0)\r\n        val minutes = (TimeUnit.MILLISECONDS.toMinutes(data) % 60).toInt()\r\n        val formatSeconds = DecimalFormat(&quot;00.0&quot;).format(seconds)\r\n        return String.format(Locale.US, &quot;%02d:$formatSeconds&quot;, minutes)\r\n    }\r\n\r\nThis will provide outputs like,\r\n\r\n    03:14.9\r\n    03:04.9\r\n    03:00.9\r\n    03:00.0\r\n    03:04.0\r\n\r\n**&lt;h3&gt;Update:&lt;/h3&gt;**\r\nThanks [Ole][2] pointing it out in comment(Credits to him).  \r\nIt is possible to with String.format() function itself, like below.\r\n\r\n    String.format(Locale.US, &quot;%02d:%04.1f&quot;, minutes, seconds)\r\n\r\nAlso as Ole mentioned that, it is always better to use `kotlin.time.Duration` or `java.time.Duration` classes when you handle time.\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/data/numberformat.html\r\n  [2]: https://stackoverflow.com/users/5772882/ole-v-v\r\n","title":"Format time to mm:ss.S with String.format in Kotlin/Java","body":"<p>As far as I know, its not possible to have control on leading zeros using string formatting.\nAlternately you can use <a href=\"https://docs.oracle.com/javase/tutorial/java/data/numberformat.html\" rel=\"nofollow noreferrer\">DecimalFormat</a> to achieve this.</p>\n<pre><code>fun formatTime(data: Long): String {\n    val seconds = ((data / 1000.0) % 60.0)\n    val minutes = (TimeUnit.MILLISECONDS.toMinutes(data) % 60).toInt()\n    val formatSeconds = DecimalFormat(&quot;00.0&quot;).format(seconds)\n    return String.format(Locale.US, &quot;%02d:$formatSeconds&quot;, minutes)\n}\n</code></pre>\n<p>This will provide outputs like,</p>\n<pre><code>03:14.9\n03:04.9\n03:00.9\n03:00.0\n03:04.0\n</code></pre>\n<p><strong><h3>Update:</h3></strong>\nThanks <a href=\"https://stackoverflow.com/users/5772882/ole-v-v\">Ole</a> pointing it out in comment(Credits to him).<br />\nIt is possible to with String.format() function itself, like below.</p>\n<pre><code>String.format(Locale.US, &quot;%02d:%04.1f&quot;, minutes, seconds)\n</code></pre>\n<p>Also as Ole mentioned that, it is always better to use <code>kotlin.time.Duration</code> or <code>java.time.Duration</code> classes when you handle time.</p>\n"}],"owner":{"account_id":10495348,"reputation":606,"user_id":7735807,"accept_rate":47,"display_name":"HavanaSun"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1084,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1662789136,"creation_date":1662765264,"question_id":73668250,"body_markdown":"I want my time to be formated like: 03:04.9 (example)\r\n\r\nThis is what I have right now:\r\n\r\n    fun formatTime(data: Long): String {\r\n        val seconds = ((data / 1000.0) % 60.0)\r\n        val minutes = (TimeUnit.MILLISECONDS.toMinutes(data) % 60).toInt()\r\n        return String.format(Locale.US, &quot;%02d:%.1f&quot;, minutes, seconds)\r\n    }\r\n\r\nIt kind of works but doesn&#39;t make sure that the seconds value has two digits.\r\nThis is how the output looks like when the seconds are under 10:\r\n03:4.9\r\n\r\nI think I&#39;m so close but just can&#39;t get it right","title":"Format time to mm:ss.S with String.format in Kotlin/Java","body":"<p>I want my time to be formated like: 03:04.9 (example)</p>\n<p>This is what I have right now:</p>\n<pre><code>fun formatTime(data: Long): String {\n    val seconds = ((data / 1000.0) % 60.0)\n    val minutes = (TimeUnit.MILLISECONDS.toMinutes(data) % 60).toInt()\n    return String.format(Locale.US, &quot;%02d:%.1f&quot;, minutes, seconds)\n}\n</code></pre>\n<p>It kind of works but doesn't make sure that the seconds value has two digits.\nThis is how the output looks like when the seconds are under 10:\n03:4.9</p>\n<p>I think I'm so close but just can't get it right</p>\n"},{"tags":["java","string","char","compare"],"comments":[{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1662566647,"post_id":73638417,"comment_id":130037412,"body_markdown":"Please explain more about the requirements of the task.  What constitutes `ok`, `fail`, and `pass`?  Also check out the [tour] and [ask]","body":"Please explain more about the requirements of the task.  What constitutes <code>ok</code>, <code>fail</code>, and <code>pass</code>?  Also check out the <a href=\"https://stackoverflow.com/tour\">tour</a> and <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"}],"answers":[{"tags":[],"owner":{"account_id":26141629,"reputation":23,"user_id":19830917,"display_name":"Jasin93"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1662566230,"creation_date":1662566230,"answer_id":73638485,"question_id":73638417,"body_markdown":"I get this solution but idk its correctly, i think i can get better and clean solution. :/\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    package NewPackage;\r\n\r\n    /*\r\n        password = 123\r\n    checkPassword(123) -&gt; OK OK PASS\r\n    checkPassword(124) -&gt; OK OK FAIL\r\n    checkPassword(12) -&gt; OK OK FAIL\r\n    checkPassword(1234) -&gt; OK OK OK FAIL\r\n    checkPassword(81234) -&gt; FAIL\r\n    */\r\n\r\n    public class Tworzenie_tablicy_char {\r\n\r\n\r\n        public static void main(String[] args) {\r\n\r\n            String password = &quot;123&quot;;\r\n            String checkPassword = &quot;12&quot;;\r\n\r\n            char[] charPassword = new char[password.length()];\r\n            char[] charCheckPassword = new char[checkPassword.length()];\r\n\r\n            for (int i = 0; i &lt; password.length(); i++) {\r\n                charPassword[i] = password.charAt(i);\r\n                //System.out.println(password.charAt(i));\r\n            }\r\n\r\n            for (int i = 0; i &lt; checkPassword.length(); i++) {\r\n                charCheckPassword[i] = checkPassword.charAt(i);\r\n                //System.out.println(checkPassword.charAt(i));\r\n            }\r\n\r\n            int minLength = Math.min(charPassword.length, charCheckPassword.length);\r\n\r\n            if (charPassword.length &lt; charCheckPassword.length)\r\n            {\r\n                System.out.println(&quot;FAIL&quot;);\r\n            }else {\r\n                for (int i = 0; i &lt; minLength; i++) {\r\n                    boolean correctly = charPassword[i] == charCheckPassword[i];\r\n\r\n                    if (correctly == true) {\r\n                        System.out.println(&quot;OK&quot;);\r\n                    } else {\r\n                        System.out.println(&quot;FAIL&quot;);\r\n                    }\r\n                }\r\n                if (charPassword.length != charCheckPassword.length) {\r\n                    System.out.println(&quot;FAIL&quot;);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Compare char in password String","body":"<p>I get this solution but idk its correctly, i think i can get better and clean solution. :/</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>package NewPackage;\n\n/*\n    password = 123\ncheckPassword(123) -&gt; OK OK PASS\ncheckPassword(124) -&gt; OK OK FAIL\ncheckPassword(12) -&gt; OK OK FAIL\ncheckPassword(1234) -&gt; OK OK OK FAIL\ncheckPassword(81234) -&gt; FAIL\n*/\n\npublic class Tworzenie_tablicy_char {\n\n\n    public static void main(String[] args) {\n\n        String password = \"123\";\n        String checkPassword = \"12\";\n\n        char[] charPassword = new char[password.length()];\n        char[] charCheckPassword = new char[checkPassword.length()];\n\n        for (int i = 0; i &lt; password.length(); i++) {\n            charPassword[i] = password.charAt(i);\n            //System.out.println(password.charAt(i));\n        }\n\n        for (int i = 0; i &lt; checkPassword.length(); i++) {\n            charCheckPassword[i] = checkPassword.charAt(i);\n            //System.out.println(checkPassword.charAt(i));\n        }\n\n        int minLength = Math.min(charPassword.length, charCheckPassword.length);\n\n        if (charPassword.length &lt; charCheckPassword.length)\n        {\n            System.out.println(\"FAIL\");\n        }else {\n            for (int i = 0; i &lt; minLength; i++) {\n                boolean correctly = charPassword[i] == charCheckPassword[i];\n\n                if (correctly == true) {\n                    System.out.println(\"OK\");\n                } else {\n                    System.out.println(\"FAIL\");\n                }\n            }\n            if (charPassword.length != charCheckPassword.length) {\n                System.out.println(\"FAIL\");\n            }\n        }\n    }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":23050657,"reputation":117,"user_id":17167547,"display_name":"Орест Третяк"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662566794,"creation_date":1662566794,"answer_id":73638609,"question_id":73638417,"body_markdown":"to compare any methods, use \r\n\r\n    method.equals(method you want to compare);\r\n\r\nif I did not understand this question, please let me know","title":"Compare char in password String","body":"<p>to compare any methods, use</p>\n<pre><code>method.equals(method you want to compare);\n</code></pre>\n<p>if I did not understand this question, please let me know</p>\n"},{"tags":[],"owner":{"account_id":2686035,"reputation":3011,"user_id":2320445,"accept_rate":25,"display_name":"Milad Qasemi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662642687,"creation_date":1662569533,"answer_id":73639141,"question_id":73638417,"body_markdown":"there is no need to convert to char string, you can use `charAt` to get characters. Take the min length and check if both chars at the same index are equal if a char is not equal then break out of the loop and make the fail flag to true and then show FAIL or PASS based on the fail flag.\r\n\r\n    public class Tworzenie_tablicy_char {\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            String password = &quot;123&quot;;\r\n            String checkPassword = &quot;124&quot;;\r\n            boolean fail = false;\r\n    \r\n            int minLength = Math.min(password.length(), checkPassword.length());\r\n        \r\n            for (int i = 0; i &lt; minLength; i++) {\r\n                if (password.charAt(i) == checkPassword.charAt(i))\r\n                        System.out.println(&quot;OK&quot;);\r\n                else{\r\n                        fail = true;\r\n                        break;\r\n                }\r\n            }\r\n            \r\n            if(password.length() == checkPassword.length() &amp;&amp; !fail)\r\n                System.out.println(&quot;PASS&quot;);\r\n            else\r\n                System.out.println(&quot;FAIL&quot;);\r\n            \r\n        }\r\n    }\r\n\r\nthe output\r\n\r\n    java -cp /tmp/Jk7ZebI9iH Tworzenie_tablicy_char\r\n    OK\r\n    OK\r\n    FAIL","title":"Compare char in password String","body":"<p>there is no need to convert to char string, you can use <code>charAt</code> to get characters. Take the min length and check if both chars at the same index are equal if a char is not equal then break out of the loop and make the fail flag to true and then show FAIL or PASS based on the fail flag.</p>\n<pre><code>public class Tworzenie_tablicy_char {\n\n    public static void main(String[] args) {\n\n        String password = &quot;123&quot;;\n        String checkPassword = &quot;124&quot;;\n        boolean fail = false;\n\n        int minLength = Math.min(password.length(), checkPassword.length());\n    \n        for (int i = 0; i &lt; minLength; i++) {\n            if (password.charAt(i) == checkPassword.charAt(i))\n                    System.out.println(&quot;OK&quot;);\n            else{\n                    fail = true;\n                    break;\n            }\n        }\n        \n        if(password.length() == checkPassword.length() &amp;&amp; !fail)\n            System.out.println(&quot;PASS&quot;);\n        else\n            System.out.println(&quot;FAIL&quot;);\n        \n    }\n}\n</code></pre>\n<p>the output</p>\n<pre><code>java -cp /tmp/Jk7ZebI9iH Tworzenie_tablicy_char\nOK\nOK\nFAIL\n</code></pre>\n"}],"owner":{"account_id":26141629,"reputation":23,"user_id":19830917,"display_name":"Jasin93"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1662789418,"answer_count":3,"score":-3,"last_activity_date":1662788624,"creation_date":1662565917,"question_id":73638417,"body_markdown":"I have problem. I get this exercise but idk how i can resolve this last three solution in my code. I need print FAIL but i cant get because i only get OK OK i thats all.\r\n\r\nI need to compare two passwords, one is String password and the other is String checkPassword. The program is to compare each letter or number separately, if it is the same it should print OK, so if it compares the password 123 to 123 it should write OK OK PASS, if 123 to 124 then OK OK FAIL, if 123 to 12 then OK OK FAIL, if 123 to 1234 is OK OK OK FAIL, and if 123 to 81234 it should throw FAIL.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    package NewPackage;\r\n\r\n    /*\r\n        password = 123\r\n    checkPassword(123) -&gt; OK OK PASS\r\n    checkPassword(124) -&gt; OK OK FAIL\r\n    checkPassword(12) -&gt; OK OK FAIL\r\n    checkPassword(1234) -&gt; OK OK OK FAIL\r\n    checkPassword(81234) -&gt; FAIL\r\n    */\r\n\r\n    public class Tworzenie_tablicy_char {\r\n\r\n\r\n        public static void main(String[] args) {\r\n\r\n            String password = &quot;123&quot;;\r\n            String checkPassword = &quot;12&quot;;\r\n\r\n            char[] charPassword = new char[password.length()];\r\n            char[] charCheckPassword = new char[checkPassword.length()];\r\n\r\n            for (int i = 0; i &lt; password.length(); i++) {\r\n                charPassword[i] = password.charAt(i);\r\n                //System.out.println(password.charAt(i));\r\n            }\r\n\r\n            for (int i = 0; i &lt; checkPassword.length(); i++) {\r\n                charCheckPassword[i] = checkPassword.charAt(i);\r\n                //System.out.println(checkPassword.charAt(i));\r\n            }\r\n\r\n            int minLength = Math.min(charPassword.length, charCheckPassword.length);\r\n\r\n            for (int i = 0; i &lt; minLength; i++) {\r\n                boolean correctly = charPassword[i] == charCheckPassword[i];\r\n\r\n                if (correctly == true) {\r\n                    System.out.println(&quot;OK&quot;);\r\n                } else {\r\n                    System.out.println(&quot;FAIL&quot;);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nAny suggestions ??","title":"Compare char in password String","body":"<p>I have problem. I get this exercise but idk how i can resolve this last three solution in my code. I need print FAIL but i cant get because i only get OK OK i thats all.</p>\n<p>I need to compare two passwords, one is String password and the other is String checkPassword. The program is to compare each letter or number separately, if it is the same it should print OK, so if it compares the password 123 to 123 it should write OK OK PASS, if 123 to 124 then OK OK FAIL, if 123 to 12 then OK OK FAIL, if 123 to 1234 is OK OK OK FAIL, and if 123 to 81234 it should throw FAIL.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>package NewPackage;\n\n/*\n    password = 123\ncheckPassword(123) -&gt; OK OK PASS\ncheckPassword(124) -&gt; OK OK FAIL\ncheckPassword(12) -&gt; OK OK FAIL\ncheckPassword(1234) -&gt; OK OK OK FAIL\ncheckPassword(81234) -&gt; FAIL\n*/\n\npublic class Tworzenie_tablicy_char {\n\n\n    public static void main(String[] args) {\n\n        String password = \"123\";\n        String checkPassword = \"12\";\n\n        char[] charPassword = new char[password.length()];\n        char[] charCheckPassword = new char[checkPassword.length()];\n\n        for (int i = 0; i &lt; password.length(); i++) {\n            charPassword[i] = password.charAt(i);\n            //System.out.println(password.charAt(i));\n        }\n\n        for (int i = 0; i &lt; checkPassword.length(); i++) {\n            charCheckPassword[i] = checkPassword.charAt(i);\n            //System.out.println(checkPassword.charAt(i));\n        }\n\n        int minLength = Math.min(charPassword.length, charCheckPassword.length);\n\n        for (int i = 0; i &lt; minLength; i++) {\n            boolean correctly = charPassword[i] == charCheckPassword[i];\n\n            if (correctly == true) {\n                System.out.println(\"OK\");\n            } else {\n                System.out.println(\"FAIL\");\n            }\n        }\n    }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>Any suggestions ??</p>\n"},{"tags":["java","windows"],"comments":[{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1655551477,"post_id":72668838,"comment_id":128361836,"body_markdown":"Please don&#39;t use screenshots for things that are text. Post your source code and the output as code-formatted text.","body":"Please don&#39;t use screenshots for things that are text. Post your source code and the output as code-formatted text."},{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1655551746,"post_id":72668838,"comment_id":128361892,"body_markdown":"What is your exact Java version","body":"What is your exact Java version"},{"owner":{"account_id":25586414,"reputation":23,"user_id":19364109,"display_name":"Durgesh patidar"},"score":0,"creation_date":1655555546,"post_id":72668838,"comment_id":128362565,"body_markdown":"openjdk version &quot;1.8.0_322&quot;\nOpenJDK Runtime Environment Corretto-8.322.06.1 (build 1.8.0_322-b06)\nOpenJDK 64-Bit Server VM Corretto-8.322.06.1 (build 25.322-b06, mixed mode)","body":"openjdk version &quot;1.8.0_322&quot; OpenJDK Runtime Environment Corretto-8.322.06.1 (build 1.8.0_322-b06) OpenJDK 64-Bit Server VM Corretto-8.322.06.1 (build 25.322-b06, mixed mode)"},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1656253589,"post_id":72668838,"comment_id":128521602,"body_markdown":"https://bugs.openjdk.org/browse/JDK-8274840 says the fix was done in 8u331 (thus not in 8u321 or 8u322) (@MarkRotteveel)","body":"<a href=\"https://bugs.openjdk.org/browse/JDK-8274840\" rel=\"nofollow noreferrer\">bugs.openjdk.org/browse/JDK-8274840</a> says the fix was done in 8u331 (thus not in 8u321 or 8u322) (@MarkRotteveel)"},{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1656255629,"post_id":72668838,"comment_id":128522066,"body_markdown":"@dave_thompson_085 I tested it using 1.8.0_332 (Temurin), and it still reported Windows 10.","body":"@dave_thompson_085 I tested it using 1.8.0_332 (Temurin), and it still reported Windows 10."}],"answers":[{"tags":[],"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1662788345,"creation_date":1655551643,"answer_id":72668879,"question_id":72668838,"body_markdown":"On Java 11 (11.0.15) and Java 17 (17.0.3), `System.getProperty(&quot;os.name&quot;)` returns `Windows 11`, but `&quot;os.version&quot;` still reports `10.0`, because that is actually the version that Microsoft (still) uses for Windows 11.\r\n\r\nFor example, Windows System Information reports:\r\n\r\nOS Name\tMicrosoft Windows 11 Pro  \r\nVersion\t**10.0**.22000 Build 22000\r\n\r\nThis is similar to what is shown in your screenshot.\r\n\r\nJava 8 (1.8.0_332) does unfortunately still report `Windows 10`. I have looked at the available system properties and environment variables in Java 8, but there doesn&#39;t seem to be a property or environment variable that allows you to detect you&#39;re using Windows 11 instead of Windows 10.\r\n\r\nThe list of backports of [JDK-8293124 Update OS detection code to recognize Windows 11][1] suggests this should have been fixed in Java 8 update 8u311, 8u321, and 8u331. But given I still get the old result in 1.8.0_332 (Temurin) and 1.8.0_345 (Temurin), either this fix was reverted or only available in specific builds (e.g. Oracle&#39;s). It also lists the - not yet released - openjdk8u362, so maybe this fix will arrive in 1.8.0_362.\r\n\r\n  [1]: https://bugs.openjdk.org/browse/JDK-8274840","title":"System.getProperty(&quot;os.name&quot;) and System.getProperty(&quot;os.version&quot;) returning windows 10, 10.0, in windows 11 machine","body":"<p>On Java 11 (11.0.15) and Java 17 (17.0.3), <code>System.getProperty(&quot;os.name&quot;)</code> returns <code>Windows 11</code>, but <code>&quot;os.version&quot;</code> still reports <code>10.0</code>, because that is actually the version that Microsoft (still) uses for Windows 11.</p>\n<p>For example, Windows System Information reports:</p>\n<p>OS Name Microsoft Windows 11 Pro<br />\nVersion <strong>10.0</strong>.22000 Build 22000</p>\n<p>This is similar to what is shown in your screenshot.</p>\n<p>Java 8 (1.8.0_332) does unfortunately still report <code>Windows 10</code>. I have looked at the available system properties and environment variables in Java 8, but there doesn't seem to be a property or environment variable that allows you to detect you're using Windows 11 instead of Windows 10.</p>\n<p>The list of backports of <a href=\"https://bugs.openjdk.org/browse/JDK-8274840\" rel=\"nofollow noreferrer\">JDK-8293124 Update OS detection code to recognize Windows 11</a> suggests this should have been fixed in Java 8 update 8u311, 8u321, and 8u331. But given I still get the old result in 1.8.0_332 (Temurin) and 1.8.0_345 (Temurin), either this fix was reverted or only available in specific builds (e.g. Oracle's). It also lists the - not yet released - openjdk8u362, so maybe this fix will arrive in 1.8.0_362.</p>\n"}],"owner":{"account_id":25586414,"reputation":23,"user_id":19364109,"display_name":"Durgesh patidar"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2176,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":72668879,"answer_count":1,"score":2,"last_activity_date":1662788345,"creation_date":1655551258,"question_id":72668838,"body_markdown":"[System.getProperty(&quot;os.name&quot;) and System.getProperty(&quot;os.version&quot;) returning windows 10, 10.0, in windows 11 machine][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wuJBG.png\r\n\r\nIf anyone knows Java code to get the Windows version without using any command, please help or attach Java code here.\r\n\r\n```none\r\nopenjdk version &quot;1.8.0_322&quot;\r\nOpenJDK Runtime Environment Corretto-8.322.06.1 (build 1.8.0_322-b06)\r\nOpenJDK 64-Bit Server VM Corretto-8.322.06.1 (build 25.322-b06, mixed mode)\r\n```\r\n\r\n```java\r\nclass Demo\r\n{\r\n    public static void main(String g[])\r\n    {\r\n        System.out.println(&quot; os name = &quot;+System.getProperty(&quot;os.name&quot;));\r\n        System.out.println(&quot; os version = &quot;+System.getProperty(&quot;os.version&quot;));\r\n    }\r\n}\r\n```\r\n\r\noutput: \r\n```none\r\nos name = Windows 10\r\nos version = 10.0\r\n```\r\n","title":"System.getProperty(&quot;os.name&quot;) and System.getProperty(&quot;os.version&quot;) returning windows 10, 10.0, in windows 11 machine","body":"<p><a href=\"https://i.stack.imgur.com/wuJBG.png\" rel=\"nofollow noreferrer\">System.getProperty(&quot;os.name&quot;) and System.getProperty(&quot;os.version&quot;) returning windows 10, 10.0, in windows 11 machine</a></p>\n<p>If anyone knows Java code to get the Windows version without using any command, please help or attach Java code here.</p>\n<pre class=\"lang-none prettyprint-override\"><code>openjdk version &quot;1.8.0_322&quot;\nOpenJDK Runtime Environment Corretto-8.322.06.1 (build 1.8.0_322-b06)\nOpenJDK 64-Bit Server VM Corretto-8.322.06.1 (build 25.322-b06, mixed mode)\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>class Demo\n{\n    public static void main(String g[])\n    {\n        System.out.println(&quot; os name = &quot;+System.getProperty(&quot;os.name&quot;));\n        System.out.println(&quot; os version = &quot;+System.getProperty(&quot;os.version&quot;));\n    }\n}\n</code></pre>\n<p>output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>os name = Windows 10\nos version = 10.0\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","file-upload","multipart"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1641288935,"post_id":70576100,"comment_id":124760475,"body_markdown":"Your `DesainKartu` has a field named `foto` of type `String`. However you are submitting that as a file. So the type doesn&#39;t match.","body":"Your <code>DesainKartu</code> has a field named <code>foto</code> of type <code>String</code>. However you are submitting that as a file. So the type doesn&#39;t match."}],"answers":[{"tags":[],"owner":{"account_id":22453361,"reputation":97,"user_id":16656366,"display_name":"LongDev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662787765,"creation_date":1662787765,"answer_id":73669491,"question_id":70576100,"body_markdown":"This is the way I fix this, you can try \r\n\r\nabout entity :\r\n```\r\n   public byte[] getImage() {\r\n        return image;\r\n    }\r\n\r\n```\r\n\r\nin thymeleaf form, at type=&quot;file&quot; input we no need to add th:field=&quot;*{image}&quot;\r\nJust need to do like this\r\n```\r\n     &lt;div class=&quot;form-group input-group has-feedback&quot;&gt;\r\n        &lt;label class=&quot;col-form-label&quot;&gt;Image&lt;/label&gt;\r\n        &lt;input type=&quot;file&quot; name=&quot;file&quot; /&gt;\r\n    &lt;/div&gt;\r\n```\r\n\r\nand in the controller \r\n\r\n```\r\n@PostMapping(&quot;/register&quot;)\r\n        public String createAccount(@Valid @ModelAttribute(&quot;user&quot;) User user, Model \r\n        model, HttpServletRequest request,final @RequestParam MultipartFile file, \r\n      RedirectAttributes redirectAttr) throws IOException {}\r\n\r\n```\r\n\r\n","title":"Failed to convert property value of type &#39;org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile&#39;","body":"<p>This is the way I fix this, you can try</p>\n<p>about entity :</p>\n<pre><code>   public byte[] getImage() {\n        return image;\n    }\n\n</code></pre>\n<p>in thymeleaf form, at type=&quot;file&quot; input we no need to add th:field=&quot;*{image}&quot;\nJust need to do like this</p>\n<pre><code>     &lt;div class=&quot;form-group input-group has-feedback&quot;&gt;\n        &lt;label class=&quot;col-form-label&quot;&gt;Image&lt;/label&gt;\n        &lt;input type=&quot;file&quot; name=&quot;file&quot; /&gt;\n    &lt;/div&gt;\n</code></pre>\n<p>and in the controller</p>\n<pre><code>@PostMapping(&quot;/register&quot;)\n        public String createAccount(@Valid @ModelAttribute(&quot;user&quot;) User user, Model \n        model, HttpServletRequest request,final @RequestParam MultipartFile file, \n      RedirectAttributes redirectAttr) throws IOException {}\n\n</code></pre>\n"}],"owner":{"account_id":13772308,"reputation":31,"user_id":9939447,"display_name":"Muhammad Subhan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4548,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1662787765,"creation_date":1641285740,"question_id":70576100,"body_markdown":"I have trouble with convert type &quot;multipart&quot;\r\n\r\n&quot;Failed to convert property value of type &#39;org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile&#39; to required type &#39;java.lang.String&#39; for property &#39;foto&#39;; nested exception is java.lang.IllegalStateException: Cannot convert value of type &#39;org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile&#39; to required type &#39;java.lang.String&#39; for property &#39;foto&#39;: no matching editors or conversion strategy found&quot;\r\n\r\nmy Code :\r\nController\r\n\r\n    @RequestMapping(value = &quot;/desainkartu/action.insert&quot;, method = RequestMethod.POST)\r\n    public String actionInsert(@Valid @ModelAttribute(&quot;data&quot;) DesainKartu data,\r\n                               BindingResult bindingResult,\r\n                               Model model,\r\n                               Principal principal,\r\n                               @RequestParam(&quot;files&quot;) MultipartFile[] files) throws IOException  {\r\n        StringBuilder fileNames = new StringBuilder();\r\n        String url = &quot;desainkartu/insert&quot;;\r\n        try {\r\n            if(bindingResult.hasErrors()) {\r\n                StringBuffer errorMessage = new StringBuffer();\r\n                List&lt;FieldError&gt; aList = bindingResult.getFieldErrors();\r\n                for(FieldError bList : aList) {\r\n                    errorMessage.append(&quot;&lt;div&gt;&quot;+bList.getDefaultMessage()+&quot;&lt;/div&gt;&quot;);\r\n                    url = &quot;desainkartu/insert&quot;;\r\n                }\r\n                for(MultipartFile file : files) {\r\n                    Path fileNameAndPath = Paths.get(uploadDirectory, file.getOriginalFilename());\r\n                    fileNames.append(file.getOriginalFilename());\r\n                    Files.write(fileNameAndPath, file.getBytes());\r\n                }\r\n                model.addAttribute(&quot;message&quot;, errorMessage.toString());\r\n            } else {\r\n                try {\r\n                    data.setCreatedby(principal.getName());\r\n                    data.setCreateddate(date1);\r\n                    service.save(data);\r\n                    url = &quot;redirect:/desainkartu/list?status=true&quot;;\r\n                } catch (Exception e) {\r\n                    StringBuilder ste = new StringBuilder();\r\n                    ste.append(e.getMessage());\r\n                    for(StackTraceElement element : e.getStackTrace()) {\r\n                        ste.append(element.toString()+&quot;\\n&quot;);\r\n                    }\r\n                    log.error(ste.toString());\r\n                    model.addAttribute(&quot;message&quot;, ste.toString());\r\n                }\r\n            }\r\n\r\nproperties\r\n\r\n    spring.http.multipart.max-file-size=15MB\r\n    spring.http.multipart.max-request-size=15MB\r\n    multipart.enabled=true\r\n\r\n\r\nthanks","title":"Failed to convert property value of type &#39;org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile&#39;","body":"<p>I have trouble with convert type &quot;multipart&quot;</p>\n<p>&quot;Failed to convert property value of type 'org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile' to required type 'java.lang.String' for property 'foto'; nested exception is java.lang.IllegalStateException: Cannot convert value of type 'org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile' to required type 'java.lang.String' for property 'foto': no matching editors or conversion strategy found&quot;</p>\n<p>my Code :\nController</p>\n<pre><code>@RequestMapping(value = &quot;/desainkartu/action.insert&quot;, method = RequestMethod.POST)\npublic String actionInsert(@Valid @ModelAttribute(&quot;data&quot;) DesainKartu data,\n                           BindingResult bindingResult,\n                           Model model,\n                           Principal principal,\n                           @RequestParam(&quot;files&quot;) MultipartFile[] files) throws IOException  {\n    StringBuilder fileNames = new StringBuilder();\n    String url = &quot;desainkartu/insert&quot;;\n    try {\n        if(bindingResult.hasErrors()) {\n            StringBuffer errorMessage = new StringBuffer();\n            List&lt;FieldError&gt; aList = bindingResult.getFieldErrors();\n            for(FieldError bList : aList) {\n                errorMessage.append(&quot;&lt;div&gt;&quot;+bList.getDefaultMessage()+&quot;&lt;/div&gt;&quot;);\n                url = &quot;desainkartu/insert&quot;;\n            }\n            for(MultipartFile file : files) {\n                Path fileNameAndPath = Paths.get(uploadDirectory, file.getOriginalFilename());\n                fileNames.append(file.getOriginalFilename());\n                Files.write(fileNameAndPath, file.getBytes());\n            }\n            model.addAttribute(&quot;message&quot;, errorMessage.toString());\n        } else {\n            try {\n                data.setCreatedby(principal.getName());\n                data.setCreateddate(date1);\n                service.save(data);\n                url = &quot;redirect:/desainkartu/list?status=true&quot;;\n            } catch (Exception e) {\n                StringBuilder ste = new StringBuilder();\n                ste.append(e.getMessage());\n                for(StackTraceElement element : e.getStackTrace()) {\n                    ste.append(element.toString()+&quot;\\n&quot;);\n                }\n                log.error(ste.toString());\n                model.addAttribute(&quot;message&quot;, ste.toString());\n            }\n        }\n</code></pre>\n<p>properties</p>\n<pre><code>spring.http.multipart.max-file-size=15MB\nspring.http.multipart.max-request-size=15MB\nmultipart.enabled=true\n</code></pre>\n<p>thanks</p>\n"},{"tags":["java","jvm","garbage-collection"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1662650736,"post_id":73651465,"comment_id":130059951,"body_markdown":"It might actually be a difference between JVM vendors, e.g. Amazon&#39;s correcto might not have safepoints like this.","body":"It might actually be a difference between JVM vendors, e.g. Amazon&#39;s correcto might not have safepoints like this."},{"owner":{"account_id":18094497,"reputation":702,"user_id":13153117,"display_name":"Stan"},"score":0,"creation_date":1662650929,"post_id":73651465,"comment_id":130060021,"body_markdown":"@Thomas Then is it actually not wise to use this kind of GC way in RabbitMQ as it varies with vendors  : https://stackoverflow.com/questions/53284031/why-thread-sleep0-can-prevent-gc-in-rocketmq","body":"@Thomas Then is it actually not wise to use this kind of GC way in RabbitMQ as it varies with vendors  : <a href=\"https://stackoverflow.com/questions/53284031/why-thread-sleep0-can-prevent-gc-in-rocketmq\" title=\"why thread sleep0 can prevent gc in rocketmq\">stackoverflow.com/questions/53284031/&hellip;</a>"},{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1662652438,"post_id":73651465,"comment_id":130060684,"body_markdown":"@Thomas nope. The issue isn&#39;t safepoints. It&#39;s the GC impl.","body":"@Thomas nope. The issue isn&#39;t safepoints. It&#39;s the GC impl."},{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":1,"creation_date":1662658134,"post_id":73651465,"comment_id":130062703,"body_markdown":"The reason is the [Loop Strip Mining](https://bugs.openjdk.org/browse/JDK-8186027) technique implemented in JDK 10+. It allows JIT compiler to break a large counted loops into two logically nested loops, where the inner loop has no safepoint poll instruction, while the outer one does. [Here](https://bugs.openjdk.org/browse/JDK-8223051) is a good description of the technique.","body":"The reason is the <a href=\"https://bugs.openjdk.org/browse/JDK-8186027\" rel=\"nofollow noreferrer\">Loop Strip Mining</a> technique implemented in JDK 10+. It allows JIT compiler to break a large counted loops into two logically nested loops, where the inner loop has no safepoint poll instruction, while the outer one does. <a href=\"https://bugs.openjdk.org/browse/JDK-8223051\" rel=\"nofollow noreferrer\">Here</a> is a good description of the technique."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1662652509,"creation_date":1662652006,"answer_id":73651860,"question_id":73651465,"body_markdown":"ANSWER: It&#39;s because JDK8 defaults to the parallel GC, and JDK9+ to the G1 GC, and this explains all.\r\n\r\n## Proof\r\n\r\nOn an arm-chip mac, with Eclipse Temurin OpenJDK, both version 1.8 and 1.17, you get the following behaviour:\r\n\r\n|      | 1.17  | 1.8    |\r\n| -    | ----  | ---    |\r\n| int  | ~50m  | 2000m* |\r\n| long | ~50m  | ~50m   |\r\n\r\n*) This answer appears half a minute+ later, the explanation isn&#39;t that the 2 threads just get through the billion loops within the second timespan.\r\n\r\nIn other words, exactly as you describe. Given that this is temurin, it&#39;s not &#39;amazon coretto&#39; specifically that&#39;s at fault.\r\n\r\nHowever, if I then run the int variant on 1.17, but with:\r\n\r\n```\r\n/Library/Java/JavaVirtualMachines/temurin-17.jdk/Contents/Home/bin/java -XX:+UseParallelGC SafePoint\r\n```\r\n\r\nIt prints 2000m just like temurin-8 does (and after ~half a minute of chugging away at it).\r\n\r\nThis therefore fully explains the difference:\r\n\r\n* __If__ you run this code with `int` __and__ using the Parallel GC, you get 2000m (eventually; it takes a while, the threads finish before the print code happens).\r\n* Otherwise (you use the G1 GC, or you use `long`), you get ~50m; the &#39;print the number&#39; code runs well before the threads finish.\r\n\r\nIf you don&#39;t explicitly choose which garbage collection impl you want, up to JDK8 you default to the parallel GC, starting with JDK9, you get the G1 collector (and perhaps on recent versions zgc or whatnot. __Not__ the parallel collector, in any case).\r\n\r\nIt&#39;s therefore clearly not about how the JVM injects safepoints, and you can inspect this by asking the JVM to print you the machine code it is generating for you (many blogposts you can search the web for explain precisely how to do this and what to look for) - you&#39;ll find JDK17s do similar things as JDK8 in this regard.\r\n\r\nNo, instead, the Parallel GC blocks on hitting a safepoint in every thread, whereas the G1 collector does not, a much simpler explanation.\r\n\r\nThere are many reasons why the default GC impl has been changed away from the parallel collector, and this is presumably one of them.\r\n","title":"Java For loop using int vs long","body":"<p>ANSWER: It's because JDK8 defaults to the parallel GC, and JDK9+ to the G1 GC, and this explains all.</p>\n<h2>Proof</h2>\n<p>On an arm-chip mac, with Eclipse Temurin OpenJDK, both version 1.8 and 1.17, you get the following behaviour:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th></th>\n<th>1.17</th>\n<th>1.8</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>int</td>\n<td>~50m</td>\n<td>2000m*</td>\n</tr>\n<tr>\n<td>long</td>\n<td>~50m</td>\n<td>~50m</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>*) This answer appears half a minute+ later, the explanation isn't that the 2 threads just get through the billion loops within the second timespan.</p>\n<p>In other words, exactly as you describe. Given that this is temurin, it's not 'amazon coretto' specifically that's at fault.</p>\n<p>However, if I then run the int variant on 1.17, but with:</p>\n<pre><code>/Library/Java/JavaVirtualMachines/temurin-17.jdk/Contents/Home/bin/java -XX:+UseParallelGC SafePoint\n</code></pre>\n<p>It prints 2000m just like temurin-8 does (and after ~half a minute of chugging away at it).</p>\n<p>This therefore fully explains the difference:</p>\n<ul>\n<li><strong>If</strong> you run this code with <code>int</code> <strong>and</strong> using the Parallel GC, you get 2000m (eventually; it takes a while, the threads finish before the print code happens).</li>\n<li>Otherwise (you use the G1 GC, or you use <code>long</code>), you get ~50m; the 'print the number' code runs well before the threads finish.</li>\n</ul>\n<p>If you don't explicitly choose which garbage collection impl you want, up to JDK8 you default to the parallel GC, starting with JDK9, you get the G1 collector (and perhaps on recent versions zgc or whatnot. <strong>Not</strong> the parallel collector, in any case).</p>\n<p>It's therefore clearly not about how the JVM injects safepoints, and you can inspect this by asking the JVM to print you the machine code it is generating for you (many blogposts you can search the web for explain precisely how to do this and what to look for) - you'll find JDK17s do similar things as JDK8 in this regard.</p>\n<p>No, instead, the Parallel GC blocks on hitting a safepoint in every thread, whereas the G1 collector does not, a much simpler explanation.</p>\n<p>There are many reasons why the default GC impl has been changed away from the parallel collector, and this is presumably one of them.</p>\n"},{"tags":[],"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1662776674,"creation_date":1662776674,"answer_id":73668896,"question_id":73651465,"body_markdown":"The reasons of the delayed `println` are explained in [this answer](https://stackoverflow.com/a/67075064/3448419). In short, HotSpot JIT eliminated the safepoint poll inside the counted loop, so the JVM cannot reach a safepoint while the loop is running.\r\n\r\nTo eliminate a safepoint poll from the loop, two conditions must be met:\r\n 1. the loop is *counted*, i.e. has a finite number of iterations ensured by an integer counter variable, and\r\n 2. `-XX:UseCountedLoopSafepoints` option is disabled.\r\n\r\nThese conditions depend on the JVM version and the command line flags.\r\n\r\nIn **JDK 8**, a for-loop with `int` variable is considered *counted*, while a loop with `long` variable is *not*. `UseCountedLoopSafepoints` is always off, unless enabled explicitly with `-XX:+UseCountedLoopSafepoints`.\r\n\r\nSince **JDK 10**, JIT compiler got the [Loop Strip Mining](https://bugs.openjdk.org/browse/JDK-8186027) feature. This optimization significantly reduces the overhead of safepoint polling in a tight loop, and because of that, `-XX:+UseCountedLoopSafepoints` became enabled by default&lt;sup&gt;1&lt;/sup&gt;. That&#39;s why you don&#39;t observe a delay in JDK 11.\r\n\r\n---\r\n&lt;sup&gt;1&lt;/sup&gt; Unless a user selects Parallel or Serial GC. Since these garbage collectors are not focused on low pauses, the JVM prefers throughput and thus does not enable `UseCountedLoopSafepoints`. It can be still enabled manually with `-XX:+UseCountedLoopSafepoints`.","title":"Java For loop using int vs long","body":"<p>The reasons of the delayed <code>println</code> are explained in <a href=\"https://stackoverflow.com/a/67075064/3448419\">this answer</a>. In short, HotSpot JIT eliminated the safepoint poll inside the counted loop, so the JVM cannot reach a safepoint while the loop is running.</p>\n<p>To eliminate a safepoint poll from the loop, two conditions must be met:</p>\n<ol>\n<li>the loop is <em>counted</em>, i.e. has a finite number of iterations ensured by an integer counter variable, and</li>\n<li><code>-XX:UseCountedLoopSafepoints</code> option is disabled.</li>\n</ol>\n<p>These conditions depend on the JVM version and the command line flags.</p>\n<p>In <strong>JDK 8</strong>, a for-loop with <code>int</code> variable is considered <em>counted</em>, while a loop with <code>long</code> variable is <em>not</em>. <code>UseCountedLoopSafepoints</code> is always off, unless enabled explicitly with <code>-XX:+UseCountedLoopSafepoints</code>.</p>\n<p>Since <strong>JDK 10</strong>, JIT compiler got the <a href=\"https://bugs.openjdk.org/browse/JDK-8186027\" rel=\"nofollow noreferrer\">Loop Strip Mining</a> feature. This optimization significantly reduces the overhead of safepoint polling in a tight loop, and because of that, <code>-XX:+UseCountedLoopSafepoints</code> became enabled by default<sup>1</sup>. That's why you don't observe a delay in JDK 11.</p>\n<hr />\n<p><sup>1</sup> Unless a user selects Parallel or Serial GC. Since these garbage collectors are not focused on low pauses, the JVM prefers throughput and thus does not enable <code>UseCountedLoopSafepoints</code>. It can be still enabled manually with <code>-XX:+UseCountedLoopSafepoints</code>.</p>\n"}],"owner":{"account_id":18094497,"reputation":702,"user_id":13153117,"display_name":"Stan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":386,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1662785974,"creation_date":1662650270,"question_id":73651465,"body_markdown":"## Context\r\nI am reading a tech document which basically tells me the difference between using int vs long in fori loop:\r\nScenario A(int fori loop)\r\n```\r\npublic class SafePoint {\r\n\r\n    public static AtomicInteger num = new AtomicInteger(0);\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n        Runnable runnable=()-&gt;{\r\n            for (int i = 0; i &lt; 1000000000; i++) {\r\n                num.getAndAdd(1);\r\n            }\r\n            System.out.println(Thread.currentThread().getName()+&quot;end!&quot;);\r\n        };\r\n\r\n        Thread t1 = new Thread(runnable);\r\n        Thread t2 = new Thread(runnable);\r\n        t1.start();\r\n        t2.start();\r\n        Thread.sleep(1000);\r\n        System.out.println(&quot;num = &quot; + num);\r\n    }\r\n\r\n}\r\n```\r\n**Expected Result:**\r\n\r\nThread-1end! &lt;br&gt;\r\nThread-0end! &lt;br&gt;\r\nnum = 2000000000 &lt;br&gt;\r\n\r\nScenario B(long fori loop)\r\n```\r\npublic class SafePoint {\r\n\r\n    public static AtomicInteger num = new AtomicInteger(0);\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n        Runnable runnable=()-&gt;{\r\n            for (long i = 0; i &lt; 1000000000; i++) {\r\n                num.getAndAdd(1);\r\n            }\r\n            System.out.println(Thread.currentThread().getName()+&quot;end!&quot;);\r\n        };\r\n\r\n        Thread t1 = new Thread(runnable);\r\n        Thread t2 = new Thread(runnable);\r\n        t1.start();\r\n        t2.start();\r\n        Thread.sleep(1000);\r\n        System.out.println(&quot;num = &quot; + num);\r\n    }\r\n\r\n}\r\n\r\n```\r\n**Expected Result:** &lt;br&gt;\r\nnum = 55406251 (or some random number less than 2000000000) &lt;br&gt;\r\nThread-1end! &lt;br&gt;\r\nThread-0end! &lt;br&gt;\r\n\r\n**The most important concept he gives is the safepoint:**\r\nWe have safepoint in long fori loop due to uncounted loop but not int fori loop. Therefore in int fori loop, the sleep needs to wait for the two threads to finish and then do GC cause there is no safepoint when the threads are still in int fori loop. \r\n\r\n## Issue: \r\nI take his idea and try to reproduce them on my local machine then it failed:\r\nBasically no matter whether I use int or long, it is always the result similar to the second one. The num get printed first. \r\n\r\n**Then after carefully thinking, it can only be due to the JVM I use: java 11 corretto.**\r\n\r\n**Based on tech doc&#39;s idea, it basicaly means in Java 11 safepints exist both in counted and uncounted loop**\r\n\r\n## Question:\r\n&lt;s&gt;Can anyone test on java 8 and tell me whether that is the reason?&lt;/s&gt;\r\n\r\nI actually already tested: in java 8 we can observe the expected results of both A and B\r\n \r\n**Does java 11 change the way how we put Safe Points and why?**\r\n\r\n## Related links:\r\n\r\nThe tech doc trying to explain on and How to do GC in fori loop: https://stackoverflow.com/questions/53284031/why-thread-sleep0-can-prevent-gc-in-rocketmq","title":"Java For loop using int vs long","body":"<h2>Context</h2>\n<p>I am reading a tech document which basically tells me the difference between using int vs long in fori loop:\nScenario A(int fori loop)</p>\n<pre><code>public class SafePoint {\n\n    public static AtomicInteger num = new AtomicInteger(0);\n\n    public static void main(String[] args) throws InterruptedException {\n        Runnable runnable=()-&gt;{\n            for (int i = 0; i &lt; 1000000000; i++) {\n                num.getAndAdd(1);\n            }\n            System.out.println(Thread.currentThread().getName()+&quot;end!&quot;);\n        };\n\n        Thread t1 = new Thread(runnable);\n        Thread t2 = new Thread(runnable);\n        t1.start();\n        t2.start();\n        Thread.sleep(1000);\n        System.out.println(&quot;num = &quot; + num);\n    }\n\n}\n</code></pre>\n<p><strong>Expected Result:</strong></p>\n<p>Thread-1end! <br>\nThread-0end! <br>\nnum = 2000000000 <br></p>\n<p>Scenario B(long fori loop)</p>\n<pre><code>public class SafePoint {\n\n    public static AtomicInteger num = new AtomicInteger(0);\n\n    public static void main(String[] args) throws InterruptedException {\n        Runnable runnable=()-&gt;{\n            for (long i = 0; i &lt; 1000000000; i++) {\n                num.getAndAdd(1);\n            }\n            System.out.println(Thread.currentThread().getName()+&quot;end!&quot;);\n        };\n\n        Thread t1 = new Thread(runnable);\n        Thread t2 = new Thread(runnable);\n        t1.start();\n        t2.start();\n        Thread.sleep(1000);\n        System.out.println(&quot;num = &quot; + num);\n    }\n\n}\n\n</code></pre>\n<p><strong>Expected Result:</strong> <br>\nnum = 55406251 (or some random number less than 2000000000) <br>\nThread-1end! <br>\nThread-0end! <br></p>\n<p><strong>The most important concept he gives is the safepoint:</strong>\nWe have safepoint in long fori loop due to uncounted loop but not int fori loop. Therefore in int fori loop, the sleep needs to wait for the two threads to finish and then do GC cause there is no safepoint when the threads are still in int fori loop.</p>\n<h2>Issue:</h2>\n<p>I take his idea and try to reproduce them on my local machine then it failed:\nBasically no matter whether I use int or long, it is always the result similar to the second one. The num get printed first.</p>\n<p><strong>Then after carefully thinking, it can only be due to the JVM I use: java 11 corretto.</strong></p>\n<p><strong>Based on tech doc's idea, it basicaly means in Java 11 safepints exist both in counted and uncounted loop</strong></p>\n<h2>Question:</h2>\n<p><s>Can anyone test on java 8 and tell me whether that is the reason?</s></p>\n<p>I actually already tested: in java 8 we can observe the expected results of both A and B</p>\n<p><strong>Does java 11 change the way how we put Safe Points and why?</strong></p>\n<h2>Related links:</h2>\n<p>The tech doc trying to explain on and How to do GC in fori loop: <a href=\"https://stackoverflow.com/questions/53284031/why-thread-sleep0-can-prevent-gc-in-rocketmq\">Why Thread.sleep(0) can prevent gc in rocketmq?</a></p>\n"},{"tags":["java","eclipse","selenium"],"answers":[{"tags":[],"owner":{"account_id":1690035,"reputation":22131,"user_id":1552587,"accept_rate":40,"display_name":"Titus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1464333909,"creation_date":1464333909,"answer_id":37477308,"question_id":37477089,"body_markdown":"You can call `driver1.close()` if  `driver1.findElement(By.xpath(&quot;//div/ul[@class = &#39;nav float-right&#39;]/li[3]&quot;))` throws a `NoSuchElementException`  exception.\r\n\r\nThe browser will be closed if the current page is the only open page in the browser.\r\n\r\nHere is an example:\r\n\r\n    try{\r\n        WebElement elm = driver1.findElement(By.xpath(&quot;//div/ul[@class = &#39;nav float-right&#39;]/li[3]&quot;));\r\n        elm.click();\r\n    }catch(NoSuchElementException e){\r\n        driver1.close();\r\n        break; // exit the loop.\r\n    }","title":"selenium webdriver invalid login","body":"<p>You can call <code>driver1.close()</code> if  <code>driver1.findElement(By.xpath(\"//div/ul[@class = 'nav float-right']/li[3]\"))</code> throws a <code>NoSuchElementException</code>  exception.</p>\n\n<p>The browser will be closed if the current page is the only open page in the browser.</p>\n\n<p>Here is an example:</p>\n\n<pre><code>try{\n    WebElement elm = driver1.findElement(By.xpath(\"//div/ul[@class = 'nav float-right']/li[3]\"));\n    elm.click();\n}catch(NoSuchElementException e){\n    driver1.close();\n    break; // exit the loop.\n}\n</code></pre>\n"}],"owner":{"account_id":8523518,"reputation":1,"user_id":6389587,"display_name":"Avantika Sarkar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1514,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662785905,"creation_date":1464333246,"question_id":37477089,"body_markdown":"i want  to close the browser for an invalid username/password but i am not able to do that. It runs well for a valid input though but for an invalid one it just freezes in the page where it shows &quot;invalid login&quot;. this is my code. setup1 is just opening the browser.\r\n\r\n while(recordset.next()){\r\n  \t\t\t    \t   \r\n  \t\t\t    \t   setUp1();\r\n  \t\t\t    \t   System.out.println(driver1);\r\n  \t\t\t          driver1.manage().timeouts().implicitlyWait(3000, TimeUnit.SECONDS);\t\t\r\n  \t\t\t       \r\n  \t\t\t\t   System.out.println(recordset.getField(&quot;NAME&quot;));\r\n  \t\t\t       System.out.println(recordset.getField(&quot;PASSWORD&quot;));\r\n  \t\t\t    \r\n  \t\t\t       String store1 = recordset.getField(&quot;NAME&quot;);\r\n  \t\t\t       String store = recordset.getField(&quot;PASSWORD&quot;);\r\n  \t\t\t     \r\n\r\n     \t\t        driver1.findElement(By.id(&quot;signin_button&quot;)).click();\r\n  \t\t\t        driver1.findElement(By.id(&quot;user_login&quot;)).clear();\r\n  \t\t\t        driver1.findElement(By.id(&quot;user_password&quot;)).clear();\r\n  \t\t\t    \tdriver1.findElement(By.id(&quot;user_login&quot;)).sendKeys(store1);\r\n      \t\t        driver1.findElement(By.id(&quot;user_password&quot;)).sendKeys(store);\r\n      \t\t        \r\n      \t\t        driver1.findElement(By.name(&quot;submit&quot;)).click();\r\n      \t\t\r\n      \t\t       \r\n      \t\t        driver1.findElement(By.xpath(&quot;//div/ul[@class = &#39;nav float-right&#39;]/li[3]&quot;)).click();            \r\n      \t\t        driver1.findElement(By.id(&quot;logout_link&quot;)).click();","title":"selenium webdriver invalid login","body":"<p>i want  to close the browser for an invalid username/password but i am not able to do that. It runs well for a valid input though but for an invalid one it just freezes in the page where it shows \"invalid login\". this is my code. setup1 is just opening the browser.</p>\n\n<p>while(recordset.next()){</p>\n\n<pre><code>                   setUp1();\n                   System.out.println(driver1);\n                  driver1.manage().timeouts().implicitlyWait(3000, TimeUnit.SECONDS);       \n\n               System.out.println(recordset.getField(\"NAME\"));\n               System.out.println(recordset.getField(\"PASSWORD\"));\n\n               String store1 = recordset.getField(\"NAME\");\n               String store = recordset.getField(\"PASSWORD\");\n\n\n                driver1.findElement(By.id(\"signin_button\")).click();\n                driver1.findElement(By.id(\"user_login\")).clear();\n                driver1.findElement(By.id(\"user_password\")).clear();\n                driver1.findElement(By.id(\"user_login\")).sendKeys(store1);\n                driver1.findElement(By.id(\"user_password\")).sendKeys(store);\n\n                driver1.findElement(By.name(\"submit\")).click();\n\n\n                driver1.findElement(By.xpath(\"//div/ul[@class = 'nav float-right']/li[3]\")).click();            \n                driver1.findElement(By.id(\"logout_link\")).click();\n</code></pre>\n"},{"tags":["java","design-patterns","architecture","domain-driven-design"],"answers":[{"tags":[],"owner":{"account_id":1809965,"reputation":36736,"user_id":1646240,"accept_rate":91,"display_name":"StepUp"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1662785469,"creation_date":1662785469,"answer_id":73669353,"question_id":73669015,"body_markdown":"You definitely do not want any database code in your entities or domain services.\r\n\r\n[Application Service is a place for operations][1]:\r\n\r\n&gt; In many cases, Application Services are the interface used by the\r\n&gt; outside world, where the outside world can’t communicate via our\r\n&gt; Entity objects, but may have other representations of them. \r\n&gt; Application Services could map outside messages to internal operations\r\n&gt; and processes, communicating with services in the Domain and\r\n&gt; Infrastructure layers to provide cohesive operations for outside\r\n&gt; clients.\r\n\r\nApplication services orchestrate calls to repositories and domain objects.\r\n\r\n\r\n  [1]: https://lostechies.com/jimmybogard/2008/08/21/services-in-domain-driven-design/","title":"DDD, should I create a domain service just to save data?","body":"<p>You definitely do not want any database code in your entities or domain services.</p>\n<p><a href=\"https://lostechies.com/jimmybogard/2008/08/21/services-in-domain-driven-design/\" rel=\"nofollow noreferrer\">Application Service is a place for operations</a>:</p>\n<blockquote>\n<p>In many cases, Application Services are the interface used by the\noutside world, where the outside world can’t communicate via our\nEntity objects, but may have other representations of them.\nApplication Services could map outside messages to internal operations\nand processes, communicating with services in the Domain and\nInfrastructure layers to provide cohesive operations for outside\nclients.</p>\n</blockquote>\n<p>Application services orchestrate calls to repositories and domain objects.</p>\n"}],"owner":{"account_id":13467469,"reputation":778,"user_id":9740664,"display_name":"Patrick"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":589,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":73669353,"answer_count":1,"score":3,"last_activity_date":1662785469,"creation_date":1662779315,"question_id":73669015,"body_markdown":"I&#39;m trying to folllow this guide https://www.baeldung.com/hexagonal-architecture-ddd-spring . After reading along I found this interesting approach\r\n\r\n&gt; Lastly, we should make sure that the Order will be always saved after\r\n&gt; each action. To do that, we&#39;ll define a **Domain Service**, which usually\r\n&gt; contains logic that can&#39;t be a part of our root:\r\n\r\nSo from what I understand **a domain service is what we use when  we can&#39;t fit business logic in a single domain object**. But what the guide did was just saving a single domain object to the database because we can&#39;t have the repository within our domain object right??. If that&#39;s the case why don&#39;t we just **let the controller have access to the repository** (some say it&#39;s bad practice some say &quot;no&quot; I don&#39;t even understand??) since we already put business logic in the domain object. so we would have something like this.\r\n\r\n    @PostMapping\r\n    public Mono&lt;Order&gt; addProduct(Request request) {\r\n        return orderRepository.findById(request.orderId())\r\n                              .map(order -&gt; {\r\n                                  order.addProduct(reqeust.getProduct());\r\n                                  return order;\r\n                              })\r\n                              .flatMap(order-&gt; orderRepository.save(order));\r\n    }.\r\n\r\nShould we create an additional layer and call it **Domain Service** for saving data ? please help me understand best practice.","title":"DDD, should I create a domain service just to save data?","body":"<p>I'm trying to folllow this guide <a href=\"https://www.baeldung.com/hexagonal-architecture-ddd-spring\" rel=\"nofollow noreferrer\">https://www.baeldung.com/hexagonal-architecture-ddd-spring</a> . After reading along I found this interesting approach</p>\n<blockquote>\n<p>Lastly, we should make sure that the Order will be always saved after\neach action. To do that, we'll define a <strong>Domain Service</strong>, which usually\ncontains logic that can't be a part of our root:</p>\n</blockquote>\n<p>So from what I understand <strong>a domain service is what we use when  we can't fit business logic in a single domain object</strong>. But what the guide did was just saving a single domain object to the database because we can't have the repository within our domain object right??. If that's the case why don't we just <strong>let the controller have access to the repository</strong> (some say it's bad practice some say &quot;no&quot; I don't even understand??) since we already put business logic in the domain object. so we would have something like this.</p>\n<pre><code>@PostMapping\npublic Mono&lt;Order&gt; addProduct(Request request) {\n    return orderRepository.findById(request.orderId())\n                          .map(order -&gt; {\n                              order.addProduct(reqeust.getProduct());\n                              return order;\n                          })\n                          .flatMap(order-&gt; orderRepository.save(order));\n}.\n</code></pre>\n<p>Should we create an additional layer and call it <strong>Domain Service</strong> for saving data ? please help me understand best practice.</p>\n"},{"tags":["java","spring","hibernate","postgresql"],"comments":[{"owner":{"account_id":5806439,"reputation":319,"user_id":4578902,"accept_rate":57,"display_name":"sAm"},"score":0,"creation_date":1468216972,"post_id":38299685,"comment_id":64016707,"body_markdown":"Have you tired hibernate.hbm2ddl.auto=create?","body":"Have you tired hibernate.hbm2ddl.auto=create?"},{"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1548280483,"post_id":38299685,"comment_id":95489816,"body_markdown":"hey did you solve this? and how?","body":"hey did you solve this? and how?"}],"answers":[{"tags":[],"owner":{"account_id":974448,"reputation":3435,"user_id":2042457,"accept_rate":56,"display_name":"aksappy"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1468834643,"creation_date":1468216821,"answer_id":38300054,"question_id":38299685,"body_markdown":"The property `hibernate.hbm2ddl.auto` will do the trick for you. It automatically validates or exports schema DDL to the database when the SessionFactory is created. With create-drop, the database schema will be dropped when the SessionFactory is closed explicitly.\r\n\r\nHibernate can accept these options for the above property.\r\n\r\n`validate`: validate the schema, makes no changes to the database.\r\n\r\n`update`: update the schema.\r\n\r\n`create`: creates the schema, destroying previous data.\r\n\r\n`create-drop`: drop the schema at the end of the session.","title":"PostgreSQL + Hibernate + Spring auto create database","body":"<p>The property <code>hibernate.hbm2ddl.auto</code> will do the trick for you. It automatically validates or exports schema DDL to the database when the SessionFactory is created. With create-drop, the database schema will be dropped when the SessionFactory is closed explicitly.</p>\n\n<p>Hibernate can accept these options for the above property.</p>\n\n<p><code>validate</code>: validate the schema, makes no changes to the database.</p>\n\n<p><code>update</code>: update the schema.</p>\n\n<p><code>create</code>: creates the schema, destroying previous data.</p>\n\n<p><code>create-drop</code>: drop the schema at the end of the session.</p>\n"},{"tags":[],"owner":{"account_id":4580490,"reputation":1363,"user_id":5850195,"display_name":"ankidaemon"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1468216966,"creation_date":1468216966,"answer_id":38300095,"question_id":38299685,"body_markdown":"Postgres unlike mysql does not support `Create Database If not exist`. \r\n\r\nThus changing `hibernate.hbm2ddl.auto=create` and changing URL `jdbc.url=jdbc:postgresql://localhost/database?createDatabaseIfNotExist=true`\r\nwon&#39;t work for you.\r\n\r\nHowever you can try simulating the behavior as in below questions:\r\n\r\nhttps://stackoverflow.com/questions/30280683/create-postgres-database-on-the-fly-if-it-doesnt-exists-using-hibernate\r\n\r\nhttps://stackoverflow.com/questions/18389124/simulate-create-database-if-not-exists-for-postgresql","title":"PostgreSQL + Hibernate + Spring auto create database","body":"<p>Postgres unlike mysql does not support <code>Create Database If not exist</code>. </p>\n\n<p>Thus changing <code>hibernate.hbm2ddl.auto=create</code> and changing URL <code>jdbc.url=jdbc:postgresql://localhost/database?createDatabaseIfNotExist=true</code>\nwon't work for you.</p>\n\n<p>However you can try simulating the behavior as in below questions:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/30280683/create-postgres-database-on-the-fly-if-it-doesnt-exists-using-hibernate\">Create Postgres database on the fly, if it doesn&#39;t exists using Hibernate</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/18389124/simulate-create-database-if-not-exists-for-postgresql\">Simulate CREATE DATABASE IF NOT EXISTS for PostgreSQL?</a></p>\n"},{"tags":[],"owner":{"account_id":6567042,"reputation":3665,"user_id":5076266,"accept_rate":74,"display_name":"Thilina Sampath"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1542376544,"creation_date":1504521191,"answer_id":46035190,"question_id":38299685,"body_markdown":"Try this way\r\n\r\n    spring.jpa.hibernate.ddl-auto=update\r\n    spring.jpa.generate-ddl=true\r\n    spring.jpa.database-platform=org.hibernate.dialect.PostgreSQL94Dialect\r\n\r\n    spring.datasource.driverClassName=org.postgresql.Driver\r\n    spring.datasource.url= jdbc:postgresql://localhost:5432/postgres\r\n    spring.datasource.username=postgres\r\n    spring.datasource.password=123\r\n\r\n    spring.jpa.show-sql=true\r\n    spring.session.store-type=none\r\n\r\nThis is work for me.\r\n \r\nFrom the [*Automatic schema generation* section of the Hibernate User Guide](https://docs.jboss.org/hibernate/orm/5.1/userguide/html_single/Hibernate_User_Guide.html#configurations-hbmddl):\r\n\r\n&gt; `javax.persistence.schema-generation.database.action`\r\n&gt;\r\n&gt; Setting to perform SchemaManagementTool actions automatically as part of the SessionFactory lifecycle. Valid options are defined by the **externalJpaName** value of the Action enum:\r\n&gt;\r\n&gt; - `none` - No action will be performed.\r\n&gt;\r\n&gt; - `create` - Database creation will be generated.\r\n&gt;\r\n&gt; - `drop` - Database dropping will be generated.\r\n&gt;\r\n&gt; - `drop-and-create` - Database dropping will be generated followed by database creation.\r\n\r\nthere `spring.jpa.hibernate.ddl-auto=update` ==&gt; `update`, you can change according to your scenario. ","title":"PostgreSQL + Hibernate + Spring auto create database","body":"<p>Try this way</p>\n\n<pre><code>spring.jpa.hibernate.ddl-auto=update\nspring.jpa.generate-ddl=true\nspring.jpa.database-platform=org.hibernate.dialect.PostgreSQL94Dialect\n\nspring.datasource.driverClassName=org.postgresql.Driver\nspring.datasource.url= jdbc:postgresql://localhost:5432/postgres\nspring.datasource.username=postgres\nspring.datasource.password=123\n\nspring.jpa.show-sql=true\nspring.session.store-type=none\n</code></pre>\n\n<p>This is work for me.</p>\n\n<p>From the <a href=\"https://docs.jboss.org/hibernate/orm/5.1/userguide/html_single/Hibernate_User_Guide.html#configurations-hbmddl\" rel=\"noreferrer\"><em>Automatic schema generation</em> section of the Hibernate User Guide</a>:</p>\n\n<blockquote>\n  <p><code>javax.persistence.schema-generation.database.action</code></p>\n  \n  <p>Setting to perform SchemaManagementTool actions automatically as part of the SessionFactory lifecycle. Valid options are defined by the <strong>externalJpaName</strong> value of the Action enum:</p>\n  \n  <ul>\n  <li><p><code>none</code> - No action will be performed.</p></li>\n  <li><p><code>create</code> - Database creation will be generated.</p></li>\n  <li><p><code>drop</code> - Database dropping will be generated.</p></li>\n  <li><p><code>drop-and-create</code> - Database dropping will be generated followed by database creation.</p></li>\n  </ul>\n</blockquote>\n\n<p>there <code>spring.jpa.hibernate.ddl-auto=update</code> ==> <code>update</code>, you can change according to your scenario. </p>\n"},{"tags":[],"owner":{"account_id":3561882,"reputation":191,"user_id":2974602,"display_name":"Meriam"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1539768432,"creation_date":1539768432,"answer_id":52851512,"question_id":38299685,"body_markdown":"you can have a schema.sql script with `&quot;CREATE SCHEMA IF NOT EXISTS x;&quot;` with \r\n\r\n    spring.jpa.properties.hibernate.hbm2ddl.auto=update \r\n\r\nIt should work","title":"PostgreSQL + Hibernate + Spring auto create database","body":"<p>you can have a schema.sql script with <code>\"CREATE SCHEMA IF NOT EXISTS x;\"</code> with </p>\n\n<pre><code>spring.jpa.properties.hibernate.hbm2ddl.auto=update \n</code></pre>\n\n<p>It should work</p>\n"},{"tags":[],"owner":{"account_id":3055354,"reputation":537,"user_id":2589120,"display_name":"Ali Katkar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1574244616,"creation_date":1574244616,"answer_id":58951708,"question_id":38299685,"body_markdown":"The problem is about hibernate dialect. You are using old one. You should use newer one like this.\r\n\r\n    spring.jpa.database-platform=org.hibernate.dialect.PostgreSQL95Dialect","title":"PostgreSQL + Hibernate + Spring auto create database","body":"<p>The problem is about hibernate dialect. You are using old one. You should use newer one like this.</p>\n\n<pre><code>spring.jpa.database-platform=org.hibernate.dialect.PostgreSQL95Dialect\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17489700,"reputation":1,"user_id":12682098,"display_name":"MrOlloyor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578568280,"creation_date":1578568280,"answer_id":59662674,"question_id":38299685,"body_markdown":"Just change \r\n\r\nfrom:\r\n\r\n    @Table(name = &quot;user&quot;) || @Entity(name=&quot;user&quot;)\r\n\r\n to: \r\n\r\n    @Table(name = &quot;users&quot;) || @Entity(name=&quot;users&quot;)\r\n\r\n Because PostgreSQL has default &quot;user&quot;","title":"PostgreSQL + Hibernate + Spring auto create database","body":"<p>Just change </p>\n\n<p>from:</p>\n\n<pre><code>@Table(name = \"user\") || @Entity(name=\"user\")\n</code></pre>\n\n<p>to: </p>\n\n<pre><code>@Table(name = \"users\") || @Entity(name=\"users\")\n</code></pre>\n\n<p>Because PostgreSQL has default \"user\"</p>\n"},{"tags":[],"owner":{"account_id":25956222,"reputation":71,"user_id":19673533,"display_name":"Jayesh Solanki"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1662782799,"creation_date":1662658514,"answer_id":73653087,"question_id":38299685,"body_markdown":"**Spring Boot**\r\n\r\nPostgres does not support `createDatabaseIfNotExist=true`\r\nSo you can try similar way and it worked for me see [Screenshot][1]\r\n\r\n    @SpringBootApplication\r\n    public class SpringSecurityJwtApplication{\r\n    \r\n    \tpublic static void main(String[] args) {\r\n            Logger logger = LoggerFactory.getLogger(SpringSecurityJwtApplication.class);\r\n    \t\tConnection connection = null;\r\n    \t\tStatement statement = null;\r\n    \t\ttry {\r\n    \t\t\tlogger.debug(&quot;Creating database if not exist...&quot;);\r\n    \t\t\tconnection = DriverManager.getConnection(&quot;jdbc:postgresql://localhost:5432/&quot;, &quot;postgres&quot;, &quot;postgres&quot;);\r\n    \t\t\tstatement = connection.createStatement();\r\n    \t\t\tstatement.executeQuery(&quot;SELECT count(*) FROM pg_database WHERE datname = &#39;database_name&#39;&quot;);\r\n    \t\t\tResultSet resultSet = statement.getResultSet();\r\n    \t\t\tresultSet.next();\r\n    \t\t\tint count = resultSet.getInt(1);\r\n    \r\n    \t\t\tif (count &lt;= 0) {\r\n    \t\t\t\tstatement.executeUpdate(&quot;CREATE DATABASE database_name&quot;);\r\n    \t\t\t\tlogger.debug(&quot;Database created.&quot;);\r\n    \t\t\t} else {\r\n    \t\t\t\tlogger.debug(&quot;Database already exist.&quot;);\r\n    \t\t\t}\r\n    \t\t} catch (SQLException e) {\r\n    \t\t\tlogger.error(e.toString());\r\n    \t\t} finally {\r\n    \t\t\ttry {\r\n    \t\t\t\tif (statement != null) {\r\n    \t\t\t\t\tstatement.close();\r\n    \t\t\t\t\tlogger.debug(&quot;Closed Statement.&quot;);\r\n    \t\t\t\t}\r\n    \t\t\t\tif (connection != null) {\r\n    \t\t\t\t\tlogger.debug(&quot;Closed Connection.&quot;);\r\n    \t\t\t\t\tconnection.close();\r\n    \t\t\t\t}\r\n    \t\t\t} catch (SQLException e) {\r\n    \t\t\t\tlogger.error(e.toString());\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tSpringApplication.run(SpringSecurityJwtApplication.class, args);\r\n    \t}\r\n    }\r\n\r\n  [1]: https://i.stack.imgur.com/NYeuw.png","title":"PostgreSQL + Hibernate + Spring auto create database","body":"<p><strong>Spring Boot</strong></p>\n<p>Postgres does not support <code>createDatabaseIfNotExist=true</code>\nSo you can try similar way and it worked for me see <a href=\"https://i.stack.imgur.com/NYeuw.png\" rel=\"nofollow noreferrer\">Screenshot</a></p>\n<pre><code>@SpringBootApplication\npublic class SpringSecurityJwtApplication{\n\n    public static void main(String[] args) {\n        Logger logger = LoggerFactory.getLogger(SpringSecurityJwtApplication.class);\n        Connection connection = null;\n        Statement statement = null;\n        try {\n            logger.debug(&quot;Creating database if not exist...&quot;);\n            connection = DriverManager.getConnection(&quot;jdbc:postgresql://localhost:5432/&quot;, &quot;postgres&quot;, &quot;postgres&quot;);\n            statement = connection.createStatement();\n            statement.executeQuery(&quot;SELECT count(*) FROM pg_database WHERE datname = 'database_name'&quot;);\n            ResultSet resultSet = statement.getResultSet();\n            resultSet.next();\n            int count = resultSet.getInt(1);\n\n            if (count &lt;= 0) {\n                statement.executeUpdate(&quot;CREATE DATABASE database_name&quot;);\n                logger.debug(&quot;Database created.&quot;);\n            } else {\n                logger.debug(&quot;Database already exist.&quot;);\n            }\n        } catch (SQLException e) {\n            logger.error(e.toString());\n        } finally {\n            try {\n                if (statement != null) {\n                    statement.close();\n                    logger.debug(&quot;Closed Statement.&quot;);\n                }\n                if (connection != null) {\n                    logger.debug(&quot;Closed Connection.&quot;);\n                    connection.close();\n                }\n            } catch (SQLException e) {\n                logger.error(e.toString());\n            }\n        }\n        SpringApplication.run(SpringSecurityJwtApplication.class, args);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":5737875,"reputation":585,"user_id":4531387,"accept_rate":61,"display_name":"Tran Vinh Quang"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49137,"favorite_count":0,"down_vote_count":3,"up_vote_count":9,"accepted_answer_id":38300054,"answer_count":7,"score":6,"last_activity_date":1662782799,"creation_date":1468214860,"question_id":38299685,"body_markdown":"I&#39;m working with PostgreSQL and Spring 4 and want my app auto create database when it running.\r\n\r\nMy Entity Class is:\r\n\r\n    @Entity\r\n    @Table(name = &quot;user&quot;, schema = &quot;public&quot;)\r\n    public class User extends BaseEntity {\r\n    \r\n    \tprivate Integer id;\r\n    \tprivate String name;\r\n    \tprivate Integer contractId;\r\n    \r\n    \tpublic User() {\r\n    \t}\r\n    \r\n    \tpublic User(Integer id) {\r\n    \t\tsuper(id);\r\n    \t}\r\n    \r\n    \t@Id\r\n    \t@Column(name = &quot;usr_id&quot;, nullable = false)\r\n    \t@GeneratedValue(strategy= GenerationType.IDENTITY)\r\n    \tpublic Integer getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    \r\n    \tpublic void setId(Integer id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \r\n    \t@Basic\r\n    \t@Column(name = &quot;usr_name&quot;, nullable = true, length = -1)\r\n    \tpublic String getName() {\r\n    \t\treturn name;\r\n    \t}\r\n    \r\n    \tpublic void setName(String name) {\r\n    \t\tthis.name = name;\r\n    \t}\r\n    \r\n    \t@Basic\r\n    \t@Column(name = &quot;usr_contract_id&quot;, nullable = true)\r\n    \tpublic Integer getContractId() {\r\n    \t\treturn contractId;\r\n    \t}\r\n    \r\n    \tpublic void setContractId(Integer contractId) {\r\n    \t\tthis.contractId = contractId;\r\n    \t}\r\n    \r\n    }\r\n\r\nHibernateConfig.java\r\n\r\n    @Configuration\r\n    @EnableTransactionManagement(proxyTargetClass = true)\r\n    @PropertySources({\r\n    \t@PropertySource(value = &quot;classpath:application.properties&quot;)})\r\n    @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\r\n    public class HibernateConfig {\r\n    \r\n    \t@Autowired\r\n    \tprivate Environment environment;\r\n    \r\n    \t@Autowired\r\n    \tprivate DataSource dataSource;\r\n    \r\n    \t@Autowired\r\n    \tprivate MultiTenantConnectionProvider multiTenantConnectionProvider;\r\n    \r\n    \t@Autowired\r\n    \tprivate CurrentTenantIdentifierResolver currentTenantIdentifierResolver;\r\n    \r\n    \tpublic HibernateConfig() {}\r\n    \r\n    \t@Bean\r\n    \tpublic LocalSessionFactoryBean sessionFactory() throws Exception {\r\n    \r\n    \t\tLocalSessionFactoryBean sessionFactory = new LocalSessionFactoryBean();\r\n    \t\tsessionFactory.setDataSource(dataSource);\r\n    \t\tsessionFactory.setHibernateProperties(hibernateProperties());\r\n    \r\n    \t\tsessionFactory.setPackagesToScan(new String[] {\r\n    \t\t\t&quot;com.xxx.xxx.model&quot;,\r\n    \t\t});\r\n    \r\n    \t\treturn sessionFactory;\r\n    \t}\r\n    \r\n    \tprivate Properties hibernateProperties() {\r\n    \t\tProperties properties = new Properties();\r\n    \t\tproperties.put(DIALECT, environment.getRequiredProperty(DIALECT));\r\n    \t\tproperties.put(SHOW_SQL, environment.getRequiredProperty(SHOW_SQL));\r\n    \t\tproperties.put(FORMAT_SQL, environment.getRequiredProperty(FORMAT_SQL));\r\n    \t\tproperties.put(HBM2DDL_AUTO, environment.getRequiredProperty(HBM2DDL_AUTO));\r\n    \r\n    \t\treturn properties;\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \t@Primary\r\n    \t@Autowired\r\n    \tpublic HibernateTransactionManager transactionManager(SessionFactory s) {\r\n    \t\tHibernateTransactionManager txManager = new HibernateTransactionManager();\r\n    \t\ttxManager.setSessionFactory(s);\r\n    \t\treturn txManager;\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \t@Autowired\r\n    \tpublic HibernateTemplate hibernateTemplate(SessionFactory s) {\r\n    \t\tHibernateTemplate hibernateTemplate = new HibernateTemplate(s);\r\n    \t\treturn hibernateTemplate;\r\n    \t}\r\n    }\r\n\r\napplication.properties\r\n\r\n    # Database connection settings:\r\n    jdbc.driverClassName=org.postgresql.Driver\r\n    jdbc.url=jdbc:postgresql://localhost:5432/database\r\n    jdbc.username=postgres\r\n    jdbc.password=111111\r\n\r\n    hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\r\n    hibernate.show_sql=false\r\n    hibernate.format_sql=false\r\n    hibernate.hbm2ddl.auto=update\r\n\r\n    spring.datasource.initialSize=50\r\n    spring.datasource.maxActive=200\r\n    spring.datasource.maxIdle=200\r\n    spring.datasource.minIdle=50\r\n\r\nBut when I running SQL to access table User, this will appear error: Table &#39;User&#39; does not exist.\r\n\r\nHow can I make Hibernate to auto create database?\r\n","title":"PostgreSQL + Hibernate + Spring auto create database","body":"<p>I'm working with PostgreSQL and Spring 4 and want my app auto create database when it running.</p>\n\n<p>My Entity Class is:</p>\n\n<pre><code>@Entity\n@Table(name = \"user\", schema = \"public\")\npublic class User extends BaseEntity {\n\n    private Integer id;\n    private String name;\n    private Integer contractId;\n\n    public User() {\n    }\n\n    public User(Integer id) {\n        super(id);\n    }\n\n    @Id\n    @Column(name = \"usr_id\", nullable = false)\n    @GeneratedValue(strategy= GenerationType.IDENTITY)\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    @Basic\n    @Column(name = \"usr_name\", nullable = true, length = -1)\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    @Basic\n    @Column(name = \"usr_contract_id\", nullable = true)\n    public Integer getContractId() {\n        return contractId;\n    }\n\n    public void setContractId(Integer contractId) {\n        this.contractId = contractId;\n    }\n\n}\n</code></pre>\n\n<p>HibernateConfig.java</p>\n\n<pre><code>@Configuration\n@EnableTransactionManagement(proxyTargetClass = true)\n@PropertySources({\n    @PropertySource(value = \"classpath:application.properties\")})\n@ConfigurationProperties(prefix = \"spring.datasource\")\npublic class HibernateConfig {\n\n    @Autowired\n    private Environment environment;\n\n    @Autowired\n    private DataSource dataSource;\n\n    @Autowired\n    private MultiTenantConnectionProvider multiTenantConnectionProvider;\n\n    @Autowired\n    private CurrentTenantIdentifierResolver currentTenantIdentifierResolver;\n\n    public HibernateConfig() {}\n\n    @Bean\n    public LocalSessionFactoryBean sessionFactory() throws Exception {\n\n        LocalSessionFactoryBean sessionFactory = new LocalSessionFactoryBean();\n        sessionFactory.setDataSource(dataSource);\n        sessionFactory.setHibernateProperties(hibernateProperties());\n\n        sessionFactory.setPackagesToScan(new String[] {\n            \"com.xxx.xxx.model\",\n        });\n\n        return sessionFactory;\n    }\n\n    private Properties hibernateProperties() {\n        Properties properties = new Properties();\n        properties.put(DIALECT, environment.getRequiredProperty(DIALECT));\n        properties.put(SHOW_SQL, environment.getRequiredProperty(SHOW_SQL));\n        properties.put(FORMAT_SQL, environment.getRequiredProperty(FORMAT_SQL));\n        properties.put(HBM2DDL_AUTO, environment.getRequiredProperty(HBM2DDL_AUTO));\n\n        return properties;\n    }\n\n    @Bean\n    @Primary\n    @Autowired\n    public HibernateTransactionManager transactionManager(SessionFactory s) {\n        HibernateTransactionManager txManager = new HibernateTransactionManager();\n        txManager.setSessionFactory(s);\n        return txManager;\n    }\n\n    @Bean\n    @Autowired\n    public HibernateTemplate hibernateTemplate(SessionFactory s) {\n        HibernateTemplate hibernateTemplate = new HibernateTemplate(s);\n        return hibernateTemplate;\n    }\n}\n</code></pre>\n\n<p>application.properties</p>\n\n<pre><code># Database connection settings:\njdbc.driverClassName=org.postgresql.Driver\njdbc.url=jdbc:postgresql://localhost:5432/database\njdbc.username=postgres\njdbc.password=111111\n\nhibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\nhibernate.show_sql=false\nhibernate.format_sql=false\nhibernate.hbm2ddl.auto=update\n\nspring.datasource.initialSize=50\nspring.datasource.maxActive=200\nspring.datasource.maxIdle=200\nspring.datasource.minIdle=50\n</code></pre>\n\n<p>But when I running SQL to access table User, this will appear error: Table 'User' does not exist.</p>\n\n<p>How can I make Hibernate to auto create database?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1662781606,"post_id":73669093,"comment_id":130091088,"body_markdown":"There is no safe way to do this.  By &quot;safe&quot; I mean &quot;doesn&#39;t corrupt the file if interrupted at the wrong time&quot;.","body":"There is no safe way to do this.  By &quot;safe&quot; I mean &quot;doesn&#39;t corrupt the file if interrupted at the wrong time&quot;."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1662787708,"post_id":73669093,"comment_id":130091651,"body_markdown":"Comment: you are squashing exceptions.  This is a really bad idea.  And it could be why your code is not working.","body":"Comment: you are squashing exceptions.  This is a really bad idea.  And it could be why your code is not working."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1662807788,"post_id":73669093,"comment_id":130094624,"body_markdown":"Easy if you treat the file as a [list of strings](https://technojeeves.com/index.php/aliasjava1/40-string-list)","body":"Easy if you treat the file as a <a href=\"https://technojeeves.com/index.php/aliasjava1/40-string-list\" rel=\"nofollow noreferrer\">list of strings</a>"}],"owner":{"account_id":23169604,"reputation":15,"user_id":17269029,"display_name":"L.zh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662780838,"creation_date":1662780838,"question_id":73669093,"body_markdown":"I have gotten a concept from my friend who is able to use use an array to edit a line in text file. However, when I implement it in my code, it removes the entire content of my text file instead of replacing a specific line with my new input.\r\n\r\nThis is my current code:\r\n\r\n    private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {                                         \r\n          \r\n            String tblCategory = jComboBox1.getSelectedItem().toString().trim();\r\n            String tblID = jTextField2.getText();\r\n            String tblName = jTextField3.getText();\r\n            String tblPrice = jTextField4.getText();\r\n    \r\n            ArrayList&lt;String&gt; tempArray = new ArrayList&lt;&gt;();\r\n    \r\n            try {\r\n                try (FileReader fr = new FileReader(&quot;src\\\\food.txt&quot;)) {\r\n                    Scanner reader = new Scanner(fr);\r\n                    String line;\r\n                    String[] lineArr;\r\n    \r\n                    while((line=reader.nextLine()) !=null) {\r\n                        lineArr = line.split(&quot;,&quot;);\r\n                        if(lineArr[1].equals(tblID)) {\r\n                            //String category = lineArr[1];\r\n    \r\n                            tempArray.remove(lineArr[1] + &quot;,&quot; + lineArr[2] + &quot;,&quot; + lineArr[3]);\r\n    \r\n    \r\n    \r\n                            tempArray.add(tblCategory + &quot;,&quot; +tblID + &quot;,&quot; +tblName+ &quot;,&quot; + tblPrice);\r\n                            JOptionPane.showMessageDialog(this, &quot;Food Details Updated Successfully!&quot;);\r\n                            jTextField2.setText(&quot;&quot;);\r\n                            jTextField3.setText(&quot;&quot;);\r\n                            jTextField4.setText(&quot;&quot;);\r\n                        } else {\r\n                            tempArray.add(line);\r\n                        }\r\n                    }\r\n    \r\n                    fr.close();\r\n                } catch (Exception e) {\r\n                }\r\n            } catch (Exception e) {\r\n            }\r\n    \r\n            try{\r\n                try (PrintWriter pr = new PrintWriter(&quot;src\\\\food.txt&quot;)) {\r\n                    for (String str : tempArray) {\r\n                        pr.println(str);\r\n                    }\r\n                    pr.close();\r\n                } catch (Exception e){\r\n                }\r\n            } catch (Exception e) {\r\n            }\r\n            \r\n            \r\n        }           \r\n\r\nThis is the content of my text file:\r\n\r\n    Category/Food ID/Food Name/Price (RM)\r\n    rice, R1, Curry Rice, 10\r\n    rice, R2, Chicken Rice, 8\r\n    rice, R3, Fried Rice, 8\r\n    rice, R4, Cheese Bake Rice, 12\r\n    noodle, N1, Beef Noodle, 10\r\n    noodle, N2, Mee Goreng, 7\r\n    burger, B1, Chicken Burger, 15\r\n    drink, D1, Ice Lemon Tea, 6\r\n    drink, D2, Milo, 6\r\n    drink, D3, Apple Juice, 6\r\n    drink, D4, 100 Plus, 3\r\n    drink, D5, Milk Tea, 5\r\n    noodle,N3,Meehoon,6\r\n    noodle,N4,Noodle Soup,12\r\n    noodle,N5,Laksa,10\r\n\r\n\r\nAny help would be appreciated as I&#39;ve spent almost 2 days on trying to get this code correct. I&#39;ve referred to many online sources but it can&#39;t be implemented to my code.\r\n                             ","title":"How do I edit a specific line of a file in java without creating a temp file?","body":"<p>I have gotten a concept from my friend who is able to use use an array to edit a line in text file. However, when I implement it in my code, it removes the entire content of my text file instead of replacing a specific line with my new input.</p>\n<p>This is my current code:</p>\n<pre><code>private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {                                         \n      \n        String tblCategory = jComboBox1.getSelectedItem().toString().trim();\n        String tblID = jTextField2.getText();\n        String tblName = jTextField3.getText();\n        String tblPrice = jTextField4.getText();\n\n        ArrayList&lt;String&gt; tempArray = new ArrayList&lt;&gt;();\n\n        try {\n            try (FileReader fr = new FileReader(&quot;src\\\\food.txt&quot;)) {\n                Scanner reader = new Scanner(fr);\n                String line;\n                String[] lineArr;\n\n                while((line=reader.nextLine()) !=null) {\n                    lineArr = line.split(&quot;,&quot;);\n                    if(lineArr[1].equals(tblID)) {\n                        //String category = lineArr[1];\n\n                        tempArray.remove(lineArr[1] + &quot;,&quot; + lineArr[2] + &quot;,&quot; + lineArr[3]);\n\n\n\n                        tempArray.add(tblCategory + &quot;,&quot; +tblID + &quot;,&quot; +tblName+ &quot;,&quot; + tblPrice);\n                        JOptionPane.showMessageDialog(this, &quot;Food Details Updated Successfully!&quot;);\n                        jTextField2.setText(&quot;&quot;);\n                        jTextField3.setText(&quot;&quot;);\n                        jTextField4.setText(&quot;&quot;);\n                    } else {\n                        tempArray.add(line);\n                    }\n                }\n\n                fr.close();\n            } catch (Exception e) {\n            }\n        } catch (Exception e) {\n        }\n\n        try{\n            try (PrintWriter pr = new PrintWriter(&quot;src\\\\food.txt&quot;)) {\n                for (String str : tempArray) {\n                    pr.println(str);\n                }\n                pr.close();\n            } catch (Exception e){\n            }\n        } catch (Exception e) {\n        }\n        \n        \n    }           \n</code></pre>\n<p>This is the content of my text file:</p>\n<pre><code>Category/Food ID/Food Name/Price (RM)\nrice, R1, Curry Rice, 10\nrice, R2, Chicken Rice, 8\nrice, R3, Fried Rice, 8\nrice, R4, Cheese Bake Rice, 12\nnoodle, N1, Beef Noodle, 10\nnoodle, N2, Mee Goreng, 7\nburger, B1, Chicken Burger, 15\ndrink, D1, Ice Lemon Tea, 6\ndrink, D2, Milo, 6\ndrink, D3, Apple Juice, 6\ndrink, D4, 100 Plus, 3\ndrink, D5, Milk Tea, 5\nnoodle,N3,Meehoon,6\nnoodle,N4,Noodle Soup,12\nnoodle,N5,Laksa,10\n</code></pre>\n<p>Any help would be appreciated as I've spent almost 2 days on trying to get this code correct. I've referred to many online sources but it can't be implemented to my code.</p>\n"},{"tags":["java","exception","throw"],"answers":[{"tags":[],"owner":{"account_id":1944253,"reputation":37590,"user_id":1749753,"display_name":"jlordo"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1355834503,"creation_date":1355834130,"answer_id":13933151,"question_id":13933123,"body_markdown":"you need an instance of the exception class to throw it:\r\n\r\n    throw new use();\r\n\r\nor \r\n\r\n    use a = new use();\r\n    throw a;\r\n\r\nIn the future please follow Java naming conventions, it will make your code much more readable. (class names should start with a capital letter).","title":"Using throw for user defined exception","body":"<p>you need an instance of the exception class to throw it:</p>\n\n<pre><code>throw new use();\n</code></pre>\n\n<p>or </p>\n\n<pre><code>use a = new use();\nthrow a;\n</code></pre>\n\n<p>In the future please follow Java naming conventions, it will make your code much more readable. (class names should start with a capital letter).</p>\n"},{"tags":[],"owner":{"account_id":5197704,"reputation":11,"user_id":4158312,"display_name":"ANAND"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1415622003,"creation_date":1415622003,"answer_id":26843699,"question_id":13933123,"body_markdown":"User defined exceptions can be created and thrown in Java.\r\n\r\nBy inheriting the Exception class you can create your own exceptions.\r\n\r\nAnd it can be thrown as and when required\r\n\r\n\r\nFollowing example shows how to create and throw user defined exceptions\r\n\r\nhttp://www.csnotes32.com/2014/09/how-to-create-user-defined-exception-in.html","title":"Using throw for user defined exception","body":"<p>User defined exceptions can be created and thrown in Java.</p>\n\n<p>By inheriting the Exception class you can create your own exceptions.</p>\n\n<p>And it can be thrown as and when required</p>\n\n<p>Following example shows how to create and throw user defined exceptions</p>\n\n<p><a href=\"http://www.csnotes32.com/2014/09/how-to-create-user-defined-exception-in.html\" rel=\"nofollow\">http://www.csnotes32.com/2014/09/how-to-create-user-defined-exception-in.html</a></p>\n"},{"tags":[],"owner":{"account_id":2360071,"reputation":109,"user_id":2066940,"display_name":"Lorne K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662780430,"creation_date":1662780430,"answer_id":73669073,"question_id":13933123,"body_markdown":"And remember, you don&#39;t need to roll your own.  \r\n\r\n    throw new RuntimeException(&quot;Do not instantiate this class&quot;);\r\n\r\n(old question, but I always forget syntax, so stashing on google)","title":"Using throw for user defined exception","body":"<p>And remember, you don't need to roll your own.</p>\n<pre><code>throw new RuntimeException(&quot;Do not instantiate this class&quot;);\n</code></pre>\n<p>(old question, but I always forget syntax, so stashing on google)</p>\n"}],"owner":{"account_id":2127194,"reputation":79,"user_id":1888988,"accept_rate":62,"display_name":"coder005"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8414,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":13933151,"answer_count":3,"score":0,"last_activity_date":1662780430,"creation_date":1355834039,"question_id":13933123,"body_markdown":"Following is the code where &quot; throw use; &quot; shows an error.Why? How to use throw for user defined exceptions?Give some example?\r\n\r\n    class use extends Exception{\r\n\tpublic String toString() {\r\n\t\treturn &quot;too many exceptions&quot;;\r\n\t}\r\n    }   \r\n    class user{\r\n\tpublic static void main(String s[]) {\r\n\t\tint i=3;\r\n\t\ttry {\r\n\t\t\tif(i&gt;1)\r\n\t\t\t\tthrow use;\r\n\t\t}\r\n\t\tcatch(use e) {\r\n\t\t\tSystem.out.println(e.toString());\r\n\t\t}\r\n\t\tfinally{\r\n\t\t\tSystem.out.println(&quot;program executed successfully!&quot;);\r\n\t\t}\r\n\t\t\r\n\t}\r\n    }","title":"Using throw for user defined exception","body":"<p>Following is the code where \" throw use; \" shows an error.Why? How to use throw for user defined exceptions?Give some example?</p>\n\n<pre><code>class use extends Exception{\npublic String toString() {\n    return \"too many exceptions\";\n}\n}   \nclass user{\npublic static void main(String s[]) {\n    int i=3;\n    try {\n        if(i&gt;1)\n            throw use;\n    }\n    catch(use e) {\n        System.out.println(e.toString());\n    }\n    finally{\n        System.out.println(\"program executed successfully!\");\n    }\n\n}\n}\n</code></pre>\n"},{"tags":["java","arrays","text","numbers"],"comments":[{"owner":{"account_id":8264324,"reputation":2252,"user_id":6214491,"accept_rate":100,"display_name":"0xCursor"},"score":0,"creation_date":1532876836,"post_id":4479683,"comment_id":90128452,"body_markdown":"@Duncan Jones Funny that you marked this post as a duplicate when it came like 4 years before the other post... I understand that the linked post is a tutorial like post, though.","body":"@Duncan Jones Funny that you marked this post as a duplicate when it came like 4 years before the other post... I understand that the linked post is a tutorial like post, though."},{"owner":{"account_id":218057,"reputation":67728,"user_id":474189,"accept_rate":72,"display_name":"Duncan Jones"},"score":1,"creation_date":1532885200,"post_id":4479683,"comment_id":90130891,"body_markdown":"@LAD Yes, it&#39;s a bit odd. But it&#39;s a common practice here - you can close older questions as duplicates if there is a more detailed answer.","body":"@LAD Yes, it&#39;s a bit odd. But it&#39;s a common practice here - you can close older questions as duplicates if there is a more detailed answer."}],"answers":[{"tags":[],"owner":{"account_id":238081,"reputation":9438,"user_id":506721,"accept_rate":89,"display_name":"Goran Jovic"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1292700290,"creation_date":1292700290,"answer_id":4479695,"question_id":4479683,"body_markdown":"It&#39;s the default string representation of array (the weird text).\r\n\r\nYou&#39;ll just have to loop through it:\r\n\r\n    for(int i : arr){\r\n    System.out.println(i);\r\n    }","title":"Java arrays printing out weird numbers and text","body":"<p>It's the default string representation of array (the weird text).</p>\n\n<p>You'll just have to loop through it:</p>\n\n<pre><code>for(int i : arr){\nSystem.out.println(i);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1292700315,"creation_date":1292700315,"answer_id":4479698,"question_id":4479683,"body_markdown":"Like this: \r\n\r\n    for (int i = 0; i &lt; arr.length; ++i)\r\n    {\r\n        System.out.println(arr[i]);\r\n    }\r\n\r\nThat &quot;weird number&quot; is the reference for the array you printed out.  It&#39;s the default behavior built into the java.lang.Object toString() method.  \r\n\r\nYou should override it in your own objects if seeing the reference isn&#39;t sufficient.\r\n","title":"Java arrays printing out weird numbers and text","body":"<p>Like this: </p>\n\n<pre><code>for (int i = 0; i &lt; arr.length; ++i)\n{\n    System.out.println(arr[i]);\n}\n</code></pre>\n\n<p>That \"weird number\" is the reference for the array you printed out.  It's the default behavior built into the java.lang.Object toString() method.  </p>\n\n<p>You should override it in your own objects if seeing the reference isn't sufficient.</p>\n"},{"tags":[],"owner":{"account_id":58892,"reputation":9969,"user_id":176291,"accept_rate":82,"display_name":"Enrique"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1292700737,"creation_date":1292700331,"answer_id":4479701,"question_id":4479683,"body_markdown":"To print the values use.\r\n\r\n    for(int i=0; i&lt;arr.length; i++)\r\n       System.out.println(arr[i]);\r\n\r\n","title":"Java arrays printing out weird numbers and text","body":"<p>To print the values use.</p>\n\n<pre><code>for(int i=0; i&lt;arr.length; i++)\n   System.out.println(arr[i]);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"down_vote_count":1,"up_vote_count":29,"is_accepted":false,"score":28,"last_activity_date":1532895102,"creation_date":1292700338,"answer_id":4479703,"question_id":4479683,"body_markdown":"Every object has a `toString()` method, and the default method is to display the object&#39;s class name representation, then `@` followed by its hashcode. So what you&#39;re seeing is the default `toString()` representation of an `int` array. To print the data in the array, you can use:\r\n\r\n    System.out.println(java.util.Arrays.toString(arr));\r\n\r\n\r\nOr, you can loop through the array with a `for` loop as others have posted in this thread.","title":"Java arrays printing out weird numbers and text","body":"<p>Every object has a <code>toString()</code> method, and the default method is to display the object's class name representation, then <code>@</code> followed by its hashcode. So what you're seeing is the default <code>toString()</code> representation of an <code>int</code> array. To print the data in the array, you can use:</p>\n\n<pre><code>System.out.println(java.util.Arrays.toString(arr));\n</code></pre>\n\n<p>Or, you can loop through the array with a <code>for</code> loop as others have posted in this thread.</p>\n"},{"tags":[],"owner":{"account_id":117125,"reputation":13617,"user_id":306855,"accept_rate":73,"display_name":"Emil"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1292701668,"creation_date":1292700358,"answer_id":4479706,"question_id":4479683,"body_markdown":"    System.out.println(Arrays.toString(arr));\r\n\r\nThe current output is `classtype@hashcode`.\r\n\r\n**Incase you need to print arrays with more than one dimension use:**\r\n\r\n    Arrays.deepToString(arr);\r\nAlso remember [to override `toString()`][2] method for user-defined classes so that you get a representation of the objet as you choose and not the default represention which is `classtype@hashcode`\r\n\r\n\r\n  [1]: http://java.sun.com/docs/books/jls/second_edition/html/arrays.doc.html\r\n  [2]: http://www.javapractices.com/topic/TopicAction.do?Id=55","title":"Java arrays printing out weird numbers and text","body":"<pre><code>System.out.println(Arrays.toString(arr));\n</code></pre>\n\n<p>The current output is <code>classtype@hashcode</code>.</p>\n\n<p><strong>Incase you need to print arrays with more than one dimension use:</strong></p>\n\n<pre><code>Arrays.deepToString(arr);\n</code></pre>\n\n<p>Also remember <a href=\"http://www.javapractices.com/topic/TopicAction.do?Id=55\" rel=\"noreferrer\">to override <code>toString()</code></a> method for user-defined classes so that you get a representation of the objet as you choose and not the default represention which is <code>classtype@hashcode</code></p>\n"},{"tags":[],"owner":{"account_id":262270,"reputation":7426,"user_id":547023,"accept_rate":100,"display_name":"EnabrenTane"},"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1292700368,"creation_date":1292700368,"answer_id":4479708,"question_id":4479683,"body_markdown":"You printed the reference and not the values at the reference... One day it will all become clear with C.","title":"Java arrays printing out weird numbers and text","body":"<p>You printed the reference and not the values at the reference... One day it will all become clear with C.</p>\n"},{"tags":[],"owner":{"account_id":254607,"reputation":31358,"user_id":534124,"accept_rate":75,"display_name":"Oswald"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1293481980,"creation_date":1292700389,"answer_id":4479711,"question_id":4479683,"body_markdown":"    for (int i = 0; i &lt; arr.length; ++i)\r\n    {\r\n      System.out.println(arr[i]);\r\n    }","title":"Java arrays printing out weird numbers and text","body":"<pre><code>for (int i = 0; i &lt; arr.length; ++i)\n{\n  System.out.println(arr[i]);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":262391,"reputation":116,"user_id":547215,"display_name":"user547215"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1292700628,"creation_date":1292700628,"answer_id":4479733,"question_id":4479683,"body_markdown":"It prints it&#39;s .toString() method you should print each element\r\n\r\n    for(int i=0; i&lt;arr.length; i++) {\r\n       System.out.println(arr[i]);\r\n    }\r\n    \r\n    or\r\n    \r\n    for(Integer i : arr) {\r\n      System.out.println(i);\r\n    }","title":"Java arrays printing out weird numbers and text","body":"<p>It prints it's .toString() method you should print each element</p>\n\n<pre><code>for(int i=0; i&lt;arr.length; i++) {\n   System.out.println(arr[i]);\n}\n\nor\n\nfor(Integer i : arr) {\n  System.out.println(i);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1292700852,"creation_date":1292700852,"answer_id":4479751,"question_id":4479683,"body_markdown":"BTW You can write\r\n\r\n    int[] arr = { 20, 40, 60, 40, 60, 100 };\r\n    System.out.println(Arrays.toString(array));\r\n\r\nor even\r\n\r\n    System.out.println(Arrays.toString(new int[] { 20, 40, 60, 40, 60, 100 }));\r\n\r\nor\r\n\r\n    System.out.println(Arrays.asList(20, 40, 60, 40, 60, 100));\r\n","title":"Java arrays printing out weird numbers and text","body":"<p>BTW You can write</p>\n\n<pre><code>int[] arr = { 20, 40, 60, 40, 60, 100 };\nSystem.out.println(Arrays.toString(array));\n</code></pre>\n\n<p>or even</p>\n\n<pre><code>System.out.println(Arrays.toString(new int[] { 20, 40, 60, 40, 60, 100 }));\n</code></pre>\n\n<p>or</p>\n\n<pre><code>System.out.println(Arrays.asList(20, 40, 60, 40, 60, 100));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3132957,"reputation":4812,"user_id":2650174,"accept_rate":84,"display_name":"Anton Dozortsev"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1662777416,"creation_date":1388491131,"answer_id":20857055,"question_id":4479683,"body_markdown":"\r\n\r\nUse [Arrays.toString()][1] and [PrintStream.printf(String format, Object... args)][2].\r\n\r\n    System.out.printf(&quot;%s%n&quot;, Arrays.toString(arr));\r\n\r\n\r\n  [1]: http://developer.android.com/reference/java/util/Arrays.html#toString(double[])\r\n  [2]: http://developer.android.com/reference/java/io/PrintStream.html#printf%28java.lang.String,%20java.lang.Object...%29","title":"Java arrays printing out weird numbers and text","body":"<p>Use <a href=\"http://developer.android.com/reference/java/util/Arrays.html#toString(double%5B%5D)\" rel=\"nofollow noreferrer\">Arrays.toString()</a> and <a href=\"http://developer.android.com/reference/java/io/PrintStream.html#printf%28java.lang.String,%20java.lang.Object...%29\" rel=\"nofollow noreferrer\">PrintStream.printf(String format, Object... args)</a>.</p>\n<pre><code>System.out.printf(&quot;%s%n&quot;, Arrays.toString(arr));\n</code></pre>\n"}],"owner":{"account_id":240755,"reputation":327,"user_id":511175,"accept_rate":83,"display_name":"Racket"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73625,"favorite_count":0,"down_vote_count":1,"up_vote_count":17,"closed_date":1426764442,"answer_count":10,"score":16,"last_activity_date":1662777416,"creation_date":1292700163,"question_id":4479683,"body_markdown":"I&#39;m new to programming. I&#39;m sure the answer for this question is out there, but I have no idea what to search for. \r\n\r\nOk, I&#39;ll go right to it.\r\n\r\nHere&#39;s my code: \r\n\t\r\n    int[] arr;\r\n    arr = new int[5];\r\n\t\t\r\n    arr[0] = 20;\r\n    arr[1] = 50;\r\n    arr[2] = 40;\r\n    arr[3] = 60;\r\n    arr[4] = 100;\r\n\t\t\r\n    System.out.println(arr);\r\n\r\n\r\nThis compiles and works fine. It&#39;s just the output from CMD that I&#39;m dizzy about. \r\n\r\nThis is the output: `[I@3e25a5`.\r\n\r\nI want the output to represent the exact same numbers from the list (`arr`) instead. How do I make that happen?","title":"Java arrays printing out weird numbers and text","body":"<p>I'm new to programming. I'm sure the answer for this question is out there, but I have no idea what to search for. </p>\n\n<p>Ok, I'll go right to it.</p>\n\n<p>Here's my code: </p>\n\n<pre><code>int[] arr;\narr = new int[5];\n\narr[0] = 20;\narr[1] = 50;\narr[2] = 40;\narr[3] = 60;\narr[4] = 100;\n\nSystem.out.println(arr);\n</code></pre>\n\n<p>This compiles and works fine. It's just the output from CMD that I'm dizzy about. </p>\n\n<p>This is the output: <code>[I@3e25a5</code>.</p>\n\n<p>I want the output to represent the exact same numbers from the list (<code>arr</code>) instead. How do I make that happen?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1662777388,"post_id":73668923,"comment_id":130090743,"body_markdown":"You seem to be missing `Arrays.toString`","body":"You seem to be missing <code>Arrays.toString</code>"},{"owner":{"account_id":24591556,"reputation":24,"user_id":18495367,"display_name":"Vishnu S"},"score":0,"creation_date":1662779079,"post_id":73668923,"comment_id":130090887,"body_markdown":"ya now it fine But why it need Array.toString for this those two where of int array when why string ?","body":"ya now it fine But why it need Array.toString for this those two where of int array when why string ?"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1662827784,"post_id":73668923,"comment_id":130098405,"body_markdown":"When you print an array directly, you print a reference to a memory address, rather than the content of it","body":"When you print an array directly, you print a reference to a memory address, rather than the content of it"}],"owner":{"account_id":24591556,"reputation":24,"user_id":18495367,"display_name":"Vishnu S"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1662777358,"answer_count":0,"score":0,"last_activity_date":1662777188,"creation_date":1662777188,"question_id":73668923,"body_markdown":"    import java.util.HashMap;\r\n    public class Solution {\r\n    public static void main(String[] args) {\r\n        int arr[] = {1,3,7,9,2};\r\n        System.out.println( twoSum(arr,11));\r\n       \r\n\r\n    }\r\n    public static int[] twoSum(int[] numbers, int target) {\r\n        HashMap&lt;Integer,Integer&gt; indexMap = new HashMap&lt;Integer,Integer&gt;();\r\n        for(int i = 0; i &lt; numbers.length; i++){\r\n            Integer requiredNum = (target - numbers[i]);\r\n            if(indexMap.containsKey(requiredNum)){\r\n                int toReturn[] = {indexMap.get(requiredNum), i};\r\n                return toReturn;\r\n            }\r\n\r\n            indexMap.put(numbers[i], i);\r\n        }\r\n        return null;\r\n    }\r\n}\r\n\r\n\r\nWhen i run this i get invalid output like [I@d041cf this but i except on 2 output as array why this is happening?","title":"Getting invalid output","body":"<pre><code>import java.util.HashMap;\npublic class Solution {\npublic static void main(String[] args) {\n    int arr[] = {1,3,7,9,2};\n    System.out.println( twoSum(arr,11));\n   \n\n}\npublic static int[] twoSum(int[] numbers, int target) {\n    HashMap&lt;Integer,Integer&gt; indexMap = new HashMap&lt;Integer,Integer&gt;();\n    for(int i = 0; i &lt; numbers.length; i++){\n        Integer requiredNum = (target - numbers[i]);\n        if(indexMap.containsKey(requiredNum)){\n            int toReturn[] = {indexMap.get(requiredNum), i};\n            return toReturn;\n        }\n\n        indexMap.put(numbers[i], i);\n    }\n    return null;\n}\n</code></pre>\n<p>}</p>\n<p>When i run this i get invalid output like [I@d041cf this but i except on 2 output as array why this is happening?</p>\n"},{"tags":["java","validation","cidr"],"comments":[{"owner":{"account_id":3989460,"reputation":3827,"user_id":3288910,"display_name":"Jason"},"score":0,"creation_date":1571672842,"post_id":58489158,"comment_id":103309911,"body_markdown":"Is there a reason you&#39;re trying to avoid an external library?  Why are you worried about efficiency?","body":"Is there a reason you&#39;re trying to avoid an external library?  Why are you worried about efficiency?"},{"owner":{"account_id":9415043,"reputation":1532,"user_id":7864001,"accept_rate":60,"display_name":"V&#237;t Kotačka"},"score":0,"creation_date":1571686514,"post_id":58489158,"comment_id":103315997,"body_markdown":"Less dependencies is corporate stuff - every non-aproved open source library has to go through a painful process. &#128547; Speaking efficiency, I mean how to write code in readable, comprehensible and elegant way, rather than performance.","body":"Less dependencies is corporate stuff - every non-aproved open source library has to go through a painful process. 😣 Speaking efficiency, I mean how to write code in readable, comprehensible and elegant way, rather than performance."}],"answers":[{"tags":[],"owner":{"account_id":3989460,"reputation":3827,"user_id":3288910,"display_name":"Jason"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1571697350,"creation_date":1571696475,"answer_id":58494833,"question_id":58489158,"body_markdown":"Your solution works; you don&#39;t need to check the high addresses.  I wouldn&#39;t suggest writing your own solution for something that already works, but checking a network as a subnet of another network isn&#39;t hard.\r\n\r\nJust use the network mask of the larger network to see if the smaller network is a subset of the larger network.\r\n\r\nHere&#39;s an example in java...\r\n\r\n```java\r\nString[] c1 = s1.split(&quot;/&quot;);\r\nString[] c2 = s2.split(&quot;/&quot;);\r\n\r\nif (c1.length != 2 || c2.length != 2) {\r\n\r\n  throw new Exception(&quot;malformed cidr address&quot; + &quot; &quot; + &quot;(s1=&quot; + s1\r\n  + &quot;, &quot; + &quot;s2=&quot; + s2 + &quot;)&quot;);\r\n}\r\n\r\nString[] a1 = c1[0].split(&quot;\\\\.&quot;);\r\nString[] a2 = c2[0].split(&quot;\\\\.&quot;);\r\n\r\nif (a1.length != 4 || a2.length != 4) {\r\n\r\n  throw new Exception(&quot;malformed cidr address&quot; + &quot; &quot; + &quot;(s1=&quot; + s1\r\n  + &quot;, &quot; + &quot;s2=&quot; + s2 + &quot;)&quot;);\r\n}\r\n\r\nint m1, m2;\r\n\r\ntry {\r\n\r\n  m1 = Integer.parseInt(c1[1], 10);\r\n  m2 = Integer.parseInt(c2[1], 10);\r\n\r\n} catch (NumberFormatException ne) {\r\n\r\n  throw new Exception(&quot;malformed cidr address&quot; + &quot; &quot; + &quot;(s1=&quot; + s1\r\n  + &quot;, &quot; + &quot;s2=&quot; + s2 + &quot;)&quot;);\r\n}\r\n\r\nif ((m1 &lt; 0) || (m1 &gt; 32) || (m2 &lt; 0) || (m2 &gt; 32)) {\r\n\r\n  throw new Exception(&quot;malformed cidr address&quot; + &quot; &quot; + &quot;(s1=&quot; + s1\r\n  + &quot;, &quot; + &quot;s2=&quot; + s2 + &quot;)&quot;);\r\n}\r\n\r\nint i1 = 0, i2 = 0;\r\n\r\nfor (int i = 0; i &lt; 4; i++) {\r\n\r\n  try {\r\n\r\n    int x1 = Integer.parseInt(a1[i], 10);\r\n    int x2 = Integer.parseInt(a2[i], 10);\r\n\r\n    if ((x1 &lt; 0) || (x1 &gt; 255) || (x2 &lt; 0) || (x2 &gt; 255)) {\r\n\r\n      throw new Exception(&quot;malformed cidr address&quot; + &quot; &quot; + &quot;(s1=&quot; + s1\r\n      + &quot;, &quot; + &quot;s2=&quot; + s2 + &quot;)&quot;);\r\n    }\r\n\r\n    i1 = i1 | (x1 &lt;&lt; (24 - (i &lt;&lt; 3)));\r\n    i2 = i2 | (x2 &lt;&lt; (24 - (i &lt;&lt; 3)));\r\n\r\n  } catch (NumberFormatException ne) {\r\n\r\n    throw new Exception(&quot;malformed cidr address&quot; + &quot; &quot; + &quot;(s1=&quot; + s1\r\n    + &quot;, &quot; + &quot;s2=&quot; + s2 + &quot;)&quot;);\r\n  }\r\n}\r\n\r\nint l1 = (int) (((long)1 &lt;&lt; (32 - m1)) - 1);\r\nint l2 = (int) (((long)1 &lt;&lt; (32 - m2)) - 1);\r\n\r\ni1 = i1 &amp; ~l1;\r\ni2 = i2 &amp; ~l2;\r\n\r\nif ((i1 &amp; ~l2) == i2 ||\r\n    (i2 &amp; ~l1) == i1)\r\n  return true;\r\n\r\nreturn false;\r\n\r\n```","title":"Validate CIDR overlap in Java","body":"<p>Your solution works; you don't need to check the high addresses.  I wouldn't suggest writing your own solution for something that already works, but checking a network as a subnet of another network isn't hard.</p>\n\n<p>Just use the network mask of the larger network to see if the smaller network is a subset of the larger network.</p>\n\n<p>Here's an example in java...</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>String[] c1 = s1.split(\"/\");\nString[] c2 = s2.split(\"/\");\n\nif (c1.length != 2 || c2.length != 2) {\n\n  throw new Exception(\"malformed cidr address\" + \" \" + \"(s1=\" + s1\n  + \", \" + \"s2=\" + s2 + \")\");\n}\n\nString[] a1 = c1[0].split(\"\\\\.\");\nString[] a2 = c2[0].split(\"\\\\.\");\n\nif (a1.length != 4 || a2.length != 4) {\n\n  throw new Exception(\"malformed cidr address\" + \" \" + \"(s1=\" + s1\n  + \", \" + \"s2=\" + s2 + \")\");\n}\n\nint m1, m2;\n\ntry {\n\n  m1 = Integer.parseInt(c1[1], 10);\n  m2 = Integer.parseInt(c2[1], 10);\n\n} catch (NumberFormatException ne) {\n\n  throw new Exception(\"malformed cidr address\" + \" \" + \"(s1=\" + s1\n  + \", \" + \"s2=\" + s2 + \")\");\n}\n\nif ((m1 &lt; 0) || (m1 &gt; 32) || (m2 &lt; 0) || (m2 &gt; 32)) {\n\n  throw new Exception(\"malformed cidr address\" + \" \" + \"(s1=\" + s1\n  + \", \" + \"s2=\" + s2 + \")\");\n}\n\nint i1 = 0, i2 = 0;\n\nfor (int i = 0; i &lt; 4; i++) {\n\n  try {\n\n    int x1 = Integer.parseInt(a1[i], 10);\n    int x2 = Integer.parseInt(a2[i], 10);\n\n    if ((x1 &lt; 0) || (x1 &gt; 255) || (x2 &lt; 0) || (x2 &gt; 255)) {\n\n      throw new Exception(\"malformed cidr address\" + \" \" + \"(s1=\" + s1\n      + \", \" + \"s2=\" + s2 + \")\");\n    }\n\n    i1 = i1 | (x1 &lt;&lt; (24 - (i &lt;&lt; 3)));\n    i2 = i2 | (x2 &lt;&lt; (24 - (i &lt;&lt; 3)));\n\n  } catch (NumberFormatException ne) {\n\n    throw new Exception(\"malformed cidr address\" + \" \" + \"(s1=\" + s1\n    + \", \" + \"s2=\" + s2 + \")\");\n  }\n}\n\nint l1 = (int) (((long)1 &lt;&lt; (32 - m1)) - 1);\nint l2 = (int) (((long)1 &lt;&lt; (32 - m2)) - 1);\n\ni1 = i1 &amp; ~l1;\ni2 = i2 &amp; ~l2;\n\nif ((i1 &amp; ~l2) == i2 ||\n    (i2 &amp; ~l1) == i1)\n  return true;\n\nreturn false;\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4946371,"reputation":110,"user_id":3981611,"display_name":"i v s narayana"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660201449,"creation_date":1660201449,"answer_id":73316537,"question_id":58489158,"body_markdown":"I have written following function to determine network overlap function which returns true if the networks are overlapped \r\n\r\n    public static boolean isNetworkOverlaped(String network1, String network2){\r\n            inet.ipaddr.IPAddressString ipaddress1 = new IPAddressString(network1);\r\n            inet.ipaddr.IPAddressString ipaddress2 = new IPAddressString(network2);\r\n    \r\n            int ipaddress1Prefix = ipaddress1.getNetworkPrefixLength();\r\n            int ipaddress2Prefix = ipaddress2.getNetworkPrefixLength();\r\n    \r\n            boolean isOverlapped = false;\r\n            if(ipaddress1Prefix &lt; ipaddress2Prefix){\r\n                IPAddress firstIPAddress = ipaddress2.getAddress().iterator().next();\r\n                isOverlapped = ipaddress1.contains(firstIPAddress.toAddressString());\r\n            }else {\r\n                IPAddress firstIPAddress = ipaddress1.getAddress().iterator().next();\r\n                isOverlapped = ipaddress2.contains(firstIPAddress.toAddressString());\r\n            }\r\n    \r\n            return isOverlapped;\r\n    \r\n        }","title":"Validate CIDR overlap in Java","body":"<p>I have written following function to determine network overlap function which returns true if the networks are overlapped</p>\n<pre><code>public static boolean isNetworkOverlaped(String network1, String network2){\n        inet.ipaddr.IPAddressString ipaddress1 = new IPAddressString(network1);\n        inet.ipaddr.IPAddressString ipaddress2 = new IPAddressString(network2);\n\n        int ipaddress1Prefix = ipaddress1.getNetworkPrefixLength();\n        int ipaddress2Prefix = ipaddress2.getNetworkPrefixLength();\n\n        boolean isOverlapped = false;\n        if(ipaddress1Prefix &lt; ipaddress2Prefix){\n            IPAddress firstIPAddress = ipaddress2.getAddress().iterator().next();\n            isOverlapped = ipaddress1.contains(firstIPAddress.toAddressString());\n        }else {\n            IPAddress firstIPAddress = ipaddress1.getAddress().iterator().next();\n            isOverlapped = ipaddress2.contains(firstIPAddress.toAddressString());\n        }\n\n        return isOverlapped;\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9144834,"reputation":4430,"user_id":6801443,"display_name":"Sean F"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662775449,"creation_date":1662775449,"answer_id":73668833,"question_id":58489158,"body_markdown":"The [IPAddress Java library](https://seancfoley.github.io/IPAddress/) can do this for you with the code in the above answer or this code here.  Disclaimer: I am the project manager.\r\n\r\nWhen CIDR blocks overlap, one must contain the other.  There is no partial overlap with CIDR blocks.\r\n\r\n```java\r\nstatic boolean overlaps(String one, String two) {\r\n\tIPAddressString addrOne = new IPAddressString(one);\r\n\tIPAddressString addrTwo = new IPAddressString(two);\r\n\treturn addrOne.contains(addrTwo) || addrTwo.contains(addrOne);\r\n}\r\n```","title":"Validate CIDR overlap in Java","body":"<p>The <a href=\"https://seancfoley.github.io/IPAddress/\" rel=\"nofollow noreferrer\">IPAddress Java library</a> can do this for you with the code in the above answer or this code here.  Disclaimer: I am the project manager.</p>\n<p>When CIDR blocks overlap, one must contain the other.  There is no partial overlap with CIDR blocks.</p>\n<pre class=\"lang-java prettyprint-override\"><code>static boolean overlaps(String one, String two) {\n    IPAddressString addrOne = new IPAddressString(one);\n    IPAddressString addrTwo = new IPAddressString(two);\n    return addrOne.contains(addrTwo) || addrTwo.contains(addrOne);\n}\n</code></pre>\n"}],"owner":{"account_id":9415043,"reputation":1532,"user_id":7864001,"accept_rate":60,"display_name":"V&#237;t Kotačka"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1486,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1662775449,"creation_date":1571670445,"question_id":58489158,"body_markdown":"Having two CIDR blocks - how can I validate in _Java_ that they are not overlapping? I figured out following solution, but I&#39;m not sure that:\r\n\r\n* it&#39;s complete,\r\n* it can be done without external library dependency,\r\n* it can be done by more elegant/efficient way.\r\n\r\nFollowing code uses [SubnetUtils][1].\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    void isSubnetOverlap(String cidr1, String cidr2) {\r\n        SubnetUtils.SubnetInfo subnetCidr = new SubnetUtils(cidr1).getInfo();\r\n        SubnetUtils.SubnetInfo clusterCidr = new SubnetUtils(cidr2).getInfo();\r\n\r\n        if (subnetCidr.isInRange(clusterCidr.getLowAddress())\r\n                || subnetCidr.isInRange(clusterCidr.getHighAddress())\r\n                || clusterCidr.isInRange(subnetCidr.getLowAddress())\r\n                || clusterCidr.isInRange(subnetCidr.getHighAddress())) {\r\n\r\n            // e.g. throw some exception\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/util/SubnetUtils.html","title":"Validate CIDR overlap in Java","body":"<p>Having two CIDR blocks - how can I validate in <em>Java</em> that they are not overlapping? I figured out following solution, but I'm not sure that:</p>\n\n<ul>\n<li>it's complete,</li>\n<li>it can be done without external library dependency,</li>\n<li>it can be done by more elegant/efficient way.</li>\n</ul>\n\n<p>Following code uses <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/util/SubnetUtils.html\" rel=\"nofollow noreferrer\">SubnetUtils</a>.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>void isSubnetOverlap(String cidr1, String cidr2) {\n    SubnetUtils.SubnetInfo subnetCidr = new SubnetUtils(cidr1).getInfo();\n    SubnetUtils.SubnetInfo clusterCidr = new SubnetUtils(cidr2).getInfo();\n\n    if (subnetCidr.isInRange(clusterCidr.getLowAddress())\n            || subnetCidr.isInRange(clusterCidr.getHighAddress())\n            || clusterCidr.isInRange(subnetCidr.getLowAddress())\n            || clusterCidr.isInRange(subnetCidr.getHighAddress())) {\n\n        // e.g. throw some exception\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","component-scan"],"answers":[{"tags":[],"owner":{"account_id":26283448,"reputation":1,"user_id":19951583,"display_name":"Renzo EC"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662774938,"creation_date":1662774938,"answer_id":73668804,"question_id":73668248,"body_markdown":"Difference beetween ComponentScan and declared Bean inside @Configuration class:\r\n\r\n@ComponentScan: You enable auto-scanning (default using current folder path), optionally you can specify an basePackage where spring will found yours beans.\r\n\r\n@ComponentScan(basePackages = &quot;com.mine.components&quot;)\r\nYou&#39;re saying to Spring that in this package(&quot;com.mine.components&quot;), you&#39;ll define yours beans typically using annotations (@Component, @Entity, @Controller, @Service, @Repository or more).\r\n\r\n@Bean: This way you define your beans manually inside @Configuration class, but Spring has to discover your configuration class, usually using @ComponentScan, @SpringBootApplication.\r\n\r\nMETA-INF/spring.factories: you define an custom autoconfiguration ","title":"Spring Boot: ComponentScan vs Declared Bean in an Autoconfigured Jar","body":"<p>Difference beetween ComponentScan and declared Bean inside @Configuration class:</p>\n<p>@ComponentScan: You enable auto-scanning (default using current folder path), optionally you can specify an basePackage where spring will found yours beans.</p>\n<p>@ComponentScan(basePackages = &quot;com.mine.components&quot;)\nYou're saying to Spring that in this package(&quot;com.mine.components&quot;), you'll define yours beans typically using annotations (@Component, @Entity, @Controller, @Service, @Repository or more).</p>\n<p>@Bean: This way you define your beans manually inside @Configuration class, but Spring has to discover your configuration class, usually using @ComponentScan, @SpringBootApplication.</p>\n<p>META-INF/spring.factories: you define an custom autoconfiguration</p>\n"}],"owner":{"account_id":2425257,"reputation":5090,"user_id":2117355,"accept_rate":71,"display_name":"Mark"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":518,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662774938,"creation_date":1662765250,"question_id":73668248,"body_markdown":"Suppose I have a jar with a Spring Component called `MyComponent`.  This jar is a Spring Boot &quot;autoconfigured&quot; jar, meaning that it has a Configuration class (annotated with `@Configuration`), and additionally, a `META-INF/spring.factories` file on the classpath.  This jar is not an executable jar by itself; it is a library that is meant for inclusion in a Spring Boot application.\r\n\r\nThese files look as follows:\r\n\r\n`MyComponent.java`, in package `com.mine.components`:\r\n```\r\n@Component\r\npublic class MyComponent {\r\n\r\n    private static final Logger logger = LoggerFactory.getLogger(MyComponent.class);\r\n\r\n    @PostConstruct\r\n    public void init() {\r\n        logger.info(&quot;MyComponent inited&quot;);\r\n    }\r\n}\r\n```\r\n\r\n`MyConfiguration.java`, in package `com.mine.config`:\r\n```\r\n@Configuration\r\n@ComponentScan(basePackages = &quot;com.mine.components&quot;)\r\npublic class MyConfiguration {\r\n}\r\n```\r\n\r\n`spring.factories`, in `META-INF` under `src/main/resources`:\r\n```\r\norg.springframework.boot.autoconfigure.EnableAutoConfiguration=com.mine.config.MyConfiguration\r\n```\r\n\r\nIf I include this jar in a Spring Boot project with the above three files, the `MyComponent` component is NOT detected (the log message never prints).\r\n\r\nBut if I instead remove the `@ComponentScan` and declare `MyComponent` using the `@Bean` annotation as follows, it is detected:\r\n\r\n```\r\n@Bean\r\npublic MyComponent myComponent() {\r\n    return new MyComponent();\r\n}\r\n```\r\n\r\nWhy?","title":"Spring Boot: ComponentScan vs Declared Bean in an Autoconfigured Jar","body":"<p>Suppose I have a jar with a Spring Component called <code>MyComponent</code>.  This jar is a Spring Boot &quot;autoconfigured&quot; jar, meaning that it has a Configuration class (annotated with <code>@Configuration</code>), and additionally, a <code>META-INF/spring.factories</code> file on the classpath.  This jar is not an executable jar by itself; it is a library that is meant for inclusion in a Spring Boot application.</p>\n<p>These files look as follows:</p>\n<p><code>MyComponent.java</code>, in package <code>com.mine.components</code>:</p>\n<pre><code>@Component\npublic class MyComponent {\n\n    private static final Logger logger = LoggerFactory.getLogger(MyComponent.class);\n\n    @PostConstruct\n    public void init() {\n        logger.info(&quot;MyComponent inited&quot;);\n    }\n}\n</code></pre>\n<p><code>MyConfiguration.java</code>, in package <code>com.mine.config</code>:</p>\n<pre><code>@Configuration\n@ComponentScan(basePackages = &quot;com.mine.components&quot;)\npublic class MyConfiguration {\n}\n</code></pre>\n<p><code>spring.factories</code>, in <code>META-INF</code> under <code>src/main/resources</code>:</p>\n<pre><code>org.springframework.boot.autoconfigure.EnableAutoConfiguration=com.mine.config.MyConfiguration\n</code></pre>\n<p>If I include this jar in a Spring Boot project with the above three files, the <code>MyComponent</code> component is NOT detected (the log message never prints).</p>\n<p>But if I instead remove the <code>@ComponentScan</code> and declare <code>MyComponent</code> using the <code>@Bean</code> annotation as follows, it is detected:</p>\n<pre><code>@Bean\npublic MyComponent myComponent() {\n    return new MyComponent();\n}\n</code></pre>\n<p>Why?</p>\n"},{"tags":["java","azure","apache-kafka","cdktf"],"answers":[{"tags":[],"owner":{"account_id":1698654,"reputation":11683,"user_id":1559386,"accept_rate":92,"display_name":"Daniel Schmidt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662740302,"creation_date":1662740302,"answer_id":73664956,"question_id":73659268,"body_markdown":"Are you initialising this stack somewhere? e.g. in your Main.java? This part seems to be missing: https://github.com/hashicorp/terraform-cdk/blob/main/examples/java/aws/src/main/java/com/mycompany/app/Main.java#L50","title":"cdktf - HdinsightKafkaCluster - No stack could be identified for the construct at path","body":"<p>Are you initialising this stack somewhere? e.g. in your Main.java? This part seems to be missing: <a href=\"https://github.com/hashicorp/terraform-cdk/blob/main/examples/java/aws/src/main/java/com/mycompany/app/Main.java#L50\" rel=\"nofollow noreferrer\">https://github.com/hashicorp/terraform-cdk/blob/main/examples/java/aws/src/main/java/com/mycompany/app/Main.java#L50</a></p>\n"}],"owner":{"account_id":2719523,"reputation":1,"user_id":2346112,"display_name":"SnakeEye"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":322,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662774904,"creation_date":1662711636,"question_id":73659268,"body_markdown":"I&#39;m trying to build cdktf - Java Infrastructure as Code for Azure.\r\nOn the HdInsight Kafka Cluster i&#39;m not able to produce the correct cdktf classes.\r\n\r\nI&#39;m always running in:\r\n\r\n```\r\n\r\nCaused by: software.amazon.jsii.JsiiException: No stack could be identified for the construct at path &#39;dev-name-cluster&#39;\r\n    Error: No stack could be identified for the construct at path &#39;dev-name-cluster&#39;\r\n```\r\n\r\n\r\nMy Code looks like:\r\n\r\n```\r\npublic class KafkaAnnonymous extends TerraformStack {\r\n\r\n    public KafkaAnnonymous(Construct scope, String id, final Environment environment,`your text`\r\n            ResourceGroup rg, String storageAccount, Network network, KeyVault kv) {\r\n        super(scope, id);\r\n\r\n        AzurermProvider.Builder.create(this, &quot;azureProvider&quot;)\r\n                .features(AzurermProviderFeatures.builder()\r\n                        .build())\r\n                .subscriptionId(&quot;&lt;SUBSCRIPTION_ID&gt;&quot;)\r\n                .build();\r\n\r\n        AzurermBackend.Builder.create(this)\r\n                .resourceGroupName(&quot;g_rg&quot;)\r\n                .storageAccountName(&quot;g_storage_account_name&quot;)\r\n                .containerName(&quot;terraform&quot;)\r\n                .key(String.format(&quot;%s.terraform.tfstate&quot;, id))\r\n                .build();\r\n        create(scope, id, environment, rg, storageAccount, network, kv);\r\n    }\r\n    \r\n    private final void create(Construct scope, String id, final Environment environment,\r\n            ResourceGroup rg, String storageAccount, Network network, KeyVault kv) {\r\n\r\n        HdinsightKafkaCluster.Builder\r\n            .create(scope, id)\r\n            .clusterVersion(&quot;2.4.1&quot;)\r\n            .resourceGroupName(rg.getResourceGroup().getName())\r\n            .name(id)\r\n            .location(&quot;westeurope&quot;)\r\n            .tier(&quot;Standard&quot;)\r\n            .componentVersion(componentVersion())\r\n            .gateway(gateway(password))\r\n            .storageAccount(storage(storageAccount))\r\n            .roles(roles(network, password))\r\n            .build();\r\n    }\r\n...\r\n }\r\n}\r\n\r\n```\r\n\r\nWhere is my fault?\r\n\r\n","title":"cdktf - HdinsightKafkaCluster - No stack could be identified for the construct at path","body":"<p>I'm trying to build cdktf - Java Infrastructure as Code for Azure.\nOn the HdInsight Kafka Cluster i'm not able to produce the correct cdktf classes.</p>\n<p>I'm always running in:</p>\n<pre><code>\nCaused by: software.amazon.jsii.JsiiException: No stack could be identified for the construct at path 'dev-name-cluster'\n    Error: No stack could be identified for the construct at path 'dev-name-cluster'\n</code></pre>\n<p>My Code looks like:</p>\n<pre><code>public class KafkaAnnonymous extends TerraformStack {\n\n    public KafkaAnnonymous(Construct scope, String id, final Environment environment,`your text`\n            ResourceGroup rg, String storageAccount, Network network, KeyVault kv) {\n        super(scope, id);\n\n        AzurermProvider.Builder.create(this, &quot;azureProvider&quot;)\n                .features(AzurermProviderFeatures.builder()\n                        .build())\n                .subscriptionId(&quot;&lt;SUBSCRIPTION_ID&gt;&quot;)\n                .build();\n\n        AzurermBackend.Builder.create(this)\n                .resourceGroupName(&quot;g_rg&quot;)\n                .storageAccountName(&quot;g_storage_account_name&quot;)\n                .containerName(&quot;terraform&quot;)\n                .key(String.format(&quot;%s.terraform.tfstate&quot;, id))\n                .build();\n        create(scope, id, environment, rg, storageAccount, network, kv);\n    }\n    \n    private final void create(Construct scope, String id, final Environment environment,\n            ResourceGroup rg, String storageAccount, Network network, KeyVault kv) {\n\n        HdinsightKafkaCluster.Builder\n            .create(scope, id)\n            .clusterVersion(&quot;2.4.1&quot;)\n            .resourceGroupName(rg.getResourceGroup().getName())\n            .name(id)\n            .location(&quot;westeurope&quot;)\n            .tier(&quot;Standard&quot;)\n            .componentVersion(componentVersion())\n            .gateway(gateway(password))\n            .storageAccount(storage(storageAccount))\n            .roles(roles(network, password))\n            .build();\n    }\n...\n }\n}\n\n</code></pre>\n<p>Where is my fault?</p>\n"},{"tags":["java","spring","spring-boot","unit-testing","mockito"],"answers":[{"tags":[],"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662744550,"creation_date":1662744550,"answer_id":73665642,"question_id":73665497,"body_markdown":"You are doing right and since `employeeApiClient.getEmployeeByEmpNo` is returning `List&lt;EmployeeResponse&gt;` you should return the same type\r\n\r\n    when(employeeApiClient.getEmployeeByEmpNo(any(), anyList())).thenReturn(List.of(mockEmployeeResponse()));","title":"Cannot solved both using thenReturn or doReturn, any recommendation?","body":"<p>You are doing right and since <code>employeeApiClient.getEmployeeByEmpNo</code> is returning <code>List&lt;EmployeeResponse&gt;</code> you should return the same type</p>\n<pre><code>when(employeeApiClient.getEmployeeByEmpNo(any(), anyList())).thenReturn(List.of(mockEmployeeResponse()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26295377,"reputation":1,"user_id":19961714,"display_name":"Revantama"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662774473,"creation_date":1662773698,"answer_id":73668725,"question_id":73665497,"body_markdown":"if your method in `when()` parameter is return a List of EmployeeResponse, you should put a List of EmployeeResponse too as argument in `.thenReturn()` parameter.\r\n\r\nexample:\r\n```\r\nList&lt;EmployeeResponse&gt; employeeResponses = List.of(mockEmployeeResponse());\r\nwhen(employeeApiClient.getEmployeeByEmpNo(any(), anyList())).thenReturn(employeeResponses);\r\n```\r\nbut if you want it return `Long` type, you can change when argument to:\r\n\r\n```\r\nLong exampleBranchId = 2L;\r\nwhen(employeeApiClient.getEmployeeByEmpNo(any(), anyList()).get(anyInt()).getWorklocationCode()).thenReturn(exampleBranchId);\r\n``` \r\n","title":"Cannot solved both using thenReturn or doReturn, any recommendation?","body":"<p>if your method in <code>when()</code> parameter is return a List of EmployeeResponse, you should put a List of EmployeeResponse too as argument in <code>.thenReturn()</code> parameter.</p>\n<p>example:</p>\n<pre><code>List&lt;EmployeeResponse&gt; employeeResponses = List.of(mockEmployeeResponse());\nwhen(employeeApiClient.getEmployeeByEmpNo(any(), anyList())).thenReturn(employeeResponses);\n</code></pre>\n<p>but if you want it return <code>Long</code> type, you can change when argument to:</p>\n<pre><code>Long exampleBranchId = 2L;\nwhen(employeeApiClient.getEmployeeByEmpNo(any(), anyList()).get(anyInt()).getWorklocationCode()).thenReturn(exampleBranchId);\n</code></pre>\n"}],"owner":{"account_id":26292608,"reputation":33,"user_id":19959395,"display_name":"Ojam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73665642,"answer_count":2,"score":1,"last_activity_date":1662774473,"creation_date":1662743723,"question_id":73665497,"body_markdown":"This code on ServiceImpl\r\n```\r\nList&lt;EmployeeResponse&gt; employeeResponses = employeeApiClient.getEmployeeByEmpNo(apiSecret, List.of(operationUserId));\r\n\r\nLong branchId = Long.parseLong(employeeResponses.get(0).getWorklocationCode());\r\n```\r\n\r\nand, I wanna create the unit test, I already create this,\r\n\r\n```\r\nList&lt;EmployeeResponse&gt; employeeResponses = List.of(mockEmployeeResponse());\r\nLong branchId = Long.parseLong(employeeResponses.get(0).getWorklocationCode());\r\n```\r\n\r\nand, when I use this, \r\n```\r\ndoReturn(List.of(branchId)).when(employeeApiClient).getEmployeeByEmpNo(any(), anyList());\r\n```\r\nthe response is\r\n```\r\njava.lang.NullPointerException\r\n```\r\n\r\nwhen I use this,\r\n```\r\ndoReturn(branchId).when(employeeApiClient).getEmployeeByEmpNo(any(), anyList());\r\n```\r\nthe response is\r\n```\r\norg.mockito.exceptions.misusing.WrongTypeOfReturnValue: \r\nLong cannot be returned by getEmployeeByEmpNo()\r\ngetEmployeeByEmpNo() should return List\r\n```\r\n\r\nand, when I use this,\r\n```\r\nwhen(employeeApiClient.getEmployeeByEmpNo(any(), anyList())).thenReturn(branchId);\r\n```\r\nthe response is\r\n```\r\nCannot resolve method &#39;thenReturn(Long)&#39;\r\n```\r\n\r\nMaybe, any others way to solve this issue, thank you for help.\r\n\r\nI&#39;m new on use the unit test (Mock), so I tried to ask about my problem for learning and getting answer.","title":"Cannot solved both using thenReturn or doReturn, any recommendation?","body":"<p>This code on ServiceImpl</p>\n<pre><code>List&lt;EmployeeResponse&gt; employeeResponses = employeeApiClient.getEmployeeByEmpNo(apiSecret, List.of(operationUserId));\n\nLong branchId = Long.parseLong(employeeResponses.get(0).getWorklocationCode());\n</code></pre>\n<p>and, I wanna create the unit test, I already create this,</p>\n<pre><code>List&lt;EmployeeResponse&gt; employeeResponses = List.of(mockEmployeeResponse());\nLong branchId = Long.parseLong(employeeResponses.get(0).getWorklocationCode());\n</code></pre>\n<p>and, when I use this,</p>\n<pre><code>doReturn(List.of(branchId)).when(employeeApiClient).getEmployeeByEmpNo(any(), anyList());\n</code></pre>\n<p>the response is</p>\n<pre><code>java.lang.NullPointerException\n</code></pre>\n<p>when I use this,</p>\n<pre><code>doReturn(branchId).when(employeeApiClient).getEmployeeByEmpNo(any(), anyList());\n</code></pre>\n<p>the response is</p>\n<pre><code>org.mockito.exceptions.misusing.WrongTypeOfReturnValue: \nLong cannot be returned by getEmployeeByEmpNo()\ngetEmployeeByEmpNo() should return List\n</code></pre>\n<p>and, when I use this,</p>\n<pre><code>when(employeeApiClient.getEmployeeByEmpNo(any(), anyList())).thenReturn(branchId);\n</code></pre>\n<p>the response is</p>\n<pre><code>Cannot resolve method 'thenReturn(Long)'\n</code></pre>\n<p>Maybe, any others way to solve this issue, thank you for help.</p>\n<p>I'm new on use the unit test (Mock), so I tried to ask about my problem for learning and getting answer.</p>\n"},{"tags":["java","typescript","functional-programming","abstract-class","inner-classes"],"comments":[{"owner":{"account_id":5401865,"reputation":610,"user_id":4301532,"accept_rate":75,"display_name":"Sankofa"},"score":0,"creation_date":1662742494,"post_id":73665243,"comment_id":130084365,"body_markdown":"This has been helpful. Maybe I can use an interface instead https://stackoverflow.com/questions/13437922/why-nested-abstract-class-in-java","body":"This has been helpful. Maybe I can use an interface instead <a href=\"https://stackoverflow.com/questions/13437922/why-nested-abstract-class-in-java\" title=\"why nested abstract class in java\">stackoverflow.com/questions/13437922/&hellip;</a>"},{"owner":{"account_id":3446506,"reputation":279303,"user_id":2887218,"display_name":"jcalz"},"score":1,"creation_date":1662742726,"post_id":73665243,"comment_id":130084428,"body_markdown":"There is no support in TS for abstract static things, as mentioned in [ms/TS#34516](https://github.com/microsoft/TypeScript/issues/34516).  Not sure why you need this, but you could work around it like [this](https://tsplay.dev/NBR9xN).  Note that I dispensed with your explicit F-bounded polymorphism because TS has [polymorphic `this` types](https://www.typescriptlang.org/docs/handbook/2/classes.html#this-types); unless you&#39;re asking about F-bounded quantification, maybe you could remove that from your example? Otherwise there&#39;s too much going on in the question.","body":"There is no support in TS for abstract static things, as mentioned in <a href=\"https://github.com/microsoft/TypeScript/issues/34516\" rel=\"nofollow noreferrer\">ms/TS#34516</a>.  Not sure why you need this, but you could work around it like <a href=\"https://tsplay.dev/NBR9xN\" rel=\"nofollow noreferrer\">this</a>.  Note that I dispensed with your explicit F-bounded polymorphism because TS has <a href=\"https://www.typescriptlang.org/docs/handbook/2/classes.html#this-types\" rel=\"nofollow noreferrer\">polymorphic <code>this</code> types</a>; unless you&#39;re asking about F-bounded quantification, maybe you could remove that from your example? Otherwise there&#39;s too much going on in the question."},{"owner":{"account_id":5401865,"reputation":610,"user_id":4301532,"accept_rate":75,"display_name":"Sankofa"},"score":0,"creation_date":1662743023,"post_id":73665243,"comment_id":130084517,"body_markdown":"Thank you for taking a stab at this. I am trying to implement an SDK for a project using functional programming. It has proved to have low defects using this design but I know typescript may not have all of the same capabilities.","body":"Thank you for taking a stab at this. I am trying to implement an SDK for a project using functional programming. It has proved to have low defects using this design but I know typescript may not have all of the same capabilities."},{"owner":{"account_id":5401865,"reputation":610,"user_id":4301532,"accept_rate":75,"display_name":"Sankofa"},"score":0,"creation_date":1662743092,"post_id":73665243,"comment_id":130084539,"body_markdown":"I like your typescript playground I will see if this can work. tyvm!!","body":"I like your typescript playground I will see if this can work. tyvm!!"},{"owner":{"account_id":3446506,"reputation":279303,"user_id":2887218,"display_name":"jcalz"},"score":1,"creation_date":1662743302,"post_id":73665243,"comment_id":130084583,"body_markdown":"Okay I will write up an answer when I get a chance.  In the mean time, please consider [edit]ing the question code to be a [mre] that doesn&#39;t include too many things you&#39;re not asking about.  To be clear, TS doesn&#39;t need Java&#39;s `self()` and `class Foo&lt;T extends Foo&lt;T&gt;&gt;` recursive generics if the goal is just to refer to the implementing subclass with `T`; there is a type named `this` which works that way out of the box.  So you can minimize your example to [this code here](https://tsplay.dev/mpLY7m).","body":"Okay I will write up an answer when I get a chance.  In the mean time, please consider <a href=\"https://stackoverflow.com/posts/73665243/edit\">edit</a>ing the question code to be a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that doesn&#39;t include too many things you&#39;re not asking about.  To be clear, TS doesn&#39;t need Java&#39;s <code>self()</code> and <code>class Foo&lt;T extends Foo&lt;T&gt;&gt;</code> recursive generics if the goal is just to refer to the implementing subclass with <code>T</code>; there is a type named <code>this</code> which works that way out of the box.  So you can minimize your example to <a href=\"https://tsplay.dev/mpLY7m\" rel=\"nofollow noreferrer\">this code here</a>."},{"owner":{"account_id":5401865,"reputation":610,"user_id":4301532,"accept_rate":75,"display_name":"Sankofa"},"score":0,"creation_date":1662744473,"post_id":73665243,"comment_id":130084931,"body_markdown":"OK and yes I agree that ts doesnt need self but I do believe I need class Foo&lt;T extends Foo&lt;T&gt;&gt; recursive generics because this StringMap will be used extensively for other locator classes. So I probably got ahead of myself. I am using your first example now and it is a good start.","body":"OK and yes I agree that ts doesnt need self but I do believe I need class Foo&lt;T extends Foo&lt;T&gt;&gt; recursive generics because this StringMap will be used extensively for other locator classes. So I probably got ahead of myself. I am using your first example now and it is a good start."}],"answers":[{"tags":[],"owner":{"account_id":3446506,"reputation":279303,"user_id":2887218,"display_name":"jcalz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662773999,"creation_date":1662773999,"answer_id":73668744,"question_id":73665243,"body_markdown":"Neither JavaScript nor TypeScript have true &quot;inner&quot; or &quot;nested&quot; classes (see https://stackoverflow.com/questions/28784375/nested-es6-classes) where you just  [declare a class](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/class) inside another class. \r\n\r\n    // THIS IS NOT VALID, DON&#39;T DO THIS\r\n    class Foo { \r\n        class Bar { } // nope\r\n        static class Baz { } // nope\r\n    }\r\n\r\nInstead you could give the outer class an instance or static *member* whose type is a class constructor.  It&#39;s easy enough to initialize these with [class expressions](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/class), to much the same effect:\r\n\r\n    class Foo {\r\n        Bar = class Bar { } // okay\r\n        static Baz = class Baz { } // okay\r\n    }\r\n\r\nUnfortunately, you want your inner class to be *abstract*, and TypeScript does not support abstract class expressions; see [microsoft/TypeScript#4578](https://github.com/microsoft/TypeScript/issues/4578) for the declined feature request:\r\n\r\n    // THIS IS NOT VALID, DON&#39;T DO THIS\r\n    class Foo {\r\n        Bar = abstract class Bar { } // nope\r\n        static Baz = abstract class Baz { } // nope\r\n    }\r\n\r\nTo work around *that*, one might write abstract class declarations in an appropriate scope and then assign them to relevant properties.  This is helped by [class property inference from initialization](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-4-0.html#class-property-inference-from-constructors) and [`static` initialization blocks in classes](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-4-4.html#static-blocks-in-classes):\r\n\r\n    class Foo {\r\n        Bar; // type inferred from constructor initialization\r\n        constructor() {\r\n            abstract class Bar { } // declaration\r\n            this.Bar = Bar; // initialization\r\n        }\r\n\r\n        static Baz; // type inferred from static initialization\r\n        static {\r\n            abstract class Baz { } // declaration\r\n            this.Baz = Baz; // initialization\r\n        }\r\n    }\r\n\r\nIn the above, `Bar` is an abstract instance-nested class, and `Baz` is an abstract static-nested class:\r\n\r\n    const foo = new Foo();\r\n    new foo.Bar(); // error, abstract\r\n    class MyBar extends foo.Bar { }\r\n    new MyBar(); // okay\r\n\r\n    new Foo.Baz(); // error, abstract\r\n    class MyBaz extends Foo.Baz { }\r\n    new MyBaz(); // okay\r\n\r\n----\r\n\r\nSo, in your example, you could do something like\r\n\r\n    abstract class StringMap {\r\n        public static Builder;\r\n        static {\r\n            abstract class Builder&lt;I&gt; {\r\n                constructor(map: Map&lt;string, string&gt;) { }\r\n                protected readonly map: Map&lt;string, string&gt; = new Map();\r\n                abstract build(): I;\r\n                public put(key: string, value: string): this {\r\n                    this.map.set(key, value);\r\n                    return this;\r\n                }\r\n            }\r\n            this.Builder = Builder;\r\n        }\r\n    }\r\n\r\nThat compiles fine as long as you aren&#39;t trying to generate declaration files via [the `--declaration` compiler option](https://www.typescriptlang.org/tsconfig/#declaration), since it would require the compiler to provide declarations for undeclared types with `protected` things and... well, it&#39;s kind of a mess; see [microsoft/TypeScript#35822](https://github.com/microsoft/TypeScript/issues/35822).  Workarounds include removing `protected` modifiers, or moving scopes around so the class with `protected` members has an exportable name.  That&#39;s easy-ish for static-nested classes:\r\n\r\n    abstract class Builder&lt;I&gt; {\r\n        constructor(map: Map&lt;string, string&gt;) { }\r\n        protected readonly map: Map&lt;string, string&gt; = new Map();\r\n        abstract build(): I;\r\n        public put(key: string, value: string): this {\r\n            this.map.set(key, value);\r\n            return this;\r\n        }\r\n    }\r\n\r\n    abstract class StringMap {\r\n        public static Builder = Builder;\r\n    }\r\n\r\nBut the particular solution for how to deal with declaration files will depend on your use cases, so I&#39;ll stop there.\r\n\r\n[Playground link to code](https://www.typescriptlang.org/play?#code/PQKgBAdg9gDgpgKAMYBsCGBnDYBiUpgDeYCYZYqm2AQmgE5FgC+p5GALmuwJZIXpYwtAF6MmJFiGAJkA7HgKFWZWgwC8-KkPpjlYDl17bRGyoJG6WCUJFhwS5TYIVE9j1WA1oARhzpokdicaHWIWR0cDHj4LL192f0Dg411HSWkINABbOAwYAPsAeQBrNABPV0czeXxKiJV6AG43ciQoCD8AV0CoOgAKAEo6+scfPwCg6u0GMJb69gALbgwAOg8NVWaR5jn9TmjjLZGooyVt0fjEybkU2fPyReW1tBND3fDyKyr2jjAAM1qGggcAA7rh8IMjmRgWCAVBnv0Bo0wMBgGA4HQ6L0ADRgMYJCZ6KYAWTKHjgAA92HAIAATbBwhGpcgwsCk1SQlFoqClMoyRyshTPYSc1HozE4vGXQlVG7sl7oqk0+ng+EWO4s0FsskvUXc3kyKz4q7JADKCW4EAA5sS0DBhmAYJ1vCgjCcYp1uChaRioXtDHwziNjRNktRPd6MQAeACSAD4Hds2h0Et12L0+lk7QAuNl2qN+S1W3GF61xoYa+6gGBY6mBOC0qRgOhwNC09ooCpZmC520wAsW60lwdWhNArV9yG7C7jJLeCO0wa5mN+7ZOl1GJ3sPrFOBlXOl4tgABuaBQnTgB5HA1zj2wQfujjvK27KwwcG3u7KuNP57gSOnEYW3YTo6AgMA71XEYPnqGCImfcMvR9dQhAXX09BYKwEBDJIpkQyM6FjBMHwoH5Ux6fpu17fND2HOgi3LZkyBrKA62pWlm1bdsIE7MAqLzftaL2eiy08SAJztKcZwJOcFyXMAVz0ddXT4Lcdz3K8RKPX8L00osbwgpZ712Z9X3fT89x-M8LwA7ZgNA8DIIwhAWBw64tHNLS+wAJgdZS3X2Ix8OQsTgvQqwgA)","title":"is it possible to implement a typescript abstract inner class?","body":"<p>Neither JavaScript nor TypeScript have true &quot;inner&quot; or &quot;nested&quot; classes (see <a href=\"https://stackoverflow.com/questions/28784375/nested-es6-classes\">Nested ES6 classes?</a>) where you just  <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/class\" rel=\"nofollow noreferrer\">declare a class</a> inside another class.</p>\n<pre><code>// THIS IS NOT VALID, DON'T DO THIS\nclass Foo { \n    class Bar { } // nope\n    static class Baz { } // nope\n}\n</code></pre>\n<p>Instead you could give the outer class an instance or static <em>member</em> whose type is a class constructor.  It's easy enough to initialize these with <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/class\" rel=\"nofollow noreferrer\">class expressions</a>, to much the same effect:</p>\n<pre><code>class Foo {\n    Bar = class Bar { } // okay\n    static Baz = class Baz { } // okay\n}\n</code></pre>\n<p>Unfortunately, you want your inner class to be <em>abstract</em>, and TypeScript does not support abstract class expressions; see <a href=\"https://github.com/microsoft/TypeScript/issues/4578\" rel=\"nofollow noreferrer\">microsoft/TypeScript#4578</a> for the declined feature request:</p>\n<pre><code>// THIS IS NOT VALID, DON'T DO THIS\nclass Foo {\n    Bar = abstract class Bar { } // nope\n    static Baz = abstract class Baz { } // nope\n}\n</code></pre>\n<p>To work around <em>that</em>, one might write abstract class declarations in an appropriate scope and then assign them to relevant properties.  This is helped by <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-4-0.html#class-property-inference-from-constructors\" rel=\"nofollow noreferrer\">class property inference from initialization</a> and <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-4-4.html#static-blocks-in-classes\" rel=\"nofollow noreferrer\"><code>static</code> initialization blocks in classes</a>:</p>\n<pre><code>class Foo {\n    Bar; // type inferred from constructor initialization\n    constructor() {\n        abstract class Bar { } // declaration\n        this.Bar = Bar; // initialization\n    }\n\n    static Baz; // type inferred from static initialization\n    static {\n        abstract class Baz { } // declaration\n        this.Baz = Baz; // initialization\n    }\n}\n</code></pre>\n<p>In the above, <code>Bar</code> is an abstract instance-nested class, and <code>Baz</code> is an abstract static-nested class:</p>\n<pre><code>const foo = new Foo();\nnew foo.Bar(); // error, abstract\nclass MyBar extends foo.Bar { }\nnew MyBar(); // okay\n\nnew Foo.Baz(); // error, abstract\nclass MyBaz extends Foo.Baz { }\nnew MyBaz(); // okay\n</code></pre>\n<hr />\n<p>So, in your example, you could do something like</p>\n<pre><code>abstract class StringMap {\n    public static Builder;\n    static {\n        abstract class Builder&lt;I&gt; {\n            constructor(map: Map&lt;string, string&gt;) { }\n            protected readonly map: Map&lt;string, string&gt; = new Map();\n            abstract build(): I;\n            public put(key: string, value: string): this {\n                this.map.set(key, value);\n                return this;\n            }\n        }\n        this.Builder = Builder;\n    }\n}\n</code></pre>\n<p>That compiles fine as long as you aren't trying to generate declaration files via <a href=\"https://www.typescriptlang.org/tsconfig/#declaration\" rel=\"nofollow noreferrer\">the <code>--declaration</code> compiler option</a>, since it would require the compiler to provide declarations for undeclared types with <code>protected</code> things and... well, it's kind of a mess; see <a href=\"https://github.com/microsoft/TypeScript/issues/35822\" rel=\"nofollow noreferrer\">microsoft/TypeScript#35822</a>.  Workarounds include removing <code>protected</code> modifiers, or moving scopes around so the class with <code>protected</code> members has an exportable name.  That's easy-ish for static-nested classes:</p>\n<pre><code>abstract class Builder&lt;I&gt; {\n    constructor(map: Map&lt;string, string&gt;) { }\n    protected readonly map: Map&lt;string, string&gt; = new Map();\n    abstract build(): I;\n    public put(key: string, value: string): this {\n        this.map.set(key, value);\n        return this;\n    }\n}\n\nabstract class StringMap {\n    public static Builder = Builder;\n}\n</code></pre>\n<p>But the particular solution for how to deal with declaration files will depend on your use cases, so I'll stop there.</p>\n<p><a href=\"https://www.typescriptlang.org/play?#code/PQKgBAdg9gDgpgKAMYBsCGBnDYBiUpgDeYCYZYqm2AQmgE5FgC+p5GALmuwJZIXpYwtAF6MmJFiGAJkA7HgKFWZWgwC8-KkPpjlYDl17bRGyoJG6WCUJFhwS5TYIVE9j1WA1oARhzpokdicaHWIWR0cDHj4LL192f0Dg411HSWkINABbOAwYAPsAeQBrNABPV0czeXxKiJV6AG43ciQoCD8AV0CoOgAKAEo6+scfPwCg6u0GMJb69gALbgwAOg8NVWaR5jn9TmjjLZGooyVt0fjEybkU2fPyReW1tBND3fDyKyr2jjAAM1qGggcAA7rh8IMjmRgWCAVBnv0Bo0wMBgGA4HQ6L0ADRgMYJCZ6KYAWTKHjgAA92HAIAATbBwhGpcgwsCk1SQlFoqClMoyRyshTPYSc1HozE4vGXQlVG7sl7oqk0+ng+EWO4s0FsskvUXc3kyKz4q7JADKCW4EAA5sS0DBhmAYJ1vCgjCcYp1uChaRioXtDHwziNjRNktRPd6MQAeACSAD4Hds2h0Et12L0+lk7QAuNl2qN+S1W3GF61xoYa+6gGBY6mBOC0qRgOhwNC09ooCpZmC520wAsW60lwdWhNArV9yG7C7jJLeCO0wa5mN+7ZOl1GJ3sPrFOBlXOl4tgABuaBQnTgB5HA1zj2wQfujjvK27KwwcG3u7KuNP57gSOnEYW3YTo6AgMA71XEYPnqGCImfcMvR9dQhAXX09BYKwEBDJIpkQyM6FjBMHwoH5Ux6fpu17fND2HOgi3LZkyBrKA62pWlm1bdsIE7MAqLzftaL2eiy08SAJztKcZwJOcFyXMAVz0ddXT4Lcdz3K8RKPX8L00osbwgpZ712Z9X3fT89x-M8LwA7ZgNA8DIIwhAWBw64tHNLS+wAJgdZS3X2Ix8OQsTgvQqwgA\" rel=\"nofollow noreferrer\">Playground link to code</a></p>\n"}],"owner":{"account_id":5401865,"reputation":610,"user_id":4301532,"accept_rate":75,"display_name":"Sankofa"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":467,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73668744,"answer_count":1,"score":1,"last_activity_date":1662773999,"creation_date":1662742035,"question_id":73665243,"body_markdown":"How do I write an abstract inner class like this in typescript?\r\n\r\n```\r\n// java code\r\npublic abstract class StringMap {\r\n\r\n abstract static class Builder&lt;T extends Builder&lt;?, ?&gt;, I&gt; {\r\n   protected final Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\r\n\r\n    protected Builder(Map&lt;String, String&gt; map) {\r\n      this.map.putAll(emptyMapIfNull(map));\r\n    }\r\n\r\n   abstract T self();\r\n\r\n    public abstract I build();\r\n\r\n    public T put(String key, String value) {\r\n      this.map.put(key, value);\r\n      return self();\r\n    }\r\n }\r\n\r\n}\r\n```\r\n\r\nThis is what I have so far but it will not build for multiple reasons. Can someone point me in the direction of how to convert the java version into typescript?\r\n\r\n```\r\n// typescript code\r\nexport abstract class StringMap {\r\n // it will not allow me to make this Builder assignment abstract \r\n // which causes errors for the self and build function within it\r\n\r\n public static Builder =  class Builder&lt;T extends Builder&lt;any, any&gt;, I&gt; {\r\n    constructor(map: Map&lt;string, string&gt;) {\r\n     // implement putAll here\r\n    }\r\n\r\n    protected readonly map: Map&lt;string, string&gt; = new Map();\r\n\r\n    abstract build(): I;\r\n\r\n    public put(key: string, value: string): T {\r\n      this.map.set(key, value);\r\n\r\n      return this;\r\n    }\r\n  }\r\n\r\n}\r\n\r\n```","title":"is it possible to implement a typescript abstract inner class?","body":"<p>How do I write an abstract inner class like this in typescript?</p>\n<pre><code>// java code\npublic abstract class StringMap {\n\n abstract static class Builder&lt;T extends Builder&lt;?, ?&gt;, I&gt; {\n   protected final Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\n\n    protected Builder(Map&lt;String, String&gt; map) {\n      this.map.putAll(emptyMapIfNull(map));\n    }\n\n   abstract T self();\n\n    public abstract I build();\n\n    public T put(String key, String value) {\n      this.map.put(key, value);\n      return self();\n    }\n }\n\n}\n</code></pre>\n<p>This is what I have so far but it will not build for multiple reasons. Can someone point me in the direction of how to convert the java version into typescript?</p>\n<pre><code>// typescript code\nexport abstract class StringMap {\n // it will not allow me to make this Builder assignment abstract \n // which causes errors for the self and build function within it\n\n public static Builder =  class Builder&lt;T extends Builder&lt;any, any&gt;, I&gt; {\n    constructor(map: Map&lt;string, string&gt;) {\n     // implement putAll here\n    }\n\n    protected readonly map: Map&lt;string, string&gt; = new Map();\n\n    abstract build(): I;\n\n    public put(key: string, value: string): T {\n      this.map.set(key, value);\n\n      return this;\n    }\n  }\n\n}\n\n</code></pre>\n"},{"tags":["java","android","firebase-realtime-database"],"comments":[{"owner":{"account_id":25739271,"reputation":653,"user_id":19493508,"display_name":"Hanif Shaikh"},"score":0,"creation_date":1662782777,"post_id":73668708,"comment_id":130091183,"body_markdown":"I am not understand your question. I think Your question is that You create user in firebase Auth and You also think to remain data can add in real time .","body":"I am not understand your question. I think Your question is that You create user in firebase Auth and You also think to remain data can add in real time ."},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1662796007,"post_id":73668708,"comment_id":130092723,"body_markdown":"What exactly in this code doesn&#39;t work the way you expect?\nTell us what is wrong with shared code. Do you have any errors?","body":"What exactly in this code doesn&#39;t work the way you expect? Tell us what is wrong with shared code. Do you have any errors?"},{"owner":{"account_id":25538571,"reputation":13,"user_id":19341716,"display_name":"Charlois Gon&#231;alves"},"score":0,"creation_date":1662839172,"post_id":73668708,"comment_id":130100507,"body_markdown":"I have the activity record, that&#39;s right, I can manually insert data into firebase, then I have the actvity gender I wanted to insert data into the realtime database from a new activity","body":"I have the activity record, that&#39;s right, I can manually insert data into firebase, then I have the actvity gender I wanted to insert data into the realtime database from a new activity"},{"owner":{"account_id":25538571,"reputation":13,"user_id":19341716,"display_name":"Charlois Gon&#231;alves"},"score":0,"creation_date":1662839237,"post_id":73668708,"comment_id":130100517,"body_markdown":"I&#39;m not able to insert data into realtime firebase from a new activity","body":"I&#39;m not able to insert data into realtime firebase from a new activity"},{"owner":{"account_id":25538571,"reputation":13,"user_id":19341716,"display_name":"Charlois Gon&#231;alves"},"score":0,"creation_date":1665889171,"post_id":73668708,"comment_id":130803363,"body_markdown":"I managed to read the DatabaseReference tutorial and put more child on the line, hard to see that?","body":"I managed to read the DatabaseReference tutorial and put more child on the line, hard to see that?"},{"owner":{"account_id":25538571,"reputation":13,"user_id":19341716,"display_name":"Charlois Gon&#231;alves"},"score":0,"creation_date":1665889384,"post_id":73668708,"comment_id":130803392,"body_markdown":"DatabaseReference furosRef = firebaseRef\n            .child(idUsuario.toString())\n            .child(&quot;vhykFsTJMhaCd6jkBd3oXpmYoiH2Thu Jan 10 22:54:24 GMT-02:00 2019&quot;)\n             .child(&quot;furos&quot;)\n            .child(&quot;Thu Jan 10 22:54:51 GMT-02:00 2019&quot;);","body":"DatabaseReference furosRef = firebaseRef             .child(idUsuario.toString())             .child(&quot;vhykFsTJMhaCd6jkBd3oXpmYoiH2Thu Jan 10 22:54:24 GMT-02:00 2019&quot;)              .child(&quot;furos&quot;)             .child(&quot;Thu Jan 10 22:54:51 GMT-02:00 2019&quot;);"}],"owner":{"account_id":25538571,"reputation":13,"user_id":19341716,"display_name":"Charlois Gon&#231;alves"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662773520,"creation_date":1662773272,"question_id":73668708,"body_markdown":"I have my classes and javas codes, I would like to add more information in different activities linking with the user&#39;s registry data. How do I do that ? I just need this to build the app\r\n\r\nRegister Activity:\r\n\r\n\r\n    public class RegisterBasicInfo extends AppCompatActivity {\r\n    \r\n    \r\n    \r\n            private EditText nome;\r\n            private EditText email;\r\n            private EditText senha;\r\n            private Button botaoCadastrar;\r\n            private Usuario usuario;\r\n    \r\n            private FirebaseAuth autenticacao;\r\n    \r\n            @Override\r\n            protected void onCreate (Bundle savedInstanceState){\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_registerbasic_info);\r\n    \r\n            nome = (EditText) findViewById(R.id.edit_cadastro_nome);\r\n            email = (EditText) findViewById(R.id.edit_cadastro_email);\r\n            senha = (EditText) findViewById(R.id.edit_cadastro_senha);\r\n            botaoCadastrar = (Button) findViewById(R.id.bt_cadastrar);\r\n    \r\n            botaoCadastrar.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n    \r\n                    usuario = new Usuario();\r\n                    usuario.setNome(nome.getText().toString());\r\n                    usuario.setEmail(email.getText().toString());\r\n                    usuario.setSenha(senha.getText().toString());\r\n                    cadastrarUsuario();\r\n    \r\n                }\r\n            });\r\n    \r\n        }\r\n    \r\n            private void cadastrarUsuario () {\r\n    \r\n            autenticacao = ConfiguracaoFirebase.getFirebaseAutenticacao();\r\n            autenticacao.createUserWithEmailAndPassword(\r\n                    usuario.getEmail(),\r\n                    usuario.getSenha()\r\n            ).addOnCompleteListener(RegisterBasicInfo.this, new OnCompleteListener&lt;AuthResult&gt;() {\r\n                @Override\r\n                public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\r\n    \r\n                    if (task.isSuccessful()) {\r\n    \r\n                        Toast.makeText(RegisterBasicInfo.this, &quot;Sucesso ao cadastrar usu&#225;rio&quot;, Toast.LENGTH_LONG).show();\r\n    \r\n                        String identificadorUsuario = Base64Custom.codificarBase64(usuario.getEmail());\r\n                        usuario.setId(identificadorUsuario);\r\n                        usuario.salvar();\r\n    \r\n                        abrirLoginUsuario();\r\n    \r\n                    } else {\r\n    \r\n                        String erro = &quot;&quot;;\r\n                        try {\r\n                            throw task.getException();\r\n                        } catch (FirebaseAuthWeakPasswordException e) {\r\n                            erro = &quot;Escolha uma senha que contenha, letras e n&#250;meros.&quot;;\r\n                        } catch (FirebaseAuthInvalidCredentialsException e) {\r\n                            erro = &quot;Email indicado n&#227;o &#233; v&#225;lido.&quot;;\r\n                        } catch (FirebaseAuthUserCollisionException e) {\r\n                            erro = &quot;J&#225; existe uma conta com esse e-mail.&quot;;\r\n                        } catch (Exception e) {\r\n                            e.printStackTrace();\r\n                        }\r\n    \r\n                        Toast.makeText(RegisterBasicInfo.this, &quot;Erro ao cadastrar usu&#225;rio: &quot; + erro, Toast.LENGTH_LONG).show();\r\n                    }\r\n    \r\n                }\r\n            });\r\n    \r\n        }\r\n    \r\n            public void abrirLoginUsuario () {\r\n            Intent intent = new Intent(RegisterBasicInfo.this,RegisterGender.class);\r\n            startActivity(intent);\r\n            finish();\r\n        }\r\n    \r\n        }\r\n\r\nMy Class Users\r\n\r\n\r\n    public class Usuario {\r\n    \r\n        private String id;\r\n        private String nome;\r\n        private String email;\r\n        private String senha;\r\n        private String sex;\r\n        private String preferSex;\r\n    \r\n        public Usuario(){\r\n    \r\n        }\r\n    \r\n        public void salvar(){\r\n            DatabaseReference referenciaFirebase = ConfiguracaoFirebase.getFirebase();\r\n            referenciaFirebase.child(&quot;usuarios&quot;).child( getId() ).setValue( this );\r\n        }\r\n    \r\n        @Exclude\r\n        public String getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(String id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        public String getNome() {\r\n            return nome;\r\n        }\r\n    \r\n        public void setNome(String nome) {\r\n            this.nome = nome;\r\n        }\r\n    \r\n        public String getEmail() {\r\n            return email;\r\n        }\r\n    \r\n        public void setEmail(String email) {\r\n            this.email = email;\r\n        }\r\n    \r\n        @Exclude\r\n        public String getSenha() {\r\n            return senha;\r\n        }\r\n    \r\n        public void setSenha(String senha) {\r\n            this.senha = senha;\r\n        }\r\n    \r\n        public String getSex() {\r\n            return sex;\r\n        }\r\n    \r\n        public void setSex(String sex) {\r\n            this.sex = sex;\r\n        }\r\n    \r\n    \r\n        public String getPreferSex() {\r\n            return preferSex;\r\n        }\r\n    \r\n        public void setPreferSex(String preferSex) {\r\n            this.preferSex = preferSex;\r\n        }\r\n    \r\n    \r\n    \r\n    }\r\n\r\nso far everything is ok, but now that you add the sex with the button, it opens the screen but does not register\r\n\r\n    public class RegisterGender extends AppCompatActivity {\r\n        private FirebaseAuth mAuth;\r\n        String password;\r\n        User user;\r\n        boolean male = true;\r\n        private Button genderContinueButton;\r\n        private Button maleSelectionButton;\r\n        private Button femaleSelectionButton;\r\n        private DatabaseReference mDatabase;\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_register_gender);\r\n            mAuth = FirebaseAuth.getInstance();\r\n            Intent intent = getIntent();\r\n            user = (User) intent.getSerializableExtra(&quot;classUser&quot;);\r\n            password = intent.getStringExtra(&quot;password&quot;);\r\n    \r\n            maleSelectionButton = findViewById(R.id.maleSelectionButton);\r\n            femaleSelectionButton = findViewById(R.id.femaleSelectionButton);\r\n            genderContinueButton = findViewById(R.id.genderContinueButton);\r\n            mDatabase = FirebaseDatabase.getInstance().getReference();\r\n            //By default male has to be selected so below code is added\r\n    \r\n            femaleSelectionButton.setAlpha(.5f);\r\n            femaleSelectionButton.setBackgroundColor(Color.GRAY);\r\n    \r\n    \r\n            maleSelectionButton.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    maleButtonSelected();\r\n                }\r\n    \r\n                Usuario user = new Usuario();\r\n    \r\n    \r\n    \r\n    \r\n            });\r\n    \r\n            femaleSelectionButton.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    femaleButtonSelected();\r\n                }\r\n                Usuario user = new Usuario();\r\n    \r\n            });\r\n    \r\n            genderContinueButton.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    openPreferenceEntryPage();\r\n                }\r\n                Usuario user = new Usuario();\r\n    \r\n    \r\n            });\r\n    \r\n        }\r\n    \r\n        public void maleButtonSelected() {\r\n            male = true;\r\n            maleSelectionButton.setBackgroundColor(Color.parseColor(&quot;#FF4081&quot;));\r\n            maleSelectionButton.setAlpha(1.0f);\r\n            femaleSelectionButton.setAlpha(.5f);\r\n            femaleSelectionButton.setBackgroundColor(Color.GRAY);\r\n    \r\n        }\r\n    \r\n        public void femaleButtonSelected() {\r\n            male = false;\r\n            femaleSelectionButton.setBackgroundColor(Color.parseColor(&quot;#FF4081&quot;));\r\n            femaleSelectionButton.setAlpha(1.0f);\r\n            maleSelectionButton.setAlpha(.5f);\r\n            maleSelectionButton.setBackgroundColor(Color.GRAY);\r\n    \r\n        }\r\n    \r\n    \r\n        public void openPreferenceEntryPage() {\r\n            mDatabase.child(&quot;usuarios&quot;).push().setValue(user);\r\n            String ownSex = male ? &quot;male&quot; : &quot;female&quot;;\r\n            user.setSex(ownSex);\r\n            //set default photo\r\n            String defaultPhoto = male ? &quot;defaultMale&quot; : &quot;defaultFemale&quot;;\r\n            user.setProfileImageUrl(defaultPhoto);\r\n    \r\n            Intent intent = new Intent(this, RegisterGenderPrefection.class);\r\n            intent.putExtra(&quot;password&quot;, password);\r\n            intent.putExtra(&quot;classUser&quot;, user);\r\n            startActivity(intent);\r\n        }\r\n    }","title":"add more information in realtime database after creating user record","body":"<p>I have my classes and javas codes, I would like to add more information in different activities linking with the user's registry data. How do I do that ? I just need this to build the app</p>\n<p>Register Activity:</p>\n<pre><code>public class RegisterBasicInfo extends AppCompatActivity {\n\n\n\n        private EditText nome;\n        private EditText email;\n        private EditText senha;\n        private Button botaoCadastrar;\n        private Usuario usuario;\n\n        private FirebaseAuth autenticacao;\n\n        @Override\n        protected void onCreate (Bundle savedInstanceState){\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_registerbasic_info);\n\n        nome = (EditText) findViewById(R.id.edit_cadastro_nome);\n        email = (EditText) findViewById(R.id.edit_cadastro_email);\n        senha = (EditText) findViewById(R.id.edit_cadastro_senha);\n        botaoCadastrar = (Button) findViewById(R.id.bt_cadastrar);\n\n        botaoCadastrar.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n\n                usuario = new Usuario();\n                usuario.setNome(nome.getText().toString());\n                usuario.setEmail(email.getText().toString());\n                usuario.setSenha(senha.getText().toString());\n                cadastrarUsuario();\n\n            }\n        });\n\n    }\n\n        private void cadastrarUsuario () {\n\n        autenticacao = ConfiguracaoFirebase.getFirebaseAutenticacao();\n        autenticacao.createUserWithEmailAndPassword(\n                usuario.getEmail(),\n                usuario.getSenha()\n        ).addOnCompleteListener(RegisterBasicInfo.this, new OnCompleteListener&lt;AuthResult&gt;() {\n            @Override\n            public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\n\n                if (task.isSuccessful()) {\n\n                    Toast.makeText(RegisterBasicInfo.this, &quot;Sucesso ao cadastrar usuário&quot;, Toast.LENGTH_LONG).show();\n\n                    String identificadorUsuario = Base64Custom.codificarBase64(usuario.getEmail());\n                    usuario.setId(identificadorUsuario);\n                    usuario.salvar();\n\n                    abrirLoginUsuario();\n\n                } else {\n\n                    String erro = &quot;&quot;;\n                    try {\n                        throw task.getException();\n                    } catch (FirebaseAuthWeakPasswordException e) {\n                        erro = &quot;Escolha uma senha que contenha, letras e números.&quot;;\n                    } catch (FirebaseAuthInvalidCredentialsException e) {\n                        erro = &quot;Email indicado não é válido.&quot;;\n                    } catch (FirebaseAuthUserCollisionException e) {\n                        erro = &quot;Já existe uma conta com esse e-mail.&quot;;\n                    } catch (Exception e) {\n                        e.printStackTrace();\n                    }\n\n                    Toast.makeText(RegisterBasicInfo.this, &quot;Erro ao cadastrar usuário: &quot; + erro, Toast.LENGTH_LONG).show();\n                }\n\n            }\n        });\n\n    }\n\n        public void abrirLoginUsuario () {\n        Intent intent = new Intent(RegisterBasicInfo.this,RegisterGender.class);\n        startActivity(intent);\n        finish();\n    }\n\n    }\n</code></pre>\n<p>My Class Users</p>\n<pre><code>public class Usuario {\n\n    private String id;\n    private String nome;\n    private String email;\n    private String senha;\n    private String sex;\n    private String preferSex;\n\n    public Usuario(){\n\n    }\n\n    public void salvar(){\n        DatabaseReference referenciaFirebase = ConfiguracaoFirebase.getFirebase();\n        referenciaFirebase.child(&quot;usuarios&quot;).child( getId() ).setValue( this );\n    }\n\n    @Exclude\n    public String getId() {\n        return id;\n    }\n\n    public void setId(String id) {\n        this.id = id;\n    }\n\n    public String getNome() {\n        return nome;\n    }\n\n    public void setNome(String nome) {\n        this.nome = nome;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    @Exclude\n    public String getSenha() {\n        return senha;\n    }\n\n    public void setSenha(String senha) {\n        this.senha = senha;\n    }\n\n    public String getSex() {\n        return sex;\n    }\n\n    public void setSex(String sex) {\n        this.sex = sex;\n    }\n\n\n    public String getPreferSex() {\n        return preferSex;\n    }\n\n    public void setPreferSex(String preferSex) {\n        this.preferSex = preferSex;\n    }\n\n\n\n}\n</code></pre>\n<p>so far everything is ok, but now that you add the sex with the button, it opens the screen but does not register</p>\n<pre><code>public class RegisterGender extends AppCompatActivity {\n    private FirebaseAuth mAuth;\n    String password;\n    User user;\n    boolean male = true;\n    private Button genderContinueButton;\n    private Button maleSelectionButton;\n    private Button femaleSelectionButton;\n    private DatabaseReference mDatabase;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_register_gender);\n        mAuth = FirebaseAuth.getInstance();\n        Intent intent = getIntent();\n        user = (User) intent.getSerializableExtra(&quot;classUser&quot;);\n        password = intent.getStringExtra(&quot;password&quot;);\n\n        maleSelectionButton = findViewById(R.id.maleSelectionButton);\n        femaleSelectionButton = findViewById(R.id.femaleSelectionButton);\n        genderContinueButton = findViewById(R.id.genderContinueButton);\n        mDatabase = FirebaseDatabase.getInstance().getReference();\n        //By default male has to be selected so below code is added\n\n        femaleSelectionButton.setAlpha(.5f);\n        femaleSelectionButton.setBackgroundColor(Color.GRAY);\n\n\n        maleSelectionButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                maleButtonSelected();\n            }\n\n            Usuario user = new Usuario();\n\n\n\n\n        });\n\n        femaleSelectionButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                femaleButtonSelected();\n            }\n            Usuario user = new Usuario();\n\n        });\n\n        genderContinueButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                openPreferenceEntryPage();\n            }\n            Usuario user = new Usuario();\n\n\n        });\n\n    }\n\n    public void maleButtonSelected() {\n        male = true;\n        maleSelectionButton.setBackgroundColor(Color.parseColor(&quot;#FF4081&quot;));\n        maleSelectionButton.setAlpha(1.0f);\n        femaleSelectionButton.setAlpha(.5f);\n        femaleSelectionButton.setBackgroundColor(Color.GRAY);\n\n    }\n\n    public void femaleButtonSelected() {\n        male = false;\n        femaleSelectionButton.setBackgroundColor(Color.parseColor(&quot;#FF4081&quot;));\n        femaleSelectionButton.setAlpha(1.0f);\n        maleSelectionButton.setAlpha(.5f);\n        maleSelectionButton.setBackgroundColor(Color.GRAY);\n\n    }\n\n\n    public void openPreferenceEntryPage() {\n        mDatabase.child(&quot;usuarios&quot;).push().setValue(user);\n        String ownSex = male ? &quot;male&quot; : &quot;female&quot;;\n        user.setSex(ownSex);\n        //set default photo\n        String defaultPhoto = male ? &quot;defaultMale&quot; : &quot;defaultFemale&quot;;\n        user.setProfileImageUrl(defaultPhoto);\n\n        Intent intent = new Intent(this, RegisterGenderPrefection.class);\n        intent.putExtra(&quot;password&quot;, password);\n        intent.putExtra(&quot;classUser&quot;, user);\n        startActivity(intent);\n    }\n}\n</code></pre>\n"},{"tags":["java","json","kotlin","http-post","jsoup"],"answers":[{"tags":[],"owner":{"account_id":1158581,"reputation":17184,"user_id":1138559,"accept_rate":99,"display_name":"Alkis Kalogeris"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1418504047,"creation_date":1418503332,"answer_id":27463433,"question_id":27463036,"body_markdown":"What you need is to post `raw data`. That functionality has been implemented but it hasn&#39;t been added yet. Check this pull request https://github.com/jhy/jsoup/pull/318 . Do you really need to use jsoup for this? I mean you could use `HttpURLConnection` (this is what jsoup uses underneath) to make the request and then pass the response to jsoup as a string. \r\n\r\nHere is an example of `HttpURLConnection` taken (but simplified and added json/raw data) from [www.mkyong.com][1]\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.InputStreamReader;\r\n    import java.io.OutputStreamWriter;\r\n    import java.net.HttpURLConnection;\r\n    import java.net.URL;\r\n    \r\n    public class Main {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\ttry {\r\n    \r\n    \t\t\tString url = &quot;http://www.google.com&quot;;\r\n    \r\n    \t\t\tURL obj = new URL(url);\r\n    \t\t\tHttpURLConnection conn = (HttpURLConnection) obj.openConnection();\r\n    \t\t\tconn.setReadTimeout(5000);\r\n    \t\t\tconn.addRequestProperty(&quot;Accept-Language&quot;, &quot;en-US,en;q=0.8&quot;);\r\n    \t\t\tconn.addRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla&quot;);\r\n    \t\t\tconn.addRequestProperty(&quot;Referer&quot;, &quot;google.com&quot;);\r\n    \r\n    \t\t\tconn.setDoOutput(true);\r\n    \r\n    \t        OutputStreamWriter w = new OutputStreamWriter(conn.getOutputStream(), &quot;UTF-8&quot;);\r\n    \r\n    \t        w.write(&quot;SOME_JSON_STRING_HERE&quot;);\r\n    \t        w.close();\r\n    \t        \r\n    \t\t\tSystem.out.println(&quot;Request URL ... &quot; + url);\r\n    \r\n    \t\t\tint status = conn.getResponseCode();\r\n    \r\n    \t\t\tSystem.out.println(&quot;Response Code ... &quot; + status);\r\n    \r\n    \t\t\tBufferedReader in = new BufferedReader(new InputStreamReader(\r\n    \t\t\t\t\tconn.getInputStream()));\r\n    \t\t\tString inputLine;\r\n    \t\t\tStringBuffer html = new StringBuffer();\r\n    \r\n    \t\t\twhile ((inputLine = in.readLine()) != null) {\r\n    \t\t\t\thtml.append(inputLine);\r\n    \t\t\t}\r\n    \r\n    \t\t\tin.close();\r\n                conn.disconnect();\r\n\r\n    \t\t\tSystem.out.println(&quot;URL Content... \\n&quot; + html.toString());\r\n    \t\t\tSystem.out.println(&quot;Done&quot;);\r\n    \r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\n\r\n\r\n  [1]: http://www.mkyong.com/java/java-httpurlconnection-follow-redirect-example/","title":"Jsoup HTTP POST with payload","body":"<p>What you need is to post <code>raw data</code>. That functionality has been implemented but it hasn't been added yet. Check this pull request <a href=\"https://github.com/jhy/jsoup/pull/318\" rel=\"nofollow\">https://github.com/jhy/jsoup/pull/318</a> . Do you really need to use jsoup for this? I mean you could use <code>HttpURLConnection</code> (this is what jsoup uses underneath) to make the request and then pass the response to jsoup as a string. </p>\n\n<p>Here is an example of <code>HttpURLConnection</code> taken (but simplified and added json/raw data) from <a href=\"http://www.mkyong.com/java/java-httpurlconnection-follow-redirect-example/\" rel=\"nofollow\">www.mkyong.com</a></p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.InputStreamReader;\nimport java.io.OutputStreamWriter;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\n\npublic class Main {\n\n    public static void main(String[] args) {\n\n        try {\n\n            String url = \"http://www.google.com\";\n\n            URL obj = new URL(url);\n            HttpURLConnection conn = (HttpURLConnection) obj.openConnection();\n            conn.setReadTimeout(5000);\n            conn.addRequestProperty(\"Accept-Language\", \"en-US,en;q=0.8\");\n            conn.addRequestProperty(\"User-Agent\", \"Mozilla\");\n            conn.addRequestProperty(\"Referer\", \"google.com\");\n\n            conn.setDoOutput(true);\n\n            OutputStreamWriter w = new OutputStreamWriter(conn.getOutputStream(), \"UTF-8\");\n\n            w.write(\"SOME_JSON_STRING_HERE\");\n            w.close();\n\n            System.out.println(\"Request URL ... \" + url);\n\n            int status = conn.getResponseCode();\n\n            System.out.println(\"Response Code ... \" + status);\n\n            BufferedReader in = new BufferedReader(new InputStreamReader(\n                    conn.getInputStream()));\n            String inputLine;\n            StringBuffer html = new StringBuffer();\n\n            while ((inputLine = in.readLine()) != null) {\n                html.append(inputLine);\n            }\n\n            in.close();\n            conn.disconnect();\n\n            System.out.println(\"URL Content... \\n\" + html.toString());\n            System.out.println(\"Done\");\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4624460,"reputation":3440,"user_id":3748666,"accept_rate":63,"display_name":"Santosh Hegde"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1483543739,"creation_date":1483542009,"answer_id":41466888,"question_id":27463036,"body_markdown":"Use latest JSOUP library.\r\n\r\nIf you are using maven, then add below entry to pom.xml\r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.jsoup&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jsoup&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.10.2&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\nAnd below code will solves your problem.\r\n\r\n    String postUrl=postURLPrefix+apiKey+&quot;/batch?requestType=geocode&quot;;\r\n                System.out.println(postUrl);\r\n                String response= Jsoup.connect(postUrl).timeout(60000).ignoreContentType(true)\r\n                        .method(Connection.Method.POST)\r\n                        .requestBody(&quot;payload&quot;,jsonPayload.toString())\r\n                        .execute()\r\n                        .body();","title":"Jsoup HTTP POST with payload","body":"<p>Use latest JSOUP library.</p>\n\n<p>If you are using maven, then add below entry to pom.xml</p>\n\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.jsoup&lt;/groupId&gt;\n        &lt;artifactId&gt;jsoup&lt;/artifactId&gt;\n        &lt;version&gt;1.10.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>And below code will solves your problem.</p>\n\n<pre><code>String postUrl=postURLPrefix+apiKey+\"/batch?requestType=geocode\";\n            System.out.println(postUrl);\n            String response= Jsoup.connect(postUrl).timeout(60000).ignoreContentType(true)\n                    .method(Connection.Method.POST)\n                    .requestBody(\"payload\",jsonPayload.toString())\n                    .execute()\n                    .body();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11726648,"reputation":19533,"user_id":8583692,"display_name":"Mahozad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638531019,"creation_date":1635929327,"answer_id":69821965,"question_id":27463036,"body_markdown":"This is how I did that with [jsoup v1.14.3] and [Kotlin] (also applies to Java).  \r\nIt sends two parameters `name` and `age` as part of a JSON object (assuming the server accepts that):\r\n\r\n```kotlin\r\nval document = Jsoup.connect(&quot;the/target/url&quot;)\r\n    .userAgent(&quot;Mozilla&quot;)\r\n    .header(&quot;content-type&quot;, &quot;application/json&quot;)\r\n    .header(&quot;accept&quot;, &quot;application/json&quot;)\r\n    .requestBody(&quot;&quot;&quot;{&quot;name&quot;: &quot;Katy&quot;, &quot;age&quot;: 43}&quot;&quot;&quot;)\r\n    .ignoreContentType(true)\r\n    .post()\r\n```\r\n\r\nYou can also send the parameters in [url-encoded format] (assuming the server accepts that):\r\n\r\n```kotlin\r\nval document = Jsoup.connect(&quot;the/target/url&quot;)\r\n    .userAgent(&quot;Mozilla&quot;)\r\n    .header(&quot;content-type&quot;, &quot;application/x-www-form-urlencoded&quot;)\r\n    .header(&quot;accept&quot;, &quot;application/json&quot;)\r\n    .data(&quot;name&quot;, &quot;Katy&quot;)\r\n    .data(&quot;age&quot;, &quot;43&quot;)\r\n    // OR\r\n    //.data(mapOf(&quot;name&quot; to &quot;Katy&quot;, &quot;age&quot; to &quot;43&quot;))\r\n    .ignoreContentType(true)\r\n    .post()\r\n```\r\n\r\n  [jsoup v1.14.3]: https://mvnrepository.com/artifact/org.jsoup/jsoup/1.14.3 &quot;MVN Repository&quot;\r\n  [Kotlin]: https://kotlinlang.org/ &quot;Kotlin programming language&quot;\r\n  [url-encoded format]: https://stackoverflow.com/a/9880122/8583692 &quot;What are the differences between application/json and application/x-www-form-urlencoded?&quot;","title":"Jsoup HTTP POST with payload","body":"<p>This is how I did that with <a href=\"https://mvnrepository.com/artifact/org.jsoup/jsoup/1.14.3\" rel=\"nofollow noreferrer\" title=\"MVN Repository\">jsoup v1.14.3</a> and <a href=\"https://kotlinlang.org/\" rel=\"nofollow noreferrer\" title=\"Kotlin programming language\">Kotlin</a> (also applies to Java).<br />\nIt sends two parameters <code>name</code> and <code>age</code> as part of a JSON object (assuming the server accepts that):</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val document = Jsoup.connect(&quot;the/target/url&quot;)\n    .userAgent(&quot;Mozilla&quot;)\n    .header(&quot;content-type&quot;, &quot;application/json&quot;)\n    .header(&quot;accept&quot;, &quot;application/json&quot;)\n    .requestBody(&quot;&quot;&quot;{&quot;name&quot;: &quot;Katy&quot;, &quot;age&quot;: 43}&quot;&quot;&quot;)\n    .ignoreContentType(true)\n    .post()\n</code></pre>\n<p>You can also send the parameters in <a href=\"https://stackoverflow.com/a/9880122/8583692\" title=\"What are the differences between application/json and application/x-www-form-urlencoded?\">url-encoded format</a> (assuming the server accepts that):</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val document = Jsoup.connect(&quot;the/target/url&quot;)\n    .userAgent(&quot;Mozilla&quot;)\n    .header(&quot;content-type&quot;, &quot;application/x-www-form-urlencoded&quot;)\n    .header(&quot;accept&quot;, &quot;application/json&quot;)\n    .data(&quot;name&quot;, &quot;Katy&quot;)\n    .data(&quot;age&quot;, &quot;43&quot;)\n    // OR\n    //.data(mapOf(&quot;name&quot; to &quot;Katy&quot;, &quot;age&quot; to &quot;43&quot;))\n    .ignoreContentType(true)\n    .post()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8201651,"reputation":1736,"user_id":6172826,"display_name":"seunggabi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662773028,"creation_date":1662773028,"answer_id":73668695,"question_id":27463036,"body_markdown":"### Example\r\n```\r\n    private fun token(email: String, password: String): String {\r\n        val url = &quot;https://asdf.com/tokens&quot;\r\n\r\n        val headers = mapOf(\r\n            &quot;Accept&quot; to &quot;application/json&quot;,\r\n            &quot;Content-Type&quot; to &quot;application/json&quot;,\r\n            &quot;Authorization&quot; to &quot;null&quot;\r\n        )\r\n        val json = mapOf(\r\n            &quot;auth_type&quot; to &quot;CREDENTIAL&quot;,\r\n            &quot;credential_type_payload&quot; to mapOf(\r\n                &quot;email&quot; to email,\r\n                &quot;password&quot; to password,\r\n            ),\r\n        ).toJson()\r\n\r\n        return CrawlUtil.post(url, headers, json)[&quot;token&quot;] as String\r\n    }\r\n```\r\n---\r\n### CrawlUtil\r\n```kotlin\r\nimport org.jsoup.Connection\r\nimport org.jsoup.Jsoup\r\n\r\nobject CrawlUtil {\r\n    private const val TIMEOUT = 5 * 60 * 1000\r\n    private const val MAX_BODY_SIZE = 0\r\n    private const val IGNORE_CONTENT_TYPE = true\r\n\r\n    private fun connection(\r\n        url: String,\r\n        headers: Map&lt;String, String&gt;,\r\n        json: String,\r\n        data: Map&lt;String, String&gt;? = emptyMap()\r\n    ): Connection {\r\n        var connection = Jsoup.connect(url)\r\n\r\n        headers.forEach {\r\n            connection = connection.header(it.key, it.value)\r\n        }\r\n\r\n        data!!.forEach {\r\n            connection = connection.data(it.key, it.value)\r\n        }\r\n\r\n        return connection\r\n            .timeout(TIMEOUT)\r\n            .maxBodySize(MAX_BODY_SIZE)\r\n            .ignoreContentType(IGNORE_CONTENT_TYPE)\r\n            .requestBody(json)\r\n    }\r\n\r\n    fun get(\r\n        url: String,\r\n        headers: Map&lt;String, String&gt;,\r\n        json: String,\r\n        data: Map&lt;String, String&gt;? = emptyMap()\r\n    ): Map&lt;String, Any&gt; {\r\n        return connection(url, headers, json, data)\r\n            .get()\r\n            .text()\r\n            .toObject()\r\n    }\r\n\r\n    fun post(\r\n        url: String,\r\n        headers: Map&lt;String, String&gt;,\r\n        json: String,\r\n        data: Map&lt;String, String&gt;? = emptyMap()\r\n    ): Map&lt;String, Any&gt; {\r\n        return connection(url, headers, json, data)\r\n            .post()\r\n            .text()\r\n            .toObject()\r\n    }\r\n}\r\n```\r\n\r\n### ExtensionUtil\r\n```kotlin\r\ninline fun &lt;reified T&gt; String.toObject(): T {\r\n    return JacksonUtil.toObject(this)\r\n}\r\n```\r\n\r\n### JacksonUtil\r\n```kotlin\r\nimport com.fasterxml.jackson.core.type.TypeReference\r\nimport com.fasterxml.jackson.databind.DeserializationFeature\r\nimport com.fasterxml.jackson.databind.ObjectMapper\r\nimport com.fasterxml.jackson.databind.SerializationFeature\r\nimport com.fasterxml.jackson.datatype.jsr310.JavaTimeModule\r\nimport com.fasterxml.jackson.datatype.jsr310.deser.LocalDateDeserializer\r\nimport com.fasterxml.jackson.datatype.jsr310.deser.LocalDateTimeDeserializer\r\nimport com.fasterxml.jackson.module.afterburner.AfterburnerModule\r\nimport com.fasterxml.jackson.module.kotlin.KotlinModule\r\nimport java.time.LocalDate\r\nimport java.time.LocalDateTime\r\nimport java.time.format.DateTimeFormatter\r\n\r\nobject JacksonUtil {\r\n    val objectMapper: ObjectMapper = ObjectMapper()\r\n        .registerModule(KotlinModule.Builder().build())\r\n        .registerModule(JavaTimeModule())\r\n        .registerModule(AfterburnerModule())\r\n        .configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false)\r\n        .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false)\r\n        .configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false)\r\n        .registerModule(\r\n            JavaTimeModule().apply {\r\n                addDeserializer(LocalDate::class.java, LocalDateDeserializer(DateTimeFormatter.ISO_DATE))\r\n                addDeserializer(\r\n                    LocalDateTime::class.java,\r\n                    LocalDateTimeDeserializer(DateTimeFormatter.ISO_DATE_TIME)\r\n                )\r\n            }\r\n        )\r\n\r\n    fun toJson(obj: Any?): String {\r\n        if (obj == null) {\r\n            return &quot;&quot;\r\n        }\r\n\r\n        return objectMapper.writeValueAsString(obj)\r\n    }\r\n\r\n    fun merged(a: MutableMap&lt;String, Any&gt;, b: Any): Map&lt;String, Any&gt; {\r\n        return objectMapper\r\n            .readerForUpdating(a)\r\n            .readValue(toJson(b))\r\n    }\r\n\r\n    inline fun &lt;reified T&gt; toObject(s: String): T {\r\n        return objectMapper.readValue(s, object : TypeReference&lt;T&gt;() {})\r\n    }\r\n}\r\n```\r\n\r\nhttps://seunggabi.tistory.com/entry/Jsoup-GET-POST-crawling","title":"Jsoup HTTP POST with payload","body":"<h3>Example</h3>\n<pre><code>    private fun token(email: String, password: String): String {\n        val url = &quot;https://asdf.com/tokens&quot;\n\n        val headers = mapOf(\n            &quot;Accept&quot; to &quot;application/json&quot;,\n            &quot;Content-Type&quot; to &quot;application/json&quot;,\n            &quot;Authorization&quot; to &quot;null&quot;\n        )\n        val json = mapOf(\n            &quot;auth_type&quot; to &quot;CREDENTIAL&quot;,\n            &quot;credential_type_payload&quot; to mapOf(\n                &quot;email&quot; to email,\n                &quot;password&quot; to password,\n            ),\n        ).toJson()\n\n        return CrawlUtil.post(url, headers, json)[&quot;token&quot;] as String\n    }\n</code></pre>\n<hr />\n<h3>CrawlUtil</h3>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import org.jsoup.Connection\nimport org.jsoup.Jsoup\n\nobject CrawlUtil {\n    private const val TIMEOUT = 5 * 60 * 1000\n    private const val MAX_BODY_SIZE = 0\n    private const val IGNORE_CONTENT_TYPE = true\n\n    private fun connection(\n        url: String,\n        headers: Map&lt;String, String&gt;,\n        json: String,\n        data: Map&lt;String, String&gt;? = emptyMap()\n    ): Connection {\n        var connection = Jsoup.connect(url)\n\n        headers.forEach {\n            connection = connection.header(it.key, it.value)\n        }\n\n        data!!.forEach {\n            connection = connection.data(it.key, it.value)\n        }\n\n        return connection\n            .timeout(TIMEOUT)\n            .maxBodySize(MAX_BODY_SIZE)\n            .ignoreContentType(IGNORE_CONTENT_TYPE)\n            .requestBody(json)\n    }\n\n    fun get(\n        url: String,\n        headers: Map&lt;String, String&gt;,\n        json: String,\n        data: Map&lt;String, String&gt;? = emptyMap()\n    ): Map&lt;String, Any&gt; {\n        return connection(url, headers, json, data)\n            .get()\n            .text()\n            .toObject()\n    }\n\n    fun post(\n        url: String,\n        headers: Map&lt;String, String&gt;,\n        json: String,\n        data: Map&lt;String, String&gt;? = emptyMap()\n    ): Map&lt;String, Any&gt; {\n        return connection(url, headers, json, data)\n            .post()\n            .text()\n            .toObject()\n    }\n}\n</code></pre>\n<h3>ExtensionUtil</h3>\n<pre class=\"lang-kotlin prettyprint-override\"><code>inline fun &lt;reified T&gt; String.toObject(): T {\n    return JacksonUtil.toObject(this)\n}\n</code></pre>\n<h3>JacksonUtil</h3>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import com.fasterxml.jackson.core.type.TypeReference\nimport com.fasterxml.jackson.databind.DeserializationFeature\nimport com.fasterxml.jackson.databind.ObjectMapper\nimport com.fasterxml.jackson.databind.SerializationFeature\nimport com.fasterxml.jackson.datatype.jsr310.JavaTimeModule\nimport com.fasterxml.jackson.datatype.jsr310.deser.LocalDateDeserializer\nimport com.fasterxml.jackson.datatype.jsr310.deser.LocalDateTimeDeserializer\nimport com.fasterxml.jackson.module.afterburner.AfterburnerModule\nimport com.fasterxml.jackson.module.kotlin.KotlinModule\nimport java.time.LocalDate\nimport java.time.LocalDateTime\nimport java.time.format.DateTimeFormatter\n\nobject JacksonUtil {\n    val objectMapper: ObjectMapper = ObjectMapper()\n        .registerModule(KotlinModule.Builder().build())\n        .registerModule(JavaTimeModule())\n        .registerModule(AfterburnerModule())\n        .configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false)\n        .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false)\n        .configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false)\n        .registerModule(\n            JavaTimeModule().apply {\n                addDeserializer(LocalDate::class.java, LocalDateDeserializer(DateTimeFormatter.ISO_DATE))\n                addDeserializer(\n                    LocalDateTime::class.java,\n                    LocalDateTimeDeserializer(DateTimeFormatter.ISO_DATE_TIME)\n                )\n            }\n        )\n\n    fun toJson(obj: Any?): String {\n        if (obj == null) {\n            return &quot;&quot;\n        }\n\n        return objectMapper.writeValueAsString(obj)\n    }\n\n    fun merged(a: MutableMap&lt;String, Any&gt;, b: Any): Map&lt;String, Any&gt; {\n        return objectMapper\n            .readerForUpdating(a)\n            .readValue(toJson(b))\n    }\n\n    inline fun &lt;reified T&gt; toObject(s: String): T {\n        return objectMapper.readValue(s, object : TypeReference&lt;T&gt;() {})\n    }\n}\n</code></pre>\n<p><a href=\"https://seunggabi.tistory.com/entry/Jsoup-GET-POST-crawling\" rel=\"nofollow noreferrer\">https://seunggabi.tistory.com/entry/Jsoup-GET-POST-crawling</a></p>\n"}],"owner":{"account_id":1351676,"reputation":10551,"user_id":1291122,"accept_rate":50,"display_name":"rahulserver"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13753,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":27463433,"answer_count":4,"score":5,"last_activity_date":1662773028,"creation_date":1418500815,"question_id":27463036,"body_markdown":"I am trying to make this HTTP request via jsoup as given [here][1]:\r\n\r\n```\r\nhttp://api.decarta.com/v1/[KEY]/batch?requestType=geocode\r\n```\r\n\r\nAnd here is my code for that:\r\n\r\n```java\r\nString postUrl = postURLPrefix + apiKey + &quot;/batch?requestType=geocode&quot;;\r\nString response = Jsoup.connect(postUrl).timeout(60000).ignoreContentType(true)\r\n        .header(&quot;Content-Type&quot;, &quot;application/json;charset=UTF-8&quot;)\r\n        .method(Connection.Method.POST)\r\n        .data(&quot;payload&quot;, jsonPayload.toString())\r\n        .execute()\r\n        .body();\r\n```\r\n\r\n`jsonPayload.toString()` gives this:\r\n\r\n```\r\n{\r\n  &quot;payload&quot;: [\r\n    &quot;146 Adkins Street,Pretoria,Pretoria,Gauteng&quot;,\r\n    &quot;484 Hilda Street,Pretoria,Pretoria,Gauteng&quot;,\r\n    &quot;268 Von Willich Street,Centurion,Centurion,Gauteng&quot;,\r\n    ...\r\n  ]\r\n}\r\n```\r\n\r\nWhich is a perfectly valid JSON. \r\n\r\nHowever, jsoup each time returns HTTP status code *400* (malformed).  \r\nSo, how do I send proper HTTP *POST* with JSON payload using jsoup if this is possible at all? (Please note that it&#39;s **payload** and not an ordinary key-value pair in URL)\r\n\r\n  [1]: http://developer.decarta.com/Docs/REST/BatchRequests","title":"Jsoup HTTP POST with payload","body":"<p>I am trying to make this HTTP request via jsoup as given <a href=\"http://developer.decarta.com/Docs/REST/BatchRequests\" rel=\"nofollow noreferrer\">here</a>:</p>\n<pre><code>http://api.decarta.com/v1/[KEY]/batch?requestType=geocode\n</code></pre>\n<p>And here is my code for that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String postUrl = postURLPrefix + apiKey + &quot;/batch?requestType=geocode&quot;;\nString response = Jsoup.connect(postUrl).timeout(60000).ignoreContentType(true)\n        .header(&quot;Content-Type&quot;, &quot;application/json;charset=UTF-8&quot;)\n        .method(Connection.Method.POST)\n        .data(&quot;payload&quot;, jsonPayload.toString())\n        .execute()\n        .body();\n</code></pre>\n<p><code>jsonPayload.toString()</code> gives this:</p>\n<pre><code>{\n  &quot;payload&quot;: [\n    &quot;146 Adkins Street,Pretoria,Pretoria,Gauteng&quot;,\n    &quot;484 Hilda Street,Pretoria,Pretoria,Gauteng&quot;,\n    &quot;268 Von Willich Street,Centurion,Centurion,Gauteng&quot;,\n    ...\n  ]\n}\n</code></pre>\n<p>Which is a perfectly valid JSON.</p>\n<p>However, jsoup each time returns HTTP status code <em>400</em> (malformed).<br />\nSo, how do I send proper HTTP <em>POST</em> with JSON payload using jsoup if this is possible at all? (Please note that it's <strong>payload</strong> and not an ordinary key-value pair in URL)</p>\n"},{"tags":["java","unit-testing","junit"],"answers":[{"tags":[],"owner":{"account_id":12678426,"reputation":1029,"user_id":9213148,"display_name":"Pexers"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662767793,"creation_date":1662767793,"answer_id":73668413,"question_id":73668392,"body_markdown":"If you want to execute some common code before running a test, you can use the `@Before` method annotation in JUnit. For instance:\r\n\r\n    @Before\r\n    public void init() {\r\n        LOG.info(&quot;startup&quot;);\r\n        list = new ArrayList&lt;&gt;(Arrays.asList(&quot;test1&quot;, &quot;test2&quot;));\r\n    }\r\n\r\nThis code will always execute before any other test that you run. This is useful to define a certain order for execution to your tests.","title":"About unit-test dependency","body":"<p>If you want to execute some common code before running a test, you can use the <code>@Before</code> method annotation in JUnit. For instance:</p>\n<pre><code>@Before\npublic void init() {\n    LOG.info(&quot;startup&quot;);\n    list = new ArrayList&lt;&gt;(Arrays.asList(&quot;test1&quot;, &quot;test2&quot;));\n}\n</code></pre>\n<p>This code will always execute before any other test that you run. This is useful to define a certain order for execution to your tests.</p>\n"},{"tags":[],"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662770265,"creation_date":1662770265,"answer_id":73668557,"question_id":73668392,"body_markdown":"You should be creating a new instance of the class you are testing before each test.\r\n\r\nSo your test class will look like:\r\n```java\r\nclass MyTests {\r\n  private MyService myService;\r\n\r\n  @Before // junit 4, or @BeforeEach for junit 5\r\n  public void setup() {\r\n    myService = new MyService(... pass mocks of dependencies ...);\r\n  }\r\n\r\n  @Test\r\n  public void aTest() {\r\n    myService...\r\n  }\r\n\r\n  @Test\r\n  public void aTest2() {\r\n    myService... // this is a fresh instance of MyService, any changes to the\r\n                 // state of the instance used in aTest() are gone.\r\n  }\r\n}\r\n```","title":"About unit-test dependency","body":"<p>You should be creating a new instance of the class you are testing before each test.</p>\n<p>So your test class will look like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class MyTests {\n  private MyService myService;\n\n  @Before // junit 4, or @BeforeEach for junit 5\n  public void setup() {\n    myService = new MyService(... pass mocks of dependencies ...);\n  }\n\n  @Test\n  public void aTest() {\n    myService...\n  }\n\n  @Test\n  public void aTest2() {\n    myService... // this is a fresh instance of MyService, any changes to the\n                 // state of the instance used in aTest() are gone.\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":6721462,"reputation":67,"user_id":5181314,"display_name":"Delsh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73668557,"answer_count":2,"score":0,"last_activity_date":1662770265,"creation_date":1662767342,"question_id":73668392,"body_markdown":"I&#39;m trying to code some basic unit-tests for a project I am currently working on where I have my service that has a method `addPlaneModel` to add a plane model (under the hood it adds a `PlaneModel` instance into a `TreeMap` and throws a custom exception if the `TreeMap` already contains the key). \r\n\r\nI could write a test (for example `shouldAddNewPlane_Succeed`) to see if it&#39;s properly adding the `PlaneModel` but my problem comes if I wanted to create a test to see if the `PlaneModel` already existed (for example `shouldAddNewPlane_ThrowExistingModelException` because I should call `addPlaneModel` twice to make it throw the exception, but if `shouldAddNewPlane_Succeed` test doesn&#39;t run first, I don&#39;t really &#39;know&#39; if that method works as it should.\r\n\r\nI&#39;ve read that unit-tests should be independant from each other but I can&#39;t really grasp how to do it in this case, do I necessarily have to run them in order?","title":"About unit-test dependency","body":"<p>I'm trying to code some basic unit-tests for a project I am currently working on where I have my service that has a method <code>addPlaneModel</code> to add a plane model (under the hood it adds a <code>PlaneModel</code> instance into a <code>TreeMap</code> and throws a custom exception if the <code>TreeMap</code> already contains the key).</p>\n<p>I could write a test (for example <code>shouldAddNewPlane_Succeed</code>) to see if it's properly adding the <code>PlaneModel</code> but my problem comes if I wanted to create a test to see if the <code>PlaneModel</code> already existed (for example <code>shouldAddNewPlane_ThrowExistingModelException</code> because I should call <code>addPlaneModel</code> twice to make it throw the exception, but if <code>shouldAddNewPlane_Succeed</code> test doesn't run first, I don't really 'know' if that method works as it should.</p>\n<p>I've read that unit-tests should be independant from each other but I can't really grasp how to do it in this case, do I necessarily have to run them in order?</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1662769507,"post_id":73668500,"comment_id":130089913,"body_markdown":"Did you expect a `Foo` bean to somehow be injected into the call to `getGet`? Why? Did you mean for `Foo` to be an `@Autowired` field instead?","body":"Did you expect a <code>Foo</code> bean to somehow be injected into the call to <code>getGet</code>? Why? Did you mean for <code>Foo</code> to be an <code>@Autowired</code> field instead?"},{"owner":{"account_id":2644611,"reputation":233,"user_id":2287586,"display_name":"Renato"},"score":0,"creation_date":1662826002,"post_id":73668500,"comment_id":130098061,"body_markdown":"Yes, and the part of Foo bean being injected seems to be working. My goal is to have injected a request-scoped objects which is prepared based on the request headers. I have tried adding `@Autowired` annotation, but got the same result. Note the error specifically says `this.request` to be null, not `foo`.","body":"Yes, and the part of Foo bean being injected seems to be working. My goal is to have injected a request-scoped objects which is prepared based on the request headers. I have tried adding <code>@Autowired</code> annotation, but got the same result. Note the error specifically says <code>this.request</code> to be null, not <code>foo</code>."},{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1662826420,"post_id":73668500,"comment_id":130098150,"body_markdown":"Your method is a request handler. The Spring MVC layer does not perform injection or anything like that. What you’re getting there is probably an instance created implicitly for the body of the request (which I guess is empty). It’s not a bean and its fields will not be post processed for injection.","body":"Your method is a request handler. The Spring MVC layer does not perform injection or anything like that. What you’re getting there is probably an instance created implicitly for the body of the request (which I guess is empty). It’s not a bean and its fields will not be post processed for injection."}],"answers":[{"tags":[],"owner":{"account_id":9867592,"reputation":113,"user_id":7308512,"display_name":"Ocirederf"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1662769655,"creation_date":1662769655,"answer_id":73668522,"question_id":73668500,"body_markdown":"It doesn&#39;t work becuse it needs to be a Singleton bean and you have @RequestScope.\r\nMaybe try this:         \r\n\r\n    ((ServletRequestAttributes)RequestContextHolder.getRequestAttributes()).getRequest();","title":"NullPointer with @Autowire HttpServletRequest","body":"<p>It doesn't work becuse it needs to be a Singleton bean and you have @RequestScope.\nMaybe try this:</p>\n<pre><code>((ServletRequestAttributes)RequestContextHolder.getRequestAttributes()).getRequest();\n</code></pre>\n"}],"owner":{"account_id":2644611,"reputation":233,"user_id":2287586,"display_name":"Renato"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":661,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1662769655,"creation_date":1662769251,"question_id":73668500,"body_markdown":"I have the following code:\r\n\r\n```java\r\npackage com.example.helloworld;\r\n\r\nimport javax.servlet.http.HttpServletRequest;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.stereotype.Component;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\nimport org.springframework.web.context.annotation.RequestScope;\r\n\r\n@RestController\r\npublic class HelloWorldController {\r\n  @GetMapping(&quot;/&quot;)\r\n  public ResponseEntity&lt;String&gt; getGet(\r\n      @Autowired Foo foo) {\r\n\r\n    foo.sayHi();\r\n\r\n    return new ResponseEntity&lt;&gt;(&quot;OK&quot;, HttpStatus.OK);\r\n  }\r\n}\r\n\r\n@Component\r\n@RequestScope\r\nclass Foo {\r\n\r\n  private @Autowired HttpServletRequest request;\r\n\r\n  public void sayHi() {\r\n    var name = this.request.getHeader(&quot;x-user-name&quot;);\r\n    System.out.println(&quot;Hi &quot; + name);\r\n  }\r\n}\r\n\r\n```\r\n\r\nWhen I try to curl with `curl -H x-user-name:capybara http://localhost:8080`, the following error is produced:\r\n\r\n```\r\n2022-09-09 17:07:28.623 ERROR 26350 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot invoke &quot;javax.servlet.http.HttpServletRequest.getHeader(String)&quot; because &quot;this.request&quot; is null] with root cause\r\n\r\njava.lang.NullPointerException: Cannot invoke &quot;javax.servlet.http.HttpServletRequest.getHeader(String)&quot; because &quot;this.request&quot; is null\r\n        at com.example.helloworld.Foo.sayHi(HelloWorldController.java:32) ~[classes!/:0.0.1-SNAPSHOT]\r\n        at com.example.helloworld.HelloWorldController.getGet(HelloWorldController.java:19) ~[classes!/:0.0.1-SNAPSHOT]\r\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:577) ~[na:na]\r\n        at \r\n    ...\r\n\r\n```\r\n\r\nWhy is `this.request` `null`? Giving the popularity of https://stackoverflow.com/a/3324233/2287586, seems like this should work, what am I missing?","title":"NullPointer with @Autowire HttpServletRequest","body":"<p>I have the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.helloworld;\n\nimport javax.servlet.http.HttpServletRequest;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.web.context.annotation.RequestScope;\n\n@RestController\npublic class HelloWorldController {\n  @GetMapping(&quot;/&quot;)\n  public ResponseEntity&lt;String&gt; getGet(\n      @Autowired Foo foo) {\n\n    foo.sayHi();\n\n    return new ResponseEntity&lt;&gt;(&quot;OK&quot;, HttpStatus.OK);\n  }\n}\n\n@Component\n@RequestScope\nclass Foo {\n\n  private @Autowired HttpServletRequest request;\n\n  public void sayHi() {\n    var name = this.request.getHeader(&quot;x-user-name&quot;);\n    System.out.println(&quot;Hi &quot; + name);\n  }\n}\n\n</code></pre>\n<p>When I try to curl with <code>curl -H x-user-name:capybara http://localhost:8080</code>, the following error is produced:</p>\n<pre><code>2022-09-09 17:07:28.623 ERROR 26350 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot invoke &quot;javax.servlet.http.HttpServletRequest.getHeader(String)&quot; because &quot;this.request&quot; is null] with root cause\n\njava.lang.NullPointerException: Cannot invoke &quot;javax.servlet.http.HttpServletRequest.getHeader(String)&quot; because &quot;this.request&quot; is null\n        at com.example.helloworld.Foo.sayHi(HelloWorldController.java:32) ~[classes!/:0.0.1-SNAPSHOT]\n        at com.example.helloworld.HelloWorldController.getGet(HelloWorldController.java:19) ~[classes!/:0.0.1-SNAPSHOT]\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n        at java.base/java.lang.reflect.Method.invoke(Method.java:577) ~[na:na]\n        at \n    ...\n\n</code></pre>\n<p>Why is <code>this.request</code> <code>null</code>? Giving the popularity of <a href=\"https://stackoverflow.com/a/3324233/2287586\">https://stackoverflow.com/a/3324233/2287586</a>, seems like this should work, what am I missing?</p>\n"},{"tags":["java","android","post","okhttp"],"comments":[{"owner":{"account_id":25469650,"reputation":1,"user_id":19268072,"display_name":"kimhong toh"},"score":0,"creation_date":1660553681,"post_id":73358759,"comment_id":129551532,"body_markdown":"it&#39;s able to get POST response just using textview","body":"it&#39;s able to get POST response just using textview"}],"answers":[{"tags":[],"owner":{"account_id":10528158,"reputation":334,"user_id":7758485,"display_name":"DiLDoST"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662768930,"creation_date":1662768930,"answer_id":73668482,"question_id":73358759,"body_markdown":"It&#39;s easy to do with [Jsoup][1]:\r\n\r\n\t\t// CREATE CONNECTION\r\n\t\tConnection conn = Jsoup.connect(&quot;URL_GOES_HERE&quot;);\r\n\t\t\r\n\t\t// ADD POST/FORM DATA\r\n\t\tconn.data(&quot;KEY&quot;, &quot;VALUE&quot;);\r\n\t\t\r\n\t\t// SET METHOD AS POST \r\n\t\tconn.method(Connection.Method.POST);\r\n\t\t\r\n\t\t// ACCEPT RESPONDING CONTENT TYPE\r\n\t\tconn.ignoreContentType(true);\r\n\t\t\r\n\t\ttry\r\n\t\t{\r\n\t\t\t// GET RESPONSE\r\n\t\t\tString response = conn.execute().body();\r\n\t\t\t\r\n\t\t\t// USE RESPONSE HERE\r\n\t\t\t// CREATE JSON OBJECT OR ANYTHING...\r\n\t\t} catch(HttpStatusException e)\r\n\t\t{\r\n\t\t\tint status = e.getStatusCode();\r\n\t\t\t// HANDLE HTTP ERROR HERE\r\n\t\t} catch (IOException e)\r\n\t\t{\r\n\t\t\t// HANDLE IO ERRORS HERE\r\n\t\t}\r\n\r\n  [1]: https://github.com/jhy/jsoup","title":"How to POST get response information on alert dialog when clicking submit?","body":"<p>It's easy to do with <a href=\"https://github.com/jhy/jsoup\" rel=\"nofollow noreferrer\">Jsoup</a>:</p>\n<pre><code>    // CREATE CONNECTION\n    Connection conn = Jsoup.connect(&quot;URL_GOES_HERE&quot;);\n    \n    // ADD POST/FORM DATA\n    conn.data(&quot;KEY&quot;, &quot;VALUE&quot;);\n    \n    // SET METHOD AS POST \n    conn.method(Connection.Method.POST);\n    \n    // ACCEPT RESPONDING CONTENT TYPE\n    conn.ignoreContentType(true);\n    \n    try\n    {\n        // GET RESPONSE\n        String response = conn.execute().body();\n        \n        // USE RESPONSE HERE\n        // CREATE JSON OBJECT OR ANYTHING...\n    } catch(HttpStatusException e)\n    {\n        int status = e.getStatusCode();\n        // HANDLE HTTP ERROR HERE\n    } catch (IOException e)\n    {\n        // HANDLE IO ERRORS HERE\n    }\n</code></pre>\n"}],"owner":{"account_id":25469650,"reputation":1,"user_id":19268072,"display_name":"kimhong toh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73668482,"answer_count":1,"score":0,"last_activity_date":1662768930,"creation_date":1660553622,"question_id":73358759,"body_markdown":"I need help with this, I&#39;m stuck with alert dialog showing POST response.\r\n\r\nI&#39;m trying to POST get response from server, I need to get response when clicking submit (with alert dialog). Can anyone help? I&#39;m new to Java too, any advice or suggestion for my coding? \r\n\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        etUsername = findViewById(R.id.et_username);\r\n        etPassword = findViewById(R.id.et_password);\r\n        btSubmit = findViewById(R.id.bt_submit);\r\n        TextView mTextViewResult;\r\n        mTextViewResult = findViewById(R.id.text_view_result);\r\n\r\n        btSubmit.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n\r\n\r\n                if (etUsername.getText().toString().equals(&quot;admin&quot;) &amp;&amp;\r\n                etPassword.getText().toString().equals(&quot;admin&quot;)) {\r\n                    AlertDialog.Builder builder = new AlertDialog.Builder(\r\n                            MainActivity.this\r\n                    );\r\n\r\n\r\n                    OkHttpClient client = new OkHttpClient();\r\n\r\n                    RequestBody formBody = new FormBody.Builder()\r\n                            .add(&quot;id&quot;, &quot;2020136&quot;)\r\n                            .add(&quot;token&quot;, &quot;Yvj7CbE@B7qrv#Ny_MRPg+S_kqjFrNkcXEF=Faf7Q$*#YFrTHkr-Y=hqwNQEbcEfZ_ahB=u8v=9rh=nhVS#UA8ZH2v!kc9e$+My3VcK@7XyQ-pMs5Mr^*Dmj*RuEKux=&quot;)\r\n                            .build();\r\n\r\n                    Request request = new Request.Builder()\r\n                            .url(&quot;https://pltmuar.eschool.edu.my/app/findByStudentId.php&quot;)\r\n                            .post(formBody)\r\n                            .build();\r\n\r\n                    builder.setIcon(R.drawable.ic_check);\r\n                    builder.setTitle(&quot;Login Successful !&quot;);\r\n                    builder.setMessage(&quot;Welcome to Eschool System&quot;);\r\n\r\n  \r\n\r\n                    builder.setNegativeButton(&quot;YES&quot;, new DialogInterface.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(DialogInterface dialog, int which) {\r\n                            dialog.cancel();\r\n                        }\r\n                    });\r\n                    AlertDialog alertDialog = builder.create();\r\n                    alertDialog.show();\r\n                }else {\r\n                    Toast.makeText(getApplicationContext(),\r\n                             &quot;Invalid Username &amp; Password&quot;,Toast.LENGTH_SHORT).show();\r\n                }\r\n\r\n            }\r\n        });\r\n    }\r\n","title":"How to POST get response information on alert dialog when clicking submit?","body":"<p>I need help with this, I'm stuck with alert dialog showing POST response.</p>\n<p>I'm trying to POST get response from server, I need to get response when clicking submit (with alert dialog). Can anyone help? I'm new to Java too, any advice or suggestion for my coding?</p>\n<pre><code>protected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    etUsername = findViewById(R.id.et_username);\n    etPassword = findViewById(R.id.et_password);\n    btSubmit = findViewById(R.id.bt_submit);\n    TextView mTextViewResult;\n    mTextViewResult = findViewById(R.id.text_view_result);\n\n    btSubmit.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n\n\n\n            if (etUsername.getText().toString().equals(&quot;admin&quot;) &amp;&amp;\n            etPassword.getText().toString().equals(&quot;admin&quot;)) {\n                AlertDialog.Builder builder = new AlertDialog.Builder(\n                        MainActivity.this\n                );\n\n\n                OkHttpClient client = new OkHttpClient();\n\n                RequestBody formBody = new FormBody.Builder()\n                        .add(&quot;id&quot;, &quot;2020136&quot;)\n                        .add(&quot;token&quot;, &quot;Yvj7CbE@B7qrv#Ny_MRPg+S_kqjFrNkcXEF=Faf7Q$*#YFrTHkr-Y=hqwNQEbcEfZ_ahB=u8v=9rh=nhVS#UA8ZH2v!kc9e$+My3VcK@7XyQ-pMs5Mr^*Dmj*RuEKux=&quot;)\n                        .build();\n\n                Request request = new Request.Builder()\n                        .url(&quot;https://pltmuar.eschool.edu.my/app/findByStudentId.php&quot;)\n                        .post(formBody)\n                        .build();\n\n                builder.setIcon(R.drawable.ic_check);\n                builder.setTitle(&quot;Login Successful !&quot;);\n                builder.setMessage(&quot;Welcome to Eschool System&quot;);\n\n\n\n                builder.setNegativeButton(&quot;YES&quot;, new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialog, int which) {\n                        dialog.cancel();\n                    }\n                });\n                AlertDialog alertDialog = builder.create();\n                alertDialog.show();\n            }else {\n                Toast.makeText(getApplicationContext(),\n                         &quot;Invalid Username &amp; Password&quot;,Toast.LENGTH_SHORT).show();\n            }\n\n        }\n    });\n}\n</code></pre>\n"},{"tags":["java","spring","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":5959246,"reputation":880,"user_id":4684896,"display_name":"Hamid Ghasemi"},"score":0,"creation_date":1544256099,"post_id":53680574,"comment_id":94218632,"body_markdown":"The update will happen if the id has value (if the id is null, it means this is a new object). Therefore, why you don&#39;t remove objects which have id from the list?","body":"The update will happen if the id has value (if the id is null, it means this is a new object). Therefore, why you don&#39;t remove objects which have id from the list?"},{"owner":{"account_id":10481519,"reputation":181,"user_id":7726397,"display_name":"Sam"},"score":0,"creation_date":1544256623,"post_id":53680574,"comment_id":94218723,"body_markdown":"i think if we do so. the record will be duplicated and saved with different Id.","body":"i think if we do so. the record will be duplicated and saved with different Id."},{"owner":{"account_id":5959246,"reputation":880,"user_id":4684896,"display_name":"Hamid Ghasemi"},"score":0,"creation_date":1544257393,"post_id":53680574,"comment_id":94218852,"body_markdown":"Absolutely if you just make id to null, it will duplicate data. I said before calling the `save()` method, remove objects which contain id from the input list. If you add your code to question, I can explain it by code.","body":"Absolutely if you just make id to null, it will duplicate data. I said before calling the <code>save()</code> method, remove objects which contain id from the input list. If you add your code to question, I can explain it by code."},{"owner":{"account_id":5959246,"reputation":880,"user_id":4684896,"display_name":"Hamid Ghasemi"},"score":0,"creation_date":1544259696,"post_id":53680574,"comment_id":94219232,"body_markdown":"Possible duplicate of [Spring JPA repository: prevent update on save](https://stackoverflow.com/questions/35817584/spring-jpa-repository-prevent-update-on-save)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/35817584/spring-jpa-repository-prevent-update-on-save\">Spring JPA repository: prevent update on save</a>"},{"owner":{"account_id":10481519,"reputation":181,"user_id":7726397,"display_name":"Sam"},"score":0,"creation_date":1544261605,"post_id":53680574,"comment_id":94219610,"body_markdown":"@hamidghasemi i understood what you are saying how we can achieve that if we have our Id as the composite Key.","body":"@hamidghasemi i understood what you are saying how we can achieve that if we have our Id as the composite Key."}],"answers":[{"tags":[],"owner":{"account_id":13045395,"reputation":2899,"user_id":9427395,"display_name":"dasunse"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1559721226,"creation_date":1559721226,"answer_id":56456290,"question_id":53680574,"body_markdown":"Sometimes it may be the prescriptionId which you are trying to update is not found. The autogenerated prescriptionId which provides by jpa is smaller than prescriptionId which you are trying to update. So JPA create a new record with autogenerated prescriptionId instead of prescriptionId which you are trying to update.","title":"Only save not update using data JPA and CrudRepository","body":"<p>Sometimes it may be the prescriptionId which you are trying to update is not found. The autogenerated prescriptionId which provides by jpa is smaller than prescriptionId which you are trying to update. So JPA create a new record with autogenerated prescriptionId instead of prescriptionId which you are trying to update.</p>\n"},{"tags":[],"owner":{"account_id":4104486,"reputation":491,"user_id":3369001,"accept_rate":100,"display_name":"Vishal_Kotecha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586856301,"creation_date":1586856301,"answer_id":61204460,"question_id":53680574,"body_markdown":"This is a good question indeed. I wonder why there is no such facility in JPA repositories. Well, for now, what you can do is rely on `EntityManager` for this.\r\n\r\n    entityManager.persist(entityName);\r\n\r\nThis will assure that only save operation will happen. Based on the docs - if the entity already saved, it will throw an `EntityExistsException`. \r\n\r\nReference : https://docs.oracle.com/javaee/7/api/javax/persistence/EntityManager.html#persist-java.lang.Object-","title":"Only save not update using data JPA and CrudRepository","body":"<p>This is a good question indeed. I wonder why there is no such facility in JPA repositories. Well, for now, what you can do is rely on <code>EntityManager</code> for this.</p>\n\n<pre><code>entityManager.persist(entityName);\n</code></pre>\n\n<p>This will assure that only save operation will happen. Based on the docs - if the entity already saved, it will throw an <code>EntityExistsException</code>. </p>\n\n<p>Reference : <a href=\"https://docs.oracle.com/javaee/7/api/javax/persistence/EntityManager.html#persist-java.lang.Object-\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javaee/7/api/javax/persistence/EntityManager.html#persist-java.lang.Object-</a></p>\n"},{"tags":[],"owner":{"account_id":11698204,"reputation":31,"user_id":8564229,"display_name":"steven makunzva"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662767509,"creation_date":1662767509,"answer_id":73668400,"question_id":53680574,"body_markdown":"So how the JPA save() works is that if you first find the entity and perform some update to a field(s). When you pass that same entity back to the save method it will perform an update since the entity had a field or field(s) updated. Therefore if you want to only save without updating you need to create a new entity with the values you want then pass that to the save method. It will perform an insert provided you not violating unique value constraints for your columns","title":"Only save not update using data JPA and CrudRepository","body":"<p>So how the JPA save() works is that if you first find the entity and perform some update to a field(s). When you pass that same entity back to the save method it will perform an update since the entity had a field or field(s) updated. Therefore if you want to only save without updating you need to create a new entity with the values you want then pass that to the save method. It will perform an insert provided you not violating unique value constraints for your columns</p>\n"}],"owner":{"account_id":10481519,"reputation":181,"user_id":7726397,"display_name":"Sam"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3331,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1662767509,"creation_date":1544254900,"question_id":53680574,"body_markdown":"I have a situation in my application that i want to save new records. I am using Crudrepository save() method. As we all know what save() will do save if record is not there and update if its found. \r\n\r\nBut i want to restric the Update operation. Like if the record is already available neither update not save that record. \r\n\r\nLet say below is our Entity class which have composite key. and based on composite key we want to do this operation.\r\n\r\nEntity class\r\n\r\n    @Entity\r\n    @IdClass(PrescriptionKey.class)\r\n    public class Prescription implements Serializable{\r\n\r\n      @GeneratedValue(strategy=GenerationType.AUTO)\r\n\t  @Column(name=&quot;prescription_id&quot;)\r\n\t  private int prescriptionId;\r\n\t\r\n\t  @Id\r\n\t  @Column(name=&quot;dose_id&quot;)\r\n\t  private int doseId;\r\n\t\r\n\t  @Id\r\n\t  @Column(name=&quot;med_id&quot;)\r\n\t  private int medId;\r\n\r\n      //Setter Getters\r\n    }\r\n\r\nComposite key class\r\n\r\n     public class PrescriptionKey implements Serializable {\r\n\t\r\n      private int doseId;\r\n\r\n\t  private int medId;\r\n\r\n      //Setter Getter\r\n    }\r\n\r\nLet say every time the data which comes for save operation contains new data along with the old which was saved already. Now we want to perform only save for the new data.\r\n    ","title":"Only save not update using data JPA and CrudRepository","body":"<p>I have a situation in my application that i want to save new records. I am using Crudrepository save() method. As we all know what save() will do save if record is not there and update if its found. </p>\n\n<p>But i want to restric the Update operation. Like if the record is already available neither update not save that record. </p>\n\n<p>Let say below is our Entity class which have composite key. and based on composite key we want to do this operation.</p>\n\n<p>Entity class</p>\n\n<pre><code>@Entity\n@IdClass(PrescriptionKey.class)\npublic class Prescription implements Serializable{\n\n  @GeneratedValue(strategy=GenerationType.AUTO)\n  @Column(name=\"prescription_id\")\n  private int prescriptionId;\n\n  @Id\n  @Column(name=\"dose_id\")\n  private int doseId;\n\n  @Id\n  @Column(name=\"med_id\")\n  private int medId;\n\n  //Setter Getters\n}\n</code></pre>\n\n<p>Composite key class</p>\n\n<pre><code> public class PrescriptionKey implements Serializable {\n\n  private int doseId;\n\n  private int medId;\n\n  //Setter Getter\n}\n</code></pre>\n\n<p>Let say every time the data which comes for save operation contains new data along with the old which was saved already. Now we want to perform only save for the new data.</p>\n"},{"tags":["java","javafx-2"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1646287839,"post_id":71328159,"comment_id":126087203,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"answers":[{"tags":[],"owner":{"account_id":25186055,"reputation":31,"user_id":19026922,"display_name":"Lucas Rodriguez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662765255,"creation_date":1662765255,"answer_id":73668249,"question_id":71328159,"body_markdown":"I have looked all over the internet to figure out what the issue was as well. But, I managed to find a way to change the scene.\r\n\r\nInstead of using the setfill() method for the scene, use the node&#39;s setStyle() method (in this case BorderPane).\r\n\r\nFor example, if you use something like:\r\n\r\n    pane.setStyle(&quot;-fx-background-color: grey;&quot;);\r\nIt should set the color of the pane, which is inside the scene, to grey. The best part is that the command can be placed before or after setting the scene to work.\r\n\r\nHere is an image of one of my scenes after using the command to get a black background as an example:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Heb2s.png","title":"JavaFX Scene/background Color: How to Change?","body":"<p>I have looked all over the internet to figure out what the issue was as well. But, I managed to find a way to change the scene.</p>\n<p>Instead of using the setfill() method for the scene, use the node's setStyle() method (in this case BorderPane).</p>\n<p>For example, if you use something like:</p>\n<pre><code>pane.setStyle(&quot;-fx-background-color: grey;&quot;);\n</code></pre>\n<p>It should set the color of the pane, which is inside the scene, to grey. The best part is that the command can be placed before or after setting the scene to work.</p>\n<p>Here is an image of one of my scenes after using the command to get a black background as an example:\n<a href=\"https://i.stack.imgur.com/Heb2s.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Heb2s.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":24359002,"reputation":31,"user_id":18293668,"display_name":"user18293668"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5161,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1662765255,"creation_date":1646249139,"question_id":71328159,"body_markdown":"How do I change the background color of this scene?  what am I missing?  I tried the following:\r\n\r\nThis command actually resolves / has no error BUT it doesn&#39;t change the color.  \r\nscene.setFill(Color.GRAY);\r\n\r\nThis command also resolves / has no error but it also doesn&#39;t change the color.  \r\nScene scene = new Scene(pane, 250, 250, Color.GRAY);\r\n\r\nThank you for your response.\r\n\r\nCODE:  ===================================================\r\n...\r\n\r\n\timport javafx.application.Application;\r\n\timport javafx.geometry.Pos;\r\n\timport javafx.scene.Group;\r\n\timport javafx.scene.transform.Rotate;\r\n\timport javafx.stage.Stage;\r\n\timport javafx.scene.Scene;\r\n\timport javafx.scene.control.Label;\r\n\timport javafx.scene.layout.BorderPane;\r\n\timport javafx.scene.paint.Color;\r\n\timport java.util.Calendar;\r\n\timport java.util.GregorianCalendar;\r\n\timport javafx.scene.layout.Pane;\r\n\timport javafx.scene.shape.Circle;\r\n\timport javafx.scene.shape.Line;\r\n\timport javafx.scene.text.Text;\r\n\r\n\r\n\tpublic class DisplayResizableClock extends Application {\r\n\t\t@Override // Override the start method in the Application class\r\n\t\tpublic void start(Stage primaryStage) {\r\n\t\t\t// Create a clock and a label\r\n\t\t\tClockPane2 clock = new ClockPane2();\r\n\t\t\t//clock.setF;\r\n\r\n\t\t\tString timeString = clock.getHour() + &quot;:&quot; + clock.getMinute()\r\n\t\t\t\t\t+ &quot;:&quot; + clock.getSecond();\r\n\t\t\tLabel lblCurrentTime = new Label(timeString);\r\n\r\n\t\t\t// Place clock and label in border pane\r\n\t\t\tBorderPane pane = new BorderPane();\r\n\t\t\tpane.setCenter(clock);\r\n\t\t\tpane.setBottom(lblCurrentTime);\r\n\t\t\tBorderPane.setAlignment(lblCurrentTime, Pos.TOP_CENTER);\r\n\r\n\t\t\t// Create a scene and place the pane in the stage\r\n\t\t\tScene scene = new Scene(pane, 250, 250);\r\n\t\t\tscene.setFill(Color.GRAY);\r\n\t\t\tprimaryStage.setTitle(&quot;Display Resizable Clock&quot;); // Set the stage title===========\r\n\t\t\tprimaryStage.setScene(scene); // Place the scene in the stage\r\n\t\t\tprimaryStage.show(); // Display the stage\r\n\r\n\t\t\tpane.widthProperty().addListener(ov -&gt;\r\n\t\t\t\t\tclock.setWidth(pane.getWidth())\r\n\t\t\t);\r\n\r\n\t\t\tpane.heightProperty().addListener(ov -&gt;\r\n\t\t\t\t\tclock.setHeight(pane.getHeight())\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * The main method is only needed for the IDE with limited\r\n\t\t * JavaFX support. Not needed for running from the command line.\r\n\t\t */\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tlaunch(args);\r\n\t\t}\r\n\t}\r\n\r\n\t//=====================\r\n\r\n\tclass ClockPane2 extends Pane {\r\n\t\tprivate int hour;\r\n\t\tprivate int minute;\r\n\t\tprivate int second;\r\n\r\n\t\t/** Construct a default clock with the current time*/\r\n\t\tpublic ClockPane2() {\r\n\t\t\tsetCurrentTime();\r\n\t\t}\r\n\r\n\t\t/** Construct a clock with specified hour, minute, and second */\r\n\t\tpublic ClockPane2(int hour, int minute, int second) {\r\n\t\t\tthis.hour = hour;\r\n\t\t\tthis.minute = minute;\r\n\t\t\tthis.second = second;\r\n\t\t}\r\n\r\n\t\t/** Return hour */\r\n\t\tpublic int getHour() {\r\n\t\t\treturn hour;\r\n\t\t}\r\n\r\n\t\t/** Set a new hour */\r\n\t\tpublic void setHour(int hour) {\r\n\t\t\tthis.hour = hour;\r\n\t\t\tpaintClock();\r\n\t\t}\r\n\r\n\t\t/** Return minute */\r\n\t\tpublic int getMinute() {\r\n\t\t\treturn minute;\r\n\t\t}\r\n\r\n\t\t/** Set a new minute */\r\n\t\tpublic void setMinute(int minute) {\r\n\t\t\tthis.minute = minute;\r\n\t\t\tpaintClock();\r\n\t\t}\r\n\r\n\t\t/** Return second */\r\n\t\tpublic int getSecond() {\r\n\t\t\treturn second;\r\n\t\t}\r\n\r\n\t\t/** Set a new second */\r\n\t\tpublic void setSecond(int second) {\r\n\t\t\tthis.second = second;\r\n\t\t\tpaintClock();\r\n\t\t}\r\n\r\n\t\t/* Set the current time for the clock */\r\n\t\tpublic void setCurrentTime() {\r\n\t\t\t// Construct a calendar for the current date and time\r\n\t\t\tCalendar calendar = new GregorianCalendar();\r\n\r\n\t\t\t// Set current hour, minute and second\r\n\t\t\tthis.hour = calendar.get(Calendar.HOUR_OF_DAY);\r\n\t\t\tthis.minute = calendar.get(Calendar.MINUTE);\r\n\t\t\tthis.second = calendar.get(Calendar.SECOND);\r\n\r\n\t\t\tpaintClock(); // Repaint the clock\r\n\t\t}\r\n\r\n\t\t/** Paint the clock */\r\n\t\tprivate void paintClock() {\r\n\t\t\t// Initialize clock parameters\r\n\t\t\tdouble clockRadius =\r\n\t\t\t\t\tMath.min(getWidth(), getHeight()) * 0.8 * 0.5;\r\n\t\t\tdouble centerX = getWidth() / 2;\r\n\t\t\tdouble centerY = getHeight() / 2;\r\n\r\n\t\t\t// Draw circle\r\n\t\t\tCircle circle = new Circle(centerX, centerY, clockRadius);\r\n\t\t\tcircle.setFill(Color.YELLOW);  //=====changed color==============\r\n\t\t\tcircle.setStroke(Color.BLACK);\r\n\t\t\tText t1 = new Text(centerX - 5, centerY - clockRadius + 12, &quot;12&quot;);\r\n\t\t\tText t2 = new Text(centerX - clockRadius + 3, centerY + 5, &quot;9&quot;);\r\n\t\t\tText t3 = new Text(centerX + clockRadius - 10, centerY + 3, &quot;3&quot;);\r\n\t\t\tText t4 = new Text(centerX - 3, centerY + clockRadius - 3, &quot;6&quot;);\r\n\r\n\t\t\t// Draw second hand\r\n\t\t\tdouble sLength = clockRadius * 0.8;\r\n\t\t\tdouble secondX = centerX + sLength *\r\n\t\t\t\t\tMath.sin(second * (2 * Math.PI / 60));\r\n\t\t\tdouble secondY = centerY - sLength *\r\n\t\t\t\t\tMath.cos(second * (2 * Math.PI / 60));\r\n\t\t\tLine sLine = new Line(centerX, centerY, secondX, secondY);\r\n\t\t\tsLine.setStroke(Color.RED);\r\n\r\n\t\t\t// Draw minute hand\r\n\t\t\tdouble mLength = clockRadius * 0.65;\r\n\t\t\tdouble xMinute = centerX + mLength *\r\n\t\t\t\t\tMath.sin(minute * (2 * Math.PI / 60));\r\n\t\t\tdouble minuteY = centerY - mLength *\r\n\t\t\t\t\tMath.cos(minute * (2 * Math.PI / 60));\r\n\t\t\tLine mLine = new Line(centerX, centerY, xMinute, minuteY);\r\n\t\t\tmLine.setStroke(Color.BROWN); //changed color to brown======================\r\n\r\n\t\t\t// Draw hour hand\r\n\t\t\tdouble hLength = clockRadius * 0.5;\r\n\t\t\tdouble hourX = centerX + hLength *\r\n\t\t\t\t\tMath.sin((hour % 12 + minute / 60.0) * (2 * Math.PI / 12));\r\n\t\t\tdouble hourY = centerY - hLength *\r\n\t\t\t\t\tMath.cos((hour % 12 + minute / 60.0) * (2 * Math.PI / 12));\r\n\t\t\tLine hLine = new Line(centerX, centerY, hourX, hourY);\r\n\t\t\thLine.setStroke(Color.GREEN);\r\n\r\n\t\t\tgetChildren().clear(); // Clear the pane\r\n\t\t\tgetChildren().addAll(circle, t1, t2, t3, t4, sLine, mLine, hLine);\r\n\r\n\t\t\tGroup ticks = new Group();//create tick hands============================\r\n\t\t\tGroup numbers = new Group(); //create numbers==========================\r\n\r\n\t\t\t// creating the big ticks (12)===============================\r\n\r\n\t\t\tfor (int i = 0; i &lt; 12; i++) {\r\n\t\t\t\t/*creating a line with a width of 10 and placing at &#39;clockRadius&#39;\r\n\t\t\t\t distance away from center*/\r\n\t\t\t\tLine tick = new Line(0, clockRadius, 0, clockRadius - 10);\r\n\t\t\t\ttick.setTranslateX(centerX);\r\n\t\t\t\ttick.setTranslateY(centerY);\r\n\t\t\t\t//applying proper rotation to rotate the tick\r\n\t\t\t\ttick.getTransforms().add(new Rotate(i * (360 / 12)));\r\n\t\t\t\t//adding to ticks group\r\n\t\t\t\tticks.getChildren().add(tick);\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// creating the small ticks=========================================\r\n\r\n\t\t\tfor (int i = 0; i &lt; 60; i++) {\r\n\t\t\t\t//lines will have a width of 5\r\n\t\t\t\tLine tick = new Line(0, clockRadius, 0, clockRadius - 5);\r\n\t\t\t\ttick.setTranslateX(centerX);\r\n\t\t\t\ttick.setTranslateY(centerY);\r\n\t\t\t\ttick.getTransforms().add(new Rotate(i * (360 / 60)));\r\n\t\t\t\tticks.getChildren().add(tick);\r\n\t\t\t}\r\n\r\n\t\t\t// creating the numbers==================================================\r\n\r\n\t\t\tint num = 12; // starting with 12\r\n\t\t\tfor (int i = 0; i &lt; 12; i++) {\r\n\t\t\t\t//finding proper position x and y by applying the equation\r\n\t\t\t\tdouble x = centerX + (clockRadius - 20) * Math.sin((i % 12) * (2 * Math.PI / 12));\r\n\t\t\t\tdouble y = centerY - (clockRadius - 20) * Math.cos((i % 12) * (2 * Math.PI / 12));\r\n\t\t\t\t//defining a text with hour label, (x-5 and y+5 are used to align text\r\n\t\t\t\t//in proper position, considering font height &amp; width)\r\n\t\t\t\tText t = new Text(x - 5, y + 5, &quot;&quot; + num);\r\n\t\t\t\tnumbers.getChildren().add(t);\r\n\t\t\t\tnum++;\r\n\t\t\t\tif (num &gt; 12) {\r\n\t\t\t\t\tnum = 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// adding ticks and numbers======================\r\n\t\t\tgetChildren().add(ticks);\r\n\t\t\tgetChildren().add(numbers);\r\n\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void setWidth(double width) {\r\n\t\t\tsuper.setWidth(width);\r\n\t\t\tpaintClock();\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void setHeight(double height) {\r\n\t\t\tsuper.setHeight(height);\r\n\t\t\tpaintClock();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n...\r\n\r\n    ","title":"JavaFX Scene/background Color: How to Change?","body":"<p>How do I change the background color of this scene?  what am I missing?  I tried the following:</p>\n<p>This command actually resolves / has no error BUT it doesn't change the color.<br />\nscene.setFill(Color.GRAY);</p>\n<p>This command also resolves / has no error but it also doesn't change the color.<br />\nScene scene = new Scene(pane, 250, 250, Color.GRAY);</p>\n<p>Thank you for your response.</p>\n<p>CODE:  ===================================================\n...</p>\n<pre><code>import javafx.application.Application;\nimport javafx.geometry.Pos;\nimport javafx.scene.Group;\nimport javafx.scene.transform.Rotate;\nimport javafx.stage.Stage;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Label;\nimport javafx.scene.layout.BorderPane;\nimport javafx.scene.paint.Color;\nimport java.util.Calendar;\nimport java.util.GregorianCalendar;\nimport javafx.scene.layout.Pane;\nimport javafx.scene.shape.Circle;\nimport javafx.scene.shape.Line;\nimport javafx.scene.text.Text;\n\n\npublic class DisplayResizableClock extends Application {\n    @Override // Override the start method in the Application class\n    public void start(Stage primaryStage) {\n        // Create a clock and a label\n        ClockPane2 clock = new ClockPane2();\n        //clock.setF;\n\n        String timeString = clock.getHour() + &quot;:&quot; + clock.getMinute()\n                + &quot;:&quot; + clock.getSecond();\n        Label lblCurrentTime = new Label(timeString);\n\n        // Place clock and label in border pane\n        BorderPane pane = new BorderPane();\n        pane.setCenter(clock);\n        pane.setBottom(lblCurrentTime);\n        BorderPane.setAlignment(lblCurrentTime, Pos.TOP_CENTER);\n\n        // Create a scene and place the pane in the stage\n        Scene scene = new Scene(pane, 250, 250);\n        scene.setFill(Color.GRAY);\n        primaryStage.setTitle(&quot;Display Resizable Clock&quot;); // Set the stage title===========\n        primaryStage.setScene(scene); // Place the scene in the stage\n        primaryStage.show(); // Display the stage\n\n        pane.widthProperty().addListener(ov -&gt;\n                clock.setWidth(pane.getWidth())\n        );\n\n        pane.heightProperty().addListener(ov -&gt;\n                clock.setHeight(pane.getHeight())\n        );\n    }\n\n    /**\n     * The main method is only needed for the IDE with limited\n     * JavaFX support. Not needed for running from the command line.\n     */\n    public static void main(String[] args) {\n        launch(args);\n    }\n}\n\n//=====================\n\nclass ClockPane2 extends Pane {\n    private int hour;\n    private int minute;\n    private int second;\n\n    /** Construct a default clock with the current time*/\n    public ClockPane2() {\n        setCurrentTime();\n    }\n\n    /** Construct a clock with specified hour, minute, and second */\n    public ClockPane2(int hour, int minute, int second) {\n        this.hour = hour;\n        this.minute = minute;\n        this.second = second;\n    }\n\n    /** Return hour */\n    public int getHour() {\n        return hour;\n    }\n\n    /** Set a new hour */\n    public void setHour(int hour) {\n        this.hour = hour;\n        paintClock();\n    }\n\n    /** Return minute */\n    public int getMinute() {\n        return minute;\n    }\n\n    /** Set a new minute */\n    public void setMinute(int minute) {\n        this.minute = minute;\n        paintClock();\n    }\n\n    /** Return second */\n    public int getSecond() {\n        return second;\n    }\n\n    /** Set a new second */\n    public void setSecond(int second) {\n        this.second = second;\n        paintClock();\n    }\n\n    /* Set the current time for the clock */\n    public void setCurrentTime() {\n        // Construct a calendar for the current date and time\n        Calendar calendar = new GregorianCalendar();\n\n        // Set current hour, minute and second\n        this.hour = calendar.get(Calendar.HOUR_OF_DAY);\n        this.minute = calendar.get(Calendar.MINUTE);\n        this.second = calendar.get(Calendar.SECOND);\n\n        paintClock(); // Repaint the clock\n    }\n\n    /** Paint the clock */\n    private void paintClock() {\n        // Initialize clock parameters\n        double clockRadius =\n                Math.min(getWidth(), getHeight()) * 0.8 * 0.5;\n        double centerX = getWidth() / 2;\n        double centerY = getHeight() / 2;\n\n        // Draw circle\n        Circle circle = new Circle(centerX, centerY, clockRadius);\n        circle.setFill(Color.YELLOW);  //=====changed color==============\n        circle.setStroke(Color.BLACK);\n        Text t1 = new Text(centerX - 5, centerY - clockRadius + 12, &quot;12&quot;);\n        Text t2 = new Text(centerX - clockRadius + 3, centerY + 5, &quot;9&quot;);\n        Text t3 = new Text(centerX + clockRadius - 10, centerY + 3, &quot;3&quot;);\n        Text t4 = new Text(centerX - 3, centerY + clockRadius - 3, &quot;6&quot;);\n\n        // Draw second hand\n        double sLength = clockRadius * 0.8;\n        double secondX = centerX + sLength *\n                Math.sin(second * (2 * Math.PI / 60));\n        double secondY = centerY - sLength *\n                Math.cos(second * (2 * Math.PI / 60));\n        Line sLine = new Line(centerX, centerY, secondX, secondY);\n        sLine.setStroke(Color.RED);\n\n        // Draw minute hand\n        double mLength = clockRadius * 0.65;\n        double xMinute = centerX + mLength *\n                Math.sin(minute * (2 * Math.PI / 60));\n        double minuteY = centerY - mLength *\n                Math.cos(minute * (2 * Math.PI / 60));\n        Line mLine = new Line(centerX, centerY, xMinute, minuteY);\n        mLine.setStroke(Color.BROWN); //changed color to brown======================\n\n        // Draw hour hand\n        double hLength = clockRadius * 0.5;\n        double hourX = centerX + hLength *\n                Math.sin((hour % 12 + minute / 60.0) * (2 * Math.PI / 12));\n        double hourY = centerY - hLength *\n                Math.cos((hour % 12 + minute / 60.0) * (2 * Math.PI / 12));\n        Line hLine = new Line(centerX, centerY, hourX, hourY);\n        hLine.setStroke(Color.GREEN);\n\n        getChildren().clear(); // Clear the pane\n        getChildren().addAll(circle, t1, t2, t3, t4, sLine, mLine, hLine);\n\n        Group ticks = new Group();//create tick hands============================\n        Group numbers = new Group(); //create numbers==========================\n\n        // creating the big ticks (12)===============================\n\n        for (int i = 0; i &lt; 12; i++) {\n            /*creating a line with a width of 10 and placing at 'clockRadius'\n             distance away from center*/\n            Line tick = new Line(0, clockRadius, 0, clockRadius - 10);\n            tick.setTranslateX(centerX);\n            tick.setTranslateY(centerY);\n            //applying proper rotation to rotate the tick\n            tick.getTransforms().add(new Rotate(i * (360 / 12)));\n            //adding to ticks group\n            ticks.getChildren().add(tick);\n\n        }\n\n        // creating the small ticks=========================================\n\n        for (int i = 0; i &lt; 60; i++) {\n            //lines will have a width of 5\n            Line tick = new Line(0, clockRadius, 0, clockRadius - 5);\n            tick.setTranslateX(centerX);\n            tick.setTranslateY(centerY);\n            tick.getTransforms().add(new Rotate(i * (360 / 60)));\n            ticks.getChildren().add(tick);\n        }\n\n        // creating the numbers==================================================\n\n        int num = 12; // starting with 12\n        for (int i = 0; i &lt; 12; i++) {\n            //finding proper position x and y by applying the equation\n            double x = centerX + (clockRadius - 20) * Math.sin((i % 12) * (2 * Math.PI / 12));\n            double y = centerY - (clockRadius - 20) * Math.cos((i % 12) * (2 * Math.PI / 12));\n            //defining a text with hour label, (x-5 and y+5 are used to align text\n            //in proper position, considering font height &amp; width)\n            Text t = new Text(x - 5, y + 5, &quot;&quot; + num);\n            numbers.getChildren().add(t);\n            num++;\n            if (num &gt; 12) {\n                num = 1;\n            }\n\n        }\n\n        // adding ticks and numbers======================\n        getChildren().add(ticks);\n        getChildren().add(numbers);\n\n    }\n\n    @Override\n    public void setWidth(double width) {\n        super.setWidth(width);\n        paintClock();\n    }\n\n    @Override\n    public void setHeight(double height) {\n        super.setHeight(height);\n        paintClock();\n    }\n}\n</code></pre>\n<p>...</p>\n"},{"tags":["java","unit-testing","mocking","mockito"],"answers":[{"tags":[],"owner":{"account_id":7514288,"reputation":3758,"user_id":5708266,"display_name":"Konstantin Labun"},"down_vote_count":2,"up_vote_count":64,"is_accepted":true,"score":62,"last_activity_date":1662762467,"creation_date":1472447930,"answer_id":39198934,"question_id":39198848,"body_markdown":"The first issue is that you have to use spyTemp object to expect something from Mockito. Here it is not the same as test. `spyTemp` is wrapped by the Mockito object `temp`. \r\n\r\nAnother issue is that you stub only `methodB()`, but you are trying to run `methodA()`. Yes in your implementation of `methodA()` you call methodB(), but you call `this.methodB()`, not `spyTemp.methodB()`.\r\nHere you have to understand that mocking would work only when you call it on the instance of `temp`. It&#39;s wrapped by a Mockito proxy which catches your call, and if you have overriden some method, it will call your new implementation instead of the original one. But since the original method is called, inside it you know nothing about Mockito proxy. So your &quot;overriden&quot; method would be called only when you run `spyTemp.methodB()`\r\n\r\nThis should work:\r\n\r\n    Mockito.doReturn(true).when(spyTemp).methodB(Mockito.any()); \r\n    boolean status = spyTemp.methodA(&quot;XYZ&quot;);","title":"mock methods in same class","body":"<p>The first issue is that you have to use spyTemp object to expect something from Mockito. Here it is not the same as test. <code>spyTemp</code> is wrapped by the Mockito object <code>temp</code>.</p>\n<p>Another issue is that you stub only <code>methodB()</code>, but you are trying to run <code>methodA()</code>. Yes in your implementation of <code>methodA()</code> you call methodB(), but you call <code>this.methodB()</code>, not <code>spyTemp.methodB()</code>.\nHere you have to understand that mocking would work only when you call it on the instance of <code>temp</code>. It's wrapped by a Mockito proxy which catches your call, and if you have overriden some method, it will call your new implementation instead of the original one. But since the original method is called, inside it you know nothing about Mockito proxy. So your &quot;overriden&quot; method would be called only when you run <code>spyTemp.methodB()</code></p>\n<p>This should work:</p>\n<pre><code>Mockito.doReturn(true).when(spyTemp).methodB(Mockito.any()); \nboolean status = spyTemp.methodA(&quot;XYZ&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5688520,"reputation":7765,"user_id":4497253,"display_name":"CoronA"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1472448430,"creation_date":1472448430,"answer_id":39199015,"question_id":39198848,"body_markdown":"You created a spy and mocked `methodB()`. That is correct! But you called `methodA()` on the original object. To get the correct result call it on the spy\r\n\r\n    boolean status = spyTemp.methodA(&quot;XYZ&quot;);","title":"mock methods in same class","body":"<p>You created a spy and mocked <code>methodB()</code>. That is correct! But you called <code>methodA()</code> on the original object. To get the correct result call it on the spy</p>\n\n<pre><code>boolean status = spyTemp.methodA(\"XYZ\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4563475,"reputation":27298,"user_id":3705127,"accept_rate":52,"display_name":"sprinter"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1472448440,"creation_date":1472448440,"answer_id":39199018,"question_id":39198848,"body_markdown":"Note the following from Mockito documentation:\r\n\r\n&gt; Mockito *does not* delegate calls to the passed real instance, instead\r\n&gt; it actually creates a copy of it. So if you keep the real instance and\r\n&gt; interact with it, don&#39;t expect the spied to be aware of those\r\n&gt; interaction and their effect on real instance state. The corollary is\r\n&gt; that when an *unstubbed* method is called *on the spy* but *not on the\r\n&gt; real instance*, you won&#39;t see any effects on the real instance.\r\n\r\nThis is referring specifically to your situation. You keep a reference to `temp` and then call its `methodA`. Mockito is not spying on that instance at all; it&#39;s spying on `spyTemp`. So the normal `methodB` is called.\r\n\r\nNote that you should avoid partial mocks altogether for new code.","title":"mock methods in same class","body":"<p>Note the following from Mockito documentation:</p>\n\n<blockquote>\n  <p>Mockito <em>does not</em> delegate calls to the passed real instance, instead\n  it actually creates a copy of it. So if you keep the real instance and\n  interact with it, don't expect the spied to be aware of those\n  interaction and their effect on real instance state. The corollary is\n  that when an <em>unstubbed</em> method is called <em>on the spy</em> but <em>not on the\n  real instance</em>, you won't see any effects on the real instance.</p>\n</blockquote>\n\n<p>This is referring specifically to your situation. You keep a reference to <code>temp</code> and then call its <code>methodA</code>. Mockito is not spying on that instance at all; it's spying on <code>spyTemp</code>. So the normal <code>methodB</code> is called.</p>\n\n<p>Note that you should avoid partial mocks altogether for new code.</p>\n"}],"owner":{"account_id":5082635,"reputation":2140,"user_id":4078249,"accept_rate":59,"display_name":"alwaysAStudent"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":113392,"favorite_count":0,"down_vote_count":0,"up_vote_count":58,"accepted_answer_id":39198934,"answer_count":3,"score":58,"last_activity_date":1662762467,"creation_date":1472447428,"question_id":39198848,"body_markdown":"I am using Mockito to mock a method in the same class for which I am writing test. I have seen other answers on SO ([Mocking method in the same class][1]), but probably I am misunderstanding them, since I running into issues.\r\n\r\n     class Temp() {\r\n\r\n        public boolean methodA(String param) {\r\n\r\n             try {\r\n\r\n                 if(methodB(param))\r\n                       return true;\r\n\r\n                 return false;\r\n             } catch (Exception e) {\r\n                   e.printStackTrace();\r\n             }\r\n        }\r\n     }\r\n\r\n\r\nMy Test method:\r\n\r\n     @Test\r\n     public void testMethodA() {\r\n\r\n        Temp temp = new Temp();\r\n        Temp spyTemp = Mockito.spy(temp);\r\n\r\n        Mockito.doReturn(true).when(spyTemp).methodB(Mockito.any()); \r\n        boolean status = temp.methodA(&quot;XYZ&quot;);\r\n\r\n        Assert.assertEquals(true, status);\r\n     }\r\n\r\nI however get the expection printed out because definition of methodB gets executed.\r\nMy understanding is definition of methodB would get mocked by using spyTemp. However that does not appear to be the case.\r\n\r\nCan someone please explain where I am going wrong?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/23958611/how-to-mock-another-method-in-the-same-class-which-is-being-tested","title":"mock methods in same class","body":"<p>I am using Mockito to mock a method in the same class for which I am writing test. I have seen other answers on SO (<a href=\"https://stackoverflow.com/questions/23958611/how-to-mock-another-method-in-the-same-class-which-is-being-tested\">Mocking method in the same class</a>), but probably I am misunderstanding them, since I running into issues.</p>\n\n<pre><code> class Temp() {\n\n    public boolean methodA(String param) {\n\n         try {\n\n             if(methodB(param))\n                   return true;\n\n             return false;\n         } catch (Exception e) {\n               e.printStackTrace();\n         }\n    }\n }\n</code></pre>\n\n<p>My Test method:</p>\n\n<pre><code> @Test\n public void testMethodA() {\n\n    Temp temp = new Temp();\n    Temp spyTemp = Mockito.spy(temp);\n\n    Mockito.doReturn(true).when(spyTemp).methodB(Mockito.any()); \n    boolean status = temp.methodA(\"XYZ\");\n\n    Assert.assertEquals(true, status);\n }\n</code></pre>\n\n<p>I however get the expection printed out because definition of methodB gets executed.\nMy understanding is definition of methodB would get mocked by using spyTemp. However that does not appear to be the case.</p>\n\n<p>Can someone please explain where I am going wrong?</p>\n"},{"tags":["java","elasticsearch","memory-leaks","garbage-collection"],"answers":[{"tags":[],"owner":{"account_id":5028364,"reputation":31224,"user_id":4039431,"accept_rate":94,"display_name":"Amit"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1662761798,"creation_date":1603698563,"answer_id":64533177,"question_id":64533043,"body_markdown":"**search thread_pool has an associated queue on which search worker threads work on and its default capacity is 1000(note its per node)** which is consumed in your case, please refer [thread_pools][1] in ES for more info.\r\n\r\nNow, queue capacity can be exhausted due to one of the below reasons:\r\n\r\n 1. High search requests rate on your ES node, which your node might not be able to keep up with.\r\n 2. Some slow queries which are taking a lot more time to process, and causing other requests to wait in the search queue, and ultimately leading to rejection.\r\n 3. Your nodes and shards are not properly balanced in your cluster, this can cause few nodes to receive a high number of search queries.\r\n\r\nYou should look at the **search slow-logs** to filter the costly queries during the issue.\r\n\r\nAnd if its legitimate increase in search traffic, you should scale your cluster to handle more search requests.\r\n\r\n**Regarding young heap logs, if it&#39;s not taking more time and under 50-70ms its not that bigger concern, and you should focus on fixing the search rejection issue which might solve or lower the heap issue and in any case you should have Max heap size lower than 32 GB for better performance.**\r\n\r\n\r\n  [1]: https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-threadpool.html\r\n","title":"Rejections from search thread_pool Elasticsearch","body":"<p><strong>search thread_pool has an associated queue on which search worker threads work on and its default capacity is 1000(note its per node)</strong> which is consumed in your case, please refer <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-threadpool.html\" rel=\"nofollow noreferrer\">thread_pools</a> in ES for more info.</p>\n<p>Now, queue capacity can be exhausted due to one of the below reasons:</p>\n<ol>\n<li>High search requests rate on your ES node, which your node might not be able to keep up with.</li>\n<li>Some slow queries which are taking a lot more time to process, and causing other requests to wait in the search queue, and ultimately leading to rejection.</li>\n<li>Your nodes and shards are not properly balanced in your cluster, this can cause few nodes to receive a high number of search queries.</li>\n</ol>\n<p>You should look at the <strong>search slow-logs</strong> to filter the costly queries during the issue.</p>\n<p>And if its legitimate increase in search traffic, you should scale your cluster to handle more search requests.</p>\n<p><strong>Regarding young heap logs, if it's not taking more time and under 50-70ms its not that bigger concern, and you should focus on fixing the search rejection issue which might solve or lower the heap issue and in any case you should have Max heap size lower than 32 GB for better performance.</strong></p>\n"}],"owner":{"account_id":2271696,"reputation":374,"user_id":1998915,"accept_rate":44,"display_name":"Amar C"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3848,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":64533177,"answer_count":1,"score":2,"last_activity_date":1662761798,"creation_date":1603697854,"question_id":64533043,"body_markdown":"I have a elasticsearch cluster with 6 nodes. The heapsize is set as 50GB.(I know less than 32 is what is recommended but this was already set to 50Gb for some reason which I don&#39;t know). Now I am seeing a lot of rejections from search thread_pool.\r\n\r\n```log\r\n[2020-10-26T12:50:32,730][DEBUG][o.e.a.s.TransportSearchAction] [IDC.node1.com] [indice_1][3], node[M4pYcHhzSTIj5NXA], [P], s[STARTED], a[id=IAQaCGTCTA-CkKGPw]: Failed to execute [SearchRequest{searchType=QUERY_THEN_FETCH, indices=[indice_1], indicesOptions=IndicesOptions[ignore_unavailable=false, allow_no_indices=true, expand_wildcards_open=true, expand_wildcards_closed=false, allow_aliases_to_multiple_indices=true, forbid_closed_indices=true, ignore_aliases=false, ignore_throttled=true], types=[_doc], routing=&#39;null&#39;, preference=&#39;null&#39;, requestCache=null, scroll=null, maxConcurrentShardRequests=0, batchedReduceSize=512, preFilterShardSize=128, allowPartialSearchResults=true, localClusterAlias=null, getOrCreateAbsoluteStartMillis=-1, ccsMinimizeRoundtrips=true, lastShard [true]\r\norg.elasticsearch.transport.RemoteTransportException: [IDC.node1.com][node1:9300][indices:data/read/search[phase/query]]\r\nCaused by: org.elasticsearch.common.util.concurrent.EsRejectedExecutionException: rejected execution of org.elasticsearch.common.util.concurrent.TimedRunnable@21060fcc on QueueResizingEsThreadPoolExecutor[name = IDC.node1.com/search, queue capacity = 1000, min queue capacity = 1000, max queue capacity = 1000, frame size = 2000, targeted response rate = 1s, task execution EWMA = 5.2s, adjustment amount = 50, org.elasticsearch.common.util.concurrent.QueueResizingEsThreadPoolExecutor@3c46a309[Running, pool size = 49, active threads = 49, queued tasks = 1063, completed tasks = 1693218669]]\r\n        at org.elasticsearch.common.util.concurrent.EsAbortPolicy.rejectedExecution(EsAbortPolicy.java:48) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:825) ~[?:?]\r\n        at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1355) ~[?:?]\r\n        at org.elasticsearch.common.util.concurrent.EsThreadPoolExecutor.execute(EsThreadPoolExecutor.java:84) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.search.SearchService.lambda$rewriteShardRequest$8(SearchService.java:1043) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.index.shard.IndexShard.awaitShardSearchActive(IndexShard.java:3247) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.search.SearchService.lambda$rewriteShardRequest$9(SearchService.java:1043) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:62) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.index.query.Rewriteable.rewriteAndFetch(Rewriteable.java:114) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.index.query.Rewriteable.rewriteAndFetch(Rewriteable.java:87) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.search.SearchService.rewriteShardRequest(SearchService.java:1048) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:340) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.action.search.SearchTransportService.lambda$registerRequestHandler$6(SearchTransportService.java:335) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.xpack.security.transport.SecurityServerTransportInterceptor$ProfileSecuredRequestHandler$1.doRun(SecurityServerTransportInterceptor.java:257) ~[?:?]\r\n        at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.xpack.security.transport.SecurityServerTransportInterceptor$ProfileSecuredRequestHandler.messageReceived(SecurityServerTransportInterceptor.java:315) ~[?:?]\r\n        at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:63) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.transport.InboundHandler$RequestHandler.doRun(InboundHandler.java:264) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.common.util.concurrent.EsExecutors$DirectExecutorService.execute(EsExecutors.java:225) ~[elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.transport.InboundHandler.handleRequest(InboundHandler.java:185) [elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.transport.InboundHandler.messageReceived(InboundHandler.java:118) [elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.transport.InboundHandler.inboundMessage(InboundHandler.java:102) [elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.transport.TcpTransport.inboundMessage(TcpTransport.java:663) [elasticsearch-7.4.2.jar:7.4.2]\r\n        at org.elasticsearch.transport.netty4.Netty4MessageChannelHandler.channelRead(Netty4MessageChannelHandler.java:62) [transport-netty4-client-7.4.2.jar:7.4.2]\r\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n        at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n        at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:328) [netty-codec-4.1.38.Final.jar:4.1.38.Final]\r\n        at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:302) [netty-codec-4.1.38.Final.jar:4.1.38.Final]\r\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n        at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n        at io.netty.handler.logging.LoggingHandler.channelRead(LoggingHandler.java:241) [netty-handler-4.1.38.Final.jar:4.1.38.Final]\r\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n        at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n        at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1421) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n        at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:930) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n        at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:163) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n        at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:697) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n        at io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:597) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n        at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:551) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n        at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:511) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\r\n        at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:918) [netty-common-4.1.38.Final.jar:4.1.38.Final]\r\n        at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) [netty-common-4.1.38.Final.jar:4.1.38.Final]\r\n        at java.lang.Thread.run(Thread.java:830) [?:?]\r\n```\r\n\r\nI can also &quot;Pause Young (Allocation Failure)&quot; happening constantly in gc log. \r\n\r\n```log\r\n[2020-10-26T07:31:06.514+0000][61585][gc,start       ] GC(7139651) Pause Young (Allocation Failure)\r\n[2020-10-26T07:31:06.514+0000][61585][gc,task        ] GC(7139651) Using 23 workers of 23 for evacuation\r\n[2020-10-26T07:31:06.574+0000][61585][gc,age         ] GC(7139651) Desired survivor size 100302848 bytes, new threshold 6 (max threshold 6)\r\n[2020-10-26T07:31:06.574+0000][61585][gc,age         ] GC(7139651) Age table with threshold 6 (max threshold 6)\r\n[2020-10-26T07:31:06.574+0000][61585][gc,age         ] GC(7139651) - age   1:   40802096 bytes,   40802096 total\r\n[2020-10-26T07:31:06.574+0000][61585][gc,age         ] GC(7139651) - age   2:   16714352 bytes,   57516448 total\r\n[2020-10-26T07:31:06.574+0000][61585][gc,age         ] GC(7139651) - age   3:    8509976 bytes,   66026424 total\r\n[2020-10-26T07:31:06.574+0000][61585][gc,age         ] GC(7139651) - age   4:    6906208 bytes,   72932632 total\r\n[2020-10-26T07:31:06.574+0000][61585][gc,age         ] GC(7139651) - age   5:    4186344 bytes,   77118976 total\r\n[2020-10-26T07:31:06.574+0000][61585][gc,age         ] GC(7139651) - age   6:    1960288 bytes,   79079264 total\r\n[2020-10-26T07:31:06.574+0000][61585][gc,heap        ] GC(7139651) ParNew: 1631431K-&gt;102498K(1763584K)\r\n[2020-10-26T07:31:06.574+0000][61585][gc,heap        ] GC(7139651) CMS: 35964431K-&gt;35966764K(50469312K)\r\n[2020-10-26T07:31:06.574+0000][61585][gc,metaspace   ] GC(7139651) Metaspace: 112067K-&gt;112067K(118784K)\r\n[2020-10-26T07:31:06.574+0000][61585][gc             ] GC(7139651) Pause Young (Allocation Failure) 36714M-&gt;35223M(51008M) 59.928ms\r\n[2020-10-26T07:31:06.574+0000][61585][gc,cpu         ] GC(7139651) User=1.02s Sys=0.00s Real=0.06s\r\n[2020-10-26T07:31:06.574+0000][61585][safepoint      ] Safepoint &quot;GenCollectForAllocation&quot;, Time since last: 675463951 ns, Reaching safepoint: 1382982 ns, At safepoint: 60208788 ns, Total: 61591770 ns\r\n[2020-10-26T07:31:07.575+0000][61585][safepoint      ] Safepoint &quot;Cleanup&quot;, Time since last: 1000129984 ns, Reaching safepoint: 901989 ns, At safepoint: 39274 ns, Total: 941263 ns\r\n[2020-10-26T07:31:08.529+0000][61585][gc,start       ] GC(7139652) Pause Young (Allocation Failure)\r\n[2020-10-26T07:31:08.529+0000][61585][gc,task        ] GC(7139652) Using 23 workers of 23 for evacuation\r\n[2020-10-26T07:31:08.584+0000][61585][gc,age         ] GC(7139652) Desired survivor size 100302848 bytes, new threshold 6 (max threshold 6)\r\n[2020-10-26T07:31:08.584+0000][61585][gc,age         ] GC(7139652) Age table with threshold 6 (max threshold 6)\r\n[2020-10-26T07:31:08.584+0000][61585][gc,age         ] GC(7139652) - age   1:   17722072 bytes,   17722072 total\r\n[2020-10-26T07:31:08.585+0000][61585][gc,age         ] GC(7139652) - age   2:   15204416 bytes,   32926488 total\r\n[2020-10-26T07:31:08.585+0000][61585][gc,age         ] GC(7139652) - age   3:   16712976 bytes,   49639464 total\r\n[2020-10-26T07:31:08.585+0000][61585][gc,age         ] GC(7139652) - age   4:    8509664 bytes,   58149128 total\r\n[2020-10-26T07:31:08.585+0000][61585][gc,age         ] GC(7139652) - age   5:    6501424 bytes,   64650552 total\r\n[2020-10-26T07:31:08.585+0000][61585][gc,age         ] GC(7139652) - age   6:    3047280 bytes,   67697832 total\r\n[2020-10-26T07:31:08.585+0000][61585][gc,heap        ] GC(7139652) ParNew: 1670178K-&gt;89020K(1763584K)\r\n[2020-10-26T07:31:08.585+0000][61585][gc,heap        ] GC(7139652) CMS: 35966764K-&gt;35968680K(50469312K)\r\n[2020-10-26T07:31:08.585+0000][61585][gc,metaspace   ] GC(7139652) Metaspace: 112067K-&gt;112067K(118784K)\r\n[2020-10-26T07:31:08.585+0000][61585][gc             ] GC(7139652) Pause Young (Allocation Failure) 36754M-&gt;35212M(51008M) 56.177ms\r\n[2020-10-26T07:31:08.585+0000][61585][gc,cpu         ] GC(7139652) User=0.87s Sys=0.00s Real=0.05s\r\n[2020-10-26T07:31:08.585+0000][61585][safepoint      ] Safepoint &quot;GenCollectForAllocation&quot;, Time since last: 948848143 ns, Reaching safepoint: 4487353 ns, At safepoint: 56505105 ns, Total: 60992458 ns\r\n[2020-10-26T07:31:09.586+0000][61585][safepoint      ] Safepoint &quot;Cleanup&quot;, Time since last: 1000188782 ns, Reaching safepoint: 807865 ns, At safepoint: 31141 ns, Total: 839006 ns\r\n[2020-10-26T07:31:10.587+0000][61585][safepoint      ] Safepoint &quot;Cleanup&quot;, Time since last: 1000218955 ns, Reaching safepoint: 947598 ns, At safepoint: 40468 ns, Total: 988066 ns\r\n[2020-10-26T07:31:11.588+0000][61585][safepoint      ] Safepoint &quot;Cleanup&quot;, Time since last: 1000252002 ns, Reaching safepoint: 688820 ns, At safepoint: 24744 ns, Total: 713564 ns\r\n[2020-10-26T07:31:12.590+0000][61585][safepoint      ] Safepoint &quot;Cleanup&quot;, Time since last: 1000168389 ns, Reaching safepoint: 978766 ns, At safepoint: 30805 ns, Total: 1009571 ns\r\n[2020-10-26T07:31:13.497+0000][61585][gc,start       ] GC(7139653) Pause Young (Allocation Failure)\r\n[2020-10-26T07:31:13.498+0000][61585][gc,task        ] GC(7139653) Using 23 workers of 23 for evacuation\r\n[2020-10-26T07:31:13.560+0000][61585][gc,age         ] GC(7139653) Desired survivor size 100302848 bytes, new threshold 6 (max threshold 6)\r\n[2020-10-26T07:31:13.560+0000][61585][gc,age         ] GC(7139653) Age table with threshold 6 (max threshold 6)\r\n[2020-10-26T07:31:13.560+0000][61585][gc,age         ] GC(7139653) - age   1:   11416792 bytes,   11416792 total\r\n[2020-10-26T07:31:13.560+0000][61585][gc,age         ] GC(7139653) - age   2:    4119704 bytes,   15536496 total\r\n[2020-10-26T07:31:13.560+0000][61585][gc,age         ] GC(7139653) - age   3:   15256408 bytes,   30792904 total\r\n[2020-10-26T07:31:13.560+0000][61585][gc,age         ] GC(7139653) - age   4:   17073416 bytes,   47866320 total\r\n[2020-10-26T07:31:13.560+0000][61585][gc,age         ] GC(7139653) - age   5:    8509616 bytes,   56375936 total\r\n[2020-10-26T07:31:13.560+0000][61585][gc,age         ] GC(7139653) - age   6:    5802544 bytes,   62178480 total\r\n[2020-10-26T07:31:13.560+0000][61585][gc,heap        ] GC(7139653) ParNew: 1656700K-&gt;91797K(1763584K)\r\n[2020-10-26T07:31:13.560+0000][61585][gc,heap        ] GC(7139653) CMS: 35968680K-&gt;35971272K(50469312K)\r\n[2020-10-26T07:31:13.560+0000][61585][gc,metaspace   ] GC(7139653) Metaspace: 112067K-&gt;112067K(118784K)\r\n[2020-10-26T07:31:13.561+0000][61585][gc             ] GC(7139653) Pause Young (Allocation Failure) 36743M-&gt;35217M(51008M) 63.001ms\r\n[2020-10-26T07:31:13.561+0000][61585][gc,cpu         ] GC(7139653) User=0.99s Sys=0.00s Real=0.07s\r\n[2020-10-26T07:31:13.561+0000][61585][safepoint      ] Safepoint &quot;GenCollectForAllocation&quot;, Time since last: 906329704 ns, Reaching safepoint: 1247593 ns, At safepoint: 63668517 ns, Total: 64916110 ns\r\n```\r\nShould this happen this frequently?. Below is heap pool settings:\r\n```json\r\n          &quot;pools&quot; : {\r\n            &quot;young&quot; : {\r\n              &quot;used_in_bytes&quot; : 731499608,\r\n              &quot;max_in_bytes&quot; : 1605304320,\r\n              &quot;peak_used_in_bytes&quot; : 1605304320,\r\n              &quot;peak_max_in_bytes&quot; : 1605304320\r\n            },\r\n            &quot;survivor&quot; : {\r\n              &quot;used_in_bytes&quot; : 187117000,\r\n              &quot;max_in_bytes&quot; : 200605696,\r\n              &quot;peak_used_in_bytes&quot; : 200605696,\r\n              &quot;peak_max_in_bytes&quot; : 200605696\r\n            },\r\n            &quot;old&quot; : {\r\n              &quot;used_in_bytes&quot; : 16461553480,\r\n              &quot;max_in_bytes&quot; : 51680575488,\r\n              &quot;peak_used_in_bytes&quot; : 50144794688,\r\n              &quot;peak_max_in_bytes&quot; : 51680575488\r\n            }\r\n```\r\nAre the rejections because of heapsize or cause the thread_pool being low. And why is &quot;Pause Young&quot; happening this rapidly?  \r\n\r\n**Update**\r\nThis update was asked as another question: https://stackoverflow.com/questions/64548363/search-thread-pool-for-particular-nodes-always-at-maximum","title":"Rejections from search thread_pool Elasticsearch","body":"<p>I have a elasticsearch cluster with 6 nodes. The heapsize is set as 50GB.(I know less than 32 is what is recommended but this was already set to 50Gb for some reason which I don't know). Now I am seeing a lot of rejections from search thread_pool.</p>\n<pre><code>[2020-10-26T12:50:32,730][DEBUG][o.e.a.s.TransportSearchAction] [IDC.node1.com] [indice_1][3], node[M4pYcHhzSTIj5NXA], [P], s[STARTED], a[id=IAQaCGTCTA-CkKGPw]: Failed to execute [SearchRequest{searchType=QUERY_THEN_FETCH, indices=[indice_1], indicesOptions=IndicesOptions[ignore_unavailable=false, allow_no_indices=true, expand_wildcards_open=true, expand_wildcards_closed=false, allow_aliases_to_multiple_indices=true, forbid_closed_indices=true, ignore_aliases=false, ignore_throttled=true], types=[_doc], routing='null', preference='null', requestCache=null, scroll=null, maxConcurrentShardRequests=0, batchedReduceSize=512, preFilterShardSize=128, allowPartialSearchResults=true, localClusterAlias=null, getOrCreateAbsoluteStartMillis=-1, ccsMinimizeRoundtrips=true, lastShard [true]\norg.elasticsearch.transport.RemoteTransportException: [IDC.node1.com][node1:9300][indices:data/read/search[phase/query]]\nCaused by: org.elasticsearch.common.util.concurrent.EsRejectedExecutionException: rejected execution of org.elasticsearch.common.util.concurrent.TimedRunnable@21060fcc on QueueResizingEsThreadPoolExecutor[name = IDC.node1.com/search, queue capacity = 1000, min queue capacity = 1000, max queue capacity = 1000, frame size = 2000, targeted response rate = 1s, task execution EWMA = 5.2s, adjustment amount = 50, org.elasticsearch.common.util.concurrent.QueueResizingEsThreadPoolExecutor@3c46a309[Running, pool size = 49, active threads = 49, queued tasks = 1063, completed tasks = 1693218669]]\n        at org.elasticsearch.common.util.concurrent.EsAbortPolicy.rejectedExecution(EsAbortPolicy.java:48) ~[elasticsearch-7.4.2.jar:7.4.2]\n        at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:825) ~[?:?]\n        at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1355) ~[?:?]\n        at org.elasticsearch.common.util.concurrent.EsThreadPoolExecutor.execute(EsThreadPoolExecutor.java:84) ~[elasticsearch-7.4.2.jar:7.4.2]\n        at org.elasticsearch.search.SearchService.lambda$rewriteShardRequest$8(SearchService.java:1043) ~[elasticsearch-7.4.2.jar:7.4.2]\n        at org.elasticsearch.index.shard.IndexShard.awaitShardSearchActive(IndexShard.java:3247) ~[elasticsearch-7.4.2.jar:7.4.2]\n        at org.elasticsearch.search.SearchService.lambda$rewriteShardRequest$9(SearchService.java:1043) ~[elasticsearch-7.4.2.jar:7.4.2]\n        at org.elasticsearch.action.ActionListener$1.onResponse(ActionListener.java:62) ~[elasticsearch-7.4.2.jar:7.4.2]\n        at org.elasticsearch.index.query.Rewriteable.rewriteAndFetch(Rewriteable.java:114) ~[elasticsearch-7.4.2.jar:7.4.2]\n        at org.elasticsearch.index.query.Rewriteable.rewriteAndFetch(Rewriteable.java:87) ~[elasticsearch-7.4.2.jar:7.4.2]\n        at org.elasticsearch.search.SearchService.rewriteShardRequest(SearchService.java:1048) ~[elasticsearch-7.4.2.jar:7.4.2]\n        at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:340) ~[elasticsearch-7.4.2.jar:7.4.2]\n        at org.elasticsearch.action.search.SearchTransportService.lambda$registerRequestHandler$6(SearchTransportService.java:335) ~[elasticsearch-7.4.2.jar:7.4.2]\n        at org.elasticsearch.xpack.security.transport.SecurityServerTransportInterceptor$ProfileSecuredRequestHandler$1.doRun(SecurityServerTransportInterceptor.java:257) ~[?:?]\n        at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) ~[elasticsearch-7.4.2.jar:7.4.2]\n        at org.elasticsearch.xpack.security.transport.SecurityServerTransportInterceptor$ProfileSecuredRequestHandler.messageReceived(SecurityServerTransportInterceptor.java:315) ~[?:?]\n        at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:63) ~[elasticsearch-7.4.2.jar:7.4.2]\n        at org.elasticsearch.transport.InboundHandler$RequestHandler.doRun(InboundHandler.java:264) ~[elasticsearch-7.4.2.jar:7.4.2]\n        at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37) ~[elasticsearch-7.4.2.jar:7.4.2]\n        at org.elasticsearch.common.util.concurrent.EsExecutors$DirectExecutorService.execute(EsExecutors.java:225) ~[elasticsearch-7.4.2.jar:7.4.2]\n        at org.elasticsearch.transport.InboundHandler.handleRequest(InboundHandler.java:185) [elasticsearch-7.4.2.jar:7.4.2]\n        at org.elasticsearch.transport.InboundHandler.messageReceived(InboundHandler.java:118) [elasticsearch-7.4.2.jar:7.4.2]\n        at org.elasticsearch.transport.InboundHandler.inboundMessage(InboundHandler.java:102) [elasticsearch-7.4.2.jar:7.4.2]\n        at org.elasticsearch.transport.TcpTransport.inboundMessage(TcpTransport.java:663) [elasticsearch-7.4.2.jar:7.4.2]\n        at org.elasticsearch.transport.netty4.Netty4MessageChannelHandler.channelRead(Netty4MessageChannelHandler.java:62) [transport-netty4-client-7.4.2.jar:7.4.2]\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\n        at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:328) [netty-codec-4.1.38.Final.jar:4.1.38.Final]\n        at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:302) [netty-codec-4.1.38.Final.jar:4.1.38.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\n        at io.netty.handler.logging.LoggingHandler.channelRead(LoggingHandler.java:241) [netty-handler-4.1.38.Final.jar:4.1.38.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:352) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\n        at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1421) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:374) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:360) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\n        at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:930) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\n        at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:163) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\n        at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:697) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\n        at io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:597) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\n        at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:551) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\n        at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:511) [netty-transport-4.1.38.Final.jar:4.1.38.Final]\n        at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:918) [netty-common-4.1.38.Final.jar:4.1.38.Final]\n        at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) [netty-common-4.1.38.Final.jar:4.1.38.Final]\n        at java.lang.Thread.run(Thread.java:830) [?:?]\n</code></pre>\n<p>I can also &quot;Pause Young (Allocation Failure)&quot; happening constantly in gc log.</p>\n<pre><code>[2020-10-26T07:31:06.514+0000][61585][gc,start       ] GC(7139651) Pause Young (Allocation Failure)\n[2020-10-26T07:31:06.514+0000][61585][gc,task        ] GC(7139651) Using 23 workers of 23 for evacuation\n[2020-10-26T07:31:06.574+0000][61585][gc,age         ] GC(7139651) Desired survivor size 100302848 bytes, new threshold 6 (max threshold 6)\n[2020-10-26T07:31:06.574+0000][61585][gc,age         ] GC(7139651) Age table with threshold 6 (max threshold 6)\n[2020-10-26T07:31:06.574+0000][61585][gc,age         ] GC(7139651) - age   1:   40802096 bytes,   40802096 total\n[2020-10-26T07:31:06.574+0000][61585][gc,age         ] GC(7139651) - age   2:   16714352 bytes,   57516448 total\n[2020-10-26T07:31:06.574+0000][61585][gc,age         ] GC(7139651) - age   3:    8509976 bytes,   66026424 total\n[2020-10-26T07:31:06.574+0000][61585][gc,age         ] GC(7139651) - age   4:    6906208 bytes,   72932632 total\n[2020-10-26T07:31:06.574+0000][61585][gc,age         ] GC(7139651) - age   5:    4186344 bytes,   77118976 total\n[2020-10-26T07:31:06.574+0000][61585][gc,age         ] GC(7139651) - age   6:    1960288 bytes,   79079264 total\n[2020-10-26T07:31:06.574+0000][61585][gc,heap        ] GC(7139651) ParNew: 1631431K-&gt;102498K(1763584K)\n[2020-10-26T07:31:06.574+0000][61585][gc,heap        ] GC(7139651) CMS: 35964431K-&gt;35966764K(50469312K)\n[2020-10-26T07:31:06.574+0000][61585][gc,metaspace   ] GC(7139651) Metaspace: 112067K-&gt;112067K(118784K)\n[2020-10-26T07:31:06.574+0000][61585][gc             ] GC(7139651) Pause Young (Allocation Failure) 36714M-&gt;35223M(51008M) 59.928ms\n[2020-10-26T07:31:06.574+0000][61585][gc,cpu         ] GC(7139651) User=1.02s Sys=0.00s Real=0.06s\n[2020-10-26T07:31:06.574+0000][61585][safepoint      ] Safepoint &quot;GenCollectForAllocation&quot;, Time since last: 675463951 ns, Reaching safepoint: 1382982 ns, At safepoint: 60208788 ns, Total: 61591770 ns\n[2020-10-26T07:31:07.575+0000][61585][safepoint      ] Safepoint &quot;Cleanup&quot;, Time since last: 1000129984 ns, Reaching safepoint: 901989 ns, At safepoint: 39274 ns, Total: 941263 ns\n[2020-10-26T07:31:08.529+0000][61585][gc,start       ] GC(7139652) Pause Young (Allocation Failure)\n[2020-10-26T07:31:08.529+0000][61585][gc,task        ] GC(7139652) Using 23 workers of 23 for evacuation\n[2020-10-26T07:31:08.584+0000][61585][gc,age         ] GC(7139652) Desired survivor size 100302848 bytes, new threshold 6 (max threshold 6)\n[2020-10-26T07:31:08.584+0000][61585][gc,age         ] GC(7139652) Age table with threshold 6 (max threshold 6)\n[2020-10-26T07:31:08.584+0000][61585][gc,age         ] GC(7139652) - age   1:   17722072 bytes,   17722072 total\n[2020-10-26T07:31:08.585+0000][61585][gc,age         ] GC(7139652) - age   2:   15204416 bytes,   32926488 total\n[2020-10-26T07:31:08.585+0000][61585][gc,age         ] GC(7139652) - age   3:   16712976 bytes,   49639464 total\n[2020-10-26T07:31:08.585+0000][61585][gc,age         ] GC(7139652) - age   4:    8509664 bytes,   58149128 total\n[2020-10-26T07:31:08.585+0000][61585][gc,age         ] GC(7139652) - age   5:    6501424 bytes,   64650552 total\n[2020-10-26T07:31:08.585+0000][61585][gc,age         ] GC(7139652) - age   6:    3047280 bytes,   67697832 total\n[2020-10-26T07:31:08.585+0000][61585][gc,heap        ] GC(7139652) ParNew: 1670178K-&gt;89020K(1763584K)\n[2020-10-26T07:31:08.585+0000][61585][gc,heap        ] GC(7139652) CMS: 35966764K-&gt;35968680K(50469312K)\n[2020-10-26T07:31:08.585+0000][61585][gc,metaspace   ] GC(7139652) Metaspace: 112067K-&gt;112067K(118784K)\n[2020-10-26T07:31:08.585+0000][61585][gc             ] GC(7139652) Pause Young (Allocation Failure) 36754M-&gt;35212M(51008M) 56.177ms\n[2020-10-26T07:31:08.585+0000][61585][gc,cpu         ] GC(7139652) User=0.87s Sys=0.00s Real=0.05s\n[2020-10-26T07:31:08.585+0000][61585][safepoint      ] Safepoint &quot;GenCollectForAllocation&quot;, Time since last: 948848143 ns, Reaching safepoint: 4487353 ns, At safepoint: 56505105 ns, Total: 60992458 ns\n[2020-10-26T07:31:09.586+0000][61585][safepoint      ] Safepoint &quot;Cleanup&quot;, Time since last: 1000188782 ns, Reaching safepoint: 807865 ns, At safepoint: 31141 ns, Total: 839006 ns\n[2020-10-26T07:31:10.587+0000][61585][safepoint      ] Safepoint &quot;Cleanup&quot;, Time since last: 1000218955 ns, Reaching safepoint: 947598 ns, At safepoint: 40468 ns, Total: 988066 ns\n[2020-10-26T07:31:11.588+0000][61585][safepoint      ] Safepoint &quot;Cleanup&quot;, Time since last: 1000252002 ns, Reaching safepoint: 688820 ns, At safepoint: 24744 ns, Total: 713564 ns\n[2020-10-26T07:31:12.590+0000][61585][safepoint      ] Safepoint &quot;Cleanup&quot;, Time since last: 1000168389 ns, Reaching safepoint: 978766 ns, At safepoint: 30805 ns, Total: 1009571 ns\n[2020-10-26T07:31:13.497+0000][61585][gc,start       ] GC(7139653) Pause Young (Allocation Failure)\n[2020-10-26T07:31:13.498+0000][61585][gc,task        ] GC(7139653) Using 23 workers of 23 for evacuation\n[2020-10-26T07:31:13.560+0000][61585][gc,age         ] GC(7139653) Desired survivor size 100302848 bytes, new threshold 6 (max threshold 6)\n[2020-10-26T07:31:13.560+0000][61585][gc,age         ] GC(7139653) Age table with threshold 6 (max threshold 6)\n[2020-10-26T07:31:13.560+0000][61585][gc,age         ] GC(7139653) - age   1:   11416792 bytes,   11416792 total\n[2020-10-26T07:31:13.560+0000][61585][gc,age         ] GC(7139653) - age   2:    4119704 bytes,   15536496 total\n[2020-10-26T07:31:13.560+0000][61585][gc,age         ] GC(7139653) - age   3:   15256408 bytes,   30792904 total\n[2020-10-26T07:31:13.560+0000][61585][gc,age         ] GC(7139653) - age   4:   17073416 bytes,   47866320 total\n[2020-10-26T07:31:13.560+0000][61585][gc,age         ] GC(7139653) - age   5:    8509616 bytes,   56375936 total\n[2020-10-26T07:31:13.560+0000][61585][gc,age         ] GC(7139653) - age   6:    5802544 bytes,   62178480 total\n[2020-10-26T07:31:13.560+0000][61585][gc,heap        ] GC(7139653) ParNew: 1656700K-&gt;91797K(1763584K)\n[2020-10-26T07:31:13.560+0000][61585][gc,heap        ] GC(7139653) CMS: 35968680K-&gt;35971272K(50469312K)\n[2020-10-26T07:31:13.560+0000][61585][gc,metaspace   ] GC(7139653) Metaspace: 112067K-&gt;112067K(118784K)\n[2020-10-26T07:31:13.561+0000][61585][gc             ] GC(7139653) Pause Young (Allocation Failure) 36743M-&gt;35217M(51008M) 63.001ms\n[2020-10-26T07:31:13.561+0000][61585][gc,cpu         ] GC(7139653) User=0.99s Sys=0.00s Real=0.07s\n[2020-10-26T07:31:13.561+0000][61585][safepoint      ] Safepoint &quot;GenCollectForAllocation&quot;, Time since last: 906329704 ns, Reaching safepoint: 1247593 ns, At safepoint: 63668517 ns, Total: 64916110 ns\n</code></pre>\n<p>Should this happen this frequently?. Below is heap pool settings:</p>\n<pre class=\"lang-json prettyprint-override\"><code>          &quot;pools&quot; : {\n            &quot;young&quot; : {\n              &quot;used_in_bytes&quot; : 731499608,\n              &quot;max_in_bytes&quot; : 1605304320,\n              &quot;peak_used_in_bytes&quot; : 1605304320,\n              &quot;peak_max_in_bytes&quot; : 1605304320\n            },\n            &quot;survivor&quot; : {\n              &quot;used_in_bytes&quot; : 187117000,\n              &quot;max_in_bytes&quot; : 200605696,\n              &quot;peak_used_in_bytes&quot; : 200605696,\n              &quot;peak_max_in_bytes&quot; : 200605696\n            },\n            &quot;old&quot; : {\n              &quot;used_in_bytes&quot; : 16461553480,\n              &quot;max_in_bytes&quot; : 51680575488,\n              &quot;peak_used_in_bytes&quot; : 50144794688,\n              &quot;peak_max_in_bytes&quot; : 51680575488\n            }\n</code></pre>\n<p>Are the rejections because of heapsize or cause the thread_pool being low. And why is &quot;Pause Young&quot; happening this rapidly?</p>\n<p><strong>Update</strong>\nThis update was asked as another question: <a href=\"https://stackoverflow.com/questions/64548363/search-thread-pool-for-particular-nodes-always-at-maximum\">Search thread_pool for particular nodes always at maximum</a></p>\n"},{"tags":["java","mysql","jpa"],"comments":[{"owner":{"account_id":31679,"reputation":209508,"user_id":87189,"accept_rate":100,"display_name":"tadman"},"score":1,"creation_date":1662761505,"post_id":73667906,"comment_id":130088855,"body_markdown":"Are you asking &quot;How do I update my Java application to work with a new schema revision?&quot;","body":"Are you asking &quot;How do I update my Java application to work with a new schema revision?&quot;"},{"owner":{"account_id":20375424,"reputation":517,"user_id":14946729,"display_name":"grigouille"},"score":1,"creation_date":1662792190,"post_id":73667906,"comment_id":130092198,"body_markdown":"Just change your entity : add the property.","body":"Just change your entity : add the property."},{"owner":{"account_id":5218659,"reputation":337,"user_id":4172743,"display_name":"Bisonfan95"},"score":0,"creation_date":1662793414,"post_id":73667906,"comment_id":130092357,"body_markdown":"I guess I could have phrased it like that. The table has a new field I want to know what do i have to do in Java to make it work. i ask since I have always made the creations from zero in java itself and in this case I dont know how to proceed","body":"I guess I could have phrased it like that. The table has a new field I want to know what do i have to do in Java to make it work. i ask since I have always made the creations from zero in java itself and in this case I dont know how to proceed"},{"owner":{"account_id":5218659,"reputation":337,"user_id":4172743,"display_name":"Bisonfan95"},"score":0,"creation_date":1663367441,"post_id":73667906,"comment_id":130231191,"body_markdown":"By the way this was the answer, thanks @grigouille","body":"By the way this was the answer, thanks @grigouille"}],"owner":{"account_id":5218659,"reputation":337,"user_id":4172743,"display_name":"Bisonfan95"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662761353,"creation_date":1662761353,"question_id":73667906,"body_markdown":"A database that I am using (MySql) was added directly a new column on a table. Was should I change in the java code so my entities can still make operations with the database but now including the new column? Do i have to change just the entity class and add the column or there is more to it? Thank in advance for the help.","title":"How do you adapt / what do you have to change in your Java JPA code (Entities, etc.) if a column was manually added directly on the database Mysql?","body":"<p>A database that I am using (MySql) was added directly a new column on a table. Was should I change in the java code so my entities can still make operations with the database but now including the new column? Do i have to change just the entity class and add the column or there is more to it? Thank in advance for the help.</p>\n"},{"tags":["java","kotlin","apache-kafka","spring-kafka"],"comments":[{"owner":{"account_id":16904098,"reputation":627,"user_id":12224743,"display_name":"Umeshwaran"},"score":0,"creation_date":1633963497,"post_id":69527813,"comment_id":122893387,"body_markdown":"Try adding &quot;localhost:2181&quot; to your &quot;bootstrapservers&quot; in consumer config . This is to add consumers to zookeeper for consumer re-balancing and registering with zookeeper","body":"Try adding &quot;localhost:2181&quot; to your &quot;bootstrapservers&quot; in consumer config . This is to add consumers to zookeeper for consumer re-balancing and registering with zookeeper"},{"owner":{"account_id":23128,"reputation":13127,"user_id":57719,"display_name":"Chin Huang"},"score":1,"creation_date":1633963519,"post_id":69527813,"comment_id":122893395,"body_markdown":"Is the Kafka broker running inside Docker? Is the Kafka broker running inside a Docker container with container ID 34bcfcc207e0?","body":"Is the Kafka broker running inside Docker? Is the Kafka broker running inside a Docker container with container ID 34bcfcc207e0?"},{"owner":{"account_id":1288095,"reputation":169326,"user_id":1240763,"display_name":"Gary Russell"},"score":1,"creation_date":1633963665,"post_id":69527813,"comment_id":122893462,"body_markdown":"It&#39;s called a bootstrap server for just that reason; the client initially connects to that address, and the server returns the actual host name(s) to connect to; when using docker, you need to configure Kafka&#39;s advertised hosts within the container.","body":"It&#39;s called a bootstrap server for just that reason; the client initially connects to that address, and the server returns the actual host name(s) to connect to; when using docker, you need to configure Kafka&#39;s advertised hosts within the container."},{"owner":{"account_id":8954819,"reputation":1401,"user_id":8005819,"display_name":"Вячеслав Чернышов"},"score":0,"creation_date":1633963733,"post_id":69527813,"comment_id":122893494,"body_markdown":"yes, it is container name...","body":"yes, it is container name..."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1633964015,"post_id":69527813,"comment_id":122893622,"body_markdown":"@Umeshwaran Kafka clients do not use Zookeeper as bootstrap servers","body":"@Umeshwaran Kafka clients do not use Zookeeper as bootstrap servers"}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1633963985,"creation_date":1633963985,"answer_id":69528266,"question_id":69527813,"body_markdown":"1. Kafka is not an HTTP service. Remove `http://` from all your strings\r\n\r\n2. If you&#39;re running Kafka in a Container, the default advertised listener is using its hostname (the container ID), and you need to change this to use an address you expect https://stackoverflow.com/questions/51630260/connect-to-kafka-running-in-docker","title":"Spring Kafka: UnknownHostException: 34bcfcc207e0","body":"<ol>\n<li><p>Kafka is not an HTTP service. Remove <code>http://</code> from all your strings</p>\n</li>\n<li><p>If you're running Kafka in a Container, the default advertised listener is using its hostname (the container ID), and you need to change this to use an address you expect <a href=\"https://stackoverflow.com/questions/51630260/connect-to-kafka-running-in-docker\">Connect to Kafka running in Docker</a></p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":16419918,"reputation":2129,"user_id":11861378,"display_name":"Ad&#225;n Escobar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662760196,"creation_date":1662760196,"answer_id":73667794,"question_id":69527813,"body_markdown":"I had similar issue using docker-compose, at the beginning I didn&#39;t know  where it came from that hash id either, then I realized it corresponded to the container id, and by default the `hostname` of my broker service.\r\n\r\ndocker ps\r\n\r\n    CONTAINER ID   PORTS                              NAMES\r\n       b6d781c2089b   2181/tcp, 0.0.0.0:9092-&gt;9092/tcp   broker-1\r\n    * fac6ef279a3e   2181/tcp, 0.0.0.0:9093-&gt;9092/tcp   broker-2\r\n      cbbc73bfe92e   0.0.0.0:2181-&gt;2181/tcp             zookeeper\r\n\r\nlog \r\n\r\n    broker-2 | Recorded new controller, from now on will use broker fac6ef279a3e:9092 \r\n\r\nWhen I tried to connect with my Java consumer using:\r\n\r\n    props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG,&quot;localhost:9092,localhost:9093&quot;);\r\n\r\ngets the following error:\r\n\r\n    java.net.UnknownHostException: fac6ef279a3e\r\n\r\nI solved it as follows\r\n\r\nadding a hostname to each broker \r\n\r\n    services:\r\n      ...\r\n      broker-1:\r\n        hostname: broker-1\r\n        ports:\r\n         - &quot;9092:9092&quot;\r\n       ...\r\n      broker-2:\r\n        hostname: broker-2\r\n        ports:\r\n         - &quot;9093:9092&quot;\r\n\r\nsetting my /etc/hosts like:\r\n\r\n    #### kafka\r\n    127.0.0.1\tbroker-1\r\n    127.0.0.1\tbroker-2\r\n\r\nand my props connection \r\n\r\n    props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG,&quot;broker-1:9092,broker-2:9093&quot;);","title":"Spring Kafka: UnknownHostException: 34bcfcc207e0","body":"<p>I had similar issue using docker-compose, at the beginning I didn't know  where it came from that hash id either, then I realized it corresponded to the container id, and by default the <code>hostname</code> of my broker service.</p>\n<p>docker ps</p>\n<pre><code>CONTAINER ID   PORTS                              NAMES\n   b6d781c2089b   2181/tcp, 0.0.0.0:9092-&gt;9092/tcp   broker-1\n* fac6ef279a3e   2181/tcp, 0.0.0.0:9093-&gt;9092/tcp   broker-2\n  cbbc73bfe92e   0.0.0.0:2181-&gt;2181/tcp             zookeeper\n</code></pre>\n<p>log</p>\n<pre><code>broker-2 | Recorded new controller, from now on will use broker fac6ef279a3e:9092 \n</code></pre>\n<p>When I tried to connect with my Java consumer using:</p>\n<pre><code>props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG,&quot;localhost:9092,localhost:9093&quot;);\n</code></pre>\n<p>gets the following error:</p>\n<pre><code>java.net.UnknownHostException: fac6ef279a3e\n</code></pre>\n<p>I solved it as follows</p>\n<p>adding a hostname to each broker</p>\n<pre><code>services:\n  ...\n  broker-1:\n    hostname: broker-1\n    ports:\n     - &quot;9092:9092&quot;\n   ...\n  broker-2:\n    hostname: broker-2\n    ports:\n     - &quot;9093:9092&quot;\n</code></pre>\n<p>setting my /etc/hosts like:</p>\n<pre><code>#### kafka\n127.0.0.1   broker-1\n127.0.0.1   broker-2\n</code></pre>\n<p>and my props connection</p>\n<pre><code>props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG,&quot;broker-1:9092,broker-2:9093&quot;);\n</code></pre>\n"}],"owner":{"account_id":8954819,"reputation":1401,"user_id":8005819,"display_name":"Вячеслав Чернышов"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2744,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69528266,"answer_count":2,"score":1,"last_activity_date":1662760196,"creation_date":1633962236,"question_id":69527813,"body_markdown":"I wrote kafka producer / consumer for my app:\r\n\r\nConsumer config:\r\n\r\n    @EnableKafka\r\n    @Configuration\r\n    class KafkaConsumerConfig {\r\n    \r\n        @Bean\r\n        fun consumerFactory(): ConsumerFactory&lt;String, String&gt; {\r\n            val props: MutableMap&lt;String, Any&gt; = HashMap()\r\n            props[ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG] = &quot;http://localhost:9092&quot;\r\n            props[ConsumerConfig.GROUP_ID_CONFIG] = &quot;group12345&quot;\r\n            props[ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG] = StringDeserializer::class.java\r\n            props[ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG] = StringDeserializer::class.java\r\n            return DefaultKafkaConsumerFactory(props)\r\n        }\r\n    \r\n        @Bean\r\n        fun kafkaListenerContainerFactory(): ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; {\r\n            val factory = ConcurrentKafkaListenerContainerFactory&lt;String, String&gt;()\r\n            factory.consumerFactory = consumerFactory()\r\n            return factory\r\n        }\r\n    }\r\n\r\nProducer config:\r\n\r\n    @Configuration\r\n    class KafkaProducerConfig {\r\n    \r\n        @Bean\r\n        fun producerFactory(): ProducerFactory&lt;String, String&gt; {\r\n            val configProps: MutableMap&lt;String, Any&gt; = HashMap()\r\n            configProps[ProducerConfig.BOOTSTRAP_SERVERS_CONFIG] = &quot;http://localhost:9092&quot;\r\n            configProps[ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG] = StringSerializer::class.java\r\n            configProps[ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG] = StringSerializer::class.java\r\n            return DefaultKafkaProducerFactory(configProps)\r\n        }\r\n    \r\n        @Bean\r\n        fun kafkaTemplate(): KafkaTemplate&lt;String, String&gt; {\r\n            return KafkaTemplate(producerFactory())\r\n        }\r\n    }\r\n\r\nTopic config:\r\n\r\n    @Configuration\r\n    class KafkaTopicConfig {\r\n    \r\n        @Bean\r\n        fun kafkaAdmin(): KafkaAdmin {\r\n            val configs: MutableMap&lt;String, Any?&gt; = HashMap()\r\n            configs[AdminClientConfig.BOOTSTRAP_SERVERS_CONFIG] = &quot;http://localhost:9092&quot;\r\n            return KafkaAdmin(configs)\r\n        }\r\n    \r\n        @Bean\r\n        fun topic1(): NewTopic {\r\n            return NewTopic(&quot;kafkaTest&quot;, 1, 1.toShort())\r\n        }\r\n    }\r\n\r\nKafka service:\r\n\r\n    @Service\r\n    class KafkaService(\r\n        private val kafkaTemplate: KafkaTemplate&lt;String, String&gt;\r\n    ) {\r\n    \r\n        fun send() {\r\n            kafkaTemplate.send(&quot;kafkaTest&quot;, &quot;test message ${System.currentTimeMillis()}&quot;)\r\n        }\r\n    \r\n        @KafkaListener(topics = [&quot;kafkaTest&quot;], groupId = &quot;group12345&quot;)\r\n        fun listenGroupFoo(message: String) {\r\n            println(&quot;--&gt; $message&quot;)\r\n        }\r\n    }\r\n\r\nThat&#39;s ALL classes in my app. When I trying to run app, I get this exception:\r\n\r\n&gt; 2021-10-11 17:20:13.319  WARN 8544 --- [| adminclient-1]\r\n&gt; org.apache.kafka.clients.NetworkClient   : [AdminClient\r\n&gt; clientId=adminclient-1] Error connecting to node 34bcfcc207e0:9092\r\n&gt; (id: 1001 rack: null)\r\n&gt; \r\n&gt; java.net.UnknownHostException: 34bcfcc207e0\r\n\r\nI have no idea, what is host `34bcfcc207e0`. It appears at start or thread.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nWhat&#39;s wrong?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VEF7C.png","title":"Spring Kafka: UnknownHostException: 34bcfcc207e0","body":"<p>I wrote kafka producer / consumer for my app:</p>\n<p>Consumer config:</p>\n<pre><code>@EnableKafka\n@Configuration\nclass KafkaConsumerConfig {\n\n    @Bean\n    fun consumerFactory(): ConsumerFactory&lt;String, String&gt; {\n        val props: MutableMap&lt;String, Any&gt; = HashMap()\n        props[ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG] = &quot;http://localhost:9092&quot;\n        props[ConsumerConfig.GROUP_ID_CONFIG] = &quot;group12345&quot;\n        props[ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG] = StringDeserializer::class.java\n        props[ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG] = StringDeserializer::class.java\n        return DefaultKafkaConsumerFactory(props)\n    }\n\n    @Bean\n    fun kafkaListenerContainerFactory(): ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; {\n        val factory = ConcurrentKafkaListenerContainerFactory&lt;String, String&gt;()\n        factory.consumerFactory = consumerFactory()\n        return factory\n    }\n}\n</code></pre>\n<p>Producer config:</p>\n<pre><code>@Configuration\nclass KafkaProducerConfig {\n\n    @Bean\n    fun producerFactory(): ProducerFactory&lt;String, String&gt; {\n        val configProps: MutableMap&lt;String, Any&gt; = HashMap()\n        configProps[ProducerConfig.BOOTSTRAP_SERVERS_CONFIG] = &quot;http://localhost:9092&quot;\n        configProps[ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG] = StringSerializer::class.java\n        configProps[ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG] = StringSerializer::class.java\n        return DefaultKafkaProducerFactory(configProps)\n    }\n\n    @Bean\n    fun kafkaTemplate(): KafkaTemplate&lt;String, String&gt; {\n        return KafkaTemplate(producerFactory())\n    }\n}\n</code></pre>\n<p>Topic config:</p>\n<pre><code>@Configuration\nclass KafkaTopicConfig {\n\n    @Bean\n    fun kafkaAdmin(): KafkaAdmin {\n        val configs: MutableMap&lt;String, Any?&gt; = HashMap()\n        configs[AdminClientConfig.BOOTSTRAP_SERVERS_CONFIG] = &quot;http://localhost:9092&quot;\n        return KafkaAdmin(configs)\n    }\n\n    @Bean\n    fun topic1(): NewTopic {\n        return NewTopic(&quot;kafkaTest&quot;, 1, 1.toShort())\n    }\n}\n</code></pre>\n<p>Kafka service:</p>\n<pre><code>@Service\nclass KafkaService(\n    private val kafkaTemplate: KafkaTemplate&lt;String, String&gt;\n) {\n\n    fun send() {\n        kafkaTemplate.send(&quot;kafkaTest&quot;, &quot;test message ${System.currentTimeMillis()}&quot;)\n    }\n\n    @KafkaListener(topics = [&quot;kafkaTest&quot;], groupId = &quot;group12345&quot;)\n    fun listenGroupFoo(message: String) {\n        println(&quot;--&gt; $message&quot;)\n    }\n}\n</code></pre>\n<p>That's ALL classes in my app. When I trying to run app, I get this exception:</p>\n<blockquote>\n<p>2021-10-11 17:20:13.319  WARN 8544 --- [| adminclient-1]\norg.apache.kafka.clients.NetworkClient   : [AdminClient\nclientId=adminclient-1] Error connecting to node 34bcfcc207e0:9092\n(id: 1001 rack: null)</p>\n<p>java.net.UnknownHostException: 34bcfcc207e0</p>\n</blockquote>\n<p>I have no idea, what is host <code>34bcfcc207e0</code>. It appears at start or thread.</p>\n<p><a href=\"https://i.stack.imgur.com/VEF7C.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VEF7C.png\" alt=\"enter image description here\" /></a></p>\n<p>What's wrong?</p>\n"},{"tags":["java","file-upload","urlconnection"],"answers":[{"tags":[],"owner":{"account_id":66307,"reputation":17195,"user_id":194609,"accept_rate":73,"display_name":"Karussell"},"down_vote_count":8,"up_vote_count":1,"is_accepted":false,"score":-7,"last_activity_date":1268913154,"creation_date":1268913154,"answer_id":2469535,"question_id":2469451,"body_markdown":"It could depend on your framework. (for each of them could exist an easier solution).\r\n\r\nBut to answer your question: there are [a lot of external libraries][1] for this functionality. Look [here][2] how to use apache commons fileupload.\r\n\r\n\r\n  [1]: http://www.jguru.com/faq/view.jsp?EID=160\r\n  [2]: http://www.developershome.com/wap/wapUpload/wap_upload.asp?page=jsp","title":"Upload files from Java client to a HTTP server","body":"<p>It could depend on your framework. (for each of them could exist an easier solution).</p>\n\n<p>But to answer your question: there are <a href=\"http://www.jguru.com/faq/view.jsp?EID=160\" rel=\"nofollow noreferrer\">a lot of external libraries</a> for this functionality. Look <a href=\"http://www.developershome.com/wap/wapUpload/wap_upload.asp?page=jsp\" rel=\"nofollow noreferrer\">here</a> how to use apache commons fileupload.</p>\n"},{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":0,"up_vote_count":112,"is_accepted":true,"score":112,"last_activity_date":1435499856,"creation_date":1268913650,"answer_id":2469587,"question_id":2469451,"body_markdown":"You&#39;d normally use [`java.net.URLConnection`][1] to fire HTTP requests. You&#39;d also normally use [`multipart/form-data`][2] encoding for mixed POST content (binary and character data). Click the link, it contains information and an example how to compose a `multipart/form-data` request body. The specification is in more detail described in [RFC2388][3].\r\n\r\nHere&#39;s a kickoff example:\r\n\r\n    String url = &quot;http://example.com/upload&quot;;\r\n    String charset = &quot;UTF-8&quot;;\r\n    String param = &quot;value&quot;;\r\n    File textFile = new File(&quot;/path/to/file.txt&quot;);\r\n    File binaryFile = new File(&quot;/path/to/file.bin&quot;);\r\n    String boundary = Long.toHexString(System.currentTimeMillis()); // Just generate some unique random value.\r\n    String CRLF = &quot;\\r\\n&quot;; // Line separator required by multipart/form-data.\r\n\r\n    URLConnection connection = new URL(url).openConnection();\r\n    connection.setDoOutput(true);\r\n    connection.setRequestProperty(&quot;Content-Type&quot;, &quot;multipart/form-data; boundary=&quot; + boundary);\r\n    \r\n    try (\r\n        OutputStream output = connection.getOutputStream();\r\n        PrintWriter writer = new PrintWriter(new OutputStreamWriter(output, charset), true);\r\n    ) {\r\n        // Send normal param.\r\n        writer.append(&quot;--&quot; + boundary).append(CRLF);\r\n        writer.append(&quot;Content-Disposition: form-data; name=\\&quot;param\\&quot;&quot;).append(CRLF);\r\n        writer.append(&quot;Content-Type: text/plain; charset=&quot; + charset).append(CRLF);\r\n        writer.append(CRLF).append(param).append(CRLF).flush();\r\n    \r\n        // Send text file.\r\n        writer.append(&quot;--&quot; + boundary).append(CRLF);\r\n        writer.append(&quot;Content-Disposition: form-data; name=\\&quot;textFile\\&quot;; filename=\\&quot;&quot; + textFile.getName() + &quot;\\&quot;&quot;).append(CRLF);\r\n        writer.append(&quot;Content-Type: text/plain; charset=&quot; + charset).append(CRLF); // Text file itself must be saved in this charset!\r\n        writer.append(CRLF).flush();\r\n        Files.copy(textFile.toPath(), output);\r\n        output.flush(); // Important before continuing with writer!\r\n        writer.append(CRLF).flush(); // CRLF is important! It indicates end of boundary.\r\n    \r\n        // Send binary file.\r\n        writer.append(&quot;--&quot; + boundary).append(CRLF);\r\n        writer.append(&quot;Content-Disposition: form-data; name=\\&quot;binaryFile\\&quot;; filename=\\&quot;&quot; + binaryFile.getName() + &quot;\\&quot;&quot;).append(CRLF);\r\n        writer.append(&quot;Content-Type: &quot; + URLConnection.guessContentTypeFromName(binaryFile.getName())).append(CRLF);\r\n        writer.append(&quot;Content-Transfer-Encoding: binary&quot;).append(CRLF);\r\n        writer.append(CRLF).flush();\r\n        Files.copy(binaryFile.toPath(), output);\r\n        output.flush(); // Important before continuing with writer!\r\n        writer.append(CRLF).flush(); // CRLF is important! It indicates end of boundary.\r\n    \r\n        // End of multipart/form-data.\r\n        writer.append(&quot;--&quot; + boundary + &quot;--&quot;).append(CRLF).flush();\r\n    }\r\n\r\n    // Request is lazily fired whenever you need to obtain information about response.\r\n    int responseCode = ((HttpURLConnection) connection).getResponseCode();\r\n    System.out.println(responseCode); // Should be 200\r\n\r\nThis code is less verbose when you use a 3rd party library like Apache Commons [HttpComponents Client][4].\r\n\r\nThe Apache Commons [FileUpload][5] as some incorrectly suggest here is only of interest in the **server side**. You can&#39;t use and don&#39;t need it at the client side.\r\n\r\n###See also\r\n\r\n- https://stackoverflow.com/questions/2793150/using-java-net-urlconnection-to-fire-and-handle-http-requests\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/net/URLConnection.html\r\n  [2]: http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2\r\n  [3]: http://www.faqs.org/rfcs/rfc2388.html\r\n  [4]: http://hc.apache.org/\r\n  [5]: http://commons.apache.org/fileupload","title":"Upload files from Java client to a HTTP server","body":"<p>You'd normally use <a href=\"http://java.sun.com/javase/6/docs/api/java/net/URLConnection.html\" rel=\"noreferrer\"><code>java.net.URLConnection</code></a> to fire HTTP requests. You'd also normally use <a href=\"http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2\" rel=\"noreferrer\"><code>multipart/form-data</code></a> encoding for mixed POST content (binary and character data). Click the link, it contains information and an example how to compose a <code>multipart/form-data</code> request body. The specification is in more detail described in <a href=\"http://www.faqs.org/rfcs/rfc2388.html\" rel=\"noreferrer\">RFC2388</a>.</p>\n\n<p>Here's a kickoff example:</p>\n\n<pre><code>String url = \"http://example.com/upload\";\nString charset = \"UTF-8\";\nString param = \"value\";\nFile textFile = new File(\"/path/to/file.txt\");\nFile binaryFile = new File(\"/path/to/file.bin\");\nString boundary = Long.toHexString(System.currentTimeMillis()); // Just generate some unique random value.\nString CRLF = \"\\r\\n\"; // Line separator required by multipart/form-data.\n\nURLConnection connection = new URL(url).openConnection();\nconnection.setDoOutput(true);\nconnection.setRequestProperty(\"Content-Type\", \"multipart/form-data; boundary=\" + boundary);\n\ntry (\n    OutputStream output = connection.getOutputStream();\n    PrintWriter writer = new PrintWriter(new OutputStreamWriter(output, charset), true);\n) {\n    // Send normal param.\n    writer.append(\"--\" + boundary).append(CRLF);\n    writer.append(\"Content-Disposition: form-data; name=\\\"param\\\"\").append(CRLF);\n    writer.append(\"Content-Type: text/plain; charset=\" + charset).append(CRLF);\n    writer.append(CRLF).append(param).append(CRLF).flush();\n\n    // Send text file.\n    writer.append(\"--\" + boundary).append(CRLF);\n    writer.append(\"Content-Disposition: form-data; name=\\\"textFile\\\"; filename=\\\"\" + textFile.getName() + \"\\\"\").append(CRLF);\n    writer.append(\"Content-Type: text/plain; charset=\" + charset).append(CRLF); // Text file itself must be saved in this charset!\n    writer.append(CRLF).flush();\n    Files.copy(textFile.toPath(), output);\n    output.flush(); // Important before continuing with writer!\n    writer.append(CRLF).flush(); // CRLF is important! It indicates end of boundary.\n\n    // Send binary file.\n    writer.append(\"--\" + boundary).append(CRLF);\n    writer.append(\"Content-Disposition: form-data; name=\\\"binaryFile\\\"; filename=\\\"\" + binaryFile.getName() + \"\\\"\").append(CRLF);\n    writer.append(\"Content-Type: \" + URLConnection.guessContentTypeFromName(binaryFile.getName())).append(CRLF);\n    writer.append(\"Content-Transfer-Encoding: binary\").append(CRLF);\n    writer.append(CRLF).flush();\n    Files.copy(binaryFile.toPath(), output);\n    output.flush(); // Important before continuing with writer!\n    writer.append(CRLF).flush(); // CRLF is important! It indicates end of boundary.\n\n    // End of multipart/form-data.\n    writer.append(\"--\" + boundary + \"--\").append(CRLF).flush();\n}\n\n// Request is lazily fired whenever you need to obtain information about response.\nint responseCode = ((HttpURLConnection) connection).getResponseCode();\nSystem.out.println(responseCode); // Should be 200\n</code></pre>\n\n<p>This code is less verbose when you use a 3rd party library like Apache Commons <a href=\"http://hc.apache.org/\" rel=\"noreferrer\">HttpComponents Client</a>.</p>\n\n<p>The Apache Commons <a href=\"http://commons.apache.org/fileupload\" rel=\"noreferrer\">FileUpload</a> as some incorrectly suggest here is only of interest in the <strong>server side</strong>. You can't use and don't need it at the client side.</p>\n\n<h3>See also</h3>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/2793150/using-java-net-urlconnection-to-fire-and-handle-http-requests\">Using java.net.URLConnection to fire and handle HTTP requests</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":249565,"reputation":9766,"user_id":525725,"accept_rate":67,"display_name":"Emmanuel Bourg"},"down_vote_count":0,"up_vote_count":45,"is_accepted":false,"score":45,"last_activity_date":1544453544,"creation_date":1378461578,"answer_id":18655049,"question_id":2469451,"body_markdown":"Here is how you would do it with [Apache HttpClient][1] (this solution is for those who don&#39;t mind using a 3rd party library):\r\n\r\n\r\n        HttpEntity entity = MultipartEntityBuilder.create()\r\n                           .addPart(&quot;file&quot;, new FileBody(file))\r\n                           .build();\r\n\r\n        HttpPost request = new HttpPost(url);\r\n        request.setEntity(entity);\r\n\r\n        HttpClient client = HttpClientBuilder.create().build();\r\n        HttpResponse response = client.execute(request);\r\n\r\n\r\n  [1]: http://hc.apache.org","title":"Upload files from Java client to a HTTP server","body":"<p>Here is how you would do it with <a href=\"http://hc.apache.org\" rel=\"noreferrer\">Apache HttpClient</a> (this solution is for those who don't mind using a 3rd party library):</p>\n\n<pre><code>    HttpEntity entity = MultipartEntityBuilder.create()\n                       .addPart(\"file\", new FileBody(file))\n                       .build();\n\n    HttpPost request = new HttpPost(url);\n    request.setEntity(entity);\n\n    HttpClient client = HttpClientBuilder.create().build();\n    HttpResponse response = client.execute(request);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1871217,"reputation":124,"user_id":1693371,"display_name":"user1693371"},"down_vote_count":3,"up_vote_count":2,"is_accepted":false,"score":-1,"last_activity_date":1401942849,"creation_date":1394782563,"answer_id":22398828,"question_id":2469451,"body_markdown":"    protected void doPost(HttpServletRequest request,\r\n\t\t\tHttpServletResponse response) throws ServletException, IOException {\r\n              \r\n\t\tboolean isMultipart = ServletFileUpload.isMultipartContent(request);\r\n\r\n\t\tif (!isMultipart) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tDiskFileItemFactory factory = new DiskFileItemFactory();\r\n\r\n\t\tfactory.setSizeThreshold(MAX_MEMORY_SIZE);\r\n\r\n\t\tfactory.setRepository(new File(System.getProperty(&quot;java.io.tmpdir&quot;)));\r\n\r\n\t\tString uploadFolder = getServletContext().getRealPath(&quot;&quot;)\r\n\t\t\t\t+ File.separator + DATA_DIRECTORY;//DATA_DIRECTORY is directory where you upload this file on the server\r\n\r\n\t\tServletFileUpload upload = new ServletFileUpload(factory);\r\n\r\n\t\tupload.setSizeMax(MAX_REQUEST_SIZE);//MAX_REQUEST_SIZE is the size which size you prefer\r\n                  \r\n\r\nAnd use `&lt;form  enctype=&quot;multipart/form-data&quot;&gt;` and use `&lt;input type=&quot;file&quot;&gt;` in the html","title":"Upload files from Java client to a HTTP server","body":"<pre><code>protected void doPost(HttpServletRequest request,\n        HttpServletResponse response) throws ServletException, IOException {\n\n    boolean isMultipart = ServletFileUpload.isMultipartContent(request);\n\n    if (!isMultipart) {\n        return;\n    }\n\n    DiskFileItemFactory factory = new DiskFileItemFactory();\n\n    factory.setSizeThreshold(MAX_MEMORY_SIZE);\n\n    factory.setRepository(new File(System.getProperty(\"java.io.tmpdir\")));\n\n    String uploadFolder = getServletContext().getRealPath(\"\")\n            + File.separator + DATA_DIRECTORY;//DATA_DIRECTORY is directory where you upload this file on the server\n\n    ServletFileUpload upload = new ServletFileUpload(factory);\n\n    upload.setSizeMax(MAX_REQUEST_SIZE);//MAX_REQUEST_SIZE is the size which size you prefer\n</code></pre>\n\n<p>And use <code>&lt;form  enctype=\"multipart/form-data\"&gt;</code> and use <code>&lt;input type=\"file\"&gt;</code> in the html</p>\n"},{"tags":[],"owner":{"account_id":9065744,"reputation":36,"user_id":6750616,"display_name":"deeplinks"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1472987969,"creation_date":1472987969,"answer_id":39316349,"question_id":2469451,"body_markdown":"    \r\n\tpublic static String simSearchByImgURL(int  catid ,String imgurl) throws IOException{\r\n\t\tCloseableHttpClient httpClient = HttpClients.createDefault();\r\n        CloseableHttpResponse response = null;\r\n        String result =null;\r\n        try {\r\n            HttpPost httppost = new HttpPost(&quot;http://api0.visualsearchapi.com:8084/vsearchtech/api/v1.0/apisim_search&quot;);\r\n            StringBody catidBody = new StringBody(catid+&quot;&quot; , ContentType.TEXT_PLAIN);\r\n            StringBody keyBody = new StringBody(APPKEY , ContentType.TEXT_PLAIN);\r\n            StringBody langBody = new StringBody(LANG , ContentType.TEXT_PLAIN);\r\n            StringBody fmtBody = new StringBody(FMT , ContentType.TEXT_PLAIN);\r\n            StringBody imgurlBody = new StringBody(imgurl , ContentType.TEXT_PLAIN);\r\n            MultipartEntityBuilder builder = MultipartEntityBuilder.create();\r\n            builder.addPart(&quot;apikey&quot;, keyBody).addPart(&quot;catid&quot;, catidBody)\r\n            .addPart(&quot;lang&quot;, langBody)\r\n            .addPart(&quot;fmt&quot;, fmtBody)\r\n            .addPart(&quot;imgurl&quot;, imgurlBody);\r\n            HttpEntity reqEntity =  builder.build();\r\n            httppost.setEntity(reqEntity);\r\n            response = httpClient.execute(httppost);\r\n            HttpEntity resEntity = response.getEntity();\r\n            if (resEntity != null) {\r\n               // result = ConvertStreamToString(resEntity.getContent(), &quot;UTF-8&quot;);\r\n                String charset = &quot;UTF-8&quot;;   \r\n  \t\t\t  String content=EntityUtils.toString(response.getEntity(), charset);   \r\n                System.out.println(content);\r\n            }\r\n            EntityUtils.consume(resEntity);\r\n        }catch(Exception e){\r\n            e.printStackTrace();\r\n        }finally {\r\n            response.close();\r\n            httpClient.close();\r\n        }\r\n        return result;\r\n\t}","title":"Upload files from Java client to a HTTP server","body":"<pre><code>public static String simSearchByImgURL(int  catid ,String imgurl) throws IOException{\n    CloseableHttpClient httpClient = HttpClients.createDefault();\n    CloseableHttpResponse response = null;\n    String result =null;\n    try {\n        HttpPost httppost = new HttpPost(\"http://api0.visualsearchapi.com:8084/vsearchtech/api/v1.0/apisim_search\");\n        StringBody catidBody = new StringBody(catid+\"\" , ContentType.TEXT_PLAIN);\n        StringBody keyBody = new StringBody(APPKEY , ContentType.TEXT_PLAIN);\n        StringBody langBody = new StringBody(LANG , ContentType.TEXT_PLAIN);\n        StringBody fmtBody = new StringBody(FMT , ContentType.TEXT_PLAIN);\n        StringBody imgurlBody = new StringBody(imgurl , ContentType.TEXT_PLAIN);\n        MultipartEntityBuilder builder = MultipartEntityBuilder.create();\n        builder.addPart(\"apikey\", keyBody).addPart(\"catid\", catidBody)\n        .addPart(\"lang\", langBody)\n        .addPart(\"fmt\", fmtBody)\n        .addPart(\"imgurl\", imgurlBody);\n        HttpEntity reqEntity =  builder.build();\n        httppost.setEntity(reqEntity);\n        response = httpClient.execute(httppost);\n        HttpEntity resEntity = response.getEntity();\n        if (resEntity != null) {\n           // result = ConvertStreamToString(resEntity.getContent(), \"UTF-8\");\n            String charset = \"UTF-8\";   \n          String content=EntityUtils.toString(response.getEntity(), charset);   \n            System.out.println(content);\n        }\n        EntityUtils.consume(resEntity);\n    }catch(Exception e){\n        e.printStackTrace();\n    }finally {\n        response.close();\n        httpClient.close();\n    }\n    return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9170733,"reputation":141,"user_id":6818354,"display_name":"prashant00101"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1488460703,"creation_date":1488460035,"answer_id":42556356,"question_id":2469451,"body_markdown":"click link get example  file upload clint java with apache HttpComponents \r\n\r\nhttp://hc.apache.org/httpcomponents-client-ga/httpmime/examples/org/apache/http/examples/entity/mime/ClientMultipartFormPost.java\r\n\r\nand library downalod link\r\n\r\nhttps://hc.apache.org/downloads.cgi\r\n\r\nuse 4.5.3.zip it&#39;s working fine in my code\r\n\r\n\r\nand my working code..\r\n \r\n\r\n    import java.io.File;\r\n    import org.apache.http.HttpEntity;\r\n    import org.apache.http.client.methods.CloseableHttpResponse;\r\n    import org.apache.http.client.methods.HttpPost;\r\n    import org.apache.http.entity.ContentType;\r\n    import org.apache.http.entity.mime.MultipartEntityBuilder;\r\n    import org.apache.http.entity.mime.content.FileBody;\r\n    import org.apache.http.entity.mime.content.StringBody;\r\n    import org.apache.http.impl.client.CloseableHttpClient;\r\n    import org.apache.http.impl.client.HttpClients;\r\n    import org.apache.http.util.EntityUtils;\r\n\r\n    public class ClientMultipartFormPost {\r\n\r\n         public static void main(String[] args) throws Exception {\r\n        \r\n              CloseableHttpClient httpclient = HttpClients.createDefault();\r\n              try {\r\n                 HttpPost httppost = new HttpPost(&quot;http://localhost:8080/MyWebSite1/UploadDownloadFileServlet&quot;);\r\n\r\n                 FileBody bin = new FileBody(new File(&quot;E:\\\\meter.jpg&quot;));\r\n                 StringBody comment = new StringBody(&quot;A binary file of some kind&quot;, ContentType.TEXT_PLAIN);\r\n\r\n                 HttpEntity reqEntity = MultipartEntityBuilder.create()\r\n                    .addPart(&quot;bin&quot;, bin)\r\n                    .addPart(&quot;comment&quot;, comment)\r\n                    .build();\r\n\r\n\r\n                 httppost.setEntity(reqEntity);\r\n\r\n                 System.out.println(&quot;executing request &quot; + httppost.getRequestLine());\r\n                 CloseableHttpResponse response = httpclient.execute(httppost);\r\n               try {\r\n                    System.out.println(&quot;----------------------------------------&quot;);\r\n                    System.out.println(response.getStatusLine());\r\n                    HttpEntity resEntity = response.getEntity();\r\n                    if (resEntity != null) {\r\n                         System.out.println(&quot;Response content length: &quot; +    resEntity.getContentLength());\r\n                    }\r\n                  EntityUtils.consume(resEntity);\r\n                 } finally {\r\n                     response.close();\r\n                }\r\n           } finally {\r\n              httpclient.close();\r\n          }\r\n       }\r\n\r\n    }","title":"Upload files from Java client to a HTTP server","body":"<p>click link get example  file upload clint java with apache HttpComponents </p>\n\n<p><a href=\"http://hc.apache.org/httpcomponents-client-ga/httpmime/examples/org/apache/http/examples/entity/mime/ClientMultipartFormPost.java\" rel=\"noreferrer\">http://hc.apache.org/httpcomponents-client-ga/httpmime/examples/org/apache/http/examples/entity/mime/ClientMultipartFormPost.java</a></p>\n\n<p>and library downalod link</p>\n\n<p><a href=\"https://hc.apache.org/downloads.cgi\" rel=\"noreferrer\">https://hc.apache.org/downloads.cgi</a></p>\n\n<p>use 4.5.3.zip it's working fine in my code</p>\n\n<p>and my working code..</p>\n\n<pre><code>import java.io.File;\nimport org.apache.http.HttpEntity;\nimport org.apache.http.client.methods.CloseableHttpResponse;\nimport org.apache.http.client.methods.HttpPost;\nimport org.apache.http.entity.ContentType;\nimport org.apache.http.entity.mime.MultipartEntityBuilder;\nimport org.apache.http.entity.mime.content.FileBody;\nimport org.apache.http.entity.mime.content.StringBody;\nimport org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClients;\nimport org.apache.http.util.EntityUtils;\n\npublic class ClientMultipartFormPost {\n\n     public static void main(String[] args) throws Exception {\n\n          CloseableHttpClient httpclient = HttpClients.createDefault();\n          try {\n             HttpPost httppost = new HttpPost(\"http://localhost:8080/MyWebSite1/UploadDownloadFileServlet\");\n\n             FileBody bin = new FileBody(new File(\"E:\\\\meter.jpg\"));\n             StringBody comment = new StringBody(\"A binary file of some kind\", ContentType.TEXT_PLAIN);\n\n             HttpEntity reqEntity = MultipartEntityBuilder.create()\n                .addPart(\"bin\", bin)\n                .addPart(\"comment\", comment)\n                .build();\n\n\n             httppost.setEntity(reqEntity);\n\n             System.out.println(\"executing request \" + httppost.getRequestLine());\n             CloseableHttpResponse response = httpclient.execute(httppost);\n           try {\n                System.out.println(\"----------------------------------------\");\n                System.out.println(response.getStatusLine());\n                HttpEntity resEntity = response.getEntity();\n                if (resEntity != null) {\n                     System.out.println(\"Response content length: \" +    resEntity.getContentLength());\n                }\n              EntityUtils.consume(resEntity);\n             } finally {\n                 response.close();\n            }\n       } finally {\n          httpclient.close();\n      }\n   }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16725821,"reputation":21,"user_id":12089470,"display_name":"Nils Samuelsson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1569932781,"creation_date":1569932781,"answer_id":58184762,"question_id":2469451,"body_markdown":"Here is how you could do it with Java 11&#39;s java.net.http package:\r\n\r\n\t\tvar fileA = new File(&quot;a.pdf&quot;);\r\n\t\tvar fileB = new File(&quot;b.pdf&quot;);\r\n\t\t\r\n\t\tvar mimeMultipartData = MimeMultipartData.newBuilder()\r\n\t    \t\t.withCharset(StandardCharsets.UTF_8)\r\n\t    \t\t.addFile(&quot;file1&quot;, fileA.toPath(), Files.probeContentType(fileA.toPath()))\r\n\t    \t\t.addFile(&quot;file2&quot;, fileB.toPath(), Files.probeContentType(fileB.toPath()))\r\n\t    \t\t.build();\r\n\t    \r\n\t\tvar request = HttpRequest.newBuilder()\r\n\t\t\t\t.header(&quot;Content-Type&quot;, mimeMultipartData.getContentType())\r\n\t\t\t\t.POST(mimeMultipartData.getBodyPublisher())\r\n\t\t\t\t.uri(URI.create(&quot;http://somehost/upload&quot;))\r\n\t            .build();\r\n\t\t\r\n\t\tvar httpClient = HttpClient.newBuilder().build();\r\n\t\tvar response = httpClient.send(request, BodyHandlers.ofString());\r\n\r\nWith the following MimeMultipartData:\r\n\r\n\tpublic class MimeMultipartData {\r\n\t\r\n\t\tpublic static class Builder {\r\n\t\r\n\t\t\tprivate String boundary;\r\n\t\t\tprivate Charset charset = StandardCharsets.UTF_8;\r\n\t\t\tprivate List&lt;MimedFile&gt; files = new ArrayList&lt;MimedFile&gt;();\r\n\t\t\tprivate Map&lt;String, String&gt; texts = new LinkedHashMap&lt;&gt;();\r\n\t\r\n\t\t\tprivate Builder() {\r\n\t\t\t\tthis.boundary = new BigInteger(128, new Random()).toString();\r\n\t\t\t}\r\n\t\r\n\t\t\tpublic Builder withCharset(Charset charset) {\r\n\t\t\t\tthis.charset = charset;\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\r\n\t\t\tpublic Builder withBoundary(String boundary) {\r\n\t\t\t\tthis.boundary = boundary;\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\r\n\t\t\tpublic Builder addFile(String name, Path path, String mimeType) {\r\n\t\t\t\tthis.files.add(new MimedFile(name, path, mimeType));\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\r\n\t\t\tpublic Builder addText(String name, String text) {\r\n\t\t\t\ttexts.put(name, text);\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\r\n\t\t\tpublic MimeMultipartData build() throws IOException {\r\n\t\t\t\tMimeMultipartData mimeMultipartData = new MimeMultipartData();\r\n\t\t\t\tmimeMultipartData.boundary = boundary;\r\n\t\t\t\t\r\n\t\t\t\tvar newline = &quot;\\r\\n&quot;.getBytes(charset);\r\n\t\t\t\tvar byteArrayOutputStream = new ByteArrayOutputStream();\r\n\t\t\t\tfor (var f : files) {\r\n\t\t\t\t\tbyteArrayOutputStream.write((&quot;--&quot; + boundary).getBytes(charset)); \r\n\t\t\t\t\tbyteArrayOutputStream.write(newline);\r\n\t\t\t\t\tbyteArrayOutputStream.write((&quot;Content-Disposition: form-data; name=\\&quot;&quot; + f.name + &quot;\\&quot;; filename=\\&quot;&quot; + f.path.getFileName() + &quot;\\&quot;&quot;).getBytes(charset));\r\n\t\t\t\t\tbyteArrayOutputStream.write(newline);\r\n\t\t\t\t\tbyteArrayOutputStream.write((&quot;Content-Type: &quot; + f.mimeType).getBytes(charset));\r\n\t\t\t\t\tbyteArrayOutputStream.write(newline);\r\n\t\t\t\t\tbyteArrayOutputStream.write(newline);\r\n\t\t\t\t\tbyteArrayOutputStream.write(Files.readAllBytes(f.path));\r\n\t\t\t\t\tbyteArrayOutputStream.write(newline);\r\n\t\t\t\t}\r\n\t\t\t\tfor (var entry: texts.entrySet()) {\r\n\t\t\t\t\tbyteArrayOutputStream.write((&quot;--&quot; + boundary).getBytes(charset));\r\n\t\t\t\t\tbyteArrayOutputStream.write(newline);\r\n\t\t\t\t\tbyteArrayOutputStream.write((&quot;Content-Disposition: form-data; name=\\&quot;&quot; + entry.getKey() + &quot;\\&quot;&quot;).getBytes(charset));\r\n\t\t\t\t\tbyteArrayOutputStream.write(newline);\r\n\t\t\t\t\tbyteArrayOutputStream.write(newline);\r\n\t\t\t\t\tbyteArrayOutputStream.write(entry.getValue().getBytes(charset));\r\n\t\t\t\t\tbyteArrayOutputStream.write(newline);\r\n\t\t\t\t}\r\n\t\t\t\tbyteArrayOutputStream.write((&quot;--&quot; + boundary + &quot;--&quot;).getBytes(charset));\r\n\t\t\t\t\r\n\t\t\t\tmimeMultipartData.bodyPublisher = BodyPublishers.ofByteArray(byteArrayOutputStream.toByteArray());\r\n\t\t\t\treturn mimeMultipartData;\r\n\t\t\t}\r\n\t\r\n\t\t\tpublic class MimedFile {\r\n\t\r\n\t\t\t\tpublic final String name;\r\n\t\t\t\tpublic final Path path;\r\n\t\t\t\tpublic final String mimeType;\r\n\t\r\n\t\t\t\tpublic MimedFile(String name, Path path, String mimeType) {\r\n\t\t\t\t\tthis.name = name;\r\n\t\t\t\t\tthis.path = path;\r\n\t\t\t\t\tthis.mimeType = mimeType;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tprivate String boundary;\r\n\t\tprivate BodyPublisher bodyPublisher;\r\n\t\r\n\t\tprivate MimeMultipartData() {\r\n\t\t}\r\n\t\r\n\t\tpublic static Builder newBuilder() {\r\n\t\t\treturn new Builder();\r\n\t\t}\r\n\t\r\n\t\tpublic BodyPublisher getBodyPublisher() throws IOException {\r\n\t\t\treturn bodyPublisher;\r\n\t\t}\r\n\t\r\n\t\tpublic String getContentType() {\r\n\t\t\treturn &quot;multipart/form-data; boundary=&quot; + boundary;\r\n\t\t}\r\n\t\r\n\t}\r\n\r\n\r\n","title":"Upload files from Java client to a HTTP server","body":"<p>Here is how you could do it with Java 11's java.net.http package:</p>\n\n<pre><code>    var fileA = new File(\"a.pdf\");\n    var fileB = new File(\"b.pdf\");\n\n    var mimeMultipartData = MimeMultipartData.newBuilder()\n            .withCharset(StandardCharsets.UTF_8)\n            .addFile(\"file1\", fileA.toPath(), Files.probeContentType(fileA.toPath()))\n            .addFile(\"file2\", fileB.toPath(), Files.probeContentType(fileB.toPath()))\n            .build();\n\n    var request = HttpRequest.newBuilder()\n            .header(\"Content-Type\", mimeMultipartData.getContentType())\n            .POST(mimeMultipartData.getBodyPublisher())\n            .uri(URI.create(\"http://somehost/upload\"))\n            .build();\n\n    var httpClient = HttpClient.newBuilder().build();\n    var response = httpClient.send(request, BodyHandlers.ofString());\n</code></pre>\n\n<p>With the following MimeMultipartData:</p>\n\n<pre><code>public class MimeMultipartData {\n\n    public static class Builder {\n\n        private String boundary;\n        private Charset charset = StandardCharsets.UTF_8;\n        private List&lt;MimedFile&gt; files = new ArrayList&lt;MimedFile&gt;();\n        private Map&lt;String, String&gt; texts = new LinkedHashMap&lt;&gt;();\n\n        private Builder() {\n            this.boundary = new BigInteger(128, new Random()).toString();\n        }\n\n        public Builder withCharset(Charset charset) {\n            this.charset = charset;\n            return this;\n        }\n\n        public Builder withBoundary(String boundary) {\n            this.boundary = boundary;\n            return this;\n        }\n\n        public Builder addFile(String name, Path path, String mimeType) {\n            this.files.add(new MimedFile(name, path, mimeType));\n            return this;\n        }\n\n        public Builder addText(String name, String text) {\n            texts.put(name, text);\n            return this;\n        }\n\n        public MimeMultipartData build() throws IOException {\n            MimeMultipartData mimeMultipartData = new MimeMultipartData();\n            mimeMultipartData.boundary = boundary;\n\n            var newline = \"\\r\\n\".getBytes(charset);\n            var byteArrayOutputStream = new ByteArrayOutputStream();\n            for (var f : files) {\n                byteArrayOutputStream.write((\"--\" + boundary).getBytes(charset)); \n                byteArrayOutputStream.write(newline);\n                byteArrayOutputStream.write((\"Content-Disposition: form-data; name=\\\"\" + f.name + \"\\\"; filename=\\\"\" + f.path.getFileName() + \"\\\"\").getBytes(charset));\n                byteArrayOutputStream.write(newline);\n                byteArrayOutputStream.write((\"Content-Type: \" + f.mimeType).getBytes(charset));\n                byteArrayOutputStream.write(newline);\n                byteArrayOutputStream.write(newline);\n                byteArrayOutputStream.write(Files.readAllBytes(f.path));\n                byteArrayOutputStream.write(newline);\n            }\n            for (var entry: texts.entrySet()) {\n                byteArrayOutputStream.write((\"--\" + boundary).getBytes(charset));\n                byteArrayOutputStream.write(newline);\n                byteArrayOutputStream.write((\"Content-Disposition: form-data; name=\\\"\" + entry.getKey() + \"\\\"\").getBytes(charset));\n                byteArrayOutputStream.write(newline);\n                byteArrayOutputStream.write(newline);\n                byteArrayOutputStream.write(entry.getValue().getBytes(charset));\n                byteArrayOutputStream.write(newline);\n            }\n            byteArrayOutputStream.write((\"--\" + boundary + \"--\").getBytes(charset));\n\n            mimeMultipartData.bodyPublisher = BodyPublishers.ofByteArray(byteArrayOutputStream.toByteArray());\n            return mimeMultipartData;\n        }\n\n        public class MimedFile {\n\n            public final String name;\n            public final Path path;\n            public final String mimeType;\n\n            public MimedFile(String name, Path path, String mimeType) {\n                this.name = name;\n                this.path = path;\n                this.mimeType = mimeType;\n            }\n        }\n    }\n\n    private String boundary;\n    private BodyPublisher bodyPublisher;\n\n    private MimeMultipartData() {\n    }\n\n    public static Builder newBuilder() {\n        return new Builder();\n    }\n\n    public BodyPublisher getBodyPublisher() throws IOException {\n        return bodyPublisher;\n    }\n\n    public String getContentType() {\n        return \"multipart/form-data; boundary=\" + boundary;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4117322,"reputation":27,"user_id":3378589,"display_name":"Farzan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662759444,"creation_date":1662759444,"answer_id":73667725,"question_id":2469451,"body_markdown":"I suggest to use Apache http classes instead of Vanilla Java. This is a Java 8 compatible simple solution:\r\n    \r\n    // Create http client.\r\n\r\n    CloseableHttpClient httpClient = HttpClients.createDefault();\r\n\tfinal File file = new File(&quot;&lt;FILE PATH TO POST&gt;&quot;);\r\n\r\n    // Specify the content type of the attached file.\r\n\r\n    FileBody filebody = new FileBody(file, ContentType.MULTIPART_FORM_DATA);\r\n    MultipartEntityBuilder entitybuilder = MultipartEntityBuilder.create();\r\n\tentitybuilder.setMode(HttpMultipartMode.BROWSER_COMPATIBLE);\r\n\r\n    // Add the binary file to the entity we send later on.\r\n\r\n\tentitybuilder.addBinaryBody(&quot;file&quot;, file);\r\n\tHttpEntity mutiPartHttpEntity = entitybuilder.build();\r\n\tRequestBuilder reqbuilder = RequestBuilder.post(&quot;URL TO POST DATA WITH ALL THE PARAMETERS&quot;);\r\n    reqbuilder.setEntity(mutiPartHttpEntity);\r\n\tHttpUriRequest multipartRequest = reqbuilder.build();\r\n\r\n    // Using the http client, execute http post. Variable httpresponse would contain the reply back explaining http response code, and ...\r\n\r\n\tHttpResponse httpresponse = httpClient.execute(multipartRequest);\r\n    httpClient.close();\r\n\r\n 1. In order to embed the parameters to the post message, you can simply embed them in the URL used to post data. Use this rule: &lt;root URL&gt;?&lt;Parameter1 name&gt;=&lt;value1&gt;&amp;&lt;parameter2&gt;=&lt;value2&gt;. An example would be the following:\r\n    https://company.com/jobs/status?jobId=876&amp;apiKey=123\r\n 2. To find out which data type suites your file which is posted with Http post, see this link: https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types\r\n 3. Import packages of org.apache.http.*\r\n 4. In case importing did not work, you might need to change pom.xml file (if you are using Maven) and add the Apache package to this xml file. [See this.][1]\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/org.apache.httpcomponents/httpclient","title":"Upload files from Java client to a HTTP server","body":"<p>I suggest to use Apache http classes instead of Vanilla Java. This is a Java 8 compatible simple solution:</p>\n<pre><code>// Create http client.\n\nCloseableHttpClient httpClient = HttpClients.createDefault();\nfinal File file = new File(&quot;&lt;FILE PATH TO POST&gt;&quot;);\n\n// Specify the content type of the attached file.\n\nFileBody filebody = new FileBody(file, ContentType.MULTIPART_FORM_DATA);\nMultipartEntityBuilder entitybuilder = MultipartEntityBuilder.create();\nentitybuilder.setMode(HttpMultipartMode.BROWSER_COMPATIBLE);\n\n// Add the binary file to the entity we send later on.\n\nentitybuilder.addBinaryBody(&quot;file&quot;, file);\nHttpEntity mutiPartHttpEntity = entitybuilder.build();\nRequestBuilder reqbuilder = RequestBuilder.post(&quot;URL TO POST DATA WITH ALL THE PARAMETERS&quot;);\nreqbuilder.setEntity(mutiPartHttpEntity);\nHttpUriRequest multipartRequest = reqbuilder.build();\n\n// Using the http client, execute http post. Variable httpresponse would contain the reply back explaining http response code, and ...\n\nHttpResponse httpresponse = httpClient.execute(multipartRequest);\nhttpClient.close();\n</code></pre>\n<ol>\n<li>In order to embed the parameters to the post message, you can simply embed them in the URL used to post data. Use this rule: ?=&amp;=. An example would be the following:\n<a href=\"https://company.com/jobs/status?jobId=876&amp;apiKey=123\" rel=\"nofollow noreferrer\">https://company.com/jobs/status?jobId=876&amp;apiKey=123</a></li>\n<li>To find out which data type suites your file which is posted with Http post, see this link: <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types</a></li>\n<li>Import packages of org.apache.http.*</li>\n<li>In case importing did not work, you might need to change pom.xml file (if you are using Maven) and add the Apache package to this xml file. <a href=\"https://mvnrepository.com/artifact/org.apache.httpcomponents/httpclient\" rel=\"nofollow noreferrer\">See this.</a></li>\n</ol>\n"}],"owner":{"account_id":103405,"reputation":3996,"user_id":276975,"accept_rate":61,"display_name":"Marius"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":248378,"favorite_count":0,"down_vote_count":0,"up_vote_count":82,"accepted_answer_id":2469587,"answer_count":8,"score":82,"last_activity_date":1662759444,"creation_date":1268912199,"question_id":2469451,"body_markdown":"I&#39;d like to upload a few files to a HTTP server. Basically what I need is some sort of a POST request to the server with a few parameters and the files. I&#39;ve seen examples of just uploading files, but didn&#39;t find how to also pass additional parameters. \r\n\r\nWhat&#39;s the simplest and free solution of doing this? Does anyone have any file upload examples that I could study? I&#39;ve been googling for a few hours, but (maybe it&#39;s just one of those days) couldn&#39;t find exactly what I needed. The best solution would be something that doesn&#39;t involve any third party classes or libraries.","title":"Upload files from Java client to a HTTP server","body":"<p>I'd like to upload a few files to a HTTP server. Basically what I need is some sort of a POST request to the server with a few parameters and the files. I've seen examples of just uploading files, but didn't find how to also pass additional parameters. </p>\n\n<p>What's the simplest and free solution of doing this? Does anyone have any file upload examples that I could study? I've been googling for a few hours, but (maybe it's just one of those days) couldn't find exactly what I needed. The best solution would be something that doesn't involve any third party classes or libraries.</p>\n"},{"tags":["java","missing-data","kali-linux"],"comments":[{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":0,"creation_date":1662748886,"post_id":73666286,"comment_id":130086094,"body_markdown":"Paste the content of the screenshot.","body":"Paste the content of the screenshot."},{"owner":{"account_id":24762931,"reputation":103,"user_id":18647093,"display_name":"Ace of Diamonds"},"score":0,"creation_date":1662749097,"post_id":73666286,"comment_id":130086157,"body_markdown":"Right, sorry, gonna edit the post","body":"Right, sorry, gonna edit the post"}],"answers":[{"tags":[],"owner":{"account_id":1674701,"reputation":3061,"user_id":1540501,"accept_rate":60,"display_name":"ivan.ukr"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1662759356,"creation_date":1662759356,"answer_id":73667714,"question_id":73666286,"body_markdown":"The cause of this error may be that only &quot;headless&quot; part of JDK is installed, which does not include GUI libraries. Try to do `sudo apt install openjdk-17-jdk`, this should add necessary parts if they are missing.\r\n ","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: Can&#39;t load library: /usr/lib/jvm/java-17-openjdk-amd64/lib/libawt_xawt.so","body":"<p>The cause of this error may be that only &quot;headless&quot; part of JDK is installed, which does not include GUI libraries. Try to do <code>sudo apt install openjdk-17-jdk</code>, this should add necessary parts if they are missing.</p>\n"}],"owner":{"account_id":24762931,"reputation":103,"user_id":18647093,"display_name":"Ace of Diamonds"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10734,"favorite_count":0,"down_vote_count":4,"up_vote_count":10,"answer_count":1,"score":6,"last_activity_date":1662759356,"creation_date":1662748733,"question_id":73666286,"body_markdown":"Just wanna load a .jar file but I can&#39;t, and when running ``java --version`` I get:\r\n\r\n``openjdk 17.0.4 2022-07-19``,\r\n\r\n``OpenJDK Runtime Environment (build 17.0.4+8-Debian-1)``, and\r\n\r\n``OpenJDK 64-Bit Server VM (build 17.0.4+8-Debian-1, mixed mode, sharing)``\r\n\r\n    Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: Can&#39;t load library: /usr/lib/jvm/java-17-openjdk-amd64/lib/libawt_xawt.so\r\n        at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2393)\r\n        at java.base/java.lang.Runtime.load0(Runtime.java:755)\r\n        at java.base/java.lang.System.load(System.java:1953)\r\n        at java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\r\n        at java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:388)\r\n        at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:232)\r\n        at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:174)\r\n        at java.base/jdk.internal.loader.NativeLibraries.findFromPaths(NativeLibraries.java:315)\r\n        at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:285)\r\n        at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2398)\r\n        at java.base/java.lang.Runtime.loadLibrary0(Runtime.java:818)\r\n        at java.base/java.lang.System.loadLibrary(System.java:1989)\r\n        at java.desktop/java.awt.Toolkit$2.run(Toolkit.java:1392)\r\n        at java.desktop/java.awt.Toolkit$2.run(Toolkit.java:1390)\r\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:318)\r\n        at java.desktop/java.awt.Toolkit.loadLibraries(Toolkit.java:1389)\r\n        at java.desktop/java.awt.Toolkit.initStatic(Toolkit.java:1427)\r\n        at java.desktop/java.awt.Toolkit.&lt;clinit&gt;(Toolkit.java:1401)\r\n        at java.desktop/java.awt.Component.&lt;clinit&gt;(Component.java:624)\r\n        at MarieSim1.main(MarieSim1.java:15)\r\n\r\nI&#39;m running Kali Linux and I&#39;m pretty new to this, so any help with downloading necessary libraries would be greatly appreciated\r\n","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: Can&#39;t load library: /usr/lib/jvm/java-17-openjdk-amd64/lib/libawt_xawt.so","body":"<p>Just wanna load a .jar file but I can't, and when running <code>java --version</code> I get:</p>\n<p><code>openjdk 17.0.4 2022-07-19</code>,</p>\n<p><code>OpenJDK Runtime Environment (build 17.0.4+8-Debian-1)</code>, and</p>\n<p><code>OpenJDK 64-Bit Server VM (build 17.0.4+8-Debian-1, mixed mode, sharing)</code></p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: Can't load library: /usr/lib/jvm/java-17-openjdk-amd64/lib/libawt_xawt.so\n    at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2393)\n    at java.base/java.lang.Runtime.load0(Runtime.java:755)\n    at java.base/java.lang.System.load(System.java:1953)\n    at java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\n    at java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:388)\n    at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:232)\n    at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:174)\n    at java.base/jdk.internal.loader.NativeLibraries.findFromPaths(NativeLibraries.java:315)\n    at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:285)\n    at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2398)\n    at java.base/java.lang.Runtime.loadLibrary0(Runtime.java:818)\n    at java.base/java.lang.System.loadLibrary(System.java:1989)\n    at java.desktop/java.awt.Toolkit$2.run(Toolkit.java:1392)\n    at java.desktop/java.awt.Toolkit$2.run(Toolkit.java:1390)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:318)\n    at java.desktop/java.awt.Toolkit.loadLibraries(Toolkit.java:1389)\n    at java.desktop/java.awt.Toolkit.initStatic(Toolkit.java:1427)\n    at java.desktop/java.awt.Toolkit.&lt;clinit&gt;(Toolkit.java:1401)\n    at java.desktop/java.awt.Component.&lt;clinit&gt;(Component.java:624)\n    at MarieSim1.main(MarieSim1.java:15)\n</code></pre>\n<p>I'm running Kali Linux and I'm pretty new to this, so any help with downloading necessary libraries would be greatly appreciated</p>\n"},{"tags":["java","java-stream","mapping","predicate"],"comments":[{"owner":{"account_id":16000784,"reputation":301,"user_id":11547512,"display_name":"Anthony Cathers"},"score":0,"creation_date":1662754756,"post_id":73667007,"comment_id":130087498,"body_markdown":"afaik there is nothing like that, though for this situation might be simpler just to wrap the parse method in your own that does the check, and returns null if the String is empty, which is what you&#39;re doing in the first example, just method references look nicer for longer logic imo.","body":"afaik there is nothing like that, though for this situation might be simpler just to wrap the parse method in your own that does the check, and returns null if the String is empty, which is what you&#39;re doing in the first example, just method references look nicer for longer logic imo."}],"answers":[{"tags":[],"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1662755540,"creation_date":1662755540,"answer_id":73667238,"question_id":73667007,"body_markdown":"You can just simply use `filter` to validate and then only `map`\r\n\r\n    Stream&lt;Year&gt; yearsFound = yearStrings.filter(yearString-&gt;!yearString.isEmpty()).map(Year::parse)\r\n        ","title":"Java stream map-if-or-else with predicate and alternative value","body":"<p>You can just simply use <code>filter</code> to validate and then only <code>map</code></p>\n<pre><code>Stream&lt;Year&gt; yearsFound = yearStrings.filter(yearString-&gt;!yearString.isEmpty()).map(Year::parse)\n    \n</code></pre>\n"},{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662758469,"creation_date":1662756217,"answer_id":73667325,"question_id":73667007,"body_markdown":"There is not a very much better way of doing it than you have it - it might be nicer if you extracted it to a method, but that&#39;s really it.\r\n\r\nAnother way might be to construct Optionals from all values, and then use `Optional.filter` to map empty values to empty optionals:\r\n\r\n```\r\nyearStreams.map(Optional::of)\r\n           .map(opt -&gt; opt.filter(Predicate.not(String::isEmpty)));\r\n```\r\n\r\nIs this _better_? Probably not.\r\n\r\nYet another way would be to make use of something like [Guava&#39;s `Strings.emptyToNull`](https://guava.dev/releases/19.0/api/docs/com/google/common/base/Strings.html#emptyToNull(java.lang.String)) (other libraries are available), which turns your empty strings into null first; and then use `Optional.ofNullable` to turn non-nulls and nulls into non-empty and empty `Optional`s, respectively:\r\n\r\n```\r\nyearStreams.map(Strings::emptyToNull)\r\n           .map(Optional::ofNullable)\r\n```","title":"Java stream map-if-or-else with predicate and alternative value","body":"<p>There is not a very much better way of doing it than you have it - it might be nicer if you extracted it to a method, but that's really it.</p>\n<p>Another way might be to construct Optionals from all values, and then use <code>Optional.filter</code> to map empty values to empty optionals:</p>\n<pre><code>yearStreams.map(Optional::of)\n           .map(opt -&gt; opt.filter(Predicate.not(String::isEmpty)));\n</code></pre>\n<p>Is this <em>better</em>? Probably not.</p>\n<p>Yet another way would be to make use of something like <a href=\"https://guava.dev/releases/19.0/api/docs/com/google/common/base/Strings.html#emptyToNull(java.lang.String)\" rel=\"nofollow noreferrer\">Guava's <code>Strings.emptyToNull</code></a> (other libraries are available), which turns your empty strings into null first; and then use <code>Optional.ofNullable</code> to turn non-nulls and nulls into non-empty and empty <code>Optional</code>s, respectively:</p>\n<pre><code>yearStreams.map(Strings::emptyToNull)\n           .map(Optional::ofNullable)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662759116,"creation_date":1662756858,"answer_id":73667398,"question_id":73667007,"body_markdown":"It&#39;s hardly possible to combine all these actions smoothly in well-readable way within a single stream operation.\r\n\r\nHere&#39;s a weird method-chaining with Java 16 [`mapMulti()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#mapMulti(java.util.function.BiConsumer)):\r\n\r\n```\r\nStream&lt;Optional&lt;Year&gt;&gt; yearsFound = yearStrings\r\n    .mapMulti((yearString, consumer) -&gt; \r\n        Optional.of(yearString).filter(s -&gt; !s.isEmpty()).map(Year::parse)\r\n                .ifPresentOrElse(year -&gt; consumer.accept(Optional.of(year)),\r\n                    () -&gt; consumer.accept(Optional.empty()))\r\n    );\r\n```","title":"Java stream map-if-or-else with predicate and alternative value","body":"<p>It's hardly possible to combine all these actions smoothly in well-readable way within a single stream operation.</p>\n<p>Here's a weird method-chaining with Java 16 <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#mapMulti(java.util.function.BiConsumer)\" rel=\"nofollow noreferrer\"><code>mapMulti()</code></a>:</p>\n<pre><code>Stream&lt;Optional&lt;Year&gt;&gt; yearsFound = yearStrings\n    .mapMulti((yearString, consumer) -&gt; \n        Optional.of(yearString).filter(s -&gt; !s.isEmpty()).map(Year::parse)\n                .ifPresentOrElse(year -&gt; consumer.accept(Optional.of(year)),\n                    () -&gt; consumer.accept(Optional.empty()))\n    );\n</code></pre>\n"}],"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1592,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":3,"score":1,"last_activity_date":1662759116,"creation_date":1662753890,"question_id":73667007,"body_markdown":"Do Java streams have a convenient way to map based upon a predicate, but if the predicate is not met to map to some other value?\r\n\r\nLet&#39;s say I have `Stream.of(&quot;2021&quot;, &quot;&quot;, &quot;2023&quot;)`. I want to map that to `Stream.of(Optional.of(Year.of(2021)), Optional.empty(), Optional.of(Year.of(2023)))`. Here&#39;s one way I could do that:\r\n\r\n```java\r\nStream&lt;String&gt; yearStrings = Stream.of(&quot;2021&quot;, &quot;&quot;, &quot;2023&quot;);\r\nStream&lt;Optional&lt;Year&gt;&gt; yearsFound = yearStrings.map(yearString -&gt;\r\n    !yearString.isEmpty() ? Year.parse(yearString) : null)\r\n        .map(Optional::ofNullable);\r\n```\r\n\r\nBut here is what I would like to do, using a hypothetical filter-map:\r\n\r\n\r\n```java\r\nStream&lt;String&gt; yearStrings = Stream.of(&quot;2021&quot;, &quot;&quot;, &quot;2023&quot;);\r\nStream&lt;Optional&lt;Year&gt;&gt; yearsFound = yearStrings.mapIfOrElse(not(String::isEmpty),\r\n    Year::parse, null).map(Optional::ofNullable);\r\n```\r\n\r\nOf course I can write my own `mapIfOrElse(Predicate&lt;&gt;, Function&lt;&gt;, T)` function to use with `Stream.map()`, but I wanted to check if there is something similar in Java&#39;s existing arsenal that I&#39;ve missed.\r\n","title":"Java stream map-if-or-else with predicate and alternative value","body":"<p>Do Java streams have a convenient way to map based upon a predicate, but if the predicate is not met to map to some other value?</p>\n<p>Let's say I have <code>Stream.of(&quot;2021&quot;, &quot;&quot;, &quot;2023&quot;)</code>. I want to map that to <code>Stream.of(Optional.of(Year.of(2021)), Optional.empty(), Optional.of(Year.of(2023)))</code>. Here's one way I could do that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Stream&lt;String&gt; yearStrings = Stream.of(&quot;2021&quot;, &quot;&quot;, &quot;2023&quot;);\nStream&lt;Optional&lt;Year&gt;&gt; yearsFound = yearStrings.map(yearString -&gt;\n    !yearString.isEmpty() ? Year.parse(yearString) : null)\n        .map(Optional::ofNullable);\n</code></pre>\n<p>But here is what I would like to do, using a hypothetical filter-map:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Stream&lt;String&gt; yearStrings = Stream.of(&quot;2021&quot;, &quot;&quot;, &quot;2023&quot;);\nStream&lt;Optional&lt;Year&gt;&gt; yearsFound = yearStrings.mapIfOrElse(not(String::isEmpty),\n    Year::parse, null).map(Optional::ofNullable);\n</code></pre>\n<p>Of course I can write my own <code>mapIfOrElse(Predicate&lt;&gt;, Function&lt;&gt;, T)</code> function to use with <code>Stream.map()</code>, but I wanted to check if there is something similar in Java's existing arsenal that I've missed.</p>\n"},{"tags":["java","hibernate","spring-data","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1556099167,"creation_date":1431375664,"answer_id":30176929,"question_id":30175589,"body_markdown":"This is a known issue of hibernate. In certain scenarios (and you found one of them) it violates constraints on foreign key relations. There are various options (but I&#39;m afraid you might not like any of them)\r\n\r\n* remove the constraint. I know, I know ..\r\n\r\n* make the [constraint deferred][1]. Not sure if this feature is available in other databases but Oracle.\r\n\r\n* limit the expectations to JPA. Seriously, it looks like you expecting more from it then it will give you. I highly recommend [reading this article][2] before proceeding with any project using any kind of ORM.\r\n\r\n\r\n  [1]: http://docs.oracle.com/cd/B19306_01/server.102/b14200/clauses002.htm#sthref2934\r\n  [2]: http://blogs.tedneward.com/post/the-vietnam-of-computer-science/","title":"Spring-Data JPA: modelling a graph getting &#39;column violates not-null&#39; when removing edges","body":"<p>This is a known issue of hibernate. In certain scenarios (and you found one of them) it violates constraints on foreign key relations. There are various options (but I'm afraid you might not like any of them)</p>\n\n<ul>\n<li><p>remove the constraint. I know, I know ..</p></li>\n<li><p>make the <a href=\"http://docs.oracle.com/cd/B19306_01/server.102/b14200/clauses002.htm#sthref2934\" rel=\"nofollow noreferrer\">constraint deferred</a>. Not sure if this feature is available in other databases but Oracle.</p></li>\n<li><p>limit the expectations to JPA. Seriously, it looks like you expecting more from it then it will give you. I highly recommend <a href=\"http://blogs.tedneward.com/post/the-vietnam-of-computer-science/\" rel=\"nofollow noreferrer\">reading this article</a> before proceeding with any project using any kind of ORM.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":450498,"reputation":1652,"user_id":845849,"display_name":"Suken Shah"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1431402611,"creation_date":1431402611,"answer_id":30181456,"question_id":30175589,"body_markdown":"Please note that even though setting `hbm2ddl.auto` to `UPDATE`, it doesn&#39;t remove the not-null type constrains when the `nullable` in entity is set to `FALSE`. I would suggest that check the history of the class for any changes to entity relationship or column mapping for nullable constraint.","title":"Spring-Data JPA: modelling a graph getting &#39;column violates not-null&#39; when removing edges","body":"<p>Please note that even though setting <code>hbm2ddl.auto</code> to <code>UPDATE</code>, it doesn't remove the not-null type constrains when the <code>nullable</code> in entity is set to <code>FALSE</code>. I would suggest that check the history of the class for any changes to entity relationship or column mapping for nullable constraint.</p>\n"},{"tags":[],"owner":{"account_id":13319887,"reputation":3,"user_id":10709202,"display_name":"Max Telepchuk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662758508,"creation_date":1662758490,"answer_id":73667587,"question_id":30175589,"body_markdown":"If anybody is looking for the solution, `updatable=false` in the `JoinCoulum` annotation fixed this problem for me\r\n\r\n```\r\n@JoinColumn(name = &quot;fromId&quot;, updatable = false)\r\n```","title":"Spring-Data JPA: modelling a graph getting &#39;column violates not-null&#39; when removing edges","body":"<p>If anybody is looking for the solution, <code>updatable=false</code> in the <code>JoinCoulum</code> annotation fixed this problem for me</p>\n<pre><code>@JoinColumn(name = &quot;fromId&quot;, updatable = false)\n</code></pre>\n"}],"owner":{"account_id":1136387,"reputation":1340,"user_id":1121387,"accept_rate":80,"display_name":"fricke"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":836,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1662758508,"creation_date":1431370826,"question_id":30175589,"body_markdown":"I have a set of entities that that build some sort of graph. This is modelled by a class `Entity` with two fields modelling the relationships between entities.\r\n\r\n    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)\r\n\t@JoinColumn(name = &quot;fromId&quot;)\r\n\tprivate Set&lt;EntityRelation&gt; outEdges;\r\n\r\n\t@OneToMany(cascade = CascadeType.ALL)\r\n\t@JoinColumn(name = &quot;toId&quot;)\r\n\tprivate Set&lt;EntityRelation&gt; inEdges;\r\n\r\nAll outEdges are supposed to belong to the entity when it is saved, the inEdges are &quot;inferred&quot; from these. Problem is then after removing an out-edge I always get an error `ERROR: null value in column &quot;fromid&quot; violates not-null constraint` where `fromid` is a field of `EntityRelation`.\r\n\r\nFor performance reasons, I don&#39;t want to have direct relations form `Entity` to `Entity`.\r\n\r\nTo fix this, I used a new Spring-Data JPA method (in the corresponding Repository class) to explicitly remove everything an entity points to (like\r\n\r\n\t@Modifying\r\n\t@Query(value = &quot;delete from entityrelation where fromid = ?1&quot;, nativeQuery = true)\r\n\tint deleteEntityRelations(String entityId);\r\n \r\nBut this somehow misses the whole point, since I want JPA to take responsibility of that.\r\n\r\nwhat is wrong here? I really got stuck, since all posts I could find suggest that it should simply work with `orphan-delete`.\r\n\r\nIn the SQL-Trace you can see that an `org.hibernate.SQL - update EntityRelation set fromId=null where fromId=? and id=?` is issued automatically (which then triggers the error).\r\n\r\nthanks and regards\r\nfricke\r\n\r\n\r\n ","title":"Spring-Data JPA: modelling a graph getting &#39;column violates not-null&#39; when removing edges","body":"<p>I have a set of entities that that build some sort of graph. This is modelled by a class <code>Entity</code> with two fields modelling the relationships between entities.</p>\n\n<pre><code>@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)\n@JoinColumn(name = \"fromId\")\nprivate Set&lt;EntityRelation&gt; outEdges;\n\n@OneToMany(cascade = CascadeType.ALL)\n@JoinColumn(name = \"toId\")\nprivate Set&lt;EntityRelation&gt; inEdges;\n</code></pre>\n\n<p>All outEdges are supposed to belong to the entity when it is saved, the inEdges are \"inferred\" from these. Problem is then after removing an out-edge I always get an error <code>ERROR: null value in column \"fromid\" violates not-null constraint</code> where <code>fromid</code> is a field of <code>EntityRelation</code>.</p>\n\n<p>For performance reasons, I don't want to have direct relations form <code>Entity</code> to <code>Entity</code>.</p>\n\n<p>To fix this, I used a new Spring-Data JPA method (in the corresponding Repository class) to explicitly remove everything an entity points to (like</p>\n\n<pre><code>@Modifying\n@Query(value = \"delete from entityrelation where fromid = ?1\", nativeQuery = true)\nint deleteEntityRelations(String entityId);\n</code></pre>\n\n<p>But this somehow misses the whole point, since I want JPA to take responsibility of that.</p>\n\n<p>what is wrong here? I really got stuck, since all posts I could find suggest that it should simply work with <code>orphan-delete</code>.</p>\n\n<p>In the SQL-Trace you can see that an <code>org.hibernate.SQL - update EntityRelation set fromId=null where fromId=? and id=?</code> is issued automatically (which then triggers the error).</p>\n\n<p>thanks and regards\nfricke</p>\n"},{"tags":["java","selenium","parallel-processing","gitlab","gitlab-ci"],"comments":[{"owner":{"account_id":15660621,"reputation":91,"user_id":11299675,"display_name":"Guilherme Machado"},"score":1,"creation_date":1658421823,"post_id":72010614,"comment_id":129053233,"body_markdown":"Have you ever found a solution to it?","body":"Have you ever found a solution to it?"},{"owner":{"account_id":22027761,"reputation":186,"user_id":16295487,"display_name":"RafalLovesWorking"},"score":0,"creation_date":1662725989,"post_id":72010614,"comment_id":130078510,"body_markdown":"@GuilhermeMachado I have found a workaround I&#39;ll post is as an answer","body":"@GuilhermeMachado I have found a workaround I&#39;ll post is as an answer"}],"answers":[{"tags":[],"owner":{"account_id":22027761,"reputation":186,"user_id":16295487,"display_name":"RafalLovesWorking"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662758475,"creation_date":1662758475,"answer_id":73667584,"question_id":72010614,"body_markdown":"I run 3 gitlab jobs (selenium TestNG tests) concurrently, each on 4x5gb or 4x8gb runner (whichever is free). Yet I still have reduced number of concurrent task for each runner only to **two**. But I still sometimes run on the issue, so I identified which exceptions are showing up when tests fails with no apparent reason. Then, I created listener, which I added to each task&#39;s .xml configuration files. The only job of this listener is simply to retry tasks that failed because of identifed exceptions.\r\n\r\nThis code is place below `&lt;suite&gt;` tag in tasks .xml files\r\n```    \r\n&lt;listeners&gt;\r\n    &lt;listener classname=&quot;com.xxx.xxx.listeners.retrying.ApplyRetry&quot;/&gt;\r\n&lt;/listeners&gt;\r\n```\r\nThis is ApplyRetry class:\r\n```\r\npublic class ApplyRetry implements IAnnotationTransformer {\r\n\r\n    @Override\r\n    public void transform(\r\n            @NotNull ITestAnnotation annotation,\r\n            Class testClass,\r\n            Constructor testConstructor,\r\n            Method testMethod\r\n    ) {\r\n        annotation.setRetryAnalyzer(RetryAnalyzer.class);\r\n    }\r\n}\r\n```\r\nAnd the RetryAnalyzer which does the real job:\r\n```\r\n@Slf4j\r\npublic class RetryAnalyzer extends RetryAnalyzerCount {\r\n\r\n    public RetryAnalyzer() {\r\n        setCount(ConfigLoader.getInstance().getTaskRetries());\r\n    }\r\n\r\n    @Override\r\n    public boolean retryMethod(@NotNull ITestResult result) {\r\n        Throwable throwable = result.getThrowable();\r\n        log.warn(\r\n                &quot;Exception caught by listener details: Cause - {}, Message - {}.&quot;,\r\n                throwable.getCause(),\r\n                throwable.getMessage(),\r\n                throwable\r\n        );\r\n        return throwable instanceof TimeoutException\r\n                || throwable instanceof NoSuchSessionException\r\n                || throwable instanceof UnreachableBrowserException\r\n                || throwable.getCause() instanceof TimeoutException;\r\n    }\r\n}\r\n```\r\nSo the test is retried max. two times (set in config file), but only when it stumbles upon one of these exceptions:\r\n`TimeoutException`, `NoSuchSessionException`, `UnreachableBrowserException` or any throwable that is caused by `TimeoutException`.\r\n\r\nI have flakes now less than once per 1000 test instances invocations.","title":"Selenium Concurrecy Errors on Gitlab Runner","body":"<p>I run 3 gitlab jobs (selenium TestNG tests) concurrently, each on 4x5gb or 4x8gb runner (whichever is free). Yet I still have reduced number of concurrent task for each runner only to <strong>two</strong>. But I still sometimes run on the issue, so I identified which exceptions are showing up when tests fails with no apparent reason. Then, I created listener, which I added to each task's .xml configuration files. The only job of this listener is simply to retry tasks that failed because of identifed exceptions.</p>\n<p>This code is place below <code>&lt;suite&gt;</code> tag in tasks .xml files</p>\n<pre><code>&lt;listeners&gt;\n    &lt;listener classname=&quot;com.xxx.xxx.listeners.retrying.ApplyRetry&quot;/&gt;\n&lt;/listeners&gt;\n</code></pre>\n<p>This is ApplyRetry class:</p>\n<pre><code>public class ApplyRetry implements IAnnotationTransformer {\n\n    @Override\n    public void transform(\n            @NotNull ITestAnnotation annotation,\n            Class testClass,\n            Constructor testConstructor,\n            Method testMethod\n    ) {\n        annotation.setRetryAnalyzer(RetryAnalyzer.class);\n    }\n}\n</code></pre>\n<p>And the RetryAnalyzer which does the real job:</p>\n<pre><code>@Slf4j\npublic class RetryAnalyzer extends RetryAnalyzerCount {\n\n    public RetryAnalyzer() {\n        setCount(ConfigLoader.getInstance().getTaskRetries());\n    }\n\n    @Override\n    public boolean retryMethod(@NotNull ITestResult result) {\n        Throwable throwable = result.getThrowable();\n        log.warn(\n                &quot;Exception caught by listener details: Cause - {}, Message - {}.&quot;,\n                throwable.getCause(),\n                throwable.getMessage(),\n                throwable\n        );\n        return throwable instanceof TimeoutException\n                || throwable instanceof NoSuchSessionException\n                || throwable instanceof UnreachableBrowserException\n                || throwable.getCause() instanceof TimeoutException;\n    }\n}\n</code></pre>\n<p>So the test is retried max. two times (set in config file), but only when it stumbles upon one of these exceptions:\n<code>TimeoutException</code>, <code>NoSuchSessionException</code>, <code>UnreachableBrowserException</code> or any throwable that is caused by <code>TimeoutException</code>.</p>\n<p>I have flakes now less than once per 1000 test instances invocations.</p>\n"}],"owner":{"account_id":22027761,"reputation":186,"user_id":16295487,"display_name":"RafalLovesWorking"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":240,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73667584,"answer_count":1,"score":1,"last_activity_date":1662758475,"creation_date":1650961205,"question_id":72010614,"body_markdown":"I am developing java 17 selenium 4 automated tests. Every dependency is up-to-date.\r\n\r\nRecently I started to have a lot of concurrency errors in my automated tests, recently even in sanity test suite (which only requires selenium to login in to app from 3 different accounts). This is kind of ruining my automation, as I can&#39;t finish my runs, that succeed without an error locally. My testng.xml configs permits up to 3 tasks at the time (used to be much more). Very often the error also involes inability to run @AfterMethod, which only makes screenshot and quits driver. I rarely can finish suite without having it occur at least once. Here is sample error, which is recurring very often:\r\n```\r\n    org.openqa.selenium.TimeoutException: java.util.concurrent.TimeoutException\r\n    Build info: version: &#39;4.1.3&#39;, revision: &#39;7b1ebf28ef&#39;\r\n    System info: host: &#39;runner-167c7273-project-30802015-concurrent-0&#39;, ip: &#39;172.17.0.2&#39;, os.name: &#39;Linux&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;4.14.47-56.37.amzn1.x86_64&#39;, java.version: &#39;17.0.2&#39;\r\n    Driver info: org.openqa.selenium.chrome.ChromeDriver\r\n    Command: [2ab6c435b804fb5c01fb528c4baeed12, get {url=****************/auth?tab=login}]\r\n    Capabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 100.0.4896.60, chrome: {chromedriverVersion: 100.0.4896.60 (6a5d10861ce8..., userDataDir: /tmp/.com.google.Chrome.PFvJ4e}, goog:chromeOptions: {debuggerAddress: localhost:40989}, javascriptEnabled: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform: LINUX, platformName: LINUX, proxy: Proxy(), se:cdp: ws://localhost:40989/devtoo..., se:cdpVersion: 100.0.4896.60, setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:virtualAuthenticators: true}\r\n    Session ID: 2ab6c435b804fb5c01fb528c4baeed12\r\n        at app//org.openqa.selenium.remote.http.netty.NettyHttpHandler.makeCall(NettyHttpHandler.java:72)\r\n        at app//org.openqa.selenium.remote.http.AddSeleniumUserAgent.lambda$apply$0(AddSeleniumUserAgent.java:42)\r\n        at app//org.openqa.selenium.remote.http.Filter.lambda$andFinally$1(Filter.java:56)\r\n        at app//org.openqa.selenium.remote.http.netty.NettyHttpHandler.execute(NettyHttpHandler.java:51)\r\n        at app//org.openqa.selenium.remote.http.AddSeleniumUserAgent.lambda$apply$0(AddSeleniumUserAgent.java:42)\r\n        at app//org.openqa.selenium.remote.http.Filter.lambda$andFinally$1(Filter.java:56)\r\n        at app//org.openqa.selenium.remote.http.netty.NettyClient.execute(NettyClient.java:124)\r\n        at app//org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:181)\r\n        at app//org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:167)\r\n        at app//org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:142)\r\n        at app//org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:567)\r\n        at app//org.openqa.selenium.remote.RemoteWebDriver.get(RemoteWebDriver.java:330)\r\n        at app//com.*******.****.base.BasePage.load(BasePage.java:52)\r\n        at app//com.*******.****.pages.registration.LoginPO.load(LoginPO.java:38)\r\n        at app//com.*******.****.steps.ManageAccountStep.login(ManageAccountStep.java:21)\r\n        at app//com.*******.****.tests.register.LoginTest.loginToApp(LoginTest.java:23)\r\n        Caused by:\r\n        java.util.concurrent.TimeoutException\r\n            at java.base/java.util.concurrent.CompletableFuture.timedGet(CompletableFuture.java:1960)\r\n            at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2095)\r\n            at org.asynchttpclient.netty.NettyResponseFuture.get(NettyResponseFuture.java:206)\r\n            at org.openqa.selenium.remote.http.netty.NettyHttpHandler.makeCall(NettyHttpHandler.java:66)\r\n            ... 15 more\r\nSanity Test &gt; Prod Env Login &gt; com.*******.****.tests.register.LoginTest &gt; stopDriver FAILED\r\n    org.openqa.selenium.TimeoutException: java.util.concurrent.TimeoutException\r\n    Build info: version: &#39;4.1.3&#39;, revision: &#39;7b1ebf28ef&#39;\r\n    System info: host: &#39;runner-167c7273-project-30802015-concurrent-0&#39;, ip: &#39;172.17.0.2&#39;, os.name: &#39;Linux&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;4.14.47-56.37.amzn1.x86_64&#39;, java.version: &#39;17.0.2&#39;\r\n    Driver info: org.openqa.selenium.chrome.ChromeDriver\r\n    Command: [2ab6c435b804fb5c01fb528c4baeed12, screenshot {}]\r\n    Capabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 100.0.4896.60, chrome: {chromedriverVersion: 100.0.4896.60 (6a5d10861ce8..., userDataDir: /tmp/.com.google.Chrome.PFvJ4e}, goog:chromeOptions: {debuggerAddress: localhost:40989}, javascriptEnabled: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform: LINUX, platformName: LINUX, proxy: Proxy(), se:cdp: ws://localhost:40989/devtoo..., se:cdpVersion: 100.0.4896.60, setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:virtualAuthenticators: true}\r\n    Session ID: 2ab6c435b804fb5c01fb528c4baeed12\r\n        at app//org.openqa.selenium.remote.http.netty.NettyHttpHandler.makeCall(NettyHttpHandler.java:72)\r\n        at app//org.openqa.selenium.remote.http.AddSeleniumUserAgent.lambda$apply$0(AddSeleniumUserAgent.java:42)\r\n        at app//org.openqa.selenium.remote.http.Filter.lambda$andFinally$1(Filter.java:56)\r\n        at app//org.openqa.selenium.remote.http.netty.NettyHttpHandler.execute(NettyHttpHandler.java:51)\r\n        at app//org.openqa.selenium.remote.http.AddSeleniumUserAgent.lambda$apply$0(AddSeleniumUserAgent.java:42)\r\n        at app//org.openqa.selenium.remote.http.Filter.lambda$andFinally$1(Filter.java:56)\r\n        at app//org.openqa.selenium.remote.http.netty.NettyClient.execute(NettyClient.java:124)\r\n        at app//org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:181)\r\n        at app//org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:167)\r\n        at app//org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:142)\r\n        at app//org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:567)\r\n        at app//org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:622)\r\n        at app//org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:626)\r\n        at app//org.openqa.selenium.remote.RemoteWebDriver.getScreenshotAs(RemoteWebDriver.java:351)\r\n        at app//com.*******.****.base.BaseTest.takeScreenshot(BaseTest.java:80)\r\n        at app//com.*******.****.base.BaseTest.stopDriver(BaseTest.java:73)\r\n        at java.base@17.0.2/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base@17.0.2/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n        at java.base@17.0.2/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base@17.0.2/java.lang.reflect.Method.invoke(Method.java:568)\r\n        at app//org.testng.internal.invokers.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:135)\r\n        at app//org.testng.internal.invokers.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:65)\r\n        at app//org.testng.internal.invokers.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:381)\r\n        at app//org.testng.internal.invokers.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:319)\r\n        at app//org.testng.internal.invokers.TestInvoker.runConfigMethods(TestInvoker.java:803)\r\n        at app//org.testng.internal.invokers.TestInvoker.runAfterConfigurations(TestInvoker.java:772)\r\n        at app//org.testng.internal.invokers.TestInvoker.invokeMethod(TestInvoker.java:748)\r\n        at app//org.testng.internal.invokers.TestInvoker.invokeTestMethod(TestInvoker.java:220)\r\n        at app//org.testng.internal.invokers.TestMethodWithDataProviderMethodWorker.call(TestMethodWithDataProviderMethodWorker.java:80)\r\n        at app//org.testng.internal.invokers.TestMethodWithDataProviderMethodWorker.call(TestMethodWithDataProviderMethodWorker.java:17)\r\n        at java.base@17.0.2/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n        at java.base@17.0.2/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\r\n        at java.base@17.0.2/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n        at java.base@17.0.2/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n        at java.base@17.0.2/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n        at java.base@17.0.2/java.lang.Thread.run(Thread.java:833)\r\n        Caused by:\r\n        java.util.concurrent.TimeoutException\r\n            at java.base/java.util.concurrent.CompletableFuture.timedGet(CompletableFuture.java:1960)\r\n            at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2095)\r\n            at org.asynchttpclient.netty.NettyResponseFuture.get(NettyResponseFuture.java:206)\r\n            at org.openqa.selenium.remote.http.netty.NettyHttpHandler.makeCall(NettyHttpHandler.java:66)\r\n            ... 35 more\r\n```\r\n\r\nAnd this is my gitlab-ci.yml\r\n```\r\nimage: markhobson/maven-chrome:jdk-17\r\n\r\nstages:\r\n  - prepare-cache-sanity-test\r\n  - prod\r\n  - test\r\n  - hubspot\r\n\r\n.retry-policy: &amp;retry-policy\r\n  retry:\r\n    max: 2\r\n    when:\r\n      - runner_system_failure\r\n      - stuck_or_timeout_failure\r\n      - unknown_failure\r\n      - api_failure\r\n\r\n.cache_template: &amp;push_build_cache\r\n  artifacts:\r\n    name: &quot;$CI_JOB_NAME-$CI_JOB_ID&quot;\r\n    expire_in: 2 days\r\n    paths:\r\n      - drivers\r\n      - build\r\n      - .gradle\r\n\r\n.cache_template: &amp;pull_build_cache\r\n  dependencies:\r\n    - sanity-test\r\n\r\n.artifacts: &amp;test_report_artifacts\r\n  artifacts:\r\n    when: always\r\n    expire_in: 7 days\r\n    paths:\r\n      - build/reports/tests/test\r\n\r\nsanity-test:\r\n  stage: prepare-cache-sanity-test\r\n  script:\r\n    - ./gradlew test -DsuiteFile=&quot;common/sanity.xml&quot;\r\n  &lt;&lt;: *retry-policy\r\n  &lt;&lt;: *push_build_cache\r\n\r\nsp-test-prod:\r\n  stage: prod\r\n  script:\r\n    - ./gradlew test -DsuiteFile=&quot;common/prod.xml&quot;\r\n  &lt;&lt;: *test_report_artifacts\r\n  &lt;&lt;: *retry-policy\r\n  &lt;&lt;: *pull_build_cache\r\n\r\nsp-test-regression:\r\n  stage: test\r\n  script:\r\n    - ./gradlew test -DsuiteFile=&quot;common/regression.xml&quot;\r\n  &lt;&lt;: *test_report_artifacts\r\n  &lt;&lt;: *retry-policy\r\n  &lt;&lt;: *pull_build_cache\r\n\r\nsp-test-hubspot:\r\n  stage: hubspot\r\n  script:\r\n    - ./gradlew test -DsuiteFile=&quot;common/hubspot.xml&quot;\r\n  &lt;&lt;: *test_report_artifacts\r\n  &lt;&lt;: *retry-policy\r\n  &lt;&lt;: *pull_build_cache\r\n```","title":"Selenium Concurrecy Errors on Gitlab Runner","body":"<p>I am developing java 17 selenium 4 automated tests. Every dependency is up-to-date.</p>\n<p>Recently I started to have a lot of concurrency errors in my automated tests, recently even in sanity test suite (which only requires selenium to login in to app from 3 different accounts). This is kind of ruining my automation, as I can't finish my runs, that succeed without an error locally. My testng.xml configs permits up to 3 tasks at the time (used to be much more). Very often the error also involes inability to run @AfterMethod, which only makes screenshot and quits driver. I rarely can finish suite without having it occur at least once. Here is sample error, which is recurring very often:</p>\n<pre><code>    org.openqa.selenium.TimeoutException: java.util.concurrent.TimeoutException\n    Build info: version: '4.1.3', revision: '7b1ebf28ef'\n    System info: host: 'runner-167c7273-project-30802015-concurrent-0', ip: '172.17.0.2', os.name: 'Linux', os.arch: 'amd64', os.version: '4.14.47-56.37.amzn1.x86_64', java.version: '17.0.2'\n    Driver info: org.openqa.selenium.chrome.ChromeDriver\n    Command: [2ab6c435b804fb5c01fb528c4baeed12, get {url=****************/auth?tab=login}]\n    Capabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 100.0.4896.60, chrome: {chromedriverVersion: 100.0.4896.60 (6a5d10861ce8..., userDataDir: /tmp/.com.google.Chrome.PFvJ4e}, goog:chromeOptions: {debuggerAddress: localhost:40989}, javascriptEnabled: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform: LINUX, platformName: LINUX, proxy: Proxy(), se:cdp: ws://localhost:40989/devtoo..., se:cdpVersion: 100.0.4896.60, setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:virtualAuthenticators: true}\n    Session ID: 2ab6c435b804fb5c01fb528c4baeed12\n        at app//org.openqa.selenium.remote.http.netty.NettyHttpHandler.makeCall(NettyHttpHandler.java:72)\n        at app//org.openqa.selenium.remote.http.AddSeleniumUserAgent.lambda$apply$0(AddSeleniumUserAgent.java:42)\n        at app//org.openqa.selenium.remote.http.Filter.lambda$andFinally$1(Filter.java:56)\n        at app//org.openqa.selenium.remote.http.netty.NettyHttpHandler.execute(NettyHttpHandler.java:51)\n        at app//org.openqa.selenium.remote.http.AddSeleniumUserAgent.lambda$apply$0(AddSeleniumUserAgent.java:42)\n        at app//org.openqa.selenium.remote.http.Filter.lambda$andFinally$1(Filter.java:56)\n        at app//org.openqa.selenium.remote.http.netty.NettyClient.execute(NettyClient.java:124)\n        at app//org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:181)\n        at app//org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:167)\n        at app//org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:142)\n        at app//org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:567)\n        at app//org.openqa.selenium.remote.RemoteWebDriver.get(RemoteWebDriver.java:330)\n        at app//com.*******.****.base.BasePage.load(BasePage.java:52)\n        at app//com.*******.****.pages.registration.LoginPO.load(LoginPO.java:38)\n        at app//com.*******.****.steps.ManageAccountStep.login(ManageAccountStep.java:21)\n        at app//com.*******.****.tests.register.LoginTest.loginToApp(LoginTest.java:23)\n        Caused by:\n        java.util.concurrent.TimeoutException\n            at java.base/java.util.concurrent.CompletableFuture.timedGet(CompletableFuture.java:1960)\n            at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2095)\n            at org.asynchttpclient.netty.NettyResponseFuture.get(NettyResponseFuture.java:206)\n            at org.openqa.selenium.remote.http.netty.NettyHttpHandler.makeCall(NettyHttpHandler.java:66)\n            ... 15 more\nSanity Test &gt; Prod Env Login &gt; com.*******.****.tests.register.LoginTest &gt; stopDriver FAILED\n    org.openqa.selenium.TimeoutException: java.util.concurrent.TimeoutException\n    Build info: version: '4.1.3', revision: '7b1ebf28ef'\n    System info: host: 'runner-167c7273-project-30802015-concurrent-0', ip: '172.17.0.2', os.name: 'Linux', os.arch: 'amd64', os.version: '4.14.47-56.37.amzn1.x86_64', java.version: '17.0.2'\n    Driver info: org.openqa.selenium.chrome.ChromeDriver\n    Command: [2ab6c435b804fb5c01fb528c4baeed12, screenshot {}]\n    Capabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 100.0.4896.60, chrome: {chromedriverVersion: 100.0.4896.60 (6a5d10861ce8..., userDataDir: /tmp/.com.google.Chrome.PFvJ4e}, goog:chromeOptions: {debuggerAddress: localhost:40989}, javascriptEnabled: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform: LINUX, platformName: LINUX, proxy: Proxy(), se:cdp: ws://localhost:40989/devtoo..., se:cdpVersion: 100.0.4896.60, setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:virtualAuthenticators: true}\n    Session ID: 2ab6c435b804fb5c01fb528c4baeed12\n        at app//org.openqa.selenium.remote.http.netty.NettyHttpHandler.makeCall(NettyHttpHandler.java:72)\n        at app//org.openqa.selenium.remote.http.AddSeleniumUserAgent.lambda$apply$0(AddSeleniumUserAgent.java:42)\n        at app//org.openqa.selenium.remote.http.Filter.lambda$andFinally$1(Filter.java:56)\n        at app//org.openqa.selenium.remote.http.netty.NettyHttpHandler.execute(NettyHttpHandler.java:51)\n        at app//org.openqa.selenium.remote.http.AddSeleniumUserAgent.lambda$apply$0(AddSeleniumUserAgent.java:42)\n        at app//org.openqa.selenium.remote.http.Filter.lambda$andFinally$1(Filter.java:56)\n        at app//org.openqa.selenium.remote.http.netty.NettyClient.execute(NettyClient.java:124)\n        at app//org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:181)\n        at app//org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:167)\n        at app//org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:142)\n        at app//org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:567)\n        at app//org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:622)\n        at app//org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:626)\n        at app//org.openqa.selenium.remote.RemoteWebDriver.getScreenshotAs(RemoteWebDriver.java:351)\n        at app//com.*******.****.base.BaseTest.takeScreenshot(BaseTest.java:80)\n        at app//com.*******.****.base.BaseTest.stopDriver(BaseTest.java:73)\n        at java.base@17.0.2/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base@17.0.2/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base@17.0.2/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base@17.0.2/java.lang.reflect.Method.invoke(Method.java:568)\n        at app//org.testng.internal.invokers.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:135)\n        at app//org.testng.internal.invokers.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:65)\n        at app//org.testng.internal.invokers.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:381)\n        at app//org.testng.internal.invokers.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:319)\n        at app//org.testng.internal.invokers.TestInvoker.runConfigMethods(TestInvoker.java:803)\n        at app//org.testng.internal.invokers.TestInvoker.runAfterConfigurations(TestInvoker.java:772)\n        at app//org.testng.internal.invokers.TestInvoker.invokeMethod(TestInvoker.java:748)\n        at app//org.testng.internal.invokers.TestInvoker.invokeTestMethod(TestInvoker.java:220)\n        at app//org.testng.internal.invokers.TestMethodWithDataProviderMethodWorker.call(TestMethodWithDataProviderMethodWorker.java:80)\n        at app//org.testng.internal.invokers.TestMethodWithDataProviderMethodWorker.call(TestMethodWithDataProviderMethodWorker.java:17)\n        at java.base@17.0.2/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n        at java.base@17.0.2/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\n        at java.base@17.0.2/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n        at java.base@17.0.2/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n        at java.base@17.0.2/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n        at java.base@17.0.2/java.lang.Thread.run(Thread.java:833)\n        Caused by:\n        java.util.concurrent.TimeoutException\n            at java.base/java.util.concurrent.CompletableFuture.timedGet(CompletableFuture.java:1960)\n            at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2095)\n            at org.asynchttpclient.netty.NettyResponseFuture.get(NettyResponseFuture.java:206)\n            at org.openqa.selenium.remote.http.netty.NettyHttpHandler.makeCall(NettyHttpHandler.java:66)\n            ... 35 more\n</code></pre>\n<p>And this is my gitlab-ci.yml</p>\n<pre><code>image: markhobson/maven-chrome:jdk-17\n\nstages:\n  - prepare-cache-sanity-test\n  - prod\n  - test\n  - hubspot\n\n.retry-policy: &amp;retry-policy\n  retry:\n    max: 2\n    when:\n      - runner_system_failure\n      - stuck_or_timeout_failure\n      - unknown_failure\n      - api_failure\n\n.cache_template: &amp;push_build_cache\n  artifacts:\n    name: &quot;$CI_JOB_NAME-$CI_JOB_ID&quot;\n    expire_in: 2 days\n    paths:\n      - drivers\n      - build\n      - .gradle\n\n.cache_template: &amp;pull_build_cache\n  dependencies:\n    - sanity-test\n\n.artifacts: &amp;test_report_artifacts\n  artifacts:\n    when: always\n    expire_in: 7 days\n    paths:\n      - build/reports/tests/test\n\nsanity-test:\n  stage: prepare-cache-sanity-test\n  script:\n    - ./gradlew test -DsuiteFile=&quot;common/sanity.xml&quot;\n  &lt;&lt;: *retry-policy\n  &lt;&lt;: *push_build_cache\n\nsp-test-prod:\n  stage: prod\n  script:\n    - ./gradlew test -DsuiteFile=&quot;common/prod.xml&quot;\n  &lt;&lt;: *test_report_artifacts\n  &lt;&lt;: *retry-policy\n  &lt;&lt;: *pull_build_cache\n\nsp-test-regression:\n  stage: test\n  script:\n    - ./gradlew test -DsuiteFile=&quot;common/regression.xml&quot;\n  &lt;&lt;: *test_report_artifacts\n  &lt;&lt;: *retry-policy\n  &lt;&lt;: *pull_build_cache\n\nsp-test-hubspot:\n  stage: hubspot\n  script:\n    - ./gradlew test -DsuiteFile=&quot;common/hubspot.xml&quot;\n  &lt;&lt;: *test_report_artifacts\n  &lt;&lt;: *retry-policy\n  &lt;&lt;: *pull_build_cache\n</code></pre>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":21309,"reputation":156749,"user_id":51685,"display_name":"AKX"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661188510,"creation_date":1661188510,"answer_id":73448790,"question_id":73448695,"body_markdown":"Sure thing.\r\n\r\nSince Pandas series are mapping-like, you can use `str.format_map()` to easily interpolate your rows into a template string:\r\n\r\n```\r\nimport pandas as pd\r\n\r\ntemplate = &quot;&quot;&quot;\r\nStore #: {store_no}\r\nCurrency Amount: {pennies} pennies - {nickels} nickels - {ones} ones - {fives} fives\r\nOrder Date: {order_date}\r\nExpected delivery: {expected_delivery}\r\nConfirmation Number: {confirmation_number}\r\n&quot;&quot;&quot;.lstrip()\r\n\r\n# Example data to make this self-contained; could be `read_csv`&#39;d.\r\ndf = pd.DataFrame(\r\n    {\r\n        &quot;store_no&quot;: [1, 2, 3],\r\n        &quot;pennies&quot;: [5, 10, 15],\r\n        &quot;nickels&quot;: [2, 4, 6],\r\n        &quot;ones&quot;: [7, 4, 11],\r\n        &quot;fives&quot;: [0, 0, 9],\r\n        &quot;order_date&quot;: [&quot;2020-10-21&quot;, &quot;2020-10-21&quot;, &quot;2020-10-21&quot;],\r\n        &quot;expected_delivery&quot;: [&quot;2021-10-21&quot;, &quot;2021-10-21&quot;, &quot;2021-10-21&quot;],\r\n        &quot;confirmation_number&quot;: [&quot;12345&quot;, &quot;54321&quot;, &quot;98765&quot;],\r\n    }\r\n)\r\n\r\nfor ix, row in df.iterrows():\r\n    print(template.format_map(row))\r\n```\r\n\r\nThis example df would look like\r\n\r\n```\r\n   store_no  pennies  nickels  ...  order_date  expected_delivery confirmation_number\r\n0         1        5        2  ...  2020-10-21         2021-10-21               12345\r\n1         2       10        4  ...  2020-10-21         2021-10-21               54321\r\n2         3       15        6  ...  2020-10-21         2021-10-21               98765\r\n\r\n[3 rows x 8 columns]\r\n```\r\nprinted, and the loop starts printing out\r\n```\r\nStore #: 1\r\nCurrency Amount: 5 pennies - 2 nickels - 7 ones - 0 fives\r\nOrder Date: 2020-10-21\r\nExpected delivery: 2021-10-21\r\nConfirmation Number: 12345\r\n```\r\netc.\r\n\r\nIf your CSV/Excel file&#39;s columns aren&#39;t named like this, you could use `df.rename()` to rename them.","title":"How do I transfer csv to create a written prompt in a document using Python?","body":"<p>Sure thing.</p>\n<p>Since Pandas series are mapping-like, you can use <code>str.format_map()</code> to easily interpolate your rows into a template string:</p>\n<pre><code>import pandas as pd\n\ntemplate = &quot;&quot;&quot;\nStore #: {store_no}\nCurrency Amount: {pennies} pennies - {nickels} nickels - {ones} ones - {fives} fives\nOrder Date: {order_date}\nExpected delivery: {expected_delivery}\nConfirmation Number: {confirmation_number}\n&quot;&quot;&quot;.lstrip()\n\n# Example data to make this self-contained; could be `read_csv`'d.\ndf = pd.DataFrame(\n    {\n        &quot;store_no&quot;: [1, 2, 3],\n        &quot;pennies&quot;: [5, 10, 15],\n        &quot;nickels&quot;: [2, 4, 6],\n        &quot;ones&quot;: [7, 4, 11],\n        &quot;fives&quot;: [0, 0, 9],\n        &quot;order_date&quot;: [&quot;2020-10-21&quot;, &quot;2020-10-21&quot;, &quot;2020-10-21&quot;],\n        &quot;expected_delivery&quot;: [&quot;2021-10-21&quot;, &quot;2021-10-21&quot;, &quot;2021-10-21&quot;],\n        &quot;confirmation_number&quot;: [&quot;12345&quot;, &quot;54321&quot;, &quot;98765&quot;],\n    }\n)\n\nfor ix, row in df.iterrows():\n    print(template.format_map(row))\n</code></pre>\n<p>This example df would look like</p>\n<pre><code>   store_no  pennies  nickels  ...  order_date  expected_delivery confirmation_number\n0         1        5        2  ...  2020-10-21         2021-10-21               12345\n1         2       10        4  ...  2020-10-21         2021-10-21               54321\n2         3       15        6  ...  2020-10-21         2021-10-21               98765\n\n[3 rows x 8 columns]\n</code></pre>\n<p>printed, and the loop starts printing out</p>\n<pre><code>Store #: 1\nCurrency Amount: 5 pennies - 2 nickels - 7 ones - 0 fives\nOrder Date: 2020-10-21\nExpected delivery: 2021-10-21\nConfirmation Number: 12345\n</code></pre>\n<p>etc.</p>\n<p>If your CSV/Excel file's columns aren't named like this, you could use <code>df.rename()</code> to rename them.</p>\n"}],"owner":{"account_id":26131736,"reputation":36,"user_id":19822358,"display_name":"mf2022"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662758214,"creation_date":1661187979,"question_id":73448695,"body_markdown":"At my job we use Excel a lot and we are encouraged to automate with anys to point me in the right direction because I do not even know how to phrase this in google without getting topics or previous questions that do not help.\r\n\r\nThe code is what I have so far.\r\n\r\n    import pandas as pd\r\n    df = pd.read_csv (r&#39;filepathway.csv&#39;)\r\n    print(df)    ","title":"How do I transfer csv to create a written prompt in a document using Python?","body":"<p>At my job we use Excel a lot and we are encouraged to automate with anys to point me in the right direction because I do not even know how to phrase this in google without getting topics or previous questions that do not help.</p>\n<p>The code is what I have so far.</p>\n<pre><code>import pandas as pd\ndf = pd.read_csv (r'filepathway.csv')\nprint(df)    \n</code></pre>\n"},{"tags":["java","arrays","multidimensional-array","solution"],"comments":[{"owner":{"account_id":10528158,"reputation":334,"user_id":7758485,"display_name":"DiLDoST"},"score":0,"creation_date":1662771860,"post_id":73667434,"comment_id":130090184,"body_markdown":"Personal Opinion: Actually i played this game and i loved it","body":"Personal Opinion: Actually i played this game and i loved it"},{"owner":{"account_id":10528158,"reputation":334,"user_id":7758485,"display_name":"DiLDoST"},"score":0,"creation_date":1662772898,"post_id":73667434,"comment_id":130090303,"body_markdown":"By the way, this is how ur code is processing ur data (i don&#39;t understand how u say it&#39;s meant to be 1, when you are only talking about greater and less, never equal): ((1&lt;2 &amp;&amp; 1&lt;1) || (1&gt;2 &amp;&amp; 1&gt;1)) =&gt; false\n((2&lt;2 &amp;&amp; 1&lt;2) || (2&gt;2 &amp;&amp; 1&gt;2)) =&gt; false\n((2&lt;1 &amp;&amp; 2&lt;2) || (2&gt;1 &amp;&amp; 2&gt;2)) =&gt; false","body":"By the way, this is how ur code is processing ur data (i don&#39;t understand how u say it&#39;s meant to be 1, when you are only talking about greater and less, never equal): ((1&lt;2 &amp;&amp; 1&lt;1) || (1&gt;2 &amp;&amp; 1&gt;1)) =&gt; false ((2&lt;2 &amp;&amp; 1&lt;2) || (2&gt;2 &amp;&amp; 1&gt;2)) =&gt; false ((2&lt;1 &amp;&amp; 2&lt;2) || (2&gt;1 &amp;&amp; 2&gt;2)) =&gt; false"}],"owner":{"account_id":22859157,"reputation":11,"user_id":17003556,"display_name":"Preeti Yadav"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1662757444,"creation_date":1662757145,"question_id":73667434,"body_markdown":"Solution:\r\nI was trying to solve the Leetcode 1996 number of weak characters using a simple traversing approach, but this only works on test cases.\r\nDescription as follows: \r\nYou are playing a game that contains multiple characters, and each of the characters has two main properties: attack and defense. You are given a 2D integer array properties where properties[i] = [attacki, defensei] represents the properties of the ith character in the game.\r\n\r\nA character is said to be weak if any other character has both attack and defense levels strictly greater than this character&#39;s attack and defense levels. More formally, a character i is said to be weak if there exists another character (j) where attack[j] &gt; attack[I] and defense[j] &gt; defense[I].\r\n\r\nReturn the number of weak characters.\r\n\r\nWorking perfectly on sample testcase but why not on other like as: input: [[1,1],[2,1],[2,2],[1,2]] Expected output: 1 output recieved=0.\r\n\r\n    class Solution {\r\n    \r\n        public int numberOfWeakCharacters(int[][] properties) {\r\n    \r\n            int answer=0;\r\n    \r\n            for(int i=0;i&lt;properties.length-1;i++){\r\n                    if((properties[i][0]&lt;properties[i+1][0] &amp;&amp; properties[i][1]&lt;properties[i+1][1]) || \r\n                       (properties[i][0]&gt;properties[i+1][0] &amp;&amp; properties[i][1]&gt;properties[i+1][1]))\r\n                        ++ans;\r\n                \r\n            }\r\n            return answer;\r\n        }\r\n    }","title":"I was trying to solve the leetcode 1996 number of weak characters using a simple traversing approach but this is only working on test cases, any solut","body":"<p>Solution:\nI was trying to solve the Leetcode 1996 number of weak characters using a simple traversing approach, but this only works on test cases.\nDescription as follows:\nYou are playing a game that contains multiple characters, and each of the characters has two main properties: attack and defense. You are given a 2D integer array properties where properties[i] = [attacki, defensei] represents the properties of the ith character in the game.</p>\n<p>A character is said to be weak if any other character has both attack and defense levels strictly greater than this character's attack and defense levels. More formally, a character i is said to be weak if there exists another character (j) where attack[j] &gt; attack[I] and defense[j] &gt; defense[I].</p>\n<p>Return the number of weak characters.</p>\n<p>Working perfectly on sample testcase but why not on other like as: input: [[1,1],[2,1],[2,2],[1,2]] Expected output: 1 output recieved=0.</p>\n<pre><code>class Solution {\n\n    public int numberOfWeakCharacters(int[][] properties) {\n\n        int answer=0;\n\n        for(int i=0;i&lt;properties.length-1;i++){\n                if((properties[i][0]&lt;properties[i+1][0] &amp;&amp; properties[i][1]&lt;properties[i+1][1]) || \n                   (properties[i][0]&gt;properties[i+1][0] &amp;&amp; properties[i][1]&gt;properties[i+1][1]))\n                    ++ans;\n            \n        }\n        return answer;\n    }\n}\n</code></pre>\n"},{"tags":["java","server","outputstream","httpserver"],"answers":[{"tags":[],"owner":{"account_id":1543619,"reputation":98,"user_id":1437694,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1482496526,"creation_date":1482494258,"answer_id":41301053,"question_id":38679686,"body_markdown":"Try to add \r\n\r\n    t.getResponseHeaders().put(&quot;Content-Type&quot;, &quot;text/html&quot;); \r\n\r\nbefore writing","title":"Setting Content Type in Java HttpServer response","body":"<p>Try to add </p>\n\n<pre><code>t.getResponseHeaders().put(\"Content-Type\", \"text/html\"); \n</code></pre>\n\n<p>before writing</p>\n"},{"tags":[],"owner":{"account_id":20939387,"reputation":9,"user_id":15738438,"display_name":"Andrey Sukhanov"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1619094644,"creation_date":1619094644,"answer_id":67213348,"question_id":38679686,"body_markdown":"It seems the interface has been changed since the answer. In Java 11 you need:\r\n\r\n    t.getRequestHeaders().put(&quot;Content-Type&quot;, Collections.singletonList(&quot;text/html&quot;));\r\n\r\n","title":"Setting Content Type in Java HttpServer response","body":"<p>It seems the interface has been changed since the answer. In Java 11 you need:</p>\n<pre><code>t.getRequestHeaders().put(&quot;Content-Type&quot;, Collections.singletonList(&quot;text/html&quot;));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12795618,"reputation":150,"user_id":9258716,"display_name":"bebyx"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662757416,"creation_date":1662757416,"answer_id":73667472,"question_id":38679686,"body_markdown":"In Java 17 either:\r\n\r\n```java\r\nt.getResponseHeaders().set(&quot;Content-Type&quot;, &quot;text/html&quot;);\r\n```\r\nOr:\r\n\r\n```java\r\nt.getResponseHeaders().put(&quot;Content-Type&quot;, Collections.singletonList(&quot;text/html&quot;));\r\n```\r\nAlso, adding works, though being more specific:\r\n```java\r\nt.getResponseHeaders().add(&quot;Content-Type&quot;, &quot;text/html&quot;);\r\n```\r\nSources:\r\n\r\n - [com.sun.net.httpserver.HttpExchange][1] — `getResponseHeaders()`\r\n - [com.sun.net.httpserver.Headers][2] — `set()`, `put()`, `add()`\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/jdk.httpserver/com/sun/net/httpserver/HttpExchange.html\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/jdk.httpserver/com/sun/net/httpserver/Headers.html","title":"Setting Content Type in Java HttpServer response","body":"<p>In Java 17 either:</p>\n<pre class=\"lang-java prettyprint-override\"><code>t.getResponseHeaders().set(&quot;Content-Type&quot;, &quot;text/html&quot;);\n</code></pre>\n<p>Or:</p>\n<pre class=\"lang-java prettyprint-override\"><code>t.getResponseHeaders().put(&quot;Content-Type&quot;, Collections.singletonList(&quot;text/html&quot;));\n</code></pre>\n<p>Also, adding works, though being more specific:</p>\n<pre class=\"lang-java prettyprint-override\"><code>t.getResponseHeaders().add(&quot;Content-Type&quot;, &quot;text/html&quot;);\n</code></pre>\n<p>Sources:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/jdk.httpserver/com/sun/net/httpserver/HttpExchange.html\" rel=\"nofollow noreferrer\">com.sun.net.httpserver.HttpExchange</a> — <code>getResponseHeaders()</code></li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/jdk.httpserver/com/sun/net/httpserver/Headers.html\" rel=\"nofollow noreferrer\">com.sun.net.httpserver.Headers</a> — <code>set()</code>, <code>put()</code>, <code>add()</code></li>\n</ul>\n"}],"owner":{"account_id":1017690,"reputation":349,"user_id":1028872,"accept_rate":89,"display_name":"user1028872"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8364,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":41301053,"answer_count":3,"score":5,"last_activity_date":1662757416,"creation_date":1469924362,"question_id":38679686,"body_markdown":"I have a java echo httpserver up.\r\n\r\nIt works with test sites, but the client code I&#39;m working with fails to get the data. \r\n\r\nThe server works perfectly with https://www.hurl.it/\r\n\r\nThe client works perfectly with https://requestb.in/ and http://httpbin.org/post\r\n\r\nWhen combining the two I get a response with a status code of 200, but no metadata / body content shows up in the client even though it&#39;s being sent. \r\n\r\nMy only guess is because the content type isn&#39;t included, the client might be picky about that.\r\n\r\nHow can i specify the content type in my response?\r\n\r\n(A note, the client sends a single string to the server with a POST as a parameter along with some header info. This code is currently setup to only return the body content/parameter.)\r\n\r\nAny ideas appreciated!\r\n\r\n    import static java.net.HttpURLConnection.HTTP_OK;\r\n\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.OutputStream;\r\n    import java.net.InetSocketAddress;\r\n    import java.net.URLDecoder;\r\n    import java.util.List;\r\n\r\n    import com.sun.net.httpserver.Headers;\r\n    import com.sun.net.httpserver.HttpExchange;\r\n    import com.sun.net.httpserver.HttpHandler;\r\n    import com.sun.net.httpserver.HttpServer;\r\n\r\n    /**\r\n    * Echo the body of an HTTP request back as the HTTP response. This is merely\r\n    * a simple exercise of the Secret Sun Web Server. As configured, the URL to\r\n    * access it is http://localhost:8000/echo.\r\n    * \r\n    * @author Andrew Cowie\r\n    */\r\n    public final class Test\r\n    {\r\n    public static void main(String[] args) throws IOException {\r\n        final InetSocketAddress addr;\r\n        final HttpServer server;\r\n\r\n        addr = new InetSocketAddress(8000);\r\n\r\n        server = HttpServer.create(addr, 10);\r\n        server.createContext(&quot;/echo&quot;, new EchoHandler());\r\n        server.start();\r\n    }\r\n    }\r\n\r\n    class EchoHandler implements HttpHandler\r\n    {\r\n    public void handle(HttpExchange t) throws IOException {\r\n        final InputStream is;\r\n        final OutputStream os;\r\n        StringBuilder buf;\r\n        int b;\r\n        final String request, response;\r\n\r\n        buf = new StringBuilder();\r\n\r\n        /*\r\n         * Get the request body and decode it. Regardless of what you are\r\n         * actually doing, it is apparently considered correct form to consume\r\n         * all the bytes from the InputStream. If you don&#39;t, closing the\r\n         * OutputStream will cause that to occur\r\n         */\r\n\r\n        is = t.getRequestBody();\r\n\r\n        while ((b = is.read()) != -1) {\r\n            buf.append((char) b);\r\n        }\r\n\r\n        is.close();\r\n\r\n        if (buf.length() &gt; 0) {\r\n            request = URLDecoder.decode(buf.toString(), &quot;UTF-8&quot;);\r\n        } else {\r\n            request = null;\r\n        }\r\n\r\n        /*\r\n         * Construct our response:\r\n         */\r\n\r\n        buf = new StringBuilder();\r\n        //buf.append(&quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;HTTP echo server&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&quot;);\r\n        //buf.append(&quot;&lt;p&gt;&lt;pre&gt;&quot;);\r\n        //buf.append(t.getRequestMethod() + &quot; &quot; + t.getRequestURI() + &quot; &quot; + t.getProtocol() + &quot;\\n&quot;);\r\n\r\n        /*\r\n         * Process the request headers. This is a bit involved due to the\r\n         * complexity arising from the fact that headers can be repeated.\r\n         */\r\n\r\n        Headers headers = t.getRequestHeaders();\r\n\r\n        for (String name : headers.keySet()) {\r\n            List&lt;String&gt; values = headers.get(name);\r\n\r\n            for (String value : values) {\r\n                //buf.append(name + &quot;: &quot; + value + &quot;\\n&quot;);\r\n            }\r\n        }\r\n\r\n        /*\r\n         * If there was an actual body to the request, add it:\r\n         */\r\n\r\n        if (request != null) {\r\n            //buf.append(&quot;\\n&quot;);\r\n            buf.append(request);\r\n        }\r\n\r\n        //buf.append(&quot;&lt;/pre&gt;&lt;/p&gt;&quot;);\r\n        //buf.append(&quot;&lt;/body&gt;&lt;/html&gt;\\n&quot;);\r\n\r\n        response = buf.toString();\r\n\t\tSystem.out.println(response);\r\n\r\n        /*\r\n         * And now send the response. We could have instead done this\r\n         * dynamically, using 0 as the response size (forcing chunked\r\n         * encoding) and writing the bytes of the response directly to the\r\n         * OutputStream, but building the String first allows us to know the\r\n         * exact length so we can send a response with a known size. Better :)\r\n         */\r\n\r\n        t.sendResponseHeaders(HTTP_OK, response.length());\r\n\r\n        os = t.getResponseBody();\r\n\r\n        os.write(response.getBytes());\r\n\r\n        /*\r\n         * And we&#39;re done!\r\n         */\r\n\r\n        os.close();\r\n        t.close();\r\n    }\r\n}\r\n\r\n","title":"Setting Content Type in Java HttpServer response","body":"<p>I have a java echo httpserver up.</p>\n\n<p>It works with test sites, but the client code I'm working with fails to get the data. </p>\n\n<p>The server works perfectly with <a href=\"https://www.hurl.it/\" rel=\"noreferrer\">https://www.hurl.it/</a></p>\n\n<p>The client works perfectly with <a href=\"https://requestb.in/\" rel=\"noreferrer\">https://requestb.in/</a> and <a href=\"http://httpbin.org/post\" rel=\"noreferrer\">http://httpbin.org/post</a></p>\n\n<p>When combining the two I get a response with a status code of 200, but no metadata / body content shows up in the client even though it's being sent. </p>\n\n<p>My only guess is because the content type isn't included, the client might be picky about that.</p>\n\n<p>How can i specify the content type in my response?</p>\n\n<p>(A note, the client sends a single string to the server with a POST as a parameter along with some header info. This code is currently setup to only return the body content/parameter.)</p>\n\n<p>Any ideas appreciated!</p>\n\n<pre><code>import static java.net.HttpURLConnection.HTTP_OK;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.net.InetSocketAddress;\nimport java.net.URLDecoder;\nimport java.util.List;\n\nimport com.sun.net.httpserver.Headers;\nimport com.sun.net.httpserver.HttpExchange;\nimport com.sun.net.httpserver.HttpHandler;\nimport com.sun.net.httpserver.HttpServer;\n\n/**\n* Echo the body of an HTTP request back as the HTTP response. This is merely\n* a simple exercise of the Secret Sun Web Server. As configured, the URL to\n* access it is http://localhost:8000/echo.\n* \n* @author Andrew Cowie\n*/\npublic final class Test\n{\npublic static void main(String[] args) throws IOException {\n    final InetSocketAddress addr;\n    final HttpServer server;\n\n    addr = new InetSocketAddress(8000);\n\n    server = HttpServer.create(addr, 10);\n    server.createContext(\"/echo\", new EchoHandler());\n    server.start();\n}\n}\n\nclass EchoHandler implements HttpHandler\n{\npublic void handle(HttpExchange t) throws IOException {\n    final InputStream is;\n    final OutputStream os;\n    StringBuilder buf;\n    int b;\n    final String request, response;\n\n    buf = new StringBuilder();\n\n    /*\n     * Get the request body and decode it. Regardless of what you are\n     * actually doing, it is apparently considered correct form to consume\n     * all the bytes from the InputStream. If you don't, closing the\n     * OutputStream will cause that to occur\n     */\n\n    is = t.getRequestBody();\n\n    while ((b = is.read()) != -1) {\n        buf.append((char) b);\n    }\n\n    is.close();\n\n    if (buf.length() &gt; 0) {\n        request = URLDecoder.decode(buf.toString(), \"UTF-8\");\n    } else {\n        request = null;\n    }\n\n    /*\n     * Construct our response:\n     */\n\n    buf = new StringBuilder();\n    //buf.append(\"&lt;html&gt;&lt;head&gt;&lt;title&gt;HTTP echo server&lt;/title&gt;&lt;/head&gt;&lt;body&gt;\");\n    //buf.append(\"&lt;p&gt;&lt;pre&gt;\");\n    //buf.append(t.getRequestMethod() + \" \" + t.getRequestURI() + \" \" + t.getProtocol() + \"\\n\");\n\n    /*\n     * Process the request headers. This is a bit involved due to the\n     * complexity arising from the fact that headers can be repeated.\n     */\n\n    Headers headers = t.getRequestHeaders();\n\n    for (String name : headers.keySet()) {\n        List&lt;String&gt; values = headers.get(name);\n\n        for (String value : values) {\n            //buf.append(name + \": \" + value + \"\\n\");\n        }\n    }\n\n    /*\n     * If there was an actual body to the request, add it:\n     */\n\n    if (request != null) {\n        //buf.append(\"\\n\");\n        buf.append(request);\n    }\n\n    //buf.append(\"&lt;/pre&gt;&lt;/p&gt;\");\n    //buf.append(\"&lt;/body&gt;&lt;/html&gt;\\n\");\n\n    response = buf.toString();\n    System.out.println(response);\n\n    /*\n     * And now send the response. We could have instead done this\n     * dynamically, using 0 as the response size (forcing chunked\n     * encoding) and writing the bytes of the response directly to the\n     * OutputStream, but building the String first allows us to know the\n     * exact length so we can send a response with a known size. Better :)\n     */\n\n    t.sendResponseHeaders(HTTP_OK, response.length());\n\n    os = t.getResponseBody();\n\n    os.write(response.getBytes());\n\n    /*\n     * And we're done!\n     */\n\n    os.close();\n    t.close();\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":["java","annotations","annotation-processing"],"comments":[{"owner":{"account_id":459879,"reputation":17931,"user_id":860630,"display_name":"Colin Alworth"},"score":0,"creation_date":1552763469,"post_id":55172210,"comment_id":97138254,"body_markdown":"To further confirm in the question - the annotation is generated but the annotated type isn&#39;t? So, prior to being compiled, the source existed with the non-existent annotation, and the annotation is then created _in the same pass_ that you read the annotation&#39;s properties? Or are they different passes, or different processors?","body":"To further confirm in the question - the annotation is generated but the annotated type isn&#39;t? So, prior to being compiled, the source existed with the non-existent annotation, and the annotation is then created <i>in the same pass</i> that you read the annotation&#39;s properties? Or are they different passes, or different processors?"},{"owner":{"account_id":459879,"reputation":17931,"user_id":860630,"display_name":"Colin Alworth"},"score":0,"creation_date":1552763575,"post_id":55172210,"comment_id":97138285,"body_markdown":"And, are you creating the annotation _before_ reading it as a mirror? Not just are these expected to happen in the same pass, but actually in that correct order? I&#39;m certain that would never work in reverse order, and think it is pretty unlikely that it could be even done within the same pass (since the annotation doesnt even have &quot;fields&quot; yet, at least not of a static type, so the map&#39;s values can&#39;t have a type, even if they are used in sources).","body":"And, are you creating the annotation <i>before</i> reading it as a mirror? Not just are these expected to happen in the same pass, but actually in that correct order? I&#39;m certain that would never work in reverse order, and think it is pretty unlikely that it could be even done within the same pass (since the annotation doesnt even have &quot;fields&quot; yet, at least not of a static type, so the map&#39;s values can&#39;t have a type, even if they are used in sources)."},{"owner":{"account_id":7188795,"reputation":385,"user_id":5489898,"accept_rate":50,"display_name":"Namnodorel"},"score":0,"creation_date":1552764057,"post_id":55172210,"comment_id":97138408,"body_markdown":"@ColinAlworth Your first comment is correct - the annotation class is created in the same round/pass within the same processor. I am creating the annotation classes before reading it as a mirror, and that order is certain. It currently happens within the same round, since the class that uses the annotation isn&#39;t generated and thus not present in subsequent rounds.","body":"@ColinAlworth Your first comment is correct - the annotation class is created in the same round/pass within the same processor. I am creating the annotation classes before reading it as a mirror, and that order is certain. It currently happens within the same round, since the class that uses the annotation isn&#39;t generated and thus not present in subsequent rounds."},{"owner":{"account_id":459879,"reputation":17931,"user_id":860630,"display_name":"Colin Alworth"},"score":0,"creation_date":1552764469,"post_id":55172210,"comment_id":97138510,"body_markdown":"We&#39;re out of my depth to be 100% certain here, but my understanding is that within a round generated sources will not be compiled but instead you need to wait for the round to end, and until then the fields on those newly emitted types will not be available, even in cases like this. Waiting until the next round does not mean that the type won&#39;t be present in the round, just that it won&#39;t be offered directly, you can still read it from the Elements object, etc. See auto-common&#39;s `BasicAnnotationProcessor` as an example, deliberately avoiding processing incomplete classes until they are ready.","body":"We&#39;re out of my depth to be 100% certain here, but my understanding is that within a round generated sources will not be compiled but instead you need to wait for the round to end, and until then the fields on those newly emitted types will not be available, even in cases like this. Waiting until the next round does not mean that the type won&#39;t be present in the round, just that it won&#39;t be offered directly, you can still read it from the Elements object, etc. See auto-common&#39;s <code>BasicAnnotationProcessor</code> as an example, deliberately avoiding processing incomplete classes until they are ready."},{"owner":{"account_id":7188795,"reputation":385,"user_id":5489898,"accept_rate":50,"display_name":"Namnodorel"},"score":0,"creation_date":1552833510,"post_id":55172210,"comment_id":97152380,"body_markdown":"@ColinAlworth You should probably post that as an answer :) `annotation.toString()` just outputs the literal annotation, and doesn&#39;t care whether the type exists or where it is. But the Annotation type (and its methods) are apparently required to determine the passed parameters (though I don&#39;t understand why). Using `BasicAnnotationProcessor` to defer processing the annotations solved the issue.","body":"@ColinAlworth You should probably post that as an answer :) <code>annotation.toString()</code> just outputs the literal annotation, and doesn&#39;t care whether the type exists or where it is. But the Annotation type (and its methods) are apparently required to determine the passed parameters (though I don&#39;t understand why). Using <code>BasicAnnotationProcessor</code> to defer processing the annotations solved the issue."}],"answers":[{"tags":[],"owner":{"account_id":2480204,"reputation":1014,"user_id":2159821,"display_name":"Ahmad Bawaneh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1552664577,"creation_date":1552664255,"answer_id":55186089,"question_id":55172210,"body_markdown":"Use `getAnnotation(MyAnnotation.class)` available from VariableElement\r\n\r\nin your example code you can do this to get the `min` and `max` parameters\r\n\r\n```\r\nMyAnnotation myAnnotation= field.getAnnotation(MyAnnotation.class);\r\nint max = myAnnotation.max();\r\nint min = myAnnotation.min();\r\n\r\n```\r\nthis will work unless the annotation members returns `class/class[]` value, in which you will get an exception if you try to get the value using this method.\r\n\r\nmore about how to get class literal values can be found on this answer\r\n\r\nhttps://stackoverflow.com/questions/54441572/how-to-read-a-class-values-from-a-nested-annotation-in-an-annotation-processor\r\n\r\nOr using annotation mirrors\r\n\r\n```\r\nfor (AnnotationMirror annotation : field.getAnnotationMirrors()) {\r\n    Map&lt;? extends ExecutableElement, ? extends AnnotationValue&gt; annotationValueMap = annotation.getElementValues();\r\n    annotationValueMap.forEach((element, annotationValue) -&gt; {\r\n        messager.printMessage(Diagnostic.Kind.WARNING, element.getSimpleName().toString() + &quot;:&quot; + annotationValue.getValue());\r\n    });\r\n}\r\n\r\n```\r\n\r\nIn case you have more than one annotation on the field then you can iterate over the annotation mirrors and use the check `types.isSameType(annotationMirror.getAnnotationType(), elements.getTypeElement(MyAnnotation.class.getName()).asType())` to find the annotation you are interested in","title":"Get all values of a generated Annotation in an Annotation Processor","body":"<p>Use <code>getAnnotation(MyAnnotation.class)</code> available from VariableElement</p>\n\n<p>in your example code you can do this to get the <code>min</code> and <code>max</code> parameters</p>\n\n<pre><code>MyAnnotation myAnnotation= field.getAnnotation(MyAnnotation.class);\nint max = myAnnotation.max();\nint min = myAnnotation.min();\n\n</code></pre>\n\n<p>this will work unless the annotation members returns <code>class/class[]</code> value, in which you will get an exception if you try to get the value using this method.</p>\n\n<p>more about how to get class literal values can be found on this answer</p>\n\n<p><a href=\"https://stackoverflow.com/questions/54441572/how-to-read-a-class-values-from-a-nested-annotation-in-an-annotation-processor\">How to read a Class[] values from a nested annotation in an annotation processor</a></p>\n\n<p>Or using annotation mirrors</p>\n\n<pre><code>for (AnnotationMirror annotation : field.getAnnotationMirrors()) {\n    Map&lt;? extends ExecutableElement, ? extends AnnotationValue&gt; annotationValueMap = annotation.getElementValues();\n    annotationValueMap.forEach((element, annotationValue) -&gt; {\n        messager.printMessage(Diagnostic.Kind.WARNING, element.getSimpleName().toString() + \":\" + annotationValue.getValue());\n    });\n}\n\n</code></pre>\n\n<p>In case you have more than one annotation on the field then you can iterate over the annotation mirrors and use the check <code>types.isSameType(annotationMirror.getAnnotationType(), elements.getTypeElement(MyAnnotation.class.getName()).asType())</code> to find the annotation you are interested in</p>\n"},{"tags":[],"owner":{"account_id":459879,"reputation":17931,"user_id":860630,"display_name":"Colin Alworth"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1552915940,"creation_date":1552915940,"answer_id":55222577,"question_id":55172210,"body_markdown":"Recall that annotation processors run as part of the compiler, in steps called &quot;rounds&quot;. This process runs iteratively until there is no new code to compile, and then processors get one last chance to run (not necessary for this answer, but helpful for more context). Each round only the newly created types are _directly_ given to the processor to examine.\r\n\r\nWhat seems to be happening here is that _during_ a round you are emitting a new annotation type, which should allow the processor to observe certain features about some code submitted to be compiled. However, any types created during a given round are not yet compiled until the next round begins.\r\n\r\nFor this question, we run into a conflict here - some Java sources are compiled which use an annotation _that doesn&#39;t exist yet_. The processor first creates the annotation, and then tries to read the newly-created annotation out of those partly-compiled sources. Unfortunately, until the annotation has been compiled, we can&#39;t actually read the annotation. Instead, we need to wait until the subsequent round (once the annotation itself has compiled), then go back to that class which has finished being compiled and examine it.\r\n\r\nThis can be implemented yourself without too much trouble, but the easiest way is often to rely on the google/auto project (specifically the auto-common library, see https://github.com/google/auto/tree/master/common), and extend their `BasicAnnotationProcessor` class. One of the nice features it supports is to automatically examine types and check if there are any compilation issues - if so, they are deferred until a later round so you can handle them without any type resolution issues.","title":"Get all values of a generated Annotation in an Annotation Processor","body":"<p>Recall that annotation processors run as part of the compiler, in steps called \"rounds\". This process runs iteratively until there is no new code to compile, and then processors get one last chance to run (not necessary for this answer, but helpful for more context). Each round only the newly created types are <em>directly</em> given to the processor to examine.</p>\n\n<p>What seems to be happening here is that <em>during</em> a round you are emitting a new annotation type, which should allow the processor to observe certain features about some code submitted to be compiled. However, any types created during a given round are not yet compiled until the next round begins.</p>\n\n<p>For this question, we run into a conflict here - some Java sources are compiled which use an annotation <em>that doesn't exist yet</em>. The processor first creates the annotation, and then tries to read the newly-created annotation out of those partly-compiled sources. Unfortunately, until the annotation has been compiled, we can't actually read the annotation. Instead, we need to wait until the subsequent round (once the annotation itself has compiled), then go back to that class which has finished being compiled and examine it.</p>\n\n<p>This can be implemented yourself without too much trouble, but the easiest way is often to rely on the google/auto project (specifically the auto-common library, see <a href=\"https://github.com/google/auto/tree/master/common\" rel=\"nofollow noreferrer\">https://github.com/google/auto/tree/master/common</a>), and extend their <code>BasicAnnotationProcessor</code> class. One of the nice features it supports is to automatically examine types and check if there are any compilation issues - if so, they are deferred until a later round so you can handle them without any type resolution issues.</p>\n"},{"tags":[],"owner":{"account_id":193604,"reputation":1751,"user_id":435436,"display_name":"Tim Boudreau"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662757347,"creation_date":1662757347,"answer_id":73667459,"question_id":55172210,"body_markdown":"Yes, you will not be able to instantiate a `Class` object for a type which is not available in your annotation processor&#39;s classloader, and may not even have been compiled into a class file yet at all.  A similar problem exists for retrieving enum constants.\r\n\r\nThere are a few wrinkles to dealing with this sort of thing:\r\n\r\n 1. Any annotation value that is declared as an array might come to you at compile time either as a single value, or a list of values - so any code needs a path to handle both the list and non-list case - like [this][1]\r\n 2. What you get may be a generic type, and if you are generating Java code or similar that wants to insert a reference to `Foo.class` you need to get the erasure of that type, so you don&#39;t generate `Foo&lt;Bar&gt;.class` into your generated sources.\r\n 3. One of the places your annotation processor is going to get run is *in an IDE*, on broken code still being typed, so it is important to fail gracefully in the case that code elements that, you would think, can&#39;t possibly be missing or broken or unlikely values, are.  In an IDE, your annotation processor may also be kept alive for a long time and reused, so it&#39;s important not to pile up objects modeling stuff that has already been generated and emitted.\r\n\r\nFWIW, I wrote [a library][2] to solve this and related problems, which can be found on Maven central at the coordinates `com.mastfrog:annotations-tools:2.8.3.4` (check for newer versions).  The usage pattern is simple:\r\n\r\n  * Instantiate an instance of `AnnotationUtils` in an override of the `init()` method of your annotation processor and store it in a field\r\n  * Use it to, for example, resolve a `Class&lt;?&gt;[]` into a list of string class names that you *can* work with inside javac, and similar\r\n\r\nIt makes it pretty straightforward to write annotation processors that do not directly depending on the classes they processes at all - which means the annotation processors (and their dependency graphs!) be completely independent of what they process, and can depend on whatever libraries they like without forcing those dependencies into the dependency graph of any project that uses them - the most common pattern is someone writes some annotations and then puts the annotation processor in the same project, or even package, and so anything the annotation processor uses becomes a dependency of every consumer of the annotations, even though those dependencies will probably never be used at runtime at all.  That, it seems to me, is an antipattern worth avoiding.\r\n\r\n\r\n  [1]: https://github.com/timboudreau/annotation-tools/blob/master/annotation-tools/src/main/java/com/mastfrog/annotation/AnnotationUtils.java#L516\r\n  [2]: https://github.com/timboudreau/annotation-tools","title":"Get all values of a generated Annotation in an Annotation Processor","body":"<p>Yes, you will not be able to instantiate a <code>Class</code> object for a type which is not available in your annotation processor's classloader, and may not even have been compiled into a class file yet at all.  A similar problem exists for retrieving enum constants.</p>\n<p>There are a few wrinkles to dealing with this sort of thing:</p>\n<ol>\n<li>Any annotation value that is declared as an array might come to you at compile time either as a single value, or a list of values - so any code needs a path to handle both the list and non-list case - like <a href=\"https://github.com/timboudreau/annotation-tools/blob/master/annotation-tools/src/main/java/com/mastfrog/annotation/AnnotationUtils.java#L516\" rel=\"nofollow noreferrer\">this</a></li>\n<li>What you get may be a generic type, and if you are generating Java code or similar that wants to insert a reference to <code>Foo.class</code> you need to get the erasure of that type, so you don't generate <code>Foo&lt;Bar&gt;.class</code> into your generated sources.</li>\n<li>One of the places your annotation processor is going to get run is <em>in an IDE</em>, on broken code still being typed, so it is important to fail gracefully in the case that code elements that, you would think, can't possibly be missing or broken or unlikely values, are.  In an IDE, your annotation processor may also be kept alive for a long time and reused, so it's important not to pile up objects modeling stuff that has already been generated and emitted.</li>\n</ol>\n<p>FWIW, I wrote <a href=\"https://github.com/timboudreau/annotation-tools\" rel=\"nofollow noreferrer\">a library</a> to solve this and related problems, which can be found on Maven central at the coordinates <code>com.mastfrog:annotations-tools:2.8.3.4</code> (check for newer versions).  The usage pattern is simple:</p>\n<ul>\n<li>Instantiate an instance of <code>AnnotationUtils</code> in an override of the <code>init()</code> method of your annotation processor and store it in a field</li>\n<li>Use it to, for example, resolve a <code>Class&lt;?&gt;[]</code> into a list of string class names that you <em>can</em> work with inside javac, and similar</li>\n</ul>\n<p>It makes it pretty straightforward to write annotation processors that do not directly depending on the classes they processes at all - which means the annotation processors (and their dependency graphs!) be completely independent of what they process, and can depend on whatever libraries they like without forcing those dependencies into the dependency graph of any project that uses them - the most common pattern is someone writes some annotations and then puts the annotation processor in the same project, or even package, and so anything the annotation processor uses becomes a dependency of every consumer of the annotations, even though those dependencies will probably never be used at runtime at all.  That, it seems to me, is an antipattern worth avoiding.</p>\n"}],"owner":{"account_id":7188795,"reputation":385,"user_id":5489898,"accept_rate":50,"display_name":"Namnodorel"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":993,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":55222577,"answer_count":3,"score":1,"last_activity_date":1662757347,"creation_date":1552598507,"question_id":55172210,"body_markdown":"I have a `VariableElement` field that is annotated with a generated Annotation (which is why I can&#39;t use `field.getAnnotation(annotationClass)`). I need to get all parameters passed to this annotation.\r\n\r\n_Note that by &quot;a generated Annotation&quot; I mean that literally the Annotation class itself (not the annotated one) has been generated by an Annotation Processor. The field/class that is being annotated is in the handwritten source code._\r\n\r\nIt didn&#39;t look like it&#39;d be that hard, so far I&#39;ve come up with this:\r\n````\r\nfor (AnnotationMirror annotation : field.getAnnotationMirrors()) {\r\n    Map&lt;? extends ExecutableElement, ? extends AnnotationValue&gt; annotationValueMap = annotation.getElementValues();\r\n\r\n    messager.printMessage(Diagnostic.Kind.WARNING, annotation.toString() + &quot;:&quot; + annotationValueMap.toString());\r\n}\r\n````\r\n\r\nI thought this would do it, but the output for the field is the following:\r\n````\r\n@MyAnnotation:{}\r\n````\r\n\r\nSo, the processor does recognize that the field is annotated, but I&#39;m unable to access the passed parameters. Even though the field is definetely annotated and does pass parameters with the annotation (it has to, since the annotation defines required parameters and no defaults):\r\n````\r\n@MyAnnotation(max = 387, min = 66876, ...)\r\nprivate Integer myField;\r\n````\r\n\r\nHere&#39;s the generated annotation code:\r\n````\r\n@Retention(RetentionPolicy.SOURCE)\r\n@Target(ElementType.FIELD)\r\npublic @interface MyAnnotation {\r\n  int max();\r\n\r\n  boolean allowAuto();\r\n\r\n  int min();\r\n}\r\n````\r\n\r\nI&#39;ve clean-compiled the project multiple times, the processor never sees the values. What am I overlooking here? The processor can obviously see the annotation itself, yet the parameters passed to it are hidden.","title":"Get all values of a generated Annotation in an Annotation Processor","body":"<p>I have a <code>VariableElement</code> field that is annotated with a generated Annotation (which is why I can't use <code>field.getAnnotation(annotationClass)</code>). I need to get all parameters passed to this annotation.</p>\n\n<p><em>Note that by \"a generated Annotation\" I mean that literally the Annotation class itself (not the annotated one) has been generated by an Annotation Processor. The field/class that is being annotated is in the handwritten source code.</em></p>\n\n<p>It didn't look like it'd be that hard, so far I've come up with this:</p>\n\n<pre><code>for (AnnotationMirror annotation : field.getAnnotationMirrors()) {\n    Map&lt;? extends ExecutableElement, ? extends AnnotationValue&gt; annotationValueMap = annotation.getElementValues();\n\n    messager.printMessage(Diagnostic.Kind.WARNING, annotation.toString() + \":\" + annotationValueMap.toString());\n}\n</code></pre>\n\n<p>I thought this would do it, but the output for the field is the following:</p>\n\n<pre><code>@MyAnnotation:{}\n</code></pre>\n\n<p>So, the processor does recognize that the field is annotated, but I'm unable to access the passed parameters. Even though the field is definetely annotated and does pass parameters with the annotation (it has to, since the annotation defines required parameters and no defaults):</p>\n\n<pre><code>@MyAnnotation(max = 387, min = 66876, ...)\nprivate Integer myField;\n</code></pre>\n\n<p>Here's the generated annotation code:</p>\n\n<pre><code>@Retention(RetentionPolicy.SOURCE)\n@Target(ElementType.FIELD)\npublic @interface MyAnnotation {\n  int max();\n\n  boolean allowAuto();\n\n  int min();\n}\n</code></pre>\n\n<p>I've clean-compiled the project multiple times, the processor never sees the values. What am I overlooking here? The processor can obviously see the annotation itself, yet the parameters passed to it are hidden.</p>\n"},{"tags":["java","log4j","log4j2"],"answers":[{"tags":[],"owner":{"account_id":1891192,"reputation":8826,"user_id":1709216,"display_name":"rgoers"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1578928489,"creation_date":1578928489,"answer_id":59719309,"question_id":59713891,"body_markdown":"Appenders in Log4j 2 implement the Appender interface. Most Appenders will extend either [AbstractAppender][1], [AbstractOutputStreamAppender][2], or [AbstractWriterAppender][3]. Log4j 2 uses Plugins, which means your appender will have to be annotated with @Plugin and defined as an Appender. Appenders also require a Builder annotated with @PluginBuilderFactory to create the Appender instance from its configuration. You can look at any of Log4j&#39;s Appenders, such as [FileAppender][4], for an example.\r\n\r\nYou will also notice that most of the Appenders use a Manager to perform most of the work. This is because Appenders are always recreated during a reconfiguration, which could lead to problems. The Managers are only recreated if attributes specific to that Manager are changed, otherwise the new Appender instance will reuse the previous Manager.\r\n\r\n\r\n  [1]: https://github.com/apache/logging-log4j2/blob/master/log4j-core/src/main/java/org/apache/logging/log4j/core/appender/AbstractAppender.java\r\n  [2]: https://github.com/apache/logging-log4j2/blob/master/log4j-core/src/main/java/org/apache/logging/log4j/core/appender/AbstractOutputStreamAppender.java\r\n  [3]: https://github.com/apache/logging-log4j2/blob/master/log4j-core/src/main/java/org/apache/logging/log4j/core/appender/AbstractWriterAppender.java\r\n  [4]: https://github.com/apache/logging-log4j2/blob/master/log4j-core/src/main/java/org/apache/logging/log4j/core/appender/FileAppender.java","title":"AppenderSkeleton (Log4j2)","body":"<p>Appenders in Log4j 2 implement the Appender interface. Most Appenders will extend either <a href=\"https://github.com/apache/logging-log4j2/blob/master/log4j-core/src/main/java/org/apache/logging/log4j/core/appender/AbstractAppender.java\" rel=\"noreferrer\">AbstractAppender</a>, <a href=\"https://github.com/apache/logging-log4j2/blob/master/log4j-core/src/main/java/org/apache/logging/log4j/core/appender/AbstractOutputStreamAppender.java\" rel=\"noreferrer\">AbstractOutputStreamAppender</a>, or <a href=\"https://github.com/apache/logging-log4j2/blob/master/log4j-core/src/main/java/org/apache/logging/log4j/core/appender/AbstractWriterAppender.java\" rel=\"noreferrer\">AbstractWriterAppender</a>. Log4j 2 uses Plugins, which means your appender will have to be annotated with @Plugin and defined as an Appender. Appenders also require a Builder annotated with @PluginBuilderFactory to create the Appender instance from its configuration. You can look at any of Log4j's Appenders, such as <a href=\"https://github.com/apache/logging-log4j2/blob/master/log4j-core/src/main/java/org/apache/logging/log4j/core/appender/FileAppender.java\" rel=\"noreferrer\">FileAppender</a>, for an example.</p>\n\n<p>You will also notice that most of the Appenders use a Manager to perform most of the work. This is because Appenders are always recreated during a reconfiguration, which could lead to problems. The Managers are only recreated if attributes specific to that Manager are changed, otherwise the new Appender instance will reuse the previous Manager.</p>\n"},{"tags":[],"owner":{"account_id":6789104,"reputation":305,"user_id":5856262,"display_name":"oskarryn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662756726,"creation_date":1653397065,"answer_id":72363336,"question_id":59713891,"body_markdown":"The code supporting the accepted answer here is available in the [answer by David Lopez Carrasco to another question](https://stackoverflow.com/a/31836674/5856262). This code should be supplemented with clearing the logs List in-between tests and test suites (otherwise the appender would hold messages from previous loggers).","title":"AppenderSkeleton (Log4j2)","body":"<p>The code supporting the accepted answer here is available in the <a href=\"https://stackoverflow.com/a/31836674/5856262\">answer by David Lopez Carrasco to another question</a>. This code should be supplemented with clearing the logs List in-between tests and test suites (otherwise the appender would hold messages from previous loggers).</p>\n"}],"owner":{"account_id":1041234,"reputation":1441,"user_id":1047226,"accept_rate":70,"display_name":"hell_storm2004"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9840,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":59719309,"answer_count":2,"score":12,"last_activity_date":1662756726,"creation_date":1578908312,"question_id":59713891,"body_markdown":"I am trying to migrate a class that extends `org.apache.log4j.AppenderSkeleton` from an old version of log4j to log4j 2. I was reading the JavaDoc for the class, and I read that, \r\n\r\n&gt; Appenders constructed using this are ignored in Log4j 2.\r\n\r\non the website for the class.\r\n\r\nDoes this mean, if I am using Log4j 2, I should extend this class? If yes, what should I use as an alternative? Would ConsoleAppender do the trick?\r\n","title":"AppenderSkeleton (Log4j2)","body":"<p>I am trying to migrate a class that extends <code>org.apache.log4j.AppenderSkeleton</code> from an old version of log4j to log4j 2. I was reading the JavaDoc for the class, and I read that, </p>\n\n<blockquote>\n  <p>Appenders constructed using this are ignored in Log4j 2.</p>\n</blockquote>\n\n<p>on the website for the class.</p>\n\n<p>Does this mean, if I am using Log4j 2, I should extend this class? If yes, what should I use as an alternative? Would ConsoleAppender do the trick?</p>\n"},{"tags":["java","xml","telegram"],"comments":[{"owner":{"account_id":10528158,"reputation":334,"user_id":7758485,"display_name":"DiLDoST"},"score":0,"creation_date":1662771751,"post_id":73667382,"comment_id":130090171,"body_markdown":"1) rebuild the project. 2) search the text in the project (source codes) and change it.","body":"1) rebuild the project. 2) search the text in the project (source codes) and change it."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1662901213,"post_id":73667382,"comment_id":130108718,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":26294320,"reputation":1,"user_id":19960837,"display_name":"Adithyan Brave"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662756724,"creation_date":1662756724,"question_id":73667382,"body_markdown":"I have downloaded telegram source code from official GitHub page and I have changed the strings.xml and logo, app name etc and I compiled the same. But when I first open the app it shows by changed string and after logging in the strings will be shown as in the source ( my changes are not effected). Why this strings get reseted back to initial values ","title":"Telegram source code String file changing no effect","body":"<p>I have downloaded telegram source code from official GitHub page and I have changed the strings.xml and logo, app name etc and I compiled the same. But when I first open the app it shows by changed string and after logging in the strings will be shown as in the source ( my changes are not effected). Why this strings get reseted back to initial values</p>\n"},{"tags":["java","csv","apache-commons","apache-commons-csv"],"answers":[{"tags":[],"owner":{"account_id":2842802,"reputation":4449,"user_id":2442031,"display_name":"fcuesta"},"down_vote_count":0,"up_vote_count":89,"is_accepted":true,"score":89,"last_activity_date":1418401819,"creation_date":1418401819,"answer_id":27447950,"question_id":27323639,"body_markdown":"Calling withHeader() to the default Excel CSV format worked for me:\r\n\r\n    CSVFormat.EXCEL.withHeader().parse(in);\r\n\r\nThe sample in the documentation is not very clear, but you can found it [here][1]\r\n:\r\n***Referencing columns safely:**\r\nIf your source contains a header record, you can simplify your code and safely reference columns, by using withHeader(String...) with no arguments:\r\n CSVFormat.EXCEL.withHeader();*\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-csv/apidocs/org/apache/commons/csv/CSVFormat.html","title":"No header mapping was specified, the record values can&#39;t be accessed by name (Apache Commons CSV)","body":"<p>Calling withHeader() to the default Excel CSV format worked for me:</p>\n\n<pre><code>CSVFormat.EXCEL.withHeader().parse(in);\n</code></pre>\n\n<p>The sample in the documentation is not very clear, but you can found it <a href=\"https://commons.apache.org/proper/commons-csv/apidocs/org/apache/commons/csv/CSVFormat.html\" rel=\"noreferrer\">here</a>\n:\n<strong><em>Referencing columns safely:</strong>\nIf your source contains a header record, you can simplify your code and safely reference columns, by using withHeader(String...) with no arguments:\n CSVFormat.EXCEL.withHeader();</em></p>\n"},{"tags":[],"owner":{"account_id":12640128,"reputation":21,"user_id":9187952,"display_name":"biswajit khan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1575283421,"creation_date":1575282032,"answer_id":59136837,"question_id":27323639,"body_markdown":"this worked for me\r\n```\r\ntry (Reader in = new FileReader(f);\r\n\t\t\t\tCSVParser parser = new CSVParser(in,\r\n\t\t\t\t\t\tCSVFormat.EXCEL.withDelimiter(&#39;;&#39;).withHeader(&quot;Assembly Item Number&quot;, &quot;Material Type&quot;,\t\t\t\t\t\t\t\t&quot;Item Name&quot;, &quot;Drawing Num&quot;, &quot;Document Type&quot;, &quot;Revision&quot;, &quot;Status&quot;, &quot;Drawing name&quot;,\r\n\t\t\t\t\t\t\t\t&quot;BOM Material Type&quot;, &quot;Component Name&quot;));) {\r\n\t\t\tfor (CSVRecord record : parser) {\r\n\t\t\t\t\tSystem.out.println(record.get(&quot;Item Name&quot;));\r\n\t\t\t}\r\n\t\t} catch (IOException e1) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te1.printStackTrace();\r\n\t\t}\r\n```","title":"No header mapping was specified, the record values can&#39;t be accessed by name (Apache Commons CSV)","body":"<p>this worked for me</p>\n\n<pre><code>try (Reader in = new FileReader(f);\n                CSVParser parser = new CSVParser(in,\n                        CSVFormat.EXCEL.withDelimiter(';').withHeader(\"Assembly Item Number\", \"Material Type\",                              \"Item Name\", \"Drawing Num\", \"Document Type\", \"Revision\", \"Status\", \"Drawing name\",\n                                \"BOM Material Type\", \"Component Name\"));) {\n            for (CSVRecord record : parser) {\n                    System.out.println(record.get(\"Item Name\"));\n            }\n        } catch (IOException e1) {\n            // TODO Auto-generated catch block\n            e1.printStackTrace();\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3329588,"reputation":622,"user_id":2798816,"display_name":"Sanket Mehta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594980146,"creation_date":1594980146,"answer_id":62951683,"question_id":27323639,"body_markdown":"I managed to ignore the space in the header name (in between) using the following code - by using the get(index) instead of get(&quot;header_name&quot;). And also, stop reading the csv when blank value/row is detected:\r\n\r\n     CSVParser csvParser = CSVFormat.EXCEL.withFirstRecordAsHeader().parse(br);\r\n             for (CSVRecord record : csvParser) {\r\n                 String number= record.get(0);\r\n                 String date = record.get(&quot;date&quot;);\r\n                 String location = record.get(&quot;Location&quot;);\r\n                 String lsFile = record.get(3);\r\n                 String docName = record.get(4);\r\n              \r\n                 \r\n                 if(StringUtils.isEmpty(lsFile)) {\r\n                     break;\r\n                 }\r\n          }","title":"No header mapping was specified, the record values can&#39;t be accessed by name (Apache Commons CSV)","body":"<p>I managed to ignore the space in the header name (in between) using the following code - by using the get(index) instead of get(&quot;header_name&quot;). And also, stop reading the csv when blank value/row is detected:</p>\n<pre><code> CSVParser csvParser = CSVFormat.EXCEL.withFirstRecordAsHeader().parse(br);\n         for (CSVRecord record : csvParser) {\n             String number= record.get(0);\n             String date = record.get(&quot;date&quot;);\n             String location = record.get(&quot;Location&quot;);\n             String lsFile = record.get(3);\n             String docName = record.get(4);\n          \n             \n             if(StringUtils.isEmpty(lsFile)) {\n                 break;\n             }\n      }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19934265,"reputation":1,"user_id":14607302,"display_name":"user14607302"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604941041,"creation_date":1604941041,"answer_id":64755887,"question_id":27323639,"body_markdown":"you need to get a look a the definition of every format in this [URL][1] \r\n to define the format of your file \r\ntry this :\r\n\r\n          File f = new File(&quot;your path file &quot;);\r\n          Reader  readfile = new FileReader(f);\r\n\r\n        Iterable&lt;CSVRecord&gt; records = CSVFormat.DEFAULT.withDelimiter(&#39;;&#39;).withHeader().parse(readfile);\r\n\r\n  [1]: https://commons.apache.org/proper/commons-csv/apidocs/org/apache/commons/csv/CSVFormat.html#DEFAULT","title":"No header mapping was specified, the record values can&#39;t be accessed by name (Apache Commons CSV)","body":"<p>you need to get a look a the definition of every format in this <a href=\"https://commons.apache.org/proper/commons-csv/apidocs/org/apache/commons/csv/CSVFormat.html#DEFAULT\" rel=\"nofollow noreferrer\">URL</a>\nto define the format of your file\ntry this :</p>\n<pre><code>      File f = new File(&quot;your path file &quot;);\n      Reader  readfile = new FileReader(f);\n\n    Iterable&lt;CSVRecord&gt; records = CSVFormat.DEFAULT.withDelimiter(';').withHeader().parse(readfile);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662755580,"creation_date":1662755580,"answer_id":73667245,"question_id":27323639,"body_markdown":"With version 1.9.0 `withHeader()` is now deprecated and the guide hasn&#39;t been updated. You&#39;re supposed to use this pattern: `CSVFormat.RFC4180.builder().setHeader(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;).build().parse(in)`","title":"No header mapping was specified, the record values can&#39;t be accessed by name (Apache Commons CSV)","body":"<p>With version 1.9.0 <code>withHeader()</code> is now deprecated and the guide hasn't been updated. You're supposed to use this pattern: <code>CSVFormat.RFC4180.builder().setHeader(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;).build().parse(in)</code></p>\n"}],"owner":{"account_id":964444,"reputation":1014,"user_id":988145,"accept_rate":80,"display_name":"Creature"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29929,"favorite_count":0,"down_vote_count":0,"up_vote_count":58,"accepted_answer_id":27447950,"answer_count":5,"score":58,"last_activity_date":1662755580,"creation_date":1417809194,"question_id":27323639,"body_markdown":"I got this error message happening when I&#39;m trying to read a csv:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.IllegalStateException: No header mapping was specified, the record values can&#39;t be accessed by name\r\n\tat org.apache.commons.csv.CSVRecord.get(CSVRecord.java:99)\r\n\tat mockdata.MockData.main(MockData.java:33)\r\nJava Result: 1\r\n\r\nI&#39;m using Apache Commons CSV library 1.1. Tried googling the error message and the only thing I get is the code listing on sites like grepcode.\r\n\r\nHere&#39;s my code:\r\n\r\n\r\n    package mockdata;\r\n\r\n    import java.io.FileInputStream;\r\n    import java.io.FileNotFoundException;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    import java.io.Reader;\r\n    import org.apache.commons.csv.CSVFormat;\r\n    import org.apache.commons.csv.CSVRecord;\r\n\r\n    public class MockData\r\n    {\r\n\r\n        /**\r\n         * @param args the command line arguments\r\n         */\r\n        public static void main(String[] args) throws FileNotFoundException, IOException\r\n        {\r\n            Reader in = new InputStreamReader(MockData.class.getClassLoader()\r\n                                    .getResourceAsStream(&quot;MOCK_DATA.csv&quot;), &quot;UTF-8&quot;);\r\n            Iterable&lt;CSVRecord&gt; records = CSVFormat.EXCEL.parse(in);\r\n            for (CSVRecord record : records) \r\n            {\r\n                String lastName = record.get(&quot;last_name&quot;);\r\n                String firstName = record.get(&quot;first_name&quot;);\r\n\r\n                System.out.println(&quot;firstName: &quot; + firstName + &quot; lastName: &quot; + lastName);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\nThe contents of CSV:\r\n\r\n    first_name,last_name,address1,city,state,zip,country,phone,email\r\n    Robin,Lee,668 Kinsman Road,Hagerstown,TX,94913,United States,5-(078)623-0713,rlee0@e-recht24.de\r\n    Bobby,Moreno,68 Dorton Avenue,Reno,AZ,79934,United States,5-(080)410-6743,bmoreno1@ihg.com\r\n    Eugene,Alexander,3 Bunker Hill Court,Newark,MS,30066,United States,5-(822)147-6867,ealexander2@gmpg.org\r\n    Katherine,Crawford,3557 Caliangt Avenue,New Orleans,OR,23289,United States,2-(686)178-7222,kcrawford3@symantec.com\r\n\r\nIt&#39;s located in my src folder.","title":"No header mapping was specified, the record values can&#39;t be accessed by name (Apache Commons CSV)","body":"<p>I got this error message happening when I'm trying to read a csv:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.IllegalStateException: No header mapping was specified, the record values can't be accessed by name\nat org.apache.commons.csv.CSVRecord.get(CSVRecord.java:99)\nat mockdata.MockData.main(MockData.java:33)\n</code></pre>\n\n<p>Java Result: 1</p>\n\n<p>I'm using Apache Commons CSV library 1.1. Tried googling the error message and the only thing I get is the code listing on sites like grepcode.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>package mockdata;\n\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.Reader;\nimport org.apache.commons.csv.CSVFormat;\nimport org.apache.commons.csv.CSVRecord;\n\npublic class MockData\n{\n\n    /**\n     * @param args the command line arguments\n     */\n    public static void main(String[] args) throws FileNotFoundException, IOException\n    {\n        Reader in = new InputStreamReader(MockData.class.getClassLoader()\n                                .getResourceAsStream(\"MOCK_DATA.csv\"), \"UTF-8\");\n        Iterable&lt;CSVRecord&gt; records = CSVFormat.EXCEL.parse(in);\n        for (CSVRecord record : records) \n        {\n            String lastName = record.get(\"last_name\");\n            String firstName = record.get(\"first_name\");\n\n            System.out.println(\"firstName: \" + firstName + \" lastName: \" + lastName);\n        }\n    }\n\n}\n</code></pre>\n\n<p>The contents of CSV:</p>\n\n<pre><code>first_name,last_name,address1,city,state,zip,country,phone,email\nRobin,Lee,668 Kinsman Road,Hagerstown,TX,94913,United States,5-(078)623-0713,rlee0@e-recht24.de\nBobby,Moreno,68 Dorton Avenue,Reno,AZ,79934,United States,5-(080)410-6743,bmoreno1@ihg.com\nEugene,Alexander,3 Bunker Hill Court,Newark,MS,30066,United States,5-(822)147-6867,ealexander2@gmpg.org\nKatherine,Crawford,3557 Caliangt Avenue,New Orleans,OR,23289,United States,2-(686)178-7222,kcrawford3@symantec.com\n</code></pre>\n\n<p>It's located in my src folder.</p>\n"},{"tags":["javascript","java","html","servlets"],"comments":[{"owner":{"account_id":1229621,"reputation":795,"user_id":1194481,"accept_rate":57,"display_name":"Shivam Aggarwal"},"score":0,"creation_date":1495197435,"post_id":44055712,"comment_id":75164468,"body_markdown":"What errors do you face?In browser or server console!","body":"What errors do you face?In browser or server console!"}],"answers":[{"tags":[],"owner":{"account_id":1957068,"reputation":22025,"user_id":1759845,"accept_rate":65,"display_name":"BackSlash"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1495133540,"creation_date":1495133540,"answer_id":44055747,"question_id":44055712,"body_markdown":"`response.sendRedirect` writes the redirect header to the output stream. Headers must be sent before any output, this is why your code doesn&#39;t work.\r\n\r\nTry swapping the two statements, redirecting first and then appending:\r\n\r\n\r\n    response.sendRedirect(&quot;testRedirect.html&quot;);\r\n    response.getWriter().append(&quot;&lt;script&gt;alert(\\&quot;I&#39;m here!\\&quot;)&lt;/script&gt;&quot;);","title":"Java Servlet, Send a redirect with html tags","body":"<p><code>response.sendRedirect</code> writes the redirect header to the output stream. Headers must be sent before any output, this is why your code doesn't work.</p>\n\n<p>Try swapping the two statements, redirecting first and then appending:</p>\n\n<pre><code>response.sendRedirect(\"testRedirect.html\");\nresponse.getWriter().append(\"&lt;script&gt;alert(\\\"I'm here!\\\")&lt;/script&gt;\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1495136135,"creation_date":1495136135,"answer_id":44056435,"question_id":44055712,"body_markdown":"You cannot send the content of the second page inside the redirection response. There are actually two requests.\r\n\r\nThe first request is handled by your servlet by sending the redirect. There should nothing else in this response.\r\n\r\nThe browser receives the redirect and does a second request to &quot;testRedirect.html&quot;. If you want to include the script tag in the second response the right place to do it is the servlet or JSP which handles this second request. ","title":"Java Servlet, Send a redirect with html tags","body":"<p>You cannot send the content of the second page inside the redirection response. There are actually two requests.</p>\n\n<p>The first request is handled by your servlet by sending the redirect. There should nothing else in this response.</p>\n\n<p>The browser receives the redirect and does a second request to \"testRedirect.html\". If you want to include the script tag in the second response the right place to do it is the servlet or JSP which handles this second request. </p>\n"},{"tags":[],"owner":{"account_id":10929251,"reputation":35,"user_id":8032988,"display_name":"Davide"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1495321340,"creation_date":1495321340,"answer_id":44091585,"question_id":44055712,"body_markdown":"Thank for your answers I solved with this code:\r\n\r\n\r\n\tprotected void doGet(HttpServletRequest request, HttpServletResponse response)\r\n\t\t\tthrows ServletException, IOException {\r\n\t\tSystem.out.println(&quot;received a get message&quot;);\r\n\t\tPrintWriter out = response.getWriter();\r\n\t\tout.println(&quot;&lt;script&gt;alert(\\&quot;I&#39;m here\\&quot;);&lt;/script&gt;&quot;);\r\n\t\trequest.getRequestDispatcher(&quot;testRedirect.html&quot;).include(request, response);\r\n\t\tout.close();\r\n\t}","title":"Java Servlet, Send a redirect with html tags","body":"<p>Thank for your answers I solved with this code:</p>\n\n<pre><code>protected void doGet(HttpServletRequest request, HttpServletResponse response)\n        throws ServletException, IOException {\n    System.out.println(\"received a get message\");\n    PrintWriter out = response.getWriter();\n    out.println(\"&lt;script&gt;alert(\\\"I'm here\\\");&lt;/script&gt;\");\n    request.getRequestDispatcher(\"testRedirect.html\").include(request, response);\n    out.close();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11896372,"reputation":182,"user_id":8705653,"display_name":"Fakipo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662755447,"creation_date":1662755447,"answer_id":73667230,"question_id":44055712,"body_markdown":"You can send the user to the desired page by using javascript instead.\r\n\r\n```\r\nout.println(&quot;&lt;script&gt; alert(\\&quot;I&#39;m here\\&quot;); window.location.replace(\\&quot;testRedirect.html\\&quot;); &lt;/script&gt;&quot;);\r\n```","title":"Java Servlet, Send a redirect with html tags","body":"<p>You can send the user to the desired page by using javascript instead.</p>\n<pre><code>out.println(&quot;&lt;script&gt; alert(\\&quot;I'm here\\&quot;); window.location.replace(\\&quot;testRedirect.html\\&quot;); &lt;/script&gt;&quot;);\n</code></pre>\n"}],"owner":{"account_id":10929251,"reputation":35,"user_id":8032988,"display_name":"Davide"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2085,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":44091585,"answer_count":4,"score":0,"last_activity_date":1662755447,"creation_date":1495133408,"question_id":44055712,"body_markdown":"I&#39;m looking for a way to send a redirection with my servlet from my first page to a second page adding into the second page a script tag made inside this servlet.\r\n\r\nFor example:\r\n \r\n\r\n\tprotected void doGet(HttpServletRequest request, HttpServletResponse response)\r\n\t\t\tthrows ServletException, IOException {\r\n\t\tSystem.out.println(&quot;Received a get request&quot;);\r\n\t\tresponse.getWriter().append(&quot;&lt;script&gt;alert(\\&quot;I&#39;m here!\\&quot;)&lt;/script&gt;&quot;);\r\n\t\tresponse.sendRedirect(&quot;testRedirect.html&quot;);\r\n\t}\r\n\r\nThis code doesn&#39;t work. How can I fix it?\r\nThanks!","title":"Java Servlet, Send a redirect with html tags","body":"<p>I'm looking for a way to send a redirection with my servlet from my first page to a second page adding into the second page a script tag made inside this servlet.</p>\n\n<p>For example:</p>\n\n<pre><code>protected void doGet(HttpServletRequest request, HttpServletResponse response)\n        throws ServletException, IOException {\n    System.out.println(\"Received a get request\");\n    response.getWriter().append(\"&lt;script&gt;alert(\\\"I'm here!\\\")&lt;/script&gt;\");\n    response.sendRedirect(\"testRedirect.html\");\n}\n</code></pre>\n\n<p>This code doesn't work. How can I fix it?\nThanks!</p>\n"},{"tags":["java","android","codec"],"owner":{"account_id":18793254,"reputation":159,"user_id":13705270,"display_name":"Jericho"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":421,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1662755183,"creation_date":1636319460,"question_id":69876559,"body_markdown":"I am quite new to Android Custom Rom development. I am wondering about checking what seems to be the issue on the codec itself. I have the debug log and a copy of the app itself, however there&#39;s no way for me to like change an app source code manually when it&#39;s installed already. \r\n\r\nI am currently on an Android 12 GSI which I am trying to modify some files and make it work on another device. \r\n\r\nHere&#39;s the debug log:\r\n\r\n    10-24 03:57:39.788 24987 24987 D RecordingService: onStartCommand com.android.systemui.screenrecord.START\r\n    10-24 03:57:39.788 24987 24987 D RecordingService: recording with audio sourceNONE\r\n    10-24 03:57:39.790 24987 24987 D ScreenMediaRecorder: start recording\r\n    10-24 03:57:39.792 1479 1508 I InputManager-JNI: Setting show touches feature to disabled.\r\n    10-24 03:57:39.795 1479 1601 I InputReader: Reconfiguring input devices, changes=SHOW_TOUCHES |\r\n    10-24 03:57:39.798 1035 1203 W StagefrightRecorder: stop while neither recording nor paused\r\n    10-24 03:57:39.811 24987 24987 W System.err: java.lang.IllegalArgumentException: unsupported size\r\n    10-24 03:57:39.811 24987 24987 W System.err: at android.media.MediaCodecInfo$VideoCapabilities.getSupportedFrameRatesFor(MediaCodecInfo.java:1676)\r\n    10-24 03:57:39.811 24987 24987 W System.err: at com.android.systemui.screenrecord.ScreenMediaRecorder.getSupportedSize(ScreenMediaRecorder.java:254)\r\n    10-24 03:57:39.811 24987 24987 W System.err: at com.android.systemui.screenrecord.ScreenMediaRecorder.prepare(ScreenMediaRecorder.java:130)\r\n    10-24 03:57:39.811 24987 24987 W System.err: at com.android.systemui.screenrecord.ScreenMediaRecorder.start(ScreenMediaRecorder.java:270)\r\n    10-24 03:57:39.811 24987 24987 W System.err: at com.android.systemui.screenrecord.RecordingService.startRecording(RecordingService.java:235)\r\n    10-24 03:57:39.811 24987 24987 W System.err: at com.android.systemui.screenrecord.RecordingService.onStartCommand(RecordingService.java:146)\r\n    10-24 03:57:39.812 24987 24987 W System.err: at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:4643)\r\n    10-24 03:57:39.812 24987 24987 W System.err: at android.app.ActivityThread.access$2000(ActivityThread.java:247)\r\n    10-24 03:57:39.812 24987 24987 W System.err: at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2095)\r\n    10-24 03:57:39.812 24987 24987 W System.err: at android.os.Handler.dispatchMessage(Handler.java:106)\r\n    10-24 03:57:39.812 24987 24987 W System.err: at android.os.Looper.loopOnce(Looper.java:201)\r\n    10-24 03:57:39.812 24987 24987 W System.err: at android.os.Looper.loop(Looper.java:288)\r\n    10-24 03:57:39.812 24987 24987 W System.err: at android.app.ActivityThread.main(ActivityThread.java:7842)\r\n    10-24 03:57:39.812 24987 24987 W System.err: at java.lang.reflect.Method.invoke(Native Method)\r\n    10-24 03:57:39.812 24987 24987 W System.err: at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\r\n\r\nTotally unrelated but I am looking into same problem with scrcpy which is a screen mirroring tool on multiplatform for pcs. Went onto the same recording issue until I change manually the encoder by defaulting it to use &#39;c2.android.avc.encoder&#39;. \r\n\r\nI have only a debug log but I don&#39;t have a way of tracing the said &#39;unsupported size&#39;. I went on the google source code and looked at it exactly here: \r\n\r\n    android.media.MediaCodecInfo$VideoCapabilities.getSupportedFrameRatesFor(MediaCodecInfo.java:1676)\r\n\r\nand found this Function:\r\n\r\n    private int[] getSupportedSize(final int screenWidth, final int screenHeight, int refreshRate) {\r\n            double maxScale = 0;\r\n            MediaCodecList codecList = new MediaCodecList(MediaCodecList.REGULAR_CODECS);\r\n            MediaCodecInfo.VideoCapabilities maxInfo = null;\r\n            for (MediaCodecInfo codec : codecList.getCodecInfos()) {\r\n                String videoType = MediaFormat.MIMETYPE_VIDEO_AVC;\r\n                String[] types = codec.getSupportedTypes();\r\n                for (String t : types) {\r\n                    if (!t.equalsIgnoreCase(videoType)) {\r\n                        continue;\r\n                    }\r\n                    MediaCodecInfo.CodecCapabilities capabilities =\r\n                            codec.getCapabilitiesForType(videoType);\r\n                    if (capabilities != null &amp;&amp; capabilities.getVideoCapabilities() != null) {\r\n                        MediaCodecInfo.VideoCapabilities vc = capabilities.getVideoCapabilities();\r\n                        int width = vc.getSupportedWidths().getUpper();\r\n                        int height = vc.getSupportedHeights().getUpper();\r\n                        int screenWidthAligned = screenWidth;\r\n                        if (screenWidthAligned % vc.getWidthAlignment() != 0) {\r\n                            screenWidthAligned -= (screenWidthAligned % vc.getWidthAlignment());\r\n                        }\r\n                        int screenHeightAligned = screenHeight;\r\n                        if (screenHeightAligned % vc.getHeightAlignment() != 0) {\r\n                            screenHeightAligned -= (screenHeightAligned % vc.getHeightAlignment());\r\n                        }\r\n                        if (width &gt;= screenWidthAligned &amp;&amp; height &gt;= screenHeightAligned\r\n                                &amp;&amp; vc.isSizeSupported(screenWidthAligned, screenHeightAligned)) {\r\n                            // Desired size is supported, now get the rate\r\n                            int maxRate = vc.getSupportedFrameRatesFor(screenWidthAligned,\r\n                                    screenHeightAligned).getUpper().intValue();\r\n                            if (maxRate &lt; refreshRate) {\r\n                                refreshRate = maxRate;\r\n                            }\r\n                            Log.d(TAG, &quot;Screen size supported at rate &quot; + refreshRate);\r\n                            return new int[]{screenWidthAligned, screenHeightAligned, refreshRate};\r\n                        }\r\n                        // Otherwise, continue searching\r\n                        double scale = Math.min(((double) width / screenWidth),\r\n                                ((double) height / screenHeight));\r\n                        if (scale &gt; maxScale) {\r\n                            maxScale = Math.min(1, scale);\r\n                            maxInfo = vc;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // Resize for max supported size\r\n            int scaledWidth = (int) (screenWidth * maxScale);\r\n            int scaledHeight = (int) (screenHeight * maxScale);\r\n            if (scaledWidth % maxInfo.getWidthAlignment() != 0) {\r\n                scaledWidth -= (scaledWidth % maxInfo.getWidthAlignment());\r\n            }\r\n            if (scaledHeight % maxInfo.getHeightAlignment() != 0) {\r\n                scaledHeight -= (scaledHeight % maxInfo.getHeightAlignment());\r\n            }\r\n            // Find max supported rate for size\r\n            int maxRate = maxInfo.getSupportedFrameRatesFor(scaledWidth, scaledHeight)\r\n                    .getUpper().intValue();\r\n            if (maxRate &lt; refreshRate) {\r\n                refreshRate = maxRate;\r\n            }\r\n            Log.d(TAG, &quot;Resized by &quot; + maxScale + &quot;: &quot; + scaledWidth + &quot;, &quot; + scaledHeight\r\n                    + &quot;, &quot; + refreshRate);\r\n            return new int[]{scaledWidth, scaledHeight, refreshRate};\r\n        }\r\n\r\n\r\nSo where can I start probing the error causing the unsupported size error?\r\n","title":"Screen recorder app is throwing error on Custom Rom","body":"<p>I am quite new to Android Custom Rom development. I am wondering about checking what seems to be the issue on the codec itself. I have the debug log and a copy of the app itself, however there's no way for me to like change an app source code manually when it's installed already.</p>\n<p>I am currently on an Android 12 GSI which I am trying to modify some files and make it work on another device.</p>\n<p>Here's the debug log:</p>\n<pre><code>10-24 03:57:39.788 24987 24987 D RecordingService: onStartCommand com.android.systemui.screenrecord.START\n10-24 03:57:39.788 24987 24987 D RecordingService: recording with audio sourceNONE\n10-24 03:57:39.790 24987 24987 D ScreenMediaRecorder: start recording\n10-24 03:57:39.792 1479 1508 I InputManager-JNI: Setting show touches feature to disabled.\n10-24 03:57:39.795 1479 1601 I InputReader: Reconfiguring input devices, changes=SHOW_TOUCHES |\n10-24 03:57:39.798 1035 1203 W StagefrightRecorder: stop while neither recording nor paused\n10-24 03:57:39.811 24987 24987 W System.err: java.lang.IllegalArgumentException: unsupported size\n10-24 03:57:39.811 24987 24987 W System.err: at android.media.MediaCodecInfo$VideoCapabilities.getSupportedFrameRatesFor(MediaCodecInfo.java:1676)\n10-24 03:57:39.811 24987 24987 W System.err: at com.android.systemui.screenrecord.ScreenMediaRecorder.getSupportedSize(ScreenMediaRecorder.java:254)\n10-24 03:57:39.811 24987 24987 W System.err: at com.android.systemui.screenrecord.ScreenMediaRecorder.prepare(ScreenMediaRecorder.java:130)\n10-24 03:57:39.811 24987 24987 W System.err: at com.android.systemui.screenrecord.ScreenMediaRecorder.start(ScreenMediaRecorder.java:270)\n10-24 03:57:39.811 24987 24987 W System.err: at com.android.systemui.screenrecord.RecordingService.startRecording(RecordingService.java:235)\n10-24 03:57:39.811 24987 24987 W System.err: at com.android.systemui.screenrecord.RecordingService.onStartCommand(RecordingService.java:146)\n10-24 03:57:39.812 24987 24987 W System.err: at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:4643)\n10-24 03:57:39.812 24987 24987 W System.err: at android.app.ActivityThread.access$2000(ActivityThread.java:247)\n10-24 03:57:39.812 24987 24987 W System.err: at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2095)\n10-24 03:57:39.812 24987 24987 W System.err: at android.os.Handler.dispatchMessage(Handler.java:106)\n10-24 03:57:39.812 24987 24987 W System.err: at android.os.Looper.loopOnce(Looper.java:201)\n10-24 03:57:39.812 24987 24987 W System.err: at android.os.Looper.loop(Looper.java:288)\n10-24 03:57:39.812 24987 24987 W System.err: at android.app.ActivityThread.main(ActivityThread.java:7842)\n10-24 03:57:39.812 24987 24987 W System.err: at java.lang.reflect.Method.invoke(Native Method)\n10-24 03:57:39.812 24987 24987 W System.err: at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\n</code></pre>\n<p>Totally unrelated but I am looking into same problem with scrcpy which is a screen mirroring tool on multiplatform for pcs. Went onto the same recording issue until I change manually the encoder by defaulting it to use 'c2.android.avc.encoder'.</p>\n<p>I have only a debug log but I don't have a way of tracing the said 'unsupported size'. I went on the google source code and looked at it exactly here:</p>\n<pre><code>android.media.MediaCodecInfo$VideoCapabilities.getSupportedFrameRatesFor(MediaCodecInfo.java:1676)\n</code></pre>\n<p>and found this Function:</p>\n<pre><code>private int[] getSupportedSize(final int screenWidth, final int screenHeight, int refreshRate) {\n        double maxScale = 0;\n        MediaCodecList codecList = new MediaCodecList(MediaCodecList.REGULAR_CODECS);\n        MediaCodecInfo.VideoCapabilities maxInfo = null;\n        for (MediaCodecInfo codec : codecList.getCodecInfos()) {\n            String videoType = MediaFormat.MIMETYPE_VIDEO_AVC;\n            String[] types = codec.getSupportedTypes();\n            for (String t : types) {\n                if (!t.equalsIgnoreCase(videoType)) {\n                    continue;\n                }\n                MediaCodecInfo.CodecCapabilities capabilities =\n                        codec.getCapabilitiesForType(videoType);\n                if (capabilities != null &amp;&amp; capabilities.getVideoCapabilities() != null) {\n                    MediaCodecInfo.VideoCapabilities vc = capabilities.getVideoCapabilities();\n                    int width = vc.getSupportedWidths().getUpper();\n                    int height = vc.getSupportedHeights().getUpper();\n                    int screenWidthAligned = screenWidth;\n                    if (screenWidthAligned % vc.getWidthAlignment() != 0) {\n                        screenWidthAligned -= (screenWidthAligned % vc.getWidthAlignment());\n                    }\n                    int screenHeightAligned = screenHeight;\n                    if (screenHeightAligned % vc.getHeightAlignment() != 0) {\n                        screenHeightAligned -= (screenHeightAligned % vc.getHeightAlignment());\n                    }\n                    if (width &gt;= screenWidthAligned &amp;&amp; height &gt;= screenHeightAligned\n                            &amp;&amp; vc.isSizeSupported(screenWidthAligned, screenHeightAligned)) {\n                        // Desired size is supported, now get the rate\n                        int maxRate = vc.getSupportedFrameRatesFor(screenWidthAligned,\n                                screenHeightAligned).getUpper().intValue();\n                        if (maxRate &lt; refreshRate) {\n                            refreshRate = maxRate;\n                        }\n                        Log.d(TAG, &quot;Screen size supported at rate &quot; + refreshRate);\n                        return new int[]{screenWidthAligned, screenHeightAligned, refreshRate};\n                    }\n                    // Otherwise, continue searching\n                    double scale = Math.min(((double) width / screenWidth),\n                            ((double) height / screenHeight));\n                    if (scale &gt; maxScale) {\n                        maxScale = Math.min(1, scale);\n                        maxInfo = vc;\n                    }\n                }\n            }\n        }\n        // Resize for max supported size\n        int scaledWidth = (int) (screenWidth * maxScale);\n        int scaledHeight = (int) (screenHeight * maxScale);\n        if (scaledWidth % maxInfo.getWidthAlignment() != 0) {\n            scaledWidth -= (scaledWidth % maxInfo.getWidthAlignment());\n        }\n        if (scaledHeight % maxInfo.getHeightAlignment() != 0) {\n            scaledHeight -= (scaledHeight % maxInfo.getHeightAlignment());\n        }\n        // Find max supported rate for size\n        int maxRate = maxInfo.getSupportedFrameRatesFor(scaledWidth, scaledHeight)\n                .getUpper().intValue();\n        if (maxRate &lt; refreshRate) {\n            refreshRate = maxRate;\n        }\n        Log.d(TAG, &quot;Resized by &quot; + maxScale + &quot;: &quot; + scaledWidth + &quot;, &quot; + scaledHeight\n                + &quot;, &quot; + refreshRate);\n        return new int[]{scaledWidth, scaledHeight, refreshRate};\n    }\n</code></pre>\n<p>So where can I start probing the error causing the unsupported size error?</p>\n"},{"tags":["java","mysql","eclipse"],"comments":[{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":1,"creation_date":1662769761,"post_id":73667172,"comment_id":130089940,"body_markdown":"Perhaps a driver released in 2022 requires a version of Java not already years past its end of life? Retry it with at least Java 8 or 11.","body":"Perhaps a driver released in 2022 requires a version of Java not already years past its end of life? Retry it with at least Java 8 or 11."},{"owner":{"account_id":263487,"reputation":764,"user_id":549088,"display_name":"Todd Grigsby"},"score":0,"creation_date":1677447240,"post_id":73667172,"comment_id":133334883,"body_markdown":"I&#39;m getting the same error.  I&#39;m deploying to a Tomcat9 server running on Ubuntu 22, using Java 11.  None of these is &quot;end of life&quot;.  @Shadow, did you ever get this figured out?","body":"I&#39;m getting the same error.  I&#39;m deploying to a Tomcat9 server running on Ubuntu 22, using Java 11.  None of these is &quot;end of life&quot;.  @Shadow, did you ever get this figured out?"}],"owner":{"account_id":26293779,"reputation":1,"user_id":19960387,"display_name":"nour tebbal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":197,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662755097,"creation_date":1662755047,"question_id":73667172,"body_markdown":"I tried to map the driver connector file from the reference library to the project file, but still gives the error.\r\nPlease could you help me connected to mysql database?\r\n\r\nMySQL Connector for Java: mysql-connector-java-8.0.30.jar (added to the Java Build Path correctly)\r\nJRE: jre-7u51-windows-i586.exe\r\n\r\nPS: the DB is running perfectly in the MySQL workbench.\r\n\r\nSC:\r\n\r\n    public static void connect() {\r\n    \ttry{\r\n    \t\tClass.forName(&quot;com.mysql.jdbc.Driver&quot;);\r\n    \t\tdbURL = &quot;jdbc:mysql://&quot;;\r\n    \t\tadresseServeur=&quot;localhost:3306/&quot;;\r\n    \t\tbddNAME=&quot;School_DB&quot;;\r\n    \t\tString username=&quot;root&quot;;\r\n    \t\tString pw=&quot;root&quot;;\r\n    \t\tcon = DriverManager.getConnection(dbURL + adresseServeur + bddNAME , username , pw);\r\n    \t}catch(Exception ex){\r\n    \t\tex.printStackTrace();\r\n    \t\tJOptionPane.showMessageDialog(null,&quot;ERROR 01&quot; + &quot;\\n&quot;, &quot;Erreur syst&#232;me!&quot;,JOptionPane.ERROR_MESSAGE);\r\n    \t}\r\n    }\r\n\r\nERROR MSG:\r\n\r\n    com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Could not create connection to database server.\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\r\n    \tat java.lang.reflect.Constructor.newInstance(Unknown Source)\r\n    \tat com.mysql.jdbc.Util.handleNewInstance(Util.java:377)\r\n    \tat com.mysql.jdbc.Util.getInstance(Util.java:360)\r\n    \tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)\r\n    \tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:935)\r\n    \tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:924)\r\n    \tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:870)\r\n    \tat com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2311)\r\n    \tat com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2064)\r\n    \tat com.mysql.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:790)\r\n    \tat com.mysql.jdbc.JDBC4Connection.&lt;init&gt;(JDBC4Connection.java:44)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\r\n    \tat java.lang.reflect.Constructor.newInstance(Unknown Source)\r\n    \tat com.mysql.jdbc.Util.handleNewInstance(Util.java:377)\r\n    \tat com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:395)\r\n    \tat com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:325)\r\n    \tat java.sql.DriverManager.getConnection(Unknown Source)\r\n    \tat java.sql.DriverManager.getConnection(Unknown Source)\r\n    \tat pack_School.School_Main.connect(School_Main.java:46)\r\n    \tat pack_School.School_Main.main(School_Main.java:23)\r\n    Caused by: java.lang.NullPointerException\r\n    \tat com.mysql.jdbc.ConnectionImpl.getServerCharset(ConnectionImpl.java:2983)\r\n    \tat com.mysql.jdbc.MysqlIO.sendConnectionAttributes(MysqlIO.java:1873)\r\n    \tat com.mysql.jdbc.MysqlIO.proceedHandshakeWithPluggableAuthentication(MysqlIO.java:1802)\r\n    \tat com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1206)\r\n    \tat com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2234)\r\n    \tat com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2265)\r\n    \t... 14 more\r\n\r\n\r\n","title":"Eclipse IDE - Unable to connect to mysql database","body":"<p>I tried to map the driver connector file from the reference library to the project file, but still gives the error.\nPlease could you help me connected to mysql database?</p>\n<p>MySQL Connector for Java: mysql-connector-java-8.0.30.jar (added to the Java Build Path correctly)\nJRE: jre-7u51-windows-i586.exe</p>\n<p>PS: the DB is running perfectly in the MySQL workbench.</p>\n<p>SC:</p>\n<pre><code>public static void connect() {\n    try{\n        Class.forName(&quot;com.mysql.jdbc.Driver&quot;);\n        dbURL = &quot;jdbc:mysql://&quot;;\n        adresseServeur=&quot;localhost:3306/&quot;;\n        bddNAME=&quot;School_DB&quot;;\n        String username=&quot;root&quot;;\n        String pw=&quot;root&quot;;\n        con = DriverManager.getConnection(dbURL + adresseServeur + bddNAME , username , pw);\n    }catch(Exception ex){\n        ex.printStackTrace();\n        JOptionPane.showMessageDialog(null,&quot;ERROR 01&quot; + &quot;\\n&quot;, &quot;Erreur système!&quot;,JOptionPane.ERROR_MESSAGE);\n    }\n}\n</code></pre>\n<p>ERROR MSG:</p>\n<pre><code>com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Could not create connection to database server.\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\n    at java.lang.reflect.Constructor.newInstance(Unknown Source)\n    at com.mysql.jdbc.Util.handleNewInstance(Util.java:377)\n    at com.mysql.jdbc.Util.getInstance(Util.java:360)\n    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)\n    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:935)\n    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:924)\n    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:870)\n    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2311)\n    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2064)\n    at com.mysql.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:790)\n    at com.mysql.jdbc.JDBC4Connection.&lt;init&gt;(JDBC4Connection.java:44)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\n    at java.lang.reflect.Constructor.newInstance(Unknown Source)\n    at com.mysql.jdbc.Util.handleNewInstance(Util.java:377)\n    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:395)\n    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:325)\n    at java.sql.DriverManager.getConnection(Unknown Source)\n    at java.sql.DriverManager.getConnection(Unknown Source)\n    at pack_School.School_Main.connect(School_Main.java:46)\n    at pack_School.School_Main.main(School_Main.java:23)\nCaused by: java.lang.NullPointerException\n    at com.mysql.jdbc.ConnectionImpl.getServerCharset(ConnectionImpl.java:2983)\n    at com.mysql.jdbc.MysqlIO.sendConnectionAttributes(MysqlIO.java:1873)\n    at com.mysql.jdbc.MysqlIO.proceedHandshakeWithPluggableAuthentication(MysqlIO.java:1802)\n    at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1206)\n    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2234)\n    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2265)\n    ... 14 more\n</code></pre>\n"},{"tags":["java","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1662740924,"post_id":73664958,"comment_id":130083911,"body_markdown":"Update your question to link to the _&quot;JPA/Hibernate course from UDemy&quot;_ that you are following. Also include version information for the software you are using. All of that information helps others diagnose and/or replicate your problem.","body":"Update your question to link to the <i>&quot;JPA/Hibernate course from UDemy&quot;</i> that you are following. Also include version information for the software you are using. All of that information helps others diagnose and/or replicate your problem."},{"owner":{"account_id":9235242,"reputation":1488,"user_id":6860078,"display_name":"tbatch"},"score":0,"creation_date":1662742432,"post_id":73664958,"comment_id":130084354,"body_markdown":"Most udemy courses have an option to ask the professor directly.  You would be able to share your code and discuss it.  Have you tried this?","body":"Most udemy courses have an option to ask the professor directly.  You would be able to share your code and discuss it.  Have you tried this?"},{"owner":{"account_id":25937120,"reputation":2268,"user_id":19657183,"display_name":"Mihe"},"score":1,"creation_date":1662743957,"post_id":73664958,"comment_id":130084773,"body_markdown":"`@Transient` is not a solution. At least a `@ManyToOne` is missing on field `author`.","body":"<code>@Transient</code> is not a solution. At least a <code>@ManyToOne</code> is missing on field <code>author</code>."},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1662845876,"post_id":73664958,"comment_id":130101564,"body_markdown":"Still no version information for all that software? It _is_ relevant.","body":"Still no version information for all that software? It <i>is</i> relevant."}],"owner":{"account_id":15040369,"reputation":909,"user_id":10855224,"display_name":"Woodsman"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662754872,"creation_date":1662740319,"question_id":73664958,"body_markdown":"I&#39;m following a JPA/Hibernate course from UDemy (https://www.udemy.com/course/hibernate-and-spring-data-jpa-beginner-to-guru) and was asked to convert a FKEY long identifier into object it points to on the entity class. Things worked before doing this. Now I get that \r\n```\r\nCaused by: org.hibernate.MappingException: Could not determine type for: com.guru.sdjpajdbc.domain.Author, at table: book, for columns: [org.hibernate.mapping.Column(author)]\r\n```\r\nerror.\r\n\r\n\r\n```\r\npackage com.guru.sdjpajdbc.domain;\r\n\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.GenerationType;\r\nimport javax.persistence.Id;\r\n\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Builder;\r\nimport lombok.Data;\r\nimport lombok.EqualsAndHashCode;\r\nimport lombok.NoArgsConstructor;\r\n\r\n@Data\r\n@Entity\r\n@Builder\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@EqualsAndHashCode\r\npublic class Author {\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\r\n\t@EqualsAndHashCode.Exclude  String firstName;\r\n\r\n\t@EqualsAndHashCode.Exclude private String lastName;\r\n\r\n}\r\n```\r\n\r\n```\r\npackage com.guru.sdjpajdbc.domain;\r\n\r\n\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.GenerationType;\r\nimport javax.persistence.Id;\r\n\r\nimport org.springframework.data.annotation.Transient;\r\n\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Builder;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\n@Data\r\n@Entity\r\n@Builder\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class Book {\r\n\tpublic Book(String isbn, String publisher, String title) {\r\n\t\tsuper();\r\n\t\tthis.isbn = isbn;\r\n\t\tthis.publisher = publisher;\r\n\t\tthis.title = title;\r\n\t}\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\r\n\tprivate String isbn;\r\n\r\n\tprivate String publisher;\r\n\r\n\tprivate String title;\r\n\r\n\t@Transient\r\n\tprivate Author author;\r\n\r\n}\r\n```\r\n\r\nV1__init_database.sql\r\n```\r\ndrop table if exists book cascade;\r\ndrop table if exists author;\r\n\r\ncreate table book (id        bigint not null auto_increment primary key,isbn      varchar(255),publisher varchar(255),title     varchar(255),author_id BIGINT) engine = InnoDB;\r\n\r\ncreate table author\r\n(\r\n    id         bigint not null auto_increment primary key,\r\n    first_name varchar(255),\r\n    last_name  varchar(255)\r\n) engine = InnoDB;\r\n\r\nalter table book\r\n    add constraint book_author_fk foreign key (author_id) references author (id);\r\n\r\ninsert into author (first_name, last_name) values (&#39;Craig&#39;, &#39;Walls&#39;);\r\n\r\ninsert into book (isbn, publisher, title, author_id) values (&#39;978-1617294945&#39;, &#39;Simon &amp; Schuster&#39;,\r\n       &#39;Spring in Action, 5th Edition&#39;,(select id from author where first_name = &#39;Craig&#39; and last_name = &#39;Walls&#39;) );\r\n\r\ninsert into book (isbn, publisher, title, author_id) values (&#39;978-1617292545&#39;, &#39;Simon &amp; Schuster&#39;,\r\n    &#39;Spring Boot in Action, 1st Edition&#39;,(select id from author where first_name = &#39;Craig&#39; and last_name = &#39;Walls&#39;) );\r\n\r\ninsert into book (isbn, publisher, title, author_id) values (&#39;978-1617297571&#39;, &#39;Simon &amp; Schuster&#39;,\r\n    &#39;Spring in Action, 6th Edition&#39;,(select id from author where first_name = &#39;Craig&#39; and last_name = &#39;Walls&#39;) );\r\n\r\ninsert into author (first_name, last_name) values (&#39;Eric&#39;, &#39;Evans&#39;);\r\n\r\ninsert into book (isbn, publisher, title, author_id) values (&#39;978-0321125217&#39;, &#39;Addison Wesley&#39;,\r\n    &#39;Domain-Driven Design&#39;,(select id from author where first_name = &#39;Eric&#39; and last_name = &#39;Evans&#39;) );\r\n\r\ninsert into author (first_name, last_name) values (&#39;Robert&#39;, &#39;Martin&#39;);\r\n\r\ninsert into book (isbn, publisher, title, author_id) values (&#39;978-0134494166&#39;, &#39;Addison Wesley&#39;,\r\n    &#39;Clean Code&#39;,(select id from author where first_name = &#39;Robert&#39; and last_name = &#39;Martin&#39;) );\r\n```\r\n\r\nThe instructor ran into this error but fixed it solely by adding the @Transient annotation. For some reason, it works for him, but not for me.\r\n\r\n\r\n\r\n\r\n","title":"Could not determine type for entity in JPA","body":"<p>I'm following a JPA/Hibernate course from UDemy (<a href=\"https://www.udemy.com/course/hibernate-and-spring-data-jpa-beginner-to-guru\" rel=\"nofollow noreferrer\">https://www.udemy.com/course/hibernate-and-spring-data-jpa-beginner-to-guru</a>) and was asked to convert a FKEY long identifier into object it points to on the entity class. Things worked before doing this. Now I get that</p>\n<pre><code>Caused by: org.hibernate.MappingException: Could not determine type for: com.guru.sdjpajdbc.domain.Author, at table: book, for columns: [org.hibernate.mapping.Column(author)]\n</code></pre>\n<p>error.</p>\n<pre><code>package com.guru.sdjpajdbc.domain;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\nimport lombok.NoArgsConstructor;\n\n@Data\n@Entity\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@EqualsAndHashCode\npublic class Author {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @EqualsAndHashCode.Exclude  String firstName;\n\n    @EqualsAndHashCode.Exclude private String lastName;\n\n}\n</code></pre>\n<pre><code>package com.guru.sdjpajdbc.domain;\n\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\n\nimport org.springframework.data.annotation.Transient;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Data\n@Entity\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Book {\n    public Book(String isbn, String publisher, String title) {\n        super();\n        this.isbn = isbn;\n        this.publisher = publisher;\n        this.title = title;\n    }\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private String isbn;\n\n    private String publisher;\n\n    private String title;\n\n    @Transient\n    private Author author;\n\n}\n</code></pre>\n<p>V1__init_database.sql</p>\n<pre><code>drop table if exists book cascade;\ndrop table if exists author;\n\ncreate table book (id        bigint not null auto_increment primary key,isbn      varchar(255),publisher varchar(255),title     varchar(255),author_id BIGINT) engine = InnoDB;\n\ncreate table author\n(\n    id         bigint not null auto_increment primary key,\n    first_name varchar(255),\n    last_name  varchar(255)\n) engine = InnoDB;\n\nalter table book\n    add constraint book_author_fk foreign key (author_id) references author (id);\n\ninsert into author (first_name, last_name) values ('Craig', 'Walls');\n\ninsert into book (isbn, publisher, title, author_id) values ('978-1617294945', 'Simon &amp; Schuster',\n       'Spring in Action, 5th Edition',(select id from author where first_name = 'Craig' and last_name = 'Walls') );\n\ninsert into book (isbn, publisher, title, author_id) values ('978-1617292545', 'Simon &amp; Schuster',\n    'Spring Boot in Action, 1st Edition',(select id from author where first_name = 'Craig' and last_name = 'Walls') );\n\ninsert into book (isbn, publisher, title, author_id) values ('978-1617297571', 'Simon &amp; Schuster',\n    'Spring in Action, 6th Edition',(select id from author where first_name = 'Craig' and last_name = 'Walls') );\n\ninsert into author (first_name, last_name) values ('Eric', 'Evans');\n\ninsert into book (isbn, publisher, title, author_id) values ('978-0321125217', 'Addison Wesley',\n    'Domain-Driven Design',(select id from author where first_name = 'Eric' and last_name = 'Evans') );\n\ninsert into author (first_name, last_name) values ('Robert', 'Martin');\n\ninsert into book (isbn, publisher, title, author_id) values ('978-0134494166', 'Addison Wesley',\n    'Clean Code',(select id from author where first_name = 'Robert' and last_name = 'Martin') );\n</code></pre>\n<p>The instructor ran into this error but fixed it solely by adding the @Transient annotation. For some reason, it works for him, but not for me.</p>\n"},{"tags":["java","process"],"comments":[{"owner":{"account_id":898592,"reputation":8138,"user_id":935330,"accept_rate":62,"display_name":"danilo"},"score":0,"creation_date":1662669939,"post_id":73654774,"comment_id":130066017,"body_markdown":"@Jesse, Hello, I don&#39;t think so, it&#39;s strange, but the output is about the main process piped to input of child process.","body":"@Jesse, Hello, I don&#39;t think so, it&#39;s strange, but the output is about the main process piped to input of child process."},{"owner":{"account_id":14679090,"reputation":1359,"user_id":10601203,"display_name":"Jesse"},"score":0,"creation_date":1662669976,"post_id":73654774,"comment_id":130066029,"body_markdown":"Yeah that looks to be correct. I&#39;m more used to C# where it&#39;s the other way around.","body":"Yeah that looks to be correct. I&#39;m more used to C# where it&#39;s the other way around."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1662670137,"post_id":73654774,"comment_id":130066076,"body_markdown":"If you were issuing that command at the command line what exactly would it be?","body":"If you were issuing that command at the command line what exactly would it be?"},{"owner":{"account_id":898592,"reputation":8138,"user_id":935330,"accept_rate":62,"display_name":"danilo"},"score":0,"creation_date":1662670254,"post_id":73654774,"comment_id":130066100,"body_markdown":"Hi @g00se, I get two lines: `Timeout: 60.0 seconds ...\nListing queues for vhost / ...`","body":"Hi @g00se, I get two lines: <code>Timeout: 60.0 seconds ... Listing queues for vhost &#47; ...</code>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1662672765,"post_id":73654774,"comment_id":130066712,"body_markdown":"I don&#39;t know docker but I&#39;m thinking there must be a way of sending batch commands to it. It should be one command and then you get the results and it terminates","body":"I don&#39;t know docker but I&#39;m thinking there must be a way of sending batch commands to it. It should be one command and then you get the results and it terminates"},{"owner":{"account_id":898592,"reputation":8138,"user_id":935330,"accept_rate":62,"display_name":"danilo"},"score":0,"creation_date":1662687109,"post_id":73654774,"comment_id":130068882,"body_markdown":"thanks @g00se, executing: `docker exec rabbitmq rabbitmqctl list_queues` it worked","body":"thanks @g00se, executing: <code>docker exec rabbitmq rabbitmqctl list_queues</code> it worked"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1662709091,"post_id":73654774,"comment_id":130072784,"body_markdown":"Good. `Runtime.exec` has been superseded by `ProcessBuilder`. If you use that you&#39;ll get more control.","body":"Good. <code>Runtime.exec</code> has been superseded by <code>ProcessBuilder</code>. If you use that you&#39;ll get more control."},{"owner":{"account_id":898592,"reputation":8138,"user_id":935330,"accept_rate":62,"display_name":"danilo"},"score":0,"creation_date":1662753945,"post_id":73654774,"comment_id":130087321,"body_markdown":"@g00se, I have found the solution using ProcessBuilder, I&#39;ll add an answer, thanks very much!","body":"@g00se, I have found the solution using ProcessBuilder, I&#39;ll add an answer, thanks very much!"}],"answers":[{"tags":[],"owner":{"account_id":898592,"reputation":8138,"user_id":935330,"accept_rate":62,"display_name":"danilo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662754670,"creation_date":1662754670,"answer_id":73667117,"question_id":73654774,"body_markdown":"The problem was the lack of use of `-i` parameter:  \r\n```java\r\nProcess process = Runtime.getRuntime().exec(&quot;docker exec -i rabbitmq bash&quot;);\r\n```\r\nBut, using only Process class I had had problems, the interpreter didn&#39;t understand the end of output and the loop didn&#39;t stop:  \r\n```java\r\nwhile ((line = reader.readLine()) != null) {\r\n    System.out.println(line);\r\n}\r\n```\r\n\r\nBut using ProcessBuilder it worked:  \r\n```java\r\n\t@Test\r\n\tvoid test_process_builder() throws IOException {\r\n        ProcessBuilder builder = new ProcessBuilder(&quot;docker&quot;,&quot;exec&quot;,&quot;-i&quot;,&quot;rabbitmq3&quot;,&quot;bash&quot;);\r\n        Process process = builder.start();\r\n\r\n        OutputStream stdin = process.getOutputStream(); // &lt;- Eh?\r\n        InputStream stdout = process.getInputStream();\r\n        InputStream stderr = process.getErrorStream();\r\n\r\n        BufferedReader reader = new BufferedReader(new InputStreamReader(stdout));\r\n        BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(stdin));\r\n        BufferedReader error = new BufferedReader(new InputStreamReader(stderr));\r\n\r\n        writer.write(&quot;rabbitmqctl list_queues \\n&quot;);\r\n        writer.flush();\r\n        writer.close();\r\n\r\n        Scanner err = new Scanner(stderr);\r\n        while (err.hasNextLine()) {\r\n            System.out.println(err.nextLine());\r\n        }\r\n        \r\n        Scanner scanner = new Scanner(stdout);\r\n        while (scanner.hasNextLine()) {\r\n            System.out.println(scanner.nextLine());\r\n        }\r\n\t}\r\n```","title":"How to execute commands inside a shell using Process object in Java","body":"<p>The problem was the lack of use of <code>-i</code> parameter:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Process process = Runtime.getRuntime().exec(&quot;docker exec -i rabbitmq bash&quot;);\n</code></pre>\n<p>But, using only Process class I had had problems, the interpreter didn't understand the end of output and the loop didn't stop:</p>\n<pre class=\"lang-java prettyprint-override\"><code>while ((line = reader.readLine()) != null) {\n    System.out.println(line);\n}\n</code></pre>\n<p>But using ProcessBuilder it worked:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Test\n    void test_process_builder() throws IOException {\n        ProcessBuilder builder = new ProcessBuilder(&quot;docker&quot;,&quot;exec&quot;,&quot;-i&quot;,&quot;rabbitmq3&quot;,&quot;bash&quot;);\n        Process process = builder.start();\n\n        OutputStream stdin = process.getOutputStream(); // &lt;- Eh?\n        InputStream stdout = process.getInputStream();\n        InputStream stderr = process.getErrorStream();\n\n        BufferedReader reader = new BufferedReader(new InputStreamReader(stdout));\n        BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(stdin));\n        BufferedReader error = new BufferedReader(new InputStreamReader(stderr));\n\n        writer.write(&quot;rabbitmqctl list_queues \\n&quot;);\n        writer.flush();\n        writer.close();\n\n        Scanner err = new Scanner(stderr);\n        while (err.hasNextLine()) {\n            System.out.println(err.nextLine());\n        }\n        \n        Scanner scanner = new Scanner(stdout);\n        while (scanner.hasNextLine()) {\n            System.out.println(scanner.nextLine());\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":898592,"reputation":8138,"user_id":935330,"accept_rate":62,"display_name":"danilo"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1662754670,"creation_date":1662669260,"question_id":73654774,"body_markdown":"I executed a shell using:  \r\n```java\r\nProcess process = Runtime.getRuntime().exec(&quot;docker exec rabbitmq bash&quot;);\r\n```\r\nBut now, I want to execute another command inside the opened shell:  \r\n```java\r\nWriter w = new OutputStreamWriter(process.getOutputStream(), &quot;UTF-8&quot;);\r\nw.write(&quot;rabbitmqctl list_queues\\n&quot;);\r\nw.flush();\r\n```\r\nBut I can&#39;t get the output of `rabbitmqctl list_queues`\r\n```java\r\nBufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));\r\nString line;\r\nwhile ((line = reader.readLine()) != null) {\r\n    System.out.println(line);\r\n}\r\n```\r\nI don&#39;t get any errors, if I use a malformed command, it will issue an error message:  \r\n```java\r\nBufferedReader error = new BufferedReader(new InputStreamReader(process.getErrorStream()));\r\nString errorString = error.readLine();\r\nSystem.out.println(&quot;\\nError : &quot; + errorString);\r\n\r\nint exitCode = process.waitFor();\r\n```","title":"How to execute commands inside a shell using Process object in Java","body":"<p>I executed a shell using:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Process process = Runtime.getRuntime().exec(&quot;docker exec rabbitmq bash&quot;);\n</code></pre>\n<p>But now, I want to execute another command inside the opened shell:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Writer w = new OutputStreamWriter(process.getOutputStream(), &quot;UTF-8&quot;);\nw.write(&quot;rabbitmqctl list_queues\\n&quot;);\nw.flush();\n</code></pre>\n<p>But I can't get the output of <code>rabbitmqctl list_queues</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));\nString line;\nwhile ((line = reader.readLine()) != null) {\n    System.out.println(line);\n}\n</code></pre>\n<p>I don't get any errors, if I use a malformed command, it will issue an error message:</p>\n<pre class=\"lang-java prettyprint-override\"><code>BufferedReader error = new BufferedReader(new InputStreamReader(process.getErrorStream()));\nString errorString = error.readLine();\nSystem.out.println(&quot;\\nError : &quot; + errorString);\n\nint exitCode = process.waitFor();\n</code></pre>\n"},{"tags":["java","swing","tablemodel","defaulttablemodel","jopendocument"],"answers":[{"tags":[],"owner":{"account_id":9059972,"reputation":3080,"user_id":6746785,"display_name":"gthanop"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1617065135,"creation_date":1617065135,"answer_id":66863415,"question_id":66853811,"body_markdown":"When working with spread sheet documents, I always remember that you can scroll the GUI to infinity... Haha. Do you see where I am going with this? I mean that there must be a way of determining the size (in rows and columns) of the document, because we cannot store an infinitely large one, with no values. There is also no point in it, so we have to specify the size of it. To do this, call [`ensureColumnCount`][1] and/or [`ensureRowCount`][2] as appropriate, prior setting the values of the cell at row index 3, because there is simply no row allocated in the model of a file which contains only 1 row. Or, at least, that&#39;s the reason I can understand we get an `IndexOutOfBoundsException`.\r\n\r\nThe following code, demonstrates the problem and runs as expected:\r\n\r\n```\r\nimport javax.swing.table.DefaultTableModel;\r\nimport org.jopendocument.dom.spreadsheet.Sheet;\r\nimport org.jopendocument.dom.spreadsheet.SpreadSheet;\r\n\r\npublic class Main {\r\n    public static void main(final String[] args) {\r\n        final SpreadSheet spread = SpreadSheet.createEmpty(new DefaultTableModel());\r\n        final Sheet sheet = spread.getFirstSheet();\r\n        try {\r\n            sheet.setValueAt(&quot;Will fail&quot;, 4, 4);\r\n        }\r\n        catch (final RuntimeException x) {\r\n            System.out.println(x.toString() + &quot; thrown. Fixing...&quot;);\r\n            sheet.ensureColumnCount(5);\r\n            sheet.ensureRowCount(5);\r\n            sheet.setValueAt(&quot;Hello world&quot;, 4, 4); //Will not throw.\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n`Sheet` is a `Table&lt;SpreadSheet&gt;` so it provides you with those (required) methods.\r\n\r\n  [1]: http://www.jopendocument.org/docs/org/jopendocument/dom/spreadsheet/Table.html#ensureColumnCount(int)\r\n  [2]: http://www.jopendocument.org/docs/org/jopendocument/dom/spreadsheet/Table.html#ensureRowCount(int)\r\n","title":"How to add rows to TableModel with JopenDocument","body":"<p>When working with spread sheet documents, I always remember that you can scroll the GUI to infinity... Haha. Do you see where I am going with this? I mean that there must be a way of determining the size (in rows and columns) of the document, because we cannot store an infinitely large one, with no values. There is also no point in it, so we have to specify the size of it. To do this, call <a href=\"http://www.jopendocument.org/docs/org/jopendocument/dom/spreadsheet/Table.html#ensureColumnCount(int)\" rel=\"nofollow noreferrer\"><code>ensureColumnCount</code></a> and/or <a href=\"http://www.jopendocument.org/docs/org/jopendocument/dom/spreadsheet/Table.html#ensureRowCount(int)\" rel=\"nofollow noreferrer\"><code>ensureRowCount</code></a> as appropriate, prior setting the values of the cell at row index 3, because there is simply no row allocated in the model of a file which contains only 1 row. Or, at least, that's the reason I can understand we get an <code>IndexOutOfBoundsException</code>.</p>\n<p>The following code, demonstrates the problem and runs as expected:</p>\n<pre><code>import javax.swing.table.DefaultTableModel;\nimport org.jopendocument.dom.spreadsheet.Sheet;\nimport org.jopendocument.dom.spreadsheet.SpreadSheet;\n\npublic class Main {\n    public static void main(final String[] args) {\n        final SpreadSheet spread = SpreadSheet.createEmpty(new DefaultTableModel());\n        final Sheet sheet = spread.getFirstSheet();\n        try {\n            sheet.setValueAt(&quot;Will fail&quot;, 4, 4);\n        }\n        catch (final RuntimeException x) {\n            System.out.println(x.toString() + &quot; thrown. Fixing...&quot;);\n            sheet.ensureColumnCount(5);\n            sheet.ensureRowCount(5);\n            sheet.setValueAt(&quot;Hello world&quot;, 4, 4); //Will not throw.\n        }\n    }\n}\n</code></pre>\n<p><code>Sheet</code> is a <code>Table&lt;SpreadSheet&gt;</code> so it provides you with those (required) methods.</p>\n"},{"tags":[],"owner":{"account_id":26294128,"reputation":1,"user_id":19960676,"display_name":"Guraba"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662754241,"creation_date":1662754241,"answer_id":73667061,"question_id":66853811,"body_markdown":"There is a bug in the latest library version 1.3 as well. Try using version 1.2 of jOpenDocument library.\r\nMore details below:\r\nhttps://www.mail-archive.com/libreoffice-bugs@lists.freedesktop.org/msg755833.html\r\n","title":"How to add rows to TableModel with JopenDocument","body":"<p>There is a bug in the latest library version 1.3 as well. Try using version 1.2 of jOpenDocument library.\nMore details below:\n<a href=\"https://www.mail-archive.com/libreoffice-bugs@lists.freedesktop.org/msg755833.html\" rel=\"nofollow noreferrer\">https://www.mail-archive.com/libreoffice-bugs@lists.freedesktop.org/msg755833.html</a></p>\n"}],"owner":{"account_id":969541,"reputation":755,"user_id":992342,"accept_rate":38,"display_name":"Zakaria Marrah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":368,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":66863415,"answer_count":2,"score":1,"last_activity_date":1662754241,"creation_date":1617019184,"question_id":66853811,"body_markdown":"I am working on a java application that reads a file **template.ods**, and fills it in with an array of Objects using JopenDocument.\r\n\r\nBased on the [JopenDocument documentation][1], I should get the TableModel from the Sheet, and then use the method **setValueAt(value, rowIndex, columnIndex)** to modify it, but once I do that, an **IndexOutofBoundsException** is triggered, Here is my method: \r\n\r\nMain.class\r\n\r\n\r\n    public File generateODSFileWithTemplate(String fileName, Object[][] rows, File template) throws FileNotFoundException {\r\n    \r\n    final Sheet sheet = SpreadSheet.createFromFile(template).getSheet(0);\r\n    sheet.getSpreadSheet().getTableModel(&quot;data&quot;).setValueAt(&quot;Hello from Main&quot;, 3, 1);\r\n    File outFile = new File(fileName);\r\n    sheet.getSpreadSheet().saveAs(outFile);\r\n    \r\n     return outFile;\r\n    }\r\n\r\ntemplate.ods\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nIf I add a value in the first row using : \r\n\r\n    sheet.getSpreadSheet().getTableModel(&quot;data&quot;).setValueAt(&quot;Hello from Main&quot;, 0, 0);\r\n\r\nIt works, and the column value gets updated.\r\n\r\nI am wondering what I am doing wrong to get this exception ?\r\n\r\nIs there a way to pass the array direcly to the TableModel just like DefaultTableModel to insert the data.\r\n\r\nI am using OpenOffice to create the template.ods\r\n\r\n\r\n  [1]: http://www.jopendocument.org/start_spreadsheet_2.html\r\n  [2]: https://i.stack.imgur.com/n2a7y.png","title":"How to add rows to TableModel with JopenDocument","body":"<p>I am working on a java application that reads a file <strong>template.ods</strong>, and fills it in with an array of Objects using JopenDocument.</p>\n<p>Based on the <a href=\"http://www.jopendocument.org/start_spreadsheet_2.html\" rel=\"nofollow noreferrer\">JopenDocument documentation</a>, I should get the TableModel from the Sheet, and then use the method <strong>setValueAt(value, rowIndex, columnIndex)</strong> to modify it, but once I do that, an <strong>IndexOutofBoundsException</strong> is triggered, Here is my method:</p>\n<p>Main.class</p>\n<pre><code>public File generateODSFileWithTemplate(String fileName, Object[][] rows, File template) throws FileNotFoundException {\n\nfinal Sheet sheet = SpreadSheet.createFromFile(template).getSheet(0);\nsheet.getSpreadSheet().getTableModel(&quot;data&quot;).setValueAt(&quot;Hello from Main&quot;, 3, 1);\nFile outFile = new File(fileName);\nsheet.getSpreadSheet().saveAs(outFile);\n\n return outFile;\n}\n</code></pre>\n<p>template.ods</p>\n<p><a href=\"https://i.stack.imgur.com/n2a7y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/n2a7y.png\" alt=\"enter image description here\" /></a></p>\n<p>If I add a value in the first row using :</p>\n<pre><code>sheet.getSpreadSheet().getTableModel(&quot;data&quot;).setValueAt(&quot;Hello from Main&quot;, 0, 0);\n</code></pre>\n<p>It works, and the column value gets updated.</p>\n<p>I am wondering what I am doing wrong to get this exception ?</p>\n<p>Is there a way to pass the array direcly to the TableModel just like DefaultTableModel to insert the data.</p>\n<p>I am using OpenOffice to create the template.ods</p>\n"},{"tags":["javascript","java"],"comments":[{"owner":{"account_id":10528158,"reputation":334,"user_id":7758485,"display_name":"DiLDoST"},"score":0,"creation_date":1662773196,"post_id":73667043,"comment_id":130090327,"body_markdown":"Does this answer your question? [accessing Android API from browser](https://stackoverflow.com/questions/19614987/accessing-android-api-from-browser)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/19614987/accessing-android-api-from-browser\">accessing Android API from browser</a>"}],"owner":{"account_id":14483719,"reputation":11,"user_id":13053607,"display_name":"Marcos Palladino"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1662754120,"creation_date":1662754120,"question_id":73667043,"body_markdown":"I need to know if exist another way to interact with Java Forms Elements Without using Java Access Bridge.   Im going to explain...  I using a system builded in Java Forms, and I need to attach this process, like the chromeDrive do, and interact with elements like buttons, textbox, checkbox...  Im thinking about Java x javascript, but how I attach java process for manipulation in Javascript\r\n\r\nSomebody knows any solutions to this issue?","title":"How to Interact with Java forms elements without Java Access Bridge?","body":"<p>I need to know if exist another way to interact with Java Forms Elements Without using Java Access Bridge.   Im going to explain...  I using a system builded in Java Forms, and I need to attach this process, like the chromeDrive do, and interact with elements like buttons, textbox, checkbox...  Im thinking about Java x javascript, but how I attach java process for manipulation in Javascript</p>\n<p>Somebody knows any solutions to this issue?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1662696860,"post_id":73657024,"comment_id":130070166,"body_markdown":"type String has no method getname (nor getName)","body":"type String has no method getname (nor getName)"},{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":0,"creation_date":1662705214,"post_id":73657024,"comment_id":130071598,"body_markdown":"You code won&#39;t compile.  It&#39;s not returning a string.  If the method is supposed to return a string, then there&#39;s no reason for it to print the string.  Either it return the string, or print the string but with void return type.  I think using stream is an overkill for this.  Why not just use a scanner to read line by line?","body":"You code won&#39;t compile.  It&#39;s not returning a string.  If the method is supposed to return a string, then there&#39;s no reason for it to print the string.  Either it return the string, or print the string but with void return type.  I think using stream is an overkill for this.  Why not just use a scanner to read line by line?"}],"answers":[{"tags":[],"owner":{"account_id":22506547,"reputation":965,"user_id":16702058,"display_name":"Hi computer"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1662707502,"creation_date":1662696384,"answer_id":73657218,"question_id":73657024,"body_markdown":"I think there is a problem if you want to use lambda expression here:\r\n\r\nlambda expressions are functional programming, and functional programming requires immutability, that means there should **not be state related issue**, you can call the function and give it same parameters and the result always will be the same, but **in your case, there should be a state indicating whether you should print the line or not**.\r\n\r\ncan you try this solution? I write it in python, but mainly it is just about a variable `should_print` that located outside of the scope\r\n\r\n```\r\nshould_print = False\r\nresult = reader.lines()\r\nfor line in result:\r\n    if line == &quot;Room end&quot;:\r\n        break\r\n    if should_print:\r\n        print(line)\r\n    if line == &quot;Room 1&quot;:\r\n        should_print = True\r\n```\r\n\r\nkeep a boolean value outside of the iteration, and check/update the value in each iteration","title":"Returning Strings from a file between 2 specified strings in java","body":"<p>I think there is a problem if you want to use lambda expression here:</p>\n<p>lambda expressions are functional programming, and functional programming requires immutability, that means there should <strong>not be state related issue</strong>, you can call the function and give it same parameters and the result always will be the same, but <strong>in your case, there should be a state indicating whether you should print the line or not</strong>.</p>\n<p>can you try this solution? I write it in python, but mainly it is just about a variable <code>should_print</code> that located outside of the scope</p>\n<pre><code>should_print = False\nresult = reader.lines()\nfor line in result:\n    if line == &quot;Room end&quot;:\n        break\n    if should_print:\n        print(line)\n    if line == &quot;Room 1&quot;:\n        should_print = True\n</code></pre>\n<p>keep a boolean value outside of the iteration, and check/update the value in each iteration</p>\n"},{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662736375,"creation_date":1662736375,"answer_id":73664249,"question_id":73657024,"body_markdown":"    public static Map&lt;String, List&lt;String&gt;&gt; getRooms(String path) throws IOException {\r\n        Map&lt;String, List&lt;String&gt;&gt; result = new HashMap&lt;&gt;();\r\n        try (Scanner sc = new Scanner(new File(path))) {\r\n            sc.useDelimiter(&quot;(?=Room \\\\d+)|Room_end&quot;);\r\n            while (sc.hasNext()) {\r\n                Scanner lines = new Scanner(sc.next());\r\n                String room = lines.nextLine().trim();\r\n                List&lt;String&gt; roomFeatures = new ArrayList&lt;&gt;();\r\n                while (lines.hasNextLine()) {\r\n                    roomFeatures.add(lines.nextLine());\r\n                }\r\n                if (room.length() &gt; 0) {\r\n                    result.put(room, roomFeatures);\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\nis one way of doing it for your &#39;rooms file&#39; though it should really be made more OO by making a ```Room``` bean to hold the data. Output with your file: ```{Room 2=[Coffee, Iron ], Room 1=[Coffee, Iron, Microwave]}``` ","title":"Returning Strings from a file between 2 specified strings in java","body":"<pre><code>public static Map&lt;String, List&lt;String&gt;&gt; getRooms(String path) throws IOException {\n    Map&lt;String, List&lt;String&gt;&gt; result = new HashMap&lt;&gt;();\n    try (Scanner sc = new Scanner(new File(path))) {\n        sc.useDelimiter(&quot;(?=Room \\\\d+)|Room_end&quot;);\n        while (sc.hasNext()) {\n            Scanner lines = new Scanner(sc.next());\n            String room = lines.nextLine().trim();\n            List&lt;String&gt; roomFeatures = new ArrayList&lt;&gt;();\n            while (lines.hasNextLine()) {\n                roomFeatures.add(lines.nextLine());\n            }\n            if (room.length() &gt; 0) {\n                result.put(room, roomFeatures);\n            }\n        }\n    }\n    return result;\n}\n</code></pre>\n<p>is one way of doing it for your 'rooms file' though it should really be made more OO by making a <code>Room</code> bean to hold the data. Output with your file: <code>{Room 2=[Coffee, Iron ], Room 1=[Coffee, Iron, Microwave]}</code></p>\n"},{"tags":[],"owner":{"account_id":26286747,"reputation":11,"user_id":19954327,"display_name":"Marvel Charles"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662739611,"creation_date":1662737944,"answer_id":73664535,"question_id":73657024,"body_markdown":"Switched my code and used this:\r\n\r\n        private static String loadRoom(String fileName) {\r\n            BufferedReader reader = null;\r\n            StringBuilder stringBuilder = new StringBuilder();\r\n    \r\n            try {\r\n                reader = new BufferedReader(new FileReader(fileName));\r\n                String line = null; //we start with empty info\r\n                String ls = System.getProperty(&quot;line.separator&quot;); //make a new line\r\n                while ((line = reader.readLine()) != null) { //consider if the line is empty or not\r\n                    if (line.equals(&quot;Room 1&quot;)) { //condition start on the first line being &quot;Room 1&quot;\r\n                        line = reader.readLine(); // read the next line, &quot;Room 1&quot; not added to stringBuilder\r\n                        while (!line.equals(&quot;Room_end&quot;)) {    //check if line String is &quot;Room_end&quot;\r\n                            stringBuilder.append(line);//add line to stringBuilder\r\n                            stringBuilder.append(ls);//Change Line in stringBuilder\r\n                            line = reader.readLine();// read next line\r\n                        }\r\n                    }\r\n                    \r\n                }\r\n            stringBuilder.deleteCharAt(stringBuilder.length() - 1);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            } finally {\r\n                if (reader != null)\r\n                    try {\r\n                        reader.close();\r\n                    } catch (IOException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n            }\r\n    \r\n            return stringBuilder.toString();\r\n        }","title":"Returning Strings from a file between 2 specified strings in java","body":"<p>Switched my code and used this:</p>\n<pre><code>    private static String loadRoom(String fileName) {\n        BufferedReader reader = null;\n        StringBuilder stringBuilder = new StringBuilder();\n\n        try {\n            reader = new BufferedReader(new FileReader(fileName));\n            String line = null; //we start with empty info\n            String ls = System.getProperty(&quot;line.separator&quot;); //make a new line\n            while ((line = reader.readLine()) != null) { //consider if the line is empty or not\n                if (line.equals(&quot;Room 1&quot;)) { //condition start on the first line being &quot;Room 1&quot;\n                    line = reader.readLine(); // read the next line, &quot;Room 1&quot; not added to stringBuilder\n                    while (!line.equals(&quot;Room_end&quot;)) {    //check if line String is &quot;Room_end&quot;\n                        stringBuilder.append(line);//add line to stringBuilder\n                        stringBuilder.append(ls);//Change Line in stringBuilder\n                        line = reader.readLine();// read next line\n                    }\n                }\n                \n            }\n        stringBuilder.deleteCharAt(stringBuilder.length() - 1);\n        } catch (IOException e) {\n            e.printStackTrace();\n        } finally {\n            if (reader != null)\n                try {\n                    reader.close();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n        }\n\n        return stringBuilder.toString();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662752038,"creation_date":1662752038,"answer_id":73666766,"question_id":73657024,"body_markdown":"Here&#39;s a solution that uses a scanner and a flag.  You may choose to break the loop when it reads &quot;Room_end&quot;\r\n\r\n```\r\nimport java.util.Scanner;\r\nimport java.io.*;\r\npublic class Main{\r\n   private static String loadRoom(String fileName) throws IOException { \r\n \t\tScanner s = new Scanner(new File(fileName));\r\n\t\tStringBuilder sb = new StringBuilder();\r\n\t\tboolean print = false;\r\n\t\twhile(s.hasNextLine()){\r\n\t\t   String line = s.nextLine();\r\n\t\t   if      (line.equals(&quot;Room 1&quot;))   print = true;\r\n\t\t   else if (line.equals(&quot;Room_end&quot;)) print = false;\r\n\t\t   else if (print) sb.append(line).append(&quot;\\n&quot;);\r\n\t\t}\r\n\t\treturn sb.toString();\r\n   }\r\n\tpublic static void main(String[] args)  {\r\n\t   try {\r\n\t      String content = loadRoom(&quot;content.txt&quot;);\r\n\t      System.out.println(content);\r\n\t   }catch(IOException e){\r\n\t      System.out.println(e.getMessage());\r\n\t   }\r\n\t}\r\n}\r\n```","title":"Returning Strings from a file between 2 specified strings in java","body":"<p>Here's a solution that uses a scanner and a flag.  You may choose to break the loop when it reads &quot;Room_end&quot;</p>\n<pre><code>import java.util.Scanner;\nimport java.io.*;\npublic class Main{\n   private static String loadRoom(String fileName) throws IOException { \n        Scanner s = new Scanner(new File(fileName));\n        StringBuilder sb = new StringBuilder();\n        boolean print = false;\n        while(s.hasNextLine()){\n           String line = s.nextLine();\n           if      (line.equals(&quot;Room 1&quot;))   print = true;\n           else if (line.equals(&quot;Room_end&quot;)) print = false;\n           else if (print) sb.append(line).append(&quot;\\n&quot;);\n        }\n        return sb.toString();\n   }\n    public static void main(String[] args)  {\n       try {\n          String content = loadRoom(&quot;content.txt&quot;);\n          System.out.println(content);\n       }catch(IOException e){\n          System.out.println(e.getMessage());\n       }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":26286747,"reputation":11,"user_id":19954327,"display_name":"Marvel Charles"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73664535,"answer_count":4,"score":0,"last_activity_date":1662752038,"creation_date":1662694007,"question_id":73657024,"body_markdown":"I&#39;ve been searching the web and I can&#39;t seem to find a working solution.\r\nI have a file containing theses lines:\r\n\r\n    Room 1\r\n    Coffee\r\n    Iron\r\n    Microwave\r\n    Room_end\r\n    Room 2\r\n    Coffee\r\n    Iron \r\n    Room_end\r\n\r\nI want to print all Strings between Room 1 and Room_end. I want my code to start when it find Room 1, print line after Room 1 and stop when it get to the first Room_end it find.\r\n\r\n    private static String LoadRoom(String fileName) {\r\n            List&lt;String&gt; result = new ArrayList&lt;&gt;();\r\n            try (BufferedReader reader = new BufferedReader(new FileReader(fileName))) {\r\n                result = reader.lines()\r\n                        .dropWhile(line -&gt; !line.equals(&quot;Room 1&quot;))\r\n                        .skip(1)\r\n                        .takeWhile(line -&gt; !line.equals(&quot;Room_end&quot;))\r\n                        .collect(Collectors.toList());\r\n            } catch (IOException ie) {\r\n                System.out.println(&quot;Unable to create &quot; + fileName + &quot;: &quot; + ie.getMessage());\r\n                ie.printStackTrace();\r\n            }\r\n            for (int i = 0; i &lt; result.size(); i++) {\r\n                System.out.println(result.get(i).getname());//error on getname because it cant work with Strings\r\n            }\r\n        }\r\n    \r\n    \r\n    \r\n        class Model {\r\n    \r\n            private String name;\r\n    \r\n            public String getName() {\r\n                return name;\r\n            }\r\n    \r\n            public void setName(String name) {\r\n                this.name = name;\r\n            }\r\n        }\r\n\r\nI am able to get a method to print all Strings of the file but not specific range of Strings. I also tried to work with Stream. My code feel quite messy, but I&#39;ve been working on it for a while an it seems it only get messier.","title":"Returning Strings from a file between 2 specified strings in java","body":"<p>I've been searching the web and I can't seem to find a working solution.\nI have a file containing theses lines:</p>\n<pre><code>Room 1\nCoffee\nIron\nMicrowave\nRoom_end\nRoom 2\nCoffee\nIron \nRoom_end\n</code></pre>\n<p>I want to print all Strings between Room 1 and Room_end. I want my code to start when it find Room 1, print line after Room 1 and stop when it get to the first Room_end it find.</p>\n<pre><code>private static String LoadRoom(String fileName) {\n        List&lt;String&gt; result = new ArrayList&lt;&gt;();\n        try (BufferedReader reader = new BufferedReader(new FileReader(fileName))) {\n            result = reader.lines()\n                    .dropWhile(line -&gt; !line.equals(&quot;Room 1&quot;))\n                    .skip(1)\n                    .takeWhile(line -&gt; !line.equals(&quot;Room_end&quot;))\n                    .collect(Collectors.toList());\n        } catch (IOException ie) {\n            System.out.println(&quot;Unable to create &quot; + fileName + &quot;: &quot; + ie.getMessage());\n            ie.printStackTrace();\n        }\n        for (int i = 0; i &lt; result.size(); i++) {\n            System.out.println(result.get(i).getname());//error on getname because it cant work with Strings\n        }\n    }\n\n\n\n    class Model {\n\n        private String name;\n\n        public String getName() {\n            return name;\n        }\n\n        public void setName(String name) {\n            this.name = name;\n        }\n    }\n</code></pre>\n<p>I am able to get a method to print all Strings of the file but not specific range of Strings. I also tried to work with Stream. My code feel quite messy, but I've been working on it for a while an it seems it only get messier.</p>\n"},{"tags":["java","android","libgdx"],"answers":[{"tags":[],"owner":{"account_id":26293814,"reputation":1,"user_id":19960413,"display_name":"jjrpayne"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662752033,"creation_date":1662752033,"answer_id":73666763,"question_id":73276535,"body_markdown":"I had this problem. It seems like the LibGDX setup tool can&#39;t actually install the Android SDK and build tools so you&#39;ll have to do it in Android Studio.\r\n\r\nOpen the generated project in Android Studio, go into File&gt;Settings&gt;Appearance &amp; Behaviour&gt;Android SDK and install Android API 31 and version 31 of the build tools. After this you can re-sync the project and it should work.","title":"LibGDX setup installer throws Exception for Android Studio","body":"<p>I had this problem. It seems like the LibGDX setup tool can't actually install the Android SDK and build tools so you'll have to do it in Android Studio.</p>\n<p>Open the generated project in Android Studio, go into File&gt;Settings&gt;Appearance &amp; Behaviour&gt;Android SDK and install Android API 31 and version 31 of the build tools. After this you can re-sync the project and it should work.</p>\n"}],"owner":{"display_name":"user14599750"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":570,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662752033,"creation_date":1659954997,"question_id":73276535,"body_markdown":"I am trying to create a new LibGDX project with the setup GUI they provided but I am getting the following error:\r\n\r\n```\r\n\r\n&gt; Configure project :android\r\nThis version only understands SDK XML versions up to 2 but an SDK XML file of version 3 was encountered. This can happen if you use versions of Android Studio and the command-line tools that were released at different times.\r\nChecking the license for package Android SDK Build-Tools 31 in C:\\Users\\pc\\AppData\\Local\\Android\\Sdk\\licenses\r\nLicense for package Android SDK Build-Tools 31 accepted.\r\nPreparing &quot;Install Android SDK Build-Tools 31 (revision: 31.0.0)&quot;.\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nA problem occurred configuring project &#39;:android&#39;.\r\n&gt; Failed to notify project evaluation listener.\r\n   &gt; &#39;void org.apache.commons.compress.archivers.zip.ZipFile.&lt;init&gt;(java.nio.channels.SeekableByteChannel)&#39;\r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 8.0.\r\n```\r\nI have seen [this question](https://stackoverflow.com/questions/70340427/unable-to-find-method-void-org-apache-commons-compress-archivers-zip-zipfile) but it doesn&#39;t appear to help my case. I am only adding the Freetype extension and my supported platforms are Android, Desktop and iOS.\r\nNOTE: LibGDX also insists I use a different version of Android Studio as it might be to recent so it chose version 31 for the SDK.","title":"LibGDX setup installer throws Exception for Android Studio","body":"<p>I am trying to create a new LibGDX project with the setup GUI they provided but I am getting the following error:</p>\n<pre><code>\n&gt; Configure project :android\nThis version only understands SDK XML versions up to 2 but an SDK XML file of version 3 was encountered. This can happen if you use versions of Android Studio and the command-line tools that were released at different times.\nChecking the license for package Android SDK Build-Tools 31 in C:\\Users\\pc\\AppData\\Local\\Android\\Sdk\\licenses\nLicense for package Android SDK Build-Tools 31 accepted.\nPreparing &quot;Install Android SDK Build-Tools 31 (revision: 31.0.0)&quot;.\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nA problem occurred configuring project ':android'.\n&gt; Failed to notify project evaluation listener.\n   &gt; 'void org.apache.commons.compress.archivers.zip.ZipFile.&lt;init&gt;(java.nio.channels.SeekableByteChannel)'\n\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 8.0.\n</code></pre>\n<p>I have seen <a href=\"https://stackoverflow.com/questions/70340427/unable-to-find-method-void-org-apache-commons-compress-archivers-zip-zipfile\">this question</a> but it doesn't appear to help my case. I am only adding the Freetype extension and my supported platforms are Android, Desktop and iOS.\nNOTE: LibGDX also insists I use a different version of Android Studio as it might be to recent so it chose version 31 for the SDK.</p>\n"},{"tags":["java","jtable","bigdecimal"],"answers":[{"tags":[],"owner":{"account_id":25937120,"reputation":2268,"user_id":19657183,"display_name":"Mihe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662748454,"creation_date":1662748454,"answer_id":73666247,"question_id":73666147,"body_markdown":"First, you have declared variable `tWeights` inside the if-block, that is it&#39;s lifetime is limited to this block, you&#39;ll get a fresh `tWeights` in every iteration when mark equals &quot;T10&quot;.\r\n\r\nSecond, you use streams the wrong way and in this situation there&#39;s no advantage of using streams. Just sum it up iteratively:\r\n\r\n```\r\nprivate void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         \r\n    DefaultTableModel model1 = (DefaultTableModel) jTable1.getModel();\r\n    BigDecimal tWeight = BigDecimal.ZERO; // let&#39;s start with 0 total weight\r\n\r\n    for (int i = 0; i &lt; model1.getRowCount(); i++) {\r\n        String mark = (String) model1.getValueAt(i, 1);\r\n        if (mark.equals(&quot;T10&quot;)) {\r\n            BigDecimal weights = new BigDecimal((String) model1.getValueAt(i, 3));\r\n            tWeight = tWeight.add(weights); // add weight to tWeight and assign the result to tWeight\r\n            System.out.println(tWeight);\r\n        }\r\n    }\r\n}                                        \r\n```","title":"How to Use BigDecimal add method to get sum of jtable cell values?","body":"<p>First, you have declared variable <code>tWeights</code> inside the if-block, that is it's lifetime is limited to this block, you'll get a fresh <code>tWeights</code> in every iteration when mark equals &quot;T10&quot;.</p>\n<p>Second, you use streams the wrong way and in this situation there's no advantage of using streams. Just sum it up iteratively:</p>\n<pre><code>private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         \n    DefaultTableModel model1 = (DefaultTableModel) jTable1.getModel();\n    BigDecimal tWeight = BigDecimal.ZERO; // let's start with 0 total weight\n\n    for (int i = 0; i &lt; model1.getRowCount(); i++) {\n        String mark = (String) model1.getValueAt(i, 1);\n        if (mark.equals(&quot;T10&quot;)) {\n            BigDecimal weights = new BigDecimal((String) model1.getValueAt(i, 3));\n            tWeight = tWeight.add(weights); // add weight to tWeight and assign the result to tWeight\n            System.out.println(tWeight);\n        }\n    }\n}                                        \n</code></pre>\n"},{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662751859,"creation_date":1662751859,"answer_id":73666736,"question_id":73666147,"body_markdown":"Just another take on it. Maintains the `listWeight` as well:\r\n   \r\n    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {\r\n        DefaultTableModel model1 = (DefaultTableModel) jTable1.getModel();\r\n        BigDecimal weights;\r\n        BigDecimal tWeight = new BigDecimal(&quot;0.0&quot;);\r\n        List&lt;BigDecimal&gt; listWeight = new ArrayList&lt;&gt;(); \r\n        for (int i = 0; i &lt; model1.getRowCount(); i++) {\r\n            String mark = model1.getValueAt(i, 1).toString();\r\n            if (mark.equals(&quot;T10&quot;)) {\r\n                weights = new BigDecimal(model1.getValueAt(i, 3).toString());\r\n                listWeight.add(weights);\r\n                tWeight = tWeight.add(weights);\r\n                // System.out.println(&quot;Growing Sum -&gt; &quot; + tWeight);\r\n            }\r\n        }\r\n        \r\n        // Display in Console Window...\r\n        System.out.println(&quot;Total sum of weights based on Size &#39;T10&#39;:&quot;);\r\n        StringBuilder formula = new StringBuilder(&quot;&quot;);\r\n        for (BigDecimal bdec : listWeight) {\r\n            if (!formula.toString().isEmpty()) {\r\n                formula.append(&quot; + &quot;);\r\n            }\r\n            formula.append(bdec);\r\n        }\r\n        formula.append(&quot; = &quot;).append(tWeight);\r\n        System.out.println(formula.toString());\r\n    }","title":"How to Use BigDecimal add method to get sum of jtable cell values?","body":"<p>Just another take on it. Maintains the <code>listWeight</code> as well:</p>\n<pre><code>private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {\n    DefaultTableModel model1 = (DefaultTableModel) jTable1.getModel();\n    BigDecimal weights;\n    BigDecimal tWeight = new BigDecimal(&quot;0.0&quot;);\n    List&lt;BigDecimal&gt; listWeight = new ArrayList&lt;&gt;(); \n    for (int i = 0; i &lt; model1.getRowCount(); i++) {\n        String mark = model1.getValueAt(i, 1).toString();\n        if (mark.equals(&quot;T10&quot;)) {\n            weights = new BigDecimal(model1.getValueAt(i, 3).toString());\n            listWeight.add(weights);\n            tWeight = tWeight.add(weights);\n            // System.out.println(&quot;Growing Sum -&gt; &quot; + tWeight);\n        }\n    }\n    \n    // Display in Console Window...\n    System.out.println(&quot;Total sum of weights based on Size 'T10':&quot;);\n    StringBuilder formula = new StringBuilder(&quot;&quot;);\n    for (BigDecimal bdec : listWeight) {\n        if (!formula.toString().isEmpty()) {\n            formula.append(&quot; + &quot;);\n        }\n        formula.append(bdec);\n    }\n    formula.append(&quot; = &quot;).append(tWeight);\n    System.out.println(formula.toString());\n}\n</code></pre>\n"}],"owner":{"account_id":18379429,"reputation":35,"user_id":13387766,"display_name":"tharinduhd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":73666247,"answer_count":2,"score":-2,"last_activity_date":1662751859,"creation_date":1662747706,"question_id":73666147,"body_markdown":"I have some data in JTable. I attempted to get sum of third column cell values, which matches with first column cell values are equal. As example T10. I can get only the existing values of third column not sum . I followed several answers in SO like, \r\n\r\n[link ][1]\r\n\r\nHelp to solve this problem is highly appreciate.\r\n\r\n    public class App_UI extends javax.swing.JFrame {\r\n\r\n    public App_UI() {\r\n        initComponents();\r\n    }\r\n\r\n                      \r\n    private void initComponents() {\r\n        java.awt.GridBagConstraints gridBagConstraints;\r\n\r\n        jScrollPane1 = new javax.swing.JScrollPane();\r\n        jTable1 = new javax.swing.JTable();\r\n        jButton1 = new javax.swing.JButton();\r\n\r\n        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);\r\n        getContentPane().setLayout(new java.awt.GridBagLayout());\r\n\r\n        jTable1.setModel(new javax.swing.table.DefaultTableModel(\r\n            new Object [][] {\r\n                {&quot;01&quot;, &quot;T10&quot;, &quot;3000&quot;, &quot;0.25&quot;},\r\n                {&quot;02&quot;, &quot;T12&quot;, &quot;6000&quot;, &quot;0.75&quot;},\r\n                {&quot;03&quot;, &quot;T10&quot;, &quot;4500&quot;, &quot;0.50&quot;},\r\n                {&quot;04&quot;, &quot;T16&quot;, &quot;1500&quot;, &quot;0.30&quot;},\r\n                {&quot;05&quot;, &quot;T12&quot;, &quot;7500&quot;, &quot;0.85&quot;},\r\n                {&quot;06&quot;, &quot;T10&quot;, &quot;1500&quot;, &quot;0.13&quot;}\r\n            },\r\n            new String [] {\r\n                &quot;Bar Mark&quot;, &quot;Type &amp; Size&quot;, &quot;Length&quot;, &quot;Weight&quot;\r\n            }\r\n        ));\r\n        jScrollPane1.setViewportView(jTable1);\r\n\r\n        gridBagConstraints = new java.awt.GridBagConstraints();\r\n        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;\r\n        gridBagConstraints.weightx = 0.1;\r\n        gridBagConstraints.weighty = 0.1;\r\n        gridBagConstraints.insets = new java.awt.Insets(5, 5, 5, 5);\r\n        getContentPane().add(jScrollPane1, gridBagConstraints);\r\n\r\n        jButton1.setText(&quot;Print&quot;);\r\n        jButton1.addActionListener(new java.awt.event.ActionListener() {\r\n            public void actionPerformed(java.awt.event.ActionEvent evt) {\r\n                jButton1ActionPerformed(evt);\r\n            }\r\n        });\r\n        gridBagConstraints = new java.awt.GridBagConstraints();\r\n        gridBagConstraints.gridx = 0;\r\n        gridBagConstraints.gridy = 1;\r\n        gridBagConstraints.insets = new java.awt.Insets(5, 5, 5, 5);\r\n        getContentPane().add(jButton1, gridBagConstraints);\r\n\r\n        pack();\r\n    }                 \r\n\r\n    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         \r\n\r\n        DefaultTableModel model1 = (DefaultTableModel) jTable1.getModel();\r\n\r\n        for (int i = 0; i &lt; model1.getRowCount(); i++) {\r\n\r\n            String mark = (String) model1.getValueAt(i, 1);\r\n\r\n            if (mark.equals(&quot;T10&quot;)) {\r\n\r\n                BigDecimal weights = new BigDecimal((String) model1.getValueAt(i, 3));\r\n\r\n                List&lt;BigDecimal&gt; listWeight = Arrays.asList(weights);\r\n\r\n                BigDecimal tWeight = listWeight.stream().reduce(BigDecimal.ZERO, BigDecimal::add);\r\n\r\n                System.out.println(tWeight);\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }                                        \r\n\r\n    public static void main(String args[]) {\r\n\r\n        java.awt.EventQueue.invokeLater(new Runnable() {\r\n            public void run() {\r\n                new App_UI().setVisible(true);\r\n            }\r\n        });\r\n    }\r\n\r\n                  \r\n    private javax.swing.JButton jButton1;\r\n    private javax.swing.JScrollPane jScrollPane1;\r\n    private javax.swing.JTable jTable1;\r\n    }\r\n\r\n\r\nMy output is like below\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/41966808/sum-of-bigdecimal-list-using-streams-and-sum-method\r\n  [2]: https://i.stack.imgur.com/boZJv.jpg","title":"How to Use BigDecimal add method to get sum of jtable cell values?","body":"<p>I have some data in JTable. I attempted to get sum of third column cell values, which matches with first column cell values are equal. As example T10. I can get only the existing values of third column not sum . I followed several answers in SO like,</p>\n<p><a href=\"https://stackoverflow.com/questions/41966808/sum-of-bigdecimal-list-using-streams-and-sum-method\">link </a></p>\n<p>Help to solve this problem is highly appreciate.</p>\n<pre><code>public class App_UI extends javax.swing.JFrame {\n\npublic App_UI() {\n    initComponents();\n}\n\n                  \nprivate void initComponents() {\n    java.awt.GridBagConstraints gridBagConstraints;\n\n    jScrollPane1 = new javax.swing.JScrollPane();\n    jTable1 = new javax.swing.JTable();\n    jButton1 = new javax.swing.JButton();\n\n    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);\n    getContentPane().setLayout(new java.awt.GridBagLayout());\n\n    jTable1.setModel(new javax.swing.table.DefaultTableModel(\n        new Object [][] {\n            {&quot;01&quot;, &quot;T10&quot;, &quot;3000&quot;, &quot;0.25&quot;},\n            {&quot;02&quot;, &quot;T12&quot;, &quot;6000&quot;, &quot;0.75&quot;},\n            {&quot;03&quot;, &quot;T10&quot;, &quot;4500&quot;, &quot;0.50&quot;},\n            {&quot;04&quot;, &quot;T16&quot;, &quot;1500&quot;, &quot;0.30&quot;},\n            {&quot;05&quot;, &quot;T12&quot;, &quot;7500&quot;, &quot;0.85&quot;},\n            {&quot;06&quot;, &quot;T10&quot;, &quot;1500&quot;, &quot;0.13&quot;}\n        },\n        new String [] {\n            &quot;Bar Mark&quot;, &quot;Type &amp; Size&quot;, &quot;Length&quot;, &quot;Weight&quot;\n        }\n    ));\n    jScrollPane1.setViewportView(jTable1);\n\n    gridBagConstraints = new java.awt.GridBagConstraints();\n    gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;\n    gridBagConstraints.weightx = 0.1;\n    gridBagConstraints.weighty = 0.1;\n    gridBagConstraints.insets = new java.awt.Insets(5, 5, 5, 5);\n    getContentPane().add(jScrollPane1, gridBagConstraints);\n\n    jButton1.setText(&quot;Print&quot;);\n    jButton1.addActionListener(new java.awt.event.ActionListener() {\n        public void actionPerformed(java.awt.event.ActionEvent evt) {\n            jButton1ActionPerformed(evt);\n        }\n    });\n    gridBagConstraints = new java.awt.GridBagConstraints();\n    gridBagConstraints.gridx = 0;\n    gridBagConstraints.gridy = 1;\n    gridBagConstraints.insets = new java.awt.Insets(5, 5, 5, 5);\n    getContentPane().add(jButton1, gridBagConstraints);\n\n    pack();\n}                 \n\nprivate void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         \n\n    DefaultTableModel model1 = (DefaultTableModel) jTable1.getModel();\n\n    for (int i = 0; i &lt; model1.getRowCount(); i++) {\n\n        String mark = (String) model1.getValueAt(i, 1);\n\n        if (mark.equals(&quot;T10&quot;)) {\n\n            BigDecimal weights = new BigDecimal((String) model1.getValueAt(i, 3));\n\n            List&lt;BigDecimal&gt; listWeight = Arrays.asList(weights);\n\n            BigDecimal tWeight = listWeight.stream().reduce(BigDecimal.ZERO, BigDecimal::add);\n\n            System.out.println(tWeight);\n\n        }\n\n    }\n\n}                                        \n\npublic static void main(String args[]) {\n\n    java.awt.EventQueue.invokeLater(new Runnable() {\n        public void run() {\n            new App_UI().setVisible(true);\n        }\n    });\n}\n\n              \nprivate javax.swing.JButton jButton1;\nprivate javax.swing.JScrollPane jScrollPane1;\nprivate javax.swing.JTable jTable1;\n}\n</code></pre>\n<p>My output is like below\n<a href=\"https://i.stack.imgur.com/boZJv.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/boZJv.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","jar","auto-update","urlclassloader"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1662656341,"post_id":73652400,"comment_id":130062102,"body_markdown":"*By the way, is this java command universal? Will it work on all operating systems with java installed?* No, as Unix-based systems use &#39;:&#39; as the path separator, not &#39;;&#39;","body":"<i>By the way, is this java command universal? Will it work on all operating systems with java installed?</i> No, as Unix-based systems use &#39;:&#39; as the path separator, not &#39;;&#39;"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1662656732,"post_id":73652400,"comment_id":130062225,"body_markdown":"Get the latest version of that driver as that one has a vuln","body":"Get the latest version of that driver as that one has a vuln"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1662657456,"post_id":73652400,"comment_id":130062474,"body_markdown":"There should be no need for ```Class.forName```  with that type of driver if you use ```DriverManager```","body":"There should be no need for <code>Class.forName</code>  with that type of driver if you use <code>DriverManager</code>"},{"owner":{"account_id":13720833,"reputation":89,"user_id":9900755,"display_name":"Kyle"},"score":0,"creation_date":1662657839,"post_id":73652400,"comment_id":130062600,"body_markdown":"Correct, there is no need for Class.forName when I run the jar by itself with the classpath provided. But it doesn&#39;t work when loaded via the classloader. I updated to the newest driver, and I am using `connection = DriverManager.getConnection(db);` to get my connection, but it is still failing without that forName piece. I think its related to the classloader.","body":"Correct, there is no need for Class.forName when I run the jar by itself with the classpath provided. But it doesn&#39;t work when loaded via the classloader. I updated to the newest driver, and I am using <code>connection = DriverManager.getConnection(db);</code> to get my connection, but it is still failing without that forName piece. I think its related to the classloader."}],"answers":[{"tags":[],"owner":{"account_id":13720833,"reputation":89,"user_id":9900755,"display_name":"Kyle"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662751357,"creation_date":1662734066,"answer_id":73663774,"question_id":73652400,"body_markdown":"**EDIT**\r\nI figured out one of the answers to one of the questions below. Turns out, I didn&#39;t need to do any of the code below. My main method loads a login screen but after it&#39;s loaded it returns back to the AppLauncher code, thus closing the URLClassLoader! Of course, at that point any requested class will not be found as the loader has been closed! What an oof! Hopefully I will save someone a headache in the future...\r\n\r\n\r\n**Original**\r\n\r\nWell, after more time, effort, research, and effective use of Eclipse&#39;s debugging tool, I was able to figure out what I needed to do to resolve my issues.\r\n\r\nSo the first issue was my JDBC driver was never registered when passing the jars to the URLClassloader. This is the part I sorta don&#39;t understand, so advisement would be welcomed, but there is a static block in the JDBC class that registers the driver so it can be used by `DriverManager` see code below. Loading the class is what executes that static block, hence why calling `Class.forName` works. \r\n\r\n    static {\r\n        try {\r\n            DriverManager.registerDriver(new JDBC());\r\n        } catch (SQLException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\nWhat I don&#39;t understand, is how class loading works if jars are specified via the class path. The URLClassLoader doesn&#39;t load any of those classes until they are called, and I never directly work with the JDBC class, thus no suitable driver exception, but are all the classes specified via the classpath loaded initially? Seems that way for static blocks to execute.\r\n\r\nAnyhow, to resolve my other issue with some of my app&#39;s classes not being found I had to implement my own classloader. I get what I did and how it works well, but still don&#39;t understand *why* I had to do it. All of my jars were loaded to the original URLClassloader so if I could find them and the files within, why couldn&#39;t it do it? \r\n\r\nBasically, I had to override the `findClass` and `findResource` methods to return jarEntry information that I had to store. I hope this code helps someone!\r\n\r\n    public class SBURLClassLoader extends URLClassLoader {\r\n\r\n\t    private HashMap&lt;String, Storage&gt; map;\r\n\t\r\n\t    public SBURLClassLoader(URL[] urls) {\r\n\t\t    super(urls);\r\n\t\t    map = new HashMap&lt;&gt;();\r\n\t\t    try {\r\n\t\t\t    storeClasses(urls);\r\n\t\t    } catch (ClassNotFoundException e) {\r\n\t\t\t    e.printStackTrace();\r\n\t\t    }\r\n\t    }\r\n\r\n\t    private void storeClasses(URL[] urls) throws ClassNotFoundException {\r\n\t\t\r\n\t\t    for (URL u : urls) {\r\n\t\t\t    try {\r\n\t\t\t\t    JarFile jarFile = new JarFile(new File(u.getFile()));\r\n\t\t\t\t    Enumeration&lt;JarEntry&gt; e = jarFile.entries();\r\n\t\t\t\r\n\t\t\t\t    while (e.hasMoreElements()) {\r\n\t\t\t\t\t    JarEntry jar = e.nextElement();\r\n\t\t\t\t\t    String entryName = jar.getName();\r\n\t\t\t\t\t\r\n\t\t\t\t\t    if (jar.isDirectory()) continue;\r\n\t\t\t\t\t    if (!entryName.endsWith(&quot;.class&quot;)) {\r\n\t\t\t\t\t\t    //still need to store these non-class files as resources\r\n\t\t\t\t\t\t    //let code continue to store entry un-altered\r\n\t\t\t\t\t    } else {\r\n\t\t\t\t\t\t    entryName = entryName.replace(&quot;.class&quot;, &quot;&quot;);\r\n\t\t\t\t\t\t    entryName = entryName.replace(&quot;/&quot;, &quot;.&quot;);\r\n\t\t\t\t\t    }\r\n\t\t\t\t\t\r\n\t\t\t\t\t    map.put(entryName, new Storage(jarFile, jar));\r\n\t\t\t\t\t\r\n\t\t\t\t\t    System.out.println(entryName);\r\n\t\t\t\t    }\r\n\t\t\t    } catch (IOException e) {\r\n\t\t\t\t    e.printStackTrace();\r\n\t\t\t    }\r\n\t\t    }\r\n\t    }\r\n\t\r\n\t    @Override\r\n\t    protected Class&lt;?&gt; findClass(String name) throws ClassNotFoundException {\r\n\t\t    Class&lt;?&gt; c = null;\r\n\t\t    try {\r\n\t\t\t    c = super.findClass(name);\r\n\t\t    } catch (ClassNotFoundException e) {\r\n\t\t\t\r\n\t\t\t    Storage s = map.get(name);\r\n\t\t\t    try {\r\n\t\t\t\t    InputStream in = s.jf.getInputStream(s.je);\r\n\t\t\t\t    int len = in.available();\r\n\t\t\t\t    c = defineClass(name, in.readAllBytes(), 0, len);\r\n\t\t\t\t    resolveClass(c);\r\n\t\t\t    } catch (IOException e1) {\r\n\t\t\t\t    e1.printStackTrace();\r\n\t\t\t    }\r\n\t\t\t\r\n\t\t\t    if (c == null) throw e;\t\r\n\t\t    }\r\n\t\t    return c;\r\n\t    }\r\n\t\r\n\t    @Override\r\n\t    public URL findResource(String name) {\r\n\t\t    URL url = super.findResource(name);\r\n\t\t\r\n\t\t    if (url == null) {\r\n\t\t\t    Storage s = map.get(name);\r\n\t\t\t    if (s != null) {\r\n\t\t\t\t    try {\r\n\t\t\t\t\t    url = new URL(&quot;jar:&quot;+s.base.toString() + &quot;!/&quot; + name);\r\n\t\t\t\t    } catch (Exception e) {\r\n\t\t\t\t\t    e.printStackTrace();\r\n\t\t\t\t    }\r\n\t\t\t    }\r\n\t\t    }\r\n\t\t    return url; \r\n\t    }\r\n\t\r\n\t    private class Storage {\r\n\t\t\r\n\t\t    public JarFile jf;\r\n\t\t    public JarEntry je;\r\n\t\t    public URL base;\r\n\t\t\r\n\t\t    public Storage(JarFile jf, JarEntry je) {\r\n\t\t\t    this.jf = jf;\r\n\t\t\t    this.je = je;\r\n\t\t\t    try {\r\n\t\t\t\t    base = Path.of(jf.getName()).toUri().toURL();\r\n\t\t\t    } catch (MalformedURLException e) {\r\n\t\t\t\t    e.printStackTrace();\r\n\t\t\t    }\r\n\t\t    }\r\n\t    }\r\n    }\r\n","title":"How to use URLClassloader in an auto-update jar launcher?","body":"<p><strong>EDIT</strong>\nI figured out one of the answers to one of the questions below. Turns out, I didn't need to do any of the code below. My main method loads a login screen but after it's loaded it returns back to the AppLauncher code, thus closing the URLClassLoader! Of course, at that point any requested class will not be found as the loader has been closed! What an oof! Hopefully I will save someone a headache in the future...</p>\n<p><strong>Original</strong></p>\n<p>Well, after more time, effort, research, and effective use of Eclipse's debugging tool, I was able to figure out what I needed to do to resolve my issues.</p>\n<p>So the first issue was my JDBC driver was never registered when passing the jars to the URLClassloader. This is the part I sorta don't understand, so advisement would be welcomed, but there is a static block in the JDBC class that registers the driver so it can be used by <code>DriverManager</code> see code below. Loading the class is what executes that static block, hence why calling <code>Class.forName</code> works.</p>\n<pre><code>static {\n    try {\n        DriverManager.registerDriver(new JDBC());\n    } catch (SQLException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>What I don't understand, is how class loading works if jars are specified via the class path. The URLClassLoader doesn't load any of those classes until they are called, and I never directly work with the JDBC class, thus no suitable driver exception, but are all the classes specified via the classpath loaded initially? Seems that way for static blocks to execute.</p>\n<p>Anyhow, to resolve my other issue with some of my app's classes not being found I had to implement my own classloader. I get what I did and how it works well, but still don't understand <em>why</em> I had to do it. All of my jars were loaded to the original URLClassloader so if I could find them and the files within, why couldn't it do it?</p>\n<p>Basically, I had to override the <code>findClass</code> and <code>findResource</code> methods to return jarEntry information that I had to store. I hope this code helps someone!</p>\n<pre><code>public class SBURLClassLoader extends URLClassLoader {\n\n    private HashMap&lt;String, Storage&gt; map;\n\n    public SBURLClassLoader(URL[] urls) {\n        super(urls);\n        map = new HashMap&lt;&gt;();\n        try {\n            storeClasses(urls);\n        } catch (ClassNotFoundException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private void storeClasses(URL[] urls) throws ClassNotFoundException {\n    \n        for (URL u : urls) {\n            try {\n                JarFile jarFile = new JarFile(new File(u.getFile()));\n                Enumeration&lt;JarEntry&gt; e = jarFile.entries();\n        \n                while (e.hasMoreElements()) {\n                    JarEntry jar = e.nextElement();\n                    String entryName = jar.getName();\n                \n                    if (jar.isDirectory()) continue;\n                    if (!entryName.endsWith(&quot;.class&quot;)) {\n                        //still need to store these non-class files as resources\n                        //let code continue to store entry un-altered\n                    } else {\n                        entryName = entryName.replace(&quot;.class&quot;, &quot;&quot;);\n                        entryName = entryName.replace(&quot;/&quot;, &quot;.&quot;);\n                    }\n                \n                    map.put(entryName, new Storage(jarFile, jar));\n                \n                    System.out.println(entryName);\n                }\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n\n    @Override\n    protected Class&lt;?&gt; findClass(String name) throws ClassNotFoundException {\n        Class&lt;?&gt; c = null;\n        try {\n            c = super.findClass(name);\n        } catch (ClassNotFoundException e) {\n        \n            Storage s = map.get(name);\n            try {\n                InputStream in = s.jf.getInputStream(s.je);\n                int len = in.available();\n                c = defineClass(name, in.readAllBytes(), 0, len);\n                resolveClass(c);\n            } catch (IOException e1) {\n                e1.printStackTrace();\n            }\n        \n            if (c == null) throw e; \n        }\n        return c;\n    }\n\n    @Override\n    public URL findResource(String name) {\n        URL url = super.findResource(name);\n    \n        if (url == null) {\n            Storage s = map.get(name);\n            if (s != null) {\n                try {\n                    url = new URL(&quot;jar:&quot;+s.base.toString() + &quot;!/&quot; + name);\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        }\n        return url; \n    }\n\n    private class Storage {\n    \n        public JarFile jf;\n        public JarEntry je;\n        public URL base;\n    \n        public Storage(JarFile jf, JarEntry je) {\n            this.jf = jf;\n            this.je = je;\n            try {\n                base = Path.of(jf.getName()).toUri().toURL();\n            } catch (MalformedURLException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":13720833,"reputation":89,"user_id":9900755,"display_name":"Kyle"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73663774,"answer_count":1,"score":1,"last_activity_date":1662751357,"creation_date":1662654695,"question_id":73652400,"body_markdown":"I&#39;ve come across many posts about these two topics: Auto-Updating and URLClassloaders. I&#39;ll start with the auto updating goal. I found this post [here][1] that talks about a 2 jar system. One jar that launches the main app jar: From Stephen C:\r\n\r\n&gt; The launcher could be a Java application that creates a classloader for the new JAR, loads an entrypoint class and calls some method on it. If you do it this way, you have to watch for classloader storage leaks, but that&#39;s not difficult. (You just need to make sure that no objects with classes loaded from the JAR are reachable after you relaunch.)\r\n\r\nThis is the approach I&#39;m taking, but I&#39;m open to other ideas if they prove easier and/or more reliable. The Coordinator has posted some [pretty cool launcher code][2] to which I plan on incorporating some of this reload type code in my launcher, but first I need to get it to work.\r\n\r\nMy issue is that my main app jar has many other dependencies, and I cannot get some of those classes to load despite the fact that all the jars have been added to the URL&#39;s array. This brings up the second topic URLClassloader.\r\n\r\nSide Note for future readers: When passing a URL to the URLClassloader that is a directory, a helpful note that would have saved me (an embarrassingly large) amount of time is that the contents of the directory must be .class files! I was originally pointing to my dependent jar directory, no good.\r\n\r\nContext for the code below, my launcher jar resides in the same directory as my app jar, which is why I&#39;m using `user.dir`. I will probably change this, but for now the code works and gets far enough into my app&#39;s code to request a connection to a sqlite database before failing.\r\n\r\nLauncher:\r\n\r\n    public class Launcher {\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\ttry {\r\n\t\t\tString userdir = System.getProperty(&quot;user.dir&quot;);\r\n\t\t\tFile parentDir = new File(userdir);\r\n\t\t\tArrayList&lt;URL&gt; urls = getJarURLs(parentDir);\r\n\t\t\t\r\n\t\t\tURL[] jarURLs = new URL[urls.size()];\r\n\t\t\tint index = 0;\r\n\t\t\tfor (URL u : urls) {\r\n\t\t\t\tSystem.out.println(u.toString());\r\n\t\t\t\tjarURLs[index] = u;\r\n\t\t\t\tindex ++;\r\n\t\t\t}\r\n\r\n\t\t\tURLClassLoader urlCL = new URLClassLoader(jarURLs); \r\n\t\t\tClass&lt;?&gt; c = urlCL.loadClass(&quot;main.AppStart&quot;);\r\n\t\t\tObject [] args2 = new Object[] {new String[] {}};\r\n\t\t\tc.getMethod(&quot;main&quot;, String[].class).invoke(null, args2);\r\n\t\t\turlCL.close();\r\n\t\t} catch (Exception e1) {\r\n\t\t\te1.printStackTrace();\r\n\t\t} \r\n\t}\r\n\t\r\n\tpublic static ArrayList&lt;URL&gt; getJarURLs(File parentDir) throws MalformedURLException {\r\n\t\tArrayList&lt;URL&gt; list = new ArrayList&lt;&gt;();\r\n\t\tfor (File f : parentDir.listFiles()) {\r\n\t\t\tif (f.isDirectory()) {\r\n\t\t\t\tlist.addAll(getJarURLs(f));\r\n\t\t\t} else {\r\n\t\t\t\tString name = f.getName();\r\n\t\t\t\tif (name.endsWith(&quot;.jar&quot;)) {\r\n\t\t\t\t\tlist.add(f.toURI().toURL());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn list;\r\n\t}\r\n    }\r\n\r\nHere&#39;s an example of the URL output added to the array:\r\n\r\n    file:/C:/my/path/to/dependent/jars/sqlite-jdbc-3.32.3.2.jar\r\n    file:/C:/my/path/to/main/app.jar\r\n    file: ... [10 more]\r\n\r\nThe URLClassloader seems to work well enough to load my main method in app.jar. The main executes a some startup type stuff, before attempting to load a login screen. When the request is made to get the user info database, my message screen loads and displays (&lt;-this is important for later)\r\nthe stacktrace containing: \r\n\r\n    java.sql.SQLException: No suitable driver found for jdbc:sqlite:C:\\...\\users.db\r\n\r\n\r\nI understand that this is because that jar is not on the class path, but it&#39;s loaded via the class loader, so why can&#39;t it find the classes from the jar? From [this post][3] JamesB suggested adding `Class.forName(&quot;org.sqlite.JDBC&quot;);` before the connection request. I rebuilt the app jar with this line of code and it worked!\r\n\r\nThe weird thing that happened next, is that my message screen class can no longer be found even though earlier it loaded and displayed correctly. The message screen is a class inside my main app.jar and not in a dependent jar, which is why I&#39;m baffled. Am I going to have to add Class.forName before every instance of any of my classes? That seems rude..\r\n\r\nSo what could I be doing wrong with the class loader? Why does it load some classes and not others despite that fact that all the jars have been added to the URL array?\r\n\r\nSome other relative info: My app works perfectly as intended when launched from windows command line when the classpath is specified: `java -cp &quot;main-app.jar;my/dependent/jar/directory/*&quot; main.AppStart`. It&#39;s only when I try launching the app via this classloader that I have these issues.\r\n\r\nBy the way, is this java command universal? Will it work on all operating systems with java installed? If so, could I not just scrap this launcher, and use a process builder to execute the above command? Bonus points for someone who can tell me how to execute the command from a jre packaged with my app, as that&#39;s what I plan on doing so the user does not have to download Java.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/4002462/how-can-i-write-a-java-application-that-can-update-itself-at-runtime\r\n  [2]: https://stackoverflow.com/questions/13391374/small-class-to-allow-a-java-program-to-auto-update-itself\r\n  [3]: https://stackoverflow.com/questions/16725377/unable-to-connect-to-database-no-suitable-driver-found","title":"How to use URLClassloader in an auto-update jar launcher?","body":"<p>I've come across many posts about these two topics: Auto-Updating and URLClassloaders. I'll start with the auto updating goal. I found this post <a href=\"https://stackoverflow.com/questions/4002462/how-can-i-write-a-java-application-that-can-update-itself-at-runtime\">here</a> that talks about a 2 jar system. One jar that launches the main app jar: From Stephen C:</p>\n<blockquote>\n<p>The launcher could be a Java application that creates a classloader for the new JAR, loads an entrypoint class and calls some method on it. If you do it this way, you have to watch for classloader storage leaks, but that's not difficult. (You just need to make sure that no objects with classes loaded from the JAR are reachable after you relaunch.)</p>\n</blockquote>\n<p>This is the approach I'm taking, but I'm open to other ideas if they prove easier and/or more reliable. The Coordinator has posted some <a href=\"https://stackoverflow.com/questions/13391374/small-class-to-allow-a-java-program-to-auto-update-itself\">pretty cool launcher code</a> to which I plan on incorporating some of this reload type code in my launcher, but first I need to get it to work.</p>\n<p>My issue is that my main app jar has many other dependencies, and I cannot get some of those classes to load despite the fact that all the jars have been added to the URL's array. This brings up the second topic URLClassloader.</p>\n<p>Side Note for future readers: When passing a URL to the URLClassloader that is a directory, a helpful note that would have saved me (an embarrassingly large) amount of time is that the contents of the directory must be .class files! I was originally pointing to my dependent jar directory, no good.</p>\n<p>Context for the code below, my launcher jar resides in the same directory as my app jar, which is why I'm using <code>user.dir</code>. I will probably change this, but for now the code works and gets far enough into my app's code to request a connection to a sqlite database before failing.</p>\n<p>Launcher:</p>\n<pre><code>public class Launcher {\n\npublic static void main(String[] args) {\n    \n    try {\n        String userdir = System.getProperty(&quot;user.dir&quot;);\n        File parentDir = new File(userdir);\n        ArrayList&lt;URL&gt; urls = getJarURLs(parentDir);\n        \n        URL[] jarURLs = new URL[urls.size()];\n        int index = 0;\n        for (URL u : urls) {\n            System.out.println(u.toString());\n            jarURLs[index] = u;\n            index ++;\n        }\n\n        URLClassLoader urlCL = new URLClassLoader(jarURLs); \n        Class&lt;?&gt; c = urlCL.loadClass(&quot;main.AppStart&quot;);\n        Object [] args2 = new Object[] {new String[] {}};\n        c.getMethod(&quot;main&quot;, String[].class).invoke(null, args2);\n        urlCL.close();\n    } catch (Exception e1) {\n        e1.printStackTrace();\n    } \n}\n\npublic static ArrayList&lt;URL&gt; getJarURLs(File parentDir) throws MalformedURLException {\n    ArrayList&lt;URL&gt; list = new ArrayList&lt;&gt;();\n    for (File f : parentDir.listFiles()) {\n        if (f.isDirectory()) {\n            list.addAll(getJarURLs(f));\n        } else {\n            String name = f.getName();\n            if (name.endsWith(&quot;.jar&quot;)) {\n                list.add(f.toURI().toURL());\n            }\n        }\n    }\n    return list;\n}\n}\n</code></pre>\n<p>Here's an example of the URL output added to the array:</p>\n<pre><code>file:/C:/my/path/to/dependent/jars/sqlite-jdbc-3.32.3.2.jar\nfile:/C:/my/path/to/main/app.jar\nfile: ... [10 more]\n</code></pre>\n<p>The URLClassloader seems to work well enough to load my main method in app.jar. The main executes a some startup type stuff, before attempting to load a login screen. When the request is made to get the user info database, my message screen loads and displays (&lt;-this is important for later)\nthe stacktrace containing:</p>\n<pre><code>java.sql.SQLException: No suitable driver found for jdbc:sqlite:C:\\...\\users.db\n</code></pre>\n<p>I understand that this is because that jar is not on the class path, but it's loaded via the class loader, so why can't it find the classes from the jar? From <a href=\"https://stackoverflow.com/questions/16725377/unable-to-connect-to-database-no-suitable-driver-found\">this post</a> JamesB suggested adding <code>Class.forName(&quot;org.sqlite.JDBC&quot;);</code> before the connection request. I rebuilt the app jar with this line of code and it worked!</p>\n<p>The weird thing that happened next, is that my message screen class can no longer be found even though earlier it loaded and displayed correctly. The message screen is a class inside my main app.jar and not in a dependent jar, which is why I'm baffled. Am I going to have to add Class.forName before every instance of any of my classes? That seems rude..</p>\n<p>So what could I be doing wrong with the class loader? Why does it load some classes and not others despite that fact that all the jars have been added to the URL array?</p>\n<p>Some other relative info: My app works perfectly as intended when launched from windows command line when the classpath is specified: <code>java -cp &quot;main-app.jar;my/dependent/jar/directory/*&quot; main.AppStart</code>. It's only when I try launching the app via this classloader that I have these issues.</p>\n<p>By the way, is this java command universal? Will it work on all operating systems with java installed? If so, could I not just scrap this launcher, and use a process builder to execute the above command? Bonus points for someone who can tell me how to execute the command from a jre packaged with my app, as that's what I plan on doing so the user does not have to download Java.</p>\n"},{"tags":["java","mongodb","spring-boot","nosql","nosql-aggregation"],"answers":[{"tags":[],"owner":{"account_id":16785102,"reputation":122,"user_id":12134289,"display_name":"Arthur Gazizov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662750858,"creation_date":1662750858,"answer_id":73666612,"question_id":73629450,"body_markdown":"```\r\n[{\r\n $group: {\r\n  _id: &#39;$salary&#39;,\r\n  records: {\r\n   $push: &#39;$$ROOT&#39;\r\n  }\r\n }\r\n}, {\r\n $sort: {\r\n  _id: -1\r\n }\r\n}, {\r\n $limit: 1\r\n}]\r\n```\r\n\r\nExample of output\r\n```\r\n{\r\n  &quot;_id&quot;: 40,\r\n  &quot;records&quot;: [\r\n    {\r\n      &quot;_id&quot;: {\r\n        &quot;$oid&quot;: &quot;631b8ab07d8c3aa86bb1c5fc&quot;\r\n      },\r\n      &quot;name&quot;: &quot;Bob&quot;,\r\n      &quot;surname&quot;: &quot;B&quot;,\r\n      &quot;salary&quot;: 40\r\n    },\r\n    {\r\n      &quot;_id&quot;: {\r\n        &quot;$oid&quot;: &quot;631b8ab07d8c3aa86bb1c5fd&quot;\r\n      },\r\n      &quot;name&quot;: &quot;Alice&quot;,\r\n      &quot;surname&quot;: &quot;A&quot;,\r\n      &quot;salary&quot;: 40\r\n    }\r\n  ]\r\n}\r\n```","title":"List all documents from mongodb where the each document&#39;s one field has max value in spring boot","body":"<pre><code>[{\n $group: {\n  _id: '$salary',\n  records: {\n   $push: '$$ROOT'\n  }\n }\n}, {\n $sort: {\n  _id: -1\n }\n}, {\n $limit: 1\n}]\n</code></pre>\n<p>Example of output</p>\n<pre><code>{\n  &quot;_id&quot;: 40,\n  &quot;records&quot;: [\n    {\n      &quot;_id&quot;: {\n        &quot;$oid&quot;: &quot;631b8ab07d8c3aa86bb1c5fc&quot;\n      },\n      &quot;name&quot;: &quot;Bob&quot;,\n      &quot;surname&quot;: &quot;B&quot;,\n      &quot;salary&quot;: 40\n    },\n    {\n      &quot;_id&quot;: {\n        &quot;$oid&quot;: &quot;631b8ab07d8c3aa86bb1c5fd&quot;\n      },\n      &quot;name&quot;: &quot;Alice&quot;,\n      &quot;surname&quot;: &quot;A&quot;,\n      &quot;salary&quot;: 40\n    }\n  ]\n}\n</code></pre>\n"}],"owner":{"account_id":16495259,"reputation":17,"user_id":11918013,"display_name":"Bago"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1662750858,"creation_date":1662517551,"question_id":73629450,"body_markdown":"I have list of documents on mongodb like\r\n\r\n    Id, name, surname, salary. \r\n\r\nI want all documents would return which contains `max salary`.\r\nI know that i should aggregate the query in two step.\r\n1.  First of all, I should find max value of salar field for all documents, \r\n2. and after then i should find all documents where salary equals maxValue.\r\n\r\nBut i cannot configure it  neither JPA nor native query approach.  How can i make it happen? ","title":"List all documents from mongodb where the each document&#39;s one field has max value in spring boot","body":"<p>I have list of documents on mongodb like</p>\n<pre><code>Id, name, surname, salary. \n</code></pre>\n<p>I want all documents would return which contains <code>max salary</code>.\nI know that i should aggregate the query in two step.</p>\n<ol>\n<li>First of all, I should find max value of salar field for all documents,</li>\n<li>and after then i should find all documents where salary equals maxValue.</li>\n</ol>\n<p>But i cannot configure it  neither JPA nor native query approach.  How can i make it happen?</p>\n"},{"tags":["java","oracle","spring-boot","jpa","oracle10g"],"comments":[{"owner":{"account_id":17782616,"reputation":6789,"user_id":12913491,"display_name":"pmdba"},"score":0,"creation_date":1662750682,"post_id":73666354,"comment_id":130086533,"body_markdown":"Are you *really* using Oracle 10g? If so, why?","body":"Are you <i>really</i> using Oracle 10g? If so, why?"}],"answers":[{"tags":[],"owner":{"account_id":17782616,"reputation":6789,"user_id":12913491,"display_name":"pmdba"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662750783,"creation_date":1662749789,"answer_id":73666461,"question_id":73666354,"body_markdown":"If you&#39;re really using Oracle 10g, it doesn&#39;t have identity column support. Also `ROWID` is a pseudo-column generated by Oracle for every row in a table, whether you specify it or not. It tracks the physical storage location of the row in the tablespace. Note that while `ROWID` is unique, it is *NOT FIXED* or indexed (it&#39;s more like a direct memory address) and should not be used as a primary key; you won&#39;t be able to use it as a reference to join to any other table.\r\n\r\nIn 10g, you&#39;ll have to go &quot;old school&quot; and build the identity capability piece by piece:\r\n\r\n 1. Add a primary key column with a `NUMBER` data type\r\n 1. Create a primary key constraint on the new column\r\n 1. Create a sequence object to generate primary key values (note that values will be unique, but depending on your architecture and uptime requirements may not be ordered or consecutive)\r\n 1. Create an `ON INSERT FOR EACH ROW` trigger for the table to get the next value from the sequence and replace the primary key value in the insert transaction\r\n\r\nThis is essentially what Oracle&#39;s &quot;identity&quot; column construct does behind the scenes, with system-generated sequences and triggers.","title":"Inserting new row to table using repository, no pk on table","body":"<p>If you're really using Oracle 10g, it doesn't have identity column support. Also <code>ROWID</code> is a pseudo-column generated by Oracle for every row in a table, whether you specify it or not. It tracks the physical storage location of the row in the tablespace. Note that while <code>ROWID</code> is unique, it is <em>NOT FIXED</em> or indexed (it's more like a direct memory address) and should not be used as a primary key; you won't be able to use it as a reference to join to any other table.</p>\n<p>In 10g, you'll have to go &quot;old school&quot; and build the identity capability piece by piece:</p>\n<ol>\n<li>Add a primary key column with a <code>NUMBER</code> data type</li>\n<li>Create a primary key constraint on the new column</li>\n<li>Create a sequence object to generate primary key values (note that values will be unique, but depending on your architecture and uptime requirements may not be ordered or consecutive)</li>\n<li>Create an <code>ON INSERT FOR EACH ROW</code> trigger for the table to get the next value from the sequence and replace the primary key value in the insert transaction</li>\n</ol>\n<p>This is essentially what Oracle's &quot;identity&quot; column construct does behind the scenes, with system-generated sequences and triggers.</p>\n"}],"owner":{"account_id":24402334,"reputation":13,"user_id":18330894,"display_name":"Sara Eva"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73666461,"answer_count":1,"score":0,"last_activity_date":1662750783,"creation_date":1662749079,"question_id":73666354,"body_markdown":"I&#39;m working with Oracle and table have no pk. On entity I&#39;m using ROWID as Id\r\n\r\n    @Id\r\n    @Column(name=&quot;ROWID&quot;)\r\n    private String id;\r\n    @Column(name=&quot;phone_number&quot;)\r\n    private String phoneNumber;\r\n\r\nAll I want to do is to save a new row to table using save() method of repository. Here comes the problem. How can I skip generating id(rowid) for table and make oracle to do it by itself?\r\n\r\n[Same question][1], I added @GeneratedValue(strategy = GenerationType.IDENTITY) but getting error: \r\n\r\nIdentityColumnSupportImpl does not support identity key generation\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/60985914/i-have-some-model-i-dont-wanna-insert-manual-or-auto-the-id-i-just-want-to-ingo","title":"Inserting new row to table using repository, no pk on table","body":"<p>I'm working with Oracle and table have no pk. On entity I'm using ROWID as Id</p>\n<pre><code>@Id\n@Column(name=&quot;ROWID&quot;)\nprivate String id;\n@Column(name=&quot;phone_number&quot;)\nprivate String phoneNumber;\n</code></pre>\n<p>All I want to do is to save a new row to table using save() method of repository. Here comes the problem. How can I skip generating id(rowid) for table and make oracle to do it by itself?</p>\n<p><a href=\"https://stackoverflow.com/questions/60985914/i-have-some-model-i-dont-wanna-insert-manual-or-auto-the-id-i-just-want-to-ingo\">Same question</a>, I added @GeneratedValue(strategy = GenerationType.IDENTITY) but getting error:</p>\n<p>IdentityColumnSupportImpl does not support identity key generation</p>\n"},{"tags":["java","sql","jdbc","prepared-statement"],"comments":[{"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"score":1,"creation_date":1662734083,"post_id":73663663,"comment_id":130081602,"body_markdown":"Never, ever concatenate strings. Use PreparedStatement with parameters. Your code is open to SQL Injection.","body":"Never, ever concatenate strings. Use PreparedStatement with parameters. Your code is open to SQL Injection."},{"owner":{"account_id":14152725,"reputation":440,"user_id":10224292,"display_name":"Hubi"},"score":0,"creation_date":1662734419,"post_id":73663663,"comment_id":130081725,"body_markdown":"Correct this still needs to be changed... is not yet a productionCode... at the moment I am concerned with the statement problem","body":"Correct this still needs to be changed... is not yet a productionCode... at the moment I am concerned with the statement problem"},{"owner":{"account_id":14632062,"reputation":585,"user_id":10671013,"display_name":"Tan Yu Hau Sean"},"score":0,"creation_date":1662735104,"post_id":73663663,"comment_id":130082008,"body_markdown":"After you close the connection in method1. When you get a new connection, you call getConnection(), but if it is null it create new connection. I m assuming it is not null but it is still the closed first connection. Maybe an if statement to check `.isClosed()` and create new connection? I m too sure, but I really dont see you creating new connection anywhere.","body":"After you close the connection in method1. When you get a new connection, you call getConnection(), but if it is null it create new connection. I m assuming it is not null but it is still the closed first connection. Maybe an if statement to check <code>.isClosed()</code> and create new connection? I m too sure, but I really dont see you creating new connection anywhere."},{"owner":{"account_id":14152725,"reputation":440,"user_id":10224292,"display_name":"Hubi"},"score":0,"creation_date":1662735330,"post_id":73663663,"comment_id":130082097,"body_markdown":"Unfortunately it does not work, I get the same error message as mentioned above.","body":"Unfortunately it does not work, I get the same error message as mentioned above."},{"owner":{"account_id":14632062,"reputation":585,"user_id":10671013,"display_name":"Tan Yu Hau Sean"},"score":0,"creation_date":1662735469,"post_id":73663663,"comment_id":130082145,"body_markdown":"after `connection.close();` in closeConnection() can you try reassigning `connection = null;`?","body":"after <code>connection.close();</code> in closeConnection() can you try reassigning <code>connection = null;</code>?"},{"owner":{"account_id":14152725,"reputation":440,"user_id":10224292,"display_name":"Hubi"},"score":0,"creation_date":1662735533,"post_id":73663663,"comment_id":130082167,"body_markdown":"yerah i did this... same result.. I also tried to close the statement - java.sql.SQLException: No operations allowed after statement closed.","body":"yerah i did this... same result.. I also tried to close the statement - java.sql.SQLException: No operations allowed after statement closed."},{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1662967919,"post_id":73663663,"comment_id":130119763,"body_markdown":"Your `JDBCBaseManager` makes zero sense to me. You are wrapping resources incorrectly. Use a `DataSource` to create connections and use the JDBC interfaces **directly**, or switch to using abstractions like Hibernate/JPA or jOOQ.","body":"Your <code>JDBCBaseManager</code> makes zero sense to me. You are wrapping resources incorrectly. Use a <code>DataSource</code> to create connections and use the JDBC interfaces <b>directly</b>, or switch to using abstractions like Hibernate/JPA or jOOQ."}],"answers":[{"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1662750625,"creation_date":1662750298,"answer_id":73666530,"question_id":73663663,"body_markdown":"Here lies the error\r\n\r\n    public JDBCBaseManager() {\r\n\r\n      private PreparedStatement preparedStatement = null;\r\n\r\n        public PreparedStatement getPreparedStatement(String sql, boolean returnGeneratedKeys) {\r\n          try {\r\n          ......\r\n           if (preparedStatement == null) {\r\n                if (!returnGeneratedKeys) {\r\n                    preparedStatement = connection.prepareStatement(sql);\r\n                } else {\r\n                    preparedStatement = connection.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);\r\n                    connection.setAutoCommit(false);\r\n                }\r\n            }\r\n            return preparedStatement;\r\n\r\nYou build the prepare statement only the first time the method `getPreparedStatement` is called because only the first time the field `preparedStatement` is null. Every next time you call the method `getPreparedStatement`  you receive the previous  `preparedStatement`  from the previous SQL and not the new one.\r\n\r\nRemove the check for `if (preparedStatement == null) {`\r\n\r\nYou need to build a new `preparedStatement` every time you want to execute a new SQL.","title":"What is the right way to deal with the PreparedStatement in the Java program flow?","body":"<p>Here lies the error</p>\n<pre><code>public JDBCBaseManager() {\n\n  private PreparedStatement preparedStatement = null;\n\n    public PreparedStatement getPreparedStatement(String sql, boolean returnGeneratedKeys) {\n      try {\n      ......\n       if (preparedStatement == null) {\n            if (!returnGeneratedKeys) {\n                preparedStatement = connection.prepareStatement(sql);\n            } else {\n                preparedStatement = connection.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);\n                connection.setAutoCommit(false);\n            }\n        }\n        return preparedStatement;\n</code></pre>\n<p>You build the prepare statement only the first time the method <code>getPreparedStatement</code> is called because only the first time the field <code>preparedStatement</code> is null. Every next time you call the method <code>getPreparedStatement</code>  you receive the previous  <code>preparedStatement</code>  from the previous SQL and not the new one.</p>\n<p>Remove the check for <code>if (preparedStatement == null) {</code></p>\n<p>You need to build a new <code>preparedStatement</code> every time you want to execute a new SQL.</p>\n"}],"owner":{"account_id":14152725,"reputation":440,"user_id":10224292,"display_name":"Hubi"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":156,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73666530,"answer_count":1,"score":0,"last_activity_date":1662750625,"creation_date":1662733606,"question_id":73663663,"body_markdown":"There are two methods in which the PreparedStatement is used. \r\n\r\nThe first method is called in the second method.\r\n\r\n**First method:**\r\n    \t\r\n    protected List&lt;String&gt; findResultsByMandantId(Long mandantId) {\r\n\t\tList&lt;String&gt; resultIds = new ArrayList&lt;&gt;();\r\n\t\tResultSet rs;\r\n\t\tString sql = &quot;SELECT result_id FROM results WHERE mandant_id = ?&quot;;\r\n\t\tPreparedStatement statement = getPreparedStatement(sql, false);\r\n\t\ttry {\r\n\t\t\tstatement.setLong(1, mandantId);\r\n\t\t\tstatement.execute();\r\n\t\t\trs = statement.getResultSet();\r\n\r\n\t\t\twhile (rs.next()) {\r\n\t\t\t\tresultIds.add(rs.getString(1));\r\n\t\t\t}\r\n\t\t} catch (SQLException e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t\treturn resultIds;\r\n\t}\r\n\r\n**Second method:**\r\n\r\n    protected void findResultLineEntityToDelete(Long mandantId, String title, String context) {\r\n\t\tList&lt;String&gt; resultIds = findResultsByMandantId(mandantId);\r\n\t\tString [] resultIdsArr = resultIds.toArray(String[]::new);\r\n\t\t\r\n\t\tResultSet rs;\r\n\r\n\t\t//String sql = &quot;SELECT * FROM resultline WHERE result_id in (SELECT result_id FROM results WHERE mandant_id =&quot; + mandantId + &quot;)&quot;;\r\n\t\tString sql = &quot;SELECT * FROM resultline WHERE result_id in (&quot; + String.join(&quot;, &quot;, resultIdsArr)+ &quot;)&quot;;\r\n\t\tPreparedStatement statement = getPreparedStatement(sql, false);\r\n\t\ttry {\r\n\t\t\tstatement.execute();\r\n\t\t\trs = statement.getResultSet();\r\n\r\n\t\t\twhile (rs.next()) {\r\n\t\t\t\tif (rs.getString(3).equals(title) &amp;&amp; rs.getString(4).equals(context)) {\r\n\t\t\t\t\tSystem.out.println(&quot;Titel: &quot; + rs.getString(3) + &quot; &quot; + &quot;Context: &quot; + rs.getString(4));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (SQLException e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t}\r\n\r\nThe class in which both methods are located extends the JDBCBaseManager. \r\n\r\n**JDBCBaseManager:**\r\n\r\n    private final String url = &quot;jdbc:mysql://localhost:3306/database&quot;;\r\n\tprivate final String userName = &quot;root&quot;;\r\n\tprivate final String password = &quot;&quot;;\r\n\tprivate Connection connection = null;\r\n\tprivate PreparedStatement preparedStatement = null;\r\n\tprivate int batchSize = 0;\r\n\r\n\r\n\tpublic JDBCBaseManager() {\r\n    //\t\tDotenv env = Dotenv.configure().directory(&quot;./serverless&quot;).load();\r\n    //\t\turl = env.get(&quot;DB_PROD_URL&quot;);\r\n    //\t\tuserName = env.get(&quot;DB_USER&quot;);\r\n    //\t\tpassword = env.get(&quot;DB_PW&quot;);\r\n\t}\r\n\r\n\tpublic void getConnection() {\r\n\t\ttry {\r\n\t\t\tif (connection == null) {\r\n\t\t\t\tconnection = DriverManager.getConnection(url, userName, password);\r\n\t\t\t}\r\n\t\t} catch (SQLException e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic PreparedStatement getPreparedStatement(String sql, boolean returnGeneratedKeys) {\r\n\t\ttry {\r\n\t\t\tif (connection == null) {\r\n\t\t\t\tgetConnection();\r\n\t\t\t}\r\n\t\t\tif (preparedStatement == null) {\r\n\t\t\t\tif (!returnGeneratedKeys) {\r\n\t\t\t\t\tpreparedStatement = connection.prepareStatement(sql);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpreparedStatement = connection.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);\r\n\t\t\t\t\tconnection.setAutoCommit(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn preparedStatement;\r\n\t\t} catch (SQLException e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic void closeConnection() {\r\n\t\ttry {\r\n\t\t\tif (connection != null &amp;&amp; !connection.isClosed()) {\r\n\t\t\t\tSystem.out.println(&quot;Closing Database Connection&quot;);\r\n\t\t\t\tconnection.close();\r\n\t\t\t}\r\n\t\t} catch (SQLException e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic void startBatch(int batchSize) throws SQLException {\r\n\t\tconnection.setAutoCommit(false);\r\n\t\tsetBatchSize(batchSize);\r\n\t}\r\n\r\n\tpublic void commit() {\r\n\t\ttry {\r\n\t\t\tif (connection != null &amp;&amp; !connection.isClosed()) {\r\n\t\t\t\tconnection.commit();\r\n\t\t\t}\r\n\t\t} catch (SQLException e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic int getBatchSize() {\r\n\t\treturn batchSize;\r\n\t}\r\n\r\n\tpublic void setBatchSize(int batchSize) {\r\n\t\tthis.batchSize = batchSize;\r\n\t}\r\n\r\nThe ResultSet in the second method still contains the results from the first method. \r\n\r\nI already tried to close the connection and open it again before the second method is executed, but then I get the errors: \r\n\r\n&gt; java.sql.SQLException: No operations allowed after statement closed.\r\n&gt; \r\n&gt; java.sql.SQLNonTransientConnectionException: No operations allowed\r\n&gt; after connection closed.\r\n\r\nCan you tell me how to deal with the statement correctly in this case? Is my BaseManager incorrectly structured?\r\n\r\n","title":"What is the right way to deal with the PreparedStatement in the Java program flow?","body":"<p>There are two methods in which the PreparedStatement is used.</p>\n<p>The first method is called in the second method.</p>\n<p><strong>First method:</strong></p>\n<pre><code>protected List&lt;String&gt; findResultsByMandantId(Long mandantId) {\n    List&lt;String&gt; resultIds = new ArrayList&lt;&gt;();\n    ResultSet rs;\n    String sql = &quot;SELECT result_id FROM results WHERE mandant_id = ?&quot;;\n    PreparedStatement statement = getPreparedStatement(sql, false);\n    try {\n        statement.setLong(1, mandantId);\n        statement.execute();\n        rs = statement.getResultSet();\n\n        while (rs.next()) {\n            resultIds.add(rs.getString(1));\n        }\n    } catch (SQLException e) {\n        throw new RuntimeException(e);\n    }\n    return resultIds;\n}\n</code></pre>\n<p><strong>Second method:</strong></p>\n<pre><code>protected void findResultLineEntityToDelete(Long mandantId, String title, String context) {\n    List&lt;String&gt; resultIds = findResultsByMandantId(mandantId);\n    String [] resultIdsArr = resultIds.toArray(String[]::new);\n    \n    ResultSet rs;\n\n    //String sql = &quot;SELECT * FROM resultline WHERE result_id in (SELECT result_id FROM results WHERE mandant_id =&quot; + mandantId + &quot;)&quot;;\n    String sql = &quot;SELECT * FROM resultline WHERE result_id in (&quot; + String.join(&quot;, &quot;, resultIdsArr)+ &quot;)&quot;;\n    PreparedStatement statement = getPreparedStatement(sql, false);\n    try {\n        statement.execute();\n        rs = statement.getResultSet();\n\n        while (rs.next()) {\n            if (rs.getString(3).equals(title) &amp;&amp; rs.getString(4).equals(context)) {\n                System.out.println(&quot;Titel: &quot; + rs.getString(3) + &quot; &quot; + &quot;Context: &quot; + rs.getString(4));\n            }\n        }\n    } catch (SQLException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<p>The class in which both methods are located extends the JDBCBaseManager.</p>\n<p><strong>JDBCBaseManager:</strong></p>\n<pre><code>private final String url = &quot;jdbc:mysql://localhost:3306/database&quot;;\nprivate final String userName = &quot;root&quot;;\nprivate final String password = &quot;&quot;;\nprivate Connection connection = null;\nprivate PreparedStatement preparedStatement = null;\nprivate int batchSize = 0;\n\n\npublic JDBCBaseManager() {\n//      Dotenv env = Dotenv.configure().directory(&quot;./serverless&quot;).load();\n//      url = env.get(&quot;DB_PROD_URL&quot;);\n//      userName = env.get(&quot;DB_USER&quot;);\n//      password = env.get(&quot;DB_PW&quot;);\n}\n\npublic void getConnection() {\n    try {\n        if (connection == null) {\n            connection = DriverManager.getConnection(url, userName, password);\n        }\n    } catch (SQLException e) {\n        throw new RuntimeException(e);\n    }\n}\n\npublic PreparedStatement getPreparedStatement(String sql, boolean returnGeneratedKeys) {\n    try {\n        if (connection == null) {\n            getConnection();\n        }\n        if (preparedStatement == null) {\n            if (!returnGeneratedKeys) {\n                preparedStatement = connection.prepareStatement(sql);\n            } else {\n                preparedStatement = connection.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);\n                connection.setAutoCommit(false);\n            }\n        }\n        return preparedStatement;\n    } catch (SQLException e) {\n        throw new RuntimeException(e);\n    }\n}\n\npublic void closeConnection() {\n    try {\n        if (connection != null &amp;&amp; !connection.isClosed()) {\n            System.out.println(&quot;Closing Database Connection&quot;);\n            connection.close();\n        }\n    } catch (SQLException e) {\n        throw new RuntimeException(e);\n    }\n}\n\npublic void startBatch(int batchSize) throws SQLException {\n    connection.setAutoCommit(false);\n    setBatchSize(batchSize);\n}\n\npublic void commit() {\n    try {\n        if (connection != null &amp;&amp; !connection.isClosed()) {\n            connection.commit();\n        }\n    } catch (SQLException e) {\n        throw new RuntimeException(e);\n    }\n}\n\npublic int getBatchSize() {\n    return batchSize;\n}\n\npublic void setBatchSize(int batchSize) {\n    this.batchSize = batchSize;\n}\n</code></pre>\n<p>The ResultSet in the second method still contains the results from the first method.</p>\n<p>I already tried to close the connection and open it again before the second method is executed, but then I get the errors:</p>\n<blockquote>\n<p>java.sql.SQLException: No operations allowed after statement closed.</p>\n<p>java.sql.SQLNonTransientConnectionException: No operations allowed\nafter connection closed.</p>\n</blockquote>\n<p>Can you tell me how to deal with the statement correctly in this case? Is my BaseManager incorrectly structured?</p>\n"},{"tags":["java","collections","linkedhashmap"],"comments":[{"owner":{"account_id":22039344,"reputation":1704,"user_id":16305340,"display_name":"abdo Salm"},"score":0,"creation_date":1662716126,"post_id":73660080,"comment_id":130075113,"body_markdown":"Does this answer your question? [How to iterate through LinkedHashMap with lists as values](https://stackoverflow.com/questions/12310914/how-to-iterate-through-linkedhashmap-with-lists-as-values)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/12310914/how-to-iterate-through-linkedhashmap-with-lists-as-values\">How to iterate through LinkedHashMap with lists as values</a>"},{"owner":{"account_id":207965,"reputation":3704,"user_id":458157,"accept_rate":75,"display_name":"gouessej"},"score":1,"creation_date":1662716907,"post_id":73660080,"comment_id":130075388,"body_markdown":"Actually, there is no notion of index in java.util.Collection but you can simply increment a local variable to get the job done, it just looks weird and not the right way to go in my humble opinion. You should use a List instead of a Collection if indexes matter.","body":"Actually, there is no notion of index in java.util.Collection but you can simply increment a local variable to get the job done, it just looks weird and not the right way to go in my humble opinion. You should use a List instead of a Collection if indexes matter."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":1,"creation_date":1662721658,"post_id":73660080,"comment_id":130076966,"body_markdown":"The notion of `index` is applicable **only** if you&#39;re dialing with a `List` interface. With `Collection` it doesn&#39;t make sense.","body":"The notion of <code>index</code> is applicable <b>only</b> if you&#39;re dialing with a <code>List</code> interface. With <code>Collection</code> it doesn&#39;t make sense."},{"owner":{"account_id":77857,"reputation":12130,"user_id":221951,"accept_rate":47,"display_name":"Piotr Gwiazda"},"score":1,"creation_date":1662750808,"post_id":73660080,"comment_id":130086561,"body_markdown":"A Collection does not guarantee to traverse in a predictable order.","body":"A Collection does not guarantee to traverse in a predictable order."},{"owner":{"account_id":15220542,"reputation":11,"user_id":11089154,"display_name":"Kanchan Soni"},"score":0,"creation_date":1667889802,"post_id":73660080,"comment_id":131268926,"body_markdown":"@gouessej I ended up using a local variable to achieve the test result. But yes I agree with other suggestions to go with List interface to deal with index. Thanks!","body":"@gouessej I ended up using a local variable to achieve the test result. But yes I agree with other suggestions to go with List interface to deal with index. Thanks!"}],"owner":{"account_id":15220542,"reputation":11,"user_id":11089154,"display_name":"Kanchan Soni"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":204,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1662750537,"creation_date":1662715946,"question_id":73660080,"body_markdown":"I have something like\r\n```\r\nCollection&lt;LinkedHashMap&lt;String,Object&gt;&gt; responseObjects = (Collection&lt;LinkedHashMap&lt;String, Object&gt;&gt;) response.getResponseObjects();\r\n```\r\nI am writing some unit tests where I am getting 2 elements in this collection and want to put assertions on each element Collection having a map of `&lt;String,Object&gt;`.\r\nBoth elements have different sets of values in `LinkedHashMap`.\r\n\r\nI tried using For-Each\r\n\r\n```\r\nfor(Map&lt;String,Object&gt; response : responseObjects) {\r\n     assertEquals(&quot;Test&quot;, responseObj.get(&quot;stringField&quot;));\r\n}\r\n```\r\nBut how do I control the index from this, since I need to put assertion on different data coming in.","title":"How to iterate over Collection of LinkedHashMap","body":"<p>I have something like</p>\n<pre><code>Collection&lt;LinkedHashMap&lt;String,Object&gt;&gt; responseObjects = (Collection&lt;LinkedHashMap&lt;String, Object&gt;&gt;) response.getResponseObjects();\n</code></pre>\n<p>I am writing some unit tests where I am getting 2 elements in this collection and want to put assertions on each element Collection having a map of <code>&lt;String,Object&gt;</code>.\nBoth elements have different sets of values in <code>LinkedHashMap</code>.</p>\n<p>I tried using For-Each</p>\n<pre><code>for(Map&lt;String,Object&gt; response : responseObjects) {\n     assertEquals(&quot;Test&quot;, responseObj.get(&quot;stringField&quot;));\n}\n</code></pre>\n<p>But how do I control the index from this, since I need to put assertion on different data coming in.</p>\n"},{"tags":["java","android","xml","kotlin"],"answers":[{"tags":[],"owner":{"account_id":25192167,"reputation":339,"user_id":19374335,"display_name":"Praveen Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662730246,"creation_date":1662730246,"answer_id":73662955,"question_id":73662405,"body_markdown":"**Try This**\r\n\r\n**MainActivity.java**\r\n\r\n&gt; This Code Hide Soft Keyboard in your Project\r\n\r\n      public class MainActivity extends AppCompatActivity {\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            \r\n           getWindow().setFlags(WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM,\r\n                    WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM);\r\n        }\r\n      }","title":"How to prevent the soft keyboard from popping up while using a physical keyboard in Android app? kotlin or java","body":"<p><strong>Try This</strong></p>\n<p><strong>MainActivity.java</strong></p>\n<blockquote>\n<p>This Code Hide Soft Keyboard in your Project</p>\n</blockquote>\n<pre><code>  public class MainActivity extends AppCompatActivity {\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        \n       getWindow().setFlags(WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM,\n                WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM);\n    }\n  }\n</code></pre>\n"}],"owner":{"account_id":26290888,"reputation":1,"user_id":19957928,"display_name":"shahzaib sohaib"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662750400,"creation_date":1662727643,"question_id":73662405,"body_markdown":"I want to prevent the soft keyboard from popping up while using a physical keyboard in Android app.\r\n\r\nI have tried inputmanager \r\n```\r\nval inputMethodManager: InputMethodManager = context?.getSystemService(\r\n                    AppCompatActivity.INPUT_METHOD_SERVICE\r\n                ) as InputMethodManager\r\n                inputMethodManager.showInputMethodPicker()\r\n```\r\n\r\nand also used this\r\n```\r\neditText.showSoftInputOnFocus = false\r\n```\r\nbut the soft keyboard still popups when I start typing on the physical keyboard.","title":"How to prevent the soft keyboard from popping up while using a physical keyboard in Android app? kotlin or java","body":"<p>I want to prevent the soft keyboard from popping up while using a physical keyboard in Android app.</p>\n<p>I have tried inputmanager</p>\n<pre><code>val inputMethodManager: InputMethodManager = context?.getSystemService(\n                    AppCompatActivity.INPUT_METHOD_SERVICE\n                ) as InputMethodManager\n                inputMethodManager.showInputMethodPicker()\n</code></pre>\n<p>and also used this</p>\n<pre><code>editText.showSoftInputOnFocus = false\n</code></pre>\n<p>but the soft keyboard still popups when I start typing on the physical keyboard.</p>\n"},{"tags":["java","grid-layout"],"comments":[{"owner":{"account_id":997513,"reputation":12945,"user_id":3893496,"accept_rate":54,"display_name":"arcy"},"score":0,"creation_date":1510504704,"post_id":47250444,"comment_id":81452663,"body_markdown":"Help with what? What doesn&#39;t this do that you want it to do? Don&#39;t make us guess your question.","body":"Help with what? What doesn&#39;t this do that you want it to do? Don&#39;t make us guess your question."},{"owner":{"account_id":12005107,"reputation":475,"user_id":8783684,"display_name":"Dabiuteef"},"score":0,"creation_date":1510505006,"post_id":47250444,"comment_id":81452765,"body_markdown":"A 2 column `GridLayout` obviously has 2 in the second parameter of the `GridLayout` constructor?","body":"A 2 column <code>GridLayout</code> obviously has 2 in the second parameter of the <code>GridLayout</code> constructor?"},{"owner":{"account_id":12005107,"reputation":475,"user_id":8783684,"display_name":"Dabiuteef"},"score":0,"creation_date":1510505237,"post_id":47250444,"comment_id":81452848,"body_markdown":"And you should probably use `GridBagLayout` for this task. Cells in `GridLayout` are forced to have same size.","body":"And you should probably use <code>GridBagLayout</code> for this task. Cells in <code>GridLayout</code> are forced to have same size."}],"owner":{"account_id":5785070,"reputation":5,"user_id":4564573,"display_name":"Lylio"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":526,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662749892,"creation_date":1510500063,"question_id":47250444,"body_markdown":"I&#39;m trying to create a basic GUI for booking classes in a gym. I&#39;m not very familiar with the grid layout and struggling with creating a 2 column grid.\r\n\r\nHere&#39;s what I&#39;m trying to achieve:\r\n[Gym layout][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RwGMW.jpg\r\n\r\nAnd here&#39;s my grid code so far:\r\n\r\n    private void createPanel() {\r\n    \t\r\n    \tsetLayout(new GridLayout(4, 1));\r\n    \r\n    \tJPanel panel1 = new JPanel();\r\n    \tJPanel panel2 = new JPanel();\r\n    \tJPanel panel3 = new JPanel();\r\n    \tJPanel panel4 = new JPanel();\r\n    \t\r\n    \t//Panel 1: member ID field\r\n    \tpanel1.add(memberIDLabel);\r\n    \tpanel1.add(memberIDField);\r\n    \r\n    \tpanel1.add(courseNameLabel);\r\n    \tpanel1.add(courseNameField);\r\n    \t\r\n    \tpanel1.add(bookButton);\r\n    \t\r\n    \t//Panel 4: &#39;view courses&#39; and &#39;view members&#39; buttons\r\n    \tpanel4.add(coursesButton);\r\n    \tpanel4.add(bookingsButton);\r\n    \t\r\n    \t//Attaches panels to frame\r\n    \tthis.add(panel1);\r\n    \tthis.add(panel2);\r\n    \tthis.add(panel3);\r\n    \tthis.add(panel4);\r\n    }\r\n","title":"Java grid layout - 2 columns","body":"<p>I'm trying to create a basic GUI for booking classes in a gym. I'm not very familiar with the grid layout and struggling with creating a 2 column grid.</p>\n<p>Here's what I'm trying to achieve:\n<a href=\"https://i.stack.imgur.com/RwGMW.jpg\" rel=\"nofollow noreferrer\">Gym layout</a></p>\n<p>And here's my grid code so far:</p>\n<pre><code>private void createPanel() {\n    \n    setLayout(new GridLayout(4, 1));\n\n    JPanel panel1 = new JPanel();\n    JPanel panel2 = new JPanel();\n    JPanel panel3 = new JPanel();\n    JPanel panel4 = new JPanel();\n    \n    //Panel 1: member ID field\n    panel1.add(memberIDLabel);\n    panel1.add(memberIDField);\n\n    panel1.add(courseNameLabel);\n    panel1.add(courseNameField);\n    \n    panel1.add(bookButton);\n    \n    //Panel 4: 'view courses' and 'view members' buttons\n    panel4.add(coursesButton);\n    panel4.add(bookingsButton);\n    \n    //Attaches panels to frame\n    this.add(panel1);\n    this.add(panel2);\n    this.add(panel3);\n    this.add(panel4);\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":3,"creation_date":1662560518,"post_id":73637089,"comment_id":130034826,"body_markdown":"You might prefer using `#computeIfAbsent` over your manual null-check with `#get`. Then the entire block of code becomes one line: `map.computeIfAbsent(text, k -&gt; new AtomicLong(1)).incrementAndGet();`","body":"You might prefer using <code>#computeIfAbsent</code> over your manual null-check with <code>#get</code>. Then the entire block of code becomes one line: <code>map.computeIfAbsent(text, k -&gt; new AtomicLong(1)).incrementAndGet();</code>"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":4,"creation_date":1662562778,"post_id":73637089,"comment_id":130035803,"body_markdown":"Actually, `map.computeIfAbsent(text, k -&gt; new AtomicLong(0)).incrementAndGet();`, to start at zero when `incrementAndGet()` is always called. But you don’t need an `AtomicLong` anyway for such a trivial case, e.g. using a `ConcurrentMap&lt;String, Long&gt;`, you can simply call `map.merge(text, 1L, Long::sum);`","body":"Actually, <code>map.computeIfAbsent(text, k -&gt; new AtomicLong(0)).incrementAndGet();</code>, to start at zero when <code>incrementAndGet()</code> is always called. But you don’t need an <code>AtomicLong</code> anyway for such a trivial case, e.g. using a <code>ConcurrentMap&lt;String, Long&gt;</code>, you can simply call <code>map.merge(text, 1L, Long::sum);</code>"},{"owner":{"account_id":81495,"reputation":3962,"user_id":229743,"display_name":"Taylor"},"score":1,"creation_date":1662564041,"post_id":73637089,"comment_id":130036364,"body_markdown":"Per @Rogue and @Holger above, `computeIfAbsent`, particularly on the `ConcurrentHashMap`, is great here because it should keep everything atomic.","body":"Per @Rogue and @Holger above, <code>computeIfAbsent</code>, particularly on the <code>ConcurrentHashMap</code>, is great here because it should keep everything atomic."},{"owner":{"account_id":22372569,"reputation":21,"user_id":16587414,"display_name":"chaitu"},"score":0,"creation_date":1662564261,"post_id":73637089,"comment_id":130036452,"body_markdown":"Hi Guys , Thanks for your inputs ,can you please check my other 2 questions ?","body":"Hi Guys , Thanks for your inputs ,can you please check my other 2 questions ?"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1662565438,"post_id":73637089,"comment_id":130036894,"body_markdown":"Vague title. Rewrite to summarize your specific technical issue.","body":"Vague title. Rewrite to summarize your specific technical issue."}],"answers":[{"tags":[],"owner":{"account_id":2449500,"reputation":2222,"user_id":2136116,"accept_rate":82,"display_name":"timmz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662749513,"creation_date":1662564927,"answer_id":73638185,"question_id":73637089,"body_markdown":"1. Every call to your Spring ApiRest controller will create a new instance of your object, so no concurrent access to your object.\r\n\r\n2. If, for some reason your object is shared, static ..., your method: &#39;addText&#39; doesn&#39;t have any side effect apart from mutating the map (which is concurrent friendly), so no more thread safety to add IMHO.\r\n\r\n-- Edit to respond to comment --\r\n- To keep in memory you can declare you map as static in some class or just declare it in your Rest Controller as class variable (as controllers are singletons by default if you don&#39;t *modify scope* )\r\n","title":"How do I design thread-safety in the code","body":"<ol>\n<li><p>Every call to your Spring ApiRest controller will create a new instance of your object, so no concurrent access to your object.</p>\n</li>\n<li><p>If, for some reason your object is shared, static ..., your method: 'addText' doesn't have any side effect apart from mutating the map (which is concurrent friendly), so no more thread safety to add IMHO.</p>\n</li>\n</ol>\n<p>-- Edit to respond to comment --</p>\n<ul>\n<li>To keep in memory you can declare you map as static in some class or just declare it in your Rest Controller as class variable (as controllers are singletons by default if you don't <em>modify scope</em> )</li>\n</ul>\n"}],"owner":{"account_id":22372569,"reputation":21,"user_id":16587414,"display_name":"chaitu"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662749513,"creation_date":1662560334,"question_id":73637089,"body_markdown":"I have few questions on below code:\r\n\r\n1) How do I access class level map object from REST controller side. This object stores user input, so in controller side `map.get(&lt;text&gt;)` return count.\r\n\r\n2) Do I still need thread safety from multiple threads using Lock or CountDownLatch in addText method?\r\n\r\n   \r\n```\r\nprivate ConcurrentMap&lt;String, AtomicLong&gt; map = new ConcurrentHashMap&lt;&gt;();\r\n       \r\npublic void addText(String text){\r\n    System.out.println(&quot;current thread name &quot;+Thread.currentThread().getName());\r\n    AtomicLong l = map.get(text);\r\n    if(l == null){\r\n        l = new AtomicLong(1);\r\n        l = map.putIfAbsent(text, l);\r\n        if(l != null){\r\n            l.incrementAndGet();\r\n        }\r\n    }else{\r\n        l.incrementAndGet();\r\n    }\r\n}\r\n```","title":"How do I design thread-safety in the code","body":"<p>I have few questions on below code:</p>\n<ol>\n<li><p>How do I access class level map object from REST controller side. This object stores user input, so in controller side <code>map.get(&lt;text&gt;)</code> return count.</p>\n</li>\n<li><p>Do I still need thread safety from multiple threads using Lock or CountDownLatch in addText method?</p>\n</li>\n</ol>\n<pre><code>private ConcurrentMap&lt;String, AtomicLong&gt; map = new ConcurrentHashMap&lt;&gt;();\n       \npublic void addText(String text){\n    System.out.println(&quot;current thread name &quot;+Thread.currentThread().getName());\n    AtomicLong l = map.get(text);\n    if(l == null){\n        l = new AtomicLong(1);\n        l = map.putIfAbsent(text, l);\n        if(l != null){\n            l.incrementAndGet();\n        }\n    }else{\n        l.incrementAndGet();\n    }\n}\n</code></pre>\n"},{"tags":["java","image","resize"],"comments":[{"owner":{"account_id":21452,"reputation":2018,"user_id":52142,"accept_rate":40,"display_name":"Artur Gajowy"},"score":14,"creation_date":1299147368,"post_id":244164,"comment_id":5818868,"body_markdown":"since you asked for a library, the real answer is here: http://stackoverflow.com/questions/244164/resize-an-image-in-java-any-open-source-library/4528136#4528136. It&#39;s much easier to use than the code in accepted answer ;)","body":"since you asked for a library, the real answer is here: <a href=\"http://stackoverflow.com/questions/244164/resize-an-image-in-java-any-open-source-library/4528136#4528136\" title=\"resize an image in java any open source library\">stackoverflow.com/questions/244164/&hellip;</a>. It&#39;s much easier to use than the code in accepted answer ;)"},{"owner":{"account_id":7406,"reputation":14638,"user_id":12860,"accept_rate":98,"display_name":"Burkhard"},"score":0,"creation_date":1314719201,"post_id":244164,"comment_id":8715587,"body_markdown":"I disagree on the library part: Graphics2D is part of the awt library and it is open source. For the last part (open source) I am not 100% sure, but who would look at the awt code anyway?","body":"I disagree on the library part: Graphics2D is part of the awt library and it is open source. For the last part (open source) I am not 100% sure, but who would look at the awt code anyway?"}],"answers":[{"tags":[],"owner":{"account_id":7406,"reputation":14638,"user_id":12860,"accept_rate":98,"display_name":"Burkhard"},"down_vote_count":0,"up_vote_count":90,"is_accepted":true,"score":90,"last_activity_date":1547965550,"creation_date":1225216225,"answer_id":244177,"question_id":244164,"body_markdown":"After loading the image you can try:\r\n\r\n    BufferedImage createResizedCopy(Image originalImage, \r\n    \t\t\tint scaledWidth, int scaledHeight, \r\n    \t\t\tboolean preserveAlpha)\r\n    \t{\r\n    \t\tSystem.out.println(&quot;resizing...&quot;);\r\n    \t\tint imageType = preserveAlpha ? BufferedImage.TYPE_INT_RGB : BufferedImage.TYPE_INT_ARGB;\r\n    \t\tBufferedImage scaledBI = new BufferedImage(scaledWidth, scaledHeight, imageType);\r\n    \t\tGraphics2D g = scaledBI.createGraphics();\r\n    \t\tif (preserveAlpha) {\r\n    \t\t\tg.setComposite(AlphaComposite.Src);\r\n    \t\t}\r\n    \t\tg.drawImage(originalImage, 0, 0, scaledWidth, scaledHeight, null); \r\n    \t\tg.dispose();\r\n    \t\treturn scaledBI;\r\n    \t}","title":"How can I resize an image using Java?","body":"<p>After loading the image you can try:</p>\n\n<pre><code>BufferedImage createResizedCopy(Image originalImage, \n            int scaledWidth, int scaledHeight, \n            boolean preserveAlpha)\n    {\n        System.out.println(\"resizing...\");\n        int imageType = preserveAlpha ? BufferedImage.TYPE_INT_RGB : BufferedImage.TYPE_INT_ARGB;\n        BufferedImage scaledBI = new BufferedImage(scaledWidth, scaledHeight, imageType);\n        Graphics2D g = scaledBI.createGraphics();\n        if (preserveAlpha) {\n            g.setComposite(AlphaComposite.Src);\n        }\n        g.drawImage(originalImage, 0, 0, scaledWidth, scaledHeight, null); \n        g.dispose();\n        return scaledBI;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5419,"reputation":13287,"user_id":8709,"display_name":"Ken Gentle"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1355200138,"creation_date":1225218244,"answer_id":244306,"question_id":244164,"body_markdown":"[Java Advanced Imaging](http://www.oracle.com/technetwork/java/javase/tech/jai-142803.html) is now open source, and provides the operations you need.","title":"How can I resize an image using Java?","body":"<p><a href=\"http://www.oracle.com/technetwork/java/javase/tech/jai-142803.html\" rel=\"nofollow noreferrer\">Java Advanced Imaging</a> is now open source, and provides the operations you need.</p>\n"},{"tags":[],"owner":{"account_id":25106,"reputation":987,"user_id":64287,"accept_rate":60,"display_name":"Joel Carranza"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1234290332,"creation_date":1234290332,"answer_id":533526,"question_id":244164,"body_markdown":"If you are dealing with large images or want a nice looking result it&#39;s not a trivial task in java. Simply doing it via a rescale op via Graphics2D will not create a high quality thumbnail. You can do it using JAI, but it requires more work than you would imagine to get something that looks good and JAI has a nasty habit of blowing our your JVM with OutOfMemory errors. \r\n\r\nI suggest using ImageMagick as an external executable if you can get away with it. Its simple to use and it does the job right so that you don&#39;t have to. ","title":"How can I resize an image using Java?","body":"<p>If you are dealing with large images or want a nice looking result it's not a trivial task in java. Simply doing it via a rescale op via Graphics2D will not create a high quality thumbnail. You can do it using JAI, but it requires more work than you would imagine to get something that looks good and JAI has a nasty habit of blowing our your JVM with OutOfMemory errors. </p>\n\n<p>I suggest using ImageMagick as an external executable if you can get away with it. Its simple to use and it does the job right so that you don't have to. </p>\n"},{"tags":[],"owner":{"account_id":1636,"reputation":20746,"user_id":2197,"accept_rate":76,"display_name":"David Koelle"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1567796141,"creation_date":1234291297,"answer_id":533596,"question_id":244164,"body_markdown":"You don&#39;t need a library to do this.  You can do it with Java itself.\r\n\r\nChris Campbell has an excellent and detailed write-up on scaling images - see &lt;a href=&quot;https://community.oracle.com/docs/DOC-983611&quot;&gt;this article&lt;/a&gt;.\r\n\r\nChet Haase and Romain Guy also have a detailed and very informative write-up of image scaling in their book, &lt;a href=&quot;http://filthyrichclients.org/&quot;&gt;Filthy Rich Clients&lt;/a&gt;.  \r\n\r\n","title":"How can I resize an image using Java?","body":"<p>You don't need a library to do this.  You can do it with Java itself.</p>\n\n<p>Chris Campbell has an excellent and detailed write-up on scaling images - see <a href=\"https://community.oracle.com/docs/DOC-983611\" rel=\"nofollow noreferrer\">this article</a>.</p>\n\n<p>Chet Haase and Romain Guy also have a detailed and very informative write-up of image scaling in their book, <a href=\"http://filthyrichclients.org/\" rel=\"nofollow noreferrer\">Filthy Rich Clients</a>.  </p>\n"},{"tags":[],"owner":{"account_id":12599,"reputation":3003,"user_id":24902,"accept_rate":40,"display_name":"naltatis"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1248893479,"creation_date":1248893479,"answer_id":1202296,"question_id":244164,"body_markdown":"If, having imagemagick installed on your maschine is an option, I recommend [im4java][1]. It is a very thin abstraction layer upon the command line interface, but does its job very well.\r\n\r\n\r\n  [1]: http://im4java.sourceforge.net/","title":"How can I resize an image using Java?","body":"<p>If, having imagemagick installed on your maschine is an option, I recommend <a href=\"http://im4java.sourceforge.net/\" rel=\"nofollow noreferrer\">im4java</a>. It is a very thin abstraction layer upon the command line interface, but does its job very well.</p>\n"},{"tags":[],"owner":{"account_id":266126,"reputation":10632,"user_id":553524,"accept_rate":82,"display_name":"Riyad Kalla"},"down_vote_count":0,"up_vote_count":186,"is_accepted":false,"score":186,"last_activity_date":1452437141,"creation_date":1293220882,"answer_id":4528136,"question_id":244164,"body_markdown":"FWIW I just released (Apache 2, hosted on GitHub) a simple image-scaling library for Java called [imgscalr][1] (available on [Maven central](http://mvnrepository.com/artifact/org.imgscalr/imgscalr-lib)).\r\n\r\nThe library implements a few different approaches to image-scaling (including Chris Campbell&#39;s incremental approach with a few minor enhancements) and will either pick the most optimal approach for you if you ask it to, or give you the fastest or best looking (if you ask for that).\r\n\r\nUsage is dead-simple, just a bunch of static methods. The simplest use-case is:\r\n\r\n    BufferedImage scaledImage = Scalr.resize(myImage, 200);\r\n\r\nAll operations maintain the image&#39;s original proportions, so in this case you are asking imgscalr to resize your image within a bounds of 200 pixels wide and 200 pixels tall and by default it will automatically select the best-looking and fastest approach for that since it wasn&#39;t specified.\r\n\r\nI realize on the outset this looks like self-promotion (it is), but I spent my fair share of time googling this exact same subject and kept coming up with different results/approaches/thoughts/suggestions and decided to sit down and write a simple implementation that would address that 80-85% use-cases where you have an image and probably want a thumbnail for it -- either as fast as possible or as good-looking as possible (for those that have tried, you&#39;ll notice doing a Graphics.drawImage even with BICUBIC interpolation to a small enough image, it still looks like garbage).\r\n\r\n\r\n  [1]: https://github.com/thebuzzmedia/imgscalr","title":"How can I resize an image using Java?","body":"<p>FWIW I just released (Apache 2, hosted on GitHub) a simple image-scaling library for Java called <a href=\"https://github.com/thebuzzmedia/imgscalr\" rel=\"noreferrer\">imgscalr</a> (available on <a href=\"http://mvnrepository.com/artifact/org.imgscalr/imgscalr-lib\" rel=\"noreferrer\">Maven central</a>).</p>\n\n<p>The library implements a few different approaches to image-scaling (including Chris Campbell's incremental approach with a few minor enhancements) and will either pick the most optimal approach for you if you ask it to, or give you the fastest or best looking (if you ask for that).</p>\n\n<p>Usage is dead-simple, just a bunch of static methods. The simplest use-case is:</p>\n\n<pre><code>BufferedImage scaledImage = Scalr.resize(myImage, 200);\n</code></pre>\n\n<p>All operations maintain the image's original proportions, so in this case you are asking imgscalr to resize your image within a bounds of 200 pixels wide and 200 pixels tall and by default it will automatically select the best-looking and fastest approach for that since it wasn't specified.</p>\n\n<p>I realize on the outset this looks like self-promotion (it is), but I spent my fair share of time googling this exact same subject and kept coming up with different results/approaches/thoughts/suggestions and decided to sit down and write a simple implementation that would address that 80-85% use-cases where you have an image and probably want a thumbnail for it -- either as fast as possible or as good-looking as possible (for those that have tried, you'll notice doing a Graphics.drawImage even with BICUBIC interpolation to a small enough image, it still looks like garbage).</p>\n"},{"tags":[],"owner":{"account_id":9320,"reputation":159784,"user_id":17172,"display_name":"coobird"},"down_vote_count":0,"up_vote_count":56,"is_accepted":false,"score":56,"last_activity_date":1444289342,"creation_date":1298126766,"answer_id":5051429,"question_id":244164,"body_markdown":"[Thumbnailator][1] is an open-source image resizing library for Java with a fluent interface, distributed under the [MIT license.][2]\r\n\r\nI wrote this library because making high-quality thumbnails in Java can be surprisingly difficult, and the resulting code could be pretty messy. With Thumbnailator, it&#39;s possible to express fairly complicated tasks using a simple fluent API.\r\n\r\n**A simple example**\r\n\r\nFor a simple example, taking a image and resizing it to 100 x 100 (preserving the aspect ratio of the original image), and saving it to an file can achieved in a single statement:\r\n\r\n    Thumbnails.of(&quot;path/to/image&quot;)\r\n        .size(100, 100)\r\n        .toFile(&quot;path/to/thumbnail&quot;);\r\n\r\n**An advanced example**\r\n\r\nPerforming complex resizing tasks is simplified with Thumbnailator&#39;s fluent interface.\r\n\r\nLet&#39;s suppose we want to do the following:\r\n\r\n  1. take the images in a directory and,\r\n  2. resize them to 100 x 100, with the aspect ratio of the original image,\r\n  3. save them all to JPEGs with quality settings of `0.85`,\r\n  4. where the file names are taken from the original with `thumbnail.` appended to the beginning\r\n\r\nTranslated to Thumbnailator, we&#39;d be able to perform the above with the following:\r\n\r\n    Thumbnails.of(new File(&quot;path/to/directory&quot;).listFiles())\r\n        .size(100, 100)\r\n        .outputFormat(&quot;JPEG&quot;)\r\n        .outputQuality(0.85)\r\n        .toFiles(Rename.PREFIX_DOT_THUMBNAIL);\r\n\r\n**A note about image quality and speed**\r\n\r\nThis library also uses the *progressive bilinear scaling* method highlighted in [Filthy Rich Clients][3] by Chet Haase and Romain Guy in order to generate high-quality thumbnails while ensuring acceptable runtime performance.\r\n\r\n\r\n  [1]: https://github.com/coobird/thumbnailator\r\n  [2]: http://www.opensource.org/licenses/mit-license.php\r\n  [3]: http://filthyrichclients.org/","title":"How can I resize an image using Java?","body":"<p><a href=\"https://github.com/coobird/thumbnailator\">Thumbnailator</a> is an open-source image resizing library for Java with a fluent interface, distributed under the <a href=\"http://www.opensource.org/licenses/mit-license.php\">MIT license.</a></p>\n\n<p>I wrote this library because making high-quality thumbnails in Java can be surprisingly difficult, and the resulting code could be pretty messy. With Thumbnailator, it's possible to express fairly complicated tasks using a simple fluent API.</p>\n\n<p><strong>A simple example</strong></p>\n\n<p>For a simple example, taking a image and resizing it to 100 x 100 (preserving the aspect ratio of the original image), and saving it to an file can achieved in a single statement:</p>\n\n<pre><code>Thumbnails.of(\"path/to/image\")\n    .size(100, 100)\n    .toFile(\"path/to/thumbnail\");\n</code></pre>\n\n<p><strong>An advanced example</strong></p>\n\n<p>Performing complex resizing tasks is simplified with Thumbnailator's fluent interface.</p>\n\n<p>Let's suppose we want to do the following:</p>\n\n<ol>\n<li>take the images in a directory and,</li>\n<li>resize them to 100 x 100, with the aspect ratio of the original image,</li>\n<li>save them all to JPEGs with quality settings of <code>0.85</code>,</li>\n<li>where the file names are taken from the original with <code>thumbnail.</code> appended to the beginning</li>\n</ol>\n\n<p>Translated to Thumbnailator, we'd be able to perform the above with the following:</p>\n\n<pre><code>Thumbnails.of(new File(\"path/to/directory\").listFiles())\n    .size(100, 100)\n    .outputFormat(\"JPEG\")\n    .outputQuality(0.85)\n    .toFiles(Rename.PREFIX_DOT_THUMBNAIL);\n</code></pre>\n\n<p><strong>A note about image quality and speed</strong></p>\n\n<p>This library also uses the <em>progressive bilinear scaling</em> method highlighted in <a href=\"http://filthyrichclients.org/\">Filthy Rich Clients</a> by Chet Haase and Romain Guy in order to generate high-quality thumbnails while ensuring acceptable runtime performance.</p>\n"},{"tags":[],"owner":{"account_id":131900,"reputation":5671,"user_id":332242,"accept_rate":100,"display_name":"kajo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1302541955,"creation_date":1302541955,"answer_id":5624935,"question_id":244164,"body_markdown":"You could try to use [GraphicsMagick Image Processing System][1] with [im4java][2] as a comand-line interface for Java.\r\n\r\nThere are a lot of advantages of GraphicsMagick, but one for all:\r\n\r\n - GM is used to process billions of\r\n   files at the world&#39;s largest photo\r\n   sites (e.g. Flickr and Etsy).\r\n\r\n  [1]: http://www.graphicsmagick.org/\r\n  [2]: http://im4java.sourceforge.net/","title":"How can I resize an image using Java?","body":"<p>You could try to use <a href=\"http://www.graphicsmagick.org/\" rel=\"nofollow\">GraphicsMagick Image Processing System</a> with <a href=\"http://im4java.sourceforge.net/\" rel=\"nofollow\">im4java</a> as a comand-line interface for Java.</p>\n\n<p>There are a lot of advantages of GraphicsMagick, but one for all:</p>\n\n<ul>\n<li>GM is used to process billions of\nfiles at the world's largest photo\nsites (e.g. Flickr and Etsy).</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":560187,"reputation":51,"user_id":925751,"display_name":"Jice"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1326938611,"creation_date":1314985975,"answer_id":7287375,"question_id":244164,"body_markdown":"Image Magick has been mentioned.  There is a JNI front end project called JMagick.  It&#39;s not a particularly stable project (and Image Magick itself has been known to change a lot and even break compatibility).  That said, we&#39;ve had good experience using JMagick and a compatible version of Image Magick in a production environment to perform scaling at a high throughput, low latency rate.  Speed was substantially better then with an all Java graphics library that we previously tried.\r\n\r\nhttp://www.jmagick.org/index.html","title":"How can I resize an image using Java?","body":"<p>Image Magick has been mentioned.  There is a JNI front end project called JMagick.  It's not a particularly stable project (and Image Magick itself has been known to change a lot and even break compatibility).  That said, we've had good experience using JMagick and a compatible version of Image Magick in a production environment to perform scaling at a high throughput, low latency rate.  Speed was substantially better then with an all Java graphics library that we previously tried.</p>\n\n<p><a href=\"http://www.jmagick.org/index.html\" rel=\"nofollow\">http://www.jmagick.org/index.html</a></p>\n"},{"tags":[],"owner":{"account_id":1277827,"reputation":9,"user_id":1232688,"display_name":"Rohit Tiwari"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1330367126,"creation_date":1330264729,"answer_id":9453681,"question_id":244164,"body_markdown":"I have developed a solution with the freely available classes ( AnimatedGifEncoder, GifDecoder, and LWZEncoder) available for handling GIF Animation.  \r\nYou can download the jgifcode jar and run the GifImageUtil class.\r\nLink:  http://www.jgifcode.com","title":"How can I resize an image using Java?","body":"<p>I have developed a solution with the freely available classes ( AnimatedGifEncoder, GifDecoder, and LWZEncoder) available for handling GIF Animation.<br>\nYou can download the jgifcode jar and run the GifImageUtil class.\nLink:  <a href=\"http://www.jgifcode.com\" rel=\"nofollow\">http://www.jgifcode.com</a></p>\n"},{"tags":[],"owner":{"account_id":1316363,"reputation":11,"user_id":1263113,"display_name":"Robert"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1481201668,"creation_date":1331515867,"answer_id":9660714,"question_id":244164,"body_markdown":"You can use Marvin (pure Java image processing framework) for this kind of operation:\r\n http://marvinproject.sourceforge.net\r\n\r\nScale plug-in:\r\nhttp://marvinproject.sourceforge.net/en/plugins/scale.html","title":"How can I resize an image using Java?","body":"<p>You can use Marvin (pure Java image processing framework) for this kind of operation:\n <a href=\"http://marvinproject.sourceforge.net\" rel=\"nofollow noreferrer\">http://marvinproject.sourceforge.net</a></p>\n\n<p>Scale plug-in:\n<a href=\"http://marvinproject.sourceforge.net/en/plugins/scale.html\" rel=\"nofollow noreferrer\">http://marvinproject.sourceforge.net/en/plugins/scale.html</a></p>\n"},{"tags":[],"owner":{"account_id":1527510,"reputation":961,"user_id":1425564,"accept_rate":50,"display_name":"Ruju"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1516064141,"creation_date":1366268661,"answer_id":16076530,"question_id":244164,"body_markdown":"The Java API does not provide a standard scaling feature for images and downgrading image quality.\r\n\r\nBecause of this I tried to use cvResize from JavaCV but it seems to cause problems.\r\n\r\nI found a good library for image scaling: simply add the dependency for &quot;java-image-scaling&quot; in your pom.xml. \r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.mortennobel&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;java-image-scaling&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;0.8.6&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\nIn the maven repository you will get the recent version for this.\r\n\r\nEx. In your java program\r\n\r\n    ResampleOp resamOp = new ResampleOp(50, 40);\r\n    BufferedImage modifiedImage = resamOp.filter(originalBufferedImage, null);","title":"How can I resize an image using Java?","body":"<p>The Java API does not provide a standard scaling feature for images and downgrading image quality.</p>\n\n<p>Because of this I tried to use cvResize from JavaCV but it seems to cause problems.</p>\n\n<p>I found a good library for image scaling: simply add the dependency for \"java-image-scaling\" in your pom.xml. </p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.mortennobel&lt;/groupId&gt;\n    &lt;artifactId&gt;java-image-scaling&lt;/artifactId&gt;\n    &lt;version&gt;0.8.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>In the maven repository you will get the recent version for this.</p>\n\n<p>Ex. In your java program</p>\n\n<pre><code>ResampleOp resamOp = new ResampleOp(50, 40);\nBufferedImage modifiedImage = resamOp.filter(originalBufferedImage, null);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1424686210,"creation_date":1417680886,"answer_id":27289135,"question_id":244164,"body_markdown":"you can use following popular product: [thumbnailator][1]\r\n\r\n\r\n  [1]: https://code.google.com/p/thumbnailator/","title":"How can I resize an image using Java?","body":"<p>you can use following popular product: <a href=\"https://code.google.com/p/thumbnailator/\" rel=\"nofollow\">thumbnailator</a></p>\n"},{"tags":[],"owner":{"account_id":910640,"reputation":9353,"user_id":944593,"accept_rate":94,"display_name":"shareef"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1463240142,"creation_date":1463240142,"answer_id":37228567,"question_id":244164,"body_markdown":"If you dont want to import [imgScalr][1] like @Riyad Kalla answer above which i tested too works fine, you can do this \r\ntaken from [Peter Walser answer][2] @Peter Walser on another issue though:\r\n\r\n \r\n\r\n     /**\r\n         * utility method to get an icon from the resources of this class\r\n         * @param name the name of the icon\r\n         * @return the icon, or null if the icon wasn&#39;t found.\r\n         */\r\n        public Icon getIcon(String name) {\r\n            Icon icon = null;\r\n            URL url = null;\r\n            ImageIcon imgicon = null;\r\n            BufferedImage scaledImage = null;\r\n            try {\r\n                url = getClass().getResource(name);\r\n    \r\n                icon = new ImageIcon(url);\r\n                if (icon == null) {\r\n                    System.out.println(&quot;Couldn&#39;t find &quot; + url);\r\n                }\r\n    \r\n                BufferedImage bi = new BufferedImage(\r\n                        icon.getIconWidth(),\r\n                        icon.getIconHeight(),\r\n                        BufferedImage.TYPE_INT_RGB);\r\n                Graphics g = bi.createGraphics();\r\n                // paint the Icon to the BufferedImage.\r\n                icon.paintIcon(null, g, 0,0);\r\n                g.dispose();\r\n    \r\n                bi = resizeImage(bi,30,30);\r\n                scaledImage = bi;// or replace with this line Scalr.resize(bi, 30,30);\r\n                imgicon = new ImageIcon(scaledImage);\r\n    \r\n            } catch (Exception e) {\r\n                System.out.println(&quot;Couldn&#39;t find &quot; + getClass().getName() + &quot;/&quot; + name);\r\n                e.printStackTrace();\r\n            }\r\n            return imgicon;\r\n        }\r\n\r\n     public static BufferedImage resizeImage (BufferedImage image, int areaWidth, int areaHeight) {\r\n            float scaleX = (float) areaWidth / image.getWidth();\r\n            float scaleY = (float) areaHeight / image.getHeight();\r\n            float scale = Math.min(scaleX, scaleY);\r\n            int w = Math.round(image.getWidth() * scale);\r\n            int h = Math.round(image.getHeight() * scale);\r\n    \r\n            int type = image.getTransparency() == Transparency.OPAQUE ? BufferedImage.TYPE_INT_RGB : BufferedImage.TYPE_INT_ARGB;\r\n    \r\n            boolean scaleDown = scale &lt; 1;\r\n    \r\n            if (scaleDown) {\r\n                // multi-pass bilinear div 2\r\n                int currentW = image.getWidth();\r\n                int currentH = image.getHeight();\r\n                BufferedImage resized = image;\r\n                while (currentW &gt; w || currentH &gt; h) {\r\n                    currentW = Math.max(w, currentW / 2);\r\n                    currentH = Math.max(h, currentH / 2);\r\n    \r\n                    BufferedImage temp = new BufferedImage(currentW, currentH, type);\r\n                    Graphics2D g2 = temp.createGraphics();\r\n                    g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\r\n                    g2.drawImage(resized, 0, 0, currentW, currentH, null);\r\n                    g2.dispose();\r\n                    resized = temp;\r\n                }\r\n                return resized;\r\n            } else {\r\n                Object hint = scale &gt; 2 ? RenderingHints.VALUE_INTERPOLATION_BICUBIC : RenderingHints.VALUE_INTERPOLATION_BILINEAR;\r\n    \r\n                BufferedImage resized = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);\r\n                Graphics2D g2 = resized.createGraphics();\r\n                g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, hint);\r\n                g2.drawImage(image, 0, 0, w, h, null);\r\n                g2.dispose();\r\n                return resized;\r\n            }\r\n        }\r\n\r\n\r\n  [1]: https://github.com/thebuzzmedia/imgscalr\r\n  [2]: https://stackoverflow.com/questions/19654017/resizing-bufferedimages-and-storing-them-to-file-results-in-black-background-for","title":"How can I resize an image using Java?","body":"<p>If you dont want to import <a href=\"https://github.com/thebuzzmedia/imgscalr\" rel=\"nofollow noreferrer\">imgScalr</a> like @Riyad Kalla answer above which i tested too works fine, you can do this \ntaken from <a href=\"https://stackoverflow.com/questions/19654017/resizing-bufferedimages-and-storing-them-to-file-results-in-black-background-for\">Peter Walser answer</a> @Peter Walser on another issue though:</p>\n\n<pre><code> /**\n     * utility method to get an icon from the resources of this class\n     * @param name the name of the icon\n     * @return the icon, or null if the icon wasn't found.\n     */\n    public Icon getIcon(String name) {\n        Icon icon = null;\n        URL url = null;\n        ImageIcon imgicon = null;\n        BufferedImage scaledImage = null;\n        try {\n            url = getClass().getResource(name);\n\n            icon = new ImageIcon(url);\n            if (icon == null) {\n                System.out.println(\"Couldn't find \" + url);\n            }\n\n            BufferedImage bi = new BufferedImage(\n                    icon.getIconWidth(),\n                    icon.getIconHeight(),\n                    BufferedImage.TYPE_INT_RGB);\n            Graphics g = bi.createGraphics();\n            // paint the Icon to the BufferedImage.\n            icon.paintIcon(null, g, 0,0);\n            g.dispose();\n\n            bi = resizeImage(bi,30,30);\n            scaledImage = bi;// or replace with this line Scalr.resize(bi, 30,30);\n            imgicon = new ImageIcon(scaledImage);\n\n        } catch (Exception e) {\n            System.out.println(\"Couldn't find \" + getClass().getName() + \"/\" + name);\n            e.printStackTrace();\n        }\n        return imgicon;\n    }\n\n public static BufferedImage resizeImage (BufferedImage image, int areaWidth, int areaHeight) {\n        float scaleX = (float) areaWidth / image.getWidth();\n        float scaleY = (float) areaHeight / image.getHeight();\n        float scale = Math.min(scaleX, scaleY);\n        int w = Math.round(image.getWidth() * scale);\n        int h = Math.round(image.getHeight() * scale);\n\n        int type = image.getTransparency() == Transparency.OPAQUE ? BufferedImage.TYPE_INT_RGB : BufferedImage.TYPE_INT_ARGB;\n\n        boolean scaleDown = scale &lt; 1;\n\n        if (scaleDown) {\n            // multi-pass bilinear div 2\n            int currentW = image.getWidth();\n            int currentH = image.getHeight();\n            BufferedImage resized = image;\n            while (currentW &gt; w || currentH &gt; h) {\n                currentW = Math.max(w, currentW / 2);\n                currentH = Math.max(h, currentH / 2);\n\n                BufferedImage temp = new BufferedImage(currentW, currentH, type);\n                Graphics2D g2 = temp.createGraphics();\n                g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\n                g2.drawImage(resized, 0, 0, currentW, currentH, null);\n                g2.dispose();\n                resized = temp;\n            }\n            return resized;\n        } else {\n            Object hint = scale &gt; 2 ? RenderingHints.VALUE_INTERPOLATION_BICUBIC : RenderingHints.VALUE_INTERPOLATION_BILINEAR;\n\n            BufferedImage resized = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);\n            Graphics2D g2 = resized.createGraphics();\n            g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, hint);\n            g2.drawImage(image, 0, 0, w, h, null);\n            g2.dispose();\n            return resized;\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8940016,"reputation":89,"user_id":6669464,"display_name":"The One True Colter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1470336741,"creation_date":1470336741,"answer_id":38775238,"question_id":244164,"body_markdown":"Simply use Burkhard&#39;s answer but add this line after creating the graphics:\r\n\r\n        g.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\r\n\r\nYou could also set the value to BICUBIC, it will produce a better quality image but is a more expensive operation. There are other rendering hints you can set but I have found that interpolation produces the most notable effect.\r\nKeep in mind if you want to zoom in in a lot, java code most likely will be very slow. I find larger images start to produce lag around 300% zoom even with all rendering hints set to optimize for speed over quality.","title":"How can I resize an image using Java?","body":"<p>Simply use Burkhard's answer but add this line after creating the graphics:</p>\n\n<pre><code>    g.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\n</code></pre>\n\n<p>You could also set the value to BICUBIC, it will produce a better quality image but is a more expensive operation. There are other rendering hints you can set but I have found that interpolation produces the most notable effect.\nKeep in mind if you want to zoom in in a lot, java code most likely will be very slow. I find larger images start to produce lag around 300% zoom even with all rendering hints set to optimize for speed over quality.</p>\n"},{"tags":[],"owner":{"account_id":1238504,"reputation":648,"user_id":1201611,"display_name":"aanno"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1516028137,"creation_date":1516028137,"answer_id":48265426,"question_id":244164,"body_markdown":"It turns out that writing a performant scaler is not trivial. I did it once for an open source project: [ImageScaler][1].\r\n\r\nIn principle &#39;java.awt.Image#getScaledInstance(int, int, int)&#39; would do the job as well, but there is a nasty bug with this - refer to my link for details.\r\n\r\n  [1]: https://bitbucket.org/nuclos/nuclos/src/4744685e632dfdac79e3fd4a11a077a01654e9db/nuclos-client/src/main/java/org/nuclos/client/image/ImageScaler.java?at=master&amp;fileviewer=file-view-default &quot;ImageScaler&quot;","title":"How can I resize an image using Java?","body":"<p>It turns out that writing a performant scaler is not trivial. I did it once for an open source project: <a href=\"https://bitbucket.org/nuclos/nuclos/src/4744685e632dfdac79e3fd4a11a077a01654e9db/nuclos-client/src/main/java/org/nuclos/client/image/ImageScaler.java?at=master&amp;fileviewer=file-view-default\" rel=\"nofollow noreferrer\" title=\"ImageScaler\">ImageScaler</a>.</p>\n\n<p>In principle 'java.awt.Image#getScaledInstance(int, int, int)' would do the job as well, but there is a nasty bug with this - refer to my link for details.</p>\n"},{"tags":[],"owner":{"account_id":16722653,"reputation":121,"user_id":12087120,"display_name":"Fridjato Part Fridjat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1576449345,"creation_date":1576449020,"answer_id":59348618,"question_id":244164,"body_markdown":"Try this folowing method : \r\n\r\n    ImageIcon icon = new ImageIcon(&quot;image.png&quot;);\r\n    Image img = icon.getImage();\r\n    Image newImg = img.getScaledInstance(350, 350, java.evt.Image.SCALE_SMOOTH);\r\n    icon = new ImageIcon(img);\r\n    JOptionPane.showMessageDialog(null, &quot;image on The frame&quot;, &quot;Display Image&quot;, JOptionPane.INFORMATION_MESSAGE, icon);","title":"How can I resize an image using Java?","body":"<p>Try this folowing method : </p>\n\n<pre><code>ImageIcon icon = new ImageIcon(\"image.png\");\nImage img = icon.getImage();\nImage newImg = img.getScaledInstance(350, 350, java.evt.Image.SCALE_SMOOTH);\nicon = new ImageIcon(img);\nJOptionPane.showMessageDialog(null, \"image on The frame\", \"Display Image\", JOptionPane.INFORMATION_MESSAGE, icon);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2749570,"reputation":89,"user_id":2369244,"display_name":"Aqib Butt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647500195,"creation_date":1647500195,"answer_id":71508153,"question_id":244164,"body_markdown":"you can also use \r\n```\r\nProcess p = Runtime.getRuntime().exec(&quot;convert &quot; + origPath + &quot; -resize 75% -quality 70 &quot; + largePath + &quot;&quot;);\r\n            p.waitFor();\r\n```","title":"How can I resize an image using Java?","body":"<p>you can also use</p>\n<pre><code>Process p = Runtime.getRuntime().exec(&quot;convert &quot; + origPath + &quot; -resize 75% -quality 70 &quot; + largePath + &quot;&quot;);\n            p.waitFor();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25476590,"reputation":51,"user_id":19273724,"display_name":"Ruwan Pathirana"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662749052,"creation_date":1662749052,"answer_id":73666348,"question_id":244164,"body_markdown":"Design jLabel first:\r\n\r\n    JLabel label1 = new JLabel(&quot;&quot;);\r\n\tlabel1.setHorizontalAlignment(SwingConstants.CENTER);\r\n\tlabel1.setBounds(628, 28, 169, 125);\r\n\tframe1.getContentPane().add(label1);   //frame1 = &quot;Jframe name&quot;\r\n\r\nThen you can code below code(add your own height and width):\r\n\r\n    ImageIcon imageIcon1 = new ImageIcon(new ImageIcon(&quot;add location url&quot;).getImage().getScaledInstance(100, 100, Image.SCALE_DEFAULT)); //100, 100 add your own size\r\n\tlabel1.setIcon(imageIcon1);\r\n","title":"How can I resize an image using Java?","body":"<p>Design jLabel first:</p>\n<pre><code>JLabel label1 = new JLabel(&quot;&quot;);\nlabel1.setHorizontalAlignment(SwingConstants.CENTER);\nlabel1.setBounds(628, 28, 169, 125);\nframe1.getContentPane().add(label1);   //frame1 = &quot;Jframe name&quot;\n</code></pre>\n<p>Then you can code below code(add your own height and width):</p>\n<pre><code>ImageIcon imageIcon1 = new ImageIcon(new ImageIcon(&quot;add location url&quot;).getImage().getScaledInstance(100, 100, Image.SCALE_DEFAULT)); //100, 100 add your own size\nlabel1.setIcon(imageIcon1);\n</code></pre>\n"}],"owner":{"account_id":1506,"reputation":14226,"user_id":2011,"accept_rate":78,"display_name":"pbreault"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":172020,"favorite_count":0,"down_vote_count":1,"up_vote_count":132,"accepted_answer_id":244177,"answer_count":19,"score":131,"last_activity_date":1662749052,"creation_date":1225215972,"question_id":244164,"body_markdown":"I need to resize PNG, JPEG and GIF files. How can I do this using Java?","title":"How can I resize an image using Java?","body":"<p>I need to resize PNG, JPEG and GIF files. How can I do this using Java?</p>\n"},{"tags":["java","spring-boot","spring-profiles"],"answers":[{"tags":[],"owner":{"account_id":1284041,"reputation":3613,"user_id":1237490,"accept_rate":100,"display_name":"Jaydeep Rajput"},"down_vote_count":1,"up_vote_count":9,"is_accepted":true,"score":8,"last_activity_date":1491245269,"creation_date":1491245269,"answer_id":43192124,"question_id":43191729,"body_markdown":"Yes. Its possible to have spring profiles in spring boot.\r\nFor your problem, put your common database configuration in application.yml(default profile).\r\n\r\nAnd you can override the other properties in application-stage.yml.\r\n\r\nSpring will read the properties from application.yml and override from application-stage.yml when active profile is **stage**.\r\n\r\n\r\n","title":"Profile Inheritage In spring boot","body":"<p>Yes. Its possible to have spring profiles in spring boot.\nFor your problem, put your common database configuration in application.yml(default profile).</p>\n\n<p>And you can override the other properties in application-stage.yml.</p>\n\n<p>Spring will read the properties from application.yml and override from application-stage.yml when active profile is <strong>stage</strong>.</p>\n"},{"tags":[],"owner":{"account_id":175608,"reputation":529,"user_id":405749,"display_name":"elonderin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662748937,"creation_date":1551876851,"answer_id":55023617,"question_id":43191729,"body_markdown":"### TL;DR\r\nThe *active* profiles will cause respective `application-$profile.properties` to be read (if they exist) in the order the active profiles are defined. Later read properties override earlier ones. That will give you the means to do smth. like an hierarchy.\r\n\r\n### Long Version\r\nThere is no such thing as profile-*inheritance* in spring but it can be mimicked as written in the answer by JRR.\r\n\r\nFor how it actually works read: https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-profile-specific-properties.","title":"Profile Inheritage In spring boot","body":"<h3>TL;DR</h3>\n<p>The <em>active</em> profiles will cause respective <code>application-$profile.properties</code> to be read (if they exist) in the order the active profiles are defined. Later read properties override earlier ones. That will give you the means to do smth. like an hierarchy.</p>\n<h3>Long Version</h3>\n<p>There is no such thing as profile-<em>inheritance</em> in spring but it can be mimicked as written in the answer by JRR.</p>\n<p>For how it actually works read: <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-profile-specific-properties\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-profile-specific-properties</a>.</p>\n"}],"owner":{"account_id":2198886,"reputation":2683,"user_id":1943856,"accept_rate":89,"display_name":"gkatzioura"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6706,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":43192124,"answer_count":2,"score":7,"last_activity_date":1662748937,"creation_date":1491243797,"question_id":43191729,"body_markdown":"Is it possible to have a profile in spring boot and also another profile that inherits most of the parent values and beans?\r\n\r\nFor example I have two profiles \r\nstaging and staging-task.\r\nI want staging-task to inherit the database configuration of the staging profile however I want it to override the jpa configuration.\r\n\r\nIs profile inheritance available to @Configuration beans.","title":"Profile Inheritage In spring boot","body":"<p>Is it possible to have a profile in spring boot and also another profile that inherits most of the parent values and beans?</p>\n\n<p>For example I have two profiles \nstaging and staging-task.\nI want staging-task to inherit the database configuration of the staging profile however I want it to override the jpa configuration.</p>\n\n<p>Is profile inheritance available to @Configuration beans.</p>\n"},{"tags":["java","swing","user-interface","image"],"comments":[{"owner":{"account_id":287824,"reputation":38852,"user_id":587884,"accept_rate":86,"display_name":"Heisenbug"},"score":1,"creation_date":1304589775,"post_id":5895829,"comment_id":6783805,"body_markdown":"What exactly do you not understand of that snippet?","body":"What exactly do you not understand of that snippet?"},{"owner":{"account_id":335769,"reputation":4439,"user_id":663030,"accept_rate":91,"display_name":"dcn"},"score":1,"creation_date":1304589831,"post_id":5895829,"comment_id":6783822,"body_markdown":"Do you want to generate a resized version of the original png, or just paint a resized version somewhere in your UI?","body":"Do you want to generate a resized version of the original png, or just paint a resized version somewhere in your UI?"}],"answers":[{"tags":[],"owner":{"account_id":269622,"reputation":58936,"user_id":559070,"accept_rate":74,"display_name":"Harry Joy"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1304589781,"creation_date":1304589781,"answer_id":5895862,"question_id":5895829,"body_markdown":"Try this:\r\n\r\n    ImageIcon icon = new ImageIcon(UrlToPngFile);\r\n    Image scaleImage = icon.getImage().getScaledInstance(28, 28,Image.SCALE_DEFAULT);","title":"Resizing image in Java","body":"<p>Try this:</p>\n\n<pre><code>ImageIcon icon = new ImageIcon(UrlToPngFile);\nImage scaleImage = icon.getImage().getScaledInstance(28, 28,Image.SCALE_DEFAULT);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1304589797,"creation_date":1304589797,"answer_id":5895864,"question_id":5895829,"body_markdown":"We&#39;re doing this to create thumbnails of images:\r\n\r\n      BufferedImage tThumbImage = new BufferedImage( tThumbWidth, tThumbHeight, BufferedImage.TYPE_INT_RGB );\r\n      Graphics2D tGraphics2D = tThumbImage.createGraphics(); //create a graphics object to paint to\r\n      tGraphics2D.setBackground( Color.WHITE );\r\n      tGraphics2D.setPaint( Color.WHITE );\r\n      tGraphics2D.fillRect( 0, 0, tThumbWidth, tThumbHeight );\r\n      tGraphics2D.setRenderingHint( RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR );\r\n      tGraphics2D.drawImage( tOriginalImage, 0, 0, tThumbWidth, tThumbHeight, null ); //draw the image scaled\r\n\r\n      ImageIO.write( tThumbImage, &quot;JPG&quot;, tThumbnailTarget ); //write the image to a file","title":"Resizing image in Java","body":"<p>We're doing this to create thumbnails of images:</p>\n\n<pre><code>  BufferedImage tThumbImage = new BufferedImage( tThumbWidth, tThumbHeight, BufferedImage.TYPE_INT_RGB );\n  Graphics2D tGraphics2D = tThumbImage.createGraphics(); //create a graphics object to paint to\n  tGraphics2D.setBackground( Color.WHITE );\n  tGraphics2D.setPaint( Color.WHITE );\n  tGraphics2D.fillRect( 0, 0, tThumbWidth, tThumbHeight );\n  tGraphics2D.setRenderingHint( RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR );\n  tGraphics2D.drawImage( tOriginalImage, 0, 0, tThumbWidth, tThumbHeight, null ); //draw the image scaled\n\n  ImageIO.write( tThumbImage, \"JPG\", tThumbnailTarget ); //write the image to a file\n</code></pre>\n"},{"tags":[],"owner":{"account_id":365809,"reputation":4497,"user_id":710951,"accept_rate":75,"display_name":"Alba Mendez"},"down_vote_count":0,"up_vote_count":91,"is_accepted":true,"score":91,"last_activity_date":1641847704,"creation_date":1304591575,"answer_id":5896284,"question_id":5895829,"body_markdown":"If you have an `java.awt.Image`, resizing it doesn&#39;t require **any** additional libraries. Just do:\r\n\r\n    Image newImage = yourImage.getScaledInstance(newWidth, newHeight, Image.SCALE_DEFAULT);\r\n\r\nObviously, **replace** `newWidth` and `newHeight` with the dimensions of the specified image.  \r\nNotice the last parameter: it tells the runtime the **algorithm** you want to use for resizing.\r\n\r\nThere are algorithms that produce a very precise result, however these take a large time to complete.  \r\nYou can use any of the following algorithms:\r\n\r\n - &lt;a href=&quot;http://download.oracle.com/javase/6/docs/api/java/awt/Image.html#SCALE_AREA_AVERAGING&quot;&gt;`Image.SCALE_DEFAULT`&lt;/a&gt;: Use the default image-scaling algorithm.\r\n - &lt;a href=&quot;http://download.oracle.com/javase/6/docs/api/java/awt/Image.html#SCALE_AREA_AVERAGING&quot;&gt;`Image.SCALE_FAST`&lt;/a&gt;: Choose an image-scaling algorithm that gives higher priority to scaling speed than smoothness of the scaled image.\r\n - &lt;a href=&quot;http://download.oracle.com/javase/6/docs/api/java/awt/Image.html#SCALE_AREA_AVERAGING&quot;&gt;`Image.SCALE_SMOOTH`&lt;/a&gt;: Choose an image-scaling algorithm that gives higher priority to image smoothness than scaling speed.\r\n - &lt;a href=&quot;http://download.oracle.com/javase/6/docs/api/java/awt/Image.html#SCALE_AREA_AVERAGING&quot;&gt;`Image.SCALE_AREA_AVERAGING`&lt;/a&gt;: Use the Area Averaging image scaling algorithm.\r\n - &lt;a href=&quot;http://download.oracle.com/javase/6/docs/api/java/awt/Image.html#SCALE_AREA_AVERAGING&quot;&gt;`Image.SCALE_REPLICATE`&lt;/a&gt;: Use the image scaling algorithm embodied in the `ReplicateScaleFilter` class.\r\n\r\n\r\nSee the &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/awt/Image.html#getScaledInstance-int-int-int-&quot;&gt;Javadoc&lt;/a&gt; for more info.\r\n","title":"Resizing image in Java","body":"<p>If you have an <code>java.awt.Image</code>, resizing it doesn't require <strong>any</strong> additional libraries. Just do:</p>\n<pre><code>Image newImage = yourImage.getScaledInstance(newWidth, newHeight, Image.SCALE_DEFAULT);\n</code></pre>\n<p>Obviously, <strong>replace</strong> <code>newWidth</code> and <code>newHeight</code> with the dimensions of the specified image.<br />\nNotice the last parameter: it tells the runtime the <strong>algorithm</strong> you want to use for resizing.</p>\n<p>There are algorithms that produce a very precise result, however these take a large time to complete.<br />\nYou can use any of the following algorithms:</p>\n<ul>\n<li><a href=\"http://download.oracle.com/javase/6/docs/api/java/awt/Image.html#SCALE_AREA_AVERAGING\" rel=\"nofollow noreferrer\"><code>Image.SCALE_DEFAULT</code></a>: Use the default image-scaling algorithm.</li>\n<li><a href=\"http://download.oracle.com/javase/6/docs/api/java/awt/Image.html#SCALE_AREA_AVERAGING\" rel=\"nofollow noreferrer\"><code>Image.SCALE_FAST</code></a>: Choose an image-scaling algorithm that gives higher priority to scaling speed than smoothness of the scaled image.</li>\n<li><a href=\"http://download.oracle.com/javase/6/docs/api/java/awt/Image.html#SCALE_AREA_AVERAGING\" rel=\"nofollow noreferrer\"><code>Image.SCALE_SMOOTH</code></a>: Choose an image-scaling algorithm that gives higher priority to image smoothness than scaling speed.</li>\n<li><a href=\"http://download.oracle.com/javase/6/docs/api/java/awt/Image.html#SCALE_AREA_AVERAGING\" rel=\"nofollow noreferrer\"><code>Image.SCALE_AREA_AVERAGING</code></a>: Use the Area Averaging image scaling algorithm.</li>\n<li><a href=\"http://download.oracle.com/javase/6/docs/api/java/awt/Image.html#SCALE_AREA_AVERAGING\" rel=\"nofollow noreferrer\"><code>Image.SCALE_REPLICATE</code></a>: Use the image scaling algorithm embodied in the <code>ReplicateScaleFilter</code> class.</li>\n</ul>\n<p>See the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/awt/Image.html#getScaledInstance-int-int-int-\" rel=\"nofollow noreferrer\">Javadoc</a> for more info.</p>\n"},{"tags":[],"owner":{"account_id":3720377,"reputation":1016,"user_id":3095589,"display_name":"Radadiya Nikunj"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1553695059,"creation_date":1553693171,"answer_id":55378350,"question_id":5895829,"body_markdown":"Resize image with high quality:\r\n\r\n    private static InputStream resizeImage(InputStream uploadedInputStream, String fileName, int width, int height) {\r\n    \r\n            try {\r\n                BufferedImage image = ImageIO.read(uploadedInputStream);\r\n                Image originalImage= image.getScaledInstance(width, height, Image.SCALE_DEFAULT);\r\n    \r\n                int type = ((image.getType() == 0) ? BufferedImage.TYPE_INT_ARGB : image.getType());\r\n                BufferedImage resizedImage = new BufferedImage(width, height, type);\r\n    \r\n                Graphics2D g2d = resizedImage.createGraphics();\r\n                g2d.drawImage(originalImage, 0, 0, width, height, null);\r\n                g2d.dispose();\r\n                g2d.setComposite(AlphaComposite.Src);\r\n                g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION,RenderingHints.VALUE_INTERPOLATION_BILINEAR);\r\n                g2d.setRenderingHint(RenderingHints.KEY_RENDERING,RenderingHints.VALUE_RENDER_QUALITY);\r\n                g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);\r\n    \r\n                ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\r\n    \r\n                ImageIO.write(resizedImage, fileName.split(&quot;\\\\.&quot;)[1], byteArrayOutputStream);\r\n                return new ByteArrayInputStream(byteArrayOutputStream.toByteArray());\r\n            } catch (IOException e) {\r\n    \t\t\t// Something is going wrong while resizing image\r\n                return uploadedInputStream;\r\n            }\r\n        }\r\n\t","title":"Resizing image in Java","body":"<p>Resize image with high quality:</p>\n\n<pre><code>private static InputStream resizeImage(InputStream uploadedInputStream, String fileName, int width, int height) {\n\n        try {\n            BufferedImage image = ImageIO.read(uploadedInputStream);\n            Image originalImage= image.getScaledInstance(width, height, Image.SCALE_DEFAULT);\n\n            int type = ((image.getType() == 0) ? BufferedImage.TYPE_INT_ARGB : image.getType());\n            BufferedImage resizedImage = new BufferedImage(width, height, type);\n\n            Graphics2D g2d = resizedImage.createGraphics();\n            g2d.drawImage(originalImage, 0, 0, width, height, null);\n            g2d.dispose();\n            g2d.setComposite(AlphaComposite.Src);\n            g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION,RenderingHints.VALUE_INTERPOLATION_BILINEAR);\n            g2d.setRenderingHint(RenderingHints.KEY_RENDERING,RenderingHints.VALUE_RENDER_QUALITY);\n            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);\n\n            ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\n\n            ImageIO.write(resizedImage, fileName.split(\"\\\\.\")[1], byteArrayOutputStream);\n            return new ByteArrayInputStream(byteArrayOutputStream.toByteArray());\n        } catch (IOException e) {\n            // Something is going wrong while resizing image\n            return uploadedInputStream;\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12898503,"reputation":2596,"user_id":9328117,"display_name":"Shahid Hussain Abbasi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1606933759,"creation_date":1587533020,"answer_id":61357835,"question_id":5895829,"body_markdown":"Simple way in Java\r\n\r\n    public void resize(String inputImagePath,\r\n                String outputImagePath, int scaledWidth, int scaledHeight)\r\n                throws IOException {\r\n            // reads input image\r\n            File inputFile = new File(inputImagePath);\r\n            BufferedImage inputImage = ImageIO.read(inputFile);\r\n     \r\n            // creates output image\r\n            BufferedImage outputImage = new BufferedImage(scaledWidth,\r\n                    scaledHeight, inputImage.getType());\r\n     \r\n            // scales the input image to the output image\r\n            Graphics2D g2d = outputImage.createGraphics();\r\n            g2d.drawImage(inputImage, 0, 0, scaledWidth, scaledHeight, null);\r\n            g2d.dispose();\r\n     \r\n            // extracts extension of output file\r\n            String formatName = outputImagePath.substring(outputImagePath\r\n                    .lastIndexOf(&quot;.&quot;) + 1);\r\n     \r\n            // writes to output file\r\n            ImageIO.write(outputImage, formatName, new File(outputImagePath));\r\n        }","title":"Resizing image in Java","body":"<p>Simple way in Java</p>\n<pre><code>public void resize(String inputImagePath,\n            String outputImagePath, int scaledWidth, int scaledHeight)\n            throws IOException {\n        // reads input image\n        File inputFile = new File(inputImagePath);\n        BufferedImage inputImage = ImageIO.read(inputFile);\n \n        // creates output image\n        BufferedImage outputImage = new BufferedImage(scaledWidth,\n                scaledHeight, inputImage.getType());\n \n        // scales the input image to the output image\n        Graphics2D g2d = outputImage.createGraphics();\n        g2d.drawImage(inputImage, 0, 0, scaledWidth, scaledHeight, null);\n        g2d.dispose();\n \n        // extracts extension of output file\n        String formatName = outputImagePath.substring(outputImagePath\n                .lastIndexOf(&quot;.&quot;) + 1);\n \n        // writes to output file\n        ImageIO.write(outputImage, formatName, new File(outputImagePath));\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14943891,"reputation":1727,"user_id":10789722,"display_name":"MEGHA RAMOLIYA"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1588839008,"creation_date":1588839008,"answer_id":61652874,"question_id":5895829,"body_markdown":"                int newHeight = 150;\r\n                int newWidth = 150; \r\n                holder.iv_arrow.requestLayout();\r\n                holder.iv_arrow.getLayoutParams().height = newHeight;\r\n                holder.iv_arrow.getLayoutParams().width = newWidth;\r\n                holder.iv_arrow.setScaleType(ImageView.ScaleType.FIT_XY);\r\n                holder.iv_arrow.setImageResource(R.drawable.video_menu);","title":"Resizing image in Java","body":"<pre><code>            int newHeight = 150;\n            int newWidth = 150; \n            holder.iv_arrow.requestLayout();\n            holder.iv_arrow.getLayoutParams().height = newHeight;\n            holder.iv_arrow.getLayoutParams().width = newWidth;\n            holder.iv_arrow.setScaleType(ImageView.ScaleType.FIT_XY);\n            holder.iv_arrow.setImageResource(R.drawable.video_menu);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25476590,"reputation":51,"user_id":19273724,"display_name":"Ruwan Pathirana"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662748869,"creation_date":1662748869,"answer_id":73666317,"question_id":5895829,"body_markdown":"Design jLabel first:\r\n\r\n    JLabel label1 = new JLabel(&quot;&quot;);\r\n\tlabel1.setHorizontalAlignment(SwingConstants.CENTER);\r\n\tlabel1.setBounds(628, 28, 169, 125);\r\n\tframe1.getContentPane().add(label1);   //frame1 = &quot;Jframe name&quot;\r\n\r\nThen you can code below code:\r\n\r\n    ImageIcon imageIcon1 = new ImageIcon(new ImageIcon(&quot;add location url&quot;).getImage().getScaledInstance(100, 100, Image.SCALE_DEFAULT)); //100, 100 add your own size\r\n\tlabel1.setIcon(imageIcon1);","title":"Resizing image in Java","body":"<p>Design jLabel first:</p>\n<pre><code>JLabel label1 = new JLabel(&quot;&quot;);\nlabel1.setHorizontalAlignment(SwingConstants.CENTER);\nlabel1.setBounds(628, 28, 169, 125);\nframe1.getContentPane().add(label1);   //frame1 = &quot;Jframe name&quot;\n</code></pre>\n<p>Then you can code below code:</p>\n<pre><code>ImageIcon imageIcon1 = new ImageIcon(new ImageIcon(&quot;add location url&quot;).getImage().getScaledInstance(100, 100, Image.SCALE_DEFAULT)); //100, 100 add your own size\nlabel1.setIcon(imageIcon1);\n</code></pre>\n"}],"owner":{"account_id":326393,"reputation":22554,"user_id":648138,"accept_rate":68,"display_name":"Suhail Gupta"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":183446,"favorite_count":0,"down_vote_count":0,"up_vote_count":41,"accepted_answer_id":5896284,"answer_count":7,"score":41,"last_activity_date":1662748869,"creation_date":1304589581,"question_id":5895829,"body_markdown":"I have a PNG image and I want to resize it. How can I do that? Though I have gone through [this][1] I can&#39;t understand the snippet.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/244164/resize-an-image-in-java-any-open-source-library/4528136#4528136","title":"Resizing image in Java","body":"<p>I have a PNG image and I want to resize it. How can I do that? Though I have gone through <a href=\"https://stackoverflow.com/questions/244164/resize-an-image-in-java-any-open-source-library/4528136#4528136\">this</a> I can't understand the snippet.</p>\n"},{"tags":["java","performance","object"],"comments":[{"owner":{"account_id":60521,"reputation":34336,"user_id":180719,"accept_rate":88,"display_name":"Olivier Gr&#233;goire"},"score":0,"creation_date":1662747482,"post_id":73666086,"comment_id":130085722,"body_markdown":"You do whatever you want as long as it&#39;s readable. For instance `thisIsAVeryLongMethodNameForDoingSomething(letsCreateAnObjectInThisMethodWithAVeryLongName())` is unreadable. Just use your common sense.","body":"You do whatever you want as long as it&#39;s readable. For instance <code>thisIsAVeryLongMethodNameForDoingSomething(letsCreateAnObjec&zwnj;&#8203;tInThisMethodWithAVe&zwnj;&#8203;ryLongName())</code> is unreadable. Just use your common sense."}],"answers":[{"tags":[],"owner":{"account_id":16632079,"reputation":2166,"user_id":16547945,"display_name":"Vojin Purić"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662748432,"creation_date":1662748432,"answer_id":73666244,"question_id":73666086,"body_markdown":"Short answer would be: **in your case they are the same**\r\n\r\nGenerally speaking function calls are expensive. Each call puts stuff on the call stack, jumps the instruction pointer around and creates the rough equivalent of brand new variables anyway. So meaning that if you can avoid calling function multiple times by using a variable you can actually be more efficient by calling it once and storing it in variable. So in your example it is pretty much the same. And in general if are sacrificing much readability for a micro optimization it is not usually worth it","title":"Java best practice and performance when using method output as input for another method","body":"<p>Short answer would be: <strong>in your case they are the same</strong></p>\n<p>Generally speaking function calls are expensive. Each call puts stuff on the call stack, jumps the instruction pointer around and creates the rough equivalent of brand new variables anyway. So meaning that if you can avoid calling function multiple times by using a variable you can actually be more efficient by calling it once and storing it in variable. So in your example it is pretty much the same. And in general if are sacrificing much readability for a micro optimization it is not usually worth it</p>\n"},{"tags":[],"owner":{"account_id":3713839,"reputation":2046,"user_id":3090506,"display_name":"Moritz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662748761,"creation_date":1662748761,"answer_id":73666293,"question_id":73666086,"body_markdown":"There might be a _theoretical_ performance impact, as the first example you mentioned will produce slightly more ops in the bytecode (you can check this with `javap -c Test.class`):\r\n```\r\nCode:\r\n       0: invokestatic  #19                 // Method generate:()Ljava/lang/Object;\r\n       3: astore_1\r\n       4: aload_1\r\n       5: invokestatic  #25                 // Method use:(Ljava/lang/Object;)V\r\n       8: return\r\n```\r\n\r\nAs opposed to your second example:\r\n```\r\nCode:\r\n       0: invokestatic  #19                 // Method generate:()Ljava/lang/Object;\r\n       3: invokestatic  #25                 // Method use:(Ljava/lang/Object;)V\r\n       6: return\r\n```\r\n\r\nIn practice, there won&#39;t be any difference or performance issues.\r\n\r\nBest practice is what is most readable.","title":"Java best practice and performance when using method output as input for another method","body":"<p>There might be a <em>theoretical</em> performance impact, as the first example you mentioned will produce slightly more ops in the bytecode (you can check this with <code>javap -c Test.class</code>):</p>\n<pre><code>Code:\n       0: invokestatic  #19                 // Method generate:()Ljava/lang/Object;\n       3: astore_1\n       4: aload_1\n       5: invokestatic  #25                 // Method use:(Ljava/lang/Object;)V\n       8: return\n</code></pre>\n<p>As opposed to your second example:</p>\n<pre><code>Code:\n       0: invokestatic  #19                 // Method generate:()Ljava/lang/Object;\n       3: invokestatic  #25                 // Method use:(Ljava/lang/Object;)V\n       6: return\n</code></pre>\n<p>In practice, there won't be any difference or performance issues.</p>\n<p>Best practice is what is most readable.</p>\n"}],"owner":{"account_id":17279428,"reputation":70,"user_id":12513354,"display_name":"sam"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73666293,"answer_count":2,"score":0,"last_activity_date":1662748761,"creation_date":1662747315,"question_id":73666086,"body_markdown":"Consider two methods in Java, one generates an object as output that is used as an input for another method like so:\r\n\r\n```\r\n// method 1 generating the input for method 2\r\npublic Object generate()  {\r\n    return new Object();\r\n}\r\n\r\n// method 2 using the output of method 1 as input\r\npublic void use(Object o) {\r\n    // ...\r\n}\r\n```\r\n\r\nFor chaining these methods there are now two obvious options:\r\n\r\n1) Store the output of the ```generate()``` method in a new object and pass that object to the ```use()``` method:\r\n```\r\nObject o = generate();\r\nuse(o);\r\n```\r\n\r\n2) Call the ```generate()``` method directly inside the parenthesis of the ```use()``` method:\r\n```\r\nuse(generate());\r\n```\r\n\r\nI am personally in favor of option 1) because this code is much clearer to me. There is only a single thing happening in each line which makes it easier for other programmers to understand the code. When I started programming, everyone was keen on writing code in as few lines as possible but now I prefer more lines over few if this helps to make the code easier to understand.\r\n\r\nAre there performance issues when using option 1) instead of option 2)? \r\n\r\nAs far as I understand the principles of Java, the Object generated by the ```generate()``` method has to allocate memory regardless and assigning it explicitly to a variable will only create a new pointer to this object which should not impact performance. Is this assumption correct?","title":"Java best practice and performance when using method output as input for another method","body":"<p>Consider two methods in Java, one generates an object as output that is used as an input for another method like so:</p>\n<pre><code>// method 1 generating the input for method 2\npublic Object generate()  {\n    return new Object();\n}\n\n// method 2 using the output of method 1 as input\npublic void use(Object o) {\n    // ...\n}\n</code></pre>\n<p>For chaining these methods there are now two obvious options:</p>\n<ol>\n<li>Store the output of the <code>generate()</code> method in a new object and pass that object to the <code>use()</code> method:</li>\n</ol>\n<pre><code>Object o = generate();\nuse(o);\n</code></pre>\n<ol start=\"2\">\n<li>Call the <code>generate()</code> method directly inside the parenthesis of the <code>use()</code> method:</li>\n</ol>\n<pre><code>use(generate());\n</code></pre>\n<p>I am personally in favor of option 1) because this code is much clearer to me. There is only a single thing happening in each line which makes it easier for other programmers to understand the code. When I started programming, everyone was keen on writing code in as few lines as possible but now I prefer more lines over few if this helps to make the code easier to understand.</p>\n<p>Are there performance issues when using option 1) instead of option 2)?</p>\n<p>As far as I understand the principles of Java, the Object generated by the <code>generate()</code> method has to allocate memory regardless and assigning it explicitly to a variable will only create a new pointer to this object which should not impact performance. Is this assumption correct?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":39405,"reputation":8280,"user_id":113608,"accept_rate":100,"display_name":"fixmycode"},"score":0,"creation_date":1569656558,"post_id":58144288,"comment_id":102674098,"body_markdown":"this is not a proper answer to your first question, but: you can&#39;t, the size of an array is fixed, and you can&#39;t change it if you&#39;ve already declared it. you&#39;d need to declare that array again, or extend it by creating other array.\n\nyou&#39;re overengineering this problem, you don&#39;t need to save the words in memory, you just need to print them. scan a word, print, that&#39;s what the example below is showing you.","body":"this is not a proper answer to your first question, but: you can&#39;t, the size of an array is fixed, and you can&#39;t change it if you&#39;ve already declared it. you&#39;d need to declare that array again, or extend it by creating other array.  you&#39;re overengineering this problem, you don&#39;t need to save the words in memory, you just need to print them. scan a word, print, that&#39;s what the example below is showing you."},{"owner":{"account_id":8753471,"reputation":532,"user_id":8259290,"display_name":"Martin&#39;sRun"},"score":0,"creation_date":1569657088,"post_id":58144288,"comment_id":102674185,"body_markdown":"&gt; how can an array of size 3 (userInputSplitFirstLine) and an array of size 2 (userInputSplitSecondLine) can hold more than 3 and 2 elements, respectively?\n\nIt cant, userInput.split creates a new array whose size depends on the number of splits it it gets, which in your case is the number of words. The two arrays or size 2 and 3 that you created are discarded without use.","body":"&gt; how can an array of size 3 (userInputSplitFirstLine) and an array of size 2 (userInputSplitSecondLine) can hold more than 3 and 2 elements, respectively?  It cant, userInput.split creates a new array whose size depends on the number of splits it it gets, which in your case is the number of words. The two arrays or size 2 and 3 that you created are discarded without use."}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1569657391,"creation_date":1569657391,"answer_id":58144442,"question_id":58144288,"body_markdown":"&gt; My first question is how can an array of size 3 (userInputSplitFirstLine) and an array of size 2 (userInputSplitSecondLine) can hold more than 3 and 2 elements, respectively?\r\n\r\nThe array here:\r\n\r\n    String[] userInputSplitFirstLine = new String[3];\r\n\r\nis not the same one as the one you got from `split`:\r\n\r\n    userInputSplitFirstLine = userInput.split(&quot;\\\\s+&quot;);\r\n\r\nWhen you do the above assignment, the old array that was in there is basically &quot;overwritten&quot;, and now `userInputSplitFirstLine` refers to this new array that has a length independent of what the old array had. `split` _always_ return a new array.\r\n\r\n&gt; My second question is that how can I restrict/limit the number of words that the user can insert in a line; for example, the first line only accepts 3 words and the second line only accepts 2 words?\r\n\r\nIt really depends on what you mean by &quot;restrict&quot;. If you just want to check if there are exactly three words, and if not, exit the program, you can do this:\r\n\r\n    userInputSplitFirstLine = userInput.split(&quot;\\\\s+&quot;);\r\n    if (userInputSplitFirstLine.length != 3) {\r\n        System.out.println(&quot;Please enter exactly 3 words!&quot;);\r\n        return;\r\n    }\r\n\r\nYou can do something similar with the second line.\r\n\r\nIf you want the user to be unable to type more than 3 words, then that&#39;s impossible, because this is a command line app.\r\n\r\nBy the way, the code in the suggested solution works because `next()` returns the next &quot;word&quot; (or what we generally think of as a word, anyway) by default.","title":"How to limit the number of words when reading a line from standard input?","body":"<blockquote>\n  <p>My first question is how can an array of size 3 (userInputSplitFirstLine) and an array of size 2 (userInputSplitSecondLine) can hold more than 3 and 2 elements, respectively?</p>\n</blockquote>\n\n<p>The array here:</p>\n\n<pre><code>String[] userInputSplitFirstLine = new String[3];\n</code></pre>\n\n<p>is not the same one as the one you got from <code>split</code>:</p>\n\n<pre><code>userInputSplitFirstLine = userInput.split(\"\\\\s+\");\n</code></pre>\n\n<p>When you do the above assignment, the old array that was in there is basically \"overwritten\", and now <code>userInputSplitFirstLine</code> refers to this new array that has a length independent of what the old array had. <code>split</code> <em>always</em> return a new array.</p>\n\n<blockquote>\n  <p>My second question is that how can I restrict/limit the number of words that the user can insert in a line; for example, the first line only accepts 3 words and the second line only accepts 2 words?</p>\n</blockquote>\n\n<p>It really depends on what you mean by \"restrict\". If you just want to check if there are exactly three words, and if not, exit the program, you can do this:</p>\n\n<pre><code>userInputSplitFirstLine = userInput.split(\"\\\\s+\");\nif (userInputSplitFirstLine.length != 3) {\n    System.out.println(\"Please enter exactly 3 words!\");\n    return;\n}\n</code></pre>\n\n<p>You can do something similar with the second line.</p>\n\n<p>If you want the user to be unable to type more than 3 words, then that's impossible, because this is a command line app.</p>\n\n<p>By the way, the code in the suggested solution works because <code>next()</code> returns the next \"word\" (or what we generally think of as a word, anyway) by default.</p>\n"},{"tags":[],"owner":{"account_id":11066038,"reputation":412,"user_id":8125832,"display_name":"rajender kumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1569657829,"creation_date":1569657829,"answer_id":58144478,"question_id":58144288,"body_markdown":"You can use next method of scanner object to read string and then it can be printed easily on new line.\r\n\r\n    while(true){\r\n                if(scanner.hasNext()){\r\n                    System.out.println(scanner.next());\r\n                }\r\n                else{\r\n                    break;\r\n                }\r\n    }","title":"How to limit the number of words when reading a line from standard input?","body":"<p>You can use next method of scanner object to read string and then it can be printed easily on new line.</p>\n\n<pre><code>while(true){\n            if(scanner.hasNext()){\n                System.out.println(scanner.next());\n            }\n            else{\n                break;\n            }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16614249,"reputation":13,"user_id":12006332,"display_name":"dead_inside"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1569660070,"creation_date":1569660070,"answer_id":58144712,"question_id":58144288,"body_markdown":"hope this will help you!\r\n\r\n        public class pratice1 {\r\n\t    public static void main (String[]args) {\r\n\t\tScanner sc = new Scanner(System.in);\r\n\t\tString input = sc.nextLine();\r\n\t\tString input1 = sc.nextLine();\r\n\t\tchar[]a =input.toCharArray();\r\n\t\tchar[]a1 = input1.toCharArray();\r\n\t\tSystem.out.println(input +&quot;&quot;+ input1);\r\n\t\tint a2=0;\r\n\t\tif(input!=null) {\r\n\t\tfor(int i=0;i&lt;input.length();i++) {\r\n\t\t\tif(a[i]==&#39; &#39;) {\t\r\n\t\t\t\ta2=i;\r\n\t\t\t\tfor(int j=0;j&lt;a2;j++) {\r\n\t\t\t\t\tSystem.out.println(a[i]);\r\n\t\t\t\t\ta2=0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse System.out.print(a[i]);\r\n\t\t}System.out.println(&quot;&quot;);\r\n\t\tfor(int i=0;i&lt;input1.length();i++) {\r\n\t\t\tif(a1[i]==&#39; &#39;) {\t\r\n\t\t\t\ta2=i;\r\n\t\t\t\tfor(int j=0;j&lt;a2;j++) {\r\n\t\t\t\t\tSystem.out.println(a1[i]);\r\n\t\t\t\t\ta2=0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse System.out.print(a1[i]);\r\n\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t}\r\n           ","title":"How to limit the number of words when reading a line from standard input?","body":"<p>hope this will help you!</p>\n\n<pre><code>    public class pratice1 {\n    public static void main (String[]args) {\n    Scanner sc = new Scanner(System.in);\n    String input = sc.nextLine();\n    String input1 = sc.nextLine();\n    char[]a =input.toCharArray();\n    char[]a1 = input1.toCharArray();\n    System.out.println(input +\"\"+ input1);\n    int a2=0;\n    if(input!=null) {\n    for(int i=0;i&lt;input.length();i++) {\n        if(a[i]==' ') { \n            a2=i;\n            for(int j=0;j&lt;a2;j++) {\n                System.out.println(a[i]);\n                a2=0;\n            }\n        }\n        else System.out.print(a[i]);\n    }System.out.println(\"\");\n    for(int i=0;i&lt;input1.length();i++) {\n        if(a1[i]==' ') {    \n            a2=i;\n            for(int j=0;j&lt;a2;j++) {\n                System.out.println(a1[i]);\n                a2=0;\n            }\n        }\n        else System.out.print(a1[i]);\n    }\n    }\n\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1338107,"reputation":74,"user_id":1669092,"display_name":"h43ckm43ck"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1569674565,"creation_date":1569674565,"answer_id":58146421,"question_id":58144288,"body_markdown":"I think this should do the work. Don&#39;t hesitate to ask, if you have some questions.\r\n \r\n```java\r\nimport java.util.Scanner;\r\n\r\nclass App {\r\n    public static void main(String[] args) {\r\n        final StringBuffer line = new StringBuffer();\r\n        final StringBuffer words = new StringBuffer();\r\n\r\n        try (final Scanner sc = new Scanner(System.in)) {\r\n            while (sc.hasNextLine()) {\r\n                final String currentLine = sc.nextLine();\r\n                line.append(currentLine).append(System.lineSeparator());\r\n                for (final String word : currentLine.split(&quot;\\\\s+&quot;)) {\r\n                    words.append(word).append(System.lineSeparator());\r\n                }\r\n            }\r\n        } finally {\r\n            System.out.println(line.toString());\r\n            System.out.println();\r\n            System.out.println(words.toString());\r\n        }\r\n    }\r\n}\r\n```","title":"How to limit the number of words when reading a line from standard input?","body":"<p>I think this should do the work. Don't hesitate to ask, if you have some questions.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\nclass App {\n    public static void main(String[] args) {\n        final StringBuffer line = new StringBuffer();\n        final StringBuffer words = new StringBuffer();\n\n        try (final Scanner sc = new Scanner(System.in)) {\n            while (sc.hasNextLine()) {\n                final String currentLine = sc.nextLine();\n                line.append(currentLine).append(System.lineSeparator());\n                for (final String word : currentLine.split(\"\\\\s+\")) {\n                    words.append(word).append(System.lineSeparator());\n                }\n            }\n        } finally {\n            System.out.println(line.toString());\n            System.out.println();\n            System.out.println(words.toString());\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":91056,"reputation":124854,"user_id":250260,"accept_rate":80,"display_name":"Jorgesys"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662748708,"creation_date":1662748708,"answer_id":73666280,"question_id":58144288,"body_markdown":"To solve the problem:\r\n\r\n&gt; Write a program that reads five words from the standard input and\r\n&gt; outputs each word in a new line.\r\n\r\nThis was my solution: \r\n\r\n\r\n    while(scanner.hasNext()){\r\n          System.out.println(scanner.next());\r\n    }\r\n\r\n","title":"How to limit the number of words when reading a line from standard input?","body":"<p>To solve the problem:</p>\n<blockquote>\n<p>Write a program that reads five words from the standard input and\noutputs each word in a new line.</p>\n</blockquote>\n<p>This was my solution:</p>\n<pre><code>while(scanner.hasNext()){\n      System.out.println(scanner.next());\n}\n</code></pre>\n"}],"owner":{"account_id":11729443,"reputation":3,"user_id":8585500,"display_name":"Bucky Anderson"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":960,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":58146421,"answer_count":5,"score":0,"last_activity_date":1662748708,"creation_date":1569655867,"question_id":58144288,"body_markdown":"I am new to Stackoverflow and this is my first time asking a question. I have searched my problem thoroughly, however, could not find an appropriate answer. I am sorry if this has been asked. Thank you in advance.\n\n### The question is from Hyperskill.com as follows:\n\nWrite a program that reads five words from the standard input and outputs each word in a new line.\nFirst, you need to print all the words from the first line, then from the second (from the left to right).\n\n### Sample Input 1:&lt;br/&gt;\nThis Java course&lt;br/&gt;\nis adaptive&lt;br/&gt;\n### Sample Output 1:&lt;br/&gt;\nThis&lt;br/&gt;\nJava&lt;br/&gt;\ncourse&lt;br/&gt;\nis&lt;br/&gt;\nadaptive&lt;br/&gt;\n\n### My trial to solve it\n```\nimport java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n        /* I have not initialized the &quot;userInput&quot; String.\n         * I know that String is immutable in Java and\n         * if I initialize it to an empty String &quot;&quot;\n         * and read a String from user.\n         * It will not overwrite to the &quot;userInput&quot; String.\n         * But create another String object to give it the value of the user input,\n         * and references the new String object to &quot;userInput&quot;.\n         * I didn&#39;t want to waste memory like that.\n         */\n        String userInput;\n        String[] userInputSplitFirstLine = new String[3];\n        String[] userInputSplitSecondLine = new String[2];\n        Scanner scan = new Scanner(System.in);\n        userInput = scan.nextLine();\n        userInputSplitFirstLine = userInput.split(&quot;\\\\s+&quot;);\n        userInput = scan.nextLine();\n        userInputSplitSecondLine = userInput.split(&quot;\\\\s+&quot;);\n        for(String firstLineSplitted: userInputSplitFirstLine) {\n            System.out.println(firstLineSplitted);\n        }\n        for(String secondLineSplitted: userInputSplitSecondLine) {\n            System.out.println(secondLineSplitted);\n        }\n        scan.close();\n    }\n}\n```\nIf you try the sample input above, the output will match the sample output above. However, if you write more than 3 words to the first line and/or more than 2 words to the second line, the ```userInputSplitFirstLine``` array of size 3 will store more than 3 words. Same goes with the ```userInputSplitSecondLine``` array also. My **first question** is how can an array of size 3 (userInputSplitFirstLine) and an array of size 2 (userInputSplitSecondLine) can hold more than 3 and 2 elements, respectively? My **second question** is that how can I restrict/limit the number of words that the user can insert in a line; for example, the first line **only** accepts 3 words and the second line **only** accepts 2 words?\n\n### Also the answer to this question suggested by Hyperskill.com is as follows:\n```\nimport java.util.Scanner;\n \nclass Main {\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n \n        String wordOne = scanner.next();\n        String wordTwo = scanner.next();\n        String wordThree = scanner.next();\n        String wordFour = scanner.next();\n        String wordFive = scanner.next();\n \n        System.out.println(wordOne);\n        System.out.println(wordTwo);\n        System.out.println(wordThree);\n        System.out.println(wordFour);\n        System.out.println(wordFive);\n    }\n}\n```","title":"How to limit the number of words when reading a line from standard input?","body":"<p>I am new to Stackoverflow and this is my first time asking a question. I have searched my problem thoroughly, however, could not find an appropriate answer. I am sorry if this has been asked. Thank you in advance.</p>\n<h3>The question is from Hyperskill.com as follows:</h3>\n<p>Write a program that reads five words from the standard input and outputs each word in a new line.\nFirst, you need to print all the words from the first line, then from the second (from the left to right).</p>\n<h3>Sample Input 1:<br/></h3>\n<p>This Java course<br/>\nis adaptive<br/></p>\n<h3>Sample Output 1:<br/></h3>\n<p>This<br/>\nJava<br/>\ncourse<br/>\nis<br/>\nadaptive<br/></p>\n<h3>My trial to solve it</h3>\n<pre><code>import java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n        /* I have not initialized the &quot;userInput&quot; String.\n         * I know that String is immutable in Java and\n         * if I initialize it to an empty String &quot;&quot;\n         * and read a String from user.\n         * It will not overwrite to the &quot;userInput&quot; String.\n         * But create another String object to give it the value of the user input,\n         * and references the new String object to &quot;userInput&quot;.\n         * I didn't want to waste memory like that.\n         */\n        String userInput;\n        String[] userInputSplitFirstLine = new String[3];\n        String[] userInputSplitSecondLine = new String[2];\n        Scanner scan = new Scanner(System.in);\n        userInput = scan.nextLine();\n        userInputSplitFirstLine = userInput.split(&quot;\\\\s+&quot;);\n        userInput = scan.nextLine();\n        userInputSplitSecondLine = userInput.split(&quot;\\\\s+&quot;);\n        for(String firstLineSplitted: userInputSplitFirstLine) {\n            System.out.println(firstLineSplitted);\n        }\n        for(String secondLineSplitted: userInputSplitSecondLine) {\n            System.out.println(secondLineSplitted);\n        }\n        scan.close();\n    }\n}\n</code></pre>\n<p>If you try the sample input above, the output will match the sample output above. However, if you write more than 3 words to the first line and/or more than 2 words to the second line, the <code>userInputSplitFirstLine</code> array of size 3 will store more than 3 words. Same goes with the <code>userInputSplitSecondLine</code> array also. My <strong>first question</strong> is how can an array of size 3 (userInputSplitFirstLine) and an array of size 2 (userInputSplitSecondLine) can hold more than 3 and 2 elements, respectively? My <strong>second question</strong> is that how can I restrict/limit the number of words that the user can insert in a line; for example, the first line <strong>only</strong> accepts 3 words and the second line <strong>only</strong> accepts 2 words?</p>\n<h3>Also the answer to this question suggested by Hyperskill.com is as follows:</h3>\n<pre><code>import java.util.Scanner;\n \nclass Main {\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n \n        String wordOne = scanner.next();\n        String wordTwo = scanner.next();\n        String wordThree = scanner.next();\n        String wordFour = scanner.next();\n        String wordFive = scanner.next();\n \n        System.out.println(wordOne);\n        System.out.println(wordTwo);\n        System.out.println(wordThree);\n        System.out.println(wordFour);\n        System.out.println(wordFive);\n    }\n}\n</code></pre>\n"},{"tags":["java","sql-server","hibernate"],"answers":[{"tags":[],"owner":{"account_id":3186614,"reputation":174,"user_id":2692084,"accept_rate":100,"display_name":"gunnar247"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662747959,"creation_date":1430465478,"answer_id":29983180,"question_id":29983118,"body_markdown":"My mistake. I should have read the error message several times. `projectele1_id` is not in the `group by` clause. MS SQL does not allow to include such a column into the select list. This seems to be a consistency check.\r\nToo bad though that the usage of HQL leads to such an exception in SQL Server but not in MySQL Server.","title":"SQL generated by Hibernate invalid for MS SQL","body":"<p>My mistake. I should have read the error message several times. <code>projectele1_id</code> is not in the <code>group by</code> clause. MS SQL does not allow to include such a column into the select list. This seems to be a consistency check.\nToo bad though that the usage of HQL leads to such an exception in SQL Server but not in MySQL Server.</p>\n"},{"tags":[],"owner":{"account_id":2075927,"reputation":2068,"user_id":1849276,"accept_rate":100,"display_name":"Afsun Khammadli"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1430465492,"creation_date":1430465492,"answer_id":29983183,"question_id":29983118,"body_markdown":"Your SQL syntax is wrong.If you add `projectele1_.id` to group by clause it will work.Only aggregate functions work in select statement with group by clause.Or if you remove `projectele1_.id` from select it will work fine.","title":"SQL generated by Hibernate invalid for MS SQL","body":"<p>Your SQL syntax is wrong.If you add <code>projectele1_.id</code> to group by clause it will work.Only aggregate functions work in select statement with group by clause.Or if you remove <code>projectele1_.id</code> from select it will work fine.</p>\n"}],"owner":{"account_id":3186614,"reputation":174,"user_id":2692084,"accept_rate":100,"display_name":"gunnar247"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":271,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":29983183,"answer_count":2,"score":0,"last_activity_date":1662747959,"creation_date":1430465140,"question_id":29983118,"body_markdown":"Hibernate (HQL) generated the following SQL for which I inserted the parameters:\r\n\r\n\r\n    select \r\n    sum(activity0_.calculated_work) as col_0_0_\r\n    , employee2_.id as col_1_0_\r\n    , projectele1_.id as col_2_0_ \r\n\r\n    from \r\n    activity activity0_ \r\n    inner join generic_object activity0_1_ on activity0_.id=activity0_1_.id \r\n    left outer join project_element projectele1_ on     activity0_.project_element_id=projectele1_.id \r\n    left outer join employee employee2_ on activity0_.owner_id=employee2_.id \r\n    left outer join org_unit orgunit3_ on employee2_.org_unit_id=orgunit3_.id \r\n    \r\n    where \r\n    activity0_1_.deleted=0 and \r\n    activity0_.client_id=22 \r\n \r\n     group by \r\n     employee2_.id order by SUM(activity0_.calculated_work) DESC\r\n\r\nError message: Column &#39;project_element.id&#39; is invalid in the select list because it is not contained in either an aggregate function or the GROUP BY clause.\r\n\r\nI executed this SQL directly in the SQL Server Studio with the same result. I commented this line:\r\n\r\n    , projectele1_.id as col_2_0_ \r\n\r\nThe SQL was then accepted by the SQL Server\r\n\r\nThe table project_element definitely has a column with the name id it is also referenced in the LEFT OUTER JOIN and there this column is not causing an error.\r\n\r\nRemoving the alias projectele1_ had no effect.\r\n\r\nTo me this looks like a really simple SQL statement. I cannot imagine what is wrong with it and the error message is not helping at all. Any ideas what could be wrong with the SQL?","title":"SQL generated by Hibernate invalid for MS SQL","body":"<p>Hibernate (HQL) generated the following SQL for which I inserted the parameters:</p>\n\n<pre><code>select \nsum(activity0_.calculated_work) as col_0_0_\n, employee2_.id as col_1_0_\n, projectele1_.id as col_2_0_ \n\nfrom \nactivity activity0_ \ninner join generic_object activity0_1_ on activity0_.id=activity0_1_.id \nleft outer join project_element projectele1_ on     activity0_.project_element_id=projectele1_.id \nleft outer join employee employee2_ on activity0_.owner_id=employee2_.id \nleft outer join org_unit orgunit3_ on employee2_.org_unit_id=orgunit3_.id \n\nwhere \nactivity0_1_.deleted=0 and \nactivity0_.client_id=22 \n\n group by \n employee2_.id order by SUM(activity0_.calculated_work) DESC\n</code></pre>\n\n<p>Error message: Column 'project_element.id' is invalid in the select list because it is not contained in either an aggregate function or the GROUP BY clause.</p>\n\n<p>I executed this SQL directly in the SQL Server Studio with the same result. I commented this line:</p>\n\n<pre><code>, projectele1_.id as col_2_0_ \n</code></pre>\n\n<p>The SQL was then accepted by the SQL Server</p>\n\n<p>The table project_element definitely has a column with the name id it is also referenced in the LEFT OUTER JOIN and there this column is not causing an error.</p>\n\n<p>Removing the alias projectele1_ had no effect.</p>\n\n<p>To me this looks like a really simple SQL statement. I cannot imagine what is wrong with it and the error message is not helping at all. Any ideas what could be wrong with the SQL?</p>\n"},{"tags":["java","kotlin","quarkus","resteasy","reactive"],"comments":[{"owner":{"account_id":16676962,"reputation":1021,"user_id":12176221,"display_name":"Jacouille"},"score":0,"creation_date":1661860606,"post_id":73531939,"comment_id":129867249,"body_markdown":"Hello, do you use conventional rest client, or the reactive variant ?","body":"Hello, do you use conventional rest client, or the reactive variant ?"},{"owner":{"account_id":5022927,"reputation":723,"user_id":4035864,"accept_rate":70,"display_name":"Ahmet K"},"score":0,"creation_date":1661870691,"post_id":73531939,"comment_id":129871622,"body_markdown":"Hey, I&#39;m using the reactive one. I have the artifcat `quarkus-rest-client-reactive-jackson` included in my pom.xml. Since the Mutiny call variant also worked, I guess it&#39;s also applied correctly.","body":"Hey, I&#39;m using the reactive one. I have the artifcat <code>quarkus-rest-client-reactive-jackson</code> included in my pom.xml. Since the Mutiny call variant also worked, I guess it&#39;s also applied correctly."}],"answers":[{"tags":[],"owner":{"account_id":7775687,"reputation":47,"user_id":5883895,"display_name":"ghostix"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662199160,"creation_date":1661814197,"answer_id":73535496,"question_id":73531939,"body_markdown":"Something in your implementation is **blocking IO**. So you can try to find it and wrap it with `Uni` or you can mark the method with `@Blocking` annotation, then the filters will be run on the worker thread.","title":"Using reactive @ServerRequestFilter with RestClient in Quarkus","body":"<p>Something in your implementation is <strong>blocking IO</strong>. So you can try to find it and wrap it with <code>Uni</code> or you can mark the method with <code>@Blocking</code> annotation, then the filters will be run on the worker thread.</p>\n"},{"tags":[],"owner":{"account_id":17178181,"reputation":1,"user_id":12433996,"display_name":"yazinnnn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662198087,"creation_date":1662184995,"answer_id":73590016,"question_id":73531939,"body_markdown":"how about create a defer Uni and emit it on worker pool?\r\n\r\n```\r\n   val idToken = Uni.createFrom().item { authService.getIdToken(&quot;someHash&quot;) }\r\n            .runSubscriptionOn(Infrastructure.getDefaultWorkerPool())\r\n```\r\n\r\nor call the blocking code with the default io coroutines dispatcher \r\n\r\n```\r\nwithContext(Dispatchers.IO){\r\n        authService.getIdToken(&quot;someHash&quot;)\r\n}\r\n```\r\n\r\n\r\nand finally, maybe use Vertx.executeBlocking will be the simplest way\r\n\r\n```\r\nvertx.executeBlocking(Uni.createFrom().item { \r\n     authService.getIdToken(&quot;someHash&quot;)\r\n})\r\n```","title":"Using reactive @ServerRequestFilter with RestClient in Quarkus","body":"<p>how about create a defer Uni and emit it on worker pool?</p>\n<pre><code>   val idToken = Uni.createFrom().item { authService.getIdToken(&quot;someHash&quot;) }\n            .runSubscriptionOn(Infrastructure.getDefaultWorkerPool())\n</code></pre>\n<p>or call the blocking code with the default io coroutines dispatcher</p>\n<pre><code>withContext(Dispatchers.IO){\n        authService.getIdToken(&quot;someHash&quot;)\n}\n</code></pre>\n<p>and finally, maybe use Vertx.executeBlocking will be the simplest way</p>\n<pre><code>vertx.executeBlocking(Uni.createFrom().item { \n     authService.getIdToken(&quot;someHash&quot;)\n})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5022927,"reputation":723,"user_id":4035864,"accept_rate":70,"display_name":"Ahmet K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662747910,"creation_date":1662719250,"answer_id":73660733,"question_id":73531939,"body_markdown":"Sometimes it makes sense not just to read the online documentation page but also the inline comments of the according class. \r\n\r\n`ServerRequestFilter.java` says:\r\n\r\n``` \r\nThe return type of the method must be either be of type void, Response, RestResponse, Optional&lt;Response&gt;, Optional&lt;RestResponse&gt;, Uni&lt;Void&gt;, Uni&lt;Response&gt; or Uni&lt;RestResponse&gt;. \r\n\r\n...\r\n\r\nUni&lt;Void&gt; should be used when filtering needs to perform a\r\nnon-blocking operation but the filter cannot abort processing. Note\r\nthat Uni&lt;Void&gt; can easily be produced using: Uni.createFrom().nullItem()\r\n```\r\n\r\nSo the entrypoint function has to return an Uni as well, not just the RestClient. Changing it like the following will be enough\r\n\r\n    @ServerRequestFilter\r\n    fun preCall(requestContext: ContainerRequestContext) : Uni&lt;Void&gt; {\r\n        //Here I return a Uni&lt;Void&gt; back using Uni.createFrom().nullItem()\r\n        return validateIdTokenHeader(requestContext)\r\n    }","title":"Using reactive @ServerRequestFilter with RestClient in Quarkus","body":"<p>Sometimes it makes sense not just to read the online documentation page but also the inline comments of the according class.</p>\n<p><code>ServerRequestFilter.java</code> says:</p>\n<pre><code>The return type of the method must be either be of type void, Response, RestResponse, Optional&lt;Response&gt;, Optional&lt;RestResponse&gt;, Uni&lt;Void&gt;, Uni&lt;Response&gt; or Uni&lt;RestResponse&gt;. \n\n...\n\nUni&lt;Void&gt; should be used when filtering needs to perform a\nnon-blocking operation but the filter cannot abort processing. Note\nthat Uni&lt;Void&gt; can easily be produced using: Uni.createFrom().nullItem()\n</code></pre>\n<p>So the entrypoint function has to return an Uni as well, not just the RestClient. Changing it like the following will be enough</p>\n<pre><code>@ServerRequestFilter\nfun preCall(requestContext: ContainerRequestContext) : Uni&lt;Void&gt; {\n    //Here I return a Uni&lt;Void&gt; back using Uni.createFrom().nullItem()\n    return validateIdTokenHeader(requestContext)\n}\n</code></pre>\n"}],"owner":{"account_id":5022927,"reputation":723,"user_id":4035864,"accept_rate":70,"display_name":"Ahmet K"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1409,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73660733,"answer_count":3,"score":1,"last_activity_date":1662747910,"creation_date":1661791057,"question_id":73531939,"body_markdown":"I want to add some custom auth headers to my request, when the `dev-mode` is activated. This should make the developement easier for me, since I don&#39;t have to add them on my self manually.\r\n\r\nWhat I have found is the method annotation [ServerRequestFilter][1] which intercepts an ongoing request before hitting the controller level. The annotated function provides `ContainerRequestContext` argument where I can add my headers easily.\r\n\r\nNow the problem: To know the custom headers value, I have to make an external rest call (I&#39;m using the [RestClient][2] for that) to an API. Since I&#39;m using the reactive library I get the exception `org.jboss.resteasy.reactive.common.core.BlockingNotAllowedException` because of this call. \r\n\r\nSince I&#39;m using Kotlin, i tried to mark my method as suspendable. But this lead to a build error `Method &#39;preCall$suspendImpl of class &#39;com.kaz.request.service.RequestInterceptor&#39; cannot be static as it is annotated with &#39;@org.jboss.resteasy.reactive.server.ServerRequestFilter&#39;`\r\n\r\nHere my code:\r\n```kotlin\r\n@ApplicationScoped\r\nclass RequestInterceptor @Inject constructor(val authService: AuthService) {\r\n\r\n    @ServerRequestFilter\r\n    suspend fun preCall(requestContext: ContainerRequestContext) {\r\n        validateIdTokenHeader(requestContext)\r\n    }\r\n\r\n    private suspend fun validateIdTokenHeader(requestContext: ContainerRequestContext) {\r\n        val isTokenHeaderAbsent = requestContext.getHeaderString(Headers.X_ID_TOKEN) == null\r\n        val isDevModeEnabled = LaunchMode.current() == LaunchMode.DEVELOPMENT\r\n\r\n        if (isTokenHeaderAbsent &amp;&amp; !isDevModeEnabled) {\r\n            throw AuthExceptions.ID_TOKEN_IS_ABSENT\r\n        } else {\r\n            injectDevUserIdToken(requestContext)\r\n        }\r\n    }\r\n\r\n    private suspend fun injectDevUserIdToken(requestContext: ContainerRequestContext) {\r\n        // This call is making the request and block\r\n        val idToken = authService.getIdToken(&quot;someHash&quot;)\r\n        requestContext.headers.putSingle(Headers.X_ID_TOKEN, idToken)\r\n    }\r\n}\r\n```\r\n\r\nWhat I also tried to do is using `Mutiny` in my RestClient. I subscribed to the Uni and added the header when the result was available. But then I had the problem, that my controller/endpoint was already called before the header could be added to the request.\r\n\r\nAn endpoint could look like this: \r\n\r\n```kotlin\r\n    @Path(&quot;hello/{id}&quot;)\r\n    @GET\r\n    suspend fun get(\r\n        //This header is what I want to add automatically, when dev mode is active.\r\n        @RestHeader(Headers.X_ID_TOKEN) idToken: UserIdToken,\r\n        @RestPath id: UUID,\r\n        @Context httpRequest: HttpServerRequest\r\n    ): Response {\r\n        val request = RequestDTO(id, excludeFields, idToken.userId)\r\n        val envelope = service.findById(request)\r\n\r\n        return ResponseBuilder.build(httpRequest, envelope)\r\n    }\r\n```\r\n\r\n\r\n  [1]: https://quarkus.io/guides/resteasy-reactive#via-annotations\r\n  [2]: https://quarkus.io/guides/rest-client-reactive","title":"Using reactive @ServerRequestFilter with RestClient in Quarkus","body":"<p>I want to add some custom auth headers to my request, when the <code>dev-mode</code> is activated. This should make the developement easier for me, since I don't have to add them on my self manually.</p>\n<p>What I have found is the method annotation <a href=\"https://quarkus.io/guides/resteasy-reactive#via-annotations\" rel=\"nofollow noreferrer\">ServerRequestFilter</a> which intercepts an ongoing request before hitting the controller level. The annotated function provides <code>ContainerRequestContext</code> argument where I can add my headers easily.</p>\n<p>Now the problem: To know the custom headers value, I have to make an external rest call (I'm using the <a href=\"https://quarkus.io/guides/rest-client-reactive\" rel=\"nofollow noreferrer\">RestClient</a> for that) to an API. Since I'm using the reactive library I get the exception <code>org.jboss.resteasy.reactive.common.core.BlockingNotAllowedException</code> because of this call.</p>\n<p>Since I'm using Kotlin, i tried to mark my method as suspendable. But this lead to a build error <code>Method 'preCall$suspendImpl of class 'com.kaz.request.service.RequestInterceptor' cannot be static as it is annotated with '@org.jboss.resteasy.reactive.server.ServerRequestFilter'</code></p>\n<p>Here my code:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@ApplicationScoped\nclass RequestInterceptor @Inject constructor(val authService: AuthService) {\n\n    @ServerRequestFilter\n    suspend fun preCall(requestContext: ContainerRequestContext) {\n        validateIdTokenHeader(requestContext)\n    }\n\n    private suspend fun validateIdTokenHeader(requestContext: ContainerRequestContext) {\n        val isTokenHeaderAbsent = requestContext.getHeaderString(Headers.X_ID_TOKEN) == null\n        val isDevModeEnabled = LaunchMode.current() == LaunchMode.DEVELOPMENT\n\n        if (isTokenHeaderAbsent &amp;&amp; !isDevModeEnabled) {\n            throw AuthExceptions.ID_TOKEN_IS_ABSENT\n        } else {\n            injectDevUserIdToken(requestContext)\n        }\n    }\n\n    private suspend fun injectDevUserIdToken(requestContext: ContainerRequestContext) {\n        // This call is making the request and block\n        val idToken = authService.getIdToken(&quot;someHash&quot;)\n        requestContext.headers.putSingle(Headers.X_ID_TOKEN, idToken)\n    }\n}\n</code></pre>\n<p>What I also tried to do is using <code>Mutiny</code> in my RestClient. I subscribed to the Uni and added the header when the result was available. But then I had the problem, that my controller/endpoint was already called before the header could be added to the request.</p>\n<p>An endpoint could look like this:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>    @Path(&quot;hello/{id}&quot;)\n    @GET\n    suspend fun get(\n        //This header is what I want to add automatically, when dev mode is active.\n        @RestHeader(Headers.X_ID_TOKEN) idToken: UserIdToken,\n        @RestPath id: UUID,\n        @Context httpRequest: HttpServerRequest\n    ): Response {\n        val request = RequestDTO(id, excludeFields, idToken.userId)\n        val envelope = service.findById(request)\n\n        return ResponseBuilder.build(httpRequest, envelope)\n    }\n</code></pre>\n"},{"tags":["java","sockets"],"comments":[{"owner":{"account_id":85671,"reputation":40848,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1662757829,"post_id":73666140,"comment_id":130088156,"body_markdown":"Without seeing your code we have no way of knowing all the places those bytes may be copied or what your memory dump shows. Perhaps those bytes were first in a String, or somewhere else.","body":"Without seeing your code we have no way of knowing all the places those bytes may be copied or what your memory dump shows. Perhaps those bytes were first in a String, or somewhere else."}],"owner":{"account_id":6455236,"reputation":41,"user_id":6594510,"display_name":"Susana Gonz&#225;lez"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1662747908,"creation_date":1662747659,"question_id":73666140,"body_markdown":"I&#39;m using SSL sockets to exchange messages with a server. After writing the message and flushing the stream, I&#39;m manually clearing the byte array holding the message. However, if I obtain a memory dump, I can still see the message. Is there a way to make sure that the memory hold by the stream is cleaned up after writing on it?","title":"Is there a way to clean up the information written in a socket stream?","body":"<p>I'm using SSL sockets to exchange messages with a server. After writing the message and flushing the stream, I'm manually clearing the byte array holding the message. However, if I obtain a memory dump, I can still see the message. Is there a way to make sure that the memory hold by the stream is cleaned up after writing on it?</p>\n"},{"tags":["java","database","jdbc","datasource"],"comments":[{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1491212696,"post_id":43181242,"comment_id":73435478,"body_markdown":"Have you actually read the [apidoc of `javax.sql.DataSource`](http://docs.oracle.com/javase/8/docs/api/javax/sql/DataSource.html)? What is unclear about that?","body":"Have you actually read the <a href=\"http://docs.oracle.com/javase/8/docs/api/javax/sql/DataSource.html\" rel=\"nofollow noreferrer\">apidoc of <code>javax.sql.DataSource</code></a>? What is unclear about that?"}],"answers":[{"tags":[],"owner":{"account_id":1001490,"reputation":363,"user_id":1016243,"display_name":"dpassy"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1491212436,"creation_date":1491212436,"answer_id":43181272,"question_id":43181242,"body_markdown":"According to [documentation][1], the `DataSouce` interface is something like `DriverManager`. In most applications, it is connection to the database.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/javax/sql/DataSource.html","title":"What is a datasource in java? Can someone please explain me in simple language?","body":"<p>According to <a href=\"https://docs.oracle.com/javase/7/docs/api/javax/sql/DataSource.html\" rel=\"nofollow noreferrer\">documentation</a>, the <code>DataSouce</code> interface is something like <code>DriverManager</code>. In most applications, it is connection to the database.</p>\n"},{"tags":[],"owner":{"account_id":6618978,"reputation":79,"user_id":5111341,"display_name":"Shubh Sharma"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1491222388,"creation_date":1491215121,"answer_id":43182157,"question_id":43181242,"body_markdown":"DataSource implementation classes allow you to use **connection pool and loose coupling for connectivity**.\r\n\r\n1. Most of the times we are looking for loose coupling for connectivity so that we can switch databases easily.\r\n\r\n2. Creating connections can be heavy process and it is not a good idea to let every part of program create its own connections which can lead to resource starvation and slow performance. that&#39;s why we use connection pooling. most database drivers provide datasource implementation classes that can be used in connection pool.","title":"What is a datasource in java? Can someone please explain me in simple language?","body":"<p>DataSource implementation classes allow you to use <strong>connection pool and loose coupling for connectivity</strong>.</p>\n\n<ol>\n<li><p>Most of the times we are looking for loose coupling for connectivity so that we can switch databases easily.</p></li>\n<li><p>Creating connections can be heavy process and it is not a good idea to let every part of program create its own connections which can lead to resource starvation and slow performance. that's why we use connection pooling. most database drivers provide datasource implementation classes that can be used in connection pool.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":14644240,"reputation":365,"user_id":10576072,"display_name":"Saif Ul Islam"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662747670,"creation_date":1662747670,"answer_id":73666141,"question_id":43181242,"body_markdown":"`DataSource` is an abstraction, a way to represent getting access to data from some source with some connection. It frees you to not worry about,\r\n\r\n 1. Having to think about how connection is established and will be maintained from many varying sources (think different databases, cloud storage resources)\r\n 2. Not worrying about what will happen if multiple clients request data from the same source and if those clients will get a proper connection object, or null - because the number of connections, there optimization and scheduling is  a challenge on its own.\r\n3. In the same respect, easier to manage connection timeout settings.\r\n\r\nDatabase vendors and data providers need not worry about you learning their specific API if they can go ahead and implement the `DataSource` interface which describes how your service/server may connect to them, and you need not worrying about connection intricacies and so on.\r\n\r\n[Here is a good read](https://docs.oracle.com/javase/8/docs/api/javax/sql/DataSource.html) from the official documentation itself on `Oracle`.\r\n\r\nTo answer your main question, I&#39;ll summarize in the below 3 points,\r\n\r\n1. An interface to be implemented by a vendor\r\n2. A factory pattern for connections to the actual data source\r\n3. Its main functions to be implemented and of concern are just `getConnection()` and `getConnection(String username, String password)` where both return the `Connection` object ([read](https://docs.oracle.com/javase/8/docs/api/java/sql/Connection.html)).","title":"What is a datasource in java? Can someone please explain me in simple language?","body":"<p><code>DataSource</code> is an abstraction, a way to represent getting access to data from some source with some connection. It frees you to not worry about,</p>\n<ol>\n<li>Having to think about how connection is established and will be maintained from many varying sources (think different databases, cloud storage resources)</li>\n<li>Not worrying about what will happen if multiple clients request data from the same source and if those clients will get a proper connection object, or null - because the number of connections, there optimization and scheduling is  a challenge on its own.</li>\n<li>In the same respect, easier to manage connection timeout settings.</li>\n</ol>\n<p>Database vendors and data providers need not worry about you learning their specific API if they can go ahead and implement the <code>DataSource</code> interface which describes how your service/server may connect to them, and you need not worrying about connection intricacies and so on.</p>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/javax/sql/DataSource.html\" rel=\"nofollow noreferrer\">Here is a good read</a> from the official documentation itself on <code>Oracle</code>.</p>\n<p>To answer your main question, I'll summarize in the below 3 points,</p>\n<ol>\n<li>An interface to be implemented by a vendor</li>\n<li>A factory pattern for connections to the actual data source</li>\n<li>Its main functions to be implemented and of concern are just <code>getConnection()</code> and <code>getConnection(String username, String password)</code> where both return the <code>Connection</code> object (<a href=\"https://docs.oracle.com/javase/8/docs/api/java/sql/Connection.html\" rel=\"nofollow noreferrer\">read</a>).</li>\n</ol>\n"}],"owner":{"account_id":6967732,"reputation":604,"user_id":5345105,"display_name":"Shubham Arya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9557,"favorite_count":0,"down_vote_count":1,"up_vote_count":10,"answer_count":3,"score":9,"last_activity_date":1662747670,"creation_date":1491212372,"question_id":43181242,"body_markdown":"What is a DataSource in java? \r\nCan someone please explain me in simple language?","title":"What is a datasource in java? Can someone please explain me in simple language?","body":"<p>What is a DataSource in java? \nCan someone please explain me in simple language?</p>\n"},{"tags":["java","while-loop","switch-statement"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1662747768,"post_id":73666107,"comment_id":130085800,"body_markdown":"By the way, normally you put `default` as the last case of a `switch`, not as the first, so it reads like &quot;when you exhausted all the other possibilities, do this&quot;.","body":"By the way, normally you put <code>default</code> as the last case of a <code>switch</code>, not as the first, so it reads like &quot;when you exhausted all the other possibilities, do this&quot;."},{"owner":{"account_id":26293317,"reputation":1,"user_id":19959999,"display_name":"MiakaSHW"},"score":0,"creation_date":1662749047,"post_id":73666107,"comment_id":130086145,"body_markdown":"Thank you for your comments! That post did answer my question but I didn&#39;t find it when I was searching earlier, so I appreciate you linking it for me. And I did have &#39;default&#39; as the last case of the switch at first, but had moved it to try to figure out the solution, thinking that it was somehow an order-of-operations issue. I&#39;ll be sure to move it back and remember that. Thanks again!","body":"Thank you for your comments! That post did answer my question but I didn&#39;t find it when I was searching earlier, so I appreciate you linking it for me. And I did have &#39;default&#39; as the last case of the switch at first, but had moved it to try to figure out the solution, thinking that it was somehow an order-of-operations issue. I&#39;ll be sure to move it back and remember that. Thanks again!"}],"owner":{"account_id":26293317,"reputation":1,"user_id":19959999,"display_name":"MiakaSHW"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1662749128,"answer_count":0,"score":0,"last_activity_date":1662747610,"creation_date":1662747441,"question_id":73666107,"body_markdown":"I am completing a final project for a Java course I am taking. The goal of this project is to create an Asset Management tool that someone could use to enter employees and their employee ID&#39;s, electronic devices assigned to them and the serial numbers, and then look up which devices an employee has by searching for their name or employee ID.\r\n\r\nI keep gettin stuck on my Switch loop here. For the most part it seems to be working correctly. However after the first time through, it will loop back to the beginning and then print out the error message associated with the &#39;default&#39; input option without giving the user a chance to type anything. Then it will loop back to the beginning and behave normally. I&#39;ve tried switching around the orders of things and my mentor suggested that the behavior was happening because I&#39;m using .nextLine() and .nextInt() instead of just next() for input, but when I switched to next() I just got errors instead. Not sure where to go from here.\r\n\r\nHere&#39;s the code I have so far:\r\n\r\n************************************\r\n\r\n    import java.util.*;\r\n    \r\n    class Main {\r\n      public static void main(String[] args) {\r\n    \r\n        //Creating a Scanner to take input from user\r\n        Scanner input = new Scanner(System.in);\r\n    \r\n        //Creating a HashMap to take in employee names and ID numbers\r\n        Map&lt;String, Integer&gt; employeeIndex = new HashMap&lt;&gt;();\r\n    \r\n        //Creating an ArrayList to keep track of employees and allow for easy user searching\r\n        ArrayList&lt;Employee&gt; employees = new ArrayList&lt;Employee&gt;();\r\n    \r\n        System.out.println(&quot;This is an Asset Management Tracking program. This database allows you to add and manage employee-assigned equipment. \\n&quot;);\r\n    \r\n        boolean loop = true;\r\n        while (loop) {\r\n        \r\n          System.out.println(&quot;\\nWould you like to add an employee to the system, or search for an employee record? Please enter your selection below: \\n&quot; + &quot;\\nAdd New Employee Record \\n&quot; + &quot;\\nSearch Employee Records \\n&quot; + &quot;\\nEnd Program \\n&quot;);\r\n    \r\n          String answer1 = input.nextLine().toLowerCase();\r\n        \r\n          switch (answer1) {\r\n            default: \r\n              System.out.println(&quot;\\nSorry, that is an incorrect response (perhaps you typed it wrong?). Please choose one of the available options. \\n&quot;);\r\n              break;\r\n              \r\n            case &quot;add new employee record&quot;: System.out.println(&quot;\\nPlease enter the employee&#39;s name (Last name, First name): \\n&quot;);\r\n              String employeeName = input.nextLine();\r\n              System.out.println(&quot;\\nPlease enter their 6-digit employee ID: \\n&quot;);\r\n              int employeeID = input.nextInt();\r\n    \r\n              Employee employee1 = new Employee(employeeName, employeeID);\r\n              employeeIndex.put(employeeName, employeeID);\r\n              System.out.println(&quot;\\nOkay. You have entered:\\n\\n&quot; + &quot;Name: &quot; + employeeName + &quot;\\nID: &quot; + employeeID);\r\n              employees.add(employee1);\r\n              System.out.println(employeeIndex.entrySet());\r\n              break;\r\n    \r\n            case &quot;search employee records&quot;:  System.out.println(&quot;\\nPlease enter the employee&#39;s name (Last name, First name): \\n&quot;);\r\n              String employeeNameToSearch = input.next();\r\n              break;\r\n    \r\n            case &quot;end program&quot;:\r\n              System.out.println(&quot;\\nThank you for using this Asset Management Program!&quot;);\r\n              input.close();\r\n              loop = false;\r\n              break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n***********************************\r\n\r\nI tried to add a screenshot, but I guess I can&#39;t since this is my first question. \r\n\r\nThe output of the above code currently operates as follows when the &#39;Add New Employee Record option is chosen:\r\n\r\n************************************\r\n\r\nThis is an Asset Management Tracking program. This database allows you to add and manage employee-assigned equipment. \r\n\r\n\r\nWould you like to add an employee to the system, or search for an employee record? Please enter your selection below: \r\n\r\nAdd New Employee Record \r\n\r\nSearch Employee Records \r\n\r\nEnd Program \r\n\r\nadd new employee record\r\n\r\nPlease enter the employee&#39;s name (Last name, First name): \r\n\r\nLast, First\r\n\r\nPlease enter their 6-digit employee ID: \r\n\r\n123123\r\n\r\nOkay. You have entered:\r\n\r\nName: Last, First\r\nID: 123123\r\n[Last, First=123123]\r\n\r\nWould you like to add an employee to the system, or search for an employee record? Please enter your selection below: \r\n\r\nAdd New Employee Record \r\n\r\nSearch Employee Records \r\n\r\nEnd Program \r\n\r\n\r\nSorry, that is an incorrect response (perhaps you typed it wrong?). Please choose one of the available options. \r\n\r\n\r\nWould you like to add an employee to the system, or search for an employee record? Please enter your selection below: \r\n\r\nAdd New Employee Record \r\n\r\nSearch Employee Records \r\n\r\nEnd Program \r\n\r\n**********************************\r\n\r\nYou&#39;ll notice that once the user has finished typing in the employee ID, the program then prints out the information the user has typed in and the HashMap entry, goes back to the beginning of the loop, but then prints out the &#39;default&#39; option as though the user has entered an incorrect input even though the user has not been given another chance to enter any input. Then it goes back to the beginning of the loop again correctly.\r\n\r\nMy apologies for the length of the post, but I thank you for your help.","title":"How to Correctly Navigate Switch Loop","body":"<p>I am completing a final project for a Java course I am taking. The goal of this project is to create an Asset Management tool that someone could use to enter employees and their employee ID's, electronic devices assigned to them and the serial numbers, and then look up which devices an employee has by searching for their name or employee ID.</p>\n<p>I keep gettin stuck on my Switch loop here. For the most part it seems to be working correctly. However after the first time through, it will loop back to the beginning and then print out the error message associated with the 'default' input option without giving the user a chance to type anything. Then it will loop back to the beginning and behave normally. I've tried switching around the orders of things and my mentor suggested that the behavior was happening because I'm using .nextLine() and .nextInt() instead of just next() for input, but when I switched to next() I just got errors instead. Not sure where to go from here.</p>\n<p>Here's the code I have so far:</p>\n<hr />\n<pre><code>import java.util.*;\n\nclass Main {\n  public static void main(String[] args) {\n\n    //Creating a Scanner to take input from user\n    Scanner input = new Scanner(System.in);\n\n    //Creating a HashMap to take in employee names and ID numbers\n    Map&lt;String, Integer&gt; employeeIndex = new HashMap&lt;&gt;();\n\n    //Creating an ArrayList to keep track of employees and allow for easy user searching\n    ArrayList&lt;Employee&gt; employees = new ArrayList&lt;Employee&gt;();\n\n    System.out.println(&quot;This is an Asset Management Tracking program. This database allows you to add and manage employee-assigned equipment. \\n&quot;);\n\n    boolean loop = true;\n    while (loop) {\n    \n      System.out.println(&quot;\\nWould you like to add an employee to the system, or search for an employee record? Please enter your selection below: \\n&quot; + &quot;\\nAdd New Employee Record \\n&quot; + &quot;\\nSearch Employee Records \\n&quot; + &quot;\\nEnd Program \\n&quot;);\n\n      String answer1 = input.nextLine().toLowerCase();\n    \n      switch (answer1) {\n        default: \n          System.out.println(&quot;\\nSorry, that is an incorrect response (perhaps you typed it wrong?). Please choose one of the available options. \\n&quot;);\n          break;\n          \n        case &quot;add new employee record&quot;: System.out.println(&quot;\\nPlease enter the employee's name (Last name, First name): \\n&quot;);\n          String employeeName = input.nextLine();\n          System.out.println(&quot;\\nPlease enter their 6-digit employee ID: \\n&quot;);\n          int employeeID = input.nextInt();\n\n          Employee employee1 = new Employee(employeeName, employeeID);\n          employeeIndex.put(employeeName, employeeID);\n          System.out.println(&quot;\\nOkay. You have entered:\\n\\n&quot; + &quot;Name: &quot; + employeeName + &quot;\\nID: &quot; + employeeID);\n          employees.add(employee1);\n          System.out.println(employeeIndex.entrySet());\n          break;\n\n        case &quot;search employee records&quot;:  System.out.println(&quot;\\nPlease enter the employee's name (Last name, First name): \\n&quot;);\n          String employeeNameToSearch = input.next();\n          break;\n\n        case &quot;end program&quot;:\n          System.out.println(&quot;\\nThank you for using this Asset Management Program!&quot;);\n          input.close();\n          loop = false;\n          break;\n      }\n    }\n  }\n}\n</code></pre>\n<hr />\n<p>I tried to add a screenshot, but I guess I can't since this is my first question.</p>\n<p>The output of the above code currently operates as follows when the 'Add New Employee Record option is chosen:</p>\n<hr />\n<p>This is an Asset Management Tracking program. This database allows you to add and manage employee-assigned equipment.</p>\n<p>Would you like to add an employee to the system, or search for an employee record? Please enter your selection below:</p>\n<p>Add New Employee Record</p>\n<p>Search Employee Records</p>\n<p>End Program</p>\n<p>add new employee record</p>\n<p>Please enter the employee's name (Last name, First name):</p>\n<p>Last, First</p>\n<p>Please enter their 6-digit employee ID:</p>\n<p>123123</p>\n<p>Okay. You have entered:</p>\n<p>Name: Last, First\nID: 123123\n[Last, First=123123]</p>\n<p>Would you like to add an employee to the system, or search for an employee record? Please enter your selection below:</p>\n<p>Add New Employee Record</p>\n<p>Search Employee Records</p>\n<p>End Program</p>\n<p>Sorry, that is an incorrect response (perhaps you typed it wrong?). Please choose one of the available options.</p>\n<p>Would you like to add an employee to the system, or search for an employee record? Please enter your selection below:</p>\n<p>Add New Employee Record</p>\n<p>Search Employee Records</p>\n<p>End Program</p>\n<hr />\n<p>You'll notice that once the user has finished typing in the employee ID, the program then prints out the information the user has typed in and the HashMap entry, goes back to the beginning of the loop, but then prints out the 'default' option as though the user has entered an incorrect input even though the user has not been given another chance to enter any input. Then it goes back to the beginning of the loop again correctly.</p>\n<p>My apologies for the length of the post, but I thank you for your help.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":1,"creation_date":1662730670,"post_id":73663029,"comment_id":130080268,"body_markdown":"Try `dolphin.redis.userSubArticleKey` or `dolphin.redis.user-sub-article-key`. I&#39;m not sure if Spring supports mapping `user.sub.article.key` to `userSubArticleKey`.","body":"Try <code>dolphin.redis.userSubArticleKey</code> or <code>dolphin.redis.user-sub-article-key</code>. I&#39;m not sure if Spring supports mapping <code>user.sub.article.key</code> to <code>userSubArticleKey</code>."},{"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":1,"creation_date":1662786890,"post_id":73663029,"comment_id":130091565,"body_markdown":"Not directly related to your problem, but you don&#39;t need `@EnableConfigurationProperties`, `@ConfigurationPropertiesScan`, and `@Component`. `@EnableConfigurationProperties` alone is sufficient. Alternatively you could use only `@ConfigurationPropertiesScan` but move it to your `AppStarter` class.","body":"Not directly related to your problem, but you don&#39;t need <code>@EnableConfigurationProperties</code>, <code>@ConfigurationPropertiesScan</code>, and <code>@Component</code>. <code>@EnableConfigurationProperties</code> alone is sufficient. Alternatively you could use only <code>@ConfigurationPropertiesScan</code> but move it to your <code>AppStarter</code> class."}],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1662747271,"creation_date":1662742145,"answer_id":73665269,"question_id":73663029,"body_markdown":"The Java property `userSubArticleKey` will be `userSubArticleKey` or `user-sub-article-key` in your properties file:\r\n\r\n**`application.properties`**:\r\n```\r\ndolphin.redis.userSubArticleKey=cruise:user:sub:article:\r\n```\r\n\r\n`user.sub.article.key` means the property `key` in nested object reachable via `article`, via nested `sub`, via nested `user`.","title":"why the @ConfigurationProperties could not read the properties","body":"<p>The Java property <code>userSubArticleKey</code> will be <code>userSubArticleKey</code> or <code>user-sub-article-key</code> in your properties file:</p>\n<p><strong><code>application.properties</code></strong>:</p>\n<pre><code>dolphin.redis.userSubArticleKey=cruise:user:sub:article:\n</code></pre>\n<p><code>user.sub.article.key</code> means the property <code>key</code> in nested object reachable via <code>article</code>, via nested <code>sub</code>, via nested <code>user</code>.</p>\n"}],"owner":{"account_id":3106126,"reputation":31241,"user_id":2628868,"accept_rate":84,"display_name":"Dolphin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":363,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73665269,"answer_count":1,"score":0,"last_activity_date":1662747271,"creation_date":1662730587,"question_id":73663029,"body_markdown":"I want to define a class to read the spring boot application.properties, this is the model class:\r\n\r\n\r\n    package com.dolphin.soa.post.common.config;\r\n    \r\n    import lombok.Data;\r\n    import org.springframework.boot.context.properties.ConfigurationProperties;\r\n    import org.springframework.boot.context.properties.ConfigurationPropertiesScan;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    @Data\r\n    @Component\r\n    @ConfigurationProperties(prefix = &quot;dolphin.redis&quot;)\r\n    @ConfigurationPropertiesScan\r\n    public class CruiseRedisKeysConfig {\r\n    \r\n        private String userSubArticleKey;\r\n    \r\n    }\r\n\r\n\r\n\r\nand this is the start up class:\r\n\r\n\r\n    @EnableConfigurationProperties(CruiseRedisKeysConfig.class)\r\n    public class AppStarter {}\r\n\r\n\r\n\r\nbut when I using this configuration, the userSubArticleKey value was null. why could not read the application.properties value? what should I do to fixed this problem? and this is the application.properties:\r\n\r\n\r\n    dolphin.redis.user.sub.article.key=cruise:user:sub:article:\r\n\r\n\r\n\r\n\r\n\r\n","title":"why the @ConfigurationProperties could not read the properties","body":"<p>I want to define a class to read the spring boot application.properties, this is the model class:</p>\n<pre><code>package com.dolphin.soa.post.common.config;\n\nimport lombok.Data;\nimport org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.boot.context.properties.ConfigurationPropertiesScan;\nimport org.springframework.stereotype.Component;\n\n@Data\n@Component\n@ConfigurationProperties(prefix = &quot;dolphin.redis&quot;)\n@ConfigurationPropertiesScan\npublic class CruiseRedisKeysConfig {\n\n    private String userSubArticleKey;\n\n}\n</code></pre>\n<p>and this is the start up class:</p>\n<pre><code>@EnableConfigurationProperties(CruiseRedisKeysConfig.class)\npublic class AppStarter {}\n</code></pre>\n<p>but when I using this configuration, the userSubArticleKey value was null. why could not read the application.properties value? what should I do to fixed this problem? and this is the application.properties:</p>\n<pre><code>dolphin.redis.user.sub.article.key=cruise:user:sub:article:\n</code></pre>\n"},{"tags":["java","spring-webflux"],"comments":[{"owner":{"account_id":1154318,"reputation":3534,"user_id":1135337,"display_name":"mpm"},"score":0,"creation_date":1543501511,"post_id":52692898,"comment_id":93949221,"body_markdown":"I have similar issue (same error), but when I POST using `RestTemplate`, posing file from `curl` works just fine. The only difference I was able to notice is that `curl` uses `Expect: 100 redirect` header while `RestTemplate` uses `Connection: keep-alive`.","body":"I have similar issue (same error), but when I POST using <code>RestTemplate</code>, posing file from <code>curl</code> works just fine. The only difference I was able to notice is that <code>curl</code> uses <code>Expect: 100 redirect</code> header while <code>RestTemplate</code> uses <code>Connection: keep-alive</code>."},{"owner":{"account_id":3612161,"reputation":3430,"user_id":3012916,"display_name":"nekperu15739"},"score":1,"creation_date":1548340807,"post_id":52692898,"comment_id":95513598,"body_markdown":"Hi, i use your client to request my service, and its working well, the solve is here https://stackoverflow.com/questions/53778890/how-to-upload-multiple-files-using-webflux","body":"Hi, i use your client to request my service, and its working well, the solve is here <a href=\"https://stackoverflow.com/questions/53778890/how-to-upload-multiple-files-using-webflux\" title=\"how to upload multiple files using webflux\">stackoverflow.com/questions/53778890/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1339693,"reputation":616,"user_id":1281644,"display_name":"Ignacio A. Poletti"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1556571844,"creation_date":1556571844,"answer_id":55910779,"question_id":52692898,"body_markdown":"This worked for me\r\n\r\n\r\n    MultipartBodyBuilder bodyBuilder = new MultipartBodyBuilder();\r\n    bodyBuilder.part(&quot;file&quot;, new ClassPathResource(&quot;/bulk_upload/test.xlsx&quot;));\r\n\r\n\r\n    List&lt;DataFileAdjustment&gt; list = webClient.post().uri(&quot;/bulk&quot;).accept(MediaType.APPLICATION_JSON)\r\n            .body(BodyInserters.fromMultipartData(bodyBuilder.build()))\r\n            .exchange()\r\n            .expectStatus().isOk()","title":"WebFlux: Issues uploading file","body":"<p>This worked for me</p>\n\n<pre><code>MultipartBodyBuilder bodyBuilder = new MultipartBodyBuilder();\nbodyBuilder.part(\"file\", new ClassPathResource(\"/bulk_upload/test.xlsx\"));\n\n\nList&lt;DataFileAdjustment&gt; list = webClient.post().uri(\"/bulk\").accept(MediaType.APPLICATION_JSON)\n        .body(BodyInserters.fromMultipartData(bodyBuilder.build()))\n        .exchange()\n        .expectStatus().isOk()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7421518,"reputation":861,"user_id":5645646,"accept_rate":17,"display_name":"Spring"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1605170516,"creation_date":1605170516,"answer_id":64800506,"question_id":52692898,"body_markdown":"I have sample code, but in Kotlin. &lt;br&gt;\r\nI hope it can help you. &lt;br&gt;\r\n\r\n**1st way (save memory)**\r\n```Kotlin\r\n\r\nupload(stream: InputStream, filename: string): HashMap&lt;String, Any&gt; {\r\n        val request: MultiValueMap&lt;String, Any&gt; = LinkedMultiValueMap();\r\n        request.set(&quot;file&quot;, MultipartInputStreamFileResource(stream, filename))\r\n        return client.post().uri(&quot;http://localhost:8080/files&quot;)\r\n            .contentType(MediaType.MULTIPART_FORM_DATA)\r\n            .body(BodyInserters.fromMultipartData(request))\r\n            .awaitExchange().awaitBody()\r\n}\r\n\r\nclass MultipartInputStreamFileResource(inputStream: InputStream?, private val filename: String) : InputStreamResource(inputStream!!) {\r\n        override fun getFilename(): String? {\r\n            return filename\r\n        }\r\n\r\n        @Throws(IOException::class)\r\n        override fun contentLength(): Long {\r\n            return -1 // we do not want to generally read the whole stream into memory ...\r\n        }\r\n\r\n}\r\n\r\n```\r\n\r\n**2nd way**\r\n```Kotlin\r\n//You wrote a file to somewhere in the controller then send the file through webclient\r\n\r\nupload(stream: InputStream, filename: string): HashMap&lt;String, Any&gt; {\r\n        val request: MultiValueMap&lt;String, Any&gt; = LinkedMultiValueMap();\r\n        request.set(&quot;file&quot;, FileSystemResource(File(&quot;/tmp/file.jpg&quot;)))\r\n        return client.post().uri(&quot;http://localhost:8080/files&quot;)\r\n            .contentType(MediaType.MULTIPART_FORM_DATA)\r\n            .body(BodyInserters.fromMultipartData(request))\r\n            .awaitExchange().awaitBody()\r\n}\r\n```\r\n\r\n**3rd way**\r\n```kotlin\r\nupload(file: Part): HashMap&lt;String, Any&gt; {\r\n        val request: MultiValueMap&lt;String, Any&gt; = LinkedMultiValueMap();\r\n        request.set(&quot;file&quot;, file)\r\n        return client.post().uri(&quot;http://localhost:8080/files&quot;)\r\n            .contentType(MediaType.MULTIPART_FORM_DATA)\r\n            .body(BodyInserters.fromMultipartData(request))\r\n            .awaitExchange().awaitBody()\r\n}\r\n```","title":"WebFlux: Issues uploading file","body":"<p>I have sample code, but in Kotlin. <br>\nI hope it can help you. <br></p>\n<p><strong>1st way (save memory)</strong></p>\n<pre><code>\nupload(stream: InputStream, filename: string): HashMap&lt;String, Any&gt; {\n        val request: MultiValueMap&lt;String, Any&gt; = LinkedMultiValueMap();\n        request.set(&quot;file&quot;, MultipartInputStreamFileResource(stream, filename))\n        return client.post().uri(&quot;http://localhost:8080/files&quot;)\n            .contentType(MediaType.MULTIPART_FORM_DATA)\n            .body(BodyInserters.fromMultipartData(request))\n            .awaitExchange().awaitBody()\n}\n\nclass MultipartInputStreamFileResource(inputStream: InputStream?, private val filename: String) : InputStreamResource(inputStream!!) {\n        override fun getFilename(): String? {\n            return filename\n        }\n\n        @Throws(IOException::class)\n        override fun contentLength(): Long {\n            return -1 // we do not want to generally read the whole stream into memory ...\n        }\n\n}\n\n</code></pre>\n<p><strong>2nd way</strong></p>\n<pre><code>//You wrote a file to somewhere in the controller then send the file through webclient\n\nupload(stream: InputStream, filename: string): HashMap&lt;String, Any&gt; {\n        val request: MultiValueMap&lt;String, Any&gt; = LinkedMultiValueMap();\n        request.set(&quot;file&quot;, FileSystemResource(File(&quot;/tmp/file.jpg&quot;)))\n        return client.post().uri(&quot;http://localhost:8080/files&quot;)\n            .contentType(MediaType.MULTIPART_FORM_DATA)\n            .body(BodyInserters.fromMultipartData(request))\n            .awaitExchange().awaitBody()\n}\n</code></pre>\n<p><strong>3rd way</strong></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>upload(file: Part): HashMap&lt;String, Any&gt; {\n        val request: MultiValueMap&lt;String, Any&gt; = LinkedMultiValueMap();\n        request.set(&quot;file&quot;, file)\n        return client.post().uri(&quot;http://localhost:8080/files&quot;)\n            .contentType(MediaType.MULTIPART_FORM_DATA)\n            .body(BodyInserters.fromMultipartData(request))\n            .awaitExchange().awaitBody()\n}\n</code></pre>\n"}],"owner":{"account_id":2827691,"reputation":7019,"user_id":2429966,"accept_rate":67,"display_name":"Marcos J.C Kichel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4824,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1662747063,"creation_date":1538946243,"question_id":52692898,"body_markdown":"I&#39;m developing a client to upload a file using webflux reactive client:\r\n\r\nThis is my client-side code:\r\n\r\n    private Mono&lt;String&gt; postDocument(String authorization, InputStream content) {\r\n        try {\r\n            ByteArrayResource resource = new ByteArrayResource(IOUtils.toByteArray(content));\r\n            return client.post().uri(DOCS_URI)\r\n                    .contentType(MediaType.MULTIPART_FORM_DATA)\r\n                    .header(HttpHeaders.AUTHORIZATION, authorization)\r\n                    .body(BodyInserters.fromMultipartData(&quot;file&quot;, resource))\r\n                    .exchange()\r\n                    .flatMap(res -&gt; readResponse(res, String.class));\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\nServer side code:\r\n\r\n        public Mono&lt;ServerResponse&gt; createDocument(ServerRequest request) {\r\n        return request.body(toMultipartData())\r\n                .flatMap(parts -&gt; Mono.just((FilePart) parts.toSingleValueMap().get(&quot;file&quot;)))\r\n                .flatMap(part -&gt; {\r\n                    try {\r\n                        String fileId = IdentifierFactory.getInstance().generateIdentifier();\r\n                        File tmp = File.createTempFile(fileId, part.filename());\r\n                        part.transferTo(tmp);\r\n                        String documentId = IdentifierFactory.getInstance().generateIdentifier();\r\n                        String env = request.queryParam(&quot;env&quot;)\r\n                                .orElse(&quot;prod&quot;);\r\n                        CreateDocumentCommand cmd = new CreateDocumentCommand(documentId, tmp, part.filename(), env);\r\n                        return Mono.fromFuture(cmdGateway.send(cmd));\r\n                    } catch (IOException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                })\r\n                .flatMap(res -&gt; ok().body(fromObject(res)));\r\n    }\r\n\r\nAnd I get this error:\r\n\r\n    java.lang.ClassCastException: org.springframework.http.codec.multipart.SynchronossPartHttpMessageReader$SynchronossPart cannot be cast to org.springframework.http.codec.multipart.FilePart\r\n\r\n","title":"WebFlux: Issues uploading file","body":"<p>I'm developing a client to upload a file using webflux reactive client:</p>\n\n<p>This is my client-side code:</p>\n\n<pre><code>private Mono&lt;String&gt; postDocument(String authorization, InputStream content) {\n    try {\n        ByteArrayResource resource = new ByteArrayResource(IOUtils.toByteArray(content));\n        return client.post().uri(DOCS_URI)\n                .contentType(MediaType.MULTIPART_FORM_DATA)\n                .header(HttpHeaders.AUTHORIZATION, authorization)\n                .body(BodyInserters.fromMultipartData(\"file\", resource))\n                .exchange()\n                .flatMap(res -&gt; readResponse(res, String.class));\n    } catch (IOException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n\n<p>Server side code:</p>\n\n<pre><code>    public Mono&lt;ServerResponse&gt; createDocument(ServerRequest request) {\n    return request.body(toMultipartData())\n            .flatMap(parts -&gt; Mono.just((FilePart) parts.toSingleValueMap().get(\"file\")))\n            .flatMap(part -&gt; {\n                try {\n                    String fileId = IdentifierFactory.getInstance().generateIdentifier();\n                    File tmp = File.createTempFile(fileId, part.filename());\n                    part.transferTo(tmp);\n                    String documentId = IdentifierFactory.getInstance().generateIdentifier();\n                    String env = request.queryParam(\"env\")\n                            .orElse(\"prod\");\n                    CreateDocumentCommand cmd = new CreateDocumentCommand(documentId, tmp, part.filename(), env);\n                    return Mono.fromFuture(cmdGateway.send(cmd));\n                } catch (IOException e) {\n                    throw new RuntimeException(e);\n                }\n            })\n            .flatMap(res -&gt; ok().body(fromObject(res)));\n}\n</code></pre>\n\n<p>And I get this error:</p>\n\n<pre><code>java.lang.ClassCastException: org.springframework.http.codec.multipart.SynchronossPartHttpMessageReader$SynchronossPart cannot be cast to org.springframework.http.codec.multipart.FilePart\n</code></pre>\n"},{"tags":["java","spring-boot","performance"],"comments":[{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":1,"creation_date":1662746093,"post_id":73665843,"comment_id":130085345,"body_markdown":"That &quot;benchmark&quot; looks fishy for several reasons: 1) JVM warmup 2) order of benchmarked methods 3) dead code elimination; all of which could affect your results. Add all your employees to a list and print its size at the end of the loop – the results could be totally different.\nBut Spring might as well apply a lot of additional logic to beans, e.g. autowiring dependencies and bean postprocessing.","body":"That &quot;benchmark&quot; looks fishy for several reasons: 1) JVM warmup 2) order of benchmarked methods 3) dead code elimination; all of which could affect your results. Add all your employees to a list and print its size at the end of the loop – the results could be totally different. But Spring might as well apply a lot of additional logic to beans, e.g. autowiring dependencies and bean postprocessing."},{"owner":{"account_id":14964196,"reputation":398,"user_id":10803013,"display_name":"andresmonc"},"score":0,"creation_date":1662746544,"post_id":73665843,"comment_id":130085456,"body_markdown":"@knittl dead code elimination definitely was playing a role. Made the recommended changes and that did slow down the pure Java version but not by much. It completes in ~.06s","body":"@knittl dead code elimination definitely was playing a role. Made the recommended changes and that did slow down the pure Java version but not by much. It completes in ~.06s"},{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":0,"creation_date":1662746553,"post_id":73665843,"comment_id":130085458,"body_markdown":"Just create a `Supplier&lt;Car&gt;` bean, inject it and let that create your instances?","body":"Just create a <code>Supplier&lt;Car&gt;</code> bean, inject it and let that create your instances?"},{"owner":{"account_id":14964196,"reputation":398,"user_id":10803013,"display_name":"andresmonc"},"score":0,"creation_date":1662752249,"post_id":73665843,"comment_id":130086912,"body_markdown":"@daniu similar performance unfortunately","body":"@daniu similar performance unfortunately"},{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":1,"creation_date":1662842436,"post_id":73665843,"comment_id":130101042,"body_markdown":"The question I&#39;d ask myself: do you need _Spring beans_ or can you live with regular objects created by a regular factory? Do you need all that dynamic autowiring, post-processing, proxying, etc.?","body":"The question I&#39;d ask myself: do you need <i>Spring beans</i> or can you live with regular objects created by a regular factory? Do you need all that dynamic autowiring, post-processing, proxying, etc.?"},{"owner":{"account_id":14964196,"reputation":398,"user_id":10803013,"display_name":"andresmonc"},"score":0,"creation_date":1663008634,"post_id":73665843,"comment_id":130133744,"body_markdown":"@knittl yeah I think this is the question. I think we&#39;ll need to engineer things in a way to avoid prototype beans since it&#39;s not performant","body":"@knittl yeah I think this is the question. I think we&#39;ll need to engineer things in a way to avoid prototype beans since it&#39;s not performant"},{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1663013740,"post_id":73665843,"comment_id":130135239,"body_markdown":"@andresmonc not everything needs to be a bean. You can use regular object instances with Spring just fine. Beans are managed by Spring, but if you don&#39;t need that, creating regular instances is the way to go.","body":"@andresmonc not everything needs to be a bean. You can use regular object instances with Spring just fine. Beans are managed by Spring, but if you don&#39;t need that, creating regular instances is the way to go."}],"owner":{"account_id":14964196,"reputation":398,"user_id":10803013,"display_name":"andresmonc"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":241,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662746569,"creation_date":1662745737,"question_id":73665843,"body_markdown":"I work on a team where every little bit of performance on our application is critical. We&#39;re working on migrating from Java to spring boot and there are several instances where we&#39;d need a `ObjectFactory&lt;?&gt;` to handle the dependency injection of required beans. \r\n\r\nI wrote a simple test where we create an object 1 million times using new and 1 million times using spring `ObjectFactory&lt;?&gt;.get()`. I was seeing a huge difference in performance from this where the pure java version took **0.06 seconds** and then the spring version took **23+ seconds**.\r\n\r\n**Test Files**\r\n\r\n*main*\r\n```\r\n@SpringBootApplication\r\npublic class DemoApplication {\r\n\r\n\tpublic static List&lt;Employee&gt; employees = new ArrayList&lt;&gt;();\r\n\r\n\t@Autowired\r\n\tObjectFactory&lt;Employee&gt; employeeObjectFactory;\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tstartSpringless();\r\n\t\tSpringApplication.run(DemoApplication.class, args);\r\n\t\tSystem.out.println(employees.size());\r\n\t}\r\n\r\n\t@PostConstruct\r\n\tpublic void start(){\r\n\t\tvar startTime = System.currentTimeMillis();\r\n\t\tfor (int i = 0; i &lt; 1000000; i++) {\r\n\t\t\tvar employee = employeeObjectFactory.getObject();\r\n\t\t\temployee.goToWork();\r\n\t\t\temployees.add(employee);\r\n\t\t}\r\n\t\tdouble totalTime = System.currentTimeMillis() - startTime;\r\n\t\tSystem.out.println(&quot;Spring seconds: &quot; +totalTime/1000);\r\n\t}\r\n\r\n\tpublic static void startSpringless(){\r\n\t\tvar startTime = System.currentTimeMillis();\r\n\t\tfor (int i = 0; i &lt; 1000000; i++) {\r\n\t\t\tvar employee = new Employee(new Car(), new Clothes());\r\n\t\t\temployee.goToWork();\r\n\t\t\temployees.add(employee);\r\n\t\t}\r\n\t\tdouble totalTime = System.currentTimeMillis() - startTime;\r\n\t\tSystem.out.println(&quot;No Spring seconds: &quot; +totalTime/1000);\r\n\t}\r\n}\r\n```\r\n\r\n*Employee*\r\n```\r\n@Scope(BeanDefinition.SCOPE_PROTOTYPE)\r\n@Component\r\npublic class Employee {\r\n\r\n    private final Car car;\r\n    private final Clothes clothes;\r\n\r\n    @Autowired\r\n    public Employee(Car car, Clothes clothes) {\r\n        this.car = car;\r\n        this.clothes = clothes;\r\n    }\r\n\r\n    public void goToWork(){\r\n    }\r\n}\r\n```\r\n\r\n*Car and Clothes*\r\n```\r\n@Scope(BeanDefinition.SCOPE_PROTOTYPE)\r\n@Component\r\npublic class Car {\r\n}\r\n\r\n@Scope(BeanDefinition.SCOPE_PROTOTYPE)\r\n@Component\r\npublic class Clothes {\r\n}\r\n\r\n```\r\n\r\nIs there anyway to create prototype beans that is more peformant? Or is my performance test not working how I expect it is?","title":"Spring Boot ObjectFactory Performance Cost","body":"<p>I work on a team where every little bit of performance on our application is critical. We're working on migrating from Java to spring boot and there are several instances where we'd need a <code>ObjectFactory&lt;?&gt;</code> to handle the dependency injection of required beans.</p>\n<p>I wrote a simple test where we create an object 1 million times using new and 1 million times using spring <code>ObjectFactory&lt;?&gt;.get()</code>. I was seeing a huge difference in performance from this where the pure java version took <strong>0.06 seconds</strong> and then the spring version took <strong>23+ seconds</strong>.</p>\n<p><strong>Test Files</strong></p>\n<p><em>main</em></p>\n<pre><code>@SpringBootApplication\npublic class DemoApplication {\n\n    public static List&lt;Employee&gt; employees = new ArrayList&lt;&gt;();\n\n    @Autowired\n    ObjectFactory&lt;Employee&gt; employeeObjectFactory;\n\n    public static void main(String[] args) {\n        startSpringless();\n        SpringApplication.run(DemoApplication.class, args);\n        System.out.println(employees.size());\n    }\n\n    @PostConstruct\n    public void start(){\n        var startTime = System.currentTimeMillis();\n        for (int i = 0; i &lt; 1000000; i++) {\n            var employee = employeeObjectFactory.getObject();\n            employee.goToWork();\n            employees.add(employee);\n        }\n        double totalTime = System.currentTimeMillis() - startTime;\n        System.out.println(&quot;Spring seconds: &quot; +totalTime/1000);\n    }\n\n    public static void startSpringless(){\n        var startTime = System.currentTimeMillis();\n        for (int i = 0; i &lt; 1000000; i++) {\n            var employee = new Employee(new Car(), new Clothes());\n            employee.goToWork();\n            employees.add(employee);\n        }\n        double totalTime = System.currentTimeMillis() - startTime;\n        System.out.println(&quot;No Spring seconds: &quot; +totalTime/1000);\n    }\n}\n</code></pre>\n<p><em>Employee</em></p>\n<pre><code>@Scope(BeanDefinition.SCOPE_PROTOTYPE)\n@Component\npublic class Employee {\n\n    private final Car car;\n    private final Clothes clothes;\n\n    @Autowired\n    public Employee(Car car, Clothes clothes) {\n        this.car = car;\n        this.clothes = clothes;\n    }\n\n    public void goToWork(){\n    }\n}\n</code></pre>\n<p><em>Car and Clothes</em></p>\n<pre><code>@Scope(BeanDefinition.SCOPE_PROTOTYPE)\n@Component\npublic class Car {\n}\n\n@Scope(BeanDefinition.SCOPE_PROTOTYPE)\n@Component\npublic class Clothes {\n}\n\n</code></pre>\n<p>Is there anyway to create prototype beans that is more peformant? Or is my performance test not working how I expect it is?</p>\n"},{"tags":["java","class","object","static","heap-memory"],"comments":[{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":1,"creation_date":1662746905,"post_id":73665811,"comment_id":130085572,"body_markdown":"Read here https://www.baeldung.com/java-stack-heap, and don&#39;t worry (for now) about the memory with Java.","body":"Read here <a href=\"https://www.baeldung.com/java-stack-heap\" rel=\"nofollow noreferrer\">baeldung.com/java-stack-heap</a>, and don&#39;t worry (for now) about the memory with Java."}],"answers":[{"tags":[],"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662746128,"creation_date":1662746128,"answer_id":73665906,"question_id":73665811,"body_markdown":"MyDemoClass obj1 = new MyDemoClass();\r\n\r\n&gt; where is obj1 stored??\r\n\r\n    obj1 is just a label/pointer. In memory it will be assigned to the stack. The object that obj1 points to will be on the heap (all objects in Java exist on the heap)\r\n\r\n&gt; and if I do\r\n\r\n&gt; obj1.x = 10;\r\n\r\n&gt; Where is the x stored?\r\n\r\n    x is stored on the heap with the object\r\n\r\n&gt; And if we make variable x static where is this 10 stored?\r\n\r\n    x is then stored on the heap, associated with the MyDemoClass Class object\r\n\r\n\r\n","title":"Where is memory allocated for instances and the values of variables in Java?","body":"<p>MyDemoClass obj1 = new MyDemoClass();</p>\n<blockquote>\n<p>where is obj1 stored??</p>\n</blockquote>\n<pre><code>obj1 is just a label/pointer. In memory it will be assigned to the stack. The object that obj1 points to will be on the heap (all objects in Java exist on the heap)\n</code></pre>\n<blockquote>\n<p>and if I do</p>\n</blockquote>\n<blockquote>\n<p>obj1.x = 10;</p>\n</blockquote>\n<blockquote>\n<p>Where is the x stored?</p>\n</blockquote>\n<pre><code>x is stored on the heap with the object\n</code></pre>\n<blockquote>\n<p>And if we make variable x static where is this 10 stored?</p>\n</blockquote>\n<pre><code>x is then stored on the heap, associated with the MyDemoClass Class object\n</code></pre>\n"}],"owner":{"account_id":22816540,"reputation":13,"user_id":16967068,"display_name":"defaultacc"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73665906,"answer_count":1,"score":1,"last_activity_date":1662746128,"creation_date":1662745496,"question_id":73665811,"body_markdown":"When we instantiate a class where is that stored? and where does the values inside the object are stored.\r\n\r\nexample:\r\n\r\n```MyDemoClass obj1 = new MyDemoClass();```\r\n\r\nwhere is obj1 stored??\r\n\r\nand if I do\r\n\r\n```obj1.x = 10;```\r\n\r\nWhere is the x stored?\r\n\r\nwhere is this 10 stored?\r\n\r\n\r\nAnd if we make variable x static \r\n\r\n\r\n``` \r\nclass MyDemoClass {\r\n    static int x;\r\n    MyDemoClass() {\r\n        x = 10;\r\n    }\r\n}\r\n```\r\n\r\nNow where is x stored and where is value 10 stored?\r\n\r\nCan someone explain it in simple words?\r\n\r\nThank You for taking your time for this newbie doubt!\r\n\r\n","title":"Where is memory allocated for instances and the values of variables in Java?","body":"<p>When we instantiate a class where is that stored? and where does the values inside the object are stored.</p>\n<p>example:</p>\n<p><code>MyDemoClass obj1 = new MyDemoClass();</code></p>\n<p>where is obj1 stored??</p>\n<p>and if I do</p>\n<p><code>obj1.x = 10;</code></p>\n<p>Where is the x stored?</p>\n<p>where is this 10 stored?</p>\n<p>And if we make variable x static</p>\n<pre><code>class MyDemoClass {\n    static int x;\n    MyDemoClass() {\n        x = 10;\n    }\n}\n</code></pre>\n<p>Now where is x stored and where is value 10 stored?</p>\n<p>Can someone explain it in simple words?</p>\n<p>Thank You for taking your time for this newbie doubt!</p>\n"},{"tags":["java","forms","pdf","pdf-generation","pdfbox"],"comments":[{"owner":{"account_id":2181576,"reputation":466,"user_id":2029237,"accept_rate":73,"display_name":"Roberto Murphy"},"score":0,"creation_date":1662903632,"post_id":73665865,"comment_id":130109205,"body_markdown":"CreateCheckBox.java creates a PDF with one checkbox with no label. Does not exactly show how to trigger state change of checkbox by clicking on it&#39;s label. CreateCheckBox.java has no label","body":"CreateCheckBox.java creates a PDF with one checkbox with no label. Does not exactly show how to trigger state change of checkbox by clicking on it&#39;s label. CreateCheckBox.java has no label"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1662907268,"post_id":73665865,"comment_id":130109848,"body_markdown":"Can you share an example PDF with label clicking? Strictly speaking plain PDF does not support active labels. There might be work-arounds, though. If you show us a PDF with such a working work-around, we can try and help you implementing it with PDFBox. But please make sure that it&#39;s not a PDF with an XFA form but with an AcroForm form.","body":"Can you share an example PDF with label clicking? Strictly speaking plain PDF does not support active labels. There might be work-arounds, though. If you show us a PDF with such a working work-around, we can try and help you implementing it with PDFBox. But please make sure that it&#39;s not a PDF with an XFA form but with an AcroForm form."},{"owner":{"account_id":2181576,"reputation":466,"user_id":2029237,"accept_rate":73,"display_name":"Roberto Murphy"},"score":0,"creation_date":1662936511,"post_id":73665865,"comment_id":130115213,"body_markdown":"You are correct, I was mistaken when I remembered having populated a PDF form that allowed activation of a check box or radio button by clicking on the label","body":"You are correct, I was mistaken when I remembered having populated a PDF form that allowed activation of a check box or radio button by clicking on the label"}],"owner":{"account_id":2181576,"reputation":466,"user_id":2029237,"accept_rate":73,"display_name":"Roberto Murphy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662745892,"creation_date":1662745892,"question_id":73665865,"body_markdown":"I have used many PDF forms where if you click on the label for a radio, it &quot;checks&quot; that radio button, if you click the label for a check box, it toggles the &quot;checked&quot; state of that check box. Is there anyway to create these using PDFBox?\r\n\r\n    &lt;!-- I know how to do this in HTML --&gt;\r\n    &lt;input type=&quot;checkbox&quot; name=&quot;example&quot; id=&quot;example&quot;/&gt;\r\n    &lt;label for=&quot;example&quot;&gt;\r\n      This is an example of a checkbox whose state\r\n      can be changed by clicking on it&#39;s label\r\n    &lt;/label&gt;\r\n\r\n","title":"When creating a form using PDFBox, when creating PDRadioButton or PDCheckBox, how do you create a label for each instance that toggles input on click?","body":"<p>I have used many PDF forms where if you click on the label for a radio, it &quot;checks&quot; that radio button, if you click the label for a check box, it toggles the &quot;checked&quot; state of that check box. Is there anyway to create these using PDFBox?</p>\n<pre><code>&lt;!-- I know how to do this in HTML --&gt;\n&lt;input type=&quot;checkbox&quot; name=&quot;example&quot; id=&quot;example&quot;/&gt;\n&lt;label for=&quot;example&quot;&gt;\n  This is an example of a checkbox whose state\n  can be changed by clicking on it's label\n&lt;/label&gt;\n</code></pre>\n"},{"tags":["java","spring","extjs","spring-data-rest"],"comments":[{"owner":{"account_id":4996742,"reputation":800,"user_id":4017037,"display_name":"stacky"},"score":0,"creation_date":1412532115,"post_id":24842224,"comment_id":41094255,"body_markdown":"to resolve your issue, you can try this solution : http://stackoverflow.com/a/25834298/4017037","body":"to resolve your issue, you can try this solution : <a href=\"http://stackoverflow.com/a/25834298/4017037\">stackoverflow.com/a/25834298/4017037</a>"},{"owner":{"account_id":2011139,"reputation":1324,"user_id":1799528,"accept_rate":67,"display_name":"gabi"},"score":0,"creation_date":1436863100,"post_id":24842224,"comment_id":50777663,"body_markdown":"how did you solve your problem eventually?","body":"how did you solve your problem eventually?"}],"answers":[{"tags":[],"owner":{"account_id":4751264,"reputation":135,"user_id":3841240,"accept_rate":50,"display_name":"OchiengOlanga"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1436993616,"creation_date":1436993616,"answer_id":31440875,"question_id":24842224,"body_markdown":"I got rid of the Upload configs in the ApplicationInitializer class and instead created an upload xml config....which apparently worked despite wanting to use Java config only. Find below upload config xml\r\n\r\n    &lt;?xml  version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\r\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;\r\n        http://www.springframework.org/schema/context&quot; http://www.springframework.org/schema/context/spring-context.xsd\r\n        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt;\r\n    \r\n    &lt;bean id=&quot;multipartResolver&quot; class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;&gt;\r\n    \t&lt;property name=&quot;maxUploadSize&quot; value=&quot;7000000&quot; /&gt;\r\n    &lt;/bean&gt;   \r\n\t\r\n&lt;/beans&gt;\r\n\r\n","title":"Spring + ExtJS File Upload Required MultipartFile parameter &#39;file&#39; is not present","body":"<p>I got rid of the Upload configs in the ApplicationInitializer class and instead created an upload xml config....which apparently worked despite wanting to use Java config only. Find below upload config xml</p>\n\n<pre><code>&lt;?xml  version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxmlns:context=\"http://www.springframework.org/schema/context\"\nxmlns:mvc=\"http://www.springframework.org/schema/mvc\"\nxsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\"\n    http://www.springframework.org/schema/context\" http://www.springframework.org/schema/context/spring-context.xsd\n    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd\"&gt;\n\n&lt;bean id=\"multipartResolver\" class=\"org.springframework.web.multipart.commons.CommonsMultipartResolver\"&gt;\n    &lt;property name=\"maxUploadSize\" value=\"7000000\" /&gt;\n&lt;/bean&gt;   \n</code></pre>\n\n<p></p>\n"}],"owner":{"account_id":4751264,"reputation":135,"user_id":3841240,"accept_rate":50,"display_name":"OchiengOlanga"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1997,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1662745696,"creation_date":1405785537,"question_id":24842224,"body_markdown":"I am having a problem uploading files using ExtJS with Spring 4.0.5 with RepositoryRestMVC functionality.\r\n\r\nBriefly, I have a form created by ExtJS and submits the **POST** request to Spring MVC backend.\r\n\r\nI have setup Spring using java config, no xml files.\r\n\r\nHere is my **ApplicationInitializer.class** in Spring:\r\n\r\n    public class ApplicationInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {\r\n\t\r\n\tprivate int maxUploadSizeInMb = 5 * 1024 * 1024; // 5 MB\r\n\t\r\n\t@Override\r\n\tprotected Class&lt;?&gt;[] getRootConfigClasses() {\r\n\t\treturn new Class&lt;?&gt;[]{RootConfig.class};\r\n\t}\r\n\t\r\n\t@Override\r\n\tprotected Class&lt;?&gt;[] getServletConfigClasses() {\r\n\t\treturn new Class&lt;?&gt;[]{};\r\n\t}\r\n\t\r\n\t@Override\r\n\tprotected String[] getServletMappings() {\r\n\t\treturn new String[]{&quot;/&quot;};\r\n\t}\r\n\t\r\n\t@Override\r\n\tprotected Filter[] getServletFilters() {\r\n\t\treturn new Filter[]{new HiddenHttpMethodFilter(), new MultipartFilter()};\r\n\t}\r\n\t\r\n\t@Override\r\n\tprotected void customizeRegistration(ServletRegistration.Dynamic registration) {\t\t\r\n\t\tFile uploadDirectory = RootConfig.APP_STORAGE_UPLOADS_DIRECTORY;\r\n\t\t\r\n\t\tMultipartConfigElement multipartConfigElement = new MultipartConfigElement(\r\n\t\t\t\tuploadDirectory.getAbsolutePath(), maxUploadSizeInMb,\r\n\t\t\t\tmaxUploadSizeInMb * 2, maxUploadSizeInMb / 2);\r\n\t\tregistration.setMultipartConfig(multipartConfigElement);\r\n\t}\r\n\r\n}\r\n\r\nHere is my **WebMvcConfig.class**:\r\n\r\n    @Configuration\r\n    @EnableWebMvc\r\n    @ComponentScan(basePackages = &quot;com.app.controller&quot;)\r\n    public class WebMvcConfig extends WebMvcConfigurerAdapter {\t\r\n\t\r\n\t    @Override\r\n        public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {\r\n            configurer.enable();\r\n        }\r\n\t\r\n\t    @Override\r\n\t    public void addResourceHandlers(ResourceHandlerRegistry registry) {\r\n\t\t    registry.addResourceHandler(&quot;/resources/**&quot;).addResourceLocations(&quot;/resources/&quot;).setCachePeriod(31556926);\r\n\t\t    registry.addResourceHandler(&quot;/js/**&quot;).addResourceLocations(&quot;/js/&quot;);\r\n\t     }\r\n\t\r\n\t    @Bean\r\n\t    public InternalResourceViewResolver getInternalResourceViewResolver() {\r\n\t\t    InternalResourceViewResolver resolver = new InternalResourceViewResolver();\r\n\t\t    resolver.setPrefix(&quot;/WEB-INF/&quot;);\r\n\t\t    resolver.setSuffix(&quot;.html&quot;);\r\n\t\t    return resolver;\r\n\t    }\r\n\t\r\n\t    @Bean\r\n\t    public CommonsMultipartResolver multipartResolver() {\t\t\r\n\t\t    System.out.println(&quot;===========&gt;&gt;&gt; DispatcherCOntext multipartResolver Called:&quot;);\r\n\t\t    CommonsMultipartResolver multipartResolver = new CommonsMultipartResolver();\r\n\t\t    multipartResolver.setMaxUploadSize(7000000);\r\n\t\t    return multipartResolver;\r\n\t    }\r\n\t\r\n    }\r\n\r\nHere is the **FileUploadController.class**:\r\n\r\n    @Controller\r\n    public class FileUploadController {\r\n\t\r\n\t    private final Logger LOG = LoggerFactory.getLogger(getClass());\r\n\t\r\n\t    @RequestMapping(value=&quot;/user/{id}/photo&quot;, method=RequestMethod.POST)\r\n\t    public @ResponseBody List&lt;UploadedFile&gt; upload(\r\n\t\t\t@RequestParam(&quot;file&quot;) MultipartFile file) {\r\n\t\t    // Do custom steps here\r\n\t\t   // i.e. Save the file to a temporary location or database\r\n\t\t    LOG.debug(&quot;Writing file to disk...done&quot;);\r\n\t\t\r\n\t\t    List&lt;UploadedFile&gt; uploadedFiles = new ArrayList&lt;UploadedFile&gt;();\r\n\t\t    UploadedFile u = new UploadedFile(file.getOriginalFilename(),\r\n\t\t\t\tLong.valueOf(file.getSize()).intValue(),\r\n\t\t\t\t&quot;http://localhost:8080/AppPhoto/resources/&quot;+file.getOriginalFilename());\r\n\r\n\t\t    uploadedFiles.add(u);\r\n\t\t    return uploadedFiles;\r\n\t    }\r\n    }\r\n\r\n**UploadedFile.class** Looks like this:\r\n\r\n    public class UploadedFile implements Serializable {\r\n\r\n\t    private static final long serialVersionUID = -38331060124340967L;\r\n\t    private String name;\r\n\t    private Integer size;\r\n\t    private String url;\r\n\t    private String thumbnail_url;\r\n\t    private String delete_url;\r\n\t    private String delete_type;\r\n\t\r\n\t    public UploadedFile() {\r\n\t    \tsuper();\r\n\t    }\r\n\t\r\n\t    public UploadedFile(String name, Integer size, String url) {\r\n\t    \tsuper();\r\n\t    \tthis.name = name;\r\n\t    \tthis.size = size;\r\n\t    \tthis.url = url;\r\n\t    }\r\n\t\r\n\t    public UploadedFile(String name, Integer size, String url,\r\n\t\t\tString thumbnail_url, String delete_url, String delete_type) {\r\n\t    \tsuper();\r\n\t    \tthis.name = name;\r\n\t    \tthis.size = size;\r\n\t    \tthis.url = url;\r\n\t    \tthis.thumbnail_url = thumbnail_url;\r\n\t    \tthis.delete_url = delete_url;\r\n\t    \tthis.delete_type = delete_type;\r\n\t    }\r\n\t    \r\n\t    //getter and setters\r\n\t\r\n\t    @Override\r\n\t    public String toString() {\r\n\t    \treturn &quot;UploadedFile [name=&quot; + name + &quot;, size=&quot; + size + &quot;, url=&quot; + url\r\n\t\t\t\t+ &quot;, thumbnail_url=&quot; + thumbnail_url + &quot;, delete_url=&quot;\r\n\t\t\t\t+ delete_url + &quot;, delete_type=&quot; + delete_type + &quot;]&quot;;\r\n\t    }\r\n\r\n    }\r\n\r\nLets first look at the ExtJS **upload form** is as follow:\r\n\r\n    Ext.define(&#39;FHR.view.MyForm11&#39;, {\r\n    extend: &#39;Ext.form.Panel&#39;,\r\n    requires: [\r\n        &#39;Ext.form.field.File&#39;,\r\n        &#39;Ext.toolbar.Toolbar&#39;,\r\n        &#39;Ext.button.Button&#39;\r\n    ],\r\n    title: &#39;My Form&#39;,\r\n    url:&#39;user/1/photo&#39;,\r\n    initComponent: function() {\r\n        var me = this;\r\n        Ext.applyIf(me, {\r\n            items: [\r\n                {\r\n                    xtype: &#39;filefield&#39;,\r\n                    anchor: &#39;100%&#39;,\r\n                    fieldLabel: &#39;Profile Photo&#39;,\r\n                    name: &#39;file&#39;,\r\n                    allowBlank: false\r\n                }\r\n            ],\r\n            dockedItems: [\r\n                {\r\n                    xtype: &#39;toolbar&#39;,\r\n                    dock: &#39;bottom&#39;,\r\n                    items: [\r\n                        {\r\n                            xtype: &#39;button&#39;,\r\n                            handler: function(button, e) {   \r\n                                var form = button.up(&#39;form&#39;).getForm();\r\n                                if (form.isValid()) {\r\n                                    form.submit({\r\n                                        success: function(form, action) {\r\n                                            // show message alert box\r\n                                        },\r\n                                        failure: function(form, action) {\r\n                                            // show message alert box\r\n                                        }\r\n                                    });\r\n                                } else { // display error alert if the data is invalid\r\n                                   // show message alert box\r\n                                }\r\n                            },\r\n                            text: &#39;Upload&#39;\r\n                        }\r\n                    ]\r\n                }\r\n            ]\r\n        });\r\n\r\n**Here is the Problem**\r\n\r\nOn submission of the **POST** request, I get a **400 Bad request Response**\r\n\r\n**Required MultipartFile parameter &#39;file&#39; is not present**\r\n\r\nAny form of assistance will be appreciated.\r\n\r\nMay the Force be with you","title":"Spring + ExtJS File Upload Required MultipartFile parameter &#39;file&#39; is not present","body":"<p>I am having a problem uploading files using ExtJS with Spring 4.0.5 with RepositoryRestMVC functionality.</p>\n\n<p>Briefly, I have a form created by ExtJS and submits the <strong>POST</strong> request to Spring MVC backend.</p>\n\n<p>I have setup Spring using java config, no xml files.</p>\n\n<p>Here is my <strong>ApplicationInitializer.class</strong> in Spring:</p>\n\n<pre><code>public class ApplicationInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {\n\nprivate int maxUploadSizeInMb = 5 * 1024 * 1024; // 5 MB\n\n@Override\nprotected Class&lt;?&gt;[] getRootConfigClasses() {\n    return new Class&lt;?&gt;[]{RootConfig.class};\n}\n\n@Override\nprotected Class&lt;?&gt;[] getServletConfigClasses() {\n    return new Class&lt;?&gt;[]{};\n}\n\n@Override\nprotected String[] getServletMappings() {\n    return new String[]{\"/\"};\n}\n\n@Override\nprotected Filter[] getServletFilters() {\n    return new Filter[]{new HiddenHttpMethodFilter(), new MultipartFilter()};\n}\n\n@Override\nprotected void customizeRegistration(ServletRegistration.Dynamic registration) {        \n    File uploadDirectory = RootConfig.APP_STORAGE_UPLOADS_DIRECTORY;\n\n    MultipartConfigElement multipartConfigElement = new MultipartConfigElement(\n            uploadDirectory.getAbsolutePath(), maxUploadSizeInMb,\n            maxUploadSizeInMb * 2, maxUploadSizeInMb / 2);\n    registration.setMultipartConfig(multipartConfigElement);\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Here is my <strong>WebMvcConfig.class</strong>:</p>\n\n<pre><code>@Configuration\n@EnableWebMvc\n@ComponentScan(basePackages = \"com.app.controller\")\npublic class WebMvcConfig extends WebMvcConfigurerAdapter { \n\n    @Override\n    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {\n        configurer.enable();\n    }\n\n    @Override\n    public void addResourceHandlers(ResourceHandlerRegistry registry) {\n        registry.addResourceHandler(\"/resources/**\").addResourceLocations(\"/resources/\").setCachePeriod(31556926);\n        registry.addResourceHandler(\"/js/**\").addResourceLocations(\"/js/\");\n     }\n\n    @Bean\n    public InternalResourceViewResolver getInternalResourceViewResolver() {\n        InternalResourceViewResolver resolver = new InternalResourceViewResolver();\n        resolver.setPrefix(\"/WEB-INF/\");\n        resolver.setSuffix(\".html\");\n        return resolver;\n    }\n\n    @Bean\n    public CommonsMultipartResolver multipartResolver() {       \n        System.out.println(\"===========&gt;&gt;&gt; DispatcherCOntext multipartResolver Called:\");\n        CommonsMultipartResolver multipartResolver = new CommonsMultipartResolver();\n        multipartResolver.setMaxUploadSize(7000000);\n        return multipartResolver;\n    }\n\n}\n</code></pre>\n\n<p>Here is the <strong>FileUploadController.class</strong>:</p>\n\n<pre><code>@Controller\npublic class FileUploadController {\n\n    private final Logger LOG = LoggerFactory.getLogger(getClass());\n\n    @RequestMapping(value=\"/user/{id}/photo\", method=RequestMethod.POST)\n    public @ResponseBody List&lt;UploadedFile&gt; upload(\n        @RequestParam(\"file\") MultipartFile file) {\n        // Do custom steps here\n       // i.e. Save the file to a temporary location or database\n        LOG.debug(\"Writing file to disk...done\");\n\n        List&lt;UploadedFile&gt; uploadedFiles = new ArrayList&lt;UploadedFile&gt;();\n        UploadedFile u = new UploadedFile(file.getOriginalFilename(),\n            Long.valueOf(file.getSize()).intValue(),\n            \"http://localhost:8080/AppPhoto/resources/\"+file.getOriginalFilename());\n\n        uploadedFiles.add(u);\n        return uploadedFiles;\n    }\n}\n</code></pre>\n\n<p><strong>UploadedFile.class</strong> Looks like this:</p>\n\n<pre><code>public class UploadedFile implements Serializable {\n\n    private static final long serialVersionUID = -38331060124340967L;\n    private String name;\n    private Integer size;\n    private String url;\n    private String thumbnail_url;\n    private String delete_url;\n    private String delete_type;\n\n    public UploadedFile() {\n        super();\n    }\n\n    public UploadedFile(String name, Integer size, String url) {\n        super();\n        this.name = name;\n        this.size = size;\n        this.url = url;\n    }\n\n    public UploadedFile(String name, Integer size, String url,\n        String thumbnail_url, String delete_url, String delete_type) {\n        super();\n        this.name = name;\n        this.size = size;\n        this.url = url;\n        this.thumbnail_url = thumbnail_url;\n        this.delete_url = delete_url;\n        this.delete_type = delete_type;\n    }\n\n    //getter and setters\n\n    @Override\n    public String toString() {\n        return \"UploadedFile [name=\" + name + \", size=\" + size + \", url=\" + url\n            + \", thumbnail_url=\" + thumbnail_url + \", delete_url=\"\n            + delete_url + \", delete_type=\" + delete_type + \"]\";\n    }\n\n}\n</code></pre>\n\n<p>Lets first look at the ExtJS <strong>upload form</strong> is as follow:</p>\n\n<pre><code>Ext.define('FHR.view.MyForm11', {\nextend: 'Ext.form.Panel',\nrequires: [\n    'Ext.form.field.File',\n    'Ext.toolbar.Toolbar',\n    'Ext.button.Button'\n],\ntitle: 'My Form',\nurl:'user/1/photo',\ninitComponent: function() {\n    var me = this;\n    Ext.applyIf(me, {\n        items: [\n            {\n                xtype: 'filefield',\n                anchor: '100%',\n                fieldLabel: 'Profile Photo',\n                name: 'file',\n                allowBlank: false\n            }\n        ],\n        dockedItems: [\n            {\n                xtype: 'toolbar',\n                dock: 'bottom',\n                items: [\n                    {\n                        xtype: 'button',\n                        handler: function(button, e) {   \n                            var form = button.up('form').getForm();\n                            if (form.isValid()) {\n                                form.submit({\n                                    success: function(form, action) {\n                                        // show message alert box\n                                    },\n                                    failure: function(form, action) {\n                                        // show message alert box\n                                    }\n                                });\n                            } else { // display error alert if the data is invalid\n                               // show message alert box\n                            }\n                        },\n                        text: 'Upload'\n                    }\n                ]\n            }\n        ]\n    });\n</code></pre>\n\n<p><strong>Here is the Problem</strong></p>\n\n<p>On submission of the <strong>POST</strong> request, I get a <strong>400 Bad request Response</strong></p>\n\n<p><strong>Required MultipartFile parameter 'file' is not present</strong></p>\n\n<p>Any form of assistance will be appreciated.</p>\n\n<p>May the Force be with you</p>\n"},{"tags":["java","eclipse","console"],"comments":[{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1662745823,"post_id":73665759,"comment_id":130085276,"body_markdown":"Steps to reproduce? Take a look a `Common` tab on tomcat launch config.","body":"Steps to reproduce? Take a look a <code>Common</code> tab on tomcat launch config."},{"owner":{"account_id":287582,"reputation":173,"user_id":587484,"display_name":"Romulo Diniz"},"score":0,"creation_date":1662748240,"post_id":73665759,"comment_id":130085926,"body_markdown":"I would focus on the tomcat settings, this is not the behavior for all debug sessions","body":"I would focus on the tomcat settings, this is not the behavior for all debug sessions"}],"owner":{"account_id":11420677,"reputation":21,"user_id":8372253,"display_name":"Colpachi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662745245,"creation_date":1662745245,"question_id":73665759,"body_markdown":"Is there a way to clear the console output from a previous debug session in Eclipse?\r\n\r\nEvery time I stop my server and launch again, it is needed to perform a &quot;clear console&quot; right click to clear off the outputs so the current logs are not mixed up with the previous ones.\r\n\r\nI&#39;m wondering if there is an automated way of doing this by some configuration in Eclipse, not programatically.\r\n\r\nAfter some researches in questions unfortunately did not find any result to adress this. \r\n\r\nEclipse version: 2022-03 (4.23.0)\r\nBuild id: 20220310-1457\r\n\r\nTried:\r\n* Finding Eclipse configurations for clearing console output after starting a ApacheTomcat server.\r\n\r\nIt is expected:\r\n* Having Console tab cleared right after a debug session is initiated.","title":"Clearing Eclipse console after launching a debug session","body":"<p>Is there a way to clear the console output from a previous debug session in Eclipse?</p>\n<p>Every time I stop my server and launch again, it is needed to perform a &quot;clear console&quot; right click to clear off the outputs so the current logs are not mixed up with the previous ones.</p>\n<p>I'm wondering if there is an automated way of doing this by some configuration in Eclipse, not programatically.</p>\n<p>After some researches in questions unfortunately did not find any result to adress this.</p>\n<p>Eclipse version: 2022-03 (4.23.0)\nBuild id: 20220310-1457</p>\n<p>Tried:</p>\n<ul>\n<li>Finding Eclipse configurations for clearing console output after starting a ApacheTomcat server.</li>\n</ul>\n<p>It is expected:</p>\n<ul>\n<li>Having Console tab cleared right after a debug session is initiated.</li>\n</ul>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8946,"page":1046,"page_size":100}
