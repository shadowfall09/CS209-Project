{"items":[{"tags":["java","java.util.scanner","system.in"],"comments":[{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":0,"creation_date":1618547744,"post_id":67118992,"comment_id":118639208,"body_markdown":"`System.in` represents the console, `Scanner` represents something that can be used to read inputs, and `nextInt()` is just a way to actually make the application stop and wait to get an input. The only active thing here is the `nextInt()` call that triggers all of this.","body":"<code>System.in</code> represents the console, <code>Scanner</code> represents something that can be used to read inputs, and <code>nextInt()</code> is just a way to actually make the application stop and wait to get an input. The only active thing here is the <code>nextInt()</code> call that triggers all of this."}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1618546565,"creation_date":1618546565,"answer_id":67119022,"question_id":67118992,"body_markdown":"`System.in` is read _from_, it doesn&#39;t read itself. \r\n\r\nThe `Scanner` class helps parse input that it gets from the input source you give it. \r\n In this case, you&#39;ve given it `System.in`, so it reads input from there. \r\n\r\n`nextInt()` is one of the methods `Scanner` provides to help you parse input.  Specifically, it parses an integer.\r\n\r\n","title":"distinguish the working of Scanner, System.in, and next() methods that the Scanner class provides in java?","body":"<p><code>System.in</code> is read <em>from</em>, it doesn't read itself.</p>\n<p>The <code>Scanner</code> class helps parse input that it gets from the input source you give it.\nIn this case, you've given it <code>System.in</code>, so it reads input from there.</p>\n<p><code>nextInt()</code> is one of the methods <code>Scanner</code> provides to help you parse input.  Specifically, it parses an integer.</p>\n"},{"comments":[{"owner":{"account_id":20906909,"reputation":53,"user_id":15358612,"display_name":"mockingbird"},"score":0,"creation_date":1618627260,"post_id":67119363,"comment_id":118666176,"body_markdown":"I learned new things from your answer previously I am not aware of,1) so the input we enter from the keyword is read first by the System.in as bytes?  2) Then from System.in, the Scanner converts the bytes into characters(is it char data type ?) and then into tokens(tokens are texts right? so is it strings),","body":"I learned new things from your answer previously I am not aware of,1) so the input we enter from the keyword is read first by the System.in as bytes?  2) Then from System.in, the Scanner converts the bytes into characters(is it char data type ?) and then into tokens(tokens are texts right? so is it strings),"},{"owner":{"account_id":20906909,"reputation":53,"user_id":15358612,"display_name":"mockingbird"},"score":0,"creation_date":1618627559,"post_id":67119363,"comment_id":118666204,"body_markdown":"3) nextInt() then reads the inputs from the Scanner, the input from the Scanner is tokens and what nextInt90 does is, parse the tokens into an integer?","body":"3) nextInt() then reads the inputs from the Scanner, the input from the Scanner is tokens and what nextInt90 does is, parse the tokens into an integer?"},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1618628146,"post_id":67119363,"comment_id":118666282,"body_markdown":"@mockingbird 1) yes 2) Yes, if you look really deep down there, there will be `char`s. And yes, tokens are strings. 3) You seem to think the scanner and `nextInt` are separate things. No. `nextInt` is a thing that you can ask a scanner to do - &quot;hey, scanner, read the next token, and parse it to an int&quot;. **The scanner doesn&#39;t read anything unless you tell to `nextInt`, or `next`, or `nextFloat`, etc**","body":"@mockingbird 1) yes 2) Yes, if you look really deep down there, there will be <code>char</code>s. And yes, tokens are strings. 3) You seem to think the scanner and <code>nextInt</code> are separate things. No. <code>nextInt</code> is a thing that you can ask a scanner to do - &quot;hey, scanner, read the next token, and parse it to an int&quot;. <b>The scanner doesn&#39;t read anything unless you tell to <code>nextInt</code>, or <code>next</code>, or <code>nextFloat</code>, etc</b>"},{"owner":{"account_id":20906909,"reputation":53,"user_id":15358612,"display_name":"mockingbird"},"score":0,"creation_date":1618629531,"post_id":67119363,"comment_id":118666451,"body_markdown":"Yeah yeah now I understand, Scanner won&#39;t do anything until invoking methods like next() or nextInt(), thanks man really...","body":"Yeah yeah now I understand, Scanner won&#39;t do anything until invoking methods like next() or nextInt(), thanks man really..."},{"owner":{"account_id":20906909,"reputation":53,"user_id":15358612,"display_name":"mockingbird"},"score":0,"creation_date":1618642093,"post_id":67119363,"comment_id":118668228,"body_markdown":"Understanding System.in, is this right 1) From System.in, the Scanner gets its input to read.\n2) System.in gets the input directly from the console(keyboard) as byte data type and transfer to the Scanner to read, parse, and so on. 3) so System.in don&#39;t read anything, it&#39;s just there to receive input from the console(keyboard) and transfer it back to the Scanner? if I am wrong, help me understand it","body":"Understanding System.in, is this right 1) From System.in, the Scanner gets its input to read. 2) System.in gets the input directly from the console(keyboard) as byte data type and transfer to the Scanner to read, parse, and so on. 3) so System.in don&#39;t read anything, it&#39;s just there to receive input from the console(keyboard) and transfer it back to the Scanner? if I am wrong, help me understand it"},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1618642960,"post_id":67119363,"comment_id":118668408,"body_markdown":"@mockingbird As far as Java is concerned, we say that `System.in` _is_ the standard stream of input from which you can get bytes from. The console is in no way &quot;directly&quot; connected to it. Your OS/the JVM decides that the standard input stream should be the console. `System.in` also doesn&#39;t transfer bytes to `Scanner` - `Scanner` _asks_ for bytes (again very indirectly).","body":"@mockingbird As far as Java is concerned, we say that <code>System.in</code> <i>is</i> the standard stream of input from which you can get bytes from. The console is in no way &quot;directly&quot; connected to it. Your OS/the JVM decides that the standard input stream should be the console. <code>System.in</code> also doesn&#39;t transfer bytes to <code>Scanner</code> - <code>Scanner</code> <i>asks</i> for bytes (again very indirectly)."},{"owner":{"account_id":20906909,"reputation":53,"user_id":15358612,"display_name":"mockingbird"},"score":0,"creation_date":1618643768,"post_id":67119363,"comment_id":118668559,"body_markdown":"So, System.in don&#39;t transfer the input it received from the console to the Scanner, the Scanner takes the input from the System.in? 2) what do you mean by Scanner asks for bytes?","body":"So, System.in don&#39;t transfer the input it received from the console to the Scanner, the Scanner takes the input from the System.in? 2) what do you mean by Scanner asks for bytes?"},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1618643881,"post_id":67119363,"comment_id":118668579,"body_markdown":"@mockingbird Look, this starts to feel like a discussion, which is not what Stack Overflow, or the comment section is for. I&#39;m also not your personal tutor. Frankly, I&#39;m not sure if you have thoroughly read my answer. I would recommend that you do some exploration yourself. You can start from [`Scanner.readInput`](https://github.com/openjdk-mirror/jdk7u-jdk/blob/master/src/share/classes/java/util/Scanner.java#L838), which `nextInt` calls.","body":"@mockingbird Look, this starts to feel like a discussion, which is not what Stack Overflow, or the comment section is for. I&#39;m also not your personal tutor. Frankly, I&#39;m not sure if you have thoroughly read my answer. I would recommend that you do some exploration yourself. You can start from <a href=\"https://github.com/openjdk-mirror/jdk7u-jdk/blob/master/src/share/classes/java/util/Scanner.java#L838\" rel=\"nofollow noreferrer\"><code>Scanner.readInput</code></a>, which <code>nextInt</code> calls."},{"owner":{"account_id":20906909,"reputation":53,"user_id":15358612,"display_name":"mockingbird"},"score":0,"creation_date":1618644391,"post_id":67119363,"comment_id":118668692,"body_markdown":"Yeah, your right i started pestering you, sorry for that...  i am trying to understand, i just get doubts after reading everything you posted","body":"Yeah, your right i started pestering you, sorry for that...  i am trying to understand, i just get doubts after reading everything you posted"}],"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":9,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1618549286,"creation_date":1618549286,"answer_id":67119363,"question_id":67118992,"body_markdown":"`System.in` is an `InputStream` that (by default) provides user input from the console. You can read from it directly by using `read`:\r\n\r\n    int someByte = System.in.read();\r\n\r\nNote that this reads an unsigned byte (Java doesn&#39;t have a type for unsigned bytes, so the type is `int`). For example, if I entered `1` in my console, the above will store 49 into `someByte`, because 49 is the first byte that the _character_ `1` is encoded as.\r\n\r\nIf you want to `someByte` to be 1 instead, using `System.in.read` is clearly not very helpful, is it? We don&#39;t want to _just_ read the bytes. We want to read the bytes, and use a particular encoding to convert those bytes to characters and then _parse_ the string of characters to a number. This is what `Scanner` does.\r\n\r\nA `Scanner` can take an input stream, and read bytes from it on demand, understands them as characters using a default encoding, then it groups chunks of characters together into _tokens_. One way for a `Scanner` to read stuff is by calling `nextInt`. What `nextInt` does is: read bytes until it finds a complete token, and parses it to an integer. \r\n\r\nIn short, `System.in` gives you the raw bytes, `Scanner` gives you tokens, parsed or otherwise. Hopefully that answers your first and third question.\r\n\r\n&gt; when we type(enter) input from the console, where is it going? to the System.in?\r\n\r\nYes, at this level of abstraction, you can say that&#39;s the first place it will go. Then the bytes you inputted then get passed to `Scanner`, which then transforms them into tokens, and then parsed.","title":"distinguish the working of Scanner, System.in, and next() methods that the Scanner class provides in java?","body":"<p><code>System.in</code> is an <code>InputStream</code> that (by default) provides user input from the console. You can read from it directly by using <code>read</code>:</p>\n<pre><code>int someByte = System.in.read();\n</code></pre>\n<p>Note that this reads an unsigned byte (Java doesn't have a type for unsigned bytes, so the type is <code>int</code>). For example, if I entered <code>1</code> in my console, the above will store 49 into <code>someByte</code>, because 49 is the first byte that the <em>character</em> <code>1</code> is encoded as.</p>\n<p>If you want to <code>someByte</code> to be 1 instead, using <code>System.in.read</code> is clearly not very helpful, is it? We don't want to <em>just</em> read the bytes. We want to read the bytes, and use a particular encoding to convert those bytes to characters and then <em>parse</em> the string of characters to a number. This is what <code>Scanner</code> does.</p>\n<p>A <code>Scanner</code> can take an input stream, and read bytes from it on demand, understands them as characters using a default encoding, then it groups chunks of characters together into <em>tokens</em>. One way for a <code>Scanner</code> to read stuff is by calling <code>nextInt</code>. What <code>nextInt</code> does is: read bytes until it finds a complete token, and parses it to an integer.</p>\n<p>In short, <code>System.in</code> gives you the raw bytes, <code>Scanner</code> gives you tokens, parsed or otherwise. Hopefully that answers your first and third question.</p>\n<blockquote>\n<p>when we type(enter) input from the console, where is it going? to the System.in?</p>\n</blockquote>\n<p>Yes, at this level of abstraction, you can say that's the first place it will go. Then the bytes you inputted then get passed to <code>Scanner</code>, which then transforms them into tokens, and then parsed.</p>\n"}],"owner":{"account_id":20906909,"reputation":53,"user_id":15358612,"display_name":"mockingbird"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":294,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":67119363,"answer_count":2,"score":0,"last_activity_date":1683773641,"creation_date":1618546359,"question_id":67118992,"body_markdown":"\r\n  \r\n\r\n      Scanner scanner = new Scanner(System.in);\r\n    \r\n        System.out.println(&quot;enter number :&quot;);\r\n        int number = scanner.nextInt();\r\n        System.out.println(&quot;Number is &quot; + number);\r\n\r\nlet me go through step by step to explain my understanding,\r\n\r\n    Scanner scanner = new Scanner(System.in);  \r\n\r\n- The Scanner is one of the java In-built classes and it is one of the ways we can use it to read user input.\r\n\r\n-  scanner is the identifier of the object we created.\r\n\r\n- Using `new`, we create an instance of the object.\r\n\r\n- `System.in` helps us to take the inputs from the console(keyboard)  \r\n\r\n    System.out.println(&quot;enter number :&quot;);\r\n\r\n- prints the &quot; enter number : &quot;.\r\n\r\n    int number = scanner.nextInt();\r\n\r\n- Reads the input given to the system.in from console(keyboard) and parse(convert) the input  to an int  and stores it in the variable number.\r\n\r\n    System.out.println(&quot;Number is &quot; + number);\r\n\r\n- prints  the statement &quot;Number is &quot; + number(input stored in the variable number));\r\n\r\nthis is my vague understanding I think and I am not certain of my knowledge.\r\n\r\nmy questions are;\r\n\r\n1) Scanner class is used to read user input, then System.in also is used to read input?   isn&#39;t it?  it will be a help to explain the clear distinction between these two terms?\r\n\r\n2) when we type(enter) input from the console, where is it going? to the System.in? \r\n\r\n  does System.in storing the values? \r\n\r\n3) nextInt() method is also used to read inputs? how it works?  is it read input that is already been read by the System.in and then parses to an int?\r\n\r\nThe scanner reads, System.in reads, nextInt() reads, everything reads? I can&#39;t able to distinguish the workings of these?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Zq8q4.png\r\n  [2]: https://i.stack.imgur.com/EuzrX.png\r\n","title":"distinguish the working of Scanner, System.in, and next() methods that the Scanner class provides in java?","body":"<pre><code>  Scanner scanner = new Scanner(System.in);\n\n    System.out.println(&quot;enter number :&quot;);\n    int number = scanner.nextInt();\n    System.out.println(&quot;Number is &quot; + number);\n</code></pre>\n<p>let me go through step by step to explain my understanding,</p>\n<pre><code>Scanner scanner = new Scanner(System.in);  \n</code></pre>\n<ul>\n<li><p>The Scanner is one of the java In-built classes and it is one of the ways we can use it to read user input.</p>\n</li>\n<li><p>scanner is the identifier of the object we created.</p>\n</li>\n<li><p>Using <code>new</code>, we create an instance of the object.</p>\n</li>\n<li><p><code>System.in</code> helps us to take the inputs from the console(keyboard)</p>\n<p>System.out.println(&quot;enter number :&quot;);</p>\n</li>\n<li><p>prints the &quot; enter number : &quot;.</p>\n<p>int number = scanner.nextInt();</p>\n</li>\n<li><p>Reads the input given to the system.in from console(keyboard) and parse(convert) the input  to an int  and stores it in the variable number.</p>\n<p>System.out.println(&quot;Number is &quot; + number);</p>\n</li>\n<li><p>prints  the statement &quot;Number is &quot; + number(input stored in the variable number));</p>\n</li>\n</ul>\n<p>this is my vague understanding I think and I am not certain of my knowledge.</p>\n<p>my questions are;</p>\n<ol>\n<li><p>Scanner class is used to read user input, then System.in also is used to read input?   isn't it?  it will be a help to explain the clear distinction between these two terms?</p>\n</li>\n<li><p>when we type(enter) input from the console, where is it going? to the System.in?</p>\n</li>\n</ol>\n<p>does System.in storing the values?</p>\n<ol start=\"3\">\n<li>nextInt() method is also used to read inputs? how it works?  is it read input that is already been read by the System.in and then parses to an int?</li>\n</ol>\n<p>The scanner reads, System.in reads, nextInt() reads, everything reads? I can't able to distinguish the workings of these?</p>\n"},{"tags":["java","selenium-webdriver","datepicker"],"comments":[{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1631747837,"post_id":69200356,"comment_id":122308795,"body_markdown":"That exception usually means you are sending an action to a webelement that isn&#39;t designed to take that action.  This suggests you are targeting the wrong webelement.  (//h4 maybe?)  You should specify which line throws the exception.","body":"That exception usually means you are sending an action to a webelement that isn&#39;t designed to take that action.  This suggests you are targeting the wrong webelement.  (//h4 maybe?)  You should specify which line throws the exception."},{"owner":{"account_id":22764328,"reputation":1,"user_id":16922631,"display_name":"Sri"},"score":0,"creation_date":1631750052,"post_id":69200356,"comment_id":122309179,"body_markdown":"It is inside a div tag\n   &lt;a class=&quot;ui-datepicker-prev ui-corner-all ui-state-disabled&quot; title=&quot;Prev&quot;&gt;\n      &lt;span class=&quot;ui-icon ui-icon-circle-triangle-w&quot;&gt;Prev&lt;/span&gt;\n   &lt;/a&gt;\n   &lt;a class=&quot;ui-datepicker-next ui-corner-all&quot; data-handler=&quot;next&quot; data-event=&quot;click&quot; title=&quot;Next&quot;&gt;\n      &lt;span class=&quot;ui-icon ui-icon-circle-triangle-e&quot;&gt;Next&lt;/span&gt;\n   &lt;/a&gt;\n  &lt;div class=&quot;ui-datepicker-title&quot;&gt;\n   &lt;span class=&quot;ui-datepicker-month&quot;&gt;September&lt;/span&gt;&amp;nbsp;\n   &lt;span class=&quot;ui-datepicker-year&quot;&gt;2021&lt;/span&gt;\n  &lt;/div&gt;\n&lt;/div&gt;","body":"It is inside a div tag    &lt;a class=&quot;ui-datepicker-prev ui-corner-all ui-state-disabled&quot; title=&quot;Prev&quot;&gt;       &lt;span class=&quot;ui-icon ui-icon-circle-triangle-w&quot;&gt;Prev&lt;/span&gt;    &lt;/a&gt;    &lt;a class=&quot;ui-datepicker-next ui-corner-all&quot; data-handler=&quot;next&quot; data-event=&quot;click&quot; title=&quot;Next&quot;&gt;       &lt;span class=&quot;ui-icon ui-icon-circle-triangle-e&quot;&gt;Next&lt;/span&gt;    &lt;/a&gt;   &lt;div class=&quot;ui-datepicker-title&quot;&gt;    &lt;span class=&quot;ui-datepicker-month&quot;&gt;September&lt;/span&gt;&amp;nbsp;    &lt;span class=&quot;ui-datepicker-year&quot;&gt;2021&lt;/span&gt;   &lt;/div&gt; &lt;/div&gt;"},{"owner":{"account_id":10489136,"reputation":2762,"user_id":7731623,"display_name":"Nandan A"},"score":1,"creation_date":1631766139,"post_id":69200356,"comment_id":122311576,"body_markdown":"Is it possible to share url ?","body":"Is it possible to share url ?"},{"owner":{"account_id":6386919,"reputation":8069,"user_id":5737950,"display_name":"nima"},"score":0,"creation_date":1631778904,"post_id":69200356,"comment_id":122315270,"body_markdown":"Hi, please write a summarized title and put the rest of the explanation in the body. Good luck &#128578;","body":"Hi, please write a summarized title and put the rest of the explanation in the body. Good luck ðŸ™‚"},{"owner":{"account_id":6386919,"reputation":8069,"user_id":5737950,"display_name":"nima"},"score":0,"creation_date":1631778920,"post_id":69200356,"comment_id":122315278,"body_markdown":"please take a moment and read this article https://stackoverflow.com/help/how-to-ask about how to asking questions also read this article https://stackoverflow.com/help/minimal-reproducible-example about how to ask a good question with minimum requirement.","body":"please take a moment and read this article <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> about how to asking questions also read this article <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a> about how to ask a good question with minimum requirement."},{"owner":{"account_id":14199152,"reputation":796,"user_id":10257512,"display_name":"Jayanth Bala"},"score":0,"creation_date":1631865262,"post_id":69200356,"comment_id":122342952,"body_markdown":"Please share us the screen shot or small video clip, which will be helpful for us to debug.","body":"Please share us the screen shot or small video clip, which will be helpful for us to debug."}],"owner":{"account_id":22764328,"reputation":1,"user_id":16922631,"display_name":"Sri"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683773609,"creation_date":1631744372,"question_id":69200356,"body_markdown":"\r\n\r\n        public boolean dateCheck(String doctorName,String dateAppointment,String Time,String symptom) throws Exception\r\n           {\t   \t   \r\n        \t    driver.findElement(By.xpath(&quot;//span[contains(text(),&#39;Schedule Appointment&#39;)]&quot;)).click();\r\n        \t\t driver.findElement(By.xpath(&quot;//input[@value=&#39;Create new appointment&#39;]&quot;)).click();\r\n        \t \r\n        driver.findElement(By.xpath(&quot;//h4[contains(text(),&#39;&quot;+doctorName+&quot;&#39;)]/ancestor::ul/&quot;\r\n        \t\t \t\t+ &quot;following-sibling::button[contains(text(),&#39;Book Appointment&#39;)]&quot;)).click();\r\n    \t\t \r\n    \t\t calendarFrame=driver.findElement(By.xpath(&quot;//iframe[@id=&#39;myframe&#39;]&quot;));\r\n    \t     driver.switchTo().frame(calendarFrame);\t     \r\n    \t\t driver.findElement(By.xpath(&quot;//input[@id=&#39;datepicker&#39;]&quot;)).click();\r\n    \t\t   \r\n    \t\t   \r\n    \t\t   DateTimeFormatter dateformat = DateTimeFormatter.ofPattern(&quot;MM/dd/yyyy&quot;);\r\n    \t\t   LocalDate currentDate = LocalDate.parse(dateAppointment,dateformat);\t   \r\n    \t\t   int appoint_dt = currentDate.getDayOfMonth();\r\n    \t\t   int appoint_mth = currentDate.getMonthValue();\r\n    \t\t   System.out.println(&quot;month number give:&quot;+appoint_mth);\r\n    \t\t   int appoint_yr = currentDate.getYear();\r\n    \t\t  \r\n    \t\t  \r\n    \t\t   SimpleDateFormat sdf = new SimpleDateFormat(&quot;MM/dd/yyyy&quot;);\r\n    \t\t   Date currentDate1 = new Date();\r\n    \t\t   Date todayDate = sdf.parse(dateAppointment);\r\n    \t\t   System.out.println(&quot;today date is :&quot;+currentDate1);\r\n    \t\t   System.out.println(&quot;given date:&quot;+todayDate);\r\n    \t\t  \r\n    \t\t   Month month_name = Month.of(appoint_mth);\r\n    \t\t   System.out.println(&quot;given month :&quot;+month_name);\r\n    \t\r\n    \t\r\n    \t\t monthTitle = driver.findElement(By.xpath(&quot;//span[@class=&#39;ui-datepicker-month&#39;]&quot;)).getText();\r\n    \t\t year = driver.findElement(By.xpath(&quot;//span[@class=&#39;ui-datepicker-year&#39;]&quot;)).getText();\t\t \r\n    \t\t \r\n    \r\n    \t\tMonth name = Month.valueOf(monthTitle.toUpperCase());\r\n    \t\t\r\n    \t\t System.out.println(&quot;month from calendar:&quot;+ name);\r\n    \t\t \r\n    \t\t String cal_string = name.toString();\r\n    \t\t String given_string = month_name.toString();\r\n    \t \r\n    \t\t while(!cal_string.equalsIgnoreCase(given_string))\r\n    \t\t {\r\n    \t\t\t\tSystem.out.println(&quot;month and year are not  equal&quot;);\r\n    \t\t\t\tSystem.out.println(&quot;months not equal&quot;);\r\n    \t\t\t\tSystem.out.println(&quot;month from calendar:&quot;+ name);\r\n    \t\t\t\tSystem.out.println(&quot;given month :&quot;+month_name);\r\n    \t\t\t\t//wait=new WebDriverWait(driver,20);\r\n    \t\t\t\t//driver.findElement(By.xpath(&quot;//*[@id=&#39;ui-datepicker-div&#39;]/div/a[2]/span&quot;)).click();\r\n    \t\t\t\t//wait.until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//span[@class=&#39;ui-icon ui-icon-circle-triangle-e&#39;]&quot;))).click();\r\n    \t\t\t\tdriver.findElement(By.xpath(&quot;//span[@class=&#39;ui-icon ui-icon-circle-triangle-e&#39;]&quot;)).click();\r\n    \t\t\t\tmonthTitle = driver.findElement(By.xpath(&quot;//span[@class=&#39;ui-datepicker-month&#39;]&quot;)).getText();\r\n    \t\t\t\tname = Month.valueOf(monthTitle.toUpperCase());\r\n    \t\t\t\tcal_string = name.toString();\r\n    \t\t\t\t//given_string = month_name.toString();\r\n    \t\t\t\tbreak;\r\n    \t\t\t }\r\n    \t\t\t \r\n    \t\t driver.findElement(By.xpath(&quot;//div[@id=&#39;ui-datepicker-div&#39;]/table/tbody/tr/td/child::a[contains(text(),&#39;&quot;+appoint_dt+&quot;&#39;)]&quot;)).click();\r\n    \t\t\t\t\t\t\t\t \t\t\t \t\t \t\t \t \r\n    \t\t Thread.sleep(2000);\r\n    \t\t\r\n    \t\t while(!year.equalsIgnoreCase(Integer.toString(appoint_yr)))\r\n    \t\t {\r\n    \t\t\t //driver.findElement(By.xpath(&quot;//span[@class=&#39;ui-icon ui-icon-circle-triangle-e&#39;]&quot;)).click();\r\n    \t\t\t driver.findElement(By.xpath(&quot;//*[@id=&#39;ui-datepicker-div&#39;]/div/a[2]/span&quot;)).click();\r\n    \t\t\t year = driver.findElement(By.xpath(&quot;//span[@class=&#39;ui-datepicker-year&#39;]&quot;)).getText();\r\n    \t\t\t break;\r\n    \t\t }\r\n    \t\t \r\n    \t\t driver.findElement(By.xpath(&quot;//div[@id=&#39;ui-datepicker-div&#39;]/table/tbody/tr/td/child::a[contains(text(),&#39;&quot;+appoint_dt+&quot;&#39;)]&quot;)).click();\t\t\r\n    \t\t \r\n    \t\t time_dropDown = driver.findElement(By.xpath(&quot;//select[@name=&#39;time&#39;]&quot;));\r\n    \t\t s = new Select(time_dropDown);\r\n    \t\t \r\n    \t\t List&lt;WebElement&gt; timeOptions = s.getOptions();\r\n    \t\t for (WebElement t : timeOptions) {\t\t \r\n    \t\t\t if(t.getAttribute(&quot;value&quot;).equalsIgnoreCase(Time))\r\n    \t\t\t {\r\n    \t\t\t\t s.selectByValue(Time);\r\n    \t\t\t }\t\t\r\n    \t\t  }\r\n    \t\t Thread.sleep(2000);\t \r\n    \t\t driver.findElement(By.xpath(&quot;//button[@id=&#39;ChangeHeatName&#39;]&quot;)).click();\t\t \t\t \r\n    \t\t driver.findElement(By.xpath(&quot;//textarea[@name=&#39;sym&#39;]&quot;)).sendKeys(symptom);\t\t \r\n    \t\t if(symptom.isEmpty())\r\n    \t\t {\r\n    \t\t\t System.out.println(&quot;Please provide your symptoms&quot;);\r\n    \t\t }\t \t\t\r\n    \t\t driver.findElement(By.xpath(&quot;//input[@value=&#39;Submit&#39;]&quot;)).click();\r\n    \t\t return true;\r\n     }  \t  \r\n\r\n","title":"I am trying to click next button on date picker in selenium java but it stops after first click and gives element not interactable exception. help pls","body":"<pre><code>    public boolean dateCheck(String doctorName,String dateAppointment,String Time,String symptom) throws Exception\n       {           \n            driver.findElement(By.xpath(&quot;//span[contains(text(),'Schedule Appointment')]&quot;)).click();\n             driver.findElement(By.xpath(&quot;//input[@value='Create new appointment']&quot;)).click();\n         \n    driver.findElement(By.xpath(&quot;//h4[contains(text(),'&quot;+doctorName+&quot;')]/ancestor::ul/&quot;\n                    + &quot;following-sibling::button[contains(text(),'Book Appointment')]&quot;)).click();\n         \n         calendarFrame=driver.findElement(By.xpath(&quot;//iframe[@id='myframe']&quot;));\n         driver.switchTo().frame(calendarFrame);         \n         driver.findElement(By.xpath(&quot;//input[@id='datepicker']&quot;)).click();\n           \n           \n           DateTimeFormatter dateformat = DateTimeFormatter.ofPattern(&quot;MM/dd/yyyy&quot;);\n           LocalDate currentDate = LocalDate.parse(dateAppointment,dateformat);    \n           int appoint_dt = currentDate.getDayOfMonth();\n           int appoint_mth = currentDate.getMonthValue();\n           System.out.println(&quot;month number give:&quot;+appoint_mth);\n           int appoint_yr = currentDate.getYear();\n          \n          \n           SimpleDateFormat sdf = new SimpleDateFormat(&quot;MM/dd/yyyy&quot;);\n           Date currentDate1 = new Date();\n           Date todayDate = sdf.parse(dateAppointment);\n           System.out.println(&quot;today date is :&quot;+currentDate1);\n           System.out.println(&quot;given date:&quot;+todayDate);\n          \n           Month month_name = Month.of(appoint_mth);\n           System.out.println(&quot;given month :&quot;+month_name);\n    \n    \n         monthTitle = driver.findElement(By.xpath(&quot;//span[@class='ui-datepicker-month']&quot;)).getText();\n         year = driver.findElement(By.xpath(&quot;//span[@class='ui-datepicker-year']&quot;)).getText();       \n         \n\n        Month name = Month.valueOf(monthTitle.toUpperCase());\n        \n         System.out.println(&quot;month from calendar:&quot;+ name);\n         \n         String cal_string = name.toString();\n         String given_string = month_name.toString();\n     \n         while(!cal_string.equalsIgnoreCase(given_string))\n         {\n                System.out.println(&quot;month and year are not  equal&quot;);\n                System.out.println(&quot;months not equal&quot;);\n                System.out.println(&quot;month from calendar:&quot;+ name);\n                System.out.println(&quot;given month :&quot;+month_name);\n                //wait=new WebDriverWait(driver,20);\n                //driver.findElement(By.xpath(&quot;//*[@id='ui-datepicker-div']/div/a[2]/span&quot;)).click();\n                //wait.until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//span[@class='ui-icon ui-icon-circle-triangle-e']&quot;))).click();\n                driver.findElement(By.xpath(&quot;//span[@class='ui-icon ui-icon-circle-triangle-e']&quot;)).click();\n                monthTitle = driver.findElement(By.xpath(&quot;//span[@class='ui-datepicker-month']&quot;)).getText();\n                name = Month.valueOf(monthTitle.toUpperCase());\n                cal_string = name.toString();\n                //given_string = month_name.toString();\n                break;\n             }\n             \n         driver.findElement(By.xpath(&quot;//div[@id='ui-datepicker-div']/table/tbody/tr/td/child::a[contains(text(),'&quot;+appoint_dt+&quot;')]&quot;)).click();\n                                                                 \n         Thread.sleep(2000);\n        \n         while(!year.equalsIgnoreCase(Integer.toString(appoint_yr)))\n         {\n             //driver.findElement(By.xpath(&quot;//span[@class='ui-icon ui-icon-circle-triangle-e']&quot;)).click();\n             driver.findElement(By.xpath(&quot;//*[@id='ui-datepicker-div']/div/a[2]/span&quot;)).click();\n             year = driver.findElement(By.xpath(&quot;//span[@class='ui-datepicker-year']&quot;)).getText();\n             break;\n         }\n         \n         driver.findElement(By.xpath(&quot;//div[@id='ui-datepicker-div']/table/tbody/tr/td/child::a[contains(text(),'&quot;+appoint_dt+&quot;')]&quot;)).click();      \n         \n         time_dropDown = driver.findElement(By.xpath(&quot;//select[@name='time']&quot;));\n         s = new Select(time_dropDown);\n         \n         List&lt;WebElement&gt; timeOptions = s.getOptions();\n         for (WebElement t : timeOptions) {      \n             if(t.getAttribute(&quot;value&quot;).equalsIgnoreCase(Time))\n             {\n                 s.selectByValue(Time);\n             }      \n          }\n         Thread.sleep(2000);     \n         driver.findElement(By.xpath(&quot;//button[@id='ChangeHeatName']&quot;)).click();                 \n         driver.findElement(By.xpath(&quot;//textarea[@name='sym']&quot;)).sendKeys(symptom);      \n         if(symptom.isEmpty())\n         {\n             System.out.println(&quot;Please provide your symptoms&quot;);\n         }          \n         driver.findElement(By.xpath(&quot;//input[@value='Submit']&quot;)).click();\n         return true;\n }        \n</code></pre>\n"},{"tags":["java","java.util.scanner","delimiter","string-length"],"comments":[{"owner":{"account_id":203704,"reputation":13105,"user_id":451518,"display_name":"default locale"},"score":1,"creation_date":1581041838,"post_id":60106220,"comment_id":106306205,"body_markdown":"Have you tried to press Enter right after typing a question? This should trigger `nextLine`. Also, we&#39;ll need to see your code to really understand what&#39;s happening there.","body":"Have you tried to press Enter right after typing a question? This should trigger <code>nextLine</code>. Also, we&#39;ll need to see your code to really understand what&#39;s happening there."},{"owner":{"account_id":17707447,"reputation":29,"user_id":12855660,"display_name":"Kate Dineen"},"score":0,"creation_date":1581042603,"post_id":60106220,"comment_id":106306367,"body_markdown":"When I press Enter right after typing a question with nextLine it just returns to a new like waiting for me to type more without printing my systems.","body":"When I press Enter right after typing a question with nextLine it just returns to a new like waiting for me to type more without printing my systems."}],"answers":[{"tags":[],"owner":{"account_id":203704,"reputation":13105,"user_id":451518,"display_name":"default locale"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1581043312,"creation_date":1581042966,"answer_id":60106358,"question_id":60106220,"body_markdown":"`keyboard.next` call is waiting for user input. You&#39;re calling it twice, so your program expects the user to enter two words.\r\n\r\nSo, when you type in &quot;Hello world.&quot; it reads &quot;Hello&quot; and &quot;world.&quot; separately:\r\n\r\n```\r\n//Here, the sentence is &quot;Hello&quot;\r\nString sentence = keyboard.next();\r\nSystem.out.println();\r\n\r\n//Here, keyboard.next() returns &quot;World.&quot;\r\nint sentenceLength = keyboard.next().length();\r\n```\r\n\r\nAnd when you use `nextLine` your code is waiting for the user to enter two lines.\r\n\r\nTo fix this you need to:\r\n\r\n1. Read the whole line with `nextLine`.\r\n2. Use `sentence` instead of requesting user input the second time.\r\n\r\nSomething like this should work:\r\n\r\n```\r\nString sentence = keyboard.nextLine();\r\nSystem.out.println();\r\n\r\nint sentenceLength = sentence.length();\r\n```","title":"Trying to get the length of a sentence from a user input but it stops after the first word and space","body":"<p><code>keyboard.next</code> call is waiting for user input. You're calling it twice, so your program expects the user to enter two words.</p>\n\n<p>So, when you type in \"Hello world.\" it reads \"Hello\" and \"world.\" separately:</p>\n\n<pre><code>//Here, the sentence is \"Hello\"\nString sentence = keyboard.next();\nSystem.out.println();\n\n//Here, keyboard.next() returns \"World.\"\nint sentenceLength = keyboard.next().length();\n</code></pre>\n\n<p>And when you use <code>nextLine</code> your code is waiting for the user to enter two lines.</p>\n\n<p>To fix this you need to:</p>\n\n<ol>\n<li>Read the whole line with <code>nextLine</code>.</li>\n<li>Use <code>sentence</code> instead of requesting user input the second time.</li>\n</ol>\n\n<p>Something like this should work:</p>\n\n<pre><code>String sentence = keyboard.nextLine();\nSystem.out.println();\n\nint sentenceLength = sentence.length();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23058934,"reputation":1,"user_id":17174575,"display_name":"Yellapu Pavani Sai"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635098677,"creation_date":1635098677,"answer_id":69699467,"question_id":60106220,"body_markdown":"    import java.util.Scanner;\r\n    public Stringcount\r\n    {\r\n     public static void main(String args[])\r\n     {\r\n     Scanner s=new Scanner(System.in);\r\n     System.out.println(&quot;enter the sentence:&quot;);\r\n     String str=s.nextLine();\r\n     int count = 0;\r\n     System.out.println(&quot;The entered string is: &quot;+str);    \r\n     for(int i = 0; i &lt; str.length(); i++) \r\n        {    \r\n            if(str.charAt(i) != &#39; &#39;)    \r\n                count++;    \r\n        }\r\n        System.out.println(&quot;Total number of characters in the string: &quot; + count);  \r\n        System.out.println(&quot;The first character of your sentence is &quot; + str.substring(0,1) + &quot;.&quot;);\r\n      System.out.println(&quot;The index of the first space is &quot; + str.indexOf(&quot; &quot;) + &quot;.&quot;);  \r\n    }      \r\n}\r\n     ","title":"Trying to get the length of a sentence from a user input but it stops after the first word and space","body":"<pre><code>import java.util.Scanner;\npublic Stringcount\n{\n public static void main(String args[])\n {\n Scanner s=new Scanner(System.in);\n System.out.println(&quot;enter the sentence:&quot;);\n String str=s.nextLine();\n int count = 0;\n System.out.println(&quot;The entered string is: &quot;+str);    \n for(int i = 0; i &lt; str.length(); i++) \n    {    \n        if(str.charAt(i) != ' ')    \n            count++;    \n    }\n    System.out.println(&quot;Total number of characters in the string: &quot; + count);  \n    System.out.println(&quot;The first character of your sentence is &quot; + str.substring(0,1) + &quot;.&quot;);\n  System.out.println(&quot;The index of the first space is &quot; + str.indexOf(&quot; &quot;) + &quot;.&quot;);  \n}      \n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":17707447,"reputation":29,"user_id":12855660,"display_name":"Kate Dineen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":584,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":60106358,"answer_count":2,"score":1,"last_activity_date":1683773584,"creation_date":1581041637,"question_id":60106220,"body_markdown":"The Java task is to have the user type a sentence/phrase and then print out how many characters the sentence has. My .length() method is only counting the first word and space as characters. I&#39;ve read previous questions and answers involving nextLine() but if I use that instead of next() it only lets the user type it&#39;s question and waits, doesn&#39;t print anything else immediately anymore. I&#39;m brand new to Java and I think this can be fixed with a delimiter but I&#39;m not sure how or what I&#39;m missing. TIA!! \r\n\r\n**Update:** Here&#39;s my code. \r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\nclass StringStuff{\r\n   public static void main( String [] args){\r\n      \r\n      Scanner keyboard = new Scanner(System.in);\r\n      int number;\r\n      \r\n      System.out.print(&quot;Welcome! Please enter a phrase or sentence: &quot;);\r\n      System.out.println();\r\n      String sentence = keyboard.next();\r\n      System.out.println();\r\n    \r\n      int sentenceLength = keyboard.next().length();\r\n    \r\n      \r\n      System.out.println(&quot;Your sentence has &quot; + sentenceLength + &quot; characters.&quot;);\r\n      System.out.println(&quot;The first character of your sentence is &quot; + sentence.substring(0,1) + &quot;.&quot;);\r\n      System.out.println(&quot;The index of the first space is &quot; + sentence.indexOf(&quot; &quot;) + &quot;.&quot;);\r\n     \r\n  \r\n   }\r\n}\r\n```\r\n\r\nwhen I type &quot;Hello world.&quot; as the sentence it prints:\r\n\r\nYour sentence has 6 characters.\r\nThe first character of your sentence is H.\r\nThe index of the first space is -1.\r\n","title":"Trying to get the length of a sentence from a user input but it stops after the first word and space","body":"<p>The Java task is to have the user type a sentence/phrase and then print out how many characters the sentence has. My .length() method is only counting the first word and space as characters. I've read previous questions and answers involving nextLine() but if I use that instead of next() it only lets the user type it's question and waits, doesn't print anything else immediately anymore. I'm brand new to Java and I think this can be fixed with a delimiter but I'm not sure how or what I'm missing. TIA!! </p>\n\n<p><strong>Update:</strong> Here's my code. </p>\n\n<pre><code>import java.util.Scanner;\n\nclass StringStuff{\n   public static void main( String [] args){\n\n      Scanner keyboard = new Scanner(System.in);\n      int number;\n\n      System.out.print(\"Welcome! Please enter a phrase or sentence: \");\n      System.out.println();\n      String sentence = keyboard.next();\n      System.out.println();\n\n      int sentenceLength = keyboard.next().length();\n\n\n      System.out.println(\"Your sentence has \" + sentenceLength + \" characters.\");\n      System.out.println(\"The first character of your sentence is \" + sentence.substring(0,1) + \".\");\n      System.out.println(\"The index of the first space is \" + sentence.indexOf(\" \") + \".\");\n\n\n   }\n}\n</code></pre>\n\n<p>when I type \"Hello world.\" as the sentence it prints:</p>\n\n<p>Your sentence has 6 characters.\nThe first character of your sentence is H.\nThe index of the first space is -1.</p>\n"},{"tags":["java","while-loop","java.util.scanner"],"comments":[{"owner":{"account_id":294406,"reputation":24602,"user_id":598289,"accept_rate":85,"display_name":"SJuan76"},"score":2,"creation_date":1497208273,"post_id":44487686,"comment_id":75969500,"body_markdown":"Have you read the documentation of the `Scanner.hasNext()` method in the API Javadoc? Because if you don&#39;t and your first reaction to seeing a method is asking here what it means, you are going to need a lot of questions.... If you have, please be more specific about what you do not understand.","body":"Have you read the documentation of the <code>Scanner.hasNext()</code> method in the API Javadoc? Because if you don&#39;t and your first reaction to seeing a method is asking here what it means, you are going to need a lot of questions.... If you have, please be more specific about what you do not understand."},{"owner":{"account_id":2515499,"reputation":16966,"user_id":2187042,"accept_rate":53,"display_name":"Richard Tingle"},"score":0,"creation_date":1497208290,"post_id":44487686,"comment_id":75969508,"body_markdown":"Have you looked at the javadoc? Were there any parts what we&#39;re unclear","body":"Have you looked at the javadoc? Were there any parts what we&#39;re unclear"}],"answers":[{"tags":[],"owner":{"account_id":11095235,"reputation":1,"user_id":8145630,"display_name":"Meepers55"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1497210007,"creation_date":1497209586,"answer_id":44487925,"question_id":44487686,"body_markdown":"I do recommend looking at the Javadoc, but I&#39;ll explain it for you as simple as I can. \n\nBasically, the hasNext() method returns `true` if the given document contains another string. Hence why the snippet will loop if said document **has** another string. Once there are no more Strings in the entire document, hasNext() returns`false`.\n\nHere&#39;s an example of the next() method:\n `String myString = myScanner.next();`\nThis makes myString equal to the next string in the given document. ","title":"What does hasNext() in a While do?","body":"<p>I do recommend looking at the Javadoc, but I'll explain it for you as simple as I can. </p>\n\n<p>Basically, the hasNext() method returns <code>true</code> if the given document contains another string. Hence why the snippet will loop if said document <strong>has</strong> another string. Once there are no more Strings in the entire document, hasNext() returns<code>false</code>.</p>\n\n<p>Here's an example of the next() method:\n <code>String myString = myScanner.next();</code>\nThis makes myString equal to the next string in the given document. </p>\n"},{"tags":[],"owner":{"account_id":11094833,"reputation":41,"user_id":8145373,"display_name":"Lydzje"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1497218109,"creation_date":1497218109,"answer_id":44489152,"question_id":44487686,"body_markdown":"Javadoc says:\r\n\r\n&gt; ***hasNext***  \r\n&gt; public boolean hasNext()\r\n&gt; \r\n&gt; Returns true if this scanner has another token in its input. This\r\n&gt; method may block while waiting for input to scan. The scanner does not\r\n&gt; advance past any input.\r\n&gt; \r\n&gt; ***next***   \r\n&gt; public String next()\r\n&gt; \r\n&gt; Finds and returns the next complete token from this scanner. A\r\n&gt; complete token is preceded and followed by input that matches the\r\n&gt; delimiter pattern. This method may block while waiting for input to\r\n&gt; scan, even if a previous invocation of hasNext() returned true.\r\n\r\nTo read all your file rows you&#39;ll have to check if there are tokens every line. Then you call 3 times the next method since you know there will be 3 tokens per line:\r\n\r\n    import java.io.File;\r\n    import java.util.Scanner;\r\n    \r\n    public class FLoader {\r\n    \r\n    \tpublic void load(String path) {\r\n    \t\tScanner in = null;\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\tin = new Scanner(new File(path));\r\n    \t\t\twhile (in.hasNext()) {\t\r\n    \t\t\t\tString ss = in.next();\r\n    \t\t\t\tString FName = in.next();\r\n    \t\t\t\tString LName = in.next();\r\n    \r\n    \t\t\t\tSystem.out.printf(&quot;SSN: %s, FirstName: %s, LastName: %s \\n&quot;, ss, FName, LName);\r\n    \t\t\t}\r\n    \r\n    \t\t} catch (Exception e) {\r\n    \t\t\tSystem.err.println(&quot;Loading file failed&quot;);\r\n    \t\t\te.printStackTrace();\r\n    \t\t\tSystem.exit(-1);\r\n    \t\t}\r\n    \t}\r\n    }","title":"What does hasNext() in a While do?","body":"<p>Javadoc says:</p>\n\n<blockquote>\n  <p><strong><em>hasNext</em></strong><br>\n  public boolean hasNext()</p>\n  \n  <p>Returns true if this scanner has another token in its input. This\n  method may block while waiting for input to scan. The scanner does not\n  advance past any input.</p>\n  \n  <p><strong><em>next</em></strong><br>\n  public String next()</p>\n  \n  <p>Finds and returns the next complete token from this scanner. A\n  complete token is preceded and followed by input that matches the\n  delimiter pattern. This method may block while waiting for input to\n  scan, even if a previous invocation of hasNext() returned true.</p>\n</blockquote>\n\n<p>To read all your file rows you'll have to check if there are tokens every line. Then you call 3 times the next method since you know there will be 3 tokens per line:</p>\n\n<pre><code>import java.io.File;\nimport java.util.Scanner;\n\npublic class FLoader {\n\n    public void load(String path) {\n        Scanner in = null;\n\n        try {\n            in = new Scanner(new File(path));\n            while (in.hasNext()) {  \n                String ss = in.next();\n                String FName = in.next();\n                String LName = in.next();\n\n                System.out.printf(\"SSN: %s, FirstName: %s, LastName: %s \\n\", ss, FName, LName);\n            }\n\n        } catch (Exception e) {\n            System.err.println(\"Loading file failed\");\n            e.printStackTrace();\n            System.exit(-1);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11088849,"reputation":91,"user_id":8141536,"display_name":"Johith Iype"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32929,"favorite_count":0,"down_vote_count":7,"up_vote_count":6,"answer_count":2,"score":-1,"last_activity_date":1683773562,"creation_date":1497208057,"question_id":44487686,"body_markdown":"I&#39;m new to Java and I&#39;m trying to read data from a .txt file. I&#39;ve implemented a Scanner object &#39;in&#39; `Scanner in=new Scanner(&quot;file.txt&quot;);` and then down the code a while loop to traverse through the content of the file.There are multiple rows of data in the file and in each row there are three strings (security number ,First name ,Last name : 01 Thomas Anderson)\r\n\r\n    while(in.hasNext()){\r\n\t    String ss = in.next();\r\n\t\tString FName=in.next();\r\n\t\tString LName=in.next();\r\n\t\t\r\n\t\tSystem.out.printf(&quot;SSN: %s, FirstName: %s, LastName: %s \\n&quot;,ss,FName,LName);\r\n\t\t}\r\n\r\nSo, what does the hasNext() method do? Does it look for end of the row or for the last row in the file or.... ?\r\n\r\nPlease elaborate on the working of the above snippet (mentioning the next() method too).\r\n\r\n","title":"What does hasNext() in a While do?","body":"<p>I'm new to Java and I'm trying to read data from a .txt file. I've implemented a Scanner object 'in' <code>Scanner in=new Scanner(&quot;file.txt&quot;);</code> and then down the code a while loop to traverse through the content of the file.There are multiple rows of data in the file and in each row there are three strings (security number ,First name ,Last name : 01 Thomas Anderson)</p>\n<pre><code>while(in.hasNext()){\n    String ss = in.next();\n    String FName=in.next();\n    String LName=in.next();\n    \n    System.out.printf(&quot;SSN: %s, FirstName: %s, LastName: %s \\n&quot;,ss,FName,LName);\n    }\n</code></pre>\n<p>So, what does the hasNext() method do? Does it look for end of the row or for the last row in the file or.... ?</p>\n<p>Please elaborate on the working of the above snippet (mentioning the next() method too).</p>\n"},{"tags":["java","amazon-s3","gzipinputstream"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1483122241,"post_id":41400810,"comment_id":70003842,"body_markdown":"Regarding your â€œsave the GZIPed file locallyâ€ code:  Channels need to be closed, just like InputStreams and OutputStreams.","body":"Regarding your â€œsave the GZIPed file locallyâ€ code:  Channels need to be closed, just like InputStreams and OutputStreams."},{"owner":{"account_id":9942625,"reputation":311,"user_id":7358667,"display_name":"Jeff Harwell"},"score":1,"creation_date":1483592993,"post_id":41400810,"comment_id":70160893,"body_markdown":"OpenJDK bug [JDK-8081450](https://bugs.openjdk.java.net/browse/JDK-8081450) looks to be the same issue.","body":"OpenJDK bug <a href=\"https://bugs.openjdk.java.net/browse/JDK-8081450\" rel=\"nofollow noreferrer\">JDK-8081450</a> looks to be the same issue."}],"answers":[{"comments":[{"owner":{"account_id":9942625,"reputation":311,"user_id":7358667,"display_name":"Jeff Harwell"},"score":2,"creation_date":1483596782,"post_id":41476316,"comment_id":70162248,"body_markdown":"I submitted my patch to the OpenJDK core-libs-dev group for consideration. Check the bug [JDK-8081450](https://bugs.openjdk.java.net/browse/JDK-8081450) if you want to know if there are any updates.","body":"I submitted my patch to the OpenJDK core-libs-dev group for consideration. Check the bug <a href=\"https://bugs.openjdk.java.net/browse/JDK-8081450\" rel=\"nofollow noreferrer\">JDK-8081450</a> if you want to know if there are any updates."},{"owner":{"account_id":253828,"reputation":316,"user_id":532780,"display_name":"Jared"},"score":1,"creation_date":1595122602,"post_id":41476316,"comment_id":111364692,"body_markdown":"Thank you for this explanation. I thought I was going crazy as reading the .warc.gz from a local file or HDFS worked fine, but always stopped a few hundred records in when reading via the S3 client library.","body":"Thank you for this explanation. I thought I was going crazy as reading the .warc.gz from a local file or HDFS worked fine, but always stopped a few hundred records in when reading via the S3 client library."}],"tags":[],"owner":{"account_id":9942625,"reputation":311,"user_id":7358667,"display_name":"Jeff Harwell"},"comment_count":2,"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1483596413,"creation_date":1483582327,"answer_id":41476316,"question_id":41400810,"body_markdown":"### Root Cause Discussion ###\r\n\r\nIt turns out that InputStreams can vary quite a bit. In particular they differ in how they implement the .available() method. For example ByteArrayInputStream .available() returns the number of bytes remaining in the InputStream. However, HTTPInputStream .available() returns the number of bytes available for reading before a blocking IO request needs to be made to refill the buffer. (See the Java Docs for more info)\r\n\r\nThe problem is that GZIPInputStream uses the output of .available() to determine if there might be an additional GZIP file available in the InputStream after it finishes decompressing a complete GZIP file. Here is line 231 from OpenJDK source file [GZIPInputStream.java]( http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/0e4fc29a5ce4/src/share/classes/java/util/zip/GZIPInputStream.java) method readTrailer(). \r\n\r\n       if (this.in.available() &gt; 0 || n &gt; 26) {\r\n\r\nIf the HTTPInputStream read buffer empties right at the boundary of two concatenated GZIP files GZIPInputStream calls .available(), which responds with a 0 as it would need to go out to the network to refill the buffer, and so GZIPInputStream treats the file as complete and closes prematurely.\r\n\r\nThe Common Crawl .wet archives are hundreds of megabytes of small concatenated GZIP files and so eventually the HTTPInputStream buffer will empty right at the end of one of the concatenated GZIP files and GZIPInputStream will close prematurely. This explains the problem demonstrated in the question.\r\n\r\n### Solution and Work Around ###\r\n\r\nThis [GIST](https://gist.github.com/jeffharwell/2e8785a0ec8acc8539901e841d595394) contains a patch to jdk8u152-b00 revision 12039 and two jtreg tests that remove the (in my humble opinion) incorrect reliance on .available().\r\n\r\nIf you cannot patch the JDK a work around is to make sure that available() always returns &gt; 0 which forces GZIPInputStream to always check for another GZIP file in the stream. Unfortunately HTTPInputStream is private so you cannot subclass it directly, instead extend InputStream and wrap the HTTPInputStream. The below code demonstrates this work around.\r\n\r\n### Demonstration Code and Output ###\r\n\r\nHere is the output showing that when the HTTPInputStream is wrapped as discussed GZIPInputStream will produces identical results when reading the concatenated GZIP from a file and directly from HTTP.\r\n\r\n    Testing URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz\r\n    Testing HTTP Input Stream direct to GZIPInputStream\r\n    Testing saving to file before decompression\r\n    Read 448974935 bytes from HTTP-&gt;GZIP\r\n    Read 448974935 bytes from HTTP-&gt;file-&gt;GZIP\r\n    Output from HTTP-&gt;GZIP saved to file testfile0.wet\r\n    ------\r\n    Testing URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00040-ip-10-31-129-80.ec2.internal.warc.wet.gz\r\n    Testing HTTP Input Stream direct to GZIPInputStream\r\n    Testing saving to file before decompression\r\n    Read 451171329 bytes from HTTP-&gt;GZIP\r\n    Read 451171329 bytes from HTTP-&gt;file-&gt;GZIP\r\n    Output from HTTP-&gt;GZIP saved to file testfile40.wet\r\n    ------\r\n    Testing URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698541142.66/wet/CC-MAIN-20161202170901-00500-ip-10-31-129-80.ec2.internal.warc.wet.gz\r\n    Testing HTTP Input Stream direct to GZIPInputStream\r\n    Testing saving to file before decompression\r\n    Read 453183600 bytes from HTTP-&gt;GZIP\r\n    Read 453183600 bytes from HTTP-&gt;file-&gt;GZIP\r\n    Output from HTTP-&gt;GZIP saved to file testfile500.wet\r\n\r\nHere is the demonstration code from the question modified with an InputStream wrapper.\r\n\r\n    import java.net.*;\r\n    import java.io.*;\r\n    import java.util.zip.GZIPInputStream;\r\n    import java.nio.channels.*;\r\n    \r\n    public class GZIPTest {\r\n        // Here is a wrapper class that wraps an InputStream\r\n        // but always returns &gt; 0 when .available() is called.\r\n        // This will cause GZIPInputStream to always make another \r\n        // call to the InputStream to check for an additional \r\n        // concatenated GZIP file in the stream.\r\n        public static class AvailableInputStream extends InputStream {\r\n            private InputStream is;\r\n    \r\n            AvailableInputStream(InputStream inputstream) {\r\n                is = inputstream;\r\n            }\r\n    \r\n            public int read() throws IOException {\r\n                return(is.read());\r\n            }\r\n    \r\n            public int read(byte[] b) throws IOException {\r\n                return(is.read(b));\r\n            }\r\n    \r\n            public int read(byte[] b, int off, int len) throws IOException {\r\n                return(is.read(b, off, len));\r\n            }\r\n    \r\n            public void close() throws IOException {\r\n                is.close();\r\n            }\r\n    \r\n            public int available() throws IOException {\r\n                // Always say that we have 1 more byte in the\r\n                // buffer, even when we don&#39;t\r\n                int a = is.available();\r\n                if (a == 0) {\r\n                    return(1);\r\n                } else {\r\n                    return(a);\r\n                }\r\n            }\r\n        }\r\n    \r\n    \r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            // Our three test files from CommonCrawl\r\n            URL url0 = new URL(&quot;https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz&quot;);\r\n            URL url40 = new URL(&quot;https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00040-ip-10-31-129-80.ec2.internal.warc.wet.gz&quot;);\r\n            URL url500 = new URL(&quot;https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698541142.66/wet/CC-MAIN-20161202170901-00500-ip-10-31-129-80.ec2.internal.warc.wet.gz&quot;);\r\n    \r\n            /*\r\n             * Test the URLs and display the results\r\n             */\r\n            test(url0, &quot;testfile0.wet&quot;);\r\n            System.out.println(&quot;------&quot;);\r\n            test(url40, &quot;testfile40.wet&quot;);\r\n            System.out.println(&quot;------&quot;);\r\n            test(url500, &quot;testfile500.wet&quot;);\r\n        }\r\n    \r\n        public static void test(URL url, String testGZFileName) throws Exception {\r\n            System.out.println(&quot;Testing URL &quot;+url.toString());\r\n    \r\n            // First directly wrap the HTTP inputStream with GZIPInputStream\r\n            // and count the number of bytes we read\r\n            // Go ahead and save the extracted stream to a file for further inspection\r\n            System.out.println(&quot;Testing HTTP Input Stream direct to GZIPInputStream&quot;);\r\n            int bytesFromGZIPDirect = 0;\r\n            URLConnection urlConnection = url.openConnection();\r\n            // Wrap the HTTPInputStream in our AvailableHttpInputStream\r\n            AvailableInputStream ais = new AvailableInputStream(urlConnection.getInputStream());\r\n            GZIPInputStream gzipishttp = new GZIPInputStream(ais);\r\n            FileOutputStream directGZIPOutStream = new FileOutputStream(&quot;./&quot;+testGZFileName);\r\n            int buffersize = 1024;\r\n            byte[] buffer = new byte[buffersize];\r\n            int bytesRead = -1;\r\n            while ((bytesRead = gzipishttp.read(buffer, 0, buffersize)) != -1) {\r\n                bytesFromGZIPDirect += bytesRead;\r\n                directGZIPOutStream.write(buffer, 0, bytesRead); // save to file for further inspection\r\n            }\r\n            gzipishttp.close();\r\n            directGZIPOutStream.close();\r\n    \r\n            // Save the GZIPed file locally\r\n            System.out.println(&quot;Testing saving to file before decompression&quot;);\r\n            ReadableByteChannel rbc = Channels.newChannel(url.openStream());\r\n            FileOutputStream outputStream = new FileOutputStream(&quot;./test.wet.gz&quot;);\r\n            outputStream.getChannel().transferFrom(rbc, 0, Long.MAX_VALUE);\r\n    \r\n            // Now decompress the local file and count the number of bytes\r\n            int bytesFromGZIPFile = 0;\r\n            GZIPInputStream gzipis = new GZIPInputStream(new FileInputStream(&quot;./test.wet.gz&quot;));\r\n    \r\n            buffer = new byte[1024];\r\n            while((bytesRead = gzipis.read(buffer, 0, 1024)) != -1) {\r\n                bytesFromGZIPFile += bytesRead;\r\n            }\r\n            gzipis.close();\r\n    \r\n            // The Results\r\n            System.out.println(&quot;Read &quot;+bytesFromGZIPDirect+&quot; bytes from HTTP-&gt;GZIP&quot;);\r\n            System.out.println(&quot;Read &quot;+bytesFromGZIPFile+&quot; bytes from HTTP-&gt;file-&gt;GZIP&quot;);\r\n            System.out.println(&quot;Output from HTTP-&gt;GZIP saved to file &quot;+testGZFileName);\r\n        }\r\n    \r\n    }\r\n","title":"GZIPInputStream closes prematurely when decompressing HTTPInputStream","body":"<h3>Root Cause Discussion</h3>\n\n<p>It turns out that InputStreams can vary quite a bit. In particular they differ in how they implement the .available() method. For example ByteArrayInputStream .available() returns the number of bytes remaining in the InputStream. However, HTTPInputStream .available() returns the number of bytes available for reading before a blocking IO request needs to be made to refill the buffer. (See the Java Docs for more info)</p>\n\n<p>The problem is that GZIPInputStream uses the output of .available() to determine if there might be an additional GZIP file available in the InputStream after it finishes decompressing a complete GZIP file. Here is line 231 from OpenJDK source file <a href=\"http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/0e4fc29a5ce4/src/share/classes/java/util/zip/GZIPInputStream.java\" rel=\"noreferrer\">GZIPInputStream.java</a> method readTrailer(). </p>\n\n<pre><code>   if (this.in.available() &gt; 0 || n &gt; 26) {\n</code></pre>\n\n<p>If the HTTPInputStream read buffer empties right at the boundary of two concatenated GZIP files GZIPInputStream calls .available(), which responds with a 0 as it would need to go out to the network to refill the buffer, and so GZIPInputStream treats the file as complete and closes prematurely.</p>\n\n<p>The Common Crawl .wet archives are hundreds of megabytes of small concatenated GZIP files and so eventually the HTTPInputStream buffer will empty right at the end of one of the concatenated GZIP files and GZIPInputStream will close prematurely. This explains the problem demonstrated in the question.</p>\n\n<h3>Solution and Work Around</h3>\n\n<p>This <a href=\"https://gist.github.com/jeffharwell/2e8785a0ec8acc8539901e841d595394\" rel=\"noreferrer\">GIST</a> contains a patch to jdk8u152-b00 revision 12039 and two jtreg tests that remove the (in my humble opinion) incorrect reliance on .available().</p>\n\n<p>If you cannot patch the JDK a work around is to make sure that available() always returns > 0 which forces GZIPInputStream to always check for another GZIP file in the stream. Unfortunately HTTPInputStream is private so you cannot subclass it directly, instead extend InputStream and wrap the HTTPInputStream. The below code demonstrates this work around.</p>\n\n<h3>Demonstration Code and Output</h3>\n\n<p>Here is the output showing that when the HTTPInputStream is wrapped as discussed GZIPInputStream will produces identical results when reading the concatenated GZIP from a file and directly from HTTP.</p>\n\n<pre><code>Testing URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz\nTesting HTTP Input Stream direct to GZIPInputStream\nTesting saving to file before decompression\nRead 448974935 bytes from HTTP-&gt;GZIP\nRead 448974935 bytes from HTTP-&gt;file-&gt;GZIP\nOutput from HTTP-&gt;GZIP saved to file testfile0.wet\n------\nTesting URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00040-ip-10-31-129-80.ec2.internal.warc.wet.gz\nTesting HTTP Input Stream direct to GZIPInputStream\nTesting saving to file before decompression\nRead 451171329 bytes from HTTP-&gt;GZIP\nRead 451171329 bytes from HTTP-&gt;file-&gt;GZIP\nOutput from HTTP-&gt;GZIP saved to file testfile40.wet\n------\nTesting URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698541142.66/wet/CC-MAIN-20161202170901-00500-ip-10-31-129-80.ec2.internal.warc.wet.gz\nTesting HTTP Input Stream direct to GZIPInputStream\nTesting saving to file before decompression\nRead 453183600 bytes from HTTP-&gt;GZIP\nRead 453183600 bytes from HTTP-&gt;file-&gt;GZIP\nOutput from HTTP-&gt;GZIP saved to file testfile500.wet\n</code></pre>\n\n<p>Here is the demonstration code from the question modified with an InputStream wrapper.</p>\n\n<pre><code>import java.net.*;\nimport java.io.*;\nimport java.util.zip.GZIPInputStream;\nimport java.nio.channels.*;\n\npublic class GZIPTest {\n    // Here is a wrapper class that wraps an InputStream\n    // but always returns &gt; 0 when .available() is called.\n    // This will cause GZIPInputStream to always make another \n    // call to the InputStream to check for an additional \n    // concatenated GZIP file in the stream.\n    public static class AvailableInputStream extends InputStream {\n        private InputStream is;\n\n        AvailableInputStream(InputStream inputstream) {\n            is = inputstream;\n        }\n\n        public int read() throws IOException {\n            return(is.read());\n        }\n\n        public int read(byte[] b) throws IOException {\n            return(is.read(b));\n        }\n\n        public int read(byte[] b, int off, int len) throws IOException {\n            return(is.read(b, off, len));\n        }\n\n        public void close() throws IOException {\n            is.close();\n        }\n\n        public int available() throws IOException {\n            // Always say that we have 1 more byte in the\n            // buffer, even when we don't\n            int a = is.available();\n            if (a == 0) {\n                return(1);\n            } else {\n                return(a);\n            }\n        }\n    }\n\n\n\n    public static void main(String[] args) throws Exception {\n        // Our three test files from CommonCrawl\n        URL url0 = new URL(\"https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz\");\n        URL url40 = new URL(\"https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00040-ip-10-31-129-80.ec2.internal.warc.wet.gz\");\n        URL url500 = new URL(\"https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698541142.66/wet/CC-MAIN-20161202170901-00500-ip-10-31-129-80.ec2.internal.warc.wet.gz\");\n\n        /*\n         * Test the URLs and display the results\n         */\n        test(url0, \"testfile0.wet\");\n        System.out.println(\"------\");\n        test(url40, \"testfile40.wet\");\n        System.out.println(\"------\");\n        test(url500, \"testfile500.wet\");\n    }\n\n    public static void test(URL url, String testGZFileName) throws Exception {\n        System.out.println(\"Testing URL \"+url.toString());\n\n        // First directly wrap the HTTP inputStream with GZIPInputStream\n        // and count the number of bytes we read\n        // Go ahead and save the extracted stream to a file for further inspection\n        System.out.println(\"Testing HTTP Input Stream direct to GZIPInputStream\");\n        int bytesFromGZIPDirect = 0;\n        URLConnection urlConnection = url.openConnection();\n        // Wrap the HTTPInputStream in our AvailableHttpInputStream\n        AvailableInputStream ais = new AvailableInputStream(urlConnection.getInputStream());\n        GZIPInputStream gzipishttp = new GZIPInputStream(ais);\n        FileOutputStream directGZIPOutStream = new FileOutputStream(\"./\"+testGZFileName);\n        int buffersize = 1024;\n        byte[] buffer = new byte[buffersize];\n        int bytesRead = -1;\n        while ((bytesRead = gzipishttp.read(buffer, 0, buffersize)) != -1) {\n            bytesFromGZIPDirect += bytesRead;\n            directGZIPOutStream.write(buffer, 0, bytesRead); // save to file for further inspection\n        }\n        gzipishttp.close();\n        directGZIPOutStream.close();\n\n        // Save the GZIPed file locally\n        System.out.println(\"Testing saving to file before decompression\");\n        ReadableByteChannel rbc = Channels.newChannel(url.openStream());\n        FileOutputStream outputStream = new FileOutputStream(\"./test.wet.gz\");\n        outputStream.getChannel().transferFrom(rbc, 0, Long.MAX_VALUE);\n\n        // Now decompress the local file and count the number of bytes\n        int bytesFromGZIPFile = 0;\n        GZIPInputStream gzipis = new GZIPInputStream(new FileInputStream(\"./test.wet.gz\"));\n\n        buffer = new byte[1024];\n        while((bytesRead = gzipis.read(buffer, 0, 1024)) != -1) {\n            bytesFromGZIPFile += bytesRead;\n        }\n        gzipis.close();\n\n        // The Results\n        System.out.println(\"Read \"+bytesFromGZIPDirect+\" bytes from HTTP-&gt;GZIP\");\n        System.out.println(\"Read \"+bytesFromGZIPFile+\" bytes from HTTP-&gt;file-&gt;GZIP\");\n        System.out.println(\"Output from HTTP-&gt;GZIP saved to file \"+testGZFileName);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1553934,"reputation":480,"user_id":1445644,"accept_rate":50,"display_name":"askldjd"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683773361,"creation_date":1683773361,"answer_id":76223833,"question_id":41400810,"body_markdown":"We recently experienced the same bug while we are trying to stream decode a large gzip file from AWS S3. We worked around the issue with [Apache Common&#39;s `GzipCompressorInputStream`][1] instead of the native `GzipInputStream`. Make sure you set `decompressConcatenated=true` in the constructor and GzipCompressorInputStream should be able to decode the S3 HTTPInputStream without the premature termination.\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-compress/apidocs/org/apache/commons/compress/compressors/gzip/GzipCompressorInputStream.html","title":"GZIPInputStream closes prematurely when decompressing HTTPInputStream","body":"<p>We recently experienced the same bug while we are trying to stream decode a large gzip file from AWS S3. We worked around the issue with <a href=\"https://commons.apache.org/proper/commons-compress/apidocs/org/apache/commons/compress/compressors/gzip/GzipCompressorInputStream.html\" rel=\"nofollow noreferrer\">Apache Common's <code>GzipCompressorInputStream</code></a> instead of the native <code>GzipInputStream</code>. Make sure you set <code>decompressConcatenated=true</code> in the constructor and GzipCompressorInputStream should be able to decode the S3 HTTPInputStream without the premature termination.</p>\n"}],"owner":{"account_id":9942625,"reputation":311,"user_id":7358667,"display_name":"Jeff Harwell"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1811,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":41476316,"answer_count":2,"score":8,"last_activity_date":1683773361,"creation_date":1483121970,"question_id":41400810,"body_markdown":"## Question ##\r\n\r\n*See updated question in edit section below*\r\n\r\nI&#39;m trying to decompress large (~300M) GZIPed files from Amazon S3 on the fly using GZIPInputStream but it only outputs a portion of the file; however, if I download to the filesystem before decompression then GZIPInputStream will decompress the entire file.\r\n\r\nHow can I get GZIPInputStream to decompress the entire HTTPInputStream and not just the first part of it?\r\n\r\n## What I&#39;ve Tried ##\r\n\r\n*see update in the edit section below*\r\n\r\nI suspected a HTTP problem except that no exceptions are ever thrown, GZIPInputStream returns a fairly consistent chunk of the file each time and, as far as I can tell, it always breaks on a WET record boundary although the boundary it picks is different for each URL (which is very strange as everything is being treated as a binary stream, no parsing of the WET records in the file is happening at all.)\r\n\r\nThe closest question I could find is \r\nhttps://stackoverflow.com/questions/31275728/gzipinputstream-is-prematurely-closed-when-reading-from-s3 The answer to that question was that some GZIP files are actually multiple appended GZIP files and GZIPInputStream doesn&#39;t handle that well. However, if that is the case here why would GZIPInputStream work fine on a local copy of the file?\r\n\r\n## Demonstration Code and Output ##\r\n\r\nBelow is a piece of sample code that demonstrates the problem I am seeing. I&#39;ve tested it with Java 1.8.0_72 and 1.8.0_112 on two different Linux computers on two different networks with similar results. I expect the byte count from the decompressed HTTPInputStream to be identical to the byte count from the decompressed local copy of the file, but the decompressed HTTPInputStream is much smaller.\r\n\r\n#### Output ####\r\n\r\n    Testing URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz\r\n    Testing HTTP Input Stream direct to GZIPInputStream\r\n    Testing saving to file before decompression\r\n    Read 87894 bytes from HTTP-&gt;GZIP\r\n    Read 448974935 bytes from HTTP-&gt;file-&gt;GZIP\r\n    Output from HTTP-&gt;GZIP saved to file testfile0.wet\r\n    ------\r\n    Testing URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00040-ip-10-31-129-80.ec2.internal.warc.wet.gz\r\n    Testing HTTP Input Stream direct to GZIPInputStream\r\n    Testing saving to file before decompression\r\n    Read 1772936 bytes from HTTP-&gt;GZIP\r\n    Read 451171329 bytes from HTTP-&gt;file-&gt;GZIP\r\n    Output from HTTP-&gt;GZIP saved to file testfile40.wet\r\n    ------\r\n    Testing URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698541142.66/wet/CC-MAIN-20161202170901-00500-ip-10-31-129-80.ec2.internal.warc.wet.gz\r\n    Testing HTTP Input Stream direct to GZIPInputStream\r\n    Testing saving to file before decompression\r\n    Read 89217 bytes from HTTP-&gt;GZIP\r\n    Read 453183600 bytes from HTTP-&gt;file-&gt;GZIP\r\n    Output from HTTP-&gt;GZIP saved to file testfile500.wet\r\n\r\n#### Sample Code ####\r\n\r\n    import java.net.*;\r\n    import java.io.*;\r\n    import java.util.zip.GZIPInputStream;\r\n    import java.nio.channels.*;\r\n    \r\n    public class GZIPTest {\r\n        public static void main(String[] args) throws Exception {\r\n            // Our three test files from CommonCrawl\r\n            URL url0 = new URL(&quot;https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz&quot;);\r\n            URL url40 = new URL(&quot;https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00040-ip-10-31-129-80.ec2.internal.warc.wet.gz&quot;);\r\n            URL url500 = new URL(&quot;https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698541142.66/wet/CC-MAIN-20161202170901-00500-ip-10-31-129-80.ec2.internal.warc.wet.gz&quot;);\r\n    \r\n            /*\r\n             * Test the URLs and display the results\r\n             */\r\n            test(url0, &quot;testfile0.wet&quot;);\r\n            System.out.println(&quot;------&quot;);\r\n            test(url40, &quot;testfile40.wet&quot;);\r\n            System.out.println(&quot;------&quot;);\r\n            test(url500, &quot;testfile500.wet&quot;);\r\n        }\r\n    \r\n        public static void test(URL url, String testGZFileName) throws Exception {\r\n            System.out.println(&quot;Testing URL &quot;+url.toString());\r\n    \r\n            // First directly wrap the HTTPInputStream with GZIPInputStream\r\n            // and count the number of bytes we read\r\n            // Go ahead and save the extracted stream to a file for further inspection\r\n            System.out.println(&quot;Testing HTTP Input Stream direct to GZIPInputStream&quot;);\r\n            int bytesFromGZIPDirect = 0;\r\n            URLConnection urlConnection = url.openConnection();\r\n            FileOutputStream directGZIPOutStream = new FileOutputStream(&quot;./&quot;+testGZFileName);\r\n\r\n            // FIRST TEST - Decompress from HTTPInputStream\r\n            GZIPInputStream gzipishttp = new GZIPInputStream(urlConnection.getInputStream());\r\n\r\n            byte[] buffer = new byte[1024];\r\n            int bytesRead = -1;\r\n            while ((bytesRead = gzipishttp.read(buffer, 0, 1024)) != -1) {\r\n                bytesFromGZIPDirect += bytesRead;\r\n                directGZIPOutStream.write(buffer, 0, bytesRead); // save to file for further inspection\r\n            }\r\n            gzipishttp.close();\r\n            directGZIPOutStream.close();\r\n    \r\n            // Now save the GZIPed file locally\r\n            System.out.println(&quot;Testing saving to file before decompression&quot;);\r\n            int bytesFromGZIPFile = 0;\r\n            ReadableByteChannel rbc = Channels.newChannel(url.openStream());\r\n            FileOutputStream outputStream = new FileOutputStream(&quot;./test.wet.gz&quot;);\r\n            outputStream.getChannel().transferFrom(rbc, 0, Long.MAX_VALUE);\r\n            outputStream.close();\r\n    \r\n            // SECOND TEST - decompress from FileInputStream\r\n            GZIPInputStream gzipis = new GZIPInputStream(new FileInputStream(&quot;./test.wet.gz&quot;));\r\n    \r\n            buffer = new byte[1024];\r\n            bytesRead = -1;\r\n            while((bytesRead = gzipis.read(buffer, 0, 1024)) != -1) {\r\n                bytesFromGZIPFile += bytesRead;\r\n            }\r\n            gzipis.close();\r\n    \r\n            // The Results - these numbers should match but they don&#39;t\r\n            System.out.println(&quot;Read &quot;+bytesFromGZIPDirect+&quot; bytes from HTTP-&gt;GZIP&quot;);\r\n            System.out.println(&quot;Read &quot;+bytesFromGZIPFile+&quot; bytes from HTTP-&gt;file-&gt;GZIP&quot;);\r\n            System.out.println(&quot;Output from HTTP-&gt;GZIP saved to file &quot;+testGZFileName);\r\n        }\r\n    \r\n    }\r\n\r\n### Edit ###\r\n\r\nClosed Stream and associated Channel in demonstration code as per comment by @VGR.\r\n\r\n*UPDATE*:\r\n\r\nThe problem does seem to be something specific to the file. I pulled the Common Crawl WET archive down locally (wget), uncompressed it (gunzip 1.8), then recompressed it (gzip 1.8) and re-uploaded to S3 and the on-the-fly decompression then worked fine. You can see the test if you modify the sample code above to include the following lines:\r\n\r\n    // Original file from CommonCrawl hosted on S3\r\n    URL originals3 = new URL(&quot;https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz&quot;);\r\n    // Recompressed file hosted on S3\r\n    URL rezippeds3 = new URL(&quot;https://s3-us-west-1.amazonaws.com/com.jeffharwell.commoncrawl.gziptestbucket/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz&quot;);\r\n    \r\n    test(originals3, &quot;originalhost.txt&quot;);\r\n    test(rezippeds3, &quot;rezippedhost.txt&quot;);\r\n\r\nURL rezippeds3 points to the WET archive file that I downloaded, decompressed and recompressed, then re-uploaded to S3. You will see the following output:\r\n\r\n    Testing URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz\r\n    Testing HTTP Input Stream direct to GZIPInputStream\r\n    Testing saving to file before decompression\r\n    Read 7212400 bytes from HTTP-&gt;GZIP\r\n    Read 448974935 bytes from HTTP-&gt;file-&gt;GZIP\r\n    Output from HTTP-&gt;GZIP saved to file originals3.txt\r\n    -----\r\n    Testing URL https://s3-us-west-1.amazonaws.com/com.jeffharwell.commoncrawl.gziptestbucket/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz\r\n    Testing HTTP Input Stream direct to GZIPInputStream\r\n    Testing saving to file before decompression\r\n    Read 448974935 bytes from HTTP-&gt;GZIP\r\n    Read 448974935 bytes from HTTP-&gt;file-&gt;GZIP\r\n    Output from HTTP-&gt;GZIP saved to file rezippeds3.txt\r\n\r\nAs you can see once the file was recompressed I was able to stream it through GZIPInputStream and get the entire file. The original file still shows the usual premature end of the decompression. When I downloaded and uploaded the WET file without recompressing it I got the same incomplete streaming behavior so it was definitely the recompression that fixed it. I also put both files, the original and the recompressed, onto a traditional Apache web server and was able to replicate the results, so S3 doesn&#39;t seem to have anything to do with the problem.\r\n\r\nSo. I have a new question.\r\n\r\n## New Question ##\r\n\r\nWhy would a FileInputStream behave differently than a HTTPInputStream when reading the same content. If it is the exact same file why does:\r\n\r\nnew GZIPInputStream(urlConnection.getInputStream());\r\n\r\nbehave any differently than \r\n\r\nnew GZIPInputStream(new FileInputStream(&quot;./test.wet.gz&quot;));\r\n\r\n?? Isn&#39;t an input stream just an input stream??","title":"GZIPInputStream closes prematurely when decompressing HTTPInputStream","body":"<h2>Question</h2>\n\n<p><em>See updated question in edit section below</em></p>\n\n<p>I'm trying to decompress large (~300M) GZIPed files from Amazon S3 on the fly using GZIPInputStream but it only outputs a portion of the file; however, if I download to the filesystem before decompression then GZIPInputStream will decompress the entire file.</p>\n\n<p>How can I get GZIPInputStream to decompress the entire HTTPInputStream and not just the first part of it?</p>\n\n<h2>What I've Tried</h2>\n\n<p><em>see update in the edit section below</em></p>\n\n<p>I suspected a HTTP problem except that no exceptions are ever thrown, GZIPInputStream returns a fairly consistent chunk of the file each time and, as far as I can tell, it always breaks on a WET record boundary although the boundary it picks is different for each URL (which is very strange as everything is being treated as a binary stream, no parsing of the WET records in the file is happening at all.)</p>\n\n<p>The closest question I could find is \n<a href=\"https://stackoverflow.com/questions/31275728/gzipinputstream-is-prematurely-closed-when-reading-from-s3\">GZIPInputStream is prematurely closed when reading from s3</a> The answer to that question was that some GZIP files are actually multiple appended GZIP files and GZIPInputStream doesn't handle that well. However, if that is the case here why would GZIPInputStream work fine on a local copy of the file?</p>\n\n<h2>Demonstration Code and Output</h2>\n\n<p>Below is a piece of sample code that demonstrates the problem I am seeing. I've tested it with Java 1.8.0_72 and 1.8.0_112 on two different Linux computers on two different networks with similar results. I expect the byte count from the decompressed HTTPInputStream to be identical to the byte count from the decompressed local copy of the file, but the decompressed HTTPInputStream is much smaller.</p>\n\nOutput\n\n<pre><code>Testing URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz\nTesting HTTP Input Stream direct to GZIPInputStream\nTesting saving to file before decompression\nRead 87894 bytes from HTTP-&gt;GZIP\nRead 448974935 bytes from HTTP-&gt;file-&gt;GZIP\nOutput from HTTP-&gt;GZIP saved to file testfile0.wet\n------\nTesting URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00040-ip-10-31-129-80.ec2.internal.warc.wet.gz\nTesting HTTP Input Stream direct to GZIPInputStream\nTesting saving to file before decompression\nRead 1772936 bytes from HTTP-&gt;GZIP\nRead 451171329 bytes from HTTP-&gt;file-&gt;GZIP\nOutput from HTTP-&gt;GZIP saved to file testfile40.wet\n------\nTesting URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698541142.66/wet/CC-MAIN-20161202170901-00500-ip-10-31-129-80.ec2.internal.warc.wet.gz\nTesting HTTP Input Stream direct to GZIPInputStream\nTesting saving to file before decompression\nRead 89217 bytes from HTTP-&gt;GZIP\nRead 453183600 bytes from HTTP-&gt;file-&gt;GZIP\nOutput from HTTP-&gt;GZIP saved to file testfile500.wet\n</code></pre>\n\nSample Code\n\n<pre><code>import java.net.*;\nimport java.io.*;\nimport java.util.zip.GZIPInputStream;\nimport java.nio.channels.*;\n\npublic class GZIPTest {\n    public static void main(String[] args) throws Exception {\n        // Our three test files from CommonCrawl\n        URL url0 = new URL(\"https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz\");\n        URL url40 = new URL(\"https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00040-ip-10-31-129-80.ec2.internal.warc.wet.gz\");\n        URL url500 = new URL(\"https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698541142.66/wet/CC-MAIN-20161202170901-00500-ip-10-31-129-80.ec2.internal.warc.wet.gz\");\n\n        /*\n         * Test the URLs and display the results\n         */\n        test(url0, \"testfile0.wet\");\n        System.out.println(\"------\");\n        test(url40, \"testfile40.wet\");\n        System.out.println(\"------\");\n        test(url500, \"testfile500.wet\");\n    }\n\n    public static void test(URL url, String testGZFileName) throws Exception {\n        System.out.println(\"Testing URL \"+url.toString());\n\n        // First directly wrap the HTTPInputStream with GZIPInputStream\n        // and count the number of bytes we read\n        // Go ahead and save the extracted stream to a file for further inspection\n        System.out.println(\"Testing HTTP Input Stream direct to GZIPInputStream\");\n        int bytesFromGZIPDirect = 0;\n        URLConnection urlConnection = url.openConnection();\n        FileOutputStream directGZIPOutStream = new FileOutputStream(\"./\"+testGZFileName);\n\n        // FIRST TEST - Decompress from HTTPInputStream\n        GZIPInputStream gzipishttp = new GZIPInputStream(urlConnection.getInputStream());\n\n        byte[] buffer = new byte[1024];\n        int bytesRead = -1;\n        while ((bytesRead = gzipishttp.read(buffer, 0, 1024)) != -1) {\n            bytesFromGZIPDirect += bytesRead;\n            directGZIPOutStream.write(buffer, 0, bytesRead); // save to file for further inspection\n        }\n        gzipishttp.close();\n        directGZIPOutStream.close();\n\n        // Now save the GZIPed file locally\n        System.out.println(\"Testing saving to file before decompression\");\n        int bytesFromGZIPFile = 0;\n        ReadableByteChannel rbc = Channels.newChannel(url.openStream());\n        FileOutputStream outputStream = new FileOutputStream(\"./test.wet.gz\");\n        outputStream.getChannel().transferFrom(rbc, 0, Long.MAX_VALUE);\n        outputStream.close();\n\n        // SECOND TEST - decompress from FileInputStream\n        GZIPInputStream gzipis = new GZIPInputStream(new FileInputStream(\"./test.wet.gz\"));\n\n        buffer = new byte[1024];\n        bytesRead = -1;\n        while((bytesRead = gzipis.read(buffer, 0, 1024)) != -1) {\n            bytesFromGZIPFile += bytesRead;\n        }\n        gzipis.close();\n\n        // The Results - these numbers should match but they don't\n        System.out.println(\"Read \"+bytesFromGZIPDirect+\" bytes from HTTP-&gt;GZIP\");\n        System.out.println(\"Read \"+bytesFromGZIPFile+\" bytes from HTTP-&gt;file-&gt;GZIP\");\n        System.out.println(\"Output from HTTP-&gt;GZIP saved to file \"+testGZFileName);\n    }\n\n}\n</code></pre>\n\n<h3>Edit</h3>\n\n<p>Closed Stream and associated Channel in demonstration code as per comment by @VGR.</p>\n\n<p><em>UPDATE</em>:</p>\n\n<p>The problem does seem to be something specific to the file. I pulled the Common Crawl WET archive down locally (wget), uncompressed it (gunzip 1.8), then recompressed it (gzip 1.8) and re-uploaded to S3 and the on-the-fly decompression then worked fine. You can see the test if you modify the sample code above to include the following lines:</p>\n\n<pre><code>// Original file from CommonCrawl hosted on S3\nURL originals3 = new URL(\"https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz\");\n// Recompressed file hosted on S3\nURL rezippeds3 = new URL(\"https://s3-us-west-1.amazonaws.com/com.jeffharwell.commoncrawl.gziptestbucket/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz\");\n\ntest(originals3, \"originalhost.txt\");\ntest(rezippeds3, \"rezippedhost.txt\");\n</code></pre>\n\n<p>URL rezippeds3 points to the WET archive file that I downloaded, decompressed and recompressed, then re-uploaded to S3. You will see the following output:</p>\n\n<pre><code>Testing URL https://commoncrawl.s3.amazonaws.com/crawl-data/CC-MAIN-2016-50/segments/1480698540409.8/wet/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz\nTesting HTTP Input Stream direct to GZIPInputStream\nTesting saving to file before decompression\nRead 7212400 bytes from HTTP-&gt;GZIP\nRead 448974935 bytes from HTTP-&gt;file-&gt;GZIP\nOutput from HTTP-&gt;GZIP saved to file originals3.txt\n-----\nTesting URL https://s3-us-west-1.amazonaws.com/com.jeffharwell.commoncrawl.gziptestbucket/CC-MAIN-20161202170900-00009-ip-10-31-129-80.ec2.internal.warc.wet.gz\nTesting HTTP Input Stream direct to GZIPInputStream\nTesting saving to file before decompression\nRead 448974935 bytes from HTTP-&gt;GZIP\nRead 448974935 bytes from HTTP-&gt;file-&gt;GZIP\nOutput from HTTP-&gt;GZIP saved to file rezippeds3.txt\n</code></pre>\n\n<p>As you can see once the file was recompressed I was able to stream it through GZIPInputStream and get the entire file. The original file still shows the usual premature end of the decompression. When I downloaded and uploaded the WET file without recompressing it I got the same incomplete streaming behavior so it was definitely the recompression that fixed it. I also put both files, the original and the recompressed, onto a traditional Apache web server and was able to replicate the results, so S3 doesn't seem to have anything to do with the problem.</p>\n\n<p>So. I have a new question.</p>\n\n<h2>New Question</h2>\n\n<p>Why would a FileInputStream behave differently than a HTTPInputStream when reading the same content. If it is the exact same file why does:</p>\n\n<p>new GZIPInputStream(urlConnection.getInputStream());</p>\n\n<p>behave any differently than </p>\n\n<p>new GZIPInputStream(new FileInputStream(\"./test.wet.gz\"));</p>\n\n<p>?? Isn't an input stream just an input stream??</p>\n"},{"tags":["java","aws-lambda","reflection","properties"],"answers":[{"tags":[],"owner":{"account_id":18271532,"reputation":24,"user_id":13302222,"display_name":"Marzen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683773253,"creation_date":1683773253,"answer_id":76223824,"question_id":76220297,"body_markdown":"You can see the source codes of mybatis-plus to findout how it convert the SFunction to db columns. I found the codes in class `AbstractLambdaWrapper`.\r\nIt just read the lambda method name and remove &#39;get&#39;, then convert property to column.\r\nOr you could make the abstract service class implements `IService&lt;T&gt;` with Generic Type and make your services extends this abstract class .\r\n```\r\npublic abstract class AbstarctService&lt;T&gt; implements IService&lt;T&gt; {\r\n\r\n    public &lt;R&gt; T getEntityByUniqueColumn(SFunction&lt;T, R&gt; lambda, R value) {\r\n        return new LambdaQueryChainWrapper&lt;T&gt;(getBaseMapper())\r\n            .select(keyName())\r\n            .eq(lambda, value)\r\n            .getEntity();\r\n    }\r\n\r\n    abstract SFunction&lt;T, ?&gt; keyName();\r\n}\r\n```\r\nthese may help you in another way.","title":"How to convert lambda expression from a type to another type in Java?","body":"<p>You can see the source codes of mybatis-plus to findout how it convert the SFunction to db columns. I found the codes in class <code>AbstractLambdaWrapper</code>.\nIt just read the lambda method name and remove 'get', then convert property to column.\nOr you could make the abstract service class implements <code>IService&lt;T&gt;</code> with Generic Type and make your services extends this abstract class .</p>\n<pre><code>public abstract class AbstarctService&lt;T&gt; implements IService&lt;T&gt; {\n\n    public &lt;R&gt; T getEntityByUniqueColumn(SFunction&lt;T, R&gt; lambda, R value) {\n        return new LambdaQueryChainWrapper&lt;T&gt;(getBaseMapper())\n            .select(keyName())\n            .eq(lambda, value)\n            .getEntity();\n    }\n\n    abstract SFunction&lt;T, ?&gt; keyName();\n}\n</code></pre>\n<p>these may help you in another way.</p>\n"}],"owner":{"account_id":28480293,"reputation":95,"user_id":21794356,"display_name":"Emiya Elien"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683773253,"creation_date":1683732943,"question_id":76220297,"body_markdown":"I&#39;m using mybatis-plus&#39;s `lambda chained query` and it looks like this\r\n\r\n```\r\nLong uid = new LambdaQueryChainWrapper(baseMapeer)\r\n            .select(User::getUid)\r\n            .eq(User::getUsername, username)\r\n            .get();\r\n```\r\n\r\nI think it&#39;s so tedious that I have to write every class, and sometimes I needed to add caching operations, so I write an abstract class to simplify the operation,  like this\r\n\r\n```\r\n// abstract service\r\npublic &lt;R&gt; T getEntityByUniqueColumn(SFunction&lt;T, R&gt; lambda, R value) {\r\n    // use mybatis-plus util\r\n    final String keyColumn = keyName();\r\n    // USE THIRD-PARTY LIBRARY REFLECTION UTIL\r\n    final String propertyName = reflectProperty(lambda);\r\n    // use mybatis-plus util\r\n    final String columnName = reflectColumn(propertyName);\r\n\r\n    return new QueryChainWrapper(baseMapper)\r\n             .select(keyColumn)\r\n             .eq(columnName, value)\r\n             .get();\r\n}\r\n\r\n// actual service\r\npublic Long getUid(String username) {\r\n    return getEntityByUniqueColumn(User::getUsername, username);\r\n}\r\n```\r\n\r\nI&#39;m using the &#39;de.cronn.reflection.util.PropertyUtils&#39; method to get propertyName through get lambda function\r\n\r\n```\r\nprivate String reflectPropertyName(SFunction&lt;T, ?&gt; getXxxSFunc) {\r\n    if (getXxxSFunc == null) return null;\r\n    try {\r\n        return PropertyUtils.getPropertyName(entityClass, getXxxSFunc::apply);\r\n    } catch (Exception e) {\r\n        throw new RuntimeException(e);\r\n    }\r\n}\r\n```\r\n\r\n------\r\n\r\nNow the problem arises. PropertyUtils requires a lambda expression with a `TypedPropertyGetter` parameter, while my abstract method provides a lambda expression with an `SFunction` parameter.\r\n\r\nThe method signature of the former is `V get(T t)`, and the method signature of the latter is `V apply(T t)`. I tried to convert from SFunction to TypedPropertyGetter by using `lambda::apply`.\r\n\r\nBut I encountered an exception when I executed it. The reason is:\r\nPropertyUtils will eventually check whether the lambda method passed `is call site specific`. If it is, it throws an exception. This means that we cannot express lambda expressions by delegation (there are attributes inside), and we must pass this parameter by user-defined, such as User::getUsername.\r\n\r\n```\r\n// source-code\r\nprivate static void assertHasNoDeclaredFields(Object lambda) {\r\n\tif (hasDeclaredFields(lambda)) {\r\n\t\tthrow new IllegalArgumentException(lambda + &quot; is call site specific&quot;);\r\n\t}\r\n}\r\n\r\nprivate static boolean hasDeclaredFields(Object lambda) {\r\n\treturn lambda.getClass().getDeclaredFields().length &gt; 0;\r\n}\r\n```\r\n\r\nThere are many methods of abstract classes in my project. I want to know how to convert this lambda expression into another type without delegation.","title":"How to convert lambda expression from a type to another type in Java?","body":"<p>I'm using mybatis-plus's <code>lambda chained query</code> and it looks like this</p>\n<pre><code>Long uid = new LambdaQueryChainWrapper(baseMapeer)\n            .select(User::getUid)\n            .eq(User::getUsername, username)\n            .get();\n</code></pre>\n<p>I think it's so tedious that I have to write every class, and sometimes I needed to add caching operations, so I write an abstract class to simplify the operation,  like this</p>\n<pre><code>// abstract service\npublic &lt;R&gt; T getEntityByUniqueColumn(SFunction&lt;T, R&gt; lambda, R value) {\n    // use mybatis-plus util\n    final String keyColumn = keyName();\n    // USE THIRD-PARTY LIBRARY REFLECTION UTIL\n    final String propertyName = reflectProperty(lambda);\n    // use mybatis-plus util\n    final String columnName = reflectColumn(propertyName);\n\n    return new QueryChainWrapper(baseMapper)\n             .select(keyColumn)\n             .eq(columnName, value)\n             .get();\n}\n\n// actual service\npublic Long getUid(String username) {\n    return getEntityByUniqueColumn(User::getUsername, username);\n}\n</code></pre>\n<p>I'm using the 'de.cronn.reflection.util.PropertyUtils' method to get propertyName through get lambda function</p>\n<pre><code>private String reflectPropertyName(SFunction&lt;T, ?&gt; getXxxSFunc) {\n    if (getXxxSFunc == null) return null;\n    try {\n        return PropertyUtils.getPropertyName(entityClass, getXxxSFunc::apply);\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<hr />\n<p>Now the problem arises. PropertyUtils requires a lambda expression with a <code>TypedPropertyGetter</code> parameter, while my abstract method provides a lambda expression with an <code>SFunction</code> parameter.</p>\n<p>The method signature of the former is <code>V get(T t)</code>, and the method signature of the latter is <code>V apply(T t)</code>. I tried to convert from SFunction to TypedPropertyGetter by using <code>lambda::apply</code>.</p>\n<p>But I encountered an exception when I executed it. The reason is:\nPropertyUtils will eventually check whether the lambda method passed <code>is call site specific</code>. If it is, it throws an exception. This means that we cannot express lambda expressions by delegation (there are attributes inside), and we must pass this parameter by user-defined, such as User::getUsername.</p>\n<pre><code>// source-code\nprivate static void assertHasNoDeclaredFields(Object lambda) {\n    if (hasDeclaredFields(lambda)) {\n        throw new IllegalArgumentException(lambda + &quot; is call site specific&quot;);\n    }\n}\n\nprivate static boolean hasDeclaredFields(Object lambda) {\n    return lambda.getClass().getDeclaredFields().length &gt; 0;\n}\n</code></pre>\n<p>There are many methods of abstract classes in my project. I want to know how to convert this lambda expression into another type without delegation.</p>\n"},{"tags":["java","spring","spring-boot","jackson"],"comments":[{"owner":{"account_id":9197152,"reputation":1142,"user_id":6835509,"display_name":"Vasanth Subramanian"},"score":1,"creation_date":1683772795,"post_id":76223770,"comment_id":134418945,"body_markdown":"As per this article https://www.baeldung.com/spring-boot-formatting-json-dates, its mentioned &quot;Unfortunately, it doesn&#39;t work with the Java 8 date types, such as LocalDate and LocalDateTime. We can only use it to format fields of the type java.util.Date or the java.util.Calendar&quot;","body":"As per this article <a href=\"https://www.baeldung.com/spring-boot-formatting-json-dates\" rel=\"nofollow noreferrer\">baeldung.com/spring-boot-formatting-json-dates</a>, its mentioned &quot;Unfortunately, it doesn&#39;t work with the Java 8 date types, such as LocalDate and LocalDateTime. We can only use it to format fields of the type java.util.Date or the java.util.Calendar&quot;"},{"owner":{"account_id":6524069,"reputation":715,"user_id":5047297,"accept_rate":53,"display_name":"WestFarmer"},"score":0,"creation_date":1683774322,"post_id":76223770,"comment_id":134419088,"body_markdown":"it&#39;s the @EnableWebMVC preventing jackson configuration works....","body":"it&#39;s the @EnableWebMVC preventing jackson configuration works...."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1683783607,"post_id":76223770,"comment_id":134420047,"body_markdown":"https://mvnrepository.com/artifact/com.fasterxml.jackson.datatype/jackson-datatype-jsr310","body":"<a href=\"https://mvnrepository.com/artifact/com.fasterxml.jackson.datatype/jackson-datatype-jsr310\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/com.fasterxml.jackson.datatype/&hellip;</a>"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1683783859,"post_id":76223770,"comment_id":134420079,"body_markdown":"Remove the `@EnableWebMvc` as that disables auto configuration of the web and jackson parts. Even better ditch the whole class and just add `spring.jackson.default-property-inclusion=NON_NULL` which achieves the same.","body":"Remove the <code>@EnableWebMvc</code> as that disables auto configuration of the web and jackson parts. Even better ditch the whole class and just add <code>spring.jackson.default-property-inclusion=NON_NULL</code> which achieves the same."}],"owner":{"account_id":6524069,"reputation":715,"user_id":5047297,"accept_rate":53,"display_name":"WestFarmer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":197,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683772730,"creation_date":1683772222,"question_id":76223770,"body_markdown":"spring boot version: 2.7.8\r\n\r\nI want to set a global format for all `java.util.Date` and date time types in `java.time.*`\r\n\r\nwhat I have tried:\r\n\r\nsetting in application.yml:\r\n```\r\napp:\r\n  dateFormat: &quot;yyyy/MM/dd&quot;\r\n  timeFormat: &quot;HH:mm:ss&quot;\r\n\r\nspring\r\n  jackson:\r\n    date-format: &quot;yyyy-MM-dd HH:mm:ss&quot;\r\n```\r\n\r\nthis is not working, all date types is still formatted as long.\r\n\r\n```java\r\n@Configuration\r\npublic class JacksonConfig {\r\n\t@Value(&quot;${app.dateFormat}&quot;)\r\n\tprivate String dateFormat;\r\n\t\r\n\t@Value(&quot;${app.dateFormat} ${app.timeFormat}&quot;)\r\n\tprivate String dateTimeFormat;\r\n\t\r\n\t\r\n\t@Bean\r\n\tpublic Jackson2ObjectMapperBuilderCustomizer jsonCustomizer() {\r\n       System.out.println(&quot;---------------&quot;);\r\n\t\treturn builder -&gt; {\r\n\t\t\tbuilder.simpleDateFormat(dateFormat);\r\n\t\t\tbuilder.serializers(new LocalDateSerializer(DateTimeFormatter.ofPattern(dateFormat)));\r\n\t\t\tbuilder.serializers(new LocalDateTimeSerializer(DateTimeFormatter.ofPattern(dateTimeFormat)));\r\n\t\t};\r\n\t}\r\n}\r\n``` \r\n\r\nthis is not working too, all date types is still formatted as long. but the `System.out.println(&quot;---------------&quot;)` is executed, so it&#39;s picked up by spring.\r\n\r\nI have another configuration class, which config jackson to ignore null properties, if that matters.\r\n\r\n```java\r\n@Configuration\r\n@EnableWebMvc\r\npublic class WebConfig implements WebMvcConfigurer {\r\n\t\r\n\t@Override\r\n\tpublic void extendMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\r\n\t\tconverters.forEach(c -&gt; {\r\n\t\t\tif(c instanceof MappingJackson2HttpMessageConverter) {\r\n\t\t\t\tMappingJackson2HttpMessageConverter jc = (MappingJackson2HttpMessageConverter)c;\r\n\t\t\t\tjc.getObjectMapper().setSerializationInclusion(JsonInclude.Include.NON_NULL);\r\n\t\t\t}\r\n\t\t});\r\n\t\tWebMvcConfigurer.super.extendMessageConverters(converters);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nplease give me some hint.","title":"Why set datetime format for jackson not works","body":"<p>spring boot version: 2.7.8</p>\n<p>I want to set a global format for all <code>java.util.Date</code> and date time types in <code>java.time.*</code></p>\n<p>what I have tried:</p>\n<p>setting in application.yml:</p>\n<pre><code>app:\n  dateFormat: &quot;yyyy/MM/dd&quot;\n  timeFormat: &quot;HH:mm:ss&quot;\n\nspring\n  jackson:\n    date-format: &quot;yyyy-MM-dd HH:mm:ss&quot;\n</code></pre>\n<p>this is not working, all date types is still formatted as long.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class JacksonConfig {\n    @Value(&quot;${app.dateFormat}&quot;)\n    private String dateFormat;\n    \n    @Value(&quot;${app.dateFormat} ${app.timeFormat}&quot;)\n    private String dateTimeFormat;\n    \n    \n    @Bean\n    public Jackson2ObjectMapperBuilderCustomizer jsonCustomizer() {\n       System.out.println(&quot;---------------&quot;);\n        return builder -&gt; {\n            builder.simpleDateFormat(dateFormat);\n            builder.serializers(new LocalDateSerializer(DateTimeFormatter.ofPattern(dateFormat)));\n            builder.serializers(new LocalDateTimeSerializer(DateTimeFormatter.ofPattern(dateTimeFormat)));\n        };\n    }\n}\n</code></pre>\n<p>this is not working too, all date types is still formatted as long. but the <code>System.out.println(&quot;---------------&quot;)</code> is executed, so it's picked up by spring.</p>\n<p>I have another configuration class, which config jackson to ignore null properties, if that matters.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebMvc\npublic class WebConfig implements WebMvcConfigurer {\n    \n    @Override\n    public void extendMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\n        converters.forEach(c -&gt; {\n            if(c instanceof MappingJackson2HttpMessageConverter) {\n                MappingJackson2HttpMessageConverter jc = (MappingJackson2HttpMessageConverter)c;\n                jc.getObjectMapper().setSerializationInclusion(JsonInclude.Include.NON_NULL);\n            }\n        });\n        WebMvcConfigurer.super.extendMessageConverters(converters);\n    }\n\n}\n</code></pre>\n<p>please give me some hint.</p>\n"},{"tags":["java","spring-boot","http","utf-8","content-disposition"],"comments":[{"owner":{"account_id":20956,"reputation":40587,"user_id":50543,"display_name":"Julian Reschke"},"score":0,"creation_date":1683694580,"post_id":76212138,"comment_id":134403927,"body_markdown":"a) Which browser? b) Are the field values the same for both Spring versions?","body":"a) Which browser? b) Are the field values the same for both Spring versions?"},{"owner":{"account_id":3106235,"reputation":199,"user_id":2628944,"display_name":"jetpack"},"score":0,"creation_date":1683694935,"post_id":76212138,"comment_id":134403965,"body_markdown":"a) I am using chrome browser, b) field values are same for both spring versions....what I observe is if I use the springboot ver 2.6.11, I have a `content-disposition` info on the response....but if I use springboot ver 2.7.11, there is no `content-disposition` info on the response","body":"a) I am using chrome browser, b) field values are same for both spring versions....what I observe is if I use the springboot ver 2.6.11, I have a <code>content-disposition</code> info on the response....but if I use springboot ver 2.7.11, there is no <code>content-disposition</code> info on the response"},{"owner":{"account_id":3106235,"reputation":199,"user_id":2628944,"display_name":"jetpack"},"score":0,"creation_date":1683707832,"post_id":76212138,"comment_id":134406368,"body_markdown":"additonal info, it only happens that the `content-disposition` is not shown when the filename I used is in Japanese characters....using english characters, there is a `content-disposition` informatiom","body":"additonal info, it only happens that the <code>content-disposition</code> is not shown when the filename I used is in Japanese characters....using english characters, there is a <code>content-disposition</code> informatiom"}],"answers":[{"comments":[{"owner":{"account_id":3106235,"reputation":199,"user_id":2628944,"display_name":"jetpack"},"score":0,"creation_date":1683772232,"post_id":76218892,"comment_id":134418880,"body_markdown":"hi @Julian Reschke, I did your suggestion and it works!!! Thank you!!! Do you know the reason why writing `Content-Disposition` have changed? Because in springboot 2.6.11, it works ok with `filename`....when I upgrade, it doesnt work anymore","body":"hi @Julian Reschke, I did your suggestion and it works!!! Thank you!!! Do you know the reason why writing <code>Content-Disposition</code> have changed? Because in springboot 2.6.11, it works ok with <code>filename</code>....when I upgrade, it doesnt work anymore"},{"owner":{"account_id":20956,"reputation":40587,"user_id":50543,"display_name":"Julian Reschke"},"score":1,"creation_date":1683804342,"post_id":76218892,"comment_id":134424251,"body_markdown":"I don&#39;t *know*, but I suspect that something now blocks field values considered invalid.","body":"I don&#39;t <i>know</i>, but I suspect that something now blocks field values considered invalid."}],"tags":[],"owner":{"account_id":20956,"reputation":40587,"user_id":50543,"display_name":"Julian Reschke"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683724486,"creation_date":1683724486,"answer_id":76218892,"question_id":76212138,"body_markdown":"The problem likely is caused by literal non-ASCII characters in the field value, which might cause Spring not to set the value at all.\r\n\r\nRemove the &quot;filename&quot; (not &quot;filename*&quot;) parameter and try again.","title":"Content-Disposition filename not being set correctly in Spring Boot 2.7.11","body":"<p>The problem likely is caused by literal non-ASCII characters in the field value, which might cause Spring not to set the value at all.</p>\n<p>Remove the &quot;filename&quot; (not &quot;filename*&quot;) parameter and try again.</p>\n"}],"owner":{"account_id":3106235,"reputation":199,"user_id":2628944,"display_name":"jetpack"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":841,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76218892,"answer_count":1,"score":0,"last_activity_date":1683772371,"creation_date":1683654518,"question_id":76212138,"body_markdown":"I&#39;m using Spring Boot 2.7.11 and I&#39;m having an issue with the Content-Disposition header not being set correctly when downloading a file with a Japanese filename. Specifically, when I download the file, the filename is being changed to &quot;files.zip&quot; instead of the correct filename.\r\n\r\nI&#39;ve confirmed that the filename is being passed correctly to the writeContentDisposition() method, and I&#39;m setting the Content-Disposition header correctly with the filename parameter encoded as UTF-8.\r\n\r\nHere&#39;s an example of the header value that I&#39;m passing:\r\n\r\n```\r\nattachment; filename=&quot;æ—¥æœ¬èªžé ‘å¼µã‚‹.zip&quot;; filename*=UTF-8&#39;&#39;%E6%97%A5%E6%9C%AC%E8%AA%9E%E3%81%82%E3%81%84%E3%81%86%E3%81%88%E3%83%86%E3%82%B9%E3%83%88.zip\r\n```\r\n\r\nThis works correctly in Spring Boot 2.6.11, but in Spring Boot 2.7.11, the downloaded file is named &quot;files.zip&quot; instead of the correct filename.\r\n\r\nHere&#39;s the code that I&#39;m using to set the Content-Disposition header:\r\n\r\n```\r\npublic static void setContentDisposition(\r\n    HttpServletResponse response, String filename, boolean download) {\r\n        String encodedFilename = UriUtils.encode(filename, StandardCharsets.UTF_8).replaceAll(&quot;\\\\+&quot;,\r\n   &quot;%20&quot;);\r\n      String disposition = (download ? &quot;attachment&quot; : &quot;inline&quot;) +\r\n        &quot;; filename=\\&quot;&quot; + filename + &quot;\\&quot;&quot; +\r\n        &quot;; filename*=UTF-8&#39;&#39;&quot; + encodedFilename;\r\n      response.setHeader(HttpHeaders.CONTENT_DISPOSITION, disposition);\r\n}\r\n```\r\n\r\nI&#39;m not sure why this isn&#39;t working in Spring Boot 2.7.11. Can anyone help me figure out what might be causing this issue?\r\n\r\n","title":"Content-Disposition filename not being set correctly in Spring Boot 2.7.11","body":"<p>I'm using Spring Boot 2.7.11 and I'm having an issue with the Content-Disposition header not being set correctly when downloading a file with a Japanese filename. Specifically, when I download the file, the filename is being changed to &quot;files.zip&quot; instead of the correct filename.</p>\n<p>I've confirmed that the filename is being passed correctly to the writeContentDisposition() method, and I'm setting the Content-Disposition header correctly with the filename parameter encoded as UTF-8.</p>\n<p>Here's an example of the header value that I'm passing:</p>\n<pre><code>attachment; filename=&quot;æ—¥æœ¬èªžé ‘å¼µã‚‹.zip&quot;; filename*=UTF-8''%E6%97%A5%E6%9C%AC%E8%AA%9E%E3%81%82%E3%81%84%E3%81%86%E3%81%88%E3%83%86%E3%82%B9%E3%83%88.zip\n</code></pre>\n<p>This works correctly in Spring Boot 2.6.11, but in Spring Boot 2.7.11, the downloaded file is named &quot;files.zip&quot; instead of the correct filename.</p>\n<p>Here's the code that I'm using to set the Content-Disposition header:</p>\n<pre><code>public static void setContentDisposition(\n    HttpServletResponse response, String filename, boolean download) {\n        String encodedFilename = UriUtils.encode(filename, StandardCharsets.UTF_8).replaceAll(&quot;\\\\+&quot;,\n   &quot;%20&quot;);\n      String disposition = (download ? &quot;attachment&quot; : &quot;inline&quot;) +\n        &quot;; filename=\\&quot;&quot; + filename + &quot;\\&quot;&quot; +\n        &quot;; filename*=UTF-8''&quot; + encodedFilename;\n      response.setHeader(HttpHeaders.CONTENT_DISPOSITION, disposition);\n}\n</code></pre>\n<p>I'm not sure why this isn't working in Spring Boot 2.7.11. Can anyone help me figure out what might be causing this issue?</p>\n"},{"tags":["java","regex","email"],"answers":[{"tags":[],"owner":{"account_id":14348046,"reputation":30,"user_id":20448104,"display_name":"Najam Ul Saqib"},"comment_count":0,"down_vote_count":2,"up_vote_count":1,"is_accepted":true,"score":-1,"last_activity_date":1683741387,"creation_date":1683741387,"answer_id":76221347,"question_id":76221333,"body_markdown":"The regex you provided is a basic email validation pattern, and it seems to meet your requirements as described. However, it is not very strict and may allow some invalid email addresses to pass through. Here&#39;s the regex you provided:\r\n\r\n    private static final String EMAIL_REGEX = &quot;^\\\\s*(.+)@(.+)\\\\.(.+)\\\\s*$&quot;;\r\n\r\nThis regex will match email addresses with the format you described, ignoring leading and trailing whitespace, and requiring at least one character for the username, domain, and domain extension. However, it does not impose any restrictions on the types of characters that can appear in the username, domain, or domain extension.\r\n\r\nIf you want to improve the regex to be slightly more strict, you can use the following pattern:\r\n\r\n\r\n\r\n    private static final String EMAIL_REGEX = &quot;^\\\\s*([\\\\w!#$%&amp;&#39;*+\\\\-/=?^_`{|}~]+(?:\\\\.[\\\\w!#$%&amp;&#39;*+\\\\-/=?^_`{|}~]+)*)@([\\\\w](?:[\\\\w-]*[\\\\w])?\\\\.)+[a-zA-Z]{2,}\\\\s*$&quot;;\r\n\r\nThis pattern allows for a wider range of valid characters in the username and domain, while also checking for valid domain extensions consisting of at least two alphabetic characters. However, it still may not cover all valid email addresses or reject all invalid ones.\r\n\r\nThe Apache Commons EmailValidator is more comprehensive in its validation, but as you mentioned, it may not suit your use case. If the regex pattern above works for your specific requirements, then you can use it for your basic email validation.","title":"Java regex basic email validation","body":"<p>The regex you provided is a basic email validation pattern, and it seems to meet your requirements as described. However, it is not very strict and may allow some invalid email addresses to pass through. Here's the regex you provided:</p>\n<pre><code>private static final String EMAIL_REGEX = &quot;^\\\\s*(.+)@(.+)\\\\.(.+)\\\\s*$&quot;;\n</code></pre>\n<p>This regex will match email addresses with the format you described, ignoring leading and trailing whitespace, and requiring at least one character for the username, domain, and domain extension. However, it does not impose any restrictions on the types of characters that can appear in the username, domain, or domain extension.</p>\n<p>If you want to improve the regex to be slightly more strict, you can use the following pattern:</p>\n<pre><code>private static final String EMAIL_REGEX = &quot;^\\\\s*([\\\\w!#$%&amp;'*+\\\\-/=?^_`{|}~]+(?:\\\\.[\\\\w!#$%&amp;'*+\\\\-/=?^_`{|}~]+)*)@([\\\\w](?:[\\\\w-]*[\\\\w])?\\\\.)+[a-zA-Z]{2,}\\\\s*$&quot;;\n</code></pre>\n<p>This pattern allows for a wider range of valid characters in the username and domain, while also checking for valid domain extensions consisting of at least two alphabetic characters. However, it still may not cover all valid email addresses or reject all invalid ones.</p>\n<p>The Apache Commons EmailValidator is more comprehensive in its validation, but as you mentioned, it may not suit your use case. If the regex pattern above works for your specific requirements, then you can use it for your basic email validation.</p>\n"}],"owner":{"account_id":16704955,"reputation":423,"user_id":15407955,"display_name":"user124"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1683741732,"accepted_answer_id":76221347,"answer_count":1,"score":-1,"last_activity_date":1683772063,"creation_date":1683741219,"question_id":76221333,"body_markdown":"I want to do basic email validation in java using regex and I came up with following regex\r\n\r\n    private static final String EMAIL_REGEX = &quot;^\\\\s*(.+)@(.+)\\\\.(.+)\\\\s*$&quot;;\r\n    \r\n    If we take test@gmail.com under this regex.\r\n    \r\n    1. Ignore starting and trailing white spaces.\r\n    2. 1 or more char for username  (test)\r\n    3. @\r\n    4. one or more char for domain (gmail)\r\n    5. .\r\n    6. one or more char for domain extension(com).\r\n\r\nIs it correct as per my requirement?\r\n\r\nI have checked Apache EmailValidator but it does some validation of domain also, eg. when i tried it with test@gmail.adpcc, then it did not work. And I want it to work as per my use case.\r\n","title":"Java regex basic email validation","body":"<p>I want to do basic email validation in java using regex and I came up with following regex</p>\n<pre><code>private static final String EMAIL_REGEX = &quot;^\\\\s*(.+)@(.+)\\\\.(.+)\\\\s*$&quot;;\n\nIf we take test@gmail.com under this regex.\n\n1. Ignore starting and trailing white spaces.\n2. 1 or more char for username  (test)\n3. @\n4. one or more char for domain (gmail)\n5. .\n6. one or more char for domain extension(com).\n</code></pre>\n<p>Is it correct as per my requirement?</p>\n<p>I have checked Apache EmailValidator but it does some validation of domain also, eg. when i tried it with test@gmail.adpcc, then it did not work. And I want it to work as per my use case.</p>\n"},{"tags":["java","mysql","hibernate","jpa","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":111584,"reputation":2209,"user_id":294696,"accept_rate":100,"display_name":"Mikk"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1424211124,"creation_date":1424211124,"answer_id":28572095,"question_id":28571848,"body_markdown":"You can try:\r\n\r\n    @Entity\r\n    @Table(name = &quot;ITEMS_TO_REGISTER&quot;)\r\n    public class ItemsToRegister implements Serializable {\r\n       ...","title":"Spring boot JPA insert in TABLE with uppercase name with Hibernate","body":"<p>You can try:</p>\n\n<pre><code>@Entity\n@Table(name = \"ITEMS_TO_REGISTER\")\npublic class ItemsToRegister implements Serializable {\n   ...\n</code></pre>\n"},{"comments":[{"owner":{"account_id":553219,"reputation":4323,"user_id":918608,"accept_rate":63,"display_name":"Josh C."},"score":3,"creation_date":1461705153,"post_id":28574416,"comment_id":61318428,"body_markdown":"The tics didn&#39;t work, but escaping a double quote did. ie. \n`@Table(name = &quot;\\&quot;ITEMS_TO_REGISTER\\&quot;&quot;)`. I&#39;m on postgres and using eclipselink. Maybe that makes a difference.","body":"The tics didn&#39;t work, but escaping a double quote did. ie.  <code>@Table(name = &quot;\\&quot;ITEMS_TO_REGISTER\\&quot;&quot;)</code>. I&#39;m on postgres and using eclipselink. Maybe that makes a difference."},{"owner":{"account_id":3967293,"reputation":1851,"user_id":3272856,"display_name":"Z4-"},"score":0,"creation_date":1483702834,"post_id":28574416,"comment_id":70215053,"body_markdown":"Yep, that&#39;s the proper way of doing it: with regular quotes (&quot;) as Josh C. pointed out. If hibernate sees those, it quotes the given identifier appropriately for the dialect e.g. with backticks (`) for MySQL.","body":"Yep, that&#39;s the proper way of doing it: with regular quotes (&quot;) as Josh C. pointed out. If hibernate sees those, it quotes the given identifier appropriately for the dialect e.g. with backticks (`) for MySQL."},{"owner":{"account_id":552361,"reputation":18316,"user_id":917467,"accept_rate":76,"display_name":"html_programmer"},"score":1,"creation_date":1638444960,"post_id":28574416,"comment_id":124092229,"body_markdown":"Using forward slashes works, although it looks utterly disgusting.","body":"Using forward slashes works, although it looks utterly disgusting."}],"tags":[],"owner":{"account_id":5703004,"reputation":524,"user_id":4507438,"display_name":"John Thompson"},"comment_count":3,"down_vote_count":3,"up_vote_count":19,"is_accepted":false,"score":16,"last_activity_date":1424223009,"creation_date":1424223009,"answer_id":28574416,"question_id":28571848,"body_markdown":"You&#39;ll need to escape the table name with tics(`) to make it case sensitive. \r\n\r\n    @Table(name = &quot;`ITEMS_TO_REGISTER`&quot;)","title":"Spring boot JPA insert in TABLE with uppercase name with Hibernate","body":"<p>You'll need to escape the table name with tics(`) to make it case sensitive. </p>\n\n<pre><code>@Table(name = \"`ITEMS_TO_REGISTER`\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2416768,"reputation":906,"user_id":2110628,"accept_rate":57,"display_name":"carlj"},"comment_count":0,"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1571885045,"creation_date":1424811758,"answer_id":28706179,"question_id":28571848,"body_markdown":"The solution is to add: \r\n\r\n    spring.jpa.hibernate.naming_strategy=org.hibernate.cfg.EJB3NamingStrategy\r\n\r\nto `application.properties`\r\n","title":"Spring boot JPA insert in TABLE with uppercase name with Hibernate","body":"<p>The solution is to add: </p>\n\n<pre><code>spring.jpa.hibernate.naming_strategy=org.hibernate.cfg.EJB3NamingStrategy\n</code></pre>\n\n<p>to <code>application.properties</code></p>\n"},{"comments":[{"owner":{"account_id":301693,"reputation":827,"user_id":609597,"accept_rate":50,"display_name":"softwarevamp"},"score":0,"creation_date":1523068446,"post_id":39194169,"comment_id":86420008,"body_markdown":"How to do with hibernate 3?","body":"How to do with hibernate 3?"}],"tags":[],"owner":{"account_id":8947834,"reputation":1896,"user_id":6674574,"display_name":"jasonleakey"},"comment_count":1,"down_vote_count":0,"up_vote_count":169,"is_accepted":true,"score":169,"last_activity_date":1472406635,"creation_date":1472406635,"answer_id":39194169,"question_id":28571848,"body_markdown":"On hibernate 5, it would be \r\n\r\n    spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\r\n\r\nin your **application.properties** file. ","title":"Spring boot JPA insert in TABLE with uppercase name with Hibernate","body":"<p>On hibernate 5, it would be </p>\n\n<pre><code>spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\n</code></pre>\n\n<p>in your <strong>application.properties</strong> file. </p>\n"},{"comments":[{"owner":{"account_id":4243102,"reputation":3047,"user_id":5784939,"display_name":"Eugene Maysyuk"},"score":1,"creation_date":1617887894,"post_id":44208675,"comment_id":118438787,"body_markdown":"I think the best approach is to alway use PhysicalNamingStrategy and explicitly define table names in lowercase @Table(name=&quot;name_in_lowercase&quot;). And setup database to keep table names in lowercase (lower_case_table_names=1 in case of mysql).","body":"I think the best approach is to alway use PhysicalNamingStrategy and explicitly define table names in lowercase @Table(name=&quot;name_in_lowercase&quot;). And setup database to keep table names in lowercase (lower_case_table_names=1 in case of mysql)."}],"tags":[],"owner":{"account_id":4143810,"reputation":501,"user_id":3398188,"display_name":"SekharKari"},"comment_count":1,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1495826248,"creation_date":1495825900,"answer_id":44208675,"question_id":28571848,"body_markdown":"As @jasonleakey suggested we can consider using naming-strategy as below.\r\n\r\n    spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\r\n\r\nthis tells Hibernate to generate SQL&#39;s as exactly as specified in the @Table (name=&quot; &quot;) or @Column(name=&quot; &quot;). All well.\r\n\r\nBut keep in mind - while using PhysicalNamingStrategy without @Table, @Column annotations in the entity class, hibernate generates SQL using class name and variable names.  Consider the below java class\r\n\r\n    Class Employee {\r\n       private String firstName;\r\n       private String lastName; \r\n    }\r\n\r\nthen the generated sql would be,\r\n\r\n    select employee0_.firstName,employee0_lastName from Employee employee0_;\r\n\r\nUnfortunately this is not a great choice as typically we would have defined the columns in DB as FIRST_NAME and LAST_NAME and table name as EMPLOYEE. Had you not used PhysicalNamingStrategy the SQL would have been\r\n\r\n    select employee0_.first_name,employee0_last_name from employee employee0_;\r\n\r\nso it&#39;s really a choice between the below two options.\r\n\r\n \r\n\r\n - Use PhysicalStrategy and explicitly define all tables names/column names in java code with @Table and @Column annotations.\r\n &lt;br&gt;or \r\n - Define lowercase table name in db and let hibernate automatically generate table names/column names for us.","title":"Spring boot JPA insert in TABLE with uppercase name with Hibernate","body":"<p>As @jasonleakey suggested we can consider using naming-strategy as below.</p>\n\n<pre><code>spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\n</code></pre>\n\n<p>this tells Hibernate to generate SQL's as exactly as specified in the @Table (name=\" \") or @Column(name=\" \"). All well.</p>\n\n<p>But keep in mind - while using PhysicalNamingStrategy without @Table, @Column annotations in the entity class, hibernate generates SQL using class name and variable names.  Consider the below java class</p>\n\n<pre><code>Class Employee {\n   private String firstName;\n   private String lastName; \n}\n</code></pre>\n\n<p>then the generated sql would be,</p>\n\n<pre><code>select employee0_.firstName,employee0_lastName from Employee employee0_;\n</code></pre>\n\n<p>Unfortunately this is not a great choice as typically we would have defined the columns in DB as FIRST_NAME and LAST_NAME and table name as EMPLOYEE. Had you not used PhysicalNamingStrategy the SQL would have been</p>\n\n<pre><code>select employee0_.first_name,employee0_last_name from employee employee0_;\n</code></pre>\n\n<p>so it's really a choice between the below two options.</p>\n\n<ul>\n<li>Use PhysicalStrategy and explicitly define all tables names/column names in java code with @Table and @Column annotations.\n<br>or </li>\n<li>Define lowercase table name in db and let hibernate automatically generate table names/column names for us.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3910972,"reputation":129,"user_id":3236321,"display_name":"mjassani"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1501601309,"creation_date":1501601309,"answer_id":45441904,"question_id":28571848,"body_markdown":"You can implement your own strategy and invoke it from application.properties:\r\n\r\n    spring.jpa.hibernate.naming.physical-strategy=com.proto.CustomPhysicalNamingStrategy\r\n\r\nBellow an example that always capitalize the first letter \r\n\r\n    import java.io.Serializable;\r\n    import org.apache.commons.lang3.StringUtils;\r\n    import org.hibernate.boot.model.naming.Identifier;\r\n    import org.hibernate.boot.model.naming.PhysicalNamingStrategy;\r\n    import org.hibernate.engine.jdbc.env.spi.JdbcEnvironment;\r\n    \r\n    public class CustomPhysicalNamingStrategy implements PhysicalNamingStrategy, Serializable {\r\n    \t/**\r\n    \t * Singleton access\r\n    \t */\r\n    \tpublic static final CustomPhysicalNamingStrategy INSTANCE = new CustomPhysicalNamingStrategy();\r\n    \r\n    \t@Override\r\n    \tpublic Identifier toPhysicalCatalogName(Identifier name, JdbcEnvironment context) {\r\n    \t\treturn capitalize(name);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Identifier toPhysicalSchemaName(Identifier name, JdbcEnvironment context) {\r\n    \t\treturn capitalize(name);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Identifier toPhysicalTableName(Identifier name, JdbcEnvironment context) {\r\n    \t\treturn capitalize(name);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Identifier toPhysicalSequenceName(Identifier name, JdbcEnvironment context) {\r\n    \t\treturn capitalize(name);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Identifier toPhysicalColumnName(Identifier name, JdbcEnvironment context) {\r\n    \t\treturn capitalize(name);\r\n    \t}\r\n    \t\r\n    \tprivate Identifier capitalize(Identifier name) {\r\n    \t\tif (name == null)\r\n    \t\t\treturn null;\r\n    \t\tif (name.isQuoted())\r\n    \t\t\treturn name;\r\n    \t\tString text = StringUtils.capitalize(name.getText());\r\n    \t\treturn Identifier.toIdentifier(text);\r\n    \t}\r\n    }\r\n\r\n","title":"Spring boot JPA insert in TABLE with uppercase name with Hibernate","body":"<p>You can implement your own strategy and invoke it from application.properties:</p>\n\n<pre><code>spring.jpa.hibernate.naming.physical-strategy=com.proto.CustomPhysicalNamingStrategy\n</code></pre>\n\n<p>Bellow an example that always capitalize the first letter </p>\n\n<pre><code>import java.io.Serializable;\nimport org.apache.commons.lang3.StringUtils;\nimport org.hibernate.boot.model.naming.Identifier;\nimport org.hibernate.boot.model.naming.PhysicalNamingStrategy;\nimport org.hibernate.engine.jdbc.env.spi.JdbcEnvironment;\n\npublic class CustomPhysicalNamingStrategy implements PhysicalNamingStrategy, Serializable {\n    /**\n     * Singleton access\n     */\n    public static final CustomPhysicalNamingStrategy INSTANCE = new CustomPhysicalNamingStrategy();\n\n    @Override\n    public Identifier toPhysicalCatalogName(Identifier name, JdbcEnvironment context) {\n        return capitalize(name);\n    }\n\n    @Override\n    public Identifier toPhysicalSchemaName(Identifier name, JdbcEnvironment context) {\n        return capitalize(name);\n    }\n\n    @Override\n    public Identifier toPhysicalTableName(Identifier name, JdbcEnvironment context) {\n        return capitalize(name);\n    }\n\n    @Override\n    public Identifier toPhysicalSequenceName(Identifier name, JdbcEnvironment context) {\n        return capitalize(name);\n    }\n\n    @Override\n    public Identifier toPhysicalColumnName(Identifier name, JdbcEnvironment context) {\n        return capitalize(name);\n    }\n\n    private Identifier capitalize(Identifier name) {\n        if (name == null)\n            return null;\n        if (name.isQuoted())\n            return name;\n        String text = StringUtils.capitalize(name.getText());\n        return Identifier.toIdentifier(text);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12381428,"reputation":809,"user_id":9026870,"display_name":"Oleh Tatsiun"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1635596279,"creation_date":1635596279,"answer_id":69779561,"question_id":28571848,"body_markdown":"I use H2 database in the example.\r\n\r\nMaking table name &quot;user&quot; with backticks will give you lowercase table name in your database.\r\n\r\nEntity class:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nTable name in the database:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nP.S. You can name entity as &quot;User&quot;(uppercase) it will give you &quot;user&quot;(lowercase) anyway\r\n\r\nSource:\r\nhttp://coddingbuddy.com/article/56566857/jpa-uppercase-table-names\r\n\r\n  [1]: https://i.stack.imgur.com/6Hvzk.png\r\n  [2]: https://i.stack.imgur.com/s9izw.png","title":"Spring boot JPA insert in TABLE with uppercase name with Hibernate","body":"<p>I use H2 database in the example.</p>\n<p>Making table name &quot;user&quot; with backticks will give you lowercase table name in your database.</p>\n<p>Entity class:</p>\n<p><a href=\"https://i.stack.imgur.com/6Hvzk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6Hvzk.png\" alt=\"enter image description here\" /></a></p>\n<p>Table name in the database:</p>\n<p><a href=\"https://i.stack.imgur.com/s9izw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s9izw.png\" alt=\"enter image description here\" /></a></p>\n<p>P.S. You can name entity as &quot;User&quot;(uppercase) it will give you &quot;user&quot;(lowercase) anyway</p>\n<p>Source:\n<a href=\"http://coddingbuddy.com/article/56566857/jpa-uppercase-table-names\" rel=\"nofollow noreferrer\">http://coddingbuddy.com/article/56566857/jpa-uppercase-table-names</a></p>\n"},{"tags":[],"owner":{"account_id":1400419,"reputation":1726,"user_id":1329308,"display_name":"Vadim Zin4uk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665034267,"creation_date":1665034267,"answer_id":73969010,"question_id":28571848,"body_markdown":"Try this property:\r\n\r\n    spring:\r\n      jpa:\r\n        properties:\r\n          hibernate:\r\n            globally_quoted_identifiers: true","title":"Spring boot JPA insert in TABLE with uppercase name with Hibernate","body":"<p>Try this property:</p>\n<pre><code>spring:\n  jpa:\n    properties:\n      hibernate:\n        globally_quoted_identifiers: true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3975546,"reputation":8098,"user_id":3278822,"accept_rate":74,"display_name":"DDan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683771574,"creation_date":1683771574,"answer_id":76223719,"question_id":28571848,"body_markdown":"If you are using yml configuration, add this:\r\n\r\n    spring:\r\n      jpa:\r\n        hibernate:\r\n          naming:\r\n            physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl","title":"Spring boot JPA insert in TABLE with uppercase name with Hibernate","body":"<p>If you are using yml configuration, add this:</p>\n<pre><code>spring:\n  jpa:\n    hibernate:\n      naming:\n        physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\n</code></pre>\n"}],"owner":{"account_id":2416768,"reputation":906,"user_id":2110628,"accept_rate":57,"display_name":"carlj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":113490,"favorite_count":0,"down_vote_count":0,"up_vote_count":71,"accepted_answer_id":39194169,"answer_count":9,"score":71,"last_activity_date":1683771574,"creation_date":1424210084,"question_id":28571848,"body_markdown":"i have a table entity mapped as : \r\n    \r\n    @Entity\r\n    public class ItemsToRegister implements Serializable{\r\n\r\n    @Id\r\n    @Column(name = &quot;ID_ITEM_TO_REGISTER&quot;)\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private int id;\r\n    .....\r\n\r\nWhen i try to insert new record in database, the table name was translated in lowercase as : items_to_register , but my table name is ITEMS_TO_REGISTER\r\nHow can i fix my problem without change MySql configuration? (my.cnf) \r\n\r\nI have in my application.properties file : \r\n\r\n    spring.jpa.hibernate.dialect = org.hibernate.dialect.MySQL5Dialect\r\n    spring.jpa.hibernate.naming_strategy = org.hibernate.cfg.ImprovedNamingStrategy\r\n","title":"Spring boot JPA insert in TABLE with uppercase name with Hibernate","body":"<p>i have a table entity mapped as : </p>\n\n<pre><code>@Entity\npublic class ItemsToRegister implements Serializable{\n\n@Id\n@Column(name = \"ID_ITEM_TO_REGISTER\")\n@GeneratedValue(strategy = GenerationType.AUTO)\nprivate int id;\n.....\n</code></pre>\n\n<p>When i try to insert new record in database, the table name was translated in lowercase as : items_to_register , but my table name is ITEMS_TO_REGISTER\nHow can i fix my problem without change MySql configuration? (my.cnf) </p>\n\n<p>I have in my application.properties file : </p>\n\n<pre><code>spring.jpa.hibernate.dialect = org.hibernate.dialect.MySQL5Dialect\nspring.jpa.hibernate.naming_strategy = org.hibernate.cfg.ImprovedNamingStrategy\n</code></pre>\n"},{"tags":["java","dnsjava"],"owner":{"account_id":229213,"reputation":8557,"user_id":492015,"accept_rate":68,"display_name":"Arya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683771053,"creation_date":1683771053,"question_id":76223689,"body_markdown":"I have noticed that when checking some domains using the DNSJava library it take a very long time to get dns records.\r\n\r\nThis is the code I am using\r\n\r\n\r\n       private void dnsCheck(DomainName domainName) {\r\n            try {\r\n                final long startTime = System.currentTimeMillis();\r\n                Record[] recordsA = new Lookup(domainName.getDomainName(), Type.A).run();\r\n                Record[] recordsAAAA = new Lookup(domainName.getDomainName(), Type.AAAA).run();\r\n                Record[] recordsCNAME = new Lookup(domainName.getDomainName(), Type.CNAME).run();\r\n                Record[] recordsMX = new Lookup(domainName.getDomainName(), Type.MX).run();\r\n                Record[] recordsNS = new Lookup(domainName.getDomainName(), Type.NS).run();\r\n                Record[] recordsPTR = new Lookup(domainName.getDomainName(), Type.PTR).run();\r\n                Record[] recordsSRV = new Lookup(domainName.getDomainName(), Type.SRV).run();\r\n                Record[] recordsSOA = new Lookup(domainName.getDomainName(), Type.SOA).run();\r\n                Record[] recordsTXT = new Lookup(domainName.getDomainName(), Type.TXT).run();\r\n                Record[] recordsCAA = new Lookup(domainName.getDomainName(), Type.CAA).run();\r\n                Record[] recordsDS = new Lookup(domainName.getDomainName(), Type.DS).run();\r\n                Record[] recordsDNSKEY = new Lookup(domainName.getDomainName(), Type.DNSKEY).run();\r\n                final long endTime = System.currentTimeMillis();\r\n    \r\n                System.out.println(&quot;Total execution time for domain: &quot; + domainName.getDomainName() + &quot; &quot; + (endTime - startTime));\r\n          ....\r\n          ....\r\n           } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n\r\nThe domain names below take a very long time to return results\r\n\r\n    webdddd.com 66042 milliseconds\r\n    gotest.com 16114 milliseconds\r\n    testblog.com 27575 milliseconds\r\n    testapp.com 66283 milliseconds\r\n\r\nBut the following come back fast\r\n\r\n    prodddd.com 115 milliseconds\r\n    ddddmedia.com 179 milliseconds\r\n    greendddd.com 598 milliseconds\r\n    ddddbox.com 619 milliseconds\r\n\r\nAm I not using DNSJava correctly? Is there anything I can do to get the results faster?","title":"Checking some domains takes a very long time with DNSJava","body":"<p>I have noticed that when checking some domains using the DNSJava library it take a very long time to get dns records.</p>\n<p>This is the code I am using</p>\n<pre><code>   private void dnsCheck(DomainName domainName) {\n        try {\n            final long startTime = System.currentTimeMillis();\n            Record[] recordsA = new Lookup(domainName.getDomainName(), Type.A).run();\n            Record[] recordsAAAA = new Lookup(domainName.getDomainName(), Type.AAAA).run();\n            Record[] recordsCNAME = new Lookup(domainName.getDomainName(), Type.CNAME).run();\n            Record[] recordsMX = new Lookup(domainName.getDomainName(), Type.MX).run();\n            Record[] recordsNS = new Lookup(domainName.getDomainName(), Type.NS).run();\n            Record[] recordsPTR = new Lookup(domainName.getDomainName(), Type.PTR).run();\n            Record[] recordsSRV = new Lookup(domainName.getDomainName(), Type.SRV).run();\n            Record[] recordsSOA = new Lookup(domainName.getDomainName(), Type.SOA).run();\n            Record[] recordsTXT = new Lookup(domainName.getDomainName(), Type.TXT).run();\n            Record[] recordsCAA = new Lookup(domainName.getDomainName(), Type.CAA).run();\n            Record[] recordsDS = new Lookup(domainName.getDomainName(), Type.DS).run();\n            Record[] recordsDNSKEY = new Lookup(domainName.getDomainName(), Type.DNSKEY).run();\n            final long endTime = System.currentTimeMillis();\n\n            System.out.println(&quot;Total execution time for domain: &quot; + domainName.getDomainName() + &quot; &quot; + (endTime - startTime));\n      ....\n      ....\n       } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>The domain names below take a very long time to return results</p>\n<pre><code>webdddd.com 66042 milliseconds\ngotest.com 16114 milliseconds\ntestblog.com 27575 milliseconds\ntestapp.com 66283 milliseconds\n</code></pre>\n<p>But the following come back fast</p>\n<pre><code>prodddd.com 115 milliseconds\nddddmedia.com 179 milliseconds\ngreendddd.com 598 milliseconds\nddddbox.com 619 milliseconds\n</code></pre>\n<p>Am I not using DNSJava correctly? Is there anything I can do to get the results faster?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1683771515,"post_id":76223683,"comment_id":134418805,"body_markdown":"Please share the dependency in the pom. Check if there is a conflicting version from a transitive dependency.","body":"Please share the dependency in the pom. Check if there is a conflicting version from a transitive dependency."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1683783081,"post_id":76223683,"comment_id":134419978,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":28366390,"reputation":1,"user_id":21695640,"display_name":"hld942614"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683771004,"creation_date":1683771004,"question_id":76223683,"body_markdown":"when I try to use ContainerFactory in my projectï¼ŒI got error message &quot;java.lang.NoClassDefFoundError: javax/json/JsonValue&quot;ã€‚But I already add dependency &quot;jakarta.json-api 2.0.1 version&quot; in my pom.xml; However when I use the lower version &quot;jakarta.json-api 1.1.6&quot; ,it work well. \r\nMy question is that this &quot;javax/json/JsonValue&quot; doesn&#39;t exist in 2.0.1 version but in 1.1.6 version?\r\n\r\n\r\nI am try to figure out that &quot;javax/json/JsonValue&quot; exist in &quot;jakarta.json-api 2.0.1 version&quot; or not","title":"java.lang.NoClassDefFoundError: javax/json/JsonValue","body":"<p>when I try to use ContainerFactory in my projectï¼ŒI got error message &quot;java.lang.NoClassDefFoundError: javax/json/JsonValue&quot;ã€‚But I already add dependency &quot;jakarta.json-api 2.0.1 version&quot; in my pom.xml; However when I use the lower version &quot;jakarta.json-api 1.1.6&quot; ,it work well.\nMy question is that this &quot;javax/json/JsonValue&quot; doesn't exist in 2.0.1 version but in 1.1.6 version?</p>\n<p>I am try to figure out that &quot;javax/json/JsonValue&quot; exist in &quot;jakarta.json-api 2.0.1 version&quot; or not</p>\n"},{"tags":["java","spring-boot","elasticsearch","exception","indexing"],"answers":[{"comments":[{"owner":{"account_id":23012116,"reputation":51,"user_id":17134498,"display_name":"Dheovani Xavier"},"score":0,"creation_date":1682272851,"post_id":76083655,"comment_id":134185490,"body_markdown":"Sadly, it didn&#39;t work. I&#39;ve tried running ElasticSearch as admin and, by your comment, i though it could be a problem with the path in the @RequestMapping tag and changed it to match the values in the index file, but none of it worked.\n\nThe only thing i&#39;ve noticed is the following log in elasticsearch&#39;s console whenever i try to run my aplication:\n\n[2023-04-23T14:57:56,085][WARN ][o.e.h.n.Netty4HttpServerTransport] [DESKTOP-LO4MIAG] received plaintext http traffic on an https channel, closing connection Netty4HttpChannel{localAddress=/127.0.0.1:9200, remoteAddress=/127.0.0.1:53007}","body":"Sadly, it didn&#39;t work. I&#39;ve tried running ElasticSearch as admin and, by your comment, i though it could be a problem with the path in the @RequestMapping tag and changed it to match the values in the index file, but none of it worked.  The only thing i&#39;ve noticed is the following log in elasticsearch&#39;s console whenever i try to run my aplication:  [2023-04-23T14:57:56,085][WARN ][o.e.h.n.Netty4HttpServerTransport] [DESKTOP-LO4MIAG] received plaintext http traffic on an https channel, closing connection Netty4HttpChannel{localAddress=/127.0.0.1:9200, remoteAddress=/127.0.0.1:53007}"}],"tags":[],"owner":{"account_id":5460030,"reputation":79,"user_id":6250010,"accept_rate":0,"display_name":"Theara"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682235636,"creation_date":1682235636,"answer_id":76083655,"question_id":76082852,"body_markdown":"plz change the index name to the lowercase in class below:\r\n\r\n```\r\npackage br.com.uburu.spring.utils;\r\n\r\npublic final class Indices {\r\n\r\n    public static final String KEYWORD = &quot;keyword&quot;;\r\n    public static final String PATH = &quot;path&quot;;\r\n    public static final String FILTER = &quot;filter&quot;;\r\n    \r\n}\r\n```\r\nResult:\r\n```\r\nrequest [HEAD http://localhost:9200/filter] returned 1 warnings: [299 Elasticsearch-7.17.0-bee86328705acaa9a6daede7140defd4d9ec56bd &quot;Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.&quot;]\r\n2023-04-23T14:40:01.302+07:00  WARN 75565 --- [  restartedMain] org.elasticsearch.client.RestClient      : request [HEAD http://localhost:9200/filter] returned 1 warnings: [299 Elasticsearch-7.17.0-bee86328705acaa9a6daede7140defd4d9ec56bd &quot;Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.&quot;]\r\n2023-04-23T14:40:01.306+07:00  WARN 75565 --- [  restartedMain] org.elasticsearch.client.RestClient      : request [HEAD http://localhost:9200/filter] returned 1 warnings: [299 Elasticsearch-7.17.0-bee86328705acaa9a6daede7140defd4d9ec56bd &quot;Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.&quot;]\r\n2023-04-23T14:40:01.319+07:00  WARN 75565 --- [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\r\n2023-04-23T14:40:01.433+07:00  INFO 75565 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#39;&#39;\r\n2023-04-23T14:40:01.438+07:00  INFO 75565 --- [  restartedMain] br.com.uburu.spring.Application          : Started Application in 1.272 seconds (process running for 6.551)\r\n```","title":"SpringBoot can&#39;t connect to ElasticSearch. It failed to instantiate SimpleElasticsearchRepository","body":"<p>plz change the index name to the lowercase in class below:</p>\n<pre><code>package br.com.uburu.spring.utils;\n\npublic final class Indices {\n\n    public static final String KEYWORD = &quot;keyword&quot;;\n    public static final String PATH = &quot;path&quot;;\n    public static final String FILTER = &quot;filter&quot;;\n    \n}\n</code></pre>\n<p>Result:</p>\n<pre><code>request [HEAD http://localhost:9200/filter] returned 1 warnings: [299 Elasticsearch-7.17.0-bee86328705acaa9a6daede7140defd4d9ec56bd &quot;Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.&quot;]\n2023-04-23T14:40:01.302+07:00  WARN 75565 --- [  restartedMain] org.elasticsearch.client.RestClient      : request [HEAD http://localhost:9200/filter] returned 1 warnings: [299 Elasticsearch-7.17.0-bee86328705acaa9a6daede7140defd4d9ec56bd &quot;Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.&quot;]\n2023-04-23T14:40:01.306+07:00  WARN 75565 --- [  restartedMain] org.elasticsearch.client.RestClient      : request [HEAD http://localhost:9200/filter] returned 1 warnings: [299 Elasticsearch-7.17.0-bee86328705acaa9a6daede7140defd4d9ec56bd &quot;Elasticsearch built-in security features are not enabled. Without authentication, your cluster could be accessible to anyone. See https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html to enable security.&quot;]\n2023-04-23T14:40:01.319+07:00  WARN 75565 --- [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\n2023-04-23T14:40:01.433+07:00  INFO 75565 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''\n2023-04-23T14:40:01.438+07:00  INFO 75565 --- [  restartedMain] br.com.uburu.spring.Application          : Started Application in 1.272 seconds (process running for 6.551)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23012116,"reputation":51,"user_id":17134498,"display_name":"Dheovani Xavier"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1683770282,"creation_date":1683770282,"answer_id":76223650,"question_id":76082852,"body_markdown":"Almost 2 months later, finally managed to solve it. It was a problem with the ssl connection. I&#39;ve turned it all off and reconfigured it manually in `elasticsearch-8.7.0\\config\\elasticsearch.yml` to make it work","title":"SpringBoot can&#39;t connect to ElasticSearch. It failed to instantiate SimpleElasticsearchRepository","body":"<p>Almost 2 months later, finally managed to solve it. It was a problem with the ssl connection. I've turned it all off and reconfigured it manually in <code>elasticsearch-8.7.0\\config\\elasticsearch.yml</code> to make it work</p>\n"}],"owner":{"account_id":23012116,"reputation":51,"user_id":17134498,"display_name":"Dheovani Xavier"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1037,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":76223650,"answer_count":2,"score":3,"last_activity_date":1683770282,"creation_date":1682216810,"question_id":76082852,"body_markdown":"## Problem\r\n\r\nIt seems like my SpringBoot application can&#39;t connect with ElasticSearch. I keep getting this error whenever i try to run my application:\r\n\r\n&gt; UnsatisfiedDependencyException: Error creating bean with name &#39;filterController&#39;: Unsatisfied dependency expressed through field &#39;service&#39;: Error creating bean with name &#39;filterService&#39;: Unsatisfied dependency expressed through field &#39;repository&#39;: Error creating bean with name &#39;filterRepository&#39; defined in repository.FilterRepository defined in @EnableElasticsearchRepositories declared on ElasticsearchRepositoriesRegistrar.EnableElasticsearchRepositoriesConfiguration: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception\r\n\r\n\r\n## Code info\r\n\r\n- I didn&#39;t make any changes nor extra-configurations. I&#39;m running ElasticSearch normally\r\n- I did not create a custom configuration file, since [SpringBoot does it automatically](https://stackoverflow.com/questions/66745757/how-to-use-elasticsearchrestclientautoconfiguration-with-spring-boot)\r\n- You can find full source-code [here](https://github.com/Dheovani/Uburu/tree/elasticsearch)\r\n\r\nThis is my Application.java file:\r\n\r\n```\r\npackage br.com.uburu.spring;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class Application {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(Application.class, args);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nThis is my FilterController.java file:\r\n\r\n```\r\npackage br.com.uburu.spring.controller;\r\n\r\n// Imports\r\n\r\n@RestController\r\n@RequestMapping(&quot;/api/v1/filter&quot;)\r\npublic class FilterController {\r\n\r\n    @Autowired\r\n    private FilterService service;\r\n\r\n    @GetMapping\r\n    public ResponseEntity&lt;List&lt;Filter&gt;&gt; getAll() {\r\n        List&lt;Filter&gt; filters = service.getAll();\r\n        return new ResponseEntity&lt;List&lt;Filter&gt;&gt;(filters, HttpStatus.OK);\r\n    }\r\n\r\n    @GetMapping(&quot;/{id}&quot;)\r\n    public ResponseEntity&lt;Filter&gt; getById(@PathVariable(&quot;id&quot;) long id) {\r\n        Filter filter = service.findById(id);\r\n        return new ResponseEntity&lt;Filter&gt;(filter, HttpStatus.OK);\r\n    }\r\n\r\n    // Some other methods\r\n    \r\n}\r\n```\r\n\r\nThis is the FilterService.java file:\r\n\r\n```\r\npackage br.com.uburu.spring.service;\r\n\r\n// Imports\r\n\r\n@Service\r\npublic class FilterService {\r\n\r\n    @Autowired\r\n    private FilterRepository repository;\r\n\r\n    public List&lt;Filter&gt; getAll() {\r\n        List&lt;Filter&gt; filters = new ArrayList&lt;&gt;();\r\n        repository.findAll().forEach(filters::add);\r\n\r\n        return filters;\r\n    }\r\n\r\n    public Filter findById(long id) {\r\n        return repository.findById(id).orElse(null);\r\n    }\r\n\r\n    public Filter save(Filter filter) {\r\n        return repository.save(filter);\r\n    }\r\n\r\n    public void delete(long id) {\r\n        repository.deleteById(id);\r\n    }\r\n    \r\n}\r\n```\r\n\r\nMy FilterRepository.java file:\r\n\r\n```\r\npackage br.com.uburu.spring.repository;\r\n\r\nimport org.springframework.data.elasticsearch.repository.ElasticsearchRepository;\r\n\r\nimport br.com.uburu.spring.document.Filter;\r\n\r\npublic interface FilterRepository extends ElasticsearchRepository&lt;Filter, Long&gt; {}\r\n```\r\n\r\nTo finish, my project&#39;s dependencies:\r\n\r\n```\r\n&lt;dependencies&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\t\t\r\n\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-data-elasticsearch --&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-data-elasticsearch&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.5&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.data/spring-data-elasticsearch --&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-data-elasticsearch&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;5.0.5&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```\r\n\r\n## Some solutions i&#39;ve tried:\r\n\r\n- Initializing my service and repository variables without the `@Autowired` tag\r\n- Initializing it inside a class constructor, passing the `@Autowired` tag above the constructor\r\n- Running ElasticSearch as admin\r\n- Cleaning Java Language Server Workspace (I&#39;m using VSCode)\r\n- Running `mvn clean install` once again before trying to run my application\r\n\r\n## Logs from ElasticSearch\r\n\r\nI&#39;ve noticed this logs in the ElasticSearch&#39;s console whenever i try to run my SpringBoot application:\r\n\r\n&gt; [2023-04-23T14:57:56,085][WARN ][o.e.h.n.Netty4HttpServerTransport] [DESKTOP-LO4MIAG] received plaintext http traffic on an https channel, closing connection Netty4HttpChannel{localAddress=/127.0.0.1:9200, remoteAddress=/127.0.0.1:53007}\r\n","title":"SpringBoot can&#39;t connect to ElasticSearch. It failed to instantiate SimpleElasticsearchRepository","body":"<h2>Problem</h2>\n<p>It seems like my SpringBoot application can't connect with ElasticSearch. I keep getting this error whenever i try to run my application:</p>\n<blockquote>\n<p>UnsatisfiedDependencyException: Error creating bean with name 'filterController': Unsatisfied dependency expressed through field 'service': Error creating bean with name 'filterService': Unsatisfied dependency expressed through field 'repository': Error creating bean with name 'filterRepository' defined in repository.FilterRepository defined in @EnableElasticsearchRepositories declared on ElasticsearchRepositoriesRegistrar.EnableElasticsearchRepositoriesConfiguration: Failed to instantiate [org.springframework.data.elasticsearch.repository.support.SimpleElasticsearchRepository]: Constructor threw exception</p>\n</blockquote>\n<h2>Code info</h2>\n<ul>\n<li>I didn't make any changes nor extra-configurations. I'm running ElasticSearch normally</li>\n<li>I did not create a custom configuration file, since <a href=\"https://stackoverflow.com/questions/66745757/how-to-use-elasticsearchrestclientautoconfiguration-with-spring-boot\">SpringBoot does it automatically</a></li>\n<li>You can find full source-code <a href=\"https://github.com/Dheovani/Uburu/tree/elasticsearch\" rel=\"nofollow noreferrer\">here</a></li>\n</ul>\n<p>This is my Application.java file:</p>\n<pre><code>package br.com.uburu.spring;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n\n}\n</code></pre>\n<p>This is my FilterController.java file:</p>\n<pre><code>package br.com.uburu.spring.controller;\n\n// Imports\n\n@RestController\n@RequestMapping(&quot;/api/v1/filter&quot;)\npublic class FilterController {\n\n    @Autowired\n    private FilterService service;\n\n    @GetMapping\n    public ResponseEntity&lt;List&lt;Filter&gt;&gt; getAll() {\n        List&lt;Filter&gt; filters = service.getAll();\n        return new ResponseEntity&lt;List&lt;Filter&gt;&gt;(filters, HttpStatus.OK);\n    }\n\n    @GetMapping(&quot;/{id}&quot;)\n    public ResponseEntity&lt;Filter&gt; getById(@PathVariable(&quot;id&quot;) long id) {\n        Filter filter = service.findById(id);\n        return new ResponseEntity&lt;Filter&gt;(filter, HttpStatus.OK);\n    }\n\n    // Some other methods\n    \n}\n</code></pre>\n<p>This is the FilterService.java file:</p>\n<pre><code>package br.com.uburu.spring.service;\n\n// Imports\n\n@Service\npublic class FilterService {\n\n    @Autowired\n    private FilterRepository repository;\n\n    public List&lt;Filter&gt; getAll() {\n        List&lt;Filter&gt; filters = new ArrayList&lt;&gt;();\n        repository.findAll().forEach(filters::add);\n\n        return filters;\n    }\n\n    public Filter findById(long id) {\n        return repository.findById(id).orElse(null);\n    }\n\n    public Filter save(Filter filter) {\n        return repository.save(filter);\n    }\n\n    public void delete(long id) {\n        repository.deleteById(id);\n    }\n    \n}\n</code></pre>\n<p>My FilterRepository.java file:</p>\n<pre><code>package br.com.uburu.spring.repository;\n\nimport org.springframework.data.elasticsearch.repository.ElasticsearchRepository;\n\nimport br.com.uburu.spring.document.Filter;\n\npublic interface FilterRepository extends ElasticsearchRepository&lt;Filter, Long&gt; {}\n</code></pre>\n<p>To finish, my project's dependencies:</p>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n        &lt;artifactId&gt;h2&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n        \n    &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-data-elasticsearch --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-elasticsearch&lt;/artifactId&gt;\n        &lt;version&gt;3.0.5&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework.data/spring-data-elasticsearch --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-data-elasticsearch&lt;/artifactId&gt;\n        &lt;version&gt;5.0.5&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<h2>Some solutions i've tried:</h2>\n<ul>\n<li>Initializing my service and repository variables without the <code>@Autowired</code> tag</li>\n<li>Initializing it inside a class constructor, passing the <code>@Autowired</code> tag above the constructor</li>\n<li>Running ElasticSearch as admin</li>\n<li>Cleaning Java Language Server Workspace (I'm using VSCode)</li>\n<li>Running <code>mvn clean install</code> once again before trying to run my application</li>\n</ul>\n<h2>Logs from ElasticSearch</h2>\n<p>I've noticed this logs in the ElasticSearch's console whenever i try to run my SpringBoot application:</p>\n<blockquote>\n<p>[2023-04-23T14:57:56,085][WARN ][o.e.h.n.Netty4HttpServerTransport] [DESKTOP-LO4MIAG] received plaintext http traffic on an https channel, closing connection Netty4HttpChannel{localAddress=/127.0.0.1:9200, remoteAddress=/127.0.0.1:53007}</p>\n</blockquote>\n"},{"tags":["java","hibernate","spring-data-jpa","spring-data","eclipselink"],"comments":[{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1683778873,"post_id":76223632,"comment_id":134419498,"body_markdown":"afaik, you can&#39;t overcome that, hibernate creates insert task upon persist, so it expects all required fields are populated, however I do like that eclipselink behaviour.","body":"afaik, you can&#39;t overcome that, hibernate creates insert task upon persist, so it expects all required fields are populated, however I do like that eclipselink behaviour."}],"owner":{"account_id":13778459,"reputation":73,"user_id":9944181,"display_name":"Hasn A"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1683769939,"creation_date":1683769939,"question_id":76223632,"body_markdown":"We are migrating our application from eclipselink to hibernate.\r\nIn our legacy code we are persisting the object first, then setting the values.\r\nThis used to work in eclipselink but fails in hibernate in the case when we try to call em.persist before setting the value of any field which has not-null constraint in DB.\r\n\r\nError message I get:\r\n\r\n    could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\r\n\r\neclipselink code which works:  \r\n\r\n    //eclipselink 2.5.1\r\n    @javax.ejb.TransactionAttribute(javax.ejb.TransactionAttributeType.REQUIRED)\r\n    public void save(Person p){\r\n        em.persist(p);\r\n        p.setEmail(&quot;abc@xyz.com&quot;);         \r\n    }\r\n\r\n\r\nHibernate code which doesnt work(same code as eclipselink)\r\n\r\n    //hibernate 5.6.15\r\n    @org.springframework.transaction.annotation.Transactional\r\n    public void save(Person p){\r\n        em.persist(p);             \r\n        p.setEmail(&quot;abc@xyz.com&quot;);\r\n    }\r\n\r\nHere p.setEmail() is set as not-null in DB.\r\nAnd exception is thrown after the method execution is completed and it goes to commit the transaction. And in logs the generated insert query has null value for property &#39;email&#39;.","title":"Eclipselink to Hibernate migration: em.persist fails in hibernate when not null is set in DB","body":"<p>We are migrating our application from eclipselink to hibernate.\nIn our legacy code we are persisting the object first, then setting the values.\nThis used to work in eclipselink but fails in hibernate in the case when we try to call em.persist before setting the value of any field which has not-null constraint in DB.</p>\n<p>Error message I get:</p>\n<pre><code>could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement\n</code></pre>\n<p>eclipselink code which works:</p>\n<pre><code>//eclipselink 2.5.1\n@javax.ejb.TransactionAttribute(javax.ejb.TransactionAttributeType.REQUIRED)\npublic void save(Person p){\n    em.persist(p);\n    p.setEmail(&quot;abc@xyz.com&quot;);         \n}\n</code></pre>\n<p>Hibernate code which doesnt work(same code as eclipselink)</p>\n<pre><code>//hibernate 5.6.15\n@org.springframework.transaction.annotation.Transactional\npublic void save(Person p){\n    em.persist(p);             \n    p.setEmail(&quot;abc@xyz.com&quot;);\n}\n</code></pre>\n<p>Here p.setEmail() is set as not-null in DB.\nAnd exception is thrown after the method execution is completed and it goes to commit the transaction. And in logs the generated insert query has null value for property 'email'.</p>\n"},{"tags":["java","apache-nifi"],"answers":[{"tags":[],"owner":{"account_id":22213424,"reputation":49,"user_id":16452194,"display_name":"Kyle"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683768656,"creation_date":1683767591,"answer_id":76223504,"question_id":76221847,"body_markdown":"Well I *seemed* to have figured it out with some help from some other articles. \r\n\r\nI went into the nifi.properties file located in the conf folder.\r\n\r\nI changed the following property from 8443 to 8442 (I chose 8442 arbitrarily hoping since it was close to 8443 that made it a good port candidate so you may want to choose a different one)\r\n\r\n    nifi.web.https.port=8442\r\n\r\nThen, I navigated to the login-identity-providers.xml file located in the same conf folder. \r\n\r\nI removed the default username and password that were in the file so that it looks like it does below.\r\n\r\n    &lt;provider&gt;\r\n        &lt;identifier&gt;single-user-provider&lt;/identifier&gt;\r\n        &lt;class&gt;org.apache.nifi.authentication.single.user.SingleUserLoginIdentityProvider&lt;/class&gt;\r\n        &lt;property name=&quot;Username&quot;&gt;&lt;/property&gt;\r\n        &lt;property name=&quot;Password&quot;&gt;&lt;/property&gt;\r\n    &lt;/provider&gt;\r\n\r\nThen, I went back to the terminal, navigated to the `bin` directory and ran the following command...\r\n\r\n    ./nifi.sh restart\r\n\r\nIt spit out a ton of code but if you use ctrl + F and search for the word &quot;generated&quot; (without quotes) you should see a generated username and password.\r\n\r\nFinally, I navigated to https://127.0.0.1:8442/nifi/ and entered the generated username and password and eureka it seems to be working!\r\n\r\nHopefully nothing important was using port 8442!","title":"Kill command not working on java.net.BindException: Address already in use error","body":"<p>Well I <em>seemed</em> to have figured it out with some help from some other articles.</p>\n<p>I went into the nifi.properties file located in the conf folder.</p>\n<p>I changed the following property from 8443 to 8442 (I chose 8442 arbitrarily hoping since it was close to 8443 that made it a good port candidate so you may want to choose a different one)</p>\n<pre><code>nifi.web.https.port=8442\n</code></pre>\n<p>Then, I navigated to the login-identity-providers.xml file located in the same conf folder.</p>\n<p>I removed the default username and password that were in the file so that it looks like it does below.</p>\n<pre><code>&lt;provider&gt;\n    &lt;identifier&gt;single-user-provider&lt;/identifier&gt;\n    &lt;class&gt;org.apache.nifi.authentication.single.user.SingleUserLoginIdentityProvider&lt;/class&gt;\n    &lt;property name=&quot;Username&quot;&gt;&lt;/property&gt;\n    &lt;property name=&quot;Password&quot;&gt;&lt;/property&gt;\n&lt;/provider&gt;\n</code></pre>\n<p>Then, I went back to the terminal, navigated to the <code>bin</code> directory and ran the following command...</p>\n<pre><code>./nifi.sh restart\n</code></pre>\n<p>It spit out a ton of code but if you use ctrl + F and search for the word &quot;generated&quot; (without quotes) you should see a generated username and password.</p>\n<p>Finally, I navigated to <a href=\"https://127.0.0.1:8442/nifi/\" rel=\"nofollow noreferrer\">https://127.0.0.1:8442/nifi/</a> and entered the generated username and password and eureka it seems to be working!</p>\n<p>Hopefully nothing important was using port 8442!</p>\n"}],"owner":{"account_id":22213424,"reputation":49,"user_id":16452194,"display_name":"Kyle"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":161,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683768656,"creation_date":1683745884,"question_id":76221847,"body_markdown":"None of the other similar posts to this issue fix my problem.\r\n\r\nThe generated username and password for Apache Nifi doesn&#39;t work.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI&#39;m following [these][2] instructions.\r\n\r\n[![enter image description here][3]][3]\r\n\r\nI tried running the `tail -f nifi-app.log` command to troubleshoot the issue.\r\n\r\nAnd got the following results... \r\n\r\n    Caused by: java.net.BindException: Address already in use\r\n    \tat java.base/sun.nio.ch.Net.bind0(Native Method)\r\n    \tat java.base/sun.nio.ch.Net.bind(Net.java:555)\r\n    \tat java.base/sun.nio.ch.ServerSocketChannelImpl.netBind(ServerSocketChannelImpl.java:337)\r\n    \tat java.base/sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:294)\r\n    \tat java.base/sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:89)\r\n    \tat org.eclipse.jetty.server.ServerConnector.openAcceptChannel(ServerConnector.java:344)\r\n    \t... 10 common frames omitted\r\n    2023-05-10 14:22:54,303 INFO [Thread-0] org.apache.nifi.NiFi Application Server shutdown started\r\n\r\nI tried checking the port with the following command `sudo lsof -i :8443`\r\n\r\nand got the following response,,,\r\n\r\n    COMMAND   PID USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME\r\n    java    71776 user 3146u  IPv4 0x9a0863600c7cb941      0t0  TCP localhost:pcsync-https (LISTEN)\r\n\r\nSo, I killed the process using `kill 71776`\r\n\r\nI started Nifi again using `bin/nifi.sh start`\r\n\r\nand again ran the command `tail -f nifi-app.log`\r\n\r\nwhich resulted in the following...\r\n\r\n    2023-05-10 14:57:09,939 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@ff0e6d4{/nifi-jolt-transform-json-ui-1.21.0,/nifi-jolt-transform-json-ui-1.21.0,file:///Users/user/nifi-1.21.0/work/jetty/nifi-jolt-transform-json-ui-1.21.0.war/webapp/,AVAILABLE}{./work/nar/extensions/nifi-standard-nar-1.21.0.nar-unpacked/NAR-INF/bundled-dependencies/nifi-jolt-transform-json-ui-1.21.0.war}\r\n    2023-05-10 14:57:10,512 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=143ms\r\n    2023-05-10 14:57:10,530 INFO [main] o.e.j.s.handler.ContextHandler._nifi No Spring WebApplicationInitializer types detected on classpath\r\n    2023-05-10 14:57:10,604 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@70d3cdbf{nifi,/nifi,file:///Users/user/nifi-1.21.0/work/jetty/nifi-web-ui-1.21.0.war/webapp/,AVAILABLE}{./work/nar/extensions/nifi-server-nar-1.21.0.nar-unpacked/NAR-INF/bundled-dependencies/nifi-web-ui-1.21.0.war}\r\n    2023-05-10 14:57:11,128 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=273ms\r\n    2023-05-10 14:57:11,131 INFO [main] o.e.j.s.handler.ContextHandler._nifi_api No Spring WebApplicationInitializer types detected on classpath\r\n    2023-05-10 14:57:11,248 INFO [main] o.e.j.s.handler.ContextHandler._nifi_api Initializing Spring root WebApplicationContext\r\n    2023-05-10 14:57:14,041 INFO [main] o.a.nifi.properties.NiFiPropertiesLoader Loading Application Properties [/Users/user/nifi-1.21.0/./conf/nifi.properties]\r\n    2023-05-10 14:57:17,367 INFO [main] o.a.n.r.v.FileBasedVariableRegistry Loaded 91 properties from system properties and environment variables\r\n    2023-05-10 14:57:17,367 INFO [main] o.a.n.r.v.FileBasedVariableRegistry Loaded a total of 91 properties.  Including precedence overrides effective accessible registry key size is 91\r\n    2023-05-10 14:57:18,441 INFO [main] o.a.n.c.r.WriteAheadFlowFileRepository Initialized FlowFile Repository\r\n    2023-05-10 14:57:18,450 INFO [main] o.apache.nifi.controller.FlowController Creating Provenance Repository [org.apache.nifi.provenance.WriteAheadProvenanceRepository]\r\n    2023-05-10 14:57:18,509 INFO [main] o.a.n.p.store.WriteAheadStorePartition After recovering ./provenance_repository, next Event ID to be generated will be 0\r\n    2023-05-10 14:57:18,514 INFO [main] o.a.n.p.index.lucene.LuceneEventIndex Will avoid re-indexing Provenance Events because the newest index is defunct, so it will be re-indexed in the background\r\n    2023-05-10 14:57:18,515 INFO [main] o.apache.nifi.controller.FlowController Creating Content Repository [org.apache.nifi.controller.repository.FileSystemRepository]\r\n    2023-05-10 14:57:18,523 INFO [main] o.a.n.c.repository.FileSystemRepository Maximum Threshold for Container default set to 129851995586 bytes; if volume exceeds this size, archived data will be deleted until it no longer exceeds this size\r\n    2023-05-10 14:57:18,523 INFO [main] o.a.n.c.repository.FileSystemRepository Initializing FileSystemRepository with &#39;Always Sync&#39; set to false\r\n    2023-05-10 14:57:18,927 INFO [main] org.wali.MinimalLockingWriteAheadLog org.wali.MinimalLockingWriteAheadLog@149fab7f finished recovering records. Performing Checkpoint to ensure proper state of Partitions before updates\r\n    2023-05-10 14:57:18,927 INFO [main] org.wali.MinimalLockingWriteAheadLog Successfully recovered 2 records in 8 milliseconds\r\n    2023-05-10 14:57:18,951 INFO [main] org.wali.MinimalLockingWriteAheadLog org.wali.MinimalLockingWriteAheadLog@149fab7f checkpointed with 2 Records and 0 Swap Files in 24 milliseconds (Stop-the-world time = 7 milliseconds, Clear Edit Logs time = 10 millis), max Transaction ID 1\r\n    2023-05-10 14:57:19,032 INFO [main] o.apache.nifi.controller.FlowController Not enabling RAW Socket Site-to-Site functionality because nifi.remote.input.socket.port is not set\r\n    2023-05-10 14:57:22,380 INFO [main] o.s.s.web.DefaultSecurityFilterChain Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6b89cbc0, org.apache.nifi.web.security.csrf.SkipReplicatedCsrfFilter@7a9c91e7, org.springframework.security.web.csrf.CsrfFilter@52e10d07, org.apache.nifi.web.security.x509.X509AuthenticationFilter@2b7e07e0, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@37717b97, org.apache.nifi.web.security.log.AuthenticationUserFilter@12837172, org.springframework.security.web.access.ExceptionTranslationFilter@40b4a59c, org.springframework.security.web.access.intercept.AuthorizationFilter@26d38b98]\r\n    2023-05-10 14:57:23,190 INFO [main] o.a.n.w.c.ApplicationStartupContextListener Starting Flow Controller...\r\n    2023-05-10 14:57:23,209 INFO [main] o.a.n.c.s.VersionedFlowSynchronizer Synchronizing FlowController with proposed flow: Controller Already Synchronized = false\r\n    2023-05-10 14:57:23,444 INFO [main] o.a.n.c.s.VersionedFlowSynchronizer In order to inherit proposed dataflow, will stop any components that will be affected by the update\r\n    2023-05-10 14:57:23,445 INFO [main] o.a.n.c.s.AffectedComponentSet Stopping the following components: AffectedComponentSet[inputPorts=[], outputPorts=[], remoteInputPorts=[], remoteOutputPorts=[], processors=[], parameterProviders=[], flowRegistryCliens=[], controllerServices=[], reportingTasks=[]]\r\n    2023-05-10 14:57:23,449 INFO [main] o.a.n.c.s.AffectedComponentSet Successfully stopped all components in 3 milliseconds\r\n    2023-05-10 14:57:23,456 INFO [main] o.a.n.wali.SequentialAccessWriteAheadLog Recovering records from Write-Ahead Log at ./flowfile_repository\r\n    2023-05-10 14:57:23,470 INFO [main] org.apache.nifi.wali.HashMapSnapshot org.apache.nifi.wali.HashMapSnapshot@5c2463d8 restored 0 Records and 0 Swap Files from Snapshot, ending with Transaction ID -1\r\n    2023-05-10 14:57:23,472 INFO [main] o.a.n.wali.SequentialAccessWriteAheadLog Successfully recovered 0 records and 0 swap files from Snapshot at ./flowfile_repository/checkpoint with Max Transaction ID of -1 in 14 milliseconds. Now recovering records from 1 journal files\r\n    2023-05-10 14:57:23,477 INFO [main] o.a.nifi.wali.LengthDelimitedJournal Recovering records from journal ./flowfile_repository/journals/0.journal\r\n    2023-05-10 14:57:23,482 INFO [main] o.a.nifi.wali.LengthDelimitedJournal Successfully recovered 0 updates from journal ./flowfile_repository/journals/0.journal\r\n    2023-05-10 14:57:23,483 INFO [main] o.a.n.wali.SequentialAccessWriteAheadLog Successfully recovered 0 records in 26 milliseconds. Now checkpointing to ensure that Write-Ahead Log is in a consistent state\r\n    2023-05-10 14:57:23,503 INFO [main] o.a.n.wali.SequentialAccessWriteAheadLog Checkpointed Write-Ahead Log with 0 Records and 0 Swap Files in 19 milliseconds (Stop-the-world time = 4 milliseconds), max Transaction ID -1\r\n    2023-05-10 14:57:23,504 INFO [main] o.apache.nifi.controller.FlowController [Timer Driven] Maximum Thread Count updated [10] previous [10]\r\n    2023-05-10 14:57:23,504 INFO [main] o.apache.nifi.controller.FlowController [Event Driven] Maximum Thread Count updated [1] previous [1]\r\n    2023-05-10 14:57:23,555 INFO [main] o.a.n.f.s.StandardVersionedComponentSynchronizer No differences between current flow and proposed flow for StandardProcessGroup[identifier=06e6af5d-0188-1000-2060-fb348a94c582,name=NiFi Flow]\r\n    2023-05-10 14:57:23,594 INFO [main] o.a.n.c.s.AffectedComponentSet Starting the following components: AffectedComponentSet[inputPorts=[], outputPorts=[], remoteInputPorts=[], remoteOutputPorts=[], processors=[], parameterProviders=[], flowRegistryCliens=[], controllerServices=[], reportingTasks=[]]\r\n    2023-05-10 14:57:23,596 INFO [main] o.a.n.c.s.VersionedFlowSynchronizer Successfully synchronized dataflow with the proposed flow in 387 millis\r\n    2023-05-10 14:57:23,596 INFO [main] o.apache.nifi.controller.FlowController Successfully synchronized controller with proposed flow. Flow contains the following number of components: {Processors=0, Controller Services=0, Reporting Tasks=0, Process Groups=0, Remote Process Groups=0, Parameter Providers=0, Flow Registry Clients=0, Local Input Ports=0, Local Output Ports=0, Public Input Ports=0, Public Output Ports=0}\r\n    2023-05-10 14:57:23,712 INFO [main] o.a.n.c.r.WriteAheadFlowFileRepository Successfully restored 0 FlowFiles and 0 Swap Files\r\n    2023-05-10 14:57:23,808 INFO [main] o.apache.nifi.controller.FlowController Performed initial validation of all components in 1 milliseconds\r\n    2023-05-10 14:57:23,809 INFO [main] o.apache.nifi.controller.FlowController Starting 0 processors/ports/funnels\r\n    2023-05-10 14:57:23,810 INFO [main] o.apache.nifi.controller.FlowController Started 0 Remote Group Ports transmitting\r\n    2023-05-10 14:57:23,812 INFO [main] o.a.n.w.c.ApplicationStartupContextListener Flow Controller started successfully.\r\n    2023-05-10 14:57:28,530 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@72a7aa4f{nifi-api,/nifi-api,file:///Users/user/nifi-1.21.0/work/jetty/nifi-web-api-1.21.0.war/webapp/,AVAILABLE}{./work/nar/extensions/nifi-server-nar-1.21.0.nar-unpacked/NAR-INF/bundled-dependencies/nifi-web-api-1.21.0.war}\r\n    2023-05-10 14:57:29,274 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=183ms\r\n    2023-05-10 14:57:29,356 INFO [main] o.e.j.s.h.C._nifi_content_viewer No Spring WebApplicationInitializer types detected on classpath\r\n    2023-05-10 14:57:29,362 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@537ca28e{nifi-content-viewer,/nifi-content-viewer,file:///Users/user/nifi-1.21.0/work/jetty/nifi-web-content-viewer-1.21.0.war/webapp/,AVAILABLE}{./work/nar/extensions/nifi-server-nar-1.21.0.nar-unpacked/NAR-INF/bundled-dependencies/nifi-web-content-viewer-1.21.0.war}\r\n    2023-05-10 14:57:29,421 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=13ms\r\n    2023-05-10 14:57:29,500 INFO [main] o.e.j.s.h.ContextHandler._nifi_docs No Spring WebApplicationInitializer types detected on classpath\r\n    2023-05-10 14:57:29,505 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@5b322873{nifi-docs,/nifi-docs,file:///Users/user/nifi-1.21.0/work/jetty/nifi-web-docs-1.21.0.war/webapp/,AVAILABLE}{./work/nar/extensions/nifi-server-nar-1.21.0.nar-unpacked/NAR-INF/bundled-dependencies/nifi-web-docs-1.21.0.war}\r\n    2023-05-10 14:57:29,552 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=12ms\r\n    2023-05-10 14:57:29,626 INFO [main] o.e.j.server.handler.ContextHandler._ No Spring WebApplicationInitializer types detected on classpath\r\n    2023-05-10 14:57:29,631 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@35e2b89f{nifi-error,/,file:///Users/user/nifi-1.21.0/work/jetty/nifi-web-error-1.21.0.war/webapp/,AVAILABLE}{./work/nar/extensions/nifi-server-nar-1.21.0.nar-unpacked/NAR-INF/bundled-dependencies/nifi-web-error-1.21.0.war}\r\n    2023-05-10 14:57:29,647 WARN [main] org.apache.nifi.web.server.JettyServer Failed to start web server... shutting down.\r\n    java.io.IOException: Failed to bind to /127.0.0.1:8443\r\n    \tat org.eclipse.jetty.server.ServerConnector.openAcceptChannel(ServerConnector.java:349)\r\n    \tat org.eclipse.jetty.server.ServerConnector.open(ServerConnector.java:310)\r\n    \tat org.eclipse.jetty.server.AbstractNetworkConnector.doStart(AbstractNetworkConnector.java:80)\r\n    \tat org.eclipse.jetty.server.ServerConnector.doStart(ServerConnector.java:234)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73)\r\n    \tat org.eclipse.jetty.server.Server.doStart(Server.java:401)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73)\r\n    \tat org.apache.nifi.web.server.JettyServer.start(JettyServer.java:816)\r\n    \tat org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:172)\r\n    \tat org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:83)\r\n    \tat org.apache.nifi.NiFi.main(NiFi.java:332)\r\n    Caused by: java.net.BindException: Address already in use\r\n    \tat java.base/sun.nio.ch.Net.bind0(Native Method)\r\n    \tat java.base/sun.nio.ch.Net.bind(Net.java:555)\r\n    \tat java.base/sun.nio.ch.ServerSocketChannelImpl.netBind(ServerSocketChannelImpl.java:337)\r\n    \tat java.base/sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:294)\r\n    \tat java.base/sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:89)\r\n    \tat org.eclipse.jetty.server.ServerConnector.openAcceptChannel(ServerConnector.java:344)\r\n    \t... 10 common frames omitted\r\n    2023-05-10 14:57:29,652 INFO [Thread-0] org.apache.nifi.NiFi Application Server shutdown started\r\n\r\nIt appears to be the same error as before I killed the process. Any help is appreciated.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GCgIA.png\r\n  [2]: https://file:///Users/user/nifi-1.21.0/README\r\n  [3]: https://i.stack.imgur.com/sQYwv.png\r\n","title":"Kill command not working on java.net.BindException: Address already in use error","body":"<p>None of the other similar posts to this issue fix my problem.</p>\n<p>The generated username and password for Apache Nifi doesn't work.</p>\n<p><a href=\"https://i.stack.imgur.com/GCgIA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GCgIA.png\" alt=\"enter image description here\" /></a></p>\n<p>I'm following <a href=\"https://file:///Users/user/nifi-1.21.0/README\" rel=\"nofollow noreferrer\">these</a> instructions.</p>\n<p><a href=\"https://i.stack.imgur.com/sQYwv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sQYwv.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried running the <code>tail -f nifi-app.log</code> command to troubleshoot the issue.</p>\n<p>And got the following results...</p>\n<pre><code>Caused by: java.net.BindException: Address already in use\n    at java.base/sun.nio.ch.Net.bind0(Native Method)\n    at java.base/sun.nio.ch.Net.bind(Net.java:555)\n    at java.base/sun.nio.ch.ServerSocketChannelImpl.netBind(ServerSocketChannelImpl.java:337)\n    at java.base/sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:294)\n    at java.base/sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:89)\n    at org.eclipse.jetty.server.ServerConnector.openAcceptChannel(ServerConnector.java:344)\n    ... 10 common frames omitted\n2023-05-10 14:22:54,303 INFO [Thread-0] org.apache.nifi.NiFi Application Server shutdown started\n</code></pre>\n<p>I tried checking the port with the following command <code>sudo lsof -i :8443</code></p>\n<p>and got the following response,,,</p>\n<pre><code>COMMAND   PID USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME\njava    71776 user 3146u  IPv4 0x9a0863600c7cb941      0t0  TCP localhost:pcsync-https (LISTEN)\n</code></pre>\n<p>So, I killed the process using <code>kill 71776</code></p>\n<p>I started Nifi again using <code>bin/nifi.sh start</code></p>\n<p>and again ran the command <code>tail -f nifi-app.log</code></p>\n<p>which resulted in the following...</p>\n<pre><code>2023-05-10 14:57:09,939 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@ff0e6d4{/nifi-jolt-transform-json-ui-1.21.0,/nifi-jolt-transform-json-ui-1.21.0,file:///Users/user/nifi-1.21.0/work/jetty/nifi-jolt-transform-json-ui-1.21.0.war/webapp/,AVAILABLE}{./work/nar/extensions/nifi-standard-nar-1.21.0.nar-unpacked/NAR-INF/bundled-dependencies/nifi-jolt-transform-json-ui-1.21.0.war}\n2023-05-10 14:57:10,512 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=143ms\n2023-05-10 14:57:10,530 INFO [main] o.e.j.s.handler.ContextHandler._nifi No Spring WebApplicationInitializer types detected on classpath\n2023-05-10 14:57:10,604 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@70d3cdbf{nifi,/nifi,file:///Users/user/nifi-1.21.0/work/jetty/nifi-web-ui-1.21.0.war/webapp/,AVAILABLE}{./work/nar/extensions/nifi-server-nar-1.21.0.nar-unpacked/NAR-INF/bundled-dependencies/nifi-web-ui-1.21.0.war}\n2023-05-10 14:57:11,128 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=273ms\n2023-05-10 14:57:11,131 INFO [main] o.e.j.s.handler.ContextHandler._nifi_api No Spring WebApplicationInitializer types detected on classpath\n2023-05-10 14:57:11,248 INFO [main] o.e.j.s.handler.ContextHandler._nifi_api Initializing Spring root WebApplicationContext\n2023-05-10 14:57:14,041 INFO [main] o.a.nifi.properties.NiFiPropertiesLoader Loading Application Properties [/Users/user/nifi-1.21.0/./conf/nifi.properties]\n2023-05-10 14:57:17,367 INFO [main] o.a.n.r.v.FileBasedVariableRegistry Loaded 91 properties from system properties and environment variables\n2023-05-10 14:57:17,367 INFO [main] o.a.n.r.v.FileBasedVariableRegistry Loaded a total of 91 properties.  Including precedence overrides effective accessible registry key size is 91\n2023-05-10 14:57:18,441 INFO [main] o.a.n.c.r.WriteAheadFlowFileRepository Initialized FlowFile Repository\n2023-05-10 14:57:18,450 INFO [main] o.apache.nifi.controller.FlowController Creating Provenance Repository [org.apache.nifi.provenance.WriteAheadProvenanceRepository]\n2023-05-10 14:57:18,509 INFO [main] o.a.n.p.store.WriteAheadStorePartition After recovering ./provenance_repository, next Event ID to be generated will be 0\n2023-05-10 14:57:18,514 INFO [main] o.a.n.p.index.lucene.LuceneEventIndex Will avoid re-indexing Provenance Events because the newest index is defunct, so it will be re-indexed in the background\n2023-05-10 14:57:18,515 INFO [main] o.apache.nifi.controller.FlowController Creating Content Repository [org.apache.nifi.controller.repository.FileSystemRepository]\n2023-05-10 14:57:18,523 INFO [main] o.a.n.c.repository.FileSystemRepository Maximum Threshold for Container default set to 129851995586 bytes; if volume exceeds this size, archived data will be deleted until it no longer exceeds this size\n2023-05-10 14:57:18,523 INFO [main] o.a.n.c.repository.FileSystemRepository Initializing FileSystemRepository with 'Always Sync' set to false\n2023-05-10 14:57:18,927 INFO [main] org.wali.MinimalLockingWriteAheadLog org.wali.MinimalLockingWriteAheadLog@149fab7f finished recovering records. Performing Checkpoint to ensure proper state of Partitions before updates\n2023-05-10 14:57:18,927 INFO [main] org.wali.MinimalLockingWriteAheadLog Successfully recovered 2 records in 8 milliseconds\n2023-05-10 14:57:18,951 INFO [main] org.wali.MinimalLockingWriteAheadLog org.wali.MinimalLockingWriteAheadLog@149fab7f checkpointed with 2 Records and 0 Swap Files in 24 milliseconds (Stop-the-world time = 7 milliseconds, Clear Edit Logs time = 10 millis), max Transaction ID 1\n2023-05-10 14:57:19,032 INFO [main] o.apache.nifi.controller.FlowController Not enabling RAW Socket Site-to-Site functionality because nifi.remote.input.socket.port is not set\n2023-05-10 14:57:22,380 INFO [main] o.s.s.web.DefaultSecurityFilterChain Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6b89cbc0, org.apache.nifi.web.security.csrf.SkipReplicatedCsrfFilter@7a9c91e7, org.springframework.security.web.csrf.CsrfFilter@52e10d07, org.apache.nifi.web.security.x509.X509AuthenticationFilter@2b7e07e0, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@37717b97, org.apache.nifi.web.security.log.AuthenticationUserFilter@12837172, org.springframework.security.web.access.ExceptionTranslationFilter@40b4a59c, org.springframework.security.web.access.intercept.AuthorizationFilter@26d38b98]\n2023-05-10 14:57:23,190 INFO [main] o.a.n.w.c.ApplicationStartupContextListener Starting Flow Controller...\n2023-05-10 14:57:23,209 INFO [main] o.a.n.c.s.VersionedFlowSynchronizer Synchronizing FlowController with proposed flow: Controller Already Synchronized = false\n2023-05-10 14:57:23,444 INFO [main] o.a.n.c.s.VersionedFlowSynchronizer In order to inherit proposed dataflow, will stop any components that will be affected by the update\n2023-05-10 14:57:23,445 INFO [main] o.a.n.c.s.AffectedComponentSet Stopping the following components: AffectedComponentSet[inputPorts=[], outputPorts=[], remoteInputPorts=[], remoteOutputPorts=[], processors=[], parameterProviders=[], flowRegistryCliens=[], controllerServices=[], reportingTasks=[]]\n2023-05-10 14:57:23,449 INFO [main] o.a.n.c.s.AffectedComponentSet Successfully stopped all components in 3 milliseconds\n2023-05-10 14:57:23,456 INFO [main] o.a.n.wali.SequentialAccessWriteAheadLog Recovering records from Write-Ahead Log at ./flowfile_repository\n2023-05-10 14:57:23,470 INFO [main] org.apache.nifi.wali.HashMapSnapshot org.apache.nifi.wali.HashMapSnapshot@5c2463d8 restored 0 Records and 0 Swap Files from Snapshot, ending with Transaction ID -1\n2023-05-10 14:57:23,472 INFO [main] o.a.n.wali.SequentialAccessWriteAheadLog Successfully recovered 0 records and 0 swap files from Snapshot at ./flowfile_repository/checkpoint with Max Transaction ID of -1 in 14 milliseconds. Now recovering records from 1 journal files\n2023-05-10 14:57:23,477 INFO [main] o.a.nifi.wali.LengthDelimitedJournal Recovering records from journal ./flowfile_repository/journals/0.journal\n2023-05-10 14:57:23,482 INFO [main] o.a.nifi.wali.LengthDelimitedJournal Successfully recovered 0 updates from journal ./flowfile_repository/journals/0.journal\n2023-05-10 14:57:23,483 INFO [main] o.a.n.wali.SequentialAccessWriteAheadLog Successfully recovered 0 records in 26 milliseconds. Now checkpointing to ensure that Write-Ahead Log is in a consistent state\n2023-05-10 14:57:23,503 INFO [main] o.a.n.wali.SequentialAccessWriteAheadLog Checkpointed Write-Ahead Log with 0 Records and 0 Swap Files in 19 milliseconds (Stop-the-world time = 4 milliseconds), max Transaction ID -1\n2023-05-10 14:57:23,504 INFO [main] o.apache.nifi.controller.FlowController [Timer Driven] Maximum Thread Count updated [10] previous [10]\n2023-05-10 14:57:23,504 INFO [main] o.apache.nifi.controller.FlowController [Event Driven] Maximum Thread Count updated [1] previous [1]\n2023-05-10 14:57:23,555 INFO [main] o.a.n.f.s.StandardVersionedComponentSynchronizer No differences between current flow and proposed flow for StandardProcessGroup[identifier=06e6af5d-0188-1000-2060-fb348a94c582,name=NiFi Flow]\n2023-05-10 14:57:23,594 INFO [main] o.a.n.c.s.AffectedComponentSet Starting the following components: AffectedComponentSet[inputPorts=[], outputPorts=[], remoteInputPorts=[], remoteOutputPorts=[], processors=[], parameterProviders=[], flowRegistryCliens=[], controllerServices=[], reportingTasks=[]]\n2023-05-10 14:57:23,596 INFO [main] o.a.n.c.s.VersionedFlowSynchronizer Successfully synchronized dataflow with the proposed flow in 387 millis\n2023-05-10 14:57:23,596 INFO [main] o.apache.nifi.controller.FlowController Successfully synchronized controller with proposed flow. Flow contains the following number of components: {Processors=0, Controller Services=0, Reporting Tasks=0, Process Groups=0, Remote Process Groups=0, Parameter Providers=0, Flow Registry Clients=0, Local Input Ports=0, Local Output Ports=0, Public Input Ports=0, Public Output Ports=0}\n2023-05-10 14:57:23,712 INFO [main] o.a.n.c.r.WriteAheadFlowFileRepository Successfully restored 0 FlowFiles and 0 Swap Files\n2023-05-10 14:57:23,808 INFO [main] o.apache.nifi.controller.FlowController Performed initial validation of all components in 1 milliseconds\n2023-05-10 14:57:23,809 INFO [main] o.apache.nifi.controller.FlowController Starting 0 processors/ports/funnels\n2023-05-10 14:57:23,810 INFO [main] o.apache.nifi.controller.FlowController Started 0 Remote Group Ports transmitting\n2023-05-10 14:57:23,812 INFO [main] o.a.n.w.c.ApplicationStartupContextListener Flow Controller started successfully.\n2023-05-10 14:57:28,530 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@72a7aa4f{nifi-api,/nifi-api,file:///Users/user/nifi-1.21.0/work/jetty/nifi-web-api-1.21.0.war/webapp/,AVAILABLE}{./work/nar/extensions/nifi-server-nar-1.21.0.nar-unpacked/NAR-INF/bundled-dependencies/nifi-web-api-1.21.0.war}\n2023-05-10 14:57:29,274 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=183ms\n2023-05-10 14:57:29,356 INFO [main] o.e.j.s.h.C._nifi_content_viewer No Spring WebApplicationInitializer types detected on classpath\n2023-05-10 14:57:29,362 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@537ca28e{nifi-content-viewer,/nifi-content-viewer,file:///Users/user/nifi-1.21.0/work/jetty/nifi-web-content-viewer-1.21.0.war/webapp/,AVAILABLE}{./work/nar/extensions/nifi-server-nar-1.21.0.nar-unpacked/NAR-INF/bundled-dependencies/nifi-web-content-viewer-1.21.0.war}\n2023-05-10 14:57:29,421 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=13ms\n2023-05-10 14:57:29,500 INFO [main] o.e.j.s.h.ContextHandler._nifi_docs No Spring WebApplicationInitializer types detected on classpath\n2023-05-10 14:57:29,505 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@5b322873{nifi-docs,/nifi-docs,file:///Users/user/nifi-1.21.0/work/jetty/nifi-web-docs-1.21.0.war/webapp/,AVAILABLE}{./work/nar/extensions/nifi-server-nar-1.21.0.nar-unpacked/NAR-INF/bundled-dependencies/nifi-web-docs-1.21.0.war}\n2023-05-10 14:57:29,552 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=12ms\n2023-05-10 14:57:29,626 INFO [main] o.e.j.server.handler.ContextHandler._ No Spring WebApplicationInitializer types detected on classpath\n2023-05-10 14:57:29,631 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@35e2b89f{nifi-error,/,file:///Users/user/nifi-1.21.0/work/jetty/nifi-web-error-1.21.0.war/webapp/,AVAILABLE}{./work/nar/extensions/nifi-server-nar-1.21.0.nar-unpacked/NAR-INF/bundled-dependencies/nifi-web-error-1.21.0.war}\n2023-05-10 14:57:29,647 WARN [main] org.apache.nifi.web.server.JettyServer Failed to start web server... shutting down.\njava.io.IOException: Failed to bind to /127.0.0.1:8443\n    at org.eclipse.jetty.server.ServerConnector.openAcceptChannel(ServerConnector.java:349)\n    at org.eclipse.jetty.server.ServerConnector.open(ServerConnector.java:310)\n    at org.eclipse.jetty.server.AbstractNetworkConnector.doStart(AbstractNetworkConnector.java:80)\n    at org.eclipse.jetty.server.ServerConnector.doStart(ServerConnector.java:234)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73)\n    at org.eclipse.jetty.server.Server.doStart(Server.java:401)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73)\n    at org.apache.nifi.web.server.JettyServer.start(JettyServer.java:816)\n    at org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:172)\n    at org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:83)\n    at org.apache.nifi.NiFi.main(NiFi.java:332)\nCaused by: java.net.BindException: Address already in use\n    at java.base/sun.nio.ch.Net.bind0(Native Method)\n    at java.base/sun.nio.ch.Net.bind(Net.java:555)\n    at java.base/sun.nio.ch.ServerSocketChannelImpl.netBind(ServerSocketChannelImpl.java:337)\n    at java.base/sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:294)\n    at java.base/sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:89)\n    at org.eclipse.jetty.server.ServerConnector.openAcceptChannel(ServerConnector.java:344)\n    ... 10 common frames omitted\n2023-05-10 14:57:29,652 INFO [Thread-0] org.apache.nifi.NiFi Application Server shutdown started\n</code></pre>\n<p>It appears to be the same error as before I killed the process. Any help is appreciated.</p>\n"},{"tags":["java","spring","spring-boot","rest","spring-mvc"],"answers":[{"comments":[{"owner":{"account_id":22415215,"reputation":49,"user_id":16623376,"display_name":"ripunjoym1998"},"score":0,"creation_date":1683626693,"post_id":76207677,"comment_id":134391930,"body_markdown":"but if the params i.e ReportDto has 100s of fields, wont the URL look ugly? or is it completely ok?","body":"but if the params i.e ReportDto has 100s of fields, wont the URL look ugly? or is it completely ok?"},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1683632728,"post_id":76207677,"comment_id":134393377,"body_markdown":"@fengyadong it&#39;s not true. multipart/form-data is exactly the media type for the use case in question. As the name says it can take multiple parts with different contents like file and/or JSON.","body":"@fengyadong it&#39;s not true. multipart/form-data is exactly the media type for the use case in question. As the name says it can take multiple parts with different contents like file and/or JSON."},{"owner":{"account_id":28555159,"reputation":9,"user_id":21859476,"display_name":"fengyadong"},"score":1,"creation_date":1683768249,"post_id":76207677,"comment_id":134418507,"body_markdown":"@ripunjoym1998 I am sorry to give you wrong answer.And thanks for your question, I learn much from it.","body":"@ripunjoym1998 I am sorry to give you wrong answer.And thanks for your question, I learn much from it."}],"tags":[],"owner":{"account_id":28555159,"reputation":9,"user_id":21859476,"display_name":"fengyadong"},"comment_count":3,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1683768321,"creation_date":1683623824,"answer_id":76207677,"question_id":76207551,"body_markdown":"[Wrong Answer]Http request must have exact body data type, like json, xml, html.So you can&#39;t put two kind of data in http body.\r\nYou can transfer the params by url, and transfer file data by body.","title":"Spring controller that accepts both MultipartFile and also a JSON Object","body":"<p>[Wrong Answer]Http request must have exact body data type, like json, xml, html.So you can't put two kind of data in http body.\nYou can transfer the params by url, and transfer file data by body.</p>\n"},{"comments":[{"owner":{"account_id":22415215,"reputation":49,"user_id":16623376,"display_name":"ripunjoym1998"},"score":0,"creation_date":1683698620,"post_id":76209048,"comment_id":134404439,"body_markdown":"it now throws &quot;Unsupported media type: application/octet-stream&quot;","body":"it now throws &quot;Unsupported media type: application/octet-stream&quot;"},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1683718764,"post_id":76209048,"comment_id":134408888,"body_markdown":"This is because the media type is not set for reportDto. Check my updated answer.","body":"This is because the media type is not set for reportDto. Check my updated answer."}],"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683719068,"creation_date":1683633301,"answer_id":76209048,"question_id":76207551,"body_markdown":"Modify the controller method like this:\r\n\r\n    @PostMapping(path = &quot;/post&quot;, consumes = {MediaType.MULTIPART_FORM_DATA_VALUE})\r\n    public ResponseEntity&lt;String&gt; endpoint(\r\n            @RequestPart ReportDto reportDto,\r\n            @RequestPart MultipartFile myFile) {\r\n        return ResponseEntity.ok(service.process(reportDto, myFile));\r\n    }\r\n\r\nPlease note: the name attribute in the annotation RequestPart is not required if it matches the parameter name. Please also note that using the constants defined in MediaType helps avoid typo/mistakes.\r\n\r\nYou should also add the media type definition for reportDto to your CURL/Postman request:\r\n\r\n    -F &#39;reportDto={\r\n        &quot;address&quot;: &quot;string&quot;,\r\n        &quot;fullName&quot;: &quot;string&quot;};\r\n        type=application/json&#39;","title":"Spring controller that accepts both MultipartFile and also a JSON Object","body":"<p>Modify the controller method like this:</p>\n<pre><code>@PostMapping(path = &quot;/post&quot;, consumes = {MediaType.MULTIPART_FORM_DATA_VALUE})\npublic ResponseEntity&lt;String&gt; endpoint(\n        @RequestPart ReportDto reportDto,\n        @RequestPart MultipartFile myFile) {\n    return ResponseEntity.ok(service.process(reportDto, myFile));\n}\n</code></pre>\n<p>Please note: the name attribute in the annotation RequestPart is not required if it matches the parameter name. Please also note that using the constants defined in MediaType helps avoid typo/mistakes.</p>\n<p>You should also add the media type definition for reportDto to your CURL/Postman request:</p>\n<pre><code>-F 'reportDto={\n    &quot;address&quot;: &quot;string&quot;,\n    &quot;fullName&quot;: &quot;string&quot;};\n    type=application/json'\n</code></pre>\n"}],"owner":{"account_id":22415215,"reputation":49,"user_id":16623376,"display_name":"ripunjoym1998"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":912,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76209048,"answer_count":2,"score":0,"last_activity_date":1683768321,"creation_date":1683622988,"question_id":76207551,"body_markdown":"I need to make a POST endpoint in Java Springboot that accepts a MultipartFile (a raw file like xlsx, doc that we can upload from windows explorer) and also a JSON Object (metadata).\r\nThe JSON Object will be provided as a String, like:\r\n\r\n    {\r\n      &quot;address&quot;: &quot;string&quot;,\r\n      &quot;fullName&quot;: &quot;string&quot;\r\n    }\r\n\r\nI tried the following:\r\n\r\nController:\r\n  \r\n\r\n    @PostMapping(path = &quot;/post&quot;, consumes = {&quot;application/json&quot;,&quot;multipart/form-data&quot;})\r\n      public ResponseEntity&lt;String&gt; endpoint(\r\n        @RequestBody ReportDto reportDto,\r\n        @RequestPart(&quot;myFile&quot;) MultipartFile myFile\r\n      ){\r\n      return ResponseEntity.ok(service.process(reportDto,myFile));\r\n      }\r\n      \r\n\r\nReportDto used in controller:\r\n\r\n \r\n\r\n     public class ReportDto{\r\n      \r\n      String address;\r\n      String fullName;\r\n        //getters\r\n        //setters\r\n        //all arg constructor\r\n        //no arg constructor\r\n      \r\n      }\r\n\r\nWhen I try to hit the endpoint through Swagger or through POSTMAN, i get **HTTP 415 : Unsupported Media** error.\r\n\r\nMy CURL request looks like this:\r\n\r\n    curl -X &#39;POST&#39; \\\r\n      &#39;http://localhost:8080/api/v1/dashboards/post&#39; \\\r\n      -H &#39;accept: */*&#39; \\\r\n      -H &#39;Authorization: Bearer somebearertoken&#39; \\\r\n      -H &#39;Content-Type: multipart/form-data&#39; \\\r\n      -F &#39;reportDto={\r\n      &quot;address&quot;: &quot;string&quot;,\r\n      &quot;fullName&quot;: &quot;string&quot;\r\n    }&#39; \\\r\n      -F &#39;myFile=@Table_New.xlsx;type=application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&#39;\r\n\r\n\r\nPlease help me on resolving this\r\n","title":"Spring controller that accepts both MultipartFile and also a JSON Object","body":"<p>I need to make a POST endpoint in Java Springboot that accepts a MultipartFile (a raw file like xlsx, doc that we can upload from windows explorer) and also a JSON Object (metadata).\nThe JSON Object will be provided as a String, like:</p>\n<pre><code>{\n  &quot;address&quot;: &quot;string&quot;,\n  &quot;fullName&quot;: &quot;string&quot;\n}\n</code></pre>\n<p>I tried the following:</p>\n<p>Controller:</p>\n<pre><code>@PostMapping(path = &quot;/post&quot;, consumes = {&quot;application/json&quot;,&quot;multipart/form-data&quot;})\n  public ResponseEntity&lt;String&gt; endpoint(\n    @RequestBody ReportDto reportDto,\n    @RequestPart(&quot;myFile&quot;) MultipartFile myFile\n  ){\n  return ResponseEntity.ok(service.process(reportDto,myFile));\n  }\n  \n</code></pre>\n<p>ReportDto used in controller:</p>\n<pre><code> public class ReportDto{\n  \n  String address;\n  String fullName;\n    //getters\n    //setters\n    //all arg constructor\n    //no arg constructor\n  \n  }\n</code></pre>\n<p>When I try to hit the endpoint through Swagger or through POSTMAN, i get <strong>HTTP 415 : Unsupported Media</strong> error.</p>\n<p>My CURL request looks like this:</p>\n<pre><code>curl -X 'POST' \\\n  'http://localhost:8080/api/v1/dashboards/post' \\\n  -H 'accept: */*' \\\n  -H 'Authorization: Bearer somebearertoken' \\\n  -H 'Content-Type: multipart/form-data' \\\n  -F 'reportDto={\n  &quot;address&quot;: &quot;string&quot;,\n  &quot;fullName&quot;: &quot;string&quot;\n}' \\\n  -F 'myFile=@Table_New.xlsx;type=application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\n</code></pre>\n<p>Please help me on resolving this</p>\n"},{"tags":["java","hibernate"],"answers":[{"comments":[{"owner":{"account_id":12015092,"reputation":833,"user_id":11218205,"display_name":"Dr Phil"},"score":0,"creation_date":1683835616,"post_id":76223402,"comment_id":134431656,"body_markdown":"and what about using @Version ? if i take the road of adding technical IDs ?","body":"and what about using @Version ? if i take the road of adding technical IDs ?"},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1683844360,"post_id":76223402,"comment_id":134433032,"body_markdown":"I can&#39;t say what option suits you best, I just enumerated all available ones. In my universe that is impossible to use Hibernate without enforcing version stamp checks, however such approach seems not to be &quot;traditional&quot;.","body":"I can&#39;t say what option suits you best, I just enumerated all available ones. In my universe that is impossible to use Hibernate without enforcing version stamp checks, however such approach seems not to be &quot;traditional&quot;."}],"tags":[],"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683766496,"creation_date":1683765252,"answer_id":76223402,"question_id":76223253,"body_markdown":"That is how `spring-data-jpa` designed: since your entity has external identifier, `spring-data-jpa` never considers it as a new entity, and [instead of calling `em.persist()` it calls `em.save()` (`em.merge()` in recent versions)](https://github.com/spring-projects/spring-data-jpa/blob/878db1d51ed1074dfc25625d42c21bf773579496/spring-data-jpa/src/main/java/org/springframework/data/jpa/repository/support/SimpleJpaRepository.java#L632), which in turn cause Hibernate to make a decision what to do with entity: insert or update:\r\n\r\n\r\n```java\r\n@Transactional\r\n@Override\r\npublic &lt;S extends T&gt; S save(S entity) {\r\n\r\n    Assert.notNull(entity, &quot;Entity must not be null&quot;);\r\n\r\n    if (entityInformation.isNew(entity)) {\r\n        em.persist(entity);\r\n        return entity;\r\n    } else {\r\n        return em.merge(entity);\r\n    }\r\n}\r\n```\r\n\r\nThe options are following:\r\n\r\n1. take advantage of DB locks, i.e. lock something in DB upon entering critical section and perform some checks before saving entity. In PostgreSQL it is possible to use [advisory locks](https://www.postgresql.org/docs/current/explicit-locking.html#ADVISORY-LOCKS), in case of other DBs you may create a table with single row and lock it.\r\n\r\n2. define a &quot;technical&quot; `@Id` field for your entity, and use &quot;business identifier&quot; provided as `@NaturalId`, in that case unique constraint will help\r\n\r\n3. don&#39;t use `spring-data-jpa` repository for this particular case - use `EnitytManager` API instead.\r\n\r\n4. take advantage of [Composite Repositories](https://thorben-janssen.com/composite-repositories-spring-data-jpa/) and call `em.persist()`\r\n\r\n5. file a CR to `spring-data-jpa` project, asking to provide `persist` method or some other option, `boolean isNew` parameter, for exmaple\r\n\r\n6. take advantage of [@Version](https://vladmihalcea.com/jpa-entity-version-property-hibernate/) - hibernate (and `spring-data-jpa`) believes entities with `null` version are new.\r\n\r\n7. somehow try to implement `org.springframework.data.domain.Persistable` in your entity in order to tell `spring-data-jpa` that in particular scenario it should consider entity as new, for example:\r\n\r\n```java\r\n@Entity\r\npublic class MySimple extends AbstractPersistable&lt;Integer&gt; {\r\n\r\n    private Boolean forceNew;\r\n\r\n    @Transient\r\n    @Override\r\n    public boolean isNew() {\r\n        if (forceNew != null) {\r\n            return forceNew;\r\n        }\r\n        return super.isNew();\r\n    }\r\n\r\n}\r\n```","title":"hibernate guarantee failure on concurrent insertion of existing record instead of update","body":"<p>That is how <code>spring-data-jpa</code> designed: since your entity has external identifier, <code>spring-data-jpa</code> never considers it as a new entity, and <a href=\"https://github.com/spring-projects/spring-data-jpa/blob/878db1d51ed1074dfc25625d42c21bf773579496/spring-data-jpa/src/main/java/org/springframework/data/jpa/repository/support/SimpleJpaRepository.java#L632\" rel=\"nofollow noreferrer\">instead of calling <code>em.persist()</code> it calls <code>em.save()</code> (<code>em.merge()</code> in recent versions)</a>, which in turn cause Hibernate to make a decision what to do with entity: insert or update:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Transactional\n@Override\npublic &lt;S extends T&gt; S save(S entity) {\n\n    Assert.notNull(entity, &quot;Entity must not be null&quot;);\n\n    if (entityInformation.isNew(entity)) {\n        em.persist(entity);\n        return entity;\n    } else {\n        return em.merge(entity);\n    }\n}\n</code></pre>\n<p>The options are following:</p>\n<ol>\n<li><p>take advantage of DB locks, i.e. lock something in DB upon entering critical section and perform some checks before saving entity. In PostgreSQL it is possible to use <a href=\"https://www.postgresql.org/docs/current/explicit-locking.html#ADVISORY-LOCKS\" rel=\"nofollow noreferrer\">advisory locks</a>, in case of other DBs you may create a table with single row and lock it.</p>\n</li>\n<li><p>define a &quot;technical&quot; <code>@Id</code> field for your entity, and use &quot;business identifier&quot; provided as <code>@NaturalId</code>, in that case unique constraint will help</p>\n</li>\n<li><p>don't use <code>spring-data-jpa</code> repository for this particular case - use <code>EnitytManager</code> API instead.</p>\n</li>\n<li><p>take advantage of <a href=\"https://thorben-janssen.com/composite-repositories-spring-data-jpa/\" rel=\"nofollow noreferrer\">Composite Repositories</a> and call <code>em.persist()</code></p>\n</li>\n<li><p>file a CR to <code>spring-data-jpa</code> project, asking to provide <code>persist</code> method or some other option, <code>boolean isNew</code> parameter, for exmaple</p>\n</li>\n<li><p>take advantage of <a href=\"https://vladmihalcea.com/jpa-entity-version-property-hibernate/\" rel=\"nofollow noreferrer\">@Version</a> - hibernate (and <code>spring-data-jpa</code>) believes entities with <code>null</code> version are new.</p>\n</li>\n<li><p>somehow try to implement <code>org.springframework.data.domain.Persistable</code> in your entity in order to tell <code>spring-data-jpa</code> that in particular scenario it should consider entity as new, for example:</p>\n</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\npublic class MySimple extends AbstractPersistable&lt;Integer&gt; {\n\n    private Boolean forceNew;\n\n    @Transient\n    @Override\n    public boolean isNew() {\n        if (forceNew != null) {\n            return forceNew;\n        }\n        return super.isNew();\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":12015092,"reputation":833,"user_id":11218205,"display_name":"Dr Phil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76223402,"answer_count":1,"score":1,"last_activity_date":1683766496,"creation_date":1683762198,"question_id":76223253,"body_markdown":"I have this scenario.\r\nI have a web/rest service that receives a new record with a business id and inserts it using hibernate entityManager. However, there are multiple processes which can be doing such an insertion concurrently. Hibernate `save` method will insert or update( if the record exists for the same primary key).\r\n\r\nso if multiple processes are performing the equivalent of:\r\n\r\nprocess1:\r\n```java\r\n\r\n    MySimple r=new MySimple(1,&#39;tagP1&#39;)\r\n    mySinmpleRepository.save(r);\r\n```\r\n\r\nprocess2:\r\n```java\r\n\r\n    MySimple r=new MySimple(1,&#39;tagP2&#39;)\r\n    mySinmpleRepository.save(r);\r\n```\r\n\r\n\r\nWhat i need to achieve is a form of optimistic locking and to fail the update if the record already exists. \r\n\\\r\nUnfortunately what happens so far is that the record gets updated and none of the save methods fail even if I try to &quot;insert&quot; a detached entity\r\n\r\n**sample entity:**\r\n\r\n```sql\r\n\r\n    create table MySimple(\r\n     SIMPLE_ID INTEGER NOT NULL,\r\n    TAG VARCHAR(200),\r\n    primary key PK_MYSIMPLE (SIMPLE_ID)\r\n    )\r\n```\r\n\r\nentity:\r\n\r\n```java\r\n    @Entity\r\n    public class MySimple {\r\n     @Id\r\n     @Column(name=&quot;SIMPLE_ID&quot;, nullable=false, updateable=false)\r\n     private simpleId;\r\n    \r\n     @Column(name=&quot;TAG&quot;, nullable=false, updateable=true)\r\n     private tag;\r\n     // getters/setters/etc..\r\n    }\r\n\r\n    public interface MySimpleRepository extends JpaRepository&lt;MySimple, Integer&gt;{\r\n    }\r\n```\r\n\r\n\r\n\r\n","title":"hibernate guarantee failure on concurrent insertion of existing record instead of update","body":"<p>I have this scenario.\nI have a web/rest service that receives a new record with a business id and inserts it using hibernate entityManager. However, there are multiple processes which can be doing such an insertion concurrently. Hibernate <code>save</code> method will insert or update( if the record exists for the same primary key).</p>\n<p>so if multiple processes are performing the equivalent of:</p>\n<p>process1:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n    MySimple r=new MySimple(1,'tagP1')\n    mySinmpleRepository.save(r);\n</code></pre>\n<p>process2:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n    MySimple r=new MySimple(1,'tagP2')\n    mySinmpleRepository.save(r);\n</code></pre>\n<p>What i need to achieve is a form of optimistic locking and to fail the update if the record already exists.\n<br />\nUnfortunately what happens so far is that the record gets updated and none of the save methods fail even if I try to &quot;insert&quot; a detached entity</p>\n<p><strong>sample entity:</strong></p>\n<pre class=\"lang-sql prettyprint-override\"><code>\n    create table MySimple(\n     SIMPLE_ID INTEGER NOT NULL,\n    TAG VARCHAR(200),\n    primary key PK_MYSIMPLE (SIMPLE_ID)\n    )\n</code></pre>\n<p>entity:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Entity\n    public class MySimple {\n     @Id\n     @Column(name=&quot;SIMPLE_ID&quot;, nullable=false, updateable=false)\n     private simpleId;\n    \n     @Column(name=&quot;TAG&quot;, nullable=false, updateable=true)\n     private tag;\n     // getters/setters/etc..\n    }\n\n    public interface MySimpleRepository extends JpaRepository&lt;MySimple, Integer&gt;{\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","eclipse","jboss","jboss7.x"],"comments":[{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1683665712,"post_id":76212034,"comment_id":134401035,"body_markdown":"Have you made the required Java 17 configuration changes mentioned in the Notes at the bottom of https://access.redhat.com/articles/6978703 ?","body":"Have you made the required Java 17 configuration changes mentioned in the Notes at the bottom of <a href=\"https://access.redhat.com/articles/6978703\" rel=\"nofollow noreferrer\">access.redhat.com/articles/6978703</a> ?"},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1683766463,"post_id":76212034,"comment_id":134418344,"body_markdown":"No need for JBOSS anymore.  Run your Spring Boot app as an executable JAR and ditch the JEE server.","body":"No need for JBOSS anymore.  Run your Spring Boot app as an executable JAR and ditch the JEE server."}],"answers":[{"tags":[],"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683766313,"creation_date":1683766313,"answer_id":76223454,"question_id":76212034,"body_markdown":"Spring 6 requires Jakarta EE 9.1+. JBoss EAP 7.4 is a Jakarta EE 8 container. You can&#39;t deploy Spring 6 applications on JBoss EAP 7.4. You&#39;d have to use [WildFly 28][1] if you want to use Spring 6.\r\n\r\nThat said, the error you&#39;re seeing; I&#39;m not sure what is happening there. I&#39;ve never seen that before, but maybe it&#39;s a side-affect of attempting to use Spring 6 with JBoss EAP 7.4.\r\n\r\n[1]: https://wildfly.org","title":"Unable to start Jboss version 7.4.9 in Eclipse 2022-09","body":"<p>Spring 6 requires Jakarta EE 9.1+. JBoss EAP 7.4 is a Jakarta EE 8 container. You can't deploy Spring 6 applications on JBoss EAP 7.4. You'd have to use <a href=\"https://wildfly.org\" rel=\"nofollow noreferrer\">WildFly 28</a> if you want to use Spring 6.</p>\n<p>That said, the error you're seeing; I'm not sure what is happening there. I've never seen that before, but maybe it's a side-affect of attempting to use Spring 6 with JBoss EAP 7.4.</p>\n"}],"owner":{"account_id":7588671,"reputation":29,"user_id":5756954,"accept_rate":60,"display_name":"Deepu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":701,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683766313,"creation_date":1683653651,"question_id":76212034,"body_markdown":"I am working on updating our java/Spring boot application from java 1.8 to java 17 and to spring 6. As part of this I have updated the eclipse version from Neon to 2022-09 and Jboss server in Eclipse to 7.4.9. But currently I am facing an issue while starting the jboss server in my local, it is throwing error within a few seconds after the server is started.\r\n\r\nEven though it is throwing FileNotFoundException, it is not defined which file is missing. I have compared the latest jboss standalone xml file with my old working jboss standalone file and found no lead, deployments section is removed from standalone xml. Provided full access server.log/audit.log and to all the folders inside standalone folder in Jboss directory also did not help and server.log is also not having much details regarding the error. Tried searching through the internet and did not get any solution for this issue. \r\n\r\n```\r\nFailed to read or configure the org.jboss.logmanager.LogManager\r\njava.lang.IllegalArgumentException: Failed to instantiate class &quot;org.jboss.logmanager.handlers.PeriodicRotatingFileHandler&quot; for handler &quot;FILE&quot;\r\nat org.jboss.loamanager@2.1.18.Final-redhat-0000.//org.jboss.logmanager.config.AbstractPropertyConfiguration$ConstructAction.lambda$validate$2(AbstractPropertyConfiguration.java:122\r\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.config.WrappedAction.execute(WrappedAction.java:42)\r\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.config.AbstractPropertyConfiguration$ConstructAction.validate(AbstractPropertyContaguration.java:118\r\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.config.LogContextConfigurationImp1.doPrepare(LogContextConfigurationImpl.java:336)\r\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.config.LogContextConfigurationImpl.prepare(LogContextConfigurationImpl.java:289)\r\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.confiq.LoqContextConfigurationImpl.commit(LoqContextConfigurationImpl.java:298)\r\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.PropertyConfigurator.configure(PropertyContigurator.java:546)\r\nat org.jboss.logmanager@2.1.10.Final-redhat-00001//org.jboss.logmanager.PropertyConfigurator.configure(PropertyContigurator.java:97)\r\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.LogManager.readConfiguration(LogManager.java:170)\r\nat org.jboss.Logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.LogManager.readConfiguration(LogManager.java:132)\r\njava.Logging/java.util.Logging.LogManager.readPrimordialConfiguration\r\njava.logging/java.util.logging.LogManager$2.run(LogManager.java.395)\r\njava.base/java.security.AccessController.doPrivilege(AccessController.java:318)\r\njava.logging/java.util.Logging.LogManager.ensurelogManager.java.logging/java.util.logging.LogManager.getlogManager(LogManager.java:431)\r\njboss.modules.Main.main(Main.java.457)\r\nCaused by.java.lang.reflect.InvocationTargetException\r\nbase/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\nredhat-00001//org.jboss.logmanager.config.AbstractPropertyConfigurationsConstructAction.lambda$validate$2(AbstractPropertyConfiguration.java:120)\r\nCaused by.java.io.FileNotFoundException.(The handle is invalid)\r\nat java.base/java.io.FileOutputStream.open(Native.Method)\r\nat Java.Base/Java.10.FileOutputStream.open(FileOutputStream.java.293)\r\nat Java.base/Java.10.FileOutputStream.&lt;init&gt;(FileOutputStream.java.235)\r\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org-jboss.logmanager.handlers.PeriodicRotatingfileHandler.setFil.(PeriodicRotatingFileHandler.java.109)\r\norg.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.handlers.FileHandler.setFileName(FileHandler.java.189.a.org-jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.handlers.FileHandler.&lt;init&gt;(FileHandler.java:119.a.org-jboss.logmanager@2.1.18.Final-redhat-00001//or..jboss.logmanager.handlers.PeriodicRotatingFileHandlor.&lt;init.(PeriodicRotatingFileHandler.java.77)\r\n```","title":"Unable to start Jboss version 7.4.9 in Eclipse 2022-09","body":"<p>I am working on updating our java/Spring boot application from java 1.8 to java 17 and to spring 6. As part of this I have updated the eclipse version from Neon to 2022-09 and Jboss server in Eclipse to 7.4.9. But currently I am facing an issue while starting the jboss server in my local, it is throwing error within a few seconds after the server is started.</p>\n<p>Even though it is throwing FileNotFoundException, it is not defined which file is missing. I have compared the latest jboss standalone xml file with my old working jboss standalone file and found no lead, deployments section is removed from standalone xml. Provided full access server.log/audit.log and to all the folders inside standalone folder in Jboss directory also did not help and server.log is also not having much details regarding the error. Tried searching through the internet and did not get any solution for this issue.</p>\n<pre><code>Failed to read or configure the org.jboss.logmanager.LogManager\njava.lang.IllegalArgumentException: Failed to instantiate class &quot;org.jboss.logmanager.handlers.PeriodicRotatingFileHandler&quot; for handler &quot;FILE&quot;\nat org.jboss.loamanager@2.1.18.Final-redhat-0000.//org.jboss.logmanager.config.AbstractPropertyConfiguration$ConstructAction.lambda$validate$2(AbstractPropertyConfiguration.java:122\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.config.WrappedAction.execute(WrappedAction.java:42)\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.config.AbstractPropertyConfiguration$ConstructAction.validate(AbstractPropertyContaguration.java:118\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.config.LogContextConfigurationImp1.doPrepare(LogContextConfigurationImpl.java:336)\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.config.LogContextConfigurationImpl.prepare(LogContextConfigurationImpl.java:289)\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.confiq.LoqContextConfigurationImpl.commit(LoqContextConfigurationImpl.java:298)\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.PropertyConfigurator.configure(PropertyContigurator.java:546)\nat org.jboss.logmanager@2.1.10.Final-redhat-00001//org.jboss.logmanager.PropertyConfigurator.configure(PropertyContigurator.java:97)\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.LogManager.readConfiguration(LogManager.java:170)\nat org.jboss.Logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.LogManager.readConfiguration(LogManager.java:132)\njava.Logging/java.util.Logging.LogManager.readPrimordialConfiguration\njava.logging/java.util.logging.LogManager$2.run(LogManager.java.395)\njava.base/java.security.AccessController.doPrivilege(AccessController.java:318)\njava.logging/java.util.Logging.LogManager.ensurelogManager.java.logging/java.util.logging.LogManager.getlogManager(LogManager.java:431)\njboss.modules.Main.main(Main.java.457)\nCaused by.java.lang.reflect.InvocationTargetException\nbase/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\nredhat-00001//org.jboss.logmanager.config.AbstractPropertyConfigurationsConstructAction.lambda$validate$2(AbstractPropertyConfiguration.java:120)\nCaused by.java.io.FileNotFoundException.(The handle is invalid)\nat java.base/java.io.FileOutputStream.open(Native.Method)\nat Java.Base/Java.10.FileOutputStream.open(FileOutputStream.java.293)\nat Java.base/Java.10.FileOutputStream.&lt;init&gt;(FileOutputStream.java.235)\nat org.jboss.logmanager@2.1.18.Final-redhat-00001//org-jboss.logmanager.handlers.PeriodicRotatingfileHandler.setFil.(PeriodicRotatingFileHandler.java.109)\norg.jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.handlers.FileHandler.setFileName(FileHandler.java.189.a.org-jboss.logmanager@2.1.18.Final-redhat-00001//org.jboss.logmanager.handlers.FileHandler.&lt;init&gt;(FileHandler.java:119.a.org-jboss.logmanager@2.1.18.Final-redhat-00001//or..jboss.logmanager.handlers.PeriodicRotatingFileHandlor.&lt;init.(PeriodicRotatingFileHandler.java.77)\n</code></pre>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":12210830,"reputation":335,"user_id":8912667,"display_name":"Fabien MIFSUD"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1590501156,"creation_date":1590501156,"answer_id":62023740,"question_id":61822827,"body_markdown":"After many investigation, it seems that neither Spring or Spring Boot ensure the order of property source loading.\r\nI did remove my properties inheritance : 1 app, 1 app.properties file.","title":"@PropertySource values overriding","body":"<p>After many investigation, it seems that neither Spring or Spring Boot ensure the order of property source loading.\nI did remove my properties inheritance : 1 app, 1 app.properties file.</p>\n"},{"tags":[],"owner":{"account_id":9781391,"reputation":358,"user_id":7249306,"display_name":"Denis Abakumov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683766034,"creation_date":1683766034,"answer_id":76223441,"question_id":61822827,"body_markdown":"A known workaround is renaming `application.properties` to something else (e.g. `app.properties`). Overriding works normally then.\r\n\r\nBut I admit this is not a proper fix to this issue and might not work in some scenarios.\r\n\r\nSource: a comment by Maksim Muruev (mmuruev) in [@PropertySource not overriding in order [SPR-13500]](https://github.com/spring-projects/spring-framework/issues/18078#issuecomment-711850211).","title":"@PropertySource values overriding","body":"<p>A known workaround is renaming <code>application.properties</code> to something else (e.g. <code>app.properties</code>). Overriding works normally then.</p>\n<p>But I admit this is not a proper fix to this issue and might not work in some scenarios.</p>\n<p>Source: a comment by Maksim Muruev (mmuruev) in <a href=\"https://github.com/spring-projects/spring-framework/issues/18078#issuecomment-711850211\" rel=\"nofollow noreferrer\">@PropertySource not overriding in order [SPR-13500]</a>.</p>\n"}],"owner":{"account_id":12210830,"reputation":335,"user_id":8912667,"display_name":"Fabien MIFSUD"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":393,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":62023740,"answer_count":2,"score":2,"last_activity_date":1683766034,"creation_date":1589556500,"question_id":61822827,"body_markdown":"I&#39;m trying to have 2 external files for my app config, one with common properties for all my apps and one with specific things for each app.\r\n\r\nIn my Springboot App, I declare : \r\n```\r\n@PropertySource(value = {&quot;file:/etc/company/application.properties&quot;,\r\n        &quot;file:/etc/company/myApp/application.properties&quot;}, ignoreResourceNotFound = true)\r\n```\r\n\r\nIn logs, \r\n```\r\nConverting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper\r\nConverting PropertySource URL [file:/etc/company/myApp/application.properties] [org.springframework.core.io.support.ResourcePropertySource] to EncryptableMapPropertySourceWrapper\r\nConverting PropertySource URL [file:/etc/company/application.properties] [org.springframework.core.io.support.ResourcePropertySource] to EncryptableMapPropertySourceWrapper\r\n```\r\nAnd the properties from **/etc/company/application.properties** are the ones taken into account..\r\nThis is the exact inverse of what is mentioned in PropertySource javadoc.\r\n\r\nAm I missing something here ?","title":"@PropertySource values overriding","body":"<p>I'm trying to have 2 external files for my app config, one with common properties for all my apps and one with specific things for each app.</p>\n\n<p>In my Springboot App, I declare : </p>\n\n<pre><code>@PropertySource(value = {\"file:/etc/company/application.properties\",\n        \"file:/etc/company/myApp/application.properties\"}, ignoreResourceNotFound = true)\n</code></pre>\n\n<p>In logs, </p>\n\n<pre><code>Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper\nConverting PropertySource URL [file:/etc/company/myApp/application.properties] [org.springframework.core.io.support.ResourcePropertySource] to EncryptableMapPropertySourceWrapper\nConverting PropertySource URL [file:/etc/company/application.properties] [org.springframework.core.io.support.ResourcePropertySource] to EncryptableMapPropertySourceWrapper\n</code></pre>\n\n<p>And the properties from <strong>/etc/company/application.properties</strong> are the ones taken into account..\nThis is the exact inverse of what is mentioned in PropertySource javadoc.</p>\n\n<p>Am I missing something here ?</p>\n"},{"tags":["java","spring","runtime","datasource","multi-tenant"],"answers":[{"comments":[{"owner":{"account_id":2108838,"reputation":71,"user_id":1874509,"display_name":"PhongHv"},"score":0,"creation_date":1507198910,"post_id":46550054,"comment_id":80119351,"body_markdown":"Your demo needs pre-defined number of datasources. And i want to know how to add/remove datasource without restarting application server , \nanyone can help me ? Thanks","body":"Your demo needs pre-defined number of datasources. And i want to know how to add/remove datasource without restarting application server ,  anyone can help me ? Thanks"},{"owner":{"account_id":9679200,"reputation":385,"user_id":7181522,"display_name":"belnxkkk"},"score":0,"creation_date":1507451081,"post_id":46550054,"comment_id":80207794,"body_markdown":"Pre-defined datasources are just for demo, it doesn&#39;t restrict you to adding new datasources at runtime. Just put a new entry at runtime into datasources map and you are ready to go.","body":"Pre-defined datasources are just for demo, it doesn&#39;t restrict you to adding new datasources at runtime. Just put a new entry at runtime into datasources map and you are ready to go."},{"owner":{"account_id":9679200,"reputation":385,"user_id":7181522,"display_name":"belnxkkk"},"score":0,"creation_date":1507451985,"post_id":46550054,"comment_id":80208034,"body_markdown":"@PhongHv we even don&#39;t need to put datasources information in external properties files, also possible to put all tenants information in main database and get tenants info from there. HTH","body":"@PhongHv we even don&#39;t need to put datasources information in external properties files, also possible to put all tenants information in main database and get tenants info from there. HTH"},{"owner":{"account_id":1149404,"reputation":383,"user_id":1189932,"accept_rate":14,"display_name":"SRH LABS"},"score":0,"creation_date":1524004732,"post_id":46550054,"comment_id":86793097,"body_markdown":"We are using sprint boot but do not use JPA features. We query the database by injecting the datasource object into our service and running SQL queries directly using it. Does your solution work in our scenario to make this  injected datasource multi tenant? Can we also preserve the transaction management that sprint boot offers?","body":"We are using sprint boot but do not use JPA features. We query the database by injecting the datasource object into our service and running SQL queries directly using it. Does your solution work in our scenario to make this  injected datasource multi tenant? Can we also preserve the transaction management that sprint boot offers?"},{"owner":{"account_id":9679200,"reputation":385,"user_id":7181522,"display_name":"belnxkkk"},"score":0,"creation_date":1551942167,"post_id":46550054,"comment_id":96827001,"body_markdown":"@SRH LABS First of all sorry for late answer, yes this solution works with simply datasource injection and it preserves transaction management.","body":"@SRH LABS First of all sorry for late answer, yes this solution works with simply datasource injection and it preserves transaction management."},{"owner":{"account_id":7768515,"reputation":1636,"user_id":7972621,"display_name":"Ankit Sharma"},"score":0,"creation_date":1585897306,"post_id":46550054,"comment_id":107930527,"body_markdown":"@belnxkkk I was trying the project. When we store call save method from &quot;orderController&quot; how can we redirect the operation to a particular tenant?","body":"@belnxkkk I was trying the project. When we store call save method from &quot;orderController&quot; how can we redirect the operation to a particular tenant?"}],"tags":[],"owner":{"account_id":9679200,"reputation":385,"user_id":7181522,"display_name":"belnxkkk"},"comment_count":6,"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1507051062,"creation_date":1507051062,"answer_id":46550054,"question_id":46515298,"body_markdown":"I finally managed to get things working straight. For someone having same issue, just check [this](https://github.com/bcssp10/multi-tenant) multi-tenant demo project.\r\n","title":"spring add datasource at runtime","body":"<p>I finally managed to get things working straight. For someone having same issue, just check <a href=\"https://github.com/bcssp10/multi-tenant\" rel=\"noreferrer\">this</a> multi-tenant demo project.</p>\n"}],"owner":{"account_id":9679200,"reputation":385,"user_id":7181522,"display_name":"belnxkkk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11808,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":46550054,"answer_count":1,"score":13,"last_activity_date":1683765705,"creation_date":1506881071,"question_id":46515298,"body_markdown":"I am working on a spring boot multi-tenant application with database per tenant strategy. Requirement is that to add new databases at runtime which means I have to create new datasource objects dynamically.\r\n\r\nI also looked upon Spring&#39;s AbstractRoutingDataSource but in needs pre-defined datasources. So I just want to know how to add/remove datasource without restarting application server.\r\n\r\nThanks in advance.","title":"spring add datasource at runtime","body":"<p>I am working on a spring boot multi-tenant application with database per tenant strategy. Requirement is that to add new databases at runtime which means I have to create new datasource objects dynamically.</p>\n\n<p>I also looked upon Spring's AbstractRoutingDataSource but in needs pre-defined datasources. So I just want to know how to add/remove datasource without restarting application server.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","windows","launch"],"comments":[{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1683762422,"post_id":76223252,"comment_id":134418017,"body_markdown":"Uh, in the JDK there is one debugger that might be of interest: [`jhsdb`](https://docs.oracle.com/en/java/javase/17/docs/specs/man/jhsdb.html). Is that what you mean? Debugging and such is usually linked to development, so the JDK is probably what you need.","body":"Uh, in the JDK there is one debugger that might be of interest: <a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/man/jhsdb.html\" rel=\"nofollow noreferrer\"><code>jhsdb</code></a>. Is that what you mean? Debugging and such is usually linked to development, so the JDK is probably what you need."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683765286,"creation_date":1683762570,"answer_id":76223267,"question_id":76223252,"body_markdown":"&gt; The Java JDK and JRE has been installed\r\n\r\nYou need only one or the other.\r\n\r\n - To develop Java apps, install a [JDK][1].\r\n - To run an existing Java app, install a [JRE][2].\r\n\r\n&gt; no Java JRE icon appears on the desktop\r\n\r\n**Java has no built-in [GUI][3]** to display on a desktop [OS][4] such as Windows, macOS, or Linux. So no apps icons will appear.\r\n\r\nIn the `bin` directory of a JDK/JRE, you will find [several console apps][5]. For example, the `java` console app is used to run Java apps. Invoke these console apps on a command-line in a terminal app such as [*Windows Terminal*](https://en.wikipedia.org/wiki/Windows_Terminal) on the Windows OS. \r\n\r\nFor example, to see the current version of the default Java installation, on a command-line execute:\r\n\r\n```bash\r\njava --version\r\n```\r\n\r\nFor more info, study a tutorial such as: [Run a Java Application from the Command Line][6] by Baeldung.\r\n\r\nAs [commented by Bodewes][7], if you want to launch a postmortem debugger to analyze the content of a core dump from a crashed Java Virtual Machine (JVM), use the [`jhsdb`][8] console app. \r\n\r\nAnother debugging tool is `jdb`. That command demonstrates the [Java Platform Debugger Architecture][9] and provides inspection and debugging of a local or remote JVM.\r\n\r\nWhile developing Java software, most folks rely on the debugging facility of their favorite [IDE][10] such as [IntelliJ][11], [NetBeans][12], or [Eclipse][13].\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_Development_Kit\r\n  [2]: https://en.wikipedia.org/wiki/Java_Runtime_Environment\r\n  [3]: https://en.wikipedia.org/wiki/Graphical_user_interface\r\n  [4]: https://en.wikipedia.org/wiki/Operating_system\r\n  [5]: https://docs.oracle.com/en/java/javase/20/docs/specs/man/index.html\r\n  [6]: https://www.baeldung.com/java-run-jar-with-arguments\r\n  [7]: https://stackoverflow.com/questions/76223252/how-to-launch-windows-10-java-jre/76223267#comment134418017_76223252\r\n  [8]: https://docs.oracle.com/en/java/javase/20/docs/specs/man/jhsdb.html\r\n  [9]: https://en.wikipedia.org/wiki/Java_Platform_Debugger_Architecture\r\n  [10]: https://en.wikipedia.org/wiki/Integrated_development_environment\r\n  [11]: https://www.jetbrains.com/help/idea/debugging-code.html#general-procedure\r\n  [12]: https://netbeans.apache.org/kb/docs/java/debug-visual.html\r\n  [13]: https://www.baeldung.com/eclipse-debugging","title":"How to launch Windows 10 Java JRE","body":"<blockquote>\n<p>The Java JDK and JRE has been installed</p>\n</blockquote>\n<p>You need only one or the other.</p>\n<ul>\n<li>To develop Java apps, install a <a href=\"https://en.wikipedia.org/wiki/Java_Development_Kit\" rel=\"nofollow noreferrer\">JDK</a>.</li>\n<li>To run an existing Java app, install a <a href=\"https://en.wikipedia.org/wiki/Java_Runtime_Environment\" rel=\"nofollow noreferrer\">JRE</a>.</li>\n</ul>\n<blockquote>\n<p>no Java JRE icon appears on the desktop</p>\n</blockquote>\n<p><strong>Java has no built-in <a href=\"https://en.wikipedia.org/wiki/Graphical_user_interface\" rel=\"nofollow noreferrer\">GUI</a></strong> to display on a desktop <a href=\"https://en.wikipedia.org/wiki/Operating_system\" rel=\"nofollow noreferrer\">OS</a> such as Windows, macOS, or Linux. So no apps icons will appear.</p>\n<p>In the <code>bin</code> directory of a JDK/JRE, you will find <a href=\"https://docs.oracle.com/en/java/javase/20/docs/specs/man/index.html\" rel=\"nofollow noreferrer\">several console apps</a>. For example, the <code>java</code> console app is used to run Java apps. Invoke these console apps on a command-line in a terminal app such as <a href=\"https://en.wikipedia.org/wiki/Windows_Terminal\" rel=\"nofollow noreferrer\"><em>Windows Terminal</em></a> on the Windows OS.</p>\n<p>For example, to see the current version of the default Java installation, on a command-line execute:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>java --version\n</code></pre>\n<p>For more info, study a tutorial such as: <a href=\"https://www.baeldung.com/java-run-jar-with-arguments\" rel=\"nofollow noreferrer\">Run a Java Application from the Command Line</a> by Baeldung.</p>\n<p>As <a href=\"https://stackoverflow.com/questions/76223252/how-to-launch-windows-10-java-jre/76223267#comment134418017_76223252\">commented by Bodewes</a>, if you want to launch a postmortem debugger to analyze the content of a core dump from a crashed Java Virtual Machine (JVM), use the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/specs/man/jhsdb.html\" rel=\"nofollow noreferrer\"><code>jhsdb</code></a> console app.</p>\n<p>Another debugging tool is <code>jdb</code>. That command demonstrates the <a href=\"https://en.wikipedia.org/wiki/Java_Platform_Debugger_Architecture\" rel=\"nofollow noreferrer\">Java Platform Debugger Architecture</a> and provides inspection and debugging of a local or remote JVM.</p>\n<p>While developing Java software, most folks rely on the debugging facility of their favorite <a href=\"https://en.wikipedia.org/wiki/Integrated_development_environment\" rel=\"nofollow noreferrer\">IDE</a> such as <a href=\"https://www.jetbrains.com/help/idea/debugging-code.html#general-procedure\" rel=\"nofollow noreferrer\">IntelliJ</a>, <a href=\"https://netbeans.apache.org/kb/docs/java/debug-visual.html\" rel=\"nofollow noreferrer\">NetBeans</a>, or <a href=\"https://www.baeldung.com/eclipse-debugging\" rel=\"nofollow noreferrer\">Eclipse</a>.</p>\n"}],"owner":{"account_id":28573785,"reputation":1,"user_id":21875673,"display_name":"Mike Rowkosm"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683765286,"creation_date":1683762158,"question_id":76223252,"body_markdown":"The Java JDK and JRE has been installed and the environment variables set but no Java JRE icon appears on the desktop. How do you start it?\r\n\r\ntried running it from the MSDOS command line but &quot;&gt;Java&quot; gets you the jar file interpreter.\r\nI need the java runtime interactive source debugger. ","title":"How to launch Windows 10 Java JRE","body":"<p>The Java JDK and JRE has been installed and the environment variables set but no Java JRE icon appears on the desktop. How do you start it?</p>\n<p>tried running it from the MSDOS command line but &quot;&gt;Java&quot; gets you the jar file interpreter.\nI need the java runtime interactive source debugger.</p>\n"},{"tags":["java","spring-boot","spring-batch"],"answers":[{"comments":[{"owner":{"account_id":3146957,"reputation":462,"user_id":2661251,"accept_rate":25,"display_name":"gcpdev-guy"},"score":0,"creation_date":1683256025,"post_id":76160250,"comment_id":134342370,"body_markdown":"Thanks for replying @senthil. But my question is how we can integrate spring batch schema with BigQuery?","body":"Thanks for replying @senthil. But my question is how we can integrate spring batch schema with BigQuery?"}],"tags":[],"owner":{"account_id":2998939,"reputation":2194,"user_id":2544810,"accept_rate":33,"display_name":"Senthil"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683762107,"creation_date":1683084635,"answer_id":76160250,"question_id":76160177,"body_markdown":"For code samples, take a look at [the relevant snippets on Google&#39;s GitHub](https://github.com/googleapis/java-bigquery/blob/0ffbac349cc27ce72b06e05723e45a973b69cef1/samples/snippets/src/main/java/com/example/bigquery/QueryBatch.java).\r\n\r\nBefore trying this sample, follow [the Java setup instructions in the BigQuery QuickStart using client libraries](https://cloud.google.com/bigquery/docs/quickstarts/quickstart-client-libraries).\r\n\r\nFor more information, see [the BigQuery Java API reference documentation](https://cloud.google.com/java/docs/reference/google-cloud-bigquery/latest/overview).\r\n\r\nTo authenticate to BigQuery, set up the Application Default Credentials. For more information, see [Set up authentication for a local development environment](https://cloud.google.com/docs/authentication/provide-credentials-adc#local-dev). ","title":"BigQuery for Spring batch metadata","body":"<p>For code samples, take a look at <a href=\"https://github.com/googleapis/java-bigquery/blob/0ffbac349cc27ce72b06e05723e45a973b69cef1/samples/snippets/src/main/java/com/example/bigquery/QueryBatch.java\" rel=\"nofollow noreferrer\">the relevant snippets on Google's GitHub</a>.</p>\n<p>Before trying this sample, follow <a href=\"https://cloud.google.com/bigquery/docs/quickstarts/quickstart-client-libraries\" rel=\"nofollow noreferrer\">the Java setup instructions in the BigQuery QuickStart using client libraries</a>.</p>\n<p>For more information, see <a href=\"https://cloud.google.com/java/docs/reference/google-cloud-bigquery/latest/overview\" rel=\"nofollow noreferrer\">the BigQuery Java API reference documentation</a>.</p>\n<p>To authenticate to BigQuery, set up the Application Default Credentials. For more information, see <a href=\"https://cloud.google.com/docs/authentication/provide-credentials-adc#local-dev\" rel=\"nofollow noreferrer\">Set up authentication for a local development environment</a>.</p>\n"}],"owner":{"account_id":3146957,"reputation":462,"user_id":2661251,"accept_rate":25,"display_name":"gcpdev-guy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":194,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1683104450,"answer_count":1,"score":0,"last_activity_date":1683762107,"creation_date":1683083155,"question_id":76160177,"body_markdown":"Anyone used BigQuery to store spring batch jobs, steps and execution instead of other RDBMS? Trying to build a spring-boot batch application to read from BQ table and write it to a pubsub. So thought of using the same BQ to store jobs metadata. Any help is appreciated?","title":"BigQuery for Spring batch metadata","body":"<p>Anyone used BigQuery to store spring batch jobs, steps and execution instead of other RDBMS? Trying to build a spring-boot batch application to read from BQ table and write it to a pubsub. So thought of using the same BQ to store jobs metadata. Any help is appreciated?</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1494936859,"post_id":44001081,"comment_id":75030554,"body_markdown":"`MouseListener`? `MouseMotionListener`?","body":"<code>MouseListener</code>? <code>MouseMotionListener</code>?"},{"owner":{"account_id":10693349,"reputation":31,"user_id":7871451,"display_name":"Yuan  Kai"},"score":0,"creation_date":1494937895,"post_id":44001081,"comment_id":75031304,"body_markdown":"mouse listener doesn&#39;t work every frame","body":"mouse listener doesn&#39;t work every frame"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1494966809,"post_id":44001081,"comment_id":75050355,"body_markdown":"*&quot;Ok I have figured it out. I&#39;m take the mouse location subtract the jframe location on screen then I get the mouse position on jpanel&quot;* - No really, because the panel is contained within the frame&#39;s borders, so it&#39;s offset. I think a greater explanation of the problem you&#39;re trying to solve would help others help you","body":"<i>&quot;Ok I have figured it out. I&#39;m take the mouse location subtract the jframe location on screen then I get the mouse position on jpanel&quot;</i> - No really, because the panel is contained within the frame&#39;s borders, so it&#39;s offset. I think a greater explanation of the problem you&#39;re trying to solve would help others help you"}],"answers":[{"tags":[],"owner":{"account_id":10913378,"reputation":527,"user_id":8022004,"display_name":"qlown"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1494968866,"creation_date":1494968866,"answer_id":44011593,"question_id":44001081,"body_markdown":"Question is &quot;How to get mouse location relative to the JPanel on every frame&quot;.\r\n\r\nI take from this you don&#39;t necessarily have mouse events for each frame, so you have to poll mouse position (relative to screen), and compute the relative position (relative to your JPanel).\r\n\r\nAll in all, it makes me think you want this:\r\n\r\n    Point p = MouseInfo.getPointerInfo().getLocation();\r\n    SwingUtilities.convertPointFromScreen(p, yourJPanel);\r\n    // Then use &#39;p&#39;, which was modified by method call above","title":"How to get mouse location relative to the JPanel on every frame","body":"<p>Question is \"How to get mouse location relative to the JPanel on every frame\".</p>\n\n<p>I take from this you don't necessarily have mouse events for each frame, so you have to poll mouse position (relative to screen), and compute the relative position (relative to your JPanel).</p>\n\n<p>All in all, it makes me think you want this:</p>\n\n<pre><code>Point p = MouseInfo.getPointerInfo().getLocation();\nSwingUtilities.convertPointFromScreen(p, yourJPanel);\n// Then use 'p', which was modified by method call above\n</code></pre>\n"},{"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1683733249,"post_id":76218786,"comment_id":134412909,"body_markdown":"beware: the return value might be null (if the panel is not visible or the mouse not over the panel) - in which case your code snippet will throw an NPE","body":"beware: the return value might be null (if the panel is not visible or the mouse not over the panel) - in which case your code snippet will throw an NPE"},{"owner":{"account_id":18113888,"reputation":53,"user_id":21816951,"display_name":"Callum Rae"},"score":0,"creation_date":1683760018,"post_id":76218786,"comment_id":134417792,"body_markdown":"Thanks for reminding me, I got that error a few times, I find that using a try is the best way to avoid this.","body":"Thanks for reminding me, I got that error a few times, I find that using a try is the best way to avoid this."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":1,"creation_date":1683796036,"post_id":76218786,"comment_id":134422427,"body_markdown":"_that using a try is the best way to avoid this_ actually .. is it not: exceptions are for exceptional (basically unpredicatable) states, in contrast the null return value is clearly specified for certain conditions - the correct way to deal with it is to guard against the null in an if and only access the properties if not-null","body":"<i>that using a try is the best way to avoid this</i> actually .. is it not: exceptions are for exceptional (basically unpredicatable) states, in contrast the null return value is clearly specified for certain conditions - the correct way to deal with it is to guard against the null in an if and only access the properties if not-null"}],"tags":[],"owner":{"account_id":18113888,"reputation":53,"user_id":21816951,"display_name":"Callum Rae"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683761485,"creation_date":1683724029,"answer_id":76218786,"question_id":44001081,"body_markdown":"Let&#39;s say you created a JPanel like so:\r\n\r\n`JPanel myJPanel = new JPanel;`\r\n\r\nyou can use:\r\n\r\n`myJPanel.getMousePosition().x` and `myJPanel.getMousePosition().y` to get the x and y coordinates of the mouse respectively. These will be relative to the top right corner of your JPanel.\r\n\r\nBe careful, if your mouse isn&#39;t inside the panel, or the panel isn&#39;t visible, this will return a null value, so, if you ever want to call these functions, wrap the code that uses them inside a `try` like so:\r\n````\r\ntry{\r\n    [insert code that uses myJPanel.getMousePosition().x/y here, if your mouse isn&#39;t inside the JPanel or the JPanel isn&#39;t visible, the code here will not be executed]\r\n   }catch(NullPointerException e) {[if your mouse isn&#39;t inside the JPanel or the JPanel isn&#39;t visible, code placed here will be executed]}\r\n````\r\nThis will stop your code throwing errors in cases where your mouse is outside the bounds of the JPanel or your JPanel isn&#39;t visible.\r\n\r\n This can work well if you only ever intend to execute the code when your mouse is inside a visible JPanel, but otherwise, I would stick to other methods to get the mouse coordinates.\r\n\r\nIt&#39;s useful for doing things such as clicking on objects inside your JPanel, but it does have limitations.","title":"How to get mouse location relative to the JPanel on every frame","body":"<p>Let's say you created a JPanel like so:</p>\n<p><code>JPanel myJPanel = new JPanel;</code></p>\n<p>you can use:</p>\n<p><code>myJPanel.getMousePosition().x</code> and <code>myJPanel.getMousePosition().y</code> to get the x and y coordinates of the mouse respectively. These will be relative to the top right corner of your JPanel.</p>\n<p>Be careful, if your mouse isn't inside the panel, or the panel isn't visible, this will return a null value, so, if you ever want to call these functions, wrap the code that uses them inside a <code>try</code> like so:</p>\n<pre><code>try{\n    [insert code that uses myJPanel.getMousePosition().x/y here, if your mouse isn't inside the JPanel or the JPanel isn't visible, the code here will not be executed]\n   }catch(NullPointerException e) {[if your mouse isn't inside the JPanel or the JPanel isn't visible, code placed here will be executed]}\n</code></pre>\n<p>This will stop your code throwing errors in cases where your mouse is outside the bounds of the JPanel or your JPanel isn't visible.</p>\n<p>This can work well if you only ever intend to execute the code when your mouse is inside a visible JPanel, but otherwise, I would stick to other methods to get the mouse coordinates.</p>\n<p>It's useful for doing things such as clicking on objects inside your JPanel, but it does have limitations.</p>\n"}],"owner":{"account_id":10693349,"reputation":31,"user_id":7871451,"display_name":"Yuan  Kai"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2161,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":44011593,"answer_count":2,"score":1,"last_activity_date":1683761485,"creation_date":1494936637,"question_id":44001081,"body_markdown":"Now I&#39;m doing this\r\n\r\n    mouseX = MouseInfo.getPointerInfo().getLocation().x;\r\n\r\nbut this doesn&#39;t work anymore if I move the JFrame.\r\n\r\nAlso I need the mouse position every time I move my mouse because I want to drag stuff in my game thus mouse event won&#39;t work.\r\n\r\nHow do I get the mouse location relative to the JPanel every frame?\r\n\r\n------------------------------------------------------------------\r\n\r\nEdit 1: Ok I have figured it out. I&#39;m take the mouse location subtract the jframe location on screen then I get the mouse position on jpanel \r\n\r\n","title":"How to get mouse location relative to the JPanel on every frame","body":"<p>Now I'm doing this</p>\n\n<pre><code>mouseX = MouseInfo.getPointerInfo().getLocation().x;\n</code></pre>\n\n<p>but this doesn't work anymore if I move the JFrame.</p>\n\n<p>Also I need the mouse position every time I move my mouse because I want to drag stuff in my game thus mouse event won't work.</p>\n\n<p>How do I get the mouse location relative to the JPanel every frame?</p>\n\n<hr>\n\n<p>Edit 1: Ok I have figured it out. I'm take the mouse location subtract the jframe location on screen then I get the mouse position on jpanel </p>\n"},{"tags":["java","concurrency","java-8"],"comments":[{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":2,"creation_date":1448906107,"post_id":34004802,"comment_id":55765476,"body_markdown":"I don&#39;t understand what you are trying to do. What is your `combine` method? What&#39;s its purpose? What do you want to do with the `CompletionStage`s? Who is the consumer at the end? What should be the result they receive?","body":"I don&#39;t understand what you are trying to do. What is your <code>combine</code> method? What&#39;s its purpose? What do you want to do with the <code>CompletionStage</code>s? Who is the consumer at the end? What should be the result they receive?"},{"owner":{"account_id":261242,"reputation":1126,"user_id":545298,"accept_rate":86,"display_name":"Vladimir Korenev"},"score":1,"creation_date":1448907364,"post_id":34004802,"comment_id":55766161,"body_markdown":"@SotiriosDelimanolis, `combine` is a function taking 4 parameters and returning 1 of type `Combined`. The consumer can be for example another function taking `Combined` as a parameter and returning another `CompletionStage`, which is invoked using `combinedDataCompletionStage.thenCompose(...)`.","body":"@SotiriosDelimanolis, <code>combine</code> is a function taking 4 parameters and returning 1 of type <code>Combined</code>. The consumer can be for example another function taking <code>Combined</code> as a parameter and returning another <code>CompletionStage</code>, which is invoked using <code>combinedDataCompletionStage.thenCompose(...)</code>."}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":0,"down_vote_count":0,"up_vote_count":62,"is_accepted":true,"score":62,"last_activity_date":1448908169,"creation_date":1448908169,"answer_id":34005471,"question_id":34004802,"body_markdown":"The only way to combine multiple stages that scales well with a growing number of stages, is to use `CompletableFuture`. If your `CompletionStage`s arenâ€™t `CompletableFuture`s you may still convert them using `.toCompletableFuture()`:\r\n\r\n    CompletableFuture&lt;A&gt; aCompletionStage = getA().toCompletableFuture();\r\n    CompletableFuture&lt;B&gt; bCompletionStage = getB().toCompletableFuture();\r\n    CompletableFuture&lt;C&gt; cCompletionStage = getC().toCompletableFuture();\r\n    CompletableFuture&lt;D&gt; dCompletionStage = getD().toCompletableFuture();\r\n\r\n    CompletionStage&lt;Combined&gt; combinedDataCompletionStage = CompletableFuture.allOf(\r\n        aCompletionStage, bCompletionStage, cCompletionStage, dCompletionStage)\r\n        .thenApply(ignoredVoid -&gt; combine(\r\n            aCompletionStage.join(), bCompletionStage.join(),\r\n            cCompletionStage.join(), dCompletionStage.join()) );\r\n\r\nThis contains more boilerplate than combining two stages via `thenCombine` but the boilerplate doesnâ€™t grow when adding more stages to it.\r\n\r\n---\r\n\r\nNote that even with your original `thenCombine` approach, you donâ€™t need a `Triple`, a `Pair` is sufficient:\r\n\r\n    CompletionStage&lt;Combined&gt; combinedDataCompletionStage =\r\n        aCompletionStage.thenCombine(bCompletionStage, (Pair::of)).thenCombine(\r\n            cCompletionStage.thenCombine(dCompletionStage, Pair::of),\r\n            (ab, cd) -&gt; combine(ab.getLeft(), ab.getRight(), cd.getLeft(), cd.getRight()));\r\n\r\nStill, it doesnâ€™t scale well if you want to combine more stages.\r\n\r\n---\r\nAn in-between solution (regarding complexity) might be:\r\n\r\n    CompletionStage&lt;Combined&gt; combinedDataCompletionStage = aCompletionStage.thenCompose(\r\n        a -&gt; bCompletionStage.thenCompose(b -&gt; cCompletionStage.thenCompose(\r\n            c -&gt; dCompletionStage.thenApply(d -&gt; combine(a, b, c, d)))));\r\n\r\nThatâ€™s simpler in its structure but still doesnâ€™t scale well with more more stages.","title":"How to combine 3 or more CompletionStages?","body":"<p>The only way to combine multiple stages that scales well with a growing number of stages, is to use <code>CompletableFuture</code>. If your <code>CompletionStage</code>s arenâ€™t <code>CompletableFuture</code>s you may still convert them using <code>.toCompletableFuture()</code>:</p>\n\n<pre><code>CompletableFuture&lt;A&gt; aCompletionStage = getA().toCompletableFuture();\nCompletableFuture&lt;B&gt; bCompletionStage = getB().toCompletableFuture();\nCompletableFuture&lt;C&gt; cCompletionStage = getC().toCompletableFuture();\nCompletableFuture&lt;D&gt; dCompletionStage = getD().toCompletableFuture();\n\nCompletionStage&lt;Combined&gt; combinedDataCompletionStage = CompletableFuture.allOf(\n    aCompletionStage, bCompletionStage, cCompletionStage, dCompletionStage)\n    .thenApply(ignoredVoid -&gt; combine(\n        aCompletionStage.join(), bCompletionStage.join(),\n        cCompletionStage.join(), dCompletionStage.join()) );\n</code></pre>\n\n<p>This contains more boilerplate than combining two stages via <code>thenCombine</code> but the boilerplate doesnâ€™t grow when adding more stages to it.</p>\n\n<hr>\n\n<p>Note that even with your original <code>thenCombine</code> approach, you donâ€™t need a <code>Triple</code>, a <code>Pair</code> is sufficient:</p>\n\n<pre><code>CompletionStage&lt;Combined&gt; combinedDataCompletionStage =\n    aCompletionStage.thenCombine(bCompletionStage, (Pair::of)).thenCombine(\n        cCompletionStage.thenCombine(dCompletionStage, Pair::of),\n        (ab, cd) -&gt; combine(ab.getLeft(), ab.getRight(), cd.getLeft(), cd.getRight()));\n</code></pre>\n\n<p>Still, it doesnâ€™t scale well if you want to combine more stages.</p>\n\n<hr>\n\n<p>An in-between solution (regarding complexity) might be:</p>\n\n<pre><code>CompletionStage&lt;Combined&gt; combinedDataCompletionStage = aCompletionStage.thenCompose(\n    a -&gt; bCompletionStage.thenCompose(b -&gt; cCompletionStage.thenCompose(\n        c -&gt; dCompletionStage.thenApply(d -&gt; combine(a, b, c, d)))));\n</code></pre>\n\n<p>Thatâ€™s simpler in its structure but still doesnâ€™t scale well with more more stages.</p>\n"},{"tags":[],"owner":{"account_id":261242,"reputation":1126,"user_id":545298,"accept_rate":86,"display_name":"Vladimir Korenev"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1448972408,"creation_date":1448972408,"answer_id":34020329,"question_id":34004802,"body_markdown":"[Holger&#39;s third answer][1] can be made a little bit shorter:\r\n\r\n    CompletionStage&lt;Combined&gt; combinedDataCompletionStage = aCompletionStage.thenCompose(\r\n        a -&gt; bCompletionStage.thenCompose(\r\n            b -&gt; cCompletionStage.thenCombine(dCompletionStage,\r\n                (c, d) -&gt; combine(a, b, c, d))));\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/34005471/545298","title":"How to combine 3 or more CompletionStages?","body":"<p><a href=\"https://stackoverflow.com/a/34005471/545298\">Holger's third answer</a> can be made a little bit shorter:</p>\n\n<pre><code>CompletionStage&lt;Combined&gt; combinedDataCompletionStage = aCompletionStage.thenCompose(\n    a -&gt; bCompletionStage.thenCompose(\n        b -&gt; cCompletionStage.thenCombine(dCompletionStage,\n            (c, d) -&gt; combine(a, b, c, d))));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5055381,"reputation":109,"user_id":4058774,"accept_rate":0,"display_name":"Caspar Nonclercq"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1535476048,"creation_date":1535476048,"answer_id":52063117,"question_id":34004802,"body_markdown":"I think you should use an intermediary object, but one of your own instead of using `Pair` and `Tuple`\r\n\r\n    public R method() {\r\n        CompletableFuture&lt;A&gt; aFuture = getAFuture();\r\n        CompletableFuture&lt;B&gt; bFuture = getBFuture();\r\n        CompletableFuture&lt;C&gt; cFuture = getCFuture();\r\n        CompletableFuture&lt;D&gt; dFuture = getDFuture();\r\n        \r\n        return CompletableFuture.completedFuture(new WellNamedResultHolder())\r\n                .thenCombineAsync(aFuture, WellNamedResultHolder::withAResult)\r\n                .thenCombineAsync(bFuture, WellNamedResultHolder::withBResult)\r\n                .thenCombineAsync(cFuture, WellNamedResultHolder::withCResult)\r\n                .thenCombineAsync(dFuture, WellNamedResultHolder::withDResult)\r\n                .thenApplyAsync(this::combineAllTheResults);\r\n    }\r\n    \r\n    private static class WellNamedResultHolder {\r\n        private A aResult;\r\n        private B bResult;\r\n        private C cResult;\r\n        private D dResult;\r\n\r\n        // Getters\r\n\r\n        public WellNamedResultHolder withAResult(final A aResult) {\r\n            this.aResult = aResult;\r\n            return this;\r\n        }\r\n\r\n        public WellNamedResultHolder withBResult(final B bResult) {\r\n            this.bResult = bResult;\r\n            return this;\r\n        }\r\n\r\n        public WellNamedResultHolder withCResult(final C cResult) {\r\n            this.cResult = cResult;\r\n            return this;\r\n        }\r\n\r\n        public WellNamedResultHolder withDResult(final D dResult) {\r\n            this.dResult = dResult;\r\n            return this;\r\n        }\r\n    }\r\n\r\nThe actual form of the result holder can obviously change to match your own needs, giving you greater flexibility. You also get to be in charge of what happens as these futures complete. Although there is more boilerplate, you get code that is more descriptive of what is happening (which lombok can tidy up).","title":"How to combine 3 or more CompletionStages?","body":"<p>I think you should use an intermediary object, but one of your own instead of using <code>Pair</code> and <code>Tuple</code></p>\n\n<pre><code>public R method() {\n    CompletableFuture&lt;A&gt; aFuture = getAFuture();\n    CompletableFuture&lt;B&gt; bFuture = getBFuture();\n    CompletableFuture&lt;C&gt; cFuture = getCFuture();\n    CompletableFuture&lt;D&gt; dFuture = getDFuture();\n\n    return CompletableFuture.completedFuture(new WellNamedResultHolder())\n            .thenCombineAsync(aFuture, WellNamedResultHolder::withAResult)\n            .thenCombineAsync(bFuture, WellNamedResultHolder::withBResult)\n            .thenCombineAsync(cFuture, WellNamedResultHolder::withCResult)\n            .thenCombineAsync(dFuture, WellNamedResultHolder::withDResult)\n            .thenApplyAsync(this::combineAllTheResults);\n}\n\nprivate static class WellNamedResultHolder {\n    private A aResult;\n    private B bResult;\n    private C cResult;\n    private D dResult;\n\n    // Getters\n\n    public WellNamedResultHolder withAResult(final A aResult) {\n        this.aResult = aResult;\n        return this;\n    }\n\n    public WellNamedResultHolder withBResult(final B bResult) {\n        this.bResult = bResult;\n        return this;\n    }\n\n    public WellNamedResultHolder withCResult(final C cResult) {\n        this.cResult = cResult;\n        return this;\n    }\n\n    public WellNamedResultHolder withDResult(final D dResult) {\n        this.dResult = dResult;\n        return this;\n    }\n}\n</code></pre>\n\n<p>The actual form of the result holder can obviously change to match your own needs, giving you greater flexibility. You also get to be in charge of what happens as these futures complete. Although there is more boilerplate, you get code that is more descriptive of what is happening (which lombok can tidy up).</p>\n"},{"tags":[],"owner":{"account_id":2190659,"reputation":2306,"user_id":1937795,"accept_rate":75,"display_name":"Itchy"},"comment_count":0,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1551416912,"creation_date":1551416912,"answer_id":54938274,"question_id":34004802,"body_markdown":"You asked about &quot;3 or more&quot;, if you have them in a List as CompletableFutures (see other answers) you could use this handy method:\r\n\r\n    private static &lt;T&gt; CompletableFuture&lt;List&lt;T&gt;&gt; join(List&lt;CompletableFuture&lt;T&gt;&gt; executionPromises) {\r\n        CompletableFuture&lt;Void&gt; joinedPromise = CompletableFuture.allOf(executionPromises.toArray(CompletableFuture[]::new));\r\n        return joinedPromise.thenApply(voit -&gt; executionPromises.stream().map(CompletableFuture::join).collect(Collectors.toList()));\r\n    }\r\n\r\nIt converts your &quot;list of futures&quot; to a &quot;future for a list of the results&quot;.","title":"How to combine 3 or more CompletionStages?","body":"<p>You asked about \"3 or more\", if you have them in a List as CompletableFutures (see other answers) you could use this handy method:</p>\n\n<pre><code>private static &lt;T&gt; CompletableFuture&lt;List&lt;T&gt;&gt; join(List&lt;CompletableFuture&lt;T&gt;&gt; executionPromises) {\n    CompletableFuture&lt;Void&gt; joinedPromise = CompletableFuture.allOf(executionPromises.toArray(CompletableFuture[]::new));\n    return joinedPromise.thenApply(voit -&gt; executionPromises.stream().map(CompletableFuture::join).collect(Collectors.toList()));\n}\n</code></pre>\n\n<p>It converts your \"list of futures\" to a \"future for a list of the results\".</p>\n"},{"tags":[],"owner":{"account_id":7238992,"reputation":159,"user_id":5523155,"accept_rate":100,"display_name":"Krish"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1558997838,"creation_date":1558997838,"answer_id":56333226,"question_id":34004802,"body_markdown":"I had a similar problem but had more than 3 completablefutures so building up on [Holger&#39;s][1] answer I made a small generic utility. \r\n\r\n    public static &lt;T, R&gt; CompletableFuture&lt;R&gt; allOf(List&lt;CompletableFuture&lt;T&gt;&gt; args, Function&lt;List&lt;T&gt;, R&gt; combiner) {\r\n        final Queue&lt;CompletableFuture&lt;T&gt;&gt; queue = new LinkedList&lt;&gt;();\r\n        for (CompletableFuture&lt;T&gt; arg : args) {\r\n            queue.add(arg);\r\n        }\r\n        return aggregator(queue, new ArrayList&lt;&gt;(), combiner);\r\n    }\r\n\r\n    private static &lt;T, R&gt; CompletableFuture&lt;R&gt; aggregator(Queue&lt;CompletableFuture&lt;T&gt;&gt; queue, List&lt;T&gt; arg,\r\n            Function&lt;List&lt;T&gt;, R&gt; combiner) {\r\n        if (queue.size() == 2)\r\n            return queue.poll().thenCombine(queue.poll(), (c, d) -&gt; {\r\n                arg.add(c);\r\n                arg.add(d);\r\n                return combiner.apply(arg);\r\n            });\r\n        return queue.poll().thenCompose(data -&gt; {\r\n            arg.add(data);\r\n            return aggregator(queue, arg, combiner);\r\n        });\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/questions/34004802/how-to-combine-3-or-more-completionstages/34005471#34005471","title":"How to combine 3 or more CompletionStages?","body":"<p>I had a similar problem but had more than 3 completablefutures so building up on <a href=\"https://stackoverflow.com/questions/34004802/how-to-combine-3-or-more-completionstages/34005471#34005471\">Holger's</a> answer I made a small generic utility. </p>\n\n<pre><code>public static &lt;T, R&gt; CompletableFuture&lt;R&gt; allOf(List&lt;CompletableFuture&lt;T&gt;&gt; args, Function&lt;List&lt;T&gt;, R&gt; combiner) {\n    final Queue&lt;CompletableFuture&lt;T&gt;&gt; queue = new LinkedList&lt;&gt;();\n    for (CompletableFuture&lt;T&gt; arg : args) {\n        queue.add(arg);\n    }\n    return aggregator(queue, new ArrayList&lt;&gt;(), combiner);\n}\n\nprivate static &lt;T, R&gt; CompletableFuture&lt;R&gt; aggregator(Queue&lt;CompletableFuture&lt;T&gt;&gt; queue, List&lt;T&gt; arg,\n        Function&lt;List&lt;T&gt;, R&gt; combiner) {\n    if (queue.size() == 2)\n        return queue.poll().thenCombine(queue.poll(), (c, d) -&gt; {\n            arg.add(c);\n            arg.add(d);\n            return combiner.apply(arg);\n        });\n    return queue.poll().thenCompose(data -&gt; {\n        arg.add(data);\n        return aggregator(queue, arg, combiner);\n    });\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":286329,"reputation":2281,"user_id":974534,"display_name":"Arboreal Shark"},"score":4,"creation_date":1586423734,"post_id":60074169,"comment_id":108124245,"body_markdown":"That&#39;s not Java syntax dude","body":"That&#39;s not Java syntax dude"},{"owner":{"account_id":10385580,"reputation":300,"user_id":7658797,"display_name":"TheKodeToad"},"score":0,"creation_date":1684628285,"post_id":60074169,"comment_id":134544978,"body_markdown":"i think that may be groovy ye","body":"i think that may be groovy ye"}],"tags":[],"owner":{"account_id":8180146,"reputation":49,"user_id":6157639,"display_name":"Jack"},"comment_count":2,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1580899923,"creation_date":1580899923,"answer_id":60074169,"question_id":34004802,"body_markdown":"I think that CompleableFuture.allOf() function can help you.\r\n\r\nFor example: (View full Class [here][1])\r\n\r\n        List&lt;String&gt; urls = [\r\n                &quot;https://webhook.site/1647465b-c28f-4ffe-bbfe-5d3ad95ef994&quot;,\r\n                &quot;https://webhook.site/1647465b-c28f-4ffe-bbfe-5d3ad95ef994?a=1&quot;\r\n        ]\r\n        CompletableFuture&lt;Response&gt;[] futures = new Completablefuture[2]\r\n        for (int i = 0; i &lt; urls.size(); i++) {\r\n            futures[i] = asyncHttpClient.prepareGet(urls[i]).execute().toCompletableFuture()\r\n\r\n        }\r\n\r\n        CompletableFuture.allOf(futures).thenApply { future -&gt;\r\n            return futures.collect { it.join() }\r\n        }.thenApply({ responses -&gt;\r\n            //Do something with results\r\n            responses.each { println(&quot;Status code: &quot; + it.statusCode) }\r\n        })\r\n\r\n\r\n  [1]: https://gist.github.com/huantt/49f26c56699362755bee78a0090928d1","title":"How to combine 3 or more CompletionStages?","body":"<p>I think that CompleableFuture.allOf() function can help you.</p>\n\n<p>For example: (View full Class <a href=\"https://gist.github.com/huantt/49f26c56699362755bee78a0090928d1\" rel=\"nofollow noreferrer\">here</a>)</p>\n\n<pre><code>    List&lt;String&gt; urls = [\n            \"https://webhook.site/1647465b-c28f-4ffe-bbfe-5d3ad95ef994\",\n            \"https://webhook.site/1647465b-c28f-4ffe-bbfe-5d3ad95ef994?a=1\"\n    ]\n    CompletableFuture&lt;Response&gt;[] futures = new Completablefuture[2]\n    for (int i = 0; i &lt; urls.size(); i++) {\n        futures[i] = asyncHttpClient.prepareGet(urls[i]).execute().toCompletableFuture()\n\n    }\n\n    CompletableFuture.allOf(futures).thenApply { future -&gt;\n        return futures.collect { it.join() }\n    }.thenApply({ responses -&gt;\n        //Do something with results\n        responses.each { println(\"Status code: \" + it.statusCode) }\n    })\n</code></pre>\n"},{"tags":[],"owner":{"account_id":348277,"reputation":1874,"user_id":1052099,"accept_rate":60,"display_name":"TriCore"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1583346195,"creation_date":1583346195,"answer_id":60532456,"question_id":34004802,"body_markdown":"Any number of CompletableFuture can be combined (reduced)\r\n\r\n    CompletionStage&lt;A&gt; futA = getA();\r\n    CompletionStage&lt;B&gt; futB = getB(); \r\n    CompletionStage&lt;C&gt; futC = getC(); \r\n\r\n    Stream.of(futA, futB, futC) \r\n        .reduce((f1, f2) -&gt; f1.thenCombine(f2, (d1, d2) -&gt; combine(d1, d2));\r\n\r\n\r\nThe implementation of *combine* method will be responsible to merge data values (A, B and C), which could be tricky if A, B and C are disparate.","title":"How to combine 3 or more CompletionStages?","body":"<p>Any number of CompletableFuture can be combined (reduced)</p>\n\n<pre><code>CompletionStage&lt;A&gt; futA = getA();\nCompletionStage&lt;B&gt; futB = getB(); \nCompletionStage&lt;C&gt; futC = getC(); \n\nStream.of(futA, futB, futC) \n    .reduce((f1, f2) -&gt; f1.thenCombine(f2, (d1, d2) -&gt; combine(d1, d2));\n</code></pre>\n\n<p>The implementation of <em>combine</em> method will be responsible to merge data values (A, B and C), which could be tricky if A, B and C are disparate.</p>\n"},{"tags":[],"owner":{"account_id":2139684,"reputation":8710,"user_id":2019549,"accept_rate":62,"display_name":"cambunctious"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1607630551,"creation_date":1607630551,"answer_id":65241514,"question_id":34004802,"body_markdown":"You can create a helper function...\r\n\r\n```java\r\ncombine3(\r\n    futureA, futureB, futureC,\r\n    (a, b, c) -&gt; {\r\n      // let&#39;s go!\r\n    }).toCompletableFuture();\r\n```\r\n\r\nDefinition:\r\n\r\n```java\r\nprivate static &lt;A, B, C, D&gt; CompletionStage&lt;D&gt; combine3(\r\n        CompletionStage&lt;A&gt; aStage,\r\n        CompletionStage&lt;B&gt; bStage,\r\n        CompletionStage&lt;C&gt; cStage,\r\n        TriFunction&lt;A, B, C, D&gt; f\r\n) {\r\n    return aStage.thenCompose(\r\n            a -&gt; bStage.thenCombine(cStage,\r\n                    (b, c) -&gt; f.apply(a, b, c)));\r\n}\r\n\r\ninterface TriFunction&lt;A, B, C, D&gt; {\r\n    D apply(A a, B b, C c);\r\n}\r\n```","title":"How to combine 3 or more CompletionStages?","body":"<p>You can create a helper function...</p>\n<pre class=\"lang-java prettyprint-override\"><code>combine3(\n    futureA, futureB, futureC,\n    (a, b, c) -&gt; {\n      // let's go!\n    }).toCompletableFuture();\n</code></pre>\n<p>Definition:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static &lt;A, B, C, D&gt; CompletionStage&lt;D&gt; combine3(\n        CompletionStage&lt;A&gt; aStage,\n        CompletionStage&lt;B&gt; bStage,\n        CompletionStage&lt;C&gt; cStage,\n        TriFunction&lt;A, B, C, D&gt; f\n) {\n    return aStage.thenCompose(\n            a -&gt; bStage.thenCombine(cStage,\n                    (b, c) -&gt; f.apply(a, b, c)));\n}\n\ninterface TriFunction&lt;A, B, C, D&gt; {\n    D apply(A a, B b, C c);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4745435,"reputation":943,"user_id":3836927,"accept_rate":89,"display_name":"Werner de Groot"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654414698,"creation_date":1654414698,"answer_id":72505584,"question_id":34004802,"body_markdown":"I had the exact same problem (and likewise for `Optional`) so I wrote a library to generate `thenCombine`-methods up to arity 26: https://github.com/wernerdegroot/applicatives \r\n\r\nPerhaps it will be of help.","title":"How to combine 3 or more CompletionStages?","body":"<p>I had the exact same problem (and likewise for <code>Optional</code>) so I wrote a library to generate <code>thenCombine</code>-methods up to arity 26: <a href=\"https://github.com/wernerdegroot/applicatives\" rel=\"nofollow noreferrer\">https://github.com/wernerdegroot/applicatives</a></p>\n<p>Perhaps it will be of help.</p>\n"},{"comments":[{"owner":{"account_id":261242,"reputation":1126,"user_id":545298,"accept_rate":86,"display_name":"Vladimir Korenev"},"score":0,"creation_date":1677015488,"post_id":75447134,"comment_id":133253265,"body_markdown":"The original question asked about combining CompletionStages parametrized by different types.","body":"The original question asked about combining CompletionStages parametrized by different types."}],"tags":[],"owner":{"account_id":2365895,"reputation":1,"user_id":2071582,"display_name":"Oleh Faizulin"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676375078,"creation_date":1676373915,"answer_id":75447134,"question_id":34004802,"body_markdown":"If you want to combine results from multiple CFs you need an aggregator for that.\r\n\r\nTake a look on the following example, on how to combine multiple CFs returning strings:\r\n\r\n```\r\n    public static void main(String[] args) throws ExecutionException, InterruptedException {\r\n\r\n        var executor = CompletableFuture.delayedExecutor(10, TimeUnit.SECONDS);\r\n        var cf1 = CompletableFuture.supplyAsync(() -&gt; &quot;1&quot;, executor);\r\n        var cf2 = CompletableFuture.supplyAsync(() -&gt; &quot;2&quot;, executor);\r\n        var cf3 = CompletableFuture.supplyAsync(() -&gt; &quot;3&quot;, executor);\r\n        var cf4 = CompletableFuture.supplyAsync(() -&gt; &quot;4&quot;, executor);\r\n\r\n        var collectees = List.of(cf1, cf2, cf3, cf4);\r\n\r\n\r\n        System.out.println(Instant.now() + &quot;: before combine&quot;);\r\n        var combinedFuture = combine(collectees);\r\n        System.out.println(Instant.now() + &quot;: after combine&quot;);\r\n        // .get() is a blocking function\r\n        // if you remove .get() the program will print uncompleted future and exit (e.g. works async)\r\n        var result = combinedFuture.thenApply(list -&gt; String.join(&quot; - &quot;, list)).get();\r\n        System.out.println(Instant.now() + &quot;: &quot; + result);\r\n    }\r\n\r\n    static &lt;T&gt; CompletableFuture&lt;? extends List&lt;T&gt;&gt; combine(List&lt;CompletableFuture&lt;T&gt;&gt; input) {\r\n        var collector = CompletableFuture.completedFuture(new ArrayList&lt;T&gt;(input.size()));\r\n        for (var toCollect : input) {\r\n            collector = collector.thenCombine(toCollect, (ts, t) -&gt; {\r\n                ts.add(t);\r\n                return ts;\r\n            });\r\n        }\r\n        return collector;\r\n    }\r\n```","title":"How to combine 3 or more CompletionStages?","body":"<p>If you want to combine results from multiple CFs you need an aggregator for that.</p>\n<p>Take a look on the following example, on how to combine multiple CFs returning strings:</p>\n<pre><code>    public static void main(String[] args) throws ExecutionException, InterruptedException {\n\n        var executor = CompletableFuture.delayedExecutor(10, TimeUnit.SECONDS);\n        var cf1 = CompletableFuture.supplyAsync(() -&gt; &quot;1&quot;, executor);\n        var cf2 = CompletableFuture.supplyAsync(() -&gt; &quot;2&quot;, executor);\n        var cf3 = CompletableFuture.supplyAsync(() -&gt; &quot;3&quot;, executor);\n        var cf4 = CompletableFuture.supplyAsync(() -&gt; &quot;4&quot;, executor);\n\n        var collectees = List.of(cf1, cf2, cf3, cf4);\n\n\n        System.out.println(Instant.now() + &quot;: before combine&quot;);\n        var combinedFuture = combine(collectees);\n        System.out.println(Instant.now() + &quot;: after combine&quot;);\n        // .get() is a blocking function\n        // if you remove .get() the program will print uncompleted future and exit (e.g. works async)\n        var result = combinedFuture.thenApply(list -&gt; String.join(&quot; - &quot;, list)).get();\n        System.out.println(Instant.now() + &quot;: &quot; + result);\n    }\n\n    static &lt;T&gt; CompletableFuture&lt;? extends List&lt;T&gt;&gt; combine(List&lt;CompletableFuture&lt;T&gt;&gt; input) {\n        var collector = CompletableFuture.completedFuture(new ArrayList&lt;T&gt;(input.size()));\n        for (var toCollect : input) {\n            collector = collector.thenCombine(toCollect, (ts, t) -&gt; {\n                ts.add(t);\n                return ts;\n            });\n        }\n        return collector;\n    }\n</code></pre>\n"}],"owner":{"account_id":261242,"reputation":1126,"user_id":545298,"accept_rate":86,"display_name":"Vladimir Korenev"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50628,"favorite_count":0,"down_vote_count":1,"up_vote_count":43,"accepted_answer_id":34005471,"answer_count":10,"score":42,"last_activity_date":1683761437,"creation_date":1448905749,"question_id":34004802,"body_markdown":"If have 2 CompletionStages, I can combine them with `thenCombine` method:\r\n\r\n```java\r\nCompletionStage&lt;A&gt; aCompletionStage = getA();\r\nCompletionStage&lt;B&gt; bCompletionStage = getB();\r\nCompletionStage&lt;Combined&gt; combinedCompletionStage =\r\n    aCompletionStage.thenCombine(bCompletionStage, (aData, bData) -&gt; combine(aData, bData));\r\n```\r\n\r\nIf I have 3 or more CompletionStages, I can make a chain of `thenCombine` methods, but I have to use temporary objects to pass results. For example, here is a solution using `Pair` and `Triple` from the `org.apache.commons.lang3.tuple` package:\r\n\r\n```java\r\nCompletionStage&lt;A&gt; aCompletionStage = getA();\r\nCompletionStage&lt;B&gt; bCompletionStage = getB();\r\nCompletionStage&lt;C&gt; cCompletionStage = getC();\r\nCompletionStage&lt;D&gt; dCompletionStage = getD();\r\n\r\nCompletionStage&lt;Combined&gt; combinedDataCompletionStage =\r\n        aCompletionStage.thenCombine(bCompletionStage, (Pair::of))\r\n                .thenCombine(cCompletionStage, (ab, c) -&gt;\r\n                        Triple.of(ab.getLeft(), ab.getRight(), c))\r\n                .thenCombine(dCompletionStage, (abc, d) -&gt;\r\n                        combine(abc.getLeft(), abc.getMiddle(), abc.getRight(), d));\r\n```\r\n\r\nIs there a better way to combine results from multiple CompletionStages?","title":"How to combine 3 or more CompletionStages?","body":"<p>If have 2 CompletionStages, I can combine them with <code>thenCombine</code> method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>CompletionStage&lt;A&gt; aCompletionStage = getA();\nCompletionStage&lt;B&gt; bCompletionStage = getB();\nCompletionStage&lt;Combined&gt; combinedCompletionStage =\n    aCompletionStage.thenCombine(bCompletionStage, (aData, bData) -&gt; combine(aData, bData));\n</code></pre>\n<p>If I have 3 or more CompletionStages, I can make a chain of <code>thenCombine</code> methods, but I have to use temporary objects to pass results. For example, here is a solution using <code>Pair</code> and <code>Triple</code> from the <code>org.apache.commons.lang3.tuple</code> package:</p>\n<pre class=\"lang-java prettyprint-override\"><code>CompletionStage&lt;A&gt; aCompletionStage = getA();\nCompletionStage&lt;B&gt; bCompletionStage = getB();\nCompletionStage&lt;C&gt; cCompletionStage = getC();\nCompletionStage&lt;D&gt; dCompletionStage = getD();\n\nCompletionStage&lt;Combined&gt; combinedDataCompletionStage =\n        aCompletionStage.thenCombine(bCompletionStage, (Pair::of))\n                .thenCombine(cCompletionStage, (ab, c) -&gt;\n                        Triple.of(ab.getLeft(), ab.getRight(), c))\n                .thenCombine(dCompletionStage, (abc, d) -&gt;\n                        combine(abc.getLeft(), abc.getMiddle(), abc.getRight(), d));\n</code></pre>\n<p>Is there a better way to combine results from multiple CompletionStages?</p>\n"},{"tags":["java","spring-boot","jaxb"],"comments":[{"owner":{"account_id":3763662,"reputation":7765,"user_id":3127812,"accept_rate":0,"display_name":"Sambit"},"score":0,"creation_date":1572024601,"post_id":58562784,"comment_id":103445028,"body_markdown":"You have not provided the required JAXB annotations in your pojo classes.","body":"You have not provided the required JAXB annotations in your pojo classes."},{"owner":{"account_id":2409035,"reputation":1992,"user_id":2104638,"accept_rate":47,"display_name":"Pasupathi Rajamanickam"},"score":1,"creation_date":1572026014,"post_id":58562784,"comment_id":103445563,"body_markdown":"Can you post the request from network tab?","body":"Can you post the request from network tab?"},{"owner":{"account_id":2794316,"reputation":1918,"user_id":2403836,"accept_rate":72,"display_name":"mr nooby noob"},"score":0,"creation_date":1572084107,"post_id":58562784,"comment_id":103456811,"body_markdown":"@Sambit I have updated it with the XmlElement and XmlAttribute annotations, but still getting the same error.","body":"@Sambit I have updated it with the XmlElement and XmlAttribute annotations, but still getting the same error."},{"owner":{"account_id":2794316,"reputation":1918,"user_id":2403836,"accept_rate":72,"display_name":"mr nooby noob"},"score":0,"creation_date":1572084178,"post_id":58562784,"comment_id":103456826,"body_markdown":"@PasupathiRajamanickam I have posted a screenshot from Postman or is it something else you are asking for?","body":"@PasupathiRajamanickam I have posted a screenshot from Postman or is it something else you are asking for?"},{"owner":{"account_id":1370752,"reputation":5480,"user_id":1306024,"display_name":"k5_"},"score":0,"creation_date":1572123717,"post_id":58562784,"comment_id":103465483,"body_markdown":"Can you provide the content of the headers in postman? Especially the Content-Type and the Accept header.","body":"Can you provide the content of the headers in postman? Especially the Content-Type and the Accept header."},{"owner":{"account_id":2794316,"reputation":1918,"user_id":2403836,"accept_rate":72,"display_name":"mr nooby noob"},"score":0,"creation_date":1572201762,"post_id":58562784,"comment_id":103478868,"body_markdown":"@k5_ the only key for the headers is: Content-Type and the value is: application/x-www-form-urlencoded","body":"@k5_ the only key for the headers is: Content-Type and the value is: application/x-www-form-urlencoded"},{"owner":{"account_id":1370752,"reputation":5480,"user_id":1306024,"display_name":"k5_"},"score":1,"creation_date":1572202113,"post_id":58562784,"comment_id":103478982,"body_markdown":"your Content-Type header should application/xml (iff you want to send xml). You should add Accept: application/json","body":"your Content-Type header should application/xml (iff you want to send xml). You should add Accept: application/json"},{"owner":{"account_id":2794316,"reputation":1918,"user_id":2403836,"accept_rate":72,"display_name":"mr nooby noob"},"score":0,"creation_date":1572204574,"post_id":58562784,"comment_id":103479665,"body_markdown":"@k5_ thanks that got rid of the error! However, the attributes of my object is null now...any idea?","body":"@k5_ thanks that got rid of the error! However, the attributes of my object is null now...any idea?"},{"owner":{"account_id":1370752,"reputation":5480,"user_id":1306024,"display_name":"k5_"},"score":0,"creation_date":1572204929,"post_id":58562784,"comment_id":103479759,"body_markdown":"At least `Race` should have a `@XmlRootElement` annotation","body":"At least <code>Race</code> should have a <code>@XmlRootElement</code> annotation"},{"owner":{"account_id":2794316,"reputation":1918,"user_id":2403836,"accept_rate":72,"display_name":"mr nooby noob"},"score":0,"creation_date":1572205338,"post_id":58562784,"comment_id":103479864,"body_markdown":"@k5_ thanks, I have tried adding that for only Race and then for both Race and Item, but still the values for the object is null. I am getting this also when I have removed the RequestBody annotation in my controller, since having that gives me a NoClassDefFoundError.","body":"@k5_ thanks, I have tried adding that for only Race and then for both Race and Item, but still the values for the object is null. I am getting this also when I have removed the RequestBody annotation in my controller, since having that gives me a NoClassDefFoundError."}],"answers":[{"tags":[],"owner":{"account_id":2794316,"reputation":1918,"user_id":2403836,"accept_rate":72,"display_name":"mr nooby noob"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1572218420,"creation_date":1572218420,"answer_id":58584195,"question_id":58562784,"body_markdown":"In the end I had to both add \r\n\r\n    @XmlRootElement(name = &quot;nameInXml&quot;)\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n\r\nfor each class\r\n\r\nand these two dependencies:\r\n\r\n            &lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;2.3.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t        &lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;2.3.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;","title":"Getting Unsupported Media Type when trying to create POJO from XML","body":"<p>In the end I had to both add </p>\n\n<pre><code>@XmlRootElement(name = \"nameInXml\")\n@XmlAccessorType(XmlAccessType.FIELD)\n</code></pre>\n\n<p>for each class</p>\n\n<p>and these two dependencies:</p>\n\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n                &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\n            &lt;version&gt;2.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":2794316,"reputation":1918,"user_id":2403836,"accept_rate":72,"display_name":"mr nooby noob"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":256,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":58584195,"answer_count":1,"score":0,"last_activity_date":1683760988,"creation_date":1572022795,"question_id":58562784,"body_markdown":"I am trying to create a POJO from the inputted XML in a POST request, but I am getting a Unsupported Media Type error. I&#39;m not sure if I am missing some sort of annotation for my fields or if I have just set up my classes incorrectly some how. I have tried looking at other examples online, but I still don&#39;t see where my mess up is.\r\n\r\n**Controller**\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api&quot;)\r\n    public class TestController {\r\n    \r\n        @PostMapping(value = &quot;/test&quot;, consumes = MediaType.APPLICATION_XML_VALUE,\r\n        \t\tproduces = MediaType.APPLICATION_JSON_VALUE)\r\n        public String test(@RequestBody Race race) { \r\n        \tSystem.out.println(&quot;value is: &quot; + race);\r\n    \t\r\n            return &quot;{ \\&quot;message\\&quot;: \\&quot;doesnt matter for now\\&quot; }&quot;;\r\n        }\r\n    }\r\n\r\n**POJOs**\r\n\r\n**Race**\r\n\r\n    public class Race implements Serializable\r\n    {\r\n    \tprivate static final long serialVersionUID = 1379428133671921863L;\r\n    \t\r\n        @XmlElement\r\n        private int numberOfLaps;\r\n\t    @XmlElement\r\n        private Item item;\r\n    \r\n        public Race() {\r\n        }\r\n        \r\n        public Race(int numberOfLaps, Item item) {\r\n    \t\tthis.numberOfLaps = numberOfLaps;\r\n    \t\tthis.item = item;\r\n    \t}\r\n    \r\n    \tpublic int getNumberOfLaps ()\r\n        {\r\n            return numberOfLaps;\r\n        }\r\n    \r\n        public void setNumberOfLaps (int numberOfLaps)\r\n        {\r\n            this.numberOfLaps = numberOfLaps;\r\n        }\r\n    \r\n        public Item getItem ()\r\n        {\r\n            return item;\r\n        }\r\n    \r\n        public void setItem (Item item)\r\n        {\r\n            this.item = item;\r\n        }\r\n    \r\n        @Override\r\n        public String toString()\r\n        {\r\n            return &quot;ClassPojo [numberOfLaps = &quot;+numberOfLaps+&quot;, item = &quot;+item+&quot;]&quot;;\r\n        }\r\n    }\r\n\r\n**Item**\r\n\r\n    public class Item implements Serializable\r\n    {\r\n    \tprivate static final long serialVersionUID = -2335797924272015448L;\r\n    \r\n        @XmlElement\r\n    \tprivate Laps[] laps;\r\n    \r\n    \tpublic Item() {\r\n    \t}\r\n    \t\r\n    \tpublic Item(Laps[] laps) {\r\n    \t\tthis.laps = laps;\r\n    \t}\r\n    \r\n    \tpublic Laps[] getlaps ()\r\n    \t{\r\n    \t\treturn laps;\r\n    \t}\r\n    \r\n    \tpublic void setlaps (Laps[] laps)\r\n    \t{\r\n    \t\tthis.laps = laps;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String toString()\r\n    \t{\r\n    \t\treturn &quot;ClassPojo [laps = &quot;+laps+&quot;]&quot;;\r\n    \t}\r\n    }\r\n\r\n**Laps**\r\n\r\n    public class Laps implements Serializable\r\n    {\r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \t\r\n        @XmlAttribute\r\n        private int count;\r\n\t    @XmlElement\r\n        private Lane[] lane;\r\n    \r\n        public Laps() {\r\n    \t}\r\n        public Laps(int count, Lane[] lane) {\r\n    \t\tthis.count = count;\r\n    \t\tthis.lane = lane;\r\n    \t}\r\n    \r\n    \tpublic int getCount ()\r\n        {\r\n            return count;\r\n        }\r\n    \r\n        public void setCount (int count)\r\n        {\r\n            this.count = count;\r\n        }\r\n    \r\n        public Lane[] getLane ()\r\n        {\r\n            return lane;\r\n        }\r\n    \r\n        public void setLane (Lane[] lane)\r\n        {\r\n            this.lane = lane;\r\n        }\r\n    \r\n        @Override\r\n        public String toString()\r\n        {\r\n            return &quot;ClassPojo [count = &quot;+count+&quot;, lane = &quot;+lane+&quot;]&quot;;\r\n        }\r\n    }\r\n\r\n**Lane**\r\n\r\n    public class Lane implements Serializable\r\n    {\r\n    \tprivate static final long serialVersionUID = -8249718991307207229L;\r\n    \t\r\n        @XmlAttribute\r\n        private int number;\r\n\t    @XmlAttribute\r\n        private String value;\r\n    \r\n        public Lane() {\r\n    \t}\r\n        public Lane(int number, String value) {\r\n    \t\tthis.number = number;\r\n    \t\tthis.value = value;\r\n    \t}\r\n    \r\n    \tpublic int getNumber ()\r\n        {\r\n            return number;\r\n        }\r\n    \r\n        public void setNumber (int number)\r\n        {\r\n            this.number = number;\r\n        }\r\n    \r\n        public String getContent ()\r\n        {\r\n            return value;\r\n        }\r\n    \r\n        public void setContent (String content)\r\n        {\r\n            this.value = content;\r\n        }\r\n    \r\n        @Override\r\n        public String toString()\r\n        {\r\n            return &quot;ClassPojo [number = &quot;+number+&quot;, content = &quot;+value+&quot;]&quot;;\r\n        }\r\n    }\r\n\r\nraw XML input into POSTMAN\r\n\r\n    &lt;race&gt;\r\n        &lt;countOfLaps&gt;3&lt;/countOfLaps&gt;\r\n        &lt;item&gt;\r\n            &lt;laps count=&quot;1&quot;&gt;\r\n                &lt;lane count=&quot;1&quot;&gt;1&lt;/lane&gt;\r\n                &lt;lane count=&quot;2&quot;&gt;1&lt;/lane&gt;\r\n                &lt;lane count=&quot;3&quot;&gt;0&lt;/lane&gt;\r\n                &lt;lane count=&quot;4&quot;&gt;-2&lt;/lane&gt;\r\n            &lt;/laps&gt;\r\n            &lt;laps count=&quot;2&quot;&gt;\r\n                &lt;lane count=&quot;1&quot;&gt;1&lt;/lane&gt;\r\n                &lt;lane count=&quot;2&quot;&gt;-1&lt;/lane&gt;\r\n                &lt;lane count=&quot;3&quot;&gt;2&lt;/lane&gt;\r\n                &lt;lane count=&quot;4&quot;&gt;-2&lt;/lane&gt;\r\n            &lt;/laps&gt;\r\n        &lt;/item&gt;\r\n    &lt;/race&gt;\r\n\r\npom depencencies\r\n\r\n    &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n                &lt;exclusions&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                &lt;/exclusions&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-undertow&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.2.11&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n\r\nfull error message \r\n\r\n    {\r\n        &quot;timestamp&quot;: 1572020022472,\r\n        &quot;status&quot;: 415,\r\n        &quot;error&quot;: &quot;Unsupported Media Type&quot;,\r\n        &quot;exception&quot;: &quot;org.springframework.web.HttpMediaTypeNotSupportedException&quot;,\r\n        &quot;message&quot;: &quot;Unsupported Media Type&quot;,\r\n        &quot;path&quot;: &quot;/api/play&quot;\r\n    }\r\n\r\n\r\n[![Postman][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AuWgx.png\r\n\r\n","title":"Getting Unsupported Media Type when trying to create POJO from XML","body":"<p>I am trying to create a POJO from the inputted XML in a POST request, but I am getting a Unsupported Media Type error. I'm not sure if I am missing some sort of annotation for my fields or if I have just set up my classes incorrectly some how. I have tried looking at other examples online, but I still don't see where my mess up is.</p>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>@RestController\n@RequestMapping(\"/api\")\npublic class TestController {\n\n    @PostMapping(value = \"/test\", consumes = MediaType.APPLICATION_XML_VALUE,\n            produces = MediaType.APPLICATION_JSON_VALUE)\n    public String test(@RequestBody Race race) { \n        System.out.println(\"value is: \" + race);\n\n        return \"{ \\\"message\\\": \\\"doesnt matter for now\\\" }\";\n    }\n}\n</code></pre>\n\n<p><strong>POJOs</strong></p>\n\n<p><strong>Race</strong></p>\n\n<pre><code>public class Race implements Serializable\n{\n    private static final long serialVersionUID = 1379428133671921863L;\n\n    @XmlElement\n    private int numberOfLaps;\n    @XmlElement\n    private Item item;\n\n    public Race() {\n    }\n\n    public Race(int numberOfLaps, Item item) {\n        this.numberOfLaps = numberOfLaps;\n        this.item = item;\n    }\n\n    public int getNumberOfLaps ()\n    {\n        return numberOfLaps;\n    }\n\n    public void setNumberOfLaps (int numberOfLaps)\n    {\n        this.numberOfLaps = numberOfLaps;\n    }\n\n    public Item getItem ()\n    {\n        return item;\n    }\n\n    public void setItem (Item item)\n    {\n        this.item = item;\n    }\n\n    @Override\n    public String toString()\n    {\n        return \"ClassPojo [numberOfLaps = \"+numberOfLaps+\", item = \"+item+\"]\";\n    }\n}\n</code></pre>\n\n<p><strong>Item</strong></p>\n\n<pre><code>public class Item implements Serializable\n{\n    private static final long serialVersionUID = -2335797924272015448L;\n\n    @XmlElement\n    private Laps[] laps;\n\n    public Item() {\n    }\n\n    public Item(Laps[] laps) {\n        this.laps = laps;\n    }\n\n    public Laps[] getlaps ()\n    {\n        return laps;\n    }\n\n    public void setlaps (Laps[] laps)\n    {\n        this.laps = laps;\n    }\n\n    @Override\n    public String toString()\n    {\n        return \"ClassPojo [laps = \"+laps+\"]\";\n    }\n}\n</code></pre>\n\n<p><strong>Laps</strong></p>\n\n<pre><code>public class Laps implements Serializable\n{\n    private static final long serialVersionUID = 1L;\n\n    @XmlAttribute\n    private int count;\n    @XmlElement\n    private Lane[] lane;\n\n    public Laps() {\n    }\n    public Laps(int count, Lane[] lane) {\n        this.count = count;\n        this.lane = lane;\n    }\n\n    public int getCount ()\n    {\n        return count;\n    }\n\n    public void setCount (int count)\n    {\n        this.count = count;\n    }\n\n    public Lane[] getLane ()\n    {\n        return lane;\n    }\n\n    public void setLane (Lane[] lane)\n    {\n        this.lane = lane;\n    }\n\n    @Override\n    public String toString()\n    {\n        return \"ClassPojo [count = \"+count+\", lane = \"+lane+\"]\";\n    }\n}\n</code></pre>\n\n<p><strong>Lane</strong></p>\n\n<pre><code>public class Lane implements Serializable\n{\n    private static final long serialVersionUID = -8249718991307207229L;\n\n    @XmlAttribute\n    private int number;\n    @XmlAttribute\n    private String value;\n\n    public Lane() {\n    }\n    public Lane(int number, String value) {\n        this.number = number;\n        this.value = value;\n    }\n\n    public int getNumber ()\n    {\n        return number;\n    }\n\n    public void setNumber (int number)\n    {\n        this.number = number;\n    }\n\n    public String getContent ()\n    {\n        return value;\n    }\n\n    public void setContent (String content)\n    {\n        this.value = content;\n    }\n\n    @Override\n    public String toString()\n    {\n        return \"ClassPojo [number = \"+number+\", content = \"+value+\"]\";\n    }\n}\n</code></pre>\n\n<p>raw XML input into POSTMAN</p>\n\n<pre><code>&lt;race&gt;\n    &lt;countOfLaps&gt;3&lt;/countOfLaps&gt;\n    &lt;item&gt;\n        &lt;laps count=\"1\"&gt;\n            &lt;lane count=\"1\"&gt;1&lt;/lane&gt;\n            &lt;lane count=\"2\"&gt;1&lt;/lane&gt;\n            &lt;lane count=\"3\"&gt;0&lt;/lane&gt;\n            &lt;lane count=\"4\"&gt;-2&lt;/lane&gt;\n        &lt;/laps&gt;\n        &lt;laps count=\"2\"&gt;\n            &lt;lane count=\"1\"&gt;1&lt;/lane&gt;\n            &lt;lane count=\"2\"&gt;-1&lt;/lane&gt;\n            &lt;lane count=\"3\"&gt;2&lt;/lane&gt;\n            &lt;lane count=\"4\"&gt;-2&lt;/lane&gt;\n        &lt;/laps&gt;\n    &lt;/item&gt;\n&lt;/race&gt;\n</code></pre>\n\n<p>pom depencencies</p>\n\n<pre><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-undertow&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n            &lt;version&gt;2.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n            &lt;version&gt;2.2.11&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n\n<p>full error message </p>\n\n<pre><code>{\n    \"timestamp\": 1572020022472,\n    \"status\": 415,\n    \"error\": \"Unsupported Media Type\",\n    \"exception\": \"org.springframework.web.HttpMediaTypeNotSupportedException\",\n    \"message\": \"Unsupported Media Type\",\n    \"path\": \"/api/play\"\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/AuWgx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AuWgx.png\" alt=\"Postman\"></a></p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1683760287,"post_id":76223122,"comment_id":134417818,"body_markdown":"That is [not an option on modern versions of Android for ordinary developers](https://developer.android.com/guide/components/activities/background-starts).","body":"That is <a href=\"https://developer.android.com/guide/components/activities/background-starts\" rel=\"nofollow noreferrer\">not an option on modern versions of Android for ordinary developers</a>."},{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":0,"creation_date":1683761745,"post_id":76223122,"comment_id":134417954,"body_markdown":"You&#39;re looking for [`setFullScreenIntent`](https://developer.android.com/reference/androidx/core/app/NotificationCompat.Builder?hl=en#setFullScreenIntent(android.app.PendingIntent,boolean)) on `NotificationCompat.Builder`.  (cc @CommonsWare)","body":"You&#39;re looking for <a href=\"https://developer.android.com/reference/androidx/core/app/NotificationCompat.Builder?hl=en#setFullScreenIntent(android.app.PendingIntent,boolean)\" rel=\"nofollow noreferrer\"><code>setFullScreenIntent</code></a> on <code>NotificationCompat.Builder</code>.  (cc @CommonsWare)"},{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":0,"creation_date":1683761775,"post_id":76223122,"comment_id":134417959,"body_markdown":"There&#39;s probably a question somewhere on Stack Overflow describing how to do that. (edit: but if there is, I can&#39;t find it; I&#39;ve just found a bunch of really awful advice that won&#39;t work)","body":"There&#39;s probably a question somewhere on Stack Overflow describing how to do that. (edit: but if there is, I can&#39;t find it; I&#39;ve just found a bunch of really awful advice that won&#39;t work)"}],"owner":{"account_id":23659396,"reputation":31,"user_id":17687172,"display_name":"Heinner Lara"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683759970,"creation_date":1683759970,"question_id":76223122,"body_markdown":"I am developing a video call app, I want to open an activity automatically when receiving the fcm notification that allows me to send the request to open the activity to answer or not to the video call, all this works perfectly when my application is in the foreground, but it does not work when my application is in the background or closed, Just like whatsApp does, it doesn&#39;t matter if the app is in the foreground or background or disabled, calls are always received. THANK YOU!\r\n\r\n`\r\n```\r\n@Override\r\n    public void onMessageReceived(@NonNull RemoteMessage remoteMessage) { //este metodo me servira para recibir los datos que se envien en la N.\r\n        super.onMessageReceived(remoteMessage);\r\n\r\n        String title = remoteMessage.getData().get(&quot;title&quot;);\r\n        if (title != null) {\r\n            if (title.equals(&quot;LLAMADA&quot;)) {\r\n                Intent intent = new Intent(getApplicationContext(), IncomingActivity.class);\r\n                intent.putExtra(&quot;username&quot;, remoteMessage.getData().get(&quot;username&quot;));\r\n                intent.putExtra(&quot;image&quot;, remoteMessage.getData().get(&quot;image&quot;));\r\n                intent.putExtra(&quot;inviterToken&quot;, remoteMessage.getData().get(&quot;inviterToken&quot;));\r\n                intent.putExtra(&quot;country&quot;, remoteMessage.getData().get(&quot;country&quot;));\r\n                intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n                startActivity(intent);\r\n\r\n            } else {\r\n\r\n                Map&lt;String, String&gt; data = remoteMessage.getData();\r\n                String body = data.get(&quot;body&quot;); //capturamos el cuerpo del mensaje\r\n                String idNotification = data.get(&quot;idNotification&quot;);\r\n\r\n                if (!ifChatActivityInForeground(getBaseContext(), IGNORED_ACTIVITY_NAME)) { // si ChatActivity no esta en primer plano que se muestre la notificacion\r\n                    if (title.equals(&quot;MENSAJE&quot;)) {\r\n                        getImageReceiver(data);\r\n                    } else {\r\n                        showNotification(title, body, idNotification);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n```\r\n`\r\n\r\nI try to put an intent to go to the activity that allows me to answer or reject the video call","title":"Open activity automatically when receiving fcm notification","body":"<p>I am developing a video call app, I want to open an activity automatically when receiving the fcm notification that allows me to send the request to open the activity to answer or not to the video call, all this works perfectly when my application is in the foreground, but it does not work when my application is in the background or closed, Just like whatsApp does, it doesn't matter if the app is in the foreground or background or disabled, calls are always received. THANK YOU!</p>\n<p>`</p>\n<pre><code>@Override\n    public void onMessageReceived(@NonNull RemoteMessage remoteMessage) { //este metodo me servira para recibir los datos que se envien en la N.\n        super.onMessageReceived(remoteMessage);\n\n        String title = remoteMessage.getData().get(&quot;title&quot;);\n        if (title != null) {\n            if (title.equals(&quot;LLAMADA&quot;)) {\n                Intent intent = new Intent(getApplicationContext(), IncomingActivity.class);\n                intent.putExtra(&quot;username&quot;, remoteMessage.getData().get(&quot;username&quot;));\n                intent.putExtra(&quot;image&quot;, remoteMessage.getData().get(&quot;image&quot;));\n                intent.putExtra(&quot;inviterToken&quot;, remoteMessage.getData().get(&quot;inviterToken&quot;));\n                intent.putExtra(&quot;country&quot;, remoteMessage.getData().get(&quot;country&quot;));\n                intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n                startActivity(intent);\n\n            } else {\n\n                Map&lt;String, String&gt; data = remoteMessage.getData();\n                String body = data.get(&quot;body&quot;); //capturamos el cuerpo del mensaje\n                String idNotification = data.get(&quot;idNotification&quot;);\n\n                if (!ifChatActivityInForeground(getBaseContext(), IGNORED_ACTIVITY_NAME)) { // si ChatActivity no esta en primer plano que se muestre la notificacion\n                    if (title.equals(&quot;MENSAJE&quot;)) {\n                        getImageReceiver(data);\n                    } else {\n                        showNotification(title, body, idNotification);\n                    }\n                }\n            }\n        }\n    }\n</code></pre>\n<p>`</p>\n<p>I try to put an intent to go to the activity that allows me to answer or reject the video call</p>\n"},{"tags":["java","aws-lambda","aws-lambda-layers","aws-lambda-containers"],"comments":[{"owner":{"account_id":58377,"reputation":247920,"user_id":174777,"display_name":"John Rotenstein"},"score":0,"creation_date":1683758717,"post_id":76220486,"comment_id":134417641,"body_markdown":"AWS Step Functions is the &#39;correct&#39; way to wait for a period before invoking an AWS Lambda function.","body":"AWS Step Functions is the &#39;correct&#39; way to wait for a period before invoking an AWS Lambda function."}],"answers":[{"tags":[],"owner":{"account_id":8499572,"reputation":821,"user_id":6916510,"display_name":"Miguel Conde"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683743029,"creation_date":1683743029,"answer_id":76221555,"question_id":76220486,"body_markdown":"Your lambda A can publish a message in SQS, then your lambda B can be executed each one hour (using Cloudwatch event bridge) and reading the messages in the SQS queue, if a message is detected and have 24 hours published you can continue with the execution of the lambda B and delete the message from SQS.","title":"Schedule Lambda from another Lambda","body":"<p>Your lambda A can publish a message in SQS, then your lambda B can be executed each one hour (using Cloudwatch event bridge) and reading the messages in the SQS queue, if a message is detected and have 24 hours published you can continue with the execution of the lambda B and delete the message from SQS.</p>\n"},{"comments":[{"owner":{"account_id":1912742,"reputation":15070,"user_id":1726083,"display_name":"erik258"},"score":0,"creation_date":1684100432,"post_id":76222482,"comment_id":134463496,"body_markdown":"step function is a great solution!","body":"step function is a great solution!"}],"tags":[],"owner":{"account_id":4346930,"reputation":3859,"user_id":3548640,"accept_rate":64,"display_name":"codeninja.sj"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1683752021,"creation_date":1683752021,"answer_id":76222482,"question_id":76220486,"body_markdown":"There are multiple ways to achieve this using AWS resources. Here are a few options that can be implemented easily:\r\n\r\n**Step Functions:** In Step Functions, you can utilize the [Wait][1] state to control the transition of messages from one Lambda function to another. By configuring appropriate wait times, you can achieve the desired delay between the execution of Lambda function A and Lambda function B.\r\n\r\n**SQS:** Another approach is to trigger Lambda function B using SQS messages. However, note that the [maximum visibility timeout][2] for SQS is limited to 12 hours. To achieve a 24-hour window, you can enable the retry functionality on the SQS. However, in order to trigger the retries, you would need to configure Lambda function B to throw an exception during the first attempt of processing the messages from the SQS queue. This will signal to SQS that the message processing should be retried.\r\n\r\n  [1]: https://docs.aws.amazon.com/step-functions/latest/dg/amazon-states-language-wait-state.html\r\n  [2]: https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-visibility-timeout.html","title":"Schedule Lambda from another Lambda","body":"<p>There are multiple ways to achieve this using AWS resources. Here are a few options that can be implemented easily:</p>\n<p><strong>Step Functions:</strong> In Step Functions, you can utilize the <a href=\"https://docs.aws.amazon.com/step-functions/latest/dg/amazon-states-language-wait-state.html\" rel=\"nofollow noreferrer\">Wait</a> state to control the transition of messages from one Lambda function to another. By configuring appropriate wait times, you can achieve the desired delay between the execution of Lambda function A and Lambda function B.</p>\n<p><strong>SQS:</strong> Another approach is to trigger Lambda function B using SQS messages. However, note that the <a href=\"https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-visibility-timeout.html\" rel=\"nofollow noreferrer\">maximum visibility timeout</a> for SQS is limited to 12 hours. To achieve a 24-hour window, you can enable the retry functionality on the SQS. However, in order to trigger the retries, you would need to configure Lambda function B to throw an exception during the first attempt of processing the messages from the SQS queue. This will signal to SQS that the message processing should be retried.</p>\n"}],"owner":{"account_id":12834347,"reputation":23,"user_id":9284486,"display_name":"Roopchand"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76222482,"answer_count":2,"score":0,"last_activity_date":1683758662,"creation_date":1683734165,"question_id":76220486,"body_markdown":"I have two lambda function and both written in Java. Assume A &amp; B.. When A function got successfully executed then I want B function to be executed after 24 hours. \r\nIs it possible to achieve? If yes how?","title":"Schedule Lambda from another Lambda","body":"<p>I have two lambda function and both written in Java. Assume A &amp; B.. When A function got successfully executed then I want B function to be executed after 24 hours.\nIs it possible to achieve? If yes how?</p>\n"},{"tags":["java","servlets","netbeans"],"comments":[{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":2,"creation_date":1683752880,"post_id":76222165,"comment_id":134416902,"body_markdown":"If you upgrade to GlassFish version 7.0.3 you can use any JDK release between 11 and 20: [&quot;Eclipse GlassFish 7.0.3 compiles and runs with JDK 11 to JDK 20 releases.&quot;](https://glassfish.org/#:~:text=ASM%209.5%20integration.-,Eclipse%20GlassFish%207.0.,requires%20JDK%2017%20or%20higher.)","body":"If you upgrade to GlassFish version 7.0.3 you can use any JDK release between 11 and 20: <a href=\"https://glassfish.org/#:~:text=ASM%209.5%20integration.-,Eclipse%20GlassFish%207.0.,requires%20JDK%2017%20or%20higher.\" rel=\"nofollow noreferrer\">&quot;Eclipse GlassFish 7.0.3 compiles and runs with JDK 11 to JDK 20 releases.&quot;</a>"},{"owner":{"account_id":26672592,"reputation":27,"user_id":20283825,"display_name":"Sheriff Sulemana"},"score":0,"creation_date":1683757350,"post_id":76222165,"comment_id":134417482,"body_markdown":"Please how do i upgrate to 7.0.3","body":"Please how do i upgrate to 7.0.3"},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1683757693,"post_id":76222165,"comment_id":134417529,"body_markdown":"Download links for recent versions: [download](https://glassfish.org/download_gf7.html). Download whatever recent version you want (why not just grab the latest?). Unzip the zip file, and then read the &quot;README.txt&quot; file.","body":"Download links for recent versions: <a href=\"https://glassfish.org/download_gf7.html\" rel=\"nofollow noreferrer\">download</a>. Download whatever recent version you want (why not just grab the latest?). Unzip the zip file, and then read the &quot;README.txt&quot; file."},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1683757718,"post_id":76222165,"comment_id":134417535,"body_markdown":"I just posted an answer. See below. Actually the latest release is 7.0.4.","body":"I just posted an answer. See below. Actually the latest release is 7.0.4."}],"answers":[{"comments":[{"owner":{"account_id":26672592,"reputation":27,"user_id":20283825,"display_name":"Sheriff Sulemana"},"score":1,"creation_date":1684432385,"post_id":76222963,"comment_id":134520354,"body_markdown":"Looks like am having issues with this on mac os","body":"Looks like am having issues with this on mac os"},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":1,"creation_date":1684438664,"post_id":76222963,"comment_id":134521581,"body_markdown":"@SheriffSulemana OK. Please update your question to be more specific than _&quot;having issues&quot;_.","body":"@SheriffSulemana OK. Please update your question to be more specific than <i>&quot;having issues&quot;</i>."},{"owner":{"account_id":2042955,"reputation":1341,"user_id":1823710,"accept_rate":59,"display_name":"qualebs"},"score":0,"creation_date":1696165550,"post_id":76222963,"comment_id":136115873,"body_markdown":"HI I am having an issue too with Netbeans 19, JDK 21 and Glassfish 7.0.9 `Could not find Java SE Development Kit to start GlassFish Server`","body":"HI I am having an issue too with Netbeans 19, JDK 21 and Glassfish 7.0.9 <code>Could not find Java SE Development Kit to start GlassFish Server</code>"},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1696194199,"post_id":76222963,"comment_id":136119011,"body_markdown":"@qualebs I can reproduce your issue. However, the most recent GlassFish release that NetBeans 19 supports is 7.0.6. That works for me using NetBeans 19 and JDK 21. GlassFish 7.0.9 was only released two days ago, so you will probably have to wait for the next release of NetBeans to use it. Also, note that neither NetBeans 19 nor GlassFish 7.0.9 claim to formally support the use of JDK 21. You are using versions of three major products that have all been released in the past month, so it is hardly surprising that there may be compatibility issues.","body":"@qualebs I can reproduce your issue. However, the most recent GlassFish release that NetBeans 19 supports is 7.0.6. That works for me using NetBeans 19 and JDK 21. GlassFish 7.0.9 was only released two days ago, so you will probably have to wait for the next release of NetBeans to use it. Also, note that neither NetBeans 19 nor GlassFish 7.0.9 claim to formally support the use of JDK 21. You are using versions of three major products that have all been released in the past month, so it is hardly surprising that there may be compatibility issues."}],"tags":[],"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"comment_count":4,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1683757673,"creation_date":1683757673,"answer_id":76222963,"question_id":76222165,"body_markdown":"I can reproduce your problem. I just tried to start GlassFish 7 on NetBeans 17 using JDK 20, and NetBeans wouldn&#39;t let me do that. But when I selected JDK 17 instead it worked fine. So to resolve this:\r\n- Use **Tools &gt; Java Platforms... &gt; Add Platform** to add *JDK 17* as a platform in NetBeans.\r\n- [Download and install the latest release of GlassFish 7: version 7.0.4](https://glassfish.org/download).\r\n- When you try to start GlassFish 7.0.4 as a server within NetBeans it will fail (_&quot;GlassFish server could not be started...&quot;_), but NetBeans should then invite you to select an alternative platform to use instead:\r\n\r\n  [![Select JDK][1]][1]\r\n\r\n- Note that if JDK 19 is your only platform in NetBeans you won&#39;t be given the option to select an alternative platform, and you won&#39;t be able to resolve the issue.\r\n- Just select *JDK 17* as your **Java Platform** and click **OK** and everything should work. I am running GlassFish 7 on JDK 17 within NetBeans 17 which is using JDK 20 and it is working.  Using JDK 18 instead also worked for me.\r\n\r\nSee the [Eclipse GlassFish download page](https://glassfish.org/download) for details on the latest releases and their JDK requirements. It looks like all releases of GlassFish 7 formally support the use of JDK19. \r\n\r\nNotes:\r\n- Don&#39;t let NetBeans download GlassFish 7.0.0 for you; that is only going to lead to problems. Instead, create an empty directory (e.g. C:/GlassFish704), and then download and install the latest release, GlassFish 7.0.4, into that directory yourself. Then, when you add GlassFish 7 as a server, navigate to the root directory of that GlassFish 7.0.4 installation. In my case (on Windows) that path was **C:/GlassFish704/glassfish-7.0.4/glassfish7**\r\n- Do not use GlassFish 7.0.0 because [there is an unrelated problem with the Admin Console](https://github.com/eclipse-ee4j/glassfish/issues/23782): &quot;GlassFish Server Administration Console (http://localhost:4848) cannot be loaded.&quot;. You will see a `ResolveError` in the GlassFish log, and you won&#39;t be able to open the Admin Console, typically from `http://localhost:4848/common/index.jsf`.\r\n- I think a minor bug in NetBeans caused you to hit this issue, since NetBeans does officially support the use of JDK 19. It seems that there is a needless hard coded constraint preventing you from using JDK 19 with GlassFish 7.x.x.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8JeYE.png","title":"What version of Java supports GlassFish 7.0.0 on a Mac?","body":"<p>I can reproduce your problem. I just tried to start GlassFish 7 on NetBeans 17 using JDK 20, and NetBeans wouldn't let me do that. But when I selected JDK 17 instead it worked fine. So to resolve this:</p>\n<ul>\n<li><p>Use <strong>Tools &gt; Java Platforms... &gt; Add Platform</strong> to add <em>JDK 17</em> as a platform in NetBeans.</p>\n</li>\n<li><p><a href=\"https://glassfish.org/download\" rel=\"nofollow noreferrer\">Download and install the latest release of GlassFish 7: version 7.0.4</a>.</p>\n</li>\n<li><p>When you try to start GlassFish 7.0.4 as a server within NetBeans it will fail (<em>&quot;GlassFish server could not be started...&quot;</em>), but NetBeans should then invite you to select an alternative platform to use instead:</p>\n<p><a href=\"https://i.stack.imgur.com/8JeYE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8JeYE.png\" alt=\"Select JDK\" /></a></p>\n</li>\n<li><p>Note that if JDK 19 is your only platform in NetBeans you won't be given the option to select an alternative platform, and you won't be able to resolve the issue.</p>\n</li>\n<li><p>Just select <em>JDK 17</em> as your <strong>Java Platform</strong> and click <strong>OK</strong> and everything should work. I am running GlassFish 7 on JDK 17 within NetBeans 17 which is using JDK 20 and it is working.  Using JDK 18 instead also worked for me.</p>\n</li>\n</ul>\n<p>See the <a href=\"https://glassfish.org/download\" rel=\"nofollow noreferrer\">Eclipse GlassFish download page</a> for details on the latest releases and their JDK requirements. It looks like all releases of GlassFish 7 formally support the use of JDK19.</p>\n<p>Notes:</p>\n<ul>\n<li>Don't let NetBeans download GlassFish 7.0.0 for you; that is only going to lead to problems. Instead, create an empty directory (e.g. C:/GlassFish704), and then download and install the latest release, GlassFish 7.0.4, into that directory yourself. Then, when you add GlassFish 7 as a server, navigate to the root directory of that GlassFish 7.0.4 installation. In my case (on Windows) that path was <strong>C:/GlassFish704/glassfish-7.0.4/glassfish7</strong></li>\n<li>Do not use GlassFish 7.0.0 because <a href=\"https://github.com/eclipse-ee4j/glassfish/issues/23782\" rel=\"nofollow noreferrer\">there is an unrelated problem with the Admin Console</a>: &quot;GlassFish Server Administration Console (http://localhost:4848) cannot be loaded.&quot;. You will see a <code>ResolveError</code> in the GlassFish log, and you won't be able to open the Admin Console, typically from <code>http://localhost:4848/common/index.jsf</code>.</li>\n<li>I think a minor bug in NetBeans caused you to hit this issue, since NetBeans does officially support the use of JDK 19. It seems that there is a needless hard coded constraint preventing you from using JDK 19 with GlassFish 7.x.x.</li>\n</ul>\n"}],"owner":{"account_id":26672592,"reputation":27,"user_id":20283825,"display_name":"Sheriff Sulemana"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":329,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76222963,"answer_count":1,"score":1,"last_activity_date":1683758284,"creation_date":1683748754,"question_id":76222165,"body_markdown":"I have NetBeans 17 and the highest GlassFish version is 7.0.0. I have Java JDK 19 installed but GlassFish tells me it is not compatible with JDK 19. \r\n\r\nWhat version of JDK is suitable for GlassFish 7.0.0 or lower?","title":"What version of Java supports GlassFish 7.0.0 on a Mac?","body":"<p>I have NetBeans 17 and the highest GlassFish version is 7.0.0. I have Java JDK 19 installed but GlassFish tells me it is not compatible with JDK 19.</p>\n<p>What version of JDK is suitable for GlassFish 7.0.0 or lower?</p>\n"},{"tags":["java","android","xml","jdom-2"],"answers":[{"tags":[],"owner":{"account_id":447793,"reputation":57,"user_id":841635,"display_name":"Arash"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1683758045,"creation_date":1683758045,"answer_id":76222987,"question_id":76218967,"body_markdown":"First i had to implement `xercesImpl.jar` to my project.\r\nThen i had to change the `SAXBuilder` as below:\r\n\r\n    SAXBuilder builder = new SAXBuilder(&quot;org.apache.xerces.parsers.SAXParser&quot;);\r\n    builder.setFeature(&quot;http://xml.org/sax/features/external-general-entities&quot;, false);\r\n\r\nAnd guess what, `ChatGPT` solved my problem step by step. it&#39;s amazing.","title":"Error in XML parser with JDOM2 package in android studio (java)","body":"<p>First i had to implement <code>xercesImpl.jar</code> to my project.\nThen i had to change the <code>SAXBuilder</code> as below:</p>\n<pre><code>SAXBuilder builder = new SAXBuilder(&quot;org.apache.xerces.parsers.SAXParser&quot;);\nbuilder.setFeature(&quot;http://xml.org/sax/features/external-general-entities&quot;, false);\n</code></pre>\n<p>And guess what, <code>ChatGPT</code> solved my problem step by step. it's amazing.</p>\n"}],"owner":{"account_id":447793,"reputation":57,"user_id":841635,"display_name":"Arash"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76222987,"answer_count":1,"score":0,"last_activity_date":1683758045,"creation_date":1683724908,"question_id":76218967,"body_markdown":"This code should convert `xml` to json and i got below error in the first of it.\r\n`SAXBuilder` can&#39;t read `xml` file.\r\n\r\nI use JDOM2 library in this code.\r\n\r\nJava code:\r\n\r\n    package com.example.books_xmltojson;\r\n    \r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import android.os.Bundle;\r\n    import android.widget.EditText;\r\n    import org.jdom2.Document;\r\n    import org.jdom2.input.SAXBuilder;\r\n    import java.io.InputStream;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n        EditText edittext;\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            edittext = findViewById(R.id.edittext);\r\n            // SAX builder \r\n            InputStream input = getResources().openRawResource(R.raw.books);\r\n            SAXBuilder builder = new SAXBuilder();\r\n            try {\r\n                Document doc = builder.build(input);\r\n            } catch (Exception e) {\r\n                    edittext.setText(e.toString());\r\n          } \r\n       }\r\n    }\r\n\r\n\r\nXML R.raw.books:\r\n\r\n    // Resources\r\n    &lt;catalog&gt;\r\n       &lt;book&gt;\r\n          &lt;title&gt;XML Developer&#39;s Guide&lt;/title&gt;\r\n          &lt;genre&gt;Computer&lt;/genre&gt;\r\n    \r\n       &lt;/book&gt;\r\n       &lt;book&gt;\r\n          &lt;title&gt;Midnight Rain&lt;/title&gt;\r\n          &lt;genre&gt;Fantasy&lt;/genre&gt;\r\n       &lt;/book&gt;\r\n    &lt;/catalog&gt;\r\n\r\nThe error:\r\n\r\norg.jdom2.JDOMException: http://xml.org/sax/features/external-general-entities feature http://xml.org/sax/features/external-general-entities not supported for SAX driver org.apache.harmony.xml.ExpatReader\r\n\r\n\r\n\r\n","title":"Error in XML parser with JDOM2 package in android studio (java)","body":"<p>This code should convert <code>xml</code> to json and i got below error in the first of it.\n<code>SAXBuilder</code> can't read <code>xml</code> file.</p>\n<p>I use JDOM2 library in this code.</p>\n<p>Java code:</p>\n<pre><code>package com.example.books_xmltojson;\n\nimport androidx.appcompat.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.widget.EditText;\nimport org.jdom2.Document;\nimport org.jdom2.input.SAXBuilder;\nimport java.io.InputStream;\n\npublic class MainActivity extends AppCompatActivity {\n    EditText edittext;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        edittext = findViewById(R.id.edittext);\n        // SAX builder \n        InputStream input = getResources().openRawResource(R.raw.books);\n        SAXBuilder builder = new SAXBuilder();\n        try {\n            Document doc = builder.build(input);\n        } catch (Exception e) {\n                edittext.setText(e.toString());\n      } \n   }\n}\n</code></pre>\n<p>XML R.raw.books:</p>\n<pre><code>// Resources\n&lt;catalog&gt;\n   &lt;book&gt;\n      &lt;title&gt;XML Developer's Guide&lt;/title&gt;\n      &lt;genre&gt;Computer&lt;/genre&gt;\n\n   &lt;/book&gt;\n   &lt;book&gt;\n      &lt;title&gt;Midnight Rain&lt;/title&gt;\n      &lt;genre&gt;Fantasy&lt;/genre&gt;\n   &lt;/book&gt;\n&lt;/catalog&gt;\n</code></pre>\n<p>The error:</p>\n<p>org.jdom2.JDOMException: <a href=\"http://xml.org/sax/features/external-general-entities\" rel=\"nofollow noreferrer\">http://xml.org/sax/features/external-general-entities</a> feature <a href=\"http://xml.org/sax/features/external-general-entities\" rel=\"nofollow noreferrer\">http://xml.org/sax/features/external-general-entities</a> not supported for SAX driver org.apache.harmony.xml.ExpatReader</p>\n"},{"tags":["java","swing","user-interface"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1683678082,"post_id":76214081,"comment_id":134402565,"body_markdown":"Don&#39;t call `setBorder(...)` or do any other direct mutational changes on component state within a painting method. Consider creating your own Border class and setting a component&#39;s border with it.","body":"Don&#39;t call <code>setBorder(...)</code> or do any other direct mutational changes on component state within a painting method. Consider creating your own Border class and setting a component&#39;s border with it."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1683680168,"post_id":76214081,"comment_id":134402727,"body_markdown":"*&quot;and what I want is&quot;* which seems to come from https://stackoverflow.com/questions/13368103/jpanel-drop-shadow/13369038#13369038","body":"<i>&quot;and what I want is&quot;</i> which seems to come from <a href=\"https://stackoverflow.com/questions/13368103/jpanel-drop-shadow/13369038#13369038\" title=\"jpanel drop shadow\">stackoverflow.com/questions/13368103/jpanel-drop-shadow/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":28386551,"reputation":25,"user_id":21712941,"display_name":"Jake"},"score":0,"creation_date":1683739949,"post_id":76214227,"comment_id":134414497,"body_markdown":"This is very close to what I want, is there any way that the drop shadow could be blurred?\nThe second picture doesn&#39;t really show that but i want the shadow to be like in the first picture, sorry if I wasn&#39;t clear.","body":"This is very close to what I want, is there any way that the drop shadow could be blurred? The second picture doesn&#39;t really show that but i want the shadow to be like in the first picture, sorry if I wasn&#39;t clear."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1683755722,"post_id":76214227,"comment_id":134417268,"body_markdown":"So, the solution is based on https://stackoverflow.com/questions/13368103/jpanel-drop-shadow/13369038#13369038 and in the ImageUtilities has a couple of lines commented out which are directly related to adding a blur","body":"So, the solution is based on <a href=\"https://stackoverflow.com/questions/13368103/jpanel-drop-shadow/13369038#13369038\" title=\"jpanel drop shadow\">stackoverflow.com/questions/13368103/jpanel-drop-shadow/&hellip;</a> and in the ImageUtilities has a couple of lines commented out which are directly related to adding a blur"},{"owner":{"account_id":28386551,"reputation":25,"user_id":21712941,"display_name":"Jake"},"score":0,"creation_date":1683882607,"post_id":76214227,"comment_id":134437741,"body_markdown":"I&#39;ve done some testing with what&#39;s in the original post for this exact question, works perfectly fine, its stupidly easy, thanks a lot!","body":"I&#39;ve done some testing with what&#39;s in the original post for this exact question, works perfectly fine, its stupidly easy, thanks a lot!"}],"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1683757632,"creation_date":1683679852,"answer_id":76214227,"question_id":76214081,"body_markdown":"This is, actually, very complicated, at least if you want it to look &quot;cool&quot;.\r\n\r\nBefore I get started, I wouldn&#39;t use `Border` for this, you can have a look at https://stackoverflow.com/questions/23945781/is-there-a-way-to-make-jtextfield-for-my-address-bar-larger-and-curvier/23945841#23945841 for some reasons why.\r\n\r\nNormally, I make use of [JH Labs image filters](http://www.jhlabs.com/ip/filters/index.html) to produced a blurred shadow, [for example](https://stackoverflow.com/questions/14655643/java-create-shadow-effect-on-image/14656403#14656403), but for the following, I&#39;ve removed it so you can run it without dependencies.\r\n\r\nFirst, you&#39;re going to need some &quot;support&quot; functionality...\r\n\r\n    public class ImageUtilities {\r\n\r\n        public static void applyQualityRenderingHints(Graphics2D g2d) {\r\n            g2d.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);\r\n            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n            g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);\r\n            g2d.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);\r\n            g2d.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);\r\n            g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\r\n            g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\r\n            g2d.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);\r\n        }\r\n\r\n        public static BufferedImage createCompatibleImage(int width, int height) {\r\n            return createCompatibleImage(width, height, Transparency.TRANSLUCENT);\r\n        }\r\n\r\n        public static BufferedImage createCompatibleImage(int width, int height, int transparency) {\r\n            BufferedImage image = getGraphicsConfiguration().createCompatibleImage(width, height, transparency);\r\n            image.coerceData(true);\r\n            return image;\r\n        }\r\n\r\n        public static BufferedImage createCompatibleImage(BufferedImage image) {\r\n            return createCompatibleImage(image, image.getWidth(), image.getHeight());\r\n        }\r\n\r\n        public static BufferedImage createCompatibleImage(BufferedImage image,\r\n                int width, int height) {\r\n            return getGraphicsConfiguration().createCompatibleImage(width, height, image.getTransparency());\r\n        }\r\n\r\n        public static GraphicsConfiguration getGraphicsConfiguration() {\r\n            return GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getDefaultConfiguration();\r\n        }\r\n\r\n        public static BufferedImage generateMask(BufferedImage imgSource, Color color, float alpha) {\r\n            int imgWidth = imgSource.getWidth();\r\n            int imgHeight = imgSource.getHeight();\r\n\r\n            BufferedImage imgBlur = createCompatibleImage(imgWidth, imgHeight);\r\n            Graphics2D g2 = imgBlur.createGraphics();\r\n            applyQualityRenderingHints(g2);\r\n\r\n            g2.drawImage(imgSource, 0, 0, null);\r\n            g2.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_IN, alpha));\r\n            g2.setColor(color);\r\n\r\n            g2.fillRect(0, 0, imgSource.getWidth(), imgSource.getHeight());\r\n            g2.dispose();\r\n\r\n            return imgBlur;\r\n        }\r\n\r\n        public static BufferedImage generateBlur(BufferedImage imgSource, int size, Color color, float alpha) {\r\n            //GaussianFilter filter = new GaussianFilter(size);\r\n\r\n            int imgWidth = imgSource.getWidth();\r\n            int imgHeight = imgSource.getHeight();\r\n\r\n            BufferedImage imgBlur = createCompatibleImage(imgWidth, imgHeight);\r\n            Graphics2D g2 = imgBlur.createGraphics();\r\n            applyQualityRenderingHints(g2);\r\n\r\n            g2.drawImage(imgSource, 0, 0, null);\r\n            g2.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_IN, alpha));\r\n            g2.setColor(color);\r\n\r\n            g2.fillRect(0, 0, imgSource.getWidth(), imgSource.getHeight());\r\n            g2.dispose();\r\n\r\n            //imgBlur = filter.filter(imgBlur, null);\r\n\r\n            return imgBlur;\r\n        }\r\n\r\n        public static BufferedImage applyShadow(Shape shape, int size, Color backgroundColor, Color shadowColor, float alpha) {\r\n            BufferedImage sourceImage = createCompatibleImage(shape.getBounds().width, shape.getBounds().height);\r\n            Graphics2D g2d = sourceImage.createGraphics();\r\n            applyQualityRenderingHints(g2d);\r\n            g2d.translate(-shape.getBounds().getX(), -shape.getBounds().getY());\r\n            g2d.setColor(backgroundColor);\r\n            g2d.fill(shape);\r\n            g2d.dispose();\r\n            return applyShadow(sourceImage, size, shadowColor, alpha);\r\n        }\r\n        \r\n        public static BufferedImage applyShadow(BufferedImage imgSource, int size, Color color, float alpha) {\r\n            BufferedImage result = createCompatibleImage(imgSource, imgSource.getWidth() + (size * 2), imgSource.getHeight() + (size * 2));\r\n            Graphics2D g2d = result.createGraphics();\r\n            g2d.drawImage(generateShadow(imgSource, size, color, alpha), size, size, null);\r\n            g2d.drawImage(imgSource, 0, 0, null);\r\n            g2d.dispose();\r\n\r\n            return result;\r\n        }\r\n\r\n        public static BufferedImage generateShadow(BufferedImage imgSource, int size, Color color, float alpha) {\r\n            int imgWidth = imgSource.getWidth() + (size * 2);\r\n            int imgHeight = imgSource.getHeight() + (size * 2);\r\n\r\n            BufferedImage imgMask = createCompatibleImage(imgWidth, imgHeight);\r\n            Graphics2D g2 = imgMask.createGraphics();\r\n            applyQualityRenderingHints(g2);\r\n\r\n            int x = Math.round((imgWidth - imgSource.getWidth()) / 2f);\r\n            int y = Math.round((imgHeight - imgSource.getHeight()) / 2f);\r\n            g2.drawImage(imgSource, x, y, null);\r\n            g2.dispose();\r\n\r\n            // ---- Blur here ---\r\n            BufferedImage imgGlow = generateBlur(imgMask, (size * 2), color, alpha);\r\n            return imgGlow;\r\n        }\r\n\r\n        public static Image applyMask(BufferedImage sourceImage, BufferedImage maskImage) {\r\n            return applyMask(sourceImage, maskImage, AlphaComposite.DST_IN);\r\n        }\r\n\r\n        public static BufferedImage applyMask(BufferedImage sourceImage, BufferedImage maskImage, int method) {\r\n            BufferedImage maskedImage = null;\r\n            if (sourceImage != null) {\r\n\r\n                int width = maskImage.getWidth(null);\r\n                int height = maskImage.getHeight(null);\r\n\r\n                maskedImage = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);\r\n                Graphics2D mg = maskedImage.createGraphics();\r\n\r\n                int x = (width - sourceImage.getWidth(null)) / 2;\r\n                int y = (height - sourceImage.getHeight(null)) / 2;\r\n\r\n                mg.drawImage(sourceImage, x, y, null);\r\n                mg.setComposite(AlphaComposite.getInstance(method));\r\n\r\n                mg.drawImage(maskImage, 0, 0, null);\r\n\r\n                mg.dispose();\r\n            }\r\n            return maskedImage;\r\n        }\r\n    }\r\n\r\nThis is a lot of functionality which does a relatively simple job - it produces a drop shadow from a supplied image or shape.  It does this through a process of image masking.\r\n\r\nLet&#39;s run a quick test...\r\n\r\n    public class TestPane extends JPanel {\r\n\r\n        public TestPane() {\r\n        }\r\n\r\n        @Override\r\n        public Dimension getPreferredSize() {\r\n            return new Dimension(200, 200);\r\n        }\r\n\r\n        @Override\r\n        protected void paintComponent(Graphics g) {\r\n            super.paintComponent(g);\r\n            Graphics2D g2d = (Graphics2D) g.create();\r\n            \r\n            int size = Math.min(getWidth(), getHeight()) / 2;\r\n            \r\n            RoundRectangle2D border = new RoundRectangle2D.Double(0, 0, size, size, 20, 20);\r\n            ImageUtilities.applyQualityRenderingHints(g2d);\r\n            g2d.drawImage(ImageUtilities.applyShadow(border, 2, getBackground(), Color.BLACK, 0.25f), 5, 5, this);\r\n            g2d.setColor(Color.DARK_GRAY);\r\n            g2d.translate(5, 5);\r\n            g2d.draw(border);\r\n            g2d.dispose();\r\n        }\r\n\r\n    }\r\n\r\nNow, this will produce...\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAlright, job done!\r\n\r\nOk, not entirely.  What we really need is a &quot;composite&quot; component.  That is one, which will contain and manage the rounded border and drop shadow, but also allow use to add components to it, which won&#39;t &quot;over flow&quot; the border, maybe something like...\r\n\r\n    public class RoundedShadowPane extends JPanel {\r\n\r\n        private double cornerRadius = 20;\r\n        private int shadowSize = 5;\r\n        private Color shadowColor = Color.BLACK;\r\n        private float shadowAlpha = 0.25f;\r\n\r\n        private JComponent contentPane;\r\n\r\n        public RoundedShadowPane() {\r\n            setOpaque(false);\r\n            int shadowSize = getShadowSize();\r\n            int cornerRadius = (int) getCornerRadius() / 4;\r\n            setBorder(new EmptyBorder(\r\n                    shadowSize + cornerRadius, \r\n                    shadowSize + cornerRadius, \r\n                    shadowSize + cornerRadius + shadowSize, \r\n                    shadowSize + cornerRadius + shadowSize\r\n            ));\r\n            setLayout(new BorderLayout());\r\n            add(getContentPane());\r\n        }\r\n\r\n        public JComponent getContentPane() {\r\n            if (contentPane == null) {\r\n                contentPane = new JPanel();\r\n            }\r\n            return contentPane;\r\n        }\r\n\r\n        public void setContentPane(JComponent contentPane) {\r\n            if (this.contentPane != null) {\r\n                remove(this.contentPane);\r\n            }\r\n            this.contentPane = contentPane;\r\n            this.setBackground(this.contentPane.getBackground());\r\n            add(this.contentPane);\r\n        }\r\n\r\n        public double getCornerRadius() {\r\n            return cornerRadius;\r\n        }\r\n\r\n        public int getShadowSize() {\r\n            return shadowSize;\r\n        }\r\n\r\n        public Color getShadowColor() {\r\n            return shadowColor;\r\n        }\r\n\r\n        public float getShadowAlpha() {\r\n            return shadowAlpha;\r\n        }\r\n       \r\n        @Override\r\n        protected void paintComponent(Graphics g) {\r\n            super.paintComponent(g);\r\n            Graphics2D g2d = (Graphics2D) g.create();\r\n            g2d.setColor(Color.MAGENTA);\r\n            g2d.fillRect(0, 0, getWidth(), getHeight());\r\n\r\n            double cornerRadius = getCornerRadius();\r\n            double cornerInsets = cornerRadius / 4d;\r\n\r\n            int width = getWidth();\r\n            int height = getHeight();\r\n            Insets insets = getInsets();\r\n            insets.left -= cornerInsets;\r\n            insets.right -= cornerInsets;\r\n            insets.top -= cornerInsets;\r\n            insets.bottom -= cornerInsets;\r\n\r\n            width -= insets.left + insets.right;\r\n            height -= insets.top + insets.bottom;\r\n\r\n            RoundRectangle2D border = new RoundRectangle2D.Double(0, 0, width, height, cornerRadius, cornerRadius);\r\n            ImageUtilities.applyQualityRenderingHints(g2d);\r\n            g2d.drawImage(\r\n                    ImageUtilities.applyShadow(\r\n                            border, getShadowSize(), \r\n                            getBackground(), \r\n                            getShadowColor(), \r\n                            getShadowAlpha()\r\n                    ), \r\n                    insets.left, \r\n                    insets.top, \r\n                    this\r\n            );\r\n            g2d.setColor(Color.DARK_GRAY);\r\n            g2d.translate(insets.left, insets.top);\r\n            g2d.draw(border);\r\n            g2d.dispose();\r\n        }\r\n\r\n    }  \r\n\r\nThis is a little complicated and it&#39;s important to note the their is a seperate `contentPane` onto which all you other components should be added.\r\n\r\nFor example...\r\n\r\n[![enter image description here][2]][2]\r\n\r\n    public class TestPane extends JPanel {\r\n        public TestPane() {\r\n            setLayout(new GridBagLayout());\r\n            GridBagConstraints gbc = new GridBagConstraints();\r\n            \r\n            RoundedShadowPane shadowPane = new RoundedShadowPane();\r\n            shadowPane.getContentPane().add(new JLabel(&quot;Everything is normal here&quot;));\r\n            \r\n            gbc.gridx = 0;\r\n            gbc.gridy = 0;\r\n            add(shadowPane, gbc);\r\n            \r\n            shadowPane = new RoundedShadowPane();\r\n            JPanel contentPane = new JPanel();\r\n            contentPane.setBackground(Color.GREEN);\r\n            shadowPane.setContentPane(contentPane);\r\n            shadowPane.getContentPane().add(new JLabel(&quot;Envy with green&quot;));\r\n            \r\n            gbc.gridx = 1;\r\n            add(shadowPane, gbc);\r\n\r\n            shadowPane = new RoundedShadowPane();\r\n            contentPane = new JPanel();\r\n            contentPane.setBackground(Color.BLUE);\r\n            shadowPane.setContentPane(contentPane);\r\n            shadowPane.getContentPane().add(new JLabel(&quot;Why so blue?&quot;));\r\n            \r\n            gbc.gridy = 1;\r\n            gbc.gridx = 0;\r\n            add(shadowPane, gbc);\r\n            \r\n            shadowPane = new RoundedShadowPane();\r\n            contentPane = new JPanel();\r\n            contentPane.setBackground(Color.RED);\r\n            shadowPane.setContentPane(contentPane);\r\n            shadowPane.getContentPane().add(new JLabel(&quot;Roses are red&quot;));\r\n            \r\n            gbc.gridx = 1;\r\n            add(shadowPane, gbc);\r\n        }\r\n    }\r\n\r\n\r\nNow, a clever person should realise that you could actually paint the `RoundedRectangle` twice, once for the shadow and once for the fill and this would be an entirely valid approach, except, I&#39;d include blurring the shadow, because it &quot;looks&quot; nicer (IMHO)\r\n\r\n&gt; Is there any way that the drop shadow could be blurred? \r\n\r\nAs stated, the answer is based on https://stackoverflow.com/questions/13368103/jpanel-drop-shadow/13369038#13369038 which makes use of [JH Labs image filters](http://www.jhlabs.com/ip/filters/index.html) to produced the blurring.\r\n\r\nIf you want to re-enable the blurring, then you will need to download the `Filters.jar` from [JH Labs](http://www.jhlabs.com/ip/filters/index.html) and link it to your project (no going to describe how to do that).\r\n\r\nOnce you&#39;ve done that, modify the `ImageUtilities` class&#39;s `generateBlur` method to reinstate\r\n\r\n    GaussianFilter filter = new GaussianFilter(size);\r\n\r\nand \r\n\r\n    imgBlur = filter.filter(imgBlur, null);\r\n\r\nlines and blurring will once again be implemented.\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kv5E4.png\r\n  [2]: https://i.stack.imgur.com/QwEjO.png\r\n  [3]: https://i.stack.imgur.com/IM7lB.png","title":"How to make a JPanel with round corners and box shadow in Swing?","body":"<p>This is, actually, very complicated, at least if you want it to look &quot;cool&quot;.</p>\n<p>Before I get started, I wouldn't use <code>Border</code> for this, you can have a look at <a href=\"https://stackoverflow.com/questions/23945781/is-there-a-way-to-make-jtextfield-for-my-address-bar-larger-and-curvier/23945841#23945841\">Is there a way to make JTextField for my address bar larger and curvier</a> for some reasons why.</p>\n<p>Normally, I make use of <a href=\"http://www.jhlabs.com/ip/filters/index.html\" rel=\"nofollow noreferrer\">JH Labs image filters</a> to produced a blurred shadow, <a href=\"https://stackoverflow.com/questions/14655643/java-create-shadow-effect-on-image/14656403#14656403\">for example</a>, but for the following, I've removed it so you can run it without dependencies.</p>\n<p>First, you're going to need some &quot;support&quot; functionality...</p>\n<pre><code>public class ImageUtilities {\n\n    public static void applyQualityRenderingHints(Graphics2D g2d) {\n        g2d.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);\n        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n        g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);\n        g2d.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);\n        g2d.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);\n        g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\n        g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\n        g2d.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);\n    }\n\n    public static BufferedImage createCompatibleImage(int width, int height) {\n        return createCompatibleImage(width, height, Transparency.TRANSLUCENT);\n    }\n\n    public static BufferedImage createCompatibleImage(int width, int height, int transparency) {\n        BufferedImage image = getGraphicsConfiguration().createCompatibleImage(width, height, transparency);\n        image.coerceData(true);\n        return image;\n    }\n\n    public static BufferedImage createCompatibleImage(BufferedImage image) {\n        return createCompatibleImage(image, image.getWidth(), image.getHeight());\n    }\n\n    public static BufferedImage createCompatibleImage(BufferedImage image,\n            int width, int height) {\n        return getGraphicsConfiguration().createCompatibleImage(width, height, image.getTransparency());\n    }\n\n    public static GraphicsConfiguration getGraphicsConfiguration() {\n        return GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getDefaultConfiguration();\n    }\n\n    public static BufferedImage generateMask(BufferedImage imgSource, Color color, float alpha) {\n        int imgWidth = imgSource.getWidth();\n        int imgHeight = imgSource.getHeight();\n\n        BufferedImage imgBlur = createCompatibleImage(imgWidth, imgHeight);\n        Graphics2D g2 = imgBlur.createGraphics();\n        applyQualityRenderingHints(g2);\n\n        g2.drawImage(imgSource, 0, 0, null);\n        g2.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_IN, alpha));\n        g2.setColor(color);\n\n        g2.fillRect(0, 0, imgSource.getWidth(), imgSource.getHeight());\n        g2.dispose();\n\n        return imgBlur;\n    }\n\n    public static BufferedImage generateBlur(BufferedImage imgSource, int size, Color color, float alpha) {\n        //GaussianFilter filter = new GaussianFilter(size);\n\n        int imgWidth = imgSource.getWidth();\n        int imgHeight = imgSource.getHeight();\n\n        BufferedImage imgBlur = createCompatibleImage(imgWidth, imgHeight);\n        Graphics2D g2 = imgBlur.createGraphics();\n        applyQualityRenderingHints(g2);\n\n        g2.drawImage(imgSource, 0, 0, null);\n        g2.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_IN, alpha));\n        g2.setColor(color);\n\n        g2.fillRect(0, 0, imgSource.getWidth(), imgSource.getHeight());\n        g2.dispose();\n\n        //imgBlur = filter.filter(imgBlur, null);\n\n        return imgBlur;\n    }\n\n    public static BufferedImage applyShadow(Shape shape, int size, Color backgroundColor, Color shadowColor, float alpha) {\n        BufferedImage sourceImage = createCompatibleImage(shape.getBounds().width, shape.getBounds().height);\n        Graphics2D g2d = sourceImage.createGraphics();\n        applyQualityRenderingHints(g2d);\n        g2d.translate(-shape.getBounds().getX(), -shape.getBounds().getY());\n        g2d.setColor(backgroundColor);\n        g2d.fill(shape);\n        g2d.dispose();\n        return applyShadow(sourceImage, size, shadowColor, alpha);\n    }\n    \n    public static BufferedImage applyShadow(BufferedImage imgSource, int size, Color color, float alpha) {\n        BufferedImage result = createCompatibleImage(imgSource, imgSource.getWidth() + (size * 2), imgSource.getHeight() + (size * 2));\n        Graphics2D g2d = result.createGraphics();\n        g2d.drawImage(generateShadow(imgSource, size, color, alpha), size, size, null);\n        g2d.drawImage(imgSource, 0, 0, null);\n        g2d.dispose();\n\n        return result;\n    }\n\n    public static BufferedImage generateShadow(BufferedImage imgSource, int size, Color color, float alpha) {\n        int imgWidth = imgSource.getWidth() + (size * 2);\n        int imgHeight = imgSource.getHeight() + (size * 2);\n\n        BufferedImage imgMask = createCompatibleImage(imgWidth, imgHeight);\n        Graphics2D g2 = imgMask.createGraphics();\n        applyQualityRenderingHints(g2);\n\n        int x = Math.round((imgWidth - imgSource.getWidth()) / 2f);\n        int y = Math.round((imgHeight - imgSource.getHeight()) / 2f);\n        g2.drawImage(imgSource, x, y, null);\n        g2.dispose();\n\n        // ---- Blur here ---\n        BufferedImage imgGlow = generateBlur(imgMask, (size * 2), color, alpha);\n        return imgGlow;\n    }\n\n    public static Image applyMask(BufferedImage sourceImage, BufferedImage maskImage) {\n        return applyMask(sourceImage, maskImage, AlphaComposite.DST_IN);\n    }\n\n    public static BufferedImage applyMask(BufferedImage sourceImage, BufferedImage maskImage, int method) {\n        BufferedImage maskedImage = null;\n        if (sourceImage != null) {\n\n            int width = maskImage.getWidth(null);\n            int height = maskImage.getHeight(null);\n\n            maskedImage = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);\n            Graphics2D mg = maskedImage.createGraphics();\n\n            int x = (width - sourceImage.getWidth(null)) / 2;\n            int y = (height - sourceImage.getHeight(null)) / 2;\n\n            mg.drawImage(sourceImage, x, y, null);\n            mg.setComposite(AlphaComposite.getInstance(method));\n\n            mg.drawImage(maskImage, 0, 0, null);\n\n            mg.dispose();\n        }\n        return maskedImage;\n    }\n}\n</code></pre>\n<p>This is a lot of functionality which does a relatively simple job - it produces a drop shadow from a supplied image or shape.  It does this through a process of image masking.</p>\n<p>Let's run a quick test...</p>\n<pre><code>public class TestPane extends JPanel {\n\n    public TestPane() {\n    }\n\n    @Override\n    public Dimension getPreferredSize() {\n        return new Dimension(200, 200);\n    }\n\n    @Override\n    protected void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        Graphics2D g2d = (Graphics2D) g.create();\n        \n        int size = Math.min(getWidth(), getHeight()) / 2;\n        \n        RoundRectangle2D border = new RoundRectangle2D.Double(0, 0, size, size, 20, 20);\n        ImageUtilities.applyQualityRenderingHints(g2d);\n        g2d.drawImage(ImageUtilities.applyShadow(border, 2, getBackground(), Color.BLACK, 0.25f), 5, 5, this);\n        g2d.setColor(Color.DARK_GRAY);\n        g2d.translate(5, 5);\n        g2d.draw(border);\n        g2d.dispose();\n    }\n\n}\n</code></pre>\n<p>Now, this will produce...</p>\n<p><a href=\"https://i.stack.imgur.com/kv5E4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kv5E4.png\" alt=\"enter image description here\" /></a></p>\n<p>Alright, job done!</p>\n<p>Ok, not entirely.  What we really need is a &quot;composite&quot; component.  That is one, which will contain and manage the rounded border and drop shadow, but also allow use to add components to it, which won't &quot;over flow&quot; the border, maybe something like...</p>\n<pre><code>public class RoundedShadowPane extends JPanel {\n\n    private double cornerRadius = 20;\n    private int shadowSize = 5;\n    private Color shadowColor = Color.BLACK;\n    private float shadowAlpha = 0.25f;\n\n    private JComponent contentPane;\n\n    public RoundedShadowPane() {\n        setOpaque(false);\n        int shadowSize = getShadowSize();\n        int cornerRadius = (int) getCornerRadius() / 4;\n        setBorder(new EmptyBorder(\n                shadowSize + cornerRadius, \n                shadowSize + cornerRadius, \n                shadowSize + cornerRadius + shadowSize, \n                shadowSize + cornerRadius + shadowSize\n        ));\n        setLayout(new BorderLayout());\n        add(getContentPane());\n    }\n\n    public JComponent getContentPane() {\n        if (contentPane == null) {\n            contentPane = new JPanel();\n        }\n        return contentPane;\n    }\n\n    public void setContentPane(JComponent contentPane) {\n        if (this.contentPane != null) {\n            remove(this.contentPane);\n        }\n        this.contentPane = contentPane;\n        this.setBackground(this.contentPane.getBackground());\n        add(this.contentPane);\n    }\n\n    public double getCornerRadius() {\n        return cornerRadius;\n    }\n\n    public int getShadowSize() {\n        return shadowSize;\n    }\n\n    public Color getShadowColor() {\n        return shadowColor;\n    }\n\n    public float getShadowAlpha() {\n        return shadowAlpha;\n    }\n   \n    @Override\n    protected void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        Graphics2D g2d = (Graphics2D) g.create();\n        g2d.setColor(Color.MAGENTA);\n        g2d.fillRect(0, 0, getWidth(), getHeight());\n\n        double cornerRadius = getCornerRadius();\n        double cornerInsets = cornerRadius / 4d;\n\n        int width = getWidth();\n        int height = getHeight();\n        Insets insets = getInsets();\n        insets.left -= cornerInsets;\n        insets.right -= cornerInsets;\n        insets.top -= cornerInsets;\n        insets.bottom -= cornerInsets;\n\n        width -= insets.left + insets.right;\n        height -= insets.top + insets.bottom;\n\n        RoundRectangle2D border = new RoundRectangle2D.Double(0, 0, width, height, cornerRadius, cornerRadius);\n        ImageUtilities.applyQualityRenderingHints(g2d);\n        g2d.drawImage(\n                ImageUtilities.applyShadow(\n                        border, getShadowSize(), \n                        getBackground(), \n                        getShadowColor(), \n                        getShadowAlpha()\n                ), \n                insets.left, \n                insets.top, \n                this\n        );\n        g2d.setColor(Color.DARK_GRAY);\n        g2d.translate(insets.left, insets.top);\n        g2d.draw(border);\n        g2d.dispose();\n    }\n\n}  \n</code></pre>\n<p>This is a little complicated and it's important to note the their is a seperate <code>contentPane</code> onto which all you other components should be added.</p>\n<p>For example...</p>\n<p><a href=\"https://i.stack.imgur.com/QwEjO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QwEjO.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>public class TestPane extends JPanel {\n    public TestPane() {\n        setLayout(new GridBagLayout());\n        GridBagConstraints gbc = new GridBagConstraints();\n        \n        RoundedShadowPane shadowPane = new RoundedShadowPane();\n        shadowPane.getContentPane().add(new JLabel(&quot;Everything is normal here&quot;));\n        \n        gbc.gridx = 0;\n        gbc.gridy = 0;\n        add(shadowPane, gbc);\n        \n        shadowPane = new RoundedShadowPane();\n        JPanel contentPane = new JPanel();\n        contentPane.setBackground(Color.GREEN);\n        shadowPane.setContentPane(contentPane);\n        shadowPane.getContentPane().add(new JLabel(&quot;Envy with green&quot;));\n        \n        gbc.gridx = 1;\n        add(shadowPane, gbc);\n\n        shadowPane = new RoundedShadowPane();\n        contentPane = new JPanel();\n        contentPane.setBackground(Color.BLUE);\n        shadowPane.setContentPane(contentPane);\n        shadowPane.getContentPane().add(new JLabel(&quot;Why so blue?&quot;));\n        \n        gbc.gridy = 1;\n        gbc.gridx = 0;\n        add(shadowPane, gbc);\n        \n        shadowPane = new RoundedShadowPane();\n        contentPane = new JPanel();\n        contentPane.setBackground(Color.RED);\n        shadowPane.setContentPane(contentPane);\n        shadowPane.getContentPane().add(new JLabel(&quot;Roses are red&quot;));\n        \n        gbc.gridx = 1;\n        add(shadowPane, gbc);\n    }\n}\n</code></pre>\n<p>Now, a clever person should realise that you could actually paint the <code>RoundedRectangle</code> twice, once for the shadow and once for the fill and this would be an entirely valid approach, except, I'd include blurring the shadow, because it &quot;looks&quot; nicer (IMHO)</p>\n<blockquote>\n<p>Is there any way that the drop shadow could be blurred?</p>\n</blockquote>\n<p>As stated, the answer is based on <a href=\"https://stackoverflow.com/questions/13368103/jpanel-drop-shadow/13369038#13369038\">JPanel Drop Shadow</a> which makes use of <a href=\"http://www.jhlabs.com/ip/filters/index.html\" rel=\"nofollow noreferrer\">JH Labs image filters</a> to produced the blurring.</p>\n<p>If you want to re-enable the blurring, then you will need to download the <code>Filters.jar</code> from <a href=\"http://www.jhlabs.com/ip/filters/index.html\" rel=\"nofollow noreferrer\">JH Labs</a> and link it to your project (no going to describe how to do that).</p>\n<p>Once you've done that, modify the <code>ImageUtilities</code> class's <code>generateBlur</code> method to reinstate</p>\n<pre><code>GaussianFilter filter = new GaussianFilter(size);\n</code></pre>\n<p>and</p>\n<pre><code>imgBlur = filter.filter(imgBlur, null);\n</code></pre>\n<p>lines and blurring will once again be implemented.</p>\n<p><a href=\"https://i.stack.imgur.com/IM7lB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IM7lB.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":28386551,"reputation":25,"user_id":21712941,"display_name":"Jake"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76214227,"answer_count":1,"score":1,"last_activity_date":1683757632,"creation_date":1683676992,"question_id":76214081,"body_markdown":"I&#39;m making an app and I&#39;ve come to the conclusion that I want to make panels have both a box shadow and round corners, I&#39;ve looked through a bunch of already answered questions but I&#39;ve had no success.\r\n\r\n\r\nI have:\r\n```\r\n            JPanel panel = new JPanel() {\r\n                @Override\r\n                protected void paintComponent(Graphics g) {\r\n                    super.setBorder(new DropShadowBorder());\r\n                    super.paintComponent(g);\r\n                    Graphics2D graphics = (Graphics2D) g;\r\n                    graphics.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n                    graphics.setColor(Color.white);\r\n                    graphics.fillRoundRect(0, 0, getWidth() - 1, getHeight() - 1, 10, 10);\r\n                }\r\n            };\r\n```\r\n\r\nwhich results in:\r\n[![https://i.stack.imgur.com/spK4E.png][1]][1]\r\n\r\nand what I want is:\r\n[![https://i.stack.imgur.com/JE2io.png][2]][2]\r\n\r\nPlease help\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/spK4E.png\r\n  [2]: https://i.stack.imgur.com/JE2io.png","title":"How to make a JPanel with round corners and box shadow in Swing?","body":"<p>I'm making an app and I've come to the conclusion that I want to make panels have both a box shadow and round corners, I've looked through a bunch of already answered questions but I've had no success.</p>\n<p>I have:</p>\n<pre><code>            JPanel panel = new JPanel() {\n                @Override\n                protected void paintComponent(Graphics g) {\n                    super.setBorder(new DropShadowBorder());\n                    super.paintComponent(g);\n                    Graphics2D graphics = (Graphics2D) g;\n                    graphics.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n                    graphics.setColor(Color.white);\n                    graphics.fillRoundRect(0, 0, getWidth() - 1, getHeight() - 1, 10, 10);\n                }\n            };\n</code></pre>\n<p>which results in:\n<a href=\"https://i.stack.imgur.com/spK4E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/spK4E.png\" alt=\"https://i.stack.imgur.com/spK4E.png\" /></a></p>\n<p>and what I want is:\n<a href=\"https://i.stack.imgur.com/JE2io.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JE2io.png\" alt=\"https://i.stack.imgur.com/JE2io.png\" /></a></p>\n<p>Please help</p>\n"},{"tags":["java","reference"],"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":3,"creation_date":1683757357,"post_id":76222915,"comment_id":134417483,"body_markdown":"The problem that you have is that your `switch` method can&#39;t be implemented the way you think it can: assigning anything to the parameters has no effect outside of that method. And the fact that you use `ArrayList` is a red herring: the same effect would happen with `String` or `int`. See [this question](https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value) for an in-depth guide to what&#39;s happening and why you can&#39;t do what you want.","body":"The problem that you have is that your <code>switch</code> method can&#39;t be implemented the way you think it can: assigning anything to the parameters has no effect outside of that method. And the fact that you use <code>ArrayList</code> is a red herring: the same effect would happen with <code>String</code> or <code>int</code>. See <a href=\"https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value\">this question</a> for an in-depth guide to what&#39;s happening and why you can&#39;t do what you want."},{"owner":{"account_id":2016330,"reputation":13111,"user_id":1803551,"accept_rate":67,"display_name":"user1803551"},"score":4,"creation_date":1683757603,"post_id":76222915,"comment_id":134417512,"body_markdown":"This is not about lists, it&#39;s about references. I recommend you read about scopes.","body":"This is not about lists, it&#39;s about references. I recommend you read about scopes."},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1683759947,"post_id":76222915,"comment_id":134417784,"body_markdown":"`public static &lt;T&gt; void switchArrLists(List&lt;T&gt; x, List&lt;T&gt; y) { List&lt;T&gt; temp = new ArrayList&lt;&gt;(x); x.clear(); x.addAll(y); y.clear(); y.addAll(temp); }`","body":"<code>public static &lt;T&gt; void switchArrLists(List&lt;T&gt; x, List&lt;T&gt; y) { List&lt;T&gt; temp = new ArrayList&lt;&gt;(x); x.clear(); x.addAll(y); y.clear(); y.addAll(temp); }</code>"},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1683760464,"post_id":76222915,"comment_id":134417834,"body_markdown":"Just as another exercise, you can make `x` and `y` fields (i.e. `private static` and not inside any method). Then use `switchArrLists()` with no parameters. See how that affects the swapping logic.","body":"Just as another exercise, you can make <code>x</code> and <code>y</code> fields (i.e. <code>private static</code> and not inside any method). Then use <code>switchArrLists()</code> with no parameters. See how that affects the swapping logic."}],"owner":{"account_id":18194473,"reputation":13,"user_id":13239792,"display_name":"randomCactus"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1683758024,"answer_count":0,"score":0,"last_activity_date":1683757622,"creation_date":1683756923,"question_id":76222915,"body_markdown":"I&#39;m new to Java and currently playing around with ArrayLists. I found something I couldn&#39;t quite grasp and couldn&#39;t find a previous post that answered my question. I was having problems understanding why I can&#39;t overwrite an entire `ArrayList` with another `ArrayList`. I&#39;ve found that replacing each item in an `ArrayList` works, which I can quite understand. However, I can&#39;t seem to grasp why I can&#39;t replace the content of an `ArrayList` entirely.\r\n\r\nFor example:\r\n\r\n```\r\nclass Test {\r\n    public static void switchArrLists(ArrayList&lt;Integer&gt; x, ArrayList&lt;Integer&gt; y) {\r\n        ArrayList&lt;Integer&gt; temp = x;\r\n        x = y;\r\n        y = temp;\r\n\r\n        System.out.println(&quot;x is: &quot; + x);\r\n        System.out.println(&quot;y is: &quot; + y);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        ArrayList&lt;Integer&gt; x = new ArrayList&lt;Integer&gt;(Arrays.asList(5, 0, 20, 4, 0, 0, 9));\r\n        ArrayList&lt;Integer&gt; y = new ArrayList&lt;Integer&gt;(Arrays.asList(0, 4, 10, 9, 6, 12, 4));\r\n        switchArrLists(x, y);\r\n        System.out.println(&quot;x is: &quot; + x);\r\n        System.out.println(&quot;y is: &quot; + y);\r\n    }\r\n}\r\n```\r\nWhen the code runs, I&#39;ve found that the result is the following:\r\n\r\n    x is: [0, 4, 10, 9, 6, 12, 4]\r\n    y is: [5, 0, 20, 4, 0, 0, 9]\r\n    x is: [5, 0, 20, 4, 0, 0, 9]\r\n    y is: [0, 4, 10, 9, 6, 12, 4]\r\n\r\nwhich shows that the switchArrLists method doesn&#39;t really work. I was wondering why this would be the case. I have a feeling that it has to do something with reference values but can&#39;t really understand it completely.","title":"Overwriting an ArrayList with a different ArrayList","body":"<p>I'm new to Java and currently playing around with ArrayLists. I found something I couldn't quite grasp and couldn't find a previous post that answered my question. I was having problems understanding why I can't overwrite an entire <code>ArrayList</code> with another <code>ArrayList</code>. I've found that replacing each item in an <code>ArrayList</code> works, which I can quite understand. However, I can't seem to grasp why I can't replace the content of an <code>ArrayList</code> entirely.</p>\n<p>For example:</p>\n<pre><code>class Test {\n    public static void switchArrLists(ArrayList&lt;Integer&gt; x, ArrayList&lt;Integer&gt; y) {\n        ArrayList&lt;Integer&gt; temp = x;\n        x = y;\n        y = temp;\n\n        System.out.println(&quot;x is: &quot; + x);\n        System.out.println(&quot;y is: &quot; + y);\n    }\n\n    public static void main(String[] args) {\n        ArrayList&lt;Integer&gt; x = new ArrayList&lt;Integer&gt;(Arrays.asList(5, 0, 20, 4, 0, 0, 9));\n        ArrayList&lt;Integer&gt; y = new ArrayList&lt;Integer&gt;(Arrays.asList(0, 4, 10, 9, 6, 12, 4));\n        switchArrLists(x, y);\n        System.out.println(&quot;x is: &quot; + x);\n        System.out.println(&quot;y is: &quot; + y);\n    }\n}\n</code></pre>\n<p>When the code runs, I've found that the result is the following:</p>\n<pre><code>x is: [0, 4, 10, 9, 6, 12, 4]\ny is: [5, 0, 20, 4, 0, 0, 9]\nx is: [5, 0, 20, 4, 0, 0, 9]\ny is: [0, 4, 10, 9, 6, 12, 4]\n</code></pre>\n<p>which shows that the switchArrLists method doesn't really work. I was wondering why this would be the case. I have a feeling that it has to do something with reference values but can't really understand it completely.</p>\n"},{"tags":["java","swing","jpanel","jbutton"],"comments":[{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1333972533,"post_id":10053471,"comment_id":12894548,"body_markdown":"1) *&quot;After going through the answers, My comments are:&quot;* Not something we will be &#39;notified&#39; of..  The only way for us to know is for you to add a comment to each answer.  I just returned to this to see what the score was after a recent up-vote.  ;)  2)  For better help sooner, post an [SSCCE](http://sscce.org/).  You can see an SSCCE in my linked answer.","body":"1) <i>&quot;After going through the answers, My comments are:&quot;</i> Not something we will be &#39;notified&#39; of..  The only way for us to know is for you to add a comment to each answer.  I just returned to this to see what the score was after a recent up-vote.  ;)  2)  For better help sooner, post an <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">SSCCE</a>.  You can see an SSCCE in my linked answer."}],"answers":[{"comments":[{"owner":{"account_id":45707,"reputation":6613,"user_id":134848,"accept_rate":100,"display_name":"krystan honour"},"score":1,"creation_date":1333793300,"post_id":10053504,"comment_id":12864408,"body_markdown":"CardLayout could be used for this purpose this can be found here http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html","body":"CardLayout could be used for this purpose this can be found here <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/uiswing/layout/card.html</a>"},{"owner":{"account_id":1355455,"reputation":1133,"user_id":1293950,"display_name":"dexametason"},"score":0,"creation_date":1333794374,"post_id":10053504,"comment_id":12864550,"body_markdown":"You have right, card layout can help here! But I didn&#39;t want to go in details about layouts in my answer as the questioner is new to java GUI development.","body":"You have right, card layout can help here! But I didn&#39;t want to go in details about layouts in my answer as the questioner is new to java GUI development."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":1,"creation_date":1333799629,"post_id":10053504,"comment_id":12865457,"body_markdown":"*&quot;I didn&#39;t want to go in details about layouts .. as the questioner is new to java GUI development.&quot;*  That is the ***best time*** to let newbies know how vital they are to GUI development.  Prevent bad habits early on.","body":"<i>&quot;I didn&#39;t want to go in details about layouts .. as the questioner is new to java GUI development.&quot;</i>  That is the <b><i>best time</i></b> to let newbies know how vital they are to GUI development.  Prevent bad habits early on."}],"tags":[],"owner":{"account_id":1355455,"reputation":1133,"user_id":1293950,"display_name":"dexametason"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1333793023,"creation_date":1333793023,"answer_id":10053504,"question_id":10053471,"body_markdown":"If your application is as simple as having only two panels you shouldn&#39;t create two JFrames. You should create a JFrame with two JPanel each of them contains the neccessary information for you. If you are ready with your first panel you can call setVisible(false) on it, and call setVisible(true) on the 2nd frame. It is the one of the most easy-to-understand solution.&lt;br&gt;\r\nBut, it only depends on you if it is good for you or you would like to use some more detailed solution.","title":"how to start, developing swing based application with few panels with next buttons for each","body":"<p>If your application is as simple as having only two panels you shouldn't create two JFrames. You should create a JFrame with two JPanel each of them contains the neccessary information for you. If you are ready with your first panel you can call setVisible(false) on it, and call setVisible(true) on the 2nd frame. It is the one of the most easy-to-understand solution.<br>\nBut, it only depends on you if it is good for you or you would like to use some more detailed solution.</p>\n"},{"comments":[{"owner":{"account_id":1367110,"reputation":386,"user_id":1303321,"accept_rate":41,"display_name":"merlachandra"},"score":0,"creation_date":1333795544,"post_id":10053508,"comment_id":12864762,"body_markdown":"Thanks for your answer. In netbeans, I was selecting Jframe inside &quot;SWING GUI forms&quot; while creating a new class (.java) file. So, I&#39;ve created two jFrames. Now after all your replies, I found an option to create JPanel form. My problem will be solved by changing the 2nd frame to JPanel...","body":"Thanks for your answer. In netbeans, I was selecting Jframe inside &quot;SWING GUI forms&quot; while creating a new class (.java) file. So, I&#39;ve created two jFrames. Now after all your replies, I found an option to create JPanel form. My problem will be solved by changing the 2nd frame to JPanel..."},{"owner":{"account_id":1323592,"reputation":8676,"user_id":1268895,"accept_rate":80,"display_name":"wattostudios"},"score":0,"creation_date":1333795632,"post_id":10053508,"comment_id":12864782,"body_markdown":"Excellent, thats great to hear. If your question is answered, make sure you give a tick to the correct answer, so that others can be helped by your question/answer","body":"Excellent, thats great to hear. If your question is answered, make sure you give a tick to the correct answer, so that others can be helped by your question/answer"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1333806880,"post_id":10053508,"comment_id":12866725,"body_markdown":"*&quot;then JFrame.add(JPanel) to add the next panel.&quot;*  Then call `validate()`..  It is more tricky than it seems.  That is why `CardLayout` is so handy.  All the kinks are ironed out.  ;)","body":"<i>&quot;then JFrame.add(JPanel) to add the next panel.&quot;</i>  Then call <code>validate()</code>..  It is more tricky than it seems.  That is why <code>CardLayout</code> is so handy.  All the kinks are ironed out.  ;)"},{"owner":{"account_id":1367110,"reputation":386,"user_id":1303321,"accept_rate":41,"display_name":"merlachandra"},"score":0,"creation_date":1333906481,"post_id":10053508,"comment_id":12881964,"body_markdown":"After following the answers, I&#39;m facing some new problems. Since, I&#39;m not able to paste more text in comment, I&#39;ve edited the Question and added my comments there...Can somebody please look into the edited question and answer my questions?","body":"After following the answers, I&#39;m facing some new problems. Since, I&#39;m not able to paste more text in comment, I&#39;ve edited the Question and added my comments there...Can somebody please look into the edited question and answer my questions?"}],"tags":[],"owner":{"account_id":1323592,"reputation":8676,"user_id":1268895,"accept_rate":80,"display_name":"wattostudios"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1333793104,"creation_date":1333793104,"answer_id":10053508,"question_id":10053471,"body_markdown":"What you should do is have a single `JFrame` for the application, then you add and remove `JPanels` as you want to move between screens.\r\n\r\nEach of your `JPanels` should basically have the following...\r\n1. A `JButton` called &quot;Next&quot;\r\n2. A `ButtonListener` for each button, that tells the `JFrame` to load panel2, panel3, etc.\r\n\r\nAs part of the `ButtonListener`, you basically just want to call something like `JFrame.removeAll()` to remove the existing panel, then `JFrame.add(JPanel)` to add the next panel.\r\n\r\nBy having 1 `JFrame`, you also only have 1 `main()` method.","title":"how to start, developing swing based application with few panels with next buttons for each","body":"<p>What you should do is have a single <code>JFrame</code> for the application, then you add and remove <code>JPanels</code> as you want to move between screens.</p>\n\n<p>Each of your <code>JPanels</code> should basically have the following...\n1. A <code>JButton</code> called \"Next\"\n2. A <code>ButtonListener</code> for each button, that tells the <code>JFrame</code> to load panel2, panel3, etc.</p>\n\n<p>As part of the <code>ButtonListener</code>, you basically just want to call something like <code>JFrame.removeAll()</code> to remove the existing panel, then <code>JFrame.add(JPanel)</code> to add the next panel.</p>\n\n<p>By having 1 <code>JFrame</code>, you also only have 1 <code>main()</code> method.</p>\n"},{"comments":[{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1333793948,"post_id":10053591,"comment_id":12864486,"body_markdown":"*&quot;nor with separated Jar file&quot;*  Huh?  I typically make &#39;one Jar per package&#39; to allow faster deployment for applets and JWS, and (with JWS) to allow different packages to have different security levels.","body":"<i>&quot;nor with separated Jar file&quot;</i>  Huh?  I typically make &#39;one Jar per package&#39; to allow faster deployment for applets and JWS, and (with JWS) to allow different packages to have different security levels."}],"tags":[],"owner":{"account_id":368268,"reputation":109587,"user_id":714968,"accept_rate":90,"display_name":"mKorbel"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1333793798,"creation_date":1333793798,"answer_id":10053591,"question_id":10053471,"body_markdown":"Don&#39;t use two or more `JFrames`, nor with separated and compiled `Jar files`, this is road to the hell, better would be look at [CardLayout][1], \r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html","title":"how to start, developing swing based application with few panels with next buttons for each","body":"<p>Don't use two or more <code>JFrames</code>, nor with separated and compiled <code>Jar files</code>, this is road to the hell, better would be look at <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html\" rel=\"nofollow\">CardLayout</a>, </p>\n"},{"comments":[{"owner":{"account_id":1367110,"reputation":386,"user_id":1303321,"accept_rate":41,"display_name":"merlachandra"},"score":0,"creation_date":1333794472,"post_id":10053635,"comment_id":12864560,"body_markdown":"since the panels have been created using netbeans, they are set to private access levels by default and are non-editable.","body":"since the panels have been created using netbeans, they are set to private access levels by default and are non-editable."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":1,"creation_date":1333794567,"post_id":10053635,"comment_id":12864578,"body_markdown":"Rubbish they are non-editable.  If you cannot figure how to use your IDE, you should either ask questions on that first, or use a simpler code editor.","body":"Rubbish they are non-editable.  If you cannot figure how to use your IDE, you should either ask questions on that first, or use a simpler code editor."}],"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1333972774,"creation_date":1333794128,"answer_id":10053635,"question_id":10053471,"body_markdown":"Use a &lt;a href=&quot;http://download.oracle.com/javase/6/docs/api/java/awt/CardLayout.html&quot;&gt;CardLayout&lt;/a&gt;, as shown &lt;a href=&quot;https://stackoverflow.com/questions/5665156/calling-awt-frame-methods-from-subclass/5786005#5786005&quot;&gt;here&lt;/a&gt;  (and [one frame](https://stackoverflow.com/a/9554657/418556)) as mentioned by others.\r\n\r\n![Game view][1]  ![High Scores view][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/dJLvt.png\r\n  [2]: http://i.stack.imgur.com/i9ZvK.png\r\n\r\n&gt; When Next is clicked, I&#39;m trying to make setVisible(false) for main panel of first frame and setVisible(true) for main panel of second frame. But this cannot be done, since the panels within a class are private. Any resolution for the above problem?\r\n\r\nMake the panels `public` access level and they will be available from other packages.\r\n\r\n---\r\n\r\nOne problem in that code snippet is implied by the line:\r\n\r\n    UpgradeUtilityGUI upgradeUtilityGUI = new UpgradeUtilityGUI();  \r\n\r\nIt goes out of scope before ever being added to a container.  Also, their should be no need to remove anything when adding a new card to the layout, and no need to call `repaint()`.","title":"how to start, developing swing based application with few panels with next buttons for each","body":"<p>Use a <a href=\"http://download.oracle.com/javase/6/docs/api/java/awt/CardLayout.html\" rel=\"nofollow noreferrer\">CardLayout</a>, as shown <a href=\"https://stackoverflow.com/questions/5665156/calling-awt-frame-methods-from-subclass/5786005#5786005\">here</a>  (and <a href=\"https://stackoverflow.com/a/9554657/418556\">one frame</a>) as mentioned by others.</p>\n\n<p><img src=\"https://i.stack.imgur.com/dJLvt.png\" alt=\"Game view\">  <img src=\"https://i.stack.imgur.com/i9ZvK.png\" alt=\"High Scores view\"></p>\n\n<blockquote>\n  <p>When Next is clicked, I'm trying to make setVisible(false) for main panel of first frame and setVisible(true) for main panel of second frame. But this cannot be done, since the panels within a class are private. Any resolution for the above problem?</p>\n</blockquote>\n\n<p>Make the panels <code>public</code> access level and they will be available from other packages.</p>\n\n<hr>\n\n<p>One problem in that code snippet is implied by the line:</p>\n\n<pre><code>UpgradeUtilityGUI upgradeUtilityGUI = new UpgradeUtilityGUI();  \n</code></pre>\n\n<p>It goes out of scope before ever being added to a container.  Also, their should be no need to remove anything when adding a new card to the layout, and no need to call <code>repaint()</code>.</p>\n"}],"owner":{"account_id":1367110,"reputation":386,"user_id":1303321,"accept_rate":41,"display_name":"merlachandra"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":607,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":10053591,"answer_count":4,"score":1,"last_activity_date":1683756408,"creation_date":1333792655,"question_id":10053471,"body_markdown":"I&#39;m new to java.I&#39;m creating a swing based UI. I&#39;ve created 2 frames, each one in separate .java file inside same package.\r\n\r\nThese two frames represents 2 screens (panels) of application. When Next button in first frame is clicked, it should move to second frame.\r\n\r\nWhen I checked, these two classes are having main method, I think it should be correct way for creating applications. there should be only one main method.\r\n\r\nWhen Next is clicked, I&#39;m trying to make setVisible(false) for main panel of first frame and setVisible(true) for main panel of second frame. But this cannot be done, since the panels within a class are private. Any resolution for the above problem?\r\n\r\nAs I&#39;m beginner, Can somebody suggest me in how to start up with these kind of applications? what are the guidelines that need to be followed? And please help me in finding documentation related to starting up with the development of such applications.\r\n\r\nAfter going through the answers, My comments are:\r\n\r\nI used the following code to go to next panel from first panel, but didn&#39;t worked.\r\n\r\n    private void gotoNextPanel(){\r\n    //    jPanelFirstScreen.setVisible(false);\r\n          JPanelSecondScreen jpanelSecondScreen= new JPanelSecondScreen();\r\n          jpanelSecondScreen.setVisible(true);\r\n          UpgradeUtilityGUI upgradeUtilityGUI = new UpgradeUtilityGUI();\r\n          upgradeUtilityGUI.removeAll();\r\n          validate();\r\n          repaint();\r\n    //      upgradeUtilityGUI.add(jpanelSecondScreen);\r\n                upgradeUtilityGUI.getContentPane().add(jpanelSecondScreen, &quot;card2&quot;);\r\n          jpanelSecondScreen.setVisible(true);\r\n          validate();\r\n          repaint();\r\n                    \r\n        }\r\n\r\nI&#39;m using netbeans, and &#39;ve added two panels to the cardlayout of frame. And when I use the above code to change panels, Nothing is happening, the first panel is still appearing. Can somebody tell me, how to write code for moving from one panel to another when both the panels &#39;ve been added to cardlayout of jFrame ?","title":"how to start, developing swing based application with few panels with next buttons for each","body":"<p>I'm new to java.I'm creating a swing based UI. I've created 2 frames, each one in separate .java file inside same package.</p>\n\n<p>These two frames represents 2 screens (panels) of application. When Next button in first frame is clicked, it should move to second frame.</p>\n\n<p>When I checked, these two classes are having main method, I think it should be correct way for creating applications. there should be only one main method.</p>\n\n<p>When Next is clicked, I'm trying to make setVisible(false) for main panel of first frame and setVisible(true) for main panel of second frame. But this cannot be done, since the panels within a class are private. Any resolution for the above problem?</p>\n\n<p>As I'm beginner, Can somebody suggest me in how to start up with these kind of applications? what are the guidelines that need to be followed? And please help me in finding documentation related to starting up with the development of such applications.</p>\n\n<p>After going through the answers, My comments are:</p>\n\n<p>I used the following code to go to next panel from first panel, but didn't worked.</p>\n\n<pre><code>private void gotoNextPanel(){\n//    jPanelFirstScreen.setVisible(false);\n      JPanelSecondScreen jpanelSecondScreen= new JPanelSecondScreen();\n      jpanelSecondScreen.setVisible(true);\n      UpgradeUtilityGUI upgradeUtilityGUI = new UpgradeUtilityGUI();\n      upgradeUtilityGUI.removeAll();\n      validate();\n      repaint();\n//      upgradeUtilityGUI.add(jpanelSecondScreen);\n            upgradeUtilityGUI.getContentPane().add(jpanelSecondScreen, \"card2\");\n      jpanelSecondScreen.setVisible(true);\n      validate();\n      repaint();\n\n    }\n</code></pre>\n\n<p>I'm using netbeans, and 've added two panels to the cardlayout of frame. And when I use the above code to change panels, Nothing is happening, the first panel is still appearing. Can somebody tell me, how to write code for moving from one panel to another when both the panels 've been added to cardlayout of jFrame ?</p>\n"},{"tags":["java","c++","c","algorithm"],"comments":[{"owner":{"account_id":996105,"reputation":182284,"user_id":1011995,"display_name":"Daniel Fischer"},"score":23,"creation_date":1352293985,"post_id":13270491,"comment_id":18087763,"body_markdown":"Sort the arrays first. Then you only need a single pass.","body":"Sort the arrays first. Then you only need a single pass."},{"owner":{"account_id":316698,"reputation":3443,"user_id":633001,"accept_rate":86,"display_name":"SinisterMJ"},"score":0,"creation_date":1352294045,"post_id":13270491,"comment_id":18087786,"body_markdown":"As stated above, sort the two arrays, and from there it is really easy.","body":"As stated above, sort the two arrays, and from there it is really easy."},{"owner":{"account_id":1381576,"reputation":1565,"user_id":1314439,"accept_rate":62,"display_name":"Ranjan Sarma"},"score":0,"creation_date":1352294097,"post_id":13270491,"comment_id":18087820,"body_markdown":"Let Us Consider Sorting Cannot Be Implemented In This Case (I am saying so because in most day to day case it will take longer time to sort non-primitive data types or classes which would suppress the purpose of single pass).","body":"Let Us Consider Sorting Cannot Be Implemented In This Case (I am saying so because in most day to day case it will take longer time to sort non-primitive data types or classes which would suppress the purpose of single pass)."},{"owner":{"account_id":1879711,"reputation":1641,"user_id":1700184,"accept_rate":43,"display_name":"user1700184"},"score":51,"creation_date":1352294120,"post_id":13270491,"comment_id":18087828,"body_markdown":"Use HashSet to store all data from first array.  Then for every element in the second array, check if the HashSet contains() the element.  The complexity of sorting is O(n lg n) while the complexity of this method is O(n)","body":"Use HashSet to store all data from first array.  Then for every element in the second array, check if the HashSet contains() the element.  The complexity of sorting is O(n lg n) while the complexity of this method is O(n)"},{"owner":{"account_id":158872,"reputation":2509,"user_id":377816,"accept_rate":81,"display_name":"Moataz Elmasry"},"score":0,"creation_date":1352294570,"post_id":13270491,"comment_id":18088023,"body_markdown":"is sorting allowed at all, or do u have to work the array is it is? because this feels like a string searching algorithm question","body":"is sorting allowed at all, or do u have to work the array is it is? because this feels like a string searching algorithm question"},{"owner":{"account_id":1497288,"reputation":666,"user_id":1402919,"accept_rate":100,"display_name":"dounyy"},"score":0,"creation_date":1352295370,"post_id":13270491,"comment_id":18088372,"body_markdown":"Well, I guess sorting is doing several passes over the array, so to me this option should be excluded.","body":"Well, I guess sorting is doing several passes over the array, so to me this option should be excluded."},{"owner":{"account_id":1036092,"reputation":8846,"user_id":1043352,"accept_rate":81,"display_name":"Jakub Zaverka"},"score":4,"creation_date":1352297280,"post_id":13270491,"comment_id":18089221,"body_markdown":"What is more important to you? Time or space efficiency?","body":"What is more important to you? Time or space efficiency?"},{"owner":{"account_id":327343,"reputation":151574,"user_id":649665,"accept_rate":71,"display_name":"James Kanze"},"score":0,"creation_date":1352299114,"post_id":13270491,"comment_id":18090084,"body_markdown":"@RanjanSarma Sorting, then merging is `O(n lg n)`.  Using unsorted arrays is `O(n^2)`.  Sorting will be a lot more efficient.","body":"@RanjanSarma Sorting, then merging is <code>O(n lg n)</code>.  Using unsorted arrays is <code>O(n^2)</code>.  Sorting will be a lot more efficient."},{"owner":{"account_id":7470,"reputation":274976,"user_id":13005,"accept_rate":75,"display_name":"Steve Jessop"},"score":1,"creation_date":1352300778,"post_id":13270491,"comment_id":18090959,"body_markdown":"Is the type of the arrays actually `char`? Some of the arguments in comments below could be resolved by putting some restrictions on the types. For example, all the stuff about expected `O(N)` with hash tables goes out the window if you don&#39;t have a reasonable hash function for the type (that&#39;s why Java encourages you to write one). Conversely with `char` and sufficiently large input, the fastest could be to create an array with one element for each character value (generally 256 or 65536), and use it to record which characters appear in each input.","body":"Is the type of the arrays actually <code>char</code>? Some of the arguments in comments below could be resolved by putting some restrictions on the types. For example, all the stuff about expected <code>O(N)</code> with hash tables goes out the window if you don&#39;t have a reasonable hash function for the type (that&#39;s why Java encourages you to write one). Conversely with <code>char</code> and sufficiently large input, the fastest could be to create an array with one element for each character value (generally 256 or 65536), and use it to record which characters appear in each input."},{"owner":{"account_id":64020,"reputation":107959,"user_id":189205,"display_name":"interjay"},"score":0,"creation_date":1352304041,"post_id":13270491,"comment_id":18092710,"body_markdown":"possible duplicate of [Efficient set intersection algorithm](http://stackoverflow.com/questions/497338/efficient-set-intersection-algorithm)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/497338/efficient-set-intersection-algorithm\">Efficient set intersection algorithm</a>"},{"owner":{"account_id":93655,"reputation":7413,"user_id":256108,"accept_rate":78,"display_name":"Nicholas"},"score":0,"creation_date":1352305084,"post_id":13270491,"comment_id":18093266,"body_markdown":"Do you care about duplicates? IE if A: [1,1,2] and B: [1,2], should the intersection be [1]?","body":"Do you care about duplicates? IE if A: [1,1,2] and B: [1,2], should the intersection be [1]?"},{"owner":{"account_id":232525,"reputation":176052,"user_id":497418,"accept_rate":76,"display_name":"zzzzBov"},"score":25,"creation_date":1352308862,"post_id":13270491,"comment_id":18095302,"body_markdown":"Without a clear definition of what &quot;best&quot; is, I propose this solution for sorting arrays: Print each array item on a slip of paper, and place each slip of paper in a clearly marked envelope. Mail the envelopes to your grandmother with instructions to return only the items that were included in both envelopes, along with some cookies. The solution isn&#39;t very fast as it&#39;s `O(USPS^grandmother)`, but it&#39;s best because cookies are awesome.","body":"Without a clear definition of what &quot;best&quot; is, I propose this solution for sorting arrays: Print each array item on a slip of paper, and place each slip of paper in a clearly marked envelope. Mail the envelopes to your grandmother with instructions to return only the items that were included in both envelopes, along with some cookies. The solution isn&#39;t very fast as it&#39;s <code>O(USPS^grandmother)</code>, but it&#39;s best because cookies are awesome."},{"owner":{"account_id":1880793,"reputation":737,"user_id":1701047,"display_name":"user1701047"},"score":0,"creation_date":1352317161,"post_id":13270491,"comment_id":18098879,"body_markdown":"I guess don&#39;t understand why you hash AND sort?  Your hash isn&#39;t guaranteed to be O(n) and the sorting may not be O(n log(n)) where n is the number of elements.  If you are not allowed to create any further data types and only compare, you will need to find the most efficient string comparing method and possibly employ tricks as a few have suggested.  If you aren&#39;t restricting on the creation of more data your best bet is a hash.  A binary tree of some kind might another one to do it.","body":"I guess don&#39;t understand why you hash AND sort?  Your hash isn&#39;t guaranteed to be O(n) and the sorting may not be O(n log(n)) where n is the number of elements.  If you are not allowed to create any further data types and only compare, you will need to find the most efficient string comparing method and possibly employ tricks as a few have suggested.  If you aren&#39;t restricting on the creation of more data your best bet is a hash.  A binary tree of some kind might another one to do it."},{"owner":{"account_id":2294362,"reputation":14383,"user_id":2016221,"accept_rate":86,"display_name":"rr-"},"score":0,"creation_date":1441716730,"post_id":13270491,"comment_id":52778652,"body_markdown":"@user1700184 what are you talking about? How is querying a HashSet O(1)?","body":"@user1700184 what are you talking about? How is querying a HashSet O(1)?"}],"answers":[{"comments":[{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":5,"creation_date":1352294509,"post_id":13270569,"comment_id":18087993,"body_markdown":"@Yola There isnâ€™t a faster-than-O(n) solution; there canâ€™t be.","body":"@Yola There isnâ€™t a faster-than-O(n) solution; there canâ€™t be."},{"owner":{"account_id":120445,"reputation":18614,"user_id":312896,"accept_rate":74,"display_name":"Yola"},"score":0,"creation_date":1352294549,"post_id":13270569,"comment_id":18088011,"body_markdown":"This solution not always O(N)","body":"This solution not always O(N)"},{"owner":{"account_id":278210,"reputation":176444,"user_id":572670,"accept_rate":92,"display_name":"amit"},"score":5,"creation_date":1352294598,"post_id":13270569,"comment_id":18088041,"body_markdown":"Note that there is still an issue with duplicates (how to handle it was not specified in the question), but often you want to print each element `min{#occurances(A),#occurances(B)}` or just once, while this solution prints them `#occurances(B)` times","body":"Note that there is still an issue with duplicates (how to handle it was not specified in the question), but often you want to print each element <code>min{#occurances(A),#occurances(B)}</code> or just once, while this solution prints them <code>#occurances(B)</code> times"},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":2,"creation_date":1352294624,"post_id":13270569,"comment_id":18088055,"body_markdown":"@Yola No. You can ensure that it is O(N) for limited domains. For non-limited domains you can still prove that it *almost certainly* is O(N), and you can even quantify that certainty.","body":"@Yola No. You can ensure that it is O(N) for limited domains. For non-limited domains you can still prove that it <i>almost certainly</i> is O(N), and you can even quantify that certainty."},{"owner":{"account_id":278210,"reputation":176444,"user_id":572670,"accept_rate":92,"display_name":"amit"},"score":0,"creation_date":1352294631,"post_id":13270569,"comment_id":18088059,"body_markdown":"@Yola: Assuming descent load balance for the hash table, the probability for getting the worst case is slim to none.","body":"@Yola: Assuming descent load balance for the hash table, the probability for getting the worst case is slim to none."},{"owner":{"account_id":120445,"reputation":18614,"user_id":312896,"accept_rate":74,"display_name":"Yola"},"score":0,"creation_date":1352294745,"post_id":13270569,"comment_id":18088114,"body_markdown":"@Konrad Rudolph, it depends on hash table - load factors, collisions resolving etc. Iwould not be so sure with this structure","body":"@Konrad Rudolph, it depends on hash table - load factors, collisions resolving etc. Iwould not be so sure with this structure"},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":6,"creation_date":1352294966,"post_id":13270569,"comment_id":18088194,"body_markdown":"@Yola We can wax poetry all day long. But you said â€œnot the fastest wayâ€ and this is wrong in practice (in the expected case it *is* the fastest solution) *and* in theory (if push comes to shove you can implement a schema that either makes non-linear performance *exceedingly* unlikely or even guarantees linear performance for a limited domain). Neither of these theoretically-perfect solutions is necessarily easy to ensure in typical use-cases, but then hashing is already the fastest solution for the typical use-case.","body":"@Yola We can wax poetry all day long. But you said â€œnot the fastest wayâ€ and this is wrong in practice (in the expected case it <i>is</i> the fastest solution) <i>and</i> in theory (if push comes to shove you can implement a schema that either makes non-linear performance <i>exceedingly</i> unlikely or even guarantees linear performance for a limited domain). Neither of these theoretically-perfect solutions is necessarily easy to ensure in typical use-cases, but then hashing is already the fastest solution for the typical use-case."},{"owner":{"account_id":120445,"reputation":18614,"user_id":312896,"accept_rate":74,"display_name":"Yola"},"score":0,"creation_date":1352295106,"post_id":13270569,"comment_id":18088268,"body_markdown":"@Konrad Rudolph, ok, i think its fastest, +1","body":"@Konrad Rudolph, ok, i think its fastest, +1"},{"owner":{"account_id":120445,"reputation":18614,"user_id":312896,"accept_rate":74,"display_name":"Yola"},"score":0,"creation_date":1352296723,"post_id":13270569,"comment_id":18088960,"body_markdown":"@Konrad Rudolph, but calculate hash may take much time isnt it? And search in hash table takes O(logN).","body":"@Konrad Rudolph, but calculate hash may take much time isnt it? And search in hash table takes O(logN)."},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":3,"creation_date":1352296827,"post_id":13270569,"comment_id":18089002,"body_markdown":"@Yola No, search in a hash table takes O(1). How long calculating the hash takes depends on the key type but itâ€™s usually not much slower than comparing two keys (which is required in a tree and in sorting). In particular, for simple `char` keys itâ€™s very fast.","body":"@Yola No, search in a hash table takes O(1). How long calculating the hash takes depends on the key type but itâ€™s usually not much slower than comparing two keys (which is required in a tree and in sorting). In particular, for simple <code>char</code> keys itâ€™s very fast."},{"owner":{"account_id":1036092,"reputation":8846,"user_id":1043352,"accept_rate":81,"display_name":"Jakub Zaverka"},"score":2,"creation_date":1352297032,"post_id":13270569,"comment_id":18089094,"body_markdown":"@Konrad Searches take O(n) time. Imagine a case where all elements have the same hash value, so you need to store them in a list.","body":"@Konrad Searches take O(n) time. Imagine a case where all elements have the same hash value, so you need to store them in a list."},{"owner":{"account_id":378721,"reputation":47508,"user_id":731620,"accept_rate":80,"display_name":"ratchet freak"},"score":1,"creation_date":1352297277,"post_id":13270569,"comment_id":18089218,"body_markdown":"to fix the duplicate prints just remove `ele` from `H` when you print it (and break out when it gets empty)","body":"to fix the duplicate prints just remove <code>ele</code> from <code>H</code> when you print it (and break out when it gets empty)"},{"owner":{"account_id":1977123,"reputation":265047,"user_id":1774667,"accept_rate":39,"display_name":"Yakk - Adam Nevraumont"},"score":3,"creation_date":1352297577,"post_id":13270569,"comment_id":18089369,"body_markdown":"Everything takes O(1) time if you limit the size of the dataset.  Hash lookups are O(1) on dataset sizes up to some limit, but so is factoring into primes.  Hashes are fast due to a small constant not big O notation.","body":"Everything takes O(1) time if you limit the size of the dataset.  Hash lookups are O(1) on dataset sizes up to some limit, but so is factoring into primes.  Hashes are fast due to a small constant not big O notation."},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":0,"creation_date":1352297659,"post_id":13270569,"comment_id":18089401,"body_markdown":"@Jakub Read the discussion we had up to this point. You can prevent such collisions. In the *expected* case (with very high probability), the *amortised* runtime is O(1) for a proper load factor. That is what matters. The worst-case time of O(N) for a single access is highly misleading for a general-purpose analysis.","body":"@Jakub Read the discussion we had up to this point. You can prevent such collisions. In the <i>expected</i> case (with very high probability), the <i>amortised</i> runtime is O(1) for a proper load factor. That is what matters. The worst-case time of O(N) for a single access is highly misleading for a general-purpose analysis."},{"owner":{"account_id":93655,"reputation":7413,"user_id":256108,"accept_rate":78,"display_name":"Nicholas"},"score":0,"creation_date":1352307676,"post_id":13270569,"comment_id":18094722,"body_markdown":"This does not handle duplicates. If you look at my solution, it&#39;s near the same as your, just using a Map instead of Set.","body":"This does not handle duplicates. If you look at my solution, it&#39;s near the same as your, just using a Map instead of Set."},{"owner":{"account_id":20180,"reputation":50570,"user_id":47984,"accept_rate":67,"display_name":"j_random_hacker"},"score":0,"creation_date":1352308949,"post_id":13270569,"comment_id":18095336,"body_markdown":"@KonradRudolph: Yakk is exactly right, O(1) hash lookups are a lie. To get a O(1) expected lookup time, calculating the hash function must also be O(1) amortised, meaning it must examine at most a constant number c of bits in each key on average. When more than 2^c distinct keys are added to a hashtable, no hash function can distinguish them all. If there are m2^c keys, a best-possible O(1) hash function will map m keys into each of the 2^c buckets, implying linear lookup times with a tiny constant, around 1/2^c.","body":"@KonradRudolph: Yakk is exactly right, O(1) hash lookups are a lie. To get a O(1) expected lookup time, calculating the hash function must also be O(1) amortised, meaning it must examine at most a constant number c of bits in each key on average. When more than 2^c distinct keys are added to a hashtable, no hash function can distinguish them all. If there are m2^c keys, a best-possible O(1) hash function will map m keys into each of the 2^c buckets, implying linear lookup times with a tiny constant, around 1/2^c."},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":1,"creation_date":1352322007,"post_id":13270569,"comment_id":18100921,"body_markdown":"@j_random_hacker This is very, **very** rarely relevant (but, I agree, it sometimes is). But if you insist on being pedantic here then I will acquiesce and must insist that lookup *is* O(1). Asymptotic performance analysis is performed on a theoretical machine which has elementary operations whose runtime is defined as O(1), including elementary integer operations. By implication, hash table lookup is O(1), regardless of whether you count number of hashing operations, number of comparisons or number of other operations. (continued â€¦)","body":"@j_random_hacker This is very, <b>very</b> rarely relevant (but, I agree, it sometimes is). But if you insist on being pedantic here then I will acquiesce and must insist that lookup <i>is</i> O(1). Asymptotic performance analysis is performed on a theoretical machine which has elementary operations whose runtime is defined as O(1), including elementary integer operations. By implication, hash table lookup is O(1), regardless of whether you count number of hashing operations, number of comparisons or number of other operations. (continued â€¦)"},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":1,"creation_date":1352322099,"post_id":13270569,"comment_id":18100955,"body_markdown":"@j_random_hacker (continued) You *can* analyse the runtime as O(k) where k is the maximum length of the keys. This isnâ€™t necessarily O(N) though (k is independent from N in the general case). Furthermore, what we were comparing here was (implicitly!) the performance of hash tables relative to other methods of implementing OPâ€™s algorithm. And if you insist that hash table lookup is O(N) then you run into the same behaviour in comparison-based methods, so your complication of the analysis gains you nothing. O(1) lookup performance is not a lie, itâ€™s a model. Can we now *please* bury this?","body":"@j_random_hacker (continued) You <i>can</i> analyse the runtime as O(k) where k is the maximum length of the keys. This isnâ€™t necessarily O(N) though (k is independent from N in the general case). Furthermore, what we were comparing here was (implicitly!) the performance of hash tables relative to other methods of implementing OPâ€™s algorithm. And if you insist that hash table lookup is O(N) then you run into the same behaviour in comparison-based methods, so your complication of the analysis gains you nothing. O(1) lookup performance is not a lie, itâ€™s a model. Can we now <i>please</i> bury this?"},{"owner":{"account_id":1381576,"reputation":1565,"user_id":1314439,"accept_rate":62,"display_name":"Ranjan Sarma"},"score":1,"creation_date":1352378749,"post_id":13270569,"comment_id":18119240,"body_markdown":"We are using a Hash which hides an iteration that equals an iteration to array. Hash has to iterate through itself before saying that &quot;I already have this object&quot; or &quot;I donot have this object brother&quot;.","body":"We are using a Hash which hides an iteration that equals an iteration to array. Hash has to iterate through itself before saying that &quot;I already have this object&quot; or &quot;I donot have this object brother&quot;."}],"tags":[],"owner":{"account_id":80529,"reputation":448258,"user_id":227665,"accept_rate":33,"display_name":"codaddict"},"comment_count":19,"down_vote_count":0,"up_vote_count":109,"is_accepted":false,"score":109,"last_activity_date":1352839789,"creation_date":1352294123,"answer_id":13270569,"question_id":13270491,"body_markdown":"    foreach element e in array A\r\n        insert e into hash table H\r\n    \r\n    foreach element e in array B\r\n        if H contains e \r\n            print e\r\n      \r\n\r\nThis algorithm is `O(N)` in time and `O(N)` in space. \r\n\r\nTo avoid the extra space, you can use the sorting based approach.","title":"How do I get the intersection between two arrays as a new array?","body":"<pre><code>foreach element e in array A\n    insert e into hash table H\n\nforeach element e in array B\n    if H contains e \n        print e\n</code></pre>\n\n<p>This algorithm is <code>O(N)</code> in time and <code>O(N)</code> in space. </p>\n\n<p>To avoid the extra space, you can use the sorting based approach.</p>\n"},{"comments":[{"owner":{"account_id":278210,"reputation":176444,"user_id":572670,"accept_rate":92,"display_name":"amit"},"score":5,"creation_date":1352299535,"post_id":13270580,"comment_id":18090306,"body_markdown":"It can be improved to `O(NlogM)` (N is the length of the larger arra, M is the shorter) by sorting the shorter array alone, and iterating+binary searching each element in the longer array.","body":"It can be improved to <code>O(NlogM)</code> (N is the length of the larger arra, M is the shorter) by sorting the shorter array alone, and iterating+binary searching each element in the longer array."}],"tags":[],"owner":{"account_id":1331302,"reputation":118777,"user_id":1275169,"accept_rate":71,"display_name":"P.P"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1352294152,"creation_date":1352294152,"answer_id":13270580,"question_id":13270491,"body_markdown":"1. Sort both the arrays.  \r\n2. Then do loop until they have have elements common Or one of the arrays reaches its end.\r\n\r\nAsymptotically, this takes the complexity of sorting. i.e. O(NlogN) where N is the length of longer input array.","title":"How do I get the intersection between two arrays as a new array?","body":"<ol>\n<li>Sort both the arrays.  </li>\n<li>Then do loop until they have have elements common Or one of the arrays reaches its end.</li>\n</ol>\n\n<p>Asymptotically, this takes the complexity of sorting. i.e. O(NlogN) where N is the length of longer input array.</p>\n"},{"comments":[{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":1,"creation_date":1352294595,"post_id":13270639,"comment_id":18088039,"body_markdown":"Depends. For a small number of data points (~ less than 15) arrays *are* the fastest data structure for searching.","body":"Depends. For a small number of data points (~ less than 15) arrays <i>are</i> the fastest data structure for searching."},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":0,"creation_date":1352295092,"post_id":13270639,"comment_id":18088262,"body_markdown":"â€¦ incidentally, `Set` in Java is an interface and can be implemented by a linear array.","body":"â€¦ incidentally, <code>Set</code> in Java is an interface and can be implemented by a linear array."}],"tags":[],"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1352294336,"creation_date":1352294336,"answer_id":13270639,"question_id":13270491,"body_markdown":"The best way is not to start with arrays at all. Arrays are optimal for random access to elements, but not optimal for searching (which is what finding the intersection is all about). As you are talking about _intersection_, you must be regarding the arrays as sets. So use a more appropriate data structure (in Java, a `Set`). Then the task is much more efficient.","title":"How do I get the intersection between two arrays as a new array?","body":"<p>The best way is not to start with arrays at all. Arrays are optimal for random access to elements, but not optimal for searching (which is what finding the intersection is all about). As you are talking about <em>intersection</em>, you must be regarding the arrays as sets. So use a more appropriate data structure (in Java, a <code>Set</code>). Then the task is much more efficient.</p>\n"},{"comments":[{"owner":{"account_id":278210,"reputation":176444,"user_id":572670,"accept_rate":92,"display_name":"amit"},"score":3,"creation_date":1352294909,"post_id":13270765,"comment_id":18088169,"body_markdown":"trees are very inefficient for constant data relative to sorting solutions. The main reason for it is cache - arrays are MUCH more cache efficient then trees. (Though it is `O(nlogn)`, same as sort and iterate, the hidden constants will be much higher)","body":"trees are very inefficient for constant data relative to sorting solutions. The main reason for it is cache - arrays are MUCH more cache efficient then trees. (Though it is <code>O(nlogn)</code>, same as sort and iterate, the hidden constants will be much higher)"}],"tags":[],"owner":{"account_id":120445,"reputation":18614,"user_id":312896,"accept_rate":74,"display_name":"Yola"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1352294825,"creation_date":1352294825,"answer_id":13270765,"question_id":13270491,"body_markdown":"You can use tree, but time will be O(n(log n)) and elements must be comparable","title":"How do I get the intersection between two arrays as a new array?","body":"<p>You can use tree, but time will be O(n(log n)) and elements must be comparable</p>\n"},{"comments":[{"owner":{"account_id":97652,"reputation":11676,"user_id":264775,"accept_rate":86,"display_name":"thegrinner"},"score":1,"creation_date":1352305133,"post_id":13270831,"comment_id":18093290,"body_markdown":"Python can do this as well with [sets](http://docs.python.org/2/library/stdtypes.html#set.intersection). I imagine many languages also have a set type that can handle this.","body":"Python can do this as well with <a href=\"http://docs.python.org/2/library/stdtypes.html#set.intersection\" rel=\"nofollow noreferrer\">sets</a>. I imagine many languages also have a set type that can handle this."},{"owner":{"account_id":75493,"reputation":33415,"user_id":216517,"accept_rate":76,"display_name":"st0le"},"score":0,"creation_date":1352363148,"post_id":13270831,"comment_id":18112498,"body_markdown":"I can bet `retainAll` of an Arraylist (infact all of the List implementation in std java) does a O(n^2).","body":"I can bet <code>retainAll</code> of an Arraylist (infact all of the List implementation in std java) does a O(n^2)."}],"tags":[],"owner":{"account_id":1424920,"reputation":47863,"user_id":1348709,"accept_rate":73,"display_name":"Mike"},"comment_count":2,"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1527067323,"creation_date":1352295145,"answer_id":13270831,"question_id":13270491,"body_markdown":"There are a few methods in some languages that I&#39;m aware of that do exactly what you want, have you considered looking at some of these implementations?\r\n\r\nPHP - &lt;a href=&quot;http://php.net/manual/en/function.array-intersect.php&quot;&gt;array_intersect()&lt;/a&gt;\r\n\r\n    $array1 = array(&quot;a&quot; =&gt; &quot;green&quot;, &quot;red&quot;, &quot;blue&quot;);\r\n    $array2 = array(&quot;b&quot; =&gt; &quot;green&quot;, &quot;yellow&quot;, &quot;red&quot;);\r\n    $result = array_intersect($array1, $array2);\r\n    print_r($result);\r\n\r\n    &gt;&gt; green\r\n       red\r\n\r\n\r\nJava - [List.retainAll][1]\r\n\r\n    Collection listOne = new ArrayList(Arrays.asList(&quot;milan&quot;,&quot;dingo&quot;, &quot;elpha&quot;, &quot;hafil&quot;, &quot;meat&quot;, &quot;iga&quot;, &quot;neeta.peeta&quot;));\r\n    Collection listTwo = new ArrayList(Arrays.asList(&quot;hafil&quot;, &quot;iga&quot;, &quot;binga&quot;, &quot;mike&quot;, &quot;dingo&quot;));\r\n\r\n    listOne.retainAll( listTwo );\r\n    System.out.println( listOne );\r\n\r\n    &gt;&gt; dingo, hafil, iga\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/List.html#retainAll-java.util.Collection-","title":"How do I get the intersection between two arrays as a new array?","body":"<p>There are a few methods in some languages that I'm aware of that do exactly what you want, have you considered looking at some of these implementations?</p>\n\n<p>PHP - <a href=\"http://php.net/manual/en/function.array-intersect.php\" rel=\"nofollow noreferrer\">array_intersect()</a></p>\n\n<pre><code>$array1 = array(\"a\" =&gt; \"green\", \"red\", \"blue\");\n$array2 = array(\"b\" =&gt; \"green\", \"yellow\", \"red\");\n$result = array_intersect($array1, $array2);\nprint_r($result);\n\n&gt;&gt; green\n   red\n</code></pre>\n\n<p>Java - <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/List.html#retainAll-java.util.Collection-\" rel=\"nofollow noreferrer\">List.retainAll</a></p>\n\n<pre><code>Collection listOne = new ArrayList(Arrays.asList(\"milan\",\"dingo\", \"elpha\", \"hafil\", \"meat\", \"iga\", \"neeta.peeta\"));\nCollection listTwo = new ArrayList(Arrays.asList(\"hafil\", \"iga\", \"binga\", \"mike\", \"dingo\"));\n\nlistOne.retainAll( listTwo );\nSystem.out.println( listOne );\n\n&gt;&gt; dingo, hafil, iga\n</code></pre>\n"},{"comments":[{"owner":{"account_id":278210,"reputation":176444,"user_id":572670,"accept_rate":92,"display_name":"amit"},"score":1,"creation_date":1352300057,"post_id":13270836,"comment_id":18090562,"body_markdown":"But why do a `O(n*m)` complicated solution when there are `O(n+m)` and `O(nlog(m))` ones? :|","body":"But why do a <code>O(n*m)</code> complicated solution when there are <code>O(n+m)</code> and <code>O(nlog(m))</code> ones? :|"},{"owner":{"account_id":158872,"reputation":2509,"user_id":377816,"accept_rate":81,"display_name":"Moataz Elmasry"},"score":0,"creation_date":1352308004,"post_id":13270836,"comment_id":18094888,"body_markdown":"@amit the dynamic programming solution takes O(n*m), which one takes O(n+m)? for O(nlog(m))  solution I assume you are talking about sorting, right? which is something I chose to ignore","body":"@amit the dynamic programming solution takes O(n*m), which one takes O(n+m)? for O(nlog(m))  solution I assume you are talking about sorting, right? which is something I chose to ignore"},{"owner":{"account_id":1086944,"reputation":2074,"user_id":1082441,"accept_rate":58,"display_name":"srbhkmr"},"score":1,"creation_date":1352839745,"post_id":13270836,"comment_id":18252444,"body_markdown":"How LCS will give intersection of 2 strings? We might miss out on many characters. for e.g. s1=[A B D C E F] and s2=[C D E F G H] here, LCS will be [D E F] while intersection of 2strings is [C D E F]! Am I missing something here?","body":"How LCS will give intersection of 2 strings? We might miss out on many characters. for e.g. s1=[A B D C E F] and s2=[C D E F G H] here, LCS will be [D E F] while intersection of 2strings is [C D E F]! Am I missing something here?"},{"owner":{"account_id":355024,"reputation":1803,"user_id":693716,"accept_rate":83,"display_name":"Gabriel"},"score":0,"creation_date":1352852096,"post_id":13270836,"comment_id":18256971,"body_markdown":"srbh.kmr, no, you&#39;re not, that&#39;s the LCS. This is even a simpler example where the LCS doesn&#39;t work:\nchar[] A = {&#39;a&#39;, &#39;b&#39;};\nchar[] B = {&#39;b&#39;, &#39;a&#39;};\nLCS gives either {&#39;a&#39;} or {&#39;b&#39;}, depending on the implementation, because it looks for a sequence of characters that appears in the same order in both arrays.","body":"srbh.kmr, no, you&#39;re not, that&#39;s the LCS. This is even a simpler example where the LCS doesn&#39;t work: char[] A = {&#39;a&#39;, &#39;b&#39;}; char[] B = {&#39;b&#39;, &#39;a&#39;}; LCS gives either {&#39;a&#39;} or {&#39;b&#39;}, depending on the implementation, because it looks for a sequence of characters that appears in the same order in both arrays."},{"owner":{"account_id":158872,"reputation":2509,"user_id":377816,"accept_rate":81,"display_name":"Moataz Elmasry"},"score":1,"creation_date":1352853387,"post_id":13270836,"comment_id":18257260,"body_markdown":"srbh.kmr, @Gabriel, I disagree with your example. this is not a shortcoming of LCS, but of your example(s), the two inputs simply have to share the exact common sequence in order to find a match. usually its run from left ti right, but you can do it in the other direction. the algorithm searches for the common sequence and just the common characters, so &quot;one&quot; has at most one letter match with &quot;eno&quot;. This is what the algorithm does and not a disadvantage of it","body":"srbh.kmr, @Gabriel, I disagree with your example. this is not a shortcoming of LCS, but of your example(s), the two inputs simply have to share the exact common sequence in order to find a match. usually its run from left ti right, but you can do it in the other direction. the algorithm searches for the common sequence and just the common characters, so &quot;one&quot; has at most one letter match with &quot;eno&quot;. This is what the algorithm does and not a disadvantage of it"},{"owner":{"account_id":1201249,"reputation":173,"user_id":1171869,"display_name":"jace"},"score":2,"creation_date":1352880639,"post_id":13270836,"comment_id":18263261,"body_markdown":"LCS doesn&#39;t give the right answer for this problem, the algorithm works on string where the order matters, In this case the intersection  is always on sets, where order doesn&#39;t matter. The simple example of @Gabriel is right on the spot, we would need more assumptions on the input data for this to work. The hash answer is probably the best given the ordering constraint.","body":"LCS doesn&#39;t give the right answer for this problem, the algorithm works on string where the order matters, In this case the intersection  is always on sets, where order doesn&#39;t matter. The simple example of @Gabriel is right on the spot, we would need more assumptions on the input data for this to work. The hash answer is probably the best given the ordering constraint."},{"owner":{"account_id":158872,"reputation":2509,"user_id":377816,"accept_rate":81,"display_name":"Moataz Elmasry"},"score":0,"creation_date":1352891630,"post_id":13270836,"comment_id":18267767,"body_markdown":"well as I explained in my answer,the assumption is that the OP is trying to find a pattern/substring in a certain string, and so the order matters, else the answer of @codaddict is the correct one","body":"well as I explained in my answer,the assumption is that the OP is trying to find a pattern/substring in a certain string, and so the order matters, else the answer of @codaddict is the correct one"},{"owner":{"account_id":355024,"reputation":1803,"user_id":693716,"accept_rate":83,"display_name":"Gabriel"},"score":4,"creation_date":1352929080,"post_id":13270836,"comment_id":18285512,"body_markdown":"Well, the OP asked for the intersection between the two arrays. Intersection is a concept from set theory, and sets (by definition) not dependent on the order of its elements. I&#39;m not saying that LCS is bad for some reason. I just claim it does not give you the intersection. It&#39;s an algorithm that solves a problem, but not the (set) intersection problem. If the arrays aren&#39;t to be considered as sets, then ok, but then you are probably not asking for a true intersection. But I understand the point of your assumption: if it&#39;s an array, it&#39;s more to a string than to a set.","body":"Well, the OP asked for the intersection between the two arrays. Intersection is a concept from set theory, and sets (by definition) not dependent on the order of its elements. I&#39;m not saying that LCS is bad for some reason. I just claim it does not give you the intersection. It&#39;s an algorithm that solves a problem, but not the (set) intersection problem. If the arrays aren&#39;t to be considered as sets, then ok, but then you are probably not asking for a true intersection. But I understand the point of your assumption: if it&#39;s an array, it&#39;s more to a string than to a set."}],"tags":[],"owner":{"account_id":158872,"reputation":2509,"user_id":377816,"accept_rate":81,"display_name":"Moataz Elmasry"},"comment_count":8,"down_vote_count":6,"up_vote_count":18,"is_accepted":true,"score":12,"last_activity_date":1352295167,"creation_date":1352295167,"answer_id":13270836,"question_id":13270491,"body_markdown":"Since this looks to me like a string algorithm, I&#39;ll assume for a moment that its not possible to sort this sequence (hence string) then you can use [Longest Common Sequence algorithm (LCS)][1]\r\n\r\nAssuming the input size is constant, then the problem has a complexity of O(nxm), (length of the two inputs)\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Longest_common_subsequence_problem","title":"How do I get the intersection between two arrays as a new array?","body":"<p>Since this looks to me like a string algorithm, I'll assume for a moment that its not possible to sort this sequence (hence string) then you can use <a href=\"http://en.wikipedia.org/wiki/Longest_common_subsequence_problem\">Longest Common Sequence algorithm (LCS)</a></p>\n\n<p>Assuming the input size is constant, then the problem has a complexity of O(nxm), (length of the two inputs)</p>\n"},{"comments":[{"owner":{"account_id":26728,"reputation":50262,"user_id":69809,"accept_rate":96,"display_name":"vgru"},"score":0,"creation_date":1352296102,"post_id":13271020,"comment_id":18088687,"body_markdown":"Performance will be slightly less than optimal, since you don&#39;t actualy need to create the second set just to check if it contains elements from the second one.","body":"Performance will be slightly less than optimal, since you don&#39;t actualy need to create the second set just to check if it contains elements from the second one."},{"owner":{"account_id":1339372,"reputation":18345,"user_id":1281385,"accept_rate":72,"display_name":"exussum"},"score":0,"creation_date":1352305968,"post_id":13271020,"comment_id":18093768,"body_markdown":"I would also check the size, if b is huge and a is small, your code will run slower checking over the larger set","body":"I would also check the size, if b is huge and a is small, your code will run slower checking over the larger set"},{"owner":{"account_id":961739,"reputation":21941,"user_id":985949,"accept_rate":87,"display_name":"Mik378"},"score":0,"creation_date":1352308445,"post_id":13271020,"comment_id":18095082,"body_markdown":"@user1281385 But in this case, dealing with characters, `contains()` is always of O(1) complexity whatever the size of the set.","body":"@user1281385 But in this case, dealing with characters, <code>contains()</code> is always of O(1) complexity whatever the size of the set."}],"tags":[],"owner":{"account_id":961739,"reputation":21941,"user_id":985949,"accept_rate":87,"display_name":"Mik378"},"comment_count":3,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1352297925,"creation_date":1352295761,"answer_id":13271020,"question_id":13270491,"body_markdown":"        public static void main(String[] args) {\r\n            char[] a = {&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;};\r\n            char[] b = {&#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;};\r\n            System.out.println(intersect(a, b));\r\n        }\r\n    \r\n        private static Set&lt;Character&gt; intersect(char[] a, char[] b) {\r\n            Set&lt;Character&gt; aSet = new HashSet&lt;Character&gt;();\r\n            Set&lt;Character&gt; intersection = new HashSet&lt;Character&gt;();\r\n            for (char c : a) {\r\n                aSet.add(c);\r\n            }\r\n            for (char c : b) {\r\n                if (aSet.contains(c)) {\r\n                    intersection.add(c);\r\n                }\r\n            }\r\n            return intersection;\r\n        }","title":"How do I get the intersection between two arrays as a new array?","body":"<pre><code>    public static void main(String[] args) {\n        char[] a = {'a', 'b', 'c', 'd'};\n        char[] b = {'c', 'd', 'e', 'f'};\n        System.out.println(intersect(a, b));\n    }\n\n    private static Set&lt;Character&gt; intersect(char[] a, char[] b) {\n        Set&lt;Character&gt; aSet = new HashSet&lt;Character&gt;();\n        Set&lt;Character&gt; intersection = new HashSet&lt;Character&gt;();\n        for (char c : a) {\n            aSet.add(c);\n        }\n        for (char c : b) {\n            if (aSet.contains(c)) {\n                intersection.add(c);\n            }\n        }\n        return intersection;\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":278210,"reputation":176444,"user_id":572670,"accept_rate":92,"display_name":"amit"},"score":1,"creation_date":1352299246,"post_id":13271619,"comment_id":18090155,"body_markdown":"There is no need in rehashing since the length of the array can be precalculated, and you can create the hash table of size `n * LF^-1`, where `LF` is your pre-determined load factor. The complexity is `O(1)` per op for any `LF &lt; 1`, and not `O(n^LF)`, because the expected number of reads you will need is `E= 1 + 1*LF + 1*LF^2 + ... + 1*LF^n &lt; CONSTANT` (sum of geometric series), so each op is `O(1)`. That said, the worst case of hash tables is still `O(n)` per op, but the average case will be `O(1)`","body":"There is no need in rehashing since the length of the array can be precalculated, and you can create the hash table of size <code>n * LF^-1</code>, where <code>LF</code> is your pre-determined load factor. The complexity is <code>O(1)</code> per op for any <code>LF &lt; 1</code>, and not <code>O(n^LF)</code>, because the expected number of reads you will need is <code>E= 1 + 1*LF + 1*LF^2 + ... + 1*LF^n &lt; CONSTANT</code> (sum of geometric series), so each op is <code>O(1)</code>. That said, the worst case of hash tables is still <code>O(n)</code> per op, but the average case will be <code>O(1)</code>"},{"owner":{"account_id":278210,"reputation":176444,"user_id":572670,"accept_rate":92,"display_name":"amit"},"score":0,"creation_date":1352299592,"post_id":13271619,"comment_id":18090339,"body_markdown":"Also, sorting approach can be done in `O(NlogM)`, where N is the length of the longer array and M is the length of the shorter one.","body":"Also, sorting approach can be done in <code>O(NlogM)</code>, where N is the length of the longer array and M is the length of the shorter one."},{"owner":{"account_id":1036092,"reputation":8846,"user_id":1043352,"accept_rate":81,"display_name":"Jakub Zaverka"},"score":1,"creation_date":1352299883,"post_id":13271619,"comment_id":18090482,"body_markdown":"@amit I agree, but rehash still be needed if there is a collision in the table.","body":"@amit I agree, but rehash still be needed if there is a collision in the table."},{"owner":{"account_id":278210,"reputation":176444,"user_id":572670,"accept_rate":92,"display_name":"amit"},"score":0,"creation_date":1352299995,"post_id":13271619,"comment_id":18090528,"body_markdown":"If you assume rehashing solution for collisions (and not chaining or linear open addressing) - then yes. But it will be `O(n)` average case and not `O(n^LF)`.","body":"If you assume rehashing solution for collisions (and not chaining or linear open addressing) - then yes. But it will be <code>O(n)</code> average case and not <code>O(n^LF)</code>."},{"owner":{"account_id":1036092,"reputation":8846,"user_id":1043352,"accept_rate":81,"display_name":"Jakub Zaverka"},"score":0,"creation_date":1352300290,"post_id":13271619,"comment_id":18090688,"body_markdown":"@amit That&#39;s what I am saying. The O(n^x) is for the case where there is no rehashing and collisions are solved by chaining or by another method.","body":"@amit That&#39;s what I am saying. The O(n^x) is for the case where there is no rehashing and collisions are solved by chaining or by another method."},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":0,"creation_date":1352303109,"post_id":13271619,"comment_id":18092225,"body_markdown":"Providing the worst case of lookup without an analysis of the *likelihood* is misleading and useless (unless you are explicitly searching for vulnerabilities to malicious input). In fact, the likelihood of this happening by chance (with a well-designed hash table!) is so exceedingly small that it can be safely disregarded. Your answer makes it sound as if expected value of `x` is close to 1.5 (and uniformly distributed between 1 and 2) when in fact itâ€™s very close to 1. The same is true for double hashing. Iâ€™ve forgotten how to analyse this but there is a formalism to prove this.","body":"Providing the worst case of lookup without an analysis of the <i>likelihood</i> is misleading and useless (unless you are explicitly searching for vulnerabilities to malicious input). In fact, the likelihood of this happening by chance (with a well-designed hash table!) is so exceedingly small that it can be safely disregarded. Your answer makes it sound as if expected value of <code>x</code> is close to 1.5 (and uniformly distributed between 1 and 2) when in fact itâ€™s very close to 1. The same is true for double hashing. Iâ€™ve forgotten how to analyse this but there is a formalism to prove this."},{"owner":{"account_id":1036092,"reputation":8846,"user_id":1043352,"accept_rate":81,"display_name":"Jakub Zaverka"},"score":2,"creation_date":1352303371,"post_id":13271619,"comment_id":18092359,"body_markdown":"@Konrad I don&#39;t deny that. I just operate on strict time complexity, the worst case scenarios.","body":"@Konrad I don&#39;t deny that. I just operate on strict time complexity, the worst case scenarios."},{"owner":{"account_id":2000334,"reputation":7336,"user_id":1791546,"accept_rate":68,"display_name":"Shridutt Kothari"},"score":0,"creation_date":1410524756,"post_id":13271619,"comment_id":40369653,"body_markdown":"Rehashing concept was ignored in solution mentioned above by codadict.","body":"Rehashing concept was ignored in solution mentioned above by codadict."}],"tags":[],"owner":{"account_id":1036092,"reputation":8846,"user_id":1043352,"accept_rate":81,"display_name":"Jakub Zaverka"},"comment_count":8,"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1352328677,"creation_date":1352298058,"answer_id":13271619,"question_id":13270491,"body_markdown":"The lower bound on efficiency is O(n) - you need to at least read all the elements.\r\nThen there are several apporaches:\r\n\r\nDumb simplest approach\r\n--------------------------\r\n\r\nSearch for every element from array one in array two. Time complexity O(n^2).\r\n\r\nSorting approach\r\n----------------\r\n\r\nYou need to sort only array one, then search for elements from array two using binary search. Time complexity: sorting O(nlogn), searching O(n * logn) = O(nlogn), total O(nlogn).\r\n\r\nHash approach\r\n-------------\r\n\r\nCreate a hash table from array one elements. Search for elements form second table in the hash table. The time complexity depends on the hash function. You can achieve O(1) for searches in the optimal case (all elements will have different hash value), but O(n) in the worst case (all elements will have the same hash value). Total time complexity: O(n^x), where x is a factor of hash function efficiency (between 1 and 2).\r\n\r\nSome hash functions are guaranteed to build a table with no collisions. But the building no longer takes strictly O(1) time for every element. It will be O(1) in most cases, but if the table is full or a collision is encountered, then the table needs to be rehashed - taking O(n) time. This happens not so often, much less frequently than clean adds. So the AMORTISED time complexity is O(1). We don&#39;t care about some of the adds taking O(n) time, as long as the majority of adds takes O(1) time.\r\n\r\nBut even so, in an extreme case, the table must be rehashed every single insertion, so the strict time complexity would be O(n^2)","title":"How do I get the intersection between two arrays as a new array?","body":"<p>The lower bound on efficiency is O(n) - you need to at least read all the elements.\nThen there are several apporaches:</p>\n\n<h2>Dumb simplest approach</h2>\n\n<p>Search for every element from array one in array two. Time complexity O(n^2).</p>\n\n<h2>Sorting approach</h2>\n\n<p>You need to sort only array one, then search for elements from array two using binary search. Time complexity: sorting O(nlogn), searching O(n * logn) = O(nlogn), total O(nlogn).</p>\n\n<h2>Hash approach</h2>\n\n<p>Create a hash table from array one elements. Search for elements form second table in the hash table. The time complexity depends on the hash function. You can achieve O(1) for searches in the optimal case (all elements will have different hash value), but O(n) in the worst case (all elements will have the same hash value). Total time complexity: O(n^x), where x is a factor of hash function efficiency (between 1 and 2).</p>\n\n<p>Some hash functions are guaranteed to build a table with no collisions. But the building no longer takes strictly O(1) time for every element. It will be O(1) in most cases, but if the table is full or a collision is encountered, then the table needs to be rehashed - taking O(n) time. This happens not so often, much less frequently than clean adds. So the AMORTISED time complexity is O(1). We don't care about some of the adds taking O(n) time, as long as the majority of adds takes O(1) time.</p>\n\n<p>But even so, in an extreme case, the table must be rehashed every single insertion, so the strict time complexity would be O(n^2)</p>\n"},{"tags":[],"owner":{"account_id":205044,"reputation":22510,"user_id":453590,"accept_rate":100,"display_name":"haylem"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1475043285,"creation_date":1352298951,"answer_id":13271878,"question_id":13270491,"body_markdown":"# Google Guava\n\nThere are already many good answers to this, but if you want the one-liner approach using a library for lazy-coding, I&#39;d go with [Google Guava][1] (for Java) and its [`Sets.intersection`](http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/Sets.html#intersection(java.util.Set,%20java.util.Set)) method.\n\n_&lt;sup&gt;(no compiler at hand, bear with me)&lt;/sup&gt;_\r\n\r\n    char[] A = {&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;};\r\n    char[] B = {&#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;};\r\n\r\n    Set&lt;Character&gt; intersection = Sets.intersection(\r\n        Sets.newHashSet&lt;Character&gt;(Chars.asList(a)),\r\n        Sets.newHashSet&lt;Character&gt;(Chars.asList(b))\r\n    );\r\n\r\nObviously, this is assuming both arrays wouldn&#39;t have duplicates, in which case using a set data structure would make more sense and allow for this sort of operation more efficiently, especially if you don&#39;t start from an array of primitives from the start.\r\n\r\nMay or may not fit your use case, but sort of the no-brainer approach for the general case.\r\n\r\n  [1]: http://code.google.com/p/guava-libraries/","title":"How do I get the intersection between two arrays as a new array?","body":"<h1>Google Guava</h1>\n\n<p>There are already many good answers to this, but if you want the one-liner approach using a library for lazy-coding, I'd go with <a href=\"http://code.google.com/p/guava-libraries/\" rel=\"nofollow\">Google Guava</a> (for Java) and its <a href=\"http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/Sets.html#intersection(java.util.Set,%20java.util.Set)\" rel=\"nofollow\"><code>Sets.intersection</code></a> method.</p>\n\n<p><em><sup>(no compiler at hand, bear with me)</sup></em></p>\n\n<pre><code>char[] A = {'a', 'b', 'c', 'd'};\nchar[] B = {'c', 'd', 'e', 'f'};\n\nSet&lt;Character&gt; intersection = Sets.intersection(\n    Sets.newHashSet&lt;Character&gt;(Chars.asList(a)),\n    Sets.newHashSet&lt;Character&gt;(Chars.asList(b))\n);\n</code></pre>\n\n<p>Obviously, this is assuming both arrays wouldn't have duplicates, in which case using a set data structure would make more sense and allow for this sort of operation more efficiently, especially if you don't start from an array of primitives from the start.</p>\n\n<p>May or may not fit your use case, but sort of the no-brainer approach for the general case.</p>\n"},{"tags":[],"owner":{"account_id":93655,"reputation":7413,"user_id":256108,"accept_rate":78,"display_name":"Nicholas"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1352306390,"creation_date":1352306390,"answer_id":13274144,"question_id":13270491,"body_markdown":"If you care about duplicates, use a hash map to index list A, with the key being the element, and the value being a number of how many times that element has been seen. \r\n\r\nYou iterate through the first and for every element in A and if it does not exist in the map, put it in there with a value of 1, if it already exists in the map, add one to that value.\r\n\r\nNext, iterate through B, and if the value exists, subtract 1. If not, put -1 in the value on the table for that element.\r\n\r\nFinally, iterate through the map and for any element that has a value != 0, print out as a difference.\r\n\r\n    private static &lt;T&gt; List&lt;T&gt; intersectArrays(List&lt;T&gt; a, List&lt;T&gt; b) {\r\n        Map&lt;T, Long&gt; intersectionCountMap = new HashMap&lt;T, Long&gt;((((Math.max(a.size(), b.size()))*4)/3)+1);\r\n        List&lt;T&gt; returnList = new LinkedList&lt;T&gt;();\r\n        for(T element : a) {\r\n            Long count = intersectionCountMap.get(element);\r\n            if (count != null) {\r\n                intersectionCountMap.put(element, count+1);\r\n            } else {\r\n                intersectionCountMap.put(element, 1L);\r\n            }\r\n        }\r\n        for (T element : b) {\r\n            Long count = intersectionCountMap.get(element);\r\n            if (count != null) {\r\n                intersectionCountMap.put(element, count-1);\r\n            } else {\r\n                intersectionCountMap.put(element, -1L);\r\n            }            \r\n        }\r\n        for(T key : intersectionCountMap.keySet()) {\r\n            Long count = intersectionCountMap.get(key);\r\n            if (count != null &amp;&amp; count != 0) {\r\n                for(long i = 0; i &lt; count; i++) {\r\n                    returnList.add(key);\r\n                }\r\n            }\r\n        }\r\n        return returnList;\r\n    }\r\n\r\nThis should run in `O(n)`, as we&#39;re only iterating the Lists each once, and the Map once. The Data structures here used in Java should be efficient, as the `HashMap` is constructed with a capacity that can handle the largest size of the lists. \r\n\r\nI&#39;m using a `LinkedList` for the return as it provides us a way of adding and iterating through a list for our unknown sized intersection.","title":"How do I get the intersection between two arrays as a new array?","body":"<p>If you care about duplicates, use a hash map to index list A, with the key being the element, and the value being a number of how many times that element has been seen. </p>\n\n<p>You iterate through the first and for every element in A and if it does not exist in the map, put it in there with a value of 1, if it already exists in the map, add one to that value.</p>\n\n<p>Next, iterate through B, and if the value exists, subtract 1. If not, put -1 in the value on the table for that element.</p>\n\n<p>Finally, iterate through the map and for any element that has a value != 0, print out as a difference.</p>\n\n<pre><code>private static &lt;T&gt; List&lt;T&gt; intersectArrays(List&lt;T&gt; a, List&lt;T&gt; b) {\n    Map&lt;T, Long&gt; intersectionCountMap = new HashMap&lt;T, Long&gt;((((Math.max(a.size(), b.size()))*4)/3)+1);\n    List&lt;T&gt; returnList = new LinkedList&lt;T&gt;();\n    for(T element : a) {\n        Long count = intersectionCountMap.get(element);\n        if (count != null) {\n            intersectionCountMap.put(element, count+1);\n        } else {\n            intersectionCountMap.put(element, 1L);\n        }\n    }\n    for (T element : b) {\n        Long count = intersectionCountMap.get(element);\n        if (count != null) {\n            intersectionCountMap.put(element, count-1);\n        } else {\n            intersectionCountMap.put(element, -1L);\n        }            \n    }\n    for(T key : intersectionCountMap.keySet()) {\n        Long count = intersectionCountMap.get(key);\n        if (count != null &amp;&amp; count != 0) {\n            for(long i = 0; i &lt; count; i++) {\n                returnList.add(key);\n            }\n        }\n    }\n    return returnList;\n}\n</code></pre>\n\n<p>This should run in <code>O(n)</code>, as we're only iterating the Lists each once, and the Map once. The Data structures here used in Java should be efficient, as the <code>HashMap</code> is constructed with a capacity that can handle the largest size of the lists. </p>\n\n<p>I'm using a <code>LinkedList</code> for the return as it provides us a way of adding and iterating through a list for our unknown sized intersection.</p>\n"},{"comments":[{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":2,"creation_date":1352322449,"post_id":13275940,"comment_id":18101103,"body_markdown":"The range of Unicode is (theoretically) 32 bits â€“ that would require 16 GiB of RAM for your `charset` table. Do you see how why people used hash tables instead?","body":"The range of Unicode is (theoretically) 32 bits â€“ that would require 16 GiB of RAM for your <code>charset</code> table. Do you see how why people used hash tables instead?"},{"owner":{"account_id":1448881,"reputation":521,"user_id":1366469,"display_name":"Vamshidhar Behara"},"score":0,"creation_date":1353514753,"post_id":13275940,"comment_id":18471450,"body_markdown":"@KonradRudolph I think it really depends on the problem and what trade-offs one is willing to make. If we are dealing with comparing terabytes of file then a fixed size charset table would be a more feasible approach if you want to stick to one machine.","body":"@KonradRudolph I think it really depends on the problem and what trade-offs one is willing to make. If we are dealing with comparing terabytes of file then a fixed size charset table would be a more feasible approach if you want to stick to one machine."},{"owner":{"account_id":1448881,"reputation":521,"user_id":1366469,"display_name":"Vamshidhar Behara"},"score":0,"creation_date":1353515082,"post_id":13275940,"comment_id":18471642,"body_markdown":"@KonradRudolph The above case also beats the hash table approach any time if we know we are dealing with ASCII strings.","body":"@KonradRudolph The above case also beats the hash table approach any time if we know we are dealing with ASCII strings."},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":0,"creation_date":1353526643,"post_id":13275940,"comment_id":18477065,"body_markdown":"Keep dreaming. The Unicode array would be 4 GiB large. Even if we have sufficient RAM, the random access pattern would kill cache performance. A hash table will be faster.","body":"Keep dreaming. The Unicode array would be 4 GiB large. Even if we have sufficient RAM, the random access pattern would kill cache performance. A hash table will be faster."},{"owner":{"account_id":1448881,"reputation":521,"user_id":1366469,"display_name":"Vamshidhar Behara"},"score":0,"creation_date":1353529218,"post_id":13275940,"comment_id":18478148,"body_markdown":"For large data sets wouldn&#39;t insertions into hash table be O(n)? How would it be faster? I think a map-reduce approach may be a better approach for solving this problem when dealing with large data sets.","body":"For large data sets wouldn&#39;t insertions into hash table be O(n)? How would it be faster? I think a map-reduce approach may be a better approach for solving this problem when dealing with large data sets."},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":0,"creation_date":1353535611,"post_id":13275940,"comment_id":18480504,"body_markdown":"The problem with using an array is that it also no longer has O(1) access time&#160;â€“&#160;loading the relevant memory pages and caching on the processor will take a significant time. Hash table, because they take much less space, will have significantly better individual access times.","body":"The problem with using an array is that it also no longer has O(1) access time â€“ loading the relevant memory pages and caching on the processor will take a significant time. Hash table, because they take much less space, will have significantly better individual access times."},{"owner":{"account_id":1448881,"reputation":521,"user_id":1366469,"display_name":"Vamshidhar Behara"},"score":0,"creation_date":1353597034,"post_id":13275940,"comment_id":18501040,"body_markdown":"What you are suggesting is that the run time is no longer a function of the size of the input(n). However, in case of the hash table you will also need to store the hash for each character/string in the array. In the above case you would not need that. Arrays are stored sequentially and hence their access time would be constant. In case of hash table you would run into collisions very easily and depending on implementation would take O(n) for access in the worst case.","body":"What you are suggesting is that the run time is no longer a function of the size of the input(n). However, in case of the hash table you will also need to store the hash for each character/string in the array. In the above case you would not need that. Arrays are stored sequentially and hence their access time would be constant. In case of hash table you would run into collisions very easily and depending on implementation would take O(n) for access in the worst case."},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":0,"creation_date":1353664496,"post_id":13275940,"comment_id":18519219,"body_markdown":"You are simply wrong, and Iâ€™ve already explained the reason. As the array becomes very large, it no longer fits into quickly accessible memory regions. As a consequence, parts of it need to be loaded from slower storage, which takes time (up to 1000 times as much time as a regular access!). The hash table does *not* run into this problem because itâ€™s much (much, much!) smaller. Yes, you may get collisions but the expected number of collisions is still very low. because even very long text will only use few different characters. So finding an entry is, on average, still very fast.","body":"You are simply wrong, and Iâ€™ve already explained the reason. As the array becomes very large, it no longer fits into quickly accessible memory regions. As a consequence, parts of it need to be loaded from slower storage, which takes time (up to 1000 times as much time as a regular access!). The hash table does <i>not</i> run into this problem because itâ€™s much (much, much!) smaller. Yes, you may get collisions but the expected number of collisions is still very low. because even very long text will only use few different characters. So finding an entry is, on average, still very fast."}],"tags":[],"owner":{"account_id":1448881,"reputation":521,"user_id":1366469,"display_name":"Vamshidhar Behara"},"comment_count":8,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1352313186,"creation_date":1352313186,"answer_id":13275940,"question_id":13270491,"body_markdown":"Assuming you are dealing with ANSI characters. The approach should be similar for Unicode, just change the range.\r\n\r\n    char[] A = {&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;};\r\n    char[] B = {&#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;};\r\n    int[] charset = new int[256]\r\n\r\n    for(int i=0; i&lt;A.length; i++) {\r\n      charset[A[i]]++;\r\n    }\r\n\r\nNow iterate over the B and you can check if the corresponding charset value for the character being iterated is greater than 0. You can store them in a list or any other collection.\r\n\r\nThis approach takes O(n) time complexity and a constant space for your checks not taking into account your new array/list being used to hold the common elements.\r\n\r\nThis is better than the HashSet/Hashtable approach in terms of space complexity.\r\n\r\n\r\n","title":"How do I get the intersection between two arrays as a new array?","body":"<p>Assuming you are dealing with ANSI characters. The approach should be similar for Unicode, just change the range.</p>\n\n<pre><code>char[] A = {'a', 'b', 'c', 'd'};\nchar[] B = {'c', 'd', 'e', 'f'};\nint[] charset = new int[256]\n\nfor(int i=0; i&lt;A.length; i++) {\n  charset[A[i]]++;\n}\n</code></pre>\n\n<p>Now iterate over the B and you can check if the corresponding charset value for the character being iterated is greater than 0. You can store them in a list or any other collection.</p>\n\n<p>This approach takes O(n) time complexity and a constant space for your checks not taking into account your new array/list being used to hold the common elements.</p>\n\n<p>This is better than the HashSet/Hashtable approach in terms of space complexity.</p>\n"},{"tags":[],"owner":{"account_id":1336729,"reputation":799,"user_id":1279301,"accept_rate":67,"display_name":"Sumit Kumar Saha"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1352330529,"creation_date":1352330529,"answer_id":13280009,"question_id":13270491,"body_markdown":"    \r\n    int s[256] // for considering all ascii values, serves as a hash function\r\n\r\n    for(int i=0;i&lt;256;i++)\r\n    s[i]=0;\r\n\r\n    char a[]={&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;};\r\n    char b[]={&#39;c&#39;,&#39;d&#39;,&#39;e&#39;,&#39;f&#39;};\r\n\r\n    for(int i=0;i&lt;sizeof(a);i++)\r\n    {\r\n       s[a[i]]++;\r\n     }\r\n\r\n     for(int i=0;i&lt;sizeof(b);i++)//checker function\r\n     {\r\n         if(s[b[i]]&gt;0)\r\n           cout&lt;&lt;b[i]; \r\n      }\r\n\r\n\r\n      complexity O(m+n);\r\n      m- length of array a\r\n      n- length of array b","title":"How do I get the intersection between two arrays as a new array?","body":"<pre><code>int s[256] // for considering all ascii values, serves as a hash function\n\nfor(int i=0;i&lt;256;i++)\ns[i]=0;\n\nchar a[]={'a','b','c','d'};\nchar b[]={'c','d','e','f'};\n\nfor(int i=0;i&lt;sizeof(a);i++)\n{\n   s[a[i]]++;\n }\n\n for(int i=0;i&lt;sizeof(b);i++)//checker function\n {\n     if(s[b[i]]&gt;0)\n       cout&lt;&lt;b[i]; \n  }\n\n\n  complexity O(m+n);\n  m- length of array a\n  n- length of array b\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1851402,"reputation":1688,"user_id":1677896,"accept_rate":35,"display_name":"kishore"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1352897488,"creation_date":1352896111,"answer_id":13378834,"question_id":13270491,"body_markdown":"First, sort the two arrays using best sorting algorithm.  \r\nThen, with linear search, you can get the common elements.\r\n\r\n\r\nIf an extra space is provided then we can use hash table to do that.\r\n","title":"How do I get the intersection between two arrays as a new array?","body":"<p>First, sort the two arrays using best sorting algorithm.<br>\nThen, with linear search, you can get the common elements.</p>\n\n<p>If an extra space is provided then we can use hash table to do that.</p>\n"},{"tags":[],"owner":{"account_id":236804,"reputation":1373,"user_id":504534,"display_name":"Colin MacKenzie - III"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1363051518,"creation_date":1363051518,"answer_id":15351713,"question_id":13270491,"body_markdown":"in ruby you can just say\r\n\r\n    a = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;]\r\n    b = [&#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;]\r\n    c = a &amp; b\r\n\r\nc contains [&#39;c&#39;,&#39;d&#39;]","title":"How do I get the intersection between two arrays as a new array?","body":"<p>in ruby you can just say</p>\n\n<pre><code>a = ['a', 'b', 'c', 'd']\nb = ['c', 'd', 'e', 'f']\nc = a &amp; b\n</code></pre>\n\n<p>c contains ['c','d']</p>\n"},{"tags":[],"owner":{"account_id":3149806,"reputation":271,"user_id":2663465,"display_name":"Sanj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1375950283,"creation_date":1375948857,"answer_id":18120869,"question_id":13270491,"body_markdown":"You could use HashSet&lt;T&gt; in .NET 3.5 or later. Example c# code:\r\n\r\n    HashSet&lt;int&gt; set1 = new HashSet&lt;int&gt;(new int[]{8, 12, 13, 15});\r\n       \r\n    HashSet&lt;int&gt; set2 = new HashSet&lt;int&gt;(new int[] { 15, 16, 7, 8, 9 });\r\n     \r\n    set1.IntersectWith(set2);\r\n    \r\n    foreach (int i in set1)\r\n    \r\n       Console.Write(i+ &quot; &quot;);\r\n      \r\n      \r\n//output: 8 15","title":"How do I get the intersection between two arrays as a new array?","body":"<p>You could use HashSet in .NET 3.5 or later. Example c# code:</p>\n\n<pre><code>HashSet&lt;int&gt; set1 = new HashSet&lt;int&gt;(new int[]{8, 12, 13, 15});\n\nHashSet&lt;int&gt; set2 = new HashSet&lt;int&gt;(new int[] { 15, 16, 7, 8, 9 });\n\nset1.IntersectWith(set2);\n\nforeach (int i in set1)\n\n   Console.Write(i+ \" \");\n</code></pre>\n\n<p>//output: 8 15</p>\n"},{"tags":[],"owner":{"account_id":1825241,"reputation":1,"user_id":1658235,"display_name":"navgupta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1381845310,"creation_date":1381845310,"answer_id":19383087,"question_id":13270491,"body_markdown":"\r\nSort one of the arrays (m Log(m) )\r\nnow Pick each element from other array and \r\ndo a binary search in first array(the sorted one)  -&gt;n Log(m)\r\n\r\n\r\nTotal Time Complexity :- **(n+m)Log(m)**.","title":"How do I get the intersection between two arrays as a new array?","body":"<p>Sort one of the arrays (m Log(m) )\nnow Pick each element from other array and \ndo a binary search in first array(the sorted one)  ->n Log(m)</p>\n\n<p>Total Time Complexity :- <strong>(n+m)Log(m)</strong>.</p>\n"},{"tags":[],"owner":{"account_id":2667036,"reputation":3989,"user_id":2305243,"accept_rate":100,"display_name":"Alan Dong"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1412173764,"creation_date":1412173764,"answer_id":26143765,"question_id":13270491,"body_markdown":"Sort two arrays first, then iterate them, if they are the same element, add to to be returned array.\r\n\r\nCode is here:\r\n\r\n    public static void printArr(int[] arr){\r\n        for (int a:arr){\r\n            System.out.print(a + &quot;, &quot;);\r\n        }\r\n        System.out.println();\r\n    }\r\n\r\n    public static int[] intersectionOf(int[] arr1, int[] arr2){\r\n        Arrays.sort(arr1);\r\n        Arrays.sort(arr2);\r\n\r\n        printArr(arr1);\r\n        printArr(arr2);\r\n\r\n        int i=0, j=0, k=0;\r\n        int[] arr = new int[Math.min(arr1.length, arr2.length)];\r\n\r\n        while( i &lt; arr1.length &amp;&amp; j &lt; arr2.length){\r\n            if(arr1[i] &lt; arr2[j]){\r\n                i++;\r\n            } else if(arr1[i] &gt; arr2[j]){\r\n                j++;\r\n            } else {\r\n                arr[k++] = arr1[i++];\r\n                j++;\r\n            }\r\n        }\r\n        return Arrays.copyOf(arr, k);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        int[] arr1 = {1, 2, 6};\r\n        int[] arr2 = {10, 2, 5, 1};\r\n        printArr(intersectionOf(arr1,arr2));\r\n    }\r\n\r\noutputs:\r\n\r\n    arr1: 1, 2, 6, \r\n    arr2: 1, 2, 5, 10, \r\n    arr: 1, 2, ","title":"How do I get the intersection between two arrays as a new array?","body":"<p>Sort two arrays first, then iterate them, if they are the same element, add to to be returned array.</p>\n\n<p>Code is here:</p>\n\n<pre><code>public static void printArr(int[] arr){\n    for (int a:arr){\n        System.out.print(a + \", \");\n    }\n    System.out.println();\n}\n\npublic static int[] intersectionOf(int[] arr1, int[] arr2){\n    Arrays.sort(arr1);\n    Arrays.sort(arr2);\n\n    printArr(arr1);\n    printArr(arr2);\n\n    int i=0, j=0, k=0;\n    int[] arr = new int[Math.min(arr1.length, arr2.length)];\n\n    while( i &lt; arr1.length &amp;&amp; j &lt; arr2.length){\n        if(arr1[i] &lt; arr2[j]){\n            i++;\n        } else if(arr1[i] &gt; arr2[j]){\n            j++;\n        } else {\n            arr[k++] = arr1[i++];\n            j++;\n        }\n    }\n    return Arrays.copyOf(arr, k);\n}\n\npublic static void main(String[] args) {\n    int[] arr1 = {1, 2, 6};\n    int[] arr2 = {10, 2, 5, 1};\n    printArr(intersectionOf(arr1,arr2));\n}\n</code></pre>\n\n<p>outputs:</p>\n\n<pre><code>arr1: 1, 2, 6, \narr2: 1, 2, 5, 10, \narr: 1, 2, \n</code></pre>\n"},{"tags":[],"owner":{"account_id":2633780,"reputation":757,"user_id":2279035,"display_name":"Deepak Singhvi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1418535009,"creation_date":1418535009,"answer_id":27466653,"question_id":13270491,"body_markdown":"I hope the following would be useful. \r\nThese are two different approached:\r\n\r\n - Simple Intersection where you compare all the elements from one array\r\n   to another array. \r\n\r\n - Sorting and searching based approach which sorts one array and search second array element in first array using binary\r\n   search.\r\n\r\n&lt;code&gt;\r\n//\r\n\r\n    public class IntersectionOfUnsortedArrays {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tint[] arr1 = { 12, 4, 17 };\r\n    \t\tint[] arr2 = { 1, 12, 7, 17 };\r\n    \t\tSystem.out.println(&quot;Intersection Using Simple Comparision&quot;);\r\n    \t\tprintArray(simpleIntersection(arr1, arr2));\r\n    \t\tSystem.out.println(&quot;Intersection Using Sort and Binary Search&quot;);\r\n    \t\tprintArray(sortingBasedIntersection(arr1, arr2));\r\n    \t}\r\n    \r\n    \t/*\r\n    \t * Simple intersection based on the comparison without any sorting.\r\n    \t * Complexity O(n^2)\r\n    \t */\r\n    \tpublic static int[] simpleIntersection(int[] a, int[] b) {\r\n    \t\tint minlen = a.length &gt; b.length ? b.length : a.length;\r\n    \t\tint c[] = new int[minlen];\r\n    \t\tint k=0;\r\n    \t\tfor(int i=0;i&lt;a.length;i++){\r\n    \t\t\tfor(int j=0;j&lt;b.length;j++){\r\n    \t\t\t\tif(a[i]==b[j]){\r\n    \t\t\t\t\tc[k++]=a[i];\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tint arr[] = new int[k];\r\n    \t\t// copy the final array to remove unwanted 0&#39;s from the array c\r\n    \t\tSystem.arraycopy(c, 0, arr, 0, k);\r\n    \t\treturn arr;\r\n    \t}\r\n    \r\n    \t/*\r\n    \t * Sorting and Searching based intersection.\r\n    \t * Complexity Sorting O(n^2) + Searching O(log n)\r\n    \t */\r\n    \t\r\n    \tpublic static int[] sortingBasedIntersection(int[] a, int[] b){\r\n    \t\tinsertionSort(a);\r\n    \t\tint minlen = a.length &gt; b.length ? b.length : a.length;\r\n    \t\tint c[] = new int[minlen];\r\n    \t\tint k=0;\r\n    \t\tfor(int i=0;i&lt;b.length;i++){\r\n    \t\t\tint result = binarySearch(a,0,a.length,b[i]);\r\n    \t\t\tif(result &gt; -1){\r\n    \t\t\t\tc[k++] = a[result];\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tint arr[] = new int[k];\r\n    \t\t// copy the final array to remove unwanted 0&#39;s from the array c\r\n    \t\tSystem.arraycopy(c, 0, arr, 0, k);\r\n    \t\treturn arr;\r\n    \t}\r\n    \t\r\n    \tpublic static void insertionSort(int array[]) {\r\n    \t\tfor (int i = 1; i &lt; array.length; i++) {\r\n    \t\t\tint j = i;\r\n    \t\t\tint b = array[i];\r\n    \t\t\twhile ((j &gt; 0) &amp;&amp; (array[j - 1] &gt; b)) {\r\n    \t\t\t\tarray[j] = array[j - 1];\r\n    \t\t\t\tj--;\r\n    \t\t\t}\r\n    \t\t\tarray[j] = b;\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tstatic int binarySearch(int arr[], int low, int high, int num) {\r\n    \t\tif (high &lt; low)\r\n    \t\t\treturn -1;\r\n    \t\tint mid = (low + high) / 2;\r\n    \t\tif (num == arr[mid])\r\n    \t\t\treturn mid;\r\n    \t\tif (num &gt; arr[mid])\r\n    \t\t\treturn binarySearch(arr, (mid + 1), high, num);\r\n    \t\telse\r\n    \t\t\treturn binarySearch(arr, low, (mid - 1), num);\r\n    \t}\r\n    \t\r\n    \tpublic static void printArray(int[] array) {\r\n    \t\tfor (int value : array) {\r\n    \t\t\tSystem.out.print(&quot; &quot;+value);\r\n    \t\t}\r\n    \t\tSystem.out.println(&quot;\\n&quot;);\r\n    \t}\r\n    }\r\n\r\n&lt;/code&gt;","title":"How do I get the intersection between two arrays as a new array?","body":"<p>I hope the following would be useful. \nThese are two different approached:</p>\n\n<ul>\n<li><p>Simple Intersection where you compare all the elements from one array\nto another array. </p></li>\n<li><p>Sorting and searching based approach which sorts one array and search second array element in first array using binary\nsearch.</p></li>\n</ul>\n\n<p><code>\n//</p>\n\n<pre><code>public class IntersectionOfUnsortedArrays {\n    public static void main(String[] args) {\n        int[] arr1 = { 12, 4, 17 };\n        int[] arr2 = { 1, 12, 7, 17 };\n        System.out.println(\"Intersection Using Simple Comparision\");\n        printArray(simpleIntersection(arr1, arr2));\n        System.out.println(\"Intersection Using Sort and Binary Search\");\n        printArray(sortingBasedIntersection(arr1, arr2));\n    }\n\n    /*\n     * Simple intersection based on the comparison without any sorting.\n     * Complexity O(n^2)\n     */\n    public static int[] simpleIntersection(int[] a, int[] b) {\n        int minlen = a.length &gt; b.length ? b.length : a.length;\n        int c[] = new int[minlen];\n        int k=0;\n        for(int i=0;i&lt;a.length;i++){\n            for(int j=0;j&lt;b.length;j++){\n                if(a[i]==b[j]){\n                    c[k++]=a[i];\n                }\n            }\n        }\n        int arr[] = new int[k];\n        // copy the final array to remove unwanted 0's from the array c\n        System.arraycopy(c, 0, arr, 0, k);\n        return arr;\n    }\n\n    /*\n     * Sorting and Searching based intersection.\n     * Complexity Sorting O(n^2) + Searching O(log n)\n     */\n\n    public static int[] sortingBasedIntersection(int[] a, int[] b){\n        insertionSort(a);\n        int minlen = a.length &gt; b.length ? b.length : a.length;\n        int c[] = new int[minlen];\n        int k=0;\n        for(int i=0;i&lt;b.length;i++){\n            int result = binarySearch(a,0,a.length,b[i]);\n            if(result &gt; -1){\n                c[k++] = a[result];\n            }\n        }\n        int arr[] = new int[k];\n        // copy the final array to remove unwanted 0's from the array c\n        System.arraycopy(c, 0, arr, 0, k);\n        return arr;\n    }\n\n    public static void insertionSort(int array[]) {\n        for (int i = 1; i &lt; array.length; i++) {\n            int j = i;\n            int b = array[i];\n            while ((j &gt; 0) &amp;&amp; (array[j - 1] &gt; b)) {\n                array[j] = array[j - 1];\n                j--;\n            }\n            array[j] = b;\n        }\n    }\n\n    static int binarySearch(int arr[], int low, int high, int num) {\n        if (high &lt; low)\n            return -1;\n        int mid = (low + high) / 2;\n        if (num == arr[mid])\n            return mid;\n        if (num &gt; arr[mid])\n            return binarySearch(arr, (mid + 1), high, num);\n        else\n            return binarySearch(arr, low, (mid - 1), num);\n    }\n\n    public static void printArray(int[] array) {\n        for (int value : array) {\n            System.out.print(\" \"+value);\n        }\n        System.out.println(\"\\n\");\n    }\n}\n</code></pre>\n\n<p></code></p>\n"},{"tags":[],"owner":{"account_id":2191061,"reputation":147,"user_id":1938094,"accept_rate":86,"display_name":"Nick"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1446517508,"creation_date":1446517508,"answer_id":33490414,"question_id":13270491,"body_markdown":"If the collections are already sorted, as shown in the question, then the best solution (not mentioned yet) is a merge-sort-like algorithm that runs in O(n+m).\r\n\r\nCompare the first elements of each collection. If they&#39;re the same, add the element to the intersection set and pop both elements from their collections. If the elements are different, pop the element that&#39;s greater, in comparison, to the other element. Repeat until one collection is empty.","title":"How do I get the intersection between two arrays as a new array?","body":"<p>If the collections are already sorted, as shown in the question, then the best solution (not mentioned yet) is a merge-sort-like algorithm that runs in O(n+m).</p>\n\n<p>Compare the first elements of each collection. If they're the same, add the element to the intersection set and pop both elements from their collections. If the elements are different, pop the element that's greater, in comparison, to the other element. Repeat until one collection is empty.</p>\n"},{"tags":[],"owner":{"account_id":3693494,"reputation":2307,"user_id":3075533,"accept_rate":53,"display_name":"mohsenmadi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1450235223,"creation_date":1450235223,"answer_id":34303291,"question_id":13270491,"body_markdown":"Using Java 8 features, here is an algorithm which honours duplicates within a list instead of turning a list into a set. No sorting, so no `n log n`.\r\n\r\n 1. Convert one of the lists into a map, with value being number of occurrences (cost: O(n)).\r\n 2. For each item in the other list, if the item exists in the map, decrease occurrence by one (cost: O(n)).\r\n\r\nTherefore, overall cost is O(n). Code:\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import java.util.stream.Collectors;\r\n\r\n    public class Dup {\r\n\t  public static void main(String[] args) {\r\n\t\tList&lt;Integer&gt; listA = Arrays.asList(3, 1, 4, 1, 9, 5, 9);\r\n\t\tList&lt;Integer&gt; listB = Arrays.asList(2, 6, 5, 3, 5, 8, 9, 7, 9, 3, 2, 3);\r\n\t\tfindCommons(listA, listB);\r\n\t  }\r\n\r\n\t  static void findCommons(List&lt;Integer&gt; listA, List&lt;Integer&gt; listB) {\r\n\t\tMap&lt;Integer, Long&gt; mapA = \r\n\t\t\tlistA.stream().collect(\r\n\t\t\t\tCollectors.groupingBy(Integer::intValue, Collectors.counting()));\r\n\t\t\r\n\t\tList&lt;Integer&gt; commons = new ArrayList&lt;&gt;();\r\n\t\tlistB.stream()\r\n\t\t\t.filter(e -&gt; mapA.get(e) != null)\r\n\t\t\t.filter(e -&gt; mapA.get(e) &gt; 0)\r\n\t\t\t.forEach(e -&gt; {\r\n\t\t\t\tmapA.put(e, mapA.get(e) - 1);\r\n\t\t\t\tcommons.add(e);\r\n\t\t\t});\r\n\t\t\r\n\t\tSystem.out.println(commons);\r\n\t  }\r\n    }\r\n\r\n Code above will give this output: `[5, 3, 9, 9]`.\r\n\r\n\r\n","title":"How do I get the intersection between two arrays as a new array?","body":"<p>Using Java 8 features, here is an algorithm which honours duplicates within a list instead of turning a list into a set. No sorting, so no <code>n log n</code>.</p>\n\n<ol>\n<li>Convert one of the lists into a map, with value being number of occurrences (cost: O(n)).</li>\n<li>For each item in the other list, if the item exists in the map, decrease occurrence by one (cost: O(n)).</li>\n</ol>\n\n<p>Therefore, overall cost is O(n). Code:</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.stream.Collectors;\n\npublic class Dup {\n  public static void main(String[] args) {\n    List&lt;Integer&gt; listA = Arrays.asList(3, 1, 4, 1, 9, 5, 9);\n    List&lt;Integer&gt; listB = Arrays.asList(2, 6, 5, 3, 5, 8, 9, 7, 9, 3, 2, 3);\n    findCommons(listA, listB);\n  }\n\n  static void findCommons(List&lt;Integer&gt; listA, List&lt;Integer&gt; listB) {\n    Map&lt;Integer, Long&gt; mapA = \n        listA.stream().collect(\n            Collectors.groupingBy(Integer::intValue, Collectors.counting()));\n\n    List&lt;Integer&gt; commons = new ArrayList&lt;&gt;();\n    listB.stream()\n        .filter(e -&gt; mapA.get(e) != null)\n        .filter(e -&gt; mapA.get(e) &gt; 0)\n        .forEach(e -&gt; {\n            mapA.put(e, mapA.get(e) - 1);\n            commons.add(e);\n        });\n\n    System.out.println(commons);\n  }\n}\n</code></pre>\n\n<p>Code above will give this output: <code>[5, 3, 9, 9]</code>.</p>\n"},{"comments":[{"owner":{"account_id":5924590,"reputation":8476,"user_id":4660897,"accept_rate":89,"display_name":"Tot Zam"},"score":0,"creation_date":1475035349,"post_id":39737613,"comment_id":66773425,"body_markdown":"Some explanation of the code would make this answer more helpful.","body":"Some explanation of the code would make this answer more helpful."}],"tags":[],"owner":{"account_id":9271726,"reputation":308,"user_id":6885473,"accept_rate":87,"display_name":"user6885473"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1475033808,"creation_date":1475033808,"answer_id":39737613,"question_id":13270491,"body_markdown":"import java.util.Scanner;\r\n\r\npublic class arraycommon {\r\n\r\n\tpublic static void main(String[] args) {\r\n        Scanner sc=new Scanner(System.in);\r\n\t\t// display common element in two diffrent array\r\n\t\tint sizea,sizeb,i=0,j=0,k=0;\r\n\t\tint count=0;\r\n\t\tSystem.out.println(&quot;enter the size array A:&quot;+&#39;\\n&#39;);\r\n\t\tsizea=sc.nextInt();\r\n\t\tSystem.out.println(&quot;enter the size array B&quot;+&#39;\\n&#39;);\r\n\t\tsizeb=sc.nextInt();\r\n\t\tint a[]=new int[sizea];\r\n\t\tint b[]=new int[sizeb];\r\n\t\tint c[]=new int[sizea];\r\n\t\t\r\n\t\t\r\n\t\tSystem.out.println(&quot;enter the element in array A:&quot;+&#39;\\n&#39;);\r\n\t\tfor (i = 0; i &lt; sizea; i++) {\r\n\t\t\t\r\n\t\t\ta[i]=sc.nextInt();\r\n\t\t}\r\n\t\tSystem.out.println(&quot;enter the element in array B:&quot;+&#39;\\n&#39;);\r\n\t\tfor (i = 0; i &lt; sizeb; i++) {\r\n\t\t\t\r\n\t\t\tb[i]=sc.nextInt();\r\n\t\t}\r\n\t\tSystem.out.println(&quot;the element in array A:&quot;+&#39;\\n&#39;);\r\n\t\tfor (i = 0; i &lt; sizea; i++) {\r\n\t\t\t\r\n\t\t\tSystem.out.print(a[i]+&quot; &quot;);\r\n\t\t\t\r\n\t\t}\r\n\t\tSystem.out.println(&#39;\\n&#39;);\r\n\t\tSystem.out.println(&quot;the element in array B:&quot;+&#39;\\n&#39;);\r\n\t\tfor (i = 0; i &lt; sizeb; i++) \r\n\t\t{\r\n\t\t\t\r\n\t\t\tSystem.out.print(b[i]+&quot; &quot;);\r\n\t\t}\r\n\t\t\r\n\t\tfor (i = 0; i &lt;sizea; i++) \r\n\t\t{\r\n\t\t\tfor (j = 0; j &lt; sizeb; j++) \r\n\t\t\t{\r\n\t\t\t   if(a[i]==b[j])\r\n\t\t\t   {\r\n\t\t\t\t   count++;\r\n\t\t\t\t   c[k]=a[i];\r\n\t\t\t\t   k=k+1;\r\n\t\t\t   }\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println(&#39;\\n&#39;);\r\n\t\tSystem.out.println(&quot;element common in array is&quot;);\r\n\t\t\r\n\t\tif(count==0)\r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;sorry no common elements&quot;);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tfor (i = 0; i &lt;count; i++) \r\n\t\t\t{\r\n\t\t\t\r\n\t\t\tSystem.out.print(c[i]+&quot; &quot;);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n}\r\n","title":"How do I get the intersection between two arrays as a new array?","body":"<p>import java.util.Scanner;</p>\n\n<p>public class arraycommon {</p>\n\n<pre><code>public static void main(String[] args) {\n    Scanner sc=new Scanner(System.in);\n    // display common element in two diffrent array\n    int sizea,sizeb,i=0,j=0,k=0;\n    int count=0;\n    System.out.println(\"enter the size array A:\"+'\\n');\n    sizea=sc.nextInt();\n    System.out.println(\"enter the size array B\"+'\\n');\n    sizeb=sc.nextInt();\n    int a[]=new int[sizea];\n    int b[]=new int[sizeb];\n    int c[]=new int[sizea];\n\n\n    System.out.println(\"enter the element in array A:\"+'\\n');\n    for (i = 0; i &lt; sizea; i++) {\n\n        a[i]=sc.nextInt();\n    }\n    System.out.println(\"enter the element in array B:\"+'\\n');\n    for (i = 0; i &lt; sizeb; i++) {\n\n        b[i]=sc.nextInt();\n    }\n    System.out.println(\"the element in array A:\"+'\\n');\n    for (i = 0; i &lt; sizea; i++) {\n\n        System.out.print(a[i]+\" \");\n\n    }\n    System.out.println('\\n');\n    System.out.println(\"the element in array B:\"+'\\n');\n    for (i = 0; i &lt; sizeb; i++) \n    {\n\n        System.out.print(b[i]+\" \");\n    }\n\n    for (i = 0; i &lt;sizea; i++) \n    {\n        for (j = 0; j &lt; sizeb; j++) \n        {\n           if(a[i]==b[j])\n           {\n               count++;\n               c[k]=a[i];\n               k=k+1;\n           }\n        }\n    }\n    System.out.println('\\n');\n    System.out.println(\"element common in array is\");\n\n    if(count==0)\n    {\n        System.out.println(\"sorry no common elements\");\n    }\n    else\n    {\n        for (i = 0; i &lt;count; i++) \n        {\n\n        System.out.print(c[i]+\" \");\n        }\n    }\n\n}\n</code></pre>\n\n<p>}</p>\n"},{"comments":[{"owner":{"account_id":2690880,"reputation":2110,"user_id":2324271,"accept_rate":85,"display_name":"Harsh Wardhan"},"score":0,"creation_date":1489754722,"post_id":42857442,"comment_id":72821829,"body_markdown":"This is brute force method, not very efficient.","body":"This is brute force method, not very efficient."}],"tags":[],"owner":{"account_id":10249031,"reputation":2757,"user_id":7563926,"accept_rate":100,"display_name":"Akash Salunkhe"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1489753336,"creation_date":1489753336,"answer_id":42857442,"question_id":13270491,"body_markdown":"        simply search each element of first array with each element of second array and stored matched result in third array\r\n    class Union\r\n    {\r\n      public static void main(String[] args) {\r\n      char a[] ={&#39;f&#39;,&#39;g&#39;,&#39;d&#39;,&#39;v&#39;,&#39;a&#39;};\r\n      char b[] ={&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;,&#39;e&#39;};\r\n      char temp[] = new char[5];\r\n      int p=0;\r\n      for(int i=0;i&lt;a.length;i++)\r\n      {\r\n        for(int j=0;j&lt;b.length;j++)\r\n        {\r\n          if(a[i]==b[j])     //searches if both array has common element\r\n          {\r\n    \r\n            temp[p] = a[i];   //if match found store it in a new array\r\n            p++;\r\n          }\r\n    \r\n        }\r\n    \r\n      }\r\n      for(int k=0;k&lt;temp.length;k++)\r\n      {\r\n          System.out.println(temp[k]);\r\n      }\r\n    \r\n      }\r\n    }\r\n\r\n","title":"How do I get the intersection between two arrays as a new array?","body":"<pre><code>    simply search each element of first array with each element of second array and stored matched result in third array\nclass Union\n{\n  public static void main(String[] args) {\n  char a[] ={'f','g','d','v','a'};\n  char b[] ={'a','b','c','d','e'};\n  char temp[] = new char[5];\n  int p=0;\n  for(int i=0;i&lt;a.length;i++)\n  {\n    for(int j=0;j&lt;b.length;j++)\n    {\n      if(a[i]==b[j])     //searches if both array has common element\n      {\n\n        temp[p] = a[i];   //if match found store it in a new array\n        p++;\n      }\n\n    }\n\n  }\n  for(int k=0;k&lt;temp.length;k++)\n  {\n      System.out.println(temp[k]);\n  }\n\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13468344,"reputation":51,"user_id":9717784,"display_name":"Partha.B"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683756368,"creation_date":1683755580,"answer_id":76222807,"question_id":13270491,"body_markdown":"Below is my solution with test data\r\n\r\n    public class IntersectionOf2Arrays {\r\n        public static void main(String[] args) {\r\n            System.out.print(&quot;2 Given Arrays are \\n&quot;);\r\n            int[] x= {2,5,3,7};\r\n            //int[] x= {3, 10, 4, 2, 8};\r\n            int[] y={5,2,9,0,1,3};\r\n            //int[] y={10, 4, 12, 3, 23, 1, 8};\r\n            Arrays.stream(x).forEach(a -&gt; System.out.print(&quot;  &quot;+a));\r\n            System.out.print(&quot;\\n&quot;);\r\n            Arrays.stream(y).forEach(b -&gt; System.out.print(&quot;  &quot;+b));\r\n            System.out.print(&quot;\\nIntersection of above two  array is &quot;);\r\n            int[] result = intersection(x,y);\r\n            Arrays.stream(result).forEach(c -&gt; System.out.print(&quot;  &quot;+c));\r\n        }\r\n        static int[] intersectionWithFilter(int x[],int y[]){\r\n    \r\n            int[] z =Arrays.stream(x)\r\n                    .distinct()\r\n                    .filter(a -&gt; Arrays.stream(y).anyMatch(b -&gt; b==a))\r\n                    .toArray();\r\n            return z;\r\n        }\r\n    \r\n        static int[] intersection(int x[],int y[]) {\r\n            int len = 0;\r\n            if(x.length&gt;y.length)\r\n                len = x.length;\r\n            else\r\n                len=y.length;\r\n    \r\n            int []z=new int[len];\r\n            int c = 0;\r\n            for(int i=0;i &lt;(x.length);i++) {\r\n                for(int j=0;j &lt; y.length;j++) {\r\n                    if(x[i]==y[j]){\r\n                        z[c]=x[i];\r\n                        c++;\r\n                    }\r\n                    else {\r\n                        continue;\r\n                    }\r\n                }\r\n            }\r\n            // As it is int array so it is by default 0 filled , so we need to remove those zeros\r\n            return resize(z,c);\r\n        }\r\n    \r\n        private static int[] resize(int[] oldArray, int newSize) {\r\n            int[] newArray = new int[newSize];\r\n            System.arraycopy( oldArray, 0, newArray, 0, newSize );\r\n            return newArray;\r\n        }\r\n    }\r\n\r\nTest result is below:-\r\n2 Given Arrays are \r\n  2  5  3  7\r\nSecond array\r\n  5  2  9  0  1  3\r\nIntersection of above two  array is   2  5  3","title":"How do I get the intersection between two arrays as a new array?","body":"<p>Below is my solution with test data</p>\n<pre><code>public class IntersectionOf2Arrays {\n    public static void main(String[] args) {\n        System.out.print(&quot;2 Given Arrays are \\n&quot;);\n        int[] x= {2,5,3,7};\n        //int[] x= {3, 10, 4, 2, 8};\n        int[] y={5,2,9,0,1,3};\n        //int[] y={10, 4, 12, 3, 23, 1, 8};\n        Arrays.stream(x).forEach(a -&gt; System.out.print(&quot;  &quot;+a));\n        System.out.print(&quot;\\n&quot;);\n        Arrays.stream(y).forEach(b -&gt; System.out.print(&quot;  &quot;+b));\n        System.out.print(&quot;\\nIntersection of above two  array is &quot;);\n        int[] result = intersection(x,y);\n        Arrays.stream(result).forEach(c -&gt; System.out.print(&quot;  &quot;+c));\n    }\n    static int[] intersectionWithFilter(int x[],int y[]){\n\n        int[] z =Arrays.stream(x)\n                .distinct()\n                .filter(a -&gt; Arrays.stream(y).anyMatch(b -&gt; b==a))\n                .toArray();\n        return z;\n    }\n\n    static int[] intersection(int x[],int y[]) {\n        int len = 0;\n        if(x.length&gt;y.length)\n            len = x.length;\n        else\n            len=y.length;\n\n        int []z=new int[len];\n        int c = 0;\n        for(int i=0;i &lt;(x.length);i++) {\n            for(int j=0;j &lt; y.length;j++) {\n                if(x[i]==y[j]){\n                    z[c]=x[i];\n                    c++;\n                }\n                else {\n                    continue;\n                }\n            }\n        }\n        // As it is int array so it is by default 0 filled , so we need to remove those zeros\n        return resize(z,c);\n    }\n\n    private static int[] resize(int[] oldArray, int newSize) {\n        int[] newArray = new int[newSize];\n        System.arraycopy( oldArray, 0, newArray, 0, newSize );\n        return newArray;\n    }\n}\n</code></pre>\n<p>Test result is below:-\n2 Given Arrays are\n2  5  3  7\nSecond array\n5  2  9  0  1  3\nIntersection of above two  array is   2  5  3</p>\n"}],"owner":{"account_id":1381576,"reputation":1565,"user_id":1314439,"accept_rate":62,"display_name":"Ranjan Sarma"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85461,"favorite_count":0,"down_vote_count":0,"up_vote_count":72,"accepted_answer_id":13270836,"answer_count":23,"score":72,"last_activity_date":1683756368,"creation_date":1352293861,"question_id":13270491,"body_markdown":"I faced this problem many times during various situations. It is generic to all programming languages although I am comfortable with C or Java.\r\n\r\nLet us consider two arrays (or collections):\r\n\r\n    char[] A = {&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;};\r\n    char[] B = {&#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;};\r\n\r\nHow do I get the common elements between the two arrays as a new array?\r\nIn this case, the intersection of array A and B is `char[] c = {&#39;c&#39;, &#39;d&#39;}`.\r\n\r\nI want to avoid the repeated iteration of one array inside the other array which will\r\nincrease the execution time by (length of A times length of B) which is too much in the case of huge arrays.\r\n\r\nIs there any way we could do a single pass in each array to get the common elements?\r\n","title":"How do I get the intersection between two arrays as a new array?","body":"<p>I faced this problem many times during various situations. It is generic to all programming languages although I am comfortable with C or Java.</p>\n\n<p>Let us consider two arrays (or collections):</p>\n\n<pre><code>char[] A = {'a', 'b', 'c', 'd'};\nchar[] B = {'c', 'd', 'e', 'f'};\n</code></pre>\n\n<p>How do I get the common elements between the two arrays as a new array?\nIn this case, the intersection of array A and B is <code>char[] c = {'c', 'd'}</code>.</p>\n\n<p>I want to avoid the repeated iteration of one array inside the other array which will\nincrease the execution time by (length of A times length of B) which is too much in the case of huge arrays.</p>\n\n<p>Is there any way we could do a single pass in each array to get the common elements?</p>\n"},{"tags":["java","jframe","jpanel","jbutton","game-development"],"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1683743035,"post_id":76221528,"comment_id":134415117,"body_markdown":"Show your window management code, maybe?","body":"Show your window management code, maybe?"},{"owner":{"account_id":27939108,"reputation":49,"user_id":21335474,"display_name":"User"},"score":0,"creation_date":1683743085,"post_id":76221528,"comment_id":134415125,"body_markdown":"The ActioLlistener method?","body":"The ActioLlistener method?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1683743086,"post_id":76221528,"comment_id":134415126,"body_markdown":"A &quot;home screen&quot; suggests a `CardLayout`","body":"A &quot;home screen&quot; suggests a <code>CardLayout</code>"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":2,"creation_date":1683743322,"post_id":76221528,"comment_id":134415165,"body_markdown":"It sounds like you shouldn&#39;t be changing jframes, but changing the components within the jframe. If you want multiple windows you should have a JDialog. A card layout lets you &quot;switch screens&quot;. When your game is opened one JPanel would be displayed, you click start, then another JPanel is displayed, then the game ends, ...guess what another JPanel is displayed.","body":"It sounds like you shouldn&#39;t be changing jframes, but changing the components within the jframe. If you want multiple windows you should have a JDialog. A card layout lets you &quot;switch screens&quot;. When your game is opened one JPanel would be displayed, you click start, then another JPanel is displayed, then the game ends, ...guess what another JPanel is displayed."},{"owner":{"account_id":16400961,"reputation":814,"user_id":11846953,"display_name":"John Bayko"},"score":2,"creation_date":1683744876,"post_id":76221528,"comment_id":134415473,"body_markdown":"I&#39;m assuming `HScreen()` is supposed to be `public Screen()`. Anyway, you configure `frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE)`, but in the start button handler you have `frame.dispose();`, which should trigger the `EXIT_ON_CLOSE` operation to call `System exit()` and exit your application. Even if this isn&#39;t the cause of your problem, it&#39;s probably not what you want.","body":"I&#39;m assuming <code>HScreen()</code> is supposed to be <code>public Screen()</code>. Anyway, you configure <code>frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE)</code>, but in the start button handler you have <code>frame.dispose();</code>, which should trigger the <code>EXIT_ON_CLOSE</code> operation to call <code>System exit()</code> and exit your application. Even if this isn&#39;t the cause of your problem, it&#39;s probably not what you want."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1683849126,"post_id":76221528,"comment_id":134433529,"body_markdown":"It sounds like you&#39;re running some kind of thread/timer which is constantly requesting keyboard focus for your game window, which suggests you&#39;re using a `KeyListener`. You could fix the immediate issue (of the task bar buttons flashing) by using the Key Bindings API instead (of `KeyListener`, which should just do).  Another choice is to use a `WindowFocusListener` and pause/resume you &quot;game loop&quot; when focus is lost/gained.  But in this context, I would just make use of a `CardLayout`.  You could also make use of an `OverlayLayout` or `JLayeredPane` if you want to &quot;overlay&quot; on top of the game","body":"It sounds like you&#39;re running some kind of thread/timer which is constantly requesting keyboard focus for your game window, which suggests you&#39;re using a <code>KeyListener</code>. You could fix the immediate issue (of the task bar buttons flashing) by using the Key Bindings API instead (of <code>KeyListener</code>, which should just do).  Another choice is to use a <code>WindowFocusListener</code> and pause/resume you &quot;game loop&quot; when focus is lost/gained.  But in this context, I would just make use of a <code>CardLayout</code>.  You could also make use of an <code>OverlayLayout</code> or <code>JLayeredPane</code> if you want to &quot;overlay&quot; on top of the game"}],"answers":[{"tags":[],"owner":{"account_id":23666583,"reputation":86,"user_id":17693981,"display_name":"Nicolas"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683743175,"creation_date":1683743175,"answer_id":76221568,"question_id":76221528,"body_markdown":"Instead of creating a new JFrame instance for each screen, you can consider using a CardLayout to switch between different JPanels. A CardLayout allows you to stack multiple JPanels on top of each other, and switch between them using a card name or index.","title":"How to create different windows on Java GUI?","body":"<p>Instead of creating a new JFrame instance for each screen, you can consider using a CardLayout to switch between different JPanels. A CardLayout allows you to stack multiple JPanels on top of each other, and switch between them using a card name or index.</p>\n"}],"owner":{"account_id":27939108,"reputation":49,"user_id":21335474,"display_name":"User"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1683761808,"answer_count":1,"score":1,"last_activity_date":1683756118,"creation_date":1683742789,"question_id":76221528,"body_markdown":"So I have created a game and I&#39;m just finishing up the project now but then at then end  I realised I need to have a home screen where the player has the option to press start button or settings. My initial plan was to create another class with a new home screen frame called frame. In this class I implemented ActionListener interface and created a start button. If start button is pressed then hide or dispose and creat a new instance of GamePanel. Then in GamePanel&#39;s ActionListener I said if menu button is pressed then dispose and create new instance of screen.\r\n\r\nEverything worked as planned but then again I realised that the icon for JFrame is blinking like a christmas light in my taskbar. When I press start in the home screen frame then JFrame is disposed so it disappears from the taskbar then instantly appears again since another frame is opened (this is very annoying). I&#39;m here to ask you guys if there is another easy way since I am out of time at this moment? I tried using different JPanels but lets just say it got too complicated.\r\n\r\n\r\n```java\r\n\r\npublic class Screen extends JPanel implements ActionListener {\r\n    JButton startButton = new JButton(&quot;Start&quot;);\r\n    JFrame frame = new JFrame();\r\n\r\n    HScreen() {\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.setSize(new Dimension(600, 400));\r\n        frame.setLayout(null);\r\n        frame.setVisible(true);\r\n        frame.setResizable(false);\r\n        frame.add(startButton);\r\n        startButton.setBounds(250, 90, 100, 50);\r\n        startButton.addActionListener(this);\r\n\r\n    }\r\n\r\n    @Override\r\n    public void actionPerformed(ActionEvent e) {\r\n        if (e.getSource() == startButton) {\r\n            frame.dispose();\r\n            new GamePanel();\r\n        }\r\n\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        new HScreen();\r\n    }\r\n\r\n}```","title":"How to create different windows on Java GUI?","body":"<p>So I have created a game and I'm just finishing up the project now but then at then end  I realised I need to have a home screen where the player has the option to press start button or settings. My initial plan was to create another class with a new home screen frame called frame. In this class I implemented ActionListener interface and created a start button. If start button is pressed then hide or dispose and creat a new instance of GamePanel. Then in GamePanel's ActionListener I said if menu button is pressed then dispose and create new instance of screen.</p>\n<p>Everything worked as planned but then again I realised that the icon for JFrame is blinking like a christmas light in my taskbar. When I press start in the home screen frame then JFrame is disposed so it disappears from the taskbar then instantly appears again since another frame is opened (this is very annoying). I'm here to ask you guys if there is another easy way since I am out of time at this moment? I tried using different JPanels but lets just say it got too complicated.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic class Screen extends JPanel implements ActionListener {\n    JButton startButton = new JButton(&quot;Start&quot;);\n    JFrame frame = new JFrame();\n\n    HScreen() {\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setSize(new Dimension(600, 400));\n        frame.setLayout(null);\n        frame.setVisible(true);\n        frame.setResizable(false);\n        frame.add(startButton);\n        startButton.setBounds(250, 90, 100, 50);\n        startButton.addActionListener(this);\n\n    }\n\n    @Override\n    public void actionPerformed(ActionEvent e) {\n        if (e.getSource() == startButton) {\n            frame.dispose();\n            new GamePanel();\n        }\n\n    }\n\n    public static void main(String[] args) {\n        new HScreen();\n    }\n\n}```\n</code></pre>\n"},{"tags":["java","json","rest"],"owner":{"account_id":5167400,"reputation":21,"user_id":4136974,"accept_rate":0,"display_name":"anudeep"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683756116,"creation_date":1683756116,"question_id":76222853,"body_markdown":"I am having a code where I have created a object from a payload by using objectMapper like below.\r\n\r\n \r\n\r\n     Test notification =\r\n                        objectMapper.readValue((byte[]) payload, Test.class);\r\n    \r\nTest Class looks like this\r\n\r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @ToString\r\n    @Builder\r\n    public class Test {\r\n      private static final ObjectMapper OBJECT_MAPPER = new ObjectMapper();\r\n    \r\n      @JsonProperty(&quot;eid&quot;)\r\n      String id;\r\n    \r\n      @JsonProperty(&quot;st&quot;)\r\n      String type;\r\n    }\r\n\r\nNow I need to send this test object as response to another Rest Call. \r\nWhen I used the same Test Object as response from the server , everything is received as empty in the client.\r\nBut if I send response with different Object and with same fields, it is received perfectly.\r\nWhy I am not able to use Test object as response?\r\nIs there any way I can use this as a response without creating  a new object","title":"How to send json parsed data as a response to another rest call","body":"<p>I am having a code where I have created a object from a payload by using objectMapper like below.</p>\n<pre><code> Test notification =\n                    objectMapper.readValue((byte[]) payload, Test.class);\n</code></pre>\n<p>Test Class looks like this</p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@ToString\n@Builder\npublic class Test {\n  private static final ObjectMapper OBJECT_MAPPER = new ObjectMapper();\n\n  @JsonProperty(&quot;eid&quot;)\n  String id;\n\n  @JsonProperty(&quot;st&quot;)\n  String type;\n}\n</code></pre>\n<p>Now I need to send this test object as response to another Rest Call.\nWhen I used the same Test Object as response from the server , everything is received as empty in the client.\nBut if I send response with different Object and with same fields, it is received perfectly.\nWhy I am not able to use Test object as response?\nIs there any way I can use this as a response without creating  a new object</p>\n"},{"tags":["java","ssl","apache-httpclient-4.x"],"comments":[{"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"score":12,"creation_date":1336948936,"post_id":2703161,"comment_id":13693685,"body_markdown":"It should be noted that the answers to this question don&#39;t do more than what&#39;s asked: they let you ignore the error but don&#39;t fix the underlying problem (a bit like removing the batteries from a smoke alarm instead of putting out the fire). Certificates have a purpose in ensuring the security of the SSL/TLS connection, ignoring those errors introduces a vulnerability to MITM attack. Use test certificates instead of ignoring the error.","body":"It should be noted that the answers to this question don&#39;t do more than what&#39;s asked: they let you ignore the error but don&#39;t fix the underlying problem (a bit like removing the batteries from a smoke alarm instead of putting out the fire). Certificates have a purpose in ensuring the security of the SSL/TLS connection, ignoring those errors introduces a vulnerability to MITM attack. Use test certificates instead of ignoring the error."},{"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"score":1,"creation_date":1337274856,"post_id":2703161,"comment_id":13794333,"body_markdown":"Related to http://stackoverflow.com/questions/1828775/how-to-handle-invalid-ssl-certificates-with-apache-httpclient","body":"Related to <a href=\"http://stackoverflow.com/questions/1828775/how-to-handle-invalid-ssl-certificates-with-apache-httpclient\" title=\"how to handle invalid ssl certificates with apache httpclient\">stackoverflow.com/questions/1828775/&hellip;</a>"},{"owner":{"account_id":146530,"reputation":59321,"user_id":357024,"accept_rate":90,"display_name":"Mike"},"score":58,"creation_date":1389897738,"post_id":2703161,"comment_id":31869558,"body_markdown":"&quot;like removing the batteries from a smoke alarm&quot; You might give other developers the benefit of the doubt and assume they know what they&#39;re doing. Perhaps the motivation for this question is local testing and the OP wishes to run a quick test without going through the horrible amounts of Java boilerplate necessary to set up even a simple SSL environment. Maybe someone could just answer the question without going into a &quot;holier than thou&quot; lecture.","body":"&quot;like removing the batteries from a smoke alarm&quot; You might give other developers the benefit of the doubt and assume they know what they&#39;re doing. Perhaps the motivation for this question is local testing and the OP wishes to run a quick test without going through the horrible amounts of Java boilerplate necessary to set up even a simple SSL environment. Maybe someone could just answer the question without going into a &quot;holier than thou&quot; lecture."},{"owner":{"account_id":970066,"reputation":4079,"user_id":992765,"accept_rate":51,"display_name":"odiszapc"},"score":0,"creation_date":1459861693,"post_id":2703161,"comment_id":60468862,"body_markdown":"I.e in our company internal JIRA server has some &quot;windows security policy based cert&quot; which is valid on Windows machines included in domain and not valid on other. I can&#39;t control this policy and still want to call JIRA REST API.","body":"I.e in our company internal JIRA server has some &quot;windows security policy based cert&quot; which is valid on Windows machines included in domain and not valid on other. I can&#39;t control this policy and still want to call JIRA REST API."},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":4,"creation_date":1490122479,"post_id":2703161,"comment_id":72968686,"body_markdown":"@Bruno The inability to disable smoke detectors for a period of 30-60 minutes while dealing with a small kitchen fire shows an insane lack of insight into usage patterns by some legal official at some point that I feel borders on criminal.  The fact that there is a concept of &quot;removing batteries from a smoke alarm&quot; proves this.  I feel about the same level of anger about having to get certificates to work for a simple test that I know doesn&#39;t have security ramifications. The existence of this question proves this.","body":"@Bruno The inability to disable smoke detectors for a period of 30-60 minutes while dealing with a small kitchen fire shows an insane lack of insight into usage patterns by some legal official at some point that I feel borders on criminal.  The fact that there is a concept of &quot;removing batteries from a smoke alarm&quot; proves this.  I feel about the same level of anger about having to get certificates to work for a simple test that I know doesn&#39;t have security ramifications. The existence of this question proves this."},{"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"score":0,"creation_date":1490128001,"post_id":2703161,"comment_id":72971944,"body_markdown":"@BillK Sure, don&#39;t get me wrong, I&#39;ve disabled that sort of verification myself for simple tests once in a while. The real problem is that most people understand the why it&#39;s a problem with smoke alarms. That&#39;s not so much the case in software development: these lines of codes won&#39;t generate errors, and it&#39;s very easy for various project stakeholders (especially those who don&#39;t get near the code) to push for a product release without realising the consequences. Fixing things that don&#39;t cause errors is generally not a priority, especially when you have a deadline.","body":"@BillK Sure, don&#39;t get me wrong, I&#39;ve disabled that sort of verification myself for simple tests once in a while. The real problem is that most people understand the why it&#39;s a problem with smoke alarms. That&#39;s not so much the case in software development: these lines of codes won&#39;t generate errors, and it&#39;s very easy for various project stakeholders (especially those who don&#39;t get near the code) to push for a product release without realising the consequences. Fixing things that don&#39;t cause errors is generally not a priority, especially when you have a deadline."},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":0,"creation_date":1490389878,"post_id":2703161,"comment_id":73107967,"body_markdown":"@Bruno Sounds like I agree--My point would be that to not recognize that this is an issue is a design flaw. If the designers were more aware of this issue they might have given us a command line -Dignore_certs_unsafe=true to disable cert checking completely.  This is a pretty exact match to the fire alarm analogy where they should just have a button to disable it for 30 minutes instead of a law that it can&#39;t be disabled.  Sometimes what is perceived as more security is actually less security in practice :)","body":"@Bruno Sounds like I agree--My point would be that to not recognize that this is an issue is a design flaw. If the designers were more aware of this issue they might have given us a command line -Dignore_certs_unsafe=true to disable cert checking completely.  This is a pretty exact match to the fire alarm analogy where they should just have a button to disable it for 30 minutes instead of a law that it can&#39;t be disabled.  Sometimes what is perceived as more security is actually less security in practice :)"},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":0,"creation_date":1490389950,"post_id":2703161,"comment_id":73107999,"body_markdown":"Hmm, and actually that might be a good way to implement this hack--setting a -D variable that you enable in your dev launch environment but never prod which would eliminate your concern about forgetting it.","body":"Hmm, and actually that might be a good way to implement this hack--setting a -D variable that you enable in your dev launch environment but never prod which would eliminate your concern about forgetting it."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1494505246,"post_id":2703161,"comment_id":74863570,"body_markdown":"If you don&#39;t want it secure why are you using SSL at all?","body":"If you don&#39;t want it secure why are you using SSL at all?"}],"answers":[{"comments":[{"owner":{"account_id":43750,"reputation":18014,"user_id":128028,"accept_rate":86,"display_name":"Viet"},"score":1,"creation_date":1272106576,"post_id":2703233,"comment_id":2727644,"body_markdown":"Say I don&#39;t want to buy valid SSL certificate for my site and just want to use it, this piece of code can help? How come I don&#39;t see any part where a URL is needed or exception handling is needed?","body":"Say I don&#39;t want to buy valid SSL certificate for my site and just want to use it, this piece of code can help? How come I don&#39;t see any part where a URL is needed or exception handling is needed?"},{"owner":{"account_id":50238,"reputation":74702,"user_id":149808,"accept_rate":81,"display_name":"ZZ Coder"},"score":1,"creation_date":1272115166,"post_id":2703233,"comment_id":2728057,"body_markdown":"As you can see the X509TrustManager doesn&#39;t check for anything and doesn&#39;t throw any exceptions so any cert is accepted.","body":"As you can see the X509TrustManager doesn&#39;t check for anything and doesn&#39;t throw any exceptions so any cert is accepted."},{"owner":{"account_id":37402,"reputation":8190,"user_id":106941,"accept_rate":88,"display_name":"MSpeed"},"score":21,"creation_date":1333639232,"post_id":2703233,"comment_id":12830319,"body_markdown":"Hmm, it&#39;s telling me that &#39;new SSLSocketFactory(ssslCont)&#39; is expecting a KeyStore, not an SSLContext. Am I missing something?","body":"Hmm, it&#39;s telling me that &#39;new SSLSocketFactory(ssslCont)&#39; is expecting a KeyStore, not an SSLContext. Am I missing something?"},{"owner":{"account_id":103609,"reputation":3905,"user_id":277413,"accept_rate":67,"display_name":"pulkitsinghal"},"score":0,"creation_date":1357232917,"post_id":2703233,"comment_id":19586532,"body_markdown":"For some reason the Jelatic and Heroku jetty and tomcat servers can&#39;t pick up on this code whereas AWS beanstalk&#39;s tomcat understands and runs it just fine ... strange.","body":"For some reason the Jelatic and Heroku jetty and tomcat servers can&#39;t pick up on this code whereas AWS beanstalk&#39;s tomcat understands and runs it just fine ... strange."},{"owner":{"account_id":59868,"reputation":12560,"user_id":179024,"accept_rate":77,"display_name":"MW."},"score":3,"creation_date":1358364980,"post_id":2703233,"comment_id":19976971,"body_markdown":"I get the error that an X509TrustManager can&#39;t be cast to a TrustManager.","body":"I get the error that an X509TrustManager can&#39;t be cast to a TrustManager."},{"owner":{"account_id":93488,"reputation":1133,"user_id":255747,"accept_rate":50,"display_name":"rantoniuk"},"score":4,"creation_date":1371844087,"post_id":2703233,"comment_id":24986759,"body_markdown":"Make sure that you import the correct packages, i.e. from  org.apache.http.","body":"Make sure that you import the correct packages, i.e. from  org.apache.http."},{"owner":{"account_id":534720,"reputation":7416,"user_id":904556,"accept_rate":94,"display_name":"Jason"},"score":1,"creation_date":1387241066,"post_id":2703233,"comment_id":30867298,"body_markdown":"The way to create and configure an SSLContext is revised in 4.3: SSLContext sslContext = SSLContexts.custom().loadTrustMaterial(null, new TrustSelfSignedStrategy()).useTLS().build();","body":"The way to create and configure an SSLContext is revised in 4.3: SSLContext sslContext = SSLContexts.custom().loadTrustMaterial(null, new TrustSelfSignedStrategy()).useTLS().build();"},{"owner":{"account_id":302948,"reputation":12414,"user_id":611600,"accept_rate":86,"display_name":"Ali"},"score":3,"creation_date":1392268232,"post_id":2703233,"comment_id":32890525,"body_markdown":"Anyone know how to throw all this together using `HttpClientBuilder`?","body":"Anyone know how to throw all this together using <code>HttpClientBuilder</code>?"},{"owner":{"account_id":203256,"reputation":7026,"user_id":450812,"accept_rate":83,"display_name":"alfonx"},"score":0,"creation_date":1433282810,"post_id":2703233,"comment_id":49282607,"body_markdown":"It works for me and SSLContext, TrustManager and X509TrustManager are all from package javax.net.ssl","body":"It works for me and SSLContext, TrustManager and X509TrustManager are all from package javax.net.ssl"},{"owner":{"display_name":"user5268786"},"score":0,"creation_date":1452174858,"post_id":2703233,"comment_id":57058947,"body_markdown":"which version of HttpClient you&#39;re using ?","body":"which version of HttpClient you&#39;re using ?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1494505079,"post_id":2703233,"comment_id":74863446,"body_markdown":"This technique is totally and utterly insecure. Do not use. Import the sever certificate into the client trust store, or gets the server certificate signed by a CA.","body":"This technique is totally and utterly insecure. Do not use. Import the sever certificate into the client trust store, or gets the server certificate signed by a CA."},{"owner":{"account_id":1109288,"reputation":1653,"user_id":1100060,"accept_rate":0,"display_name":"Nathan B"},"score":0,"creation_date":1643732824,"post_id":2703233,"comment_id":125415476,"body_markdown":"Still getting Certificate for &lt;....&gt; doesn&#39;t match any of the....","body":"Still getting Certificate for &lt;....&gt; doesn&#39;t match any of the...."}],"tags":[],"owner":{"account_id":50238,"reputation":74702,"user_id":149808,"accept_rate":81,"display_name":"ZZ Coder"},"comment_count":12,"down_vote_count":2,"up_vote_count":100,"is_accepted":true,"score":98,"last_activity_date":1348086074,"creation_date":1272083541,"answer_id":2703233,"question_id":2703161,"body_markdown":"You need to create a SSLContext with your own TrustManager and create HTTPS scheme using this context. Here is the code,\r\n\r\n    SSLContext sslContext = SSLContext.getInstance(&quot;SSL&quot;);\r\n\r\n    // set up a TrustManager that trusts everything\r\n    sslContext.init(null, new TrustManager[] { new X509TrustManager() {\r\n                public X509Certificate[] getAcceptedIssuers() {\r\n                        System.out.println(&quot;getAcceptedIssuers =============&quot;);\r\n                        return null;\r\n                }\r\n\r\n                public void checkClientTrusted(X509Certificate[] certs,\r\n                                String authType) {\r\n                        System.out.println(&quot;checkClientTrusted =============&quot;);\r\n                }\r\n\r\n                public void checkServerTrusted(X509Certificate[] certs,\r\n                                String authType) {\r\n                        System.out.println(&quot;checkServerTrusted =============&quot;);\r\n                }\r\n    } }, new SecureRandom());\r\n\r\n    SSLSocketFactory sf = new SSLSocketFactory(sslContext);\r\n    Scheme httpsScheme = new Scheme(&quot;https&quot;, 443, sf);\r\n    SchemeRegistry schemeRegistry = new SchemeRegistry();\r\n    schemeRegistry.register(httpsScheme);\r\n\r\n    // apache HttpClient version &gt;4.2 should use BasicClientConnectionManager\r\n    ClientConnectionManager cm = new SingleClientConnManager(schemeRegistry);\r\n    HttpClient httpClient = new DefaultHttpClient(cm);\r\n","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>You need to create a SSLContext with your own TrustManager and create HTTPS scheme using this context. Here is the code,</p>\n\n<pre><code>SSLContext sslContext = SSLContext.getInstance(\"SSL\");\n\n// set up a TrustManager that trusts everything\nsslContext.init(null, new TrustManager[] { new X509TrustManager() {\n            public X509Certificate[] getAcceptedIssuers() {\n                    System.out.println(\"getAcceptedIssuers =============\");\n                    return null;\n            }\n\n            public void checkClientTrusted(X509Certificate[] certs,\n                            String authType) {\n                    System.out.println(\"checkClientTrusted =============\");\n            }\n\n            public void checkServerTrusted(X509Certificate[] certs,\n                            String authType) {\n                    System.out.println(\"checkServerTrusted =============\");\n            }\n} }, new SecureRandom());\n\nSSLSocketFactory sf = new SSLSocketFactory(sslContext);\nScheme httpsScheme = new Scheme(\"https\", 443, sf);\nSchemeRegistry schemeRegistry = new SchemeRegistry();\nschemeRegistry.register(httpsScheme);\n\n// apache HttpClient version &gt;4.2 should use BasicClientConnectionManager\nClientConnectionManager cm = new SingleClientConnManager(schemeRegistry);\nHttpClient httpClient = new DefaultHttpClient(cm);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3579,"reputation":53945,"user_id":5171,"accept_rate":100,"display_name":"Dan Dyer"},"score":1,"creation_date":1304625447,"post_id":3894076,"comment_id":6794566,"body_markdown":"You can achieve the same by just doing `sf.setHostnameVerifier(new AllowAllHostnameVerifier());`","body":"You can achieve the same by just doing <code>sf.setHostnameVerifier(new AllowAllHostnameVerifier());</code>"},{"owner":{"account_id":42361,"reputation":17687,"user_id":123378,"accept_rate":100,"display_name":"kaliatech"},"score":7,"creation_date":1306962190,"post_id":3894076,"comment_id":7226196,"body_markdown":"The sf.setHostnameVerifier has been deprecated as of 4.1. The alternative is to use one of the constructors. For example: `SSLSocketFactory sf = new SSLSocketFactory(sslContext, SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);`","body":"The sf.setHostnameVerifier has been deprecated as of 4.1. The alternative is to use one of the constructors. For example: <code>SSLSocketFactory sf = new SSLSocketFactory(sslContext, SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);</code>"}],"tags":[],"owner":{"account_id":173089,"reputation":254,"user_id":401552,"display_name":"eldur"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1314121757,"creation_date":1286569729,"answer_id":3894076,"question_id":2703161,"body_markdown":"In extension to *[ZZ Coder&#39;s answer][1]* it will be nice to override the hostnameverifier.\r\n\r\n    // ...\r\n    SSLSocketFactory sf = new SSLSocketFactory (sslContext);\r\n    sf.setHostnameVerifier(new X509HostnameVerifier() {\r\n        public boolean verify(String hostname, SSLSession session) {\r\n            return true;\r\n        }\r\n\r\n        public void verify(String host, String[] cns, String[] subjectAlts) throws SSLException {\r\n        }\r\n\r\n        public void verify(String host, X509Certificate cert) throws SSLException {\r\n        }\r\n\r\n        public void verify(String host, SSLSocket ssl) throws IOException {\r\n        }\r\n    });\r\n    // ...\r\n\r\n  [1]: https://stackoverflow.com/questions/2703161/apache-httpclient-4-0-ignore-ssl-certificate-errors/2703233#2703233\r\n","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>In extension to <em><a href=\"https://stackoverflow.com/questions/2703161/apache-httpclient-4-0-ignore-ssl-certificate-errors/2703233#2703233\">ZZ Coder's answer</a></em> it will be nice to override the hostnameverifier.</p>\n\n<pre><code>// ...\nSSLSocketFactory sf = new SSLSocketFactory (sslContext);\nsf.setHostnameVerifier(new X509HostnameVerifier() {\n    public boolean verify(String hostname, SSLSession session) {\n        return true;\n    }\n\n    public void verify(String host, String[] cns, String[] subjectAlts) throws SSLException {\n    }\n\n    public void verify(String host, X509Certificate cert) throws SSLException {\n    }\n\n    public void verify(String host, SSLSocket ssl) throws IOException {\n    }\n});\n// ...\n</code></pre>\n"},{"comments":[{"owner":{"account_id":42361,"reputation":17687,"user_id":123378,"accept_rate":100,"display_name":"kaliatech"},"score":8,"creation_date":1306962265,"post_id":5979031,"comment_id":7226216,"body_markdown":"The sf.setHostnameVerifier method has been deprecated as of 4.1. The alternative is to use one of the constructors. For example: `SSLSocketFactory sf = new SSLSocketFactory(sslContext, SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);`","body":"The sf.setHostnameVerifier method has been deprecated as of 4.1. The alternative is to use one of the constructors. For example: <code>SSLSocketFactory sf = new SSLSocketFactory(sslContext, SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);</code>"}],"tags":[],"owner":{"account_id":53330,"reputation":9385,"user_id":159434,"accept_rate":76,"display_name":"David Tinker"},"comment_count":1,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1305208254,"creation_date":1305208254,"answer_id":5979031,"question_id":2703161,"body_markdown":"If all you want to do is get rid of invalid hostname errors you can just do:\r\n\r\n    HttpClient httpClient = new DefaultHttpClient();\r\n    SSLSocketFactory sf = (SSLSocketFactory)httpClient.getConnectionManager()\r\n        .getSchemeRegistry().getScheme(&quot;https&quot;).getSocketFactory();\r\n    sf.setHostnameVerifier(new AllowAllHostnameVerifier());\r\n","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>If all you want to do is get rid of invalid hostname errors you can just do:</p>\n\n<pre><code>HttpClient httpClient = new DefaultHttpClient();\nSSLSocketFactory sf = (SSLSocketFactory)httpClient.getConnectionManager()\n    .getSchemeRegistry().getScheme(\"https\").getSocketFactory();\nsf.setHostnameVerifier(new AllowAllHostnameVerifier());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"score":1,"creation_date":1337274537,"post_id":10400575,"comment_id":13794224,"body_markdown":"Are you missing some code in this sample?  Maybe a call to httpClient.set...?","body":"Are you missing some code in this sample?  Maybe a call to httpClient.set...?"},{"owner":{"account_id":202220,"reputation":18592,"user_id":449161,"accept_rate":79,"display_name":"Ben Flynn"},"score":6,"creation_date":1365227706,"post_id":10400575,"comment_id":22551721,"body_markdown":"httpclient.getConnectionManager().getSchemeRegistry().register(new Scheme(&quot;https&quot;, 443, sslsf));","body":"httpclient.getConnectionManager().getSchemeRegistry().regist&zwnj;&#8203;er(new Scheme(&quot;https&quot;, 443, sslsf));"},{"owner":{"account_id":1191016,"reputation":3319,"user_id":1163804,"accept_rate":75,"display_name":"Toilal"},"score":8,"creation_date":1389165018,"post_id":10400575,"comment_id":31538757,"body_markdown":"SSLSocketFactory is deprecated in HttpClient 4.3","body":"SSLSocketFactory is deprecated in HttpClient 4.3"},{"owner":{"account_id":78072,"reputation":19350,"user_id":222438,"accept_rate":90,"display_name":"jlb"},"score":1,"creation_date":1430150231,"post_id":10400575,"comment_id":47923623,"body_markdown":"If using Java 8, you can even `new SSLSocketFactory((chain, authType) -&gt; true);`","body":"If using Java 8, you can even <code>new SSLSocketFactory((chain, authType) -&gt; true);</code>"}],"tags":[],"owner":{"account_id":133909,"reputation":26610,"user_id":335638,"display_name":"ok2c"},"comment_count":4,"down_vote_count":0,"up_vote_count":34,"is_accepted":false,"score":34,"last_activity_date":1336935559,"creation_date":1335888595,"answer_id":10400575,"question_id":2703161,"body_markdown":"Just for the record, there is a much simpler way to accomplish the same with HttpClient 4.1\r\n\r\n        SSLSocketFactory sslsf = new SSLSocketFactory(new TrustStrategy() {\r\n            \r\n            public boolean isTrusted(\r\n                    final X509Certificate[] chain, String authType) throws CertificateException {\r\n                // Oh, I am easy...\r\n                return true;\r\n            }\r\n            \r\n        });\r\n","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>Just for the record, there is a much simpler way to accomplish the same with HttpClient 4.1</p>\n\n<pre><code>    SSLSocketFactory sslsf = new SSLSocketFactory(new TrustStrategy() {\n\n        public boolean isTrusted(\n                final X509Certificate[] chain, String authType) throws CertificateException {\n            // Oh, I am easy...\n            return true;\n        }\n\n    });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":67073,"reputation":2018,"user_id":196463,"display_name":"Korny"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1338443368,"creation_date":1338443368,"answer_id":10828086,"question_id":2703161,"body_markdown":"a full working version for Apache HttpClient 4.1.3 (based on oleg&#39;s code above, but it still needed an allow_all_hostname_verifier on my system):\r\n\r\n\tprivate static HttpClient trustEveryoneSslHttpClient() {\r\n\t\ttry {\r\n\t\t\tSchemeRegistry registry = new SchemeRegistry();\r\n\r\n\t\t\tSSLSocketFactory socketFactory = new SSLSocketFactory(new TrustStrategy() {\r\n\r\n\t\t\t\tpublic boolean isTrusted(final X509Certificate[] chain, String authType) throws CertificateException {\r\n\t\t\t\t\t// Oh, I am easy...\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t}, org.apache.http.conn.ssl.SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\r\n\r\n\t\t\tregistry.register(new Scheme(&quot;https&quot;, 443, socketFactory));\r\n\t\t\tThreadSafeClientConnManager mgr = new ThreadSafeClientConnManager(registry);\r\n\t\t\tDefaultHttpClient client = new DefaultHttpClient(mgr, new DefaultHttpClient().getParams());\r\n\t\t\treturn client;\r\n\t\t} catch (GeneralSecurityException e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t}\r\n\r\nNote I&#39;m re-throwing all exceptions because really, there&#39;s not much I can do if any of this fails in a real system!","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>a full working version for Apache HttpClient 4.1.3 (based on oleg's code above, but it still needed an allow_all_hostname_verifier on my system):</p>\n\n<pre><code>private static HttpClient trustEveryoneSslHttpClient() {\n    try {\n        SchemeRegistry registry = new SchemeRegistry();\n\n        SSLSocketFactory socketFactory = new SSLSocketFactory(new TrustStrategy() {\n\n            public boolean isTrusted(final X509Certificate[] chain, String authType) throws CertificateException {\n                // Oh, I am easy...\n                return true;\n            }\n\n        }, org.apache.http.conn.ssl.SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\n\n        registry.register(new Scheme(\"https\", 443, socketFactory));\n        ThreadSafeClientConnManager mgr = new ThreadSafeClientConnManager(registry);\n        DefaultHttpClient client = new DefaultHttpClient(mgr, new DefaultHttpClient().getParams());\n        return client;\n    } catch (GeneralSecurityException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n\n<p>Note I'm re-throwing all exceptions because really, there's not much I can do if any of this fails in a real system!</p>\n"},{"tags":[],"owner":{"account_id":1079658,"reputation":661,"user_id":1076975,"accept_rate":29,"display_name":"littletiger"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1343053537,"creation_date":1343053537,"answer_id":11614499,"question_id":2703161,"body_markdown":"    \t\tDefaultHttpClient httpclient = new DefaultHttpClient();\r\n\r\n\t\tSSLContext sslContext;\r\n\t\ttry {\r\n\t\t\tsslContext = SSLContext.getInstance(&quot;SSL&quot;);\r\n\r\n\t\t\t// set up a TrustManager that trusts everything\r\n\t\t\ttry {\r\n\t\t\t\tsslContext.init(null,\r\n\t\t\t\t\t\tnew TrustManager[] { new X509TrustManager() {\r\n\t\t\t\t\t\t\tpublic X509Certificate[] getAcceptedIssuers() {\r\n\t\t\t\t\t\t\t\tlog.debug(&quot;getAcceptedIssuers =============&quot;);\r\n\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tpublic void checkClientTrusted(\r\n\t\t\t\t\t\t\t\t\tX509Certificate[] certs, String authType) {\r\n\t\t\t\t\t\t\t\tlog.debug(&quot;checkClientTrusted =============&quot;);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tpublic void checkServerTrusted(\r\n\t\t\t\t\t\t\t\t\tX509Certificate[] certs, String authType) {\r\n\t\t\t\t\t\t\t\tlog.debug(&quot;checkServerTrusted =============&quot;);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} }, new SecureRandom());\r\n\t\t\t} catch (KeyManagementException e) {\r\n\t\t\t}\r\n             SSLSocketFactory ssf = new SSLSocketFactory(sslContext,SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\r\n             ClientConnectionManager ccm = this.httpclient.getConnectionManager();\r\n             SchemeRegistry sr = ccm.getSchemeRegistry();\r\n             sr.register(new Scheme(&quot;https&quot;, 443, ssf));\t\t\t\r\n\t\t} catch (Exception e) {\r\n\t\t\tlog.error(e.getMessage(),e);\r\n\t\t}","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<pre><code>        DefaultHttpClient httpclient = new DefaultHttpClient();\n\n    SSLContext sslContext;\n    try {\n        sslContext = SSLContext.getInstance(\"SSL\");\n\n        // set up a TrustManager that trusts everything\n        try {\n            sslContext.init(null,\n                    new TrustManager[] { new X509TrustManager() {\n                        public X509Certificate[] getAcceptedIssuers() {\n                            log.debug(\"getAcceptedIssuers =============\");\n                            return null;\n                        }\n\n                        public void checkClientTrusted(\n                                X509Certificate[] certs, String authType) {\n                            log.debug(\"checkClientTrusted =============\");\n                        }\n\n                        public void checkServerTrusted(\n                                X509Certificate[] certs, String authType) {\n                            log.debug(\"checkServerTrusted =============\");\n                        }\n                    } }, new SecureRandom());\n        } catch (KeyManagementException e) {\n        }\n         SSLSocketFactory ssf = new SSLSocketFactory(sslContext,SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\n         ClientConnectionManager ccm = this.httpclient.getConnectionManager();\n         SchemeRegistry sr = ccm.getSchemeRegistry();\n         sr.register(new Scheme(\"https\", 443, ssf));            \n    } catch (Exception e) {\n        log.error(e.getMessage(),e);\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":392397,"reputation":28086,"user_id":753632,"accept_rate":57,"display_name":"Johann"},"score":1,"creation_date":1354814211,"post_id":11988335,"comment_id":18894543,"body_markdown":"It would help if you included the imports in the future. There are two different classes.","body":"It would help if you included the imports in the future. There are two different classes."}],"tags":[],"owner":{"account_id":1281526,"reputation":141,"user_id":1235537,"display_name":"Swaroop Rath"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1350988381,"creation_date":1345124065,"answer_id":11988335,"question_id":2703161,"body_markdown":"This is how I did it - \r\n\r\n 1. Create my own MockSSLSocketFactory (Class attached below)\r\n 2. Use it to initialise DefaultHttpClient. Proxy settings need to be provided if a proxy is used. \r\n\r\n----\r\nInitialising DefaultHTTPClient - \r\n\r\n    SchemeRegistry schemeRegistry = new SchemeRegistry();\r\n\t\tschemeRegistry.register(new Scheme(&quot;http&quot;, 80, PlainSocketFactory.getSocketFactory()));\r\n\t\tschemeRegistry.register(new Scheme(&quot;https&quot;, 443, new MockSSLSocketFactory()));\r\n\t\tClientConnectionManager cm = new SingleClientConnManager(schemeRegistry);\r\n\r\n\t\tDefaultHttpClient httpclient = new DefaultHttpClient(cm);\r\n\t\t\r\n---\r\nMock SSL Factory - \r\n\r\n    public class MockSSLSocketFactory extends SSLSocketFactory {\r\n\r\n\tpublic MockSSLSocketFactory() throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException, UnrecoverableKeyException {\r\n\t\tsuper(trustStrategy, hostnameVerifier);\r\n\t}\r\n\r\n    private static final X509HostnameVerifier hostnameVerifier = new X509HostnameVerifier() {\r\n\t    @Override\r\n\t    public void verify(String host, SSLSocket ssl) throws IOException {\r\n\t\t    // Do nothing\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public void verify(String host, X509Certificate cert) throws SSLException {\r\n\t\t\t//Do nothing\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public void verify(String host, String[] cns, String[] subjectAlts) throws SSLException {\r\n\t\t    //Do nothing\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public boolean verify(String s, SSLSession sslSession) {\r\n\t\t    return true; \r\n\t    }\r\n    };\r\n\r\n\tprivate static final TrustStrategy trustStrategy = new TrustStrategy() {\r\n\t\t@Override\r\n\t\tpublic boolean isTrusted(X509Certificate[] chain, String authType) throws CertificateException {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t};\r\n    }\r\n\r\n----\r\n\r\nIf behind a proxy, need to do this - \r\n\r\n    HttpParams params = new BasicHttpParams();\r\n\t\tparams.setParameter(AuthPNames.PROXY_AUTH_PREF, getClientAuthPrefs());\r\n\r\n    DefaultHttpClient httpclient = new DefaultHttpClient(cm, params);\r\n\r\n    httpclient.getCredentialsProvider().setCredentials(\r\n\t\t\t\t\t\t\tnew AuthScope(proxyHost, proxyPort),\r\n\t\t\t\t\t\t\tnew UsernamePasswordCredentials(proxyUser, proxyPass));","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>This is how I did it - </p>\n\n<ol>\n<li>Create my own MockSSLSocketFactory (Class attached below)</li>\n<li>Use it to initialise DefaultHttpClient. Proxy settings need to be provided if a proxy is used. </li>\n</ol>\n\n<hr>\n\n<p>Initialising DefaultHTTPClient - </p>\n\n<pre><code>SchemeRegistry schemeRegistry = new SchemeRegistry();\n    schemeRegistry.register(new Scheme(\"http\", 80, PlainSocketFactory.getSocketFactory()));\n    schemeRegistry.register(new Scheme(\"https\", 443, new MockSSLSocketFactory()));\n    ClientConnectionManager cm = new SingleClientConnManager(schemeRegistry);\n\n    DefaultHttpClient httpclient = new DefaultHttpClient(cm);\n</code></pre>\n\n<hr>\n\n<p>Mock SSL Factory - </p>\n\n<pre><code>public class MockSSLSocketFactory extends SSLSocketFactory {\n\npublic MockSSLSocketFactory() throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException, UnrecoverableKeyException {\n    super(trustStrategy, hostnameVerifier);\n}\n\nprivate static final X509HostnameVerifier hostnameVerifier = new X509HostnameVerifier() {\n    @Override\n    public void verify(String host, SSLSocket ssl) throws IOException {\n        // Do nothing\n    }\n\n    @Override\n    public void verify(String host, X509Certificate cert) throws SSLException {\n        //Do nothing\n    }\n\n    @Override\n    public void verify(String host, String[] cns, String[] subjectAlts) throws SSLException {\n        //Do nothing\n    }\n\n    @Override\n    public boolean verify(String s, SSLSession sslSession) {\n        return true; \n    }\n};\n\nprivate static final TrustStrategy trustStrategy = new TrustStrategy() {\n    @Override\n    public boolean isTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n        return true;\n    }\n};\n}\n</code></pre>\n\n<hr>\n\n<p>If behind a proxy, need to do this - </p>\n\n<pre><code>HttpParams params = new BasicHttpParams();\n    params.setParameter(AuthPNames.PROXY_AUTH_PREF, getClientAuthPrefs());\n\nDefaultHttpClient httpclient = new DefaultHttpClient(cm, params);\n\nhttpclient.getCredentialsProvider().setCredentials(\n                        new AuthScope(proxyHost, proxyPort),\n                        new UsernamePasswordCredentials(proxyUser, proxyPass));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":266342,"reputation":7863,"user_id":553865,"accept_rate":67,"display_name":"Mike Slinn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1348524056,"creation_date":1348524056,"answer_id":12573535,"question_id":2703161,"body_markdown":"If you encountered this problem when using AmazonS3Client, which embeds Apache HttpClient 4.1, you simply need to define a system property like this so that the SSL cert checker is relaxed:\r\n\r\n-Dcom.amazonaws.sdk.disableCertChecking=true\r\n\r\nMischief managed","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>If you encountered this problem when using AmazonS3Client, which embeds Apache HttpClient 4.1, you simply need to define a system property like this so that the SSL cert checker is relaxed:</p>\n\n<p>-Dcom.amazonaws.sdk.disableCertChecking=true</p>\n\n<p>Mischief managed</p>\n"},{"comments":[{"owner":{"account_id":1178518,"reputation":954,"user_id":1153946,"display_name":"STM"},"score":0,"creation_date":1407273574,"post_id":17472034,"comment_id":39149014,"body_markdown":"Unfortunately deprecated in 4.3: &quot;Deprecated. (4.3) do not use.&quot;","body":"Unfortunately deprecated in 4.3: &quot;Deprecated. (4.3) do not use.&quot;"}],"tags":[],"owner":{"account_id":50263,"reputation":22906,"user_id":149872,"accept_rate":100,"display_name":"Elias Dorneles"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1372945776,"creation_date":1372945776,"answer_id":17472034,"question_id":2703161,"body_markdown":"If you are using the [fluent API][1], you need to set it up via the `Executor`:\r\n\r\n\r\n    Executor.unregisterScheme(&quot;https&quot;);\r\n    SSLSocketFactory sslSocketFactory = new SSLSocketFactory(sslContext,\r\n                                      SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\r\n    Executor.registerScheme(new Scheme(&quot;https&quot;, 443, sslSocketFactory));\r\n\r\n... where `sslContext` is the SSLContext created as shown in the **ZZ Coder**&#39;s answer.\r\n\r\nAfter that, you can do your http requests as:\r\n\r\n    String responseAsString = Request.Get(&quot;https://192.168.1.0/whatever.json&quot;)\r\n                             .execute().getContent().asString();\r\n\r\n&lt;sub&gt;**Note:** tested with HttpClient 4.2&lt;/sub&gt;\r\n\r\n  [1]: http://hc.apache.org/httpcomponents-client-ga/tutorial/html/fluent.html","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>If you are using the <a href=\"http://hc.apache.org/httpcomponents-client-ga/tutorial/html/fluent.html\" rel=\"nofollow\">fluent API</a>, you need to set it up via the <code>Executor</code>:</p>\n\n<pre><code>Executor.unregisterScheme(\"https\");\nSSLSocketFactory sslSocketFactory = new SSLSocketFactory(sslContext,\n                                  SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\nExecutor.registerScheme(new Scheme(\"https\", 443, sslSocketFactory));\n</code></pre>\n\n<p>... where <code>sslContext</code> is the SSLContext created as shown in the <strong>ZZ Coder</strong>'s answer.</p>\n\n<p>After that, you can do your http requests as:</p>\n\n<pre><code>String responseAsString = Request.Get(\"https://192.168.1.0/whatever.json\")\n                         .execute().getContent().asString();\n</code></pre>\n\n<p><sub><strong>Note:</strong> tested with HttpClient 4.2</sub></p>\n"},{"comments":[{"owner":{"account_id":3879192,"reputation":7671,"user_id":3212266,"accept_rate":80,"display_name":"Juan Saravia"},"score":0,"creation_date":1416065266,"post_id":24370091,"comment_id":42436757,"body_markdown":"Thanks for the answer, I would like to know from which package is HttpsClients as I&#39;m using in Android     compile(&quot;org.apache.httpcomponents:httpclient:4.3.4&quot;) but this class doesn&#39;t appear.","body":"Thanks for the answer, I would like to know from which package is HttpsClients as I&#39;m using in Android     compile(&quot;org.apache.httpcomponents:httpclient:4.3.4&quot;) but this class doesn&#39;t appear."},{"owner":{"account_id":323601,"reputation":2971,"user_id":643716,"accept_rate":92,"display_name":"Eric"},"score":1,"creation_date":1416237064,"post_id":24370091,"comment_id":42486240,"body_markdown":"It&#39;s package is org.apache.http.impl.client.HttpClients .","body":"It&#39;s package is org.apache.http.impl.client.HttpClients ."},{"owner":{"account_id":1690480,"reputation":1448,"user_id":1552934,"display_name":"twm"},"score":20,"creation_date":1485367019,"post_id":24370091,"comment_id":70900630,"body_markdown":"This works around a host name mismatch (I assume), but it doesn&#39;t seem to work when the certificate isn&#39;t signed by a trusted authority.","body":"This works around a host name mismatch (I assume), but it doesn&#39;t seem to work when the certificate isn&#39;t signed by a trusted authority."},{"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"score":1,"creation_date":1504073717,"post_id":24370091,"comment_id":78864189,"body_markdown":"@twm that&#39;s why it says it &quot;allows all hostnames&quot;, trust issues require different configuration.","body":"@twm that&#39;s why it says it &quot;allows all hostnames&quot;, trust issues require different configuration."},{"owner":{"account_id":1690480,"reputation":1448,"user_id":1552934,"display_name":"twm"},"score":1,"creation_date":1504106291,"post_id":24370091,"comment_id":78887117,"body_markdown":"@eis, I was pointing out that this answer addresses the original question in certain cases but not others.","body":"@eis, I was pointing out that this answer addresses the original question in certain cases but not others."}],"tags":[],"owner":{"account_id":323601,"reputation":2971,"user_id":643716,"accept_rate":92,"display_name":"Eric"},"comment_count":5,"down_vote_count":3,"up_vote_count":128,"is_accepted":false,"score":125,"last_activity_date":1611920770,"creation_date":1403538449,"answer_id":24370091,"question_id":2703161,"body_markdown":"All of the other answers were either deprecated or didn&#39;t work for HttpClient 4.3.\r\n\r\nHere is a way to allow all hostnames when building an http client.\r\n\r\n    CloseableHttpClient httpClient = HttpClients\r\n        .custom()\r\n        .setHostnameVerifier(new AllowAllHostnameVerifier())\r\n        .build();\r\n\r\nOr if you are using version 4.4 or later, the updated call looks like this: \r\n    \r\n    CloseableHttpClient httpClient = HttpClients\r\n        .custom()\r\n        .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\r\n        .build();","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>All of the other answers were either deprecated or didn't work for HttpClient 4.3.</p>\n<p>Here is a way to allow all hostnames when building an http client.</p>\n<pre><code>CloseableHttpClient httpClient = HttpClients\n    .custom()\n    .setHostnameVerifier(new AllowAllHostnameVerifier())\n    .build();\n</code></pre>\n<p>Or if you are using version 4.4 or later, the updated call looks like this:</p>\n<pre><code>CloseableHttpClient httpClient = HttpClients\n    .custom()\n    .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\n    .build();\n</code></pre>\n"},{"comments":[{"owner":{"display_name":"user5268786"},"score":0,"creation_date":1452163358,"post_id":24624966,"comment_id":57051141,"body_markdown":"How to set values in Headers if I wanted to do that ?","body":"How to set values in Headers if I wanted to do that ?"}],"tags":[],"owner":{"account_id":1891952,"reputation":2743,"user_id":1709793,"accept_rate":0,"display_name":"craftsmannadeem"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1404800589,"creation_date":1404800589,"answer_id":24624966,"question_id":2703161,"body_markdown":"Tested with 4.3.3\r\n\r\n    import java.security.KeyManagementException;\r\n    import java.security.KeyStoreException;\r\n    import java.security.NoSuchAlgorithmException;\r\n    import java.security.SecureRandom;\r\n    import java.security.cert.CertificateException;\r\n    import java.security.cert.X509Certificate;\r\n\r\n    import javax.net.ssl.SSLContext;\r\n\r\n    import org.apache.http.Header;\r\n    import org.apache.http.HttpEntity;\r\n    import org.apache.http.client.methods.CloseableHttpResponse;\r\n    import org.apache.http.client.methods.HttpGet;\r\n    import org.apache.http.conn.ssl.SSLConnectionSocketFactory;\r\n    import org.apache.http.conn.ssl.SSLContexts;\r\n    import org.apache.http.conn.ssl.TrustStrategy;\r\n    import org.apache.http.impl.client.CloseableHttpClient;\r\n    import org.apache.http.impl.client.HttpClients;\r\n    import org.apache.http.util.EntityUtils;\r\n\r\n    public class AccessProtectedResource {\r\n\r\n\tpublic static void main(String[] args) throws Exception {\r\n\r\n\t\t// Trust all certs\r\n\t\tSSLContext sslcontext = buildSSLContext();\r\n\r\n\t\t// Allow TLSv1 protocol only\r\n\t\tSSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\r\n\t\t\t\tsslcontext,\r\n\t\t\t\tnew String[] { &quot;TLSv1&quot; },\r\n\t\t\t\tnull,\r\n\t\t\t\tSSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\r\n\r\n\t\tCloseableHttpClient httpclient = HttpClients.custom()\r\n\t\t\t\t.setSSLSocketFactory(sslsf)\r\n\t\t\t\t.build();\r\n\t\ttry {\r\n\r\n\t\t\tHttpGet httpget = new HttpGet(&quot;https://yoururl&quot;);\r\n\r\n\t\t\tSystem.out.println(&quot;executing request&quot; + httpget.getRequestLine());\r\n\r\n\t\t\tCloseableHttpResponse response = httpclient.execute(httpget);\r\n\t\t\ttry {\r\n\t\t\t\tHttpEntity entity = response.getEntity();\r\n\r\n\t\t\t\tSystem.out.println(&quot;----------------------------------------&quot;);\r\n\t\t\t\tSystem.out.println(response.getStatusLine());\r\n\t\t\t\tif (entity != null) {\r\n\t\t\t\t\tSystem.out.println(&quot;Response content length: &quot; + entity.getContentLength());\r\n\t\t\t\t}\r\n\t\t\t\tfor (Header header : response.getAllHeaders()) {\r\n\t\t\t\t\tSystem.out.println(header);\r\n\t\t\t\t}\r\n\t\t\t\tEntityUtils.consume(entity);\r\n\t\t\t} finally {\r\n\t\t\t\tresponse.close();\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\thttpclient.close();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static SSLContext buildSSLContext()\r\n\t\t\tthrows NoSuchAlgorithmException, KeyManagementException,\r\n\t\t\tKeyStoreException {\r\n\t\tSSLContext sslcontext = SSLContexts.custom()\r\n\t\t\t\t.setSecureRandom(new SecureRandom())\r\n\t\t\t\t.loadTrustMaterial(null, new TrustStrategy() {\r\n\r\n\t\t\t\t\tpublic boolean isTrusted(X509Certificate[] chain, String authType)\r\n\t\t\t\t\t\t\tthrows CertificateException {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.build();\r\n\t\treturn sslcontext;\r\n\t}\r\n}\r\n\r\n\r\n","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>Tested with 4.3.3</p>\n\n<pre><code>import java.security.KeyManagementException;\nimport java.security.KeyStoreException;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.SecureRandom;\nimport java.security.cert.CertificateException;\nimport java.security.cert.X509Certificate;\n\nimport javax.net.ssl.SSLContext;\n\nimport org.apache.http.Header;\nimport org.apache.http.HttpEntity;\nimport org.apache.http.client.methods.CloseableHttpResponse;\nimport org.apache.http.client.methods.HttpGet;\nimport org.apache.http.conn.ssl.SSLConnectionSocketFactory;\nimport org.apache.http.conn.ssl.SSLContexts;\nimport org.apache.http.conn.ssl.TrustStrategy;\nimport org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClients;\nimport org.apache.http.util.EntityUtils;\n\npublic class AccessProtectedResource {\n\npublic static void main(String[] args) throws Exception {\n\n    // Trust all certs\n    SSLContext sslcontext = buildSSLContext();\n\n    // Allow TLSv1 protocol only\n    SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\n            sslcontext,\n            new String[] { \"TLSv1\" },\n            null,\n            SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\n\n    CloseableHttpClient httpclient = HttpClients.custom()\n            .setSSLSocketFactory(sslsf)\n            .build();\n    try {\n\n        HttpGet httpget = new HttpGet(\"https://yoururl\");\n\n        System.out.println(\"executing request\" + httpget.getRequestLine());\n\n        CloseableHttpResponse response = httpclient.execute(httpget);\n        try {\n            HttpEntity entity = response.getEntity();\n\n            System.out.println(\"----------------------------------------\");\n            System.out.println(response.getStatusLine());\n            if (entity != null) {\n                System.out.println(\"Response content length: \" + entity.getContentLength());\n            }\n            for (Header header : response.getAllHeaders()) {\n                System.out.println(header);\n            }\n            EntityUtils.consume(entity);\n        } finally {\n            response.close();\n        }\n    } finally {\n        httpclient.close();\n    }\n}\n\nprivate static SSLContext buildSSLContext()\n        throws NoSuchAlgorithmException, KeyManagementException,\n        KeyStoreException {\n    SSLContext sslcontext = SSLContexts.custom()\n            .setSecureRandom(new SecureRandom())\n            .loadTrustMaterial(null, new TrustStrategy() {\n\n                public boolean isTrusted(X509Certificate[] chain, String authType)\n                        throws CertificateException {\n                    return true;\n                }\n            })\n            .build();\n    return sslcontext;\n}\n</code></pre>\n\n<p>}</p>\n"},{"comments":[{"owner":{"account_id":401940,"reputation":13996,"user_id":768795,"display_name":"Thomas W"},"score":3,"creation_date":1425446022,"post_id":27556715,"comment_id":45962419,"body_markdown":"For HttpClient 4.4 upwards, you have to do this -- and may also need to create an `SSLConnectionSocketFactory` using that `SSLContext`, and define this in a `Registry&lt;ConnectionSocketFactory&gt;`, if you&#39;re going to create a `PoolingHttpClientConnectionManager`.  The other answers are more popular, but don&#39;t work at HttpClient 4.4.","body":"For HttpClient 4.4 upwards, you have to do this -- and may also need to create an <code>SSLConnectionSocketFactory</code> using that <code>SSLContext</code>, and define this in a <code>Registry&lt;ConnectionSocketFactory&gt;</code>, if you&#39;re going to create a <code>PoolingHttpClientConnectionManager</code>.  The other answers are more popular, but don&#39;t work at HttpClient 4.4."},{"owner":{"account_id":3535938,"reputation":4707,"user_id":2954288,"accept_rate":48,"display_name":"Harald"},"score":1,"creation_date":1453986454,"post_id":27556715,"comment_id":57847377,"body_markdown":"Works exactly like this with httpclient-4.3.5.jar.","body":"Works exactly like this with httpclient-4.3.5.jar."},{"owner":{"account_id":8886664,"reputation":141,"user_id":6634724,"display_name":"Naveen Yalla"},"score":0,"creation_date":1633509452,"post_id":27556715,"comment_id":122775606,"body_markdown":"works with httpclient 4.3.2","body":"works with httpclient 4.3.2"}],"tags":[],"owner":{"account_id":1178518,"reputation":954,"user_id":1153946,"display_name":"STM"},"comment_count":3,"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1418941619,"creation_date":1418941139,"answer_id":27556715,"question_id":2703161,"body_markdown":"For the record, tested with httpclient 4.3.6 and compatible with Executor of fluent api:\r\n\r\n    CloseableHttpClient httpClient = HttpClients.custom().\r\n    \t\t\t\t\tsetHostnameVerifier(new AllowAllHostnameVerifier()).\r\n    \t\t\t\t\tsetSslcontext(new SSLContextBuilder().loadTrustMaterial(null, new TrustStrategy()\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t\tpublic boolean isTrusted(X509Certificate[] arg0, String arg1) throws CertificateException\r\n    \t\t\t\t\t\t{\r\n    \t\t\t\t\t\t\treturn true;\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t}).build()).build();","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>For the record, tested with httpclient 4.3.6 and compatible with Executor of fluent api:</p>\n\n<pre><code>CloseableHttpClient httpClient = HttpClients.custom().\n                    setHostnameVerifier(new AllowAllHostnameVerifier()).\n                    setSslcontext(new SSLContextBuilder().loadTrustMaterial(null, new TrustStrategy()\n                    {\n                        public boolean isTrusted(X509Certificate[] arg0, String arg1) throws CertificateException\n                        {\n                            return true;\n                        }\n                    }).build()).build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":401940,"reputation":13996,"user_id":768795,"display_name":"Thomas W"},"comment_count":0,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1426934537,"creation_date":1425446484,"answer_id":28847175,"question_id":2703161,"body_markdown":"For Apache HttpClient 4.4:  \r\n\r\n    HttpClientBuilder b = HttpClientBuilder.create();\r\n\r\n    SSLContext sslContext = new SSLContextBuilder().loadTrustMaterial(null, new TrustStrategy() {\r\n\t\tpublic boolean isTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}).build();\r\n    b.setSslcontext( sslContext);\r\n\t\r\n    // or SSLConnectionSocketFactory.getDefaultHostnameVerifier(), if you don&#39;t want to weaken\r\n    HostnameVerifier hostnameVerifier = SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER;\r\n\r\n    SSLConnectionSocketFactory sslSocketFactory = new SSLConnectionSocketFactory(sslContext, hostnameVerifier);\r\n    Registry&lt;ConnectionSocketFactory&gt; socketFactoryRegistry = RegistryBuilder.&lt;ConnectionSocketFactory&gt;create()\r\n\t\t\t.register(&quot;http&quot;, PlainConnectionSocketFactory.getSocketFactory())\r\n\t\t\t.register(&quot;https&quot;, sslSocketFactory)\r\n            .build();\r\n\r\n    // allows multi-threaded use\r\n    PoolingHttpClientConnectionManager connMgr = new PoolingHttpClientConnectionManager( socketFactoryRegistry);\r\n    b.setConnectionManager( connMgr);\r\n      \r\n    HttpClient client = b.build();\r\n\r\nThis is extracted from our actual working implementation. \r\n\r\nThe other answers are popular, but for HttpClient 4.4 they don&#39;t work. I spent hours trying &amp; exhausting possibilities, but there seems to have been extremely major API change &amp; relocation at 4.4.\r\n\r\nSee also a slightly fuller explanation at: http://literatejava.com/networks/ignore-ssl-certificate-errors-apache-httpclient-4-4/\r\n\r\nHope that helps!","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>For Apache HttpClient 4.4:  </p>\n\n<pre><code>HttpClientBuilder b = HttpClientBuilder.create();\n\nSSLContext sslContext = new SSLContextBuilder().loadTrustMaterial(null, new TrustStrategy() {\n    public boolean isTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {\n        return true;\n    }\n}).build();\nb.setSslcontext( sslContext);\n\n// or SSLConnectionSocketFactory.getDefaultHostnameVerifier(), if you don't want to weaken\nHostnameVerifier hostnameVerifier = SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER;\n\nSSLConnectionSocketFactory sslSocketFactory = new SSLConnectionSocketFactory(sslContext, hostnameVerifier);\nRegistry&lt;ConnectionSocketFactory&gt; socketFactoryRegistry = RegistryBuilder.&lt;ConnectionSocketFactory&gt;create()\n        .register(\"http\", PlainConnectionSocketFactory.getSocketFactory())\n        .register(\"https\", sslSocketFactory)\n        .build();\n\n// allows multi-threaded use\nPoolingHttpClientConnectionManager connMgr = new PoolingHttpClientConnectionManager( socketFactoryRegistry);\nb.setConnectionManager( connMgr);\n\nHttpClient client = b.build();\n</code></pre>\n\n<p>This is extracted from our actual working implementation. </p>\n\n<p>The other answers are popular, but for HttpClient 4.4 they don't work. I spent hours trying &amp; exhausting possibilities, but there seems to have been extremely major API change &amp; relocation at 4.4.</p>\n\n<p>See also a slightly fuller explanation at: <a href=\"http://literatejava.com/networks/ignore-ssl-certificate-errors-apache-httpclient-4-4/\" rel=\"noreferrer\">http://literatejava.com/networks/ignore-ssl-certificate-errors-apache-httpclient-4-4/</a></p>\n\n<p>Hope that helps!</p>\n"},{"tags":[],"owner":{"account_id":2238040,"reputation":5463,"user_id":1973820,"accept_rate":36,"display_name":"Hamed MP"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1428075081,"creation_date":1428075081,"answer_id":29435138,"question_id":2703161,"body_markdown":"We are using HTTPClient 4.3.5 and we tried almost all solutions exist on the stackoverflow but nothing,\r\nAfter thinking and figuring out the problem, we come to the following code which works perfectly,\r\njust add it before creating HttpClient instance.\r\n\r\n&gt; some method to call when making post requests....\r\n\r\n    SSLContextBuilder builder = new SSLContextBuilder();\r\n        builder.loadTrustMaterial(null, new TrustStrategy() {\r\n            @Override\r\n            public boolean isTrusted(X509Certificate[] chain, String authType) throws CertificateException {\r\n                return true;\r\n            }\r\n        });\r\n\r\n        SSLConnectionSocketFactory sslSF = new SSLConnectionSocketFactory(builder.build(),\r\n                SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\r\n\r\n        HttpClient httpClient = HttpClients.custom().setSSLSocketFactory(sslSF).build();\r\n        HttpPost postRequest = new HttpPost(url);\r\n\r\n&gt; continue your request in the normal form","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>We are using HTTPClient 4.3.5 and we tried almost all solutions exist on the stackoverflow but nothing,\nAfter thinking and figuring out the problem, we come to the following code which works perfectly,\njust add it before creating HttpClient instance.</p>\n\n<blockquote>\n  <p>some method to call when making post requests....</p>\n</blockquote>\n\n<pre><code>SSLContextBuilder builder = new SSLContextBuilder();\n    builder.loadTrustMaterial(null, new TrustStrategy() {\n        @Override\n        public boolean isTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n            return true;\n        }\n    });\n\n    SSLConnectionSocketFactory sslSF = new SSLConnectionSocketFactory(builder.build(),\n            SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\n\n    HttpClient httpClient = HttpClients.custom().setSSLSocketFactory(sslSF).build();\n    HttpPost postRequest = new HttpPost(url);\n</code></pre>\n\n<blockquote>\n  <p>continue your request in the normal form</p>\n</blockquote>\n"},{"comments":[{"owner":{"display_name":"user5268786"},"score":0,"creation_date":1452162811,"post_id":29651988,"comment_id":57050746,"body_markdown":"I am getting this: Caused by: javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: No subject alternative names present?","body":"I am getting this: Caused by: javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: No subject alternative names present?"},{"owner":{"display_name":"user5268786"},"score":0,"creation_date":1452162921,"post_id":29651988,"comment_id":57050832,"body_markdown":"How to allow connections to SSL sites without certs in HttpClient API or in RestClient API ?","body":"How to allow connections to SSL sites without certs in HttpClient API or in RestClient API ?"}],"tags":[],"owner":{"account_id":1383972,"reputation":588,"user_id":1316389,"display_name":"Chilly"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1429105598,"creation_date":1429105598,"answer_id":29651988,"question_id":2703161,"body_markdown":"To accept all certificates in HttpClient 4.4.x you can use the following one liner when creating the httpClient:\r\n\r\n    httpClient = HttpClients.custom().setSSLHostnameVerifier(new NoopHostnameVerifier()).setSslcontext(new SSLContextBuilder().loadTrustMaterial(null, (x509Certificates, s) -&gt; true).build()).build();","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>To accept all certificates in HttpClient 4.4.x you can use the following one liner when creating the httpClient:</p>\n\n<pre><code>httpClient = HttpClients.custom().setSSLHostnameVerifier(new NoopHostnameVerifier()).setSslcontext(new SSLContextBuilder().loadTrustMaterial(null, (x509Certificates, s) -&gt; true).build()).build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":328884,"reputation":460,"user_id":652078,"accept_rate":73,"display_name":"sairn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1454597977,"creation_date":1454596787,"answer_id":35203927,"question_id":2703161,"body_markdown":"fwiw, an example using &quot;RestEasy&quot; implementation of JAX-RS 2.x to build a special &quot;trust all&quot; client...\r\n\r\n\t\timport java.io.IOException;\r\n\t\timport java.net.MalformedURLException;\r\n\t\timport java.security.GeneralSecurityException;\r\n\t\timport java.security.KeyManagementException;\r\n\t\timport java.security.KeyStoreException;\r\n\t\timport java.security.NoSuchAlgorithmException;\r\n\t\timport java.security.cert.CertificateException;\r\n\t\timport java.security.cert.X509Certificate;\r\n\t\timport java.util.ArrayList;\r\n\t\timport java.util.Arrays;\r\n\t\timport javax.ejb.Stateless;\r\n\t\timport javax.net.ssl.SSLContext;\r\n\t\timport javax.ws.rs.GET;\r\n\t\timport javax.ws.rs.Path;\r\n\t\timport javax.ws.rs.Produces;\r\n\t\timport org.apache.logging.log4j.LogManager;\r\n\t\timport org.apache.logging.log4j.Logger;\r\n\t\timport javax.ws.rs.client.Entity;\r\n\t\timport javax.ws.rs.core.MediaType;\r\n\t\timport javax.ws.rs.core.Response;\r\n\t\timport org.apache.http.config.Registry;\r\n\t\timport org.apache.http.config.RegistryBuilder;\r\n\t\timport org.apache.http.conn.HttpClientConnectionManager;\r\n\t\timport org.apache.http.conn.ssl.TrustStrategy;\r\n\t\timport org.jboss.resteasy.client.jaxrs.ResteasyClient;\r\n\t\timport org.jboss.resteasy.client.jaxrs.ResteasyClientBuilder;\r\n\t\timport org.jboss.resteasy.client.jaxrs.ResteasyWebTarget;\r\n\t\timport org.jboss.resteasy.client.jaxrs.engines.ApacheHttpClient4Engine;\r\n\t\timport org.apache.http.impl.conn.BasicHttpClientConnectionManager;\r\n\t\timport org.apache.http.conn.socket.ConnectionSocketFactory;\r\n\t\timport org.apache.http.conn.ssl.NoopHostnameVerifier;\r\n\t\timport org.apache.http.conn.ssl.SSLConnectionSocketFactory;\r\n\t\timport org.apache.http.impl.client.CloseableHttpClient;\r\n\t\timport org.apache.http.impl.client.HttpClientBuilder;\r\n\t\timport org.apache.http.ssl.SSLContexts;\r\n\r\n\t\t@Stateless\r\n\t\t@Path(&quot;/postservice&quot;)\r\n\t\tpublic class PostService {\r\n\r\n\t\t    private static final Logger LOG = LogManager.getLogger(&quot;PostService&quot;);\r\n\r\n\t\t    public PostService() {\r\n\t\t    }\r\n\r\n\t\t    @GET\r\n\t\t    @Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})\r\n\t\t    public PostRespDTO get() throws NoSuchAlgorithmException, KeyManagementException, MalformedURLException, IOException, GeneralSecurityException {\r\n\r\n\t\t\t\t//...object passed to the POST method...\r\n\t\t\t\tPostDTO requestObject = new PostDTO();\r\n\t\t\t\trequestObject.setEntryAList(new ArrayList&lt;&gt;(Arrays.asList(&quot;ITEM0000A&quot;, &quot;ITEM0000B&quot;, &quot;ITEM0000C&quot;)));\r\n\t\t\t\trequestObject.setEntryBList(new ArrayList&lt;&gt;(Arrays.asList(&quot;AAA&quot;, &quot;BBB&quot;, &quot;CCC&quot;)));\r\n\r\n\t\t\t\t//...build special &quot;trust all&quot; client to call POST method...\r\n\t\t\t\tApacheHttpClient4Engine engine = new ApacheHttpClient4Engine(createTrustAllClient());\r\n\r\n\t\t\t\tResteasyClient client = new ResteasyClientBuilder().httpEngine(engine).build();\r\n\t\t\t\tResteasyWebTarget target = client.target(&quot;https://localhost:7002/postRespWS&quot;).path(&quot;postrespservice&quot;);\r\n\t\t\t\tResponse response = target.request().accept(MediaType.APPLICATION_JSON).post(Entity.entity(requestObject, MediaType.APPLICATION_JSON));\r\n\t\t\t\t\r\n\t\t\t\t//...object returned from the POST method...\r\n\t\t\t\tPostRespDTO responseObject = response.readEntity(PostRespDTO.class);\r\n\r\n\t\t\t\tresponse.close();\r\n\r\n\t\t\t\treturn responseObject;\r\n\t\t    }\r\n\r\n\r\n\t\t    //...get special &quot;trust all&quot; client...\r\n\t\t    private static CloseableHttpClient createTrustAllClient() throws NoSuchAlgorithmException, KeyStoreException, KeyManagementException {\r\n\r\n\t\t\t\tSSLContext sslContext = SSLContexts.custom().loadTrustMaterial(null, TRUSTALLCERTS).useProtocol(&quot;TLS&quot;).build();\r\n\t\t\t\tHttpClientBuilder builder = HttpClientBuilder.create();\r\n\t\t\t\tNoopHostnameVerifier noop = new NoopHostnameVerifier();\r\n\t\t\t\tSSLConnectionSocketFactory sslConnectionSocketFactory = new SSLConnectionSocketFactory(sslContext, noop);\r\n\t\t\t\tbuilder.setSSLSocketFactory(sslConnectionSocketFactory);\r\n\t\t\t\tRegistry&lt;ConnectionSocketFactory&gt; registry = RegistryBuilder.&lt;ConnectionSocketFactory&gt;create().register(&quot;https&quot;, sslConnectionSocketFactory).build();\r\n\t\t\t\tHttpClientConnectionManager ccm = new BasicHttpClientConnectionManager(registry);\r\n\t\t\t\tbuilder.setConnectionManager(ccm);\r\n\r\n\t\t\t\treturn builder.build();\r\n\t\t    }\r\n\r\n\r\n\t\t    private static final TrustStrategy TRUSTALLCERTS = new TrustStrategy() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic boolean isTrusted(X509Certificate[] chain, String authType)\r\n\t\t\t\t\tthrows CertificateException {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t    };\r\n\t\t}\r\n\r\n\r\n***related Maven dependencies***\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;resteasy-client&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;3.0.10.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;jaxrs-api&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;3.0.10.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;resteasy-jackson2-provider&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;3.0.10.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;4.5&lt;/version&gt;\r\n\t\t    &lt;type&gt;jar&lt;/type&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;javax&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;javaee-web-api&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;7.0&lt;/version&gt;\r\n\t\t    &lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt; ","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>fwiw, an example using \"RestEasy\" implementation of JAX-RS 2.x to build a special \"trust all\" client...</p>\n\n<pre><code>    import java.io.IOException;\n    import java.net.MalformedURLException;\n    import java.security.GeneralSecurityException;\n    import java.security.KeyManagementException;\n    import java.security.KeyStoreException;\n    import java.security.NoSuchAlgorithmException;\n    import java.security.cert.CertificateException;\n    import java.security.cert.X509Certificate;\n    import java.util.ArrayList;\n    import java.util.Arrays;\n    import javax.ejb.Stateless;\n    import javax.net.ssl.SSLContext;\n    import javax.ws.rs.GET;\n    import javax.ws.rs.Path;\n    import javax.ws.rs.Produces;\n    import org.apache.logging.log4j.LogManager;\n    import org.apache.logging.log4j.Logger;\n    import javax.ws.rs.client.Entity;\n    import javax.ws.rs.core.MediaType;\n    import javax.ws.rs.core.Response;\n    import org.apache.http.config.Registry;\n    import org.apache.http.config.RegistryBuilder;\n    import org.apache.http.conn.HttpClientConnectionManager;\n    import org.apache.http.conn.ssl.TrustStrategy;\n    import org.jboss.resteasy.client.jaxrs.ResteasyClient;\n    import org.jboss.resteasy.client.jaxrs.ResteasyClientBuilder;\n    import org.jboss.resteasy.client.jaxrs.ResteasyWebTarget;\n    import org.jboss.resteasy.client.jaxrs.engines.ApacheHttpClient4Engine;\n    import org.apache.http.impl.conn.BasicHttpClientConnectionManager;\n    import org.apache.http.conn.socket.ConnectionSocketFactory;\n    import org.apache.http.conn.ssl.NoopHostnameVerifier;\n    import org.apache.http.conn.ssl.SSLConnectionSocketFactory;\n    import org.apache.http.impl.client.CloseableHttpClient;\n    import org.apache.http.impl.client.HttpClientBuilder;\n    import org.apache.http.ssl.SSLContexts;\n\n    @Stateless\n    @Path(\"/postservice\")\n    public class PostService {\n\n        private static final Logger LOG = LogManager.getLogger(\"PostService\");\n\n        public PostService() {\n        }\n\n        @GET\n        @Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})\n        public PostRespDTO get() throws NoSuchAlgorithmException, KeyManagementException, MalformedURLException, IOException, GeneralSecurityException {\n\n            //...object passed to the POST method...\n            PostDTO requestObject = new PostDTO();\n            requestObject.setEntryAList(new ArrayList&lt;&gt;(Arrays.asList(\"ITEM0000A\", \"ITEM0000B\", \"ITEM0000C\")));\n            requestObject.setEntryBList(new ArrayList&lt;&gt;(Arrays.asList(\"AAA\", \"BBB\", \"CCC\")));\n\n            //...build special \"trust all\" client to call POST method...\n            ApacheHttpClient4Engine engine = new ApacheHttpClient4Engine(createTrustAllClient());\n\n            ResteasyClient client = new ResteasyClientBuilder().httpEngine(engine).build();\n            ResteasyWebTarget target = client.target(\"https://localhost:7002/postRespWS\").path(\"postrespservice\");\n            Response response = target.request().accept(MediaType.APPLICATION_JSON).post(Entity.entity(requestObject, MediaType.APPLICATION_JSON));\n\n            //...object returned from the POST method...\n            PostRespDTO responseObject = response.readEntity(PostRespDTO.class);\n\n            response.close();\n\n            return responseObject;\n        }\n\n\n        //...get special \"trust all\" client...\n        private static CloseableHttpClient createTrustAllClient() throws NoSuchAlgorithmException, KeyStoreException, KeyManagementException {\n\n            SSLContext sslContext = SSLContexts.custom().loadTrustMaterial(null, TRUSTALLCERTS).useProtocol(\"TLS\").build();\n            HttpClientBuilder builder = HttpClientBuilder.create();\n            NoopHostnameVerifier noop = new NoopHostnameVerifier();\n            SSLConnectionSocketFactory sslConnectionSocketFactory = new SSLConnectionSocketFactory(sslContext, noop);\n            builder.setSSLSocketFactory(sslConnectionSocketFactory);\n            Registry&lt;ConnectionSocketFactory&gt; registry = RegistryBuilder.&lt;ConnectionSocketFactory&gt;create().register(\"https\", sslConnectionSocketFactory).build();\n            HttpClientConnectionManager ccm = new BasicHttpClientConnectionManager(registry);\n            builder.setConnectionManager(ccm);\n\n            return builder.build();\n        }\n\n\n        private static final TrustStrategy TRUSTALLCERTS = new TrustStrategy() {\n            @Override\n            public boolean isTrusted(X509Certificate[] chain, String authType)\n                throws CertificateException {\n                return true;\n            }\n        };\n    }\n</code></pre>\n\n<p><strong><em>related Maven dependencies</em></strong></p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\n        &lt;artifactId&gt;resteasy-client&lt;/artifactId&gt;\n        &lt;version&gt;3.0.10.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxrs-api&lt;/artifactId&gt;\n        &lt;version&gt;3.0.10.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\n        &lt;artifactId&gt;resteasy-jackson2-provider&lt;/artifactId&gt;\n        &lt;version&gt;3.0.10.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n        &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n        &lt;version&gt;4.5&lt;/version&gt;\n        &lt;type&gt;jar&lt;/type&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax&lt;/groupId&gt;\n        &lt;artifactId&gt;javaee-web-api&lt;/artifactId&gt;\n        &lt;version&gt;7.0&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt; \n</code></pre>\n"},{"comments":[{"owner":{"account_id":3655393,"reputation":331,"user_id":3046570,"display_name":"Vikas Ranjan"},"score":0,"creation_date":1516705894,"post_id":38509015,"comment_id":83788371,"body_markdown":"Worked for me also for httpclient 4.5.2","body":"Worked for me also for httpclient 4.5.2"},{"owner":{"account_id":7409934,"reputation":301,"user_id":5637613,"display_name":"You&#39;re awesome"},"score":0,"creation_date":1538903309,"post_id":38509015,"comment_id":92301298,"body_markdown":"this one is up-to-date for HttpClient 4.5","body":"this one is up-to-date for HttpClient 4.5"},{"owner":{"account_id":19956973,"reputation":91,"user_id":14625432,"display_name":"dilesh yadav"},"score":0,"creation_date":1677675048,"post_id":38509015,"comment_id":133383864,"body_markdown":"Answers the question and valid till in 2023 with the latest version of HttpClient","body":"Answers the question and valid till in 2023 with the latest version of HttpClient"}],"tags":[],"owner":{"account_id":3967293,"reputation":1851,"user_id":3272856,"display_name":"Z4-"},"comment_count":3,"down_vote_count":0,"up_vote_count":62,"is_accepted":false,"score":62,"last_activity_date":1538563376,"creation_date":1469116821,"answer_id":38509015,"question_id":2703161,"body_markdown":"Just had to do this with the newer **HttpClient 4.5** and it seems like they&#39;ve deprecated a few things since 4.4 so here&#39;s the snippet that works for me and uses the most recent API:\r\n\r\n    final SSLContext sslContext = new SSLContextBuilder()\r\n            .loadTrustMaterial(null, (x509CertChain, authType) -&gt; true)\r\n            .build();\r\n\r\n    return HttpClientBuilder.create()\r\n            .setSSLContext(sslContext)\r\n            .setConnectionManager(\r\n                    new PoolingHttpClientConnectionManager(\r\n                            RegistryBuilder.&lt;ConnectionSocketFactory&gt;create()\r\n                                    .register(&quot;http&quot;, PlainConnectionSocketFactory.INSTANCE)\r\n                                    .register(&quot;https&quot;, new SSLConnectionSocketFactory(sslContext,\r\n                                            NoopHostnameVerifier.INSTANCE))\r\n                                    .build()\r\n                    ))\r\n            .build();\r\n","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>Just had to do this with the newer <strong>HttpClient 4.5</strong> and it seems like they've deprecated a few things since 4.4 so here's the snippet that works for me and uses the most recent API:</p>\n\n<pre><code>final SSLContext sslContext = new SSLContextBuilder()\n        .loadTrustMaterial(null, (x509CertChain, authType) -&gt; true)\n        .build();\n\nreturn HttpClientBuilder.create()\n        .setSSLContext(sslContext)\n        .setConnectionManager(\n                new PoolingHttpClientConnectionManager(\n                        RegistryBuilder.&lt;ConnectionSocketFactory&gt;create()\n                                .register(\"http\", PlainConnectionSocketFactory.INSTANCE)\n                                .register(\"https\", new SSLConnectionSocketFactory(sslContext,\n                                        NoopHostnameVerifier.INSTANCE))\n                                .build()\n                ))\n        .build();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":918791,"reputation":1550,"user_id":950953,"accept_rate":76,"display_name":"YoungDinosaur"},"score":1,"creation_date":1477692726,"post_id":39560151,"comment_id":67884957,"body_markdown":"This is the only solution that worked for me. I tried the above solutions for 4.3 and 4.4 before upgrading to 4.5 and trying this.","body":"This is the only solution that worked for me. I tried the above solutions for 4.3 and 4.4 before upgrading to 4.5 and trying this."}],"tags":[],"owner":{"account_id":282657,"reputation":21077,"user_id":579689,"accept_rate":54,"display_name":"Talespin_Kit"},"comment_count":1,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1474216984,"creation_date":1474216984,"answer_id":39560151,"question_id":2703161,"body_markdown":"With fluent 4.5.2 i had to make the following modification to make it work.\r\n\r\n    try {\r\n        TrustManager[] trustAllCerts = new TrustManager[] {\r\n\t       new X509TrustManager() {\r\n\t    public java.security.cert.X509Certificate[] getAcceptedIssuers() {\r\n\t\t    return null;\r\n\t    }\r\n\t\tpublic void checkClientTrusted(X509Certificate[] certs, String authType) {  }\r\n\r\n\t\tpublic void checkServerTrusted(X509Certificate[] certs, String authType) {  }\r\n\t\t}\r\n\t    };\r\n\r\n\t    SSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);\r\n\t    sc.init(null, trustAllCerts, new SecureRandom());\r\n\t    CloseableHttpClient httpClient = HttpClients.custom().setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE).setSslcontext(sc).build();\r\n\r\n\t    String output = Executor.newInstance(httpClient).execute(Request.Get(&quot;https://127.0.0.1:3000/something&quot;)\r\n\t\t\t\t\t\t\t\t\t\t  .connectTimeout(1000)\r\n\t\t\t\t\t\t\t\t\t\t  .socketTimeout(1000)).returnContent().asString();\r\n        } catch (Exception e) {\r\n        }\r\n","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>With fluent 4.5.2 i had to make the following modification to make it work.</p>\n\n<pre><code>try {\n    TrustManager[] trustAllCerts = new TrustManager[] {\n       new X509TrustManager() {\n    public java.security.cert.X509Certificate[] getAcceptedIssuers() {\n        return null;\n    }\n    public void checkClientTrusted(X509Certificate[] certs, String authType) {  }\n\n    public void checkServerTrusted(X509Certificate[] certs, String authType) {  }\n    }\n    };\n\n    SSLContext sc = SSLContext.getInstance(\"SSL\");\n    sc.init(null, trustAllCerts, new SecureRandom());\n    CloseableHttpClient httpClient = HttpClients.custom().setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE).setSslcontext(sc).build();\n\n    String output = Executor.newInstance(httpClient).execute(Request.Get(\"https://127.0.0.1:3000/something\")\n                                      .connectTimeout(1000)\n                                      .socketTimeout(1000)).returnContent().asString();\n    } catch (Exception e) {\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1386628,"reputation":8709,"user_id":1318528,"accept_rate":74,"display_name":"Jacky"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1513221842,"creation_date":1513221842,"answer_id":47805407,"question_id":2703161,"body_markdown":"Tested on 4.5.4:\r\n\r\n                SSLContext sslContext = new SSLContextBuilder()\r\n                        .loadTrustMaterial(null, (TrustStrategy) (arg0, arg1) -&gt; true).build();\r\n    \r\n                CloseableHttpClient httpClient = HttpClients\r\n                        .custom()\r\n                        .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\r\n                        .setSSLContext(sslContext)\r\n                        .build();\r\n\r\n","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>Tested on 4.5.4:</p>\n\n<pre><code>            SSLContext sslContext = new SSLContextBuilder()\n                    .loadTrustMaterial(null, (TrustStrategy) (arg0, arg1) -&gt; true).build();\n\n            CloseableHttpClient httpClient = HttpClients\n                    .custom()\n                    .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\n                    .setSSLContext(sslContext)\n                    .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13299258,"reputation":51,"user_id":9601220,"display_name":"Lachesis"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1522920087,"creation_date":1522920087,"answer_id":49668661,"question_id":2703161,"body_markdown":"Tested with HttpClient 4.5.5 with Fluent API\r\n\r\n    final SSLContext sslContext = new SSLContextBuilder()\r\n        .loadTrustMaterial(null, (x509CertChain, authType) -&gt; true).build();\r\n\r\n    CloseableHttpClient httpClient = HttpClients.custom()\r\n        .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\r\n    \t.setSSLContext(sslContext).build();\r\n\r\n    String result = Executor.newInstance(httpClient)\r\n        .execute(Request.Get(&quot;https://localhost:8080/someapi&quot;)\r\n        .connectTimeout(1000).socketTimeout(1000))\r\n    \t.returnContent().asString();\r\n","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>Tested with HttpClient 4.5.5 with Fluent API</p>\n\n<pre><code>final SSLContext sslContext = new SSLContextBuilder()\n    .loadTrustMaterial(null, (x509CertChain, authType) -&gt; true).build();\n\nCloseableHttpClient httpClient = HttpClients.custom()\n    .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\n    .setSSLContext(sslContext).build();\n\nString result = Executor.newInstance(httpClient)\n    .execute(Request.Get(\"https://localhost:8080/someapi\")\n    .connectTimeout(1000).socketTimeout(1000))\n    .returnContent().asString();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2055585,"reputation":437,"user_id":5285016,"display_name":"Brijesh Patel"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1525457395,"creation_date":1525457395,"answer_id":50180854,"question_id":2703161,"body_markdown":"If you are using **Apache httpClient 4.5.x** then try this:\r\n\r\n    public static void main(String... args)  {\r\n\r\n        try (CloseableHttpClient httpclient = createAcceptSelfSignedCertificateClient()) {\r\n            HttpGet httpget = new HttpGet(&quot;https://example.com&quot;);\r\n            System.out.println(&quot;Executing request &quot; + httpget.getRequestLine());\r\n            \r\n            httpclient.execute(httpget);\r\n            System.out.println(&quot;----------------------------------------&quot;);\r\n        } catch (NoSuchAlgorithmException | KeyStoreException | KeyManagementException | IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    private static CloseableHttpClient createAcceptSelfSignedCertificateClient()\r\n            throws KeyManagementException, NoSuchAlgorithmException, KeyStoreException {\r\n\r\n        // use the TrustSelfSignedStrategy to allow Self Signed Certificates\r\n        SSLContext sslContext = SSLContextBuilder\r\n                .create()\r\n                .loadTrustMaterial(new TrustSelfSignedStrategy())\r\n                .build();\r\n\r\n        // we can optionally disable hostname verification. \r\n        // if you don&#39;t want to further weaken the security, you don&#39;t have to include this.\r\n        HostnameVerifier allowAllHosts = new NoopHostnameVerifier();\r\n        \r\n        // create an SSL Socket Factory to use the SSLContext with the trust self signed certificate strategy\r\n        // and allow all hosts verifier.\r\n        SSLConnectionSocketFactory connectionFactory = new SSLConnectionSocketFactory(sslContext, allowAllHosts);\r\n        \r\n        // finally create the HttpClient using HttpClient factory methods and assign the ssl socket factory\r\n        return HttpClients\r\n                .custom()\r\n                .setSSLSocketFactory(connectionFactory)\r\n                .build();\r\n    }","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>If you are using <strong>Apache httpClient 4.5.x</strong> then try this:</p>\n\n<pre><code>public static void main(String... args)  {\n\n    try (CloseableHttpClient httpclient = createAcceptSelfSignedCertificateClient()) {\n        HttpGet httpget = new HttpGet(\"https://example.com\");\n        System.out.println(\"Executing request \" + httpget.getRequestLine());\n\n        httpclient.execute(httpget);\n        System.out.println(\"----------------------------------------\");\n    } catch (NoSuchAlgorithmException | KeyStoreException | KeyManagementException | IOException e) {\n        throw new RuntimeException(e);\n    }\n}\n\nprivate static CloseableHttpClient createAcceptSelfSignedCertificateClient()\n        throws KeyManagementException, NoSuchAlgorithmException, KeyStoreException {\n\n    // use the TrustSelfSignedStrategy to allow Self Signed Certificates\n    SSLContext sslContext = SSLContextBuilder\n            .create()\n            .loadTrustMaterial(new TrustSelfSignedStrategy())\n            .build();\n\n    // we can optionally disable hostname verification. \n    // if you don't want to further weaken the security, you don't have to include this.\n    HostnameVerifier allowAllHosts = new NoopHostnameVerifier();\n\n    // create an SSL Socket Factory to use the SSLContext with the trust self signed certificate strategy\n    // and allow all hosts verifier.\n    SSLConnectionSocketFactory connectionFactory = new SSLConnectionSocketFactory(sslContext, allowAllHosts);\n\n    // finally create the HttpClient using HttpClient factory methods and assign the ssl socket factory\n    return HttpClients\n            .custom()\n            .setSSLSocketFactory(connectionFactory)\n            .build();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3371794,"reputation":143488,"user_id":2830850,"display_name":"Tarun Lalwani"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1525791508,"creation_date":1525791508,"answer_id":50236635,"question_id":2703161,"body_markdown":"Below code works with `4.5.5`\r\n\r\n\r\n    import java.io.IOException;\r\n    import java.security.KeyManagementException;\r\n    import java.security.NoSuchAlgorithmException;\r\n    import java.security.SecureRandom;\r\n    import java.security.cert.CertificateException;\r\n    import java.security.cert.X509Certificate;\r\n    \r\n    import javax.net.ssl.HostnameVerifier;\r\n    import javax.net.ssl.SSLContext;\r\n    import javax.net.ssl.SSLSession;\r\n    import javax.net.ssl.TrustManager;\r\n    import javax.net.ssl.X509TrustManager;\r\n    \r\n    import org.apache.http.client.methods.CloseableHttpResponse;\r\n    import org.apache.http.client.methods.HttpGet;\r\n    import org.apache.http.client.methods.HttpUriRequest;\r\n    import org.apache.http.conn.ssl.SSLConnectionSocketFactory;\r\n    import org.apache.http.impl.client.CloseableHttpClient;\r\n    import org.apache.http.impl.client.HttpClients;\r\n    import org.apache.http.util.EntityUtils;\r\n    \r\n    class HttpsSSLClient {\r\n    \r\n    \r\n        public static CloseableHttpClient createSSLInsecureClient() {\r\n            SSLContext sslcontext = createSSLContext();\r\n            SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(sslcontext, new HostnameVerifier() {\r\n    \r\n                @Override\r\n                public boolean verify(String paramString, SSLSession paramSSLSession) {\r\n                    return true;\r\n                }\r\n            });\r\n            CloseableHttpClient httpclient = HttpClients.custom().setSSLSocketFactory(sslsf).build();\r\n            return httpclient;\r\n        }\r\n    \r\n    \r\n        private static SSLContext createSSLContext() {\r\n            SSLContext sslcontext = null;\r\n            try {\r\n                sslcontext = SSLContext.getInstance(&quot;TLS&quot;);\r\n                sslcontext.init(null, new TrustManager[] {new TrustAnyTrustManager()}, new SecureRandom());\r\n            } catch (NoSuchAlgorithmException e) {\r\n                e.printStackTrace();\r\n            } catch (KeyManagementException e) {\r\n                e.printStackTrace();\r\n            }\r\n            return sslcontext;\r\n        }\r\n    \r\n    \r\n        private static class TrustAnyTrustManager implements X509TrustManager {\r\n    \r\n            public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {}\r\n    \r\n            public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {}\r\n    \r\n            public X509Certificate[] getAcceptedIssuers() {\r\n                return new X509Certificate[] {};\r\n            }\r\n        }\r\n    \r\n    }\r\n    public class TestMe {\r\n    \r\n    \r\n        public static void main(String[] args) throws IOException {\r\n            CloseableHttpClient client = HttpsSSLClient.createSSLInsecureClient();\r\n    \r\n            CloseableHttpResponse res = client.execute(new HttpGet(&quot;https://wrong.host.badssl.com/&quot;));\r\n            System.out.println(EntityUtils.toString(res.getEntity()));\r\n        }\r\n    }\r\n\r\nOutput from code is\r\n\r\n[![Code][1]][1]\r\n\r\nOutput on browser is\r\n\r\n[![Bad SSL][2]][2]\r\n\r\nThe pom used is below\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;com.tarun&lt;/groupId&gt;\r\n        &lt;artifactId&gt;testing&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;6&lt;/source&gt;\r\n                        &lt;target&gt;6&lt;/target&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.httpcomponents/httpclient --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n            &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n            &lt;version&gt;4.5.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n    &lt;/dependencies&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BnC7J.png\r\n  [2]: https://i.stack.imgur.com/IZjDv.png","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>Below code works with <code>4.5.5</code></p>\n\n<pre><code>import java.io.IOException;\nimport java.security.KeyManagementException;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.SecureRandom;\nimport java.security.cert.CertificateException;\nimport java.security.cert.X509Certificate;\n\nimport javax.net.ssl.HostnameVerifier;\nimport javax.net.ssl.SSLContext;\nimport javax.net.ssl.SSLSession;\nimport javax.net.ssl.TrustManager;\nimport javax.net.ssl.X509TrustManager;\n\nimport org.apache.http.client.methods.CloseableHttpResponse;\nimport org.apache.http.client.methods.HttpGet;\nimport org.apache.http.client.methods.HttpUriRequest;\nimport org.apache.http.conn.ssl.SSLConnectionSocketFactory;\nimport org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClients;\nimport org.apache.http.util.EntityUtils;\n\nclass HttpsSSLClient {\n\n\n    public static CloseableHttpClient createSSLInsecureClient() {\n        SSLContext sslcontext = createSSLContext();\n        SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(sslcontext, new HostnameVerifier() {\n\n            @Override\n            public boolean verify(String paramString, SSLSession paramSSLSession) {\n                return true;\n            }\n        });\n        CloseableHttpClient httpclient = HttpClients.custom().setSSLSocketFactory(sslsf).build();\n        return httpclient;\n    }\n\n\n    private static SSLContext createSSLContext() {\n        SSLContext sslcontext = null;\n        try {\n            sslcontext = SSLContext.getInstance(\"TLS\");\n            sslcontext.init(null, new TrustManager[] {new TrustAnyTrustManager()}, new SecureRandom());\n        } catch (NoSuchAlgorithmException e) {\n            e.printStackTrace();\n        } catch (KeyManagementException e) {\n            e.printStackTrace();\n        }\n        return sslcontext;\n    }\n\n\n    private static class TrustAnyTrustManager implements X509TrustManager {\n\n        public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {}\n\n        public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {}\n\n        public X509Certificate[] getAcceptedIssuers() {\n            return new X509Certificate[] {};\n        }\n    }\n\n}\npublic class TestMe {\n\n\n    public static void main(String[] args) throws IOException {\n        CloseableHttpClient client = HttpsSSLClient.createSSLInsecureClient();\n\n        CloseableHttpResponse res = client.execute(new HttpGet(\"https://wrong.host.badssl.com/\"));\n        System.out.println(EntityUtils.toString(res.getEntity()));\n    }\n}\n</code></pre>\n\n<p>Output from code is</p>\n\n<p><a href=\"https://i.stack.imgur.com/BnC7J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BnC7J.png\" alt=\"Code\"></a></p>\n\n<p>Output on browser is</p>\n\n<p><a href=\"https://i.stack.imgur.com/IZjDv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IZjDv.png\" alt=\"Bad SSL\"></a></p>\n\n<p>The pom used is below</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.tarun&lt;/groupId&gt;\n    &lt;artifactId&gt;testing&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;6&lt;/source&gt;\n                    &lt;target&gt;6&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;dependencies&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.apache.httpcomponents/httpclient --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n        &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n        &lt;version&gt;4.5.5&lt;/version&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3505189,"reputation":1449,"user_id":2930864,"display_name":"Percy Vega"},"score":2,"creation_date":1568650702,"post_id":50274496,"comment_id":102333257,"body_markdown":"Thank you! Just change `TrustAllStrategy.INSTANCE` with `TrustSelfSignedStrategy.INSTANCE` in this answer.","body":"Thank you! Just change <code>TrustAllStrategy.INSTANCE</code> with <code>TrustSelfSignedStrategy.INSTANCE</code> in this answer."},{"owner":{"account_id":308177,"reputation":1911,"user_id":619895,"accept_rate":85,"display_name":"ggb667"},"score":0,"creation_date":1592831434,"post_id":50274496,"comment_id":110556906,"body_markdown":"This did not work for me.  javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.\nprovider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","body":"This did not work for me.  javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security. provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target"},{"owner":{"account_id":4233270,"reputation":704,"user_id":3465146,"display_name":"Svichkarev Anatoly"},"score":2,"creation_date":1605706920,"post_id":50274496,"comment_id":114733170,"body_markdown":"@ggb667 I don&#39;t find `TrustAllStrategy.INSTANCE`, but I try implement it by myself: `new SSLContextBuilder().loadTrustMaterial(null, (chain, authType) -&gt; true).build()` and it has worked.","body":"@ggb667 I don&#39;t find <code>TrustAllStrategy.INSTANCE</code>, but I try implement it by myself: <code>new SSLContextBuilder().loadTrustMaterial(null, (chain, authType) -&gt; true).build()</code> and it has worked."},{"owner":{"account_id":232032,"reputation":5166,"user_id":496601,"accept_rate":96,"display_name":"whyoz"},"score":0,"creation_date":1621987242,"post_id":50274496,"comment_id":119658594,"body_markdown":".setSSLContext() in the 4.5.6 apache dependency actually throws and error?  Changing it to .setSslContext() made the error go away??  Unless they changed it in 4.5.6, it should be .setSslContext() with a lowercase &quot;Ssl&quot;","body":".setSSLContext() in the 4.5.6 apache dependency actually throws and error?  Changing it to .setSslContext() made the error go away??  Unless they changed it in 4.5.6, it should be .setSslContext() with a lowercase &quot;Ssl&quot;"},{"owner":{"account_id":13659441,"reputation":164,"user_id":10305731,"display_name":"WISERDIVISOR"},"score":1,"creation_date":1680087995,"post_id":50274496,"comment_id":133836714,"body_markdown":"This answer worked but not without @SvichkarevAnatoly &#39;s comment. Thanks to both!!","body":"This answer worked but not without @SvichkarevAnatoly &#39;s comment. Thanks to both!!"}],"tags":[],"owner":{"account_id":4312932,"reputation":23962,"user_id":3523579,"accept_rate":90,"display_name":"Mikhail Kholodkov"},"comment_count":5,"down_vote_count":0,"up_vote_count":84,"is_accepted":false,"score":84,"last_activity_date":1525960628,"creation_date":1525960211,"answer_id":50274496,"question_id":2703161,"body_markdown":"**Apache HttpClient 4.5.5**\r\n\r\n    HttpClient httpClient = HttpClients\r\n                .custom()\r\n                .setSSLContext(new SSLContextBuilder().loadTrustMaterial(null, TrustAllStrategy.INSTANCE).build())\r\n                .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\r\n                .build();\r\n\r\nNo deprecated API has been used.\r\n\r\nSimple verifiable test case:\r\n\r\n \r\n\r\n    package org.apache.http.client.test;\r\n    \r\n    import org.apache.http.HttpResponse;\r\n    import org.apache.http.client.HttpClient;\r\n    import org.apache.http.client.methods.HttpGet;\r\n    import org.apache.http.client.methods.HttpUriRequest;\r\n    import org.apache.http.conn.ssl.NoopHostnameVerifier;\r\n    import org.apache.http.impl.client.HttpClients;\r\n    import org.apache.http.ssl.SSLContextBuilder;\r\n    import org.junit.Before;\r\n    import org.junit.Test;\r\n    \r\n    import java.io.IOException;\r\n    import java.security.KeyManagementException;\r\n    import java.security.KeyStoreException;\r\n    import java.security.NoSuchAlgorithmException;\r\n    \r\n    public class ApacheHttpClientTest {\r\n    \r\n        private HttpClient httpClient;\r\n    \r\n        @Before\r\n        public void initClient() throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException {\r\n            httpClient = HttpClients\r\n                    .custom()\r\n                    .setSSLContext(new SSLContextBuilder().loadTrustMaterial(null, TrustAllStrategy.INSTANCE).build())\r\n                    .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\r\n                    .build();\r\n        }\r\n    \r\n        @Test\r\n        public void apacheHttpClient455Test() throws IOException {\r\n            executeRequestAndVerifyStatusIsOk(&quot;https://expired.badssl.com&quot;);\r\n            executeRequestAndVerifyStatusIsOk(&quot;https://wrong.host.badssl.com&quot;);\r\n            executeRequestAndVerifyStatusIsOk(&quot;https://self-signed.badssl.com&quot;);\r\n            executeRequestAndVerifyStatusIsOk(&quot;https://untrusted-root.badssl.com&quot;);\r\n            executeRequestAndVerifyStatusIsOk(&quot;https://revoked.badssl.com&quot;);\r\n            executeRequestAndVerifyStatusIsOk(&quot;https://pinning-test.badssl.com&quot;);\r\n            executeRequestAndVerifyStatusIsOk(&quot;https://sha1-intermediate.badssl.com&quot;);\r\n        }\r\n    \r\n        private void executeRequestAndVerifyStatusIsOk(String url) throws IOException {\r\n            HttpUriRequest request = new HttpGet(url);\r\n    \r\n            HttpResponse response = httpClient.execute(request);\r\n            int statusCode = response.getStatusLine().getStatusCode();\r\n    \r\n            assert statusCode == 200;\r\n        }\r\n    }\r\n\r\n","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p><strong>Apache HttpClient 4.5.5</strong></p>\n\n<pre><code>HttpClient httpClient = HttpClients\n            .custom()\n            .setSSLContext(new SSLContextBuilder().loadTrustMaterial(null, TrustAllStrategy.INSTANCE).build())\n            .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\n            .build();\n</code></pre>\n\n<p>No deprecated API has been used.</p>\n\n<p>Simple verifiable test case:</p>\n\n<pre><code>package org.apache.http.client.test;\n\nimport org.apache.http.HttpResponse;\nimport org.apache.http.client.HttpClient;\nimport org.apache.http.client.methods.HttpGet;\nimport org.apache.http.client.methods.HttpUriRequest;\nimport org.apache.http.conn.ssl.NoopHostnameVerifier;\nimport org.apache.http.impl.client.HttpClients;\nimport org.apache.http.ssl.SSLContextBuilder;\nimport org.junit.Before;\nimport org.junit.Test;\n\nimport java.io.IOException;\nimport java.security.KeyManagementException;\nimport java.security.KeyStoreException;\nimport java.security.NoSuchAlgorithmException;\n\npublic class ApacheHttpClientTest {\n\n    private HttpClient httpClient;\n\n    @Before\n    public void initClient() throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException {\n        httpClient = HttpClients\n                .custom()\n                .setSSLContext(new SSLContextBuilder().loadTrustMaterial(null, TrustAllStrategy.INSTANCE).build())\n                .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\n                .build();\n    }\n\n    @Test\n    public void apacheHttpClient455Test() throws IOException {\n        executeRequestAndVerifyStatusIsOk(\"https://expired.badssl.com\");\n        executeRequestAndVerifyStatusIsOk(\"https://wrong.host.badssl.com\");\n        executeRequestAndVerifyStatusIsOk(\"https://self-signed.badssl.com\");\n        executeRequestAndVerifyStatusIsOk(\"https://untrusted-root.badssl.com\");\n        executeRequestAndVerifyStatusIsOk(\"https://revoked.badssl.com\");\n        executeRequestAndVerifyStatusIsOk(\"https://pinning-test.badssl.com\");\n        executeRequestAndVerifyStatusIsOk(\"https://sha1-intermediate.badssl.com\");\n    }\n\n    private void executeRequestAndVerifyStatusIsOk(String url) throws IOException {\n        HttpUriRequest request = new HttpGet(url);\n\n        HttpResponse response = httpClient.execute(request);\n        int statusCode = response.getStatusLine().getStatusCode();\n\n        assert statusCode == 200;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13659441,"reputation":164,"user_id":10305731,"display_name":"WISERDIVISOR"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1680088958,"creation_date":1680088958,"answer_id":75876538,"question_id":2703161,"body_markdown":"## For `java.net.http.HttpClient`\r\n---\r\n### Imports\r\n```java\r\nimport java.net.http.HttpClient;\r\nimport org.apache.http.ssl.SSLContexts;\r\nimport javax.net.ssl.SSLContext;\r\n\r\nimport java.security.KeyManagementException;\r\nimport java.security.KeyStoreException;\r\nimport java.security.NoSuchAlgorithmException;\r\n```\r\n---\r\n### Usage\r\n```java\r\n\ttry {\r\n\t\tsslContext = SSLContexts.custom()\r\n\t\t        .loadTrustMaterial(null, (chain, authType) -&gt; true)\r\n\t\t        .build();\r\n\t} catch (KeyManagementException e) {\r\n\t\t// TODO Auto-generated catch block\r\n\t\te.printStackTrace();\r\n\t} catch (NoSuchAlgorithmException e) {\r\n\t    // TODO Auto-generated catch block\r\n\t\te.printStackTrace();\r\n\t} catch (KeyStoreException e) {\r\n\t\t// TODO Auto-generated catch block\r\n\t\te.printStackTrace();\r\n\t}\r\n\t\t\r\n    HttpClient httpClient = HttpClient.newBuilder().sslContext(sslContext).build();\r\n```\r\n**Tested on Elasticsearch 8.1.3 as a Maven plugin**","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<h2>For <code>java.net.http.HttpClient</code></h2>\n<hr />\n<h3>Imports</h3>\n<pre class=\"lang-java prettyprint-override\"><code>import java.net.http.HttpClient;\nimport org.apache.http.ssl.SSLContexts;\nimport javax.net.ssl.SSLContext;\n\nimport java.security.KeyManagementException;\nimport java.security.KeyStoreException;\nimport java.security.NoSuchAlgorithmException;\n</code></pre>\n<hr />\n<h3>Usage</h3>\n<pre class=\"lang-java prettyprint-override\"><code>    try {\n        sslContext = SSLContexts.custom()\n                .loadTrustMaterial(null, (chain, authType) -&gt; true)\n                .build();\n    } catch (KeyManagementException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } catch (NoSuchAlgorithmException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } catch (KeyStoreException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n        \n    HttpClient httpClient = HttpClient.newBuilder().sslContext(sslContext).build();\n</code></pre>\n<p><strong>Tested on Elasticsearch 8.1.3 as a Maven plugin</strong></p>\n"},{"tags":[],"owner":{"account_id":1312571,"reputation":321,"user_id":3724142,"accept_rate":44,"display_name":"Tim Schumacher"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683756086,"creation_date":1683756086,"answer_id":76222849,"question_id":2703161,"body_markdown":"Careful with the use of SSLConnectionSocketFactory. This was noted with Apache HttpClient v4.5.x  \r\n\r\n    Caused by: javax.net.ssl.SSLPeerUnverifiedException: Certificate for &lt;somedomain.org&gt; doesn&#39;t match any of the subject alternative names: [cert-used-in-2-way-tls.org, www.cert-used-in-2-way-tls.org]\r\n\r\nThe following code still yielded above exception:\r\n\r\n            KeyStore keyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\r\n\r\n            inputStream = new FileInputStream(certificatePath);\r\n\r\n            keyStore.load(inputStream, certificatePassword.toCharArray());\r\n\r\n            SSLContext sslContext = SSLContexts.custom()\r\n                    .loadKeyMaterial(keyStore, certificatePassword.toCharArray())\r\n                    .build();\r\n\r\n            SSLConnectionSocketFactory socketFactory = new SSLConnectionSocketFactory(sslContext); //don&#39;t do this\r\n\r\n            client = HttpClients.custom()\r\n                        .setSSLSocketFactory(socketFactory) //don&#39;t do this\r\n                        //.setSSLContext(sslContext) //do this instead\r\n                        .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\r\n                        .build();\r\n\r\nThe following worked for me instead:\r\n\r\n                 //same code as above, but not using the SSLConnectionSocketFactory \r\n                 client = HttpClients.custom()\r\n                        .setSSLContext(sslContext) //do this instead\r\n                        .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\r\n                        .build(); ","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>Careful with the use of SSLConnectionSocketFactory. This was noted with Apache HttpClient v4.5.x</p>\n<pre><code>Caused by: javax.net.ssl.SSLPeerUnverifiedException: Certificate for &lt;somedomain.org&gt; doesn't match any of the subject alternative names: [cert-used-in-2-way-tls.org, www.cert-used-in-2-way-tls.org]\n</code></pre>\n<p>The following code still yielded above exception:</p>\n<pre><code>        KeyStore keyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\n\n        inputStream = new FileInputStream(certificatePath);\n\n        keyStore.load(inputStream, certificatePassword.toCharArray());\n\n        SSLContext sslContext = SSLContexts.custom()\n                .loadKeyMaterial(keyStore, certificatePassword.toCharArray())\n                .build();\n\n        SSLConnectionSocketFactory socketFactory = new SSLConnectionSocketFactory(sslContext); //don't do this\n\n        client = HttpClients.custom()\n                    .setSSLSocketFactory(socketFactory) //don't do this\n                    //.setSSLContext(sslContext) //do this instead\n                    .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\n                    .build();\n</code></pre>\n<p>The following worked for me instead:</p>\n<pre><code>             //same code as above, but not using the SSLConnectionSocketFactory \n             client = HttpClients.custom()\n                    .setSSLContext(sslContext) //do this instead\n                    .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\n                    .build(); \n</code></pre>\n"}],"owner":{"account_id":43750,"reputation":18014,"user_id":128028,"accept_rate":86,"display_name":"Viet"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":349071,"favorite_count":0,"down_vote_count":1,"up_vote_count":167,"accepted_answer_id":2703233,"answer_count":25,"score":166,"last_activity_date":1683756086,"creation_date":1272081557,"question_id":2703161,"body_markdown":"How do I bypass invalid SSL certificate errors with Apache [HttpClient][1] 4.0?\r\n\r\n  [1]: http://hc.apache.org/httpclient-3.x/\r\n","title":"How to ignore SSL certificate errors in Apache HttpClient 4.0","body":"<p>How do I bypass invalid SSL certificate errors with Apache <a href=\"http://hc.apache.org/httpclient-3.x/\" rel=\"noreferrer\">HttpClient</a> 4.0?</p>\n"},{"tags":["java","java.util.scanner"],"comments":[{"owner":{"account_id":1468869,"reputation":11,"user_id":1380944,"display_name":"Filip Sokol"},"score":0,"creation_date":1336439624,"post_id":10491234,"comment_id":13559826,"body_markdown":"oh and yeah i have aPf created....","body":"oh and yeah i have aPf created...."}],"answers":[{"comments":[{"owner":{"account_id":1468869,"reputation":11,"user_id":1380944,"display_name":"Filip Sokol"},"score":0,"creation_date":1336441044,"post_id":10491342,"comment_id":13560073,"body_markdown":"Oh okay well i changed now delimiter to | and it works with that a bit.. but i still have problems.. but i ll try to work it out, you helped a bit :)","body":"Oh okay well i changed now delimiter to | and it works with that a bit.. but i still have problems.. but i ll try to work it out, you helped a bit :)"},{"owner":{"account_id":1252478,"reputation":1866,"user_id":1212605,"display_name":"raddykrish"},"score":0,"creation_date":1336445328,"post_id":10491342,"comment_id":13560890,"body_markdown":"Glad that it helped. Please let us know the other problems, we can try helping you.","body":"Glad that it helped. Please let us know the other problems, we can try helping you."}],"tags":[],"owner":{"account_id":1252478,"reputation":1866,"user_id":1212605,"display_name":"raddykrish"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1336440499,"creation_date":1336440499,"answer_id":10491342,"question_id":10491234,"body_markdown":"I think the delimiter `/` is not escaped properly. Try to use like `\\/` to escape that. Please refer this https://stackoverflow.com/questions/6076229/escaping-a-forward-slash-in-a-regular-expression for more clarity.","title":"Scanner next() as parameter","body":"<p>I think the delimiter <code>/</code> is not escaped properly. Try to use like <code>\\/</code> to escape that. Please refer this <a href=\"https://stackoverflow.com/questions/6076229/escaping-a-forward-slash-in-a-regular-expression\">Escaping a forward slash in a regular expression</a> for more clarity.</p>\n"},{"comments":[{"owner":{"account_id":1468869,"reputation":11,"user_id":1380944,"display_name":"Filip Sokol"},"score":0,"creation_date":1336444373,"post_id":10491381,"comment_id":13560694,"body_markdown":"thanks a lot! i did it a lot differently but i didnt know what string tokenizer was and so i learned something new and it helped :) thanks","body":"thanks a lot! i did it a lot differently but i didnt know what string tokenizer was and so i learned something new and it helped :) thanks"}],"tags":[],"owner":{"account_id":1458021,"reputation":4881,"user_id":1373124,"accept_rate":88,"display_name":"pippin1289"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1336440836,"creation_date":1336440836,"answer_id":10491381,"question_id":10491234,"body_markdown":"I think there are two ways you might go about this. The first is using reset() to reset the delimiter. So what I mean to say is go with the default delimiter of &#39; &#39; for nextInt, then call useDelimiter(&#39;\\/&#39;) for the next call. Then call scanner.reset().\r\n\r\nAnother way to go about this might be to grab a string based upon the / delimiter. Then split that string further based on the space as the next delimiter. Maybe use StringTokenizer to accomplish this.","title":"Scanner next() as parameter","body":"<p>I think there are two ways you might go about this. The first is using reset() to reset the delimiter. So what I mean to say is go with the default delimiter of ' ' for nextInt, then call useDelimiter('/') for the next call. Then call scanner.reset().</p>\n\n<p>Another way to go about this might be to grab a string based upon the / delimiter. Then split that string further based on the space as the next delimiter. Maybe use StringTokenizer to accomplish this.</p>\n"}],"owner":{"account_id":1468869,"reputation":11,"user_id":1380944,"display_name":"Filip Sokol"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":368,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1683756077,"creation_date":1336439567,"question_id":10491234,"body_markdown":"i have file which is in this format.\r\n50 xxx/ 70 aaa/ 90 ccc/\r\n\r\nthe program saves the file to default directory, the same one i think its trying to read from. but it just doesnt scan anything... what is wrong please? im not good at programing sorry\r\n\r\ni would like it to read the 50 to &quot;prior&quot; xxx to &quot;text&quot; and then use those two things in aPf.insert(prior, text).\r\n\r\n    File file = new File(&quot;poznamky.txt&quot;);\r\n            Scanner scanner = null;\r\n            int prior;\r\n            String text;\r\n            \r\n            try {\r\n                scanner = new Scanner(file);\r\n                scanner.useDelimiter(&quot;/&quot;);\r\n                \r\n             while (scanner.hasNext()) {\r\n    \r\n              prior = scanner.nextInt();\r\n              text = scanner.next();\r\n              aPf.insert(prior, text);\r\n    \r\n    }\r\n    \r\n    } catch (FileNotFoundException e) {\r\n    \r\n    e.printStackTrace();\r\n    \r\n    }","title":"Scanner next() as parameter","body":"<p>i have file which is in this format.\n50 xxx/ 70 aaa/ 90 ccc/</p>\n\n<p>the program saves the file to default directory, the same one i think its trying to read from. but it just doesnt scan anything... what is wrong please? im not good at programing sorry</p>\n\n<p>i would like it to read the 50 to \"prior\" xxx to \"text\" and then use those two things in aPf.insert(prior, text).</p>\n\n<pre><code>File file = new File(\"poznamky.txt\");\n        Scanner scanner = null;\n        int prior;\n        String text;\n\n        try {\n            scanner = new Scanner(file);\n            scanner.useDelimiter(\"/\");\n\n         while (scanner.hasNext()) {\n\n          prior = scanner.nextInt();\n          text = scanner.next();\n          aPf.insert(prior, text);\n\n}\n\n} catch (FileNotFoundException e) {\n\ne.printStackTrace();\n\n}\n</code></pre>\n"},{"tags":["java","android","in-app-update"],"answers":[{"tags":[],"owner":{"account_id":12359904,"reputation":202,"user_id":9014504,"display_name":"Asif A. Sohan"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1616437448,"creation_date":1616437448,"answer_id":66751800,"question_id":66549229,"body_markdown":"As mentioned in the [Documentation][1], there are different flow to trigger Google App Update API from different components in app. We need to trigger correct flow according to our requirements.\r\n\r\n\r\n    startUpdateFlow(AppUpdateInfo appUpdateInfo, Activity activity, AppUpdateOptions options)\r\n    Starts the desired update flow asynchronously.\r\n    \r\n    startUpdateFlowForResult(AppUpdateInfo appUpdateInfo, int appUpdateType, IntentSenderForResultStarter starter, int requestCode)\r\n    Starts the desired update flow.\r\n    \r\n    startUpdateFlowForResult(AppUpdateInfo appUpdateInfo, Activity activity, AppUpdateOptions options, int requestCode)\r\n    Starts the desired update flow.\r\n    \r\n    startUpdateFlowForResult(AppUpdateInfo appUpdateInfo, int appUpdateType, Activity activity, int requestCode)\r\n    Starts the desired update flow.\r\n    \r\n    startUpdateFlowForResult(AppUpdateInfo appUpdateInfo, IntentSenderForResultStarter starter, AppUpdateOptions options, int requestCod\r\n\r\n  [1]: https://developer.android.com/reference/com/google/android/play/core/appupdate/AppUpdateManager\r\n","title":"AppUpdateManager.startUpdateFlowForResult causing IntentSender$SendIntentException","body":"<p>As mentioned in the <a href=\"https://developer.android.com/reference/com/google/android/play/core/appupdate/AppUpdateManager\" rel=\"nofollow noreferrer\">Documentation</a>, there are different flow to trigger Google App Update API from different components in app. We need to trigger correct flow according to our requirements.</p>\n<pre><code>startUpdateFlow(AppUpdateInfo appUpdateInfo, Activity activity, AppUpdateOptions options)\nStarts the desired update flow asynchronously.\n\nstartUpdateFlowForResult(AppUpdateInfo appUpdateInfo, int appUpdateType, IntentSenderForResultStarter starter, int requestCode)\nStarts the desired update flow.\n\nstartUpdateFlowForResult(AppUpdateInfo appUpdateInfo, Activity activity, AppUpdateOptions options, int requestCode)\nStarts the desired update flow.\n\nstartUpdateFlowForResult(AppUpdateInfo appUpdateInfo, int appUpdateType, Activity activity, int requestCode)\nStarts the desired update flow.\n\nstartUpdateFlowForResult(AppUpdateInfo appUpdateInfo, IntentSenderForResultStarter starter, AppUpdateOptions options, int requestCod\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9260104,"reputation":3592,"user_id":6877502,"display_name":"Aliaksei"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683754971,"creation_date":1683754971,"answer_id":76222737,"question_id":66549229,"body_markdown":"According to [documentation][1] of `startUpdateFlowForResult()`\r\n\r\n&gt; Each `AppUpdateInfo` instance can be used **only in a single** call to this method. If you need to call it multiple times - for instance, when retrying to start a flow in case of failure - you need to get a fresh `AppUpdateInfo` from `getAppUpdateInfo()`.\r\n\r\nSo, we should renew our `appUpdateInfoTask` for every calling of `startUpdateFlowForResult()`\r\n\r\n\r\n  [1]: https://developer.android.com/reference/com/google/android/play/core/appupdate/AppUpdateManager#startUpdateFlowForResult(com.google.android.play.core.appupdate.AppUpdateInfo,%20android.app.Activity,%20com.google.android.play.core.appupdate.AppUpdateOptions,%20int)","title":"AppUpdateManager.startUpdateFlowForResult causing IntentSender$SendIntentException","body":"<p>According to <a href=\"https://developer.android.com/reference/com/google/android/play/core/appupdate/AppUpdateManager#startUpdateFlowForResult(com.google.android.play.core.appupdate.AppUpdateInfo,%20android.app.Activity,%20com.google.android.play.core.appupdate.AppUpdateOptions,%20int)\" rel=\"nofollow noreferrer\">documentation</a> of <code>startUpdateFlowForResult()</code></p>\n<blockquote>\n<p>Each <code>AppUpdateInfo</code> instance can be used <strong>only in a single</strong> call to this method. If you need to call it multiple times - for instance, when retrying to start a flow in case of failure - you need to get a fresh <code>AppUpdateInfo</code> from <code>getAppUpdateInfo()</code>.</p>\n</blockquote>\n<p>So, we should renew our <code>appUpdateInfoTask</code> for every calling of <code>startUpdateFlowForResult()</code></p>\n"}],"owner":{"account_id":12359904,"reputation":202,"user_id":9014504,"display_name":"Asif A. Sohan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1588,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":2,"score":9,"last_activity_date":1683754971,"creation_date":1615301608,"question_id":66549229,"body_markdown":"In-app update is available multiple times in my app. User can cancel the update first time while opening the app and choose to trigger in-app Update from another fragment manually.\r\n\r\nAs per Google documentation, I have created new instances each time to trigger the update but it is only working for the first. Next time, it&#39;s causing **AppUpdateManager.startUpdateFlowForResult causing IntentSender$SendIntentException** \r\n\r\n\r\n    private void init() {\r\n            appUpdateManager = AppUpdateManagerFactory.create(mContext);\r\n            appUpdateInfoTask = appUpdateManager.getAppUpdateInfo();\r\n    \r\n        }\r\n\r\n     public void checkAppUpdate() {\r\n                appUpdateInfoTask.addOnSuccessListener(appUpdateInfo -&gt; {\r\n                    .....................................\r\n                    .....................................\r\n                    startAppUpdate(appUpdateInfo);\r\n       \r\n            }\r\n\r\n    private void startAppUpdate(AppUpdateInfo appUpdateInfo) {\r\n            Log.d(TAG, &quot;startAppUpdate: starting app update&quot;);\r\n            appUpdateManager.startUpdateFlowForResult(\r\n                    appUpdateInfo,\r\n                    appUpdateType,\r\n                    mActivityReference,\r\n                    mRequestCode);\r\n        }","title":"AppUpdateManager.startUpdateFlowForResult causing IntentSender$SendIntentException","body":"<p>In-app update is available multiple times in my app. User can cancel the update first time while opening the app and choose to trigger in-app Update from another fragment manually.</p>\n<p>As per Google documentation, I have created new instances each time to trigger the update but it is only working for the first. Next time, it's causing <strong>AppUpdateManager.startUpdateFlowForResult causing IntentSender$SendIntentException</strong></p>\n<pre><code>private void init() {\n        appUpdateManager = AppUpdateManagerFactory.create(mContext);\n        appUpdateInfoTask = appUpdateManager.getAppUpdateInfo();\n\n    }\n\n public void checkAppUpdate() {\n            appUpdateInfoTask.addOnSuccessListener(appUpdateInfo -&gt; {\n                .....................................\n                .....................................\n                startAppUpdate(appUpdateInfo);\n   \n        }\n\nprivate void startAppUpdate(AppUpdateInfo appUpdateInfo) {\n        Log.d(TAG, &quot;startAppUpdate: starting app update&quot;);\n        appUpdateManager.startUpdateFlowForResult(\n                appUpdateInfo,\n                appUpdateType,\n                mActivityReference,\n                mRequestCode);\n    }\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","jpa","nativequery"],"answers":[{"comments":[{"owner":{"account_id":5193931,"reputation":419,"user_id":4155906,"accept_rate":31,"display_name":"Thejas"},"score":1,"creation_date":1667643789,"post_id":74326793,"comment_id":131218545,"body_markdown":"Thank you so much  had to change from (INTERVAL &#39;1&#39; minutes)  to (INTERVAL &#39;1&#39; minute) for the above query to work","body":"Thank you so much  had to change from (INTERVAL &#39;1&#39; minutes)  to (INTERVAL &#39;1&#39; minute) for the above query to work"}],"tags":[],"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1667642906,"creation_date":1667642596,"answer_id":74326793,"question_id":74326715,"body_markdown":"You can use this trick:\r\n\r\n    @Query(&quot;&quot;&quot;\r\n            SELECT * from user u WHERE \r\n            u.last_modified &gt;= (NOW() - (INTERVAL &#39;1&#39; minutes) * :timeInMinutes)\r\n            &quot;&quot;&quot;, nativeQuery = true)\r\n    SomeType getRecord(Long timeInMinutes);\r\n\r\nThe idea here is to multiply `timeInMinutes` by `1`, which will give you always `timeInMinutes`.\r\n\r\nNote: the type of timeInMinutes should be a number, and also you have to use `nativeQuery = true` because your query is not a JPA syntax.\r\n\r\n","title":"Get records which are last updated in n minutes in jpa","body":"<p>You can use this trick:</p>\n<pre><code>@Query(&quot;&quot;&quot;\n        SELECT * from user u WHERE \n        u.last_modified &gt;= (NOW() - (INTERVAL '1' minutes) * :timeInMinutes)\n        &quot;&quot;&quot;, nativeQuery = true)\nSomeType getRecord(Long timeInMinutes);\n</code></pre>\n<p>The idea here is to multiply <code>timeInMinutes</code> by <code>1</code>, which will give you always <code>timeInMinutes</code>.</p>\n<p>Note: the type of timeInMinutes should be a number, and also you have to use <code>nativeQuery = true</code> because your query is not a JPA syntax.</p>\n"},{"tags":[],"owner":{"account_id":5894271,"reputation":831,"user_id":4639860,"display_name":"Kehinde Adedamola Shittu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683754233,"creation_date":1683754233,"answer_id":76222671,"question_id":74326715,"body_markdown":"The accepted answer failed with syntax error on my end but I was able to rewrite it and this worked, query would return all user records modified X minutes ago.\r\n\r\n        @Query(value = &quot;&quot;&quot;\r\n        SELECT * from user u WHERE \r\n        u.last_modified &lt;= DATE_SUB(NOW(), INTERVAL :timeInMinutes minute)\r\n        &quot;&quot;&quot;, nativeQuery = true)\r\n        SomeType getRecord(Long timeInMinutes);","title":"Get records which are last updated in n minutes in jpa","body":"<p>The accepted answer failed with syntax error on my end but I was able to rewrite it and this worked, query would return all user records modified X minutes ago.</p>\n<pre><code>    @Query(value = &quot;&quot;&quot;\n    SELECT * from user u WHERE \n    u.last_modified &lt;= DATE_SUB(NOW(), INTERVAL :timeInMinutes minute)\n    &quot;&quot;&quot;, nativeQuery = true)\n    SomeType getRecord(Long timeInMinutes);\n</code></pre>\n"}],"owner":{"account_id":5193931,"reputation":419,"user_id":4155906,"accept_rate":31,"display_name":"Thejas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1272,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74326793,"answer_count":2,"score":1,"last_activity_date":1683754233,"creation_date":1667641854,"question_id":74326715,"body_markdown":"I am working on a jpa query which requires to fetch all the records whose last updated time is more than 15 minutes\r\nMy query goes like\r\n\r\n    Select * from user u where u.last_modified &gt;= NOW() - INTERVAL &#39;5 minutes&#39; \r\n\r\nI will be passing the minutes dynamically ie in my jpa\r\n\r\n    @Query(&quot;Select * from user u where u.last_modified &gt;= NOW() - INTERVAL &#39;:timeInMinutes minutes&#39;&quot;)\r\n    getRecord(String timeInMinutes);\r\n\r\n\r\nThis does not work. I want to pass the minute dynamically. Can someone please help me with this","title":"Get records which are last updated in n minutes in jpa","body":"<p>I am working on a jpa query which requires to fetch all the records whose last updated time is more than 15 minutes\nMy query goes like</p>\n<pre><code>Select * from user u where u.last_modified &gt;= NOW() - INTERVAL '5 minutes' \n</code></pre>\n<p>I will be passing the minutes dynamically ie in my jpa</p>\n<pre><code>@Query(&quot;Select * from user u where u.last_modified &gt;= NOW() - INTERVAL ':timeInMinutes minutes'&quot;)\ngetRecord(String timeInMinutes);\n</code></pre>\n<p>This does not work. I want to pass the minute dynamically. Can someone please help me with this</p>\n"},{"tags":["java","spring","spring-boot","kotlin","spring-security"],"comments":[{"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"score":0,"creation_date":1674140012,"post_id":75102645,"comment_id":132654887,"body_markdown":"share also your `@Configuration` and `@SpringBootApplication` classes and also any custom security configurations","body":"share also your <code>@Configuration</code> and <code>@SpringBootApplication</code> classes and also any custom security configurations"},{"owner":{"account_id":27514177,"reputation":41,"user_id":20995473,"display_name":"Lukas0610"},"score":0,"creation_date":1674231435,"post_id":75102645,"comment_id":132677300,"body_markdown":"@PanagiotisBougioukos I&#39;ve added those classes to my post","body":"@PanagiotisBougioukos I&#39;ve added those classes to my post"},{"owner":{"account_id":10288,"reputation":1616,"user_id":19366,"display_name":"varad"},"score":1,"creation_date":1674235137,"post_id":75102645,"comment_id":132678517,"body_markdown":"I have an interface with a method annotated with `@PreAuthorize`. An implementation of this method also have `@PreAuthorize`. I.e. PreAuthorize is defined on two places for the same method. When using @EnableMethodSecurity, I was getting the same error. \n\nWhen I use deprecated &quot;`@EnableGlobalMethodSecurity(prePostEnabled = true)`&quot; instead, it works. I guess that&#39;s what they mean by &quot;activate stricter enforcement of Spring Securityâ€™s non-repeatable&quot; (https://docs.spring.io/spring-security/reference/5.8/migration/servlet/authorization.html#servlet-check-for-annotationconfigurationexceptions)","body":"I have an interface with a method annotated with <code>@PreAuthorize</code>. An implementation of this method also have <code>@PreAuthorize</code>. I.e. PreAuthorize is defined on two places for the same method. When using @EnableMethodSecurity, I was getting the same error.   When I use deprecated &quot;<code>@EnableGlobalMethodSecurity(prePostEnabled = true)</code>&quot; instead, it works. I guess that&#39;s what they mean by &quot;activate stricter enforcement of Spring Securityâ€™s non-repeatable&quot; (<a href=\"https://docs.spring.io/spring-security/reference/5.8/migration/servlet/authorization.html#servlet-check-for-annotationconfigurationexceptions\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/reference/5.8/migration/serv&zwnj;&#8203;let/&hellip;</a>)"}],"answers":[{"tags":[],"owner":{"account_id":27514177,"reputation":41,"user_id":20995473,"display_name":"Lukas0610"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1674287676,"creation_date":1674287676,"answer_id":75191876,"question_id":75102645,"body_markdown":"After some more debugging and reading through the migration-guide @varad posted I decided to implement custom authorization-managers which do not scan the annotations as thoroughly as Spring Security does.\r\n\r\nI posted the implementations of the custom method-security and authorization-managers on GitHub: https://gist.github.com/Lukas0610/5ac78a358276fa15b1ce7cdc0483988d\r\n\r\nThanks for you help guys.","title":"AnnotationConfigurationException since upgrade to Spring Boot 3/JDK 17","body":"<p>After some more debugging and reading through the migration-guide @varad posted I decided to implement custom authorization-managers which do not scan the annotations as thoroughly as Spring Security does.</p>\n<p>I posted the implementations of the custom method-security and authorization-managers on GitHub: <a href=\"https://gist.github.com/Lukas0610/5ac78a358276fa15b1ce7cdc0483988d\" rel=\"nofollow noreferrer\">https://gist.github.com/Lukas0610/5ac78a358276fa15b1ce7cdc0483988d</a></p>\n<p>Thanks for you help guys.</p>\n"},{"tags":[],"owner":{"account_id":6254321,"reputation":51,"user_id":4863415,"display_name":"Manas Das"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683753606,"creation_date":1683753606,"answer_id":76222627,"question_id":75102645,"body_markdown":"I am doing similar stuff. Applying post filter on findAll method.\r\n\r\n    public interface AbcRepository extends JpaRepository&lt;InfraResource, Long&gt; {\r\n    \r\n        @PostFilter(&quot;hasPermission(filterObject, &#39;read&#39;)&quot;)\r\n        List&lt;InfraResource&gt; findAll();\r\n    }\r\n\r\nConfiguration annotated with @EnableMethodSecurity(prePostEnabled = true) I am getting following issue.\r\n\r\n**API Response**\r\n\r\n    &quot;status&quot;: 500,\r\n    &quot;error&quot;: &quot;Internal Server Error&quot;,\r\n\r\n**Server log**\r\n\r\n    ERROR 45859 --- [nio-8080-exec-2] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] in context with path [/api] threw exception [Request processing failed: org.springframework.core.annotation.AnnotationConfigurationException: Found more than one annotation of type interface org.springframework.security.access.prepost.PostFilter attributed to public final java.util.List jdk.proxy2.$Proxy108.findAll() Please remove the duplicate annotations and publish a bean to handle your authorization logic.] with root cause\r\n            \r\n            org.springframework.core.annotation.AnnotationConfigurationException: Found more than one annotation of type interface org.springframework.security.access.prepost.PostFilter attributed to public final java.util.List jdk.proxy2.$Proxy108.findAll() Please remove the duplicate annotations and publish a bean to handle your authorization logic.\r\n\r\nAfter doing some further debug into the code base, I found `AuthorizationAnnotationUtils` class. Method `findUniqueAnnotation` performs an exhaustive search on type hierarchy of a given method and if the it finds duplicate annotation throws `AnnotationConfigurationException` exception.\r\n\r\nUnder the hood for findAll there are 2 implementations.\r\n\r\n    1. Iterable&lt;T&gt; findAll() coming from CrudRepository\r\n    2. List&lt;T&gt; findAll() coming from SimpleJpaRepository \r\n\r\nFurther digging down, at runtime it is finding duplicate `PostFilter` annotation for `findAll` method.\r\n\r\nHere is the duplicate details in runtime\r\n\r\n    public abstract java.util.List AbcRepository.findAll()\r\n        \r\n    public default java.lang.Iterable AbcRepository.findAll()\r\n\r\nFor now I am using `@EnableGlobalMethodSecurity(prePostEnabled = true)` instead to overcome the issue even though it is marked as deprecated.\r\n\r\nI am still researching on. I Will post an update as soon as I find an alternative.","title":"AnnotationConfigurationException since upgrade to Spring Boot 3/JDK 17","body":"<p>I am doing similar stuff. Applying post filter on findAll method.</p>\n<pre><code>public interface AbcRepository extends JpaRepository&lt;InfraResource, Long&gt; {\n\n    @PostFilter(&quot;hasPermission(filterObject, 'read')&quot;)\n    List&lt;InfraResource&gt; findAll();\n}\n</code></pre>\n<p>Configuration annotated with @EnableMethodSecurity(prePostEnabled = true) I am getting following issue.</p>\n<p><strong>API Response</strong></p>\n<pre><code>&quot;status&quot;: 500,\n&quot;error&quot;: &quot;Internal Server Error&quot;,\n</code></pre>\n<p><strong>Server log</strong></p>\n<pre><code>ERROR 45859 --- [nio-8080-exec-2] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] in context with path [/api] threw exception [Request processing failed: org.springframework.core.annotation.AnnotationConfigurationException: Found more than one annotation of type interface org.springframework.security.access.prepost.PostFilter attributed to public final java.util.List jdk.proxy2.$Proxy108.findAll() Please remove the duplicate annotations and publish a bean to handle your authorization logic.] with root cause\n        \n        org.springframework.core.annotation.AnnotationConfigurationException: Found more than one annotation of type interface org.springframework.security.access.prepost.PostFilter attributed to public final java.util.List jdk.proxy2.$Proxy108.findAll() Please remove the duplicate annotations and publish a bean to handle your authorization logic.\n</code></pre>\n<p>After doing some further debug into the code base, I found <code>AuthorizationAnnotationUtils</code> class. Method <code>findUniqueAnnotation</code> performs an exhaustive search on type hierarchy of a given method and if the it finds duplicate annotation throws <code>AnnotationConfigurationException</code> exception.</p>\n<p>Under the hood for findAll there are 2 implementations.</p>\n<pre><code>1. Iterable&lt;T&gt; findAll() coming from CrudRepository\n2. List&lt;T&gt; findAll() coming from SimpleJpaRepository \n</code></pre>\n<p>Further digging down, at runtime it is finding duplicate <code>PostFilter</code> annotation for <code>findAll</code> method.</p>\n<p>Here is the duplicate details in runtime</p>\n<pre><code>public abstract java.util.List AbcRepository.findAll()\n    \npublic default java.lang.Iterable AbcRepository.findAll()\n</code></pre>\n<p>For now I am using <code>@EnableGlobalMethodSecurity(prePostEnabled = true)</code> instead to overcome the issue even though it is marked as deprecated.</p>\n<p>I am still researching on. I Will post an update as soon as I find an alternative.</p>\n"}],"owner":{"account_id":27514177,"reputation":41,"user_id":20995473,"display_name":"Lukas0610"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1159,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":75191876,"answer_count":2,"score":4,"last_activity_date":1683753606,"creation_date":1673560053,"question_id":75102645,"body_markdown":"I have recently upgraded my Spring Boot Application to Spring Boot 3 (from 2.6.4), Kotlin 1.8.0 (from 1.7.20) and JDK 17 (from 11). Right now I&#39;m facing AnnotationConfigurationExceptions caused by `@PreAuthorize` meta-annotations used on inherited repository-methods.\r\n\r\n```\r\norg.springframework.core.annotation.AnnotationConfigurationException: Found more than one annotation of type interface org.springframework.security.access.prepost.PreAuthorize attributed to public final java.util.List jdk.proxy2.$Proxy390.findAll() Please remove the duplicate annotations and publish a bean to handle your authorization logic.\r\n        at org.springframework.security.authorization.method.AuthorizationAnnotationUtils.findUniqueAnnotation(AuthorizationAnnotationUtils.java:64)\r\n        at org.springframework.security.authorization.method.PreAuthorizeExpressionAttributeRegistry.findPreAuthorizeAnnotation(PreAuthorizeExpressionAttributeRegistry.java:71)\r\n        at org.springframework.security.authorization.method.PreAuthorizeExpressionAttributeRegistry.resolveAttribute(PreAuthorizeExpressionAttributeRegistry.java:61)\r\n        at org.springframework.security.authorization.method.AbstractExpressionAttributeRegistry.lambda$getAttribute$0(AbstractExpressionAttributeRegistry.java:57)\r\n        at java.base/java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1708)\r\n        at org.springframework.security.authorization.method.AbstractExpressionAttributeRegistry.getAttribute(AbstractExpressionAttributeRegistry.java:57)\r\n        at org.springframework.security.authorization.method.AbstractExpressionAttributeRegistry.getAttribute(AbstractExpressionAttributeRegistry.java:46)\r\n        at org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager.check(PreAuthorizeAuthorizationManager.java:63)\r\n        at org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager.check(PreAuthorizeAuthorizationManager.java:40)\r\n        at org.springframework.security.authorization.ObservationAuthorizationManager.check(ObservationAuthorizationManager.java:55)\r\n        at org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager.check(DeferringObservationAuthorizationManager.java:47)\r\n        at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:252)\r\n        at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:198)\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n        at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)\r\n```\r\n\r\nAfter some debugging, I found that Spring Security somehow reflects the single annotation multiple times. As soon as I move the methods from the base-repository to the actual repository, the exception does no longer appear.\r\n\r\nI&#39;ve got a base-repository implementing some common methods like findAll, findById, etc. and marking them accessible using the REST-API and restricting the access using the `@HasRoleAdminOrHasReadCollectionPermission` meta-annotation (following later):\r\n``` kotlin\r\n@NoRepositoryBean\r\ninterface BaseRepository&lt;T : BaseEntity&gt; : CrudRepository&lt;T, Long&gt; {\r\n\r\n    /* [...] */\r\n\r\n    @RestResource\r\n    @HasRoleAdminOrHasReadCollectionPermission\r\n    override fun findAll(): List&lt;T&gt;\r\n\r\n    /* [...] */\r\n\r\n}\r\n```\r\n\r\nSecond, the base-repository is implemented by the actual entity-repository:\r\n``` kotlin\r\n@RepositoryRestResource(path = &quot;categories&quot;, collectionResourceRel = &quot;categories&quot;)\r\n@Transactional(readOnly = true)\r\ninterface CategoryRepository : BaseRepository&lt;Category&gt; {\r\n\r\n    /* [...] */\r\n\r\n}\r\n```\r\n\r\nThird, here&#39;s the `@HasRoleAdminOrHasReadCollectionPermission` meta-annotation:\r\n\r\n``` kotlin\r\n@Retention(AnnotationRetention.RUNTIME)\r\n@Target(AnnotationTarget.CLASS, AnnotationTarget.FUNCTION)\r\n@PreAuthorize(&quot;hasRole(&#39;$ROLE_ADMIN&#39;) or hasPermission($COLLECTION_TARGET, $DELETE_PERMISSION)&quot;)\r\nannotation class HasRoleAdminOrHasDeleteCollectionPermission\r\n```\r\n\r\nI&#39;m all out of ideas, looked through the Java files generated from Kotlin, nowhere are duplicated annotations. Hoping someone here can help me with that.\r\n\r\nEdit: As requested, here&#39;s the Application-class and the class containing the security-config:\r\n\r\n``` kotlin\r\n@SpringBootApplication(exclude = [ErrorMvcAutoConfiguration::class])\r\n@ServletComponentScan\r\n@EnableAsync\r\n@EnableScheduling\r\nclass Application {\r\n    companion object {\r\n        val HOSTNAME = System.getenv(&quot;HOSTNAME&quot;)\r\n        val TIMESTAMP = System.currentTimeMillis()\r\n\r\n        /** Entry point, run with gradle `bootRun` task. */\r\n        @JvmStatic\r\n        fun main(args: Array&lt;String&gt;) {\r\n            SpringApplication.run(Application::class.java, *args)\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n``` kotlin\r\n@Configuration\r\n@EnableWebSecurity(debug = true)\r\n@EnableMethodSecurity(prePostEnabled = true)\r\nclass SecurityConfig(\r\n    private val environment: Environment,\r\n    private val baseProperties: BaseProperties,\r\n    private val accountService: AccountService,\r\n    private val integrationService: IntegrationService,\r\n    private val jwtService: JwtService,\r\n    private val loginAttemptService: LoginAttemptService,\r\n    private val handlerExceptionResolver: HandlerExceptionResolver\r\n) {\r\n\r\n    @Bean\r\n    fun webSecurityCustomizer(): WebSecurityCustomizer =\r\n        WebSecurityCustomizer { web: WebSecurity -&gt; web.debug(true) }\r\n\r\n    @Bean\r\n    fun corsConfigurationSource(): CorsConfigurationSource {\r\n        val configuration = CorsConfiguration()\r\n        configuration.allowedOrigins = baseProperties.corsAllowedOrigins()\r\n        configuration.allowedMethods = listOf(CorsConfiguration.ALL)\r\n        configuration.allowedHeaders = listOf(CorsConfiguration.ALL)\r\n        configuration.allowCredentials = true\r\n        val source = UrlBasedCorsConfigurationSource()\r\n        source.registerCorsConfiguration(ANY_PATH, configuration)\r\n        return source\r\n    }\r\n\r\n    @Bean\r\n    fun userDetailsService(): UserDetailsService =\r\n        AccountUserDetailsService(accountService, integrationService)\r\n\r\n    @Bean\r\n    fun authenticationManager(\r\n        http: HttpSecurity,\r\n        userDetailsService: UserDetailsService\r\n    ): AuthenticationManager {\r\n        val authenticationManagerBuilder = http.getSharedObject(AuthenticationManagerBuilder::class.java)\r\n\r\n        val loginAttemptDaoAuthenticationProvider = LoginAttemptDaoAuthenticationProvider(loginAttemptService, userDetailsService)\r\n        val jwtPreAuthenticationProvider = PreAuthenticatedAuthenticationProvider()\r\n\r\n        jwtPreAuthenticationProvider.setPreAuthenticatedUserDetailsService(UserDetailsByNameServiceWrapper(userDetailsService))\r\n\r\n        return authenticationManagerBuilder\r\n            .userDetailsService(userDetailsService).and()\r\n            .authenticationProvider(loginAttemptDaoAuthenticationProvider)\r\n            .authenticationProvider(jwtPreAuthenticationProvider)\r\n            .build()\r\n    }\r\n\r\n    @Bean\r\n    fun filterChain(\r\n        http: HttpSecurity,\r\n        authenticationManager: AuthenticationManager,\r\n        userDetailsService: UserDetailsService\r\n    ): SecurityFilterChain {\r\n        return http\r\n            .requireSSL()\r\n            .disableLocalHSTS()\r\n            .enableCors()\r\n            .enableStatelessCsrf()\r\n            .statelessSessionManagement()\r\n            .jwtAuthentication(authenticationManager)\r\n            .setRequestRestrictions()\r\n            .build()\r\n    }\r\n\r\n    private fun HttpSecurity.requireSSL(): HttpSecurity =\r\n        requiresChannel().anyRequest().requiresSecure().and()\r\n\r\n    private fun HttpSecurity.disableLocalHSTS(): HttpSecurity =\r\n        if (environment.acceptsProfiles(Profiles.of(DEVELOPMENT, TESTING)))\r\n            headers().httpStrictTransportSecurity().disable().and()\r\n        else this\r\n\r\n    private fun HttpSecurity.enableCors(): HttpSecurity =\r\n        cors().and()\r\n\r\n    private fun HttpSecurity.enableStatelessCsrf(): HttpSecurity =\r\n        csrf().disable().addFilterBefore(StatelessCsrfFilter(), CsrfFilter::class.java)\r\n\r\n    private fun HttpSecurity.statelessSessionManagement(): HttpSecurity =\r\n        sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n\r\n    private fun HttpSecurity.jwtAuthentication(\r\n        authenticationManager: AuthenticationManager\r\n    ): HttpSecurity =\r\n        addFilterBefore(JwtPreAuthenticatedProcessingFilter(authenticationManager, jwtService), UsernamePasswordAuthenticationFilter::class.java)\r\n            .addFilterBefore(JwtCookiePreAuthenticationFilter(jwtService), UsernamePasswordAuthenticationFilter::class.java)\r\n            .formLogin()\r\n            .loginProcessingUrl(LOGIN_URL)\r\n            .successHandler(JwtCookieAuthenticationSuccessHandler(jwtService))\r\n            .failureHandler(AuthenticationFailureResolver(handlerExceptionResolver))\r\n            .and()\r\n            .logout()\r\n            .logoutUrl(LOGOUT_URL)\r\n            .logoutSuccessHandler(Http200LogoutSuccessHandler())\r\n            .addLogoutHandler(JwtCookieLogoutHandler(jwtService))\r\n            .and()\r\n\r\n    private fun HttpSecurity.setRequestRestrictions(): HttpSecurity =\r\n        authorizeHttpRequests {\r\n            it.requestMatchers(HttpMethod.GET, ROOT_URL).permitAll()\r\n                .requestMatchers([...])\r\n                .anyRequest().denyAll().and()\r\n        }\r\n}\r\n\r\n```","title":"AnnotationConfigurationException since upgrade to Spring Boot 3/JDK 17","body":"<p>I have recently upgraded my Spring Boot Application to Spring Boot 3 (from 2.6.4), Kotlin 1.8.0 (from 1.7.20) and JDK 17 (from 11). Right now I'm facing AnnotationConfigurationExceptions caused by <code>@PreAuthorize</code> meta-annotations used on inherited repository-methods.</p>\n<pre><code>org.springframework.core.annotation.AnnotationConfigurationException: Found more than one annotation of type interface org.springframework.security.access.prepost.PreAuthorize attributed to public final java.util.List jdk.proxy2.$Proxy390.findAll() Please remove the duplicate annotations and publish a bean to handle your authorization logic.\n        at org.springframework.security.authorization.method.AuthorizationAnnotationUtils.findUniqueAnnotation(AuthorizationAnnotationUtils.java:64)\n        at org.springframework.security.authorization.method.PreAuthorizeExpressionAttributeRegistry.findPreAuthorizeAnnotation(PreAuthorizeExpressionAttributeRegistry.java:71)\n        at org.springframework.security.authorization.method.PreAuthorizeExpressionAttributeRegistry.resolveAttribute(PreAuthorizeExpressionAttributeRegistry.java:61)\n        at org.springframework.security.authorization.method.AbstractExpressionAttributeRegistry.lambda$getAttribute$0(AbstractExpressionAttributeRegistry.java:57)\n        at java.base/java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1708)\n        at org.springframework.security.authorization.method.AbstractExpressionAttributeRegistry.getAttribute(AbstractExpressionAttributeRegistry.java:57)\n        at org.springframework.security.authorization.method.AbstractExpressionAttributeRegistry.getAttribute(AbstractExpressionAttributeRegistry.java:46)\n        at org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager.check(PreAuthorizeAuthorizationManager.java:63)\n        at org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager.check(PreAuthorizeAuthorizationManager.java:40)\n        at org.springframework.security.authorization.ObservationAuthorizationManager.check(ObservationAuthorizationManager.java:55)\n        at org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager.check(DeferringObservationAuthorizationManager.java:47)\n        at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:252)\n        at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:198)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n        at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)\n</code></pre>\n<p>After some debugging, I found that Spring Security somehow reflects the single annotation multiple times. As soon as I move the methods from the base-repository to the actual repository, the exception does no longer appear.</p>\n<p>I've got a base-repository implementing some common methods like findAll, findById, etc. and marking them accessible using the REST-API and restricting the access using the <code>@HasRoleAdminOrHasReadCollectionPermission</code> meta-annotation (following later):</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@NoRepositoryBean\ninterface BaseRepository&lt;T : BaseEntity&gt; : CrudRepository&lt;T, Long&gt; {\n\n    /* [...] */\n\n    @RestResource\n    @HasRoleAdminOrHasReadCollectionPermission\n    override fun findAll(): List&lt;T&gt;\n\n    /* [...] */\n\n}\n</code></pre>\n<p>Second, the base-repository is implemented by the actual entity-repository:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@RepositoryRestResource(path = &quot;categories&quot;, collectionResourceRel = &quot;categories&quot;)\n@Transactional(readOnly = true)\ninterface CategoryRepository : BaseRepository&lt;Category&gt; {\n\n    /* [...] */\n\n}\n</code></pre>\n<p>Third, here's the <code>@HasRoleAdminOrHasReadCollectionPermission</code> meta-annotation:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Retention(AnnotationRetention.RUNTIME)\n@Target(AnnotationTarget.CLASS, AnnotationTarget.FUNCTION)\n@PreAuthorize(&quot;hasRole('$ROLE_ADMIN') or hasPermission($COLLECTION_TARGET, $DELETE_PERMISSION)&quot;)\nannotation class HasRoleAdminOrHasDeleteCollectionPermission\n</code></pre>\n<p>I'm all out of ideas, looked through the Java files generated from Kotlin, nowhere are duplicated annotations. Hoping someone here can help me with that.</p>\n<p>Edit: As requested, here's the Application-class and the class containing the security-config:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@SpringBootApplication(exclude = [ErrorMvcAutoConfiguration::class])\n@ServletComponentScan\n@EnableAsync\n@EnableScheduling\nclass Application {\n    companion object {\n        val HOSTNAME = System.getenv(&quot;HOSTNAME&quot;)\n        val TIMESTAMP = System.currentTimeMillis()\n\n        /** Entry point, run with gradle `bootRun` task. */\n        @JvmStatic\n        fun main(args: Array&lt;String&gt;) {\n            SpringApplication.run(Application::class.java, *args)\n        }\n    }\n}\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Configuration\n@EnableWebSecurity(debug = true)\n@EnableMethodSecurity(prePostEnabled = true)\nclass SecurityConfig(\n    private val environment: Environment,\n    private val baseProperties: BaseProperties,\n    private val accountService: AccountService,\n    private val integrationService: IntegrationService,\n    private val jwtService: JwtService,\n    private val loginAttemptService: LoginAttemptService,\n    private val handlerExceptionResolver: HandlerExceptionResolver\n) {\n\n    @Bean\n    fun webSecurityCustomizer(): WebSecurityCustomizer =\n        WebSecurityCustomizer { web: WebSecurity -&gt; web.debug(true) }\n\n    @Bean\n    fun corsConfigurationSource(): CorsConfigurationSource {\n        val configuration = CorsConfiguration()\n        configuration.allowedOrigins = baseProperties.corsAllowedOrigins()\n        configuration.allowedMethods = listOf(CorsConfiguration.ALL)\n        configuration.allowedHeaders = listOf(CorsConfiguration.ALL)\n        configuration.allowCredentials = true\n        val source = UrlBasedCorsConfigurationSource()\n        source.registerCorsConfiguration(ANY_PATH, configuration)\n        return source\n    }\n\n    @Bean\n    fun userDetailsService(): UserDetailsService =\n        AccountUserDetailsService(accountService, integrationService)\n\n    @Bean\n    fun authenticationManager(\n        http: HttpSecurity,\n        userDetailsService: UserDetailsService\n    ): AuthenticationManager {\n        val authenticationManagerBuilder = http.getSharedObject(AuthenticationManagerBuilder::class.java)\n\n        val loginAttemptDaoAuthenticationProvider = LoginAttemptDaoAuthenticationProvider(loginAttemptService, userDetailsService)\n        val jwtPreAuthenticationProvider = PreAuthenticatedAuthenticationProvider()\n\n        jwtPreAuthenticationProvider.setPreAuthenticatedUserDetailsService(UserDetailsByNameServiceWrapper(userDetailsService))\n\n        return authenticationManagerBuilder\n            .userDetailsService(userDetailsService).and()\n            .authenticationProvider(loginAttemptDaoAuthenticationProvider)\n            .authenticationProvider(jwtPreAuthenticationProvider)\n            .build()\n    }\n\n    @Bean\n    fun filterChain(\n        http: HttpSecurity,\n        authenticationManager: AuthenticationManager,\n        userDetailsService: UserDetailsService\n    ): SecurityFilterChain {\n        return http\n            .requireSSL()\n            .disableLocalHSTS()\n            .enableCors()\n            .enableStatelessCsrf()\n            .statelessSessionManagement()\n            .jwtAuthentication(authenticationManager)\n            .setRequestRestrictions()\n            .build()\n    }\n\n    private fun HttpSecurity.requireSSL(): HttpSecurity =\n        requiresChannel().anyRequest().requiresSecure().and()\n\n    private fun HttpSecurity.disableLocalHSTS(): HttpSecurity =\n        if (environment.acceptsProfiles(Profiles.of(DEVELOPMENT, TESTING)))\n            headers().httpStrictTransportSecurity().disable().and()\n        else this\n\n    private fun HttpSecurity.enableCors(): HttpSecurity =\n        cors().and()\n\n    private fun HttpSecurity.enableStatelessCsrf(): HttpSecurity =\n        csrf().disable().addFilterBefore(StatelessCsrfFilter(), CsrfFilter::class.java)\n\n    private fun HttpSecurity.statelessSessionManagement(): HttpSecurity =\n        sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n\n    private fun HttpSecurity.jwtAuthentication(\n        authenticationManager: AuthenticationManager\n    ): HttpSecurity =\n        addFilterBefore(JwtPreAuthenticatedProcessingFilter(authenticationManager, jwtService), UsernamePasswordAuthenticationFilter::class.java)\n            .addFilterBefore(JwtCookiePreAuthenticationFilter(jwtService), UsernamePasswordAuthenticationFilter::class.java)\n            .formLogin()\n            .loginProcessingUrl(LOGIN_URL)\n            .successHandler(JwtCookieAuthenticationSuccessHandler(jwtService))\n            .failureHandler(AuthenticationFailureResolver(handlerExceptionResolver))\n            .and()\n            .logout()\n            .logoutUrl(LOGOUT_URL)\n            .logoutSuccessHandler(Http200LogoutSuccessHandler())\n            .addLogoutHandler(JwtCookieLogoutHandler(jwtService))\n            .and()\n\n    private fun HttpSecurity.setRequestRestrictions(): HttpSecurity =\n        authorizeHttpRequests {\n            it.requestMatchers(HttpMethod.GET, ROOT_URL).permitAll()\n                .requestMatchers([...])\n                .anyRequest().denyAll().and()\n        }\n}\n\n</code></pre>\n"},{"tags":["java","maven","intellij-idea"],"comments":[{"owner":{"account_id":17693330,"reputation":3781,"user_id":12844632,"display_name":"Egor Klepikov"},"score":0,"creation_date":1667893205,"post_id":74356366,"comment_id":131269786,"body_markdown":"Try to import your certificates to the JRE used by maven. (Settings/Preferences | Build, Execution, Deployment | Build Tools | Maven | Runner | JRE)","body":"Try to import your certificates to the JRE used by maven. (Settings/Preferences | Build, Execution, Deployment | Build Tools | Maven | Runner | JRE)"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1667894397,"post_id":74356366,"comment_id":131270106,"body_markdown":"Use a more recent version of Maven... current version 3.8.6 ...","body":"Use a more recent version of Maven... current version 3.8.6 ..."},{"owner":{"account_id":20173909,"reputation":15,"user_id":14796060,"display_name":"AnxiousGuy"},"score":0,"creation_date":1667895044,"post_id":74356366,"comment_id":131270303,"body_markdown":"@EgorKlepikov yeah I installed my certificates under the JRE used by mvn.","body":"@EgorKlepikov yeah I installed my certificates under the JRE used by mvn."},{"owner":{"account_id":20173909,"reputation":15,"user_id":14796060,"display_name":"AnxiousGuy"},"score":0,"creation_date":1667895833,"post_id":74356366,"comment_id":131270564,"body_markdown":"@khmarbaise, mvn build command is running fine, its the IDE that is giving the cert issue","body":"@khmarbaise, mvn build command is running fine, its the IDE that is giving the cert issue"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1667897171,"post_id":74356366,"comment_id":131271052,"body_markdown":"Than upgrade your IDE version...which version of IDEA do you use?","body":"Than upgrade your IDE version...which version of IDEA do you use?"},{"owner":{"account_id":20173909,"reputation":15,"user_id":14796060,"display_name":"AnxiousGuy"},"score":0,"creation_date":1667898549,"post_id":74356366,"comment_id":131271543,"body_markdown":"@khmarbaise, I am using the latest version (IntelliJ IDEA 2022.2.3 (Community Edition))","body":"@khmarbaise, I am using the latest version (IntelliJ IDEA 2022.2.3 (Community Edition))"},{"owner":{"account_id":17693330,"reputation":3781,"user_id":12844632,"display_name":"Egor Klepikov"},"score":0,"creation_date":1668425065,"post_id":74356366,"comment_id":131393942,"body_markdown":"Try to install the certs into the keystore of the JVM that is used to run IntelliJ IDEA and is displayed in Help | About. Please see https://intellij-support.jetbrains.com/hc/en-us/community/posts/115000094584-IDEA-Ultimate-2016-3-4-throwing-unable-to-find-valid-certification-path-to-requested-target-when-trying-to-refresh-gradle?page=1#community_comment_115000405564","body":"Try to install the certs into the keystore of the JVM that is used to run IntelliJ IDEA and is displayed in Help | About. Please see <a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/115000094584-IDEA-Ultimate-2016-3-4-throwing-unable-to-find-valid-certification-path-to-requested-target-when-trying-to-refresh-gradle?page=1#community_comment_115000405564\" rel=\"nofollow noreferrer\">intellij-support.jetbrains.com/hc/en-us/community/posts/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":13794086,"reputation":536,"user_id":10174866,"display_name":"Young"},"score":0,"creation_date":1686562158,"post_id":76222569,"comment_id":134810258,"body_markdown":"for the step 2 and 3, it can be simplified by adding directly in IDEA: Settings/tools/Server certificates then + the certificate downloaded.","body":"for the step 2 and 3, it can be simplified by adding directly in IDEA: Settings/tools/Server certificates then + the certificate downloaded."},{"owner":{"account_id":14843172,"reputation":61,"user_id":10719276,"display_name":"Kipng&#39;etich Victor Lang&#39;at"},"score":0,"creation_date":1686950156,"post_id":76222569,"comment_id":134874181,"body_markdown":"I tried adding as you have mentioned @Young but didn&#39;t work for my case.","body":"I tried adding as you have mentioned @Young but didn&#39;t work for my case."}],"tags":[],"owner":{"account_id":14843172,"reputation":61,"user_id":10719276,"display_name":"Kipng&#39;etich Victor Lang&#39;at"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683752872,"creation_date":1683752872,"answer_id":76222569,"question_id":74356366,"body_markdown":"I encountered this error while on MACOS. My Issue was when trying to download dependencies located in `https://repo.maven.apache.org/maven2/org/slf4j/slf4j-simple/2.0.7/slf4j-simple-2.0.7.pom` from maven central while using Intellij Idea. \r\n\r\nSteps to resolve: \r\n\r\n 1. Visit `https://repo.maven.apache.org/maven2/org/slf4j/slf4j-simple/2.0.7/slf4j-simple-2.0.7.pom` on my browser. \r\n 2. Click the lock icon as below\r\n[![enter image description here][1]][1] Go to `Connection is secure` then `Certificate is valid`.\r\n3. On the Details tab, select the top most on the certificate hierarchy and export to your known location on disc. \r\n\r\nNext we are going to import the certificate on two keystores. First on our JDK keystore and later on the keystore used by the IDE. \r\n\r\nImport on JDK keystore. \r\n\r\n 1. Navigate to security folder on JAVA_HOME. For my case locate `/Library/Java/JavaVirtualMachines/jdk-11.0.16.1.jdk/Contents/Home/lib/security`. If list you will see a file `cacerts` which is a collection of trusted certificates. we need to import our downloaded certificate here using the command `sudo keytool -importcert -alias maven -file ~/Desktop/repo.maven.apache.org.cer -keystore cacerts`. Note for my case I downloaded the certificate to trust on my Desktop folder and named `repo.maven.apache.org.cer`. When prompted enter you password and `changeit` for truststore. \r\n\r\n \r\n\r\n 2. Next we need to trust the certificate within our IDE&#39;s security folder.  `cd /Applications/IntelliJ IDEA 19.05.39.app/Contents/jbr/Contents/Home/lib/security`. Note my IDE&#39;s version as the location my change abit based on the version of IDE you are using. \r\n3. Import the downloaded certificate using `sudo keytool -importcert -alias maven -file ~/Desktop/repo.maven.apache.org.cer -keystore cacerts`. Enter your user password when prompted and `changeit` for keystore password. \r\n\r\n4. Restart your IDE.","title":"Intellij IDE giving PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException","body":"<p>I encountered this error while on MACOS. My Issue was when trying to download dependencies located in <code>https://repo.maven.apache.org/maven2/org/slf4j/slf4j-simple/2.0.7/slf4j-simple-2.0.7.pom</code> from maven central while using Intellij Idea.</p>\n<p>Steps to resolve:</p>\n<ol>\n<li>Visit <code>https://repo.maven.apache.org/maven2/org/slf4j/slf4j-simple/2.0.7/slf4j-simple-2.0.7.pom</code> on my browser.</li>\n<li>Click the lock icon as below\n[![enter image description here][1]][1] Go to <code>Connection is secure</code> then <code>Certificate is valid</code>.</li>\n<li>On the Details tab, select the top most on the certificate hierarchy and export to your known location on disc.</li>\n</ol>\n<p>Next we are going to import the certificate on two keystores. First on our JDK keystore and later on the keystore used by the IDE.</p>\n<p>Import on JDK keystore.</p>\n<ol>\n<li><p>Navigate to security folder on JAVA_HOME. For my case locate <code>/Library/Java/JavaVirtualMachines/jdk-11.0.16.1.jdk/Contents/Home/lib/security</code>. If list you will see a file <code>cacerts</code> which is a collection of trusted certificates. we need to import our downloaded certificate here using the command <code>sudo keytool -importcert -alias maven -file ~/Desktop/repo.maven.apache.org.cer -keystore cacerts</code>. Note for my case I downloaded the certificate to trust on my Desktop folder and named <code>repo.maven.apache.org.cer</code>. When prompted enter you password and <code>changeit</code> for truststore.</p>\n</li>\n<li><p>Next we need to trust the certificate within our IDE's security folder.  <code>cd /Applications/IntelliJ IDEA 19.05.39.app/Contents/jbr/Contents/Home/lib/security</code>. Note my IDE's version as the location my change abit based on the version of IDE you are using.</p>\n</li>\n<li><p>Import the downloaded certificate using <code>sudo keytool -importcert -alias maven -file ~/Desktop/repo.maven.apache.org.cer -keystore cacerts</code>. Enter your user password when prompted and <code>changeit</code> for keystore password.</p>\n</li>\n<li><p>Restart your IDE.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":20173909,"reputation":15,"user_id":14796060,"display_name":"AnxiousGuy"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4735,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683752872,"creation_date":1667887883,"question_id":74356366,"body_markdown":"I am getting error\r\n```\r\n22:00:17.222 [pool-6-thread-1] ERROR ingrian.internal.xml.XMLAuthToken - handshakeCompleted: SSL handshake did not complete within alloted time {}\r\njavax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n\tat sun.security.ssl.Alert.createSSLException(Alert.java:131) ~[?:1.8.0_351]\r\n```\r\nin my Intellij IDE, when I am running any Java file, but when I am running ```mvn clean install```, the build is getting successful. I have added all the required certificates.\r\nmvn --version\r\n```\r\nMaven home: /usr/local/Cellar/maven/3.5.4/libexec\r\nJava version: 1.8.0_351, vendor: Oracle Corporation, runtime: /Library/Java/JavaVirtualMachines/jdk1.8.0_351.jdk/Contents/Home/jre\r\n\r\n```\r\n\r\nIDE Run Config\r\n\r\n[IDE Run Config][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JDOq8.png\r\n\r\nIntellij was running fine, before, I replaced the old certs with the new certs and then it started giving this error.\r\n\r\nI have downloaded new java version, new IDE version as well, cleared the old cache, but nothing seems to work.\r\n\r\nIs there any configuration in Intellij that I have to update?","title":"Intellij IDE giving PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException","body":"<p>I am getting error</p>\n<pre><code>22:00:17.222 [pool-6-thread-1] ERROR ingrian.internal.xml.XMLAuthToken - handshakeCompleted: SSL handshake did not complete within alloted time {}\njavax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n    at sun.security.ssl.Alert.createSSLException(Alert.java:131) ~[?:1.8.0_351]\n</code></pre>\n<p>in my Intellij IDE, when I am running any Java file, but when I am running <code>mvn clean install</code>, the build is getting successful. I have added all the required certificates.\nmvn --version</p>\n<pre><code>Maven home: /usr/local/Cellar/maven/3.5.4/libexec\nJava version: 1.8.0_351, vendor: Oracle Corporation, runtime: /Library/Java/JavaVirtualMachines/jdk1.8.0_351.jdk/Contents/Home/jre\n\n</code></pre>\n<p>IDE Run Config</p>\n<p><a href=\"https://i.stack.imgur.com/JDOq8.png\" rel=\"nofollow noreferrer\">IDE Run Config</a></p>\n<p>Intellij was running fine, before, I replaced the old certs with the new certs and then it started giving this error.</p>\n<p>I have downloaded new java version, new IDE version as well, cleared the old cache, but nothing seems to work.</p>\n<p>Is there any configuration in Intellij that I have to update?</p>\n"},{"tags":["java","json","templates","configuration"],"comments":[{"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"score":1,"creation_date":1536066885,"post_id":52167101,"comment_id":91284118,"body_markdown":"Similar question https://stackoverflow.com/questions/2205627/dynamic-placeholder-substitution-in-properties-in-java/52165713#52165713","body":"Similar question <a href=\"https://stackoverflow.com/questions/2205627/dynamic-placeholder-substitution-in-properties-in-java/52165713#52165713\" title=\"dynamic placeholder substitution in properties in java\">stackoverflow.com/questions/2205627/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":9760022,"reputation":64,"user_id":7235411,"display_name":"Soma S&#246;r&#246;s"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1536068503,"creation_date":1536068503,"answer_id":52167726,"question_id":52167101,"body_markdown":"What about converting it to XML then create some XSLT? it might be much readable and cleaner.","title":"How to template JSON in java","body":"<p>What about converting it to XML then create some XSLT? it might be much readable and cleaner.</p>\n"},{"comments":[{"owner":{"account_id":3086980,"reputation":484,"user_id":2613931,"accept_rate":43,"display_name":"Jeeri"},"score":2,"creation_date":1536468362,"post_id":52168627,"comment_id":91431367,"body_markdown":"Thank you for the reply, If in future if the client asks different template of Json I have to modify my source code, is there any way where simply loading json required by the client is loaded and values populated form source?","body":"Thank you for the reply, If in future if the client asks different template of Json I have to modify my source code, is there any way where simply loading json required by the client is loaded and values populated form source?"}],"tags":[],"owner":{"account_id":5590946,"reputation":3040,"user_id":4430183,"display_name":"Emre SavcÄ±"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1536071517,"creation_date":1536071517,"answer_id":52168627,"question_id":52167101,"body_markdown":"You can use Jackson to serialize and deserialize json. I suggest you to create seperate classes which represents your client data.\r\n\r\nI show you an example of how you can deserialize your data and map it to your client json.\r\n\r\nYou can generate corresponding classes for client 2 with getting some help from http://www.jsonschema2pojo.org/ for mapping json to pojo.\r\n\r\nHere is the code :\r\n\r\n    public class Main {\r\n        public static void main(String[] args) throws ParseException, ParserConfigurationException, IOException, SAXException {\r\n    \r\n            ObjectMapper mapper = new ObjectMapper();\r\n    \r\n            Root root = mapper.readValue(new File(&quot;test.json&quot;), Root.class);\r\n    \r\n            Client1 c1 = new Client1();\r\n            PersonalInfo personalInfo1 = new PersonalInfo();\r\n            personalInfo1.setAge(root.getAge());\r\n            personalInfo1.setFriendsNames(root.getFriends());\r\n            personalInfo1.setName(root.getName());\r\n    \r\n            EducationalInfo educationalInfo1 = new EducationalInfo();\r\n            educationalInfo1.setCollege(root.getEducation().getCollege());\r\n            educationalInfo1.setGrade(root.getEducation().getGrade());\r\n            educationalInfo1.setStudy(root.getEducation().getStudy());\r\n    \r\n            c1.setPersonalInfo(personalInfo1);\r\n            c1.setEducationalInfo(educationalInfo1);\r\n    \r\n            mapper.writeValue(new File(&quot;client1.json&quot;), c1);\r\n        }\r\n    }\r\n\r\nInside test.json file :\r\n\r\n    {\r\n      &quot;name&quot;: &quot;XYZ&quot;,\r\n      &quot;age&quot;: 24,\r\n      &quot;education&quot;: {\r\n        &quot;college&quot;: &quot;ppppp&quot;,\r\n        &quot;study&quot;: &quot;b.tech&quot;,\r\n        &quot;grade&quot;: 6.8\r\n      },\r\n      &quot;friends&quot;: [\r\n        &quot;kkkk&quot;,\r\n        &quot;bbbbbbbbbbb&quot;,\r\n        &quot;jjjjjj&quot;\r\n      ],\r\n      &quot;dob&quot;: &quot;01-08-1990&quot;\r\n    }\r\n\r\nInside client1.json file :\r\n\r\n    {\r\n      &quot;personalInfo&quot;: {\r\n        &quot;name&quot;: &quot;XYZ&quot;,\r\n        &quot;age&quot;: 24,\r\n        &quot;friendsNames&quot;: [\r\n          &quot;kkkk&quot;,\r\n          &quot;bbbbbbbbbbb&quot;,\r\n          &quot;jjjjjj&quot;\r\n        ]\r\n      },\r\n      &quot;educationalInfo&quot;: {\r\n        &quot;college&quot;: &quot;ppppp&quot;,\r\n        &quot;study&quot;: &quot;b.tech&quot;,\r\n        &quot;grade&quot;: 6.8\r\n      }\r\n    }\r\n    \r\nHere is the classes which represents your json data:\r\n\r\n    class Education {\r\n        private String college;\r\n        private String study;\r\n        private float grade;\r\n    \r\n        public String getCollege() {\r\n            return college;\r\n        }\r\n    \r\n        public void setCollege(String college) {\r\n            this.college = college;\r\n        }\r\n    \r\n        public String getStudy() {\r\n            return study;\r\n        }\r\n    \r\n        public void setStudy(String study) {\r\n            this.study = study;\r\n        }\r\n    \r\n        public float getGrade() {\r\n            return grade;\r\n        }\r\n    \r\n        public void setGrade(float grade) {\r\n            this.grade = grade;\r\n        }\r\n    }\r\n    \r\n    // root of your base json data\r\n    class Root {\r\n    \r\n        private String name;\r\n        private int age;\r\n        private Education education;\r\n        private List&lt;String&gt; friends;\r\n        private String dob;\r\n    \r\n        public String getName() {\r\n            return name;\r\n        }\r\n    \r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n        public int getAge() {\r\n            return age;\r\n        }\r\n    \r\n        public void setAge(int age) {\r\n            this.age = age;\r\n        }\r\n    \r\n        public Education getEducation() {\r\n            return education;\r\n        }\r\n    \r\n        public void setEducation(Education education) {\r\n            this.education = education;\r\n        }\r\n    \r\n        public List&lt;String&gt; getFriends() {\r\n            return friends;\r\n        }\r\n    \r\n        public void setFriends(List&lt;String&gt; friends) {\r\n            this.friends = friends;\r\n        }\r\n    \r\n        public String getDob() {\r\n            return dob;\r\n        }\r\n    \r\n        public void setDob(String dob) {\r\n            this.dob = dob;\r\n        }\r\n    }\r\n    \r\n    class EducationalInfo {\r\n    \r\n        private String college;\r\n        private String study;\r\n        private float grade;\r\n    \r\n        public String getCollege() {\r\n            return college;\r\n        }\r\n    \r\n        public void setCollege(String college) {\r\n            this.college = college;\r\n        }\r\n    \r\n        public String getStudy() {\r\n            return study;\r\n        }\r\n    \r\n        public void setStudy(String study) {\r\n            this.study = study;\r\n        }\r\n    \r\n        public float getGrade() {\r\n            return grade;\r\n        }\r\n    \r\n        public void setGrade(float grade) {\r\n            this.grade = grade;\r\n        }\r\n    }\r\n    \r\n    // class which represents client 1 json data\r\n    class Client1 {\r\n    \r\n        private PersonalInfo personalInfo;\r\n        private EducationalInfo educationalInfo;\r\n    \r\n        public PersonalInfo getPersonalInfo() {\r\n            return personalInfo;\r\n        }\r\n    \r\n        public void setPersonalInfo(PersonalInfo personalInfo) {\r\n            this.personalInfo = personalInfo;\r\n        }\r\n    \r\n        public EducationalInfo getEducationalInfo() {\r\n            return educationalInfo;\r\n        }\r\n    \r\n        public void setEducationalInfo(EducationalInfo educationalInfo) {\r\n            this.educationalInfo = educationalInfo;\r\n        }\r\n    }\r\n    \r\n    class PersonalInfo {\r\n    \r\n        private String name;\r\n        private int age;\r\n        private List&lt;String&gt; friendsNames = null;\r\n    \r\n        public String getName() {\r\n            return name;\r\n        }\r\n    \r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n        public int getAge() {\r\n            return age;\r\n        }\r\n    \r\n        public void setAge(int age) {\r\n            this.age = age;\r\n        }\r\n    \r\n        public List&lt;String&gt; getFriendsNames() {\r\n            return friendsNames;\r\n        }\r\n    \r\n        public void setFriendsNames(List&lt;String&gt; friendsNames) {\r\n            this.friendsNames = friendsNames;\r\n        }\r\n    }\r\n\r\n","title":"How to template JSON in java","body":"<p>You can use Jackson to serialize and deserialize json. I suggest you to create seperate classes which represents your client data.</p>\n\n<p>I show you an example of how you can deserialize your data and map it to your client json.</p>\n\n<p>You can generate corresponding classes for client 2 with getting some help from <a href=\"http://www.jsonschema2pojo.org/\" rel=\"nofollow noreferrer\">http://www.jsonschema2pojo.org/</a> for mapping json to pojo.</p>\n\n<p>Here is the code :</p>\n\n<pre><code>public class Main {\n    public static void main(String[] args) throws ParseException, ParserConfigurationException, IOException, SAXException {\n\n        ObjectMapper mapper = new ObjectMapper();\n\n        Root root = mapper.readValue(new File(\"test.json\"), Root.class);\n\n        Client1 c1 = new Client1();\n        PersonalInfo personalInfo1 = new PersonalInfo();\n        personalInfo1.setAge(root.getAge());\n        personalInfo1.setFriendsNames(root.getFriends());\n        personalInfo1.setName(root.getName());\n\n        EducationalInfo educationalInfo1 = new EducationalInfo();\n        educationalInfo1.setCollege(root.getEducation().getCollege());\n        educationalInfo1.setGrade(root.getEducation().getGrade());\n        educationalInfo1.setStudy(root.getEducation().getStudy());\n\n        c1.setPersonalInfo(personalInfo1);\n        c1.setEducationalInfo(educationalInfo1);\n\n        mapper.writeValue(new File(\"client1.json\"), c1);\n    }\n}\n</code></pre>\n\n<p>Inside test.json file :</p>\n\n<pre><code>{\n  \"name\": \"XYZ\",\n  \"age\": 24,\n  \"education\": {\n    \"college\": \"ppppp\",\n    \"study\": \"b.tech\",\n    \"grade\": 6.8\n  },\n  \"friends\": [\n    \"kkkk\",\n    \"bbbbbbbbbbb\",\n    \"jjjjjj\"\n  ],\n  \"dob\": \"01-08-1990\"\n}\n</code></pre>\n\n<p>Inside client1.json file :</p>\n\n<pre><code>{\n  \"personalInfo\": {\n    \"name\": \"XYZ\",\n    \"age\": 24,\n    \"friendsNames\": [\n      \"kkkk\",\n      \"bbbbbbbbbbb\",\n      \"jjjjjj\"\n    ]\n  },\n  \"educationalInfo\": {\n    \"college\": \"ppppp\",\n    \"study\": \"b.tech\",\n    \"grade\": 6.8\n  }\n}\n</code></pre>\n\n<p>Here is the classes which represents your json data:</p>\n\n<pre><code>class Education {\n    private String college;\n    private String study;\n    private float grade;\n\n    public String getCollege() {\n        return college;\n    }\n\n    public void setCollege(String college) {\n        this.college = college;\n    }\n\n    public String getStudy() {\n        return study;\n    }\n\n    public void setStudy(String study) {\n        this.study = study;\n    }\n\n    public float getGrade() {\n        return grade;\n    }\n\n    public void setGrade(float grade) {\n        this.grade = grade;\n    }\n}\n\n// root of your base json data\nclass Root {\n\n    private String name;\n    private int age;\n    private Education education;\n    private List&lt;String&gt; friends;\n    private String dob;\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public int getAge() {\n        return age;\n    }\n\n    public void setAge(int age) {\n        this.age = age;\n    }\n\n    public Education getEducation() {\n        return education;\n    }\n\n    public void setEducation(Education education) {\n        this.education = education;\n    }\n\n    public List&lt;String&gt; getFriends() {\n        return friends;\n    }\n\n    public void setFriends(List&lt;String&gt; friends) {\n        this.friends = friends;\n    }\n\n    public String getDob() {\n        return dob;\n    }\n\n    public void setDob(String dob) {\n        this.dob = dob;\n    }\n}\n\nclass EducationalInfo {\n\n    private String college;\n    private String study;\n    private float grade;\n\n    public String getCollege() {\n        return college;\n    }\n\n    public void setCollege(String college) {\n        this.college = college;\n    }\n\n    public String getStudy() {\n        return study;\n    }\n\n    public void setStudy(String study) {\n        this.study = study;\n    }\n\n    public float getGrade() {\n        return grade;\n    }\n\n    public void setGrade(float grade) {\n        this.grade = grade;\n    }\n}\n\n// class which represents client 1 json data\nclass Client1 {\n\n    private PersonalInfo personalInfo;\n    private EducationalInfo educationalInfo;\n\n    public PersonalInfo getPersonalInfo() {\n        return personalInfo;\n    }\n\n    public void setPersonalInfo(PersonalInfo personalInfo) {\n        this.personalInfo = personalInfo;\n    }\n\n    public EducationalInfo getEducationalInfo() {\n        return educationalInfo;\n    }\n\n    public void setEducationalInfo(EducationalInfo educationalInfo) {\n        this.educationalInfo = educationalInfo;\n    }\n}\n\nclass PersonalInfo {\n\n    private String name;\n    private int age;\n    private List&lt;String&gt; friendsNames = null;\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public int getAge() {\n        return age;\n    }\n\n    public void setAge(int age) {\n        this.age = age;\n    }\n\n    public List&lt;String&gt; getFriendsNames() {\n        return friendsNames;\n    }\n\n    public void setFriendsNames(List&lt;String&gt; friendsNames) {\n        this.friendsNames = friendsNames;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3086980,"reputation":484,"user_id":2613931,"accept_rate":43,"display_name":"Jeeri"},"score":0,"creation_date":1536468349,"post_id":52180605,"comment_id":91431366,"body_markdown":"I liked your approach but the only thing I am worried about is in future if the client asks different template of Json I have to modify my source code, is there any way where simply loading json required by the client is loaded and values populated form source?","body":"I liked your approach but the only thing I am worried about is in future if the client asks different template of Json I have to modify my source code, is there any way where simply loading json required by the client is loaded and values populated form source?"},{"owner":{"account_id":3148031,"reputation":109,"user_id":2662111,"display_name":"Steklorez"},"score":0,"creation_date":1536494944,"post_id":52180605,"comment_id":91437067,"body_markdown":"If the client wants to see another structure, of course you need to change the Java code. Another structure is a new version of your data exchange service.\nYou can see how SOAP works on WSDL and the compatibility of services.\nMy example is good for adding new customers to work with the same data. But adding new elements or changing the structure of the answer will always lead to a code change. You can use text templates with variables and replace variables your data, and not need use java-objects and convert them to JSON","body":"If the client wants to see another structure, of course you need to change the Java code. Another structure is a new version of your data exchange service. You can see how SOAP works on WSDL and the compatibility of services. My example is good for adding new customers to work with the same data. But adding new elements or changing the structure of the answer will always lead to a code change. You can use text templates with variables and replace variables your data, and not need use java-objects and convert them to JSON"},{"owner":{"account_id":3148031,"reputation":109,"user_id":2662111,"display_name":"Steklorez"},"score":0,"creation_date":1536495286,"post_id":52180605,"comment_id":91437180,"body_markdown":"See how work &quot;freemarker&quot; - it is a one of the best engine","body":"See how work &quot;freemarker&quot; - it is a one of the best engine"}],"tags":[],"owner":{"account_id":3148031,"reputation":109,"user_id":2662111,"display_name":"Steklorez"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536136246,"creation_date":1536136246,"answer_id":52180605,"question_id":52167101,"body_markdown":"I push full worked example in java into [**GIT**][1] with libs (lombok and jackson)\r\nTemplate json mapped to object and object to json with different clients.\r\n\r\n\r\n  [1]: https://github.com/Steklorez/stackoverflow_questions_52167101","title":"How to template JSON in java","body":"<p>I push full worked example in java into <a href=\"https://github.com/Steklorez/stackoverflow_questions_52167101\" rel=\"nofollow noreferrer\"><strong>GIT</strong></a> with libs (lombok and jackson)\nTemplate json mapped to object and object to json with different clients.</p>\n"},{"comments":[{"owner":{"account_id":3511170,"reputation":1068,"user_id":2935450,"display_name":"Rahul Tokase"},"score":0,"creation_date":1655133684,"post_id":55177815,"comment_id":128253138,"body_markdown":"Hi Charlie can u point us to the example with jayway jsonpath","body":"Hi Charlie can u point us to the example with jayway jsonpath"}],"tags":[],"owner":{"account_id":1135767,"reputation":1478,"user_id":1120854,"display_name":"charlie"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1552638567,"creation_date":1552635887,"answer_id":55177815,"question_id":52167101,"body_markdown":"Use a **JSON Path** library, like [JayWay][1]. With that, templates to transform your exapmle would be:\r\n\r\n## Client 1 ##\r\n\r\n    {\r\n        &quot;personalInfo&quot;: {\r\n            &quot;name&quot;: &quot;$.name&quot;,\r\n            &quot;age&quot;: &quot;$.age&quot;,\r\n            &quot;friendsNames&quot;: &quot;$.friends&quot;\r\n        },\r\n        &quot;educationalInfo&quot;: &quot;$.education&quot;\r\n    }\r\n\r\n## Client 2 ##\r\n\r\n    {\r\n        &quot;personalInformation&quot;: {\r\n            &quot;nameOfEmployee&quot;: &quot;$.name&quot;,\r\n            &quot;ageOfEmployee&quot;: &quot;$.age&quot;\r\n        },\r\n        &quot;educationalInformation&quot;: {\r\n            &quot;college&quot;: &quot;$.education.college&quot;,\r\n            &quot;study&quot;: &quot;$.education.study&quot;\r\n        }\r\n    }\r\n\r\nWhat you need to implement is the template traversal. It&#39;s about 20 lines of code; or 40 if you also need to transform list elements, like:\r\n\r\n    {\r\n        &quot;friends&quot;: [ &quot;$.friends[?(@ =~ /.{5,}/)]&quot;, {\r\n            &quot;name&quot;: &quot;@&quot;,\r\n            &quot;since&quot;: &quot;$.dob&quot;\r\n        } ]\r\n    }\r\n\r\nwhich would result into:\r\n\r\n    {\r\n        &quot;friends&quot;: [ {\r\n            &quot;name&quot;: &quot;bbbbbbbbbbb&quot;,\r\n            &quot;since&quot;: &quot;01-08-1990&quot;\r\n        }, {\r\n            &quot;name&quot;: &quot;jjjjjj&quot;,\r\n            &quot;since&quot;: &quot;01-08-1990&quot;\r\n        } ]\r\n    }\r\n\r\n  [1]: https://github.com/json-path/JsonPath","title":"How to template JSON in java","body":"<p>Use a <strong>JSON Path</strong> library, like <a href=\"https://github.com/json-path/JsonPath\" rel=\"nofollow noreferrer\">JayWay</a>. With that, templates to transform your exapmle would be:</p>\n\n<h2>Client 1</h2>\n\n<pre><code>{\n    \"personalInfo\": {\n        \"name\": \"$.name\",\n        \"age\": \"$.age\",\n        \"friendsNames\": \"$.friends\"\n    },\n    \"educationalInfo\": \"$.education\"\n}\n</code></pre>\n\n<h2>Client 2</h2>\n\n<pre><code>{\n    \"personalInformation\": {\n        \"nameOfEmployee\": \"$.name\",\n        \"ageOfEmployee\": \"$.age\"\n    },\n    \"educationalInformation\": {\n        \"college\": \"$.education.college\",\n        \"study\": \"$.education.study\"\n    }\n}\n</code></pre>\n\n<p>What you need to implement is the template traversal. It's about 20 lines of code; or 40 if you also need to transform list elements, like:</p>\n\n<pre><code>{\n    \"friends\": [ \"$.friends[?(@ =~ /.{5,}/)]\", {\n        \"name\": \"@\",\n        \"since\": \"$.dob\"\n    } ]\n}\n</code></pre>\n\n<p>which would result into:</p>\n\n<pre><code>{\n    \"friends\": [ {\n        \"name\": \"bbbbbbbbbbb\",\n        \"since\": \"01-08-1990\"\n    }, {\n        \"name\": \"jjjjjj\",\n        \"since\": \"01-08-1990\"\n    } ]\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25095701,"reputation":11,"user_id":18946901,"display_name":"LeoTaylor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652078743,"creation_date":1652078743,"answer_id":72167896,"question_id":52167101,"body_markdown":"Your job is to output multilevel JSON data as multiple JSON formats. JSONPath can do this but the process is a hassle.\r\n\r\nA simple alternative is to use SPL. SPL is a Java open-source package. You just need three lines of code to get the job done:\r\n\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nCYCp.png\r\n\r\nSPL offers JDBC driver to be invoked by Java. Just store the above SPL script as jsonparse.splx and invoke it in a Java application as you call a stored procedure:\r\n```\r\nâ€¦\r\nClass.forName(&quot;com.esproc.jdbc.InternalDriver&quot;);\r\ncon= DriverManager.getConnection(&quot;jdbc:esproc:local://&quot;);\r\nst = con.prepareCall(&quot;call jsonparse()&quot;);\r\nst.execute();\r\nâ€¦\r\n```","title":"How to template JSON in java","body":"<p>Your job is to output multilevel JSON data as multiple JSON formats. JSONPath can do this but the process is a hassle.</p>\n<p>A simple alternative is to use SPL. SPL is a Java open-source package. You just need three lines of code to get the job done:</p>\n<p><a href=\"https://i.stack.imgur.com/nCYCp.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>SPL offers JDBC driver to be invoked by Java. Just store the above SPL script as jsonparse.splx and invoke it in a Java application as you call a stored procedure:</p>\n<pre><code>â€¦\nClass.forName(&quot;com.esproc.jdbc.InternalDriver&quot;);\ncon= DriverManager.getConnection(&quot;jdbc:esproc:local://&quot;);\nst = con.prepareCall(&quot;call jsonparse()&quot;);\nst.execute();\nâ€¦\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7459,"reputation":5045,"user_id":12982,"accept_rate":33,"display_name":"fijiaaron"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656092009,"creation_date":1656092009,"answer_id":72747573,"question_id":52167101,"body_markdown":"Java doesn&#39;t have great templating built in.\r\n\r\nBut if you want to do a quick an dirty JSON template where you can replace a few values -- especially without all that ugly quote escaping:\r\n\r\n{\\&quot;key\\&quot;:\\&quot;value\\&quot;}\r\n\r\nYou can use single quotes and string replace:\r\n\r\n{&#39;key&#39;:&#39;VALUE&#39;}.replace(&quot;&#39;&quot;, &quot;\\&quot;&quot;).replace(&quot;VALUE&quot;, 42)\r\n\r\nA few caveats:\r\n\r\nThis will break if any existing keys or values have single quotes (like O&#39;malley).\r\n\r\nIt won&#39;t replace strings with numbers, boolean, or null\r\n\r\nIt can&#39;t -- by itself -- insert nested arrays or objects (e.g. [] {}) other than as strings.\r\n\r\nBut with a little bit of of extra work, you can accomplish the 80/20 rule.  After that point you&#39;d probably want to look into parsing or generating -- but by then you&#39;re not looking for a quick template.\r\n\r\n \r\n\r\n","title":"How to template JSON in java","body":"<p>Java doesn't have great templating built in.</p>\n<p>But if you want to do a quick an dirty JSON template where you can replace a few values -- especially without all that ugly quote escaping:</p>\n<p>{&quot;key&quot;:&quot;value&quot;}</p>\n<p>You can use single quotes and string replace:</p>\n<p>{'key':'VALUE'}.replace(&quot;'&quot;, &quot;&quot;&quot;).replace(&quot;VALUE&quot;, 42)</p>\n<p>A few caveats:</p>\n<p>This will break if any existing keys or values have single quotes (like O'malley).</p>\n<p>It won't replace strings with numbers, boolean, or null</p>\n<p>It can't -- by itself -- insert nested arrays or objects (e.g. [] {}) other than as strings.</p>\n<p>But with a little bit of of extra work, you can accomplish the 80/20 rule.  After that point you'd probably want to look into parsing or generating -- but by then you're not looking for a quick template.</p>\n"}],"owner":{"account_id":3086980,"reputation":484,"user_id":2613931,"accept_rate":43,"display_name":"Jeeri"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15695,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":55177815,"answer_count":6,"score":3,"last_activity_date":1683752864,"creation_date":1536066535,"question_id":52167101,"body_markdown":"My Use case is I have a json file but I have to share only few of them to client.\r\nEx: Consider the source json file as shown below.\r\n\r\n    {\r\n    \t&quot;name&quot;: &quot;XYZ&quot;,\r\n    \t&quot;age&quot;: 24,\r\n    \t&quot;education&quot;: {\r\n    \t\t&quot;college&quot;: &quot;ppppp&quot;,\r\n    \t\t&quot;study&quot;: &quot;b.tech&quot;,\r\n    \t\t&quot;grade&quot;: 6.8\r\n    \t},\r\n    \t&quot;friends&quot;: [&quot;kkkk&quot;,\r\n    \t&quot;bbbbbbbbbbb&quot;,\r\n    \t&quot;jjjjjj&quot;],\r\n    \t&quot;dob&quot;:&quot;01-08-1990&quot;\r\n    }\r\n\r\nFor client 1 I have to share below output\r\n\r\n    {\r\n    \t&quot;personalInfo&quot;: {\r\n    \t\t&quot;name&quot;: &quot;XYZ&quot;,\r\n    \t\t&quot;age&quot;: 24,\r\n    \t\t&quot;friendsNames&quot;: [&quot;kkkk&quot;,&quot;bbbbbbbbbbb&quot;,&quot;jjjjjj&quot;]\r\n    \t},\r\n    \t&quot;educationalInfo&quot;: {\r\n    \t\t&quot;college&quot;: &quot;ppppp&quot;,\r\n    \t\t&quot;study&quot;: &quot;b.tech&quot;,\r\n    \t\t&quot;grade&quot;: 6.8\r\n    \t}\r\n    }\r\n\r\nFor client 2 I have to share below output\r\n\r\n    {\r\n    \t&quot;personalInformation&quot;: {\r\n    \t\t&quot;nameOfEmployee&quot;: &quot;XYZ&quot;,\r\n    \t\t&quot;ageOfEmployee&quot;: 24\r\n    \t},\r\n    \t&quot;educationalInformation&quot;: {\r\n    \t\t&quot;college&quot;: &quot;ppppp&quot;,\r\n    \t\t&quot;study&quot;: &quot;b.tech&quot;\r\n    \t}\r\n    }\r\n\r\nAnd for other clients also the use case is same, I have to skip some keys and give different names to the keys. How to dynamically do this by some kind of configuration. I used jsonPath to achieve this but removing few keys from json object is difficult. Any suggestions can be appreciated.","title":"How to template JSON in java","body":"<p>My Use case is I have a json file but I have to share only few of them to client.\nEx: Consider the source json file as shown below.</p>\n\n<pre><code>{\n    \"name\": \"XYZ\",\n    \"age\": 24,\n    \"education\": {\n        \"college\": \"ppppp\",\n        \"study\": \"b.tech\",\n        \"grade\": 6.8\n    },\n    \"friends\": [\"kkkk\",\n    \"bbbbbbbbbbb\",\n    \"jjjjjj\"],\n    \"dob\":\"01-08-1990\"\n}\n</code></pre>\n\n<p>For client 1 I have to share below output</p>\n\n<pre><code>{\n    \"personalInfo\": {\n        \"name\": \"XYZ\",\n        \"age\": 24,\n        \"friendsNames\": [\"kkkk\",\"bbbbbbbbbbb\",\"jjjjjj\"]\n    },\n    \"educationalInfo\": {\n        \"college\": \"ppppp\",\n        \"study\": \"b.tech\",\n        \"grade\": 6.8\n    }\n}\n</code></pre>\n\n<p>For client 2 I have to share below output</p>\n\n<pre><code>{\n    \"personalInformation\": {\n        \"nameOfEmployee\": \"XYZ\",\n        \"ageOfEmployee\": 24\n    },\n    \"educationalInformation\": {\n        \"college\": \"ppppp\",\n        \"study\": \"b.tech\"\n    }\n}\n</code></pre>\n\n<p>And for other clients also the use case is same, I have to skip some keys and give different names to the keys. How to dynamically do this by some kind of configuration. I used jsonPath to achieve this but removing few keys from json object is difficult. Any suggestions can be appreciated.</p>\n"},{"tags":["java","swing","time","timer","countdown"],"comments":[{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1683636133,"post_id":76209285,"comment_id":134394237,"body_markdown":"&quot;_convert the number of seconds in the countdown to Days:Hours:Minutes:Seconds_&quot; One approach - take a look at [`Duration`](https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html#ofSeconds-long-), and the various methods it has to extract different duration units such as `toHours()`, `toDays()`.","body":"&quot;<i>convert the number of seconds in the countdown to Days:Hours:Minutes:Seconds</i>&quot; One approach - take a look at <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html#ofSeconds-long-\" rel=\"nofollow noreferrer\"><code>Duration</code></a>, and the various methods it has to extract different duration units such as <code>toHours()</code>, <code>toDays()</code>."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1683639392,"post_id":76209285,"comment_id":134395051,"body_markdown":"Do not use ScheduledExecutorService.  GUIs require the use of a particular thread, and using an arbitrary thread of your own is not compatible with them.  If you are planning to use Swing for your GUI, use [javax.swing.Timer](https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/Timer.html) (*not* java.util.Timer!).  If you are planning to use JavaFX for your GUI, use [ScheduledService](https://openjfx.io/javadoc/20/javafx.graphics/javafx/concurrent/ScheduledService.html).","body":"Do not use ScheduledExecutorService.  GUIs require the use of a particular thread, and using an arbitrary thread of your own is not compatible with them.  If you are planning to use Swing for your GUI, use <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/Timer.html\" rel=\"nofollow noreferrer\">javax.swing.Timer</a> (<i>not</i> java.util.Timer!).  If you are planning to use JavaFX for your GUI, use <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/concurrent/ScheduledService.html\" rel=\"nofollow noreferrer\">ScheduledService</a>."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1683692397,"post_id":76209285,"comment_id":134403728,"body_markdown":"Does this answer your question? [How to update a JLabel text?](https://stackoverflow.com/questions/17456401/how-to-update-a-jlabel-text)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/17456401/how-to-update-a-jlabel-text\">How to update a JLabel text?</a>"}],"answers":[{"tags":[],"owner":{"account_id":15168430,"reputation":173,"user_id":10945276,"display_name":"roediGERhard"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683636000,"creation_date":1683636000,"answer_id":76209462,"question_id":76209285,"body_markdown":"As you have already noticed, you can use the TimeUnit class to perform the conversions. Here is an example:\r\n\r\n    int seconds = 3600;\r\n    int day = (int)TimeUnit.SECONDS.toDays(seconds);\r\n    long hours = TimeUnit.SECONDS.toHours(seconds) - (day * 24);\r\n    long minute = TimeUnit.SECONDS.toMinutes(seconds) - (TimeUnit.SECONDS.toHours(seconds)* 60);\r\n    long second = TimeUnit.SECONDS.toSeconds(seconds) - (TimeUnit.SECONDS.toMinutes(seconds) *60);\r\n    System.out.println(day + &quot;:&quot; + hours + &quot;:&quot; + minute + &quot;:&quot; + second);\r\n\r\non regards to the ouput possibilities, that depends on how you want to display it. JFrame, Terminal, something else.","title":"1 Week Countdown Timer in Java","body":"<p>As you have already noticed, you can use the TimeUnit class to perform the conversions. Here is an example:</p>\n<pre><code>int seconds = 3600;\nint day = (int)TimeUnit.SECONDS.toDays(seconds);\nlong hours = TimeUnit.SECONDS.toHours(seconds) - (day * 24);\nlong minute = TimeUnit.SECONDS.toMinutes(seconds) - (TimeUnit.SECONDS.toHours(seconds)* 60);\nlong second = TimeUnit.SECONDS.toSeconds(seconds) - (TimeUnit.SECONDS.toMinutes(seconds) *60);\nSystem.out.println(day + &quot;:&quot; + hours + &quot;:&quot; + minute + &quot;:&quot; + second);\n</code></pre>\n<p>on regards to the ouput possibilities, that depends on how you want to display it. JFrame, Terminal, something else.</p>\n"},{"comments":[{"owner":{"account_id":27805357,"reputation":17,"user_id":21228882,"display_name":"Mute"},"score":0,"creation_date":1683713700,"post_id":76213652,"comment_id":134407744,"body_markdown":"This actually helps out a bunch and went really in depth for what I was trying to do. Thank you!","body":"This actually helps out a bunch and went really in depth for what I was trying to do. Thank you!"}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1683735493,"creation_date":1683669792,"answer_id":76213652,"question_id":76209285,"body_markdown":"# *java.time*\r\n\r\nYou seem to be working much too hard here. I found your code hard to follow, and likely overwrought. Java has an industry-leading date-time framework in the *java.time* classes, defined in JSR 310. Make use of that.\r\n\r\n# Use `javax.swing.Timer`, not your own threads\r\n\r\nAs others commented, for a Swing app, you should be using the [`javax.swing.Timer`][1] class (or [SwingWorker][2]) rather than counting down in your own threads and executor service. See [Tutorial][3] by Oracle.\r\n\r\n# Tracking time to elapse\r\n\r\nAs to your specific question about determining the days, hours, minutes, seconds, and nanos remaining before a particular moment:\r\n\r\n - Decide whether you want to track your span of time (a) by calendar days or, (b) by generic 24-hour chunked â€œdaysâ€. \r\n - Store your target moment. \r\n - Capture the current moment.\r\n - Calculate elapsed time. \r\n\r\nI will assume you want 24-hour chunked days rather than calendar days.\r\n\r\nThe `Instant` class represents a moment, a specific point on the timeline, as seen in UTC (an offset from UTC of zero hours-minutes-seconds). \r\n\r\nThe `Duration` class represents a span of time unattached to the timeline, on a scale of 24-hour generic days, hours, minutes, seconds, and nanos.\r\n\r\n    Duration week = Duration.ofDays( 7 ) ;  // 7 * 24 hours = 1 week, ignoring calendar, ignoring time zones.\r\n    Instant target = Instant.now().plus( week ) ;\r\n\r\nWhen your timer task runs, capture the current moment, and calculate time remaining.\r\n\r\n    Duration timeRemaining = Duration.between( Instant.now() , target ) ;\r\n\r\nCheck to see if the remaining duration [is positive][4] or [is negative][5]. \r\n\r\n - If positive, the target is still in the future. So report its current value. \r\n - If negative, the target has passed. So recalculate the next target, the next week out. And report the new value.\r\n\r\n## Example code\r\n\r\nHere is a class to track the repeating weekly countdown.\r\n\r\n```java\r\npackage work.basil.example.time;\r\n\r\nimport java.time.*;\r\n\r\npublic class Weekly\r\n{\r\n    private final Duration week = Duration.ofDays( 7 );\r\n    private Instant target = Instant.now().plus( week );\r\n\r\n    public Duration timeRemaining ( )\r\n    {\r\n        Duration timeRemaining = Duration.between( Instant.now() , target );\r\n        if ( timeRemaining.isNegative() )  // If the current moment is *after* the target, calculate a new target.\r\n        {\r\n            target = target.plus( week );\r\n            timeRemaining = Duration.between( Instant.now() , target );\r\n        }\r\n        return timeRemaining;\r\n    }\r\n}\r\n```\r\n\r\nIf you want to report on the next target moment, add a `getter` method that returns an `Instant`. The *java.time* objects such as `Instant` are [immutable][6], so no need to make a copy when returning.\r\n\r\nHere is some code to exercise that `Weekly` class. The `Weekly#timeRemaining` method is what your `SwingTimer` code will call.\r\n\r\n```java\r\nWeekly weekly = new Weekly();\r\n\r\nDuration duration = weekly.timeRemaining() ;\r\nSystem.out.println( duration );\r\n\r\ntry { Thread.sleep( Duration.ofSeconds( 3 ) ); } catch ( InterruptedException e ) { throw new RuntimeException( e ); }\r\nSystem.out.println( weekly.timeRemaining() );\r\ntry { Thread.sleep( Duration.ofSeconds( 30 ) ); } catch ( InterruptedException e ) { throw new RuntimeException( e ); }\r\nSystem.out.println( weekly.timeRemaining() );\r\ntry { Thread.sleep( Duration.ofMinutes( 5 ) ); } catch ( InterruptedException e ) { throw new RuntimeException( e ); }\r\nSystem.out.println( weekly.timeRemaining() );\r\n```\r\n\r\nWhen run:\r\n\r\n```none\r\nPT167H59M59.999799S\r\nPT167H59M56.994437S\r\nPT167H59M26.989259S\r\nPT167H54M26.987014S\r\n```\r\n\r\n## Generate text\r\n\r\nLastly, you want to generate text to represent this countdown value. \r\n\r\nYou can interrogate the `Duration` objects for its parts, a number of generic 24-hour days (not related to the calendar), hours, minutes, seconds, and nanos. Use the various `toâ€¦Part` methods on the [`Duration`][7] class. \r\n\r\n    long days = duration.toDaysPart() ;\r\n    int hours = duration.toHoursPart() ;\r\n    int minutes = duration.toMinutesPart() ;\r\n    int seconds = duration.toSecondsPart() ;\r\n\r\nCombine those [numbers together as a string][8].\r\n\r\n    String output = \r\n        String.format(\r\n            &quot;Time remaining: %d days, %d hours,  %d minutes,  %d seconds&quot;, \r\n            days, \r\n            hours, \r\n            minutes, \r\n            seconds \r\n        ) \r\n    ;\r\n\r\n&gt;Time remaining: 6 days, 23 hours,  59 minutes,  59 seconds\r\n\r\nDisplay that text in your [JLabel][9] widget. [See tutorial][10] by Oracle.\r\n\r\n    myJLabel.setText( output ) ;\r\n\r\n# Example app\r\n\r\nHere is a complete example Swing app.\r\n\r\n```java\r\npackage work.basil.example.time;\r\n\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport java.time.Duration;\r\nimport java.time.Instant;\r\n\r\npublic class WeeklySwingApp\r\n{\r\n    // Code modified from example app provided by Oracle Corp at:\r\n    // https://docs.oracle.com/javase/tutorial/displayCode.html?code=https://docs.oracle.com/javase/tutorial/uiswing/examples/start/HelloWorldSwingProject/src/start/HelloWorldSwing.java\r\n    private static void createAndShowGUI ( )\r\n    {\r\n        Weekly weekly = new Weekly();\r\n\r\n        //Create and set up the window.\r\n        JFrame frame = new JFrame( &quot;Weekly Countdown&quot; );\r\n        frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );\r\n\r\n        //Add the ubiquitous &quot;Hello World&quot; label.\r\n        JLabel label = new JLabel( &quot;Time remaining: â€¦&quot; );\r\n        frame.getContentPane().add( label );\r\n\r\n        // Countdown.\r\n        int delay = 1_000; // milliseconds\r\n        ActionListener taskPerformer = ( ActionEvent actionEvent ) -&gt; label.setText( formatTimeRemaining( weekly.timeRemaining() ) );\r\n        new Timer( delay , taskPerformer ).start();\r\n\r\n        //Display the window.\r\n        frame.setPreferredSize( new Dimension( 420 , 100 ) );\r\n        frame.pack();\r\n        frame.setVisible( true );\r\n    }\r\n\r\n    private static String formatTimeRemaining ( final Duration duration )\r\n    {\r\n        return String.format(\r\n                &quot;Time remaining: %d days, %d hours,  %d minutes,  %d seconds&quot; ,\r\n                duration.toDaysPart() ,\r\n                duration.toHoursPart() ,\r\n                duration.toMinutesPart() ,\r\n                duration.toSecondsPart()\r\n        );\r\n    }\r\n    \r\n    public static void main ( String[] args )\r\n    {\r\n        //Schedule a job for the event-dispatching thread:\r\n        //creating and showing this application&#39;s GUI.\r\n        javax.swing.SwingUtilities.invokeLater( new Runnable() {public void run ( ) { createAndShowGUI(); }} );\r\n    }\r\n}\r\n```\r\n\r\n[![screenshot of example app displaying a JLabel with countdown text][11]][11]\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/Timer.html\r\n  [2]: https://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html\r\n  [3]: https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html\r\n  [4]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/Duration.html#isPositive()\r\n  [5]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/Duration.html#isNegative()\r\n  [6]: https://en.wikipedia.org/wiki/Immutable_object\r\n  [7]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/Duration.html\r\n  [8]: https://stackoverflow.com/q/6431933/642706\r\n  [9]: https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/JLabel.html\r\n  [10]: https://docs.oracle.com/javase/tutorial/uiswing/components/label.html\r\n  [11]: https://i.stack.imgur.com/lvAvi.jpg","title":"1 Week Countdown Timer in Java","body":"<h1><em>java.time</em></h1>\n<p>You seem to be working much too hard here. I found your code hard to follow, and likely overwrought. Java has an industry-leading date-time framework in the <em>java.time</em> classes, defined in JSR 310. Make use of that.</p>\n<h1>Use <code>javax.swing.Timer</code>, not your own threads</h1>\n<p>As others commented, for a Swing app, you should be using the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/Timer.html\" rel=\"nofollow noreferrer\"><code>javax.swing.Timer</code></a> class (or <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html\" rel=\"nofollow noreferrer\">SwingWorker</a>) rather than counting down in your own threads and executor service. See <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html\" rel=\"nofollow noreferrer\">Tutorial</a> by Oracle.</p>\n<h1>Tracking time to elapse</h1>\n<p>As to your specific question about determining the days, hours, minutes, seconds, and nanos remaining before a particular moment:</p>\n<ul>\n<li>Decide whether you want to track your span of time (a) by calendar days or, (b) by generic 24-hour chunked â€œdaysâ€.</li>\n<li>Store your target moment.</li>\n<li>Capture the current moment.</li>\n<li>Calculate elapsed time.</li>\n</ul>\n<p>I will assume you want 24-hour chunked days rather than calendar days.</p>\n<p>The <code>Instant</code> class represents a moment, a specific point on the timeline, as seen in UTC (an offset from UTC of zero hours-minutes-seconds).</p>\n<p>The <code>Duration</code> class represents a span of time unattached to the timeline, on a scale of 24-hour generic days, hours, minutes, seconds, and nanos.</p>\n<pre><code>Duration week = Duration.ofDays( 7 ) ;  // 7 * 24 hours = 1 week, ignoring calendar, ignoring time zones.\nInstant target = Instant.now().plus( week ) ;\n</code></pre>\n<p>When your timer task runs, capture the current moment, and calculate time remaining.</p>\n<pre><code>Duration timeRemaining = Duration.between( Instant.now() , target ) ;\n</code></pre>\n<p>Check to see if the remaining duration <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/Duration.html#isPositive()\" rel=\"nofollow noreferrer\">is positive</a> or <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/Duration.html#isNegative()\" rel=\"nofollow noreferrer\">is negative</a>.</p>\n<ul>\n<li>If positive, the target is still in the future. So report its current value.</li>\n<li>If negative, the target has passed. So recalculate the next target, the next week out. And report the new value.</li>\n</ul>\n<h2>Example code</h2>\n<p>Here is a class to track the repeating weekly countdown.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.time;\n\nimport java.time.*;\n\npublic class Weekly\n{\n    private final Duration week = Duration.ofDays( 7 );\n    private Instant target = Instant.now().plus( week );\n\n    public Duration timeRemaining ( )\n    {\n        Duration timeRemaining = Duration.between( Instant.now() , target );\n        if ( timeRemaining.isNegative() )  // If the current moment is *after* the target, calculate a new target.\n        {\n            target = target.plus( week );\n            timeRemaining = Duration.between( Instant.now() , target );\n        }\n        return timeRemaining;\n    }\n}\n</code></pre>\n<p>If you want to report on the next target moment, add a <code>getter</code> method that returns an <code>Instant</code>. The <em>java.time</em> objects such as <code>Instant</code> are <a href=\"https://en.wikipedia.org/wiki/Immutable_object\" rel=\"nofollow noreferrer\">immutable</a>, so no need to make a copy when returning.</p>\n<p>Here is some code to exercise that <code>Weekly</code> class. The <code>Weekly#timeRemaining</code> method is what your <code>SwingTimer</code> code will call.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Weekly weekly = new Weekly();\n\nDuration duration = weekly.timeRemaining() ;\nSystem.out.println( duration );\n\ntry { Thread.sleep( Duration.ofSeconds( 3 ) ); } catch ( InterruptedException e ) { throw new RuntimeException( e ); }\nSystem.out.println( weekly.timeRemaining() );\ntry { Thread.sleep( Duration.ofSeconds( 30 ) ); } catch ( InterruptedException e ) { throw new RuntimeException( e ); }\nSystem.out.println( weekly.timeRemaining() );\ntry { Thread.sleep( Duration.ofMinutes( 5 ) ); } catch ( InterruptedException e ) { throw new RuntimeException( e ); }\nSystem.out.println( weekly.timeRemaining() );\n</code></pre>\n<p>When run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>PT167H59M59.999799S\nPT167H59M56.994437S\nPT167H59M26.989259S\nPT167H54M26.987014S\n</code></pre>\n<h2>Generate text</h2>\n<p>Lastly, you want to generate text to represent this countdown value.</p>\n<p>You can interrogate the <code>Duration</code> objects for its parts, a number of generic 24-hour days (not related to the calendar), hours, minutes, seconds, and nanos. Use the various <code>toâ€¦Part</code> methods on the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/Duration.html\" rel=\"nofollow noreferrer\"><code>Duration</code></a> class.</p>\n<pre><code>long days = duration.toDaysPart() ;\nint hours = duration.toHoursPart() ;\nint minutes = duration.toMinutesPart() ;\nint seconds = duration.toSecondsPart() ;\n</code></pre>\n<p>Combine those <a href=\"https://stackoverflow.com/q/6431933/642706\">numbers together as a string</a>.</p>\n<pre><code>String output = \n    String.format(\n        &quot;Time remaining: %d days, %d hours,  %d minutes,  %d seconds&quot;, \n        days, \n        hours, \n        minutes, \n        seconds \n    ) \n;\n</code></pre>\n<blockquote>\n<p>Time remaining: 6 days, 23 hours,  59 minutes,  59 seconds</p>\n</blockquote>\n<p>Display that text in your <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/JLabel.html\" rel=\"nofollow noreferrer\">JLabel</a> widget. <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/label.html\" rel=\"nofollow noreferrer\">See tutorial</a> by Oracle.</p>\n<pre><code>myJLabel.setText( output ) ;\n</code></pre>\n<h1>Example app</h1>\n<p>Here is a complete example Swing app.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.time;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.time.Duration;\nimport java.time.Instant;\n\npublic class WeeklySwingApp\n{\n    // Code modified from example app provided by Oracle Corp at:\n    // https://docs.oracle.com/javase/tutorial/displayCode.html?code=https://docs.oracle.com/javase/tutorial/uiswing/examples/start/HelloWorldSwingProject/src/start/HelloWorldSwing.java\n    private static void createAndShowGUI ( )\n    {\n        Weekly weekly = new Weekly();\n\n        //Create and set up the window.\n        JFrame frame = new JFrame( &quot;Weekly Countdown&quot; );\n        frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );\n\n        //Add the ubiquitous &quot;Hello World&quot; label.\n        JLabel label = new JLabel( &quot;Time remaining: â€¦&quot; );\n        frame.getContentPane().add( label );\n\n        // Countdown.\n        int delay = 1_000; // milliseconds\n        ActionListener taskPerformer = ( ActionEvent actionEvent ) -&gt; label.setText( formatTimeRemaining( weekly.timeRemaining() ) );\n        new Timer( delay , taskPerformer ).start();\n\n        //Display the window.\n        frame.setPreferredSize( new Dimension( 420 , 100 ) );\n        frame.pack();\n        frame.setVisible( true );\n    }\n\n    private static String formatTimeRemaining ( final Duration duration )\n    {\n        return String.format(\n                &quot;Time remaining: %d days, %d hours,  %d minutes,  %d seconds&quot; ,\n                duration.toDaysPart() ,\n                duration.toHoursPart() ,\n                duration.toMinutesPart() ,\n                duration.toSecondsPart()\n        );\n    }\n    \n    public static void main ( String[] args )\n    {\n        //Schedule a job for the event-dispatching thread:\n        //creating and showing this application's GUI.\n        javax.swing.SwingUtilities.invokeLater( new Runnable() {public void run ( ) { createAndShowGUI(); }} );\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/lvAvi.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lvAvi.jpg\" alt=\"screenshot of example app displaying a JLabel with countdown text\" /></a></p>\n"}],"owner":{"account_id":27805357,"reputation":17,"user_id":21228882,"display_name":"Mute"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":5,"up_vote_count":2,"answer_count":2,"score":-3,"last_activity_date":1683752579,"creation_date":1683634763,"question_id":76209285,"body_markdown":"EDIT:\r\nI have created a countdown timer, however I cannot figure out how to update without creating a new instance. The code is below:\r\n\r\n    import java.util.concurrent.*;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JPanel;\r\n    import static java.util.concurrent.TimeUnit.SECONDS;\r\n    import static java.util.concurrent.TimeUnit.MINUTES;\r\n    import static java.util.concurrent.TimeUnit.HOURS;\r\n    import static java.util.concurrent.TimeUnit.DAYS;\r\n\r\n    public class Countdown {\r\n\tstatic int countdownStarterD = 7;\r\n\tstatic int countdownStarterH = 24;\r\n\tstatic int countdownStarterM = 60;\r\n\tstatic int countdownStarterS = 60;\r\n\tString cSD = Integer.toString(countdownStarterD);\r\n\tString cSH = Integer.toString(countdownStarterH);\r\n\tString cSM = Integer.toString(countdownStarterM);\r\n\tString cSS = Integer.toString(countdownStarterS);\r\n\tJFrame frame = new JFrame();\r\n\tJPanel panel = new JPanel();\r\n\tJLabel days = new JLabel(cSD);\r\n\tJLabel hours = new JLabel(cSH);\r\n\tJLabel minutes = new JLabel(cSM);\r\n\tJLabel seconds = new JLabel(cSS);\r\n\t\r\n\tpublic Countdown() {\r\n\t\tpanel.add(days);\r\n\t\tpanel.add(hours);\r\n\t\tpanel.add(minutes);\r\n\t\tpanel.add(seconds);\r\n\t\tframe.add(panel);\r\n\t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.setTitle(&quot;Countdown Timer&quot;);\r\n        frame.pack();\r\n        frame.setVisible(true);\r\n\t}\r\n\r\n    public static void main(String[] args) {\r\n        final ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);\r\n\r\n        final Runnable days = new Runnable() {\r\n\r\n            public void run() {\r\n\r\n                System.out.println(countdownStarterD);\r\n                countdownStarterD--;\r\n\r\n                if (countdownStarterD &lt; 0) {\r\n                \tcountdownStarterD = 6;\r\n                }\r\n            }\r\n        };\r\n        final Runnable hours = new Runnable() {\r\n\r\n            public void run() {\r\n\r\n                System.out.println(countdownStarterH);\r\n                countdownStarterH--;\r\n\r\n                if (countdownStarterH &lt; 0) {\r\n                \tcountdownStarterH = 23;\r\n                }\r\n            }\r\n        };\r\n        final Runnable minutes = new Runnable() {\r\n\r\n            public void run() {\r\n\r\n                System.out.println(countdownStarterM);\r\n                countdownStarterM--;\r\n\r\n                if (countdownStarterM &lt; 0) {\r\n                \tcountdownStarterM = 59;\r\n                }\r\n            }\r\n        };\r\n        final Runnable seconds = new Runnable() {\r\n\r\n            public void run() {\r\n\r\n                System.out.println(countdownStarterS);\r\n                countdownStarterS--;\r\n\r\n                if (countdownStarterS &lt; 0) {\r\n                    countdownStarterS = 59;\r\n                }\r\n            }\r\n        };\r\n        final Runnable gui = new Runnable() {\r\n\r\n            public void run() {\r\n            \tnew Countdown();\r\n            \t\r\n            }\r\n        };\r\n        scheduler.scheduleAtFixedRate(days, 0, 1, DAYS);\r\n        scheduler.scheduleAtFixedRate(hours, 0, 1, HOURS);\r\n        scheduler.scheduleAtFixedRate(minutes, 0, 1, MINUTES);\r\n        scheduler.scheduleAtFixedRate(seconds, 0, 1, SECONDS);\r\n        scheduler.scheduleAtFixedRate(gui, 0, 1, SECONDS);\r\n        \r\n    }\r\n}\r\n\r\nOLD:\r\nI am trying to create a simple GUI timer that counts down from 1 week and restarts once it is finished, it doesn&#39;t need to run anything just show a countdown. I would also like it so have a set time. I am stuck trying to convert the number of seconds in the countdown to Days:Hours:Minutes:Seconds and I don&#39;t know how to connect that conversion to a GUI. I am thinking I could possibly use a JLabel but I am not sure.\r\n\r\nI have this code so far that I found on another forum.\r\n```\r\nimport java.util.concurrent.*;\r\n\r\nimport static java.util.concurrent.TimeUnit.SECONDS;\r\n\r\npublic class Countdown {\r\n    public static void main(String[] args) {\r\n\r\n        final ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);\r\n\r\n        final Runnable runnable = new Runnable() {\r\n            int countdownStarter = 20;\r\n\r\n            public void run() {\r\n\r\n                System.out.println(countdownStarter);\r\n                countdownStarter--;\r\n\r\n                if (countdownStarter &lt; 0) {\r\n                    System.out.println(&quot;Timer Over!&quot;);\r\n                    scheduler.shutdown();\r\n                }\r\n            }\r\n        };\r\n        scheduler.scheduleAtFixedRate(runnable, 0, 1, SECONDS);\r\n    }\r\n}\r\n```\r\nIt counts down from 20 at the moment which you can change by changing \r\n```\r\nint countdownStarter = 20;\r\n```\r\nI have noticed that there is a \r\n```\r\nimport static java.util.concurrent.TimeUnit.DAYS;\r\nimport static java.util.concurrent.TimeUnit.HOURS;\r\nimport static java.util.concurrent.TimeUnit.MINUTES;\r\nimport static java.util.concurrent.TimeUnit.SECONDS;\r\n```\r\nThat can be used in the code I have so far. Any help on this would be greatly appreciated. I am not looking for a substitute application to use instead.","title":"1 Week Countdown Timer in Java","body":"<p>EDIT:\nI have created a countdown timer, however I cannot figure out how to update without creating a new instance. The code is below:</p>\n<pre><code>import java.util.concurrent.*;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport static java.util.concurrent.TimeUnit.SECONDS;\nimport static java.util.concurrent.TimeUnit.MINUTES;\nimport static java.util.concurrent.TimeUnit.HOURS;\nimport static java.util.concurrent.TimeUnit.DAYS;\n\npublic class Countdown {\nstatic int countdownStarterD = 7;\nstatic int countdownStarterH = 24;\nstatic int countdownStarterM = 60;\nstatic int countdownStarterS = 60;\nString cSD = Integer.toString(countdownStarterD);\nString cSH = Integer.toString(countdownStarterH);\nString cSM = Integer.toString(countdownStarterM);\nString cSS = Integer.toString(countdownStarterS);\nJFrame frame = new JFrame();\nJPanel panel = new JPanel();\nJLabel days = new JLabel(cSD);\nJLabel hours = new JLabel(cSH);\nJLabel minutes = new JLabel(cSM);\nJLabel seconds = new JLabel(cSS);\n\npublic Countdown() {\n    panel.add(days);\n    panel.add(hours);\n    panel.add(minutes);\n    panel.add(seconds);\n    frame.add(panel);\n    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    frame.setTitle(&quot;Countdown Timer&quot;);\n    frame.pack();\n    frame.setVisible(true);\n}\n\npublic static void main(String[] args) {\n    final ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);\n\n    final Runnable days = new Runnable() {\n\n        public void run() {\n\n            System.out.println(countdownStarterD);\n            countdownStarterD--;\n\n            if (countdownStarterD &lt; 0) {\n                countdownStarterD = 6;\n            }\n        }\n    };\n    final Runnable hours = new Runnable() {\n\n        public void run() {\n\n            System.out.println(countdownStarterH);\n            countdownStarterH--;\n\n            if (countdownStarterH &lt; 0) {\n                countdownStarterH = 23;\n            }\n        }\n    };\n    final Runnable minutes = new Runnable() {\n\n        public void run() {\n\n            System.out.println(countdownStarterM);\n            countdownStarterM--;\n\n            if (countdownStarterM &lt; 0) {\n                countdownStarterM = 59;\n            }\n        }\n    };\n    final Runnable seconds = new Runnable() {\n\n        public void run() {\n\n            System.out.println(countdownStarterS);\n            countdownStarterS--;\n\n            if (countdownStarterS &lt; 0) {\n                countdownStarterS = 59;\n            }\n        }\n    };\n    final Runnable gui = new Runnable() {\n\n        public void run() {\n            new Countdown();\n            \n        }\n    };\n    scheduler.scheduleAtFixedRate(days, 0, 1, DAYS);\n    scheduler.scheduleAtFixedRate(hours, 0, 1, HOURS);\n    scheduler.scheduleAtFixedRate(minutes, 0, 1, MINUTES);\n    scheduler.scheduleAtFixedRate(seconds, 0, 1, SECONDS);\n    scheduler.scheduleAtFixedRate(gui, 0, 1, SECONDS);\n    \n}\n</code></pre>\n<p>}</p>\n<p>OLD:\nI am trying to create a simple GUI timer that counts down from 1 week and restarts once it is finished, it doesn't need to run anything just show a countdown. I would also like it so have a set time. I am stuck trying to convert the number of seconds in the countdown to Days:Hours:Minutes:Seconds and I don't know how to connect that conversion to a GUI. I am thinking I could possibly use a JLabel but I am not sure.</p>\n<p>I have this code so far that I found on another forum.</p>\n<pre><code>import java.util.concurrent.*;\n\nimport static java.util.concurrent.TimeUnit.SECONDS;\n\npublic class Countdown {\n    public static void main(String[] args) {\n\n        final ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);\n\n        final Runnable runnable = new Runnable() {\n            int countdownStarter = 20;\n\n            public void run() {\n\n                System.out.println(countdownStarter);\n                countdownStarter--;\n\n                if (countdownStarter &lt; 0) {\n                    System.out.println(&quot;Timer Over!&quot;);\n                    scheduler.shutdown();\n                }\n            }\n        };\n        scheduler.scheduleAtFixedRate(runnable, 0, 1, SECONDS);\n    }\n}\n</code></pre>\n<p>It counts down from 20 at the moment which you can change by changing</p>\n<pre><code>int countdownStarter = 20;\n</code></pre>\n<p>I have noticed that there is a</p>\n<pre><code>import static java.util.concurrent.TimeUnit.DAYS;\nimport static java.util.concurrent.TimeUnit.HOURS;\nimport static java.util.concurrent.TimeUnit.MINUTES;\nimport static java.util.concurrent.TimeUnit.SECONDS;\n</code></pre>\n<p>That can be used in the code I have so far. Any help on this would be greatly appreciated. I am not looking for a substitute application to use instead.</p>\n"},{"tags":["java","android","flutter","kotlin","gradle"],"comments":[{"owner":{"account_id":8853763,"reputation":514,"user_id":6612138,"display_name":"Alexander Dadukin"},"score":0,"creation_date":1683757672,"post_id":76222366,"comment_id":134417527,"body_markdown":"Can you, please, share an exception text here?","body":"Can you, please, share an exception text here?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1683781704,"post_id":76222366,"comment_id":134419778,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":26500290,"reputation":1,"user_id":20137349,"display_name":"ibrahim akbas"},"score":0,"creation_date":1683790564,"post_id":76222366,"comment_id":134421244,"body_markdown":"when I run the &quot;flutter run --release&quot; command , the app haven&#39;t issue . when I run the flutter build apk the apk not working healthly . the image_crop library not working healthlty","body":"when I run the &quot;flutter run --release&quot; command , the app haven&#39;t issue . when I run the flutter build apk the apk not working healthly . the image_crop library not working healthlty"}],"owner":{"account_id":26500290,"reputation":1,"user_id":20137349,"display_name":"ibrahim akbas"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683752422,"creation_date":1683750904,"question_id":76222366,"body_markdown":"I have to applications that I developed with flutter . When I run the project in android studio , it works without any problems , but when I convert it to apk or aab format and try it on the phone or emulator some of the functionality of the applications does not work . I did try in emulator and physical device but not works . What is the reason ? I would appreciate it if you help , I think it is sourced from gradle , my gradle and pubspec codes in below\r\n\r\nAndroid\\\\buildgradle :\r\n\r\n```\r\nbuildscript {\r\n    ext.kotlin_version = &#39;1.8.21&#39;\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n\r\n    dependencies {\r\n        classpath &#39;com.android.tools.build:gradle:7.1.2&#39;\r\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\r\n    }\r\n}\r\n\r\nallprojects {\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n}\r\n\r\nrootProject.buildDir = &#39;../build&#39;\r\nsubprojects {\r\n    project.buildDir = &quot;${rootProject.buildDir}/${project.name}&quot;\r\n}\r\nsubprojects {\r\n    project.evaluationDependsOn(&#39;:app&#39;)\r\n}\r\n\r\ntasks.register(&quot;clean&quot;, Delete) {\r\n    delete rootProject.buildDir\r\n}\r\n```\r\n\r\napp\\\\buildgradle :\r\n\r\n```\r\ndef localProperties = new Properties()\r\ndef localPropertiesFile = rootProject.file(&#39;local.properties&#39;)\r\nif (localPropertiesFile.exists()) {\r\n    localPropertiesFile.withReader(&#39;UTF-8&#39;) { reader -&gt;\r\n        localProperties.load(reader)\r\n    }\r\n}\r\n\r\ndef flutterRoot = localProperties.getProperty(&#39;flutter.sdk&#39;)\r\nif (flutterRoot == null) {\r\n    throw new GradleException(&quot;Flutter SDK not found. Define location with flutter.sdk in the local.properties file.&quot;)\r\n}\r\n\r\ndef flutterVersionCode = localProperties.getProperty(&#39;flutter.versionCode&#39;)\r\nif (flutterVersionCode == null) {\r\n    flutterVersionCode = &#39;1&#39;\r\n}\r\n\r\ndef flutterVersionName = localProperties.getProperty(&#39;flutter.versionName&#39;)\r\nif (flutterVersionName == null) {\r\n    flutterVersionName = &#39;1.0&#39;\r\n}\r\n\r\napply plugin: &#39;com.android.application&#39;\r\napply plugin: &#39;kotlin-android&#39;\r\napply from: &quot;$flutterRoot/packages/flutter_tools/gradle/flutter.gradle&quot;\r\n\r\nandroid {\r\n    compileSdkVersion 33\r\n    ndkVersion flutter.ndkVersion\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n\r\n    kotlinOptions {\r\n        jvmTarget = &#39;1.8&#39;\r\n    }\r\n\r\n    sourceSets {\r\n        main.java.srcDirs += &#39;src/main/kotlin&#39;\r\n    }\r\n\r\n    defaultConfig {\r\n        // TODO: Specify your own unique Application ID (https://developer.android.com/studio/build/application-id.html).\r\n        applicationId &quot;com.iakbas.welat.question_solver&quot;\r\n        // You can update the following values to match your application needs.\r\n        // For more information, see: https://docs.flutter.dev/deployment/android#reviewing-the-gradle-build-configuration.\r\n        minSdkVersion 23\r\n        targetSdkVersion 28\r\n        versionCode flutterVersionCode.toInteger()\r\n        versionName flutterVersionName\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            // TODO: Add your own signing config for the release build.\r\n            // Signing with the debug keys for now, so `flutter run --release` works.\r\n\r\n            signingConfig signingConfigs.debug\r\n        }\r\n    }\r\n}\r\n\r\nflutter {\r\n    source &#39;../..&#39;\r\n}\r\n\r\ndependencies {\r\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\r\n\r\n    api &#39;com.google.firebase:firebase-ml-vision-image-label-model:17.0.2&#39;\r\n}\r\n```\r\n\r\npubspec :\r\n\r\n```\r\nname: text_extract_google_mi_kit\r\ndescription: A new Flutter project.\r\n\r\npublish_to: &#39;none&#39; # Remove this line if you wish to publish to pub.dev\r\n\r\nCFBundleVersion.\r\n# https://developer.apple.com/library/archive/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html\r\n# of the product and file versions while build-number is used as the build suffix.\r\nversion: 1.0.0+1\r\n\r\nenvironment:\r\n  sdk: &quot;&gt;=2.12.0 &lt;3.0.0&quot;\r\n\r\n# versions available, run `flutter pub outdated`.\r\ndependencies:\r\n  flutter:\r\n    sdk: flutter\r\n\r\n\r\n  # Use with the CupertinoIcons class for iOS style icons.\r\n  cupertino_icons: ^1.0.2\r\n  google_ml_kit: ^0.7.2\r\n  http: ^0.13.5\r\n  camera: ^0.10.0\r\n  permission_handler: ^8.2.2\r\n  image_crop: ^0.4.1\r\n  flutter_lints: ^2.0.0\r\n  lottie: ^2.3.2\r\n  google_mobile_ads: ^3.0.0\r\n\r\ndev_dependencies:\r\n  flutter_test:\r\n    sdk: flutter\r\n\r\n  # The &quot;flutter_lints&quot; package below contains a set of recommended lints to\r\n  # encourage good coding practices. The lint set provided by the package is\r\n  # activated in the `analysis_options.yaml` file located at the root of your\r\n  # package. See that file for information about deactivating specific lint\r\n  # rules and activating additional ones.\r\n  flutter_lints: ^2.0.0\r\n# For information on the generic Dart part of this file, see the\r\n# following page: https://dart.dev/tools/pub/pubspec\r\n\r\n# The following section is specific to Flutter packages.\r\nflutter:\r\n\r\n  # the material Icons class.\r\n  uses-material-design: true\r\n\r\n  # To add assets to your application, add an assets section, like this:\r\n  assets:\r\n    - assets/icons/keyboardicon.png\r\n    - assets/icons/listicon.png\r\n    - assets/icons/settings64.png\r\n    - assets/animations/aiautomation.json\r\n```","title":"Flutter App Crashing when app compiled for apk or aab","body":"<p>I have to applications that I developed with flutter . When I run the project in android studio , it works without any problems , but when I convert it to apk or aab format and try it on the phone or emulator some of the functionality of the applications does not work . I did try in emulator and physical device but not works . What is the reason ? I would appreciate it if you help , I think it is sourced from gradle , my gradle and pubspec codes in below</p>\n<p>Android\\buildgradle :</p>\n<pre><code>buildscript {\n    ext.kotlin_version = '1.8.21'\n    repositories {\n        google()\n        mavenCentral()\n    }\n\n    dependencies {\n        classpath 'com.android.tools.build:gradle:7.1.2'\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        mavenCentral()\n    }\n}\n\nrootProject.buildDir = '../build'\nsubprojects {\n    project.buildDir = &quot;${rootProject.buildDir}/${project.name}&quot;\n}\nsubprojects {\n    project.evaluationDependsOn(':app')\n}\n\ntasks.register(&quot;clean&quot;, Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n<p>app\\buildgradle :</p>\n<pre><code>def localProperties = new Properties()\ndef localPropertiesFile = rootProject.file('local.properties')\nif (localPropertiesFile.exists()) {\n    localPropertiesFile.withReader('UTF-8') { reader -&gt;\n        localProperties.load(reader)\n    }\n}\n\ndef flutterRoot = localProperties.getProperty('flutter.sdk')\nif (flutterRoot == null) {\n    throw new GradleException(&quot;Flutter SDK not found. Define location with flutter.sdk in the local.properties file.&quot;)\n}\n\ndef flutterVersionCode = localProperties.getProperty('flutter.versionCode')\nif (flutterVersionCode == null) {\n    flutterVersionCode = '1'\n}\n\ndef flutterVersionName = localProperties.getProperty('flutter.versionName')\nif (flutterVersionName == null) {\n    flutterVersionName = '1.0'\n}\n\napply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply from: &quot;$flutterRoot/packages/flutter_tools/gradle/flutter.gradle&quot;\n\nandroid {\n    compileSdkVersion 33\n    ndkVersion flutter.ndkVersion\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n\n    kotlinOptions {\n        jvmTarget = '1.8'\n    }\n\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n    }\n\n    defaultConfig {\n        // TODO: Specify your own unique Application ID (https://developer.android.com/studio/build/application-id.html).\n        applicationId &quot;com.iakbas.welat.question_solver&quot;\n        // You can update the following values to match your application needs.\n        // For more information, see: https://docs.flutter.dev/deployment/android#reviewing-the-gradle-build-configuration.\n        minSdkVersion 23\n        targetSdkVersion 28\n        versionCode flutterVersionCode.toInteger()\n        versionName flutterVersionName\n    }\n\n    buildTypes {\n        release {\n            // TODO: Add your own signing config for the release build.\n            // Signing with the debug keys for now, so `flutter run --release` works.\n\n            signingConfig signingConfigs.debug\n        }\n    }\n}\n\nflutter {\n    source '../..'\n}\n\ndependencies {\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\n\n    api 'com.google.firebase:firebase-ml-vision-image-label-model:17.0.2'\n}\n</code></pre>\n<p>pubspec :</p>\n<pre><code>name: text_extract_google_mi_kit\ndescription: A new Flutter project.\n\npublish_to: 'none' # Remove this line if you wish to publish to pub.dev\n\nCFBundleVersion.\n# https://developer.apple.com/library/archive/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html\n# of the product and file versions while build-number is used as the build suffix.\nversion: 1.0.0+1\n\nenvironment:\n  sdk: &quot;&gt;=2.12.0 &lt;3.0.0&quot;\n\n# versions available, run `flutter pub outdated`.\ndependencies:\n  flutter:\n    sdk: flutter\n\n\n  # Use with the CupertinoIcons class for iOS style icons.\n  cupertino_icons: ^1.0.2\n  google_ml_kit: ^0.7.2\n  http: ^0.13.5\n  camera: ^0.10.0\n  permission_handler: ^8.2.2\n  image_crop: ^0.4.1\n  flutter_lints: ^2.0.0\n  lottie: ^2.3.2\n  google_mobile_ads: ^3.0.0\n\ndev_dependencies:\n  flutter_test:\n    sdk: flutter\n\n  # The &quot;flutter_lints&quot; package below contains a set of recommended lints to\n  # encourage good coding practices. The lint set provided by the package is\n  # activated in the `analysis_options.yaml` file located at the root of your\n  # package. See that file for information about deactivating specific lint\n  # rules and activating additional ones.\n  flutter_lints: ^2.0.0\n# For information on the generic Dart part of this file, see the\n# following page: https://dart.dev/tools/pub/pubspec\n\n# The following section is specific to Flutter packages.\nflutter:\n\n  # the material Icons class.\n  uses-material-design: true\n\n  # To add assets to your application, add an assets section, like this:\n  assets:\n    - assets/icons/keyboardicon.png\n    - assets/icons/listicon.png\n    - assets/icons/settings64.png\n    - assets/animations/aiautomation.json\n</code></pre>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1683749391,"post_id":76222142,"comment_id":134416296,"body_markdown":"See https://stackoverflow.com/a/43319356/104891 and https://stackoverflow.com/a/13374653/104891. In a Maven project, all sources must be under `src/main/java`.","body":"See <a href=\"https://stackoverflow.com/a/43319356/104891\">stackoverflow.com/a/43319356/104891</a> and <a href=\"https://stackoverflow.com/a/13374653/104891\">stackoverflow.com/a/13374653/104891</a>. In a Maven project, all sources must be under <code>src&#47;main&#47;java</code>."},{"owner":{"account_id":22622299,"reputation":13,"user_id":16800856,"display_name":"Sergio Martin"},"score":0,"creation_date":1683749754,"post_id":76222142,"comment_id":134416359,"body_markdown":"All my sources are under src/main/java , specifically under src/main/java/com/foo","body":"All my sources are under src/main/java , specifically under src/main/java/com/foo"},{"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1683750376,"post_id":76222142,"comment_id":134416465,"body_markdown":"Please provide the [Minimal, Complete, and Verifiable example](https://stackoverflow.com/help/mcve). What icons do the .java files have?","body":"Please provide the <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>. What icons do the .java files have?"}],"answers":[{"tags":[],"owner":{"account_id":22622299,"reputation":13,"user_id":16800856,"display_name":"Sergio Martin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683751743,"creation_date":1683751743,"answer_id":76222452,"question_id":76222142,"body_markdown":"Managed to fix the problem, after invalidating caches, I went to the files per sub-package, right-click, and then `reload from disk`. Note that `File --&gt; Reload All from Disk` did not work.","title":"Intellij doesn&#39;t open .java files after moving files from package to sub-package","body":"<p>Managed to fix the problem, after invalidating caches, I went to the files per sub-package, right-click, and then <code>reload from disk</code>. Note that <code>File --&gt; Reload All from Disk</code> did not work.</p>\n"}],"owner":{"account_id":22622299,"reputation":13,"user_id":16800856,"display_name":"Sergio Martin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683751743,"creation_date":1683748424,"question_id":76222142,"body_markdown":"I had a project with the structure com.foo.Class, I moved a bunch of classes from the package com.foo to different sub-packages com.foo.bar by dragging and dropping the files in the project explorer. I moved more than one file at a time. \r\n\r\nAfter the initial refactor the classes in the new packages could not import classes from the other sub-packages (e.g com.foo.bar1.ClassA cant import com.foo.bar2.ClassB)\r\n\r\nIt is a Maven project and my initial package is in the main/java folder.\r\n\r\nI proceeded to invalidate caches ticking all boxes in the dialog. Now IntelliJ doesn&#39;t even open my .java files and they appear with a different symbol than the files in the main package. I also tried right-clicking in the pom.xml and then Maven --&gt; Reload project to no effect.\r\n\r\n\r\n[![Top icon is the icon of regular classes, and the bottom icon is the one used for the classes I cannot open (it seems to match the icon used for package-info.java files)][1]][1] \r\n\r\nThe top icon is the icon of regular classes, and the bottom icon is the one used for the classes I cannot open (it seems to match the icon used for package-info.java files). New classes are created with the regular class icon and I can open them without any trouble.\r\n\r\nOne time after invalidating the caches some of the classes I moved appeared with the regular symbol and I could open them. However, after another cache invalidation, I can no longer open them. New classes can be added to the packages and are detected normally.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RpDh1.png","title":"Intellij doesn&#39;t open .java files after moving files from package to sub-package","body":"<p>I had a project with the structure com.foo.Class, I moved a bunch of classes from the package com.foo to different sub-packages com.foo.bar by dragging and dropping the files in the project explorer. I moved more than one file at a time.</p>\n<p>After the initial refactor the classes in the new packages could not import classes from the other sub-packages (e.g com.foo.bar1.ClassA cant import com.foo.bar2.ClassB)</p>\n<p>It is a Maven project and my initial package is in the main/java folder.</p>\n<p>I proceeded to invalidate caches ticking all boxes in the dialog. Now IntelliJ doesn't even open my .java files and they appear with a different symbol than the files in the main package. I also tried right-clicking in the pom.xml and then Maven --&gt; Reload project to no effect.</p>\n<p><a href=\"https://i.stack.imgur.com/RpDh1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RpDh1.png\" alt=\"Top icon is the icon of regular classes, and the bottom icon is the one used for the classes I cannot open (it seems to match the icon used for package-info.java files)\" /></a></p>\n<p>The top icon is the icon of regular classes, and the bottom icon is the one used for the classes I cannot open (it seems to match the icon used for package-info.java files). New classes are created with the regular class icon and I can open them without any trouble.</p>\n<p>One time after invalidating the caches some of the classes I moved appeared with the regular symbol and I could open them. However, after another cache invalidation, I can no longer open them. New classes can be added to the packages and are detected normally.</p>\n"},{"tags":["java","openapi-generator-maven-plugin","type-mapping"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1678810155,"post_id":75735535,"comment_id":133603811,"body_markdown":"Why use `OffsetDateTime` instead of `Instant`? An `OffsetDateTime` with an offset of zero (`ZoneOffset.UTC`) is equivalent to an `Instant`.","body":"Why use <code>OffsetDateTime</code> instead of <code>Instant</code>? An <code>OffsetDateTime</code> with an offset of zero (<code>ZoneOffset.UTC</code>) is equivalent to an <code>Instant</code>."},{"owner":{"account_id":11329617,"reputation":359,"user_id":8307516,"accept_rate":88,"display_name":"CoderOfTheForce"},"score":1,"creation_date":1678862868,"post_id":75735535,"comment_id":133613456,"body_markdown":"Mainly out of convenience and I would like to know if it works. Cause either I am not doing it right or there is a bug.","body":"Mainly out of convenience and I would like to know if it works. Cause either I am not doing it right or there is a bug."}],"answers":[{"tags":[],"owner":{"account_id":1806113,"reputation":625,"user_id":1643179,"display_name":"gebi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683751541,"creation_date":1683751541,"answer_id":76222438,"question_id":75735535,"body_markdown":"## Solution\r\n\r\nAdd typeMappings configuration like this:\r\n\r\n```xml\r\n\t&lt;inputSpec&gt;${project.basedir}/src/main/resources/META-INF/openapi-avr.yaml&lt;/inputSpec&gt;\r\n\t&lt;generatorName&gt;jaxrs-spec&lt;/generatorName&gt;\r\n\r\n\t&lt;configOptions&gt;\r\n\t  &lt;!-- [...] --&gt;\r\n\t&lt;/configOptions&gt;\r\n\r\n\t&lt;typeMappings&gt;\r\n\t\t&lt;typeMapping&gt;LocalDate=java.time.Instant&lt;/typeMapping&gt;\r\n\t\t&lt;typeMapping&gt;OffsetDateTime=java.time.Instant&lt;/typeMapping&gt;\r\n\t&lt;/typeMappings&gt;\r\n```\r\n\r\nThis will replace every occurence of `LocalDateTime` and `OffsetDateTime` in the generated code by `java.time.Instant`. The import sections will not change. I.e. they will still contain and `import java.time.LocalDate;` and `import java.time.OffsetDateTime;`, even though these imports are not used anymore.\r\n\r\nDocumentation about typeMappings can be found [here](https://openapi-generator.tech/docs/usage/#type-mappings-and-import-mappings) and [here](https://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator-maven-plugin#type-and-import-mappings).\r\n\r\n## OpenAPI Generator Bug\r\n\r\nThe intended usage of OpenAPI Generator would be to set \r\n```xml\r\n  &lt;typeMapping&gt;LocalDate=java.time.Instant&lt;/typeMapping&gt;\r\n```\r\nand\r\n```xml\r\n  &lt;importMapping&gt;Instant=java.time.Instant&lt;/importMapping&gt;\r\n```\r\n\r\n(And likewise for OffsetDateTime.)\r\n\r\nThen imports of `LocalDate` and `OffsetDateTime` would be replaced by `import java.time.Instant;` and `Instant` would be used in the code instead of `java.time.Instant`.\r\n\r\nHowever, there is a bug in OpenAPI Generator that prevents the usage of `importMapping` in Java-based generators. Therefore we currently need to configure the type mappings as shown in my solution above.\r\n\r\n## unknown config option\r\n\r\nBy the way, I think the `useFlags` setting in your code can be removed, because this is not a valid config option for OpenAPI Generator.","title":"Represent java.time.LocalDate and java.time.OffsetDateTime as java.time.Insant","body":"<h2>Solution</h2>\n<p>Add typeMappings configuration like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;inputSpec&gt;${project.basedir}/src/main/resources/META-INF/openapi-avr.yaml&lt;/inputSpec&gt;\n    &lt;generatorName&gt;jaxrs-spec&lt;/generatorName&gt;\n\n    &lt;configOptions&gt;\n      &lt;!-- [...] --&gt;\n    &lt;/configOptions&gt;\n\n    &lt;typeMappings&gt;\n        &lt;typeMapping&gt;LocalDate=java.time.Instant&lt;/typeMapping&gt;\n        &lt;typeMapping&gt;OffsetDateTime=java.time.Instant&lt;/typeMapping&gt;\n    &lt;/typeMappings&gt;\n</code></pre>\n<p>This will replace every occurence of <code>LocalDateTime</code> and <code>OffsetDateTime</code> in the generated code by <code>java.time.Instant</code>. The import sections will not change. I.e. they will still contain and <code>import java.time.LocalDate;</code> and <code>import java.time.OffsetDateTime;</code>, even though these imports are not used anymore.</p>\n<p>Documentation about typeMappings can be found <a href=\"https://openapi-generator.tech/docs/usage/#type-mappings-and-import-mappings\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator-maven-plugin#type-and-import-mappings\" rel=\"nofollow noreferrer\">here</a>.</p>\n<h2>OpenAPI Generator Bug</h2>\n<p>The intended usage of OpenAPI Generator would be to set</p>\n<pre class=\"lang-xml prettyprint-override\"><code>  &lt;typeMapping&gt;LocalDate=java.time.Instant&lt;/typeMapping&gt;\n</code></pre>\n<p>and</p>\n<pre class=\"lang-xml prettyprint-override\"><code>  &lt;importMapping&gt;Instant=java.time.Instant&lt;/importMapping&gt;\n</code></pre>\n<p>(And likewise for OffsetDateTime.)</p>\n<p>Then imports of <code>LocalDate</code> and <code>OffsetDateTime</code> would be replaced by <code>import java.time.Instant;</code> and <code>Instant</code> would be used in the code instead of <code>java.time.Instant</code>.</p>\n<p>However, there is a bug in OpenAPI Generator that prevents the usage of <code>importMapping</code> in Java-based generators. Therefore we currently need to configure the type mappings as shown in my solution above.</p>\n<h2>unknown config option</h2>\n<p>By the way, I think the <code>useFlags</code> setting in your code can be removed, because this is not a valid config option for OpenAPI Generator.</p>\n"}],"owner":{"account_id":11329617,"reputation":359,"user_id":8307516,"accept_rate":88,"display_name":"CoderOfTheForce"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":652,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76222438,"answer_count":1,"score":0,"last_activity_date":1683751541,"creation_date":1678809447,"question_id":75735535,"body_markdown":"I want to use typemappings from the openapi-generator-maven-plugin. \r\nMy openapi spec file looks like the following: \r\n```\r\npaths:\r\n  /maintenance-windows-avr/{day}:\r\n    get:\r\n      summary: &quot;Get active maintenance windows for day&quot;\r\n      tags:\r\n        - Maintenance Windows AVR\r\n      operationId: getMaintenanceWindows\r\n      parameters:\r\n        - in: path\r\n          name: day\r\n          required: true\r\n          schema:\r\n            type: string\r\n            format: date\r\n          description: day to return active maintenance windows\r\n      responses:\r\n        &quot;200&quot;:\r\n          description: &quot;Success&quot;\r\n          content:\r\n            application/json:\r\n              schema:\r\n                type: object\r\n                items:\r\n                  $ref: &quot;#/components/schemas/ResponseListMaintenanceWindowAVRDto&quot;\r\n        default:\r\n          description: unexpected error\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: &quot;#/components/schemas/ErrorDto&quot;\r\ncomponents:\r\n  schemas:\r\n    ErrorDto:\r\n      type: object\r\n      required:\r\n        - code\r\n        - message\r\n      properties:\r\n        code:\r\n          type: integer\r\n          format: int32\r\n        message:\r\n          type: string\r\n\r\n    MaintenanceWindowAVRDto:\r\n      type: object\r\n      required:\r\n        - id\r\n        - start\r\n        - end\r\n        - hosts\r\n      properties:\r\n        id:\r\n          type: string\r\n          format: uuid\r\n          description: id of maintenance window\r\n        start:\r\n          type: string\r\n          format: date-time\r\n          description: when the maintenance window is going to start\r\n        end:\r\n          type: string\r\n          format: date-time\r\n          description: when the maintenance is going to end\r\n        hosts:\r\n          type: array\r\n          items:\r\n            type: long\r\n            format: int64\r\n            description: list of host ids\r\n\r\n    ResponseListMaintenanceWindowAVRDto:\r\n      type: object\r\n      properties:\r\n        data:\r\n          type: array\r\n          items:\r\n            $ref: &quot;#/components/schemas/MaintenanceWindowAVRDto&quot;\r\n```\r\n\r\nWhich generates me the files MaintenanceWindowsAvrApi and MaintenanceWindowAVRDto which look like the following: \r\n\r\n```\r\npackage eu.nts.nmp.csm.mac.api.generated.endpoint.avl;\r\n\r\nimport eu.nts.nmp.csm.mac.api.generated.model.avl.ErrorDto;\r\nimport java.time.LocalDate;\r\nimport eu.nts.nmp.csm.mac.api.generated.model.avl.ResponseListMaintenanceWindowAVRDto;\r\n\r\nimport javax.ws.rs.*;\r\nimport javax.ws.rs.core.Response;\r\n\r\n\r\nimport java.io.InputStream;\r\nimport java.util.Map;\r\nimport java.util.List;\r\nimport javax.validation.constraints.*;\r\nimport javax.validation.Valid;\r\n\r\n@Path(&quot;/maintenance-windows-avr/{day}&quot;)\r\n@javax.annotation.Generated(value = &quot;org.openapitools.codegen.languages.JavaJAXRSSpecServerCodegen&quot;, date = &quot;2023-03-14T16:46:37.723499+01:00[Europe/Vienna]&quot;)public interface MaintenanceWindowsAvrApi {\r\n\r\n    @GET\r\n    @Produces({ &quot;application/json&quot; })\r\n    Response getMaintenanceWindows(@PathParam(&quot;day&quot;) LocalDate day);\r\n}\r\n```\r\n```\r\npackage eu.nts.nmp.csm.mac.api.generated.model.avl;\r\n\r\nimport java.time.OffsetDateTime;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.UUID;\r\nimport javax.validation.constraints.*;\r\nimport javax.validation.Valid;\r\n\r\nimport java.util.Objects;\r\nimport com.fasterxml.jackson.annotation.JsonProperty;\r\nimport com.fasterxml.jackson.annotation.JsonCreator;\r\nimport com.fasterxml.jackson.annotation.JsonValue;\r\n\r\n\r\n\r\n@javax.annotation.Generated(value = &quot;org.openapitools.codegen.languages.JavaJAXRSSpecServerCodegen&quot;, date = &quot;2023-03-14T16:46:37.723499+01:00[Europe/Vienna]&quot;)public class MaintenanceWindowAVRDto   {\r\n  \r\n  private @Valid UUID id;\r\n  private @Valid OffsetDateTime start;\r\n  private @Valid OffsetDateTime end;\r\n  private @Valid List&lt;Long&gt; hosts = new ArrayList&lt;&gt;();\r\n\r\n  /**\r\n   * id of maintenance window\r\n   **/\r\n  public MaintenanceWindowAVRDto id(UUID id) {\r\n    this.id = id;\r\n    return this;\r\n  }\r\n\r\n  \r\n\r\n  \r\n  @JsonProperty(&quot;id&quot;)\r\n  @NotNull\r\n  public UUID getId() {\r\n    return id;\r\n  }\r\n\r\n  public void setId(UUID id) {\r\n    this.id = id;\r\n  }\r\n\r\n/**\r\n   * when the maintenance window is going to start\r\n   **/\r\n  public MaintenanceWindowAVRDto start(OffsetDateTime start) {\r\n    this.start = start;\r\n    return this;\r\n  }\r\n\r\n  \r\n\r\n  \r\n  @JsonProperty(&quot;start&quot;)\r\n  @NotNull\r\n  public OffsetDateTime getStart() {\r\n    return start;\r\n  }\r\n\r\n  public void setStart(OffsetDateTime start) {\r\n    this.start = start;\r\n  }\r\n\r\n/**\r\n   * when the maintenance is going to end\r\n   **/\r\n  public MaintenanceWindowAVRDto end(OffsetDateTime end) {\r\n    this.end = end;\r\n    return this;\r\n  }\r\n\r\n  \r\n\r\n  \r\n  @JsonProperty(&quot;end&quot;)\r\n  @NotNull\r\n  public OffsetDateTime getEnd() {\r\n    return end;\r\n  }\r\n\r\n  public void setEnd(OffsetDateTime end) {\r\n    this.end = end;\r\n  }\r\n\r\n/**\r\n   **/\r\n  public MaintenanceWindowAVRDto hosts(List&lt;Long&gt; hosts) {\r\n    this.hosts = hosts;\r\n    return this;\r\n  }\r\n\r\n  \r\n\r\n  \r\n  @JsonProperty(&quot;hosts&quot;)\r\n  @NotNull\r\n  public List&lt;Long&gt; getHosts() {\r\n    return hosts;\r\n  }\r\n\r\n  public void setHosts(List&lt;Long&gt; hosts) {\r\n    this.hosts = hosts;\r\n  }\r\n\r\n\r\n  @Override\r\n  public boolean equals(Object o) {\r\n    if (this == o) {\r\n      return true;\r\n    }\r\n    if (o == null || getClass() != o.getClass()) {\r\n      return false;\r\n    }\r\n    MaintenanceWindowAVRDto maintenanceWindowAVRDto = (MaintenanceWindowAVRDto) o;\r\n    return Objects.equals(this.id, maintenanceWindowAVRDto.id) &amp;&amp;\r\n        Objects.equals(this.start, maintenanceWindowAVRDto.start) &amp;&amp;\r\n        Objects.equals(this.end, maintenanceWindowAVRDto.end) &amp;&amp;\r\n        Objects.equals(this.hosts, maintenanceWindowAVRDto.hosts);\r\n  }\r\n\r\n  @Override\r\n  public int hashCode() {\r\n    return Objects.hash(id, start, end, hosts);\r\n  }\r\n\r\n  @Override\r\n  public String toString() {\r\n    StringBuilder sb = new StringBuilder();\r\n    sb.append(&quot;class MaintenanceWindowAVRDto {\\n&quot;);\r\n    \r\n    sb.append(&quot;    id: &quot;).append(toIndentedString(id)).append(&quot;\\n&quot;);\r\n    sb.append(&quot;    start: &quot;).append(toIndentedString(start)).append(&quot;\\n&quot;);\r\n    sb.append(&quot;    end: &quot;).append(toIndentedString(end)).append(&quot;\\n&quot;);\r\n    sb.append(&quot;    hosts: &quot;).append(toIndentedString(hosts)).append(&quot;\\n&quot;);\r\n    sb.append(&quot;}&quot;);\r\n    return sb.toString();\r\n  }\r\n\r\n  /**\r\n   * Convert the given object to string with each line indented by 4 spaces\r\n   * (except the first line).\r\n   */\r\n  private String toIndentedString(Object o) {\r\n    if (o == null) {\r\n      return &quot;null&quot;;\r\n    }\r\n    return o.toString().replace(&quot;\\n&quot;, &quot;\\n    &quot;);\r\n  }\r\n\r\n\r\n}\r\n\r\n```\r\n\r\nI want to map the LocalDate parameter in MaintenanceWindowsAvrApi file and the two OffsetDateTime fields start and end from the MaintenanceWindowAVRDto file to an Instant (java.time.Instant).\r\n\r\nI have tried so many options but nothing gives me the result I want. \r\nMy api pom file: \r\n\r\n```\r\n  &lt;inputSpec&gt;${project.basedir}/src/main/resources/META-INF/openapi-avr.yaml&lt;/inputSpec&gt;\r\n                            &lt;generatorName&gt;jaxrs-spec&lt;/generatorName&gt;\r\n                            \r\n                            &lt;configOptions&gt;\r\n                                &lt;useSwaggerAnnotations&gt;false&lt;/useSwaggerAnnotations&gt;\r\n                                &lt;interfaceOnly&gt;true&lt;/interfaceOnly&gt;\r\n                                &lt;generatePom&gt;false&lt;/generatePom&gt;\r\n                                &lt;returnResponse&gt;true&lt;/returnResponse&gt;\r\n                                &lt;dateLibrary&gt;java8&lt;/dateLibrary&gt;\r\n                                &lt;java8&gt;true&lt;/java8&gt;\r\n                                &lt;useFlags&gt;true&lt;/useFlags&gt;\r\n                                &lt;sourceFolder&gt;src/gen/java/main&lt;/sourceFolder&gt;\r\n                            &lt;/configOptions&gt;\r\n```\r\n\r\nHow can I use the typeMappings to resolve my problem? ","title":"Represent java.time.LocalDate and java.time.OffsetDateTime as java.time.Insant","body":"<p>I want to use typemappings from the openapi-generator-maven-plugin.\nMy openapi spec file looks like the following:</p>\n<pre><code>paths:\n  /maintenance-windows-avr/{day}:\n    get:\n      summary: &quot;Get active maintenance windows for day&quot;\n      tags:\n        - Maintenance Windows AVR\n      operationId: getMaintenanceWindows\n      parameters:\n        - in: path\n          name: day\n          required: true\n          schema:\n            type: string\n            format: date\n          description: day to return active maintenance windows\n      responses:\n        &quot;200&quot;:\n          description: &quot;Success&quot;\n          content:\n            application/json:\n              schema:\n                type: object\n                items:\n                  $ref: &quot;#/components/schemas/ResponseListMaintenanceWindowAVRDto&quot;\n        default:\n          description: unexpected error\n          content:\n            application/json:\n              schema:\n                $ref: &quot;#/components/schemas/ErrorDto&quot;\ncomponents:\n  schemas:\n    ErrorDto:\n      type: object\n      required:\n        - code\n        - message\n      properties:\n        code:\n          type: integer\n          format: int32\n        message:\n          type: string\n\n    MaintenanceWindowAVRDto:\n      type: object\n      required:\n        - id\n        - start\n        - end\n        - hosts\n      properties:\n        id:\n          type: string\n          format: uuid\n          description: id of maintenance window\n        start:\n          type: string\n          format: date-time\n          description: when the maintenance window is going to start\n        end:\n          type: string\n          format: date-time\n          description: when the maintenance is going to end\n        hosts:\n          type: array\n          items:\n            type: long\n            format: int64\n            description: list of host ids\n\n    ResponseListMaintenanceWindowAVRDto:\n      type: object\n      properties:\n        data:\n          type: array\n          items:\n            $ref: &quot;#/components/schemas/MaintenanceWindowAVRDto&quot;\n</code></pre>\n<p>Which generates me the files MaintenanceWindowsAvrApi and MaintenanceWindowAVRDto which look like the following:</p>\n<pre><code>package eu.nts.nmp.csm.mac.api.generated.endpoint.avl;\n\nimport eu.nts.nmp.csm.mac.api.generated.model.avl.ErrorDto;\nimport java.time.LocalDate;\nimport eu.nts.nmp.csm.mac.api.generated.model.avl.ResponseListMaintenanceWindowAVRDto;\n\nimport javax.ws.rs.*;\nimport javax.ws.rs.core.Response;\n\n\nimport java.io.InputStream;\nimport java.util.Map;\nimport java.util.List;\nimport javax.validation.constraints.*;\nimport javax.validation.Valid;\n\n@Path(&quot;/maintenance-windows-avr/{day}&quot;)\n@javax.annotation.Generated(value = &quot;org.openapitools.codegen.languages.JavaJAXRSSpecServerCodegen&quot;, date = &quot;2023-03-14T16:46:37.723499+01:00[Europe/Vienna]&quot;)public interface MaintenanceWindowsAvrApi {\n\n    @GET\n    @Produces({ &quot;application/json&quot; })\n    Response getMaintenanceWindows(@PathParam(&quot;day&quot;) LocalDate day);\n}\n</code></pre>\n<pre><code>package eu.nts.nmp.csm.mac.api.generated.model.avl;\n\nimport java.time.OffsetDateTime;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.UUID;\nimport javax.validation.constraints.*;\nimport javax.validation.Valid;\n\nimport java.util.Objects;\nimport com.fasterxml.jackson.annotation.JsonProperty;\nimport com.fasterxml.jackson.annotation.JsonCreator;\nimport com.fasterxml.jackson.annotation.JsonValue;\n\n\n\n@javax.annotation.Generated(value = &quot;org.openapitools.codegen.languages.JavaJAXRSSpecServerCodegen&quot;, date = &quot;2023-03-14T16:46:37.723499+01:00[Europe/Vienna]&quot;)public class MaintenanceWindowAVRDto   {\n  \n  private @Valid UUID id;\n  private @Valid OffsetDateTime start;\n  private @Valid OffsetDateTime end;\n  private @Valid List&lt;Long&gt; hosts = new ArrayList&lt;&gt;();\n\n  /**\n   * id of maintenance window\n   **/\n  public MaintenanceWindowAVRDto id(UUID id) {\n    this.id = id;\n    return this;\n  }\n\n  \n\n  \n  @JsonProperty(&quot;id&quot;)\n  @NotNull\n  public UUID getId() {\n    return id;\n  }\n\n  public void setId(UUID id) {\n    this.id = id;\n  }\n\n/**\n   * when the maintenance window is going to start\n   **/\n  public MaintenanceWindowAVRDto start(OffsetDateTime start) {\n    this.start = start;\n    return this;\n  }\n\n  \n\n  \n  @JsonProperty(&quot;start&quot;)\n  @NotNull\n  public OffsetDateTime getStart() {\n    return start;\n  }\n\n  public void setStart(OffsetDateTime start) {\n    this.start = start;\n  }\n\n/**\n   * when the maintenance is going to end\n   **/\n  public MaintenanceWindowAVRDto end(OffsetDateTime end) {\n    this.end = end;\n    return this;\n  }\n\n  \n\n  \n  @JsonProperty(&quot;end&quot;)\n  @NotNull\n  public OffsetDateTime getEnd() {\n    return end;\n  }\n\n  public void setEnd(OffsetDateTime end) {\n    this.end = end;\n  }\n\n/**\n   **/\n  public MaintenanceWindowAVRDto hosts(List&lt;Long&gt; hosts) {\n    this.hosts = hosts;\n    return this;\n  }\n\n  \n\n  \n  @JsonProperty(&quot;hosts&quot;)\n  @NotNull\n  public List&lt;Long&gt; getHosts() {\n    return hosts;\n  }\n\n  public void setHosts(List&lt;Long&gt; hosts) {\n    this.hosts = hosts;\n  }\n\n\n  @Override\n  public boolean equals(Object o) {\n    if (this == o) {\n      return true;\n    }\n    if (o == null || getClass() != o.getClass()) {\n      return false;\n    }\n    MaintenanceWindowAVRDto maintenanceWindowAVRDto = (MaintenanceWindowAVRDto) o;\n    return Objects.equals(this.id, maintenanceWindowAVRDto.id) &amp;&amp;\n        Objects.equals(this.start, maintenanceWindowAVRDto.start) &amp;&amp;\n        Objects.equals(this.end, maintenanceWindowAVRDto.end) &amp;&amp;\n        Objects.equals(this.hosts, maintenanceWindowAVRDto.hosts);\n  }\n\n  @Override\n  public int hashCode() {\n    return Objects.hash(id, start, end, hosts);\n  }\n\n  @Override\n  public String toString() {\n    StringBuilder sb = new StringBuilder();\n    sb.append(&quot;class MaintenanceWindowAVRDto {\\n&quot;);\n    \n    sb.append(&quot;    id: &quot;).append(toIndentedString(id)).append(&quot;\\n&quot;);\n    sb.append(&quot;    start: &quot;).append(toIndentedString(start)).append(&quot;\\n&quot;);\n    sb.append(&quot;    end: &quot;).append(toIndentedString(end)).append(&quot;\\n&quot;);\n    sb.append(&quot;    hosts: &quot;).append(toIndentedString(hosts)).append(&quot;\\n&quot;);\n    sb.append(&quot;}&quot;);\n    return sb.toString();\n  }\n\n  /**\n   * Convert the given object to string with each line indented by 4 spaces\n   * (except the first line).\n   */\n  private String toIndentedString(Object o) {\n    if (o == null) {\n      return &quot;null&quot;;\n    }\n    return o.toString().replace(&quot;\\n&quot;, &quot;\\n    &quot;);\n  }\n\n\n}\n\n</code></pre>\n<p>I want to map the LocalDate parameter in MaintenanceWindowsAvrApi file and the two OffsetDateTime fields start and end from the MaintenanceWindowAVRDto file to an Instant (java.time.Instant).</p>\n<p>I have tried so many options but nothing gives me the result I want.\nMy api pom file:</p>\n<pre><code>  &lt;inputSpec&gt;${project.basedir}/src/main/resources/META-INF/openapi-avr.yaml&lt;/inputSpec&gt;\n                            &lt;generatorName&gt;jaxrs-spec&lt;/generatorName&gt;\n                            \n                            &lt;configOptions&gt;\n                                &lt;useSwaggerAnnotations&gt;false&lt;/useSwaggerAnnotations&gt;\n                                &lt;interfaceOnly&gt;true&lt;/interfaceOnly&gt;\n                                &lt;generatePom&gt;false&lt;/generatePom&gt;\n                                &lt;returnResponse&gt;true&lt;/returnResponse&gt;\n                                &lt;dateLibrary&gt;java8&lt;/dateLibrary&gt;\n                                &lt;java8&gt;true&lt;/java8&gt;\n                                &lt;useFlags&gt;true&lt;/useFlags&gt;\n                                &lt;sourceFolder&gt;src/gen/java/main&lt;/sourceFolder&gt;\n                            &lt;/configOptions&gt;\n</code></pre>\n<p>How can I use the typeMappings to resolve my problem?</p>\n"},{"tags":["java","jbpm","bpmn"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1683756400,"post_id":76222413,"comment_id":134417376,"body_markdown":"one approach: user2 ends his task with an &quot;interrupting message event&quot;, which can serve user 1 as &quot;interrupting end event&quot; ..which leads to &quot;end event&quot;","body":"one approach: user2 ends his task with an &quot;interrupting message event&quot;, which can serve user 1 as &quot;interrupting end event&quot; ..which leads to &quot;end event&quot;"}],"owner":{"account_id":6924292,"reputation":880,"user_id":5315809,"accept_rate":64,"display_name":"Dhiraj"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683751311,"creation_date":1683751311,"question_id":76222413,"body_markdown":" \r\n I am using JBPM version **7.73.0.Final.**\r\n    I am trying to design one process where process will have following nodes\r\n    \r\n    1) Start node\r\n    2) Script task - Request\r\n    3) Two human task nodes i.e. **Accept** and **Modify** respectively.\r\n    4) End node\r\n    \r\n    \r\n    \r\nI want below process flow\r\n\r\n    \r\n   \r\n\r\n 1. Once process started using start node  by **USER1** then it will execute\r\n    script task where basically one request will get generated.\r\n\r\n       \r\n\r\n 1. After that It will generate two human tasks simultaneously.**Accept**\r\n    and **Modify** for that I am using parallel  gateway.\r\n      \r\n\r\n 2. Human task Accept will be assigned to USER2 and Modify will get\r\n    assigned to USER1.\r\n\r\n       \r\n\r\n 1. **USER2** can accept the request using Accept human task .\r\n\r\n      \r\n\r\n 1. **USER1** can modify the request using Modify human task only if USER2\r\n    yet not accepted the request.\r\n\r\n    \r\n  \r\n\r\n      In my case I am able to generate the process described above but when USER2 is accepting request\r\n        by using Accept human task the process is still having the state Active and It is waiting for second task i.e\r\n        Modify task to complete. \r\n        \r\n\r\nMy question is how we can bypass or is there any mechanism in JBPM that not to execute the \r\n            Modify human task and still complete the process with Completed status. Or any other way to achieve same use case described above.\r\n\r\n","title":"How to bypass Human task in JBPM to complete the process","body":"<p>I am using JBPM version <strong>7.73.0.Final.</strong>\nI am trying to design one process where process will have following nodes</p>\n<pre><code>1) Start node\n2) Script task - Request\n3) Two human task nodes i.e. **Accept** and **Modify** respectively.\n4) End node\n</code></pre>\n<p>I want below process flow</p>\n<ol>\n<li><p>Once process started using start node  by <strong>USER1</strong> then it will execute\nscript task where basically one request will get generated.</p>\n</li>\n<li><p>After that It will generate two human tasks simultaneously.<strong>Accept</strong>\nand <strong>Modify</strong> for that I am using parallel  gateway.</p>\n</li>\n<li><p>Human task Accept will be assigned to USER2 and Modify will get\nassigned to USER1.</p>\n</li>\n<li><p><strong>USER2</strong> can accept the request using Accept human task .</p>\n</li>\n<li><p><strong>USER1</strong> can modify the request using Modify human task only if USER2\nyet not accepted the request.</p>\n<p>In my case I am able to generate the process described above but when USER2 is accepting request\nby using Accept human task the process is still having the state Active and It is waiting for second task i.e\nModify task to complete.</p>\n</li>\n</ol>\n<p>My question is how we can bypass or is there any mechanism in JBPM that not to execute the\nModify human task and still complete the process with Completed status. Or any other way to achieve same use case described above.</p>\n"},{"tags":["java","android","jar","aar"],"answers":[{"comments":[{"owner":{"account_id":1819675,"reputation":2651,"user_id":1653995,"accept_rate":43,"display_name":"abh22ishek"},"score":0,"creation_date":1448864219,"post_id":23916544,"comment_id":55740722,"body_markdown":"@unify . Is there any way so we can prevent aar files- obfuscate the library?","body":"@unify . Is there any way so we can prevent aar files- obfuscate the library?"},{"owner":{"account_id":186022,"reputation":27604,"user_id":423105,"accept_rate":68,"display_name":"LarsH"},"score":1,"creation_date":1470087183,"post_id":23916544,"comment_id":64794486,"body_markdown":"I&#39;m confused by this answer. The first block quote says that &quot;aars and jars are packaged in with your app&quot;, not &quot;shared across applications&quot;; yet the second block quote implies that aars let you share classes and other resources between multiple apps?","body":"I&#39;m confused by this answer. The first block quote says that &quot;aars and jars are packaged in with your app&quot;, not &quot;shared across applications&quot;; yet the second block quote implies that aars let you share classes and other resources between multiple apps?"},{"owner":{"account_id":1083982,"reputation":482,"user_id":1080165,"display_name":"Habib"},"score":6,"creation_date":1471367906,"post_id":23916544,"comment_id":65314393,"body_markdown":"@LarH I think it means that you can share the code (aar files) between your applications, but it will be included in every package separately to let users install the applications independently. If 2 applications are installed and both use the same aar, the android runtime might be clever enough to load it only once.","body":"@LarH I think it means that you can share the code (aar files) between your applications, but it will be included in every package separately to let users install the applications independently. If 2 applications are installed and both use the same aar, the android runtime might be clever enough to load it only once."},{"owner":{"account_id":3164312,"reputation":157,"user_id":2674654,"display_name":"Mohammad moradyar"},"score":2,"creation_date":1486115695,"post_id":23916544,"comment_id":71216895,"body_markdown":"I have big problem with AAR files. I want make an AAR file and give it to some merchant to have payment solutions with our business. and i don&#39;t want they can reflect our class members and they can&#39;t have method call from their apps. I there any way to protect my code from reflection.","body":"I have big problem with AAR files. I want make an AAR file and give it to some merchant to have payment solutions with our business. and i don&#39;t want they can reflect our class members and they can&#39;t have method call from their apps. I there any way to protect my code from reflection."},{"owner":{"account_id":276924,"reputation":6181,"user_id":570612,"accept_rate":50,"display_name":"unify"},"score":7,"creation_date":1492107401,"post_id":23916544,"comment_id":73858937,"body_markdown":"@Mohammadmoradyar you can use Proguard on your library to obfuscate your classes but as with any Java-based bytecode, there&#39;s no way to stop people from decompiling your code.","body":"@Mohammadmoradyar you can use Proguard on your library to obfuscate your classes but as with any Java-based bytecode, there&#39;s no way to stop people from decompiling your code."}],"tags":[],"owner":{"account_id":276924,"reputation":6181,"user_id":570612,"accept_rate":50,"display_name":"unify"},"comment_count":5,"down_vote_count":0,"up_vote_count":248,"is_accepted":true,"score":248,"last_activity_date":1449029788,"creation_date":1401292829,"answer_id":23916544,"question_id":23915619,"body_markdown":"`AAR` files are more similar to `Jar`s than to `Dll`s for the following reason:\r\n\r\n&gt; `Dll`s can be shared across applications where as `AAR`s and jars are\r\n&gt; packaged in with your app.\r\n\r\n`AAR`s vs `Jar`s:\r\n\r\n&gt; The main difference between a `Jar` and a `AAR` is that `AAR`s include\r\n&gt; resources such as `layouts, drawables` etc. This makes it a lot easier\r\n&gt; to create self-contained visual components. For example if you have\r\n&gt; multiple apps that use the same login screen, with `Jar`s you could\r\n&gt; share classes but not the layout, styles, etc., you still had to\r\n&gt; duplicate them. With `AAR`s everything is bundled in one neat package.\r\n\r\nIn conclusion, `AAR`s are a big step in the right direction.\r\n\r\n**Note:**&lt;br/&gt; Similar attempts were made with `apk-lib`s but they are now obsolete as `AAR`s are much better.","title":"Android Archive Library (aar) vs standard jar","body":"<p><code>AAR</code> files are more similar to <code>Jar</code>s than to <code>Dll</code>s for the following reason:</p>\n\n<blockquote>\n  <p><code>Dll</code>s can be shared across applications where as <code>AAR</code>s and jars are\n  packaged in with your app.</p>\n</blockquote>\n\n<p><code>AAR</code>s vs <code>Jar</code>s:</p>\n\n<blockquote>\n  <p>The main difference between a <code>Jar</code> and a <code>AAR</code> is that <code>AAR</code>s include\n  resources such as <code>layouts, drawables</code> etc. This makes it a lot easier\n  to create self-contained visual components. For example if you have\n  multiple apps that use the same login screen, with <code>Jar</code>s you could\n  share classes but not the layout, styles, etc., you still had to\n  duplicate them. With <code>AAR</code>s everything is bundled in one neat package.</p>\n</blockquote>\n\n<p>In conclusion, <code>AAR</code>s are a big step in the right direction.</p>\n\n<p><strong>Note:</strong><br/> Similar attempts were made with <code>apk-lib</code>s but they are now obsolete as <code>AAR</code>s are much better.</p>\n"},{"comments":[{"owner":{"account_id":1235468,"reputation":31121,"user_id":1199132,"accept_rate":83,"display_name":"Aritz"},"score":0,"creation_date":1493966363,"post_id":42319814,"comment_id":74636288,"body_markdown":"I would say then that the difference is that the JAR is meant to be a way to share any kind of resource in the java ecosystem, while the AAR is Android focused and [forces you to a concrete layout](https://developer.android.com/studio/projects/android-library.html#aar-contents).","body":"I would say then that the difference is that the JAR is meant to be a way to share any kind of resource in the java ecosystem, while the AAR is Android focused and <a href=\"https://developer.android.com/studio/projects/android-library.html#aar-contents\" rel=\"nofollow noreferrer\">forces you to a concrete layout</a>."},{"owner":{"account_id":2799086,"reputation":1898,"user_id":2407681,"accept_rate":85,"display_name":"lfree"},"score":0,"creation_date":1531357296,"post_id":42319814,"comment_id":89569431,"body_markdown":"I think author of the chosen answer (@unify) should make some clarification about this.","body":"I think author of the chosen answer (@unify) should make some clarification about this."},{"owner":{"account_id":73357,"reputation":17051,"user_id":211292,"accept_rate":67,"display_name":"ThomasW"},"score":2,"creation_date":1538621224,"post_id":42319814,"comment_id":92209315,"body_markdown":"I don&#39;t know about the greater Java world, but in the Android world jar files couldn&#39;t include resources. That is, even if resources were in the .jar archive, they wouldn&#39;t be brought over to the project that includes them: https://stackoverflow.com/q/2474904/211292","body":"I don&#39;t know about the greater Java world, but in the Android world jar files couldn&#39;t include resources. That is, even if resources were in the .jar archive, they wouldn&#39;t be brought over to the project that includes them: <a href=\"https://stackoverflow.com/q/2474904/211292\">stackoverflow.com/q/2474904/211292</a>"}],"tags":[],"owner":{"account_id":10281130,"reputation":169,"user_id":7586240,"display_name":"ggghhhjjj"},"comment_count":3,"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1491256425,"creation_date":1487446699,"answer_id":42319814,"question_id":23915619,"body_markdown":"The statement &quot;*The main difference between a Jar and a AAR is that AARs include resources such as layouts, drawables etc.*&quot; does not correspond to the JAR file specification and therefore is not a truth.\r\nAccording the [JAR file specification](http://docs.oracle.com/javase/6/docs/technotes/guides/jar/jar.html): \r\n\r\n&gt; JAR file is a file format based on the popular ZIP file format and is used for aggregating many files into one. A  JAR file is essentially a zip file that contains an optional META-INF directory.\r\n\r\nAs you can see, there is no content limitation which forbids including resources such as layouts, drawables etc. in a JAR file. For more detail see article 5.3 &quot;Creation and Loading&quot; of The Java&#174; Virtual Machine Specification.\r\n\r\nSo on the question Android Archive Library (aar) vs standard jar. The answer depends on what build tool are you using.\r\n\r\nIf you are using Android Studio as a build tool (respectively as a project organizer) you&#39;d definitely better use *.aar files to share encapsulated  resources between Android projects. AAR file format is a part of Android Studio build and as it&#39;s commented in the other comments here its user interface supports aar format for Android Libraries.\r\n\r\nBut except Android Studio the rest of the world does not know what is that thing aar file (artifact). For example, if your Android build is based on Maven the preferred file for resources sharing will be jar because that is the native Maven java project artifact and there is no limitation what to put in the standard jar file. In addition, there is a way to explain Maven any file format, include aar by using lifecycle enhancement with a new component. A simple example is available here https://stackoverflow.com/questions/1427722/how-do-i-create-a-new-packaging-type-for-maven\r\n\r\n","title":"Android Archive Library (aar) vs standard jar","body":"<p>The statement \"<em>The main difference between a Jar and a AAR is that AARs include resources such as layouts, drawables etc.</em>\" does not correspond to the JAR file specification and therefore is not a truth.\nAccording the <a href=\"http://docs.oracle.com/javase/6/docs/technotes/guides/jar/jar.html\" rel=\"noreferrer\">JAR file specification</a>: </p>\n\n<blockquote>\n  <p>JAR file is a file format based on the popular ZIP file format and is used for aggregating many files into one. A  JAR file is essentially a zip file that contains an optional META-INF directory.</p>\n</blockquote>\n\n<p>As you can see, there is no content limitation which forbids including resources such as layouts, drawables etc. in a JAR file. For more detail see article 5.3 \"Creation and Loading\" of The JavaÂ® Virtual Machine Specification.</p>\n\n<p>So on the question Android Archive Library (aar) vs standard jar. The answer depends on what build tool are you using.</p>\n\n<p>If you are using Android Studio as a build tool (respectively as a project organizer) you'd definitely better use *.aar files to share encapsulated  resources between Android projects. AAR file format is a part of Android Studio build and as it's commented in the other comments here its user interface supports aar format for Android Libraries.</p>\n\n<p>But except Android Studio the rest of the world does not know what is that thing aar file (artifact). For example, if your Android build is based on Maven the preferred file for resources sharing will be jar because that is the native Maven java project artifact and there is no limitation what to put in the standard jar file. In addition, there is a way to explain Maven any file format, include aar by using lifecycle enhancement with a new component. A simple example is available here <a href=\"https://stackoverflow.com/questions/1427722/how-do-i-create-a-new-packaging-type-for-maven\">How do I create a new packaging type for Maven?</a></p>\n"},{"tags":[],"owner":{"account_id":167824,"reputation":21098,"user_id":1439305,"accept_rate":81,"display_name":"Audrius MeÅ¡kauskas"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1498381983,"creation_date":1498381983,"answer_id":44744894,"question_id":23915619,"body_markdown":"The citation in the question has nothing common with the current reality. Of course it is possible to use external libraries in Android and there are lots libraries available. Maybe they wanted to say that each application must bundle all libraries it needs, but reusing the library at the build time (static linking) is really not a problem.\r\n\r\n`.aar` differs from `.jar` no more than `.jar` differs from `.zip`. It has certain concepts on which kind of content should be expected there, but both `.jar` and `.aar` most often contain compiled classes and they resources. `.aar` just specifies that the library is Android specific and has some expected structure, reasonable for such libraries (well, `.jar` also has some expected structure).\r\n\r\nThe view that .aar is only supported by Android studio is also deprecated. Such libraries can be deployed to Maven Central, and tools like gradle can reference them using @aar suffix, for instance:\r\n\r\n    dependencies {\r\n        compile (&#39;io.github.andviane:uncover:2.0.1@aar&#39;)\r\n        ..\r\n    }  \r\n\r\nto reference [this][1] Maven central deployment.\r\n\r\n\r\n  [1]: https://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22io.github.andviane%22%20AND%20a%3A%22uncover%22","title":"Android Archive Library (aar) vs standard jar","body":"<p>The citation in the question has nothing common with the current reality. Of course it is possible to use external libraries in Android and there are lots libraries available. Maybe they wanted to say that each application must bundle all libraries it needs, but reusing the library at the build time (static linking) is really not a problem.</p>\n\n<p><code>.aar</code> differs from <code>.jar</code> no more than <code>.jar</code> differs from <code>.zip</code>. It has certain concepts on which kind of content should be expected there, but both <code>.jar</code> and <code>.aar</code> most often contain compiled classes and they resources. <code>.aar</code> just specifies that the library is Android specific and has some expected structure, reasonable for such libraries (well, <code>.jar</code> also has some expected structure).</p>\n\n<p>The view that .aar is only supported by Android studio is also deprecated. Such libraries can be deployed to Maven Central, and tools like gradle can reference them using @aar suffix, for instance:</p>\n\n<pre><code>dependencies {\n    compile ('io.github.andviane:uncover:2.0.1@aar')\n    ..\n}  \n</code></pre>\n\n<p>to reference <a href=\"https://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22io.github.andviane%22%20AND%20a%3A%22uncover%22\" rel=\"noreferrer\">this</a> Maven central deployment.</p>\n"},{"tags":[],"owner":{"account_id":15078594,"reputation":1,"user_id":10881879,"display_name":"Jerald"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1600800571,"creation_date":1600800571,"answer_id":64015982,"question_id":23915619,"body_markdown":"The main difference is aar is splitted inside android to jar.\r\n\r\nIf your app will be used only in user app only in android studio then aar is preferred. \r\n\r\nIf you are planning for app to communicate with c/c++ compiled lib.so file jar  is preferred. \r\n\r\n\r\nUsing jar and aar based on requirements aar working easy,\r\njar more flexibility. \r\n\r\nThis is as my knowledge upto android 5 lollipop. New version i am not aware. \r\n","title":"Android Archive Library (aar) vs standard jar","body":"<p>The main difference is aar is splitted inside android to jar.</p>\n<p>If your app will be used only in user app only in android studio then aar is preferred.</p>\n<p>If you are planning for app to communicate with c/c++ compiled lib.so file jar  is preferred.</p>\n<p>Using jar and aar based on requirements aar working easy,\njar more flexibility.</p>\n<p>This is as my knowledge upto android 5 lollipop. New version i am not aware.</p>\n"},{"tags":[],"owner":{"account_id":6115775,"reputation":30435,"user_id":4770877,"display_name":"yoAlex5"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1683750949,"creation_date":1611052126,"answer_id":65789668,"question_id":23915619,"body_markdown":"**JAR vs AAR**\r\n\r\n`JAR` â€“ Java Archive. Contains `.class`, java resources\r\n\r\n`AAR` â€“ Android Archive. Contains `classes.jar`, and other Android related files like AndroidManifest.xml, R.txt, proguard.txt, res folder(layout, values, drawable) and others.\r\n\r\nAndroid works with both files `jar` and `aar`. As a library developer usually `aar` is used for sharing Android resources, otherwise - `jar` like more lightweight and common way of distributing an artefact. \r\n\r\nSince `aar` contains `jar` you can use it[&lt;sup&gt;\\[About\\]&lt;/sup&gt;][2]\r\n\r\nDifference:\r\n - [\\[transitive dependence\\]][3]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/61140381/4770877\r\n  [2]: https://stackoverflow.com/a/56837353/4770877\r\n  [3]: https://stackoverflow.com/a/61186642/4770877","title":"Android Archive Library (aar) vs standard jar","body":"<p><strong>JAR vs AAR</strong></p>\n<p><code>JAR</code> â€“ Java Archive. Contains <code>.class</code>, java resources</p>\n<p><code>AAR</code> â€“ Android Archive. Contains <code>classes.jar</code>, and other Android related files like AndroidManifest.xml, R.txt, proguard.txt, res folder(layout, values, drawable) and others.</p>\n<p>Android works with both files <code>jar</code> and <code>aar</code>. As a library developer usually <code>aar</code> is used for sharing Android resources, otherwise - <code>jar</code> like more lightweight and common way of distributing an artefact.</p>\n<p>Since <code>aar</code> contains <code>jar</code> you can use it<a href=\"https://stackoverflow.com/a/56837353/4770877\"><sup>[About]</sup></a></p>\n<p>Difference:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/61186642/4770877\">[transitive dependence]</a></li>\n</ul>\n"}],"owner":{"account_id":1235468,"reputation":31121,"user_id":1199132,"accept_rate":83,"display_name":"Aritz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79355,"favorite_count":0,"down_vote_count":1,"up_vote_count":155,"accepted_answer_id":23916544,"answer_count":5,"score":154,"last_activity_date":1683750949,"creation_date":1401290320,"question_id":23915619,"body_markdown":"I&#39;ve been reading some articles about the new adoption of Gradle as the standard build system for Android apps. Well, coming from standard Java development I usually depend on *jar* files in order to build my project. However it seems that Android has also *aar* packages, which are the equivalent to the *dll* files in a Windows OS, as mentioned [here][1]:\r\n\r\n&gt;First, you have to realize that the Android platform does not allow application-level â€œshared librariesâ€. In the â€œtraditionalâ€ programming language platforms, C, C++, Java, you name it, we have this mechanism of sharing runtime libraries. (E.g., DLL on Windows, DSO on Unix, Jar on JVM, etc.). On Android, however, you cannot do that, unless you are Google or a handset manufacturer (See Footnote 1 below). As an application developer, this can be a fundamental limitation. â€œSharingâ€ or â€œreusingâ€ codes, both at build time and run time, is a very important part of software engineering practice. This is rather hard (not impossible, just harder) on Android because of the aforementioned limitation.\r\n\r\nHowever, I have some doubts around this concept. I mean, when should a developer be interested including *aar* dependencies in its application? Are this dependencies tightened to some SDK minimum version?\r\n\r\nFor example, in one project I access a COM port, which I use [NDK precompiled][2] *.so* libraries for. Do I have to create an aar if I want to share this utility?\r\n\r\n\r\n  [1]: http://blog.glassdiary.com/post/67134169807/how-to-share-android-archive-library-aar-across\r\n  [2]: https://developer.android.com/tools/sdk/ndk/index.html","title":"Android Archive Library (aar) vs standard jar","body":"<p>I've been reading some articles about the new adoption of Gradle as the standard build system for Android apps. Well, coming from standard Java development I usually depend on <em>jar</em> files in order to build my project. However it seems that Android has also <em>aar</em> packages, which are the equivalent to the <em>dll</em> files in a Windows OS, as mentioned <a href=\"http://blog.glassdiary.com/post/67134169807/how-to-share-android-archive-library-aar-across\" rel=\"noreferrer\">here</a>:</p>\n\n<blockquote>\n  <p>First, you have to realize that the Android platform does not allow application-level â€œshared librariesâ€. In the â€œtraditionalâ€ programming language platforms, C, C++, Java, you name it, we have this mechanism of sharing runtime libraries. (E.g., DLL on Windows, DSO on Unix, Jar on JVM, etc.). On Android, however, you cannot do that, unless you are Google or a handset manufacturer (See Footnote 1 below). As an application developer, this can be a fundamental limitation. â€œSharingâ€ or â€œreusingâ€ codes, both at build time and run time, is a very important part of software engineering practice. This is rather hard (not impossible, just harder) on Android because of the aforementioned limitation.</p>\n</blockquote>\n\n<p>However, I have some doubts around this concept. I mean, when should a developer be interested including <em>aar</em> dependencies in its application? Are this dependencies tightened to some SDK minimum version?</p>\n\n<p>For example, in one project I access a COM port, which I use <a href=\"https://developer.android.com/tools/sdk/ndk/index.html\" rel=\"noreferrer\">NDK precompiled</a> <em>.so</em> libraries for. Do I have to create an aar if I want to share this utility?</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","jsp"],"comments":[{"owner":{"account_id":1459673,"reputation":1958,"user_id":1374322,"accept_rate":88,"display_name":"JockX"},"score":0,"creation_date":1650921816,"post_id":72005793,"comment_id":127233777,"body_markdown":"A sidenote: remove from your pom.xml all specific versions of `spring-boot-*` dependencies and maven plugins, and only keep the parent pom version at the latest available (`2.6.7` as of today). You are in for a dependency hell with pom.xml like the one right now.","body":"A sidenote: remove from your pom.xml all specific versions of <code>spring-boot-*</code> dependencies and maven plugins, and only keep the parent pom version at the latest available (<code>2.6.7</code> as of today). You are in for a dependency hell with pom.xml like the one right now."},{"owner":{"account_id":6937186,"reputation":1164,"user_id":5324721,"display_name":"Kumar Ashutosh"},"score":0,"creation_date":1650921821,"post_id":72005793,"comment_id":127233781,"body_markdown":"could you post your folder structure and check if you have exported resource or static content in pom?","body":"could you post your folder structure and check if you have exported resource or static content in pom?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1650952708,"post_id":72005793,"comment_id":127238908,"body_markdown":"Tomcat 10 isn&#39;t supported. Also JSP only work with WAR files not with JAR files. You are also mixing Spring Boot 2.6.4 and 2.6.7 (don&#39;t mix modules from different versions of a framework, that is trouble waiting to happen).","body":"Tomcat 10 isn&#39;t supported. Also JSP only work with WAR files not with JAR files. You are also mixing Spring Boot 2.6.4 and 2.6.7 (don&#39;t mix modules from different versions of a framework, that is trouble waiting to happen)."},{"owner":{"account_id":7822670,"reputation":1609,"user_id":5915318,"display_name":"David Kariuki"},"score":0,"creation_date":1650973422,"post_id":72005793,"comment_id":127245900,"body_markdown":"Are you using thymeleaf? Also do you have the required templates like in your case `home`","body":"Are you using thymeleaf? Also do you have the required templates like in your case <code>home</code>"},{"owner":{"account_id":20367288,"reputation":13,"user_id":14940317,"display_name":"Ali Bazargani"},"score":0,"creation_date":1651085464,"post_id":72005793,"comment_id":127281137,"body_markdown":"@DavidKariuki yes, i added it and templates, but it did not work","body":"@DavidKariuki yes, i added it and templates, but it did not work"},{"owner":{"account_id":7822670,"reputation":1609,"user_id":5915318,"display_name":"David Kariuki"},"score":0,"creation_date":1651088555,"post_id":72005793,"comment_id":127282244,"body_markdown":"Can you share a screenshot of your file structure","body":"Can you share a screenshot of your file structure"},{"owner":{"account_id":7822670,"reputation":1609,"user_id":5915318,"display_name":"David Kariuki"},"score":0,"creation_date":1651088573,"post_id":72005793,"comment_id":127282253,"body_markdown":"What templates did you add, did you create those html files?","body":"What templates did you add, did you create those html files?"},{"owner":{"account_id":20367288,"reputation":13,"user_id":14940317,"display_name":"Ali Bazargani"},"score":0,"creation_date":1651956594,"post_id":72005793,"comment_id":127490737,"body_markdown":"@DavidKariuki  hi, I attached the screenshots of the project folders\nI found the problem: When I opened the project, I opened the folder that contained the project, which was one roll higher than the main project folder. Thanks for your tips.","body":"@DavidKariuki  hi, I attached the screenshots of the project folders I found the problem: When I opened the project, I opened the folder that contained the project, which was one roll higher than the main project folder. Thanks for your tips."},{"owner":{"account_id":7822670,"reputation":1609,"user_id":5915318,"display_name":"David Kariuki"},"score":0,"creation_date":1651957433,"post_id":72005793,"comment_id":127490881,"body_markdown":"I am glad I was of help, you are welcome.","body":"I am glad I was of help, you are welcome."}],"answers":[{"tags":[],"owner":{"account_id":7822670,"reputation":1609,"user_id":5915318,"display_name":"David Kariuki"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1650974408,"creation_date":1650973642,"answer_id":72013394,"question_id":72005793,"body_markdown":"Seems you are missing the template named `home`. You need to create this template and store it under `\\src\\main\\resources\\templates`\r\nThe template is a html file to which you are returning your response from spring to. It should be something like this:\r\n\r\n\r\n    project-directory\r\n    -&gt;src\r\n        -&gt;main\r\n            -&gt;java-&gt;com-&gt;...etc\r\n            -&gt;resources\r\n                -&gt;static\r\n                -&gt;templates\r\n                    home.html\r\n                    other_file.html\r\n                application.properties\r\n          \r\n        -&gt;test\r\n\r\nAlso stop using specific versions. Use this:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAlso rollback to TomCat 9 as 10 is not supported.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n        &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\r\n        &lt;version&gt;9.0.19&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n&lt;br&gt;\r\n\r\nYou can get these dependencies from [The MVN Repository][1]\r\n\r\n\r\n  [1]: https://mvnrepository.com/","title":"I&#39;m trying to add a jsp page in my Spring Boot Aplication. My problem is that every time I try to go to that page I have this:","body":"<p>Seems you are missing the template named <code>home</code>. You need to create this template and store it under <code>\\src\\main\\resources\\templates</code>\nThe template is a html file to which you are returning your response from spring to. It should be something like this:</p>\n<pre><code>project-directory\n-&gt;src\n    -&gt;main\n        -&gt;java-&gt;com-&gt;...etc\n        -&gt;resources\n            -&gt;static\n            -&gt;templates\n                home.html\n                other_file.html\n            application.properties\n      \n    -&gt;test\n</code></pre>\n<p>Also stop using specific versions. Use this:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Also rollback to TomCat 9 as 10 is not supported.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n    &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\n    &lt;version&gt;9.0.19&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<br>\n<p>You can get these dependencies from <a href=\"https://mvnrepository.com/\" rel=\"nofollow noreferrer\">The MVN Repository</a></p>\n"},{"comments":[{"owner":{"account_id":20367288,"reputation":13,"user_id":14940317,"display_name":"Ali Bazargani"},"score":0,"creation_date":1651070468,"post_id":72028583,"comment_id":127275588,"body_markdown":"I changed it but it didn&#39;t work","body":"I changed it but it didn&#39;t work"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1651108713,"post_id":72028583,"comment_id":127286522,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/72028583/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."},{"owner":{"account_id":24018229,"reputation":313,"user_id":18000902,"display_name":"Omar Hussien"},"score":0,"creation_date":1651134206,"post_id":72028583,"comment_id":127292230,"body_markdown":"This problem has been discussed here as well, and one of the solutions may work for you : https://stackoverflow.com/questions/56334984/jsp-page-not-rendering-in-springboot-application","body":"This problem has been discussed here as well, and one of the solutions may work for you : <a href=\"https://stackoverflow.com/questions/56334984/jsp-page-not-rendering-in-springboot-application\" title=\"jsp page not rendering in springboot application\">stackoverflow.com/questions/56334984/&hellip;</a>"}],"tags":[],"owner":{"account_id":24018229,"reputation":313,"user_id":18000902,"display_name":"Omar Hussien"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651061952,"creation_date":1651061952,"answer_id":72028583,"question_id":72005793,"body_markdown":"Change the following:\r\n\r\n    spring.view.prefix: /WEB-INF/jsp/\r\n    spring.view.suffix: .jsp\r\n\r\nto:\r\n\r\n    spring.mvc.view.prefix: /WEB-INF/jsp/\r\n    spring.mvc.view.suffix: .jsp","title":"I&#39;m trying to add a jsp page in my Spring Boot Aplication. My problem is that every time I try to go to that page I have this:","body":"<p>Change the following:</p>\n<pre><code>spring.view.prefix: /WEB-INF/jsp/\nspring.view.suffix: .jsp\n</code></pre>\n<p>to:</p>\n<pre><code>spring.mvc.view.prefix: /WEB-INF/jsp/\nspring.mvc.view.suffix: .jsp\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20367288,"reputation":13,"user_id":14940317,"display_name":"Ali Bazargani"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651957447,"creation_date":1651957447,"answer_id":72156363,"question_id":72005793,"body_markdown":"When I opened the project, I opened the folder that contained the project, which was one roll higher than the main project folder.","title":"I&#39;m trying to add a jsp page in my Spring Boot Aplication. My problem is that every time I try to go to that page I have this:","body":"<p>When I opened the project, I opened the folder that contained the project, which was one roll higher than the main project folder.</p>\n"}],"owner":{"account_id":20367288,"reputation":13,"user_id":14940317,"display_name":"Ali Bazargani"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":539,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72013394,"answer_count":3,"score":1,"last_activity_date":1683750595,"creation_date":1650921071,"question_id":72005793,"body_markdown":"&gt; Whitelabel Error Page\r\n&gt;\r\n&gt; This application has no explicit mapping for /error, so you are seeing this as a fallback.\r\n&gt;\r\n&gt; Tue Apr 26 16:10:15 IRDT 2022  \r\n&gt; There was an unexpected error (type=Not Found, status=404).  \r\n &gt;JSP file [/WEB-INF/jsp/home.jsp] not found\r\n\r\nI have added the prefix and suffix into my application.properties:\r\n\r\n    spring.view.prefix: /WEB-INF/jsp/\r\n    spring.view.suffix: .jsp\r\n\r\nThis is my controller class:\r\n\r\n    @Controller\r\n    @RequestMapping(&quot;/&quot;)\r\n    public class HomeController {\r\n    @GetMapping(&quot;/&quot;)\r\n    public String index(){\r\n        return &quot;home&quot;;\r\n    }\r\n    }\r\n\r\nand i have 1 warning in controller class :\r\n\r\n    Cannot resolve MVC view &#39;home&#39;\r\n[my project folders picture][1]\r\n\r\nMy Application class:\r\n\r\n    @SpringBootApplication\r\n    public class OnlineShopApplication {\r\n\tpublic static void main(String[] args) {\r\n\tSpringApplication.run(OnlineShopApplication.class, args);\r\n\t}}\r\n\r\n\r\nAnd the home.jsp:\r\n\r\n    &lt;h1&gt; hello world from jsp&lt;/h1&gt;\r\n\r\npom.xml:\r\n\r\n       &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.5.13&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;largesize.shop.app&lt;/groupId&gt;\r\n    &lt;artifactId&gt;OnlineShop&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;OnlineShop&lt;/name&gt;\r\n    &lt;description&gt;Online shopping web application&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;11&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n            &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LMZlK.jpg","title":"I&#39;m trying to add a jsp page in my Spring Boot Aplication. My problem is that every time I try to go to that page I have this:","body":"<blockquote>\n<p>Whitelabel Error Page</p>\n<p>This application has no explicit mapping for /error, so you are seeing this as a fallback.</p>\n<p>Tue Apr 26 16:10:15 IRDT 2022<br />\nThere was an unexpected error (type=Not Found, status=404).<br />\nJSP file [/WEB-INF/jsp/home.jsp] not found</p>\n</blockquote>\n<p>I have added the prefix and suffix into my application.properties:</p>\n<pre><code>spring.view.prefix: /WEB-INF/jsp/\nspring.view.suffix: .jsp\n</code></pre>\n<p>This is my controller class:</p>\n<pre><code>@Controller\n@RequestMapping(&quot;/&quot;)\npublic class HomeController {\n@GetMapping(&quot;/&quot;)\npublic String index(){\n    return &quot;home&quot;;\n}\n}\n</code></pre>\n<p>and i have 1 warning in controller class :</p>\n<pre><code>Cannot resolve MVC view 'home'\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/LMZlK.jpg\" rel=\"nofollow noreferrer\">my project folders picture</a></p>\n<p>My Application class:</p>\n<pre><code>@SpringBootApplication\npublic class OnlineShopApplication {\npublic static void main(String[] args) {\nSpringApplication.run(OnlineShopApplication.class, args);\n}}\n</code></pre>\n<p>And the home.jsp:</p>\n<pre><code>&lt;h1&gt; hello world from jsp&lt;/h1&gt;\n</code></pre>\n<p>pom.xml:</p>\n<pre><code>   &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n     xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.5.13&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n&lt;groupId&gt;largesize.shop.app&lt;/groupId&gt;\n&lt;artifactId&gt;OnlineShop&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;name&gt;OnlineShop&lt;/name&gt;\n&lt;description&gt;Online shopping web application&lt;/description&gt;\n&lt;properties&gt;\n    &lt;java.version&gt;11&lt;/java.version&gt;\n&lt;/properties&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n        &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","exception","groovy"],"comments":[{"owner":{"account_id":4358,"reputation":168420,"user_id":6509,"display_name":"tim_yates"},"score":0,"creation_date":1683751671,"post_id":76222257,"comment_id":134416701,"body_markdown":"You sure it&#39;s running groovy 2 in the docker environment?","body":"You sure it&#39;s running groovy 2 in the docker environment?"},{"owner":{"account_id":8728958,"reputation":873,"user_id":6529706,"accept_rate":27,"display_name":"Zizou"},"score":0,"creation_date":1683792164,"post_id":76222257,"comment_id":134421558,"body_markdown":"yes,GroovySystem.version shows we are using the correct version","body":"yes,GroovySystem.version shows we are using the correct version"}],"owner":{"account_id":8728958,"reputation":873,"user_id":6529706,"accept_rate":27,"display_name":"Zizou"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683749795,"creation_date":1683749795,"question_id":76222257,"body_markdown":"We are having a code which is working fine until upgrading groovy from 2.5.7 to 2.5.18.\r\nWe started getting a strange runtime issue:\r\n\r\n    java.lang.VerifyError (class: utils/MyGroovyClass, method: myMethod signature: (Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;) Illegal target of jump or branch\r\n\r\nmyMethod is static method inside my class which is calling another static method named init.\r\nIt looks like this:\r\n\r\n    static ubixConnectionSetting(String a, b, c, d, e, f, g, h, y) {\r\n            this.a = a\r\n            this.b = b\r\n            ...\r\n            init()\r\n        }\r\n\r\nAfter trying lot of things, we ended by getting the issue fixed after changing the call to the method init by prefixing the class name (MyGroovyClass.init() instead of init()).\r\nI&#39;m not able to find an explanation to this (change is &quot;stupide&quot;) nor why this started happeneing only now.\r\nKnowing that we have in our case plenty of similar code which is also complaining about the same issue, is there any solution to understand and get this fixed properly without the &quot;workaround&quot; we have applied by prefixing call to a static methods within the same class by the class name.\r\n\r\nAn important information, this issue is not happening when running the code in development environment only when running it in a dockerized image.\r\nThanks\r\n","title":"Issue calling static methods in groovy","body":"<p>We are having a code which is working fine until upgrading groovy from 2.5.7 to 2.5.18.\nWe started getting a strange runtime issue:</p>\n<pre><code>java.lang.VerifyError (class: utils/MyGroovyClass, method: myMethod signature: (Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;) Illegal target of jump or branch\n</code></pre>\n<p>myMethod is static method inside my class which is calling another static method named init.\nIt looks like this:</p>\n<pre><code>static ubixConnectionSetting(String a, b, c, d, e, f, g, h, y) {\n        this.a = a\n        this.b = b\n        ...\n        init()\n    }\n</code></pre>\n<p>After trying lot of things, we ended by getting the issue fixed after changing the call to the method init by prefixing the class name (MyGroovyClass.init() instead of init()).\nI'm not able to find an explanation to this (change is &quot;stupide&quot;) nor why this started happeneing only now.\nKnowing that we have in our case plenty of similar code which is also complaining about the same issue, is there any solution to understand and get this fixed properly without the &quot;workaround&quot; we have applied by prefixing call to a static methods within the same class by the class name.</p>\n<p>An important information, this issue is not happening when running the code in development environment only when running it in a dockerized image.\nThanks</p>\n"},{"tags":["java","postgresql","hibernate","jpa","jpa-2.2"],"comments":[{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1683752623,"post_id":76222237,"comment_id":134416858,"body_markdown":"is `hibernate_sequences` table present in your schema?","body":"is <code>hibernate_sequences</code> table present in your schema?"},{"owner":{"account_id":10189955,"reputation":451,"user_id":7523723,"display_name":"Tal Levi"},"score":0,"creation_date":1683784708,"post_id":76222237,"comment_id":134420193,"body_markdown":"yes, in both version of hibernate the table hibernate_sequences is displayed and has the same values before and after the upgrade. why did you ask?","body":"yes, in both version of hibernate the table hibernate_sequences is displayed and has the same values before and after the upgrade. why did you ask?"},{"owner":{"account_id":10189955,"reputation":451,"user_id":7523723,"display_name":"Tal Levi"},"score":0,"creation_date":1683787650,"post_id":76222237,"comment_id":134420699,"body_markdown":"how do I make my code to work with hibernate_sequences table?","body":"how do I make my code to work with hibernate_sequences table?"},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1683789404,"post_id":76222237,"comment_id":134421007,"body_markdown":"I may be wrong, however, it seems hbn perviously was using `hibernate_sequences` table for storing sequences and now it does not, try to either remove `name = &quot;itpGenerator&quot;` from `@TableGenerator` or copy `hibernate_sequences` table to `itpGenerator`","body":"I may be wrong, however, it seems hbn perviously was using <code>hibernate_sequences</code> table for storing sequences and now it does not, try to either remove <code>name = &quot;itpGenerator&quot;</code> from <code>@TableGenerator</code> or copy <code>hibernate_sequences</code> table to <code>itpGenerator</code>"},{"owner":{"account_id":10189955,"reputation":451,"user_id":7523723,"display_name":"Tal Levi"},"score":0,"creation_date":1683799623,"post_id":76222237,"comment_id":134423265,"body_markdown":"not a bad idea, Thanks!","body":"not a bad idea, Thanks!"}],"owner":{"account_id":10189955,"reputation":451,"user_id":7523723,"display_name":"Tal Levi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683749556,"creation_date":1683749556,"question_id":76222237,"body_markdown":"I have a java project where I use hibernate (5.0.3.Final) in order to perform actions on my postgres database.\r\n\r\nI have this base entry that all my other entries are extended to\r\n\r\n    @MappedSuperclass\r\n    public abstract class BaseEntry {\r\n        private Long id;\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.TABLE, generator = &quot;itpGenerator&quot;)\r\n        @TableGenerator(name = &quot;itpGenerator&quot;,\r\n                // the first 999 entries are saved for items that come with the system\r\n                initialValue = 1000,\r\n                allocationSize = 100\r\n        )\r\n        @Column(name=&quot;ID&quot;, insertable = false, updatable = false)\r\n        public Long getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(Long id) {\r\n            this.id = id;\r\n        }\r\n    }\r\n\r\nexample for such entry that extended to the base:\r\n\r\n    @Entity\r\n    @Table(name = &quot;AD_ENDPOINTS&quot;)\r\n    public class ActiveDirectoryEndpointEntry extends BaseEntry {\r\n        private String name;\r\n    \r\n        @Column(name = &quot;FRIENDLY_NAME&quot;)\r\n        public String getName() {\r\n            return name;\r\n        }\r\n    }\r\n\r\nand I use the @TableGenerator annotation (javax.persistence.TableGenerator version 2.2) in order to  generate ids for my rows staring at 1000 and increasing by one each time.\r\n\r\nEverything worked fine, any new row of ActiveDirectoryEndpointEntry got its id, starting from 1001 and up (1002,1003) but somehow it seems like the table itpGenerator was never created.\r\nI connected to the database, looking for it and it was never there (select * from itpGenerator) and I never created it manually but again everything worked as it should.\r\n\r\nthen I upgraded my hibernate to 5.4.24.Final and somehow the table was created and displayed in my database. I couldn&#39;t find any doc that explains this behavior.\r\n\r\nIn addition, The column @Id was reseted back to the starting number, meaning that if I tried to enter a new entry for ActiveDirectoryEndpointEntry, I got an error:\r\n\r\n ERROR: duplicate key value violates unique constraint &quot;ad_endpoints_pkey&quot;\r\n  Detail: Key (id)=(1001) already exists.\r\n\r\ncan someone please explain it and tell me how can I prevent the reseting from happening?\r\n\r\nThanks in advance ","title":"Understanding the @TableGenerator annotation against hibernate version","body":"<p>I have a java project where I use hibernate (5.0.3.Final) in order to perform actions on my postgres database.</p>\n<p>I have this base entry that all my other entries are extended to</p>\n<pre><code>@MappedSuperclass\npublic abstract class BaseEntry {\n    private Long id;\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.TABLE, generator = &quot;itpGenerator&quot;)\n    @TableGenerator(name = &quot;itpGenerator&quot;,\n            // the first 999 entries are saved for items that come with the system\n            initialValue = 1000,\n            allocationSize = 100\n    )\n    @Column(name=&quot;ID&quot;, insertable = false, updatable = false)\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n}\n</code></pre>\n<p>example for such entry that extended to the base:</p>\n<pre><code>@Entity\n@Table(name = &quot;AD_ENDPOINTS&quot;)\npublic class ActiveDirectoryEndpointEntry extends BaseEntry {\n    private String name;\n\n    @Column(name = &quot;FRIENDLY_NAME&quot;)\n    public String getName() {\n        return name;\n    }\n}\n</code></pre>\n<p>and I use the @TableGenerator annotation (javax.persistence.TableGenerator version 2.2) in order to  generate ids for my rows staring at 1000 and increasing by one each time.</p>\n<p>Everything worked fine, any new row of ActiveDirectoryEndpointEntry got its id, starting from 1001 and up (1002,1003) but somehow it seems like the table itpGenerator was never created.\nI connected to the database, looking for it and it was never there (select * from itpGenerator) and I never created it manually but again everything worked as it should.</p>\n<p>then I upgraded my hibernate to 5.4.24.Final and somehow the table was created and displayed in my database. I couldn't find any doc that explains this behavior.</p>\n<p>In addition, The column @Id was reseted back to the starting number, meaning that if I tried to enter a new entry for ActiveDirectoryEndpointEntry, I got an error:</p>\n<p>ERROR: duplicate key value violates unique constraint &quot;ad_endpoints_pkey&quot;\nDetail: Key (id)=(1001) already exists.</p>\n<p>can someone please explain it and tell me how can I prevent the reseting from happening?</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1683742419,"post_id":76221402,"comment_id":134415006,"body_markdown":"Typically you would just catch an exception (or detect via programming logic that an error condition had occurred) and show a window or alert. It&#39;s not clear what the specific problem you&#39;re facing is.","body":"Typically you would just catch an exception (or detect via programming logic that an error condition had occurred) and show a window or alert. It&#39;s not clear what the specific problem you&#39;re facing is."},{"owner":{"account_id":28568876,"reputation":127,"user_id":21871375,"display_name":"Vanish"},"score":0,"creation_date":1683742680,"post_id":76221402,"comment_id":134415051,"body_markdown":"How to show it in current Scene?","body":"How to show it in current Scene?"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1683743076,"post_id":76221402,"comment_id":134415121,"body_markdown":"You can&#39;t show an &quot;error window&quot; in the current window (or scene); that&#39;s an oxymoron. To show some kind of message in the current scene, just manipulate the scene graph in the usual way (e.g. add something to its root, or another pane in the root, or change the text or visibility of a label, etc.). Again, the question is not specific enough.","body":"You can&#39;t show an &quot;error window&quot; in the current window (or scene); that&#39;s an oxymoron. To show some kind of message in the current scene, just manipulate the scene graph in the usual way (e.g. add something to its root, or another pane in the root, or change the text or visibility of a label, etc.). Again, the question is not specific enough."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1683812307,"post_id":76221402,"comment_id":134426165,"body_markdown":"[Dialogs are demoed at makery](https://code.makery.ch/blog/javafx-dialogs-official/),","body":"<a href=\"https://code.makery.ch/blog/javafx-dialogs-official/\" rel=\"nofollow noreferrer\">Dialogs are demoed at makery</a>,"}],"answers":[{"comments":[{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":3,"creation_date":1683747049,"post_id":76221702,"comment_id":134415855,"body_markdown":"`JOptionPane` in a `JavaFX` app is very bad practice.","body":"<code>JOptionPane</code> in a <code>JavaFX</code> app is very bad practice."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":2,"creation_date":1683747111,"post_id":76221702,"comment_id":134415868,"body_markdown":"If all the OP wanted was an alert, he/she should use something like https://code.makery.ch/blog/javafx-dialogs-official/.","body":"If all the OP wanted was an alert, he/she should use something like <a href=\"https://code.makery.ch/blog/javafx-dialogs-official/\" rel=\"nofollow noreferrer\">code.makery.ch/blog/javafx-dialogs-official</a>."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":3,"creation_date":1683747683,"post_id":76221702,"comment_id":134415976,"body_markdown":"This answer is utterly wrong. You should not use a `JOptionPane` in a JavaFX application.","body":"This answer is utterly wrong. You should not use a <code>JOptionPane</code> in a JavaFX application."},{"owner":{"account_id":28571541,"reputation":1,"user_id":21873691,"display_name":"Bachagha Mousaab"},"score":1,"creation_date":1683748243,"post_id":76221702,"comment_id":134416090,"body_markdown":"thanks, I didn&#39;s notice he&#39;s using JavaFx instead of JFrame. I edited the answer","body":"thanks, I didn&#39;s notice he&#39;s using JavaFx instead of JFrame. I edited the answer"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1683803061,"post_id":76221702,"comment_id":134423970,"body_markdown":"When using an Alert for this, it is a good idea to set the Alertâ€™s [expandableContent](https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/DialogPane.html#setExpandableContent(javafx.scene.Node)) node to a non-editable TextArea containing the full stack trace of the exception.","body":"When using an Alert for this, it is a good idea to set the Alertâ€™s <a href=\"https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/DialogPane.html#setExpandableContent(javafx.scene.Node)\" rel=\"nofollow noreferrer\">expandableContent</a> node to a non-editable TextArea containing the full stack trace of the exception."}],"tags":[],"owner":{"account_id":28571541,"reputation":1,"user_id":21873691,"display_name":"Bachagha Mousaab"},"comment_count":5,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1683748828,"creation_date":1683744436,"answer_id":76221702,"question_id":76221402,"body_markdown":"If what you mean is to pop up an alert to the user, you can use `Alert`. Put it in the catch section.  Here is a good resource: https://code.makery.ch/blog/javafx-dialogs-official/.\r\n\r\n\r\nYou can implement it like that:\r\n\r\n    Alert alert = new Alert(AlertType.ERROR);\r\n    alert.setTitle(&quot;Error&quot;);\r\n    alert.setHeaderText(null);\r\n    alert.setContentText(&quot;An error has occured!&quot;);\r\n    alert.showAndWait();\r\n\r\ncode modified, I didn&#39;t notice this code is running with JavaFX instead of JFrame.","title":"How to pop up an error dialog in Scene when an error occurs in javaFX?","body":"<p>If what you mean is to pop up an alert to the user, you can use <code>Alert</code>. Put it in the catch section.  Here is a good resource: <a href=\"https://code.makery.ch/blog/javafx-dialogs-official/\" rel=\"nofollow noreferrer\">https://code.makery.ch/blog/javafx-dialogs-official/</a>.</p>\n<p>You can implement it like that:</p>\n<pre><code>Alert alert = new Alert(AlertType.ERROR);\nalert.setTitle(&quot;Error&quot;);\nalert.setHeaderText(null);\nalert.setContentText(&quot;An error has occured!&quot;);\nalert.showAndWait();\n</code></pre>\n<p>code modified, I didn't notice this code is running with JavaFX instead of JFrame.</p>\n"}],"owner":{"account_id":28568876,"reputation":127,"user_id":21871375,"display_name":"Vanish"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683748828,"creation_date":1683741806,"question_id":76221402,"body_markdown":"I have a code that when deleting a non-existent element in an array throws an error. And I want to draw some kind of error dialog box when throwing this error. I&#39;m a bit confused on how to implement this in JavaFX\r\n\r\n\r\n```\r\npublic static JMXMessage getMessage(QueueControl queueControl) {\r\n JMXHeaders jmxHeaders;\r\n JMXMessage jmxMessage;\r\n String body;\r\n String replyTo = null;\r\n String correlationId = null;\r\n try {\r\n  CompositeData[] messages = queueControl.browse();\r\n  j = queueLength - i;\r\n  if (j &gt; queueLength - 1) {\r\n   i = 1;\r\n   j = queueLength - i;\r\n  }\r\n  if (j &lt; 0) {\r\n  i = queueLength;\r\n  j = 0;\r\n }\r\n\r\n TabularData stringProps = (TabularData) messages[j].get(CompositeDataConstants.STRING_PROPERTIES);\r\n for (CompositeData o : (Collection&lt;CompositeData&gt;) stringProps.values()) {\r\n  Object key = o.get(&quot;key&quot;);\r\n   if (key.equals(&quot;JMSReplyTo&quot;)) {\r\n    replyTo = o.get(&quot;value&quot;).toString();\r\n   }\r\n  if (key.equals(&quot;JMSCorrelationID&quot;)) {\r\n correlationId = o.get(&quot;value&quot;).toString();\r\n  }\r\n }\r\n jmxHeaders = new JMXHeaders(messages[j].get(CompositeDataConstants.TYPE).toString(),\r\n messages[j].get(CompositeDataConstants.EXPIRATION).toString(),\r\n messages[j].get(CompositeDataConstants.DURABLE).toString(),\r\n replyTo,\r\n messages[j].get(CompositeDataConstants.MESSAGE_ID).toString(),\r\n messages[j].get(CompositeDataConstants.TIMESTAMP).toString(),\r\n correlationId,\r\n messages[j].get(CompositeDataConstants.PRIORITY).toString());\r\n\r\n body = (String) messages[j].get(CompositeDataConstants.TEXT_BODY);\r\n jmxMessage = new JMXMessage(jmxHeaders, body);\r\n queueControl.removeMessage(Long.parseLong(messages[j].get(CompositeDataConstants.MESSAGE_ID).toString()));\r\n queueLength = queueControl.browse().length;\r\n return BuildGet.serializationAndDeserializationMessage(jmxMessage);\r\n } catch (Exception e) {\r\n throw new RuntimeException(e);\r\n  }\r\n }\r\n```\r\n\r\n\r\n\r\nI don&#39;t understand how to display an error window when an error occurs","title":"How to pop up an error dialog in Scene when an error occurs in javaFX?","body":"<p>I have a code that when deleting a non-existent element in an array throws an error. And I want to draw some kind of error dialog box when throwing this error. I'm a bit confused on how to implement this in JavaFX</p>\n<pre><code>public static JMXMessage getMessage(QueueControl queueControl) {\n JMXHeaders jmxHeaders;\n JMXMessage jmxMessage;\n String body;\n String replyTo = null;\n String correlationId = null;\n try {\n  CompositeData[] messages = queueControl.browse();\n  j = queueLength - i;\n  if (j &gt; queueLength - 1) {\n   i = 1;\n   j = queueLength - i;\n  }\n  if (j &lt; 0) {\n  i = queueLength;\n  j = 0;\n }\n\n TabularData stringProps = (TabularData) messages[j].get(CompositeDataConstants.STRING_PROPERTIES);\n for (CompositeData o : (Collection&lt;CompositeData&gt;) stringProps.values()) {\n  Object key = o.get(&quot;key&quot;);\n   if (key.equals(&quot;JMSReplyTo&quot;)) {\n    replyTo = o.get(&quot;value&quot;).toString();\n   }\n  if (key.equals(&quot;JMSCorrelationID&quot;)) {\n correlationId = o.get(&quot;value&quot;).toString();\n  }\n }\n jmxHeaders = new JMXHeaders(messages[j].get(CompositeDataConstants.TYPE).toString(),\n messages[j].get(CompositeDataConstants.EXPIRATION).toString(),\n messages[j].get(CompositeDataConstants.DURABLE).toString(),\n replyTo,\n messages[j].get(CompositeDataConstants.MESSAGE_ID).toString(),\n messages[j].get(CompositeDataConstants.TIMESTAMP).toString(),\n correlationId,\n messages[j].get(CompositeDataConstants.PRIORITY).toString());\n\n body = (String) messages[j].get(CompositeDataConstants.TEXT_BODY);\n jmxMessage = new JMXMessage(jmxHeaders, body);\n queueControl.removeMessage(Long.parseLong(messages[j].get(CompositeDataConstants.MESSAGE_ID).toString()));\n queueLength = queueControl.browse().length;\n return BuildGet.serializationAndDeserializationMessage(jmxMessage);\n } catch (Exception e) {\n throw new RuntimeException(e);\n  }\n }\n</code></pre>\n<p>I don't understand how to display an error window when an error occurs</p>\n"},{"tags":["java","spring","spring-boot","testing","mockito"],"comments":[{"owner":{"account_id":16440014,"reputation":692,"user_id":11876612,"display_name":"Felipe Bonfante"},"score":0,"creation_date":1683749654,"post_id":76222155,"comment_id":134416349,"body_markdown":"how is the code of the PopulatingService? Does it have @Service or @Component?","body":"how is the code of the PopulatingService? Does it have @Service or @Component?"},{"owner":{"account_id":11454420,"reputation":79,"user_id":8395921,"accept_rate":9,"display_name":"Eckersley"},"score":0,"creation_date":1683751809,"post_id":76222155,"comment_id":134416719,"body_markdown":"@FelipeBonfante It is annotated as a Service","body":"@FelipeBonfante It is annotated as a Service"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1683778614,"post_id":76222155,"comment_id":134419475,"body_markdown":"You need to show your test as well.","body":"You need to show your test as well."},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1684214316,"post_id":76222155,"comment_id":134480624,"body_markdown":"Where&#39;s the code of your test?","body":"Where&#39;s the code of your test?"}],"owner":{"account_id":11454420,"reputation":79,"user_id":8395921,"accept_rate":9,"display_name":"Eckersley"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":245,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683748593,"creation_date":1683748593,"question_id":76222155,"body_markdown":"I am trying to run some simple tests on a Spring REST API but running the tests causes errors.\r\nIt seems to be unable to find the beans in the project. \r\nI have added EntityScan to my Main class:\r\n\r\n    @SpringBootApplication\r\n    @EntityScan(&quot;solita.citybike&quot;)\r\n    public class JourneyBackend {\r\n    \r\n    \r\n        public static void main(String [] args){\r\n            SpringApplication.run(JourneyBackend.class, args);\r\n        }\r\n    }\r\n\r\nIt might be related to having two services in one controller class but other than that, I have no idea.\r\n\r\nThis is the error stack:\r\n    \r\n        2023-05-10T22:45:38.615+03:00 ERROR 10504 --- [           main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [solita.citybike.JourneyControllerTest@77c1e611]\r\n        \r\n        java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@93824eb testClass = solita.citybike.JourneyControllerTest, locations = [], classes = [solita.citybike.controllers.JourneyController, solita.citybike.services.JourneyService, solita.citybike.repositories.JourneyRepository], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = [&quot;org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true&quot;], contextCustomizers = [org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@792b749c, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@595a413a, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@87e31c, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@29d80d2b, [ImportsContextCustomizer@7af52ec7 key = [org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35) ~[junit-rt.jar:na]\r\n        \tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235) ~[junit-rt.jar:na]\r\n        \tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54) ~[junit-rt.jar:na]\r\n        Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;journeyController&#39;: Unsatisfied dependency expressed through field &#39;populatingService&#39;: No qualifying bean of type &#39;solita.citybike.services.PopulatingService&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n        \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:712) ~[spring-beans-6.0.6.jar:6.0.6]\r\n        \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:692) ~[spring-beans-6.0.6.jar:6.0.6]\r\n        \tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:133) ~[spring-beans-6.0.6.jar:6.0.6]\r\n    org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.0.4.jar:3.0.4]\r\n        \tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59) ~[spring-core-6.0.6.jar:6.0.6]\r\n        \tat org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47) ~[spring-core-6.0.6.jar:6.0.6]\r\n        \tat org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1388) ~[spring-boot-3.0.4.jar:3.0.4]\r\n        \tat \r\n    \r\n        org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:545) ~[spring-boot-test-3.0.4.jar:3.0.4]\r\n            \tat \r\n            Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;solita.citybike.services.PopulatingService&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n            \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1812) ~[spring-beans-6.0.6.jar:6.0.6]\r\n            \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1371) ~[spring-beans-6.0.6.jar:6.0.6]\r\n            \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1325) ~[spring-beans-6.0.6.jar:6.0.6]\r\n            \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:709) ~[spring-beans-6.0.6.jar:6.0.6]\r\n            \t... 98 common frames omitted\r\n            \r\n            \r\n            java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@93824eb testClass = solita.citybike.JourneyControllerTest, locations = [], classes = [solita.citybike.controllers.JourneyController, solita.citybike.services.JourneyService, solita.citybike.repositories.JourneyRepository], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = [&quot;org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true&quot;], contextCustomizers = [org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@792b749c, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@595a413a, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@87e31c, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@29d80d2b, [ImportsContextCustomizer@7af\r\n    \r\n    52ec7 key = [org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@36804139, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@24959ca4, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@a4e0ef72, org.springframework.boot.test.context.SpringBootTestAnnotation@ce9cd5cb], resourceBasePath = &quot;src/main/webapp&quot;, contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]\r\n            \r\n            \tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:142)\r\n            \tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)\r\n            \tat \r\n            \t... 73 more\r\n            Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;solita.citybike.services.PopulatingService&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n            \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1812)\r\n            \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1371)\r\n            \tat \r\n    \r\n    org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1325)\r\n        \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:709)\r\n        \t... 98 more\r\n        \r\n        \r\n        Process finished with exit code -1\r\n\r\nThis is my Controller:\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;journeys&quot;)\r\n    public class JourneyController {\r\n    \r\n        @Autowired\r\n        public PopulatingService populatingService;\r\n    \r\n        @Autowired\r\n        public JourneyService journeyService;\r\n    \r\n        @GetMapping\r\n        public ResponseEntity&lt;List&lt;BikeJourney&gt;&gt; getAllJourneys(\r\n                @RequestParam(defaultValue = &quot;0&quot;) Integer pageNumber,\r\n                @RequestParam(defaultValue = &quot;15&quot;) Integer pageSize,\r\n                @RequestParam(defaultValue = &quot;id&quot;) String sortBy\r\n        ){\r\n            List&lt;BikeJourney&gt; journeyList = this.journeyService.getAllJourneys(pageNumber, pageSize, sortBy);\r\n    \r\n    \r\n            return new ResponseEntity&lt;List&lt;BikeJourney&gt;&gt;(journeyList, new HttpHeaders(), HttpStatus.OK);\r\n    \r\n    \r\n        }\r\n    \r\n    \r\n \r\n\r\n       @GetMapping(&quot;/hello&quot;)\r\n        public @ResponseBody String greeting() {\r\n            return this.journeyService.test();\r\n        }\r\n \r\n\r\n   \r\n        @PostMapping(&quot;/populate&quot;)\r\n        public ResponseEntity&lt;String&gt; add(){\r\n\r\n\r\n\r\n\r\n             if(this.populatingService.populateData()){\r\n                  return ResponseEntity.status(HttpStatus.OK).body(&quot;Data read from file to db \r\n               succesfully&quot;);\r\n           }\r\n\r\n           return ResponseEntity.status(HttpStatus.NOT_FOUND).body(&quot;Reading data from file \r\n             failed&quot;);\r\n\r\n\r\n     }\r\n\r\nService:\r\n\r\n    @Service\r\n    public class JourneyService {\r\n    \r\n    \r\n    \r\n        @Autowired\r\n        private JourneyRepository journeyRepository;\r\n    \r\n        @Autowired\r\n        private StationRepository stationRepository;\r\n    \r\n    \r\n    \r\n    \r\n        public List&lt;BikeJourney&gt; getAllJourneys(Integer pageNumber, Integer pageSize, String sortBy) {\r\n    \r\n            Pageable paging = PageRequest.of(pageNumber, pageSize, Sort.by(sortBy));\r\n    \r\n            Page&lt;BikeJourney&gt; pagedResult = journeyRepository.findAll(paging);\r\n    \r\n            if(pagedResult.isEmpty()){\r\n                return new ArrayList&lt;&gt;();\r\n            }\r\n    \r\n            return pagedResult.getContent();\r\n    \r\n        }\r\n    \r\n        public String test() {\r\n            return &quot;cat&quot;;\r\n        }\r\n    \r\n    \r\n    }\r\n\r\nAnd repository:\r\n\r\n    @Repository\r\n    public interface JourneyRepository extends PagingAndSortingRepository&lt;BikeJourney, Integer&gt; {\r\n    \r\n    \r\n    \r\n        List&lt;BikeJourney&gt; findAll();\r\n    \r\n        Iterable&lt;BikeJourney&gt; saveAll(Iterable&lt;BikeJourney&gt; validJourneys);\r\n    \r\n        Iterable&lt;BikeJourney&gt; deleteAll();\r\n    }\r\n\r\nI&#39;ve tried every combination of annotations and scans under the sun and exhausted all Stack threads.\r\n\r\n\r\n","title":"Spring Boot tests fail to run due to missing bean","body":"<p>I am trying to run some simple tests on a Spring REST API but running the tests causes errors.\nIt seems to be unable to find the beans in the project.\nI have added EntityScan to my Main class:</p>\n<pre><code>@SpringBootApplication\n@EntityScan(&quot;solita.citybike&quot;)\npublic class JourneyBackend {\n\n\n    public static void main(String [] args){\n        SpringApplication.run(JourneyBackend.class, args);\n    }\n}\n</code></pre>\n<p>It might be related to having two services in one controller class but other than that, I have no idea.</p>\n<p>This is the error stack:</p>\n<pre><code>    2023-05-10T22:45:38.615+03:00 ERROR 10504 --- [           main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [solita.citybike.JourneyControllerTest@77c1e611]\n    \n    java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@93824eb testClass = solita.citybike.JourneyControllerTest, locations = [], classes = [solita.citybike.controllers.JourneyController, solita.citybike.services.JourneyService, solita.citybike.repositories.JourneyRepository], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = [&quot;org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true&quot;], contextCustomizers = [org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@792b749c, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@595a413a, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@87e31c, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@29d80d2b, [ImportsContextCustomizer@7af52ec7 key = [org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35) ~[junit-rt.jar:na]\n        at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235) ~[junit-rt.jar:na]\n        at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54) ~[junit-rt.jar:na]\n    Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'journeyController': Unsatisfied dependency expressed through field 'populatingService': No qualifying bean of type 'solita.citybike.services.PopulatingService' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:712) ~[spring-beans-6.0.6.jar:6.0.6]\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:692) ~[spring-beans-6.0.6.jar:6.0.6]\n        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:133) ~[spring-beans-6.0.6.jar:6.0.6]\norg.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.0.4.jar:3.0.4]\n        at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59) ~[spring-core-6.0.6.jar:6.0.6]\n        at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47) ~[spring-core-6.0.6.jar:6.0.6]\n        at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1388) ~[spring-boot-3.0.4.jar:3.0.4]\n        at \n\n    org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:545) ~[spring-boot-test-3.0.4.jar:3.0.4]\n            at \n        Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'solita.citybike.services.PopulatingService' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n            at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1812) ~[spring-beans-6.0.6.jar:6.0.6]\n            at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1371) ~[spring-beans-6.0.6.jar:6.0.6]\n            at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1325) ~[spring-beans-6.0.6.jar:6.0.6]\n            at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:709) ~[spring-beans-6.0.6.jar:6.0.6]\n            ... 98 common frames omitted\n        \n        \n        java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@93824eb testClass = solita.citybike.JourneyControllerTest, locations = [], classes = [solita.citybike.controllers.JourneyController, solita.citybike.services.JourneyService, solita.citybike.repositories.JourneyRepository], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = [&quot;org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true&quot;], contextCustomizers = [org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@792b749c, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@595a413a, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@87e31c, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@29d80d2b, [ImportsContextCustomizer@7af\n\n52ec7 key = [org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@36804139, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@24959ca4, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@a4e0ef72, org.springframework.boot.test.context.SpringBootTestAnnotation@ce9cd5cb], resourceBasePath = &quot;src/main/webapp&quot;, contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]\n        \n            at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:142)\n            at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)\n            at \n            ... 73 more\n        Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'solita.citybike.services.PopulatingService' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n            at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1812)\n            at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1371)\n            at \n\norg.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1325)\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:709)\n        ... 98 more\n    \n    \n    Process finished with exit code -1\n</code></pre>\n<p>This is my Controller:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;journeys&quot;)\npublic class JourneyController {\n\n    @Autowired\n    public PopulatingService populatingService;\n\n    @Autowired\n    public JourneyService journeyService;\n\n    @GetMapping\n    public ResponseEntity&lt;List&lt;BikeJourney&gt;&gt; getAllJourneys(\n            @RequestParam(defaultValue = &quot;0&quot;) Integer pageNumber,\n            @RequestParam(defaultValue = &quot;15&quot;) Integer pageSize,\n            @RequestParam(defaultValue = &quot;id&quot;) String sortBy\n    ){\n        List&lt;BikeJourney&gt; journeyList = this.journeyService.getAllJourneys(pageNumber, pageSize, sortBy);\n\n\n        return new ResponseEntity&lt;List&lt;BikeJourney&gt;&gt;(journeyList, new HttpHeaders(), HttpStatus.OK);\n\n\n    }\n\n\n\n\n   @GetMapping(&quot;/hello&quot;)\n    public @ResponseBody String greeting() {\n        return this.journeyService.test();\n    }\n\n\n\n    @PostMapping(&quot;/populate&quot;)\n    public ResponseEntity&lt;String&gt; add(){\n\n\n\n\n         if(this.populatingService.populateData()){\n              return ResponseEntity.status(HttpStatus.OK).body(&quot;Data read from file to db \n           succesfully&quot;);\n       }\n\n       return ResponseEntity.status(HttpStatus.NOT_FOUND).body(&quot;Reading data from file \n         failed&quot;);\n\n\n }\n</code></pre>\n<p>Service:</p>\n<pre><code>@Service\npublic class JourneyService {\n\n\n\n    @Autowired\n    private JourneyRepository journeyRepository;\n\n    @Autowired\n    private StationRepository stationRepository;\n\n\n\n\n    public List&lt;BikeJourney&gt; getAllJourneys(Integer pageNumber, Integer pageSize, String sortBy) {\n\n        Pageable paging = PageRequest.of(pageNumber, pageSize, Sort.by(sortBy));\n\n        Page&lt;BikeJourney&gt; pagedResult = journeyRepository.findAll(paging);\n\n        if(pagedResult.isEmpty()){\n            return new ArrayList&lt;&gt;();\n        }\n\n        return pagedResult.getContent();\n\n    }\n\n    public String test() {\n        return &quot;cat&quot;;\n    }\n\n\n}\n</code></pre>\n<p>And repository:</p>\n<pre><code>@Repository\npublic interface JourneyRepository extends PagingAndSortingRepository&lt;BikeJourney, Integer&gt; {\n\n\n\n    List&lt;BikeJourney&gt; findAll();\n\n    Iterable&lt;BikeJourney&gt; saveAll(Iterable&lt;BikeJourney&gt; validJourneys);\n\n    Iterable&lt;BikeJourney&gt; deleteAll();\n}\n</code></pre>\n<p>I've tried every combination of annotations and scans under the sun and exhausted all Stack threads.</p>\n"},{"tags":["java","database","azure","cassandra"],"comments":[{"owner":{"account_id":21648949,"reputation":1274,"user_id":15969858,"display_name":"RKM"},"score":0,"creation_date":1638430158,"post_id":70175783,"comment_id":124086905,"body_markdown":"This SO thread may help you-https://stackoverflow.com/questions/53571213/cannot-connect-cassandra-client-on-public-ip","body":"This SO thread may help you-<a href=\"https://stackoverflow.com/questions/53571213/cannot-connect-cassandra-client-on-public-ip\" title=\"cannot connect cassandra client on public ip\">stackoverflow.com/questions/53571213/&hellip;</a>"},{"owner":{"account_id":10725921,"reputation":1866,"user_id":9303470,"display_name":"Ecstasy"},"score":0,"creation_date":1638506745,"post_id":70175783,"comment_id":124112184,"body_markdown":"You can refer to [Unable to connect to cassandra hosted on my VM](https://stackoverflow.com/questions/32376091/unable-to-connect-to-cassandra-hosted-on-my-vm)","body":"You can refer to <a href=\"https://stackoverflow.com/questions/32376091/unable-to-connect-to-cassandra-hosted-on-my-vm\">Unable to connect to cassandra hosted on my VM</a>"}],"answers":[{"comments":[{"owner":{"account_id":5258646,"reputation":623,"user_id":4200792,"display_name":"Murat Mercan"},"score":2,"creation_date":1683784116,"post_id":76222143,"comment_id":134420114,"body_markdown":"as Cassandra runs in a VNet, running VMs in the same Vnet or peered VNet can solve the connectivity issues,\nif you have to connect to Managed Cassandra from your Computer you can also use Azure Point-to-Site VPN (\nhttps://learn.microsoft.com/en-us/azure/vpn-gateway/point-to-site-about) this way you will create a VPN connection to your azure VNET","body":"as Cassandra runs in a VNet, running VMs in the same Vnet or peered VNet can solve the connectivity issues, if you have to connect to Managed Cassandra from your Computer you can also use Azure Point-to-Site VPN ( <a href=\"https://learn.microsoft.com/en-us/azure/vpn-gateway/point-to-site-about\" rel=\"nofollow noreferrer\">learn.microsoft.com/en-us/azure/vpn-gateway/point-to-site-ab&zwnj;&#8203;out</a>) this way you will create a VPN connection to your azure VNET"}],"tags":[],"owner":{"account_id":7259207,"reputation":92,"user_id":5536648,"display_name":"A R K"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683748438,"creation_date":1683748438,"answer_id":76222143,"question_id":70175783,"body_markdown":"I have also faced the same issue and unable to connect from my local machine to Azure Managed Cassandra, based on my research these are the ways to connect to Azure Managed Cassandra\r\n\r\n1- Try with VM which is present in the same Virtual network as of Azure Managed Cassandra.\r\n\r\n2- Try to perform V Net peering for the the Virtual network of the VM in which you wanted to connect to Azure Managed Cassandra with the Virtual network of Azure managed Cassandra\r\n\r\n","title":"Azure managed cassandra cluster public IP","body":"<p>I have also faced the same issue and unable to connect from my local machine to Azure Managed Cassandra, based on my research these are the ways to connect to Azure Managed Cassandra</p>\n<p>1- Try with VM which is present in the same Virtual network as of Azure Managed Cassandra.</p>\n<p>2- Try to perform V Net peering for the the Virtual network of the VM in which you wanted to connect to Azure Managed Cassandra with the Virtual network of Azure managed Cassandra</p>\n"}],"owner":{"account_id":3390495,"reputation":12123,"user_id":2845414,"accept_rate":94,"display_name":"Sumeet Kumar Yadav"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":296,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683748438,"creation_date":1638304712,"question_id":70175783,"body_markdown":"I am creating Azure managed Cassandra cluster following the documentation \r\n\r\nhttps://learn.microsoft.com/en-us/azure/managed-instance-apache-cassandra/create-cluster-portal \r\n\r\nIt creates all 3 nodes successfully and assigns private IP. But to connect via java program requires public IP to connect with any contact point.\r\n\r\nDocumentation also says.\r\n\r\n&gt; Azure Managed Instance for Apache Cassandra does not create nodes with\r\n&gt; public IP addresses, so to connect to your newly created Cassandra\r\n&gt; cluster, you will need to create another resource inside the VNet.\r\n&gt; This could be an application, or a Virtual Machine with Apache&#39;s\r\n&gt; open-source query tool CQLSH installed. You can use a template to\r\n&gt; deploy an Ubuntu Virtual Machine. When deployed, use SSH to connect to\r\n&gt; the machine, and install CQLSH using the below commands\r\n\r\n\r\nI am running a Java program in a different VM, how to establish the connection between Java Instance VM to Cassandra Cluster. What will be IP to communicate \r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/x5K9E.png","title":"Azure managed cassandra cluster public IP","body":"<p>I am creating Azure managed Cassandra cluster following the documentation</p>\n<p><a href=\"https://learn.microsoft.com/en-us/azure/managed-instance-apache-cassandra/create-cluster-portal\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/managed-instance-apache-cassandra/create-cluster-portal</a></p>\n<p>It creates all 3 nodes successfully and assigns private IP. But to connect via java program requires public IP to connect with any contact point.</p>\n<p>Documentation also says.</p>\n<blockquote>\n<p>Azure Managed Instance for Apache Cassandra does not create nodes with\npublic IP addresses, so to connect to your newly created Cassandra\ncluster, you will need to create another resource inside the VNet.\nThis could be an application, or a Virtual Machine with Apache's\nopen-source query tool CQLSH installed. You can use a template to\ndeploy an Ubuntu Virtual Machine. When deployed, use SSH to connect to\nthe machine, and install CQLSH using the below commands</p>\n</blockquote>\n<p>I am running a Java program in a different VM, how to establish the connection between Java Instance VM to Cassandra Cluster. What will be IP to communicate</p>\n<p><a href=\"https://i.stack.imgur.com/x5K9E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/x5K9E.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","oracle","ejb","weblogic12c"],"comments":[{"owner":{"account_id":8415430,"reputation":2566,"user_id":6316044,"display_name":"Emmanuel Collin"},"score":0,"creation_date":1683871360,"post_id":76222037,"comment_id":134435695,"body_markdown":"Can you post the complete stack trace to see the root cause of the NoClassDefFoundError ?","body":"Can you post the complete stack trace to see the root cause of the NoClassDefFoundError ?"},{"owner":{"account_id":11757082,"reputation":69,"user_id":8604431,"display_name":"Anshu"},"score":0,"creation_date":1683943060,"post_id":76222037,"comment_id":134448519,"body_markdown":"Hi @EmmanuelCollin / Thank you for response. I got the issue. Actually one of the JVM args that I was passing for WebLogic was not correct (wrong name) that&#39;s why it was giving me error while loading. I found that details in weblogic debug logs.","body":"Hi @EmmanuelCollin / Thank you for response. I got the issue. Actually one of the JVM args that I was passing for WebLogic was not correct (wrong name) that&#39;s why it was giving me error while loading. I found that details in weblogic debug logs."}],"owner":{"account_id":11757082,"reputation":69,"user_id":8604431,"display_name":"Anshu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":207,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683747462,"creation_date":1683747462,"question_id":76222037,"body_markdown":"I am facing issue with T3s connection to weblogic server with below error.\r\n\r\n    Caused by: java.lang.NoClassDefFoundError: Could not initialize class weblogic.transaction.internal.TransactionHelperImpl\r\n\tat java.lang.Class.forName0(Native Method)\r\n\tat java.lang.Class.forName(Class.java:264)\r\n\tat weblogic.transaction.TransactionHelper.getTransactionHelper(TransactionHelper.java:73)\r\n\tat weblogic.common.internal.RMIBootServiceImpl_12214_WLStub.authenticate(Unknown Source)\r\n\tat weblogic.security.acl.internal.RemoteAuthenticate$1.run(RemoteAuthenticate.java:67)\r\n\tat weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:386)\r\n\tat weblogic.security.service.SecurityManager.runAs(SecurityManager.java:163)\r\n\tat weblogic.security.acl.internal.RemoteAuthenticate.authenticate(RemoteAuthenticate.java:64)\r\n\tat weblogic.jndi.WLInitialContextFactoryDelegate.authenticateRemotely(WLInitialContextFactoryDelegate.java:927)\r\n\tat weblogic.jndi.WLInitialContextFactoryDelegate.pushSubject(WLInitialContextFactoryDelegate.java:857)\r\n\tat weblogic.jndi.WLInitialContextFactoryDelegate.newContext(WLInitialContextFactoryDelegate.java:609)\r\n\tat weblogic.jndi.WLInitialContextFactoryDelegate.getInitialContext(WLInitialContextFactoryDelegate.java:418)\r\n\tat weblogic.jndi.Environment.getContext(Environment.java:353)\r\n\tat weblogic.jndi.Environment.getContext(Environment.java:322)\r\n\r\nI am using wllfullclient jar and t3s connection to connect to WebLogic server.\r\n\r\nI tried to search solution of above issue on oracle forums but didn&#39;t found any solution yet. can anyone guide me to correct place where I can search the solution of this issue or let me know If I need to add any other jar in class path.  Any help will be greatly appreciated.\r\n\r\nwllfullclient details\r\n\r\nManifest-Version: 1.0\r\nImplementation-Version: 12.2.1.4.0\r\n\r\nThank you","title":"Getting Error- Could not initialize class weblogic.transaction.internal.TransactionHelperImpl with weblogic-12.2.1.4.0","body":"<p>I am facing issue with T3s connection to weblogic server with below error.</p>\n<pre><code>Caused by: java.lang.NoClassDefFoundError: Could not initialize class weblogic.transaction.internal.TransactionHelperImpl\nat java.lang.Class.forName0(Native Method)\nat java.lang.Class.forName(Class.java:264)\nat weblogic.transaction.TransactionHelper.getTransactionHelper(TransactionHelper.java:73)\nat weblogic.common.internal.RMIBootServiceImpl_12214_WLStub.authenticate(Unknown Source)\nat weblogic.security.acl.internal.RemoteAuthenticate$1.run(RemoteAuthenticate.java:67)\nat weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:386)\nat weblogic.security.service.SecurityManager.runAs(SecurityManager.java:163)\nat weblogic.security.acl.internal.RemoteAuthenticate.authenticate(RemoteAuthenticate.java:64)\nat weblogic.jndi.WLInitialContextFactoryDelegate.authenticateRemotely(WLInitialContextFactoryDelegate.java:927)\nat weblogic.jndi.WLInitialContextFactoryDelegate.pushSubject(WLInitialContextFactoryDelegate.java:857)\nat weblogic.jndi.WLInitialContextFactoryDelegate.newContext(WLInitialContextFactoryDelegate.java:609)\nat weblogic.jndi.WLInitialContextFactoryDelegate.getInitialContext(WLInitialContextFactoryDelegate.java:418)\nat weblogic.jndi.Environment.getContext(Environment.java:353)\nat weblogic.jndi.Environment.getContext(Environment.java:322)\n</code></pre>\n<p>I am using wllfullclient jar and t3s connection to connect to WebLogic server.</p>\n<p>I tried to search solution of above issue on oracle forums but didn't found any solution yet. can anyone guide me to correct place where I can search the solution of this issue or let me know If I need to add any other jar in class path.  Any help will be greatly appreciated.</p>\n<p>wllfullclient details</p>\n<p>Manifest-Version: 1.0\nImplementation-Version: 12.2.1.4.0</p>\n<p>Thank you</p>\n"},{"tags":["java","hash","hashset"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1683086695,"post_id":76160306,"comment_id":134310943,"body_markdown":"I suggest that you step into HashSet.add with the debugger and find out why this happens.","body":"I suggest that you step into HashSet.add with the debugger and find out why this happens."}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1683087700,"creation_date":1683087700,"answer_id":76160412,"question_id":76160306,"body_markdown":"This happens because you *changed* the list after inserting it into the set. Once you do that, the behavior of the set is unspecified.\r\n\r\nAs documented in the javadocs for [`Set`][1]:\r\n\r\n&gt; Note: Great care must be exercised if mutable objects are used as set elements. The behavior of a set is not specified if the value of an object is changed in a manner that affects equals comparisons while the object is an element in the set.\r\n\r\nThis is an oversimplification, but what probably happened is when you first inserted the list, the set looks at its hash code and puts it in a corresponding bucket. Then you insert again, and this time the list has a different hash code, so the set puts it into another bucket, causing the same list be inserted twice.\r\n\r\nThe correct behaviour of the set depends on the fact that objects are not changed (in such a way that affects `equals`) once they are put into the set.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html","title":"HashSet adding same list objects 2 times","body":"<p>This happens because you <em>changed</em> the list after inserting it into the set. Once you do that, the behavior of the set is unspecified.</p>\n<p>As documented in the javadocs for <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html\" rel=\"nofollow noreferrer\"><code>Set</code></a>:</p>\n<blockquote>\n<p>Note: Great care must be exercised if mutable objects are used as set elements. The behavior of a set is not specified if the value of an object is changed in a manner that affects equals comparisons while the object is an element in the set.</p>\n</blockquote>\n<p>This is an oversimplification, but what probably happened is when you first inserted the list, the set looks at its hash code and puts it in a corresponding bucket. Then you insert again, and this time the list has a different hash code, so the set puts it into another bucket, causing the same list be inserted twice.</p>\n<p>The correct behaviour of the set depends on the fact that objects are not changed (in such a way that affects <code>equals</code>) once they are put into the set.</p>\n"},{"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683087996,"creation_date":1683087996,"answer_id":76160428,"question_id":76160306,"body_markdown":"`HashSet` uses `HashMap` under the hood, which uses the `hashCode` of the object to find the bucket for it. After you added an element to the `List`, its `hashCode` changed, which resulted in it being identified as a different object. \r\n\r\nYou could use `IdentityHashMap` instead if you want reference equality and the hash code from `System.identityHashCode`.\r\n\r\n```java\r\nSet&lt;List&lt;Integer&gt;&gt; set = Collections.newSetFromMap(new IdentityHashMap&lt;&gt;());\r\n```\r\n\r\nWith this `set`, the `List` will only be added once.","title":"HashSet adding same list objects 2 times","body":"<p><code>HashSet</code> uses <code>HashMap</code> under the hood, which uses the <code>hashCode</code> of the object to find the bucket for it. After you added an element to the <code>List</code>, its <code>hashCode</code> changed, which resulted in it being identified as a different object.</p>\n<p>You could use <code>IdentityHashMap</code> instead if you want reference equality and the hash code from <code>System.identityHashCode</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Set&lt;List&lt;Integer&gt;&gt; set = Collections.newSetFromMap(new IdentityHashMap&lt;&gt;());\n</code></pre>\n<p>With this <code>set</code>, the <code>List</code> will only be added once.</p>\n"},{"tags":[],"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683747221,"creation_date":1683747221,"answer_id":76222012,"question_id":76160306,"body_markdown":"### Simple answer\r\n\r\nAdd a :\r\n```lang-java\r\nSystem.out.println(list.hashCode());\r\n```\r\n*before and after* `list.add(..)` ;) \r\n\r\n#### Explanation\r\n\r\nIt is a &quot;*hash* set&quot;. (While testing `list == list` probably useless.)","title":"HashSet adding same list objects 2 times","body":"<h3>Simple answer</h3>\n<p>Add a :</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(list.hashCode());\n</code></pre>\n<p><em>before and after</em> <code>list.add(..)</code> ;)</p>\n<h4>Explanation</h4>\n<p>It is a &quot;<em>hash</em> set&quot;. (While testing <code>list == list</code> probably useless.)</p>\n"}],"owner":{"account_id":28198782,"reputation":11,"user_id":21552927,"display_name":"Manav Sidana"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":172,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1683747221,"creation_date":1683085782,"question_id":76160306,"body_markdown":"I am new the the java HashSet and having problem understanding the following thing.\r\nIn HashSet duplicate objects are not allowed, and when we try to add duplicate objects it gives false as output.\r\n\r\nHowever, when I tried adding same list object 2 times in a HashSet, and it successfully added it.\r\n\r\nHere is the code I&#39;ve written.\r\n\r\n```\r\npublic class Test{\r\n    public static void main(String[] args) {\r\n        System.out.println(example());\r\n    }\r\n\r\n    public static List&lt;List&lt;Integer&gt;&gt; example() {\r\n        Set set = new HashSet();\r\n        List&lt;Integer&gt; list = new ArrayList&lt;&gt;(Arrays.asList(1, 2, 3, 4));\r\n        set.add(list);\r\n        list.add(33);\r\n        System.out.println(set.add(list));\r\n        return set.stream().toList();\r\n    }\r\n```\r\n\r\nThe line number 11 gives **true** as output, whereas it should&#39;ve given **false** as I have added the **same list object**.\r\n\r\n```\r\ntrue\r\n[[1, 2, 3, 4, 33], [1, 2, 3, 4, 33]]\r\n\r\nProcess finished with exit code 0\r\n```\r\n\r\nWhy is it giving true as output?","title":"HashSet adding same list objects 2 times","body":"<p>I am new the the java HashSet and having problem understanding the following thing.\nIn HashSet duplicate objects are not allowed, and when we try to add duplicate objects it gives false as output.</p>\n<p>However, when I tried adding same list object 2 times in a HashSet, and it successfully added it.</p>\n<p>Here is the code I've written.</p>\n<pre><code>public class Test{\n    public static void main(String[] args) {\n        System.out.println(example());\n    }\n\n    public static List&lt;List&lt;Integer&gt;&gt; example() {\n        Set set = new HashSet();\n        List&lt;Integer&gt; list = new ArrayList&lt;&gt;(Arrays.asList(1, 2, 3, 4));\n        set.add(list);\n        list.add(33);\n        System.out.println(set.add(list));\n        return set.stream().toList();\n    }\n</code></pre>\n<p>The line number 11 gives <strong>true</strong> as output, whereas it should've given <strong>false</strong> as I have added the <strong>same list object</strong>.</p>\n<pre><code>true\n[[1, 2, 3, 4, 33], [1, 2, 3, 4, 33]]\n\nProcess finished with exit code 0\n</code></pre>\n<p>Why is it giving true as output?</p>\n"},{"tags":["java","string","list","contains"],"comments":[{"owner":{"account_id":16341785,"reputation":5,"user_id":12330292,"display_name":"Prakarsh Saxena"},"score":0,"creation_date":1683746085,"post_id":76221878,"comment_id":134415669,"body_markdown":"I tried \nList&lt;String&gt; s = {&quot;20&quot;}\ns.contains(20) gives false\nbut when I gave s.contains(String.valueOf(20))) it gives true,\nIs it converting 20 to ascii here?","body":"I tried  List&lt;String&gt; s = {&quot;20&quot;} s.contains(20) gives false but when I gave s.contains(String.valueOf(20))) it gives true, Is it converting 20 to ascii here?"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1683746560,"post_id":76221878,"comment_id":134415763,"body_markdown":"No, it converts it to an integer, because you called `valueOf`. See the `String.valueOf` docs. A list of strings will never contain `20`, `20` isn&#39;t a string. If you want to check the content of a string to see if it&#39;s strictly an integer then you need to actually check the content of the string to see if it&#39;s strictly an integer.","body":"No, it converts it to an integer, because you called <code>valueOf</code>. See the <code>String.valueOf</code> docs. A list of strings will never contain <code>20</code>, <code>20</code> isn&#39;t a string. If you want to check the content of a string to see if it&#39;s strictly an integer then you need to actually check the content of the string to see if it&#39;s strictly an integer."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1683750466,"post_id":76221878,"comment_id":134416482,"body_markdown":"@user16320675 Whoops, yep--dang it.","body":"@user16320675 Whoops, yep--dang it."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1683783898,"post_id":76221878,"comment_id":134420084,"body_markdown":"Details belong in the body of your Question, not Comments.","body":"Details belong in the body of your Question, not Comments."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1683783922,"post_id":76221878,"comment_id":134420087,"body_markdown":"This Question needs some example data.","body":"This Question needs some example data."}],"answers":[{"tags":[],"owner":{"account_id":27960485,"reputation":185,"user_id":21352393,"display_name":"MarcelMM"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683746810,"creation_date":1683746810,"answer_id":76221962,"question_id":76221878,"body_markdown":"You cannot mix the type.\r\nThe contains method will compare like this:\r\n\r\ns.contains(String.valueOf(20))):\r\n\r\n    &quot;20&quot;.equals(&quot;20&quot;) // true\r\n\r\ns.contains(20)\r\n\r\n    &quot;20&quot;.equals(20) // false","title":"Check Integer in list of Strings in Java","body":"<p>You cannot mix the type.\nThe contains method will compare like this:</p>\n<p>s.contains(String.valueOf(20))):</p>\n<pre><code>&quot;20&quot;.equals(&quot;20&quot;) // true\n</code></pre>\n<p>s.contains(20)</p>\n<pre><code>&quot;20&quot;.equals(20) // false\n</code></pre>\n"}],"owner":{"account_id":16341785,"reputation":5,"user_id":12330292,"display_name":"Prakarsh Saxena"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1683817455,"answer_count":1,"score":-3,"last_activity_date":1683746810,"creation_date":1683746058,"question_id":76221878,"body_markdown":"How to check if list of string contains a specific integer in Java, what if we directly pass integer without parsing in list of string contains method in Java?\r\n\r\n","title":"Check Integer in list of Strings in Java","body":"<p>How to check if list of string contains a specific integer in Java, what if we directly pass integer without parsing in list of string contains method in Java?</p>\n"},{"tags":["java","spring-boot","domain-driven-design"],"comments":[{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":1,"creation_date":1683493676,"post_id":76195960,"comment_id":134371694,"body_markdown":"Like every design &quot;framework&quot;, DDD makes assumptions about the universe that just aren&#39;t true in real life.  For instance, the idea that aggregate roots form a nice well-behaved forest of trees, when the real world is a chaotic mess of networks.  You can force inter-tree references to be resolved via the aggregate root, but you may end up with severe performance issues (which probably means that your domain model was wrong to begin with).  All design dicta apply until they don&#39;t, and the real genius is knowing when to break the rules.  i.e. there is no one &quot;rule&quot; to rule them all.","body":"Like every design &quot;framework&quot;, DDD makes assumptions about the universe that just aren&#39;t true in real life.  For instance, the idea that aggregate roots form a nice well-behaved forest of trees, when the real world is a chaotic mess of networks.  You can force inter-tree references to be resolved via the aggregate root, but you may end up with severe performance issues (which probably means that your domain model was wrong to begin with).  All design dicta apply until they don&#39;t, and the real genius is knowing when to break the rules.  i.e. there is no one &quot;rule&quot; to rule them all."},{"owner":{"account_id":22259,"reputation":53888,"user_id":54734,"accept_rate":29,"display_name":"VoiceOfUnreason"},"score":0,"creation_date":1683553097,"post_id":76195960,"comment_id":134379960,"body_markdown":"I don&#39;t think you are going to find an authoritative answer.  Using unlocked data to (a) create a response to a query or (b) renormalize some inputs are both fine?  and since you need I/O to access the &quot;lookup table&quot;, then putting the code in the part of your design where the other I/O concerns live makes a lot of sense, whereas putting that I/O code in the model... doesn&#39;t?","body":"I don&#39;t think you are going to find an authoritative answer.  Using unlocked data to (a) create a response to a query or (b) renormalize some inputs are both fine?  and since you need I/O to access the &quot;lookup table&quot;, then putting the code in the part of your design where the other I/O concerns live makes a lot of sense, whereas putting that I/O code in the model... doesn&#39;t?"}],"answers":[{"tags":[],"owner":{"account_id":9339990,"reputation":1712,"user_id":6933090,"display_name":"Yevhenii Semenov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683746428,"creation_date":1683746428,"answer_id":76221918,"question_id":76195960,"body_markdown":"Assuming we disregard the topic of aggregate modeling, as there isn&#39;t sufficient context to delve into it, your code looks consistent with what DDD recommends for the application layer. \r\n\r\nThe app layer is an acceptable place to orchestrate interactions between aggregates and repositories. This includes fetching the necessary data like you do. Sometimes, the logic might become too complex to be in the application layer. In such cases, moving some of the logic into a Domain Service is possible. These are different from services that belong to the domain layer and encapsulate domain-specific operations that don&#39;t naturally fit within an entity or value object. In that scenario, the app layer service retrieves all the necessary data and delegates the processing to the domain service.\r\n\r\nTo sum up, your code looks good to me. But for more complex scenarios, you can consider using domain services.","title":"DDD example: is this kind of logic is &quot;allowed&quot; in service layer","body":"<p>Assuming we disregard the topic of aggregate modeling, as there isn't sufficient context to delve into it, your code looks consistent with what DDD recommends for the application layer.</p>\n<p>The app layer is an acceptable place to orchestrate interactions between aggregates and repositories. This includes fetching the necessary data like you do. Sometimes, the logic might become too complex to be in the application layer. In such cases, moving some of the logic into a Domain Service is possible. These are different from services that belong to the domain layer and encapsulate domain-specific operations that don't naturally fit within an entity or value object. In that scenario, the app layer service retrieves all the necessary data and delegates the processing to the domain service.</p>\n<p>To sum up, your code looks good to me. But for more complex scenarios, you can consider using domain services.</p>\n"}],"owner":{"account_id":962360,"reputation":2794,"user_id":986437,"accept_rate":53,"display_name":"GionJh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":146,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1683746428,"creation_date":1683488792,"question_id":76195960,"body_markdown":"I am trying, as an exercise, to build a small sample app using DDD and clean code:\r\n\r\nBy applying the rule that an aggregate should not hold references to entities of other aggregates, but rather just their IDs, I find myself having this kind of logic in the service layer:\r\n\r\n```\r\npublic class StockService implements StockServicePort {\r\n\r\n    private final StockRepo stockRepo;\r\n\r\n    private final CategoryRepo categoryRepo;\r\n\r\n    private final FinhubPort finhubPort;\r\n\r\n    public static final String STOCK_NOT_FOUND_MESSAGE = &quot;Stock not found, id: &quot;;\r\n\r\n    @Override\r\n    public StockWithExternalData getStockById(String stockId) {\r\n        final Stock existingStock = stockRepo.findStockById(stockId);\r\n        if (existingStock == null) {\r\n            throw new StockNotFoundException(&quot;Stock requested not found, id: &quot; + stockId);\r\n        }\r\n        final BigDecimal externalPrice = finhubPort.getStockPriceByName(existingStock.getName());\r\n        final Category category = categoryRepo.findCategoryById(existingStock.getCategoryId() == null ? &quot;-&quot; : existingStock.getCategoryId()); // is this OK ?\r\n        String categoryName = &quot;not present&quot;;\r\n        if(category != null) {\r\n            categoryName = category.getName();\r\n        }\r\n        return new StockWithExternalData(existingStock.getUuid(), existingStock.getName(), categoryName, existingStock.getValue(), externalPrice);\r\n    }\r\n\r\n    @Override\r\n    public String addStock(NewStockCommand newStockCommand) {\r\n        final Category category = this.categoryRepo.findCategoryByName(newStockCommand.getCategoryName()); // is this OK ?\r\n        String categoryId = null;\r\n        if(category != null) {\r\n            categoryId = category.getUuid();\r\n        }\r\n        final Stock stock = new Stock(newStockCommand.getName(), newStockCommand.getValue(), categoryId);\r\n        this.stockRepo.save(stock);\r\n        return stock.getUuid();\r\n    }\r\n```\r\n\r\nIs the logic that loads the category, to make sure it exists and to retrieve the id, supposed to be here ?\r\n\r\nAs I understand this logic should not live in the Model classes, so the service layer, a.k.a. application layer, seems the place for it, but I am not really sure and wanted to ask you about best practices in such cases.\r\n\r\n**Disclaimer**: I don&#39;t think this question is &quot;opinion based&quot;, I am asking what is the DDD &quot;rule&quot; in such a case and if this logic could be considered fitting according to DDD.","title":"DDD example: is this kind of logic is &quot;allowed&quot; in service layer","body":"<p>I am trying, as an exercise, to build a small sample app using DDD and clean code:</p>\n<p>By applying the rule that an aggregate should not hold references to entities of other aggregates, but rather just their IDs, I find myself having this kind of logic in the service layer:</p>\n<pre><code>public class StockService implements StockServicePort {\n\n    private final StockRepo stockRepo;\n\n    private final CategoryRepo categoryRepo;\n\n    private final FinhubPort finhubPort;\n\n    public static final String STOCK_NOT_FOUND_MESSAGE = &quot;Stock not found, id: &quot;;\n\n    @Override\n    public StockWithExternalData getStockById(String stockId) {\n        final Stock existingStock = stockRepo.findStockById(stockId);\n        if (existingStock == null) {\n            throw new StockNotFoundException(&quot;Stock requested not found, id: &quot; + stockId);\n        }\n        final BigDecimal externalPrice = finhubPort.getStockPriceByName(existingStock.getName());\n        final Category category = categoryRepo.findCategoryById(existingStock.getCategoryId() == null ? &quot;-&quot; : existingStock.getCategoryId()); // is this OK ?\n        String categoryName = &quot;not present&quot;;\n        if(category != null) {\n            categoryName = category.getName();\n        }\n        return new StockWithExternalData(existingStock.getUuid(), existingStock.getName(), categoryName, existingStock.getValue(), externalPrice);\n    }\n\n    @Override\n    public String addStock(NewStockCommand newStockCommand) {\n        final Category category = this.categoryRepo.findCategoryByName(newStockCommand.getCategoryName()); // is this OK ?\n        String categoryId = null;\n        if(category != null) {\n            categoryId = category.getUuid();\n        }\n        final Stock stock = new Stock(newStockCommand.getName(), newStockCommand.getValue(), categoryId);\n        this.stockRepo.save(stock);\n        return stock.getUuid();\n    }\n</code></pre>\n<p>Is the logic that loads the category, to make sure it exists and to retrieve the id, supposed to be here ?</p>\n<p>As I understand this logic should not live in the Model classes, so the service layer, a.k.a. application layer, seems the place for it, but I am not really sure and wanted to ask you about best practices in such cases.</p>\n<p><strong>Disclaimer</strong>: I don't think this question is &quot;opinion based&quot;, I am asking what is the DDD &quot;rule&quot; in such a case and if this logic could be considered fitting according to DDD.</p>\n"},{"tags":["java","sql","postgresql","enums"],"comments":[{"owner":{"account_id":101001,"reputation":119808,"user_id":271959,"display_name":"Frank Heikens"},"score":0,"creation_date":1683746933,"post_id":76220905,"comment_id":134415836,"body_markdown":"For a check on nulls, you need IS NULL instead of = NULL","body":"For a check on nulls, you need IS NULL instead of = NULL"},{"owner":{"account_id":8761405,"reputation":1504,"user_id":6551263,"display_name":"Chetan Ahirrao"},"score":0,"creation_date":1683787422,"post_id":76220905,"comment_id":134420658,"body_markdown":"Are you using any framework like hibernate/ Spring JPA etc.?","body":"Are you using any framework like hibernate/ Spring JPA etc.?"}],"owner":{"account_id":10133926,"reputation":131,"user_id":7486210,"accept_rate":50,"display_name":"Ebad"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":204,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683746032,"creation_date":1683737698,"question_id":76220905,"body_markdown":"I have a PostgreSQL table `fish_table` that is set up to store values (related to my fish aquariums I have), one of which is an Enum type. I am using Java 12.\r\n\r\nThe `.sql` file defines the column as:\r\n```\r\nfish_domain character varying COLLATE pg_catalog.&quot;default&quot;,\r\n```\r\nWhen I set the value I use a DTO class and have the field defined as:\r\n```\r\n    @Enumerated(value = EnumType.STRING)\r\n\t@Column(name = &quot;fish_domain&quot;)\r\n\tprivate FishDomain fishDomain;\r\n```\r\nWhen I use actual values in the Enum, I am able to CRUD just fine. However, if I have NULL stored in the field, I get an error like this when I query for the field:\r\n```\r\n&quot;message&quot;:&quot;Exception while fetching data (/queryMyFishTable) : No enum constant com.myfish.domain.types.FishDomain.\\\\xa[...]42; nested exception is java.lang.IllegalArgumentException: No enum constant com.myfish.domain.types.FishDomain.\\\\xa[...]42&quot;\r\n```\r\nNow it seems to be calling `valueOf()` to get the Enum value for the value stored in the table, but since it is NULL I am getting that error. Since I cannot override the `valueOf()` method in the Enum, how do I prevent this error from happening? I don&#39;t mind NULL being returned as the value.\r\n\r\nUPDATE:\r\n\r\nAm I able to check for NULL values in my SQL SELECT query? And then exclude that field if it is NULL?\r\n\r\nMy SQL query to get the data:\r\n```\r\n@Query(value = &quot;SELECT * FROM fish_table ft WHERE ft.name = :fishName&quot;, nativeQuery = true)\r\nMyFishDTO getMyFishByName(@Param(&quot;fishName&quot;) String fishName);\r\n```","title":"PostgreSQL query for enum when value is NULL returns error","body":"<p>I have a PostgreSQL table <code>fish_table</code> that is set up to store values (related to my fish aquariums I have), one of which is an Enum type. I am using Java 12.</p>\n<p>The <code>.sql</code> file defines the column as:</p>\n<pre><code>fish_domain character varying COLLATE pg_catalog.&quot;default&quot;,\n</code></pre>\n<p>When I set the value I use a DTO class and have the field defined as:</p>\n<pre><code>    @Enumerated(value = EnumType.STRING)\n    @Column(name = &quot;fish_domain&quot;)\n    private FishDomain fishDomain;\n</code></pre>\n<p>When I use actual values in the Enum, I am able to CRUD just fine. However, if I have NULL stored in the field, I get an error like this when I query for the field:</p>\n<pre><code>&quot;message&quot;:&quot;Exception while fetching data (/queryMyFishTable) : No enum constant com.myfish.domain.types.FishDomain.\\\\xa[...]42; nested exception is java.lang.IllegalArgumentException: No enum constant com.myfish.domain.types.FishDomain.\\\\xa[...]42&quot;\n</code></pre>\n<p>Now it seems to be calling <code>valueOf()</code> to get the Enum value for the value stored in the table, but since it is NULL I am getting that error. Since I cannot override the <code>valueOf()</code> method in the Enum, how do I prevent this error from happening? I don't mind NULL being returned as the value.</p>\n<p>UPDATE:</p>\n<p>Am I able to check for NULL values in my SQL SELECT query? And then exclude that field if it is NULL?</p>\n<p>My SQL query to get the data:</p>\n<pre><code>@Query(value = &quot;SELECT * FROM fish_table ft WHERE ft.name = :fishName&quot;, nativeQuery = true)\nMyFishDTO getMyFishByName(@Param(&quot;fishName&quot;) String fishName);\n</code></pre>\n"},{"tags":["java","maven","junit","apache-poi","aem"],"answers":[{"tags":[],"owner":{"account_id":2432872,"reputation":106,"user_id":2123419,"display_name":"Yegor Kozlov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683745911,"creation_date":1683745911,"answer_id":76221854,"question_id":76121447,"body_markdown":"Try including MS Office ooxml schemas in the maven dependencies: https://mvnrepository.com/artifact/org.apache.poi/ooxml-schemas/1.4\r\n\r\nThere could be a change in transitive dependencies of Apache POI, the MS office Java API.","title":"NoClassDefFoundError on org.apache.poi.xssf.usermodel.XSSFWorkbookType in AEM 6.5.16","body":"<p>Try including MS Office ooxml schemas in the maven dependencies: <a href=\"https://mvnrepository.com/artifact/org.apache.poi/ooxml-schemas/1.4\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/org.apache.poi/ooxml-schemas/1.4</a></p>\n<p>There could be a change in transitive dependencies of Apache POI, the MS office Java API.</p>\n"}],"owner":{"account_id":25523476,"reputation":151,"user_id":19312929,"display_name":"Mario R"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":186,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683745911,"creation_date":1682605042,"question_id":76121447,"body_markdown":"I am upgrading the uber jar version to 6.5.15 after upgrading the version I was getting a compilation error. I followed https://stackoverflow.com/questions/63384557/issue-with-apache-poi-upgrading-aem-from-6-5-2-6-5-5 and resolved the compilation issue. But after fixing the compilation issue I am getting junit failure with the below error message.\r\n\r\n \r\n\r\n    GetFolderDetails.validateFolderName:121 Unexpected exception thrown: java.lang.NoClassDefFoundError: Could not initialize class org.apache.poi.xssf.usermodel.XSSFWorkbookType\r\n\r\nThis error was not appeared before, it started coming up after uber jar versions change. When I checked the java class I found that XSSFWorkbook is having problem. I see below code \r\n\r\n\r\nWorkbook workbook = new org.apache.poi.xssf.usermodel.XSSFWorkbook();\r\n\r\nAny idea why idea why junit class is unable to initialize class org.apache.poi.xssf.usermodel.XSSFWorkbookType? ","title":"NoClassDefFoundError on org.apache.poi.xssf.usermodel.XSSFWorkbookType in AEM 6.5.16","body":"<p>I am upgrading the uber jar version to 6.5.15 after upgrading the version I was getting a compilation error. I followed <a href=\"https://stackoverflow.com/questions/63384557/issue-with-apache-poi-upgrading-aem-from-6-5-2-6-5-5\">Issue with apache poi - Upgrading AEM from 6.5.2 6.5.5</a> and resolved the compilation issue. But after fixing the compilation issue I am getting junit failure with the below error message.</p>\n<pre><code>GetFolderDetails.validateFolderName:121 Unexpected exception thrown: java.lang.NoClassDefFoundError: Could not initialize class org.apache.poi.xssf.usermodel.XSSFWorkbookType\n</code></pre>\n<p>This error was not appeared before, it started coming up after uber jar versions change. When I checked the java class I found that XSSFWorkbook is having problem. I see below code</p>\n<p>Workbook workbook = new org.apache.poi.xssf.usermodel.XSSFWorkbook();</p>\n<p>Any idea why idea why junit class is unable to initialize class org.apache.poi.xssf.usermodel.XSSFWorkbookType?</p>\n"},{"tags":["java","base64","thymeleaf","bytea"],"comments":[{"owner":{"account_id":2458519,"reputation":7657,"user_id":2143128,"display_name":"Ratul Sharker"},"score":0,"creation_date":1683449768,"post_id":76192905,"comment_id":134366095,"body_markdown":"Please include the exception stacktrace or log in the question.","body":"Please include the exception stacktrace or log in the question."},{"owner":{"account_id":25196975,"reputation":29,"user_id":19036367,"display_name":"no way"},"score":0,"creation_date":1683453380,"post_id":76192905,"comment_id":134366454,"body_markdown":"Included the exceptions, might include the whole stacktrace, but i think it is not necessary.","body":"Included the exceptions, might include the whole stacktrace, but i think it is not necessary."},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":2,"creation_date":1683461627,"post_id":76192905,"comment_id":134367405,"body_markdown":"I&#39;m afraid that is hardcoded limit in `spring`: https://github.com/spring-projects/spring-framework/blob/73d30dd875affac7dc69232bf4c6b183e0801c26/spring-expression/src/main/java/org/springframework/expression/spel/ast/OpPlus.java#L156, I believe, passing the final value via model attributes should help","body":"I&#39;m afraid that is hardcoded limit in <code>spring</code>: <a href=\"https://github.com/spring-projects/spring-framework/blob/73d30dd875affac7dc69232bf4c6b183e0801c26/spring-expression/src/main/java/org/springframework/expression/spel/ast/OpPlus.java#L156\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-framework/blob/&hellip;</a>, I believe, passing the final value via model attributes should help"}],"answers":[{"tags":[],"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683745867,"creation_date":1683744200,"answer_id":76221681,"question_id":76192905,"body_markdown":"This one is tricky! TY, @Andrey(, again;) for exactly pointing the &quot;issue&quot;. I&#39;m not sure, whether it is worth to open a spring issue/request/enhancement for this.\r\n\r\nBut:\r\n- (as it looks, github search) this check only applies on the (Spring EL) &quot;string concatenation&quot;\r\n- to &quot;circumvent&quot;, we can ... use thymeleaf features:\r\n  - Couldn&#39;t make it work with &quot;inline expressions&quot;, yet... (seems not to work with &quot;attrs&quot;)\r\n  - but with `th:attrappend` !! ;) (instead of Spring EL string concat;)\r\n\r\nResulting template:\r\n```lang-html\r\n&lt;img src=&quot;data:image/jpeg;base64,&quot; th:attrappend=&quot;src=${encodedImage}&quot; alt=&quot;Profile Picture&quot;&gt;\r\n```\r\n\r\n(Test) Controller used:\r\n```lang-java\r\n@Controller\r\nclass DemoController {\r\n\r\n\tfinal String encodedImage;\r\n\r\n\tpublic DemoController(\r\n\t\t\t@Value(&quot;classpath:/bigImage.jpg&quot;) /* source: https://github.com/samdutton/simpl/blob/main/bigimage/bigImage.jpg */\r\n\t\t\tResource bigPic) throws IOException {\r\n\t\tthis.encodedImage = Base64.getEncoder().encodeToString(bigPic.getContentAsByteArray());\r\n\t}\r\n\r\n\t@ModelAttribute(&quot;encodedImage&quot;)\r\n\tpublic String encodedImage() throws IOException {\r\n\t\treturn encodedImage;\r\n\t}\r\n\r\n\t@GetMapping(&quot;/test&quot;)\r\n\tpublic String test() {\r\n\t\treturn &quot;test&quot;;\r\n\t}\r\n}\r\n```\r\n### Generally\r\n&quot;These type of things&quot; belong &quot;into the caches of load balancers&quot;! (..and not into the &quot;memory&quot; (`byte[], Base64`...) of your &quot;back ends&quot; :)\r\n### Advanced\r\nIt&#39;d be nice to &quot;attach&quot; these (kind of) things (to html/http response) similar to https://www.thymeleaf.org/doc/articles/springmail.html, like:\r\n\r\n- template:\r\n  ```lang-html\r\n  &lt;img src=&quot;sample.png&quot; th:src=&quot;|cid:${imageResourceName}|&quot; /&gt;\r\n  ```\r\n- but unfortunately we can&#39;t (I didn&#39;t find it yet, as in `MimeMessage` `addInline`)\r\n\r\n### Another (Simple) Workaround\r\n```lang-java\r\n@ModelAttribute(&quot;encodedImageAttr&quot;)\r\npublic String encodedImageAttr() throws IOException {\r\n    return String.format(&quot;data:image/jpeg;base64,%s&quot;, encodedImage);;\r\n}\r\n```\r\n...serve the complete attribute value instead of the &quot;base64 part&quot;.\r\n\r\nTemplate then looks like:\r\n```lang-html\r\n&lt;img src=&quot;&quot; th:attr=&quot;src=${encodedImageAttr}&quot; alt=&quot;Profile Picture&quot;&gt;\r\n```\r\n\r\n(I also tried with template SpEL `th:attr=&quot;src=${#T(java.lang.String).format(&#39;data:image/jpeg;base64,%s&#39;, encodedImageAttr)}&quot;`, but failed due to:\r\n```lang-text\r\n...\r\nCaused by: org.attoparser.ParseException: Instantiation of new objects and access to static classes or parameters is forbidden in this context (template: &quot;test&quot; - line 6, col 17)\r\n\tat org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)\r\n\tat org.attoparser.MarkupParser.parse(MarkupParser.java:257)\r\n\tat org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)\r\n\t... 52 more\r\nCaused by: org.thymeleaf.exceptions.TemplateProcessingException: Instantiation of new objects and access to static classes or parameters is forbidden in this context (template: &quot;test&quot; - line 6, col 17)\r\n\tat org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.obtainComputedSpelExpression(SPELVariableExpressionEvaluator.java:309)\r\n\tat org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:182)\r\n\tat org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)\r\n\tat org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)\r\n\tat org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)\r\n...\r\n```\r\n)","title":"Is there a way to display image encoded into a string longer than 100 000 characters? (Java, Spring, Thymeleaf)","body":"<p>This one is tricky! TY, @Andrey(, again;) for exactly pointing the &quot;issue&quot;. I'm not sure, whether it is worth to open a spring issue/request/enhancement for this.</p>\n<p>But:</p>\n<ul>\n<li>(as it looks, github search) this check only applies on the (Spring EL) &quot;string concatenation&quot;</li>\n<li>to &quot;circumvent&quot;, we can ... use thymeleaf features:\n<ul>\n<li>Couldn't make it work with &quot;inline expressions&quot;, yet... (seems not to work with &quot;attrs&quot;)</li>\n<li>but with <code>th:attrappend</code> !! ;) (instead of Spring EL string concat;)</li>\n</ul>\n</li>\n</ul>\n<p>Resulting template:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;img src=&quot;data:image/jpeg;base64,&quot; th:attrappend=&quot;src=${encodedImage}&quot; alt=&quot;Profile Picture&quot;&gt;\n</code></pre>\n<p>(Test) Controller used:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Controller\nclass DemoController {\n\n    final String encodedImage;\n\n    public DemoController(\n            @Value(&quot;classpath:/bigImage.jpg&quot;) /* source: https://github.com/samdutton/simpl/blob/main/bigimage/bigImage.jpg */\n            Resource bigPic) throws IOException {\n        this.encodedImage = Base64.getEncoder().encodeToString(bigPic.getContentAsByteArray());\n    }\n\n    @ModelAttribute(&quot;encodedImage&quot;)\n    public String encodedImage() throws IOException {\n        return encodedImage;\n    }\n\n    @GetMapping(&quot;/test&quot;)\n    public String test() {\n        return &quot;test&quot;;\n    }\n}\n</code></pre>\n<h3>Generally</h3>\n<p>&quot;These type of things&quot; belong &quot;into the caches of load balancers&quot;! (..and not into the &quot;memory&quot; (<code>byte[], Base64</code>...) of your &quot;back ends&quot; :)</p>\n<h3>Advanced</h3>\n<p>It'd be nice to &quot;attach&quot; these (kind of) things (to html/http response) similar to <a href=\"https://www.thymeleaf.org/doc/articles/springmail.html\" rel=\"nofollow noreferrer\">https://www.thymeleaf.org/doc/articles/springmail.html</a>, like:</p>\n<ul>\n<li>template:\n<pre class=\"lang-html prettyprint-override\"><code>&lt;img src=&quot;sample.png&quot; th:src=&quot;|cid:${imageResourceName}|&quot; /&gt;\n</code></pre>\n</li>\n<li>but unfortunately we can't (I didn't find it yet, as in <code>MimeMessage</code> <code>addInline</code>)</li>\n</ul>\n<h3>Another (Simple) Workaround</h3>\n<pre class=\"lang-java prettyprint-override\"><code>@ModelAttribute(&quot;encodedImageAttr&quot;)\npublic String encodedImageAttr() throws IOException {\n    return String.format(&quot;data:image/jpeg;base64,%s&quot;, encodedImage);;\n}\n</code></pre>\n<p>...serve the complete attribute value instead of the &quot;base64 part&quot;.</p>\n<p>Template then looks like:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;img src=&quot;&quot; th:attr=&quot;src=${encodedImageAttr}&quot; alt=&quot;Profile Picture&quot;&gt;\n</code></pre>\n<p>(I also tried with template SpEL <code>th:attr=&quot;src=${#T(java.lang.String).format('data:image/jpeg;base64,%s', encodedImageAttr)}&quot;</code>, but failed due to:</p>\n<pre class=\"lang-text prettyprint-override\"><code>...\nCaused by: org.attoparser.ParseException: Instantiation of new objects and access to static classes or parameters is forbidden in this context (template: &quot;test&quot; - line 6, col 17)\n    at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)\n    at org.attoparser.MarkupParser.parse(MarkupParser.java:257)\n    at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)\n    ... 52 more\nCaused by: org.thymeleaf.exceptions.TemplateProcessingException: Instantiation of new objects and access to static classes or parameters is forbidden in this context (template: &quot;test&quot; - line 6, col 17)\n    at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.obtainComputedSpelExpression(SPELVariableExpressionEvaluator.java:309)\n    at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:182)\n    at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)\n    at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)\n    at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)\n...\n</code></pre>\n<p>)</p>\n"}],"owner":{"account_id":25196975,"reputation":29,"user_id":19036367,"display_name":"no way"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":389,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76221681,"answer_count":1,"score":1,"last_activity_date":1683745867,"creation_date":1683448588,"question_id":76192905,"body_markdown":"\r\n\r\nSo, i have a form that allows user to upload an image, which will be encoded with IOUtils.toByteArray and persisted to a database as a bytea. In a controller method i get this byte array and encode it to string:\r\n\r\n    @GetMapping(&quot;/{user_id}&quot;)\r\n    public String view(@PathVariable(&quot;user_id&quot;) Long user_id, Model model) {\r\n        User user = userService.getById(user_id);\r\n        model.addAttribute(&quot;user&quot;, user);\r\n        byte[] profilePictureBytes = user.getProfilePicture();\r\n    \r\n        if (profilePictureBytes != null) {\r\n            String encodedImage = Base64.getEncoder().encodeToString(profilePictureBytes);\r\n            model.addAttribute(&quot;encodedImage&quot;, encodedImage);\r\n        }\r\n        return &quot;user-page&quot;;\r\n    }\r\n\r\nOn a user-page html file i try to decode it like this:\r\n\r\n    &lt;img th:attr=&quot;src=${&#39;data:image/jpeg;base64,&#39; + encodedImage}&quot; alt=&quot;Profile Picture&quot;&gt;\r\n\r\nThis solution works for smaller images but throws an exception when the encoded image exceeds 100 000 characters:\r\n\r\n    org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: &quot;&#39;data:image/jpeg;base64,&#39; + encodedImage&quot; (template: &quot;user-page&quot; - line 27, col 6)\r\n\r\n    org.springframework.expression.spel.SpelEvaluationException: EL1078E: Concatenated string is too long, exceeding the threshold of &#39;100&#160;000&#39; characters\r\n\r\nIs there a way to circumvent this limit or should i change the whole logic of the program instead? Thank you.\r\n","title":"Is there a way to display image encoded into a string longer than 100 000 characters? (Java, Spring, Thymeleaf)","body":"<p>So, i have a form that allows user to upload an image, which will be encoded with IOUtils.toByteArray and persisted to a database as a bytea. In a controller method i get this byte array and encode it to string:</p>\n<pre><code>@GetMapping(&quot;/{user_id}&quot;)\npublic String view(@PathVariable(&quot;user_id&quot;) Long user_id, Model model) {\n    User user = userService.getById(user_id);\n    model.addAttribute(&quot;user&quot;, user);\n    byte[] profilePictureBytes = user.getProfilePicture();\n\n    if (profilePictureBytes != null) {\n        String encodedImage = Base64.getEncoder().encodeToString(profilePictureBytes);\n        model.addAttribute(&quot;encodedImage&quot;, encodedImage);\n    }\n    return &quot;user-page&quot;;\n}\n</code></pre>\n<p>On a user-page html file i try to decode it like this:</p>\n<pre><code>&lt;img th:attr=&quot;src=${'data:image/jpeg;base64,' + encodedImage}&quot; alt=&quot;Profile Picture&quot;&gt;\n</code></pre>\n<p>This solution works for smaller images but throws an exception when the encoded image exceeds 100 000 characters:</p>\n<pre><code>org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: &quot;'data:image/jpeg;base64,' + encodedImage&quot; (template: &quot;user-page&quot; - line 27, col 6)\n\norg.springframework.expression.spel.SpelEvaluationException: EL1078E: Concatenated string is too long, exceeding the threshold of '100Â 000' characters\n</code></pre>\n<p>Is there a way to circumvent this limit or should i change the whole logic of the program instead? Thank you.</p>\n"},{"tags":["java","mysql","spring-data-jpa","orm","hibernate-criteria"],"comments":[{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1683746091,"post_id":76221795,"comment_id":134415670,"body_markdown":"&quot;two more joins which should have been covered in left join&quot;, actually they should not. `freelancerProposal.fetch(&quot;freelancerUserId&quot;, JoinType.LEFT)` - you are asking HBN to add extra join in order to return extra data within single query, `cb.equal(root.get(&quot;freelancerProposalList&quot;).get(&quot;freelancerUserId&quot;).get(&quot;userId&quot;))` - is just a filter, i.e. &quot;return job postings where particular user was somehow participating&quot;","body":"&quot;two more joins which should have been covered in left join&quot;, actually they should not. <code>freelancerProposal.fetch(&quot;freelancerUserId&quot;, JoinType.LEFT)</code> - you are asking HBN to add extra join in order to return extra data within single query, <code>cb.equal(root.get(&quot;freelancerProposalList&quot;).get(&quot;freelancerU&zwnj;&#8203;serId&quot;).get(&quot;userId&quot;&zwnj;&#8203;))</code> - is just a filter, i.e. &quot;return job postings where particular user was somehow participating&quot;"},{"owner":{"account_id":10306032,"reputation":1,"user_id":7603245,"display_name":"Kishan Galgotra"},"score":0,"creation_date":1683749503,"post_id":76221795,"comment_id":134416323,"body_markdown":"but should not they have been left join rather than join ?","body":"but should not they have been left join rather than join ?"}],"owner":{"account_id":10306032,"reputation":1,"user_id":7603245,"display_name":"Kishan Galgotra"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683745767,"creation_date":1683745275,"question_id":76221795,"body_markdown":"Am trying to fetch data using Criteria Builder .\r\nBut query is getting generated with two more joins which should have been covered in left join.\r\n\r\nPlease check my code below.\r\n==========================\r\n```\r\n CriteriaBuilder criteriaBuilder = entityManagerRead.getCriteriaBuilder();\r\n        CriteriaQuery&lt;ClientPostedJobDataResponse&gt; criteriaQuery = criteriaBuilder.createQuery(ClientPostedJobDataResponse.class);\r\n        Root&lt;ClientPostedJobData&gt; root = criteriaQuery.from(ClientPostedJobData.class);\r\n\r\n        Specification&lt;ClientPostedJobData&gt; dataSpecification = ClientPostedJobsDataSpecificationBuilder.specificationBuilder(request);\r\n        Predicate predicate = dataSpecification.toPredicate(root, criteriaQuery, criteriaBuilder);\r\n        if (predicate != null)\r\n            criteriaQuery.where(predicate);\r\n\r\n        Join&lt;Object, Object&gt; user = root.join(&quot;clientId&quot;, JoinType.LEFT);\r\n        Join&lt;Object, Object&gt; clientProposalList = root.join(&quot;freelancerProposalList&quot;, JoinType.LEFT);\r\n\r\n        criteriaQuery.multiselect(root.get(&quot;jobId&quot;), root.get(&quot;jobName&quot;), user.get(&quot;userId&quot;), root.get(&quot;message&quot;),\r\n                root.get(&quot;offeredAmount&quot;),\r\n                criteriaBuilder.function(&quot;DATE_FORMAT&quot;, LocalDate.class, root.get(&quot;createdOn&quot;)\r\n                        , criteriaBuilder.literal(&quot;%Y-%m-%d&quot;))\r\n                , root.get(&quot;expiredOn&quot;), root.get(&quot;active&quot;),\r\n                criteriaBuilder.coalesce(criteriaBuilder.countDistinct(clientProposalList.get(&quot;id&quot;)), 0));\r\n\r\n        criteriaQuery.orderBy(Sort.Direction.ASC.equals(request.getDirection()) ? criteriaBuilder.asc(\r\n                root.get(request.getOrderBy())) : criteriaBuilder.desc(root.get(request.getOrderBy())));\r\n        criteriaQuery.groupBy(root.get(&quot;jobId&quot;));\r\n\r\n        TypedQuery&lt;ClientPostedJobDataResponse&gt; query = entityManagerRead.createQuery(criteriaQuery);\r\n        List&lt;ClientPostedJobDataResponse&gt; response = query.setFirstResult(request.getOffSet()).setMaxResults(\r\n                request.getLimit()).getResultList();\r\n        log.info(&quot;fetched jobs :{}&quot;, response.size());\r\n        long recordCount = response.size() &lt; request.getLimit() ? request.getOffSet() +\r\n                response.size() : clientPostedJobDataRepo.count(dataSpecification);\r\n```\r\n\r\nNow below is my Specification code :\r\n====================================\r\n```\r\npublic class ClientPostedJobsDataSpecificationBuilder {\r\n\r\n    private ClientPostedJobsDataSpecificationBuilder() {\r\n        throw new IllegalStateException(&quot;Client Posted Specification class cannot be initialized.&quot;);\r\n    }\r\n\r\n    public static Specification&lt;ClientPostedJobData&gt; specificationBuilder(ClientPostedJobsDataSearchRequest request) {\r\n        List&lt;Specification&lt;ClientPostedJobData&gt;&gt; specifications = new ArrayList&lt;&gt;();\r\n        specifications.add(Specification.where(fetchJoinEntities()));\r\n\r\n        if (GeneralUtils.isNotNull(request.getJobId()))\r\n            specifications.add((root, cq, cb) -&gt; cb.equal(root.get(&quot;jobId&quot;), request.getJobId()));\r\n\r\n        if (GeneralUtils.isNotNull(request.getClientId()))\r\n            specifications.add((root, cq, cb) -&gt; cb.equal(root.get(&quot;clientId&quot;).get(&quot;userId&quot;), request.getClientId()));\r\n\r\n        if (GeneralUtils.isNotNull(request.getExpiredOn()))\r\n            specifications.add((root, cq, cb) -&gt; cb.equal(root.get(&quot;expiredOn&quot;), request.getExpiredOn()));\r\n\r\n        if (GeneralUtils.isNotNull(request.getOfferedAmount()))\r\n            specifications.add((root, cq, cb) -&gt; cb.equal(root.get(&quot;offeredAmount&quot;), request.getOfferedAmount()));\r\n\r\n        if (GeneralUtils.isNotNull(request.getActive()))\r\n            specifications.add((root, cq, cb) -&gt; cb.equal(root.get(&quot;active&quot;), request.getActive()));\r\n\r\n        if (GeneralUtils.isNotNull(request.getUserId()))\r\n            specifications.add((root, cq, cb) -&gt; cb.equal(root.get(&quot;freelancerProposalList&quot;).get(&quot;freelancerUserId&quot;).get(&quot;userId&quot;),\r\n                    request.getUserId()));\r\n\r\n        return Specifications.combineWithAnd(specifications);\r\n    }\r\n\r\n    private static Specification&lt;ClientPostedJobData&gt; fetchJoinEntities() {\r\n        return (root, cq, cb) -&gt; {\r\n            if (ClientPostedJobData.class == cq.getResultType()) {\r\n                cq.distinct(true);\r\n                root.fetch(&quot;clientId&quot;, JoinType.LEFT);\r\n                Fetch&lt;Object, Object&gt; freelancerProposal = root.fetch(&quot;freelancerProposalList&quot;, JoinType.LEFT);\r\n                freelancerProposal.fetch(&quot;freelancerUserId&quot;, JoinType.LEFT);\r\n            }\r\n            return cb.conjunction();\r\n        };\r\n    }\r\n}\r\n```\r\n\r\nQuery Getting generated for this :\r\n====================================\r\n```\r\n  select\r\n        c1_0.job_id,\r\n        c1_0.job_name,\r\n        c2_0.user_id,\r\n        c1_0.message,\r\n        c1_0.offered_amount,\r\n        DATE_FORMAT(c1_0.created_on,&#39;%Y-%m-%d&#39;),\r\n        c1_0.expired_on,\r\n        c1_0.active,\r\n        coalesce(count(distinct f1_0.id),0) \r\n    from\r\n        posted_job_data c1_0 \r\n    left join\r\n        user c2_0 \r\n            on c2_0.id=c1_0.client_id \r\n    left join\r\n        client_proposal f1_0 \r\n            on c1_0.id=f1_0.posted_job_id \r\n            and (\r\n                f1_0.deleted = 0\r\n            )  \r\n    join\r\n        client_proposal f2_0 \r\n            on c1_0.id=f2_0.posted_job_id \r\n    join\r\n        user f3_0 \r\n            on f3_0.id=f2_0.freelancer_user_id \r\n    where\r\n        (\r\n            c1_0.deleted=0\r\n        ) \r\n        and 1=1 \r\n        and f3_0.user_id=&#39;OWN473329FJU&#39;\r\n    group by\r\n        1 \r\n    order by\r\n        c1_0.id desc limit 0,\r\n        100\r\n```\r\n\r\n\r\n\r\nI have tried checking on internet and lots of debugging by myself , but tuck on it for more than three days.\r\n\r\n","title":"Criteria Builder Query generating normal join rather than left join in where clause","body":"<p>Am trying to fetch data using Criteria Builder .\nBut query is getting generated with two more joins which should have been covered in left join.</p>\n<h1>Please check my code below.</h1>\n<pre><code> CriteriaBuilder criteriaBuilder = entityManagerRead.getCriteriaBuilder();\n        CriteriaQuery&lt;ClientPostedJobDataResponse&gt; criteriaQuery = criteriaBuilder.createQuery(ClientPostedJobDataResponse.class);\n        Root&lt;ClientPostedJobData&gt; root = criteriaQuery.from(ClientPostedJobData.class);\n\n        Specification&lt;ClientPostedJobData&gt; dataSpecification = ClientPostedJobsDataSpecificationBuilder.specificationBuilder(request);\n        Predicate predicate = dataSpecification.toPredicate(root, criteriaQuery, criteriaBuilder);\n        if (predicate != null)\n            criteriaQuery.where(predicate);\n\n        Join&lt;Object, Object&gt; user = root.join(&quot;clientId&quot;, JoinType.LEFT);\n        Join&lt;Object, Object&gt; clientProposalList = root.join(&quot;freelancerProposalList&quot;, JoinType.LEFT);\n\n        criteriaQuery.multiselect(root.get(&quot;jobId&quot;), root.get(&quot;jobName&quot;), user.get(&quot;userId&quot;), root.get(&quot;message&quot;),\n                root.get(&quot;offeredAmount&quot;),\n                criteriaBuilder.function(&quot;DATE_FORMAT&quot;, LocalDate.class, root.get(&quot;createdOn&quot;)\n                        , criteriaBuilder.literal(&quot;%Y-%m-%d&quot;))\n                , root.get(&quot;expiredOn&quot;), root.get(&quot;active&quot;),\n                criteriaBuilder.coalesce(criteriaBuilder.countDistinct(clientProposalList.get(&quot;id&quot;)), 0));\n\n        criteriaQuery.orderBy(Sort.Direction.ASC.equals(request.getDirection()) ? criteriaBuilder.asc(\n                root.get(request.getOrderBy())) : criteriaBuilder.desc(root.get(request.getOrderBy())));\n        criteriaQuery.groupBy(root.get(&quot;jobId&quot;));\n\n        TypedQuery&lt;ClientPostedJobDataResponse&gt; query = entityManagerRead.createQuery(criteriaQuery);\n        List&lt;ClientPostedJobDataResponse&gt; response = query.setFirstResult(request.getOffSet()).setMaxResults(\n                request.getLimit()).getResultList();\n        log.info(&quot;fetched jobs :{}&quot;, response.size());\n        long recordCount = response.size() &lt; request.getLimit() ? request.getOffSet() +\n                response.size() : clientPostedJobDataRepo.count(dataSpecification);\n</code></pre>\n<h1>Now below is my Specification code :</h1>\n<pre><code>public class ClientPostedJobsDataSpecificationBuilder {\n\n    private ClientPostedJobsDataSpecificationBuilder() {\n        throw new IllegalStateException(&quot;Client Posted Specification class cannot be initialized.&quot;);\n    }\n\n    public static Specification&lt;ClientPostedJobData&gt; specificationBuilder(ClientPostedJobsDataSearchRequest request) {\n        List&lt;Specification&lt;ClientPostedJobData&gt;&gt; specifications = new ArrayList&lt;&gt;();\n        specifications.add(Specification.where(fetchJoinEntities()));\n\n        if (GeneralUtils.isNotNull(request.getJobId()))\n            specifications.add((root, cq, cb) -&gt; cb.equal(root.get(&quot;jobId&quot;), request.getJobId()));\n\n        if (GeneralUtils.isNotNull(request.getClientId()))\n            specifications.add((root, cq, cb) -&gt; cb.equal(root.get(&quot;clientId&quot;).get(&quot;userId&quot;), request.getClientId()));\n\n        if (GeneralUtils.isNotNull(request.getExpiredOn()))\n            specifications.add((root, cq, cb) -&gt; cb.equal(root.get(&quot;expiredOn&quot;), request.getExpiredOn()));\n\n        if (GeneralUtils.isNotNull(request.getOfferedAmount()))\n            specifications.add((root, cq, cb) -&gt; cb.equal(root.get(&quot;offeredAmount&quot;), request.getOfferedAmount()));\n\n        if (GeneralUtils.isNotNull(request.getActive()))\n            specifications.add((root, cq, cb) -&gt; cb.equal(root.get(&quot;active&quot;), request.getActive()));\n\n        if (GeneralUtils.isNotNull(request.getUserId()))\n            specifications.add((root, cq, cb) -&gt; cb.equal(root.get(&quot;freelancerProposalList&quot;).get(&quot;freelancerUserId&quot;).get(&quot;userId&quot;),\n                    request.getUserId()));\n\n        return Specifications.combineWithAnd(specifications);\n    }\n\n    private static Specification&lt;ClientPostedJobData&gt; fetchJoinEntities() {\n        return (root, cq, cb) -&gt; {\n            if (ClientPostedJobData.class == cq.getResultType()) {\n                cq.distinct(true);\n                root.fetch(&quot;clientId&quot;, JoinType.LEFT);\n                Fetch&lt;Object, Object&gt; freelancerProposal = root.fetch(&quot;freelancerProposalList&quot;, JoinType.LEFT);\n                freelancerProposal.fetch(&quot;freelancerUserId&quot;, JoinType.LEFT);\n            }\n            return cb.conjunction();\n        };\n    }\n}\n</code></pre>\n<h1>Query Getting generated for this :</h1>\n<pre><code>  select\n        c1_0.job_id,\n        c1_0.job_name,\n        c2_0.user_id,\n        c1_0.message,\n        c1_0.offered_amount,\n        DATE_FORMAT(c1_0.created_on,'%Y-%m-%d'),\n        c1_0.expired_on,\n        c1_0.active,\n        coalesce(count(distinct f1_0.id),0) \n    from\n        posted_job_data c1_0 \n    left join\n        user c2_0 \n            on c2_0.id=c1_0.client_id \n    left join\n        client_proposal f1_0 \n            on c1_0.id=f1_0.posted_job_id \n            and (\n                f1_0.deleted = 0\n            )  \n    join\n        client_proposal f2_0 \n            on c1_0.id=f2_0.posted_job_id \n    join\n        user f3_0 \n            on f3_0.id=f2_0.freelancer_user_id \n    where\n        (\n            c1_0.deleted=0\n        ) \n        and 1=1 \n        and f3_0.user_id='OWN473329FJU'\n    group by\n        1 \n    order by\n        c1_0.id desc limit 0,\n        100\n</code></pre>\n<p>I have tried checking on internet and lots of debugging by myself , but tuck on it for more than three days.</p>\n"},{"tags":["java","serialization","io"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1683777904,"post_id":76221832,"comment_id":134419419,"body_markdown":"You need to create a new `ObjectOutputStream` per block, and ditto `ObjectInputStream` when reading. But it&#39;s hard to see the point of all this. Specifically, at best you are wasting space inside each 32k block, and at worst you are losing the benefit of serialization reference sharing every time you start a new block. Object serialization is inherently, err, serial in nature. You can&#39;t random-access it. Use a `FileOutputStream`, and a `FileInputStream` when reading.","body":"You need to create a new <code>ObjectOutputStream</code> per block, and ditto <code>ObjectInputStream</code> when reading. But it&#39;s hard to see the point of all this. Specifically, at best you are wasting space inside each 32k block, and at worst you are losing the benefit of serialization reference sharing every time you start a new block. Object serialization is inherently, err, serial in nature. You can&#39;t random-access it. Use a <code>FileOutputStream</code>, and a <code>FileInputStream</code> when reading."},{"owner":{"account_id":28571799,"reputation":1,"user_id":21873918,"display_name":"SpirosKarv"},"score":0,"creation_date":1683798031,"post_id":76221832,"comment_id":134422883,"body_markdown":"@user207421 After that I&#39;m supposed to access the file with an R* Tree, so that&#39;s why I want it to use random access. So I guess I should just make it without object serialization?","body":"@user207421 After that I&#39;m supposed to access the file with an R* Tree, so that&#39;s why I want it to use random access. So I guess I should just make it without object serialization?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1683810680,"post_id":76221832,"comment_id":134425727,"body_markdown":"I would say so. You&#39;re beyond the limits of the technology.","body":"I would say so. You&#39;re beyond the limits of the technology."}],"owner":{"account_id":28571799,"reputation":1,"user_id":21873918,"display_name":"SpirosKarv"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683745734,"creation_date":1683745734,"question_id":76221832,"body_markdown":"I&#39;m serializing (I hope) objects and adding them to a RandomAccessFile (1 object = 1 block). I need each block that I add to be just under 32KB. Although this process is completed, I can&#39;t read anything from the file. I always get a java.io.StreamCorruptedException: invalid stream header: 0000000 error.\r\n\r\nHere&#39;s the code:\r\n\r\n```\r\nRandomAccessFile datafile = new RandomAccessFile(&quot;src/main/java/datafile&quot;, &quot;rw&quot;);\r\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n        ObjectOutputStream stream = new ObjectOutputStream(baos);\r\n\r\n        DataBlock prevBlock = null;\r\n        boolean blockWritten = false;\r\n        int ID = 1;\r\n        int i = 0;\r\n        ArrayList&lt;Integer&gt; sizes = new ArrayList&lt;&gt;();\r\n\r\n        do {\r\n\r\n            ArrayList&lt;DataRecord&gt; blockRecords = new ArrayList&lt;&gt;();\r\n            int size = 0;\r\n\r\n            do {\r\n                DataBlock block = new DataBlock(ID, blockRecords);\r\n                stream.writeObject(block);\r\n                if (baos.toByteArray().length &gt;= 32000) { //Block full\r\n\r\n                    stream.reset();\r\n                    baos.reset();\r\n                    stream.writeObject(prevBlock);\r\n                    System.out.println(prevBlock.getBlockData());\r\n                    stream.flush();\r\n                    datafile.seek(ID * 32000L);\r\n                    datafile.write(baos.toByteArray());\r\n                    prevBlock = null;\r\n                    ID++;\r\n                    blockWritten = true;\r\n\r\n                } else {  //Adds more data to the block since it hasn&#39;t reached its limit yet\r\n\r\n                    stream.reset();\r\n                    baos.reset();\r\n                    prevBlock = block;\r\n                    Node currentItem = nl.item(i);\r\n                    String name = currentItem.getAttributes().getNamedItem(&quot;id&quot;).getNodeValue();\r\n                    float latitude = Float.parseFloat(currentItem.getAttributes().getNamedItem(&quot;lat&quot;).getNodeValue());\r\n                    float longitude = Float.parseFloat(currentItem.getAttributes().getNamedItem(&quot;lon&quot;).getNodeValue());\r\n                    Float[] Coords = {latitude, longitude};\r\n                    DataRecord record = new DataRecord(i + 1, name, Coords);\r\n                    blockRecords.add(record);\r\n                    size++;\r\n                    i++;\r\n                }\r\n            }\r\n            while (!blockWritten &amp;&amp; i &lt; nl.getLength());\r\n\r\n            stream.reset();\r\n            baos.reset();\r\n            blockWritten = false;\r\n            sizes.add(size);\r\n        }\r\n        while (i &lt; nl.getLength());\r\n```\r\n\r\nTried using different kinds of input streams but all of them gave me an error. Ideally, I&#39;d like to access the file with an offset and read the block that&#39;s there.","title":"How do I deserialize objects added to a RandomAccessFile?","body":"<p>I'm serializing (I hope) objects and adding them to a RandomAccessFile (1 object = 1 block). I need each block that I add to be just under 32KB. Although this process is completed, I can't read anything from the file. I always get a java.io.StreamCorruptedException: invalid stream header: 0000000 error.</p>\n<p>Here's the code:</p>\n<pre><code>RandomAccessFile datafile = new RandomAccessFile(&quot;src/main/java/datafile&quot;, &quot;rw&quot;);\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        ObjectOutputStream stream = new ObjectOutputStream(baos);\n\n        DataBlock prevBlock = null;\n        boolean blockWritten = false;\n        int ID = 1;\n        int i = 0;\n        ArrayList&lt;Integer&gt; sizes = new ArrayList&lt;&gt;();\n\n        do {\n\n            ArrayList&lt;DataRecord&gt; blockRecords = new ArrayList&lt;&gt;();\n            int size = 0;\n\n            do {\n                DataBlock block = new DataBlock(ID, blockRecords);\n                stream.writeObject(block);\n                if (baos.toByteArray().length &gt;= 32000) { //Block full\n\n                    stream.reset();\n                    baos.reset();\n                    stream.writeObject(prevBlock);\n                    System.out.println(prevBlock.getBlockData());\n                    stream.flush();\n                    datafile.seek(ID * 32000L);\n                    datafile.write(baos.toByteArray());\n                    prevBlock = null;\n                    ID++;\n                    blockWritten = true;\n\n                } else {  //Adds more data to the block since it hasn't reached its limit yet\n\n                    stream.reset();\n                    baos.reset();\n                    prevBlock = block;\n                    Node currentItem = nl.item(i);\n                    String name = currentItem.getAttributes().getNamedItem(&quot;id&quot;).getNodeValue();\n                    float latitude = Float.parseFloat(currentItem.getAttributes().getNamedItem(&quot;lat&quot;).getNodeValue());\n                    float longitude = Float.parseFloat(currentItem.getAttributes().getNamedItem(&quot;lon&quot;).getNodeValue());\n                    Float[] Coords = {latitude, longitude};\n                    DataRecord record = new DataRecord(i + 1, name, Coords);\n                    blockRecords.add(record);\n                    size++;\n                    i++;\n                }\n            }\n            while (!blockWritten &amp;&amp; i &lt; nl.getLength());\n\n            stream.reset();\n            baos.reset();\n            blockWritten = false;\n            sizes.add(size);\n        }\n        while (i &lt; nl.getLength());\n</code></pre>\n<p>Tried using different kinds of input streams but all of them gave me an error. Ideally, I'd like to access the file with an offset and read the block that's there.</p>\n"},{"tags":["java","sql","xml","android-studio","sql-delete"],"comments":[{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1624772451,"post_id":68148145,"comment_id":120445563,"body_markdown":"So obviously table `student` doesn&#39;t have a column named `rollno` in the database you&#39;re connecting to. What is your question?","body":"So obviously table <code>student</code> doesn&#39;t have a column named <code>rollno</code> in the database you&#39;re connecting to. What is your question?"}],"answers":[{"tags":[],"owner":{"account_id":11822980,"reputation":15437,"user_id":8651601,"display_name":"Kazi Mohammad Ali Nur Romel"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683745274,"creation_date":1683745274,"answer_id":76221794,"question_id":68148145,"body_markdown":"Please check the database. There might be no column named rollno in student table. Change the column to correct one and this problem should be resolved.\r\n\r\nIf the problem still exists then please share the code of entire code block instead of just error.","title":"It is an error occured in sql part while performing crud operations in android studio","body":"<p>Please check the database. There might be no column named rollno in student table. Change the column to correct one and this problem should be resolved.</p>\n<p>If the problem still exists then please share the code of entire code block instead of just error.</p>\n"}],"owner":{"account_id":22062917,"reputation":21,"user_id":16325257,"display_name":"SANDEEP REDDY"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":3,"up_vote_count":2,"answer_count":1,"score":-1,"last_activity_date":1683745274,"creation_date":1624770136,"question_id":68148145,"body_markdown":"    2021-06-27 10:21:35.255 11487-11487/com.example.studentinfodb E/SQLiteLog: (1) no such column: rollno in &quot;SELECT * FROM student WHERE rollno=&#39;1&#39;&quot;\r\n    2021-06-27 10:21:35.257 11487-11487/com.example.studentinfodb E/AndroidRuntime: FATAL EXCEPTION: main\r\n        Process: com.example.studentinfodb, PID: 11487\r\n        android.database.sqlite.SQLiteException: no such column: rollno (code 1 SQLITE_ERROR): , while compiling: SELECT * FROM student WHERE rollno=&#39;1&#39;\r\n            at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)\r\n            at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:1045)\r\n            at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:652)\r\n            at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:590)\r\n            at android.database.sqlite.SQLiteProgram.&lt;init&gt;(SQLiteProgram.java:61)\r\n            at android.database.sqlite.SQLiteQuery.&lt;init&gt;(SQLiteQuery.java:37)\r\n            at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:46)\r\n            at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1545)\r\n            at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1484)\r\n            at com.example.studentinfodb.MainActivity.onClick(MainActivity.java:76)\r\n            at android.view.View.performClick(View.java:7448)\r\n            at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1119)\r\n            at android.view.View.performClickInternal(View.java:7425)\r\n            at android.view.View.access$3600(View.java:810)\r\n            at android.view.View$PerformClick.run(View.java:28305)\r\n            at android.os.Handler.handleCallback(Handler.java:938)\r\n            at android.os.Handler.dispatchMessage(Handler.java:99)\r\n            at android.os.Looper.loop(Looper.java:223)\r\n            at android.app.ActivityThread.main(ActivityThread.java:7656)\r\n            at java.lang.reflect.Method.invoke(Native Method)\r\n            at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\r\n            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\r\n\r\n","title":"It is an error occured in sql part while performing crud operations in android studio","body":"<pre><code>2021-06-27 10:21:35.255 11487-11487/com.example.studentinfodb E/SQLiteLog: (1) no such column: rollno in &quot;SELECT * FROM student WHERE rollno='1'&quot;\n2021-06-27 10:21:35.257 11487-11487/com.example.studentinfodb E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.studentinfodb, PID: 11487\n    android.database.sqlite.SQLiteException: no such column: rollno (code 1 SQLITE_ERROR): , while compiling: SELECT * FROM student WHERE rollno='1'\n        at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)\n        at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:1045)\n        at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:652)\n        at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:590)\n        at android.database.sqlite.SQLiteProgram.&lt;init&gt;(SQLiteProgram.java:61)\n        at android.database.sqlite.SQLiteQuery.&lt;init&gt;(SQLiteQuery.java:37)\n        at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:46)\n        at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1545)\n        at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1484)\n        at com.example.studentinfodb.MainActivity.onClick(MainActivity.java:76)\n        at android.view.View.performClick(View.java:7448)\n        at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1119)\n        at android.view.View.performClickInternal(View.java:7425)\n        at android.view.View.access$3600(View.java:810)\n        at android.view.View$PerformClick.run(View.java:28305)\n        at android.os.Handler.handleCallback(Handler.java:938)\n        at android.os.Handler.dispatchMessage(Handler.java:99)\n        at android.os.Looper.loop(Looper.java:223)\n        at android.app.ActivityThread.main(ActivityThread.java:7656)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\n</code></pre>\n"},{"tags":["java","spring","consul","feign","openfeign"],"owner":{"account_id":7683392,"reputation":31,"user_id":5821987,"accept_rate":60,"display_name":"Filip Pitak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683745221,"creation_date":1683745221,"question_id":76221788,"body_markdown":"im trying to setup a proxy to multiple spring controllers using feignclients. \r\n\r\nA very simple explanation of the architecture is that im creating spring microservices and using consul for service discovery and a key-value store (mainly used for registering several instances of the same service, later loadbalanced). \r\n\r\nThe spring service has several public api (e.g. UserApi &amp; UserAuthApi in my case): \r\n```\r\npublic interface UserAuthApi {\r\n    \r\n    @Deprecated\r\n    @GetMapping(&quot;/auth/login&quot;)\r\n    UserAuthDto getAuthUserByEmail(@RequestParam(&quot;email&quot;) String email);\r\n...\r\n```\r\n\r\nIn a different service I would like to setup boilerplate Feignclients using these api&#39;s. I have one running and working for UserAuthApi:\r\n\r\n```\r\n@FeignClient(name = &quot;mcs-user&quot;, path = &quot;/user&quot;)\r\npublic interface UserAuthApiProxy extends UserAuthApi {\r\n}\r\n```\r\nHowever I am unable to use this principle when trying to create a proxy for the other api:\r\n```\r\n@FeignClient(name = &quot;mcs-user&quot;, path = &quot;/user&quot;)\r\npublic interface UserApiProxy extends UserApi {\r\n}\r\n```\r\nInstead as a temp. workaround im able remove the &#39;extends UserApi&#39; and copy the method definition within my proxy. I couldnt find any information or examples of using multiple boilerplate apis from one service like i am trying to make. I have tried setting &#39;-parameters&#39; when researching solutions to the error shown, but it didnt affect anything. \r\n\r\nAs well I tried creating a @RequestMapping(...) for these interfaces to differentiate their paths, and within feignclient interface append the value, but didnt change at all. \r\nBesides that, I do have &#39;spring.main.allow-bean-definition-overriding=true&#39; in my application properties as well.\r\n\r\n```\r\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;userController&#39;: Unsatisfied dependency expressed through field &#39;userService&#39;: Error creating bean with name &#39;userService&#39;: Unsatisfied dependency expressed through field &#39;userApi&#39;: Error creating bean with name &#39;sk.fmfi.listng.rest.proxy.user.UserApiProxy&#39;: FactoryBean threw exception on object creation\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:713) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:693) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:133) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:482) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:917) ~[spring-context-6.0.7.jar:6.0.7]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[spring-context-6.0.7.jar:6.0.7]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.0.5.jar:3.0.5]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:732) ~[spring-boot-3.0.5.jar:3.0.5]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434) ~[spring-boot-3.0.5.jar:3.0.5]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:310) ~[spring-boot-3.0.5.jar:3.0.5]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1304) ~[spring-boot-3.0.5.jar:3.0.5]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1293) ~[spring-boot-3.0.5.jar:3.0.5]\r\n\tat sk.fmfi.listng.rest.RestApplication.main(RestApplication.java:17) ~[classes/:na]\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;userService&#39;: Unsatisfied dependency expressed through field &#39;userApi&#39;: Error creating bean with name &#39;sk.fmfi.listng.rest.proxy.user.UserApiProxy&#39;: FactoryBean threw exception on object creation\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:713) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:693) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:133) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:482) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:710) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\t... 20 common frames omitted\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;sk.fmfi.listng.rest.proxy.user.UserApiProxy&#39;: FactoryBean threw exception on object creation\r\n\tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:154) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:90) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1823) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getObjectForBeanInstance(AbstractAutowireCapableBeanFactory.java:1273) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:259) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1640) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1380) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:710) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\t... 34 common frames omitted\r\nCaused by: java.lang.IllegalStateException: RequestParam.value() was empty on parameter 1\r\n\tat feign.Util.checkState(Util.java:136) ~[feign-core-12.1.jar:na]\r\n\tat org.springframework.cloud.openfeign.annotation.RequestParamParameterProcessor.processArgument(RequestParamParameterProcessor.java:63) ~[spring-cloud-openfeign-core-4.0.2.jar:4.0.2]\r\n\tat org.springframework.cloud.openfeign.support.SpringMvcContract.processAnnotationsOnParameter(SpringMvcContract.java:298) ~[spring-cloud-openfeign-core-4.0.2.jar:4.0.2]\r\n\tat feign.Contract$BaseContract.parseAndValidateMetadata(Contract.java:126) ~[feign-core-12.1.jar:na]\r\n\tat org.springframework.cloud.openfeign.support.SpringMvcContract.parseAndValidateMetadata(SpringMvcContract.java:197) ~[spring-cloud-openfeign-core-4.0.2.jar:4.0.2]\r\n\tat feign.Contract$BaseContract.parseAndValidateMetadata(Contract.java:65) ~[feign-core-12.1.jar:na]\r\n\tat feign.ReflectiveFeign$ParseHandlersByName.apply(ReflectiveFeign.java:142) ~[feign-core-12.1.jar:na]\r\n\tat feign.ReflectiveFeign.newInstance(ReflectiveFeign.java:58) ~[feign-core-12.1.jar:na]\r\n\tat feign.ReflectiveFeign.newInstance(ReflectiveFeign.java:50) ~[feign-core-12.1.jar:na]\r\n\tat feign.Feign$Builder.target(Feign.java:197) ~[feign-core-12.1.jar:na]\r\n\tat org.springframework.cloud.openfeign.DefaultTargeter.target(DefaultTargeter.java:30) ~[spring-cloud-openfeign-core-4.0.2.jar:4.0.2]\r\n\tat org.springframework.cloud.openfeign.FeignClientFactoryBean.loadBalance(FeignClientFactoryBean.java:398) ~[spring-cloud-openfeign-core-4.0.2.jar:4.0.2]\r\n\tat org.springframework.cloud.openfeign.FeignClientFactoryBean.getTarget(FeignClientFactoryBean.java:446) ~[spring-cloud-openfeign-core-4.0.2.jar:4.0.2]\r\n\tat org.springframework.cloud.openfeign.FeignClientFactoryBean.getObject(FeignClientFactoryBean.java:421) ~[spring-cloud-openfeign-core-4.0.2.jar:4.0.2]\r\n\tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:148) ~[spring-beans-6.0.7.jar:6.0.7]\r\n\t... 45 common frames omitted\r\n```\r\n\r\nIs there a way to achieve these boilerplate apis from one service without having to copy the method definition from the target api to my feignclient interface (obviously this means a problem with having to maintain code at two places at the same time)? \r\n\r\nThank you in advance for any comments and help :)","title":"Multiple feignclients using boilerplate interfaces from single spring service","body":"<p>im trying to setup a proxy to multiple spring controllers using feignclients.</p>\n<p>A very simple explanation of the architecture is that im creating spring microservices and using consul for service discovery and a key-value store (mainly used for registering several instances of the same service, later loadbalanced).</p>\n<p>The spring service has several public api (e.g. UserApi &amp; UserAuthApi in my case):</p>\n<pre><code>public interface UserAuthApi {\n    \n    @Deprecated\n    @GetMapping(&quot;/auth/login&quot;)\n    UserAuthDto getAuthUserByEmail(@RequestParam(&quot;email&quot;) String email);\n...\n</code></pre>\n<p>In a different service I would like to setup boilerplate Feignclients using these api's. I have one running and working for UserAuthApi:</p>\n<pre><code>@FeignClient(name = &quot;mcs-user&quot;, path = &quot;/user&quot;)\npublic interface UserAuthApiProxy extends UserAuthApi {\n}\n</code></pre>\n<p>However I am unable to use this principle when trying to create a proxy for the other api:</p>\n<pre><code>@FeignClient(name = &quot;mcs-user&quot;, path = &quot;/user&quot;)\npublic interface UserApiProxy extends UserApi {\n}\n</code></pre>\n<p>Instead as a temp. workaround im able remove the 'extends UserApi' and copy the method definition within my proxy. I couldnt find any information or examples of using multiple boilerplate apis from one service like i am trying to make. I have tried setting '-parameters' when researching solutions to the error shown, but it didnt affect anything.</p>\n<p>As well I tried creating a @RequestMapping(...) for these interfaces to differentiate their paths, and within feignclient interface append the value, but didnt change at all.\nBesides that, I do have 'spring.main.allow-bean-definition-overriding=true' in my application properties as well.</p>\n<pre><code>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userController': Unsatisfied dependency expressed through field 'userService': Error creating bean with name 'userService': Unsatisfied dependency expressed through field 'userApi': Error creating bean with name 'sk.fmfi.listng.rest.proxy.user.UserApiProxy': FactoryBean threw exception on object creation\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:713) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:693) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:133) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:482) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:917) ~[spring-context-6.0.7.jar:6.0.7]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[spring-context-6.0.7.jar:6.0.7]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.0.5.jar:3.0.5]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:732) ~[spring-boot-3.0.5.jar:3.0.5]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434) ~[spring-boot-3.0.5.jar:3.0.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:310) ~[spring-boot-3.0.5.jar:3.0.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1304) ~[spring-boot-3.0.5.jar:3.0.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1293) ~[spring-boot-3.0.5.jar:3.0.5]\n    at sk.fmfi.listng.rest.RestApplication.main(RestApplication.java:17) ~[classes/:na]\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userService': Unsatisfied dependency expressed through field 'userApi': Error creating bean with name 'sk.fmfi.listng.rest.proxy.user.UserApiProxy': FactoryBean threw exception on object creation\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:713) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:693) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:133) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:482) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:710) ~[spring-beans-6.0.7.jar:6.0.7]\n    ... 20 common frames omitted\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sk.fmfi.listng.rest.proxy.user.UserApiProxy': FactoryBean threw exception on object creation\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:154) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:90) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1823) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getObjectForBeanInstance(AbstractAutowireCapableBeanFactory.java:1273) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:259) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1640) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1597) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1380) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337) ~[spring-beans-6.0.7.jar:6.0.7]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:710) ~[spring-beans-6.0.7.jar:6.0.7]\n    ... 34 common frames omitted\nCaused by: java.lang.IllegalStateException: RequestParam.value() was empty on parameter 1\n    at feign.Util.checkState(Util.java:136) ~[feign-core-12.1.jar:na]\n    at org.springframework.cloud.openfeign.annotation.RequestParamParameterProcessor.processArgument(RequestParamParameterProcessor.java:63) ~[spring-cloud-openfeign-core-4.0.2.jar:4.0.2]\n    at org.springframework.cloud.openfeign.support.SpringMvcContract.processAnnotationsOnParameter(SpringMvcContract.java:298) ~[spring-cloud-openfeign-core-4.0.2.jar:4.0.2]\n    at feign.Contract$BaseContract.parseAndValidateMetadata(Contract.java:126) ~[feign-core-12.1.jar:na]\n    at org.springframework.cloud.openfeign.support.SpringMvcContract.parseAndValidateMetadata(SpringMvcContract.java:197) ~[spring-cloud-openfeign-core-4.0.2.jar:4.0.2]\n    at feign.Contract$BaseContract.parseAndValidateMetadata(Contract.java:65) ~[feign-core-12.1.jar:na]\n    at feign.ReflectiveFeign$ParseHandlersByName.apply(ReflectiveFeign.java:142) ~[feign-core-12.1.jar:na]\n    at feign.ReflectiveFeign.newInstance(ReflectiveFeign.java:58) ~[feign-core-12.1.jar:na]\n    at feign.ReflectiveFeign.newInstance(ReflectiveFeign.java:50) ~[feign-core-12.1.jar:na]\n    at feign.Feign$Builder.target(Feign.java:197) ~[feign-core-12.1.jar:na]\n    at org.springframework.cloud.openfeign.DefaultTargeter.target(DefaultTargeter.java:30) ~[spring-cloud-openfeign-core-4.0.2.jar:4.0.2]\n    at org.springframework.cloud.openfeign.FeignClientFactoryBean.loadBalance(FeignClientFactoryBean.java:398) ~[spring-cloud-openfeign-core-4.0.2.jar:4.0.2]\n    at org.springframework.cloud.openfeign.FeignClientFactoryBean.getTarget(FeignClientFactoryBean.java:446) ~[spring-cloud-openfeign-core-4.0.2.jar:4.0.2]\n    at org.springframework.cloud.openfeign.FeignClientFactoryBean.getObject(FeignClientFactoryBean.java:421) ~[spring-cloud-openfeign-core-4.0.2.jar:4.0.2]\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:148) ~[spring-beans-6.0.7.jar:6.0.7]\n    ... 45 common frames omitted\n</code></pre>\n<p>Is there a way to achieve these boilerplate apis from one service without having to copy the method definition from the target api to my feignclient interface (obviously this means a problem with having to maintain code at two places at the same time)?</p>\n<p>Thank you in advance for any comments and help :)</p>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":10587710,"reputation":2772,"user_id":7799462,"display_name":"Halil Ozel"},"score":0,"creation_date":1683740701,"post_id":76220852,"comment_id":134414677,"body_markdown":"You should ask clearly.","body":"You should ask clearly."}],"answers":[{"tags":[],"owner":{"account_id":28566066,"reputation":21,"user_id":21868928,"display_name":"Pablo R"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683744785,"creation_date":1683744785,"answer_id":76221744,"question_id":76220852,"body_markdown":"You could try provide default params for values or an empty constructor for example:\r\n\r\n    data class GrumeBillesEntity(\r\n    @Embedded val billes: List&lt;BilleEntity&gt; = emptyList(),\r\n    @Relation(\r\n        parentColumn = &quot;id_grume&quot;,\r\n    entityColumn=&quot;id_grume&quot;\r\n    )\r\n    val grume:Grume = Grume() // or some default constructor\r\n    )\r\n\r\nor \r\n\r\n    data class GrumeBillesEntity(\r\n    @Embedded val billes: List&lt;BilleEntity&gt;,\r\n    @Relation(\r\n        parentColumn = &quot;id_grume&quot;,\r\n    entityColumn=&quot;id_grume&quot;\r\n    )\r\n    val grume:Grume\r\n    ) {\r\n        constructor(): this(emptyList(), Grume())\r\n    }","title":"Entities and POJOs must have a usable public constructor.You can have an empty constructor","body":"<p>You could try provide default params for values or an empty constructor for example:</p>\n<pre><code>data class GrumeBillesEntity(\n@Embedded val billes: List&lt;BilleEntity&gt; = emptyList(),\n@Relation(\n    parentColumn = &quot;id_grume&quot;,\nentityColumn=&quot;id_grume&quot;\n)\nval grume:Grume = Grume() // or some default constructor\n)\n</code></pre>\n<p>or</p>\n<pre><code>data class GrumeBillesEntity(\n@Embedded val billes: List&lt;BilleEntity&gt;,\n@Relation(\n    parentColumn = &quot;id_grume&quot;,\nentityColumn=&quot;id_grume&quot;\n)\nval grume:Grume\n) {\n    constructor(): this(emptyList(), Grume())\n}\n</code></pre>\n"}],"owner":{"account_id":28232853,"reputation":5,"user_id":21581812,"display_name":"eya tayari"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1683744785,"creation_date":1683737251,"question_id":76220852,"body_markdown":"Entities and POJOs must have a usable public constructor. You can have an empty constructor or a constructor whose parameters match the fields (by name and type). - java.util.List\r\n\r\n&gt; this is my DAO \r\n\r\n```\r\n @Query(\r\n        &quot;select b.* &quot; +\r\n                &quot; ,g.id_bordereau,g.id_nat_essence,g.id_nat_couleur ,g.numero_plaquette,g.id_nat_complement,g.localisation_libelle&quot; +\r\n                &quot; from bille b  join  grume g on g.id_grume=b.id_grume &quot; +\r\n                &quot;where g.id_bordereau = :idBordereau  &quot;+\r\n                &quot;Group by b.id_grume &quot; +\r\n                &quot;order By id_bille DESC , ordre ASC &quot;\r\n    )\r\n    @Transaction\r\n    suspend fun getAllBillesByBordereau(idBordereau: String): List&lt;GrumeBillesEntity&gt;\r\n```\r\n&gt; this is my GrumeBillesEntity \r\n\r\n```\r\ndata class GrumeBillesEntity(\r\n    @Embedded val billes: List&lt;BilleEntity&gt;,\r\n    @Relation(\r\n        parentColumn = &quot;id_grume&quot;,\r\n    entityColumn=&quot;id_grume&quot;\r\n    )\r\n    val grume:Grume\r\n    )\r\n```\r\n\r\n\r\nI get this error and I don&#39;t know how to correct it ","title":"Entities and POJOs must have a usable public constructor.You can have an empty constructor","body":"<p>Entities and POJOs must have a usable public constructor. You can have an empty constructor or a constructor whose parameters match the fields (by name and type). - java.util.List</p>\n<blockquote>\n<p>this is my DAO</p>\n</blockquote>\n<pre><code> @Query(\n        &quot;select b.* &quot; +\n                &quot; ,g.id_bordereau,g.id_nat_essence,g.id_nat_couleur ,g.numero_plaquette,g.id_nat_complement,g.localisation_libelle&quot; +\n                &quot; from bille b  join  grume g on g.id_grume=b.id_grume &quot; +\n                &quot;where g.id_bordereau = :idBordereau  &quot;+\n                &quot;Group by b.id_grume &quot; +\n                &quot;order By id_bille DESC , ordre ASC &quot;\n    )\n    @Transaction\n    suspend fun getAllBillesByBordereau(idBordereau: String): List&lt;GrumeBillesEntity&gt;\n</code></pre>\n<blockquote>\n<p>this is my GrumeBillesEntity</p>\n</blockquote>\n<pre><code>data class GrumeBillesEntity(\n    @Embedded val billes: List&lt;BilleEntity&gt;,\n    @Relation(\n        parentColumn = &quot;id_grume&quot;,\n    entityColumn=&quot;id_grume&quot;\n    )\n    val grume:Grume\n    )\n</code></pre>\n<p>I get this error and I don't know how to correct it</p>\n"},{"tags":["java","android","listview","firebase"],"comments":[{"owner":{"account_id":11013148,"reputation":5634,"user_id":8089770,"display_name":"Vidhi Dave"},"score":0,"creation_date":1509452694,"post_id":47035284,"comment_id":81016864,"body_markdown":"int price = Integer.ParseInt(String value); convert string to int","body":"int price = Integer.ParseInt(String value); convert string to int"},{"owner":{"account_id":9049208,"reputation":3188,"user_id":6740130,"display_name":"Muhammad Saad Rafique"},"score":0,"creation_date":1509452858,"post_id":47035284,"comment_id":81016976,"body_markdown":"can you please show me the code of your adapter?  VanzatorProduseList.java file ?","body":"can you please show me the code of your adapter?  VanzatorProduseList.java file ?"},{"owner":{"account_id":9049208,"reputation":3188,"user_id":6740130,"display_name":"Muhammad Saad Rafique"},"score":0,"creation_date":1509452955,"post_id":47035284,"comment_id":81017042,"body_markdown":"whats price in these three pordus,pordusId,pret ? Is pret a price ?","body":"whats price in these three pordus,pordusId,pret ? Is pret a price ?"},{"owner":{"account_id":11778271,"reputation":1130,"user_id":8618875,"accept_rate":40,"display_name":"clauub"},"score":0,"creation_date":1509453065,"post_id":47035284,"comment_id":81017119,"body_markdown":"yes, pret is price","body":"yes, pret is price"}],"answers":[{"comments":[{"owner":{"account_id":11778271,"reputation":1130,"user_id":8618875,"accept_rate":40,"display_name":"clauub"},"score":0,"creation_date":1509453773,"post_id":47035694,"comment_id":81017612,"body_markdown":"sorry for this silly question, where should i put this code?","body":"sorry for this silly question, where should i put this code?"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1509453828,"post_id":47035694,"comment_id":81017641,"body_markdown":"This is completely wrong. There is no `Int` in Java. There is an `int` or an `Integer` object.","body":"This is completely wrong. There is no <code>Int</code> in Java. There is an <code>int</code> or an <code>Integer</code> object."},{"owner":{"account_id":9049208,"reputation":3188,"user_id":6740130,"display_name":"Muhammad Saad Rafique"},"score":0,"creation_date":1509453868,"post_id":47035694,"comment_id":81017659,"body_markdown":"Its ok buddy no issues... you can put it where your list is completed ? after the completion of first for loop  .... After that .... for (DataSnapshot produsSnapshot : dataSnapshot.getChildren()){\n\n                VanzatorProduse vanzatorProduse = produsSnapshot.getValue(VanzatorProduse.class);\n\n                produseVanzatorList.add(vanzatorProduse);\n            }","body":"Its ok buddy no issues... you can put it where your list is completed ? after the completion of first for loop  .... After that .... for (DataSnapshot produsSnapshot : dataSnapshot.getChildren()){                  VanzatorProduse vanzatorProduse = produsSnapshot.getValue(VanzatorProduse.class);                  produseVanzatorList.add(vanzatorProduse);             }"},{"owner":{"account_id":9049208,"reputation":3188,"user_id":6740130,"display_name":"Muhammad Saad Rafique"},"score":0,"creation_date":1509453902,"post_id":47035694,"comment_id":81017677,"body_markdown":"It will give me reputation buddy :)","body":"It will give me reputation buddy :)"},{"owner":{"account_id":9049208,"reputation":3188,"user_id":6740130,"display_name":"Muhammad Saad Rafique"},"score":0,"creation_date":1509454072,"post_id":47035694,"comment_id":81017795,"body_markdown":"Sorry spelling mistake buddy @AlexMamo","body":"Sorry spelling mistake buddy @AlexMamo"},{"owner":{"account_id":9049208,"reputation":3188,"user_id":6740130,"display_name":"Muhammad Saad Rafique"},"score":0,"creation_date":1509454106,"post_id":47035694,"comment_id":81017823,"body_markdown":"@PeterHaddad Hahaha I did it bro ... It was my mistake :p","body":"@PeterHaddad Hahaha I did it bro ... It was my mistake :p"},{"owner":{"account_id":9049208,"reputation":3188,"user_id":6740130,"display_name":"Muhammad Saad Rafique"},"score":0,"creation_date":1509454198,"post_id":47035694,"comment_id":81017888,"body_markdown":"@PeterHaddad  Thank you btw :)","body":"@PeterHaddad  Thank you btw :)"},{"owner":{"account_id":9049208,"reputation":3188,"user_id":6740130,"display_name":"Muhammad Saad Rafique"},"score":0,"creation_date":1509454221,"post_id":47035694,"comment_id":81017901,"body_markdown":"@AlexMamo I am grateful to you. Thank you for correcting me mate :)","body":"@AlexMamo I am grateful to you. Thank you for correcting me mate :)"},{"owner":{"account_id":9432262,"reputation":79450,"user_id":7015400,"accept_rate":38,"display_name":"Peter Haddad"},"score":0,"creation_date":1509454459,"post_id":47035694,"comment_id":81018078,"body_markdown":"@M.SaadLakhan upvoting you since OP forgot to check it","body":"@M.SaadLakhan upvoting you since OP forgot to check it"},{"owner":{"account_id":9049208,"reputation":3188,"user_id":6740130,"display_name":"Muhammad Saad Rafique"},"score":0,"creation_date":1509454568,"post_id":47035694,"comment_id":81018159,"body_markdown":"@PeterHaddad Bro whats OP?","body":"@PeterHaddad Bro whats OP?"},{"owner":{"account_id":9049208,"reputation":3188,"user_id":6740130,"display_name":"Muhammad Saad Rafique"},"score":0,"creation_date":1509454613,"post_id":47035694,"comment_id":81018181,"body_markdown":"@PeterHaddad Thanks alot for your upvode mate :)","body":"@PeterHaddad Thanks alot for your upvode mate :)"},{"owner":{"account_id":9432262,"reputation":79450,"user_id":7015400,"accept_rate":38,"display_name":"Peter Haddad"},"score":0,"creation_date":1509454620,"post_id":47035694,"comment_id":81018183,"body_markdown":"@M.SaadLakhan Original poster, the person posting the question","body":"@M.SaadLakhan Original poster, the person posting the question"}],"tags":[],"owner":{"account_id":9049208,"reputation":3188,"user_id":6740130,"display_name":"Muhammad Saad Rafique"},"comment_count":12,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1509454044,"creation_date":1509453637,"answer_id":47035694,"question_id":47035284,"body_markdown":"I assumed pret as price.\r\n\r\n    int totalPrice = 0;\r\n    for(VanzatorProduse v : produseVanzatorList)\r\n            {\r\n                int vPrice = Integer.parseInt(v.getPret());\r\n                totalPrice = totalPrice + vPrice;\r\n            }","title":"Calculate sum of products prices inside a ListView as String","body":"<p>I assumed pret as price.</p>\n\n<pre><code>int totalPrice = 0;\nfor(VanzatorProduse v : produseVanzatorList)\n        {\n            int vPrice = Integer.parseInt(v.getPret());\n            totalPrice = totalPrice + vPrice;\n        }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9432262,"reputation":79450,"user_id":7015400,"accept_rate":38,"display_name":"Peter Haddad"},"score":0,"creation_date":1509454511,"post_id":47035839,"comment_id":81018112,"body_markdown":"upvoting you Alex for the important idea +1","body":"upvoting you Alex for the important idea +1"}],"tags":[],"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1509454077,"creation_date":1509454077,"answer_id":47035839,"question_id":47035284,"body_markdown":"First of all, there is not a good practice to store int values as Strings in a Firebase database. If you do so, you need to parse the value of the String to an int. Here is an example of how to do it:\r\n\r\n    String string = &quot;10&quot;;\r\n\tint valueOfString =  Integer.valueOf(string);\r\n\tSystem.out.println(valueOfString);\r\n\r\nThe output will be: `10`.\r\n\r\nThere is another important idea when it comes to Firebase, you need to use and declare the `vanzatorProduseList` List inside `onDataChange()` method, otherwise it will be always `null`. Doing this, tehn just iterate trough the List and that&#39;s it.","title":"Calculate sum of products prices inside a ListView as String","body":"<p>First of all, there is not a good practice to store int values as Strings in a Firebase database. If you do so, you need to parse the value of the String to an int. Here is an example of how to do it:</p>\n\n<pre><code>String string = \"10\";\nint valueOfString =  Integer.valueOf(string);\nSystem.out.println(valueOfString);\n</code></pre>\n\n<p>The output will be: <code>10</code>.</p>\n\n<p>There is another important idea when it comes to Firebase, you need to use and declare the <code>vanzatorProduseList</code> List inside <code>onDataChange()</code> method, otherwise it will be always <code>null</code>. Doing this, tehn just iterate trough the List and that's it.</p>\n"}],"owner":{"account_id":11778271,"reputation":1130,"user_id":8618875,"accept_rate":40,"display_name":"clauub"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":563,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":47035694,"answer_count":2,"score":0,"last_activity_date":1683744107,"creation_date":1509452471,"question_id":47035284,"body_markdown":"I&#39;m new in Android Development. And I&#39;m working with this problem for 3 days.\r\n\r\nI have an object class which is saved to Firebase with three **Strings** in a ListView.\r\n\r\n    public class VanzatorProduse {\r\n\r\n    public String produsId;\r\n    public String produs;\r\n    public String pret;\r\n\r\n    public VanzatorProduse(){\r\n\r\n    }\r\n\r\n    public VanzatorProduse(String produsId, String produs, String pret) {\r\n        this.produsId = produsId;\r\n        this.produs = produs;\r\n        this.pret = pret;\r\n\r\n    }\r\n\r\n    public String getProdusId() {\r\n        return produsId;\r\n    }\r\n\r\n    public String getProdus() {\r\n        return produs;\r\n    }\r\n\r\n    public String getPret() {\r\n        return pret;\r\n    }\r\n\r\nBut I want to calculate sum of products prices. If this is possible with Strings, I tried lots of way but no solution. \r\n\r\nHere is code where the object is retrieved from Firebase: \r\n\r\n     databaseReference.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(DataSnapshot dataSnapshot) {\r\n\r\n                produseVanzatorList.clear();\r\n                for (DataSnapshot produsSnapshot : dataSnapshot.getChildren()){\r\n\r\n                    VanzatorProduse vanzatorProduse = produsSnapshot.getValue(VanzatorProduse.class);\r\n\r\n                    produseVanzatorList.add(vanzatorProduse);\r\n                }\r\n\r\n                VanzatorProduseList adapter = new VanzatorProduseList(ListaProduseActivity.this, produseVanzatorList);\r\n                listViewProduse.setAdapter(adapter);\r\n            }\r\n\r\nMy adapter: \r\n\r\npublic class VanzatorProduseList extends ArrayAdapter&lt;VanzatorProduse&gt; {\r\n\r\n    private Activity context;\r\n    private SparseBooleanArray selectedListItemsIds;\r\n    private List&lt;VanzatorProduse&gt; vanzatorProduseList;\r\n\r\n    public VanzatorProduseList(Activity context, List&lt;VanzatorProduse&gt; vanzatorProduseList){\r\n        super(context, R.layout.list_produse_vanzator, vanzatorProduseList);\r\n        this.context = context;\r\n        selectedListItemsIds = new SparseBooleanArray();\r\n        this.vanzatorProduseList = vanzatorProduseList;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {\r\n        LayoutInflater inflater  = context.getLayoutInflater();\r\n\r\n        View listViewItem = inflater.inflate(R.layout.list_produse_vanzator, null, true);\r\n\r\n        TextView textViewProdus1 = (TextView) listViewItem.findViewById(R.id.textViewProdus1);\r\n        TextView textViewPret1 = (TextView) listViewItem.findViewById(R.id.textViewPret1);\r\n\r\n\r\n        VanzatorProduse vanzatorProduse = vanzatorProduseList.get(position);\r\n\r\n        textViewProdus1.setText(vanzatorProduse.getProdus());\r\n        textViewPret1.setText(vanzatorProduse.getPret());\r\n\r\n        return listViewItem;\r\n    }\r\n    public SparseBooleanArray getSelectedIds() {\r\n        return selectedListItemsIds;\r\n    }\r\n","title":"Calculate sum of products prices inside a ListView as String","body":"<p>I'm new in Android Development. And I'm working with this problem for 3 days.</p>\n<p>I have an object class which is saved to Firebase with three <strong>Strings</strong> in a ListView.</p>\n<pre><code>public class VanzatorProduse {\n\npublic String produsId;\npublic String produs;\npublic String pret;\n\npublic VanzatorProduse(){\n\n}\n\npublic VanzatorProduse(String produsId, String produs, String pret) {\n    this.produsId = produsId;\n    this.produs = produs;\n    this.pret = pret;\n\n}\n\npublic String getProdusId() {\n    return produsId;\n}\n\npublic String getProdus() {\n    return produs;\n}\n\npublic String getPret() {\n    return pret;\n}\n</code></pre>\n<p>But I want to calculate sum of products prices. If this is possible with Strings, I tried lots of way but no solution.</p>\n<p>Here is code where the object is retrieved from Firebase:</p>\n<pre><code> databaseReference.addValueEventListener(new ValueEventListener() {\n        @Override\n        public void onDataChange(DataSnapshot dataSnapshot) {\n\n            produseVanzatorList.clear();\n            for (DataSnapshot produsSnapshot : dataSnapshot.getChildren()){\n\n                VanzatorProduse vanzatorProduse = produsSnapshot.getValue(VanzatorProduse.class);\n\n                produseVanzatorList.add(vanzatorProduse);\n            }\n\n            VanzatorProduseList adapter = new VanzatorProduseList(ListaProduseActivity.this, produseVanzatorList);\n            listViewProduse.setAdapter(adapter);\n        }\n</code></pre>\n<p>My adapter:</p>\n<p>public class VanzatorProduseList extends ArrayAdapter {</p>\n<pre><code>private Activity context;\nprivate SparseBooleanArray selectedListItemsIds;\nprivate List&lt;VanzatorProduse&gt; vanzatorProduseList;\n\npublic VanzatorProduseList(Activity context, List&lt;VanzatorProduse&gt; vanzatorProduseList){\n    super(context, R.layout.list_produse_vanzator, vanzatorProduseList);\n    this.context = context;\n    selectedListItemsIds = new SparseBooleanArray();\n    this.vanzatorProduseList = vanzatorProduseList;\n}\n\n@NonNull\n@Override\npublic View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {\n    LayoutInflater inflater  = context.getLayoutInflater();\n\n    View listViewItem = inflater.inflate(R.layout.list_produse_vanzator, null, true);\n\n    TextView textViewProdus1 = (TextView) listViewItem.findViewById(R.id.textViewProdus1);\n    TextView textViewPret1 = (TextView) listViewItem.findViewById(R.id.textViewPret1);\n\n\n    VanzatorProduse vanzatorProduse = vanzatorProduseList.get(position);\n\n    textViewProdus1.setText(vanzatorProduse.getProdus());\n    textViewPret1.setText(vanzatorProduse.getPret());\n\n    return listViewItem;\n}\npublic SparseBooleanArray getSelectedIds() {\n    return selectedListItemsIds;\n}\n</code></pre>\n"},{"tags":["java","playback","sox","mute"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1683729937,"post_id":76218431,"comment_id":134411968,"body_markdown":"Just to be certain that the process is not stuck because of a full stdout or stderr buffer, itâ€™s a good idea to use `ProcessBuilder builder = new ProcessBuilder(&quot;play, &quot;--magic&quot;, station).inheritIO(); builder.environment().put(&quot;AUDIODEV&quot;, &quot;pcm.radsound&quot;); Process p = builder.start();`.  ProcessBuilder is the modern replacement for Runtime.exec.  The important part is the inheritIO call, which makes the child process use the calling programâ€™s input/output/error descriptors.","body":"Just to be certain that the process is not stuck because of a full stdout or stderr buffer, itâ€™s a good idea to use <code>ProcessBuilder builder = new ProcessBuilder(&quot;play, &quot;--magic&quot;, station).inheritIO(); builder.environment().put(&quot;AUDIODEV&quot;, &quot;pcm.radsound&quot;); Process p = builder.start();</code>.  ProcessBuilder is the modern replacement for Runtime.exec.  The important part is the inheritIO call, which makes the child process use the calling programâ€™s input/output/error descriptors."},{"owner":{"account_id":28350115,"reputation":13,"user_id":21681736,"display_name":"Ismael Kira"},"score":0,"creation_date":1683732285,"post_id":76218431,"comment_id":134412639,"body_markdown":"@VGR thank you so much!! When using the ProcessBuilder it just works :D","body":"@VGR thank you so much!! When using the ProcessBuilder it just works :D"}],"answers":[{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683743868,"creation_date":1683732717,"answer_id":76220255,"question_id":76218431,"body_markdown":"To be certain that the process is not stuck because of a full stdout or stderr buffer, itâ€™s a good idea to use:\r\n\r\n    ProcessBuilder builder = new ProcessBuilder(&quot;play, &quot;--magic&quot;, station);\r\n    builder.inheritIO();\r\n    builder.environment().put(&quot;AUDIODEV&quot;, &quot;pcm.radsound&quot;);\r\n    Process p = builder.start();\r\n\r\nProcessBuilder is the modern replacement for Runtime.exec.  The important part is the [inheritIO](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/ProcessBuilder.html#inheritIO()) call, which makes the child process use the calling programâ€™s input/output/error descriptors.\r\n","title":"Sox play stopping playback when called in Java","body":"<p>To be certain that the process is not stuck because of a full stdout or stderr buffer, itâ€™s a good idea to use:</p>\n<pre><code>ProcessBuilder builder = new ProcessBuilder(&quot;play, &quot;--magic&quot;, station);\nbuilder.inheritIO();\nbuilder.environment().put(&quot;AUDIODEV&quot;, &quot;pcm.radsound&quot;);\nProcess p = builder.start();\n</code></pre>\n<p>ProcessBuilder is the modern replacement for Runtime.exec.  The important part is the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/ProcessBuilder.html#inheritIO()\" rel=\"nofollow noreferrer\">inheritIO</a> call, which makes the child process use the calling programâ€™s input/output/error descriptors.</p>\n"}],"owner":{"account_id":28350115,"reputation":13,"user_id":21681736,"display_name":"Ismael Kira"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76220255,"answer_count":1,"score":1,"last_activity_date":1683743868,"creation_date":1683721703,"question_id":76218431,"body_markdown":"I need to play streamed audio from Java, primarily online radio stations. I used `play --magic [url]` for this, which seemed to work fine on the terminal. So I used Runtime to start the process from Java.\r\n\r\n```lang-java\r\nProcess p = Runtime.getRuntime().exec(new String[]{&quot;play&quot;, &quot;--magic&quot;, station}, new String[]{&quot;AUDIODEV=pcm.radsound&quot;});\r\np.waitFor();\r\n```\r\n\r\nThis works fine for one or two minutes but after that the sound disappears. The process still continues to run and `p.waitFor();` does not return. I get no exceptions, nothing in `p.getErrorStream()`, no indication of something not working. I have no clue what&#39;s going wrong here, specially after I went back and checked that calling the same command from the terminal just keeps on playing indefinitely.\r\n\r\nI thought maybe it has something to do with getting the streamed data, so I split the thing in two. Used `curl` to fill a pipe and then `play` to play it. Didn&#39;t change a thing.\r\n\r\nFor clarification: This has to run on a RaspberryPi 4B running Raspbery Pi OS.\r\n\r\nAny help and/or pointers very appreciated. Thank you\r\n\r\n","title":"Sox play stopping playback when called in Java","body":"<p>I need to play streamed audio from Java, primarily online radio stations. I used <code>play --magic [url]</code> for this, which seemed to work fine on the terminal. So I used Runtime to start the process from Java.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Process p = Runtime.getRuntime().exec(new String[]{&quot;play&quot;, &quot;--magic&quot;, station}, new String[]{&quot;AUDIODEV=pcm.radsound&quot;});\np.waitFor();\n</code></pre>\n<p>This works fine for one or two minutes but after that the sound disappears. The process still continues to run and <code>p.waitFor();</code> does not return. I get no exceptions, nothing in <code>p.getErrorStream()</code>, no indication of something not working. I have no clue what's going wrong here, specially after I went back and checked that calling the same command from the terminal just keeps on playing indefinitely.</p>\n<p>I thought maybe it has something to do with getting the streamed data, so I split the thing in two. Used <code>curl</code> to fill a pipe and then <code>play</code> to play it. Didn't change a thing.</p>\n<p>For clarification: This has to run on a RaspberryPi 4B running Raspbery Pi OS.</p>\n<p>Any help and/or pointers very appreciated. Thank you</p>\n"},{"tags":["java","web-services","jax-ws"],"answers":[{"tags":[],"owner":{"account_id":462861,"reputation":17872,"user_id":865403,"accept_rate":60,"display_name":"Pavel Horal"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1340441148,"creation_date":1340441148,"answer_id":11168104,"question_id":8840091,"body_markdown":"When I was solving similar issue, [this thread really][1] helped me.\r\n\r\nThe problem is when you have Metro (Oracle&#39;s WS stack) libraries on classpath, they are autodetected and included in the WS processing. One functionality is transparent authentication / security handling, when endpoint policy is present in WSDL. Unfortunatelly this security handling is not\r\n\r\nI was not able to change the WSDL. **The solution for me was removing the unwanted JAR (wsit-rt) from the classpath.** \r\n\r\n  [1]: http://metro.1045641.n5.nabble.com/Issue-with-security-header-using-WS-Metro-classes-td1067239.html","title":"com.sun.xml.ws.message.saaj.SAAJHeader cannot be cast to com.sun.xml.ws.security.opt.impl.outgoing.SecurityHeader","body":"<p>When I was solving similar issue, <a href=\"http://metro.1045641.n5.nabble.com/Issue-with-security-header-using-WS-Metro-classes-td1067239.html\" rel=\"nofollow\">this thread really</a> helped me.</p>\n\n<p>The problem is when you have Metro (Oracle's WS stack) libraries on classpath, they are autodetected and included in the WS processing. One functionality is transparent authentication / security handling, when endpoint policy is present in WSDL. Unfortunatelly this security handling is not</p>\n\n<p>I was not able to change the WSDL. <strong>The solution for me was removing the unwanted JAR (wsit-rt) from the classpath.</strong> </p>\n"},{"tags":[],"owner":{"account_id":1375964,"reputation":930,"user_id":1309964,"accept_rate":75,"display_name":"Thomas Letsch"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1463471416,"creation_date":1463471416,"answer_id":37270189,"question_id":8840091,"body_markdown":"Old question, but I had currently the same problem.\r\nThe solution was to remove additional security headers I had included manually.\r\nSo if you run into this problem, check if you have any handlers  (SOAPHandler) writing any headers into your soap message `&lt;Security&gt;` header part. ","title":"com.sun.xml.ws.message.saaj.SAAJHeader cannot be cast to com.sun.xml.ws.security.opt.impl.outgoing.SecurityHeader","body":"<p>Old question, but I had currently the same problem.\nThe solution was to remove additional security headers I had included manually.\nSo if you run into this problem, check if you have any handlers  (SOAPHandler) writing any headers into your soap message <code>&lt;Security&gt;</code> header part. </p>\n"},{"tags":[],"owner":{"account_id":1168374,"reputation":51,"user_id":1146133,"display_name":"Bill G"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683743786,"creation_date":1683743786,"answer_id":76221640,"question_id":8840091,"body_markdown":"It is an old question but since it&#39;s had so many views, here&#39;s an answer to help get people going.\r\n\r\nYou need to create a call back handler class. It will look something like the following:\r\n\r\n    import java.io.IOException;\r\n    import javax.security.auth.callback.Callback;\r\n    import javax.security.auth.callback.CallbackHandler;\r\n    import javax.security.auth.callback.NameCallback;\r\n    import javax.security.auth.callback.PasswordCallback;\r\n    import javax.security.auth.callback.UnsupportedCallbackException;    \r\n    public class MySecurityHandler implements CallbackHandler {\r\n      public void handle(Callback[] callbacks) \r\n        throws IOException, UnsupportedCallbackException {\r\n          for (int i = 0; i &lt; callbacks.length; i++) {\r\n            if (callbacks[i] instanceof NameCallback) {\r\n              String userID = &quot;xxxxxx&quot;;\r\n              NameCallback nc = (NameCallback) callbacks[i];\r\n              nc.setName(userID);\r\n            }\r\n            else {\r\n              if (callbacks[i] instanceof PasswordCallback) {\r\n                String password = &quot;xxxx&quot;;\r\n                PasswordCallback pc = (PasswordCallback) callbacks[i];\r\n                pc.setPassword(password.toCharArray());\r\n              } \r\n              else {\r\n                throw new UnsupportedCallbackException(callbacks[i],\r\n                  callbacks[i].getClass().getName());\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\nCopy your WSDL to a file with the same name except make it .xml instead of .wsdl.\r\n\r\nModify the newly created xml file. Take note of the targetNamespace at the top of the file as you will need it for the final step. Need to replace the existing wsp:Policy section with one similar to the following, specifying the callback handler for user id/password.\r\n\r\n    &lt;wsp:Policy wsu:Id=&quot;BasicHttpBinding_IAssessments_policy&quot;&gt;\r\n      &lt;wsp:ExactlyOne&gt;\r\n        &lt;wsp:All&gt;\r\n          &lt;sc:CallbackHandlerConfiguration wspp:visibility=&quot;private&quot;&gt;\r\n             &lt;sc:CallbackHandler classname=&quot;my.lib.MySecurityHandler&quot;\r\n               name=&quot;usernameHandler&quot;/&gt;\r\n             &lt;sc:CallbackHandler classname=&quot;my.lib.MySecurityHandler&quot;\r\n               name=&quot;passwordHandler&quot;/&gt;\r\n          &lt;/sc:CallbackHandlerConfiguration&gt;\r\n        &lt;/wsp:All&gt;\r\n      &lt;/wsp:ExactlyOne&gt;\r\n    &lt;/wsp:Policy&gt;\r\n\r\nModify the wsit-client.xml file for your application. Add a new line as follows, right before the last line of the file.\r\n\r\n    &lt;import location=&quot;relative path to xml file from step above&quot;\r\n     namespace=&quot;targetNamespace from step above&quot;/&gt;\r\n\r\n\r\n\r\n\r\n","title":"com.sun.xml.ws.message.saaj.SAAJHeader cannot be cast to com.sun.xml.ws.security.opt.impl.outgoing.SecurityHeader","body":"<p>It is an old question but since it's had so many views, here's an answer to help get people going.</p>\n<p>You need to create a call back handler class. It will look something like the following:</p>\n<pre><code>import java.io.IOException;\nimport javax.security.auth.callback.Callback;\nimport javax.security.auth.callback.CallbackHandler;\nimport javax.security.auth.callback.NameCallback;\nimport javax.security.auth.callback.PasswordCallback;\nimport javax.security.auth.callback.UnsupportedCallbackException;    \npublic class MySecurityHandler implements CallbackHandler {\n  public void handle(Callback[] callbacks) \n    throws IOException, UnsupportedCallbackException {\n      for (int i = 0; i &lt; callbacks.length; i++) {\n        if (callbacks[i] instanceof NameCallback) {\n          String userID = &quot;xxxxxx&quot;;\n          NameCallback nc = (NameCallback) callbacks[i];\n          nc.setName(userID);\n        }\n        else {\n          if (callbacks[i] instanceof PasswordCallback) {\n            String password = &quot;xxxx&quot;;\n            PasswordCallback pc = (PasswordCallback) callbacks[i];\n            pc.setPassword(password.toCharArray());\n          } \n          else {\n            throw new UnsupportedCallbackException(callbacks[i],\n              callbacks[i].getClass().getName());\n          }\n        }\n      }\n    }\n  }\n</code></pre>\n<p>Copy your WSDL to a file with the same name except make it .xml instead of .wsdl.</p>\n<p>Modify the newly created xml file. Take note of the targetNamespace at the top of the file as you will need it for the final step. Need to replace the existing wsp:Policy section with one similar to the following, specifying the callback handler for user id/password.</p>\n<pre><code>&lt;wsp:Policy wsu:Id=&quot;BasicHttpBinding_IAssessments_policy&quot;&gt;\n  &lt;wsp:ExactlyOne&gt;\n    &lt;wsp:All&gt;\n      &lt;sc:CallbackHandlerConfiguration wspp:visibility=&quot;private&quot;&gt;\n         &lt;sc:CallbackHandler classname=&quot;my.lib.MySecurityHandler&quot;\n           name=&quot;usernameHandler&quot;/&gt;\n         &lt;sc:CallbackHandler classname=&quot;my.lib.MySecurityHandler&quot;\n           name=&quot;passwordHandler&quot;/&gt;\n      &lt;/sc:CallbackHandlerConfiguration&gt;\n    &lt;/wsp:All&gt;\n  &lt;/wsp:ExactlyOne&gt;\n&lt;/wsp:Policy&gt;\n</code></pre>\n<p>Modify the wsit-client.xml file for your application. Add a new line as follows, right before the last line of the file.</p>\n<pre><code>&lt;import location=&quot;relative path to xml file from step above&quot;\n namespace=&quot;targetNamespace from step above&quot;/&gt;\n</code></pre>\n"}],"owner":{"account_id":1168374,"reputation":51,"user_id":1146133,"display_name":"Bill G"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6472,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":76221640,"answer_count":3,"score":5,"last_activity_date":1683743786,"creation_date":1326392008,"question_id":8840091,"body_markdown":"I&#39;m trying to access a third party web service that requires me to create a security header passing in time information, user name, and password. I&#39;ve scoured the web for working examples and have tried numerous ways. I&#39;m trying to do this with just what&#39;s built into Java 6. I&#39;m not sure what I&#39;m doing wrong. After generating my web service client classes from the WSDL, I created the Handler below.\r\n\r\n\r\n    import java.util.Set;\r\n    import java.util.TimeZone;\r\n    import javax.xml.namespace.QName;\r\n    import javax.xml.soap.Node;\r\n    import javax.xml.soap.SOAPElement;\r\n    import javax.xml.soap.SOAPEnvelope;\r\n    import javax.xml.soap.SOAPFactory;\r\n    import javax.xml.soap.SOAPHeader;\r\n    import javax.xml.soap.SOAPMessage;\r\n    import javax.xml.soap.Text;\r\n    import javax.xml.ws.handler.MessageContext;\r\n    import javax.xml.ws.handler.soap.SOAPHandler;\r\n    import javax.xml.ws.handler.soap.SOAPMessageContext;\r\n     \r\n    public class MyHeaderHandler implements SOAPHandler&lt;SOAPMessageContext&gt;\r\n    {\r\n      public boolean handleMessage(SOAPMessageContext context) \r\n      {\r\n        String prefixUri = &quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-&quot;;\r\n        String uri = prefixUri + &quot;wssecurity-secext-1.0.xsd&quot;;\r\n        String uta = prefixUri + &quot;wssecurity-utility-1.0.xsd&quot;;\r\n        String ta = prefixUri + &quot;username-token-profile-1.0#PasswordText&quot;;\r\n        Boolean isRequest = (Boolean)context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);\r\n        if(isRequest)\r\n        {\r\n          try\r\n          {\r\n            SimpleDateFormat formatter = new SimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:dd.SSS&#39;Z&#39;&quot;);\r\n            formatter.setTimeZone(TimeZone.getTimeZone(&quot;GMT&quot;));\r\n            java.util.Date created = new java.util.Date();\r\n            java.util.Date expires = new java.util.Date(created.getTime() + (5l * 60l * 1000l));\r\n            SOAPMessage soapMsg = context.getMessage();\r\n            SOAPEnvelope soapEnv = soapMsg.getSOAPPart().getEnvelope();\r\n            SOAPHeader soapHeader = soapEnv.getHeader();\r\n            if (soapHeader == null)\r\n              soapHeader = soapEnv.addHeader();\r\n            SOAPFactory factory = SOAPFactory.newInstance();\r\n            SOAPElement securityElem = factory.createElement(&quot;Security&quot;, &quot;o&quot;, uri);\r\n            securityElem.addAttribute(QName.valueOf(&quot;s:mustUnderstand&quot;), &quot;0&quot;);\r\n            SOAPElement timestampElem = factory.createElement(&quot;Timestamp&quot;, &quot;u&quot;, uta);\r\n            timestampElem.addAttribute(QName.valueOf(&quot;xmlns:u&quot;), uta);\r\n            timestampElem.addAttribute(QName.valueOf(&quot;Id&quot;), &quot;_0&quot;);\r\n            SOAPElement elem = factory.createElement(&quot;Created&quot;, &quot;u&quot;, uta);\r\n            elem.addTextNode(formatter.format(created));\r\n            timestampElem.addChildElement(elem);\r\n            elem = factory.createElement(&quot;Expires&quot;, &quot;u&quot;, uta);\r\n            elem.addTextNode(formatter.format(expires));\r\n            timestampElem.addChildElement(elem);\r\n            securityElem.addChildElement(timestampElem);\r\n            SOAPElement usernameElem = factory.createElement(&quot;UsernameToken&quot;, &quot;o&quot;, uri);\r\n            elem = factory.createElement(&quot;Username&quot;, &quot;o&quot;, uri);\r\n            elem.addTextNode(&quot;xxxxx&quot;);\r\n            usernameElem.addChildElement(elem);\r\n            elem = factory.createElement(&quot;Password&quot;, &quot;o&quot;, uri);\r\n            elem.addTextNode(&quot;xxxxx&quot;);\r\n            elem.addAttribute(QName.valueOf(&quot;Type&quot;), ta);\r\n            usernameElem.addChildElement(elem);\r\n            securityElem.addChildElement(usernameElem);\r\n            soapHeader.addChildElement(securityElem);\r\n          }\r\n          catch(Exception e)\r\n          {\r\n            System.out.println(&quot;Handler error!!!! - &quot; + e);\r\n          }\r\n        }\r\n        return true;\r\n      }\r\n    \r\n    public boolean handleFault(SOAPMessageContext context) \r\n      {\r\n        return true;\r\n      }\r\n    \r\n    public void close(MessageContext context)\r\n      {\r\n      }\r\n    \r\n    public Set&lt;QName&gt; getHeaders() \r\n      {\r\n        return null;\r\n      }\r\n    }\r\n \r\n\r\n\r\nNext, I coded my test program to attach the handler and try calling the web service.\r\n\r\n\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import javax.xml.namespace.QName;\r\n    import javax.xml.ws.handler.Handler;\r\n    import javax.xml.ws.handler.HandlerResolver;\r\n    import javax.xml.ws.handler.PortInfo;\r\n    import org.tempuri.ServiceName;\r\n    import org.tempuri.IServiceName;\r\n    \r\n    \r\n    public class test\r\n    {\r\n     public static void main(String[] args)\r\n     throws Exception\r\n     {\r\n       ServiceName service = new ServiceName(new URL(&quot;https://url.to.service/services/ServiceName.svc?wsdl&quot;), new QName(&quot;http://org.tempuri/&quot;, &quot;ServiceName&quot;));\r\n       service.setHandlerResolver(new HandlerResolver() \r\n       {\r\n         public List&lt;Handler&gt; getHandlerChain(PortInfo portInfo) \r\n         {\r\n           List&lt;Handler&gt; handlerList = new ArrayList&lt;Handler&gt;();\r\n           handlerList.add(new MyHeaderHandler());\r\n           return handlerList;\r\n         }\r\n       });\r\n       IServiceName binding = service.getBasicHttpBindingIServiceName();\r\n       ArrayLiist results = binding.getMyData(&quot;my parm&quot;);\r\n       System.out.println(&quot;Size: &quot; + results.size());\r\n     }\r\n    }\r\n\r\n\r\nWhen I run this, I get the following error at the line where i do binding.getMyData():\r\n\r\n\r\n    Exception in thread &quot;main&quot; java.lang.ClassCastException: com.sun.xml.ws.message.saaj.SAAJHeader cannot be cast to com.sun.xml.ws.security.opt.impl.outgoing.SecurityHeader\r\n     at com.sun.xml.ws.security.opt.impl.JAXBFilterProcessingContext.setJAXWSMessage(JAXBFilterProcessingContext.java:140)\r\n     at com.sun.xml.wss.jaxws.impl.SecurityPipeBase.secureOutboundMessage(SecurityPipeBase.java:389)\r\n     at com.sun.xml.wss.jaxws.impl.SecurityClientPipe.process(SecurityClientPipe.java:196)\r\n     at com.sun.xml.ws.api.pipe.helper.PipeAdapter.processRequest(PipeAdapter.java:115)\r\n     at com.sun.xml.ws.api.pipe.Fiber.__doRun(Fiber.java:595)\r\n     at com.sun.xml.ws.api.pipe.Fiber._doRun(Fiber.java:554)\r\n     at com.sun.xml.ws.api.pipe.Fiber.doRun(Fiber.java:539)\r\n     at com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:436)\r\n     at com.sun.xml.ws.client.Stub.process(Stub.java:248)\r\n     at com.sun.xml.ws.client.sei.SEIStub.doProcess(SEIStub.java:135)\r\n     at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:109)\r\n     at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:89)\r\n     at com.sun.xml.ws.client.sei.SEIStub.invoke(SEIStub.java:118)\r\n     at $Proxy40.getM(Unknown Source)\r\n     at test.main(test.java:30)\r\n\r\n\r\n\r\nEvery approach I try ends up at the same point. How do I get around this? I can&#39;t figure out how to create the SecurityHeader to place into the header. Any help would be greatly appreciated. A working example would be great.\r\n\r\n\r\nThanks!","title":"com.sun.xml.ws.message.saaj.SAAJHeader cannot be cast to com.sun.xml.ws.security.opt.impl.outgoing.SecurityHeader","body":"<p>I'm trying to access a third party web service that requires me to create a security header passing in time information, user name, and password. I've scoured the web for working examples and have tried numerous ways. I'm trying to do this with just what's built into Java 6. I'm not sure what I'm doing wrong. After generating my web service client classes from the WSDL, I created the Handler below.</p>\n\n<pre><code>import java.util.Set;\nimport java.util.TimeZone;\nimport javax.xml.namespace.QName;\nimport javax.xml.soap.Node;\nimport javax.xml.soap.SOAPElement;\nimport javax.xml.soap.SOAPEnvelope;\nimport javax.xml.soap.SOAPFactory;\nimport javax.xml.soap.SOAPHeader;\nimport javax.xml.soap.SOAPMessage;\nimport javax.xml.soap.Text;\nimport javax.xml.ws.handler.MessageContext;\nimport javax.xml.ws.handler.soap.SOAPHandler;\nimport javax.xml.ws.handler.soap.SOAPMessageContext;\n\npublic class MyHeaderHandler implements SOAPHandler&lt;SOAPMessageContext&gt;\n{\n  public boolean handleMessage(SOAPMessageContext context) \n  {\n    String prefixUri = \"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-\";\n    String uri = prefixUri + \"wssecurity-secext-1.0.xsd\";\n    String uta = prefixUri + \"wssecurity-utility-1.0.xsd\";\n    String ta = prefixUri + \"username-token-profile-1.0#PasswordText\";\n    Boolean isRequest = (Boolean)context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);\n    if(isRequest)\n    {\n      try\n      {\n        SimpleDateFormat formatter = new SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:dd.SSS'Z'\");\n        formatter.setTimeZone(TimeZone.getTimeZone(\"GMT\"));\n        java.util.Date created = new java.util.Date();\n        java.util.Date expires = new java.util.Date(created.getTime() + (5l * 60l * 1000l));\n        SOAPMessage soapMsg = context.getMessage();\n        SOAPEnvelope soapEnv = soapMsg.getSOAPPart().getEnvelope();\n        SOAPHeader soapHeader = soapEnv.getHeader();\n        if (soapHeader == null)\n          soapHeader = soapEnv.addHeader();\n        SOAPFactory factory = SOAPFactory.newInstance();\n        SOAPElement securityElem = factory.createElement(\"Security\", \"o\", uri);\n        securityElem.addAttribute(QName.valueOf(\"s:mustUnderstand\"), \"0\");\n        SOAPElement timestampElem = factory.createElement(\"Timestamp\", \"u\", uta);\n        timestampElem.addAttribute(QName.valueOf(\"xmlns:u\"), uta);\n        timestampElem.addAttribute(QName.valueOf(\"Id\"), \"_0\");\n        SOAPElement elem = factory.createElement(\"Created\", \"u\", uta);\n        elem.addTextNode(formatter.format(created));\n        timestampElem.addChildElement(elem);\n        elem = factory.createElement(\"Expires\", \"u\", uta);\n        elem.addTextNode(formatter.format(expires));\n        timestampElem.addChildElement(elem);\n        securityElem.addChildElement(timestampElem);\n        SOAPElement usernameElem = factory.createElement(\"UsernameToken\", \"o\", uri);\n        elem = factory.createElement(\"Username\", \"o\", uri);\n        elem.addTextNode(\"xxxxx\");\n        usernameElem.addChildElement(elem);\n        elem = factory.createElement(\"Password\", \"o\", uri);\n        elem.addTextNode(\"xxxxx\");\n        elem.addAttribute(QName.valueOf(\"Type\"), ta);\n        usernameElem.addChildElement(elem);\n        securityElem.addChildElement(usernameElem);\n        soapHeader.addChildElement(securityElem);\n      }\n      catch(Exception e)\n      {\n        System.out.println(\"Handler error!!!! - \" + e);\n      }\n    }\n    return true;\n  }\n\npublic boolean handleFault(SOAPMessageContext context) \n  {\n    return true;\n  }\n\npublic void close(MessageContext context)\n  {\n  }\n\npublic Set&lt;QName&gt; getHeaders() \n  {\n    return null;\n  }\n}\n</code></pre>\n\n<p>Next, I coded my test program to attach the handler and try calling the web service.</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\nimport javax.xml.namespace.QName;\nimport javax.xml.ws.handler.Handler;\nimport javax.xml.ws.handler.HandlerResolver;\nimport javax.xml.ws.handler.PortInfo;\nimport org.tempuri.ServiceName;\nimport org.tempuri.IServiceName;\n\n\npublic class test\n{\n public static void main(String[] args)\n throws Exception\n {\n   ServiceName service = new ServiceName(new URL(\"https://url.to.service/services/ServiceName.svc?wsdl\"), new QName(\"http://org.tempuri/\", \"ServiceName\"));\n   service.setHandlerResolver(new HandlerResolver() \n   {\n     public List&lt;Handler&gt; getHandlerChain(PortInfo portInfo) \n     {\n       List&lt;Handler&gt; handlerList = new ArrayList&lt;Handler&gt;();\n       handlerList.add(new MyHeaderHandler());\n       return handlerList;\n     }\n   });\n   IServiceName binding = service.getBasicHttpBindingIServiceName();\n   ArrayLiist results = binding.getMyData(\"my parm\");\n   System.out.println(\"Size: \" + results.size());\n }\n}\n</code></pre>\n\n<p>When I run this, I get the following error at the line where i do binding.getMyData():</p>\n\n<pre><code>Exception in thread \"main\" java.lang.ClassCastException: com.sun.xml.ws.message.saaj.SAAJHeader cannot be cast to com.sun.xml.ws.security.opt.impl.outgoing.SecurityHeader\n at com.sun.xml.ws.security.opt.impl.JAXBFilterProcessingContext.setJAXWSMessage(JAXBFilterProcessingContext.java:140)\n at com.sun.xml.wss.jaxws.impl.SecurityPipeBase.secureOutboundMessage(SecurityPipeBase.java:389)\n at com.sun.xml.wss.jaxws.impl.SecurityClientPipe.process(SecurityClientPipe.java:196)\n at com.sun.xml.ws.api.pipe.helper.PipeAdapter.processRequest(PipeAdapter.java:115)\n at com.sun.xml.ws.api.pipe.Fiber.__doRun(Fiber.java:595)\n at com.sun.xml.ws.api.pipe.Fiber._doRun(Fiber.java:554)\n at com.sun.xml.ws.api.pipe.Fiber.doRun(Fiber.java:539)\n at com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:436)\n at com.sun.xml.ws.client.Stub.process(Stub.java:248)\n at com.sun.xml.ws.client.sei.SEIStub.doProcess(SEIStub.java:135)\n at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:109)\n at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:89)\n at com.sun.xml.ws.client.sei.SEIStub.invoke(SEIStub.java:118)\n at $Proxy40.getM(Unknown Source)\n at test.main(test.java:30)\n</code></pre>\n\n<p>Every approach I try ends up at the same point. How do I get around this? I can't figure out how to create the SecurityHeader to place into the header. Any help would be greatly appreciated. A working example would be great.</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","apache-kafka","spring-kafka","apache-kafka-streams"],"answers":[{"tags":[],"owner":{"account_id":5242831,"reputation":454,"user_id":4189419,"display_name":"Jay Ghiya"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1621076753,"creation_date":1621076430,"answer_id":67545982,"question_id":67545981,"body_markdown":"The problem here is newer versions of spring-kafka is initializing one more instance of kafka streams based on topology bean automatically and another bean of generickafkaStreams is getting initialized from existing code base which is resulting in multiple threads trying to lock over state directory and thus the error.\r\n\r\nEven disabling the KafkaAutoConfiguration at spring boot level does not disable this behavior. This was such a pain to identify and lost lot of time.\n\r\nThe fix is to get rid of topology bean and have our own custom kafka streams bean as below code:\r\n\r\n      protected Topology customTopology()  {\r\n    \r\n    \t//topology code\r\n    \treturn streamsBuilder.build();\r\n        }\r\n    \r\n        /**\r\n         * This starts kafka stream application and sets the state listener and state\r\n         * store listener.\r\n         * \r\n         * @return KafkaStreams\r\n         */\r\n        @Bean(&quot;GenericKafkaStreams&quot;)\r\n        public KafkaStreams kStream() {\r\n    \tKafkaStreams kafkaStreams = new KafkaStreams(customTopology(), kstreamsconfigs);\r\n    \treturn kafkaStreams;\r\n        }","title":"StreamsException: Unable to initialize state, this can happen if multiple instances of Kafka Streams are running in the same state directory","body":"<p>The problem here is newer versions of spring-kafka is initializing one more instance of kafka streams based on topology bean automatically and another bean of generickafkaStreams is getting initialized from existing code base which is resulting in multiple threads trying to lock over state directory and thus the error.</p>\n<p>Even disabling the KafkaAutoConfiguration at spring boot level does not disable this behavior. This was such a pain to identify and lost lot of time.</p>\n<p>The fix is to get rid of topology bean and have our own custom kafka streams bean as below code:</p>\n<pre><code>  protected Topology customTopology()  {\n\n    //topology code\n    return streamsBuilder.build();\n    }\n\n    /**\n     * This starts kafka stream application and sets the state listener and state\n     * store listener.\n     * \n     * @return KafkaStreams\n     */\n    @Bean(&quot;GenericKafkaStreams&quot;)\n    public KafkaStreams kStream() {\n    KafkaStreams kafkaStreams = new KafkaStreams(customTopology(), kstreamsconfigs);\n    return kafkaStreams;\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5242831,"reputation":454,"user_id":4189419,"display_name":"Jay Ghiya"},"score":0,"creation_date":1624945746,"post_id":68169743,"comment_id":120488457,"body_markdown":"i only had one stateful stream instance. So there were no two instances of streams. But the topology builder is instantiating one more. thats where the conflict is happening. Thats what i answered in the post below. I do not use spring cloud stream.","body":"i only had one stateful stream instance. So there were no two instances of streams. But the topology builder is instantiating one more. thats where the conflict is happening. Thats what i answered in the post below. I do not use spring cloud stream."}],"tags":[],"owner":{"account_id":1812830,"reputation":1461,"user_id":1648546,"display_name":"Jay Ehsaniara"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1666765711,"creation_date":1624912636,"answer_id":68169743,"question_id":67545981,"body_markdown":"A similar Error can happen when you are running multiple of the same `application(name/id)` on the `same machine`. \r\n\r\nPlease visite [State.dir][1] to get the idea.\r\n\r\nyou can add that in Kafka configurations and make it unique per each instance\r\n\r\nIn case you are using spring cloud stream (cann&#39;t have same port in the same machine):\r\n\r\n     spring.cloud.stream.kafka.streams.binder.configuration.state.dir: ${spring.application.name}${server.port}\r\n\r\n  [1]: https://kafka.apache.org/28/documentation/streams/developer-guide/config-streams.html#state-dir\r\n\r\n\r\n## UPDATE:\r\n\r\nIn the case of `spring stream kafka`:\r\n\r\n    @Bean(name = KafkaStreamsDefaultConfiguration.DEFAULT_STREAMS_CONFIG_BEAN_NAME)\r\n    KafkaStreamsConfiguration kStreamsConfig() {\r\n        Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\r\n        props.put(APPLICATION_ID_CONFIG, springApplicationName);\r\n        props.put(BOOTSTRAP_SERVERS_CONFIG, bootstrapServer);\r\n        props.put(StreamsConfig.STATE_DIR_CONFIG, String.format(&quot;%s%s&quot;, springApplicationName, serverPort));\r\n\r\n        return new KafkaStreamsConfiguration(props);\r\n    }\r\n\r\nor:\r\n\r\n    spring.kafka:\r\n        bootstrap-servers: ....\r\n        streams:\r\n          properties:\r\n            application.server: localhost:${server.port}\r\n            state.dir: ${spring.application.name}${server.port}\r\n\r\n\r\n\r\n","title":"StreamsException: Unable to initialize state, this can happen if multiple instances of Kafka Streams are running in the same state directory","body":"<p>A similar Error can happen when you are running multiple of the same <code>application(name/id)</code> on the <code>same machine</code>.</p>\n<p>Please visite <a href=\"https://kafka.apache.org/28/documentation/streams/developer-guide/config-streams.html#state-dir\" rel=\"nofollow noreferrer\">State.dir</a> to get the idea.</p>\n<p>you can add that in Kafka configurations and make it unique per each instance</p>\n<p>In case you are using spring cloud stream (cann't have same port in the same machine):</p>\n<pre><code> spring.cloud.stream.kafka.streams.binder.configuration.state.dir: ${spring.application.name}${server.port}\n</code></pre>\n<h2>UPDATE:</h2>\n<p>In the case of <code>spring stream kafka</code>:</p>\n<pre><code>@Bean(name = KafkaStreamsDefaultConfiguration.DEFAULT_STREAMS_CONFIG_BEAN_NAME)\nKafkaStreamsConfiguration kStreamsConfig() {\n    Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\n    props.put(APPLICATION_ID_CONFIG, springApplicationName);\n    props.put(BOOTSTRAP_SERVERS_CONFIG, bootstrapServer);\n    props.put(StreamsConfig.STATE_DIR_CONFIG, String.format(&quot;%s%s&quot;, springApplicationName, serverPort));\n\n    return new KafkaStreamsConfiguration(props);\n}\n</code></pre>\n<p>or:</p>\n<pre><code>spring.kafka:\n    bootstrap-servers: ....\n    streams:\n      properties:\n        application.server: localhost:${server.port}\n        state.dir: ${spring.application.name}${server.port}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14870107,"reputation":121,"user_id":10737839,"display_name":"Yuriy K"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1627931168,"creation_date":1627931168,"answer_id":68626814,"question_id":67545981,"body_markdown":"I&#39;ve handled problem on versions:\r\n+ org.springframework.boot version 2.5.3\r\n+ org.springframework.kafka:spring-kafka:2.7.5\r\n+ org.apache.kafka:kafka-clients:2.8.0\r\n+ org.apache.kafka:kafka-streams:2.8.0\r\n\r\nCheck this: [State directory](https://kafka.apache.org/28/documentation/streams/developer-guide/config-streams.html#state-dir)\r\n\r\nBy default it is created in temp folder with kafka streams app id like: \r\n*/var/folders/xw/xgslnvzj1zj6wp86wpd8hqjr0000gn/T/kafka-streams/${spring.kafka.streams.application-id}/.lock*\r\n\r\n**If two or more Kafka Streams apps use the same *spring.kafka.streams.application-id* then you get this exception.\r\nSo just change your Kafka Streams apps id&#39;s.**\r\n\r\nOr set directory option manually StreamsConfig.STATE_DIR_CONFIG in streams config.\r\n","title":"StreamsException: Unable to initialize state, this can happen if multiple instances of Kafka Streams are running in the same state directory","body":"<p>I've handled problem on versions:</p>\n<ul>\n<li>org.springframework.boot version 2.5.3</li>\n<li>org.springframework.kafka:spring-kafka:2.7.5</li>\n<li>org.apache.kafka:kafka-clients:2.8.0</li>\n<li>org.apache.kafka:kafka-streams:2.8.0</li>\n</ul>\n<p>Check this: <a href=\"https://kafka.apache.org/28/documentation/streams/developer-guide/config-streams.html#state-dir\" rel=\"nofollow noreferrer\">State directory</a></p>\n<p>By default it is created in temp folder with kafka streams app id like:\n<em>/var/folders/xw/xgslnvzj1zj6wp86wpd8hqjr0000gn/T/kafka-streams/${spring.kafka.streams.application-id}/.lock</em></p>\n<p><strong>If two or more Kafka Streams apps use the same <em>spring.kafka.streams.application-id</em> then you get this exception.\nSo just change your Kafka Streams apps id's.</strong></p>\n<p>Or set directory option manually StreamsConfig.STATE_DIR_CONFIG in streams config.</p>\n"},{"tags":[],"owner":{"account_id":369372,"reputation":4604,"user_id":716720,"accept_rate":60,"display_name":"Sergey Shcherbakov"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1629579596,"creation_date":1629579596,"answer_id":68876725,"question_id":67545981,"body_markdown":"If you have a sophisticated Kafka Streams topology in your Spring Cloud Streams Kafka Streams Binder 3.0 style application, you might need to specify different application ids for different  functions like the following:\r\n\r\n    spring.cloud.stream.function.definition: myFirstStream;mySecondStream\r\n    ...\r\n    spring.cloud.stream.kafka.streams:\r\n      binder:\r\n        functions:\r\n          myFirstStream:\r\n            applicationId: app-id-1\r\n          mySecondStream:\r\n            applicationId: app-id-2\r\n","title":"StreamsException: Unable to initialize state, this can happen if multiple instances of Kafka Streams are running in the same state directory","body":"<p>If you have a sophisticated Kafka Streams topology in your Spring Cloud Streams Kafka Streams Binder 3.0 style application, you might need to specify different application ids for different  functions like the following:</p>\n<pre><code>spring.cloud.stream.function.definition: myFirstStream;mySecondStream\n...\nspring.cloud.stream.kafka.streams:\n  binder:\n    functions:\n      myFirstStream:\n        applicationId: app-id-1\n      mySecondStream:\n        applicationId: app-id-2\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8663115,"reputation":51,"user_id":6484682,"display_name":"Vikas Joshi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649309711,"creation_date":1649309711,"answer_id":71776845,"question_id":67545981,"body_markdown":"Above answers to set state dir works perfectly for me. Thanks.\r\nAdding one observation that might be helpful for someone working with spring-boot. When working on same machine and trying to bring up multiple kafka stream application instances and If you have enabled property spring.devtools.restart.enabled (which mostly is the case in dev profile), you might want to disable it as when the same application instance restarts automatically it might not get store lock. This is what I was facing and was able to resolve by disabling restart behavior.","title":"StreamsException: Unable to initialize state, this can happen if multiple instances of Kafka Streams are running in the same state directory","body":"<p>Above answers to set state dir works perfectly for me. Thanks.\nAdding one observation that might be helpful for someone working with spring-boot. When working on same machine and trying to bring up multiple kafka stream application instances and If you have enabled property spring.devtools.restart.enabled (which mostly is the case in dev profile), you might want to disable it as when the same application instance restarts automatically it might not get store lock. This is what I was facing and was able to resolve by disabling restart behavior.</p>\n"},{"tags":[],"owner":{"account_id":17029076,"reputation":298,"user_id":12319598,"display_name":"Jacek Sawko"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1650442927,"creation_date":1650442927,"answer_id":71936349,"question_id":67545981,"body_markdown":"In my case perfectly works specyfing separate `@TestConfiguration` class in which I specify counter for changing application name for each SpringBoot Test Context.\r\n\r\n```\r\n@TestConfiguration\r\npublic class TestKafkaStreamsConfig {\r\n    private static final AtomicInteger COUNTER = new AtomicInteger();\r\n\r\n    @Bean(name = KafkaStreamsDefaultConfiguration.DEFAULT_STREAMS_CONFIG_BEAN_NAME)\r\n    KafkaStreamsConfiguration kStreamsConfig() {\r\n        final var props = new HashMap&lt;String, Object&gt;();\r\n        props.put(StreamsConfig.APPLICATION_ID_CONFIG, &quot;test-application-id-&quot; + COUNTER.getAndIncrement());\r\n\r\n//      rest of configuration  \r\n        return new KafkaStreamsConfiguration(props);\r\n    }\r\n}\r\n```\r\n\r\nOf course I had to enable spring bean overriding to replace primary configuration.\r\n\r\nEdit: I&#39;m using SpringBoot v. 2.5.10 so in my case to make use of `@TestConfiguration` i have to pass it to `@SpringBootTest(classes =)` annotation.","title":"StreamsException: Unable to initialize state, this can happen if multiple instances of Kafka Streams are running in the same state directory","body":"<p>In my case perfectly works specyfing separate <code>@TestConfiguration</code> class in which I specify counter for changing application name for each SpringBoot Test Context.</p>\n<pre><code>@TestConfiguration\npublic class TestKafkaStreamsConfig {\n    private static final AtomicInteger COUNTER = new AtomicInteger();\n\n    @Bean(name = KafkaStreamsDefaultConfiguration.DEFAULT_STREAMS_CONFIG_BEAN_NAME)\n    KafkaStreamsConfiguration kStreamsConfig() {\n        final var props = new HashMap&lt;String, Object&gt;();\n        props.put(StreamsConfig.APPLICATION_ID_CONFIG, &quot;test-application-id-&quot; + COUNTER.getAndIncrement());\n\n//      rest of configuration  \n        return new KafkaStreamsConfiguration(props);\n    }\n}\n</code></pre>\n<p>Of course I had to enable spring bean overriding to replace primary configuration.</p>\n<p>Edit: I'm using SpringBoot v. 2.5.10 so in my case to make use of <code>@TestConfiguration</code> i have to pass it to <code>@SpringBootTest(classes =)</code> annotation.</p>\n"},{"tags":[],"owner":{"account_id":7363979,"reputation":31,"user_id":5606324,"display_name":"Paul Crofts"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671128965,"creation_date":1671128965,"answer_id":74816011,"question_id":67545981,"body_markdown":"I was facing the same problem. A single topology in spring boot and I was trying to access the state store for interactive queries. In order to do so I needed a KafkaStreams object as shown below.\r\n\r\n    GlobalKTable&lt;String, String&gt; configTable = builder.globalTable(&quot;config&quot;, \r\n      Materialized.&lt;String, String, KeyValueStore&lt;Bytes, byte[]&gt;&gt; as(&quot;config-store&quot;)\r\n      .withKeySerde(Serdes.String())\r\n      .withValueSerde(Serdes.String()));\r\n\r\n    KafkaStreams streams = new KafkaStreams(builder.build(), kconfig.asProperties());\r\n    streams.start();\r\n    \r\n    ReadOnlyKeyValueStore&lt;String, String&gt; configView = streams.store(StoreQueryParameters.fromNameAndType(&quot;config-store&quot;, QueryableStoreTypes.keyValueStore()));\r\n    \r\n\r\nThe problem is the Spring Kafka Factory bean starts a topology and calling streams.start() causes the lock on the state store as a second start is called.\r\n\r\nThis can be fixed by setting the auto start property to false.\r\n\r\nspring.kafka.streams.auto-startup=false\r\n\r\nThat&#39;s all you need.\r\n","title":"StreamsException: Unable to initialize state, this can happen if multiple instances of Kafka Streams are running in the same state directory","body":"<p>I was facing the same problem. A single topology in spring boot and I was trying to access the state store for interactive queries. In order to do so I needed a KafkaStreams object as shown below.</p>\n<pre><code>GlobalKTable&lt;String, String&gt; configTable = builder.globalTable(&quot;config&quot;, \n  Materialized.&lt;String, String, KeyValueStore&lt;Bytes, byte[]&gt;&gt; as(&quot;config-store&quot;)\n  .withKeySerde(Serdes.String())\n  .withValueSerde(Serdes.String()));\n\nKafkaStreams streams = new KafkaStreams(builder.build(), kconfig.asProperties());\nstreams.start();\n\nReadOnlyKeyValueStore&lt;String, String&gt; configView = streams.store(StoreQueryParameters.fromNameAndType(&quot;config-store&quot;, QueryableStoreTypes.keyValueStore()));\n</code></pre>\n<p>The problem is the Spring Kafka Factory bean starts a topology and calling streams.start() causes the lock on the state store as a second start is called.</p>\n<p>This can be fixed by setting the auto start property to false.</p>\n<p>spring.kafka.streams.auto-startup=false</p>\n<p>That's all you need.</p>\n"},{"tags":[],"owner":{"account_id":8362258,"reputation":1639,"user_id":6280135,"display_name":"Maninder"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679596613,"creation_date":1679596613,"answer_id":75826850,"question_id":67545981,"body_markdown":"I had the same issue as I was running around 7-8 streams together. I just created the unique application id for each stream. Here is the working code along with screenshot for me:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/oZuPr.png\r\n\r\n    public Properties properties() {\r\n        Properties props = new Properties();\r\n        props.put(StreamsConfig.APPLICATION_ID_CONFIG, UUID.randomUUID().toString());\r\n        props.put(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG, KAFKA_BOOTSTRAP_SERVER);\r\n        props.put(StreamsConfig.DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.String().getClass());\r\n        props.put(StreamsConfig.DEFAULT_VALUE_SERDE_CLASS_CONFIG, Serdes.String().getClass().getName());\r\n        props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\r\n        props.put(StreamsConfig.CACHE_MAX_BYTES_BUFFERING_CONFIG, 0);\r\n        props.put(&quot;schema.registry.url&quot;, SCHEMA_REGISTRY_URL);\r\n        props.put(&quot;key.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);\r\n        props.put(&quot;value.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);\r\n        props.put(&quot;group.id&quot;, &quot;my-group-id&quot;);\r\n        return props;\r\n    }","title":"StreamsException: Unable to initialize state, this can happen if multiple instances of Kafka Streams are running in the same state directory","body":"<p>I had the same issue as I was running around 7-8 streams together. I just created the unique application id for each stream. Here is the working code along with screenshot for me:</p>\n<p><a href=\"https://i.stack.imgur.com/oZuPr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oZuPr.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>public Properties properties() {\n    Properties props = new Properties();\n    props.put(StreamsConfig.APPLICATION_ID_CONFIG, UUID.randomUUID().toString());\n    props.put(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG, KAFKA_BOOTSTRAP_SERVER);\n    props.put(StreamsConfig.DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.String().getClass());\n    props.put(StreamsConfig.DEFAULT_VALUE_SERDE_CLASS_CONFIG, Serdes.String().getClass().getName());\n    props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\n    props.put(StreamsConfig.CACHE_MAX_BYTES_BUFFERING_CONFIG, 0);\n    props.put(&quot;schema.registry.url&quot;, SCHEMA_REGISTRY_URL);\n    props.put(&quot;key.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);\n    props.put(&quot;value.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);\n    props.put(&quot;group.id&quot;, &quot;my-group-id&quot;);\n    return props;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8732642,"reputation":135,"user_id":6532188,"display_name":"valeesi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683743762,"creation_date":1683743762,"answer_id":76221633,"question_id":67545981,"body_markdown":"Tried everything but this was the only thing that worked for me\r\n\r\n    rm -rf /tmp/kafka-streams\r\n\r\n\r\nWhere `/tmp/kafka-streams` is the `stateDirectory`\r\n\r\n    props.put(StreamsConfig.STATE_DIR_CONFIG, stateDirectory);","title":"StreamsException: Unable to initialize state, this can happen if multiple instances of Kafka Streams are running in the same state directory","body":"<p>Tried everything but this was the only thing that worked for me</p>\n<pre><code>rm -rf /tmp/kafka-streams\n</code></pre>\n<p>Where <code>/tmp/kafka-streams</code> is the <code>stateDirectory</code></p>\n<pre><code>props.put(StreamsConfig.STATE_DIR_CONFIG, stateDirectory);\n</code></pre>\n"}],"owner":{"account_id":5242831,"reputation":454,"user_id":4189419,"display_name":"Jay Ghiya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7113,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":9,"score":3,"last_activity_date":1683743762,"creation_date":1621076430,"question_id":67545981,"body_markdown":"This is regarding upgrading existing code base in production which uses windowing  from kafka-clients,kafka-streams,spring-kafka 2.4.0 to 2.6.x and also upgrading spring-boot-starter-parentfrom 2.2.2.RELEASE to 2.3.x as 2.2 is incompatible with kafka-streams 2.6.\r\n\r\nThe existing code had these beans mentioned below with old verions(2.4.0,2.2 spring release):\r\n\r\n    @Bean(&quot;DataCompressionCustomTopology&quot;)\r\n    public Topology customTopology(@Qualifier(&quot;CustomFactoryBean&quot;) StreamsBuilder streamsBuilder)  {\r\n     //Your topology code\r\n     return streamsBuilder.build();\r\n    }\r\n        \r\n    @Bean(&quot;GenericKafkaStreams&quot;)\r\n    public KafkaStreams kStream() {\r\n    //Your kafka streams code\r\n    return kafkaStreams;\r\n    }\r\n\r\nNow after upgrading kafka streams,kafka clients to to 2.6.2 and spring kafka to 2.6.x, the following exception was observed:\r\n\r\n    2021-05-13 12:33:51.954 [Persistence-Realtime-Transformation] [main] WARN   o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean &#39;CustomFactoryBean&#39;; nested exception is org.springframework.kafka.KafkaException: Could not start stream: ; nested exception is org.apache.kafka.streams.errors.StreamsException: Unable to initialize state, this can happen if multiple instances of Kafka Streams are running in the same state directory\r\n       \r\n","title":"StreamsException: Unable to initialize state, this can happen if multiple instances of Kafka Streams are running in the same state directory","body":"<p>This is regarding upgrading existing code base in production which uses windowing  from kafka-clients,kafka-streams,spring-kafka 2.4.0 to 2.6.x and also upgrading spring-boot-starter-parentfrom 2.2.2.RELEASE to 2.3.x as 2.2 is incompatible with kafka-streams 2.6.</p>\n<p>The existing code had these beans mentioned below with old verions(2.4.0,2.2 spring release):</p>\n<pre><code>@Bean(&quot;DataCompressionCustomTopology&quot;)\npublic Topology customTopology(@Qualifier(&quot;CustomFactoryBean&quot;) StreamsBuilder streamsBuilder)  {\n //Your topology code\n return streamsBuilder.build();\n}\n    \n@Bean(&quot;GenericKafkaStreams&quot;)\npublic KafkaStreams kStream() {\n//Your kafka streams code\nreturn kafkaStreams;\n}\n</code></pre>\n<p>Now after upgrading kafka streams,kafka clients to to 2.6.2 and spring kafka to 2.6.x, the following exception was observed:</p>\n<pre><code>2021-05-13 12:33:51.954 [Persistence-Realtime-Transformation] [main] WARN   o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'CustomFactoryBean'; nested exception is org.springframework.kafka.KafkaException: Could not start stream: ; nested exception is org.apache.kafka.streams.errors.StreamsException: Unable to initialize state, this can happen if multiple instances of Kafka Streams are running in the same state directory\n   \n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-data"],"comments":[{"owner":{"account_id":81495,"reputation":3962,"user_id":229743,"display_name":"Taylor"},"score":0,"creation_date":1683744531,"post_id":76221624,"comment_id":134415400,"body_markdown":"It seems like you&#39;re asking how to source a string from something other than an environment variable, which is very open ended.  What are you trying to do?  How do you want to provide the config dir?","body":"It seems like you&#39;re asking how to source a string from something other than an environment variable, which is very open ended.  What are you trying to do?  How do you want to provide the config dir?"},{"owner":{"account_id":1310600,"reputation":3828,"user_id":1258669,"accept_rate":73,"display_name":"OTUser"},"score":0,"creation_date":1683745428,"post_id":76221624,"comment_id":134415552,"body_markdown":"@Taylor I want to load the properties file based on the active profile provided and without having to provide CONFIG_DIR as environment variable","body":"@Taylor I want to load the properties file based on the active profile provided and without having to provide CONFIG_DIR as environment variable"},{"owner":{"account_id":81495,"reputation":3962,"user_id":229743,"display_name":"Taylor"},"score":0,"creation_date":1683749708,"post_id":76221624,"comment_id":134416357,"body_markdown":"Like this https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.files ?","body":"Like this <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.files\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/html/&hellip;</a> ?"}],"owner":{"account_id":1310600,"reputation":3828,"user_id":1258669,"accept_rate":73,"display_name":"OTUser"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683743702,"creation_date":1683743702,"question_id":76221624,"body_markdown":"We are initializing datasource as per the active profile as below and we are providing the CONFIG_DIR as environment variable during the startup as `SET CONFIG=-DCONFIG_DIR=src\\main\\resources`, am wondering is there an alternative to initialize Datasource without having to provide the `CONFIG_DIR` as environment variable\r\n\r\n    String dbConfigFilePath = env.getProperty(&quot;CONFIG_DIR&quot;) + \r\n    &quot;/datasource&quot;+propertyName+env.getProperty(&quot;spring.profiles.active&quot;) + &quot;.properties&quot;;\r\n\tHikariConfig hikariConfig = new HikariConfig(dbConfigFilePath);","title":"SpringBoot 2.7.4: Initialize Datasource from active profile properties","body":"<p>We are initializing datasource as per the active profile as below and we are providing the CONFIG_DIR as environment variable during the startup as <code>SET CONFIG=-DCONFIG_DIR=src\\main\\resources</code>, am wondering is there an alternative to initialize Datasource without having to provide the <code>CONFIG_DIR</code> as environment variable</p>\n<pre><code>String dbConfigFilePath = env.getProperty(&quot;CONFIG_DIR&quot;) + \n&quot;/datasource&quot;+propertyName+env.getProperty(&quot;spring.profiles.active&quot;) + &quot;.properties&quot;;\nHikariConfig hikariConfig = new HikariConfig(dbConfigFilePath);\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","pgjdbc-ng"],"comments":[{"owner":{"account_id":15633014,"reputation":1150,"user_id":11278807,"display_name":"nulldroid"},"score":0,"creation_date":1641742498,"post_id":70642711,"comment_id":124880057,"body_markdown":"Have you tried connecting to your SSL enabled postgres server in SIT environment using psql? Also, are you using Docker?\nhttps://jdbc.postgresql.org/documentation/80/ssl.html","body":"Have you tried connecting to your SSL enabled postgres server in SIT environment using psql? Also, are you using Docker? <a href=\"https://jdbc.postgresql.org/documentation/80/ssl.html\" rel=\"nofollow noreferrer\">jdbc.postgresql.org/documentation/80/ssl.html</a>"},{"owner":{"account_id":23683798,"reputation":11,"user_id":17709024,"display_name":"Bernie.T"},"score":0,"creation_date":1641744714,"post_id":70642711,"comment_id":124880712,"body_markdown":"@nulldroid Thanks for your comment. I can&#39;t connect with psql because the verison of psql is too low to support tls 1.3. But I&#39;m sure other connections from PostgreSQL JDBC Driver connect with SSL enabled. And No, there are no Docker in SIT.","body":"@nulldroid Thanks for your comment. I can&#39;t connect with psql because the verison of psql is too low to support tls 1.3. But I&#39;m sure other connections from PostgreSQL JDBC Driver connect with SSL enabled. And No, there are no Docker in SIT."}],"answers":[{"tags":[],"owner":{"account_id":1838851,"reputation":91,"user_id":1668687,"display_name":"Sachanski"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683743022,"creation_date":1683740748,"answer_id":76221276,"question_id":70642711,"body_markdown":"I was in (what I think is) a similar situation.\r\n\r\nI have one `HikariDataSource` for connections to the database which works fine both locally and on the dev environment and one `PGDataSource` (from pgjdbc-ng) which works locally but timeouts on the dev environment (I am also using it for NOTIFY/LISTEN).\r\n\r\nTurns out the problem was due to insufficient numbers. Specifically the remote environment is a k8s cluster which starts docker containers. Apparently there is not enough entropy in docker containers so a call to `SecureRandom.getInstanceStrong().nextInt()` blocks since it uses `/dev/random`, because this is the default algorithm chosen by Java.\r\n\r\nThe proper fix would be to configure the docker containers to provide enough entropy for `/dev/random` not to hang, however right now I am using a workaround by setting `Security.setProperty(&quot;securerandom.strongAlgorithms&quot;, &quot;NativePRNG&quot;)` at startup which makes Java choose a non-blocking algorithm for `SecureRandom.getInstanceStrong()`.","title":"Postgresql connecting issue with pgjdbc-ng","body":"<p>I was in (what I think is) a similar situation.</p>\n<p>I have one <code>HikariDataSource</code> for connections to the database which works fine both locally and on the dev environment and one <code>PGDataSource</code> (from pgjdbc-ng) which works locally but timeouts on the dev environment (I am also using it for NOTIFY/LISTEN).</p>\n<p>Turns out the problem was due to insufficient numbers. Specifically the remote environment is a k8s cluster which starts docker containers. Apparently there is not enough entropy in docker containers so a call to <code>SecureRandom.getInstanceStrong().nextInt()</code> blocks since it uses <code>/dev/random</code>, because this is the default algorithm chosen by Java.</p>\n<p>The proper fix would be to configure the docker containers to provide enough entropy for <code>/dev/random</code> not to hang, however right now I am using a workaround by setting <code>Security.setProperty(&quot;securerandom.strongAlgorithms&quot;, &quot;NativePRNG&quot;)</code> at startup which makes Java choose a non-blocking algorithm for <code>SecureRandom.getInstanceStrong()</code>.</p>\n"}],"owner":{"account_id":23683798,"reputation":11,"user_id":17709024,"display_name":"Bernie.T"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1030,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683743022,"creation_date":1641741842,"question_id":70642711,"body_markdown":"I am trying to connect postgresql with [pgjdbc-ng](https://github.com/impossibl/pgjdbc-ng)(0.8.9) for asynchronous listener. Everything work fine when developing, but I got connect timeout in SIT environment.\r\n&lt;br&gt;\r\nThere is a postgresql 13 server in SIT, force client connect with ssl, use tls 1.3 only.\r\n&lt;br&gt;\r\nHere is the code:\r\n```java\r\n@Bean\r\npublic PGConnection getPGConnection() throws SQLException {\r\n    var connectionString = String\r\n        .format(&quot;jdbc:pgsql://%s/%s?ssl.mode=require&quot;, host, database);\r\n    return DriverManager\r\n            .getConnection(connectionString, user, password)\r\n            .unwrap(PGConnection.class);\r\n}\r\n```\r\nAnd here is the stacktrace print out:\r\n```\r\nCause by: java.io.IOException: Timeout starting connection\r\n    at com.impossibl.postgres.protocol.v30.ServerConnectionFactory.startup\r\n    ...\r\n```\r\n___\r\nIt confuses me because only the connection from above code got timeout error. **Other connections of Spring Data JAP(PostgreSQL JDBC Driver) are totally correct in same application at same time.** And the worst is I can&#39;t reproduce in my enviroment. \r\n&lt;br&gt;\r\nAt first I thought it was about tls protocol verison because the application need to work on  a mechine which openssl version in 1.0.1(tls 1.3 is not supported). But it seens not because other connections work properly.\r\n&lt;br&gt;\r\nI kown it was not rejected from connection limit for postgres user because it throw different exception. And I&#39;ve tried use different way to get connection like:\r\n```java\r\nvar dataSource = new PGDataSource();\r\ndataSource.setUrl(&quot;jdbc:pgsql://host/dbname&quot;);\r\ndataSource.setUser(user);\r\ndataSource.setPassword(password);  \r\ndataSource.setSslMode(SSLMode.Require.name());\r\nvar conn = dataSource.getConnection().unwrap(PGConnection.class);\r\n```\r\nIt turned into same result, work in developing and fail in SIT environment.\r\n&lt;br&gt;\r\n___\r\nDose anybody has similar experiences?\r\n&lt;br&gt;\r\nOr please tell me what should I check with DBA, `pg_hba.conf` or something else?\r\n&lt;br&gt;\r\nThank you.","title":"Postgresql connecting issue with pgjdbc-ng","body":"<p>I am trying to connect postgresql with <a href=\"https://github.com/impossibl/pgjdbc-ng\" rel=\"nofollow noreferrer\">pgjdbc-ng</a>(0.8.9) for asynchronous listener. Everything work fine when developing, but I got connect timeout in SIT environment.\n<br>\nThere is a postgresql 13 server in SIT, force client connect with ssl, use tls 1.3 only.\n<br>\nHere is the code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic PGConnection getPGConnection() throws SQLException {\n    var connectionString = String\n        .format(&quot;jdbc:pgsql://%s/%s?ssl.mode=require&quot;, host, database);\n    return DriverManager\n            .getConnection(connectionString, user, password)\n            .unwrap(PGConnection.class);\n}\n</code></pre>\n<p>And here is the stacktrace print out:</p>\n<pre><code>Cause by: java.io.IOException: Timeout starting connection\n    at com.impossibl.postgres.protocol.v30.ServerConnectionFactory.startup\n    ...\n</code></pre>\n<hr />\n<p>It confuses me because only the connection from above code got timeout error. <strong>Other connections of Spring Data JAP(PostgreSQL JDBC Driver) are totally correct in same application at same time.</strong> And the worst is I can't reproduce in my enviroment.\n<br>\nAt first I thought it was about tls protocol verison because the application need to work on  a mechine which openssl version in 1.0.1(tls 1.3 is not supported). But it seens not because other connections work properly.\n<br>\nI kown it was not rejected from connection limit for postgres user because it throw different exception. And I've tried use different way to get connection like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var dataSource = new PGDataSource();\ndataSource.setUrl(&quot;jdbc:pgsql://host/dbname&quot;);\ndataSource.setUser(user);\ndataSource.setPassword(password);  \ndataSource.setSslMode(SSLMode.Require.name());\nvar conn = dataSource.getConnection().unwrap(PGConnection.class);\n</code></pre>\n<p>It turned into same result, work in developing and fail in SIT environment.\n<br></p>\n<hr />\n<p>Dose anybody has similar experiences?\n<br>\nOr please tell me what should I check with DBA, <code>pg_hba.conf</code> or something else?\n<br>\nThank you.</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1683652052,"post_id":76211823,"comment_id":134398298,"body_markdown":"Please don&#39;t use images for text.","body":"Please don&#39;t use images for text."},{"owner":{"account_id":23677584,"reputation":89,"user_id":17703613,"display_name":"OrlandoVSilva"},"score":0,"creation_date":1683652461,"post_id":76211823,"comment_id":134398414,"body_markdown":"@aled apologies, I have removed it, and added text instead.\nThank you","body":"@aled apologies, I have removed it, and added text instead. Thank you"}],"answers":[{"comments":[{"owner":{"account_id":6148867,"reputation":4677,"user_id":4793951,"display_name":"Zircon"},"score":0,"creation_date":1683725889,"post_id":76212012,"comment_id":134410835,"body_markdown":"@SolomonSlow by that I meant: move the entire statement `Thread t = Thread.currentThread();` into method scope so that is assigned at method execution time instead of object creation time.","body":"@SolomonSlow by that I meant: move the entire statement <code>Thread t = Thread.currentThread();</code> into method scope so that is assigned at method execution time instead of object creation time."}],"tags":[],"owner":{"account_id":6148867,"reputation":4677,"user_id":4793951,"display_name":"Zircon"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1683742942,"creation_date":1683653487,"answer_id":76212012,"question_id":76211823,"body_markdown":"`Q`&#39;s field `Thread t` is being assigned `Thread.currentThread()` when an instance of `Q` is created, and a `Q` is being created on your main thread. So `t` references the main thread from the very beginning.\r\n\r\nInstead, remove `Thread t` and replace all instances of `t.getName()` with `Thread.currentThread().getName()`. This will directly retrieve the name of the thread that is actually making calls to methods of `Q` at runtime.\r\n\r\n(Or, you can just declare `Thread&#160;t&#160;=&#160;Thread.currentThread()` within each method instead. It will be assigned the &quot;current thread&quot; which in that case would be the one calling the method.)","title":"Thread .getName method, is not displaying accurate/desired thread name","body":"<p><code>Q</code>'s field <code>Thread t</code> is being assigned <code>Thread.currentThread()</code> when an instance of <code>Q</code> is created, and a <code>Q</code> is being created on your main thread. So <code>t</code> references the main thread from the very beginning.</p>\n<p>Instead, remove <code>Thread t</code> and replace all instances of <code>t.getName()</code> with <code>Thread.currentThread().getName()</code>. This will directly retrieve the name of the thread that is actually making calls to methods of <code>Q</code> at runtime.</p>\n<p>(Or, you can just declare <code>ThreadÂ tÂ =Â Thread.currentThread()</code> within each method instead. It will be assigned the &quot;current thread&quot; which in that case would be the one calling the method.)</p>\n"}],"owner":{"account_id":23677584,"reputation":89,"user_id":17703613,"display_name":"OrlandoVSilva"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76212012,"answer_count":1,"score":0,"last_activity_date":1683742942,"creation_date":1683651889,"question_id":76211823,"body_markdown":"Can you help me understand why the name of the thread when executing the methods `put()`, and `get()`, is still `main thread`, and not `Producer1`, and `Consumer1` respectively.\r\n\r\nGoal: Solution in order to have the name of the threads respectively as: `Producer1`, and `Consumer1` or explanation as to why this is happening.\r\n\r\nMore descriptive goal:\r\n\r\nProducer1, Put 0\r\nConsumer1, List is empty!\r\n\r\nProducer1, Put 1\r\nConsumer1, Got: [0,1]\r\nConsumer1, Consumed: &quot;1&quot;\r\n\r\nAnd so on...\r\n\r\nErrors: No errors, just not desired outcome:\r\n\r\nmain thread, Put 0\r\nmain thread, List is empty!\r\n\r\nmain thread, Put 1\r\nmain thread, Got: [0,1]\r\nmain thread, Consumed: &quot;1&quot;\r\n\r\nAttempts: I have also tried the `join` method that is commented on the Main class, but the end-result is the same.\r\n\r\nMain:\r\n```\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        Q queue = new Q();\r\n\r\n        Producer producer1 = new Producer(queue, &quot;Producer1&quot;);\r\n        //Producer producer2 = new Producer(queue, &quot;Producer2&quot;);      \r\n\r\n        Consumer consumer1 = new Consumer(queue, &quot;Consumer1&quot;);\r\n\r\n        producer1.thread.start();\r\n        //producer2.thread.start();\r\n\r\n        consumer1.thread.start();\r\n\r\n        /*\r\n        try{\r\n            System.out.println(&quot;Waiting for threads to finish.&quot;);\r\n            producer1.thread.join();\r\n            //producer2.thread.join();\r\n            consumer1.thread.join();\r\n        } catch (InterruptedException e){\r\n            System.out.println(&quot;Thread interrupted&quot;);\r\n            System.out.println();\r\n            System.out.println(e);\r\n        }\r\n        */\r\n    }\r\n}\r\n```\r\n\r\nQ:\r\n```\r\npublic class Q {\r\n    //int n;\r\n    boolean ready = false;\r\n    List&lt;Integer&gt; products;\r\n    Thread t = Thread.currentThread();\r\n\r\n    Q(){\r\n      products = new ArrayList&lt;&gt;(5);\r\n    }\r\n\r\n    // ------------------------\r\n    synchronized void put(int n){\r\n        while (ready){\r\n            try {\r\n                wait();\r\n            } catch (InterruptedException e){\r\n                System.out.println(t.getName() + &quot; was interrupted!&quot;);\r\n                System.out.println();\r\n                System.out.println(e);\r\n            }\r\n        }\r\n\r\n        if(products.size() &lt; 5){\r\n            this.products.add(n);\r\n            System.out.println(t.getName() + &quot; thread, Put: &quot; +  n);\r\n            ready = true;\r\n            notify();\r\n        } else {\r\n            System.out.println(t.getName() + &quot; thread, List is full!&quot;);\r\n            ready = true;\r\n            notify();\r\n        }\r\n        //this.n = n;\r\n    }\r\n\r\n    // ------------------------\r\n    synchronized List&lt;Integer&gt; get(){\r\n        while (!ready){\r\n            try {\r\n                wait();\r\n            } catch (InterruptedException e){\r\n                System.out.println(t.getName() + &quot; thread was interrupted!&quot;);\r\n                System.out.println();\r\n                System.out.println(e);\r\n            }\r\n        }\r\n\r\n        if(products.size() &gt; 1){\r\n            System.out.println(t.getName() + &quot; thread, Got: &quot; + products);\r\n            System.out.println(t.getName() + &quot; thread, Consumed: \\&quot;&quot; + (products.get(products.size() - 1)) + &quot;\\&quot;&quot;);\r\n            removeLastElement();\r\n            ready = false;\r\n            notify();\r\n        } else {\r\n            System.out.println(t.getName() + &quot; thread, List is empty!&quot;);\r\n            ready = false;\r\n            notify();\r\n        }\r\n\r\n        //System.out.println(&quot;Got: &quot; + n);\r\n        //ready = false;\r\n        //notify();\r\n        return products;\r\n    }\r\n\r\n    void removeLastElement(){\r\n        int index = (this.products.size() - 1);\r\n        this.products.remove(index);\r\n    }\r\n}\r\n```\r\n\r\nProducer:\r\n```\r\npublic class Producer implements Runnable{\r\n    Q queue;\r\n    Thread thread;\r\n\r\n    Producer(Q queue, String threadName){\r\n        thread = new Thread(this, threadName);\r\n        System.out.println(&quot;Test: &quot; + thread.getName());\r\n        this.queue = queue;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        int i = 0;\r\n\r\n        for(int j = 0; j &lt; 20; j++){\r\n            queue.put(i++);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nConsumer:\r\n```\r\npublic class Consumer implements Runnable{\r\n    Q queue;\r\n    Thread thread;\r\n\r\n    Consumer(Q queue, String threadName){\r\n        thread = new Thread(this, threadName);\r\n        System.out.println(&quot;Test: &quot; + thread.getName());\r\n        this.queue = queue;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        for(int j = 0; j &lt; 20; j++){\r\n            queue.get();\r\n            System.out.println();\r\n        }\r\n    }\r\n}\r\n```\r\nCan you assist?\r\nThank you.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Ekz8G.png","title":"Thread .getName method, is not displaying accurate/desired thread name","body":"<p>Can you help me understand why the name of the thread when executing the methods <code>put()</code>, and <code>get()</code>, is still <code>main thread</code>, and not <code>Producer1</code>, and <code>Consumer1</code> respectively.</p>\n<p>Goal: Solution in order to have the name of the threads respectively as: <code>Producer1</code>, and <code>Consumer1</code> or explanation as to why this is happening.</p>\n<p>More descriptive goal:</p>\n<p>Producer1, Put 0\nConsumer1, List is empty!</p>\n<p>Producer1, Put 1\nConsumer1, Got: [0,1]\nConsumer1, Consumed: &quot;1&quot;</p>\n<p>And so on...</p>\n<p>Errors: No errors, just not desired outcome:</p>\n<p>main thread, Put 0\nmain thread, List is empty!</p>\n<p>main thread, Put 1\nmain thread, Got: [0,1]\nmain thread, Consumed: &quot;1&quot;</p>\n<p>Attempts: I have also tried the <code>join</code> method that is commented on the Main class, but the end-result is the same.</p>\n<p>Main:</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        Q queue = new Q();\n\n        Producer producer1 = new Producer(queue, &quot;Producer1&quot;);\n        //Producer producer2 = new Producer(queue, &quot;Producer2&quot;);      \n\n        Consumer consumer1 = new Consumer(queue, &quot;Consumer1&quot;);\n\n        producer1.thread.start();\n        //producer2.thread.start();\n\n        consumer1.thread.start();\n\n        /*\n        try{\n            System.out.println(&quot;Waiting for threads to finish.&quot;);\n            producer1.thread.join();\n            //producer2.thread.join();\n            consumer1.thread.join();\n        } catch (InterruptedException e){\n            System.out.println(&quot;Thread interrupted&quot;);\n            System.out.println();\n            System.out.println(e);\n        }\n        */\n    }\n}\n</code></pre>\n<p>Q:</p>\n<pre><code>public class Q {\n    //int n;\n    boolean ready = false;\n    List&lt;Integer&gt; products;\n    Thread t = Thread.currentThread();\n\n    Q(){\n      products = new ArrayList&lt;&gt;(5);\n    }\n\n    // ------------------------\n    synchronized void put(int n){\n        while (ready){\n            try {\n                wait();\n            } catch (InterruptedException e){\n                System.out.println(t.getName() + &quot; was interrupted!&quot;);\n                System.out.println();\n                System.out.println(e);\n            }\n        }\n\n        if(products.size() &lt; 5){\n            this.products.add(n);\n            System.out.println(t.getName() + &quot; thread, Put: &quot; +  n);\n            ready = true;\n            notify();\n        } else {\n            System.out.println(t.getName() + &quot; thread, List is full!&quot;);\n            ready = true;\n            notify();\n        }\n        //this.n = n;\n    }\n\n    // ------------------------\n    synchronized List&lt;Integer&gt; get(){\n        while (!ready){\n            try {\n                wait();\n            } catch (InterruptedException e){\n                System.out.println(t.getName() + &quot; thread was interrupted!&quot;);\n                System.out.println();\n                System.out.println(e);\n            }\n        }\n\n        if(products.size() &gt; 1){\n            System.out.println(t.getName() + &quot; thread, Got: &quot; + products);\n            System.out.println(t.getName() + &quot; thread, Consumed: \\&quot;&quot; + (products.get(products.size() - 1)) + &quot;\\&quot;&quot;);\n            removeLastElement();\n            ready = false;\n            notify();\n        } else {\n            System.out.println(t.getName() + &quot; thread, List is empty!&quot;);\n            ready = false;\n            notify();\n        }\n\n        //System.out.println(&quot;Got: &quot; + n);\n        //ready = false;\n        //notify();\n        return products;\n    }\n\n    void removeLastElement(){\n        int index = (this.products.size() - 1);\n        this.products.remove(index);\n    }\n}\n</code></pre>\n<p>Producer:</p>\n<pre><code>public class Producer implements Runnable{\n    Q queue;\n    Thread thread;\n\n    Producer(Q queue, String threadName){\n        thread = new Thread(this, threadName);\n        System.out.println(&quot;Test: &quot; + thread.getName());\n        this.queue = queue;\n    }\n\n    @Override\n    public void run() {\n        int i = 0;\n\n        for(int j = 0; j &lt; 20; j++){\n            queue.put(i++);\n        }\n    }\n}\n</code></pre>\n<p>Consumer:</p>\n<pre><code>public class Consumer implements Runnable{\n    Q queue;\n    Thread thread;\n\n    Consumer(Q queue, String threadName){\n        thread = new Thread(this, threadName);\n        System.out.println(&quot;Test: &quot; + thread.getName());\n        this.queue = queue;\n    }\n\n    @Override\n    public void run() {\n        for(int j = 0; j &lt; 20; j++){\n            queue.get();\n            System.out.println();\n        }\n    }\n}\n</code></pre>\n<p>Can you assist?\nThank you.</p>\n"},{"tags":["java","android","android-studio","httpurlconnection","yandex-api"],"owner":{"account_id":28570845,"reputation":1,"user_id":21873091,"display_name":"Yahya Kaya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683742710,"creation_date":1683738520,"question_id":76220998,"body_markdown":"Class code:\r\n\r\n```java\r\n    @Override\r\n    protected String doInBackground(Void... voids) {\r\n        String result = &quot;&quot;;\r\n        try {\r\n            URL url = new URL(&quot;https://translate.api.cloud.yandex.net/translate/v2/translate&quot;);\r\n            HttpURLConnection conn = (HttpURLConnection) url.openConnection();\r\n            conn.setDoOutput(true);\r\n            conn.setRequestMethod(&quot;POST&quot;);\r\n            conn.setRequestProperty(&quot;Authorization&quot;, &quot;Bearer &quot; + iamToken);\r\n            conn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n\r\n            String body = String.format(&quot;{\\&quot;targetLanguageCode\\&quot;:\\&quot;%s\\&quot;,\\&quot;texts\\&quot;:\\&quot;%s\\&quot;,\\&quot;folderId\\&quot;:\\&quot;%s\\&quot;}&quot;, lang, text, folderId);\r\n            byte[] input = body.getBytes(&quot;utf-8&quot;);\r\n            OutputStream os = conn.getOutputStream();\r\n            os.write(input, 0, input.length);\r\n\r\n            BufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream(), &quot;utf-8&quot;));\r\n            StringBuilder responseBuilder = new StringBuilder();\r\n            String line;\r\n            while ((line = reader.readLine()) != null) {\r\n                responseBuilder.append(line);\r\n            }\r\n            reader.close();\r\n            String response = responseBuilder.toString();\r\n\r\n            JSONObject jsonResponse = new JSONObject(response);\r\n            JSONArray translationsArray = jsonResponse.getJSONArray(&quot;translations&quot;);\r\n            JSONObject translationObj = translationsArray.getJSONObject(0);\r\n            result = translationObj.getString(&quot;text&quot;);\r\n        } catch (IOException | JSONException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return result;\r\n    }\r\n\r\n    @Override\r\n    protected void onPostExecute(String result) {\r\n        Log.d(&quot;translated&quot;,result);\r\n    }\r\n}\r\n```\r\n\r\nTry stops at the line:\r\n\r\n```java\r\nBufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream(), &quot;utf-8&quot;));\r\n```\r\n\r\nWith the following message:\r\n\r\n&gt; java.io.FileNotFoundException:\r\n&gt; https://translate.api.cloud.yandex.net/translate/v2/translate\r\n\r\nI don&#39;t understand what&#39;s wrong, the code worked in IntelliJ IDEA but refuses to work in Android Studio.\r\n\r\nI will be glad to any advice!","title":"Can&#39;t translate text for Android app in Android studio using Yandex Translate API","body":"<p>Class code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Override\n    protected String doInBackground(Void... voids) {\n        String result = &quot;&quot;;\n        try {\n            URL url = new URL(&quot;https://translate.api.cloud.yandex.net/translate/v2/translate&quot;);\n            HttpURLConnection conn = (HttpURLConnection) url.openConnection();\n            conn.setDoOutput(true);\n            conn.setRequestMethod(&quot;POST&quot;);\n            conn.setRequestProperty(&quot;Authorization&quot;, &quot;Bearer &quot; + iamToken);\n            conn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\n\n            String body = String.format(&quot;{\\&quot;targetLanguageCode\\&quot;:\\&quot;%s\\&quot;,\\&quot;texts\\&quot;:\\&quot;%s\\&quot;,\\&quot;folderId\\&quot;:\\&quot;%s\\&quot;}&quot;, lang, text, folderId);\n            byte[] input = body.getBytes(&quot;utf-8&quot;);\n            OutputStream os = conn.getOutputStream();\n            os.write(input, 0, input.length);\n\n            BufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream(), &quot;utf-8&quot;));\n            StringBuilder responseBuilder = new StringBuilder();\n            String line;\n            while ((line = reader.readLine()) != null) {\n                responseBuilder.append(line);\n            }\n            reader.close();\n            String response = responseBuilder.toString();\n\n            JSONObject jsonResponse = new JSONObject(response);\n            JSONArray translationsArray = jsonResponse.getJSONArray(&quot;translations&quot;);\n            JSONObject translationObj = translationsArray.getJSONObject(0);\n            result = translationObj.getString(&quot;text&quot;);\n        } catch (IOException | JSONException e) {\n            e.printStackTrace();\n        }\n        return result;\n    }\n\n    @Override\n    protected void onPostExecute(String result) {\n        Log.d(&quot;translated&quot;,result);\n    }\n}\n</code></pre>\n<p>Try stops at the line:</p>\n<pre class=\"lang-java prettyprint-override\"><code>BufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream(), &quot;utf-8&quot;));\n</code></pre>\n<p>With the following message:</p>\n<blockquote>\n<p>java.io.FileNotFoundException:\n<a href=\"https://translate.api.cloud.yandex.net/translate/v2/translate\" rel=\"nofollow noreferrer\">https://translate.api.cloud.yandex.net/translate/v2/translate</a></p>\n</blockquote>\n<p>I don't understand what's wrong, the code worked in IntelliJ IDEA but refuses to work in Android Studio.</p>\n<p>I will be glad to any advice!</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1670223744,"post_id":74658355,"comment_id":131817422,"body_markdown":"Spring Cloud is tied to specific versions of Spring Boot. When upgrading SPring BOot you must probably also upgrade Spring Cloud to a newer/compatible version. Your version isn&#39;t compatible thus you get these kinds of errors.","body":"Spring Cloud is tied to specific versions of Spring Boot. When upgrading SPring BOot you must probably also upgrade Spring Cloud to a newer/compatible version. Your version isn&#39;t compatible thus you get these kinds of errors."}],"answers":[{"comments":[{"owner":{"account_id":296370,"reputation":3367,"user_id":601288,"accept_rate":89,"display_name":"M-Razavi"},"score":1,"creation_date":1677162751,"post_id":74660977,"comment_id":133286518,"body_markdown":"As @M. Deinum commented This problem would be resolved when you use the compatible version of &#39;org.springframework.cloud:spring-cloud-dependencies&#39;","body":"As @M. Deinum commented This problem would be resolved when you use the compatible version of &#39;org.springframework.cloud:spring-cloud-dependencies&#39;"}],"tags":[],"owner":{"account_id":1485868,"reputation":676,"user_id":1394172,"display_name":"hillel_guy"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1670011678,"creation_date":1670011678,"answer_id":74660977,"question_id":74658355,"body_markdown":"Seem like this is a known [issue][1] for this version\r\n\r\n\r\n  [1]: https://github.com/spring-attic/spring-cloud-aws/issues/799","title":"how to fix java.lang.NoClassDefFoundError: org/springframework/boot/Bootstrapper?","body":"<p>Seem like this is a known <a href=\"https://github.com/spring-attic/spring-cloud-aws/issues/799\" rel=\"nofollow noreferrer\">issue</a> for this version</p>\n"},{"tags":[],"owner":{"account_id":1468369,"reputation":159,"user_id":1392873,"display_name":"mandroid"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683742389,"creation_date":1683742389,"answer_id":76221474,"question_id":74658355,"body_markdown":"I had the same error message when I had dependencies some of which were compiled by later version of Java.","title":"how to fix java.lang.NoClassDefFoundError: org/springframework/boot/Bootstrapper?","body":"<p>I had the same error message when I had dependencies some of which were compiled by later version of Java.</p>\n"}],"owner":{"account_id":16841203,"reputation":43,"user_id":12176569,"display_name":"Sarfraz z"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5163,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74660977,"answer_count":2,"score":1,"last_activity_date":1683742389,"creation_date":1669996418,"question_id":74658355,"body_markdown":"tried upgrading spring-boot from 2.5 to 2.6 facing the below issue, not sure what went wrong\r\n\r\nbellow are some of the dependencies which we mention version, others are all we don&#39;t mention the versions and takes from parent\r\n\r\n\r\n```\r\n&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.yaml&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;1.31&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\n\r\n\r\n```\r\n&lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.awspring.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-aws-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;2.3.0&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n                &lt;artifactId&gt;aws-java-sdk-bom&lt;/artifactId&gt;\r\n                &lt;version&gt;1.12.89&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n                &lt;artifactId&gt;bom&lt;/artifactId&gt;\r\n                &lt;version&gt;2.16.67&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n```\r\n\r\n\r\n\r\n```\r\n20:27:56.606 [main] ERROR org.springframework.boot.SpringApplication - Application run failed\r\njava.lang.NoClassDefFoundError: org/springframework/boot/Bootstrapper\r\n\tat java.base/java.lang.ClassLoader.defineClass1(Native Method)\r\n\tat java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1013)\r\n\tat java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:150)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:862)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:760)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:681)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:639)\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n\r\n```\r\n\r\n\r\nresolution for the error","title":"how to fix java.lang.NoClassDefFoundError: org/springframework/boot/Bootstrapper?","body":"<p>tried upgrading spring-boot from 2.5 to 2.6 facing the below issue, not sure what went wrong</p>\n<p>bellow are some of the dependencies which we mention version, others are all we don't mention the versions and takes from parent</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.yaml&lt;/groupId&gt;\n            &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt;\n            &lt;version&gt;1.31&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<pre><code>&lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;io.awspring.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-aws-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;2.3.0&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n                &lt;artifactId&gt;aws-java-sdk-bom&lt;/artifactId&gt;\n                &lt;version&gt;1.12.89&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n                &lt;artifactId&gt;bom&lt;/artifactId&gt;\n                &lt;version&gt;2.16.67&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n</code></pre>\n<pre><code>20:27:56.606 [main] ERROR org.springframework.boot.SpringApplication - Application run failed\njava.lang.NoClassDefFoundError: org/springframework/boot/Bootstrapper\n    at java.base/java.lang.ClassLoader.defineClass1(Native Method)\n    at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1013)\n    at java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:150)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:862)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:760)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:681)\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:639)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n\n</code></pre>\n<p>resolution for the error</p>\n"},{"tags":["java","jolt"],"answers":[{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683742351,"creation_date":1683742351,"answer_id":76221470,"question_id":76202974,"body_markdown":"Yes, the transformation is a little bit complicated.  You may try another JSON library _Josson_ to do the job.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\n__Deserialization__\r\n\r\n    Josson josson = Josson.fromJsonString(\r\n        &quot;{&quot; +\r\n        &quot;  \\&quot;sourceTables\\&quot;: [&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;      \\&quot;sourceSchemaName\\&quot;: \\&quot;vsc\\&quot;,&quot; +\r\n        &quot;      \\&quot;sourceTableName\\&quot;: \\&quot;user\\&quot;,&quot; +\r\n        &quot;      \\&quot;sourceTableColumnDefinitions\\&quot;: [&quot; +\r\n        &quot;        {&quot; +\r\n        &quot;          \\&quot;sourceColumnName\\&quot;: \\&quot;userId\\&quot;,&quot; +\r\n        &quot;          \\&quot;sourceColumnAttributes\\&quot;: \\&quot;\\&quot;,&quot; +\r\n        &quot;          \\&quot;sourceColumnType\\&quot;: \\&quot;varchar\\&quot;&quot; +\r\n        &quot;        }&quot; +\r\n        &quot;      ]&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;      \\&quot;sourceSchemaName\\&quot;: \\&quot;npp\\&quot;,&quot; +\r\n        &quot;      \\&quot;sourceTableName\\&quot;: \\&quot;profile\\&quot;,&quot; +\r\n        &quot;      \\&quot;sourceTableColumnDefinitions\\&quot;: [&quot; +\r\n        &quot;        {&quot; +\r\n        &quot;          \\&quot;sourceColumnName\\&quot;: \\&quot;profileId\\&quot;,&quot; +\r\n        &quot;          \\&quot;sourceColumnAttributes\\&quot;: \\&quot;\\&quot;,&quot; +\r\n        &quot;          \\&quot;sourceColumnType\\&quot;: \\&quot;int\\&quot;&quot; +\r\n        &quot;        }&quot; +\r\n        &quot;      ]&quot; +\r\n        &quot;    }&quot; +\r\n        &quot;  ],&quot; +\r\n        &quot;  \\&quot;targetTables\\&quot;: [&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;      \\&quot;targetSchemaName\\&quot;: \\&quot;chr\\&quot;,&quot; +\r\n        &quot;      \\&quot;targetTableName\\&quot;: \\&quot;userAccount\\&quot;,&quot; +\r\n        &quot;      \\&quot;targetTableColumnDefinitions\\&quot;: [&quot; +\r\n        &quot;        {&quot; +\r\n        &quot;          \\&quot;sourceSchemaName\\&quot;: \\&quot;vsc\\&quot;,&quot; +\r\n        &quot;          \\&quot;sourceTableName\\&quot;: \\&quot;user\\&quot;,&quot; +\r\n        &quot;          \\&quot;sourceColumnName\\&quot;: \\&quot;userId\\&quot;,&quot; +\r\n        &quot;          \\&quot;targetColumn\\&quot;: \\&quot;id\\&quot;,&quot; +\r\n        &quot;          \\&quot;targetColumnAttributes\\&quot;: \\&quot;\\&quot;,&quot; +\r\n        &quot;          \\&quot;targetColumnType\\&quot;: \\&quot;varchar\\&quot;&quot; +\r\n        &quot;        },&quot; +\r\n        &quot;        {&quot; +\r\n        &quot;          \\&quot;sourceSchemaName\\&quot;: \\&quot;npp\\&quot;,&quot; +\r\n        &quot;          \\&quot;sourceTableName\\&quot;: \\&quot;profile\\&quot;,&quot; +\r\n        &quot;          \\&quot;sourceColumnName\\&quot;: \\&quot;profileId\\&quot;,&quot; +\r\n        &quot;          \\&quot;targetColumn\\&quot;: \\&quot;pId\\&quot;,&quot; +\r\n        &quot;          \\&quot;targetColumnAttributes\\&quot;: \\&quot;\\&quot;,&quot; +\r\n        &quot;          \\&quot;targetColumnType\\&quot;: \\&quot;int\\&quot;&quot; +\r\n        &quot;        }&quot; +\r\n        &quot;      ]&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;      \\&quot;targetSchemaName\\&quot;: \\&quot;chr\\&quot;,&quot; +\r\n        &quot;      \\&quot;targetTableName\\&quot;: \\&quot;pIds\\&quot;,&quot; +\r\n        &quot;      \\&quot;targetTableColumnDefinitions\\&quot;: [&quot; +\r\n        &quot;        {&quot; +\r\n        &quot;          \\&quot;sourceSchemaName\\&quot;: \\&quot;npp\\&quot;,&quot; +\r\n        &quot;          \\&quot;sourceTableName\\&quot;: \\&quot;profile\\&quot;,&quot; +\r\n        &quot;          \\&quot;sourceColumnName\\&quot;: \\&quot;profileId\\&quot;,&quot; +\r\n        &quot;          \\&quot;targetColumn\\&quot;: \\&quot;pId\\&quot;,&quot; +\r\n        &quot;          \\&quot;targetColumnAttributes\\&quot;: \\&quot;\\&quot;,&quot; +\r\n        &quot;          \\&quot;targetColumnType\\&quot;: \\&quot;int\\&quot;&quot; +\r\n        &quot;        }&quot; +\r\n        &quot;      ]&quot; +\r\n        &quot;    }&quot; +\r\n        &quot;  ]&quot; +\r\n        &quot;}&quot;);\r\n\r\n__Transformation__\r\n\r\n    JsonNode node = josson.getNode(\r\n        &quot;map(source:sourceTables@&quot; +\r\n        &quot;    .let($srcSchema:sourceSchemaName)&quot; +\r\n        &quot;    .let($srcTable:sourceTableName)&quot; +\r\n        &quot;    .map(concat(sourceSchemaName,&#39;-&#39;,sourceTableName)::map(&quot; +\r\n        &quot;         id:concat(sourceSchemaName,&#39;-&#39;,sourceTableName),&quot; +\r\n        &quot;         schemaName:sourceSchemaName,&quot; +\r\n        &quot;         tableName:sourceTableName,&quot; +\r\n        &quot;         mappedTargetTableNames:$.targetTables[targetTableColumnDefinitions[sourceSchemaName=$srcSchema &amp; sourceTableName=$srcTable]]*.concat(targetSchemaName,&#39;-&#39;,targetTableName),&quot; +\r\n        &quot;         sourceColumnMap:sourceTableColumnDefinitions&quot; +\r\n        &quot;             .map(sourceColumnName::map(&quot; +\r\n        &quot;                  sourceColumnDefinition:map(&quot; +\r\n        &quot;                      schemaName:$srcSchema,&quot; +\r\n        &quot;                      tableName:$srcTable,&quot; +\r\n        &quot;                      columnName:sourceColumnName,&quot; +\r\n        &quot;                      columnType:sourceColumnType,&quot; +\r\n        &quot;                      columnAttributes:sourceColumnAttributes&quot; +\r\n        &quot;                  ),&quot; +\r\n        &quot;                  mappedTargetColumnDefinition:$.targetTables@&quot; +\r\n        &quot;                      .let($tgtSchema:targetSchemaName)&quot; +\r\n        &quot;                      .let($tgtTable:targetTableName)&quot; +\r\n        &quot;                      .targetTableColumnDefinitions[sourceSchemaName=$srcSchema &amp; sourceTableName=$srcTable]*.map(&quot; +\r\n        &quot;                          schemaName:$tgtSchema,&quot; +\r\n        &quot;                          tableName:$tgtTable,&quot; +\r\n        &quot;                          columnName:targetColumn,&quot; +\r\n        &quot;                          columnType:targetColumnType,&quot; +\r\n        &quot;                          columnAttributes:targetColumnAttributes&quot; +\r\n        &quot;                      ).mergeObjects()&quot; +\r\n        &quot;             )).mergeObjects()&quot; +\r\n        &quot;    ))&quot; +\r\n        &quot;    .@mergeObjects(),&quot; +\r\n        &quot;    &quot; +\r\n        &quot;    target:targetTables@&quot; +\r\n        &quot;    .let($tgtSchema:targetSchemaName)&quot; +\r\n        &quot;    .let($tgtTable:targetTableName)&quot; +\r\n        &quot;    .map(concat(targetSchemaName,&#39;-&#39;,targetTableName)::map(&quot; +\r\n        &quot;         id:concat(targetSchemaName,&#39;-&#39;,targetTableName),&quot; +\r\n        &quot;         schemaName:targetSchemaName,&quot; +\r\n        &quot;         tableName:targetTableName,&quot; +\r\n        &quot;         mappedSourceTables:targetTableColumnDefinitions.concat(sourceSchemaName,&#39;-&#39;,sourceTableName),&quot; +\r\n        &quot;         targetColumnMap:targetTableColumnDefinitions@&quot; +\r\n        &quot;             .let($srcSchema:sourceSchemaName)&quot; +\r\n        &quot;             .let($srcTable:sourceTableName)&quot; +\r\n        &quot;             .let($srcColumn:sourceColumnName)&quot; +\r\n        &quot;             .map(targetColumn::map(&quot; +\r\n        &quot;                 targetColumnDefinition:map(&quot; +\r\n        &quot;                     schemaName:$tgtSchema,&quot; +\r\n        &quot;                     tableName:$tgtTable,&quot; +\r\n        &quot;                     columnName:targetColumn,&quot; +\r\n        &quot;                     columnType:targetColumnType,&quot; +\r\n        &quot;                     columnAttributes:targetColumnAttributes&quot; +\r\n        &quot;                 ),&quot; +\r\n        &quot;                 mappedSourceColumnDefinition:$.sourceTables[sourceSchemaName=$srcSchema &amp; sourceTableName=$srcTable].sourceTableColumnDefinitions[sourceColumnName=$srcColumn].map(&quot; +\r\n        &quot;                     schemaName:$srcSchema,&quot; +\r\n        &quot;                     tableName:$srcTable,&quot; +\r\n        &quot;                     columnName:$srcColumn,&quot; +\r\n        &quot;                     columnType:sourceColumnType,&quot; +\r\n        &quot;                     columnAttributes:sourceColumnAttributes&quot; +\r\n        &quot;                 )&quot; +\r\n        &quot;             ))&quot; +\r\n        &quot;         .@mergeObjects()&quot; +\r\n        &quot;    ))&quot; +\r\n        &quot;    .@mergeObjects()&quot; +\r\n        &quot;)&quot;);\r\n    System.out.println(node.toPrettyString());\r\n\r\n__Output__\r\n\r\n    {\r\n      &quot;source&quot; : {\r\n        &quot;vsc-user&quot; : {\r\n          &quot;id&quot; : &quot;vsc-user&quot;,\r\n          &quot;schemaName&quot; : &quot;vsc&quot;,\r\n          &quot;tableName&quot; : &quot;user&quot;,\r\n          &quot;mappedTargetTableNames&quot; : [ &quot;chr-userAccount&quot; ],\r\n          &quot;sourceColumnMap&quot; : {\r\n            &quot;userId&quot; : {\r\n              &quot;sourceColumnDefinition&quot; : {\r\n                &quot;schemaName&quot; : &quot;vsc&quot;,\r\n                &quot;tableName&quot; : &quot;user&quot;,\r\n                &quot;columnName&quot; : &quot;userId&quot;,\r\n                &quot;columnType&quot; : &quot;varchar&quot;,\r\n                &quot;columnAttributes&quot; : &quot;&quot;\r\n              },\r\n              &quot;mappedTargetColumnDefinition&quot; : [ {\r\n                &quot;schemaName&quot; : &quot;chr&quot;,\r\n                &quot;tableName&quot; : &quot;userAccount&quot;,\r\n                &quot;columnName&quot; : &quot;id&quot;,\r\n                &quot;columnType&quot; : &quot;varchar&quot;,\r\n                &quot;columnAttributes&quot; : &quot;&quot;\r\n              } ]\r\n            }\r\n          }\r\n        },\r\n        &quot;npp-profile&quot; : {\r\n          &quot;id&quot; : &quot;npp-profile&quot;,\r\n          &quot;schemaName&quot; : &quot;npp&quot;,\r\n          &quot;tableName&quot; : &quot;profile&quot;,\r\n          &quot;mappedTargetTableNames&quot; : [ &quot;chr-userAccount&quot;, &quot;chr-pIds&quot; ],\r\n          &quot;sourceColumnMap&quot; : {\r\n            &quot;profileId&quot; : {\r\n              &quot;sourceColumnDefinition&quot; : {\r\n                &quot;schemaName&quot; : &quot;npp&quot;,\r\n                &quot;tableName&quot; : &quot;profile&quot;,\r\n                &quot;columnName&quot; : &quot;profileId&quot;,\r\n                &quot;columnType&quot; : &quot;int&quot;,\r\n                &quot;columnAttributes&quot; : &quot;&quot;\r\n              },\r\n              &quot;mappedTargetColumnDefinition&quot; : [ {\r\n                &quot;schemaName&quot; : &quot;chr&quot;,\r\n                &quot;tableName&quot; : &quot;userAccount&quot;,\r\n                &quot;columnName&quot; : &quot;pId&quot;,\r\n                &quot;columnType&quot; : &quot;int&quot;,\r\n                &quot;columnAttributes&quot; : &quot;&quot;\r\n              }, {\r\n                &quot;schemaName&quot; : &quot;chr&quot;,\r\n                &quot;tableName&quot; : &quot;pIds&quot;,\r\n                &quot;columnName&quot; : &quot;pId&quot;,\r\n                &quot;columnType&quot; : &quot;int&quot;,\r\n                &quot;columnAttributes&quot; : &quot;&quot;\r\n              } ]\r\n            }\r\n          }\r\n        }\r\n      },\r\n      &quot;target&quot; : {\r\n        &quot;chr-userAccount&quot; : {\r\n          &quot;id&quot; : &quot;chr-userAccount&quot;,\r\n          &quot;schemaName&quot; : &quot;chr&quot;,\r\n          &quot;tableName&quot; : &quot;userAccount&quot;,\r\n          &quot;mappedSourceTables&quot; : [ &quot;vsc-user&quot;, &quot;npp-profile&quot; ],\r\n          &quot;targetColumnMap&quot; : {\r\n            &quot;id&quot; : {\r\n              &quot;targetColumnDefinition&quot; : {\r\n                &quot;schemaName&quot; : &quot;chr&quot;,\r\n                &quot;tableName&quot; : &quot;userAccount&quot;,\r\n                &quot;columnName&quot; : &quot;id&quot;,\r\n                &quot;columnType&quot; : &quot;varchar&quot;,\r\n                &quot;columnAttributes&quot; : &quot;&quot;\r\n              },\r\n              &quot;mappedSourceColumnDefinition&quot; : {\r\n                &quot;schemaName&quot; : &quot;vsc&quot;,\r\n                &quot;tableName&quot; : &quot;user&quot;,\r\n                &quot;columnName&quot; : &quot;userId&quot;,\r\n                &quot;columnType&quot; : &quot;varchar&quot;,\r\n                &quot;columnAttributes&quot; : &quot;&quot;\r\n              }\r\n            },\r\n            &quot;pId&quot; : {\r\n              &quot;targetColumnDefinition&quot; : {\r\n                &quot;schemaName&quot; : &quot;chr&quot;,\r\n                &quot;tableName&quot; : &quot;userAccount&quot;,\r\n                &quot;columnName&quot; : &quot;pId&quot;,\r\n                &quot;columnType&quot; : &quot;int&quot;,\r\n                &quot;columnAttributes&quot; : &quot;&quot;\r\n              },\r\n              &quot;mappedSourceColumnDefinition&quot; : {\r\n                &quot;schemaName&quot; : &quot;npp&quot;,\r\n                &quot;tableName&quot; : &quot;profile&quot;,\r\n                &quot;columnName&quot; : &quot;profileId&quot;,\r\n                &quot;columnType&quot; : &quot;int&quot;,\r\n                &quot;columnAttributes&quot; : &quot;&quot;\r\n              }\r\n            }\r\n          }\r\n        },\r\n        &quot;chr-pIds&quot; : {\r\n          &quot;id&quot; : &quot;chr-pIds&quot;,\r\n          &quot;schemaName&quot; : &quot;chr&quot;,\r\n          &quot;tableName&quot; : &quot;pIds&quot;,\r\n          &quot;mappedSourceTables&quot; : [ &quot;npp-profile&quot; ],\r\n          &quot;targetColumnMap&quot; : {\r\n            &quot;pId&quot; : {\r\n              &quot;targetColumnDefinition&quot; : {\r\n                &quot;schemaName&quot; : &quot;chr&quot;,\r\n                &quot;tableName&quot; : &quot;pIds&quot;,\r\n                &quot;columnName&quot; : &quot;pId&quot;,\r\n                &quot;columnType&quot; : &quot;int&quot;,\r\n                &quot;columnAttributes&quot; : &quot;&quot;\r\n              },\r\n              &quot;mappedSourceColumnDefinition&quot; : {\r\n                &quot;schemaName&quot; : &quot;npp&quot;,\r\n                &quot;tableName&quot; : &quot;profile&quot;,\r\n                &quot;columnName&quot; : &quot;profileId&quot;,\r\n                &quot;columnType&quot; : &quot;int&quot;,\r\n                &quot;columnAttributes&quot; : &quot;&quot;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n","title":"How to create jolt spec for this complex JSON","body":"<p>Yes, the transformation is a little bit complicated.  You may try another JSON library <em>Josson</em> to do the job.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<p><strong>Deserialization</strong></p>\n<pre><code>Josson josson = Josson.fromJsonString(\n    &quot;{&quot; +\n    &quot;  \\&quot;sourceTables\\&quot;: [&quot; +\n    &quot;    {&quot; +\n    &quot;      \\&quot;sourceSchemaName\\&quot;: \\&quot;vsc\\&quot;,&quot; +\n    &quot;      \\&quot;sourceTableName\\&quot;: \\&quot;user\\&quot;,&quot; +\n    &quot;      \\&quot;sourceTableColumnDefinitions\\&quot;: [&quot; +\n    &quot;        {&quot; +\n    &quot;          \\&quot;sourceColumnName\\&quot;: \\&quot;userId\\&quot;,&quot; +\n    &quot;          \\&quot;sourceColumnAttributes\\&quot;: \\&quot;\\&quot;,&quot; +\n    &quot;          \\&quot;sourceColumnType\\&quot;: \\&quot;varchar\\&quot;&quot; +\n    &quot;        }&quot; +\n    &quot;      ]&quot; +\n    &quot;    },&quot; +\n    &quot;    {&quot; +\n    &quot;      \\&quot;sourceSchemaName\\&quot;: \\&quot;npp\\&quot;,&quot; +\n    &quot;      \\&quot;sourceTableName\\&quot;: \\&quot;profile\\&quot;,&quot; +\n    &quot;      \\&quot;sourceTableColumnDefinitions\\&quot;: [&quot; +\n    &quot;        {&quot; +\n    &quot;          \\&quot;sourceColumnName\\&quot;: \\&quot;profileId\\&quot;,&quot; +\n    &quot;          \\&quot;sourceColumnAttributes\\&quot;: \\&quot;\\&quot;,&quot; +\n    &quot;          \\&quot;sourceColumnType\\&quot;: \\&quot;int\\&quot;&quot; +\n    &quot;        }&quot; +\n    &quot;      ]&quot; +\n    &quot;    }&quot; +\n    &quot;  ],&quot; +\n    &quot;  \\&quot;targetTables\\&quot;: [&quot; +\n    &quot;    {&quot; +\n    &quot;      \\&quot;targetSchemaName\\&quot;: \\&quot;chr\\&quot;,&quot; +\n    &quot;      \\&quot;targetTableName\\&quot;: \\&quot;userAccount\\&quot;,&quot; +\n    &quot;      \\&quot;targetTableColumnDefinitions\\&quot;: [&quot; +\n    &quot;        {&quot; +\n    &quot;          \\&quot;sourceSchemaName\\&quot;: \\&quot;vsc\\&quot;,&quot; +\n    &quot;          \\&quot;sourceTableName\\&quot;: \\&quot;user\\&quot;,&quot; +\n    &quot;          \\&quot;sourceColumnName\\&quot;: \\&quot;userId\\&quot;,&quot; +\n    &quot;          \\&quot;targetColumn\\&quot;: \\&quot;id\\&quot;,&quot; +\n    &quot;          \\&quot;targetColumnAttributes\\&quot;: \\&quot;\\&quot;,&quot; +\n    &quot;          \\&quot;targetColumnType\\&quot;: \\&quot;varchar\\&quot;&quot; +\n    &quot;        },&quot; +\n    &quot;        {&quot; +\n    &quot;          \\&quot;sourceSchemaName\\&quot;: \\&quot;npp\\&quot;,&quot; +\n    &quot;          \\&quot;sourceTableName\\&quot;: \\&quot;profile\\&quot;,&quot; +\n    &quot;          \\&quot;sourceColumnName\\&quot;: \\&quot;profileId\\&quot;,&quot; +\n    &quot;          \\&quot;targetColumn\\&quot;: \\&quot;pId\\&quot;,&quot; +\n    &quot;          \\&quot;targetColumnAttributes\\&quot;: \\&quot;\\&quot;,&quot; +\n    &quot;          \\&quot;targetColumnType\\&quot;: \\&quot;int\\&quot;&quot; +\n    &quot;        }&quot; +\n    &quot;      ]&quot; +\n    &quot;    },&quot; +\n    &quot;    {&quot; +\n    &quot;      \\&quot;targetSchemaName\\&quot;: \\&quot;chr\\&quot;,&quot; +\n    &quot;      \\&quot;targetTableName\\&quot;: \\&quot;pIds\\&quot;,&quot; +\n    &quot;      \\&quot;targetTableColumnDefinitions\\&quot;: [&quot; +\n    &quot;        {&quot; +\n    &quot;          \\&quot;sourceSchemaName\\&quot;: \\&quot;npp\\&quot;,&quot; +\n    &quot;          \\&quot;sourceTableName\\&quot;: \\&quot;profile\\&quot;,&quot; +\n    &quot;          \\&quot;sourceColumnName\\&quot;: \\&quot;profileId\\&quot;,&quot; +\n    &quot;          \\&quot;targetColumn\\&quot;: \\&quot;pId\\&quot;,&quot; +\n    &quot;          \\&quot;targetColumnAttributes\\&quot;: \\&quot;\\&quot;,&quot; +\n    &quot;          \\&quot;targetColumnType\\&quot;: \\&quot;int\\&quot;&quot; +\n    &quot;        }&quot; +\n    &quot;      ]&quot; +\n    &quot;    }&quot; +\n    &quot;  ]&quot; +\n    &quot;}&quot;);\n</code></pre>\n<p><strong>Transformation</strong></p>\n<pre><code>JsonNode node = josson.getNode(\n    &quot;map(source:sourceTables@&quot; +\n    &quot;    .let($srcSchema:sourceSchemaName)&quot; +\n    &quot;    .let($srcTable:sourceTableName)&quot; +\n    &quot;    .map(concat(sourceSchemaName,'-',sourceTableName)::map(&quot; +\n    &quot;         id:concat(sourceSchemaName,'-',sourceTableName),&quot; +\n    &quot;         schemaName:sourceSchemaName,&quot; +\n    &quot;         tableName:sourceTableName,&quot; +\n    &quot;         mappedTargetTableNames:$.targetTables[targetTableColumnDefinitions[sourceSchemaName=$srcSchema &amp; sourceTableName=$srcTable]]*.concat(targetSchemaName,'-',targetTableName),&quot; +\n    &quot;         sourceColumnMap:sourceTableColumnDefinitions&quot; +\n    &quot;             .map(sourceColumnName::map(&quot; +\n    &quot;                  sourceColumnDefinition:map(&quot; +\n    &quot;                      schemaName:$srcSchema,&quot; +\n    &quot;                      tableName:$srcTable,&quot; +\n    &quot;                      columnName:sourceColumnName,&quot; +\n    &quot;                      columnType:sourceColumnType,&quot; +\n    &quot;                      columnAttributes:sourceColumnAttributes&quot; +\n    &quot;                  ),&quot; +\n    &quot;                  mappedTargetColumnDefinition:$.targetTables@&quot; +\n    &quot;                      .let($tgtSchema:targetSchemaName)&quot; +\n    &quot;                      .let($tgtTable:targetTableName)&quot; +\n    &quot;                      .targetTableColumnDefinitions[sourceSchemaName=$srcSchema &amp; sourceTableName=$srcTable]*.map(&quot; +\n    &quot;                          schemaName:$tgtSchema,&quot; +\n    &quot;                          tableName:$tgtTable,&quot; +\n    &quot;                          columnName:targetColumn,&quot; +\n    &quot;                          columnType:targetColumnType,&quot; +\n    &quot;                          columnAttributes:targetColumnAttributes&quot; +\n    &quot;                      ).mergeObjects()&quot; +\n    &quot;             )).mergeObjects()&quot; +\n    &quot;    ))&quot; +\n    &quot;    .@mergeObjects(),&quot; +\n    &quot;    &quot; +\n    &quot;    target:targetTables@&quot; +\n    &quot;    .let($tgtSchema:targetSchemaName)&quot; +\n    &quot;    .let($tgtTable:targetTableName)&quot; +\n    &quot;    .map(concat(targetSchemaName,'-',targetTableName)::map(&quot; +\n    &quot;         id:concat(targetSchemaName,'-',targetTableName),&quot; +\n    &quot;         schemaName:targetSchemaName,&quot; +\n    &quot;         tableName:targetTableName,&quot; +\n    &quot;         mappedSourceTables:targetTableColumnDefinitions.concat(sourceSchemaName,'-',sourceTableName),&quot; +\n    &quot;         targetColumnMap:targetTableColumnDefinitions@&quot; +\n    &quot;             .let($srcSchema:sourceSchemaName)&quot; +\n    &quot;             .let($srcTable:sourceTableName)&quot; +\n    &quot;             .let($srcColumn:sourceColumnName)&quot; +\n    &quot;             .map(targetColumn::map(&quot; +\n    &quot;                 targetColumnDefinition:map(&quot; +\n    &quot;                     schemaName:$tgtSchema,&quot; +\n    &quot;                     tableName:$tgtTable,&quot; +\n    &quot;                     columnName:targetColumn,&quot; +\n    &quot;                     columnType:targetColumnType,&quot; +\n    &quot;                     columnAttributes:targetColumnAttributes&quot; +\n    &quot;                 ),&quot; +\n    &quot;                 mappedSourceColumnDefinition:$.sourceTables[sourceSchemaName=$srcSchema &amp; sourceTableName=$srcTable].sourceTableColumnDefinitions[sourceColumnName=$srcColumn].map(&quot; +\n    &quot;                     schemaName:$srcSchema,&quot; +\n    &quot;                     tableName:$srcTable,&quot; +\n    &quot;                     columnName:$srcColumn,&quot; +\n    &quot;                     columnType:sourceColumnType,&quot; +\n    &quot;                     columnAttributes:sourceColumnAttributes&quot; +\n    &quot;                 )&quot; +\n    &quot;             ))&quot; +\n    &quot;         .@mergeObjects()&quot; +\n    &quot;    ))&quot; +\n    &quot;    .@mergeObjects()&quot; +\n    &quot;)&quot;);\nSystem.out.println(node.toPrettyString());\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>{\n  &quot;source&quot; : {\n    &quot;vsc-user&quot; : {\n      &quot;id&quot; : &quot;vsc-user&quot;,\n      &quot;schemaName&quot; : &quot;vsc&quot;,\n      &quot;tableName&quot; : &quot;user&quot;,\n      &quot;mappedTargetTableNames&quot; : [ &quot;chr-userAccount&quot; ],\n      &quot;sourceColumnMap&quot; : {\n        &quot;userId&quot; : {\n          &quot;sourceColumnDefinition&quot; : {\n            &quot;schemaName&quot; : &quot;vsc&quot;,\n            &quot;tableName&quot; : &quot;user&quot;,\n            &quot;columnName&quot; : &quot;userId&quot;,\n            &quot;columnType&quot; : &quot;varchar&quot;,\n            &quot;columnAttributes&quot; : &quot;&quot;\n          },\n          &quot;mappedTargetColumnDefinition&quot; : [ {\n            &quot;schemaName&quot; : &quot;chr&quot;,\n            &quot;tableName&quot; : &quot;userAccount&quot;,\n            &quot;columnName&quot; : &quot;id&quot;,\n            &quot;columnType&quot; : &quot;varchar&quot;,\n            &quot;columnAttributes&quot; : &quot;&quot;\n          } ]\n        }\n      }\n    },\n    &quot;npp-profile&quot; : {\n      &quot;id&quot; : &quot;npp-profile&quot;,\n      &quot;schemaName&quot; : &quot;npp&quot;,\n      &quot;tableName&quot; : &quot;profile&quot;,\n      &quot;mappedTargetTableNames&quot; : [ &quot;chr-userAccount&quot;, &quot;chr-pIds&quot; ],\n      &quot;sourceColumnMap&quot; : {\n        &quot;profileId&quot; : {\n          &quot;sourceColumnDefinition&quot; : {\n            &quot;schemaName&quot; : &quot;npp&quot;,\n            &quot;tableName&quot; : &quot;profile&quot;,\n            &quot;columnName&quot; : &quot;profileId&quot;,\n            &quot;columnType&quot; : &quot;int&quot;,\n            &quot;columnAttributes&quot; : &quot;&quot;\n          },\n          &quot;mappedTargetColumnDefinition&quot; : [ {\n            &quot;schemaName&quot; : &quot;chr&quot;,\n            &quot;tableName&quot; : &quot;userAccount&quot;,\n            &quot;columnName&quot; : &quot;pId&quot;,\n            &quot;columnType&quot; : &quot;int&quot;,\n            &quot;columnAttributes&quot; : &quot;&quot;\n          }, {\n            &quot;schemaName&quot; : &quot;chr&quot;,\n            &quot;tableName&quot; : &quot;pIds&quot;,\n            &quot;columnName&quot; : &quot;pId&quot;,\n            &quot;columnType&quot; : &quot;int&quot;,\n            &quot;columnAttributes&quot; : &quot;&quot;\n          } ]\n        }\n      }\n    }\n  },\n  &quot;target&quot; : {\n    &quot;chr-userAccount&quot; : {\n      &quot;id&quot; : &quot;chr-userAccount&quot;,\n      &quot;schemaName&quot; : &quot;chr&quot;,\n      &quot;tableName&quot; : &quot;userAccount&quot;,\n      &quot;mappedSourceTables&quot; : [ &quot;vsc-user&quot;, &quot;npp-profile&quot; ],\n      &quot;targetColumnMap&quot; : {\n        &quot;id&quot; : {\n          &quot;targetColumnDefinition&quot; : {\n            &quot;schemaName&quot; : &quot;chr&quot;,\n            &quot;tableName&quot; : &quot;userAccount&quot;,\n            &quot;columnName&quot; : &quot;id&quot;,\n            &quot;columnType&quot; : &quot;varchar&quot;,\n            &quot;columnAttributes&quot; : &quot;&quot;\n          },\n          &quot;mappedSourceColumnDefinition&quot; : {\n            &quot;schemaName&quot; : &quot;vsc&quot;,\n            &quot;tableName&quot; : &quot;user&quot;,\n            &quot;columnName&quot; : &quot;userId&quot;,\n            &quot;columnType&quot; : &quot;varchar&quot;,\n            &quot;columnAttributes&quot; : &quot;&quot;\n          }\n        },\n        &quot;pId&quot; : {\n          &quot;targetColumnDefinition&quot; : {\n            &quot;schemaName&quot; : &quot;chr&quot;,\n            &quot;tableName&quot; : &quot;userAccount&quot;,\n            &quot;columnName&quot; : &quot;pId&quot;,\n            &quot;columnType&quot; : &quot;int&quot;,\n            &quot;columnAttributes&quot; : &quot;&quot;\n          },\n          &quot;mappedSourceColumnDefinition&quot; : {\n            &quot;schemaName&quot; : &quot;npp&quot;,\n            &quot;tableName&quot; : &quot;profile&quot;,\n            &quot;columnName&quot; : &quot;profileId&quot;,\n            &quot;columnType&quot; : &quot;int&quot;,\n            &quot;columnAttributes&quot; : &quot;&quot;\n          }\n        }\n      }\n    },\n    &quot;chr-pIds&quot; : {\n      &quot;id&quot; : &quot;chr-pIds&quot;,\n      &quot;schemaName&quot; : &quot;chr&quot;,\n      &quot;tableName&quot; : &quot;pIds&quot;,\n      &quot;mappedSourceTables&quot; : [ &quot;npp-profile&quot; ],\n      &quot;targetColumnMap&quot; : {\n        &quot;pId&quot; : {\n          &quot;targetColumnDefinition&quot; : {\n            &quot;schemaName&quot; : &quot;chr&quot;,\n            &quot;tableName&quot; : &quot;pIds&quot;,\n            &quot;columnName&quot; : &quot;pId&quot;,\n            &quot;columnType&quot; : &quot;int&quot;,\n            &quot;columnAttributes&quot; : &quot;&quot;\n          },\n          &quot;mappedSourceColumnDefinition&quot; : {\n            &quot;schemaName&quot; : &quot;npp&quot;,\n            &quot;tableName&quot; : &quot;profile&quot;,\n            &quot;columnName&quot; : &quot;profileId&quot;,\n            &quot;columnType&quot; : &quot;int&quot;,\n            &quot;columnAttributes&quot; : &quot;&quot;\n          }\n        }\n      }\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":6874407,"reputation":53,"user_id":5283330,"display_name":"Balan Gurumurthi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683742351,"creation_date":1683567383,"question_id":76202974,"body_markdown":"I am learning JOLT and trying to write spce for the following use case. I can&#39;t seems to make the spec to convert the input JSON to desired format.\r\n\r\nHere is my input.json\r\n\r\n```\r\n{\r\n  &quot;sourceTables&quot;: [\r\n    {\r\n      &quot;sourceSchemaName&quot;: &quot;vsc&quot;,\r\n      &quot;sourceTableName&quot;: &quot;user&quot;,\r\n      &quot;sourceTableColumnDefinitions&quot;: [\r\n        {\r\n          &quot;sourceColumnName&quot;: &quot;userId&quot;,\r\n          &quot;sourceColumnAttributes&quot;: &quot;&quot;,\r\n          &quot;sourceColumnType&quot;: &quot;varchar&quot;\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      &quot;sourceSchemaName&quot;: &quot;npp&quot;,\r\n      &quot;sourceTableName&quot;: &quot;profile&quot;,\r\n      &quot;sourceTableColumnDefinitions&quot;: [\r\n        {\r\n          &quot;sourceColumnName&quot;: &quot;profileId&quot;,\r\n          &quot;sourceColumnAttributes&quot;: &quot;&quot;,\r\n          &quot;sourceColumnType&quot;: &quot;int&quot;\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  &quot;targetTables&quot;: [\r\n    {\r\n      &quot;targetSchemaName&quot;: &quot;chr&quot;,\r\n      &quot;targetTableName&quot;: &quot;userAccount&quot;,\r\n      &quot;targetTableColumnDefinitions&quot;: [\r\n        {\r\n          &quot;sourceSchemaName&quot;: &quot;vsc&quot;,\r\n          &quot;sourceTableName&quot;: &quot;user&quot;,\r\n          &quot;sourceColumnName&quot;: &quot;userId&quot;,\r\n          &quot;targetColumn&quot;: &quot;id&quot;,\r\n          &quot;targetColumnAttributes&quot;: &quot;&quot;,\r\n          &quot;targetColumnType&quot;: &quot;varchar&quot;\r\n        },\r\n        {\r\n          &quot;sourceSchemaName&quot;: &quot;npp&quot;,\r\n          &quot;sourceTableName&quot;: &quot;profile&quot;,\r\n          &quot;sourceColumnName&quot;: &quot;profileId&quot;,\r\n          &quot;targetColumn&quot;: &quot;pId&quot;,\r\n          &quot;targetColumnAttributes&quot;: &quot;&quot;,\r\n          &quot;targetColumnType&quot;: &quot;int&quot;\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      &quot;targetSchemaName&quot;: &quot;chr&quot;,\r\n      &quot;targetTableName&quot;: &quot;pIds&quot;,\r\n      &quot;targetTableColumnDefinitions&quot;: [\r\n        {\r\n          &quot;sourceSchemaName&quot;: &quot;npp&quot;,\r\n          &quot;sourceTableName&quot;: &quot;profile&quot;,\r\n          &quot;sourceColumnName&quot;: &quot;profileId&quot;,\r\n          &quot;targetColumn&quot;: &quot;pId&quot;,\r\n          &quot;targetColumnAttributes&quot;: &quot;&quot;,\r\n          &quot;targetColumnType&quot;: &quot;int&quot;\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\n\r\n```\r\nAs you can see, my input.json has list of source table names along with column definitions for each and list of target table names and in targetTableColumnDefinitions array, the mapping information for column is available. Such as from which source table and column the current target column is mapped to. \r\n\r\nNow, I want to convert this JSON as below\r\n\r\n\r\n```\r\n{\r\n  &quot;source&quot;: {\r\n    &quot;npp-profile&quot;: {\r\n      &quot;id&quot;: &quot;npp-profile&quot;,\r\n      &quot;schemaName&quot;: &quot;npp&quot;,\r\n      &quot;tableName&quot;: &quot;profile&quot;,\r\n      &quot;mappedTargetTableNames&quot;: [&quot;chr-pIds&quot;, &quot;chr-userAccount&quot;],\r\n      &quot;sourceColumnMap&quot;: {\r\n        &quot;profileId&quot;: {\r\n          &quot;sourceColumnDefinition&quot;: {\r\n            &quot;schemaName&quot;: &quot;npp&quot;,\r\n            &quot;tableName&quot;: &quot;profile&quot;,\r\n            &quot;columnName&quot;: &quot;profileId&quot;,\r\n            &quot;columnType&quot;: &quot;int&quot;,\r\n            &quot;columnAttributes&quot;: null\r\n          },\r\n          &quot;mappedTargetColumnDefinition&quot;: [\r\n            {\r\n              &quot;schemaName&quot;: &quot;chr&quot;,\r\n              &quot;tableName&quot;: &quot;userAccount&quot;,\r\n              &quot;columnName&quot;: &quot;pId&quot;,\r\n              &quot;columnType&quot;: &quot;int&quot;,\r\n              &quot;columnAttributes&quot;: null\r\n            },\r\n            {\r\n              &quot;schemaName&quot;: &quot;chr&quot;,\r\n              &quot;tableName&quot;: &quot;pIds&quot;,\r\n              &quot;columnName&quot;: &quot;id&quot;,\r\n              &quot;columnType&quot;: &quot;int&quot;,\r\n              &quot;columnAttributes&quot;: null\r\n            }\r\n          ]\r\n        }\r\n      }\r\n    },\r\n    &quot;vsc-user&quot;: {\r\n      &quot;id&quot;: &quot;vsc-user&quot;,\r\n      &quot;schemaName&quot;: &quot;vsc&quot;,\r\n      &quot;tableName&quot;: &quot;user&quot;,\r\n      &quot;mappedTargetTableNames&quot;: [&quot;chr-userAccount&quot;],\r\n      &quot;sourceColumnMap&quot;: {\r\n        &quot;userId&quot;: {\r\n          &quot;sourceColumnDefinition&quot;: {\r\n            &quot;schemaName&quot;: &quot;vsc&quot;,\r\n            &quot;tableName&quot;: &quot;user&quot;,\r\n            &quot;columnName&quot;: &quot;userId&quot;,\r\n            &quot;columnType&quot;: &quot;varchar&quot;,\r\n            &quot;columnAttributes&quot;: null\r\n          },\r\n          &quot;mappedTargetColumnDefinition&quot;: [\r\n            {\r\n              &quot;schemaName&quot;: &quot;chr&quot;,\r\n              &quot;tableName&quot;: &quot;userAccount&quot;,\r\n              &quot;columnName&quot;: &quot;id&quot;,\r\n              &quot;columnType&quot;: &quot;varchar&quot;,\r\n              &quot;columnAttributes&quot;: null\r\n            }\r\n          ]\r\n        }\r\n      }\r\n    }\r\n  },\r\n  &quot;target&quot;: {\r\n    &quot;chr-pIds&quot;: {\r\n      &quot;id&quot;: &quot;chr-pIds&quot;,\r\n      &quot;schemaName&quot;: &quot;chr&quot;,\r\n      &quot;tableName&quot;: &quot;pIds&quot;,\r\n      &quot;mappedSourceTables&quot;: [&quot;npp-profile&quot;],\r\n      &quot;targetColumnMap&quot;: {\r\n        &quot;id&quot;: {\r\n          &quot;targetColumnDefinition&quot;: {\r\n            &quot;schemaName&quot;: &quot;chr&quot;,\r\n            &quot;tableName&quot;: &quot;pIds&quot;,\r\n            &quot;columnName&quot;: &quot;id&quot;,\r\n            &quot;columnType&quot;: &quot;int&quot;,\r\n            &quot;columnAttributes&quot;: null\r\n          },\r\n          &quot;mappedSourceColumnDefinition&quot;: {\r\n            &quot;schemaName&quot;: &quot;npp&quot;,\r\n            &quot;tableName&quot;: &quot;profile&quot;,\r\n            &quot;columnName&quot;: &quot;profileId&quot;,\r\n            &quot;columnType&quot;: &quot;int&quot;,\r\n            &quot;columnAttributes&quot;: null\r\n          }\r\n        }\r\n      }\r\n    },\r\n    &quot;chr-userAccount&quot;: {\r\n      &quot;id&quot;: &quot;chr-userAccount&quot;,\r\n      &quot;schemaName&quot;: &quot;chr&quot;,\r\n      &quot;tableName&quot;: &quot;userAccount&quot;,\r\n      &quot;mappedSourceTables&quot;: [&quot;npp-profile&quot;, &quot;vsc-user&quot;],\r\n      &quot;targetColumnMap&quot;: {\r\n        &quot;pId&quot;: {\r\n          &quot;targetColumnDefinition&quot;: {\r\n            &quot;schemaName&quot;: &quot;chr&quot;,\r\n            &quot;tableName&quot;: &quot;userAccount&quot;,\r\n            &quot;columnName&quot;: &quot;pId&quot;,\r\n            &quot;columnType&quot;: &quot;int&quot;,\r\n            &quot;columnAttributes&quot;: null\r\n          },\r\n          &quot;mappedSourceColumnDefinition&quot;: {\r\n            &quot;schemaName&quot;: &quot;npp&quot;,\r\n            &quot;tableName&quot;: &quot;profile&quot;,\r\n            &quot;columnName&quot;: &quot;profileId&quot;,\r\n            &quot;columnType&quot;: &quot;int&quot;,\r\n            &quot;columnAttributes&quot;: null\r\n          }\r\n        },\r\n        &quot;id&quot;: {\r\n          &quot;targetColumnDefinition&quot;: {\r\n            &quot;schemaName&quot;: &quot;chr&quot;,\r\n            &quot;tableName&quot;: &quot;userAccount&quot;,\r\n            &quot;columnName&quot;: &quot;id&quot;,\r\n            &quot;columnType&quot;: &quot;varchar&quot;,\r\n            &quot;columnAttributes&quot;: null\r\n          },\r\n          &quot;mappedSourceColumnDefinition&quot;: {\r\n            &quot;schemaName&quot;: &quot;vsc&quot;,\r\n            &quot;tableName&quot;: &quot;user&quot;,\r\n            &quot;columnName&quot;: &quot;userId&quot;,\r\n            &quot;columnType&quot;: &quot;varchar&quot;,\r\n            &quot;columnAttributes&quot;: null\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nI want to list all source tables under source object and all target tables under target object. I also want to create a new element called &#39;mappedTargetTableNames&#39; in each source table object to find out which target table it is mapped to. Similarly, &#39;mappedSourceTables&#39; needs to be added in each target table to find out which source tables are linked to the target table. And for each column in sourceTable object, I want to create the list of target table columns as one source table&#39;s column could map to multiple target table columns. Similarly I want to have source column details for each target table columns. Please can you help to write a jolt spec for this. \r\nPlease can you help to create the Jolt spec for this use case.","title":"How to create jolt spec for this complex JSON","body":"<p>I am learning JOLT and trying to write spce for the following use case. I can't seems to make the spec to convert the input JSON to desired format.</p>\n<p>Here is my input.json</p>\n<pre><code>{\n  &quot;sourceTables&quot;: [\n    {\n      &quot;sourceSchemaName&quot;: &quot;vsc&quot;,\n      &quot;sourceTableName&quot;: &quot;user&quot;,\n      &quot;sourceTableColumnDefinitions&quot;: [\n        {\n          &quot;sourceColumnName&quot;: &quot;userId&quot;,\n          &quot;sourceColumnAttributes&quot;: &quot;&quot;,\n          &quot;sourceColumnType&quot;: &quot;varchar&quot;\n        }\n      ]\n    },\n    {\n      &quot;sourceSchemaName&quot;: &quot;npp&quot;,\n      &quot;sourceTableName&quot;: &quot;profile&quot;,\n      &quot;sourceTableColumnDefinitions&quot;: [\n        {\n          &quot;sourceColumnName&quot;: &quot;profileId&quot;,\n          &quot;sourceColumnAttributes&quot;: &quot;&quot;,\n          &quot;sourceColumnType&quot;: &quot;int&quot;\n        }\n      ]\n    }\n  ],\n  &quot;targetTables&quot;: [\n    {\n      &quot;targetSchemaName&quot;: &quot;chr&quot;,\n      &quot;targetTableName&quot;: &quot;userAccount&quot;,\n      &quot;targetTableColumnDefinitions&quot;: [\n        {\n          &quot;sourceSchemaName&quot;: &quot;vsc&quot;,\n          &quot;sourceTableName&quot;: &quot;user&quot;,\n          &quot;sourceColumnName&quot;: &quot;userId&quot;,\n          &quot;targetColumn&quot;: &quot;id&quot;,\n          &quot;targetColumnAttributes&quot;: &quot;&quot;,\n          &quot;targetColumnType&quot;: &quot;varchar&quot;\n        },\n        {\n          &quot;sourceSchemaName&quot;: &quot;npp&quot;,\n          &quot;sourceTableName&quot;: &quot;profile&quot;,\n          &quot;sourceColumnName&quot;: &quot;profileId&quot;,\n          &quot;targetColumn&quot;: &quot;pId&quot;,\n          &quot;targetColumnAttributes&quot;: &quot;&quot;,\n          &quot;targetColumnType&quot;: &quot;int&quot;\n        }\n      ]\n    },\n    {\n      &quot;targetSchemaName&quot;: &quot;chr&quot;,\n      &quot;targetTableName&quot;: &quot;pIds&quot;,\n      &quot;targetTableColumnDefinitions&quot;: [\n        {\n          &quot;sourceSchemaName&quot;: &quot;npp&quot;,\n          &quot;sourceTableName&quot;: &quot;profile&quot;,\n          &quot;sourceColumnName&quot;: &quot;profileId&quot;,\n          &quot;targetColumn&quot;: &quot;pId&quot;,\n          &quot;targetColumnAttributes&quot;: &quot;&quot;,\n          &quot;targetColumnType&quot;: &quot;int&quot;\n        }\n      ]\n    }\n  ]\n}\n\n</code></pre>\n<p>As you can see, my input.json has list of source table names along with column definitions for each and list of target table names and in targetTableColumnDefinitions array, the mapping information for column is available. Such as from which source table and column the current target column is mapped to.</p>\n<p>Now, I want to convert this JSON as below</p>\n<pre><code>{\n  &quot;source&quot;: {\n    &quot;npp-profile&quot;: {\n      &quot;id&quot;: &quot;npp-profile&quot;,\n      &quot;schemaName&quot;: &quot;npp&quot;,\n      &quot;tableName&quot;: &quot;profile&quot;,\n      &quot;mappedTargetTableNames&quot;: [&quot;chr-pIds&quot;, &quot;chr-userAccount&quot;],\n      &quot;sourceColumnMap&quot;: {\n        &quot;profileId&quot;: {\n          &quot;sourceColumnDefinition&quot;: {\n            &quot;schemaName&quot;: &quot;npp&quot;,\n            &quot;tableName&quot;: &quot;profile&quot;,\n            &quot;columnName&quot;: &quot;profileId&quot;,\n            &quot;columnType&quot;: &quot;int&quot;,\n            &quot;columnAttributes&quot;: null\n          },\n          &quot;mappedTargetColumnDefinition&quot;: [\n            {\n              &quot;schemaName&quot;: &quot;chr&quot;,\n              &quot;tableName&quot;: &quot;userAccount&quot;,\n              &quot;columnName&quot;: &quot;pId&quot;,\n              &quot;columnType&quot;: &quot;int&quot;,\n              &quot;columnAttributes&quot;: null\n            },\n            {\n              &quot;schemaName&quot;: &quot;chr&quot;,\n              &quot;tableName&quot;: &quot;pIds&quot;,\n              &quot;columnName&quot;: &quot;id&quot;,\n              &quot;columnType&quot;: &quot;int&quot;,\n              &quot;columnAttributes&quot;: null\n            }\n          ]\n        }\n      }\n    },\n    &quot;vsc-user&quot;: {\n      &quot;id&quot;: &quot;vsc-user&quot;,\n      &quot;schemaName&quot;: &quot;vsc&quot;,\n      &quot;tableName&quot;: &quot;user&quot;,\n      &quot;mappedTargetTableNames&quot;: [&quot;chr-userAccount&quot;],\n      &quot;sourceColumnMap&quot;: {\n        &quot;userId&quot;: {\n          &quot;sourceColumnDefinition&quot;: {\n            &quot;schemaName&quot;: &quot;vsc&quot;,\n            &quot;tableName&quot;: &quot;user&quot;,\n            &quot;columnName&quot;: &quot;userId&quot;,\n            &quot;columnType&quot;: &quot;varchar&quot;,\n            &quot;columnAttributes&quot;: null\n          },\n          &quot;mappedTargetColumnDefinition&quot;: [\n            {\n              &quot;schemaName&quot;: &quot;chr&quot;,\n              &quot;tableName&quot;: &quot;userAccount&quot;,\n              &quot;columnName&quot;: &quot;id&quot;,\n              &quot;columnType&quot;: &quot;varchar&quot;,\n              &quot;columnAttributes&quot;: null\n            }\n          ]\n        }\n      }\n    }\n  },\n  &quot;target&quot;: {\n    &quot;chr-pIds&quot;: {\n      &quot;id&quot;: &quot;chr-pIds&quot;,\n      &quot;schemaName&quot;: &quot;chr&quot;,\n      &quot;tableName&quot;: &quot;pIds&quot;,\n      &quot;mappedSourceTables&quot;: [&quot;npp-profile&quot;],\n      &quot;targetColumnMap&quot;: {\n        &quot;id&quot;: {\n          &quot;targetColumnDefinition&quot;: {\n            &quot;schemaName&quot;: &quot;chr&quot;,\n            &quot;tableName&quot;: &quot;pIds&quot;,\n            &quot;columnName&quot;: &quot;id&quot;,\n            &quot;columnType&quot;: &quot;int&quot;,\n            &quot;columnAttributes&quot;: null\n          },\n          &quot;mappedSourceColumnDefinition&quot;: {\n            &quot;schemaName&quot;: &quot;npp&quot;,\n            &quot;tableName&quot;: &quot;profile&quot;,\n            &quot;columnName&quot;: &quot;profileId&quot;,\n            &quot;columnType&quot;: &quot;int&quot;,\n            &quot;columnAttributes&quot;: null\n          }\n        }\n      }\n    },\n    &quot;chr-userAccount&quot;: {\n      &quot;id&quot;: &quot;chr-userAccount&quot;,\n      &quot;schemaName&quot;: &quot;chr&quot;,\n      &quot;tableName&quot;: &quot;userAccount&quot;,\n      &quot;mappedSourceTables&quot;: [&quot;npp-profile&quot;, &quot;vsc-user&quot;],\n      &quot;targetColumnMap&quot;: {\n        &quot;pId&quot;: {\n          &quot;targetColumnDefinition&quot;: {\n            &quot;schemaName&quot;: &quot;chr&quot;,\n            &quot;tableName&quot;: &quot;userAccount&quot;,\n            &quot;columnName&quot;: &quot;pId&quot;,\n            &quot;columnType&quot;: &quot;int&quot;,\n            &quot;columnAttributes&quot;: null\n          },\n          &quot;mappedSourceColumnDefinition&quot;: {\n            &quot;schemaName&quot;: &quot;npp&quot;,\n            &quot;tableName&quot;: &quot;profile&quot;,\n            &quot;columnName&quot;: &quot;profileId&quot;,\n            &quot;columnType&quot;: &quot;int&quot;,\n            &quot;columnAttributes&quot;: null\n          }\n        },\n        &quot;id&quot;: {\n          &quot;targetColumnDefinition&quot;: {\n            &quot;schemaName&quot;: &quot;chr&quot;,\n            &quot;tableName&quot;: &quot;userAccount&quot;,\n            &quot;columnName&quot;: &quot;id&quot;,\n            &quot;columnType&quot;: &quot;varchar&quot;,\n            &quot;columnAttributes&quot;: null\n          },\n          &quot;mappedSourceColumnDefinition&quot;: {\n            &quot;schemaName&quot;: &quot;vsc&quot;,\n            &quot;tableName&quot;: &quot;user&quot;,\n            &quot;columnName&quot;: &quot;userId&quot;,\n            &quot;columnType&quot;: &quot;varchar&quot;,\n            &quot;columnAttributes&quot;: null\n          }\n        }\n      }\n    }\n  }\n}\n</code></pre>\n<p>I want to list all source tables under source object and all target tables under target object. I also want to create a new element called 'mappedTargetTableNames' in each source table object to find out which target table it is mapped to. Similarly, 'mappedSourceTables' needs to be added in each target table to find out which source tables are linked to the target table. And for each column in sourceTable object, I want to create the list of target table columns as one source table's column could map to multiple target table columns. Similarly I want to have source column details for each target table columns. Please can you help to write a jolt spec for this.\nPlease can you help to create the Jolt spec for this use case.</p>\n"},{"tags":["java","android","android-studio-3.0","timedelay","postdelayed"],"answers":[{"comments":[{"owner":{"account_id":10620908,"reputation":27,"user_id":7822070,"display_name":"Athanasios .B"},"score":0,"creation_date":1509636085,"post_id":47062948,"comment_id":81106356,"body_markdown":"Thank you for your answer. It works, but how can i stop everything when for example it detects a tap during the delay? I cant figure it out.","body":"Thank you for your answer. It works, but how can i stop everything when for example it detects a tap during the delay? I cant figure it out."},{"owner":{"account_id":10620908,"reputation":27,"user_id":7822070,"display_name":"Athanasios .B"},"score":0,"creation_date":1509643984,"post_id":47062948,"comment_id":81111858,"body_markdown":"Actually never mind I made a mistake which caused a part of the code to repeat again and again","body":"Actually never mind I made a mistake which caused a part of the code to repeat again and again"}],"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1509567250,"creation_date":1509567250,"answer_id":47062948,"question_id":47062883,"body_markdown":"    boolean previousTapDetected;\r\n    ...\r\n    button.setOnClickListener(new View.OnClickListener){\r\n     @Override\r\n            public void onClick(View v) {\r\n                .......\r\n                if(previousTapDetected) {\r\n                    //We got a tap during the delay\r\n                }\r\n                Handler handler = new Handler();\r\n                previousTapDetected = true;\r\n                handler.postDelayed(new Runnable() {\r\n    \r\n                    @Override\r\n                    public void run() {\r\n                        previousTapDetected = false;\r\n                    //Do some thing after the delay\r\n    \r\n                   }\r\n                }, randomDelay);\r\n    \r\n                //Do other things\r\n            }\r\n        });\r\n\r\n","title":"How to detect taps on a button whilst a delay caused by postDelayed Handler","body":"<pre><code>boolean previousTapDetected;\n...\nbutton.setOnClickListener(new View.OnClickListener){\n @Override\n        public void onClick(View v) {\n            .......\n            if(previousTapDetected) {\n                //We got a tap during the delay\n            }\n            Handler handler = new Handler();\n            previousTapDetected = true;\n            handler.postDelayed(new Runnable() {\n\n                @Override\n                public void run() {\n                    previousTapDetected = false;\n                //Do some thing after the delay\n\n               }\n            }, randomDelay);\n\n            //Do other things\n        }\n    });\n</code></pre>\n"}],"owner":{"account_id":10620908,"reputation":27,"user_id":7822070,"display_name":"Athanasios .B"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":47062948,"answer_count":1,"score":0,"last_activity_date":1683742094,"creation_date":1509566962,"question_id":47062883,"body_markdown":"I want to solve a problem that I have been trying to do so the last couple of days but I don&#39;t have that much experience and I couldn&#39;t find the solution anywhere else. \r\n\r\nAnyway, in my app I have a button in which I have implemented the onClickClistener in order to respond to touch and inside that I have added a Handler which adds a delay and after that some code is being executed. My problem is that I want to detect any tap of the button whilst the delay is happening and the postDelayed function doesn&#39;t allow me to do so. How can I actually do that?\r\nI&#39;ve posted my code that is related on that.\r\nThanks in advance!\r\n\r\nP.S(I don&#39;t mind not using this postDelayed thing.)\r\n    \r\n    \r\n    Button button = findViewById(R.id.myButtonId);\r\n\r\n    button.setOnClickListener(new View.OnClickListener){\r\n     @Override\r\n            public void onClick(View v) {\r\n                .......\r\n                \r\n                Handler handler = new Handler();\r\n                handler.postDelayed(new Runnable() {\r\n                    \r\n                    @Override\r\n                    public void run() {\r\n                      \r\n                    //Do some thing after the delay\r\n                    \r\n                   }\r\n                }, randomDelay);\r\n                \r\n                //Do other things\r\n            }\r\n        });\r\n\r\n    ","title":"How to detect taps on a button whilst a delay caused by postDelayed Handler","body":"<p>I want to solve a problem that I have been trying to do so the last couple of days but I don't have that much experience and I couldn't find the solution anywhere else.</p>\n<p>Anyway, in my app I have a button in which I have implemented the onClickClistener in order to respond to touch and inside that I have added a Handler which adds a delay and after that some code is being executed. My problem is that I want to detect any tap of the button whilst the delay is happening and the postDelayed function doesn't allow me to do so. How can I actually do that?\nI've posted my code that is related on that.\nThanks in advance!</p>\n<p>P.S(I don't mind not using this postDelayed thing.)</p>\n<pre><code>Button button = findViewById(R.id.myButtonId);\n\nbutton.setOnClickListener(new View.OnClickListener){\n @Override\n        public void onClick(View v) {\n            .......\n            \n            Handler handler = new Handler();\n            handler.postDelayed(new Runnable() {\n                \n                @Override\n                public void run() {\n                  \n                //Do some thing after the delay\n                \n               }\n            }, randomDelay);\n            \n            //Do other things\n        }\n    });\n</code></pre>\n"},{"tags":["java","audio"],"comments":[{"owner":{"account_id":7405785,"reputation":2672,"user_id":5634769,"display_name":"gpasch"},"score":0,"creation_date":1683868824,"post_id":76221414,"comment_id":134435363,"body_markdown":"I wouldn&#39;t use these even for educational purposes because you re gonna get embarassed as you do right now. For me the Clip is something you use, the kids have a little dance around and that&#39;s it. Unless your kids are 3-5 y.o. I wouldn&#39;t even use Clip.","body":"I wouldn&#39;t use these even for educational purposes because you re gonna get embarassed as you do right now. For me the Clip is something you use, the kids have a little dance around and that&#39;s it. Unless your kids are 3-5 y.o. I wouldn&#39;t even use Clip."}],"owner":{"account_id":23339031,"reputation":9,"user_id":17414193,"display_name":"Ben Trainor"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1683741866,"creation_date":1683741866,"question_id":76221414,"body_markdown":"I&#39;m teaching a programming course, and we&#39;ve been building a text adventure game in Java. I am adding some audio as one of the last steps, and it usually works. But seemingly randomly, I will get the error `Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: Unsupported control type: Master Gain at java.desktop/com.sun.media.sound.AbstractLine.getControl(AbstractLine.java:149)`. This is my method body:\r\n\r\n```\r\npublic Clip playAudio(String audioFilePath, int loopCount, float startVolume) throws Exception {\r\n\r\n    File audioFile = new File(audioFilePath);\r\n    \r\n    // File exists\r\n    if (audioFile.exists()) {\r\n        AudioInputStream audioInput = AudioSystem.getAudioInputStream(audioFile);\r\n        Clip clip = AudioSystem.getClip();\r\n        clip.open(audioInput);\r\n        FloatControl volume = (FloatControl) clip.getControl(FloatControl.Type.MASTER_GAIN); // This throws my error\r\n        volume.setValue(startVolume);\r\n        clip.loop(loopCount);\r\n        return clip;\r\n    }\r\n    // File does not exist\r\n    else {\r\n        System.out.println(&quot;Audio file does not exist.&quot;);\r\n        return null;\r\n    }\r\n\r\n}\r\n```\r\n\r\nFor whatever reason, I can call this just fine on short and long audio files, all WAVs, but some trigger the error above. Once I triggered the error and then &quot;fixed&quot; it by just changing the startVolume amount I passed to the function.\r\n\r\nI&#39;ve tried having the program wait 50ms before trying to set the volume, changing the input levels, having only one audio file play, etc. Different files behave just fine, but for some reason this one file doesn&#39;t work. It&#39;s the only thing that changes between method calls. I have opened the clip before setting gain like I&#39;m supposed to as well.","title":"Java Clip unsupported control type exception","body":"<p>I'm teaching a programming course, and we've been building a text adventure game in Java. I am adding some audio as one of the last steps, and it usually works. But seemingly randomly, I will get the error <code>Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: Unsupported control type: Master Gain at java.desktop/com.sun.media.sound.AbstractLine.getControl(AbstractLine.java:149)</code>. This is my method body:</p>\n<pre><code>public Clip playAudio(String audioFilePath, int loopCount, float startVolume) throws Exception {\n\n    File audioFile = new File(audioFilePath);\n    \n    // File exists\n    if (audioFile.exists()) {\n        AudioInputStream audioInput = AudioSystem.getAudioInputStream(audioFile);\n        Clip clip = AudioSystem.getClip();\n        clip.open(audioInput);\n        FloatControl volume = (FloatControl) clip.getControl(FloatControl.Type.MASTER_GAIN); // This throws my error\n        volume.setValue(startVolume);\n        clip.loop(loopCount);\n        return clip;\n    }\n    // File does not exist\n    else {\n        System.out.println(&quot;Audio file does not exist.&quot;);\n        return null;\n    }\n\n}\n</code></pre>\n<p>For whatever reason, I can call this just fine on short and long audio files, all WAVs, but some trigger the error above. Once I triggered the error and then &quot;fixed&quot; it by just changing the startVolume amount I passed to the function.</p>\n<p>I've tried having the program wait 50ms before trying to set the volume, changing the input levels, having only one audio file play, etc. Different files behave just fine, but for some reason this one file doesn't work. It's the only thing that changes between method calls. I have opened the clip before setting gain like I'm supposed to as well.</p>\n"},{"tags":["java","arrays","arraylist"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":1,"creation_date":1683740839,"post_id":76221212,"comment_id":134414700,"body_markdown":"`tempList[0] = 100;` overwrites the array element. `x = 200` only overwrites the local variable `x` which has no reference to the list where the previous value came from.","body":"<code>tempList[0] = 100;</code> overwrites the array element. <code>x = 200</code> only overwrites the local variable <code>x</code> which has no reference to the list where the previous value came from."},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1683742304,"post_id":76221212,"comment_id":134414984,"body_markdown":"Your two examples are not analogous.  For something more comparable to the `List&lt;Integer&gt;` case, instead of `tempList[0] = 100`, try `tempList = int[]{5, 6}`.","body":"Your two examples are not analogous.  For something more comparable to the <code>List&lt;Integer&gt;</code> case, instead of <code>tempList[0] = 100</code>, try <code>tempList = int[]{5, 6}</code>."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1683753108,"post_id":76221212,"comment_id":134416938,"body_markdown":"Java is pass by value.  Even arrays and class objects.  The fact that you can access the contents of an array or object via a reference does not change this since you can&#39;t change the reference that was passed, only what it points to (or refers to).","body":"Java is pass by value.  Even arrays and class objects.  The fact that you can access the contents of an array or object via a reference does not change this since you can&#39;t change the reference that was passed, only what it points to (or refers to)."}],"answers":[{"tags":[],"owner":{"account_id":26593916,"reputation":291,"user_id":20228153,"display_name":"charlesz"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1683741171,"creation_date":1683740791,"answer_id":76221281,"question_id":76221212,"body_markdown":"For pass-by-value vs. pass-by-reference, see https://stackoverflow.com/q/40480/20228153.\r\n\r\nIn your case, the `int[]` case, you are not modifying the value of `int[]`. Instead, the value of `int[]` is a reference to an int array, and you are using that reference to modify the array, thus the original array is also modified.\r\n\r\n```java\r\nList&lt;int[]&gt; res = List.of(new int[]{1, 2},new int[]{3,4});\r\n```\r\n\r\nWhen doing above, you initialized two `int[]` objects, let&#39;s call them array 1 and array 2 respectively, and you put the references of array 1 and array 2 inside a `List&lt;int[]&gt; res`.\r\n\r\n```java\r\nint[] tempList = res.get(0);\r\n```\r\n\r\nWhen you do this, you get reference of array 1, and put it in variable `tempList`.\r\n\r\nTherefore, there is always only 1 copy of array 1, so when you modify it through its reference you stored in `tempList`, that array 1 is modified, so when you try to retrieve it later using `res.get(0)`, you retrieved the modified `int[]`.\r\n\r\n```java\r\nList&lt;Integer&gt; list = List.of(1,2,3,4);\r\n```\r\n\r\nThis is similar. You created 4 `Integer` objects, and stored their references in `List&lt;Integer&gt; list`.\r\n\r\n```java\r\nInteger x = list.get(2);\r\n```\r\n\r\nYou get the reference of the third `Integer` object and put it in variable `x`.\r\n\r\n```java\r\nx = 200;\r\n```\r\n\r\nThis is what makes it different. You are directly changing variable `x`, from the reference of your previously created object to the reference of a newly created object of `Integer` that contains 200. However, this only changes variable `x`, but does not change the reference stored in your `list`.\r\n\r\nThat is why `list` ends up not changing when you check later.","title":"List&lt;int[]&gt; passed by reference?","body":"<p>For pass-by-value vs. pass-by-reference, see <a href=\"https://stackoverflow.com/q/40480/20228153\">Is Java &quot;pass-by-reference&quot; or &quot;pass-by-value&quot;?</a>.</p>\n<p>In your case, the <code>int[]</code> case, you are not modifying the value of <code>int[]</code>. Instead, the value of <code>int[]</code> is a reference to an int array, and you are using that reference to modify the array, thus the original array is also modified.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;int[]&gt; res = List.of(new int[]{1, 2},new int[]{3,4});\n</code></pre>\n<p>When doing above, you initialized two <code>int[]</code> objects, let's call them array 1 and array 2 respectively, and you put the references of array 1 and array 2 inside a <code>List&lt;int[]&gt; res</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] tempList = res.get(0);\n</code></pre>\n<p>When you do this, you get reference of array 1, and put it in variable <code>tempList</code>.</p>\n<p>Therefore, there is always only 1 copy of array 1, so when you modify it through its reference you stored in <code>tempList</code>, that array 1 is modified, so when you try to retrieve it later using <code>res.get(0)</code>, you retrieved the modified <code>int[]</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Integer&gt; list = List.of(1,2,3,4);\n</code></pre>\n<p>This is similar. You created 4 <code>Integer</code> objects, and stored their references in <code>List&lt;Integer&gt; list</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Integer x = list.get(2);\n</code></pre>\n<p>You get the reference of the third <code>Integer</code> object and put it in variable <code>x</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>x = 200;\n</code></pre>\n<p>This is what makes it different. You are directly changing variable <code>x</code>, from the reference of your previously created object to the reference of a newly created object of <code>Integer</code> that contains 200. However, this only changes variable <code>x</code>, but does not change the reference stored in your <code>list</code>.</p>\n<p>That is why <code>list</code> ends up not changing when you check later.</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683741442,"creation_date":1683741442,"answer_id":76221358,"question_id":76221212,"body_markdown":"__All__ java objects are passed by reference. If you&#39;re familiar with C, that&#39;s usually called a _pointer_, although the term was considered somewhat tainted at the time java was designed (tainted in the sense one might think &#39;pointer&#39; implies you can do things like &#39;I shall add 2 to it&#39; or some such), so java calls them &#39;reference&#39;. But, same thing.\r\n\r\nAnd arrays are objects. Everything is, except the hardcoded list of primitives (int, long, double, float, boolean, short, byte, char).\r\n\r\nSo, given:\r\n\r\n```\r\nList&lt;int[]&gt; foo = new ArrayList&lt;int[]&gt;();\r\nint[] x = {1, 2, 3};\r\nfoo.add(x);\r\n```\r\n\r\nThis is happening:\r\n\r\n* Create a new arraylist. It has no name. Create it by writing some bytes on the heap.\r\n* Store the __position__ in the heap (so not the list itself, the pointer to it) in variable `foo`. `foo` currently points at it. It may point at other lists in the future; other variables may point at this same arraylist later, too.\r\n* Create a new int array. It has no name. Create it by writing some bytes on the heap.\r\n* Store the __position__ in the heap in variable `x`.\r\n* Call the list&#39;s `add` method. Pass a copy of the pointer (because in java, everything is pass-by-copy, but note that everything is a reference. Java never copies giant datastructures silently, just pointers). The add method does whatever it does.\r\n\r\nEffectively, of course, it stores that pointer in its list structure.\r\n\r\nA few more relevant insights:\r\n\r\n## Pass-by-copy\r\n\r\n```\r\nint x = 10;\r\nString y = &quot;Hello&quot;; // strings are objects in java. y is a pointer.\r\ntest(x, y);\r\nSystem.out.println(x);\r\nSystem.out.println(y);\r\n\r\npublic void test(int x, String y) {\r\n  x = 20;\r\n  y = &quot;World&quot;;\r\n}\r\n```\r\n\r\nThe above code prints __10, Hello__ - java is pass by copy. The fact that test changes its copy of this value is immaterial. The fact that the test changes its own variable (`String y`) that started out containing a copy of the pointer to the `Hello` object and changed it to point at some other object, is immaterial: They are copies; it doesn&#39;t affect the caller.\r\n\r\n```\r\nint[] x = [1, 2];\r\nx[0] = 5;\r\n```\r\n\r\n`x[0]` is java-ese for: Take the `x` pointer. Dereference it (follow the pointer to the array object you find there). Find the first element and replace it with a new value. Hence, `x[0]` when `x` is null causes NullPointerException (NPE means: You tried to dereference null). Given that `x[0]` follows the pointer:\r\n\r\n```\r\nint[] x = {1, 2, 3};\r\ntest(x);\r\nSystem.out.println(Arrays.toString(x));\r\n\r\npublic void test(int[] z) {\r\n  z[0] = 8;\r\n}\r\n```\r\n\r\nWould print 8,2,3. The method has its own copy of the pointer to the int array, but the `test` method follows this pointer and does something to the object it finds there. z is a copy but it points to the same thing. It&#39;s like if I have an address book with the address of a house on it. If I copy my page from my address book and hand you the copy, then:\r\n\r\n* If you tear you copy to pieces, I don&#39;t care. I won&#39;t even be able to tell you did this.\r\n* If you decide to follow the address on it and toss a brick through the window, oh, I care about that.\r\n\r\nThe first snippet was the equivalent of ripping up the copy of my address book page. This second snippet is the equivalent of walking to the address on it and tossing bricks.\r\n\r\n## Immutables\r\n\r\nWhat you can _do_ once you dereference a pointer depends on what kind of object is at the end of that pointer. For example, if it is an array, I can change a value of it, and you can&#39;t stop me from doing this (java does not have &#39;read only arrays&#39; or some such). If it is, say, an `AtomicInteger`, I can call `.set(10)` on it and change the value it represents.\r\n\r\nHowever, if the object&#39;s class has no accessible methods that change any of its state, then it&#39;s like a house that is bullet proof. It&#39;s impervious to brick throwing. You can hand copies of a pointer out all day without having to fear code you handed a copy of the address to throws a brick through the window. Cuz the windows are impervious to it. This is called &#39;an immutable object&#39;.\r\n\r\nString and Integer both are like this. This doesn&#39;t work:\r\n\r\n```\r\nInteger y  = new Integer(20);\r\ny.setValue(40);\r\n```\r\n\r\n__There is no set method__. At all. Check the javadoc. Not a single method that changes anything. String - same thing. The `toLowerCase()` method does not &#39;change this strings contents&#39;. It _makes an entirely new string by lower casing this string; it does not change this string_.\r\n\r\n`int[]` is not immutable. `Integer` is.\r\n","title":"List&lt;int[]&gt; passed by reference?","body":"<p><strong>All</strong> java objects are passed by reference. If you're familiar with C, that's usually called a <em>pointer</em>, although the term was considered somewhat tainted at the time java was designed (tainted in the sense one might think 'pointer' implies you can do things like 'I shall add 2 to it' or some such), so java calls them 'reference'. But, same thing.</p>\n<p>And arrays are objects. Everything is, except the hardcoded list of primitives (int, long, double, float, boolean, short, byte, char).</p>\n<p>So, given:</p>\n<pre><code>List&lt;int[]&gt; foo = new ArrayList&lt;int[]&gt;();\nint[] x = {1, 2, 3};\nfoo.add(x);\n</code></pre>\n<p>This is happening:</p>\n<ul>\n<li>Create a new arraylist. It has no name. Create it by writing some bytes on the heap.</li>\n<li>Store the <strong>position</strong> in the heap (so not the list itself, the pointer to it) in variable <code>foo</code>. <code>foo</code> currently points at it. It may point at other lists in the future; other variables may point at this same arraylist later, too.</li>\n<li>Create a new int array. It has no name. Create it by writing some bytes on the heap.</li>\n<li>Store the <strong>position</strong> in the heap in variable <code>x</code>.</li>\n<li>Call the list's <code>add</code> method. Pass a copy of the pointer (because in java, everything is pass-by-copy, but note that everything is a reference. Java never copies giant datastructures silently, just pointers). The add method does whatever it does.</li>\n</ul>\n<p>Effectively, of course, it stores that pointer in its list structure.</p>\n<p>A few more relevant insights:</p>\n<h2>Pass-by-copy</h2>\n<pre><code>int x = 10;\nString y = &quot;Hello&quot;; // strings are objects in java. y is a pointer.\ntest(x, y);\nSystem.out.println(x);\nSystem.out.println(y);\n\npublic void test(int x, String y) {\n  x = 20;\n  y = &quot;World&quot;;\n}\n</code></pre>\n<p>The above code prints <strong>10, Hello</strong> - java is pass by copy. The fact that test changes its copy of this value is immaterial. The fact that the test changes its own variable (<code>String y</code>) that started out containing a copy of the pointer to the <code>Hello</code> object and changed it to point at some other object, is immaterial: They are copies; it doesn't affect the caller.</p>\n<pre><code>int[] x = [1, 2];\nx[0] = 5;\n</code></pre>\n<p><code>x[0]</code> is java-ese for: Take the <code>x</code> pointer. Dereference it (follow the pointer to the array object you find there). Find the first element and replace it with a new value. Hence, <code>x[0]</code> when <code>x</code> is null causes NullPointerException (NPE means: You tried to dereference null). Given that <code>x[0]</code> follows the pointer:</p>\n<pre><code>int[] x = {1, 2, 3};\ntest(x);\nSystem.out.println(Arrays.toString(x));\n\npublic void test(int[] z) {\n  z[0] = 8;\n}\n</code></pre>\n<p>Would print 8,2,3. The method has its own copy of the pointer to the int array, but the <code>test</code> method follows this pointer and does something to the object it finds there. z is a copy but it points to the same thing. It's like if I have an address book with the address of a house on it. If I copy my page from my address book and hand you the copy, then:</p>\n<ul>\n<li>If you tear you copy to pieces, I don't care. I won't even be able to tell you did this.</li>\n<li>If you decide to follow the address on it and toss a brick through the window, oh, I care about that.</li>\n</ul>\n<p>The first snippet was the equivalent of ripping up the copy of my address book page. This second snippet is the equivalent of walking to the address on it and tossing bricks.</p>\n<h2>Immutables</h2>\n<p>What you can <em>do</em> once you dereference a pointer depends on what kind of object is at the end of that pointer. For example, if it is an array, I can change a value of it, and you can't stop me from doing this (java does not have 'read only arrays' or some such). If it is, say, an <code>AtomicInteger</code>, I can call <code>.set(10)</code> on it and change the value it represents.</p>\n<p>However, if the object's class has no accessible methods that change any of its state, then it's like a house that is bullet proof. It's impervious to brick throwing. You can hand copies of a pointer out all day without having to fear code you handed a copy of the address to throws a brick through the window. Cuz the windows are impervious to it. This is called 'an immutable object'.</p>\n<p>String and Integer both are like this. This doesn't work:</p>\n<pre><code>Integer y  = new Integer(20);\ny.setValue(40);\n</code></pre>\n<p><strong>There is no set method</strong>. At all. Check the javadoc. Not a single method that changes anything. String - same thing. The <code>toLowerCase()</code> method does not 'change this strings contents'. It <em>makes an entirely new string by lower casing this string; it does not change this string</em>.</p>\n<p><code>int[]</code> is not immutable. <code>Integer</code> is.</p>\n"}],"owner":{"account_id":28571159,"reputation":3,"user_id":21873354,"display_name":"tanvexr"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":209,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76221281,"answer_count":2,"score":0,"last_activity_date":1683741442,"creation_date":1683740286,"question_id":76221212,"body_markdown":"I was tweaking with the code a bit and found out that when I try to update the `List&lt;int[]&gt;` I&#39;m able to do it like below but not able to do it when my list is of the type `List&lt;Integer&gt;`\r\n\r\n\r\n\r\n```\r\nList&lt;int[]&gt; res = List.of(new int[]{1, 2},new int[]{3,4});\r\n        int[] tempList = res.get(0);\r\n        tempList[0] = 100;\r\n        System.out.println(Arrays.toString(res.get(0)));\r\n\r\n        List&lt;Integer&gt; list = List.of(1,2,3,4);\r\n        Integer x = list.get(2);\r\n        x = 200;\r\n        System.out.println(list);\r\n```\r\n\r\n&lt;img src=&quot;https://i.stack.imgur.com/vGTP0.png&quot;&gt;\r\n\r\nIs the int[] passed by reference? or how does this work internally?\r\n","title":"List&lt;int[]&gt; passed by reference?","body":"<p>I was tweaking with the code a bit and found out that when I try to update the <code>List&lt;int[]&gt;</code> I'm able to do it like below but not able to do it when my list is of the type <code>List&lt;Integer&gt;</code></p>\n<pre><code>List&lt;int[]&gt; res = List.of(new int[]{1, 2},new int[]{3,4});\n        int[] tempList = res.get(0);\n        tempList[0] = 100;\n        System.out.println(Arrays.toString(res.get(0)));\n\n        List&lt;Integer&gt; list = List.of(1,2,3,4);\n        Integer x = list.get(2);\n        x = 200;\n        System.out.println(list);\n</code></pre>\n<img src=\"https://i.stack.imgur.com/vGTP0.png\">\n<p>Is the int[] passed by reference? or how does this work internally?</p>\n"},{"tags":["java","image","apache-poi","equation"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1683736554,"post_id":76219888,"comment_id":134413689,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1683775873,"post_id":76219888,"comment_id":134419204,"body_markdown":"Apache POI is incomplete in this. See https://stackoverflow.com/questions/70648296/merge-documents-by-inserting-content-into-a-new-page-using-poi/70700519#70700519 for an example which copies body elements from one document to another and considers underlying low level elements.","body":"Apache POI is incomplete in this. See <a href=\"https://stackoverflow.com/questions/70648296/merge-documents-by-inserting-content-into-a-new-page-using-poi/70700519#70700519\" title=\"merge documents by inserting content into a new page using poi\">stackoverflow.com/questions/70648296/&hellip;</a> for an example which copies body elements from one document to another and considers underlying low level elements."}],"owner":{"account_id":25922586,"reputation":1,"user_id":19644914,"display_name":"Anvar Primov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683741128,"creation_date":1683730445,"question_id":76219888,"body_markdown":"I am building a **java** code using apache poi to read a .docx word file and generate another .docx word file. I have to copy a **XWPFTableCell** to another **XWPFTableCell** exactly. This **XWPFTableCell** may contains math equations, chemistry formulas along with pictures.\r\n\r\nhere is a sample of **XWPFTableCell**\r\n\r\n*some text here ... **equation, formula**, some text here ..., **an image** some text here ...*\r\n\r\n[Sample of the XWPFTableCell](https://i.stack.imgur.com/RiVmu.png)\r\n\r\n\r\n\r\nINPUT (format is *.docx)\r\n\r\n[Sample of the XWPFTableCell][1]\r\n\r\nHow can copy the XWPFTableCell to new XWPFTableCell of the new .doxc file with its original form(contents). ( fisrtly I tried to read the cell and write to database, but I failed)\r\n\r\n\r\nOUTPUT (format is *.docx)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YnQag.png\r\n\r\nhere is my code\r\n\r\n    public ApiResponse generateDocument(HttpServletResponse response) throws Exception {\r\n        try (XWPFDocument targetDoc = new XWPFDocument()){\r\n            ByteArrayOutputStream b = new ByteArrayOutputStream();\r\n            XWPFDocument courseDoc = new XWPFDocument(new FileInputStream(&quot;upload/yukla.docx&quot;));\r\n\r\n            XWPFTable targetTable = targetDoc.createTable(10, 5);\r\n            for (IBodyElement ibodyelement : courseDoc.getBodyElements()) {\r\n                if (ibodyelement instanceof XWPFTable courseTable) {\r\n                    cloneTable(courseTable, targetTable);\r\n                }\r\n            }\r\n\r\n            response.setContentType(&quot;application/octet-stream&quot;);\r\n            response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=VARIANTS.docx&quot;);\r\n            FileCopyUtils.copy(b.toByteArray(), response.getOutputStream());\r\n            targetDoc.write(b);\r\n            courseDoc.close();\r\n            targetDoc.close();\r\n            return new ApiResponse(&quot;SUCCESS&quot;, true);\r\n        }\r\n    }\r\n\r\n    private void cloneTable(XWPFTable courseTable, XWPFTable targetTable) {\r\n        int cntRow = 0;\r\n        for (XWPFTableRow row : courseTable.getRows()) {\r\n            for (int i = 0; i &lt; 5; i++) {\r\n                XWPFTableCell courseCell = row.getCell(i);\r\n                XWPFTableCell targetCell = targetTable.getRow(cntRow).getCell(i);\r\n                cloneCell(courseCell, targetCell);\r\n            }\r\n            cntRow++;\r\n        }\r\n    }\r\n\r\n    private void cloneCell(XWPFTableCell courseCell, XWPFTableCell targetCell) {\r\n        for (XWPFParagraph coursePr : courseCell.getParagraphs()) {\r\n            XWPFParagraph targetPr = targetCell.addParagraph();\r\n            cloneParagraph(targetPr, coursePr);\r\n        }\r\n    }\r\n\r\n    private void cloneParagraph(XWPFParagraph clone, XWPFParagraph source) {\r\n        CTPPr pPr = clone.getCTP().isSetPPr() ? clone.getCTP().getPPr() : clone.getCTP().addNewPPr();\r\n        pPr.set(source.getCTP().getPPr());\r\n        for (XWPFRun r : source.getRuns()) {\r\n            XWPFRun nr = clone.createRun();\r\n            cloneRun(nr, r);\r\n        }\r\n    }\r\n\r\n    private void cloneRun(XWPFRun clone, XWPFRun source) {\r\n        CTRPr rPr = clone.getCTR().isSetRPr() ? clone.getCTR().getRPr() : clone.getCTR().addNewRPr();\r\n        rPr.set(source.getCTR().getRPr());\r\n        clone.setText(source.getText(0));\r\n    }","title":"copy a xwpftablecell to another xwpftablecell of new table with it&#39;s equations and pictures","body":"<p>I am building a <strong>java</strong> code using apache poi to read a .docx word file and generate another .docx word file. I have to copy a <strong>XWPFTableCell</strong> to another <strong>XWPFTableCell</strong> exactly. This <strong>XWPFTableCell</strong> may contains math equations, chemistry formulas along with pictures.</p>\n<p>here is a sample of <strong>XWPFTableCell</strong></p>\n<p><em>some text here ... <strong>equation, formula</strong>, some text here ..., <strong>an image</strong> some text here ...</em></p>\n<p><a href=\"https://i.stack.imgur.com/RiVmu.png\" rel=\"nofollow noreferrer\">Sample of the XWPFTableCell</a></p>\n<p>INPUT (format is *.docx)</p>\n<p><a href=\"https://i.stack.imgur.com/YnQag.png\" rel=\"nofollow noreferrer\">Sample of the XWPFTableCell</a></p>\n<p>How can copy the XWPFTableCell to new XWPFTableCell of the new .doxc file with its original form(contents). ( fisrtly I tried to read the cell and write to database, but I failed)</p>\n<p>OUTPUT (format is *.docx)</p>\n<p>here is my code</p>\n<pre><code>public ApiResponse generateDocument(HttpServletResponse response) throws Exception {\n    try (XWPFDocument targetDoc = new XWPFDocument()){\n        ByteArrayOutputStream b = new ByteArrayOutputStream();\n        XWPFDocument courseDoc = new XWPFDocument(new FileInputStream(&quot;upload/yukla.docx&quot;));\n\n        XWPFTable targetTable = targetDoc.createTable(10, 5);\n        for (IBodyElement ibodyelement : courseDoc.getBodyElements()) {\n            if (ibodyelement instanceof XWPFTable courseTable) {\n                cloneTable(courseTable, targetTable);\n            }\n        }\n\n        response.setContentType(&quot;application/octet-stream&quot;);\n        response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=VARIANTS.docx&quot;);\n        FileCopyUtils.copy(b.toByteArray(), response.getOutputStream());\n        targetDoc.write(b);\n        courseDoc.close();\n        targetDoc.close();\n        return new ApiResponse(&quot;SUCCESS&quot;, true);\n    }\n}\n\nprivate void cloneTable(XWPFTable courseTable, XWPFTable targetTable) {\n    int cntRow = 0;\n    for (XWPFTableRow row : courseTable.getRows()) {\n        for (int i = 0; i &lt; 5; i++) {\n            XWPFTableCell courseCell = row.getCell(i);\n            XWPFTableCell targetCell = targetTable.getRow(cntRow).getCell(i);\n            cloneCell(courseCell, targetCell);\n        }\n        cntRow++;\n    }\n}\n\nprivate void cloneCell(XWPFTableCell courseCell, XWPFTableCell targetCell) {\n    for (XWPFParagraph coursePr : courseCell.getParagraphs()) {\n        XWPFParagraph targetPr = targetCell.addParagraph();\n        cloneParagraph(targetPr, coursePr);\n    }\n}\n\nprivate void cloneParagraph(XWPFParagraph clone, XWPFParagraph source) {\n    CTPPr pPr = clone.getCTP().isSetPPr() ? clone.getCTP().getPPr() : clone.getCTP().addNewPPr();\n    pPr.set(source.getCTP().getPPr());\n    for (XWPFRun r : source.getRuns()) {\n        XWPFRun nr = clone.createRun();\n        cloneRun(nr, r);\n    }\n}\n\nprivate void cloneRun(XWPFRun clone, XWPFRun source) {\n    CTRPr rPr = clone.getCTR().isSetRPr() ? clone.getCTR().getRPr() : clone.getCTR().addNewRPr();\n    rPr.set(source.getCTR().getRPr());\n    clone.setText(source.getText(0));\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","jpa","spring-batch"],"comments":[{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1683577432,"post_id":76202397,"comment_id":134385271,"body_markdown":"What do yo mean by two datasources? Spring Batch requires a single datasource for the job repository. Please share a code example of what you are trying to achieve.","body":"What do yo mean by two datasources? Spring Batch requires a single datasource for the job repository. Please share a code example of what you are trying to achieve."}],"answers":[{"tags":[],"owner":{"account_id":6169704,"reputation":149,"user_id":4808346,"display_name":"Soufiane KAMAD"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683643091,"creation_date":1683643091,"answer_id":76210505,"question_id":76202397,"body_markdown":"Inject your two datasources into your configuration class using @Autowired annotation.\r\n\r\nDefine then a job that consists of two steps, each using a different datasource. Use the step() method to create a step for each data source, and pass the appropriate datasource as a parameter. Inside each step, define a reader, processor, and writer that use the corresponding data source. For example: read from datasource1 and write to datasource2.\r\n\r\nYou can configure your datasources separately, either in your application.properties file or in a separate configuration class.","title":"How to configure two datasources in spring batch 5?","body":"<p>Inject your two datasources into your configuration class using @Autowired annotation.</p>\n<p>Define then a job that consists of two steps, each using a different datasource. Use the step() method to create a step for each data source, and pass the appropriate datasource as a parameter. Inside each step, define a reader, processor, and writer that use the corresponding data source. For example: read from datasource1 and write to datasource2.</p>\n<p>You can configure your datasources separately, either in your application.properties file or in a separate configuration class.</p>\n"},{"comments":[{"owner":{"account_id":1917319,"reputation":428,"user_id":1729649,"display_name":"Sukh"},"score":0,"creation_date":1684089471,"post_id":76221283,"comment_id":134462216,"body_markdown":"i am not able to find how we can set data source with reader or processor. There is no option in spring 5. Can u please post an example.","body":"i am not able to find how we can set data source with reader or processor. There is no option in spring 5. Can u please post an example."}],"tags":[],"owner":{"account_id":5612220,"reputation":213,"user_id":4444586,"display_name":"praneeth"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683740794,"creation_date":1683740794,"answer_id":76221283,"question_id":76202397,"body_markdown":"Here is sample implementation.\r\n\r\n**application.properties**\r\n\r\n```\r\nspring.datasource.ds1.url=jdbc:oracle:thin:@{host}:{port}:{database}\r\nspring.datasource.ds1.username={username}\r\nspring.datasource.ds1.password={password}\r\nspring.datasource.ds1.hikari.driver-class-name=oracle.jdbc.OracleDriver\r\nspring.datasource.ds1.hikari.minimum-idle=5\r\nspring.datasource.ds1.hikari.maximum-pool-size=20\r\nspring.datasource.ds1.hikari.connection-timeout=120000\r\nspring.datasource.ds1.hikari.idle-timeout=120000\r\nspring.datasource.ds1.hikari.max-lifetime=300000\r\nspring.datasource.ds1.hikari.pool-name=HikariPool-1\r\n#\r\nspring.datasource.ds2.url=jdbc:oracle:thin:@{host}:{port}:{database}\r\nspring.datasource.ds2.username={username}\r\nspring.datasource.ds2.password={password}\r\nspring.datasource.ds2.hikari.driver-class-name=oracle.jdbc.OracleDriver\r\nspring.datasource.ds2.hikari.minimum-idle=5\r\nspring.datasource.ds2.hikari.maximum-pool-size=20\r\nspring.datasource.ds2.hikari.connection-timeout=120000\r\nspring.datasource.ds2.hikari.idle-timeout=120000\r\nspring.datasource.ds2.hikari.max-lifetime=300000\r\nspring.datasource.ds2.hikari.pool-name=HikariPool-2\r\n```\r\n\r\n**configuration.java**\r\n\r\n```\r\n@EnableBatchProcessing\r\n@EnableTransactionManagement\r\n@EnableConfigurationProperties\r\n@Configuration(proxyBeanMethods = false)\r\npublic class AppConfiguration {\r\n\r\n\r\n    // == Datasource Configuration ==\r\n    @Bean(name = &quot;ds1DataSourceProperties&quot;)\r\n    @Primary\r\n    @ConfigurationProperties(prefix = &quot;spring.datasource.ds1&quot;)\r\n    public DataSourceProperties ds1DataSourceProperties() {\r\n        return new DataSourceProperties();\r\n    }\r\n\r\n    @Bean(name = &quot;ds1DataSource&quot;)\r\n    @Primary\r\n    @ConfigurationProperties(prefix = &quot;spring.datasource.ds1.hikari&quot;)\r\n    public HikariDataSource ds1DataSource(@Qualifier(&quot;ds1DataSourceProperties&quot;) DataSourceProperties ds1DataSourceProperties) {\r\n        return ds1DataSourceProperties.initializeDataSourceBuilder().type(HikariDataSource.class).build();\r\n    }\r\n\r\n    @Bean(name = &quot;ds1JdbcTemplate&quot;)\r\n    public JdbcTemplate ds1JdbcTemplate(@Qualifier(&quot;ds1DataSource&quot;) HikariDataSource ds1DataSource) {\r\n        return new JdbcTemplate(ds1DataSource);\r\n    }\r\n\r\n    @Bean(name = &quot;ds2DataSourceProperties&quot;)\r\n    @ConfigurationProperties(prefix = &quot;spring.datasource.w&quot;)\r\n    public DataSourceProperties ds2DataSourceProperties() {\r\n        return new DataSourceProperties();\r\n    }\r\n\r\n    @Bean(name = &quot;ds2DataSource&quot;)\r\n    @ConfigurationProperties(prefix = &quot;spring.datasource.w.hikari&quot;)\r\n    public HikariDataSource ds2DataSource(@Qualifier(&quot;ds2DataSourceProperties&quot;) DataSourceProperties ds2DataSourceProperties) {\r\n        return ds2DataSourceProperties.initializeDataSourceBuilder().type(HikariDataSource.class).build();\r\n    }\r\n\r\n    @Bean(name = &quot;ds2JdbcTemplate&quot;)\r\n    public JdbcTemplate ds2JdbcTemplate(@Qualifier(&quot;ds2DataSource&quot;) HikariDataSource ds2DataSource) {\r\n        return new JdbcTemplate(ds2DataSource);\r\n    }\r\n\r\n    @Bean(name = &quot;ccbsWriteTransactionManager&quot;)\r\n    public PlatformTransactionManager ccbsWriteTransactionManager(@Qualifier(&quot;ds2DataSource&quot;) HikariDataSource ds2DataSource) {\r\n        return new DataSourceTransactionManager(ds2DataSource);\r\n    }\r\n```\r\n\r\nyou can define the relevant datasource in your reader, processor, and writer.","title":"How to configure two datasources in spring batch 5?","body":"<p>Here is sample implementation.</p>\n<p><strong>application.properties</strong></p>\n<pre><code>spring.datasource.ds1.url=jdbc:oracle:thin:@{host}:{port}:{database}\nspring.datasource.ds1.username={username}\nspring.datasource.ds1.password={password}\nspring.datasource.ds1.hikari.driver-class-name=oracle.jdbc.OracleDriver\nspring.datasource.ds1.hikari.minimum-idle=5\nspring.datasource.ds1.hikari.maximum-pool-size=20\nspring.datasource.ds1.hikari.connection-timeout=120000\nspring.datasource.ds1.hikari.idle-timeout=120000\nspring.datasource.ds1.hikari.max-lifetime=300000\nspring.datasource.ds1.hikari.pool-name=HikariPool-1\n#\nspring.datasource.ds2.url=jdbc:oracle:thin:@{host}:{port}:{database}\nspring.datasource.ds2.username={username}\nspring.datasource.ds2.password={password}\nspring.datasource.ds2.hikari.driver-class-name=oracle.jdbc.OracleDriver\nspring.datasource.ds2.hikari.minimum-idle=5\nspring.datasource.ds2.hikari.maximum-pool-size=20\nspring.datasource.ds2.hikari.connection-timeout=120000\nspring.datasource.ds2.hikari.idle-timeout=120000\nspring.datasource.ds2.hikari.max-lifetime=300000\nspring.datasource.ds2.hikari.pool-name=HikariPool-2\n</code></pre>\n<p><strong>configuration.java</strong></p>\n<pre><code>@EnableBatchProcessing\n@EnableTransactionManagement\n@EnableConfigurationProperties\n@Configuration(proxyBeanMethods = false)\npublic class AppConfiguration {\n\n\n    // == Datasource Configuration ==\n    @Bean(name = &quot;ds1DataSourceProperties&quot;)\n    @Primary\n    @ConfigurationProperties(prefix = &quot;spring.datasource.ds1&quot;)\n    public DataSourceProperties ds1DataSourceProperties() {\n        return new DataSourceProperties();\n    }\n\n    @Bean(name = &quot;ds1DataSource&quot;)\n    @Primary\n    @ConfigurationProperties(prefix = &quot;spring.datasource.ds1.hikari&quot;)\n    public HikariDataSource ds1DataSource(@Qualifier(&quot;ds1DataSourceProperties&quot;) DataSourceProperties ds1DataSourceProperties) {\n        return ds1DataSourceProperties.initializeDataSourceBuilder().type(HikariDataSource.class).build();\n    }\n\n    @Bean(name = &quot;ds1JdbcTemplate&quot;)\n    public JdbcTemplate ds1JdbcTemplate(@Qualifier(&quot;ds1DataSource&quot;) HikariDataSource ds1DataSource) {\n        return new JdbcTemplate(ds1DataSource);\n    }\n\n    @Bean(name = &quot;ds2DataSourceProperties&quot;)\n    @ConfigurationProperties(prefix = &quot;spring.datasource.w&quot;)\n    public DataSourceProperties ds2DataSourceProperties() {\n        return new DataSourceProperties();\n    }\n\n    @Bean(name = &quot;ds2DataSource&quot;)\n    @ConfigurationProperties(prefix = &quot;spring.datasource.w.hikari&quot;)\n    public HikariDataSource ds2DataSource(@Qualifier(&quot;ds2DataSourceProperties&quot;) DataSourceProperties ds2DataSourceProperties) {\n        return ds2DataSourceProperties.initializeDataSourceBuilder().type(HikariDataSource.class).build();\n    }\n\n    @Bean(name = &quot;ds2JdbcTemplate&quot;)\n    public JdbcTemplate ds2JdbcTemplate(@Qualifier(&quot;ds2DataSource&quot;) HikariDataSource ds2DataSource) {\n        return new JdbcTemplate(ds2DataSource);\n    }\n\n    @Bean(name = &quot;ccbsWriteTransactionManager&quot;)\n    public PlatformTransactionManager ccbsWriteTransactionManager(@Qualifier(&quot;ds2DataSource&quot;) HikariDataSource ds2DataSource) {\n        return new DataSourceTransactionManager(ds2DataSource);\n    }\n</code></pre>\n<p>you can define the relevant datasource in your reader, processor, and writer.</p>\n"}],"owner":{"account_id":18832847,"reputation":27,"user_id":13736240,"display_name":"puru"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":846,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1683740794,"creation_date":1683562482,"question_id":76202397,"body_markdown":"How can we leverage @EnableBatchProcessing and extend default Configuration to use two data sources in Spring batch 5?\r\n\r\nIs the best practice much different than the previous version of spring batch?","title":"How to configure two datasources in spring batch 5?","body":"<p>How can we leverage @EnableBatchProcessing and extend default Configuration to use two data sources in Spring batch 5?</p>\n<p>Is the best practice much different than the previous version of spring batch?</p>\n"},{"tags":["java","android","react-native"],"owner":{"account_id":28571095,"reputation":1,"user_id":21873296,"display_name":"jaskaran singh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683740537,"creation_date":1683740537,"question_id":76221251,"body_markdown":"So I have a react native project here I am creating a saperate native componets for my realtime list for assetcard that are changing from firebase firstsore. But data is not updating don&#39;t know why\r\n\r\nI tried a lot of things nothings works\r\n\r\n```\r\n// AssetsView.java\r\n\r\n// Imports omitted for brevity\r\n\r\npublic class AssetsView extends LinearLayout {\r\n    private AssetsViewAdapter adapter;\r\n    private RecyclerView recyclerView;\r\n    private AssetsViewModel viewModel;\r\n\r\n    // Constructor and other methods omitted for brevity\r\n\r\n    public void setCoinList(CoinData[] coinList) {\r\n        viewModel.getCoinList().setValue(coinList);\r\n\r\n        // Background thread to fetch latest data\r\n        // Update coinList and notify adapter of data change\r\n    }\r\n\r\n    // Other methods omitted for brevity\r\n}\r\n\r\nclass AssetsViewAdapter extends RecyclerView.Adapter&lt;AssetsViewAdapter.ViewHolder&gt; {\r\n    private CoinData[] coinList;\r\n    // Other variables and methods omitted for brevity\r\n}\r\n\r\nclass AssetsViewModel extends ViewModel {\r\n    private MutableLiveData&lt;CoinData[]&gt; coinList;\r\n    // Other variables and methods omitted for brevity\r\n}\r\n```\r\n\r\n```\r\n   this.coinList = coinList;\r\n   notifyDataSetChanged();\r\n}\r\n```\r\n\r\nhere is my subscription code: I am updating my list on every second\r\n\r\n```\r\n\r\n\r\n\r\npublic static class ViewHolder extends RecyclerView.ViewHolder {\r\n  TextView symbol, price, name, percent;\r\n  LinearLayout gradient;\r\n\r\n  public ViewHolder(View itemView) {\r\n    super(itemView);\r\n    symbol = itemView.findViewById(R.id.symbol);\r\n    price = itemView.findViewById(R.id.price);\r\n    name = itemView.findViewById(R.id.name);\r\n    percent = itemView.findViewById(R.id.percent);\r\n    gradient = itemView.findViewById(R.id.asset_gradiant);\r\n  }\r\n}\r\n\r\n  private static class RunSub {\r\n    MutableLiveData&lt;CoinData[]&gt; coinList;\r\n    AssetsViewAdapter adapter;\r\n\r\n    RunSub(CoinData[] coinList, MutableLiveData&lt;CoinData[]&gt; coinListLiveData) {\r\n      this.coinList = coinListLiveData;\r\n      this.coinList.postValue(coinList);\r\n      this.adapter = adapter;\r\n    }\r\n\r\n    private void run() {\r\n\r\n      FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n      CollectionReference coinsRef = db.collection(&quot;realtime_rates_dev&quot;);\r\n\r\n      coinsRef.addSnapshotListener((value, error) -&gt; {\r\n        Log.d(&quot;Pos:-3&quot;, &quot;setCoinList: +&quot; + value);\r\n        if (error != null) {\r\n          Log.w(&quot;FirebaseFirestore&quot;, &quot;Listen failed.&quot;, error);\r\n          return;\r\n        }\r\n        Log.d(&quot;Pos:-4&quot;, &quot;setCoinList: +&quot; + value);\r\n\r\n        try {\r\n          if (value != null &amp;&amp; coinList.getValue().length &gt; 0) {\r\n            CoinData[] newCoins = new CoinData[coinList.getValue().length];\r\n            for (int i = 0; i &lt; coinList.getValue().length; i++) {\r\n              newCoins[i] = coinList.getValue()[i];\r\n              newCoins[i].setBuyRate(generateRandomFloat(0, 1000));\r\n              newCoins[i].setName(&quot;JaaSASDSAD&quot;);\r\n              newCoins[i].setPercentage(generateRandomFloat(0, 50));\r\n              newCoins[i].setSymbol(&quot;sdASDSAfsdf&quot;);\r\n            }\r\n            coinList.setValue(newCoins);\r\n            adapter.notifyDataSetChanged();\r\n          }\r\n        } catch (Exception e) {\r\n          Log.d(&quot;Error&quot;, &quot;run: &quot;, e);\r\n        }\r\n      });\r\n    }\r\n  }\r\n```","title":"Recycleview data is not updating after using notifyDataSetChanged and works on scroll","body":"<p>So I have a react native project here I am creating a saperate native componets for my realtime list for assetcard that are changing from firebase firstsore. But data is not updating don't know why</p>\n<p>I tried a lot of things nothings works</p>\n<pre><code>// AssetsView.java\n\n// Imports omitted for brevity\n\npublic class AssetsView extends LinearLayout {\n    private AssetsViewAdapter adapter;\n    private RecyclerView recyclerView;\n    private AssetsViewModel viewModel;\n\n    // Constructor and other methods omitted for brevity\n\n    public void setCoinList(CoinData[] coinList) {\n        viewModel.getCoinList().setValue(coinList);\n\n        // Background thread to fetch latest data\n        // Update coinList and notify adapter of data change\n    }\n\n    // Other methods omitted for brevity\n}\n\nclass AssetsViewAdapter extends RecyclerView.Adapter&lt;AssetsViewAdapter.ViewHolder&gt; {\n    private CoinData[] coinList;\n    // Other variables and methods omitted for brevity\n}\n\nclass AssetsViewModel extends ViewModel {\n    private MutableLiveData&lt;CoinData[]&gt; coinList;\n    // Other variables and methods omitted for brevity\n}\n</code></pre>\n<pre><code>   this.coinList = coinList;\n   notifyDataSetChanged();\n}\n</code></pre>\n<p>here is my subscription code: I am updating my list on every second</p>\n<pre><code>\n\n\npublic static class ViewHolder extends RecyclerView.ViewHolder {\n  TextView symbol, price, name, percent;\n  LinearLayout gradient;\n\n  public ViewHolder(View itemView) {\n    super(itemView);\n    symbol = itemView.findViewById(R.id.symbol);\n    price = itemView.findViewById(R.id.price);\n    name = itemView.findViewById(R.id.name);\n    percent = itemView.findViewById(R.id.percent);\n    gradient = itemView.findViewById(R.id.asset_gradiant);\n  }\n}\n\n  private static class RunSub {\n    MutableLiveData&lt;CoinData[]&gt; coinList;\n    AssetsViewAdapter adapter;\n\n    RunSub(CoinData[] coinList, MutableLiveData&lt;CoinData[]&gt; coinListLiveData) {\n      this.coinList = coinListLiveData;\n      this.coinList.postValue(coinList);\n      this.adapter = adapter;\n    }\n\n    private void run() {\n\n      FirebaseFirestore db = FirebaseFirestore.getInstance();\n      CollectionReference coinsRef = db.collection(&quot;realtime_rates_dev&quot;);\n\n      coinsRef.addSnapshotListener((value, error) -&gt; {\n        Log.d(&quot;Pos:-3&quot;, &quot;setCoinList: +&quot; + value);\n        if (error != null) {\n          Log.w(&quot;FirebaseFirestore&quot;, &quot;Listen failed.&quot;, error);\n          return;\n        }\n        Log.d(&quot;Pos:-4&quot;, &quot;setCoinList: +&quot; + value);\n\n        try {\n          if (value != null &amp;&amp; coinList.getValue().length &gt; 0) {\n            CoinData[] newCoins = new CoinData[coinList.getValue().length];\n            for (int i = 0; i &lt; coinList.getValue().length; i++) {\n              newCoins[i] = coinList.getValue()[i];\n              newCoins[i].setBuyRate(generateRandomFloat(0, 1000));\n              newCoins[i].setName(&quot;JaaSASDSAD&quot;);\n              newCoins[i].setPercentage(generateRandomFloat(0, 50));\n              newCoins[i].setSymbol(&quot;sdASDSAfsdf&quot;);\n            }\n            coinList.setValue(newCoins);\n            adapter.notifyDataSetChanged();\n          }\n        } catch (Exception e) {\n          Log.d(&quot;Error&quot;, &quot;run: &quot;, e);\n        }\n      });\n    }\n  }\n</code></pre>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":3,"creation_date":1683732908,"post_id":76220224,"comment_id":134412808,"body_markdown":"[mcve] please ..","body":"<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please .."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":3,"creation_date":1683733030,"post_id":76220224,"comment_id":134412841,"body_markdown":"It&#39;s not really clear what the problem is. Presumably the code you posted has a reference to the controller. The current `Dish` reference is in scope at the point you define the handlers for the buttons. Why not just call `controller.updateOrder(dish, value);` directly in the two `handle(...)` methods? If that&#39;s not possible for some reason, create and post a [mre] as suggested.","body":"It&#39;s not really clear what the problem is. Presumably the code you posted has a reference to the controller. The current <code>Dish</code> reference is in scope at the point you define the handlers for the buttons. Why not just call <code>controller.updateOrder(dish, value);</code> directly in the two <code>handle(...)</code> methods? If that&#39;s not possible for some reason, create and post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> as suggested."},{"owner":{"account_id":19718605,"reputation":37,"user_id":14437487,"display_name":"FST"},"score":0,"creation_date":1683737758,"post_id":76220224,"comment_id":134413991,"body_markdown":"You&#39;re right, my problem was that the way i was structuring my code it wasn&#39;t working, and i thought that since that handle was placed inside a for cycle, when the method ended it could not distinguish between different dishes. Now it works!","body":"You&#39;re right, my problem was that the way i was structuring my code it wasn&#39;t working, and i thought that since that handle was placed inside a for cycle, when the method ended it could not distinguish between different dishes. Now it works!"}],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683740469,"creation_date":1683740469,"answer_id":76221240,"question_id":76220224,"body_markdown":"&gt; the way I structured my code, I don&#39;t have access to the `Dish` \r\n\r\nThis is not true. You have a perfectly valid reference to the current `Dish` defined in the `for` loop. You can simply call the method in the handler, using that reference:\r\n\r\n    for (Dish dish : DishesList) {\r\n\r\n        // ...                    \r\n\r\n        minus.setOnAction(new EventHandler&lt;ActionEvent&gt;() {\r\n            @Override\r\n            public void handle(ActionEvent actionEvent) {\r\n                int value = Integer.parseInt(quantity.getText());\r\n                if (value &gt; 0) {\r\n                    quantity.setText(Integer.toString(value - 1));\r\n\r\n                    updateOrder(dish, value);\r\n\r\n                }\r\n            }\r\n        });\r\n\r\n        plus.setOnAction(new EventHandler&lt;ActionEvent&gt;() {\r\n            @Override\r\n            public void handle(ActionEvent actionEvent) {\r\n                int value = Integer.parseInt(quantity.getText());\r\n                quantity.setText(Integer.toString(value + 1));\r\n\r\n                updateOrder(dish, value);\r\n\r\n            }\r\n        });\r\n    }","title":"JavaFX, how can i bind dinamically created Increment and Decrement Buttons to manipulate a specific object?","body":"<blockquote>\n<p>the way I structured my code, I don't have access to the <code>Dish</code></p>\n</blockquote>\n<p>This is not true. You have a perfectly valid reference to the current <code>Dish</code> defined in the <code>for</code> loop. You can simply call the method in the handler, using that reference:</p>\n<pre><code>for (Dish dish : DishesList) {\n\n    // ...                    \n\n    minus.setOnAction(new EventHandler&lt;ActionEvent&gt;() {\n        @Override\n        public void handle(ActionEvent actionEvent) {\n            int value = Integer.parseInt(quantity.getText());\n            if (value &gt; 0) {\n                quantity.setText(Integer.toString(value - 1));\n\n                updateOrder(dish, value);\n\n            }\n        }\n    });\n\n    plus.setOnAction(new EventHandler&lt;ActionEvent&gt;() {\n        @Override\n        public void handle(ActionEvent actionEvent) {\n            int value = Integer.parseInt(quantity.getText());\n            quantity.setText(Integer.toString(value + 1));\n\n            updateOrder(dish, value);\n\n        }\n    });\n}\n</code></pre>\n"}],"owner":{"account_id":19718605,"reputation":37,"user_id":14437487,"display_name":"FST"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76221240,"answer_count":1,"score":0,"last_activity_date":1683740469,"creation_date":1683732499,"question_id":76220224,"body_markdown":"I hope i will formulate this question the best i can.\r\n\r\nI&#39;m making a restaurant manager program for an university project using JavaFX and Springboot for my backend. Right now i&#39;m facing a problem.\r\n\r\nI&#39;m implementing the &#39;take an order&#39; functionality for waiters. The way it works is:\r\n\r\n- When i load the TakeOrderView, the *initialize()* method uses the API REST to obtain from the server all the dishes.\r\n- Then, i cycle through all the dishes to dinamically create TitledPanes, one for every dish, with dinamically created &#39;minus&#39; and &#39;plus&#39; buttons.\r\n\r\nThis is the code i used:\r\n\r\n``` \r\n\r\npublic void populateAccordion() {\r\n for (Dish dish : DishesList) {\r\n                        TitledPane TPDish = new TitledPane();\r\n                        TPDish.setText(dish.getDishName());\r\n\r\n                        // Dishes\r\n\r\n\r\n                        // Name\r\n                        TextFlow dishName = new TextFlow();\r\n\r\n                        Text boldText = new Text(&quot;Name: &quot;);\r\n                        boldText.setFont(Font.font(&quot;Tahoma&quot;, FontWeight.BOLD, 14));\r\n                        Text plainText = new Text(dish.getName());\r\n                        plainText.setFont(Font.font(&quot;Tahoma&quot;, 16));\r\n\r\n                        dishName.getChildren().addAll(boldText, plainText);\r\n\r\n                        // Same for cost, description and allergens. I&#39;ll not show it for the sake of brevity. It&#39;s the same as above.\r\n\r\n\r\n\r\n                        // Here comes the tricky part\r\n                        Button minus = new Button(&quot;-&quot;);\r\n                        TextField quantity = new TextField(&quot;0&quot;);\r\n                        Button plus = new Button(&quot;+&quot;);\r\n\r\n                        quantity.getStyleClass().add(&quot;textfield&quot;);\r\n                        quantity.setPrefWidth(30);\r\n                        quantity.setPrefHeight(29);\r\n                        minus.getStyleClass().add(&quot;circular-button&quot;);\r\n                        plus.getStyleClass().add(&quot;circular-button&quot;);\r\n\r\n\r\n                        minus.setOnAction(new EventHandler&lt;ActionEvent&gt;() {\r\n                            @Override\r\n                            public void handle(ActionEvent actionEvent) {\r\n                                int value = Integer.parseInt(quantity.getText());\r\n                                if (value &gt; 0) {\r\n                                    quantity.setText(Integer.toString(value - 1));\r\n                                    \r\n                                }\r\n                            }\r\n                        });\r\n\r\n                        plus.setOnAction(new EventHandler&lt;ActionEvent&gt;() {\r\n                            @Override\r\n                            public void handle(ActionEvent actionEvent) {\r\n                                int value = Integer.parseInt(quantity.getText());\r\n                                quantity.setText(Integer.toString(value + 1));\r\n                            }\r\n                        });\r\n\r\n                        HBox chooseQuantity = new HBox();\r\n                        chooseQuantity.getChildren().addAll(minus, quantity, plus);\r\n                        chooseQuantity.setSpacing(5);\r\n\r\n\r\n                        VBox content = new VBox();\r\n                        content.getChildren().addAll(dishName, dishCost, dishDescription, dishAllergens, chooseQuantity);\r\n\r\n                        TPDish.setContent(content);\r\n                        dishAccordion.getPanes().add(TPPiatto);\r\n                    }\r\n``` \r\n\r\nThing is, this works, at least graphically. But i cannot use this code to manipulate an Order. \r\n\r\n\r\nIn fact, in my Controller (since i&#39;m using an MVC pattern) i have an Order, which is a Map&lt;Dish, Integer&gt; to store the quantity. The behaviour i want is that when i press the &#39;plus&#39; button in the &quot;Pizza&quot; TitledPane (for example) it &quot;retrieves&quot; the Dish, and calls a *updateOrder(dish, quantity)* method in the controller that should work in a similar way:\r\n\r\n ```\r\npublic void updateOrder(Dish dish, Integer quantity){\r\n   order.put(dish, quantity);\r\n}\r\n ``` \r\n\r\nBut the way i stuctured my code, i don&#39;t have access to the Dish stored in its TitledPane, since they are dinamically created and after the for cycle ends, i no longer have access to the &#39;Dish&#39; that &quot;corresponds&quot; to its titledpane. I don&#39;t know how could i implement this.\r\n\r\nAlso, the &#39;quantity&#39; variable is just a graphic thing right now, its not binded to the Order. I&#39;d like that when my &#39;Pizza&#39; dish in the order has a quantity of 0, the quantity shown in the titledpane is 0, and when i press &#39;+&#39; 3 times, the quantity in the order gets incremented, thus incrementing the quantity in the titledpane. \r\n\r\nPlease remember i&#39;m just a University student with little to no knowledge on the best way to solve this.","title":"JavaFX, how can i bind dinamically created Increment and Decrement Buttons to manipulate a specific object?","body":"<p>I hope i will formulate this question the best i can.</p>\n<p>I'm making a restaurant manager program for an university project using JavaFX and Springboot for my backend. Right now i'm facing a problem.</p>\n<p>I'm implementing the 'take an order' functionality for waiters. The way it works is:</p>\n<ul>\n<li>When i load the TakeOrderView, the <em>initialize()</em> method uses the API REST to obtain from the server all the dishes.</li>\n<li>Then, i cycle through all the dishes to dinamically create TitledPanes, one for every dish, with dinamically created 'minus' and 'plus' buttons.</li>\n</ul>\n<p>This is the code i used:</p>\n<pre><code>\npublic void populateAccordion() {\n for (Dish dish : DishesList) {\n                        TitledPane TPDish = new TitledPane();\n                        TPDish.setText(dish.getDishName());\n\n                        // Dishes\n\n\n                        // Name\n                        TextFlow dishName = new TextFlow();\n\n                        Text boldText = new Text(&quot;Name: &quot;);\n                        boldText.setFont(Font.font(&quot;Tahoma&quot;, FontWeight.BOLD, 14));\n                        Text plainText = new Text(dish.getName());\n                        plainText.setFont(Font.font(&quot;Tahoma&quot;, 16));\n\n                        dishName.getChildren().addAll(boldText, plainText);\n\n                        // Same for cost, description and allergens. I'll not show it for the sake of brevity. It's the same as above.\n\n\n\n                        // Here comes the tricky part\n                        Button minus = new Button(&quot;-&quot;);\n                        TextField quantity = new TextField(&quot;0&quot;);\n                        Button plus = new Button(&quot;+&quot;);\n\n                        quantity.getStyleClass().add(&quot;textfield&quot;);\n                        quantity.setPrefWidth(30);\n                        quantity.setPrefHeight(29);\n                        minus.getStyleClass().add(&quot;circular-button&quot;);\n                        plus.getStyleClass().add(&quot;circular-button&quot;);\n\n\n                        minus.setOnAction(new EventHandler&lt;ActionEvent&gt;() {\n                            @Override\n                            public void handle(ActionEvent actionEvent) {\n                                int value = Integer.parseInt(quantity.getText());\n                                if (value &gt; 0) {\n                                    quantity.setText(Integer.toString(value - 1));\n                                    \n                                }\n                            }\n                        });\n\n                        plus.setOnAction(new EventHandler&lt;ActionEvent&gt;() {\n                            @Override\n                            public void handle(ActionEvent actionEvent) {\n                                int value = Integer.parseInt(quantity.getText());\n                                quantity.setText(Integer.toString(value + 1));\n                            }\n                        });\n\n                        HBox chooseQuantity = new HBox();\n                        chooseQuantity.getChildren().addAll(minus, quantity, plus);\n                        chooseQuantity.setSpacing(5);\n\n\n                        VBox content = new VBox();\n                        content.getChildren().addAll(dishName, dishCost, dishDescription, dishAllergens, chooseQuantity);\n\n                        TPDish.setContent(content);\n                        dishAccordion.getPanes().add(TPPiatto);\n                    }\n</code></pre>\n<p>Thing is, this works, at least graphically. But i cannot use this code to manipulate an Order.</p>\n<p>In fact, in my Controller (since i'm using an MVC pattern) i have an Order, which is a Map&lt;Dish, Integer&gt; to store the quantity. The behaviour i want is that when i press the 'plus' button in the &quot;Pizza&quot; TitledPane (for example) it &quot;retrieves&quot; the Dish, and calls a <em>updateOrder(dish, quantity)</em> method in the controller that should work in a similar way:</p>\n<pre><code>public void updateOrder(Dish dish, Integer quantity){\n  order.put(dish, quantity);\n}\n</code></pre>\n<p>But the way i stuctured my code, i don't have access to the Dish stored in its TitledPane, since they are dinamically created and after the for cycle ends, i no longer have access to the 'Dish' that &quot;corresponds&quot; to its titledpane. I don't know how could i implement this.</p>\n<p>Also, the 'quantity' variable is just a graphic thing right now, its not binded to the Order. I'd like that when my 'Pizza' dish in the order has a quantity of 0, the quantity shown in the titledpane is 0, and when i press '+' 3 times, the quantity in the order gets incremented, thus incrementing the quantity in the titledpane.</p>\n<p>Please remember i'm just a University student with little to no knowledge on the best way to solve this.</p>\n"},{"tags":["java","android","string"],"comments":[{"owner":{"account_id":2063229,"reputation":29168,"user_id":1839336,"accept_rate":68,"display_name":"GrIsHu"},"score":0,"creation_date":1377323629,"post_id":18415411,"comment_id":27052314,"body_markdown":"Try to clean your application from `Project-&gt;clean`.","body":"Try to clean your application from <code>Project-&gt;clean</code>."},{"owner":{"account_id":2907992,"reputation":2994,"user_id":2492841,"accept_rate":44,"display_name":"Exceptional"},"score":0,"creation_date":1377324260,"post_id":18415411,"comment_id":27052425,"body_markdown":"refresh/clean may help u","body":"refresh/clean may help u"}],"answers":[{"tags":[],"owner":{"account_id":1940050,"reputation":763,"user_id":1746441,"accept_rate":62,"display_name":"nidhi"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1377324234,"creation_date":1377324234,"answer_id":18415502,"question_id":18415411,"body_markdown":"Sometimes when you declare the strings in the **strings.xml** and then try to use those using **R.string.** immediately, eclipse is not able to generate its id in **.R** file which is auto generated and stored ids.... so whenever such things happens, you should always make sure that you **save all the files** and **clean** and **build** the project.\r\n\r\nIn almost all such cases, just save, clean and build will work prevented it is some special case.\r\n\r\nAll the best.","title":"Android: String from strings.xml not showing when using (R.string.id)","body":"<p>Sometimes when you declare the strings in the <strong>strings.xml</strong> and then try to use those using <strong>R.string.</strong> immediately, eclipse is not able to generate its id in <strong>.R</strong> file which is auto generated and stored ids.... so whenever such things happens, you should always make sure that you <strong>save all the files</strong> and <strong>clean</strong> and <strong>build</strong> the project.</p>\n\n<p>In almost all such cases, just save, clean and build will work prevented it is some special case.</p>\n\n<p>All the best.</p>\n"},{"tags":[],"owner":{"account_id":1626664,"reputation":34767,"user_id":1502079,"accept_rate":56,"display_name":"vovahost"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1418208352,"creation_date":1418208352,"answer_id":27399037,"question_id":18415411,"body_markdown":"I had the same problem. &lt;br&gt; Make sure you don&#39;t have any errors in your .xml files. &lt;br&gt; \r\nAfter fixing my errors in .xml resources or commenting them the id was instantly generated in R.java.","title":"Android: String from strings.xml not showing when using (R.string.id)","body":"<p>I had the same problem. <br> Make sure you don't have any errors in your .xml files. <br> \nAfter fixing my errors in .xml resources or commenting them the id was instantly generated in R.java.</p>\n"},{"tags":[],"owner":{"account_id":19906235,"reputation":1,"user_id":14585248,"display_name":"Eick01"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683739656,"creation_date":1683739627,"answer_id":76221138,"question_id":18415411,"body_markdown":"I had the same error but the moment that I saved the project worked.\r\nIf you have no other errors in the xml file, a save should do the job.","title":"Android: String from strings.xml not showing when using (R.string.id)","body":"<p>I had the same error but the moment that I saved the project worked.\nIf you have no other errors in the xml file, a save should do the job.</p>\n"}],"owner":{"account_id":3185864,"reputation":1192,"user_id":2691489,"accept_rate":74,"display_name":"andysando"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4233,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":18415502,"answer_count":3,"score":1,"last_activity_date":1683739656,"creation_date":1377323545,"question_id":18415411,"body_markdown":"I&#39;m trying to call a string from my strings.xml, this one:\r\n\r\n    &lt;string name=&quot;before&quot;&gt;I have read and understood the&lt;/string&gt;\r\n\r\nI use this line to call the string:\r\n\r\n    String append1 = getResources().getString(R.string.before);\r\n\r\nI get &quot;before cannot be resolved or is not a field&quot;, but if I use another string from the same file it works just fine.\r\nYou know if you type &quot;...(R.string.&quot; you get a list of available strings to choose from, and some of my strings aren&#39;t showing in that list. How come? ","title":"Android: String from strings.xml not showing when using (R.string.id)","body":"<p>I'm trying to call a string from my strings.xml, this one:</p>\n\n<pre><code>&lt;string name=\"before\"&gt;I have read and understood the&lt;/string&gt;\n</code></pre>\n\n<p>I use this line to call the string:</p>\n\n<pre><code>String append1 = getResources().getString(R.string.before);\n</code></pre>\n\n<p>I get \"before cannot be resolved or is not a field\", but if I use another string from the same file it works just fine.\nYou know if you type \"...(R.string.\" you get a list of available strings to choose from, and some of my strings aren't showing in that list. How come? </p>\n"},{"tags":["java","multithreading","concurrency","vaadin"],"answers":[{"comments":[{"owner":{"account_id":29723,"reputation":12111,"user_id":80530,"accept_rate":71,"display_name":"LB40"},"score":0,"creation_date":1352208613,"post_id":13250609,"comment_id":18057689,"body_markdown":"I don&#39;t really get it, notably the last sentence starting with &quot;So&quot;. I don&#39;t see why this is a consequence of the previous paragraph. Why the starvation with ThreadLocal and not with InheritableThreadLocal ?","body":"I don&#39;t really get it, notably the last sentence starting with &quot;So&quot;. I don&#39;t see why this is a consequence of the previous paragraph. Why the starvation with ThreadLocal and not with InheritableThreadLocal ?"}],"tags":[],"owner":{"account_id":444856,"reputation":8760,"user_id":836941,"accept_rate":73,"display_name":"zacheusz"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1683739630,"creation_date":1352203258,"answer_id":13250609,"question_id":13249309,"body_markdown":"The key for understanding how it works is method in `ThreadLocal` class:\r\n\r\n    static ThreadLocalMap createInheritedMap(ThreadLocalMap parentMap) {\r\n       return new ThreadLocalMap(parentMap);\r\n    }\r\n\r\nIt is designed to be called only from Thread constructor. The method\r\n\r\n    protected Object childValue(Object parentValue)\r\nof `InheritableThreadLocal` class  is used to set the initial value of the `InheritableThreadLocal` variable in the child thread as a function of a `ThreadLocal` variable (passed as a parameter) in the parent thread. This method is called from within the parent thread before the child thread is created and the default implementation will make the child values identical to parent&#39;s, but we can override the `childValue()` method to set the child value as a function of the parent value for those `ThreadLocals` which have values in the parent thread. By default the `childValue()` returns the same input argument, but again an override of the `childValue()` method might change this behavior as well.\r\n\r\nSo `InheritableThreadLocal` works almost like `ThreadLocal` and it has the same synchronization pitfalls.","title":"Synchronized with ThreadLocal vs InheritableThreadLocal?","body":"<p>The key for understanding how it works is method in <code>ThreadLocal</code> class:</p>\n<pre><code>static ThreadLocalMap createInheritedMap(ThreadLocalMap parentMap) {\n   return new ThreadLocalMap(parentMap);\n}\n</code></pre>\n<p>It is designed to be called only from Thread constructor. The method</p>\n<pre><code>protected Object childValue(Object parentValue)\n</code></pre>\n<p>of <code>InheritableThreadLocal</code> class  is used to set the initial value of the <code>InheritableThreadLocal</code> variable in the child thread as a function of a <code>ThreadLocal</code> variable (passed as a parameter) in the parent thread. This method is called from within the parent thread before the child thread is created and the default implementation will make the child values identical to parent's, but we can override the <code>childValue()</code> method to set the child value as a function of the parent value for those <code>ThreadLocals</code> which have values in the parent thread. By default the <code>childValue()</code> returns the same input argument, but again an override of the <code>childValue()</code> method might change this behavior as well.</p>\n<p>So <code>InheritableThreadLocal</code> works almost like <code>ThreadLocal</code> and it has the same synchronization pitfalls.</p>\n"}],"owner":{"account_id":29723,"reputation":12111,"user_id":80530,"accept_rate":71,"display_name":"LB40"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9050,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":13250609,"answer_count":1,"score":2,"last_activity_date":1683739630,"creation_date":1352198632,"question_id":13249309,"body_markdown":"I am implementing a vaadin application following this [thread local pattern][1].\r\n\r\nThe state of the application is modified by several worker threads. Hence, to notify the application that its state changed, I add a progress indicator.\r\n\r\nReading the progress indicator sample, I see this :\r\n\r\n            // All modifications to Vaadin components should be synchronized\r\n            // over application instance. For normal requests this is done\r\n            // by the servlet. Here we are changing the application state\r\n            // via a separate thread.\r\n            synchronized (getApplication()) {\r\n                prosessed();\r\n            }\r\n\r\nSo basically, I think I just have to modify the call to `getApplication` to get the instance of my application (just call `getCurrent`):\r\n\r\n\r\n      private static ThreadLocal&lt;MyApplication&gt; currentApplication = new ThreadLocal&lt;MyApplication&gt;();\r\n        \r\n        @Override\r\n        public void init() {\r\n            setCurrent(this); // So that we immediately have access to the current application\r\n    \r\n            // initialize mainWindow and other stuff\r\n        \r\n            // Register a transaction listener that updates our ThreadLocal with each request\r\n            if (getContext() != null) {\r\n                getContext().addTransactionListener(this);\r\n            }\t\r\n        }\r\n        \r\n        /**\r\n         * @return the current application instance\r\n         */\r\n        public static MyApplication getCurrent() {\r\n            return currentApplication.get();\r\n        }\r\n\r\n\r\nThe problem is that my worker thread dies of starvation because It cannot acquire the mutex on the application.\r\nOne solution provided by the vaadin forum is to use [InheritableThreadLocal][2]. It works but I don&#39;t get it why. \r\n\r\nFrom the javadoc :\r\n \r\n&gt; This class extends ThreadLocal to provide inheritance of values from\r\n&gt; parent thread to child thread: when a child thread is created, the\r\n&gt; child receives initial values for all inheritable thread-local\r\n&gt; variables for which the parent has values. Normally the child&#39;s values\r\n&gt; will be identical to the parent&#39;s; however, the child&#39;s value can be\r\n&gt; made an arbitrary function of the parent&#39;s by overriding the\r\n&gt; childValue method in this class.\r\n&gt; \r\n&gt; Inheritable thread-local variables are used in preference to ordinary\r\n&gt; thread-local variables when the per-thread-attribute being maintained\r\n&gt; in the variable (e.g., User ID, Transaction ID) must be automatically\r\n&gt; transmitted to any child threads that are created.\r\n\r\nMy worker thread cannot get the lock because it does not receive initial values ?\r\nAm I misinterpreting something ? \r\nExcept [this problem][3], what are the potential pitfalls of using InheritableThreadLocal I should be aware of ?\r\n\r\n\r\nThanks.\r\n\r\n\r\n\r\n  [1]: https://vaadin.com/wiki/-/wiki/Main/ThreadLocal%20Pattern\r\n  [2]: http://docs.oracle.com/javase/6/docs/api/java/lang/InheritableThreadLocal.html\r\n  [3]: https://stackoverflow.com/questions/9012371/using-inheritablethreadlocal-with-threadpoolexecutor-or-a-threadpoolexecut","title":"Synchronized with ThreadLocal vs InheritableThreadLocal?","body":"<p>I am implementing a vaadin application following this <a href=\"https://vaadin.com/wiki/-/wiki/Main/ThreadLocal%20Pattern\" rel=\"nofollow noreferrer\">thread local pattern</a>.</p>\n\n<p>The state of the application is modified by several worker threads. Hence, to notify the application that its state changed, I add a progress indicator.</p>\n\n<p>Reading the progress indicator sample, I see this :</p>\n\n<pre><code>        // All modifications to Vaadin components should be synchronized\n        // over application instance. For normal requests this is done\n        // by the servlet. Here we are changing the application state\n        // via a separate thread.\n        synchronized (getApplication()) {\n            prosessed();\n        }\n</code></pre>\n\n<p>So basically, I think I just have to modify the call to <code>getApplication</code> to get the instance of my application (just call <code>getCurrent</code>):</p>\n\n<pre><code>  private static ThreadLocal&lt;MyApplication&gt; currentApplication = new ThreadLocal&lt;MyApplication&gt;();\n\n    @Override\n    public void init() {\n        setCurrent(this); // So that we immediately have access to the current application\n\n        // initialize mainWindow and other stuff\n\n        // Register a transaction listener that updates our ThreadLocal with each request\n        if (getContext() != null) {\n            getContext().addTransactionListener(this);\n        }   \n    }\n\n    /**\n     * @return the current application instance\n     */\n    public static MyApplication getCurrent() {\n        return currentApplication.get();\n    }\n</code></pre>\n\n<p>The problem is that my worker thread dies of starvation because It cannot acquire the mutex on the application.\nOne solution provided by the vaadin forum is to use <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/InheritableThreadLocal.html\" rel=\"nofollow noreferrer\">InheritableThreadLocal</a>. It works but I don't get it why. </p>\n\n<p>From the javadoc :</p>\n\n<blockquote>\n  <p>This class extends ThreadLocal to provide inheritance of values from\n  parent thread to child thread: when a child thread is created, the\n  child receives initial values for all inheritable thread-local\n  variables for which the parent has values. Normally the child's values\n  will be identical to the parent's; however, the child's value can be\n  made an arbitrary function of the parent's by overriding the\n  childValue method in this class.</p>\n  \n  <p>Inheritable thread-local variables are used in preference to ordinary\n  thread-local variables when the per-thread-attribute being maintained\n  in the variable (e.g., User ID, Transaction ID) must be automatically\n  transmitted to any child threads that are created.</p>\n</blockquote>\n\n<p>My worker thread cannot get the lock because it does not receive initial values ?\nAm I misinterpreting something ? \nExcept <a href=\"https://stackoverflow.com/questions/9012371/using-inheritablethreadlocal-with-threadpoolexecutor-or-a-threadpoolexecut\">this problem</a>, what are the potential pitfalls of using InheritableThreadLocal I should be aware of ?</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","loops","goto"],"comments":[{"owner":{"account_id":204659,"reputation":37559,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"score":1,"creation_date":1413568274,"post_id":26430630,"comment_id":41506069,"body_markdown":"Welcome to Java.  While `goto` is a keyword in java, it has no functionality and will result in a compile error (as you noted in your question).","body":"Welcome to Java.  While <code>goto</code> is a keyword in java, it has no functionality and will result in a compile error (as you noted in your question)."},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":1,"creation_date":1413568620,"post_id":26430630,"comment_id":41506250,"body_markdown":"Even if you find the perfect use case and it totally makes sense, find another way to do it.  At best most of the people you work with will think less of you.  It&#39;s not actually that bad, but you&#39;ll never get past the stigma.","body":"Even if you find the perfect use case and it totally makes sense, find another way to do it.  At best most of the people you work with will think less of you.  It&#39;s not actually that bad, but you&#39;ll never get past the stigma."},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":2,"creation_date":1413568780,"post_id":26430630,"comment_id":41506345,"body_markdown":"As for what you are trying to do with the label, by the way, break and continue can specify a label (much as you&#39;d expect goto to)","body":"As for what you are trying to do with the label, by the way, break and continue can specify a label (much as you&#39;d expect goto to)"},{"owner":{"account_id":178996,"reputation":6452,"user_id":411326,"accept_rate":75,"display_name":"Asaf"},"score":1,"creation_date":1413568834,"post_id":26430630,"comment_id":41506379,"body_markdown":"JSR for goto in java (look at the date posted): https://blogs.oracle.com/darcy/entry/upcoming_jep","body":"JSR for goto in java (look at the date posted): <a href=\"https://blogs.oracle.com/darcy/entry/upcoming_jep\" rel=\"nofollow noreferrer\">blogs.oracle.com/darcy/entry/upcoming_jep</a>"},{"owner":{"account_id":2871026,"reputation":31449,"user_id":2464386,"accept_rate":84,"display_name":"ajb"},"score":0,"creation_date":1413569622,"post_id":26430630,"comment_id":41506731,"body_markdown":"I haven&#39;t seen a need to use `goto` in modern programming languages even where they do allow it.  (Older versions of COBOL and Pascal are a different story, though, because they didn&#39;t have all the control statements modern languages do, particularly `break`, and there were cases where trying to work around those deficiencies without using `goto` resulted in less readable code.  But it&#39;s unlikely you&#39;ll need to use one of those languages.)","body":"I haven&#39;t seen a need to use <code>goto</code> in modern programming languages even where they do allow it.  (Older versions of COBOL and Pascal are a different story, though, because they didn&#39;t have all the control statements modern languages do, particularly <code>break</code>, and there were cases where trying to work around those deficiencies without using <code>goto</code> resulted in less readable code.  But it&#39;s unlikely you&#39;ll need to use one of those languages.)"},{"owner":{"account_id":4307921,"reputation":1393,"user_id":3519829,"accept_rate":90,"display_name":"Ungeheuer"},"score":0,"creation_date":1413645353,"post_id":26430630,"comment_id":41525689,"body_markdown":"@wrongAnswer, I had the (Line 1) in there so those of you who read my code know what I mean by Line 10. It was merely a reference.","body":"@wrongAnswer, I had the (Line 1) in there so those of you who read my code know what I mean by Line 10. It was merely a reference."},{"owner":{"account_id":4307921,"reputation":1393,"user_id":3519829,"accept_rate":90,"display_name":"Ungeheuer"},"score":0,"creation_date":1413645656,"post_id":26430630,"comment_id":41525772,"body_markdown":"@BillK, why is there a stigma? From what I just learned, if `goto` actually worked, it would have the same function as `break`? or is there a difference between `break` and what `goto` would hypothetically do?","body":"@BillK, why is there a stigma? From what I just learned, if <code>goto</code> actually worked, it would have the same function as <code>break</code>? or is there a difference between <code>break</code> and what <code>goto</code> would hypothetically do?"},{"owner":{"account_id":4307921,"reputation":1393,"user_id":3519829,"accept_rate":90,"display_name":"Ungeheuer"},"score":0,"creation_date":1413645931,"post_id":26430630,"comment_id":41525845,"body_markdown":"@espertus very funny comic strip.","body":"@espertus very funny comic strip."},{"owner":{"account_id":4307921,"reputation":1393,"user_id":3519829,"accept_rate":90,"display_name":"Ungeheuer"},"score":0,"creation_date":1413645978,"post_id":26430630,"comment_id":41525858,"body_markdown":"upvote my question please guys. I need some nice reputation.","body":"upvote my question please guys. I need some nice reputation."},{"owner":{"account_id":2871026,"reputation":31449,"user_id":2464386,"accept_rate":84,"display_name":"ajb"},"score":2,"creation_date":1413664785,"post_id":26430630,"comment_id":41531329,"body_markdown":"@JohnnyCoder The stigma goes back to the way programmers _used_ to use `goto`&#39;s.  In other words, not just to break out of a loop--but any place they felt like it, all over the place.  Ever heard the term &quot;spaghetti code&quot;?  If you drew lines showing where the `goto`&#39;s started and ended, it would look like a plate of spaghetti.  (P.S. I have been programming long enough to remember when spaghetti code was how I and everyone around me wrote programs.  We didn&#39;t know any better, yet.)","body":"@JohnnyCoder The stigma goes back to the way programmers <i>used</i> to use <code>goto</code>&#39;s.  In other words, not just to break out of a loop--but any place they felt like it, all over the place.  Ever heard the term &quot;spaghetti code&quot;?  If you drew lines showing where the <code>goto</code>&#39;s started and ended, it would look like a plate of spaghetti.  (P.S. I have been programming long enough to remember when spaghetti code was how I and everyone around me wrote programs.  We didn&#39;t know any better, yet.)"},{"owner":{"account_id":2871026,"reputation":31449,"user_id":2464386,"accept_rate":84,"display_name":"ajb"},"score":0,"creation_date":1413664919,"post_id":26430630,"comment_id":41531375,"body_markdown":"@JohnnyCoder You may want to check out [this information](http://en.wikipedia.org/wiki/Goto#Criticism) for some of the history.","body":"@JohnnyCoder You may want to check out <a href=\"http://en.wikipedia.org/wiki/Goto#Criticism\" rel=\"nofollow noreferrer\">this information</a> for some of the history."},{"owner":{"account_id":4307921,"reputation":1393,"user_id":3519829,"accept_rate":90,"display_name":"Ungeheuer"},"score":0,"creation_date":1413670616,"post_id":26430630,"comment_id":41532802,"body_markdown":"@ajb thank you very much. I have not heard of the term, but that would explain fully why our class&#39;s Microsoft liason told me that using `goto` was not a smart thing to do.","body":"@ajb thank you very much. I have not heard of the term, but that would explain fully why our class&#39;s Microsoft liason told me that using <code>goto</code> was not a smart thing to do."},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":7,"creation_date":1413697075,"post_id":26430630,"comment_id":41537453,"body_markdown":"@JohnnyCoder A lot of beginning programmers don&#39;t understand that the goal of code in most situations is NOT to make the computer do something, it&#39;s to make it easy for the next guy to understand, repair, and maintain it as easily as possible. After a decade or two of programming--Being bitten by crappy code that is very difficult to understand and maintain--most programmers understand the importance of maintainability and soon forget that there is any other way to think. Jumping across vast areas of code makes maintenance very challenging. Break and continue can&#39;t just jump anywhere like goto","body":"@JohnnyCoder A lot of beginning programmers don&#39;t understand that the goal of code in most situations is NOT to make the computer do something, it&#39;s to make it easy for the next guy to understand, repair, and maintain it as easily as possible. After a decade or two of programming--Being bitten by crappy code that is very difficult to understand and maintain--most programmers understand the importance of maintainability and soon forget that there is any other way to think. Jumping across vast areas of code makes maintenance very challenging. Break and continue can&#39;t just jump anywhere like goto"}],"answers":[{"tags":[],"owner":{"account_id":1606738,"reputation":1066,"user_id":1486690,"display_name":"Sizik"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1413568239,"creation_date":1413568239,"answer_id":26430672,"question_id":26430630,"body_markdown":"`goto` doesn&#39;t do anything in Java.","title":"How to use goto statement correctly","body":"<p><code>goto</code> doesn't do anything in Java.</p>\n"},{"comments":[{"owner":{"account_id":4307921,"reputation":1393,"user_id":3519829,"accept_rate":90,"display_name":"Ungeheuer"},"score":3,"creation_date":1413645584,"post_id":26430691,"comment_id":41525753,"body_markdown":"all right. thank you. I hope they add `goto` it is so convenient.","body":"all right. thank you. I hope they add <code>goto</code> it is so convenient."},{"owner":{"account_id":172198,"reputation":5240,"user_id":628006,"accept_rate":90,"display_name":"Ñ€&#252;Ñ„Ñ„Ð¿"},"score":2,"creation_date":1450368103,"post_id":26430691,"comment_id":56419211,"body_markdown":"I hope they will never use it. After using the Java language (and earlier C/C++) for more than 10 years, I always found better way to design function/methods not to use that &quot;bug creator&quot; way. Just have a look to the [apple ssl implementation security breach](http://www.theguardian.com/technology/2014/feb/25/apples-ssl-iphone-vulnerability-how-did-it-happen-and-what-next). Ok, they also forgot another best practice: always use curly braces even it make the code more verbose...","body":"I hope they will never use it. After using the Java language (and earlier C/C++) for more than 10 years, I always found better way to design function/methods not to use that &quot;bug creator&quot; way. Just have a look to the <a href=\"http://www.theguardian.com/technology/2014/feb/25/apples-ssl-iphone-vulnerability-how-did-it-happen-and-what-next\" rel=\"nofollow noreferrer\">apple ssl implementation security breach</a>. Ok, they also forgot another best practice: always use curly braces even it make the code more verbose..."},{"owner":{"account_id":206187,"reputation":10415,"user_id":455322,"accept_rate":91,"display_name":"Les"},"score":2,"creation_date":1505245527,"post_id":26430691,"comment_id":79331263,"body_markdown":"Been programming 30+ years.  Started with C.  `goto` was available to me from the start and has been avoided completely the entire time.  Initially, other programmers shamed me away from using it.  In time, I saw enough usages of `goto` to give me my own convictions and sense of aversion to it.  But, I have seen a few (very few) uses (by other programmers, poor souls) where it was cleaner to use `goto` than to write the equivalent without it.  Those uses probably got de-factored later on.","body":"Been programming 30+ years.  Started with C.  <code>goto</code> was available to me from the start and has been avoided completely the entire time.  Initially, other programmers shamed me away from using it.  In time, I saw enough usages of <code>goto</code> to give me my own convictions and sense of aversion to it.  But, I have seen a few (very few) uses (by other programmers, poor souls) where it was cleaner to use <code>goto</code> than to write the equivalent without it.  Those uses probably got de-factored later on."},{"owner":{"account_id":6111237,"reputation":18715,"user_id":4767498,"accept_rate":87,"display_name":"M.kazem Akhgary"},"score":0,"creation_date":1544467455,"post_id":26430691,"comment_id":94277926,"body_markdown":"in c# only place where goto is useful is to have switch fall through. java supports fall through without goto. so there is really no need for goto in java.","body":"in c# only place where goto is useful is to have switch fall through. java supports fall through without goto. so there is really no need for goto in java."},{"owner":{"account_id":7831234,"reputation":497,"user_id":5921170,"accept_rate":100,"display_name":"Kr&#246;w"},"score":0,"creation_date":1618679132,"post_id":26430691,"comment_id":118677464,"body_markdown":"`goto` is obviously one of the most powerful constructs available to any programming language, even more so than constructs that build off of it, like conditional branches. It would be great to see it added to the language to really make Java complete.","body":"<code>goto</code> is obviously one of the most powerful constructs available to any programming language, even more so than constructs that build off of it, like conditional branches. It would be great to see it added to the language to really make Java complete."}],"tags":[],"owner":{"account_id":4641056,"reputation":2363,"user_id":3760899,"accept_rate":52,"display_name":"Aditya Singh"},"comment_count":5,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1413568306,"creation_date":1413568306,"answer_id":26430691,"question_id":26430630,"body_markdown":"The &lt;a href=&quot;http://java.sun.com/docs/books/tutorial/java/nutsandbolts/_keywords.html&quot;&gt;Java keyword list&lt;/a&gt; specifies the goto keyword, but it is marked as &quot;not used&quot;.\r\n\r\nThis was probably done in case it were to be added to a later version of Java.\r\n\r\nIf goto weren&#39;t on the list, and it were added to the language later on, existing code that used the word goto as an identifier (variable name, method name, etcetera) would break. But because goto is a keyword, such code will not even compile in the present, and it remains possible to make it actually do something later on, without breaking existing code.","title":"How to use goto statement correctly","body":"<p>The <a href=\"http://java.sun.com/docs/books/tutorial/java/nutsandbolts/_keywords.html\">Java keyword list</a> specifies the goto keyword, but it is marked as \"not used\".</p>\n\n<p>This was probably done in case it were to be added to a later version of Java.</p>\n\n<p>If goto weren't on the list, and it were added to the language later on, existing code that used the word goto as an identifier (variable name, method name, etcetera) would break. But because goto is a keyword, such code will not even compile in the present, and it remains possible to make it actually do something later on, without breaking existing code.</p>\n"},{"comments":[{"owner":{"account_id":4307921,"reputation":1393,"user_id":3519829,"accept_rate":90,"display_name":"Ungeheuer"},"score":4,"creation_date":1413645407,"post_id":26430740,"comment_id":41525705,"body_markdown":"They should add it. It makes life so much easier.","body":"They should add it. It makes life so much easier."},{"owner":{"account_id":5937539,"reputation":3116,"user_id":4669984,"accept_rate":86,"display_name":"Tarun Maganti"},"score":1,"creation_date":1490694723,"post_id":26430740,"comment_id":73216044,"body_markdown":"@Ungeheuer Counter Intuitively GOTO is considered harmful.\n[Argument of Dijkstra](https://www.cs.utexas.edu/users/EWD/transcriptions/EWD02xx/EWD215.html)","body":"@Ungeheuer Counter Intuitively GOTO is considered harmful. <a href=\"https://www.cs.utexas.edu/users/EWD/transcriptions/EWD02xx/EWD215.html\" rel=\"nofollow noreferrer\">Argument of Dijkstra</a>"},{"owner":{"account_id":6612043,"reputation":967,"user_id":5106759,"display_name":"Madars Vi"},"score":0,"creation_date":1551091876,"post_id":26430740,"comment_id":96499525,"body_markdown":"Goto is useful for method differed/exit statement processing. Lots of returns within code is evil. To build tons of &quot;if&quot; statements just to get common exit block also makes life much more complex. So goto is very welcome.","body":"Goto is useful for method differed/exit statement processing. Lots of returns within code is evil. To build tons of &quot;if&quot; statements just to get common exit block also makes life much more complex. So goto is very welcome."}],"tags":[],"owner":{"account_id":2427268,"reputation":91,"user_id":2118942,"display_name":"Daniel Cardoso"},"comment_count":3,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1413568500,"creation_date":1413568500,"answer_id":26430740,"question_id":26430630,"body_markdown":"Java does not support `goto`, it is reserved as a keyword in case they wanted to add it to a later version","title":"How to use goto statement correctly","body":"<p>Java does not support <code>goto</code>, it is reserved as a keyword in case they wanted to add it to a later version</p>\n"},{"comments":[{"owner":{"account_id":4307921,"reputation":1393,"user_id":3519829,"accept_rate":90,"display_name":"Ungeheuer"},"score":1,"creation_date":1413646022,"post_id":26430977,"comment_id":41525870,"body_markdown":"Thank you, this makes quite a bit of sense. Thank you very much.","body":"Thank you, this makes quite a bit of sense. Thank you very much."},{"owner":{"account_id":236897,"reputation":153,"user_id":504696,"display_name":"Geodepe"},"score":0,"creation_date":1537554535,"post_id":26430977,"comment_id":91841663,"body_markdown":"Copying is how you make mistakes ... even and odd are mixed up in this example.","body":"Copying is how you make mistakes ... even and odd are mixed up in this example."}],"tags":[],"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"comment_count":2,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1683739292,"creation_date":1413569442,"answer_id":26430977,"question_id":26430630,"body_markdown":"If you look up continue and break they accept a &quot;Label&quot;.  Experiment with that.  Goto itself won&#39;t work.\r\n\r\n    public class BreakContinueWithLabel {\r\n      \r\n        public static void main(String args[]) {\r\n        \r\n            int[] numbers= new int[]{100,18,21,30};\r\n          \r\n            //Outer loop checks if number is multiple of 2\r\n            OUTER:  //outer label\r\n            for(int i = 0; i&lt;numbers.length; i++){\r\n                if(i % 2 == 0){\r\n                    System.out.println(&quot;Even number: &quot; + i +\r\n                                       &quot;, continue from OUTER label&quot;);\r\n                    continue OUTER;\r\n                }\r\n              \r\n                INNER:\r\n                for(int j = 0; j&lt;numbers.length; j++){\r\n                    System.out.println(&quot;Odd number: &quot; + i +\r\n                                       &quot;, break  from INNER label&quot;);\r\n                    break INNER;\r\n                }\r\n            }      \r\n        }\r\n    }\r\n\r\n[Read more](http://javarevisited.blogspot.com/2012/05/break-continue-and-lablel-in-loop-java.html)","title":"How to use goto statement correctly","body":"<p>If you look up continue and break they accept a &quot;Label&quot;.  Experiment with that.  Goto itself won't work.</p>\n<pre><code>public class BreakContinueWithLabel {\n  \n    public static void main(String args[]) {\n    \n        int[] numbers= new int[]{100,18,21,30};\n      \n        //Outer loop checks if number is multiple of 2\n        OUTER:  //outer label\n        for(int i = 0; i&lt;numbers.length; i++){\n            if(i % 2 == 0){\n                System.out.println(&quot;Even number: &quot; + i +\n                                   &quot;, continue from OUTER label&quot;);\n                continue OUTER;\n            }\n          \n            INNER:\n            for(int j = 0; j&lt;numbers.length; j++){\n                System.out.println(&quot;Odd number: &quot; + i +\n                                   &quot;, break  from INNER label&quot;);\n                break INNER;\n            }\n        }      \n    }\n}\n</code></pre>\n<p><a href=\"http://javarevisited.blogspot.com/2012/05/break-continue-and-lablel-in-loop-java.html\" rel=\"nofollow noreferrer\">Read more</a></p>\n"},{"comments":[{"owner":{"account_id":4307921,"reputation":1393,"user_id":3519829,"accept_rate":90,"display_name":"Ungeheuer"},"score":4,"creation_date":1413645502,"post_id":26431031,"comment_id":41525732,"body_markdown":"This was extremely helpful. I&#39;m going to have to print out this answer and put it in my binder to study and use. +1. You deserve +100, but I cant do that. :)","body":"This was extremely helpful. I&#39;m going to have to print out this answer and put it in my binder to study and use. +1. You deserve +100, but I cant do that. :)"},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":6,"creation_date":1416934959,"post_id":26431031,"comment_id":42763781,"body_markdown":"It&#39;s a great answer, +1, but if you ever have the desire to do this you are doing it wrong, period--refactor instead, break out a few other well-named methods instead. If you use this construct then at best you avoid a needed refactor, leaving your code messy AND you obfuscate it with a structure that few programmers understand.  More likely you will be thought of as a poor programmer by the rest of the team for being unable to make clearer code. The desire to do this should be considered a very bad code smell.","body":"It&#39;s a great answer, +1, but if you ever have the desire to do this you are doing it wrong, period--refactor instead, break out a few other well-named methods instead. If you use this construct then at best you avoid a needed refactor, leaving your code messy AND you obfuscate it with a structure that few programmers understand.  More likely you will be thought of as a poor programmer by the rest of the team for being unable to make clearer code. The desire to do this should be considered a very bad code smell."},{"owner":{"account_id":5436770,"reputation":402,"user_id":4326020,"accept_rate":57,"display_name":"Jax"},"score":3,"creation_date":1474638320,"post_id":26431031,"comment_id":66626462,"body_markdown":"@BillK Well, I would argue that with basic commenting you can do this clearly. As long as those on the team can comprehend this, it seems fine to me. That said, I am somewhat inexperienced with teams and probably have no idea what I am talking about.","body":"@BillK Well, I would argue that with basic commenting you can do this clearly. As long as those on the team can comprehend this, it seems fine to me. That said, I am somewhat inexperienced with teams and probably have no idea what I am talking about."},{"owner":{"account_id":22286,"reputation":1228,"user_id":54811,"display_name":"Arcane"},"score":0,"creation_date":1694793322,"post_id":26431031,"comment_id":135942449,"body_markdown":"It&#39;s philosophical.  I&#39;ve used labelled goto in C, and break/continue in Java to make much clearer code, by bailing out of sections early and avoiding nesting and excessive ifs.","body":"It&#39;s philosophical.  I&#39;ve used labelled goto in C, and break/continue in Java to make much clearer code, by bailing out of sections early and avoiding nesting and excessive ifs."}],"tags":[],"owner":{"account_id":2254693,"reputation":2304,"user_id":1986125,"accept_rate":100,"display_name":"Tirath"},"comment_count":4,"down_vote_count":0,"up_vote_count":95,"is_accepted":true,"score":95,"last_activity_date":1530558239,"creation_date":1413569649,"answer_id":26431031,"question_id":26430630,"body_markdown":"As already pointed out by all the answers `goto` - a reserved word in `Java` and is not used in the language.\r\n\r\n`restart:` is called an identifier followed by a colon.\r\n\r\nHere are a few things you need to take care of if you wish to achieve `similar` behavior - \r\n\r\n    outer:                  // Should be placed exactly before the loop\r\n    loopingConstructOne  {  // We can have statements before the outer but not inbetween the label and the loop          \r\n        inner:\r\n        loopingConstructTwo {\r\n            continue;       // This goes to the top of loopingConstructTwo and continue.\r\n            break;          // This breaks out of loopingConstructTwo.\r\n            continue outer; // This goes to the outer label and reenters loopingConstructOne.\r\n            break outer;    // This breaks out of the loopingConstructOne.\r\n            continue inner; // This will behave similar to continue.\r\n            break inner;    // This will behave similar to break.\r\n        }\r\n    }\r\n\r\nI&#39;m not sure of whether should I say `similar` as I already have.\r\n\r\n","title":"How to use goto statement correctly","body":"<p>As already pointed out by all the answers <code>goto</code> - a reserved word in <code>Java</code> and is not used in the language.</p>\n\n<p><code>restart:</code> is called an identifier followed by a colon.</p>\n\n<p>Here are a few things you need to take care of if you wish to achieve <code>similar</code> behavior - </p>\n\n<pre><code>outer:                  // Should be placed exactly before the loop\nloopingConstructOne  {  // We can have statements before the outer but not inbetween the label and the loop          \n    inner:\n    loopingConstructTwo {\n        continue;       // This goes to the top of loopingConstructTwo and continue.\n        break;          // This breaks out of loopingConstructTwo.\n        continue outer; // This goes to the outer label and reenters loopingConstructOne.\n        break outer;    // This breaks out of the loopingConstructOne.\n        continue inner; // This will behave similar to continue.\n        break inner;    // This will behave similar to break.\n    }\n}\n</code></pre>\n\n<p>I'm not sure of whether should I say <code>similar</code> as I already have.</p>\n"},{"tags":[],"owner":{"display_name":"user6224849"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1468644699,"creation_date":1468644699,"answer_id":38407867,"question_id":26430630,"body_markdown":"Java also does not use line numbers, which is a necessity for a GOTO function. Unlike C/C++, Java does not have goto statement, but java supports label. The only place where a label is useful in Java is right before nested loop statements. We can specify label name with break to break out a specific outer loop.","title":"How to use goto statement correctly","body":"<p>Java also does not use line numbers, which is a necessity for a GOTO function. Unlike C/C++, Java does not have goto statement, but java supports label. The only place where a label is useful in Java is right before nested loop statements. We can specify label name with break to break out a specific outer loop.</p>\n"},{"tags":[],"owner":{"account_id":11750039,"reputation":11,"user_id":8599595,"display_name":"Sohail Sankanur"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1505244653,"creation_date":1505244653,"answer_id":46184041,"question_id":26430630,"body_markdown":"There is not &#39;goto&#39; in the Java world. The main reason was developers realized that complex codes which had goto would lead to making the code really pathetic and it would be almost impossible to enhance or maintain the code. \r\n\r\nHowever this code could be modified a little and using the concept of continue and break we could make the code work.\r\n    \r\n        import java.util.*;\r\n    \r\n    public class Factorial \r\n    {\r\n        public static void main(String[] args) \r\n        {\r\n            int x = 1;\r\n            int factValue = 1;\r\n            Scanner userInput = new Scanner(System.in);\r\n            restart: while(true){\r\n            System.out.println(&quot;Please enter a nonzero, nonnegative value to be factorialized.&quot;);\r\n            int factInput = userInput.nextInt();\r\n    \r\n            while(factInput&lt;=0)\r\n            {\r\n                System.out.println(&quot;Enter a nonzero, nonnegative value to be factorialized.&quot;);\r\n                factInput = userInput.nextInt();\r\n            }\r\n    \r\n            if(x&lt;1)//This is another way of doing what the above while loop does, I just wanted to have some fun.\r\n            {\r\n                System.out.println(&quot;The number you entered is not valid. Please try again.&quot;);\r\n                continue restart;\r\n            }\r\n            while(x&lt;=factInput)\r\n            {\r\n                factValue*=x;\r\n                x++;\r\n            }\r\n            System.out.println(factInput+&quot;! = &quot;+factValue);\r\n            userInput.close();\r\n            break restart;\r\n    }\r\n        }\r\n    }","title":"How to use goto statement correctly","body":"<p>There is not 'goto' in the Java world. The main reason was developers realized that complex codes which had goto would lead to making the code really pathetic and it would be almost impossible to enhance or maintain the code. </p>\n\n<p>However this code could be modified a little and using the concept of continue and break we could make the code work.</p>\n\n<pre><code>    import java.util.*;\n\npublic class Factorial \n{\n    public static void main(String[] args) \n    {\n        int x = 1;\n        int factValue = 1;\n        Scanner userInput = new Scanner(System.in);\n        restart: while(true){\n        System.out.println(\"Please enter a nonzero, nonnegative value to be factorialized.\");\n        int factInput = userInput.nextInt();\n\n        while(factInput&lt;=0)\n        {\n            System.out.println(\"Enter a nonzero, nonnegative value to be factorialized.\");\n            factInput = userInput.nextInt();\n        }\n\n        if(x&lt;1)//This is another way of doing what the above while loop does, I just wanted to have some fun.\n        {\n            System.out.println(\"The number you entered is not valid. Please try again.\");\n            continue restart;\n        }\n        while(x&lt;=factInput)\n        {\n            factValue*=x;\n            x++;\n        }\n        System.out.println(factInput+\"! = \"+factValue);\n        userInput.close();\n        break restart;\n}\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":315980,"reputation":10348,"user_id":631911,"display_name":"Tatarize"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1544988905,"creation_date":1544988905,"answer_id":53805776,"question_id":26430630,"body_markdown":"`goto` is an unused reserved word in the language. So there is no `goto`. But, if you want absurdist theater you could coax one out of a language feature of labeling. But, rather than label a for loop which is sometimes useful you label a code block. You can, within that code block, call break on the label, spitting you to the end of the code block which is basically a goto, that only jumps forward in code.\r\n\r\n        System.out.println(&quot;1&quot;);\r\n        System.out.println(&quot;2&quot;);\r\n        System.out.println(&quot;3&quot;);\r\n        my_goto:\r\n        {\r\n            System.out.println(&quot;4&quot;);\r\n            System.out.println(&quot;5&quot;);\r\n            if (true) break my_goto;\r\n            System.out.println(&quot;6&quot;);\r\n        } //goto end location.\r\n        System.out.println(&quot;7&quot;);\r\n        System.out.println(&quot;8&quot;);\r\n\r\nThis will print 1, 2, 3, 4, 5, 7, 8. As the breaking the code block jumped to just after the code block. You can move the `my_goto: {` and `if (true) break my_goto;` and `} //goto end location.` statements. The important thing is just the break must be within the labeled code block.\r\n\r\nThis is even uglier than a real goto. Never actually do this.\r\n\r\nBut, it is sometimes useful to use labels and break and it is actually useful to know that if you label the code block and not the loop when you break you jump forward. So if you break the code block from within the loop, you not only abort the loop but you jump over the code between the end of the loop and the codeblock.","title":"How to use goto statement correctly","body":"<p><code>goto</code> is an unused reserved word in the language. So there is no <code>goto</code>. But, if you want absurdist theater you could coax one out of a language feature of labeling. But, rather than label a for loop which is sometimes useful you label a code block. You can, within that code block, call break on the label, spitting you to the end of the code block which is basically a goto, that only jumps forward in code.</p>\n\n<pre><code>    System.out.println(\"1\");\n    System.out.println(\"2\");\n    System.out.println(\"3\");\n    my_goto:\n    {\n        System.out.println(\"4\");\n        System.out.println(\"5\");\n        if (true) break my_goto;\n        System.out.println(\"6\");\n    } //goto end location.\n    System.out.println(\"7\");\n    System.out.println(\"8\");\n</code></pre>\n\n<p>This will print 1, 2, 3, 4, 5, 7, 8. As the breaking the code block jumped to just after the code block. You can move the <code>my_goto: {</code> and <code>if (true) break my_goto;</code> and <code>} //goto end location.</code> statements. The important thing is just the break must be within the labeled code block.</p>\n\n<p>This is even uglier than a real goto. Never actually do this.</p>\n\n<p>But, it is sometimes useful to use labels and break and it is actually useful to know that if you label the code block and not the loop when you break you jump forward. So if you break the code block from within the loop, you not only abort the loop but you jump over the code between the end of the loop and the codeblock.</p>\n"}],"owner":{"account_id":4307921,"reputation":1393,"user_id":3519829,"accept_rate":90,"display_name":"Ungeheuer"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":230727,"favorite_count":0,"down_vote_count":1,"up_vote_count":34,"accepted_answer_id":26431031,"answer_count":8,"score":33,"last_activity_date":1683739292,"creation_date":1413568063,"question_id":26430630,"body_markdown":"I am taking my high school AP Computer Science class. \r\n\r\nI decided to throw a `goto` statement into a one of our labs just to play around, but I got this error. \r\n\r\n    Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation problems: \r\n\t    Syntax error on token &quot;goto&quot;, assert expected\r\n\t    restart cannot be resolved to a variable\r\n    at Chapter_3.Lab03_Chapter3.Factorial.main(Factorial.java:28)\r\n\r\nI went to a `goto` question on Stackoverflow to find out how to do it properly, and I did exactly as was demonstrated in one of the answers. I really don&#39;t understand why the compiler wants an `assert` statement (at least that&#39;s what I assume it wants), nor do I have any idea how to use `assert`. It seems to want the restart part of `goto restart;` to be a variable, but restart is just a label that pulls the program back up to line 10 so that the user can enter a valid `int`. If it wants restart to be a variable, how do I do that?\r\n\r\n    import java.util.*;\r\n\r\n    public class Factorial \r\n    {\r\n\t    public static void main(String[] args) \r\n    \t{\r\n    \t\tint x = 1;\r\n    \t\tint factValue = 1;\r\n    \t\tScanner userInput = new Scanner(System.in);\r\n    \t\trestart:\r\n    \t\tSystem.out.println(&quot;Please enter a nonzero, nonnegative value to be factorialized.&quot;);\r\n    \t\tint factInput = userInput.nextInt();\r\n    \t\t\r\n    \t\twhile(factInput&lt;=0)\r\n    \t\t{\r\n    \t\t\tSystem.out.println(&quot;Enter a nonzero, nonnegative value to be factorialized.&quot;);\r\n    \t\t\tfactInput = userInput.nextInt();\r\n    \t\t}\r\n    \t\t\r\n    \t\tif(x&lt;1)//This is another way of doing what the above while loop does, I just wanted to have some fun.\r\n    \t\t{\r\n    \t\t\tSystem.out.println(&quot;The number you entered is not valid. Please try again.&quot;);\r\n    \t\t\tgoto restart;\r\n    \t\t}\r\n    \t\twhile(x&lt;=factInput)\r\n    \t\t{\r\n    \t\t\tfactValue*=x;\r\n    \t\t\tx++;\r\n    \t\t}\r\n    \t\tSystem.out.println(factInput+&quot;! = &quot;+factValue);\r\n    \t\tuserInput.close();\r\n    \t}\r\n    }\r\n\r\n","title":"How to use goto statement correctly","body":"<p>I am taking my high school AP Computer Science class. </p>\n\n<p>I decided to throw a <code>goto</code> statement into a one of our labs just to play around, but I got this error. </p>\n\n<pre><code>Exception in thread \"main\" java.lang.Error: Unresolved compilation problems: \n    Syntax error on token \"goto\", assert expected\n    restart cannot be resolved to a variable\nat Chapter_3.Lab03_Chapter3.Factorial.main(Factorial.java:28)\n</code></pre>\n\n<p>I went to a <code>goto</code> question on Stackoverflow to find out how to do it properly, and I did exactly as was demonstrated in one of the answers. I really don't understand why the compiler wants an <code>assert</code> statement (at least that's what I assume it wants), nor do I have any idea how to use <code>assert</code>. It seems to want the restart part of <code>goto restart;</code> to be a variable, but restart is just a label that pulls the program back up to line 10 so that the user can enter a valid <code>int</code>. If it wants restart to be a variable, how do I do that?</p>\n\n<pre><code>import java.util.*;\n\npublic class Factorial \n{\n    public static void main(String[] args) \n    {\n        int x = 1;\n        int factValue = 1;\n        Scanner userInput = new Scanner(System.in);\n        restart:\n        System.out.println(\"Please enter a nonzero, nonnegative value to be factorialized.\");\n        int factInput = userInput.nextInt();\n\n        while(factInput&lt;=0)\n        {\n            System.out.println(\"Enter a nonzero, nonnegative value to be factorialized.\");\n            factInput = userInput.nextInt();\n        }\n\n        if(x&lt;1)//This is another way of doing what the above while loop does, I just wanted to have some fun.\n        {\n            System.out.println(\"The number you entered is not valid. Please try again.\");\n            goto restart;\n        }\n        while(x&lt;=factInput)\n        {\n            factValue*=x;\n            x++;\n        }\n        System.out.println(factInput+\"! = \"+factValue);\n        userInput.close();\n    }\n}\n</code></pre>\n"},{"tags":["java","c++","memory-model","java-memory-model","happens-before"],"comments":[{"owner":{"account_id":1425811,"reputation":10732,"user_id":1349366,"display_name":"Aivean"},"score":1,"creation_date":1635733873,"post_id":69791898,"comment_id":123365813,"body_markdown":"*&quot;But because x and y are atomics it&#39;s OK.&quot;*. I don&#39;t think that&#39;s the reason. See the [cppreference](https://en.cppreference.com/w/cpp/atomic/memory_order):\n*The synchronization is established only between the threads releasing and acquiring the same atomic variable. Other threads can see different order of memory accesses than either or both of the synchronized threads.*  There is no violation of happens-before, because it was not established between T3 and T4 in the first place (even transitively).","body":"<i>&quot;But because x and y are atomics it&#39;s OK.&quot;</i>. I don&#39;t think that&#39;s the reason. See the <a href=\"https://en.cppreference.com/w/cpp/atomic/memory_order\" rel=\"nofollow noreferrer\">cppreference</a>: <i>The synchronization is established only between the threads releasing and acquiring the same atomic variable. Other threads can see different order of memory accesses than either or both of the synchronized threads.</i>  There is no violation of happens-before, because it was not established between T3 and T4 in the first place (even transitively)."},{"owner":{"account_id":1425811,"reputation":10732,"user_id":1349366,"display_name":"Aivean"},"score":0,"creation_date":1635734328,"post_id":69791898,"comment_id":123365874,"body_markdown":"Also, I&#39;m not sure that your question can be answered as it&#39;s currently phrased. You are asking for examples where &quot;happens-before&quot; is violated, but the whole point behind the memory model is to **guarantee** that this relation cannot not violated, if established.","body":"Also, I&#39;m not sure that your question can be answered as it&#39;s currently phrased. You are asking for examples where &quot;happens-before&quot; is violated, but the whole point behind the memory model is to <b>guarantee</b> that this relation cannot not violated, if established."},{"owner":{"display_name":"user17295426"},"score":0,"creation_date":1635735440,"post_id":69791898,"comment_id":123366015,"body_markdown":"@Aivean _There is no violation of happens-before, because it was not established between T3 and T4 in the first place (even transitively)_  \nThere is no happens-before between T3 and T4, but there is happens-before (between T1+T2 and T3) and (between T1+T2 and T4) =&gt; this means T3 and T4 see writes in T1+T2 in different order =&gt; this breaks transitivity (isn&#39;t it?)","body":"@Aivean <i>There is no violation of happens-before, because it was not established between T3 and T4 in the first place (even transitively)</i>   There is no happens-before between T3 and T4, but there is happens-before (between T1+T2 and T3) and (between T1+T2 and T4) =&gt; this means T3 and T4 see writes in T1+T2 in different order =&gt; this breaks transitivity (isn&#39;t it?)"},{"owner":{"display_name":"user17295426"},"score":0,"creation_date":1635736184,"post_id":69791898,"comment_id":123366094,"body_markdown":"@Aivean _Also, I&#39;m not sure that your question can be answered as it&#39;s currently phrased. ... the whole point behind the memory model is to guarantee that this relation cannot not violated, if established._  I don&#39;t understand **how** `release/acquire` guarantees that happens-before isn&#39;t violated =&gt; if it&#39;s guaranteed then I would like to get simple and clear explanations **how**.","body":"@Aivean <i>Also, I&#39;m not sure that your question can be answered as it&#39;s currently phrased. ... the whole point behind the memory model is to guarantee that this relation cannot not violated, if established.</i>  I don&#39;t understand <b>how</b> <code>release&#47;acquire</code> guarantees that happens-before isn&#39;t violated =&gt; if it&#39;s guaranteed then I would like to get simple and clear explanations <b>how</b>."},{"owner":{"account_id":317953,"reputation":50102,"user_id":634919,"display_name":"Nate Eldredge"},"score":0,"creation_date":1635809822,"post_id":69791898,"comment_id":123387708,"body_markdown":"One thing I&#39;m not sure if you&#39;re aware is that the happens-before relation is *dynamic*.  Given two operations A,B, the answer to which one happens before the other, or whether they are unordered, can in general vary from one run of the program to the next.  Of course, for some programs you might be able to prove that one *always* happens before the other, but that is not an inherent feature of the ordering.","body":"One thing I&#39;m not sure if you&#39;re aware is that the happens-before relation is <i>dynamic</i>.  Given two operations A,B, the answer to which one happens before the other, or whether they are unordered, can in general vary from one run of the program to the next.  Of course, for some programs you might be able to prove that one <i>always</i> happens before the other, but that is not an inherent feature of the ordering."},{"owner":{"account_id":317953,"reputation":50102,"user_id":634919,"display_name":"Nate Eldredge"},"score":0,"creation_date":1635810664,"post_id":69791898,"comment_id":123387848,"body_markdown":"&quot; there is happens-before (between T1+T2 and T3)&quot;: I do not know what that means.  Happens-before is a partial ordering on *loads and stores*.  &quot;T3&quot; isn&#39;t a load or a store, it&#39;s a thread. Perhaps you mean the loads that T3 does, but there are two of them.  And I have no idea what &quot;T1+T2&quot; means at all; how do you add two threads?","body":"&quot; there is happens-before (between T1+T2 and T3)&quot;: I do not know what that means.  Happens-before is a partial ordering on <i>loads and stores</i>.  &quot;T3&quot; isn&#39;t a load or a store, it&#39;s a thread. Perhaps you mean the loads that T3 does, but there are two of them.  And I have no idea what &quot;T1+T2&quot; means at all; how do you add two threads?"},{"owner":{"display_name":"user17295426"},"score":0,"creation_date":1635813879,"post_id":69791898,"comment_id":123388393,"body_markdown":"@NateEldredge _&quot;there is happens-before (between T1+T2 and T3)&quot;: I do not know what that means_  I meant that in order for the `assert(..)` in `Thread 3` to pass: (1)  `x.store()` in `Thread 1` should _happen-before_ `x.load()` in `Thread 3`, and (2) `y.store()` in `Thread 2` should not _happen-before_ `y.load()` in `Thread 3`","body":"@NateEldredge <i>&quot;there is happens-before (between T1+T2 and T3)&quot;: I do not know what that means</i>  I meant that in order for the <code>assert(..)</code> in <code>Thread 3</code> to pass: (1)  <code>x.store()</code> in <code>Thread 1</code> should <i>happen-before</i> <code>x.load()</code> in <code>Thread 3</code>, and (2) <code>y.store()</code> in <code>Thread 2</code> should not <i>happen-before</i> <code>y.load()</code> in <code>Thread 3</code>"},{"owner":{"display_name":"user17295426"},"score":0,"creation_date":1635814247,"post_id":69791898,"comment_id":123388441,"body_markdown":"@NateEldredge _&quot;One thing I&#39;m not sure if you&#39;re aware is that the happens-before relation is dynamic. ... &lt;it&gt; can in general vary from one run of the program to the next.&quot;_ Yes, I am aware: `happens-before` is usually created from two other orders: a `program order` (orders actions within each thread, the order of operations as they are written in the program code) and `synchronizes-with` (reflects how synchronization actions from different threads are ordered in runtime, it creates `happens-before` bridges between threads, and it can be different in different runs of the program).","body":"@NateEldredge <i>&quot;One thing I&#39;m not sure if you&#39;re aware is that the happens-before relation is dynamic. ... &lt;it&gt; can in general vary from one run of the program to the next.&quot;</i> Yes, I am aware: <code>happens-before</code> is usually created from two other orders: a <code>program order</code> (orders actions within each thread, the order of operations as they are written in the program code) and <code>synchronizes-with</code> (reflects how synchronization actions from different threads are ordered in runtime, it creates <code>happens-before</code> bridges between threads, and it can be different in different runs of the program)."},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1635909192,"post_id":69791898,"comment_id":123415855,"body_markdown":"in java, at least, `IRIW` is possible because `release/acquire` does not offer `sequential consistency`, for example. At least, this is how I know it.","body":"in java, at least, <code>IRIW</code> is possible because <code>release&#47;acquire</code> does not offer <code>sequential consistency</code>, for example. At least, this is how I know it."},{"owner":{"display_name":"user17295426"},"score":0,"creation_date":1635912335,"post_id":69791898,"comment_id":123416335,"body_markdown":"@Eugene in C/C++ `IRIW` is possible for the same reason: `release/acquire` atomics do not offer `sequential consistency`.","body":"@Eugene in C/C++ <code>IRIW</code> is possible for the same reason: <code>release&#47;acquire</code> atomics do not offer <code>sequential consistency</code>."},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1635963651,"post_id":69791898,"comment_id":123434725,"body_markdown":"I get your question now, its just too complicated for me :( sorry","body":"I get your question now, its just too complicated for me :( sorry"}],"answers":[{"comments":[{"owner":{"display_name":"user17295426"},"score":0,"creation_date":1635740343,"post_id":69792450,"comment_id":123366602,"body_markdown":"I didn&#39;t say that the IRIW test violates happens-before violation. I just showed IRIW as something that is very close to violating happens-before â€” it seems to me that it might be possible to modify IRIW in a way that would allow `T3` and `T4` to see regular writes in different order (and this would violate happens-before). The problem is that I can neither find an example of how `release+acquire` violates `happens-before`, nor prove that it&#39;s impossible. This is exactly what I ask: either example how release+acquire` violates `happens-before`, or clear and simple proof that it&#39;s impossible.","body":"I didn&#39;t say that the IRIW test violates happens-before violation. I just showed IRIW as something that is very close to violating happens-before â€” it seems to me that it might be possible to modify IRIW in a way that would allow <code>T3</code> and <code>T4</code> to see regular writes in different order (and this would violate happens-before). The problem is that I can neither find an example of how <code>release+acquire</code> violates <code>happens-before</code>, nor prove that it&#39;s impossible. This is exactly what I ask: either example how release+acquire` violates <code>happens-before</code>, or clear and simple proof that it&#39;s impossible."},{"owner":{"display_name":"user17295426"},"score":0,"creation_date":1635740800,"post_id":69792450,"comment_id":123366671,"body_markdown":"BTW I modified the code snipped to make it more simple and easier to read and understand.","body":"BTW I modified the code snipped to make it more simple and easier to read and understand."},{"owner":{"account_id":1425811,"reputation":10732,"user_id":1349366,"display_name":"Aivean"},"score":0,"creation_date":1635741375,"post_id":69792450,"comment_id":123366754,"body_markdown":"@benmambt It seems that you&#39;re under the misconception that happens-before can be &quot;violated&quot;. It can&#39;t, it would be a bug in the memory model if it could. If you&#39;re seeing the unexpected data race or seemingly wrong behavior, that means that you are using the memory model wrong.","body":"@benmambt It seems that you&#39;re under the misconception that happens-before can be &quot;violated&quot;. It can&#39;t, it would be a bug in the memory model if it could. If you&#39;re seeing the unexpected data race or seemingly wrong behavior, that means that you are using the memory model wrong."},{"owner":{"account_id":1425811,"reputation":10732,"user_id":1349366,"display_name":"Aivean"},"score":0,"creation_date":1635741581,"post_id":69792450,"comment_id":123366784,"body_markdown":"@benmambt, your &quot;fixed&quot; code will produce the data race even with `memory_order_seq_cst`. The `while(load != 1)` loop was there for a reason.","body":"@benmambt, your &quot;fixed&quot; code will produce the data race even with <code>memory_order_seq_cst</code>. The <code>while(load != 1)</code> loop was there for a reason."},{"owner":{"display_name":"user17295426"},"score":0,"creation_date":1635743376,"post_id":69792450,"comment_id":123367043,"body_markdown":"To say in other words: AFAIK `happens-before` is a strict partial order, which means it also forms [directed acyclic graph](https://en.wikipedia.org/wiki/Directed_acyclic_graph)(DAG). I understand how `memory_order_seq_cst` prevents cycles in the DAG: all atomic `memory_order_seq_cst` operations are executed in total order (so there edges only goes forward). But I don&#39;t see how the same is guaranteed by `release+acquire` atomics: different threads can see these atomics in different order, so it seems like they could form cycles and violate `happens-before`.","body":"To say in other words: AFAIK <code>happens-before</code> is a strict partial order, which means it also forms <a href=\"https://en.wikipedia.org/wiki/Directed_acyclic_graph\" rel=\"nofollow noreferrer\">directed acyclic graph</a>(DAG). I understand how <code>memory_order_seq_cst</code> prevents cycles in the DAG: all atomic <code>memory_order_seq_cst</code> operations are executed in total order (so there edges only goes forward). But I don&#39;t see how the same is guaranteed by <code>release+acquire</code> atomics: different threads can see these atomics in different order, so it seems like they could form cycles and violate <code>happens-before</code>."},{"owner":{"display_name":"user17295426"},"score":0,"creation_date":1635744032,"post_id":69792450,"comment_id":123367132,"body_markdown":"_It seems that you&#39;re under the misconception that happens-before can be &quot;violated&quot;._ **How** exactly is that guaranteed? For `memory_order_seq_cst` there are required HW properties and a proof in [this paper](https://rsim.cs.uiuc.edu/Pubs/ps2pdf/isca90.pdf) (which is the origin of many modern memory models). Is there something similar for `release+acquire`? Because I cannot find it yet â€” it&#39;s just assumed that  `release+acquire` guarantees `happens-before` just like `memory_order_seq_cst`, but to me it&#39;s not obvious.","body":"<i>It seems that you&#39;re under the misconception that happens-before can be &quot;violated&quot;.</i> <b>How</b> exactly is that guaranteed? For <code>memory_order_seq_cst</code> there are required HW properties and a proof in <a href=\"https://rsim.cs.uiuc.edu/Pubs/ps2pdf/isca90.pdf\" rel=\"nofollow noreferrer\">this paper</a> (which is the origin of many modern memory models). Is there something similar for <code>release+acquire</code>? Because I cannot find it yet â€” it&#39;s just assumed that  <code>release+acquire</code> guarantees <code>happens-before</code> just like <code>memory_order_seq_cst</code>, but to me it&#39;s not obvious."},{"owner":{"display_name":"user17295426"},"score":0,"creation_date":1635744302,"post_id":69792450,"comment_id":123367178,"body_markdown":"_your &quot;fixed&quot; code will produce the data race even with memory_order_seq_cst. The while(load != 1) loop was there for a reason._ Are you sure? I took it from [the GCC wiki](https://gcc.gnu.org/wiki/Atomic/GCCMM/AtomicSync#Acquire.2FRelease). I thought it&#39;s the same IRIW test, only simpler.","body":"<i>your &quot;fixed&quot; code will produce the data race even with memory_order_seq_cst. The while(load != 1) loop was there for a reason.</i> Are you sure? I took it from <a href=\"https://gcc.gnu.org/wiki/Atomic/GCCMM/AtomicSync#Acquire.2FRelease\" rel=\"nofollow noreferrer\">the GCC wiki</a>. I thought it&#39;s the same IRIW test, only simpler."},{"owner":{"account_id":1425811,"reputation":10732,"user_id":1349366,"display_name":"Aivean"},"score":0,"creation_date":1635744829,"post_id":69792450,"comment_id":123367252,"body_markdown":"yes, I&#39;m positive. Events can happen in the following order, without violating any established relationships: `T4.x==0; T1.x=1; T3.x==1; T3.y==0; T2.y=1; T4.y==1` and both asserts will pass.","body":"yes, I&#39;m positive. Events can happen in the following order, without violating any established relationships: <code>T4.x==0; T1.x=1; T3.x==1; T3.y==0; T2.y=1; T4.y==1</code> and both asserts will pass."},{"owner":{"display_name":"user17295426"},"score":0,"creation_date":1635745439,"post_id":69792450,"comment_id":123367343,"body_markdown":"You are right - it&#39;s a mistake. What if I replace in T4 (x==0, y==1) to (y==1, x==0), it seems to me that it will fix it.","body":"You are right - it&#39;s a mistake. What if I replace in T4 (x==0, y==1) to (y==1, x==0), it seems to me that it will fix it."},{"owner":{"display_name":"user17295426"},"score":0,"creation_date":1635746103,"post_id":69792450,"comment_id":123367469,"body_markdown":"Also it&#39;s &quot;both asserts can pass&quot; instead of &quot;both asserts can fail&quot;. And sorry for bothering you with these edits â€” I just want to make my question as easy for people to understand as possible (because IMO it&#39;s actually a pretty difficult question, so I would like to maximize chances to get an answer)","body":"Also it&#39;s &quot;both asserts can pass&quot; instead of &quot;both asserts can fail&quot;. And sorry for bothering you with these edits â€” I just want to make my question as easy for people to understand as possible (because IMO it&#39;s actually a pretty difficult question, so I would like to maximize chances to get an answer)"},{"owner":{"account_id":1425811,"reputation":10732,"user_id":1349366,"display_name":"Aivean"},"score":0,"creation_date":1635746312,"post_id":69792450,"comment_id":123367502,"body_markdown":"No, I believe the example in the GCC wiki is wrong. Consider the following sequence of events  for their example. `t4.y==0  y=20  t3.y==20 t3.x==0 x=10  t4.x==10` Both asserts will pass. So the statement *&quot;if one assert passes, the other assert must therefore fail.&quot;* is wrong. The difference with the example from `cppreference` is that `while` loop ensured that atomic has certain value, before thread proceeds to check the next condition.","body":"No, I believe the example in the GCC wiki is wrong. Consider the following sequence of events  for their example. <code>t4.y==0  y=20  t3.y==20 t3.x==0 x=10  t4.x==10</code> Both asserts will pass. So the statement <i>&quot;if one assert passes, the other assert must therefore fail.&quot;</i> is wrong. The difference with the example from <code>cppreference</code> is that <code>while</code> loop ensured that atomic has certain value, before thread proceeds to check the next condition."},{"owner":{"account_id":1425811,"reputation":10732,"user_id":1349366,"display_name":"Aivean"},"score":0,"creation_date":1635746749,"post_id":69792450,"comment_id":123367561,"body_markdown":"Here, I even wrote [a test that verifies that](https://gist.github.com/Aivean/baf74b33f6acff562706d343c184f9db). Both asserts pass and it prints `20 0` and `0 10`.","body":"Here, I even wrote <a href=\"https://gist.github.com/Aivean/baf74b33f6acff562706d343c184f9db\" rel=\"nofollow noreferrer\">a test that verifies that</a>. Both asserts pass and it prints <code>20 0</code> and <code>0 10</code>."},{"owner":{"display_name":"user17295426"},"score":0,"creation_date":1635747252,"post_id":69792450,"comment_id":123367641,"body_markdown":"Yes, I agree that example in GCC wiki is wrong. It seems to me that changing reads&#39; order  in `T4` fixes it. In [your test](https://gist.github.com/Aivean/baf74b33f6acff562706d343c184f9db) that would mean replacing  `int yy = y.load(...);...;int xx = x.load(...);` with `int xx = x.load(...);...;int yy = y.load(...);` in `func4()`","body":"Yes, I agree that example in GCC wiki is wrong. It seems to me that changing reads&#39; order  in <code>T4</code> fixes it. In <a href=\"https://gist.github.com/Aivean/baf74b33f6acff562706d343c184f9db\" rel=\"nofollow noreferrer\">your test</a> that would mean replacing  <code>int yy = y.load(...);...;int xx = x.load(...);</code> with <code>int xx = x.load(...);...;int yy = y.load(...);</code> in <code>func4()</code>"},{"owner":{"account_id":1425811,"reputation":10732,"user_id":1349366,"display_name":"Aivean"},"score":0,"creation_date":1635747634,"post_id":69792450,"comment_id":123367710,"body_markdown":"I agree, that would be ensure that either one or both asserts fail (when `memory_order_seq_cst` is used).","body":"I agree, that would be ensure that either one or both asserts fail (when <code>memory_order_seq_cst</code> is used)."},{"owner":{"display_name":"user17295426"},"score":0,"creation_date":1635748459,"post_id":69792450,"comment_id":123367874,"body_markdown":"OK. I fixed that in the question text.","body":"OK. I fixed that in the question text."},{"owner":{"account_id":1425811,"reputation":10732,"user_id":1349366,"display_name":"Aivean"},"score":0,"creation_date":1635748653,"post_id":69792450,"comment_id":123367909,"body_markdown":"@benmambt, regarding *&quot;How exactly is that guaranteed? For memory_order_seq_cst there are required HW properties ...&quot;*. Please check [this great answer](https://stackoverflow.com/a/6319356/1349366).  Quote: *&quot;the job of the programmer is to write code for the abstract machine; the job of the compiler is to actualize that code on a concrete machine. By coding rigidly to the spec, you can be certain that your code will compile and run without modification on any system with a compliant C++ compiler&quot;*.  If your question is about hardware implementation of the memory model, then I cannot help you.","body":"@benmambt, regarding <i>&quot;How exactly is that guaranteed? For memory_order_seq_cst there are required HW properties ...&quot;</i>. Please check <a href=\"https://stackoverflow.com/a/6319356/1349366\">this great answer</a>.  Quote: <i>&quot;the job of the programmer is to write code for the abstract machine; the job of the compiler is to actualize that code on a concrete machine. By coding rigidly to the spec, you can be certain that your code will compile and run without modification on any system with a compliant C++ compiler&quot;</i>.  If your question is about hardware implementation of the memory model, then I cannot help you."},{"owner":{"display_name":"user17295426"},"score":0,"creation_date":1635750005,"post_id":69792450,"comment_id":123368192,"body_markdown":"My question is: &quot;It seems to me that `release/acquire` (as it&#39;s defined in the specification) might break `happens-before` (as it&#39;s defined it the specification), but I&#39;m not sure. So I would like to see  either an example of violation, or  a proof (or clear explanation) why it&#39;s impossible&quot;. BTW in java `release+acquire` exit outside of the spec and also data races are not &quot;undefined behavior&quot;, so it&#39;s an especially interesting case.","body":"My question is: &quot;It seems to me that <code>release&#47;acquire</code> (as it&#39;s defined in the specification) might break <code>happens-before</code> (as it&#39;s defined it the specification), but I&#39;m not sure. So I would like to see  either an example of violation, or  a proof (or clear explanation) why it&#39;s impossible&quot;. BTW in java <code>release+acquire</code> exit outside of the spec and also data races are not &quot;undefined behavior&quot;, so it&#39;s an especially interesting case."}],"tags":[],"owner":{"account_id":1425811,"reputation":10732,"user_id":1349366,"display_name":"Aivean"},"comment_count":17,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635742772,"creation_date":1635738664,"answer_id":69792450,"question_id":69791898,"body_markdown":"&gt; I would like to know if release+acquire can violate happens-before.\r\n\r\n[Happens-before relationship](https://en.wikipedia.org/wiki/Happened-before) cannot be &quot;violated&quot;, as it is a **guarantee**. Meaning, if you established it in a correct way, it will be there, with all its implications (unless there is a bug in the compiler).\r\n\r\nHowever, establishing *just any* happens-before relationship doesn&#39;t guarantee that you&#39;ve avoided all possible [race conditions](https://en.wikipedia.org/wiki/Race_condition). You need to establish carefully chosen relationships between relevant operations, that will eliminate all scenarios when data race is possible.\r\n\r\n----\r\n\r\nLet&#39;s review this code snippet:\r\n```cpp\r\n// Thread 1\r\nx.store(1, std::memory_order_release);\r\n\r\n// Thread 2\r\ny.store(1, std::memory_order_release);\r\n\r\n// Thread 3\r\nwhile (x.load(std::memory_order_acquire) != 1);\r\nif (y.load(std::memory_order_acquire) == 0) {\r\n  x_then_y = true;\r\n}\r\n\r\n// Thread 4\r\nwhile (y.load(std::memory_order_acquire) != 1);\r\nif (x.load(std::memory_order_acquire) == 0) {\r\n  y_then_x = true;\r\n}\r\n```\r\n\r\nAs you see, `T1` and `T2` update `x` and `y` using `memory_order_release` memory ordering. `T3` and `T4` use `memory_order_acquire`. \r\n\r\nNow, to quote cppreference:\r\n\r\n&gt; Release-Acquire ordering\r\nIf an atomic store in thread `A` is tagged `memory_order_release` and an atomic load in thread `B` from the same variable is tagged `memory_order_acquire`, all memory writes (non-atomic and relaxed atomic) that happened-before the atomic store from the point of view of thread `A`, become visible side-effects in thread `B`. That is, once the atomic load is completed, thread `B` is guaranteed to see everything thread `A` wrote to memory.\r\n&gt; \r\n&gt; The synchronization is established only between the threads releasing and acquiring the same atomic variable. **Other threads can see different order of memory accesses than either or both of the synchronized threads.**\r\n\r\nIt explicitly says, that only relations between the `store-load` pairs in corresponding threads is established. **No relation between `load-load` pairs is formed.** Back to our example, the happens-before relations would form the following graph:\r\n\r\n&lt;img src=&quot;https://i.stack.imgur.com/cdn3L.png&quot; height=&quot;200&quot;/&gt;\r\n\r\nAs you can see, there is no relation between T1 and T2, or T3 and T4, and no total order. T3 and T4 are free to see side-effects from T1 and T2 in any order.\r\n\r\n---\r\n\r\nThat code snippet above was used in `cppreference` to illustrate the case, when `memory_order_acquire` + `memory_order_release` may be too weak to avoid data race (but that doesn&#39;t mean that this example violates happens-before or memory model, it&#39;s just that having happens-before may not be sufficient to avoid all possible data races!).\r\n\r\nIf `memory_order_seq_cst` was used for all operations in the example above, then the happens-before would&#39;ve been additionally established between `load` operations in T3 and T4.\r\n\r\nMeaning, that when first `while(x.load) != 1` or `while(y.load) != 1` passes, it **guarantees** that following `x.load` or `y.load` in another thread will have the result of `1`, ensuring that `x_then_y` and `y_then_x` cannot be true in the same time.\r\n\r\n--- \r\n\r\nNote, in java atomic and `volatile` operations always work similarly to `memory_order_seq_cst` for simplicity (sacrificing performance in some cases).","title":"Can release+acquire break happens-before?","body":"<blockquote>\n<p>I would like to know if release+acquire can violate happens-before.</p>\n</blockquote>\n<p><a href=\"https://en.wikipedia.org/wiki/Happened-before\" rel=\"nofollow noreferrer\">Happens-before relationship</a> cannot be &quot;violated&quot;, as it is a <strong>guarantee</strong>. Meaning, if you established it in a correct way, it will be there, with all its implications (unless there is a bug in the compiler).</p>\n<p>However, establishing <em>just any</em> happens-before relationship doesn't guarantee that you've avoided all possible <a href=\"https://en.wikipedia.org/wiki/Race_condition\" rel=\"nofollow noreferrer\">race conditions</a>. You need to establish carefully chosen relationships between relevant operations, that will eliminate all scenarios when data race is possible.</p>\n<hr />\n<p>Let's review this code snippet:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>// Thread 1\nx.store(1, std::memory_order_release);\n\n// Thread 2\ny.store(1, std::memory_order_release);\n\n// Thread 3\nwhile (x.load(std::memory_order_acquire) != 1);\nif (y.load(std::memory_order_acquire) == 0) {\n  x_then_y = true;\n}\n\n// Thread 4\nwhile (y.load(std::memory_order_acquire) != 1);\nif (x.load(std::memory_order_acquire) == 0) {\n  y_then_x = true;\n}\n</code></pre>\n<p>As you see, <code>T1</code> and <code>T2</code> update <code>x</code> and <code>y</code> using <code>memory_order_release</code> memory ordering. <code>T3</code> and <code>T4</code> use <code>memory_order_acquire</code>.</p>\n<p>Now, to quote cppreference:</p>\n<blockquote>\n<p>Release-Acquire ordering\nIf an atomic store in thread <code>A</code> is tagged <code>memory_order_release</code> and an atomic load in thread <code>B</code> from the same variable is tagged <code>memory_order_acquire</code>, all memory writes (non-atomic and relaxed atomic) that happened-before the atomic store from the point of view of thread <code>A</code>, become visible side-effects in thread <code>B</code>. That is, once the atomic load is completed, thread <code>B</code> is guaranteed to see everything thread <code>A</code> wrote to memory.</p>\n<p>The synchronization is established only between the threads releasing and acquiring the same atomic variable. <strong>Other threads can see different order of memory accesses than either or both of the synchronized threads.</strong></p>\n</blockquote>\n<p>It explicitly says, that only relations between the <code>store-load</code> pairs in corresponding threads is established. <strong>No relation between <code>load-load</code> pairs is formed.</strong> Back to our example, the happens-before relations would form the following graph:</p>\n<img src=\"https://i.stack.imgur.com/cdn3L.png\" height=\"200\"/>\n<p>As you can see, there is no relation between T1 and T2, or T3 and T4, and no total order. T3 and T4 are free to see side-effects from T1 and T2 in any order.</p>\n<hr />\n<p>That code snippet above was used in <code>cppreference</code> to illustrate the case, when <code>memory_order_acquire</code> + <code>memory_order_release</code> may be too weak to avoid data race (but that doesn't mean that this example violates happens-before or memory model, it's just that having happens-before may not be sufficient to avoid all possible data races!).</p>\n<p>If <code>memory_order_seq_cst</code> was used for all operations in the example above, then the happens-before would've been additionally established between <code>load</code> operations in T3 and T4.</p>\n<p>Meaning, that when first <code>while(x.load) != 1</code> or <code>while(y.load) != 1</code> passes, it <strong>guarantees</strong> that following <code>x.load</code> or <code>y.load</code> in another thread will have the result of <code>1</code>, ensuring that <code>x_then_y</code> and <code>y_then_x</code> cannot be true in the same time.</p>\n<hr />\n<p>Note, in java atomic and <code>volatile</code> operations always work similarly to <code>memory_order_seq_cst</code> for simplicity (sacrificing performance in some cases).</p>\n"},{"comments":[{"owner":{"account_id":292208,"reputation":10665,"user_id":2245707,"accept_rate":17,"display_name":"pveentjer"},"score":0,"creation_date":1635844788,"post_id":69804962,"comment_id":123394831,"body_markdown":"You are right: to remove the from-read edge from the happens before order would also ensure the happens before order is acyclic. This technique is also applied with other memory orders like TSO where the happens before order doesn&#39;t contain the edge between an earlier store of X and a later load of X on the same CPU.","body":"You are right: to remove the from-read edge from the happens before order would also ensure the happens before order is acyclic. This technique is also applied with other memory orders like TSO where the happens before order doesn&#39;t contain the edge between an earlier store of X and a later load of X on the same CPU."},{"owner":{"display_name":"user17295426"},"score":0,"creation_date":1635897775,"post_id":69804962,"comment_id":123414068,"body_markdown":"Thanks for the explanations for the IRIW test. Could you explain general case: how the properties of `release/acquire` atomics given in the spec guarantee that the partial ordering axioms of `happens-before` cannot be violated? (For instance, for SC atomics I can see how it&#39;s guaranteed: there is a global order of all SC atomics =&gt; `synchronizes-with` edge always go from an earlier to a later atomic =&gt; all happens-before edges go from an earlier to a later action =&gt; there can be no cycles in such graph)","body":"Thanks for the explanations for the IRIW test. Could you explain general case: how the properties of <code>release&#47;acquire</code> atomics given in the spec guarantee that the partial ordering axioms of <code>happens-before</code> cannot be violated? (For instance, for SC atomics I can see how it&#39;s guaranteed: there is a global order of all SC atomics =&gt; <code>synchronizes-with</code> edge always go from an earlier to a later atomic =&gt; all happens-before edges go from an earlier to a later action =&gt; there can be no cycles in such graph)"},{"owner":{"account_id":317953,"reputation":50102,"user_id":634919,"display_name":"Nate Eldredge"},"score":1,"creation_date":1635898006,"post_id":69804962,"comment_id":123414107,"body_markdown":"@benmambt: It&#39;s the spec **itself** that guarantees the partial ordering axioms are not violated.  That guarantee stands on its own, it&#39;s not a consequence of other requirements.  It&#39;s an axiom, not a theorem.  C++20 intro.races p10: &quot;The implementation shall ensure that no program execution demonstrates a cycle in the &#39;happens before&#39;\nrelation.&quot; Full stop.   It doesn&#39;t say &quot;... unless release/acquire are used in such-and-such way.&quot;","body":"@benmambt: It&#39;s the spec <b>itself</b> that guarantees the partial ordering axioms are not violated.  That guarantee stands on its own, it&#39;s not a consequence of other requirements.  It&#39;s an axiom, not a theorem.  C++20 intro.races p10: &quot;The implementation shall ensure that no program execution demonstrates a cycle in the &#39;happens before&#39; relation.&quot; Full stop.   It doesn&#39;t say &quot;... unless release/acquire are used in such-and-such way.&quot;"},{"owner":{"account_id":317953,"reputation":50102,"user_id":634919,"display_name":"Nate Eldredge"},"score":0,"creation_date":1635898109,"post_id":69804962,"comment_id":123414126,"body_markdown":"@benmambt: So if you come up with a program and can prove &quot;if this program prints `0 1`, then the properties of release/acquire would force the happens-before relation to contain a cycle&quot;, then you have proved that the program can never print `0 1`.  Hence the compiler, unless it is buggy, must not compile it in such a way that it could.","body":"@benmambt: So if you come up with a program and can prove &quot;if this program prints <code>0 1</code>, then the properties of release/acquire would force the happens-before relation to contain a cycle&quot;, then you have proved that the program can never print <code>0 1</code>.  Hence the compiler, unless it is buggy, must not compile it in such a way that it could."},{"owner":{"display_name":"user17295426"},"score":0,"creation_date":1635899072,"post_id":69804962,"comment_id":123414263,"body_markdown":"_&quot;It&#39;s the spec itself that guarantees the partial ordering axioms are not violated&quot;_ In case of SC atomics  I see how the spec implements that guarantee (that the HB axioms cannot be violated) : SC atomics are executed in global order =&gt; there cannot be cycles in a HB graph. So how are the HB guarantees implemented with `release/acquire` atomics then?","body":"<i>&quot;It&#39;s the spec itself that guarantees the partial ordering axioms are not violated&quot;</i> In case of SC atomics  I see how the spec implements that guarantee (that the HB axioms cannot be violated) : SC atomics are executed in global order =&gt; there cannot be cycles in a HB graph. So how are the HB guarantees implemented with <code>release&#47;acquire</code> atomics then?"},{"owner":{"display_name":"user17295426"},"score":0,"creation_date":1635900683,"post_id":69804962,"comment_id":123414531,"body_markdown":"_&quot;So if you come up with a program and can prove &quot;if this program prints 0 1, then the properties of release/acquire would force the happens-before relation to contain a cycle&quot;&quot;_\nThis program would be exactly what I would like to get as an answer to my question. This is exactly what I want to find out: whether the properties of `release/acquire` are enough to guarantee happens-before axioms. So the program would be a proof. Of course, another possible answer would be a proof/explanation of how the properties of release/acquire guarantee happens-before axioms.","body":"<i>&quot;So if you come up with a program and can prove &quot;if this program prints 0 1, then the properties of release/acquire would force the happens-before relation to contain a cycle&quot;&quot;</i> This program would be exactly what I would like to get as an answer to my question. This is exactly what I want to find out: whether the properties of <code>release&#47;acquire</code> are enough to guarantee happens-before axioms. So the program would be a proof. Of course, another possible answer would be a proof/explanation of how the properties of release/acquire guarantee happens-before axioms."},{"owner":{"display_name":"user17295426"},"score":0,"creation_date":1635902220,"post_id":69804962,"comment_id":123414763,"body_markdown":"Ironically, I found the paper ([Time, Clocks and the Ordering of Events in a Distributed System](https://www.microsoft.com/en-us/research/uploads/prod/2016/12/Time-Clocks-and-the-Ordering-of-Events-in-a-Distributed-System.pdf) by Lamport) where the term `happens-before` came from, and in this paper there are `release/acquire` synchronization actions which seem to guarantee no cycles in the HB graph ( in the paper `release` occurs at an earlier physical time than `acquire`). Unfortunately, HB in java and c++ seem to have no alternatives of the physical time property.","body":"Ironically, I found the paper (<a href=\"https://www.microsoft.com/en-us/research/uploads/prod/2016/12/Time-Clocks-and-the-Ordering-of-Events-in-a-Distributed-System.pdf\" rel=\"nofollow noreferrer\">Time, Clocks and the Ordering of Events in a Distributed System</a> by Lamport) where the term <code>happens-before</code> came from, and in this paper there are <code>release&#47;acquire</code> synchronization actions which seem to guarantee no cycles in the HB graph ( in the paper <code>release</code> occurs at an earlier physical time than <code>acquire</code>). Unfortunately, HB in java and c++ seem to have no alternatives of the physical time property."},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":1,"creation_date":1635908964,"post_id":69804962,"comment_id":123415820,"body_markdown":"I might get myself in a lot of trouble here, but this is sort of obvious if you read carefully the [JLS](https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html) spec. I am only going to refer to java, since I kind of know a little. JLS says that there is `PO` (program order), `SO` (synchronizes with order) and `HB` (happens before order). The JLS is very explicit in : &quot;If an action x synchronizes-with a following action y, then we also have hb(x, y).&quot; and also : &quot;The source of a synchronizes-with edge is called a release, and the destination is called an acquire.&quot;.","body":"I might get myself in a lot of trouble here, but this is sort of obvious if you read carefully the <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html\" rel=\"nofollow noreferrer\">JLS</a> spec. I am only going to refer to java, since I kind of know a little. JLS says that there is <code>PO</code> (program order), <code>SO</code> (synchronizes with order) and <code>HB</code> (happens before order). The JLS is very explicit in : &quot;If an action x synchronizes-with a following action y, then we also have hb(x, y).&quot; and also : &quot;The source of a synchronizes-with edge is called a release, and the destination is called an acquire.&quot;."},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1635909118,"post_id":69804962,"comment_id":123415846,"body_markdown":"So _to me_, strictly speaking about java language, establishing a `SO` order, that trasitively closes `PO`, is establishing `HB`. With that in mind, I can&#39;t even understand the question. :|","body":"So <i>to me</i>, strictly speaking about java language, establishing a <code>SO</code> order, that trasitively closes <code>PO</code>, is establishing <code>HB</code>. With that in mind, I can&#39;t even understand the question. :|"},{"owner":{"display_name":"user17295426"},"score":0,"creation_date":1635913244,"post_id":69804962,"comment_id":123416440,"body_markdown":"@Eugene the release/acquire that I&#39;m talking about are implemented in java as [VarHandle.setRelease()](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/invoke/VarHandle.html#setRelease(java.lang.Object...)) and [VarHandle.getAcquire()](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/invoke/VarHandle.html#getAcquire(java.lang.Object...)). They are outside of [the JMM spec](https://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html) â€” for example they definitely don&#39;t participate in `SO`.","body":"@Eugene the release/acquire that I&#39;m talking about are implemented in java as <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/invoke/VarHandle.html#setRelease(java.lang.Object...)\" rel=\"nofollow noreferrer\">VarHandle.setRelease()</a> and <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/invoke/VarHandle.html#getAcquire(java.lang.Object...)\" rel=\"nofollow noreferrer\">VarHandle.getAcquire()</a>. They are outside of <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html\" rel=\"nofollow noreferrer\">the JMM spec</a> â€” for example they definitely don&#39;t participate in <code>SO</code>."},{"owner":{"display_name":"user17295426"},"score":0,"creation_date":1635925010,"post_id":69804962,"comment_id":123418838,"body_markdown":"@Eugene _&quot;I can&#39;t even understand the question.&quot;_  I can try to explain it to you this way: (1) you mentioned &quot;trasitively closes&quot; â€” so I suppose you know that `HB` is transitive (i.e. if (a `HB` b) and (b `HB` c) then it means (a `HB` c)) (2) I&#39;m interested in how this transitivity is implemented: e.g. for `SC` atomics (aka `volatile` in java) I can see that transitivity is guaranteed by the properties of the atomics (I added this to my question as &#39;Edit 1&#39;) (3) but for `release/acquire` atomics I don&#39;t see how their properties guarantee that `HB` is transitive â€” and this is what I ask.","body":"@Eugene <i>&quot;I can&#39;t even understand the question.&quot;</i>  I can try to explain it to you this way: (1) you mentioned &quot;trasitively closes&quot; â€” so I suppose you know that <code>HB</code> is transitive (i.e. if (a <code>HB</code> b) and (b <code>HB</code> c) then it means (a <code>HB</code> c)) (2) I&#39;m interested in how this transitivity is implemented: e.g. for <code>SC</code> atomics (aka <code>volatile</code> in java) I can see that transitivity is guaranteed by the properties of the atomics (I added this to my question as &#39;Edit 1&#39;) (3) but for <code>release&#47;acquire</code> atomics I don&#39;t see how their properties guarantee that <code>HB</code> is transitive â€” and this is what I ask."},{"owner":{"account_id":317953,"reputation":50102,"user_id":634919,"display_name":"Nate Eldredge"},"score":2,"creation_date":1635949176,"post_id":69804962,"comment_id":123428438,"body_markdown":"@benmambt: So I suppose the question is: &quot;Suppose we deleted the &#39;no cycles&#39; requirement from the language standard.  Is there a program which, while conforming to all remaining rules of the standard, would exhibit a cycle in the HB relation?&quot; I think at this point you might want to ask it as a new question, since this question has already gone in so many different directions.  You should probably also restrict it to a single language, since the answer may depend on the precise wording of the language standard.","body":"@benmambt: So I suppose the question is: &quot;Suppose we deleted the &#39;no cycles&#39; requirement from the language standard.  Is there a program which, while conforming to all remaining rules of the standard, would exhibit a cycle in the HB relation?&quot; I think at this point you might want to ask it as a new question, since this question has already gone in so many different directions.  You should probably also restrict it to a single language, since the answer may depend on the precise wording of the language standard."},{"owner":{"account_id":317953,"reputation":50102,"user_id":634919,"display_name":"Nate Eldredge"},"score":0,"creation_date":1635964007,"post_id":69804962,"comment_id":123434868,"body_markdown":"@benmambt: In fact, some of the C++ standard&#39;s requirements seem to be written assuming the partial order axioms.  For instance, some simple counterexamples are ruled out by intro.races p14, that an evaluation B shall take its value from some side effect A such that B does not happen before A.  It might have made more sense for them to say &quot;such that A happens before B or such that A and B are unordered&quot;.  They are equivalent assuming antisymmetry, but not in general, since with transitivity and cycles, A may happen both before and after B.","body":"@benmambt: In fact, some of the C++ standard&#39;s requirements seem to be written assuming the partial order axioms.  For instance, some simple counterexamples are ruled out by intro.races p14, that an evaluation B shall take its value from some side effect A such that B does not happen before A.  It might have made more sense for them to say &quot;such that A happens before B or such that A and B are unordered&quot;.  They are equivalent assuming antisymmetry, but not in general, since with transitivity and cycles, A may happen both before and after B."},{"owner":{"display_name":"user17295426"},"score":0,"creation_date":1635974204,"post_id":69804962,"comment_id":123438294,"body_markdown":"@NateEldredge _&quot;Suppose we deleted the &#39;no cycles&#39; requirement from the language standard&quot;_ I tried to find this requirement in C++ and found [this](https://timsong-cpp.github.io/cppwp/n4868/intro.races#10.2): _&quot;The implementation shall ensure that no program execution demonstrates a cycle in the â€œhappens beforeâ€ relation. [Note 9: This cycle would otherwise be possible only through the use of consume operations. â€” end note]&quot;_. As I understand, it means that `release/acquire` atomics cannot produce cycles in `HB` simply because of their properties (the compiler doesn&#39;t have to do anything).","body":"@NateEldredge <i>&quot;Suppose we deleted the &#39;no cycles&#39; requirement from the language standard&quot;</i> I tried to find this requirement in C++ and found <a href=\"https://timsong-cpp.github.io/cppwp/n4868/intro.races#10.2\" rel=\"nofollow noreferrer\">this</a>: <i>&quot;The implementation shall ensure that no program execution demonstrates a cycle in the â€œhappens beforeâ€ relation. [Note 9: This cycle would otherwise be possible only through the use of consume operations. â€” end note]&quot;</i>. As I understand, it means that <code>release&#47;acquire</code> atomics cannot produce cycles in <code>HB</code> simply because of their properties (the compiler doesn&#39;t have to do anything)."},{"owner":{"account_id":317953,"reputation":50102,"user_id":634919,"display_name":"Nate Eldredge"},"score":1,"creation_date":1635974952,"post_id":69804962,"comment_id":123438560,"body_markdown":"Oh, indeed.  And actually, I might see how to prove it.  The HB relation is transitive by its construction.  The sequencing relation is acyclic, so if there is a cycle in HB, it must contain at least one synchronizes-with step, which is, roughly, an acquire load L that takes its value from a release store S.  But because of the cycle, L happens before S.  Therefore by p14, L must take its value from some store other than S, contradiction.  Not quite a proof because I have oversimplified the definition of synchronizes-with from atomics.order p2, but it&#39;s a start.","body":"Oh, indeed.  And actually, I might see how to prove it.  The HB relation is transitive by its construction.  The sequencing relation is acyclic, so if there is a cycle in HB, it must contain at least one synchronizes-with step, which is, roughly, an acquire load L that takes its value from a release store S.  But because of the cycle, L happens before S.  Therefore by p14, L must take its value from some store other than S, contradiction.  Not quite a proof because I have oversimplified the definition of synchronizes-with from atomics.order p2, but it&#39;s a start."},{"owner":{"display_name":"user17295426"},"score":0,"creation_date":1635976705,"post_id":69804962,"comment_id":123439109,"body_markdown":"@NateEldredge I&#39;m not really sure what is _&quot;the &#39;no cycles&#39; requirement&quot;_ in C++ standard to the new question as you propose.","body":"@NateEldredge I&#39;m not really sure what is <i>&quot;the &#39;no cycles&#39; requirement&quot;</i> in C++ standard to the new question as you propose."},{"owner":{"display_name":"user17295426"},"score":0,"creation_date":1635977669,"post_id":69804962,"comment_id":123439341,"body_markdown":"@NateEldredge _&quot;I might see how to prove it&quot;_ that is just great. I will need some time to understand your explanation and to make sure that it doesn&#39;t miss some non-obvious cases. But usually simple explanations like yours work great for me. Maybe you could put it in a answer â€” I will make it an accepted answer after I figure out your explanations and make sure it&#39;s correct.","body":"@NateEldredge <i>&quot;I might see how to prove it&quot;</i> that is just great. I will need some time to understand your explanation and to make sure that it doesn&#39;t miss some non-obvious cases. But usually simple explanations like yours work great for me. Maybe you could put it in a answer â€” I will make it an accepted answer after I figure out your explanations and make sure it&#39;s correct."},{"owner":{"account_id":317953,"reputation":50102,"user_id":634919,"display_name":"Nate Eldredge"},"score":0,"creation_date":1635979290,"post_id":69804962,"comment_id":123439733,"body_markdown":"@benmambt: By &quot;the no-cycles requirement&quot; I mean exactly the sentence that we discussed: &quot;The implementation shall ensure that no program execution demonstrates a cycle in the &#39;happens before&#39; relation.&quot;  And what would happen if that sentence were to be deleted.","body":"@benmambt: By &quot;the no-cycles requirement&quot; I mean exactly the sentence that we discussed: &quot;The implementation shall ensure that no program execution demonstrates a cycle in the &#39;happens before&#39; relation.&quot;  And what would happen if that sentence were to be deleted."}],"tags":[],"owner":{"account_id":317953,"reputation":50102,"user_id":634919,"display_name":"Nate Eldredge"},"comment_count":18,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1635859207,"creation_date":1635822421,"answer_id":69804962,"question_id":69791898,"body_markdown":"Happens-before is the transitive closure of sequenced-before and synchronizes-with.  Sequenced-before is just program order within each thread, and synchronizes-with occurs when an acquire load takes its value from a release store.  So in your program, in order to have both assertions pass, the following relations must hold:\r\n\r\n1. `T3.x==1` happens before `T3.y==0` (sequencing)\r\n2. `T4.y==1` happens before `T4.x==0` (likewise)\r\n3. `T1.x=1` happens before `T3.x==1` (acquire load takes its value from release store)\r\n4. `T2.y=1` happens before `T4.y==1` (likewise)\r\n5. `T1.x=1` happens before `T3.y==0` (for transitivity)\r\n6. `T2.y=1` happens before `T4.x==0` (likewise)\r\n\r\nYou may check that this satisfies all the axioms of a partial ordering (antisymmetric and transitive) as well as all the C++ coherence rules implied by both assertions passing.  For instance, it must not be the case that `T2.y=1` happens before `T3.y==0`, and indeed there is no such relation in our ordering.  But it is also not true that `T3.y==0` happens before `T2.y=1`, and there is nothing wrong with that; it is a **partial** order after all.  `T2.y=1` and `T3.y==0` are simply unordered.\r\n\r\nSince there is a valid happens-before ordering that is consistent with both assertions passing, it is possible that when you run the program, both assertions pass.\r\n\r\nIt is true that if some happens-before relation existed between `T3.y==0` and `T2.y=1` in either direction, and likewise between `T4.x==0` and `T1.x=1`, then every combination would result in some violation of the rules: either a violation of coherence, or a cycle in the partial order.  But again, it is perfectly fine for them to be unordered, and then no violation occurs.\r\n\r\nIf the loads and stores were all relaxed, or even if `x` and `y` were not atomic at all, then relations 3 and 4 above would not be implied by any rule, and so the happens-before ordering would become simply:\r\n\r\n\r\n1. `T3.x==1` happens before `T3.y==0` (sequencing)\r\n2. `T4.y==1` happens before `T4.x==0` (likewise)\r\n\r\nThis is **also** consistent with both assertions passing.  (In the non-atomic case, the fact that `T1.x=1` is unordered with the loads of `x` would mean there is a data race, and therefore the behavior is undefined in C++.  In a different language like Java, we might have defined behavior saying that both loads succeed and return either 0 or 1, but we could still have both assertions pass.)  If you think that changing the program to use non-atomic loads and stores would prevent both assertions from passing, you are mistaken.\r\n\r\nSo having acquire and release actually *strengthens* the ordering; there are *more* relations that must hold, and the behavior of the program becomes *better* defined.","title":"Can release+acquire break happens-before?","body":"<p>Happens-before is the transitive closure of sequenced-before and synchronizes-with.  Sequenced-before is just program order within each thread, and synchronizes-with occurs when an acquire load takes its value from a release store.  So in your program, in order to have both assertions pass, the following relations must hold:</p>\n<ol>\n<li><code>T3.x==1</code> happens before <code>T3.y==0</code> (sequencing)</li>\n<li><code>T4.y==1</code> happens before <code>T4.x==0</code> (likewise)</li>\n<li><code>T1.x=1</code> happens before <code>T3.x==1</code> (acquire load takes its value from release store)</li>\n<li><code>T2.y=1</code> happens before <code>T4.y==1</code> (likewise)</li>\n<li><code>T1.x=1</code> happens before <code>T3.y==0</code> (for transitivity)</li>\n<li><code>T2.y=1</code> happens before <code>T4.x==0</code> (likewise)</li>\n</ol>\n<p>You may check that this satisfies all the axioms of a partial ordering (antisymmetric and transitive) as well as all the C++ coherence rules implied by both assertions passing.  For instance, it must not be the case that <code>T2.y=1</code> happens before <code>T3.y==0</code>, and indeed there is no such relation in our ordering.  But it is also not true that <code>T3.y==0</code> happens before <code>T2.y=1</code>, and there is nothing wrong with that; it is a <strong>partial</strong> order after all.  <code>T2.y=1</code> and <code>T3.y==0</code> are simply unordered.</p>\n<p>Since there is a valid happens-before ordering that is consistent with both assertions passing, it is possible that when you run the program, both assertions pass.</p>\n<p>It is true that if some happens-before relation existed between <code>T3.y==0</code> and <code>T2.y=1</code> in either direction, and likewise between <code>T4.x==0</code> and <code>T1.x=1</code>, then every combination would result in some violation of the rules: either a violation of coherence, or a cycle in the partial order.  But again, it is perfectly fine for them to be unordered, and then no violation occurs.</p>\n<p>If the loads and stores were all relaxed, or even if <code>x</code> and <code>y</code> were not atomic at all, then relations 3 and 4 above would not be implied by any rule, and so the happens-before ordering would become simply:</p>\n<ol>\n<li><code>T3.x==1</code> happens before <code>T3.y==0</code> (sequencing)</li>\n<li><code>T4.y==1</code> happens before <code>T4.x==0</code> (likewise)</li>\n</ol>\n<p>This is <strong>also</strong> consistent with both assertions passing.  (In the non-atomic case, the fact that <code>T1.x=1</code> is unordered with the loads of <code>x</code> would mean there is a data race, and therefore the behavior is undefined in C++.  In a different language like Java, we might have defined behavior saying that both loads succeed and return either 0 or 1, but we could still have both assertions pass.)  If you think that changing the program to use non-atomic loads and stores would prevent both assertions from passing, you are mistaken.</p>\n<p>So having acquire and release actually <em>strengthens</em> the ordering; there are <em>more</em> relations that must hold, and the behavior of the program becomes <em>better</em> defined.</p>\n"},{"tags":[],"owner":{"display_name":"user17295426"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683738111,"creation_date":1636649230,"answer_id":69931961,"question_id":69791898,"body_markdown":"**Answer: no, release/acquire cannot break happens-before.**\r\n\r\nThe proof is given by Nate Eldredge in [this comment](https://stackoverflow.com/questions/69791898/can-releaseacquire-break-happens-before#comment123438560_69804962):\r\n&gt; Oh, indeed. And actually, I might see how to prove it. The HB relation is transitive by its construction. The sequencing relation is acyclic, so if there is a cycle in HB, it must contain at least one synchronizes-with step, which is, roughly, an acquire load L that takes its value from a release store S. But because of the cycle, L happens before S. Therefore by p14, L must take its value from some store other than S, contradiction. Not quite a proof because I have oversimplified the definition of synchronizes-with from atomics.order p2, but it&#39;s a start.\r\n\r\nI just would like to put it in a separate answer to make it easier for people to notice.\r\n\r\nPlus here are additional explanations from me (maybe it will make it easier to understand for some people).\r\n\r\n---\r\n\r\nFirst of all, if we use only `release/acquire` atomics and non-atomic memory accesses, then `happens-before` is transitive (and acyclic) by construction.\r\n\r\nSimilarly to `SC` graph, in case of `release/acquire` edges also always point downwards:\r\n```none\r\nThread1   Thread2   Thread3   Thread4\r\n=======   =======   =======   =======\r\n   â”‚         â”‚         â”‚         â”‚   \r\n   â”‚    â”Œ Wrel(a)â”     â”‚         â”‚   \r\nRacq(a)&lt;â”˜    â”‚   â”‚â”Œ Wrel(b)â”     â”‚   \r\n   â†“         â”‚   â”‚â”‚    â”‚   â””&gt; Racq(b)\r\nRacq(b)&lt;â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”‚â”˜    â”‚         â†“   \r\n   â”‚         â”‚   â””â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€&gt; Racq(a)\r\n   â”‚         â”‚         â”‚         â”‚   \r\n   V         V         V         V   \r\n```\r\n&lt;sub&gt;(BTW notice that this graph is different from `SC`: `Thread 1` and `Thread 4` see `Wrel(a)` and `Wrel(b)` in different orders. But edges point downwards nonetheless)&lt;/sub&gt;\r\n\r\nEdges from `Wrel(x)` to `Racq(x)` always point downwards because `Racq(x)` sees `Wrel(x)` and _everything before_ `Wrel(x)` as completed (See Notes in the end of the answer).  \r\n(In C++ spec this is called `synchronizes-with`, you can learn more about it [here](https://preshing.com/20130823/the-synchronizes-with-relation/).)\r\n\r\nAs a result, similarly to `SC` graph, all edges always point downwards  \r\n=&gt; the graph cannot have cycles  \r\n=&gt; it&#39;s always a DAG  \r\n=&gt; `happens-before` axioms cannot be violated\r\n\r\nActually `happens-before` produced by `release/acquire` atomics â€” is basically the original `happens-before` introduces by Leslie Lamport in [Time, Clocks and the Ordering of Events in a Distributed System](https://www.microsoft.com/en-us/research/publication/time-clocks-ordering-events-distributed-system/?from=https%3A%2F%2Fresearch.microsoft.com%2Fen-us%2Fum%2Fpeople%2Flamport%2Fpubs%2Ftime-clocks.pdf).  \r\nI really recommend to read the paper to everyone interested in `HB` â€” Lamport&#39;s explanations are short and clear, and the idea is really cool.\r\n\r\n---\r\n\r\nLet&#39;s also demonstrate with picture why cycles aren&#39;t possible.\r\n\r\nThis a what a cycle looks like:\r\n```none\r\n Thread1    Thread2    Thread3   \r\n =======    =======    =======   \r\n    â”‚          â”‚          â”‚      \r\n  Racq(a)&lt;â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”\r\n    â†“          â”‚          â”‚     â”‚\r\n  Wrel(b) â”    â”‚          â”‚     â”‚\r\n    â”‚     â”‚    â”‚          â”‚     â”‚\r\n    â”‚     â””&gt; Racq(b)      â”‚     â”‚\r\n    â”‚          â†“          â”‚     â”‚\r\n    â”‚        Wrel(c) â”    â”‚     â”‚\r\n    â”‚          â”‚     â”‚    â”‚     â”‚\r\n    â”‚          â”‚     â””&gt; Racq(c) â”‚\r\n    â”‚          â”‚          â†“     â”‚\r\n    â”‚          â”‚        Wrel(a) â”˜\r\n    â”‚          â”‚          â”‚      \r\n    V          V          V      \r\n```\r\nWithin each thread `happens-before` is the order of actions in the source code (it&#39; called `sequenced-before` in C++ and `program order` in Java).  \r\nClearly, no `HB` cycles are possible here.\r\n\r\nIt means that the edge which &quot;goes back&quot; and closes the cycle must be a `synchronizes-with` edge like the `Wrel(a)-&gt;Racq(a)` edge in the graph above.\r\n\r\nNotice a contradiction:\r\n- `Wrel(a)` must complete before `Racq(a)`, because `Racq(a)` reads the value written by `Wrel(a)`\r\n- `Racq(a)` must complete before `Wrel(a)`, because there is a chain `Racq(a)-&gt;Wrel(b)-&gt;Racq(b)-&gt;Wrel(c)-&gt;Racq(c)-&gt;Wrel(a)` where every `Wrel(x)` (and everything before it) completes before `Racq(x)` reads it.\r\n\r\nThis means the `Wrel(a)-&gt;Racq(a)` edge is not allowed =&gt; cycles aren&#39;t possible.\r\n\r\nIn terms of the C++ memory model it violates [_coherence requirements_](https://eel.is/c++draft/basic.exec#intro.races-14):\r\n&gt; The value of an atomic object M, as determined by evaluation B, shall be the value stored by some side effect A that modifies M, where B does not happen before A.\r\n\r\n---\r\n\r\nNotes.\r\n\r\nI stated that:\r\n&gt; `Racq(x)` sees `Wrel(x)` and _everything before_ `Wrel(x)` as completed\r\n\r\nbut in C++ standard that isn&#39;t stated directly.  \r\nInstead it has this:\r\n- `happens-before` is what defines what a read sees\r\n- relation between `Racq(x)` and `Wrel(x)` is called `synchronizes-with`\r\n- `happens-before` is built from `synchronizes-with` and huge amount of other rules and orders\r\n\r\nIt&#39;s possible to deduce my statement from the C++ standard, although it might not be easy. (That is why I recommend to read [this article](https://preshing.com/20130823/the-synchronizes-with-relation/) instead).\r\n\r\nI used the statement because it concisely describes what memory barrier instructions do, and this is how `happens-before` can be (and probably is) easily implemented .  \r\nSo often a memory barrier instruction is all we need to implement `happens-before` with all its mathematical properties.  \r\nFor an overview of these instructions on different CPUs I would recommend the section on that in [Memory Barriers: a Hardware View for Software Hackers](http://www.rdrop.com/users/paulmck/scalability/paper/whymb.2010.07.23a.pdf) by Paul E. McKenney.  \r\n(For example, memory barriers in PowerPC basically work the same as `release/acquire` atomics in C++)","title":"Can release+acquire break happens-before?","body":"<p><strong>Answer: no, release/acquire cannot break happens-before.</strong></p>\n<p>The proof is given by Nate Eldredge in <a href=\"https://stackoverflow.com/questions/69791898/can-releaseacquire-break-happens-before#comment123438560_69804962\">this comment</a>:</p>\n<blockquote>\n<p>Oh, indeed. And actually, I might see how to prove it. The HB relation is transitive by its construction. The sequencing relation is acyclic, so if there is a cycle in HB, it must contain at least one synchronizes-with step, which is, roughly, an acquire load L that takes its value from a release store S. But because of the cycle, L happens before S. Therefore by p14, L must take its value from some store other than S, contradiction. Not quite a proof because I have oversimplified the definition of synchronizes-with from atomics.order p2, but it's a start.</p>\n</blockquote>\n<p>I just would like to put it in a separate answer to make it easier for people to notice.</p>\n<p>Plus here are additional explanations from me (maybe it will make it easier to understand for some people).</p>\n<hr />\n<p>First of all, if we use only <code>release/acquire</code> atomics and non-atomic memory accesses, then <code>happens-before</code> is transitive (and acyclic) by construction.</p>\n<p>Similarly to <code>SC</code> graph, in case of <code>release/acquire</code> edges also always point downwards:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Thread1   Thread2   Thread3   Thread4\n=======   =======   =======   =======\n   â”‚         â”‚         â”‚         â”‚   \n   â”‚    â”Œ Wrel(a)â”     â”‚         â”‚   \nRacq(a)&lt;â”˜    â”‚   â”‚â”Œ Wrel(b)â”     â”‚   \n   â†“         â”‚   â”‚â”‚    â”‚   â””&gt; Racq(b)\nRacq(b)&lt;â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”‚â”˜    â”‚         â†“   \n   â”‚         â”‚   â””â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€&gt; Racq(a)\n   â”‚         â”‚         â”‚         â”‚   \n   V         V         V         V   \n</code></pre>\n<p><sub>(BTW notice that this graph is different from <code>SC</code>: <code>Thread 1</code> and <code>Thread 4</code> see <code>Wrel(a)</code> and <code>Wrel(b)</code> in different orders. But edges point downwards nonetheless)</sub></p>\n<p>Edges from <code>Wrel(x)</code> to <code>Racq(x)</code> always point downwards because <code>Racq(x)</code> sees <code>Wrel(x)</code> and <em>everything before</em> <code>Wrel(x)</code> as completed (See Notes in the end of the answer).<br />\n(In C++ spec this is called <code>synchronizes-with</code>, you can learn more about it <a href=\"https://preshing.com/20130823/the-synchronizes-with-relation/\" rel=\"nofollow noreferrer\">here</a>.)</p>\n<p>As a result, similarly to <code>SC</code> graph, all edges always point downwards<br />\n=&gt; the graph cannot have cycles<br />\n=&gt; it's always a DAG<br />\n=&gt; <code>happens-before</code> axioms cannot be violated</p>\n<p>Actually <code>happens-before</code> produced by <code>release/acquire</code> atomics â€” is basically the original <code>happens-before</code> introduces by Leslie Lamport in <a href=\"https://www.microsoft.com/en-us/research/publication/time-clocks-ordering-events-distributed-system/?from=https%3A%2F%2Fresearch.microsoft.com%2Fen-us%2Fum%2Fpeople%2Flamport%2Fpubs%2Ftime-clocks.pdf\" rel=\"nofollow noreferrer\">Time, Clocks and the Ordering of Events in a Distributed System</a>.<br />\nI really recommend to read the paper to everyone interested in <code>HB</code> â€” Lamport's explanations are short and clear, and the idea is really cool.</p>\n<hr />\n<p>Let's also demonstrate with picture why cycles aren't possible.</p>\n<p>This a what a cycle looks like:</p>\n<pre class=\"lang-none prettyprint-override\"><code> Thread1    Thread2    Thread3   \n =======    =======    =======   \n    â”‚          â”‚          â”‚      \n  Racq(a)&lt;â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”\n    â†“          â”‚          â”‚     â”‚\n  Wrel(b) â”    â”‚          â”‚     â”‚\n    â”‚     â”‚    â”‚          â”‚     â”‚\n    â”‚     â””&gt; Racq(b)      â”‚     â”‚\n    â”‚          â†“          â”‚     â”‚\n    â”‚        Wrel(c) â”    â”‚     â”‚\n    â”‚          â”‚     â”‚    â”‚     â”‚\n    â”‚          â”‚     â””&gt; Racq(c) â”‚\n    â”‚          â”‚          â†“     â”‚\n    â”‚          â”‚        Wrel(a) â”˜\n    â”‚          â”‚          â”‚      \n    V          V          V      \n</code></pre>\n<p>Within each thread <code>happens-before</code> is the order of actions in the source code (it' called <code>sequenced-before</code> in C++ and <code>program order</code> in Java).<br />\nClearly, no <code>HB</code> cycles are possible here.</p>\n<p>It means that the edge which &quot;goes back&quot; and closes the cycle must be a <code>synchronizes-with</code> edge like the <code>Wrel(a)-&gt;Racq(a)</code> edge in the graph above.</p>\n<p>Notice a contradiction:</p>\n<ul>\n<li><code>Wrel(a)</code> must complete before <code>Racq(a)</code>, because <code>Racq(a)</code> reads the value written by <code>Wrel(a)</code></li>\n<li><code>Racq(a)</code> must complete before <code>Wrel(a)</code>, because there is a chain <code>Racq(a)-&gt;Wrel(b)-&gt;Racq(b)-&gt;Wrel(c)-&gt;Racq(c)-&gt;Wrel(a)</code> where every <code>Wrel(x)</code> (and everything before it) completes before <code>Racq(x)</code> reads it.</li>\n</ul>\n<p>This means the <code>Wrel(a)-&gt;Racq(a)</code> edge is not allowed =&gt; cycles aren't possible.</p>\n<p>In terms of the C++ memory model it violates <a href=\"https://eel.is/c++draft/basic.exec#intro.races-14\" rel=\"nofollow noreferrer\"><em>coherence requirements</em></a>:</p>\n<blockquote>\n<p>The value of an atomic object M, as determined by evaluation B, shall be the value stored by some side effect A that modifies M, where B does not happen before A.</p>\n</blockquote>\n<hr />\n<p>Notes.</p>\n<p>I stated that:</p>\n<blockquote>\n<p><code>Racq(x)</code> sees <code>Wrel(x)</code> and <em>everything before</em> <code>Wrel(x)</code> as completed</p>\n</blockquote>\n<p>but in C++ standard that isn't stated directly.<br />\nInstead it has this:</p>\n<ul>\n<li><code>happens-before</code> is what defines what a read sees</li>\n<li>relation between <code>Racq(x)</code> and <code>Wrel(x)</code> is called <code>synchronizes-with</code></li>\n<li><code>happens-before</code> is built from <code>synchronizes-with</code> and huge amount of other rules and orders</li>\n</ul>\n<p>It's possible to deduce my statement from the C++ standard, although it might not be easy. (That is why I recommend to read <a href=\"https://preshing.com/20130823/the-synchronizes-with-relation/\" rel=\"nofollow noreferrer\">this article</a> instead).</p>\n<p>I used the statement because it concisely describes what memory barrier instructions do, and this is how <code>happens-before</code> can be (and probably is) easily implemented .<br />\nSo often a memory barrier instruction is all we need to implement <code>happens-before</code> with all its mathematical properties.<br />\nFor an overview of these instructions on different CPUs I would recommend the section on that in <a href=\"http://www.rdrop.com/users/paulmck/scalability/paper/whymb.2010.07.23a.pdf\" rel=\"nofollow noreferrer\">Memory Barriers: a Hardware View for Software Hackers</a> by Paul E. McKenney.<br />\n(For example, memory barriers in PowerPC basically work the same as <code>release/acquire</code> atomics in C++)</p>\n"},{"tags":[],"owner":{"account_id":23344030,"reputation":21,"user_id":17418587,"display_name":"user17418587"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1636982583,"creation_date":1636982583,"answer_id":69975068,"question_id":69791898,"body_markdown":"The following fragment of the [accepted answer](https://stackoverflow.com/a/69931961) has an error:\r\n&gt; ```none\r\n&gt;  Thread1   Thread2     Thread3 \r\n&gt;  =======   =======     ======= \r\n&gt;     â”‚         â”‚           â”‚    \r\n&gt;     â”‚     â”Œ Wrel(a)â”€â”€â”    â”‚    \r\n&gt;     â”‚     â”‚   â”‚      â”‚    â”‚    \r\n&gt;   Racq(a)&lt;â”˜   â”‚      â”‚    â”‚    \r\n&gt;     â”‚         â†“      â”‚    â”‚    \r\n&gt;     â”‚     â”Œ Wrel(b) â”â”‚    â”‚    \r\n&gt;     â†“     â”‚   â”‚     â”‚â”‚    â”‚    \r\n&gt;   Racq(b)&lt;â”˜   â”‚     â””â”€&gt; Racq(b)\r\n&gt;     â”‚         â”‚      â”‚    â†“    \r\n&gt;     â”‚         â”‚      â””&gt; Racq(a)\r\n&gt;     â”‚         â”‚           â”‚    \r\n&gt;     V         V           V    \r\n&gt; ```\r\n&gt; &lt;sub&gt;(BTW notice that this graph is different from `SC`: `Thread 1` and `Thread 3` see `Wrel(a)` and `Wrel(b)` in different orders. But edges point downwards nonetheless)&lt;/sub&gt;\r\n\r\n`Thread 1` and `Thread 3` can see `Wrel(a)` and `Wrel(b)` in different orders only when `Wrel(a)` and `Wrel(b)` are from different threads.\r\n\r\nThis is so called IRIW (independent reads of independent writes) test.\r\n\r\nSo the fragment should be changed to this:\r\n&gt; ```none\r\n&gt; Thread1   Thread2   Thread3   Thread4\r\n&gt; =======   =======   =======   =======\r\n&gt;    â”‚         â”‚         â”‚         â”‚   \r\n&gt;    â”‚    â”Œ Wrel(a)â”     â”‚         â”‚   \r\n&gt; Racq(a)&lt;â”˜    â”‚   â”‚â”Œ Wrel(b)â”     â”‚   \r\n&gt;    â†“         â”‚   â”‚â”‚    â”‚   â””&gt; Racq(b)\r\n&gt; Racq(b)&lt;â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”‚â”˜    â”‚         â†“   \r\n&gt;    â”‚         â”‚   â””â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€&gt; Racq(a)\r\n&gt;    â”‚         â”‚         â”‚         â”‚   \r\n&gt;    V         V         V         V   \r\n&gt; ```\r\n&gt; &lt;sub&gt;(BTW notice that this graph is different from `SC`: `Thread 1` and `Thread 4` see `Wrel(a)` and `Wrel(b)` in different orders. But edges point downwards nonetheless)&lt;/sub&gt;\r\n\r\n---\r\n\r\nBy the way, I could have made this a suggested edit for the accepted answer.\r\n\r\nI didn&#39;t do it because it&#39;s a pretty specialized topic, so the reviewer might not know all the nuances and details, and reject the edit simply because it&#39;s not obvious that it really fixes an error.\r\n\r\nBut I think this is an error worth mentioning and fixing. \r\nSo I put the fix in this answer, because:\r\n- people interested in this specific topic might see the fix\r\n- people might vote for this answer (and the fix) =&gt; if there will be enough votes, then this will indicate that the fix is correct =&gt; the fix will be incorporated into the accepted answer by moderators or people with enough reputation","title":"Can release+acquire break happens-before?","body":"<p>The following fragment of the <a href=\"https://stackoverflow.com/a/69931961\">accepted answer</a> has an error:</p>\n<blockquote>\n<pre class=\"lang-none prettyprint-override\"><code> Thread1   Thread2     Thread3 \n =======   =======     ======= \n    â”‚         â”‚           â”‚    \n    â”‚     â”Œ Wrel(a)â”€â”€â”    â”‚    \n    â”‚     â”‚   â”‚      â”‚    â”‚    \n  Racq(a)&lt;â”˜   â”‚      â”‚    â”‚    \n    â”‚         â†“      â”‚    â”‚    \n    â”‚     â”Œ Wrel(b) â”â”‚    â”‚    \n    â†“     â”‚   â”‚     â”‚â”‚    â”‚    \n  Racq(b)&lt;â”˜   â”‚     â””â”€&gt; Racq(b)\n    â”‚         â”‚      â”‚    â†“    \n    â”‚         â”‚      â””&gt; Racq(a)\n    â”‚         â”‚           â”‚    \n    V         V           V    \n</code></pre>\n<p><sub>(BTW notice that this graph is different from <code>SC</code>: <code>Thread 1</code> and <code>Thread 3</code> see <code>Wrel(a)</code> and <code>Wrel(b)</code> in different orders. But edges point downwards nonetheless)</sub></p>\n</blockquote>\n<p><code>Thread 1</code> and <code>Thread 3</code> can see <code>Wrel(a)</code> and <code>Wrel(b)</code> in different orders only when <code>Wrel(a)</code> and <code>Wrel(b)</code> are from different threads.</p>\n<p>This is so called IRIW (independent reads of independent writes) test.</p>\n<p>So the fragment should be changed to this:</p>\n<blockquote>\n<pre class=\"lang-none prettyprint-override\"><code>Thread1   Thread2   Thread3   Thread4\n=======   =======   =======   =======\n   â”‚         â”‚         â”‚         â”‚   \n   â”‚    â”Œ Wrel(a)â”     â”‚         â”‚   \nRacq(a)&lt;â”˜    â”‚   â”‚â”Œ Wrel(b)â”     â”‚   \n   â†“         â”‚   â”‚â”‚    â”‚   â””&gt; Racq(b)\nRacq(b)&lt;â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”‚â”˜    â”‚         â†“   \n   â”‚         â”‚   â””â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€&gt; Racq(a)\n   â”‚         â”‚         â”‚         â”‚   \n   V         V         V         V   \n</code></pre>\n<p><sub>(BTW notice that this graph is different from <code>SC</code>: <code>Thread 1</code> and <code>Thread 4</code> see <code>Wrel(a)</code> and <code>Wrel(b)</code> in different orders. But edges point downwards nonetheless)</sub></p>\n</blockquote>\n<hr />\n<p>By the way, I could have made this a suggested edit for the accepted answer.</p>\n<p>I didn't do it because it's a pretty specialized topic, so the reviewer might not know all the nuances and details, and reject the edit simply because it's not obvious that it really fixes an error.</p>\n<p>But I think this is an error worth mentioning and fixing.\nSo I put the fix in this answer, because:</p>\n<ul>\n<li>people interested in this specific topic might see the fix</li>\n<li>people might vote for this answer (and the fix) =&gt; if there will be enough votes, then this will indicate that the fix is correct =&gt; the fix will be incorporated into the accepted answer by moderators or people with enough reputation</li>\n</ul>\n"}],"owner":{"display_name":"user17295426"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":571,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"accepted_answer_id":69931961,"answer_count":4,"score":5,"last_activity_date":1683738111,"creation_date":1635730686,"question_id":69791898,"body_markdown":"Many programming languages today have `happens-before` relation and `release+acquire` synchronization operations.\r\n\r\nSome of these programming languages:\r\n- C/C++11: [happens-before](https://en.cppreference.com/w/cpp/atomic/memory_order#Happens-before), [release+acquire](https://en.cppreference.com/w/cpp/atomic/memory_order#Release-Acquire_ordering)\r\n- [Rust](https://doc.rust-lang.org/std/sync/atomic/) and [Swift](https://github.com/apple/swift-evolution/blob/master/proposals/0282-atomics.md) adopted the C/C++ memory model in its entirety â€” so they have that too.\r\n- Java: [happens-before](https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.4.5), [release](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/invoke/VarHandle.html#setRelease(java.lang.Object...))+[acquire](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/invoke/VarHandle.html#getAcquire(java.lang.Object...)).\r\n\r\nI would like to know if `release+acquire` can violate `happens-before`:\r\n - if it&#39;s possible, then I would like to see an example\r\n - if it&#39;s impossible, then I would like to get simple and clear explanations why\r\n\r\n---\r\n##### What is `release+acquire` and `happens-before` #####\r\n\r\n`Release/acquire` establishes `happens-before` relation between different threads: in other words everything before `release` in `Thread 1` is guaranteed to be visible in `Thread 2` after `acquire`:\r\n\r\n```cpp\r\n \\     Thread 1                        /            \r\n  \\    --------                       /             \r\n   \\   x = 1                         / Everything   \r\n    \\  y = 2                        /    here...    \r\n     \\ write-release(ready = true) /                \r\n      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 \r\n                   |                                \r\n                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” (happens-before) \r\n                                 V                  \r\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     \r\n                   / Thread 2                  \\    \r\n ...is visible to /  --------                   \\   \r\n    everything   /   read-acquire(ready == true) \\  \r\n     here       /    assert(x == 1)               \\ \r\n               /     assert(y == 2)                \\\r\n```\r\n\r\nMore than that, `happens-before` is a [strict partial order](https://en.wikipedia.org/wiki/Strict_partial_order#Strict_partial_order).  \r\nThis means it is:\r\n- transitive: `Thread 2` is guaranteed to see not only writes made by `Thread 1`, but also all writes by other threads that `Thread 1` saw\r\n- asymmetric: either `a` happens-before `b`, or `b` happens-before `a`, both isn&#39;t allowed\r\n\r\n---\r\n##### Why I think that `release/acquire` might break `happens-before` #####\r\n\r\nAs we know from IRIW litmus test, `release/acquire` could cause two threads to see writes from different threads in different order (for C++ see also the last example [here](https://en.cppreference.com/w/cpp/atomic/memory_order), and [these](https://gcc.gnu.org/wiki/Atomic/GCCMM/AtomicSync#Acquire.2FRelease) [two](https://gcc.gnu.org/wiki/Atomic/GCCMM/AtomicSync#Overall_Summary) examples from gcc wiki):\r\n```cpp\r\n// Thread 1\r\nx.store(1, memory_order_release);\r\n// Thread 2\r\ny.store(1, memory_order_release);\r\n// Thread 3\r\nassert(x.load(memory_order_acquire) == 1 &amp;&amp; y.load(memory_order_acquire) == 0)\r\n// Thread 4\r\nassert(y.load(memory_order_acquire) == 1 &amp;&amp; x.load(memory_order_acquire) == 0)\r\n```\r\nHere both `assert`s can pass, which means that `Thread 3` and `Thread 4` see writes to `x` and `y` in different order.\r\n\r\n&lt;del&gt;As I understand, if it were ordinary variables, then this would violate the asymmetry property of happens-before.\r\nBut because x and y are atomics it&#39;s OK.\r\n(BTW I am not sure about that)&lt;/del&gt;  \r\nNate Eldredge [demonstrated in his answer](https://stackoverflow.com/a/69804962) that this IRIW example is OK.\r\n\r\nBut I still have a sneaking suspicion that there might be something similar to IRIW which would cause `Thread 3` and `Thread 4` to see regular writes to happen-before in different order â€” this would break happens-before (it wouldn&#39;t be transitive anymore).\r\n\r\n---\r\n\r\n##### Note1 #####\r\n\r\nIn [cppreference](https://en.cppreference.com/w/cpp/atomic/memory_order) there is also this quote:\r\n&gt; The implementation is required to ensure that the happens-before relation is acyclic, by introducing additional synchronization if necessary (it can only be necessary if a consume operation is involved, see Batty et al) \r\n\r\nThe quote hints that there might be cases when `happens-before` is violated and which require additional synchronization (&quot;acyclic&quot; means that happens-before forms a [directed acyclic graph](https://en.wikipedia.org/wiki/Directed_acyclic_graph), which is equivalent to saying &quot;strict partial order&quot;).\r\n\r\nIf it&#39;s possible I would like to know what are these cases.\r\n\r\n---\r\n\r\n##### Note2 #####\r\n\r\nSince java allows data races, I&#39;m also interested in cases when `happens-before` is violated only in presence of data races.\r\n\r\n---\r\n\r\n##### Edit 1 (03 Nov 2021) #####\r\n\r\nTo give you an example, here is a explanation why sequentially consistent (SC) atomics cannot violate `happens-before`.  \r\n(A similar explanation for release/acquire atomics would be an answer to my question).\r\n\r\nBy &quot;violate `happens-before`&quot; I mean &quot;to violate axioms of `happens-before`, which is a [strict partial order](https://en.wikipedia.org/wiki/Strict_partial_order#Strict_partial_order)&quot;.\r\n\r\nStrict partial orders [correspond directly](https://en.wikipedia.org/wiki/Strict_partial_order#Directed_acyclic_graphs) to [directed acyclic graphs (DAGs)](https://en.wikipedia.org/wiki/Directed_acyclic_graph).\r\n\r\nHere is an example of a DAG from wiki (note that it has no cycles):  \r\n![DAG](https://upload.wikimedia.org/wikipedia/commons/f/fe/Tred-G.svg)\r\n\r\nLet&#39;s show that with SC atomics `happens-before` graph stays acyclic.\r\n\r\nRemember that SC atomics happen in a global order (the same for all threads), and:\r\n* the order is consistent with the order of actions within each thread\r\n* every SC atomic read sees the latest SC atomic write in this total order to the same variable\r\n\r\nLook at this `happens-before` graph:\r\n\r\n```none\r\n Thread1  Thread2  Thread3 \r\n =======  =======  ======= \r\n    â”‚        â”‚        â”‚    \r\n   W(x)      â”‚        â”‚    \r\n    â†“        â”‚        â”‚    \r\n   Sw(a) â”   â”‚       W(y)  \r\n    â”‚    â”‚   â”‚        â†“    \r\n    â”‚    â””&gt; Sr(a)  â”Œ Sw(b) \r\n    â”‚        â†“     â”‚  â”‚    \r\n    â”‚       Sr(b)&lt;â”€â”˜  â”‚    \r\n    â”‚        â†“        â”‚    \r\n    â”‚       R(x)      â”‚    \r\n    â”‚        â†“        â”‚    \r\n    â”‚       R(y)      â”‚    \r\n    â”‚        â”‚        â”‚    \r\n    V        V        V    \r\n```\r\nOn the graph:\r\n- time flows downwards\r\n- `W(x)` and `R(x)` are regular actions: write and read of `x`\r\n- `Sw(a)` and `Sr(a)` are SC atomics: write and read of `a`\r\n- within each thread actions happen in a program order (aka `sequenced-before order` in C++): in the order they go in the code\r\n- between threads `happens-before` is established by SC atomics\r\n\r\nNote that arrows on the graph always go downwards  \r\n =&gt; the graph cannot have cycles  \r\n =&gt; it&#39;s always a DAG  \r\n =&gt; `happens-before` axioms cannot be violated\r\n\r\nThe same proof doesn&#39;t work for `release/acquire` atomics because (as far as I understand) they don&#39;t happen in a global order =&gt; a HB arrow between `Sw(a)` and `Sr(a)` might go upwards =&gt; a cycle is possible. (I&#39;m not sure about that)","title":"Can release+acquire break happens-before?","body":"<p>Many programming languages today have <code>happens-before</code> relation and <code>release+acquire</code> synchronization operations.</p>\n<p>Some of these programming languages:</p>\n<ul>\n<li>C/C++11: <a href=\"https://en.cppreference.com/w/cpp/atomic/memory_order#Happens-before\" rel=\"nofollow noreferrer\">happens-before</a>, <a href=\"https://en.cppreference.com/w/cpp/atomic/memory_order#Release-Acquire_ordering\" rel=\"nofollow noreferrer\">release+acquire</a></li>\n<li><a href=\"https://doc.rust-lang.org/std/sync/atomic/\" rel=\"nofollow noreferrer\">Rust</a> and <a href=\"https://github.com/apple/swift-evolution/blob/master/proposals/0282-atomics.md\" rel=\"nofollow noreferrer\">Swift</a> adopted the C/C++ memory model in its entirety â€” so they have that too.</li>\n<li>Java: <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.4.5\" rel=\"nofollow noreferrer\">happens-before</a>, <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/invoke/VarHandle.html#setRelease(java.lang.Object...)\" rel=\"nofollow noreferrer\">release</a>+<a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/invoke/VarHandle.html#getAcquire(java.lang.Object...)\" rel=\"nofollow noreferrer\">acquire</a>.</li>\n</ul>\n<p>I would like to know if <code>release+acquire</code> can violate <code>happens-before</code>:</p>\n<ul>\n<li>if it's possible, then I would like to see an example</li>\n<li>if it's impossible, then I would like to get simple and clear explanations why</li>\n</ul>\n<hr />\n<h5>What is <code>release+acquire</code> and <code>happens-before</code></h5>\n<p><code>Release/acquire</code> establishes <code>happens-before</code> relation between different threads: in other words everything before <code>release</code> in <code>Thread 1</code> is guaranteed to be visible in <code>Thread 2</code> after <code>acquire</code>:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code> \\     Thread 1                        /            \n  \\    --------                       /             \n   \\   x = 1                         / Everything   \n    \\  y = 2                        /    here...    \n     \\ write-release(ready = true) /                \n      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 \n                   |                                \n                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” (happens-before) \n                                 V                  \n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     \n                   / Thread 2                  \\    \n ...is visible to /  --------                   \\   \n    everything   /   read-acquire(ready == true) \\  \n     here       /    assert(x == 1)               \\ \n               /     assert(y == 2)                \\\n</code></pre>\n<p>More than that, <code>happens-before</code> is a <a href=\"https://en.wikipedia.org/wiki/Strict_partial_order#Strict_partial_order\" rel=\"nofollow noreferrer\">strict partial order</a>.<br />\nThis means it is:</p>\n<ul>\n<li>transitive: <code>Thread 2</code> is guaranteed to see not only writes made by <code>Thread 1</code>, but also all writes by other threads that <code>Thread 1</code> saw</li>\n<li>asymmetric: either <code>a</code> happens-before <code>b</code>, or <code>b</code> happens-before <code>a</code>, both isn't allowed</li>\n</ul>\n<hr />\n<h5>Why I think that <code>release/acquire</code> might break <code>happens-before</code></h5>\n<p>As we know from IRIW litmus test, <code>release/acquire</code> could cause two threads to see writes from different threads in different order (for C++ see also the last example <a href=\"https://en.cppreference.com/w/cpp/atomic/memory_order\" rel=\"nofollow noreferrer\">here</a>, and <a href=\"https://gcc.gnu.org/wiki/Atomic/GCCMM/AtomicSync#Acquire.2FRelease\" rel=\"nofollow noreferrer\">these</a> <a href=\"https://gcc.gnu.org/wiki/Atomic/GCCMM/AtomicSync#Overall_Summary\" rel=\"nofollow noreferrer\">two</a> examples from gcc wiki):</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>// Thread 1\nx.store(1, memory_order_release);\n// Thread 2\ny.store(1, memory_order_release);\n// Thread 3\nassert(x.load(memory_order_acquire) == 1 &amp;&amp; y.load(memory_order_acquire) == 0)\n// Thread 4\nassert(y.load(memory_order_acquire) == 1 &amp;&amp; x.load(memory_order_acquire) == 0)\n</code></pre>\n<p>Here both <code>assert</code>s can pass, which means that <code>Thread 3</code> and <code>Thread 4</code> see writes to <code>x</code> and <code>y</code> in different order.</p>\n<p><del>As I understand, if it were ordinary variables, then this would violate the asymmetry property of happens-before.\nBut because x and y are atomics it's OK.\n(BTW I am not sure about that)</del><br />\nNate Eldredge <a href=\"https://stackoverflow.com/a/69804962\">demonstrated in his answer</a> that this IRIW example is OK.</p>\n<p>But I still have a sneaking suspicion that there might be something similar to IRIW which would cause <code>Thread 3</code> and <code>Thread 4</code> to see regular writes to happen-before in different order â€” this would break happens-before (it wouldn't be transitive anymore).</p>\n<hr />\n<h5>Note1</h5>\n<p>In <a href=\"https://en.cppreference.com/w/cpp/atomic/memory_order\" rel=\"nofollow noreferrer\">cppreference</a> there is also this quote:</p>\n<blockquote>\n<p>The implementation is required to ensure that the happens-before relation is acyclic, by introducing additional synchronization if necessary (it can only be necessary if a consume operation is involved, see Batty et al)</p>\n</blockquote>\n<p>The quote hints that there might be cases when <code>happens-before</code> is violated and which require additional synchronization (&quot;acyclic&quot; means that happens-before forms a <a href=\"https://en.wikipedia.org/wiki/Directed_acyclic_graph\" rel=\"nofollow noreferrer\">directed acyclic graph</a>, which is equivalent to saying &quot;strict partial order&quot;).</p>\n<p>If it's possible I would like to know what are these cases.</p>\n<hr />\n<h5>Note2</h5>\n<p>Since java allows data races, I'm also interested in cases when <code>happens-before</code> is violated only in presence of data races.</p>\n<hr />\n<h5>Edit 1 (03 Nov 2021)</h5>\n<p>To give you an example, here is a explanation why sequentially consistent (SC) atomics cannot violate <code>happens-before</code>.<br />\n(A similar explanation for release/acquire atomics would be an answer to my question).</p>\n<p>By &quot;violate <code>happens-before</code>&quot; I mean &quot;to violate axioms of <code>happens-before</code>, which is a <a href=\"https://en.wikipedia.org/wiki/Strict_partial_order#Strict_partial_order\" rel=\"nofollow noreferrer\">strict partial order</a>&quot;.</p>\n<p>Strict partial orders <a href=\"https://en.wikipedia.org/wiki/Strict_partial_order#Directed_acyclic_graphs\" rel=\"nofollow noreferrer\">correspond directly</a> to <a href=\"https://en.wikipedia.org/wiki/Directed_acyclic_graph\" rel=\"nofollow noreferrer\">directed acyclic graphs (DAGs)</a>.</p>\n<p>Here is an example of a DAG from wiki (note that it has no cycles):<br />\n<img src=\"https://upload.wikimedia.org/wikipedia/commons/f/fe/Tred-G.svg\" alt=\"DAG\" /></p>\n<p>Let's show that with SC atomics <code>happens-before</code> graph stays acyclic.</p>\n<p>Remember that SC atomics happen in a global order (the same for all threads), and:</p>\n<ul>\n<li>the order is consistent with the order of actions within each thread</li>\n<li>every SC atomic read sees the latest SC atomic write in this total order to the same variable</li>\n</ul>\n<p>Look at this <code>happens-before</code> graph:</p>\n<pre class=\"lang-none prettyprint-override\"><code> Thread1  Thread2  Thread3 \n =======  =======  ======= \n    â”‚        â”‚        â”‚    \n   W(x)      â”‚        â”‚    \n    â†“        â”‚        â”‚    \n   Sw(a) â”   â”‚       W(y)  \n    â”‚    â”‚   â”‚        â†“    \n    â”‚    â””&gt; Sr(a)  â”Œ Sw(b) \n    â”‚        â†“     â”‚  â”‚    \n    â”‚       Sr(b)&lt;â”€â”˜  â”‚    \n    â”‚        â†“        â”‚    \n    â”‚       R(x)      â”‚    \n    â”‚        â†“        â”‚    \n    â”‚       R(y)      â”‚    \n    â”‚        â”‚        â”‚    \n    V        V        V    \n</code></pre>\n<p>On the graph:</p>\n<ul>\n<li>time flows downwards</li>\n<li><code>W(x)</code> and <code>R(x)</code> are regular actions: write and read of <code>x</code></li>\n<li><code>Sw(a)</code> and <code>Sr(a)</code> are SC atomics: write and read of <code>a</code></li>\n<li>within each thread actions happen in a program order (aka <code>sequenced-before order</code> in C++): in the order they go in the code</li>\n<li>between threads <code>happens-before</code> is established by SC atomics</li>\n</ul>\n<p>Note that arrows on the graph always go downwards<br />\n=&gt; the graph cannot have cycles<br />\n=&gt; it's always a DAG<br />\n=&gt; <code>happens-before</code> axioms cannot be violated</p>\n<p>The same proof doesn't work for <code>release/acquire</code> atomics because (as far as I understand) they don't happen in a global order =&gt; a HB arrow between <code>Sw(a)</code> and <code>Sr(a)</code> might go upwards =&gt; a cycle is possible. (I'm not sure about that)</p>\n"},{"tags":["java","spring","junit","spring-test"],"comments":[{"owner":{"account_id":206751,"reputation":1117,"user_id":456228,"accept_rate":67,"display_name":"Martin Podval"},"score":1,"creation_date":1447081838,"post_id":28560734,"comment_id":54998502,"body_markdown":"Here is another - and up to date - solution http://blog.codeleak.pl/2015/08/parameterized-integration-tests-with.html","body":"Here is another - and up to date - solution <a href=\"http://blog.codeleak.pl/2015/08/parameterized-integration-tests-with.html\" rel=\"nofollow noreferrer\">blog.codeleak.pl/2015/08/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":7258992,"reputation":2411,"user_id":5536516,"accept_rate":86,"display_name":"nyg"},"score":0,"creation_date":1460116766,"post_id":28561473,"comment_id":60605535,"body_markdown":"Great, and with the first way you can then just use `@Autowired` on a component and it will be injected correctly. Also, I could use `@SpringApplicationConfiguration` instead of `@ContextConfiguration` and it worked fine, not sure what the difference is...","body":"Great, and with the first way you can then just use <code>@Autowired</code> on a component and it will be injected correctly. Also, I could use <code>@SpringApplicationConfiguration</code> instead of <code>@ContextConfiguration</code> and it worked fine, not sure what the difference is..."},{"owner":{"account_id":1883670,"reputation":3650,"user_id":1703313,"accept_rate":67,"display_name":"Francois Bourgeois"},"score":2,"creation_date":1533560296,"post_id":28561473,"comment_id":90377348,"body_markdown":"Your first link seems to be dead :-(","body":"Your first link seems to be dead :-("},{"owner":{"account_id":3287432,"reputation":465,"user_id":2766543,"display_name":"Rami Yampolsky"},"score":0,"creation_date":1548362058,"post_id":28561473,"comment_id":95524890,"body_markdown":"@mavarazy I&#39;ve tried the first solution: Works! Thank you so much.","body":"@mavarazy I&#39;ve tried the first solution: Works! Thank you so much."}],"tags":[],"owner":{"account_id":279913,"reputation":7622,"user_id":575338,"accept_rate":59,"display_name":"mavarazy"},"comment_count":3,"down_vote_count":1,"up_vote_count":39,"is_accepted":true,"score":38,"last_activity_date":1424176004,"creation_date":1424176004,"answer_id":28561473,"question_id":28560734,"body_markdown":"There are at least 2 options to do that:\r\n\r\n 1. Following http://www.blog.project13.pl/index.php/coding/1077/runwith-junit4-with-both-springjunit4classrunner-and-parameterized/\r\n\r\n    Your test needs to look something like this:\r\n\r\n         @RunWith(Parameterized.class)\r\n         @ContextConfiguration(classes = {ApplicationConfigTest.class})\r\n         public class ServiceTest {\r\n \r\n             private TestContextManager testContextManager;\r\n \r\n             @Before\r\n             public void setUpContext() throws Exception {\r\n                 //this is where the magic happens, we actually do &quot;by hand&quot; what the spring runner would do for us,\r\n                // read the JavaDoc for the class bellow to know exactly what it does, the method names are quite accurate though\r\n               this.testContextManager = new TestContextManager(getClass());\r\n               this.testContextManager.prepareTestInstance(this);\r\n             }\r\n             ...\r\n         }\r\n\r\n\r\n 2. There is  a github project https://github.com/mmichaelis/spring-aware-rule, which builds on previous blog, but adds support in a generalized way\r\n\r\n        @SuppressWarnings(&quot;InstanceMethodNamingConvention&quot;)\r\n        @ContextConfiguration(classes = {ServiceTest.class})\r\n        public class SpringAwareTest {\r\n\r\n            @ClassRule\r\n            public static final SpringAware SPRING_AWARE = SpringAware.forClass(SpringAwareTest.class);\r\n\r\n            @Rule\r\n            public TestRule springAwareMethod = SPRING_AWARE.forInstance(this);\r\n\r\n            @Rule\r\n            public TestName testName = new TestName();\r\n\r\n            ...\r\n        }\r\n\r\nSo you can have a basic class implementing one of the approaches, and all tests inheriting from it.","title":"How to run JUnit SpringJUnit4ClassRunner with Parametrized?","body":"<p>There are at least 2 options to do that:</p>\n\n<ol>\n<li><p>Following <a href=\"http://www.blog.project13.pl/index.php/coding/1077/runwith-junit4-with-both-springjunit4classrunner-and-parameterized/\">http://www.blog.project13.pl/index.php/coding/1077/runwith-junit4-with-both-springjunit4classrunner-and-parameterized/</a></p>\n\n<p>Your test needs to look something like this:</p>\n\n<pre><code> @RunWith(Parameterized.class)\n @ContextConfiguration(classes = {ApplicationConfigTest.class})\n public class ServiceTest {\n\n     private TestContextManager testContextManager;\n\n     @Before\n     public void setUpContext() throws Exception {\n         //this is where the magic happens, we actually do \"by hand\" what the spring runner would do for us,\n        // read the JavaDoc for the class bellow to know exactly what it does, the method names are quite accurate though\n       this.testContextManager = new TestContextManager(getClass());\n       this.testContextManager.prepareTestInstance(this);\n     }\n     ...\n }\n</code></pre></li>\n<li><p>There is  a github project <a href=\"https://github.com/mmichaelis/spring-aware-rule\">https://github.com/mmichaelis/spring-aware-rule</a>, which builds on previous blog, but adds support in a generalized way</p>\n\n<pre><code>@SuppressWarnings(\"InstanceMethodNamingConvention\")\n@ContextConfiguration(classes = {ServiceTest.class})\npublic class SpringAwareTest {\n\n    @ClassRule\n    public static final SpringAware SPRING_AWARE = SpringAware.forClass(SpringAwareTest.class);\n\n    @Rule\n    public TestRule springAwareMethod = SPRING_AWARE.forInstance(this);\n\n    @Rule\n    public TestName testName = new TestName();\n\n    ...\n}\n</code></pre></li>\n</ol>\n\n<p>So you can have a basic class implementing one of the approaches, and all tests inheriting from it.</p>\n"},{"comments":[{"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"score":2,"creation_date":1519842085,"post_id":37869366,"comment_id":85077158,"body_markdown":"@keyoxy Is it possible to run all tests in parallel?","body":"@keyoxy Is it possible to run all tests in parallel?"},{"owner":{"account_id":12250741,"reputation":3899,"user_id":9047701,"display_name":"Tomas G."},"score":0,"creation_date":1663841598,"post_id":37869366,"comment_id":130336297,"body_markdown":"can you add more explanation ? Why do we need these methods ?","body":"can you add more explanation ? Why do we need these methods ?"}],"tags":[],"owner":{"account_id":926602,"reputation":4453,"user_id":957280,"accept_rate":80,"display_name":"keyoxy"},"comment_count":2,"down_vote_count":0,"up_vote_count":86,"is_accepted":false,"score":86,"last_activity_date":1466111296,"creation_date":1466111296,"answer_id":37869366,"question_id":28560734,"body_markdown":"You can use SpringClassRule and SpringMethodRule - supplied with Spring\r\n\r\n    import org.junit.ClassRule;\r\n    import org.junit.Rule;\r\n    import org.junit.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.junit.runners.Parameterized;\r\n    import org.springframework.test.context.junit4.rules.SpringClassRule;\r\n    import org.springframework.test.context.junit4.rules.SpringMethodRule;\r\n\r\n    @RunWith(Parameterized.class)\r\n    @ContextConfiguration(...)\r\n    public class MyTest {\r\n\r\n        @ClassRule\r\n        public static final SpringClassRule SPRING_CLASS_RULE = new SpringClassRule();\r\n\r\n        @Rule\r\n        public final SpringMethodRule springMethodRule = new SpringMethodRule();\r\n\r\n        ...","title":"How to run JUnit SpringJUnit4ClassRunner with Parametrized?","body":"<p>You can use SpringClassRule and SpringMethodRule - supplied with Spring</p>\n\n<pre><code>import org.junit.ClassRule;\nimport org.junit.Rule;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.junit.runners.Parameterized;\nimport org.springframework.test.context.junit4.rules.SpringClassRule;\nimport org.springframework.test.context.junit4.rules.SpringMethodRule;\n\n@RunWith(Parameterized.class)\n@ContextConfiguration(...)\npublic class MyTest {\n\n    @ClassRule\n    public static final SpringClassRule SPRING_CLASS_RULE = new SpringClassRule();\n\n    @Rule\n    public final SpringMethodRule springMethodRule = new SpringMethodRule();\n\n    ...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3060064,"reputation":106,"user_id":2592926,"display_name":"Arnor"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1533909762,"creation_date":1533909762,"answer_id":51788242,"question_id":28560734,"body_markdown":"There is another solution with JUnit 4.12 without the need of Spring 4.2+.\r\n\r\nJUnit 4.12 introduces [ParametersRunnerFactory][1] which allow to combine parameterized test and Spring injection.\r\n\r\n    public class SpringParametersRunnerFactory implements ParametersRunnerFactory {\r\n    @Override\r\n      public Runner createRunnerForTestWithParameters(TestWithParameters test) throws InitializationError {\r\n        final BlockJUnit4ClassRunnerWithParameters runnerWithParameters = new BlockJUnit4ClassRunnerWithParameters(test);\r\n        return new SpringJUnit4ClassRunner(test.getTestClass().getJavaClass()) {\r\n          @Override\r\n          protected Object createTest() throws Exception {\r\n            final Object testInstance = runnerWithParameters.createTest();\r\n            getTestContextManager().prepareTestInstance(testInstance);\r\n            return testInstance;\r\n          }\r\n        };\r\n      }\r\n    }\r\n\r\nThe factory can be added to test class to give full Spring support like [test transaction][2], [reinit dirty context][3] and [servlet test][4].\r\n\r\n    @UseParametersRunnerFactory(SpringParametersRunnerFactory.class)\r\n    @RunWith(Parameterized.class)\r\n    @ContextConfiguration(locations = {&quot;/test-context.xml&quot;, &quot;/mvc-context.xml&quot;})\r\n    @WebAppConfiguration\r\n    @Transactional\r\n    @TransactionConfiguration\r\n    public class MyTransactionalTest {\r\n\r\n      @Autowired\r\n      private WebApplicationContext context;\r\n\r\n      ...\r\n    }\r\n\r\nIf you need Spring context inside [@Parameters][5] static method to provide parameters to test instances, please see my answer here [How can I use the Parameterized JUnit test runner with a field that&#39;s injected using Spring?][6].\r\n\r\n\r\n  [1]: https://junit.org/junit4/javadoc/4.12/org/junit/runners/parameterized/ParametersRunnerFactory.html\r\n  [2]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/context/transaction/TransactionalTestExecutionListener.html\r\n  [3]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/annotation/DirtiesContext.html\r\n  [4]: https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/context/web/ServletTestExecutionListener.html\r\n  [5]: https://junit.org/junit4/javadoc/4.12/org/junit/runners/Parameterized.Parameters.html\r\n  [6]: https://stackoverflow.com/a/51677041/2592926","title":"How to run JUnit SpringJUnit4ClassRunner with Parametrized?","body":"<p>There is another solution with JUnit 4.12 without the need of Spring 4.2+.</p>\n\n<p>JUnit 4.12 introduces <a href=\"https://junit.org/junit4/javadoc/4.12/org/junit/runners/parameterized/ParametersRunnerFactory.html\" rel=\"nofollow noreferrer\">ParametersRunnerFactory</a> which allow to combine parameterized test and Spring injection.</p>\n\n<pre><code>public class SpringParametersRunnerFactory implements ParametersRunnerFactory {\n@Override\n  public Runner createRunnerForTestWithParameters(TestWithParameters test) throws InitializationError {\n    final BlockJUnit4ClassRunnerWithParameters runnerWithParameters = new BlockJUnit4ClassRunnerWithParameters(test);\n    return new SpringJUnit4ClassRunner(test.getTestClass().getJavaClass()) {\n      @Override\n      protected Object createTest() throws Exception {\n        final Object testInstance = runnerWithParameters.createTest();\n        getTestContextManager().prepareTestInstance(testInstance);\n        return testInstance;\n      }\n    };\n  }\n}\n</code></pre>\n\n<p>The factory can be added to test class to give full Spring support like <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/context/transaction/TransactionalTestExecutionListener.html\" rel=\"nofollow noreferrer\">test transaction</a>, <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/annotation/DirtiesContext.html\" rel=\"nofollow noreferrer\">reinit dirty context</a> and <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/context/web/ServletTestExecutionListener.html\" rel=\"nofollow noreferrer\">servlet test</a>.</p>\n\n<pre><code>@UseParametersRunnerFactory(SpringParametersRunnerFactory.class)\n@RunWith(Parameterized.class)\n@ContextConfiguration(locations = {\"/test-context.xml\", \"/mvc-context.xml\"})\n@WebAppConfiguration\n@Transactional\n@TransactionConfiguration\npublic class MyTransactionalTest {\n\n  @Autowired\n  private WebApplicationContext context;\n\n  ...\n}\n</code></pre>\n\n<p>If you need Spring context inside <a href=\"https://junit.org/junit4/javadoc/4.12/org/junit/runners/Parameterized.Parameters.html\" rel=\"nofollow noreferrer\">@Parameters</a> static method to provide parameters to test instances, please see my answer here <a href=\"https://stackoverflow.com/a/51677041/2592926\">How can I use the Parameterized JUnit test runner with a field that's injected using Spring?</a>.</p>\n"},{"tags":[],"owner":{"account_id":6615281,"reputation":1826,"user_id":5108777,"display_name":"manuelvigarcia"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1538632287,"creation_date":1538632287,"answer_id":52639854,"question_id":28560734,"body_markdown":"Handle application context by yourself\r\n===\r\nWhat worked for me was having a `@RunWith(Parameterized.class)` test class that managed the application context &quot;by hand&quot;.\r\n\r\nTo do that I created an application context with the same string collection that would be in the `@ContextConfiguration`. So instead of having\r\n\r\n    @ContextConfiguration(locations = { &quot;classpath:spring-config-file1.xml&quot;,\r\n        &quot;classpath:spring-config-file2.xml&quot; })\r\n\r\nI had\r\n\r\n    ApplicationContext ctx = new ClassPathXmlApplicationContext(new String[] {\r\n                &quot;classpath:spring-config-file1.xml&quot;, &quot;classpath:spring-config-file2.xml&quot;  });\r\n\r\nAnd for each @Autowired I needed I fetched it by hand from the created context:\r\n\r\n    SomeClass someBean = ctx.getBean(&quot;someClassAutowiredBean&quot;, SomeClass.class);\r\n\r\nDo not forget to close the context at the end:\r\n\r\n    ((ClassPathXmlApplicationContext) ctx).close();","title":"How to run JUnit SpringJUnit4ClassRunner with Parametrized?","body":"<h1>Handle application context by yourself</h1>\n\n<p>What worked for me was having a <code>@RunWith(Parameterized.class)</code> test class that managed the application context \"by hand\".</p>\n\n<p>To do that I created an application context with the same string collection that would be in the <code>@ContextConfiguration</code>. So instead of having</p>\n\n<pre><code>@ContextConfiguration(locations = { \"classpath:spring-config-file1.xml\",\n    \"classpath:spring-config-file2.xml\" })\n</code></pre>\n\n<p>I had</p>\n\n<pre><code>ApplicationContext ctx = new ClassPathXmlApplicationContext(new String[] {\n            \"classpath:spring-config-file1.xml\", \"classpath:spring-config-file2.xml\"  });\n</code></pre>\n\n<p>And for each @Autowired I needed I fetched it by hand from the created context:</p>\n\n<pre><code>SomeClass someBean = ctx.getBean(\"someClassAutowiredBean\", SomeClass.class);\n</code></pre>\n\n<p>Do not forget to close the context at the end:</p>\n\n<pre><code>((ClassPathXmlApplicationContext) ctx).close();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3652290,"reputation":2120,"user_id":3044117,"accept_rate":38,"display_name":"Eduardo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683738022,"creation_date":1683738022,"answer_id":76220936,"question_id":28560734,"body_markdown":"This question was answered long ago but I want to post my alternative solution:\r\n\r\nI kept the spring configuration as it is:\r\n\r\n@RunWith(SpringRunner.class)\r\n@SpringBootTest(classes = XXXXWebApplication.class)\r\n\r\nAnd instead of using annotation `@Parameters` I just put the variables in a global array and iterate over it when running the test to execute each single scenario.\r\n\r\nThe simplest.","title":"How to run JUnit SpringJUnit4ClassRunner with Parametrized?","body":"<p>This question was answered long ago but I want to post my alternative solution:</p>\n<p>I kept the spring configuration as it is:</p>\n<p>@RunWith(SpringRunner.class)\n@SpringBootTest(classes = XXXXWebApplication.class)</p>\n<p>And instead of using annotation <code>@Parameters</code> I just put the variables in a global array and iterate over it when running the test to execute each single scenario.</p>\n<p>The simplest.</p>\n"}],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34034,"favorite_count":0,"down_vote_count":0,"up_vote_count":67,"accepted_answer_id":28561473,"answer_count":5,"score":67,"last_activity_date":1683738022,"creation_date":1424171815,"question_id":28560734,"body_markdown":"The following code is invalid due to duplicate `@RunWith` annotation:\r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @RunWith(Parameterized.class)\r\n    @SpringApplicationConfiguration(classes = {ApplicationConfigTest.class})\r\n    public class ServiceTest {\r\n    }\r\n\r\nBut how can I use these two annotations in conjunction?","title":"How to run JUnit SpringJUnit4ClassRunner with Parametrized?","body":"<p>The following code is invalid due to duplicate <code>@RunWith</code> annotation:</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@RunWith(Parameterized.class)\n@SpringApplicationConfiguration(classes = {ApplicationConfigTest.class})\npublic class ServiceTest {\n}\n</code></pre>\n\n<p>But how can I use these two annotations in conjunction?</p>\n"},{"tags":["java","angular","handlebars.js","handlebarshelper","handlebars.java"],"comments":[{"owner":{"account_id":28559394,"reputation":1,"user_id":21863171,"display_name":"Harshini R"},"score":0,"creation_date":1683647189,"post_id":76211156,"comment_id":134397118,"body_markdown":"And FYI, for the text which includes quotes (&quot;&quot;), I am  escaping the double quotes So from UI its sent as \\&quot;title Fix\\&quot; count","body":"And FYI, for the text which includes quotes (&quot;&quot;), I am  escaping the double quotes So from UI its sent as \\&quot;title Fix\\&quot; count"},{"owner":{"account_id":4143236,"reputation":8693,"user_id":3397771,"display_name":"76484"},"score":0,"creation_date":1683726265,"post_id":76211156,"comment_id":134410933,"body_markdown":"I can think of no reason why a portion of a string after a space would get chopped-off.","body":"I can think of no reason why a portion of a string after a space would get chopped-off."},{"owner":{"account_id":28559394,"reputation":1,"user_id":21863171,"display_name":"Harshini R"},"score":0,"creation_date":1683735581,"post_id":76211156,"comment_id":134413488,"body_markdown":"but in my scenario I have a custom helper function created where we pass the text with specialCharacters to escape them and handlebar internally assumes the string as a IntNode and truncates anything beyond the number for that , example 123 123","body":"but in my scenario I have a custom helper function created where we pass the text with specialCharacters to escape them and handlebar internally assumes the string as a IntNode and truncates anything beyond the number for that , example 123 123"},{"owner":{"account_id":4143236,"reputation":8693,"user_id":3397771,"display_name":"76484"},"score":0,"creation_date":1683735792,"post_id":76211156,"comment_id":134413535,"body_markdown":"Then I think you should share the code of your custom helper.","body":"Then I think you should share the code of your custom helper."},{"owner":{"account_id":28559394,"reputation":1,"user_id":21863171,"display_name":"Harshini R"},"score":0,"creation_date":1683737514,"post_id":76211156,"comment_id":134413921,"body_markdown":"Thank you, I have added the custom helper code under the question details.","body":"Thank you, I have added the custom helper code under the question details."},{"owner":{"account_id":4143236,"reputation":8693,"user_id":3397771,"display_name":"76484"},"score":0,"creation_date":1683741425,"post_id":76211156,"comment_id":134414822,"body_markdown":"Why are you using this helper as a Block Helper (ie., `{{#escapeSpecialCharactersForTitle title}}` - starting with the &#39;#&#39;). It doesn&#39;t look like you want this to be a Block Helper.","body":"Why are you using this helper as a Block Helper (ie., <code>{{#escapeSpecialCharactersForTitle title}}</code> - starting with the &#39;#&#39;). It doesn&#39;t look like you want this to be a Block Helper."},{"owner":{"account_id":28559394,"reputation":1,"user_id":21863171,"display_name":"Harshini R"},"score":0,"creation_date":1683814119,"post_id":76211156,"comment_id":134426711,"body_markdown":"I will need to use the blockHelper here based on my project structure. Anyway, even without that helper call in hbs file, I still receive the truncated string in case of 100 009 as 100","body":"I will need to use the blockHelper here based on my project structure. Anyway, even without that helper call in hbs file, I still receive the truncated string in case of 100 009 as 100"},{"owner":{"account_id":4143236,"reputation":8693,"user_id":3397771,"display_name":"76484"},"score":0,"creation_date":1683814708,"post_id":76211156,"comment_id":134426868,"body_markdown":"If the problem is not with the helper then it must be somewhere else in your code and so I don&#39;t think I will be able to help you.","body":"If the problem is not with the helper then it must be somewhere else in your code and so I don&#39;t think I will be able to help you."}],"owner":{"account_id":28559394,"reputation":1,"user_id":21863171,"display_name":"Harshini R"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683737474,"creation_date":1683646919,"question_id":76211156,"body_markdown":"I am using Java 8 and Handlebars version 4.1.2.\r\n\r\nI am sending numbers as a string from UI and the handlebars are not returning the entire string in it.\r\n\r\nHere are the scenarios which are failing:\r\n\r\n**Issue1:**\r\n\r\nNumbers followed by space followed by text (alphabets or numbers or special characters). In this case, only the starting number is displayed\r\n\r\n- Ex 1: `102 somename` - only 102 is displayed.\r\n- Ex 2: `100 009` -  only 100 is displayed\r\n\r\n**Issue2:**\r\n\r\nText within double quotes followed by text. In this case only string within the text is displayed.\r\n\r\n- Ex 1: `&quot;title Fix&quot; count` - &quot;title Fix&quot; is displayed\r\n\r\nBut this should not be the case, they should display as `102 somename`, `100 009`, `&quot;title Fix&quot; count`.\r\n\r\n\r\nI have been trying with multiple versions of handlebars but none worked.\r\n\r\n\r\n\r\nHere is my file content:\r\n  \r\nHbs file content:\r\n  \r\n  {\r\n&quot;title&quot;:  &quot;{{#escapeSpecialCharactersForTitle title}}{{/escapeSpecialCharactersForTitle}}&quot;\r\n   \r\n}\r\n  \r\n  \r\nHelper class:\r\n  \r\npublic static void registerEscapeSpecialCharactersForTitle(Handlebars handlebars) {\r\n\r\n        handlebars.registerHelper(&quot;escapeSpecialCharactersForTitle&quot;,\r\n                (str,options) -&gt; {\r\n                    if(str!= null &amp;&amp; !isEmpty(str.toString())) {\r\n                        String title = str.toString();\r\n                        escapeAllSpecialCharacatersFromString(title);\r\n                        String finalString = JSONValue.toJSONString(title);\r\n                        return finalString;\r\n                    }\r\n                    return &quot;&quot;;\r\n                });\r\n    }\r\n\r\n    public static void escapeAllSpecialCharacatersFromString(String finalString) {\r\n         String[] specialCharacters = {&quot;^&quot;,&quot;$&quot;,&quot;{&quot;,&quot;}&quot;,&quot;[&quot;,&quot;]&quot;,&quot;(&quot;,&quot;)&quot;,&quot;.&quot;,&quot;*&quot;,&quot;+&quot;,&quot;?&quot;,&quot;|&quot;,&quot;&lt;&quot;,&quot;&gt;&quot;,&quot;-&quot;,&quot;&amp;&quot;,&quot;%&quot;,&quot;&#39;&quot;,&quot;\\\\&quot;,&quot;/&quot;,&quot;=&quot;};\r\n\r\n        for(int i=0;i&lt;specialCharacters.length;i++) {\r\n            if(finalString.contains(specialCharacters[i])) {\r\n                finalString = finalString.replace(specialCharacters[i],&quot;\\\\&quot;+specialCharacters[i]);\r\n            }\r\n        }\r\n    }","title":"Handle bars interprets the number as a string and doesn&#39;t return the entire string instead it truncates when it has space in it","body":"<p>I am using Java 8 and Handlebars version 4.1.2.</p>\n<p>I am sending numbers as a string from UI and the handlebars are not returning the entire string in it.</p>\n<p>Here are the scenarios which are failing:</p>\n<p><strong>Issue1:</strong></p>\n<p>Numbers followed by space followed by text (alphabets or numbers or special characters). In this case, only the starting number is displayed</p>\n<ul>\n<li>Ex 1: <code>102 somename</code> - only 102 is displayed.</li>\n<li>Ex 2: <code>100 009</code> -  only 100 is displayed</li>\n</ul>\n<p><strong>Issue2:</strong></p>\n<p>Text within double quotes followed by text. In this case only string within the text is displayed.</p>\n<ul>\n<li>Ex 1: <code>&quot;title Fix&quot; count</code> - &quot;title Fix&quot; is displayed</li>\n</ul>\n<p>But this should not be the case, they should display as <code>102 somename</code>, <code>100 009</code>, <code>&quot;title Fix&quot; count</code>.</p>\n<p>I have been trying with multiple versions of handlebars but none worked.</p>\n<p>Here is my file content:</p>\n<p>Hbs file content:</p>\n<p>{\n&quot;title&quot;:  &quot;{{#escapeSpecialCharactersForTitle title}}{{/escapeSpecialCharactersForTitle}}&quot;</p>\n<p>}</p>\n<p>Helper class:</p>\n<p>public static void registerEscapeSpecialCharactersForTitle(Handlebars handlebars) {</p>\n<pre><code>    handlebars.registerHelper(&quot;escapeSpecialCharactersForTitle&quot;,\n            (str,options) -&gt; {\n                if(str!= null &amp;&amp; !isEmpty(str.toString())) {\n                    String title = str.toString();\n                    escapeAllSpecialCharacatersFromString(title);\n                    String finalString = JSONValue.toJSONString(title);\n                    return finalString;\n                }\n                return &quot;&quot;;\n            });\n}\n\npublic static void escapeAllSpecialCharacatersFromString(String finalString) {\n     String[] specialCharacters = {&quot;^&quot;,&quot;$&quot;,&quot;{&quot;,&quot;}&quot;,&quot;[&quot;,&quot;]&quot;,&quot;(&quot;,&quot;)&quot;,&quot;.&quot;,&quot;*&quot;,&quot;+&quot;,&quot;?&quot;,&quot;|&quot;,&quot;&lt;&quot;,&quot;&gt;&quot;,&quot;-&quot;,&quot;&amp;&quot;,&quot;%&quot;,&quot;'&quot;,&quot;\\\\&quot;,&quot;/&quot;,&quot;=&quot;};\n\n    for(int i=0;i&lt;specialCharacters.length;i++) {\n        if(finalString.contains(specialCharacters[i])) {\n            finalString = finalString.replace(specialCharacters[i],&quot;\\\\&quot;+specialCharacters[i]);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","string","binary"],"comments":[{"owner":{"account_id":3906943,"reputation":7869,"user_id":3233388,"accept_rate":89,"display_name":"Adelin"},"score":1,"creation_date":1518676112,"post_id":48801099,"comment_id":84604847,"body_markdown":"What&#39;s with the *-3 down vote favorite Find largest alternating 1s and 0s subsequence in a string containing only 1s and 0s*?","body":"What&#39;s with the <i>-3 down vote favorite Find largest alternating 1s and 0s subsequence in a string containing only 1s and 0s</i>?"},{"owner":{"account_id":5787151,"reputation":14166,"user_id":4565947,"accept_rate":71,"display_name":"Julien"},"score":0,"creation_date":1518676156,"post_id":48801099,"comment_id":84604862,"body_markdown":"and why the python tag?","body":"and why the python tag?"},{"owner":{"account_id":2070005,"reputation":1845,"user_id":1844706,"accept_rate":79,"display_name":"Andreas Hartmann"},"score":0,"creation_date":1518676174,"post_id":48801099,"comment_id":84604876,"body_markdown":"Are you asking on Stackoverflow about a code golf?","body":"Are you asking on Stackoverflow about a code golf?"},{"owner":{"account_id":3906943,"reputation":7869,"user_id":3233388,"accept_rate":89,"display_name":"Adelin"},"score":0,"creation_date":1518676293,"post_id":48801099,"comment_id":84604931,"body_markdown":"Looks like OP asked this before but it was deleted: [original quesiton](https://stackoverflow.com/questions/48755748/how-to-find-largest-alternating-subsequence-of-1s-and-0s-in-a-string), and [google cached question](https://webcache.googleusercontent.com/search?q=cache:xjsI10Sr_EYJ:https://stackoverflow.com/questions/48755748/how-to-find-largest-alternating-subsequence-of-1s-and-0s-in-a-string+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=uk)","body":"Looks like OP asked this before but it was deleted: <a href=\"https://stackoverflow.com/questions/48755748/how-to-find-largest-alternating-subsequence-of-1s-and-0s-in-a-string\">original quesiton</a>, and <a href=\"https://webcache.googleusercontent.com/search?q=cache:xjsI10Sr_EYJ:https://stackoverflow.com/questions/48755748/how-to-find-largest-alternating-subsequence-of-1s-and-0s-in-a-string+&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=uk\" rel=\"nofollow noreferrer\">google cached question</a>"}],"answers":[{"comments":[{"owner":{"account_id":6717518,"reputation":77,"user_id":5178878,"accept_rate":60,"display_name":"secret.shadow"},"score":0,"creation_date":1518681336,"post_id":48801272,"comment_id":84607168,"body_markdown":"I think still there&#39;s a problem with logic. After adding this modification, for an input  int arr[] = {1, 0, 0, 1, 0, 1, 1};  I&#39;m getting the maxsize as 3 and index from 2 to 4. The maxsize should be 4 and index from 2 to 5","body":"I think still there&#39;s a problem with logic. After adding this modification, for an input  int arr[] = {1, 0, 0, 1, 0, 1, 1};  I&#39;m getting the maxsize as 3 and index from 2 to 4. The maxsize should be 4 and index from 2 to 5"},{"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"score":0,"creation_date":1518682258,"post_id":48801272,"comment_id":84607629,"body_markdown":"@AnkitGupta yes, the logic was still incorrect. See updated answer.","body":"@AnkitGupta yes, the logic was still incorrect. See updated answer."},{"owner":{"account_id":6717518,"reputation":77,"user_id":5178878,"accept_rate":60,"display_name":"secret.shadow"},"score":0,"creation_date":1518683496,"post_id":48801272,"comment_id":84608303,"body_markdown":"Yeah. understood. that solves the issue. Thanks. Do you think is there any better way to do this?","body":"Yeah. understood. that solves the issue. Thanks. Do you think is there any better way to do this?"},{"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"score":0,"creation_date":1518683703,"post_id":48801272,"comment_id":84608406,"body_markdown":"@AnkitGupta You&#39;re welcome. You can make it more readable if you use meaningful variable names (for example, instead of `j`), but in terms of performance there&#39;s nothing to improve - you are iterating over the array exactly once, and you can&#39;t do better. Perhaps you can get rid of the `n` parameter, since that&#39;s equal to `arr.length`, which makes it redundant.","body":"@AnkitGupta You&#39;re welcome. You can make it more readable if you use meaningful variable names (for example, instead of <code>j</code>), but in terms of performance there&#39;s nothing to improve - you are iterating over the array exactly once, and you can&#39;t do better. Perhaps you can get rid of the <code>n</code> parameter, since that&#39;s equal to <code>arr.length</code>, which makes it redundant."},{"owner":{"account_id":6717518,"reputation":77,"user_id":5178878,"accept_rate":60,"display_name":"secret.shadow"},"score":0,"creation_date":1518684335,"post_id":48801272,"comment_id":84608770,"body_markdown":"Yes I will make the variables names meaningful. Thanks for your help Eran","body":"Yes I will make the variables names meaningful. Thanks for your help Eran"}],"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1518682241,"creation_date":1518676878,"answer_id":48801272,"question_id":48801099,"body_markdown":"You were correct in changing `j = i;` to `j = i + 1;`, but it wasn&#39;t enough.\r\n\r\nWhat you are missing is that the current alternating series begins at `j` and ends at `i+1`, not `i`. \r\n\r\nIn addition, there is a problem in the logic of your condition. Your else clause should be reached only when the current alternating sequence ends (i.e. `arr[i] == arr[i+1]`) but it is also reached when the current sequence is not longer than the max sequence.\r\n\r\nTherefore the condition should be broken into two conditions:\r\n\r\n    if (arr[i] != arr[i+1]) {\r\n        if (maxsize &lt; i + 1 - j + 1) {\r\n            maxsize = i + 1 - j + 1;\r\n            startindex = j;       \r\n        }\r\n    } else {\r\n        j = i + 1;\r\n    }","title":"Largest alternating subsequence of 1s and 0s in a string","body":"<p>You were correct in changing <code>j = i;</code> to <code>j = i + 1;</code>, but it wasn't enough.</p>\n\n<p>What you are missing is that the current alternating series begins at <code>j</code> and ends at <code>i+1</code>, not <code>i</code>. </p>\n\n<p>In addition, there is a problem in the logic of your condition. Your else clause should be reached only when the current alternating sequence ends (i.e. <code>arr[i] == arr[i+1]</code>) but it is also reached when the current sequence is not longer than the max sequence.</p>\n\n<p>Therefore the condition should be broken into two conditions:</p>\n\n<pre><code>if (arr[i] != arr[i+1]) {\n    if (maxsize &lt; i + 1 - j + 1) {\n        maxsize = i + 1 - j + 1;\n        startindex = j;       \n    }\n} else {\n    j = i + 1;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":15718721,"reputation":988,"user_id":11342225,"display_name":"alea"},"score":1,"creation_date":1683739991,"post_id":76220847,"comment_id":134414511,"body_markdown":"As itâ€™s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As itâ€™s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/76220847/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":28045735,"reputation":1,"user_id":21422548,"display_name":"Arun Kennedy"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683737213,"creation_date":1683737213,"answer_id":76220847,"question_id":48801099,"body_markdown":"    int findSubArray(int arr[], int n) {\r\n        if(n&lt;=0){\r\n            return 0;\r\n        }\r\n        int maxLen = 1;\r\n        int prevPos = -1;\r\n        for(int i=1;i&lt;n;i++){\r\n            maxLen = max(maxLen, i-1-prevPos);\r\n            if(arr[i-1] == arr[i]){\r\n                prevPos = i-1;\r\n            }\r\n        }\r\n        maxLen = max(maxLen, n-1 - prevPos);\r\n        return maxLen;\r\n    }","title":"Largest alternating subsequence of 1s and 0s in a string","body":"<pre><code>int findSubArray(int arr[], int n) {\n    if(n&lt;=0){\n        return 0;\n    }\n    int maxLen = 1;\n    int prevPos = -1;\n    for(int i=1;i&lt;n;i++){\n        maxLen = max(maxLen, i-1-prevPos);\n        if(arr[i-1] == arr[i]){\n            prevPos = i-1;\n        }\n    }\n    maxLen = max(maxLen, n-1 - prevPos);\n    return maxLen;\n}\n</code></pre>\n"}],"owner":{"account_id":6717518,"reputation":77,"user_id":5178878,"accept_rate":60,"display_name":"secret.shadow"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1505,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":48801272,"answer_count":2,"score":2,"last_activity_date":1683737213,"creation_date":1518675973,"question_id":48801099,"body_markdown":"Find largest alternating 1s and 0s sub-sequence in a `String` containing only 1s and 0s. Also find the starting index for the largest sub-sequence.\r\n\r\nExample: \r\n\r\nFor 1101011, the longest alternating sub-sequence length is 5, from index 1 to 5.\r\n\r\nI tried doing it by comparing consecutive elements and if they are not equal, comparing current length to max size:\r\n\r\n    int findSubArray(int arr[], int n) \r\n    {\r\n        int sum = 0;\r\n        int maxsize = -1, startindex = 0;\r\n        int endindex = 0;\r\n\r\n        int j = 0;\r\n        for (int i = 0; i &lt; n - 1; i++)  {\r\n            if (arr[i] != arr[i+1] &amp;&amp; maxsize &lt; i - j + 1) {\r\n                maxsize = i - j + 1;\r\n                startindex = j;\r\n            } else {\r\n                j = i;\r\n            }\r\n        }\r\n\r\n        endindex = startindex+maxsize-1;\r\n        if (maxsize == -1)\r\n            System.out.println(&quot;No such subarray&quot;);\r\n        else\r\n            System.out.println(startindex+&quot; to &quot;+endindex);\r\n\r\n        return maxsize;\r\n    }\r\n\r\nTesting the method:\r\n\r\n    int [] ia = {1, 1, 0, 1, 0, 1, 1};\r\n    findSubArray (ia, 7);\r\n\r\nReturns: 5 and prints 0 to 4\r\n\r\nThe problem is that although it prints correct length, which is 5, the indexes are incorrect. Correct Output should be 1 to 5.\r\n\r\nTo rectify this, if I do `j = i + 1`, then the whole matching goes for a toss and I get the indexes as 0 to 0.\r\n\r\nWhat is the mistake in the above code? Also, any pseudo code for an alternative approach would help.\r\n\r\n\r\n","title":"Largest alternating subsequence of 1s and 0s in a string","body":"<p>Find largest alternating 1s and 0s sub-sequence in a <code>String</code> containing only 1s and 0s. Also find the starting index for the largest sub-sequence.</p>\n\n<p>Example: </p>\n\n<p>For 1101011, the longest alternating sub-sequence length is 5, from index 1 to 5.</p>\n\n<p>I tried doing it by comparing consecutive elements and if they are not equal, comparing current length to max size:</p>\n\n<pre><code>int findSubArray(int arr[], int n) \n{\n    int sum = 0;\n    int maxsize = -1, startindex = 0;\n    int endindex = 0;\n\n    int j = 0;\n    for (int i = 0; i &lt; n - 1; i++)  {\n        if (arr[i] != arr[i+1] &amp;&amp; maxsize &lt; i - j + 1) {\n            maxsize = i - j + 1;\n            startindex = j;\n        } else {\n            j = i;\n        }\n    }\n\n    endindex = startindex+maxsize-1;\n    if (maxsize == -1)\n        System.out.println(\"No such subarray\");\n    else\n        System.out.println(startindex+\" to \"+endindex);\n\n    return maxsize;\n}\n</code></pre>\n\n<p>Testing the method:</p>\n\n<pre><code>int [] ia = {1, 1, 0, 1, 0, 1, 1};\nfindSubArray (ia, 7);\n</code></pre>\n\n<p>Returns: 5 and prints 0 to 4</p>\n\n<p>The problem is that although it prints correct length, which is 5, the indexes are incorrect. Correct Output should be 1 to 5.</p>\n\n<p>To rectify this, if I do <code>j = i + 1</code>, then the whole matching goes for a toss and I get the indexes as 0 to 0.</p>\n\n<p>What is the mistake in the above code? Also, any pseudo code for an alternative approach would help.</p>\n"},{"tags":["java","spring-boot","spring-webflux"],"answers":[{"tags":[],"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683712711,"creation_date":1683712079,"answer_id":76217003,"question_id":76211825,"body_markdown":"Why its not working is because you are *breaking the chain*, and you haven&#39;t read what the operators actually do.\r\n\r\n```\r\n return moviesInfoService.deleteMovieInfoById(id)\r\n                .then(Mono.just(ResponseEntity.noContent().build()));\r\n```\r\n\r\nHere `deleteMovieInfoById` returns a value, you then call the `then` operator which will (when the earlier function completes) discard that value, and instead return `ResponseEntity.noContent().build()`.\r\n\r\nYou can just write `.then(ServerResponse.noContent().build())` since `ServerResponse` will give you a `Mono` instead, or if you insist on returning a `ResponseEntity` you can instead use the `thenReturn(ResponseEntity.noContent().build())` which will wrap it in a `Mono` for you automatically.\r\n\r\n`ResponseEntity` is from the `http` package which means its more generic, while `ServerResponse` is from the `reactive` package so its more of a convenience.\r\n\r\nThe second one does not work because if we rewrite it more exploded we get:\r\n\r\n```\r\nMono&lt;Void&gt; someThing = moviesInfoService.deleteMovieInfoById(id);\r\nMono&lt;ResponseEntity&gt; response = Mono.just(ResponseEntity.noContent().build());\r\nreturn response;\r\n```\r\n\r\nAnd as you can see here, you have two `Mono&#39;s` while one of them (the top one) is unused. In the getting started with reactor it is explained that reactor works as conveyor belt. There are two phases, the `assembly` phase and the `subscription` phase. You can read about it [here][1].\r\n\r\nWhat this actually means is that you can&#39;t leave any mono/flux dangling, you always need to chain on the last operator, so that reactive java can react to the previous functions outcome.\r\n\r\nYou have so called *broken the chain*.\r\n\r\nyou need to chain onto `someThing`. Here i do it with `then`.\r\n\r\n```\r\nMono&lt;Void&gt; someThing = moviesInfoService.deleteMovieInfoById(id);\r\nMono&lt;ResponseEntity&gt; response = someThing.then(ServerResponse.noContent().build());\r\nreturn response;\r\n```\r\n\r\nYour example 3 is a bit tricker to spot, and that is because of an implicit understanding that you can&#39;t map something that is `Void`.\r\n\r\n```\r\nMono&lt;Void&gt; result = moviesInfoService.deleteMovieInfoById(id);\r\nMono&lt;ResponseEntity&gt; result2 = result.map(m -&gt; ResponseEntity.noContent().build());\r\nreturn result2\r\n```\r\n\r\nIn your example what would `m` be? the function before returned `Mono&lt;Void` so `m` would be what? And that&#39;s the thing if your function before doesn&#39;t return anything, it wont run the `map` function after.\r\n\r\nSo basically `map` is not the operator to use here `then` or `thenReturn` is what should be used.\r\n\r\nLast example works and is the most idiomatic solution.\r\n\r\n```\r\nreturn moviesInfoService \r\n                .getMovieInfoById(id)\r\n                .flatMap(fm -&gt; moviesInfoService.deleteMovieInfoById(fm.getMovieInfoId()))\r\n                .then(Mono.just(ResponseEntity.noContent().build()));\r\n```\r\n\r\nWe can then rewrite this into something more verbose:\r\n\r\n```\r\nvoid Mono&lt;ServerResponse&gt; deleteMovie() {\r\n\tfinal MovieService movieService = new MovieService();\r\n\treturn movieService.get(&quot;Terminator&quot;).flatMap(name -&gt; {\r\n\t\tSystem.out.println(&quot;calling delete on: &quot; + name);\r\n\t\treturn movieService.delete(name);\r\n\t})\r\n\t.then(ServerResponse.noContent().build())\r\n}\r\n\r\nstatic class MovieService {\r\n\r\n\tpublic Mono&lt;String&gt; get(String s) {\r\n\t\tSystem.out.println(&quot;fetching &quot; + s);\r\n\t\treturn Mono.just(s);\r\n\t}\r\n\r\n\tpublic Mono&lt;Void&gt; delete(String s) {\r\n\t\tSystem.out.println(&quot;deleting &quot; + s);\r\n\t\treturn Mono.empty();\r\n\t}\r\n}\r\n```\r\n\r\nIf you see it this way\r\n- you are fetching something\r\n- then calling `flatMap` on what is fetched, and this is allowed since we have something we can `flatMap` on. \r\n- We then call `delete` inside the `flatMap` and since we are returning a `Mono&lt;Void&gt;` which basically just tells the reactive chain that *we are done and nothing was returned* \r\n- we&#39;ll then only react to the completion of the last step and call `then`, where we return a `ServerResponse`.\r\n\r\nYou **always** have to chain on the last thing you did.\r\n\r\nMost of this is explained in the [getting started with reactive programming][2] part of the reactive documentation and you are getting downvotes because its been answered many times before here on Stack Overflow.\r\n\r\n\r\n  [1]: https://spring.io/blog/2019/03/06/flight-of-the-flux-1-assembly-vs-subscription\r\n  [2]: https://projectreactor.io/docs/core/release/reference/#intro-reactive","title":"Confustion with Mono.just vs then(Mono.just)","body":"<p>Why its not working is because you are <em>breaking the chain</em>, and you haven't read what the operators actually do.</p>\n<pre><code> return moviesInfoService.deleteMovieInfoById(id)\n                .then(Mono.just(ResponseEntity.noContent().build()));\n</code></pre>\n<p>Here <code>deleteMovieInfoById</code> returns a value, you then call the <code>then</code> operator which will (when the earlier function completes) discard that value, and instead return <code>ResponseEntity.noContent().build()</code>.</p>\n<p>You can just write <code>.then(ServerResponse.noContent().build())</code> since <code>ServerResponse</code> will give you a <code>Mono</code> instead, or if you insist on returning a <code>ResponseEntity</code> you can instead use the <code>thenReturn(ResponseEntity.noContent().build())</code> which will wrap it in a <code>Mono</code> for you automatically.</p>\n<p><code>ResponseEntity</code> is from the <code>http</code> package which means its more generic, while <code>ServerResponse</code> is from the <code>reactive</code> package so its more of a convenience.</p>\n<p>The second one does not work because if we rewrite it more exploded we get:</p>\n<pre><code>Mono&lt;Void&gt; someThing = moviesInfoService.deleteMovieInfoById(id);\nMono&lt;ResponseEntity&gt; response = Mono.just(ResponseEntity.noContent().build());\nreturn response;\n</code></pre>\n<p>And as you can see here, you have two <code>Mono's</code> while one of them (the top one) is unused. In the getting started with reactor it is explained that reactor works as conveyor belt. There are two phases, the <code>assembly</code> phase and the <code>subscription</code> phase. You can read about it <a href=\"https://spring.io/blog/2019/03/06/flight-of-the-flux-1-assembly-vs-subscription\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>What this actually means is that you can't leave any mono/flux dangling, you always need to chain on the last operator, so that reactive java can react to the previous functions outcome.</p>\n<p>You have so called <em>broken the chain</em>.</p>\n<p>you need to chain onto <code>someThing</code>. Here i do it with <code>then</code>.</p>\n<pre><code>Mono&lt;Void&gt; someThing = moviesInfoService.deleteMovieInfoById(id);\nMono&lt;ResponseEntity&gt; response = someThing.then(ServerResponse.noContent().build());\nreturn response;\n</code></pre>\n<p>Your example 3 is a bit tricker to spot, and that is because of an implicit understanding that you can't map something that is <code>Void</code>.</p>\n<pre><code>Mono&lt;Void&gt; result = moviesInfoService.deleteMovieInfoById(id);\nMono&lt;ResponseEntity&gt; result2 = result.map(m -&gt; ResponseEntity.noContent().build());\nreturn result2\n</code></pre>\n<p>In your example what would <code>m</code> be? the function before returned <code>Mono&lt;Void</code> so <code>m</code> would be what? And that's the thing if your function before doesn't return anything, it wont run the <code>map</code> function after.</p>\n<p>So basically <code>map</code> is not the operator to use here <code>then</code> or <code>thenReturn</code> is what should be used.</p>\n<p>Last example works and is the most idiomatic solution.</p>\n<pre><code>return moviesInfoService \n                .getMovieInfoById(id)\n                .flatMap(fm -&gt; moviesInfoService.deleteMovieInfoById(fm.getMovieInfoId()))\n                .then(Mono.just(ResponseEntity.noContent().build()));\n</code></pre>\n<p>We can then rewrite this into something more verbose:</p>\n<pre><code>void Mono&lt;ServerResponse&gt; deleteMovie() {\n    final MovieService movieService = new MovieService();\n    return movieService.get(&quot;Terminator&quot;).flatMap(name -&gt; {\n        System.out.println(&quot;calling delete on: &quot; + name);\n        return movieService.delete(name);\n    })\n    .then(ServerResponse.noContent().build())\n}\n\nstatic class MovieService {\n\n    public Mono&lt;String&gt; get(String s) {\n        System.out.println(&quot;fetching &quot; + s);\n        return Mono.just(s);\n    }\n\n    public Mono&lt;Void&gt; delete(String s) {\n        System.out.println(&quot;deleting &quot; + s);\n        return Mono.empty();\n    }\n}\n</code></pre>\n<p>If you see it this way</p>\n<ul>\n<li>you are fetching something</li>\n<li>then calling <code>flatMap</code> on what is fetched, and this is allowed since we have something we can <code>flatMap</code> on.</li>\n<li>We then call <code>delete</code> inside the <code>flatMap</code> and since we are returning a <code>Mono&lt;Void&gt;</code> which basically just tells the reactive chain that <em>we are done and nothing was returned</em></li>\n<li>we'll then only react to the completion of the last step and call <code>then</code>, where we return a <code>ServerResponse</code>.</li>\n</ul>\n<p>You <strong>always</strong> have to chain on the last thing you did.</p>\n<p>Most of this is explained in the <a href=\"https://projectreactor.io/docs/core/release/reference/#intro-reactive\" rel=\"nofollow noreferrer\">getting started with reactive programming</a> part of the reactive documentation and you are getting downvotes because its been answered many times before here on Stack Overflow.</p>\n"}],"owner":{"account_id":21182175,"reputation":19,"user_id":15576348,"display_name":"MissConfusion"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":267,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1683736899,"creation_date":1683651901,"question_id":76211825,"body_markdown":"I am learning reactive Java, and I am trying to do a delete operation from a database. The DB I am using is the embedded Mongo DB.\r\n\r\nI have tried few approached to delete movie with given ID from DB and some of them works and rest dont work. Wondering I am missing some basic concepts of reactive programming.\r\n\r\nExample 1 : Deletion Works\r\n\r\n```\r\n return moviesInfoService.deleteMovieInfoById(id)\r\n                .then(Mono.just(ResponseEntity.noContent().build()));\r\n````\r\n\r\nExample 2: Deletion doest not work\r\n```\r\nmoviesInfoService.deleteMovieInfoById(id);\r\nreturn Mono.just(ResponseEntity.noContent().build());\r\n```\r\n\r\nExample 3: Deletion does not work\r\n```\r\nMono&lt;Void&gt; result = moviesInfoService.deleteMovieInfoById(id);\r\nMono&lt;ResponseEntity&gt; result2 = result.map(m -&gt; ResponseEntity.noContent().build());\r\nreturn result2\r\n```\r\n\r\nExample 4 : Deletion works\r\n\r\n```\r\nreturn moviesInfoService \r\n                .getMovieInfoById(id)\r\n                .flatMap(fm -&gt; moviesInfoService.deleteMovieInfoById(fm.getMovieInfoId()))\r\n                .then(Mono.just(ResponseEntity.noContent().build()));\r\n```\r\n\r\nI am not able to understand why in some cases deletion is working and on some not. Pls help me.","title":"Confustion with Mono.just vs then(Mono.just)","body":"<p>I am learning reactive Java, and I am trying to do a delete operation from a database. The DB I am using is the embedded Mongo DB.</p>\n<p>I have tried few approached to delete movie with given ID from DB and some of them works and rest dont work. Wondering I am missing some basic concepts of reactive programming.</p>\n<p>Example 1 : Deletion Works</p>\n<pre><code> return moviesInfoService.deleteMovieInfoById(id)\n                .then(Mono.just(ResponseEntity.noContent().build()));\n</code></pre>\n<p>Example 2: Deletion doest not work</p>\n<pre><code>moviesInfoService.deleteMovieInfoById(id);\nreturn Mono.just(ResponseEntity.noContent().build());\n</code></pre>\n<p>Example 3: Deletion does not work</p>\n<pre><code>Mono&lt;Void&gt; result = moviesInfoService.deleteMovieInfoById(id);\nMono&lt;ResponseEntity&gt; result2 = result.map(m -&gt; ResponseEntity.noContent().build());\nreturn result2\n</code></pre>\n<p>Example 4 : Deletion works</p>\n<pre><code>return moviesInfoService \n                .getMovieInfoById(id)\n                .flatMap(fm -&gt; moviesInfoService.deleteMovieInfoById(fm.getMovieInfoId()))\n                .then(Mono.just(ResponseEntity.noContent().build()));\n</code></pre>\n<p>I am not able to understand why in some cases deletion is working and on some not. Pls help me.</p>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":3024546,"reputation":18815,"user_id":2564847,"accept_rate":75,"display_name":"Robin Dijkhof"},"score":1,"creation_date":1683366254,"post_id":76140339,"comment_id":134358318,"body_markdown":"what is your definition of &#39;backward/forward compatible&#39;? Does it mean all filled fields in versionX are also present on versionY?","body":"what is your definition of &#39;backward/forward compatible&#39;? Does it mean all filled fields in versionX are also present on versionY?"},{"owner":{"account_id":18868507,"reputation":980,"user_id":13763713,"display_name":"oliver_t"},"score":0,"creation_date":1683560134,"post_id":76140339,"comment_id":134381546,"body_markdown":"and what is your definition of &#39;ensure no errors happen&#39;? Fail on build time? Silently ignore on runtime?","body":"and what is your definition of &#39;ensure no errors happen&#39;? Fail on build time? Silently ignore on runtime?"},{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":0,"creation_date":1683613409,"post_id":76140339,"comment_id":134389110,"body_markdown":"And &quot;statically check&quot; is not clear either.","body":"And &quot;statically check&quot; is not clear either."},{"owner":{"account_id":5449048,"reputation":432,"user_id":4334499,"display_name":"Milan Milanov"},"score":0,"creation_date":1683888682,"post_id":76140339,"comment_id":134439032,"body_markdown":"@RobinDijkhof I meant that a change in V2 won&#39;t cause runtime errors when being deserialised using the V1 pojo. Eg changing a property from String to a boolean is a breaking change.","body":"@RobinDijkhof I meant that a change in V2 won&#39;t cause runtime errors when being deserialised using the V1 pojo. Eg changing a property from String to a boolean is a breaking change."},{"owner":{"account_id":5449048,"reputation":432,"user_id":4334499,"display_name":"Milan Milanov"},"score":0,"creation_date":1683888869,"post_id":76140339,"comment_id":134439074,"body_markdown":"@Olivier Yes, ignoring attributes at runtime would be fine. As long as no situation occurs when they can&#39;t be mapped at all (I gave an example above, but trying to deserialise a string into a boolean). As for checking statically - given only the two POJOs above, determine that V2 IS backward-compatible with V1.","body":"@Olivier Yes, ignoring attributes at runtime would be fine. As long as no situation occurs when they can&#39;t be mapped at all (I gave an example above, but trying to deserialise a string into a boolean). As for checking statically - given only the two POJOs above, determine that V2 IS backward-compatible with V1."}],"answers":[{"comments":[{"owner":{"account_id":5449048,"reputation":432,"user_id":4334499,"display_name":"Milan Milanov"},"score":0,"creation_date":1682854154,"post_id":76140374,"comment_id":134277575,"body_markdown":"That&#39;s the easier part. I can also disable it globally on the ObjectMapper using `FAIL_ON_UNKNOWN_PROPERTIES`. However, this will only work if there are compatibility rules in the first place - ie the other part of the question.","body":"That&#39;s the easier part. I can also disable it globally on the ObjectMapper using <code>FAIL_ON_UNKNOWN_PROPERTIES</code>. However, this will only work if there are compatibility rules in the first place - ie the other part of the question."},{"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"score":0,"creation_date":1682855401,"post_id":76140374,"comment_id":134277727,"body_markdown":"First - I am saying the opposite - Do NOT fail if you encounter unknown properties. As to how prevent deserialization failure - it is not so simple. One idea is to deserialize it into a MAP and that have a custom code that converts a map into your pojo in such a way that it can not fail.","body":"First - I am saying the opposite - Do NOT fail if you encounter unknown properties. As to how prevent deserialization failure - it is not so simple. One idea is to deserialize it into a MAP and that have a custom code that converts a map into your pojo in such a way that it can not fail."}],"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682845195,"creation_date":1682845195,"answer_id":76140374,"question_id":76140339,"body_markdown":"You can mark your POJO with `@JsonIgnoreProperties(ignoreUnknown = true)` so this way when deserializing into POJO v1 the fields that are exclusive to v2 will be ignored, and when deserialising into v2 from JSON v1 missing properties will be set to null. You can read about ignoring unknown properties here: [Jackson Unmarshalling JSON with Unknown Properties][1]\r\n\r\n\r\n  [1]: https://www.baeldung.com/jackson-deserialize-json-unknown-properties","title":"Check backward/forward POJO compatibility using Jackson","body":"<p>You can mark your POJO with <code>@JsonIgnoreProperties(ignoreUnknown = true)</code> so this way when deserializing into POJO v1 the fields that are exclusive to v2 will be ignored, and when deserialising into v2 from JSON v1 missing properties will be set to null. You can read about ignoring unknown properties here: <a href=\"https://www.baeldung.com/jackson-deserialize-json-unknown-properties\" rel=\"nofollow noreferrer\">Jackson Unmarshalling JSON with Unknown Properties</a></p>\n"},{"tags":[],"owner":{"account_id":7505074,"reputation":3,"user_id":5701878,"display_name":"Abdelouali Benkheil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683736697,"creation_date":1683736697,"answer_id":76220782,"question_id":76140339,"body_markdown":"You can use the Jackson library&#39;s polymorphic deserialization feature.\r\n\r\nHere is an example of how you can use polymorphic deserialization in Jackson to support multiple versions of the UserCreated message:\r\n\r\n    @JsonTypeInfo(use = JsonTypeInfo.Id.NAME, property = &quot;version&quot;)\r\n    @JsonSubTypes({\r\n        @JsonSubTypes.Type(value = UserCreatedV1.class, name = &quot;v1&quot;),\r\n        @JsonSubTypes.Type(value = UserCreatedV2.class, name = &quot;v2&quot;)\r\n    })\r\n    public abstract class UserCreated {\r\n        private String email;\r\n        private String fullName;\r\n    \r\n        // getters/setters\r\n    }\r\n\r\nNext, define the concrete classes:\r\n\r\n\r\n    public class UserCreatedV1 extends UserCreated {\r\n        // no additional fields\r\n    }\r\n    \r\n    public class UserCreatedV2 extends UserCreated {\r\n        private String preferredName;\r\n\r\n        // getters/setters\r\n    }\r\n\r\nWhen you deserialize a JSON payload, Jackson will automatically determine the version based on the value of the &quot;version&quot; property, and deserialize the payload into the appropriate class.","title":"Check backward/forward POJO compatibility using Jackson","body":"<p>You can use the Jackson library's polymorphic deserialization feature.</p>\n<p>Here is an example of how you can use polymorphic deserialization in Jackson to support multiple versions of the UserCreated message:</p>\n<pre><code>@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, property = &quot;version&quot;)\n@JsonSubTypes({\n    @JsonSubTypes.Type(value = UserCreatedV1.class, name = &quot;v1&quot;),\n    @JsonSubTypes.Type(value = UserCreatedV2.class, name = &quot;v2&quot;)\n})\npublic abstract class UserCreated {\n    private String email;\n    private String fullName;\n\n    // getters/setters\n}\n</code></pre>\n<p>Next, define the concrete classes:</p>\n<pre><code>public class UserCreatedV1 extends UserCreated {\n    // no additional fields\n}\n\npublic class UserCreatedV2 extends UserCreated {\n    private String preferredName;\n\n    // getters/setters\n}\n</code></pre>\n<p>When you deserialize a JSON payload, Jackson will automatically determine the version based on the value of the &quot;version&quot; property, and deserialize the payload into the appropriate class.</p>\n"}],"owner":{"account_id":5449048,"reputation":432,"user_id":4334499,"display_name":"Milan Milanov"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":303,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1683736697,"creation_date":1682844801,"question_id":76140339,"body_markdown":"We&#39;re using Java POJOs as messages that flow through a message broker. They are serialized/deserialized using the Jackson JSON library. Each message (POJO) can have multiple versions:\r\n```\r\nclass UserCreatedV1 { private String email; private String fullName; }\r\nclass UserCreatedV2 { private String email; private String fullName; private String preferredName; }\r\n```\r\n\r\n(getters, constructors, etc are omitted). What is the way to:\r\n- ensure no errors happen during deserialization, even when a client that uses `UserCreatedV1` deserializes a json representation of `UserCreatedV2` (or vice-versa)\r\n- statically check if `UserCreatedV2` is backward/forward compatible with `UserCreatedV1` (no need to enforce this though)\r\n","title":"Check backward/forward POJO compatibility using Jackson","body":"<p>We're using Java POJOs as messages that flow through a message broker. They are serialized/deserialized using the Jackson JSON library. Each message (POJO) can have multiple versions:</p>\n<pre><code>class UserCreatedV1 { private String email; private String fullName; }\nclass UserCreatedV2 { private String email; private String fullName; private String preferredName; }\n</code></pre>\n<p>(getters, constructors, etc are omitted). What is the way to:</p>\n<ul>\n<li>ensure no errors happen during deserialization, even when a client that uses <code>UserCreatedV1</code> deserializes a json representation of <code>UserCreatedV2</code> (or vice-versa)</li>\n<li>statically check if <code>UserCreatedV2</code> is backward/forward compatible with <code>UserCreatedV1</code> (no need to enforce this though)</li>\n</ul>\n"},{"tags":["java","spring-boot","dependency-injection","plugins"],"answers":[{"tags":[],"owner":{"account_id":469790,"reputation":1689,"user_id":876595,"display_name":"chehsunliu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683736674,"creation_date":1683736674,"answer_id":76220776,"question_id":75359691,"body_markdown":"What you need is Service Provider Interface (SPI).\r\n\r\nAssume you have a 4-module project with the following structure:\r\n\r\n```\r\n.\r\nâ”œâ”€â”€ app\r\nâ”‚&#160;&#160; â”œâ”€â”€ build.gradle.kts\r\nâ”‚&#160;&#160; â””â”€â”€ src\r\nâ”‚&#160;&#160;     â””â”€â”€ main\r\nâ”‚&#160;&#160;         â””â”€â”€ java\r\nâ”‚&#160;&#160;          &#160;&#160; â””â”€â”€ com/example/app/App.java\r\nâ”œâ”€â”€ plugin\r\nâ”‚&#160;&#160; â”œâ”€â”€ build.gradle.kts\r\nâ”‚&#160;&#160; â””â”€â”€ src\r\nâ”‚&#160;&#160;     â””â”€â”€ main\r\nâ”‚&#160;&#160;         â””â”€â”€ java\r\nâ”‚&#160;&#160;          &#160;&#160; â””â”€â”€ com/example/plugin/Animal.java\r\nâ”œâ”€â”€ plugin-cat\r\nâ”‚&#160;&#160; â”œâ”€â”€ build.gradle.kts\r\nâ”‚&#160;&#160; â””â”€â”€ src\r\nâ”‚&#160;&#160;     â””â”€â”€ main\r\nâ”‚&#160;&#160;         â”œâ”€â”€ java\r\nâ”‚&#160;&#160;         â”‚&#160;&#160; â””â”€â”€ com/example/cat/Cat.java\r\nâ”‚&#160;&#160;         â””â”€â”€ resources\r\nâ”‚&#160;&#160;             â””â”€â”€ META-INF/services/com.example.plugin.Animal\r\nâ”œâ”€â”€ plugin-dog\r\nâ”‚&#160;&#160; â”œâ”€â”€ build.gradle.kts\r\nâ”‚&#160;&#160; â””â”€â”€ src\r\nâ”‚&#160;&#160;     â””â”€â”€ main\r\nâ”‚&#160;&#160;         â”œâ”€â”€ java\r\nâ”‚&#160;&#160;         â”‚&#160;&#160; â””â”€â”€ com/example/dog/Dog.java\r\nâ”‚&#160;&#160;         â””â”€â”€ resources\r\nâ”‚&#160;&#160;             â””â”€â”€ META-INF/services/com.example.plugin.Animal\r\nâ””â”€â”€ settings.gradle.kts\r\n```\r\n\r\nThe interface looks like:\r\n\r\n```lang-java\r\n// Animal.java\r\npublic interface Animal {\r\n    String kind();\r\n}\r\n```\r\n\r\nand its two implementations:\r\n\r\n```lang-java\r\n// Cat.java\r\npublic class Cat implements Animal {\r\n    @Override\r\n    public String kind() {\r\n        return &quot;cat&quot;;\r\n    }\r\n}\r\n```\r\n\r\n```lang-java\r\n// Dog.java\r\npublic class Dog implements Animal {\r\n    @Override\r\n    public String kind() {\r\n        return &quot;dog&quot;;\r\n    }\r\n}\r\n```\r\n\r\nThen put a file named `com.example.plugin.Animal` under each implementation plugin&#39;s `resources` folder. The file contains the canonical name of their implementation class in one line:\r\n\r\n\r\n`plugin-cat/src/main/resources/META-INF/services/com.example.plugin.Animal`:\r\n\r\n```\r\ncom.example.cat.Cat\r\n```\r\n\r\n`plugin-dog/src/main/resources/META-INF/services/com.example.plugin.Animal`:\r\n\r\n```\r\ncom.example.dog.Dog\r\n```\r\n\r\nYou can choose which dependency to include in `app/build.gradle.kts`:\r\n\r\n```lang-gradle\r\ndependencies {\r\n    implementation(project(&quot;:plugin&quot;))\r\n    implementation(project(&quot;:plugin-dog&quot;))\r\n    // implementation(project(&quot;:plugin-cat&quot;))\r\n}\r\n```\r\n\r\nFor this config, the main class `App.java`:\r\n\r\n```lang-java\r\npublic class App {\r\n    public Animal getAnimal() {\r\n        var animal = ServiceLoader.load(Animal.class).findFirst();\r\n        assert animal.isPresent();\r\n        return animal.get();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        System.out.println(new App().getAnimal().kind());\r\n    }\r\n}\r\n```\r\n\r\nwill print `dog` to the console.\r\n\r\nHere is the project for this demo: https://github.com/chehsunliu/stackoverflow/tree/main/a.2023-05-10.gradle.75359691.\r\n\r\n----\r\n\r\n### References\r\n\r\n- https://stackoverflow.com/questions/13254620/meta-inf-services-in-jar-with-gradle\r\n- https://www.baeldung.com/java-spi","title":"Inject implementation of interface from dependent (plugin) JAR?","body":"<p>What you need is Service Provider Interface (SPI).</p>\n<p>Assume you have a 4-module project with the following structure:</p>\n<pre><code>.\nâ”œâ”€â”€ app\nâ”‚Â Â  â”œâ”€â”€ build.gradle.kts\nâ”‚Â Â  â””â”€â”€ src\nâ”‚Â Â      â””â”€â”€ main\nâ”‚Â Â          â””â”€â”€ java\nâ”‚Â Â           Â Â  â””â”€â”€ com/example/app/App.java\nâ”œâ”€â”€ plugin\nâ”‚Â Â  â”œâ”€â”€ build.gradle.kts\nâ”‚Â Â  â””â”€â”€ src\nâ”‚Â Â      â””â”€â”€ main\nâ”‚Â Â          â””â”€â”€ java\nâ”‚Â Â           Â Â  â””â”€â”€ com/example/plugin/Animal.java\nâ”œâ”€â”€ plugin-cat\nâ”‚Â Â  â”œâ”€â”€ build.gradle.kts\nâ”‚Â Â  â””â”€â”€ src\nâ”‚Â Â      â””â”€â”€ main\nâ”‚Â Â          â”œâ”€â”€ java\nâ”‚Â Â          â”‚Â Â  â””â”€â”€ com/example/cat/Cat.java\nâ”‚Â Â          â””â”€â”€ resources\nâ”‚Â Â              â””â”€â”€ META-INF/services/com.example.plugin.Animal\nâ”œâ”€â”€ plugin-dog\nâ”‚Â Â  â”œâ”€â”€ build.gradle.kts\nâ”‚Â Â  â””â”€â”€ src\nâ”‚Â Â      â””â”€â”€ main\nâ”‚Â Â          â”œâ”€â”€ java\nâ”‚Â Â          â”‚Â Â  â””â”€â”€ com/example/dog/Dog.java\nâ”‚Â Â          â””â”€â”€ resources\nâ”‚Â Â              â””â”€â”€ META-INF/services/com.example.plugin.Animal\nâ””â”€â”€ settings.gradle.kts\n</code></pre>\n<p>The interface looks like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Animal.java\npublic interface Animal {\n    String kind();\n}\n</code></pre>\n<p>and its two implementations:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Cat.java\npublic class Cat implements Animal {\n    @Override\n    public String kind() {\n        return &quot;cat&quot;;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>// Dog.java\npublic class Dog implements Animal {\n    @Override\n    public String kind() {\n        return &quot;dog&quot;;\n    }\n}\n</code></pre>\n<p>Then put a file named <code>com.example.plugin.Animal</code> under each implementation plugin's <code>resources</code> folder. The file contains the canonical name of their implementation class in one line:</p>\n<p><code>plugin-cat/src/main/resources/META-INF/services/com.example.plugin.Animal</code>:</p>\n<pre><code>com.example.cat.Cat\n</code></pre>\n<p><code>plugin-dog/src/main/resources/META-INF/services/com.example.plugin.Animal</code>:</p>\n<pre><code>com.example.dog.Dog\n</code></pre>\n<p>You can choose which dependency to include in <code>app/build.gradle.kts</code>:</p>\n<pre class=\"lang-gradle prettyprint-override\"><code>dependencies {\n    implementation(project(&quot;:plugin&quot;))\n    implementation(project(&quot;:plugin-dog&quot;))\n    // implementation(project(&quot;:plugin-cat&quot;))\n}\n</code></pre>\n<p>For this config, the main class <code>App.java</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class App {\n    public Animal getAnimal() {\n        var animal = ServiceLoader.load(Animal.class).findFirst();\n        assert animal.isPresent();\n        return animal.get();\n    }\n\n    public static void main(String[] args) {\n        System.out.println(new App().getAnimal().kind());\n    }\n}\n</code></pre>\n<p>will print <code>dog</code> to the console.</p>\n<p>Here is the project for this demo: <a href=\"https://github.com/chehsunliu/stackoverflow/tree/main/a.2023-05-10.gradle.75359691\" rel=\"nofollow noreferrer\">https://github.com/chehsunliu/stackoverflow/tree/main/a.2023-05-10.gradle.75359691</a>.</p>\n<hr />\n<h3>References</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/13254620/meta-inf-services-in-jar-with-gradle\">META-INF/services in JAR with Gradle</a></li>\n<li><a href=\"https://www.baeldung.com/java-spi\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-spi</a></li>\n</ul>\n"}],"owner":{"account_id":3068305,"reputation":1371,"user_id":2599537,"accept_rate":73,"display_name":"devil0150"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76220776,"answer_count":1,"score":0,"last_activity_date":1683736674,"creation_date":1675676941,"question_id":75359691,"body_markdown":"I have an interface A with a method `Result doAction(Param param)`. I have a Spring application that will use implementations of the interface and call doAction() on it.\r\n\r\nBut the application does not define an implementation itself. The idea is that other people can provide their own implementations of the interface in JARs (plugins), the main application will pull those in as dependencies, and call doAction() on the JAR&#39;s implementation.\r\n\r\nAny idea how I can do this in practice? The ideas I had were:\r\n\r\n* Try to autowire the implementation through Spring Boot, but for that I would need to know its package and add it to the component scan. So it would mean putting requirements on the naming of the &quot;plugin&quot; jar. Something I would prefer not to do.\r\n\r\n* With plain Java my first idea was to keep a registry of implementations (e.g. a `Set&lt;Interface A&gt;`), but the plugin wouldn&#39;t be able to access the registry -- it would be a dependency cycle.\r\n\r\nWhat I&#39;m doing right now is defining a Rest API that the &quot;plugin&quot; needs to implement, deploy the plugin in the same environment and the main application just makes the calls through the Rest API.\r\nBut for performance reasons I&#39;m looking for a solution with more direct calls that doesn&#39;t involve communication over the network. Any suggestions?","title":"Inject implementation of interface from dependent (plugin) JAR?","body":"<p>I have an interface A with a method <code>Result doAction(Param param)</code>. I have a Spring application that will use implementations of the interface and call doAction() on it.</p>\n<p>But the application does not define an implementation itself. The idea is that other people can provide their own implementations of the interface in JARs (plugins), the main application will pull those in as dependencies, and call doAction() on the JAR's implementation.</p>\n<p>Any idea how I can do this in practice? The ideas I had were:</p>\n<ul>\n<li><p>Try to autowire the implementation through Spring Boot, but for that I would need to know its package and add it to the component scan. So it would mean putting requirements on the naming of the &quot;plugin&quot; jar. Something I would prefer not to do.</p>\n</li>\n<li><p>With plain Java my first idea was to keep a registry of implementations (e.g. a <code>Set&lt;Interface A&gt;</code>), but the plugin wouldn't be able to access the registry -- it would be a dependency cycle.</p>\n</li>\n</ul>\n<p>What I'm doing right now is defining a Rest API that the &quot;plugin&quot; needs to implement, deploy the plugin in the same environment and the main application just makes the calls through the Rest API.\nBut for performance reasons I'm looking for a solution with more direct calls that doesn't involve communication over the network. Any suggestions?</p>\n"},{"tags":["java","oop","immutability"],"comments":[{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":3,"creation_date":1462620001,"post_id":37087809,"comment_id":61719727,"body_markdown":"Fun fact: Java does have [a const keyword](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/_keywords.html), but it is not used ;)","body":"Fun fact: Java does have <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/_keywords.html\" rel=\"nofollow noreferrer\">a const keyword</a>, but it is not used ;)"},{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":0,"creation_date":1462620935,"post_id":37087809,"comment_id":61719990,"body_markdown":"One big hint to a class being immutable to me (or having that intent), is if it were marked ```final```.","body":"One big hint to a class being immutable to me (or having that intent), is if it were marked <code>final</code>."},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":1,"creation_date":1487084642,"post_id":37087809,"comment_id":71618325,"body_markdown":"Very much related: [this Q/A which goes into detection of immutability for runtime code](http://stackoverflow.com/questions/203475/how-do-i-identify-immutable-objects-in-java) (if it wasn&#39;t I would have closed this Q down as a dupe).","body":"Very much related: <a href=\"http://stackoverflow.com/questions/203475/how-do-i-identify-immutable-objects-in-java\">this Q/A which goes into detection of immutability for runtime code</a> (if it wasn&#39;t I would have closed this Q down as a dupe)."},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1673457539,"post_id":37087809,"comment_id":132505361,"body_markdown":"There are JEP proposals of things like value types.","body":"There are JEP proposals of things like value types."}],"answers":[{"comments":[{"owner":{"account_id":6701313,"reputation":7980,"user_id":5167682,"accept_rate":29,"display_name":"roottraveller"},"score":1,"creation_date":1499164382,"post_id":37088316,"comment_id":76784022,"body_markdown":"Im getting compiler error with @Immutable annotation in my code - `cannot find symbol @Immutable symbol: class Immutable  1 error`","body":"Im getting compiler error with @Immutable annotation in my code - <code>cannot find symbol @Immutable symbol: class Immutable  1 error</code>"},{"owner":{"account_id":357783,"reputation":5020,"user_id":698168,"display_name":"Julien Kronegg"},"score":0,"creation_date":1529097296,"post_id":37088316,"comment_id":88767708,"body_markdown":"@roottraveller You can find the `@Immutable` annotation in JSR305: `&lt;dependency&gt;\n    &lt;groupId&gt;com.google.code.findbugs&lt;/groupId&gt;\n    &lt;artifactId&gt;jsr305&lt;/artifactId&gt;\n    &lt;version&gt;3.0.2&lt;/version&gt;\n&lt;/dependency&gt;`","body":"@roottraveller You can find the <code>@Immutable</code> annotation in JSR305: <code>&lt;dependency&gt;     &lt;groupId&gt;com.google.code.findbugs&lt;&#47;groupId&gt;     &lt;artifactId&gt;jsr305&lt;&#47;artifactId&gt;     &lt;version&gt;3.0.2&lt;&#47;version&gt; &lt;&#47;dependency&gt;</code>"},{"owner":{"account_id":357783,"reputation":5020,"user_id":698168,"display_name":"Julien Kronegg"},"score":1,"creation_date":1529097501,"post_id":37088316,"comment_id":88767756,"body_markdown":"Regarding `final` fields: this only give the guaranty that the _reference_ will not be changed. However, the _value_ of a mutable field (e.g. `java.util.List`) can still be changed.","body":"Regarding <code>final</code> fields: this only give the guaranty that the <i>reference</i> will not be changed. However, the <i>value</i> of a mutable field (e.g. <code>java.util.List</code>) can still be changed."},{"owner":{"account_id":1175385,"reputation":22626,"user_id":1151521,"accept_rate":77,"display_name":"Aleksandr Dubinsky"},"score":0,"creation_date":1614071729,"post_id":37088316,"comment_id":117265837,"body_markdown":"Java now has [`record`](https://openjdk.java.net/jeps/384). Alas, it does not (yet?) declare `@Immutable`.","body":"Java now has <a href=\"https://openjdk.java.net/jeps/384\" rel=\"nofollow noreferrer\"><code>record</code></a>. Alas, it does not (yet?) declare <code>@Immutable</code>."},{"owner":{"account_id":234754,"reputation":5730,"user_id":501113,"accept_rate":90,"display_name":"chaotic3quilibrium"},"score":0,"creation_date":1673363517,"post_id":37088316,"comment_id":132478843,"body_markdown":"@AleksandrDubinsky Java&#39;s record is shallow-immutable. I address that fully in the Answer I posted: https://stackoverflow.com/a/75043881/501113","body":"@AleksandrDubinsky Java&#39;s record is shallow-immutable. I address that fully in the Answer I posted: <a href=\"https://stackoverflow.com/a/75043881/501113\">stackoverflow.com/a/75043881/501113</a>"}],"tags":[],"owner":{"account_id":1880749,"reputation":3097,"user_id":4465354,"display_name":"qwwdfsad"},"comment_count":5,"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1462622701,"creation_date":1462622701,"answer_id":37088316,"question_id":37087809,"body_markdown":"Java has no first-class immutability support, so you have no reliable way to detect if class is immutable.\r\n\r\n[Java Concurrency In Practice][1] recommends (see Appendix A as reference) to use class-level `@Immutable` annotation from `javax.annotation.concurrent` and this is the most convenient, common and standard way to indicate immutability; custom javadoc is fine too. Note that it&#39;s only declaration, not actual constraint.\r\n\r\nDesign of the class is also a good indicator:\r\n\r\n  - Have only final fields (but in rare cases it&#39;s possible to have some non-final fields and still be immutable, for example see String#hashCode)\r\n  - It&#39;s properly constructed (`this` reference doesn&#39;t leak from constructor)\r\n  - Object state cannot be modified (so class should not have setters and mutator methods)\r\n  - Don&#39;t store **external** (passed to constructor) references to mutable objects (e.g. create defensive copy of passed collection argument)\r\n\r\nFull list of immutable class design properties can be found in [Oracle tutorials][2].\r\n\r\nSo, to check if class is immutable you first look at class level annotations and javadoc and only then at implementation itself. \r\n\r\nTo provide additional sanity-check (if you think that annotated as immutable class can be mutable by mistake), there is [Mutability Detector][3] plugin for FindBugs (static analysis tool), which effectively doing same thing listed above: checks class has `@Immutable` annotation and verifies (via reflection) that all immutability rules are satisfied (with some additional things like immutable collection support from Guava etc.). Mutability detector also can be used as library without FindBugs, which allows you to write tests like that:\r\n\r\n    @Test\r\n    public void testImmutable() {\r\n        assertImmutable(MyClass.class);\r\n    }\r\n\r\n\r\n  [1]: http://jcip.net\r\n  [2]: https://docs.oracle.com/javase/tutorial/essential/concurrency/imstrat.html\r\n  [3]: http://mutabilitydetector.org/","title":"How to find out if a class is immutable","body":"<p>Java has no first-class immutability support, so you have no reliable way to detect if class is immutable.</p>\n\n<p><a href=\"http://jcip.net\">Java Concurrency In Practice</a> recommends (see Appendix A as reference) to use class-level <code>@Immutable</code> annotation from <code>javax.annotation.concurrent</code> and this is the most convenient, common and standard way to indicate immutability; custom javadoc is fine too. Note that it's only declaration, not actual constraint.</p>\n\n<p>Design of the class is also a good indicator:</p>\n\n<ul>\n<li>Have only final fields (but in rare cases it's possible to have some non-final fields and still be immutable, for example see String#hashCode)</li>\n<li>It's properly constructed (<code>this</code> reference doesn't leak from constructor)</li>\n<li>Object state cannot be modified (so class should not have setters and mutator methods)</li>\n<li>Don't store <strong>external</strong> (passed to constructor) references to mutable objects (e.g. create defensive copy of passed collection argument)</li>\n</ul>\n\n<p>Full list of immutable class design properties can be found in <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/imstrat.html\">Oracle tutorials</a>.</p>\n\n<p>So, to check if class is immutable you first look at class level annotations and javadoc and only then at implementation itself. </p>\n\n<p>To provide additional sanity-check (if you think that annotated as immutable class can be mutable by mistake), there is <a href=\"http://mutabilitydetector.org/\">Mutability Detector</a> plugin for FindBugs (static analysis tool), which effectively doing same thing listed above: checks class has <code>@Immutable</code> annotation and verifies (via reflection) that all immutability rules are satisfied (with some additional things like immutable collection support from Guava etc.). Mutability detector also can be used as library without FindBugs, which allows you to write tests like that:</p>\n\n<pre><code>@Test\npublic void testImmutable() {\n    assertImmutable(MyClass.class);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":357783,"reputation":5020,"user_id":698168,"display_name":"Julien Kronegg"},"score":2,"creation_date":1529098267,"post_id":48608620,"comment_id":88767975,"body_markdown":"This is not a good example because the Lombok `@Value` only helps you to have an immutable class, but the Lombok implementation is incomplete (at least at the time of writing). In your case, the `java.util.Date` field is still mutable even if `private final`: the Lombok generated constructor does not clone the Date, so it can be modified externally, e.g. `Date d = new Date(); FinalClass fc = new FinalClass(1,&quot;&quot;,d); d.setTime(0);`. See also in https://projectlombok.org/features/Value : the `String[]` argument is not cloned in the constructor, so its content can be modified afterwards.","body":"This is not a good example because the Lombok <code>@Value</code> only helps you to have an immutable class, but the Lombok implementation is incomplete (at least at the time of writing). In your case, the <code>java.util.Date</code> field is still mutable even if <code>private final</code>: the Lombok generated constructor does not clone the Date, so it can be modified externally, e.g. <code>Date d = new Date(); FinalClass fc = new FinalClass(1,&quot;&quot;,d); d.setTime(0);</code>. See also in <a href=\"https://projectlombok.org/features/Value\" rel=\"nofollow noreferrer\">projectlombok.org/features/Value</a> : the <code>String[]</code> argument is not cloned in the constructor, so its content can be modified afterwards."},{"owner":{"account_id":357783,"reputation":5020,"user_id":698168,"display_name":"Julien Kronegg"},"score":1,"creation_date":1529098762,"post_id":48608620,"comment_id":88768137,"body_markdown":"Setting a field as `final` is not a guarantee to make it immutable. This is only the _reference_ that is immutable, not its _value_ (see your `java.util.Date` field). The reverse is also true: your field may be immutable even if not `final` (see the cached value of the `hashCode()` method from the immutable class `String`).","body":"Setting a field as <code>final</code> is not a guarantee to make it immutable. This is only the <i>reference</i> that is immutable, not its <i>value</i> (see your <code>java.util.Date</code> field). The reverse is also true: your field may be immutable even if not <code>final</code> (see the cached value of the <code>hashCode()</code> method from the immutable class <code>String</code>)."},{"owner":{"account_id":357783,"reputation":5020,"user_id":698168,"display_name":"Julien Kronegg"},"score":1,"creation_date":1529099369,"post_id":48608620,"comment_id":88768305,"body_markdown":"This does not answer to the OP question (_how to find out if a class is immutable?_).","body":"This does not answer to the OP question (<i>how to find out if a class is immutable?</i>)."}],"tags":[],"owner":{"account_id":3155243,"reputation":1467,"user_id":2667792,"accept_rate":78,"display_name":"max3d"},"comment_count":3,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1517751414,"creation_date":1517751414,"answer_id":48608620,"question_id":37087809,"body_markdown":"According to [Java documentation][1]:\r\n\r\n - Don&#39;t provide &quot;setter&quot; methods â€” methods that modify fields or objects referred to by fields.\r\n - Make all fields final and private.\r\n - Don&#39;t allow subclasses to override methods. The simplest way to do this is to declare the class as final. A more sophisticated approach is to make the constructor private and construct instances in factory methods.\r\n - If the instance fields include references to mutable objects, don&#39;t allow those objects to be changed:\r\n  -  Don&#39;t provide methods that modify the mutable objects.\r\n  -  Don&#39;t share references to the mutable objects. Never store references to external, mutable objects passed to the constructor; if necessary, create copies, and store references to the copies. Similarly, create copies of your internal mutable objects when necessary to avoid returning the originals in your methods.\r\n\r\nThe easiest way to enforce immutability is via **@Value** annotation in Lombok library. \r\n\r\nIf you use IntelliJ, you can check class byte code for above-mentioned bullets\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/essential/concurrency/imstrat.html\r\n  [2]: https://i.stack.imgur.com/vQZXr.png","title":"How to find out if a class is immutable","body":"<p>According to <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/imstrat.html\" rel=\"nofollow noreferrer\">Java documentation</a>:</p>\n\n<ul>\n<li>Don't provide \"setter\" methods â€” methods that modify fields or objects referred to by fields.</li>\n<li>Make all fields final and private.</li>\n<li>Don't allow subclasses to override methods. The simplest way to do this is to declare the class as final. A more sophisticated approach is to make the constructor private and construct instances in factory methods.</li>\n<li>If the instance fields include references to mutable objects, don't allow those objects to be changed:\n\n<ul>\n<li>Don't provide methods that modify the mutable objects.</li>\n<li>Don't share references to the mutable objects. Never store references to external, mutable objects passed to the constructor; if necessary, create copies, and store references to the copies. Similarly, create copies of your internal mutable objects when necessary to avoid returning the originals in your methods.</li>\n</ul></li>\n</ul>\n\n<p>The easiest way to enforce immutability is via <strong>@Value</strong> annotation in Lombok library. </p>\n\n<p>If you use IntelliJ, you can check class byte code for above-mentioned bullets\n<a href=\"https://i.stack.imgur.com/vQZXr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vQZXr.png\" alt=\"enter image description here\"></a></p>\n"},{"comments":[{"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"score":0,"creation_date":1683638570,"post_id":75043881,"comment_id":134394834,"body_markdown":"The github project includes a .gitignore, a license, and a readme file, but not a single actual java source code file.","body":"The github project includes a .gitignore, a license, and a readme file, but not a single actual java source code file."},{"owner":{"account_id":234754,"reputation":5730,"user_id":501113,"accept_rate":90,"display_name":"chaotic3quilibrium"},"score":1,"creation_date":1683735650,"post_id":75043881,"comment_id":134413497,"body_markdown":"@MikeNakis I just haven&#39;t yet merged the &quot;genesis&quot; branch into &quot;main&quot;. I hope to get to that in the next week or so. IOW, if you go back to that link, and look at the &quot;genesis&quot; branch, you can see all of the code. Here&#39;s a direct link to it: https://github.com/qalocate/immutability-detector/tree/genesis","body":"@MikeNakis I just haven&#39;t yet merged the &quot;genesis&quot; branch into &quot;main&quot;. I hope to get to that in the next week or so. IOW, if you go back to that link, and look at the &quot;genesis&quot; branch, you can see all of the code. Here&#39;s a direct link to it: <a href=\"https://github.com/qalocate/immutability-detector/tree/genesis\" rel=\"nofollow noreferrer\">github.com/qalocate/immutability-detector/tree/genesis</a>"},{"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"score":1,"creation_date":1683744836,"post_id":75043881,"comment_id":134415464,"body_markdown":"OK I see. I saw that branch but did not notice the `src` directory in it.","body":"OK I see. I saw that branch but did not notice the <code>src</code> directory in it."}],"tags":[],"owner":{"account_id":234754,"reputation":5730,"user_id":501113,"accept_rate":90,"display_name":"chaotic3quilibrium"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1683736400,"creation_date":1673126768,"answer_id":75043881,"question_id":37087809,"body_markdown":"The code in this answer is a simplified reduction of my full open-source version, which I have published on [Github][1] (please look at the unmerged `genesis` branch).\r\n\r\nPlease also checkout a very nicely packaged similar solution available in this [StackOverflow Answer][2]. \r\n\r\n----------\r\n\r\n***This answer assumes Java 16 or later***\r\n\r\n*For prior versions of Java, a refactoring is required to remove dependencies to features introduced into Java and the Java platform up to and including Java 16.*\r\n\r\n----------\r\n\r\n**Detecting Immutability in Java**\r\n----------------------------------\r\n\r\nSince the Java language and platform provide nothing explicit with which to reliably detect immutability, it must be custom written.\r\n\r\nBefore rolling a custom Java immutability detector, there are several useful distinctions to understand.\r\n\r\n**Distinction 1:**\r\n\r\nThere are types of immutability:\r\n\r\n 1. compile-time-vs-runtime\r\n    - compile-time immutability, while desirable, isn&#39;t (yet?) available with Java\r\n    - providing run-time immutability detection has a significant impact on enhancing code comprehension, reducing reasoning efforts, and enhancing security\r\n 2. [shallow-vs-deep][3]\r\n    - shallow - a Java `record`\r\n    - middle - a Java `enum`\r\n    - deep - java.lang.`String`\r\n 3. [total-vs-effective][4]\r\n    - class-level versus instance-level immutability\r\n    - deals with the runtime timing of when the instance becomes irreversibly immutable\r\n 4. verified-vs-trusted\r\n    - deals with reversing an instance&#39;s immutability via Java reflection (innocent or malicious)\r\n\r\nDetecting immutability in Java isn&#39;t an either/or. It is predicated on a spectrum of anticipated trust. To the degree one has control of one&#39;s environment correlates strongly to the degree the trust of any detected immutability. This trust continuum has been [discretized][5] into the Java `enum`, `ImmutabilityType`, below. The `enum` enables client code to decide upon what level of trust it would prefer to rely.\r\n\r\nWhile it would be highly desirable to a large number of software engineers, Java does not provide compile-time enforced immutability detection. As an analog to Rust&#39;s beautiful memory management solution to C/C++&#39;s undesirable memory utilization potholes, it would be a huge leap forward if/when Java acquired compile-time enforced immutability detection. However, this doesn&#39;t currently appear on any known Java roadmaps (as of 2023/Jan).\r\n\r\n**Distinction 2:**\r\n\r\nThe use of the word &quot;calcification&quot; will describe the process of an instance moving from a mutable (writable or fluid) to an irreversibly immutable (read-only or calcified) state.\r\n\r\nEvery instantiation of a class involves a period of time where the instance is mutable. IOW, the default state of an instance, upon creation, is mutability. This means it is the responsibility of the class designer to decide if, and then when, the class becomes irreversibly immutable. If desiring immutability, this actually simplifies to deciding whether the instance remains mutable past the end of the execution of its constructor.\r\n\r\n**Distinction 3:**\r\n\r\nBecause immutability is about permanently calcifying the state of an instance of a class, it is important to distinguish at run-time BY WHEN the state has become irreversibly immutable.\r\n\r\nThe archetype, or ideal, for implementing immutability is to design the state to be calcified by the end of the execution of the class&#39;s constructor for a given instance. However, there are contexts where it is required to delay the calcification until sometime after the constructor completes execution. Whether this is due to poor design choices is outside the scope of this response, as the use cases exist and must be addressed.\r\n\r\n**Distinction 4:**\r\n\r\nDue to the implications of the last distinction, detecting immutability must be done at each of the class and the instance levels. The description of class level immutability applies to all instance of that class. The description of instance level immutability applies to some subset of instances from their parent class.\r\n\r\nAs such, defining two different functions is needed for detecting immutability. One which takes a `Class&lt;?&gt;` as a parameter and returns the class level of immutability. And another which takes an `Object` instance as a parameter returns the instance-level of immutability at that point during runtime.\r\n\r\n----------\r\n\r\n**Working on the problem space**\r\n--------------------------------\r\n\r\n```java\r\npublic enum ImmutabilityType {\r\n  UNDEFINED,    //unable to assert any trustable degree of deep immutability\r\n  PROPERTY_IRREVERSIBLY_IMMUTABLE, //trusting a post-instantiation window of mutability requiring an ImmutableEffective.isIrreversiblyImmutable() style of check\r\n  BEFORE_END_OF_CLASS_CONSTRUCTOR,  //trusting the implementor to properly enforce the Immutable contract, see Immutable interface Javadoc\r\n  JAVA_CONSTANT //trusting the Java compiler and platform\r\n}\r\n```\r\n\r\nThis Java `enum` describes the kinds of immutability detected.\r\n\r\nThe JavaDoc for the &quot;immutability contract&quot; referenced by the comment following the `ImmutabilityType.BEFORE_END_OF_CLASS_CONSTRUCTOR` enum instance is located [here][6].\r\n\r\n**Two Target Functions:**\r\n\r\nUsing the `ImmutabilityType` enum as their return type, the two target functions are defined below. The first function, `classIs()`, detects class-level immutability. And the second function, `instanceIs()`, detects instance-level immutability. \r\n\r\n```java\r\npublic static ImmutabilityType classIs(Class&lt;?&gt; class___) { ... }\r\n\r\npublic static ImmutabilityType instanceIs(Object o) { ... }\r\n```\r\n\r\nTo implement the two target functions, the infrastructure supporting them must be defined.\r\n\r\n**Subset of well-known Java Platform immutable classes:**\r\n```java\r\nprivate static final Set&lt;Class&lt;?&gt;&gt; SUBSET_OF_KNOWN_JAVA_PLATFORM_IMMUTABLE_CLASSES =\r\n  Set.of(\r\n    //Meta-classes\r\n    Class.class, MethodType.class,\r\n    //primitive class wrappers\r\n    Boolean.class, Byte.class, Short.class, Character.class, Integer.class, Long.class, Float.class, Double.class,\r\n    //classes\r\n    String.class, BigInteger.class, BigDecimal.class\r\n  );\r\n```\r\n\r\nThis is just a small subset of the many immutable classes defined in the Java platform. Many more can and should be added, like `java.time.ZonedDateTime`, etc.\r\n\r\n**Java Platform Types:**\r\n```java\r\npublic static Optional&lt;ImmutabilityType&gt; classIsJavaConstant(Class&lt;?&gt; class___) {\r\n  return SUBSET_OF_KNOWN_JAVA_PLATFORM_IMMUTABLE_CLASSES.contains(class___)\r\n            || Constable.class.isAssignableFrom(class___)    //Covers: MethodHandle\r\n            || ConstantDesc.class.isAssignableFrom(class___) //Covers: ClassDesc, MethodTypeDesc, MethodHandleDesc, and DynamicConstantDesc\r\n            || class___.isEnum()\r\n          ? Optional.of(ImmutabilityType.JAVA_CONSTANT)\r\n          : Optional.empty();\r\n}\r\n```\r\n\r\nIt is somewhat risky to include the `class___.isEnum()` check. A Java enum is technically too open to assume by-default-immutabililty, even though the vast majority of its actual in the field usages are for the default enum which is immutable at the level of the Java platform.\r\n\r\nWhile this particular implementation example doesn&#39;t offer the option, a design enhancement would enable some form of registering of an enum as mutable (`ImmutabilityType.UNDEFINED`), overriding the return value from this function.\r\n\r\n**Java Record:**\r\n```java\r\nprivate static ImmutabilityType internalClassIsRecord(Class&lt;Record&gt; classRecord) {\r\n  var resolvedImmutabilityType = ImmutabilityType.JAVA_CONSTANT;\r\n  var recordComponents = Arrays.stream(classRecord.getRecordComponents()).iterator();\r\n  while ((resolvedImmutabilityType != ImmutabilityType.UNDEFINED) &amp;&amp; recordComponents.hasNext()) {\r\n    var recordComponent = recordComponents.next();\r\n    if (!recordComponent.getType().isPrimitive()) { //within a Record, a primitive is always immutable\r\n      var immutabilityType = classIs(recordComponent.getType());\r\n      if (immutabilityType.ordinal() &lt; resolvedImmutabilityType.ordinal())\r\n        resolvedImmutabilityType = immutabilityType;\r\n    }\r\n  }\r\n\r\n  return resolvedImmutabilityType;\r\n}\r\n\r\npublic static Optional&lt;ImmutabilityType&gt; classIsRecord(Class&lt;?&gt; class___) {\r\n  return class___.isRecord()\r\n          ? Optional.of(internalClassIsRecord((Class&lt;Record&gt;) class___))\r\n          : Optional.empty();\r\n}\r\n```\r\n\r\nJava records only provide shallow immutability. To detect deep immutability, the record must be recursively validated. The recursion occurs with the call to `classIs(recordComponent.getType())` (defined further down) in the function `internalClassIsRecord`.\r\n\r\n**Via [JCIP Annotation][6] or Marker Interfaces:**\r\n```java\r\npublic interface Immutable {}\r\npublic interface ImmutableEffective {\r\n  boolean isIrreversiblyImmutable();\r\n}\r\n\r\npublic static Optional&lt;ImmutabilityType&gt; classIsJcipAnnotationOrImmutableInterface(Class&lt;?&gt; class___) {\r\n  return class___.isAnnotationPresent(net.jcip.annotations.Immutable.class) || Immutable.class.isAssignableFrom(class___)\r\n          ? Optional.of(ImmutabilityType.BEFORE_END_OF_CLASS_CONSTRUCTOR)\r\n          : Optional.empty();\r\n}\r\n\r\npublic static Optional&lt;ImmutabilityType&gt; classIsImmutableEffective(Class&lt;?&gt; class___) {\r\n  return ImmutableEffective.class.isAssignableFrom(class___)\r\n          ? Optional.of(ImmutabilityType.PROPERTY_IRREVERSIBLY_IMMUTABLE)\r\n          : Optional.empty();\r\n}\r\n```\r\n\r\nUsing everything defined above, it&#39;s time to implement the two target functions.\r\n\r\n**Class-oriented `classIs` function:**\r\n```java\r\npublic static ImmutabilityType classIs(Class&lt;?&gt; class___) {\r\n  return class___.isArray()\r\n      ? ImmutabilityType.UNDEFINED //java.lang.Array is always mutable\r\n      : classIsJavaConstant(class___)\r\n          .or(() -&gt; classIsRecord(class___))\r\n          .or(() -&gt; classIsJcipAnnotationOrImmutableInterface(class___))\r\n          .or(() -&gt; classIsImmutableEffective(class___))\r\n          .orElse(ImmutabilityType.UNDEFINED);\r\n}\r\n```\r\n\r\n**Instance-oriented `instanceIs` function:**\r\n```java\r\nprivate static boolean internalIsRecordHasAtLeastOneIrreversiblyImmutableStillUnset(Record record) throws InvocationTargetException, IllegalAccessException {\r\n  boolean result = false; //when set to true, it has hit an isIrreversiblyImmutable() that remains false\r\n\r\n  var classRecord = record.getClass();\r\n  var recordComponents = Arrays.stream(classRecord.getRecordComponents()).iterator();\r\n  while (!result &amp;&amp; recordComponents.hasNext()) {\r\n    var recordComponent = recordComponents.next();\r\n    if (ImmutableEffective.class.isAssignableFrom(recordComponent.getType())) {\r\n      var object = recordComponent.getAccessor().invoke(record);\r\n      result = !((ImmutableEffective)object).isIrreversiblyImmutable();\r\n    } else if (recordComponent.getType().isRecord()) {\r\n      result = internalIsRecordHasAtLeastOneIrreversiblyImmutableStillUnset((Record)recordComponent.getAccessor().invoke(record));\r\n    }\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\npublic static ImmutabilityType instanceIs(Object o) {\r\n  var result = classIs(o.getClass());\r\n\r\n  if (result == ImmutabilityType.PROPERTY_IRREVERSIBLY_IMMUTABLE)\r\n    if (o instanceof ImmutableEffective immutableEffective) {\r\n      if (!immutableEffective.isIrreversiblyImmutable())\r\n        result = ImmutabilityType.UNDEFINED;\r\n    } else\r\n    if (o instanceof Record record) {\r\n      boolean hasAtLeastOneIrreversiblyImmutableStillUnset;\r\n      try {\r\n        hasAtLeastOneIrreversiblyImmutableStillUnset = internalIsRecordHasAtLeastOneIrreversiblyImmutableStillUnset(record);\r\n        if (hasAtLeastOneIrreversiblyImmutableStillUnset)\r\n          result = ImmutabilityType.UNDEFINED;\r\n      } catch (InvocationTargetException | IllegalAccessException ignored) {\r\n        result = ImmutabilityType.UNDEFINED; //unable to resolve\r\n      }\r\n    } else\r\n      result = ImmutabilityType.UNDEFINED; //unable to resolve\r\n\r\n  return result;\r\n}\r\n```\r\n\r\n----------\r\n\r\n**Example usages:**\r\n-------------------\r\n\r\n```java\r\n//Setup definitions\r\nstatic class ImmutableEffectiveImpl implements ImmutableEffective {\r\n  private boolean irreversiblyImmutable;\r\n\r\n  public ImmutableEffectiveImpl(boolean irreversiblyImmutable) {\r\n    this.irreversiblyImmutable = irreversiblyImmutable;\r\n  }\r\n\r\n  public boolean isIrreversiblyImmutable() {\r\n    return irreversiblyImmutable;\r\n  }\r\n\r\n  public void setAsIrreversiblyImmutable() {\r\n    irreversiblyImmutable = true;\r\n  }\r\n}\r\n\r\n@net.jcip.annotations.Immutable\r\npublic static class JcipAnnotationImmutable {}\r\n\r\n//Code to produce output\r\nStream.of(\r\n  new Object(),\r\n  new ImmutableEffectiveImpl(false),\r\n  new ImmutableEffectiveImpl(true),\r\n  new JcipAnnotationImmutable(),\r\n  new Immutable() {},\r\n  &quot;Jim&quot;\r\n).forEachOrdered(\r\n  o -&gt; {\r\n    var oC = o.getClass();\r\n    var className = oC.toString().substring(6);\r\n    System.out.println(className + &quot; - &quot; + o);\r\n    System.out.println(&quot;  isClass(): &quot; + classIs(oC));\r\n    System.out.println(&quot;  isInstance(): &quot; + instanceIs(o));\r\n  }\r\n);\r\n```\r\n\r\nAnd below is what the above code produces.\r\n\r\nPlease specifically notice the contrast between line 6 (`isInstance(): UNDEFINED`) and line 9 (`isInstance(): PROPERTY_IRREVERSIBLY_IMMUTABLE`).\r\n\r\nThis is where the difference in the returned `ImmutabilityType`s is exhibited between the class-level and instance-level function calls.\r\n```text\r\njava.lang.Object - java.lang.Object@6e8cf4c6\r\n  isClass(): UNDEFINED\r\n  isInstance(): UNDEFINED\r\nimmutability_so.Main$ImmutableEffectiveImpl - immutability_so.Main$ImmutableEffectiveImpl@66a29884\r\n  isClass(): PROPERTY_IRREVERSIBLY_IMMUTABLE\r\n  isInstance(): UNDEFINED\r\nimmutability_so.Main$ImmutableEffectiveImpl - immutability_so.Main$ImmutableEffectiveImpl@4769b07b\r\n  isClass(): PROPERTY_IRREVERSIBLY_IMMUTABLE\r\n  isInstance(): PROPERTY_IRREVERSIBLY_IMMUTABLE\r\nimmutability_so.Main$JcipAnnotationImmutable - immutability_so.Main$JcipAnnotationImmutable@cc34f4d\r\n  isClass(): BEFORE_END_OF_CLASS_CONSTRUCTOR\r\n  isInstance(): BEFORE_END_OF_CLASS_CONSTRUCTOR\r\nimmutability_so.Main$1 - immutability_so.Main$1@277050dc\r\n  isClass(): BEFORE_END_OF_CLASS_CONSTRUCTOR\r\n  isInstance(): BEFORE_END_OF_CLASS_CONSTRUCTOR\r\njava.lang.String - Jim\r\n  isClass(): JAVA_CONSTANT\r\n  isInstance(): JAVA_CONSTANT\r\n```\r\n\r\n----------\r\n\r\nThe code in this answer is a simplified reduction of my full open-source version, which I have published on [Github][1] (please look at the unmerged `genesis` branch).\r\n\r\nPlease also checkout a very nicely packaged similar solution available in this [StackOverflow Answer][2].\r\n\r\n\r\n  [1]: https://github.com/qalocate/immutability-detector\r\n  [2]: https://stackoverflow.com/a/76209829/501113\r\n  [3]: https://stackoverflow.com/a/62066260/501113\r\n  [4]: https://stackoverflow.com/a/16678522/501113\r\n  [5]: https://en.wikipedia.org/wiki/Discretization\r\n  [6]: https://jcip.net/annotations/doc/net/jcip/annotations/Immutable.html","title":"How to find out if a class is immutable","body":"<p>The code in this answer is a simplified reduction of my full open-source version, which I have published on <a href=\"https://github.com/qalocate/immutability-detector\" rel=\"nofollow noreferrer\">Github</a> (please look at the unmerged <code>genesis</code> branch).</p>\n<p>Please also checkout a very nicely packaged similar solution available in this <a href=\"https://stackoverflow.com/a/76209829/501113\">StackOverflow Answer</a>.</p>\n<hr />\n<p><em><strong>This answer assumes Java 16 or later</strong></em></p>\n<p><em>For prior versions of Java, a refactoring is required to remove dependencies to features introduced into Java and the Java platform up to and including Java 16.</em></p>\n<hr />\n<h2><strong>Detecting Immutability in Java</strong></h2>\n<p>Since the Java language and platform provide nothing explicit with which to reliably detect immutability, it must be custom written.</p>\n<p>Before rolling a custom Java immutability detector, there are several useful distinctions to understand.</p>\n<p><strong>Distinction 1:</strong></p>\n<p>There are types of immutability:</p>\n<ol>\n<li>compile-time-vs-runtime\n<ul>\n<li>compile-time immutability, while desirable, isn't (yet?) available with Java</li>\n<li>providing run-time immutability detection has a significant impact on enhancing code comprehension, reducing reasoning efforts, and enhancing security</li>\n</ul>\n</li>\n<li><a href=\"https://stackoverflow.com/a/62066260/501113\">shallow-vs-deep</a>\n<ul>\n<li>shallow - a Java <code>record</code></li>\n<li>middle - a Java <code>enum</code></li>\n<li>deep - java.lang.<code>String</code></li>\n</ul>\n</li>\n<li><a href=\"https://stackoverflow.com/a/16678522/501113\">total-vs-effective</a>\n<ul>\n<li>class-level versus instance-level immutability</li>\n<li>deals with the runtime timing of when the instance becomes irreversibly immutable</li>\n</ul>\n</li>\n<li>verified-vs-trusted\n<ul>\n<li>deals with reversing an instance's immutability via Java reflection (innocent or malicious)</li>\n</ul>\n</li>\n</ol>\n<p>Detecting immutability in Java isn't an either/or. It is predicated on a spectrum of anticipated trust. To the degree one has control of one's environment correlates strongly to the degree the trust of any detected immutability. This trust continuum has been <a href=\"https://en.wikipedia.org/wiki/Discretization\" rel=\"nofollow noreferrer\">discretized</a> into the Java <code>enum</code>, <code>ImmutabilityType</code>, below. The <code>enum</code> enables client code to decide upon what level of trust it would prefer to rely.</p>\n<p>While it would be highly desirable to a large number of software engineers, Java does not provide compile-time enforced immutability detection. As an analog to Rust's beautiful memory management solution to C/C++'s undesirable memory utilization potholes, it would be a huge leap forward if/when Java acquired compile-time enforced immutability detection. However, this doesn't currently appear on any known Java roadmaps (as of 2023/Jan).</p>\n<p><strong>Distinction 2:</strong></p>\n<p>The use of the word &quot;calcification&quot; will describe the process of an instance moving from a mutable (writable or fluid) to an irreversibly immutable (read-only or calcified) state.</p>\n<p>Every instantiation of a class involves a period of time where the instance is mutable. IOW, the default state of an instance, upon creation, is mutability. This means it is the responsibility of the class designer to decide if, and then when, the class becomes irreversibly immutable. If desiring immutability, this actually simplifies to deciding whether the instance remains mutable past the end of the execution of its constructor.</p>\n<p><strong>Distinction 3:</strong></p>\n<p>Because immutability is about permanently calcifying the state of an instance of a class, it is important to distinguish at run-time BY WHEN the state has become irreversibly immutable.</p>\n<p>The archetype, or ideal, for implementing immutability is to design the state to be calcified by the end of the execution of the class's constructor for a given instance. However, there are contexts where it is required to delay the calcification until sometime after the constructor completes execution. Whether this is due to poor design choices is outside the scope of this response, as the use cases exist and must be addressed.</p>\n<p><strong>Distinction 4:</strong></p>\n<p>Due to the implications of the last distinction, detecting immutability must be done at each of the class and the instance levels. The description of class level immutability applies to all instance of that class. The description of instance level immutability applies to some subset of instances from their parent class.</p>\n<p>As such, defining two different functions is needed for detecting immutability. One which takes a <code>Class&lt;?&gt;</code> as a parameter and returns the class level of immutability. And another which takes an <code>Object</code> instance as a parameter returns the instance-level of immutability at that point during runtime.</p>\n<hr />\n<h2><strong>Working on the problem space</strong></h2>\n<pre class=\"lang-java prettyprint-override\"><code>public enum ImmutabilityType {\n  UNDEFINED,    //unable to assert any trustable degree of deep immutability\n  PROPERTY_IRREVERSIBLY_IMMUTABLE, //trusting a post-instantiation window of mutability requiring an ImmutableEffective.isIrreversiblyImmutable() style of check\n  BEFORE_END_OF_CLASS_CONSTRUCTOR,  //trusting the implementor to properly enforce the Immutable contract, see Immutable interface Javadoc\n  JAVA_CONSTANT //trusting the Java compiler and platform\n}\n</code></pre>\n<p>This Java <code>enum</code> describes the kinds of immutability detected.</p>\n<p>The JavaDoc for the &quot;immutability contract&quot; referenced by the comment following the <code>ImmutabilityType.BEFORE_END_OF_CLASS_CONSTRUCTOR</code> enum instance is located <a href=\"https://jcip.net/annotations/doc/net/jcip/annotations/Immutable.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p><strong>Two Target Functions:</strong></p>\n<p>Using the <code>ImmutabilityType</code> enum as their return type, the two target functions are defined below. The first function, <code>classIs()</code>, detects class-level immutability. And the second function, <code>instanceIs()</code>, detects instance-level immutability.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static ImmutabilityType classIs(Class&lt;?&gt; class___) { ... }\n\npublic static ImmutabilityType instanceIs(Object o) { ... }\n</code></pre>\n<p>To implement the two target functions, the infrastructure supporting them must be defined.</p>\n<p><strong>Subset of well-known Java Platform immutable classes:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final Set&lt;Class&lt;?&gt;&gt; SUBSET_OF_KNOWN_JAVA_PLATFORM_IMMUTABLE_CLASSES =\n  Set.of(\n    //Meta-classes\n    Class.class, MethodType.class,\n    //primitive class wrappers\n    Boolean.class, Byte.class, Short.class, Character.class, Integer.class, Long.class, Float.class, Double.class,\n    //classes\n    String.class, BigInteger.class, BigDecimal.class\n  );\n</code></pre>\n<p>This is just a small subset of the many immutable classes defined in the Java platform. Many more can and should be added, like <code>java.time.ZonedDateTime</code>, etc.</p>\n<p><strong>Java Platform Types:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public static Optional&lt;ImmutabilityType&gt; classIsJavaConstant(Class&lt;?&gt; class___) {\n  return SUBSET_OF_KNOWN_JAVA_PLATFORM_IMMUTABLE_CLASSES.contains(class___)\n            || Constable.class.isAssignableFrom(class___)    //Covers: MethodHandle\n            || ConstantDesc.class.isAssignableFrom(class___) //Covers: ClassDesc, MethodTypeDesc, MethodHandleDesc, and DynamicConstantDesc\n            || class___.isEnum()\n          ? Optional.of(ImmutabilityType.JAVA_CONSTANT)\n          : Optional.empty();\n}\n</code></pre>\n<p>It is somewhat risky to include the <code>class___.isEnum()</code> check. A Java enum is technically too open to assume by-default-immutabililty, even though the vast majority of its actual in the field usages are for the default enum which is immutable at the level of the Java platform.</p>\n<p>While this particular implementation example doesn't offer the option, a design enhancement would enable some form of registering of an enum as mutable (<code>ImmutabilityType.UNDEFINED</code>), overriding the return value from this function.</p>\n<p><strong>Java Record:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>private static ImmutabilityType internalClassIsRecord(Class&lt;Record&gt; classRecord) {\n  var resolvedImmutabilityType = ImmutabilityType.JAVA_CONSTANT;\n  var recordComponents = Arrays.stream(classRecord.getRecordComponents()).iterator();\n  while ((resolvedImmutabilityType != ImmutabilityType.UNDEFINED) &amp;&amp; recordComponents.hasNext()) {\n    var recordComponent = recordComponents.next();\n    if (!recordComponent.getType().isPrimitive()) { //within a Record, a primitive is always immutable\n      var immutabilityType = classIs(recordComponent.getType());\n      if (immutabilityType.ordinal() &lt; resolvedImmutabilityType.ordinal())\n        resolvedImmutabilityType = immutabilityType;\n    }\n  }\n\n  return resolvedImmutabilityType;\n}\n\npublic static Optional&lt;ImmutabilityType&gt; classIsRecord(Class&lt;?&gt; class___) {\n  return class___.isRecord()\n          ? Optional.of(internalClassIsRecord((Class&lt;Record&gt;) class___))\n          : Optional.empty();\n}\n</code></pre>\n<p>Java records only provide shallow immutability. To detect deep immutability, the record must be recursively validated. The recursion occurs with the call to <code>classIs(recordComponent.getType())</code> (defined further down) in the function <code>internalClassIsRecord</code>.</p>\n<p><strong>Via <a href=\"https://jcip.net/annotations/doc/net/jcip/annotations/Immutable.html\" rel=\"nofollow noreferrer\">JCIP Annotation</a> or Marker Interfaces:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Immutable {}\npublic interface ImmutableEffective {\n  boolean isIrreversiblyImmutable();\n}\n\npublic static Optional&lt;ImmutabilityType&gt; classIsJcipAnnotationOrImmutableInterface(Class&lt;?&gt; class___) {\n  return class___.isAnnotationPresent(net.jcip.annotations.Immutable.class) || Immutable.class.isAssignableFrom(class___)\n          ? Optional.of(ImmutabilityType.BEFORE_END_OF_CLASS_CONSTRUCTOR)\n          : Optional.empty();\n}\n\npublic static Optional&lt;ImmutabilityType&gt; classIsImmutableEffective(Class&lt;?&gt; class___) {\n  return ImmutableEffective.class.isAssignableFrom(class___)\n          ? Optional.of(ImmutabilityType.PROPERTY_IRREVERSIBLY_IMMUTABLE)\n          : Optional.empty();\n}\n</code></pre>\n<p>Using everything defined above, it's time to implement the two target functions.</p>\n<p><strong>Class-oriented <code>classIs</code> function:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public static ImmutabilityType classIs(Class&lt;?&gt; class___) {\n  return class___.isArray()\n      ? ImmutabilityType.UNDEFINED //java.lang.Array is always mutable\n      : classIsJavaConstant(class___)\n          .or(() -&gt; classIsRecord(class___))\n          .or(() -&gt; classIsJcipAnnotationOrImmutableInterface(class___))\n          .or(() -&gt; classIsImmutableEffective(class___))\n          .orElse(ImmutabilityType.UNDEFINED);\n}\n</code></pre>\n<p><strong>Instance-oriented <code>instanceIs</code> function:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>private static boolean internalIsRecordHasAtLeastOneIrreversiblyImmutableStillUnset(Record record) throws InvocationTargetException, IllegalAccessException {\n  boolean result = false; //when set to true, it has hit an isIrreversiblyImmutable() that remains false\n\n  var classRecord = record.getClass();\n  var recordComponents = Arrays.stream(classRecord.getRecordComponents()).iterator();\n  while (!result &amp;&amp; recordComponents.hasNext()) {\n    var recordComponent = recordComponents.next();\n    if (ImmutableEffective.class.isAssignableFrom(recordComponent.getType())) {\n      var object = recordComponent.getAccessor().invoke(record);\n      result = !((ImmutableEffective)object).isIrreversiblyImmutable();\n    } else if (recordComponent.getType().isRecord()) {\n      result = internalIsRecordHasAtLeastOneIrreversiblyImmutableStillUnset((Record)recordComponent.getAccessor().invoke(record));\n    }\n  }\n\n  return result;\n}\n\npublic static ImmutabilityType instanceIs(Object o) {\n  var result = classIs(o.getClass());\n\n  if (result == ImmutabilityType.PROPERTY_IRREVERSIBLY_IMMUTABLE)\n    if (o instanceof ImmutableEffective immutableEffective) {\n      if (!immutableEffective.isIrreversiblyImmutable())\n        result = ImmutabilityType.UNDEFINED;\n    } else\n    if (o instanceof Record record) {\n      boolean hasAtLeastOneIrreversiblyImmutableStillUnset;\n      try {\n        hasAtLeastOneIrreversiblyImmutableStillUnset = internalIsRecordHasAtLeastOneIrreversiblyImmutableStillUnset(record);\n        if (hasAtLeastOneIrreversiblyImmutableStillUnset)\n          result = ImmutabilityType.UNDEFINED;\n      } catch (InvocationTargetException | IllegalAccessException ignored) {\n        result = ImmutabilityType.UNDEFINED; //unable to resolve\n      }\n    } else\n      result = ImmutabilityType.UNDEFINED; //unable to resolve\n\n  return result;\n}\n</code></pre>\n<hr />\n<h2><strong>Example usages:</strong></h2>\n<pre class=\"lang-java prettyprint-override\"><code>//Setup definitions\nstatic class ImmutableEffectiveImpl implements ImmutableEffective {\n  private boolean irreversiblyImmutable;\n\n  public ImmutableEffectiveImpl(boolean irreversiblyImmutable) {\n    this.irreversiblyImmutable = irreversiblyImmutable;\n  }\n\n  public boolean isIrreversiblyImmutable() {\n    return irreversiblyImmutable;\n  }\n\n  public void setAsIrreversiblyImmutable() {\n    irreversiblyImmutable = true;\n  }\n}\n\n@net.jcip.annotations.Immutable\npublic static class JcipAnnotationImmutable {}\n\n//Code to produce output\nStream.of(\n  new Object(),\n  new ImmutableEffectiveImpl(false),\n  new ImmutableEffectiveImpl(true),\n  new JcipAnnotationImmutable(),\n  new Immutable() {},\n  &quot;Jim&quot;\n).forEachOrdered(\n  o -&gt; {\n    var oC = o.getClass();\n    var className = oC.toString().substring(6);\n    System.out.println(className + &quot; - &quot; + o);\n    System.out.println(&quot;  isClass(): &quot; + classIs(oC));\n    System.out.println(&quot;  isInstance(): &quot; + instanceIs(o));\n  }\n);\n</code></pre>\n<p>And below is what the above code produces.</p>\n<p>Please specifically notice the contrast between line 6 (<code>isInstance(): UNDEFINED</code>) and line 9 (<code>isInstance(): PROPERTY_IRREVERSIBLY_IMMUTABLE</code>).</p>\n<p>This is where the difference in the returned <code>ImmutabilityType</code>s is exhibited between the class-level and instance-level function calls.</p>\n<pre><code>java.lang.Object - java.lang.Object@6e8cf4c6\n  isClass(): UNDEFINED\n  isInstance(): UNDEFINED\nimmutability_so.Main$ImmutableEffectiveImpl - immutability_so.Main$ImmutableEffectiveImpl@66a29884\n  isClass(): PROPERTY_IRREVERSIBLY_IMMUTABLE\n  isInstance(): UNDEFINED\nimmutability_so.Main$ImmutableEffectiveImpl - immutability_so.Main$ImmutableEffectiveImpl@4769b07b\n  isClass(): PROPERTY_IRREVERSIBLY_IMMUTABLE\n  isInstance(): PROPERTY_IRREVERSIBLY_IMMUTABLE\nimmutability_so.Main$JcipAnnotationImmutable - immutability_so.Main$JcipAnnotationImmutable@cc34f4d\n  isClass(): BEFORE_END_OF_CLASS_CONSTRUCTOR\n  isInstance(): BEFORE_END_OF_CLASS_CONSTRUCTOR\nimmutability_so.Main$1 - immutability_so.Main$1@277050dc\n  isClass(): BEFORE_END_OF_CLASS_CONSTRUCTOR\n  isInstance(): BEFORE_END_OF_CLASS_CONSTRUCTOR\njava.lang.String - Jim\n  isClass(): JAVA_CONSTANT\n  isInstance(): JAVA_CONSTANT\n</code></pre>\n<hr />\n<p>The code in this answer is a simplified reduction of my full open-source version, which I have published on <a href=\"https://github.com/qalocate/immutability-detector\" rel=\"nofollow noreferrer\">Github</a> (please look at the unmerged <code>genesis</code> branch).</p>\n<p>Please also checkout a very nicely packaged similar solution available in this <a href=\"https://stackoverflow.com/a/76209829/501113\">StackOverflow Answer</a>.</p>\n"}],"owner":{"account_id":7837113,"reputation":8165,"user_id":5924721,"accept_rate":100,"display_name":"Frank Puffer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8308,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":37088316,"answer_count":3,"score":15,"last_activity_date":1683736400,"creation_date":1462619364,"question_id":37087809,"body_markdown":"Before concretizing my question, let me provide some background: My main programming languages are C++ and Java. When working with C++ I find it important to apply const correctness, that is declaring functions like this:\r\n\r\n    A::DoSomething( const B&amp; arg ); // guarantees that arg is not modified\r\n    A::DoSomething() const; // guarantees that the object of type A is not modified\r\n    A::DoSomething( const B&amp; arg ) const; // both of the above\r\n\r\nIn fact, I often wish that `const` would be the default and objects that are modified have to be marked somehow.\r\n\r\nMy main reasons for using `const`are:\r\n\r\n - Communication with other developers: It makes code more expressive.\r\n - Communication with the compiler: It helps to find issues at compile time and sometimes makes additional optimizations possible.\r\n\r\nIt is well-known that Java has no `const` keyword (you can&#39;t do the above with `final`) and this fact has been discussed here before, see for example here: [Equivalent of const(C++) in Java][1].\r\n\r\nThe Java alternative that is usually proposed is to make your classes immutable. While this is not a full replacement of `const` because it works per class and not per context in which a class is used, it would work fine for me in most cases.\r\n\r\n***But there is one big issue with immutable classes: Immutability is not obvious.*** To find out if a class really is immutable, as far as I know, you basically have to check the full source code. Any method could have a backdoor through which the object could be modified.\r\n\r\n***So is there an easier way to check immutability? Or is there any best practice to somehow mark a class as being immutable?***\r\n\r\n*Note: I know that both languages provide &#39;evil tricks&#39; to bypass constness or immutability: C++ has `const_cast` and Java has reflection. But for the context of my question, let&#39;s assume that these are not used.*\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/7894865/equivalent-of-constc-in-java","title":"How to find out if a class is immutable","body":"<p>Before concretizing my question, let me provide some background: My main programming languages are C++ and Java. When working with C++ I find it important to apply const correctness, that is declaring functions like this:</p>\n\n<pre><code>A::DoSomething( const B&amp; arg ); // guarantees that arg is not modified\nA::DoSomething() const; // guarantees that the object of type A is not modified\nA::DoSomething( const B&amp; arg ) const; // both of the above\n</code></pre>\n\n<p>In fact, I often wish that <code>const</code> would be the default and objects that are modified have to be marked somehow.</p>\n\n<p>My main reasons for using <code>const</code>are:</p>\n\n<ul>\n<li>Communication with other developers: It makes code more expressive.</li>\n<li>Communication with the compiler: It helps to find issues at compile time and sometimes makes additional optimizations possible.</li>\n</ul>\n\n<p>It is well-known that Java has no <code>const</code> keyword (you can't do the above with <code>final</code>) and this fact has been discussed here before, see for example here: <a href=\"https://stackoverflow.com/questions/7894865/equivalent-of-constc-in-java\">Equivalent of const(C++) in Java</a>.</p>\n\n<p>The Java alternative that is usually proposed is to make your classes immutable. While this is not a full replacement of <code>const</code> because it works per class and not per context in which a class is used, it would work fine for me in most cases.</p>\n\n<p><strong><em>But there is one big issue with immutable classes: Immutability is not obvious.</em></strong> To find out if a class really is immutable, as far as I know, you basically have to check the full source code. Any method could have a backdoor through which the object could be modified.</p>\n\n<p><strong><em>So is there an easier way to check immutability? Or is there any best practice to somehow mark a class as being immutable?</em></strong></p>\n\n<p><em>Note: I know that both languages provide 'evil tricks' to bypass constness or immutability: C++ has <code>const_cast</code> and Java has reflection. But for the context of my question, let's assume that these are not used.</em></p>\n"},{"tags":["java","itext7"],"answers":[{"tags":[],"owner":{"account_id":28560698,"reputation":1,"user_id":21864279,"display_name":"Jaison"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683735873,"creation_date":1683735873,"answer_id":76220680,"question_id":76219017,"body_markdown":"I solved the issue by creating a method to set the fonts for each iteration of the loop.\r\n    \r\n    //static variables\r\n    private static PdfWriter PdfWriter;\r\n    \tprivate static PdfDocument pdfDocument;\r\n    \tprivate static Document document;\r\n    \tprivate static File file;\r\n    \tprivate static String fileName = FileNamer();\r\n    \r\n    \t public static void setFormatter() throws IOException {\r\n    \t\tPdfFont symbol = PdfFontFactory.createFont(StandardFonts.SYMBOL);\r\n    \t\tPdfFont courier = PdfFontFactory.createFont(StandardFonts.COURIER);\r\n    \t\tFormatter.small = new Style().setFont(courier).setFontSize(fontSizeSmol);\r\n    \t\tFormatter.mid = new Style().setFont(courier).setFontSize(fontSizeMid);\r\n    \t\tFormatter.large = new Style().setFont(courier).setFontSize(fontSizeLarge);\r\n    \t\tFormatter.lambda = new Style().setFont(symbol);\r\n    \t}\r\n    public static void format(String[] GDP, List&lt;List&lt;List&lt;String&gt;&gt;&gt; records, String[] results, int runs, int loops) throws IOException {\r\n    \t\tsetFormatter();\r\n    \t\t\r\n    \t\tfile = new File(location, fileName);\r\n    \t\tPdfWriter = new PdfWriter(file);\r\n    \t\tpdfDocument = new PdfDocument(PdfWriter);\r\n    \t\tdocument = new Document(pdfDocument);\r\n    \r\n    //statements\r\n    \r\n    document.close();\r\n\r\n","title":"(itext7) Pdf indirect object belongs to other PDF document exception when trying to create multiple pdf files using do/while loop","body":"<p>I solved the issue by creating a method to set the fonts for each iteration of the loop.</p>\n<pre><code>//static variables\nprivate static PdfWriter PdfWriter;\n    private static PdfDocument pdfDocument;\n    private static Document document;\n    private static File file;\n    private static String fileName = FileNamer();\n\n     public static void setFormatter() throws IOException {\n        PdfFont symbol = PdfFontFactory.createFont(StandardFonts.SYMBOL);\n        PdfFont courier = PdfFontFactory.createFont(StandardFonts.COURIER);\n        Formatter.small = new Style().setFont(courier).setFontSize(fontSizeSmol);\n        Formatter.mid = new Style().setFont(courier).setFontSize(fontSizeMid);\n        Formatter.large = new Style().setFont(courier).setFontSize(fontSizeLarge);\n        Formatter.lambda = new Style().setFont(symbol);\n    }\npublic static void format(String[] GDP, List&lt;List&lt;List&lt;String&gt;&gt;&gt; records, String[] results, int runs, int loops) throws IOException {\n        setFormatter();\n        \n        file = new File(location, fileName);\n        PdfWriter = new PdfWriter(file);\n        pdfDocument = new PdfDocument(PdfWriter);\n        document = new Document(pdfDocument);\n\n//statements\n\ndocument.close();\n</code></pre>\n"}],"owner":{"account_id":28560698,"reputation":1,"user_id":21864279,"display_name":"Jaison"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683735873,"creation_date":1683725211,"question_id":76219017,"body_markdown":"I have a do/while loop in my Main class so the user can create multiple pdfs without having to close and reopen the program. The Main class sends user input and information to another class that uses itext7 to organize information in to tables and creates the PDF file. The first run works fine with a PDF created, but on the second run I receive the following:\r\n\r\n    Exception in thread &quot;main&quot; com.itextpdf.kernel.exceptions.PdfException: Pdf indirect object belongs to \r\n    other PDF document. Copy object to current pdf document.\r\n        at com.itextpdf.kernel.pdf.PdfOutputStream.write(PdfOutputStream.java:212)\r\n        at com.itextpdf.kernel.pdf.PdfOutputStream.write(PdfOutputStream.java:202)\r\n        at com.itextpdf.kernel.pdf.PdfOutputStream.write(PdfOutputStream.java:109)\r\n        at com.itextpdf.kernel.pdf.PdfOutputStream.write(PdfOutputStream.java:204)\r\n        at com.itextpdf.kernel.pdf.PdfOutputStream.write(PdfOutputStream.java:109)\r\n        at com.itextpdf.kernel.pdf.PdfOutputStream.write(PdfOutputStream.java:204)\r\n        at com.itextpdf.kernel.pdf.PdfOutputStream.write(PdfOutputStream.java:109)\r\n        at com.itextpdf.kernel.pdf.PdfWriter.writeToBody(PdfWriter.java:324)\r\n        at com.itextpdf.kernel.pdf.PdfWriter.flushObject(PdfWriter.java:214)\r\n        at com.itextpdf.kernel.pdf.PdfDocument.flushObject(PdfDocument.java:1980)\r\n        at com.itextpdf.kernel.pdf.PdfObject.flush(PdfObject.java:187)\r\n        at com.itextpdf.kernel.pdf.PdfObject.flush(PdfObject.java:153)\r\n        at com.itextpdf.kernel.pdf.PdfObjectWrapper.flush(PdfObjectWrapper.java:94)\r\n        at com.itextpdf.kernel.pdf.PdfPage.flush(PdfPage.java:546)\r\n        at com.itextpdf.kernel.pdf.PdfPage.flush(PdfPage.java:474)\r\n        at com.itextpdf.kernel.pdf.PdfDocument.close(PdfDocument.java:955)\r\n        at com.itextpdf.layout.Document.close(Document.java:117)\r\n        at hemolysis_V3.Formatter.format(Formatter.java:196)\r\n        at hemolysis_V3.Collector.switcher(Collector.java:64)\r\n        at hemolysis_V3.Main.main(Main.java:110)\r\n\r\n\r\na new PDF file is still created, but acrobat says the file is damaged and cannot be repaired.\r\n\r\n\r\nThis is what I currently have. The exception points to the document.close(), but I don&#39;t understand why. I thought that a new document object would be created each time this class is called by the main, but that doesn&#39;t seem to be the case. To get around that I created an array of Document objects so that each loop would use a different Document, but that didn&#39;t work either. FileNamer() is working properly because a new PDF file is still created, but acrobat says the file is damaged and cannot be repaired.\r\n\r\n    //static variable\r\n    private static PdfWriter PdfWriter;\r\n\r\n    private static PdfDocument pdfDocument;\r\n    private static Document document;\r\n    private static File file;\r\n    private static String fileName;    \r\n    // class is called by the main to create the PDF\r\n    public static void format() throws IOException{\r\n    String fileName = FileNamer(); // creates a new filename to prevent overwriting other files\r\n    String location = (&quot;C:\\\\Users&quot;);\r\n    file = new File(location, fileName);\r\n    PdfWriter = new PdfWriter(file);\r\n    pdfDocument = new PdfDocument(PdfWriter);\r\n    Document doc0 = new Document (pdfDocument);\r\n        Document doc1 = new Document (pdfDocument);\r\n\tDocument doc2 = new Document (pdfDocument);\r\n\tDocument doc3 = new Document (pdfDocument);\r\n\tDocument doc4 = new Document (pdfDocument);\r\n\tDocument doc5 = new Document (pdfDocument);\r\n\tDocument doc6 = new Document (pdfDocument);\r\n\tDocument doc7 = new Document (pdfDocument);\r\n\tDocument doc8 = new Document (pdfDocument);\r\n\tDocument doc9 = new Document (pdfDocument);\r\n\tDocument[] ListOfDocs= {doc0, doc1, doc2, doc3, doc4, doc5, doc6, doc7, doc8, doc9};\r\n    \r\n    //statements\r\n    \r\n    ListOfDocs[loops].close();\r\n}\r\n\r\n","title":"(itext7) Pdf indirect object belongs to other PDF document exception when trying to create multiple pdf files using do/while loop","body":"<p>I have a do/while loop in my Main class so the user can create multiple pdfs without having to close and reopen the program. The Main class sends user input and information to another class that uses itext7 to organize information in to tables and creates the PDF file. The first run works fine with a PDF created, but on the second run I receive the following:</p>\n<pre><code>Exception in thread &quot;main&quot; com.itextpdf.kernel.exceptions.PdfException: Pdf indirect object belongs to \nother PDF document. Copy object to current pdf document.\n    at com.itextpdf.kernel.pdf.PdfOutputStream.write(PdfOutputStream.java:212)\n    at com.itextpdf.kernel.pdf.PdfOutputStream.write(PdfOutputStream.java:202)\n    at com.itextpdf.kernel.pdf.PdfOutputStream.write(PdfOutputStream.java:109)\n    at com.itextpdf.kernel.pdf.PdfOutputStream.write(PdfOutputStream.java:204)\n    at com.itextpdf.kernel.pdf.PdfOutputStream.write(PdfOutputStream.java:109)\n    at com.itextpdf.kernel.pdf.PdfOutputStream.write(PdfOutputStream.java:204)\n    at com.itextpdf.kernel.pdf.PdfOutputStream.write(PdfOutputStream.java:109)\n    at com.itextpdf.kernel.pdf.PdfWriter.writeToBody(PdfWriter.java:324)\n    at com.itextpdf.kernel.pdf.PdfWriter.flushObject(PdfWriter.java:214)\n    at com.itextpdf.kernel.pdf.PdfDocument.flushObject(PdfDocument.java:1980)\n    at com.itextpdf.kernel.pdf.PdfObject.flush(PdfObject.java:187)\n    at com.itextpdf.kernel.pdf.PdfObject.flush(PdfObject.java:153)\n    at com.itextpdf.kernel.pdf.PdfObjectWrapper.flush(PdfObjectWrapper.java:94)\n    at com.itextpdf.kernel.pdf.PdfPage.flush(PdfPage.java:546)\n    at com.itextpdf.kernel.pdf.PdfPage.flush(PdfPage.java:474)\n    at com.itextpdf.kernel.pdf.PdfDocument.close(PdfDocument.java:955)\n    at com.itextpdf.layout.Document.close(Document.java:117)\n    at hemolysis_V3.Formatter.format(Formatter.java:196)\n    at hemolysis_V3.Collector.switcher(Collector.java:64)\n    at hemolysis_V3.Main.main(Main.java:110)\n</code></pre>\n<p>a new PDF file is still created, but acrobat says the file is damaged and cannot be repaired.</p>\n<p>This is what I currently have. The exception points to the document.close(), but I don't understand why. I thought that a new document object would be created each time this class is called by the main, but that doesn't seem to be the case. To get around that I created an array of Document objects so that each loop would use a different Document, but that didn't work either. FileNamer() is working properly because a new PDF file is still created, but acrobat says the file is damaged and cannot be repaired.</p>\n<pre><code>//static variable\nprivate static PdfWriter PdfWriter;\n\nprivate static PdfDocument pdfDocument;\nprivate static Document document;\nprivate static File file;\nprivate static String fileName;    \n// class is called by the main to create the PDF\npublic static void format() throws IOException{\nString fileName = FileNamer(); // creates a new filename to prevent overwriting other files\nString location = (&quot;C:\\\\Users&quot;);\nfile = new File(location, fileName);\nPdfWriter = new PdfWriter(file);\npdfDocument = new PdfDocument(PdfWriter);\nDocument doc0 = new Document (pdfDocument);\n    Document doc1 = new Document (pdfDocument);\nDocument doc2 = new Document (pdfDocument);\nDocument doc3 = new Document (pdfDocument);\nDocument doc4 = new Document (pdfDocument);\nDocument doc5 = new Document (pdfDocument);\nDocument doc6 = new Document (pdfDocument);\nDocument doc7 = new Document (pdfDocument);\nDocument doc8 = new Document (pdfDocument);\nDocument doc9 = new Document (pdfDocument);\nDocument[] ListOfDocs= {doc0, doc1, doc2, doc3, doc4, doc5, doc6, doc7, doc8, doc9};\n\n//statements\n\nListOfDocs[loops].close();\n</code></pre>\n<p>}</p>\n"},{"tags":["java","reflection","class-hierarchy"],"answers":[{"tags":[],"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1683735653,"creation_date":1683735653,"answer_id":76220647,"question_id":76220603,"body_markdown":"`private` doesn&#39;t mean it&#39;s private to the *instance*; it means it&#39;s private to the *class*. Inheritance doesn&#39;t offer any exemption from that (with the limited exception of `protected`). The following example would fail to compile in `A` because `field2` is inaccessible:\r\n\r\n    X x = (X)this;\r\n    System.out.println(x.field2);\r\n\r\nReflection imposes the same restrictions by default.","title":"Calling java.lang.reflect.Field::getValue(this) from abstract superclass defined method returns IllegalAccessException","body":"<p><code>private</code> doesn't mean it's private to the <em>instance</em>; it means it's private to the <em>class</em>. Inheritance doesn't offer any exemption from that (with the limited exception of <code>protected</code>). The following example would fail to compile in <code>A</code> because <code>field2</code> is inaccessible:</p>\n<pre><code>X x = (X)this;\nSystem.out.println(x.field2);\n</code></pre>\n<p>Reflection imposes the same restrictions by default.</p>\n"}],"owner":{"account_id":20541586,"reputation":11,"user_id":15076388,"display_name":"Federico Xella"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683735653,"creation_date":1683735121,"question_id":76220603,"body_markdown":"I&#39;m trying to print the whole hierarchy of a class using reflection.\r\n\r\nTo do this I defined an abstract superclass A that defines the `toString(int offset)` method:\r\n\r\n```\r\nabstract class A {\r\n\tpublic String toString(int offset) {\r\n\t\tStringBuilder builder = new StringBuilder();\r\n\t\ttry {\r\n\t\t\tfor (Field field : this.getClass().getDeclaredFields()) {\r\n\t\t\t\tbuilder.append(String.join(&quot;&quot;, Collections.nCopies(offset, &quot;\\t&quot;)));\r\n\t\t\t\tbuilder.append(field.getName()).append(&quot;: &quot;);\r\n\t\t\t\tfield.setAccessible(true); // workaround\r\n\t\t\t\tif (field.getType().isPrimitive()) {\r\n\t\t\t\t\t// (int, float, ...)\r\n\t\t\t\t\tbuilder.append(field.get(this));\r\n\t\t\t\t} else if (field.getType().getName().contains(&quot;java.lang&quot;)) {\r\n\t\t\t\t\t// (Integer, String, ...)\r\n\t\t\t\t\tbuilder.append(field.get(this).toString());\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Other classes\r\n\t\t\t\t\tbuilder.append(&quot;\\n&quot;).append(A.class.cast(field.get(this)).toString(offset + 1));\r\n\t\t\t\t}\r\n\t\t\t\tbuilder.append(&quot;\\n&quot;);\r\n\t\t\t\tfield.setAccessible(false); // workaround\r\n\t\t\t}\r\n\t\t} catch (Exception e) {\r\n\t\t\tSystem.out.print(e);\r\n\t\t}\r\n\t\treturn builder.toString();\r\n\t}\r\n}\r\n```\r\n\r\nthen I have some classes that extend the A class:\r\n\r\n```\r\npublic class X extends A {\r\n\tprivate String field1;\r\n\tprivate Y field2;\r\n}\r\n\r\npublic class Y extends A {\r\n\tprivate String field3;\r\n\tprivate String field4;\r\n}\r\n```\r\n\r\nwhich instances contains some values.\r\n\r\nThe expected output of the call `x.toString(0)` should be:\r\n\r\n```\r\nfield1: value1\r\nfield2:\r\n    field3: value3\r\n    field4: value4\r\n```\r\n\r\nWithout the use of `field.setAccessible(true)` when I call `x.toString(0)` I get\r\n\r\n`\r\nIllegalAccessException: Class A can not access a member of class X with modifiers &quot;private&quot;\r\n`\r\n\r\nbut I cannot undestand why.\r\n\r\nWhen I check the reference while debugging `this` refers to X.class, so why the `field.getValue(this)` doesn&#39;t work?\r\n\r\nShouldn&#39;t `this` refer to the instance of the class calling the method? Am I missing something?\r\n","title":"Calling java.lang.reflect.Field::getValue(this) from abstract superclass defined method returns IllegalAccessException","body":"<p>I'm trying to print the whole hierarchy of a class using reflection.</p>\n<p>To do this I defined an abstract superclass A that defines the <code>toString(int offset)</code> method:</p>\n<pre><code>abstract class A {\n    public String toString(int offset) {\n        StringBuilder builder = new StringBuilder();\n        try {\n            for (Field field : this.getClass().getDeclaredFields()) {\n                builder.append(String.join(&quot;&quot;, Collections.nCopies(offset, &quot;\\t&quot;)));\n                builder.append(field.getName()).append(&quot;: &quot;);\n                field.setAccessible(true); // workaround\n                if (field.getType().isPrimitive()) {\n                    // (int, float, ...)\n                    builder.append(field.get(this));\n                } else if (field.getType().getName().contains(&quot;java.lang&quot;)) {\n                    // (Integer, String, ...)\n                    builder.append(field.get(this).toString());\n                } else {\n                    // Other classes\n                    builder.append(&quot;\\n&quot;).append(A.class.cast(field.get(this)).toString(offset + 1));\n                }\n                builder.append(&quot;\\n&quot;);\n                field.setAccessible(false); // workaround\n            }\n        } catch (Exception e) {\n            System.out.print(e);\n        }\n        return builder.toString();\n    }\n}\n</code></pre>\n<p>then I have some classes that extend the A class:</p>\n<pre><code>public class X extends A {\n    private String field1;\n    private Y field2;\n}\n\npublic class Y extends A {\n    private String field3;\n    private String field4;\n}\n</code></pre>\n<p>which instances contains some values.</p>\n<p>The expected output of the call <code>x.toString(0)</code> should be:</p>\n<pre><code>field1: value1\nfield2:\n    field3: value3\n    field4: value4\n</code></pre>\n<p>Without the use of <code>field.setAccessible(true)</code> when I call <code>x.toString(0)</code> I get</p>\n<p><code>IllegalAccessException: Class A can not access a member of class X with modifiers &quot;private&quot;</code></p>\n<p>but I cannot undestand why.</p>\n<p>When I check the reference while debugging <code>this</code> refers to X.class, so why the <code>field.getValue(this)</code> doesn't work?</p>\n<p>Shouldn't <code>this</code> refer to the instance of the class calling the method? Am I missing something?</p>\n"},{"tags":["java","android","facebook-graph-api","facebook-android-sdk"],"comments":[{"owner":{"account_id":3013917,"reputation":611,"user_id":2556660,"accept_rate":70,"display_name":"Rameshbabu"},"score":0,"creation_date":1494943257,"post_id":44003425,"comment_id":75035584,"body_markdown":"check this out http://stackoverflow.com/a/32776987/2556660","body":"check this out <a href=\"http://stackoverflow.com/a/32776987/2556660\">stackoverflow.com/a/32776987/2556660</a>"},{"owner":{"account_id":1530592,"reputation":92715,"user_id":1427878,"display_name":"CBroe"},"score":0,"creation_date":1494943867,"post_id":44003425,"comment_id":75036086,"body_markdown":"Possible duplicate of [Facebook JS SDK&#39;s FB.api(&#39;/me&#39;) method doesn&#39;t return the fields i expect in Graph API v2.4+](http://stackoverflow.com/questions/32584850/facebook-js-sdks-fb-api-me-method-doesnt-return-the-fields-i-expect-in-gra) - you neglected to _ask_ for the fields you want, which is necessary since API v2.4","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/32584850/facebook-js-sdks-fb-api-me-method-doesnt-return-the-fields-i-expect-in-gra\">Facebook JS SDK&#39;s FB.api(&#39;/me&#39;) method doesn&#39;t return the fields i expect in Graph API v2.4+</a> - you neglected to <i>ask</i> for the fields you want, which is necessary since API v2.4"}],"answers":[{"comments":[{"owner":{"account_id":9131602,"reputation":399,"user_id":6792992,"accept_rate":53,"display_name":"Stamatis Stiliats"},"score":0,"creation_date":1495098485,"post_id":44003949,"comment_id":75112428,"body_markdown":"the part that troubles me on that snippet is how to actually store the email. Plus i have to get the data after the async task is completed","body":"the part that troubles me on that snippet is how to actually store the email. Plus i have to get the data after the async task is completed"}],"tags":[],"owner":{"account_id":7022079,"reputation":2394,"user_id":5380981,"accept_rate":100,"display_name":"PRATEEK BHARDWAJ"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1683735239,"creation_date":1494944049,"answer_id":44003949,"question_id":44003425,"body_markdown":"\r\nAdd below depandancy in Gradle\r\n\r\n    implementation &#39;com.facebook.android:facebook-android-sdk:4.11.0&#39;\r\n\r\n\r\n\r\n    \r\n     FacebookSdk.sdkInitialize(this);\r\n        callbackManager =CallbackManager.Factory.create();\r\n    \r\n        // -----start putting in oncreate-----------------------\r\n        \r\n        LoginManager.getInstance().logInWithReadPermissions(UserActivity.this, Arrays.asList(&quot;public_profile&quot;, &quot;user_friends&quot;,&quot;email&quot;));\r\n    \r\n        facebookTime();\r\n    \r\n        //----onclicklisterner ---------------/\r\n    \r\n                callbackManager.onActivityResult(requestCode,resultCode,data);\r\n    \r\n        //---onactivityresult-------------/\r\n    \r\n        public void facebookTime() {\r\n            LoginManager.getInstance().registerCallback(callbackManager,\r\n                    new FacebookCallback&lt;LoginResult&gt;() {\r\n                        @Override\r\n                        public void onSuccess(LoginResult loginResult) {\r\n                            System.out.println(&quot;Success&quot;);\r\n                            GraphRequest request = GraphRequest.newMeRequest(\r\n                                    loginResult.getAccessToken(), new GraphRequest.GraphJSONObjectCallback() {\r\n                                        @Override\r\n                                        public void onCompleted(JSONObject object, GraphResponse response) {\r\n                                            //   Util.showCenteredToast(getActivity(), &quot;object&quot; + object);\r\n                                            //     Util.showCenteredToast(getActivity(), &quot;GraphResponse&quot; + response);\r\n                                            try {\r\n                                                strEmail = object.getString(&quot;email&quot;);\r\n                                                strUserName = object.getString(&quot;name&quot;);\r\n                                                String id = object.getString(&quot;id&quot;);\r\n                                                // write your code here\r\n                                                //asyncTask.iSocialMediaResponse = LoginFragment.this;\r\n                                                asyncTask.execute();\r\n    \r\n    \r\n                                            } catch (JSONException e) {\r\n                                                e.printStackTrace();\r\n                                            }\r\n                                        }\r\n                                    });\r\n                            Bundle parameters = new Bundle();\r\n                            parameters.putString(&quot;fields&quot;, &quot;email,name&quot;);\r\n                            //parameters.putString(&quot;fields&quot;, &quot;user_friends&quot;);\r\n                            request.setParameters(parameters);\r\n                            //Log.e(&quot; About to Graph Call&quot;, &quot; &quot;);\r\n                            request.executeAsync();\r\n                        }\r\n                        \r\n                        @Override\r\n                        public void onCancel() {\r\n                            // App code\r\n                            Util.showCenteredToast(UserActivity.this, &quot;oncancel&quot;);\r\n                        }\r\n                        \r\n                        @Override\r\n                        public void onError(FacebookException exception) {\r\n                            // App code\r\n                            Util.showCenteredToast(UserActivity.this, &quot;exception&quot; + exception);\r\n                        }\r\n                    });\r\n        }\r\n        \r\n        @Override\r\n        public void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n            super.onActivityResult(requestCode, resultCode, data);\r\n            callbackManager.onActivityResult(requestCode, resultCode, data);\r\n    \r\n        }","title":"Facebook API doesn&#39;t return email","body":"<p>Add below depandancy in Gradle</p>\n<pre><code>implementation 'com.facebook.android:facebook-android-sdk:4.11.0'\n\n\n\n\n FacebookSdk.sdkInitialize(this);\n    callbackManager =CallbackManager.Factory.create();\n\n    // -----start putting in oncreate-----------------------\n    \n    LoginManager.getInstance().logInWithReadPermissions(UserActivity.this, Arrays.asList(&quot;public_profile&quot;, &quot;user_friends&quot;,&quot;email&quot;));\n\n    facebookTime();\n\n    //----onclicklisterner ---------------/\n\n            callbackManager.onActivityResult(requestCode,resultCode,data);\n\n    //---onactivityresult-------------/\n\n    public void facebookTime() {\n        LoginManager.getInstance().registerCallback(callbackManager,\n                new FacebookCallback&lt;LoginResult&gt;() {\n                    @Override\n                    public void onSuccess(LoginResult loginResult) {\n                        System.out.println(&quot;Success&quot;);\n                        GraphRequest request = GraphRequest.newMeRequest(\n                                loginResult.getAccessToken(), new GraphRequest.GraphJSONObjectCallback() {\n                                    @Override\n                                    public void onCompleted(JSONObject object, GraphResponse response) {\n                                        //   Util.showCenteredToast(getActivity(), &quot;object&quot; + object);\n                                        //     Util.showCenteredToast(getActivity(), &quot;GraphResponse&quot; + response);\n                                        try {\n                                            strEmail = object.getString(&quot;email&quot;);\n                                            strUserName = object.getString(&quot;name&quot;);\n                                            String id = object.getString(&quot;id&quot;);\n                                            // write your code here\n                                            //asyncTask.iSocialMediaResponse = LoginFragment.this;\n                                            asyncTask.execute();\n\n\n                                        } catch (JSONException e) {\n                                            e.printStackTrace();\n                                        }\n                                    }\n                                });\n                        Bundle parameters = new Bundle();\n                        parameters.putString(&quot;fields&quot;, &quot;email,name&quot;);\n                        //parameters.putString(&quot;fields&quot;, &quot;user_friends&quot;);\n                        request.setParameters(parameters);\n                        //Log.e(&quot; About to Graph Call&quot;, &quot; &quot;);\n                        request.executeAsync();\n                    }\n                    \n                    @Override\n                    public void onCancel() {\n                        // App code\n                        Util.showCenteredToast(UserActivity.this, &quot;oncancel&quot;);\n                    }\n                    \n                    @Override\n                    public void onError(FacebookException exception) {\n                        // App code\n                        Util.showCenteredToast(UserActivity.this, &quot;exception&quot; + exception);\n                    }\n                });\n    }\n    \n    @Override\n    public void onActivityResult(int requestCode, int resultCode, Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n        callbackManager.onActivityResult(requestCode, resultCode, data);\n\n    }\n</code></pre>\n"}],"owner":{"account_id":9131602,"reputation":399,"user_id":6792992,"accept_rate":53,"display_name":"Stamatis Stiliats"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":44003949,"answer_count":1,"score":0,"last_activity_date":1683735239,"creation_date":1494942734,"question_id":44003425,"body_markdown":"I know that this question has been asked, but there is only one answer pretty much or is not even answered.\r\n\r\nI dont know if it&#39;s my lack of understanding or lack of Facebook documentation, but so far i have this code to retrieve user email.\r\n\r\n    callbackManager = CallbackManager.Factory.create();\r\n        mFbLoginManager.registerCallback(\r\n                callbackManager,\r\n                new FacebookCallback &lt; LoginResult &gt; () {\r\n                    @Override\r\n                    public void onSuccess(final LoginResult loginResult) {\r\n                        // Handle success\r\n                        Log.i(TAG, &quot;callBack Login Result: LoginManager success - &quot; + loginResult.toString());\r\n                        GraphRequest.newMeRequest(loginResult.getAccessToken(), new GraphRequest.GraphJSONObjectCallback() {\r\n                            @Override\r\n                            public void onCompleted(JSONObject userObject, GraphResponse response) {\r\n                                if (response.getError() == null) {\r\n                                    try {\r\n                                        AccessToken token = AccessToken.getCurrentAccessToken();\r\n                                        Log.e(TAG, token.getToken());\r\n                                        Log.e(TAG, userObject.toString());\r\n                                        email = userObject.getString(&quot;email&quot;);\r\n                                    } catch (JSONException ex) {\r\n                                        Log.e(TAG, &quot;Not such permissions for email!&quot;);\r\n                                        ex.printStackTrace();\r\n                                    }\r\n                                    Log.d(TAG, &quot;Email fetched: &quot; + email);\r\n                                }else{\r\n                                    Log.e(TAG, &quot;Something went wrong with fetching email with GraphRequest&quot;);\r\n                                }\r\n                            }\r\n                        }).executeAsync();\r\n                    }\r\n\r\n\r\nThe JSON string returns only the name and the id, therefore my email variable is empty.\r\n\r\nThe part i am troubled with is that when i test it on Graph Explorer or with that [link][1], i get the email.\r\n\r\nI have se permissions also on the developers site dashboard and also in my code(that&#39;s inside onClick() when user press the facebook login button):`\r\nmFbLoginManager.logInWithReadPermissions(LoginActivity.this, Arrays.asList(&quot;user_photos&quot;, &quot;email&quot;, &quot;public_profile&quot;)\r\n`\r\n\r\n\r\nSo i am not sure what is the problem in my code. The login button is custom and not the facebook LoginButton, i dont know if that matters.\r\n\r\nEvery help is welcome\r\n\r\n\r\n  [1]: https://graph.facebook.com/me?fields=email&amp;access_token=%3Cvalid_token%3E","title":"Facebook API doesn&#39;t return email","body":"<p>I know that this question has been asked, but there is only one answer pretty much or is not even answered.</p>\n\n<p>I dont know if it's my lack of understanding or lack of Facebook documentation, but so far i have this code to retrieve user email.</p>\n\n<pre><code>callbackManager = CallbackManager.Factory.create();\n    mFbLoginManager.registerCallback(\n            callbackManager,\n            new FacebookCallback &lt; LoginResult &gt; () {\n                @Override\n                public void onSuccess(final LoginResult loginResult) {\n                    // Handle success\n                    Log.i(TAG, \"callBack Login Result: LoginManager success - \" + loginResult.toString());\n                    GraphRequest.newMeRequest(loginResult.getAccessToken(), new GraphRequest.GraphJSONObjectCallback() {\n                        @Override\n                        public void onCompleted(JSONObject userObject, GraphResponse response) {\n                            if (response.getError() == null) {\n                                try {\n                                    AccessToken token = AccessToken.getCurrentAccessToken();\n                                    Log.e(TAG, token.getToken());\n                                    Log.e(TAG, userObject.toString());\n                                    email = userObject.getString(\"email\");\n                                } catch (JSONException ex) {\n                                    Log.e(TAG, \"Not such permissions for email!\");\n                                    ex.printStackTrace();\n                                }\n                                Log.d(TAG, \"Email fetched: \" + email);\n                            }else{\n                                Log.e(TAG, \"Something went wrong with fetching email with GraphRequest\");\n                            }\n                        }\n                    }).executeAsync();\n                }\n</code></pre>\n\n<p>The JSON string returns only the name and the id, therefore my email variable is empty.</p>\n\n<p>The part i am troubled with is that when i test it on Graph Explorer or with that <a href=\"https://graph.facebook.com/me?fields=email&amp;access_token=%3Cvalid_token%3E\" rel=\"nofollow noreferrer\">link</a>, i get the email.</p>\n\n<p>I have se permissions also on the developers site dashboard and also in my code(that's inside onClick() when user press the facebook login button):<code>\nmFbLoginManager.logInWithReadPermissions(LoginActivity.this, Arrays.asList(\"user_photos\", \"email\", \"public_profile\")\n</code></p>\n\n<p>So i am not sure what is the problem in my code. The login button is custom and not the facebook LoginButton, i dont know if that matters.</p>\n\n<p>Every help is welcome</p>\n"},{"tags":["java","android","cpu-architecture","endianness"],"comments":[{"owner":{"account_id":1069432,"reputation":82107,"user_id":1069068,"accept_rate":80,"display_name":"Raghav Sood"},"score":0,"creation_date":1500520769,"post_id":45204468,"comment_id":77375638,"body_markdown":"Android devices are (almost) entirely little endian at a native level, although Java is not. Not really an issue if you&#39;re careful. I say almost because I don&#39;t have a concrete source on hand, but I&#39;ve never seen a Big Endian production device in 6 years of Android dev so far","body":"Android devices are (almost) entirely little endian at a native level, although Java is not. Not really an issue if you&#39;re careful. I say almost because I don&#39;t have a concrete source on hand, but I&#39;ve never seen a Big Endian production device in 6 years of Android dev so far"},{"owner":{"account_id":10574825,"reputation":1169,"user_id":7790438,"display_name":"Fady Saad"},"score":0,"creation_date":1500520874,"post_id":45204468,"comment_id":77375662,"body_markdown":"I think according to this [article](https://news.ycombinator.com/item?id=9451284) the Big-Endian is dead and as you can see in the link page the (machines are dual endian, but all the new OSs are littl endian only), which means you shouldn&#39;t curious about big endian.","body":"I think according to this <a href=\"https://news.ycombinator.com/item?id=9451284\" rel=\"nofollow noreferrer\">article</a> the Big-Endian is dead and as you can see in the link page the (machines are dual endian, but all the new OSs are littl endian only), which means you shouldn&#39;t curious about big endian."},{"owner":{"account_id":5081290,"reputation":32806,"user_id":4077294,"accept_rate":74,"display_name":"James Ko"},"score":0,"creation_date":1500521117,"post_id":45204468,"comment_id":77375719,"body_markdown":"@worker_bee That question asks how to test the endianness, not how many devices are big/little endian.","body":"@worker_bee That question asks how to test the endianness, not how many devices are big/little endian."}],"answers":[{"comments":[{"owner":{"account_id":2641515,"reputation":525,"user_id":2285043,"display_name":"jcgoble3"},"score":3,"creation_date":1590004049,"post_id":45205231,"comment_id":109520734,"body_markdown":"2020 update: mips/mips64 is no longer supported by the Android NDK, and the ABI link above now explicitly says, &quot;Android is always little-endian.&quot;","body":"2020 update: mips/mips64 is no longer supported by the Android NDK, and the ABI link above now explicitly says, &quot;Android is always little-endian.&quot;"},{"owner":{"account_id":1079173,"reputation":42590,"user_id":1076640,"display_name":"yshavit"},"score":2,"creation_date":1683735160,"post_id":45205231,"comment_id":134413396,"body_markdown":"@jcgoble3 That certainly shortens my answer! Thank you for the update. (And sorry it took me several years to incorporate it!)","body":"@jcgoble3 That certainly shortens my answer! Thank you for the update. (And sorry it took me several years to incorporate it!)"}],"tags":[],"owner":{"account_id":1079173,"reputation":42590,"user_id":1076640,"display_name":"yshavit"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1683735128,"creation_date":1500525180,"answer_id":45205231,"question_id":45204468,"body_markdown":"Android is always little-endian. This is documented on its page for [ABIs (Application Binary Interfaces)][ABI]:\r\n\r\n&gt; - The endianness of memory stores and loads at runtime. Android is always little-endian.\r\n\r\n[ABI]: https://developer.android.com/ndk/guides/abis.html","title":"What percentage of Android phones are little-endian?","body":"<p>Android is always little-endian. This is documented on its page for <a href=\"https://developer.android.com/ndk/guides/abis.html\" rel=\"nofollow noreferrer\">ABIs (Application Binary Interfaces)</a>:</p>\n<blockquote>\n<ul>\n<li>The endianness of memory stores and loads at runtime. Android is always little-endian.</li>\n</ul>\n</blockquote>\n"}],"owner":{"account_id":5081290,"reputation":32806,"user_id":4077294,"accept_rate":74,"display_name":"James Ko"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3159,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":45205231,"answer_count":1,"score":8,"last_activity_date":1683735128,"creation_date":1500520466,"question_id":45204468,"body_markdown":"**edit:** This is different from *Endianness of Android NDK* because that question asks how to find the endianness, not how many devices are big/little-endian. Mods, please don&#39;t mark this as a dupe.\r\n\r\n---\r\n\r\nJust curious, is it worthwhile to support both big/little-endian Android phones? I have some code in my app that&#39;s endian-sensitive, for those of you who are curious it involves serializing a `long` to a byte stream. I think my phone is big-endian because `ByteBuffer.getLong()` is reading in a big-endian fashion from the byte stream I&#39;ve written to.\r\n\r\nIs it worthwhile to support big/little-endian Android phones? I&#39;m not sure how common big-endian is compared to little-endian. Is there data available that tells us the relative percentages of each?\r\n\r\nThanks.","title":"What percentage of Android phones are little-endian?","body":"<p><strong>edit:</strong> This is different from <em>Endianness of Android NDK</em> because that question asks how to find the endianness, not how many devices are big/little-endian. Mods, please don't mark this as a dupe.</p>\n\n<hr>\n\n<p>Just curious, is it worthwhile to support both big/little-endian Android phones? I have some code in my app that's endian-sensitive, for those of you who are curious it involves serializing a <code>long</code> to a byte stream. I think my phone is big-endian because <code>ByteBuffer.getLong()</code> is reading in a big-endian fashion from the byte stream I've written to.</p>\n\n<p>Is it worthwhile to support big/little-endian Android phones? I'm not sure how common big-endian is compared to little-endian. Is there data available that tells us the relative percentages of each?</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","performance"],"comments":[{"owner":{"account_id":1695351,"reputation":3510,"user_id":1556820,"accept_rate":50,"display_name":"mangusta"},"score":5,"creation_date":1569785674,"post_id":58158445,"comment_id":102699528,"body_markdown":"just guessing, maybe because in case of `int[num][length]`, the continuous space of size `num x length` should be allocated while in case of `int[num][]`, the arrays are allocated arbitrarily","body":"just guessing, maybe because in case of <code>int[num][length]</code>, the continuous space of size <code>num x length</code> should be allocated while in case of <code>int[num][]</code>, the arrays are allocated arbitrarily"},{"owner":{"account_id":152622,"reputation":490044,"user_id":367273,"accept_rate":96,"display_name":"NPE"},"score":0,"creation_date":1569785688,"post_id":58158445,"comment_id":102699535,"body_markdown":"Do you have any data on what happens in your environment when you vary `num` and `length`?","body":"Do you have any data on what happens in your environment when you vary <code>num</code> and <code>length</code>?"},{"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"score":0,"creation_date":1569785798,"post_id":58158445,"comment_id":102699558,"body_markdown":"@mangusta There are no 2d arrays in Java, I believe your guess is wrong. https://stackoverflow.com/a/6631081/1570854","body":"@mangusta There are no 2d arrays in Java, I believe your guess is wrong. <a href=\"https://stackoverflow.com/a/6631081/1570854\">stackoverflow.com/a/6631081/1570854</a>"},{"owner":{"account_id":1695351,"reputation":3510,"user_id":1556820,"accept_rate":50,"display_name":"mangusta"},"score":0,"creation_date":1569785862,"post_id":58158445,"comment_id":102699573,"body_markdown":"@Lesiak so basically, the above two code snippets are semantically identical?","body":"@Lesiak so basically, the above two code snippets are semantically identical?"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":2,"creation_date":1569786774,"post_id":58158445,"comment_id":102699766,"body_markdown":"If you run JMH with `-prof perfasm`, you might gain some helpful insights. E.g. I can see lots of `ObjArrayKlass::multi_allocate` present in the output of the first method, but absent in the second one. My guess: reflection overhead?","body":"If you run JMH with <code>-prof perfasm</code>, you might gain some helpful insights. E.g. I can see lots of <code>ObjArrayKlass::multi_allocate</code> present in the output of the first method, but absent in the second one. My guess: reflection overhead?"},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1569786982,"post_id":58158445,"comment_id":102699810,"body_markdown":"How much warm up is there, because JIT from `newArray()` would make `newArray2()` faster without warm up, since the expensive part is common to both. What figures do you get if you run each benchmark method by itself in completely separate runs?","body":"How much warm up is there, because JIT from <code>newArray()</code> would make <code>newArray2()</code> faster without warm up, since the expensive part is common to both. What figures do you get if you run each benchmark method by itself in completely separate runs?"},{"owner":{"account_id":7413926,"reputation":5474,"user_id":11374957,"display_name":"Kaan"},"score":0,"creation_date":1569787234,"post_id":58158445,"comment_id":102699861,"body_markdown":"I&#39;m not certain but my first thought is: you&#39;re paying a time cost to allocate a single contiguous block of memory for `newArray()` that does not exist with the looped allocation approach.","body":"I&#39;m not certain but my first thought is: you&#39;re paying a time cost to allocate a single contiguous block of memory for <code>newArray()</code> that does not exist with the looped allocation approach."},{"owner":{"account_id":7413926,"reputation":5474,"user_id":11374957,"display_name":"Kaan"},"score":0,"creation_date":1569787455,"post_id":58158445,"comment_id":102699901,"body_markdown":"Does the behavior change if you increase beyond a count of 25? Do the benchmark numbers remain the same if you run only one test (and comment out the other) at a time?","body":"Does the behavior change if you increase beyond a count of 25? Do the benchmark numbers remain the same if you run only one test (and comment out the other) at a time?"},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":3,"creation_date":1569791770,"post_id":58158445,"comment_id":102700839,"body_markdown":"@Bohemian Doesn&#39;t JMH execute each benchmark in isolation (i.e. in its own JVM) and handle warmup for you? By default, I believe 5 forks are used _per benchmark_, where each fork runs 5 warmup iterations and 5 measurement iterations.","body":"@Bohemian Doesn&#39;t JMH execute each benchmark in isolation (i.e. in its own JVM) and handle warmup for you? By default, I believe 5 forks are used <i>per benchmark</i>, where each fork runs 5 warmup iterations and 5 measurement iterations."},{"owner":{"account_id":523757,"reputation":60391,"user_id":3141234,"accept_rate":76,"display_name":"Alexander"},"score":0,"creation_date":1569893003,"post_id":58158445,"comment_id":102734538,"body_markdown":"I wonder, does the JVM allocate fully-formed objects for every array, with a full object header and everything?. There&#39;s probably an optimization opportunity to optimize multidimensional arrays into 1 dimensional arrays behind the scenes, and produce fully-fleshed array objects only when they&#39;re necessary.","body":"I wonder, does the JVM allocate fully-formed objects for every array, with a full object header and everything?. There&#39;s probably an optimization opportunity to optimize multidimensional arrays into 1 dimensional arrays behind the scenes, and produce fully-fleshed array objects only when they&#39;re necessary."}],"answers":[{"comments":[{"owner":{"account_id":6340208,"reputation":48515,"user_id":4922375,"accept_rate":96,"display_name":"Andrew Tobilko"},"score":8,"creation_date":1569788760,"post_id":58158870,"comment_id":102700204,"body_markdown":"it would be nice if you elaborated on these results because I didn&#39;t get anything ;)","body":"it would be nice if you elaborated on these results because I didn&#39;t get anything ;)"},{"owner":{"account_id":3155790,"reputation":14985,"user_id":2668232,"accept_rate":100,"display_name":"Oleksandr Pyrohov"},"score":3,"creation_date":1569839401,"post_id":58158870,"comment_id":102713695,"body_markdown":"@Andrew Thank you for comment. I updated my answer with some additional details. If you still have any specific questions, please don&#39;t hesitate to ask.","body":"@Andrew Thank you for comment. I updated my answer with some additional details. If you still have any specific questions, please don&#39;t hesitate to ask."}],"tags":[],"owner":{"account_id":3155790,"reputation":14985,"user_id":2668232,"accept_rate":100,"display_name":"Oleksandr Pyrohov"},"comment_count":2,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1570006990,"creation_date":1569788231,"answer_id":58158870,"question_id":58158445,"body_markdown":"A note in the [Oracle Docs][1] under the `multianewarray` instruction says:\r\n\r\n&gt; It may be more efficient to use `newarray` or `anewarray` ([&#167;newarray][2], [&#167;anewarray][3]) when creating an array of a single dimension.\r\n\r\nFurther:\r\n\r\n`newArray` benchmark uses `multianewarray` bytecode instruction.\r\n\r\n`newArray2` benchmark uses `anewarray` bytecode instruction.\r\n\r\nAnd that is what makes a difference. Let&#39;s see the statistics obtained using the `perf` Linux profiler.\r\n\r\nFor the `newArray` benchmark the hottest methods after inlining are:\r\n\r\n    ....[Hottest Methods (after inlining)]..............................................................\r\n     22.58%           libjvm.so  MemAllocator::allocate\r\n     14.80%           libjvm.so  ObjArrayAllocator::initialize\r\n     12.92%           libjvm.so  TypeArrayKlass::multi_allocate\r\n     10.98%           libjvm.so  AccessInternal::PostRuntimeDispatch&lt;G1BarrierSet::AccessBarrier&lt;2670710ul, G1BarrierSet&gt;, (AccessInternal::BarrierType)1, 2670710ul&gt;::oop_access_barrier\r\n      7.38%           libjvm.so  ObjArrayKlass::multi_allocate\r\n      6.02%           libjvm.so  MemAllocator::Allocation::notify_allocation_jvmti_sampler\r\n      5.84%          ld-2.27.so  __tls_get_addr\r\n      5.66%           libjvm.so  CollectedHeap::array_allocate\r\n      5.39%           libjvm.so  Klass::check_array_allocation_length\r\n      4.76%        libc-2.27.so  __memset_avx2_unaligned_erms\r\n      0.75%        libc-2.27.so  __memset_avx2_erms\r\n      0.38%           libjvm.so  __tls_get_addr@plt\r\n      0.17%           libjvm.so  memset@plt\r\n      0.10%           libjvm.so  G1ParScanThreadState::copy_to_survivor_space\r\n      0.10%   [kernel.kallsyms]  update_blocked_averages\r\n      0.06%   [kernel.kallsyms]  native_write_msr\r\n      0.05%           libjvm.so  G1ParScanThreadState::trim_queue\r\n      0.05%           libjvm.so  Monitor::lock_without_safepoint_check\r\n      0.05%           libjvm.so  G1FreeCollectionSetTask::G1SerialFreeCollectionSetClosure::do_heap_region\r\n      0.05%           libjvm.so  OtherRegionsTable::occupied\r\n      1.92%  &lt;...other 288 warm methods...&gt;\r\n\r\n    ....[Distribution by Source]....\r\n     87.61%           libjvm.so\r\n      5.84%          ld-2.27.so\r\n      5.56%        libc-2.27.so\r\n      0.92%   [kernel.kallsyms]\r\n      0.03%      perf-27943.map\r\n      0.03%              [vdso]\r\n      0.01%  libpthread-2.27.so\r\n    ................................\r\n    100.00%  &lt;totals&gt;\r\n\r\nAnd for the `newArray2`:\r\n\r\n    ....[Hottest Methods (after inlining)]..............................................................\r\n     93.45%      perf-28023.map  [unknown]\r\n      0.26%           libjvm.so  G1ParScanThreadState::copy_to_survivor_space\r\n      0.22%   [kernel.kallsyms]  update_blocked_averages\r\n      0.19%           libjvm.so  OtherRegionsTable::is_empty\r\n      0.17%        libc-2.27.so  __memset_avx2_erms\r\n      0.16%        libc-2.27.so  __memset_avx2_unaligned_erms\r\n      0.14%           libjvm.so  OptoRuntime::new_array_C\r\n      0.12%           libjvm.so  G1ParScanThreadState::trim_queue\r\n      0.11%           libjvm.so  G1FreeCollectionSetTask::G1SerialFreeCollectionSetClosure::do_heap_region\r\n      0.11%           libjvm.so  MemAllocator::allocate_inside_tlab_slow\r\n      0.11%           libjvm.so  ObjArrayAllocator::initialize\r\n      0.10%           libjvm.so  OtherRegionsTable::occupied\r\n      0.10%           libjvm.so  MemAllocator::allocate\r\n      0.10%           libjvm.so  Monitor::lock_without_safepoint_check\r\n      0.10%   [kernel.kallsyms]  rt2800pci_rxdone_tasklet\r\n      0.09%           libjvm.so  G1Allocator::unsafe_max_tlab_alloc\r\n      0.08%           libjvm.so  ThreadLocalAllocBuffer::fill\r\n      0.08%          ld-2.27.so  __tls_get_addr\r\n      0.07%           libjvm.so  G1CollectedHeap::allocate_new_tlab\r\n      0.07%           libjvm.so  TypeArrayKlass::allocate_common\r\n      4.15%  &lt;...other 411 warm methods...&gt;\r\n\r\n    ....[Distribution by Source]....\r\n     93.45%      perf-28023.map\r\n      4.31%           libjvm.so\r\n      1.64%   [kernel.kallsyms]\r\n      0.42%        libc-2.27.so\r\n      0.08%          ld-2.27.so\r\n      0.06%              [vdso]\r\n      0.04%  libpthread-2.27.so\r\n    ................................\r\n    100.00%  &lt;totals&gt;\r\n\r\nAs we can see, for the slower `newArray` most of the time is spent in the jvm code (87.61% total):\r\n\r\n    22.58%  libjvm.so  MemAllocator::allocate\r\n    14.80%  libjvm.so  ObjArrayAllocator::initialize\r\n    12.92%  libjvm.so  TypeArrayKlass::multi_allocate\r\n     7.38%  libjvm.so  ObjArrayKlass::multi_allocate\r\n       ...\r\n\r\nWhile the `newArray2` uses the `OptoRuntime::new_array_C`, spending much less time allocating the memory for arrays. The total time spent in the jvm code is only 4.31%.\r\n\r\nBonus statistics obtained using the `perfnorm` profiler:\r\n\r\n    Benchmark                        Mode  Cnt        Score    Error  Units\r\n    newArray                         avgt    4      448.018 &#177; 80.029  us/op\r\n    newArray:CPI                     avgt             0.359            #/op\r\n    newArray:L1-dcache-load-misses   avgt         10399.712            #/op\r\n    newArray:L1-dcache-loads         avgt       1032985.924            #/op\r\n    newArray:L1-dcache-stores        avgt        590756.905            #/op\r\n    newArray:cycles                  avgt       1132753.204            #/op\r\n    newArray:instructions            avgt       3159465.006            #/op\r\n\r\n    Benchmark                        Mode  Cnt        Score    Error  Units\r\n    newArray2                        avgt    4      125.531 &#177; 50.749  us/op\r\n    newArray2:CPI                    avgt             0.532            #/op\r\n    newArray2:L1-dcache-load-misses  avgt         10345.720            #/op\r\n    newArray2:L1-dcache-loads        avgt         85185.726            #/op\r\n    newArray2:L1-dcache-stores       avgt        103096.223            #/op\r\n    newArray2:cycles                 avgt        346651.432            #/op\r\n    newArray2:instructions           avgt        652155.439            #/op\r\n\r\nNote the difference in the number of cycles and instructions.\r\n\r\n---\r\n\r\nEnvironment:\r\n\r\n    Ubuntu 18.04.3 LTS\r\n\r\n    java version &quot;12.0.2&quot; 2019-07-16\r\n    Java(TM) SE Runtime Environment (build 12.0.2+10)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 12.0.2+10, mixed mode, sharing)\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jvms/se12/html/jvms-6.html#jvms-6.5.multianewarray\r\n  [2]: https://docs.oracle.com/javase/specs/jvms/se12/html/jvms-6.html#jvms-6.5.newarray\r\n  [3]: https://docs.oracle.com/javase/specs/jvms/se12/html/jvms-6.html#jvms-6.5.anewarray","title":"Why does allocating a single 2D array take longer than a loop allocating multiple 1D arrays of the same total size and shape?","body":"<p>A note in the <a href=\"https://docs.oracle.com/javase/specs/jvms/se12/html/jvms-6.html#jvms-6.5.multianewarray\" rel=\"noreferrer\">Oracle Docs</a> under the <code>multianewarray</code> instruction says:</p>\n\n<blockquote>\n  <p>It may be more efficient to use <code>newarray</code> or <code>anewarray</code> (<a href=\"https://docs.oracle.com/javase/specs/jvms/se12/html/jvms-6.html#jvms-6.5.newarray\" rel=\"noreferrer\">Â§newarray</a>, <a href=\"https://docs.oracle.com/javase/specs/jvms/se12/html/jvms-6.html#jvms-6.5.anewarray\" rel=\"noreferrer\">Â§anewarray</a>) when creating an array of a single dimension.</p>\n</blockquote>\n\n<p>Further:</p>\n\n<p><code>newArray</code> benchmark uses <code>multianewarray</code> bytecode instruction.</p>\n\n<p><code>newArray2</code> benchmark uses <code>anewarray</code> bytecode instruction.</p>\n\n<p>And that is what makes a difference. Let's see the statistics obtained using the <code>perf</code> Linux profiler.</p>\n\n<p>For the <code>newArray</code> benchmark the hottest methods after inlining are:</p>\n\n<pre><code>....[Hottest Methods (after inlining)]..............................................................\n 22.58%           libjvm.so  MemAllocator::allocate\n 14.80%           libjvm.so  ObjArrayAllocator::initialize\n 12.92%           libjvm.so  TypeArrayKlass::multi_allocate\n 10.98%           libjvm.so  AccessInternal::PostRuntimeDispatch&lt;G1BarrierSet::AccessBarrier&lt;2670710ul, G1BarrierSet&gt;, (AccessInternal::BarrierType)1, 2670710ul&gt;::oop_access_barrier\n  7.38%           libjvm.so  ObjArrayKlass::multi_allocate\n  6.02%           libjvm.so  MemAllocator::Allocation::notify_allocation_jvmti_sampler\n  5.84%          ld-2.27.so  __tls_get_addr\n  5.66%           libjvm.so  CollectedHeap::array_allocate\n  5.39%           libjvm.so  Klass::check_array_allocation_length\n  4.76%        libc-2.27.so  __memset_avx2_unaligned_erms\n  0.75%        libc-2.27.so  __memset_avx2_erms\n  0.38%           libjvm.so  __tls_get_addr@plt\n  0.17%           libjvm.so  memset@plt\n  0.10%           libjvm.so  G1ParScanThreadState::copy_to_survivor_space\n  0.10%   [kernel.kallsyms]  update_blocked_averages\n  0.06%   [kernel.kallsyms]  native_write_msr\n  0.05%           libjvm.so  G1ParScanThreadState::trim_queue\n  0.05%           libjvm.so  Monitor::lock_without_safepoint_check\n  0.05%           libjvm.so  G1FreeCollectionSetTask::G1SerialFreeCollectionSetClosure::do_heap_region\n  0.05%           libjvm.so  OtherRegionsTable::occupied\n  1.92%  &lt;...other 288 warm methods...&gt;\n\n....[Distribution by Source]....\n 87.61%           libjvm.so\n  5.84%          ld-2.27.so\n  5.56%        libc-2.27.so\n  0.92%   [kernel.kallsyms]\n  0.03%      perf-27943.map\n  0.03%              [vdso]\n  0.01%  libpthread-2.27.so\n................................\n100.00%  &lt;totals&gt;\n</code></pre>\n\n<p>And for the <code>newArray2</code>:</p>\n\n<pre><code>....[Hottest Methods (after inlining)]..............................................................\n 93.45%      perf-28023.map  [unknown]\n  0.26%           libjvm.so  G1ParScanThreadState::copy_to_survivor_space\n  0.22%   [kernel.kallsyms]  update_blocked_averages\n  0.19%           libjvm.so  OtherRegionsTable::is_empty\n  0.17%        libc-2.27.so  __memset_avx2_erms\n  0.16%        libc-2.27.so  __memset_avx2_unaligned_erms\n  0.14%           libjvm.so  OptoRuntime::new_array_C\n  0.12%           libjvm.so  G1ParScanThreadState::trim_queue\n  0.11%           libjvm.so  G1FreeCollectionSetTask::G1SerialFreeCollectionSetClosure::do_heap_region\n  0.11%           libjvm.so  MemAllocator::allocate_inside_tlab_slow\n  0.11%           libjvm.so  ObjArrayAllocator::initialize\n  0.10%           libjvm.so  OtherRegionsTable::occupied\n  0.10%           libjvm.so  MemAllocator::allocate\n  0.10%           libjvm.so  Monitor::lock_without_safepoint_check\n  0.10%   [kernel.kallsyms]  rt2800pci_rxdone_tasklet\n  0.09%           libjvm.so  G1Allocator::unsafe_max_tlab_alloc\n  0.08%           libjvm.so  ThreadLocalAllocBuffer::fill\n  0.08%          ld-2.27.so  __tls_get_addr\n  0.07%           libjvm.so  G1CollectedHeap::allocate_new_tlab\n  0.07%           libjvm.so  TypeArrayKlass::allocate_common\n  4.15%  &lt;...other 411 warm methods...&gt;\n\n....[Distribution by Source]....\n 93.45%      perf-28023.map\n  4.31%           libjvm.so\n  1.64%   [kernel.kallsyms]\n  0.42%        libc-2.27.so\n  0.08%          ld-2.27.so\n  0.06%              [vdso]\n  0.04%  libpthread-2.27.so\n................................\n100.00%  &lt;totals&gt;\n</code></pre>\n\n<p>As we can see, for the slower <code>newArray</code> most of the time is spent in the jvm code (87.61% total):</p>\n\n<pre><code>22.58%  libjvm.so  MemAllocator::allocate\n14.80%  libjvm.so  ObjArrayAllocator::initialize\n12.92%  libjvm.so  TypeArrayKlass::multi_allocate\n 7.38%  libjvm.so  ObjArrayKlass::multi_allocate\n   ...\n</code></pre>\n\n<p>While the <code>newArray2</code> uses the <code>OptoRuntime::new_array_C</code>, spending much less time allocating the memory for arrays. The total time spent in the jvm code is only 4.31%.</p>\n\n<p>Bonus statistics obtained using the <code>perfnorm</code> profiler:</p>\n\n<pre><code>Benchmark                        Mode  Cnt        Score    Error  Units\nnewArray                         avgt    4      448.018 Â± 80.029  us/op\nnewArray:CPI                     avgt             0.359            #/op\nnewArray:L1-dcache-load-misses   avgt         10399.712            #/op\nnewArray:L1-dcache-loads         avgt       1032985.924            #/op\nnewArray:L1-dcache-stores        avgt        590756.905            #/op\nnewArray:cycles                  avgt       1132753.204            #/op\nnewArray:instructions            avgt       3159465.006            #/op\n\nBenchmark                        Mode  Cnt        Score    Error  Units\nnewArray2                        avgt    4      125.531 Â± 50.749  us/op\nnewArray2:CPI                    avgt             0.532            #/op\nnewArray2:L1-dcache-load-misses  avgt         10345.720            #/op\nnewArray2:L1-dcache-loads        avgt         85185.726            #/op\nnewArray2:L1-dcache-stores       avgt        103096.223            #/op\nnewArray2:cycles                 avgt        346651.432            #/op\nnewArray2:instructions           avgt        652155.439            #/op\n</code></pre>\n\n<p>Note the difference in the number of cycles and instructions.</p>\n\n<hr>\n\n<p>Environment:</p>\n\n<pre><code>Ubuntu 18.04.3 LTS\n\njava version \"12.0.2\" 2019-07-16\nJava(TM) SE Runtime Environment (build 12.0.2+10)\nJava HotSpot(TM) 64-Bit Server VM (build 12.0.2+10, mixed mode, sharing)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7413926,"reputation":5474,"user_id":11374957,"display_name":"Kaan"},"score":7,"creation_date":1569796813,"post_id":58159384,"comment_id":102701766,"body_markdown":"Nice answer, especially including a flame graph â€“&#160;I wish they were more common.","body":"Nice answer, especially including a flame graph â€“ I wish they were more common."},{"owner":{"account_id":14314642,"reputation":963,"user_id":10339780,"display_name":"user10339780"},"score":1,"creation_date":1569804007,"post_id":58159384,"comment_id":102702763,"body_markdown":"Thank you for your answer. It&#39;s a good answer to my doubts.\n\nThe problem is the entertainment of rest time. It&#39;s not really about optimizing the details.","body":"Thank you for your answer. It&#39;s a good answer to my doubts.  The problem is the entertainment of rest time. It&#39;s not really about optimizing the details."}],"tags":[],"owner":{"account_id":4210603,"reputation":94386,"user_id":3448419,"display_name":"apangin"},"comment_count":2,"down_vote_count":0,"up_vote_count":85,"is_accepted":true,"score":85,"last_activity_date":1683735053,"creation_date":1569792971,"answer_id":58159384,"question_id":58158445,"body_markdown":"In Java there is a separate bytecode instruction for allocating multidimensional arrays - [`multianewarray`](https://docs.oracle.com/javase/specs/jvms/se11/html/jvms-6.html#jvms-6.5.multianewarray).\r\n\r\n - `newArray` benchmark uses `multianewarray` bytecode;\r\n - `newArray2` invokes simple `newarray` in the loop.\r\n\r\nThe problem is that HotSpot JVM **has no fast path**&lt;sup&gt;*&lt;/sup&gt; for `multianewarray` bytecode. This instruction is always executed in VM runtime. Therefore, the allocation is not inlined in the compiled code.\r\n\r\nThe first benchmark has to pay performance penalty of switching between Java and VM Runtime contexts. Also, the common allocation code in the VM runtime (written in C++) is not as optimized as inlined allocation in JIT-compiled code, just because it is *generic*, i.e. not optimized for the particular object type or for the particular call site, it performs additional runtime checks, etc.\r\n\r\nHere are the results of profiling both benchmarks with [async-profiler](https://github.com/jvm-profiling-tools/async-profiler/). I used JDK 11.0.4, but for JDK 8 the picture looks similar.\r\n\r\n[![newArray][1]][1]\r\n\r\n[![newArray2][2]][2]\r\n\r\n  [1]: https://i.stack.imgur.com/gQAXW.png\r\n  [2]: https://i.stack.imgur.com/HJkU4.png\r\n\r\nIn the first case, 99% time is spent inside [`OptoRuntime::multianewarray2_C`](http://hg.openjdk.java.net/jdk/jdk/file/8ae33203d600/src/hotspot/share/opto/runtime.cpp#l318) - the C++ code in the VM runtime.\r\n\r\nIn the second case, the most of the graph is green, meaning that the program runs mostly in Java context, actually executing JIT-compiled code optimized specifically for the given benchmark.\r\n\r\n**EDIT**\r\n\r\n&lt;sup&gt;*&lt;/sup&gt; Actually, HotSpot JVM *can* inline `multianewarray`, but only if the total number of allocations does not exceed `-XX:MultiArrayExpandLimit` which defaults to 6.\r\n\r\nSo, for example, `new int[5][10]` will be allocated inline in the JIT compiled code, while the allocation of `new int[10][5]` will go through the VM runtime.","title":"Why does allocating a single 2D array take longer than a loop allocating multiple 1D arrays of the same total size and shape?","body":"<p>In Java there is a separate bytecode instruction for allocating multidimensional arrays - <a href=\"https://docs.oracle.com/javase/specs/jvms/se11/html/jvms-6.html#jvms-6.5.multianewarray\" rel=\"nofollow noreferrer\"><code>multianewarray</code></a>.</p>\n<ul>\n<li><code>newArray</code> benchmark uses <code>multianewarray</code> bytecode;</li>\n<li><code>newArray2</code> invokes simple <code>newarray</code> in the loop.</li>\n</ul>\n<p>The problem is that HotSpot JVM <strong>has no fast path</strong><sup>*</sup> for <code>multianewarray</code> bytecode. This instruction is always executed in VM runtime. Therefore, the allocation is not inlined in the compiled code.</p>\n<p>The first benchmark has to pay performance penalty of switching between Java and VM Runtime contexts. Also, the common allocation code in the VM runtime (written in C++) is not as optimized as inlined allocation in JIT-compiled code, just because it is <em>generic</em>, i.e. not optimized for the particular object type or for the particular call site, it performs additional runtime checks, etc.</p>\n<p>Here are the results of profiling both benchmarks with <a href=\"https://github.com/jvm-profiling-tools/async-profiler/\" rel=\"nofollow noreferrer\">async-profiler</a>. I used JDK 11.0.4, but for JDK 8 the picture looks similar.</p>\n<p><a href=\"https://i.stack.imgur.com/gQAXW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gQAXW.png\" alt=\"newArray\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/HJkU4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HJkU4.png\" alt=\"newArray2\" /></a></p>\n<p>In the first case, 99% time is spent inside <a href=\"http://hg.openjdk.java.net/jdk/jdk/file/8ae33203d600/src/hotspot/share/opto/runtime.cpp#l318\" rel=\"nofollow noreferrer\"><code>OptoRuntime::multianewarray2_C</code></a> - the C++ code in the VM runtime.</p>\n<p>In the second case, the most of the graph is green, meaning that the program runs mostly in Java context, actually executing JIT-compiled code optimized specifically for the given benchmark.</p>\n<p><strong>EDIT</strong></p>\n<p><sup>*</sup> Actually, HotSpot JVM <em>can</em> inline <code>multianewarray</code>, but only if the total number of allocations does not exceed <code>-XX:MultiArrayExpandLimit</code> which defaults to 6.</p>\n<p>So, for example, <code>new int[5][10]</code> will be allocated inline in the JIT compiled code, while the allocation of <code>new int[10][5]</code> will go through the VM runtime.</p>\n"}],"owner":{"account_id":14314642,"reputation":963,"user_id":10339780,"display_name":"user10339780"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5509,"favorite_count":0,"down_vote_count":0,"up_vote_count":72,"accepted_answer_id":58159384,"answer_count":2,"score":72,"last_activity_date":1683735053,"creation_date":1569784754,"question_id":58158445,"body_markdown":"I thought it would be quicker to create directly, but in fact, adding loops takes only half the time. What happened that slowed down so much?\r\n\r\nHere is the test code\r\n```\r\n@BenchmarkMode(Mode.AverageTime)\r\n@OutputTimeUnit(TimeUnit.MICROSECONDS)\r\npublic class Test_newArray {\r\n    private static int num = 10000;\r\n    private static int length = 10;\r\n\r\n    @Benchmark\r\n    public static int[][] newArray() {\r\n        return new int[num][length];\r\n    }\r\n\r\n    @Benchmark\r\n    public static int[][] newArray2() {\r\n        int[][] temps = new int[num][];\r\n        for (int i = 0; i &lt; temps.length; i++) {\r\n            temps[i] = new int[length];\r\n        }\r\n        return temps;\r\n    }\r\n\r\n}\r\n```\r\nThe test results are as follows.\r\n```\r\nBenchmark                Mode  Cnt    Score   Error  Units\r\nTest_newArray.newArray   avgt   25  289.254 &#177; 4.982  us/op\r\nTest_newArray.newArray2  avgt   25  114.364 &#177; 1.446  us/op\r\n```\r\nThe test environment is as follows\r\n\r\nJMH version: 1.21\r\n\r\nVM version: JDK 1.8.0_212, OpenJDK 64-Bit Server VM, 25.212-b04","title":"Why does allocating a single 2D array take longer than a loop allocating multiple 1D arrays of the same total size and shape?","body":"<p>I thought it would be quicker to create directly, but in fact, adding loops takes only half the time. What happened that slowed down so much?</p>\n\n<p>Here is the test code</p>\n\n<pre><code>@BenchmarkMode(Mode.AverageTime)\n@OutputTimeUnit(TimeUnit.MICROSECONDS)\npublic class Test_newArray {\n    private static int num = 10000;\n    private static int length = 10;\n\n    @Benchmark\n    public static int[][] newArray() {\n        return new int[num][length];\n    }\n\n    @Benchmark\n    public static int[][] newArray2() {\n        int[][] temps = new int[num][];\n        for (int i = 0; i &lt; temps.length; i++) {\n            temps[i] = new int[length];\n        }\n        return temps;\n    }\n\n}\n</code></pre>\n\n<p>The test results are as follows.</p>\n\n<pre><code>Benchmark                Mode  Cnt    Score   Error  Units\nTest_newArray.newArray   avgt   25  289.254 Â± 4.982  us/op\nTest_newArray.newArray2  avgt   25  114.364 Â± 1.446  us/op\n</code></pre>\n\n<p>The test environment is as follows</p>\n\n<p>JMH version: 1.21</p>\n\n<p>VM version: JDK 1.8.0_212, OpenJDK 64-Bit Server VM, 25.212-b04</p>\n"},{"tags":["java","algorithm","performance","hashset","treeset"],"answers":[{"comments":[{"owner":{"account_id":9769397,"reputation":171,"user_id":7241837,"display_name":"Mandeep Singh"},"score":0,"creation_date":1683368442,"post_id":76169984,"comment_id":134358534,"body_markdown":"Hashset wont work as output has to be sorted in end. &quot;The coordinates should also be ordered in the following way: sort first by the value y and then by the value x.&quot;","body":"Hashset wont work as output has to be sorted in end. &quot;The coordinates should also be ordered in the following way: sort first by the value y and then by the value x.&quot;"},{"owner":{"account_id":20511355,"reputation":500,"user_id":15053047,"display_name":"IWilms"},"score":0,"creation_date":1683395449,"post_id":76169984,"comment_id":134361608,"body_markdown":"Ah yes, I forgot the sorting at the end. Edited the answer and added the sorting. Can you tell if that works?","body":"Ah yes, I forgot the sorting at the end. Edited the answer and added the sorting. Can you tell if that works?"},{"owner":{"account_id":9769397,"reputation":171,"user_id":7241837,"display_name":"Mandeep Singh"},"score":0,"creation_date":1683493142,"post_id":76169984,"comment_id":134371639,"body_markdown":"Did not work still time limit exceeded.","body":"Did not work still time limit exceeded."},{"owner":{"account_id":20511355,"reputation":500,"user_id":15053047,"display_name":"IWilms"},"score":0,"creation_date":1683615288,"post_id":76169984,"comment_id":134389440,"body_markdown":"Ok, that&#39;s my final attempt:-) Edited the answer.","body":"Ok, that&#39;s my final attempt:-) Edited the answer."},{"owner":{"account_id":9769397,"reputation":171,"user_id":7241837,"display_name":"Mandeep Singh"},"score":0,"creation_date":1683659823,"post_id":76169984,"comment_id":134399993,"body_markdown":"Still timeout my friend. Agree it is challenging and I am also stubbed at python beating java in performance","body":"Still timeout my friend. Agree it is challenging and I am also stubbed at python beating java in performance"},{"owner":{"account_id":20511355,"reputation":500,"user_id":15053047,"display_name":"IWilms"},"score":1,"creation_date":1683732302,"post_id":76169984,"comment_id":134412642,"body_markdown":"Mabye you should find a competitive programmer to have a look at this. I added two tags &quot;algorithm&quot; and &quot;hashset&quot;, maybe that will attract some. I added an alternative solution, but that doesn&#39;t answer why the hashset-version times out.","body":"Mabye you should find a competitive programmer to have a look at this. I added two tags &quot;algorithm&quot; and &quot;hashset&quot;, maybe that will attract some. I added an alternative solution, but that doesn&#39;t answer why the hashset-version times out."}],"tags":[],"owner":{"account_id":20511355,"reputation":500,"user_id":15053047,"display_name":"IWilms"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683732000,"creation_date":1683179916,"answer_id":76169984,"question_id":76113751,"body_markdown":"`TreeSet` seems to have too much overhead in combination with the custom comparator. The `HashSet` version should work and is the same logic as the other versions. You just need to work with objects in order to have proper `hashCode`.\r\nYou could try changing the relevant lines to:\r\n```java-lang\r\nSet&lt;List&lt;Integer&gt;&gt; exploredSet = new HashSet&lt;&gt;();\r\n...\r\nif (exploredSet.contains(Arrays.asList(px, py))) {\r\n...\r\nexploredSet.add(Arrays.asList(px, py));\r\n...\r\nComparator&lt;List&lt;Integer&gt;&gt; comp = Comparator.comparingInt((List&lt;Integer&gt; x) -&gt; x.get(1)).thenComparingInt(x -&gt; x.get(0));\r\nexploredSet.stream()\r\n        .sorted(comp)\r\n        .map(v -&gt; v.get(0) + &quot; &quot; + v.get(1))\r\n        .forEach(System.out::println);\r\n```\r\n\r\n**EDIT**\r\n\r\nIn general, if the Python solution is within the time limit an equivalent Java version with the same logic should be too. So why wasn&#39;t it?\r\n&quot;Proper HashCode&quot; - that was exactly the problem with my solution...sorry, I was blind. Java has a very simple `hashCode` function. For a List of coordinates `X, Y` it&#39;s just `X + 31*Y`. So there are a lot of collisions. For `0 &lt;= X, Y &lt;= 999` there are just 31969 distinct hashCodes. That slows down the whole process. Using Strings should be faster and hopefully within the time limit:\r\n\r\n```java-lang\r\nSet&lt;String&gt; exploredSet = new HashSet&lt;&gt;();\r\n...\r\nif (exploredSet.contains(px + &quot; &quot; + py)) {\r\n...\r\nexploredSet.add(px + &quot; &quot; + py);\r\n...\r\nexploredSet.stream()\r\n        .sorted(Comparator.comparing(x -&gt; {\r\n            String[] s = x.split(&quot; &quot;);\r\n            return s[1] + &quot; &quot; + s[0]; }))\r\n        .forEach(System.out::println);\r\n```\r\n\r\n**EDIT2**\r\n\r\nThis is really weird. They probably pimped the python machine. Ok, one very last try with a boolean array `explored` instead of the Set `exploredSet`. That should be much faster, but it doesn&#39;t answer why the HashSet version is so slow.\r\n```\r\nboolean[] explored = new boolean[H*W]; // &lt;- put this line after the 2 for-loops\r\n...\r\nif (explored[py*H+px]) {\r\n...\r\nexplored[py*H+px] = true;\r\n...\r\nint index = 0;\r\nfor(int y=0; y&lt;H; y++){\r\n    for(int x=0; x&lt;W; x++){\r\n        if(explored[index]){\r\n            System.out.println(x + &quot; &quot; + y);\r\n        }\r\n        index++;\r\n    }\r\n}\r\n\r\n```","title":"CS Mines Flood Fill problem - Java solution times out while Cpp and python succeeds (Performance improvement)","body":"<p><code>TreeSet</code> seems to have too much overhead in combination with the custom comparator. The <code>HashSet</code> version should work and is the same logic as the other versions. You just need to work with objects in order to have proper <code>hashCode</code>.\nYou could try changing the relevant lines to:</p>\n<pre><code>Set&lt;List&lt;Integer&gt;&gt; exploredSet = new HashSet&lt;&gt;();\n...\nif (exploredSet.contains(Arrays.asList(px, py))) {\n...\nexploredSet.add(Arrays.asList(px, py));\n...\nComparator&lt;List&lt;Integer&gt;&gt; comp = Comparator.comparingInt((List&lt;Integer&gt; x) -&gt; x.get(1)).thenComparingInt(x -&gt; x.get(0));\nexploredSet.stream()\n        .sorted(comp)\n        .map(v -&gt; v.get(0) + &quot; &quot; + v.get(1))\n        .forEach(System.out::println);\n</code></pre>\n<p><strong>EDIT</strong></p>\n<p>In general, if the Python solution is within the time limit an equivalent Java version with the same logic should be too. So why wasn't it?\n&quot;Proper HashCode&quot; - that was exactly the problem with my solution...sorry, I was blind. Java has a very simple <code>hashCode</code> function. For a List of coordinates <code>X, Y</code> it's just <code>X + 31*Y</code>. So there are a lot of collisions. For <code>0 &lt;= X, Y &lt;= 999</code> there are just 31969 distinct hashCodes. That slows down the whole process. Using Strings should be faster and hopefully within the time limit:</p>\n<pre><code>Set&lt;String&gt; exploredSet = new HashSet&lt;&gt;();\n...\nif (exploredSet.contains(px + &quot; &quot; + py)) {\n...\nexploredSet.add(px + &quot; &quot; + py);\n...\nexploredSet.stream()\n        .sorted(Comparator.comparing(x -&gt; {\n            String[] s = x.split(&quot; &quot;);\n            return s[1] + &quot; &quot; + s[0]; }))\n        .forEach(System.out::println);\n</code></pre>\n<p><strong>EDIT2</strong></p>\n<p>This is really weird. They probably pimped the python machine. Ok, one very last try with a boolean array <code>explored</code> instead of the Set <code>exploredSet</code>. That should be much faster, but it doesn't answer why the HashSet version is so slow.</p>\n<pre><code>boolean[] explored = new boolean[H*W]; // &lt;- put this line after the 2 for-loops\n...\nif (explored[py*H+px]) {\n...\nexplored[py*H+px] = true;\n...\nint index = 0;\nfor(int y=0; y&lt;H; y++){\n    for(int x=0; x&lt;W; x++){\n        if(explored[index]){\n            System.out.println(x + &quot; &quot; + y);\n        }\n        index++;\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":9769397,"reputation":171,"user_id":7241837,"display_name":"Mandeep Singh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1683734984,"creation_date":1682531947,"question_id":76113751,"body_markdown":"Working to solve this problem\r\n\r\n[https://mines20.kattis.com/problems/mines20.paintbucket](https://mines20.kattis.com/problems/mines20.paintbucket)\r\n\r\nJava solution using TreeSet times out with time limit of less than 3 seconds\r\n\r\n\r\n```\r\npublic class PaintBucketCSMinesSolution {\r\n\r\n\tpublic static void main(String[] args) throws IOException {\r\n\t\t// maintain distinct list of points that have been visited\r\n\t\tSet&lt;int[]&gt; exploredSet = new TreeSet&lt;&gt;(\r\n\t\t\t\tComparator.comparingInt((int[] el) -&gt; el[1]).thenComparingInt(el -&gt; el[0]));\r\n\t\tint W;\r\n\t\tint H;\r\n\t\tint X;\r\n\t\tint Y;\r\n\t\tint[][] picture;\r\n\t\tBufferedReader r = new BufferedReader(new InputStreamReader(System.in));\r\n\t\tStringTokenizer st = new StringTokenizer(r.readLine());\r\n\t\tW = Integer.parseInt(st.nextToken());\r\n\t\tH = Integer.parseInt(st.nextToken());\r\n\t\tX = Integer.parseInt(st.nextToken());\r\n\t\tY = Integer.parseInt(st.nextToken());\r\n\t\tpicture = new int[H][W];\r\n\t\tfor (int i = 0; i &lt; H; i++) {\r\n\t\t\tst = new StringTokenizer(r.readLine());\r\n\t\t\tfor (int j = 0; j &lt; W; j++) {\r\n\t\t\t\tpicture[i][j] = Integer.parseInt(st.nextToken());\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tint color = picture[Y][X];\r\n\r\n\t\tStack&lt;int[]&gt; toExploreStack = new Stack&lt;&gt;();\r\n\r\n\t\ttoExploreStack.add(new int[] { X, Y });\r\n\r\n\t\twhile (!toExploreStack.isEmpty()) {\r\n\t\t\tint[] point = toExploreStack.pop();\r\n\t\t\tint px = point[0];\r\n\t\t\tint py = point[1];\r\n\t\t\t// System.out.println(exploredSet.contains(point));\r\n\t\t\tboolean execute = true;\r\n\r\n\t\t\tif (exploredSet.contains(point)) {\r\n\t\t\t\texecute = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (execute) {\r\n\t\t\t\texploredSet.add(point);\r\n\r\n\t\t\t\tif (px &gt; 0 &amp;&amp; picture[py][px - 1] == color) {\r\n\t\t\t\t\ttoExploreStack.add(new int[] { px - 1, py });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (px &lt; (W - 1) &amp;&amp; picture[py][px + 1] == color) {\r\n\t\t\t\t\ttoExploreStack.add(new int[] { px + 1, py });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (py &gt; 0 &amp;&amp; picture[py - 1][px] == color) {\r\n\t\t\t\t\ttoExploreStack.add(new int[] { px, py - 1 });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (py &lt; (H - 1) &amp;&amp; picture[py + 1][px] == color) {\r\n\t\t\t\t\ttoExploreStack.add(new int[] { px, py + 1 });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t// exploredSet.sort(Comparator.comparingInt((int[] el) -&gt;\r\n\t\t// el[1]).thenComparingInt(el -&gt; el[0]));\r\n\t\t// Sorting HashSet using List\r\n\r\n\t\tfor (int[] v : exploredSet) {\r\n\t\t\tSystem.out.println(v[0] + &quot; &quot; + v[1]);\r\n\t\t}\r\n\r\n\t}\r\n}\r\n```\r\n\r\n**Java HashSet** solution, which also times out\r\n\r\n```\r\npackage datastructures.algorithms;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayDeque;\r\nimport java.util.Arrays;\r\nimport java.util.Comparator;\r\nimport java.util.HashSet;\r\nimport java.util.List;\r\nimport java.util.Scanner;\r\nimport java.util.Set;\r\n\r\npublic class PaintBucketCSMinesSolution {\r\n\r\n\tpublic static void main(String[] args) throws IOException {\r\n\t\t// maintain distinct list of points that have been visited\r\n//\t\tSet&lt;int[]&gt; exploredSet = new TreeSet&lt;&gt;(\r\n//\t\t\t\tComparator.comparingInt((int[] el) -&gt; el[1]).thenComparingInt(el -&gt; el[0]));\r\n\t\tSet&lt;List&lt;Integer&gt;&gt; exploredSet = new HashSet&lt;&gt;();\r\n\t\tint W;\r\n\t\tint H;\r\n\t\tint X;\r\n\t\tint Y;\r\n\t\tint[][] picture;\r\n\t\tScanner sc = new Scanner(System.in);\r\n\t\tW = sc.nextInt();\r\n\t\tH = sc.nextInt();\r\n\t\tX = sc.nextInt();\r\n\t\tY = sc.nextInt();\r\n\t\tpicture = new int[H][W];\r\n\t\tfor (int i = 0; i &lt; H; i++) {\r\n\t\t\tfor (int j = 0; j &lt; W; j++) {\r\n\t\t\t\tpicture[i][j] = sc.nextInt();\r\n\t\t\t}\r\n\t\t}\r\n\t\tsc.close();\r\n\t\tint color = picture[Y][X];\r\n\r\n\t\tArrayDeque&lt;List&lt;Integer&gt;&gt; toExploreStack = new ArrayDeque&lt;&gt;();\r\n\r\n\t\ttoExploreStack.add(Arrays.asList(X, Y));\r\n\r\n\t\twhile (!toExploreStack.isEmpty()) {\r\n\t\t\tList&lt;Integer&gt; point = toExploreStack.pop();\r\n\t\t\tint px = point.get(0);\r\n\t\t\tint py = point.get(1);\r\n\t\t\t// System.out.println(exploredSet.contains(point));\r\n\t\t\tboolean execute = true;\r\n\r\n\t\t\tif (exploredSet.contains(point)) {\r\n\t\t\t\texecute = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (execute) {\r\n\t\t\t\texploredSet.add(point);\r\n\r\n\t\t\t\tif (px &gt; 0 &amp;&amp; picture[py][px - 1] == color) {\r\n\t\t\t\t\ttoExploreStack.add(Arrays.asList(px - 1, py));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (px &lt; (W - 1) &amp;&amp; picture[py][px + 1] == color) {\r\n\t\t\t\t\ttoExploreStack.add(Arrays.asList(px + 1, py));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (py &gt; 0 &amp;&amp; picture[py - 1][px] == color) {\r\n\t\t\t\t\ttoExploreStack.add(Arrays.asList(px, py - 1));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (py &lt; (H - 1) &amp;&amp; picture[py + 1][px] == color) {\r\n\t\t\t\t\ttoExploreStack.add(Arrays.asList(px, py + 1));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Sorting HashSet using List\r\n\r\n\t\t// exploredSet.sort(Comparator.comparingInt((List&lt;Integer&gt; el) -&gt;\r\n\t\t// el.get(1)).thenComparingInt(el -&gt; el.get(0)));\r\n\t\tComparator&lt;List&lt;Integer&gt;&gt; comp = Comparator.comparingInt((List&lt;Integer&gt; x) -&gt; x.get(1))\r\n\t\t\t\t.thenComparingInt(x -&gt; x.get(0));\r\n\t\texploredSet.stream().sorted(comp).map(v -&gt; v.get(0) + &quot; &quot; + v.get(1)).forEach(System.out::println);\r\n\r\n\t}\r\n}\r\n```\r\n\r\n**Java HashSet String** solution also timed out\r\n\r\n```\r\npackage datastructures.algorithms;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayDeque;\r\nimport java.util.Arrays;\r\nimport java.util.Comparator;\r\nimport java.util.HashSet;\r\nimport java.util.List;\r\nimport java.util.Scanner;\r\nimport java.util.Set;\r\n\r\npublic class PaintBucketStringSolution {\r\n\r\n\tpublic static void main(String[] args) throws IOException {\r\n\t\t// maintain distinct list of points that have been visited\r\n//\t\tSet&lt;int[]&gt; exploredSet = new TreeSet&lt;&gt;(\r\n//\t\t\t\tComparator.comparingInt((int[] el) -&gt; el[1]).thenComparingInt(el -&gt; el[0]));\r\n\t\tSet&lt;String&gt; exploredSet = new HashSet&lt;&gt;();\r\n\t\tint W;\r\n\t\tint H;\r\n\t\tint X;\r\n\t\tint Y;\r\n\t\tint[][] picture;\r\n\t\tScanner sc = new Scanner(System.in);\r\n\t\tW = sc.nextInt();\r\n\t\tH = sc.nextInt();\r\n\t\tX = sc.nextInt();\r\n\t\tY = sc.nextInt();\r\n\t\tpicture = new int[H][W];\r\n\t\tfor (int i = 0; i &lt; H; i++) {\r\n\t\t\tfor (int j = 0; j &lt; W; j++) {\r\n\t\t\t\tpicture[i][j] = sc.nextInt();\r\n\t\t\t}\r\n\t\t}\r\n\t\tsc.close();\r\n\t\tint color = picture[Y][X];\r\n\r\n\t\tArrayDeque&lt;List&lt;Integer&gt;&gt; toExploreStack = new ArrayDeque&lt;&gt;();\r\n\r\n\t\ttoExploreStack.add(Arrays.asList(X, Y));\r\n\r\n\t\twhile (!toExploreStack.isEmpty()) {\r\n\t\t\tList&lt;Integer&gt; point = toExploreStack.pop();\r\n\r\n\t\t\tint px = point.get(0);\r\n\t\t\tint py = point.get(1);\r\n\t\t\t// String.valueOf(\r\n\t\t\tString pointString = String.valueOf(px) + &quot; &quot; + String.valueOf(py);\r\n\t\t\t// System.out.println(exploredSet.contains(point));\r\n\t\t\tboolean execute = true;\r\n\r\n\t\t\tif (exploredSet.contains(pointString)) {\r\n\t\t\t\texecute = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (execute) {\r\n\t\t\t\texploredSet.add(pointString);\r\n\r\n\t\t\t\tif (px &gt; 0 &amp;&amp; picture[py][px - 1] == color) {\r\n\t\t\t\t\ttoExploreStack.add(Arrays.asList(px - 1, py));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (px &lt; (W - 1) &amp;&amp; picture[py][px + 1] == color) {\r\n\t\t\t\t\ttoExploreStack.add(Arrays.asList(px + 1, py));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (py &gt; 0 &amp;&amp; picture[py - 1][px] == color) {\r\n\t\t\t\t\ttoExploreStack.add(Arrays.asList(px, py - 1));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (py &lt; (H - 1) &amp;&amp; picture[py + 1][px] == color) {\r\n\t\t\t\t\ttoExploreStack.add(Arrays.asList(px, py + 1));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Sorting HashSet using List\r\n\r\n\t\texploredSet.stream().sorted(Comparator.comparing(x -&gt; {\r\n\t\t\tString[] s = x.split(&quot; &quot;);\r\n\t\t\treturn s[1] + &quot; &quot; + s[0];\r\n\t\t})).forEach(System.out::println);\r\n\r\n\t}\r\n}\r\n```\r\n\r\n\r\n**While solution in python succeeds for all test cases in 2.65 seconds**\r\n\r\n\r\n```\r\nW, H,X,Y = map(int, input().split())\r\n\r\npicture=[]\r\n\r\nfor y in range(H):\r\n    picture.append([int(c) for c in input().split()])\r\n\r\n#print(picture)\r\n# implement a stack\r\nto_explore = [(X , Y)]\r\nexplored=set()\r\ncolor = picture[Y][X]\r\n#print(&quot;color&quot; , color)\r\n\r\nwhile len(to_explore) &gt;0:\r\n    px, py = to_explore.pop()\r\n\r\n    if(px, py) in explored:\r\n        continue\r\n    explored.add((px, py))\r\n\r\n    if (px &gt; 0 and picture[py][px - 1] == color) :\r\n       to_explore.append( (px - 1, py ))\r\n\r\n    if (px &lt; (W - 1) and picture[py][px + 1] == color) :\r\n        to_explore.append((px + 1, py ))\r\n\r\n\r\n    if (py &gt; 0 and picture[py - 1][px] == color) :\r\n        to_explore.append( (px, py - 1) )\r\n\r\n    if (py &lt; (H - 1) and picture[py + 1][px] == color) :\r\n        to_explore.append(( px, py + 1) )\r\n        \r\nfor x,y in sorted(explored, key=lambda x: (x[1], x[0])):\r\n    print(x, y)    \r\n\r\n```\r\n\r\n**CPP solution finishes in 2.05 seconds**\r\n\r\n\r\n```\r\n#include &lt;algorithm&gt;\r\n#include &lt;array&gt;\r\n#include &lt;iostream&gt;\r\n#include &lt;set&gt;\r\n#include &lt;stack&gt;\r\n#include &lt;vector&gt;\r\n\r\nint main() {\r\n\t// comparison to sort the set naturally on inserting elements\r\n    const auto compare = [](const std::array&lt;int, 2&gt; &amp;lhs,\r\n                            const std::array&lt;int, 2&gt; &amp;rhs) {\r\n        return lhs[1] &lt; rhs[1] || (lhs[1] == rhs[1] &amp;&amp; lhs[0] &lt; rhs[0]);\r\n    };\r\n\r\n\t// set to maintain unique elements as it is used for lookup to check if we have visited the node already\r\n    std::set&lt;std::array&lt;int, 2&gt;, decltype(compare)&gt; exploredSet(compare);\r\n    // std::set&lt;std::array&lt;int, 2&gt;&gt; exploredSet;\r\n    int W;\r\n    int H;\r\n    int X;\r\n    int Y;\r\n    // std::vector&lt;std::vector&lt;int&gt;&gt; picture;\r\n    std::cin &gt;&gt; W;\r\n    std::cin &gt;&gt; H;\r\n    std::cin &gt;&gt; X;\r\n    std::cin &gt;&gt; Y;\r\n    int picture[W][H];\r\n    for (int i = 0; i &lt; H; i++) {\r\n        for (int j = 0; j &lt; W; j++) {\r\n            std::cin &gt;&gt; picture[i][j];\r\n        }\r\n    }\r\n    int color = picture[Y][X];\r\n\r\n    std::stack&lt;std::array&lt;int, 2&gt;&gt; toExploreStack;\r\n    toExploreStack.push({X, Y});\r\n\r\n    while (!toExploreStack.empty()) {\r\n        std::array&lt;int, 2&gt; point = toExploreStack.top();\r\n        toExploreStack.pop();\r\n        int px = point[0];\r\n        int py = point[1];\r\n        bool execute = true;\r\n\r\n        // plain for loop was slow, this method is fast\r\n        if (exploredSet.count(point) == 1) {\r\n            execute = false;\r\n        }\r\n\r\n        if (execute) {\r\n            exploredSet.insert(point);\r\n\r\n            if (px &gt; 0 &amp;&amp; picture[py][px - 1] == color) {\r\n                toExploreStack.push({px - 1, py});\r\n            }\r\n\r\n            if (px &lt; (W - 1) &amp;&amp; picture[py][px + 1] == color) {\r\n                toExploreStack.push({px + 1, py});\r\n            }\r\n\r\n            if (py &gt; 0 &amp;&amp; picture[py - 1][px] == color) {\r\n                toExploreStack.push({px, py - 1});\r\n            }\r\n\r\n            if (py &lt; (H - 1) &amp;&amp; picture[py + 1][px] == color) {\r\n                toExploreStack.push({px, py + 1});\r\n            }\r\n        }\r\n    }\r\n\r\n    for (std::array&lt;int, 2&gt; v : exploredSet) {\r\n        std::cout &lt;&lt; v[0] &lt;&lt; &quot; &quot; &lt;&lt; v[1] &lt;&lt; std::endl;\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\nPlease help in optimizing Java solution. I have run out of ideas. \r\n\r\nAlready tried \r\n- HashMap and sort it in end\r\n- HashSet and sort it in the end.\r\n\r\nAlso it is surprising python in this case is able to finish faster than Java implementation.","title":"CS Mines Flood Fill problem - Java solution times out while Cpp and python succeeds (Performance improvement)","body":"<p>Working to solve this problem</p>\n<p><a href=\"https://mines20.kattis.com/problems/mines20.paintbucket\" rel=\"nofollow noreferrer\">https://mines20.kattis.com/problems/mines20.paintbucket</a></p>\n<p>Java solution using TreeSet times out with time limit of less than 3 seconds</p>\n<pre><code>public class PaintBucketCSMinesSolution {\n\n    public static void main(String[] args) throws IOException {\n        // maintain distinct list of points that have been visited\n        Set&lt;int[]&gt; exploredSet = new TreeSet&lt;&gt;(\n                Comparator.comparingInt((int[] el) -&gt; el[1]).thenComparingInt(el -&gt; el[0]));\n        int W;\n        int H;\n        int X;\n        int Y;\n        int[][] picture;\n        BufferedReader r = new BufferedReader(new InputStreamReader(System.in));\n        StringTokenizer st = new StringTokenizer(r.readLine());\n        W = Integer.parseInt(st.nextToken());\n        H = Integer.parseInt(st.nextToken());\n        X = Integer.parseInt(st.nextToken());\n        Y = Integer.parseInt(st.nextToken());\n        picture = new int[H][W];\n        for (int i = 0; i &lt; H; i++) {\n            st = new StringTokenizer(r.readLine());\n            for (int j = 0; j &lt; W; j++) {\n                picture[i][j] = Integer.parseInt(st.nextToken());\n            }\n        }\n\n        int color = picture[Y][X];\n\n        Stack&lt;int[]&gt; toExploreStack = new Stack&lt;&gt;();\n\n        toExploreStack.add(new int[] { X, Y });\n\n        while (!toExploreStack.isEmpty()) {\n            int[] point = toExploreStack.pop();\n            int px = point[0];\n            int py = point[1];\n            // System.out.println(exploredSet.contains(point));\n            boolean execute = true;\n\n            if (exploredSet.contains(point)) {\n                execute = false;\n            }\n\n            if (execute) {\n                exploredSet.add(point);\n\n                if (px &gt; 0 &amp;&amp; picture[py][px - 1] == color) {\n                    toExploreStack.add(new int[] { px - 1, py });\n                }\n\n                if (px &lt; (W - 1) &amp;&amp; picture[py][px + 1] == color) {\n                    toExploreStack.add(new int[] { px + 1, py });\n                }\n\n                if (py &gt; 0 &amp;&amp; picture[py - 1][px] == color) {\n                    toExploreStack.add(new int[] { px, py - 1 });\n                }\n\n                if (py &lt; (H - 1) &amp;&amp; picture[py + 1][px] == color) {\n                    toExploreStack.add(new int[] { px, py + 1 });\n                }\n            }\n\n        }\n        // exploredSet.sort(Comparator.comparingInt((int[] el) -&gt;\n        // el[1]).thenComparingInt(el -&gt; el[0]));\n        // Sorting HashSet using List\n\n        for (int[] v : exploredSet) {\n            System.out.println(v[0] + &quot; &quot; + v[1]);\n        }\n\n    }\n}\n</code></pre>\n<p><strong>Java HashSet</strong> solution, which also times out</p>\n<pre><code>package datastructures.algorithms;\n\nimport java.io.IOException;\nimport java.util.ArrayDeque;\nimport java.util.Arrays;\nimport java.util.Comparator;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Scanner;\nimport java.util.Set;\n\npublic class PaintBucketCSMinesSolution {\n\n    public static void main(String[] args) throws IOException {\n        // maintain distinct list of points that have been visited\n//      Set&lt;int[]&gt; exploredSet = new TreeSet&lt;&gt;(\n//              Comparator.comparingInt((int[] el) -&gt; el[1]).thenComparingInt(el -&gt; el[0]));\n        Set&lt;List&lt;Integer&gt;&gt; exploredSet = new HashSet&lt;&gt;();\n        int W;\n        int H;\n        int X;\n        int Y;\n        int[][] picture;\n        Scanner sc = new Scanner(System.in);\n        W = sc.nextInt();\n        H = sc.nextInt();\n        X = sc.nextInt();\n        Y = sc.nextInt();\n        picture = new int[H][W];\n        for (int i = 0; i &lt; H; i++) {\n            for (int j = 0; j &lt; W; j++) {\n                picture[i][j] = sc.nextInt();\n            }\n        }\n        sc.close();\n        int color = picture[Y][X];\n\n        ArrayDeque&lt;List&lt;Integer&gt;&gt; toExploreStack = new ArrayDeque&lt;&gt;();\n\n        toExploreStack.add(Arrays.asList(X, Y));\n\n        while (!toExploreStack.isEmpty()) {\n            List&lt;Integer&gt; point = toExploreStack.pop();\n            int px = point.get(0);\n            int py = point.get(1);\n            // System.out.println(exploredSet.contains(point));\n            boolean execute = true;\n\n            if (exploredSet.contains(point)) {\n                execute = false;\n            }\n\n            if (execute) {\n                exploredSet.add(point);\n\n                if (px &gt; 0 &amp;&amp; picture[py][px - 1] == color) {\n                    toExploreStack.add(Arrays.asList(px - 1, py));\n                }\n\n                if (px &lt; (W - 1) &amp;&amp; picture[py][px + 1] == color) {\n                    toExploreStack.add(Arrays.asList(px + 1, py));\n                }\n\n                if (py &gt; 0 &amp;&amp; picture[py - 1][px] == color) {\n                    toExploreStack.add(Arrays.asList(px, py - 1));\n                }\n\n                if (py &lt; (H - 1) &amp;&amp; picture[py + 1][px] == color) {\n                    toExploreStack.add(Arrays.asList(px, py + 1));\n                }\n            }\n\n        }\n\n        // Sorting HashSet using List\n\n        // exploredSet.sort(Comparator.comparingInt((List&lt;Integer&gt; el) -&gt;\n        // el.get(1)).thenComparingInt(el -&gt; el.get(0)));\n        Comparator&lt;List&lt;Integer&gt;&gt; comp = Comparator.comparingInt((List&lt;Integer&gt; x) -&gt; x.get(1))\n                .thenComparingInt(x -&gt; x.get(0));\n        exploredSet.stream().sorted(comp).map(v -&gt; v.get(0) + &quot; &quot; + v.get(1)).forEach(System.out::println);\n\n    }\n}\n</code></pre>\n<p><strong>Java HashSet String</strong> solution also timed out</p>\n<pre><code>package datastructures.algorithms;\n\nimport java.io.IOException;\nimport java.util.ArrayDeque;\nimport java.util.Arrays;\nimport java.util.Comparator;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Scanner;\nimport java.util.Set;\n\npublic class PaintBucketStringSolution {\n\n    public static void main(String[] args) throws IOException {\n        // maintain distinct list of points that have been visited\n//      Set&lt;int[]&gt; exploredSet = new TreeSet&lt;&gt;(\n//              Comparator.comparingInt((int[] el) -&gt; el[1]).thenComparingInt(el -&gt; el[0]));\n        Set&lt;String&gt; exploredSet = new HashSet&lt;&gt;();\n        int W;\n        int H;\n        int X;\n        int Y;\n        int[][] picture;\n        Scanner sc = new Scanner(System.in);\n        W = sc.nextInt();\n        H = sc.nextInt();\n        X = sc.nextInt();\n        Y = sc.nextInt();\n        picture = new int[H][W];\n        for (int i = 0; i &lt; H; i++) {\n            for (int j = 0; j &lt; W; j++) {\n                picture[i][j] = sc.nextInt();\n            }\n        }\n        sc.close();\n        int color = picture[Y][X];\n\n        ArrayDeque&lt;List&lt;Integer&gt;&gt; toExploreStack = new ArrayDeque&lt;&gt;();\n\n        toExploreStack.add(Arrays.asList(X, Y));\n\n        while (!toExploreStack.isEmpty()) {\n            List&lt;Integer&gt; point = toExploreStack.pop();\n\n            int px = point.get(0);\n            int py = point.get(1);\n            // String.valueOf(\n            String pointString = String.valueOf(px) + &quot; &quot; + String.valueOf(py);\n            // System.out.println(exploredSet.contains(point));\n            boolean execute = true;\n\n            if (exploredSet.contains(pointString)) {\n                execute = false;\n            }\n\n            if (execute) {\n                exploredSet.add(pointString);\n\n                if (px &gt; 0 &amp;&amp; picture[py][px - 1] == color) {\n                    toExploreStack.add(Arrays.asList(px - 1, py));\n                }\n\n                if (px &lt; (W - 1) &amp;&amp; picture[py][px + 1] == color) {\n                    toExploreStack.add(Arrays.asList(px + 1, py));\n                }\n\n                if (py &gt; 0 &amp;&amp; picture[py - 1][px] == color) {\n                    toExploreStack.add(Arrays.asList(px, py - 1));\n                }\n\n                if (py &lt; (H - 1) &amp;&amp; picture[py + 1][px] == color) {\n                    toExploreStack.add(Arrays.asList(px, py + 1));\n                }\n            }\n\n        }\n\n        // Sorting HashSet using List\n\n        exploredSet.stream().sorted(Comparator.comparing(x -&gt; {\n            String[] s = x.split(&quot; &quot;);\n            return s[1] + &quot; &quot; + s[0];\n        })).forEach(System.out::println);\n\n    }\n}\n</code></pre>\n<p><strong>While solution in python succeeds for all test cases in 2.65 seconds</strong></p>\n<pre><code>W, H,X,Y = map(int, input().split())\n\npicture=[]\n\nfor y in range(H):\n    picture.append([int(c) for c in input().split()])\n\n#print(picture)\n# implement a stack\nto_explore = [(X , Y)]\nexplored=set()\ncolor = picture[Y][X]\n#print(&quot;color&quot; , color)\n\nwhile len(to_explore) &gt;0:\n    px, py = to_explore.pop()\n\n    if(px, py) in explored:\n        continue\n    explored.add((px, py))\n\n    if (px &gt; 0 and picture[py][px - 1] == color) :\n       to_explore.append( (px - 1, py ))\n\n    if (px &lt; (W - 1) and picture[py][px + 1] == color) :\n        to_explore.append((px + 1, py ))\n\n\n    if (py &gt; 0 and picture[py - 1][px] == color) :\n        to_explore.append( (px, py - 1) )\n\n    if (py &lt; (H - 1) and picture[py + 1][px] == color) :\n        to_explore.append(( px, py + 1) )\n        \nfor x,y in sorted(explored, key=lambda x: (x[1], x[0])):\n    print(x, y)    \n\n</code></pre>\n<p><strong>CPP solution finishes in 2.05 seconds</strong></p>\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;array&gt;\n#include &lt;iostream&gt;\n#include &lt;set&gt;\n#include &lt;stack&gt;\n#include &lt;vector&gt;\n\nint main() {\n    // comparison to sort the set naturally on inserting elements\n    const auto compare = [](const std::array&lt;int, 2&gt; &amp;lhs,\n                            const std::array&lt;int, 2&gt; &amp;rhs) {\n        return lhs[1] &lt; rhs[1] || (lhs[1] == rhs[1] &amp;&amp; lhs[0] &lt; rhs[0]);\n    };\n\n    // set to maintain unique elements as it is used for lookup to check if we have visited the node already\n    std::set&lt;std::array&lt;int, 2&gt;, decltype(compare)&gt; exploredSet(compare);\n    // std::set&lt;std::array&lt;int, 2&gt;&gt; exploredSet;\n    int W;\n    int H;\n    int X;\n    int Y;\n    // std::vector&lt;std::vector&lt;int&gt;&gt; picture;\n    std::cin &gt;&gt; W;\n    std::cin &gt;&gt; H;\n    std::cin &gt;&gt; X;\n    std::cin &gt;&gt; Y;\n    int picture[W][H];\n    for (int i = 0; i &lt; H; i++) {\n        for (int j = 0; j &lt; W; j++) {\n            std::cin &gt;&gt; picture[i][j];\n        }\n    }\n    int color = picture[Y][X];\n\n    std::stack&lt;std::array&lt;int, 2&gt;&gt; toExploreStack;\n    toExploreStack.push({X, Y});\n\n    while (!toExploreStack.empty()) {\n        std::array&lt;int, 2&gt; point = toExploreStack.top();\n        toExploreStack.pop();\n        int px = point[0];\n        int py = point[1];\n        bool execute = true;\n\n        // plain for loop was slow, this method is fast\n        if (exploredSet.count(point) == 1) {\n            execute = false;\n        }\n\n        if (execute) {\n            exploredSet.insert(point);\n\n            if (px &gt; 0 &amp;&amp; picture[py][px - 1] == color) {\n                toExploreStack.push({px - 1, py});\n            }\n\n            if (px &lt; (W - 1) &amp;&amp; picture[py][px + 1] == color) {\n                toExploreStack.push({px + 1, py});\n            }\n\n            if (py &gt; 0 &amp;&amp; picture[py - 1][px] == color) {\n                toExploreStack.push({px, py - 1});\n            }\n\n            if (py &lt; (H - 1) &amp;&amp; picture[py + 1][px] == color) {\n                toExploreStack.push({px, py + 1});\n            }\n        }\n    }\n\n    for (std::array&lt;int, 2&gt; v : exploredSet) {\n        std::cout &lt;&lt; v[0] &lt;&lt; &quot; &quot; &lt;&lt; v[1] &lt;&lt; std::endl;\n    }\n}\n\n</code></pre>\n<p>Please help in optimizing Java solution. I have run out of ideas.</p>\n<p>Already tried</p>\n<ul>\n<li>HashMap and sort it in end</li>\n<li>HashSet and sort it in the end.</li>\n</ul>\n<p>Also it is surprising python in this case is able to finish faster than Java implementation.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9781,"page":444,"page_size":100}
