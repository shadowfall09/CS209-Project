{"items":[{"tags":["java","google-app-engine","jvm","jetty","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":1881220,"reputation":4005,"user_id":1701388,"display_name":"Chanseok Oh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523371733,"creation_date":1522813556,"answer_id":49642422,"question_id":49620058,"body_markdown":"The variable is applied only to the Java process that runs as the entrypoint of the docker container.\r\n\r\n`JAVA_HEAP_OPTS` is not a magic environment variable that would be automatically and globally applied to any random execution of Java inside the docker container. It is no wonder why you won&#39;t see any effect when you launch your own, separate Java process.\r\n\r\nTake a look at the following code and you will understand how it works:\r\n\r\n- https://github.com/GoogleCloudPlatform/openjdk-runtime/blob/9-2018-02-28_16_02/openjdk-common/src/main/docker/docker-entrypoint.bash#L32\r\n- https://github.com/GoogleCloudPlatform/openjdk-runtime/blob/9-2018-02-28_16_02/openjdk-common/src/main/docker/setup-env.d/30-java-env.bash#L38","title":"How to properly set the JVM options in a flexible GAE application","body":"<p>The variable is applied only to the Java process that runs as the entrypoint of the docker container.</p>\n\n<p><code>JAVA_HEAP_OPTS</code> is not a magic environment variable that would be automatically and globally applied to any random execution of Java inside the docker container. It is no wonder why you won't see any effect when you launch your own, separate Java process.</p>\n\n<p>Take a look at the following code and you will understand how it works:</p>\n\n<ul>\n<li><a href=\"https://github.com/GoogleCloudPlatform/openjdk-runtime/blob/9-2018-02-28_16_02/openjdk-common/src/main/docker/docker-entrypoint.bash#L32\" rel=\"nofollow noreferrer\">https://github.com/GoogleCloudPlatform/openjdk-runtime/blob/9-2018-02-28_16_02/openjdk-common/src/main/docker/docker-entrypoint.bash#L32</a></li>\n<li><a href=\"https://github.com/GoogleCloudPlatform/openjdk-runtime/blob/9-2018-02-28_16_02/openjdk-common/src/main/docker/setup-env.d/30-java-env.bash#L38\" rel=\"nofollow noreferrer\">https://github.com/GoogleCloudPlatform/openjdk-runtime/blob/9-2018-02-28_16_02/openjdk-common/src/main/docker/setup-env.d/30-java-env.bash#L38</a></li>\n</ul>\n"}],"owner":{"account_id":3100330,"reputation":73,"user_id":2624617,"accept_rate":20,"display_name":"Wessel Oosthuizen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1511,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1635771401,"creation_date":1522710949,"question_id":49620058,"body_markdown":"the following is my app.yaml file for a GAE flexible Java 8 / Jetty application.  \r\n\r\n    runtime: java\r\n    env: flex\r\n    manual_scaling:\r\n      instances: 1\r\n    \r\n    runtime_config:  # Optional\r\n      jdk: openjdk8\r\n      server: jetty9\r\n    \r\n    resources:\r\n      cpu: 2\r\n      memory_gb: 4.0\r\n    \r\n    env_variables:\r\n      JAVA_HEAP_OPTS: -Xms3072M -Xmx3072M\r\n    \r\n    health_check:\r\n      enable_health_check: False\r\n    \r\n    handlers:\r\n    - url: /.*\r\n      script: this field is required, but ignored\r\n\r\nFor some reason the JAVA_HEAP_OPTS value is not used when deploying the app.  A least I don&#39;t think it&#39;s used, because when I SSH into the docker container, and run the following command, the memory values are much less.\r\n\r\n    java -XX:+PrintFlagsFinal -version | grep -iE &#39;HeapSize|PermSize|ThreadStackSize&#39;\r\n\r\nCan someone please tell me what&#39;s going or what I need to do differently?\r\n\r\nThanks","title":"How to properly set the JVM options in a flexible GAE application","body":"<p>the following is my app.yaml file for a GAE flexible Java 8 / Jetty application.  </p>\n\n<pre><code>runtime: java\nenv: flex\nmanual_scaling:\n  instances: 1\n\nruntime_config:  # Optional\n  jdk: openjdk8\n  server: jetty9\n\nresources:\n  cpu: 2\n  memory_gb: 4.0\n\nenv_variables:\n  JAVA_HEAP_OPTS: -Xms3072M -Xmx3072M\n\nhealth_check:\n  enable_health_check: False\n\nhandlers:\n- url: /.*\n  script: this field is required, but ignored\n</code></pre>\n\n<p>For some reason the JAVA_HEAP_OPTS value is not used when deploying the app.  A least I don't think it's used, because when I SSH into the docker container, and run the following command, the memory values are much less.</p>\n\n<pre><code>java -XX:+PrintFlagsFinal -version | grep -iE 'HeapSize|PermSize|ThreadStackSize'\n</code></pre>\n\n<p>Can someone please tell me what's going or what I need to do differently?</p>\n\n<p>Thanks</p>\n"},{"tags":["java","memory-management","jvm","websphere","heap-memory"],"comments":[{"owner":{"account_id":1355094,"reputation":912,"user_id":1293660,"accept_rate":88,"display_name":"kgibm"},"score":0,"creation_date":1534778907,"post_id":51752271,"comment_id":90818050,"body_markdown":"The only strange thing I see is that there are ~750MB of freed 32-bit allocation regions. That might suggest unneeded churn of some kind. But I would first start by gathering the matching OS data on RSS/VSZ over time and periodic javacores. If RSS is going over -Xmx, then I&#39;d be worried. You can open a support case if you need additional help.","body":"The only strange thing I see is that there are ~750MB of freed 32-bit allocation regions. That might suggest unneeded churn of some kind. But I would first start by gathering the matching OS data on RSS/VSZ over time and periodic javacores. If RSS is going over -Xmx, then I&#39;d be worried. You can open a support case if you need additional help."}],"answers":[{"tags":[],"owner":{"account_id":1355094,"reputation":912,"user_id":1293660,"accept_rate":88,"display_name":"kgibm"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1533750732,"creation_date":1533749850,"answer_id":51752587,"question_id":51752271,"body_markdown":"The `NATIVEMEMINFO` section shows virtual memory, so `5,368,770,560` simply means that the JVM has virtually allocated that much memory for the heap. How much is actually resident will depend on actual heap size and heap usage. If, for example, a lot of garbage builds up in the tenured region and then gets cleaned up in a full GC, then it could be that at some point those pages became resident, but how much is actually live depends on many factors. I believe when the JVM starts, it virtually allocates the full size of `-Xmx` so I think you&#39;ll always see the full size of the heap in NATIVEMEMINFO (it could also be that it only allocates `-Xms`, so if what you&#39;re seeing is larger than `-Xms`, then it means pressure drove the heap to increase [although of course, note the normal [sawtooth](https://publib.boulder.ibm.com/httpserv/cookbook/Java.html#Java-Garbage_Collection-Generational_Garbage_Collectors-The_Sawtooth)]).\r\n\r\nWhen you load a dump in MAT, it runs a full garbage collection and removes any unreachable objects from the main view by default. You can click on the &quot;Unreachable Objects Histogram&quot; link on the Overview page and scroll to the bottom to the sum of shallow heap totals line to see how much &quot;trash&quot; is in the heapdump. There&#39;s also an option in MAT preferences to &quot;Keep unreachable objects&quot; which would keep all of those objects in the main MAT views, but that&#39;s usually not very useful.\r\n\r\nSo the basic answer is that MAT only shows you live objects, so at the time of your dumps, there was 200-300MB of live objects. The rest might either be in the trash, or simply never was there and NATIVEMEMINFO is just showing virtual size.\r\n\r\nThe better way to look at heap usage over time is verbosegc and load in [GCMV](https://publib.boulder.ibm.com/httpserv/cookbook/Major_Tools-Garbage_Collection_and_Memory_Visualizer_GCMV.html):\r\n\r\n    -Xverbosegclog:verbosegc.%seq.log,20,50000","title":"Heapsize in javacore and heapdump: 20x difference on IBM JVM","body":"<p>The <code>NATIVEMEMINFO</code> section shows virtual memory, so <code>5,368,770,560</code> simply means that the JVM has virtually allocated that much memory for the heap. How much is actually resident will depend on actual heap size and heap usage. If, for example, a lot of garbage builds up in the tenured region and then gets cleaned up in a full GC, then it could be that at some point those pages became resident, but how much is actually live depends on many factors. I believe when the JVM starts, it virtually allocates the full size of <code>-Xmx</code> so I think you'll always see the full size of the heap in NATIVEMEMINFO (it could also be that it only allocates <code>-Xms</code>, so if what you're seeing is larger than <code>-Xms</code>, then it means pressure drove the heap to increase [although of course, note the normal <a href=\"https://publib.boulder.ibm.com/httpserv/cookbook/Java.html#Java-Garbage_Collection-Generational_Garbage_Collectors-The_Sawtooth\" rel=\"nofollow noreferrer\">sawtooth</a>]).</p>\n\n<p>When you load a dump in MAT, it runs a full garbage collection and removes any unreachable objects from the main view by default. You can click on the \"Unreachable Objects Histogram\" link on the Overview page and scroll to the bottom to the sum of shallow heap totals line to see how much \"trash\" is in the heapdump. There's also an option in MAT preferences to \"Keep unreachable objects\" which would keep all of those objects in the main MAT views, but that's usually not very useful.</p>\n\n<p>So the basic answer is that MAT only shows you live objects, so at the time of your dumps, there was 200-300MB of live objects. The rest might either be in the trash, or simply never was there and NATIVEMEMINFO is just showing virtual size.</p>\n\n<p>The better way to look at heap usage over time is verbosegc and load in <a href=\"https://publib.boulder.ibm.com/httpserv/cookbook/Major_Tools-Garbage_Collection_and_Memory_Visualizer_GCMV.html\" rel=\"nofollow noreferrer\">GCMV</a>:</p>\n\n<pre><code>-Xverbosegclog:verbosegc.%seq.log,20,50000\n</code></pre>\n"}],"owner":{"account_id":4576229,"reputation":1231,"user_id":3714601,"accept_rate":43,"display_name":"user3714601"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":535,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":51752587,"answer_count":1,"score":2,"last_activity_date":1635771372,"creation_date":1533748714,"question_id":51752271,"body_markdown":"It was noticed that the production server (Websphere8.5.5) started to consume an enormous amount of memory. \r\n\r\nThe figures in javacore dump clearly tell that the culprit is an outgrown heap:\r\n\r\n    |  +--Memory Manager (GC): 5,496,900,272 bytes / 3193 allocations\r\n    |  |  |\r\n    |  |  +--Java Heap: 5,368,770,560 bytes / 1 allocation\r\n    |  |  |\r\n    |  |  +--Other: 128,129,712 bytes / 3192 allocations  \r\n\r\nBut at the same time, heap dump opened in MAT reports the total volume of the heap as about 200M (sometimes up to 300M, but never more).\r\n\r\nWhat does it really mean? Is the heap dump trustworthy? If yes, is there a way to free up unused heap memory?\r\n\r\nUPDATE: the complete NATIVEMEM section, as requested\r\n\r\n    1MEMUSER       JRE: 7,211,791,256 bytes / 39196 allocations\r\n    1MEMUSER       |\r\n    2MEMUSER       +--VM: 6,772,051,048 bytes / 29934 allocations\r\n    2MEMUSER       |  |\r\n    3MEMUSER       |  +--Classes: 370,339,176 bytes / 10002 allocations\r\n    3MEMUSER       |  |  |\r\n    4MEMUSER       |  |  +--Shared Class Cache: 62,914,560 bytes / 1 allocation\r\n    3MEMUSER       |  |  |\r\n    4MEMUSER       |  |  +--Other: 307,424,616 bytes / 10001 allocations\r\n    2MEMUSER       |  |\r\n    3MEMUSER       |  +--Memory Manager (GC): 5,496,900,272 bytes / 3193 allocations\r\n    3MEMUSER       |  |  |\r\n    4MEMUSER       |  |  +--Java Heap: 5,368,770,560 bytes / 1 allocation\r\n    3MEMUSER       |  |  |\r\n    4MEMUSER       |  |  +--Other: 128,129,712 bytes / 3192 allocations\r\n    2MEMUSER       |  |\r\n    3MEMUSER       |  +--Threads: 91,710,312 bytes / 3408 allocations\r\n    3MEMUSER       |  |  |\r\n    4MEMUSER       |  |  +--Java Stack: 5,958,456 bytes / 349 allocations\r\n    3MEMUSER       |  |  |\r\n    4MEMUSER       |  |  +--Native Stack: 68,812,800 bytes / 248 allocations\r\n    3MEMUSER       |  |  |\r\n    4MEMUSER       |  |  +--Other: 16,939,056 bytes / 2811 allocations\r\n    2MEMUSER       |  |\r\n    3MEMUSER       |  +--Trace: 3,415,376 bytes / 1229 allocations\r\n    2MEMUSER       |  |\r\n    3MEMUSER       |  +--JVMTI: 17,776 bytes / 13 allocations\r\n    2MEMUSER       |  |\r\n    3MEMUSER       |  +--JNI: 5,821,768 bytes / 9844 allocations\r\n    2MEMUSER       |  |\r\n    3MEMUSER       |  +--Port Library: 794,750,560 bytes / 401 allocations\r\n    3MEMUSER       |  |  |\r\n    4MEMUSER       |  |  +--Unused &lt;32bit allocation regions: 794,704,552 bytes / 87 allocations\r\n    3MEMUSER       |  |  |\r\n    4MEMUSER       |  |  +--Other: 46,008 bytes / 314 allocations\r\n    2MEMUSER       |  |\r\n    3MEMUSER       |  +--Other: 9,095,808 bytes / 1844 allocations\r\n    1MEMUSER       |\r\n    2MEMUSER       +--JIT: 436,874,280 bytes / 8850 allocations\r\n    2MEMUSER       |  |\r\n    3MEMUSER       |  +--JIT Code Cache: 268,435,456 bytes / 1 allocation\r\n    2MEMUSER       |  |\r\n    3MEMUSER       |  +--JIT Data Cache: 48,235,968 bytes / 23 allocations\r\n    2MEMUSER       |  |\r\n    3MEMUSER       |  +--Other: 120,202,856 bytes / 8826 allocations\r\n    1MEMUSER       |\r\n    2MEMUSER       +--Class Libraries: 2,865,928 bytes / 412 allocations\r\n    2MEMUSER       |  |\r\n    3MEMUSER       |  +--Harmony Class Libraries: 2,000 bytes / 1 allocation\r\n    2MEMUSER       |  |\r\n    3MEMUSER       |  +--VM Class Libraries: 2,863,928 bytes / 411 allocations\r\n    3MEMUSER       |  |  |\r\n    4MEMUSER       |  |  +--sun.misc.Unsafe: 2,635,720 bytes / 307 allocations\r\n    4MEMUSER       |  |  |  |\r\n    5MEMUSER       |  |  |  +--Direct Byte Buffers: 2,625,112 bytes / 304 allocations\r\n    4MEMUSER       |  |  |  |\r\n    5MEMUSER       |  |  |  +--Other: 10,608 bytes / 3 allocations\r\n    3MEMUSER       |  |  |\r\n    4MEMUSER       |  |  +--Other: 228,208 bytes / 104 allocations","title":"Heapsize in javacore and heapdump: 20x difference on IBM JVM","body":"<p>It was noticed that the production server (Websphere8.5.5) started to consume an enormous amount of memory. </p>\n\n<p>The figures in javacore dump clearly tell that the culprit is an outgrown heap:</p>\n\n<pre><code>|  +--Memory Manager (GC): 5,496,900,272 bytes / 3193 allocations\n|  |  |\n|  |  +--Java Heap: 5,368,770,560 bytes / 1 allocation\n|  |  |\n|  |  +--Other: 128,129,712 bytes / 3192 allocations  \n</code></pre>\n\n<p>But at the same time, heap dump opened in MAT reports the total volume of the heap as about 200M (sometimes up to 300M, but never more).</p>\n\n<p>What does it really mean? Is the heap dump trustworthy? If yes, is there a way to free up unused heap memory?</p>\n\n<p>UPDATE: the complete NATIVEMEM section, as requested</p>\n\n<pre><code>1MEMUSER       JRE: 7,211,791,256 bytes / 39196 allocations\n1MEMUSER       |\n2MEMUSER       +--VM: 6,772,051,048 bytes / 29934 allocations\n2MEMUSER       |  |\n3MEMUSER       |  +--Classes: 370,339,176 bytes / 10002 allocations\n3MEMUSER       |  |  |\n4MEMUSER       |  |  +--Shared Class Cache: 62,914,560 bytes / 1 allocation\n3MEMUSER       |  |  |\n4MEMUSER       |  |  +--Other: 307,424,616 bytes / 10001 allocations\n2MEMUSER       |  |\n3MEMUSER       |  +--Memory Manager (GC): 5,496,900,272 bytes / 3193 allocations\n3MEMUSER       |  |  |\n4MEMUSER       |  |  +--Java Heap: 5,368,770,560 bytes / 1 allocation\n3MEMUSER       |  |  |\n4MEMUSER       |  |  +--Other: 128,129,712 bytes / 3192 allocations\n2MEMUSER       |  |\n3MEMUSER       |  +--Threads: 91,710,312 bytes / 3408 allocations\n3MEMUSER       |  |  |\n4MEMUSER       |  |  +--Java Stack: 5,958,456 bytes / 349 allocations\n3MEMUSER       |  |  |\n4MEMUSER       |  |  +--Native Stack: 68,812,800 bytes / 248 allocations\n3MEMUSER       |  |  |\n4MEMUSER       |  |  +--Other: 16,939,056 bytes / 2811 allocations\n2MEMUSER       |  |\n3MEMUSER       |  +--Trace: 3,415,376 bytes / 1229 allocations\n2MEMUSER       |  |\n3MEMUSER       |  +--JVMTI: 17,776 bytes / 13 allocations\n2MEMUSER       |  |\n3MEMUSER       |  +--JNI: 5,821,768 bytes / 9844 allocations\n2MEMUSER       |  |\n3MEMUSER       |  +--Port Library: 794,750,560 bytes / 401 allocations\n3MEMUSER       |  |  |\n4MEMUSER       |  |  +--Unused &lt;32bit allocation regions: 794,704,552 bytes / 87 allocations\n3MEMUSER       |  |  |\n4MEMUSER       |  |  +--Other: 46,008 bytes / 314 allocations\n2MEMUSER       |  |\n3MEMUSER       |  +--Other: 9,095,808 bytes / 1844 allocations\n1MEMUSER       |\n2MEMUSER       +--JIT: 436,874,280 bytes / 8850 allocations\n2MEMUSER       |  |\n3MEMUSER       |  +--JIT Code Cache: 268,435,456 bytes / 1 allocation\n2MEMUSER       |  |\n3MEMUSER       |  +--JIT Data Cache: 48,235,968 bytes / 23 allocations\n2MEMUSER       |  |\n3MEMUSER       |  +--Other: 120,202,856 bytes / 8826 allocations\n1MEMUSER       |\n2MEMUSER       +--Class Libraries: 2,865,928 bytes / 412 allocations\n2MEMUSER       |  |\n3MEMUSER       |  +--Harmony Class Libraries: 2,000 bytes / 1 allocation\n2MEMUSER       |  |\n3MEMUSER       |  +--VM Class Libraries: 2,863,928 bytes / 411 allocations\n3MEMUSER       |  |  |\n4MEMUSER       |  |  +--sun.misc.Unsafe: 2,635,720 bytes / 307 allocations\n4MEMUSER       |  |  |  |\n5MEMUSER       |  |  |  +--Direct Byte Buffers: 2,625,112 bytes / 304 allocations\n4MEMUSER       |  |  |  |\n5MEMUSER       |  |  |  +--Other: 10,608 bytes / 3 allocations\n3MEMUSER       |  |  |\n4MEMUSER       |  |  +--Other: 228,208 bytes / 104 allocations\n</code></pre>\n"},{"tags":["java","azure-active-directory","azure-blob-storage"],"answers":[{"tags":[],"owner":{"account_id":21649356,"reputation":1690,"user_id":15970233,"display_name":"ShrutiJoshi-MT"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635422519,"creation_date":1635422519,"answer_id":69753736,"question_id":69744091,"body_markdown":"[AuthenticationContext.acquireTokenSilent][1]:\r\n\r\nThe function will first look at the cache and automatically checks for the token expiration. Additionally, if no suitable access token is found in the cache, but refresh token is available, the function will use the refresh token automatically. This method will not show UI for the user. If prompt is needed, the method will return an exception\r\n\r\nIf using **MSAL** to get token, refresh token will be stored in the cache which is not exposed. We could get the new access token with acquireTokenSilently\r\n\r\n    SilentParameters parameters = SilentParameters.builder(\r\n            Collections.singleton(&quot;User.ReadBasic.All&quot;),\r\n            result.account()).build();\r\n    \r\n    CompletableFuture&lt;IAuthenticationResult&gt; future = app.acquireTokenSilently(parameters);\r\n    IAuthenticationResult updatedResult = future.get();\r\n\r\nReference: [SO Thread][2]\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/java/api/com.microsoft.aad.adal.authenticationcontext.acquiretokensilent?view=azure-java-stable\r\n  [2]: https://stackoverflow.com/questions/67242530/msal4j-aquire-refresh-token-and-access-token-to-save-instead-of-asking-users-for","title":"How to renew token using msal4j and Azure Blob Storage library","body":"<p><a href=\"https://learn.microsoft.com/en-us/java/api/com.microsoft.aad.adal.authenticationcontext.acquiretokensilent?view=azure-java-stable\" rel=\"nofollow noreferrer\">AuthenticationContext.acquireTokenSilent</a>:</p>\n<p>The function will first look at the cache and automatically checks for the token expiration. Additionally, if no suitable access token is found in the cache, but refresh token is available, the function will use the refresh token automatically. This method will not show UI for the user. If prompt is needed, the method will return an exception</p>\n<p>If using <strong>MSAL</strong> to get token, refresh token will be stored in the cache which is not exposed. We could get the new access token with acquireTokenSilently</p>\n<pre><code>SilentParameters parameters = SilentParameters.builder(\n        Collections.singleton(&quot;User.ReadBasic.All&quot;),\n        result.account()).build();\n\nCompletableFuture&lt;IAuthenticationResult&gt; future = app.acquireTokenSilently(parameters);\nIAuthenticationResult updatedResult = future.get();\n</code></pre>\n<p>Reference: <a href=\"https://stackoverflow.com/questions/67242530/msal4j-aquire-refresh-token-and-access-token-to-save-instead-of-asking-users-for\">SO Thread</a></p>\n"}],"owner":{"account_id":1448228,"reputation":3218,"user_id":1366016,"accept_rate":60,"display_name":"Wheezil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":775,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69753736,"answer_count":1,"score":1,"last_activity_date":1635771363,"creation_date":1635360971,"question_id":69744091,"body_markdown":"We are using Microsoft&#39;s Java library to access Azure Blob Storage, and the msal4j library to get the access token using the OAuth2 client access pattern.  Snippet below:\r\n\r\n    StorageCredentialsToken storageCredentialsToken = new StorageCredentialsToken(account_name, generateOAuthToken());\r\n    storageAccount = new CloudStorageAccount(storageCredentialsToken, true);\r\n    \r\n    private String generateOAuthToken() throws MalformedURLException {\r\n      String authority = String.format(ACTIVE_DIRECTORY_ENDPOINT + &quot;/%s/oauth2/v2.0/token&quot;, tenant_id);\r\n      Set&lt;String&gt; scope = Collections.singleton(String.format(&quot;https://%s.blob.core.windows.net/.default&quot;, account_name));\r\n      IClientCredential credential = ClientCredentialFactory.createFromSecret(client_secret);\r\n      ConfidentialClientApplication cca = ConfidentialClientApplication\r\n          .builder(client_id, credential)\r\n          .authority(authority)\r\n          .build();\r\n      ClientCredentialParameters parameters = ClientCredentialParameters\r\n          .builder(scope)\r\n          .build();\r\n      IAuthenticationResult result = cca.acquireToken(parameters).join();\r\n      return result.accessToken();\r\n    }\r\n\r\nThis works fine, but eventually the access token expires.  At this point operations start to fail.  In theory, there is a [refresh token][1] that can be used to renew the access token, but it does not seem to be part of the IAuthenticationResult interface.  My questions are:\r\n\r\n - Can tokens be renewed using this pattern?\r\n - If not, what can be done?  Is there another pattern that supports renewal?  Or should I ignore renewal and just get a whole new access token?\r\n - If I get a new access token, how do I install it into the existing `storageAccount` client? Can I just call `StorageCredentialsToken.updateToken()`, assuming I&#39;ve kept that around?\r\n\r\nUPDATE: response was quite helpful, but ultimately I could not get to a true token renewal when clientId/tenantId are in use.  This may be by design?  Regardless, simply acquiring a new token before expiry works, see following snippet:\r\n\r\n    IAuthenticationResult authResult = generateOAuthToken();\r\n    StorageCredentialsToken storageCredentialsToken = new StorageCredentialsToken(account_name, authResult.accessToken());\r\n    new Thread(new OAuthTokenRenewer(authResult, storageCredentialsToken)).start();\r\n    storageAccount = new CloudStorageAccount(storageCredentialsToken, true);\r\n    \r\n    private IAuthenticationResult generateOAuthToken() throws MalformedURLException {\r\n      String authority = String.format(ACTIVE_DIRECTORY_ENDPOINT + &quot;/%s/oauth2/v2.0/token&quot;, tenant_id);\r\n      Set&lt;String&gt; scope = Collections.singleton(String.format(&quot;https://%s.blob.core.windows.net/.default&quot;, account_name));\r\n      IClientCredential credential = ClientCredentialFactory.createFromSecret(client_secret);\r\n      ConfidentialClientApplication cca = ConfidentialClientApplication\r\n          .builder(client_id, credential)\r\n          .authority(authority)\r\n          .build();\r\n      ClientCredentialParameters parameters = ClientCredentialParameters\r\n          .builder(scope)\r\n          .build();\r\n      return cca.acquireToken(parameters).join();\r\n    }\r\n    \r\n    \r\n    private class OAuthTokenRenewer implements Runnable {\r\n      IAuthenticationResult authResult;\r\n      final StorageCredentialsToken storageCredentialsToken;\r\n      public OAuthTokenRenewer(IAuthenticationResult authResult, StorageCredentialsToken storageCredentialsToken) {\r\n        this.authResult = authResult;\r\n        this.storageCredentialsToken = storageCredentialsToken;\r\n      }\r\n      @Override\r\n      public void run() {\r\n        while (true) {\r\n          try {\r\n            Thread.sleep(60 * 1000L);\r\n            long now = System.currentTimeMillis();\r\n            if (authResult.expiresOnDate().getTime() - now &lt; RENEWAL_WINDOW_MS) {\r\n              authResult = generateOAuthToken();\r\n              storageCredentialsToken.updateToken(authResult.accessToken());\r\n            }\r\n          } catch (Exception ex) {\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n  [1]: https://learn.microsoft.com/en-us/azure/active-directory/develop/refresh-tokens\r\n","title":"How to renew token using msal4j and Azure Blob Storage library","body":"<p>We are using Microsoft's Java library to access Azure Blob Storage, and the msal4j library to get the access token using the OAuth2 client access pattern.  Snippet below:</p>\n<pre><code>StorageCredentialsToken storageCredentialsToken = new StorageCredentialsToken(account_name, generateOAuthToken());\nstorageAccount = new CloudStorageAccount(storageCredentialsToken, true);\n\nprivate String generateOAuthToken() throws MalformedURLException {\n  String authority = String.format(ACTIVE_DIRECTORY_ENDPOINT + &quot;/%s/oauth2/v2.0/token&quot;, tenant_id);\n  Set&lt;String&gt; scope = Collections.singleton(String.format(&quot;https://%s.blob.core.windows.net/.default&quot;, account_name));\n  IClientCredential credential = ClientCredentialFactory.createFromSecret(client_secret);\n  ConfidentialClientApplication cca = ConfidentialClientApplication\n      .builder(client_id, credential)\n      .authority(authority)\n      .build();\n  ClientCredentialParameters parameters = ClientCredentialParameters\n      .builder(scope)\n      .build();\n  IAuthenticationResult result = cca.acquireToken(parameters).join();\n  return result.accessToken();\n}\n</code></pre>\n<p>This works fine, but eventually the access token expires.  At this point operations start to fail.  In theory, there is a <a href=\"https://learn.microsoft.com/en-us/azure/active-directory/develop/refresh-tokens\" rel=\"nofollow noreferrer\">refresh token</a> that can be used to renew the access token, but it does not seem to be part of the IAuthenticationResult interface.  My questions are:</p>\n<ul>\n<li>Can tokens be renewed using this pattern?</li>\n<li>If not, what can be done?  Is there another pattern that supports renewal?  Or should I ignore renewal and just get a whole new access token?</li>\n<li>If I get a new access token, how do I install it into the existing <code>storageAccount</code> client? Can I just call <code>StorageCredentialsToken.updateToken()</code>, assuming I've kept that around?</li>\n</ul>\n<p>UPDATE: response was quite helpful, but ultimately I could not get to a true token renewal when clientId/tenantId are in use.  This may be by design?  Regardless, simply acquiring a new token before expiry works, see following snippet:</p>\n<pre><code>IAuthenticationResult authResult = generateOAuthToken();\nStorageCredentialsToken storageCredentialsToken = new StorageCredentialsToken(account_name, authResult.accessToken());\nnew Thread(new OAuthTokenRenewer(authResult, storageCredentialsToken)).start();\nstorageAccount = new CloudStorageAccount(storageCredentialsToken, true);\n\nprivate IAuthenticationResult generateOAuthToken() throws MalformedURLException {\n  String authority = String.format(ACTIVE_DIRECTORY_ENDPOINT + &quot;/%s/oauth2/v2.0/token&quot;, tenant_id);\n  Set&lt;String&gt; scope = Collections.singleton(String.format(&quot;https://%s.blob.core.windows.net/.default&quot;, account_name));\n  IClientCredential credential = ClientCredentialFactory.createFromSecret(client_secret);\n  ConfidentialClientApplication cca = ConfidentialClientApplication\n      .builder(client_id, credential)\n      .authority(authority)\n      .build();\n  ClientCredentialParameters parameters = ClientCredentialParameters\n      .builder(scope)\n      .build();\n  return cca.acquireToken(parameters).join();\n}\n\n\nprivate class OAuthTokenRenewer implements Runnable {\n  IAuthenticationResult authResult;\n  final StorageCredentialsToken storageCredentialsToken;\n  public OAuthTokenRenewer(IAuthenticationResult authResult, StorageCredentialsToken storageCredentialsToken) {\n    this.authResult = authResult;\n    this.storageCredentialsToken = storageCredentialsToken;\n  }\n  @Override\n  public void run() {\n    while (true) {\n      try {\n        Thread.sleep(60 * 1000L);\n        long now = System.currentTimeMillis();\n        if (authResult.expiresOnDate().getTime() - now &lt; RENEWAL_WINDOW_MS) {\n          authResult = generateOAuthToken();\n          storageCredentialsToken.updateToken(authResult.accessToken());\n        }\n      } catch (Exception ex) {\n      }\n    }\n  }\n}\n</code></pre>\n"},{"tags":["java","eclipse","spring-tool-suite"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":1,"creation_date":1635670712,"post_id":69784949,"comment_id":123353369,"body_markdown":"Please show the log not shortened starting with `!SESSION` and the `pom.xml`. Please note, an OutOfMemoryError can also be caused by an apparently unrelated plugin which you might have installed in your STS.","body":"Please show the log not shortened starting with <code>!SESSION</code> and the <code>pom.xml</code>. Please note, an OutOfMemoryError can also be caused by an apparently unrelated plugin which you might have installed in your STS."}],"answers":[{"tags":[],"owner":{"account_id":4091641,"reputation":1488,"user_id":3359469,"accept_rate":50,"display_name":"Falco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1635667468,"creation_date":1635667468,"answer_id":69784950,"question_id":69784949,"body_markdown":"Deleted the project (only from eclipse, don&#39;t check to option to delete from disk).\r\nThen reimport in workspace solved the problem.","title":"Eclipse STS - Out of memory","body":"<p>Deleted the project (only from eclipse, don't check to option to delete from disk).\nThen reimport in workspace solved the problem.</p>\n"}],"owner":{"account_id":4091641,"reputation":1488,"user_id":3359469,"accept_rate":50,"display_name":"Falco"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":641,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69784950,"answer_count":1,"score":0,"last_activity_date":1635771339,"creation_date":1635667468,"question_id":69784949,"body_markdown":"TRYING TO EDIT AS SUGGESTED:\r\n\r\nSTS crashes continously, here is an exmple of the last logs in projects folder:\r\n\r\n    ...\r\n    ...\r\n    ...\r\n    !ENTRY org.eclipse.ui 4 0 2021-10-31 08:41:50.924\r\n    !MESSAGE Unhandled event loop exception\r\n    !STACK 0\r\n    org.eclipse.swt.SWTException: Failed to execute runnable (java.lang.OutOfMemoryError: Requested array size exceeds VM limit)\r\n    \t...\r\n    \t...\r\n    \t...\r\n    Caused by: java.lang.OutOfMemoryError: Requested array size exceeds VM limit\r\n    \r\n    !ENTRY org.eclipse.ui 4 0 2021-10-31 08:41:58.932\r\n    !MESSAGE Unhandled event loop exception\r\n    !STACK 0\r\n    org.eclipse.swt.SWTException: Failed to execute runnable (java.lang.OutOfMemoryError: Requested array size exceeds VM limit)\r\n    \t...\r\n    \t...\r\n    \t...\r\n    Caused by: java.lang.OutOfMemoryError: Requested array size exceeds VM limit\r\n    \r\n    !ENTRY org.eclipse.ui 4 0 2021-10-31 08:42:00.869\r\n    !MESSAGE Unhandled event loop exception\r\n    !STACK 0\r\n    org.eclipse.swt.SWTException: Failed to execute runnable (java.lang.OutOfMemoryError: Requested array size exceeds VM limit)\r\n    \tat org.eclipse.swt.SWT.error(SWT.java:4720)\r\n    \t...\r\n    \t...\r\n    \t...\r\n    Caused by: java.lang.OutOfMemoryError: Requested array size exceeds VM limit\r\n    \r\n    !ENTRY org.eclipse.core.jobs 4 2 2021-10-31 08:42:47.266\r\n    !MESSAGE An internal error occurred during: &quot;Updating Maven Project&quot;.\r\n    !STACK 0\r\n    java.lang.OutOfMemoryError: Java heap space\r\n    !SESSION 2021-10-31 08:43:56.477 -----------------------------------------------\r\n    eclipse.buildId=4.5.1.202001211336-RELEASE\r\n    java.version=11.0.9\r\n    java.vendor=Oracle Corporation\r\n    BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=it_IT\r\n    Framework arguments:  -product org.springframework.boot.ide.branding.sts4\r\n    Command-line arguments:  -os win32 -ws win32 -arch x86_64 -product org.springframework.boot.ide.branding.sts4\r\n    \r\n    !ENTRY org.eclipse.jface 2 0 2021-10-31 08:44:07.942\r\n    !MESSAGE Keybinding conflicts occurred.  They may interfere with normal accelerator operation.\r\n    !SUBENTRY 1 org.eclipse.jface 2 0 2021-10-31 08:44:07.942\r\n    !MESSAGE A conflict occurred for CTRL+SHIFT+T:\r\n    Binding(CTRL+SHIFT+T,\r\n    \tParameterizedCommand(Command(org.eclipse.jdt.ui.navigate.open.type,Open Type,\r\n    \t\tOpen a type in a Java editor,\r\n    \t\tCategory(org.eclipse.ui.category.navigate,Navigate,null,true),\r\n    \t\torg.eclipse.ui.internal.WorkbenchHandlerServiceHandler@2689b752,\r\n    \t\t,,true),null),\r\n    \torg.eclipse.ui.defaultAcceleratorConfiguration,\r\n    \torg.eclipse.ui.contexts.window,,,system)\r\n    Binding(CTRL+SHIFT+T,\r\n    \tParameterizedCommand(Command(org.eclipse.lsp4e.symbolinworkspace,Go to Symbol in Workspace,\r\n    \t\t,\r\n    \t\tCategory(org.eclipse.lsp4e.category,Language Servers,null,true),\r\n    \t\torg.eclipse.ui.internal.WorkbenchHandlerServiceHandler@84eafc2,\r\n    \t\t,,true),null),\r\n    \torg.eclipse.ui.defaultAcceleratorConfiguration,\r\n    \torg.eclipse.ui.contexts.window,,,system)\r\n    \r\n    !ENTRY org.eclipse.egit.ui 2 0 2021-10-31 08:44:21.052\r\n    !MESSAGE Warning: The environment variable HOME is not set. The following directory will be used to store the Git\r\n    user global configuration and to define the default location to store repositories: &#39;C:\\Users\\franc&#39;. If this is\r\n    not correct please set the HOME environment variable and restart Eclipse. Otherwise Git for Windows and\r\n    EGit might behave differently since they see different configuration options.\r\n    This warning can be switched off on the Team &gt; Git &gt; Confirmations and Warnings preference page.\r\n    \r\n    !ENTRY org.eclipse.ui 2 2 2021-10-31 08:46:43.793\r\n    !MESSAGE Invalid property category path: org.springframework.ide.eclipse.beans.ui.properties.ProjectPropertyPage (bundle: org.springframework.ide.eclipse.xml.namespaces, propertyPage: org.springframework.ide.eclipse.beans.ui.namespaces.projectPropertyPage)\r\n    \r\n    !ENTRY org.eclipse.core.jobs 4 2 2021-10-31 08:46:54.518\r\n    !MESSAGE An internal error occurred during: &quot;Updating Maven Project&quot;.\r\n    !STACK 0\r\n    java.lang.OutOfMemoryError: Java heap space\r\n    \tat java.base/java.util.HashMap.readObject(HashMap.java:1452)\r\n    \t...\r\n    \t...\r\n    \t...\r\n\r\nHere&#39;s an example of one of the edited poms of the workspace:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;artifactId&gt;microservices-demo&lt;/artifactId&gt;\r\n    \t\t&lt;groupId&gt;com.microservices.demo&lt;/groupId&gt;\r\n    \t\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t\t&lt;relativePath&gt;../../pom.xml&lt;/relativePath&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;artifactId&gt;kafka-producer&lt;/artifactId&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.microservices.demo&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;app-config-data&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.microservices.demo&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;kafka-model&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;io.confluent&lt;/groupId&gt;\r\n                &lt;artifactId&gt;kafka-avro-serializer&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\nIt began when I was comparing and modifying java, pom, and properties files outside STS using Winmerge","title":"Eclipse STS - Out of memory","body":"<p>TRYING TO EDIT AS SUGGESTED:</p>\n<p>STS crashes continously, here is an exmple of the last logs in projects folder:</p>\n<pre><code>...\n...\n...\n!ENTRY org.eclipse.ui 4 0 2021-10-31 08:41:50.924\n!MESSAGE Unhandled event loop exception\n!STACK 0\norg.eclipse.swt.SWTException: Failed to execute runnable (java.lang.OutOfMemoryError: Requested array size exceeds VM limit)\n    ...\n    ...\n    ...\nCaused by: java.lang.OutOfMemoryError: Requested array size exceeds VM limit\n\n!ENTRY org.eclipse.ui 4 0 2021-10-31 08:41:58.932\n!MESSAGE Unhandled event loop exception\n!STACK 0\norg.eclipse.swt.SWTException: Failed to execute runnable (java.lang.OutOfMemoryError: Requested array size exceeds VM limit)\n    ...\n    ...\n    ...\nCaused by: java.lang.OutOfMemoryError: Requested array size exceeds VM limit\n\n!ENTRY org.eclipse.ui 4 0 2021-10-31 08:42:00.869\n!MESSAGE Unhandled event loop exception\n!STACK 0\norg.eclipse.swt.SWTException: Failed to execute runnable (java.lang.OutOfMemoryError: Requested array size exceeds VM limit)\n    at org.eclipse.swt.SWT.error(SWT.java:4720)\n    ...\n    ...\n    ...\nCaused by: java.lang.OutOfMemoryError: Requested array size exceeds VM limit\n\n!ENTRY org.eclipse.core.jobs 4 2 2021-10-31 08:42:47.266\n!MESSAGE An internal error occurred during: &quot;Updating Maven Project&quot;.\n!STACK 0\njava.lang.OutOfMemoryError: Java heap space\n!SESSION 2021-10-31 08:43:56.477 -----------------------------------------------\neclipse.buildId=4.5.1.202001211336-RELEASE\njava.version=11.0.9\njava.vendor=Oracle Corporation\nBootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=it_IT\nFramework arguments:  -product org.springframework.boot.ide.branding.sts4\nCommand-line arguments:  -os win32 -ws win32 -arch x86_64 -product org.springframework.boot.ide.branding.sts4\n\n!ENTRY org.eclipse.jface 2 0 2021-10-31 08:44:07.942\n!MESSAGE Keybinding conflicts occurred.  They may interfere with normal accelerator operation.\n!SUBENTRY 1 org.eclipse.jface 2 0 2021-10-31 08:44:07.942\n!MESSAGE A conflict occurred for CTRL+SHIFT+T:\nBinding(CTRL+SHIFT+T,\n    ParameterizedCommand(Command(org.eclipse.jdt.ui.navigate.open.type,Open Type,\n        Open a type in a Java editor,\n        Category(org.eclipse.ui.category.navigate,Navigate,null,true),\n        org.eclipse.ui.internal.WorkbenchHandlerServiceHandler@2689b752,\n        ,,true),null),\n    org.eclipse.ui.defaultAcceleratorConfiguration,\n    org.eclipse.ui.contexts.window,,,system)\nBinding(CTRL+SHIFT+T,\n    ParameterizedCommand(Command(org.eclipse.lsp4e.symbolinworkspace,Go to Symbol in Workspace,\n        ,\n        Category(org.eclipse.lsp4e.category,Language Servers,null,true),\n        org.eclipse.ui.internal.WorkbenchHandlerServiceHandler@84eafc2,\n        ,,true),null),\n    org.eclipse.ui.defaultAcceleratorConfiguration,\n    org.eclipse.ui.contexts.window,,,system)\n\n!ENTRY org.eclipse.egit.ui 2 0 2021-10-31 08:44:21.052\n!MESSAGE Warning: The environment variable HOME is not set. The following directory will be used to store the Git\nuser global configuration and to define the default location to store repositories: 'C:\\Users\\franc'. If this is\nnot correct please set the HOME environment variable and restart Eclipse. Otherwise Git for Windows and\nEGit might behave differently since they see different configuration options.\nThis warning can be switched off on the Team &gt; Git &gt; Confirmations and Warnings preference page.\n\n!ENTRY org.eclipse.ui 2 2 2021-10-31 08:46:43.793\n!MESSAGE Invalid property category path: org.springframework.ide.eclipse.beans.ui.properties.ProjectPropertyPage (bundle: org.springframework.ide.eclipse.xml.namespaces, propertyPage: org.springframework.ide.eclipse.beans.ui.namespaces.projectPropertyPage)\n\n!ENTRY org.eclipse.core.jobs 4 2 2021-10-31 08:46:54.518\n!MESSAGE An internal error occurred during: &quot;Updating Maven Project&quot;.\n!STACK 0\njava.lang.OutOfMemoryError: Java heap space\n    at java.base/java.util.HashMap.readObject(HashMap.java:1452)\n    ...\n    ...\n    ...\n</code></pre>\n<p>Here's an example of one of the edited poms of the workspace:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;parent&gt;\n        &lt;artifactId&gt;microservices-demo&lt;/artifactId&gt;\n        &lt;groupId&gt;com.microservices.demo&lt;/groupId&gt;\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n        &lt;relativePath&gt;../../pom.xml&lt;/relativePath&gt;\n    &lt;/parent&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;artifactId&gt;kafka-producer&lt;/artifactId&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.microservices.demo&lt;/groupId&gt;\n            &lt;artifactId&gt;app-config-data&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.microservices.demo&lt;/groupId&gt;\n            &lt;artifactId&gt;kafka-model&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.confluent&lt;/groupId&gt;\n            &lt;artifactId&gt;kafka-avro-serializer&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>It began when I was comparing and modifying java, pom, and properties files outside STS using Winmerge</p>\n"},{"tags":["java","memory-management","jvm","heap-memory","native"],"comments":[{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1568530135,"post_id":57941743,"comment_id":102298253,"body_markdown":"`Unsafe.park` does not contribute to the native memory footprint. Please, clarify what you mean, preferably with a code sample and with the output of diagnostic tools.","body":"<code>Unsafe.park</code> does not contribute to the native memory footprint. Please, clarify what you mean, preferably with a code sample and with the output of diagnostic tools."},{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1568530292,"post_id":57941743,"comment_id":102298275,"body_markdown":"Direct ByteBuffers register a [Cleaner](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/ref/Cleaner.html) object that releases the associated native memory when the ByteBuffer becomes unreachable.","body":"Direct ByteBuffers register a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/ref/Cleaner.html\" rel=\"nofollow noreferrer\">Cleaner</a> object that releases the associated native memory when the ByteBuffer becomes unreachable."},{"owner":{"account_id":732315,"reputation":4996,"user_id":681444,"display_name":"racraman"},"score":0,"creation_date":1568530733,"post_id":57941743,"comment_id":102298343,"body_markdown":"There&#39;s this : https://stackoverflow.com/questions/30458195/does-gc-release-back-memory-to-os  although that&#39;s a few years back (Java 8 timeframe), but IIRC later versions of Java have some improvements","body":"There&#39;s this : <a href=\"https://stackoverflow.com/questions/30458195/does-gc-release-back-memory-to-os\" title=\"does gc release back memory to os\">stackoverflow.com/questions/30458195/&hellip;</a>  although that&#39;s a few years back (Java 8 timeframe), but IIRC later versions of Java have some improvements"}],"answers":[{"tags":[],"owner":{"account_id":1443334,"reputation":41522,"user_id":1362755,"display_name":"the8472"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1568555879,"creation_date":1568555879,"answer_id":57944799,"question_id":57941743,"body_markdown":"Using thread-per-connction IO incurs the following memory costs:\r\n\r\n1. thread stack\r\n1. `ByteBuffer` or `byte[]` passed to the read/write/send/receive method\r\n1. potentially a bounce buffer (an openjdk implementation detail) since the syscalls expect a fixed buffer while the java data structures can be moved by the GC\r\n1. additional abstractions and application on top of the IO functions kept alive for the lifetime of the connection\r\n1. kernel socket memory\r\n\r\n----\r\n\r\n1. can be tweaked a little by adjusting the `-Xss` argument. A complete fix requires multiplexing multiple connections on fewer thread via nonblocking/asynchronous IO. `AsynchronousSocketChannel` makes this easy to use for TCP sockets, `HttpClient` for HTTP. For other protocols you&#39;ll need to look for libraries implementing async IO.\r\n1. is unavoidable, but depending on application design there may be room for optimization. e.g. if you were to send a 1GB file you don&#39;t need a 1GB buffer, you could read it chunk by chunk with smaller buffers\r\n1. can be avoided by passing `DirectByteBuffer` instances to IO methods. using async IO also reduces the total number of buffers that need to be used concurrently \r\n1. not specific to IO, thus general memory footprint optimization advice applies\r\n1. generally shouldn&#39;t be an issue since the kernel auto-sizes them. but of course keeping thousands of sockets open longer than necessary will still have an impact\r\n\r\n\r\nOverall the JVM should clean up the native resources needed for IO eventually, but when that happens may depend on how long you keep the java objects that depend on those native resources alive.","title":"How does Native memory related to Java gets cleared. I understand the GC doesnot clears it","body":"<p>Using thread-per-connction IO incurs the following memory costs:</p>\n\n<ol>\n<li>thread stack</li>\n<li><code>ByteBuffer</code> or <code>byte[]</code> passed to the read/write/send/receive method</li>\n<li>potentially a bounce buffer (an openjdk implementation detail) since the syscalls expect a fixed buffer while the java data structures can be moved by the GC</li>\n<li>additional abstractions and application on top of the IO functions kept alive for the lifetime of the connection</li>\n<li>kernel socket memory</li>\n</ol>\n\n<hr>\n\n<ol>\n<li>can be tweaked a little by adjusting the <code>-Xss</code> argument. A complete fix requires multiplexing multiple connections on fewer thread via nonblocking/asynchronous IO. <code>AsynchronousSocketChannel</code> makes this easy to use for TCP sockets, <code>HttpClient</code> for HTTP. For other protocols you'll need to look for libraries implementing async IO.</li>\n<li>is unavoidable, but depending on application design there may be room for optimization. e.g. if you were to send a 1GB file you don't need a 1GB buffer, you could read it chunk by chunk with smaller buffers</li>\n<li>can be avoided by passing <code>DirectByteBuffer</code> instances to IO methods. using async IO also reduces the total number of buffers that need to be used concurrently </li>\n<li>not specific to IO, thus general memory footprint optimization advice applies</li>\n<li>generally shouldn't be an issue since the kernel auto-sizes them. but of course keeping thousands of sockets open longer than necessary will still have an impact</li>\n</ol>\n\n<p>Overall the JVM should clean up the native resources needed for IO eventually, but when that happens may depend on how long you keep the java objects that depend on those native resources alive.</p>\n"}],"owner":{"account_id":6127430,"reputation":3,"user_id":4778867,"display_name":"ujjwal shukla"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":152,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":57944799,"answer_count":1,"score":0,"last_activity_date":1635771307,"creation_date":1568529596,"question_id":57941743,"body_markdown":"Seems like when there is IO operations waiting for external service lots of thread are waiting at sun.misc.Unsafe.park.\r\nThis contributed to native memory buildup that does not gets cleared.\r\nHow does this Native memory gets cleared. Does it gets cleared after some time automatically","title":"How does Native memory related to Java gets cleared. I understand the GC doesnot clears it","body":"<p>Seems like when there is IO operations waiting for external service lots of thread are waiting at sun.misc.Unsafe.park.\nThis contributed to native memory buildup that does not gets cleared.\nHow does this Native memory gets cleared. Does it gets cleared after some time automatically</p>\n"},{"tags":["java","hibernate","jpa","jvm","heap-memory"],"comments":[{"owner":{"account_id":28511,"reputation":7390,"user_id":76237,"display_name":"diginoise"},"score":2,"creation_date":1570456142,"post_id":58270870,"comment_id":102908826,"body_markdown":"why do you think these are issues? It stabilised nicely, each GC cleared the unused objects (saw-tooth pattern) once the application finished starting up and warming up, what is left in its life is very little creation and very little GC. Seems perfectly fine to me.","body":"why do you think these are issues? It stabilised nicely, each GC cleared the unused objects (saw-tooth pattern) once the application finished starting up and warming up, what is left in its life is very little creation and very little GC. Seems perfectly fine to me."},{"owner":{"account_id":16841597,"reputation":1,"user_id":12176863,"display_name":"mxsi"},"score":0,"creation_date":1570457975,"post_id":58270870,"comment_id":102909899,"body_markdown":"To be honest. I didn&#39;t know if it was a problem or not. I started investigating this &quot;issue&quot; on a short running app that&#39;s ran once a day, so it looked like this pattern was a problem. I didn&#39;t know how to word the question on google, so thought I&#39;d ask it myself.","body":"To be honest. I didn&#39;t know if it was a problem or not. I started investigating this &quot;issue&quot; on a short running app that&#39;s ran once a day, so it looked like this pattern was a problem. I didn&#39;t know how to word the question on google, so thought I&#39;d ask it myself."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1571831003,"post_id":58270870,"comment_id":103369266,"body_markdown":"As a side question, why do you box your values to `Double` objects, instead of straight-forwardly using `double` values?","body":"As a side question, why do you box your values to <code>Double</code> objects, instead of straight-forwardly using <code>double</code> values?"},{"owner":{"account_id":16841597,"reputation":1,"user_id":12176863,"display_name":"mxsi"},"score":0,"creation_date":1574869970,"post_id":58270870,"comment_id":104385513,"body_markdown":"@Holger Sorry for late reply. I prefer to use the double class because it has helpful methods when dealing with other operations. valueOf() being an example here.","body":"@Holger Sorry for late reply. I prefer to use the double class because it has helpful methods when dealing with other operations. valueOf() being an example here."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1574870894,"post_id":58270870,"comment_id":104386030,"body_markdown":"You only need the `valueOf` method *because* you can’t convert `long` to `Double` directly, so you’re solving a problem you wouldn’t have if you didn’t use it. If you used `double freeMemoryDouble = freeMemory, maximumAllocatedMemroryDouble = maximumAllocatedMemory, percentageFreeMemory = freeMemoryDouble / maximumAllocatedMemroryDouble * 100;` instead, it would do the same without needing a `valueOf` method and without boxing overhead. In fact, you wouldn’t even need these temporary variables, if you just declared `double freeMemory = maximumAllocatedMemory - allocatedMemory;`","body":"You only need the <code>valueOf</code> method <i>because</i> you can’t convert <code>long</code> to <code>Double</code> directly, so you’re solving a problem you wouldn’t have if you didn’t use it. If you used <code>double freeMemoryDouble = freeMemory, maximumAllocatedMemroryDouble = maximumAllocatedMemory, percentageFreeMemory = freeMemoryDouble &#47; maximumAllocatedMemroryDouble * 100;</code> instead, it would do the same without needing a <code>valueOf</code> method and without boxing overhead. In fact, you wouldn’t even need these temporary variables, if you just declared <code>double freeMemory = maximumAllocatedMemory - allocatedMemory;</code>"}],"owner":{"account_id":16841597,"reputation":1,"user_id":12176863,"display_name":"mxsi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1635771294,"creation_date":1570455914,"question_id":58270870,"body_markdown":"I am doing a bit of research into the project setup I use in work.\r\n\r\nI noticed quite a few apps seem to have memory leaks/heap issues. I noticed that when I start an application, it seems to jump from 1% heap used to 20% for the first 15 minutes, then it will start to level out and consistently use only about 1%.\r\n```java\r\npublic void testPersist() {\r\n\r\n\twhile (true) {\r\n\r\n\t\tList&lt;TestModel&gt; testModels = createTestModels();\r\n\t\ttestModelManager.save(testModels);\t\t\r\n\t\ttestModels = null;\r\n\t\t\r\n\t\tApplicationPerformanceSampler.sampleMemory();\r\n\t}\r\n}\r\n\r\n/**\r\n * @return\r\n */\r\nprivate List&lt;TestModel&gt; createTestModels() {\r\n\tList&lt;TestModel&gt; testModels = new ArrayList&lt;&gt;();\r\n\tfor (int i = 0; i &lt; 5000; i++) {\r\n\t\tTestModel testModel = new TestModel();\r\n\t\ttestModel.setTestString(&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789&quot;);\r\n\t\ttestModels.add(testModel);\r\n\t}\r\n\r\n\treturn testModels;\r\n}\r\n```\r\nThis is a sample app I made to just persist objects to a MySQL database using spring, hibernate and JPA.\r\n```java\r\n/** {@inheritDoc} */\r\n@Override\r\npublic void save(final T model) {\r\n\tLOG.debug(&quot;save model={}&quot;, model);\r\n\tem.persist(model);\r\n\r\n\tLOG.debug(&quot;model saved. id={}&quot;, model.getId());\r\n}\r\n```\r\nI wrote a small class to sample memory as I was persisting because of the initial thought that the memory footprint was getting bigger as it persisted.\r\n```java\r\n public static void sampleMemory() {\r\n\r\n\t\tRuntime runtime = Runtime.getRuntime();\r\n\r\n\t\tlong maximumAllocatedMemory = runtime.maxMemory();\r\n\t\tlong allocatedMemory = runtime.totalMemory() - runtime.freeMemory();\r\n\t\tlong freeMemory = maximumAllocatedMemory - allocatedMemory;\r\n\r\n\t\tDouble freeMemoryDouble = Double.valueOf(freeMemory);\r\n\t\tDouble maximumAllocatedMemroryDouble = Double.valueOf(maximumAllocatedMemory);\r\n\t\tDouble percentageFreeMemory = freeMemoryDouble / maximumAllocatedMemroryDouble * 100;\r\n\r\n\t\tApplicationPerformanceStatus appStatus = determineAppStatus(percentageFreeMemory);\r\n\r\n\t\tDouble usedHeap = 100 - percentageFreeMemory;\r\n\t\tLOG.info(&quot;usedHeap={}%, freeHeap={}%, appStatus={}&quot;, format(usedHeap), format(percentageFreeMemory),\r\n\t\t\t\tappStatus.getText());\r\n}\r\n```\r\nHowever when I attached visualVM I saw the following?&lt;br&gt;\r\n**heap over 30 minutes**\r\n![heap over 30 minutes][1]\r\n  [1]: https://i.stack.imgur.com/oQCfq.png\r\n\r\nBelow I have included an example of some of the log messages (Each logged after 5000 records are persisted. I have seen and put into the logs, where I know garbage collection has taken place.\r\n~~~\r\n2019-10-02 10:58:37.035 INFO  [main] (ApplicationPerformanceSampler.java:52) - usedHeap=9.14%, freeHeap=90.86%, appStatus=OK\r\n2019-10-02 10:58:38.933 INFO  [main] (ApplicationPerformanceSampler.java:52) - usedHeap=9.96%, freeHeap=90.04%, appStatus=OK\r\n2019-10-02 10:58:40.226 INFO  [main] (ApplicationPerformanceSampler.java:52) - usedHeap=10.92%, freeHeap=89.08%, appStatus=OK\r\n2019-10-02 10:58:41.616 INFO  [main] (ApplicationPerformanceSampler.java:52) - usedHeap=4.02%, freeHeap=95.98%, appStatus=OK\r\n(Garbage collection)\r\n2019-10-02 10:58:42.878 INFO  [main] (ApplicationPerformanceSampler.java:52) - usedHeap=5.06%, freeHeap=94.94%, appStatus=OK\r\n2019-10-02 10:58:44.215 INFO  [main] (ApplicationPerformanceSampler.java:52) - usedHeap=5.96%, freeHeap=94.04%, appStatus=OK\r\n2019-10-02 10:58:45.576 INFO  [main] (ApplicationPerformanceSampler.java:52) - usedHeap=7.0%, freeHeap=93.0%, appStatus=OK\r\n2019-10-02 10:58:47.001 INFO  [main] (ApplicationPerformanceSampler.java:52) - usedHeap=8.04%, freeHeap=91.96%, appStatus=OK\r\n2019-10-02 10:58:48.333 INFO  [main] (ApplicationPerformanceSampler.java:52) - usedHeap=9.09%, freeHeap=90.91%, appStatus=OK\r\n2019-10-02 10:58:49.651 INFO  [main] (ApplicationPerformanceSampler.java:52) - usedHeap=10.28%, freeHeap=89.72%, appStatus=OK\r\n(Garbage collection)\r\n~~~\r\nI&#39;m not quite sure where to go from here?","title":"JVM Heap issues","body":"<p>I am doing a bit of research into the project setup I use in work.</p>\n\n<p>I noticed quite a few apps seem to have memory leaks/heap issues. I noticed that when I start an application, it seems to jump from 1% heap used to 20% for the first 15 minutes, then it will start to level out and consistently use only about 1%.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public void testPersist() {\n\n    while (true) {\n\n        List&lt;TestModel&gt; testModels = createTestModels();\n        testModelManager.save(testModels);      \n        testModels = null;\n\n        ApplicationPerformanceSampler.sampleMemory();\n    }\n}\n\n/**\n * @return\n */\nprivate List&lt;TestModel&gt; createTestModels() {\n    List&lt;TestModel&gt; testModels = new ArrayList&lt;&gt;();\n    for (int i = 0; i &lt; 5000; i++) {\n        TestModel testModel = new TestModel();\n        testModel.setTestString(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\");\n        testModels.add(testModel);\n    }\n\n    return testModels;\n}\n</code></pre>\n\n<p>This is a sample app I made to just persist objects to a MySQL database using spring, hibernate and JPA.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>/** {@inheritDoc} */\n@Override\npublic void save(final T model) {\n    LOG.debug(\"save model={}\", model);\n    em.persist(model);\n\n    LOG.debug(\"model saved. id={}\", model.getId());\n}\n</code></pre>\n\n<p>I wrote a small class to sample memory as I was persisting because of the initial thought that the memory footprint was getting bigger as it persisted.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code> public static void sampleMemory() {\n\n        Runtime runtime = Runtime.getRuntime();\n\n        long maximumAllocatedMemory = runtime.maxMemory();\n        long allocatedMemory = runtime.totalMemory() - runtime.freeMemory();\n        long freeMemory = maximumAllocatedMemory - allocatedMemory;\n\n        Double freeMemoryDouble = Double.valueOf(freeMemory);\n        Double maximumAllocatedMemroryDouble = Double.valueOf(maximumAllocatedMemory);\n        Double percentageFreeMemory = freeMemoryDouble / maximumAllocatedMemroryDouble * 100;\n\n        ApplicationPerformanceStatus appStatus = determineAppStatus(percentageFreeMemory);\n\n        Double usedHeap = 100 - percentageFreeMemory;\n        LOG.info(\"usedHeap={}%, freeHeap={}%, appStatus={}\", format(usedHeap), format(percentageFreeMemory),\n                appStatus.getText());\n}\n</code></pre>\n\n<p>However when I attached visualVM I saw the following?<br>\n<strong>heap over 30 minutes</strong>\n<img src=\"https://i.stack.imgur.com/oQCfq.png\" alt=\"heap over 30 minutes\">\nBelow I have included an example of some of the log messages (Each logged after 5000 records are persisted. I have seen and put into the logs, where I know garbage collection has taken place.</p>\n\n<pre><code>2019-10-02 10:58:37.035 INFO  [main] (ApplicationPerformanceSampler.java:52) - usedHeap=9.14%, freeHeap=90.86%, appStatus=OK\n2019-10-02 10:58:38.933 INFO  [main] (ApplicationPerformanceSampler.java:52) - usedHeap=9.96%, freeHeap=90.04%, appStatus=OK\n2019-10-02 10:58:40.226 INFO  [main] (ApplicationPerformanceSampler.java:52) - usedHeap=10.92%, freeHeap=89.08%, appStatus=OK\n2019-10-02 10:58:41.616 INFO  [main] (ApplicationPerformanceSampler.java:52) - usedHeap=4.02%, freeHeap=95.98%, appStatus=OK\n(Garbage collection)\n2019-10-02 10:58:42.878 INFO  [main] (ApplicationPerformanceSampler.java:52) - usedHeap=5.06%, freeHeap=94.94%, appStatus=OK\n2019-10-02 10:58:44.215 INFO  [main] (ApplicationPerformanceSampler.java:52) - usedHeap=5.96%, freeHeap=94.04%, appStatus=OK\n2019-10-02 10:58:45.576 INFO  [main] (ApplicationPerformanceSampler.java:52) - usedHeap=7.0%, freeHeap=93.0%, appStatus=OK\n2019-10-02 10:58:47.001 INFO  [main] (ApplicationPerformanceSampler.java:52) - usedHeap=8.04%, freeHeap=91.96%, appStatus=OK\n2019-10-02 10:58:48.333 INFO  [main] (ApplicationPerformanceSampler.java:52) - usedHeap=9.09%, freeHeap=90.91%, appStatus=OK\n2019-10-02 10:58:49.651 INFO  [main] (ApplicationPerformanceSampler.java:52) - usedHeap=10.28%, freeHeap=89.72%, appStatus=OK\n(Garbage collection)\n</code></pre>\n\n<p>I'm not quite sure where to go from here?</p>\n"},{"tags":["java","jvm","heap-memory","openj9"],"answers":[{"tags":[],"owner":{"account_id":2070005,"reputation":1845,"user_id":1844706,"accept_rate":79,"display_name":"Andreas Hartmann"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1571293948,"creation_date":1571293948,"answer_id":58426248,"question_id":58425836,"body_markdown":"I found this build which allows noncompressedrefs and thus solves my issues: https://adoptopenjdk.net/releases.html?variant=openjdk8&amp;jvmVariant=openj9#linuxxl","title":"OpenJ9 tomcat won&#39;t start with high -Xmx heap option","body":"<p>I found this build which allows noncompressedrefs and thus solves my issues: <a href=\"https://adoptopenjdk.net/releases.html?variant=openjdk8&amp;jvmVariant=openj9#linuxxl\" rel=\"nofollow noreferrer\">https://adoptopenjdk.net/releases.html?variant=openjdk8&amp;jvmVariant=openj9#linuxxl</a></p>\n"},{"tags":[],"owner":{"account_id":10729245,"reputation":438,"user_id":7895850,"display_name":"Emerson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1571416750,"creation_date":1571349472,"answer_id":58441254,"question_id":58425836,"body_markdown":"The limit to use the compressed refs JVM is 57G and you can&#39;t run it if the `-Xnocompressedrefs` option is specified.\r\n \r\nThe 57G division is documented here: https://www.eclipse.org/openj9/docs/xcompressedrefs/\r\n\r\nThe `-Xnocompressedrefs` problem is mentioned in the release notes: https://github.com/eclipse/openj9/blob/master/doc/release-notes/0.15/0.15.md\r\n\r\nWith a reference to: https://github.com/eclipse/openj9/issues/479\r\n\r\nCreating a single JVM that supports both is covered by: https://github.com/eclipse/openj9/issues/643\r\n\r\nhttps://github.com/eclipse/openj9/pull/7505\r\n\r\n(With thanks to the help from the Eclipse OpenJ9 slack community, especially to Peter Shipton)","title":"OpenJ9 tomcat won&#39;t start with high -Xmx heap option","body":"<p>The limit to use the compressed refs JVM is 57G and you can't run it if the <code>-Xnocompressedrefs</code> option is specified.</p>\n\n<p>The 57G division is documented here: <a href=\"https://www.eclipse.org/openj9/docs/xcompressedrefs/\" rel=\"nofollow noreferrer\">https://www.eclipse.org/openj9/docs/xcompressedrefs/</a></p>\n\n<p>The <code>-Xnocompressedrefs</code> problem is mentioned in the release notes: <a href=\"https://github.com/eclipse/openj9/blob/master/doc/release-notes/0.15/0.15.md\" rel=\"nofollow noreferrer\">https://github.com/eclipse/openj9/blob/master/doc/release-notes/0.15/0.15.md</a></p>\n\n<p>With a reference to: <a href=\"https://github.com/eclipse/openj9/issues/479\" rel=\"nofollow noreferrer\">https://github.com/eclipse/openj9/issues/479</a></p>\n\n<p>Creating a single JVM that supports both is covered by: <a href=\"https://github.com/eclipse/openj9/issues/643\" rel=\"nofollow noreferrer\">https://github.com/eclipse/openj9/issues/643</a></p>\n\n<p><a href=\"https://github.com/eclipse/openj9/pull/7505\" rel=\"nofollow noreferrer\">https://github.com/eclipse/openj9/pull/7505</a></p>\n\n<p>(With thanks to the help from the Eclipse OpenJ9 slack community, especially to Peter Shipton)</p>\n"}],"owner":{"account_id":2070005,"reputation":1845,"user_id":1844706,"accept_rate":79,"display_name":"Andreas Hartmann"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1776,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":58426248,"answer_count":2,"score":3,"last_activity_date":1635771279,"creation_date":1571291951,"question_id":58425836,"body_markdown":"I have a Spring app running in a Tomcat 9.0.6 on Linux 64. Because it needs a lot of memory, I would like to try the OpenJ9 JVM which is supposedly more efficient in that regard (current heap limit with Hotspot: -Xmx128G).\r\nI installed the 64-bit adoptopenjdk-8-jdk-openj9:\r\n\r\n    /usr/lib/jvm/adoptopenjdk-8-jdk-openj9/bin/java -version\r\n    openjdk version &quot;1.8.0_212&quot;\r\n    OpenJDK Runtime Environment (build 1.8.0_212-b04)\r\n    Eclipse OpenJ9 VM (build openj9-0.14.2, JRE 1.8.0 Linux amd64-64-Bit Compressed References 20190521_315 (JIT enabled, AOT enable\r\n    OpenJ9   - 4b1df46fe\r\n    OMR      - b56045d2\r\n    JCL      - a8c217d402 based on jdk8u212-b04)\r\n\r\nStarting the tomcat causes the following error:\r\n\r\n    This JVM package only includes the &#39;-Xcompressedrefs&#39; configuration. Please run the VM without specifying the &#39;-Xnocompressedrefs&#39; option or by specifying the &#39;-Xcompressedrefs&#39; option.\r\n\r\nAfter I set this option I get the following error:\r\n\r\n    JVMJ9GC028E Option too large: &#39;-Xmx&#39;\r\n    JVMJ9VM015W Initialization error for library j9gc29(2): Failed to initialize\r\n    Error: Could not create the Java Virtual Machine.\r\n    Error: A fatal exception has occurred. Program will exit.\r\n\r\nDocumentation isn&#39;t that clear, but I found this:\r\nhttps://www.ibm.com/support/knowledgecenter/SSYKE2_8.0.0/com.ibm.java.vm.80.doc/docs/mm_gc_compressed_refs.html\r\n\r\n    Compressed references are used by default on a 64-bit IBM SDK when the value of -Xmx, which sets the maximum Java heap size, is in the correct range. Start of changes for service refresh 2 fix pack 10On AIX&#174;, Linux and Windows systems, the default range is 0 - 57 GB. For larger heap sizes, you can try to use compressed references by explicitly setting -Xcompressedrefs.End of changes for service refresh 2 fix pack 10 However, larger heap sizes might result in an out of memory condition at run time because the VM requires some memory at low addresses. You might be able to resolve an out of memory condition in low addresses by using the -Xmcrs option.\r\n\r\nSo basically, at least this build of the JDK only supports compressedrefs, and in order to use that, I must set it manually since my Xmx is above the range where it is enabled by default, but that fails because my OS already allocated to much of &lt;4GB memory ranges, but some is needed to use compressedrefs. Since I can never guarantee that that won&#39;t be the case, is there any way I can use OpenJ9 without compressedrefs? And will that even yield the benefits in terms of memory consumption? Or is there any way I can use compressedrefs with very high Xmx settings?\r\n\r\nI also tried setting this option, but it didn&#39;t help: https://www.ibm.com/support/knowledgecenter/SSYKE2_8.0.0/openj9/xmcrs/index.html?view=embed\r\n\r\nHow do I find the correct size for it? 1G and 64m failed. Even if I find the correct setting, how would this value guarantee that the OS hasn&#39;t already allocated all the lower memory addresses?","title":"OpenJ9 tomcat won&#39;t start with high -Xmx heap option","body":"<p>I have a Spring app running in a Tomcat 9.0.6 on Linux 64. Because it needs a lot of memory, I would like to try the OpenJ9 JVM which is supposedly more efficient in that regard (current heap limit with Hotspot: -Xmx128G).\nI installed the 64-bit adoptopenjdk-8-jdk-openj9:</p>\n\n<pre><code>/usr/lib/jvm/adoptopenjdk-8-jdk-openj9/bin/java -version\nopenjdk version \"1.8.0_212\"\nOpenJDK Runtime Environment (build 1.8.0_212-b04)\nEclipse OpenJ9 VM (build openj9-0.14.2, JRE 1.8.0 Linux amd64-64-Bit Compressed References 20190521_315 (JIT enabled, AOT enable\nOpenJ9   - 4b1df46fe\nOMR      - b56045d2\nJCL      - a8c217d402 based on jdk8u212-b04)\n</code></pre>\n\n<p>Starting the tomcat causes the following error:</p>\n\n<pre><code>This JVM package only includes the '-Xcompressedrefs' configuration. Please run the VM without specifying the '-Xnocompressedrefs' option or by specifying the '-Xcompressedrefs' option.\n</code></pre>\n\n<p>After I set this option I get the following error:</p>\n\n<pre><code>JVMJ9GC028E Option too large: '-Xmx'\nJVMJ9VM015W Initialization error for library j9gc29(2): Failed to initialize\nError: Could not create the Java Virtual Machine.\nError: A fatal exception has occurred. Program will exit.\n</code></pre>\n\n<p>Documentation isn't that clear, but I found this:\n<a href=\"https://www.ibm.com/support/knowledgecenter/SSYKE2_8.0.0/com.ibm.java.vm.80.doc/docs/mm_gc_compressed_refs.html\" rel=\"nofollow noreferrer\">https://www.ibm.com/support/knowledgecenter/SSYKE2_8.0.0/com.ibm.java.vm.80.doc/docs/mm_gc_compressed_refs.html</a></p>\n\n<pre><code>Compressed references are used by default on a 64-bit IBM SDK when the value of -Xmx, which sets the maximum Java heap size, is in the correct range. Start of changes for service refresh 2 fix pack 10On AIX®, Linux and Windows systems, the default range is 0 - 57 GB. For larger heap sizes, you can try to use compressed references by explicitly setting -Xcompressedrefs.End of changes for service refresh 2 fix pack 10 However, larger heap sizes might result in an out of memory condition at run time because the VM requires some memory at low addresses. You might be able to resolve an out of memory condition in low addresses by using the -Xmcrs option.\n</code></pre>\n\n<p>So basically, at least this build of the JDK only supports compressedrefs, and in order to use that, I must set it manually since my Xmx is above the range where it is enabled by default, but that fails because my OS already allocated to much of &lt;4GB memory ranges, but some is needed to use compressedrefs. Since I can never guarantee that that won't be the case, is there any way I can use OpenJ9 without compressedrefs? And will that even yield the benefits in terms of memory consumption? Or is there any way I can use compressedrefs with very high Xmx settings?</p>\n\n<p>I also tried setting this option, but it didn't help: <a href=\"https://www.ibm.com/support/knowledgecenter/SSYKE2_8.0.0/openj9/xmcrs/index.html?view=embed\" rel=\"nofollow noreferrer\">https://www.ibm.com/support/knowledgecenter/SSYKE2_8.0.0/openj9/xmcrs/index.html?view=embed</a></p>\n\n<p>How do I find the correct size for it? 1G and 64m failed. Even if I find the correct setting, how would this value guarantee that the OS hasn't already allocated all the lower memory addresses?</p>\n"},{"tags":["java","jvm","passwords","heap-memory"],"comments":[{"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1577833766,"post_id":59548500,"comment_id":105267144,"body_markdown":"In the case that you show, you still need the secret available--you may need to open more connections for capacity, if they time out, you have a server failover, etc.","body":"In the case that you show, you still need the secret available--you may need to open more connections for capacity, if they time out, you have a server failover, etc."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1578329940,"post_id":59548500,"comment_id":105395393,"body_markdown":"When you have a line like `ds.setPassword(&quot;51mp50n&quot;);`, you don’t need to worry about what the `HikariDataSource` object does, you already have a string instance representing the string literal permanently linked to this code location. It will persist as long as the code (resp. its class loader) exists, in case of the application class loader, the entire lifetime of the JVM. Even if you managed to wipe out that string instance somehow, the character data of this password is stored in the class file and hence, loaded into the process’ memory, independently of the heap memory.","body":"When you have a line like <code>ds.setPassword(&quot;51mp50n&quot;);</code>, you don’t need to worry about what the <code>HikariDataSource</code> object does, you already have a string instance representing the string literal permanently linked to this code location. It will persist as long as the code (resp. its class loader) exists, in case of the application class loader, the entire lifetime of the JVM. Even if you managed to wipe out that string instance somehow, the character data of this password is stored in the class file and hence, loaded into the process’ memory, independently of the heap memory."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1578345881,"post_id":59548500,"comment_id":105401724,"body_markdown":"@Holger - yes - indeed - a String literal password in the source code!  I have changed the Hikari example to be (hopefully) more relevant to my question.","body":"@Holger - yes - indeed - a String literal password in the source code!  I have changed the Hikari example to be (hopefully) more relevant to my question."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1578384845,"post_id":59548500,"comment_id":105411331,"body_markdown":"Well, someone who can read your heap memory surely can read the property file as well (or the buffer memory used when reading the file). It all boils down to the need to protect the machine your code is running on, rather than spending lots of efforts in trying to make finding the data marginally harder.","body":"Well, someone who can read your heap memory surely can read the property file as well (or the buffer memory used when reading the file). It all boils down to the need to protect the machine your code is running on, rather than spending lots of efforts in trying to make finding the data marginally harder."}],"answers":[{"tags":[],"owner":{"account_id":84677,"reputation":16500,"user_id":236528,"accept_rate":100,"display_name":"mjuarez"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1578523743,"creation_date":1578523743,"answer_id":59654884,"question_id":59548500,"body_markdown":"Like @Holger said in the comments, anything that can read your heap memory and/or a heap dump in the filesystem, already has control of the server, so attempting to hide a password is useless at that point.  Better to work on securing the actual server and services that live in it.\r\n\r\nThomas Porning gives a great answer in the link below, but this is the key paragraph (highlights mine):\r\n\r\n&gt; None of this applies to a server application, or to client code that\r\n&gt; handles secrets with an actual non-negligible value. **If a malicious\r\n&gt; attacker is in position to scan the RAM for sensitive data, and that\r\n&gt; data is worth 1 or 2 minutes of explicit attention from the human\r\n&gt; attacker, then no amount of overwriting will save you.**  Thus, in many\r\n&gt; contexts where security matters, overwriting of passwords and keys is\r\n&gt; just wasted effort, that gives a feeling of security, but does not\r\n&gt; actually improves things (though it may be convenient to awe\r\n&gt; auditors).\r\n\r\nhttps://security.stackexchange.com/a/75891/4667\r\n","title":"Eliminating Passwords from the JVM Heap","body":"<p>Like @Holger said in the comments, anything that can read your heap memory and/or a heap dump in the filesystem, already has control of the server, so attempting to hide a password is useless at that point.  Better to work on securing the actual server and services that live in it.</p>\n\n<p>Thomas Porning gives a great answer in the link below, but this is the key paragraph (highlights mine):</p>\n\n<blockquote>\n  <p>None of this applies to a server application, or to client code that\n  handles secrets with an actual non-negligible value. <strong>If a malicious\n  attacker is in position to scan the RAM for sensitive data, and that\n  data is worth 1 or 2 minutes of explicit attention from the human\n  attacker, then no amount of overwriting will save you.</strong>  Thus, in many\n  contexts where security matters, overwriting of passwords and keys is\n  just wasted effort, that gives a feeling of security, but does not\n  actually improves things (though it may be convenient to awe\n  auditors).</p>\n</blockquote>\n\n<p><a href=\"https://security.stackexchange.com/a/75891/4667\">https://security.stackexchange.com/a/75891/4667</a></p>\n"}],"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1436,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":59654884,"answer_count":1,"score":4,"last_activity_date":1635771259,"creation_date":1577827024,"question_id":59548500,"body_markdown":"There are various questions and answers about how to manage passwords in Java code - for example, [here](https://stackoverflow.com/questions/20342389) and [here](https://stackoverflow.com/questions/31280729).  \r\n\r\nDiscussions tend to focus on the merits of using `char[]` over `String`.\r\n\r\n*But are there any ways to avoid passwords being stored in the JVM&#39;s heap, if it&#39;s a 3rd party library that is storing the password in a String?*\r\n\r\nFor example, in the following three cases I think passwords will remain in the heap for the lifetime of the JVM:\r\n\r\nHikari Connection Pool 3.4\r\n--------------------------\r\n***EDIT*** - *example updated to be more relevant to my question:*\r\n```\r\n// some values read in from a properties file, or similar:\r\nString url = ...;\r\nString user = ...;\r\nString pw = ... ;\r\n...\r\nHikariDataSource ds = new HikariDataSource();\r\nds.setJdbcUrl(url);\r\nds.setUsername(user);\r\nds.setPassword(pw);\r\n...\r\n```\r\nIn the above example, my `com.zaxxer.hikari.HikariDataSource` object contains the password in a `String`. I can&#39;t see a way to null the data source without losing the connection pool.\r\n\r\nJetty 9.4 Database Adaptor\r\n--------------------------\r\n\r\nFor example, if I create a `JDBCSessionDataStoreFactory`, then the `org.eclipse.jetty.server.session.DatabaseAdaptor` holds on to the connection credentials, including the password in a `String`.\r\n\r\nJNDI Connection in Tomcat 9\r\n---------------------------\r\n\r\nIn this case the password can be found in `org.apache.tomcat.util.descriptor.web.ContextResource` and maybe also in `org.apache.tomcat.dbcp.dbcp2.BasicDataSource`, if I also choose to use that connection pool.\r\n\r\n\r\nIn other words, sensitive connection information can be found in various locations in my JVM&#39;s heap, regardless of how diligent I am about using char arrays in my code and overwriting/nulling sensitive data when it&#39;s no longer needed. I am not suggesting my efforts are wasted - **I still want to protect what I can** (for example a user&#39;s login credentials).  But other credentials such as the database connection seem to be out of my control.\r\n\r\nAre there any solutions or best practices for these cases?","title":"Eliminating Passwords from the JVM Heap","body":"<p>There are various questions and answers about how to manage passwords in Java code - for example, <a href=\"https://stackoverflow.com/questions/20342389\">here</a> and <a href=\"https://stackoverflow.com/questions/31280729\">here</a>.  </p>\n\n<p>Discussions tend to focus on the merits of using <code>char[]</code> over <code>String</code>.</p>\n\n<p><em>But are there any ways to avoid passwords being stored in the JVM's heap, if it's a 3rd party library that is storing the password in a String?</em></p>\n\n<p>For example, in the following three cases I think passwords will remain in the heap for the lifetime of the JVM:</p>\n\n<h2>Hikari Connection Pool 3.4</h2>\n\n<p><strong><em>EDIT</em></strong> - <em>example updated to be more relevant to my question:</em></p>\n\n<pre><code>// some values read in from a properties file, or similar:\nString url = ...;\nString user = ...;\nString pw = ... ;\n...\nHikariDataSource ds = new HikariDataSource();\nds.setJdbcUrl(url);\nds.setUsername(user);\nds.setPassword(pw);\n...\n</code></pre>\n\n<p>In the above example, my <code>com.zaxxer.hikari.HikariDataSource</code> object contains the password in a <code>String</code>. I can't see a way to null the data source without losing the connection pool.</p>\n\n<h2>Jetty 9.4 Database Adaptor</h2>\n\n<p>For example, if I create a <code>JDBCSessionDataStoreFactory</code>, then the <code>org.eclipse.jetty.server.session.DatabaseAdaptor</code> holds on to the connection credentials, including the password in a <code>String</code>.</p>\n\n<h2>JNDI Connection in Tomcat 9</h2>\n\n<p>In this case the password can be found in <code>org.apache.tomcat.util.descriptor.web.ContextResource</code> and maybe also in <code>org.apache.tomcat.dbcp.dbcp2.BasicDataSource</code>, if I also choose to use that connection pool.</p>\n\n<p>In other words, sensitive connection information can be found in various locations in my JVM's heap, regardless of how diligent I am about using char arrays in my code and overwriting/nulling sensitive data when it's no longer needed. I am not suggesting my efforts are wasted - <strong>I still want to protect what I can</strong> (for example a user's login credentials).  But other credentials such as the database connection seem to be out of my control.</p>\n\n<p>Are there any solutions or best practices for these cases?</p>\n"},{"tags":["java","jvm","heap-memory"],"comments":[{"owner":{"account_id":4062630,"reputation":1826,"user_id":3424746,"display_name":"PiRocks"},"score":2,"creation_date":1586215028,"post_id":61070393,"comment_id":108042116,"body_markdown":"Does this answer your question? [Java using much more memory than heap size (or size correctly Docker memory limit)](https://stackoverflow.com/questions/53451103/java-using-much-more-memory-than-heap-size-or-size-correctly-docker-memory-limi)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/53451103/java-using-much-more-memory-than-heap-size-or-size-correctly-docker-memory-limi\">Java using much more memory than heap size (or size correctly Docker memory limit)</a>"},{"owner":{"account_id":1217449,"reputation":4099,"user_id":1184752,"accept_rate":43,"display_name":"Juraj Martinka"},"score":1,"creation_date":1586250323,"post_id":61070393,"comment_id":108052570,"body_markdown":"The link shared by @PiRocks is excellent and must-read. You shouldn&#39;t indeed set -Xmx to 1G if the machine has only 1.3 GB available ram because then there&#39;s not enough space for the JVM itself and possibly other OS processes. Without knowing anything about your application and environment I wouldn&#39;t set -Xmx to more than ~800 MB. You could also filter sensitive parts of the error message and post it here.","body":"The link shared by @PiRocks is excellent and must-read. You shouldn&#39;t indeed set -Xmx to 1G if the machine has only 1.3 GB available ram because then there&#39;s not enough space for the JVM itself and possibly other OS processes. Without knowing anything about your application and environment I wouldn&#39;t set -Xmx to more than ~800 MB. You could also filter sensitive parts of the error message and post it here."},{"owner":{"account_id":6542390,"reputation":1,"user_id":5059403,"display_name":"Emanuel Avendano"},"score":0,"creation_date":1586272945,"post_id":61070393,"comment_id":108065037,"body_markdown":"Yes indeed! I appreciate your responses @JurajMartinka and @PiRocks! Regards!","body":"Yes indeed! I appreciate your responses @JurajMartinka and @PiRocks! Regards!"}],"owner":{"account_id":6542390,"reputation":1,"user_id":5059403,"display_name":"Emanuel Avendano"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1586274749,"answer_count":0,"score":0,"last_activity_date":1635771223,"creation_date":1586214863,"question_id":61070393,"body_markdown":"We&#39;re configuring a JVM to deploy a server application with Java 11. Turns out our VM has a limit of 1.3G of RAM and we assigned the JVM the following config:\r\n```\r\n-Xms512m\r\n-Xmx1024m\r\n```\r\nTurns out that when we start the VM it says that there is not enough memory for the application to start. (Due to security reasons I cannot place the error message here -_-).\r\n\r\nWe tried to run the app on a local machine and found out it is consuming more memory than intended with the help of [VisualVM][1].\r\n[Check the Max Value, is beyond 1GB][2]\r\n\r\nWe found that the JVM is capable of adding more memory than intended, our question is: Which memories affect this &quot;extra&quot; allocation of memory? We tried with Perm (deprecated) of course but we don&#39;t have an idea about which specific flags might affect the difference \r\n\r\n\r\n  [1]: https://visualvm.github.io/\r\n  [2]: https://i.stack.imgur.com/PQCLJ.png","title":"What is affecting the JVM memory allocation to go beyond -Xmx?","body":"<p>We're configuring a JVM to deploy a server application with Java 11. Turns out our VM has a limit of 1.3G of RAM and we assigned the JVM the following config:</p>\n\n<pre><code>-Xms512m\n-Xmx1024m\n</code></pre>\n\n<p>Turns out that when we start the VM it says that there is not enough memory for the application to start. (Due to security reasons I cannot place the error message here -_-).</p>\n\n<p>We tried to run the app on a local machine and found out it is consuming more memory than intended with the help of <a href=\"https://visualvm.github.io/\" rel=\"nofollow noreferrer\">VisualVM</a>.\n<a href=\"https://i.stack.imgur.com/PQCLJ.png\" rel=\"nofollow noreferrer\">Check the Max Value, is beyond 1GB</a></p>\n\n<p>We found that the JVM is capable of adding more memory than intended, our question is: Which memories affect this \"extra\" allocation of memory? We tried with Perm (deprecated) of course but we don't have an idea about which specific flags might affect the difference </p>\n"},{"tags":["java","linux","jvm","heap-memory"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1587095485,"post_id":61263654,"comment_id":108379498,"body_markdown":"What do you think the other 25.25g in VIRT is?","body":"What do you think the other 25.25g in VIRT is?"},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":1,"creation_date":1587101198,"post_id":61263654,"comment_id":108380823,"body_markdown":"Try to start with `-XX:+AlwaysPreTouch`.","body":"Try to start with <code>-XX:+AlwaysPreTouch</code>."}],"owner":{"account_id":18313715,"reputation":11,"user_id":13335957,"display_name":"jiankunking"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":311,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1587101257,"answer_count":0,"score":0,"last_activity_date":1635771211,"creation_date":1587093962,"question_id":61263654,"body_markdown":"The startup command for the application is as follows:\r\n```\r\njava -server -Xms15g -Xmx15g -XX:+UseConcMarkSweepGC -XX:+CMSParallelRemarkEnabled -XX:+UseCMSInitiatingOccupancyOnly -XX:CMSInitiatingOccupancyFraction=77 -XX:+ScavengeBeforeFullGC -XX:+CMSScavengeBeforeRemark -Djava.security.egd=file:/dev/./urandom -jar /app.jar --spring.profiles.active=prod\r\n```\r\nThe following information can be obtained from the JVM command of arthas:\r\n\r\n```\r\n RUNTIME\r\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n MACHINE-NAME                                   7@authserver-5fc5c7c775-9fs2m\r\n JVM-START-TIME                                 2020-04-15 00:04:27\r\n MANAGEMENT-SPEC-VERSION                        1.2\r\n SPEC-NAME                                      Java Virtual Machine Specification\r\n SPEC-VENDOR                                    Oracle Corporation\r\n SPEC-VERSION                                   1.8\r\n VM-NAME                                        Java HotSpot(TM) 64-Bit Server VM\r\n VM-VENDOR                                      Oracle Corporation\r\n VM-VERSION                                     25.111-b14\r\n INPUT-ARGUMENTS                                -javaagent:/var/agent/pinpoint-agent/pinpoint-bootstrap.jar\r\n                                                -Xms15g\r\n                                                -Xmx15g\r\n                                                -XX:+UseConcMarkSweepGC\r\n                                                -XX:+CMSParallelRemarkEnabled\r\n                                                -XX:+UseCMSInitiatingOccupancyOnly\r\n                                                -XX:CMSInitiatingOccupancyFraction=77\r\n                                                -XX:+ScavengeBeforeFullGC\r\n                                                -XX:+CMSScavengeBeforeRemark\r\n                                                -Djava.security.egd=file:/dev/./urandom\r\n\r\n CLASS-PATH                                     /app.jar:/var/agent/pinpoint-agent/pinpoint-bootstrap.jar\r\n BOOT-CLASS-PATH                                /usr/java/jre1.8.0_111/lib/resources.jar:/usr/java/jre1.8.0_111/lib/rt.jar:/usr/java/jre1.8.0_111/lib/sunrsasign.jar\r\n                                                :/usr/java/jre1.8.0_111/lib/jsse.jar:/usr/java/jre1.8.0_111/lib/jce.jar:/usr/java/jre1.8.0_111/lib/charsets.jar:/usr\r\n                                                /java/jre1.8.0_111/lib/jfr.jar:/usr/java/jre1.8.0_111/classes\r\n LIBRARY-PATH                                   /usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib\r\n\r\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n CLASS-LOADING\r\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n LOADED-CLASS-COUNT                             21926\r\n TOTAL-LOADED-CLASS-COUNT                       21944\r\n UNLOADED-CLASS-COUNT                           18\r\n IS-VERBOSE                                     false\r\n\r\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n COMPILATION\r\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n NAME                                           HotSpot 64-Bit Tiered Compilers\r\n TOTAL-COMPILE-TIME                             366850(ms)\r\n\r\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n GARBAGE-COLLECTORS\r\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n ParNew                                         1797/78247(ms)\r\n [count/time]\r\n ConcurrentMarkSweep                            3/460(ms)\r\n [count/time]\r\n\r\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n MEMORY-MANAGERS\r\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n CodeCacheManager                               Code Cache\r\n\r\n Metaspace Manager                              Metaspace\r\n                                                Compressed Class Space\r\n\r\n ParNew                                         Par Eden Space\r\n                                                Par Survivor Space\r\n\r\n ConcurrentMarkSweep                            Par Eden Space\r\n                                                Par Survivor Space\r\n                                                CMS Old Gen\r\n\r\n\r\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n MEMORY\r\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n HEAP-MEMORY-USAGE                              15992750080(14.9 GiB)/16106127360(15.0 GiB)/15992750080(14.9 GiB)/2393542120(2.2 GiB)\r\n [committed/init/max/used]\r\n NO-HEAP-MEMORY-USAGE                           255647744(243.8 MiB)/2555904(2.4 MiB)/-1(-1 B)/247922192(236.4 MiB)\r\n [committed/init/max/used]\r\n PENDING-FINALIZE-COUNT                         0\r\n\r\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n OPERATING-SYSTEM\r\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n OS                                             Linux\r\n ARCH                                           amd64\r\n PROCESSORS-COUNT                               16\r\n LOAD-AVERAGE                                   5.08\r\n VERSION                                        4.4.0-141-generic\r\n\r\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n THREAD\r\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n COUNT                                          256\r\n DAEMON-COUNT                                   103\r\n PEAK-COUNT                                     263\r\n STARTED-COUNT                                  41467\r\n DEADLOCK-COUNT                                 0\r\n\r\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n FILE-DESCRIPTOR\r\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n MAX-FILE-DESCRIPTOR-COUNT                      1048576\r\n OPEN-FILE-DESCRIPTOR-COUNT                     811\r\nAffect(row-cnt:0) cost in 6 ms.\r\n```\r\nFrom the above information, you can see that both committed/init of the JVM heap are about 15GiB.\r\n\r\nHowever, from the system top command or the free command, the memory footprint of this process is only 3.712g\r\n\r\n**the result of the top command is shown**  \r\n[![image][1]][1]\r\n\r\n\r\n**the result of the free command is shown**  \r\n[![image][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Yk38s.png\r\n  [2]: https://i.stack.imgur.com/3BMbf.png","title":"Why is the JVM memory footprint smaller than -Xms?","body":"<p>The startup command for the application is as follows:</p>\n\n<pre><code>java -server -Xms15g -Xmx15g -XX:+UseConcMarkSweepGC -XX:+CMSParallelRemarkEnabled -XX:+UseCMSInitiatingOccupancyOnly -XX:CMSInitiatingOccupancyFraction=77 -XX:+ScavengeBeforeFullGC -XX:+CMSScavengeBeforeRemark -Djava.security.egd=file:/dev/./urandom -jar /app.jar --spring.profiles.active=prod\n</code></pre>\n\n<p>The following information can be obtained from the JVM command of arthas:</p>\n\n<pre><code> RUNTIME\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\n MACHINE-NAME                                   7@authserver-5fc5c7c775-9fs2m\n JVM-START-TIME                                 2020-04-15 00:04:27\n MANAGEMENT-SPEC-VERSION                        1.2\n SPEC-NAME                                      Java Virtual Machine Specification\n SPEC-VENDOR                                    Oracle Corporation\n SPEC-VERSION                                   1.8\n VM-NAME                                        Java HotSpot(TM) 64-Bit Server VM\n VM-VENDOR                                      Oracle Corporation\n VM-VERSION                                     25.111-b14\n INPUT-ARGUMENTS                                -javaagent:/var/agent/pinpoint-agent/pinpoint-bootstrap.jar\n                                                -Xms15g\n                                                -Xmx15g\n                                                -XX:+UseConcMarkSweepGC\n                                                -XX:+CMSParallelRemarkEnabled\n                                                -XX:+UseCMSInitiatingOccupancyOnly\n                                                -XX:CMSInitiatingOccupancyFraction=77\n                                                -XX:+ScavengeBeforeFullGC\n                                                -XX:+CMSScavengeBeforeRemark\n                                                -Djava.security.egd=file:/dev/./urandom\n\n CLASS-PATH                                     /app.jar:/var/agent/pinpoint-agent/pinpoint-bootstrap.jar\n BOOT-CLASS-PATH                                /usr/java/jre1.8.0_111/lib/resources.jar:/usr/java/jre1.8.0_111/lib/rt.jar:/usr/java/jre1.8.0_111/lib/sunrsasign.jar\n                                                :/usr/java/jre1.8.0_111/lib/jsse.jar:/usr/java/jre1.8.0_111/lib/jce.jar:/usr/java/jre1.8.0_111/lib/charsets.jar:/usr\n                                                /java/jre1.8.0_111/lib/jfr.jar:/usr/java/jre1.8.0_111/classes\n LIBRARY-PATH                                   /usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib\n\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\n CLASS-LOADING\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\n LOADED-CLASS-COUNT                             21926\n TOTAL-LOADED-CLASS-COUNT                       21944\n UNLOADED-CLASS-COUNT                           18\n IS-VERBOSE                                     false\n\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\n COMPILATION\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\n NAME                                           HotSpot 64-Bit Tiered Compilers\n TOTAL-COMPILE-TIME                             366850(ms)\n\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\n GARBAGE-COLLECTORS\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\n ParNew                                         1797/78247(ms)\n [count/time]\n ConcurrentMarkSweep                            3/460(ms)\n [count/time]\n\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\n MEMORY-MANAGERS\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\n CodeCacheManager                               Code Cache\n\n Metaspace Manager                              Metaspace\n                                                Compressed Class Space\n\n ParNew                                         Par Eden Space\n                                                Par Survivor Space\n\n ConcurrentMarkSweep                            Par Eden Space\n                                                Par Survivor Space\n                                                CMS Old Gen\n\n\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\n MEMORY\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\n HEAP-MEMORY-USAGE                              15992750080(14.9 GiB)/16106127360(15.0 GiB)/15992750080(14.9 GiB)/2393542120(2.2 GiB)\n [committed/init/max/used]\n NO-HEAP-MEMORY-USAGE                           255647744(243.8 MiB)/2555904(2.4 MiB)/-1(-1 B)/247922192(236.4 MiB)\n [committed/init/max/used]\n PENDING-FINALIZE-COUNT                         0\n\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\n OPERATING-SYSTEM\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\n OS                                             Linux\n ARCH                                           amd64\n PROCESSORS-COUNT                               16\n LOAD-AVERAGE                                   5.08\n VERSION                                        4.4.0-141-generic\n\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\n THREAD\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\n COUNT                                          256\n DAEMON-COUNT                                   103\n PEAK-COUNT                                     263\n STARTED-COUNT                                  41467\n DEADLOCK-COUNT                                 0\n\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\n FILE-DESCRIPTOR\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------\n MAX-FILE-DESCRIPTOR-COUNT                      1048576\n OPEN-FILE-DESCRIPTOR-COUNT                     811\nAffect(row-cnt:0) cost in 6 ms.\n</code></pre>\n\n<p>From the above information, you can see that both committed/init of the JVM heap are about 15GiB.</p>\n\n<p>However, from the system top command or the free command, the memory footprint of this process is only 3.712g</p>\n\n<p><strong>the result of the top command is shown</strong><br>\n<a href=\"https://i.stack.imgur.com/Yk38s.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Yk38s.png\" alt=\"image\"></a></p>\n\n<p><strong>the result of the free command is shown</strong><br>\n<a href=\"https://i.stack.imgur.com/3BMbf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3BMbf.png\" alt=\"image\"></a></p>\n"},{"tags":["java","android","firebase-realtime-database","timestamp"],"answers":[{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635771192,"creation_date":1635771192,"answer_id":69797216,"question_id":69797142,"body_markdown":"Your `timeStamp` property is a number and **not** a string.\r\n\r\n    &quot;timeStamp&quot; : 1635677993574\r\n\r\nSo to solve this, please change the following query:\r\n\r\n    Query queryByTimestamp = db.child(&quot;Posts&quot;).orderByChild(&quot;timeStamp&quot;).equalTo(&quot;1635677993574&quot;);\r\n\r\nTo:\r\n\r\n\r\n    Query queryByTimestamp = db.child(&quot;Posts&quot;).orderByChild(&quot;timeStamp&quot;).equalTo(1635677993574);\r\n\r\nTo actually search for a number and not for a string. See, there are no double quotes?","title":"Realtime database orderbyByChild(timeStamp) not working (android-java)","body":"<p>Your <code>timeStamp</code> property is a number and <strong>not</strong> a string.</p>\n<pre><code>&quot;timeStamp&quot; : 1635677993574\n</code></pre>\n<p>So to solve this, please change the following query:</p>\n<pre><code>Query queryByTimestamp = db.child(&quot;Posts&quot;).orderByChild(&quot;timeStamp&quot;).equalTo(&quot;1635677993574&quot;);\n</code></pre>\n<p>To:</p>\n<pre><code>Query queryByTimestamp = db.child(&quot;Posts&quot;).orderByChild(&quot;timeStamp&quot;).equalTo(1635677993574);\n</code></pre>\n<p>To actually search for a number and not for a string. See, there are no double quotes?</p>\n"}],"owner":{"account_id":17525669,"reputation":69,"user_id":12741593,"display_name":"Eye Lamp"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69797216,"answer_count":1,"score":1,"last_activity_date":1635771192,"creation_date":1635770873,"question_id":69797142,"body_markdown":"Here is my data structure\r\n\r\n      &quot;Posts&quot; : {\r\n    &quot;-MnL-M_t4hHrcaqWecDM&quot; : {\r\n      &quot;description&quot; : &quot;&quot;,\r\n      &quot;picture&quot; : &quot;&quot;,\r\n      &quot;postKey&quot; : &quot;-MnL-M_t4hHrcaqWecDM&quot;,\r\n      &quot;timeStamp&quot; : 1635677993574,\r\n      &quot;title&quot; : &quot;&quot;,\r\n      &quot;userId&quot; : &quot;&quot;,\r\n      &quot;userPhoto&quot; : &quot;&quot;\r\n    },\r\n    &quot;-MnL-xtVgZAC2TIY6Whn&quot; : {\r\n      &quot;description&quot; : &quot;&quot;,\r\n      &quot;picture&quot; : &quot;&quot;,\r\n      &quot;postKey&quot; : &quot;&quot;,\r\n      &quot;timeStamp&quot; : 1635678150450,\r\n      &quot;title&quot; : &quot;&quot;,\r\n      &quot;userId&quot; : &quot;&quot;,\r\n      &quot;userPhoto&quot; : &quot;&quot;\r\n    },\r\n\r\nI want to delete Posts that have old timestamp.\r\nI use equalTo method not endAt for practice.\r\nSo I use this code\r\n\r\n    private void beginDelete() {\r\n        DatabaseReference db = FirebaseDatabase.getInstance().getReference();\r\n        Query queryByTimestamp = db.child(&quot;Posts&quot;).orderByChild(&quot;timeStamp&quot;).equalTo(&quot;1635677993574&quot;);\r\n        queryByTimestamp.get().addOnCompleteListener(new OnCompleteListener&lt;DataSnapshot&gt;() {\r\n            @Override\r\n            public void onComplete(@NonNull Task&lt;DataSnapshot&gt; task) {\r\n                if(task.isSuccessful()){\r\n                    for (DataSnapshot ds : task.getResult().getChildren()){\r\n                        ds.getRef().removeValue();\r\n                        Toast.makeText(PostDetailActivity.this,&quot;게시글이 삭제되었습니다.&quot;,Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }\r\n                else{\r\n                    Log.d(&quot;TAG&quot;,task.getException().getMessage());\r\n                    Toast.makeText(PostDetailActivity.this,&quot;게시글이 삭제안되었습니다.&quot;,Toast.LENGTH_SHORT).show();\r\n\r\n                }\r\n            }\r\n        });\r\n\r\nso I use query to designate &quot;timeStamp&quot; in Posts -&gt; &quot;-MnL-M_t4hHrcaqWecDM&quot; -&gt; &quot;timeStamp&quot;\r\nlike that. But I think the &quot;-MnL-M_t4hHrcaqWecDM&quot; can make problem. Can query find &quot;timeStamp&quot; through &quot;-MnL-M_t4hHrcaqWecDM&quot; child? Because I can delete Posts by using postKey..\r\nLike here.\r\n\r\n            StorageReference picRef = FirebaseStorage.getInstance().getReferenceFromUrl(postImage);\r\n        picRef.delete()\r\n                .addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\r\n                    @Override\r\n                    public void onSuccess(Void aVoid) {\r\n                        //image deleted, now delete database\r\n                        Query fquery =FirebaseDatabase.getInstance().getReference(&quot;Posts&quot;).orderByChild(&quot;postKey&quot;).equalTo(&quot;-MDFJ23...&quot;);\r\n                        fquery.addListenerForSingleValueEvent(new ValueEventListener() {\r\n                            @Override\r\n                            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                                for (DataSnapshot ds:dataSnapshot.getChildren()){\r\n                                    ds.getRef().removeValue(); // remove values from firebase where postkey matches\r\n                                }\r\n                                //Deleted\r\n                                Toast.makeText(PostDetailActivity.this,&quot;게시글이 삭제되었습니다.&quot;,Toast.LENGTH_SHORT).show();\r\n                            }\r\n\r\n                            @Override\r\n                            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                })\r\n                .addOnFailureListener(new OnFailureListener() {\r\n                    @Override\r\n                    public void onFailure(@NonNull Exception e) {\r\n                        //failed, can&#39;t go further\r\n                        Toast.makeText(PostDetailActivity.this,&quot;&quot;+e.getMessage(),Toast.LENGTH_SHORT).show();\r\n                    }\r\n                });\r\n\r\nHere is a full code.\r\n\r\n\r\n\r\n    ImageView imgPost,imgUserPost,imgCurrentUser;\r\n    TextView txtPostDesc,txtPostDateName,txtPostTitle;\r\n    EditText editTextComment;\r\n    Button btnAddComment;\r\n    String PostKey;\r\n    FirebaseAuth firebaseAuth;\r\n    FirebaseUser firebaseUser;\r\n    FirebaseDatabase firebaseDatabase;\r\n    RecyclerView RvComment;\r\n    CommentAdapter commentAdapter;\r\n    List&lt;Comment&gt; listComment;\r\n    static String COMMENT_KEY = &quot;Comment&quot;;\r\n    InputMethodManager imm;\r\n    EditText et;\r\n    Button btnDeletePost;\r\n    String myUid;\r\n    String UId;\r\n    String postImage;\r\n    private DatabaseReference mDatabase;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_post_detail);\r\n        imm = (InputMethodManager)getSystemService(INPUT_METHOD_SERVICE);\r\n        et = (EditText)findViewById(R.id.post_detail_comment);\r\n\r\n\r\n\r\n        // let&#39;s set the statue bar to transparent\r\n\r\n\r\n        // ini Views\r\n        RvComment = findViewById(R.id.rv_comment);\r\n        imgPost =findViewById(R.id.post_detail_img);\r\n        imgUserPost = findViewById(R.id.post_detail_user_img);\r\n        imgCurrentUser = findViewById(R.id.post_detail_currentuser_img);\r\n\r\n        txtPostTitle = findViewById(R.id.post_detail_title);\r\n        txtPostDesc = findViewById(R.id.post_detail_desc);\r\n        txtPostDateName = findViewById(R.id.post_detail_date_name);\r\n\r\n        editTextComment = findViewById(R.id.post_detail_comment);\r\n        btnAddComment = findViewById(R.id.post_detail_add_comment_btn);\r\n        btnDeletePost = findViewById(R.id.button_delete);\r\n\r\n\r\n        firebaseAuth = FirebaseAuth.getInstance();\r\n        firebaseUser = firebaseAuth.getCurrentUser();\r\n        firebaseDatabase = FirebaseDatabase.getInstance();\r\n        // add post delete button\r\n        mDatabase= FirebaseDatabase.getInstance().getReference();\r\n\r\n        myUid = FirebaseAuth.getInstance().getCurrentUser().getUid();\r\n\r\n        btnDeletePost.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                //여기 수정 주의 UId.equals(myUid)\r\n                if (true){\r\n                    Toast.makeText(PostDetailActivity.this,&quot;삭제중...&quot;,Toast.LENGTH_SHORT).show();\r\n                    beginDelete();\r\n                    //onBackPressed();\r\n                }\r\n                else{\r\n                    Toast.makeText(PostDetailActivity.this,&quot;다른 사용자의 게시글입니다.&quot;,Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n        });\r\n\r\n        // add Comment button click listner\r\n\r\n        btnAddComment.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n\r\n                btnAddComment.setVisibility(View.INVISIBLE);\r\n                DatabaseReference commentReference = firebaseDatabase.getReference(COMMENT_KEY).child(PostKey).push();\r\n                String comment_content = editTextComment.getText().toString();\r\n                String uid = firebaseUser.getUid();\r\n                String uname = firebaseUser.getDisplayName();\r\n                if (firebaseUser.getPhotoUrl()!=null){\r\n                    String uimg = firebaseUser.getPhotoUrl().toString();\r\n                    Comment comment = new Comment(comment_content,uid,uimg,uname);\r\n                    commentReference.setValue(comment).addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            showMessage(&quot;comment added&quot;);\r\n                            editTextComment.setText(&quot;&quot;);\r\n                            btnAddComment.setVisibility(View.VISIBLE);\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n                            showMessage(&quot;fail to add comment : &quot;+e.getMessage());\r\n                        }\r\n                    });\r\n\r\n                }\r\n                else{\r\n                    String usphoto =Integer.toString(R.drawable.userphoto);\r\n                    Comment comment = new Comment(comment_content,uid,usphoto,uname);\r\n                    commentReference.setValue(comment).addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            showMessage(&quot;comment added&quot;);\r\n                            editTextComment.setText(&quot;&quot;);\r\n                            btnAddComment.setVisibility(View.VISIBLE);\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n                            showMessage(&quot;fail to add comment : &quot;+e.getMessage());\r\n                        }\r\n                    });\r\n                }\r\n\r\n\r\n\r\n\r\n            }\r\n        });\r\n\r\n\r\n        // now we need to bind all data into those views\r\n        // firt we need to get post data\r\n        // we need to send post detail data to this activity first ...\r\n        // now we can get post data\r\n\r\n\r\n\r\n        // 게시글 사진 백지 케이스\r\n        postImage = getIntent().getExtras().getString(&quot;postImage&quot;) ;\r\n        if(postImage!=null){\r\n            Glide.with(this).load(postImage).into(imgPost);\r\n        }\r\n        else{\r\n            Glide.with(this).load(R.drawable.whitepaper).into(imgPost);\r\n        }\r\n\r\n\r\n        String postTitle = getIntent().getExtras().getString(&quot;title&quot;);\r\n        txtPostTitle.setText(postTitle);\r\n\r\n        String userpostImage = getIntent().getExtras().getString(&quot;userPhoto&quot;);\r\n        if (userpostImage!=null){\r\n            Glide.with(this).load(userpostImage).into(imgUserPost);\r\n        }\r\n        else {\r\n            Glide.with(this).load(R.drawable.userphoto).into(imgUserPost);\r\n        }\r\n\r\n        String postDescription = getIntent().getExtras().getString(&quot;description&quot;);\r\n        txtPostDesc.setText(postDescription);\r\n\r\n        // set comment user image\r\n        if (firebaseUser.getPhotoUrl()!=null){\r\n            Glide.with(this).load(firebaseUser.getPhotoUrl()).into(imgCurrentUser);\r\n        }\r\n        else{\r\n            Glide.with(this).load(R.drawable.userphoto).into(imgCurrentUser);\r\n        }\r\n        // get post key\r\n        PostKey = getIntent().getExtras().getString(&quot;postKey&quot;);\r\n\r\n        String date = timestampToString(getIntent().getExtras().getLong(&quot;postDate&quot;));\r\n        txtPostDateName.setText(date);\r\n        // get post uid\r\n        UId = getIntent().getExtras().getString(&quot;userId&quot;);\r\n\r\n\r\n\r\n        // ini Recyclerview Comment\r\n        iniRvComment();\r\n\r\n\r\n    }\r\n\r\n    private void beginDelete() {\r\n        DatabaseReference db = FirebaseDatabase.getInstance().getReference();\r\n        Query queryByTimestamp = db.child(&quot;Posts&quot;).orderByChild(&quot;timeStamp&quot;).equalTo(&quot;1635677993574&quot;);\r\n        queryByTimestamp.get().addOnCompleteListener(new OnCompleteListener&lt;DataSnapshot&gt;() {\r\n            @Override\r\n            public void onComplete(@NonNull Task&lt;DataSnapshot&gt; task) {\r\n                if(task.isSuccessful()){\r\n                    for (DataSnapshot ds : task.getResult().getChildren()){\r\n                        ds.getRef().removeValue();\r\n                        Toast.makeText(PostDetailActivity.this,&quot;게시글이 삭제되었습니다.&quot;,Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }\r\n                else{\r\n                    Log.d(&quot;TAG&quot;,task.getException().getMessage());\r\n                    Toast.makeText(PostDetailActivity.this,&quot;게시글이 삭제안되었습니다.&quot;,Toast.LENGTH_SHORT).show();\r\n\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    public void linearOnClick(View v) {\r\n        imm.hideSoftInputFromWindow(et.getWindowToken(), 0);\r\n    }\r\n\r\n\r\n    private void iniRvComment() {\r\n\r\n        RvComment.setLayoutManager(new LinearLayoutManager(this));\r\n\r\n        DatabaseReference commentRef = firebaseDatabase.getReference(COMMENT_KEY).child(PostKey);\r\n        commentRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                listComment = new ArrayList&lt;&gt;();\r\n                for (DataSnapshot snap:dataSnapshot.getChildren()) {\r\n\r\n                    Comment comment = snap.getValue(Comment.class);\r\n                    listComment.add(comment) ;\r\n\r\n                }\r\n\r\n                commentAdapter = new CommentAdapter(getApplicationContext(),listComment);\r\n                RvComment.setAdapter(commentAdapter);\r\n\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n            }\r\n        });\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n    private void showMessage(String message) {\r\n\r\n        Toast.makeText(this,message,Toast.LENGTH_LONG).show();\r\n\r\n    }\r\n\r\n\r\n    private String timestampToString(long time) {\r\n\r\n        Calendar calendar = Calendar.getInstance(Locale.ENGLISH);\r\n        calendar.setTimeInMillis(time);\r\n        String date = DateFormat.format(&quot;yyyy-MM-dd&quot;,calendar).toString();\r\n        return date;\r\n\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nThank you for answering me\r\n","title":"Realtime database orderbyByChild(timeStamp) not working (android-java)","body":"<p>Here is my data structure</p>\n<pre><code>  &quot;Posts&quot; : {\n&quot;-MnL-M_t4hHrcaqWecDM&quot; : {\n  &quot;description&quot; : &quot;&quot;,\n  &quot;picture&quot; : &quot;&quot;,\n  &quot;postKey&quot; : &quot;-MnL-M_t4hHrcaqWecDM&quot;,\n  &quot;timeStamp&quot; : 1635677993574,\n  &quot;title&quot; : &quot;&quot;,\n  &quot;userId&quot; : &quot;&quot;,\n  &quot;userPhoto&quot; : &quot;&quot;\n},\n&quot;-MnL-xtVgZAC2TIY6Whn&quot; : {\n  &quot;description&quot; : &quot;&quot;,\n  &quot;picture&quot; : &quot;&quot;,\n  &quot;postKey&quot; : &quot;&quot;,\n  &quot;timeStamp&quot; : 1635678150450,\n  &quot;title&quot; : &quot;&quot;,\n  &quot;userId&quot; : &quot;&quot;,\n  &quot;userPhoto&quot; : &quot;&quot;\n},\n</code></pre>\n<p>I want to delete Posts that have old timestamp.\nI use equalTo method not endAt for practice.\nSo I use this code</p>\n<pre><code>private void beginDelete() {\n    DatabaseReference db = FirebaseDatabase.getInstance().getReference();\n    Query queryByTimestamp = db.child(&quot;Posts&quot;).orderByChild(&quot;timeStamp&quot;).equalTo(&quot;1635677993574&quot;);\n    queryByTimestamp.get().addOnCompleteListener(new OnCompleteListener&lt;DataSnapshot&gt;() {\n        @Override\n        public void onComplete(@NonNull Task&lt;DataSnapshot&gt; task) {\n            if(task.isSuccessful()){\n                for (DataSnapshot ds : task.getResult().getChildren()){\n                    ds.getRef().removeValue();\n                    Toast.makeText(PostDetailActivity.this,&quot;게시글이 삭제되었습니다.&quot;,Toast.LENGTH_SHORT).show();\n                }\n            }\n            else{\n                Log.d(&quot;TAG&quot;,task.getException().getMessage());\n                Toast.makeText(PostDetailActivity.this,&quot;게시글이 삭제안되었습니다.&quot;,Toast.LENGTH_SHORT).show();\n\n            }\n        }\n    });\n</code></pre>\n<p>so I use query to designate &quot;timeStamp&quot; in Posts -&gt; &quot;-MnL-M_t4hHrcaqWecDM&quot; -&gt; &quot;timeStamp&quot;\nlike that. But I think the &quot;-MnL-M_t4hHrcaqWecDM&quot; can make problem. Can query find &quot;timeStamp&quot; through &quot;-MnL-M_t4hHrcaqWecDM&quot; child? Because I can delete Posts by using postKey..\nLike here.</p>\n<pre><code>        StorageReference picRef = FirebaseStorage.getInstance().getReferenceFromUrl(postImage);\n    picRef.delete()\n            .addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\n                @Override\n                public void onSuccess(Void aVoid) {\n                    //image deleted, now delete database\n                    Query fquery =FirebaseDatabase.getInstance().getReference(&quot;Posts&quot;).orderByChild(&quot;postKey&quot;).equalTo(&quot;-MDFJ23...&quot;);\n                    fquery.addListenerForSingleValueEvent(new ValueEventListener() {\n                        @Override\n                        public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n                            for (DataSnapshot ds:dataSnapshot.getChildren()){\n                                ds.getRef().removeValue(); // remove values from firebase where postkey matches\n                            }\n                            //Deleted\n                            Toast.makeText(PostDetailActivity.this,&quot;게시글이 삭제되었습니다.&quot;,Toast.LENGTH_SHORT).show();\n                        }\n\n                        @Override\n                        public void onCancelled(@NonNull DatabaseError databaseError) {\n\n                        }\n                    });\n\n                }\n            })\n            .addOnFailureListener(new OnFailureListener() {\n                @Override\n                public void onFailure(@NonNull Exception e) {\n                    //failed, can't go further\n                    Toast.makeText(PostDetailActivity.this,&quot;&quot;+e.getMessage(),Toast.LENGTH_SHORT).show();\n                }\n            });\n</code></pre>\n<p>Here is a full code.</p>\n<pre><code>ImageView imgPost,imgUserPost,imgCurrentUser;\nTextView txtPostDesc,txtPostDateName,txtPostTitle;\nEditText editTextComment;\nButton btnAddComment;\nString PostKey;\nFirebaseAuth firebaseAuth;\nFirebaseUser firebaseUser;\nFirebaseDatabase firebaseDatabase;\nRecyclerView RvComment;\nCommentAdapter commentAdapter;\nList&lt;Comment&gt; listComment;\nstatic String COMMENT_KEY = &quot;Comment&quot;;\nInputMethodManager imm;\nEditText et;\nButton btnDeletePost;\nString myUid;\nString UId;\nString postImage;\nprivate DatabaseReference mDatabase;\n\n\n\n\n\n\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_post_detail);\n    imm = (InputMethodManager)getSystemService(INPUT_METHOD_SERVICE);\n    et = (EditText)findViewById(R.id.post_detail_comment);\n\n\n\n    // let's set the statue bar to transparent\n\n\n    // ini Views\n    RvComment = findViewById(R.id.rv_comment);\n    imgPost =findViewById(R.id.post_detail_img);\n    imgUserPost = findViewById(R.id.post_detail_user_img);\n    imgCurrentUser = findViewById(R.id.post_detail_currentuser_img);\n\n    txtPostTitle = findViewById(R.id.post_detail_title);\n    txtPostDesc = findViewById(R.id.post_detail_desc);\n    txtPostDateName = findViewById(R.id.post_detail_date_name);\n\n    editTextComment = findViewById(R.id.post_detail_comment);\n    btnAddComment = findViewById(R.id.post_detail_add_comment_btn);\n    btnDeletePost = findViewById(R.id.button_delete);\n\n\n    firebaseAuth = FirebaseAuth.getInstance();\n    firebaseUser = firebaseAuth.getCurrentUser();\n    firebaseDatabase = FirebaseDatabase.getInstance();\n    // add post delete button\n    mDatabase= FirebaseDatabase.getInstance().getReference();\n\n    myUid = FirebaseAuth.getInstance().getCurrentUser().getUid();\n\n    btnDeletePost.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            //여기 수정 주의 UId.equals(myUid)\n            if (true){\n                Toast.makeText(PostDetailActivity.this,&quot;삭제중...&quot;,Toast.LENGTH_SHORT).show();\n                beginDelete();\n                //onBackPressed();\n            }\n            else{\n                Toast.makeText(PostDetailActivity.this,&quot;다른 사용자의 게시글입니다.&quot;,Toast.LENGTH_SHORT).show();\n            }\n        }\n    });\n\n    // add Comment button click listner\n\n    btnAddComment.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n\n            btnAddComment.setVisibility(View.INVISIBLE);\n            DatabaseReference commentReference = firebaseDatabase.getReference(COMMENT_KEY).child(PostKey).push();\n            String comment_content = editTextComment.getText().toString();\n            String uid = firebaseUser.getUid();\n            String uname = firebaseUser.getDisplayName();\n            if (firebaseUser.getPhotoUrl()!=null){\n                String uimg = firebaseUser.getPhotoUrl().toString();\n                Comment comment = new Comment(comment_content,uid,uimg,uname);\n                commentReference.setValue(comment).addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\n                    @Override\n                    public void onSuccess(Void aVoid) {\n                        showMessage(&quot;comment added&quot;);\n                        editTextComment.setText(&quot;&quot;);\n                        btnAddComment.setVisibility(View.VISIBLE);\n                    }\n                }).addOnFailureListener(new OnFailureListener() {\n                    @Override\n                    public void onFailure(@NonNull Exception e) {\n                        showMessage(&quot;fail to add comment : &quot;+e.getMessage());\n                    }\n                });\n\n            }\n            else{\n                String usphoto =Integer.toString(R.drawable.userphoto);\n                Comment comment = new Comment(comment_content,uid,usphoto,uname);\n                commentReference.setValue(comment).addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\n                    @Override\n                    public void onSuccess(Void aVoid) {\n                        showMessage(&quot;comment added&quot;);\n                        editTextComment.setText(&quot;&quot;);\n                        btnAddComment.setVisibility(View.VISIBLE);\n                    }\n                }).addOnFailureListener(new OnFailureListener() {\n                    @Override\n                    public void onFailure(@NonNull Exception e) {\n                        showMessage(&quot;fail to add comment : &quot;+e.getMessage());\n                    }\n                });\n            }\n\n\n\n\n        }\n    });\n\n\n    // now we need to bind all data into those views\n    // firt we need to get post data\n    // we need to send post detail data to this activity first ...\n    // now we can get post data\n\n\n\n    // 게시글 사진 백지 케이스\n    postImage = getIntent().getExtras().getString(&quot;postImage&quot;) ;\n    if(postImage!=null){\n        Glide.with(this).load(postImage).into(imgPost);\n    }\n    else{\n        Glide.with(this).load(R.drawable.whitepaper).into(imgPost);\n    }\n\n\n    String postTitle = getIntent().getExtras().getString(&quot;title&quot;);\n    txtPostTitle.setText(postTitle);\n\n    String userpostImage = getIntent().getExtras().getString(&quot;userPhoto&quot;);\n    if (userpostImage!=null){\n        Glide.with(this).load(userpostImage).into(imgUserPost);\n    }\n    else {\n        Glide.with(this).load(R.drawable.userphoto).into(imgUserPost);\n    }\n\n    String postDescription = getIntent().getExtras().getString(&quot;description&quot;);\n    txtPostDesc.setText(postDescription);\n\n    // set comment user image\n    if (firebaseUser.getPhotoUrl()!=null){\n        Glide.with(this).load(firebaseUser.getPhotoUrl()).into(imgCurrentUser);\n    }\n    else{\n        Glide.with(this).load(R.drawable.userphoto).into(imgCurrentUser);\n    }\n    // get post key\n    PostKey = getIntent().getExtras().getString(&quot;postKey&quot;);\n\n    String date = timestampToString(getIntent().getExtras().getLong(&quot;postDate&quot;));\n    txtPostDateName.setText(date);\n    // get post uid\n    UId = getIntent().getExtras().getString(&quot;userId&quot;);\n\n\n\n    // ini Recyclerview Comment\n    iniRvComment();\n\n\n}\n\nprivate void beginDelete() {\n    DatabaseReference db = FirebaseDatabase.getInstance().getReference();\n    Query queryByTimestamp = db.child(&quot;Posts&quot;).orderByChild(&quot;timeStamp&quot;).equalTo(&quot;1635677993574&quot;);\n    queryByTimestamp.get().addOnCompleteListener(new OnCompleteListener&lt;DataSnapshot&gt;() {\n        @Override\n        public void onComplete(@NonNull Task&lt;DataSnapshot&gt; task) {\n            if(task.isSuccessful()){\n                for (DataSnapshot ds : task.getResult().getChildren()){\n                    ds.getRef().removeValue();\n                    Toast.makeText(PostDetailActivity.this,&quot;게시글이 삭제되었습니다.&quot;,Toast.LENGTH_SHORT).show();\n                }\n            }\n            else{\n                Log.d(&quot;TAG&quot;,task.getException().getMessage());\n                Toast.makeText(PostDetailActivity.this,&quot;게시글이 삭제안되었습니다.&quot;,Toast.LENGTH_SHORT).show();\n\n            }\n        }\n    });\n\n\n}\n\npublic void linearOnClick(View v) {\n    imm.hideSoftInputFromWindow(et.getWindowToken(), 0);\n}\n\n\nprivate void iniRvComment() {\n\n    RvComment.setLayoutManager(new LinearLayoutManager(this));\n\n    DatabaseReference commentRef = firebaseDatabase.getReference(COMMENT_KEY).child(PostKey);\n    commentRef.addValueEventListener(new ValueEventListener() {\n        @Override\n        public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n            listComment = new ArrayList&lt;&gt;();\n            for (DataSnapshot snap:dataSnapshot.getChildren()) {\n\n                Comment comment = snap.getValue(Comment.class);\n                listComment.add(comment) ;\n\n            }\n\n            commentAdapter = new CommentAdapter(getApplicationContext(),listComment);\n            RvComment.setAdapter(commentAdapter);\n\n\n        }\n\n        @Override\n        public void onCancelled(@NonNull DatabaseError databaseError) {\n\n        }\n    });\n\n\n\n\n}\n\nprivate void showMessage(String message) {\n\n    Toast.makeText(this,message,Toast.LENGTH_LONG).show();\n\n}\n\n\nprivate String timestampToString(long time) {\n\n    Calendar calendar = Calendar.getInstance(Locale.ENGLISH);\n    calendar.setTimeInMillis(time);\n    String date = DateFormat.format(&quot;yyyy-MM-dd&quot;,calendar).toString();\n    return date;\n\n\n}\n</code></pre>\n<p>}</p>\n<p>Thank you for answering me</p>\n"},{"tags":["java","angular","spring-boot","angular12"],"comments":[{"owner":{"account_id":288211,"reputation":5020,"user_id":588492,"accept_rate":67,"display_name":"edjm"},"score":0,"creation_date":1635760745,"post_id":69795049,"comment_id":123371128,"body_markdown":"Not really familiar with all of this but in you Cities model your column name is &#39;id&#39; @Column(name = &quot;id&quot;) but it looks like you&#39;re looking for it in the other areas as cityid. I&#39;m not seeing where it is aliased as that. Should it just be &#39;id&#39; ? Under Halls you have @JoinColumn(name = &quot;cityid&quot;, nullable = false) should this be something like @JoinColumn(name = &quot;id&quot;, nullable = false)","body":"Not really familiar with all of this but in you Cities model your column name is &#39;id&#39; @Column(name = &quot;id&quot;) but it looks like you&#39;re looking for it in the other areas as cityid. I&#39;m not seeing where it is aliased as that. Should it just be &#39;id&#39; ? Under Halls you have @JoinColumn(name = &quot;cityid&quot;, nullable = false) should this be something like @JoinColumn(name = &quot;id&quot;, nullable = false)"},{"owner":{"account_id":8218454,"reputation":762,"user_id":6183889,"display_name":"Tom Elias"},"score":0,"creation_date":1635760959,"post_id":69795049,"comment_id":123371210,"body_markdown":"please post a JSON example of the request from your browser&#39;s network tab. to see if the JSON matches the model of City","body":"please post a JSON example of the request from your browser&#39;s network tab. to see if the JSON matches the model of City"},{"owner":{"account_id":20798423,"reputation":436,"user_id":15275012,"display_name":"Bogdan Onyshenko"},"score":0,"creation_date":1635761701,"post_id":69795049,"comment_id":123371470,"body_markdown":"Posted it. Please have a look...","body":"Posted it. Please have a look..."}],"answers":[{"tags":[],"owner":{"account_id":8218454,"reputation":762,"user_id":6183889,"display_name":"Tom Elias"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635759937,"creation_date":1635759937,"answer_id":69795126,"question_id":69795049,"body_markdown":"com.example.model.Halls[&quot;cityid&quot;])]\r\n\r\n&quot;no String-argument constructor/factory method to deserialize from String value (&#39;2&#39;)&quot;\r\n \r\nthe problem is in your JSON you are probably sending the ID as a string. make sure the field is a number.","title":"Parse Json exception while posting data to api","body":"<p>com.example.model.Halls[&quot;cityid&quot;])]</p>\n<p>&quot;no String-argument constructor/factory method to deserialize from String value ('2')&quot;</p>\n<p>the problem is in your JSON you are probably sending the ID as a string. make sure the field is a number.</p>\n"},{"tags":[],"owner":{"account_id":20798423,"reputation":436,"user_id":15275012,"display_name":"Bogdan Onyshenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635770988,"creation_date":1635770988,"answer_id":69797163,"question_id":69795049,"body_markdown":"Finaly I got it fixed. I edited the selectbox with cities this way:\r\n\r\n \r\n\r\n    &lt;select  [(ngModel)]=&quot;hall.cityid&quot; name=&quot;cityid&quot;&gt;\r\n            &lt;option *ngFor=&quot;let city of cities&quot; [ngValue]=&quot;city&quot;&gt;{{city.name}}&lt;/option&gt;\r\n    \r\n          &lt;/select&gt;\r\n\r\nAnd it fixed the problem.\r\n","title":"Parse Json exception while posting data to api","body":"<p>Finaly I got it fixed. I edited the selectbox with cities this way:</p>\n<pre><code>&lt;select  [(ngModel)]=&quot;hall.cityid&quot; name=&quot;cityid&quot;&gt;\n        &lt;option *ngFor=&quot;let city of cities&quot; [ngValue]=&quot;city&quot;&gt;{{city.name}}&lt;/option&gt;\n\n      &lt;/select&gt;\n</code></pre>\n<p>And it fixed the problem.</p>\n"}],"owner":{"account_id":20798423,"reputation":436,"user_id":15275012,"display_name":"Bogdan Onyshenko"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1635770988,"creation_date":1635759516,"question_id":69795049,"body_markdown":"Hello all I am trying to save some post data from related tables. Cities and halls. Here is my City model\r\n\r\n    package com.example.model;\r\n    import javax.persistence.Column;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.GenerationType;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.Table;\r\n    \r\n    @Entity\r\n    @Table(name = &quot;cities&quot;)\r\n    \r\n    public class Cities {\r\n    \r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id&quot;)\r\n    private int id;\r\n    \r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n    \r\n    public int getId() {\r\n    \treturn id;\r\n    }\r\n    \r\n    public void setId(int id) {\r\n    \tthis.id = id;\r\n    }\r\n    \r\n    public String getName() {\r\n    \treturn name;\r\n    }\r\n    \r\n    public void setName(String name) {\r\n    \tthis.name = name;\r\n    }\r\n\r\n\t\r\n\r\n    }\r\n\r\nHere is my Halls model:\r\n\r\n    package com.example.model;\r\n    import javax.persistence.Column;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.EntityListeners;\r\n    import javax.persistence.FetchType;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.GenerationType;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.JoinColumn;\r\n    import javax.persistence.ManyToOne;\r\n    import javax.persistence.Table;\r\n    import java.util.Date;\r\n    import org.hibernate.annotations.OnDelete;\r\n    import org.hibernate.annotations.OnDeleteAction;\r\n    \r\n    import com.fasterxml.jackson.annotation.JsonIgnoreProperties;\r\n    \r\n    @Entity\r\n    @Table(name = &quot;halls&quot;)\r\n    \r\n    public class Halls {\r\n    \t@Id\r\n    \t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    \t@Column(name = &quot;id&quot;)\r\n    \tprivate int id;\r\n    \r\n    \t @Column(name = &quot;name&quot;)\r\n    \t private String name;\r\n    \r\n    \t @Column(name = &quot;placeqty&quot;)\r\n    \t private int placeqty;\r\n    \t  \r\n    \t @JsonIgnoreProperties({&quot;hibernateLazyInitializer&quot;, &quot;handler&quot;,&quot;ignoreUnknown = true&quot;})\r\n    \t\r\n    \t @ManyToOne(fetch = FetchType.LAZY, optional = false)\r\n    \t    @JoinColumn(name = &quot;cityid&quot;, nullable = false)\r\n    \t    @OnDelete(action = OnDeleteAction.CASCADE)\r\n    \t    private Cities cityid;\r\n    \r\n    \tpublic int getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    \r\n    \tpublic void setId(int id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \r\n    \tpublic String getName() {\r\n    \t\treturn name;\r\n    \t}\r\n    \r\n    \tpublic void setName(String name) {\r\n    \t\tthis.name = name;\r\n    \t}\r\n    \r\n    \tpublic int getPlaceqty() {\r\n    \t\treturn placeqty;\r\n    \t}\r\n    \r\n    \tpublic void setPlaceqty(int placeqty) {\r\n    \t\tthis.placeqty = placeqty;\r\n    \t}\r\n    \r\n    \tpublic Cities getCityid() {\r\n    \t\treturn cityid;\r\n    \t}\r\n    \r\n    \tpublic void setCityid(Cities cityid) {\r\n    \t\tthis.cityid = cityid;\r\n    \t}\r\n    \t \r\n    \t \r\n    }\r\n\r\n\r\nIt is related on column cityid to cities model. Here is my controller method to create a new hall in Spring boot:\r\n\r\n \r\n\r\n    @RequestMapping(value=&quot;/add&quot;, method=RequestMethod.POST)\r\n    \t\tpublic ResponseEntity add(@RequestBody Halls hall)\r\n    \t\t{\r\n    \t\t hallsService.addHall(hall);\r\n    \t      return new ResponseEntity&lt;&gt;(hall, HttpStatus.CREATED);\r\n    \r\n    \t\t}\r\n\r\nAnd my Angular form:\r\n\r\n    &lt;p&gt;Добавить зал&lt;/p&gt;\r\n    &lt;div&gt;\r\n      &lt;div class=&quot;submit-form&quot;&gt;\r\n        &lt;div *ngIf=&quot;!submitted&quot;&gt;\r\n          &lt;div class=&quot;form-group&quot;&gt;\r\n            &lt;label for=&quot;title&quot;&gt;Название&lt;/label&gt;\r\n            &lt;input\r\n              type=&quot;text&quot;\r\n              class=&quot;form-control&quot;\r\n              id=&quot;title&quot;\r\n              required\r\n              [(ngModel)]=&quot;hall.name&quot;\r\n              name=&quot;name&quot;\r\n            /&gt;\r\n          &lt;/div&gt;\r\n    \r\n    \r\n          &lt;div class=&quot;form-group&quot;&gt;\r\n            &lt;label for=&quot;placeqty&quot;&gt;кол-во мест&lt;/label&gt;\r\n            &lt;input\r\n              type=&quot;text&quot;\r\n              class=&quot;form-control&quot;\r\n              id=&quot;placeqty&quot;\r\n              required\r\n              [(ngModel)]=&quot;hall.placeqty&quot;\r\n              name=&quot;placeqty&quot;\r\n            /&gt;\r\n          &lt;/div&gt;\r\n    \r\n          &lt;select  [(ngModel)]=&quot;hall.cityid&quot; name=&quot;cityid&quot;&gt;\r\n            &lt;option *ngFor=&quot;let c of cities&quot; value=&quot;{{c.id}}&quot;&gt;{{c.name}}&lt;/option&gt;\r\n          &lt;/select&gt;`\r\n    \r\n    \r\n          &lt;button (click)=&quot;saveHall()&quot; class=&quot;btn btn-success&quot;&gt;Сохранить&lt;/button&gt;\r\n        &lt;/div&gt;\r\n    \r\n        &lt;div *ngIf=&quot;submitted&quot;&gt;\r\n          &lt;h4&gt;Зал добавлен!&lt;/h4&gt;\r\n          &lt;button class=&quot;btn btn-success&quot; (click)=&quot;newHall()&quot;&gt;Добавить еще&lt;/button&gt;\r\n        &lt;/div&gt;\r\n      &lt;/div&gt;\r\n    &lt;/div&gt;\r\n\r\nAnd my component looks like this:\r\n\r\n    import { Component, OnInit } from &#39;@angular/core&#39;;\r\n    import { Hall } from &#39;src/app/models/hall.model&#39;;\r\n    import { City } from &#39;src/app/models/city.model&#39;;\r\n    \r\n    import { HallService } from &#39;src/app/services/hall.service&#39;;\r\n    import { CityService } from &#39;src/app/services/city.service&#39;;\r\n    \r\n    \r\n    @Component({\r\n      selector: &#39;app-add-hall&#39;,\r\n      templateUrl: &#39;./add-hall.component.html&#39;,\r\n      styleUrls: [&#39;./add-hall.component.css&#39;]\r\n    })\r\n    export class AddHallComponent implements OnInit {\r\n      cities?: City[];\r\n    \r\n      // @ts-ignore\r\n      hall: Hall = {\r\n        name: &#39;&#39;,\r\n        placeqty:&#39;&#39;,\r\n        cityid:this.retrieveCities(),\r\n    \r\n    \r\n    \r\n    \r\n      };\r\n      submitted = false;\r\n    \r\n      constructor(private  hallService:HallService,private cityService:CityService) { }\r\n    \r\n      ngOnInit(): void {\r\n      }\r\n      saveHall(): void {\r\n        const data = {\r\n          name: this.hall.name,\r\n          placeqty: this.hall.placeqty,\r\n          cityid: this.hall.cityid\r\n    \r\n        };\r\n        console.log(data.cityid);\r\n        this.hallService.create(data)\r\n          .subscribe(\r\n            response =&gt; {\r\n            console.log(&quot;city&quot;)\r\n              console.log(response);\r\n              this.submitted = true;\r\n            },\r\n            error =&gt; {\r\n              console.log(error);\r\n            });\r\n      }\r\n      newHall(): void {\r\n        this.submitted = false;\r\n        this.hall = {\r\n          name: &#39;&#39;,\r\n          placeqty: &#39;&#39;,\r\n          cityid: this.retrieveCities()\r\n    \r\n    \r\n        };\r\n      }\r\n    \r\n      retrieveCities(): any {\r\n       this.cityService.getAll()\r\n          .subscribe(\r\n            data =&gt; {\r\n              this.cities = data;\r\n              console.log(data);\r\n              return data;\r\n              },\r\n            error =&gt; {\r\n              console.log(error);\r\n          return error;\r\n            });\r\n    \r\n      }\r\n    }\r\n\r\nAnd my Halls model:\r\n\r\n    import {City} from &quot;./city.model&quot;;\r\n    \r\n    export class Hall {\r\n      id?:any;\r\n      name?:string;\r\n      placeqty?:string;\r\n    \r\n      cityid?:City;\r\n    \r\n    }\r\n\r\nSo, after posting this form I get the following error:\r\n\r\n   \r\n\r\n     2021-11-01 11:34:10.236  WARN 14120 --- [io-8888-exec-10] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot construct instance of `com.example.model.Cities` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value (&#39;2&#39;); nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot construct instance of `com.example.model.Cities` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value (&#39;2&#39;)\r\n         at [Source: (PushbackInputStream); line: 1, column: 43] (through reference chain: com.example.model.Halls[&quot;cityid&quot;])]\r\n\r\nWhat am I doing incorrectly in this case?\r\n\r\nWill add my city model from Java and Angular\r\n\r\nJava:\r\n\r\n    package com.example.model;\r\n    import javax.persistence.Column;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.GenerationType;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.Table;\r\n    \r\n    @Entity\r\n    @Table(name = &quot;cities&quot;)\r\n    \r\n    public class Cities {\r\n    \r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id&quot;)\r\n    private int id;\r\n    \r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n    \r\n    public int getId() {\r\n    \treturn id;\r\n    }\r\n    \r\n    public void setId(int id) {\r\n    \tthis.id = id;\r\n    }\r\n    \r\n    public String getName() {\r\n    \treturn name;\r\n    }\r\n    \r\n    public void setName(String name) {\r\n    \tthis.name = name;\r\n    }\r\n    \r\n    \r\n    \t\r\n    \r\n    }\r\n\r\nAnd the angular part of it:\r\n\r\n    export class City {\r\n      id?:any;\r\n      name?:string;\r\n    }\r\n\r\nWhere exectly I have to convert it?\r\nHere is my post payload:\r\n\r\n    name: &quot;test&quot;, placeqty: &quot;100&quot;, cityid: &quot;2&quot;}\r\n    cityid: &quot;2&quot;\r\n    name: &quot;test&quot;\r\n    placeqty: &quot;\r\n\r\nAlso I tryed to use ngvalue instead of a value:\r\n\r\n     &lt;select  [(ngModel)]=&quot;hall.cityid&quot; name=&quot;cityid&quot;&gt;\r\n            &lt;option *ngFor=&quot;let c of cities&quot; [ngValue]=&#39;c.id&#39;&gt;{{c.name}}&lt;/option&gt;\r\n          &lt;/select&gt;\r\n\r\nWith no luck.\r\n\r\n\r\n","title":"Parse Json exception while posting data to api","body":"<p>Hello all I am trying to save some post data from related tables. Cities and halls. Here is my City model</p>\n<pre><code>package com.example.model;\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = &quot;cities&quot;)\n\npublic class Cities {\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\n@Column(name = &quot;id&quot;)\nprivate int id;\n\n@Column(name = &quot;name&quot;)\nprivate String name;\n\npublic int getId() {\n    return id;\n}\n\npublic void setId(int id) {\n    this.id = id;\n}\n\npublic String getName() {\n    return name;\n}\n\npublic void setName(String name) {\n    this.name = name;\n}\n\n\n\n}\n</code></pre>\n<p>Here is my Halls model:</p>\n<pre><code>package com.example.model;\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.EntityListeners;\nimport javax.persistence.FetchType;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.ManyToOne;\nimport javax.persistence.Table;\nimport java.util.Date;\nimport org.hibernate.annotations.OnDelete;\nimport org.hibernate.annotations.OnDeleteAction;\n\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\n\n@Entity\n@Table(name = &quot;halls&quot;)\n\npublic class Halls {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;)\n    private int id;\n\n     @Column(name = &quot;name&quot;)\n     private String name;\n\n     @Column(name = &quot;placeqty&quot;)\n     private int placeqty;\n      \n     @JsonIgnoreProperties({&quot;hibernateLazyInitializer&quot;, &quot;handler&quot;,&quot;ignoreUnknown = true&quot;})\n    \n     @ManyToOne(fetch = FetchType.LAZY, optional = false)\n        @JoinColumn(name = &quot;cityid&quot;, nullable = false)\n        @OnDelete(action = OnDeleteAction.CASCADE)\n        private Cities cityid;\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public int getPlaceqty() {\n        return placeqty;\n    }\n\n    public void setPlaceqty(int placeqty) {\n        this.placeqty = placeqty;\n    }\n\n    public Cities getCityid() {\n        return cityid;\n    }\n\n    public void setCityid(Cities cityid) {\n        this.cityid = cityid;\n    }\n     \n     \n}\n</code></pre>\n<p>It is related on column cityid to cities model. Here is my controller method to create a new hall in Spring boot:</p>\n<pre><code>@RequestMapping(value=&quot;/add&quot;, method=RequestMethod.POST)\n        public ResponseEntity add(@RequestBody Halls hall)\n        {\n         hallsService.addHall(hall);\n          return new ResponseEntity&lt;&gt;(hall, HttpStatus.CREATED);\n\n        }\n</code></pre>\n<p>And my Angular form:</p>\n<pre><code>&lt;p&gt;Добавить зал&lt;/p&gt;\n&lt;div&gt;\n  &lt;div class=&quot;submit-form&quot;&gt;\n    &lt;div *ngIf=&quot;!submitted&quot;&gt;\n      &lt;div class=&quot;form-group&quot;&gt;\n        &lt;label for=&quot;title&quot;&gt;Название&lt;/label&gt;\n        &lt;input\n          type=&quot;text&quot;\n          class=&quot;form-control&quot;\n          id=&quot;title&quot;\n          required\n          [(ngModel)]=&quot;hall.name&quot;\n          name=&quot;name&quot;\n        /&gt;\n      &lt;/div&gt;\n\n\n      &lt;div class=&quot;form-group&quot;&gt;\n        &lt;label for=&quot;placeqty&quot;&gt;кол-во мест&lt;/label&gt;\n        &lt;input\n          type=&quot;text&quot;\n          class=&quot;form-control&quot;\n          id=&quot;placeqty&quot;\n          required\n          [(ngModel)]=&quot;hall.placeqty&quot;\n          name=&quot;placeqty&quot;\n        /&gt;\n      &lt;/div&gt;\n\n      &lt;select  [(ngModel)]=&quot;hall.cityid&quot; name=&quot;cityid&quot;&gt;\n        &lt;option *ngFor=&quot;let c of cities&quot; value=&quot;{{c.id}}&quot;&gt;{{c.name}}&lt;/option&gt;\n      &lt;/select&gt;`\n\n\n      &lt;button (click)=&quot;saveHall()&quot; class=&quot;btn btn-success&quot;&gt;Сохранить&lt;/button&gt;\n    &lt;/div&gt;\n\n    &lt;div *ngIf=&quot;submitted&quot;&gt;\n      &lt;h4&gt;Зал добавлен!&lt;/h4&gt;\n      &lt;button class=&quot;btn btn-success&quot; (click)=&quot;newHall()&quot;&gt;Добавить еще&lt;/button&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n<p>And my component looks like this:</p>\n<pre><code>import { Component, OnInit } from '@angular/core';\nimport { Hall } from 'src/app/models/hall.model';\nimport { City } from 'src/app/models/city.model';\n\nimport { HallService } from 'src/app/services/hall.service';\nimport { CityService } from 'src/app/services/city.service';\n\n\n@Component({\n  selector: 'app-add-hall',\n  templateUrl: './add-hall.component.html',\n  styleUrls: ['./add-hall.component.css']\n})\nexport class AddHallComponent implements OnInit {\n  cities?: City[];\n\n  // @ts-ignore\n  hall: Hall = {\n    name: '',\n    placeqty:'',\n    cityid:this.retrieveCities(),\n\n\n\n\n  };\n  submitted = false;\n\n  constructor(private  hallService:HallService,private cityService:CityService) { }\n\n  ngOnInit(): void {\n  }\n  saveHall(): void {\n    const data = {\n      name: this.hall.name,\n      placeqty: this.hall.placeqty,\n      cityid: this.hall.cityid\n\n    };\n    console.log(data.cityid);\n    this.hallService.create(data)\n      .subscribe(\n        response =&gt; {\n        console.log(&quot;city&quot;)\n          console.log(response);\n          this.submitted = true;\n        },\n        error =&gt; {\n          console.log(error);\n        });\n  }\n  newHall(): void {\n    this.submitted = false;\n    this.hall = {\n      name: '',\n      placeqty: '',\n      cityid: this.retrieveCities()\n\n\n    };\n  }\n\n  retrieveCities(): any {\n   this.cityService.getAll()\n      .subscribe(\n        data =&gt; {\n          this.cities = data;\n          console.log(data);\n          return data;\n          },\n        error =&gt; {\n          console.log(error);\n      return error;\n        });\n\n  }\n}\n</code></pre>\n<p>And my Halls model:</p>\n<pre><code>import {City} from &quot;./city.model&quot;;\n\nexport class Hall {\n  id?:any;\n  name?:string;\n  placeqty?:string;\n\n  cityid?:City;\n\n}\n</code></pre>\n<p>So, after posting this form I get the following error:</p>\n<pre><code> 2021-11-01 11:34:10.236  WARN 14120 --- [io-8888-exec-10] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot construct instance of `com.example.model.Cities` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('2'); nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot construct instance of `com.example.model.Cities` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('2')\n     at [Source: (PushbackInputStream); line: 1, column: 43] (through reference chain: com.example.model.Halls[&quot;cityid&quot;])]\n</code></pre>\n<p>What am I doing incorrectly in this case?</p>\n<p>Will add my city model from Java and Angular</p>\n<p>Java:</p>\n<pre><code>package com.example.model;\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = &quot;cities&quot;)\n\npublic class Cities {\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\n@Column(name = &quot;id&quot;)\nprivate int id;\n\n@Column(name = &quot;name&quot;)\nprivate String name;\n\npublic int getId() {\n    return id;\n}\n\npublic void setId(int id) {\n    this.id = id;\n}\n\npublic String getName() {\n    return name;\n}\n\npublic void setName(String name) {\n    this.name = name;\n}\n\n\n    \n\n}\n</code></pre>\n<p>And the angular part of it:</p>\n<pre><code>export class City {\n  id?:any;\n  name?:string;\n}\n</code></pre>\n<p>Where exectly I have to convert it?\nHere is my post payload:</p>\n<pre><code>name: &quot;test&quot;, placeqty: &quot;100&quot;, cityid: &quot;2&quot;}\ncityid: &quot;2&quot;\nname: &quot;test&quot;\nplaceqty: &quot;\n</code></pre>\n<p>Also I tryed to use ngvalue instead of a value:</p>\n<pre><code> &lt;select  [(ngModel)]=&quot;hall.cityid&quot; name=&quot;cityid&quot;&gt;\n        &lt;option *ngFor=&quot;let c of cities&quot; [ngValue]='c.id'&gt;{{c.name}}&lt;/option&gt;\n      &lt;/select&gt;\n</code></pre>\n<p>With no luck.</p>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":23019255,"reputation":320,"user_id":17140506,"display_name":"Digsb"},"score":2,"creation_date":1635745709,"post_id":69793048,"comment_id":123367395,"body_markdown":"Did you verify if &quot;assets&quot; folder is in your classpath?","body":"Did you verify if &quot;assets&quot; folder is in your classpath?"},{"owner":{"account_id":13753711,"reputation":676,"user_id":9925191,"display_name":"Rose"},"score":0,"creation_date":1635747998,"post_id":69793048,"comment_id":123367777,"body_markdown":"Update the project once and check.","body":"Update the project once and check."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1635770735,"post_id":69793048,"comment_id":123374730,"body_markdown":"This is the answer: https://stackoverflow.com/a/26968924/139985.  You can&#39;t use the classloader to read assets.  They are not on the classpath. You need to use `Context.getAssets()...` to retrieve them.","body":"This is the answer: <a href=\"https://stackoverflow.com/a/26968924/139985\">stackoverflow.com/a/26968924/139985</a>.  You can&#39;t use the classloader to read assets.  They are not on the classpath. You need to use <code>Context.getAssets()...</code> to retrieve them."},{"owner":{"account_id":19560272,"reputation":21,"user_id":14313644,"display_name":"Dont DownVote Please"},"score":0,"creation_date":1635771544,"post_id":69793048,"comment_id":123375028,"body_markdown":"@Stephen Yes. I could do it with Context. But I want to do without context.","body":"@Stephen Yes. I could do it with Context. But I want to do without context."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1635771651,"post_id":69793048,"comment_id":123375067,"body_markdown":"And the two answers I linked to say that you can&#39;t.","body":"And the two answers I linked to say that you can&#39;t."},{"owner":{"account_id":19560272,"reputation":21,"user_id":14313644,"display_name":"Dont DownVote Please"},"score":0,"creation_date":1635771729,"post_id":69793048,"comment_id":123375104,"body_markdown":"@StephenC Previously It was working fine, without any Context. So why do I need it now. I&#39;m not doing any test. So how could it be an answer?","body":"@StephenC Previously It was working fine, without any Context. So why do I need it now. I&#39;m not doing any test. So how could it be an answer?"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1635771752,"post_id":69793048,"comment_id":123375109,"body_markdown":"See the second Q&amp;A.  This is not specific to testing.","body":"See the second Q&amp;A.  This is not specific to testing."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1635772578,"post_id":69793048,"comment_id":123375448,"body_markdown":"I think I would prefer to trust two answers who say that it can&#39;t be done to someone who says it worked before but doesn&#39;t work now.  I&#39;m not doubting that you believe that it worked before.  Just that it did work before.   For instance, you might have had an copy of that file in your project&#39;s &quot;src/main/res&quot; or &quot;src/main/resources&quot; directory.","body":"I think I would prefer to trust two answers who say that it can&#39;t be done to someone who says it worked before but doesn&#39;t work now.  I&#39;m not doubting that you believe that it worked before.  Just that it did work before.   For instance, you might have had an copy of that file in your project&#39;s &quot;src/main/res&quot; or &quot;src/main/resources&quot; directory."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1635772982,"post_id":69793048,"comment_id":123375632,"body_markdown":"Anyhow, if you do find anything that says that you can load an asset (src/main/asset) via a classloader, people would be interested to know exactly how it is done.","body":"Anyhow, if you do find anything that says that you can load an asset (src/main/asset) via a classloader, people would be interested to know exactly how it is done."},{"owner":{"account_id":19560272,"reputation":21,"user_id":14313644,"display_name":"Dont DownVote Please"},"score":0,"creation_date":1635782339,"post_id":69793048,"comment_id":123379368,"body_markdown":"Though it is not working from inside the library module, in app module is working perfectly. **Why This Is Working In App while Not in Library**","body":"Though it is not working from inside the library module, in app module is working perfectly. <b>Why This Is Working In App while Not in Library</b>"}],"owner":{"account_id":19560272,"reputation":21,"user_id":14313644,"display_name":"Dont DownVote Please"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1635770748,"answer_count":0,"score":0,"last_activity_date":1635770951,"creation_date":1635745536,"question_id":69793048,"body_markdown":"*Though topic is asked several times. But none of those solutions worked for me.*\r\n\r\nMy project is as follows\r\n\r\n```\r\n../src/main/\r\n    |\r\n    |-- java/media/uqab/api/\r\n    |   |\r\n    |   |-- Api.kt\r\n    |\r\n    |\r\n    |-- assets/\r\n        |\r\n        |-- info_list.json\r\n        \r\n```\r\n\r\nI tried to get the `info_list.json` file from `Api.kt`. But getting a `null` value.\r\n\r\n```kotlin\r\nclass Api {\r\n    companion object {\r\n        fun getInfoList(): List&lt;Info&gt; {\r\n            //...\r\n            val str: InputStream? = Api::class.java.getResourceAsStream(&quot;/assets/info_list.json&quot;)\r\n            //...\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nI don&#39;t know what happened! It was working even a few days ago.\r\n\r\nI also tried https://stackoverflow.com/questions/16570523/getresourceasstream-returns-null. But didn&#39;t work for me.\r\n\r\n\r\n\r\n","title":"getting null value from getResourceAsStream","body":"<p><em>Though topic is asked several times. But none of those solutions worked for me.</em></p>\n<p>My project is as follows</p>\n<pre><code>../src/main/\n    |\n    |-- java/media/uqab/api/\n    |   |\n    |   |-- Api.kt\n    |\n    |\n    |-- assets/\n        |\n        |-- info_list.json\n        \n</code></pre>\n<p>I tried to get the <code>info_list.json</code> file from <code>Api.kt</code>. But getting a <code>null</code> value.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class Api {\n    companion object {\n        fun getInfoList(): List&lt;Info&gt; {\n            //...\n            val str: InputStream? = Api::class.java.getResourceAsStream(&quot;/assets/info_list.json&quot;)\n            //...\n        }\n    }\n}\n\n</code></pre>\n<p>I don't know what happened! It was working even a few days ago.</p>\n<p>I also tried <a href=\"https://stackoverflow.com/questions/16570523/getresourceasstream-returns-null\">getResourceAsStream returns null</a>. But didn't work for me.</p>\n"},{"tags":["java","arrays","methods"],"answers":[{"tags":[],"owner":{"account_id":19991342,"reputation":556,"user_id":16998523,"display_name":"charlie-map"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1635558784,"creation_date":1635558784,"answer_id":69776240,"question_id":69776208,"body_markdown":"When you declare your `fillArray` function you gave it an input of `int[][] userInput`, but then when you call:\r\n\r\n    int[][] grid = fillArray();\r\n\r\nyou don&#39;t give `fillArray` and input of `int[][]`. If you remove the paramter from the `fillArray` function that should fix it. It would look like:\r\n\r\n    public static int[][] fillArray() {\r\n        // your code...\r\n    }","title":"trouble understanding passing 2d array to methods and displaying","body":"<p>When you declare your <code>fillArray</code> function you gave it an input of <code>int[][] userInput</code>, but then when you call:</p>\n<pre><code>int[][] grid = fillArray();\n</code></pre>\n<p>you don't give <code>fillArray</code> and input of <code>int[][]</code>. If you remove the paramter from the <code>fillArray</code> function that should fix it. It would look like:</p>\n<pre><code>public static int[][] fillArray() {\n    // your code...\n}\n</code></pre>\n"}],"owner":{"account_id":23187417,"reputation":1,"user_id":17284293,"display_name":"Jeremy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":69776240,"answer_count":1,"score":-1,"last_activity_date":1635770385,"creation_date":1635558239,"question_id":69776208,"body_markdown":"With this program I am supposed to use methods to pass through to obtain user input to fill a 3x4 2d array. Then add the sum of the columns and display the results. \r\n\r\nThe int[][] grid = fillArray(); has an error that in[][] required. Why am I unable to call my method in the main? This is how the book says to do it along witih countless youtube videos.\r\n\r\n```\r\npublic class SumOfColumns {\r\n\r\n    \r\n\r\n    public static int sumColumn(int[][] m, int columnIndex) {\r\n        for (int column = 0; column &lt; 4; column++) {\r\n            columnIndex = 0;\r\n            for (int row = 0; row &lt; 3; row++) {\r\n                columnIndex += m[column][row];\r\n            }\r\n        }\r\n        return columnIndex;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        \r\n       ***int[][] grid = fillArray();***\r\n    }\r\n    public static int[][] fillArray(int[][] userInput) {\r\n        Scanner input = new Scanner(System.in);\r\n         int[][] grid = new int[3][4];\r\n        System.out.println(&quot;Enter a 3x4 grid of numbers please: &quot;);\r\n        for (int row = 0; row &lt; grid.length; row++) {\r\n            for (int column = 0; column &lt; grid[row].length; column++) {\r\n                grid[row][column] = input.nextInt();\r\n            }\r\n        }\r\n        return grid;\r\n    }\r\n\r\n}\r\n```","title":"trouble understanding passing 2d array to methods and displaying","body":"<p>With this program I am supposed to use methods to pass through to obtain user input to fill a 3x4 2d array. Then add the sum of the columns and display the results.</p>\n<p>The int[][] grid = fillArray(); has an error that in[][] required. Why am I unable to call my method in the main? This is how the book says to do it along witih countless youtube videos.</p>\n<pre><code>public class SumOfColumns {\n\n    \n\n    public static int sumColumn(int[][] m, int columnIndex) {\n        for (int column = 0; column &lt; 4; column++) {\n            columnIndex = 0;\n            for (int row = 0; row &lt; 3; row++) {\n                columnIndex += m[column][row];\n            }\n        }\n        return columnIndex;\n    }\n\n    public static void main(String[] args) {\n        \n       ***int[][] grid = fillArray();***\n    }\n    public static int[][] fillArray(int[][] userInput) {\n        Scanner input = new Scanner(System.in);\n         int[][] grid = new int[3][4];\n        System.out.println(&quot;Enter a 3x4 grid of numbers please: &quot;);\n        for (int row = 0; row &lt; grid.length; row++) {\n            for (int column = 0; column &lt; grid[row].length; column++) {\n                grid[row][column] = input.nextInt();\n            }\n        }\n        return grid;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","openjdk-11","adoptopenjdk"],"answers":[{"tags":[],"owner":{"account_id":773585,"reputation":3537,"user_id":1034782,"accept_rate":25,"display_name":"Donatello"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1610453266,"creation_date":1610453266,"answer_id":65683653,"question_id":65683652,"body_markdown":"As a workaround, we moved to [Amazon Coretto 11][1] which is currently based on following version.\r\n\r\n```shell\r\n$ java -version\r\nopenjdk version &quot;11.0.9.1&quot; 2020-11-04 LTS\r\nOpenJDK Runtime Environment Corretto-11.0.9.12.1 (build 11.0.9.1+12-LTS)\r\nOpenJDK 64-Bit Server VM Corretto-11.0.9.12.1 (build 11.0.9.1+12-LTS, mixed mode)\r\n```\r\n\r\nNo errors.\r\n\r\n  [1]: https://docs.aws.amazon.com/corretto/latest/corretto-11-ug/docker-install.html","title":"java.lang.NoClassDefFoundError: Could not initialize class sun.font.SunFontManager with OpenJDK 11.0","body":"<p>As a workaround, we moved to <a href=\"https://docs.aws.amazon.com/corretto/latest/corretto-11-ug/docker-install.html\" rel=\"nofollow noreferrer\">Amazon Coretto 11</a> which is currently based on following version.</p>\n<pre class=\"lang-sh prettyprint-override\"><code>$ java -version\nopenjdk version &quot;11.0.9.1&quot; 2020-11-04 LTS\nOpenJDK Runtime Environment Corretto-11.0.9.12.1 (build 11.0.9.1+12-LTS)\nOpenJDK 64-Bit Server VM Corretto-11.0.9.12.1 (build 11.0.9.1+12-LTS, mixed mode)\n</code></pre>\n<p>No errors.</p>\n"},{"tags":[],"owner":{"account_id":5084245,"reputation":1010,"user_id":4079473,"display_name":"anstue"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1635770323,"creation_date":1635770323,"answer_id":69797052,"question_id":65683652,"body_markdown":"What worked for me with `openjdk:11-jdk-slim` docker image was to install `fontconfig`\r\n\r\nand to add `--add-exports java.desktop/sun.font=ALL-UNNAMED` to the jvm parameters. E.g.:\r\n```\r\nENV JAVA_OPTS=&quot;-server --add-exports java.desktop/sun.font=ALL-UNNAMED&quot;\r\n\r\nENTRYPOINT [ &quot;sh&quot;, &quot;-c&quot;, &quot;java $JAVA_OPTS /app.jar&quot; ]\r\n```","title":"java.lang.NoClassDefFoundError: Could not initialize class sun.font.SunFontManager with OpenJDK 11.0","body":"<p>What worked for me with <code>openjdk:11-jdk-slim</code> docker image was to install <code>fontconfig</code></p>\n<p>and to add <code>--add-exports java.desktop/sun.font=ALL-UNNAMED</code> to the jvm parameters. E.g.:</p>\n<pre><code>ENV JAVA_OPTS=&quot;-server --add-exports java.desktop/sun.font=ALL-UNNAMED&quot;\n\nENTRYPOINT [ &quot;sh&quot;, &quot;-c&quot;, &quot;java $JAVA_OPTS /app.jar&quot; ]\n</code></pre>\n"}],"owner":{"account_id":773585,"reputation":3537,"user_id":1034782,"accept_rate":25,"display_name":"Donatello"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5412,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1635770323,"creation_date":1610453266,"question_id":65683652,"body_markdown":"We are facing this error since migration from OpenJDK 8 to OpenJDK 11.0.9 from [openjdk:11-jdk-slim][1].\r\n\r\n```\r\njava.lang.NoClassDefFoundError: Could not initialize class sun.font.SunFontManager\r\n        at java.desktop/sun.font.FontDesignMetrics.getMetrics(FontDesignMetrics.java:265)\r\n        at java.desktop/sun.java2d.SunGraphics2D.getFontMetrics(SunGraphics2D.java:869)\r\n```\r\n\r\n```shell\r\n$ java -version\r\nopenjdk version &quot;11.0.9.1&quot; 2020-11-04\r\nOpenJDK Runtime Environment 18.9 (build 11.0.9.1+1)\r\nOpenJDK 64-Bit Server VM 18.9 (build 11.0.9.1+1, mixed mode)\r\n```\r\n\r\nSimilar issue has been registered on RedHat here: http://bugzilla.redhat.com/show_bug.cgi?id=1768935\r\n\r\nHowever, as far as I understand, we are not using JDK from RedHat source code (even if openjdk-11 project is built and packaged by them, before being used by AdoptOpenJDK project....).\r\n\r\n\r\n  [1]: https://github.com/AdoptOpenJDK/openjdk11-upstream-binaries/releases/tag/jdk-11.0.9.1%2B1","title":"java.lang.NoClassDefFoundError: Could not initialize class sun.font.SunFontManager with OpenJDK 11.0","body":"<p>We are facing this error since migration from OpenJDK 8 to OpenJDK 11.0.9 from <a href=\"https://github.com/AdoptOpenJDK/openjdk11-upstream-binaries/releases/tag/jdk-11.0.9.1%2B1\" rel=\"nofollow noreferrer\">openjdk:11-jdk-slim</a>.</p>\n<pre><code>java.lang.NoClassDefFoundError: Could not initialize class sun.font.SunFontManager\n        at java.desktop/sun.font.FontDesignMetrics.getMetrics(FontDesignMetrics.java:265)\n        at java.desktop/sun.java2d.SunGraphics2D.getFontMetrics(SunGraphics2D.java:869)\n</code></pre>\n<pre class=\"lang-sh prettyprint-override\"><code>$ java -version\nopenjdk version &quot;11.0.9.1&quot; 2020-11-04\nOpenJDK Runtime Environment 18.9 (build 11.0.9.1+1)\nOpenJDK 64-Bit Server VM 18.9 (build 11.0.9.1+1, mixed mode)\n</code></pre>\n<p>Similar issue has been registered on RedHat here: <a href=\"http://bugzilla.redhat.com/show_bug.cgi?id=1768935\" rel=\"nofollow noreferrer\">http://bugzilla.redhat.com/show_bug.cgi?id=1768935</a></p>\n<p>However, as far as I understand, we are not using JDK from RedHat source code (even if openjdk-11 project is built and packaged by them, before being used by AdoptOpenJDK project....).</p>\n"},{"tags":["java","spring-boot","jvm","heap-memory","visualvm"],"comments":[{"owner":{"account_id":1217449,"reputation":4099,"user_id":1184752,"accept_rate":43,"display_name":"Juraj Martinka"},"score":0,"creation_date":1593670136,"post_id":62688008,"comment_id":110862210,"body_markdown":"Check https://docs.oracle.com/javase/8/docs/technotes/guides/visualvm/heapdump.html (&quot;Instances View&quot;) and try to find out which GC roots reference those arrays","body":"Check <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/visualvm/heapdump.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/technotes/guides/visualvm/&hellip;</a> (&quot;Instances View&quot;) and try to find out which GC roots reference those arrays"},{"owner":{"account_id":1618403,"reputation":125,"user_id":1495483,"accept_rate":56,"display_name":"Joshua"},"score":0,"creation_date":1593672734,"post_id":62688008,"comment_id":110863166,"body_markdown":"@JurajMartinka most of them are not using instance. I added a pic to show.","body":"@JurajMartinka most of them are not using instance. I added a pic to show."},{"owner":{"account_id":1217449,"reputation":4099,"user_id":1184752,"accept_rate":43,"display_name":"Juraj Martinka"},"score":0,"creation_date":1593672907,"post_id":62688008,"comment_id":110863237,"body_markdown":"If they aren&#39;t used they should be GCed at some point. You might want to check if full gc has been done before the heap dump was collected (which is often done but tools have an option to avoid that).","body":"If they aren&#39;t used they should be GCed at some point. You might want to check if full gc has been done before the heap dump was collected (which is often done but tools have an option to avoid that)."},{"owner":{"account_id":1618403,"reputation":125,"user_id":1495483,"accept_rate":56,"display_name":"Joshua"},"score":0,"creation_date":1593673356,"post_id":62688008,"comment_id":110863422,"body_markdown":"@JurajMartinka Yes, it should so, but this program just occupyed more and more memory. 6GB used when I dump heap, but now 12GB after running half a month. I don&#39;t understand.","body":"@JurajMartinka Yes, it should so, but this program just occupyed more and more memory. 6GB used when I dump heap, but now 12GB after running half a month. I don&#39;t understand."},{"owner":{"account_id":1217449,"reputation":4099,"user_id":1184752,"accept_rate":43,"display_name":"Juraj Martinka"},"score":1,"creation_date":1593674063,"post_id":62688008,"comment_id":110863708,"body_markdown":"You could use tools like `jcmd` to quickly look at some GC related statistics. From high-level, the current sizes of Young and Old generations and then class histogram. It&#39;s a bit limited on JDK 8 (**you should really upgrade** to at least JDK 11) but it&#39;s still useful. Run `jcmd &lt;PID&gt;` to check which commands are supported. On My system I&#39;d use `GC.heap_info`, `GCc.class_histogram` and maybe `GC.class_stats`","body":"You could use tools like <code>jcmd</code> to quickly look at some GC related statistics. From high-level, the current sizes of Young and Old generations and then class histogram. It&#39;s a bit limited on JDK 8 (<b>you should really upgrade</b> to at least JDK 11) but it&#39;s still useful. Run <code>jcmd &lt;PID&gt;</code> to check which commands are supported. On My system I&#39;d use <code>GC.heap_info</code>, <code>GCc.class_histogram</code> and maybe <code>GC.class_stats</code>"}],"answers":[{"tags":[],"owner":{"account_id":44499,"reputation":23474,"user_id":130659,"accept_rate":100,"display_name":"AlBlue"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1593674304,"creation_date":1593674304,"answer_id":62690973,"question_id":62688008,"body_markdown":"The occurrence of byte or char arrays in a program is typically due to Strings used by the code. You should be able to see if they are being referenced by String objects by looking at the memory dominators in MAT.\n\nThe use of int arrays is far less common in general code in the JDK so you would need to find where they are being dominated from to find out.\n\nHowever note that in both cases, what you are directly using in your code is not relevant; the usage is most likely from your dependencies under the covers. Whether it’s the JVM classes or some other cache mechanism is likely to depend on where the objects are being referred from, so the next stage is to use the tooling to find that out.","title":"visualvm profiles jvm heap found int array takes huge memory","body":"<p>The occurrence of byte or char arrays in a program is typically due to Strings used by the code. You should be able to see if they are being referenced by String objects by looking at the memory dominators in MAT.</p>\n<p>The use of int arrays is far less common in general code in the JDK so you would need to find where they are being dominated from to find out.</p>\n<p>However note that in both cases, what you are directly using in your code is not relevant; the usage is most likely from your dependencies under the covers. Whether it’s the JVM classes or some other cache mechanism is likely to depend on where the objects are being referred from, so the next stage is to use the tooling to find that out.</p>\n"},{"tags":[],"owner":{"account_id":1618403,"reputation":125,"user_id":1495483,"accept_rate":56,"display_name":"Joshua"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1594100999,"creation_date":1594100999,"answer_id":62768892,"question_id":62688008,"body_markdown":"Thanks to @AlBlue and @JurajMartinka. I analysed the byte[] array and int[] array and found part of the answer.\r\nThe int[] array which have 166921 instance, using 2.6GB memory(57.3%). Most of them have no reference:\r\n[![enter image description here][1]][1]\r\nSome of them are used by kafka:\r\n[![enter image description here][2]][2]\r\nMeanwhile spring boot loader:\r\n[![enter image description here][3]][3]\r\n\r\nOn the other hand, the byte[] array have 39400 instance, using 1.3GB memory(28.8%). Most of them are kafka data:\r\n[![enter image description here][4]][4]\r\nSome are other referred dependencies:\r\n[![enter image description here][5]][5]\r\n\r\nThe real memory using by live objects are not big. MAT(The Eclipse Memory Analyzer tool) shows that only 43.6M are occupied.\r\n[![enter image description here][6]][6]\r\n\r\nYet, there are still many questions needs to find out. Such as when to GC, where is netty used, etc.\r\n\r\n  [1]: https://i.stack.imgur.com/YSTr1.jpg\r\n  [2]: https://i.stack.imgur.com/VXyN0.jpg\r\n  [3]: https://i.stack.imgur.com/iBObF.jpg\r\n  [4]: https://i.stack.imgur.com/BcnvT.jpg\r\n  [5]: https://i.stack.imgur.com/gDNCE.jpg\r\n  [6]: https://i.stack.imgur.com/Y7mM4.jpg","title":"visualvm profiles jvm heap found int array takes huge memory","body":"<p>Thanks to @AlBlue and @JurajMartinka. I analysed the byte[] array and int[] array and found part of the answer.\nThe int[] array which have 166921 instance, using 2.6GB memory(57.3%). Most of them have no reference:\n<a href=\"https://i.stack.imgur.com/YSTr1.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YSTr1.jpg\" alt=\"enter image description here\" /></a>\nSome of them are used by kafka:\n<a href=\"https://i.stack.imgur.com/VXyN0.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VXyN0.jpg\" alt=\"enter image description here\" /></a>\nMeanwhile spring boot loader:\n<a href=\"https://i.stack.imgur.com/iBObF.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iBObF.jpg\" alt=\"enter image description here\" /></a></p>\n<p>On the other hand, the byte[] array have 39400 instance, using 1.3GB memory(28.8%). Most of them are kafka data:\n<a href=\"https://i.stack.imgur.com/BcnvT.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BcnvT.jpg\" alt=\"enter image description here\" /></a>\nSome are other referred dependencies:\n<a href=\"https://i.stack.imgur.com/gDNCE.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gDNCE.jpg\" alt=\"enter image description here\" /></a></p>\n<p>The real memory using by live objects are not big. MAT(The Eclipse Memory Analyzer tool) shows that only 43.6M are occupied.\n<a href=\"https://i.stack.imgur.com/Y7mM4.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Y7mM4.jpg\" alt=\"enter image description here\" /></a></p>\n<p>Yet, there are still many questions needs to find out. Such as when to GC, where is netty used, etc.</p>\n"}],"owner":{"account_id":1618403,"reputation":125,"user_id":1495483,"accept_rate":56,"display_name":"Joshua"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1947,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1635770058,"creation_date":1593656638,"question_id":62688008,"body_markdown":"I have a Spring boot program using OpenJdk (jdk1.8) running at server, consuming about 200 or 300 million data from kafka and write to csv files each day. Less than 2 hours after starts up, it using more than 6GB memory. So I dump heap using jmap histo. And find that int[] array using 2.6GB and byte[] array using 1.3GB.\r\n[![enter image description here][1]][1]\r\nBut I defined neither int[] nor byte[] in my project. I&#39;m using spring kafka(org.springframework.kafka, version2.3.3) consume kafka message, opencsv(com.opencsv, version4.6) write csv. \r\n\r\nAny one knows the reason?\r\n\r\nBelow is part of my code:\r\n\r\n    public &lt;T&gt; Boolean parseDataToFile(String filePath, List&lt;T&gt; data) throws IOException, CsvDataTypeMismatchException, CsvRequiredFieldEmptyException {\r\n        if (data == null || data.size() &lt;= 0) {\r\n            return false;\r\n        }\r\n        File file = new File(filePath);\r\n        //创建父目录\r\n        boolean mkdirs = file.getParentFile().mkdirs();\r\n        Writer writer = null;\r\n        try {\r\n            writer = new FileWriter(filePath, true);\r\n            StatefulBeanToCsv beanToCsv = new StatefulBeanToCsvBuilder(writer).withThrowExceptions(false).withSeparator(&#39;,&#39;).build();\r\n            beanToCsv.write(data);\r\n            return true;\r\n        } finally {\r\n            if (writer != null) {\r\n                    writer.flush();\r\n                    writer.close();\r\n            }\r\n        }\r\n    }\r\n\r\nAddtion: at Instance view, most(more than 90%) of them are none-used([retained size][2] are 0), so it can be GCed? But why not? What are these int[] byte[] data?\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/s77mo.jpg\r\n  [2]: https://www.yourkit.com/docs/java/help/sizes.jsp\r\n  [3]: https://i.stack.imgur.com/F6sk5.jpg","title":"visualvm profiles jvm heap found int array takes huge memory","body":"<p>I have a Spring boot program using OpenJdk (jdk1.8) running at server, consuming about 200 or 300 million data from kafka and write to csv files each day. Less than 2 hours after starts up, it using more than 6GB memory. So I dump heap using jmap histo. And find that int[] array using 2.6GB and byte[] array using 1.3GB.\n<a href=\"https://i.stack.imgur.com/s77mo.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s77mo.jpg\" alt=\"enter image description here\" /></a>\nBut I defined neither int[] nor byte[] in my project. I'm using spring kafka(org.springframework.kafka, version2.3.3) consume kafka message, opencsv(com.opencsv, version4.6) write csv.</p>\n<p>Any one knows the reason?</p>\n<p>Below is part of my code:</p>\n<pre><code>public &lt;T&gt; Boolean parseDataToFile(String filePath, List&lt;T&gt; data) throws IOException, CsvDataTypeMismatchException, CsvRequiredFieldEmptyException {\n    if (data == null || data.size() &lt;= 0) {\n        return false;\n    }\n    File file = new File(filePath);\n    //创建父目录\n    boolean mkdirs = file.getParentFile().mkdirs();\n    Writer writer = null;\n    try {\n        writer = new FileWriter(filePath, true);\n        StatefulBeanToCsv beanToCsv = new StatefulBeanToCsvBuilder(writer).withThrowExceptions(false).withSeparator(',').build();\n        beanToCsv.write(data);\n        return true;\n    } finally {\n        if (writer != null) {\n                writer.flush();\n                writer.close();\n        }\n    }\n}\n</code></pre>\n<p>Addtion: at Instance view, most(more than 90%) of them are none-used(<a href=\"https://www.yourkit.com/docs/java/help/sizes.jsp\" rel=\"nofollow noreferrer\">retained size</a> are 0), so it can be GCed? But why not? What are these int[] byte[] data?\n<a href=\"https://i.stack.imgur.com/F6sk5.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/F6sk5.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","out-of-memory","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1265728147,"creation_date":1265728147,"answer_id":2230030,"question_id":2229990,"body_markdown":"By using `&quot;-Xms512m -Xmx512m&quot;` you gave a *single argument*. `-Xms` expects the minimum heap size to be specified by the rest of the argument. So you defined the minimum heap size to be &quot;512m -Xmx512m&quot;, which is not a valid value.\r\n\r\nYou will want to provide those switches as *two arguments*:\r\n\r\n    set ANT_OPTS=-Xms512m -Xmx512m &quot;-Dos.name=Windows_NT&quot; ...","title":"Problems with java heap space, how to increas the heap size?","body":"<p>By using <code>\"-Xms512m -Xmx512m\"</code> you gave a <em>single argument</em>. <code>-Xms</code> expects the minimum heap size to be specified by the rest of the argument. So you defined the minimum heap size to be \"512m -Xmx512m\", which is not a valid value.</p>\n\n<p>You will want to provide those switches as <em>two arguments</em>:</p>\n\n<pre><code>set ANT_OPTS=-Xms512m -Xmx512m \"-Dos.name=Windows_NT\" ...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11857,"reputation":88771,"user_id":23072,"accept_rate":74,"display_name":"Uri"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1265728285,"creation_date":1265728285,"answer_id":2230051,"question_id":2229990,"body_markdown":"I think that if you&#39;re in windows, you don&#39;t need the double quotes in your set.\r\nHere is an example I saw somewhere:\r\n\r\n    set ANT_OPTS=-Xms512m -Xmx512m  (Windows)\r\n    export ANT_OPTS=&quot;-Xms512m -Xmx512m&quot;  (ksh/bash)\r\n    setenv ANT_OPTS &quot;-Xms512m -Xmx512m&quot;  (tcsh/csh)\r\n\r\nAs for monitoring heap usage, if you are using the most recent JDK on Windows, you should have Sun&#39;s VisualVM.\r\n\r\n","title":"Problems with java heap space, how to increas the heap size?","body":"<p>I think that if you're in windows, you don't need the double quotes in your set.\nHere is an example I saw somewhere:</p>\n\n<pre><code>set ANT_OPTS=-Xms512m -Xmx512m  (Windows)\nexport ANT_OPTS=\"-Xms512m -Xmx512m\"  (ksh/bash)\nsetenv ANT_OPTS \"-Xms512m -Xmx512m\"  (tcsh/csh)\n</code></pre>\n\n<p>As for monitoring heap usage, if you are using the most recent JDK on Windows, you should have Sun's VisualVM.</p>\n"},{"tags":[],"owner":{"account_id":5091102,"reputation":1,"user_id":4084146,"display_name":"jean chen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635770041,"creation_date":1411750364,"answer_id":26064540,"question_id":2229990,"body_markdown":"In eclipse -&gt; window -&gt; preferences -&gt; Tomcat -&gt; JVM Setting -&gt; Append to JVM Parameters:\r\n\r\n```\r\n-XX:MaxPermSize=512m\r\n\r\n-Xms512m\r\n\r\n-Xmx512m\r\n```","title":"Problems with java heap space, how to increas the heap size?","body":"<p>In eclipse -&gt; window -&gt; preferences -&gt; Tomcat -&gt; JVM Setting -&gt; Append to JVM Parameters:</p>\n<pre><code>-XX:MaxPermSize=512m\n\n-Xms512m\n\n-Xmx512m\n</code></pre>\n"}],"owner":{"account_id":12583,"reputation":2826,"user_id":24872,"accept_rate":58,"display_name":"Ikky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10865,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1635770041,"creation_date":1265727802,"question_id":2229990,"body_markdown":"I&#39;m running a &quot;.bat&quot; file which points to asant:\r\n    \r\n    C:\\Sun\\SDK\\bin\\asant Startbds\r\n\r\nasant again points to a xml file i&#39;ve got, build.xml:\r\n\r\n    &lt;target name=&quot;Startbds&quot; description=&quot;Start bds&quot;&gt;\r\n  &lt;java classname=&quot;com.servers.test.bds&quot;&gt;\r\n   &lt;classpath&gt;\r\n    &lt;pathelement path=&quot;.&quot;/&gt;\r\n    &lt;pathelement path=&quot;D:\\jboss-4.0.1sp1\\client\\jbossall-client.jar&quot;/&gt;\r\n    &lt;pathelement path=&quot;D:\\boss-4.0.1sp1\\lib\\endorsed\\xercesImpl.jar&quot;/&gt;\r\n    &lt;pathelement path=&quot;Murm.jar&quot;/&gt;\r\n   &lt;/classpath&gt;\r\n  &lt;/java&gt;\r\n &lt;/target&gt;\r\n\r\n\r\nThis has been fine for now, but now i have added more data, which leads to an out of memory error:\r\n\r\n    java.lang.outOfMemoryError: Java heap space\r\n\r\nSo i&#39;ve tried to increase the heap space by various methods i&#39;ve found while searching around for a solution:\r\n\r\n - cmd: set `ANT_OPTS=-Xms512m -Xmx512m` (did not work, same error message)\r\n - Editing the asant.bat where i edited the line &quot;-set ANT_OPTS&quot; from\r\n\r\n.\r\n\r\n    set ANT_OPTS=&quot;-Dos.name=Windows_NT&quot; -Djava.library.path=%AS_INSTALL%\\lib;%AS_ICU_LIB%;%AS_NSS%&quot; &quot;-Dcom.sun.aas.installRoot=%AS_INSTALL%&quot; &quot;-Dcom.sun.aas.instanceRoot=%AS_INSTALL%&quot; &quot;-Dcom.sun.aas.instanceName=server&quot; &quot;-Dcom.sun.aas.configRoot=%AS_CONFIG%&quot; &quot;-Dcom.sun.aas.processLauncher=SE&quot; &quot;-Dderby.root=%AS_DERBY_INSTALL%&quot;  \r\n\r\nTO\r\n\r\n    set ANT_OPTS=&quot;-Xms512m -Xmx512m&quot; &quot;-Dos.name=Windows_NT&quot; -Djava.library.path=%AS_INSTALL%\\lib;%AS_ICU_LIB%;%AS_NSS%&quot; &quot;-Dcom.sun.aas.installRoot=%AS_INSTALL%&quot; &quot;-Dcom.sun.aas.instanceRoot=%AS_INSTALL%&quot; &quot;-Dcom.sun.aas.instanceName=server&quot; &quot;-Dcom.sun.aas.configRoot=%AS_CONFIG%&quot; &quot;-Dcom.sun.aas.processLauncher=SE&quot; &quot;-Dderby.root=%AS_DERBY_INSTALL%&quot;  \r\n\r\nbut this gave me the error message:\r\n\r\n    &quot;Invalid initial heap size: -Xms512m -Xmx512m\r\n     Could not create the Java virtual machine.&quot;\r\n\r\n\r\nAnyone got an idea of how i should increase the heapsize?\r\nAnd maybe also give a pointer to where i can find a tool to watch the heapsize.\r\n\r\nThanks in advance.\r\n    \r\n","title":"Problems with java heap space, how to increas the heap size?","body":"<p>I'm running a \".bat\" file which points to asant:</p>\n\n<pre><code>C:\\Sun\\SDK\\bin\\asant Startbds\n</code></pre>\n\n<p>asant again points to a xml file i've got, build.xml:</p>\n\n<pre><code>&lt;target name=\"Startbds\" description=\"Start bds\"&gt;\n</code></pre>\n\n<p>\n   \n    \n    \n    \n    \n   \n  \n </p>\n\n<p>This has been fine for now, but now i have added more data, which leads to an out of memory error:</p>\n\n<pre><code>java.lang.outOfMemoryError: Java heap space\n</code></pre>\n\n<p>So i've tried to increase the heap space by various methods i've found while searching around for a solution:</p>\n\n<ul>\n<li>cmd: set <code>ANT_OPTS=-Xms512m -Xmx512m</code> (did not work, same error message)</li>\n<li>Editing the asant.bat where i edited the line \"-set ANT_OPTS\" from</li>\n</ul>\n\n<p>.</p>\n\n<pre><code>set ANT_OPTS=\"-Dos.name=Windows_NT\" -Djava.library.path=%AS_INSTALL%\\lib;%AS_ICU_LIB%;%AS_NSS%\" \"-Dcom.sun.aas.installRoot=%AS_INSTALL%\" \"-Dcom.sun.aas.instanceRoot=%AS_INSTALL%\" \"-Dcom.sun.aas.instanceName=server\" \"-Dcom.sun.aas.configRoot=%AS_CONFIG%\" \"-Dcom.sun.aas.processLauncher=SE\" \"-Dderby.root=%AS_DERBY_INSTALL%\"  \n</code></pre>\n\n<p>TO</p>\n\n<pre><code>set ANT_OPTS=\"-Xms512m -Xmx512m\" \"-Dos.name=Windows_NT\" -Djava.library.path=%AS_INSTALL%\\lib;%AS_ICU_LIB%;%AS_NSS%\" \"-Dcom.sun.aas.installRoot=%AS_INSTALL%\" \"-Dcom.sun.aas.instanceRoot=%AS_INSTALL%\" \"-Dcom.sun.aas.instanceName=server\" \"-Dcom.sun.aas.configRoot=%AS_CONFIG%\" \"-Dcom.sun.aas.processLauncher=SE\" \"-Dderby.root=%AS_DERBY_INSTALL%\"  \n</code></pre>\n\n<p>but this gave me the error message:</p>\n\n<pre><code>\"Invalid initial heap size: -Xms512m -Xmx512m\n Could not create the Java virtual machine.\"\n</code></pre>\n\n<p>Anyone got an idea of how i should increase the heapsize?\nAnd maybe also give a pointer to where i can find a tool to watch the heapsize.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","servlets","out-of-memory","heap-memory","apache-commons-fileupload"],"answers":[{"tags":[],"owner":{"account_id":57484,"reputation":66727,"user_id":172211,"accept_rate":89,"display_name":"Carl Smotricz"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1257616047,"creation_date":1257616047,"answer_id":1693847,"question_id":1693810,"body_markdown":"When dealing with file uploads, especially big ones, you should process those files as streams which you slurp into a medium-size in-memory buffer and copy directly into your output file. The wrong way to do it is to inhale the whole thing into memory before writing it out.\r\n\r\n&lt;a href=&quot;http://commons.apache.org/fileupload/using.html&quot;&gt;The doc on commons-upload&lt;/a&gt; mentions, just below the middle, how to &quot;Process a file upload&quot;. If you remember to copy from the inputstream to the outputstream in reasonably sized chunks (say, 1 MB), you should have no problem.","title":"How can I avoid OutOfMemoryErrors when using Commons FileUpload&#39;s DiskFileItem to upload large files?","body":"<p>When dealing with file uploads, especially big ones, you should process those files as streams which you slurp into a medium-size in-memory buffer and copy directly into your output file. The wrong way to do it is to inhale the whole thing into memory before writing it out.</p>\n\n<p><a href=\"http://commons.apache.org/fileupload/using.html\" rel=\"noreferrer\">The doc on commons-upload</a> mentions, just below the middle, how to \"Process a file upload\". If you remember to copy from the inputstream to the outputstream in reasonably sized chunks (say, 1 MB), you should have no problem.</p>\n"},{"tags":[],"owner":{"account_id":1416326,"reputation":41,"user_id":1341928,"display_name":"Daniel Rejment"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1334765881,"creation_date":1334765881,"answer_id":10213607,"question_id":1693810,"body_markdown":"While Carl Smotricz&#39;s answer is probably better in the general case, the exception you get is a JVM bug that is reported here:\r\n\r\nhttps://bugs.java.com/bugdatabase/view_bug?bug_id=6478546\r\n","title":"How can I avoid OutOfMemoryErrors when using Commons FileUpload&#39;s DiskFileItem to upload large files?","body":"<p>While Carl Smotricz's answer is probably better in the general case, the exception you get is a JVM bug that is reported here:</p>\n<p><a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=6478546\" rel=\"nofollow noreferrer\">https://bugs.java.com/bugdatabase/view_bug?bug_id=6478546</a></p>\n"}],"owner":{"account_id":26862,"reputation":6868,"user_id":70288,"accept_rate":91,"display_name":"Robert Campbell"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9575,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":1693847,"answer_count":2,"score":6,"last_activity_date":1635769951,"creation_date":1257615511,"question_id":1693810,"body_markdown":"I am getting OutOfMemoryErrors when uploading large (&gt;300MB) files to\r\na servlet utilizing Commons FileUpload 1.2.1. It seems odd, because\r\nthe entire point of using DiskFileItem is to prevent the (possibly\r\nlarge) file from residing in memory. I am using the default size\r\nthreshold of 10KB, so that&#39;s all that should ever be loaded into the\r\nheap, right? Here is the partial stack trace:\r\n\r\n    java.lang.OutOfMemoryError\r\n           at java.io.FileInputStream.readBytes(Native Method)\r\n           at java.io.FileInputStream.read(FileInputStream.java:177)\r\n           at org.apache.commons.fileupload.disk.DiskFileItem.get(DiskFileItem.java:334)\r\n           at org.springframework.web.multipart.commons.CommonsMultipartFile.getBytes(CommonsMultipartFile.java:114)\r\n\r\nWhy is this happening? Is there some configuration I&#39;m missing? Any tips/tricks to avoid this situation **besides increasing my heap size**? \r\n\r\nI really shouldn&#39;t have to increase my heap, because in theory the most that should be loaded into memory from this operation is a little over 10KB. Plus, my heap max (-Xmx) is already set for 1GB which should be plenty.","title":"How can I avoid OutOfMemoryErrors when using Commons FileUpload&#39;s DiskFileItem to upload large files?","body":"<p>I am getting OutOfMemoryErrors when uploading large (>300MB) files to\na servlet utilizing Commons FileUpload 1.2.1. It seems odd, because\nthe entire point of using DiskFileItem is to prevent the (possibly\nlarge) file from residing in memory. I am using the default size\nthreshold of 10KB, so that's all that should ever be loaded into the\nheap, right? Here is the partial stack trace:</p>\n\n<pre><code>java.lang.OutOfMemoryError\n       at java.io.FileInputStream.readBytes(Native Method)\n       at java.io.FileInputStream.read(FileInputStream.java:177)\n       at org.apache.commons.fileupload.disk.DiskFileItem.get(DiskFileItem.java:334)\n       at org.springframework.web.multipart.commons.CommonsMultipartFile.getBytes(CommonsMultipartFile.java:114)\n</code></pre>\n\n<p>Why is this happening? Is there some configuration I'm missing? Any tips/tricks to avoid this situation <strong>besides increasing my heap size</strong>? </p>\n\n<p>I really shouldn't have to increase my heap, because in theory the most that should be loaded into memory from this operation is a little over 10KB. Plus, my heap max (-Xmx) is already set for 1GB which should be plenty.</p>\n"},{"tags":["java","jackson","jackson-dataformat-yaml"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1635168707,"post_id":69708940,"comment_id":123216346,"body_markdown":"Is the issue here that it&#39;s expecting an integer, but NaN isn&#39;t a thing with integers? Is it possible just to omit it?","body":"Is the issue here that it&#39;s expecting an integer, but NaN isn&#39;t a thing with integers? Is it possible just to omit it?"},{"owner":{"account_id":4772478,"reputation":262,"user_id":5162458,"display_name":"J. Dimeo"},"score":0,"creation_date":1635169455,"post_id":69708940,"comment_id":123216674,"body_markdown":"Yes, @AndyTurner - it&#39;s expecting a numeric type. I can&#39;t omit it because a) this is kinda a DSL and I want users to be allowed to be explicit vs. implicit and b) in some cases I need the key to be defined even if the value is missing","body":"Yes, @AndyTurner - it&#39;s expecting a numeric type. I can&#39;t omit it because a) this is kinda a DSL and I want users to be allowed to be explicit vs. implicit and b) in some cases I need the key to be defined even if the value is missing"}],"answers":[{"tags":[],"owner":{"account_id":4772478,"reputation":262,"user_id":5162458,"display_name":"J. Dimeo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1635769943,"creation_date":1635769943,"answer_id":69796995,"question_id":69708940,"body_markdown":"I&#39;ve solved this by bypassing the `YAMLMapper` and going to SnakeYAML&#39;s `Yaml` directly. I did this to fix the issue of Jackson not resolving anchors, but then I realized it also solved the `.NaN`/null problem as well- `.NaN`s are now parsed correctly as `Double.NaN`\r\n\r\n```java\r\nstatic final Yaml YAML = new Yaml();\r\nstatic final ObjectMapper MAPPER = new ObjectMapper();\r\n...\r\n\r\n// Use SnakeYAML directly to resolve anchors and handle .NaN\r\nprotected static &lt;T&gt; T load(Path p, Class&lt;T&gt; cls) throws IOException {\r\n\tval yaml = YAML.load(Files.newInputStream(p));\r\n\treturn MAPPER.treeToValue(MAPPER.valueToTree(yaml), cls);\r\n}\r\n```","title":"Jackson + YAML for Not A Number (.NAN)","body":"<p>I've solved this by bypassing the <code>YAMLMapper</code> and going to SnakeYAML's <code>Yaml</code> directly. I did this to fix the issue of Jackson not resolving anchors, but then I realized it also solved the <code>.NaN</code>/null problem as well- <code>.NaN</code>s are now parsed correctly as <code>Double.NaN</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>static final Yaml YAML = new Yaml();\nstatic final ObjectMapper MAPPER = new ObjectMapper();\n...\n\n// Use SnakeYAML directly to resolve anchors and handle .NaN\nprotected static &lt;T&gt; T load(Path p, Class&lt;T&gt; cls) throws IOException {\n    val yaml = YAML.load(Files.newInputStream(p));\n    return MAPPER.treeToValue(MAPPER.valueToTree(yaml), cls);\n}\n</code></pre>\n"}],"owner":{"account_id":4772478,"reputation":262,"user_id":5162458,"display_name":"J. Dimeo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":462,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69796995,"answer_count":1,"score":0,"last_activity_date":1635769943,"creation_date":1635168551,"question_id":69708940,"body_markdown":"Per the YAML spec, Not-a-number is represented as `.NAN`\r\nhttps://yaml.org/refcard.html\r\n\r\nHowever, when deserialized with `jackson-dataformats-text`&#39;s `YAMLMapper`, we get:\r\n&gt; Malformed numeric value &#39;.NAN&#39;\r\n\r\nHow do you tell an `ObjectMapper` to accept a given string as a representing null without diving into custom deserializers? Or is there a YAML-specific feature I should be enabling?\r\n\r\nIf you use `NULL`, it works on the Jackson side, but then it&#39;s no longer valid YAML and schema-aware editors like VS Code know it, which is confusing to end users:\r\n\r\n[![VS code failing to validate null][1]][1]\r\n\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VPJL6.png","title":"Jackson + YAML for Not A Number (.NAN)","body":"<p>Per the YAML spec, Not-a-number is represented as <code>.NAN</code>\n<a href=\"https://yaml.org/refcard.html\" rel=\"nofollow noreferrer\">https://yaml.org/refcard.html</a></p>\n<p>However, when deserialized with <code>jackson-dataformats-text</code>'s <code>YAMLMapper</code>, we get:</p>\n<blockquote>\n<p>Malformed numeric value '.NAN'</p>\n</blockquote>\n<p>How do you tell an <code>ObjectMapper</code> to accept a given string as a representing null without diving into custom deserializers? Or is there a YAML-specific feature I should be enabling?</p>\n<p>If you use <code>NULL</code>, it works on the Jackson side, but then it's no longer valid YAML and schema-aware editors like VS Code know it, which is confusing to end users:</p>\n<p><a href=\"https://i.stack.imgur.com/VPJL6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VPJL6.png\" alt=\"VS code failing to validate null\" /></a></p>\n"},{"tags":["java","queue","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":87016,"reputation":68348,"user_id":241590,"accept_rate":99,"display_name":"stacker"},"score":1,"creation_date":1265114129,"post_id":2183519,"comment_id":2131384,"body_markdown":"Since the discussion is ongoing, you could specify what amout of data is received or streamed whether TCP or UDP is used and whats the frequency of transmission is. These informations would be necessary to suggest a best practice.","body":"Since the discussion is ongoing, you could specify what amout of data is received or streamed whether TCP or UDP is used and whats the frequency of transmission is. These informations would be necessary to suggest a best practice."},{"owner":{"account_id":80110,"reputation":905,"user_id":226733,"accept_rate":100,"display_name":"Nick Hristov"},"score":1,"creation_date":1265129101,"post_id":2183519,"comment_id":2133445,"body_markdown":"Looks like you are doing a lot of copying. You may want to wrap your data as input streams and pass that around instead.","body":"Looks like you are doing a lot of copying. You may want to wrap your data as input streams and pass that around instead."},{"owner":{"account_id":96511,"reputation":8579,"user_id":262296,"accept_rate":91,"display_name":"TiansHUo"},"score":0,"creation_date":1265162652,"post_id":2183519,"comment_id":2137518,"body_markdown":"@stacker: I have no control over the input, I can only control the sampling of the listener.\n\n@Nick: Yeah, I&#39;m doing a lot of copying, and I don&#39;t understand wrapping data as input streams. Could you please explain how and why input streams are better?","body":"@stacker: I have no control over the input, I can only control the sampling of the listener.  @Nick: Yeah, I&#39;m doing a lot of copying, and I don&#39;t understand wrapping data as input streams. Could you please explain how and why input streams are better?"}],"answers":[{"tags":[],"owner":{"account_id":96511,"reputation":8579,"user_id":262296,"accept_rate":91,"display_name":"TiansHUo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1265109586,"creation_date":1265109586,"answer_id":2183551,"question_id":2183519,"body_markdown":"Another way to do this would be to sample the data when queue gets too big, and save the sampling rate so we could simulate the original data.","title":"Java Outofmemory heap space error: How do I make a deque from a vector?","body":"<p>Another way to do this would be to sample the data when queue gets too big, and save the sampling rate so we could simulate the original data.</p>\n"},{"tags":[],"owner":{"account_id":9631,"reputation":7981,"user_id":17876,"accept_rate":70,"display_name":"idrosid"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1265109698,"creation_date":1265109698,"answer_id":2183563,"question_id":2183519,"body_markdown":"If you receive 3000/sec but only process 100/sec sooner or later you will run out of memory.\r\nMay I suggest you use more threads to do the parsing?\r\n\r\nConcerning the queue, have a look at [LinkedBlockingDeque][1] and [LinkedBlockingQueue][2]. There are both high-performance thread-safe queue implementations.\r\n\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingDeque.html\r\n  [2]: http://java.sun.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingQueue.html","title":"Java Outofmemory heap space error: How do I make a deque from a vector?","body":"<p>If you receive 3000/sec but only process 100/sec sooner or later you will run out of memory.\nMay I suggest you use more threads to do the parsing?</p>\n\n<p>Concerning the queue, have a look at <a href=\"http://java.sun.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingDeque.html\" rel=\"nofollow noreferrer\">LinkedBlockingDeque</a> and <a href=\"http://java.sun.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingQueue.html\" rel=\"nofollow noreferrer\">LinkedBlockingQueue</a>. There are both high-performance thread-safe queue implementations.</p>\n"},{"tags":[],"owner":{"account_id":87016,"reputation":68348,"user_id":241590,"accept_rate":99,"display_name":"stacker"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1265109794,"creation_date":1265109794,"answer_id":2183577,"question_id":2183519,"body_markdown":"Since data comes in 30 times faster than it is processed you may extend HeapSize using \r\n\r\n`java -Xms&lt;initial heap size&gt; -Xmx&lt;maximum heap size&gt;` if the transmission is finished before your memory is exhausted.\r\n\r\n- Or as youself suggested dump the data to disc and process delayed. \r\n- Otherwise you would have to optimze your parser","title":"Java Outofmemory heap space error: How do I make a deque from a vector?","body":"<p>Since data comes in 30 times faster than it is processed you may extend HeapSize using </p>\n\n<p><code>java -Xms&lt;initial heap size&gt; -Xmx&lt;maximum heap size&gt;</code> if the transmission is finished before your memory is exhausted.</p>\n\n<ul>\n<li>Or as youself suggested dump the data to disc and process delayed. </li>\n<li>Otherwise you would have to optimze your parser</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":77142,"reputation":9356,"user_id":220381,"accept_rate":75,"display_name":"Ash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1265109804,"creation_date":1265109804,"answer_id":2183580,"question_id":2183519,"body_markdown":"When you run `java`, you can use the `-Xmx` parameter to make more memory available to the virtual machine. For example, `java -Xmx512m` will allow the VM to allocate up to 512Mb of memory. (The default is fairly small).\r\n\r\nBut if you&#39;re allocating memory and filling up a list with data and never removing it, eventually you&#39;re going to run out of memory, no matter which language you&#39;re using.\r\n","title":"Java Outofmemory heap space error: How do I make a deque from a vector?","body":"<p>When you run <code>java</code>, you can use the <code>-Xmx</code> parameter to make more memory available to the virtual machine. For example, <code>java -Xmx512m</code> will allow the VM to allocate up to 512Mb of memory. (The default is fairly small).</p>\n\n<p>But if you're allocating memory and filling up a list with data and never removing it, eventually you're going to run out of memory, no matter which language you're using.</p>\n"},{"tags":[],"owner":{"account_id":14954,"reputation":47917,"user_id":31136,"accept_rate":50,"display_name":"bruno conde"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1265111247,"creation_date":1265109953,"answer_id":2183594,"question_id":2183519,"body_markdown":"If the producer produces more data then the consumer can handle, then the data will start to accumulate and eventually you run into OutOfMemory problems. This will depend on (1) the rate difference between the producer and consumer, (2) the quantity of data you have to process.\r\n\r\nI suggest you limit the number of items in the queue. Use a [`BlockingDeque`][1] -&gt; [`LinkedBlockingDeque`][2] to limit the capacity of the queue and block your loop when the limit is reached. This way, the queue acts as a cache to the parser.\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/concurrent/BlockingDeque.html\r\n  [2]: http://java.sun.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingDeque.html","title":"Java Outofmemory heap space error: How do I make a deque from a vector?","body":"<p>If the producer produces more data then the consumer can handle, then the data will start to accumulate and eventually you run into OutOfMemory problems. This will depend on (1) the rate difference between the producer and consumer, (2) the quantity of data you have to process.</p>\n\n<p>I suggest you limit the number of items in the queue. Use a <a href=\"http://java.sun.com/javase/6/docs/api/java/util/concurrent/BlockingDeque.html\" rel=\"nofollow noreferrer\"><code>BlockingDeque</code></a> -> <a href=\"http://java.sun.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingDeque.html\" rel=\"nofollow noreferrer\"><code>LinkedBlockingDeque</code></a> to limit the capacity of the queue and block your loop when the limit is reached. This way, the queue acts as a cache to the parser.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1265110031,"creation_date":1265110031,"answer_id":2183606,"question_id":2183519,"body_markdown":"&gt; I guess the problem is that queue is made using a linked-list, and all the pointers must be saved in the heap.\r\n\r\nI don&#39;t think so.  I think that the *real* problem is the mismatch between the rate at which your system gets input and the rate that it can process it.  Unless you can process at at least the average input rate, you will eventually run out of memory, no matter how you represent the queue.\r\n\r\nYou must either improve the processing rate, reduce the input rate or ... drop data.","title":"Java Outofmemory heap space error: How do I make a deque from a vector?","body":"<blockquote>\n  <p>I guess the problem is that queue is made using a linked-list, and all the pointers must be saved in the heap.</p>\n</blockquote>\n\n<p>I don't think so.  I think that the <em>real</em> problem is the mismatch between the rate at which your system gets input and the rate that it can process it.  Unless you can process at at least the average input rate, you will eventually run out of memory, no matter how you represent the queue.</p>\n\n<p>You must either improve the processing rate, reduce the input rate or ... drop data.</p>\n"},{"tags":[],"owner":{"account_id":42068,"reputation":20631,"user_id":122441,"accept_rate":70,"display_name":"Hendy Irawan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1517384570,"creation_date":1517384570,"answer_id":48536954,"question_id":2183519,"body_markdown":"I have a theory, the implementation of `ArrayDeque` (at least in Oracle JDK, I&#39;m not sure about Android&#39;s) **seems** to never actually deallocate popped elements.\r\n\r\nIn other words, slots for popped elements are simply nulled. While elements added to the tail will make the &quot;inner array&quot; grow bigger for eternity, which will cause trouble sooner or later.\r\n\r\nThis code from Oracle JDK 1.8.0_144 :\r\n\r\n    public E pollFirst() {\r\n        int h = head;\r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        E result = (E) elements[h];\r\n        // Element is null if deque empty\r\n        if (result == null)\r\n            return null;\r\n        elements[h] = null;     // Must null out slot\r\n        head = (h + 1) &amp; (elements.length - 1);\r\n        return result;\r\n    }\r\n\r\nSpells trouble for me. :(\r\n\r\nIf my analysis is true, it seems that `ArrayDeque` is never intended to be a &quot;real&quot; FIFO queue, and is not suitable for such purpose. (Unfortunately I&#39;m currently needing such purpose right now)\r\n\r\nI&#39;m currently investigating `LinkedList` instead (which also implements `Deque`).","title":"Java Outofmemory heap space error: How do I make a deque from a vector?","body":"<p>I have a theory, the implementation of <code>ArrayDeque</code> (at least in Oracle JDK, I'm not sure about Android's) <strong>seems</strong> to never actually deallocate popped elements.</p>\n\n<p>In other words, slots for popped elements are simply nulled. While elements added to the tail will make the \"inner array\" grow bigger for eternity, which will cause trouble sooner or later.</p>\n\n<p>This code from Oracle JDK 1.8.0_144 :</p>\n\n<pre><code>public E pollFirst() {\n    int h = head;\n    @SuppressWarnings(\"unchecked\")\n    E result = (E) elements[h];\n    // Element is null if deque empty\n    if (result == null)\n        return null;\n    elements[h] = null;     // Must null out slot\n    head = (h + 1) &amp; (elements.length - 1);\n    return result;\n}\n</code></pre>\n\n<p>Spells trouble for me. :(</p>\n\n<p>If my analysis is true, it seems that <code>ArrayDeque</code> is never intended to be a \"real\" FIFO queue, and is not suitable for such purpose. (Unfortunately I'm currently needing such purpose right now)</p>\n\n<p>I'm currently investigating <code>LinkedList</code> instead (which also implements <code>Deque</code>).</p>\n"}],"owner":{"account_id":96511,"reputation":8579,"user_id":262296,"accept_rate":91,"display_name":"TiansHUo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2458,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":2183563,"answer_count":7,"score":4,"last_activity_date":1635769939,"creation_date":1265109245,"question_id":2183519,"body_markdown":"I&#39;m new to Java and really need your help.\r\n\r\nI am presently using a queue&lt;byte[1024]&gt;, a receiver thread puts data into this queue and the parser reads out of this.\r\nBut the problem is the receiver may receive at incredible peak speed, &lt;del&gt;eg. 3000/sec, while the parser only parses at 100/sec.&lt;/del&gt; \r\n\r\n&gt; EDIT:I have checked, the queue first\r\n&gt; stays at 100 or so, and after ten\r\n&gt; seconds it starts to grow at 100 per\r\n&gt; second, and crashes at 2000 or so.\r\n&gt; Could it be possible that there is a\r\n&gt; memory leak?\r\n\r\nMy code (in a tight loop) is \r\n\r\n    byte[] data = new byte[1024];\r\n    System.arraycopy(udpPacket.getData(), 0, data, 0, 1024);\r\n    queue.offer(data);\r\n\r\nThe heap is filled up too quickly, and I get an outofmemory exception. I guess the problem is that queue is made using a linked-list, and all the pointers must be saved in the heap.\r\n\r\nI know a C version that does the same thing(using a buffer) but has much better performance, but because of deployment issues, we can only use Java.","title":"Java Outofmemory heap space error: How do I make a deque from a vector?","body":"<p>I'm new to Java and really need your help.</p>\n\n<p>I am presently using a queue, a receiver thread puts data into this queue and the parser reads out of this.\nBut the problem is the receiver may receive at incredible peak speed, <del>eg. 3000/sec, while the parser only parses at 100/sec.</del> </p>\n\n<blockquote>\n  <p>EDIT:I have checked, the queue first\n  stays at 100 or so, and after ten\n  seconds it starts to grow at 100 per\n  second, and crashes at 2000 or so.\n  Could it be possible that there is a\n  memory leak?</p>\n</blockquote>\n\n<p>My code (in a tight loop) is </p>\n\n<pre><code>byte[] data = new byte[1024];\nSystem.arraycopy(udpPacket.getData(), 0, data, 0, 1024);\nqueue.offer(data);\n</code></pre>\n\n<p>The heap is filled up too quickly, and I get an outofmemory exception. I guess the problem is that queue is made using a linked-list, and all the pointers must be saved in the heap.</p>\n\n<p>I know a C version that does the same thing(using a buffer) but has much better performance, but because of deployment issues, we can only use Java.</p>\n"},{"tags":["java","spring-boot","azure","azure-app-configuration"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1635325790,"post_id":69735659,"comment_id":123264854,"body_markdown":"It seems Spring doesn&#39;t try to parse the json hence &quot;`String` cannot be converted to `Map`&quot;. Btw, `{1, 2, 3}` is _not_ valid json, it should be `[1, 2, 3]`.","body":"It seems Spring doesn&#39;t try to parse the json hence &quot;<code>String</code> cannot be converted to <code>Map</code>&quot;. Btw, <code>{1, 2, 3}</code> is <i>not</i> valid json, it should be <code>[1, 2, 3]</code>."},{"owner":{"account_id":14834590,"reputation":21,"user_id":10713110,"display_name":"suraj jain"},"score":0,"creation_date":1635329180,"post_id":69735659,"comment_id":123266303,"body_markdown":"@Thomas I have changed the JSON but still have the same problem, I want to know is their any annotation or any configuration through which I can read the value in map variable","body":"@Thomas I have changed the JSON but still have the same problem, I want to know is their any annotation or any configuration through which I can read the value in map variable"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1635332884,"post_id":69735659,"comment_id":123267843,"body_markdown":"How are you getting the config from Azure? And what does it return, the json only or everything you&#39;ve provided under &quot;App configuration&quot;?","body":"How are you getting the config from Azure? And what does it return, the json only or everything you&#39;ve provided under &quot;App configuration&quot;?"},{"owner":{"account_id":1219806,"reputation":449,"user_id":1186656,"accept_rate":60,"display_name":"mrm9084"},"score":1,"creation_date":1635369791,"post_id":69735659,"comment_id":123283220,"body_markdown":"@surajjain this seems to be a bug on the App Configuration Client Library. You should report the bug here https://github.com/Azure/AppConfiguration/issues.","body":"@surajjain this seems to be a bug on the App Configuration Client Library. You should report the bug here <a href=\"https://github.com/Azure/AppConfiguration/issues\" rel=\"nofollow noreferrer\">github.com/Azure/AppConfiguration/issues</a>."}],"answers":[{"tags":[],"owner":{"account_id":21681667,"reputation":4284,"user_id":15997690,"display_name":"Delliganesh Sevanesan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635769924,"creation_date":1635769924,"answer_id":69796989,"question_id":69735659,"body_markdown":"Instead of converting string &amp; integer.  You can use as an `object`.\r\n\r\nYou can easily convert object into other datatypes.\r\n\r\n&gt; private Map&lt;String, Map&lt;Integer, List&lt;Integer&gt;&gt;&gt; map;\r\n\r\nYou can use\r\n\r\n    @JsonIgnore\r\n    private Map&lt;String, Object&gt; properties = new HashMap&lt;String, Object&gt;();\r\n\r\nRefer [here](https://stackoverflow.com/a/42519126/15997690)\r\n","title":"Failed to bind properties under &#39;config.map&#39; to java.util.Map&lt;java.lang.String, java.util.Map&lt;java.lang.Integer, java.util.List&lt;java.lang.Integer&gt;&gt;&gt;:","body":"<p>Instead of converting string &amp; integer.  You can use as an <code>object</code>.</p>\n<p>You can easily convert object into other datatypes.</p>\n<blockquote>\n<p>private Map&lt;String, Map&lt;Integer, List&gt;&gt; map;</p>\n</blockquote>\n<p>You can use</p>\n<pre><code>@JsonIgnore\nprivate Map&lt;String, Object&gt; properties = new HashMap&lt;String, Object&gt;();\n</code></pre>\n<p>Refer <a href=\"https://stackoverflow.com/a/42519126/15997690\">here</a></p>\n"}],"owner":{"account_id":14834590,"reputation":21,"user_id":10713110,"display_name":"suraj jain"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2573,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1635769924,"creation_date":1635325069,"question_id":69735659,"body_markdown":"I am using Spring-boot Application where I am able to connect with Azure App Configuration. But getting the error when I try to read value with content-type application/JSON.\r\n\r\nMy Java Class\r\n```\r\n@ConfigurationProperties(prefix = &quot;config&quot;)\r\n    @Getter\r\n    @Setter\r\n    public class AppConfigProperties {\r\n        private String test;\r\n        private Map&lt;String, Map&lt;Integer, List&lt;Integer&gt;&gt;&gt; map;\r\n }\r\n```\r\nApp configuration \r\n```\r\nkey: map\r\nvalue: {&quot;Cream&quot;:{&quot;1&quot;:[2,3,4],&quot;2&quot;:[25]},&quot;Ice&quot;:{&quot;1&quot;:[2,3,4],&quot;2&quot;:[25]}}\r\ncontent type = application/json\r\n```\r\nError :\r\n```\r\n\r\nDescription:\r\n\r\nFailed to bind properties under &#39;config.map&#39; to java.util.Map&lt;java.lang.String, java.util.Map&lt;java.lang.Integer, java.util.List&lt;java.lang.Integer&gt;&gt;&gt;:\r\n\r\n    Reason: No converter found capable of converting from type [java.lang.String] to type [java.util.Map&lt;java.lang.String, java.util.Map&lt;java.lang.Integer, java.util.List&lt;java.lang.Integer&gt;&gt;&gt;]\r\n\r\nAction:\r\n\r\nUpdate your application&#39;s configuration\r\n","title":"Failed to bind properties under &#39;config.map&#39; to java.util.Map&lt;java.lang.String, java.util.Map&lt;java.lang.Integer, java.util.List&lt;java.lang.Integer&gt;&gt;&gt;:","body":"<p>I am using Spring-boot Application where I am able to connect with Azure App Configuration. But getting the error when I try to read value with content-type application/JSON.</p>\n<p>My Java Class</p>\n<pre><code>@ConfigurationProperties(prefix = &quot;config&quot;)\n    @Getter\n    @Setter\n    public class AppConfigProperties {\n        private String test;\n        private Map&lt;String, Map&lt;Integer, List&lt;Integer&gt;&gt;&gt; map;\n }\n</code></pre>\n<p>App configuration</p>\n<pre><code>key: map\nvalue: {&quot;Cream&quot;:{&quot;1&quot;:[2,3,4],&quot;2&quot;:[25]},&quot;Ice&quot;:{&quot;1&quot;:[2,3,4],&quot;2&quot;:[25]}}\ncontent type = application/json\n</code></pre>\n<p>Error :</p>\n<pre><code>\nDescription:\n\nFailed to bind properties under 'config.map' to java.util.Map&lt;java.lang.String, java.util.Map&lt;java.lang.Integer, java.util.List&lt;java.lang.Integer&gt;&gt;&gt;:\n\n    Reason: No converter found capable of converting from type [java.lang.String] to type [java.util.Map&lt;java.lang.String, java.util.Map&lt;java.lang.Integer, java.util.List&lt;java.lang.Integer&gt;&gt;&gt;]\n\nAction:\n\nUpdate your application's configuration\n</code></pre>\n"},{"tags":["java","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":52616,"reputation":1042915,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":0,"creation_date":1268149511,"post_id":2410277,"comment_id":2391012,"body_markdown":"If you quote your `-Xmumble` settings, that will probably help -- perhaps you have an error in your heapspace settings?","body":"If you quote your <code>-Xmumble</code> settings, that will probably help -- perhaps you have an error in your heapspace settings?"},{"owner":{"account_id":12583,"reputation":2826,"user_id":24872,"accept_rate":58,"display_name":"Ikky"},"score":0,"creation_date":1268150087,"post_id":2410277,"comment_id":2391089,"body_markdown":"set ANT_OPTS=&quot;-XX:+HeapDumpOnOutOfMemoryError&quot; &quot;-Xms512m&quot; &quot;-Xmx512m&quot;  ...... etc\n\n\n\nIs it possible to set java heap settings especially for Java? or do i have to set it for the app?","body":"set ANT_OPTS=&quot;-XX:+HeapDumpOnOutOfMemoryError&quot; &quot;-Xms512m&quot; &quot;-Xmx512m&quot;  ...... etc    Is it possible to set java heap settings especially for Java? or do i have to set it for the app?"},{"owner":{"account_id":12583,"reputation":2826,"user_id":24872,"accept_rate":58,"display_name":"Ikky"},"score":0,"creation_date":1268150357,"post_id":2410277,"comment_id":2391145,"body_markdown":"set ANT_OPTS is btw set in Asant.bat","body":"set ANT_OPTS is btw set in Asant.bat"}],"answers":[{"tags":[],"owner":{"account_id":60494,"reputation":34013,"user_id":180659,"accept_rate":54,"display_name":"jarnbjo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1268152166,"creation_date":1268152166,"answer_id":2410633,"question_id":2410277,"body_markdown":"Are you forking the process when running the NARS.jar file? Setting ANT_OPTS will only have effect on the VM running the ant system. If you use the java task to start/fork an additional VM process, the ANT_OPTS settings will not be inherited.\r\n\r\nIf this is the case, set either fork=&quot;false&quot; in the java task (if you are not using any other options, which require fork to be enabled), or set maxmemory=&quot;512m&quot;.","title":"Getting Out Of Memory: Java heap space, but while viewing heap space it max uses 50 MB","body":"<p>Are you forking the process when running the NARS.jar file? Setting ANT_OPTS will only have effect on the VM running the ant system. If you use the java task to start/fork an additional VM process, the ANT_OPTS settings will not be inherited.</p>\n\n<p>If this is the case, set either fork=\"false\" in the java task (if you are not using any other options, which require fork to be enabled), or set maxmemory=\"512m\".</p>\n"},{"tags":[],"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1269957701,"creation_date":1269957701,"answer_id":2545774,"question_id":2410277,"body_markdown":"XML files are notorious memory hogs since the DOM representation can often require ten times their size on disk.\r\n\r\nMy guess is that this is where you hit the limit.  Is there a stack trace with the out of memory exception?","title":"Getting Out Of Memory: Java heap space, but while viewing heap space it max uses 50 MB","body":"<p>XML files are notorious memory hogs since the DOM representation can often require ten times their size on disk.</p>\n\n<p>My guess is that this is where you hit the limit.  Is there a stack trace with the out of memory exception?</p>\n"},{"tags":[],"owner":{"account_id":192503,"reputation":71,"user_id":433682,"display_name":"Vanessa Williams"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1283004771,"creation_date":1283004771,"answer_id":3591030,"question_id":2410277,"body_markdown":"Your app may be trying to allocate memory that exceeds your 512m limit, thus you see an outofmemory error even though only 50m is being used. To test this, I would set:\r\n\r\n-Xms512m -Xmx1024m\r\n\r\nAnd see what happens. I would also try a smaller test file, say 1g. Keep reducing the file size until you stop seeing the error. If you succeed, then the trouble is that what you&#39;re trying to do and the way you&#39;re trying to do it takes too much memory. Time to look for an alternate approach. ","title":"Getting Out Of Memory: Java heap space, but while viewing heap space it max uses 50 MB","body":"<p>Your app may be trying to allocate memory that exceeds your 512m limit, thus you see an outofmemory error even though only 50m is being used. To test this, I would set:</p>\n\n<p>-Xms512m -Xmx1024m</p>\n\n<p>And see what happens. I would also try a smaller test file, say 1g. Keep reducing the file size until you stop seeing the error. If you succeed, then the trouble is that what you're trying to do and the way you're trying to do it takes too much memory. Time to look for an alternate approach. </p>\n"}],"owner":{"account_id":12583,"reputation":2826,"user_id":24872,"accept_rate":58,"display_name":"Ikky"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1440,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1635769787,"creation_date":1268149390,"question_id":2410277,"body_markdown":"I&#39;m using ASANT to run a xml file which points to a NARS.jar file. (i do not have the project file of the NARS.jar)\r\n\r\nI&#39;m getting &quot;java.lang.OutOfMemoryError: Java heap space.\r\n\r\nI used VisualVM to look at the heap while running the NARS.jar, and it says that it max uses 50 MB of the heapspace.\r\n\r\nI&#39;ve set the initial and max size of heapspace to 512 MB.\r\n\r\nDoes anyone have an ide of what could be wrong?\r\n\r\nI got 1 GB physical Memory and created a 5 GB pagefile (for test purpose).\r\n\r\nThanks in advance.\r\n","title":"Getting Out Of Memory: Java heap space, but while viewing heap space it max uses 50 MB","body":"<p>I'm using ASANT to run a xml file which points to a NARS.jar file. (i do not have the project file of the NARS.jar)</p>\n\n<p>I'm getting \"java.lang.OutOfMemoryError: Java heap space.</p>\n\n<p>I used VisualVM to look at the heap while running the NARS.jar, and it says that it max uses 50 MB of the heapspace.</p>\n\n<p>I've set the initial and max size of heapspace to 512 MB.</p>\n\n<p>Does anyone have an ide of what could be wrong?</p>\n\n<p>I got 1 GB physical Memory and created a 5 GB pagefile (for test purpose).</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","string","out-of-memory","heap-memory","stringbuilder"],"comments":[{"owner":{"account_id":77142,"reputation":9356,"user_id":220381,"accept_rate":75,"display_name":"Ash"},"score":2,"creation_date":1268377771,"post_id":2431040,"comment_id":2415263,"body_markdown":"How big is a &quot;large file&quot;? It may be that you&#39;re just not allocating enough memory to the JVM.","body":"How big is a &quot;large file&quot;? It may be that you&#39;re just not allocating enough memory to the JVM."},{"owner":{"account_id":109707,"reputation":1139,"user_id":290570,"accept_rate":94,"display_name":"Artsiom Anisimau"},"score":0,"creation_date":1268378183,"post_id":2431040,"comment_id":2415287,"body_markdown":"Show error text for further investigations.","body":"Show error text for further investigations."},{"owner":{"account_id":348658,"reputation":2994,"user_id":683482,"accept_rate":77,"display_name":"Jeff Bootsholz"},"score":0,"creation_date":1373342593,"post_id":2431040,"comment_id":25509534,"body_markdown":"how about the pure String of \nOString Length: 2769348 ? \n\nMost of the String is the nexString of the photos captured","body":"how about the pure String of  OString Length: 2769348 ?   Most of the String is the nexString of the photos captured"}],"answers":[{"tags":[],"owner":{"account_id":62111,"reputation":40153,"user_id":184730,"accept_rate":72,"display_name":"fastcodejava"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1268377792,"creation_date":1268377792,"answer_id":2431049,"question_id":2431040,"body_markdown":"You could try returning a `StringBuffer` and setting it to `null` after use.","title":"java outOfMemoryError with stringbuilder","body":"<p>You could try returning a <code>StringBuffer</code> and setting it to <code>null</code> after use.</p>\n"},{"tags":[],"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1268378413,"creation_date":1268378413,"answer_id":2431094,"question_id":2431040,"body_markdown":"Written this way, you&#39;ll need roughly **6** bytes of memory for every character in the file. \r\n\r\nEach character is two bytes. You have the raw input, the substituted output (in the buffer), and you are asking for a third copy when you run out of memory.\r\n\r\nIf the file is encoded in something like ASCII or ISO-8859-1 (a single-byte character encoding), that means it will be six times larger in memory than on disk.\r\n\r\nYou could allocate more memory to the process, but a better solution might be to process the input &quot;streamwise&quot;&amp;mdash;read, scan, and write the data without loading it all into memory at once.","title":"java outOfMemoryError with stringbuilder","body":"<p>Written this way, you'll need roughly <strong>6</strong> bytes of memory for every character in the file. </p>\n\n<p>Each character is two bytes. You have the raw input, the substituted output (in the buffer), and you are asking for a third copy when you run out of memory.</p>\n\n<p>If the file is encoded in something like ASCII or ISO-8859-1 (a single-byte character encoding), that means it will be six times larger in memory than on disk.</p>\n\n<p>You could allocate more memory to the process, but a better solution might be to process the input \"streamwise\"&mdash;read, scan, and write the data without loading it all into memory at once.</p>\n"},{"tags":[],"owner":{"account_id":31550,"reputation":3425,"user_id":86733,"accept_rate":88,"display_name":"bryantsai"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1268378816,"creation_date":1268378816,"answer_id":2431125,"question_id":2431040,"body_markdown":"If your files to be processed are all very large, say more than a few hundred MB, then you really should go with stream processing instead of this &quot;loading all into memory&quot; way, just as @erickson suggested.\r\n\r\nOtherwise, there are a few things you could try, all to reduce memory usage as much as possible:\r\n\r\n 1. Try properly enlarge your heap size if not yet (when applicable).\r\n 1. Give `StringBuffer` an initial size same as the lenght of the given `String` `buffer`. This should reduce the unnecessary memory usage while expanding the `StringBuffer` in the process. I assume it is only replacing certain words of the original string and should be more or less the same in length.\r\n 1. If possible, maybe you could return the generated `StringBuffer` object instead. Calling its `toString()` only after you get rid of the original `String` object.","title":"java outOfMemoryError with stringbuilder","body":"<p>If your files to be processed are all very large, say more than a few hundred MB, then you really should go with stream processing instead of this \"loading all into memory\" way, just as @erickson suggested.</p>\n\n<p>Otherwise, there are a few things you could try, all to reduce memory usage as much as possible:</p>\n\n<ol>\n<li>Try properly enlarge your heap size if not yet (when applicable).</li>\n<li>Give <code>StringBuffer</code> an initial size same as the lenght of the given <code>String</code> <code>buffer</code>. This should reduce the unnecessary memory usage while expanding the <code>StringBuffer</code> in the process. I assume it is only replacing certain words of the original string and should be more or less the same in length.</li>\n<li>If possible, maybe you could return the generated <code>StringBuffer</code> object instead. Calling its <code>toString()</code> only after you get rid of the original <code>String</code> object.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":11848,"reputation":9165,"user_id":23056,"accept_rate":100,"display_name":"nicerobot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1268378974,"creation_date":1268378974,"answer_id":2431131,"question_id":2431040,"body_markdown":"I agree with the other responses ... but ... simply because the exception occurs there doesn&#39;t _necessarily_ mean it&#39;s the problem. You may very well be [leaking memory][1] elsewhere and that just happens to be the place that it&#39;s revealed. You should run a [profiler][2] to examine memory usage and verify exactly what objects aren&#39;t being collected.\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/webnotes/trouble/TSG-VM/html/memleaks.html\r\n  [2]: http://profiler.netbeans.org/","title":"java outOfMemoryError with stringbuilder","body":"<p>I agree with the other responses ... but ... simply because the exception occurs there doesn't <em>necessarily</em> mean it's the problem. You may very well be <a href=\"http://java.sun.com/javase/6/webnotes/trouble/TSG-VM/html/memleaks.html\" rel=\"nofollow noreferrer\">leaking memory</a> elsewhere and that just happens to be the place that it's revealed. You should run a <a href=\"http://profiler.netbeans.org/\" rel=\"nofollow noreferrer\">profiler</a> to examine memory usage and verify exactly what objects aren't being collected.</p>\n"},{"tags":[],"owner":{"account_id":200939,"reputation":324,"user_id":447096,"display_name":"Mohammed"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1284710214,"creation_date":1284710214,"answer_id":3733569,"question_id":2431040,"body_markdown":"I reckon the problem with `StringBuilder.append()`. When Matcher appends sequence of characters to the Builder.\r\n\r\nAs explained in article about [OutOfMemoryError with StringBuilder/StringBuffer][1], it is a known issue that append() will double the capacity if internal buffer `chars` if the capacity is not sufficient.\r\nGo for streams as suggested by Erickson.\r\n\r\n\r\n  [1]: http://mohammed-technical.blogspot.com/2010/09/javalangoutofmemoryerror-with.html","title":"java outOfMemoryError with stringbuilder","body":"<p>I reckon the problem with <code>StringBuilder.append()</code>. When Matcher appends sequence of characters to the Builder.</p>\n\n<p>As explained in article about <a href=\"http://mohammed-technical.blogspot.com/2010/09/javalangoutofmemoryerror-with.html\" rel=\"nofollow noreferrer\">OutOfMemoryError with StringBuilder/StringBuffer</a>, it is a known issue that append() will double the capacity if internal buffer <code>chars</code> if the capacity is not sufficient.\nGo for streams as suggested by Erickson.</p>\n"},{"tags":[],"owner":{"account_id":211705,"reputation":11,"user_id":464034,"display_name":"user464034"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1285948313,"creation_date":1285948313,"answer_id":3840838,"question_id":2431040,"body_markdown":"Yes! Don&#39;t buffer in memory otherwise you&#39;ll run out of it specially if you&#39;re going over 2MB on I/O.\r\n\r\nRecommended link for fixing and appending text: http://java.ittoolbox.com/documents/appending-data-to-a-file-18786","title":"java outOfMemoryError with stringbuilder","body":"<p>Yes! Don't buffer in memory otherwise you'll run out of it specially if you're going over 2MB on I/O.</p>\n\n<p>Recommended link for fixing and appending text: <a href=\"http://java.ittoolbox.com/documents/appending-data-to-a-file-18786\" rel=\"nofollow\">http://java.ittoolbox.com/documents/appending-data-to-a-file-18786</a></p>\n"}],"owner":{"account_id":103283,"reputation":872,"user_id":276712,"accept_rate":93,"display_name":"user276712"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41051,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":2431094,"answer_count":6,"score":8,"last_activity_date":1635769755,"creation_date":1268377619,"question_id":2431040,"body_markdown":"I&#39;m getting a java outOfMemoryError when I call this method - i&#39;m using it in a loop to parse many large files in sequence. my guess is that `result.toString()` is not getting garbage collected properly during the loop. if so, how should i fix it?\r\n\r\n\r\n    private String matchHelper(String buffer, String regex, String method){\r\n        Pattern abbrev_p = Pattern.compile(regex);//norms U.S.A., B.S., PH.D, PH.D.\r\n        Matcher abbrev_matcher = abbrev_p.matcher(buffer);\r\n        StringBuffer result = new StringBuffer();\r\n        while (abbrev_matcher.find()){\r\n                abbrev_matcher.appendReplacement(result, abbrevHelper(abbrev_matcher));\r\n        }\r\n        abbrev_matcher.appendTail(result);\r\n        String tempResult = result.toString(); //ERROR OCCURS HERE\r\n      return tempResult;\r\n\r\n    }","title":"java outOfMemoryError with stringbuilder","body":"<p>I'm getting a java outOfMemoryError when I call this method - i'm using it in a loop to parse many large files in sequence. my guess is that <code>result.toString()</code> is not getting garbage collected properly during the loop. if so, how should i fix it?</p>\n\n<pre><code>private String matchHelper(String buffer, String regex, String method){\n    Pattern abbrev_p = Pattern.compile(regex);//norms U.S.A., B.S., PH.D, PH.D.\n    Matcher abbrev_matcher = abbrev_p.matcher(buffer);\n    StringBuffer result = new StringBuffer();\n    while (abbrev_matcher.find()){\n            abbrev_matcher.appendReplacement(result, abbrevHelper(abbrev_matcher));\n    }\n    abbrev_matcher.appendTail(result);\n    String tempResult = result.toString(); //ERROR OCCURS HERE\n  return tempResult;\n\n}\n</code></pre>\n"},{"tags":["java","windows","neo4j","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":16716,"reputation":4321,"user_id":36710,"display_name":"nawroth"},"score":0,"creation_date":1275037178,"post_id":2927329,"comment_id":2981008,"body_markdown":"To begin with, moving the transaction to the outer loop improves speed a lot. Then there&#39;s the [batch inserter](http://wiki.neo4j.org/content/Batch_Insert). There&#39;s some [configuration settings](http://wiki.neo4j.org/content/Configuration_Settings) you could apply. Still, I don&#39;t know what&#39;s causing the error in this case (but it seems Windows-related, couldn&#39;t confirm it using Linux).","body":"To begin with, moving the transaction to the outer loop improves speed a lot. Then there&#39;s the <a href=\"http://wiki.neo4j.org/content/Batch_Insert\" rel=\"nofollow noreferrer\">batch inserter</a>. There&#39;s some <a href=\"http://wiki.neo4j.org/content/Configuration_Settings\" rel=\"nofollow noreferrer\">configuration settings</a> you could apply. Still, I don&#39;t know what&#39;s causing the error in this case (but it seems Windows-related, couldn&#39;t confirm it using Linux)."}],"answers":[{"tags":[],"owner":{"account_id":21843,"reputation":1700,"user_id":53404,"display_name":"Peter Neubauer"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1275040191,"creation_date":1275040191,"answer_id":2928007,"question_id":2927329,"body_markdown":"this is a configuration issue on Windows, where Neo4j cannot use memory mapped buffers. Instead, a Java Buffer on the heap is created. In 1.0 this buffer was 470MB per default, which is more than the default heap for the Windows JVM. You have two options:\r\n\r\n1. Switch to APOC 1.1-SNAPSHOT instead of 1.0 in your pom.xml which has an autoconfiguration, assigning max 50% of the available JVM heap to Neo4j\r\n\r\n\r\n\r\n2. Adjust the JVM heap to more (e.g. 512Mb) by running Java with\r\n\r\n    java -Xmx512m ....\r\n\r\n   You can even insert that under JVM arguments in the Run Configurations in Eclipse\r\n\r\nLet us know if this helps!\r\n\r\nAlso, doing a full transaction for every node pair is going to take a long time. Try opening a transaction in the first loop and do commits only every 1000 node pairs?\r\n\r\n/peter\r\n\r\n","title":"Neo4j OutOfMemory problem","body":"<p>this is a configuration issue on Windows, where Neo4j cannot use memory mapped buffers. Instead, a Java Buffer on the heap is created. In 1.0 this buffer was 470MB per default, which is more than the default heap for the Windows JVM. You have two options:</p>\n\n<ol>\n<li><p>Switch to APOC 1.1-SNAPSHOT instead of 1.0 in your pom.xml which has an autoconfiguration, assigning max 50% of the available JVM heap to Neo4j</p></li>\n<li><p>Adjust the JVM heap to more (e.g. 512Mb) by running Java with</p>\n\n<p>java -Xmx512m ....</p>\n\n<p>You can even insert that under JVM arguments in the Run Configurations in Eclipse</p></li>\n</ol>\n\n<p>Let us know if this helps!</p>\n\n<p>Also, doing a full transaction for every node pair is going to take a long time. Try opening a transaction in the first loop and do commits only every 1000 node pairs?</p>\n\n<p>/peter</p>\n"}],"owner":{"account_id":143888,"reputation":6674,"user_id":352555,"accept_rate":86,"display_name":"Edward83"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3208,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":2928007,"answer_count":1,"score":10,"last_activity_date":1635769736,"creation_date":1275031997,"question_id":2927329,"body_markdown":"This is my source code of Main.java. It was grabbed from neo4j-apoc-1.0 examples. The goal of modification to store 1M records of 2 nodes and 1 relation:\r\n\r\n    package javaapplication2;\r\n\r\n    import org.neo4j.graphdb.GraphDatabaseService;\r\n    import org.neo4j.graphdb.Node;\r\n    import org.neo4j.graphdb.RelationshipType;\r\n    import org.neo4j.graphdb.Transaction;\r\n    import org.neo4j.kernel.EmbeddedGraphDatabase;\r\n\r\n\r\n    public class Main\r\n    {\r\n        private static final String DB_PATH = &quot;neo4j-store-1M&quot;;\r\n        private static final String NAME_KEY = &quot;name&quot;;\r\n\r\n        private static enum ExampleRelationshipTypes implements RelationshipType\r\n        {\r\n            EXAMPLE\r\n        }\r\n\r\n        public static void main(String[] args)\r\n        {\r\n            GraphDatabaseService graphDb = null;\r\n\r\n            try\r\n            {\r\n                System.out.println( &quot;Init database...&quot; );\r\n\r\n\r\n                graphDb = new EmbeddedGraphDatabase( DB_PATH );\r\n\r\n                registerShutdownHook( graphDb );\r\n\r\n\r\n                System.out.println( &quot;Start of creating database...&quot; );\r\n\r\n\r\n                int valIndex = 0;\r\n\r\n                for(int i=0; i&lt;1000; ++i)\r\n                {\r\n                    for(int j=0; j&lt;1000; ++j)\r\n                    {\r\n                        Transaction tx = graphDb.beginTx();\r\n\r\n                        try\r\n                        {\r\n                            Node firstNode = graphDb.createNode();\r\n\t\t\t    firstNode.setProperty( NAME_KEY, &quot;Hello&quot; + valIndex );\r\n\r\n                            Node secondNode = graphDb.createNode();\r\n\t\t\t    secondNode.setProperty( NAME_KEY, &quot;World&quot; + valIndex );\r\n\r\n                            firstNode.createRelationshipTo(\r\n                               secondNode, ExampleRelationshipTypes.EXAMPLE );\r\n\r\n                            tx.success();\r\n\r\n                            ++valIndex;\r\n                        }\r\n                        finally\r\n                        {\r\n                            tx.finish();\r\n                        }\r\n                    }\r\n                }\r\n\r\n                System.out.println(&quot;Ok, client processing finished!&quot;);\r\n            }\r\n            finally\r\n            {\r\n                System.out.println( &quot;Shutting down database ...&quot; );\r\n\r\n                graphDb.shutdown();\r\n            }\r\n        }\r\n\r\n        private static void registerShutdownHook( final GraphDatabaseService graphDb )\r\n        {\r\n            // Registers a shutdown hook for the Neo4j instance so that it\r\n            // shuts down nicely when the VM exits (even if you &quot;Ctrl-C&quot; the\r\n            // running example before it&#39;s completed)\r\n            Runtime.getRuntime().addShutdownHook( new Thread()\r\n            {\r\n                @Override\r\n                public void run()\r\n                {\r\n                    graphDb.shutdown();\r\n                }\r\n            } );\r\n        }\r\n    }\r\n\r\nAfter a few iterations (around 150K) I got error message:\r\n\r\n&quot;java.lang.OutOfMemoryError: Java heap space\r\n        at java.nio.HeapByteBuffer.&lt;init&gt;(HeapByteBuffer.java:39)\r\n        at java.nio.ByteBuffer.allocate(ByteBuffer.java:312)\r\n        at org.neo4j.kernel.impl.nioneo.store.PlainPersistenceWindow.&lt;init&gt;(PlainPersistenceWindow.java:30)\r\n        at org.neo4j.kernel.impl.nioneo.store.PersistenceWindowPool.allocateNewWindow(PersistenceWindowPool.java:534)\r\n        at org.neo4j.kernel.impl.nioneo.store.PersistenceWindowPool.refreshBricks(PersistenceWindowPool.java:430)\r\n        at org.neo4j.kernel.impl.nioneo.store.PersistenceWindowPool.acquire(PersistenceWindowPool.java:122)\r\n        at org.neo4j.kernel.impl.nioneo.store.CommonAbstractStore.acquireWindow(CommonAbstractStore.java:459)\r\n        at org.neo4j.kernel.impl.nioneo.store.AbstractDynamicStore.updateRecord(AbstractDynamicStore.java:240)\r\n        at org.neo4j.kernel.impl.nioneo.store.PropertyStore.updateRecord(PropertyStore.java:209)\r\n        at org.neo4j.kernel.impl.nioneo.xa.Command$PropertyCommand.execute(Command.java:513)\r\n        at org.neo4j.kernel.impl.nioneo.xa.NeoTransaction.doCommit(NeoTransaction.java:443)\r\n        at org.neo4j.kernel.impl.transaction.xaframework.XaTransaction.commit(XaTransaction.java:316)\r\n        at org.neo4j.kernel.impl.transaction.xaframework.XaResourceManager.commit(XaResourceManager.java:399)\r\n        at org.neo4j.kernel.impl.transaction.xaframework.XaResourceHelpImpl.commit(XaResourceHelpImpl.java:64)\r\n        at org.neo4j.kernel.impl.transaction.TransactionImpl.doCommit(TransactionImpl.java:514)\r\n        at org.neo4j.kernel.impl.transaction.TxManager.commit(TxManager.java:571)\r\n        at org.neo4j.kernel.impl.transaction.TxManager.commit(TxManager.java:543)\r\n        at org.neo4j.kernel.impl.transaction.TransactionImpl.commit(TransactionImpl.java:102)\r\n        at org.neo4j.kernel.EmbeddedGraphDbImpl$TransactionImpl.finish(EmbeddedGraphDbImpl.java:329)\r\n        at javaapplication2.Main.main(Main.java:62)\r\n28.05.2010 9:52:14 org.neo4j.kernel.impl.nioneo.store.PersistenceWindowPool logWarn\r\nWARNING: [neo4j-store-1M\\neostore.propertystore.db.strings] Unable to allocate direct buffer&quot;\r\n\r\n\r\nGuys! Help me plzzz, what I did wrong, how can I repair it? Tested on platform Windows XP 32bit SP3. Maybe solution within creation custom configuration?\r\n\r\nthnx 4 every advice!\r\n","title":"Neo4j OutOfMemory problem","body":"<p>This is my source code of Main.java. It was grabbed from neo4j-apoc-1.0 examples. The goal of modification to store 1M records of 2 nodes and 1 relation:</p>\n\n<pre><code>package javaapplication2;\n\nimport org.neo4j.graphdb.GraphDatabaseService;\nimport org.neo4j.graphdb.Node;\nimport org.neo4j.graphdb.RelationshipType;\nimport org.neo4j.graphdb.Transaction;\nimport org.neo4j.kernel.EmbeddedGraphDatabase;\n\n\npublic class Main\n{\n    private static final String DB_PATH = \"neo4j-store-1M\";\n    private static final String NAME_KEY = \"name\";\n\n    private static enum ExampleRelationshipTypes implements RelationshipType\n    {\n        EXAMPLE\n    }\n\n    public static void main(String[] args)\n    {\n        GraphDatabaseService graphDb = null;\n\n        try\n        {\n            System.out.println( \"Init database...\" );\n\n\n            graphDb = new EmbeddedGraphDatabase( DB_PATH );\n\n            registerShutdownHook( graphDb );\n\n\n            System.out.println( \"Start of creating database...\" );\n\n\n            int valIndex = 0;\n\n            for(int i=0; i&lt;1000; ++i)\n            {\n                for(int j=0; j&lt;1000; ++j)\n                {\n                    Transaction tx = graphDb.beginTx();\n\n                    try\n                    {\n                        Node firstNode = graphDb.createNode();\n            firstNode.setProperty( NAME_KEY, \"Hello\" + valIndex );\n\n                        Node secondNode = graphDb.createNode();\n            secondNode.setProperty( NAME_KEY, \"World\" + valIndex );\n\n                        firstNode.createRelationshipTo(\n                           secondNode, ExampleRelationshipTypes.EXAMPLE );\n\n                        tx.success();\n\n                        ++valIndex;\n                    }\n                    finally\n                    {\n                        tx.finish();\n                    }\n                }\n            }\n\n            System.out.println(\"Ok, client processing finished!\");\n        }\n        finally\n        {\n            System.out.println( \"Shutting down database ...\" );\n\n            graphDb.shutdown();\n        }\n    }\n\n    private static void registerShutdownHook( final GraphDatabaseService graphDb )\n    {\n        // Registers a shutdown hook for the Neo4j instance so that it\n        // shuts down nicely when the VM exits (even if you \"Ctrl-C\" the\n        // running example before it's completed)\n        Runtime.getRuntime().addShutdownHook( new Thread()\n        {\n            @Override\n            public void run()\n            {\n                graphDb.shutdown();\n            }\n        } );\n    }\n}\n</code></pre>\n\n<p>After a few iterations (around 150K) I got error message:</p>\n\n<p>\"java.lang.OutOfMemoryError: Java heap space\n        at java.nio.HeapByteBuffer.(HeapByteBuffer.java:39)\n        at java.nio.ByteBuffer.allocate(ByteBuffer.java:312)\n        at org.neo4j.kernel.impl.nioneo.store.PlainPersistenceWindow.(PlainPersistenceWindow.java:30)\n        at org.neo4j.kernel.impl.nioneo.store.PersistenceWindowPool.allocateNewWindow(PersistenceWindowPool.java:534)\n        at org.neo4j.kernel.impl.nioneo.store.PersistenceWindowPool.refreshBricks(PersistenceWindowPool.java:430)\n        at org.neo4j.kernel.impl.nioneo.store.PersistenceWindowPool.acquire(PersistenceWindowPool.java:122)\n        at org.neo4j.kernel.impl.nioneo.store.CommonAbstractStore.acquireWindow(CommonAbstractStore.java:459)\n        at org.neo4j.kernel.impl.nioneo.store.AbstractDynamicStore.updateRecord(AbstractDynamicStore.java:240)\n        at org.neo4j.kernel.impl.nioneo.store.PropertyStore.updateRecord(PropertyStore.java:209)\n        at org.neo4j.kernel.impl.nioneo.xa.Command$PropertyCommand.execute(Command.java:513)\n        at org.neo4j.kernel.impl.nioneo.xa.NeoTransaction.doCommit(NeoTransaction.java:443)\n        at org.neo4j.kernel.impl.transaction.xaframework.XaTransaction.commit(XaTransaction.java:316)\n        at org.neo4j.kernel.impl.transaction.xaframework.XaResourceManager.commit(XaResourceManager.java:399)\n        at org.neo4j.kernel.impl.transaction.xaframework.XaResourceHelpImpl.commit(XaResourceHelpImpl.java:64)\n        at org.neo4j.kernel.impl.transaction.TransactionImpl.doCommit(TransactionImpl.java:514)\n        at org.neo4j.kernel.impl.transaction.TxManager.commit(TxManager.java:571)\n        at org.neo4j.kernel.impl.transaction.TxManager.commit(TxManager.java:543)\n        at org.neo4j.kernel.impl.transaction.TransactionImpl.commit(TransactionImpl.java:102)\n        at org.neo4j.kernel.EmbeddedGraphDbImpl$TransactionImpl.finish(EmbeddedGraphDbImpl.java:329)\n        at javaapplication2.Main.main(Main.java:62)\n28.05.2010 9:52:14 org.neo4j.kernel.impl.nioneo.store.PersistenceWindowPool logWarn\nWARNING: [neo4j-store-1M\\neostore.propertystore.db.strings] Unable to allocate direct buffer\"</p>\n\n<p>Guys! Help me plzzz, what I did wrong, how can I repair it? Tested on platform Windows XP 32bit SP3. Maybe solution within creation custom configuration?</p>\n\n<p>thnx 4 every advice!</p>\n"},{"tags":["java","database","memory-management","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":61566,"reputation":68924,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"score":0,"creation_date":1294777453,"post_id":4661963,"comment_id":5136224,"body_markdown":"Yes, fitting a graph of this size into a single VM will get cramped. And no, there are a lot of ways other than a relational database that can hold and work with that much data. Which way is appropriate in your case depends on what you want to do with the data, and what your performance requirements are. Perpahs you can even create the data as you need it, avoiding the need to store it in its entirety?","body":"Yes, fitting a graph of this size into a single VM will get cramped. And no, there are a lot of ways other than a relational database that can hold and work with that much data. Which way is appropriate in your case depends on what you want to do with the data, and what your performance requirements are. Perpahs you can even create the data as you need it, avoiding the need to store it in its entirety?"},{"owner":{"account_id":277686,"reputation":179,"user_id":571817,"accept_rate":31,"display_name":"Eddie"},"score":0,"creation_date":1294778730,"post_id":4661963,"comment_id":5136478,"body_markdown":"The need to store it in its entirety is to eventually have multiple areas where some Users from area 1 can have a friend from area 42.  I suppose that storing it in memory wont be an option at that point.  At this point I just have to model this information.  The project calls for a realistic model of a social network.  Any structures i should research that you know of off hand?","body":"The need to store it in its entirety is to eventually have multiple areas where some Users from area 1 can have a friend from area 42.  I suppose that storing it in memory wont be an option at that point.  At this point I just have to model this information.  The project calls for a realistic model of a social network.  Any structures i should research that you know of off hand?"},{"owner":{"account_id":16294,"reputation":15857,"user_id":35306,"accept_rate":70,"display_name":"Stephan Eggermont"},"score":0,"creation_date":1294784427,"post_id":4661963,"comment_id":5137678,"body_markdown":"Storing in memory can go very far. With current memory pricing at 100 Euro/8GByte most systems should not be disk based.","body":"Storing in memory can go very far. With current memory pricing at 100 Euro/8GByte most systems should not be disk based."}],"answers":[{"tags":[],"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1294780318,"creation_date":1294776396,"answer_id":4662055,"question_id":4661963,"body_markdown":"You can, of course, run w/ more than 2m on 64bit java but that will not solve the issue. Btw, for Area, you probably need id (not numUsers), the number of users/friends can be obtained from list.size()\r\n\r\nDatabase/disk storage is a natural solution for representing a lot of object, you can alternatively use cluster of servers (beside running a huge box w/ 500+GB of memory)\r\n\r\nTo answer the question you have to supply some more data: what is the point of areas/ friend graphs/etc.\r\n\r\n---------\r\nIf you can code your own struct(ure) using ByteBuffer (which is probably not an easy task) you can go beyond the 32bit limitations by java.io.MappedByteBuffer, ScatteringByteChannel/GatheringByteChannel. However, it&#39;s not a rookie task at any rate but if you like programming, I&#39;d advise to try your hand at.\r\n\r\nI wish you good luck with your studies.","title":"Working with Huge ArrayLists, Java OutOfMemoryError: Java heap space... use db?","body":"<p>You can, of course, run w/ more than 2m on 64bit java but that will not solve the issue. Btw, for Area, you probably need id (not numUsers), the number of users/friends can be obtained from list.size()</p>\n\n<p>Database/disk storage is a natural solution for representing a lot of object, you can alternatively use cluster of servers (beside running a huge box w/ 500+GB of memory)</p>\n\n<p>To answer the question you have to supply some more data: what is the point of areas/ friend graphs/etc.</p>\n\n<hr>\n\n<p>If you can code your own struct(ure) using ByteBuffer (which is probably not an easy task) you can go beyond the 32bit limitations by java.io.MappedByteBuffer, ScatteringByteChannel/GatheringByteChannel. However, it's not a rookie task at any rate but if you like programming, I'd advise to try your hand at.</p>\n\n<p>I wish you good luck with your studies.</p>\n"},{"tags":[],"owner":{"account_id":267411,"reputation":28959,"user_id":555576,"accept_rate":50,"display_name":"Konstantin Komissarchik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1294776464,"creation_date":1294776464,"answer_id":4662072,"question_id":4661963,"body_markdown":"To access more heap memory, move to a 64-bit OS and 64-bit JVM. If you are hitting problems with -Xmx512m, you are using 32-bit OS and/or JVM.","title":"Working with Huge ArrayLists, Java OutOfMemoryError: Java heap space... use db?","body":"<p>To access more heap memory, move to a 64-bit OS and 64-bit JVM. If you are hitting problems with -Xmx512m, you are using 32-bit OS and/or JVM.</p>\n"},{"tags":[],"owner":{"account_id":16294,"reputation":15857,"user_id":35306,"accept_rate":70,"display_name":"Stephan Eggermont"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1294777273,"creation_date":1294777273,"answer_id":4662196,"question_id":4661963,"body_markdown":"Disk/database is only a solution if you can afford the factor 100.000 loss of random access performance (you might, there are lots of systems using a database). You can do much better with specialized data structures. Doing something special for fully connected subnetworks might save a lot of space.","title":"Working with Huge ArrayLists, Java OutOfMemoryError: Java heap space... use db?","body":"<p>Disk/database is only a solution if you can afford the factor 100.000 loss of random access performance (you might, there are lots of systems using a database). You can do much better with specialized data structures. Doing something special for fully connected subnetworks might save a lot of space.</p>\n"}],"owner":{"account_id":277686,"reputation":179,"user_id":571817,"accept_rate":31,"display_name":"Eddie"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2463,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1635769722,"creation_date":1294775813,"question_id":4661963,"body_markdown":"I am having a memory problem that I completely understand the cause, but have no idea of a fix.  I have attempted to use the -Xmx2g tag and make the heap size larger, but there seems to be a hidden maximum. (if i used -Xmx512m I run out of space at the same time).\r\n\r\nAssume I have 2 objects, an Area and a User.  My Area object holds an ArrayList of users:\r\n\r\n    public class Area {\r\n          int numUsers;\r\n          ArrayList&lt;User&gt; userList;\r\n    }\r\n\r\nMy User class holds an ArrayList of friends:\r\n\r\n    public class User {\r\n          int userID;\r\n          int numFriends;\r\n          ArrayList&lt;User&gt; friends;\r\n    }\r\n\r\nJust using a single Area, with 1 million users, and an average of 200 friends per user, I run out of heap space after about 680,000 Users are created.  Obviously if I lower the average number of friends/user to something closer to 100, I can store all of these objects in the heap.\r\n\r\nWhat if I want to simulate 2 million Users in an area?  Or Hundreds of area&#39;s?\r\n\r\nWith this much data, is a database the only feasible way to do simulations using the information?","title":"Working with Huge ArrayLists, Java OutOfMemoryError: Java heap space... use db?","body":"<p>I am having a memory problem that I completely understand the cause, but have no idea of a fix.  I have attempted to use the -Xmx2g tag and make the heap size larger, but there seems to be a hidden maximum. (if i used -Xmx512m I run out of space at the same time).</p>\n\n<p>Assume I have 2 objects, an Area and a User.  My Area object holds an ArrayList of users:</p>\n\n<pre><code>public class Area {\n      int numUsers;\n      ArrayList&lt;User&gt; userList;\n}\n</code></pre>\n\n<p>My User class holds an ArrayList of friends:</p>\n\n<pre><code>public class User {\n      int userID;\n      int numFriends;\n      ArrayList&lt;User&gt; friends;\n}\n</code></pre>\n\n<p>Just using a single Area, with 1 million users, and an average of 200 friends per user, I run out of heap space after about 680,000 Users are created.  Obviously if I lower the average number of friends/user to something closer to 100, I can store all of these objects in the heap.</p>\n\n<p>What if I want to simulate 2 million Users in an area?  Or Hundreds of area's?</p>\n\n<p>With this much data, is a database the only feasible way to do simulations using the information?</p>\n"},{"tags":["java","exception","out-of-memory","heap-memory","axis"],"answers":[{"tags":[],"owner":{"account_id":281669,"reputation":506,"user_id":578101,"display_name":"mauhiz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1359378344,"creation_date":1302178503,"answer_id":5580840,"question_id":5580555,"body_markdown":"From the look of it, I&#39;d say the problem is not with Axis. Did you try to perform a memory analysis? With a tool like Memory Analyzer Tool (MAT).","title":"Apache Axis 1.4 OutOfMemoryError: Java heap space","body":"<p>From the look of it, I'd say the problem is not with Axis. Did you try to perform a memory analysis? With a tool like Memory Analyzer Tool (MAT).</p>\n"}],"owner":{"account_id":733705,"reputation":31,"user_id":696733,"display_name":"Marcus Johansson"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4358,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1635769688,"creation_date":1302177040,"question_id":5580555,"body_markdown":"I have a peculiar problem that have suddenly appeared on the client side that uses Apache Axis 1.4 to make SOAP requests to a web service. Everything has been running smoothly for a year. The size of the responses have been growing slowly over time, and recently I&#39;m getting rather random `OutOfMemoryError: Java heap space` exceptions upon the call. The top part of the trace shown at the bottom. This happens at perhaps 1/10 of the calls made. If it happens and I catch the exception and just try the call again, it works in 99 cases out of 100.\r\n\r\nWhen I first started seeing this, I naturally assumed that my maximum heap size needed to be increased. I&#39;m running Tomcat 6, and changed my previous `-Xmx1024M` setting to `-Xmx2048M` (there&#39;s plenty of RAM on the machine). However, this didn&#39;t change anything. Looking at the status of Tomcat, the heap seems to have plenty of space to accomodate the SOAP response. The problem does not seem to be related to PermGen space available either.\r\n\r\nThe error is not related to the time the application have been running, it can happen immediately upon start of Tomcat. Hence it seems not related to the overall load on the server.\r\n\r\nDoes anybody have any ideas about this? Am I dealing with a known bug in Axis? I&#39;ve found a few cases of people getting `OutOfMemoryError` exception when sending huge attachments over SOAP, however, this is not what I&#39;m doing. \r\n\r\nI&#39;m using wrapped/literal for the SOAP web service.\r\n\r\n    Exception in thread &quot;Thread-6&quot; java.lang.OutOfMemoryError: Java heap space\r\n            at org.apache.axis.message.SAX2EventRecorder$objArrayVector.add(SAX2EventRecorder.java:254)\r\n            at org.apache.axis.message.SAX2EventRecorder.newElement(SAX2EventRecorder.java:136)\r\n            at org.apache.axis.encoding.DeserializationContext.pushNewElement(DeserializationContext.java:769)\r\n            at org.apache.axis.message.SOAPHandler.startElement(SOAPHandler.java:94)\r\n            at org.apache.axis.encoding.DeserializationContext.startElement(DeserializationContext.java:1048)\r\n            at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:504)\r\n            at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:376)\r\n            at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2732)\r\n            at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:625)\r\n\r\n","title":"Apache Axis 1.4 OutOfMemoryError: Java heap space","body":"<p>I have a peculiar problem that have suddenly appeared on the client side that uses Apache Axis 1.4 to make SOAP requests to a web service. Everything has been running smoothly for a year. The size of the responses have been growing slowly over time, and recently I'm getting rather random <code>OutOfMemoryError: Java heap space</code> exceptions upon the call. The top part of the trace shown at the bottom. This happens at perhaps 1/10 of the calls made. If it happens and I catch the exception and just try the call again, it works in 99 cases out of 100.</p>\n\n<p>When I first started seeing this, I naturally assumed that my maximum heap size needed to be increased. I'm running Tomcat 6, and changed my previous <code>-Xmx1024M</code> setting to <code>-Xmx2048M</code> (there's plenty of RAM on the machine). However, this didn't change anything. Looking at the status of Tomcat, the heap seems to have plenty of space to accomodate the SOAP response. The problem does not seem to be related to PermGen space available either.</p>\n\n<p>The error is not related to the time the application have been running, it can happen immediately upon start of Tomcat. Hence it seems not related to the overall load on the server.</p>\n\n<p>Does anybody have any ideas about this? Am I dealing with a known bug in Axis? I've found a few cases of people getting <code>OutOfMemoryError</code> exception when sending huge attachments over SOAP, however, this is not what I'm doing. </p>\n\n<p>I'm using wrapped/literal for the SOAP web service.</p>\n\n<pre><code>Exception in thread \"Thread-6\" java.lang.OutOfMemoryError: Java heap space\n        at org.apache.axis.message.SAX2EventRecorder$objArrayVector.add(SAX2EventRecorder.java:254)\n        at org.apache.axis.message.SAX2EventRecorder.newElement(SAX2EventRecorder.java:136)\n        at org.apache.axis.encoding.DeserializationContext.pushNewElement(DeserializationContext.java:769)\n        at org.apache.axis.message.SOAPHandler.startElement(SOAPHandler.java:94)\n        at org.apache.axis.encoding.DeserializationContext.startElement(DeserializationContext.java:1048)\n        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:504)\n        at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:376)\n        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2732)\n        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:625)\n</code></pre>\n"},{"tags":["java","swing","animation","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":35502,"reputation":28362,"user_id":100565,"accept_rate":59,"display_name":"MeBigFatGuy"},"score":1,"creation_date":1304047566,"post_id":5826815,"comment_id":6689730,"body_markdown":"the int[] which is the real concern, is the Raster data (the image bitmap data). The other memory you list is insignificant.","body":"the int[] which is the real concern, is the Raster data (the image bitmap data). The other memory you list is insignificant."},{"owner":{"account_id":377868,"reputation":924,"user_id":730260,"accept_rate":40,"display_name":"cabreracanal"},"score":0,"creation_date":1304075013,"post_id":5826815,"comment_id":6694387,"body_markdown":"So the only solution is to recreate the animations to a lower resolution? For now, I&#39;ll try that, thanksss!","body":"So the only solution is to recreate the animations to a lower resolution? For now, I&#39;ll try that, thanksss!"},{"owner":{"account_id":95999,"reputation":7037,"user_id":261156,"display_name":"Catalina Island"},"score":0,"creation_date":1304096845,"post_id":5826815,"comment_id":6699480,"body_markdown":"Can you post `getImage()` code?","body":"Can you post <code>getImage()</code> code?"},{"owner":{"account_id":377868,"reputation":924,"user_id":730260,"accept_rate":40,"display_name":"cabreracanal"},"score":0,"creation_date":1304115431,"post_id":5826815,"comment_id":6703501,"body_markdown":"Get image only access a position from an array. There is the code:","body":"Get image only access a position from an array. There is the code:"},{"owner":{"account_id":377868,"reputation":924,"user_id":730260,"accept_rate":40,"display_name":"cabreracanal"},"score":0,"creation_date":1304115472,"post_id":5826815,"comment_id":6703509,"body_markdown":"public ImageIcon getImageAt(int index){\n        return _images[index];\n    }//Class Animation","body":"public ImageIcon getImageAt(int index){         return _images[index];     }//Class Animation"},{"owner":{"account_id":377868,"reputation":924,"user_id":730260,"accept_rate":40,"display_name":"cabreracanal"},"score":0,"creation_date":1304115614,"post_id":5826815,"comment_id":6703525,"body_markdown":"I&#39;ve spent all the afternoon reducing quality of images and I have deleted 1/3 of them for each animation. Now 8 animations occupies 1.3 GB of memory and I have 50 in average per animation.","body":"I&#39;ve spent all the afternoon reducing quality of images and I have deleted 1/3 of them for each animation. Now 8 animations occupies 1.3 GB of memory and I have 50 in average per animation."},{"owner":{"account_id":377868,"reputation":924,"user_id":730260,"accept_rate":40,"display_name":"cabreracanal"},"score":0,"creation_date":1304259009,"post_id":5826815,"comment_id":6718899,"body_markdown":"@MeBigFatGuy it is not possible to store Raster in another way?? I mean, other way to allocate images in memory, because its a bit crappy losing quality and number of frames in animations :(","body":"@MeBigFatGuy it is not possible to store Raster in another way?? I mean, other way to allocate images in memory, because its a bit crappy losing quality and number of frames in animations :("}],"answers":[{"tags":[],"owner":{"account_id":377868,"reputation":924,"user_id":730260,"accept_rate":40,"display_name":"cabreracanal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1304436729,"creation_date":1304436729,"answer_id":5871932,"question_id":5826815,"body_markdown":"I&#39;ve been working hard looking for a satisfactory solution and finally I&#39;ve got it!\r\nThat&#39;s what I have done:\r\n\r\nClass Animation does no more inheritates from JLabel it only implements ActionListener, in which `actionPerformed()` method I increment the frame to show for each one (I use Timer class). Therefore, Animation does no more override `paintComponent()` method (it&#39;s work for DisplayPanel).\r\n\r\nIn DisplayPanel, I use thre global variables:\r\n\r\n    private BufferedImage _auxiliary_image;\r\n    private ImageIcon _image2display;\r\n    private ArrayList&lt;Animation&gt;;//I store there all the running animations there\r\n\r\nAnd now, I override there the DisplayPanel `paintComponent()`, thus:\r\n   \r\n\r\n     @Override\r\n        public void paintComponent(Graphics g){\r\n            super.paintComponent(g);\r\n            for (int i = 0; i &lt; _animations.size(); i++) {\r\n                if(i==0){\r\n                    _auxiliary_image.createGraphics().drawImage(_animations.get(i).getActual().getImage(), 0, 0, Color.white, null);\r\n                }else{\r\n                    _auxiliary_image.createGraphics().drawImage(_animations.get(i).getActual().getImage(), 0, 0, null);\r\n                }\r\n    \r\n            }\r\n            _image2display.setImage(_auxiliary_image);\r\n            _image2display.paintIcon(this, g, 50, -200);\r\n        }\r\n\r\nThe reason why I difference two cases, one for i==0 and another for the rest of frames is that on painting I saw a black background and the whole positions of the animation, so is this way that I solve the issue.\r\n\r\nNow, with 8 animations with 50 frames each one occuppies only 360 MB of memory instead 1.3 GB I get last time =) (I only paint one image, which results from merging all the frames to be printed at the same time for each animation).\r\n\r\nThank you and I hope this could help!!!","title":"Dealing with memory making Swing animations","body":"<p>I've been working hard looking for a satisfactory solution and finally I've got it!\nThat's what I have done:</p>\n\n<p>Class Animation does no more inheritates from JLabel it only implements ActionListener, in which <code>actionPerformed()</code> method I increment the frame to show for each one (I use Timer class). Therefore, Animation does no more override <code>paintComponent()</code> method (it's work for DisplayPanel).</p>\n\n<p>In DisplayPanel, I use thre global variables:</p>\n\n<pre><code>private BufferedImage _auxiliary_image;\nprivate ImageIcon _image2display;\nprivate ArrayList&lt;Animation&gt;;//I store there all the running animations there\n</code></pre>\n\n<p>And now, I override there the DisplayPanel <code>paintComponent()</code>, thus:</p>\n\n<pre><code> @Override\n    public void paintComponent(Graphics g){\n        super.paintComponent(g);\n        for (int i = 0; i &lt; _animations.size(); i++) {\n            if(i==0){\n                _auxiliary_image.createGraphics().drawImage(_animations.get(i).getActual().getImage(), 0, 0, Color.white, null);\n            }else{\n                _auxiliary_image.createGraphics().drawImage(_animations.get(i).getActual().getImage(), 0, 0, null);\n            }\n\n        }\n        _image2display.setImage(_auxiliary_image);\n        _image2display.paintIcon(this, g, 50, -200);\n    }\n</code></pre>\n\n<p>The reason why I difference two cases, one for i==0 and another for the rest of frames is that on painting I saw a black background and the whole positions of the animation, so is this way that I solve the issue.</p>\n\n<p>Now, with 8 animations with 50 frames each one occuppies only 360 MB of memory instead 1.3 GB I get last time =) (I only paint one image, which results from merging all the frames to be printed at the same time for each animation).</p>\n\n<p>Thank you and I hope this could help!!!</p>\n"}],"owner":{"account_id":377868,"reputation":924,"user_id":730260,"accept_rate":40,"display_name":"cabreracanal"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":348,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":5871932,"answer_count":1,"score":2,"last_activity_date":1635769672,"creation_date":1304039335,"question_id":5826815,"body_markdown":"It&#39;s my first time writting there but after reading and searching a lot about the subject I&#39;m going to explain, I didn&#39;t found anything useful for me (I&#39;ve checked a post of a guy explaining something similar about an iphone app, but without a final solution). Sorry for my english I&#39;ll try to do my best hehe :).\r\n\r\nOk, I&#39;m starting: I have java application that shows a set of animations at the same time on a JPanel. These animations are java objects from **Animation** (inheritates from JLabel), a class of my own *that stores an array of ImageIcon* (representing the frames of animation) and an integer pointer, showing actual frame to paint (index).\r\nThat class has overriden the method setPaint() in that way:\r\n\r\n    @Override\r\n    public void paintComponent(Graphics g) {\r\n            g.drawImage(getImageAt(getCurrentIndex()).getImage(), getX2(), getY2(), getW(), getH(), null);\r\n            //getImage at retrieves the frame at a &quot;index&quot; position from frame array.\r\n            if (getCurrentIndex() &lt; getTotal() - 1) {\r\n                incrementIndex();//increments frame by 1 (next frame)\r\n            } else {\r\n                resetIndex();//set index to 0 (frame 0)\r\n            }\r\n    }\r\n\r\nOn the other hand, we have **Display**, which inheritates from JPanel and is responsible for repainting the panel (it uses I javax.swing.Timer object and **repaints every 50 ms**).\r\n\r\nAll the images from every Animation object have the same size 768x576 and png format with transparencies (thus I can paint many animations at a time).\r\n\r\nThe problem is that when I load an animation it occupies too much memory because it creates I don&#39;t know why either how 200 MB of &quot;int&quot; objects apart of the 2MB that really occupies. When I load more animations the heap&#39;s space of the JVM rockets (up to **1.7 GB**... I didn&#39;t want to try anymore xD). For example, **6 animations may be 405 frames** (90 in average).\r\nI&#39;ve collected this data with JProfiler, but I can&#39;t post the capture so this what I get:\r\n  Memory usage of my app by JProfiler:\r\n\r\n - java.awtRectangle 3351 KB\r\n\r\n - sun.java2d.SunGraphics2D 16.510 KB (I think this is the size of all the animations and sounds logical).\r\n\r\n - java.lang.String 669KB\r\n\r\n - int[] 1337 MB\r\n  ...\r\n\r\n---\r\nIn display, the loading images process is in this way:\r\n\r\n    add(new Animation (loadImageSet(Constants.DIR_CINTA_EJE,&quot;all&quot;),\r\n                Constants.A_CINTA_EJE, 75,-200,768,576));//1\r\n\r\nWhere DIR_CINTA_EJE is the directory where all the frames of that animation are and the value &quot;all&quot; means that I want to load all the frames.\r\n\r\nThere is a way to avoid that memory used grows linearly with the number of animations? Why those ​​&quot;int&quot; values occupies so much? Are they the pixels of each image?\r\n\r\nAnd yes, I have Increased my heap space up to 2GB and it&#39;s working, but at a high cost.\r\nThank you very much for all the help you can provide. I love this forum, really.\r\n\r\nRegards.\r\n","title":"Dealing with memory making Swing animations","body":"<p>It's my first time writting there but after reading and searching a lot about the subject I'm going to explain, I didn't found anything useful for me (I've checked a post of a guy explaining something similar about an iphone app, but without a final solution). Sorry for my english I'll try to do my best hehe :).</p>\n\n<p>Ok, I'm starting: I have java application that shows a set of animations at the same time on a JPanel. These animations are java objects from <strong>Animation</strong> (inheritates from JLabel), a class of my own <em>that stores an array of ImageIcon</em> (representing the frames of animation) and an integer pointer, showing actual frame to paint (index).\nThat class has overriden the method setPaint() in that way:</p>\n\n<pre><code>@Override\npublic void paintComponent(Graphics g) {\n        g.drawImage(getImageAt(getCurrentIndex()).getImage(), getX2(), getY2(), getW(), getH(), null);\n        //getImage at retrieves the frame at a \"index\" position from frame array.\n        if (getCurrentIndex() &lt; getTotal() - 1) {\n            incrementIndex();//increments frame by 1 (next frame)\n        } else {\n            resetIndex();//set index to 0 (frame 0)\n        }\n}\n</code></pre>\n\n<p>On the other hand, we have <strong>Display</strong>, which inheritates from JPanel and is responsible for repainting the panel (it uses I javax.swing.Timer object and <strong>repaints every 50 ms</strong>).</p>\n\n<p>All the images from every Animation object have the same size 768x576 and png format with transparencies (thus I can paint many animations at a time).</p>\n\n<p>The problem is that when I load an animation it occupies too much memory because it creates I don't know why either how 200 MB of \"int\" objects apart of the 2MB that really occupies. When I load more animations the heap's space of the JVM rockets (up to <strong>1.7 GB</strong>... I didn't want to try anymore xD). For example, <strong>6 animations may be 405 frames</strong> (90 in average).\nI've collected this data with JProfiler, but I can't post the capture so this what I get:\n  Memory usage of my app by JProfiler:</p>\n\n<ul>\n<li><p>java.awtRectangle 3351 KB</p></li>\n<li><p>sun.java2d.SunGraphics2D 16.510 KB (I think this is the size of all the animations and sounds logical).</p></li>\n<li><p>java.lang.String 669KB</p></li>\n<li><p>int[] 1337 MB\n...</p></li>\n</ul>\n\n<hr>\n\n<p>In display, the loading images process is in this way:</p>\n\n<pre><code>add(new Animation (loadImageSet(Constants.DIR_CINTA_EJE,\"all\"),\n            Constants.A_CINTA_EJE, 75,-200,768,576));//1\n</code></pre>\n\n<p>Where DIR_CINTA_EJE is the directory where all the frames of that animation are and the value \"all\" means that I want to load all the frames.</p>\n\n<p>There is a way to avoid that memory used grows linearly with the number of animations? Why those ​​\"int\" values occupies so much? Are they the pixels of each image?</p>\n\n<p>And yes, I have Increased my heap space up to 2GB and it's working, but at a high cost.\nThank you very much for all the help you can provide. I love this forum, really.</p>\n\n<p>Regards.</p>\n"},{"tags":["java","eclipse","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":69592,"reputation":53841,"user_id":202375,"accept_rate":62,"display_name":"Saurabh Gokhale"},"score":0,"creation_date":1308278864,"post_id":6380828,"comment_id":7475152,"body_markdown":"Is this helpful ? http://stackoverflow.com/questions/2410277/getting-out-of-memory-java-heap-space-but-while-viewing-heap-space-it-max-uses","body":"Is this helpful ? <a href=\"http://stackoverflow.com/questions/2410277/getting-out-of-memory-java-heap-space-but-while-viewing-heap-space-it-max-uses\" title=\"getting out of memory java heap space but while viewing heap space it max uses\">stackoverflow.com/questions/2410277/&hellip;</a>"},{"owner":{"account_id":2785,"reputation":76174,"user_id":3916,"accept_rate":100,"display_name":"Vineet Reynolds"},"score":0,"creation_date":1308278944,"post_id":6380828,"comment_id":7475159,"body_markdown":"&quot;however I set the -Xms and -Xmx to 1gb each&quot;. How have you set this? And when are you getting the OOME? FYI, Eclipse launches new JVMs if you are running Java applications from within.","body":"&quot;however I set the -Xms and -Xmx to 1gb each&quot;. How have you set this? And when are you getting the OOME? FYI, Eclipse launches new JVMs if you are running Java applications from within."},{"owner":{"account_id":228422,"reputation":503,"user_id":490709,"accept_rate":91,"display_name":"Descartes"},"score":0,"creation_date":1308279064,"post_id":6380828,"comment_id":7475179,"body_markdown":"I thought the -Xms and -Xmx were set in eclipse by going into my prefs file (eclipse.ini) and adding those in. I get the error when my code is running","body":"I thought the -Xms and -Xmx were set in eclipse by going into my prefs file (eclipse.ini) and adding those in. I get the error when my code is running"},{"owner":{"account_id":35502,"reputation":28362,"user_id":100565,"accept_rate":59,"display_name":"MeBigFatGuy"},"score":0,"creation_date":1308283204,"post_id":6380828,"comment_id":7475626,"body_markdown":"no set it in the debug or run configuration","body":"no set it in the debug or run configuration"}],"answers":[{"tags":[],"owner":{"account_id":2785,"reputation":76174,"user_id":3916,"accept_rate":100,"display_name":"Vineet Reynolds"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1308279321,"creation_date":1308279321,"answer_id":6380888,"question_id":6380828,"body_markdown":"You are getting the OOME when running your code (as a Java application, or within a Java application server). This JVM is different from the JVM used by Eclipse, and will have it&#39;s own Xms and Xmx values.\r\n\r\nIf you need to modify the settings for the launched process, you&#39;ll need to [modify the runtime configuration of the project][1] to specify the arguments to the JVM explicitly. The default values in use may be insufficient for your application.\r\n\r\n  [1]: http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.jdt.doc.user/tasks/tasks-executionArgs.htm","title":"Eclipse isn&#39;t using allotted heap; I get an out of memory error?","body":"<p>You are getting the OOME when running your code (as a Java application, or within a Java application server). This JVM is different from the JVM used by Eclipse, and will have it's own Xms and Xmx values.</p>\n\n<p>If you need to modify the settings for the launched process, you'll need to <a href=\"http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.jdt.doc.user/tasks/tasks-executionArgs.htm\" rel=\"nofollow\">modify the runtime configuration of the project</a> to specify the arguments to the JVM explicitly. The default values in use may be insufficient for your application.</p>\n"}],"owner":{"account_id":228422,"reputation":503,"user_id":490709,"accept_rate":91,"display_name":"Descartes"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":217,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":6380888,"answer_count":1,"score":1,"last_activity_date":1635769657,"creation_date":1308278492,"question_id":6380828,"body_markdown":"I am using Eclipse (newly installed) to run some Java code, and for some reason I get an outOfMemoryError: Java heap space, however I set the -Xms and -Xmx to 1gb each and when I run the code, the little bar on the bottom never goes past 70 mb -_-. Can someone help me here? Thanks.","title":"Eclipse isn&#39;t using allotted heap; I get an out of memory error?","body":"<p>I am using Eclipse (newly installed) to run some Java code, and for some reason I get an outOfMemoryError: Java heap space, however I set the -Xms and -Xmx to 1gb each and when I run the code, the little bar on the bottom never goes past 70 mb -_-. Can someone help me here? Thanks.</p>\n"},{"tags":["java","recursion","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":46972,"reputation":356179,"user_id":139010,"accept_rate":81,"display_name":"Matt Ball"},"score":2,"creation_date":1311971992,"post_id":6878720,"comment_id":8185358,"body_markdown":"PermGen space is not heap space. Did you copy and paste the wrong option, or did you increase the wrong option?","body":"PermGen space is not heap space. Did you copy and paste the wrong option, or did you increase the wrong option?"},{"owner":{"account_id":46972,"reputation":356179,"user_id":139010,"accept_rate":81,"display_name":"Matt Ball"},"score":0,"creation_date":1311972066,"post_id":6878720,"comment_id":8185376,"body_markdown":"Oh, and BTW you can simplify the iteration syntax to `for (String s : children) { visitAllDirsAndFiles(new File(dir, s)); }`","body":"Oh, and BTW you can simplify the iteration syntax to <code>for (String s : children) { visitAllDirsAndFiles(new File(dir, s)); }</code>"},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1311972207,"post_id":6878720,"comment_id":8185406,"body_markdown":"Are you certain you do not have a memory leak in your program?","body":"Are you certain you do not have a memory leak in your program?"},{"owner":{"account_id":368268,"reputation":109587,"user_id":714968,"accept_rate":90,"display_name":"mKorbel"},"score":2,"creation_date":1311972416,"post_id":6878720,"comment_id":8185448,"body_markdown":"probably you forgot to close all I/O, and in finally block","body":"probably you forgot to close all I/O, and in finally block"},{"owner":{"account_id":135174,"reputation":17875,"user_id":337819,"accept_rate":68,"display_name":"Marvo"},"score":0,"creation_date":1311972503,"post_id":6878720,"comment_id":8185464,"body_markdown":"Another approach, should it come to that, would be to write the routine such that it doesn&#39;t use recursion.","body":"Another approach, should it come to that, would be to write the routine such that it doesn&#39;t use recursion."},{"owner":{"account_id":424750,"reputation":4814,"user_id":804929,"accept_rate":100,"display_name":"Jumbala"},"score":0,"creation_date":1311972544,"post_id":6878720,"comment_id":8185474,"body_markdown":"I feel kind of stupid now, but after everyone here telling me that it was not heap space and I might have a memory leak, I checked again to make sure I didn&#39;t have one and found one right away... Tell me if it might be related (probably is): when I was catching exceptions in BowlingFilesReader, I think my String reader and BufferedReader objects were not being closed properly (now I have put them in finally blocks). Could that be it? Exceptions are thrown when the files are badly formatted and we have to re-generate them.","body":"I feel kind of stupid now, but after everyone here telling me that it was not heap space and I might have a memory leak, I checked again to make sure I didn&#39;t have one and found one right away... Tell me if it might be related (probably is): when I was catching exceptions in BowlingFilesReader, I think my String reader and BufferedReader objects were not being closed properly (now I have put them in finally blocks). Could that be it? Exceptions are thrown when the files are badly formatted and we have to re-generate them."},{"owner":{"account_id":222066,"reputation":806,"user_id":480417,"display_name":"lhballoti"},"score":0,"creation_date":1311972798,"post_id":6878720,"comment_id":8185538,"body_markdown":"@Marvo: if the recursion itself were the issue, the OP&#39;s code would throw a `StackOverflowError`.","body":"@Marvo: if the recursion itself were the issue, the OP&#39;s code would throw a <code>StackOverflowError</code>."},{"owner":{"account_id":424750,"reputation":4814,"user_id":804929,"accept_rate":100,"display_name":"Jumbala"},"score":0,"creation_date":1311972939,"post_id":6878720,"comment_id":8185581,"body_markdown":"@mrKorbel That&#39;s what happened I think. I found such an error in my program right when you were typing it, which confirms it was probably this. I&#39;ll run my program again and I&#39;ll come back when it&#39;s done running, thanks to everyone that helped.","body":"@mrKorbel That&#39;s what happened I think. I found such an error in my program right when you were typing it, which confirms it was probably this. I&#39;ll run my program again and I&#39;ll come back when it&#39;s done running, thanks to everyone that helped."},{"owner":{"account_id":368268,"reputation":109587,"user_id":714968,"accept_rate":90,"display_name":"mKorbel"},"score":0,"creation_date":1311974823,"post_id":6878720,"comment_id":8186029,"body_markdown":"@Adam Smith then same way you have to close all Resulset, Prepare..., there are must exists example for that, JProfiler can shows all opened Object, don&#39;t forget that all there Object never gone from JVM UsedMemory, nor GC&#39;ed","body":"@Adam Smith then same way you have to close all Resulset, Prepare..., there are must exists example for that, JProfiler can shows all opened Object, don&#39;t forget that all there Object never gone from JVM UsedMemory, nor GC&#39;ed"},{"owner":{"account_id":135174,"reputation":17875,"user_id":337819,"accept_rate":68,"display_name":"Marvo"},"score":0,"creation_date":1311975058,"post_id":6878720,"comment_id":8186079,"body_markdown":"@Ihballoti, recursion itself (its effect on the call stack anyway) might not be the problem, but memory allocations in the repeated calls might blow the heap, even if the allocations were freed at the end of the recursive call.  If that&#39;s the case, doing the work serially might resolve that issue.","body":"@Ihballoti, recursion itself (its effect on the call stack anyway) might not be the problem, but memory allocations in the repeated calls might blow the heap, even if the allocations were freed at the end of the recursive call.  If that&#39;s the case, doing the work serially might resolve that issue."},{"owner":{"account_id":424750,"reputation":4814,"user_id":804929,"accept_rate":100,"display_name":"Jumbala"},"score":0,"creation_date":1311977723,"post_id":6878720,"comment_id":8186535,"body_markdown":"@mrKorbel The same problem happened... I&#39;m going to close my ResultSets, PreparedStatements and Statements now, but can you explain why I have to close them? Don&#39;t they get de-allocated when the method returns (thus they&#39;re no longer in the scope of any methods)?","body":"@mrKorbel The same problem happened... I&#39;m going to close my ResultSets, PreparedStatements and Statements now, but can you explain why I have to close them? Don&#39;t they get de-allocated when the method returns (thus they&#39;re no longer in the scope of any methods)?"}],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1311972180,"creation_date":1311972180,"answer_id":6878797,"question_id":6878720,"body_markdown":"I suggest you try increasing the heap space with something like\r\n\r\n    -mx1000m\r\n\r\nIf you have a 64-bit JVM you can use up to about 80% of the total memory of the machine. If you have a 32-bit JVM you may be limited to around 1200 to 1400 MB depending on the OS.","title":"OutOfMemoryError: Java Heap Space. How can I fix this error that happens in a recursive method?","body":"<p>I suggest you try increasing the heap space with something like</p>\n\n<pre><code>-mx1000m\n</code></pre>\n\n<p>If you have a 64-bit JVM you can use up to about 80% of the total memory of the machine. If you have a 32-bit JVM you may be limited to around 1200 to 1400 MB depending on the OS.</p>\n"},{"tags":[],"owner":{"account_id":65386,"reputation":39895,"user_id":192444,"accept_rate":100,"display_name":"John Vint"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1311972325,"creation_date":1311972325,"answer_id":6878835,"question_id":6878720,"body_markdown":"MaxPermSize will only change your permagen space.  You are running out of Heap space.  Increase your max heap size with -Xmx properties","title":"OutOfMemoryError: Java Heap Space. How can I fix this error that happens in a recursive method?","body":"<p>MaxPermSize will only change your permagen space.  You are running out of Heap space.  Increase your max heap size with -Xmx properties</p>\n"},{"tags":[],"owner":{"account_id":29046,"reputation":66704,"user_id":78182,"accept_rate":94,"display_name":"Stefan Kendall"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1311972450,"creation_date":1311972450,"answer_id":6878854,"question_id":6878720,"body_markdown":"`BowlingFilesReader.readFile(dir);` is suspicious. How much is it loading into memory, and why? If it&#39;s loading all files in a rather large directory into memory, that&#39;s an issue.\r\n\r\nYou also might try\r\n\r\n`java -Xmx 1G` or more, depending on your RAM situation.\r\n\r\nYou could always try using a stack instead of a recursive function. \r\n\r\n    S = []\r\n    while( !S.isEmpty() ){\r\n       S.pop()\r\n       //operate\r\n       S.push( all of the current item&#39;s children )\r\n    }\r\n\r\n","title":"OutOfMemoryError: Java Heap Space. How can I fix this error that happens in a recursive method?","body":"<p><code>BowlingFilesReader.readFile(dir);</code> is suspicious. How much is it loading into memory, and why? If it's loading all files in a rather large directory into memory, that's an issue.</p>\n\n<p>You also might try</p>\n\n<p><code>java -Xmx 1G</code> or more, depending on your RAM situation.</p>\n\n<p>You could always try using a stack instead of a recursive function. </p>\n\n<pre><code>S = []\nwhile( !S.isEmpty() ){\n   S.pop()\n   //operate\n   S.push( all of the current item's children )\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":77173,"reputation":40223,"user_id":220447,"accept_rate":90,"display_name":"paradigmatic"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1311972496,"creation_date":1311972496,"answer_id":6878866,"question_id":6878720,"body_markdown":"If the origin of the problem was recursion, you would get an error related to stack instead of heap. Seems that you have some kind of memory leak in `BowlingFilesReader`...","title":"OutOfMemoryError: Java Heap Space. How can I fix this error that happens in a recursive method?","body":"<p>If the origin of the problem was recursion, you would get an error related to stack instead of heap. Seems that you have some kind of memory leak in <code>BowlingFilesReader</code>...</p>\n"},{"tags":[],"owner":{"account_id":23190,"reputation":3273,"user_id":57907,"accept_rate":70,"display_name":"Preston"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1311973581,"creation_date":1311973581,"answer_id":6879045,"question_id":6878720,"body_markdown":"I think you should download a copy of the Memory Analyzer Tool [MAT][1]. Once you have that take a heap dump, load it in MAT, run the Leak Suspect report and you should be able to find out rather quickly what your issue is.\r\n\r\n\r\n  [1]: http://www.eclipse.org/mat/downloads.php","title":"OutOfMemoryError: Java Heap Space. How can I fix this error that happens in a recursive method?","body":"<p>I think you should download a copy of the Memory Analyzer Tool <a href=\"http://www.eclipse.org/mat/downloads.php\" rel=\"nofollow\">MAT</a>. Once you have that take a heap dump, load it in MAT, run the Leak Suspect report and you should be able to find out rather quickly what your issue is.</p>\n"},{"tags":[],"owner":{"account_id":368268,"reputation":109587,"user_id":714968,"accept_rate":90,"display_name":"mKorbel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1312016463,"creation_date":1312016463,"answer_id":6882154,"question_id":6878720,"body_markdown":"@Adam Smith to your question(s)\r\n\r\n    The same problem happened... I&#39;m going to close my ResultSets, \r\n    PreparedStatements and Statements now, but can you explain \r\n    why I have to close them? Don&#39;t they get de-allocated when \r\n    the method returns (thus they&#39;re no longer in the scope of any methods)? \r\n\r\nmost Jave IDE has built-in JProfiler or available plugin, integrate your project, run with profiler and then you&#39;ll see all Objects which are presents in Runtime, nothing complicated \r\n\r\nthen you have to close: \r\n\r\n[File I/O][1] example [here][2] , [JDBC Introduction][3] (example on page&#39;s bottom), and to check and avoids to opening lots of Connections (not only JDBC Conn), create one and reuse that, if everything done you can Close this Conn too, (Connection is hard and slower action on both sides, on PC and Server too), all Streamed Object must be closed in [The finally Block][4], because always works\r\n\r\nas I mentioned these Object never gone from JVM UsedMemory and majorities ... never are GC&#39;ed (for more details search on this forum), GC never works immediatelly\r\n\r\n        Runtime runtime = Runtime.getRuntime();\r\n        long total = runtime.totalMemory();\r\n        long free = runtime.freeMemory();\r\n        long max = runtime.maxMemory();\r\n        long used = total - free;   \r\n        System.out.println(Math.round(max / 1e6) + &quot; MB available before Cycle&quot;);\r\n        System.out.println(Math.round(total / 1e6) + &quot; MB allocated before Cycle&quot;);\r\n        System.out.println(Math.round(free / 1e6) + &quot; MB free before Cycle&quot;);\r\n        System.out.println(Math.round(used / 1e6) + &quot; MB used before Cycle&quot;);\r\n        //.... your code with \r\n        //.....\r\n        runtime = Runtime.getRuntime();\r\n        long total = runtime.totalMemory();\r\n        long free = runtime.freeMemory();\r\n        long max = runtime.maxMemory();\r\n        long used = total - free;\r\n        System.out.println(Math.round(max / 1e6) + &quot; MB available past Cycle&quot;);\r\n        System.out.println(Math.round(total / 1e6) + &quot; MB allocated past Cycle&quot;);\r\n        System.out.println(Math.round(free / 1e6) + &quot; MB free past Cycle&quot;);\r\n        System.out.println(Math.round(used / 1e6) + &quot; MB used past Cycle&quot;);        \r\n        \r\n        runtime = Runtime.getRuntime();\r\n        runtime.gc();\r\n \r\n        //dealyed with some Timer ... \r\n        long total = runtime.totalMemory();\r\n        long free = runtime.freeMemory();\r\n        long max = runtime.maxMemory();\r\n        long used = total - free;\r\n        System.out.println(Math.round(max / 1e6) + &quot; MB available after GC&quot;);\r\n        System.out.println(Math.round(total / 1e6) + &quot; MB allocated after GC&quot;);\r\n        System.out.println(Math.round(free / 1e6) + &quot; MB free after GC&quot;);\r\n        System.out.println(Math.round(used / 1e6) + &quot; MB used after GC&quot;); \r\n        \r\nmore infos on this forum and :-) described in English language :-)\r\n\r\n  [1]: http://download.oracle.com/javase/tutorial/essential/io/index.html\r\n  [2]: http://download.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\r\n  [3]: http://download.oracle.com/javase/tutorial/jdbc/overview/index.html\r\n  [4]: http://download.oracle.com/javase/tutorial/essential/exceptions/finally.html","title":"OutOfMemoryError: Java Heap Space. How can I fix this error that happens in a recursive method?","body":"<p>@Adam Smith to your question(s)</p>\n\n<pre><code>The same problem happened... I'm going to close my ResultSets, \nPreparedStatements and Statements now, but can you explain \nwhy I have to close them? Don't they get de-allocated when \nthe method returns (thus they're no longer in the scope of any methods)? \n</code></pre>\n\n<p>most Jave IDE has built-in JProfiler or available plugin, integrate your project, run with profiler and then you'll see all Objects which are presents in Runtime, nothing complicated </p>\n\n<p>then you have to close: </p>\n\n<p><a href=\"http://download.oracle.com/javase/tutorial/essential/io/index.html\" rel=\"nofollow\">File I/O</a> example <a href=\"http://download.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow\">here</a> , <a href=\"http://download.oracle.com/javase/tutorial/jdbc/overview/index.html\" rel=\"nofollow\">JDBC Introduction</a> (example on page's bottom), and to check and avoids to opening lots of Connections (not only JDBC Conn), create one and reuse that, if everything done you can Close this Conn too, (Connection is hard and slower action on both sides, on PC and Server too), all Streamed Object must be closed in <a href=\"http://download.oracle.com/javase/tutorial/essential/exceptions/finally.html\" rel=\"nofollow\">The finally Block</a>, because always works</p>\n\n<p>as I mentioned these Object never gone from JVM UsedMemory and majorities ... never are GC'ed (for more details search on this forum), GC never works immediatelly</p>\n\n<pre><code>    Runtime runtime = Runtime.getRuntime();\n    long total = runtime.totalMemory();\n    long free = runtime.freeMemory();\n    long max = runtime.maxMemory();\n    long used = total - free;   \n    System.out.println(Math.round(max / 1e6) + \" MB available before Cycle\");\n    System.out.println(Math.round(total / 1e6) + \" MB allocated before Cycle\");\n    System.out.println(Math.round(free / 1e6) + \" MB free before Cycle\");\n    System.out.println(Math.round(used / 1e6) + \" MB used before Cycle\");\n    //.... your code with \n    //.....\n    runtime = Runtime.getRuntime();\n    long total = runtime.totalMemory();\n    long free = runtime.freeMemory();\n    long max = runtime.maxMemory();\n    long used = total - free;\n    System.out.println(Math.round(max / 1e6) + \" MB available past Cycle\");\n    System.out.println(Math.round(total / 1e6) + \" MB allocated past Cycle\");\n    System.out.println(Math.round(free / 1e6) + \" MB free past Cycle\");\n    System.out.println(Math.round(used / 1e6) + \" MB used past Cycle\");        \n\n    runtime = Runtime.getRuntime();\n    runtime.gc();\n\n    //dealyed with some Timer ... \n    long total = runtime.totalMemory();\n    long free = runtime.freeMemory();\n    long max = runtime.maxMemory();\n    long used = total - free;\n    System.out.println(Math.round(max / 1e6) + \" MB available after GC\");\n    System.out.println(Math.round(total / 1e6) + \" MB allocated after GC\");\n    System.out.println(Math.round(free / 1e6) + \" MB free after GC\");\n    System.out.println(Math.round(used / 1e6) + \" MB used after GC\"); \n</code></pre>\n\n<p>more infos on this forum and :-) described in English language :-)</p>\n"}],"owner":{"account_id":424750,"reputation":4814,"user_id":804929,"accept_rate":100,"display_name":"Jumbala"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5878,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":6878866,"answer_count":6,"score":2,"last_activity_date":1635769637,"creation_date":1311971759,"question_id":6878720,"body_markdown":"I have a Java application that parses pdf files in a directory and its subdirectories and creates a database using the information found in the files.\r\n\r\nEverything was fine when I was using the program on around 900 files or so (which create a SQLite database with multiple tables, some of wihch contain 150k rows).\r\n\r\nNow I&#39;m trying to run my program on a larger set of data (around 2000 files) and at some point I get &quot;OutOfMemoryError: Java Heap space&quot;. I changed the following line in my jdev.conf file:\r\n\r\n    AddVMOption  -XX:MaxPermSize=256M\r\n\r\nto 512M and I got the same error (though later, I think). I&#39;m going to change it to something bigger again, but the thing is the computers this program will be used on are much older and thus don&#39;t have as much memory. Normally, the users are not going to add more than 30 files at a time, but I want to know at how many files I&#39;m supposed to limit them to. Ideally, I&#39;d like my program not to throw an error regardless of how many files are to be parsed.\r\n\r\nAt first, I thought it was my SQLite queries that were causing the error, but after reading up on Google, it&#39;s probably some recursive function. I isolated it (I think it&#39;s the correct one at least), to this function:\r\n\r\n \r\n\r\n     public static void visitAllDirsAndFiles(File dir) {\r\n          if(dir.isDirectory()) \r\n          {\r\n            String[] children = dir.list();\r\n            for (int i=0; i&lt;children.length; i++) \r\n            {\r\n              visitAllDirsAndFiles(new File(dir, children[i]));\r\n            }\r\n          }\r\n          else\r\n          {\r\n            try\r\n            {          \r\n              BowlingFilesReader.readFile(dir);\r\n            }\r\n            catch(Exception exc)\r\n            {\r\n              exc.printStackTrace();\r\n              System.out.println(&quot;Other Exception in file: &quot; + dir);\r\n            }\r\n          }\r\n      }\r\n\r\nI think the problem might be that it recursively calls this function for each subsequent directory, but I&#39;m really not sure that could be the problem. What do you think? If it might be, how can I make it so I don&#39;t get this error again? If you think it is impossible that this section alone causes the problem, I&#39;ll try to find which other part of the program can cause it.\r\n\r\nThe only other thing I can see causing that is that I connect to the database before calling the above method and I disconnect after it returns. The reason for that is that if I connect and disconnect after each file, my programs takes a lot longer to parse the data, so I&#39;d really like not to have to change that.","title":"OutOfMemoryError: Java Heap Space. How can I fix this error that happens in a recursive method?","body":"<p>I have a Java application that parses pdf files in a directory and its subdirectories and creates a database using the information found in the files.</p>\n\n<p>Everything was fine when I was using the program on around 900 files or so (which create a SQLite database with multiple tables, some of wihch contain 150k rows).</p>\n\n<p>Now I'm trying to run my program on a larger set of data (around 2000 files) and at some point I get \"OutOfMemoryError: Java Heap space\". I changed the following line in my jdev.conf file:</p>\n\n<pre><code>AddVMOption  -XX:MaxPermSize=256M\n</code></pre>\n\n<p>to 512M and I got the same error (though later, I think). I'm going to change it to something bigger again, but the thing is the computers this program will be used on are much older and thus don't have as much memory. Normally, the users are not going to add more than 30 files at a time, but I want to know at how many files I'm supposed to limit them to. Ideally, I'd like my program not to throw an error regardless of how many files are to be parsed.</p>\n\n<p>At first, I thought it was my SQLite queries that were causing the error, but after reading up on Google, it's probably some recursive function. I isolated it (I think it's the correct one at least), to this function:</p>\n\n<pre><code> public static void visitAllDirsAndFiles(File dir) {\n      if(dir.isDirectory()) \n      {\n        String[] children = dir.list();\n        for (int i=0; i&lt;children.length; i++) \n        {\n          visitAllDirsAndFiles(new File(dir, children[i]));\n        }\n      }\n      else\n      {\n        try\n        {          \n          BowlingFilesReader.readFile(dir);\n        }\n        catch(Exception exc)\n        {\n          exc.printStackTrace();\n          System.out.println(\"Other Exception in file: \" + dir);\n        }\n      }\n  }\n</code></pre>\n\n<p>I think the problem might be that it recursively calls this function for each subsequent directory, but I'm really not sure that could be the problem. What do you think? If it might be, how can I make it so I don't get this error again? If you think it is impossible that this section alone causes the problem, I'll try to find which other part of the program can cause it.</p>\n\n<p>The only other thing I can see causing that is that I connect to the database before calling the above method and I disconnect after it returns. The reason for that is that if I connect and disconnect after each file, my programs takes a lot longer to parse the data, so I'd really like not to have to change that.</p>\n"},{"tags":["java","spring","jdbc","jooq"],"comments":[{"owner":{"account_id":1746185,"reputation":31,"user_id":1596353,"display_name":"Alex Korotkov"},"score":0,"creation_date":1635765451,"post_id":69796048,"comment_id":123372829,"body_markdown":"I just think it&#39;s less error-prone","body":"I just think it&#39;s less error-prone"}],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635769628,"creation_date":1635769628,"answer_id":69796930,"question_id":69796048,"body_markdown":"That&#39;s not a conscious omission, just a missing feature, which will be added in jOOQ 3.16: https://github.com/jOOQ/jOOQ/issues/12583\r\n\r\nAs a workaround, you can generate that method on each of your generated `DAO` types yourself, as documented here: https://www.jooq.org/doc/latest/manual/code-generation/codegen-custom-code/","title":"Is there a way to generate DAOs with JOOQ with findById returning Optional","body":"<p>That's not a conscious omission, just a missing feature, which will be added in jOOQ 3.16: <a href=\"https://github.com/jOOQ/jOOQ/issues/12583\" rel=\"nofollow noreferrer\">https://github.com/jOOQ/jOOQ/issues/12583</a></p>\n<p>As a workaround, you can generate that method on each of your generated <code>DAO</code> types yourself, as documented here: <a href=\"https://www.jooq.org/doc/latest/manual/code-generation/codegen-custom-code/\" rel=\"nofollow noreferrer\">https://www.jooq.org/doc/latest/manual/code-generation/codegen-custom-code/</a></p>\n"}],"owner":{"account_id":1746185,"reputation":31,"user_id":1596353,"display_name":"Alex Korotkov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":192,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1635769628,"creation_date":1635764877,"question_id":69796048,"body_markdown":"Using generated DAOs leads to copy-paste code like:\r\n\r\n```java\r\nvar entity = dao.findById(id); \r\nlog.debug(&quot;entity: {}&quot;, entity) \r\nif (entity == null){\r\n    raise SpecificRuntimeException(); \r\n}\r\n```\r\n\r\nI will be very happy do it like this:\r\n\r\n```java\r\nvar entity = dao.findOptionalById(id)\r\n    .orElseThrow(() -&gt; new SpecificRuntimeException())\r\n```","title":"Is there a way to generate DAOs with JOOQ with findById returning Optional","body":"<p>Using generated DAOs leads to copy-paste code like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var entity = dao.findById(id); \nlog.debug(&quot;entity: {}&quot;, entity) \nif (entity == null){\n    raise SpecificRuntimeException(); \n}\n</code></pre>\n<p>I will be very happy do it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var entity = dao.findOptionalById(id)\n    .orElseThrow(() -&gt; new SpecificRuntimeException())\n</code></pre>\n"},{"tags":["java","list","collections","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":1,"creation_date":1312992473,"post_id":7013384,"comment_id":8375614,"body_markdown":"The actual exception happens when the ArrayList chooses to grow (and copy its old contents to the new backing array)","body":"The actual exception happens when the ArrayList chooses to grow (and copy its old contents to the new backing array)"}],"answers":[{"tags":[],"owner":{"account_id":25300,"reputation":13294,"user_id":64967,"accept_rate":75,"display_name":"Dilum Ranatunga"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1312990021,"creation_date":1312990021,"answer_id":7013424,"question_id":7013384,"body_markdown":"Even if you had enough memory, `ArrayList` can have at most `Integer.MAX_VALUE` elements. `Double.MAX_VALUE` far exceeds said limit.\r\n\r\nIn this case, you ran out of memory during an `add` that caused the array list to grow.","title":"java.lang.OutOfMemoryError : Java heap space","body":"<p>Even if you had enough memory, <code>ArrayList</code> can have at most <code>Integer.MAX_VALUE</code> elements. <code>Double.MAX_VALUE</code> far exceeds said limit.</p>\n\n<p>In this case, you ran out of memory during an <code>add</code> that caused the array list to grow.</p>\n"},{"tags":[],"owner":{"account_id":333768,"reputation":80790,"user_id":659804,"accept_rate":100,"display_name":"Ernest Friedman-Hill"},"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1312990026,"creation_date":1312990026,"answer_id":7013425,"question_id":7013384,"body_markdown":"Is there a way to allow you to create and store `Double.MAX_VALUE` objects in a `Collection`? No. There&#39;s not that much RAM on Earth. `Double.MAX_VALUE` is about 2 times ten to the 308th power: that&#39;s 2 followed by over 300 zeros. Give Best Buy a call, see how much they&#39;d charge to put that in your computer.\r\n\r\n","title":"java.lang.OutOfMemoryError : Java heap space","body":"<p>Is there a way to allow you to create and store <code>Double.MAX_VALUE</code> objects in a <code>Collection</code>? No. There's not that much RAM on Earth. <code>Double.MAX_VALUE</code> is about 2 times ten to the 308th power: that's 2 followed by over 300 zeros. Give Best Buy a call, see how much they'd charge to put that in your computer.</p>\n"},{"tags":[],"owner":{"account_id":476999,"reputation":607,"user_id":888211,"accept_rate":100,"display_name":"Caius Brindescu"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1312990112,"creation_date":1312990112,"answer_id":7013445,"question_id":7013384,"body_markdown":"Increasing the size of the heap will do. Just run the program with this argument:\r\n\r\n    -Xmx512m\r\n\r\nIt will increase your heap size to 512 MB. You can specify as much as you want: 1g, 2g and so on.\r\n","title":"java.lang.OutOfMemoryError : Java heap space","body":"<p>Increasing the size of the heap will do. Just run the program with this argument:</p>\n\n<pre><code>-Xmx512m\n</code></pre>\n\n<p>It will increase your heap size to 512 MB. You can specify as much as you want: 1g, 2g and so on.</p>\n"},{"tags":[],"owner":{"account_id":30285,"reputation":55210,"user_id":82511,"accept_rate":71,"display_name":"djna"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1312990113,"creation_date":1312990113,"answer_id":7013446,"question_id":7013384,"body_markdown":"\r\n\r\nYou are trying to allocate of the order of 10^308 values. That&#39;s a lot of values. ","title":"java.lang.OutOfMemoryError : Java heap space","body":"<p>You are trying to allocate of the order of 10^308 values. That's a lot of values. </p>\n"},{"tags":[],"owner":{"account_id":254625,"reputation":11900,"user_id":534150,"accept_rate":81,"display_name":"Arthur Neves"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1312990117,"creation_date":1312990117,"answer_id":7013447,"question_id":7013384,"body_markdown":"    for (double i = 1; i &lt;= Integer.MAX_VALUE; i++)\r\n            numbers.add(new Double(i));","title":"java.lang.OutOfMemoryError : Java heap space","body":"<pre><code>for (double i = 1; i &lt;= Integer.MAX_VALUE; i++)\n        numbers.add(new Double(i));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":46226,"reputation":2333,"user_id":136479,"accept_rate":90,"display_name":"J Lundberg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1312990249,"creation_date":1312990249,"answer_id":7013481,"question_id":7013384,"body_markdown":"In you loop:\r\n\r\n    for (double i = 1; i &lt;= Double.MAX_VALUE; i++)\r\n        numbers.add(new Double(i));\r\n\r\nAn `ArrayList` will just add the value to the `ArrayList` if there is room.  If not it will increase the size of the `ArrayList` and then continue adding.\r\n\r\nSo what you are basically doing is using all the memory allocated in your heap when you are creating this `ArrayList`.  If you make your `ArrayList` smaller you should be able to hold it in memory.","title":"java.lang.OutOfMemoryError : Java heap space","body":"<p>In you loop:</p>\n\n<pre><code>for (double i = 1; i &lt;= Double.MAX_VALUE; i++)\n    numbers.add(new Double(i));\n</code></pre>\n\n<p>An <code>ArrayList</code> will just add the value to the <code>ArrayList</code> if there is room.  If not it will increase the size of the <code>ArrayList</code> and then continue adding.</p>\n\n<p>So what you are basically doing is using all the memory allocated in your heap when you are creating this <code>ArrayList</code>.  If you make your <code>ArrayList</code> smaller you should be able to hold it in memory.</p>\n"},{"tags":[],"owner":{"account_id":9193,"reputation":343113,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1312990392,"creation_date":1312990392,"answer_id":7013515,"question_id":7013384,"body_markdown":"Yet another reason why your code cannot work: `double` can only represent integers exactly up to about 2^52 - after that, `i++` will have no effect and the `for` loop will never terminate.\r\n\r\nYou should never use floating-point variables as loop counters. Use `int` or `long` instead.","title":"java.lang.OutOfMemoryError : Java heap space","body":"<p>Yet another reason why your code cannot work: <code>double</code> can only represent integers exactly up to about 2^52 - after that, <code>i++</code> will have no effect and the <code>for</code> loop will never terminate.</p>\n\n<p>You should never use floating-point variables as loop counters. Use <code>int</code> or <code>long</code> instead.</p>\n"},{"tags":[],"owner":{"account_id":120645,"reputation":11238,"user_id":313205,"display_name":"Marcelo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1312990743,"creation_date":1312990743,"answer_id":7013611,"question_id":7013384,"body_markdown":"Instead of doing what you are currently doing, you should just obtain 10 random doubles, add them to an ArrayList and sort it. That is basically what your method is doing.\r\n\r\nTo obtain a random double, look at [`Random.nextDouble()`][1].\r\n\r\n[1]:http://download.oracle.com/javase/7/docs/api/java/util/Random.html#nextDouble()","title":"java.lang.OutOfMemoryError : Java heap space","body":"<p>Instead of doing what you are currently doing, you should just obtain 10 random doubles, add them to an ArrayList and sort it. That is basically what your method is doing.</p>\n\n<p>To obtain a random double, look at <a href=\"http://download.oracle.com/javase/7/docs/api/java/util/Random.html#nextDouble%28%29\" rel=\"nofollow\"><code>Random.nextDouble()</code></a>.</p>\n"}],"owner":{"account_id":140182,"reputation":10883,"user_id":346297,"accept_rate":85,"display_name":"Wassim AZIRAR"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19583,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"accepted_answer_id":7013425,"answer_count":8,"score":1,"last_activity_date":1635769624,"creation_date":1312989868,"question_id":7013384,"body_markdown":"I was playing with some examples of Collections from Oracle website\r\n\r\n    public class Timing {\r\n\t\r\n        public static void method(){\r\n\r\n            List numbers = new ArrayList();\r\n\t      \r\n            for (double i = 1; i &lt;= Double.MAX_VALUE; i++)\r\n            numbers.add(new Double(i));\r\n\t\t\r\n            Collections.shuffle(numbers);\r\n            List winningcombination = numbers.subList(0, 10);\r\n            Collections.sort(winningcombination);\r\n        }\r\n\t\r\n        public static void main(String[] args)\r\n        {\r\n            long start = System.currentTimeMillis();\r\n            method();\r\n            long end = System.currentTimeMillis();\r\n            System.out.println(&quot;time elapsed : &quot; + (end-start));\r\n        }\r\n    }\r\n\r\nI tried to see how long it will take to do it for Double.MAX_VALUE. And I got this :\r\n\r\n    Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space\r\n        at java.util.Arrays.copyOf(Unknown Source)\r\n        at java.util.Arrays.copyOf(Unknown Source)\r\n        at java.util.ArrayList.ensureCapacity(Unknown Source)\r\n        at java.util.ArrayList.add(Unknown Source)\r\n\r\nI there a way to fix this ?","title":"java.lang.OutOfMemoryError : Java heap space","body":"<p>I was playing with some examples of Collections from Oracle website</p>\n\n<pre><code>public class Timing {\n\n    public static void method(){\n\n        List numbers = new ArrayList();\n\n        for (double i = 1; i &lt;= Double.MAX_VALUE; i++)\n        numbers.add(new Double(i));\n\n        Collections.shuffle(numbers);\n        List winningcombination = numbers.subList(0, 10);\n        Collections.sort(winningcombination);\n    }\n\n    public static void main(String[] args)\n    {\n        long start = System.currentTimeMillis();\n        method();\n        long end = System.currentTimeMillis();\n        System.out.println(\"time elapsed : \" + (end-start));\n    }\n}\n</code></pre>\n\n<p>I tried to see how long it will take to do it for Double.MAX_VALUE. And I got this :</p>\n\n<pre><code>Exception in thread \"main\" java.lang.OutOfMemoryError: Java heap space\n    at java.util.Arrays.copyOf(Unknown Source)\n    at java.util.Arrays.copyOf(Unknown Source)\n    at java.util.ArrayList.ensureCapacity(Unknown Source)\n    at java.util.ArrayList.add(Unknown Source)\n</code></pre>\n\n<p>I there a way to fix this ?</p>\n"},{"tags":["java","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1314203184,"post_id":7178698,"comment_id":8618012,"body_markdown":"Did you check that your OOME actually mentions the heap memory? There are a few (relatively uncommon) cases where OOMEs are thrown, but it&#39;s NOT the heap that&#39;s full.","body":"Did you check that your OOME actually mentions the heap memory? There are a few (relatively uncommon) cases where OOMEs are thrown, but it&#39;s NOT the heap that&#39;s full."},{"owner":{"account_id":100259,"reputation":2880,"user_id":270349,"accept_rate":62,"display_name":"aalku"},"score":1,"creation_date":1314203513,"post_id":7178698,"comment_id":8618095,"body_markdown":"Right, @Joachim, too many threads in JVM x86 crashes too with OOM exception","body":"Right, @Joachim, too many threads in JVM x86 crashes too with OOM exception"}],"answers":[{"tags":[],"owner":{"account_id":97818,"reputation":114824,"user_id":265143,"accept_rate":72,"display_name":"P&#233;ter T&#246;r&#246;k"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1314202788,"creation_date":1314202369,"answer_id":7178773,"question_id":7178698,"body_markdown":"My guess is that since modern GCs partition the heap into separate memory areas (young / tenured / permanent generations), it is enough for the permanent generation space to fill up completely for an out of memory error to occur. You can configure the ratio of different generation spaces using various JVM command line options.\r\n\r\nHere is a good article about [Tuning Garbage Collection with the 5.0 Java[tm] Virtual Machine][1] (I couldn&#39;t find a more recent one but I think the basics still apply in newer VMs).\r\n\r\n\r\n  [1]: http://www.oracle.com/technetwork/java/gc-tuning-5-138395.html","title":"Java Heap Space - How does -Xmx work exactly?","body":"<p>My guess is that since modern GCs partition the heap into separate memory areas (young / tenured / permanent generations), it is enough for the permanent generation space to fill up completely for an out of memory error to occur. You can configure the ratio of different generation spaces using various JVM command line options.</p>\n\n<p>Here is a good article about <a href=\"http://www.oracle.com/technetwork/java/gc-tuning-5-138395.html\" rel=\"nofollow\">Tuning Garbage Collection with the 5.0 Java[tm] Virtual Machine</a> (I couldn't find a more recent one but I think the basics still apply in newer VMs).</p>\n"},{"tags":[],"owner":{"account_id":190753,"reputation":357,"user_id":430904,"display_name":"Paul M"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1314203568,"creation_date":1314203568,"answer_id":7179039,"question_id":7178698,"body_markdown":"Re-read your error message - it may tell you which type of memory you ran out of. I&#39;d guess that it was PermGen space. Permgen is used for class definitions (amongst other things). You can tune the space for PermGen via **-XX:MaxPermSize** PermGen isn&#39;t part of the heap, so isn&#39;t included in heap dump. \r\n\r\nSee [this answer][1] for more information on looking at PermGen.\r\n\r\nIf this isn&#39;t the issue, then try setting your initial heap size (-Xms) to the same as the maximum. Doing this means that the heap won&#39;t grow which should make understanding what&#39;s going on easier. \r\n\r\nI recommend using jvisualvm (part of the JDK) to look at your memory utilisation as your program runs.\r\n\r\n  [1]: https://stackoverflow.com/questions/4080010/how-to-dump-permgen","title":"Java Heap Space - How does -Xmx work exactly?","body":"<p>Re-read your error message - it may tell you which type of memory you ran out of. I'd guess that it was PermGen space. Permgen is used for class definitions (amongst other things). You can tune the space for PermGen via <strong>-XX:MaxPermSize</strong> PermGen isn't part of the heap, so isn't included in heap dump. </p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/4080010/how-to-dump-permgen\">this answer</a> for more information on looking at PermGen.</p>\n\n<p>If this isn't the issue, then try setting your initial heap size (-Xms) to the same as the maximum. Doing this means that the heap won't grow which should make understanding what's going on easier. </p>\n\n<p>I recommend using jvisualvm (part of the JDK) to look at your memory utilisation as your program runs.</p>\n"}],"owner":{"account_id":218619,"reputation":848,"user_id":475039,"accept_rate":23,"display_name":"Kros"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2263,"favorite_count":0,"down_vote_count":1,"up_vote_count":9,"accepted_answer_id":7179039,"answer_count":2,"score":8,"last_activity_date":1635769612,"creation_date":1314202079,"question_id":7178698,"body_markdown":"I have encountered the infamous **OutOfMemoryException** in my application and instead of simply increasing the amount of Heap Space available I tried to look into what the problem was, just in case, there was some sort of leak from my application. \r\n\r\nI added the JVM parameter **-XX:+HeapDumpOnOutOfMemoryError** which creates a Heap Dump when the OutOfMemory Error is encountered. I then analysed the dump file produced with different profiling tools. I then started playing around with the -Xmx parameter and observing patterns. \r\n\r\nWhat puzzled me is the following. Why is it that on analyzing the dump I found that the total size of all objects was much less than the total that I set using the -Xmx parameter?\r\nFor example, say I set the -Xmx to &#39;2048m&#39;. When I analyzed the dump file I found a total of 400Mb of objects on the Heap. I was expecting to find 2GB. Am I missing something? \r\n","title":"Java Heap Space - How does -Xmx work exactly?","body":"<p>I have encountered the infamous <strong>OutOfMemoryException</strong> in my application and instead of simply increasing the amount of Heap Space available I tried to look into what the problem was, just in case, there was some sort of leak from my application. </p>\n\n<p>I added the JVM parameter <strong>-XX:+HeapDumpOnOutOfMemoryError</strong> which creates a Heap Dump when the OutOfMemory Error is encountered. I then analysed the dump file produced with different profiling tools. I then started playing around with the -Xmx parameter and observing patterns. </p>\n\n<p>What puzzled me is the following. Why is it that on analyzing the dump I found that the total size of all objects was much less than the total that I set using the -Xmx parameter?\nFor example, say I set the -Xmx to '2048m'. When I analyzed the dump file I found a total of 400Mb of objects on the Heap. I was expecting to find 2GB. Am I missing something? </p>\n"},{"tags":["java","file-io","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":3284,"reputation":42459,"user_id":4728,"accept_rate":86,"display_name":"Simon Nickerson"},"score":0,"creation_date":1318505485,"post_id":7753424,"comment_id":9437157,"body_markdown":"Have you given your Java VM a reasonable amount of memory with the -Xmx command line option?","body":"Have you given your Java VM a reasonable amount of memory with the -Xmx command line option?"},{"owner":{"account_id":18250,"reputation":39302,"user_id":41655,"accept_rate":76,"display_name":"millimoose"},"score":0,"creation_date":1318505600,"post_id":7753424,"comment_id":9437186,"body_markdown":"Did you try writing the buffer in smaller blocks instead of a single call?","body":"Did you try writing the buffer in smaller blocks instead of a single call?"},{"owner":{"account_id":40256,"reputation":46474,"user_id":116639,"accept_rate":25,"display_name":"Tom Anderson"},"score":0,"creation_date":1318511183,"post_id":7753424,"comment_id":9438722,"body_markdown":"Incidentally, i believe the reason that PrintWriter.write uses memory is that it encodes the whole string into a byte array, and then writes that.","body":"Incidentally, i believe the reason that PrintWriter.write uses memory is that it encodes the whole string into a byte array, and then writes that."}],"answers":[{"tags":[],"owner":{"account_id":472305,"reputation":1139,"user_id":880713,"display_name":"Gianpaolo Di Nino"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1318505595,"creation_date":1318505595,"answer_id":7753471,"question_id":7753424,"body_markdown":"Since 6mb is not so much &quot;data&quot; I think you should increase your java VM memory,\r\n\r\ntake a look here\r\n\r\nhttp://confluence.atlassian.com/display/DOC/Fix+Out+of+Memory+Errors+by+Increasing+Available+Memory","title":"What&#39;s the most efficient way to write large text file in java?","body":"<p>Since 6mb is not so much \"data\" I think you should increase your java VM memory,</p>\n\n<p>take a look here</p>\n\n<p><a href=\"http://confluence.atlassian.com/display/DOC/Fix+Out+of+Memory+Errors+by+Increasing+Available+Memory\" rel=\"nofollow\">http://confluence.atlassian.com/display/DOC/Fix+Out+of+Memory+Errors+by+Increasing+Available+Memory</a></p>\n"},{"tags":[],"owner":{"account_id":281282,"reputation":3826,"user_id":577485,"accept_rate":71,"display_name":"Sibbo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1318505750,"creation_date":1318505750,"answer_id":7753504,"question_id":7753424,"body_markdown":"What about replacing `printWriter.print(buffer);` with:\r\n\r\n    for (int i = 0; i &lt; buffer.length; i += 100) {\r\n        int end = i + 100;\r\n\r\n        if (end &gt;= buffer.length) {\r\n            end = buffer.length;\r\n        }\r\n\r\n        printWriter.print(buffer.substring(i, end);\r\n        printWriter.flush();\r\n    }","title":"What&#39;s the most efficient way to write large text file in java?","body":"<p>What about replacing <code>printWriter.print(buffer);</code> with:</p>\n\n<pre><code>for (int i = 0; i &lt; buffer.length; i += 100) {\n    int end = i + 100;\n\n    if (end &gt;= buffer.length) {\n        end = buffer.length;\n    }\n\n    printWriter.print(buffer.substring(i, end);\n    printWriter.flush();\n}\n</code></pre>\n"}],"owner":{"account_id":228981,"reputation":2046,"user_id":491637,"accept_rate":49,"display_name":"walves"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3425,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1635769596,"creation_date":1318505356,"question_id":7753424,"body_markdown":"I&#39;m trying to write a file with some amount of data using this:\r\n\r\n    public static &lt;T extends SomeClass&gt; void writeFile(String buffer, Class&lt;T&gt; clazz, int fileNumber) {\r\n\t\tString fileType = &quot;.txt&quot;;\r\n\t\tFile file = new File(clazz.getName()+fileNumber+fileType);\r\n\t\tPrintWriter printWriter = null;\r\n\t\t\r\n\t\t\r\n\t\ttry {\r\n\t\t\tFileWriter writer = new FileWriter(file);\r\n\t\t\tprintWriter = new PrintWriter(writer);\r\n\t\t\tprintWriter.print(buffer);//error occurs here\r\n\t\t\tprintWriter.flush();\r\n\t\t\tprintWriter.close();\r\n\t\t\tSystem.out.println(&quot;created file: &quot;+file.getName());\r\n\t\t\t\r\n\t\t\t\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t} finally{\r\n\t\t\tif(printWriter!=null){\r\n\t\t\t\tprintWriter.flush();\r\n\t\t\t\tprintWriter.close();\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Done!&quot;);\r\n\t}\r\n\r\nThe buffer string contains +-6mb of data, and when i run the code i get a java.lang.OutOfMemoryError exactly in buffer. \r\n","title":"What&#39;s the most efficient way to write large text file in java?","body":"<p>I'm trying to write a file with some amount of data using this:</p>\n\n<pre><code>public static &lt;T extends SomeClass&gt; void writeFile(String buffer, Class&lt;T&gt; clazz, int fileNumber) {\n    String fileType = \".txt\";\n    File file = new File(clazz.getName()+fileNumber+fileType);\n    PrintWriter printWriter = null;\n\n\n    try {\n        FileWriter writer = new FileWriter(file);\n        printWriter = new PrintWriter(writer);\n        printWriter.print(buffer);//error occurs here\n        printWriter.flush();\n        printWriter.close();\n        System.out.println(\"created file: \"+file.getName());\n\n\n    } catch (IOException e) {\n        e.printStackTrace();\n    } finally{\n        if(printWriter!=null){\n            printWriter.flush();\n            printWriter.close();\n        }\n    }\n    System.out.println(\"Done!\");\n}\n</code></pre>\n\n<p>The buffer string contains +-6mb of data, and when i run the code i get a java.lang.OutOfMemoryError exactly in buffer. </p>\n"},{"tags":["java","hibernate","out-of-memory","size","heap-memory"],"comments":[{"owner":{"account_id":217796,"reputation":4839,"user_id":473775,"accept_rate":83,"display_name":"joscarsson"},"score":0,"creation_date":1331367277,"post_id":9644937,"comment_id":12245350,"body_markdown":"See this question: http://stackoverflow.com/questions/880855/increase-the-java-heap-size-permanently. Is that what you are looking for?","body":"See this question: <a href=\"http://stackoverflow.com/questions/880855/increase-the-java-heap-size-permanently\" title=\"increase the java heap size permanently\">stackoverflow.com/questions/880855/&hellip;</a>. Is that what you are looking for?"},{"owner":{"account_id":443865,"reputation":1815,"user_id":835348,"accept_rate":83,"display_name":"James DW"},"score":0,"creation_date":1331399307,"post_id":9644937,"comment_id":12250292,"body_markdown":"Be careful. It may be that you&#39;re not using Hibernate properly and it certainly sounds like the application you&#39;re building could end up with memory issues.","body":"Be careful. It may be that you&#39;re not using Hibernate properly and it certainly sounds like the application you&#39;re building could end up with memory issues."},{"owner":{"account_id":1287000,"reputation":355,"user_id":1239884,"accept_rate":36,"display_name":"Jc dev"},"score":0,"creation_date":1331509555,"post_id":9644937,"comment_id":12268408,"body_markdown":"@ james DW, although it worked by adding a vm argument -Xmx1024m, I am still considering your suggestion, I think there is also problem on how I used hibernate that&#39;s why I&#39;m having this error!","body":"@ james DW, although it worked by adding a vm argument -Xmx1024m, I am still considering your suggestion, I think there is also problem on how I used hibernate that&#39;s why I&#39;m having this error!"}],"answers":[{"tags":[],"owner":{"account_id":423356,"reputation":182,"user_id":802696,"display_name":"arshwarsi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1331367280,"creation_date":1331367280,"answer_id":9644962,"question_id":9644937,"body_markdown":"You can modify the **eclipse.ini** file located inside of our eclipse directory .&lt;br&gt;There you will find **Xms40m Xmx256m** parameter with some value , you can increase it to **Xms256m Xmx1024m** . Then check whether outofmemory error is still there . If its there then try tuning these parameter slightly increasing and check.","title":"Hibernate - OutOfMemoryError - java heap size","body":"<p>You can modify the <strong>eclipse.ini</strong> file located inside of our eclipse directory .<br>There you will find <strong>Xms40m Xmx256m</strong> parameter with some value , you can increase it to <strong>Xms256m Xmx1024m</strong> . Then check whether outofmemory error is still there . If its there then try tuning these parameter slightly increasing and check.</p>\n"},{"tags":[],"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1331367301,"creation_date":1331367301,"answer_id":9644965,"question_id":9644937,"body_markdown":"It doesn&#39;t require a compiled jar file. Choose *Run - Run configurations... - Select your run configuration - Arguments tab*. Then enter the appropriate command line argument in the *VM arguments* text box: `-Xmx1024m` for example.","title":"Hibernate - OutOfMemoryError - java heap size","body":"<p>It doesn't require a compiled jar file. Choose <em>Run - Run configurations... - Select your run configuration - Arguments tab</em>. Then enter the appropriate command line argument in the <em>VM arguments</em> text box: <code>-Xmx1024m</code> for example.</p>\n"},{"tags":[],"owner":{"account_id":217796,"reputation":4839,"user_id":473775,"accept_rate":83,"display_name":"joscarsson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1331367512,"creation_date":1331367512,"answer_id":9644987,"question_id":9644937,"body_markdown":"Apperently that was not enough for an answer... well, let me just copy the text from those answers instead :S\r\n\r\nYou can use the environment variable _JAVA_OPTIONS to set the default heap size. This will change the heap size for all Java programs. Like this:\r\n\r\n`\r\nexport _JAVA_OPTIONS=&quot;-Xmx1g&quot;\r\n`\r\n","title":"Hibernate - OutOfMemoryError - java heap size","body":"<p>Apperently that was not enough for an answer... well, let me just copy the text from those answers instead :S</p>\n\n<p>You can use the environment variable _JAVA_OPTIONS to set the default heap size. This will change the heap size for all Java programs. Like this:</p>\n\n<p><code>\nexport _JAVA_OPTIONS=\"-Xmx1g\"\n</code></p>\n"}],"owner":{"account_id":1287000,"reputation":355,"user_id":1239884,"accept_rate":36,"display_name":"Jc dev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1063,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1635769568,"creation_date":1331366949,"question_id":9644937,"body_markdown":"I&#39;m currently having this problem where I am executing a query that will load large of records. At first execution, it is successful, but when I\r\nexecute again, I am having java heap size out of memory.\r\n\r\nI Know I can increase java heap size using command line, but that requires a compiled jar file.\r\nBut I am currently on the development process, so how can I increase java heap size in that case?\r\n\r\nIm using Elipse as my IDE.\r\n\r\nThanks for any response. ","title":"Hibernate - OutOfMemoryError - java heap size","body":"<p>I'm currently having this problem where I am executing a query that will load large of records. At first execution, it is successful, but when I\nexecute again, I am having java heap size out of memory.</p>\n\n<p>I Know I can increase java heap size using command line, but that requires a compiled jar file.\nBut I am currently on the development process, so how can I increase java heap size in that case?</p>\n\n<p>Im using Elipse as my IDE.</p>\n\n<p>Thanks for any response. </p>\n"},{"tags":["java","out-of-memory","heap-memory","jmx"],"answers":[{"tags":[],"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1332513751,"creation_date":1332513751,"answer_id":9841197,"question_id":9840967,"body_markdown":"unfortunately, none.  i would love it if _something_ in the jvm remembered that an OOME had been thrown, but currently (at least as of jdk 6) nothing does.\r\n\r\nAbout the best you can do is set thresholds in the MemoryPools and see when those thresholds have been surpassed (although that doesn&#39;t necessarily mean you are out of memory...).","title":"How to detect OutOfMemoryError via JMX","body":"<p>unfortunately, none.  i would love it if <em>something</em> in the jvm remembered that an OOME had been thrown, but currently (at least as of jdk 6) nothing does.</p>\n\n<p>About the best you can do is set thresholds in the MemoryPools and see when those thresholds have been surpassed (although that doesn't necessarily mean you are out of memory...).</p>\n"},{"tags":[],"owner":{"account_id":398303,"reputation":27194,"user_id":762913,"accept_rate":75,"display_name":"pap"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1332514906,"creation_date":1332514906,"answer_id":9841491,"question_id":9840967,"body_markdown":"OutOfMemoryError is sort of the last cry for help from the JVM. By the very design of it, when the JVM throws this error, it will be in an indeterminable state. Allthough the JVM *might* recover from an OOM state, it&#39;s not something that can be relied on and it&#39;s completely in-deterministic. Particularly &quot;PermGen space&quot; is almost guaranteed to be a dead end so you can&#39;t rely on the JVM responding to really anything, including JMX.\r\n\r\nAs was propsed by jtahlborn, you can monitor memory-pools and try to catch the error before it happens, but that probably won&#39;t be very precise. Another option is to continually check the system-err log and trap the exception as it gets logged.","title":"How to detect OutOfMemoryError via JMX","body":"<p>OutOfMemoryError is sort of the last cry for help from the JVM. By the very design of it, when the JVM throws this error, it will be in an indeterminable state. Allthough the JVM <em>might</em> recover from an OOM state, it's not something that can be relied on and it's completely in-deterministic. Particularly \"PermGen space\" is almost guaranteed to be a dead end so you can't rely on the JVM responding to really anything, including JMX.</p>\n\n<p>As was propsed by jtahlborn, you can monitor memory-pools and try to catch the error before it happens, but that probably won't be very precise. Another option is to continually check the system-err log and trap the exception as it gets logged.</p>\n"},{"tags":[],"owner":{"account_id":11013,"reputation":12295,"user_id":21063,"accept_rate":47,"display_name":"Shawn Vader"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1332855314,"creation_date":1332855314,"answer_id":9890590,"question_id":9840967,"body_markdown":"Agreed there is no bean but you can monitor your heap size via jmx. \r\n\r\nAs pap mentioned the JVM is left in an indeterminable state, I am not really sure why the java engineers did this as it can mask the fact that you have had an OOM. In most instances I find it best to get the heap and kill the JVM which you can do with the following properties.\r\n\r\n-XX:OnOutOfMemoryError=&quot;kill -9 %p&quot;\r\n-XX:+HeapDumpOnOutOfMemoryError ","title":"How to detect OutOfMemoryError via JMX","body":"<p>Agreed there is no bean but you can monitor your heap size via jmx. </p>\n\n<p>As pap mentioned the JVM is left in an indeterminable state, I am not really sure why the java engineers did this as it can mask the fact that you have had an OOM. In most instances I find it best to get the heap and kill the JVM which you can do with the following properties.</p>\n\n<p>-XX:OnOutOfMemoryError=\"kill -9 %p\"\n-XX:+HeapDumpOnOutOfMemoryError </p>\n"}],"owner":{"account_id":257122,"reputation":143,"user_id":1079467,"accept_rate":25,"display_name":"kod canavari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2408,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1635769540,"creation_date":1332512917,"question_id":9840967,"body_markdown":"Which MBean tells me that a java.lang.OutOfMemoryError: PermGen space has happened to my Java application that i supervise via JMX.\r\n\r\nThanks.","title":"How to detect OutOfMemoryError via JMX","body":"<p>Which MBean tells me that a java.lang.OutOfMemoryError: PermGen space has happened to my Java application that i supervise via JMX.</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","eclipse","out-of-memory","heap-memory","stack-overflow"],"comments":[{"owner":{"account_id":890308,"reputation":47359,"user_id":928711,"accept_rate":60,"display_name":"Guillaume Polet"},"score":1,"creation_date":1334608374,"post_id":10181214,"comment_id":13066255,"body_markdown":"Maybe by posting the code we could help you? Even better, post an SSCCE http://sscce.org","body":"Maybe by posting the code we could help you? Even better, post an SSCCE <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">sscce.org</a>"},{"owner":{"account_id":890308,"reputation":47359,"user_id":928711,"accept_rate":60,"display_name":"Guillaume Polet"},"score":1,"creation_date":1334608751,"post_id":10181214,"comment_id":13066431,"body_markdown":"it&#39;s a start, but I don&#39;t see any real issue in that code. Maybe in addEdge or addNode, there is a recursion which quickly explodes? You should probably expose the whole classes.","body":"it&#39;s a start, but I don&#39;t see any real issue in that code. Maybe in addEdge or addNode, there is a recursion which quickly explodes? You should probably expose the whole classes."},{"owner":{"account_id":1315764,"reputation":4209,"user_id":1262686,"accept_rate":88,"display_name":"Anurag Ramdasan"},"score":0,"creation_date":1334609028,"post_id":10181214,"comment_id":13066534,"body_markdown":"made some more edits for better understanding. i hope this helps.","body":"made some more edits for better understanding. i hope this helps."},{"owner":{"account_id":320466,"reputation":8954,"user_id":638764,"display_name":"mazaneicha"},"score":0,"creation_date":1334609123,"post_id":10181214,"comment_id":13066583,"body_markdown":"You can try increasing your stack size with -Xss option, but generally speaking, Guillaume Polet is right -- its difficult to exhaust a stack without having an uncontrolled recursion somewhere in your code. It may be a split() also, if your test lines are really-really long with a lot of white spaces.","body":"You can try increasing your stack size with -Xss option, but generally speaking, Guillaume Polet is right -- its difficult to exhaust a stack without having an uncontrolled recursion somewhere in your code. It may be a split() also, if your test lines are really-really long with a lot of white spaces."},{"owner":{"account_id":1315764,"reputation":4209,"user_id":1262686,"accept_rate":88,"display_name":"Anurag Ramdasan"},"score":0,"creation_date":1334609287,"post_id":10181214,"comment_id":13066641,"body_markdown":"the above given code is where i get a heap error. after this i perform some recursive DFS where i obtain a stackoverflow error.","body":"the above given code is where i get a heap error. after this i perform some recursive DFS where i obtain a stackoverflow error."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1334610427,"post_id":10181214,"comment_id":13067089,"body_markdown":"So please, how large is your input, how many lines are we talking about? Millions?","body":"So please, how large is your input, how many lines are we talking about? Millions?"},{"owner":{"account_id":1315764,"reputation":4209,"user_id":1262686,"accept_rate":88,"display_name":"Anurag Ramdasan"},"score":0,"creation_date":1334610672,"post_id":10181214,"comment_id":13067169,"body_markdown":"over 5 millions i guess. but thanks anyways, the problem has been solved :)","body":"over 5 millions i guess. but thanks anyways, the problem has been solved :)"}],"answers":[{"tags":[],"owner":{"account_id":428580,"reputation":35982,"user_id":811001,"accept_rate":85,"display_name":"tskuzzy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1334608662,"creation_date":1334608662,"answer_id":10181333,"question_id":10181214,"body_markdown":"In Eclipse, you can set the size of the VM when you execute your code.\r\n\r\nGo to `Run &gt; Run configurations`. Then in the tab `Arguments`, put `-Xms1000m` under VM arguments.","title":"heap and stack in eclipse","body":"<p>In Eclipse, you can set the size of the VM when you execute your code.</p>\n\n<p>Go to <code>Run &gt; Run configurations</code>. Then in the tab <code>Arguments</code>, put <code>-Xms1000m</code> under VM arguments.</p>\n"},{"tags":[],"owner":{"account_id":36759,"reputation":38034,"user_id":104950,"accept_rate":93,"display_name":"Amir Afghani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1334609674,"creation_date":1334609674,"answer_id":10181580,"question_id":10181214,"body_markdown":"To follow up on tskuzzy&#39;s [answer][1]:\r\n\r\nFor heap, \r\n\r\n    -Xms -Xmx\r\n\r\nFor stack\r\n\r\n    -Xss\r\n\r\nI would recommend `1g` for `Xmx` and `Xmx`, and `8m` for `-Xss`\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/10181333/104950","title":"heap and stack in eclipse","body":"<p>To follow up on tskuzzy's <a href=\"https://stackoverflow.com/a/10181333/104950\">answer</a>:</p>\n\n<p>For heap, </p>\n\n<pre><code>-Xms -Xmx\n</code></pre>\n\n<p>For stack</p>\n\n<pre><code>-Xss\n</code></pre>\n\n<p>I would recommend <code>1g</code> for <code>Xmx</code> and <code>Xmx</code>, and <code>8m</code> for <code>-Xss</code></p>\n"}],"owner":{"account_id":1315764,"reputation":4209,"user_id":1262686,"accept_rate":88,"display_name":"Anurag Ramdasan"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":533,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":10181333,"answer_count":2,"score":0,"last_activity_date":1635769528,"creation_date":1334608096,"question_id":10181214,"body_markdown":"I have written a code in Eclipse which runs properly for small input values but as soon as my test cases increase in size, i get `OutOfMemoryException` or `StackOverFlow` error.\r\n\r\ni tried to use `eclipse.exe -vmargs -Xmx1g` to make my heap go out to 1G but i still get the same error. and When i try 2G it says unable to start JVM.\r\n\r\nso i m wondering if there is any ways at all for me to run this code. any help would be appreciated. thanks in advance.\r\n\r\nEDIT:\r\nthis is where my heaps overflows. the input sample is too huge and causes the momory problem.\r\n\r\n     while ((line = br.readLine()) != null) {\r\n    \t\t\r\n        \tString[] linevalue= (line.trim().split(&quot;\\\\s+&quot;));\r\n        \tint l= linevalue.length;\r\n        \tdg.addNode(Long.parseLong(linevalue[0]));\r\n        \tdg.addNode(Long.parseLong(linevalue[1]));\r\n        \tdg.addEdge(Long.parseLong(linevalue[0]), Long.parseLong(linevalue[1]));\r\n        \t\r\n      \t}\r\n\r\nIn the other class the following code is present, here mGraph is a HashMap.\r\n\r\n    public boolean addNode(T node) {\r\n        /* If the node already exists, don&#39;t do anything. */\r\n        if (mGraph.containsKey(node))\r\n            return false;\r\n\r\n        /* Otherwise, add the node with an empty set of outgoing edges. */\r\n        mGraph.put(node, new HashSet&lt;T&gt;());\r\n        return true;\r\n    }\r\n\r\n\r\n    public void addEdge(T start, T dest) {\r\n        /* Confirm both endpoints exist. */\r\n        if (!mGraph.containsKey(start) || !mGraph.containsKey(dest))\r\n            throw new NoSuchElementException(&quot;Both nodes must be in the graph.&quot;);\r\n\r\n        /* Add the edge. */\r\n        mGraph.get(start).add(dest);\r\n    }","title":"heap and stack in eclipse","body":"<p>I have written a code in Eclipse which runs properly for small input values but as soon as my test cases increase in size, i get <code>OutOfMemoryException</code> or <code>StackOverFlow</code> error.</p>\n\n<p>i tried to use <code>eclipse.exe -vmargs -Xmx1g</code> to make my heap go out to 1G but i still get the same error. and When i try 2G it says unable to start JVM.</p>\n\n<p>so i m wondering if there is any ways at all for me to run this code. any help would be appreciated. thanks in advance.</p>\n\n<p>EDIT:\nthis is where my heaps overflows. the input sample is too huge and causes the momory problem.</p>\n\n<pre><code> while ((line = br.readLine()) != null) {\n\n        String[] linevalue= (line.trim().split(\"\\\\s+\"));\n        int l= linevalue.length;\n        dg.addNode(Long.parseLong(linevalue[0]));\n        dg.addNode(Long.parseLong(linevalue[1]));\n        dg.addEdge(Long.parseLong(linevalue[0]), Long.parseLong(linevalue[1]));\n\n    }\n</code></pre>\n\n<p>In the other class the following code is present, here mGraph is a HashMap.</p>\n\n<pre><code>public boolean addNode(T node) {\n    /* If the node already exists, don't do anything. */\n    if (mGraph.containsKey(node))\n        return false;\n\n    /* Otherwise, add the node with an empty set of outgoing edges. */\n    mGraph.put(node, new HashSet&lt;T&gt;());\n    return true;\n}\n\n\npublic void addEdge(T start, T dest) {\n    /* Confirm both endpoints exist. */\n    if (!mGraph.containsKey(start) || !mGraph.containsKey(dest))\n        throw new NoSuchElementException(\"Both nodes must be in the graph.\");\n\n    /* Add the edge. */\n    mGraph.get(start).add(dest);\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3023214,"reputation":20362,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":4,"creation_date":1635768921,"post_id":69796775,"comment_id":123374030,"body_markdown":"Why not just test it?","body":"Why not just test it?"},{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":0,"creation_date":1635768937,"post_id":69796775,"comment_id":123374040,"body_markdown":"Have you *tried* making the class `abstract`?","body":"Have you <i>tried</i> making the class <code>abstract</code>?"},{"owner":{"account_id":23205480,"reputation":3,"user_id":17299763,"display_name":"Saul"},"score":0,"creation_date":1635768998,"post_id":69796775,"comment_id":123374067,"body_markdown":"I have a Super class that is abstract but I just don&#39;t know if this is abstract when it is no extended","body":"I have a Super class that is abstract but I just don&#39;t know if this is abstract when it is no extended"},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1635769062,"post_id":69796775,"comment_id":123374087,"body_markdown":"@Saul Any class can be marked as `abstract`. What exactly is the problem you have?","body":"@Saul Any class can be marked as <code>abstract</code>. What exactly is the problem you have?"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1635769114,"post_id":69796775,"comment_id":123374116,"body_markdown":"Yes there can.  Indeed, provided that you don&#39;t need to create an instance of the &quot;main&quot; class, that abstract method doesn&#39;t need a concrete method in a subclass.  (But the method would be pointless ...)","body":"Yes there can.  Indeed, provided that you don&#39;t need to create an instance of the &quot;main&quot; class, that abstract method doesn&#39;t need a concrete method in a subclass.  (But the method would be pointless ...)"},{"owner":{"account_id":23205480,"reputation":3,"user_id":17299763,"display_name":"Saul"},"score":0,"creation_date":1635769124,"post_id":69796775,"comment_id":123374120,"body_markdown":"I just tested and added &#39;abstract&#39; into the  &#39;public class AccountTester&#39; and it worked out fine. Would this class be abstract?","body":"I just tested and added &#39;abstract&#39; into the  &#39;public class AccountTester&#39; and it worked out fine. Would this class be abstract?"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1635769239,"post_id":69796775,"comment_id":123374160,"body_markdown":"Yes.  The class must be declared as abstract if it has abstract methods.  Java 101 stuff.  (Why are you asking this?  Why would you want / need your &quot;main&quot; class to be abstract / have abstract methods?  What does it achieve?  Is this just idle curiosity?  Seriously, you won&#39;t get + votes for asking &quot;I&#39;m just curious&quot; questions that could be answered with some simple tests and/or reading a tutorial.)","body":"Yes.  The class must be declared as abstract if it has abstract methods.  Java 101 stuff.  (Why are you asking this?  Why would you want / need your &quot;main&quot; class to be abstract / have abstract methods?  What does it achieve?  Is this just idle curiosity?  Seriously, you won&#39;t get + votes for asking &quot;I&#39;m just curious&quot; questions that could be answered with some simple tests and/or reading a tutorial.)"},{"owner":{"account_id":23205480,"reputation":3,"user_id":17299763,"display_name":"Saul"},"score":0,"creation_date":1635769591,"post_id":69796775,"comment_id":123374285,"body_markdown":"I am really sorry, I was just really confused with abstract methods, I am also new to Java.","body":"I am really sorry, I was just really confused with abstract methods, I am also new to Java."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1635769845,"post_id":69796775,"comment_id":123374392,"body_markdown":"They are simple.  A method is abstract if you declare it with the `abstract` modifier.  The consequence is that you cannot create an instance of that class.  You can (but you don&#39;t have to) create another class that extends your abstract class.  If *that* class is not also declared as abstract you can create an instance from it.  But it must also implement all of the methods that were declared as abstract.","body":"They are simple.  A method is abstract if you declare it with the <code>abstract</code> modifier.  The consequence is that you cannot create an instance of that class.  You can (but you don&#39;t have to) create another class that extends your abstract class.  If <i>that</i> class is not also declared as abstract you can create an instance from it.  But it must also implement all of the methods that were declared as abstract."}],"answers":[{"tags":[],"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635769175,"creation_date":1635769175,"answer_id":69796837,"question_id":69796775,"body_markdown":"Yes, that is possible.\r\n\r\nJudging by the wording of your question, you mean by &quot;main class&quot; a class with a `public static void main(String[])` method.\r\n\r\nThe method is `static`, so it is not subject to inheritance. Whether the class is marked `abstract`, is not relevant at all. The same goes for `interface`, `enum` and `record`.","title":"Can there be abstract method in a main class?","body":"<p>Yes, that is possible.</p>\n<p>Judging by the wording of your question, you mean by &quot;main class&quot; a class with a <code>public static void main(String[])</code> method.</p>\n<p>The method is <code>static</code>, so it is not subject to inheritance. Whether the class is marked <code>abstract</code>, is not relevant at all. The same goes for <code>interface</code>, <code>enum</code> and <code>record</code>.</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1635769484,"creation_date":1635769484,"answer_id":69796895,"question_id":69796775,"body_markdown":"&gt; Here is my code, and I was wondering if the class can be abstract if there is a main method and also a normal method with an abstract method inside. \r\n\r\nYou cannot put a method inside a method in java, so trivially: No, you can&#39;t do that.\r\n\r\n&gt; Would this class called an abstract class?\r\n\r\nYou can&#39;t put abstract methods in a class unless that class is also tagged `abstract`, so, trivially, yes, of course it would.\r\n\r\nYou should be trying these things instead of asking more questions on SO, you&#39;ll learn much faster that way. Stick a method in a method and attempt to compile it. Stick an abstract method in a class and compile it - you&#39;ll find the compiler tells you that your code will not compile as abstract methods are not allowed in a non-abstract class.\r\n\r\n&gt; Can there be abstract method in a main class?\r\n\r\nThe concept &#39;main class&#39; isn&#39;t a thing. You can have a class that so happens to have a method named `main`, marked `static`, with a return type of `void` and a single parameter of type `String[]`, and such a class can be executed from the command line.\r\n\r\nGiven that the `main` method is `static`, it opted out entirely of all inheritance properties of that class: You can put static methods in an abstract class or a not-abstract one, doesn&#39;t matter and has no bearing.\r\n\r\nAlso, static methods &#39;do not do&#39; inheritance, and `abstract` only makes sense in terms of what that means for inheritance; hence, a `static abstract` method does not make sense and won&#39;t compile.\r\n","title":"Can there be abstract method in a main class?","body":"<blockquote>\n<p>Here is my code, and I was wondering if the class can be abstract if there is a main method and also a normal method with an abstract method inside.</p>\n</blockquote>\n<p>You cannot put a method inside a method in java, so trivially: No, you can't do that.</p>\n<blockquote>\n<p>Would this class called an abstract class?</p>\n</blockquote>\n<p>You can't put abstract methods in a class unless that class is also tagged <code>abstract</code>, so, trivially, yes, of course it would.</p>\n<p>You should be trying these things instead of asking more questions on SO, you'll learn much faster that way. Stick a method in a method and attempt to compile it. Stick an abstract method in a class and compile it - you'll find the compiler tells you that your code will not compile as abstract methods are not allowed in a non-abstract class.</p>\n<blockquote>\n<p>Can there be abstract method in a main class?</p>\n</blockquote>\n<p>The concept 'main class' isn't a thing. You can have a class that so happens to have a method named <code>main</code>, marked <code>static</code>, with a return type of <code>void</code> and a single parameter of type <code>String[]</code>, and such a class can be executed from the command line.</p>\n<p>Given that the <code>main</code> method is <code>static</code>, it opted out entirely of all inheritance properties of that class: You can put static methods in an abstract class or a not-abstract one, doesn't matter and has no bearing.</p>\n<p>Also, static methods 'do not do' inheritance, and <code>abstract</code> only makes sense in terms of what that means for inheritance; hence, a <code>static abstract</code> method does not make sense and won't compile.</p>\n"}],"owner":{"account_id":23205480,"reputation":3,"user_id":17299763,"display_name":"Saul"},"comment_count":9,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1635769461,"accepted_answer_id":69796895,"answer_count":2,"score":-3,"last_activity_date":1635769484,"creation_date":1635768811,"question_id":69796775,"body_markdown":"```\r\n/**\r\n * Tests the BankAccount class and their subclasses\r\n * @author Saul\r\n *\r\n */\r\npublic class AccountTester \r\n{\r\n\tpublic static void main(String[] args)\r\n\t{\r\n\t\tSavingsAccount sa = new SavingsAccount(2,2000);\r\n\t\tCheckingAccount ca = new CheckingAccount(0);\r\n\t\tTimeDepositAccount hp = new TimeDepositAccount(10,3,15,5);\r\n\t\ttest(sa);\r\n\t\ttest(ca);\r\n\t\ttest(hp);\r\n\t}\r\n\t\r\n\tpublic static void test(BankAccount account)\r\n\t   {\r\n\t\t\taccount.deposit(400);\r\n\t        account.deposit(2000);\r\n\t        account.withdraw(100);\r\n\t        account.deposit(200);\r\n\t        account.withdraw(300);\r\n\t      System.out.println(account.getClass() + &quot; before endOfMonth, the balance is: $&quot; + account.getBalance());\r\n\t      \r\n\t      account.endOfMonth();\r\n\t      System.out.println(account.getClass() + &quot; after endOfMonth, the balance is: $&quot; + account.getBalance());\r\n\t   }\r\n}\r\n```\r\n   \r\nHere is my code, and I was wondering if the class can be abstract if there is a main method and also a normal method with an abstract method inside. Would this class called an abstract class?  The abstract method is endOfMonth()","title":"Can there be abstract method in a main class?","body":"<pre><code>/**\n * Tests the BankAccount class and their subclasses\n * @author Saul\n *\n */\npublic class AccountTester \n{\n    public static void main(String[] args)\n    {\n        SavingsAccount sa = new SavingsAccount(2,2000);\n        CheckingAccount ca = new CheckingAccount(0);\n        TimeDepositAccount hp = new TimeDepositAccount(10,3,15,5);\n        test(sa);\n        test(ca);\n        test(hp);\n    }\n    \n    public static void test(BankAccount account)\n       {\n            account.deposit(400);\n            account.deposit(2000);\n            account.withdraw(100);\n            account.deposit(200);\n            account.withdraw(300);\n          System.out.println(account.getClass() + &quot; before endOfMonth, the balance is: $&quot; + account.getBalance());\n          \n          account.endOfMonth();\n          System.out.println(account.getClass() + &quot; after endOfMonth, the balance is: $&quot; + account.getBalance());\n       }\n}\n</code></pre>\n<p>Here is my code, and I was wondering if the class can be abstract if there is a main method and also a normal method with an abstract method inside. Would this class called an abstract class?  The abstract method is endOfMonth()</p>\n"},{"tags":["java","out-of-memory","heap-memory","jvisualvm","jhat"],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1342517244,"creation_date":1342517244,"answer_id":11519632,"question_id":11519456,"body_markdown":"YourKit provides allocation tracing by size and by number. You can search for particular classes created and find hot spots. The evaluation version is free. ;)","title":"Java heapdump analysis find source for the instantiated objects","body":"<p>YourKit provides allocation tracing by size and by number. You can search for particular classes created and find hot spots. The evaluation version is free. ;)</p>\n"},{"tags":[],"owner":{"account_id":1675366,"reputation":1,"user_id":1541053,"display_name":"Arndt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1342794900,"creation_date":1342794900,"answer_id":11581476,"question_id":11519456,"body_markdown":"Try:\r\n\r\n  http://dr-brenschede.de/bheapsampler for an easy to understand summary or\r\n  http://www.eclipse.org/mat for a more detailed analysis\r\n\r\nthese tools do exaclty what you&#39;re looking for\r\n","title":"Java heapdump analysis find source for the instantiated objects","body":"<p>Try:</p>\n\n<p><a href=\"http://dr-brenschede.de/bheapsampler\" rel=\"nofollow\">http://dr-brenschede.de/bheapsampler</a> for an easy to understand summary or\n  <a href=\"http://www.eclipse.org/mat\" rel=\"nofollow\">http://www.eclipse.org/mat</a> for a more detailed analysis</p>\n\n<p>these tools do exaclty what you're looking for</p>\n"},{"tags":[],"owner":{"account_id":93911,"reputation":5846,"user_id":256717,"accept_rate":80,"display_name":"Fakrudeen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1343839906,"creation_date":1343839906,"answer_id":11763944,"question_id":11519456,"body_markdown":"Did you try \r\n\r\n    jhat &lt;yourdump&gt;\r\n\r\nassuming your creations are of the form:\r\n\r\nprivate Blah blah = new Blah();\r\n\r\nFor every instance you can see who holds the reference to it. It also provides a powerful query language [OQL]. \r\nSee for an example:\r\nhttps://stackoverflow.com/questions/8833353/jhat-oql-and-in-where-clause\r\n\r\nBut if you created it somewhere else and simply passed it on to be held by another class field you won&#39;t be able to find it from memory dump [with any tool], as it is only a snapshot.","title":"Java heapdump analysis find source for the instantiated objects","body":"<p>Did you try </p>\n\n<pre><code>jhat &lt;yourdump&gt;\n</code></pre>\n\n<p>assuming your creations are of the form:</p>\n\n<p>private Blah blah = new Blah();</p>\n\n<p>For every instance you can see who holds the reference to it. It also provides a powerful query language [OQL]. \nSee for an example:\n<a href=\"https://stackoverflow.com/questions/8833353/jhat-oql-and-in-where-clause\">jhat OQL AND in where clause</a></p>\n\n<p>But if you created it somewhere else and simply passed it on to be held by another class field you won't be able to find it from memory dump [with any tool], as it is only a snapshot.</p>\n"}],"owner":{"account_id":370385,"reputation":38,"user_id":718277,"display_name":"VenKatari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1273,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":11519632,"answer_count":3,"score":2,"last_activity_date":1635769455,"creation_date":1342516635,"question_id":11519456,"body_markdown":"I am analyzing a heap dump using a jvisualvm. From the report I can see the classes, number of instances and the size occipied.\r\n\r\nWhat I wanted to know is - the source (which class instantiated) of these objects. For a given object, if I could know all the source classes and the number of instances created by each of those classes, I guess it would be easy to identify the bad candidate.\r\n\r\nIs this possible at all? If so, is there any tool better than the other to provide such information?","title":"Java heapdump analysis find source for the instantiated objects","body":"<p>I am analyzing a heap dump using a jvisualvm. From the report I can see the classes, number of instances and the size occipied.</p>\n\n<p>What I wanted to know is - the source (which class instantiated) of these objects. For a given object, if I could know all the source classes and the number of instances created by each of those classes, I guess it would be easy to identify the bad candidate.</p>\n\n<p>Is this possible at all? If so, is there any tool better than the other to provide such information?</p>\n"},{"tags":["java","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":7,"creation_date":1342553608,"post_id":11529536,"comment_id":15241163,"body_markdown":"this code will only cause an OOME if you are out-running the GC.  otherwise, all the old instances are lost and will be garbage collected.  in other words, in normal usage, this code will not cause any memory problems.","body":"this code will only cause an OOME if you are out-running the GC.  otherwise, all the old instances are lost and will be garbage collected.  in other words, in normal usage, this code will not cause any memory problems."},{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":0,"creation_date":1342573033,"post_id":11529536,"comment_id":15246977,"body_markdown":"@MarkoTopolnik - make garbage faster than the GC can clean it.  at some point the GC gives up and throws OOME, even though there may theoretically be more space available.  why does that sound so far fetched to you?  a GC is just another algorithm with trade-offs, it is not some sort of &quot;perfect&quot; garbage re-claiming system.","body":"@MarkoTopolnik - make garbage faster than the GC can clean it.  at some point the GC gives up and throws OOME, even though there may theoretically be more space available.  why does that sound so far fetched to you?  a GC is just another algorithm with trade-offs, it is not some sort of &quot;perfect&quot; garbage re-claiming system."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1342598156,"post_id":11529536,"comment_id":15252741,"body_markdown":"@jtahlborn GC may have a lot of trade-offs, but this simply isn&#39;t one of them. Even the ConcurrentMarkSweep, the most concurrent version of GC available on the HotSpot, will **stop the world** and do a major GC before OOME. Also, each minor collection is **always** of the stop-the-world flavor.","body":"@jtahlborn GC may have a lot of trade-offs, but this simply isn&#39;t one of them. Even the ConcurrentMarkSweep, the most concurrent version of GC available on the HotSpot, will <b>stop the world</b> and do a major GC before OOME. Also, each minor collection is <b>always</b> of the stop-the-world flavor."},{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":0,"creation_date":1342613928,"post_id":11529536,"comment_id":15259596,"body_markdown":"@MarkoTopolnik - apparently you&#39;ve never gotten an OOME &quot;GC overhead limit exceeded&quot;.  i&#39;m not sure why you seem to think the GC has such powers of &quot;super-perfect-garbage-collection&quot; (hint, it doesn&#39;t).  And i&#39;m not sure what &quot;stopping the world&quot; has to do with anything?","body":"@MarkoTopolnik - apparently you&#39;ve never gotten an OOME &quot;GC overhead limit exceeded&quot;.  i&#39;m not sure why you seem to think the GC has such powers of &quot;super-perfect-garbage-collection&quot; (hint, it doesn&#39;t).  And i&#39;m not sure what &quot;stopping the world&quot; has to do with anything?"},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1342614091,"post_id":11529536,"comment_id":15259675,"body_markdown":"@jtahlborn Indeed I got that exception and it is unrelated. It happens when you are running close to full memory, but the GC is just barely making it everytime it runs. The system slows down to a crawl due to constant major GC cycles, whose CPU time begins to drown out any meaningful computation. Try getting that exception with a clean heap and just generating an infinite amount of short-lived objects (like in OP&#39;s code sample).","body":"@jtahlborn Indeed I got that exception and it is unrelated. It happens when you are running close to full memory, but the GC is just barely making it everytime it runs. The system slows down to a crawl due to constant major GC cycles, whose CPU time begins to drown out any meaningful computation. Try getting that exception with a clean heap and just generating an infinite amount of short-lived objects (like in OP&#39;s code sample)."},{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":0,"creation_date":1342614369,"post_id":11529536,"comment_id":15259807,"body_markdown":"@MarkoTopolnik - i agree that it would be virtually impossible for the OP&#39;s example to out-run the GC, however i was addressing your question where you seemed to have never heard of the concept: &quot;Never heard of such a thing&quot;.","body":"@MarkoTopolnik - i agree that it would be virtually impossible for the OP&#39;s example to out-run the GC, however i was addressing your question where you seemed to have never heard of the concept: &quot;Never heard of such a thing&quot;."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1342614543,"post_id":11529536,"comment_id":15259900,"body_markdown":"@jtahlborn Well, &quot;outrunning the GC&quot; is at least a misleading phrase to describe the conditions under which the OOME due to GC overhead happens. It sounds like &quot;just make sure not to be too fast with your garbage, you&#39;ll *outrun the Java Garbage Truck*!&quot;","body":"@jtahlborn Well, &quot;outrunning the GC&quot; is at least a misleading phrase to describe the conditions under which the OOME due to GC overhead happens. It sounds like &quot;just make sure not to be too fast with your garbage, you&#39;ll <i>outrun the Java Garbage Truck</i>!&quot;"},{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":0,"creation_date":1342614843,"post_id":11529536,"comment_id":15260035,"body_markdown":"@MarkoTopolnik - actually, that&#39;s exactly what i meant.  while the average program may not cause it to happen, it certainly can happen, and not just in the conditions you described.","body":"@MarkoTopolnik - actually, that&#39;s exactly what i meant.  while the average program may not cause it to happen, it certainly can happen, and not just in the conditions you described."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1342615138,"post_id":11529536,"comment_id":15260196,"body_markdown":"In every case that happens, it **does not** happen because you are *outrunning the GC*, but because you are so low on memory that the only way to satisfy your ongoing allocation requests is to purge every last byte of the heap. Even in those conditions the GC is still not getting outrun: **every reclaimable byte of the heap is being reclaimed**, but the ratio of useful work to GC work degrades.","body":"In every case that happens, it <b>does not</b> happen because you are <i>outrunning the GC</i>, but because you are so low on memory that the only way to satisfy your ongoing allocation requests is to purge every last byte of the heap. Even in those conditions the GC is still not getting outrun: <b>every reclaimable byte of the heap is being reclaimed</b>, but the ratio of useful work to GC work degrades."}],"answers":[{"tags":[],"owner":{"account_id":25066,"reputation":66292,"user_id":64174,"accept_rate":100,"display_name":"Sean Owen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1342554302,"creation_date":1342554302,"answer_id":11529772,"question_id":11529536,"body_markdown":"In what sense does it consume 5-10MB of memory? you&#39;re allocating that much here. Java is not going to bother reclaiming it until it needs memory. This can&#39;t be causing `OutOfMemoryError`, not this type of code.\r\n\r\nSo, why not actually show the kind of code that is causing the OOME?","title":"Memory issue in Java","body":"<p>In what sense does it consume 5-10MB of memory? you're allocating that much here. Java is not going to bother reclaiming it until it needs memory. This can't be causing <code>OutOfMemoryError</code>, not this type of code.</p>\n\n<p>So, why not actually show the kind of code that is causing the OOME?</p>\n"},{"tags":[],"owner":{"account_id":299631,"reputation":118,"user_id":606319,"display_name":"Asim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1342606892,"creation_date":1342606892,"answer_id":11539190,"question_id":11529536,"body_markdown":"Thanks for the support guys, actually my problem was resolved after garbage collecting manually by calling **System.gc()** statement.","title":"Memory issue in Java","body":"<p>Thanks for the support guys, actually my problem was resolved after garbage collecting manually by calling <strong>System.gc()</strong> statement.</p>\n"}],"owner":{"account_id":299631,"reputation":118,"user_id":606319,"display_name":"Asim"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":250,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1635769442,"creation_date":1342553454,"question_id":11529536,"body_markdown":"I&#39;ve a multi-threaded program which deals with lots of String manipulations and after few hrs of executions the memory exceeds and cause the &quot;java.lang.OutOfMemoryError: Java heap space&quot; issue. And I&#39;ve already utilized my whole memory to the java program i.e.  16 GB.\r\n\r\nFor the test I&#39;ve created following sample program to understand the issue and its doing the same issue, after just re-initializing a string builder few thousand times it consumes more than 5-10MB of memory, can anyone pls help to overcome this issue.\r\n\r\n    StringBuilder strObj = new StringBuilder();\r\n    for(int i=0; i&lt;50000; i++) {\r\n        strObj = null;\r\n        strObj = new StringBuilder();\r\n    }\r\n\r\n","title":"Memory issue in Java","body":"<p>I've a multi-threaded program which deals with lots of String manipulations and after few hrs of executions the memory exceeds and cause the \"java.lang.OutOfMemoryError: Java heap space\" issue. And I've already utilized my whole memory to the java program i.e.  16 GB.</p>\n\n<p>For the test I've created following sample program to understand the issue and its doing the same issue, after just re-initializing a string builder few thousand times it consumes more than 5-10MB of memory, can anyone pls help to overcome this issue.</p>\n\n<pre><code>StringBuilder strObj = new StringBuilder();\nfor(int i=0; i&lt;50000; i++) {\n    strObj = null;\n    strObj = new StringBuilder();\n}\n</code></pre>\n"},{"tags":["java","jakarta-ee","out-of-memory","weblogic","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":40939,"reputation":41525,"user_id":118846,"display_name":"Mikko Maunu"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1343298230,"creation_date":1343298230,"answer_id":11667303,"question_id":11667228,"body_markdown":"For Admin Server this can be done in `$domain_home/bin/setDomainEnv.sh` (most likely corresponding bat if you use Windows) script, for managed servers via Weblogic console. ","title":"Setting Java Heap Space in Weblogic Server","body":"<p>For Admin Server this can be done in <code>$domain_home/bin/setDomainEnv.sh</code> (most likely corresponding bat if you use Windows) script, for managed servers via Weblogic console. </p>\n"},{"tags":[],"owner":{"account_id":1649102,"reputation":706,"user_id":1520019,"accept_rate":80,"display_name":"tomi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1343298358,"creation_date":1343298358,"answer_id":11667332,"question_id":11667228,"body_markdown":"If you&#39;re starting weblogic form IDE like Eclipse you can change this in Run Configuration options (JVM Arguments).","title":"Setting Java Heap Space in Weblogic Server","body":"<p>If you're starting weblogic form IDE like Eclipse you can change this in Run Configuration options (JVM Arguments).</p>\n"},{"tags":[],"owner":{"account_id":1164575,"reputation":118,"user_id":1143469,"display_name":"Siarhei Skavarodkin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1375435749,"creation_date":1375435749,"answer_id":18013391,"question_id":11667228,"body_markdown":"You can change it in Server Start arguments as described here:\r\nhttp://itbitsolutions.wordpress.com/2010/08/22/increasing-the-heap-size-of-the-jvm/\r\n\r\nafter changing, you need to restart servers to apply changes.","title":"Setting Java Heap Space in Weblogic Server","body":"<p>You can change it in Server Start arguments as described here:\n<a href=\"http://itbitsolutions.wordpress.com/2010/08/22/increasing-the-heap-size-of-the-jvm/\" rel=\"nofollow\">http://itbitsolutions.wordpress.com/2010/08/22/increasing-the-heap-size-of-the-jvm/</a></p>\n\n<p>after changing, you need to restart servers to apply changes.</p>\n"},{"tags":[],"owner":{"account_id":474122,"reputation":1627,"user_id":883603,"accept_rate":75,"display_name":"Dormouse"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1395833560,"creation_date":1395833560,"answer_id":22659689,"question_id":11667228,"body_markdown":"The environment variable USER_MEM_ARGS on WLS 12c.\r\n\r\nFor instance:\r\n\r\n    -Xms256m -Xmx768m -XX:MaxPermSize=256m\r\n\r\nDon&#39;t forget the MaxPermSize, or it will default and probably niet be enough.","title":"Setting Java Heap Space in Weblogic Server","body":"<p>The environment variable USER_MEM_ARGS on WLS 12c.</p>\n\n<p>For instance:</p>\n\n<pre><code>-Xms256m -Xmx768m -XX:MaxPermSize=256m\n</code></pre>\n\n<p>Don't forget the MaxPermSize, or it will default and probably niet be enough.</p>\n"}],"owner":{"account_id":173381,"reputation":2385,"user_id":402011,"accept_rate":96,"display_name":"LGAP"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26305,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":11667303,"answer_count":4,"score":2,"last_activity_date":1635769430,"creation_date":1343297980,"question_id":11667228,"body_markdown":"I have my Java EE web application deployed and running in Weblogic server.\r\n\r\nIf I want to set min and max arguments like this, Xms100m Xmx500m, where should I change this?\r\n\r\nWhether in `Weblogic 10.0MP` server (if so, where) or while building the application in IDE? \r\n\r\n","title":"Setting Java Heap Space in Weblogic Server","body":"<p>I have my Java EE web application deployed and running in Weblogic server.</p>\n\n<p>If I want to set min and max arguments like this, Xms100m Xmx500m, where should I change this?</p>\n\n<p>Whether in <code>Weblogic 10.0MP</code> server (if so, where) or while building the application in IDE? </p>\n"},{"tags":["java","jasper-reports","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":160245,"reputation":2421,"user_id":380161,"accept_rate":57,"display_name":"Anupam Saini"},"score":0,"creation_date":1346053548,"post_id":12127203,"comment_id":16236412,"body_markdown":"I was going through your configuration &amp; I found it odd that you are allocating 3 Gb of RAM (Xms3072m-Xmx3072m) when your physical memory is 2 GB (2GB of RAM and a 2CPU machine).","body":"I was going through your configuration &amp; I found it odd that you are allocating 3 Gb of RAM (Xms3072m-Xmx3072m) when your physical memory is 2 GB (2GB of RAM and a 2CPU machine)."}],"answers":[{"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1346045134,"creation_date":1346045134,"answer_id":12136598,"question_id":12127203,"body_markdown":"Have you tried to profile your application? \r\n\r\nTry to take a memory dump and investigate, maybe you have too many objects in memory of the same type/ some very big objects that eats all your memory.\r\n\r\nYou can consider to use JVisualVM or any other profile available at your organization\r\n\r\n","title":"Java heap space memory error while while downloading JR report","body":"<p>Have you tried to profile your application? </p>\n\n<p>Try to take a memory dump and investigate, maybe you have too many objects in memory of the same type/ some very big objects that eats all your memory.</p>\n\n<p>You can consider to use JVisualVM or any other profile available at your organization</p>\n"},{"tags":[],"owner":{"account_id":114769,"reputation":5726,"user_id":301650,"accept_rate":56,"display_name":"Nikem"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1346073748,"creation_date":1346073748,"answer_id":12142833,"question_id":12127203,"body_markdown":"May be easier than trying to sort the memory dump out would be to try [Plumbr][1]. It is pretty good in spotting memory leaks.\r\n\r\n\r\n  [1]: http://plumbr.eu","title":"Java heap space memory error while while downloading JR report","body":"<p>May be easier than trying to sort the memory dump out would be to try <a href=\"http://plumbr.eu\" rel=\"nofollow\">Plumbr</a>. It is pretty good in spotting memory leaks.</p>\n"}],"owner":{"account_id":1783126,"reputation":1,"user_id":1625314,"display_name":"user1625314"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":705,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1635769405,"creation_date":1345948409,"question_id":12127203,"body_markdown":"I am fetching data from data base (records in table 911830) and adding it to *JR* report for 1000 records its working fine. When I exceed or some time its giving Java heap space memory error as title of this issue it is related to Java heap memory, but I increase it 3Gb as (Xms3072m-Xmx3072m). But still getting same error\r\n\r\nMy system configuration is as below::\r\n\r\n1. 64 bit is fine\r\n2. Redhat/ CentOS (latest versions)\r\n3. 120GB with RAID configuration\r\n4.  2GB of RAM and a 2CPU machine \r\n\r\n    \r\n\r\nconsole error ::\r\n\r\n    Aug 26, 2012 7:11:14 AM org.apache.catalina.core.ApplicationDispatcher invoke\r\n    SEVERE: Servlet.service() for servlet `enter code here`jsp threw exception\r\n    java.lang.OutOfMemoryError: Java heap space\r\n    \tat com.opensymphony.module.sitemesh.html.util.CharArray.grow(CharArray.java:267)\r\n    \tat com.opensymphony.module.sitemesh.html.util.CharArray.append(CharArray.java:117)\r\n    \tat com.opensymphony.module.sitemesh.html.tokenizer.Parser$ReusableToken.writeTo(Parser.java:343)\r\n    \tat com.opensymphony.module.sitemesh.html.State.handleText(State.java:64)\r\n    \tat com.opensymphony.module.sitemesh.html.HTMLProcessor$2.text(HTMLProcessor.java:103)\r\n    \tat com.opensymphony.module.sitemesh.html.tokenizer.Parser.parsedText(Parser.java:295)\r\n    \tat com.opensymphony.module.sitemesh.html.tokenizer.Parser.start(Parser.java:109)\r\n    \tat com.opensymphony.module.sitemesh.html.tokenizer.TagTokenizer.start(TagTokenizer.java:33)\r\n    \tat com.opensymphony.module.sitemesh.html.HTMLProcessor.process(HTMLProcessor.java:90)\r\n    \tat com.opensymphony.module.sitemesh.parser.HTMLPageParser.parse(HTMLPageParser.java:52)\r\n    \tat com.opensymphony.sitemesh.compatability.PageParser2ContentProcessor.build(PageParser2ContentProcessor.java:51)\r\n    \tat com.opensymphony.sitemesh.webapp.ContentBufferingResponse.getContent(ContentBufferingResponse.java:54)\r\n    \tat com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:137)\r\n    \tat com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:143)\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)\r\n    \tat org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)\r\n    \tat org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1063)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:801)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)\r\n    Aug 26, 2012 7:11:14 AM org.apache.catalina.core.StandardWrapperValve invoke\r\n    SEVERE: Servlet.service() for servlet action threw exception\r\n    java.lang.OutOfMemoryError: Java heap space\r\n    \tat com.opensymphony.module.sitemesh.html.util.CharArray.grow(CharArray.java:267)\r\n    \tat com.opensymphony.module.sitemesh.html.util.CharArray.append(CharArray.java:117)\r\n    \tat com.opensymphony.module.sitemesh.html.tokenizer.Parser$ReusableToken.writeTo(Parser.java:343)\r\n    \tat com.opensymphony.module.sitemesh.html.State.handleText(State.java:64)\r\n    \tat com.opensymphony.module.sitemesh.html.HTMLProcessor$2.text(HTMLProcessor.java:103)\r\n    \tat com.opensymphony.module.sitemesh.html.tokenizer.Parser.parsedText(Parser.java:295)\r\n    \tat com.opensymphony.module.sitemesh.html.tokenizer.Parser.start(Parser.java:109)\r\n    \tat com.opensymphony.module.sitemesh.html.tokenizer.TagTokenizer.start(TagTokenizer.java:33)\r\n    \tat com.opensymphony.module.sitemesh.html.HTMLProcessor.process(HTMLProcessor.java:90)\r\n    \tat com.opensymphony.module.sitemesh.parser.HTMLPageParser.parse(HTMLPageParser.java:52)\r\n    \tat com.opensymphony.sitemesh.compatability.PageParser2ContentProcessor.build(PageParser2ContentProcessor.java:51)\r\n    \tat com.opensymphony.sitemesh.webapp.ContentBufferingResponse.getContent(ContentBufferingResponse.java:54)\r\n    \tat com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:137)\r\n    \tat com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:143)\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)\r\n    \tat org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)\r\n    \tat org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1063)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:801)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)\r\n\r\n","title":"Java heap space memory error while while downloading JR report","body":"<p>I am fetching data from data base (records in table 911830) and adding it to <em>JR</em> report for 1000 records its working fine. When I exceed or some time its giving Java heap space memory error as title of this issue it is related to Java heap memory, but I increase it 3Gb as (Xms3072m-Xmx3072m). But still getting same error</p>\n\n<p>My system configuration is as below::</p>\n\n<ol>\n<li>64 bit is fine</li>\n<li>Redhat/ CentOS (latest versions)</li>\n<li>120GB with RAID configuration</li>\n<li>2GB of RAM and a 2CPU machine </li>\n</ol>\n\n<p>console error ::</p>\n\n<pre><code>Aug 26, 2012 7:11:14 AM org.apache.catalina.core.ApplicationDispatcher invoke\nSEVERE: Servlet.service() for servlet `enter code here`jsp threw exception\njava.lang.OutOfMemoryError: Java heap space\n    at com.opensymphony.module.sitemesh.html.util.CharArray.grow(CharArray.java:267)\n    at com.opensymphony.module.sitemesh.html.util.CharArray.append(CharArray.java:117)\n    at com.opensymphony.module.sitemesh.html.tokenizer.Parser$ReusableToken.writeTo(Parser.java:343)\n    at com.opensymphony.module.sitemesh.html.State.handleText(State.java:64)\n    at com.opensymphony.module.sitemesh.html.HTMLProcessor$2.text(HTMLProcessor.java:103)\n    at com.opensymphony.module.sitemesh.html.tokenizer.Parser.parsedText(Parser.java:295)\n    at com.opensymphony.module.sitemesh.html.tokenizer.Parser.start(Parser.java:109)\n    at com.opensymphony.module.sitemesh.html.tokenizer.TagTokenizer.start(TagTokenizer.java:33)\n    at com.opensymphony.module.sitemesh.html.HTMLProcessor.process(HTMLProcessor.java:90)\n    at com.opensymphony.module.sitemesh.parser.HTMLPageParser.parse(HTMLPageParser.java:52)\n    at com.opensymphony.sitemesh.compatability.PageParser2ContentProcessor.build(PageParser2ContentProcessor.java:51)\n    at com.opensymphony.sitemesh.webapp.ContentBufferingResponse.getContent(ContentBufferingResponse.java:54)\n    at com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:137)\n    at com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:143)\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)\n    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)\n    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)\n    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)\n    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)\n    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)\n    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1063)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:801)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)\nAug 26, 2012 7:11:14 AM org.apache.catalina.core.StandardWrapperValve invoke\nSEVERE: Servlet.service() for servlet action threw exception\njava.lang.OutOfMemoryError: Java heap space\n    at com.opensymphony.module.sitemesh.html.util.CharArray.grow(CharArray.java:267)\n    at com.opensymphony.module.sitemesh.html.util.CharArray.append(CharArray.java:117)\n    at com.opensymphony.module.sitemesh.html.tokenizer.Parser$ReusableToken.writeTo(Parser.java:343)\n    at com.opensymphony.module.sitemesh.html.State.handleText(State.java:64)\n    at com.opensymphony.module.sitemesh.html.HTMLProcessor$2.text(HTMLProcessor.java:103)\n    at com.opensymphony.module.sitemesh.html.tokenizer.Parser.parsedText(Parser.java:295)\n    at com.opensymphony.module.sitemesh.html.tokenizer.Parser.start(Parser.java:109)\n    at com.opensymphony.module.sitemesh.html.tokenizer.TagTokenizer.start(TagTokenizer.java:33)\n    at com.opensymphony.module.sitemesh.html.HTMLProcessor.process(HTMLProcessor.java:90)\n    at com.opensymphony.module.sitemesh.parser.HTMLPageParser.parse(HTMLPageParser.java:52)\n    at com.opensymphony.sitemesh.compatability.PageParser2ContentProcessor.build(PageParser2ContentProcessor.java:51)\n    at com.opensymphony.sitemesh.webapp.ContentBufferingResponse.getContent(ContentBufferingResponse.java:54)\n    at com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:137)\n    at com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:143)\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)\n    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)\n    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)\n    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)\n    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)\n    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)\n    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1063)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:801)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)\n</code></pre>\n"},{"tags":["java","jvm","out-of-memory","heap-memory","execution-time"],"comments":[{"owner":{"account_id":13908,"reputation":7947,"user_id":28190,"accept_rate":67,"display_name":"Dan Gravell"},"score":0,"creation_date":1347294079,"post_id":12355611,"comment_id":16591493,"body_markdown":"Maybe you should create a heap dump with -XX:+HeapDumpOnOutOfMemoryError and then using MAT or similar to see what&#39;s using up the memory.","body":"Maybe you should create a heap dump with -XX:+HeapDumpOnOutOfMemoryError and then using MAT or similar to see what&#39;s using up the memory."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1347294392,"post_id":12355611,"comment_id":16591622,"body_markdown":"I would use VisualVM or a commercial memory profiler like YourKit.","body":"I would use VisualVM or a commercial memory profiler like YourKit."},{"owner":{"account_id":1322191,"reputation":11583,"user_id":1267768,"accept_rate":83,"display_name":"Matt"},"score":0,"creation_date":1347296695,"post_id":12355611,"comment_id":16592443,"body_markdown":"looks to me like you also have two different jvm versions.  Not saying it&#39;s your issue, but it could contribute.","body":"looks to me like you also have two different jvm versions.  Not saying it&#39;s your issue, but it could contribute."},{"owner":{"account_id":1828550,"reputation":91,"user_id":1660640,"display_name":"user1660640"},"score":0,"creation_date":1347297236,"post_id":12355611,"comment_id":16592634,"body_markdown":"Thanks all, I shall examine heap dumps. @Matt: you are correct, they are slightly different. However I tried both java 6 and 7 JVMs, and they both gave the same issue. I would find it very strange if the Macs were running a JVM that needed less than half the RAM to run the same job.","body":"Thanks all, I shall examine heap dumps. @Matt: you are correct, they are slightly different. However I tried both java 6 and 7 JVMs, and they both gave the same issue. I would find it very strange if the Macs were running a JVM that needed less than half the RAM to run the same job."}],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1347294168,"creation_date":1347294168,"answer_id":12355699,"question_id":12355611,"body_markdown":"I suspect one has faster network or disk IO.  If you are using queues to write to the disk or write to the network where one computer can keep up and but the other cannot, the queue might grow slowing the machine and using an unlimited amount of memory.\r\n\r\nIf you have faster network IO it can either help send data faster (keeping queues small), or it can mean you receive data too fast (meaning queue can grow faster than they are consumed)\r\n\r\nA lot depends on what your application actually does.  When your program gets an OOME I suggest you get a heap dump and analyse it and look for collections (e.g. queue) which are consuming a lot of memory.","title":"Same program, same JVM, but vastly different memory requirements and execution time on different machines - why?","body":"<p>I suspect one has faster network or disk IO.  If you are using queues to write to the disk or write to the network where one computer can keep up and but the other cannot, the queue might grow slowing the machine and using an unlimited amount of memory.</p>\n\n<p>If you have faster network IO it can either help send data faster (keeping queues small), or it can mean you receive data too fast (meaning queue can grow faster than they are consumed)</p>\n\n<p>A lot depends on what your application actually does.  When your program gets an OOME I suggest you get a heap dump and analyse it and look for collections (e.g. queue) which are consuming a lot of memory.</p>\n"},{"tags":[],"owner":{"account_id":1042688,"reputation":536,"user_id":1048373,"display_name":"Eric Pabst"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1379595308,"creation_date":1379595308,"answer_id":18895190,"question_id":12355611,"body_markdown":"I suspect that the problem is that you are using the Server JVM.  The Client JVM is not available on 64 bit machines.  Even if you ask for the Client JVM it will give you the Server one.","title":"Same program, same JVM, but vastly different memory requirements and execution time on different machines - why?","body":"<p>I suspect that the problem is that you are using the Server JVM.  The Client JVM is not available on 64 bit machines.  Even if you ask for the Client JVM it will give you the Server one.</p>\n"}],"owner":{"account_id":1828550,"reputation":91,"user_id":1660640,"display_name":"user1660640"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1023,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":2,"score":9,"last_activity_date":1635769391,"creation_date":1347293850,"question_id":12355611,"body_markdown":"I&#39;m trying to run a [NetLogo][1] (a java simulation framework) simulation on a cluster as part of a large experiment. I was surprised at the seemingly massive memory requirement of a (relatively) simple simulation. On the cluster it throws &quot;java.lang.OutOfMemoryError: Java heap space&quot; exceptions for anything less than &quot;-Xmx2500M&quot; heapsizes. A single execution takes 5 hours to run. I ran the same experiment on both my Macs (iMac and MacBook Pro), and they executed in less than one hour, with &quot;-Xmx1024&quot; giving no errors. The cluster jobs require &quot;-XX:MaxPermSize=250M&quot; whereas on my Macs no increase above default is required. I ran the same code, the same inputs, using the exact same jars in all cases. \r\n\r\n64 bit JVMs are used in each case (and as far as I know these are pretty similar):\r\n\r\n    &lt;on the cluster&gt;\r\n    $ java -version\r\n    java version &quot;1.6.0_26&quot;\r\n    Java(TM) SE Runtime Environment (build 1.6.0_26-b03)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 20.1-b02, mixed mode)\r\n\r\n    &lt;on my macs&gt;\r\n    $ java -version\r\n    java version &quot;1.6.0_31&quot;\r\n    Java(TM) SE Runtime Environment (build 1.6.0_31-b04-415-10M3646)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 20.6-b01-415, mixed mode)\r\n\r\n\r\nAnd I am running Client JVM in all cases (was initially using Server on cluster, switching to client made no difference). I have tried executing on the cluster with java 7, same huge memory and execution time issues. \r\n\r\nI am completely perplexed, no one I have spoken to can explain this. Has anyone out there come across this before? Any help greatly appreciated!\r\n\r\n  [1]: http://ccl.northwestern.edu/netlogo/","title":"Same program, same JVM, but vastly different memory requirements and execution time on different machines - why?","body":"<p>I'm trying to run a <a href=\"http://ccl.northwestern.edu/netlogo/\" rel=\"nofollow noreferrer\">NetLogo</a> (a java simulation framework) simulation on a cluster as part of a large experiment. I was surprised at the seemingly massive memory requirement of a (relatively) simple simulation. On the cluster it throws \"java.lang.OutOfMemoryError: Java heap space\" exceptions for anything less than \"-Xmx2500M\" heapsizes. A single execution takes 5 hours to run. I ran the same experiment on both my Macs (iMac and MacBook Pro), and they executed in less than one hour, with \"-Xmx1024\" giving no errors. The cluster jobs require \"-XX:MaxPermSize=250M\" whereas on my Macs no increase above default is required. I ran the same code, the same inputs, using the exact same jars in all cases. </p>\n\n<p>64 bit JVMs are used in each case (and as far as I know these are pretty similar):</p>\n\n<pre><code>&lt;on the cluster&gt;\n$ java -version\njava version \"1.6.0_26\"\nJava(TM) SE Runtime Environment (build 1.6.0_26-b03)\nJava HotSpot(TM) 64-Bit Server VM (build 20.1-b02, mixed mode)\n\n&lt;on my macs&gt;\n$ java -version\njava version \"1.6.0_31\"\nJava(TM) SE Runtime Environment (build 1.6.0_31-b04-415-10M3646)\nJava HotSpot(TM) 64-Bit Server VM (build 20.6-b01-415, mixed mode)\n</code></pre>\n\n<p>And I am running Client JVM in all cases (was initially using Server on cluster, switching to client made no difference). I have tried executing on the cluster with java 7, same huge memory and execution time issues. </p>\n\n<p>I am completely perplexed, no one I have spoken to can explain this. Has anyone out there come across this before? Any help greatly appreciated!</p>\n"},{"tags":["java","r","out-of-memory","heap-memory","r-xlsx"],"comments":[{"owner":{"account_id":511595,"reputation":34062,"user_id":3576984,"accept_rate":90,"display_name":"MichaelChirico"},"score":0,"creation_date":1456366609,"post_id":12625481,"comment_id":58917245,"body_markdown":"It&#39;s because of this issue that I gave up on the `xlsx` package and have moved to `readxl`, which is [faster](http://stackoverflow.com/questions/6099243/read-an-excel-file-directly-from-a-r-script/31734198#31734198)","body":"It&#39;s because of this issue that I gave up on the <code>xlsx</code> package and have moved to <code>readxl</code>, which is <a href=\"http://stackoverflow.com/questions/6099243/read-an-excel-file-directly-from-a-r-script/31734198#31734198\">faster</a>"},{"owner":{"account_id":1879534,"reputation":521,"user_id":1700047,"accept_rate":86,"display_name":"elarry"},"score":0,"creation_date":1693300138,"post_id":12625481,"comment_id":135739106,"body_markdown":"@MichaelChirico I recently encountered the same problem with the xlsx package. I normally use the readxl package for reading Excel files, but had to use the xlsx package as readxl can&#39;t open password-protected spreadsheets.","body":"@MichaelChirico I recently encountered the same problem with the xlsx package. I normally use the readxl package for reading Excel files, but had to use the xlsx package as readxl can&#39;t open password-protected spreadsheets."}],"answers":[{"tags":[],"owner":{"account_id":197516,"reputation":16316,"user_id":1213738,"accept_rate":62,"display_name":"Chandra Sekhar"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1348763249,"creation_date":1348762855,"answer_id":12625833,"question_id":12625481,"body_markdown":"Try to increase java Heap size(sufficient), by using:&lt;br/&gt;\r\n\r\n    options(java.parameters = &quot;-Xmx1000m&quot;)\r\n\r\n&gt; If you are using 32 bit R make sure you are also using 32 bit Java and\r\n&gt; if you re using 64 bit R make sure you are also using 64 bit Java. If\r\n&gt; you get a Java heap space message indicating that it is out of memory\r\n&gt; see [this post][1].\r\n\r\n [this thread][2] may help you, to use Garbage Collection.\r\n\r\n**Reference:**&lt;br/&gt;\r\n[exchanging_data_between_r_and_ms_windows_apps_excel_etc][3]&lt;br/&gt;\r\n[stats-rosuda-devel_001621][4]\r\n\r\n\r\n  [1]: http://rwiki.sciviews.org/doku.php?id=tips:data-io:ms_windows#exchanging_data_between_r_and_ms_windows_apps_excel_etc\r\n  [2]: http://comments.gmane.org/gmane.comp.lang.r.mac/6552\r\n  [3]: http://rwiki.sciviews.org/doku.php?id=tips:data-io:ms_windows#exchanging_data_between_r_and_ms_windows_apps_excel_etc\r\n  [4]: http://mailman.rz.uni-augsburg.de/pipermail/stats-rosuda-devel/2011q1/001621.html","title":"MemoryError in R while read.xlsx","body":"<p>Try to increase java Heap size(sufficient), by using:<br/></p>\n\n<pre><code>options(java.parameters = \"-Xmx1000m\")\n</code></pre>\n\n<blockquote>\n  <p>If you are using 32 bit R make sure you are also using 32 bit Java and\n  if you re using 64 bit R make sure you are also using 64 bit Java. If\n  you get a Java heap space message indicating that it is out of memory\n  see <a href=\"http://rwiki.sciviews.org/doku.php?id=tips:data-io:ms_windows#exchanging_data_between_r_and_ms_windows_apps_excel_etc\" rel=\"noreferrer\">this post</a>.</p>\n</blockquote>\n\n<p><a href=\"http://comments.gmane.org/gmane.comp.lang.r.mac/6552\" rel=\"noreferrer\">this thread</a> may help you, to use Garbage Collection.</p>\n\n<p><strong>Reference:</strong><br/>\n<a href=\"http://rwiki.sciviews.org/doku.php?id=tips:data-io:ms_windows#exchanging_data_between_r_and_ms_windows_apps_excel_etc\" rel=\"noreferrer\">exchanging_data_between_r_and_ms_windows_apps_excel_etc</a><br/>\n<a href=\"http://mailman.rz.uni-augsburg.de/pipermail/stats-rosuda-devel/2011q1/001621.html\" rel=\"noreferrer\">stats-rosuda-devel_001621</a></p>\n"},{"tags":[],"owner":{"account_id":1272872,"reputation":2251,"user_id":1228765,"accept_rate":60,"display_name":"Martin Studer"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1348847746,"creation_date":1348847746,"answer_id":12643351,"question_id":12625481,"body_markdown":"You should make sure that you are setting the Java parameters **before** any JVM is initialized, i.e. before either the XLConnect or xlsx packages are loaded. Note that in your case you are using the *read.xlsx* function which is not an XLConnect function and therefore the XLConnect package is not required. The XLConnect alternative is the function *readWorksheetFromFile*.","title":"MemoryError in R while read.xlsx","body":"<p>You should make sure that you are setting the Java parameters <strong>before</strong> any JVM is initialized, i.e. before either the XLConnect or xlsx packages are loaded. Note that in your case you are using the <em>read.xlsx</em> function which is not an XLConnect function and therefore the XLConnect package is not required. The XLConnect alternative is the function <em>readWorksheetFromFile</em>.</p>\n"},{"tags":[],"owner":{"account_id":4706723,"reputation":93,"user_id":3808591,"display_name":"jatin kashyap"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1423169503,"creation_date":1423169503,"answer_id":28353752,"question_id":12625481,"body_markdown":"Try this :-\r\nMay be this can work. It worked for me \r\n\r\n1)  when downloading the xlsx file, use this \r\ndownload.file(fileURL, destfile=&quot;./whatever&quot;, mode=&quot;wb&quot;)\r\n\r\n2)  Switched to regular R, not R Studio, ","title":"MemoryError in R while read.xlsx","body":"<p>Try this :-\nMay be this can work. It worked for me </p>\n\n<p>1)  when downloading the xlsx file, use this \ndownload.file(fileURL, destfile=\"./whatever\", mode=\"wb\")</p>\n\n<p>2)  Switched to regular R, not R Studio, </p>\n"}],"owner":{"display_name":"user1703914"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21788,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"answer_count":3,"score":14,"last_activity_date":1635769376,"creation_date":1348761670,"question_id":12625481,"body_markdown":"I am using the following R code (that utilizes the Java parameter to increase memory as well):\r\n\r\n    library(xlsx)\r\n    options(java.parameters = &quot;-Xmx1g&quot;)\r\n    library(XLConnect)\r\n    NiVe &lt;- read.xlsx(&quot;version1.xlsx&quot;,1)\r\n\r\nThe `version1.xlsx` file is 13 MB in size. I get the following error:\r\n\r\n    Error in .jcall(&quot;RJavaTools&quot;, &quot;Ljava/lang/Object;&quot;, &quot;invokeMethod&quot;, cl,  : \r\n      java.lang.OutOfMemoryError: Java heap space\r\n\r\nCan someone help?","title":"MemoryError in R while read.xlsx","body":"<p>I am using the following R code (that utilizes the Java parameter to increase memory as well):</p>\n\n<pre><code>library(xlsx)\noptions(java.parameters = \"-Xmx1g\")\nlibrary(XLConnect)\nNiVe &lt;- read.xlsx(\"version1.xlsx\",1)\n</code></pre>\n\n<p>The <code>version1.xlsx</code> file is 13 MB in size. I get the following error:</p>\n\n<pre><code>Error in .jcall(\"RJavaTools\", \"Ljava/lang/Object;\", \"invokeMethod\", cl,  : \n  java.lang.OutOfMemoryError: Java heap space\n</code></pre>\n\n<p>Can someone help?</p>\n"},{"tags":["java","out-of-memory","heap-memory","heap-dump"],"comments":[{"owner":{"account_id":96904,"reputation":6821,"user_id":263149,"accept_rate":81,"display_name":"sharakan"},"score":0,"creation_date":1360180589,"post_id":14734051,"comment_id":20621413,"body_markdown":"What is a &#39;digital dump&#39;?  Is that different than what, for example, JMap produces?","body":"What is a &#39;digital dump&#39;?  Is that different than what, for example, JMap produces?"},{"owner":{"account_id":96904,"reputation":6821,"user_id":263149,"accept_rate":81,"display_name":"sharakan"},"score":0,"creation_date":1360180673,"post_id":14734051,"comment_id":20621460,"body_markdown":"After your update, is there still an actual question here?","body":"After your update, is there still an actual question here?"},{"owner":{"account_id":1909095,"reputation":454,"user_id":1723383,"accept_rate":44,"display_name":"DJR"},"score":0,"creation_date":1360181226,"post_id":14734051,"comment_id":20621709,"body_markdown":"Yes sir.. i am still trying to see how i can reduce the size of the thumbnails (6mb). My actual images are less than 100kb. i am using\n       toglBtn=new JToggleButton(&quot;&quot;+i,new ImageIcon(ImageIO.read(new      File(listOfFiles[i].getAbsolutePath())).getScaledInstance(139, 163, BufferedImage.SCALE_SMOOTH)));\n\nto create the thumbnails and make them jtogglebuttons which can be selected individually.. each of these buttons is 6 mb now.","body":"Yes sir.. i am still trying to see how i can reduce the size of the thumbnails (6mb). My actual images are less than 100kb. i am using        toglBtn=new JToggleButton(&quot;&quot;+i,new ImageIcon(ImageIO.read(new      File(listOfFiles[i].getAbsolutePath())).getScaledInstance(13&zwnj;&#8203;9, 163, BufferedImage.SCALE_SMOOTH)));  to create the thumbnails and make them jtogglebuttons which can be selected individually.. each of these buttons is 6 mb now."},{"owner":{"account_id":96904,"reputation":6821,"user_id":263149,"accept_rate":81,"display_name":"sharakan"},"score":0,"creation_date":1360183481,"post_id":14734051,"comment_id":20622780,"body_markdown":"You should either edit this question so that people can tell what you&#39;re asking, or close it and ask a new question.","body":"You should either edit this question so that people can tell what you&#39;re asking, or close it and ask a new question."}],"answers":[{"tags":[],"owner":{"account_id":1909095,"reputation":454,"user_id":1723383,"accept_rate":44,"display_name":"DJR"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1360246948,"creation_date":1360246948,"answer_id":14753359,"question_id":14734051,"body_markdown":"1)I created the heap dump using Jconsole at different points of running the program,\r\n2)Imported them into Memory analyzer\r\n3)Ran a leak suspect report \r\n4)observed the sizes of the biggest instances and the number of them.\r\nThis showed me the problem and im trying to solve it and i dont know how .. yet. Atleast glad i found out about MAT and its definitely more helpful than Visual VM in my case. hope it helps someone else. below is the link to my next question.\r\n\r\n\r\nhttps://stackoverflow.com/questions/14737972/swing-applet-jtogglebutton-size-is-6mb-how-can-i-reduce-the-size","title":"Scanner program OutOfMemoryError &amp; Java Heap dump analysis using Memory analyzer (MAT","body":"<p>1)I created the heap dump using Jconsole at different points of running the program,\n2)Imported them into Memory analyzer\n3)Ran a leak suspect report \n4)observed the sizes of the biggest instances and the number of them.\nThis showed me the problem and im trying to solve it and i dont know how .. yet. Atleast glad i found out about MAT and its definitely more helpful than Visual VM in my case. hope it helps someone else. below is the link to my next question.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/14737972/swing-applet-jtogglebutton-size-is-6mb-how-can-i-reduce-the-size\">swing applet.. jtogglebutton size is 6mb. how can i reduce the size</a></p>\n"}],"owner":{"account_id":1909095,"reputation":454,"user_id":1723383,"accept_rate":44,"display_name":"DJR"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":642,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":14753359,"answer_count":1,"score":1,"last_activity_date":1635769349,"creation_date":1360168277,"question_id":14734051,"body_markdown":"I am trying to analyze a heap dump of my Java applet which runs out of heapspace even if i increase the heap size as shown in this post. &lt;https://stackoverflow.com/questions/5026376/applet-java-heap-space&gt;\r\n\r\nNow i took some heap dumps today morning (yes..its possible to take digital dumps) and im trying to analyze them with MAT and Visual VM 1.3.5. After running the leak test, the key suspects were org.eclipse.jdt.internal.core.JavaModelManager and org.eclipse.jst.jee.archive.internal.ArchiveImpl.. I HAVENT USED ANY OF THESE IN MY CODE.\r\n\r\nVisual Vm shows that the highest space is taken by Byte[], Int[], Char[], java.lang.string and short[] classes. I am not using too many of these in my program. How should i understand this dump and what should be my next steps? I can post a copy of the dump if needed.\r\n\r\nUpdate: MAT is better than visual VM in my case here. I have been taking dumps (again.. digital dumps) and analyzing them with both tools since morning. While VVM shows org.eclipse.jdt.internal.core.JavaModelManager and org.eclipse.jst.jee.archive.internal.ArchiveImpl as the suspects in its leak suspect reports, Eclipse memory analuzer (MAT) shows that my swing application is making thumbnails of images in a folder (each image is about 100kb) and showing them as a JToggleButton. But once the thumbnails are added, the JtoggleButton size is 6MB.. hence if there are a 100 images in a folder, the thumbnails of the images will be 600MB atleast. and besides that, i need to do other stuff with this program.. MAT helped in this case to identify the exact objects that took most heap space.\r\n\r\nThanks\r\nDJ.\r\n\r\n","title":"Scanner program OutOfMemoryError &amp; Java Heap dump analysis using Memory analyzer (MAT","body":"<p>I am trying to analyze a heap dump of my Java applet which runs out of heapspace even if i increase the heap size as shown in this post. <a href=\"https://stackoverflow.com/questions/5026376/applet-java-heap-space\">Applet: Java heap space</a></p>\n\n<p>Now i took some heap dumps today morning (yes..its possible to take digital dumps) and im trying to analyze them with MAT and Visual VM 1.3.5. After running the leak test, the key suspects were org.eclipse.jdt.internal.core.JavaModelManager and org.eclipse.jst.jee.archive.internal.ArchiveImpl.. I HAVENT USED ANY OF THESE IN MY CODE.</p>\n\n<p>Visual Vm shows that the highest space is taken by Byte[], Int[], Char[], java.lang.string and short[] classes. I am not using too many of these in my program. How should i understand this dump and what should be my next steps? I can post a copy of the dump if needed.</p>\n\n<p>Update: MAT is better than visual VM in my case here. I have been taking dumps (again.. digital dumps) and analyzing them with both tools since morning. While VVM shows org.eclipse.jdt.internal.core.JavaModelManager and org.eclipse.jst.jee.archive.internal.ArchiveImpl as the suspects in its leak suspect reports, Eclipse memory analuzer (MAT) shows that my swing application is making thumbnails of images in a folder (each image is about 100kb) and showing them as a JToggleButton. But once the thumbnails are added, the JtoggleButton size is 6MB.. hence if there are a 100 images in a folder, the thumbnails of the images will be 600MB atleast. and besides that, i need to do other stuff with this program.. MAT helped in this case to identify the exact objects that took most heap space.</p>\n\n<p>Thanks\nDJ.</p>\n"},{"tags":["java","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":307351,"reputation":23310,"user_id":618598,"accept_rate":76,"display_name":"Bernd Elkemann"},"score":0,"creation_date":1360237283,"post_id":14750202,"comment_id":20642297,"body_markdown":"I am not a Java expert but maybe `new ArrayList` inside the loop creates too much memory pressure for the GC to handle, can you move it outside the loop?","body":"I am not a Java expert but maybe <code>new ArrayList</code> inside the loop creates too much memory pressure for the GC to handle, can you move it outside the loop?"},{"owner":{"account_id":68986,"reputation":21295,"user_id":200987,"accept_rate":69,"display_name":"oligofren"},"score":0,"creation_date":1360237661,"post_id":14750202,"comment_id":20642490,"body_markdown":"I can see that creating an ArrayList inside of a loop might be a bit ineffective, and cause more work for the GC, but that should not mean I should run out of heap space. Too much for for the GC actually has a specific Exception in Java, and I have seen that in other scenarios :)","body":"I can see that creating an ArrayList inside of a loop might be a bit ineffective, and cause more work for the GC, but that should not mean I should run out of heap space. Too much for for the GC actually has a specific Exception in Java, and I have seen that in other scenarios :)"},{"owner":{"account_id":68986,"reputation":21295,"user_id":200987,"accept_rate":69,"display_name":"oligofren"},"score":0,"creation_date":1360237724,"post_id":14750202,"comment_id":20642523,"body_markdown":"Of course, I can move the new ArrayList out of the loop, and reuse it by list.clear(), but I don&#39;t think that adds much to the issue here.","body":"Of course, I can move the new ArrayList out of the loop, and reuse it by list.clear(), but I don&#39;t think that adds much to the issue here."},{"owner":{"account_id":1247262,"reputation":1464,"user_id":1208445,"display_name":"Bimalesh Jha"},"score":1,"creation_date":1360237963,"post_id":14750202,"comment_id":20642663,"body_markdown":"`tmpString.trim()` in a loop may be creating copies of string? [javadoc] http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#trim(). Similarly `String.format()` may also be creating copies?","body":"<code>tmpString.trim()</code> in a loop may be creating copies of string? [javadoc] <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#trim()\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/6/docs/api/java/lang/String.html#trim&zwnj;&#8203;()</a>. Similarly <code>String.format()</code> may also be creating copies?"},{"owner":{"account_id":68986,"reputation":21295,"user_id":200987,"accept_rate":69,"display_name":"oligofren"},"score":0,"creation_date":1360238036,"post_id":14750202,"comment_id":20642700,"body_markdown":"@Bimalesh Jha Hmm ... interesting!","body":"@Bimalesh Jha Hmm ... interesting!"},{"owner":{"account_id":68986,"reputation":21295,"user_id":200987,"accept_rate":69,"display_name":"oligofren"},"score":0,"creation_date":1360239703,"post_id":14750202,"comment_id":20643530,"body_markdown":"8 Strings (no date) = 64B,\n2 Longs = 16B,\n1 Date (a Long?) = Object + Long = 16B,\nMap with 2*2*10 chars = 160B (see comment on Ingo&#39;s answer).\nThat should total 256B. In addition comes the string content, say 90 chars = 180 byte. Perhaps a byte or two in each end of the list item when put in the list, so in total somewhere around 450 byte per log line.\n\nCalculations based on info from http://www.javamex.com/tutorials/memory/object_memory_usage.shtml and discussion under Ingo&#39;s answer","body":"8 Strings (no date) = 64B, 2 Longs = 16B, 1 Date (a Long?) = Object + Long = 16B, Map with 2*2*10 chars = 160B (see comment on Ingo&#39;s answer). That should total 256B. In addition comes the string content, say 90 chars = 180 byte. Perhaps a byte or two in each end of the list item when put in the list, so in total somewhere around 450 byte per log line.  Calculations based on info from <a href=\"http://www.javamex.com/tutorials/memory/object_memory_usage.shtml\" rel=\"nofollow noreferrer\">javamex.com/tutorials/memory/object_memory_usage.shtml</a> and discussion under Ingo&#39;s answer"},{"owner":{"account_id":68986,"reputation":21295,"user_id":200987,"accept_rate":69,"display_name":"oligofren"},"score":0,"creation_date":1360240167,"post_id":14750202,"comment_id":20643776,"body_markdown":"Per Ingo, the longs are actually Longs (Objects) consuming 8 Bytes for the Object bit alone, so probably consuming 16 byte per Long.","body":"Per Ingo, the longs are actually Longs (Objects) consuming 8 Bytes for the Object bit alone, so probably consuming 16 byte per Long."}],"answers":[{"tags":[],"owner":{"account_id":7450,"reputation":269210,"user_id":12960,"display_name":"Brian Agnew"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1360237225,"creation_date":1360237225,"answer_id":14750253,"question_id":14750202,"body_markdown":"Don&#39;t forget that each `String` object consumes space (24 bytes ?) for the actual `Object` definition, plus the reference to the char array, the offset (for `substring()` usage) etc. So representing a line as &#39;n&#39; strings will add that additional storage requirement. Can you lazily evaluate these instead within your `LogEntry` class ?\r\n\r\n(re. the String offset usage - prior to Java 7b6 `String.substring()` acts as a window onto an existing char array and consequently you need an offset. This has recently changed and it may be worth determining if a later JDK build is more memory efficient)","title":"How can parsing a 17MB text file into List cause OutOfMemory with 128MB heap?","body":"<p>Don't forget that each <code>String</code> object consumes space (24 bytes ?) for the actual <code>Object</code> definition, plus the reference to the char array, the offset (for <code>substring()</code> usage) etc. So representing a line as 'n' strings will add that additional storage requirement. Can you lazily evaluate these instead within your <code>LogEntry</code> class ?</p>\n\n<p>(re. the String offset usage - prior to Java 7b6 <code>String.substring()</code> acts as a window onto an existing char array and consequently you need an offset. This has recently changed and it may be worth determining if a later JDK build is more memory efficient)</p>\n"},{"tags":[],"owner":{"account_id":31518,"reputation":36053,"user_id":86604,"accept_rate":80,"display_name":"Ingo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1360251744,"creation_date":1360237669,"answer_id":14750405,"question_id":14750202,"body_markdown":"You also have a Map there, where you store other properties. Your code doesn&#39;t show how this Map is populated, but keep in mind that Maps may have a hefty memory overhead compared to the memory needed for the entries themselves.\r\n\r\nThe size of the array that backs the Map (at least 16 entries * 4 bytes) + one key/value pair per entry + the size of data themselves. Two map entries, each using 10 chars for key and 10 chars for value, would consume 16*4 + 2*2*4 + 2*10*2 + 2*10*2 + 2*2*8= 64+16+40+40+24 = 184 bytes (1 char = 2 byte, a String object consumes min 8 byte). That alone would almost double the space requirements for the entire log string. \r\n\r\nAdd to this that the LogEntry contains 12 Objects, i.e. at least 96 bytes. Hence the log objects alone would need around 100 bytes, give or take some, without the Map and without actual string data. Plus all the pointers for the references (4B each). I count at least 18 with the Map, meaning 72 bytes.\r\n\r\nAdding the data (-object references and object &quot;headers&quot; mentioned in the last paragraph):\t\r\n2 longs = 16B, 1 date stored as long = 8B, the map = 184B. In addition comes the string content, say 90 chars = 180 byte. Perhaps a byte or two in each end of the list item when put in the list, so in total somewhere around 100+72+16+8+184+180=560 ~ 600 byte per log line. \r\n\r\nSo around 600 byte per log line, meaning 100K lines would consume around 60MB minimum. This would place it at least in the same order of magnitude as the heap size that was set asize. In addition comes the fact that [tmpString.trim() in a loop might be creating copies of string][1]. Similarly String.format() may also be creating copies. The rest of the application must also fit within this heap space, and might explain where the rest of memory is going.\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#trim%28%29","title":"How can parsing a 17MB text file into List cause OutOfMemory with 128MB heap?","body":"<p>You also have a Map there, where you store other properties. Your code doesn't show how this Map is populated, but keep in mind that Maps may have a hefty memory overhead compared to the memory needed for the entries themselves.</p>\n\n<p>The size of the array that backs the Map (at least 16 entries * 4 bytes) + one key/value pair per entry + the size of data themselves. Two map entries, each using 10 chars for key and 10 chars for value, would consume 16*4 + 2*2*4 + 2*10*2 + 2*10*2 + 2*2*8= 64+16+40+40+24 = 184 bytes (1 char = 2 byte, a String object consumes min 8 byte). That alone would almost double the space requirements for the entire log string. </p>\n\n<p>Add to this that the LogEntry contains 12 Objects, i.e. at least 96 bytes. Hence the log objects alone would need around 100 bytes, give or take some, without the Map and without actual string data. Plus all the pointers for the references (4B each). I count at least 18 with the Map, meaning 72 bytes.</p>\n\n<p>Adding the data (-object references and object \"headers\" mentioned in the last paragraph):<br>\n2 longs = 16B, 1 date stored as long = 8B, the map = 184B. In addition comes the string content, say 90 chars = 180 byte. Perhaps a byte or two in each end of the list item when put in the list, so in total somewhere around 100+72+16+8+184+180=560 ~ 600 byte per log line. </p>\n\n<p>So around 600 byte per log line, meaning 100K lines would consume around 60MB minimum. This would place it at least in the same order of magnitude as the heap size that was set asize. In addition comes the fact that <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#trim%28%29\" rel=\"nofollow\">tmpString.trim() in a loop might be creating copies of string</a>. Similarly String.format() may also be creating copies. The rest of the application must also fit within this heap space, and might explain where the rest of memory is going.</p>\n"}],"owner":{"account_id":68986,"reputation":21295,"user_id":200987,"accept_rate":69,"display_name":"oligofren"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":322,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":14750405,"answer_count":2,"score":0,"last_activity_date":1635769327,"creation_date":1360237081,"question_id":14750202,"body_markdown":"In some part of my application, I am parsing a 17MB log file into a list structure - one LogEntry per line. There are approximately 100K lines/log entries, meaning approx. 170 bytes per line. What surprised me is that I run out of heap space, even when I specify 128MB (256MB seems sufficient). How can 10MB of text turned into a list of objects cause a tenfold increase in space? \r\n\r\nI understand that String objects use at least twice the amount of space compared to ANSI text (Unicode, one char=2 bytes), but this consumes at least four times that.\r\n\r\n**What I am looking for is an approximation for how much an ArrayList of n LogEntries will consume, or how my method might create extraneous objects that aggravate the situation**  (see comment below on `String.trim()`)\r\n\r\nThis is the data part of my LogEntry class\r\n\r\n\tpublic class LogEntry {\t\r\n\t\tprivate Long   id; \r\n\t\tprivate String system, version, environment, hostName, userId, clientIP, wsdlName, methodName;\r\n\t\tprivate Date                timestamp;\r\n\t\tprivate Long                milliSeconds;\r\n\t\tprivate Map&lt;String, String&gt; otherProperties;\r\n\r\nThis is the part doing the reading\r\n\r\n\tpublic List&lt;LogEntry&gt; readLogEntriesFromFile(File f) throws LogImporterException {\r\n\t\tCSVReader reader;\r\n\t\tfinal String ISO_8601_DATE_PATTERN = &quot;yyyy-MM-dd HH:mm:ss,SSS&quot;;\r\n\r\n\t\tList&lt;LogEntry&gt; logEntries = new ArrayList&lt;LogEntry&gt;();\r\n\t\tString[] tmp;\r\n\t\ttry {\r\n\t\t\tint lineNumber = 0;\r\n\t\t\tfinal char DELIM = &#39;;&#39;;\r\n\t\t\treader = new CSVReader(new InputStreamReader(new FileInputStream(f)), DELIM);\r\n\t\t\twhile ((tmp = reader.readNext()) != null) {\r\n\t\t\t\tlineNumber++;\r\n\r\n\t\t\t\tif (tmp.length &lt; LogEntry.getRequiredNumberOfAttributes()) {\r\n\r\n\t\t\t\t\tString tmpString = concat(tmp);\r\n\r\n\t\t\t\t\tif (tmpString.trim().isEmpty()) {\r\n\t\t\t\t\t\tlogger.debug(&quot;Empty string&quot;);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlogger.error(String.format(\r\n\t\t\t\t\t\t\t\t&quot;Invalid log format in %s:L%s. Not enough attributes (%d/%d). Was %s . Continuing ...&quot;,\r\n\t\t\t\t\t\t\t\tf.getAbsolutePath(), lineNumber, tmp.length, LogEntry.getRequiredNumberOfAttributes(), tmpString)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tList&lt;String&gt; values = new ArrayList&lt;String&gt;(Arrays.asList(tmp));\r\n\t\t\t\tString system, version, environment, hostName, userId, wsdlName, methodName;\r\n\t\t\t\tDate timestamp;\r\n\t\t\t\tLong milliSeconds;\r\n\t\t\t\tMap&lt;String, String&gt; otherProperties;\r\n\r\n\t\t\t\tsystem = values.remove(0);\r\n\t\t\t\tversion = values.remove(0);\r\n\t\t\t\tenvironment = values.remove(0);\r\n\t\t\t\thostName = values.remove(0);\r\n\t\t\t\tuserId = values.remove(0);\r\n\t\t\t\tString clientIP = values.remove(0);\r\n\t\t\t\twsdlName = cleanLogString(values.remove(0));\r\n\t\t\t\tmethodName = cleanLogString(stripNormalPrefixes(values.remove(0)));\r\n\t\t\t\ttimestamp = new SimpleDateFormat(ISO_8601_DATE_PATTERN).parse(values.remove(0));\r\n\t\t\t\tmilliSeconds = Long.parseLong(values.remove(0));\r\n\r\n\t\t\t\t/* remaining properties are the key-value pairs */\r\n\t\t\t\totherProperties = parseOtherProperties(values);\r\n\r\n\t\t\t\tlogEntries.add(new LogEntry(system, version, environment, hostName, userId, clientIP,\r\n\t\t\t\t\t\twsdlName, methodName, timestamp, milliSeconds, otherProperties));\r\n\t\t\t}\r\n\t\t\treader.close();\r\n\t\t} catch (IOException e) {\r\n\t\t\tthrow new LogImporterException(&quot;Error reading log file: &quot; + e.getMessage());\r\n\t\t} catch (ParseException e) {\r\n\t\t\tthrow new LogImporterException(&quot;Error parsing logfile: &quot; + e.getMessage(), e);\r\n\t\t}\r\n\r\n\t\treturn logEntries;\r\n\t}\r\n\r\nUtility function used for populating the map\r\n\r\n\tprivate Map&lt;String, String&gt; parseOtherProperties(List&lt;String&gt; values) throws ParseException {\r\n\t\tHashMap&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();\r\n\r\n\t\tString[] tmp;\r\n\t\tfor (String s : values) {\r\n\t\t\tif (s.trim().isEmpty()) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\ttmp = s.split(&quot;:&quot;);\r\n\t\t\tif (tmp.length != 2) {\r\n\t\t\t\tthrow new ParseException(&quot;Could not split string into key:value :\\&quot;&quot; + s + &quot;\\&quot;&quot;, s.length());\r\n\t\t\t}\r\n\t\t\tmap.put(tmp[0], tmp[1]);\r\n\t\t}\r\n\t\treturn map;\r\n\t}","title":"How can parsing a 17MB text file into List cause OutOfMemory with 128MB heap?","body":"<p>In some part of my application, I am parsing a 17MB log file into a list structure - one LogEntry per line. There are approximately 100K lines/log entries, meaning approx. 170 bytes per line. What surprised me is that I run out of heap space, even when I specify 128MB (256MB seems sufficient). How can 10MB of text turned into a list of objects cause a tenfold increase in space? </p>\n\n<p>I understand that String objects use at least twice the amount of space compared to ANSI text (Unicode, one char=2 bytes), but this consumes at least four times that.</p>\n\n<p><strong>What I am looking for is an approximation for how much an ArrayList of n LogEntries will consume, or how my method might create extraneous objects that aggravate the situation</strong>  (see comment below on <code>String.trim()</code>)</p>\n\n<p>This is the data part of my LogEntry class</p>\n\n<pre><code>public class LogEntry { \n    private Long   id; \n    private String system, version, environment, hostName, userId, clientIP, wsdlName, methodName;\n    private Date                timestamp;\n    private Long                milliSeconds;\n    private Map&lt;String, String&gt; otherProperties;\n</code></pre>\n\n<p>This is the part doing the reading</p>\n\n<pre><code>public List&lt;LogEntry&gt; readLogEntriesFromFile(File f) throws LogImporterException {\n    CSVReader reader;\n    final String ISO_8601_DATE_PATTERN = \"yyyy-MM-dd HH:mm:ss,SSS\";\n\n    List&lt;LogEntry&gt; logEntries = new ArrayList&lt;LogEntry&gt;();\n    String[] tmp;\n    try {\n        int lineNumber = 0;\n        final char DELIM = ';';\n        reader = new CSVReader(new InputStreamReader(new FileInputStream(f)), DELIM);\n        while ((tmp = reader.readNext()) != null) {\n            lineNumber++;\n\n            if (tmp.length &lt; LogEntry.getRequiredNumberOfAttributes()) {\n\n                String tmpString = concat(tmp);\n\n                if (tmpString.trim().isEmpty()) {\n                    logger.debug(\"Empty string\");\n                } else {\n                    logger.error(String.format(\n                            \"Invalid log format in %s:L%s. Not enough attributes (%d/%d). Was %s . Continuing ...\",\n                            f.getAbsolutePath(), lineNumber, tmp.length, LogEntry.getRequiredNumberOfAttributes(), tmpString)\n                    );\n                }\n\n                continue;\n            }\n\n            List&lt;String&gt; values = new ArrayList&lt;String&gt;(Arrays.asList(tmp));\n            String system, version, environment, hostName, userId, wsdlName, methodName;\n            Date timestamp;\n            Long milliSeconds;\n            Map&lt;String, String&gt; otherProperties;\n\n            system = values.remove(0);\n            version = values.remove(0);\n            environment = values.remove(0);\n            hostName = values.remove(0);\n            userId = values.remove(0);\n            String clientIP = values.remove(0);\n            wsdlName = cleanLogString(values.remove(0));\n            methodName = cleanLogString(stripNormalPrefixes(values.remove(0)));\n            timestamp = new SimpleDateFormat(ISO_8601_DATE_PATTERN).parse(values.remove(0));\n            milliSeconds = Long.parseLong(values.remove(0));\n\n            /* remaining properties are the key-value pairs */\n            otherProperties = parseOtherProperties(values);\n\n            logEntries.add(new LogEntry(system, version, environment, hostName, userId, clientIP,\n                    wsdlName, methodName, timestamp, milliSeconds, otherProperties));\n        }\n        reader.close();\n    } catch (IOException e) {\n        throw new LogImporterException(\"Error reading log file: \" + e.getMessage());\n    } catch (ParseException e) {\n        throw new LogImporterException(\"Error parsing logfile: \" + e.getMessage(), e);\n    }\n\n    return logEntries;\n}\n</code></pre>\n\n<p>Utility function used for populating the map</p>\n\n<pre><code>private Map&lt;String, String&gt; parseOtherProperties(List&lt;String&gt; values) throws ParseException {\n    HashMap&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();\n\n    String[] tmp;\n    for (String s : values) {\n        if (s.trim().isEmpty()) {\n            continue;\n        }\n\n        tmp = s.split(\":\");\n        if (tmp.length != 2) {\n            throw new ParseException(\"Could not split string into key:value :\\\"\" + s + \"\\\"\", s.length());\n        }\n        map.put(tmp[0], tmp[1]);\n    }\n    return map;\n}\n</code></pre>\n"},{"tags":["java","mongodb","spring-boot","project-reactor","spring-data-r2dbc"],"comments":[{"owner":{"account_id":8218454,"reputation":762,"user_id":6183889,"display_name":"Tom Elias"},"score":0,"creation_date":1635761379,"post_id":69794829,"comment_id":123371361,"body_markdown":"its tricky because FilePart can only write to a file and not output it&#39;s contents. first, \nyou need to subscribe on the Mono, so &quot;return filePartMono.then( {&lt;code here&gt;});&quot;\ninside the code to execute, open a Try-With-Resources creating a new File, and use the FilePart&#39;s method &quot;transferTo&quot;. then, read the file and you can get the bytes from it.\ni don&#39;t have a better answer...","body":"its tricky because FilePart can only write to a file and not output it&#39;s contents. first,  you need to subscribe on the Mono, so &quot;return filePartMono.then( {&lt;code here&gt;});&quot; inside the code to execute, open a Try-With-Resources creating a new File, and use the FilePart&#39;s method &quot;transferTo&quot;. then, read the file and you can get the bytes from it. i don&#39;t have a better answer..."}],"answers":[{"tags":[],"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635769034,"creation_date":1635769034,"answer_id":69796811,"question_id":69794829,"body_markdown":"While working with reactive programming you should actually work with `Mono` and `Flux` so that your application is really reactive. The consequence of this is that you must change the return type of your service and controller methods to return `Mono&lt;HttpStatus&gt;` instead. Your complete application should be reactive (from the REST API down to the database) so that you can fully benefit from the reactive stack.\r\n\r\n```java\r\n@PostMapping(path = &quot;/file&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE,\r\n             produces = MediaType.APPLICATION_STREAM_JSON_VALUE)\r\npublic Mono&lt;HttpStatus&gt; file(@RequestPart(&quot;files&quot;) Mono&lt;FilePart&gt; file) {\r\n    return Service.save(excel);\r\n}\r\n```\r\n\r\nIn your service you can do as follows:\r\n```java\r\npublic Mono&lt;HttpStatus&gt; save(Mono&lt;FilePart&gt; filePartMono) {\r\n    return filePartMono.flatMap { filePart -&gt; // you need flatMap assuming your mongo repository also returns a Mono\r\n        byte[] bytes = // convertion to byte[]\r\n\r\n        // save it to the database\r\n    }.map { mongoRepositoryResponse -&gt;\r\n        // depending on the response from mongo repository you compute HttpStatus\r\n    }\r\n}\r\n```","title":"How to Convert Mono&lt;FilePart&gt; to byte[]?","body":"<p>While working with reactive programming you should actually work with <code>Mono</code> and <code>Flux</code> so that your application is really reactive. The consequence of this is that you must change the return type of your service and controller methods to return <code>Mono&lt;HttpStatus&gt;</code> instead. Your complete application should be reactive (from the REST API down to the database) so that you can fully benefit from the reactive stack.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PostMapping(path = &quot;/file&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE,\n             produces = MediaType.APPLICATION_STREAM_JSON_VALUE)\npublic Mono&lt;HttpStatus&gt; file(@RequestPart(&quot;files&quot;) Mono&lt;FilePart&gt; file) {\n    return Service.save(excel);\n}\n</code></pre>\n<p>In your service you can do as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Mono&lt;HttpStatus&gt; save(Mono&lt;FilePart&gt; filePartMono) {\n    return filePartMono.flatMap { filePart -&gt; // you need flatMap assuming your mongo repository also returns a Mono\n        byte[] bytes = // convertion to byte[]\n\n        // save it to the database\n    }.map { mongoRepositoryResponse -&gt;\n        // depending on the response from mongo repository you compute HttpStatus\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23203937,"reputation":11,"user_id":17298416,"display_name":"Koni"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":826,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1635769034,"creation_date":1635758197,"question_id":69794829,"body_markdown":"I want to store my excel file into my database using reactive programming. In non-reactive it is easy to do but I cannot do it similarly in reactive, What should I write to store it into my mongo database?\r\n\r\nMy Controller\r\n\r\n    @PostMapping(path = &quot;/file&quot;,consumes = MediaType.MULTIPART_FORM_DATA_VALUE,\r\n                produces = MediaType.APPLICATION_STREAM_JSON_VALUE)\r\n        public HttpStatus file(@RequestPart(&quot;files&quot;) Mono&lt;FilePart&gt; file) {\r\n            return Service.save(excel);\r\n        }\r\nMy Service\r\n\r\n    public HttpStatus save(Mono&lt;FilePart&gt; filePartMono) {\r\n            //what to do here to save my file into database\r\n        }\r\nEntity\r\n\r\n    @Collection(&quot;data&quot;)\r\n    public class Excel {\r\n        @Id\r\n        int id;\r\n        private byte[] file;\r\n    }","title":"How to Convert Mono&lt;FilePart&gt; to byte[]?","body":"<p>I want to store my excel file into my database using reactive programming. In non-reactive it is easy to do but I cannot do it similarly in reactive, What should I write to store it into my mongo database?</p>\n<p>My Controller</p>\n<pre><code>@PostMapping(path = &quot;/file&quot;,consumes = MediaType.MULTIPART_FORM_DATA_VALUE,\n            produces = MediaType.APPLICATION_STREAM_JSON_VALUE)\n    public HttpStatus file(@RequestPart(&quot;files&quot;) Mono&lt;FilePart&gt; file) {\n        return Service.save(excel);\n    }\n</code></pre>\n<p>My Service</p>\n<pre><code>public HttpStatus save(Mono&lt;FilePart&gt; filePartMono) {\n        //what to do here to save my file into database\n    }\n</code></pre>\n<p>Entity</p>\n<pre><code>@Collection(&quot;data&quot;)\npublic class Excel {\n    @Id\n    int id;\n    private byte[] file;\n}\n</code></pre>\n"},{"tags":["java","spring","mongodb","spring-boot","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":19514117,"reputation":1316,"user_id":14277434,"display_name":"Elmar Brauch"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635768927,"creation_date":1635659406,"answer_id":69784269,"question_id":69784045,"body_markdown":"Instead of using a POJO class to transform Request JSON into a Request Object, you could use a `Map`. Then you have to analyse the `Map&lt;String, Object&gt;` and transform the value (`Object`) as you need it.","title":"Spring Boot nested dynamic json request mapping to pojo","body":"<p>Instead of using a POJO class to transform Request JSON into a Request Object, you could use a <code>Map</code>. Then you have to analyse the <code>Map&lt;String, Object&gt;</code> and transform the value (<code>Object</code>) as you need it.</p>\n"},{"tags":[],"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1635712302,"creation_date":1635711466,"answer_id":69790278,"question_id":69784045,"body_markdown":"The only possible way to deal with this that I can think of is making `specifics` property a Map as follows:\r\n```java\r\nclass Item {\r\n    private Title title;\r\n    private Map&lt;String, Object&gt; specifics;\r\n    private Description description;\r\n}\r\n```\r\n\r\nNow the ugly part is when you need (if you actually need) to process the data. Consider the following example:\r\n```java\r\npublic static void main(String[] args) {\r\n    Map&lt;String, Object&gt; specifics = new HashMap&lt;&gt;();\r\n    specifics.put(&quot;color&quot;, List.of(&quot;red&quot;,&quot;blue&quot;,&quot;green&quot;));\r\n    specifics.put(&quot;ram&quot;, List.of(32 , 64));\r\n    specifics.put(&quot;length&quot;, 7);\r\n    specifics.put(&quot;model&quot;, 10);\r\n    specifics.put(&quot;hasLight&quot;, true);\r\n\r\n    Item item = new Item(specifics);\r\n\r\n    for (Object object : item.getSpecifics().values()) {\r\n        if (object instanceof List) {\r\n            System.out.println(&quot;::::: List :::::&quot;);\r\n            for (Object listObject : (List) object) {\r\n                if (String.class.isAssignableFrom(listObject.getClass())) {\r\n                    System.out.println(&quot;String: &quot; + object);\r\n                }\r\n                if (Number.class.isAssignableFrom(listObject.getClass())) {\r\n                    System.out.println(&quot;Number: &quot; + object);\r\n                }\r\n            }\r\n        }\r\n        if (object instanceof Number) {\r\n            System.out.println(&quot;Number: &quot; + object);\r\n        }\r\n        if (object instanceof Boolean) {\r\n            System.out.println(&quot;Boolean: &quot; + object);\r\n        }\r\n    }\r\n}\r\n\r\npublic static class Item {\r\n    private Map&lt;String, Object&gt; specifics;\r\n\r\n    public Item(Map&lt;String, Object&gt; specifics) {\r\n        this.specifics = specifics;\r\n    }\r\n\r\n    public Map&lt;String, Object&gt; getSpecifics() {\r\n        return specifics;\r\n    }\r\n}\r\n```\r\n\r\nAs you can see the logic to handle every single possibility is ugly and can only become uglier with additional possibilities. Unfortunately, there is no around it.","title":"Spring Boot nested dynamic json request mapping to pojo","body":"<p>The only possible way to deal with this that I can think of is making <code>specifics</code> property a Map as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Item {\n    private Title title;\n    private Map&lt;String, Object&gt; specifics;\n    private Description description;\n}\n</code></pre>\n<p>Now the ugly part is when you need (if you actually need) to process the data. Consider the following example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    Map&lt;String, Object&gt; specifics = new HashMap&lt;&gt;();\n    specifics.put(&quot;color&quot;, List.of(&quot;red&quot;,&quot;blue&quot;,&quot;green&quot;));\n    specifics.put(&quot;ram&quot;, List.of(32 , 64));\n    specifics.put(&quot;length&quot;, 7);\n    specifics.put(&quot;model&quot;, 10);\n    specifics.put(&quot;hasLight&quot;, true);\n\n    Item item = new Item(specifics);\n\n    for (Object object : item.getSpecifics().values()) {\n        if (object instanceof List) {\n            System.out.println(&quot;::::: List :::::&quot;);\n            for (Object listObject : (List) object) {\n                if (String.class.isAssignableFrom(listObject.getClass())) {\n                    System.out.println(&quot;String: &quot; + object);\n                }\n                if (Number.class.isAssignableFrom(listObject.getClass())) {\n                    System.out.println(&quot;Number: &quot; + object);\n                }\n            }\n        }\n        if (object instanceof Number) {\n            System.out.println(&quot;Number: &quot; + object);\n        }\n        if (object instanceof Boolean) {\n            System.out.println(&quot;Boolean: &quot; + object);\n        }\n    }\n}\n\npublic static class Item {\n    private Map&lt;String, Object&gt; specifics;\n\n    public Item(Map&lt;String, Object&gt; specifics) {\n        this.specifics = specifics;\n    }\n\n    public Map&lt;String, Object&gt; getSpecifics() {\n        return specifics;\n    }\n}\n</code></pre>\n<p>As you can see the logic to handle every single possibility is ugly and can only become uglier with additional possibilities. Unfortunately, there is no around it.</p>\n"}],"owner":{"account_id":3390495,"reputation":12113,"user_id":2845414,"accept_rate":94,"display_name":"Sumeet Kumar Yadav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1764,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69790278,"answer_count":2,"score":0,"last_activity_date":1635768927,"creation_date":1635656328,"question_id":69784045,"body_markdown":"I am building a REST API that accepts input in the following JSON format from users. The **specifics** are nested JSON objects whose **key value is dynamic and its associated data type is also dynamic**.  Like in below color is a List of String and ram is a list of Integer and also value could be of type string, boolean, and integer. How to build Request POJO class to transform request JSON into Request Object considering specifics is dynamic in key, value, and its data type. In the below JSON, specifics can have 0..n key-value, and its value data type could be List of String, List of Integer, String only, boolean only, or Just Integer value.  How to map my request to a POJO in the spring boot backend.\r\n\r\n\r\n\r\n     {\r\n        \tname : {\r\n        \t\tsubtitle : &quot;iPhone xr&quot;,\r\n        \t\ttitle: &quot;The new iphone&quot;\r\n        \t},\r\n        \r\n        \tspecifics: {\r\n              \r\n                 &quot;color&quot; : [&quot;red&quot;,&quot;blue&quot;,&quot;green&quot;],\r\n        \r\n                 &quot;ram&quot; :  [ 32 , 64 ],\r\n        \r\n                 &quot;length&quot;: 7,\r\n        \r\n                 &quot;model&quot; : 10 ,\r\n        \r\n                 &quot;hasLight&quot; : true \r\n              \r\n        \t},\r\n        \r\n        \tdescription: {\r\n              short: &quot; This is short description&quot;,\r\n              long:  &quot; This is long description &quot;,\r\n              language: &quot;en&quot;\r\n        \t}\r\n        \r\n        }\r\n\r\n**Class** \r\n\r\n```\r\n class Item{\r\n       private Title title;\r\n         private Specifics specifics;  //How to make this dynamic and key-value with distinct data type\r\n       private Description description;\r\n   }\r\n\r\n  public class Title {\r\n    private String subtitle;\r\n    private String title;\r\n  }\r\n\r\n\r\n   public class Description {\r\n    private String shortDes;\r\n    private String longDes;\r\n    private String language;\r\n  }\r\n\r\n```","title":"Spring Boot nested dynamic json request mapping to pojo","body":"<p>I am building a REST API that accepts input in the following JSON format from users. The <strong>specifics</strong> are nested JSON objects whose <strong>key value is dynamic and its associated data type is also dynamic</strong>.  Like in below color is a List of String and ram is a list of Integer and also value could be of type string, boolean, and integer. How to build Request POJO class to transform request JSON into Request Object considering specifics is dynamic in key, value, and its data type. In the below JSON, specifics can have 0..n key-value, and its value data type could be List of String, List of Integer, String only, boolean only, or Just Integer value.  How to map my request to a POJO in the spring boot backend.</p>\n<pre><code> {\n        name : {\n            subtitle : &quot;iPhone xr&quot;,\n            title: &quot;The new iphone&quot;\n        },\n    \n        specifics: {\n          \n             &quot;color&quot; : [&quot;red&quot;,&quot;blue&quot;,&quot;green&quot;],\n    \n             &quot;ram&quot; :  [ 32 , 64 ],\n    \n             &quot;length&quot;: 7,\n    \n             &quot;model&quot; : 10 ,\n    \n             &quot;hasLight&quot; : true \n          \n        },\n    \n        description: {\n          short: &quot; This is short description&quot;,\n          long:  &quot; This is long description &quot;,\n          language: &quot;en&quot;\n        }\n    \n    }\n</code></pre>\n<p><strong>Class</strong></p>\n<pre><code> class Item{\n       private Title title;\n         private Specifics specifics;  //How to make this dynamic and key-value with distinct data type\n       private Description description;\n   }\n\n  public class Title {\n    private String subtitle;\n    private String title;\n  }\n\n\n   public class Description {\n    private String shortDes;\n    private String longDes;\n    private String language;\n  }\n\n</code></pre>\n"},{"tags":["java","android","mysql","docker","jdbc"],"comments":[{"owner":{"account_id":13753711,"reputation":676,"user_id":9925191,"display_name":"Rose"},"score":0,"creation_date":1635744231,"post_id":69792722,"comment_id":123367163,"body_markdown":"Check If MySQL is running on port 3306.","body":"Check If MySQL is running on port 3306."},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1635766895,"post_id":69792722,"comment_id":123373319,"body_markdown":"Don&#39;t try to connect to a database directly from Android. Use a web service to mediate between your app and database. However your specific problem is `android.os.NetworkOnMainThreadException`. You can&#39;t do network operations on the main thread in Android.","body":"Don&#39;t try to connect to a database directly from Android. Use a web service to mediate between your app and database. However your specific problem is <code>android.os.NetworkOnMainThreadException</code>. You can&#39;t do network operations on the main thread in Android."},{"owner":{"account_id":23194353,"reputation":41,"user_id":17290208,"display_name":"Katelyn"},"score":0,"creation_date":1635899849,"post_id":69792722,"comment_id":123414394,"body_markdown":"@Rose I checked MySQL is running on port 3306, but thanks your comment!","body":"@Rose I checked MySQL is running on port 3306, but thanks your comment!"},{"owner":{"account_id":23194353,"reputation":41,"user_id":17290208,"display_name":"Katelyn"},"score":0,"creation_date":1635904538,"post_id":69792722,"comment_id":123415121,"body_markdown":"@MarkRotteveel I am trying a web service! Thanks!","body":"@MarkRotteveel I am trying a web service! Thanks!"}],"owner":{"account_id":23194353,"reputation":41,"user_id":17290208,"display_name":"Katelyn"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1635766926,"answer_count":0,"score":1,"last_activity_date":1635768352,"creation_date":1635742122,"question_id":69792722,"body_markdown":"I am developing an android app connecting to MySQL docker container in android studio and\r\nhaving problems with it.\r\nThe problem is connection failure between the app and MySQL container.\r\nMy test code is here:\r\n\r\n``` \r\npackage com.example.databaseapp;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.os.Bundle;\r\nimport java.sql.Connection;\r\nimport java.sql.DriverManager;\r\n\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    private static final String url = &quot;jdbc:mysql://localhost:3306/appDB&quot;;\r\n    private static final String user = &quot;root&quot;;\r\n    private static final String pass = &quot;my-sec&quot;;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        try {\r\n            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;).newInstance();\r\n            System.out.println(&quot;Driver register success!&quot;);\r\n\r\n        } catch (Exception e){\r\n            System.out.println(&quot;Driver register failure...&quot;);\r\n            e.printStackTrace();\r\n        }\r\n\r\n        try {\r\n            Connection con = DriverManager.getConnection(url, user, pass);\r\n            System.out.println(&quot;Database connection success!&quot;);\r\n\r\n        } catch(Exception e) {\r\n            System.out.println(&quot;Database connection failure...&quot;);\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe error code in the Run pane is here:\r\n\r\n```\r\n11/01 13:07:32: Applying changes to &#39;app&#39; on Pixel 5 API 30.\r\nV/studio.deploy: Prior agent invocations in this VM: 4\r\nI/studio.deploy: Using Structure Redefinition Extension\r\nApply Changes successfully finished in 72 ms.\r\nI/System.out: Driver register success!\r\nI/System.out: Database connection failure...\r\nW/System.err: java.sql.SQLNonTransientConnectionException: Could not create connection to database server.\r\n        at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)\r\nW/System.err:     at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)\r\n        at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)\r\n        at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)\r\nW/System.err:     at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:1001)\r\n        at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:818)\r\n        at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:448)\r\n        at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241)\r\n        at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)\r\nW/System.err:     at java.sql.DriverManager.getConnection(DriverManager.java:580)\r\n        at java.sql.DriverManager.getConnection(DriverManager.java:218)\r\nW/System.err:     at com.example.databaseapp.MainActivity.onCreate(MainActivity.java:29)\r\n        at android.app.Activity.performCreate(Activity.java:7994)\r\n        at android.app.Activity.performCreate(Activity.java:7978)\r\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1309)\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3422)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3601)\r\n        at android.app.ActivityThread.handleRelaunchActivityInner(ActivityThread.java:5456)\r\nW/System.err:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:5362)\r\n        at android.app.servertransaction.ActivityRelaunchItem.execute(ActivityRelaunchItem.java:69)\r\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n        at android.app.ClientTransactionHandler.executeTransaction(ClientTransactionHandler.java:58)\r\nW/System.err:     at android.app.ActivityThread.handleRelaunchActivityLocally(ActivityThread.java:5415)\r\n        at android.app.ActivityThread.access$3300(ActivityThread.java:237)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2076)\r\nW/System.err:     at android.os.Handler.dispatchMessage(Handler.java:106)\r\n        at android.os.Looper.loop(Looper.java:223)\r\n        at android.app.ActivityThread.main(ActivityThread.java:7656)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\r\nW/System.err:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\r\nW/System.err: Caused by: android.os.NetworkOnMainThreadException\r\n        at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1605)\r\n        at java.net.Inet6AddressImpl.lookupHostByName(Inet6AddressImpl.java:115)\r\nW/System.err:     at java.net.Inet6AddressImpl.lookupAllHostAddr(Inet6AddressImpl.java:103)\r\n        at java.net.InetAddress.getAllByName(InetAddress.java:1152)\r\n        at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:133)\r\n        at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63)\r\nW/System.err:     at com.mysql.cj.NativeSession.connect(NativeSession.java:119)\r\n        at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:948)\r\n    \t... 27 more\r\n\r\n```\r\n\r\n[MySQL container description 1][1]\r\n\r\n\r\n[MySQL container description 2][2]\r\n\r\n\r\n[Database][3]\r\n\r\n\r\n[I am using mysql-connector-java:8.0.26 for JDBC][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Krpcb.png\r\n  [2]: https://i.stack.imgur.com/nOgP2.png\r\n  [3]: https://i.stack.imgur.com/BVIy1.png\r\n  [4]: https://i.stack.imgur.com/h2RGZ.png\r\n\r\nI am a beginner developer and new to this kind of problem.\r\nSo, I hope someone can help me...","title":"I can&#39;t connect android application to MySQL docker container","body":"<p>I am developing an android app connecting to MySQL docker container in android studio and\nhaving problems with it.\nThe problem is connection failure between the app and MySQL container.\nMy test code is here:</p>\n<pre><code>package com.example.databaseapp;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport java.sql.Connection;\nimport java.sql.DriverManager;\n\n\npublic class MainActivity extends AppCompatActivity {\n    private static final String url = &quot;jdbc:mysql://localhost:3306/appDB&quot;;\n    private static final String user = &quot;root&quot;;\n    private static final String pass = &quot;my-sec&quot;;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        try {\n            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;).newInstance();\n            System.out.println(&quot;Driver register success!&quot;);\n\n        } catch (Exception e){\n            System.out.println(&quot;Driver register failure...&quot;);\n            e.printStackTrace();\n        }\n\n        try {\n            Connection con = DriverManager.getConnection(url, user, pass);\n            System.out.println(&quot;Database connection success!&quot;);\n\n        } catch(Exception e) {\n            System.out.println(&quot;Database connection failure...&quot;);\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>The error code in the Run pane is here:</p>\n<pre><code>11/01 13:07:32: Applying changes to 'app' on Pixel 5 API 30.\nV/studio.deploy: Prior agent invocations in this VM: 4\nI/studio.deploy: Using Structure Redefinition Extension\nApply Changes successfully finished in 72 ms.\nI/System.out: Driver register success!\nI/System.out: Database connection failure...\nW/System.err: java.sql.SQLNonTransientConnectionException: Could not create connection to database server.\n        at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)\nW/System.err:     at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)\n        at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)\n        at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)\nW/System.err:     at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:1001)\n        at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:818)\n        at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:448)\n        at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241)\n        at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)\nW/System.err:     at java.sql.DriverManager.getConnection(DriverManager.java:580)\n        at java.sql.DriverManager.getConnection(DriverManager.java:218)\nW/System.err:     at com.example.databaseapp.MainActivity.onCreate(MainActivity.java:29)\n        at android.app.Activity.performCreate(Activity.java:7994)\n        at android.app.Activity.performCreate(Activity.java:7978)\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1309)\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3422)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3601)\n        at android.app.ActivityThread.handleRelaunchActivityInner(ActivityThread.java:5456)\nW/System.err:     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:5362)\n        at android.app.servertransaction.ActivityRelaunchItem.execute(ActivityRelaunchItem.java:69)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n        at android.app.ClientTransactionHandler.executeTransaction(ClientTransactionHandler.java:58)\nW/System.err:     at android.app.ActivityThread.handleRelaunchActivityLocally(ActivityThread.java:5415)\n        at android.app.ActivityThread.access$3300(ActivityThread.java:237)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2076)\nW/System.err:     at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loop(Looper.java:223)\n        at android.app.ActivityThread.main(ActivityThread.java:7656)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\nW/System.err:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\nW/System.err: Caused by: android.os.NetworkOnMainThreadException\n        at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1605)\n        at java.net.Inet6AddressImpl.lookupHostByName(Inet6AddressImpl.java:115)\nW/System.err:     at java.net.Inet6AddressImpl.lookupAllHostAddr(Inet6AddressImpl.java:103)\n        at java.net.InetAddress.getAllByName(InetAddress.java:1152)\n        at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:133)\n        at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63)\nW/System.err:     at com.mysql.cj.NativeSession.connect(NativeSession.java:119)\n        at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:948)\n        ... 27 more\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/Krpcb.png\" rel=\"nofollow noreferrer\">MySQL container description 1</a></p>\n<p><a href=\"https://i.stack.imgur.com/nOgP2.png\" rel=\"nofollow noreferrer\">MySQL container description 2</a></p>\n<p><a href=\"https://i.stack.imgur.com/BVIy1.png\" rel=\"nofollow noreferrer\">Database</a></p>\n<p><a href=\"https://i.stack.imgur.com/h2RGZ.png\" rel=\"nofollow noreferrer\">I am using mysql-connector-java:8.0.26 for JDBC</a></p>\n<p>I am a beginner developer and new to this kind of problem.\nSo, I hope someone can help me...</p>\n"},{"tags":["java","hashmap","hashcode","hash-function"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":43,"creation_date":1381159222,"post_id":6493605,"comment_id":28458920,"body_markdown":"For the record: #1 and #2 are correct, #3 is wrong: Two objects that are not equal *may* have the same hash code.","body":"For the record: #1 and #2 are correct, #3 is wrong: Two objects that are not equal <i>may</i> have the same hash code."},{"owner":{"account_id":266689,"reputation":167,"user_id":554407,"accept_rate":80,"display_name":"Delfic"},"score":8,"creation_date":1473880304,"post_id":6493605,"comment_id":66313451,"body_markdown":"#1 and #3 are contradictory even","body":"#1 and #3 are contradictory even"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1478623468,"post_id":6493605,"comment_id":68228474,"body_markdown":"Indeed, if #2 is not followed, then the equals() implementation (or arguably the hashCode()) is incorrect.","body":"Indeed, if #2 is not followed, then the equals() implementation (or arguably the hashCode()) is incorrect."}],"answers":[{"tags":[],"owner":{"account_id":69707,"reputation":41791,"user_id":202694,"accept_rate":88,"display_name":"Pace"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1309181653,"creation_date":1309181653,"answer_id":6493650,"question_id":6493605,"body_markdown":"The hashcode determines which bucket for the hashmap to check.  If there is more than one object in the bucket then a linear search is done to find which item in the bucket equals the desired item (using the `equals()`) method.\r\n\r\nIn other words, if you have a perfect hashcode then hashmap access is constant, you will never have to iterate through a bucket (technically you would also have to have MAX_INT buckets, the Java implementation may share a few hash codes in the same bucket to cut down on space requirements).  If you have the worst hashcode (always returns the same number) then your hashmap access becomes linear since you have to search through every item in the map (they&#39;re all in the same bucket) to get what you want.\r\n\r\nMost of the time a well written hashcode isn&#39;t perfect but is unique enough to give you more or less constant access.","title":"How does a Java HashMap handle different objects with the same hash code?","body":"<p>The hashcode determines which bucket for the hashmap to check.  If there is more than one object in the bucket then a linear search is done to find which item in the bucket equals the desired item (using the <code>equals()</code>) method.</p>\n\n<p>In other words, if you have a perfect hashcode then hashmap access is constant, you will never have to iterate through a bucket (technically you would also have to have MAX_INT buckets, the Java implementation may share a few hash codes in the same bucket to cut down on space requirements).  If you have the worst hashcode (always returns the same number) then your hashmap access becomes linear since you have to search through every item in the map (they're all in the same bucket) to get what you want.</p>\n\n<p>Most of the time a well written hashcode isn't perfect but is unique enough to give you more or less constant access.</p>\n"},{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":99,"is_accepted":false,"score":99,"last_activity_date":1377264551,"creation_date":1309181679,"answer_id":6493659,"question_id":6493605,"body_markdown":"Your third assertion is incorrect.\r\n\r\nIt&#39;s perfectly legal for two unequal objects to have the same hash code. It&#39;s used by `HashMap` as a &quot;first pass filter&quot; so that the map can quickly find *possible* entries with the specified key. The keys with the same hash code are then tested for equality with the specified key.\r\n\r\nYou wouldn&#39;t want a requirement that two unequal objects couldn&#39;t have the same hash code, as otherwise that would limit you to 2&lt;sup&gt;32&lt;/sup&gt; possible objects. (It would also mean that different types couldn&#39;t even use an object&#39;s fields to generate hash codes, as other classes could generate the same hash.)","title":"How does a Java HashMap handle different objects with the same hash code?","body":"<p>Your third assertion is incorrect.</p>\n\n<p>It's perfectly legal for two unequal objects to have the same hash code. It's used by <code>HashMap</code> as a \"first pass filter\" so that the map can quickly find <em>possible</em> entries with the specified key. The keys with the same hash code are then tested for equality with the specified key.</p>\n\n<p>You wouldn't want a requirement that two unequal objects couldn't have the same hash code, as otherwise that would limit you to 2<sup>32</sup> possible objects. (It would also mean that different types couldn't even use an object's fields to generate hash codes, as other classes could generate the same hash.)</p>\n"},{"tags":[],"owner":{"account_id":58552,"reputation":3693,"user_id":175251,"accept_rate":89,"display_name":"Leif Wickland"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1452149546,"creation_date":1309182635,"answer_id":6493893,"question_id":6493605,"body_markdown":"You&#39;re mistaken on point three.  Two entries can have the same hash code but not be equal.  Take a look at the implementation of [HashMap.get from the OpenJdk][1].  You can see that it checks that the hashes are equal and the keys are equal.  Were point three true, then it would be unnecessary to check that the keys are equal.  The hash code is compared before the key because the former is a more efficient comparison.  \r\n\r\nIf you&#39;re interested in learning a little more about this, take a look at the Wikipedia article on [Open Addressing collision resolution][2], which I believe is the mechanism that the OpenJdk implementation uses.  That mechanism is subtly different than the &quot;bucket&quot; approach one of the other answers mentions.  \r\n\r\n\r\n  [1]: http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/HashMap.java\r\n  [2]: http://en.wikipedia.org/wiki/Hash_table#Open_addressing","title":"How does a Java HashMap handle different objects with the same hash code?","body":"<p>You're mistaken on point three.  Two entries can have the same hash code but not be equal.  Take a look at the implementation of <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/HashMap.java\" rel=\"nofollow noreferrer\">HashMap.get from the OpenJdk</a>.  You can see that it checks that the hashes are equal and the keys are equal.  Were point three true, then it would be unnecessary to check that the keys are equal.  The hash code is compared before the key because the former is a more efficient comparison.  </p>\n\n<p>If you're interested in learning a little more about this, take a look at the Wikipedia article on <a href=\"http://en.wikipedia.org/wiki/Hash_table#Open_addressing\" rel=\"nofollow noreferrer\">Open Addressing collision resolution</a>, which I believe is the mechanism that the OpenJdk implementation uses.  That mechanism is subtly different than the \"bucket\" approach one of the other answers mentions.  </p>\n"},{"tags":[],"owner":{"account_id":45934,"reputation":203669,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"down_vote_count":1,"up_vote_count":399,"is_accepted":true,"score":398,"last_activity_date":1378340190,"creation_date":1309182835,"answer_id":6493946,"question_id":6493605,"body_markdown":"A hashmap works like this (this is a little bit simplified, but it illustrates the basic mechanism):\r\n\r\nIt has a number of &quot;buckets&quot; which it uses to store key-value pairs in. Each bucket has a unique number - that&#39;s what identifies the bucket. When you put a key-value pair into the map, the hashmap will look at the hash code of the key, and store the pair in the bucket of which the identifier is the hash code of the key. For example: The hash code of the key is 235 -&gt; the pair is stored in bucket number 235. (Note that one bucket can store more then one key-value pair).\r\n\r\nWhen you lookup a value in the hashmap, by giving it a key, it will first look at the hash code of the key that you gave. The hashmap will then look into the corresponding bucket, and then it will compare the key that you gave with the keys of all pairs in the bucket, by comparing them with `equals()`.\r\n\r\nNow you can see how this is very efficient for looking up key-value pairs in a map: by the hash code of the key the hashmap immediately knows in which bucket to look, so that it only has to test against what&#39;s in that bucket.\r\n\r\nLooking at the above mechanism, you can also see what requirements are necessary on the `hashCode()` and `equals()` methods of keys:\r\n\r\n- If two keys are the same (`equals()` returns `true` when you compare them), their `hashCode()` method must return the same number. If keys violate this, then keys that are equal might be stored in different buckets, and the hashmap would not be able to find key-value pairs (because it&#39;s going to look in the same bucket).\r\n\r\n- If two keys are different, then it doesn&#39;t matter if their hash codes are the same or not. They will be stored in the same bucket if their hash codes are the same, and in this case, the hashmap will use `equals()` to tell them apart.\r\n","title":"How does a Java HashMap handle different objects with the same hash code?","body":"<p>A hashmap works like this (this is a little bit simplified, but it illustrates the basic mechanism):</p>\n\n<p>It has a number of \"buckets\" which it uses to store key-value pairs in. Each bucket has a unique number - that's what identifies the bucket. When you put a key-value pair into the map, the hashmap will look at the hash code of the key, and store the pair in the bucket of which the identifier is the hash code of the key. For example: The hash code of the key is 235 -> the pair is stored in bucket number 235. (Note that one bucket can store more then one key-value pair).</p>\n\n<p>When you lookup a value in the hashmap, by giving it a key, it will first look at the hash code of the key that you gave. The hashmap will then look into the corresponding bucket, and then it will compare the key that you gave with the keys of all pairs in the bucket, by comparing them with <code>equals()</code>.</p>\n\n<p>Now you can see how this is very efficient for looking up key-value pairs in a map: by the hash code of the key the hashmap immediately knows in which bucket to look, so that it only has to test against what's in that bucket.</p>\n\n<p>Looking at the above mechanism, you can also see what requirements are necessary on the <code>hashCode()</code> and <code>equals()</code> methods of keys:</p>\n\n<ul>\n<li><p>If two keys are the same (<code>equals()</code> returns <code>true</code> when you compare them), their <code>hashCode()</code> method must return the same number. If keys violate this, then keys that are equal might be stored in different buckets, and the hashmap would not be able to find key-value pairs (because it's going to look in the same bucket).</p></li>\n<li><p>If two keys are different, then it doesn't matter if their hash codes are the same or not. They will be stored in the same bucket if their hash codes are the same, and in this case, the hashmap will use <code>equals()</code> to tell them apart.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":174482,"reputation":3102,"user_id":403872,"accept_rate":83,"display_name":"Abhijit Gaikwad"},"down_vote_count":1,"up_vote_count":42,"is_accepted":false,"score":41,"last_activity_date":1363235415,"creation_date":1363235415,"answer_id":15401246,"question_id":6493605,"body_markdown":"You can find excellent information at [http://javarevisited.blogspot.com/2011/02/how-hashmap-works-in-java.html][1]\r\n\r\n\r\nTo Summarize: \r\n\r\n**HashMap works on the principle of hashing**\r\n \r\n**put(key, value):** HashMap stores both key and value object as Map.Entry. Hashmap applies hashcode(key) to get the bucket. if there is collision ,HashMap uses LinkedList to store object. \r\n\r\n**get(key):** HashMap uses Key Object&#39;s hashcode to find out bucket location and then call keys.equals() method to identify correct node in LinkedList and return associated value object for that key in Java HashMap.\r\n \r\n\r\n\r\n  [1]: http://javarevisited.blogspot.com/2011/02/how-hashmap-works-in-java.html","title":"How does a Java HashMap handle different objects with the same hash code?","body":"<p>You can find excellent information at <a href=\"http://javarevisited.blogspot.com/2011/02/how-hashmap-works-in-java.html\">http://javarevisited.blogspot.com/2011/02/how-hashmap-works-in-java.html</a></p>\n\n<p>To Summarize: </p>\n\n<p><strong>HashMap works on the principle of hashing</strong></p>\n\n<p><strong>put(key, value):</strong> HashMap stores both key and value object as Map.Entry. Hashmap applies hashcode(key) to get the bucket. if there is collision ,HashMap uses LinkedList to store object. </p>\n\n<p><strong>get(key):</strong> HashMap uses Key Object's hashcode to find out bucket location and then call keys.equals() method to identify correct node in LinkedList and return associated value object for that key in Java HashMap.</p>\n"},{"tags":[],"owner":{"account_id":912782,"reputation":38886,"user_id":946224,"accept_rate":88,"display_name":"Sergii Shevchyk"},"down_vote_count":3,"up_vote_count":89,"is_accepted":false,"score":86,"last_activity_date":1467837759,"creation_date":1377705537,"answer_id":18492835,"question_id":6493605,"body_markdown":"![HashMap structure diagram][1]\r\n\r\n`HashMap` is an array of `Entry` objects.\r\n \r\nConsider `HashMap` as just an array of objects.\r\n\r\nHave a look at what this `Object` is:\r\n\r\n    static class Entry&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; {\r\n            final K key;\r\n            V value;\r\n            Entry&lt;K,V&gt; next;\r\n            final int hash;\r\n    … \r\n    }\r\n\r\nEach `Entry` object represents a key-value pair. The field `next` refers to another `Entry` object if a bucket has more than one `Entry`.\r\n\r\nSometimes it might happen that hash codes for 2 different objects are the same. In this case, two objects will be saved in one bucket and will be presented as a linked list. \r\nThe entry point is the more recently added object. This object refers to another object with the `next` field and so on. The last entry refers to `null`.\r\n\r\nWhen you create a `HashMap` with the default constructor\r\n\r\n    HashMap hashMap = new HashMap();\r\n\r\nThe array is created with size 16 and default 0.75 load balance.\r\n\r\n### Adding a new key-value pair\r\n\r\n1. Calculate hashcode for the key\r\n2. Calculate position `hash % (arrayLength-1)` where element should be placed (bucket number)\r\n3. If you try to add a value with a key which has already been saved in `HashMap`, then value gets overwritten.\r\n4. Otherwise element is added to the bucket.\r\n\r\nIf the bucket already has at least one element, a new one gets added and placed in the first position of the bucket. Its `next` field refers to the old element.\r\n\r\n### Deletion\r\n\r\n1. Calculate hashcode for the given key\r\n2. Calculate bucket number `hash % (arrayLength-1)`\r\n3. Get a reference to the first Entry object in the bucket and by means of equals method iterate over all entries in the given bucket. Eventually we will find the correct `Entry`.\r\nIf a desired element is not found, return `null` \r\n\r\n\r\n  [1]: http://i.stack.imgur.com/zHvEe.jpg","title":"How does a Java HashMap handle different objects with the same hash code?","body":"<p><img src=\"https://i.stack.imgur.com/zHvEe.jpg\" alt=\"HashMap structure diagram\"></p>\n\n<p><code>HashMap</code> is an array of <code>Entry</code> objects.</p>\n\n<p>Consider <code>HashMap</code> as just an array of objects.</p>\n\n<p>Have a look at what this <code>Object</code> is:</p>\n\n<pre><code>static class Entry&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; {\n        final K key;\n        V value;\n        Entry&lt;K,V&gt; next;\n        final int hash;\n… \n}\n</code></pre>\n\n<p>Each <code>Entry</code> object represents a key-value pair. The field <code>next</code> refers to another <code>Entry</code> object if a bucket has more than one <code>Entry</code>.</p>\n\n<p>Sometimes it might happen that hash codes for 2 different objects are the same. In this case, two objects will be saved in one bucket and will be presented as a linked list. \nThe entry point is the more recently added object. This object refers to another object with the <code>next</code> field and so on. The last entry refers to <code>null</code>.</p>\n\n<p>When you create a <code>HashMap</code> with the default constructor</p>\n\n<pre><code>HashMap hashMap = new HashMap();\n</code></pre>\n\n<p>The array is created with size 16 and default 0.75 load balance.</p>\n\n<h3>Adding a new key-value pair</h3>\n\n<ol>\n<li>Calculate hashcode for the key</li>\n<li>Calculate position <code>hash % (arrayLength-1)</code> where element should be placed (bucket number)</li>\n<li>If you try to add a value with a key which has already been saved in <code>HashMap</code>, then value gets overwritten.</li>\n<li>Otherwise element is added to the bucket.</li>\n</ol>\n\n<p>If the bucket already has at least one element, a new one gets added and placed in the first position of the bucket. Its <code>next</code> field refers to the old element.</p>\n\n<h3>Deletion</h3>\n\n<ol>\n<li>Calculate hashcode for the given key</li>\n<li>Calculate bucket number <code>hash % (arrayLength-1)</code></li>\n<li>Get a reference to the first Entry object in the bucket and by means of equals method iterate over all entries in the given bucket. Eventually we will find the correct <code>Entry</code>.\nIf a desired element is not found, return <code>null</code> </li>\n</ol>\n"},{"tags":[],"owner":{"account_id":4208052,"reputation":205,"user_id":3446491,"accept_rate":20,"display_name":"Tajinder Singh"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1401621933,"creation_date":1395621050,"answer_id":22599123,"question_id":6493605,"body_markdown":"    import java.util.HashMap;\r\n    \r\n    public class Students  {\r\n    \tString name;\r\n    \tint age;\r\n    \t\r\n    \tStudents(String name, int age ){\r\n    \t\tthis.name = name;\r\n    \t\tthis.age=age;\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tpublic int hashCode() {\r\n    \t\tSystem.out.println(&quot;__hash__&quot;);\r\n    \t\tfinal int prime = 31;\r\n    \t\tint result = 1;\r\n    \t\tresult = prime * result + age;\r\n    \t\tresult = prime * result + ((name == null) ? 0 : name.hashCode());\r\n    \t\treturn result;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean equals(Object obj) {\r\n    \t\tSystem.out.println(&quot;__eq__&quot;);\r\n    \t\tif (this == obj)\r\n    \t\t\treturn true;\r\n    \t\tif (obj == null)\r\n    \t\t\treturn false;\r\n    \t\tif (getClass() != obj.getClass())\r\n    \t\t\treturn false;\r\n    \t\tStudents other = (Students) obj;\r\n    \t\tif (age != other.age)\r\n    \t\t\treturn false;\r\n    \t\tif (name == null) {\r\n    \t\t\tif (other.name != null)\r\n    \t\t\t\treturn false;\r\n    \t\t} else if (!name.equals(other.name))\r\n    \t\t\treturn false;\r\n    \t\treturn true;\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t\r\n    \t\tStudents S1 = new Students(&quot;taj&quot;,22);\r\n    \t\tStudents S2 = new Students(&quot;taj&quot;,21);\r\n    \t\t\r\n    \t\tSystem.out.println(S1.hashCode());\r\n    \t\tSystem.out.println(S2.hashCode());\r\n    \r\n    \t\tHashMap&lt;Students,String &gt; HM = new HashMap&lt;Students,String &gt; (); \r\n    \t\tHM.put(S1, &quot;tajinder&quot;);\r\n    \t\tHM.put(S2, &quot;tajinder&quot;);\r\n    \t\tSystem.out.println(HM.size());\r\n    \t}\r\n    }\r\n    \r\n    Output:\r\n    \r\n    __ hash __\r\n    \r\n    116232\r\n    \r\n    __ hash __\r\n    \r\n    116201\r\n    \r\n    __ hash __\r\n    \r\n    __ hash __\r\n    \r\n    2\r\n    \r\nSo here we see that if both the objects S1 and S2 have different content, then we are pretty sure that our overridden Hashcode method will generate different Hashcode(116232,11601) for both objects. NOW since there are different hash codes, so it won&#39;t even bother to call EQUALS method. Because a different Hashcode GUARANTEES DIFFERENT content in an object.\r\n    \r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t\r\n    \t\tStudents S1 = new Students(&quot;taj&quot;,21);\r\n    \t\tStudents S2 = new Students(&quot;taj&quot;,21);\r\n    \t\t\r\n    \t\tSystem.out.println(S1.hashCode());\r\n    \t\tSystem.out.println(S2.hashCode());\r\n    \r\n    \t\tHashMap&lt;Students,String &gt; HM = new HashMap&lt;Students,String &gt; (); \r\n    \t\tHM.put(S1, &quot;tajinder&quot;);\r\n    \t\tHM.put(S2, &quot;tajinder&quot;);\r\n    \t\tSystem.out.println(HM.size());\r\n    \t}\r\n    }\r\n    \r\n    Now lets change out main method a little bit. Output after this change is \r\n    \r\n    __ hash __\r\n    \r\n    116201\r\n    \r\n    __ hash __\r\n    \r\n    116201\r\n    \r\n    __ hash __\r\n    \r\n    __ hash __\r\n    \r\n    __ eq __\r\n    \r\n    1\r\n    We can clearly see that equal method is called. Here is print statement __eq__, since we have same hashcode, then content of objects MAY or MAY not be similar. So program internally  calls Equal method to verify this. \r\n    \r\n    \r\n    Conclusion \r\n    If hashcode is different , equal method will not get called. \r\n    if hashcode is same, equal method will get called.\r\n    \r\n    Thanks , hope it helps. ","title":"How does a Java HashMap handle different objects with the same hash code?","body":"<pre><code>import java.util.HashMap;\n\npublic class Students  {\n    String name;\n    int age;\n\n    Students(String name, int age ){\n        this.name = name;\n        this.age=age;\n    }\n\n    @Override\n    public int hashCode() {\n        System.out.println(\"__hash__\");\n        final int prime = 31;\n        int result = 1;\n        result = prime * result + age;\n        result = prime * result + ((name == null) ? 0 : name.hashCode());\n        return result;\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        System.out.println(\"__eq__\");\n        if (this == obj)\n            return true;\n        if (obj == null)\n            return false;\n        if (getClass() != obj.getClass())\n            return false;\n        Students other = (Students) obj;\n        if (age != other.age)\n            return false;\n        if (name == null) {\n            if (other.name != null)\n                return false;\n        } else if (!name.equals(other.name))\n            return false;\n        return true;\n    }\n\n    public static void main(String[] args) {\n\n        Students S1 = new Students(\"taj\",22);\n        Students S2 = new Students(\"taj\",21);\n\n        System.out.println(S1.hashCode());\n        System.out.println(S2.hashCode());\n\n        HashMap&lt;Students,String &gt; HM = new HashMap&lt;Students,String &gt; (); \n        HM.put(S1, \"tajinder\");\n        HM.put(S2, \"tajinder\");\n        System.out.println(HM.size());\n    }\n}\n\nOutput:\n\n__ hash __\n\n116232\n\n__ hash __\n\n116201\n\n__ hash __\n\n__ hash __\n\n2\n</code></pre>\n\n<p>So here we see that if both the objects S1 and S2 have different content, then we are pretty sure that our overridden Hashcode method will generate different Hashcode(116232,11601) for both objects. NOW since there are different hash codes, so it won't even bother to call EQUALS method. Because a different Hashcode GUARANTEES DIFFERENT content in an object.</p>\n\n<pre><code>    public static void main(String[] args) {\n\n        Students S1 = new Students(\"taj\",21);\n        Students S2 = new Students(\"taj\",21);\n\n        System.out.println(S1.hashCode());\n        System.out.println(S2.hashCode());\n\n        HashMap&lt;Students,String &gt; HM = new HashMap&lt;Students,String &gt; (); \n        HM.put(S1, \"tajinder\");\n        HM.put(S2, \"tajinder\");\n        System.out.println(HM.size());\n    }\n}\n\nNow lets change out main method a little bit. Output after this change is \n\n__ hash __\n\n116201\n\n__ hash __\n\n116201\n\n__ hash __\n\n__ hash __\n\n__ eq __\n\n1\nWe can clearly see that equal method is called. Here is print statement __eq__, since we have same hashcode, then content of objects MAY or MAY not be similar. So program internally  calls Equal method to verify this. \n\n\nConclusion \nIf hashcode is different , equal method will not get called. \nif hashcode is same, equal method will get called.\n\nThanks , hope it helps. \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1710481,"reputation":22873,"user_id":1568658,"accept_rate":82,"display_name":"Eric"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1535541024,"creation_date":1401970304,"answer_id":24059910,"question_id":6493605,"body_markdown":"Here is a rough description of `HashMap`&#39;s mechanism, for `Java 8` version, *(it might be slightly different from Java 6)*.\r\n\r\n---\r\n**Data structures**\r\n---\r\n\r\n - **Hash table**\t\r\n Hash value is calculated via `hash()` on key, and it decide which bucket of the hashtable to use for a given key.\r\n - **Linked list** *(singly)*\t\r\n When count of elements in a bucket is small, a singly linked list is used.\r\n - **Red-Black tree**\t\r\n When count of elements in a bucket is large, a red-black tree is used.\r\n\r\n---\r\nClasses *(internal)*\r\n---\r\n\r\n* `Map.Entry`\t\r\n\tRepresent a single entity in map, the key/value entity.\r\n* `HashMap.Node`\t\r\n\tLinked list version of node.\r\n\r\n\tIt could represent:\r\n\t* A hash bucket.  \r\n     Because it has a hash property.\r\n\t* A node in singly linked list, *(thus also head of linkedlist)*.\r\n* `HashMap.TreeNode`\t\r\n   Tree version of node.\r\n\r\n---\r\nFields *(internal)*\r\n---\r\n\r\n* `Node[] table`\t\r\n\tThe bucket table, (head of the linked lists).&lt;br /&gt;\r\n\tIf a bucket don&#39;t contains elements, then it&#39;s null, thus only take space of a reference.\r\n* `Set&lt;Map.Entry&gt; entrySet`\t\r\n\tSet of entities.\r\n* `int size`\t\r\n\tNumber of entities.\r\n* `float loadFactor`\t\r\n\tIndicate how full the hash table is allowed, before resizing.\r\n* `int threshold`\t\r\n\tThe next size at which to resize.  \r\n    Formula: `threshold = capacity * loadFactor`\r\n\r\n---\r\nMethods *(internal)*\r\n---\r\n\r\n - `int hash(key)`\t\r\n   Calculate hash by key.\r\n - How to map hash to bucket?  \r\n   Use following logic:  \r\n\r\n  &gt;     static int hashToBucket(int tableSize, int hash) {\r\n  &gt;     \treturn (tableSize - 1) &amp; hash;\r\n  &gt;     }\r\n\r\n---\r\nAbout capacity\r\n---\r\n\r\nIn hash table, capacity means the bucket count, it could be get from `table.length`.  \r\nAlso could be calculated via `threshold` and `loadFactor`, thus no need to be defined as a class field.\r\n\r\nCould get the effective capacity via:  `capacity()`\r\n\r\n---\r\nOperations\r\n---\r\n\r\n - Find entity by key.  \r\n   First find the bucket by hash value, then loop linked list or search sorted tree.\r\n - Add entity with key.  \r\n\tFirst find the bucket according to hash value of key.  \r\n    Then try find the value:  \r\n\t - If found, replace the value.\r\n\t - Otherwise, add a new node at beginning of linked list, or insert into sorted tree.\r\n - Resize  \r\n\tWhen `threshold` reached, will double hashtable&#39;s capacity(`table.length`), then perform a re-hash on all elements to rebuild the table.  \r\n    This could be an expensive operation.\r\n\r\n---\r\nPerformance\r\n---\r\n\r\n - get &amp; put  \r\n  Time complexity is `O(1)`, because:  \r\n   - Bucket is accessed via array index, thus `O(1)`.\r\n   - Linked list in each bucket is of small length, thus could view as `O(1)`.\r\n   - Tree size is also limited, because will extend capacity &amp; re-hash when element count increase, so could view it as `O(1)`, not `O(log N)`.\r\n","title":"How does a Java HashMap handle different objects with the same hash code?","body":"<p>Here is a rough description of <code>HashMap</code>'s mechanism, for <code>Java 8</code> version, <em>(it might be slightly different from Java 6)</em>.</p>\n\n<hr>\n\n<h2><strong>Data structures</strong></h2>\n\n<ul>\n<li><strong>Hash table</strong><br>\nHash value is calculated via <code>hash()</code> on key, and it decide which bucket of the hashtable to use for a given key.</li>\n<li><strong>Linked list</strong> <em>(singly)</em><br>\nWhen count of elements in a bucket is small, a singly linked list is used.</li>\n<li><strong>Red-Black tree</strong><br>\nWhen count of elements in a bucket is large, a red-black tree is used.</li>\n</ul>\n\n<hr>\n\n<h2>Classes <em>(internal)</em></h2>\n\n<ul>\n<li><code>Map.Entry</code><br>\nRepresent a single entity in map, the key/value entity.</li>\n<li><p><code>HashMap.Node</code><br>\nLinked list version of node.</p>\n\n<p>It could represent:</p>\n\n<ul>\n<li>A hash bucket.<br>\nBecause it has a hash property.</li>\n<li>A node in singly linked list, <em>(thus also head of linkedlist)</em>.</li>\n</ul></li>\n<li><code>HashMap.TreeNode</code><br>\nTree version of node.</li>\n</ul>\n\n<hr>\n\n<h2>Fields <em>(internal)</em></h2>\n\n<ul>\n<li><code>Node[] table</code><br>\nThe bucket table, (head of the linked lists).<br />\nIf a bucket don't contains elements, then it's null, thus only take space of a reference.</li>\n<li><code>Set&lt;Map.Entry&gt; entrySet</code> \nSet of entities.</li>\n<li><code>int size</code><br>\nNumber of entities.</li>\n<li><code>float loadFactor</code><br>\nIndicate how full the hash table is allowed, before resizing.</li>\n<li><code>int threshold</code><br>\nThe next size at which to resize.<br>\nFormula: <code>threshold = capacity * loadFactor</code></li>\n</ul>\n\n<hr>\n\n<h2>Methods <em>(internal)</em></h2>\n\n<ul>\n<li><code>int hash(key)</code><br>\nCalculate hash by key.</li>\n<li><p>How to map hash to bucket?<br>\nUse following logic:  </p>\n\n<blockquote>\n<pre><code>static int hashToBucket(int tableSize, int hash) {\n    return (tableSize - 1) &amp; hash;\n}\n</code></pre>\n</blockquote></li>\n</ul>\n\n<hr>\n\n<h2>About capacity</h2>\n\n<p>In hash table, capacity means the bucket count, it could be get from <code>table.length</code>.<br>\nAlso could be calculated via <code>threshold</code> and <code>loadFactor</code>, thus no need to be defined as a class field.</p>\n\n<p>Could get the effective capacity via:  <code>capacity()</code></p>\n\n<hr>\n\n<h2>Operations</h2>\n\n<ul>\n<li>Find entity by key.<br>\nFirst find the bucket by hash value, then loop linked list or search sorted tree.</li>\n<li>Add entity with key.<br>\nFirst find the bucket according to hash value of key.<br>\nThen try find the value:  \n\n<ul>\n<li>If found, replace the value.</li>\n<li>Otherwise, add a new node at beginning of linked list, or insert into sorted tree.</li>\n</ul></li>\n<li>Resize<br>\nWhen <code>threshold</code> reached, will double hashtable's capacity(<code>table.length</code>), then perform a re-hash on all elements to rebuild the table.<br>\nThis could be an expensive operation.</li>\n</ul>\n\n<hr>\n\n<h2>Performance</h2>\n\n<ul>\n<li>get &amp; put<br>\nTime complexity is <code>O(1)</code>, because:  \n\n<ul>\n<li>Bucket is accessed via array index, thus <code>O(1)</code>.</li>\n<li>Linked list in each bucket is of small length, thus could view as <code>O(1)</code>.</li>\n<li>Tree size is also limited, because will extend capacity &amp; re-hash when element count increase, so could view it as <code>O(1)</code>, not <code>O(log N)</code>.</li>\n</ul></li>\n</ul>\n"},{"tags":[],"owner":{"display_name":"user2706780"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1407145157,"creation_date":1407145157,"answer_id":25115717,"question_id":6493605,"body_markdown":"Hash map works on the principle of hashing \r\n\r\nHashMap get(Key k) method calls hashCode method on the key object and applies returned hashValue to its own static hash function to find a bucket location(backing array) where keys and values are stored in form of a nested class called Entry (Map.Entry) . So you have concluded that from the previous line that Both key and value is stored in the bucket as a form of  Entry object . So thinking that Only value is stored  in the bucket is not correct and will not give a good impression on the interviewer .\r\n\r\n* Whenever we call get( Key k )  method on the HashMap object . First it checks that whether key is null or not .  Note that there can only be one null key in HashMap .  \r\n\r\nIf key is null , then Null keys always map to hash 0, thus index 0.\r\n\r\nIf key is not null then , it will call hashfunction on the key object , see line 4 in above method i.e. key.hashCode()  ,so after key.hashCode() returns hashValue , line 4 looks like\r\n\r\n                int hash = hash(hashValue)\r\n\r\n and now ,it applies returned hashValue into its own hashing function .\r\n\r\nWe might wonder why we are calculating the hashvalue again using hash(hashValue). Answer is It defends against poor quality hash functions.\r\n\r\nNow final  hashvalue is used to find the bucket location at which the Entry object is stored . Entry object stores in the bucket like this (hash,key,value,bucketindex) ","title":"How does a Java HashMap handle different objects with the same hash code?","body":"<p>Hash map works on the principle of hashing </p>\n\n<p>HashMap get(Key k) method calls hashCode method on the key object and applies returned hashValue to its own static hash function to find a bucket location(backing array) where keys and values are stored in form of a nested class called Entry (Map.Entry) . So you have concluded that from the previous line that Both key and value is stored in the bucket as a form of  Entry object . So thinking that Only value is stored  in the bucket is not correct and will not give a good impression on the interviewer .</p>\n\n<ul>\n<li>Whenever we call get( Key k )  method on the HashMap object . First it checks that whether key is null or not .  Note that there can only be one null key in HashMap .  </li>\n</ul>\n\n<p>If key is null , then Null keys always map to hash 0, thus index 0.</p>\n\n<p>If key is not null then , it will call hashfunction on the key object , see line 4 in above method i.e. key.hashCode()  ,so after key.hashCode() returns hashValue , line 4 looks like</p>\n\n<pre><code>            int hash = hash(hashValue)\n</code></pre>\n\n<p>and now ,it applies returned hashValue into its own hashing function .</p>\n\n<p>We might wonder why we are calculating the hashvalue again using hash(hashValue). Answer is It defends against poor quality hash functions.</p>\n\n<p>Now final  hashvalue is used to find the bucket location at which the Entry object is stored . Entry object stores in the bucket like this (hash,key,value,bucketindex) </p>\n"},{"tags":[],"owner":{"account_id":1875874,"reputation":71911,"user_id":1697099,"accept_rate":100,"display_name":"Premraj"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1424088163,"creation_date":1408966293,"answer_id":25484962,"question_id":6493605,"body_markdown":"Each Entry object represents key-value pair. Field next refers to other Entry object if a bucket has more than 1 Entry.\r\n\r\nSometimes it might happen that hashCodes for 2 different objects are the same. In this case 2 objects will be saved in one bucket and will be presented as LinkedList. The entry point is more recently added object. This object refers to other object with next field and so one. Last entry refers to null.\r\nWhen you create HashMap with default constructor\r\n\r\nArray is gets created with size 16 and default 0.75 load balance.\r\n\r\n![enter image description here][1] \r\n\r\n\r\n[(Source)][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/OBQw6.jpg\r\n  [2]: http://www.dineshonjava.com/2013/06/how-does-java-hashmap-work-internally.html#.U_sZQ_m1b9U","title":"How does a Java HashMap handle different objects with the same hash code?","body":"<p>Each Entry object represents key-value pair. Field next refers to other Entry object if a bucket has more than 1 Entry.</p>\n\n<p>Sometimes it might happen that hashCodes for 2 different objects are the same. In this case 2 objects will be saved in one bucket and will be presented as LinkedList. The entry point is more recently added object. This object refers to other object with next field and so one. Last entry refers to null.\nWhen you create HashMap with default constructor</p>\n\n<p>Array is gets created with size 16 and default 0.75 load balance.</p>\n\n<p><img src=\"https://i.stack.imgur.com/OBQw6.jpg\" alt=\"enter image description here\"> </p>\n\n<p><a href=\"http://www.dineshonjava.com/2013/06/how-does-java-hashmap-work-internally.html#.U_sZQ_m1b9U\" rel=\"nofollow noreferrer\">(Source)</a></p>\n"},{"tags":[],"owner":{"account_id":3025723,"reputation":879,"user_id":3318097,"display_name":"Prashant K"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1431845372,"creation_date":1431845372,"answer_id":30284174,"question_id":6493605,"body_markdown":"I will not get into the details of how HashMap works, but will give an example so we can remember how HashMap works by relating it to reality.\r\n\r\nWe have Key, Value ,HashCode and bucket.\r\n\r\nFor sometime, we will relate each of them with the following:\r\n\r\n - Bucket -&gt; A Society\r\n - HashCode -&gt; Society&#39;s address(unique always)\r\n - Value -&gt; A House in the Society\r\n - Key -&gt; House address.\r\n\r\nUsing Map.get(key) :\r\n\r\nStevie wants to get to his friend&#39;s(Josse) house who lives in a villa in a VIP society, let it be JavaLovers Society. \r\nJosse&#39;s address is his SSN(which is different for everyone).\r\nThere&#39;s an index maintained in which we find out the Society&#39;s name based on SSN.\r\nThis index can be considered to be an algorithm to find out the HashCode.\r\n\r\n - SSN                Society&#39;s Name\r\n - 92313(Josse&#39;s)  -- JavaLovers\r\n - 13214           -- AngularJSLovers\r\n - 98080           -- JavaLovers\r\n - 53808           -- BiologyLovers\r\n\r\n----------\r\n\r\n\r\n 1. This SSN(key) first gives us a HashCode(from the index table) which is nothing but Society&#39;s name.\r\n 2. Now, mulitple houses can be in the same society, so the HashCode can be common.\r\n 3. Suppose, the Society is common for two houses, how are we going to identify which house we are going to, yes, by using the (SSN)key which is nothing but the House address\r\n\r\n\r\nUsing Map.put(key,Value)\r\n\r\nThis finds a suitable society for this Value by finding the HashCode and then the value is stored.\r\n\r\n\r\nI hope this helps and this is open for modifications.","title":"How does a Java HashMap handle different objects with the same hash code?","body":"<p>I will not get into the details of how HashMap works, but will give an example so we can remember how HashMap works by relating it to reality.</p>\n\n<p>We have Key, Value ,HashCode and bucket.</p>\n\n<p>For sometime, we will relate each of them with the following:</p>\n\n<ul>\n<li>Bucket -> A Society</li>\n<li>HashCode -> Society's address(unique always)</li>\n<li>Value -> A House in the Society</li>\n<li>Key -> House address.</li>\n</ul>\n\n<p>Using Map.get(key) :</p>\n\n<p>Stevie wants to get to his friend's(Josse) house who lives in a villa in a VIP society, let it be JavaLovers Society. \nJosse's address is his SSN(which is different for everyone).\nThere's an index maintained in which we find out the Society's name based on SSN.\nThis index can be considered to be an algorithm to find out the HashCode.</p>\n\n<ul>\n<li>SSN                Society's Name</li>\n<li>92313(Josse's)  -- JavaLovers</li>\n<li>13214           -- AngularJSLovers</li>\n<li>98080           -- JavaLovers</li>\n<li>53808           -- BiologyLovers</li>\n</ul>\n\n<hr>\n\n<ol>\n<li>This SSN(key) first gives us a HashCode(from the index table) which is nothing but Society's name.</li>\n<li>Now, mulitple houses can be in the same society, so the HashCode can be common.</li>\n<li>Suppose, the Society is common for two houses, how are we going to identify which house we are going to, yes, by using the (SSN)key which is nothing but the House address</li>\n</ol>\n\n<p>Using Map.put(key,Value)</p>\n\n<p>This finds a suitable society for this Value by finding the HashCode and then the value is stored.</p>\n\n<p>I hope this helps and this is open for modifications.</p>\n"},{"tags":[],"owner":{"account_id":1811316,"reputation":9110,"user_id":1647320,"accept_rate":85,"display_name":"sapy"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1458472346,"creation_date":1458471817,"answer_id":36112918,"question_id":6493605,"body_markdown":"It gonna be a long answer , grab a drink and read on …\r\n\r\nHashing is all about storing a key-value pair in memory that can be read and written faster. **It stores keys in an array  and  values in a LinkedList .**\r\n\r\nLets Say I want to store 4 key value pairs -\r\n\r\n    {\r\n    “girl” =&gt; “ahhan” , \r\n    “misused” =&gt; “Manmohan Singh” , \r\n    “horsemints” =&gt; “guess what”, \r\n    “no” =&gt; “way”\r\n    }\r\n\r\nSo to store the keys we need an array of 4 element . Now how do I map one of these 4 keys to 4 array indexes (0,1,2,3)? \r\n\r\nSo java finds the hashCode of individual keys and map them to a particular array index . \r\nHashcode Formulae is - \r\n\r\n    1) reverse the string.\r\n            \r\n    2) keep on multiplying ascii of each character with increasing power of 31 . then add the components .\r\n    \r\n    3) So hashCode() of girl would be –(ascii values of  l,r,i,g are 108, 114, 105 and 103) . \r\n    \r\n    e.g. girl =  108 * 31^0  + 114 * 31^1  + 105 * 31^2 + 103 * 31^3  = 3173020\r\n\r\nHash and girl !! I know what you are thinking. Your fascination about that wild duet might made you miss an important thing . \r\n\r\n***Why java multiply it with 31 ?***\r\n\r\n&gt; It’s because, 31 is an odd prime in the form 2^5 – 1 . And odd prime reduces the chance of Hash Collision\r\n\r\n \r\n***Now how this hash code is mapped to an array index?*** \r\n\r\nanswer is , `Hash Code % (Array length -1)`  . So `“girl”` is mapped to `(3173020 % 3) = 1` in our case . which is second element of the array . \r\n\r\nand the value “ahhan”  is stored in a LinkedList associated with array index 1 .\r\n \r\n**HashCollision** -  If you try to find `hasHCode` of the keys `“misused”` and  `“horsemints”` using the formulae described above you’ll see both giving us same `1069518484`. Whooaa !! lesson learnt -\r\n\r\n&gt; 2 equal objects must have same hashCode but there is no guarantee if\r\n&gt; the hashCode matches then the objects are equal . So it should store\r\n&gt; both values corresponding to “misused” and “horsemints” to bucket 1\r\n&gt; (1069518484 % 3) .\r\n\r\nNow the hash map looks like –\r\n\r\n    Array Index 0 –\r\n    Array Index 1 - LinkedIst (“ahhan” , “Manmohan Singh” , “guess what”)\r\n    Array Index 2 – LinkedList (“way”)\r\n    Array Index 3 – \r\n\r\nNow if some body tries to find the value for the key `“horsemints”` , java quickly will find the hashCode of it , module it and start searching for it’s value in the LinkedList corresponding `index 1` . So this way we need not search all the 4 array indexes thus making data access faster.\r\n \r\nBut , wait , one sec .   there are 3 values in that linkedList corresponding Array index 1, how it finds out which one was was the value for key “horsemints” ? \r\n\r\n***Actually I lied , when I said HashMap just stores values in LinkedList .***\r\n\r\nIt stores both key value pair as map entry. So actually Map looks like this . \r\n\r\n    Array Index 0 –\r\n    Array Index 1 - LinkedIst (&lt;”girl” =&gt; “ahhan”&gt; , &lt;” misused” =&gt; “Manmohan Singh”&gt; , &lt;”horsemints” =&gt; “guess what”&gt;)\r\n    Array Index 2 – LinkedList (&lt;”no” =&gt; “way”&gt;)\r\n    Array Index 3 – \r\n\r\nNow you can see While traversing through the linkedList corresponding to ArrayIndex1 it actually compares key of each entry to of that LinkedList to “horsemints” and when it finds one it just returns the value of it .\r\n\r\nHope you had fun while reading it :)","title":"How does a Java HashMap handle different objects with the same hash code?","body":"<p>It gonna be a long answer , grab a drink and read on …</p>\n\n<p>Hashing is all about storing a key-value pair in memory that can be read and written faster. <strong>It stores keys in an array  and  values in a LinkedList .</strong></p>\n\n<p>Lets Say I want to store 4 key value pairs -</p>\n\n<pre><code>{\n“girl” =&gt; “ahhan” , \n“misused” =&gt; “Manmohan Singh” , \n“horsemints” =&gt; “guess what”, \n“no” =&gt; “way”\n}\n</code></pre>\n\n<p>So to store the keys we need an array of 4 element . Now how do I map one of these 4 keys to 4 array indexes (0,1,2,3)? </p>\n\n<p>So java finds the hashCode of individual keys and map them to a particular array index . \nHashcode Formulae is - </p>\n\n<pre><code>1) reverse the string.\n\n2) keep on multiplying ascii of each character with increasing power of 31 . then add the components .\n\n3) So hashCode() of girl would be –(ascii values of  l,r,i,g are 108, 114, 105 and 103) . \n\ne.g. girl =  108 * 31^0  + 114 * 31^1  + 105 * 31^2 + 103 * 31^3  = 3173020\n</code></pre>\n\n<p>Hash and girl !! I know what you are thinking. Your fascination about that wild duet might made you miss an important thing . </p>\n\n<p><strong><em>Why java multiply it with 31 ?</em></strong></p>\n\n<blockquote>\n  <p>It’s because, 31 is an odd prime in the form 2^5 – 1 . And odd prime reduces the chance of Hash Collision</p>\n</blockquote>\n\n<p><strong><em>Now how this hash code is mapped to an array index?</em></strong> </p>\n\n<p>answer is , <code>Hash Code % (Array length -1)</code>  . So <code>“girl”</code> is mapped to <code>(3173020 % 3) = 1</code> in our case . which is second element of the array . </p>\n\n<p>and the value “ahhan”  is stored in a LinkedList associated with array index 1 .</p>\n\n<p><strong>HashCollision</strong> -  If you try to find <code>hasHCode</code> of the keys <code>“misused”</code> and  <code>“horsemints”</code> using the formulae described above you’ll see both giving us same <code>1069518484</code>. Whooaa !! lesson learnt -</p>\n\n<blockquote>\n  <p>2 equal objects must have same hashCode but there is no guarantee if\n  the hashCode matches then the objects are equal . So it should store\n  both values corresponding to “misused” and “horsemints” to bucket 1\n  (1069518484 % 3) .</p>\n</blockquote>\n\n<p>Now the hash map looks like –</p>\n\n<pre><code>Array Index 0 –\nArray Index 1 - LinkedIst (“ahhan” , “Manmohan Singh” , “guess what”)\nArray Index 2 – LinkedList (“way”)\nArray Index 3 – \n</code></pre>\n\n<p>Now if some body tries to find the value for the key <code>“horsemints”</code> , java quickly will find the hashCode of it , module it and start searching for it’s value in the LinkedList corresponding <code>index 1</code> . So this way we need not search all the 4 array indexes thus making data access faster.</p>\n\n<p>But , wait , one sec .   there are 3 values in that linkedList corresponding Array index 1, how it finds out which one was was the value for key “horsemints” ? </p>\n\n<p><strong><em>Actually I lied , when I said HashMap just stores values in LinkedList .</em></strong></p>\n\n<p>It stores both key value pair as map entry. So actually Map looks like this . </p>\n\n<pre><code>Array Index 0 –\nArray Index 1 - LinkedIst (&lt;”girl” =&gt; “ahhan”&gt; , &lt;” misused” =&gt; “Manmohan Singh”&gt; , &lt;”horsemints” =&gt; “guess what”&gt;)\nArray Index 2 – LinkedList (&lt;”no” =&gt; “way”&gt;)\nArray Index 3 – \n</code></pre>\n\n<p>Now you can see While traversing through the linkedList corresponding to ArrayIndex1 it actually compares key of each entry to of that LinkedList to “horsemints” and when it finds one it just returns the value of it .</p>\n\n<p>Hope you had fun while reading it :)</p>\n"},{"tags":[],"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1474576821,"creation_date":1474576821,"answer_id":39648507,"question_id":6493605,"body_markdown":"As it is said, a picture is worth 1000 words. I say: some code is better than 1000 words. Here&#39;s the source code of HashMap. Get method:\r\n\r\n \r\n\r\n    /**\r\n         * Implements Map.get and related methods\r\n         *\r\n         * @param hash hash for key\r\n         * @param key the key\r\n         * @return the node, or null if none\r\n         */\r\n        final Node&lt;K,V&gt; getNode(int hash, Object key) {\r\n            Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; int n; K k;\r\n            if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp;\r\n                (first = tab[(n - 1) &amp; hash]) != null) {\r\n                if (first.hash == hash &amp;&amp; // always check first node\r\n                    ((k = first.key) == key || (key != null &amp;&amp; key.equals(k))))\r\n                    return first;\r\n                if ((e = first.next) != null) {\r\n                    if (first instanceof TreeNode)\r\n                        return ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);\r\n                    do {\r\n                        if (e.hash == hash &amp;&amp;\r\n                            ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))\r\n                            return e;\r\n                    } while ((e = e.next) != null);\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n\r\nSo it becomes clear that hash is used to find the &quot;bucket&quot; and the first element is always checked in that bucket. If not, then `equals` of the key is used to find the actual element in the linked list.\r\n\r\nLet&#39;s see the `put()` method:\r\n\r\n      /**\r\n         * Implements Map.put and related methods\r\n         *\r\n         * @param hash hash for key\r\n         * @param key the key\r\n         * @param value the value to put\r\n         * @param onlyIfAbsent if true, don&#39;t change existing value\r\n         * @param evict if false, the table is in creation mode.\r\n         * @return previous value, or null if none\r\n         */\r\n        final V putVal(int hash, K key, V value, boolean onlyIfAbsent,\r\n                       boolean evict) {\r\n            Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i;\r\n            if ((tab = table) == null || (n = tab.length) == 0)\r\n                n = (tab = resize()).length;\r\n            if ((p = tab[i = (n - 1) &amp; hash]) == null)\r\n                tab[i] = newNode(hash, key, value, null);\r\n            else {\r\n                Node&lt;K,V&gt; e; K k;\r\n                if (p.hash == hash &amp;&amp;\r\n                    ((k = p.key) == key || (key != null &amp;&amp; key.equals(k))))\r\n                    e = p;\r\n                else if (p instanceof TreeNode)\r\n                    e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value);\r\n                else {\r\n                    for (int binCount = 0; ; ++binCount) {\r\n                        if ((e = p.next) == null) {\r\n                            p.next = newNode(hash, key, value, null);\r\n                            if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st\r\n                                treeifyBin(tab, hash);\r\n                            break;\r\n                        }\r\n                        if (e.hash == hash &amp;&amp;\r\n                            ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))\r\n                            break;\r\n                        p = e;\r\n                    }\r\n                }\r\n                if (e != null) { // existing mapping for key\r\n                    V oldValue = e.value;\r\n                    if (!onlyIfAbsent || oldValue == null)\r\n                        e.value = value;\r\n                    afterNodeAccess(e);\r\n                    return oldValue;\r\n                }\r\n            }\r\n            ++modCount;\r\n            if (++size &gt; threshold)\r\n                resize();\r\n            afterNodeInsertion(evict);\r\n            return null;\r\n        }\r\n\r\nIt&#39;s slightly more complicated, but it becomes clear that the new element is put in the tab at the position calculated based on hash:\r\n\r\n`i = (n - 1) &amp; hash` here `i` is the index where the new element will be put (or it is the &quot;bucket&quot;). `n` is the size of the `tab` array (array of &quot;buckets&quot;).\r\n\r\nFirst, it is tried to be put as the first element of in that &quot;bucket&quot;. If there is already an element, then append a new node to the list.\r\n\r\n\r\n","title":"How does a Java HashMap handle different objects with the same hash code?","body":"<p>As it is said, a picture is worth 1000 words. I say: some code is better than 1000 words. Here's the source code of HashMap. Get method:</p>\n\n<pre><code>/**\n     * Implements Map.get and related methods\n     *\n     * @param hash hash for key\n     * @param key the key\n     * @return the node, or null if none\n     */\n    final Node&lt;K,V&gt; getNode(int hash, Object key) {\n        Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; int n; K k;\n        if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp;\n            (first = tab[(n - 1) &amp; hash]) != null) {\n            if (first.hash == hash &amp;&amp; // always check first node\n                ((k = first.key) == key || (key != null &amp;&amp; key.equals(k))))\n                return first;\n            if ((e = first.next) != null) {\n                if (first instanceof TreeNode)\n                    return ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);\n                do {\n                    if (e.hash == hash &amp;&amp;\n                        ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))\n                        return e;\n                } while ((e = e.next) != null);\n            }\n        }\n        return null;\n    }\n</code></pre>\n\n<p>So it becomes clear that hash is used to find the \"bucket\" and the first element is always checked in that bucket. If not, then <code>equals</code> of the key is used to find the actual element in the linked list.</p>\n\n<p>Let's see the <code>put()</code> method:</p>\n\n<pre><code>  /**\n     * Implements Map.put and related methods\n     *\n     * @param hash hash for key\n     * @param key the key\n     * @param value the value to put\n     * @param onlyIfAbsent if true, don't change existing value\n     * @param evict if false, the table is in creation mode.\n     * @return previous value, or null if none\n     */\n    final V putVal(int hash, K key, V value, boolean onlyIfAbsent,\n                   boolean evict) {\n        Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i;\n        if ((tab = table) == null || (n = tab.length) == 0)\n            n = (tab = resize()).length;\n        if ((p = tab[i = (n - 1) &amp; hash]) == null)\n            tab[i] = newNode(hash, key, value, null);\n        else {\n            Node&lt;K,V&gt; e; K k;\n            if (p.hash == hash &amp;&amp;\n                ((k = p.key) == key || (key != null &amp;&amp; key.equals(k))))\n                e = p;\n            else if (p instanceof TreeNode)\n                e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value);\n            else {\n                for (int binCount = 0; ; ++binCount) {\n                    if ((e = p.next) == null) {\n                        p.next = newNode(hash, key, value, null);\n                        if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st\n                            treeifyBin(tab, hash);\n                        break;\n                    }\n                    if (e.hash == hash &amp;&amp;\n                        ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))\n                        break;\n                    p = e;\n                }\n            }\n            if (e != null) { // existing mapping for key\n                V oldValue = e.value;\n                if (!onlyIfAbsent || oldValue == null)\n                    e.value = value;\n                afterNodeAccess(e);\n                return oldValue;\n            }\n        }\n        ++modCount;\n        if (++size &gt; threshold)\n            resize();\n        afterNodeInsertion(evict);\n        return null;\n    }\n</code></pre>\n\n<p>It's slightly more complicated, but it becomes clear that the new element is put in the tab at the position calculated based on hash:</p>\n\n<p><code>i = (n - 1) &amp; hash</code> here <code>i</code> is the index where the new element will be put (or it is the \"bucket\"). <code>n</code> is the size of the <code>tab</code> array (array of \"buckets\").</p>\n\n<p>First, it is tried to be put as the first element of in that \"bucket\". If there is already an element, then append a new node to the list.</p>\n"},{"tags":[],"owner":{"account_id":4237678,"reputation":566,"user_id":3913051,"accept_rate":29,"display_name":"anubhs"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1587063312,"creation_date":1500226043,"answer_id":45131478,"question_id":6493605,"body_markdown":"&gt; two objects are equal, implies that they have same hashcode, but not vice versa.\n&gt;\n&gt; 2 equal objects ------&gt; they have same hashcode\n&gt;\n&gt; 2 objects have same hashcode ----xxxxx--&gt; they are NOT equal\n\n**Java 8 update in HashMap-**\n\nyou do this operation in your code - \n\n    myHashmap.put(&quot;old&quot;,&quot;old-value&quot;);\n    myHashMap.put(&quot;very-old&quot;,&quot;very-old-value&quot;);\n\nso, suppose your hashcode returned for both keys `&quot;old&quot;` and `&quot;very-old&quot;` is same. Then what will happen.\n\n   `myHashMap` is a HashMap, and suppose that initially you didn&#39;t specify its capacity. So default capacity as per java is 16. So now as soon as you initialised hashmap using the new keyword, it created 16 buckets. now when you executed first statement-\n\n    myHashmap.put(&quot;old&quot;,&quot;old-value&quot;);\nthen hashcode for `&quot;old&quot;` is calculated, and because the hashcode could be very large integer too, so, java internally did this - (hash is hashcode here and &gt;&gt;&gt; is right shift)\n\n    hash XOR hash &gt;&gt;&gt; 16\nso to give as a bigger picture, it will return some index, which would be between 0 to 15. Now your key value pair `&quot;old&quot;` and `&quot;old-value&quot;` would be converted to Entry object&#39;s key and value instance variable. and then this entry object will be stored in the bucket, or you can say that at a particular index, this entry object would be stored.\n\nFYI- Entry is a class in Map interface- Map.Entry, with these signature/definition\n\n    class Entry{\n              final Key k;\n              value v;\n              final int hash;\n              Entry next;\n    }\nnow when you execute next statement - \n\n    myHashmap.put(&quot;very-old&quot;,&quot;very-old-value&quot;);\n\nand `&quot;very-old&quot;` gives same hashcode as `&quot;old&quot;`, so this new key value pair is again sent to the same index or the same bucket. But since this bucket is not empty, then the `next` variable of the Entry object is used to store this new key value pair.\n\nand this will be stored as linked list for every object which have the same hashcode, but a TRIEFY_THRESHOLD is specified with value 6. so after this reaches, linked list is converted to the balanced tree(red-black tree) with first element as the root.\n","title":"How does a Java HashMap handle different objects with the same hash code?","body":"<blockquote>\n<p>two objects are equal, implies that they have same hashcode, but not vice versa.</p>\n<p>2 equal objects ------&gt; they have same hashcode</p>\n<p>2 objects have same hashcode ----xxxxx--&gt; they are NOT equal</p>\n</blockquote>\n<p><strong>Java 8 update in HashMap-</strong></p>\n<p>you do this operation in your code -</p>\n<pre><code>myHashmap.put(&quot;old&quot;,&quot;old-value&quot;);\nmyHashMap.put(&quot;very-old&quot;,&quot;very-old-value&quot;);\n</code></pre>\n<p>so, suppose your hashcode returned for both keys <code>&quot;old&quot;</code> and <code>&quot;very-old&quot;</code> is same. Then what will happen.</p>\n<p><code>myHashMap</code> is a HashMap, and suppose that initially you didn't specify its capacity. So default capacity as per java is 16. So now as soon as you initialised hashmap using the new keyword, it created 16 buckets. now when you executed first statement-</p>\n<pre><code>myHashmap.put(&quot;old&quot;,&quot;old-value&quot;);\n</code></pre>\n<p>then hashcode for <code>&quot;old&quot;</code> is calculated, and because the hashcode could be very large integer too, so, java internally did this - (hash is hashcode here and &gt;&gt;&gt; is right shift)</p>\n<pre><code>hash XOR hash &gt;&gt;&gt; 16\n</code></pre>\n<p>so to give as a bigger picture, it will return some index, which would be between 0 to 15. Now your key value pair <code>&quot;old&quot;</code> and <code>&quot;old-value&quot;</code> would be converted to Entry object's key and value instance variable. and then this entry object will be stored in the bucket, or you can say that at a particular index, this entry object would be stored.</p>\n<p>FYI- Entry is a class in Map interface- Map.Entry, with these signature/definition</p>\n<pre><code>class Entry{\n          final Key k;\n          value v;\n          final int hash;\n          Entry next;\n}\n</code></pre>\n<p>now when you execute next statement -</p>\n<pre><code>myHashmap.put(&quot;very-old&quot;,&quot;very-old-value&quot;);\n</code></pre>\n<p>and <code>&quot;very-old&quot;</code> gives same hashcode as <code>&quot;old&quot;</code>, so this new key value pair is again sent to the same index or the same bucket. But since this bucket is not empty, then the <code>next</code> variable of the Entry object is used to store this new key value pair.</p>\n<p>and this will be stored as linked list for every object which have the same hashcode, but a TRIEFY_THRESHOLD is specified with value 6. so after this reaches, linked list is converted to the balanced tree(red-black tree) with first element as the root.</p>\n"},{"tags":[],"owner":{"account_id":1015592,"reputation":892,"user_id":1027209,"accept_rate":38,"display_name":"Chris Milburn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635767814,"creation_date":1635767814,"answer_id":69796590,"question_id":6493605,"body_markdown":"Bearing in mind the explanations here for the structure of a hashmap, perhaps someone could explain the following paragraph on Baeldung :- \r\n\r\nJava has several implementations of the interface Map, each one with its own particularities.\r\n\r\n**However, none of the existing Java core Map implementations allow a Map to handle multiple values for a single key.**\r\n\r\nAs we can see, if we try to insert two values for the same key, the second value will be stored, while the first one will be dropped.\r\n\r\nIt will also be returned (by every proper implementation of the put(K key, V value) method):\r\n\r\n    Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\r\n    assertThat(map.put(&quot;key1&quot;, &quot;value1&quot;)).isEqualTo(null);\r\n    assertThat(map.put(&quot;key1&quot;, &quot;value2&quot;)).isEqualTo(&quot;value1&quot;);\r\n    assertThat(map.get(&quot;key1&quot;)).isEqualTo(&quot;value2&quot;);","title":"How does a Java HashMap handle different objects with the same hash code?","body":"<p>Bearing in mind the explanations here for the structure of a hashmap, perhaps someone could explain the following paragraph on Baeldung :-</p>\n<p>Java has several implementations of the interface Map, each one with its own particularities.</p>\n<p><strong>However, none of the existing Java core Map implementations allow a Map to handle multiple values for a single key.</strong></p>\n<p>As we can see, if we try to insert two values for the same key, the second value will be stored, while the first one will be dropped.</p>\n<p>It will also be returned (by every proper implementation of the put(K key, V value) method):</p>\n<pre><code>Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\nassertThat(map.put(&quot;key1&quot;, &quot;value1&quot;)).isEqualTo(null);\nassertThat(map.put(&quot;key1&quot;, &quot;value2&quot;)).isEqualTo(&quot;value1&quot;);\nassertThat(map.get(&quot;key1&quot;)).isEqualTo(&quot;value2&quot;);\n</code></pre>\n"}],"owner":{"account_id":768412,"reputation":5255,"user_id":802778,"accept_rate":63,"display_name":"akshay"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":255453,"favorite_count":0,"down_vote_count":1,"up_vote_count":267,"accepted_answer_id":6493946,"answer_count":15,"score":266,"last_activity_date":1635767814,"creation_date":1309181500,"question_id":6493605,"body_markdown":"As per my understanding I think:\r\n\r\n1. It is perfectly legal for two objects to have the same hashcode.\r\n2. If two objects are equal (using the equals() method) then they have the same hashcode.\r\n3. If two objects are not equal then they cannot have the same hashcode\r\n\r\nAm I correct?\r\n\r\nNow if am correct, I have the following question:\r\nThe `HashMap` internally uses the hashcode of the object. So if two objects can have the same hashcode, then how can the `HashMap` track which key it uses?\r\n\r\nCan someone explain how the `HashMap` internally uses the hashcode of the object?","title":"How does a Java HashMap handle different objects with the same hash code?","body":"<p>As per my understanding I think:</p>\n\n<ol>\n<li>It is perfectly legal for two objects to have the same hashcode.</li>\n<li>If two objects are equal (using the equals() method) then they have the same hashcode.</li>\n<li>If two objects are not equal then they cannot have the same hashcode</li>\n</ol>\n\n<p>Am I correct?</p>\n\n<p>Now if am correct, I have the following question:\nThe <code>HashMap</code> internally uses the hashcode of the object. So if two objects can have the same hashcode, then how can the <code>HashMap</code> track which key it uses?</p>\n\n<p>Can someone explain how the <code>HashMap</code> internally uses the hashcode of the object?</p>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":15946028,"reputation":142,"user_id":11506593,"display_name":"Santiago molano perdomo"},"score":0,"creation_date":1635752157,"post_id":69793839,"comment_id":123368725,"body_markdown":"I have tried some solutions that i&#39;ve seen on SO but it doesn&#39;t work.  One was to implement hascode and equals method but that caused infinite recursion when calling the GET method.","body":"I have tried some solutions that i&#39;ve seen on SO but it doesn&#39;t work.  One was to implement hascode and equals method but that caused infinite recursion when calling the GET method."}],"answers":[{"tags":[],"owner":{"account_id":18421626,"reputation":307,"user_id":13419106,"display_name":"krishna thota"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635753341,"creation_date":1635753341,"answer_id":69794030,"question_id":69793839,"body_markdown":"In this example, I don&#39;t see a necessity of having many to many relationship. one to many can serve the purpose, where one category can have multiple products and you can create multiple products using the same category which is unique by name.\r\n\r\nIf you still want to achieve it, you need to have a new table with the combination of primary keys of both tables and that is going to be the unique combination.\r\nrefer these pages for more info [1][1] and [2][2] with visual representation.\r\n\r\n\r\n  [1]: https://www.baeldung.com/jpa-many-to-many\r\n  [2]: https://dzone.com/articles/introduction-to-spring-data-jpa-part-8-many-to-man","title":"Spring JPA: How to insert/update new item with unique column when using Many to Many relationship","body":"<p>In this example, I don't see a necessity of having many to many relationship. one to many can serve the purpose, where one category can have multiple products and you can create multiple products using the same category which is unique by name.</p>\n<p>If you still want to achieve it, you need to have a new table with the combination of primary keys of both tables and that is going to be the unique combination.\nrefer these pages for more info <a href=\"https://www.baeldung.com/jpa-many-to-many\" rel=\"nofollow noreferrer\">1</a> and <a href=\"https://dzone.com/articles/introduction-to-spring-data-jpa-part-8-many-to-man\" rel=\"nofollow noreferrer\">2</a> with visual representation.</p>\n"},{"tags":[],"owner":{"account_id":6753077,"reputation":1639,"user_id":5202500,"accept_rate":83,"display_name":"eparvan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635767797,"creation_date":1635767385,"answer_id":69796508,"question_id":69793839,"body_markdown":"Try to avoid using `CascadeType.REMOVE` for many-to-many associations, since it may generate too many queries and remove more records than you expected. [Here][1] is an article that explains this behavior in details. Since you&#39;re using `CascadeType.ALL` in your mapping it also includes `CascadeType.REMOVE`.\r\n\r\nRegarding adding/updating new categories to product entity. It would be helpful to override `equals` and `hashCode` methods. Since in your example `Category.name` should be unique and basically you distinguish categories by their names, then your implementations may look like this:\r\n```\r\n    @Override\r\n    public boolean equals(Object o) {\r\n        if (o == this)\r\n            return true;\r\n        if (!(o instanceof Category))\r\n            return false;\r\n        Category other = (Category) o;\r\n        return (this.name == null &amp;&amp; other.name == null) || (this.name != null &amp;&amp; this.name.equals(other.name));\r\n    }\r\n\r\n    @Override\r\n    public int hashCode() {\r\n        return this.name.hashCode();\r\n    }\r\n```\r\n\r\nThis way you&#39;ll make sure that your `Product.categories` field will not contain categories with the same name.\r\n\r\nAssuming that your entity mapping have `cascade = {CascadeType.PERSIST, CascadeType.MERGE}`, your service class may look similar to following:\r\n\r\n```\r\n@Service\r\n@Transactional\r\npublic class ProductService {\r\n    @Autowired\r\n    private ProductRepository productRepository;\r\n\r\n    public Product createProduct(Product product) {\r\n        return productRepository.save(product);\r\n    }\r\n\r\n    public Product saveCategoryInProduct(Long productId, Category category) {\r\n        return productRepository\r\n                .findById(productId)\r\n                .map(product -&gt; addCategory(product, category))\r\n                .map(productRepository::save)\r\n                .orElseThrow(() -&gt; new ResponseStatusException(HttpStatus.NOT_FOUND));\r\n    }\r\n\r\n    private Product addCategory(Product product, Category category) {\r\n        product.getCategories().add(category);\r\n        return product;\r\n    }\r\n}\r\n```\r\n\r\nBy calling `saveCategoryInProduct`, you&#39;ll add new categories to the product entities. If Category entity contains `id` (not null) then new record will be created in `product_categories ` table. \r\n\r\nHowever if `Category` entity does not have `id`( is null), then there will be an attempt to create new record in `category` table first, then associate it to provided product `id`(by creating record in `product_categories`). In this case you may encounter `DuplicateKeyException`. To deal with it you may modify `addCategory` method in a following way:\r\n```\r\n    private Product addCategory(Product product, Category category) {\r\n        product.getCategories().add(\r\n                categoryRepository\r\n                        .findByName(category)\r\n                        .orElse(category));\r\n        return product;\r\n    }\r\n```\r\n\r\nThis way you&#39;ll make sure that the category you add either retrieved from db(therefore will not be created again) or does not exists yet.\r\n\r\n  [1]: https://thorben-janssen.com/avoid-cascadetype-delete-many-assocations/","title":"Spring JPA: How to insert/update new item with unique column when using Many to Many relationship","body":"<p>Try to avoid using <code>CascadeType.REMOVE</code> for many-to-many associations, since it may generate too many queries and remove more records than you expected. <a href=\"https://thorben-janssen.com/avoid-cascadetype-delete-many-assocations/\" rel=\"nofollow noreferrer\">Here</a> is an article that explains this behavior in details. Since you're using <code>CascadeType.ALL</code> in your mapping it also includes <code>CascadeType.REMOVE</code>.</p>\n<p>Regarding adding/updating new categories to product entity. It would be helpful to override <code>equals</code> and <code>hashCode</code> methods. Since in your example <code>Category.name</code> should be unique and basically you distinguish categories by their names, then your implementations may look like this:</p>\n<pre><code>    @Override\n    public boolean equals(Object o) {\n        if (o == this)\n            return true;\n        if (!(o instanceof Category))\n            return false;\n        Category other = (Category) o;\n        return (this.name == null &amp;&amp; other.name == null) || (this.name != null &amp;&amp; this.name.equals(other.name));\n    }\n\n    @Override\n    public int hashCode() {\n        return this.name.hashCode();\n    }\n</code></pre>\n<p>This way you'll make sure that your <code>Product.categories</code> field will not contain categories with the same name.</p>\n<p>Assuming that your entity mapping have <code>cascade = {CascadeType.PERSIST, CascadeType.MERGE}</code>, your service class may look similar to following:</p>\n<pre><code>@Service\n@Transactional\npublic class ProductService {\n    @Autowired\n    private ProductRepository productRepository;\n\n    public Product createProduct(Product product) {\n        return productRepository.save(product);\n    }\n\n    public Product saveCategoryInProduct(Long productId, Category category) {\n        return productRepository\n                .findById(productId)\n                .map(product -&gt; addCategory(product, category))\n                .map(productRepository::save)\n                .orElseThrow(() -&gt; new ResponseStatusException(HttpStatus.NOT_FOUND));\n    }\n\n    private Product addCategory(Product product, Category category) {\n        product.getCategories().add(category);\n        return product;\n    }\n}\n</code></pre>\n<p>By calling <code>saveCategoryInProduct</code>, you'll add new categories to the product entities. If Category entity contains <code>id</code> (not null) then new record will be created in <code>product_categories </code> table.</p>\n<p>However if <code>Category</code> entity does not have <code>id</code>( is null), then there will be an attempt to create new record in <code>category</code> table first, then associate it to provided product <code>id</code>(by creating record in <code>product_categories</code>). In this case you may encounter <code>DuplicateKeyException</code>. To deal with it you may modify <code>addCategory</code> method in a following way:</p>\n<pre><code>    private Product addCategory(Product product, Category category) {\n        product.getCategories().add(\n                categoryRepository\n                        .findByName(category)\n                        .orElse(category));\n        return product;\n    }\n</code></pre>\n<p>This way you'll make sure that the category you add either retrieved from db(therefore will not be created again) or does not exists yet.</p>\n"}],"owner":{"account_id":15946028,"reputation":142,"user_id":11506593,"display_name":"Santiago molano perdomo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1410,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1635767797,"creation_date":1635752065,"question_id":69793839,"body_markdown":"I would like to create a new Product with a category. If the category doesn&#39;t exist then also create the category. So far so good with this use case.\r\n\r\nMy second use case comes when I want to create another product with the same category. Since I have my Category entity with unique name then when I call my service it throws the duplicate error key. What I want is to be able to create the second product and update the category to have this product.\r\n\r\nThis is my Category Entity\r\n\r\n```\r\npackage com.smolano.cupboard.entities;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonIdentityInfo;\r\nimport com.fasterxml.jackson.annotation.ObjectIdGenerators;\r\n\r\nimport javax.persistence.*;\r\nimport java.io.Serializable;\r\nimport java.util.HashSet;\r\nimport java.util.Set;\r\n\r\n@Entity\r\n@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = &quot;id&quot;)\r\npublic class Category implements Serializable {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    @Column(unique = true)\r\n    private String name;\r\n    @ManyToMany(mappedBy = &quot;categories&quot;, fetch = FetchType.LAZY)\r\n    private Set&lt;Product&gt; products = new HashSet&lt;&gt;();\r\n\r\n    public Long getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(Long id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public Set&lt;Product&gt; getProducts() {\r\n        return products;\r\n    }\r\n\r\n    public void setProducts(Set&lt;Product&gt; products) {\r\n        this.products = products;\r\n    }\r\n}\r\n```\r\nThis is my Product Entity\r\n```\r\npackage com.smolano.cupboard.entities;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonIdentityInfo;\r\nimport com.fasterxml.jackson.annotation.ObjectIdGenerators;\r\n\r\nimport javax.persistence.*;\r\nimport java.io.Serializable;\r\nimport java.util.HashSet;\r\nimport java.util.Set;\r\n\r\n@Entity\r\n@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = &quot;id&quot;)\r\npublic class Product implements Serializable {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    private String name;\r\n    @ManyToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY)\r\n    @JoinTable(\r\n            name = &quot;product_categories&quot;,\r\n            joinColumns = {@JoinColumn(name = &quot;product_id&quot;)},\r\n            inverseJoinColumns = {@JoinColumn(name = &quot;category_id&quot;)}\r\n    )\r\n    private Set&lt;Category&gt; categories = new HashSet&lt;&gt;();\r\n    private String barCode;\r\n\r\n    public Long getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(Long id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public Set&lt;Category&gt; getCategories() {\r\n        return categories;\r\n    }\r\n\r\n    public void setCategories(Set&lt;Category&gt; categories) {\r\n        this.categories = categories;\r\n    }\r\n\r\n    public String getBarCode() {\r\n        return barCode;\r\n    }\r\n\r\n    public void setBarCode(String barCode) {\r\n        this.barCode = barCode;\r\n    }\r\n}\r\n```\r\nMy category repository\r\n```\r\npackage com.smolano.cupboard.repositories;\r\n\r\nimport com.smolano.cupboard.entities.Category;\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\n\r\npublic interface CategoryRepository extends JpaRepository&lt;Category, Long&gt; {\r\n}\r\n```\r\nand my product repository\r\n```\r\npackage com.smolano.cupboard.repositories;\r\n\r\nimport com.smolano.cupboard.entities.Product;\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\n\r\npublic interface ProductRepository extends JpaRepository&lt;Product, Long&gt; {\r\n}\r\n```\r\nRest of my code can be found here\r\nhttps://github.com/santfirax/backend-product-store-java","title":"Spring JPA: How to insert/update new item with unique column when using Many to Many relationship","body":"<p>I would like to create a new Product with a category. If the category doesn't exist then also create the category. So far so good with this use case.</p>\n<p>My second use case comes when I want to create another product with the same category. Since I have my Category entity with unique name then when I call my service it throws the duplicate error key. What I want is to be able to create the second product and update the category to have this product.</p>\n<p>This is my Category Entity</p>\n<pre><code>package com.smolano.cupboard.entities;\n\nimport com.fasterxml.jackson.annotation.JsonIdentityInfo;\nimport com.fasterxml.jackson.annotation.ObjectIdGenerators;\n\nimport javax.persistence.*;\nimport java.io.Serializable;\nimport java.util.HashSet;\nimport java.util.Set;\n\n@Entity\n@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = &quot;id&quot;)\npublic class Category implements Serializable {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    @Column(unique = true)\n    private String name;\n    @ManyToMany(mappedBy = &quot;categories&quot;, fetch = FetchType.LAZY)\n    private Set&lt;Product&gt; products = new HashSet&lt;&gt;();\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public Set&lt;Product&gt; getProducts() {\n        return products;\n    }\n\n    public void setProducts(Set&lt;Product&gt; products) {\n        this.products = products;\n    }\n}\n</code></pre>\n<p>This is my Product Entity</p>\n<pre><code>package com.smolano.cupboard.entities;\n\nimport com.fasterxml.jackson.annotation.JsonIdentityInfo;\nimport com.fasterxml.jackson.annotation.ObjectIdGenerators;\n\nimport javax.persistence.*;\nimport java.io.Serializable;\nimport java.util.HashSet;\nimport java.util.Set;\n\n@Entity\n@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = &quot;id&quot;)\npublic class Product implements Serializable {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    private String name;\n    @ManyToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY)\n    @JoinTable(\n            name = &quot;product_categories&quot;,\n            joinColumns = {@JoinColumn(name = &quot;product_id&quot;)},\n            inverseJoinColumns = {@JoinColumn(name = &quot;category_id&quot;)}\n    )\n    private Set&lt;Category&gt; categories = new HashSet&lt;&gt;();\n    private String barCode;\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public Set&lt;Category&gt; getCategories() {\n        return categories;\n    }\n\n    public void setCategories(Set&lt;Category&gt; categories) {\n        this.categories = categories;\n    }\n\n    public String getBarCode() {\n        return barCode;\n    }\n\n    public void setBarCode(String barCode) {\n        this.barCode = barCode;\n    }\n}\n</code></pre>\n<p>My category repository</p>\n<pre><code>package com.smolano.cupboard.repositories;\n\nimport com.smolano.cupboard.entities.Category;\nimport org.springframework.data.jpa.repository.JpaRepository;\n\npublic interface CategoryRepository extends JpaRepository&lt;Category, Long&gt; {\n}\n</code></pre>\n<p>and my product repository</p>\n<pre><code>package com.smolano.cupboard.repositories;\n\nimport com.smolano.cupboard.entities.Product;\nimport org.springframework.data.jpa.repository.JpaRepository;\n\npublic interface ProductRepository extends JpaRepository&lt;Product, Long&gt; {\n}\n</code></pre>\n<p>Rest of my code can be found here\n<a href=\"https://github.com/santfirax/backend-product-store-java\" rel=\"nofollow noreferrer\">https://github.com/santfirax/backend-product-store-java</a></p>\n"},{"tags":["java","arraylist","sum"],"comments":[{"owner":{"account_id":134022,"reputation":717183,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"score":10,"creation_date":1367000119,"post_id":16242733,"comment_id":23237228,"body_markdown":"How about `sum += m.get(i)`?","body":"How about <code>sum += m.get(i)</code>?"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":4,"creation_date":1367000129,"post_id":16242733,"comment_id":23237234,"body_markdown":"Hint: to get value from list at specified position you can use `m.get(indexOfPosition)`.","body":"Hint: to get value from list at specified position you can use <code>m.get(indexOfPosition)</code>."},{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":3,"creation_date":1367000176,"post_id":16242733,"comment_id":23237254,"body_markdown":"Alternatively, create a foreach loop and add sum to each element in the foreach.","body":"Alternatively, create a foreach loop and add sum to each element in the foreach."},{"owner":{"account_id":3598339,"reputation":1871,"user_id":3002336,"display_name":"Anand Varkey Philips"},"score":2,"creation_date":1504521246,"post_id":16242733,"comment_id":79030353,"body_markdown":"or Use : JAVA 8 for int versions,\nint sum = list.stream().mapToInt(Integer::intValue).sum();","body":"or Use : JAVA 8 for int versions, int sum = list.stream().mapToInt(Integer::intValue).sum();"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1524112669,"post_id":16242733,"comment_id":86841247,"body_markdown":"This Question should be re-opened. It is valid, specific, and useful. Look at the up-votes on both Questions and Answers. Look at the newer information being added about using Java Streams for a *functional* solution.","body":"This Question should be re-opened. It is valid, specific, and useful. Look at the up-votes on both Questions and Answers. Look at the newer information being added about using Java Streams for a <i>functional</i> solution."}],"answers":[{"tags":[],"owner":{"account_id":1842261,"reputation":11057,"user_id":1671448,"accept_rate":88,"display_name":"TheEwook"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1367000186,"creation_date":1367000186,"answer_id":16242774,"question_id":16242733,"body_markdown":"Not very hard, just use `m.get(i)` to get the value from the list.\r\n\r\n    public double incassoMargherita()\r\n    {\r\n        double sum = 0;\r\n        for(int i = 0; i &lt; m.size(); i++)\r\n        {\r\n            sum += m.get(i);\r\n        }\r\n        return sum;\r\n    }","title":"Sum all the elements java arraylist","body":"<p>Not very hard, just use <code>m.get(i)</code> to get the value from the list.</p>\n\n<pre><code>public double incassoMargherita()\n{\n    double sum = 0;\n    for(int i = 0; i &lt; m.size(); i++)\n    {\n        sum += m.get(i);\n    }\n    return sum;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":338522,"reputation":1120,"user_id":667440,"accept_rate":82,"display_name":"j.jerrod.taylor"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1367000193,"creation_date":1367000193,"answer_id":16242777,"question_id":16242733,"body_markdown":"I haven&#39;t tested it but it should work.    \r\n\r\n    public double incassoMargherita()\r\n    {\r\n        double sum = 0;\r\n        for(int i = 0; i &lt; m.size(); i++)\r\n        {\r\n            sum = sum + m.get(i);\r\n        }\r\n        return sum;\r\n    }","title":"Sum all the elements java arraylist","body":"<p>I haven't tested it but it should work.    </p>\n\n<pre><code>public double incassoMargherita()\n{\n    double sum = 0;\n    for(int i = 0; i &lt; m.size(); i++)\n    {\n        sum = sum + m.get(i);\n    }\n    return sum;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":145851,"reputation":20697,"user_id":355931,"accept_rate":88,"display_name":"Barranka"},"down_vote_count":0,"up_vote_count":66,"is_accepted":true,"score":66,"last_activity_date":1555509564,"creation_date":1367000434,"answer_id":16242828,"question_id":16242733,"body_markdown":"Two ways:\r\n\r\nUse indexes:\r\n\r\n    double sum = 0;\r\n    for(int i = 0; i &lt; m.size(); i++)\r\n        sum += m.get(i);\r\n    return sum;\r\n\r\nUse the &quot;for each&quot; style:\r\n\r\n    double sum = 0;\r\n    for(Double d : m)\r\n        sum += d;\r\n    return sum;\r\n","title":"Sum all the elements java arraylist","body":"<p>Two ways:</p>\n\n<p>Use indexes:</p>\n\n<pre><code>double sum = 0;\nfor(int i = 0; i &lt; m.size(); i++)\n    sum += m.get(i);\nreturn sum;\n</code></pre>\n\n<p>Use the \"for each\" style:</p>\n\n<pre><code>double sum = 0;\nfor(Double d : m)\n    sum += d;\nreturn sum;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4347388,"reputation":575,"user_id":9400714,"display_name":"Lokeshkumar R"},"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1524132623,"creation_date":1524130161,"answer_id":49917501,"question_id":16242733,"body_markdown":"Using Java 8 [streams](https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html):\r\n\r\n    double sum = m.stream()\r\n        .mapToDouble(a -&gt; a)\r\n        .sum();\r\n\r\n    System.out.println(sum); ","title":"Sum all the elements java arraylist","body":"<p>Using Java 8 <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html\" rel=\"noreferrer\">streams</a>:</p>\n\n<pre><code>double sum = m.stream()\n    .mapToDouble(a -&gt; a)\n    .sum();\n\nSystem.out.println(sum); \n</code></pre>\n"},{"tags":[],"owner":{"account_id":4312932,"reputation":23962,"user_id":3523579,"accept_rate":90,"display_name":"Mikhail Kholodkov"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1559086284,"creation_date":1559086284,"answer_id":56351259,"question_id":16242733,"body_markdown":"Java 8+ version for `Integer`, `Long`, `Double` and `Float`\r\n\r\n        List&lt;Integer&gt; ints = Arrays.asList(1, 2, 3, 4, 5);\r\n        List&lt;Long&gt; longs = Arrays.asList(1L, 2L, 3L, 4L, 5L);\r\n        List&lt;Double&gt; doubles = Arrays.asList(1.2d, 2.3d, 3.0d, 4.0d, 5.0d);\r\n        List&lt;Float&gt; floats = Arrays.asList(1.3f, 2.2f, 3.0f, 4.0f, 5.0f);\r\n\r\n        long intSum = ints.stream()\r\n                .mapToLong(Integer::longValue)\r\n                .sum();\r\n\r\n        long longSum = longs.stream()\r\n                .mapToLong(Long::longValue)\r\n                .sum();\r\n\r\n        double doublesSum = doubles.stream()\r\n                .mapToDouble(Double::doubleValue)\r\n                .sum();\r\n\r\n        double floatsSum = floats.stream()\r\n                .mapToDouble(Float::doubleValue)\r\n                .sum();\r\n\r\n        System.out.println(String.format(\r\n                &quot;Integers: %s, Longs: %s, Doubles: %s, Floats: %s&quot;,\r\n                intSum, longSum, doublesSum, floatsSum));\r\n\r\n&gt;    15, 15, 15.5, 15.5","title":"Sum all the elements java arraylist","body":"<p>Java 8+ version for <code>Integer</code>, <code>Long</code>, <code>Double</code> and <code>Float</code></p>\n\n<pre><code>    List&lt;Integer&gt; ints = Arrays.asList(1, 2, 3, 4, 5);\n    List&lt;Long&gt; longs = Arrays.asList(1L, 2L, 3L, 4L, 5L);\n    List&lt;Double&gt; doubles = Arrays.asList(1.2d, 2.3d, 3.0d, 4.0d, 5.0d);\n    List&lt;Float&gt; floats = Arrays.asList(1.3f, 2.2f, 3.0f, 4.0f, 5.0f);\n\n    long intSum = ints.stream()\n            .mapToLong(Integer::longValue)\n            .sum();\n\n    long longSum = longs.stream()\n            .mapToLong(Long::longValue)\n            .sum();\n\n    double doublesSum = doubles.stream()\n            .mapToDouble(Double::doubleValue)\n            .sum();\n\n    double floatsSum = floats.stream()\n            .mapToDouble(Float::doubleValue)\n            .sum();\n\n    System.out.println(String.format(\n            \"Integers: %s, Longs: %s, Doubles: %s, Floats: %s\",\n            intSum, longSum, doublesSum, floatsSum));\n</code></pre>\n\n<blockquote>\n  <p>15, 15, 15.5, 15.5</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":17722456,"reputation":1,"user_id":12867154,"display_name":"Suraj Kumar Rout"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619623584,"creation_date":1619615664,"answer_id":67300964,"question_id":16242733,"body_markdown":"Try this\r\n\r\n    ----\r\n    public double incassoMargherita()\r\n    {\r\n        double sum = 0;\r\n        for(int i = 0; i &lt; m.size(); i++)\r\n        {\r\n         sum = sum +(double) m.get(i);\r\n        }\r\n        return sum;\r\n    }\r\n\r\n","title":"Sum all the elements java arraylist","body":"<p>Try this</p>\n<pre><code>----\npublic double incassoMargherita()\n{\n    double sum = 0;\n    for(int i = 0; i &lt; m.size(); i++)\n    {\n     sum = sum +(double) m.get(i);\n    }\n    return sum;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20569119,"reputation":51,"user_id":15097835,"display_name":"Aman Kumar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1625040538,"creation_date":1625040538,"answer_id":68190818,"question_id":16242733,"body_markdown":"You can even leverage the power of `reduce` of `stream`. \r\nIn Java 8, the `Stream.reduce()` combine elements of a stream and produces a single value.\r\n\r\n```\r\npublic double incassoMargherita()\r\n{\r\n    // reduce takes 2 args =&gt; \r\n    // 1. initial value\r\n    // 2. binary operator\r\n    return m.stream().reduce(0, (a,b) -&gt; a + b);\r\n}\r\n```","title":"Sum all the elements java arraylist","body":"<p>You can even leverage the power of <code>reduce</code> of <code>stream</code>.\nIn Java 8, the <code>Stream.reduce()</code> combine elements of a stream and produces a single value.</p>\n<pre><code>public double incassoMargherita()\n{\n    // reduce takes 2 args =&gt; \n    // 1. initial value\n    // 2. binary operator\n    return m.stream().reduce(0, (a,b) -&gt; a + b);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11779404,"reputation":764,"user_id":8619606,"display_name":"Kirguduck"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635360929,"creation_date":1635360929,"answer_id":69744082,"question_id":16242733,"body_markdown":"I see that it is very old question but why did nobody offer easiest way without loop?\r\n\r\n    sum = m.sum()\r\n\r\n","title":"Sum all the elements java arraylist","body":"<p>I see that it is very old question but why did nobody offer easiest way without loop?</p>\n<pre><code>sum = m.sum()\n</code></pre>\n"}],"owner":{"display_name":"user2324946"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":347069,"favorite_count":0,"down_vote_count":4,"up_vote_count":57,"accepted_answer_id":16242828,"answer_count":8,"score":53,"last_activity_date":1635767691,"creation_date":1367000040,"question_id":16242733,"body_markdown":"If I had: `ArrayList&lt;Double&gt; m = new ArrayList&lt;Double&gt;();`\r\nwith the double values ​​inside, how should I do to add up all the ArrayList elements?\r\n\r\n    public double incassoMargherita()\r\n    {\r\n     double sum = 0;\r\n     for(int i = 0; i &lt; m.size(); i++)\r\n     {          \r\n     }\r\n     return sum;\r\n    }\r\n\r\nas?","title":"Sum all the elements java arraylist","body":"<p>If I had: <code>ArrayList&lt;Double&gt; m = new ArrayList&lt;Double&gt;();</code>\nwith the double values ​​inside, how should I do to add up all the ArrayList elements?</p>\n\n<pre><code>public double incassoMargherita()\n{\n double sum = 0;\n for(int i = 0; i &lt; m.size(); i++)\n {          \n }\n return sum;\n}\n</code></pre>\n\n<p>as?</p>\n"},{"tags":["java","vaadin14"],"comments":[{"owner":{"account_id":12280349,"reputation":10212,"user_id":8962195,"display_name":"Tatu Lund"},"score":0,"creation_date":1635691949,"post_id":69774026,"comment_id":123357576,"body_markdown":"&quot;I&#39;d never used multi-select until now. I didn&#39;t realize it provides checkboxes out of the box (no pun intended).&quot;, could you formulate that as an answer to this question, so that it is not left hanging around un-resolved. You can answer your own questions here.","body":"&quot;I&#39;d never used multi-select until now. I didn&#39;t realize it provides checkboxes out of the box (no pun intended).&quot;, could you formulate that as an answer to this question, so that it is not left hanging around un-resolved. You can answer your own questions here."}],"answers":[{"tags":[],"owner":{"account_id":1159723,"reputation":1811,"user_id":1139500,"display_name":"Joseph Gagnon"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1635767557,"creation_date":1635767557,"answer_id":69796543,"question_id":69774026,"body_markdown":"I had never used multi-select before and didn&#39;t realize that using that technique automatically adds a checkbox at the front of the row. Problem solved.","title":"Vaadin 14 - How do I implement a grid with a checkbox column allowing operations on multiple rows?","body":"<p>I had never used multi-select before and didn't realize that using that technique automatically adds a checkbox at the front of the row. Problem solved.</p>\n"}],"owner":{"account_id":1159723,"reputation":1811,"user_id":1139500,"display_name":"Joseph Gagnon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":315,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69796543,"answer_count":1,"score":1,"last_activity_date":1635767557,"creation_date":1635536561,"question_id":69774026,"body_markdown":"I have a Vaadin 14 Flow application that presents a grid of tasks that can be added to and deleted from as well as editing a selected task. Currently I have it set up so that if the user clicks a row (single select), it opens an editor so they can edit the task.\r\n\r\nWhat I&#39;d like to do is have a checkbox on each row that can be used as a multi-row selector to allow deleting multiple rows.\r\n\r\nWould it be easier to just have the table be multiple selection enabled and just delete whatever row(s) are selected? I assume multi-selection allows the usual shift-click to select a contiguous range and control-click to select rows at random.\r\n\r\nIf I switch to multi-select, how will this affect the ability to simply click a row and have it open an editor for that row? If multiple rows are selected, what is likely to happen?\r\n\r\n--------------------------------------------------------------------------\r\n\r\nUpdate:\r\n\r\nI&#39;d never used multi-select until now. I didn&#39;t realize it provides checkboxes out of the box (no pun intended).\r\n","title":"Vaadin 14 - How do I implement a grid with a checkbox column allowing operations on multiple rows?","body":"<p>I have a Vaadin 14 Flow application that presents a grid of tasks that can be added to and deleted from as well as editing a selected task. Currently I have it set up so that if the user clicks a row (single select), it opens an editor so they can edit the task.</p>\n<p>What I'd like to do is have a checkbox on each row that can be used as a multi-row selector to allow deleting multiple rows.</p>\n<p>Would it be easier to just have the table be multiple selection enabled and just delete whatever row(s) are selected? I assume multi-selection allows the usual shift-click to select a contiguous range and control-click to select rows at random.</p>\n<p>If I switch to multi-select, how will this affect the ability to simply click a row and have it open an editor for that row? If multiple rows are selected, what is likely to happen?</p>\n<hr />\n<p>Update:</p>\n<p>I'd never used multi-select until now. I didn't realize it provides checkboxes out of the box (no pun intended).</p>\n"},{"tags":["java","jdbc","connection-pooling","ucp"],"comments":[{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":1,"creation_date":1635706634,"post_id":69789662,"comment_id":123361179,"body_markdown":"That should be the usual `connection.close()`. At least that&#39;s the standard way to signal to the pool that the client is done using the connection.","body":"That should be the usual <code>connection.close()</code>. At least that&#39;s the standard way to signal to the pool that the client is done using the connection."}],"answers":[{"tags":[],"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1635707227,"creation_date":1635707227,"answer_id":69789755,"question_id":69789662,"body_markdown":"The fine manual [oracle.ucp.jdbc\r\nClass PoolDataSourceImpl](https://docs.oracle.com/cd/E11882_01/java.112/e12826/oracle/ucp/jdbc/PoolDataSourceImpl.html)\r\n\r\n&gt; This DataSource uses the Universal Connection Pool to get a connection, creating a proxy to that connection, and returning the proxy to the client. When the client calls close on the connection proxy, the underlying physical connection is returned to the pool. \r\n\r\nSo, as noted in the comments, use `connection.close()`. The connection is a proxy and the close method will return the connection to the pool instead of closing the connection as is usual.\r\n\r\n","title":"How to return Connection to oracle.ucp.jdbc.PoolDataSource?","body":"<p>The fine manual <a href=\"https://docs.oracle.com/cd/E11882_01/java.112/e12826/oracle/ucp/jdbc/PoolDataSourceImpl.html\" rel=\"nofollow noreferrer\">oracle.ucp.jdbc\nClass PoolDataSourceImpl</a></p>\n<blockquote>\n<p>This DataSource uses the Universal Connection Pool to get a connection, creating a proxy to that connection, and returning the proxy to the client. When the client calls close on the connection proxy, the underlying physical connection is returned to the pool.</p>\n</blockquote>\n<p>So, as noted in the comments, use <code>connection.close()</code>. The connection is a proxy and the close method will return the connection to the pool instead of closing the connection as is usual.</p>\n"}],"owner":{"account_id":1232942,"reputation":1911,"user_id":1197140,"accept_rate":30,"display_name":"Chandu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":522,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1635767309,"answer_count":1,"score":1,"last_activity_date":1635767280,"creation_date":1635706516,"question_id":69789662,"body_markdown":"I have an application which uses `oracle.ucp.jdbc.PoolDataSource` to maintain pool of JDBC connections. I am able to get a connection and use it.\r\n\r\nAt the end of my function, I want to return the `connection` to the pool. I don&#39;t find any method to return the the pool.\r\n\r\nHow to return the connection to the pool?","title":"How to return Connection to oracle.ucp.jdbc.PoolDataSource?","body":"<p>I have an application which uses <code>oracle.ucp.jdbc.PoolDataSource</code> to maintain pool of JDBC connections. I am able to get a connection and use it.</p>\n<p>At the end of my function, I want to return the <code>connection</code> to the pool. I don't find any method to return the the pool.</p>\n<p>How to return the connection to the pool?</p>\n"},{"tags":["java","exception","eclipse-plugin","runtime-error","selection-sort"],"answers":[{"tags":[],"owner":{"account_id":23019255,"reputation":320,"user_id":17140506,"display_name":"Digsb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1635750226,"creation_date":1635750226,"answer_id":69793571,"question_id":69793399,"body_markdown":"Change below line and try.\r\n\r\n&gt; a[minind]=a[temp];\r\n\r\nto\r\n\r\n&gt; a[minind]=temp;\r\n\r\nLet me know if this solved ArrayIndexOutofBoundException.","title":"Iam having a runtime error while running my selection short program in java","body":"<p>Change below line and try.</p>\n<blockquote>\n<p>a[minind]=a[temp];</p>\n</blockquote>\n<p>to</p>\n<blockquote>\n<p>a[minind]=temp;</p>\n</blockquote>\n<p>Let me know if this solved ArrayIndexOutofBoundException.</p>\n"}],"owner":{"account_id":23202730,"reputation":3,"user_id":17297327,"display_name":"prince gujjar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1635752784,"accepted_answer_id":69793571,"answer_count":1,"score":0,"last_activity_date":1635766925,"creation_date":1635748917,"question_id":69793399,"body_markdown":"I was doing this shorting program of selection short and when I run it I got this exception which I am unable to figure out why I am having it, (the software I am using is Eclipse) \r\nhere is the code\r\n\r\n\tScanner sc = new Scanner(System.in);\r\n\tSystem.out.println(&quot;Enter the length of matrix&quot;);\r\n\tint len=sc.nextInt();\r\n\tint a[]=new int[len];\r\n\tSystem.out.println(&quot;Enter the series&quot;);\r\n\tfor(int k=0; k&lt;len; k++) {\r\n\t    a[k] = sc.nextInt();\r\n\t}\r\n\t\r\n\tfor(int i=0;i&lt;len-1;i++) {\r\n\t\tint minind=i;\r\n\t\tfor(int j=0; j&lt;len-1-i; j++) {\r\n\t\t\tif(a[j] &lt; a[minind]) {\r\n\t\t\t\tminind=j;\r\n\t\t\t}\r\n\t\t\r\n    \t\tint temp=a[i];\r\n    \t\ta[i]=a[minind];\r\n    \t\ta[minind]=a[temp];\r\n        }\r\n    }\r\n\tSystem.out.println(&quot;Shorted array is &quot;);\r\n\tfor(int item : a) {\r\n\t    System.out.print(item + &quot; &quot;);\r\n\t}\r\n\r\n\r\n\r\n\t\r\n here is my input\r\n\r\nEnter the length of matrix\r\n\r\n4\r\n\r\nEnter the series\r\n\r\n4 5 6 1\r\n\r\nhere is the exception \r\n\r\n\r\n    Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: Index 4 out of bounds for length 4\r\n    \tat arrays.Selection_short.main(Selection_short.java:27)\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yY7yv.png","title":"Iam having a runtime error while running my selection short program in java","body":"<p>I was doing this shorting program of selection short and when I run it I got this exception which I am unable to figure out why I am having it, (the software I am using is Eclipse)\nhere is the code</p>\n<pre><code>Scanner sc = new Scanner(System.in);\nSystem.out.println(&quot;Enter the length of matrix&quot;);\nint len=sc.nextInt();\nint a[]=new int[len];\nSystem.out.println(&quot;Enter the series&quot;);\nfor(int k=0; k&lt;len; k++) {\n    a[k] = sc.nextInt();\n}\n\nfor(int i=0;i&lt;len-1;i++) {\n    int minind=i;\n    for(int j=0; j&lt;len-1-i; j++) {\n        if(a[j] &lt; a[minind]) {\n            minind=j;\n        }\n    \n        int temp=a[i];\n        a[i]=a[minind];\n        a[minind]=a[temp];\n    }\n}\nSystem.out.println(&quot;Shorted array is &quot;);\nfor(int item : a) {\n    System.out.print(item + &quot; &quot;);\n}\n</code></pre>\n<p>here is my input</p>\n<p>Enter the length of matrix</p>\n<p>4</p>\n<p>Enter the series</p>\n<p>4 5 6 1</p>\n<p>here is the exception</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: Index 4 out of bounds for length 4\n    at arrays.Selection_short.main(Selection_short.java:27)\n</code></pre>\n"},{"tags":["java","spring-boot","security","authentication","spring-restcontroller"],"answers":[{"tags":[],"owner":{"account_id":6300997,"reputation":11,"user_id":4895669,"display_name":"Mircea Lutic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635766747,"creation_date":1635766747,"answer_id":69796418,"question_id":69681254,"body_markdown":"Here is the way it works: use the encrypted password for AuthenticationManagerBuilder but pass it unencrypted to UsernamePasswordAuthenticationToken.\r\n\r\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception { \r\n        auth.inMemoryAuthentication()\r\n            .withUser(PRINCIPAL).password(passwordEncoder().encode(CREDENTIAL))\r\n            .roles(roles());\r\n    }\r\n    \r\n    public void setAthenticated(HttpSession session, User user) {\r\n        Authentication authRequest = new UsernamePasswordAuthenticationToken\r\n    \t    \t\t\t\t(PRINCIPAL, CREDENTIAL, user.getAuthorities());\r\n    \tAuthentication authentication = authenticationManager\r\n                                          .authenticate(authRequest);\r\n    \t        \r\n    \tSecurityContext securityContext = SecurityContextHolder.getContext();\r\n    \tsecurityContext.setAuthentication(authentication);\r\n    \tsession.setAttribute(&quot;SPRING_SECURITY_CONTEXT&quot;, securityContext);\r\n    }","title":"How to configure SpringBoot authentication for RestController","body":"<p>Here is the way it works: use the encrypted password for AuthenticationManagerBuilder but pass it unencrypted to UsernamePasswordAuthenticationToken.</p>\n<pre><code>public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception { \n    auth.inMemoryAuthentication()\n        .withUser(PRINCIPAL).password(passwordEncoder().encode(CREDENTIAL))\n        .roles(roles());\n}\n\npublic void setAthenticated(HttpSession session, User user) {\n    Authentication authRequest = new UsernamePasswordAuthenticationToken\n                        (PRINCIPAL, CREDENTIAL, user.getAuthorities());\n    Authentication authentication = authenticationManager\n                                      .authenticate(authRequest);\n            \n    SecurityContext securityContext = SecurityContextHolder.getContext();\n    securityContext.setAuthentication(authentication);\n    session.setAttribute(&quot;SPRING_SECURITY_CONTEXT&quot;, securityContext);\n}\n</code></pre>\n"}],"owner":{"account_id":6300997,"reputation":11,"user_id":4895669,"display_name":"Mircea Lutic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1014,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635766747,"creation_date":1634925460,"question_id":69681254,"body_markdown":"I have a controller for users that contains\r\n\r\n    @PostMapping(&quot;/user/register&quot;)\r\n    public String register\t( @RequestParam String name\r\n    \t\t\t\t\t\t, @RequestParam String password\r\n    \t\t\t\t\t\t, @RequestParam String email\r\n    \t\t\t\t\t\t, HttpServletRequest request)\r\n\r\n    @GetMapping(&quot;/user/confirm/{token}&quot;)\r\n    public Optional&lt;User&gt; confirm(@PathVariable(value = &quot;token&quot;) String token)\r\nand\r\n\r\n        @PostMapping(&quot;/user/login&quot;)\r\n    public ResponseEntity&lt;String&gt; login \r\n    \t\t\t\t\t\t\t( @RequestParam String email\r\n    \t\t\t\t\t\t\t, @RequestParam String password\r\n    \t\t\t\t\t\t\t, HttpServletRequest request\r\n    \t\t\t\t\t\t\t){\r\n    \t//System.out.println(&quot;post:/user/login email=&quot;+email);\r\n    \tUser user = userService.login(email, password);\r\n    \tif (user==null)\r\n    \t\treturn ResponseEntity.notFound().build();\r\n    \t\r\n    \tHttpSession session = request.getSession(true); // createSession=true\r\n    \tsession.setAttribute(SESSION_USER, user);\r\n    \t\r\n    \t**cfgSecurity.setAthenticated(session, user);**\r\n        \r\n   \t\treturn ResponseEntity.ok(&quot;OK&quot;);\r\n    }\r\nUsers have a role that is an enum.\r\nThe question is how to configure security.\r\nHere is my configuration class:\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class CfgSecurity extends WebSecurityConfigurerAdapter{\r\n    \r\n    \tprivate static final String PRINCIPAL  = &quot;admin&quot;;\r\n    \tprivate static final String CREDENTIAL = &quot;password&quot;;\r\n    \t@Autowired AuthenticationManager authenticationManager;\r\n    \t\r\n        @Autowired\r\n        public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception { // authentication\r\n            auth\r\n              .inMemoryAuthentication()\r\n              .withUser(PRINCIPAL).password(passwordEncoder().encode(CREDENTIAL))\r\n              .roles(roles());\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception { // resource security\r\n            http.cors().and().csrf().disable()\r\n              \t.httpBasic()\r\n              \t/*\r\n              \t.and().authorizeRequests()\r\n              \t\t.antMatchers(&quot;/user/register&quot;).permitAll()//.hasRole(&quot;ADMIN&quot;)\r\n              \t\t.antMatchers(&quot;/user/confirm/**&quot;).permitAll()\r\n                  \t.anyRequest().permitAll()\r\n                  \t\r\n              \t//.and().formLogin().loginPage(&quot;/user/login&quot;).permitAll()\r\n              \t */\r\n              ;\r\n        }\r\n        @Bean\r\n        @Override\r\n        public AuthenticationManager authenticationManagerBean() throws Exception\r\n        {\r\n        \t//https://www.programcreek.com/java-api-examples/docs/?api=org.springframework.security.authentication.AuthenticationManager\r\n            return super.authenticationManagerBean();\r\n        }\r\n        \r\n        @Bean\r\n        public PasswordEncoder passwordEncoder() {\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n        \r\n    \r\n        @Bean\r\n        CorsConfigurationSource corsConfigurationSource() {\r\n            CorsConfiguration configuration = new CorsConfiguration();\r\n            configuration.setAllowedOrigins(Arrays.asList(&quot;*&quot;));\r\n            configuration.setAllowedMethods(Arrays.asList(&quot;*&quot;));\r\n            configuration.setAllowedHeaders(Arrays.asList(&quot;*&quot;));\r\n            configuration.setAllowCredentials(true);\r\n            UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n            source.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n            return source;\r\n        }\r\n        private static String[] roles() {\r\n            String[] array = new String[Role.values().length];\r\n            for (Role role : Role.values()) {\r\n            \tarray[role.ordinal()] = role.name();\r\n            }\r\n            return array;\r\n        }\r\n    \r\n    \tpublic void setAthenticated(HttpSession session, User user) {\r\n        \t//https://stackoverflow.com/questions/4664893/how-to-manually-set-an-authenticated-user-in-spring-security-springmvc\r\n    \t\ttry {\r\n    \t    \tAuthentication authRequest = new UsernamePasswordAuthenticationToken\r\n    \t    \t\t\t\t(PRINCIPAL, passwordEncoder().encode(CREDENTIAL)\r\n    \t    \t\t\t\t, user.getAuthorities()\r\n    \t    \t\t\t\t);\r\n    \t        Authentication authentication = authenticationManager.authenticate(authRequest);\r\n    \t        \r\n    \t        SecurityContext securityContext = SecurityContextHolder.getContext();\r\n    \t        securityContext.setAuthentication(authentication);\r\n    \t        session.setAttribute(&quot;SPRING_SECURITY_CONTEXT&quot;, securityContext);\r\n    \t\t}\r\n    \t\tcatch(Exception ex) {\r\n    \t\t\tSystem.err.println(ex.toString());\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nIt does not work : I get \r\norg.springframework.security.authentication.BadCredentialsException: Bad credentials.\r\n\r\nHere is User.getAuthorities (referenced in setAuthenticated) :\r\n\r\n@Override\r\npublic Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n\r\n\tfinal SimpleGrantedAuthority simpleGrantedAuthority = \r\n\t\t\tnew SimpleGrantedAuthority(role.toString());\r\n\treturn Collections.singletonList(simpleGrantedAuthority);\r\n}\r\n","title":"How to configure SpringBoot authentication for RestController","body":"<p>I have a controller for users that contains</p>\n<pre><code>@PostMapping(&quot;/user/register&quot;)\npublic String register  ( @RequestParam String name\n                        , @RequestParam String password\n                        , @RequestParam String email\n                        , HttpServletRequest request)\n\n@GetMapping(&quot;/user/confirm/{token}&quot;)\npublic Optional&lt;User&gt; confirm(@PathVariable(value = &quot;token&quot;) String token)\n</code></pre>\n<p>and</p>\n<pre><code>    @PostMapping(&quot;/user/login&quot;)\npublic ResponseEntity&lt;String&gt; login \n                            ( @RequestParam String email\n                            , @RequestParam String password\n                            , HttpServletRequest request\n                            ){\n    //System.out.println(&quot;post:/user/login email=&quot;+email);\n    User user = userService.login(email, password);\n    if (user==null)\n        return ResponseEntity.notFound().build();\n    \n    HttpSession session = request.getSession(true); // createSession=true\n    session.setAttribute(SESSION_USER, user);\n    \n    **cfgSecurity.setAthenticated(session, user);**\n    \n    return ResponseEntity.ok(&quot;OK&quot;);\n}\n</code></pre>\n<p>Users have a role that is an enum.\nThe question is how to configure security.\nHere is my configuration class:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class CfgSecurity extends WebSecurityConfigurerAdapter{\n\n    private static final String PRINCIPAL  = &quot;admin&quot;;\n    private static final String CREDENTIAL = &quot;password&quot;;\n    @Autowired AuthenticationManager authenticationManager;\n    \n    @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception { // authentication\n        auth\n          .inMemoryAuthentication()\n          .withUser(PRINCIPAL).password(passwordEncoder().encode(CREDENTIAL))\n          .roles(roles());\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception { // resource security\n        http.cors().and().csrf().disable()\n            .httpBasic()\n            /*\n            .and().authorizeRequests()\n                .antMatchers(&quot;/user/register&quot;).permitAll()//.hasRole(&quot;ADMIN&quot;)\n                .antMatchers(&quot;/user/confirm/**&quot;).permitAll()\n                .anyRequest().permitAll()\n                \n            //.and().formLogin().loginPage(&quot;/user/login&quot;).permitAll()\n             */\n          ;\n    }\n    @Bean\n    @Override\n    public AuthenticationManager authenticationManagerBean() throws Exception\n    {\n        //https://www.programcreek.com/java-api-examples/docs/?api=org.springframework.security.authentication.AuthenticationManager\n        return super.authenticationManagerBean();\n    }\n    \n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n    \n\n    @Bean\n    CorsConfigurationSource corsConfigurationSource() {\n        CorsConfiguration configuration = new CorsConfiguration();\n        configuration.setAllowedOrigins(Arrays.asList(&quot;*&quot;));\n        configuration.setAllowedMethods(Arrays.asList(&quot;*&quot;));\n        configuration.setAllowedHeaders(Arrays.asList(&quot;*&quot;));\n        configuration.setAllowCredentials(true);\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n        return source;\n    }\n    private static String[] roles() {\n        String[] array = new String[Role.values().length];\n        for (Role role : Role.values()) {\n            array[role.ordinal()] = role.name();\n        }\n        return array;\n    }\n\n    public void setAthenticated(HttpSession session, User user) {\n        //https://stackoverflow.com/questions/4664893/how-to-manually-set-an-authenticated-user-in-spring-security-springmvc\n        try {\n            Authentication authRequest = new UsernamePasswordAuthenticationToken\n                        (PRINCIPAL, passwordEncoder().encode(CREDENTIAL)\n                        , user.getAuthorities()\n                        );\n            Authentication authentication = authenticationManager.authenticate(authRequest);\n            \n            SecurityContext securityContext = SecurityContextHolder.getContext();\n            securityContext.setAuthentication(authentication);\n            session.setAttribute(&quot;SPRING_SECURITY_CONTEXT&quot;, securityContext);\n        }\n        catch(Exception ex) {\n            System.err.println(ex.toString());\n        }\n    }\n}\n</code></pre>\n<p>It does not work : I get\norg.springframework.security.authentication.BadCredentialsException: Bad credentials.</p>\n<p>Here is User.getAuthorities (referenced in setAuthenticated) :</p>\n<p>@Override\npublic Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {</p>\n<pre><code>final SimpleGrantedAuthority simpleGrantedAuthority = \n        new SimpleGrantedAuthority(role.toString());\nreturn Collections.singletonList(simpleGrantedAuthority);\n</code></pre>\n<p>}</p>\n"},{"tags":["java","xsd","jaxb","jaxb2","xjc"],"answers":[{"tags":[],"owner":{"account_id":40221,"reputation":32100,"user_id":116509,"accept_rate":100,"display_name":"artbristol"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1635766607,"creation_date":1332326576,"answer_id":9802937,"question_id":9802856,"body_markdown":"You could try the [CXF XJC default plugin][1] or the [JAXB2 commons Default Value plugin][2].\r\n\r\n\r\n  [1]: https://cxf.apache.org/cxf-xjc-dv.html\r\n  [2]: https://github.com/javaee/jaxb2-commons/tree/master/default-value-plugin","title":"JAXB default values from xsd when generating beans with xjc","body":"<p>You could try the <a href=\"https://cxf.apache.org/cxf-xjc-dv.html\" rel=\"nofollow noreferrer\">CXF XJC default plugin</a> or the <a href=\"https://github.com/javaee/jaxb2-commons/tree/master/default-value-plugin\" rel=\"nofollow noreferrer\">JAXB2 commons Default Value plugin</a>.</p>\n"}],"owner":{"account_id":323621,"reputation":10723,"user_id":643742,"accept_rate":97,"display_name":"Franz Kafka"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1916,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":9802937,"answer_count":1,"score":2,"last_activity_date":1635766607,"creation_date":1332326252,"question_id":9802856,"body_markdown":"When generating java beans from xsd files I would like to have the default values defined in the xsd file pre-set in the java beans as well. The unmarshalling process does not care about xsd defaults, therefore I need them set at source generation time.\r\n\r\nCan this be done? I&#39;m using Maven with the xjcplugin.","title":"JAXB default values from xsd when generating beans with xjc","body":"<p>When generating java beans from xsd files I would like to have the default values defined in the xsd file pre-set in the java beans as well. The unmarshalling process does not care about xsd defaults, therefore I need them set at source generation time.</p>\n\n<p>Can this be done? I'm using Maven with the xjcplugin.</p>\n"},{"tags":["java","spring","hibernate","spring-boot","javafx"],"comments":[{"owner":{"account_id":3745399,"reputation":1554,"user_id":3114157,"accept_rate":41,"display_name":"mkuligowski"},"score":0,"creation_date":1524943730,"post_id":50079841,"comment_id":87176541,"body_markdown":"Do you have mysql dependency in your pom.xml / build,gradle file?","body":"Do you have mysql dependency in your pom.xml / build,gradle file?"}],"answers":[{"tags":[],"owner":{"account_id":117556,"reputation":3752,"user_id":307795,"accept_rate":43,"display_name":"DaShaun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524943733,"creation_date":1524943733,"answer_id":50080306,"question_id":50079841,"body_markdown":"This is what I would do if we were sitting next to each other, comment out a couple lines:\r\n\r\n    # Datasource connection properties\r\n    spring.datasource.url=jdbc:mysql://localhost/posnubeclick\r\n    spring.datasource.username=nubeclick\r\n    spring.datasource.password=nubeclick\r\n    #spring.datasource.driver-class-name=com.mysql.jdbc.Driver\r\n    \r\n    # JPA Properties\r\n    #spring.jpa.database=posnubeclick\r\n\r\nAlso is your .properties file called application.properties OR bootstrap.properties?","title":"Failed to auto-configure a DataSource: &#39;spring.datasource.url&#39;","body":"<p>This is what I would do if we were sitting next to each other, comment out a couple lines:</p>\n\n<pre><code># Datasource connection properties\nspring.datasource.url=jdbc:mysql://localhost/posnubeclick\nspring.datasource.username=nubeclick\nspring.datasource.password=nubeclick\n#spring.datasource.driver-class-name=com.mysql.jdbc.Driver\n\n# JPA Properties\n#spring.jpa.database=posnubeclick\n</code></pre>\n\n<p>Also is your .properties file called application.properties OR bootstrap.properties?</p>\n"},{"tags":[],"owner":{"account_id":3745399,"reputation":1554,"user_id":3114157,"accept_rate":41,"display_name":"mkuligowski"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1524943978,"creation_date":1524943978,"answer_id":50080338,"question_id":50079841,"body_markdown":"Make sure that you have mysql dependency in your pom.xml or build.gradle file:\r\n\r\n    compile &#39;mysql:mysql-connector-java&#39;\r\n\r\nor\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThen you can comment out your `driver-class-name` property, because spring boot will autoconfigure it for you.\r\n\r\nOne more thing: It seems that you should connect to concrete port to mysql (by default it is 3306), so make sure that it looks similar to this:\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/posnubeclick\r\n\r\n","title":"Failed to auto-configure a DataSource: &#39;spring.datasource.url&#39;","body":"<p>Make sure that you have mysql dependency in your pom.xml or build.gradle file:</p>\n\n<pre><code>compile 'mysql:mysql-connector-java'\n</code></pre>\n\n<p>or</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;mysql&lt;/groupId&gt;\n    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Then you can comment out your <code>driver-class-name</code> property, because spring boot will autoconfigure it for you.</p>\n\n<p>One more thing: It seems that you should connect to concrete port to mysql (by default it is 3306), so make sure that it looks similar to this:</p>\n\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/posnubeclick\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13446701,"reputation":226,"user_id":9702449,"display_name":"Riccardo Righi"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1525032398,"creation_date":1525032398,"answer_id":50090789,"question_id":50079841,"body_markdown":"Maybe Spring Boot is not locating your `application.properties` file at all. Ensure you have this file in the root of the *resources* folder (in a typical Maven project configuration, it should by located in the `src/main/resources` folder root). \r\n\r\nI suggest you to enable the DEBUG logging level to check if Spring Boot is reading the correct `application.properties` file.","title":"Failed to auto-configure a DataSource: &#39;spring.datasource.url&#39;","body":"<p>Maybe Spring Boot is not locating your <code>application.properties</code> file at all. Ensure you have this file in the root of the <em>resources</em> folder (in a typical Maven project configuration, it should by located in the <code>src/main/resources</code> folder root). </p>\n\n<p>I suggest you to enable the DEBUG logging level to check if Spring Boot is reading the correct <code>application.properties</code> file.</p>\n"},{"tags":[],"owner":{"account_id":8910470,"reputation":395,"user_id":6651491,"accept_rate":80,"display_name":"AjFmO"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1525557305,"creation_date":1525557305,"answer_id":50194349,"question_id":50079841,"body_markdown":"I decided to upload the project to another repository, did a whole clean to the project folder (deleted .project, .settings, .classpath, bin, target) and reimported project into eclipse, did configure -&gt; add maven nature, and now the error is gone, at least this error, got some other errors but now it loads everything from the properties file, so, Why did this happened?","title":"Failed to auto-configure a DataSource: &#39;spring.datasource.url&#39;","body":"<p>I decided to upload the project to another repository, did a whole clean to the project folder (deleted .project, .settings, .classpath, bin, target) and reimported project into eclipse, did configure -> add maven nature, and now the error is gone, at least this error, got some other errors but now it loads everything from the properties file, so, Why did this happened?</p>\n"}],"owner":{"account_id":8910470,"reputation":395,"user_id":6651491,"accept_rate":80,"display_name":"AjFmO"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65823,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":50194349,"answer_count":4,"score":20,"last_activity_date":1635766356,"creation_date":1524940442,"question_id":50079841,"body_markdown":"My project is using MySQL, JavaFX, Spring Boot, Spring Data JP and Hibernate frameworks/technologies.\r\n\r\nThis is my POM file.\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;groupId&gt;com.nubeclick&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;pos&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;POSNubeClick&lt;/name&gt;\r\n\t&lt;description&gt;Sistema de punto de venta (Point Of Sale).&lt;/description&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.0.1.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t\t&lt;slf4j.version&gt;1.7.12&lt;/slf4j.version&gt;\r\n\t\t&lt;log4j.version&gt;1.2.17&lt;/log4j.version&gt;\r\n\t\t&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n\t\t&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.miglayout&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;miglayout-javafx&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;commons-lang&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-lang&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.6&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- &lt;dependency&gt; --&gt;\r\n\t\t&lt;!-- &lt;groupId&gt;org.slf4j&lt;/groupId&gt; --&gt;\r\n\t\t&lt;!-- &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt; --&gt;\r\n\t\t&lt;!-- &lt;version&gt;${slf4j.version}&lt;/version&gt; --&gt;\r\n\t\t&lt;!-- &lt;/dependency&gt; --&gt;\r\n\t\t&lt;!-- &lt;dependency&gt; --&gt;\r\n\t\t&lt;!-- &lt;groupId&gt;org.slf4j&lt;/groupId&gt; --&gt;\r\n\t\t&lt;!-- &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt; --&gt;\r\n\t\t&lt;!-- &lt;version&gt;${slf4j.version}&lt;/version&gt; --&gt;\r\n\t\t&lt;!-- &lt;/dependency&gt; --&gt;\r\n\t\t&lt;!-- &lt;dependency&gt; --&gt;\r\n\t\t&lt;!-- &lt;groupId&gt;org.slf4j&lt;/groupId&gt; --&gt;\r\n\t\t&lt;!-- &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt; --&gt;\r\n\t\t&lt;!-- &lt;version&gt;${slf4j.version}&lt;/version&gt; --&gt;\r\n\t\t&lt;!-- &lt;/dependency&gt; --&gt;\r\n\t\t&lt;!-- &lt;dependency&gt; --&gt;\r\n\t\t&lt;!-- &lt;groupId&gt;log4j&lt;/groupId&gt; --&gt;\r\n\t\t&lt;!-- &lt;artifactId&gt;log4j&lt;/artifactId&gt; --&gt;\r\n\t\t&lt;!-- &lt;version&gt;${log4j.version}&lt;/version&gt; --&gt;\r\n\t\t&lt;!-- &lt;/dependency&gt; --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.jfoenix&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jfoenix&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.10.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;de.jensd&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;fontawesomefx&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;8.9&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.controlsfx&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;controlsfx&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;8.40.13&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n&lt;/project&gt;\r\n\r\n\r\nThis is my .properties configuration.\r\n\r\n    spring.main.banner-mode=off\r\n    \r\n    # Datasource connection properties\r\n    spring.datasource.url=jdbc:mysql://localhost/posnubeclick\r\n    spring.datasource.username=nubeclick\r\n    spring.datasource.password=nubeclick\r\n    spring.datasource.driver-class-name=com.mysql.jdbc.Driver\r\n\r\n    # JPA Properties\r\n    spring.jpa.database=posnubeclick\r\n\r\n    # Hibernate Configuration Properties\r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5Dialect\r\n    spring.jpa.properties.hibernate.current_session_context_class=thread\r\n    spring.jpa.properties.hibernate.jpa.show-sql=true\r\n    spring.jpa.properties.hibernate.format_sql=true\r\n\r\n    # Naming strategy\r\n    spring.jpa.hibernate.naming-strategy =org.hibernate.cfg.ImprovedNamingStrategy\r\n    \r\n    #Turn Statistics on\r\n    spring.jpa.properties.hibernate.generate_statistics=true\r\n    \r\n    # logging\r\n    logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} %-5level %logger{36} - %msg%n\r\n    logging.level.org.hibernate.stat=debug\r\n    logging.level.org.hibernate.type=trace\r\n    logging.level.org.hibernate.SQL=debug\r\n    #logging.level.org.hibernate.type.descriptor.sql=trace\r\n    logging.level.=error\r\n\r\nThis is my main class\r\n\r\n    @SpringBootApplication(scanBasePackages = { &quot;com.nubeclick.pos&quot; })\r\n    public class MainApp extends Application {\r\n    \r\n    private static final Logger log = LoggerFactory.getLogger(MainApp.class);\r\n\r\n    public static void main(String[] args) throws Exception {\r\n\r\n        SpringApplication.run(MainApp.class, args);\r\n\t\t// launch(args);\r\n    }\r\n\r\n    @Override\r\n    public void start(Stage stage) throws Exception {\r\n        try {\r\n            log.info(&quot;Starting Hello JavaFX and Maven demonstration application&quot;);\r\n\r\n            String fxmlFile = &quot;/fxml/Main.fxml&quot;;\r\n            log.debug(&quot;Loading FXML for main view from: {}&quot;, fxmlFile);\r\n            FXMLLoader loader = new FXMLLoader();\r\n        Parent rootNode = (Parent) loader.load(getClass().getResourceAsStream(fxmlFile));\r\n\r\n            log.debug(&quot;Showing JFX scene&quot;);\r\n            Scene scene = new Scene(rootNode);\r\n            scene.getStylesheets().add(&quot;/styles/styles.css&quot;);\r\n            stage.setTitle(&quot;NubeClick - Point of Sales&quot;);\r\n            stage.setScene(scene);\r\n            stage.show();\r\n        } catch (Exception e) {\r\n        // TODO Auto-generated catch block\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\nThis is the stacktrace: \r\n\r\n&gt; Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration&#39;: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method &#39;dataSource&#39; threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\r\n\r\nThe Spring message is this: \r\n\r\n&gt; Description:\r\n&gt;Failed to auto-configure a DataSource: &#39;spring.datasource.url&#39; is not specified and no embedded datasource could be auto-configured.\r\n&gt;Reason: Failed to determine a suitable driver class\r\n&gt;Action:\r\n&gt;Consider the following:\r\n&gt;   If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.\r\n&gt;\tIf you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).\r\n\r\nI have referred to this [other post][1] and this [other one][2]\r\n\r\nI don&#39;t know what else to do, maybe start all over again from zero but I want to adapt those frameworks to my current project.\r\n\r\nWhat can I do to solve this?\r\n\r\n\r\nCrazy thing, I decided to upload the project to another repository, did a whole clean to the project folder (deleted .project, .settings, .classpath, bin, target) and reimported project into eclipse, did configure -&gt; add maven nature, and now the error is gone, at least this error, got some other errors but now it loads everything from the properties file, so, why did this happen?\r\n\r\nLinks to docs would be appreciated, so I can understand what I have to do.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/49475177/failed-to-auto-configure-a-datasource-spring-datasource-url-is-not-specified\r\n  [2]: https://stackoverflow.com/questions/49136725/just-running-project-from-start-spring-with-error","title":"Failed to auto-configure a DataSource: &#39;spring.datasource.url&#39;","body":"<p>My project is using MySQL, JavaFX, Spring Boot, Spring Data JP and Hibernate frameworks/technologies.</p>\n<p>This is my POM file.</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\nxsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;groupId&gt;com.nubeclick&lt;/groupId&gt;\n&lt;artifactId&gt;pos&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;name&gt;POSNubeClick&lt;/name&gt;\n&lt;description&gt;Sistema de punto de venta (Point Of Sale).&lt;/description&gt;\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.0.1.RELEASE&lt;/version&gt;\n    &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;slf4j.version&gt;1.7.12&lt;/slf4j.version&gt;\n    &lt;log4j.version&gt;1.2.17&lt;/log4j.version&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n&lt;/properties&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.miglayout&lt;/groupId&gt;\n        &lt;artifactId&gt;miglayout-javafx&lt;/artifactId&gt;\n        &lt;version&gt;5.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-lang&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;\n        &lt;version&gt;2.6&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- &lt;dependency&gt; --&gt;\n    &lt;!-- &lt;groupId&gt;org.slf4j&lt;/groupId&gt; --&gt;\n    &lt;!-- &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt; --&gt;\n    &lt;!-- &lt;version&gt;${slf4j.version}&lt;/version&gt; --&gt;\n    &lt;!-- &lt;/dependency&gt; --&gt;\n    &lt;!-- &lt;dependency&gt; --&gt;\n    &lt;!-- &lt;groupId&gt;org.slf4j&lt;/groupId&gt; --&gt;\n    &lt;!-- &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt; --&gt;\n    &lt;!-- &lt;version&gt;${slf4j.version}&lt;/version&gt; --&gt;\n    &lt;!-- &lt;/dependency&gt; --&gt;\n    &lt;!-- &lt;dependency&gt; --&gt;\n    &lt;!-- &lt;groupId&gt;org.slf4j&lt;/groupId&gt; --&gt;\n    &lt;!-- &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt; --&gt;\n    &lt;!-- &lt;version&gt;${slf4j.version}&lt;/version&gt; --&gt;\n    &lt;!-- &lt;/dependency&gt; --&gt;\n    &lt;!-- &lt;dependency&gt; --&gt;\n    &lt;!-- &lt;groupId&gt;log4j&lt;/groupId&gt; --&gt;\n    &lt;!-- &lt;artifactId&gt;log4j&lt;/artifactId&gt; --&gt;\n    &lt;!-- &lt;version&gt;${log4j.version}&lt;/version&gt; --&gt;\n    &lt;!-- &lt;/dependency&gt; --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.jfoenix&lt;/groupId&gt;\n        &lt;artifactId&gt;jfoenix&lt;/artifactId&gt;\n        &lt;version&gt;1.10.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;de.jensd&lt;/groupId&gt;\n        &lt;artifactId&gt;fontawesomefx&lt;/artifactId&gt;\n        &lt;version&gt;8.9&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.controlsfx&lt;/groupId&gt;\n        &lt;artifactId&gt;controlsfx&lt;/artifactId&gt;\n        &lt;version&gt;8.40.13&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>This is my .properties configuration.</p>\n<pre><code>spring.main.banner-mode=off\n\n# Datasource connection properties\nspring.datasource.url=jdbc:mysql://localhost/posnubeclick\nspring.datasource.username=nubeclick\nspring.datasource.password=nubeclick\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver\n\n# JPA Properties\nspring.jpa.database=posnubeclick\n\n# Hibernate Configuration Properties\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5Dialect\nspring.jpa.properties.hibernate.current_session_context_class=thread\nspring.jpa.properties.hibernate.jpa.show-sql=true\nspring.jpa.properties.hibernate.format_sql=true\n\n# Naming strategy\nspring.jpa.hibernate.naming-strategy =org.hibernate.cfg.ImprovedNamingStrategy\n\n#Turn Statistics on\nspring.jpa.properties.hibernate.generate_statistics=true\n\n# logging\nlogging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} %-5level %logger{36} - %msg%n\nlogging.level.org.hibernate.stat=debug\nlogging.level.org.hibernate.type=trace\nlogging.level.org.hibernate.SQL=debug\n#logging.level.org.hibernate.type.descriptor.sql=trace\nlogging.level.=error\n</code></pre>\n<p>This is my main class</p>\n<pre><code>@SpringBootApplication(scanBasePackages = { &quot;com.nubeclick.pos&quot; })\npublic class MainApp extends Application {\n\nprivate static final Logger log = LoggerFactory.getLogger(MainApp.class);\n\npublic static void main(String[] args) throws Exception {\n\n    SpringApplication.run(MainApp.class, args);\n    // launch(args);\n}\n\n@Override\npublic void start(Stage stage) throws Exception {\n    try {\n        log.info(&quot;Starting Hello JavaFX and Maven demonstration application&quot;);\n\n        String fxmlFile = &quot;/fxml/Main.fxml&quot;;\n        log.debug(&quot;Loading FXML for main view from: {}&quot;, fxmlFile);\n        FXMLLoader loader = new FXMLLoader();\n    Parent rootNode = (Parent) loader.load(getClass().getResourceAsStream(fxmlFile));\n\n        log.debug(&quot;Showing JFX scene&quot;);\n        Scene scene = new Scene(rootNode);\n        scene.getStylesheets().add(&quot;/styles/styles.css&quot;);\n        stage.setTitle(&quot;NubeClick - Point of Sales&quot;);\n        stage.setScene(scene);\n        stage.show();\n    } catch (Exception e) {\n    // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>This is the stacktrace:</p>\n<blockquote>\n<p>Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration': Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class</p>\n</blockquote>\n<p>The Spring message is this:</p>\n<blockquote>\n<p>Description:\nFailed to auto-configure a DataSource: 'spring.datasource.url' is not specified and no embedded datasource could be auto-configured.\nReason: Failed to determine a suitable driver class\nAction:\nConsider the following:\nIf you want an embedded database (H2, HSQL or Derby), please put it on the classpath.\nIf you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).</p>\n</blockquote>\n<p>I have referred to this <a href=\"https://stackoverflow.com/questions/49475177/failed-to-auto-configure-a-datasource-spring-datasource-url-is-not-specified\">other post</a> and this <a href=\"https://stackoverflow.com/questions/49136725/just-running-project-from-start-spring-with-error\">other one</a></p>\n<p>I don't know what else to do, maybe start all over again from zero but I want to adapt those frameworks to my current project.</p>\n<p>What can I do to solve this?</p>\n<p>Crazy thing, I decided to upload the project to another repository, did a whole clean to the project folder (deleted .project, .settings, .classpath, bin, target) and reimported project into eclipse, did configure -&gt; add maven nature, and now the error is gone, at least this error, got some other errors but now it loads everything from the properties file, so, why did this happen?</p>\n<p>Links to docs would be appreciated, so I can understand what I have to do.</p>\n"},{"tags":["java","maven","build","compilation","upgrade"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1628021044,"post_id":68641972,"comment_id":121309822,"body_markdown":"Please check what `mvn --version` shows? There should be an output information about JDK16 if it&#39;s not what I expect.. you have to change your JAVA_HOME environment variable to point to JDK16 to build with JDK 16....","body":"Please check what <code>mvn --version</code> shows? There should be an output information about JDK16 if it&#39;s not what I expect.. you have to change your JAVA_HOME environment variable to point to JDK16 to build with JDK 16...."},{"owner":{"account_id":19984783,"reputation":124,"user_id":14647130,"display_name":"David"},"score":0,"creation_date":1628021407,"post_id":68641972,"comment_id":121309938,"body_markdown":"How to run this command from Eclipse? Also I already put my JAVA_HOME to jdk 16... didn&#39;t work","body":"How to run this command from Eclipse? Also I already put my JAVA_HOME to jdk 16... didn&#39;t work"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1628025385,"post_id":68641972,"comment_id":121311144,"body_markdown":"Plain command line not from within Eclipse...does not really makes sense...","body":"Plain command line not from within Eclipse...does not really makes sense..."},{"owner":{"account_id":19984783,"reputation":124,"user_id":14647130,"display_name":"David"},"score":0,"creation_date":1628025446,"post_id":68641972,"comment_id":121311162,"body_markdown":"cmd doesn&#39;t recognize &quot;mvn&quot;...","body":"cmd doesn&#39;t recognize &quot;mvn&quot;..."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1628061823,"post_id":68641972,"comment_id":121317972,"body_markdown":"You have to install Maven of course to run it.... https://maven.apache.org/download.cgi and install it: https://maven.apache.org/install.html","body":"You have to install Maven of course to run it.... <a href=\"https://maven.apache.org/download.cgi\" rel=\"nofollow noreferrer\">maven.apache.org/download.cgi</a> and install it: <a href=\"https://maven.apache.org/install.html\" rel=\"nofollow noreferrer\">maven.apache.org/install.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":1937747,"reputation":14200,"user_id":1744774,"accept_rate":100,"display_name":"Gerold Broser"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1628020241,"creation_date":1628020241,"answer_id":68642036,"question_id":68641972,"body_markdown":"1. It&#39;s not `1.16`, it&#39;s `16`.\r\n2. You don&#39;t have to configure the `maven-compiler-plugin`.\r\n3. You can use [the new `release` option][release].\r\n\r\n[release]: https://www.baeldung.com/maven-java-version\r\n\r\n````lang-xml\r\n  &lt;properties&gt;\r\n    &lt;maven.compiler.release&gt;16&lt;/maven.compiler.release&gt;\r\n  &lt;/properties&gt;\r\n````\r\n","title":"Changing a 1.8 Maven Project to compile to 1.16 produces &quot;invalid target release 1.16&quot;","body":"<ol>\n<li>It's not <code>1.16</code>, it's <code>16</code>.</li>\n<li>You don't have to configure the <code>maven-compiler-plugin</code>.</li>\n<li>You can use <a href=\"https://www.baeldung.com/maven-java-version\" rel=\"nofollow noreferrer\">the new <code>release</code> option</a>.</li>\n</ol>\n<pre class=\"lang-xml prettyprint-override\"><code>  &lt;properties&gt;\n    &lt;maven.compiler.release&gt;16&lt;/maven.compiler.release&gt;\n  &lt;/properties&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635765704,"creation_date":1635765704,"answer_id":69796217,"question_id":68641972,"body_markdown":"I ran into a similar issue despite the fact that my settings were\r\n\r\n    &lt;source&gt;16&lt;/source&gt; //used to be 8\r\n    &lt;target&gt;16&lt;/target&gt; //used to be 8\r\n\r\nThe real insight came up when I ran\r\n\r\n    mvn --version\r\n\r\nas this one pointed out I was running a current maven with JDK 11.\r\n\r\nThe solution was to change JAVA_HOME to point to my JDK 16 installation before running maven.","title":"Changing a 1.8 Maven Project to compile to 1.16 produces &quot;invalid target release 1.16&quot;","body":"<p>I ran into a similar issue despite the fact that my settings were</p>\n<pre><code>&lt;source&gt;16&lt;/source&gt; //used to be 8\n&lt;target&gt;16&lt;/target&gt; //used to be 8\n</code></pre>\n<p>The real insight came up when I ran</p>\n<pre><code>mvn --version\n</code></pre>\n<p>as this one pointed out I was running a current maven with JDK 11.</p>\n<p>The solution was to change JAVA_HOME to point to my JDK 16 installation before running maven.</p>\n"}],"owner":{"account_id":19984783,"reputation":124,"user_id":14647130,"display_name":"David"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1116,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1635765704,"creation_date":1628019872,"question_id":68641972,"body_markdown":"I&#39;ve been searching a solution for hours, couldn&#39;t even find 1 post about maven compilation to 1.16\r\n\r\nI recently decided to one of my projects from java 8 to 16, so I installed 16 JDK and changed my build section(in pom.xml) accordingly:\r\n```\r\n&lt;build&gt;\r\n\t&lt;plugins&gt;\r\n\t\t&lt;plugin&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.8.1&lt;/version&gt;\r\n\t\t\t&lt;configuration&gt;\r\n\t\t\t\t&lt;source&gt;1.16&lt;/source&gt; //used to be 1.8\r\n\t\t\t\t&lt;target&gt;1.16&lt;/target&gt; //used to be 1.8\r\n\t\t\t\t&lt;compilerArgs&gt;\r\n\t\t\t\t\t&lt;arg&gt;-parameters&lt;/arg&gt;\r\n\t\t\t\t&lt;/compilerArgs&gt;\r\n\t\t\t&lt;/configuration&gt;\r\n\t\t&lt;/plugin&gt;\r\n\t&lt;/plugins&gt;\r\n&lt;/build&gt;\r\n```\r\n\r\nBut I get the following error when I try to install:\r\n```\r\n[INFO] Total time:  0.628 s\r\n[INFO] Finished at: 2021-08-03T22:40:27+03:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project employeme: Fatal error compiling: error: invalid target release: 1.16 -&gt; [Help 1]\r\n[ERROR] \r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR] \r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n```","title":"Changing a 1.8 Maven Project to compile to 1.16 produces &quot;invalid target release 1.16&quot;","body":"<p>I've been searching a solution for hours, couldn't even find 1 post about maven compilation to 1.16</p>\n<p>I recently decided to one of my projects from java 8 to 16, so I installed 16 JDK and changed my build section(in pom.xml) accordingly:</p>\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.8.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.16&lt;/source&gt; //used to be 1.8\n                &lt;target&gt;1.16&lt;/target&gt; //used to be 1.8\n                &lt;compilerArgs&gt;\n                    &lt;arg&gt;-parameters&lt;/arg&gt;\n                &lt;/compilerArgs&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p>But I get the following error when I try to install:</p>\n<pre><code>[INFO] Total time:  0.628 s\n[INFO] Finished at: 2021-08-03T22:40:27+03:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project employeme: Fatal error compiling: error: invalid target release: 1.16 -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\n</code></pre>\n"},{"tags":["java","android","material-design","material-components-android"],"owner":{"account_id":15663305,"reputation":11,"user_id":17296332,"display_name":"GTMF99"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":352,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1635765649,"creation_date":1635738548,"question_id":69792442,"body_markdown":"I&#39;m trying to implement an Exposed Dropdown menu on an AlertDialog with a custom layout defined in dialog_main_createremote.xml:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;wrap_content&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    android:padding=&quot;10dp&quot;&gt;\r\n    &lt;com.google.android.material.textfield.TextInputLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:hint=&quot;Name&quot;\r\n        style=&quot;@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox&quot;\r\n        android:layout_marginTop=&quot;10dp&quot;&gt;\r\n        &lt;com.google.android.material.textfield.TextInputEditText\r\n            android:id=&quot;@+id/dialog_main_textinput&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot; /&gt;\r\n    &lt;/com.google.android.material.textfield.TextInputLayout&gt;\r\n    &lt;com.google.android.material.textfield.TextInputLayout\r\n        style=&quot;@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox.ExposedDropdownMenu&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_marginTop=&quot;20dp&quot;\r\n        android:hint=&quot;Category&quot;&gt;\r\n\r\n        &lt;AutoCompleteTextView\r\n            android:id=&quot;@+id/dialog_main_dropdown&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:layout_weight=&quot;1&quot;\r\n            android:inputType=&quot;none&quot;/&gt;\r\n    &lt;/com.google.android.material.textfield.TextInputLayout&gt;\r\n&lt;/LinearLayout&gt;\r\n```\r\nAs per Material Design Guidelines, items need a layout for the dropdown menu to appear, so I created the following in the dropdown_item.xml file:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;TextView\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    android:padding=&quot;16dp&quot;\r\n    android:ellipsize=&quot;end&quot;\r\n    android:maxLines=&quot;1&quot;\r\n    android:textAppearance=&quot;?attr/textAppearanceSubtitle1&quot; /&gt;\r\n```\r\nFinally, I started to generate the AlertDialog with a MaterialAlertDialogBuilder, then defined and instantiated a LayoutInflater which I used to get dialog&#39;s custom view and get access to the setAdapter method, but after setting the adapter and showing the dialog all I can get is an Outlined TextInputLayout without any dropdown menu.\r\n\r\nSo that&#39;s it, thanks in advance for any suggestions/solutions, also, as you may have noticed, I&#39;m new to android development, so, if possible and of course, if you have time in your hands, elaborate your answer or point to a specific resource where I could get more info.\r\n\r\nMainActivity.java:\r\n\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n\tprivate RemoteListViewModel remoteListViewModel;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n\t    RecyclerView recyclerView = findViewById(R.id.main_recyclerview);\r\n\t    recyclerView.setLayoutManager(new LinearLayoutManager(this));\r\n\t    recyclerView.setHasFixedSize(true);\r\n\r\n\t    final RemoteAdapter adapter = new RemoteAdapter();\r\n\t    recyclerView.setAdapter(adapter);\r\n\r\n        remoteListViewModel = new ViewModelProvider(this).get(RemoteListViewModel.class);\r\n        remoteListViewModel.getAllRemotes().observe(this, new Observer&lt;List&lt;Remote&gt;&gt;() {\r\n            @Override\r\n            public void onChanged(@Nullable List&lt;Remote&gt; remotes) {\r\n                adapter.setRemotes(remotes);\r\n            }\r\n        });\r\n\t\t\r\n\t\tExtendedFloatingActionButton createButton = findViewById(R.id.create_efab);\r\n\r\n\t\tcreateButton.setOnClickListener(new View.OnClickListener() {\r\n\t\t\tpublic void onClick(View view) {\r\n\t\t\t\tMaterialAlertDialogBuilder builder = new MaterialAlertDialogBuilder(MainActivity.this);\r\n\t\t\t\tLayoutInflater inflater = LayoutInflater.from(MainActivity.this);\r\n\t\t\t\tfinal View inflatedView = inflater.inflate(R.layout.dialog_main_createremote, null);\r\n\t\t\t\tAutoCompleteTextView actv = inflatedView.findViewById(R.id.dialog_main_dropdown);\r\n\t\t\t\tString categories[] = getResources().getStringArray(R.array.categories);\r\n\t\t\t\tactv.setAdapter(new ArrayAdapter(MainActivity.this, R.layout.dropdown_item, categories));\r\n\t\t\t\tbuilder.setView(R.layout.dialog_main_createremote);\r\n\t\t\t\tbuilder.setTitle(&quot;Set control params&quot;);\r\n\t\t\t\tbuilder.setNegativeButton(&quot;Nope&quot;, new DialogInterface.OnClickListener() {\r\n\t\t\t\t\tpublic void onClick(DialogInterface dialog, int which) {\r\n\t\t\t\t\t\tdialog.dismiss();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tbuilder.setPositiveButton(&quot;Okey&quot;, new DialogInterface.OnClickListener() {\r\n\t\t\t\t\tpublic void onClick(DialogInterface dialog, int which) {\r\n\t\t\t\t\t\tdialog.dismiss();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tbuilder.show();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n```","title":"Empty Exposed Dropdown menu when placed inside a custom dialog layout","body":"<p>I'm trying to implement an Exposed Dropdown menu on an AlertDialog with a custom layout defined in dialog_main_createremote.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:orientation=&quot;vertical&quot;\n    android:padding=&quot;10dp&quot;&gt;\n    &lt;com.google.android.material.textfield.TextInputLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:hint=&quot;Name&quot;\n        style=&quot;@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox&quot;\n        android:layout_marginTop=&quot;10dp&quot;&gt;\n        &lt;com.google.android.material.textfield.TextInputEditText\n            android:id=&quot;@+id/dialog_main_textinput&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot; /&gt;\n    &lt;/com.google.android.material.textfield.TextInputLayout&gt;\n    &lt;com.google.android.material.textfield.TextInputLayout\n        style=&quot;@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox.ExposedDropdownMenu&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginTop=&quot;20dp&quot;\n        android:hint=&quot;Category&quot;&gt;\n\n        &lt;AutoCompleteTextView\n            android:id=&quot;@+id/dialog_main_dropdown&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:layout_weight=&quot;1&quot;\n            android:inputType=&quot;none&quot;/&gt;\n    &lt;/com.google.android.material.textfield.TextInputLayout&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>As per Material Design Guidelines, items need a layout for the dropdown menu to appear, so I created the following in the dropdown_item.xml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;TextView\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:padding=&quot;16dp&quot;\n    android:ellipsize=&quot;end&quot;\n    android:maxLines=&quot;1&quot;\n    android:textAppearance=&quot;?attr/textAppearanceSubtitle1&quot; /&gt;\n</code></pre>\n<p>Finally, I started to generate the AlertDialog with a MaterialAlertDialogBuilder, then defined and instantiated a LayoutInflater which I used to get dialog's custom view and get access to the setAdapter method, but after setting the adapter and showing the dialog all I can get is an Outlined TextInputLayout without any dropdown menu.</p>\n<p>So that's it, thanks in advance for any suggestions/solutions, also, as you may have noticed, I'm new to android development, so, if possible and of course, if you have time in your hands, elaborate your answer or point to a specific resource where I could get more info.</p>\n<p>MainActivity.java:</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    private RemoteListViewModel remoteListViewModel;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        RecyclerView recyclerView = findViewById(R.id.main_recyclerview);\n        recyclerView.setLayoutManager(new LinearLayoutManager(this));\n        recyclerView.setHasFixedSize(true);\n\n        final RemoteAdapter adapter = new RemoteAdapter();\n        recyclerView.setAdapter(adapter);\n\n        remoteListViewModel = new ViewModelProvider(this).get(RemoteListViewModel.class);\n        remoteListViewModel.getAllRemotes().observe(this, new Observer&lt;List&lt;Remote&gt;&gt;() {\n            @Override\n            public void onChanged(@Nullable List&lt;Remote&gt; remotes) {\n                adapter.setRemotes(remotes);\n            }\n        });\n        \n        ExtendedFloatingActionButton createButton = findViewById(R.id.create_efab);\n\n        createButton.setOnClickListener(new View.OnClickListener() {\n            public void onClick(View view) {\n                MaterialAlertDialogBuilder builder = new MaterialAlertDialogBuilder(MainActivity.this);\n                LayoutInflater inflater = LayoutInflater.from(MainActivity.this);\n                final View inflatedView = inflater.inflate(R.layout.dialog_main_createremote, null);\n                AutoCompleteTextView actv = inflatedView.findViewById(R.id.dialog_main_dropdown);\n                String categories[] = getResources().getStringArray(R.array.categories);\n                actv.setAdapter(new ArrayAdapter(MainActivity.this, R.layout.dropdown_item, categories));\n                builder.setView(R.layout.dialog_main_createremote);\n                builder.setTitle(&quot;Set control params&quot;);\n                builder.setNegativeButton(&quot;Nope&quot;, new DialogInterface.OnClickListener() {\n                    public void onClick(DialogInterface dialog, int which) {\n                        dialog.dismiss();\n                    }\n                });\n                builder.setPositiveButton(&quot;Okey&quot;, new DialogInterface.OnClickListener() {\n                    public void onClick(DialogInterface dialog, int which) {\n                        dialog.dismiss();\n                    }\n                });\n                builder.show();\n            }\n        });\n    }\n}\n</code></pre>\n"},{"tags":["java","android","alarmmanager","repeatingalarm"],"answers":[{"tags":[],"owner":{"account_id":1371289,"reputation":25857,"user_id":1306419,"accept_rate":85,"display_name":"Shobhit Puri"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1430833332,"creation_date":1374898998,"answer_id":17894223,"question_id":17894067,"body_markdown":"These questions talk about the same thing as you want. Those answers will be helpful:\r\n\r\nYou just need to specify the day to start it and then repeat it every 7 days. There are few ways specified in answers on given questions:\r\n\r\nhttps://stackoverflow.com/questions/14272295/how-can-i-get-the-repeat-alarm-for-week-days-using-alarm-manager\r\n\r\nhttps://stackoverflow.com/questions/14156950/android-notification-on-specific-weekday-goes-off-directly\r\n\r\nhttps://stackoverflow.com/questions/12507901/how-to-repeat-alarm-week-day-on-in-android\r\n\r\n\r\n**Update:**\r\n\r\nIn your comment you said \r\n\r\n&gt;How to set the triggerAtMillis part in setRepeating. say for example today is Tuesday, I choose weekly Monday, Wednesday, Friday. - What do I put for Wednesday ?\r\n\r\nWhat I understood that that if today is Tuesday, how to set alarm for lets say Wednesday repeating, right? First of all yes you can use mulltiple id&#39;s to set alarms for each day separately. \r\n\r\nThen you can add `alarmCalendar.set(Calendar.DAY_OF_WEEK, week);` line to your existing code. Based on the week day( from 1-7) it repeats for that day. You can pass it into a function as parameter. Like:\r\n\r\n        setAlarm(2); //set the alarm for this day of the week\r\n    \r\n        public void setAlarm(int dayOfWeek) {\r\n            // Add this day of the week line to your existing code\r\n            alarmCalendar.set(Calendar.DAY_OF_WEEK, dayOfWeek);\r\n           \r\n            alarmCalendar.set(Calendar.HOUR, AlarmHrsInInt);\r\n            alarmCalendar.set(Calendar.MINUTE, AlarmMinsInInt);\r\n            alarmCalendar.set(Calendar.SECOND, 0);\r\n            alarmCalendar.set(Calendar.AM_PM, amorpm);\r\n    \r\n            Long alarmTime = alarmCalendar.getTimeInMillis();\r\n            //Also change the time to 24 hours.\r\n            am.setRepeating(AlarmManager.RTC_WAKEUP, alarmTime, 24 * 60 * 60 * 1000 , pi); \r\n    }\r\n\r\nI&#39;ve taken the example from one of above question. Hope its more clear now. \r\n","title":"Set Repeat days of week alarm in android","body":"<p>These questions talk about the same thing as you want. Those answers will be helpful:</p>\n\n<p>You just need to specify the day to start it and then repeat it every 7 days. There are few ways specified in answers on given questions:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/14272295/how-can-i-get-the-repeat-alarm-for-week-days-using-alarm-manager\">How can i get the repeat alarm for week days using alarm manager?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/14156950/android-notification-on-specific-weekday-goes-off-directly\">Android Notification on specific weekday goes off directly</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/12507901/how-to-repeat-alarm-week-day-on-in-android\">how to repeat alarm week day on in android</a></p>\n\n<p><strong>Update:</strong></p>\n\n<p>In your comment you said </p>\n\n<blockquote>\n  <p>How to set the triggerAtMillis part in setRepeating. say for example today is Tuesday, I choose weekly Monday, Wednesday, Friday. - What do I put for Wednesday ?</p>\n</blockquote>\n\n<p>What I understood that that if today is Tuesday, how to set alarm for lets say Wednesday repeating, right? First of all yes you can use mulltiple id's to set alarms for each day separately. </p>\n\n<p>Then you can add <code>alarmCalendar.set(Calendar.DAY_OF_WEEK, week);</code> line to your existing code. Based on the week day( from 1-7) it repeats for that day. You can pass it into a function as parameter. Like:</p>\n\n<pre><code>    setAlarm(2); //set the alarm for this day of the week\n\n    public void setAlarm(int dayOfWeek) {\n        // Add this day of the week line to your existing code\n        alarmCalendar.set(Calendar.DAY_OF_WEEK, dayOfWeek);\n\n        alarmCalendar.set(Calendar.HOUR, AlarmHrsInInt);\n        alarmCalendar.set(Calendar.MINUTE, AlarmMinsInInt);\n        alarmCalendar.set(Calendar.SECOND, 0);\n        alarmCalendar.set(Calendar.AM_PM, amorpm);\n\n        Long alarmTime = alarmCalendar.getTimeInMillis();\n        //Also change the time to 24 hours.\n        am.setRepeating(AlarmManager.RTC_WAKEUP, alarmTime, 24 * 60 * 60 * 1000 , pi); \n}\n</code></pre>\n\n<p>I've taken the example from one of above question. Hope its more clear now. </p>\n"},{"tags":[],"owner":{"account_id":10133294,"reputation":31,"user_id":7485838,"display_name":"VIVEK GAUR"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1485696718,"creation_date":1485690451,"answer_id":41920542,"question_id":17894067,"body_markdown":"    Intent intent1 = new Intent(getApplicationContext(),\r\n                                NotificationReceiver.class);\r\n    PendingIntent pendingIntent1 = PendingIntent.getBroadcast(getApplicationContext(),\r\n                                                              1,\r\n                                                              intent1,\r\n                                                              PendingIntent.FLAG_UPDATE_CURRENT);\r\n    AlarmManager alarmManager1 = (AlarmManager)getSystemService(ALARM_SERVICE);\r\n    java.util.Calendar calendar1 = java.util.Calendar.getInstance();\r\n    \r\n    calendar1.set(java.util.Calendar.DAY_OF_WEEK,\r\n                  Calendar.MONDAY);\r\n    calendar1.set(java.util.Calendar.HOUR_OF_DAY,\r\n                  22);\r\n    calendar1.set(java.util.Calendar.MINUTE,\r\n                  8);\r\n    calendar1.set(java.util.Calendar.SECOND,\r\n                  0);\r\n    \r\n    alarmManager1.setExact(AlarmManager.RTC, calendar1.getTimeInMillis(), pendingIntent1);","title":"Set Repeat days of week alarm in android","body":"<pre><code>Intent intent1 = new Intent(getApplicationContext(),\n                            NotificationReceiver.class);\nPendingIntent pendingIntent1 = PendingIntent.getBroadcast(getApplicationContext(),\n                                                          1,\n                                                          intent1,\n                                                          PendingIntent.FLAG_UPDATE_CURRENT);\nAlarmManager alarmManager1 = (AlarmManager)getSystemService(ALARM_SERVICE);\njava.util.Calendar calendar1 = java.util.Calendar.getInstance();\n\ncalendar1.set(java.util.Calendar.DAY_OF_WEEK,\n              Calendar.MONDAY);\ncalendar1.set(java.util.Calendar.HOUR_OF_DAY,\n              22);\ncalendar1.set(java.util.Calendar.MINUTE,\n              8);\ncalendar1.set(java.util.Calendar.SECOND,\n              0);\n\nalarmManager1.setExact(AlarmManager.RTC, calendar1.getTimeInMillis(), pendingIntent1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9089962,"reputation":3525,"user_id":6766264,"accept_rate":0,"display_name":"Makvin"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1501161161,"creation_date":1501161161,"answer_id":45351849,"question_id":17894067,"body_markdown":"    if (Monday.isChecked()) {\r\n                            setalarm(2);\r\n                        } else if (Tuesday.isChecked()) {\r\n                            setalarm(3);\r\n                        } else if (Wednesday.isChecked()) {\r\n                            setalarm(4);\r\n                        } else if (Thursday.isChecked()) {\r\n                            setalarm(5);\r\n                        } else if (Friday.isChecked()) {\r\n                            setalarm(6);\r\n                        } else if (Saturday.isChecked()) {\r\n                            setalarm(7);\r\n                        } else if (Sunday.isChecked()) {\r\n                            setalarm(1);\r\n                        }\r\n\r\n    public void setalarm(int weekno) {\r\n    \r\n            cal.set(Calendar.DAY_OF_WEEK, weekno);\r\n            cal.set(Calendar.MINUTE, min);\r\n            cal.set(Calendar.SECOND, 0);\r\n            cal.set(Calendar.MILLISECOND, 0);\r\n    \r\n            alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,\r\n           \r\n\r\n         cal.getTimeInMillis(), 1 * 60 * 60 * 1000, pendingIntent);\r\n    }\r\n","title":"Set Repeat days of week alarm in android","body":"<pre><code>if (Monday.isChecked()) {\n                        setalarm(2);\n                    } else if (Tuesday.isChecked()) {\n                        setalarm(3);\n                    } else if (Wednesday.isChecked()) {\n                        setalarm(4);\n                    } else if (Thursday.isChecked()) {\n                        setalarm(5);\n                    } else if (Friday.isChecked()) {\n                        setalarm(6);\n                    } else if (Saturday.isChecked()) {\n                        setalarm(7);\n                    } else if (Sunday.isChecked()) {\n                        setalarm(1);\n                    }\n\npublic void setalarm(int weekno) {\n\n        cal.set(Calendar.DAY_OF_WEEK, weekno);\n        cal.set(Calendar.MINUTE, min);\n        cal.set(Calendar.SECOND, 0);\n        cal.set(Calendar.MILLISECOND, 0);\n\n        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,\n\n\n     cal.getTimeInMillis(), 1 * 60 * 60 * 1000, pendingIntent);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10989875,"reputation":171,"user_id":8074260,"display_name":"Bhoomika Chauhan"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1532929648,"creation_date":1532929648,"answer_id":51587657,"question_id":17894067,"body_markdown":"To set repeat alarm for week days,use below code. Hope this is helpful.\r\n\r\n\r\n            Calendar calender= Calendar.getInstance();\r\n\r\n            calender.set(Calendar.DAY_OF_WEEK, weekNo);  //here pass week number\r\n            calender.set(Calendar.HOUR_OF_DAY, hour);  //pass hour which you have select\r\n            calender.set(Calendar.MINUTE, min);  //pass min which you have select\r\n            calender.set(Calendar.SECOND, 0);\r\n            calender.set(Calendar.MILLISECOND, 0);\r\n\r\n            Calendar now = Calendar.getInstance();\r\n            now.set(Calendar.SECOND, 0);\r\n            now.set(Calendar.MILLISECOND, 0);\r\n\r\n            if (calender.before(now)) {    //this condition is used for future reminder that means your reminder not fire for past time\r\n                calender.add(Calendar.DATE, 7);\r\n            }\r\n\r\n            final int _id = (int) System.currentTimeMillis();  //this id is used to set multiple alarms\r\n\r\n            Intent intent = new Intent(activity, YourServiceClass.class);\r\n\r\n            PendingIntent pendingIntent = PendingIntent.getBroadcast(activity, _id, intent, PendingIntent.FLAG_UPDATE_CURRENT);\r\n\r\n            AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);\r\n\r\n            alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calender.getTimeInMillis(), 7 * 24 * 60 * 60 * 1000, pendingIntent);","title":"Set Repeat days of week alarm in android","body":"<p>To set repeat alarm for week days,use below code. Hope this is helpful.</p>\n\n<pre><code>        Calendar calender= Calendar.getInstance();\n\n        calender.set(Calendar.DAY_OF_WEEK, weekNo);  //here pass week number\n        calender.set(Calendar.HOUR_OF_DAY, hour);  //pass hour which you have select\n        calender.set(Calendar.MINUTE, min);  //pass min which you have select\n        calender.set(Calendar.SECOND, 0);\n        calender.set(Calendar.MILLISECOND, 0);\n\n        Calendar now = Calendar.getInstance();\n        now.set(Calendar.SECOND, 0);\n        now.set(Calendar.MILLISECOND, 0);\n\n        if (calender.before(now)) {    //this condition is used for future reminder that means your reminder not fire for past time\n            calender.add(Calendar.DATE, 7);\n        }\n\n        final int _id = (int) System.currentTimeMillis();  //this id is used to set multiple alarms\n\n        Intent intent = new Intent(activity, YourServiceClass.class);\n\n        PendingIntent pendingIntent = PendingIntent.getBroadcast(activity, _id, intent, PendingIntent.FLAG_UPDATE_CURRENT);\n\n        AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);\n\n        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calender.getTimeInMillis(), 7 * 24 * 60 * 60 * 1000, pendingIntent);\n</code></pre>\n"}],"owner":{"account_id":1550551,"reputation":5924,"user_id":1443051,"accept_rate":54,"display_name":"TheDevMan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37371,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":17894223,"answer_count":4,"score":19,"last_activity_date":1635765472,"creation_date":1374897232,"question_id":17894067,"body_markdown":"Can somebody give good logic for set repeat days of week alarm? I have done weekly Alarm by using \r\n\r\n```java\r\nalarmCalendar.set(Calendar.HOUR, AlarmHrsInInt);\r\nalarmCalendar.set(Calendar.MINUTE, AlarmMinsInInt);\r\nalarmCalendar.set(Calendar.SECOND, 0);\r\nalarmCalendar.set(Calendar.AM_PM, amorpm);\r\n\r\nLong alarmTime = alarmCalendar.getTimeInMillis();\r\n\r\nIntent intent = new Intent(Alarm.this, AlarmReciever.class);\r\nintent.putExtra(&quot;keyValue&quot;, key);\r\nPendingIntent pi = PendingIntent.getBroadcast(Alarm.this, key, intent, PendingIntent.FLAG_UPDATE_CURRENT);\r\nam.setRepeating(AlarmManager.RTC_WAKEUP, alarmTime, 7*1440*60000 , pi); \r\n```\r\n\r\nThe alarm trigger on time and after 7 days it automatically triggers at that time.\r\n\r\nBut my requirement is I want to choose days rather than just 7 days.\r\n\r\nSomething like every Monday, Tuesday, Thursday at 9:00 AM - Alarm should trigger automatically. How do I go about doing this in setRepeating?\r\n\r\nCan somebody help me out with this?\r\n\r\nThanks!\r\n","title":"Set Repeat days of week alarm in android","body":"<p>Can somebody give good logic for set repeat days of week alarm? I have done weekly Alarm by using</p>\n<pre class=\"lang-java prettyprint-override\"><code>alarmCalendar.set(Calendar.HOUR, AlarmHrsInInt);\nalarmCalendar.set(Calendar.MINUTE, AlarmMinsInInt);\nalarmCalendar.set(Calendar.SECOND, 0);\nalarmCalendar.set(Calendar.AM_PM, amorpm);\n\nLong alarmTime = alarmCalendar.getTimeInMillis();\n\nIntent intent = new Intent(Alarm.this, AlarmReciever.class);\nintent.putExtra(&quot;keyValue&quot;, key);\nPendingIntent pi = PendingIntent.getBroadcast(Alarm.this, key, intent, PendingIntent.FLAG_UPDATE_CURRENT);\nam.setRepeating(AlarmManager.RTC_WAKEUP, alarmTime, 7*1440*60000 , pi); \n</code></pre>\n<p>The alarm trigger on time and after 7 days it automatically triggers at that time.</p>\n<p>But my requirement is I want to choose days rather than just 7 days.</p>\n<p>Something like every Monday, Tuesday, Thursday at 9:00 AM - Alarm should trigger automatically. How do I go about doing this in setRepeating?</p>\n<p>Can somebody help me out with this?</p>\n<p>Thanks!</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":21584472,"reputation":690,"user_id":15915172,"display_name":"Rakesh Saini"},"score":0,"creation_date":1635740529,"post_id":69792481,"comment_id":123366631,"body_markdown":"Yes, you can use the (DatePicker)[https://material.io/components/date-pickers/android]  and check the date. Compare the date then open the Activity that you want. First start the coding and let me know any issue.","body":"Yes, you can use the (DatePicker)[<a href=\"https://material.io/components/date-pickers/android]\" rel=\"nofollow noreferrer\">material.io/components/date-pickers/android]</a>  and check the date. Compare the date then open the Activity that you want. First start the coding and let me know any issue."},{"owner":{"account_id":23201791,"reputation":31,"user_id":17296502,"display_name":"Sathish Guru"},"score":0,"creation_date":1635748864,"post_id":69792481,"comment_id":123367948,"body_markdown":"material.io pages is not available ..!","body":"material.io pages is not available ..!"},{"owner":{"account_id":21584472,"reputation":690,"user_id":15915172,"display_name":"Rakesh Saini"},"score":0,"creation_date":1635750110,"post_id":69792481,"comment_id":123368223,"body_markdown":"I think its not shareable link, You can google material DatePicker in android","body":"I think its not shareable link, You can google material DatePicker in android"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635764925,"creation_date":1635744681,"answer_id":69792959,"question_id":69792481,"body_markdown":"If you want one image for each day of the year, you’ll need 366 images in leap years rather than 365.\r\n\r\nYou can test for leap year.\r\n\r\n    boolean isLeap = Year.now().isLeap() ;\r\n\r\nIf you want to load by date, use `LocalDate`.\r\n\r\n    LocalDate today = LocalDate.now() ;  // Capture the current date as seen in the JVM’s current default time zone.\r\n\r\nIf you want to load by month and date regardless of year, use [`MonthDay`][1]. \r\n\r\n     MonthDay monthDay = MonthDay.now() ;\r\n\r\nIf you want to load by day number of year, 1-365 or 1-366, interrogate the `LocalDate` for [day of year][2]. \r\n\r\n    int dayOfYear = today.getDayOfYear() ;\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/MonthDay.html\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDate.html#getDayOfYear()","title":"How to set default page load based on date/time in Android application?","body":"<p>If you want one image for each day of the year, you’ll need 366 images in leap years rather than 365.</p>\n<p>You can test for leap year.</p>\n<pre><code>boolean isLeap = Year.now().isLeap() ;\n</code></pre>\n<p>If you want to load by date, use <code>LocalDate</code>.</p>\n<pre><code>LocalDate today = LocalDate.now() ;  // Capture the current date as seen in the JVM’s current default time zone.\n</code></pre>\n<p>If you want to load by month and date regardless of year, use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/MonthDay.html\" rel=\"nofollow noreferrer\"><code>MonthDay</code></a>.</p>\n<pre><code> MonthDay monthDay = MonthDay.now() ;\n</code></pre>\n<p>If you want to load by day number of year, 1-365 or 1-366, interrogate the <code>LocalDate</code> for <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDate.html#getDayOfYear()\" rel=\"nofollow noreferrer\">day of year</a>.</p>\n<pre><code>int dayOfYear = today.getDayOfYear() ;\n</code></pre>\n"}],"owner":{"account_id":23201791,"reputation":31,"user_id":17296502,"display_name":"Sathish Guru"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1635764925,"creation_date":1635738996,"question_id":69792481,"body_markdown":"I am developing a Calendar application in Android Studio, this application contains 365 images, I want to default page load the unique page based on timestamp, for Example: if date=01.01.2022 then 1st page wants to load... ","title":"How to set default page load based on date/time in Android application?","body":"<p>I am developing a Calendar application in Android Studio, this application contains 365 images, I want to default page load the unique page based on timestamp, for Example: if date=01.01.2022 then 1st page wants to load...</p>\n"},{"tags":["java","spring","junit5","spring-test","spring-bean"],"comments":[{"owner":{"account_id":16871523,"reputation":706,"user_id":12199915,"display_name":"Alex"},"score":0,"creation_date":1635752866,"post_id":69793741,"comment_id":123368904,"body_markdown":"Have a look at this link https://github.com/spring-projects/spring-boot/issues/14877#issuecomment-603873031","body":"Have a look at this link <a href=\"https://github.com/spring-projects/spring-boot/issues/14877#issuecomment-603873031\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/issues/&hellip;</a>"},{"owner":{"account_id":20870030,"reputation":59,"user_id":15330208,"display_name":"hellneck"},"score":0,"creation_date":1635754977,"post_id":69793741,"comment_id":123369434,"body_markdown":"The `@Lazy` annotation did the trick. Thank you, @Alex.","body":"The <code>@Lazy</code> annotation did the trick. Thank you, @Alex."}],"answers":[{"tags":[],"owner":{"account_id":20870030,"reputation":59,"user_id":15330208,"display_name":"hellneck"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635764620,"creation_date":1635754497,"answer_id":69794199,"question_id":69793741,"body_markdown":"Add `@Lazy` annotation to the test configuration class. More info [here][1].\r\n\r\nFrom the [documentation][2]:\r\n&gt; If this annotation is not present on a @Component or @Bean definition,\r\n&gt; eager initialization will occur. If present and set to true, the @Bean\r\n&gt; or @Component will not be initialized until referenced by another bean\r\n&gt; or explicitly retrieved from the enclosing BeanFactory. If present and\r\n&gt; set to false, the bean will be instantiated on startup by bean\r\n&gt; factories that perform eager initialization of singletons.\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/issues/14877#issuecomment-603873031\r\n  [2]: https://www.baeldung.com/spring-lazy-annotation","title":"Failed to load ApplicationContext inside the @TestConfiguration class","body":"<p>Add <code>@Lazy</code> annotation to the test configuration class. More info <a href=\"https://github.com/spring-projects/spring-boot/issues/14877#issuecomment-603873031\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>From the <a href=\"https://www.baeldung.com/spring-lazy-annotation\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n<blockquote>\n<p>If this annotation is not present on a @Component or @Bean definition,\neager initialization will occur. If present and set to true, the @Bean\nor @Component will not be initialized until referenced by another bean\nor explicitly retrieved from the enclosing BeanFactory. If present and\nset to false, the bean will be instantiated on startup by bean\nfactories that perform eager initialization of singletons.</p>\n</blockquote>\n"}],"owner":{"account_id":20870030,"reputation":59,"user_id":15330208,"display_name":"hellneck"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":485,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635764620,"creation_date":1635751414,"question_id":69793741,"body_markdown":"I&#39;m using `@TestConfiguration` annotation to define bean provider for the JUnit5 test class.\r\n \r\n* A test class is annotated with:\r\n  - `@Import(MyTestConfiguration.class)`\r\n  - `@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)`. \r\n\r\n```\r\npackage com.example;\r\n\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.boot.test.web.client.TestRestTemplate;\r\nimport org.springframework.context.annotation.Import;\r\n\r\nimport javax.annotation.Resource;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\nimport static org.junit.jupiter.api.Assertions.assertNotNull;\r\n\r\n@Import(MyTestConfiguration.class)\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\nclass MyTest {\r\n\r\n    ...\r\n\r\n}\r\n```\r\n\r\n\r\n* A configuration class is annotated with \r\n  - `@TestConfiguration`.\r\n\r\n```\r\npackage com.example;\r\n    \r\nimport org.springframework.boot.test.context.TestConfiguration;\r\nimport org.springframework.boot.web.server.LocalServerPort;\r\nimport org.springframework.context.annotation.Bean;\r\n    \r\n@TestConfiguration\r\npublic class MyTestConfiguration {\r\n    \r\n    @LocalServerPort\r\n    private int port;\r\n\r\n        \r\n    ...\r\n}\r\n\r\n```\r\n\r\nI&#39;m trying to inject local server port inside the configuration class with `@LocalServerPort` annotation, but get a `Failed to load ApplicationContext` error `Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;com.example.MyTestConfiguration&#39;: Injection of autowired dependencies failed; nested exception is java.lang.IllegalArgumentException: Could not resolve placeholder &#39;local.server.port&#39; in value &quot;${local.server.port}&quot;`.\r\n\r\nI was using `@LocalServerPort` successfully in the test class, but decided to move it along with other objects which use it to the `MyTestConfiguration` class to make test class more clear.","title":"Failed to load ApplicationContext inside the @TestConfiguration class","body":"<p>I'm using <code>@TestConfiguration</code> annotation to define bean provider for the JUnit5 test class.</p>\n<ul>\n<li>A test class is annotated with:\n<ul>\n<li><code>@Import(MyTestConfiguration.class)</code></li>\n<li><code>@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)</code>.</li>\n</ul>\n</li>\n</ul>\n<pre><code>package com.example;\n\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.boot.test.web.client.TestRestTemplate;\nimport org.springframework.context.annotation.Import;\n\nimport javax.annotation.Resource;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.junit.jupiter.api.Assertions.assertNotNull;\n\n@Import(MyTestConfiguration.class)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\nclass MyTest {\n\n    ...\n\n}\n</code></pre>\n<ul>\n<li>A configuration class is annotated with\n<ul>\n<li><code>@TestConfiguration</code>.</li>\n</ul>\n</li>\n</ul>\n<pre><code>package com.example;\n    \nimport org.springframework.boot.test.context.TestConfiguration;\nimport org.springframework.boot.web.server.LocalServerPort;\nimport org.springframework.context.annotation.Bean;\n    \n@TestConfiguration\npublic class MyTestConfiguration {\n    \n    @LocalServerPort\n    private int port;\n\n        \n    ...\n}\n\n</code></pre>\n<p>I'm trying to inject local server port inside the configuration class with <code>@LocalServerPort</code> annotation, but get a <code>Failed to load ApplicationContext</code> error <code>Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.example.MyTestConfiguration': Injection of autowired dependencies failed; nested exception is java.lang.IllegalArgumentException: Could not resolve placeholder 'local.server.port' in value &quot;${local.server.port}&quot;</code>.</p>\n<p>I was using <code>@LocalServerPort</code> successfully in the test class, but decided to move it along with other objects which use it to the <code>MyTestConfiguration</code> class to make test class more clear.</p>\n"},{"tags":["java","recursion"],"answers":[{"tags":[],"owner":{"account_id":17181007,"reputation":2283,"user_id":12436427,"display_name":"b.GHILAS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635764159,"creation_date":1635623994,"answer_id":69781703,"question_id":69780127,"body_markdown":"A solution to this problem is as follows:\r\n\r\nWe only need four parameters for our function, the string to parse, the list of results, the current found combination and the index where to start forming a new number of an ip address.\r\n```\r\npublic void restoreIp(String s, List&lt;List&lt;Integer&gt;&gt; results, List&lt;Integer&gt; combination, int startIndex)\r\n```\r\n\r\nWe start by declaring the stopping conditions, we stop calling the function when the combination has 4 numbers or the string is fully parsed. If the combination has 4 numbers and the string is fully parsed, we add the combination to the list of results, otherwise we just break from the recursive call.\r\n```\r\nif (combination.size() == 4 &amp;&amp; startIndex &gt;= s.length()) {\r\n    results.add(combination);\r\n    return;\r\n}\r\n\r\nif (combination.size() == 4 || startIndex &gt;= s.length()) {\r\n    return;\r\n}\r\n```\r\n\r\nNow the body of the algorithm is to iterate through the string from the `startIndex` and starts forming new numbers, if the number is starting with 0 and has more than two digits (01, 02, ...etc) or greater than 255 we stop iterating because is not a valid ip number otherwise we add the number to the combination and the function call itself.\r\n```\r\nfor (int i = startIndex; i &lt; s.length(); i++) {\r\n    String strNumber = s.substring(startIndex, i + 1);\r\n    int number = Integer.parseInt(strNumber);\r\n    if ((s.charAt(startIndex) == &#39;0&#39; &amp;&amp; strNumber.length() &gt; 1) || number &gt; 255) {\r\n        return;\r\n    }\r\n    List&lt;Integer&gt; newCombination = new ArrayList&lt;&gt;(combination);\r\n    newCombination.add(number);\r\n\r\n    restoreIp(s, results, newCombination, i + 1);\r\n}\r\n```\r\n\r\nSo the whole code is:\r\n```\r\npublic static void restoreIp(String s, List&lt;List&lt;Integer&gt;&gt; results, List&lt;Integer&gt; combination, int startIndex) {\r\n    if (combination.size() == 4 &amp;&amp; startIndex &gt;= s.length()) {\r\n        results.add(combination);\r\n        return;\r\n    }\r\n    \r\n    if (combination.size() == 4 || startIndex &gt;= s.length()) {\r\n        return;\r\n    }\r\n    \r\n    for (int i = startIndex; i &lt; s.length(); i++) {\r\n        String strNumber = s.substring(startIndex, i + 1);\r\n        int number = Integer.parseInt(strNumber);\r\n        if ((s.charAt(startIndex) == &#39;0&#39; &amp;&amp; strNumber.length() &gt; 1) || number &gt; 255) {\r\n            return;\r\n        }\r\n        List&lt;Integer&gt; newCombination = new ArrayList&lt;&gt;(combination);\r\n        newCombination.add(number);\r\n    \r\n        restoreIp(s, results, newCombination, i + 1);\r\n    }\r\n}\r\n```\r\n\r\nTesting with:\r\n```\r\nString str = &quot;17125120120&quot;;\r\nList&lt;List&lt;Integer&gt;&gt; result = new ArrayList&lt;&gt;();\r\nrestoreIp(str, result, new ArrayList&lt;&gt;(), 0);\r\nSystem.out.println(result);\r\n```\r\nwill generate:\r\n```\r\n[[17, 125, 120, 120], [171, 25, 120, 120], [171, 251, 20, 120], [171, 251, 201, 20]]\r\n```\r\n\r\nand with: `s = &quot;25525511135&quot;`\r\n```\r\n[[255, 255, 11, 135], [255, 255, 111, 35]]\r\n```","title":"List all possible combinations of Ip addresses from given String using Recursive Function","body":"<p>A solution to this problem is as follows:</p>\n<p>We only need four parameters for our function, the string to parse, the list of results, the current found combination and the index where to start forming a new number of an ip address.</p>\n<pre><code>public void restoreIp(String s, List&lt;List&lt;Integer&gt;&gt; results, List&lt;Integer&gt; combination, int startIndex)\n</code></pre>\n<p>We start by declaring the stopping conditions, we stop calling the function when the combination has 4 numbers or the string is fully parsed. If the combination has 4 numbers and the string is fully parsed, we add the combination to the list of results, otherwise we just break from the recursive call.</p>\n<pre><code>if (combination.size() == 4 &amp;&amp; startIndex &gt;= s.length()) {\n    results.add(combination);\n    return;\n}\n\nif (combination.size() == 4 || startIndex &gt;= s.length()) {\n    return;\n}\n</code></pre>\n<p>Now the body of the algorithm is to iterate through the string from the <code>startIndex</code> and starts forming new numbers, if the number is starting with 0 and has more than two digits (01, 02, ...etc) or greater than 255 we stop iterating because is not a valid ip number otherwise we add the number to the combination and the function call itself.</p>\n<pre><code>for (int i = startIndex; i &lt; s.length(); i++) {\n    String strNumber = s.substring(startIndex, i + 1);\n    int number = Integer.parseInt(strNumber);\n    if ((s.charAt(startIndex) == '0' &amp;&amp; strNumber.length() &gt; 1) || number &gt; 255) {\n        return;\n    }\n    List&lt;Integer&gt; newCombination = new ArrayList&lt;&gt;(combination);\n    newCombination.add(number);\n\n    restoreIp(s, results, newCombination, i + 1);\n}\n</code></pre>\n<p>So the whole code is:</p>\n<pre><code>public static void restoreIp(String s, List&lt;List&lt;Integer&gt;&gt; results, List&lt;Integer&gt; combination, int startIndex) {\n    if (combination.size() == 4 &amp;&amp; startIndex &gt;= s.length()) {\n        results.add(combination);\n        return;\n    }\n    \n    if (combination.size() == 4 || startIndex &gt;= s.length()) {\n        return;\n    }\n    \n    for (int i = startIndex; i &lt; s.length(); i++) {\n        String strNumber = s.substring(startIndex, i + 1);\n        int number = Integer.parseInt(strNumber);\n        if ((s.charAt(startIndex) == '0' &amp;&amp; strNumber.length() &gt; 1) || number &gt; 255) {\n            return;\n        }\n        List&lt;Integer&gt; newCombination = new ArrayList&lt;&gt;(combination);\n        newCombination.add(number);\n    \n        restoreIp(s, results, newCombination, i + 1);\n    }\n}\n</code></pre>\n<p>Testing with:</p>\n<pre><code>String str = &quot;17125120120&quot;;\nList&lt;List&lt;Integer&gt;&gt; result = new ArrayList&lt;&gt;();\nrestoreIp(str, result, new ArrayList&lt;&gt;(), 0);\nSystem.out.println(result);\n</code></pre>\n<p>will generate:</p>\n<pre><code>[[17, 125, 120, 120], [171, 25, 120, 120], [171, 251, 20, 120], [171, 251, 201, 20]]\n</code></pre>\n<p>and with: <code>s = &quot;25525511135&quot;</code></p>\n<pre><code>[[255, 255, 11, 135], [255, 255, 111, 35]]\n</code></pre>\n"}],"owner":{"account_id":12509045,"reputation":661,"user_id":9104942,"display_name":"Abdusoli"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":191,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69781703,"answer_count":1,"score":1,"last_activity_date":1635764159,"creation_date":1635601142,"question_id":69780127,"body_markdown":"I have a String ```s = &quot;25525511135&quot;```. How can I find all possible list of IP addresses using **recursive function**. I wrote a recursive function for this purpose but it is not working. I cannot understand where I am making a mistake.\r\n\r\n```\r\nString s = &quot;25525511135&quot;;\r\nint endInd = 1,strInd = 1;\r\nString strNum = s.substring(0,1);\r\n\r\npublic void restoreIp(String s,List&lt;List&lt;String&gt;&gt; results,List&lt;String&gt; combination,\r\n                          int startIndex, int endIndex,String strNum){\r\n\r\n        int num = Integer.parseInt(strNum);\r\n        Integer sumStr = combination.stream().mapToInt(String::length).reduce(0,Integer::sum);\r\n\r\n        if (sumStr == s.length() &amp;&amp; combination.size() == 4){\r\n            results.add(new ArrayList&lt;&gt;(combination));\r\n            return;\r\n        }\r\n\r\n        for (int i = startIndex; i &lt; s.length(); i++){\r\n\r\n            if (num &gt;= 0 &amp;&amp; num &lt;= 255 &amp;&amp; combination.size() &lt; 4){\r\n                combination.add(&quot;&quot; + num);\r\n            } else { break; }\r\n\r\n            if (sumStr &lt; s.length() &amp;&amp; combination.size() &gt; 4){ break; }\r\n\r\n            if (sumStr &lt; s.length() &amp;&amp; combination.size() == 4){\r\n                if (endIndex &lt; 4) {\r\n                    endIndex = endIndex + 1;\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n\r\n            restoreIp(s,results,combination,i+1,endIndex,s.substring(i,startIndex + endIndex));\r\n            combination.remove(combination.size() - 1);\r\n        }\r\n\r\n    }\r\n\r\n```\r\n\r\nI need to collect all possible lists inside ```results``` list.\r\nResult should look like below:\r\n```\r\n[\r\n[255,255,11,135]]\r\n[255,255,111,35]\r\n]\r\n\r\n```","title":"List all possible combinations of Ip addresses from given String using Recursive Function","body":"<p>I have a String <code>s = &quot;25525511135&quot;</code>. How can I find all possible list of IP addresses using <strong>recursive function</strong>. I wrote a recursive function for this purpose but it is not working. I cannot understand where I am making a mistake.</p>\n<pre><code>String s = &quot;25525511135&quot;;\nint endInd = 1,strInd = 1;\nString strNum = s.substring(0,1);\n\npublic void restoreIp(String s,List&lt;List&lt;String&gt;&gt; results,List&lt;String&gt; combination,\n                          int startIndex, int endIndex,String strNum){\n\n        int num = Integer.parseInt(strNum);\n        Integer sumStr = combination.stream().mapToInt(String::length).reduce(0,Integer::sum);\n\n        if (sumStr == s.length() &amp;&amp; combination.size() == 4){\n            results.add(new ArrayList&lt;&gt;(combination));\n            return;\n        }\n\n        for (int i = startIndex; i &lt; s.length(); i++){\n\n            if (num &gt;= 0 &amp;&amp; num &lt;= 255 &amp;&amp; combination.size() &lt; 4){\n                combination.add(&quot;&quot; + num);\n            } else { break; }\n\n            if (sumStr &lt; s.length() &amp;&amp; combination.size() &gt; 4){ break; }\n\n            if (sumStr &lt; s.length() &amp;&amp; combination.size() == 4){\n                if (endIndex &lt; 4) {\n                    endIndex = endIndex + 1;\n                } else {\n                    break;\n                }\n            }\n\n            restoreIp(s,results,combination,i+1,endIndex,s.substring(i,startIndex + endIndex));\n            combination.remove(combination.size() - 1);\n        }\n\n    }\n\n</code></pre>\n<p>I need to collect all possible lists inside <code>results</code> list.\nResult should look like below:</p>\n<pre><code>[\n[255,255,11,135]]\n[255,255,111,35]\n]\n\n</code></pre>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":904230,"reputation":2233,"user_id":939497,"accept_rate":40,"display_name":"Balconsky"},"score":1,"creation_date":1571750467,"post_id":58504516,"comment_id":103338823,"body_markdown":"Also if it meter for you, int types are atomic in multithreading (reading and changing are happening per one operation). Read more: https://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html","body":"Also if it meter for you, int types are atomic in multithreading (reading and changing are happening per one operation). Read more: <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/essential/concurrency/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":341845,"reputation":19101,"user_id":672689,"accept_rate":82,"display_name":"Roee Gavirel"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1571748094,"creation_date":1571748047,"answer_id":58504550,"question_id":58504516,"body_markdown":"In short - it won&#39;t be locked.\r\n\r\nIf you want it to be locked you need to protect the getJ function as well:\r\n\r\n    public void getJ() {\r\n        synchronized (Data.class) {\r\n            System.out.println(fmt() + &quot; &gt; &quot; + Thread.currentThread().getName() + (&quot; READ &gt; &quot;+ j));\r\n        }\r\n    }\r\n\r\nThat has nothing to do with the fact there are static variables. The variables themselves can&#39;t be locked. Only access to them. If you allow un-locked access through getJ, there is nothing to stop you.","title":"Static variables behavior in class level locking","body":"<p>In short - it won't be locked.</p>\n\n<p>If you want it to be locked you need to protect the getJ function as well:</p>\n\n<pre><code>public void getJ() {\n    synchronized (Data.class) {\n        System.out.println(fmt() + \" &gt; \" + Thread.currentThread().getName() + (\" READ &gt; \"+ j));\n    }\n}\n</code></pre>\n\n<p>That has nothing to do with the fact there are static variables. The variables themselves can't be locked. Only access to them. If you allow un-locked access through getJ, there is nothing to stop you.</p>\n"},{"tags":[],"owner":{"account_id":8079803,"reputation":1,"user_id":6089463,"display_name":"Anjani Jha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635763953,"creation_date":1635763953,"answer_id":69795869,"question_id":58504516,"body_markdown":"Interestingly, You can access lock on the class level variables even when class level synchronized method is running by some other Thread \r\n\r\nExample where both the **main** thread and another thread &#39;**thread**&#39; will run at the same time : \r\n\r\n\r\n    import java.util.Arrays;\r\n\r\n    public class ThreadExample extends Thread {\r\n\r\n    public ThreadExample() {\r\n    }\r\n\r\n    public ThreadExample(String[] arr) {\r\n        this.arrObj = arr;\r\n    }\r\n\r\n    private String[] arrObj = new String[2];\r\n    private final static ThreadExample obj = new ThreadExample(new String[]{&quot;Hello&quot;, &quot;World&quot;});\r\n\r\n    private static synchronized void call() throws InterruptedException {\r\n            obj.arrObj[0] += &#39;C&#39;;\r\n            System.out.println(&quot;Inside Thread ... &quot; + Arrays.toString(obj.arrObj));\r\n            Thread.sleep(5000);\r\n            System.out.println(&quot;Inside Thread ... Done&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        try {\r\n            call();\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n        ThreadExample thread = new ThreadExample();\r\n\r\n        thread.start();\r\n        Thread.sleep(1000);\r\n\r\n        synchronized (ThreadExample.obj) {\r\n            obj.arrObj[1] += &quot;K&quot;;\r\n            System.out.println(&quot;Main Thread ... &quot; + Arrays.toString(obj.arrObj));\r\n            Thread.sleep(5000);\r\n            System.out.println(&quot;Main Thread ... Done&quot;);\r\n        }\r\n    }\r\n}\r\n\r\n","title":"Static variables behavior in class level locking","body":"<p>Interestingly, You can access lock on the class level variables even when class level synchronized method is running by some other Thread</p>\n<p>Example where both the <strong>main</strong> thread and another thread '<strong>thread</strong>' will run at the same time :</p>\n<pre><code>import java.util.Arrays;\n\npublic class ThreadExample extends Thread {\n\npublic ThreadExample() {\n}\n\npublic ThreadExample(String[] arr) {\n    this.arrObj = arr;\n}\n\nprivate String[] arrObj = new String[2];\nprivate final static ThreadExample obj = new ThreadExample(new String[]{&quot;Hello&quot;, &quot;World&quot;});\n\nprivate static synchronized void call() throws InterruptedException {\n        obj.arrObj[0] += 'C';\n        System.out.println(&quot;Inside Thread ... &quot; + Arrays.toString(obj.arrObj));\n        Thread.sleep(5000);\n        System.out.println(&quot;Inside Thread ... Done&quot;);\n}\n\n@Override\npublic void run() {\n    try {\n        call();\n    } catch (InterruptedException e) {\n        e.printStackTrace();\n    }\n\n}\n\npublic static void main(String[] args) throws InterruptedException {\n    ThreadExample thread = new ThreadExample();\n\n    thread.start();\n    Thread.sleep(1000);\n\n    synchronized (ThreadExample.obj) {\n        obj.arrObj[1] += &quot;K&quot;;\n        System.out.println(&quot;Main Thread ... &quot; + Arrays.toString(obj.arrObj));\n        Thread.sleep(5000);\n        System.out.println(&quot;Main Thread ... Done&quot;);\n    }\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":2251813,"reputation":78,"user_id":1983894,"display_name":"ap91"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":156,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":58504550,"answer_count":2,"score":1,"last_activity_date":1635763953,"creation_date":1571747933,"question_id":58504516,"body_markdown":"I need some clarity on static variables behavior in class level locking.\r\n\r\nScenario:\r\nConsider below class called Data.\r\n\r\n```java\r\npublic class Data {\r\n\r\n\tprivate static int i = 1;\r\n\tprivate static int j = 1;\r\n\t\r\n\t\r\n\tpublic void updateI() {\r\n\t\tsynchronized (Data.class) {\r\n\t\t\t++i;\r\n\t\t\tSystem.out.println(fmt() + &quot; &gt; &quot; + Thread.currentThread().getName() + (&quot; UPDATED &gt; &quot;+ i));\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic void getJ() {\r\n\t\tSystem.out.println(fmt() + &quot; &gt; &quot; + Thread.currentThread().getName() + (&quot; READ &gt; &quot;+ j));\r\n\t}\r\n}\r\n```\r\n\r\nHere,\r\n\r\n - Thread-A calls updateI() method and acquires the lock. \r\n - At the same time Thread-B is calling getJ() method. \r\n - **Will it be block Thread-B \r\n   as class level lock is already acquired by Thread-A?** Or it will allow\r\n   to access both methods simultaneously?\r\n\r\nThanks....\r\n","title":"Static variables behavior in class level locking","body":"<p>I need some clarity on static variables behavior in class level locking.</p>\n\n<p>Scenario:\nConsider below class called Data.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class Data {\n\n    private static int i = 1;\n    private static int j = 1;\n\n\n    public void updateI() {\n        synchronized (Data.class) {\n            ++i;\n            System.out.println(fmt() + \" &gt; \" + Thread.currentThread().getName() + (\" UPDATED &gt; \"+ i));\n        }\n    }\n\n    public void getJ() {\n        System.out.println(fmt() + \" &gt; \" + Thread.currentThread().getName() + (\" READ &gt; \"+ j));\n    }\n}\n</code></pre>\n\n<p>Here,</p>\n\n<ul>\n<li>Thread-A calls updateI() method and acquires the lock. </li>\n<li>At the same time Thread-B is calling getJ() method. </li>\n<li><strong>Will it be block Thread-B \nas class level lock is already acquired by Thread-A?</strong> Or it will allow\nto access both methods simultaneously?</li>\n</ul>\n\n<p>Thanks....</p>\n"},{"tags":["java","lotus-domino","jvm-arguments"],"comments":[{"owner":{"account_id":9955,"reputation":2840,"user_id":18603,"accept_rate":76,"display_name":"Scott Leis"},"score":0,"creation_date":1635832103,"post_id":69795857,"comment_id":123391080,"body_markdown":"Can you just stop the agent manager (by running the `tell amgr quit` command on the server), then start it again when you&#39;ve gathered enough logs? I&#39;m fairly sure the agent manager only handles scheduled agents, and it may be OK if none of those run for an hour or so, depending on the environment.","body":"Can you just stop the agent manager (by running the <code>tell amgr quit</code> command on the server), then start it again when you&#39;ve gathered enough logs? I&#39;m fairly sure the agent manager only handles scheduled agents, and it may be OK if none of those run for an hour or so, depending on the environment."},{"owner":{"account_id":12936459,"reputation":11,"user_id":9353618,"display_name":"Bastian Lotsch"},"score":0,"creation_date":1635849369,"post_id":69795857,"comment_id":123396629,"body_markdown":"Yeah, that&#39;s what we are doing right now. But I&#39;d hoped we could proceed in a more elegant way.","body":"Yeah, that&#39;s what we are doing right now. But I&#39;d hoped we could proceed in a more elegant way."}],"owner":{"account_id":12936459,"reputation":11,"user_id":9353618,"display_name":"Bastian Lotsch"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":185,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1635763874,"creation_date":1635763874,"question_id":69795857,"body_markdown":"For troubleshooting reasons I need to gain insight into what the garbage collector of the JVM the https tasks uses does. For this I can pass the required arguments (-verbose:gc and -Xverbosegclog:%some_path%) via an options file that is setup by the notes.ini setting JAVAOPTIONSFILE=%file%.\r\n\r\nThis works fine. However those options are also picked up by the JVM(s) started seperatedly by the amgr task. So different JVMs log into the same file which makes the analysis rather useless.\r\n\r\nIs there a way to pass the required arguments to **only** the JVM used by the http task?","title":"Domino server: Passing JVM options to http task only","body":"<p>For troubleshooting reasons I need to gain insight into what the garbage collector of the JVM the https tasks uses does. For this I can pass the required arguments (-verbose:gc and -Xverbosegclog:%some_path%) via an options file that is setup by the notes.ini setting JAVAOPTIONSFILE=%file%.</p>\n<p>This works fine. However those options are also picked up by the JVM(s) started seperatedly by the amgr task. So different JVMs log into the same file which makes the analysis rather useless.</p>\n<p>Is there a way to pass the required arguments to <strong>only</strong> the JVM used by the http task?</p>\n"},{"tags":["java","spring-mvc","jsp","spring-data-jpa","spring-data"],"answers":[{"tags":[],"owner":{"account_id":16257655,"reputation":379,"user_id":11739931,"display_name":"retoen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635755657,"creation_date":1635755657,"answer_id":69794387,"question_id":69794009,"body_markdown":"You should use another identifier for the var attribute, as commentsList is already used by the list. Example:\r\n    \r\n   \r\n\r\n    &lt;div&gt;\r\n        &lt;form class=&quot;form-horizontal&quot; action=&quot;do_comment&quot; method=&quot;POST&quot;&gt;\r\n            &lt;textarea rows=&quot;2&quot; class=&quot;comment-area&quot;&gt;&lt;/textarea&gt;\r\n            &lt;input type=&quot;submit&quot; value=&quot;Comment&quot;/&gt;\r\n        &lt;/form&gt;\r\n        &lt;c:forEach items=&quot;${commentsList}&quot; var=&quot;commentObject&quot;&gt;\r\n            &lt;div&gt;\r\n               &lt;p&gt;${commentObject.comment}&lt;/p&gt;&lt;hr&gt;&lt;br&gt;\r\n            &lt;/div&gt;\r\n        &lt;/c:forEach&gt;\r\n    &lt;/div&gt;","title":"List traversal is not working in jsp but works fine when I just pass a single element","body":"<p>You should use another identifier for the var attribute, as commentsList is already used by the list. Example:</p>\n<pre><code>&lt;div&gt;\n    &lt;form class=&quot;form-horizontal&quot; action=&quot;do_comment&quot; method=&quot;POST&quot;&gt;\n        &lt;textarea rows=&quot;2&quot; class=&quot;comment-area&quot;&gt;&lt;/textarea&gt;\n        &lt;input type=&quot;submit&quot; value=&quot;Comment&quot;/&gt;\n    &lt;/form&gt;\n    &lt;c:forEach items=&quot;${commentsList}&quot; var=&quot;commentObject&quot;&gt;\n        &lt;div&gt;\n           &lt;p&gt;${commentObject.comment}&lt;/p&gt;&lt;hr&gt;&lt;br&gt;\n        &lt;/div&gt;\n    &lt;/c:forEach&gt;\n&lt;/div&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23203198,"reputation":11,"user_id":17297769,"display_name":"Vinay Raj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635763843,"creation_date":1635763843,"answer_id":69795852,"question_id":69794009,"body_markdown":"I added this line and it worked `&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot;%&gt;`","title":"List traversal is not working in jsp but works fine when I just pass a single element","body":"<p>I added this line and it worked <code>&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot;%&gt;</code></p>\n"}],"owner":{"account_id":23203198,"reputation":11,"user_id":17297769,"display_name":"Vinay Raj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1635763843,"creation_date":1635753251,"question_id":69794009,"body_markdown":"# Controller code #\r\n```\r\n\t@RequestMapping(&quot;post/{id}&quot;)\r\n\tpublic ModelAndView post(ModelAndView model, @PathVariable Integer id) throws IOException {\r\n\r\n\t\tList&lt;Posts&gt; post = postDao.findPostById(id);\r\n\t\tList&lt;Comments&gt; comments = new ArrayList&lt;Comments&gt;();\r\n\t\tcomments = (List&lt;Comments&gt;) commentsRepository.findAll();\r\n//\t\tList&lt;Comments&gt; comments = postDao.findAll(id);\r\n\t\tmodel.addObject(&quot;post&quot;, post.get(0));\r\n\t\tSystem.out.println(comments);\r\n\t\tmodel.addObject(&quot;commentsList&quot;,comments);\r\n\t\tmodel.setViewName(&quot;Post&quot;);\r\n\r\n\t\treturn model;\r\n\t}\r\n```\r\n# JSP code #\r\n```\r\n&lt;div&gt;\r\n\t\t\t&lt;form class=&quot;form-horizontal&quot; action=&quot;do_comment&quot; method=&quot;POST&quot;&gt;\r\n\t\t\t\t&lt;textarea rows=&quot;2&quot; class=&quot;comment-area&quot;&gt;&lt;/textarea&gt;\r\n\t\t\t\t&lt;input type=&quot;submit&quot; value=&quot;Comment&quot;/&gt;\r\n\t\t\t&lt;/form&gt;\r\n \t\t\t&lt;c:forEach items=&quot;${commentsList}&quot; var=&quot;commentsList&quot;&gt;\r\n \t\t\t&lt;div&gt;\r\n\t\t\t\t&lt;p&gt;${commentsList.comment}&lt;/p&gt;&lt;hr&gt;&lt;br&gt;\r\n\t\t\t\t&lt;/div&gt;\r\n\t\t\t&lt;/c:forEach&gt;\r\n\t\t&lt;/div&gt;\r\n```\r\n# Comments Class #\r\n```\r\n@Entity\r\npublic class Comments {\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.AUTO)\r\n\tprivate int commentId;\r\n\tprivate int postId;\r\n\tprivate int userId;\r\n\tprivate String comment;\r\n...\r\n```\r\nIn Console it says **NumberFormatException** but I am not parsing anything.\r\n# Console #\r\n```\r\nServlet.service() for servlet [jsp] threw exception\r\n    \r\n    java.lang.NumberFormatException: For input string: &quot;comment&quot;\r\n    \tat java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]\r\n    \tat java.base/java.lang.Integer.parseInt(Integer.java:660) ~[na:na]\r\n    \tat java.base/java.lang.Integer.parseInt(Integer.java:778) ~[na:na]\r\n    \tat javax.el.ListELResolver.coerce(ListELResolver.java:148) ~[tomcat-embed-el-9.0.54.jar:3.0.FR]\r\n    \tat javax.el.ListELResolver.getValue(ListELResolver.java:65) ~[tomcat-embed-el-9.0.54.jar:3.0.FR]\r\n    \tat org.apache.jasper.el.JasperELResolver.getValue(JasperELResolver.java:124) ~[tomcat-jasper-9.0.53.jar:9.0.53]\r\n    \tat org.apache.el.parser.AstValue.getValue(AstValue.java:168) ~[tomcat-embed-el-9.0.54.jar:9.0.54]\r\n    \tat org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189) ~[tomcat-embed-el-9.0.54.jar:9.0.54]\r\n    \tat org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:692) ~[tomcat-jasper-9.0.53.jar:9.0.53]\r\n    \tat org.apache.jsp.WEB_002dINF.views.jsp.Post_jsp._jspService(Post_jsp.java:425) ~[na:na]\r\n    \tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) ~[tomcat-jasper-9.0.53.jar:9.0.53]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.54.jar:4.0.FR]\r\n    \tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:466) ~[tomcat-jasper-9.0.53.jar:9.0.53]\r\n    \tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:379) ~[tomcat-jasper-9.0.53.jar:9.0.53]\r\n    \tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:327) ~[tomcat-jasper-9.0.53.jar:9.0.53]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.54.jar:4.0.FR]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113) ~[spring-web-5.3.12.jar:5.3.12]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113) ~[spring-web-5.3.12.jar:5.3.12]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113) ~[spring-web-5.3.12.jar:5.3.12]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:711) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:459) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:385) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:313) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequestDispatcher.forward(HeaderWriterFilter.java:171) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:171) ~[spring-webmvc-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:316) ~[spring-webmvc-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1400) ~[spring-webmvc-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1145) ~[spring-webmvc-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1084) ~[spring-webmvc-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.12.jar:5.3.12]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[tomcat-embed-core-9.0.54.jar:4.0.FR]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.12.jar:5.3.12]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.54.jar:4.0.FR]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358) ~[spring-web-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271) ~[spring-web-5.3.12.jar:5.3.12]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.12.jar:5.3.12]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.12.jar:5.3.12]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.12.jar:5.3.12]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1722) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]\r\n    \r\n```\r\nBut the same code works when I pass just one element insead of whole list, like this :\r\n```\r\n\t@RequestMapping(&quot;post/{id}&quot;)\r\n\tpublic ModelAndView post(ModelAndView model, @PathVariable Integer id) throws IOException {\r\n\r\n\t\tList&lt;Posts&gt; post = postDao.findPostById(id);\r\n\t\tList&lt;Comments&gt; comments = new ArrayList&lt;Comments&gt;();\r\n\t\tcomments = (List&lt;Comments&gt;) commentsRepository.findAll();\r\n//\t\tList&lt;Comments&gt; comments = postDao.findAll(id);\r\n\t\tmodel.addObject(&quot;post&quot;, post.get(0));\r\n\t\tSystem.out.println(comments);\r\n\t\tmodel.addObject(&quot;commentsList&quot;,comments.get(0));\r\n\t\tmodel.setViewName(&quot;Post&quot;);\r\n\r\n\t\treturn model;\r\n\t}\r\n```\r\n# comment DB #\r\n[Image of comment database][1]\r\n\r\nWhat should i change here so that this works for the entire list of comments is traversed and displayed? \r\nThanks in advance\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7rM9u.png","title":"List traversal is not working in jsp but works fine when I just pass a single element","body":"<h1>Controller code</h1>\n<pre><code>    @RequestMapping(&quot;post/{id}&quot;)\n    public ModelAndView post(ModelAndView model, @PathVariable Integer id) throws IOException {\n\n        List&lt;Posts&gt; post = postDao.findPostById(id);\n        List&lt;Comments&gt; comments = new ArrayList&lt;Comments&gt;();\n        comments = (List&lt;Comments&gt;) commentsRepository.findAll();\n//      List&lt;Comments&gt; comments = postDao.findAll(id);\n        model.addObject(&quot;post&quot;, post.get(0));\n        System.out.println(comments);\n        model.addObject(&quot;commentsList&quot;,comments);\n        model.setViewName(&quot;Post&quot;);\n\n        return model;\n    }\n</code></pre>\n<h1>JSP code</h1>\n<pre><code>&lt;div&gt;\n            &lt;form class=&quot;form-horizontal&quot; action=&quot;do_comment&quot; method=&quot;POST&quot;&gt;\n                &lt;textarea rows=&quot;2&quot; class=&quot;comment-area&quot;&gt;&lt;/textarea&gt;\n                &lt;input type=&quot;submit&quot; value=&quot;Comment&quot;/&gt;\n            &lt;/form&gt;\n            &lt;c:forEach items=&quot;${commentsList}&quot; var=&quot;commentsList&quot;&gt;\n            &lt;div&gt;\n                &lt;p&gt;${commentsList.comment}&lt;/p&gt;&lt;hr&gt;&lt;br&gt;\n                &lt;/div&gt;\n            &lt;/c:forEach&gt;\n        &lt;/div&gt;\n</code></pre>\n<h1>Comments Class</h1>\n<pre><code>@Entity\npublic class Comments {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private int commentId;\n    private int postId;\n    private int userId;\n    private String comment;\n...\n</code></pre>\n<p>In Console it says <strong>NumberFormatException</strong> but I am not parsing anything.</p>\n<h1>Console</h1>\n<pre><code>Servlet.service() for servlet [jsp] threw exception\n    \n    java.lang.NumberFormatException: For input string: &quot;comment&quot;\n        at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67) ~[na:na]\n        at java.base/java.lang.Integer.parseInt(Integer.java:660) ~[na:na]\n        at java.base/java.lang.Integer.parseInt(Integer.java:778) ~[na:na]\n        at javax.el.ListELResolver.coerce(ListELResolver.java:148) ~[tomcat-embed-el-9.0.54.jar:3.0.FR]\n        at javax.el.ListELResolver.getValue(ListELResolver.java:65) ~[tomcat-embed-el-9.0.54.jar:3.0.FR]\n        at org.apache.jasper.el.JasperELResolver.getValue(JasperELResolver.java:124) ~[tomcat-jasper-9.0.53.jar:9.0.53]\n        at org.apache.el.parser.AstValue.getValue(AstValue.java:168) ~[tomcat-embed-el-9.0.54.jar:9.0.54]\n        at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189) ~[tomcat-embed-el-9.0.54.jar:9.0.54]\n        at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:692) ~[tomcat-jasper-9.0.53.jar:9.0.53]\n        at org.apache.jsp.WEB_002dINF.views.jsp.Post_jsp._jspService(Post_jsp.java:425) ~[na:na]\n        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) ~[tomcat-jasper-9.0.53.jar:9.0.53]\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.54.jar:4.0.FR]\n        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:466) ~[tomcat-jasper-9.0.53.jar:9.0.53]\n        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:379) ~[tomcat-jasper-9.0.53.jar:9.0.53]\n        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:327) ~[tomcat-jasper-9.0.53.jar:9.0.53]\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.54.jar:4.0.FR]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.54.jar:9.0.54]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113) ~[spring-web-5.3.12.jar:5.3.12]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113) ~[spring-web-5.3.12.jar:5.3.12]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:113) ~[spring-web-5.3.12.jar:5.3.12]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:711) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:459) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:385) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:313) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequestDispatcher.forward(HeaderWriterFilter.java:171) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:171) ~[spring-webmvc-5.3.12.jar:5.3.12]\n        at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:316) ~[spring-webmvc-5.3.12.jar:5.3.12]\n        at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1400) ~[spring-webmvc-5.3.12.jar:5.3.12]\n        at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1145) ~[spring-webmvc-5.3.12.jar:5.3.12]\n        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1084) ~[spring-webmvc-5.3.12.jar:5.3.12]\n        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.12.jar:5.3.12]\n        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.12.jar:5.3.12]\n        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.12.jar:5.3.12]\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[tomcat-embed-core-9.0.54.jar:4.0.FR]\n        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.12.jar:5.3.12]\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.54.jar:4.0.FR]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.54.jar:9.0.54]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.12.jar:5.3.12]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.12.jar:5.3.12]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.12.jar:5.3.12]\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.5.3.jar:5.5.3]\n        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358) ~[spring-web-5.3.12.jar:5.3.12]\n        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271) ~[spring-web-5.3.12.jar:5.3.12]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.12.jar:5.3.12]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.12.jar:5.3.12]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.12.jar:5.3.12]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.12.jar:5.3.12]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.12.jar:5.3.12]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.12.jar:5.3.12]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1722) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n        at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]\n    \n</code></pre>\n<p>But the same code works when I pass just one element insead of whole list, like this :</p>\n<pre><code>    @RequestMapping(&quot;post/{id}&quot;)\n    public ModelAndView post(ModelAndView model, @PathVariable Integer id) throws IOException {\n\n        List&lt;Posts&gt; post = postDao.findPostById(id);\n        List&lt;Comments&gt; comments = new ArrayList&lt;Comments&gt;();\n        comments = (List&lt;Comments&gt;) commentsRepository.findAll();\n//      List&lt;Comments&gt; comments = postDao.findAll(id);\n        model.addObject(&quot;post&quot;, post.get(0));\n        System.out.println(comments);\n        model.addObject(&quot;commentsList&quot;,comments.get(0));\n        model.setViewName(&quot;Post&quot;);\n\n        return model;\n    }\n</code></pre>\n<h1>comment DB</h1>\n<p><a href=\"https://i.stack.imgur.com/7rM9u.png\" rel=\"nofollow noreferrer\">Image of comment database</a></p>\n<p>What should i change here so that this works for the entire list of comments is traversed and displayed?\nThanks in advance</p>\n"},{"tags":["java","maven","runtime","pom.xml"],"comments":[{"owner":{"account_id":3763662,"reputation":7765,"user_id":3127812,"accept_rate":0,"display_name":"Sambit"},"score":0,"creation_date":1559843787,"post_id":56482739,"comment_id":99555901,"body_markdown":"Post the code so that SO members can help you.","body":"Post the code so that SO members can help you."},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":1,"creation_date":1559849070,"post_id":56482739,"comment_id":99558012,"body_markdown":"I would try resource filtering instead of reading the POM. Which information do you need?","body":"I would try resource filtering instead of reading the POM. Which information do you need?"},{"owner":{"account_id":3801209,"reputation":283,"user_id":3154817,"accept_rate":50,"display_name":"raedma"},"score":0,"creation_date":1559890996,"post_id":56482739,"comment_id":99567907,"body_markdown":"Currently I mainly want to retrieve the artifactID and version of my tool. But later I also want to access the dependency versions","body":"Currently I mainly want to retrieve the artifactID and version of my tool. But later I also want to access the dependency versions"}],"answers":[{"tags":[],"owner":{"account_id":1709870,"reputation":4053,"user_id":1568138,"display_name":"Daniel"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1559895337,"creation_date":1559894086,"answer_id":56490184,"question_id":56482739,"body_markdown":"The problem is that\r\n\r\n    Model model = reader.read(new FileReader(&quot;pom.xml&quot;));\r\n\r\ntries to read the POM from the directory where your program is executed. Normally, `pom.xml` won&#39;t get copied to `target`, but it is embedded in the resulting artifact. You can override and force Maven to copy the POM to the `target` directory if you want to (for your own project), but it won&#39;t help you for other Maven artifacts.\r\n\r\nMost of the time, a Maven artifact will have the POM coordinates included in the JAR/WAR/EAR output. If you unpack such a file, you&#39;ll notice that there are two files stored under `META-INF/maven/&lt;groupId&gt;/&lt;artifactId&gt;`: `pom.xml` and `pom.properties` where the latter is far easier to parse than `pom.xml` but it doesn&#39;t include the dependencies. \r\n\r\nParsing the embedded `pom.xml` from the classpath (and not from disk) should work better for you, especially if you always run your program with `java -jar target\\mytool.jar`. In your program, try this:\r\n\r\n    try (InputStream is = MavenModelExample.class.getClassLoader().getResourceAsStream(&quot;META-INF/maven/&lt;your groupId&gt;/&lt;your artifactId&gt;/pom.xml&quot;)) {\r\n    \t\t\tMavenXpp3Reader reader = new MavenXpp3Reader();\r\n    \t\t\tModel model = reader.read(is);\r\n    \t\t\tSystem.out.println(model.getId());\r\n    \t        System.out.println(model.getGroupId());\r\n    \t        System.out.println(model.getArtifactId());\r\n    \t        System.out.println(model.getVersion());\r\n\r\n                // If you want to get fancy:\r\n                model.getDependencies().stream().forEach(System.out::println);  \r\n\r\n    \t\t}\r\n    \t\tcatch (IOException e) {\r\n    \t\t\t// Do whatever you need to do if the operation fails.\r\n    \t\t}\r\n\r\n\r\n`&lt;your groupId&gt;` and `&lt;your artifactId&gt;` should be fairly static, but if you do relocate your artifact&#39;s coordinates, then you need to change this in your code as well.","title":"Maven: Access POM at runtime - How to get &#39;pom.xml&#39; available from anywhere?","body":"<p>The problem is that</p>\n\n<pre><code>Model model = reader.read(new FileReader(\"pom.xml\"));\n</code></pre>\n\n<p>tries to read the POM from the directory where your program is executed. Normally, <code>pom.xml</code> won't get copied to <code>target</code>, but it is embedded in the resulting artifact. You can override and force Maven to copy the POM to the <code>target</code> directory if you want to (for your own project), but it won't help you for other Maven artifacts.</p>\n\n<p>Most of the time, a Maven artifact will have the POM coordinates included in the JAR/WAR/EAR output. If you unpack such a file, you'll notice that there are two files stored under <code>META-INF/maven/&lt;groupId&gt;/&lt;artifactId&gt;</code>: <code>pom.xml</code> and <code>pom.properties</code> where the latter is far easier to parse than <code>pom.xml</code> but it doesn't include the dependencies. </p>\n\n<p>Parsing the embedded <code>pom.xml</code> from the classpath (and not from disk) should work better for you, especially if you always run your program with <code>java -jar target\\mytool.jar</code>. In your program, try this:</p>\n\n<pre><code>try (InputStream is = MavenModelExample.class.getClassLoader().getResourceAsStream(\"META-INF/maven/&lt;your groupId&gt;/&lt;your artifactId&gt;/pom.xml\")) {\n            MavenXpp3Reader reader = new MavenXpp3Reader();\n            Model model = reader.read(is);\n            System.out.println(model.getId());\n            System.out.println(model.getGroupId());\n            System.out.println(model.getArtifactId());\n            System.out.println(model.getVersion());\n\n            // If you want to get fancy:\n            model.getDependencies().stream().forEach(System.out::println);  \n\n        }\n        catch (IOException e) {\n            // Do whatever you need to do if the operation fails.\n        }\n</code></pre>\n\n<p><code>&lt;your groupId&gt;</code> and <code>&lt;your artifactId&gt;</code> should be fairly static, but if you do relocate your artifact's coordinates, then you need to change this in your code as well.</p>\n"},{"tags":[],"owner":{"account_id":8379001,"reputation":73,"user_id":6291622,"display_name":"H.BENIZID"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635763693,"creation_date":1635515898,"answer_id":69770200,"question_id":56482739,"body_markdown":"problem is that :\r\n \r\n    read(new FileReader(&quot;pom.xml&quot;)) \r\n\r\nworks fine when you start your application from STS or else, but when you build your application as JAR the path of the pom.xml file change to :\r\n\r\n **META- INF/maven/${groupId}/${artifactId}/pom.xml**.\r\n \r\nfor that, try this code :\r\n\r\n    MavenXpp3Reader mavenXpp3Reader = new MavenXpp3Reader();\r\n    Model model;\r\n    if ((new File(&quot;pom.xml&quot;)).exists()) {\r\n\t  model = mavenXpp3Reader.read(new FileReader(&quot;pom.xml&quot;));\r\n    }\r\n    else {\r\n     // Packaged artifacts contain a META- INF/maven/${groupId}/${artifactId}/pom.properties\r\n      model = mavenXpp3Reader.read(new \r\n      InputStreamReader(Application.class.getResourceAsStream(\r\n        &quot;/META-INF/maven/groupId/artifactId/pom.xml&quot;)));\r\n    }","title":"Maven: Access POM at runtime - How to get &#39;pom.xml&#39; available from anywhere?","body":"<p>problem is that :</p>\n<pre><code>read(new FileReader(&quot;pom.xml&quot;)) \n</code></pre>\n<p>works fine when you start your application from STS or else, but when you build your application as JAR the path of the pom.xml file change to :</p>\n<p><strong>META- INF/maven/${groupId}/${artifactId}/pom.xml</strong>.</p>\n<p>for that, try this code :</p>\n<pre><code>MavenXpp3Reader mavenXpp3Reader = new MavenXpp3Reader();\nModel model;\nif ((new File(&quot;pom.xml&quot;)).exists()) {\n  model = mavenXpp3Reader.read(new FileReader(&quot;pom.xml&quot;));\n}\nelse {\n // Packaged artifacts contain a META- INF/maven/${groupId}/${artifactId}/pom.properties\n  model = mavenXpp3Reader.read(new \n  InputStreamReader(Application.class.getResourceAsStream(\n    &quot;/META-INF/maven/groupId/artifactId/pom.xml&quot;)));\n}\n</code></pre>\n"}],"owner":{"account_id":3801209,"reputation":283,"user_id":3154817,"accept_rate":50,"display_name":"raedma"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2489,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":56490184,"answer_count":2,"score":3,"last_activity_date":1635763693,"creation_date":1559843479,"question_id":56482739,"body_markdown":"I want to access some information from the `pom.xml` to display in a Info dialog. So I googled and found [this post][1]:\r\n\r\n    public class MavenModelExample {\r\n        public static void main(String[] args) throws IOException, XmlPullParserException {\r\n            MavenXpp3Reader reader = new MavenXpp3Reader();\r\n            Model model = reader.read(new FileReader(&quot;pom.xml&quot;));\r\n            System.out.println(model.getId());\r\n            System.out.println(model.getGroupId());\r\n            System.out.println(model.getArtifactId());\r\n            System.out.println(model.getVersion());\r\n        }\r\n    }\r\n\r\nI implemented it in my tool, added\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\r\n      &lt;artifactId&gt;maven-model&lt;/artifactId&gt;\r\n      &lt;version&gt;3.3.9&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nto my pom and was happy that everything ran as expected when I run the tool from the project root directory with `java -jar target\\mytool.jar`.\r\n\r\nWhen I move to any other directory, e.g. directly into `target` and execute my tool with `java -jar mytool.jar`, I get:\r\n\r\n    java.io.FileNotFoundException: pom.xml (The system cannot find the specified file)\r\n            at java.base/java.io.FileInputStream.open0(Native Method)\r\n            at java.base/java.io.FileInputStream.open(FileInputStream.java:213)\r\n            at java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:155)\r\n            at java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:110)\r\n            at java.base/java.io.FileReader.&lt;init&gt;(FileReader.java:60)\r\n\r\nWhich is kind of comprehensible. How should the code know, where the `pom.xml` is located, as it is not a resource. Is there any way to work around that?\r\n\r\nIn the mean time I use the approach from [this thread][2] to obtain the version and artifactID.\r\n\r\n\r\n  [1]: https://riptutorial.com/maven/example/30104/reading-a-pom-xml-at-runtime-using-maven-model-plugin\r\n  [2]: https://stackoverflow.com/a/24749717/3154817","title":"Maven: Access POM at runtime - How to get &#39;pom.xml&#39; available from anywhere?","body":"<p>I want to access some information from the <code>pom.xml</code> to display in a Info dialog. So I googled and found <a href=\"https://riptutorial.com/maven/example/30104/reading-a-pom-xml-at-runtime-using-maven-model-plugin\" rel=\"nofollow noreferrer\">this post</a>:</p>\n\n<pre><code>public class MavenModelExample {\n    public static void main(String[] args) throws IOException, XmlPullParserException {\n        MavenXpp3Reader reader = new MavenXpp3Reader();\n        Model model = reader.read(new FileReader(\"pom.xml\"));\n        System.out.println(model.getId());\n        System.out.println(model.getGroupId());\n        System.out.println(model.getArtifactId());\n        System.out.println(model.getVersion());\n    }\n}\n</code></pre>\n\n<p>I implemented it in my tool, added</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-model&lt;/artifactId&gt;\n  &lt;version&gt;3.3.9&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>to my pom and was happy that everything ran as expected when I run the tool from the project root directory with <code>java -jar target\\mytool.jar</code>.</p>\n\n<p>When I move to any other directory, e.g. directly into <code>target</code> and execute my tool with <code>java -jar mytool.jar</code>, I get:</p>\n\n<pre><code>java.io.FileNotFoundException: pom.xml (The system cannot find the specified file)\n        at java.base/java.io.FileInputStream.open0(Native Method)\n        at java.base/java.io.FileInputStream.open(FileInputStream.java:213)\n        at java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:155)\n        at java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:110)\n        at java.base/java.io.FileReader.&lt;init&gt;(FileReader.java:60)\n</code></pre>\n\n<p>Which is kind of comprehensible. How should the code know, where the <code>pom.xml</code> is located, as it is not a resource. Is there any way to work around that?</p>\n\n<p>In the mean time I use the approach from <a href=\"https://stackoverflow.com/a/24749717/3154817\">this thread</a> to obtain the version and artifactID.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":365916,"reputation":11573,"user_id":711129,"accept_rate":97,"display_name":"Hidde"},"score":0,"creation_date":1337207429,"post_id":10627657,"comment_id":13774722,"body_markdown":"Java runs in a virtual machine. JavaScript is executed straight from the code. Try timing either larger programs (smaller overhead) or only the execution time (no virtual machine lag).","body":"Java runs in a virtual machine. JavaScript is executed straight from the code. Try timing either larger programs (smaller overhead) or only the execution time (no virtual machine lag)."},{"owner":{"account_id":890308,"reputation":47359,"user_id":928711,"accept_rate":60,"display_name":"Guillaume Polet"},"score":2,"creation_date":1337207440,"post_id":10627657,"comment_id":13774728,"body_markdown":"You may want to read about Java Quick Starter: http://www.java.com/en/download/help/quickstarter.xml and http://www.javalobby.org/java/forums/t102150.html","body":"You may want to read about Java Quick Starter: <a href=\"http://www.java.com/en/download/help/quickstarter.xml\" rel=\"nofollow noreferrer\">java.com/en/download/help/quickstarter.xml</a> and <a href=\"http://www.javalobby.org/java/forums/t102150.html\" rel=\"nofollow noreferrer\">javalobby.org/java/forums/t102150.html</a>"},{"owner":{"account_id":11089,"reputation":400030,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"score":1,"creation_date":1337207869,"post_id":10627657,"comment_id":13774829,"body_markdown":"Java *isn&#39;t* suitable for writing command-line scripts. There are many other languages better suited it.  Use the appropriate tool for the job.","body":"Java <i>isn&#39;t</i> suitable for writing command-line scripts. There are many other languages better suited it.  Use the appropriate tool for the job."},{"owner":{"account_id":91497,"reputation":19283,"user_id":251162,"accept_rate":80,"display_name":"Aaron Yodaiken"},"score":0,"creation_date":1337207989,"post_id":10627657,"comment_id":13774857,"body_markdown":"@GuillaumePolet Trying to write code primarily for OSX/Unix, but thanks.","body":"@GuillaumePolet Trying to write code primarily for OSX/Unix, but thanks."},{"owner":{"account_id":91497,"reputation":19283,"user_id":251162,"accept_rate":80,"display_name":"Aaron Yodaiken"},"score":0,"creation_date":1337208059,"post_id":10627657,"comment_id":13774874,"body_markdown":"@skaffman Unfortunately, there are many libraries for which the best interface is Java, e.g. ANTLR (I know that there are C-target options, but it is not kept in sync with the code and is sort of Java-in-C style code.)","body":"@skaffman Unfortunately, there are many libraries for which the best interface is Java, e.g. ANTLR (I know that there are C-target options, but it is not kept in sync with the code and is sort of Java-in-C style code.)"},{"owner":{"account_id":91497,"reputation":19283,"user_id":251162,"accept_rate":80,"display_name":"Aaron Yodaiken"},"score":0,"creation_date":1337208152,"post_id":10627657,"comment_id":13774888,"body_markdown":"@HIdde I&#39;m not trying to say that Java has worse performance than JavaScript, and I&#39;m aware that it&#39;s in a VM. I&#39;m trying to find a way to get better _startup_ performance (perhaps by keeping a VM around or something).","body":"@HIdde I&#39;m not trying to say that Java has worse performance than JavaScript, and I&#39;m aware that it&#39;s in a VM. I&#39;m trying to find a way to get better <i>startup</i> performance (perhaps by keeping a VM around or something)."},{"owner":{"account_id":265988,"reputation":13467,"user_id":553308,"display_name":"Andrew T Finnell"},"score":0,"creation_date":1337208692,"post_id":10627657,"comment_id":13774978,"body_markdown":"@luxun Have you looked into Mono? It starts up for me in 1/4 the time of java on my OS X machine.","body":"@luxun Have you looked into Mono? It starts up for me in 1/4 the time of java on my OS X machine."},{"owner":{"account_id":265988,"reputation":13467,"user_id":553308,"display_name":"Andrew T Finnell"},"score":0,"creation_date":1337209178,"post_id":10627657,"comment_id":13775052,"body_markdown":"@luxun I read the timings incorrectly. Mono starts in 1/10 the time of Java in trival cases for me.","body":"@luxun I read the timings incorrectly. Mono starts in 1/10 the time of Java in trival cases for me."},{"owner":{"account_id":91497,"reputation":19283,"user_id":251162,"accept_rate":80,"display_name":"Aaron Yodaiken"},"score":0,"creation_date":1337210672,"post_id":10627657,"comment_id":13775318,"body_markdown":"I (unfortunately in this regard) need to use Java for this project, I believe.","body":"I (unfortunately in this regard) need to use Java for this project, I believe."},{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":0,"creation_date":1351951066,"post_id":10627657,"comment_id":17986910,"body_markdown":"possible duplicate of http://stackoverflow.com/questions/4056280/anyway-to-boost-java-jvm-startup-speed","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/4056280/anyway-to-boost-java-jvm-startup-speed\" title=\"anyway to boost java jvm startup speed\">stackoverflow.com/questions/4056280/&hellip;</a>"},{"owner":{"account_id":1041926,"reputation":26177,"user_id":1047788,"accept_rate":81,"display_name":"user7610"},"score":0,"creation_date":1416951823,"post_id":10627657,"comment_id":42772609,"body_markdown":"possible duplicate of [How to speed up Java VM (JVM) startup time?](http://stackoverflow.com/questions/1491325/how-to-speed-up-java-vm-jvm-startup-time)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/1491325/how-to-speed-up-java-vm-jvm-startup-time\">How to speed up Java VM (JVM) startup time?</a>"}],"answers":[{"tags":[],"owner":{"account_id":276700,"reputation":993,"user_id":570291,"accept_rate":86,"display_name":"Drizzt321"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1337207469,"creation_date":1337207469,"answer_id":10627686,"question_id":10627657,"body_markdown":"Not likely, only thing you might be able to try is a different implementation of the JVM, but that probably won&#39;t change. Most Java apps are (relatively) long lived though and possibly interactive, which means the JVM startup time becomes lost in the noise of normal uses.","title":"make java startup faster","body":"<p>Not likely, only thing you might be able to try is a different implementation of the JVM, but that probably won't change. Most Java apps are (relatively) long lived though and possibly interactive, which means the JVM startup time becomes lost in the noise of normal uses.</p>\n"},{"tags":[],"owner":{"account_id":20470,"reputation":21695,"user_id":48933,"accept_rate":90,"display_name":"Neil Coffey"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1337208575,"creation_date":1337207822,"answer_id":10627741,"question_id":10627657,"body_markdown":"Have you actually tried timing a Java command-line app called repeatedly, though? I would expect after the first incarnation for the start-up time to be alleviated somewhat by the library classes being in the file system cache.\r\n\r\nThat said, yes, the Java platform is not one of the simplest and in any case you&#39;re not going to compete with a small native executable.\r\n\r\nEdit: as you say that the timings above are for &quot;warmed up&quot; calls, then a possible workaround could be:\r\n\r\n- write the gubbins of your commands in Java\r\n- write a simple local continually running &quot;server&quot; that takes commands and passes them to the relevant Java routines\r\n- write a simple native command-line wrapper (or write it in something that&#39;s fast to start up) whose sole raison d&#39;&#234;tre is to pass commands on to the Java server and spit out the result.\r\n\r\nThis ain&#39;t nice, but it could allow you to write the gubbins of your routines in Java (which I assume is essentially what you want) while still keeping the command line model of invocation.\r\n","title":"make java startup faster","body":"<p>Have you actually tried timing a Java command-line app called repeatedly, though? I would expect after the first incarnation for the start-up time to be alleviated somewhat by the library classes being in the file system cache.</p>\n\n<p>That said, yes, the Java platform is not one of the simplest and in any case you're not going to compete with a small native executable.</p>\n\n<p>Edit: as you say that the timings above are for \"warmed up\" calls, then a possible workaround could be:</p>\n\n<ul>\n<li>write the gubbins of your commands in Java</li>\n<li>write a simple local continually running \"server\" that takes commands and passes them to the relevant Java routines</li>\n<li>write a simple native command-line wrapper (or write it in something that's fast to start up) whose sole raison d'être is to pass commands on to the Java server and spit out the result.</li>\n</ul>\n\n<p>This ain't nice, but it could allow you to write the gubbins of your routines in Java (which I assume is essentially what you want) while still keeping the command line model of invocation.</p>\n"},{"tags":[],"owner":{"account_id":264830,"reputation":70811,"user_id":551406,"accept_rate":95,"display_name":"Michael Berry"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1337208715,"creation_date":1337208715,"answer_id":10627853,"question_id":10627657,"body_markdown":"As others have said, the plain answer is just &quot;not really&quot;. You can possibly make minor performance improvements, but you&#39;re never going to get away from the fact that the VM is going to take a while to start up and get going.\r\n\r\nMake sure you haven&#39;t got the server VM selected for apps like this - that&#39;s one thing that really will increase the start up time.\r\n\r\nThe only real way round it is to compile Java to native code, which you *can* do with GCJ - so if you must write these apps in Java and you must have them faster, that might be a route to look down. Bear in mind though it&#39;s not that up-to-date and maintenance on it largely seems to be dying out too.","title":"make java startup faster","body":"<p>As others have said, the plain answer is just \"not really\". You can possibly make minor performance improvements, but you're never going to get away from the fact that the VM is going to take a while to start up and get going.</p>\n\n<p>Make sure you haven't got the server VM selected for apps like this - that's one thing that really will increase the start up time.</p>\n\n<p>The only real way round it is to compile Java to native code, which you <em>can</em> do with GCJ - so if you must write these apps in Java and you must have them faster, that might be a route to look down. Bear in mind though it's not that up-to-date and maintenance on it largely seems to be dying out too.</p>\n"},{"tags":[],"owner":{"account_id":787215,"reputation":5511,"user_id":860522,"accept_rate":70,"display_name":"OneSolitaryNoob"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1364759636,"creation_date":1364759636,"answer_id":15733821,"question_id":10627657,"body_markdown":"Haven&#39;t tried it yet but might be worth looking at nailgun.    It will run your Java programs in the same JVM, so after &quot;warming up&quot; should be pretty fast.    A &quot;hello world&quot; example goes from taking 0.132s to taking 0.004s\r\n\r\n\r\nhttp://www.martiansoftware.com/nailgun/background.html","title":"make java startup faster","body":"<p>Haven't tried it yet but might be worth looking at nailgun.    It will run your Java programs in the same JVM, so after \"warming up\" should be pretty fast.    A \"hello world\" example goes from taking 0.132s to taking 0.004s</p>\n\n<p><a href=\"http://www.martiansoftware.com/nailgun/background.html\" rel=\"nofollow\">http://www.martiansoftware.com/nailgun/background.html</a></p>\n"},{"tags":[],"owner":{"account_id":1175385,"reputation":22626,"user_id":1151521,"accept_rate":77,"display_name":"Aleksandr Dubinsky"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635763128,"creation_date":1635763128,"answer_id":69795739,"question_id":10627657,"body_markdown":"You can get a small speed-up with class data sharing https://rmannibucau.metawerx.net/post/java-class-data-sharing-docker-startup\r\n\r\nA much bigger speedup should come from doing ahead-of-time compilation to a static binary using GraalVM native-image, although it&#39;s still tricky to use. A lot of libraries haven&#39;t been made compatible.\r\n","title":"make java startup faster","body":"<p>You can get a small speed-up with class data sharing <a href=\"https://rmannibucau.metawerx.net/post/java-class-data-sharing-docker-startup\" rel=\"nofollow noreferrer\">https://rmannibucau.metawerx.net/post/java-class-data-sharing-docker-startup</a></p>\n<p>A much bigger speedup should come from doing ahead-of-time compilation to a static binary using GraalVM native-image, although it's still tricky to use. A lot of libraries haven't been made compatible.</p>\n"}],"owner":{"account_id":91497,"reputation":19283,"user_id":251162,"accept_rate":80,"display_name":"Aaron Yodaiken"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2216,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":5,"score":2,"last_activity_date":1635763128,"creation_date":1337207289,"question_id":10627657,"body_markdown":"Is there some way to get reasonable (not noticeable) starting times for Java, thus making it suitable for writing command line scripts (not long-lived apps)?\r\n\r\n---\r\n\r\nFor a demonstation of the issue, take a simple Hello World program in Java and JavaScript (run w/ node.js) on my Macbook Pro:\r\n\r\n    $ time java T\r\n    Hello world!\r\n    \r\n    real\t0m0.352s\r\n    user\t0m0.301s\r\n    sys\t0m0.053s\r\n\r\n    $ time node T.js\r\n    Hello world!\r\n    \r\n    real\t0m0.098s\r\n    user\t0m0.079s\r\n    sys\t0m0.013s\r\n\r\nThere is a noticeable lag with the Java version, not so with Node. This makes command line tools seem unresponsive. (This is especially true if they rely on more than one class, unlike the simple `T.java` above.","title":"make java startup faster","body":"<p>Is there some way to get reasonable (not noticeable) starting times for Java, thus making it suitable for writing command line scripts (not long-lived apps)?</p>\n\n<hr>\n\n<p>For a demonstation of the issue, take a simple Hello World program in Java and JavaScript (run w/ node.js) on my Macbook Pro:</p>\n\n<pre><code>$ time java T\nHello world!\n\nreal    0m0.352s\nuser    0m0.301s\nsys 0m0.053s\n\n$ time node T.js\nHello world!\n\nreal    0m0.098s\nuser    0m0.079s\nsys 0m0.013s\n</code></pre>\n\n<p>There is a noticeable lag with the Java version, not so with Node. This makes command line tools seem unresponsive. (This is especially true if they rely on more than one class, unlike the simple <code>T.java</code> above.</p>\n"},{"tags":["java","collections","constructor","linked-list","copyonwritearraylist"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":4,"creation_date":1635673095,"post_id":69785568,"comment_id":123353838,"body_markdown":"What do you mean by &quot;doesn&#39;t work&quot;?","body":"What do you mean by &quot;doesn&#39;t work&quot;?"},{"owner":{"account_id":10595663,"reputation":4835,"user_id":7804477,"display_name":"Gautham M"},"score":0,"creation_date":1635673208,"post_id":69785568,"comment_id":123353862,"body_markdown":"`this.list = list;      this.list2 = list; .......   ` All those 7 lists refer to the same memory location.","body":"<code>this.list = list;      this.list2 = list; .......   </code> All those 7 lists refer to the same memory location."},{"owner":{"account_id":22275346,"reputation":5,"user_id":16515722,"display_name":"Bronskidev"},"score":0,"creation_date":1635673658,"post_id":69785568,"comment_id":123353966,"body_markdown":"please tell me how to properly clone them inside this constructor? I cannot understand this moment, so that each sheet has its own memory block","body":"please tell me how to properly clone them inside this constructor? I cannot understand this moment, so that each sheet has its own memory block"},{"owner":{"account_id":10595663,"reputation":4835,"user_id":7804477,"display_name":"Gautham M"},"score":1,"creation_date":1635674208,"post_id":69785568,"comment_id":123354048,"body_markdown":"@Bronskidev use `this.list2 = new ArrayList&lt;&gt;(list);` to initialize all those 7 lists","body":"@Bronskidev use <code>this.list2 = new ArrayList&lt;&gt;(list);</code> to initialize all those 7 lists"},{"owner":{"account_id":22275346,"reputation":5,"user_id":16515722,"display_name":"Bronskidev"},"score":0,"creation_date":1635675206,"post_id":69785568,"comment_id":123354245,"body_markdown":"@GauthamM and if this constructor is called with LinkedList or CopyOnWriteArrayList? is this even possible? can I use one constructor for 3 different collections?","body":"@GauthamM and if this constructor is called with LinkedList or CopyOnWriteArrayList? is this even possible? can I use one constructor for 3 different collections?"},{"owner":{"account_id":10595663,"reputation":4835,"user_id":7804477,"display_name":"Gautham M"},"score":1,"creation_date":1635676565,"post_id":69785568,"comment_id":123354514,"body_markdown":"@Bronskidev you can check the type of list using `instanceof`, Then, write a method (you may name it copy) that would return `new ArrayList&lt;&gt;(list)` or `new LinkedList&lt;&gt;(list)` or any other required type based on conditions like `if(list instanceof ArrayList)`. Then in the constructor just call `this.list4 = copy(list)`","body":"@Bronskidev you can check the type of list using <code>instanceof</code>, Then, write a method (you may name it copy) that would return <code>new ArrayList&lt;&gt;(list)</code> or <code>new LinkedList&lt;&gt;(list)</code> or any other required type based on conditions like <code>if(list instanceof ArrayList)</code>. Then in the constructor just call <code>this.list4 = copy(list)</code>"}],"answers":[{"tags":[],"owner":{"account_id":10595663,"reputation":4835,"user_id":7804477,"display_name":"Gautham M"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1635762971,"creation_date":1635747228,"answer_id":69793199,"question_id":69785568,"body_markdown":"With the below statements, all your lists point to the same memory location and hence any operation on the list would be visible to all of list1 to list7. \r\n\r\n`this.list = list;    this.list2 = list;    this.list3 = list;`\r\n\r\nInstead you need to generate a new arraylist containing the elements of the input list using the appropriate list constructor which accepts a `Collection` as the argument.\r\n\r\nSince the input could be of any `List` type, you could make use of `instanceof` to check the type of input and invoke the appropriate constructor.\r\n\r\n**NOTE: You are only creating a new list. So changes to the original list won&#39;t be reflected on those seven lists. BUT the objects contained in the list are still referenced in the new lists as we are not cloning the object. We are just creating a new list with the same objects. SO if you were using `List&lt;SomeObject&gt;` instead of `List&lt;Integer&gt;`, were `SomeObject` is mutable, then any operations on the objects would be reflected on every list. This is not applicable to this specific question as it uses immutable `Integer` objects.**\r\n\r\n```java\r\nprivate static List&lt;Integer&gt; copy(List&lt;Integer&gt; input) {\r\n    if(input instanceof ArrayList) {\r\n        return new ArrayList&lt;&gt;(input);\r\n    } else if (input instanceof LinkedList) {\r\n        return new LinkedList&lt;&gt;(input);\r\n    }\r\n    // others\r\n    ...............\r\n    ...............\r\n\r\n}\r\n```\r\nNow invoke this method in your class&#39; constructor.\r\n```java\r\nthis.list = copy(list);\r\nthis.list2 = copy(list);\r\nthis.list3 = copy(list);\r\n```\r\n\r\nYou could also replace the for loop at the beginning with the below:\r\n```java\r\nCollections.fill(list, 1);\r\n```\r\n\r\nBut with the current code, all inputs are empty and hence the `size` of every list you are passing would be `0`. Hence no filling of elements would take place (using `for` loop or `Collections.fill`)\r\n\r\n`new ArrayList&lt;&gt;(10000)` does not update the size of the arraylist. It only initializes the backing array.\r\n\r\nRead [this](https://stackoverflow.com/questions/69785568/how-to-clone-the-list-correctly-in-the-constructor/69793199#comment123371307_69793199) too.","title":"How to clone the List correctly in the constructor?","body":"<p>With the below statements, all your lists point to the same memory location and hence any operation on the list would be visible to all of list1 to list7.</p>\n<p><code>this.list = list;    this.list2 = list;    this.list3 = list;</code></p>\n<p>Instead you need to generate a new arraylist containing the elements of the input list using the appropriate list constructor which accepts a <code>Collection</code> as the argument.</p>\n<p>Since the input could be of any <code>List</code> type, you could make use of <code>instanceof</code> to check the type of input and invoke the appropriate constructor.</p>\n<p><strong>NOTE: You are only creating a new list. So changes to the original list won't be reflected on those seven lists. BUT the objects contained in the list are still referenced in the new lists as we are not cloning the object. We are just creating a new list with the same objects. SO if you were using <code>List&lt;SomeObject&gt;</code> instead of <code>List&lt;Integer&gt;</code>, were <code>SomeObject</code> is mutable, then any operations on the objects would be reflected on every list. This is not applicable to this specific question as it uses immutable <code>Integer</code> objects.</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>private static List&lt;Integer&gt; copy(List&lt;Integer&gt; input) {\n    if(input instanceof ArrayList) {\n        return new ArrayList&lt;&gt;(input);\n    } else if (input instanceof LinkedList) {\n        return new LinkedList&lt;&gt;(input);\n    }\n    // others\n    ...............\n    ...............\n\n}\n</code></pre>\n<p>Now invoke this method in your class' constructor.</p>\n<pre class=\"lang-java prettyprint-override\"><code>this.list = copy(list);\nthis.list2 = copy(list);\nthis.list3 = copy(list);\n</code></pre>\n<p>You could also replace the for loop at the beginning with the below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Collections.fill(list, 1);\n</code></pre>\n<p>But with the current code, all inputs are empty and hence the <code>size</code> of every list you are passing would be <code>0</code>. Hence no filling of elements would take place (using <code>for</code> loop or <code>Collections.fill</code>)</p>\n<p><code>new ArrayList&lt;&gt;(10000)</code> does not update the size of the arraylist. It only initializes the backing array.</p>\n<p>Read <a href=\"https://stackoverflow.com/questions/69785568/how-to-clone-the-list-correctly-in-the-constructor/69793199#comment123371307_69793199\">this</a> too.</p>\n"}],"owner":{"account_id":22275346,"reputation":5,"user_id":16515722,"display_name":"Bronskidev"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69793199,"answer_count":1,"score":0,"last_activity_date":1635763089,"creation_date":1635672977,"question_id":69785568,"body_markdown":"The constructor takes a List as parameters, this List needs to be filled with the same elements, for example &quot;1&quot; and cloned 7 times, assign the result to different collections, so that then 7 methods would process each of their lists. \r\n\r\nconstructor call:\r\n\r\n    public Class1 {\r\n        public Class2 arrayList = new Class2(new ArrayList&lt;&gt;(10000))\r\n        public Class2 linkedList = new Class2(new LinkedList&lt;&gt;())\r\n        public Class2 cowList = new Class2(new CopyOnWriteArrayList&lt;&gt;())\r\n    }\r\n    \r\n    public Class2 {\r\n    \r\n        private List&lt;Integer&gt; list;\r\n        private List&lt;Integer&gt; list2;\r\n        private List&lt;Integer&gt; list3;\r\n        private List&lt;Integer&gt; list4;\r\n        private List&lt;Integer&gt; list5;\r\n        private List&lt;Integer&gt; list6;\r\n        private List&lt;Integer&gt; list7;\r\n    \r\n        public Class2(List&lt;Integer&gt; list) {\r\n    \r\n            for (int i = 0; i &lt; list.size(); i++) {\r\n                list.add(1);\r\n            }\r\n    \r\n            this.list = list;\r\n            this.list2 = list;\r\n            this.list3 = list;\r\n            this.list4 = list;\r\n            this.list5 = list;\r\n            this.list6 = list;\r\n            this.list7 = list;\r\n        }\r\n    \r\n        method1(){\r\n            // list - doSomething...;\r\n        }\r\n    \r\n        method2(){\r\n            // list1 - doSomething...;\r\n        }\r\n    \r\n        method3(){\r\n            // list2 - doSomething...;\r\n        }    \r\n    \r\n        method4(){\r\n            // list3 - doSomething...;\r\n        }\r\n    \r\n        ...\r\n    \r\n    }\r\n\r\nEach method performs a specific operation on its list. Depending on the constructor being called, the list is - `ArrayList` or `LinkedList` or `CopyOnWriteArrayList`\r\n\r\nMy code doesn&#39;t work. What am I doing wrong?","title":"How to clone the List correctly in the constructor?","body":"<p>The constructor takes a List as parameters, this List needs to be filled with the same elements, for example &quot;1&quot; and cloned 7 times, assign the result to different collections, so that then 7 methods would process each of their lists.</p>\n<p>constructor call:</p>\n<pre><code>public Class1 {\n    public Class2 arrayList = new Class2(new ArrayList&lt;&gt;(10000))\n    public Class2 linkedList = new Class2(new LinkedList&lt;&gt;())\n    public Class2 cowList = new Class2(new CopyOnWriteArrayList&lt;&gt;())\n}\n\npublic Class2 {\n\n    private List&lt;Integer&gt; list;\n    private List&lt;Integer&gt; list2;\n    private List&lt;Integer&gt; list3;\n    private List&lt;Integer&gt; list4;\n    private List&lt;Integer&gt; list5;\n    private List&lt;Integer&gt; list6;\n    private List&lt;Integer&gt; list7;\n\n    public Class2(List&lt;Integer&gt; list) {\n\n        for (int i = 0; i &lt; list.size(); i++) {\n            list.add(1);\n        }\n\n        this.list = list;\n        this.list2 = list;\n        this.list3 = list;\n        this.list4 = list;\n        this.list5 = list;\n        this.list6 = list;\n        this.list7 = list;\n    }\n\n    method1(){\n        // list - doSomething...;\n    }\n\n    method2(){\n        // list1 - doSomething...;\n    }\n\n    method3(){\n        // list2 - doSomething...;\n    }    \n\n    method4(){\n        // list3 - doSomething...;\n    }\n\n    ...\n\n}\n</code></pre>\n<p>Each method performs a specific operation on its list. Depending on the constructor being called, the list is - <code>ArrayList</code> or <code>LinkedList</code> or <code>CopyOnWriteArrayList</code></p>\n<p>My code doesn't work. What am I doing wrong?</p>\n"},{"tags":["java","jenkins"],"comments":[{"owner":{"account_id":10320392,"reputation":723,"user_id":7613480,"display_name":"UdonN00dle"},"score":0,"creation_date":1635763143,"post_id":69795710,"comment_id":123372005,"body_markdown":"It seems your temp folder is full? Perhaps try clearing it out","body":"It seems your temp folder is full? Perhaps try clearing it out"},{"owner":{"account_id":10320392,"reputation":723,"user_id":7613480,"display_name":"UdonN00dle"},"score":0,"creation_date":1635763162,"post_id":69795710,"comment_id":123372011,"body_markdown":"By temp folder I mean /tmp","body":"By temp folder I mean /tmp"},{"owner":{"account_id":5634549,"reputation":101,"user_id":8181320,"display_name":"Rajesh Rathod"},"score":0,"creation_date":1635763336,"post_id":69795710,"comment_id":123372072,"body_markdown":"steps to clean  /tmp folder","body":"steps to clean  /tmp folder"},{"owner":{"account_id":134685,"reputation":14507,"user_id":510036,"accept_rate":96,"display_name":"Qix - MONICA WAS MISTREATED"},"score":1,"creation_date":1635763700,"post_id":69795710,"comment_id":123372204,"body_markdown":"Just like you would any other folder.","body":"Just like you would any other folder."}],"owner":{"account_id":5634549,"reputation":101,"user_id":8181320,"display_name":"Rajesh Rathod"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1986,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1635762965,"creation_date":1635762965,"question_id":69795710,"body_markdown":"Here when i tried to run Jenkins from command line, also ran \r\n\r\nsudo systemctl restart jenkins\r\nJob for jenkins.service failed because the control process exited with error code.\r\nSee &quot;systemctl status jenkins.service&quot; and &quot;journalctl -xe&quot; for details.\r\nbut failed to start jenkins\r\n\r\n```\r\nXXXXXXXXXXXX-XXXXXXXXXX:/var/lib/jenkins/workspace$ /usr/bin/java -Djava.awt.headless=true -jar /usr/share/jenkins/jenkins.war --webroot=/var/cache/jenkins/war --httpPort=8080 --ajp13Port=-1\r\nPicked up _JAVA_OPTIONS: -Xmx16000m\r\nRunning from: /usr/share/jenkins/jenkins.war\r\nException in thread &quot;main&quot; java.io.IOException: No space left on device\r\nat java.base/java.io.FileOutputStream.writeBytes(Native Method)\r\nat java.base/java.io.FileOutputStream.write(FileOutputStream.java:354)\r\nat Main.copyStream(Main.java:394)\r\nat Main.extractFromJar(Main.java:416)\r\nat Main._main(Main.java:247)\r\nat Main.main(Main.java:114)\r\nleadschool_app@ip-10-0-67-70:/var/lib/jenkins/workspace$\r\n```\r\n-------------------------------------------------------------------------------------------------\r\n````\r\nXXXXXXXXXXXX-XXXXXXXXXX:/var/lib/jenkins/workspace$ df -h\r\nFilesystem      Size  Used Avail Use% Mounted on\r\n/dev/root        30G   14G   16G  47% /\r\ndevtmpfs         16G     0   16G   0% /dev\r\ntmpfs            16G     0   16G   0% /dev/shm\r\ntmpfs           3.2G  354M  2.8G  12% /run\r\ntmpfs           5.0M     0  5.0M   0% /run/lock\r\ntmpfs            16G     0   16G   0% /sys/fs/cgroup\r\n/dev/loop0       34M   34M     0 100% /snap/amazon-ssm-agent/3552\r\n/dev/loop4       71M   71M     0 100% /snap/lxd/21029\r\ntmpfs            10M   10M   32K 100% /tmp\r\n/dev/loop5       25M   25M     0 100% /snap/amazon-ssm-agent/4046\r\ntmpfs           3.2G     0  3.2G   0% /run/user/1001\r\n/dev/loop8       56M   56M     0 100% /snap/core18/2128\r\n/dev/loop9       62M   62M     0 100% /snap/core20/1081\r\n/dev/loop10      68M   68M     0 100% /snap/lxd/21545\r\n````\r\nabove is the space in my system,\r\nhow should I start my Jenkins?","title":"Jenkins Down - &#39;no space left on device&#39; error","body":"<p>Here when i tried to run Jenkins from command line, also ran</p>\n<p>sudo systemctl restart jenkins\nJob for jenkins.service failed because the control process exited with error code.\nSee &quot;systemctl status jenkins.service&quot; and &quot;journalctl -xe&quot; for details.\nbut failed to start jenkins</p>\n<pre><code>XXXXXXXXXXXX-XXXXXXXXXX:/var/lib/jenkins/workspace$ /usr/bin/java -Djava.awt.headless=true -jar /usr/share/jenkins/jenkins.war --webroot=/var/cache/jenkins/war --httpPort=8080 --ajp13Port=-1\nPicked up _JAVA_OPTIONS: -Xmx16000m\nRunning from: /usr/share/jenkins/jenkins.war\nException in thread &quot;main&quot; java.io.IOException: No space left on device\nat java.base/java.io.FileOutputStream.writeBytes(Native Method)\nat java.base/java.io.FileOutputStream.write(FileOutputStream.java:354)\nat Main.copyStream(Main.java:394)\nat Main.extractFromJar(Main.java:416)\nat Main._main(Main.java:247)\nat Main.main(Main.java:114)\nleadschool_app@ip-10-0-67-70:/var/lib/jenkins/workspace$\n</code></pre>\n<hr />\n<pre><code>XXXXXXXXXXXX-XXXXXXXXXX:/var/lib/jenkins/workspace$ df -h\nFilesystem      Size  Used Avail Use% Mounted on\n/dev/root        30G   14G   16G  47% /\ndevtmpfs         16G     0   16G   0% /dev\ntmpfs            16G     0   16G   0% /dev/shm\ntmpfs           3.2G  354M  2.8G  12% /run\ntmpfs           5.0M     0  5.0M   0% /run/lock\ntmpfs            16G     0   16G   0% /sys/fs/cgroup\n/dev/loop0       34M   34M     0 100% /snap/amazon-ssm-agent/3552\n/dev/loop4       71M   71M     0 100% /snap/lxd/21029\ntmpfs            10M   10M   32K 100% /tmp\n/dev/loop5       25M   25M     0 100% /snap/amazon-ssm-agent/4046\ntmpfs           3.2G     0  3.2G   0% /run/user/1001\n/dev/loop8       56M   56M     0 100% /snap/core18/2128\n/dev/loop9       62M   62M     0 100% /snap/core20/1081\n/dev/loop10      68M   68M     0 100% /snap/lxd/21545\n</code></pre>\n<p>above is the space in my system,\nhow should I start my Jenkins?</p>\n"},{"tags":["java","ssh"],"owner":{"account_id":17535470,"reputation":21,"user_id":12718692,"display_name":"Damir"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1654,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1635762959,"creation_date":1635762959,"question_id":69795709,"body_markdown":"Environment\r\n1. Java 1.7.0_79\r\n2. SFTP client\r\nOpenSSH_5.3p1, OpenSSL 1.0.1e-fips 11 Feb 2013\r\n3. SFTP server\r\nSSH-2.0-OpenSSH_7.2p2 Ubuntu-4ubuntu2.10\r\n\r\nAction:\r\nSFTP client try to connect to SFTP server using java. As result, it has error:\r\n```\r\nCaused by: com.maverick.ssh.SshException: Key exchange failed: Expected SSH_MSG_KEX_GEX_GROUP [id=3] [Unknown cause]\r\n    at com.maverick.ssh.components.jce.DiffieHellmanGroupExchangeSha1.performClientExchange(Unknown Source)\r\n    at com.maverick.ssh2.TransportProtocol.e(Unknown Source)\r\n    at com.maverick.ssh2.TransportProtocol.processMessage(Unknown Source)\r\n    at com.maverick.ssh2.TransportProtocol.startTransportProtocol(Unknown Source)\r\n    at com.maverick.ssh2.Ssh2Client.connect(Unknown Source)\r\n    at com.maverick.ssh.SshConnector.connect(Unknown Source)\r\n    at com.maverick.ssh.SshConnector.connect(Unknown Source)\r\n    at com.bea.wli.sb.transports.sftp.client.SFTPClient.authenticate(SFTPClient.java:236)\r\n    at com.bea.wli.sb.transports.sftp.connector.SFTPResource.&lt;init&gt;(SFTPResource.java:89)\r\n    at com.bea.wli.sb.transports.sftp.resource.SFTPUtils.createSFTPResource(SFTPUtils.java:153)\r\n    at com.bea.wli.sb.transports.sftp.connector.SFTPWorkPartitioningAgent.getSftpResource(SFTPWorkPartitioningAgent.java:161)\r\n    ... 9 more\r\n```\r\n\r\nThis error is generated by the DiffieHellmanGroupExchangeSha1 class from j2ssh-maverick:\r\nhttps://github.com/sshtools/j2ssh-maverick/blob/master/j2ssh-maverick/src/main/java/com/sshtools/ssh/components/jce/DiffieHellmanGroupExchangeSha1.java\r\n```\r\nfinal static int SSH_MSG_KEXDH_GEX_GROUP = 31;\r\n...\r\nbyte[] tmp = transport.nextMessage();\r\n...\r\nif (tmp[0] != SSH_MSG_KEXDH_GEX_GROUP) {\r\ntransport.disconnect(TransportProtocol.KEY_EXCHANGE_FAILED,\r\n&quot;Expected SSH_MSG_KEX_GEX_GROUP&quot;);\r\nthrow new SshException(\r\n&quot;Key exchange failed: Expected SSH_MSG_KEX_GEX_GROUP [id=&quot;\r\n+ tmp[0] + &quot;]&quot;, SshException.INTERNAL_ERROR);\r\n}\r\n```\r\nbecause of this code, get the description of the error:\r\n```\r\nKey exchange failed: Expected SSH_MSG_KEX_GEX_GROUP [id=3]\r\n```\r\n\r\nIt means after request SSH2_MSG_KEX_DH_GEX_REQUEST expecting response with value &#171;31&#187; to continue connecting.\r\n\r\nExperiment conducted:\r\n\r\n1. If to connect from cleint with OpenSSH_7.2p2 to server with OpenSSH_5.3p1, it has ssh log behind:\r\n```\r\ndebug1: SSH2_MSG_KEX_DH_GEX_REQUEST(2048&lt;3072&lt;8192) sent\r\ndebug3: receive packet: type 31\r\ndebug1: got SSH2_MSG_KEX_DH_GEX_GROUP\r\ndebug2: bits set: 1511/3072\r\ndebug3: send packet: type 32\r\ndebug1: SSH2_MSG_KEX_DH_GEX_INIT sent\r\ndebug3: receive packet: type 33\r\ndebug1: got SSH2_MSG_KEX_DH_GEX_REPLY\r\n```\r\n\r\n2. If to connect from cleint with OpenSSH_5.3p1 to server with OpenSSH_5.3p1 or OpenSSH_7.2p2, it has ssh log behind:\r\n```\r\ndebug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024&lt;2048&lt;8192) sent\r\ndebug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP\r\ndebug3: Wrote 24 bytes for a total of 909\r\ndebug2: dh_gen_key: priv key bits set: 162/320\r\ndebug2: bits set: 1044/2048\r\ndebug1: SSH2_MSG_KEX_DH_GEX_INIT sent\r\ndebug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY\r\n```\r\n\r\nFor the first experiment it get value &#171;31&#187;, but for the second experiment no any information about value &#171;3&#187; ([id=3]).\r\n\r\n\r\nWhy is different log stack between two experiments? \r\nHow to solve this error?","title":"com.maverick.ssh.SshException: Key exchange failed: Expected SSH_MSG_KEX_GEX_GROUP [id=3]","body":"<p>Environment</p>\n<ol>\n<li>Java 1.7.0_79</li>\n<li>SFTP client\nOpenSSH_5.3p1, OpenSSL 1.0.1e-fips 11 Feb 2013</li>\n<li>SFTP server\nSSH-2.0-OpenSSH_7.2p2 Ubuntu-4ubuntu2.10</li>\n</ol>\n<p>Action:\nSFTP client try to connect to SFTP server using java. As result, it has error:</p>\n<pre><code>Caused by: com.maverick.ssh.SshException: Key exchange failed: Expected SSH_MSG_KEX_GEX_GROUP [id=3] [Unknown cause]\n    at com.maverick.ssh.components.jce.DiffieHellmanGroupExchangeSha1.performClientExchange(Unknown Source)\n    at com.maverick.ssh2.TransportProtocol.e(Unknown Source)\n    at com.maverick.ssh2.TransportProtocol.processMessage(Unknown Source)\n    at com.maverick.ssh2.TransportProtocol.startTransportProtocol(Unknown Source)\n    at com.maverick.ssh2.Ssh2Client.connect(Unknown Source)\n    at com.maverick.ssh.SshConnector.connect(Unknown Source)\n    at com.maverick.ssh.SshConnector.connect(Unknown Source)\n    at com.bea.wli.sb.transports.sftp.client.SFTPClient.authenticate(SFTPClient.java:236)\n    at com.bea.wli.sb.transports.sftp.connector.SFTPResource.&lt;init&gt;(SFTPResource.java:89)\n    at com.bea.wli.sb.transports.sftp.resource.SFTPUtils.createSFTPResource(SFTPUtils.java:153)\n    at com.bea.wli.sb.transports.sftp.connector.SFTPWorkPartitioningAgent.getSftpResource(SFTPWorkPartitioningAgent.java:161)\n    ... 9 more\n</code></pre>\n<p>This error is generated by the DiffieHellmanGroupExchangeSha1 class from j2ssh-maverick:\n<a href=\"https://github.com/sshtools/j2ssh-maverick/blob/master/j2ssh-maverick/src/main/java/com/sshtools/ssh/components/jce/DiffieHellmanGroupExchangeSha1.java\" rel=\"nofollow noreferrer\">https://github.com/sshtools/j2ssh-maverick/blob/master/j2ssh-maverick/src/main/java/com/sshtools/ssh/components/jce/DiffieHellmanGroupExchangeSha1.java</a></p>\n<pre><code>final static int SSH_MSG_KEXDH_GEX_GROUP = 31;\n...\nbyte[] tmp = transport.nextMessage();\n...\nif (tmp[0] != SSH_MSG_KEXDH_GEX_GROUP) {\ntransport.disconnect(TransportProtocol.KEY_EXCHANGE_FAILED,\n&quot;Expected SSH_MSG_KEX_GEX_GROUP&quot;);\nthrow new SshException(\n&quot;Key exchange failed: Expected SSH_MSG_KEX_GEX_GROUP [id=&quot;\n+ tmp[0] + &quot;]&quot;, SshException.INTERNAL_ERROR);\n}\n</code></pre>\n<p>because of this code, get the description of the error:</p>\n<pre><code>Key exchange failed: Expected SSH_MSG_KEX_GEX_GROUP [id=3]\n</code></pre>\n<p>It means after request SSH2_MSG_KEX_DH_GEX_REQUEST expecting response with value «31» to continue connecting.</p>\n<p>Experiment conducted:</p>\n<ol>\n<li>If to connect from cleint with OpenSSH_7.2p2 to server with OpenSSH_5.3p1, it has ssh log behind:</li>\n</ol>\n<pre><code>debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(2048&lt;3072&lt;8192) sent\ndebug3: receive packet: type 31\ndebug1: got SSH2_MSG_KEX_DH_GEX_GROUP\ndebug2: bits set: 1511/3072\ndebug3: send packet: type 32\ndebug1: SSH2_MSG_KEX_DH_GEX_INIT sent\ndebug3: receive packet: type 33\ndebug1: got SSH2_MSG_KEX_DH_GEX_REPLY\n</code></pre>\n<ol start=\"2\">\n<li>If to connect from cleint with OpenSSH_5.3p1 to server with OpenSSH_5.3p1 or OpenSSH_7.2p2, it has ssh log behind:</li>\n</ol>\n<pre><code>debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024&lt;2048&lt;8192) sent\ndebug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP\ndebug3: Wrote 24 bytes for a total of 909\ndebug2: dh_gen_key: priv key bits set: 162/320\ndebug2: bits set: 1044/2048\ndebug1: SSH2_MSG_KEX_DH_GEX_INIT sent\ndebug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY\n</code></pre>\n<p>For the first experiment it get value «31», but for the second experiment no any information about value «3» ([id=3]).</p>\n<p>Why is different log stack between two experiments?\nHow to solve this error?</p>\n"},{"tags":["java","jasper-reports","jaspersoft-studio"],"comments":[{"owner":{"account_id":469619,"reputation":22464,"user_id":876298,"display_name":"Alex K"},"score":0,"creation_date":1635105165,"post_id":69699763,"comment_id":123200632,"body_markdown":"You can try to add your class(es) or jar with help of `Properties` -&gt; `Java Build Path` -&gt; `Libraries` -&gt; `&quot;Add ..&quot;`","body":"You can try to add your class(es) or jar with help of <code>Properties</code> -&gt; <code>Java Build Path</code> -&gt; <code>Libraries</code> -&gt; <code>&quot;Add ..&quot;</code>"},{"owner":{"account_id":5067945,"reputation":617,"user_id":4067559,"display_name":"Val Martinez"},"score":0,"creation_date":1635149308,"post_id":69699763,"comment_id":123208553,"body_markdown":"@AlexK src folder is on the path. Also i tried to export my classes in an external jar and then import them and no way. Same exception is thrown.","body":"@AlexK src folder is on the path. Also i tried to export my classes in an external jar and then import them and no way. Same exception is thrown."},{"owner":{"account_id":469619,"reputation":22464,"user_id":876298,"display_name":"Alex K"},"score":0,"creation_date":1635166202,"post_id":69699763,"comment_id":123215111,"body_markdown":"Did you restart JSS after adding the jar file?","body":"Did you restart JSS after adding the jar file?"},{"owner":{"account_id":5252988,"reputation":1450,"user_id":4196620,"display_name":"kendavidson"},"score":0,"creation_date":1635172414,"post_id":69699763,"comment_id":123218166,"body_markdown":"How are you running the `jasper` file? You say that `you&#39;re not generating reports on the fly` what exactly are you doing to run it?  Command line? Web API? Etc?","body":"How are you running the <code>jasper</code> file? You say that <code>you&#39;re not generating reports on the fly</code> what exactly are you doing to run it?  Command line? Web API? Etc?"},{"owner":{"account_id":5067945,"reputation":617,"user_id":4067559,"display_name":"Val Martinez"},"score":0,"creation_date":1635184234,"post_id":69699763,"comment_id":123223064,"body_markdown":"@AlexK Yes I did.","body":"@AlexK Yes I did."},{"owner":{"account_id":5067945,"reputation":617,"user_id":4067559,"display_name":"Val Martinez"},"score":0,"creation_date":1635184389,"post_id":69699763,"comment_id":123223120,"body_markdown":"@kendavidson In the Report Desing perspective, just opening the jrxml file and clicking on the preview tab.","body":"@kendavidson In the Report Desing perspective, just opening the jrxml file and clicking on the preview tab."},{"owner":{"account_id":469619,"reputation":22464,"user_id":876298,"display_name":"Alex K"},"score":1,"creation_date":1635184511,"post_id":69699763,"comment_id":123223166,"body_markdown":"@ValMartinez Looks like a JSS bug","body":"@ValMartinez Looks like a JSS bug"},{"owner":{"account_id":469619,"reputation":22464,"user_id":876298,"display_name":"Alex K"},"score":0,"creation_date":1635184621,"post_id":69699763,"comment_id":123223198,"body_markdown":"@ValMartinez BTW, Are you sure that you are using the fully qualified name of class?","body":"@ValMartinez BTW, Are you sure that you are using the fully qualified name of class?"},{"owner":{"account_id":5067945,"reputation":617,"user_id":4067559,"display_name":"Val Martinez"},"score":0,"creation_date":1635184712,"post_id":69699763,"comment_id":123223226,"body_markdown":"@AlexK Yes Alex. Its canonical name: package.name. I agree. Seems a bug.","body":"@AlexK Yes Alex. Its canonical name: package.name. I agree. Seems a bug."}],"answers":[{"tags":[],"owner":{"account_id":5067945,"reputation":617,"user_id":4067559,"display_name":"Val Martinez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1635762588,"creation_date":1635762588,"answer_id":69795640,"question_id":69699763,"body_markdown":"After asking to the Jasper Community, they have given me a solution.\r\n\r\nIts a bug in the 6.17 version. In order to solved it, just add an extra jar to the plugin installation folder, relaunch Jasper with -clean option and done. Now I can refer and use my own classes within the report.\r\n\r\nDetails here: https://community.jaspersoft.com/jaspersoft-studio/issues/13616#comment-873711\r\n\r\nAlso told me that a new release is comming and will fix this issue.","title":"Cannot use my Java classes working with Jasper Reports: ClassNotFoundException","body":"<p>After asking to the Jasper Community, they have given me a solution.</p>\n<p>Its a bug in the 6.17 version. In order to solved it, just add an extra jar to the plugin installation folder, relaunch Jasper with -clean option and done. Now I can refer and use my own classes within the report.</p>\n<p>Details here: <a href=\"https://community.jaspersoft.com/jaspersoft-studio/issues/13616#comment-873711\" rel=\"nofollow noreferrer\">https://community.jaspersoft.com/jaspersoft-studio/issues/13616#comment-873711</a></p>\n<p>Also told me that a new release is comming and will fix this issue.</p>\n"}],"owner":{"account_id":5067945,"reputation":617,"user_id":4067559,"display_name":"Val Martinez"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1628,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69795640,"answer_count":1,"score":0,"last_activity_date":1635762588,"creation_date":1635101007,"question_id":69699763,"body_markdown":"I have installed JasperReports Studio 6.17 in order to generate reports with Jasper Reports. Everything is ok, i can define my templates (jrxml files), filled them with jdbc or cvs remote data, and export them correctly to several formats.\r\n\r\nThe problem is when i try to use one my own Java classes such as Scritplett or as functions expressions. There is no way to recognize my classes. ClassNotFoundException is thrown each time.\r\n\r\nBuild path seems to be ok. All depedencies seems to be correct also, but i am not able to extend the functionality interacting with my Java classes. Any idea? Thanks in advance.\r\n\r\npd: I am not generating reports on the fly, just from the template, declaratively.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GRQvQ.png","title":"Cannot use my Java classes working with Jasper Reports: ClassNotFoundException","body":"<p>I have installed JasperReports Studio 6.17 in order to generate reports with Jasper Reports. Everything is ok, i can define my templates (jrxml files), filled them with jdbc or cvs remote data, and export them correctly to several formats.</p>\n<p>The problem is when i try to use one my own Java classes such as Scritplett or as functions expressions. There is no way to recognize my classes. ClassNotFoundException is thrown each time.</p>\n<p>Build path seems to be ok. All depedencies seems to be correct also, but i am not able to extend the functionality interacting with my Java classes. Any idea? Thanks in advance.</p>\n<p>pd: I am not generating reports on the fly, just from the template, declaratively.</p>\n<p><a href=\"https://i.stack.imgur.com/GRQvQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GRQvQ.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","json","spring-boot","rest","dto"],"answers":[{"tags":[],"owner":{"account_id":297276,"reputation":2523,"user_id":4506703,"display_name":"DEWA Kazuyuki - 出羽和之"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635724890,"creation_date":1635724890,"answer_id":69791490,"question_id":69790410,"body_markdown":"[`@ManyToOne`](https://docs.oracle.com/javaee/7/api/javax/persistence/ManyToOne.html) is available:\r\n\r\n```java\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.GenerationType;\r\nimport javax.persistence.Id;\r\nimport javax.persistence.JoinColumn;\r\nimport javax.persistence.ManyToOne;\r\n\r\n@Entity\r\npublic class TblEmployees {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int emp_id;\r\n    private String empName;\r\n    private Boolean empActive;\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;dbid&quot;)\r\n    private TblDepartments department;\r\n\r\n    // Getters and Setters\r\n\r\n}\r\n```\r\n[full sample code](https://github.com/yukihane/stackoverflow-qa/tree/master/so69790410)","title":"json object returns null spring boot","body":"<p><a href=\"https://docs.oracle.com/javaee/7/api/javax/persistence/ManyToOne.html\" rel=\"nofollow noreferrer\"><code>@ManyToOne</code></a> is available:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.ManyToOne;\n\n@Entity\npublic class TblEmployees {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int emp_id;\n    private String empName;\n    private Boolean empActive;\n    @ManyToOne\n    @JoinColumn(name = &quot;dbid&quot;)\n    private TblDepartments department;\n\n    // Getters and Setters\n\n}\n</code></pre>\n<p><a href=\"https://github.com/yukihane/stackoverflow-qa/tree/master/so69790410\" rel=\"nofollow noreferrer\">full sample code</a></p>\n"}],"owner":{"account_id":18260282,"reputation":19,"user_id":17250338,"display_name":"robot "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":623,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69791490,"answer_count":1,"score":1,"last_activity_date":1635762294,"creation_date":1635712686,"question_id":69790410,"body_markdown":"І am developing a REST API app with Spring Boot. I have 2 tables in the database, the first is called `TblEmployees`, the second is called `TblDepartments`. From these 2 tables I made a class `Employees_DTO` which should return data in JSON format. And from the `TblEmployees` table it will return data and from the `TblDepartments` table it returns null. `dbID` is a foreign key I did as I thought but at me it doesn&#39;t work:\r\n\r\n        public class TblDepartments {\r\n    private Integer dbID;\r\n    private String dep_name;\r\n    \r\n    public class TblEmployees {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int emp_id;\r\n    private String empName;\r\n    private Boolean empActive;\r\n    private Integer dbID;\r\n    \r\n    public class Employees_DTO {\r\n    private int emp_id;\r\n    private String empName;\r\n    private Boolean empActive;\r\n    private String dep_name;\r\n       }\r\n    \r\n    package com.example.test_task.exceptions;\r\n    \r\n    import com.example.test_task.*;\r\n    import org.modelmapper.ModelMapper;\r\n    import org.modelmapper.convention.MatchingStrategies;\r\n    import org.modelmapper.spi.MatchingStrategy;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.stereotype.Service;\r\n    \r\n    import java.util.List;\r\n     import java.util.stream.Collectors;\r\n    \r\n     @Service\r\n    public class EmployessServise {\r\n    @Autowired\r\n    private EmplployeesRepository repo;\r\n    \r\n    @Autowired\r\n    private ModelMapper modelMapper;\r\n    \r\n    public EmployessServise() {\r\n    }\r\n    \r\n    public List&lt;Employees_DTO&gt; getAll_Emp(){\r\n        return repo.findAll()\r\n                .stream()\r\n                .map(this::convertEntityToDto)\r\n                .collect(Collectors.toList());\r\n    }\r\n    \r\n    private Employees_DTO convertEntityToDto(TblEmployees tblEmployees){\r\n        modelMapper.getConfiguration()\r\n                .setMatchingStrategy(MatchingStrategies.LOOSE);\r\n        Employees_DTO employees_dto=new Employees_DTO();\r\n        employees_dto=modelMapper.map(tblEmployees,Employees_DTO.class);\r\n        return employees_dto;\r\n    }\r\n    \r\n    private TblEmployees convertEntityToDto(Employees_DTO employees_dto){\r\n        modelMapper.getConfiguration()\r\n                .setMatchingStrategy(MatchingStrategies.LOOSE);\r\n        TblEmployees tblEmployees=new TblEmployees();\r\n        tblEmployees=modelMapper.map(employees_dto,TblEmployees.class);\r\n        return tblEmployees;\r\n    }\r\n      }","title":"json object returns null spring boot","body":"<p>І am developing a REST API app with Spring Boot. I have 2 tables in the database, the first is called <code>TblEmployees</code>, the second is called <code>TblDepartments</code>. From these 2 tables I made a class <code>Employees_DTO</code> which should return data in JSON format. And from the <code>TblEmployees</code> table it will return data and from the <code>TblDepartments</code> table it returns null. <code>dbID</code> is a foreign key I did as I thought but at me it doesn't work:</p>\n<pre><code>    public class TblDepartments {\nprivate Integer dbID;\nprivate String dep_name;\n\npublic class TblEmployees {\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate int emp_id;\nprivate String empName;\nprivate Boolean empActive;\nprivate Integer dbID;\n\npublic class Employees_DTO {\nprivate int emp_id;\nprivate String empName;\nprivate Boolean empActive;\nprivate String dep_name;\n   }\n\npackage com.example.test_task.exceptions;\n\nimport com.example.test_task.*;\nimport org.modelmapper.ModelMapper;\nimport org.modelmapper.convention.MatchingStrategies;\nimport org.modelmapper.spi.MatchingStrategy;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.stereotype.Service;\n\nimport java.util.List;\n import java.util.stream.Collectors;\n\n @Service\npublic class EmployessServise {\n@Autowired\nprivate EmplployeesRepository repo;\n\n@Autowired\nprivate ModelMapper modelMapper;\n\npublic EmployessServise() {\n}\n\npublic List&lt;Employees_DTO&gt; getAll_Emp(){\n    return repo.findAll()\n            .stream()\n            .map(this::convertEntityToDto)\n            .collect(Collectors.toList());\n}\n\nprivate Employees_DTO convertEntityToDto(TblEmployees tblEmployees){\n    modelMapper.getConfiguration()\n            .setMatchingStrategy(MatchingStrategies.LOOSE);\n    Employees_DTO employees_dto=new Employees_DTO();\n    employees_dto=modelMapper.map(tblEmployees,Employees_DTO.class);\n    return employees_dto;\n}\n\nprivate TblEmployees convertEntityToDto(Employees_DTO employees_dto){\n    modelMapper.getConfiguration()\n            .setMatchingStrategy(MatchingStrategies.LOOSE);\n    TblEmployees tblEmployees=new TblEmployees();\n    tblEmployees=modelMapper.map(employees_dto,TblEmployees.class);\n    return tblEmployees;\n}\n  }\n</code></pre>\n"},{"tags":["java","macos","swing","jlayer"],"comments":[{"owner":{"account_id":16838121,"reputation":952,"user_id":12174160,"display_name":"weisj"},"score":0,"creation_date":1633879548,"post_id":69514258,"comment_id":122872576,"body_markdown":"My suggestion would be to only paint to the offscreen when turning the blur mode on. If you only use the blur effect when showing a modal dialog then it is safe to assume that the frame won’t change its size or content.","body":"My suggestion would be to only paint to the offscreen when turning the blur mode on. If you only use the blur effect when showing a modal dialog then it is safe to assume that the frame won’t change its size or content."},{"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"score":0,"creation_date":1633900799,"post_id":69514258,"comment_id":122877297,"body_markdown":"@weisj Well, that was a very clever suggestion. While this does fix he delay, it has two unfortunate consequences. First, it fails to repaint the button I pressed to launch the message. This happens on any L&amp;F. This is probably because that component goes from focussed to unfocussed, and needs repainting. Second, only on the Mac, it fails to paint any of the buttons or checkboxes. I think they&#39;re all getting invalidated, which is why they need to be repainted. I&#39;ve been trying to fix this but it doesn&#39;t look promising.","body":"@weisj Well, that was a very clever suggestion. While this does fix he delay, it has two unfortunate consequences. First, it fails to repaint the button I pressed to launch the message. This happens on any L&amp;F. This is probably because that component goes from focussed to unfocussed, and needs repainting. Second, only on the Mac, it fails to paint any of the buttons or checkboxes. I think they&#39;re all getting invalidated, which is why they need to be repainted. I&#39;ve been trying to fix this but it doesn&#39;t look promising."},{"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"score":0,"creation_date":1633912967,"post_id":69514258,"comment_id":122878930,"body_markdown":"@weisj BTW, would you agree that this is a bug in the Aqua L&amp;F?","body":"@weisj BTW, would you agree that this is a bug in the Aqua L&amp;F?"},{"owner":{"account_id":16838121,"reputation":952,"user_id":12174160,"display_name":"weisj"},"score":0,"creation_date":1633957343,"post_id":69514258,"comment_id":122890789,"body_markdown":"Components not being painted at seems very weird to me. Though the button still being focused should be avoidable by simply changing the blur state in SwingUtilities#invokeLater to ensure it happens after focus has moved to the dialog. Sadly I don&#39;t have easy access to a Mac so I can’t debug the problem myself.","body":"Components not being painted at seems very weird to me. Though the button still being focused should be avoidable by simply changing the blur state in SwingUtilities#invokeLater to ensure it happens after focus has moved to the dialog. Sadly I don&#39;t have easy access to a Mac so I can’t debug the problem myself."},{"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"score":0,"creation_date":1634204192,"post_id":69514258,"comment_id":122964535,"body_markdown":"At first, it looked like your fix worked. But when I tried it in an actual application, it didn&#39;t work. I don&#39;t yet know why it works in the test case but not in the application, but when I figure it out, I may need to revise my test case. This isn&#39;t over.","body":"At first, it looked like your fix worked. But when I tried it in an actual application, it didn&#39;t work. I don&#39;t yet know why it works in the test case but not in the application, but when I figure it out, I may need to revise my test case. This isn&#39;t over."},{"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"score":0,"creation_date":1651313458,"post_id":69514258,"comment_id":127338369,"body_markdown":"I have since realized that one reason why this is only an issue with Aqua is that Aqua is the only L&amp;F that paints the checkboxes one way when the window has the focus, and another way when it doesn&#39;t. This hasn&#39;t led me to a solution yet, but I&#39;m still looking.","body":"I have since realized that one reason why this is only an issue with Aqua is that Aqua is the only L&amp;F that paints the checkboxes one way when the window has the focus, and another way when it doesn&#39;t. This hasn&#39;t led me to a solution yet, but I&#39;m still looking."},{"owner":{"account_id":49071,"reputation":8670,"user_id":145976,"accept_rate":40,"display_name":"Charlie"},"score":0,"creation_date":1697493544,"post_id":69514258,"comment_id":136284485,"body_markdown":"Although I&#39;d say let the L&amp;F paint the blur effect if that&#39;s what the system would normally do.","body":"Although I&#39;d say let the L&amp;F paint the blur effect if that&#39;s what the system would normally do."},{"owner":{"account_id":49071,"reputation":8670,"user_id":145976,"accept_rate":40,"display_name":"Charlie"},"score":0,"creation_date":1697496337,"post_id":69514258,"comment_id":136284764,"body_markdown":"There definitely seems to be a strange thing happening with the repainting of those checkboxes. Even with the blur disabled, the repaint is quite slow. I&#39;d say you should identify why its repainting all those checkboxes like that.","body":"There definitely seems to be a strange thing happening with the repainting of those checkboxes. Even with the blur disabled, the repaint is quite slow. I&#39;d say you should identify why its repainting all those checkboxes like that."},{"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"score":0,"creation_date":1698655047,"post_id":69514258,"comment_id":136427992,"body_markdown":"@Charlie identifying why it&#39;s repainting them is easier said than done. I don&#39;t have the source code for Apples Aqua L&amp;F, and decompiling it produces arcane code that&#39;s tough to understand.","body":"@Charlie identifying why it&#39;s repainting them is easier said than done. I don&#39;t have the source code for Apples Aqua L&amp;F, and decompiling it produces arcane code that&#39;s tough to understand."},{"owner":{"account_id":49071,"reputation":8670,"user_id":145976,"accept_rate":40,"display_name":"Charlie"},"score":0,"creation_date":1698683713,"post_id":69514258,"comment_id":136433521,"body_markdown":"@MiguelMunoz Undersood and agreed it would be difficult. I&#39;ve had luck in the past working around that a bit. For example, seems something is calling Component.repaint(), which is queuing the repaint. The stack traces to to the repaint don&#39;t include the call to repaint() which is the tricky part. A break point on the repaint() call might help.","body":"@MiguelMunoz Undersood and agreed it would be difficult. I&#39;ve had luck in the past working around that a bit. For example, seems something is calling Component.repaint(), which is queuing the repaint. The stack traces to to the repaint don&#39;t include the call to repaint() which is the tricky part. A break point on the repaint() call might help."}],"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1635762220,"creation_date":1633860878,"question_id":69514258,"body_markdown":"I&#39;m having a serious performance issue using a JLayer to do special drawing, but only under the AquaLookAndFeel on Macintosh. Using any other look and feel, the performance is fine. \r\n\r\nHere&#39;s the scoop:\r\n\r\nI have a test case that blurs the main window when a child dialog pops up above it. On most L&amp;Fs it works fine. On Aqua, it takes five seconds to draw, and the screen is frozen the whole time. I can press OK to dismiss the dialog, but it doesn&#39;t respond until it&#39;s done drawing. And the reason it takes so long to draw is because Aqua is firing multiple paint events. For every component that might change its visual state, it fires a paint event. So it redraws the entire window, using the blur effect, once for each of the twelve JButtons or Checkboxes in the window. The blur effect takes about one third of a second to draw, but it takes about 5 seconds with all the repaints.\r\n\r\nUnder any other look and feel, only two paint events are fired, so the performance is acceptable.\r\n\r\nTo see this in action, run the test case at https://github.com/SwingGuy1024/Bugs/blob/main/AquaPaintBug.java\r\n\r\nIt lets you try it under different looks-and-feels. It runs fine on all but Aqua.\r\n\r\nHas anyone else seen this? Does anyone know of a workaround? Is this a bug in Aqua, or am I missing something? If I can&#39;t use JLayer to enhance the drawing of a component, the JLayer is useless for drawing.\r\n\r\n*Note: I think this is partly caused by a PropertyChangeListener that gets set by the AquaRootPaneUI class, on a property called `AquaFocusHandler.FRAME_ACTIVE_PROPERTY`, which is defined as &quot;Frame.active&quot;. This seems to get activated when the window&#39;s active state changes, which is what happens when a dialog opens up. This explains why it repaints all the JCheckBoxes, but doesn&#39;t explain why they each get a separate paint event.*","title":"Serious Performance issue using JLayer drawing with AquaLookAndFeel","body":"<p>I'm having a serious performance issue using a JLayer to do special drawing, but only under the AquaLookAndFeel on Macintosh. Using any other look and feel, the performance is fine.</p>\n<p>Here's the scoop:</p>\n<p>I have a test case that blurs the main window when a child dialog pops up above it. On most L&amp;Fs it works fine. On Aqua, it takes five seconds to draw, and the screen is frozen the whole time. I can press OK to dismiss the dialog, but it doesn't respond until it's done drawing. And the reason it takes so long to draw is because Aqua is firing multiple paint events. For every component that might change its visual state, it fires a paint event. So it redraws the entire window, using the blur effect, once for each of the twelve JButtons or Checkboxes in the window. The blur effect takes about one third of a second to draw, but it takes about 5 seconds with all the repaints.</p>\n<p>Under any other look and feel, only two paint events are fired, so the performance is acceptable.</p>\n<p>To see this in action, run the test case at <a href=\"https://github.com/SwingGuy1024/Bugs/blob/main/AquaPaintBug.java\" rel=\"nofollow noreferrer\">https://github.com/SwingGuy1024/Bugs/blob/main/AquaPaintBug.java</a></p>\n<p>It lets you try it under different looks-and-feels. It runs fine on all but Aqua.</p>\n<p>Has anyone else seen this? Does anyone know of a workaround? Is this a bug in Aqua, or am I missing something? If I can't use JLayer to enhance the drawing of a component, the JLayer is useless for drawing.</p>\n<p><em>Note: I think this is partly caused by a PropertyChangeListener that gets set by the AquaRootPaneUI class, on a property called <code>AquaFocusHandler.FRAME_ACTIVE_PROPERTY</code>, which is defined as &quot;Frame.active&quot;. This seems to get activated when the window's active state changes, which is what happens when a dialog opens up. This explains why it repaints all the JCheckBoxes, but doesn't explain why they each get a separate paint event.</em></p>\n"},{"tags":["java","swing","jframe","jpanel"],"answers":[{"tags":[],"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1635761975,"creation_date":1635761083,"answer_id":69795343,"question_id":69795235,"body_markdown":"When you do `ip = new ImagePanel(&quot;new_image.jpg&quot;);` you&#39;re creating a whole new ImagePanel that has nothing to do with your current layout. You could.\r\n\r\n    remove(ip);\r\n    ip = new ImagePanel(&quot;new_image.jpg&quot;);\r\n    add(ip);\r\n    repaint();\r\n\r\nAnother way you could do it is to just change the buffered image.\r\n\r\nAdd the following method to your image panel.\r\n\r\n    public void loadImage(String dateiname) {\r\n        try {\r\n            bf = ImageIO.read(new File(dateiname));\r\n\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\nThen in your action listener.\r\n \r\n    ip.loadNewImage(&quot;new_image.jpg&quot;);\r\n    ip.repaint();\r\n\r\nYou have a bunch of bad habits going on in your code though.\r\n\r\nSuch as, override paintComponent instead of paint and it should look like.\r\n\r\n    @Override\r\n    public void paintComponent(Graphics g){\r\n        super.paintComponent(g);\r\n        g.drawImage(bf.getScaledInstance(300,200,1),0,0,null );\r\n    }\r\n\r\nThat way transparency will be handled correctly.\r\n\r\nYou shouldn&#39;t extend JFrame, you should just create a JFrame. \r\n\r\nWhen you add components, you there is a layout manager involved. It&#39;s good to be aware of that and handle things accordingly. I would change your constructor to.\r\n\r\n```\r\npublic Hauptfenster() {\r\n\r\n    JFrame frame = new JFrame();\r\n    ip = new ImagePanel(&quot;first_image.jpg&quot;);\r\n    buttonPanel = new JPanel();\r\n    changeImage = new JButton(&quot;change image&quot;);\r\n    buttonPanel.add(changeImage);\r\n\r\n    changeImage.addActionListener((e) -&gt; {\r\n        frame.remove(ip);\r\n        ip = new ImagePanel(&quot;new_image.jpg&quot;);\r\n        frame.add(ip, BorderLayout.CENTER);\r\n        frame.repaint();\r\n    });\r\n    frame.add(buttonPanel, BorderLayout.SOUTH);\r\n    frame.add(ip, BorderLayout.CENTER);\r\n    frame.setVisible(true);\r\n}\r\n```\r\n\r\n\r\nIf you need more help, you&#39;ll need to actually make your example compilable. There are too many errors right now.","title":"How can a JPanel be changed after added to JFrame?","body":"<p>When you do <code>ip = new ImagePanel(&quot;new_image.jpg&quot;);</code> you're creating a whole new ImagePanel that has nothing to do with your current layout. You could.</p>\n<pre><code>remove(ip);\nip = new ImagePanel(&quot;new_image.jpg&quot;);\nadd(ip);\nrepaint();\n</code></pre>\n<p>Another way you could do it is to just change the buffered image.</p>\n<p>Add the following method to your image panel.</p>\n<pre><code>public void loadImage(String dateiname) {\n    try {\n        bf = ImageIO.read(new File(dateiname));\n\n\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>Then in your action listener.</p>\n<pre><code>ip.loadNewImage(&quot;new_image.jpg&quot;);\nip.repaint();\n</code></pre>\n<p>You have a bunch of bad habits going on in your code though.</p>\n<p>Such as, override paintComponent instead of paint and it should look like.</p>\n<pre><code>@Override\npublic void paintComponent(Graphics g){\n    super.paintComponent(g);\n    g.drawImage(bf.getScaledInstance(300,200,1),0,0,null );\n}\n</code></pre>\n<p>That way transparency will be handled correctly.</p>\n<p>You shouldn't extend JFrame, you should just create a JFrame.</p>\n<p>When you add components, you there is a layout manager involved. It's good to be aware of that and handle things accordingly. I would change your constructor to.</p>\n<pre><code>public Hauptfenster() {\n\n    JFrame frame = new JFrame();\n    ip = new ImagePanel(&quot;first_image.jpg&quot;);\n    buttonPanel = new JPanel();\n    changeImage = new JButton(&quot;change image&quot;);\n    buttonPanel.add(changeImage);\n\n    changeImage.addActionListener((e) -&gt; {\n        frame.remove(ip);\n        ip = new ImagePanel(&quot;new_image.jpg&quot;);\n        frame.add(ip, BorderLayout.CENTER);\n        frame.repaint();\n    });\n    frame.add(buttonPanel, BorderLayout.SOUTH);\n    frame.add(ip, BorderLayout.CENTER);\n    frame.setVisible(true);\n}\n</code></pre>\n<p>If you need more help, you'll need to actually make your example compilable. There are too many errors right now.</p>\n"}],"owner":{"account_id":23204145,"reputation":3,"user_id":17298601,"display_name":"huel4444"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69795343,"answer_count":1,"score":0,"last_activity_date":1635761975,"creation_date":1635760549,"question_id":69795235,"body_markdown":"I have created a subclass of JPanel to display images. I instantiate this in the constructor of a JFrame and add it to that JFrame. This works perfectly. Then I have added a button with an ActionListener to change that Image. My problem is that the JFrame won&#180;t update although I have tried repainting etc.\r\n\r\nThe subclass of JPanel: \r\n```\r\npublic class ImagePanel extends JPanel {\r\n\r\n    BufferedImage bf;\r\n    public ImagePanel(String dateiname)\r\n    {\r\n        try {\r\n            bf = ImageIO.read(new File(dateiname));\r\n\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public void paint(Graphics g)\r\n    {\r\n        g.drawImage(bf.getScaledInstance(300,200,1),0,0,null );\r\n    }\r\n}\r\n```\r\n\r\nThe JFrame is basically this\r\n```\r\npublic class Hauptfenster extends JFrame {\r\n\r\nprivate JButton changeImage;\r\nprivate JPanel buttonPanel;\r\nprivate ImagePanel ip;\r\n\r\n\r\npublic Hauptfenster {\r\n\r\nip = new ImagePanel(&quot;first_image.jpg&quot;);\r\n\r\nbuttonPanel = new JPanel();\r\nbuttonPanel.add(changeImage);\r\n\r\nchangeImage.addActionListener((e) -&gt; {\r\n\r\nip = new ImagePanel(&quot;new_image.jpg&quot;);\r\nip.setVisible(true);\r\n\r\n\r\n});\r\n\r\n\r\nthis.add(buttonPanel);\r\nthis.add(ip);\r\nthis.setVisible(true);\r\n\r\n}\r\n\r\n}\r\n\r\n```\r\nWhy doesn&#180;t the method in the ActionListener update the ip component in the JFrame Hauptfenster?\r\n\r\n","title":"How can a JPanel be changed after added to JFrame?","body":"<p>I have created a subclass of JPanel to display images. I instantiate this in the constructor of a JFrame and add it to that JFrame. This works perfectly. Then I have added a button with an ActionListener to change that Image. My problem is that the JFrame won´t update although I have tried repainting etc.</p>\n<p>The subclass of JPanel:</p>\n<pre><code>public class ImagePanel extends JPanel {\n\n    BufferedImage bf;\n    public ImagePanel(String dateiname)\n    {\n        try {\n            bf = ImageIO.read(new File(dateiname));\n\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public void paint(Graphics g)\n    {\n        g.drawImage(bf.getScaledInstance(300,200,1),0,0,null );\n    }\n}\n</code></pre>\n<p>The JFrame is basically this</p>\n<pre><code>public class Hauptfenster extends JFrame {\n\nprivate JButton changeImage;\nprivate JPanel buttonPanel;\nprivate ImagePanel ip;\n\n\npublic Hauptfenster {\n\nip = new ImagePanel(&quot;first_image.jpg&quot;);\n\nbuttonPanel = new JPanel();\nbuttonPanel.add(changeImage);\n\nchangeImage.addActionListener((e) -&gt; {\n\nip = new ImagePanel(&quot;new_image.jpg&quot;);\nip.setVisible(true);\n\n\n});\n\n\nthis.add(buttonPanel);\nthis.add(ip);\nthis.setVisible(true);\n\n}\n\n}\n\n</code></pre>\n<p>Why doesn´t the method in the ActionListener update the ip component in the JFrame Hauptfenster?</p>\n"},{"tags":["java","string","period","datetime-parsing"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1635477731,"post_id":69759329,"comment_id":123314735,"body_markdown":"I recommend that you don’t use simple `int` variables for your period. Use a `java.time.Period`. It will make more sense. You can trivially retrieve the numbers from the `Period` in case you should need to. See the answer by Arvind Kumar Avinash.","body":"I recommend that you don’t use simple <code>int</code> variables for your period. Use a <code>java.time.Period</code>. It will make more sense. You can trivially retrieve the numbers from the <code>Period</code> in case you should need to. See the answer by Arvind Kumar Avinash."}],"answers":[{"tags":[],"owner":{"account_id":9725613,"reputation":53334,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635447395,"creation_date":1635447395,"answer_id":69759500,"question_id":69759329,"body_markdown":"I would suggest a regex approach to find each part one by one, as the order may vary\r\n\r\n    static void parse(String value) {\r\n        int year = 0, month = 0, day = 0;\r\n        Matcher m;\r\n        if ((m = year_ptn.matcher(value)).find())\r\n            year = Integer.parseInt(m.group(1));\r\n        if ((m = month_ptn.matcher(value)).find())\r\n            month = Integer.parseInt(m.group(1));\r\n        if ((m = day_ptn.matcher(value)).find())\r\n            day = Integer.parseInt(m.group(1));\r\n\r\n        System.out.format(&quot;y=%2s  m=%2s  d=%2s\\n&quot;, year, month, day);\r\n    }\r\n\r\n    static Pattern year_ptn = Pattern.compile(&quot;(\\\\d+)\\\\s+year&quot;);\r\n    static Pattern month_ptn = Pattern.compile(&quot;(\\\\d+)\\\\s+month&quot;);\r\n    static Pattern day_ptn = Pattern.compile(&quot;(\\\\d+)\\\\s+day&quot;);\r\n\r\n    public static void main(String[] args) {\r\n        List&lt;String&gt; values = Arrays.asList(&quot;1 years, 2 months, 22 days&quot;, &quot;1 years, 1 months, 14 days&quot;,\r\n                &quot;1 months, 1 years, 14 days&quot;, &quot;4 years, 24 days&quot;, &quot;13 years, 21 days&quot;, &quot;9 months, 1 day&quot;);\r\n\r\n        for (String s : values) {\r\n            parse(s);\r\n        }\r\n    }\r\n\r\n\r\n&lt;!-- --&gt;\r\n\r\n    y= 1  m= 2  d=22\r\n    y= 1  m= 1  d=14\r\n    y= 1  m= 1  d=14\r\n    y= 4  m= 0  d=24\r\n    y=13  m= 0  d=21\r\n    y= 0  m= 9  d= 1","title":"How to extract 3 numbers from a String","body":"<p>I would suggest a regex approach to find each part one by one, as the order may vary</p>\n<pre><code>static void parse(String value) {\n    int year = 0, month = 0, day = 0;\n    Matcher m;\n    if ((m = year_ptn.matcher(value)).find())\n        year = Integer.parseInt(m.group(1));\n    if ((m = month_ptn.matcher(value)).find())\n        month = Integer.parseInt(m.group(1));\n    if ((m = day_ptn.matcher(value)).find())\n        day = Integer.parseInt(m.group(1));\n\n    System.out.format(&quot;y=%2s  m=%2s  d=%2s\\n&quot;, year, month, day);\n}\n\nstatic Pattern year_ptn = Pattern.compile(&quot;(\\\\d+)\\\\s+year&quot;);\nstatic Pattern month_ptn = Pattern.compile(&quot;(\\\\d+)\\\\s+month&quot;);\nstatic Pattern day_ptn = Pattern.compile(&quot;(\\\\d+)\\\\s+day&quot;);\n\npublic static void main(String[] args) {\n    List&lt;String&gt; values = Arrays.asList(&quot;1 years, 2 months, 22 days&quot;, &quot;1 years, 1 months, 14 days&quot;,\n            &quot;1 months, 1 years, 14 days&quot;, &quot;4 years, 24 days&quot;, &quot;13 years, 21 days&quot;, &quot;9 months, 1 day&quot;);\n\n    for (String s : values) {\n        parse(s);\n    }\n}\n</code></pre>\n\n<pre><code>y= 1  m= 2  d=22\ny= 1  m= 1  d=14\ny= 1  m= 1  d=14\ny= 4  m= 0  d=24\ny=13  m= 0  d=21\ny= 0  m= 9  d= 1\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8781258,"reputation":291,"user_id":6564819,"display_name":"Eden Katabi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635447544,"creation_date":1635447544,"answer_id":69759531,"question_id":69759329,"body_markdown":"Not really a java programmer but, you can just iterate over the string and do the following.\r\nInt iterator =0;\r\n While(iterator!=str.length)\r\n1.Create a new empty string.\r\n\r\n2.If the current char is a number add it to the string \r\n  advance the iterator and Repeat phase 2.\r\n\r\n3. else if the current char is not a number do the following.\r\n  3.1. Convert the string you created to a number\r\n  3.2 if the current char is &#39;y&#39; its the years, &#39;m&#39; months &#39;d&#39; days.\r\n\r\n4. Move the iterator to the next first number position.\r\n\r\nYou should have all the numbers corrolated to the years,months,days","title":"How to extract 3 numbers from a String","body":"<p>Not really a java programmer but, you can just iterate over the string and do the following.\nInt iterator =0;\nWhile(iterator!=str.length)\n1.Create a new empty string.</p>\n<p>2.If the current char is a number add it to the string\nadvance the iterator and Repeat phase 2.</p>\n<ol start=\"3\">\n<li><p>else if the current char is not a number do the following.\n3.1. Convert the string you created to a number\n3.2 if the current char is 'y' its the years, 'm' months 'd' days.</p>\n</li>\n<li><p>Move the iterator to the next first number position.</p>\n</li>\n</ol>\n<p>You should have all the numbers corrolated to the years,months,days</p>\n"},{"tags":[],"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635447758,"creation_date":1635447758,"answer_id":69759560,"question_id":69759329,"body_markdown":"I would simply use a `switch` block for this.\r\n\r\n\tint years = 0, months = 0, days = 0;\r\n\r\n\tString[] fields = s1.split(&quot;, +&quot;);\r\n\tfor (String field : fields) {\r\n\t\tString[] parts = field.split(&quot; &quot;);\r\n\t\tint value = Integer.parseInt(parts[0]);\r\n\r\n\t\tswitch (parts[1]) {\r\n\t\t\tcase &quot;year&quot;:\r\n\t\t\tcase &quot;years&quot;:\r\n\t\t\t\tyears = value;\r\n\t\t\t\tbreak;\r\n\t\t\tcase &quot;month&quot;:\r\n\t\t\tcase &quot;months&quot;:\r\n\t\t\t\tmonths = value;\r\n\t\t\t\tbreak;\r\n\t\t\tcase &quot;day&quot;:\r\n\t\t\tcase &quot;days&quot;:\r\n\t\t\t\tdays = value;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new IllegalArgumentException(&quot;Unknown time unit: &quot; + parts[1]);\r\n\t\t}\r\n\t}","title":"How to extract 3 numbers from a String","body":"<p>I would simply use a <code>switch</code> block for this.</p>\n<pre><code>int years = 0, months = 0, days = 0;\n\nString[] fields = s1.split(&quot;, +&quot;);\nfor (String field : fields) {\n    String[] parts = field.split(&quot; &quot;);\n    int value = Integer.parseInt(parts[0]);\n\n    switch (parts[1]) {\n        case &quot;year&quot;:\n        case &quot;years&quot;:\n            years = value;\n            break;\n        case &quot;month&quot;:\n        case &quot;months&quot;:\n            months = value;\n            break;\n        case &quot;day&quot;:\n        case &quot;days&quot;:\n            days = value;\n            break;\n        default:\n            throw new IllegalArgumentException(&quot;Unknown time unit: &quot; + parts[1]);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1635467166,"creation_date":1635447870,"answer_id":69759582,"question_id":69759329,"body_markdown":"### Solution using `java.time` API:\r\n\r\nI recommend you use [`java.time.Period`](https://docs.oracle.com/javase/8/docs/api/java/time/Period.html) which is modelled on [ISO-8601 standards](https://en.wikipedia.org/wiki/ISO_8601#Durations) and was introduced with *Java-8* as part of [JSR-310 implementation](https://jcp.org/aboutJava/communityprocess/pfd/jsr310/JSR-310-guide.html).\r\n\r\n**Demo:**\r\n\r\n    import java.time.Period;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    import java.util.stream.Collectors;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tString[] arr = { &quot;1 years, 2 months, 22 days&quot;, &quot;1 years, 1 months, 14 days&quot;, &quot;4 years, 24 days&quot;,\r\n    \t\t\t\t&quot;13 years, 21 days&quot;, &quot;9 months, 1 day&quot; };\r\n    \r\n    \t\tList&lt;Period&gt; periodList = \r\n    \t\t\t\tArrays.stream(arr)\r\n    \t\t\t\t\t.map(s -&gt; Period.parse( \r\n    \t\t\t\t\t\t\t\t&quot;P&quot; + s.replaceAll(&quot;[\\\\s+,]&quot;, &quot;&quot;)\r\n    \t\t\t\t\t\t\t\t\t\t.replaceAll(&quot;years?&quot;,&quot;Y&quot;)\r\n    \t\t\t\t\t\t\t\t\t\t.replaceAll(&quot;months?&quot;, &quot;M&quot;)\r\n    \t\t\t\t\t\t\t\t\t\t.replaceAll(&quot;days?&quot;, &quot;D&quot;)\r\n    \t\t\t\t\t\t\t)\r\n    \t\t\t\t\t)\r\n    \t\t\t\t\t.collect(Collectors.toList());\r\n    \t\t\r\n    \t\tSystem.out.println(periodList);\r\n    \t\t\r\n    \t\t// Now you can retrieve year,  month and day from the Period e.g.\r\n    \t\tperiodList.forEach(p -&gt; \r\n    \t\t\tSystem.out.println(\r\n    \t\t\t\t\tp + &quot; =&gt; &quot; + \r\n    \t\t\t\t\tp.getYears() + &quot; years &quot; + \r\n    \t\t\t\t\tp.getMonths() + &quot; months &quot;+ \r\n    \t\t\t\t\tp.getDays() +&quot; days&quot;\r\n    \t\t\t)\r\n    \t\t);\r\n    \t}\r\n    }\r\n\r\n**Output:**\r\n\r\n    [P1Y2M22D, P1Y1M14D, P4Y24D, P13Y21D, P9M1D]\r\n    P1Y2M22D =&gt; 1 years 2 months 22 days\r\n    P1Y1M14D =&gt; 1 years 1 months 14 days\r\n    P4Y24D =&gt; 4 years 0 months 24 days\r\n    P13Y21D =&gt; 13 years 0 months 21 days\r\n    P9M1D =&gt; 0 years 9 months 1 days\r\n\r\n[&lt;kbd&gt;ONLINE DEMO&lt;/kbd&gt;][1]\r\n\r\nLearn more about the [modern Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html)&lt;sup&gt;*&lt;/sup&gt; from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.\r\n\r\n### Solution using Java RegEx API:\r\n\r\nAnother way of doing it can be by using [`Matcher#find`](https://docs.oracle.com/javase/8/docs/api/java/util/regex/Matcher.html#find--).\r\n\r\n**Demo:**\r\n\r\n    import java.util.Arrays;\r\n    import java.util.regex.Matcher;\r\n    import java.util.regex.Pattern;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tString[] arr = { &quot;1 years, 2 months, 22 days&quot;, &quot;1 years, 1 months, 14 days&quot;, &quot;4 years, 24 days&quot;,\r\n    \t\t\t\t&quot;13 years, 21 days&quot;, &quot;9 months, 1 day&quot; };\r\n    \r\n    \t\tint[] years = new int[arr.length];\r\n    \t\tint[] months = new int[arr.length];\r\n    \t\tint[] days = new int[arr.length];\r\n    \r\n    \t\tPattern yearPattern = Pattern.compile(&quot;\\\\d+(?= year(?:s)?)&quot;);\r\n    \t\tPattern monthPattern = Pattern.compile(&quot;\\\\d+(?= month(?:s)?)&quot;);\r\n    \t\tPattern dayPattern = Pattern.compile(&quot;\\\\d+(?= day(?:s)?)&quot;);\r\n    \r\n    \t\tfor (int i = 0; i &lt; arr.length; i++) {\r\n    \t\t\tMatcher yearMatcher = yearPattern.matcher(arr[i]);\r\n    \t\t\tMatcher monthMatcher = monthPattern.matcher(arr[i]);\r\n    \t\t\tMatcher dayMatcher = dayPattern.matcher(arr[i]);\r\n    \r\n    \t\t\tyears[i] = yearMatcher.find() ? Integer.parseInt(yearMatcher.group()) : 0;\r\n    \t\t\tmonths[i] = monthMatcher.find() ? Integer.parseInt(monthMatcher.group()) : 0;\r\n    \t\t\tdays[i] = dayMatcher.find() ? Integer.parseInt(dayMatcher.group()) : 0;\r\n    \t\t}\r\n    \r\n    \t\t// Display\r\n    \t\tSystem.out.println(Arrays.toString(years));\r\n    \t\tSystem.out.println(Arrays.toString(months));\r\n    \t\tSystem.out.println(Arrays.toString(days));\r\n    \t}\r\n    }\r\n**Output:**\r\n\r\n    [1, 1, 4, 13, 0]\r\n    [2, 1, 0, 0, 9]\r\n    [22, 14, 24, 21, 1]\r\n\r\n[&lt;kbd&gt;ONLINE DEMO&lt;/kbd&gt;][2]\r\n\r\n**Explanation of the regex**:\r\n\r\n  - `\\d+`: One or more digits\r\n  - `(?=` : Start of lookahead assertion pattern\r\n    - ` year` : A whitespace character followed by `year`\r\n    - `(?:s)?` : Optional character, `s`\r\n  - `)` : End of lookahead assertion pattern\r\n\r\nCheck this [regex demo](https://regex101.com/r/mcJuER/1) to understand the regex more closely.\r\n\r\n***\r\n&lt;sup&gt;* If you are working for an Android project and your Android API level is still not compliant with Java-8, check [Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table). Note that Android 8.0 Oreo already provides [support for `java.time`](https://developer.android.com/reference/java/time/package-summary).\r\n&lt;/sup&gt;\r\n\r\n\r\n  [1]: https://ideone.com/5966TZ\r\n  [2]: https://ideone.com/MamLcF\r\n","title":"How to extract 3 numbers from a String","body":"<h3>Solution using <code>java.time</code> API:</h3>\n<p>I recommend you use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Period.html\" rel=\"nofollow noreferrer\"><code>java.time.Period</code></a> which is modelled on <a href=\"https://en.wikipedia.org/wiki/ISO_8601#Durations\" rel=\"nofollow noreferrer\">ISO-8601 standards</a> and was introduced with <em>Java-8</em> as part of <a href=\"https://jcp.org/aboutJava/communityprocess/pfd/jsr310/JSR-310-guide.html\" rel=\"nofollow noreferrer\">JSR-310 implementation</a>.</p>\n<p><strong>Demo:</strong></p>\n<pre><code>import java.time.Period;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.stream.Collectors;\n\npublic class Main {\n    public static void main(String[] args) {\n        String[] arr = { &quot;1 years, 2 months, 22 days&quot;, &quot;1 years, 1 months, 14 days&quot;, &quot;4 years, 24 days&quot;,\n                &quot;13 years, 21 days&quot;, &quot;9 months, 1 day&quot; };\n\n        List&lt;Period&gt; periodList = \n                Arrays.stream(arr)\n                    .map(s -&gt; Period.parse( \n                                &quot;P&quot; + s.replaceAll(&quot;[\\\\s+,]&quot;, &quot;&quot;)\n                                        .replaceAll(&quot;years?&quot;,&quot;Y&quot;)\n                                        .replaceAll(&quot;months?&quot;, &quot;M&quot;)\n                                        .replaceAll(&quot;days?&quot;, &quot;D&quot;)\n                            )\n                    )\n                    .collect(Collectors.toList());\n        \n        System.out.println(periodList);\n        \n        // Now you can retrieve year,  month and day from the Period e.g.\n        periodList.forEach(p -&gt; \n            System.out.println(\n                    p + &quot; =&gt; &quot; + \n                    p.getYears() + &quot; years &quot; + \n                    p.getMonths() + &quot; months &quot;+ \n                    p.getDays() +&quot; days&quot;\n            )\n        );\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>[P1Y2M22D, P1Y1M14D, P4Y24D, P13Y21D, P9M1D]\nP1Y2M22D =&gt; 1 years 2 months 22 days\nP1Y1M14D =&gt; 1 years 1 months 14 days\nP4Y24D =&gt; 4 years 0 months 24 days\nP13Y21D =&gt; 13 years 0 months 21 days\nP9M1D =&gt; 0 years 9 months 1 days\n</code></pre>\n<p><a href=\"https://ideone.com/5966TZ\" rel=\"nofollow noreferrer\"><kbd>ONLINE DEMO</kbd></a></p>\n<p>Learn more about the <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html\" rel=\"nofollow noreferrer\">modern Date-Time API</a><sup>*</sup> from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>.</p>\n<h3>Solution using Java RegEx API:</h3>\n<p>Another way of doing it can be by using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/regex/Matcher.html#find--\" rel=\"nofollow noreferrer\"><code>Matcher#find</code></a>.</p>\n<p><strong>Demo:</strong></p>\n<pre><code>import java.util.Arrays;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\npublic class Main {\n    public static void main(String[] args) {\n        String[] arr = { &quot;1 years, 2 months, 22 days&quot;, &quot;1 years, 1 months, 14 days&quot;, &quot;4 years, 24 days&quot;,\n                &quot;13 years, 21 days&quot;, &quot;9 months, 1 day&quot; };\n\n        int[] years = new int[arr.length];\n        int[] months = new int[arr.length];\n        int[] days = new int[arr.length];\n\n        Pattern yearPattern = Pattern.compile(&quot;\\\\d+(?= year(?:s)?)&quot;);\n        Pattern monthPattern = Pattern.compile(&quot;\\\\d+(?= month(?:s)?)&quot;);\n        Pattern dayPattern = Pattern.compile(&quot;\\\\d+(?= day(?:s)?)&quot;);\n\n        for (int i = 0; i &lt; arr.length; i++) {\n            Matcher yearMatcher = yearPattern.matcher(arr[i]);\n            Matcher monthMatcher = monthPattern.matcher(arr[i]);\n            Matcher dayMatcher = dayPattern.matcher(arr[i]);\n\n            years[i] = yearMatcher.find() ? Integer.parseInt(yearMatcher.group()) : 0;\n            months[i] = monthMatcher.find() ? Integer.parseInt(monthMatcher.group()) : 0;\n            days[i] = dayMatcher.find() ? Integer.parseInt(dayMatcher.group()) : 0;\n        }\n\n        // Display\n        System.out.println(Arrays.toString(years));\n        System.out.println(Arrays.toString(months));\n        System.out.println(Arrays.toString(days));\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>[1, 1, 4, 13, 0]\n[2, 1, 0, 0, 9]\n[22, 14, 24, 21, 1]\n</code></pre>\n<p><a href=\"https://ideone.com/MamLcF\" rel=\"nofollow noreferrer\"><kbd>ONLINE DEMO</kbd></a></p>\n<p><strong>Explanation of the regex</strong>:</p>\n<ul>\n<li><code>\\d+</code>: One or more digits</li>\n<li><code>(?=</code> : Start of lookahead assertion pattern\n<ul>\n<li><code> year</code> : A whitespace character followed by <code>year</code></li>\n<li><code>(?:s)?</code> : Optional character, <code>s</code></li>\n</ul>\n</li>\n<li><code>)</code> : End of lookahead assertion pattern</li>\n</ul>\n<p>Check this <a href=\"https://regex101.com/r/mcJuER/1\" rel=\"nofollow noreferrer\">regex demo</a> to understand the regex more closely.</p>\n<hr />\n<p><sup>* If you are working for an Android project and your Android API level is still not compliant with Java-8, check <a href=\"https://developer.android.com/studio/write/java8-support-table\" rel=\"nofollow noreferrer\">Java 8+ APIs available through desugaring</a>. Note that Android 8.0 Oreo already provides <a href=\"https://developer.android.com/reference/java/time/package-summary\" rel=\"nofollow noreferrer\">support for <code>java.time</code></a>.\n</sup></p>\n"},{"tags":[],"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635493161,"creation_date":1635449415,"answer_id":69759854,"question_id":69759329,"body_markdown":"I would use one regular expression, if the fields must be given in the sequence `years`, `months`, `days`:\r\n````java\r\nvar pattern = Pattern.compile(&quot;(?:(\\\\d+) years?),? ?(?:(\\\\d+) months?),? ?(?:(\\\\d+) days?)&quot;);\r\nvar matcher = pattern.matcher(duracao);\r\nif (matcher.matches()) {\r\n    var anos = Integer.parseInt(Objects.requireNonNullElse(matcher.group(1), &quot;0&quot;));    \r\n    var meses = Integer.parseInt(Objects.requireNonNullElse(matcher.group(2), &quot;0&quot;));\r\n    var dias = Integer.parseInt(Objects.requireNonNullElse(matcher.group(3), &quot;0&quot;));\r\n    ...\r\n} else {\r\n    // mensagem de erro\r\n}\r\n````","title":"How to extract 3 numbers from a String","body":"<p>I would use one regular expression, if the fields must be given in the sequence <code>years</code>, <code>months</code>, <code>days</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var pattern = Pattern.compile(&quot;(?:(\\\\d+) years?),? ?(?:(\\\\d+) months?),? ?(?:(\\\\d+) days?)&quot;);\nvar matcher = pattern.matcher(duracao);\nif (matcher.matches()) {\n    var anos = Integer.parseInt(Objects.requireNonNullElse(matcher.group(1), &quot;0&quot;));    \n    var meses = Integer.parseInt(Objects.requireNonNullElse(matcher.group(2), &quot;0&quot;));\n    var dias = Integer.parseInt(Objects.requireNonNullElse(matcher.group(3), &quot;0&quot;));\n    ...\n} else {\n    // mensagem de erro\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23163786,"reputation":56,"user_id":17264056,"display_name":"Susanne"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635761780,"creation_date":1635761305,"answer_id":69795388,"question_id":69759329,"body_markdown":"Here is another possibility to extract the amount of years,months, days of an item in the list of strings that you have.\r\n\r\nI suggest to use a map of regular expressions and a function to match the regular expressions and return the result as a map of [ChronoUnit][1] | amount pairs.\r\n\r\nHere is some sample code to illustrate my suggestion.\r\n\r\n\r\n     private static final Map&lt;ChronoUnit,String&gt; durationRegexMap = Map.ofEntries(\r\n            Map.entry(ChronoUnit.YEARS,&quot;\\\\d+ (years|year)&quot;),\r\n            Map.entry(ChronoUnit.MONTHS,&quot;\\\\d+ (months|month)&quot;),\r\n            Map.entry(ChronoUnit.DAYS, &quot;\\\\d+ (days|day)&quot;)\r\n    );\r\n\r\n    private Map&lt;ChronoUnit, Integer&gt; parseDuration(String durationString) {\r\n        return new MapStringToChronoUnitsFunction(durationRegexMap)\r\n                .apply(durationString);\r\n    }\r\n\r\n    class MapStringToChronoUnitsFunction implements Function&lt;String, Map&lt;ChronoUnit, Integer&gt;&gt; {\r\n\r\n        Map&lt;ChronoUnit,String&gt; durationRegexMap = new HashMap&lt;&gt;();\r\n\r\n        public MapStringToChronoUnitsFunction(Map&lt;ChronoUnit,String&gt; durationByRegex) {\r\n            durationRegexMap.putAll(durationByRegex);\r\n        }\r\n\r\n        @Override\r\n        public Map&lt;ChronoUnit, Integer&gt; apply(String textWithDurations) {\r\n            String[] splittedTextWithDurations = textWithDurations.split(&quot;,&quot;);\r\n\r\n            return this.durationRegexMap.entrySet().stream()\r\n                    .flatMap(regex -&gt; Arrays.stream(splittedTextWithDurations)\r\n                            .map(String::trim)\r\n                            .filter(trimmedDurationString -&gt; trimmedDurationString.matches(regex.getValue()))\r\n                            .map(matchingTrimmedDurationString -&gt; matchingTrimmedDurationString.replaceAll(&quot;\\\\w+[a-zA-Z]&quot;, &quot; &quot;))\r\n                            .map(String::trim)\r\n                            .map(t -&gt; Map.entry(regex.getKey(),Integer.valueOf(t))))\r\n                    .collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\r\n        }\r\n    }\r\n\r\n\r\nThe function call would look like this\r\n\r\n    Map&lt;ChronoUnit, Integer&gt; durationList = chronoUnitsMapper.parseDuration(&quot;1 years, 2 months, 22 days&quot;);\r\n\r\n \r\nThe function `MapStringToChronoUnitsFunction` runs through the regular expressions that are registered in `durationRegexMap`. It matches each comma separated part of an input string against a regular expression and returns the match result as `ChronoUnit` and value pair.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/11/docs/api/java/time/temporal/ChronoUnit.html","title":"How to extract 3 numbers from a String","body":"<p>Here is another possibility to extract the amount of years,months, days of an item in the list of strings that you have.</p>\n<p>I suggest to use a map of regular expressions and a function to match the regular expressions and return the result as a map of <a href=\"https://docs.oracle.com/javase/11/docs/api/java/time/temporal/ChronoUnit.html\" rel=\"nofollow noreferrer\">ChronoUnit</a> | amount pairs.</p>\n<p>Here is some sample code to illustrate my suggestion.</p>\n<pre><code> private static final Map&lt;ChronoUnit,String&gt; durationRegexMap = Map.ofEntries(\n        Map.entry(ChronoUnit.YEARS,&quot;\\\\d+ (years|year)&quot;),\n        Map.entry(ChronoUnit.MONTHS,&quot;\\\\d+ (months|month)&quot;),\n        Map.entry(ChronoUnit.DAYS, &quot;\\\\d+ (days|day)&quot;)\n);\n\nprivate Map&lt;ChronoUnit, Integer&gt; parseDuration(String durationString) {\n    return new MapStringToChronoUnitsFunction(durationRegexMap)\n            .apply(durationString);\n}\n\nclass MapStringToChronoUnitsFunction implements Function&lt;String, Map&lt;ChronoUnit, Integer&gt;&gt; {\n\n    Map&lt;ChronoUnit,String&gt; durationRegexMap = new HashMap&lt;&gt;();\n\n    public MapStringToChronoUnitsFunction(Map&lt;ChronoUnit,String&gt; durationByRegex) {\n        durationRegexMap.putAll(durationByRegex);\n    }\n\n    @Override\n    public Map&lt;ChronoUnit, Integer&gt; apply(String textWithDurations) {\n        String[] splittedTextWithDurations = textWithDurations.split(&quot;,&quot;);\n\n        return this.durationRegexMap.entrySet().stream()\n                .flatMap(regex -&gt; Arrays.stream(splittedTextWithDurations)\n                        .map(String::trim)\n                        .filter(trimmedDurationString -&gt; trimmedDurationString.matches(regex.getValue()))\n                        .map(matchingTrimmedDurationString -&gt; matchingTrimmedDurationString.replaceAll(&quot;\\\\w+[a-zA-Z]&quot;, &quot; &quot;))\n                        .map(String::trim)\n                        .map(t -&gt; Map.entry(regex.getKey(),Integer.valueOf(t))))\n                .collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\n    }\n}\n</code></pre>\n<p>The function call would look like this</p>\n<pre><code>Map&lt;ChronoUnit, Integer&gt; durationList = chronoUnitsMapper.parseDuration(&quot;1 years, 2 months, 22 days&quot;);\n</code></pre>\n<p>The function <code>MapStringToChronoUnitsFunction</code> runs through the regular expressions that are registered in <code>durationRegexMap</code>. It matches each comma separated part of an input string against a regular expression and returns the match result as <code>ChronoUnit</code> and value pair.</p>\n"}],"owner":{"account_id":2449433,"reputation":627,"user_id":2280645,"accept_rate":96,"display_name":"KenobiBastila"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":350,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":69759582,"answer_count":6,"score":3,"last_activity_date":1635761780,"creation_date":1635446481,"question_id":69759329,"body_markdown":"I have an array of strings that contains the following:\r\n\r\n    &quot;1 years, 2 months, 22 days&quot;,\r\n    &quot;1 years, 1 months, 14 days&quot;,\r\n    &quot;4 years, 24 days&quot;,\r\n    &quot;13 years, 21 days&quot;,\r\n    &quot;9 months, 1 day&quot;;\r\n\r\nI need to extract the amount of years,months, days of each item in the list.\r\n\r\nWhat I have tried and failed:\r\n\r\n    String[] split = duracao.split(&quot;,&quot;);\r\n\r\n    if (split.length &gt;= 3) {\r\n\r\n        anos = Integer.parseInt(split[0].replaceAll(&quot;[^-?0-9]+&quot;, &quot;&quot;));\r\n        meses = Integer.parseInt(split[1].replaceAll(&quot;[^-?0-9]+&quot;, &quot;&quot;));\r\n        dias = Integer.parseInt(split[2].replaceAll(&quot;[^-?0-9]+&quot;, &quot;&quot;));\r\n    } else if (split.length &gt;= 2) {\r\n\r\n        meses = Integer.parseInt(split[0].replaceAll(&quot;[^-?0-9]+&quot;, &quot;&quot;));\r\n        dias = Integer.parseInt(split[1].replaceAll(&quot;[^-?0-9]+&quot;, &quot;&quot;));\r\n    } else if (split.length &gt;= 1) {\r\n\r\n        dias = Integer.parseInt(split[0].replaceAll(&quot;[^-?0-9]+&quot;, &quot;&quot;));\r\n    }\r\n\r\n\r\nIt doesnt work because sometimes the first item in the String is years, and sometimes its months.\r\n\r\n\r\nIs it possible to use regex to achieve what I want?\r\nTo deal with the &quot;plurarism&quot;, I can do :\r\n\r\n    duration = duration.replace(&quot;months&quot;, &quot;month&quot;);\r\n    duration = duration.replace(&quot;days&quot;, &quot;day&quot;);\r\n    duration = duration.replace(&quot;years&quot;, &quot;year&quot;);\r\n\r\n\r\nBut now How do I extract the data I need?\r\n","title":"How to extract 3 numbers from a String","body":"<p>I have an array of strings that contains the following:</p>\n<pre><code>&quot;1 years, 2 months, 22 days&quot;,\n&quot;1 years, 1 months, 14 days&quot;,\n&quot;4 years, 24 days&quot;,\n&quot;13 years, 21 days&quot;,\n&quot;9 months, 1 day&quot;;\n</code></pre>\n<p>I need to extract the amount of years,months, days of each item in the list.</p>\n<p>What I have tried and failed:</p>\n<pre><code>String[] split = duracao.split(&quot;,&quot;);\n\nif (split.length &gt;= 3) {\n\n    anos = Integer.parseInt(split[0].replaceAll(&quot;[^-?0-9]+&quot;, &quot;&quot;));\n    meses = Integer.parseInt(split[1].replaceAll(&quot;[^-?0-9]+&quot;, &quot;&quot;));\n    dias = Integer.parseInt(split[2].replaceAll(&quot;[^-?0-9]+&quot;, &quot;&quot;));\n} else if (split.length &gt;= 2) {\n\n    meses = Integer.parseInt(split[0].replaceAll(&quot;[^-?0-9]+&quot;, &quot;&quot;));\n    dias = Integer.parseInt(split[1].replaceAll(&quot;[^-?0-9]+&quot;, &quot;&quot;));\n} else if (split.length &gt;= 1) {\n\n    dias = Integer.parseInt(split[0].replaceAll(&quot;[^-?0-9]+&quot;, &quot;&quot;));\n}\n</code></pre>\n<p>It doesnt work because sometimes the first item in the String is years, and sometimes its months.</p>\n<p>Is it possible to use regex to achieve what I want?\nTo deal with the &quot;plurarism&quot;, I can do :</p>\n<pre><code>duration = duration.replace(&quot;months&quot;, &quot;month&quot;);\nduration = duration.replace(&quot;days&quot;, &quot;day&quot;);\nduration = duration.replace(&quot;years&quot;, &quot;year&quot;);\n</code></pre>\n<p>But now How do I extract the data I need?</p>\n"},{"tags":["java","multithreading","intellij-idea","chromium-embedded"],"answers":[{"tags":[],"owner":{"account_id":3169,"reputation":24379,"user_id":4510,"display_name":"Bas Leijdekkers"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1635761204,"creation_date":1635586887,"answer_id":69778424,"question_id":69777679,"body_markdown":"A time consuming task should be performed under a progress indicator, see `com.intellij.openapi.progress.ProgressManager`. During the task you can then call `com.intellij.openapi.progress.ProgressManager#checkCanceled` to see if the task has been canceled by the user. This call is supposed to be cheap, so you can call it often to make sure your process responds promptly to the users&#39; request for cancellation.","title":"Is it possible to interrupt a runnable called by ApplicationManager.getApplication().executeOnPooledThread?","body":"<p>A time consuming task should be performed under a progress indicator, see <code>com.intellij.openapi.progress.ProgressManager</code>. During the task you can then call <code>com.intellij.openapi.progress.ProgressManager#checkCanceled</code> to see if the task has been canceled by the user. This call is supposed to be cheap, so you can call it often to make sure your process responds promptly to the users' request for cancellation.</p>\n"}],"owner":{"account_id":12559944,"reputation":37,"user_id":14286534,"display_name":"C. Augustus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":153,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69778424,"answer_count":1,"score":0,"last_activity_date":1635761204,"creation_date":1635579735,"question_id":69777679,"body_markdown":"I am currently working on developing an IDEA extension that embeds JCEF for frontend interaction. Once the user clicks on a button, the implemented `onQuery` method in `MessageRouterHandler` would be executed, and a time-consuming task would be performed.\r\n\r\nThe time-consuming task is implemented in a method (asynchronous on a thread other than the main thread in case the UI to be frozen) and is wrapped in a form like\r\n```\r\nprivate void task(CefBrowser browser, CefQueryCallback callback) {\r\n    ApplicationManager.getApplication().executeOnPooledThread(() -&gt; {\r\n        ...DETAILED IMPLEMENTATION FOR THE TASK...\r\n    });\r\n}\r\n```\r\nThe runnable only contains the operation related to file reading (selected by the user clicking on another button on the JCEF webview) and has nothing to do with the IDE interface so I did not add `runWriteAction` or `runReadAction` here.\r\n\r\nSince the task might take a longer time, I would like to add a button for the user&#39;s cancelling order. However, I am quite new to extension development, and could anyone help me to figure out how to implement the **cancel** function? Great great many thanks for any suggestions.","title":"Is it possible to interrupt a runnable called by ApplicationManager.getApplication().executeOnPooledThread?","body":"<p>I am currently working on developing an IDEA extension that embeds JCEF for frontend interaction. Once the user clicks on a button, the implemented <code>onQuery</code> method in <code>MessageRouterHandler</code> would be executed, and a time-consuming task would be performed.</p>\n<p>The time-consuming task is implemented in a method (asynchronous on a thread other than the main thread in case the UI to be frozen) and is wrapped in a form like</p>\n<pre><code>private void task(CefBrowser browser, CefQueryCallback callback) {\n    ApplicationManager.getApplication().executeOnPooledThread(() -&gt; {\n        ...DETAILED IMPLEMENTATION FOR THE TASK...\n    });\n}\n</code></pre>\n<p>The runnable only contains the operation related to file reading (selected by the user clicking on another button on the JCEF webview) and has nothing to do with the IDE interface so I did not add <code>runWriteAction</code> or <code>runReadAction</code> here.</p>\n<p>Since the task might take a longer time, I would like to add a button for the user's cancelling order. However, I am quite new to extension development, and could anyone help me to figure out how to implement the <strong>cancel</strong> function? Great great many thanks for any suggestions.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1635760102,"post_id":69795121,"comment_id":123370926,"body_markdown":"Advice? What is the problem? And what is the question?","body":"Advice? What is the problem? And what is the question?"},{"owner":{"account_id":2802711,"reputation":1786,"user_id":2410641,"accept_rate":95,"display_name":"ashu"},"score":0,"creation_date":1635760142,"post_id":69795121,"comment_id":123370940,"body_markdown":"https://github.com/scottyab/rootbeer","body":"<a href=\"https://github.com/scottyab/rootbeer\" rel=\"nofollow noreferrer\">github.com/scottyab/rootbeer</a>"},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":1,"creation_date":1635760153,"post_id":69795121,"comment_id":123370946,"body_markdown":"Superuser is pretty outdated, modern devices are all rooted via Magisk. But with root permissions you can hide everything from an app. Perform at least Google SafetyNet check and validate the result on server side.","body":"Superuser is pretty outdated, modern devices are all rooted via Magisk. But with root permissions you can hide everything from an app. Perform at least Google SafetyNet check and validate the result on server side."},{"owner":{"account_id":1642711,"reputation":19842,"user_id":1514861,"accept_rate":86,"display_name":"Ivo"},"score":0,"creation_date":1635760208,"post_id":69795121,"comment_id":123370960,"body_markdown":"&quot;security expert saying it can be installed&quot;. Is installing or running the requirement? because preventing installing is impossible I think. As for running, maybe this question helps: https://stackoverflow.com/questions/27540545/how-to-prevent-rooted-android-phones-from-installing-my-app","body":"&quot;security expert saying it can be installed&quot;. Is installing or running the requirement? because preventing installing is impossible I think. As for running, maybe this question helps: <a href=\"https://stackoverflow.com/questions/27540545/how-to-prevent-rooted-android-phones-from-installing-my-app\" title=\"how to prevent rooted android phones from installing my app\">stackoverflow.com/questions/27540545/&hellip;</a>"},{"owner":{"account_id":1598249,"reputation":6617,"user_id":1479853,"accept_rate":72,"display_name":"someone"},"score":0,"creation_date":1635762745,"post_id":69795121,"comment_id":123371858,"body_markdown":"@Robert you comment was useful SafetyNet has several limitations, hence checking for alternative solutions.","body":"@Robert you comment was useful SafetyNet has several limitations, hence checking for alternative solutions."},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1635764982,"post_id":69795121,"comment_id":123372652,"body_markdown":"Google SafetyNet check is the only solution that can not bypassed (on some devices) as it is executed in TEE. Therefore there is no alternative providing the same.","body":"Google SafetyNet check is the only solution that can not bypassed (on some devices) as it is executed in TEE. Therefore there is no alternative providing the same."}],"owner":{"account_id":1598249,"reputation":6617,"user_id":1479853,"accept_rate":72,"display_name":"someone"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":360,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1635760816,"creation_date":1635759920,"question_id":69795121,"body_markdown":"\r\nI&#39;m using following code for root detection in Android device. But still my security expert saying it can be installed and run in rooted device. Could someone detect what the issue with my code\r\n\r\n    public static boolean isDeviceRooted() {\r\n      // get from build info\r\n      String buildTags = android.os.Build.TAGS;\r\n      if (buildTags != null &amp;&amp; buildTags.contains(&quot;test-keys&quot;)) {\r\n        return true;\r\n      }\r\n      return checkFiles() || checkLocations();\r\n      }\r\n       private static boolean checkFiles(){\r\n    String[] files = {\r\n        &quot;/system/app/Superuser.apk&quot;,\r\n        &quot;/system/etc/init.d/99SuperSUDaemon&quot;,\r\n        &quot;/dev/com.koushikdutta.superuser.daemon/&quot;,\r\n        &quot;/system/xbin/daemonsu&quot;\r\n    };\r\n    for (String fileData : files) {\r\n        try {\r\n            File file = new File(fileData);\r\n            if (file.exists()) {\r\n                return true;\r\n            }\r\n        } catch (Exception e1) {\r\n              // ignore\r\n        }\r\n    }\r\n    return false;\r\n      }\r\n       private static boolean checkLocations(){\r\n    String su = &quot;su&quot;;\r\n    String[] locations = {\r\n        &quot;/system/bin/&quot;,\r\n        &quot;/system/xbin/&quot;,\r\n        &quot;/sbin/&quot;,\r\n        &quot;/system/sd/xbin/&quot;,\r\n        &quot;/system/bin/failsafe/&quot;,\r\n        &quot;/data/local/xbin/&quot;,\r\n        &quot;/data/local/bin/&quot;,\r\n        &quot;/data/local/&quot;,\r\n        &quot;/system/sbin/&quot;,\r\n        &quot;/usr/bin/&quot;,\r\n        &quot;/vendor/bin/&quot;\r\n    };\r\n    for (String location : locations) {\r\n        if (new File(location + su).exists()) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n      }","title":"Android root detection not working with mentioned code","body":"<p>I'm using following code for root detection in Android device. But still my security expert saying it can be installed and run in rooted device. Could someone detect what the issue with my code</p>\n<pre><code>public static boolean isDeviceRooted() {\n  // get from build info\n  String buildTags = android.os.Build.TAGS;\n  if (buildTags != null &amp;&amp; buildTags.contains(&quot;test-keys&quot;)) {\n    return true;\n  }\n  return checkFiles() || checkLocations();\n  }\n   private static boolean checkFiles(){\nString[] files = {\n    &quot;/system/app/Superuser.apk&quot;,\n    &quot;/system/etc/init.d/99SuperSUDaemon&quot;,\n    &quot;/dev/com.koushikdutta.superuser.daemon/&quot;,\n    &quot;/system/xbin/daemonsu&quot;\n};\nfor (String fileData : files) {\n    try {\n        File file = new File(fileData);\n        if (file.exists()) {\n            return true;\n        }\n    } catch (Exception e1) {\n          // ignore\n    }\n}\nreturn false;\n  }\n   private static boolean checkLocations(){\nString su = &quot;su&quot;;\nString[] locations = {\n    &quot;/system/bin/&quot;,\n    &quot;/system/xbin/&quot;,\n    &quot;/sbin/&quot;,\n    &quot;/system/sd/xbin/&quot;,\n    &quot;/system/bin/failsafe/&quot;,\n    &quot;/data/local/xbin/&quot;,\n    &quot;/data/local/bin/&quot;,\n    &quot;/data/local/&quot;,\n    &quot;/system/sbin/&quot;,\n    &quot;/usr/bin/&quot;,\n    &quot;/vendor/bin/&quot;\n};\nfor (String location : locations) {\n    if (new File(location + su).exists()) {\n        return true;\n    }\n}\nreturn false;\n  }\n</code></pre>\n"},{"tags":["java","docker-compose","redis","jedis","redis-server"],"comments":[{"owner":{"account_id":8218454,"reputation":762,"user_id":6183889,"display_name":"Tom Elias"},"score":0,"creation_date":1635759651,"post_id":69795053,"comment_id":123370765,"body_markdown":"why is it failing? please post the exception and relevant logs.","body":"why is it failing? please post the exception and relevant logs."},{"owner":{"account_id":2872559,"reputation":79,"user_id":2465532,"display_name":"ss-ss-v1"},"score":0,"creation_date":1635759753,"post_id":69795053,"comment_id":123370803,"body_markdown":"@TomElias added error logs","body":"@TomElias added error logs"}],"answers":[{"tags":[],"owner":{"account_id":8218454,"reputation":762,"user_id":6183889,"display_name":"Tom Elias"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1635760235,"creation_date":1635760235,"answer_id":69795186,"question_id":69795053,"body_markdown":"i think your Redis container does not expose ports outside for connection, only the commander exposes 8002. (try connecting to localhost:8002). docker compose creates a default &quot;bridge&quot; network so the containers can talk between themselves, but not outside unless you expose ports. the commander can connect to REDIS since they are on the same network.","title":"Connect to Redis using java code if there is docker compose of Redis and Redis Commander","body":"<p>i think your Redis container does not expose ports outside for connection, only the commander exposes 8002. (try connecting to localhost:8002). docker compose creates a default &quot;bridge&quot; network so the containers can talk between themselves, but not outside unless you expose ports. the commander can connect to REDIS since they are on the same network.</p>\n"}],"owner":{"account_id":2872559,"reputation":79,"user_id":2465532,"display_name":"ss-ss-v1"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":517,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69795186,"answer_count":1,"score":0,"last_activity_date":1635760719,"creation_date":1635759539,"question_id":69795053,"body_markdown":"I am trying to connect to Redis using below Java code with Jedis library but connection is failng can someonen please help on this ?.\r\n```\r\nJedis jedis = new Jedis(&quot;localhost&quot;);\r\nString pingResponse = jedis.ping();\r\nSystem.out.println(&quot;ping should return pong&quot; + pingResponse);\r\n```\r\nand this is my docker-compose file\r\n```\r\nversion: &#39;3&#39;\r\nservices:\r\n  redis:\r\n    container_name: redis\r\n    hostname: redis\r\n    image: redis\r\n\r\n  redis-commander:\r\n    container_name: redis-commander\r\n    hostname: redis-commander\r\n    image: rediscommander/redis-commander:latest\r\n    restart: always\r\n    environment:\r\n    - REDIS_HOSTS=local:redis:6379\r\n    ports:\r\n    - &quot;8082:8081&quot;\r\n```\r\n\r\nbelow is the exception I am getting :\r\n```\r\nException in thread &quot;main&quot; redis.clients.jedis.exceptions.JedisConnectionException: Failed connecting to host redis:6379\r\n\tat redis.clients.jedis.Connection.connect(Connection.java:204)\r\n\tat redis.clients.jedis.BinaryClient.connect(BinaryClient.java:100)\r\n\tat redis.clients.jedis.Connection.sendCommand(Connection.java:125)\r\n\tat redis.clients.jedis.Connection.sendCommand(Connection.java:120)\r\n\tat redis.clients.jedis.BinaryClient.ping(BinaryClient.java:113)\r\n\tat redis.clients.jedis.BinaryJedis.ping(BinaryJedis.java:188)\r\n\tat com.altimetrik.demo.bean.Sample.main(Sample.java:23)\r\n```","title":"Connect to Redis using java code if there is docker compose of Redis and Redis Commander","body":"<p>I am trying to connect to Redis using below Java code with Jedis library but connection is failng can someonen please help on this ?.</p>\n<pre><code>Jedis jedis = new Jedis(&quot;localhost&quot;);\nString pingResponse = jedis.ping();\nSystem.out.println(&quot;ping should return pong&quot; + pingResponse);\n</code></pre>\n<p>and this is my docker-compose file</p>\n<pre><code>version: '3'\nservices:\n  redis:\n    container_name: redis\n    hostname: redis\n    image: redis\n\n  redis-commander:\n    container_name: redis-commander\n    hostname: redis-commander\n    image: rediscommander/redis-commander:latest\n    restart: always\n    environment:\n    - REDIS_HOSTS=local:redis:6379\n    ports:\n    - &quot;8082:8081&quot;\n</code></pre>\n<p>below is the exception I am getting :</p>\n<pre><code>Exception in thread &quot;main&quot; redis.clients.jedis.exceptions.JedisConnectionException: Failed connecting to host redis:6379\n    at redis.clients.jedis.Connection.connect(Connection.java:204)\n    at redis.clients.jedis.BinaryClient.connect(BinaryClient.java:100)\n    at redis.clients.jedis.Connection.sendCommand(Connection.java:125)\n    at redis.clients.jedis.Connection.sendCommand(Connection.java:120)\n    at redis.clients.jedis.BinaryClient.ping(BinaryClient.java:113)\n    at redis.clients.jedis.BinaryJedis.ping(BinaryJedis.java:188)\n    at com.altimetrik.demo.bean.Sample.main(Sample.java:23)\n</code></pre>\n"},{"tags":["java","algorithm","time-complexity"],"answers":[{"tags":[],"owner":{"account_id":17832421,"reputation":4234,"user_id":12952113,"display_name":"Alex Sveshnikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1635760403,"creation_date":1635760403,"answer_id":69795211,"question_id":69794970,"body_markdown":"For some value of `i` you&#39;ll try all values of `j` from `i` to `n`. And for each `j` you&#39;ll calculate the sum of `j-i` elements. You&#39;ll need O(0 + 1 + ... + (n-i))=O((n-i)^2) operations for that. So for all possible values of `i` you&#39;ll need O(n^2 + (n-1)^2 + ... + 2^2 + 1^2) = O(n^3) operations. Answer: O(n^3).","title":"Analysing the time complexity of a Leetcode problem &quot;974. Subarray Sums Divisible by K&quot;","body":"<p>For some value of <code>i</code> you'll try all values of <code>j</code> from <code>i</code> to <code>n</code>. And for each <code>j</code> you'll calculate the sum of <code>j-i</code> elements. You'll need O(0 + 1 + ... + (n-i))=O((n-i)^2) operations for that. So for all possible values of <code>i</code> you'll need O(n^2 + (n-1)^2 + ... + 2^2 + 1^2) = O(n^3) operations. Answer: O(n^3).</p>\n"}],"owner":{"account_id":18882731,"reputation":13,"user_id":13774794,"display_name":"Navjyot Bhele"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69795211,"answer_count":1,"score":0,"last_activity_date":1635760403,"creation_date":1635758927,"question_id":69794970,"body_markdown":"I came up to an algorithm to solve this problem. however i am not preety sure what excactly is the time complexity of this solution. Is it O(n^3) or O(n^2) .I want to know what is the time complexity of the given function subarraysDivByK? Please help\r\n\r\n```class Solution \r\n{\r\n    public int subarraysDivByK(int[] A, int K) \r\n    {\r\n        int n = A.length;\r\n        int count = 0;\r\n        for(int i=0;i&lt;n;i++)\r\n        {\r\n            for(int j=i;j&lt;n;j++)\r\n            {\r\n                int sumWindow = findSum(A,i,j);\r\n                if(sumWindow%K==0)\r\n                {\r\n                    count++;\r\n                }\r\n            }\r\n        }\r\n        return count;\r\n    }\r\n    \r\n    public int findSum(int[] a, int start, int end)\r\n    {\r\n        int sum = 0;\r\n        for(int i = start;i&lt;=end;i++)\r\n        {\r\n            sum = sum + a[i];\r\n        }\r\n        return sum;\r\n    }\r\n}\r\n\r\n```\r\n\r\n","title":"Analysing the time complexity of a Leetcode problem &quot;974. Subarray Sums Divisible by K&quot;","body":"<p>I came up to an algorithm to solve this problem. however i am not preety sure what excactly is the time complexity of this solution. Is it O(n^3) or O(n^2) .I want to know what is the time complexity of the given function subarraysDivByK? Please help</p>\n<pre><code>{\n    public int subarraysDivByK(int[] A, int K) \n    {\n        int n = A.length;\n        int count = 0;\n        for(int i=0;i&lt;n;i++)\n        {\n            for(int j=i;j&lt;n;j++)\n            {\n                int sumWindow = findSum(A,i,j);\n                if(sumWindow%K==0)\n                {\n                    count++;\n                }\n            }\n        }\n        return count;\n    }\n    \n    public int findSum(int[] a, int start, int end)\n    {\n        int sum = 0;\n        for(int i = start;i&lt;=end;i++)\n        {\n            sum = sum + a[i];\n        }\n        return sum;\n    }\n}\n\n</code></pre>\n"},{"tags":["java","spring","spring-boot","resilience4j","resilience4j-retry"],"answers":[{"tags":[],"owner":{"account_id":15585153,"reputation":1806,"user_id":11243901,"display_name":"Arun Sai Mustyala"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1635760194,"creation_date":1635760194,"answer_id":69795174,"question_id":69792829,"body_markdown":"\r\n**Q:** Does a fallback method need to be implemented in order for retry functionality to work?\r\n\r\n**Ans:** No, ***Fallback*** is ***optional*** in Resilience4J Retry feature.\r\n\r\n***Behaviour*** of  `Resilience4J Retry`:\r\n\r\n1. At startup, resilience retry loads the configuration from application.properties/yml if configured else will initialize with default values as mentioned [here in the documentation][1].\r\n\r\n2. When a method annotated with @Retry is invoked, then it will be under retry monitor.\r\n\r\n3. If property `resilience4j.retry.instances.&lt;instance name&gt;.retryExceptions` is configured explicitly then only the configured exceptions will be considered as a failure and retry will be triggered for only these failures and for the rest of the exceptions it behaves normal without the retry feature.\r\n\r\n4. When an expected exception is occurred under `@retry` annotated method, then it won&#39;t log anything about the exception but it retries the same method as per the `maxAttempts` property configured. Default value of `maxAttempts` property is `3`. Ater the maxAttempts it throws the exceptions and can be seen in the log.\r\n\r\n5. There are also properties like `waitDuration`, `intervalFunction`, `ignoreExceptions`.. e.tc which can be explicitly configured. For more look at the documentation link.\r\n\r\n6. To see actually what&#39;s happening during an event of exception in the method annotated with `@retry`, Enable the RetryRegistry event consumer to print the events received to it.\r\n\r\nExample Code for RetryRegistry event listener:\r\n\r\n\r\n    package com.resilience.retry.config;\r\n    \r\n    import javax.annotation.PostConstruct;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    import io.github.resilience4j.retry.RetryRegistry;\r\n    import lombok.extern.slf4j.Slf4j;\r\n    \r\n    @Component\r\n    @Slf4j\r\n    public class RetryRegistryEventListener {\r\n    \r\n    \t@Autowired\r\n    \tprivate RetryRegistry registry;\r\n    \r\n\r\n    \t@PostConstruct\r\n    \tpublic void postConstruct() {\r\n            //registry.retry(&lt;resilience retry instance name&gt;)\r\n    \t\tregistry.retry(&quot;sample-api&quot;).getEventPublisher()\r\n    \t\t\t\t.onRetry(ev -&gt; log.info(&quot;#### RetryRegistryEventListener message: {}&quot;, ev));\r\n    \t}\r\n    }\r\n\r\n\r\n&gt; example log:\r\n\r\n    2021-11-01 14:55:12.337  INFO 18176 --- [nio-8080-exec-1] c.r.retry.controller.RetryController     : Sample Api call receieved\r\n    2021-11-01 14:55:12.345  INFO 18176 --- [nio-8080-exec-1] c.r.r.config.RetryRegistryEventListener  : #### RetryRegistryEventListener message: 2021-11-01T14:55:12.344325600+05:30[Asia/Calcutta]: Retry &#39;sample-api&#39;, waiting PT10S until attempt &#39;1&#39;. Last attempt failed with exception &#39;org.springframework.web.client.HttpServerErrorException: 500 INTERNAL_SERVER_ERROR&#39;.\r\n    2021-11-01 14:55:12.350  INFO 18176 --- [nio-8080-exec-1] c.r.retry.controller.RetryController     : messsage: 2021-11-01T14:55:12.344325600+05:30[Asia/Calcutta]: Retry &#39;sample-api&#39;, waiting PT10S until attempt &#39;1&#39;. Last attempt failed with exception &#39;org.springframework.web.client.HttpServerErrorException: 500 INTERNAL_SERVER_ERROR&#39;.\r\n    2021-11-01 14:55:22.359  INFO 18176 --- [nio-8080-exec-1] c.r.retry.controller.RetryController     : Sample Api call receieved\r\n    2021-11-01 14:55:22.360  INFO 18176 --- [nio-8080-exec-1] c.r.r.config.RetryRegistryEventListener  : #### RetryRegistryEventListener message: 2021-11-01T14:55:22.360672900+05:30[Asia/Calcutta]: Retry &#39;sample-api&#39;, waiting PT10S until attempt &#39;2&#39;. Last attempt failed with exception &#39;org.springframework.web.client.HttpServerErrorException: 500 INTERNAL_SERVER_ERROR&#39;.\r\n    2021-11-01 14:55:22.361  INFO 18176 --- [nio-8080-exec-1] c.r.retry.controller.RetryController     : messsage: 2021-11-01T14:55:22.360672900+05:30[Asia/Calcutta]: Retry &#39;sample-api&#39;, waiting PT10S until attempt &#39;2&#39;. Last attempt failed with exception &#39;org.springframework.web.client.HttpServerErrorException: 500 INTERNAL_SERVER_ERROR&#39;.\r\n\r\n\r\n\r\n@FerdTurgusen: I believe there is some mistake in your code else it would be working fine. With the given information in the question i was unable to exactly find the issue. Hence, I have created a sample spring boot with resilience4j example, replicated your issue and it&#39;s working fine for me, hence uploaded to Github for your reference. I suggest you to add RetryRegistryEventListener class and find the issue in event logs, if still not resolved please share the event listener log.\r\n\r\n***Github Reference***: [sample spring-boot with resilience4j retry project][2]\r\n\r\n\r\n  [1]: https://resilience4j.readme.io/docs/retry\r\n  [2]: https://github.com/arunsai271/Resilience-Retry-Example","title":"What is the expected behavior of Resilience4J Retry?","body":"<p><strong>Q:</strong> Does a fallback method need to be implemented in order for retry functionality to work?</p>\n<p><strong>Ans:</strong> No, <em><strong>Fallback</strong></em> is <em><strong>optional</strong></em> in Resilience4J Retry feature.</p>\n<p><em><strong>Behaviour</strong></em> of  <code>Resilience4J Retry</code>:</p>\n<ol>\n<li><p>At startup, resilience retry loads the configuration from application.properties/yml if configured else will initialize with default values as mentioned <a href=\"https://resilience4j.readme.io/docs/retry\" rel=\"noreferrer\">here in the documentation</a>.</p>\n</li>\n<li><p>When a method annotated with @Retry is invoked, then it will be under retry monitor.</p>\n</li>\n<li><p>If property <code>resilience4j.retry.instances.&lt;instance name&gt;.retryExceptions</code> is configured explicitly then only the configured exceptions will be considered as a failure and retry will be triggered for only these failures and for the rest of the exceptions it behaves normal without the retry feature.</p>\n</li>\n<li><p>When an expected exception is occurred under <code>@retry</code> annotated method, then it won't log anything about the exception but it retries the same method as per the <code>maxAttempts</code> property configured. Default value of <code>maxAttempts</code> property is <code>3</code>. Ater the maxAttempts it throws the exceptions and can be seen in the log.</p>\n</li>\n<li><p>There are also properties like <code>waitDuration</code>, <code>intervalFunction</code>, <code>ignoreExceptions</code>.. e.tc which can be explicitly configured. For more look at the documentation link.</p>\n</li>\n<li><p>To see actually what's happening during an event of exception in the method annotated with <code>@retry</code>, Enable the RetryRegistry event consumer to print the events received to it.</p>\n</li>\n</ol>\n<p>Example Code for RetryRegistry event listener:</p>\n<pre><code>package com.resilience.retry.config;\n\nimport javax.annotation.PostConstruct;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Component;\n\nimport io.github.resilience4j.retry.RetryRegistry;\nimport lombok.extern.slf4j.Slf4j;\n\n@Component\n@Slf4j\npublic class RetryRegistryEventListener {\n\n    @Autowired\n    private RetryRegistry registry;\n\n\n    @PostConstruct\n    public void postConstruct() {\n        //registry.retry(&lt;resilience retry instance name&gt;)\n        registry.retry(&quot;sample-api&quot;).getEventPublisher()\n                .onRetry(ev -&gt; log.info(&quot;#### RetryRegistryEventListener message: {}&quot;, ev));\n    }\n}\n</code></pre>\n<blockquote>\n<p>example log:</p>\n</blockquote>\n<pre><code>2021-11-01 14:55:12.337  INFO 18176 --- [nio-8080-exec-1] c.r.retry.controller.RetryController     : Sample Api call receieved\n2021-11-01 14:55:12.345  INFO 18176 --- [nio-8080-exec-1] c.r.r.config.RetryRegistryEventListener  : #### RetryRegistryEventListener message: 2021-11-01T14:55:12.344325600+05:30[Asia/Calcutta]: Retry 'sample-api', waiting PT10S until attempt '1'. Last attempt failed with exception 'org.springframework.web.client.HttpServerErrorException: 500 INTERNAL_SERVER_ERROR'.\n2021-11-01 14:55:12.350  INFO 18176 --- [nio-8080-exec-1] c.r.retry.controller.RetryController     : messsage: 2021-11-01T14:55:12.344325600+05:30[Asia/Calcutta]: Retry 'sample-api', waiting PT10S until attempt '1'. Last attempt failed with exception 'org.springframework.web.client.HttpServerErrorException: 500 INTERNAL_SERVER_ERROR'.\n2021-11-01 14:55:22.359  INFO 18176 --- [nio-8080-exec-1] c.r.retry.controller.RetryController     : Sample Api call receieved\n2021-11-01 14:55:22.360  INFO 18176 --- [nio-8080-exec-1] c.r.r.config.RetryRegistryEventListener  : #### RetryRegistryEventListener message: 2021-11-01T14:55:22.360672900+05:30[Asia/Calcutta]: Retry 'sample-api', waiting PT10S until attempt '2'. Last attempt failed with exception 'org.springframework.web.client.HttpServerErrorException: 500 INTERNAL_SERVER_ERROR'.\n2021-11-01 14:55:22.361  INFO 18176 --- [nio-8080-exec-1] c.r.retry.controller.RetryController     : messsage: 2021-11-01T14:55:22.360672900+05:30[Asia/Calcutta]: Retry 'sample-api', waiting PT10S until attempt '2'. Last attempt failed with exception 'org.springframework.web.client.HttpServerErrorException: 500 INTERNAL_SERVER_ERROR'.\n</code></pre>\n<p>@FerdTurgusen: I believe there is some mistake in your code else it would be working fine. With the given information in the question i was unable to exactly find the issue. Hence, I have created a sample spring boot with resilience4j example, replicated your issue and it's working fine for me, hence uploaded to Github for your reference. I suggest you to add RetryRegistryEventListener class and find the issue in event logs, if still not resolved please share the event listener log.</p>\n<p><em><strong>Github Reference</strong></em>: <a href=\"https://github.com/arunsai271/Resilience-Retry-Example\" rel=\"noreferrer\">sample spring-boot with resilience4j retry project</a></p>\n"}],"owner":{"account_id":10080379,"reputation":320,"user_id":7450916,"display_name":"FerdTurgusen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9919,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":69795174,"answer_count":1,"score":5,"last_activity_date":1635760194,"creation_date":1635743129,"question_id":69792829,"body_markdown":"I&#39;m using Resilience4J in a Spring Boot project to make a call to a REST client like so:\r\n\r\n```\r\n@Retry(name = &quot;customerService&quot;)\r\npublic Customer getCustomer(String customerNumber) {\r\n    restTemplate.exchange(&quot;https://customer-service.net&quot;, HttpMethod.GET, ..., customerNumber);\r\n}\r\n```\r\n\r\nWith this configuration:\r\n\r\n```\r\nresilience4j.retry:\r\n    instances:\r\n        customerService:\r\n            maxAttempts: 3\r\n            waitDuration: 10s\r\n            retryExceptions:\r\n                - org.springframework.web.client.HttpServerErrorException\r\n```\r\n\r\nMy expectation is if `restTemplate.exchange()` is invoked and the customer service responds with a `HttpServerErrorException`, the `getCustomer()` method will be called 3 more times after a wait of ten seconds.\r\n\r\nHowever, this is not the case.\r\n\r\nThis method is never called again, and the exception is immediately thrown.\r\n\r\nSeeing that a fallback method is included in the examples, I decided to add it, even though I don&#39;t really want to invoke a different method, I just want my original method called again.\r\n\r\nAnyway, I specified a fall back:\r\n\r\n```\r\n@Retry(name = &quot;customerService&quot;, fallback = &quot;customerFb&quot;)\r\npublic Customer getCustomer(String customerNumber) {\r\n    return getCustomer();\r\n}\r\n\r\nprivate Customer customerFb(String customerNumber, HttpServerErrorException ex) {\r\n    log.error(&quot;Could not retrieve customer... retrying...&quot;);\r\n    return getCustomer();\r\n}\r\n\r\nprivate Customer getCustomer(String customerNumber) {\r\n    return restTemplate.exchange(&quot;https://customer-service.net&quot;, HttpMethod.GET, ..., customerNumber);\r\n}\r\n```\r\n\r\nNow, I am seeing the fallback method being retried, however, the HttpServerErrorException is being thrown each time, meaning that consumers will receive an exception as a response to their calls.\r\n\r\nMy questions are:\r\n\r\nDoes a fallback method need to be implemented in order for retry functionality to work? \r\n\r\nand \r\n\r\nIs it expected behavior for the exceptions to be thrown? Am I doing something wrong? I don&#39;t want callers of this service to receive an exception until all retry attempts have been made.\r\n\r\nThanks","title":"What is the expected behavior of Resilience4J Retry?","body":"<p>I'm using Resilience4J in a Spring Boot project to make a call to a REST client like so:</p>\n<pre><code>@Retry(name = &quot;customerService&quot;)\npublic Customer getCustomer(String customerNumber) {\n    restTemplate.exchange(&quot;https://customer-service.net&quot;, HttpMethod.GET, ..., customerNumber);\n}\n</code></pre>\n<p>With this configuration:</p>\n<pre><code>resilience4j.retry:\n    instances:\n        customerService:\n            maxAttempts: 3\n            waitDuration: 10s\n            retryExceptions:\n                - org.springframework.web.client.HttpServerErrorException\n</code></pre>\n<p>My expectation is if <code>restTemplate.exchange()</code> is invoked and the customer service responds with a <code>HttpServerErrorException</code>, the <code>getCustomer()</code> method will be called 3 more times after a wait of ten seconds.</p>\n<p>However, this is not the case.</p>\n<p>This method is never called again, and the exception is immediately thrown.</p>\n<p>Seeing that a fallback method is included in the examples, I decided to add it, even though I don't really want to invoke a different method, I just want my original method called again.</p>\n<p>Anyway, I specified a fall back:</p>\n<pre><code>@Retry(name = &quot;customerService&quot;, fallback = &quot;customerFb&quot;)\npublic Customer getCustomer(String customerNumber) {\n    return getCustomer();\n}\n\nprivate Customer customerFb(String customerNumber, HttpServerErrorException ex) {\n    log.error(&quot;Could not retrieve customer... retrying...&quot;);\n    return getCustomer();\n}\n\nprivate Customer getCustomer(String customerNumber) {\n    return restTemplate.exchange(&quot;https://customer-service.net&quot;, HttpMethod.GET, ..., customerNumber);\n}\n</code></pre>\n<p>Now, I am seeing the fallback method being retried, however, the HttpServerErrorException is being thrown each time, meaning that consumers will receive an exception as a response to their calls.</p>\n<p>My questions are:</p>\n<p>Does a fallback method need to be implemented in order for retry functionality to work?</p>\n<p>and</p>\n<p>Is it expected behavior for the exceptions to be thrown? Am I doing something wrong? I don't want callers of this service to receive an exception until all retry attempts have been made.</p>\n<p>Thanks</p>\n"},{"tags":["java","rx-java","reactivex"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1635760093,"post_id":69793576,"comment_id":123370922,"body_markdown":"You mean like `filter()`? That methods allows you to filter elements from the observable, like the `4` you don&#39;t want.","body":"You mean like <code>filter()</code>? That methods allows you to filter elements from the observable, like the <code>4</code> you don&#39;t want."},{"owner":{"account_id":6320160,"reputation":63,"user_id":4908548,"display_name":"Naiad"},"score":0,"creation_date":1635762176,"post_id":69793576,"comment_id":123371649,"body_markdown":"no. filter just filtering observable data when use pipe. i mean i want to handle observable data when Subscription timeing change.","body":"no. filter just filtering observable data when use pipe. i mean i want to handle observable data when Subscription timeing change."},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1635764873,"post_id":69793576,"comment_id":123372626,"body_markdown":"Why not use `filter(it -&gt; it != 4)` before/at your subscription for `Sub1`? You get any value but the value `4`, which you don&#39;t want. Please [edit] your question to include a more detailed description of what you are trying to do, it looks like some information is still missing.","body":"Why not use <code>filter(it -&gt; it != 4)</code> before/at your subscription for <code>Sub1</code>? You get any value but the value <code>4</code>, which you don&#39;t want. Please <a href=\"https://stackoverflow.com/posts/69793576/edit\">edit</a> your question to include a more detailed description of what you are trying to do, it looks like some information is still missing."}],"owner":{"account_id":6320160,"reputation":63,"user_id":4908548,"display_name":"Naiad"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1635759949,"creation_date":1635750255,"question_id":69793576,"body_markdown":"i have some problem about rxjava.\r\n\r\nWe want to collect different data depending on when the subscribe function is called.\r\n\r\ndata`ll comes in in the order of 1 to 9.\r\n\r\nOne subscribe function is called before inserting data. (called `Sub1`)\r\n\r\nAnother subscribe function is called after inserting data. (called `Sub2`)\r\n\r\nA value of 4 will be the trigger. `Sub1` ignores this value, and `Sub2` merges the previous value when this value comes in.\r\n\r\ndetail logic is like below.\r\n\r\n```\r\npublic void someTestFunc() {\r\n\r\n    ReplaySubject&lt;Integer&gt; subject = ReplaySubject.create();\r\n\r\n    Observable ob = Observable.somefilterOperation(...);\r\n\r\n    ob.subsribe(res -&gt; {\r\n         // this is Sub1\r\n         // data is output 1~3 5~9\r\n         // 4 value is skipped. cause 4 is only use trigger.\r\n         // output is 1,2,3, 5,6,7,8\r\n         System.out.println(&quot;Subscribtion Before OnNext &quot; + res);\r\n    });\r\n\r\n    for(int i = 1; i &lt; 9; i++) {\r\n       ob.onNext(i); // data input 1~9\r\n    }\r\n\r\n    ob.subsribe(res -&gt; {\r\n         // this is Sub2\r\n         // 4 value is trigger value.\r\n         // 1~3 value is added by some function. ex &quot;reduce&quot;, &quot;scan&quot;\r\n         // output is 6(1~3 data added), 5, 6, 7, 8\r\n         System.out.println(&quot;Subscribtion After OnNext &quot; + res);\r\n    });\r\n\r\n}\r\n```\r\n\r\n```\r\nSubscribtion Before OnNext 1\r\nSubscribtion Before OnNext 2\r\nSubscribtion Before OnNext 3\r\n// 4 is skip cause that value is trigger\r\nSubscribtion Before OnNext 5\r\nSubscribtion Before OnNext 6\r\nSubscribtion Before OnNext 7\r\nSubscribtion Before OnNext 8\r\n\r\nSubscribtion After OnNext 6 // this value is reduce value from 1 to 3 values\r\nSubscribtion After OnNext 5\r\nSubscribtion After OnNext 6\r\nSubscribtion After OnNext 7\r\nSubscribtion After OnNext 8\r\n```\r\n\r\nIs it possible to create a function called `somefilterOperation`?","title":"How to apply operator of data according to the time of subscribtion in rxjava","body":"<p>i have some problem about rxjava.</p>\n<p>We want to collect different data depending on when the subscribe function is called.</p>\n<p>data`ll comes in in the order of 1 to 9.</p>\n<p>One subscribe function is called before inserting data. (called <code>Sub1</code>)</p>\n<p>Another subscribe function is called after inserting data. (called <code>Sub2</code>)</p>\n<p>A value of 4 will be the trigger. <code>Sub1</code> ignores this value, and <code>Sub2</code> merges the previous value when this value comes in.</p>\n<p>detail logic is like below.</p>\n<pre><code>public void someTestFunc() {\n\n    ReplaySubject&lt;Integer&gt; subject = ReplaySubject.create();\n\n    Observable ob = Observable.somefilterOperation(...);\n\n    ob.subsribe(res -&gt; {\n         // this is Sub1\n         // data is output 1~3 5~9\n         // 4 value is skipped. cause 4 is only use trigger.\n         // output is 1,2,3, 5,6,7,8\n         System.out.println(&quot;Subscribtion Before OnNext &quot; + res);\n    });\n\n    for(int i = 1; i &lt; 9; i++) {\n       ob.onNext(i); // data input 1~9\n    }\n\n    ob.subsribe(res -&gt; {\n         // this is Sub2\n         // 4 value is trigger value.\n         // 1~3 value is added by some function. ex &quot;reduce&quot;, &quot;scan&quot;\n         // output is 6(1~3 data added), 5, 6, 7, 8\n         System.out.println(&quot;Subscribtion After OnNext &quot; + res);\n    });\n\n}\n</code></pre>\n<pre><code>Subscribtion Before OnNext 1\nSubscribtion Before OnNext 2\nSubscribtion Before OnNext 3\n// 4 is skip cause that value is trigger\nSubscribtion Before OnNext 5\nSubscribtion Before OnNext 6\nSubscribtion Before OnNext 7\nSubscribtion Before OnNext 8\n\nSubscribtion After OnNext 6 // this value is reduce value from 1 to 3 values\nSubscribtion After OnNext 5\nSubscribtion After OnNext 6\nSubscribtion After OnNext 7\nSubscribtion After OnNext 8\n</code></pre>\n<p>Is it possible to create a function called <code>somefilterOperation</code>?</p>\n"},{"tags":["java","jmeter","jboss","wildfly","keycloak"],"comments":[{"owner":{"account_id":4077251,"reputation":26290,"user_id":3348604,"display_name":"Jan Garaj"},"score":0,"creation_date":1635768992,"post_id":69795003,"comment_id":123374064,"body_markdown":"Solution: scale horizontally - use cluster, not a single node so you will spread a load across multiple nodes.","body":"Solution: scale horizontally - use cluster, not a single node so you will spread a load across multiple nodes."},{"owner":{"account_id":20172800,"reputation":71,"user_id":14795240,"display_name":"David Bister"},"score":0,"creation_date":1690461791,"post_id":69795003,"comment_id":135359143,"body_markdown":"Can u please provider stress test template or refrence im stucked at it ?","body":"Can u please provider stress test template or refrence im stucked at it ?"}],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635759741,"creation_date":1635759741,"answer_id":69795089,"question_id":69795003,"body_markdown":"If CPU is the bottleneck - buy more computing power. Alternatively you can use a profiler tool like [JProfiler][1] or [YourKit][2] to analyze what is causing high CPU usage and fix that function, Keycloak source code is available at [Github][3]\r\n\r\nAlso your &quot;1000&quot; people might not be fully true, I would recommend looking at i.e. [Active Threads Over Time][4] listener output, my expectation is that the actual concurrency is even less, try setting the number of iterations in Thread Group to `-1` and let your test to run 10-20 minutes, see [JMeter Test Results: Why the Actual Users Number is Lower than Expected][5] article for more detailed explanation.  \r\n\r\n\r\n  [1]: https://www.ej-technologies.com/products/jprofiler/overview.html\r\n  [2]: https://www.yourkit.com/java/profiler/features/\r\n  [3]: https://github.com/keycloak/keycloak\r\n  [4]: https://jmeter-plugins.org/wiki/ActiveThreadsOverTime/\r\n  [5]: https://www.blazemeter.com/blog/jmeter-test-results-why-actual-users-number-lower-expected","title":"Stress testing Keycloak with Jmeter resulted in 100% CPU usage","body":"<p>If CPU is the bottleneck - buy more computing power. Alternatively you can use a profiler tool like <a href=\"https://www.ej-technologies.com/products/jprofiler/overview.html\" rel=\"nofollow noreferrer\">JProfiler</a> or <a href=\"https://www.yourkit.com/java/profiler/features/\" rel=\"nofollow noreferrer\">YourKit</a> to analyze what is causing high CPU usage and fix that function, Keycloak source code is available at <a href=\"https://github.com/keycloak/keycloak\" rel=\"nofollow noreferrer\">Github</a></p>\n<p>Also your &quot;1000&quot; people might not be fully true, I would recommend looking at i.e. <a href=\"https://jmeter-plugins.org/wiki/ActiveThreadsOverTime/\" rel=\"nofollow noreferrer\">Active Threads Over Time</a> listener output, my expectation is that the actual concurrency is even less, try setting the number of iterations in Thread Group to <code>-1</code> and let your test to run 10-20 minutes, see <a href=\"https://www.blazemeter.com/blog/jmeter-test-results-why-actual-users-number-lower-expected\" rel=\"nofollow noreferrer\">JMeter Test Results: Why the Actual Users Number is Lower than Expected</a> article for more detailed explanation.</p>\n"}],"owner":{"account_id":11816334,"reputation":11,"user_id":8646447,"display_name":"Allen Chang"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1589,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1635759741,"creation_date":1635759199,"question_id":69795003,"body_markdown":"Stress testing Keycloak with Jmeter resulted in 100% CPU usage.\r\n\r\nI  have a Keycloak server, and I need to test it with 1,000 people logging at the same time to get OAuth Tokens.\r\n\r\n[enter image description here][1]\r\n[enter image description here][2]\r\n\r\nHowever, after testing, it was found that as long as there are more than 70 users login in at the same time, the CPU usage of the server where the Keycloak is set up will reach 100%.\r\n\r\nIt resulting a long response time of the api of login Keycloak server get token. It can even reach 10-20 seconds when there are 1000 people.\r\n\r\n[enter image description here][3]\r\n\r\nI originally thought that OAuth Server would all like this, but when I  testing with Identity Server did not have this problem.\r\n\r\nWould anyone have a solution? Thanks a lot.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YlxoT.jpg\r\n  [2]: https://i.stack.imgur.com/XwGir.jpg\r\n  [3]: https://i.stack.imgur.com/drKtT.jpg","title":"Stress testing Keycloak with Jmeter resulted in 100% CPU usage","body":"<p>Stress testing Keycloak with Jmeter resulted in 100% CPU usage.</p>\n<p>I  have a Keycloak server, and I need to test it with 1,000 people logging at the same time to get OAuth Tokens.</p>\n<p><a href=\"https://i.stack.imgur.com/YlxoT.jpg\" rel=\"nofollow noreferrer\">enter image description here</a>\n<a href=\"https://i.stack.imgur.com/XwGir.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>However, after testing, it was found that as long as there are more than 70 users login in at the same time, the CPU usage of the server where the Keycloak is set up will reach 100%.</p>\n<p>It resulting a long response time of the api of login Keycloak server get token. It can even reach 10-20 seconds when there are 1000 people.</p>\n<p><a href=\"https://i.stack.imgur.com/drKtT.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I originally thought that OAuth Server would all like this, but when I  testing with Identity Server did not have this problem.</p>\n<p>Would anyone have a solution? Thanks a lot.</p>\n"},{"tags":["java","maven","jenkins","maven-plugin","maven-war-plugin"],"owner":{"account_id":8566809,"reputation":445,"user_id":6419050,"accept_rate":38,"display_name":"mansing shinde"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":360,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1635759406,"creation_date":1635747923,"question_id":69793271,"body_markdown":"We&#39;re trying to build a Java-based project with Maven (v3.5.4) and with the JDK 1.8.92 but we getting an error ```Failed to execute goal org.apache.maven.plugins:maven-war-plugin:2.2:war (default-war) on project embedded-analytics: Execution default-war of goal org.apache.maven.plugins:maven-war-plugin:2.2:war failed: basedir /data/jenkins/workspace/test-mansing-embedded/target/dist does not exist -&gt; [Help 1]```\r\n\r\n```\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;1.8&lt;/source&gt;\r\n                    &lt;target&gt;1.8&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                  &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n                  &lt;webResources&gt;\r\n                        &lt;resource&gt;\r\n                            &lt;directory&gt;target/dist&lt;/directory&gt;\r\n                            &lt;filtering&gt;true&lt;/filtering&gt;\r\n                            &lt;includes&gt;\r\n                                &lt;include&gt;main/main.js&lt;/include&gt;\r\n                            &lt;/includes&gt;\r\n                        &lt;/resource&gt;\r\n                  &lt;/webResources&gt;\r\n                &lt;/configuration&gt;\r\n             &lt;/plugin&gt;\r\n```\r\n\r\n\r\n1. The permission on the workspace directory looks OK.\r\n2. I tried adding a version for maven-war-plugin but no luck. \r\n\r\nAny suggestion is really apperciated. ","title":"maven-war-plugin basedir &lt;workspace&gt;/target/dist does not exist","body":"<p>We're trying to build a Java-based project with Maven (v3.5.4) and with the JDK 1.8.92 but we getting an error <code>Failed to execute goal org.apache.maven.plugins:maven-war-plugin:2.2:war (default-war) on project embedded-analytics: Execution default-war of goal org.apache.maven.plugins:maven-war-plugin:2.2:war failed: basedir /data/jenkins/workspace/test-mansing-embedded/target/dist does not exist -&gt; [Help 1]</code></p>\n<pre><code>            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                  &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n                  &lt;webResources&gt;\n                        &lt;resource&gt;\n                            &lt;directory&gt;target/dist&lt;/directory&gt;\n                            &lt;filtering&gt;true&lt;/filtering&gt;\n                            &lt;includes&gt;\n                                &lt;include&gt;main/main.js&lt;/include&gt;\n                            &lt;/includes&gt;\n                        &lt;/resource&gt;\n                  &lt;/webResources&gt;\n                &lt;/configuration&gt;\n             &lt;/plugin&gt;\n</code></pre>\n<ol>\n<li>The permission on the workspace directory looks OK.</li>\n<li>I tried adding a version for maven-war-plugin but no luck.</li>\n</ol>\n<p>Any suggestion is really apperciated.</p>\n"},{"tags":["java","tomcat","soap","websphere","jax-ws"],"comments":[{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1635801953,"post_id":69795030,"comment_id":123385969,"body_markdown":"Different JVM so different JAXB implementation?","body":"Different JVM so different JAXB implementation?"},{"owner":{"account_id":13739626,"reputation":116,"user_id":9915084,"display_name":"Thomas Johnson"},"score":1,"creation_date":1635862956,"post_id":69795030,"comment_id":123402156,"body_markdown":"To @LMC&#39;s point you could try switching the JAXBContextFactory used by default on Websphere. There&#39;s another SO answer that describes how to do that: https://stackoverflow.com/questions/34762565/jaxb-in-websphere","body":"To @LMC&#39;s point you could try switching the JAXBContextFactory used by default on Websphere. There&#39;s another SO answer that describes how to do that: <a href=\"https://stackoverflow.com/questions/34762565/jaxb-in-websphere\">stackoverflow.com/questions/34762565/jaxb-in-websphere</a>"}],"owner":{"account_id":10465788,"reputation":12036,"user_id":7715250,"accept_rate":74,"display_name":"J. Doe"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":842,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1635759363,"creation_date":1635759363,"question_id":69795030,"body_markdown":"I have an application which works in Tomcat but does not work in Websphere. An external SOAP service call is executed which gives this error in production:\r\n\r\n    javax.xml.ws.soap.SOAPFaultException: javax.xml.stream.XMLStreamException: com.ibm.ws.websvcs.transport.http.out.ClosedConnectionException: OutputStream encountered error during write\r\n    \tat org.apache.axis2.jaxws.marshaller.impl.alt.MethodMarshallerUtils.createSystemException(MethodMarshallerUtils.java:1363)\r\n    \tat org.apache.axis2.jaxws.marshaller.impl.alt.MethodMarshallerUtils.demarshalFaultResponse(MethodMarshallerUtils.java:1089)\r\n    \tat org.apache.axis2.jaxws.marshaller.impl.alt.DocLitWrappedMethodMarshaller.demarshalFaultResponse(DocLitWrappedMethodMarshaller.java:680)\r\n\r\nI tried reproducing this problem locally, but it fails with this error:\r\n\r\n    javax.xml.ws.soap.SOAPFaultException: Could not determine the operation name from the SOAP Message context (for adding a message to the service log).\r\n    \tat org.apache.axis2.jaxws.marshaller.impl.alt.MethodMarshallerUtils.createSystemException(MethodMarshallerUtils.java:1363)\r\n    \tat org.apache.axis2.jaxws.marshaller.impl.alt.MethodMarshallerUtils.demarshalFaultResponse(MethodMarshallerUtils.java:1089)\r\n    \tat org.apache.axis2.jaxws.marshaller.impl.alt.DocLitWrappedMethodMarshaller.demarshalFaultResponse(DocLitWrappedMethodMarshaller.java:680)\r\n    \tat org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.getFaultResponse(JAXWSProxyHandler.java:632)\r\n    \tat org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.createResponse(JAXWSProxyHandler.java:566)\r\n    \tat org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.invokeSEIMethod(JAXWSProxyHandler.java:432)\r\n    \tat org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.invoke(JAXWSProxyHandler.java:213)\r\n\r\nAgain: it works in Tomcat 9, but it doesn&#39;t work in Wepshere 8.5.5.20. \r\n\r\nAnyone has an idea how to fix above problems? I can not easily debug the applications because they are invoked with a proxy.","title":"javax.xml.ws.soap.SOAPFaultException: Could not determine the operation name from the SOAP Message context and javax.xml.stream.XMLStreamException","body":"<p>I have an application which works in Tomcat but does not work in Websphere. An external SOAP service call is executed which gives this error in production:</p>\n<pre><code>javax.xml.ws.soap.SOAPFaultException: javax.xml.stream.XMLStreamException: com.ibm.ws.websvcs.transport.http.out.ClosedConnectionException: OutputStream encountered error during write\n    at org.apache.axis2.jaxws.marshaller.impl.alt.MethodMarshallerUtils.createSystemException(MethodMarshallerUtils.java:1363)\n    at org.apache.axis2.jaxws.marshaller.impl.alt.MethodMarshallerUtils.demarshalFaultResponse(MethodMarshallerUtils.java:1089)\n    at org.apache.axis2.jaxws.marshaller.impl.alt.DocLitWrappedMethodMarshaller.demarshalFaultResponse(DocLitWrappedMethodMarshaller.java:680)\n</code></pre>\n<p>I tried reproducing this problem locally, but it fails with this error:</p>\n<pre><code>javax.xml.ws.soap.SOAPFaultException: Could not determine the operation name from the SOAP Message context (for adding a message to the service log).\n    at org.apache.axis2.jaxws.marshaller.impl.alt.MethodMarshallerUtils.createSystemException(MethodMarshallerUtils.java:1363)\n    at org.apache.axis2.jaxws.marshaller.impl.alt.MethodMarshallerUtils.demarshalFaultResponse(MethodMarshallerUtils.java:1089)\n    at org.apache.axis2.jaxws.marshaller.impl.alt.DocLitWrappedMethodMarshaller.demarshalFaultResponse(DocLitWrappedMethodMarshaller.java:680)\n    at org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.getFaultResponse(JAXWSProxyHandler.java:632)\n    at org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.createResponse(JAXWSProxyHandler.java:566)\n    at org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.invokeSEIMethod(JAXWSProxyHandler.java:432)\n    at org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.invoke(JAXWSProxyHandler.java:213)\n</code></pre>\n<p>Again: it works in Tomcat 9, but it doesn't work in Wepshere 8.5.5.20.</p>\n<p>Anyone has an idea how to fix above problems? I can not easily debug the applications because they are invoked with a proxy.</p>\n"},{"tags":["java","android","text-size"],"comments":[{"owner":{"account_id":139113,"reputation":16537,"user_id":344487,"accept_rate":73,"display_name":"Fred"},"score":0,"creation_date":1635759912,"post_id":69794322,"comment_id":123370853,"body_markdown":"I&#39;m guessing the problem is when you override `getResources` and create the configuration from a context that is not locale aware, hence the crash you get. I rarely stop to say things like this in stackoverflow since its main purpose is to teach. However a lot of it also encourages others to copy your approach and I cannot stress enough that you should NOT do this. There are a lot of people that require apps to adjust to this setting in order to be able to use them. Not all of us have 20-20 vision. Perhaps the better approach would be to reconsider the design.","body":"I&#39;m guessing the problem is when you override <code>getResources</code> and create the configuration from a context that is not locale aware, hence the crash you get. I rarely stop to say things like this in stackoverflow since its main purpose is to teach. However a lot of it also encourages others to copy your approach and I cannot stress enough that you should NOT do this. There are a lot of people that require apps to adjust to this setting in order to be able to use them. Not all of us have 20-20 vision. Perhaps the better approach would be to reconsider the design."},{"owner":{"account_id":23203465,"reputation":19,"user_id":17298006,"display_name":"yyyy"},"score":0,"creation_date":1635818965,"post_id":69794322,"comment_id":123389175,"body_markdown":"Thanks.I&#39;ll check the lifecycle.Change design is not the decision I can make.","body":"Thanks.I&#39;ll check the lifecycle.Change design is not the decision I can make."}],"owner":{"account_id":23203465,"reputation":19,"user_id":17298006,"display_name":"yyyy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1635759263,"creation_date":1635755286,"question_id":69794322,"body_markdown":"The goal was to make textsize in app dont change with system settings.\r\nI found to override getResources() in activity and override attachBaseContext() in fragment.Like the code below:\r\n\r\n    @Override\r\n    public Resources getResources() {\r\n        Resources resources = super.getResources();\r\n        Configuration config = resources.getConfiguration();\r\n        config.setToDefaults();\r\n        return createConfigurationContext(config).getResources();\r\n    }\r\n\r\n    @Override\r\n    protected void attachBaseContext(Context newBase) {\r\n        Configuration config = newBase.getResources().getConfiguration();\r\n        config.fontScale=1;\r\n        Context context=newBase.createConfigurationContext(config);\r\n        super.attachBaseContext(context);\r\n    }\r\nAfter I added these code,I found some strange crash start to appear.Crash info:\r\n\r\n    android.view.InflateException: Binary XML file line #9 in \r\n    com.xx.xx:layout/default_loading: Binary XML file line #9 in \r\n    com.xx.xx:layout/default_loading: Error inflating class android.widget.ProgressBar\r\n    Caused by: android.view.InflateException: Binary XML file line #9 in \r\n    com.xx.xx:layout/default_loading: Error inflating class android.widget.ProgressBar\r\n    Caused by: java.lang.reflect.InvocationTargetException\r\n    at java.lang.reflect.Constructor.newInstance0(Native Method)\r\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:343)\r\n\tat android.view.LayoutInflater.createView(LayoutInflater.java:852)\r\n\tat android.view.LayoutInflater.createView(LayoutInflater.java:774)\r\n\tat com.android.internal.policy.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:58)\r\n\tat android.view.LayoutInflater.onCreateView(LayoutInflater.java:928)\r\n\tat android.view.LayoutInflater.onCreateView(LayoutInflater.java:948)\r\n\tat android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:1004)\r\n\tat android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:959)\r\n\tat android.view.LayoutInflater.rInflate(LayoutInflater.java:1138)\r\n\tat android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:1099)\r\n\tat android.view.LayoutInflater.inflate(LayoutInflater.java:680)\r\n\tat android.view.LayoutInflater.inflate(LayoutInflater.java:532)\r\n\tat android.view.LayoutInflater.inflate(LayoutInflater.java:479)\r\n\tat com.jianzhiku.activity.HomeActivity.onCreateView(HomeActivity.java:432)\r\n\tat androidx.fragment.app.Fragment.performCreateView(Fragment.java:2963)\r\n\tat androidx.fragment.app.FragmentStateManager.createView(FragmentStateManager.java:518)\r\n\tat androidx.fragment.app.FragmentStateManager.moveToExpectedState(FragmentStateManager.java:282)\r\n\tat androidx.fragment.app.FragmentManager.executeOpsTogether(FragmentManager.java:2189)\r\n\tat androidx.fragment.app.FragmentManager.removeRedundantOperationsAndExecute(FragmentManager.java:2100)\r\n\tat androidx.fragment.app.FragmentManager.execSingleAction(FragmentManager.java:1971)\r\n\tat androidx.fragment.app.BackStackRecord.commitNowAllowingStateLoss(BackStackRecord.java:311)\r\n\tat androidx.fragment.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:249)\r\n\tat androidx.viewpager.widget.ViewPager.populate(ViewPager.java:1244)\r\n\tat androidx.viewpager.widget.ViewPager.populate(ViewPager.java:1092)\r\n\tat androidx.viewpager.widget.ViewPager.onMeasure(ViewPager.java:1622)\r\n\tat android.view.View.measure(View.java:25960)\r\n\tat android.widget.LinearLayout.measureVertical(LinearLayout.java:995)\r\n\tat android.widget.LinearLayout.onMeasure(LinearLayout.java:721)\r\n\tat android.view.View.measure(View.java:25960)\r\n\tat android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:7112)\r\n\tat android.widget.FrameLayout.onMeasure(FrameLayout.java:194)\r\n\tat android.view.View.measure(View.java:25960)\r\n\tat android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:7112)\r\n\tat android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1552)\r\n\tat android.widget.LinearLayout.measureVertical(LinearLayout.java:842)\r\n\tat android.widget.LinearLayout.onMeasure(LinearLayout.java:721)\r\n\tat android.view.View.measure(View.java:25960)\r\n\tat android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:7112)\r\n\tat android.widget.FrameLayout.onMeasure(FrameLayout.java:194)\r\n\tat com.android.internal.policy.DecorView.onMeasure(DecorView.java:830)\r\n\tat android.view.View.measure(View.java:25960)\r\n\tat android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:3906)\r\n\tat android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:2625)\r\n\tat android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:2888)\r\n\tat android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:2345)\r\n\tat android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:9046)\r\n\tat android.view.Choreographer$CallbackRecord.run(Choreographer.java:1066)\r\n\tat android.view.Choreographer.doCallbacks(Choreographer.java:889)\r\n\tat android.view.Choreographer.doFrame(Choreographer.java:816)\r\n\tat android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:1051)\r\n\tat android.os.Handler.handleCallback(Handler.java:938)\r\n\tat android.os.Handler.dispatchMessage(Handler.java:99)\r\n\tat android.os.Looper.loop(Looper.java:264)\r\n\tat android.app.ActivityThread.main(ActivityThread.java:8262)\r\n\tat java.lang.reflect.Method.invoke(Native Method)\r\n\tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:632)\r\n\tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1049)\r\n    Caused by: java.lang.NullPointerException: locale == null\r\n\tat libcore.icu.LocaleData.get(LocaleData.java:242)\r\n\tat java.text.NumberFormat.getInstance(NumberFormat.java:840)\r\n\tat java.text.NumberFormat.getPercentInstance(NumberFormat.java:548)\r\n\tat android.widget.ProgressBar.formatStateDescription(ProgressBar.java:1580)\r\n\tat android.widget.ProgressBar.(ProgressBar.java:312)\r\n\tat android.widget.ProgressBar.(ProgressBar.java:262)\r\n\tat android.widget.ProgressBar.(ProgressBar.java:258)\r\n\t... 58 more\r\n\r\nHere is the layout/default_loading:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    android:gravity=&quot;center&quot;\r\n    android:orientation=&quot;horizontal&quot;\r\n    android:padding=&quot;8dp&quot;&gt;\r\n\r\n    &lt;ProgressBar\r\n        android:id=&quot;@+id/prograssbar&quot;\r\n        android:layout_width=&quot;30dp&quot;\r\n        android:layout_height=&quot;30dp&quot; /&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/loading_text&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_marginLeft=&quot;8dp&quot;\r\n        android:text=&quot;loading...&quot;\r\n        android:textSize=&quot;14sp&quot; /&gt;\r\n\r\n    &lt;/LinearLayout&gt;\r\n\r\nAnd I&#39;m sure before override getResources() in activity and attachBaseContext(Context newBase) in fragment,this crash dont exist.And I tested to remove these override,crash dont happen anymore.\r\n\r\nI asked some other guys,they didnt have this problem.\r\n\r\nWhy this crash happens?And how to fix this?\r\n\r\nMy app structure is like this:\r\nFirst Open a splashactivity then finish and open mainactivity,mainactivity contains a viewpager+fragment with 4 fragments.\r\nOther function start activity from fragment.\r\n","title":"Strange problem after override getResources() to make textsize dont change with system settings","body":"<p>The goal was to make textsize in app dont change with system settings.\nI found to override getResources() in activity and override attachBaseContext() in fragment.Like the code below:</p>\n<pre><code>@Override\npublic Resources getResources() {\n    Resources resources = super.getResources();\n    Configuration config = resources.getConfiguration();\n    config.setToDefaults();\n    return createConfigurationContext(config).getResources();\n}\n\n@Override\nprotected void attachBaseContext(Context newBase) {\n    Configuration config = newBase.getResources().getConfiguration();\n    config.fontScale=1;\n    Context context=newBase.createConfigurationContext(config);\n    super.attachBaseContext(context);\n}\n</code></pre>\n<p>After I added these code,I found some strange crash start to appear.Crash info:</p>\n<pre><code>android.view.InflateException: Binary XML file line #9 in \ncom.xx.xx:layout/default_loading: Binary XML file line #9 in \ncom.xx.xx:layout/default_loading: Error inflating class android.widget.ProgressBar\nCaused by: android.view.InflateException: Binary XML file line #9 in \ncom.xx.xx:layout/default_loading: Error inflating class android.widget.ProgressBar\nCaused by: java.lang.reflect.InvocationTargetException\nat java.lang.reflect.Constructor.newInstance0(Native Method)\nat java.lang.reflect.Constructor.newInstance(Constructor.java:343)\nat android.view.LayoutInflater.createView(LayoutInflater.java:852)\nat android.view.LayoutInflater.createView(LayoutInflater.java:774)\nat com.android.internal.policy.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:58)\nat android.view.LayoutInflater.onCreateView(LayoutInflater.java:928)\nat android.view.LayoutInflater.onCreateView(LayoutInflater.java:948)\nat android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:1004)\nat android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:959)\nat android.view.LayoutInflater.rInflate(LayoutInflater.java:1138)\nat android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:1099)\nat android.view.LayoutInflater.inflate(LayoutInflater.java:680)\nat android.view.LayoutInflater.inflate(LayoutInflater.java:532)\nat android.view.LayoutInflater.inflate(LayoutInflater.java:479)\nat com.jianzhiku.activity.HomeActivity.onCreateView(HomeActivity.java:432)\nat androidx.fragment.app.Fragment.performCreateView(Fragment.java:2963)\nat androidx.fragment.app.FragmentStateManager.createView(FragmentStateManager.java:518)\nat androidx.fragment.app.FragmentStateManager.moveToExpectedState(FragmentStateManager.java:282)\nat androidx.fragment.app.FragmentManager.executeOpsTogether(FragmentManager.java:2189)\nat androidx.fragment.app.FragmentManager.removeRedundantOperationsAndExecute(FragmentManager.java:2100)\nat androidx.fragment.app.FragmentManager.execSingleAction(FragmentManager.java:1971)\nat androidx.fragment.app.BackStackRecord.commitNowAllowingStateLoss(BackStackRecord.java:311)\nat androidx.fragment.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:249)\nat androidx.viewpager.widget.ViewPager.populate(ViewPager.java:1244)\nat androidx.viewpager.widget.ViewPager.populate(ViewPager.java:1092)\nat androidx.viewpager.widget.ViewPager.onMeasure(ViewPager.java:1622)\nat android.view.View.measure(View.java:25960)\nat android.widget.LinearLayout.measureVertical(LinearLayout.java:995)\nat android.widget.LinearLayout.onMeasure(LinearLayout.java:721)\nat android.view.View.measure(View.java:25960)\nat android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:7112)\nat android.widget.FrameLayout.onMeasure(FrameLayout.java:194)\nat android.view.View.measure(View.java:25960)\nat android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:7112)\nat android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1552)\nat android.widget.LinearLayout.measureVertical(LinearLayout.java:842)\nat android.widget.LinearLayout.onMeasure(LinearLayout.java:721)\nat android.view.View.measure(View.java:25960)\nat android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:7112)\nat android.widget.FrameLayout.onMeasure(FrameLayout.java:194)\nat com.android.internal.policy.DecorView.onMeasure(DecorView.java:830)\nat android.view.View.measure(View.java:25960)\nat android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:3906)\nat android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:2625)\nat android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:2888)\nat android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:2345)\nat android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:9046)\nat android.view.Choreographer$CallbackRecord.run(Choreographer.java:1066)\nat android.view.Choreographer.doCallbacks(Choreographer.java:889)\nat android.view.Choreographer.doFrame(Choreographer.java:816)\nat android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:1051)\nat android.os.Handler.handleCallback(Handler.java:938)\nat android.os.Handler.dispatchMessage(Handler.java:99)\nat android.os.Looper.loop(Looper.java:264)\nat android.app.ActivityThread.main(ActivityThread.java:8262)\nat java.lang.reflect.Method.invoke(Native Method)\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:632)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1049)\nCaused by: java.lang.NullPointerException: locale == null\nat libcore.icu.LocaleData.get(LocaleData.java:242)\nat java.text.NumberFormat.getInstance(NumberFormat.java:840)\nat java.text.NumberFormat.getPercentInstance(NumberFormat.java:548)\nat android.widget.ProgressBar.formatStateDescription(ProgressBar.java:1580)\nat android.widget.ProgressBar.(ProgressBar.java:312)\nat android.widget.ProgressBar.(ProgressBar.java:262)\nat android.widget.ProgressBar.(ProgressBar.java:258)\n... 58 more\n</code></pre>\n<p>Here is the layout/default_loading:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;wrap_content&quot;\nandroid:gravity=&quot;center&quot;\nandroid:orientation=&quot;horizontal&quot;\nandroid:padding=&quot;8dp&quot;&gt;\n\n&lt;ProgressBar\n    android:id=&quot;@+id/prograssbar&quot;\n    android:layout_width=&quot;30dp&quot;\n    android:layout_height=&quot;30dp&quot; /&gt;\n\n&lt;TextView\n    android:id=&quot;@+id/loading_text&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:layout_marginLeft=&quot;8dp&quot;\n    android:text=&quot;loading...&quot;\n    android:textSize=&quot;14sp&quot; /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>And I'm sure before override getResources() in activity and attachBaseContext(Context newBase) in fragment,this crash dont exist.And I tested to remove these override,crash dont happen anymore.</p>\n<p>I asked some other guys,they didnt have this problem.</p>\n<p>Why this crash happens?And how to fix this?</p>\n<p>My app structure is like this:\nFirst Open a splashactivity then finish and open mainactivity,mainactivity contains a viewpager+fragment with 4 fragments.\nOther function start activity from fragment.</p>\n"},{"tags":["java","localization","annotations","internationalization"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1635522959,"post_id":69766648,"comment_id":123329757,"body_markdown":"“the project is not based on spring”. That’s a valuable information, but even better would be telling what you are using instead. In the end, there must be code reading the annotation and presenting the user a message based on that annotation. *This code* is responsible for doing the internationalization.","body":"“the project is not based on spring”. That’s a valuable information, but even better would be telling what you are using instead. In the end, there must be code reading the annotation and presenting the user a message based on that annotation. <i>This code</i> is responsible for doing the internationalization."},{"owner":{"account_id":22540543,"reputation":27,"user_id":16731154,"display_name":"Robinyer"},"score":0,"creation_date":1635562823,"post_id":69766648,"comment_id":123338673,"body_markdown":"@Holger Thanks for your help. I update the question and add the code reading the annotation. I will try to add internationalization code in &#39;getCapabilityDescription&#39; function next Monday and update this problem. Thank you for your help again, This problem really bothers me. I&#39;m so stupid that I can&#39;t find any solution to the internationalization of non spring project annotations on Google.","body":"@Holger Thanks for your help. I update the question and add the code reading the annotation. I will try to add internationalization code in &#39;getCapabilityDescription&#39; function next Monday and update this problem. Thank you for your help again, This problem really bothers me. I&#39;m so stupid that I can&#39;t find any solution to the internationalization of non spring project annotations on Google."}],"answers":[{"tags":[],"owner":{"account_id":22540543,"reputation":27,"user_id":16731154,"display_name":"Robinyer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635758978,"creation_date":1635758978,"answer_id":69794974,"question_id":69766648,"body_markdown":"Thanks Holger&#39;s help. I modified the code dealing with &quot;CapabilityDescription&quot; and successfully implemented the requirements.\r\n\r\n    /**\r\n     * Gets the capability description from the specified class.\r\n     */\r\n    private String getCapabilityDescription(final Class&lt;?&gt; cls) {\r\n        try {\r\n            Locale myLocale = new Locale(&quot;zh&quot;);\r\n            ResourceBundle myLanguageBundle = ResourceBundle.getBundle(&quot;Messages&quot;, myLocale);\r\n            return myLanguageBundle.getString(&quot;CapabilityDescription_&quot;+cls.getSimpleName());\r\n        }catch (Exception e){\r\n            final CapabilityDescription capabilityDesc = cls.getAnnotation(CapabilityDescription.class);\r\n            return capabilityDesc == null ? null : capabilityDesc.value();\r\n        }\r\n\r\n    }\r\n\r\n","title":"How to Internationalization in java Annotations","body":"<p>Thanks Holger's help. I modified the code dealing with &quot;CapabilityDescription&quot; and successfully implemented the requirements.</p>\n<pre><code>/**\n * Gets the capability description from the specified class.\n */\nprivate String getCapabilityDescription(final Class&lt;?&gt; cls) {\n    try {\n        Locale myLocale = new Locale(&quot;zh&quot;);\n        ResourceBundle myLanguageBundle = ResourceBundle.getBundle(&quot;Messages&quot;, myLocale);\n        return myLanguageBundle.getString(&quot;CapabilityDescription_&quot;+cls.getSimpleName());\n    }catch (Exception e){\n        final CapabilityDescription capabilityDesc = cls.getAnnotation(CapabilityDescription.class);\n        return capabilityDesc == null ? null : capabilityDesc.value();\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":22540543,"reputation":27,"user_id":16731154,"display_name":"Robinyer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":203,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1635758978,"creation_date":1635500107,"question_id":69766648,"body_markdown":"I want to internationalize the annotation in java, **but the project is not based on spring.** \r\n\r\n(Sorry I&#39;m a freshman in Java. The project is in NiFi and I don&#39;t know what it using. The project was built by Maven, Generating a NAR package that defines the processor is the purpose of the project build)(NAR package is a concept in NiFi. Similar to jar package, NAR package consists of multiple jar packages and configuration files.)\r\n\r\nIs there any way to use the replacement symbol $ in non spring project? To refer to the translated text in Messages.properties like \r\n``` @CapabilityDescription(value = &quot;${text}&quot;). ```\r\n\r\nand set ```text=&quot;description&quot;```in Messages.properties\r\n\r\nI try ResourceBundle.getString in annotation but failed(Attribute value must be constant)\r\n```@CapabilityDescription(MyResourceBundle.mybundle.getString(&quot;text&quot;))```\r\n\r\n\r\nthis is the definition code of CapabilityDescription\r\n```/**\r\n * Annotation that may be placed on a {@link org.apache.nifi.processor.Processor Processor},\r\n * {@link org.apache.nifi.controller.ControllerService ControllerService}, or\r\n * {@link org.apache.nifi.reporting.ReportingTask ReportingTask} allowing for a\r\n * description to be provided. This description can be provided to a user in\r\n * logs, UI, etc.\r\n *\r\n */\r\n@Documented\r\n@Target({ElementType.TYPE})\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Inherited\r\npublic @interface CapabilityDescription {\r\n\r\n    String value();\r\n}\r\n```\r\n\r\nOr any idea that can realize the internationalization in annotation. Thank you for your idea.\r\n\r\nThanks for @Holger I find the code that reading the annotation. (DtoFactory.java In another project)\r\n```\r\n/**\r\n * Gets the capability description from the specified class.\r\n */\r\nprivate String getCapabilityDescription(final Class&lt;?&gt; cls) {\r\n    final CapabilityDescription capabilityDesc = cls.getAnnotation(CapabilityDescription.class);\r\n    return capabilityDesc == null ? null : capabilityDesc.value();\r\n}\r\n```","title":"How to Internationalization in java Annotations","body":"<p>I want to internationalize the annotation in java, <strong>but the project is not based on spring.</strong></p>\n<p>(Sorry I'm a freshman in Java. The project is in NiFi and I don't know what it using. The project was built by Maven, Generating a NAR package that defines the processor is the purpose of the project build)(NAR package is a concept in NiFi. Similar to jar package, NAR package consists of multiple jar packages and configuration files.)</p>\n<p>Is there any way to use the replacement symbol $ in non spring project? To refer to the translated text in Messages.properties like\n<code>@CapabilityDescription(value = &quot;${text}&quot;).</code></p>\n<p>and set <code>text=&quot;description&quot;</code>in Messages.properties</p>\n<p>I try ResourceBundle.getString in annotation but failed(Attribute value must be constant)\n<code>@CapabilityDescription(MyResourceBundle.mybundle.getString(&quot;text&quot;))</code></p>\n<p>this is the definition code of CapabilityDescription</p>\n<pre><code> * Annotation that may be placed on a {@link org.apache.nifi.processor.Processor Processor},\n * {@link org.apache.nifi.controller.ControllerService ControllerService}, or\n * {@link org.apache.nifi.reporting.ReportingTask ReportingTask} allowing for a\n * description to be provided. This description can be provided to a user in\n * logs, UI, etc.\n *\n */\n@Documented\n@Target({ElementType.TYPE})\n@Retention(RetentionPolicy.RUNTIME)\n@Inherited\npublic @interface CapabilityDescription {\n\n    String value();\n}\n</code></pre>\n<p>Or any idea that can realize the internationalization in annotation. Thank you for your idea.</p>\n<p>Thanks for @Holger I find the code that reading the annotation. (DtoFactory.java In another project)</p>\n<pre><code>/**\n * Gets the capability description from the specified class.\n */\nprivate String getCapabilityDescription(final Class&lt;?&gt; cls) {\n    final CapabilityDescription capabilityDesc = cls.getAnnotation(CapabilityDescription.class);\n    return capabilityDesc == null ? null : capabilityDesc.value();\n}\n</code></pre>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":2273465,"reputation":15439,"user_id":2000323,"display_name":"Andrey"},"score":0,"creation_date":1635766708,"post_id":69794905,"comment_id":123373254,"body_markdown":"Check this https://stackoverflow.com/q/39944223/2000323","body":"Check this <a href=\"https://stackoverflow.com/q/39944223/2000323\">stackoverflow.com/q/39944223/2000323</a>"},{"owner":{"account_id":7018638,"reputation":1,"user_id":5378979,"display_name":"ivan long"},"score":0,"creation_date":1635814044,"post_id":69794905,"comment_id":123388416,"body_markdown":"The error is the xml of the dependency package, the answer of this link can not solve my problem","body":"The error is the xml of the dependency package, the answer of this link can not solve my problem"},{"owner":{"account_id":7018638,"reputation":1,"user_id":5378979,"display_name":"ivan long"},"score":0,"creation_date":1635814753,"post_id":69794905,"comment_id":123388541,"body_markdown":"What I don’t understand is, the same pom.xml, why eclipse can start normally, the idea will report this error when started","body":"What I don’t understand is, the same pom.xml, why eclipse can start normally, the idea will report this error when started"},{"owner":{"account_id":7018638,"reputation":1,"user_id":5378979,"display_name":"ivan long"},"score":0,"creation_date":1635909609,"post_id":69794905,"comment_id":123415909,"body_markdown":"I am using the idea community edition, the Ultimate edition does not have this problem","body":"I am using the idea community edition, the Ultimate edition does not have this problem"},{"owner":{"account_id":2273465,"reputation":15439,"user_id":2000323,"display_name":"Andrey"},"score":0,"creation_date":1636018370,"post_id":69794905,"comment_id":123447590,"body_markdown":"This is expected with Community Edition as it doesn&#39;t have Spring support and does not bundle spring resources that it uses for validation of the Spring schemas and the run configuration for running Spring applications.","body":"This is expected with Community Edition as it doesn&#39;t have Spring support and does not bundle spring resources that it uses for validation of the Spring schemas and the run configuration for running Spring applications."}],"owner":{"account_id":7018638,"reputation":1,"user_id":5378979,"display_name":"ivan long"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1635758583,"creation_date":1635758583,"question_id":69794905,"body_markdown":"I use the idea startup program to report an error, but I can start normally with eclipse. What is the reason?\r\n\r\n    [2021-11-01 16:53:27.886] [main                  ] [ERROR] \r\n    [org.springframework.boot.SpringApplication                  :837] - Application run failed\r\n    org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration \r\n    problem: Unable to locate Spring NamespaceHandler for XML schema namespace \r\n    [http://www.springframework.org/schema/data/jpa]\r\n    Offending resource: URL [jar:file:/D:/mavens/repository/com/ygsoft/necp/component/necp.component.unstructure/7.1.0.ecp/necp.component.unstructure-7.1.0.ecp.jar!/META-INF/ecp-spring/ecp.unstructure.xml]\r\n","title":"idea run error:Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.springframework.org/schema/data/jpa]","body":"<p>I use the idea startup program to report an error, but I can start normally with eclipse. What is the reason?</p>\n<pre><code>[2021-11-01 16:53:27.886] [main                  ] [ERROR] \n[org.springframework.boot.SpringApplication                  :837] - Application run failed\norg.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration \nproblem: Unable to locate Spring NamespaceHandler for XML schema namespace \n[http://www.springframework.org/schema/data/jpa]\nOffending resource: URL [jar:file:/D:/mavens/repository/com/ygsoft/necp/component/necp.component.unstructure/7.1.0.ecp/necp.component.unstructure-7.1.0.ecp.jar!/META-INF/ecp-spring/ecp.unstructure.xml]\n</code></pre>\n"},{"tags":["java","kubernetes","openshift","quarkus","fabric8"],"answers":[{"tags":[],"owner":{"account_id":3370885,"reputation":5502,"user_id":2830116,"accept_rate":88,"display_name":"Rohan Kumar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1635530711,"creation_date":1635529105,"answer_id":69772833,"question_id":69766220,"body_markdown":"Fabric8 Kubernetes Client has `client.getApiGroups()` method to get a list of all available api groups. You can then get api resource for each version using `client.getApiResources()` to get output like `kubectl api-resources`.\r\n\r\nI was able to do it with something like this. I am using Fabric8 Kubernetes Client v5.9.0:\r\n\r\n```java\r\ntry (KubernetesClient client = new DefaultKubernetesClient()) {\r\n  APIGroupList apiGroupList = client.getApiGroups();\r\n\r\n  apiGroupList.getGroups()\r\n    .forEach(group -&gt; group.getVersions().forEach(gv -&gt; {\r\n      APIResourceList apiResourceList = client.getApiResources(gv.getGroupVersion());\r\n      apiResourceList.getResources()\r\n        .stream()\r\n        .filter(r -&gt; !r.getName().contains(&quot;/&quot;))\r\n        .forEach(r -&gt; System.out.printf(&quot;%s  %s   %s   %s   %s%n&quot;, r.getName(), String.join( &quot;,&quot;, r.getShortNames()), \r\n          gv.getGroupVersion(), r.getNamespaced(), r.getKind()));\r\n    }));\r\n}\r\n```","title":"Retrieve list of openshift resources with fabric8 openshift-client","body":"<p>Fabric8 Kubernetes Client has <code>client.getApiGroups()</code> method to get a list of all available api groups. You can then get api resource for each version using <code>client.getApiResources()</code> to get output like <code>kubectl api-resources</code>.</p>\n<p>I was able to do it with something like this. I am using Fabric8 Kubernetes Client v5.9.0:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (KubernetesClient client = new DefaultKubernetesClient()) {\n  APIGroupList apiGroupList = client.getApiGroups();\n\n  apiGroupList.getGroups()\n    .forEach(group -&gt; group.getVersions().forEach(gv -&gt; {\n      APIResourceList apiResourceList = client.getApiResources(gv.getGroupVersion());\n      apiResourceList.getResources()\n        .stream()\n        .filter(r -&gt; !r.getName().contains(&quot;/&quot;))\n        .forEach(r -&gt; System.out.printf(&quot;%s  %s   %s   %s   %s%n&quot;, r.getName(), String.join( &quot;,&quot;, r.getShortNames()), \n          gv.getGroupVersion(), r.getNamespaced(), r.getKind()));\n    }));\n}\n</code></pre>\n"}],"owner":{"account_id":5519215,"reputation":605,"user_id":4382794,"accept_rate":33,"display_name":"alphamikevictor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":554,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1635758370,"creation_date":1635498152,"question_id":69766220,"body_markdown":"I am trying to get a list of all possible resources of a given cluster using the fabric8 openshift-client (or kubernetes-client), so trying to obtain same as command `oc api-resources`. So far I am able to get the list of apiGroups with a code like this\r\n\r\n```java\r\nOpenShiftClient client = new DefaultOpenshiftClient();\r\nList&lt;APIService&gt; apiservices = client.apiServices().list().getItems();\r\nfor (APIService apiservice : apiservices){\r\n  System.out.println(apiservice.getSpec().getGroup());\r\n}\r\n```\r\n\r\nNow I am looking how to obtain a list of Resources (and I see in the code there is a class names APIResource) belonging to a particular group, but I am not able to find it.\r\n\r\nEDIT:\r\n\r\nWhile I see in code there is a getApiResources() method, for some reason this is not shipped with the quarkus-kubernetes-client (or quarkus-openshift-client) on Quarkus 2.3\r\n\r\nAs a workaround I have used kubernetes API using RestClient to access /apis/{group}/{version} and /api/v1","title":"Retrieve list of openshift resources with fabric8 openshift-client","body":"<p>I am trying to get a list of all possible resources of a given cluster using the fabric8 openshift-client (or kubernetes-client), so trying to obtain same as command <code>oc api-resources</code>. So far I am able to get the list of apiGroups with a code like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>OpenShiftClient client = new DefaultOpenshiftClient();\nList&lt;APIService&gt; apiservices = client.apiServices().list().getItems();\nfor (APIService apiservice : apiservices){\n  System.out.println(apiservice.getSpec().getGroup());\n}\n</code></pre>\n<p>Now I am looking how to obtain a list of Resources (and I see in the code there is a class names APIResource) belonging to a particular group, but I am not able to find it.</p>\n<p>EDIT:</p>\n<p>While I see in code there is a getApiResources() method, for some reason this is not shipped with the quarkus-kubernetes-client (or quarkus-openshift-client) on Quarkus 2.3</p>\n<p>As a workaround I have used kubernetes API using RestClient to access /apis/{group}/{version} and /api/v1</p>\n"},{"tags":["java","apache-kafka","confluent-schema-registry"],"answers":[{"tags":[],"owner":{"account_id":6883697,"reputation":1206,"user_id":5289570,"display_name":"Wassadamo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586377553,"creation_date":1586377553,"answer_id":61109428,"question_id":61109427,"body_markdown":"Figured it out using:\r\n\r\n    SchemaMetadata sm = client.getLatestSchemaMetadata(schemaName);\r\n    System.out.println(sm.getSchema());","title":"Retrieve Schema From Confluent Schema Registry","body":"<p>Figured it out using:</p>\n\n<pre><code>SchemaMetadata sm = client.getLatestSchemaMetadata(schemaName);\nSystem.out.println(sm.getSchema());\n</code></pre>\n"}],"owner":{"account_id":6883697,"reputation":1206,"user_id":5289570,"display_name":"Wassadamo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":961,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635758281,"creation_date":1586377553,"question_id":61109427,"body_markdown":"I&#39;m trying to retrieve schema subject versions given a kafka topic from a schema registry. I can successfully POST a new version with `client.register(schema-name, schema)`, but I&#39;m not sure how to retrieve the versions. I tried below using a curl request, but the result hits -1 immediately (empty).\r\n\r\n    CachedSchemaRegistryClient client = new CachedSchemaRegistryClient(schemaRegistryUrl, 20);\r\n    \r\n    // curl -X GET http://schema.registry.url:8888/subjects/{topic}/versions/\r\n    \r\n    String command = &quot;curl -X GET --header &#39;Accept: application/vnd.schemaregistry.v1+json&#39; &#39;https://schema.registry.url:8888/api/schema-proxy/subjects/mytopic-value/versions&#39;&quot;;\r\n    Process process = Runtime.getRuntime().exec(command);\r\n    \r\n    Reader reader = new InputStreamReader(process.getInputStream());\r\n    int result;\r\n    while ((result = reader.read()) != -1){ // Nothing printed\r\n        System.out.println(result);\r\n    }\r\n\r\nHow can I fix this GET request, or better yet, how should I use the schema registry `client` to retrieve a schema?","title":"Retrieve Schema From Confluent Schema Registry","body":"<p>I'm trying to retrieve schema subject versions given a kafka topic from a schema registry. I can successfully POST a new version with <code>client.register(schema-name, schema)</code>, but I'm not sure how to retrieve the versions. I tried below using a curl request, but the result hits -1 immediately (empty).</p>\n\n<pre><code>CachedSchemaRegistryClient client = new CachedSchemaRegistryClient(schemaRegistryUrl, 20);\n\n// curl -X GET http://schema.registry.url:8888/subjects/{topic}/versions/\n\nString command = \"curl -X GET --header 'Accept: application/vnd.schemaregistry.v1+json' 'https://schema.registry.url:8888/api/schema-proxy/subjects/mytopic-value/versions'\";\nProcess process = Runtime.getRuntime().exec(command);\n\nReader reader = new InputStreamReader(process.getInputStream());\nint result;\nwhile ((result = reader.read()) != -1){ // Nothing printed\n    System.out.println(result);\n}\n</code></pre>\n\n<p>How can I fix this GET request, or better yet, how should I use the schema registry <code>client</code> to retrieve a schema?</p>\n"},{"tags":["java","hibernate","configuration","deprecated","bootstrapping"],"comments":[{"owner":{"account_id":2027945,"reputation":4954,"user_id":1812434,"accept_rate":57,"display_name":"Venkata Raju"},"score":0,"creation_date":1426671633,"post_id":8621906,"comment_id":46464260,"body_markdown":"Even in 4.3.8 quick start guide they are using this example: new Configuration()       .configure().buildSessionFactory(); :(","body":"Even in 4.3.8 quick start guide they are using this example: new Configuration()       .configure().buildSessionFactory(); :("},{"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"score":0,"creation_date":1452986740,"post_id":8621906,"comment_id":57408135,"body_markdown":"@VenkataRaju May be, it is not bad, because of in Hibernate 5 everything turn back and this example correct, but (!) all configuration examples here are [not valid for Hibernate 5](http://stackoverflow.com/a/32711654/3405171).","body":"@VenkataRaju May be, it is not bad, because of in Hibernate 5 everything turn back and this example correct, but (!) all configuration examples here are <a href=\"http://stackoverflow.com/a/32711654/3405171\">not valid for Hibernate 5</a>."}],"answers":[{"tags":[],"owner":{"account_id":46972,"reputation":356179,"user_id":139010,"accept_rate":81,"display_name":"Matt Ball"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1324688375,"creation_date":1324688375,"answer_id":8621964,"question_id":8621906,"body_markdown":"It&#39;s as simple as this: the JBoss docs are not 100% perfectly well-maintained. Go with [what the JavaDoc says][1]: `buildSessionFactory(ServiceRegistry serviceRegistry)`.\r\n\r\n\r\n  [1]: http://docs.jboss.org/hibernate/core/4.0/javadocs/org/hibernate/cfg/Configuration.html#buildSessionFactory%28org.hibernate.service.ServiceRegistry%29","title":"Is the buildSessionFactory() Configuration method deprecated in Hibernate?","body":"<p>It's as simple as this: the JBoss docs are not 100% perfectly well-maintained. Go with <a href=\"http://docs.jboss.org/hibernate/core/4.0/javadocs/org/hibernate/cfg/Configuration.html#buildSessionFactory%28org.hibernate.service.ServiceRegistry%29\" rel=\"nofollow\">what the JavaDoc says</a>: <code>buildSessionFactory(ServiceRegistry serviceRegistry)</code>.</p>\n"},{"tags":[],"owner":{"account_id":390844,"reputation":27902,"user_id":751158,"accept_rate":100,"display_name":"ziesemer"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1324750351,"creation_date":1324688444,"answer_id":8621969,"question_id":8621906,"body_markdown":"Yes, it is deprecated.  http://docs.jboss.org/hibernate/core/4.0/javadocs/org/hibernate/cfg/Configuration.html#buildSessionFactory() specifically tells you to use the other method you found instead (`buildSessionFactory(ServiceRegistry serviceRegistry)`) - so use it.\r\n\r\nThe documentation is copied over from release to release, and likely just hasn&#39;t been updated yet (they don&#39;t rewrite the manual with every release) - so trust the Javadocs.\r\n\r\nThe specifics of this change can be viewed at:\r\n\r\n - Source code: https://github.com/hibernate/hibernate-core/commit/0b10334e403cf2b11ee60725cc5619eaafecc00b\r\n - Ticket: https://hibernate.onjira.com/browse/HHH-5991\r\n\r\nSome additional references:\r\n\r\n - http://relation.to/Bloggers/HibernateCore40IsFinal\r\n - http://relation.to/19942.lace\r\n - http://docs.jboss.org/hibernate/core/4.0/devguide/en-US/html/ch07.html#services-registry\r\n - http://sourceforge.net/apps/mediawiki/hibernate/index.php?title=Category:Services","title":"Is the buildSessionFactory() Configuration method deprecated in Hibernate?","body":"<p>Yes, it is deprecated.  <a href=\"http://docs.jboss.org/hibernate/core/4.0/javadocs/org/hibernate/cfg/Configuration.html#buildSessionFactory\">http://docs.jboss.org/hibernate/core/4.0/javadocs/org/hibernate/cfg/Configuration.html#buildSessionFactory</a>() specifically tells you to use the other method you found instead (<code>buildSessionFactory(ServiceRegistry serviceRegistry)</code>) - so use it.</p>\n\n<p>The documentation is copied over from release to release, and likely just hasn't been updated yet (they don't rewrite the manual with every release) - so trust the Javadocs.</p>\n\n<p>The specifics of this change can be viewed at:</p>\n\n<ul>\n<li>Source code: <a href=\"https://github.com/hibernate/hibernate-core/commit/0b10334e403cf2b11ee60725cc5619eaafecc00b\">https://github.com/hibernate/hibernate-core/commit/0b10334e403cf2b11ee60725cc5619eaafecc00b</a></li>\n<li>Ticket: <a href=\"https://hibernate.onjira.com/browse/HHH-5991\">https://hibernate.onjira.com/browse/HHH-5991</a></li>\n</ul>\n\n<p>Some additional references:</p>\n\n<ul>\n<li><a href=\"http://relation.to/Bloggers/HibernateCore40IsFinal\">http://relation.to/Bloggers/HibernateCore40IsFinal</a></li>\n<li><a href=\"http://relation.to/19942.lace\">http://relation.to/19942.lace</a></li>\n<li><a href=\"http://docs.jboss.org/hibernate/core/4.0/devguide/en-US/html/ch07.html#services-registry\">http://docs.jboss.org/hibernate/core/4.0/devguide/en-US/html/ch07.html#services-registry</a></li>\n<li><a href=\"http://sourceforge.net/apps/mediawiki/hibernate/index.php?title=Category:Services\">http://sourceforge.net/apps/mediawiki/hibernate/index.php?title=Category:Services</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1452987363,"creation_date":1324865644,"answer_id":8632566,"question_id":8621906,"body_markdown":"It is not unusual to find discrepancies between different versions of documentation.  Most developers view documentation as a chore, and they tend to put it off.\r\n\r\nAs a rule of thumb, if the javadoc says one thing and some non-javadoc documentation contradicts it, the chances are that the javadoc is more accurate.  Programmers are more likely to keep the javadoc up to date with changes to the code ... because the &quot;source&quot; for the javadoc is in the same file as the code.\r\n\r\nIn the case of `@deprecated` tags, it is a virtual certainty that the javadoc is more accurate.  Developers deprecate things after careful consideration ... and (generally speaking) they don&#39;t undeprecate them.\r\n\r\n","title":"Is the buildSessionFactory() Configuration method deprecated in Hibernate?","body":"<p>It is not unusual to find discrepancies between different versions of documentation.  Most developers view documentation as a chore, and they tend to put it off.</p>\n\n<p>As a rule of thumb, if the javadoc says one thing and some non-javadoc documentation contradicts it, the chances are that the javadoc is more accurate.  Programmers are more likely to keep the javadoc up to date with changes to the code ... because the \"source\" for the javadoc is in the same file as the code.</p>\n\n<p>In the case of <code>@deprecated</code> tags, it is a virtual certainty that the javadoc is more accurate.  Developers deprecate things after careful consideration ... and (generally speaking) they don't undeprecate them.</p>\n"},{"tags":[],"owner":{"account_id":1043773,"reputation":5458,"user_id":1049184,"accept_rate":83,"display_name":"batbaatar"},"down_vote_count":0,"up_vote_count":385,"is_accepted":true,"score":385,"last_activity_date":1479724060,"creation_date":1326348438,"answer_id":8830848,"question_id":8621906,"body_markdown":"Yes it is deprecated. Replace your SessionFactory with the following:\r\n\r\nIn **Hibernate 4.0, 4.1, 4.2**\r\n\r\n    private static SessionFactory sessionFactory;\r\n    private static ServiceRegistry serviceRegistry;\r\n    \r\n    public static SessionFactory createSessionFactory() {\r\n    \tConfiguration configuration = new Configuration();\r\n    \tconfiguration.configure();\r\n    \tServiceRegistry serviceRegistry = new ServiceRegistryBuilder().applySettings(\r\n    \t\t\tconfiguration.getProperties()). buildServiceRegistry();\r\n    \tsessionFactory = configuration.buildSessionFactory(serviceRegistry);\r\n    \treturn sessionFactory;\r\n    }\r\n\r\n&gt; **UPDATE:**\r\n\r\nIn **Hibernate 4.3** ServiceRegistryBuilder is **deprecated**. Use the following instead.\r\n\r\n    serviceRegistry = new StandardServiceRegistryBuilder().applySettings(\r\n    \t\t\tconfiguration.getProperties()).build();","title":"Is the buildSessionFactory() Configuration method deprecated in Hibernate?","body":"<p>Yes it is deprecated. Replace your SessionFactory with the following:</p>\n\n<p>In <strong>Hibernate 4.0, 4.1, 4.2</strong></p>\n\n<pre><code>private static SessionFactory sessionFactory;\nprivate static ServiceRegistry serviceRegistry;\n\npublic static SessionFactory createSessionFactory() {\n    Configuration configuration = new Configuration();\n    configuration.configure();\n    ServiceRegistry serviceRegistry = new ServiceRegistryBuilder().applySettings(\n            configuration.getProperties()). buildServiceRegistry();\n    sessionFactory = configuration.buildSessionFactory(serviceRegistry);\n    return sessionFactory;\n}\n</code></pre>\n\n<blockquote>\n  <p><strong>UPDATE:</strong></p>\n</blockquote>\n\n<p>In <strong>Hibernate 4.3</strong> ServiceRegistryBuilder is <strong>deprecated</strong>. Use the following instead.</p>\n\n<pre><code>serviceRegistry = new StandardServiceRegistryBuilder().applySettings(\n            configuration.getProperties()).build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2005077,"reputation":131,"user_id":1795195,"display_name":"mixturez"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1364560362,"creation_date":1364558977,"answer_id":15702946,"question_id":8621906,"body_markdown":"or \r\n\r\n    public class Hbutil {\r\n\r\n        private static SessionFactory sessionFactory;\r\n        private static ServiceRegistry serviceRegistry;\r\n\r\n        private static SessionFactory configureSessionFactory() throws HibernateException {\r\n            Configuration configuration = new Configuration();\r\n            configuration.configure();\r\n            serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();        \r\n            sessionFactory = configuration.buildSessionFactory(serviceRegistry);\r\n            return sessionFactory;\r\n        }\r\n\r\n        public static SessionFactory getSessionFactory() {\r\n            return configureSessionFactory();\r\n\r\n        }\r\n    }\r\n\r\n","title":"Is the buildSessionFactory() Configuration method deprecated in Hibernate?","body":"<p>or </p>\n\n<pre><code>public class Hbutil {\n\n    private static SessionFactory sessionFactory;\n    private static ServiceRegistry serviceRegistry;\n\n    private static SessionFactory configureSessionFactory() throws HibernateException {\n        Configuration configuration = new Configuration();\n        configuration.configure();\n        serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();        \n        sessionFactory = configuration.buildSessionFactory(serviceRegistry);\n        return sessionFactory;\n    }\n\n    public static SessionFactory getSessionFactory() {\n        return configureSessionFactory();\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user2080225"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1399620426,"creation_date":1391201783,"answer_id":21489886,"question_id":8621906,"body_markdown":"Code verified to work in Hibernate 4.3.0. Notice you can remove the XML filename parameter, or else provide your own path there.  This is similar to (but typos corrected) other posts here, but this one is correct.\r\n\r\n    import org.hibernate.SessionFactory;\r\n    import org.hibernate.boot.registry.StandardServiceRegistryBuilder;\r\n    import org.hibernate.cfg.Configuration;\r\n    import org.hibernate.service.ServiceRegistry;    \r\n\r\n \r\n    Configuration configuration = new Configuration();\r\n    configuration.configure(&quot;/com/rtw/test/hiber/hibernate.cfg.xml&quot;);\r\n    ServiceRegistry  serviceRegistry = new StandardServiceRegistryBuilder().applySettings(configuration.getProperties()).build();        \r\n\t    sessionFactory = configuration.buildSessionFactory(serviceRegistry);","title":"Is the buildSessionFactory() Configuration method deprecated in Hibernate?","body":"<p>Code verified to work in Hibernate 4.3.0. Notice you can remove the XML filename parameter, or else provide your own path there.  This is similar to (but typos corrected) other posts here, but this one is correct.</p>\n\n<pre><code>import org.hibernate.SessionFactory;\nimport org.hibernate.boot.registry.StandardServiceRegistryBuilder;\nimport org.hibernate.cfg.Configuration;\nimport org.hibernate.service.ServiceRegistry;    \n\n\nConfiguration configuration = new Configuration();\nconfiguration.configure(\"/com/rtw/test/hiber/hibernate.cfg.xml\");\nServiceRegistry  serviceRegistry = new StandardServiceRegistryBuilder().applySettings(configuration.getProperties()).build();        \n    sessionFactory = configuration.buildSessionFactory(serviceRegistry);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3999398,"reputation":1959,"user_id":3295819,"display_name":"Bharathiraja"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1397535942,"creation_date":1397535942,"answer_id":23074654,"question_id":8621906,"body_markdown":"    public class HibernateSessionFactory {\r\n\r\n    private static final SessionFactory sessionFactory = buildSessionFactory1();\r\n\r\n    private static SessionFactory buildSessionFactory1() {\r\n    Configuration configuration = new Configuration().configure(); // configuration\r\n                                                                    // settings\r\n                                                                    // from\r\n                                                                    // hibernate.cfg.xml\r\n\r\n    StandardServiceRegistryBuilder serviceRegistryBuilder = new StandardServiceRegistryBuilder();\r\n\r\n\r\n    serviceRegistryBuilder.applySettings(configuration.getProperties());\r\n\r\n    ServiceRegistry serviceRegistry = serviceRegistryBuilder.build();\r\n\r\n    return configuration.buildSessionFactory(serviceRegistry);\r\n    }\r\n\r\n    public static SessionFactory getSessionFactory() {\r\n    return sessionFactory;\r\n     }\r\n\r\n    public static void shutdown() {\r\n    // Close caches and connection pools\r\n    getSessionFactory().close();\r\n     }","title":"Is the buildSessionFactory() Configuration method deprecated in Hibernate?","body":"<pre><code>public class HibernateSessionFactory {\n\nprivate static final SessionFactory sessionFactory = buildSessionFactory1();\n\nprivate static SessionFactory buildSessionFactory1() {\nConfiguration configuration = new Configuration().configure(); // configuration\n                                                                // settings\n                                                                // from\n                                                                // hibernate.cfg.xml\n\nStandardServiceRegistryBuilder serviceRegistryBuilder = new StandardServiceRegistryBuilder();\n\n\nserviceRegistryBuilder.applySettings(configuration.getProperties());\n\nServiceRegistry serviceRegistry = serviceRegistryBuilder.build();\n\nreturn configuration.buildSessionFactory(serviceRegistry);\n}\n\npublic static SessionFactory getSessionFactory() {\nreturn sessionFactory;\n }\n\npublic static void shutdown() {\n// Close caches and connection pools\ngetSessionFactory().close();\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1922425,"reputation":1733,"user_id":1733575,"accept_rate":0,"display_name":"Thadeuse"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1406272005,"creation_date":1406272005,"answer_id":24949920,"question_id":8621906,"body_markdown":"public void sampleConnection() throws Exception {\r\n\r\n         Configuration cfg = new Configuration().addResource(&quot;hibernate.cfg.xml&quot;).configure();\r\n         StandardServiceRegistryBuilder ssrb = new StandardServiceRegistryBuilder().applySettings(configuration.getProperties());\r\n         SessionFactory sessionFactory = configuration.buildSessionFactory(ssrb.build());\r\n         Session session = sessionFactory.openSession();\r\n         logger.debug(&quot; connection with the database created successfuly.&quot;);\r\n    }","title":"Is the buildSessionFactory() Configuration method deprecated in Hibernate?","body":"<p>public void sampleConnection() throws Exception {</p>\n\n<pre><code>     Configuration cfg = new Configuration().addResource(\"hibernate.cfg.xml\").configure();\n     StandardServiceRegistryBuilder ssrb = new StandardServiceRegistryBuilder().applySettings(configuration.getProperties());\n     SessionFactory sessionFactory = configuration.buildSessionFactory(ssrb.build());\n     Session session = sessionFactory.openSession();\n     logger.debug(\" connection with the database created successfuly.\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":739058,"reputation":5786,"user_id":1730115,"accept_rate":60,"display_name":"Nadjib Mami"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1406718464,"creation_date":1406718127,"answer_id":25035144,"question_id":8621906,"body_markdown":"I edited the method created by [batbaatar above][1] so it accepts the Configuration object as a parameter:\r\n\r\n        public static SessionFactory createSessionFactory(Configuration configuration) {\r\n            serviceRegistry = new StandardServiceRegistryBuilder().applySettings(\r\n                    configuration.getProperties()).build();\r\n            factory = configuration.buildSessionFactory(serviceRegistry);\r\n            return factory;\r\n        }\r\n\r\nIn the main class I did:\r\n\r\n        private static SessionFactory factory;\r\n        private static Configuration configuration \r\n        ...      \r\n        configuration = new Configuration();\r\n        configuration.configure().addAnnotatedClass(Employee.class);\r\n        // Other configurations, then           \r\n        factory = createSessionFactory(configuration);\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/8621906/is-buildsessionfactory-deprecated-in-hibernate-4/8830848#8830848","title":"Is the buildSessionFactory() Configuration method deprecated in Hibernate?","body":"<p>I edited the method created by <a href=\"https://stackoverflow.com/questions/8621906/is-buildsessionfactory-deprecated-in-hibernate-4/8830848#8830848\">batbaatar above</a> so it accepts the Configuration object as a parameter:</p>\n\n<pre><code>    public static SessionFactory createSessionFactory(Configuration configuration) {\n        serviceRegistry = new StandardServiceRegistryBuilder().applySettings(\n                configuration.getProperties()).build();\n        factory = configuration.buildSessionFactory(serviceRegistry);\n        return factory;\n    }\n</code></pre>\n\n<p>In the main class I did:</p>\n\n<pre><code>    private static SessionFactory factory;\n    private static Configuration configuration \n    ...      \n    configuration = new Configuration();\n    configuration.configure().addAnnotatedClass(Employee.class);\n    // Other configurations, then           \n    factory = createSessionFactory(configuration);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4554710,"reputation":692,"user_id":3698756,"accept_rate":67,"display_name":"Prasad Bhosale"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1407076257,"creation_date":1407076257,"answer_id":25105679,"question_id":8621906,"body_markdown":"Just import following package,\r\n\r\n    import org.hibernate.cfg.Configuration;","title":"Is the buildSessionFactory() Configuration method deprecated in Hibernate?","body":"<p>Just import following package,</p>\n\n<pre><code>import org.hibernate.cfg.Configuration;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2022605,"reputation":3327,"user_id":1808417,"display_name":"saneryee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1415697843,"creation_date":1415697843,"answer_id":26861458,"question_id":8621906,"body_markdown":"In **Hibernate 4.2.2**\r\n\r\n    import org.hibernate.Session;\r\n    import org.hibernate.SessionFactory;\r\n    import org.hibernate.Transaction;\r\n    import org.hibernate.cfg.Configuration;\r\n    import org.hibernate.service.ServiceRegistry;\r\n    import org.hibernate.service.ServiceRegistryBuilder;\r\n\r\n    public class Test {\r\n        public static void main(String[] args) throws Exception\r\n    {\r\n        Configuration configuration = new Configuration()\r\n                .configure();\r\n\r\n        ServiceRegistry serviceRegistry = new ServiceRegistryBuilder().applySettings(\r\n                configuration.getProperties()).buildServiceRegistry();\r\n\r\n        SessionFactory sessionFactory = configuration.buildSessionFactory(serviceRegistry);\r\n\r\n        Session session = sessionFactory.openSession();\r\n\r\n        Transaction transaction = session.beginTransaction();\r\n\r\n        Users users = new Users();\r\n\r\n        ... ...\r\n\r\n        session.save(users);\r\n\r\n        transaction.commit();\r\n\r\n        session.close();\r\n\r\n        sessionFactory.close();\r\n\r\n        }\r\n    }","title":"Is the buildSessionFactory() Configuration method deprecated in Hibernate?","body":"<p>In <strong>Hibernate 4.2.2</strong></p>\n\n<pre><code>import org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.Transaction;\nimport org.hibernate.cfg.Configuration;\nimport org.hibernate.service.ServiceRegistry;\nimport org.hibernate.service.ServiceRegistryBuilder;\n\npublic class Test {\n    public static void main(String[] args) throws Exception\n{\n    Configuration configuration = new Configuration()\n            .configure();\n\n    ServiceRegistry serviceRegistry = new ServiceRegistryBuilder().applySettings(\n            configuration.getProperties()).buildServiceRegistry();\n\n    SessionFactory sessionFactory = configuration.buildSessionFactory(serviceRegistry);\n\n    Session session = sessionFactory.openSession();\n\n    Transaction transaction = session.beginTransaction();\n\n    Users users = new Users();\n\n    ... ...\n\n    session.save(users);\n\n    transaction.commit();\n\n    session.close();\n\n    sessionFactory.close();\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3252189,"reputation":4357,"user_id":2742156,"accept_rate":64,"display_name":"Pratap A.K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1426316285,"creation_date":1426316285,"answer_id":29046342,"question_id":8621906,"body_markdown":"    Tested on 4.2.7 release\r\n    \r\n    package com.national.software.hibernate;\r\n    \r\n    import org.hibernate.Session;\r\n    import org.hibernate.SessionFactory;\r\n    import org.hibernate.cfg.Configuration;\r\n    import org.hibernate.service.ServiceRegistry;\r\n    import org.hibernate.service.ServiceRegistryBuilder;\r\n    \r\n    import com.national.software.dto.UserDetails;\r\n    \r\n    public class HibernateTest {\r\n    \r\n    \tstatic SessionFactory sessionFactory;\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\t\r\n    \t\tUserDetails user = new UserDetails();\r\n    \t\tuser.setUserId(1);\r\n    \t\tuser.setUserName(&quot;user1&quot;);\r\n    \t\t\r\n    \t\tConfiguration config = new Configuration();\r\n    \t\tconfig.configure();\r\n    \t\t\r\n    \t\tServiceRegistry  serviceRegistry = (ServiceRegistry) new ServiceRegistryBuilder().applySettings(config.getProperties()).buildServiceRegistry();\r\n    \t\tsessionFactory = config.buildSessionFactory(serviceRegistry);\r\n    \t\t\r\n    \t\tSession session = sessionFactory.openSession();\r\n    \t\tsession.beginTransaction();\r\n    \t\tsession.save(user);\r\n    \t\tsession.getTransaction().commit();\r\n     \r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"Is the buildSessionFactory() Configuration method deprecated in Hibernate?","body":"<pre><code>Tested on 4.2.7 release\n\npackage com.national.software.hibernate;\n\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.cfg.Configuration;\nimport org.hibernate.service.ServiceRegistry;\nimport org.hibernate.service.ServiceRegistryBuilder;\n\nimport com.national.software.dto.UserDetails;\n\npublic class HibernateTest {\n\n    static SessionFactory sessionFactory;\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n\n        UserDetails user = new UserDetails();\n        user.setUserId(1);\n        user.setUserName(\"user1\");\n\n        Configuration config = new Configuration();\n        config.configure();\n\n        ServiceRegistry  serviceRegistry = (ServiceRegistry) new ServiceRegistryBuilder().applySettings(config.getProperties()).buildServiceRegistry();\n        sessionFactory = config.buildSessionFactory(serviceRegistry);\n\n        Session session = sessionFactory.openSession();\n        session.beginTransaction();\n        session.save(user);\n        session.getTransaction().commit();\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1922425,"reputation":1733,"user_id":1733575,"accept_rate":0,"display_name":"Thadeuse"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1429610381,"creation_date":1429610381,"answer_id":29768931,"question_id":8621906,"body_markdown":"here are many APIs deprecated in the hibernate core framework.\r\n\r\nwe have created the session factory as below:\r\n\r\nSessionFactory sessionFactory = new Configuration().configure().buildSessionFactory(); \r\n\r\nThe method buildSessionFactory is deprecated from the hibernate 4 release and it is replaced with the new API. If you are using the hibernate 4.3.0 and above, your code has to be:\r\n\r\n1.\tConfiguration configuration = new Configuration().configure();\r\n\r\n2.\tStandardServiceRegistryBuilder builder = new StandardServiceRegistryBuilder().applySettings(configuration.getProperties());\r\n\r\n3.\tSessionFactory factory = configuration.buildSessionFactory(builder.build());\r\n\r\nClass ServiceRegistryBuilder is  replaced by StandardServiceRegistryBuilder from 4.3.0. It looks like there will be lot of changes in the 5.0 release. Still there is not much clarity on the deprecated APIs and the suitable alternatives to use. Every incremental release comes up with more deprecated API, they are in way of fine tuning the core framework for the release 5.0.","title":"Is the buildSessionFactory() Configuration method deprecated in Hibernate?","body":"<p>here are many APIs deprecated in the hibernate core framework.</p>\n\n<p>we have created the session factory as below:</p>\n\n<p>SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory(); </p>\n\n<p>The method buildSessionFactory is deprecated from the hibernate 4 release and it is replaced with the new API. If you are using the hibernate 4.3.0 and above, your code has to be:</p>\n\n<ol>\n<li><p>Configuration configuration = new Configuration().configure();</p></li>\n<li><p>StandardServiceRegistryBuilder builder = new StandardServiceRegistryBuilder().applySettings(configuration.getProperties());</p></li>\n<li><p>SessionFactory factory = configuration.buildSessionFactory(builder.build());</p></li>\n</ol>\n\n<p>Class ServiceRegistryBuilder is  replaced by StandardServiceRegistryBuilder from 4.3.0. It looks like there will be lot of changes in the 5.0 release. Still there is not much clarity on the deprecated APIs and the suitable alternatives to use. Every incremental release comes up with more deprecated API, they are in way of fine tuning the core framework for the release 5.0.</p>\n"},{"tags":[],"owner":{"account_id":5061558,"reputation":1331,"user_id":4062987,"accept_rate":100,"display_name":"kavi temre"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1431743615,"creation_date":1431718234,"answer_id":30267369,"question_id":8621906,"body_markdown":"A better way to create **SessionFactory** object in Latest hibernate release **4.3.0** onward is as follow:\r\n\r\n    Configuration configuration = new Configuration().configure();\r\n    StandardServiceRegistryBuilder builder = new StandardServiceRegistryBuilder().\r\n    applySettings(configuration.getProperties());\r\n    SessionFactory factory = configuration.buildSessionFactory(builder.build());","title":"Is the buildSessionFactory() Configuration method deprecated in Hibernate?","body":"<p>A better way to create <strong>SessionFactory</strong> object in Latest hibernate release <strong>4.3.0</strong> onward is as follow:</p>\n\n<pre><code>Configuration configuration = new Configuration().configure();\nStandardServiceRegistryBuilder builder = new StandardServiceRegistryBuilder().\napplySettings(configuration.getProperties());\nSessionFactory factory = configuration.buildSessionFactory(builder.build());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7428495,"reputation":600,"user_id":5650261,"accept_rate":50,"display_name":"Hasan K"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1493104468,"creation_date":1493102433,"answer_id":43603416,"question_id":8621906,"body_markdown":"If you are using **Hibernate 5.2** and above then you can use this:\r\n\r\n      private static StandardServiceRegistry registry;\r\n      private static SessionFactory sessionFactory;\r\n    \r\n      public static SessionFactory getSessionFactory() {\r\n        if (sessionFactory == null) {\r\n          try {\r\n            // Creating a registry\r\n            registry = new StandardServiceRegistryBuilder().configure(&quot;hibernate.cfg.xml&quot;).build();\r\n    \r\n            // Create the MetadataSources\r\n            MetadataSources sources = new MetadataSources(registry);\r\n    \r\n            // Create the Metadata\r\n            Metadata metadata = sources.getMetadataBuilder().build();\r\n    \r\n            // Create SessionFactory\r\n            sessionFactory = metadata.getSessionFactoryBuilder().build();\r\n    \r\n          } catch (Exception e) {\r\n            e.printStackTrace();\r\n            if (registry != null) {\r\n              StandardServiceRegistryBuilder.destroy(registry);\r\n            }\r\n          }\r\n        }\r\n        return sessionFactory;\r\n      }\r\n\r\n      //To shut down\r\n     public static void shutdown() {\r\n        if (registry != null) {\r\n          StandardServiceRegistryBuilder.destroy(registry);\r\n        }\r\n      }\r\n\r\n","title":"Is the buildSessionFactory() Configuration method deprecated in Hibernate?","body":"<p>If you are using <strong>Hibernate 5.2</strong> and above then you can use this:</p>\n\n<pre><code>  private static StandardServiceRegistry registry;\n  private static SessionFactory sessionFactory;\n\n  public static SessionFactory getSessionFactory() {\n    if (sessionFactory == null) {\n      try {\n        // Creating a registry\n        registry = new StandardServiceRegistryBuilder().configure(\"hibernate.cfg.xml\").build();\n\n        // Create the MetadataSources\n        MetadataSources sources = new MetadataSources(registry);\n\n        // Create the Metadata\n        Metadata metadata = sources.getMetadataBuilder().build();\n\n        // Create SessionFactory\n        sessionFactory = metadata.getSessionFactoryBuilder().build();\n\n      } catch (Exception e) {\n        e.printStackTrace();\n        if (registry != null) {\n          StandardServiceRegistryBuilder.destroy(registry);\n        }\n      }\n    }\n    return sessionFactory;\n  }\n\n  //To shut down\n public static void shutdown() {\n    if (registry != null) {\n      StandardServiceRegistryBuilder.destroy(registry);\n    }\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9697694,"reputation":1266,"user_id":7193619,"display_name":"Quan VO"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1530018390,"creation_date":1530018390,"answer_id":51043688,"question_id":8621906,"body_markdown":"In `hibernate 5.3.1`, you can try this:\r\n\r\n    ServiceRegistry standardRegistry = \r\n                    new StandardServiceRegistryBuilder().configure().build();\r\n    \r\n    Metadata sources = new MetadataSources(standardRegistry).addAnnotatedClass(MyEntity.class).getMetadataBuilder().build();\r\n    \r\n    SessionFactory sf = sources.buildSessionFactory();\r\n\r\n","title":"Is the buildSessionFactory() Configuration method deprecated in Hibernate?","body":"<p>In <code>hibernate 5.3.1</code>, you can try this:</p>\n\n<pre><code>ServiceRegistry standardRegistry = \n                new StandardServiceRegistryBuilder().configure().build();\n\nMetadata sources = new MetadataSources(standardRegistry).addAnnotatedClass(MyEntity.class).getMetadataBuilder().build();\n\nSessionFactory sf = sources.buildSessionFactory();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5660305,"reputation":590,"user_id":4478147,"display_name":"Lilac"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1568398215,"creation_date":1568398215,"answer_id":57928471,"question_id":8621906,"body_markdown":"If anyone here after updating to 5.1 this is how it works\r\n\r\n```\r\nStandardServiceRegistry registry = new StandardServiceRegistryBuilder().configure().build();\r\n\t\t\t\tMetadataSources sources = new MetadataSources(registry);\r\n\t\t\t\tMetadata metadata = sources.getMetadataBuilder().build();\r\n\t\t\t\tsessionFactory = metadata.getSessionFactoryBuilder().build();\r\n```\r\n\r\ninstead of the below in hibernate 4.3\r\n```\r\n ServiceRegistry serviceRegistry = new ServiceRegistryBuilder().applySettings(\r\n            configuration.getProperties()). buildServiceRegistry();\r\n    sessionFactory = configuration.buildSessionFactory(serviceRegistry);\r\n```","title":"Is the buildSessionFactory() Configuration method deprecated in Hibernate?","body":"<p>If anyone here after updating to 5.1 this is how it works</p>\n\n<pre><code>StandardServiceRegistry registry = new StandardServiceRegistryBuilder().configure().build();\n                MetadataSources sources = new MetadataSources(registry);\n                Metadata metadata = sources.getMetadataBuilder().build();\n                sessionFactory = metadata.getSessionFactoryBuilder().build();\n</code></pre>\n\n<p>instead of the below in hibernate 4.3</p>\n\n<pre><code> ServiceRegistry serviceRegistry = new ServiceRegistryBuilder().applySettings(\n            configuration.getProperties()). buildServiceRegistry();\n    sessionFactory = configuration.buildSessionFactory(serviceRegistry);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1583007301,"creation_date":1583007301,"answer_id":60469231,"question_id":8621906,"body_markdown":"TL;DR\r\n-----\r\n\r\nYes, it is. There are better ways to bootstrap Hibernate, like the following ones.\r\n\r\nHibernate-native bootstrap\r\n--------------------------\r\n\r\nThe legacy `Configuration` object is less powerful than using the `BootstrapServiceRegistryBuilder`, introduced since Hibernate 4:\r\n\r\n    final BootstrapServiceRegistryBuilder bsrb = new BootstrapServiceRegistryBuilder()\r\n        .enableAutoClose();\r\n    \r\n    Integrator integrator = integrator();\r\n    if (integrator != null) {\r\n        bsrb.applyIntegrator( integrator );\r\n    }\r\n    \r\n    final BootstrapServiceRegistry bsr = bsrb.build();\r\n    \r\n    final StandardServiceRegistry serviceRegistry = \r\n        new StandardServiceRegistryBuilder(bsr)\r\n            .applySettings(properties())\r\n            .build();\r\n    \r\n    final MetadataSources metadataSources = new MetadataSources(serviceRegistry);\r\n    \r\n    for (Class annotatedClass : entities()) {\r\n        metadataSources.addAnnotatedClass(annotatedClass);\r\n    }\r\n    \r\n    String[] packages = packages();\r\n    if (packages != null) {\r\n        for (String annotatedPackage : packages) {\r\n            metadataSources.addPackage(annotatedPackage);\r\n        }\r\n    }\r\n    \r\n    String[] resources = resources();\r\n    if (resources != null) {\r\n        for (String resource : resources) {\r\n            metadataSources.addResource(resource);\r\n        }\r\n    }\r\n    \r\n    final MetadataBuilder metadataBuilder = metadataSources.getMetadataBuilder()\r\n        .enableNewIdentifierGeneratorSupport(true)\r\n        .applyImplicitNamingStrategy(ImplicitNamingStrategyLegacyJpaImpl.INSTANCE);\r\n    \r\n    final List&lt;Type&gt; additionalTypes = additionalTypes();\r\n    if (additionalTypes != null) {\r\n        additionalTypes.stream().forEach(type -&gt; {\r\n            metadataBuilder.applyTypes((typeContributions, sr) -&gt; {\r\n                if(type instanceof BasicType) {\r\n                    typeContributions.contributeType((BasicType) type);\r\n                } else if (type instanceof UserType ){\r\n                    typeContributions.contributeType((UserType) type);\r\n                } else if (type instanceof CompositeUserType) {\r\n                    typeContributions.contributeType((CompositeUserType) type);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    \r\n    additionalMetadata(metadataBuilder);\r\n    \r\n    MetadataImplementor metadata = (MetadataImplementor) metadataBuilder.build();\r\n    \r\n    final SessionFactoryBuilder sfb = metadata.getSessionFactoryBuilder();\r\n    Interceptor interceptor = interceptor();\r\n    if(interceptor != null) {\r\n        sfb.applyInterceptor(interceptor);\r\n    }\r\n    \r\n    SessionFactory sessionFactory = sfb.build();\r\n\r\nJPA bootstrap\r\n-------------\r\n\r\nYou can also bootstrap Hibernate using JPA:\r\n\r\n    PersistenceUnitInfo persistenceUnitInfo = persistenceUnitInfo(getClass().getSimpleName());\r\n    Map configuration = properties();\r\n    \r\n    Interceptor interceptor = interceptor();\r\n    if (interceptor != null) {\r\n    \tconfiguration.put(AvailableSettings.INTERCEPTOR, interceptor);\r\n    }\r\n    \r\n    Integrator integrator = integrator();\r\n    if (integrator != null) {\r\n    \tconfiguration.put(\r\n    \t\t&quot;hibernate.integrator_provider&quot;, \r\n    \t\t(IntegratorProvider) () -&gt; Collections.singletonList(integrator));\r\n    }\r\n    \r\n    EntityManagerFactoryBuilderImpl entityManagerFactoryBuilder = \r\n    \tnew EntityManagerFactoryBuilderImpl(\r\n    \t\tnew PersistenceUnitInfoDescriptor(persistenceUnitInfo), \r\n    \t\tconfiguration\r\n    );\r\n    EntityManagerFactory entityManagerFactory = entityManagerFactoryBuilder.build();\r\n\r\nThis way, you are building the `EntityManagerFactory` instead of a `SessionFactory`. However, the `SessionFactory` extends the `EntityManagerFactory, so the actual object that&#39;s built is a `SessionFactoryImpl` too.\r\n\r\nConclusion\r\n----------\r\n\r\nThese two bootstrapping methods affect Hibernate behavior. When using the native bootstrap, Hibernate behaves in the legacy mode, which predates JPA.\r\n\r\nWhen bootstrapping using JPA, Hibernate will behave according to the JPA specification.\r\n\r\nThere are several differences between these two modes:\r\n\r\n- [How the AUTO flush mode works in regards to native SQL queries](https://vladmihalcea.com/how-does-the-auto-flush-work-in-jpa-and-hibernate/)\r\n- How the entity Proxy is built. Traditionally, Hibernate did not hit the DB when building a Proxy, but JPA requires throwing an `EntityNotFoundException`, therefore demanding a DB check.\r\n- whether you can delete a non-managed entity\r\n\r\n&gt; For more details about these differences, check out the [`JpaCompliance`](https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/jpa/spi/JpaCompliance.java) class.\r\n\r\n","title":"Is the buildSessionFactory() Configuration method deprecated in Hibernate?","body":"<h2>TL;DR</h2>\n\n<p>Yes, it is. There are better ways to bootstrap Hibernate, like the following ones.</p>\n\n<h2>Hibernate-native bootstrap</h2>\n\n<p>The legacy <code>Configuration</code> object is less powerful than using the <code>BootstrapServiceRegistryBuilder</code>, introduced since Hibernate 4:</p>\n\n<pre><code>final BootstrapServiceRegistryBuilder bsrb = new BootstrapServiceRegistryBuilder()\n    .enableAutoClose();\n\nIntegrator integrator = integrator();\nif (integrator != null) {\n    bsrb.applyIntegrator( integrator );\n}\n\nfinal BootstrapServiceRegistry bsr = bsrb.build();\n\nfinal StandardServiceRegistry serviceRegistry = \n    new StandardServiceRegistryBuilder(bsr)\n        .applySettings(properties())\n        .build();\n\nfinal MetadataSources metadataSources = new MetadataSources(serviceRegistry);\n\nfor (Class annotatedClass : entities()) {\n    metadataSources.addAnnotatedClass(annotatedClass);\n}\n\nString[] packages = packages();\nif (packages != null) {\n    for (String annotatedPackage : packages) {\n        metadataSources.addPackage(annotatedPackage);\n    }\n}\n\nString[] resources = resources();\nif (resources != null) {\n    for (String resource : resources) {\n        metadataSources.addResource(resource);\n    }\n}\n\nfinal MetadataBuilder metadataBuilder = metadataSources.getMetadataBuilder()\n    .enableNewIdentifierGeneratorSupport(true)\n    .applyImplicitNamingStrategy(ImplicitNamingStrategyLegacyJpaImpl.INSTANCE);\n\nfinal List&lt;Type&gt; additionalTypes = additionalTypes();\nif (additionalTypes != null) {\n    additionalTypes.stream().forEach(type -&gt; {\n        metadataBuilder.applyTypes((typeContributions, sr) -&gt; {\n            if(type instanceof BasicType) {\n                typeContributions.contributeType((BasicType) type);\n            } else if (type instanceof UserType ){\n                typeContributions.contributeType((UserType) type);\n            } else if (type instanceof CompositeUserType) {\n                typeContributions.contributeType((CompositeUserType) type);\n            }\n        });\n    });\n}\n\nadditionalMetadata(metadataBuilder);\n\nMetadataImplementor metadata = (MetadataImplementor) metadataBuilder.build();\n\nfinal SessionFactoryBuilder sfb = metadata.getSessionFactoryBuilder();\nInterceptor interceptor = interceptor();\nif(interceptor != null) {\n    sfb.applyInterceptor(interceptor);\n}\n\nSessionFactory sessionFactory = sfb.build();\n</code></pre>\n\n<h2>JPA bootstrap</h2>\n\n<p>You can also bootstrap Hibernate using JPA:</p>\n\n<pre><code>PersistenceUnitInfo persistenceUnitInfo = persistenceUnitInfo(getClass().getSimpleName());\nMap configuration = properties();\n\nInterceptor interceptor = interceptor();\nif (interceptor != null) {\n    configuration.put(AvailableSettings.INTERCEPTOR, interceptor);\n}\n\nIntegrator integrator = integrator();\nif (integrator != null) {\n    configuration.put(\n        \"hibernate.integrator_provider\", \n        (IntegratorProvider) () -&gt; Collections.singletonList(integrator));\n}\n\nEntityManagerFactoryBuilderImpl entityManagerFactoryBuilder = \n    new EntityManagerFactoryBuilderImpl(\n        new PersistenceUnitInfoDescriptor(persistenceUnitInfo), \n        configuration\n);\nEntityManagerFactory entityManagerFactory = entityManagerFactoryBuilder.build();\n</code></pre>\n\n<p>This way, you are building the <code>EntityManagerFactory</code> instead of a <code>SessionFactory</code>. However, the <code>SessionFactory</code> extends the <code>EntityManagerFactory, so the actual object that's built is a</code>SessionFactoryImpl` too.</p>\n\n<h2>Conclusion</h2>\n\n<p>These two bootstrapping methods affect Hibernate behavior. When using the native bootstrap, Hibernate behaves in the legacy mode, which predates JPA.</p>\n\n<p>When bootstrapping using JPA, Hibernate will behave according to the JPA specification.</p>\n\n<p>There are several differences between these two modes:</p>\n\n<ul>\n<li><a href=\"https://vladmihalcea.com/how-does-the-auto-flush-work-in-jpa-and-hibernate/\" rel=\"nofollow noreferrer\">How the AUTO flush mode works in regards to native SQL queries</a></li>\n<li>How the entity Proxy is built. Traditionally, Hibernate did not hit the DB when building a Proxy, but JPA requires throwing an <code>EntityNotFoundException</code>, therefore demanding a DB check.</li>\n<li>whether you can delete a non-managed entity</li>\n</ul>\n\n<blockquote>\n  <p>For more details about these differences, check out the <a href=\"https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/jpa/spi/JpaCompliance.java\" rel=\"nofollow noreferrer\"><code>JpaCompliance</code></a> class.</p>\n</blockquote>\n"}],"owner":{"account_id":891335,"reputation":3416,"user_id":929529,"accept_rate":88,"display_name":"pushistic"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":187009,"favorite_count":0,"down_vote_count":0,"up_vote_count":223,"accepted_answer_id":8830848,"answer_count":18,"score":223,"last_activity_date":1635758148,"creation_date":1324687436,"question_id":8621906,"body_markdown":"When I updated the Hibernate version from 3.6.8 to 4.0.0, I got a warning about deprecated method `buildSessionFactory()` in this line:\r\n\r\n    private static final SessionFactory sessionFactory =\r\n             new Configuration().configure().buildSessionFactory();\r\n\r\nthe Javadoc recommends using another method \r\n\r\n `buildSessionFactory(ServiceRegistry serviceRegistry)`\r\n\r\nbut in the [documentation][1] I found deprecated variant\r\n\r\n\r\n  [1]: http://docs.jboss.org/hibernate/core/4.0/manual/en-US/html/session-configuration.html#configuration-sessionfactory","title":"Is the buildSessionFactory() Configuration method deprecated in Hibernate?","body":"<p>When I updated the Hibernate version from 3.6.8 to 4.0.0, I got a warning about deprecated method <code>buildSessionFactory()</code> in this line:</p>\n<pre><code>private static final SessionFactory sessionFactory =\n         new Configuration().configure().buildSessionFactory();\n</code></pre>\n<p>the Javadoc recommends using another method</p>\n<p><code>buildSessionFactory(ServiceRegistry serviceRegistry)</code></p>\n<p>but in the <a href=\"http://docs.jboss.org/hibernate/core/4.0/manual/en-US/html/session-configuration.html#configuration-sessionfactory\" rel=\"nofollow noreferrer\">documentation</a> I found deprecated variant</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1635757901,"post_id":69794680,"comment_id":123370205,"body_markdown":"Look at your inner loop. Is it traversing the second dimension of your array?","body":"Look at your inner loop. Is it traversing the second dimension of your array?"}],"answers":[{"tags":[],"owner":{"account_id":17352297,"reputation":2252,"user_id":12570528,"display_name":"Gregor Zurowski"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635757935,"creation_date":1635757935,"answer_id":69794781,"question_id":69794680,"body_markdown":"Your inner loop should count the elements of each array element by accessing them via `array[i]`:\r\n\r\n```\r\nint[][] array = {{2, 3, 2}, {2, 2}};\r\nint counter = 0;\r\nfor (int i = 0; i &lt; array.length; i++) {\r\n    for (int k = 0; k &lt; array[i].length; k++) {\r\n        counter++;\r\n    }\r\n}\r\n```","title":"Counting elements of a 2d array","body":"<p>Your inner loop should count the elements of each array element by accessing them via <code>array[i]</code>:</p>\n<pre><code>int[][] array = {{2, 3, 2}, {2, 2}};\nint counter = 0;\nfor (int i = 0; i &lt; array.length; i++) {\n    for (int k = 0; k &lt; array[i].length; k++) {\n        counter++;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":16939577,"reputation":11,"user_id":12251780,"display_name":"Pedro Diniz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":191,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1635819505,"answer_count":1,"score":-1,"last_activity_date":1635757935,"creation_date":1635757306,"question_id":69794680,"body_markdown":"I&#39;m trying to count each element of a 2d array, but for some reason I&#39;m doing something wrong: \r\n\r\n        int[][] array = {{2, 3, 2}, {2, 2}};\r\n        int counter = 0;\r\n        for (int i = 0; i &lt; array.length; i++) {\r\n            int k = 0;\r\n            for (k = 0; k &lt; array.length; k++) {\r\n                counter++;\r\n            }\r\n        }\r\n        System.out.println(counter);\r\n\r\n\r\n","title":"Counting elements of a 2d array","body":"<p>I'm trying to count each element of a 2d array, but for some reason I'm doing something wrong:</p>\n<pre><code>    int[][] array = {{2, 3, 2}, {2, 2}};\n    int counter = 0;\n    for (int i = 0; i &lt; array.length; i++) {\n        int k = 0;\n        for (k = 0; k &lt; array.length; k++) {\n            counter++;\n        }\n    }\n    System.out.println(counter);\n</code></pre>\n"},{"tags":["java","android","background-process"],"answers":[{"tags":[],"owner":{"account_id":8873341,"reputation":1424,"user_id":6626422,"display_name":"Thecarisma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1525568416,"creation_date":1525562604,"answer_id":50194895,"question_id":50193623,"body_markdown":"There is no default way to do this you will need external libraries for this function. I have achived this once in my application by using **jaredrummler** android library. A simple usage is illustrated below\r\n\r\n&gt; Add to gradle\r\n\r\n    dependencies {\r\n        ...\r\n        compile &#39;com.jaredrummler:android-processes:1.1.1&#39;\r\n    }\r\n\r\n&gt; Create a wrapper Class Model\r\n\r\nYou can create a wrapper model like below if you want to store the basic informations about the running process to use it inside list view or elsewhere\r\n\r\n    ...\r\n    import android.graphics.drawable.Drawable;\r\n    \r\n    public class RunningApplication {\r\n         public String processName, pid = &quot;&quot; ;\r\n         public long startTime = 0 ;\r\n         public Drawable processIcon = null ;\r\n    \r\n         public RunningApplication(String name, long start, String pid, Drawable icon) {\r\n            this.processName = name ;\r\n            this.startTime = start ;\r\n            this.pid = pid ;\r\n            this.processIcon = icon ;\r\n         }\r\n    \r\n         public getProcessName() {\r\n            return processname ;\r\n         }\r\n    \r\n         ...\r\n         \r\n    }\r\n\r\n&gt; Use in you class\r\n\r\n    ...\r\n    import android.content.pm.ApplicationInfo;\r\n    import android.content.pm.PackageInfo;\r\n    import android.content.pm.PackageManager;\r\n    \r\n    import com.jaredrummler.android.processes.AndroidProcesses;\r\n    import com.jaredrummler.android.processes.models.AndroidAppProcess;\r\n    import com.jaredrummler.android.processes.models.Stat;\r\n    import com.jaredrummler.android.processes.models.Statm;\r\n    \r\n    class YourClass extends Activity {\r\n        List&lt;RunningApplication&gt; runningApplicationList = new ArrayList&lt;&gt;();\r\n    \r\n        ...\r\n        public void getRunningApps() {\r\n            List&lt;AndroidAppProcess&gt; processes = AndroidProcesses.getRunningAppProcesses();\r\n            PackageManager pm = getPackageManager();\r\n            for (AndroidAppProcess pro : processes) {\r\n               try {\r\n                    String proccessname = pro.name;\r\n                    Stat stat = pro.stat();\r\n                    int pid = stat.getPid();\r\n                    int parentProccessId = stat.ppid();\r\n                    long startTime = stat.stime();\r\n                    int policy = stat.policy();\r\n                    char state = stat.state();\r\n    \r\n                    Statm statm = pro.statm();\r\n                    long totalSizeofProccess = statm.getSize();\r\n                    long residentSetSize = statm.getResidentSetSize();\r\n    \r\n                    PackageInfo packageInfo = pro.getPackageInfo(basecontext, 0);\r\n                    \r\n                    //get the app name\r\n                    String appName = packageInfo.applicationInfo.loadLabel(pm).toString();\r\n                    //Get the app icon\r\n                    Drawable appIcon = packageInfo.applicationInfo.loadIcon(pm);\r\n                    //Add it to your list of running app\r\n                    RunningApplication ra = new RunningApplication(appName,startTime,pid,appIcon);\r\n                    runningApplicationList.add(ra);\r\n               } catch (Exception ex) {\r\n                    Log.e(&quot;APPNAME.CONTEXT&quot;,e.getMessage());\r\n               }\r\n            }\r\n        }\r\n        \r\n    }\r\n    ...\r\n\r\n**NOTE:** It been over a year since i use the above code but it work perfectly fine at that time and it is not tested. You can search for the **jaredrummler** library for more information and possible updates","title":"How can I get running application names in background?","body":"<p>There is no default way to do this you will need external libraries for this function. I have achived this once in my application by using <strong>jaredrummler</strong> android library. A simple usage is illustrated below</p>\n\n<blockquote>\n  <p>Add to gradle</p>\n</blockquote>\n\n<pre><code>dependencies {\n    ...\n    compile 'com.jaredrummler:android-processes:1.1.1'\n}\n</code></pre>\n\n<blockquote>\n  <p>Create a wrapper Class Model</p>\n</blockquote>\n\n<p>You can create a wrapper model like below if you want to store the basic informations about the running process to use it inside list view or elsewhere</p>\n\n<pre><code>...\nimport android.graphics.drawable.Drawable;\n\npublic class RunningApplication {\n     public String processName, pid = \"\" ;\n     public long startTime = 0 ;\n     public Drawable processIcon = null ;\n\n     public RunningApplication(String name, long start, String pid, Drawable icon) {\n        this.processName = name ;\n        this.startTime = start ;\n        this.pid = pid ;\n        this.processIcon = icon ;\n     }\n\n     public getProcessName() {\n        return processname ;\n     }\n\n     ...\n\n}\n</code></pre>\n\n<blockquote>\n  <p>Use in you class</p>\n</blockquote>\n\n<pre><code>...\nimport android.content.pm.ApplicationInfo;\nimport android.content.pm.PackageInfo;\nimport android.content.pm.PackageManager;\n\nimport com.jaredrummler.android.processes.AndroidProcesses;\nimport com.jaredrummler.android.processes.models.AndroidAppProcess;\nimport com.jaredrummler.android.processes.models.Stat;\nimport com.jaredrummler.android.processes.models.Statm;\n\nclass YourClass extends Activity {\n    List&lt;RunningApplication&gt; runningApplicationList = new ArrayList&lt;&gt;();\n\n    ...\n    public void getRunningApps() {\n        List&lt;AndroidAppProcess&gt; processes = AndroidProcesses.getRunningAppProcesses();\n        PackageManager pm = getPackageManager();\n        for (AndroidAppProcess pro : processes) {\n           try {\n                String proccessname = pro.name;\n                Stat stat = pro.stat();\n                int pid = stat.getPid();\n                int parentProccessId = stat.ppid();\n                long startTime = stat.stime();\n                int policy = stat.policy();\n                char state = stat.state();\n\n                Statm statm = pro.statm();\n                long totalSizeofProccess = statm.getSize();\n                long residentSetSize = statm.getResidentSetSize();\n\n                PackageInfo packageInfo = pro.getPackageInfo(basecontext, 0);\n\n                //get the app name\n                String appName = packageInfo.applicationInfo.loadLabel(pm).toString();\n                //Get the app icon\n                Drawable appIcon = packageInfo.applicationInfo.loadIcon(pm);\n                //Add it to your list of running app\n                RunningApplication ra = new RunningApplication(appName,startTime,pid,appIcon);\n                runningApplicationList.add(ra);\n           } catch (Exception ex) {\n                Log.e(\"APPNAME.CONTEXT\",e.getMessage());\n           }\n        }\n    }\n\n}\n...\n</code></pre>\n\n<p><strong>NOTE:</strong> It been over a year since i use the above code but it work perfectly fine at that time and it is not tested. You can search for the <strong>jaredrummler</strong> library for more information and possible updates</p>\n"}],"owner":{"account_id":9946500,"reputation":15,"user_id":7361010,"display_name":"Mehmet Ali Aydemir"},"comment_count":0,"delete_vote_count":2,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":519,"favorite_count":0,"down_vote_count":5,"up_vote_count":1,"closed_date":1525604748,"accepted_answer_id":50194895,"answer_count":1,"score":-4,"last_activity_date":1635757145,"creation_date":1525551117,"question_id":50193623,"body_markdown":"For example, Instagram is running on background. I want get running app names on my **background running application** in java.","title":"How can I get running application names in background?","body":"<p>For example, Instagram is running on background. I want get running app names on my <strong>background running application</strong> in java.</p>\n"},{"tags":["java","input"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":3,"creation_date":1561039886,"post_id":56687821,"comment_id":99941217,"body_markdown":"I&#39;m sure this is a duplicate, but basically `scanner.nextInt()` doesn&#39;t consume the token if it&#39;s not an integer. I&#39;d personally be tempted to avoid `Scanner` entirely, and just read lines from `System.in` instead. I&#39;ve seen a *lot* of questions about `Scanner` that basically show it&#39;s a hard to use API.","body":"I&#39;m sure this is a duplicate, but basically <code>scanner.nextInt()</code> doesn&#39;t consume the token if it&#39;s not an integer. I&#39;d personally be tempted to avoid <code>Scanner</code> entirely, and just read lines from <code>System.in</code> instead. I&#39;ve seen a <i>lot</i> of questions about <code>Scanner</code> that basically show it&#39;s a hard to use API."},{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":0,"creation_date":1561040009,"post_id":56687821,"comment_id":99941302,"body_markdown":"Relevant but not a dup: [Scanner is skipping nextLine() after using next() or nextFoo()?](//stackoverflow.com/q/13102045)","body":"Relevant but not a dup: <a href=\"//stackoverflow.com/q/13102045\">Scanner is skipping nextLine() after using next() or nextFoo()?</a>"}],"answers":[{"tags":[],"owner":{"account_id":8433338,"reputation":20078,"user_id":6328256,"display_name":"Sash Sinha"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1635756956,"creation_date":1561040090,"answer_id":56687955,"question_id":56687821,"body_markdown":"You&#39;re on the right track with a while loop, basically, you just need to use [&lt;code&gt;Scanner.&lt;b&gt;next()&lt;/b&gt;&lt;/code&gt;](https://docs.oracle.com/javase/8/docs/api/java/util/Scanner.html#next--) when the user enters something other than an integer:\r\n\r\n    import java.util.Scanner;\r\n    \r\n    class Main {\r\n        public static void main(String[] args) {\r\n            Scanner scanner = new Scanner(System.in);\r\n            String prompt = &quot;Please enter an integer: &quot;;\r\n            int userInteger = getIntegerInput(prompt, scanner);\r\n            System.out.printf(&quot;You entered: %d%n&quot;, userInteger);\r\n        }\r\n    \r\n        private static int getIntegerInput(String prompt, Scanner scanner) {\r\n            System.out.print(prompt);\r\n            int validInteger = -1;\r\n            while (scanner.hasNext()) {\r\n                if (scanner.hasNextInt()) {\r\n                    validInteger = scanner.nextInt();\r\n                    break;\r\n                } else {\r\n                    System.out.println(&quot;Error: Invalid input, try again...&quot;);\r\n                    System.out.print(prompt);\r\n                    scanner.next();\r\n                }\r\n            }\r\n            return validInteger;\r\n        }\r\n    }\r\n\r\n**Example Usage:**\r\n\r\n    Please enter an integer: a\r\n    Error: Invalid input, try again...\r\n    Please enter an integer: &#128512;\r\n    Error: Invalid input, try again...\r\n    Please enter an integer: 1.0\r\n    Error: Invalid input, try again...\r\n    Please enter an integer: 6\r\n    You entered: 6","title":"How to avoid endless loop when testing if input is integer","body":"<p>You're on the right track with a while loop, basically, you just need to use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Scanner.html#next--\" rel=\"nofollow noreferrer\"><code>Scanner.<b>next()</b></code></a> when the user enters something other than an integer:</p>\n<pre><code>import java.util.Scanner;\n\nclass Main {\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n        String prompt = &quot;Please enter an integer: &quot;;\n        int userInteger = getIntegerInput(prompt, scanner);\n        System.out.printf(&quot;You entered: %d%n&quot;, userInteger);\n    }\n\n    private static int getIntegerInput(String prompt, Scanner scanner) {\n        System.out.print(prompt);\n        int validInteger = -1;\n        while (scanner.hasNext()) {\n            if (scanner.hasNextInt()) {\n                validInteger = scanner.nextInt();\n                break;\n            } else {\n                System.out.println(&quot;Error: Invalid input, try again...&quot;);\n                System.out.print(prompt);\n                scanner.next();\n            }\n        }\n        return validInteger;\n    }\n}\n</code></pre>\n<p><strong>Example Usage:</strong></p>\n<pre><code>Please enter an integer: a\nError: Invalid input, try again...\nPlease enter an integer: 😀\nError: Invalid input, try again...\nPlease enter an integer: 1.0\nError: Invalid input, try again...\nPlease enter an integer: 6\nYou entered: 6\n</code></pre>\n"}],"owner":{"account_id":16173107,"reputation":193,"user_id":11676447,"display_name":"Calipee"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":56687955,"answer_count":1,"score":1,"last_activity_date":1635756956,"creation_date":1561039708,"question_id":56687821,"body_markdown":"I&#39;m trying to only allow an integer input and stop my programm from breaking when something else is entered. Somehow my code creates an endless loop and doesn&#39;t let me enter a new input.\r\n\r\n        private static int x;\r\n    \r\n        public static void main(String[] args) {\r\n            testInput();\r\n        }\r\n    \r\n        public static void testInput(){\r\n            while (true){\r\n                System.out.println(&quot;Please enter Integer:&quot;);\r\n                try{\r\n                    setX(scanner.nextInt());\r\n                    break;\r\n                }catch (InputMismatchException i){\r\n                    System.out.println(&quot;Please use Integer&quot;);\r\n                }\r\n            }\r\n        }\r\n    \r\n        public static void setX(int integer){\r\n            x = integer;\r\n        }\r\n    }\r\n\r\nCreates endless loop which says: Please enter Integer: , Please use Integer instead of letting me make new input.\r\n","title":"How to avoid endless loop when testing if input is integer","body":"<p>I'm trying to only allow an integer input and stop my programm from breaking when something else is entered. Somehow my code creates an endless loop and doesn't let me enter a new input.</p>\n\n<pre><code>    private static int x;\n\n    public static void main(String[] args) {\n        testInput();\n    }\n\n    public static void testInput(){\n        while (true){\n            System.out.println(\"Please enter Integer:\");\n            try{\n                setX(scanner.nextInt());\n                break;\n            }catch (InputMismatchException i){\n                System.out.println(\"Please use Integer\");\n            }\n        }\n    }\n\n    public static void setX(int integer){\n        x = integer;\n    }\n}\n</code></pre>\n\n<p>Creates endless loop which says: Please enter Integer: , Please use Integer instead of letting me make new input.</p>\n"},{"tags":["java","jsp","tomcat","servlets"],"comments":[{"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"score":2,"creation_date":1635597426,"post_id":69779252,"comment_id":123344065,"body_markdown":"Which version of tomcat do you have in eclipse, and which one is it where it doesn&#39;t work? Also, can you provide more detailed error message, e.g. from the log?","body":"Which version of tomcat do you have in eclipse, and which one is it where it doesn&#39;t work? Also, can you provide more detailed error message, e.g. from the log?"},{"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"score":1,"creation_date":1635599575,"post_id":69779252,"comment_id":123344542,"body_markdown":"e.g. if deployment doesn&#39;t work on Tomcat 10: Check https://stackoverflow.com/q/64387472/13447","body":"e.g. if deployment doesn&#39;t work on Tomcat 10: Check <a href=\"https://stackoverflow.com/q/64387472/13447\">stackoverflow.com/q/64387472/13447</a>"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1635618159,"post_id":69779252,"comment_id":123346181,"body_markdown":"Always search Stack Overflow thoroughly before posting. If similar Questions exist, explain how they do not address your issue.","body":"Always search Stack Overflow thoroughly before posting. If similar Questions exist, explain how they do not address your issue."},{"owner":{"account_id":17443217,"reputation":29,"user_id":12644751,"display_name":"Roank1112"},"score":0,"creation_date":1635737073,"post_id":69779252,"comment_id":123366197,"body_markdown":"Virson is Tomcat 9.0.54.","body":"Virson is Tomcat 9.0.54."},{"owner":{"account_id":17443217,"reputation":29,"user_id":12644751,"display_name":"Roank1112"},"score":0,"creation_date":1635737853,"post_id":69779252,"comment_id":123366287,"body_markdown":"Version is Tomcat 9.0.54 on both server and eclipse PC. The operating system Win 10 and also tired on win server 2016.   At First time when I  run Servlet, it gives an error **Error instantiating servlet class [com.MyServlets.test]** here I have uploaded a full error screenshot [link](https://ibb.co/BBNN4Sg).   &amp;   When I try to access the same servlet second time I get this **The origin server did not find a current representation for the target resource or is not willing to disclose that one exists.**  here I have uploaded a full error screenshot [link](https://ibb.co/2PNV98p).","body":"Version is Tomcat 9.0.54 on both server and eclipse PC. The operating system Win 10 and also tired on win server 2016.   At First time when I  run Servlet, it gives an error <b>Error instantiating servlet class [com.MyServlets.test]</b> here I have uploaded a full error screenshot <a href=\"https://ibb.co/BBNN4Sg\" rel=\"nofollow noreferrer\">link</a>.   &amp;   When I try to access the same servlet second time I get this <b>The origin server did not find a current representation for the target resource or is not willing to disclose that one exists.</b>  here I have uploaded a full error screenshot <a href=\"https://ibb.co/2PNV98p\" rel=\"nofollow noreferrer\">link</a>."},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1635754757,"post_id":69779252,"comment_id":123369384,"body_markdown":"Does [Tomcat - UnsupportedClassException](https://stackoverflow.com/q/1907015/11748454) answer your question?","body":"Does <a href=\"https://stackoverflow.com/q/1907015/11748454\">Tomcat - UnsupportedClassException</a> answer your question?"}],"owner":{"account_id":17443217,"reputation":29,"user_id":12644751,"display_name":"Roank1112"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1635756399,"answer_count":0,"score":0,"last_activity_date":1635756330,"creation_date":1635593701,"question_id":69779252,"body_markdown":"I am new to JAVA development.\r\n\r\n\r\nI have created a simple Servlet called &#39;test&#39;.\r\n\r\n\r\n\r\n```\r\npackage com.MyServlets;\r\n\r\nimport java.io.IOException;\r\nimport java.io.PrintWriter;\r\n\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.annotation.WebServlet;\r\nimport javax.servlet.http.HttpServlet;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\n\r\n\r\n@WebServlet(&quot;/test&quot;)\r\npublic class test extends HttpServlet {\r\n\tprivate static final long serialVersionUID = 1L;\r\n   \r\n    public test() {\r\n        super();\r\n        // TODO Auto-generated constructor stub\r\n    }\r\n\r\n\t\r\n\tprotected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n\t\t\r\n\t\tresponse.setContentType(&quot;text/html&quot;);  \r\n\t\tPrintWriter pw= response.getWriter();  \r\n\t\tpw.println(&quot;&lt;h1&gt;This is get request.&lt;/h1&gt;&quot;);\r\n\t}\r\n\r\n\t\r\n\tprotected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n\t\t\r\n\t\tresponse.setContentType(&quot;text/html&quot;);  \r\n\t\tPrintWriter pw= response.getWriter();  \r\n\t\tpw.println(&quot;&lt;h1&gt;This is post request.&lt;/h1&gt;&quot;);\r\n\t\t\r\n\t}\r\n\r\n}\r\n```\r\n\r\n\r\nits works in Eclipse with Apache Tomcat. But after deployment on Apache Tomcat, it gives the error *&quot; error instantiating servlet class&quot;*.\r\n\r\nVersion is Tomcat 9.0.54 on both server and eclipse PC. \r\n\r\nThe operating system Win 10 and also tired on win server 2016. \r\n\r\nAt First time when I run Servlet, it gives an error `Error instantiating servlet class [com.MyServlets.test] `\r\nhere I have uploaded a full error screenshot \r\n[enter link description here][1]\r\n\r\nAnd When I try to access the same servlet second time I get this `The origin server did not find a current representation for the target resource or is not willing to disclose that one exists`. Here I have uploaded a full error screenshot [enter link description here][2]\r\n\r\n\r\n\r\nMy other JSP page works properly on the same Apache Tomcat.\r\n\r\nI tried [enter link description here][3]\r\nIt still has not worked \r\n\r\n\r\n  [1]: https://ibb.co/BBNN4Sg\r\n  [2]: https://ibb.co/2PNV98p\r\n  [3]: https://stackoverflow.com/questions/64387472/servlet-5-0-jar-throws-compile-error-on-javax-servlet-but-servlet-4-0-jar-does","title":"Servlet not working after deployment in apache tomcat 9.0","body":"<p>I am new to JAVA development.</p>\n<p>I have created a simple Servlet called 'test'.</p>\n<pre><code>package com.MyServlets;\n\nimport java.io.IOException;\nimport java.io.PrintWriter;\n\nimport javax.servlet.ServletException;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\n\n@WebServlet(&quot;/test&quot;)\npublic class test extends HttpServlet {\n    private static final long serialVersionUID = 1L;\n   \n    public test() {\n        super();\n        // TODO Auto-generated constructor stub\n    }\n\n    \n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        \n        response.setContentType(&quot;text/html&quot;);  \n        PrintWriter pw= response.getWriter();  \n        pw.println(&quot;&lt;h1&gt;This is get request.&lt;/h1&gt;&quot;);\n    }\n\n    \n    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        \n        response.setContentType(&quot;text/html&quot;);  \n        PrintWriter pw= response.getWriter();  \n        pw.println(&quot;&lt;h1&gt;This is post request.&lt;/h1&gt;&quot;);\n        \n    }\n\n}\n</code></pre>\n<p>its works in Eclipse with Apache Tomcat. But after deployment on Apache Tomcat, it gives the error <em>&quot; error instantiating servlet class&quot;</em>.</p>\n<p>Version is Tomcat 9.0.54 on both server and eclipse PC.</p>\n<p>The operating system Win 10 and also tired on win server 2016.</p>\n<p>At First time when I run Servlet, it gives an error <code>Error instantiating servlet class [com.MyServlets.test] </code>\nhere I have uploaded a full error screenshot\n<a href=\"https://ibb.co/BBNN4Sg\" rel=\"nofollow noreferrer\">enter link description here</a></p>\n<p>And When I try to access the same servlet second time I get this <code>The origin server did not find a current representation for the target resource or is not willing to disclose that one exists</code>. Here I have uploaded a full error screenshot <a href=\"https://ibb.co/2PNV98p\" rel=\"nofollow noreferrer\">enter link description here</a></p>\n<p>My other JSP page works properly on the same Apache Tomcat.</p>\n<p>I tried <a href=\"https://stackoverflow.com/questions/64387472/servlet-5-0-jar-throws-compile-error-on-javax-servlet-but-servlet-4-0-jar-does\">enter link description here</a>\nIt still has not worked</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database","google-cloud-platform"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1635675181,"post_id":69785194,"comment_id":123354239,"body_markdown":"Please edit your question and add your database structure as a JSON file. You can simply get it by clicking the Export JSON in the overflow menu (⠇) in your [Firebase Console](https://console.firebase.google.com/u/0/project/_/database/data). Please also indicate what is that `~~~`?","body":"Please edit your question and add your database structure as a JSON file. You can simply get it by clicking the Export JSON in the overflow menu (⠇) in your <a href=\"https://console.firebase.google.com/u/0/project/_/database/data\" rel=\"nofollow noreferrer\">Firebase Console</a>. Please also indicate what is that <code>~~~</code>?"},{"owner":{"account_id":17525669,"reputation":69,"user_id":12741593,"display_name":"Eye Lamp"},"score":0,"creation_date":1635676201,"post_id":69785194,"comment_id":123354456,"body_markdown":"I edited json file and ~~~ thing.","body":"I edited json file and ~~~ thing."}],"answers":[{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635755916,"creation_date":1635677013,"answer_id":69786062,"question_id":69785194,"body_markdown":"If you want to delete the first node (`-MCCtOfEcs-t8OhKAj_R`) that exists in the &quot;Posts&quot; node, please note that there is **no** need to perform a query. Since the key of the node is the same as the value of the `postKey` field, then you should simply use the following lines of code:\r\n\r\n    DatabaseReference db = FirebaseDatabase.getInstance().getReference();\r\n    db.child(&quot;Posts&quot;).child(&quot;-MCCtOfEcs-t8OhKAj_R&quot;)).removeValue();\r\n\r\nI also recommend you attach a complete listener to the `removeValue()` operation, to see if something goes wrong. If you don&#39;t have the proper rules, then an Exception will be thrown.\r\n\r\n**Edit:**\r\n\r\nAccording to your last comment:\r\n\r\n&gt; I want to delete Instances that have old timestamp.\r\n\r\nIn this case, you indeed need to use a query. If you need to delete, for example, children that are before a specific timestamp, then you use the [Query#endAt()][1] method, which:\r\n\r\n&gt; Creates a query constrained to only return child nodes with a value less than or equal to the given value, using the given orderBy directive or priority as default, and additionally only child nodes with a key less than or equal to the given key.\r\n\r\nHere is a working example:\r\n\r\n    DatabaseReference db = FirebaseDatabase.getInstance().getReference();\r\n    Query queryByTimestamp = db.child(&quot;Posts&quot;).orderByChild(&quot;timeStamp&quot;).endAt(1615602220595);\r\n    queryByTimestamp.get().addOnCompleteListener(new OnCompleteListener&lt;DataSnapshot&gt;() {\r\n\t\t@Override\r\n\t\tpublic void onComplete(@NonNull Task&lt;DataSnapshot&gt; task) {\r\n\t\t\tif (task.isSuccessful()) {\r\n\t\t\t\tfor (DataSnapshot ds : task.getResult().getChildren()) {\r\n\t\t\t\t\tds.getRef().removeValue();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tLog.d(&quot;TAG&quot;, task.getException().getMessage()); //Don&#39;t ignore potential errors!\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\nThe result of this query will be the removal of all children that exist before `1615602220595`.\r\n\r\n  [1]: https://firebase.google.com/docs/reference/android/com/google/firebase/database/Query#endAt(double,%20java.lang.String)","title":"in firebase realtime database delete post by timestamp","body":"<p>If you want to delete the first node (<code>-MCCtOfEcs-t8OhKAj_R</code>) that exists in the &quot;Posts&quot; node, please note that there is <strong>no</strong> need to perform a query. Since the key of the node is the same as the value of the <code>postKey</code> field, then you should simply use the following lines of code:</p>\n<pre><code>DatabaseReference db = FirebaseDatabase.getInstance().getReference();\ndb.child(&quot;Posts&quot;).child(&quot;-MCCtOfEcs-t8OhKAj_R&quot;)).removeValue();\n</code></pre>\n<p>I also recommend you attach a complete listener to the <code>removeValue()</code> operation, to see if something goes wrong. If you don't have the proper rules, then an Exception will be thrown.</p>\n<p><strong>Edit:</strong></p>\n<p>According to your last comment:</p>\n<blockquote>\n<p>I want to delete Instances that have old timestamp.</p>\n</blockquote>\n<p>In this case, you indeed need to use a query. If you need to delete, for example, children that are before a specific timestamp, then you use the <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/database/Query#endAt(double,%20java.lang.String)\" rel=\"nofollow noreferrer\">Query#endAt()</a> method, which:</p>\n<blockquote>\n<p>Creates a query constrained to only return child nodes with a value less than or equal to the given value, using the given orderBy directive or priority as default, and additionally only child nodes with a key less than or equal to the given key.</p>\n</blockquote>\n<p>Here is a working example:</p>\n<pre><code>DatabaseReference db = FirebaseDatabase.getInstance().getReference();\nQuery queryByTimestamp = db.child(&quot;Posts&quot;).orderByChild(&quot;timeStamp&quot;).endAt(1615602220595);\nqueryByTimestamp.get().addOnCompleteListener(new OnCompleteListener&lt;DataSnapshot&gt;() {\n    @Override\n    public void onComplete(@NonNull Task&lt;DataSnapshot&gt; task) {\n        if (task.isSuccessful()) {\n            for (DataSnapshot ds : task.getResult().getChildren()) {\n                ds.getRef().removeValue();\n            }\n        } else {\n            Log.d(&quot;TAG&quot;, task.getException().getMessage()); //Don't ignore potential errors!\n        }\n    }\n});\n</code></pre>\n<p>The result of this query will be the removal of all children that exist before <code>1615602220595</code>.</p>\n"}],"owner":{"account_id":17525669,"reputation":69,"user_id":12741593,"display_name":"Eye Lamp"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69786062,"answer_count":1,"score":1,"last_activity_date":1635755916,"creation_date":1635669677,"question_id":69785194,"body_markdown":"[It is my Realtime Database data][1]\r\n\r\n     &quot;Posts&quot; : {\r\n    &quot;-MCCtOfEcs-t8OhKAj_R&quot; : {\r\n      &quot;description&quot; : &quot;&quot;,\r\n      &quot;picture&quot; : &quot;https://firebasestorage.googleapis.com/v0/b/instagram-c0686.appspot.com/o/blog_images%2Fimage%3A22222?alt=media&amp;token=eb7ffc1f-f7bd-4ab7-a108-5baf92e3ef47&quot;,\r\n      &quot;postKey&quot; : &quot;-MCCtOfEcs-t8OhKAj_R&quot;,\r\n      &quot;timeStamp&quot; : 1594739760019,\r\n      &quot;title&quot; : &quot;&quot;,\r\n      &quot;userId&quot; : &quot;1tXK0R5B9uOWyAbzlZMEIs6axHo1&quot;\r\n    },\r\n    &quot;-MCCtPZxoFEChRczT9nY&quot; : {\r\n      &quot;description&quot; : &quot;&quot;,\r\n      &quot;picture&quot; : &quot;https://firebasestorage.googleapis.com/v0/b/instagram-c0686.appspot.com/o/blog_images%2Fimage%3A22222?alt=media&amp;token=c92b64ff-c2f6-4076-949a-b176253f0497&quot;,\r\n      &quot;postKey&quot; : &quot;-MCCtPZxoFEChRczT9nY&quot;,\r\n      &quot;timeStamp&quot; : 1594739763718,\r\n      &quot;title&quot; : &quot;&quot;,\r\n      &quot;userId&quot; : &quot;1tXK0R5B9uOWyAbzlZMEIs6axHo1&quot;\r\n    },\r\n\r\n  [1]: https://i.stack.imgur.com/gp4gv.png\r\n\r\n\r\nI want to delete a post by using the equalTo timeStamp variable. So I make a code.\r\n\r\n    Query fquery =FirebaseDatabase.getInstance().getReference(&quot;Posts&quot;).orderByChild(&quot;timeStamp&quot;).equalTo(&quot;1615602220595&quot;);\r\n\r\nBut I don&#39;t know why not working.. when I do this\r\n\r\n    Query fquery =FirebaseDatabase.getInstance().getReference(&quot;Posts&quot;).orderByChild(&quot;postKey&quot;).equalTo(&quot;-MCCtOfEcs-t8OhKAj_R&quot;);\r\n\r\nIt&#39;s worked.\r\n\r\nHere is full code.\r\n\r\n    public class PostDetailActivity extends AppCompatActivity {\r\n\r\n    ImageView imgPost,imgUserPost,imgCurrentUser;\r\n    TextView txtPostDesc,txtPostDateName,txtPostTitle;\r\n    EditText editTextComment;\r\n    Button btnAddComment;\r\n    String PostKey;\r\n    FirebaseAuth firebaseAuth;\r\n    FirebaseUser firebaseUser;\r\n    FirebaseDatabase firebaseDatabase;\r\n    RecyclerView RvComment;\r\n    CommentAdapter commentAdapter;\r\n    List&lt;Comment&gt; listComment;\r\n    static String COMMENT_KEY = &quot;Comment&quot;;\r\n    InputMethodManager imm;\r\n    EditText et;\r\n    Button btnDeletePost;\r\n    String myUid;\r\n    String UId;\r\n    String postImage;\r\n    private DatabaseReference mDatabase;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_post_detail);\r\n        imm = (InputMethodManager)getSystemService(INPUT_METHOD_SERVICE);\r\n        et = (EditText)findViewById(R.id.post_detail_comment);\r\n\r\n\r\n\r\n        // let&#39;s set the statue bar to transparent\r\n\r\n\r\n        // ini Views\r\n        RvComment = findViewById(R.id.rv_comment);\r\n        imgPost =findViewById(R.id.post_detail_img);\r\n        imgUserPost = findViewById(R.id.post_detail_user_img);\r\n        imgCurrentUser = findViewById(R.id.post_detail_currentuser_img);\r\n\r\n        txtPostTitle = findViewById(R.id.post_detail_title);\r\n        txtPostDesc = findViewById(R.id.post_detail_desc);\r\n        txtPostDateName = findViewById(R.id.post_detail_date_name);\r\n\r\n        editTextComment = findViewById(R.id.post_detail_comment);\r\n        btnAddComment = findViewById(R.id.post_detail_add_comment_btn);\r\n        btnDeletePost = findViewById(R.id.button_delete);\r\n\r\n\r\n        firebaseAuth = FirebaseAuth.getInstance();\r\n        firebaseUser = firebaseAuth.getCurrentUser();\r\n        firebaseDatabase = FirebaseDatabase.getInstance();\r\n        // add post delete button\r\n        mDatabase= FirebaseDatabase.getInstance().getReference();\r\n\r\n        myUid = FirebaseAuth.getInstance().getCurrentUser().getUid();\r\n\r\n        btnDeletePost.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                //여기 수정 주의 UId.equals(myUid)\r\n                if (true){\r\n                    Toast.makeText(PostDetailActivity.this,&quot;삭제중...&quot;,Toast.LENGTH_SHORT).show();\r\n                    beginDelete();\r\n                    onBackPressed();\r\n                }\r\n                else{\r\n                    Toast.makeText(PostDetailActivity.this,&quot;다른 사용자의 게시글입니다.&quot;,Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n        });\r\n\r\n        // add Comment button click listner\r\n\r\n        btnAddComment.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n\r\n                btnAddComment.setVisibility(View.INVISIBLE);\r\n                DatabaseReference commentReference = firebaseDatabase.getReference(COMMENT_KEY).child(PostKey).push();\r\n                String comment_content = editTextComment.getText().toString();\r\n                String uid = firebaseUser.getUid();\r\n                String uname = firebaseUser.getDisplayName();\r\n                if (firebaseUser.getPhotoUrl()!=null){\r\n                    String uimg = firebaseUser.getPhotoUrl().toString();\r\n                    Comment comment = new Comment(comment_content,uid,uimg,uname);\r\n                    commentReference.setValue(comment).addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            showMessage(&quot;comment added&quot;);\r\n                            editTextComment.setText(&quot;&quot;);\r\n                            btnAddComment.setVisibility(View.VISIBLE);\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n                            showMessage(&quot;fail to add comment : &quot;+e.getMessage());\r\n                        }\r\n                    });\r\n\r\n                }\r\n                else{\r\n                    String usphoto =Integer.toString(R.drawable.userphoto);\r\n                    Comment comment = new Comment(comment_content,uid,usphoto,uname);\r\n                    commentReference.setValue(comment).addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            showMessage(&quot;comment added&quot;);\r\n                            editTextComment.setText(&quot;&quot;);\r\n                            btnAddComment.setVisibility(View.VISIBLE);\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n                            showMessage(&quot;fail to add comment : &quot;+e.getMessage());\r\n                        }\r\n                    });\r\n                }\r\n\r\n\r\n\r\n\r\n            }\r\n        });\r\n\r\n\r\n        // now we need to bind all data into those views\r\n        // firt we need to get post data\r\n        // we need to send post detail data to this activity first ...\r\n        // now we can get post data\r\n\r\n\r\n\r\n        // 게시글 사진 백지 케이스\r\n        postImage = getIntent().getExtras().getString(&quot;postImage&quot;) ;\r\n        if(postImage!=null){\r\n            Glide.with(this).load(postImage).into(imgPost);\r\n        }\r\n        else{\r\n            Glide.with(this).load(R.drawable.whitepaper).into(imgPost);\r\n        }\r\n\r\n\r\n        String postTitle = getIntent().getExtras().getString(&quot;title&quot;);\r\n        txtPostTitle.setText(postTitle);\r\n\r\n        String userpostImage = getIntent().getExtras().getString(&quot;userPhoto&quot;);\r\n        if (userpostImage!=null){\r\n            Glide.with(this).load(userpostImage).into(imgUserPost);\r\n        }\r\n        else {\r\n            Glide.with(this).load(R.drawable.userphoto).into(imgUserPost);\r\n        }\r\n\r\n        String postDescription = getIntent().getExtras().getString(&quot;description&quot;);\r\n        txtPostDesc.setText(postDescription);\r\n\r\n        // set comment user image\r\n        if (firebaseUser.getPhotoUrl()!=null){\r\n            Glide.with(this).load(firebaseUser.getPhotoUrl()).into(imgCurrentUser);\r\n        }\r\n        else{\r\n            Glide.with(this).load(R.drawable.userphoto).into(imgCurrentUser);\r\n        }\r\n        // get post key\r\n        PostKey = getIntent().getExtras().getString(&quot;postKey&quot;);\r\n\r\n        String date = timestampToString(getIntent().getExtras().getLong(&quot;postDate&quot;));\r\n        txtPostDateName.setText(date);\r\n        // get post uid\r\n        UId = getIntent().getExtras().getString(&quot;userId&quot;);\r\n\r\n\r\n\r\n        // ini Recyclerview Comment\r\n        iniRvComment();\r\n\r\n\r\n    }\r\n\r\n    private void beginDelete() {\r\n\r\n        StorageReference picRef = FirebaseStorage.getInstance().getReferenceFromUrl(postImage);\r\n        picRef.delete()\r\n                .addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\r\n                    @Override\r\n                    public void onSuccess(Void aVoid) {\r\n                        //image deleted, now delete database\r\n                        Query fquery =FirebaseDatabase.getInstance().getReference(&quot;Posts&quot;).orderByChild(&quot;timeStamp&quot;).equalTo(&quot;1615602220595&quot;);\r\n                        fquery.addListenerForSingleValueEvent(new ValueEventListener() {\r\n                            @Override\r\n                            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                                for (DataSnapshot ds:dataSnapshot.getChildren()){\r\n                                    ds.getRef().removeValue(); // remove values from firebase where postkey matches\r\n                                }\r\n                                //Deleted\r\n                                Toast.makeText(PostDetailActivity.this,&quot;게시글이 삭제되었습니다.&quot;,Toast.LENGTH_SHORT).show();\r\n                            }\r\n\r\n                            @Override\r\n                            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                })\r\n                .addOnFailureListener(new OnFailureListener() {\r\n                    @Override\r\n                    public void onFailure(@NonNull Exception e) {\r\n                        //failed, can&#39;t go further\r\n                        Toast.makeText(PostDetailActivity.this,&quot;&quot;+e.getMessage(),Toast.LENGTH_SHORT).show();\r\n                    }\r\n                });\r\n\r\n    }\r\n\r\n    public void linearOnClick(View v) {\r\n        imm.hideSoftInputFromWindow(et.getWindowToken(), 0);\r\n    }\r\n\r\n\r\n    private void iniRvComment() {\r\n\r\n        RvComment.setLayoutManager(new LinearLayoutManager(this));\r\n\r\n        DatabaseReference commentRef = firebaseDatabase.getReference(COMMENT_KEY).child(PostKey);\r\n        commentRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                listComment = new ArrayList&lt;&gt;();\r\n                for (DataSnapshot snap:dataSnapshot.getChildren()) {\r\n\r\n                    Comment comment = snap.getValue(Comment.class);\r\n                    listComment.add(comment) ;\r\n\r\n                }\r\n\r\n                commentAdapter = new CommentAdapter(getApplicationContext(),listComment);\r\n                RvComment.setAdapter(commentAdapter);\r\n\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n            }\r\n        });\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n    private void showMessage(String message) {\r\n\r\n        Toast.makeText(this,message,Toast.LENGTH_LONG).show();\r\n\r\n    }\r\n\r\n\r\n    private String timestampToString(long time) {\r\n\r\n        Calendar calendar = Calendar.getInstance(Locale.ENGLISH);\r\n        calendar.setTimeInMillis(time);\r\n        String date = DateFormat.format(&quot;yyyy-MM-dd&quot;,calendar).toString();\r\n        return date;\r\n\r\n\r\n    }\r\n\r\n\r\n}","title":"in firebase realtime database delete post by timestamp","body":"<p><a href=\"https://i.stack.imgur.com/gp4gv.png\" rel=\"nofollow noreferrer\">It is my Realtime Database data</a></p>\n<pre><code> &quot;Posts&quot; : {\n&quot;-MCCtOfEcs-t8OhKAj_R&quot; : {\n  &quot;description&quot; : &quot;&quot;,\n  &quot;picture&quot; : &quot;https://firebasestorage.googleapis.com/v0/b/instagram-c0686.appspot.com/o/blog_images%2Fimage%3A22222?alt=media&amp;token=eb7ffc1f-f7bd-4ab7-a108-5baf92e3ef47&quot;,\n  &quot;postKey&quot; : &quot;-MCCtOfEcs-t8OhKAj_R&quot;,\n  &quot;timeStamp&quot; : 1594739760019,\n  &quot;title&quot; : &quot;&quot;,\n  &quot;userId&quot; : &quot;1tXK0R5B9uOWyAbzlZMEIs6axHo1&quot;\n},\n&quot;-MCCtPZxoFEChRczT9nY&quot; : {\n  &quot;description&quot; : &quot;&quot;,\n  &quot;picture&quot; : &quot;https://firebasestorage.googleapis.com/v0/b/instagram-c0686.appspot.com/o/blog_images%2Fimage%3A22222?alt=media&amp;token=c92b64ff-c2f6-4076-949a-b176253f0497&quot;,\n  &quot;postKey&quot; : &quot;-MCCtPZxoFEChRczT9nY&quot;,\n  &quot;timeStamp&quot; : 1594739763718,\n  &quot;title&quot; : &quot;&quot;,\n  &quot;userId&quot; : &quot;1tXK0R5B9uOWyAbzlZMEIs6axHo1&quot;\n},\n</code></pre>\n<p>I want to delete a post by using the equalTo timeStamp variable. So I make a code.</p>\n<pre><code>Query fquery =FirebaseDatabase.getInstance().getReference(&quot;Posts&quot;).orderByChild(&quot;timeStamp&quot;).equalTo(&quot;1615602220595&quot;);\n</code></pre>\n<p>But I don't know why not working.. when I do this</p>\n<pre><code>Query fquery =FirebaseDatabase.getInstance().getReference(&quot;Posts&quot;).orderByChild(&quot;postKey&quot;).equalTo(&quot;-MCCtOfEcs-t8OhKAj_R&quot;);\n</code></pre>\n<p>It's worked.</p>\n<p>Here is full code.</p>\n<pre><code>public class PostDetailActivity extends AppCompatActivity {\n\nImageView imgPost,imgUserPost,imgCurrentUser;\nTextView txtPostDesc,txtPostDateName,txtPostTitle;\nEditText editTextComment;\nButton btnAddComment;\nString PostKey;\nFirebaseAuth firebaseAuth;\nFirebaseUser firebaseUser;\nFirebaseDatabase firebaseDatabase;\nRecyclerView RvComment;\nCommentAdapter commentAdapter;\nList&lt;Comment&gt; listComment;\nstatic String COMMENT_KEY = &quot;Comment&quot;;\nInputMethodManager imm;\nEditText et;\nButton btnDeletePost;\nString myUid;\nString UId;\nString postImage;\nprivate DatabaseReference mDatabase;\n\n\n\n\n\n\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_post_detail);\n    imm = (InputMethodManager)getSystemService(INPUT_METHOD_SERVICE);\n    et = (EditText)findViewById(R.id.post_detail_comment);\n\n\n\n    // let's set the statue bar to transparent\n\n\n    // ini Views\n    RvComment = findViewById(R.id.rv_comment);\n    imgPost =findViewById(R.id.post_detail_img);\n    imgUserPost = findViewById(R.id.post_detail_user_img);\n    imgCurrentUser = findViewById(R.id.post_detail_currentuser_img);\n\n    txtPostTitle = findViewById(R.id.post_detail_title);\n    txtPostDesc = findViewById(R.id.post_detail_desc);\n    txtPostDateName = findViewById(R.id.post_detail_date_name);\n\n    editTextComment = findViewById(R.id.post_detail_comment);\n    btnAddComment = findViewById(R.id.post_detail_add_comment_btn);\n    btnDeletePost = findViewById(R.id.button_delete);\n\n\n    firebaseAuth = FirebaseAuth.getInstance();\n    firebaseUser = firebaseAuth.getCurrentUser();\n    firebaseDatabase = FirebaseDatabase.getInstance();\n    // add post delete button\n    mDatabase= FirebaseDatabase.getInstance().getReference();\n\n    myUid = FirebaseAuth.getInstance().getCurrentUser().getUid();\n\n    btnDeletePost.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            //여기 수정 주의 UId.equals(myUid)\n            if (true){\n                Toast.makeText(PostDetailActivity.this,&quot;삭제중...&quot;,Toast.LENGTH_SHORT).show();\n                beginDelete();\n                onBackPressed();\n            }\n            else{\n                Toast.makeText(PostDetailActivity.this,&quot;다른 사용자의 게시글입니다.&quot;,Toast.LENGTH_SHORT).show();\n            }\n        }\n    });\n\n    // add Comment button click listner\n\n    btnAddComment.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n\n            btnAddComment.setVisibility(View.INVISIBLE);\n            DatabaseReference commentReference = firebaseDatabase.getReference(COMMENT_KEY).child(PostKey).push();\n            String comment_content = editTextComment.getText().toString();\n            String uid = firebaseUser.getUid();\n            String uname = firebaseUser.getDisplayName();\n            if (firebaseUser.getPhotoUrl()!=null){\n                String uimg = firebaseUser.getPhotoUrl().toString();\n                Comment comment = new Comment(comment_content,uid,uimg,uname);\n                commentReference.setValue(comment).addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\n                    @Override\n                    public void onSuccess(Void aVoid) {\n                        showMessage(&quot;comment added&quot;);\n                        editTextComment.setText(&quot;&quot;);\n                        btnAddComment.setVisibility(View.VISIBLE);\n                    }\n                }).addOnFailureListener(new OnFailureListener() {\n                    @Override\n                    public void onFailure(@NonNull Exception e) {\n                        showMessage(&quot;fail to add comment : &quot;+e.getMessage());\n                    }\n                });\n\n            }\n            else{\n                String usphoto =Integer.toString(R.drawable.userphoto);\n                Comment comment = new Comment(comment_content,uid,usphoto,uname);\n                commentReference.setValue(comment).addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\n                    @Override\n                    public void onSuccess(Void aVoid) {\n                        showMessage(&quot;comment added&quot;);\n                        editTextComment.setText(&quot;&quot;);\n                        btnAddComment.setVisibility(View.VISIBLE);\n                    }\n                }).addOnFailureListener(new OnFailureListener() {\n                    @Override\n                    public void onFailure(@NonNull Exception e) {\n                        showMessage(&quot;fail to add comment : &quot;+e.getMessage());\n                    }\n                });\n            }\n\n\n\n\n        }\n    });\n\n\n    // now we need to bind all data into those views\n    // firt we need to get post data\n    // we need to send post detail data to this activity first ...\n    // now we can get post data\n\n\n\n    // 게시글 사진 백지 케이스\n    postImage = getIntent().getExtras().getString(&quot;postImage&quot;) ;\n    if(postImage!=null){\n        Glide.with(this).load(postImage).into(imgPost);\n    }\n    else{\n        Glide.with(this).load(R.drawable.whitepaper).into(imgPost);\n    }\n\n\n    String postTitle = getIntent().getExtras().getString(&quot;title&quot;);\n    txtPostTitle.setText(postTitle);\n\n    String userpostImage = getIntent().getExtras().getString(&quot;userPhoto&quot;);\n    if (userpostImage!=null){\n        Glide.with(this).load(userpostImage).into(imgUserPost);\n    }\n    else {\n        Glide.with(this).load(R.drawable.userphoto).into(imgUserPost);\n    }\n\n    String postDescription = getIntent().getExtras().getString(&quot;description&quot;);\n    txtPostDesc.setText(postDescription);\n\n    // set comment user image\n    if (firebaseUser.getPhotoUrl()!=null){\n        Glide.with(this).load(firebaseUser.getPhotoUrl()).into(imgCurrentUser);\n    }\n    else{\n        Glide.with(this).load(R.drawable.userphoto).into(imgCurrentUser);\n    }\n    // get post key\n    PostKey = getIntent().getExtras().getString(&quot;postKey&quot;);\n\n    String date = timestampToString(getIntent().getExtras().getLong(&quot;postDate&quot;));\n    txtPostDateName.setText(date);\n    // get post uid\n    UId = getIntent().getExtras().getString(&quot;userId&quot;);\n\n\n\n    // ini Recyclerview Comment\n    iniRvComment();\n\n\n}\n\nprivate void beginDelete() {\n\n    StorageReference picRef = FirebaseStorage.getInstance().getReferenceFromUrl(postImage);\n    picRef.delete()\n            .addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\n                @Override\n                public void onSuccess(Void aVoid) {\n                    //image deleted, now delete database\n                    Query fquery =FirebaseDatabase.getInstance().getReference(&quot;Posts&quot;).orderByChild(&quot;timeStamp&quot;).equalTo(&quot;1615602220595&quot;);\n                    fquery.addListenerForSingleValueEvent(new ValueEventListener() {\n                        @Override\n                        public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n                            for (DataSnapshot ds:dataSnapshot.getChildren()){\n                                ds.getRef().removeValue(); // remove values from firebase where postkey matches\n                            }\n                            //Deleted\n                            Toast.makeText(PostDetailActivity.this,&quot;게시글이 삭제되었습니다.&quot;,Toast.LENGTH_SHORT).show();\n                        }\n\n                        @Override\n                        public void onCancelled(@NonNull DatabaseError databaseError) {\n\n                        }\n                    });\n\n                }\n            })\n            .addOnFailureListener(new OnFailureListener() {\n                @Override\n                public void onFailure(@NonNull Exception e) {\n                    //failed, can't go further\n                    Toast.makeText(PostDetailActivity.this,&quot;&quot;+e.getMessage(),Toast.LENGTH_SHORT).show();\n                }\n            });\n\n}\n\npublic void linearOnClick(View v) {\n    imm.hideSoftInputFromWindow(et.getWindowToken(), 0);\n}\n\n\nprivate void iniRvComment() {\n\n    RvComment.setLayoutManager(new LinearLayoutManager(this));\n\n    DatabaseReference commentRef = firebaseDatabase.getReference(COMMENT_KEY).child(PostKey);\n    commentRef.addValueEventListener(new ValueEventListener() {\n        @Override\n        public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n            listComment = new ArrayList&lt;&gt;();\n            for (DataSnapshot snap:dataSnapshot.getChildren()) {\n\n                Comment comment = snap.getValue(Comment.class);\n                listComment.add(comment) ;\n\n            }\n\n            commentAdapter = new CommentAdapter(getApplicationContext(),listComment);\n            RvComment.setAdapter(commentAdapter);\n\n\n        }\n\n        @Override\n        public void onCancelled(@NonNull DatabaseError databaseError) {\n\n        }\n    });\n\n\n\n\n}\n\nprivate void showMessage(String message) {\n\n    Toast.makeText(this,message,Toast.LENGTH_LONG).show();\n\n}\n\n\nprivate String timestampToString(long time) {\n\n    Calendar calendar = Calendar.getInstance(Locale.ENGLISH);\n    calendar.setTimeInMillis(time);\n    String date = DateFormat.format(&quot;yyyy-MM-dd&quot;,calendar).toString();\n    return date;\n\n\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","debugging","intellij-idea","remote-debugging"],"comments":[{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1635504047,"post_id":69767377,"comment_id":123321976,"body_markdown":"How do you start on server-side the application to which you want to connect?","body":"How do you start on server-side the application to which you want to connect?"},{"owner":{"account_id":10806367,"reputation":59,"user_id":8483171,"display_name":"java-dev-ua"},"score":0,"creation_date":1635505853,"post_id":69767377,"comment_id":123322663,"body_markdown":"@MatteoNNZ Spring Boot application with embedded tomcat server","body":"@MatteoNNZ Spring Boot application with embedded tomcat server"},{"owner":{"account_id":10806367,"reputation":59,"user_id":8483171,"display_name":"java-dev-ua"},"score":0,"creation_date":1635505913,"post_id":69767377,"comment_id":123322686,"body_markdown":"@MatteoNNZ via command `java -jar bla.jar`","body":"@MatteoNNZ via command <code>java -jar bla.jar</code>"},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":1,"creation_date":1635505939,"post_id":69767377,"comment_id":123322691,"body_markdown":"IntelliJ shows you arguments for the JVM (`-agentlib:jdwp`...)... have you added them when starting the program (before you click on connect from IntelliJ)?","body":"IntelliJ shows you arguments for the JVM (<code>-agentlib:jdwp</code>...)... have you added them when starting the program (before you click on connect from IntelliJ)?"},{"owner":{"account_id":10806367,"reputation":59,"user_id":8483171,"display_name":"java-dev-ua"},"score":0,"creation_date":1635506039,"post_id":69767377,"comment_id":123322722,"body_markdown":"@MatteoNNZ nope, how I can do that? just type something like `java -jar bla.jar -agentlib...` ?","body":"@MatteoNNZ nope, how I can do that? just type something like <code>java -jar bla.jar -agentlib...</code> ?"},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1635508576,"post_id":69767377,"comment_id":123323592,"body_markdown":"Yes, simply `java -agentlib:... -jar bla.jar` (put it right after `java`). Once started, you should be able to connect remotely.","body":"Yes, simply <code>java -agentlib:... -jar bla.jar</code> (put it right after <code>java</code>). Once started, you should be able to connect remotely."},{"owner":{"account_id":10806367,"reputation":59,"user_id":8483171,"display_name":"java-dev-ua"},"score":0,"creation_date":1635510581,"post_id":69767377,"comment_id":123324358,"body_markdown":"@MatteoNNZ nope :( still have a problem `Unable to open debugger port (host:5005): java.net.ConnectException &quot;Connection timed out: connect&quot;`","body":"@MatteoNNZ nope :( still have a problem <code>Unable to open debugger port (host:5005): java.net.ConnectException &quot;Connection timed out: connect&quot;</code>"},{"owner":{"account_id":10806367,"reputation":59,"user_id":8483171,"display_name":"java-dev-ua"},"score":0,"creation_date":1635510656,"post_id":69767377,"comment_id":123324393,"body_markdown":"and I see the message after starting jar `Listening for transport dt_socket at address: 8000` (on the remote server).","body":"and I see the message after starting jar <code>Listening for transport dt_socket at address: 8000</code> (on the remote server)."},{"owner":{"account_id":10806367,"reputation":59,"user_id":8483171,"display_name":"java-dev-ua"},"score":0,"creation_date":1635511674,"post_id":69767377,"comment_id":123324795,"body_markdown":"@MatteoNNZ server protected with ssh private key. That&#39;s could be as a reason?","body":"@MatteoNNZ server protected with ssh private key. That&#39;s could be as a reason?"},{"owner":{"account_id":10806367,"reputation":59,"user_id":8483171,"display_name":"java-dev-ua"},"score":0,"creation_date":1635514907,"post_id":69767377,"comment_id":123326290,"body_markdown":"oh, I see that firewall blocking possibility to debug.","body":"oh, I see that firewall blocking possibility to debug."},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1635591594,"post_id":69767377,"comment_id":123342867,"body_markdown":"You&#39;re not launching the right configuration. Your argument says port 8000, but you try to connect on port 5005.","body":"You&#39;re not launching the right configuration. Your argument says port 8000, but you try to connect on port 5005."}],"answers":[{"tags":[],"owner":{"account_id":2273465,"reputation":15439,"user_id":2000323,"display_name":"Andrey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635755840,"creation_date":1635755840,"answer_id":69794424,"question_id":69767377,"body_markdown":"You need to start the JVM on a remote host with the command line IDE shows you. And make sure the `port` and `host` that are specified in this command is accessible from the host where IDE is running.","title":"Remote debugging via IntellijIdea","body":"<p>You need to start the JVM on a remote host with the command line IDE shows you. And make sure the <code>port</code> and <code>host</code> that are specified in this command is accessible from the host where IDE is running.</p>\n"}],"owner":{"account_id":10806367,"reputation":59,"user_id":8483171,"display_name":"java-dev-ua"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1635755840,"creation_date":1635503405,"question_id":69767377,"body_markdown":"I want to configure debugging flow for the application that is placed on a dedicated Linux server. I can connect to the server via SSH for now(with private key protection). F.E. `ssh -i private_key.txt user@host`. But I can&#39;t create a connection to the server via Intellij Idea to debug remotely(sample on the picture).\r\nQ: do I need to add some properties to the java application. Or I need to build a connection in a different way.\r\n\r\n[![remote debug config][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/F7cci.png","title":"Remote debugging via IntellijIdea","body":"<p>I want to configure debugging flow for the application that is placed on a dedicated Linux server. I can connect to the server via SSH for now(with private key protection). F.E. <code>ssh -i private_key.txt user@host</code>. But I can't create a connection to the server via Intellij Idea to debug remotely(sample on the picture).\nQ: do I need to add some properties to the java application. Or I need to build a connection in a different way.</p>\n<p><a href=\"https://i.stack.imgur.com/F7cci.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/F7cci.png\" alt=\"remote debug config\" /></a></p>\n"},{"tags":["java","kotlin","intellij-idea","rgb","bufferedimage"],"comments":[{"owner":{"account_id":14334032,"reputation":1310,"user_id":10354066,"display_name":"vytaute"},"score":0,"creation_date":1635755395,"post_id":69794203,"comment_id":123369539,"body_markdown":"But how do I convert Color type to int then? For example Color(255, 0, 0)?","body":"But how do I convert Color type to int then? For example Color(255, 0, 0)?"},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":1,"creation_date":1635755464,"post_id":69794203,"comment_id":123369559,"body_markdown":"I posted an answer below.","body":"I posted an answer below."},{"owner":{"account_id":14334032,"reputation":1310,"user_id":10354066,"display_name":"vytaute"},"score":0,"creation_date":1635755577,"post_id":69794203,"comment_id":123369586,"body_markdown":"Yes, thank you. That was the thing I struggled on and started to look for another function constructor. It fixed now. Thank you!","body":"Yes, thank you. That was the thing I struggled on and started to look for another function constructor. It fixed now. Thank you!"}],"answers":[{"tags":[],"owner":{"account_id":5654135,"reputation":3774,"user_id":4473822,"display_name":"Tom"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635755405,"creation_date":1635755405,"answer_id":69794339,"question_id":69794203,"body_markdown":"`setRGB` expect a primitive `int[]`\r\n\r\nIn kotlin the java equivalent of `int[]` is `IntArray` (https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int-array/)\r\n\r\nSo you should change the creation of `val newColor` to:\r\n```kotlin\r\nval newColor = intArrayOf(color.red, 0, 0)\r\n```\r\n\r\nFull example:\r\n```kotlin\r\nval c: Int = bufferedImage.getRGB(x, y)\r\nval color = Color(c)\r\n\r\nval newColor = intArrayOf(color.red, 0, 0)\r\nbufferedImage.setRGB(x, y, 0, 0, newColor, 0, 0)\r\n```\r\n\r\nFor more info regarding the function you can refer to the javadoc: https://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html#setRGB(int,%20int,%20int,%20int,%20int[],%20int,%20int)","title":"Using setRGB() required IntArray in Kotlin","body":"<p><code>setRGB</code> expect a primitive <code>int[]</code></p>\n<p>In kotlin the java equivalent of <code>int[]</code> is <code>IntArray</code> (<a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int-array/\" rel=\"nofollow noreferrer\">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int-array/</a>)</p>\n<p>So you should change the creation of <code>val newColor</code> to:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val newColor = intArrayOf(color.red, 0, 0)\n</code></pre>\n<p>Full example:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val c: Int = bufferedImage.getRGB(x, y)\nval color = Color(c)\n\nval newColor = intArrayOf(color.red, 0, 0)\nbufferedImage.setRGB(x, y, 0, 0, newColor, 0, 0)\n</code></pre>\n<p>For more info regarding the function you can refer to the javadoc: <a href=\"https://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html#setRGB(int,%20int,%20int,%20int,%20int%5B%5D,%20int,%20int)\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html#setRGB(int,%20int,%20int,%20int,%20int[],%20int,%20int)</a></p>\n"},{"tags":[],"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1635755807,"creation_date":1635755412,"answer_id":69794343,"question_id":69794203,"body_markdown":"If you are only changing one pixel (at a time), you should use the `setRGB(int x, int y, int aRGB)` method. Don&#39;t bother with arrays at all.\r\n\r\nI don&#39;t normally program Kotlin, so the syntax may not be 100% correct, but anyway:\r\n\r\n    val c: Int = bufferedImage.getRGB(x, y)\r\n    val color = Color(c)\r\n\r\n    val newColor = Color(color.red, 0, 0)\r\n    bufferedImage.setRGB(x, y, newColor.getRGB())\r\n\r\n\r\n--- \r\n\r\nThat said, the `width` and `height` parameters of the `setRGB` method that takes an `int` array, is the height and with of the region you want to set (and usually `offset == 0` and `scansize == width`) . You typically use this only to set multiple pixels. To set a single pixel using it, the values should be simply `1, 1` (I borrowed the `intArrayOf` part from @Tom&#39;s answer):\r\n\r\n    val newColor = intArrayOf(color.red, 0, 0)\r\n    bufferedImage.setRGB(x, y, 1, 1, newColor, 0, 1)\r\n\r\nThis should also work. But I think it&#39;s less elegant and probably slower due to array bounds checking and copying. ","title":"Using setRGB() required IntArray in Kotlin","body":"<p>If you are only changing one pixel (at a time), you should use the <code>setRGB(int x, int y, int aRGB)</code> method. Don't bother with arrays at all.</p>\n<p>I don't normally program Kotlin, so the syntax may not be 100% correct, but anyway:</p>\n<pre><code>val c: Int = bufferedImage.getRGB(x, y)\nval color = Color(c)\n\nval newColor = Color(color.red, 0, 0)\nbufferedImage.setRGB(x, y, newColor.getRGB())\n</code></pre>\n<hr />\n<p>That said, the <code>width</code> and <code>height</code> parameters of the <code>setRGB</code> method that takes an <code>int</code> array, is the height and with of the region you want to set (and usually <code>offset == 0</code> and <code>scansize == width</code>) . You typically use this only to set multiple pixels. To set a single pixel using it, the values should be simply <code>1, 1</code> (I borrowed the <code>intArrayOf</code> part from @Tom's answer):</p>\n<pre><code>val newColor = intArrayOf(color.red, 0, 0)\nbufferedImage.setRGB(x, y, 1, 1, newColor, 0, 1)\n</code></pre>\n<p>This should also work. But I think it's less elegant and probably slower due to array bounds checking and copying.</p>\n"}],"owner":{"account_id":14334032,"reputation":1310,"user_id":10354066,"display_name":"vytaute"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":199,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69794343,"answer_count":2,"score":0,"last_activity_date":1635755807,"creation_date":1635754503,"question_id":69794203,"body_markdown":"I want to change color of a pixel in Kotlin. I get a pixel, want to set new values for it but I get an error in setRGB method that it requires IntArray! but found Array&lt;Int&gt;:\r\n\r\n    val c: Int = bufferedImage.getRGB(x, y)\r\n    val color = Color(c)\r\n    \r\n    val newColor = Array&lt;Int&gt;(3) { color.red; 0; 0 }\r\n    bufferedImage.setRGB(x, y, 0, 0, newColor, 0, 0)\r\n\r\nAlso, I am writing code in Kotlin/Java and cannot find detailed explanation how does setRGB() method work. I know from Intelij IDE that parameters are: setRGB(x, y, width, height, IntArray for rgb color, offset, scansize).\r\n\r\nBut what is width, height? Is it dimensions of a picture? Why do they matter if I only change one pixel? \r\n\r\nAnd how do I pass new color to setRGB() method correctly as IntArray?\r\n","title":"Using setRGB() required IntArray in Kotlin","body":"<p>I want to change color of a pixel in Kotlin. I get a pixel, want to set new values for it but I get an error in setRGB method that it requires IntArray! but found Array:</p>\n<pre><code>val c: Int = bufferedImage.getRGB(x, y)\nval color = Color(c)\n\nval newColor = Array&lt;Int&gt;(3) { color.red; 0; 0 }\nbufferedImage.setRGB(x, y, 0, 0, newColor, 0, 0)\n</code></pre>\n<p>Also, I am writing code in Kotlin/Java and cannot find detailed explanation how does setRGB() method work. I know from Intelij IDE that parameters are: setRGB(x, y, width, height, IntArray for rgb color, offset, scansize).</p>\n<p>But what is width, height? Is it dimensions of a picture? Why do they matter if I only change one pixel?</p>\n<p>And how do I pass new color to setRGB() method correctly as IntArray?</p>\n"},{"tags":["java","architecture","jakarta-ee","workflow","rule-engine"],"answers":[{"tags":[],"owner":{"account_id":7450,"reputation":269210,"user_id":12960,"display_name":"Brian Agnew"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1235474853,"creation_date":1235474853,"answer_id":581419,"question_id":581212,"body_markdown":"Why do you regard Javaspaces as dead, beyond the fact that the Jini 2.1 release was some time ago (October 2005) ? Having used that, I&#39;d suggest that it indicates a mature and complete technology set rather than something abandoned and defunct.\r\n\r\nFor another implementation of Javaspaces, take a look at [Blitz Javaspaces][1]. That&#39;s maintained and enhanced more regularly (latest release July 2008) and offers a more performant and manageable Javaspace implementation than the default `outrigger` supplied by Sun.\r\n\r\n\r\n  [1]: http://www.dancres.org/blitz/index.html","title":"Space-based architecture?","body":"<p>Why do you regard Javaspaces as dead, beyond the fact that the Jini 2.1 release was some time ago (October 2005) ? Having used that, I'd suggest that it indicates a mature and complete technology set rather than something abandoned and defunct.</p>\n\n<p>For another implementation of Javaspaces, take a look at <a href=\"http://www.dancres.org/blitz/index.html\" rel=\"nofollow noreferrer\">Blitz Javaspaces</a>. That's maintained and enhanced more regularly (latest release July 2008) and offers a more performant and manageable Javaspace implementation than the default <code>outrigger</code> supplied by Sun.</p>\n"},{"tags":[],"owner":{"account_id":17503,"reputation":18878,"user_id":39242,"accept_rate":71,"display_name":"Joshua Fox"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1235572789,"creation_date":1235572789,"answer_id":586219,"question_id":581212,"body_markdown":"Gigaspaces is a successful commercial implementation of JavaSpaces -- so, I wouldn&#39;t say JavaSpaces is dead.\r\n\r\nYou might take a look at [Java Shared Data Toolkit][1] ([also this article][2]) to see if it meets your requirements.\r\n\r\n\r\n  [1]: http://java.sun.com/products/java-media/jsdt/\r\n  [2]: http://www.ddj.com/184403999","title":"Space-based architecture?","body":"<p>Gigaspaces is a successful commercial implementation of JavaSpaces -- so, I wouldn't say JavaSpaces is dead.</p>\n\n<p>You might take a look at <a href=\"http://java.sun.com/products/java-media/jsdt/\" rel=\"nofollow noreferrer\">Java Shared Data Toolkit</a> (<a href=\"http://www.ddj.com/184403999\" rel=\"nofollow noreferrer\">also this article</a>) to see if it meets your requirements.</p>\n"},{"tags":[],"owner":{"account_id":1925798,"reputation":1207,"user_id":1736287,"display_name":"cpurdy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1392407149,"creation_date":1392407149,"answer_id":21788256,"question_id":581212,"body_markdown":"While it doesn&#39;t support the JavaSpaces API, I&#39;d suggest looking at Oracle Coherence for a distributed and reliable &quot;live&quot; data store that can drive event-based workflow. Deutsche Bank, for example, successfully replaced a &quot;SBA&quot; (Space Based Architecture) with an event-driven system built on Coherence for their FX trading, because of both reliability and performance issues.\r\n\r\n*For the sake of full disclosure, I work at Oracle. The opinions and views expressed in this post are my own, and do not necessarily reflect the opinions or views of my employer.*","title":"Space-based architecture?","body":"<p>While it doesn't support the JavaSpaces API, I'd suggest looking at Oracle Coherence for a distributed and reliable \"live\" data store that can drive event-based workflow. Deutsche Bank, for example, successfully replaced a \"SBA\" (Space Based Architecture) with an event-driven system built on Coherence for their FX trading, because of both reliability and performance issues.</p>\n\n<p><em>For the sake of full disclosure, I work at Oracle. The opinions and views expressed in this post are my own, and do not necessarily reflect the opinions or views of my employer.</em></p>\n"},{"tags":[],"owner":{"account_id":23138293,"reputation":11,"user_id":17286691,"display_name":"geetha geetha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635755726,"creation_date":1635755726,"answer_id":69794400,"question_id":581212,"body_markdown":"Space-based architecture is a distributed-computing architecture for achieving linear scalability of stateful, high-performance applications using the tuple space paradigm With a space-based architecture, applications are built out of a set of self-sufficient units, known as processing-units.\r\nEx: Gigaspaces \r\nhere I attached the reference for gigaspaces.\r\nhttps://docs.gigaspaces.com/latest/overview/space-based-architecture.html","title":"Space-based architecture?","body":"<p>Space-based architecture is a distributed-computing architecture for achieving linear scalability of stateful, high-performance applications using the tuple space paradigm With a space-based architecture, applications are built out of a set of self-sufficient units, known as processing-units.\nEx: Gigaspaces\nhere I attached the reference for gigaspaces.\n<a href=\"https://docs.gigaspaces.com/latest/overview/space-based-architecture.html\" rel=\"nofollow noreferrer\">https://docs.gigaspaces.com/latest/overview/space-based-architecture.html</a></p>\n"}],"owner":{"account_id":26862,"reputation":6868,"user_id":70288,"accept_rate":91,"display_name":"Robert Campbell"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2859,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"answer_count":4,"score":15,"last_activity_date":1635755726,"creation_date":1235470671,"question_id":581212,"body_markdown":"One chapter in Pragmatic Programmer recommends looking at a blackboard/space-based architecture + a rules engine as a more flexible alternative to a traditional workflow system.\r\n\r\nThe project I&#39;m working on currently uses a workflow engine, but I&#39;d like to evaluate alternatives. I really feel like a SBA would be a better solution to our business problems, but I&#39;m worried about a total lack of community support/user base/venders/options.\r\n\r\nJavaSpaces is dead, and the JINI spin-off Apache River seems to be on life support. SemiSpace looks perfect, but it&#39;s a one-man show. The only viable solution seems to be GigaSpaces.\r\n\r\nI&#39;d like to hear your thoughts on space based architecture and any experiences you&#39;ve had with real world implementations.","title":"Space-based architecture?","body":"<p>One chapter in Pragmatic Programmer recommends looking at a blackboard/space-based architecture + a rules engine as a more flexible alternative to a traditional workflow system.</p>\n\n<p>The project I'm working on currently uses a workflow engine, but I'd like to evaluate alternatives. I really feel like a SBA would be a better solution to our business problems, but I'm worried about a total lack of community support/user base/venders/options.</p>\n\n<p>JavaSpaces is dead, and the JINI spin-off Apache River seems to be on life support. SemiSpace looks perfect, but it's a one-man show. The only viable solution seems to be GigaSpaces.</p>\n\n<p>I'd like to hear your thoughts on space based architecture and any experiences you've had with real world implementations.</p>\n"},{"tags":["java","amazon-web-services","amazon-dynamodb","aws-sdk"],"comments":[{"owner":{"account_id":3498606,"reputation":5166,"user_id":2925962,"accept_rate":0,"display_name":"akortex"},"score":0,"creation_date":1632493903,"post_id":69316682,"comment_id":122515483,"body_markdown":"Why are you trying to run unit-tests against a real database? I do not think you need to do that unless you need to do some kind of integration testing. If the latter is not your goal, then simply mock the database client and test your code using mocks.","body":"Why are you trying to run unit-tests against a real database? I do not think you need to do that unless you need to do some kind of integration testing. If the latter is not your goal, then simply mock the database client and test your code using mocks."}],"answers":[{"tags":[],"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1632499069,"creation_date":1632494177,"answer_id":69316829,"question_id":69316682,"body_markdown":"I run the UNIT tests from the IntelliJ IDE. I find using the IDE works better then from the command line. Once I setup the [config.properties][1] file that contains the values for the tests and run them, all tests pass -- as shown here: \r\n\r\n[![enter image description here][2]][2]\r\n\r\nIn fact - we test all Java V2 code examples in this manner to ensure they all work.\r\n\r\n\r\nI also tested all DynamoDB examples from the command line using **mvn test** . All passed: \r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n\r\n\r\nAmend your test to build a single instance of the DynamoDB client and then as your first test, make sure it was created successfully. See if this works for you. Once you get this working, add more tests! \r\n\r\n\r\n    public class DynamoDBTest {\r\n    \r\n        private static DynamoDbClient ddb;\r\n    \r\n       \r\n    \r\n        @BeforeAll\r\n        public static void setUp() throws IOException {\r\n    \r\n            // Run tests on Real AWS Resources\r\n            Region region = Region.US_WEST_2;\r\n            ddb = DynamoDbClient.builder().region(region).build();\r\n            try (InputStream input = DynamoDBTest.class.getClassLoader().getResourceAsStream(&quot;config.properties&quot;)) {\r\n    \r\n                Properties prop = new Properties();\r\n    \r\n                if (input == null) {\r\n                    System.out.println(&quot;Sorry, unable to find config.properties&quot;);\r\n                    return;\r\n                }\r\n    \r\n                //load a properties file from class path, inside static method\r\n                prop.load(input);\r\n    \r\n               \r\n    \r\n            } catch (IOException ex) {\r\n                ex.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        @Test\r\n        @Order(1)\r\n        public void whenInitializingAWSService_thenNotNull() {\r\n            assertNotNull(ddb);\r\n            System.out.println(&quot;Test 1 passed&quot;);\r\n        }\r\n\r\n\r\n\r\n  [1]: https://github.com/awsdocs/aws-doc-sdk-examples/tree/master/javav2/example_code/dynamodb\r\n  [2]: https://i.stack.imgur.com/BIgDB.png\r\n  [3]: https://i.stack.imgur.com/D7xUD.png\r\n","title":"Cannot get Junit test to run for dynamodb class","body":"<p>I run the UNIT tests from the IntelliJ IDE. I find using the IDE works better then from the command line. Once I setup the <a href=\"https://github.com/awsdocs/aws-doc-sdk-examples/tree/master/javav2/example_code/dynamodb\" rel=\"nofollow noreferrer\">config.properties</a> file that contains the values for the tests and run them, all tests pass -- as shown here:</p>\n<p><a href=\"https://i.stack.imgur.com/BIgDB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BIgDB.png\" alt=\"enter image description here\" /></a></p>\n<p>In fact - we test all Java V2 code examples in this manner to ensure they all work.</p>\n<p>I also tested all DynamoDB examples from the command line using <strong>mvn test</strong> . All passed:</p>\n<p><a href=\"https://i.stack.imgur.com/D7xUD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/D7xUD.png\" alt=\"enter image description here\" /></a></p>\n<p>Amend your test to build a single instance of the DynamoDB client and then as your first test, make sure it was created successfully. See if this works for you. Once you get this working, add more tests!</p>\n<pre><code>public class DynamoDBTest {\n\n    private static DynamoDbClient ddb;\n\n   \n\n    @BeforeAll\n    public static void setUp() throws IOException {\n\n        // Run tests on Real AWS Resources\n        Region region = Region.US_WEST_2;\n        ddb = DynamoDbClient.builder().region(region).build();\n        try (InputStream input = DynamoDBTest.class.getClassLoader().getResourceAsStream(&quot;config.properties&quot;)) {\n\n            Properties prop = new Properties();\n\n            if (input == null) {\n                System.out.println(&quot;Sorry, unable to find config.properties&quot;);\n                return;\n            }\n\n            //load a properties file from class path, inside static method\n            prop.load(input);\n\n           \n\n        } catch (IOException ex) {\n            ex.printStackTrace();\n        }\n    }\n\n    @Test\n    @Order(1)\n    public void whenInitializingAWSService_thenNotNull() {\n        assertNotNull(ddb);\n        System.out.println(&quot;Test 1 passed&quot;);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15193140,"reputation":621,"user_id":10963322,"display_name":"TheWalkingMalteser"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1632598952,"creation_date":1632598952,"answer_id":69329453,"question_id":69316682,"body_markdown":"Turns out my pom file contained other clients, so had to remove the likes of :\r\n```\r\n       &lt;dependency&gt;\r\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n            &lt;artifactId&gt;s3&lt;/artifactId&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;netty-nio-client&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;apache-client&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n```\r\nand replaced them with :\r\n```\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n        &lt;artifactId&gt;aws-crt-client&lt;/artifactId&gt;\r\n        &lt;version&gt;2.14.13-PREVIEW&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n```\r\nas mentioned in https://aws.amazon.com/blogs/developer/introducing-aws-common-runtime-http-client-in-the-aws-sdk-for-java-2-x/","title":"Cannot get Junit test to run for dynamodb class","body":"<p>Turns out my pom file contained other clients, so had to remove the likes of :</p>\n<pre><code>       &lt;dependency&gt;\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n            &lt;artifactId&gt;s3&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n                    &lt;artifactId&gt;netty-nio-client&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n                    &lt;artifactId&gt;apache-client&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>and replaced them with :</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n        &lt;artifactId&gt;aws-crt-client&lt;/artifactId&gt;\n        &lt;version&gt;2.14.13-PREVIEW&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>as mentioned in <a href=\"https://aws.amazon.com/blogs/developer/introducing-aws-common-runtime-http-client-in-the-aws-sdk-for-java-2-x/\" rel=\"nofollow noreferrer\">https://aws.amazon.com/blogs/developer/introducing-aws-common-runtime-http-client-in-the-aws-sdk-for-java-2-x/</a></p>\n"},{"tags":[],"owner":{"account_id":1682782,"reputation":7143,"user_id":2096986,"accept_rate":37,"display_name":"Felipe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635755474,"creation_date":1635755474,"answer_id":69794358,"question_id":69316682,"body_markdown":"as a complement to the other answers, for me only worked the [option 4 from the reference](https://aws.amazon.com/blogs/developer/introducing-aws-common-runtime-http-client-in-the-aws-sdk-for-java-2-x/).\r\n&gt; Option 4: Change the default HTTP client using a system property in Java code.\r\n\r\nI defined it on the `setUp()` method of my integration test using JUnit 5.\r\n\r\n```\r\n@BeforeAll\r\npublic static void setUp() {\r\n    System.setProperty(\r\n         SdkSystemSetting.SYNC_HTTP_SERVICE_IMPL.property(), \r\n         &quot;software.amazon.awssdk.http.apache.ApacheSdkHttpService&quot;);\r\n}\r\n```\r\nand because I am using gradle:\r\n```\r\n    implementation (&quot;software.amazon.awssdk:s3:${awssdk2Version}&quot;) {\r\n        exclude group: &#39;software.amazon.awssdk&#39;, module: &#39;netty-nio-client&#39;\r\n        exclude group: &#39;software.amazon.awssdk&#39;, module: &#39;apache-client&#39;\r\n    }\r\n    implementation &quot;software.amazon.awssdk:aws-crt-client:2.17.71-PREVIEW&quot;\r\n```","title":"Cannot get Junit test to run for dynamodb class","body":"<p>as a complement to the other answers, for me only worked the <a href=\"https://aws.amazon.com/blogs/developer/introducing-aws-common-runtime-http-client-in-the-aws-sdk-for-java-2-x/\" rel=\"nofollow noreferrer\">option 4 from the reference</a>.</p>\n<blockquote>\n<p>Option 4: Change the default HTTP client using a system property in Java code.</p>\n</blockquote>\n<p>I defined it on the <code>setUp()</code> method of my integration test using JUnit 5.</p>\n<pre><code>@BeforeAll\npublic static void setUp() {\n    System.setProperty(\n         SdkSystemSetting.SYNC_HTTP_SERVICE_IMPL.property(), \n         &quot;software.amazon.awssdk.http.apache.ApacheSdkHttpService&quot;);\n}\n</code></pre>\n<p>and because I am using gradle:</p>\n<pre><code>    implementation (&quot;software.amazon.awssdk:s3:${awssdk2Version}&quot;) {\n        exclude group: 'software.amazon.awssdk', module: 'netty-nio-client'\n        exclude group: 'software.amazon.awssdk', module: 'apache-client'\n    }\n    implementation &quot;software.amazon.awssdk:aws-crt-client:2.17.71-PREVIEW&quot;\n</code></pre>\n"}],"owner":{"account_id":15193140,"reputation":621,"user_id":10963322,"display_name":"TheWalkingMalteser"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3292,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":69329453,"answer_count":3,"score":0,"last_activity_date":1635755474,"creation_date":1632493628,"question_id":69316682,"body_markdown":"I have a class that scans a column from a dynamo db table, whilst using the aws sdk for java(main method taken out for simplicity):\r\n```\r\npublic class fetchCmdbColumn {\r\n    \r\n    public static List&lt;String&gt; CMDB(String tableName, String tableColumn) throws Exception {\r\n\r\n        DynamoDbClient client = DynamoDbClient.builder()\r\n                .region(Region.EU_WEST_1)\r\n                .build();\r\n        List&lt;String&gt; ListValues = new ArrayList&lt;&gt;();\r\n        \r\n        try {\r\n            \r\n            ScanRequest scanRequest = ScanRequest.builder()\r\n                        .tableName(tableName)\r\n                        .build();\r\n            ScanResponse response = client.scan(scanRequest);\r\n\r\n            for (Map&lt;String, AttributeValue&gt; item : response.items()){\r\n                Set&lt;String&gt; keys = item.keySet();\r\n                for (String key : keys) {\r\n                    \r\n                    if (key == tableColumn) {\r\n                        ListValues.add(item.get(key).s()) ;\r\n                    }\r\n                }\r\n            }\r\n            //To check what is being returned, comment out below\r\n           // System.out.println(ListValues);\r\n            \r\n        } catch (DynamoDbException e){\r\n            e.printStackTrace();\r\n            System.exit(1);\r\n        }\r\n        client.close();\r\n        return ListValues;\r\n        \r\n    }\r\n}\r\n```\r\nI also have a junit tests created for that class:\r\n```\r\npublic class fetchCMDBTest {\r\n\r\n\r\n    // Define the data members required for the test\r\n    private static String tableName = &quot;&quot;;\r\n    private static String tableColumn = &quot;&quot;;\r\n\r\n\r\n    @BeforeAll\r\n    public static void setUp() throws IOException {\r\n\r\n        // Run tests on Real AWS Resources\r\n        try (InputStream input = fetchCMDBTest.class.getClassLoader().getResourceAsStream(&quot;config.properties&quot;)) {\r\n\r\n            Properties prop = new Properties();\r\n\r\n            if (input == null) {\r\n                System.out.println(&quot;Sorry, unable to find config.properties&quot;);\r\n                return;\r\n            }\r\n\r\n            //load a properties file from class path, inside static method\r\n            prop.load(input);\r\n\r\n            // Populate the data members required for all tests\r\n            tableName = prop.getProperty(&quot;environment_list&quot;);\r\n            tableColumn = prop.getProperty(&quot;env_name&quot;);\r\n\r\n\r\n        } catch (IOException ex) {\r\n            ex.printStackTrace();\r\n        }\r\n    }\r\n\r\n    @Test\r\n    void fetchCMDBtable() throws Exception{\r\n        try {\r\n            fetchCMDB.CMDB(tableName, tableColumn);\r\n            System.out.println(&quot;Test 1 passed&quot;);\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;Test 1 failed!&quot;);\r\n            e.printStackTrace();\r\n        }\r\n        \r\n    }   \r\n}\r\n```\r\nWhen i run the test using mvn test I get the error:\r\n \r\n```software.amazon.awssdk.core.exception.SdkClientException: Multiple HTTP implementations were found on the classpath ```, \r\n\r\neven though I have only declared the client builder once in the class. \r\n\r\nWhat am i missing?","title":"Cannot get Junit test to run for dynamodb class","body":"<p>I have a class that scans a column from a dynamo db table, whilst using the aws sdk for java(main method taken out for simplicity):</p>\n<pre><code>public class fetchCmdbColumn {\n    \n    public static List&lt;String&gt; CMDB(String tableName, String tableColumn) throws Exception {\n\n        DynamoDbClient client = DynamoDbClient.builder()\n                .region(Region.EU_WEST_1)\n                .build();\n        List&lt;String&gt; ListValues = new ArrayList&lt;&gt;();\n        \n        try {\n            \n            ScanRequest scanRequest = ScanRequest.builder()\n                        .tableName(tableName)\n                        .build();\n            ScanResponse response = client.scan(scanRequest);\n\n            for (Map&lt;String, AttributeValue&gt; item : response.items()){\n                Set&lt;String&gt; keys = item.keySet();\n                for (String key : keys) {\n                    \n                    if (key == tableColumn) {\n                        ListValues.add(item.get(key).s()) ;\n                    }\n                }\n            }\n            //To check what is being returned, comment out below\n           // System.out.println(ListValues);\n            \n        } catch (DynamoDbException e){\n            e.printStackTrace();\n            System.exit(1);\n        }\n        client.close();\n        return ListValues;\n        \n    }\n}\n</code></pre>\n<p>I also have a junit tests created for that class:</p>\n<pre><code>public class fetchCMDBTest {\n\n\n    // Define the data members required for the test\n    private static String tableName = &quot;&quot;;\n    private static String tableColumn = &quot;&quot;;\n\n\n    @BeforeAll\n    public static void setUp() throws IOException {\n\n        // Run tests on Real AWS Resources\n        try (InputStream input = fetchCMDBTest.class.getClassLoader().getResourceAsStream(&quot;config.properties&quot;)) {\n\n            Properties prop = new Properties();\n\n            if (input == null) {\n                System.out.println(&quot;Sorry, unable to find config.properties&quot;);\n                return;\n            }\n\n            //load a properties file from class path, inside static method\n            prop.load(input);\n\n            // Populate the data members required for all tests\n            tableName = prop.getProperty(&quot;environment_list&quot;);\n            tableColumn = prop.getProperty(&quot;env_name&quot;);\n\n\n        } catch (IOException ex) {\n            ex.printStackTrace();\n        }\n    }\n\n    @Test\n    void fetchCMDBtable() throws Exception{\n        try {\n            fetchCMDB.CMDB(tableName, tableColumn);\n            System.out.println(&quot;Test 1 passed&quot;);\n        } catch (Exception e) {\n            System.out.println(&quot;Test 1 failed!&quot;);\n            e.printStackTrace();\n        }\n        \n    }   \n}\n</code></pre>\n<p>When i run the test using mvn test I get the error:</p>\n<p><code>software.amazon.awssdk.core.exception.SdkClientException: Multiple HTTP implementations were found on the classpath </code>,</p>\n<p>even though I have only declared the client builder once in the class.</p>\n<p>What am i missing?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8098,"page":1894,"page_size":100}
