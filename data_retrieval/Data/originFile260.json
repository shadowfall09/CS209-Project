{"items":[{"tags":["java","microservices","keycloak","licensing"],"owner":{"account_id":12875129,"reputation":1,"user_id":9312103,"display_name":"AlexandrGv"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691574582,"creation_date":1691574582,"question_id":76866534,"body_markdown":"How to replace keyclock JpaUserProvider  with your own?\r\n\r\n\r\nHi. It is required to call an external microservice to check the license when adding a user and roles to the keyclock. I need to use my custom provider insteed JpaUserProvider. How to replace it? In what config or smthing else i need to do this?","title":"How to replace keyclock JpaUserProviderprovider with your own","body":"<p>How to replace keyclock JpaUserProvider  with your own?</p>\n<p>Hi. It is required to call an external microservice to check the license when adding a user and roles to the keyclock. I need to use my custom provider insteed JpaUserProvider. How to replace it? In what config or smthing else i need to do this?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":120028,"reputation":35744,"user_id":312172,"accept_rate":86,"display_name":"user unknown"},"score":0,"creation_date":1611432653,"post_id":59923670,"comment_id":116451494,"body_markdown":"Maybe if you remove the &quot;.toString ()&quot;-part of the question, you earn less downvotes. It&#39;s not really related to the otherwise legitimate question, even if it happens, that it only occurs in your code in such context.","body":"Maybe if you remove the &quot;.toString ()&quot;-part of the question, you earn less downvotes. It&#39;s not really related to the otherwise legitimate question, even if it happens, that it only occurs in your code in such context."}],"answers":[{"tags":[],"owner":{"account_id":8860436,"reputation":45945,"user_id":7509065,"display_name":"Joseph Sible-Reinstate Monica"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1580081344,"creation_date":1580081344,"answer_id":59923707,"question_id":59923670,"body_markdown":"From [the documentation][1]:\r\n\r\n&gt; It is rarely appropriate to use this constructor. The static factory [`valueOf(int)`][2] is generally a better choice, as it is likely to yield significantly better space and time performance.\r\n\r\nSo do this:\r\n\r\n    public String toString() {\r\n        return m.get(row) + Integer.valueOf(diagonal).toString();\r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Integer.html#%3Cinit%3E(int)\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Integer.html#valueOf(int)","title":"The constructor Integer(int) is deprecated since version 9","body":"<p>From <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Integer.html#%3Cinit%3E(int)\" rel=\"nofollow noreferrer\">the documentation</a>:</p>\n\n<blockquote>\n  <p>It is rarely appropriate to use this constructor. The static factory <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Integer.html#valueOf(int)\" rel=\"nofollow noreferrer\"><code>valueOf(int)</code></a> is generally a better choice, as it is likely to yield significantly better space and time performance.</p>\n</blockquote>\n\n<p>So do this:</p>\n\n<pre><code>public String toString() {\n    return m.get(row) + Integer.valueOf(diagonal).toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17000499,"reputation":48417,"user_id":12299000,"display_name":"kaya3"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580081595,"creation_date":1580081595,"answer_id":59923728,"question_id":59923670,"body_markdown":"There is no need to create an `Integer` object when what you want to do is convert an `int` to a `String`. The `Integer` class has a `static` method [`toString(int)`][1] for this purpose.\r\n\r\n```java\r\nreturn m.get(row) + Integer.toString(diagonal);\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#toString-int-","title":"The constructor Integer(int) is deprecated since version 9","body":"<p>There is no need to create an <code>Integer</code> object when what you want to do is convert an <code>int</code> to a <code>String</code>. The <code>Integer</code> class has a <code>static</code> method <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#toString-int-\" rel=\"nofollow noreferrer\"><code>toString(int)</code></a> for this purpose.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>return m.get(row) + Integer.toString(diagonal);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10158908,"reputation":8699,"user_id":7583953,"accept_rate":80,"display_name":"Alec"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1580081643,"creation_date":1580081643,"answer_id":59923732,"question_id":59923670,"body_markdown":"You can simply convert the `Integer` to a string using the built-in method `toString()`:\r\n```\r\nreturn m.get(row) + Integer.toString(diagonal);\r\n```","title":"The constructor Integer(int) is deprecated since version 9","body":"<p>You can simply convert the <code>Integer</code> to a string using the built-in method <code>toString()</code>:</p>\n\n<pre><code>return m.get(row) + Integer.toString(diagonal);\n</code></pre>\n"}],"owner":{"account_id":17622242,"reputation":41,"user_id":12787934,"display_name":"Silvija "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6438,"favorite_count":0,"down_vote_count":4,"up_vote_count":2,"answer_count":3,"score":-2,"last_activity_date":1691574458,"creation_date":1580081030,"question_id":59923670,"body_markdown":"I really want to change this old format in my code into a newer one as this one is deprecated,\r\nif you could offer me something \r\n```\r\nnew Integer(diagonal).toString();\r\n```\r\n    ","title":"The constructor Integer(int) is deprecated since version 9","body":"<p>I really want to change this old format in my code into a newer one as this one is deprecated,\nif you could offer me something </p>\n\n<pre><code>new Integer(diagonal).toString();\n</code></pre>\n"},{"tags":["java","checkstyle"],"answers":[{"comments":[{"owner":{"account_id":24127,"reputation":69392,"user_id":61158,"accept_rate":98,"display_name":"akarnokd"},"score":0,"creation_date":1245330784,"post_id":1012440,"comment_id":821518,"body_markdown":"I use checkstyle through Eclipse. There is a project property for that.","body":"I use checkstyle through Eclipse. There is a project property for that."}],"tags":[],"owner":{"account_id":24127,"reputation":69392,"user_id":61158,"accept_rate":98,"display_name":"akarnokd"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1245328965,"creation_date":1245328965,"answer_id":1012440,"question_id":1012407,"body_markdown":"There is an option to ignore write protected files. Or files in a package.","title":"How to suppress all checks for a file in Checkstyle?","body":"<p>There is an option to ignore write protected files. Or files in a package.</p>\n"},{"comments":[{"owner":{"account_id":201971,"reputation":2053,"user_id":448741,"display_name":"mmigdol"},"score":3,"creation_date":1372468405,"post_id":1012677,"comment_id":25221502,"body_markdown":"In the current version of the plugin, you must first de-select &quot;Use simple configuration&quot; before you can reach the configurable file sets.","body":"In the current version of the plugin, you must first de-select &quot;Use simple configuration&quot; before you can reach the configurable file sets."},{"owner":{"account_id":209503,"reputation":22800,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1408448464,"post_id":1012677,"comment_id":39583816,"body_markdown":"That comment should be added to this answer. +1 anyway to both.","body":"That comment should be added to this answer. +1 anyway to both."}],"tags":[],"owner":{"account_id":34019,"reputation":14592,"user_id":95699,"accept_rate":73,"display_name":"Rob H"},"comment_count":2,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1245332388,"creation_date":1245332388,"answer_id":1012677,"question_id":1012407,"body_markdown":"If you&#39;re using the Checkclipse Eclipse plugin for Checkstyle, you can include or exclude file patterns (including directories) by going to the Checkclipse &gt; File Filter tab under project properties. For example, my project contains **src** and **test** directories at the top level. I want Checkstyle applied to only files in the **src** directory (omitting **test**), so I added an include pattern that looks like this:\r\n\r\n    src/.+java$\r\n\r\nAs you can see, it uses a regex-style syntax for pattern specification.","title":"How to suppress all checks for a file in Checkstyle?","body":"<p>If you're using the Checkclipse Eclipse plugin for Checkstyle, you can include or exclude file patterns (including directories) by going to the Checkclipse > File Filter tab under project properties. For example, my project contains <strong>src</strong> and <strong>test</strong> directories at the top level. I want Checkstyle applied to only files in the <strong>src</strong> directory (omitting <strong>test</strong>), so I added an include pattern that looks like this:</p>\n\n<pre><code>src/.+java$\n</code></pre>\n\n<p>As you can see, it uses a regex-style syntax for pattern specification.</p>\n"},{"tags":[],"owner":{"account_id":36213,"reputation":3169,"user_id":103165,"accept_rate":86,"display_name":"ist_lion"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1245390419,"creation_date":1245390419,"answer_id":1016501,"question_id":1012407,"body_markdown":"If you wish to not have a group of files within a project inspected, you can filter these files out so they are not inspected by creating a **file filter**\r\n\r\n\r\nThe file filter uses regex to determine what files to exclude.  The regex operates on the complete file name - because of this, you could also exclude whole folders.  In this case you could exclude the whole package if you wished.\r\n\r\nIf you google around a bit - you could probably find some Checkstyle Configuration Propertie files that have examples of what you&#39;re looking for.  I would suggest after you do so - save it as a bit of a template so you can refer to it in future situations","title":"How to suppress all checks for a file in Checkstyle?","body":"<p>If you wish to not have a group of files within a project inspected, you can filter these files out so they are not inspected by creating a <strong>file filter</strong></p>\n\n<p>The file filter uses regex to determine what files to exclude.  The regex operates on the complete file name - because of this, you could also exclude whole folders.  In this case you could exclude the whole package if you wished.</p>\n\n<p>If you google around a bit - you could probably find some Checkstyle Configuration Propertie files that have examples of what you're looking for.  I would suggest after you do so - save it as a bit of a template so you can refer to it in future situations</p>\n"},{"comments":[{"owner":{"account_id":25060,"reputation":9771,"user_id":64138,"accept_rate":92,"display_name":"Alceu Costa"},"score":1,"creation_date":1245412594,"post_id":1016550,"comment_id":826803,"body_markdown":"This is exactly what I&#39;m looking for. But it didn&#39;t work. Do I have to set a checkstyle configuration somewhere to use the &#39;files&#39; and &#39;checks&#39; attributes as regular expressions? I can see that in the already existant suppres tags doesn&#39;t use the &#39;file&#39; attribute as regex: i.e. files=&quot;MyClass.java&quot; and not files=&quot;MyClass\\.java&quot;.","body":"This is exactly what I&#39;m looking for. But it didn&#39;t work. Do I have to set a checkstyle configuration somewhere to use the &#39;files&#39; and &#39;checks&#39; attributes as regular expressions? I can see that in the already existant suppres tags doesn&#39;t use the &#39;file&#39; attribute as regex: i.e. files=&quot;MyClass.java&quot; and not files=&quot;MyClass\\.java&quot;."},{"owner":{"account_id":42594,"reputation":12865,"user_id":124111,"accept_rate":98,"display_name":"aberrant80"},"score":0,"creation_date":1245470690,"post_id":1016550,"comment_id":830562,"body_markdown":"Hmm... are you using an IDE? I&#39;m afraid I can&#39;t help you more because the above is basically a simplified version of what I&#39;ve set up for my current work - basically there was a group of similarly-named generated classes that we want Checkstyle to ignore, so we ignored a particularly pattern in the name.","body":"Hmm... are you using an IDE? I&#39;m afraid I can&#39;t help you more because the above is basically a simplified version of what I&#39;ve set up for my current work - basically there was a group of similarly-named generated classes that we want Checkstyle to ignore, so we ignored a particularly pattern in the name."},{"owner":{"account_id":201265,"reputation":5239,"user_id":447607,"accept_rate":75,"display_name":"user447607"},"score":0,"creation_date":1359657723,"post_id":1016550,"comment_id":20439842,"body_markdown":"Doesn&#39;t help me. Don&#39;t have access to the server and the architects aren&#39;t likely to give it. Was hoping for something like @SupressWarnings(&quot;com.puppycrawl.tools.*&quot;)","body":"Doesn&#39;t help me. Don&#39;t have access to the server and the architects aren&#39;t likely to give it. Was hoping for something like @SupressWarnings(&quot;com.puppycrawl.tools.*&quot;)"},{"owner":{"account_id":6084504,"reputation":2356,"user_id":4749074,"display_name":"Rib47"},"score":2,"creation_date":1484819633,"post_id":1016550,"comment_id":70670521,"body_markdown":"To skip all checks in all files under directories (packages) named &quot;generated&quot;, you must use regex pattern \n`&lt;suppress checks=&quot;[a-zA-Z0-9]*&quot; files=&quot;[\\\\/]generated[\\\\/]&quot; /&gt;`  \nIt was really little hard for me to find out the right pattern for **files** parameter.","body":"To skip all checks in all files under directories (packages) named &quot;generated&quot;, you must use regex pattern  <code>&lt;suppress checks=&quot;[a-zA-Z0-9]*&quot; files=&quot;[\\\\&#47;]generated[\\\\&#47;]&quot; &#47;&gt;</code>   It was really little hard for me to find out the right pattern for <b>files</b> parameter."},{"owner":{"account_id":1001793,"reputation":2131,"user_id":1016482,"accept_rate":50,"display_name":"rveach"},"score":3,"creation_date":1500756558,"post_id":1016550,"comment_id":77481595,"body_markdown":"`[a-zA-Z0-9]*` seems excessive, why don&#39; you just use `.*`?","body":"<code>[a-zA-Z0-9]*</code> seems excessive, why don&#39; you just use <code>.*</code>?"},{"owner":{"account_id":542631,"reputation":2771,"user_id":755370,"accept_rate":82,"display_name":"AndroidNoob"},"score":0,"creation_date":1513006626,"post_id":1016550,"comment_id":82473500,"body_markdown":"How can I add multiple specific checks into the `checks=&quot;...&quot;` parameter? How are they separated?","body":"How can I add multiple specific checks into the <code>checks=&quot;...&quot;</code> parameter? How are they separated?"},{"owner":{"account_id":5568953,"reputation":5548,"user_id":4415079,"accept_rate":57,"display_name":"slipperypete"},"score":0,"creation_date":1541533270,"post_id":1016550,"comment_id":93247767,"body_markdown":"Try making the path to the mysuppressions.xml file from the project root . ... ie ... ./codequality/mysuppressions.xml","body":"Try making the path to the mysuppressions.xml file from the project root . ... ie ... ./codequality/mysuppressions.xml"},{"owner":{"account_id":125029,"reputation":330,"user_id":682256,"display_name":"Simon Logic"},"score":0,"creation_date":1626783830,"post_id":1016550,"comment_id":120980777,"body_markdown":"i&#39;m getting file is not found. it is placed right at the rool of &quot;modules&quot; folder, nearby checkstyle.xml.","body":"i&#39;m getting file is not found. it is placed right at the rool of &quot;modules&quot; folder, nearby checkstyle.xml."}],"tags":[],"owner":{"account_id":42594,"reputation":12865,"user_id":124111,"accept_rate":98,"display_name":"aberrant80"},"comment_count":8,"down_vote_count":0,"up_vote_count":73,"is_accepted":true,"score":73,"last_activity_date":1245391899,"creation_date":1245391899,"answer_id":1016550,"question_id":1012407,"body_markdown":"Don&#39;t know whether you&#39;re using command line or in an IDE, but you&#39;ll basically need a suppresions file. If you&#39;re manually editing the Checkstyle config file, add a new module to it:\r\n\r\n    &lt;module name=&quot;SuppressionFilter&quot;&gt;\r\n        &lt;property name=&quot;file&quot; value=&quot;mysuppressions.xml&quot; /&gt;\r\n    &lt;/module&gt;\r\n\r\nYour `mysuppression.xml` can be something like:\r\n\r\n    &lt;?xml version=&quot;1.0&quot;?&gt;\r\n    \r\n    &lt;!DOCTYPE suppressions PUBLIC\r\n        &quot;-//Puppy Crawl//DTD Suppressions 1.1//EN&quot;\r\n        &quot;http://www.puppycrawl.com/dtds/suppressions_1_1.dtd&quot;&gt;\r\n    \r\n    &lt;suppressions&gt;\r\n        &lt;suppress files=&quot;TheClassToIgnore\\.java&quot; checks=&quot;[a-zA-Z0-9]*&quot;/&gt;\r\n    &lt;/suppressions&gt;\r\n\r\nThe value for &quot;`files`&quot; attribute is basically a regex for your source files, and the value for the &quot;`checks`&quot; attribute is regex for what checks to skip (&quot;`[a-zA-Z0-9]*`&quot; basically means skip everything). This is the pattern you&#39;re looking for I guess?","title":"How to suppress all checks for a file in Checkstyle?","body":"<p>Don't know whether you're using command line or in an IDE, but you'll basically need a suppresions file. If you're manually editing the Checkstyle config file, add a new module to it:</p>\n\n<pre><code>&lt;module name=\"SuppressionFilter\"&gt;\n    &lt;property name=\"file\" value=\"mysuppressions.xml\" /&gt;\n&lt;/module&gt;\n</code></pre>\n\n<p>Your <code>mysuppression.xml</code> can be something like:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n\n&lt;!DOCTYPE suppressions PUBLIC\n    \"-//Puppy Crawl//DTD Suppressions 1.1//EN\"\n    \"http://www.puppycrawl.com/dtds/suppressions_1_1.dtd\"&gt;\n\n&lt;suppressions&gt;\n    &lt;suppress files=\"TheClassToIgnore\\.java\" checks=\"[a-zA-Z0-9]*\"/&gt;\n&lt;/suppressions&gt;\n</code></pre>\n\n<p>The value for \"<code>files</code>\" attribute is basically a regex for your source files, and the value for the \"<code>checks</code>\" attribute is regex for what checks to skip (\"<code>[a-zA-Z0-9]*</code>\" basically means skip everything). This is the pattern you're looking for I guess?</p>\n"},{"comments":[{"owner":{"account_id":7301350,"reputation":1005,"user_id":5563977,"display_name":"MatanRubin"},"score":0,"creation_date":1488998419,"post_id":1019054,"comment_id":72482946,"body_markdown":"Henrique, note that `FileContentsHolder` should be under `TreeWalker` while `SuppressionCommentFilter` should be under `Checker`.\nIf you put them both under `TreeWalker` or both under `Checker` - this would not work.\n\nFor more information, see http://checkstyle.sourceforge.net/config_filters.html#SuppressionCommentFilter","body":"Henrique, note that <code>FileContentsHolder</code> should be under <code>TreeWalker</code> while <code>SuppressionCommentFilter</code> should be under <code>Checker</code>. If you put them both under <code>TreeWalker</code> or both under <code>Checker</code> - this would not work.  For more information, see <a href=\"http://checkstyle.sourceforge.net/config_filters.html#SuppressionCommentFilter\" rel=\"nofollow noreferrer\">checkstyle.sourceforge.net/&hellip;</a>"},{"owner":{"account_id":325384,"reputation":59595,"user_id":646543,"accept_rate":86,"display_name":"Michael0x2a"},"score":2,"creation_date":1506215331,"post_id":1019054,"comment_id":79729261,"body_markdown":"Since this tripped me up just now -- @MatanRubin&#39;s comment is accurate for versions of checkstyle up to 8.0. However, checkstyle 8.1 and 8.2 made some backwards-incompatible changes: the correct thing to do now is to have `SuppressionCommentFilter` be under `TreeWalker`. The `FileContentsHolder` module seems to have been removed entirely -- it&#39;s no longer necessary.","body":"Since this tripped me up just now -- @MatanRubin&#39;s comment is accurate for versions of checkstyle up to 8.0. However, checkstyle 8.1 and 8.2 made some backwards-incompatible changes: the correct thing to do now is to have <code>SuppressionCommentFilter</code> be under <code>TreeWalker</code>. The <code>FileContentsHolder</code> module seems to have been removed entirely -- it&#39;s no longer necessary."},{"owner":{"account_id":7301350,"reputation":1005,"user_id":5563977,"display_name":"MatanRubin"},"score":0,"creation_date":1506239751,"post_id":1019054,"comment_id":79733374,"body_markdown":"Thanks for the info @Michael0x2a","body":"Thanks for the info @Michael0x2a"}],"tags":[],"owner":{"account_id":25060,"reputation":9771,"user_id":64138,"accept_rate":92,"display_name":"Alceu Costa"},"comment_count":3,"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1514998119,"creation_date":1245431610,"answer_id":1019054,"question_id":1012407,"body_markdown":"I was able to suppress the checks in a file by adding the SuppressionCommentFilter tag in my checks.xml:\r\n\r\nFirst, I added the FileContentHolder tag as a child of TreeWalker tag (this step is *not* needed since version 8.1 of com.puppycrawl.tools:checkstyle):\r\n\r\n    &lt;module name=&quot;TreeWalker&quot;&gt;\r\n        ...\r\n        &lt;module name=&quot;FileContentsHolder&quot;/&gt;\r\n        ...\r\n    &lt;/module&gt;\r\n\r\nThen I added the SuppressionCommentFilter in the checks.xml (since version 8.1 of com.puppycrawl.tools:checkstyle - under &quot;TreeWalker&quot; node):\r\n\r\n    &lt;module name=&quot;SuppressionCommentFilter&quot;/&gt;\r\n\r\nIn each file that I wanted to suppress the checks I inserted the following comment in the first line of the file:\r\n\r\n    // CHECKSTYLE:OFF","title":"How to suppress all checks for a file in Checkstyle?","body":"<p>I was able to suppress the checks in a file by adding the SuppressionCommentFilter tag in my checks.xml:</p>\n\n<p>First, I added the FileContentHolder tag as a child of TreeWalker tag (this step is <em>not</em> needed since version 8.1 of com.puppycrawl.tools:checkstyle):</p>\n\n<pre><code>&lt;module name=\"TreeWalker\"&gt;\n    ...\n    &lt;module name=\"FileContentsHolder\"/&gt;\n    ...\n&lt;/module&gt;\n</code></pre>\n\n<p>Then I added the SuppressionCommentFilter in the checks.xml (since version 8.1 of com.puppycrawl.tools:checkstyle - under \"TreeWalker\" node):</p>\n\n<pre><code>&lt;module name=\"SuppressionCommentFilter\"/&gt;\n</code></pre>\n\n<p>In each file that I wanted to suppress the checks I inserted the following comment in the first line of the file:</p>\n\n<pre><code>// CHECKSTYLE:OFF\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1145527,"reputation":3387,"user_id":1128392,"accept_rate":90,"display_name":"erwaman"},"score":3,"creation_date":1493398353,"post_id":9421946,"comment_id":74416683,"body_markdown":"You can just use `.*` for `checks` and `/jaxb/` for `files` if your path separator character is `/`.","body":"You can just use <code>.*</code> for <code>checks</code> and <code>&#47;jaxb&#47;</code> for <code>files</code> if your path separator character is <code>&#47;</code>."}],"tags":[],"owner":{"account_id":974375,"reputation":720,"user_id":996128,"accept_rate":57,"display_name":"Inxsible"},"comment_count":1,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1330033900,"creation_date":1330033900,"answer_id":9421946,"question_id":1012407,"body_markdown":"aberrant80&#39;s answer helped a lot. With the help of his hint - using regex pattern matching, I was also able to suppress checkstyle for an entire package by adding this to the checkstyle-suppressions.xml file.\r\nFor eg. to skip checkstyle checks on all auto generated java files under the jaxb package,\r\n\r\n        &lt;suppressions&gt;\r\n            &lt;suppress checks=&quot;[a-zA-Z0-9]*&quot; files=&quot;[\\\\/]jaxb[\\\\/]&quot; /&gt;\r\n        &lt;/suppressions&gt;\r\n\r\n","title":"How to suppress all checks for a file in Checkstyle?","body":"<p>aberrant80's answer helped a lot. With the help of his hint - using regex pattern matching, I was also able to suppress checkstyle for an entire package by adding this to the checkstyle-suppressions.xml file.\nFor eg. to skip checkstyle checks on all auto generated java files under the jaxb package,</p>\n\n<pre><code>    &lt;suppressions&gt;\n        &lt;suppress checks=\"[a-zA-Z0-9]*\" files=\"[\\\\/]jaxb[\\\\/]\" /&gt;\n    &lt;/suppressions&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":125029,"reputation":330,"user_id":682256,"display_name":"Simon Logic"},"score":0,"creation_date":1626783895,"post_id":48295843,"comment_id":120980803,"body_markdown":"value of &#39;files&#39; attr is regexp too.","body":"value of &#39;files&#39; attr is regexp too."}],"tags":[],"owner":{"account_id":1424899,"reputation":4365,"user_id":1348691,"accept_rate":67,"display_name":"Tiina"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1516174561,"creation_date":1516174561,"answer_id":48295843,"question_id":1012407,"body_markdown":"@aberrant80&#39;s answer is very inspiring although it didn&#39;t work in my project. In order to suppress any warnings that checkstyle looks for in Foo.java, according to [link][1], if maven is used:\r\n\r\n    &lt;plugin&gt;\r\n    \t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\r\n        ...\r\n    \t\t&lt;configuration&gt;\r\n    \t\t\t...\r\n    \t\t\t&lt;configLocation&gt;checkstyle.xml&lt;/configLocation&gt;\r\n    \t\t\t&lt;suppressionsLocation&gt;checkstyle-suppressions.xml&lt;/suppressionsLocation&gt;\r\n    \t\t\t...\r\n    \t\t&lt;/configuration&gt;\t\t\t\t\r\n    \t...\r\n    &lt;/plugin&gt;\r\n\r\nAnd in *checkstyle-suppressions.xml*\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n    &lt;!DOCTYPE suppressions PUBLIC &quot;-//Puppy Crawl//DTD Suppressions 1.1//EN&quot; &quot;http://www.puppycrawl.com/dtds/suppressions_1_1.dtd&quot;&gt;\r\n    &lt;suppressions&gt;\r\n        &lt;suppress files=&quot;Foo.java&quot; checks=&quot;[a-zA-Z0-9]*&quot; /&gt;\r\n    &lt;/suppressions&gt;\r\n\r\nSo far the highest version is 1.1 (1.2 does not exist).\r\n  [1]: http://maven.apache.org/plugins/maven-checkstyle-plugin/examples/suppressions-filter.html\r\n","title":"How to suppress all checks for a file in Checkstyle?","body":"<p>@aberrant80's answer is very inspiring although it didn't work in my project. In order to suppress any warnings that checkstyle looks for in Foo.java, according to <a href=\"http://maven.apache.org/plugins/maven-checkstyle-plugin/examples/suppressions-filter.html\" rel=\"nofollow noreferrer\">link</a>, if maven is used:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\n    ...\n        &lt;configuration&gt;\n            ...\n            &lt;configLocation&gt;checkstyle.xml&lt;/configLocation&gt;\n            &lt;suppressionsLocation&gt;checkstyle-suppressions.xml&lt;/suppressionsLocation&gt;\n            ...\n        &lt;/configuration&gt;                \n    ...\n&lt;/plugin&gt;\n</code></pre>\n\n<p>And in <em>checkstyle-suppressions.xml</em></p>\n\n\n\n<pre><code>&lt;!DOCTYPE suppressions PUBLIC \"-//Puppy Crawl//DTD Suppressions 1.1//EN\" \"http://www.puppycrawl.com/dtds/suppressions_1_1.dtd\"&gt;\n&lt;suppressions&gt;\n    &lt;suppress files=\"Foo.java\" checks=\"[a-zA-Z0-9]*\" /&gt;\n&lt;/suppressions&gt;\n</code></pre>\n\n<p>So far the highest version is 1.1 (1.2 does not exist).</p>\n"}],"owner":{"account_id":25060,"reputation":9771,"user_id":64138,"accept_rate":92,"display_name":"Alceu Costa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78412,"favorite_count":0,"down_vote_count":0,"up_vote_count":64,"accepted_answer_id":1016550,"answer_count":7,"score":64,"last_activity_date":1691573761,"creation_date":1245328594,"question_id":1012407,"body_markdown":"I&#39;m doing an override for a third party class and I want to suppress all checks for it (since I&#39;m only keeping it around until the patch is accepted).\r\n\r\nIs there a way to suppress all checks for a file?\r\n\r\nI tried using &quot;*&quot; but that fails.\r\n\r\n&lt;suppress checks=&quot;[What do I put in here to suppress all checks?]&quot; files=&quot;MyClass.java&quot;/&gt;","title":"How to suppress all checks for a file in Checkstyle?","body":"<p>I'm doing an override for a third party class and I want to suppress all checks for it (since I'm only keeping it around until the patch is accepted).</p>\n\n<p>Is there a way to suppress all checks for a file?</p>\n\n<p>I tried using \"*\" but that fails.</p>\n\n<p></p>\n"},{"tags":["java","apache-spark"],"comments":[{"owner":{"account_id":6886591,"reputation":12914,"user_id":5291448,"display_name":"Glennie Helles Sindholt"},"score":0,"creation_date":1448952436,"post_id":34012106,"comment_id":55783919,"body_markdown":"Please provide a [Minimal, Complete, and Verifiable example](http://stackoverflow.com/help/mcve). Is your dataframe sorted?","body":"Please provide a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>. Is your dataframe sorted?"}],"answers":[{"comments":[{"owner":{"account_id":4706224,"reputation":4837,"user_id":3808276,"display_name":"Abu Shoeb"},"score":0,"creation_date":1510533112,"post_id":34017333,"comment_id":81461888,"body_markdown":"I was looking for the same thing. Just to make sure that df.take(100) should\n give me the first 100 rows and then df.sort(monotonicallyIncreasingId().desc).limit(100) wshould give the last 100, right?","body":"I was looking for the same thing. Just to make sure that df.take(100) should  give me the first 100 rows and then df.sort(monotonicallyIncreasingId().desc).limit(100) wshould give the last 100, right?"}],"tags":[],"owner":{"account_id":486774,"reputation":1655,"user_id":1095742,"display_name":"Ewan Leith"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1448963434,"creation_date":1448963434,"answer_id":34017333,"question_id":34012106,"body_markdown":"I&#39;m not sure what you&#39;re really hoping to achieve this way, but if you&#39;re in Spark 1.5 you could do something like this using [monotonicallyIncreasingId](https://issues.apache.org/jira/browse/SPARK-7135):\r\n\r\n    val df4000 = df.sort(monotonicallyIncreasingId().desc).limit(4000)\r\n\r\nwhich will sort in a descending order by the ID for each row in the dataframe, then limit the results to the first 4000.\r\n\r\nOtherwise you could do the same using any column that you know increases consistently.\r\n\r\n","title":"spark dataframe how to get the latest n rows using java","body":"<p>I'm not sure what you're really hoping to achieve this way, but if you're in Spark 1.5 you could do something like this using <a href=\"https://issues.apache.org/jira/browse/SPARK-7135\" rel=\"nofollow\">monotonicallyIncreasingId</a>:</p>\n\n<pre><code>val df4000 = df.sort(monotonicallyIncreasingId().desc).limit(4000)\n</code></pre>\n\n<p>which will sort in a descending order by the ID for each row in the dataframe, then limit the results to the first 4000.</p>\n\n<p>Otherwise you could do the same using any column that you know increases consistently.</p>\n"},{"tags":[],"owner":{"account_id":436137,"reputation":3180,"user_id":823112,"accept_rate":95,"display_name":"Quentin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691573228,"creation_date":1691573228,"answer_id":76866342,"question_id":34012106,"body_markdown":"Starting with spark 3.4 you can use `OFFSET` to skip the first N rows.\r\nIn your case, you could count the total number of rows and then skip the beginning, something like this:\r\n\r\n\r\n```\r\nval count = df.count()\r\ndf = spark.sql(s&#39;select * from your_df OFFSET ${count-4000}&#39;)\r\n```\r\n\r\nNote that this is not deterministic if you don&#39;t have an `ORDER BY`  clause","title":"spark dataframe how to get the latest n rows using java","body":"<p>Starting with spark 3.4 you can use <code>OFFSET</code> to skip the first N rows.\nIn your case, you could count the total number of rows and then skip the beginning, something like this:</p>\n<pre><code>val count = df.count()\ndf = spark.sql(s'select * from your_df OFFSET ${count-4000}')\n</code></pre>\n<p>Note that this is not deterministic if you don't have an <code>ORDER BY</code>  clause</p>\n"}],"owner":{"account_id":3546793,"reputation":1587,"user_id":2962555,"accept_rate":44,"display_name":"Laodao"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3049,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":34017333,"answer_count":2,"score":0,"last_activity_date":1691573228,"creation_date":1448940692,"question_id":34012106,"body_markdown":"I am new in Spark. Right now I am trying to join two DataFrames together. I want to keep my dataframes in 5000 rows. Since my first dataframe has already get 5000 rows, I need to get latest 4000 rows as my second dataframe has 1000 rows. Can someone help me on how to get a dataframe with the latest 4000 rows in the first dataframe? Thanks in advance.","title":"spark dataframe how to get the latest n rows using java","body":"<p>I am new in Spark. Right now I am trying to join two DataFrames together. I want to keep my dataframes in 5000 rows. Since my first dataframe has already get 5000 rows, I need to get latest 4000 rows as my second dataframe has 1000 rows. Can someone help me on how to get a dataframe with the latest 4000 rows in the first dataframe? Thanks in advance.</p>\n"},{"tags":["java","spring-integration","redisson","distributed-lock","spring-integration-distributed-lock"],"answers":[{"comments":[{"owner":{"account_id":109585,"reputation":8067,"user_id":290284,"accept_rate":95,"display_name":"Cui Pengfei 崔鹏飞"},"score":2,"creation_date":1691506746,"post_id":76860519,"comment_id":135499360,"body_markdown":"1. boolean tryLock(long waitTime, long leaseTime, TimeUnit unit)\nthis is its method signature, they have both waitTime and leaseTime. their RLock interface has serveral implementation classes, I took a brief look into these classes, I don&#39;t think their Javadoc is wrong","body":"1. boolean tryLock(long waitTime, long leaseTime, TimeUnit unit) this is its method signature, they have both waitTime and leaseTime. their RLock interface has serveral implementation classes, I took a brief look into these classes, I don&#39;t think their Javadoc is wrong"},{"owner":{"account_id":109585,"reputation":8067,"user_id":290284,"accept_rate":95,"display_name":"Cui Pengfei 崔鹏飞"},"score":2,"creation_date":1691506944,"post_id":76860519,"comment_id":135499405,"body_markdown":"2. I disagree with the Opinion-based part. This question is trying to find out the design rationales behind TTL and lease time, and trying to understand what kind of trade offs led to different choices. And I do not think this question had expressed much opinion, as I have stated  in the question that the question is Not trying to say which is better","body":"2. I disagree with the Opinion-based part. This question is trying to find out the design rationales behind TTL and lease time, and trying to understand what kind of trade offs led to different choices. And I do not think this question had expressed much opinion, as I have stated  in the question that the question is Not trying to say which is better"},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1691507663,"post_id":76860519,"comment_id":135499585,"body_markdown":"As I said: I wouldn&#39;t expect to have another thread taking the lock over while I&#39;m still in the other thread doing stuff. This Redisson behavior is not what I would rely on. It is a bit sad to not see an explanation of that `lease` behavior in their docs... Seeing so many questions from you on the matter I have feeling that you try to find a justification that Spring Integration behavior is wrong. The `TTL` (`lease`) is a last resort when we have lost a holding process, so another process may treat the lock as broker and take it over. That&#39;s why we have also a `RenewableLockRegistry`.","body":"As I said: I wouldn&#39;t expect to have another thread taking the lock over while I&#39;m still in the other thread doing stuff. This Redisson behavior is not what I would rely on. It is a bit sad to not see an explanation of that <code>lease</code> behavior in their docs... Seeing so many questions from you on the matter I have feeling that you try to find a justification that Spring Integration behavior is wrong. The <code>TTL</code> (<code>lease</code>) is a last resort when we have lost a holding process, so another process may treat the lock as broker and take it over. That&#39;s why we have also a <code>RenewableLockRegistry</code>."},{"owner":{"account_id":109585,"reputation":8067,"user_id":290284,"accept_rate":95,"display_name":"Cui Pengfei 崔鹏飞"},"score":1,"creation_date":1691508114,"post_id":76860519,"comment_id":135499705,"body_markdown":"It is true that I do find redisson&#39;s behavior more straight forward and more consistent. But I am not trying to prove Spring Integration behavior is wrong. I would say this is a curiosity based question. It is like when you see two libraries that do similar things, and you wanna find out why have they deisgned their stuff differently","body":"It is true that I do find redisson&#39;s behavior more straight forward and more consistent. But I am not trying to prove Spring Integration behavior is wrong. I would say this is a curiosity based question. It is like when you see two libraries that do similar things, and you wanna find out why have they deisgned their stuff differently"}],"tags":[],"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691519931,"creation_date":1691504889,"answer_id":76860519,"question_id":76856466,"body_markdown":"I believe there are might be other, different approaches to implement distributed locks. \r\n\r\nIf you look into the `RedisLockRegistry` of Spring Integration, you&#39;ll see that it is similar to the `JdbcLockRegistry` and there is a local guard with a `ReentrantLock`. So, all the interactions within the same process follow the standard Java Lock algorithm. As I explained to you in that issue: the TTL is really for losing dead locks in a distributed environment. On the other hand, you cannot predict how long your process is going to hold the lock, so releasing it prematurely because of some `leaseTime` may lead to inconsistency in your system where you&#39;d expect to be guarded by the lock.\r\n\r\nI&#39;m not sure what your goal is with this locks exercise.","title":"Spring Integration Distributed Locks: conceptual consistency of TTL as compared to Redisson&#39;s lease time","body":"<p>I believe there are might be other, different approaches to implement distributed locks.</p>\n<p>If you look into the <code>RedisLockRegistry</code> of Spring Integration, you'll see that it is similar to the <code>JdbcLockRegistry</code> and there is a local guard with a <code>ReentrantLock</code>. So, all the interactions within the same process follow the standard Java Lock algorithm. As I explained to you in that issue: the TTL is really for losing dead locks in a distributed environment. On the other hand, you cannot predict how long your process is going to hold the lock, so releasing it prematurely because of some <code>leaseTime</code> may lead to inconsistency in your system where you'd expect to be guarded by the lock.</p>\n<p>I'm not sure what your goal is with this locks exercise.</p>\n"},{"tags":[],"owner":{"account_id":109585,"reputation":8067,"user_id":290284,"accept_rate":95,"display_name":"Cui Pengfei 崔鹏飞"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691572555,"creation_date":1691572555,"answer_id":76866253,"question_id":76856466,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3OmUs.png\r\n\r\n\r\n↑ This is my interpretation.\r\n\r\nIn the case of Spring Integration, Bob is denied the lock because it values the fact that Alice might still be using it more than the fact that more than 20 seconds have passed. This reduces the chance of interrupting Alice&#39;s work.\r\n\r\nIn contrast, Redisson grants the lock to Bob, prioritizing the expiration of the lock duration over the possibility that Alice is still using it. This provides more consistent behavior for lease time.","title":"Spring Integration Distributed Locks: conceptual consistency of TTL as compared to Redisson&#39;s lease time","body":"<p><a href=\"https://i.stack.imgur.com/3OmUs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3OmUs.png\" alt=\"enter image description here\" /></a></p>\n<p>↑ This is my interpretation.</p>\n<p>In the case of Spring Integration, Bob is denied the lock because it values the fact that Alice might still be using it more than the fact that more than 20 seconds have passed. This reduces the chance of interrupting Alice's work.</p>\n<p>In contrast, Redisson grants the lock to Bob, prioritizing the expiration of the lock duration over the possibility that Alice is still using it. This provides more consistent behavior for lease time.</p>\n"}],"owner":{"account_id":109585,"reputation":8067,"user_id":290284,"accept_rate":95,"display_name":"Cui Pengfei 崔鹏飞"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":327,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1691572555,"creation_date":1691468208,"question_id":76856466,"body_markdown":"This is a follow up question of: https://github.com/spring-projects/spring-integration/issues/8687\r\n\r\nAs discussed in the above link, Spring Integration Distributed Lock&#39;s concept of TTL is meant for cross-process only, not for threads in the same process.\r\n\r\nLater I have tried Redisson, it has a concept of lease time in its RLock:\r\n\r\n```java\r\n\r\n    /**\r\n     * Tries to acquire the lock with defined &lt;code&gt;leaseTime&lt;/code&gt;.\r\n     * Waits up to defined &lt;code&gt;waitTime&lt;/code&gt; if necessary until the lock became available.\r\n     *\r\n     * Lock will be released automatically after defined &lt;code&gt;leaseTime&lt;/code&gt; interval.\r\n     *\r\n     * @param waitTime the maximum time to acquire the lock\r\n     * @param leaseTime lease time\r\n     * @param unit time unit\r\n     * @return &lt;code&gt;true&lt;/code&gt; if lock is successfully acquired,\r\n     *          otherwise &lt;code&gt;false&lt;/code&gt; if lock is already set.\r\n     * @throws InterruptedException - if the thread is interrupted\r\n     */\r\n    boolean tryLock(long waitTime, long leaseTime, TimeUnit unit) throws InterruptedException;\r\n```\r\n\r\nhttps://github.com/redisson/redisson/blob/c2c00a07c279d55d627717fbb290426e19744a65/redisson/src/main/java/org/redisson/api/RLock.java#L55\r\n\r\n**I think these 2 concepts TTL and lease time are similar (correct me if I am wrong).**\r\n\r\nBut **lease time of Redisson works in a consistent way** for both **cross-process** and **threads in same process**, while **TTL** of spring integration does **not**.\r\n\r\n\r\nThe following junit test can reproduce what I mean:\r\nhttps://github.com/cuipengfei/Spikes/blob/22a9896137dd62bda5f030f5a3d33c67fba67310/jpa/spring-jdbc-distributed-lock-issue/src/test/java/com/github/spring/example/LockTest.java#L38C9-L49\r\n\r\n```shell\r\ndocker run -p 6379:6379 -d redis:7.0.12 --requirepass &quot;mypass&quot;\r\n\r\ndocker run -e POSTGRES_USER=localtest -e POSTGRES_PASSWORD=localtest -e POSTGRES_DB=orders -p 5432:5432 -d postgres:15.3\r\n\r\n# start this docker container before running the above junit test\r\n```\r\n\r\nand change mode to compare: https://github.com/cuipengfei/Spikes/blob/master/jpa/spring-jdbc-distributed-lock-issue/src/test/resources/application.properties#L16-L17\r\n```\r\nlock.registry.name=redisson\r\n# change this line to redis / jdbc / redisson then run test\r\n```\r\n\r\nWhen running the test in Redis/jdbc mode of spring integration, **thread 2 can not get the lock even after TTL**.\r\n\r\nWhile running the test in Redisson mode, **thread 2 can get the lock after lease time has past**, which I think makes more sense conceptually.\r\n\r\nWhat are the **design considerations** behind TTL/lease time that **led to different choices**?","title":"Spring Integration Distributed Locks: conceptual consistency of TTL as compared to Redisson&#39;s lease time","body":"<p>This is a follow up question of: <a href=\"https://github.com/spring-projects/spring-integration/issues/8687\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-integration/issues/8687</a></p>\n<p>As discussed in the above link, Spring Integration Distributed Lock's concept of TTL is meant for cross-process only, not for threads in the same process.</p>\n<p>Later I have tried Redisson, it has a concept of lease time in its RLock:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n    /**\n     * Tries to acquire the lock with defined &lt;code&gt;leaseTime&lt;/code&gt;.\n     * Waits up to defined &lt;code&gt;waitTime&lt;/code&gt; if necessary until the lock became available.\n     *\n     * Lock will be released automatically after defined &lt;code&gt;leaseTime&lt;/code&gt; interval.\n     *\n     * @param waitTime the maximum time to acquire the lock\n     * @param leaseTime lease time\n     * @param unit time unit\n     * @return &lt;code&gt;true&lt;/code&gt; if lock is successfully acquired,\n     *          otherwise &lt;code&gt;false&lt;/code&gt; if lock is already set.\n     * @throws InterruptedException - if the thread is interrupted\n     */\n    boolean tryLock(long waitTime, long leaseTime, TimeUnit unit) throws InterruptedException;\n</code></pre>\n<p><a href=\"https://github.com/redisson/redisson/blob/c2c00a07c279d55d627717fbb290426e19744a65/redisson/src/main/java/org/redisson/api/RLock.java#L55\" rel=\"nofollow noreferrer\">https://github.com/redisson/redisson/blob/c2c00a07c279d55d627717fbb290426e19744a65/redisson/src/main/java/org/redisson/api/RLock.java#L55</a></p>\n<p><strong>I think these 2 concepts TTL and lease time are similar (correct me if I am wrong).</strong></p>\n<p>But <strong>lease time of Redisson works in a consistent way</strong> for both <strong>cross-process</strong> and <strong>threads in same process</strong>, while <strong>TTL</strong> of spring integration does <strong>not</strong>.</p>\n<p>The following junit test can reproduce what I mean:\n<a href=\"https://github.com/cuipengfei/Spikes/blob/22a9896137dd62bda5f030f5a3d33c67fba67310/jpa/spring-jdbc-distributed-lock-issue/src/test/java/com/github/spring/example/LockTest.java#L38C9-L49\" rel=\"nofollow noreferrer\">https://github.com/cuipengfei/Spikes/blob/22a9896137dd62bda5f030f5a3d33c67fba67310/jpa/spring-jdbc-distributed-lock-issue/src/test/java/com/github/spring/example/LockTest.java#L38C9-L49</a></p>\n<pre class=\"lang-bash prettyprint-override\"><code>docker run -p 6379:6379 -d redis:7.0.12 --requirepass &quot;mypass&quot;\n\ndocker run -e POSTGRES_USER=localtest -e POSTGRES_PASSWORD=localtest -e POSTGRES_DB=orders -p 5432:5432 -d postgres:15.3\n\n# start this docker container before running the above junit test\n</code></pre>\n<p>and change mode to compare: <a href=\"https://github.com/cuipengfei/Spikes/blob/master/jpa/spring-jdbc-distributed-lock-issue/src/test/resources/application.properties#L16-L17\" rel=\"nofollow noreferrer\">https://github.com/cuipengfei/Spikes/blob/master/jpa/spring-jdbc-distributed-lock-issue/src/test/resources/application.properties#L16-L17</a></p>\n<pre><code>lock.registry.name=redisson\n# change this line to redis / jdbc / redisson then run test\n</code></pre>\n<p>When running the test in Redis/jdbc mode of spring integration, <strong>thread 2 can not get the lock even after TTL</strong>.</p>\n<p>While running the test in Redisson mode, <strong>thread 2 can get the lock after lease time has past</strong>, which I think makes more sense conceptually.</p>\n<p>What are the <strong>design considerations</strong> behind TTL/lease time that <strong>led to different choices</strong>?</p>\n"},{"tags":["java","rest-assured","api-authorization"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1691568486,"post_id":76865753,"comment_id":135507733,"body_markdown":"Welcome to Stack Overflow. Why have you got tag references randomly in your post? Please don&#39;t do that. Also, please remove fluff like &quot;Hi Team&quot; and &quot;Greetings&quot; - it&#39;s unnecessary, and reduces the useful information shown in the questions list.","body":"Welcome to Stack Overflow. Why have you got tag references randomly in your post? Please don&#39;t do that. Also, please remove fluff like &quot;Hi Team&quot; and &quot;Greetings&quot; - it&#39;s unnecessary, and reduces the useful information shown in the questions list."},{"owner":{"account_id":10263942,"reputation":5676,"user_id":7574461,"display_name":"lucas-nguyen-17"},"score":0,"creation_date":1691632887,"post_id":76865753,"comment_id":135518951,"body_markdown":"Cannot reproduce this issue. Basically, 401 means you&#39;re not authenticated, your token is invalid. 403 means you&#39;re authenticated but don&#39;t have permissions needed to do the action.","body":"Cannot reproduce this issue. Basically, 401 means you&#39;re not authenticated, your token is invalid. 403 means you&#39;re authenticated but don&#39;t have permissions needed to do the action."}],"owner":{"account_id":29189289,"reputation":1,"user_id":22361710,"display_name":"Meghana Ingale"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691572343,"creation_date":1691568366,"question_id":76865753,"body_markdown":"Greetings!\r\n\r\nI am working on automating dummy POST API request with Authorization.\r\n\r\nPlease check below details for the same,\r\n\r\n**Code:-\r\n```java\r\nRestAssured.baseURI=&quot;http://restapi.adequateshop.com/api/users&quot;;\r\nString jsonBody = &quot;{\\&quot;tourist_name\\&quot;:\\&quot;Mike\\&quot;,\\&quot;tourist_email\\&quot;:\\&quot;mxyz5676@gmail.com\\&quot;,\\&quot;tourist_location\\&quot;:\\&quot;Paris\\&quot;}&quot;;\t\r\nString token=&quot;433tc02b-b5c1-4bd8-836a-618cdc31c492&quot;;\r\n\t\r\n\t\r\nResponse response = RestAssured.given()\r\n             .header(&quot;Authorization&quot;, &quot;Bearer &quot; + token)\r\n             .header(&quot;User-Agent&quot;, &quot;PostmanRuntime/7.32.3&quot;)\r\n             .header(&quot;Accept&quot;, &quot;*/*&quot;)\r\n             .header(&quot;Connection&quot;, &quot;keep-alive&quot;)\r\n             .body(jsonBody)\r\n            .post(&quot;http://restapi.adequateshop.com/api/users&quot;);\r\n\r\nint statusCode = response.getStatusCode();\r\nString responseBody = response.getBody().asString();\r\nSystem.out.println(&quot;Response Code: &quot; + statusCode);\r\n\r\nSystem.out.println(&quot;Response Body: &quot; + responseBody);\r\n```\r\nAfter execution, received 401 Response and expected response is 201.\r\n\r\nThis same API is working with POSTMAN and received 201 response.\r\n\r\nPlease check below POSTMAN screenshots for API collection details,\r\n\r\n[enter image description here](https://i.stack.imgur.com/jMmtC.png)\r\n\r\n[enter image description here](https://i.stack.imgur.com/nsahF.png)\r\n\r\nPlease guide me how to resolve this?\r\n\r\n\r\nI tried above code but getting 403 response code.\r\nHow to resolve this issue?","title":"Regrading automating RESTASSURED POST API request with Authorization","body":"<p>Greetings!</p>\n<p>I am working on automating dummy POST API request with Authorization.</p>\n<p>Please check below details for the same,</p>\n<p>**Code:-</p>\n<pre class=\"lang-java prettyprint-override\"><code>RestAssured.baseURI=&quot;http://restapi.adequateshop.com/api/users&quot;;\nString jsonBody = &quot;{\\&quot;tourist_name\\&quot;:\\&quot;Mike\\&quot;,\\&quot;tourist_email\\&quot;:\\&quot;mxyz5676@gmail.com\\&quot;,\\&quot;tourist_location\\&quot;:\\&quot;Paris\\&quot;}&quot;;    \nString token=&quot;433tc02b-b5c1-4bd8-836a-618cdc31c492&quot;;\n    \n    \nResponse response = RestAssured.given()\n             .header(&quot;Authorization&quot;, &quot;Bearer &quot; + token)\n             .header(&quot;User-Agent&quot;, &quot;PostmanRuntime/7.32.3&quot;)\n             .header(&quot;Accept&quot;, &quot;*/*&quot;)\n             .header(&quot;Connection&quot;, &quot;keep-alive&quot;)\n             .body(jsonBody)\n            .post(&quot;http://restapi.adequateshop.com/api/users&quot;);\n\nint statusCode = response.getStatusCode();\nString responseBody = response.getBody().asString();\nSystem.out.println(&quot;Response Code: &quot; + statusCode);\n\nSystem.out.println(&quot;Response Body: &quot; + responseBody);\n</code></pre>\n<p>After execution, received 401 Response and expected response is 201.</p>\n<p>This same API is working with POSTMAN and received 201 response.</p>\n<p>Please check below POSTMAN screenshots for API collection details,</p>\n<p><a href=\"https://i.stack.imgur.com/jMmtC.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p><a href=\"https://i.stack.imgur.com/nsahF.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Please guide me how to resolve this?</p>\n<p>I tried above code but getting 403 response code.\nHow to resolve this issue?</p>\n"},{"tags":["java","android","loops","animation","vector"],"answers":[{"comments":[{"owner":{"account_id":1206729,"reputation":1020,"user_id":1923879,"accept_rate":62,"display_name":"charlag"},"score":4,"creation_date":1503490587,"post_id":45140590,"comment_id":78636106,"body_markdown":"Please note that it&#39;s API 23+","body":"Please note that it&#39;s API 23+"},{"owner":{"account_id":5940826,"reputation":2908,"user_id":4672107,"accept_rate":33,"display_name":"Carson Holzheimer"},"score":1,"creation_date":1506510062,"post_id":45140590,"comment_id":79847958,"body_markdown":"It is now available down to API 14 in support library 26.0.0","body":"It is now available down to API 14 in support library 26.0.0"},{"owner":{"account_id":30481,"reputation":697,"user_id":83148,"accept_rate":86,"display_name":"tplive"},"score":0,"creation_date":1516099944,"post_id":45140590,"comment_id":83542521,"body_markdown":"How do you invoke the support library @CarsonHolzheimer ? I have an app with min API level 21 (target 26), support library 27.x and I still get an error stating that I need min API level 23.","body":"How do you invoke the support library @CarsonHolzheimer ? I have an app with min API level 21 (target 26), support library 27.x and I still get an error stating that I need min API level 23."},{"owner":{"account_id":5940826,"reputation":2908,"user_id":4672107,"accept_rate":33,"display_name":"Carson Holzheimer"},"score":0,"creation_date":1516107948,"post_id":45140590,"comment_id":83547497,"body_markdown":"I think you&#39;ll have to add `vectorDrawables.useSupportLibrary = true` in your build.gradle `defaultConfig`?","body":"I think you&#39;ll have to add <code>vectorDrawables.useSupportLibrary = true</code> in your build.gradle <code>defaultConfig</code>?"},{"owner":{"account_id":30481,"reputation":697,"user_id":83148,"accept_rate":86,"display_name":"tplive"},"score":1,"creation_date":1516112493,"post_id":45140590,"comment_id":83550548,"body_markdown":"That seems to be the solution for supporting VectorDrawables on API &lt; 21. https://developer.android.com/guide/topics/graphics/vector-drawable-resources.html#vector-drawables-backward-solution","body":"That seems to be the solution for supporting VectorDrawables on API &lt; 21. <a href=\"https://developer.android.com/guide/topics/graphics/vector-drawable-resources.html#vector-drawables-backward-solution\" rel=\"nofollow noreferrer\">developer.android.com/guide/topics/graphics/&hellip;</a>"},{"owner":{"account_id":4999054,"reputation":547,"user_id":5137169,"display_name":"AlgoRyan"},"score":4,"creation_date":1542845785,"post_id":45140590,"comment_id":93718997,"body_markdown":"I found it necessary to call `animationView.post { avd.start() }` in `onAnimationEnd()` in order to get the loop working properly.\n\nCredit to this article for the suggestion - https://medium.com/androiddevelopers/re-animation-7869722af206","body":"I found it necessary to call <code>animationView.post { avd.start() }</code> in <code>onAnimationEnd()</code> in order to get the loop working properly.  Credit to this article for the suggestion - <a href=\"https://medium.com/androiddevelopers/re-animation-7869722af206\" rel=\"nofollow noreferrer\">medium.com/androiddevelopers/re-animation-7869722af206</a>"}],"tags":[],"owner":{"account_id":1478985,"reputation":9005,"user_id":1388737,"display_name":"Abdullah"},"comment_count":6,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1500283945,"creation_date":1500283945,"answer_id":45140590,"question_id":44711131,"body_markdown":"You can use [Animatable2.AnimationCallback][1] and start the AnimatedVectorDrawable animation again in onAnimationEnd\r\n\r\n    \r\n    drawable.registerAnimationCallback(new Animatable2.AnimationCallback() {\r\n        @Override\r\n        public void onAnimationEnd(Drawable drawable) {\r\n            avd.start();\r\n        }\r\n    });\r\n    \r\n    drawable.start();\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/graphics/drawable/Animatable2.AnimationCallback.html","title":"Android: AnimatedVectorDrawable Loop","body":"<p>You can use <a href=\"https://developer.android.com/reference/android/graphics/drawable/Animatable2.AnimationCallback.html\" rel=\"noreferrer\">Animatable2.AnimationCallback</a> and start the AnimatedVectorDrawable animation again in onAnimationEnd</p>\n\n<pre><code>drawable.registerAnimationCallback(new Animatable2.AnimationCallback() {\n    @Override\n    public void onAnimationEnd(Drawable drawable) {\n        avd.start();\n    }\n});\n\ndrawable.start();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":30481,"reputation":697,"user_id":83148,"accept_rate":86,"display_name":"tplive"},"score":3,"creation_date":1516112058,"post_id":46661804,"comment_id":83550280,"body_markdown":"I don&#39;t see how this answers the OP&#39;s question; how can you make the animation loop?","body":"I don&#39;t see how this answers the OP&#39;s question; how can you make the animation loop?"}],"tags":[],"owner":{"account_id":7865758,"reputation":327,"user_id":5944623,"display_name":"Vempati Satya Suryanarayana"},"comment_count":1,"down_vote_count":5,"up_vote_count":0,"is_accepted":false,"score":-5,"last_activity_date":1507623539,"creation_date":1507623539,"answer_id":46661804,"question_id":44711131,"body_markdown":"There are two ways in which you can use AnimatedVectorDrawable. One is by using a single file for all XML part. Second is using three separate files - one for the Vector part, second for the Animator part and the third for the AnimatedVectorDrawable part which joins the first two.\r\n\r\nIn my case I tried to use the single XML file alternative. But I had problems and lot of time was going in it. So I shifted to the second alternative i.e., three XML files alternative. It is working fine. Below I am explaining how you do it.\r\n\r\nI dearly wished to give the code. But, I am not able to post the code due to some problem with indentation which the system at (stackoverflow) has not accepted.\r\n\r\nUnder AnimatedVectorDrawable class examples of all the three files are given in the android developer site.\r\n\r\nI assume you want to do path morphing on two objects on the screen.\r\n\r\nFor path morphing on each path element in the VectorDrawable file there will be two pathData - from which to morph and to which to morph. So for two path elements in VectorDrawable file there will be 4 pathData which you can put under strings file with names like my_path_from1 my_path_to1, my_path_from2 and my_path_to2.\r\n\r\nIn vector drawable file the root element is vector under that you can place your two path elements - one for each object on the screen . Under these path elements you give attributes like strokeWidth, strokeColor pathData and a name. . This vector drawable file should be placed under res/drawable folder.\r\n\r\nThe second one is the animator file. this file should be placed under res/animator folder. You can have set as root element under which you can have one objectAnimator element in your present case. In this you give duration and pathData from which and pathData to which to do the morphing. These you give under attributes &quot;android:valueFrom&quot; and &quot; android:valueTo&quot; . You may create two animator files because &quot;from&quot; &quot;to&quot; pathData are different for the two path elements in the VectorDrawable file.\r\n\r\nIn the animated vector drawable file give two targets. Under each target the android:name is name of one of the path elements inthe VectorDrawable file. And under android:animation you give name of one of the animator files , i.e., say for first target you give android:animation =&quot;@animator/first_animator&quot;. Similarlly for the second. Now because the two targets are in the same file both targets animate simultaneously. Both animations work on two different sets of path data because the two animation files are also different.\r\n\r\nIn the java code findViewById your ImageView. If you inflated it as View then you will have to type cast it as imageview. Then getDrawable from the image view. Now if drawable instanceOf Animatable then drawable.start().\r\n\r\nHope this helps you.\r\n\r\nFor a very good understanding of these animations you may please refer to &quot;introduction to icon animation techniques&quot; This is at\r\n\r\nhttp://www.androiddesignpatterns.com/2016/11/introduction-to-icon-animation-techniques.html\r\n\r\nHope this helps you.","title":"Android: AnimatedVectorDrawable Loop","body":"<p>There are two ways in which you can use AnimatedVectorDrawable. One is by using a single file for all XML part. Second is using three separate files - one for the Vector part, second for the Animator part and the third for the AnimatedVectorDrawable part which joins the first two.</p>\n\n<p>In my case I tried to use the single XML file alternative. But I had problems and lot of time was going in it. So I shifted to the second alternative i.e., three XML files alternative. It is working fine. Below I am explaining how you do it.</p>\n\n<p>I dearly wished to give the code. But, I am not able to post the code due to some problem with indentation which the system at (stackoverflow) has not accepted.</p>\n\n<p>Under AnimatedVectorDrawable class examples of all the three files are given in the android developer site.</p>\n\n<p>I assume you want to do path morphing on two objects on the screen.</p>\n\n<p>For path morphing on each path element in the VectorDrawable file there will be two pathData - from which to morph and to which to morph. So for two path elements in VectorDrawable file there will be 4 pathData which you can put under strings file with names like my_path_from1 my_path_to1, my_path_from2 and my_path_to2.</p>\n\n<p>In vector drawable file the root element is vector under that you can place your two path elements - one for each object on the screen . Under these path elements you give attributes like strokeWidth, strokeColor pathData and a name. . This vector drawable file should be placed under res/drawable folder.</p>\n\n<p>The second one is the animator file. this file should be placed under res/animator folder. You can have set as root element under which you can have one objectAnimator element in your present case. In this you give duration and pathData from which and pathData to which to do the morphing. These you give under attributes \"android:valueFrom\" and \" android:valueTo\" . You may create two animator files because \"from\" \"to\" pathData are different for the two path elements in the VectorDrawable file.</p>\n\n<p>In the animated vector drawable file give two targets. Under each target the android:name is name of one of the path elements inthe VectorDrawable file. And under android:animation you give name of one of the animator files , i.e., say for first target you give android:animation =\"@animator/first_animator\". Similarlly for the second. Now because the two targets are in the same file both targets animate simultaneously. Both animations work on two different sets of path data because the two animation files are also different.</p>\n\n<p>In the java code findViewById your ImageView. If you inflated it as View then you will have to type cast it as imageview. Then getDrawable from the image view. Now if drawable instanceOf Animatable then drawable.start().</p>\n\n<p>Hope this helps you.</p>\n\n<p>For a very good understanding of these animations you may please refer to \"introduction to icon animation techniques\" This is at</p>\n\n<p><a href=\"http://www.androiddesignpatterns.com/2016/11/introduction-to-icon-animation-techniques.html\" rel=\"nofollow noreferrer\">http://www.androiddesignpatterns.com/2016/11/introduction-to-icon-animation-techniques.html</a></p>\n\n<p>Hope this helps you.</p>\n"},{"comments":[{"owner":{"account_id":4964944,"reputation":21405,"user_id":3994630,"accept_rate":78,"display_name":"Pablo Cegarra"},"score":1,"creation_date":1539945112,"post_id":50248536,"comment_id":92693737,"body_markdown":"This cause my animation works bad, I want to updown this answer but I cant, the good answer is at the bottom https://stackoverflow.com/a/50371439/3994630 from @Feryal Sharifzadeh","body":"This cause my animation works bad, I want to updown this answer but I cant, the good answer is at the bottom <a href=\"https://stackoverflow.com/a/50371439/3994630\">stackoverflow.com/a/50371439/3994630</a> from @Feryal Sharifzadeh"},{"owner":{"account_id":1067685,"reputation":2628,"user_id":1067763,"accept_rate":69,"display_name":"Herrbert74"},"score":3,"creation_date":1574947540,"post_id":50248536,"comment_id":104414482,"body_markdown":"This should be the accepted answer. The glitch that @PabloCegarra mentioned happens because of the overshoot interpolator. If you replace it with the linear interpolator, then the answer is not only simpler than the accepted one, but also smoother, because the restart is smoother it seems.","body":"This should be the accepted answer. The glitch that @PabloCegarra mentioned happens because of the overshoot interpolator. If you replace it with the linear interpolator, then the answer is not only simpler than the accepted one, but also smoother, because the restart is smoother it seems."},{"owner":{"account_id":3631815,"reputation":3841,"user_id":3027746,"accept_rate":81,"display_name":"Fawkes"},"score":7,"creation_date":1603199063,"post_id":50248536,"comment_id":113955853,"body_markdown":"I have tons of &lt;objectAnimator/&gt; is there any chance to apply the repeat count and repeat mode for the whole xml file ?","body":"I have tons of &lt;objectAnimator/&gt; is there any chance to apply the repeat count and repeat mode for the whole xml file ?"},{"owner":{"account_id":12881177,"reputation":879,"user_id":9316168,"display_name":"gmk57"},"score":0,"creation_date":1619166615,"post_id":50248536,"comment_id":118827754,"body_markdown":"Thanks for the idea! Unfortunately setting interpolator on the &lt;objectAnimator&gt; [is not documented](https://issuetracker.google.com/issues/186135731), but it works!","body":"Thanks for the idea! Unfortunately setting interpolator on the &lt;objectAnimator&gt; <a href=\"https://issuetracker.google.com/issues/186135731\" rel=\"nofollow noreferrer\">is not documented</a>, but it works!"}],"tags":[],"owner":{"account_id":8697487,"reputation":225,"user_id":6508436,"display_name":"Ustaad UST"},"comment_count":4,"down_vote_count":2,"up_vote_count":21,"is_accepted":false,"score":19,"last_activity_date":1525853582,"creation_date":1525853582,"answer_id":50248536,"question_id":44711131,"body_markdown":"use property in your objectAnimator\r\n\r\n    android:repeatMode=&quot;restart&quot;\r\n        android:repeatCount=&quot;infinite&quot;\r\n        \r\nyour object is like that\r\n\r\n     &lt;objectAnimator\r\n        android:propertyName=&quot;pathData&quot;\r\n        android:duration=&quot;1000&quot;\r\n        android:valueFrom=&quot;path value&quot;\r\n        android:valueTo=&quot;some value&quot;\r\n        android:valueType=&quot;pathType&quot;\r\n        android:repeatMode=&quot;restart&quot;\r\n        android:repeatCount=&quot;infinite&quot;\r\n        android:interpolator=&quot;@android:anim/overshoot_interpolator&quot;/&gt;","title":"Android: AnimatedVectorDrawable Loop","body":"<p>use property in your objectAnimator</p>\n\n<pre><code>android:repeatMode=\"restart\"\n    android:repeatCount=\"infinite\"\n</code></pre>\n\n<p>your object is like that</p>\n\n<pre><code> &lt;objectAnimator\n    android:propertyName=\"pathData\"\n    android:duration=\"1000\"\n    android:valueFrom=\"path value\"\n    android:valueTo=\"some value\"\n    android:valueType=\"pathType\"\n    android:repeatMode=\"restart\"\n    android:repeatCount=\"infinite\"\n    android:interpolator=\"@android:anim/overshoot_interpolator\"/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5768402,"reputation":334,"user_id":4552585,"display_name":"Feryal Sharifzadeh"},"comment_count":0,"down_vote_count":1,"up_vote_count":25,"is_accepted":false,"score":24,"last_activity_date":1691571867,"creation_date":1526475016,"answer_id":50371439,"question_id":44711131,"body_markdown":"You should use `AnimatedVectorDrawableCompat` instead of `AnimatedVectorDrawable` to support lower APIs, then you can also write that callback and start the animation when it ends.\r\nFinally, your code should be like this:\r\n\r\n```\r\n    val animated = AnimatedVectorDrawableCompat.create(this, R.drawable.avd_dice)\r\n        animated?.registerAnimationCallback(object : Animatable2Compat.AnimationCallback() {\r\n            override fun onAnimationEnd(drawable: Drawable?) {\r\n                animated.start()\r\n            }\r\n\r\n        })\r\n        animationView.setImageDrawable(animated)\r\n        animated?.start()\r\n```","title":"Android: AnimatedVectorDrawable Loop","body":"<p>You should use <code>AnimatedVectorDrawableCompat</code> instead of <code>AnimatedVectorDrawable</code> to support lower APIs, then you can also write that callback and start the animation when it ends.\nFinally, your code should be like this:</p>\n<pre><code>    val animated = AnimatedVectorDrawableCompat.create(this, R.drawable.avd_dice)\n        animated?.registerAnimationCallback(object : Animatable2Compat.AnimationCallback() {\n            override fun onAnimationEnd(drawable: Drawable?) {\n                animated.start()\n            }\n\n        })\n        animationView.setImageDrawable(animated)\n        animated?.start()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15164,"reputation":23711,"user_id":31751,"accept_rate":80,"display_name":"scottyab"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1559316324,"creation_date":1559316324,"answer_id":56397846,"question_id":44711131,"body_markdown":"Using @Feryal Sharifzadeh great answer as a base, here&#39;s a Kotlin ext function for setting and looping a AVD. \r\n\r\n    internal fun ImageView.applyLoopingAnimatedVectorDrawable(@DrawableRes avdResId: Int) {\r\n        val animated = AnimatedVectorDrawableCompat.create(context, avdResId)\r\n        animated?.registerAnimationCallback(object : Animatable2Compat.AnimationCallback() {\r\n            override fun onAnimationEnd(drawable: Drawable?) {\r\n                this@applyLoopingAnimatedVectorDrawable.post { animated.start() }\r\n            }\r\n        })\r\n        this.setImageDrawable(animated)\r\n        animated?.start()\r\n    }","title":"Android: AnimatedVectorDrawable Loop","body":"<p>Using @Feryal Sharifzadeh great answer as a base, here's a Kotlin ext function for setting and looping a AVD. </p>\n\n<pre><code>internal fun ImageView.applyLoopingAnimatedVectorDrawable(@DrawableRes avdResId: Int) {\n    val animated = AnimatedVectorDrawableCompat.create(context, avdResId)\n    animated?.registerAnimationCallback(object : Animatable2Compat.AnimationCallback() {\n        override fun onAnimationEnd(drawable: Drawable?) {\n            this@applyLoopingAnimatedVectorDrawable.post { animated.start() }\n        }\n    })\n    this.setImageDrawable(animated)\n    animated?.start()\n}\n</code></pre>\n"}],"owner":{"account_id":3702114,"reputation":241,"user_id":3081504,"display_name":"Calomancer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15184,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"answer_count":5,"score":24,"last_activity_date":1691571867,"creation_date":1498176490,"question_id":44711131,"body_markdown":"I&#39;m playing around with AnimatedVectorDrawables using https://shapeshifter.design/ The exported file I got is below. My research Tells me that in order to loop an animations i should add *android:repeatCount=&quot;infinite&quot;* and *android:repeatMode=&quot;restart&quot;* to the objectAnimator. \r\n\r\nAdding this to the objectAnimator only repeats one of these items out of series. **How would I loop the entire series of animations?** I want the animation to start on load and repeat.\r\n\r\nAnimation XML\r\n--------------\r\n\r\n    &lt;animated-vector\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:aapt=&quot;http://schemas.android.com/aapt&quot;&gt;\r\n        &lt;aapt:attr name=&quot;android:drawable&quot;&gt;\r\n            &lt;vector\r\n                xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n                android:width=&quot;50dp&quot;\r\n                android:height=&quot;50dp&quot;\r\n                android:viewportWidth=&quot;50&quot;\r\n                android:viewportHeight=&quot;50&quot;&gt;\r\n                &lt;path\r\n                    android:name=&quot;_x34_&quot;\r\n                    android:pathData=&quot;M 25 12.3 L 39.7 37.7 L 10.3 37.7 Z&quot;\r\n                    android:fillColor=&quot;#ffffff&quot;\r\n                    android:strokeColor=&quot;#000000&quot;\r\n                    android:strokeWidth=&quot;1&quot;\r\n                    android:strokeLineCap=&quot;round&quot;\r\n                    android:strokeLineJoin=&quot;round&quot;\r\n                    android:strokeMiterLimit=&quot;10&quot;/&gt;\r\n            &lt;/vector&gt;\r\n        &lt;/aapt:attr&gt;\r\n        &lt;target android:name=&quot;_x34_&quot;&gt;\r\n            &lt;aapt:attr name=&quot;android:animation&quot;&gt;\r\n                &lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n                    &lt;objectAnimator\r\n                        android:propertyName=&quot;pathData&quot;\r\n                        android:duration=&quot;1000&quot;\r\n                        android:valueFrom=&quot;M 25 12.3 L 39.7 37.7 L 10.3 37.7 L 17.397 25.437 Z&quot;\r\n                        android:valueTo=&quot;M 10 10 L 40 10 L 40 40 L 10 40 Z&quot;\r\n                        android:valueType=&quot;pathType&quot;\r\n                        android:interpolator=&quot;@android:anim/overshoot_interpolator&quot;/&gt;\r\n                    &lt;objectAnimator\r\n                        android:propertyName=&quot;pathData&quot;\r\n                        android:startOffset=&quot;1000&quot;\r\n                        android:duration=&quot;1000&quot;\r\n                        android:valueFrom=&quot;M 40 10 L 25.581 10 L 10 10 L 10 40 L 25.349 40 L 40 40 L 40 10&quot;\r\n                        android:valueTo=&quot;M 36.3 18.7 L 25 10.4 L 13.7 18.7 L 12.8 31.5 L 25 39.6 L 37.2 31.5 L 36.3 18.7&quot;\r\n                        android:valueType=&quot;pathType&quot;\r\n                        android:interpolator=&quot;@android:interpolator/fast_out_slow_in&quot;/&gt;\r\n                    &lt;objectAnimator\r\n                        android:propertyName=&quot;pathData&quot;\r\n                        android:startOffset=&quot;2000&quot;\r\n                        android:duration=&quot;1000&quot;\r\n                        android:valueFrom=&quot;M 36.3 18.7 L 25 10.4 L 13.7 18.7 L 12.8 31.5 L 25 39.6 L 37.2 31.5 Z&quot;\r\n                        android:valueTo=&quot;M 25 10.2 L 12.2 17.6 L 12.2 32.4 L 25 39.8 L 37.8 32.4 L 37.8 17.6 Z&quot;\r\n                        android:valueType=&quot;pathType&quot;\r\n                        android:interpolator=&quot;@android:anim/overshoot_interpolator&quot;/&gt;\r\n                    &lt;objectAnimator\r\n                        android:propertyName=&quot;pathData&quot;\r\n                        android:startOffset=&quot;3000&quot;\r\n                        android:duration=&quot;1000&quot;\r\n                        android:valueFrom=&quot;M 31.365 13.88 L 25 10.2 L 18.268 14.092 L 12.2 17.6 L 12.2 25.465 L 12.2 32.4 L 25 39.8 L 37.8 32.4 L 37.8 25.581 L 37.8 17.6 L 31.365 13.88&quot;\r\n                        android:valueTo=&quot;M 33.7 13 L 25 10.2 L 16.3 13 L 10.9 20.4 L 10.9 29.6 L 16.3 37 L 25 39.8 L 33.7 37 L 39.1 29.6 L 39.1 20.4 L 33.7 13&quot;\r\n                        android:valueType=&quot;pathType&quot;\r\n                        android:interpolator=&quot;@android:anim/decelerate_interpolator&quot;/&gt;\r\n                    &lt;objectAnimator\r\n                        android:propertyName=&quot;pathData&quot;\r\n                        android:startOffset=&quot;4000&quot;\r\n                        android:duration=&quot;1000&quot;\r\n                        android:valueFrom=&quot;M 39.1 20.4 L 33.7 13 L 25 10.2 L 16.3 13 L 10.9 20.4 L 10.9 29.6 L 16.3 37 L 25 39.8 L 33.7 37 L 39.1 29.6 L 39.1 20.4&quot;\r\n                        android:valueTo=&quot;M 39.7 20 L 32.199 16.173 L 25 12.5 L 17.885 16.13 L 10.3 20 L 10 31 L 16.994 34.031 L 25 37.5 L 32.948 34.056 L 40 31 L 39.7 20&quot;\r\n                        android:valueType=&quot;pathType&quot;\r\n                        android:interpolator=&quot;@android:interpolator/fast_out_slow_in&quot;/&gt;\r\n                    &lt;objectAnimator\r\n                        android:propertyName=&quot;pathData&quot;\r\n                        android:startOffset=&quot;5000&quot;\r\n                        android:duration=&quot;1000&quot;\r\n                        android:valueFrom=&quot;M 10.3 20 L 25 12.5 L 39.7 20 L 40 31 L 25 37.5 L 10 31 L 10.3 20&quot;\r\n                        android:valueTo=&quot;M 17.995 24.403 L 25 12.3 L 32.23 24.792 L 39.7 37.7 L 25.581 37.7 L 10.3 37.7 L 17.995 24.403&quot;\r\n                        android:valueType=&quot;pathType&quot;\r\n                        android:interpolator=&quot;@android:interpolator/fast_out_slow_in&quot;/&gt;\r\n                &lt;/set&gt;\r\n            &lt;/aapt:attr&gt;\r\n        &lt;/target&gt;\r\n    &lt;/animated-vector&gt;\r\n\r\nMy java code for implementing the Animation is as follows:\r\n----------------------------------------------------------\r\n\r\n    final ImageView animationView = (ImageView) findViewById(R.id.animationView);\r\n    final AnimatedVectorDrawable drawable = (AnimatedVectorDrawable) getDrawable(R.drawable.avd_dice);\r\n    animationView.setImageDrawable(drawable);\r\n    drawable.start();","title":"Android: AnimatedVectorDrawable Loop","body":"<p>I'm playing around with AnimatedVectorDrawables using <a href=\"https://shapeshifter.design/\" rel=\"noreferrer\">https://shapeshifter.design/</a> The exported file I got is below. My research Tells me that in order to loop an animations i should add <em>android:repeatCount=\"infinite\"</em> and <em>android:repeatMode=\"restart\"</em> to the objectAnimator. </p>\n\n<p>Adding this to the objectAnimator only repeats one of these items out of series. <strong>How would I loop the entire series of animations?</strong> I want the animation to start on load and repeat.</p>\n\n<h2>Animation XML</h2>\n\n<pre><code>&lt;animated-vector\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:aapt=\"http://schemas.android.com/aapt\"&gt;\n    &lt;aapt:attr name=\"android:drawable\"&gt;\n        &lt;vector\n            xmlns:android=\"http://schemas.android.com/apk/res/android\"\n            android:width=\"50dp\"\n            android:height=\"50dp\"\n            android:viewportWidth=\"50\"\n            android:viewportHeight=\"50\"&gt;\n            &lt;path\n                android:name=\"_x34_\"\n                android:pathData=\"M 25 12.3 L 39.7 37.7 L 10.3 37.7 Z\"\n                android:fillColor=\"#ffffff\"\n                android:strokeColor=\"#000000\"\n                android:strokeWidth=\"1\"\n                android:strokeLineCap=\"round\"\n                android:strokeLineJoin=\"round\"\n                android:strokeMiterLimit=\"10\"/&gt;\n        &lt;/vector&gt;\n    &lt;/aapt:attr&gt;\n    &lt;target android:name=\"_x34_\"&gt;\n        &lt;aapt:attr name=\"android:animation\"&gt;\n            &lt;set xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n                &lt;objectAnimator\n                    android:propertyName=\"pathData\"\n                    android:duration=\"1000\"\n                    android:valueFrom=\"M 25 12.3 L 39.7 37.7 L 10.3 37.7 L 17.397 25.437 Z\"\n                    android:valueTo=\"M 10 10 L 40 10 L 40 40 L 10 40 Z\"\n                    android:valueType=\"pathType\"\n                    android:interpolator=\"@android:anim/overshoot_interpolator\"/&gt;\n                &lt;objectAnimator\n                    android:propertyName=\"pathData\"\n                    android:startOffset=\"1000\"\n                    android:duration=\"1000\"\n                    android:valueFrom=\"M 40 10 L 25.581 10 L 10 10 L 10 40 L 25.349 40 L 40 40 L 40 10\"\n                    android:valueTo=\"M 36.3 18.7 L 25 10.4 L 13.7 18.7 L 12.8 31.5 L 25 39.6 L 37.2 31.5 L 36.3 18.7\"\n                    android:valueType=\"pathType\"\n                    android:interpolator=\"@android:interpolator/fast_out_slow_in\"/&gt;\n                &lt;objectAnimator\n                    android:propertyName=\"pathData\"\n                    android:startOffset=\"2000\"\n                    android:duration=\"1000\"\n                    android:valueFrom=\"M 36.3 18.7 L 25 10.4 L 13.7 18.7 L 12.8 31.5 L 25 39.6 L 37.2 31.5 Z\"\n                    android:valueTo=\"M 25 10.2 L 12.2 17.6 L 12.2 32.4 L 25 39.8 L 37.8 32.4 L 37.8 17.6 Z\"\n                    android:valueType=\"pathType\"\n                    android:interpolator=\"@android:anim/overshoot_interpolator\"/&gt;\n                &lt;objectAnimator\n                    android:propertyName=\"pathData\"\n                    android:startOffset=\"3000\"\n                    android:duration=\"1000\"\n                    android:valueFrom=\"M 31.365 13.88 L 25 10.2 L 18.268 14.092 L 12.2 17.6 L 12.2 25.465 L 12.2 32.4 L 25 39.8 L 37.8 32.4 L 37.8 25.581 L 37.8 17.6 L 31.365 13.88\"\n                    android:valueTo=\"M 33.7 13 L 25 10.2 L 16.3 13 L 10.9 20.4 L 10.9 29.6 L 16.3 37 L 25 39.8 L 33.7 37 L 39.1 29.6 L 39.1 20.4 L 33.7 13\"\n                    android:valueType=\"pathType\"\n                    android:interpolator=\"@android:anim/decelerate_interpolator\"/&gt;\n                &lt;objectAnimator\n                    android:propertyName=\"pathData\"\n                    android:startOffset=\"4000\"\n                    android:duration=\"1000\"\n                    android:valueFrom=\"M 39.1 20.4 L 33.7 13 L 25 10.2 L 16.3 13 L 10.9 20.4 L 10.9 29.6 L 16.3 37 L 25 39.8 L 33.7 37 L 39.1 29.6 L 39.1 20.4\"\n                    android:valueTo=\"M 39.7 20 L 32.199 16.173 L 25 12.5 L 17.885 16.13 L 10.3 20 L 10 31 L 16.994 34.031 L 25 37.5 L 32.948 34.056 L 40 31 L 39.7 20\"\n                    android:valueType=\"pathType\"\n                    android:interpolator=\"@android:interpolator/fast_out_slow_in\"/&gt;\n                &lt;objectAnimator\n                    android:propertyName=\"pathData\"\n                    android:startOffset=\"5000\"\n                    android:duration=\"1000\"\n                    android:valueFrom=\"M 10.3 20 L 25 12.5 L 39.7 20 L 40 31 L 25 37.5 L 10 31 L 10.3 20\"\n                    android:valueTo=\"M 17.995 24.403 L 25 12.3 L 32.23 24.792 L 39.7 37.7 L 25.581 37.7 L 10.3 37.7 L 17.995 24.403\"\n                    android:valueType=\"pathType\"\n                    android:interpolator=\"@android:interpolator/fast_out_slow_in\"/&gt;\n            &lt;/set&gt;\n        &lt;/aapt:attr&gt;\n    &lt;/target&gt;\n&lt;/animated-vector&gt;\n</code></pre>\n\n<h2>My java code for implementing the Animation is as follows:</h2>\n\n<pre><code>final ImageView animationView = (ImageView) findViewById(R.id.animationView);\nfinal AnimatedVectorDrawable drawable = (AnimatedVectorDrawable) getDrawable(R.drawable.avd_dice);\nanimationView.setImageDrawable(drawable);\ndrawable.start();\n</code></pre>\n"},{"tags":["java","jpa"],"comments":[{"owner":{"account_id":5624068,"reputation":1977,"user_id":4453027,"accept_rate":45,"display_name":"KJEjava48"},"score":0,"creation_date":1659683222,"post_id":28862986,"comment_id":129356855,"body_markdown":"https://stackoverflow.com/questions/73234549/javax-persistence-entitynotfoundexception-unable-to-find-entity-with-id","body":"<a href=\"https://stackoverflow.com/questions/73234549/javax-persistence-entitynotfoundexception-unable-to-find-entity-with-id\" title=\"javax persistence entitynotfoundexception unable to find entity with id\">stackoverflow.com/questions/73234549/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":4927119,"reputation":556,"user_id":3968088,"accept_rate":76,"display_name":"prabello"},"score":0,"creation_date":1425497245,"post_id":28863096,"comment_id":45991472,"body_markdown":"I&#39;m sorry, I forgot to add that the lists change, and the error I get is when he tries to update saying it didn&#39;t find the ID he persisted on save.","body":"I&#39;m sorry, I forgot to add that the lists change, and the error I get is when he tries to update saying it didn&#39;t find the ID he persisted on save."},{"owner":{"account_id":4751994,"reputation":7921,"user_id":3841803,"accept_rate":69,"display_name":"singhakash"},"score":0,"creation_date":1425497536,"post_id":28863096,"comment_id":45991631,"body_markdown":"@bacoco are you sure that the list you generate second time dint have same Bar or Cat object?","body":"@bacoco are you sure that the list you generate second time dint have same Bar or Cat object?"},{"owner":{"account_id":4927119,"reputation":556,"user_id":3968088,"accept_rate":76,"display_name":"prabello"},"score":0,"creation_date":1425499049,"post_id":28863096,"comment_id":45992488,"body_markdown":"@singhaskash yeah, the lists are new with different values, and those lists are not yet persisted, i&#39;m trying to persist then with the foo update with cascade.","body":"@singhaskash yeah, the lists are new with different values, and those lists are not yet persisted, i&#39;m trying to persist then with the foo update with cascade."},{"owner":{"account_id":4927119,"reputation":556,"user_id":3968088,"accept_rate":76,"display_name":"prabello"},"score":0,"creation_date":1425499627,"post_id":28863096,"comment_id":45992837,"body_markdown":"Yes, only on the second iteration that the update fails.\nI get a javax.persistence.EntityNotFoundException: Unable to find object with id X","body":"Yes, only on the second iteration that the update fails. I get a javax.persistence.EntityNotFoundException: Unable to find object with id X"},{"owner":{"account_id":5624068,"reputation":1977,"user_id":4453027,"accept_rate":45,"display_name":"KJEjava48"},"score":0,"creation_date":1659683212,"post_id":28863096,"comment_id":129356851,"body_markdown":"https://stackoverflow.com/questions/73234549/javax-persistence-entitynotfoundexception-unable-to-find-entity-with-id","body":"<a href=\"https://stackoverflow.com/questions/73234549/javax-persistence-entitynotfoundexception-unable-to-find-entity-with-id\" title=\"javax persistence entitynotfoundexception unable to find entity with id\">stackoverflow.com/questions/73234549/&hellip;</a>"}],"tags":[],"owner":{"account_id":4751994,"reputation":7921,"user_id":3841803,"accept_rate":69,"display_name":"singhakash"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1425497107,"creation_date":1425497107,"answer_id":28863096,"question_id":28862986,"body_markdown":"Because you are adding same lists again and again.Since you have OneToMany the second transaction says you already persisted that list.\r\n\r\nAn workaround would to change relation to ManyToMany ","title":"javax.persistence.EntityNotFoundException: Unable to find object with id X","body":"<p>Because you are adding same lists again and again.Since you have OneToMany the second transaction says you already persisted that list.</p>\n\n<p>An workaround would to change relation to ManyToMany </p>\n"},{"comments":[{"owner":{"account_id":4927119,"reputation":556,"user_id":3968088,"accept_rate":76,"display_name":"prabello"},"score":0,"creation_date":1425497485,"post_id":28863156,"comment_id":45991604,"body_markdown":"I&#39;m sorry, you mean the join transaction? I didn&#39;t fully understood","body":"I&#39;m sorry, you mean the join transaction? I didn&#39;t fully understood"},{"owner":{"account_id":2102773,"reputation":19013,"user_id":1869933,"accept_rate":88,"display_name":"Koitoer"},"score":0,"creation_date":1425497607,"post_id":28863156,"comment_id":45991667,"body_markdown":"Hibernate and JPA works together with transaction (JTA) that defines when touch the datase, it is required to flush something to the database have an active transaction before you write something in write operations, read more about it here","body":"Hibernate and JPA works together with transaction (JTA) that defines when touch the datase, it is required to flush something to the database have an active transaction before you write something in write operations, read more about it here"},{"owner":{"account_id":2102773,"reputation":19013,"user_id":1869933,"accept_rate":88,"display_name":"Koitoer"},"score":0,"creation_date":1425497709,"post_id":28863156,"comment_id":45991730,"body_markdown":"Check this example, before hibernate write something to the database, you shjould begin your TX, if you dont never will be save something in the database, and therefore the id that you are looking for will never exists.http://www.mkyong.com/hibernate/quick-start-maven-hibernate-mysql-example/","body":"Check this example, before hibernate write something to the database, you shjould begin your TX, if you dont never will be save something in the database, and therefore the id that you are looking for will never exists.<a href=\"http://www.mkyong.com/hibernate/quick-start-maven-hibernate-mysql-example/\" rel=\"nofollow noreferrer\">mkyong.com/hibernate/quick-start-maven-hibernate-mysq&zwnj;&#8203;l-example</a>"},{"owner":{"account_id":4927119,"reputation":556,"user_id":3968088,"accept_rate":76,"display_name":"prabello"},"score":0,"creation_date":1425501581,"post_id":28863156,"comment_id":45993972,"body_markdown":"I may not not have expressed myself right, the flush doesn&#39;t fail or generate an error, i tryed the em.flush() but it did not changed the result.\nAs for the transaction it is being managed by the container, thus not being necessary the begin of the transaction.\nIf i try to use .getTransaction i will get a java.lang.IllegalStateException: A JTA EntityManager cannot use getTransaction(), since JTA is managing the transaction.","body":"I may not not have expressed myself right, the flush doesn&#39;t fail or generate an error, i tryed the em.flush() but it did not changed the result. As for the transaction it is being managed by the container, thus not being necessary the begin of the transaction. If i try to use .getTransaction i will get a java.lang.IllegalStateException: A JTA EntityManager cannot use getTransaction(), since JTA is managing the transaction."},{"owner":{"account_id":4927119,"reputation":556,"user_id":3968088,"accept_rate":76,"display_name":"prabello"},"score":0,"creation_date":1425501636,"post_id":28863156,"comment_id":45994006,"body_markdown":"Just to confirm that the transaction is working, if i remove the update and the childs, everything works, all the foo&#39;s are persisted, but they don&#39;t have the cats and bars associated.","body":"Just to confirm that the transaction is working, if i remove the update and the childs, everything works, all the foo&#39;s are persisted, but they don&#39;t have the cats and bars associated."},{"owner":{"account_id":4927119,"reputation":556,"user_id":3968088,"accept_rate":76,"display_name":"prabello"},"score":0,"creation_date":1425502752,"post_id":28863156,"comment_id":45994642,"body_markdown":"The ID that the merge is using is the one generated on the save.\nfoo.id is null, after save foo.id = 1\nOn the update it tries to update using the foo.id = 1, but i get the error saying javax.persistence.EntityNotFoundException: Unable to find foo with id 1\nFoo is not yet saved on the DB, but &quot;it should at least be&quot; on the EM so when he tries to commit all the data he knows the ID&#39;s and such.","body":"The ID that the merge is using is the one generated on the save. foo.id is null, after save foo.id = 1 On the update it tries to update using the foo.id = 1, but i get the error saying javax.persistence.EntityNotFoundException: Unable to find foo with id 1 Foo is not yet saved on the DB, but &quot;it should at least be&quot; on the EM so when he tries to commit all the data he knows the ID&#39;s and such."},{"owner":{"account_id":2102773,"reputation":19013,"user_id":1869933,"accept_rate":88,"display_name":"Koitoer"},"score":0,"creation_date":1425503553,"post_id":28863156,"comment_id":45995130,"body_markdown":"persistence context is open and close as the transactions does.","body":"persistence context is open and close as the transactions does."}],"tags":[],"owner":{"account_id":2102773,"reputation":19013,"user_id":1869933,"accept_rate":88,"display_name":"Koitoer"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1425502531,"creation_date":1425497289,"answer_id":28863156,"question_id":28862986,"body_markdown":"I believe problem is with the transactions obtain the transaction and commit within the save method in your dAO.\r\n\r\n    this.manager.getTransaction().commit();\r\n\r\nIf an error comes it is because there is no active transaction it is why the flush fails. Be sure you are within a transaction, consider use `EntityTransaction` to begin , commit and end the transaction around your DAO methods.\r\n\r\nIf you don&#39;t have an active TX you won&#39;t be able to write entities to the database, and when you try to merge something the entity won&#39;t be found then this is the reason for what you are getting `EntityNotFoundException` \r\n\r\n\r\n--- UPDATE\r\n\r\nWhen you do the merge, what is the ID that the Foo object have ? I believe is not the correct one , or at least the last id inserted in the database, so what I suggest is find first and then merge.\r\n\r\nUse \r\n\r\n    &lt;T&gt; T find(java.lang.Class&lt;T&gt; entityClass,\r\n               java.lang.Object primaryKey)\r\n\r\nUsing the id, and verify the instance have the correct key","title":"javax.persistence.EntityNotFoundException: Unable to find object with id X","body":"<p>I believe problem is with the transactions obtain the transaction and commit within the save method in your dAO.</p>\n\n<pre><code>this.manager.getTransaction().commit();\n</code></pre>\n\n<p>If an error comes it is because there is no active transaction it is why the flush fails. Be sure you are within a transaction, consider use <code>EntityTransaction</code> to begin , commit and end the transaction around your DAO methods.</p>\n\n<p>If you don't have an active TX you won't be able to write entities to the database, and when you try to merge something the entity won't be found then this is the reason for what you are getting <code>EntityNotFoundException</code> </p>\n\n<p>--- UPDATE</p>\n\n<p>When you do the merge, what is the ID that the Foo object have ? I believe is not the correct one , or at least the last id inserted in the database, so what I suggest is find first and then merge.</p>\n\n<p>Use </p>\n\n<pre><code>&lt;T&gt; T find(java.lang.Class&lt;T&gt; entityClass,\n           java.lang.Object primaryKey)\n</code></pre>\n\n<p>Using the id, and verify the instance have the correct key</p>\n"},{"tags":[],"owner":{"account_id":12898503,"reputation":2596,"user_id":9328117,"display_name":"Shahid Hussain Abbasi"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691571733,"creation_date":1550417906,"answer_id":54734795,"question_id":28862986,"body_markdown":"Adding this:\r\n\r\n```\r\n@NotFound(action = NotFoundAction.IGNORE)\r\n```\r\n\r\nwith `@ManyToOne` or `@OneToOne` is helpful because `...ToOne` is `FetchType.EAGER` by default.","title":"javax.persistence.EntityNotFoundException: Unable to find object with id X","body":"<p>Adding this:</p>\n<pre><code>@NotFound(action = NotFoundAction.IGNORE)\n</code></pre>\n<p>with <code>@ManyToOne</code> or <code>@OneToOne</code> is helpful because <code>...ToOne</code> is <code>FetchType.EAGER</code> by default.</p>\n"},{"tags":[],"owner":{"account_id":12271777,"reputation":632,"user_id":8956733,"display_name":"Taraskin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621072119,"creation_date":1621072119,"answer_id":67545396,"question_id":28862986,"body_markdown":"I got similar issue. Fixed by updating `@ManyToOne` annotation to:\r\n\r\n```\r\n    @NotNull\r\n    @JoinColumn(nullable = false)\r\n    @ManyToOne(optional = false, fetch = FetchType.LAZY)\r\n    private ParentEntityClass parent;\r\n\r\n```\r\nadded: `nullable = false`, `optional = false, fetch = FetchType.LAZY` and, in addition to these - `@NotNull` (_javax.validation.constraints.NotNull_ - probably not necessary, just to prevent null-ables :) )","title":"javax.persistence.EntityNotFoundException: Unable to find object with id X","body":"<p>I got similar issue. Fixed by updating <code>@ManyToOne</code> annotation to:</p>\n<pre><code>    @NotNull\n    @JoinColumn(nullable = false)\n    @ManyToOne(optional = false, fetch = FetchType.LAZY)\n    private ParentEntityClass parent;\n\n</code></pre>\n<p>added: <code>nullable = false</code>, <code>optional = false, fetch = FetchType.LAZY</code> and, in addition to these - <code>@NotNull</code> (<em>javax.validation.constraints.NotNull</em> - probably not necessary, just to prevent null-ables :) )</p>\n"}],"owner":{"account_id":4927119,"reputation":556,"user_id":3968088,"accept_rate":76,"display_name":"prabello"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27960,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":28863096,"answer_count":4,"score":3,"last_activity_date":1691571733,"creation_date":1425496720,"question_id":28862986,"body_markdown":"I&#39;m trying to persist an object, after that i want to add 2 lists to that object and then update it (Since i can&#39;t persist the object with the lists).\r\n\r\nAll beign done inside a loop, the first iteration works just fine, from the second i get a `EntityNotFoundException` saying that the ID wasn&#39;t found to do the update.\r\n\r\n\r\n    private Foo foo;\r\n    private FooDao dao;\r\n  \r\n    for(int i = 0 ; i&lt;10 ; i++){\r\n      foo = new Foo();\r\n      foo.setVar(i);\r\n      \r\n      dao.save(foo);\r\n      \r\n      generateLists(); //creates a new list every interaction \r\n      foo.setCatList(catList);\r\n      foo.setBarList(barList);\r\n      \r\n      dao.update(foo);\r\n    }\r\n\r\nIf i remove the Lists and the update it works fine.\r\n\r\nThe object:\r\n\r\n    @Entity\r\n    public class Foo {\r\n      \r\n      @Id\r\n      @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n      @Basic(optional = false)\r\n      private Integer id;\r\n      \r\n      @Basic(optional = false)\r\n      @NotNull\r\n      private String var;\r\n      \r\n      @OneToMany(cascade = CascadeType.ALL)\r\n      private List&lt;Bar&gt; barList;\r\n      \r\n      @OneToMany(cascade = CascadeType.ALL)\r\n      private List&lt;Cat&gt; catList;\r\n      \r\n      //Getters and Setters\r\n    }\r\n\r\n\r\nThe DAO methods:\r\n\r\n    public void save(Foo foo) {\r\n      this.manager.joinTransaction();\r\n      this.manager.persist(foo);\r\n      //this.manager.flush(); Tried this, but didn&#39;t work\r\n    }\r\n  \r\n    public void update(Foo foo) {\r\n      this.manager.joinTransaction();\r\n      this.manager.merge(foo);\r\n    }\r\n\r\nThe error:\r\n\r\n    ERROR [org.jboss.as.ejb3] (EJB default - 1) javax.ejb.EJBTransactionRolledbackException: Unable to find foo with id 4\r\n    ERROR [org.jboss.as.ejb3.invocation] (EJB default - 1) JBAS014134: EJB Invocation failed on component FooDao for method public void FooDao.atualiza(Foo): javax.ejb.EJBTransactionRolledbackException: Unable to find Foo with id 4\r\n\r\nps: Using this generic approach to simplify, if needed i&#39;ll post my solution(or the mess that i call solution)","title":"javax.persistence.EntityNotFoundException: Unable to find object with id X","body":"<p>I'm trying to persist an object, after that i want to add 2 lists to that object and then update it (Since i can't persist the object with the lists).</p>\n\n<p>All beign done inside a loop, the first iteration works just fine, from the second i get a <code>EntityNotFoundException</code> saying that the ID wasn't found to do the update.</p>\n\n<pre><code>private Foo foo;\nprivate FooDao dao;\n\nfor(int i = 0 ; i&lt;10 ; i++){\n  foo = new Foo();\n  foo.setVar(i);\n\n  dao.save(foo);\n\n  generateLists(); //creates a new list every interaction \n  foo.setCatList(catList);\n  foo.setBarList(barList);\n\n  dao.update(foo);\n}\n</code></pre>\n\n<p>If i remove the Lists and the update it works fine.</p>\n\n<p>The object:</p>\n\n<pre><code>@Entity\npublic class Foo {\n\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  @Basic(optional = false)\n  private Integer id;\n\n  @Basic(optional = false)\n  @NotNull\n  private String var;\n\n  @OneToMany(cascade = CascadeType.ALL)\n  private List&lt;Bar&gt; barList;\n\n  @OneToMany(cascade = CascadeType.ALL)\n  private List&lt;Cat&gt; catList;\n\n  //Getters and Setters\n}\n</code></pre>\n\n<p>The DAO methods:</p>\n\n<pre><code>public void save(Foo foo) {\n  this.manager.joinTransaction();\n  this.manager.persist(foo);\n  //this.manager.flush(); Tried this, but didn't work\n}\n\npublic void update(Foo foo) {\n  this.manager.joinTransaction();\n  this.manager.merge(foo);\n}\n</code></pre>\n\n<p>The error:</p>\n\n<pre><code>ERROR [org.jboss.as.ejb3] (EJB default - 1) javax.ejb.EJBTransactionRolledbackException: Unable to find foo with id 4\nERROR [org.jboss.as.ejb3.invocation] (EJB default - 1) JBAS014134: EJB Invocation failed on component FooDao for method public void FooDao.atualiza(Foo): javax.ejb.EJBTransactionRolledbackException: Unable to find Foo with id 4\n</code></pre>\n\n<p>ps: Using this generic approach to simplify, if needed i'll post my solution(or the mess that i call solution)</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1691515176,"post_id":76861697,"comment_id":135501099,"body_markdown":"You can&#39;t work with files that way in Android. You need to make it an asset or raw resource and get an input stream through the AssetManager or Resources. It&#39;s explained in the documentation on Android file management.","body":"You can&#39;t work with files that way in Android. You need to make it an asset or raw resource and get an input stream through the AssetManager or Resources. It&#39;s explained in the documentation on Android file management."},{"owner":{"account_id":22432165,"reputation":1234,"user_id":16637863,"display_name":"Pawan Harariya"},"score":1,"creation_date":1691519525,"post_id":76861697,"comment_id":135501846,"body_markdown":"A better way to do this is to use a database, and with ROOM library its very easy to setup. You can store your data in tables and it will automatically be mapped to your classes. And since use only want to read the data, you can do it easily without much knowledge of SQL. Here is the resource https://developer.android.com/training/data-storage/room","body":"A better way to do this is to use a database, and with ROOM library its very easy to setup. You can store your data in tables and it will automatically be mapped to your classes. And since use only want to read the data, you can do it easily without much knowledge of SQL. Here is the resource <a href=\"https://developer.android.com/training/data-storage/room\" rel=\"nofollow noreferrer\">developer.android.com/training/data-storage/room</a>"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1691519822,"post_id":76861697,"comment_id":135501908,"body_markdown":"If Android cannot find its location then tell us at which location the file is .&quot;folder/filename.txt&quot; is no valid location.","body":"If Android cannot find its location then tell us at which location the file is .&quot;folder/filename.txt&quot; is no valid location."},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1691527662,"post_id":76861697,"comment_id":135503218,"body_markdown":"The folders you can see when you connect a phone to your PC via USB are no real file-system. The used MTP protocol translates the paths so don&#39;t use them. First learn about internal storage and SD-card/shared storage. And if you want to look at the app private storage use Android Studio device explorer.","body":"The folders you can see when you connect a phone to your PC via USB are no real file-system. The used MTP protocol translates the paths so don&#39;t use them. First learn about internal storage and SD-card/shared storage. And if you want to look at the app private storage use Android Studio device explorer."}],"owner":{"account_id":29186313,"reputation":1,"user_id":22359408,"display_name":"Enzo Tur"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691571587,"creation_date":1691513745,"question_id":76861697,"body_markdown":"I am currently working on a questionnaire project, but I need a question bank for it. I came up with the idea of writing them in a .txt file so that I can retrieve them later. \r\n\r\nHowever, my current issue is that I am unable to retrieve the data from the file because Android cannot find its location. To retrieve the data, I am using the `FileReader` and `BufferedReader` methods.\r\n\r\nHere&#39;s my code:\r\n\r\n```java\r\ntry {\r\n\tFileReader fileReader = new FileReader(&quot;folder/filename.txt&quot;);\r\n\tBufferedReader lect = new BufferedReader(fileReader);\r\n\tString ligne = lect.readLine();\r\n\r\n\twhile (ligne != null) {\r\n\t\tSystem.out.println(ligne);\r\n\t\tligne = lect.readLine();\r\n\t}\r\n\r\n\tlect.close();\r\n} catch (IOException e) {\r\n\te.printStackTrace();\r\n}\r\n```\r\n\r\nThank you in advance.\r\nBest regards.\r\n\r\nI am unable to retrieve the data from the file because Android cannot find its location.","title":"Retrieve data from a Files Android","body":"<p>I am currently working on a questionnaire project, but I need a question bank for it. I came up with the idea of writing them in a .txt file so that I can retrieve them later.</p>\n<p>However, my current issue is that I am unable to retrieve the data from the file because Android cannot find its location. To retrieve the data, I am using the <code>FileReader</code> and <code>BufferedReader</code> methods.</p>\n<p>Here's my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n    FileReader fileReader = new FileReader(&quot;folder/filename.txt&quot;);\n    BufferedReader lect = new BufferedReader(fileReader);\n    String ligne = lect.readLine();\n\n    while (ligne != null) {\n        System.out.println(ligne);\n        ligne = lect.readLine();\n    }\n\n    lect.close();\n} catch (IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n<p>Thank you in advance.\nBest regards.</p>\n<p>I am unable to retrieve the data from the file because Android cannot find its location.</p>\n"},{"tags":["java","coalesce"],"comments":[{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":3,"creation_date":1273181201,"post_id":2768054,"comment_id":2819903,"body_markdown":"You shouldn&#39;t need a function like this as you geneally wouldn&#39;t calculate &#39;c&#39; if &#39;b&#39; has the answer you want. i.e. you wouldn&#39;t build a list of possible answers only to keep one.","body":"You shouldn&#39;t need a function like this as you geneally wouldn&#39;t calculate &#39;c&#39; if &#39;b&#39; has the answer you want. i.e. you wouldn&#39;t build a list of possible answers only to keep one."},{"owner":{"account_id":123612,"reputation":48061,"user_id":318174,"accept_rate":71,"display_name":"Adam Gent"},"score":0,"creation_date":1335814904,"post_id":2768054,"comment_id":13396530,"body_markdown":"Caveat: Not all RDBMS short circuit on COALESCE. Oracle only recently started doing it.","body":"Caveat: Not all RDBMS short circuit on COALESCE. Oracle only recently started doing it."}],"answers":[{"comments":[{"owner":{"account_id":17585,"reputation":14171,"user_id":39489,"accept_rate":85,"display_name":"les2"},"score":4,"creation_date":1272999253,"post_id":2768076,"comment_id":2800875,"body_markdown":"the efficiency reasons that i mentioned above is that an array allocation will happen each time you invoke the var arg version of the method. this could be wasteful for hand-fulls of items, which i suspect will be common usage.","body":"the efficiency reasons that i mentioned above is that an array allocation will happen each time you invoke the var arg version of the method. this could be wasteful for hand-fulls of items, which i suspect will be common usage."},{"owner":{"account_id":95258,"reputation":80673,"user_id":259541,"accept_rate":81,"display_name":"froadie"},"score":0,"creation_date":1272999322,"post_id":2768076,"comment_id":2800887,"body_markdown":"Cool. Thanks. In that case I&#39;ll probably stick to the nested conditional operators in this case as it&#39;s the only time it has to be used and the user-defined method would be overkill...","body":"Cool. Thanks. In that case I&#39;ll probably stick to the nested conditional operators in this case as it&#39;s the only time it has to be used and the user-defined method would be overkill..."},{"owner":{"account_id":17585,"reputation":14171,"user_id":39489,"accept_rate":85,"display_name":"les2"},"score":8,"creation_date":1273000055,"post_id":2768076,"comment_id":2800985,"body_markdown":"I still would pull it out into a private helper method rather than leave a &quot;scary looking&quot; conditional block in the code - &quot;what does that do?&quot; that way, if you ever do need to use it again, you can use the refactoring tools in your IDE to move the method to the utility class. having the named method helps to document the intent of the code, which is always a good thing, IMO. (and the overhead of the non var-args version is probably barely measurable.)","body":"I still would pull it out into a private helper method rather than leave a &quot;scary looking&quot; conditional block in the code - &quot;what does that do?&quot; that way, if you ever do need to use it again, you can use the refactoring tools in your IDE to move the method to the utility class. having the named method helps to document the intent of the code, which is always a good thing, IMO. (and the overhead of the non var-args version is probably barely measurable.)"},{"owner":{"account_id":1497191,"reputation":9670,"user_id":1402846,"accept_rate":90,"display_name":"Pang"},"score":13,"creation_date":1356515288,"post_id":2768076,"comment_id":19394571,"body_markdown":"Watch out: In `coalesce(a, b)`, if `b` is a complex expression and `a` is not `null`, `b` is still evaluated. This is not the case for the ?: conditional operator. See [this answer](http://stackoverflow.com/a/978357/1402846).","body":"Watch out: In <code>coalesce(a, b)</code>, if <code>b</code> is a complex expression and <code>a</code> is not <code>null</code>, <code>b</code> is still evaluated. This is not the case for the ?: conditional operator. See <a href=\"http://stackoverflow.com/a/978357/1402846\">this answer</a>."},{"owner":{"account_id":29825,"reputation":5057,"user_id":80858,"accept_rate":44,"display_name":"Ivan G."},"score":1,"creation_date":1371719240,"post_id":2768076,"comment_id":24928449,"body_markdown":"this requires every argument to be precalculated before the call to coalesce, pointless for performance reasons","body":"this requires every argument to be precalculated before the call to coalesce, pointless for performance reasons"},{"owner":{"account_id":17585,"reputation":14171,"user_id":39489,"accept_rate":85,"display_name":"les2"},"score":0,"creation_date":1372116052,"post_id":2768076,"comment_id":25063608,"body_markdown":"you should not use this function with expressions as there is no lazy evaluation in java ..... yet?","body":"you should not use this function with expressions as there is no lazy evaluation in java ..... yet?"},{"owner":{"account_id":4215498,"reputation":1219,"user_id":3451846,"display_name":"Valerio Bozz"},"score":0,"creation_date":1691500556,"post_id":2768076,"comment_id":135497842,"body_markdown":"Hoping to be useful I integrated the comment from les2 in their answer itself","body":"Hoping to be useful I integrated the comment from les2 in their answer itself"}],"tags":[],"owner":{"account_id":17585,"reputation":14171,"user_id":39489,"accept_rate":85,"display_name":"les2"},"comment_count":7,"down_vote_count":5,"up_vote_count":137,"is_accepted":true,"score":132,"last_activity_date":1691571365,"creation_date":1272998851,"answer_id":2768076,"question_id":2768054,"body_markdown":"No, there isn&#39;t.\r\n\r\nThe closest you can get is:\r\n\r\n    public static &lt;T&gt; T coalesce(T ...items) {\r\n        for (T i : items) if (i != null) return i;\r\n        return null;\r\n    }\r\n\r\nFor efficient reasons, you can handle the common cases as follows:\r\n\r\n    public static &lt;T&gt; T coalesce(T a, T b) {\r\n        return a == null ? b : a;\r\n    }\r\n    public static &lt;T&gt; T coalesce(T a, T b, T c) {\r\n        return a != null ? a : (b != null ? b : c);\r\n    }\r\n    public static &lt;T&gt; T coalesce(T a, T b, T c, T d) {\r\n        return ...\r\n    }\r\n\r\nThe efficiency reason is that an array allocation will happen each time you invoke the `...` version of the method. This could be wasteful for hand-fulls of items, which I suspect will be common usage.","title":"How to get the first non-null value in Java?","body":"<p>No, there isn't.</p>\n<p>The closest you can get is:</p>\n<pre><code>public static &lt;T&gt; T coalesce(T ...items) {\n    for (T i : items) if (i != null) return i;\n    return null;\n}\n</code></pre>\n<p>For efficient reasons, you can handle the common cases as follows:</p>\n<pre><code>public static &lt;T&gt; T coalesce(T a, T b) {\n    return a == null ? b : a;\n}\npublic static &lt;T&gt; T coalesce(T a, T b, T c) {\n    return a != null ? a : (b != null ? b : c);\n}\npublic static &lt;T&gt; T coalesce(T a, T b, T c, T d) {\n    return ...\n}\n</code></pre>\n<p>The efficiency reason is that an array allocation will happen each time you invoke the <code>...</code> version of the method. This could be wasteful for hand-fulls of items, which I suspect will be common usage.</p>\n"},{"comments":[{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":2,"creation_date":1272999076,"post_id":2768080,"comment_id":2800836,"body_markdown":"God I hate generics.  I saw what yours meant right off the bat.  I had to look at @LES2&#39;s twice to figure out that he was doing the same thing (and probably &quot;better&quot;)!  +1 for clarity","body":"God I hate generics.  I saw what yours meant right off the bat.  I had to look at @LES2&#39;s twice to figure out that he was doing the same thing (and probably &quot;better&quot;)!  +1 for clarity"},{"owner":{"account_id":36018,"reputation":95920,"user_id":102441,"accept_rate":76,"display_name":"Eric"},"score":0,"creation_date":1272999958,"post_id":2768080,"comment_id":2800976,"body_markdown":"Yeah, generics are the way to go. But I&#39;m not all that familiar with the intricacies.","body":"Yeah, generics are the way to go. But I&#39;m not all that familiar with the intricacies."},{"owner":{"account_id":1207,"reputation":19992,"user_id":1605,"accept_rate":100,"display_name":"Avi"},"score":11,"creation_date":1273000418,"post_id":2768080,"comment_id":2801053,"body_markdown":"Time to learn generics :-). There is little difference between @LES2&#39;s example and this, other than T instead of Object. -1 for building a function which will force casting the return value back to Double. Also for naming a Java method in all-caps, which may be fine in SQL, but isn&#39;t good style in Java.","body":"Time to learn generics :-). There is little difference between @LES2&#39;s example and this, other than T instead of Object. -1 for building a function which will force casting the return value back to Double. Also for naming a Java method in all-caps, which may be fine in SQL, but isn&#39;t good style in Java."},{"owner":{"account_id":36018,"reputation":95920,"user_id":102441,"accept_rate":76,"display_name":"Eric"},"score":1,"creation_date":1273004316,"post_id":2768080,"comment_id":2801624,"body_markdown":"I realize that all-caps is bad practice. I was just showing the OP how to write a function under the name they requested. Agreed, the cast back to `Double` is far from ideal. I just wasn&#39;t aware that static functions could be given type parameters. I thought it was just classes.","body":"I realize that all-caps is bad practice. I was just showing the OP how to write a function under the name they requested. Agreed, the cast back to <code>Double</code> is far from ideal. I just wasn&#39;t aware that static functions could be given type parameters. I thought it was just classes."}],"tags":[],"owner":{"account_id":36018,"reputation":95920,"user_id":102441,"accept_rate":76,"display_name":"Eric"},"comment_count":4,"down_vote_count":10,"up_vote_count":8,"is_accepted":false,"score":-2,"last_activity_date":1297196336,"creation_date":1272998878,"answer_id":2768080,"question_id":2768054,"body_markdown":"    Object coalesce(Object... objects)\r\n    {\r\n    \tfor(Object o : object)\r\n    \t\tif(o != null)\r\n    \t\t\treturn o;\r\n    \treturn null;\r\n    }","title":"How to get the first non-null value in Java?","body":"<pre><code>Object coalesce(Object... objects)\n{\n    for(Object o : object)\n        if(o != null)\n            return o;\n    return null;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":30171,"reputation":40012,"user_id":82118,"accept_rate":72,"display_name":"Carl Manaster"},"score":5,"creation_date":1273000088,"post_id":2768198,"comment_id":2800992,"body_markdown":"+1 for pretty.  Not sure about the efficiency benefits over the simple loop, but if you&#39;re going to eke out any tiny efficiency this way, it might as well be pretty.","body":"+1 for pretty.  Not sure about the efficiency benefits over the simple loop, but if you&#39;re going to eke out any tiny efficiency this way, it might as well be pretty."},{"owner":{"account_id":17585,"reputation":14171,"user_id":39489,"accept_rate":85,"display_name":"les2"},"score":3,"creation_date":1273517134,"post_id":2768198,"comment_id":2843340,"body_markdown":"this way makes it much less painful and less error prone to write the overloaded variants!","body":"this way makes it much less painful and less error prone to write the overloaded variants!"},{"owner":{"account_id":67497,"reputation":2161,"user_id":197503,"display_name":"Luke"},"score":3,"creation_date":1474590008,"post_id":2768198,"comment_id":66604788,"body_markdown":"The point of the efficient version was to not waste memory allocating an array by using `varargs`. Here, you&#39;re wasting memory by creating a stack frame for each nested `coalesce()` call. Calling `coalesce(a, b, c, d, e)` creates up to 3 stack frames to calculate.","body":"The point of the efficient version was to not waste memory allocating an array by using <code>varargs</code>. Here, you&#39;re wasting memory by creating a stack frame for each nested <code>coalesce()</code> call. Calling <code>coalesce(a, b, c, d, e)</code> creates up to 3 stack frames to calculate."},{"owner":{"account_id":34247,"reputation":1973,"user_id":96617,"accept_rate":78,"display_name":"Lluis Martinez"},"score":0,"creation_date":1685618215,"post_id":2768198,"comment_id":134686802,"body_markdown":"Overloading hell","body":"Overloading hell"}],"tags":[],"owner":{"account_id":36018,"reputation":95920,"user_id":102441,"accept_rate":76,"display_name":"Eric"},"comment_count":4,"down_vote_count":2,"up_vote_count":28,"is_accepted":false,"score":26,"last_activity_date":1272999887,"creation_date":1272999887,"answer_id":2768198,"question_id":2768054,"body_markdown":"Following on from LES2&#39;s answer, you can eliminate some repetition in the efficient version, by calling the overloaded function:\r\n\r\n    public static &lt;T&gt; T coalesce(T a, T b) {\r\n        return a != null ? a : b;\r\n    }\r\n    public static &lt;T&gt; T coalesce(T a, T b, T c) {\r\n        return a != null ? a : coalesce(b,c);\r\n    }\r\n    public static &lt;T&gt; T coalesce(T a, T b, T c, T d) {\r\n        return a != null ? a : coalesce(b,c,d);\r\n    }\r\n    public static &lt;T&gt; T coalesce(T a, T b, T c, T d, T e) {\r\n        return a != null ? a : coalesce(b,c,d,e);\r\n    }","title":"How to get the first non-null value in Java?","body":"<p>Following on from LES2's answer, you can eliminate some repetition in the efficient version, by calling the overloaded function:</p>\n\n<pre><code>public static &lt;T&gt; T coalesce(T a, T b) {\n    return a != null ? a : b;\n}\npublic static &lt;T&gt; T coalesce(T a, T b, T c) {\n    return a != null ? a : coalesce(b,c);\n}\npublic static &lt;T&gt; T coalesce(T a, T b, T c, T d) {\n    return a != null ? a : coalesce(b,c,d);\n}\npublic static &lt;T&gt; T coalesce(T a, T b, T c, T d, T e) {\n    return a != null ? a : coalesce(b,c,d,e);\n}\n</code></pre>\n"},{"comments":[{"owner":{"display_name":"user1114009"},"score":58,"creation_date":1324675508,"post_id":6738545,"comment_id":10702362,"body_markdown":"Objects.firstNonNull only takes two arguments; there is no varargs equivalent in Guava. Also, it throws a NullPointerException if both args are null -- this may or may not be desirable.","body":"Objects.firstNonNull only takes two arguments; there is no varargs equivalent in Guava. Also, it throws a NullPointerException if both args are null -- this may or may not be desirable."},{"owner":{"account_id":291333,"reputation":3832,"user_id":593415,"display_name":"Anton Shchastnyi"},"score":2,"creation_date":1389363734,"post_id":6738545,"comment_id":31642701,"body_markdown":"Good comment, Jake. This NullPointerException often restricts Objects.firstNonNull usage. However, it&#39;s Guava&#39;s approach to avoid nulls at all.","body":"Good comment, Jake. This NullPointerException often restricts Objects.firstNonNull usage. However, it&#39;s Guava&#39;s approach to avoid nulls at all."},{"owner":{"account_id":297283,"reputation":604,"user_id":602716,"display_name":"davidwebster48"},"score":4,"creation_date":1424134732,"post_id":6738545,"comment_id":45418822,"body_markdown":"That method is now deprecated, and the recommended alternative is [MoreObjects.firstNonNull](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/MoreObjects.html#firstNonNull(T,%20T))","body":"That method is now deprecated, and the recommended alternative is <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/MoreObjects.html#firstNonNull(T,%20T)\" rel=\"nofollow noreferrer\">MoreObjects.firstNonNull</a>"},{"owner":{"account_id":219684,"reputation":37267,"user_id":476716,"accept_rate":77,"display_name":"OrangeDog"},"score":1,"creation_date":1465467080,"post_id":6738545,"comment_id":62917502,"body_markdown":"If NPE is undesired, then see [this answer](http://stackoverflow.com/a/18741740/476716)","body":"If NPE is undesired, then see <a href=\"http://stackoverflow.com/a/18741740/476716\">this answer</a>"}],"tags":[],"owner":{"account_id":59255,"reputation":5143,"user_id":177324,"accept_rate":100,"display_name":"Dave"},"comment_count":4,"down_vote_count":8,"up_vote_count":75,"is_accepted":false,"score":67,"last_activity_date":1520953269,"creation_date":1311018515,"answer_id":6738545,"question_id":2768054,"body_markdown":"If there are only two variables to check and you&#39;re using Guava, you can use [MoreObjects.firstNonNull(T first, T second)][1].\r\n\r\n\r\n  [1]: https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/base/MoreObjects.html#firstNonNull-T-T-","title":"How to get the first non-null value in Java?","body":"<p>If there are only two variables to check and you're using Guava, you can use <a href=\"https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/base/MoreObjects.html#firstNonNull-T-T-\" rel=\"noreferrer\">MoreObjects.firstNonNull(T first, T second)</a>.</p>\n"},{"comments":[{"owner":{"account_id":100622,"reputation":3010,"user_id":271149,"accept_rate":90,"display_name":"quantum"},"score":1,"creation_date":1412890904,"post_id":9352051,"comment_id":41248194,"body_markdown":"Nice article - it would be nice to have it English, though.","body":"Nice article - it would be nice to have it English, though."},{"owner":{"account_id":234267,"reputation":2509,"user_id":500312,"accept_rate":65,"display_name":"HairOfTheDog"},"score":1,"creation_date":1431646139,"post_id":9352051,"comment_id":48598762,"body_markdown":"There&#39;s something about that blog page that doesn&#39;t work with Google Translate. :-(","body":"There&#39;s something about that blog page that doesn&#39;t work with Google Translate. :-("}],"tags":[],"owner":{"account_id":694222,"reputation":7707,"user_id":2512257,"display_name":"Franta"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1409664280,"creation_date":1329677124,"answer_id":9352051,"question_id":2768054,"body_markdown":"This situation calls for some preprocessor. Because if you write a function (static method) which picks the first not null value, it evaluates all items. It is problem if some items are method calls (may be time expensive method calls). And this methods are called even if any item before them is not null.\r\n\r\nSome function like this\r\n\r\n    public static &lt;T&gt; T coalesce(T ...items) …\r\n\r\nshould be used but before compiling into byte code there should be a preprocessor which find usages of this „coalesce function“ and replaces it with construction like\r\n\r\n    a != null ? a : (b != null ? b : c)\r\n\r\n\r\n**Update 2014-09-02:**\r\n\r\nThanks to Java 8 and Lambdas there is possibility to have true coalesce in Java! Including the crucial feature: particular expressions are evaluated only when needed – if earlier one is not null, then following ones are not evaluated (methods are not called, computation or disk/network operations are not done).\r\n\r\nI wrote an article about it [Java 8: coalesce – hled&#225;me neNULLov&#233; hodnoty][1] – (written in Czech, but I hope that code examples are understandable for everyone).\r\n\r\n\r\n  [1]: https://blog.frantovo.cz/c/311/Java%208%3A%20coalesce%20%E2%80%93%20hled%C3%A1me%20neNULLov%C3%A9%20hodnoty","title":"How to get the first non-null value in Java?","body":"<p>This situation calls for some preprocessor. Because if you write a function (static method) which picks the first not null value, it evaluates all items. It is problem if some items are method calls (may be time expensive method calls). And this methods are called even if any item before them is not null.</p>\n\n<p>Some function like this</p>\n\n<pre><code>public static &lt;T&gt; T coalesce(T ...items) …\n</code></pre>\n\n<p>should be used but before compiling into byte code there should be a preprocessor which find usages of this „coalesce function“ and replaces it with construction like</p>\n\n<pre><code>a != null ? a : (b != null ? b : c)\n</code></pre>\n\n<p><strong>Update 2014-09-02:</strong></p>\n\n<p>Thanks to Java 8 and Lambdas there is possibility to have true coalesce in Java! Including the crucial feature: particular expressions are evaluated only when needed – if earlier one is not null, then following ones are not evaluated (methods are not called, computation or disk/network operations are not done).</p>\n\n<p>I wrote an article about it <a href=\"https://blog.frantovo.cz/c/311/Java%208%3A%20coalesce%20%E2%80%93%20hled%C3%A1me%20neNULLov%C3%A9%20hodnoty\" rel=\"noreferrer\">Java 8: coalesce – hledáme neNULLové hodnoty</a> – (written in Czech, but I hope that code examples are understandable for everyone).</p>\n"},{"comments":[{"owner":{"account_id":164095,"reputation":873,"user_id":386646,"display_name":"Michal Čizmazia"},"score":1,"creation_date":1377659738,"post_id":17851702,"comment_id":27162550,"body_markdown":"Hey, it does: `java.lang.NullPointerException: use Optional.orNull() instead of Optional.or(null)`","body":"Hey, it does: <code>java.lang.NullPointerException: use Optional.orNull() instead of Optional.or(null)</code>"},{"owner":{"account_id":164095,"reputation":873,"user_id":386646,"display_name":"Michal Čizmazia"},"score":1,"creation_date":1377660530,"post_id":17851702,"comment_id":27162708,"body_markdown":"This does the trick: `Optional.fromNullable(a).or(Optional.fromNullable(b)).orNull()`","body":"This does the trick: <code>Optional.fromNullable(a).or(Optional.fromNullable(b)).orNull&zwnj;&#8203;()</code>"}],"tags":[],"owner":{"account_id":25799,"reputation":2291,"user_id":66611,"accept_rate":83,"display_name":"Jamol"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1386683377,"creation_date":1374737461,"answer_id":17851702,"question_id":2768054,"body_markdown":"With Guava you can do:\r\n\r\n    Optional.fromNullable(a).or(b);\r\n\r\nwhich doesn&#39;t throw NPE if both `a` and `b` are `null`.\r\n\r\nEDIT: I was wrong, it does throw NPE. The correct way as commented by **Michal Čizmazia** is:\r\n\r\n    Optional.fromNullable(a).or(Optional.fromNullable(b)).orNull();\r\n","title":"How to get the first non-null value in Java?","body":"<p>With Guava you can do:</p>\n\n<pre><code>Optional.fromNullable(a).or(b);\n</code></pre>\n\n<p>which doesn't throw NPE if both <code>a</code> and <code>b</code> are <code>null</code>.</p>\n\n<p>EDIT: I was wrong, it does throw NPE. The correct way as commented by <strong>Michal Čizmazia</strong> is:</p>\n\n<pre><code>Optional.fromNullable(a).or(Optional.fromNullable(b)).orNull();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1421652,"reputation":571,"user_id":1346212,"display_name":"kodlan"},"score":3,"creation_date":1596043387,"post_id":18741740,"comment_id":111686017,"body_markdown":"I was looking for the same but for strings, and found out that there are SpringUtils.firstNonBlank(T...) and SpringUtils.firstNonBlank(T...) methods.","body":"I was looking for the same but for strings, and found out that there are SpringUtils.firstNonBlank(T...) and SpringUtils.firstNonBlank(T...) methods."},{"owner":{"account_id":297814,"reputation":25324,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"score":2,"creation_date":1604998316,"post_id":18741740,"comment_id":114511269,"body_markdown":"Note that both methods listed here introduce performance implications due to extra objects allocation, unlike simple ternary operator or Guava&#39;s `MoreObjects.firstNonNull`.","body":"Note that both methods listed here introduce performance implications due to extra objects allocation, unlike simple ternary operator or Guava&#39;s <code>MoreObjects.firstNonNull</code>."},{"owner":{"account_id":4507037,"reputation":464,"user_id":3664106,"display_name":"pyropunk51"},"score":1,"creation_date":1625727772,"post_id":18741740,"comment_id":120704717,"body_markdown":"`Stream.of(null,&quot;a&quot;)` will not work since the `of` function is annotated with `@NonNull`","body":"<code>Stream.of(null,&quot;a&quot;)</code> will not work since the <code>of</code> function is annotated with <code>@NonNull</code>"},{"owner":{"account_id":3200251,"reputation":1508,"user_id":2702433,"display_name":"Volker Seibt"},"score":0,"creation_date":1679923326,"post_id":18741740,"comment_id":133802798,"body_markdown":"@pyropunk51 it&#39;s only `Stream.of(null)` which throws a null pointer exception. With more than one arguments any argument can be `null`, at least since Java 11.","body":"@pyropunk51 it&#39;s only <code>Stream.of(null)</code> which throws a null pointer exception. With more than one arguments any argument can be <code>null</code>, at least since Java 11."}],"tags":[],"owner":{"account_id":1981205,"reputation":3263,"user_id":1777790,"display_name":"Andrzej Polis"},"comment_count":4,"down_vote_count":2,"up_vote_count":296,"is_accepted":false,"score":294,"last_activity_date":1515757489,"creation_date":1378903907,"answer_id":18741740,"question_id":2768054,"body_markdown":"Apache Commons Lang 3\r\n\r\n[`ObjectUtils.firstNonNull(T...)`][1]\r\n\r\nJava 8 Stream\r\n\r\n[`Stream.of(T...).filter(Objects::nonNull).findFirst().orElse(null)`][2]\r\n\r\n  [1]: http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/ObjectUtils.html#firstNonNull%28T...%29\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html","title":"How to get the first non-null value in Java?","body":"<p>Apache Commons Lang 3</p>\n\n<p><a href=\"http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/ObjectUtils.html#firstNonNull%28T...%29\" rel=\"noreferrer\"><code>ObjectUtils.firstNonNull(T...)</code></a></p>\n\n<p>Java 8 Stream</p>\n\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html\" rel=\"noreferrer\"><code>Stream.of(T...).filter(Objects::nonNull).findFirst().orElse(null)</code></a></p>\n"},{"comments":[{"owner":{"account_id":1344592,"reputation":1139,"user_id":1285585,"accept_rate":85,"display_name":"Stephan Richter"},"score":0,"creation_date":1620120945,"post_id":28306286,"comment_id":119100557,"body_markdown":"Possible without the use of optional:\n`Object default = &quot;some value&quot;; Object res = ((res = getSomeNullable()) != null) ? res : default;\n`","body":"Possible without the use of optional: <code>Object default = &quot;some value&quot;; Object res = ((res = getSomeNullable()) != null) ? res : default; </code>"}],"tags":[],"owner":{"account_id":165129,"reputation":1388,"user_id":388317,"accept_rate":0,"display_name":"Christian Ullenboom"},"comment_count":1,"down_vote_count":0,"up_vote_count":69,"is_accepted":false,"score":69,"last_activity_date":1458148572,"creation_date":1422988599,"answer_id":28306286,"question_id":2768054,"body_markdown":"If there are only two references to test and you are using Java 8, you could use\r\n\r\n    Object o = null;\r\n    Object p = &quot;p&quot;;\r\n    Object r = Optional.ofNullable( o ).orElse( p );\r\n    System.out.println( r );   // p\r\n\r\nIf you import static Optional the expression is not too bad.\r\n\r\nUnfortunately your case with &quot;several variables&quot; is not possible with an Optional-method. Instead you could use:\r\n\r\n    Object o = null;\r\n    Object p = null;\r\n    Object q = &quot;p&quot;;\r\n\r\n    Optional&lt;Object&gt; r = Stream.of( o, p, q ).filter( Objects::nonNull ).findFirst();\r\n    System.out.println( r.orElse(null) );   // p\r\n","title":"How to get the first non-null value in Java?","body":"<p>If there are only two references to test and you are using Java 8, you could use</p>\n\n<pre><code>Object o = null;\nObject p = \"p\";\nObject r = Optional.ofNullable( o ).orElse( p );\nSystem.out.println( r );   // p\n</code></pre>\n\n<p>If you import static Optional the expression is not too bad.</p>\n\n<p>Unfortunately your case with \"several variables\" is not possible with an Optional-method. Instead you could use:</p>\n\n<pre><code>Object o = null;\nObject p = null;\nObject q = \"p\";\n\nOptional&lt;Object&gt; r = Stream.of( o, p, q ).filter( Objects::nonNull ).findFirst();\nSystem.out.println( r.orElse(null) );   // p\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2997947,"reputation":7676,"user_id":2544089,"display_name":"Mario Rossi"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1426697564,"creation_date":1426697137,"answer_id":29127853,"question_id":2768054,"body_markdown":"Just for completness, the &quot;several variables&quot; case is indeed possible, though not elegant at all.  For example, for variables `o`, `p`, and `q`:\r\n\r\n    Optional.ofNullable( o ).orElseGet(()-&gt; Optional.ofNullable( p ).orElseGet(()-&gt; q ) )\r\n\r\nPlease note the use of `orElseGet()` attending to the case that `o`, `p`, and `q` are not variables but expressions either expensive or with undesired side-effects.\r\n\r\nIn the most general case `coalesce(e[1],e[2],e[3],...,e[N])`\r\n\r\n    coalesce-expression(i) ==  e[i]  when i = N\r\n    coalesce-expression(i) ==  Optional.ofNullable( e[i] ).orElseGet(()-&gt; coalesce-expression(i+1) )  when i &lt; N\r\n\r\nThis can generate expressions excessively long.  However, if we are trying to move to a world without `null`, then `v[i]` are most probably already of type `Optional&lt;String&gt;`, as opposed to simply `String`.  In this case, \r\n\r\n    result= o.orElse(p.orElse(q.get())) ;\r\n\r\nor in the case of expressions:\r\n\r\n    result= o.orElseGet(()-&gt; p.orElseGet(()-&gt; q.get() ) ) ;\r\n\r\nFurthermore, if you are also moving to a functional-declarative style, `o`, `p`, and `q` should be of type `Supplier&lt;String&gt;` like in:\r\n\r\n    Supplier&lt;String&gt; q= ()-&gt; q-expr ;\r\n    Supplier&lt;String&gt; p= ()-&gt; Optional.ofNullable(p-expr).orElseGet( q ) ;\r\n    Supplier&lt;String&gt; o= ()-&gt; Optional.ofNullable(o-expr).orElseGet( p ) ;\r\n\r\nAnd then the whole `coalesce` reduces simply to `o.get()`.\r\n\r\nFor a more concrete example:\r\n\r\n    Supplier&lt;Integer&gt; hardcodedDefaultAge= ()-&gt; 99 ;\r\n    Supplier&lt;Integer&gt; defaultAge= ()-&gt; defaultAgeFromDatabase().orElseGet( hardcodedDefaultAge ) ;\r\n    Supplier&lt;Integer&gt; ageInStore= ()-&gt; ageFromDatabase(memberId).orElseGet( defaultAge ) ;\r\n    Supplier&lt;Integer&gt; effectiveAge= ()-&gt; ageFromInput().orElseGet( ageInStore ) ;\r\n\r\n`defaultAgeFromDatabase()`, `ageFromDatabase()`, and `ageFromInput()` would already return `Optional&lt;Integer&gt;`, naturally.\r\n\r\nAnd then the `coalesce` becomes `effectiveAge.get()` or simply `effectiveAge` if we are happy with a `Supplier&lt;Integer&gt;`.\r\n\r\nIMHO, with Java 8 we will see more and more code structured like this, as it&#39;s extremely self-explainatory and efficient at the same time, especially in more complex cases.\r\n\r\nI do miss a class `Lazy&lt;T&gt;` that invokes a `Supplier&lt;T&gt;` only one time, but lazily, as well as consistency in the definition of `Optional&lt;T&gt;` (i.e. `Optional&lt;T&gt;`-`Optional&lt;T&gt;` operators, or even `Supplier&lt;Optional&lt;T&gt;&gt;`).\r\n","title":"How to get the first non-null value in Java?","body":"<p>Just for completness, the \"several variables\" case is indeed possible, though not elegant at all.  For example, for variables <code>o</code>, <code>p</code>, and <code>q</code>:</p>\n\n<pre><code>Optional.ofNullable( o ).orElseGet(()-&gt; Optional.ofNullable( p ).orElseGet(()-&gt; q ) )\n</code></pre>\n\n<p>Please note the use of <code>orElseGet()</code> attending to the case that <code>o</code>, <code>p</code>, and <code>q</code> are not variables but expressions either expensive or with undesired side-effects.</p>\n\n<p>In the most general case <code>coalesce(e[1],e[2],e[3],...,e[N])</code></p>\n\n<pre><code>coalesce-expression(i) ==  e[i]  when i = N\ncoalesce-expression(i) ==  Optional.ofNullable( e[i] ).orElseGet(()-&gt; coalesce-expression(i+1) )  when i &lt; N\n</code></pre>\n\n<p>This can generate expressions excessively long.  However, if we are trying to move to a world without <code>null</code>, then <code>v[i]</code> are most probably already of type <code>Optional&lt;String&gt;</code>, as opposed to simply <code>String</code>.  In this case, </p>\n\n<pre><code>result= o.orElse(p.orElse(q.get())) ;\n</code></pre>\n\n<p>or in the case of expressions:</p>\n\n<pre><code>result= o.orElseGet(()-&gt; p.orElseGet(()-&gt; q.get() ) ) ;\n</code></pre>\n\n<p>Furthermore, if you are also moving to a functional-declarative style, <code>o</code>, <code>p</code>, and <code>q</code> should be of type <code>Supplier&lt;String&gt;</code> like in:</p>\n\n<pre><code>Supplier&lt;String&gt; q= ()-&gt; q-expr ;\nSupplier&lt;String&gt; p= ()-&gt; Optional.ofNullable(p-expr).orElseGet( q ) ;\nSupplier&lt;String&gt; o= ()-&gt; Optional.ofNullable(o-expr).orElseGet( p ) ;\n</code></pre>\n\n<p>And then the whole <code>coalesce</code> reduces simply to <code>o.get()</code>.</p>\n\n<p>For a more concrete example:</p>\n\n<pre><code>Supplier&lt;Integer&gt; hardcodedDefaultAge= ()-&gt; 99 ;\nSupplier&lt;Integer&gt; defaultAge= ()-&gt; defaultAgeFromDatabase().orElseGet( hardcodedDefaultAge ) ;\nSupplier&lt;Integer&gt; ageInStore= ()-&gt; ageFromDatabase(memberId).orElseGet( defaultAge ) ;\nSupplier&lt;Integer&gt; effectiveAge= ()-&gt; ageFromInput().orElseGet( ageInStore ) ;\n</code></pre>\n\n<p><code>defaultAgeFromDatabase()</code>, <code>ageFromDatabase()</code>, and <code>ageFromInput()</code> would already return <code>Optional&lt;Integer&gt;</code>, naturally.</p>\n\n<p>And then the <code>coalesce</code> becomes <code>effectiveAge.get()</code> or simply <code>effectiveAge</code> if we are happy with a <code>Supplier&lt;Integer&gt;</code>.</p>\n\n<p>IMHO, with Java 8 we will see more and more code structured like this, as it's extremely self-explainatory and efficient at the same time, especially in more complex cases.</p>\n\n<p>I do miss a class <code>Lazy&lt;T&gt;</code> that invokes a <code>Supplier&lt;T&gt;</code> only one time, but lazily, as well as consistency in the definition of <code>Optional&lt;T&gt;</code> (i.e. <code>Optional&lt;T&gt;</code>-<code>Optional&lt;T&gt;</code> operators, or even <code>Supplier&lt;Optional&lt;T&gt;&gt;</code>).</p>\n"},{"tags":[],"owner":{"account_id":2116449,"reputation":86,"user_id":3419474,"display_name":"Lonnie"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1481863723,"creation_date":1481862535,"answer_id":41177303,"question_id":2768054,"body_markdown":"How about:\r\n\r\n    firstNonNull = FluentIterable.from(\r\n        Lists.newArrayList( a, b, c, ... ) )\r\n            .firstMatch( Predicates.notNull() )\r\n                .or( someKnownNonNullDefault );\r\n\r\nJava ArrayList conveniently allows null entries and this expression is consistent regardless of the number of objects to be considered. (In this form, all the objects considered need to be of the same type.)","title":"How to get the first non-null value in Java?","body":"<p>How about:</p>\n\n<pre><code>firstNonNull = FluentIterable.from(\n    Lists.newArrayList( a, b, c, ... ) )\n        .firstMatch( Predicates.notNull() )\n            .or( someKnownNonNullDefault );\n</code></pre>\n\n<p>Java ArrayList conveniently allows null entries and this expression is consistent regardless of the number of objects to be considered. (In this form, all the objects considered need to be of the same type.)</p>\n"},{"tags":[],"owner":{"account_id":7095188,"reputation":612,"user_id":5429049,"accept_rate":80,"display_name":"Lucas Le&#243;n"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1521650955,"creation_date":1515605320,"answer_id":48192967,"question_id":2768054,"body_markdown":"You can try this:\r\n\r\n    public static &lt;T&gt; T coalesce(T... t) {\r\n        return Stream.of(t).filter(Objects::nonNull).findFirst().orElse(null);\r\n    }\r\n\r\nBased on [this][1] response\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/28306286/5429049","title":"How to get the first non-null value in Java?","body":"<p>You can try this:</p>\n\n<pre><code>public static &lt;T&gt; T coalesce(T... t) {\n    return Stream.of(t).filter(Objects::nonNull).findFirst().orElse(null);\n}\n</code></pre>\n\n<p>Based on <a href=\"https://stackoverflow.com/a/28306286/5429049\">this</a> response</p>\n"},{"comments":[{"owner":{"account_id":1807152,"reputation":1059,"user_id":1644036,"accept_rate":100,"display_name":"Inego"},"score":0,"creation_date":1568970857,"post_id":49937215,"comment_id":102453036,"body_markdown":"Why wrap the first argument in a `Supplier` if it will be inspected anyway? For the sake of uniformity?","body":"Why wrap the first argument in a <code>Supplier</code> if it will be inspected anyway? For the sake of uniformity?"},{"owner":{"account_id":968743,"reputation":3452,"user_id":991710,"accept_rate":82,"display_name":"filpa"},"score":1,"creation_date":1637227891,"post_id":49937215,"comment_id":123771493,"body_markdown":"This might be a bit old, but for completeness&#39; sake: the approach by @Triqui does not necessarily evaluate all the parameters passed to `coalesce` - that&#39;s the point of the parameters being of type `Supplier`. They are evaluated only when `get()` is called - if the first parameter matches the criteria, the rest need not be evaluated.","body":"This might be a bit old, but for completeness&#39; sake: the approach by @Triqui does not necessarily evaluate all the parameters passed to <code>coalesce</code> - that&#39;s the point of the parameters being of type <code>Supplier</code>. They are evaluated only when <code>get()</code> is called - if the first parameter matches the criteria, the rest need not be evaluated."}],"tags":[],"owner":{"account_id":13405710,"reputation":51,"user_id":9673805,"display_name":"Triqui"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1524222530,"creation_date":1524212486,"answer_id":49937215,"question_id":2768054,"body_markdown":"How about using suppliers when you want to avoid evaluating some expensive method? \r\n\r\nLike this:\r\n\r\n    public static &lt;T&gt; T coalesce(Supplier&lt;T&gt;... items) {\r\n\tfor (Supplier&lt;T&gt; item : items) {\r\n\t\tT value = item.get();\r\n\t\tif (value != null) {\r\n\t\t\treturn value;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\nAnd then using it like this:\r\n\r\n    Double amount = coalesce(order::firstAmount, order::secondAmount, order::thirdAmount)\r\n\r\nYou can also use overloaded methods for the calls with two, three or four arguments.\r\n\r\nIn addition, you could also use streams with something like this:\r\n\r\n\tpublic static &lt;T&gt; T coalesce2(Supplier&lt;T&gt;... s) {\r\n\t\treturn Arrays.stream(s).map(Supplier::get).filter(Objects::nonNull).findFirst().orElse(null);\r\n\t}\r\n\r\n\r\n","title":"How to get the first non-null value in Java?","body":"<p>How about using suppliers when you want to avoid evaluating some expensive method? </p>\n\n<p>Like this:</p>\n\n<pre><code>public static &lt;T&gt; T coalesce(Supplier&lt;T&gt;... items) {\nfor (Supplier&lt;T&gt; item : items) {\n    T value = item.get();\n    if (value != null) {\n        return value;\n    }\n    return null;\n}\n</code></pre>\n\n<p>And then using it like this:</p>\n\n<pre><code>Double amount = coalesce(order::firstAmount, order::secondAmount, order::thirdAmount)\n</code></pre>\n\n<p>You can also use overloaded methods for the calls with two, three or four arguments.</p>\n\n<p>In addition, you could also use streams with something like this:</p>\n\n<pre><code>public static &lt;T&gt; T coalesce2(Supplier&lt;T&gt;... s) {\n    return Arrays.stream(s).map(Supplier::get).filter(Objects::nonNull).findFirst().orElse(null);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4182819,"reputation":2339,"user_id":3427299,"accept_rate":78,"display_name":"Mattwmaster58"},"score":0,"creation_date":1648813132,"post_id":70389797,"comment_id":126725260,"body_markdown":"Requires Android 30","body":"Requires Android 30"}],"tags":[],"owner":{"account_id":23672702,"reputation":154,"user_id":17699256,"display_name":"Mert &#220;lkg&#252;n"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1639726558,"creation_date":1639726558,"answer_id":70389797,"question_id":2768054,"body_markdown":"Since Java 9 there is builtin `Objects.requireNonNullElse` method for two parameter coalesce. That was the most useful for me.","title":"How to get the first non-null value in Java?","body":"<p>Since Java 9 there is builtin <code>Objects.requireNonNullElse</code> method for two parameter coalesce. That was the most useful for me.</p>\n"}],"owner":{"account_id":95258,"reputation":80673,"user_id":259541,"accept_rate":81,"display_name":"froadie"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":158339,"favorite_count":0,"down_vote_count":0,"up_vote_count":201,"accepted_answer_id":2768076,"answer_count":13,"score":201,"last_activity_date":1691571365,"creation_date":1272998653,"question_id":2768054,"body_markdown":"Is there a Java equivalent of SQL&#39;s `COALESCE` function? That is, is there any way to return the first non-null value of several variables?\r\n\r\ne.g.\r\n\r\n    Double a = null;\r\n    Double b = 4.4;\r\n    Double c = null;\r\n\r\nI want to somehow have a statement that will return the first non-null value of `a`, `b`, and `c` - in this case, it would return `b`, or 4.4. (Something like the sql method - return `COALESCE(a,b,c)`). I know that I can do it explicitly with something like:\r\n\r\n    return a != null ? a : (b != null ? b : c)\r\n\r\nBut I wondered if there was any built-in, accepted function to accomplish this.","title":"How to get the first non-null value in Java?","body":"<p>Is there a Java equivalent of SQL's <code>COALESCE</code> function? That is, is there any way to return the first non-null value of several variables?</p>\n\n<p>e.g.</p>\n\n<pre><code>Double a = null;\nDouble b = 4.4;\nDouble c = null;\n</code></pre>\n\n<p>I want to somehow have a statement that will return the first non-null value of <code>a</code>, <code>b</code>, and <code>c</code> - in this case, it would return <code>b</code>, or 4.4. (Something like the sql method - return <code>COALESCE(a,b,c)</code>). I know that I can do it explicitly with something like:</p>\n\n<pre><code>return a != null ? a : (b != null ? b : c)\n</code></pre>\n\n<p>But I wondered if there was any built-in, accepted function to accomplish this.</p>\n"},{"tags":["java","apache-spark","parquet"],"owner":{"account_id":4511977,"reputation":3,"user_id":3667812,"display_name":"truong quoc tuan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":207,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691571057,"creation_date":1691568034,"question_id":76865719,"body_markdown":"I try write parquet file use Parquet Modular Encryption\r\nhttps://github.com/apache/parquet-format/blob/master/Encryption.md\r\nI use spark java to write file with code:\r\n\r\n```\r\nsc.sparkContext().hadoopConfiguration().set(&quot;parquet.crypto.factory.class&quot;,\r\n                &quot;org.apache.parquet.crypto.keytools.PropertiesDrivenCryptoFactory&quot;);\r\n\r\n        sc.sparkContext().hadoopConfiguration().set(&quot;parquet.encryption.key.material.store.internally&quot;, &quot;false&quot;);\r\n\r\n        sc.sparkContext().hadoopConfiguration().set(&quot;parquet.encryption.kms.client.class&quot;,\r\n                &quot;org.apache.parquet.crypto.keytools.mocks.InMemoryKMS&quot;);\r\n        // Explicit master keys (base64 encoded) - required only for mock InMemoryKMS\r\n        sc.sparkContext().hadoopConfiguration().set(&quot;parquet.encryption.key.list&quot;,\r\n                &quot;keyA:AAECAwQFBgcICQoLDA0ODw==,keyB:AAECAAECAAECAAECAAECAA==,keyC:AAECAwPFBgcICQoLDA0ODw==,keyD:AAECAwPFdgcICQoLDA0ODw==&quot;);\r\n\r\n        String csvPath = &quot;/home/tuantq2/Downloads/stat/perstat/stats_data_read_csv9.csv&quot;;\r\n\r\n        Dataset&lt;Row&gt; csvData = sc.read()\r\n                .format(&quot;csv&quot;)\r\n                .option(&quot;header&quot;, &quot;true&quot;) // Nếu c&#243; header trong file CSV\r\n                .option(&quot;inferSchema&quot;, &quot;true&quot;) // Tự động suy đo&#225;n kiểu dữ liệu của cột\r\n                .load(csvPath);\r\n        csvData.show();\r\n        csvData.write().\r\n                option(&quot;parquet.encryption.column.keys&quot;, &quot;keyA:team&quot;).\r\n                option(&quot;parquet.encryption.footer.key&quot;, &quot;keyB&quot;).\r\n                //                option(&quot;parquet.encryption.column.keys&quot;, &quot;keyC:path&quot;).\r\n                mode(SaveMode.Overwrite).\r\n                parquet(&quot;hdfs://127.0.0.1:9000/data/tuantq2/parquet_sec/teampath.parquet.encrypted&quot;);\r\n```\r\nthen when I try read:\r\n\r\n```\r\nsc.sparkContext().hadoopConfiguration().set(&quot;parquet.encryption.key.material.store.internally&quot;,\r\n                &quot;false&quot;);\r\n\r\n        sc.sparkContext().hadoopConfiguration().set(&quot;parquet.crypto.factory.class&quot;,\r\n                &quot;org.apache.parquet.crypto.keytools.PropertiesDrivenCryptoFactory&quot;);\r\n\r\n        sc.sparkContext().hadoopConfiguration().set(&quot;parquet.encryption.kms.client.class&quot;,\r\n                &quot;org.apache.parquet.crypto.keytools.mocks.InMemoryKMS&quot;);\r\n        // Explicit master keys (base64 encoded) - required only for mock InMemoryKMS\r\n        sc.sparkContext().hadoopConfiguration().set(&quot;parquet.encryption.key.list&quot;,\r\n                &quot;keyA:AAECAwQFBgcICQoLDA0ODw==,keyB:AAECAAECAAECAAECAAECAA==,keyC:AAECAwPFBgcICQoLDA0ODw==,keyD:AAECAwPFdgcICQoLDA0ODw==&quot;);\r\n\r\n        Dataset&lt;Row&gt; df = sc.read()\r\n                .parquet(&quot;hdfs://127.0.0.1:9000//data/tuantq2/parquet_sec/teampath.parquet.encrypted/&quot;).select(&quot;team&quot;);\r\n        df.show();\r\n```\r\nI receved error:\r\n\r\n```\r\norg.apache.spark.SparkException: Exception thrown in awaitResult: \r\n\tat org.apache.spark.util.ThreadUtils$.awaitResult(ThreadUtils.scala:301)\r\n\tat org.apache.spark.util.ThreadUtils$.parmap(ThreadUtils.scala:375)\r\n\tat org.apache.spark.sql.execution.datasources.parquet.ParquetFileFormat$.readParquetFootersInParallel(ParquetFileFormat.scala:460)\r\n\tat org.apache.spark.sql.execution.datasources.parquet.ParquetFileFormat$.$anonfun$mergeSchemasInParallel$1(ParquetFileFormat.scala:506)\r\n\tat org.apache.spark.sql.execution.datasources.parquet.ParquetFileFormat$.$anonfun$mergeSchemasInParallel$1$adapted(ParquetFileFormat.scala:500)\r\n\tat org.apache.spark.sql.execution.datasources.SchemaMergeUtils$.$anonfun$mergeSchemasInParallel$2(SchemaMergeUtils.scala:76)\r\n\tat org.apache.spark.rdd.RDD.$anonfun$mapPartitions$2(RDD.scala:863)\r\n\tat org.apache.spark.rdd.RDD.$anonfun$mapPartitions$2$adapted(RDD.scala:863)\r\n\tat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n\tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n\tat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n\tat org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90)\r\n\tat org.apache.spark.scheduler.Task.run(Task.scala:131)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:506)\r\n\tat org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1462)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:509)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\nCaused by: java.io.IOException: Could not read footer for file: FileStatus{path=hdfs://127.0.0.1:9000/data/tuantq2/parquet_sec_vault/teampath.parquet.encrypted/part-00000-30a08af7-5f92-4ae8-88c0-e1c327b0060d-c000.snappy.parquet; isDirectory=false; length=16240; replication=0; blocksize=0; modification_time=0; access_time=0; owner=; group=; permission=rw-rw-rw-; isSymlink=false; hasAcl=false; isEncrypted=false; isErasureCoded=false}\r\n\tat org.apache.spark.sql.errors.QueryExecutionErrors$.cannotReadFooterForFileError(QueryExecutionErrors.scala:726)\r\n\tat org.apache.spark.sql.execution.datasources.parquet.ParquetFileFormat$.$anonfun$readParquetFootersInParallel$1(ParquetFileFormat.scala:473)\r\n\tat org.apache.spark.util.ThreadUtils$.$anonfun$parmap$2(ThreadUtils.scala:372)\r\n\tat scala.concurrent.Future$.$anonfun$apply$1(Future.scala:659)\r\n\tat scala.util.Success.$anonfun$map$1(Try.scala:255)\r\n\tat scala.util.Success.map(Try.scala:213)\r\n\tat scala.concurrent.Future.$anonfun$map$1(Future.scala:292)\r\n\tat scala.concurrent.impl.Promise.liftedTree1$1(Promise.scala:33)\r\n\tat scala.concurrent.impl.Promise.$anonfun$transform$1(Promise.scala:33)\r\n\tat scala.concurrent.impl.CallbackRunnable.run(Promise.scala:64)\r\n\tat java.util.concurrent.ForkJoinTask$RunnableExecuteAction.exec(ForkJoinTask.java:1402)\r\n\tat java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:289)\r\n\tat java.util.concurrent.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1056)\r\n\tat java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1692)\r\n\tat java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:157)\r\nCaused by: java.lang.NullPointerException\r\n\tat org.apache.parquet.crypto.keytools.FileKeyUnwrapper.getKey(FileKeyUnwrapper.java:87)\r\n\tat org.apache.parquet.crypto.InternalFileDecryptor.setFileCryptoMetaData(InternalFileDecryptor.java:187)\r\n\tat org.apache.parquet.hadoop.ParquetFileReader.readFooter(ParquetFileReader.java:592)\r\n\tat org.apache.parquet.hadoop.ParquetFileReader.&lt;init&gt;(ParquetFileReader.java:777)\r\n\tat org.apache.parquet.hadoop.ParquetFileReader.open(ParquetFileReader.java:658)\r\n\tat org.apache.spark.sql.execution.datasources.parquet.ParquetFooterReader.readFooter(ParquetFooterReader.java:52)\r\n\tat org.apache.spark.sql.execution.datasources.parquet.ParquetFooterReader.readFooter(ParquetFooterReader.java:44)\r\n\tat org.apache.spark.sql.execution.datasources.parquet.ParquetFileFormat$.$anonfun$readParquetFootersInParallel$1(ParquetFileFormat.scala:467)\r\n\t... 13 more\r\n```\r\nBut  when write parquet with parquet.encryption.key.material.store.internally=true then everything&#39;s fine\r\nPlease help me solve this. Thank all for helps.\r\n\r\nwhen I try write file parquet with option parquet.encryption.key.material.store.internally=true then everything&#39;s fine","title":"Error when read parquet file use Parquet Modular Encryption","body":"<p>I try write parquet file use Parquet Modular Encryption\n<a href=\"https://github.com/apache/parquet-format/blob/master/Encryption.md\" rel=\"nofollow noreferrer\">https://github.com/apache/parquet-format/blob/master/Encryption.md</a>\nI use spark java to write file with code:</p>\n<pre><code>sc.sparkContext().hadoopConfiguration().set(&quot;parquet.crypto.factory.class&quot;,\n                &quot;org.apache.parquet.crypto.keytools.PropertiesDrivenCryptoFactory&quot;);\n\n        sc.sparkContext().hadoopConfiguration().set(&quot;parquet.encryption.key.material.store.internally&quot;, &quot;false&quot;);\n\n        sc.sparkContext().hadoopConfiguration().set(&quot;parquet.encryption.kms.client.class&quot;,\n                &quot;org.apache.parquet.crypto.keytools.mocks.InMemoryKMS&quot;);\n        // Explicit master keys (base64 encoded) - required only for mock InMemoryKMS\n        sc.sparkContext().hadoopConfiguration().set(&quot;parquet.encryption.key.list&quot;,\n                &quot;keyA:AAECAwQFBgcICQoLDA0ODw==,keyB:AAECAAECAAECAAECAAECAA==,keyC:AAECAwPFBgcICQoLDA0ODw==,keyD:AAECAwPFdgcICQoLDA0ODw==&quot;);\n\n        String csvPath = &quot;/home/tuantq2/Downloads/stat/perstat/stats_data_read_csv9.csv&quot;;\n\n        Dataset&lt;Row&gt; csvData = sc.read()\n                .format(&quot;csv&quot;)\n                .option(&quot;header&quot;, &quot;true&quot;) // Nếu có header trong file CSV\n                .option(&quot;inferSchema&quot;, &quot;true&quot;) // Tự động suy đoán kiểu dữ liệu của cột\n                .load(csvPath);\n        csvData.show();\n        csvData.write().\n                option(&quot;parquet.encryption.column.keys&quot;, &quot;keyA:team&quot;).\n                option(&quot;parquet.encryption.footer.key&quot;, &quot;keyB&quot;).\n                //                option(&quot;parquet.encryption.column.keys&quot;, &quot;keyC:path&quot;).\n                mode(SaveMode.Overwrite).\n                parquet(&quot;hdfs://127.0.0.1:9000/data/tuantq2/parquet_sec/teampath.parquet.encrypted&quot;);\n</code></pre>\n<p>then when I try read:</p>\n<pre><code>sc.sparkContext().hadoopConfiguration().set(&quot;parquet.encryption.key.material.store.internally&quot;,\n                &quot;false&quot;);\n\n        sc.sparkContext().hadoopConfiguration().set(&quot;parquet.crypto.factory.class&quot;,\n                &quot;org.apache.parquet.crypto.keytools.PropertiesDrivenCryptoFactory&quot;);\n\n        sc.sparkContext().hadoopConfiguration().set(&quot;parquet.encryption.kms.client.class&quot;,\n                &quot;org.apache.parquet.crypto.keytools.mocks.InMemoryKMS&quot;);\n        // Explicit master keys (base64 encoded) - required only for mock InMemoryKMS\n        sc.sparkContext().hadoopConfiguration().set(&quot;parquet.encryption.key.list&quot;,\n                &quot;keyA:AAECAwQFBgcICQoLDA0ODw==,keyB:AAECAAECAAECAAECAAECAA==,keyC:AAECAwPFBgcICQoLDA0ODw==,keyD:AAECAwPFdgcICQoLDA0ODw==&quot;);\n\n        Dataset&lt;Row&gt; df = sc.read()\n                .parquet(&quot;hdfs://127.0.0.1:9000//data/tuantq2/parquet_sec/teampath.parquet.encrypted/&quot;).select(&quot;team&quot;);\n        df.show();\n</code></pre>\n<p>I receved error:</p>\n<pre><code>org.apache.spark.SparkException: Exception thrown in awaitResult: \n    at org.apache.spark.util.ThreadUtils$.awaitResult(ThreadUtils.scala:301)\n    at org.apache.spark.util.ThreadUtils$.parmap(ThreadUtils.scala:375)\n    at org.apache.spark.sql.execution.datasources.parquet.ParquetFileFormat$.readParquetFootersInParallel(ParquetFileFormat.scala:460)\n    at org.apache.spark.sql.execution.datasources.parquet.ParquetFileFormat$.$anonfun$mergeSchemasInParallel$1(ParquetFileFormat.scala:506)\n    at org.apache.spark.sql.execution.datasources.parquet.ParquetFileFormat$.$anonfun$mergeSchemasInParallel$1$adapted(ParquetFileFormat.scala:500)\n    at org.apache.spark.sql.execution.datasources.SchemaMergeUtils$.$anonfun$mergeSchemasInParallel$2(SchemaMergeUtils.scala:76)\n    at org.apache.spark.rdd.RDD.$anonfun$mapPartitions$2(RDD.scala:863)\n    at org.apache.spark.rdd.RDD.$anonfun$mapPartitions$2$adapted(RDD.scala:863)\n    at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\n    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n    at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90)\n    at org.apache.spark.scheduler.Task.run(Task.scala:131)\n    at org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:506)\n    at org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1462)\n    at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:509)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: java.io.IOException: Could not read footer for file: FileStatus{path=hdfs://127.0.0.1:9000/data/tuantq2/parquet_sec_vault/teampath.parquet.encrypted/part-00000-30a08af7-5f92-4ae8-88c0-e1c327b0060d-c000.snappy.parquet; isDirectory=false; length=16240; replication=0; blocksize=0; modification_time=0; access_time=0; owner=; group=; permission=rw-rw-rw-; isSymlink=false; hasAcl=false; isEncrypted=false; isErasureCoded=false}\n    at org.apache.spark.sql.errors.QueryExecutionErrors$.cannotReadFooterForFileError(QueryExecutionErrors.scala:726)\n    at org.apache.spark.sql.execution.datasources.parquet.ParquetFileFormat$.$anonfun$readParquetFootersInParallel$1(ParquetFileFormat.scala:473)\n    at org.apache.spark.util.ThreadUtils$.$anonfun$parmap$2(ThreadUtils.scala:372)\n    at scala.concurrent.Future$.$anonfun$apply$1(Future.scala:659)\n    at scala.util.Success.$anonfun$map$1(Try.scala:255)\n    at scala.util.Success.map(Try.scala:213)\n    at scala.concurrent.Future.$anonfun$map$1(Future.scala:292)\n    at scala.concurrent.impl.Promise.liftedTree1$1(Promise.scala:33)\n    at scala.concurrent.impl.Promise.$anonfun$transform$1(Promise.scala:33)\n    at scala.concurrent.impl.CallbackRunnable.run(Promise.scala:64)\n    at java.util.concurrent.ForkJoinTask$RunnableExecuteAction.exec(ForkJoinTask.java:1402)\n    at java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:289)\n    at java.util.concurrent.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1056)\n    at java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1692)\n    at java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:157)\nCaused by: java.lang.NullPointerException\n    at org.apache.parquet.crypto.keytools.FileKeyUnwrapper.getKey(FileKeyUnwrapper.java:87)\n    at org.apache.parquet.crypto.InternalFileDecryptor.setFileCryptoMetaData(InternalFileDecryptor.java:187)\n    at org.apache.parquet.hadoop.ParquetFileReader.readFooter(ParquetFileReader.java:592)\n    at org.apache.parquet.hadoop.ParquetFileReader.&lt;init&gt;(ParquetFileReader.java:777)\n    at org.apache.parquet.hadoop.ParquetFileReader.open(ParquetFileReader.java:658)\n    at org.apache.spark.sql.execution.datasources.parquet.ParquetFooterReader.readFooter(ParquetFooterReader.java:52)\n    at org.apache.spark.sql.execution.datasources.parquet.ParquetFooterReader.readFooter(ParquetFooterReader.java:44)\n    at org.apache.spark.sql.execution.datasources.parquet.ParquetFileFormat$.$anonfun$readParquetFootersInParallel$1(ParquetFileFormat.scala:467)\n    ... 13 more\n</code></pre>\n<p>But  when write parquet with parquet.encryption.key.material.store.internally=true then everything's fine\nPlease help me solve this. Thank all for helps.</p>\n<p>when I try write file parquet with option parquet.encryption.key.material.store.internally=true then everything's fine</p>\n"},{"tags":["java","persistence","jooq","dsl","querydsl"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1691544218,"post_id":76863993,"comment_id":135504951,"body_markdown":"what is wrong with the way that you are doing this?","body":"what is wrong with the way that you are doing this?"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":2,"creation_date":1691545691,"post_id":76863993,"comment_id":135505078,"body_markdown":"You need to keep that cursor around. Your error here is returning a `List&lt;Record&gt;` - that&#39;s not what you want. You want some other object that you can repeatedly ask for a list. You could write that, but, really, `Cursor` already does that. Your `fetchRecords` method should return `Cursor&lt;Record&gt;` directly.","body":"You need to keep that cursor around. Your error here is returning a <code>List&lt;Record&gt;</code> - that&#39;s not what you want. You want some other object that you can repeatedly ask for a list. You could write that, but, really, <code>Cursor</code> already does that. Your <code>fetchRecords</code> method should return <code>Cursor&lt;Record&gt;</code> directly."},{"owner":{"account_id":8277763,"reputation":573,"user_id":6223346,"accept_rate":67,"display_name":"Harish"},"score":0,"creation_date":1691548741,"post_id":76863993,"comment_id":135505309,"body_markdown":"@rzwitserloot - Does the fetchrecords() keeps get calling with the new cursorfetch from next Time?","body":"@rzwitserloot - Does the fetchrecords() keeps get calling with the new cursorfetch from next Time?"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1691549570,"post_id":76863993,"comment_id":135505374,"body_markdown":"No. `fetchLazy()` gets you a cursor. That&#39;s what you return, that&#39;s what you keep calling `.fetchNext` on.","body":"No. <code>fetchLazy()</code> gets you a cursor. That&#39;s what you return, that&#39;s what you keep calling <code>.fetchNext</code> on."}],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691570446,"creation_date":1691570446,"answer_id":76865988,"question_id":76863993,"body_markdown":"As mentioned in the comments, the problem is that you&#39;re keeping the processing logic outside of the fetch logic. Just move it inside, e.g. as follows:\r\n\r\n```java\r\nclass RecordService {\r\n    RecordPersistence recordPersistence = new RecordPersistence();\r\n\r\n    public void processRecords() {\r\n\r\n        recordPersistence.fetchRecords(\r\n            (List&lt;Record&gt; records) -&gt; {\r\n                // Code to process them\r\n            }\r\n        );\r\n     }\r\n} \r\n\r\nclass RecordPersistence {\r\n    public List&lt;Record&gt; fetchRecords(Consumer&lt;? super List&lt;Record&gt;&gt; consumer) {\r\n        try (Cursor&lt;Record&gt; cursor = dsl.select...fetchLazy()) {\r\n            while (cursor.hasNext()) {\r\n                consumer.accept(cursor.fetchNext(1000));\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nYou don&#39;t need any paradigm shift (e.g. async, reactive, etc.) for this type of streaming to work. Just switch from [external to internal iteration][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/224648/521799","title":"Jooq Java Code to handle more than 200k records from a table","body":"<p>As mentioned in the comments, the problem is that you're keeping the processing logic outside of the fetch logic. Just move it inside, e.g. as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class RecordService {\n    RecordPersistence recordPersistence = new RecordPersistence();\n\n    public void processRecords() {\n\n        recordPersistence.fetchRecords(\n            (List&lt;Record&gt; records) -&gt; {\n                // Code to process them\n            }\n        );\n     }\n} \n\nclass RecordPersistence {\n    public List&lt;Record&gt; fetchRecords(Consumer&lt;? super List&lt;Record&gt;&gt; consumer) {\n        try (Cursor&lt;Record&gt; cursor = dsl.select...fetchLazy()) {\n            while (cursor.hasNext()) {\n                consumer.accept(cursor.fetchNext(1000));\n            }\n        }\n    }\n}\n</code></pre>\n<p>You don't need any paradigm shift (e.g. async, reactive, etc.) for this type of streaming to work. Just switch from <a href=\"https://stackoverflow.com/q/224648/521799\">external to internal iteration</a></p>\n"}],"owner":{"account_id":8277763,"reputation":573,"user_id":6223346,"accept_rate":67,"display_name":"Harish"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76865988,"answer_count":1,"score":0,"last_activity_date":1691570446,"creation_date":1691543957,"question_id":76863993,"body_markdown":"The table in my database has more than 200k records and I don&#39;t want to fetch all of them at once in the resultSet to process. I am trying to write a function in a service that calls another persistence class function to bring only 1000 records to process.\r\nOnce it processes the 1000 records, it should fetch the following thousand records. I am using the JOOQ database library in my Java code. I am just sharing a sample skeleton code that I had in my mind. \r\n\r\n    class RecordService {\r\n        RecordPersistence recordPersistence = new RecordPersistence();\r\n\r\n    \tpublic void processRecords() {\r\n    \r\n    \t\tList&lt;Record&gt; records = recordPersistence.fetchRecords();\r\n    \t\t// Code to process them\r\n    \t }\r\n    } \r\n\r\n\r\n    class RecordPersistence {\r\n    \tpublic List&lt;Record&gt;  fetchRecords(){\r\n    \t\t\r\n    \t\tCursor&lt;Record&gt; records = dsl.select...fetchLazy();\r\n    \r\n    \t\twhile (records.hasNext()) {\r\n    \t\t   records.fetchNext(1000);\r\n    \t\t}\r\n    \t\treturn records\r\n    \t}\r\n    }\r\n\r\nHow to return only a few records from the fetchRecords() function? Should I write this is an async function? Is this the correct way to process result? or is there a better way to handle my case?\r\n","title":"Jooq Java Code to handle more than 200k records from a table","body":"<p>The table in my database has more than 200k records and I don't want to fetch all of them at once in the resultSet to process. I am trying to write a function in a service that calls another persistence class function to bring only 1000 records to process.\nOnce it processes the 1000 records, it should fetch the following thousand records. I am using the JOOQ database library in my Java code. I am just sharing a sample skeleton code that I had in my mind.</p>\n<pre><code>class RecordService {\n    RecordPersistence recordPersistence = new RecordPersistence();\n\n    public void processRecords() {\n\n        List&lt;Record&gt; records = recordPersistence.fetchRecords();\n        // Code to process them\n     }\n} \n\n\nclass RecordPersistence {\n    public List&lt;Record&gt;  fetchRecords(){\n        \n        Cursor&lt;Record&gt; records = dsl.select...fetchLazy();\n\n        while (records.hasNext()) {\n           records.fetchNext(1000);\n        }\n        return records\n    }\n}\n</code></pre>\n<p>How to return only a few records from the fetchRecords() function? Should I write this is an async function? Is this the correct way to process result? or is there a better way to handle my case?</p>\n"},{"tags":["java","shell"],"comments":[{"owner":{"account_id":309680,"reputation":4046,"user_id":622266,"accept_rate":60,"display_name":"Pawel Veselov"},"score":0,"creation_date":1618524462,"post_id":67090500,"comment_id":118634655,"body_markdown":"This question answers yours: https://stackoverflow.com/questions/38821224/java-use-exec-and-read-output-while-program-is-still-running","body":"This question answers yours: <a href=\"https://stackoverflow.com/questions/38821224/java-use-exec-and-read-output-while-program-is-still-running\" title=\"java use exec and read output while program is still running\">stackoverflow.com/questions/38821224/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1618401113,"post_id":67090570,"comment_id":118589039,"body_markdown":"Your answer is quite close, but it does not work in real-time because it contains `proc.waitFor();`. hence it first waits for the process to exit and then start processing the output.","body":"Your answer is quite close, but it does not work in real-time because it contains <code>proc.waitFor();</code>. hence it first waits for the process to exit and then start processing the output."},{"owner":{"account_id":21252071,"reputation":1,"user_id":15634181,"display_name":"Question"},"score":0,"creation_date":1618467590,"post_id":67090570,"comment_id":118610795,"body_markdown":"I just use this method, but I can&#39;t get real-time output","body":"I just use this method, but I can&#39;t get real-time output"}],"tags":[],"owner":{"account_id":6243711,"reputation":1571,"user_id":4856413,"display_name":"sanjeevRm"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1618401592,"creation_date":1618398603,"answer_id":67090570,"question_id":67090500,"body_markdown":"you can use process builder to read response of command executed\r\n```\r\n         ProcessBuilder pb = new ProcessBuilder();\r\n\t    \tpb.command(cmd);\r\n\t    \tProcess proc = pb.start();\r\n\t    \tproc.waitFor();\r\n\r\n\t    \tInputStream inputStream = proc.getInputStream();\r\n\t    \tBufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));\r\n\t    \tString responseLine = &quot;&quot;;\r\n\t    \tStringBuilder output = new StringBuilder();\r\n\t    \twhile (( responseLine = reader.readLine())!= null) {\r\n\t    \t\toutput.append(responseLine + &quot;\\n&quot;);\r\n\t    \t}\r\n```","title":"Java execute shell commands, how to read output in real time?","body":"<p>you can use process builder to read response of command executed</p>\n<pre><code>         ProcessBuilder pb = new ProcessBuilder();\n            pb.command(cmd);\n            Process proc = pb.start();\n            proc.waitFor();\n\n            InputStream inputStream = proc.getInputStream();\n            BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));\n            String responseLine = &quot;&quot;;\n            StringBuilder output = new StringBuilder();\n            while (( responseLine = reader.readLine())!= null) {\n                output.append(responseLine + &quot;\\n&quot;);\n            }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13846532,"reputation":319,"user_id":9995556,"display_name":"pbthorste"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691570418,"creation_date":1691570418,"answer_id":76865986,"question_id":67090500,"body_markdown":"Here is one way to display the output from the command in real time by redirecting the output to the same as those of the java process.\r\n\r\n```java\r\nProcessBuilder pb = new ProcessBuilder();\r\npb.command(&quot;./a-script.sh&quot;)\r\npb.inheritIO() // \r\ndef proc = pb.start()\r\nproc.waitFor()\r\n```","title":"Java execute shell commands, how to read output in real time?","body":"<p>Here is one way to display the output from the command in real time by redirecting the output to the same as those of the java process.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ProcessBuilder pb = new ProcessBuilder();\npb.command(&quot;./a-script.sh&quot;)\npb.inheritIO() // \ndef proc = pb.start()\nproc.waitFor()\n</code></pre>\n"}],"owner":{"account_id":21252071,"reputation":1,"user_id":15634181,"display_name":"Question"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1337,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691570418,"creation_date":1618398292,"question_id":67090500,"body_markdown":"Through the following code, I can execute and get the shell command, and get the output, but only after the end of the process, can I get the standard output. How can I get the real-time output when the process is executing       \r\n\r\n\r\n\r\n             Process process = Runtime.getRuntime().exec(command);\r\n             // close process&#39;s output stream.\r\n             process.getOutputStream().close();\r\n\r\n             pIn = process.getInputStream();\r\n             InputStreamReader inputStreamReader = new InputStreamReader(pin, &quot;UTF-8&quot;);\r\n             bufferedReader = new BufferedReader(inputStreamReader);\r\n             String line = null;\r\n             while ((line = bufferedReader.readLine()) != null) {\r\n                 this.buf.append(line + &quot;\\n&quot;);\r\n             }\r\n            \r\n            process.waitfor();\r\n\r\n\r\n","title":"Java execute shell commands, how to read output in real time?","body":"<p>Through the following code, I can execute and get the shell command, and get the output, but only after the end of the process, can I get the standard output. How can I get the real-time output when the process is executing</p>\n<pre><code>         Process process = Runtime.getRuntime().exec(command);\n         // close process's output stream.\n         process.getOutputStream().close();\n\n         pIn = process.getInputStream();\n         InputStreamReader inputStreamReader = new InputStreamReader(pin, &quot;UTF-8&quot;);\n         bufferedReader = new BufferedReader(inputStreamReader);\n         String line = null;\n         while ((line = bufferedReader.readLine()) != null) {\n             this.buf.append(line + &quot;\\n&quot;);\n         }\n        \n        process.waitfor();\n</code></pre>\n"},{"tags":["java","sorting","comparable"],"comments":[{"owner":{"account_id":329656,"reputation":42009,"user_id":653298,"display_name":"Jacob"},"score":0,"creation_date":1306757102,"post_id":6176019,"comment_id":7180792,"body_markdown":"Why don&#39;t you just compare the long-values of `dist` in your compareTo(Tree o) method?","body":"Why don&#39;t you just compare the long-values of <code>dist</code> in your compareTo(Tree o) method?"},{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":1,"creation_date":1306757122,"post_id":6176019,"comment_id":7180797,"body_markdown":"Strings are compared alphabetically (not really but it&#39;s a good way to think of). Hence, 12 &gt; 111. If you need to compare numbers use numbers, i.e. add one more field long. Or in the worst case compare the result of Long.parseLong(dist)","body":"Strings are compared alphabetically (not really but it&#39;s a good way to think of). Hence, 12 &gt; 111. If you need to compare numbers use numbers, i.e. add one more field long. Or in the worst case compare the result of Long.parseLong(dist)"},{"owner":{"account_id":1963,"reputation":27201,"user_id":2701,"accept_rate":83,"display_name":"Toran Billups"},"score":0,"creation_date":1306759394,"post_id":6176019,"comment_id":7181351,"body_markdown":"Turns out I was actually comparing a double the entire time - sorry guys (went with Double.compare as my actual solution) awarded what I felt was a great answer to the Long problem though - flag it for removal if nothing else","body":"Turns out I was actually comparing a double the entire time - sorry guys (went with Double.compare as my actual solution) awarded what I felt was a great answer to the Long problem though - flag it for removal if nothing else"},{"owner":{"account_id":73570,"reputation":1739,"user_id":211764,"accept_rate":81,"display_name":"Robb Hoff"},"score":0,"creation_date":1413791311,"post_id":6176019,"comment_id":41560717,"body_markdown":"Use &#39;Long.compare(long x, long y)&#39;, see answer below","body":"Use &#39;Long.compare(long x, long y)&#39;, see answer below"}],"answers":[{"tags":[],"owner":{"account_id":66010,"reputation":22927,"user_id":193906,"display_name":"Sanjay T. Sharma"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1306757064,"creation_date":1306757064,"answer_id":6176048,"question_id":6176019,"body_markdown":"It depends on how you want to do things? Do you want to keep the current implementation of Comparable? If yes, use the sort method which takes a Comparator and implement a custom comparator which uses the actual &quot;long&quot; values of the string (`Long.parseLong(dist)`). If no, then just modify the current `compareTo` and use the Long values of the &quot;dist&quot;.\r\n\r\nBTW, I&#39;d revisit the logic and ask myself why &quot;dist&quot; is of type String when it is actually a Long?","title":"Comparing Long values using Collections.sort(object)","body":"<p>It depends on how you want to do things? Do you want to keep the current implementation of Comparable? If yes, use the sort method which takes a Comparator and implement a custom comparator which uses the actual \"long\" values of the string (<code>Long.parseLong(dist)</code>). If no, then just modify the current <code>compareTo</code> and use the Long values of the \"dist\".</p>\n\n<p>BTW, I'd revisit the logic and ask myself why \"dist\" is of type String when it is actually a Long?</p>\n"},{"comments":[{"owner":{"account_id":6655393,"reputation":2561,"user_id":5136131,"display_name":"Positive Navid"},"score":0,"creation_date":1691570983,"post_id":6176108,"comment_id":135508232,"body_markdown":"If performance can be an issue, it&#39;s better to use primitive. Otherwise, it seems that someone pointed out: &quot;The emperor is naked!&quot; :)","body":"If performance can be an issue, it&#39;s better to use primitive. Otherwise, it seems that someone pointed out: &quot;The emperor is naked!&quot; :)"}],"tags":[],"owner":{"account_id":397191,"reputation":6887,"user_id":761180,"accept_rate":97,"display_name":"astay13"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1306757368,"creation_date":1306757368,"answer_id":6176108,"question_id":6176019,"body_markdown":"Why not\r\n\r\n    public class Tree implements Comparable&lt;Tree&gt; {\r\n        public Long dist;\r\n    \r\n        public int compareTo(Tree o) {\r\n            return this.dist.compareTo(o.dist);\r\n        }\r\n    }","title":"Comparing Long values using Collections.sort(object)","body":"<p>Why not</p>\n\n<pre><code>public class Tree implements Comparable&lt;Tree&gt; {\n    public Long dist;\n\n    public int compareTo(Tree o) {\n        return this.dist.compareTo(o.dist);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1306758040,"post_id":6176109,"comment_id":7181036,"body_markdown":"will not compile (Long.parseLong return primitive long)","body":"will not compile (Long.parseLong return primitive long)"}],"tags":[],"owner":{"account_id":376266,"reputation":169,"user_id":727614,"accept_rate":0,"display_name":"cipher"},"comment_count":1,"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1306782440,"creation_date":1306757371,"answer_id":6176109,"question_id":6176019,"body_markdown":"well if the dist variable is actually long then you might try using \r\n\r\n    public int compareTo(Tree o) {\r\n        return Long.valueOf(this.dist).compareTo(Long.valueOf(o.dist));\r\n    }\r\n","title":"Comparing Long values using Collections.sort(object)","body":"<p>well if the dist variable is actually long then you might try using </p>\n\n<pre><code>public int compareTo(Tree o) {\n    return Long.valueOf(this.dist).compareTo(Long.valueOf(o.dist));\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":332245,"reputation":16487,"user_id":657427,"accept_rate":67,"display_name":"Christophe Roussy"},"score":31,"creation_date":1397653741,"post_id":6176199,"comment_id":35326790,"body_markdown":"Update: Since Java 7 you can do `Long.compare(x, y);` instead of writing such code yourself (not a revolution, but simpler).","body":"Update: Since Java 7 you can do <code>Long.compare(x, y);</code> instead of writing such code yourself (not a revolution, but simpler)."},{"owner":{"account_id":3948924,"reputation":683,"user_id":3260244,"accept_rate":91,"display_name":"Imdad"},"score":7,"creation_date":1481888047,"post_id":6176199,"comment_id":69566577,"body_markdown":"In android, @ChristopheRoussy&#39;s solution works only for API 19 and above.","body":"In android, @ChristopheRoussy&#39;s solution works only for API 19 and above."},{"owner":{"account_id":294527,"reputation":264,"user_id":598477,"accept_rate":90,"display_name":"Big Dude"},"score":1,"creation_date":1573213448,"post_id":6176199,"comment_id":103817610,"body_markdown":"Update: You could even use `Comparator.comparingLong(x::y)`","body":"Update: You could even use <code>Comparator.comparingLong(x::y)</code>"}],"tags":[],"owner":{"account_id":378721,"reputation":47508,"user_id":731620,"accept_rate":80,"display_name":"ratchet freak"},"comment_count":3,"down_vote_count":1,"up_vote_count":22,"is_accepted":true,"score":21,"last_activity_date":1691570199,"creation_date":1306757907,"answer_id":6176199,"question_id":6176019,"body_markdown":"why not actually store a long in there:\r\n\r\n    public class Tree implements Comparable&lt;Tree&gt; {\r\n        public long dist; //value is actually Long\r\n    \r\n        public int compareTo(Tree o) {\r\n            return this.dist &lt; o.dist ? -1 :\r\n                this.dist &gt; o.dist ? 1 : 0;\r\n        }\r\n    }\r\n\r\nthat or first compare the length of the strings and then compare them\r\n\r\n    public String dist; //value is actually Long\r\n  \r\n    public int compareTo(Tree o) {\r\n        if (this.dist.length() != o.dist.length())\r\n          return this.dist.length() &lt; o.dist.length() ? -1 : 1;//assume the shorter string is a smaller value\r\n        else return this.dist.compareTo(o.dist);\r\n    }","title":"Comparing Long values using Collections.sort(object)","body":"<p>why not actually store a long in there:</p>\n<pre><code>public class Tree implements Comparable&lt;Tree&gt; {\n    public long dist; //value is actually Long\n\n    public int compareTo(Tree o) {\n        return this.dist &lt; o.dist ? -1 :\n            this.dist &gt; o.dist ? 1 : 0;\n    }\n}\n</code></pre>\n<p>that or first compare the length of the strings and then compare them</p>\n<pre><code>public String dist; //value is actually Long\n\npublic int compareTo(Tree o) {\n    if (this.dist.length() != o.dist.length())\n      return this.dist.length() &lt; o.dist.length() ? -1 : 1;//assume the shorter string is a smaller value\n    else return this.dist.compareTo(o.dist);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":441739,"reputation":1604,"user_id":832008,"accept_rate":71,"display_name":"Analizer"},"score":10,"creation_date":1468317179,"post_id":26460724,"comment_id":64065693,"body_markdown":"this is only available from API level 19","body":"this is only available from API level 19"},{"owner":{"account_id":8603529,"reputation":3209,"user_id":6444297,"accept_rate":71,"display_name":"Alireza Noorali"},"score":0,"creation_date":1564910995,"post_id":26460724,"comment_id":101178762,"body_markdown":"are there any ideas for pre KitKat?","body":"are there any ideas for pre KitKat?"}],"tags":[],"owner":{"account_id":73570,"reputation":1739,"user_id":211764,"accept_rate":81,"display_name":"Robb Hoff"},"comment_count":2,"down_vote_count":0,"up_vote_count":50,"is_accepted":false,"score":50,"last_activity_date":1591993568,"creation_date":1413791184,"answer_id":26460724,"question_id":6176019,"body_markdown":"# `Long.compare( x , y )`\r\n\r\nIf you have an object that you want to sort on a `long` value, and it implements [`Comparable`][1], in Java 7+ you can use [`Long.compare(long x, long y)`][2] (which returns an **`int`**)\r\n\r\nE.g.\r\n\r\n\r\n    public class MyObject implements Comparable&lt;MyObject&gt;\r\n    {\r\n      public long id;\r\n    \r\n      @Override\r\n      public int compareTo(MyObject obj) {\r\n        return Long.compare(this.id, obj.id);\r\n      }\r\n    }\r\n\r\nCall `Collections.sort(my_objects)` where my_objects is something like\r\n\r\n      List&lt;MyObject&gt; my_objects = new ArrayList&lt;MyObject&gt;();\r\n      // + some code to populate your list\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Comparable.html\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Long.html#compare(long,long)","title":"Comparing Long values using Collections.sort(object)","body":"<h1><code>Long.compare( x , y )</code></h1>\n\n<p>If you have an object that you want to sort on a <code>long</code> value, and it implements <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Comparable.html\" rel=\"noreferrer\"><code>Comparable</code></a>, in Java 7+ you can use <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Long.html#compare(long,long)\" rel=\"noreferrer\"><code>Long.compare(long x, long y)</code></a> (which returns an <strong><code>int</code></strong>)</p>\n\n<p>E.g.</p>\n\n<pre><code>public class MyObject implements Comparable&lt;MyObject&gt;\n{\n  public long id;\n\n  @Override\n  public int compareTo(MyObject obj) {\n    return Long.compare(this.id, obj.id);\n  }\n}\n</code></pre>\n\n<p>Call <code>Collections.sort(my_objects)</code> where my_objects is something like</p>\n\n<pre><code>  List&lt;MyObject&gt; my_objects = new ArrayList&lt;MyObject&gt;();\n  // + some code to populate your list\n</code></pre>\n"},{"tags":[],"owner":{"account_id":40774,"reputation":28739,"user_id":118228,"accept_rate":85,"display_name":"djangofan"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1449190807,"creation_date":1449190807,"answer_id":34079155,"question_id":6176019,"body_markdown":"Just an example I made for sorting Files by date using a Long comparator:\r\n\r\n    public File[] getAllFoldersByDescendingDate(File folder) {\r\n        if (!folder.isDirectory()) {\r\n            return null;\r\n        }\r\n        allFiles = folder.listFiles();\r\n        Arrays.sort(allFiles, new Comparator&lt;File&gt;()\r\n        {\r\n            public int compare(final File o1, final File o2)\r\n            {\r\n                return Long.compare(o2.lastModified(), o1.lastModified());\r\n            }\r\n        });\r\n        return allFiles;\r\n    }","title":"Comparing Long values using Collections.sort(object)","body":"<p>Just an example I made for sorting Files by date using a Long comparator:</p>\n\n<pre><code>public File[] getAllFoldersByDescendingDate(File folder) {\n    if (!folder.isDirectory()) {\n        return null;\n    }\n    allFiles = folder.listFiles();\n    Arrays.sort(allFiles, new Comparator&lt;File&gt;()\n    {\n        public int compare(final File o1, final File o2)\n        {\n            return Long.compare(o2.lastModified(), o1.lastModified());\n        }\n    });\n    return allFiles;\n}\n</code></pre>\n"}],"owner":{"account_id":1963,"reputation":27201,"user_id":2701,"accept_rate":83,"display_name":"Toran Billups"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59759,"favorite_count":0,"down_vote_count":0,"up_vote_count":26,"accepted_answer_id":6176199,"answer_count":6,"score":26,"last_activity_date":1691570199,"creation_date":1306756888,"question_id":6176019,"body_markdown":"I&#39;m trying to sort a simple list of objects by a long - the below isn&#39;t working because one of the long strings is pushed to the top simply because it starts with a lower number. So I&#39;m looking for a way to sort these by the actual long values directly\r\n\r\nThe current obj implementation looks something like the below. In the class I&#39;m using this I call Collections.sort(trees);\r\n\r\n    public class Tree implements Comparable&lt;Tree&gt; {\r\n        public String dist; //value is actually Long\r\n    \r\n        public int compareTo(Tree o) {\r\n            return this.dist.compareTo(o.dist);\r\n        }\r\n    }","title":"Comparing Long values using Collections.sort(object)","body":"<p>I'm trying to sort a simple list of objects by a long - the below isn't working because one of the long strings is pushed to the top simply because it starts with a lower number. So I'm looking for a way to sort these by the actual long values directly</p>\n\n<p>The current obj implementation looks something like the below. In the class I'm using this I call Collections.sort(trees);</p>\n\n<pre><code>public class Tree implements Comparable&lt;Tree&gt; {\n    public String dist; //value is actually Long\n\n    public int compareTo(Tree o) {\n        return this.dist.compareTo(o.dist);\n    }\n}\n</code></pre>\n"},{"tags":["java","excel","apache-poi"],"answers":[{"comments":[{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":1,"creation_date":1578589486,"post_id":59668534,"comment_id":105496644,"body_markdown":"`cell.setCellType(HSSFCell.CELL_TYPE_BOOLEAN);` is deprecated. The user either needs to use `True` or `False` as text or `0` or `1` as number.","body":"<code>cell.setCellType(HSSFCell.CELL_TYPE_BOOLEAN);</code> is deprecated. The user either needs to use <code>True</code> or <code>False</code> as text or <code>0</code> or <code>1</code> as number."}],"tags":[],"owner":{"account_id":17482530,"reputation":48,"user_id":12676243,"display_name":"Chetan pothkar"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1578588018,"creation_date":1578588018,"answer_id":59668534,"question_id":49689317,"body_markdown":"Use below code for Boolean value\r\n\r\n     private void writeToDocument(XSSFWorkbook workbook) {\r\n            Sheet sheet = workbook.createSheet(&quot;testSheet&quot;);\r\n            Row row = sheet.createRow(0);\r\n            Cell cell = row.createCell(0);\r\n            cell.setCellType(HSSFCell.CELL_TYPE_BOOLEAN);\r\n            cell.setCellValue((Boolean) true);\r\n        }\r\n\r\n ","title":"Set Cellstyle of a org.apache.poi.ss.usermodel.Cell to boolean","body":"<p>Use below code for Boolean value</p>\n\n<pre><code> private void writeToDocument(XSSFWorkbook workbook) {\n        Sheet sheet = workbook.createSheet(\"testSheet\");\n        Row row = sheet.createRow(0);\n        Cell cell = row.createCell(0);\n        cell.setCellType(HSSFCell.CELL_TYPE_BOOLEAN);\n        cell.setCellValue((Boolean) true);\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":2,"creation_date":1579063675,"post_id":59694876,"comment_id":105638169,"body_markdown":"This is the correct answer for current `apache poi`  versions. See [XSSFCell.setCellValue(boolean value)](https://svn.apache.org/viewvc/poi/tags/REL_4_1_1/src/ooxml/java/org/apache/poi/xssf/usermodel/XSSFCell.java?view=markup#l272) and [HSSFCell.setCellValue(boolean value)](https://svn.apache.org/viewvc/poi/tags/REL_4_1_1/src/java/org/apache/poi/hssf/usermodel/HSSFCell.java?view=markup#l753)","body":"This is the correct answer for current <code>apache poi</code>  versions. See <a href=\"https://svn.apache.org/viewvc/poi/tags/REL_4_1_1/src/ooxml/java/org/apache/poi/xssf/usermodel/XSSFCell.java?view=markup#l272\" rel=\"nofollow noreferrer\">XSSFCell.setCellValue(boolean value)</a> and <a href=\"https://svn.apache.org/viewvc/poi/tags/REL_4_1_1/src/java/org/apache/poi/hssf/usermodel/HSSFCell.java?view=markup#l753\" rel=\"nofollow noreferrer\">HSSFCell.setCellValue(boolean value)</a>"}],"tags":[],"owner":{"account_id":3009750,"reputation":757,"user_id":2553521,"display_name":"edwgiz"},"comment_count":1,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1578831800,"creation_date":1578749541,"answer_id":59694876,"question_id":49689317,"body_markdown":"When appropriate overloaded version of `setCellValue` is used the cell types will be assigned automatically, for example\r\n``` lang-java\r\ncell.setCellValue(true);\r\nSystem.out.println(cell.getCellType());\r\n```\r\nprints `BOOLEAN`\r\n\r\n\r\nChecked on `org.apache.poi:poi:4.1.1`","title":"Set Cellstyle of a org.apache.poi.ss.usermodel.Cell to boolean","body":"<p>When appropriate overloaded version of <code>setCellValue</code> is used the cell types will be assigned automatically, for example</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>cell.setCellValue(true);\nSystem.out.println(cell.getCellType());\n</code></pre>\n\n<p>prints <code>BOOLEAN</code></p>\n\n<p>Checked on <code>org.apache.poi:poi:4.1.1</code></p>\n"},{"tags":[],"owner":{"account_id":10310871,"reputation":25632,"user_id":7606764,"display_name":"Andronicus"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1578908975,"creation_date":1578908975,"answer_id":59714095,"question_id":49689317,"body_markdown":"You can use the following:\r\n\r\n    Row row = sheet.createRow(lineNumber);\r\n    Cell cell = row.createCell(1, CellType.BOOLEAN);\r\n\r\nThis will create a cell styled to persist boolean.","title":"Set Cellstyle of a org.apache.poi.ss.usermodel.Cell to boolean","body":"<p>You can use the following:</p>\n\n<pre><code>Row row = sheet.createRow(lineNumber);\nCell cell = row.createCell(1, CellType.BOOLEAN);\n</code></pre>\n\n<p>This will create a cell styled to persist boolean.</p>\n"},{"tags":[],"owner":{"account_id":9316795,"reputation":1583,"user_id":6916890,"display_name":"lazylead"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1579076913,"creation_date":1579076913,"answer_id":59747496,"question_id":49689317,"body_markdown":"This is how to customize a date, potentially you may try it with boolean\r\n\r\n    final XSSFCellStyle date = sheet.getWorkbook().createCellStyle();\r\n    date.setDataFormat(\r\n        sheet.getWorkbook()\r\n             .getCreationHelper()\r\n             .createDataFormat()\r\n             .getFormat(pattern)\r\n    );\r\n    cell = row.createCell(index);\r\n    cell.setCellStyle(date);\r\n\r\n","title":"Set Cellstyle of a org.apache.poi.ss.usermodel.Cell to boolean","body":"<p>This is how to customize a date, potentially you may try it with boolean</p>\n\n<pre><code>final XSSFCellStyle date = sheet.getWorkbook().createCellStyle();\ndate.setDataFormat(\n    sheet.getWorkbook()\n         .getCreationHelper()\n         .createDataFormat()\n         .getFormat(pattern)\n);\ncell = row.createCell(index);\ncell.setCellStyle(date);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3720487,"reputation":3769,"user_id":3095671,"accept_rate":100,"display_name":"mpr"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691568630,"creation_date":1691568630,"answer_id":76865785,"question_id":49689317,"body_markdown":"This is not a problem caused by the type of cell, because `Cell.setCellValue(boolean value)` sets correct cell type. You need an appropiate `CellStyle`.\r\n\r\nFirst create a style with boolean formatting:\r\n\r\n    public CellStyle createBooleanCellStyle(Workbook workbook){\r\n       var style = workbook.createCellStyle();\r\n       var format = workbook.getCreationHelper().createDataFormat().getFormat(&quot;BOOLEAN&quot;);\r\n       style.setDataFormat(format);\r\n       return style;\r\n    }\r\n\r\nThen use this style in your cell:\r\n    \r\n    public void set(Cell cell, boolean value, CellStyle  cellStyle){\r\n        cell.setCellValue(value);\r\n        cell.setCellStyle(cellStyle);\r\n    }\r\n\r\nNote: do not create new style for each cell, but create one style and reuse it.","title":"Set Cellstyle of a org.apache.poi.ss.usermodel.Cell to boolean","body":"<p>This is not a problem caused by the type of cell, because <code>Cell.setCellValue(boolean value)</code> sets correct cell type. You need an appropiate <code>CellStyle</code>.</p>\n<p>First create a style with boolean formatting:</p>\n<pre><code>public CellStyle createBooleanCellStyle(Workbook workbook){\n   var style = workbook.createCellStyle();\n   var format = workbook.getCreationHelper().createDataFormat().getFormat(&quot;BOOLEAN&quot;);\n   style.setDataFormat(format);\n   return style;\n}\n</code></pre>\n<p>Then use this style in your cell:</p>\n<pre><code>public void set(Cell cell, boolean value, CellStyle  cellStyle){\n    cell.setCellValue(value);\n    cell.setCellStyle(cellStyle);\n}\n</code></pre>\n<p>Note: do not create new style for each cell, but create one style and reuse it.</p>\n"}],"owner":{"account_id":13307082,"reputation":61,"user_id":9606518,"display_name":"Korbinian Reffler"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1910,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":5,"score":6,"last_activity_date":1691568630,"creation_date":1523005947,"question_id":49689317,"body_markdown":"I would like to write a boolean-value into an excel-cell, but instead of setting the cellStyle to &quot;logic&quot; the cellStyle will become &quot;number&quot; instead.\r\n\r\n    private void writeToDocument(XSSFWorkbook workbook) {\r\n        Sheet sheet = workbook.createSheet(&quot;testSheet&quot;);\r\n        Row row = sheet.createRow(0);\r\n        Cell cell = row.createCell(0);\r\n        cell.setCellValue(true);\r\n    }\r\n\r\nI already tryied\r\n\r\n    CellStyle cellStyle = workbook.createCellStyle();\r\n    cellStyle.setDataFormat([short s]);\r\n    cell.setCellStyle(cellStyle);\r\n\r\nbut no short s between 0 and 49 did the job.","title":"Set Cellstyle of a org.apache.poi.ss.usermodel.Cell to boolean","body":"<p>I would like to write a boolean-value into an excel-cell, but instead of setting the cellStyle to \"logic\" the cellStyle will become \"number\" instead.</p>\n\n<pre><code>private void writeToDocument(XSSFWorkbook workbook) {\n    Sheet sheet = workbook.createSheet(\"testSheet\");\n    Row row = sheet.createRow(0);\n    Cell cell = row.createCell(0);\n    cell.setCellValue(true);\n}\n</code></pre>\n\n<p>I already tryied</p>\n\n<pre><code>CellStyle cellStyle = workbook.createCellStyle();\ncellStyle.setDataFormat([short s]);\ncell.setCellStyle(cellStyle);\n</code></pre>\n\n<p>but no short s between 0 and 49 did the job.</p>\n"},{"tags":["java","swing","jframe","resize","window"],"comments":[{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1557012982,"post_id":55987389,"comment_id":98624078,"body_markdown":"You need to show more of your code. Like where to you override paintComponent().  And do not do the following:  1) extend JFrame, 2) Override Paint in JFrame().  You should create a JPanel and paint in that.","body":"You need to show more of your code. Like where to you override paintComponent().  And do not do the following:  1) extend JFrame, 2) Override Paint in JFrame().  You should create a JPanel and paint in that."},{"owner":{"account_id":8674619,"reputation":655,"user_id":6492354,"accept_rate":45,"display_name":"Daniel Williams"},"score":0,"creation_date":1557018284,"post_id":55987389,"comment_id":98624704,"body_markdown":"As far as I know, there is no good way to fix that problem.  Windows OS is responsible for managing many aspects of window resizing that can&#39;t be controlled from within Java.  My suggestion is to try calling &quot;paintImmediately(...)&quot; instead of &quot;repaint()&quot;.  You could also set the background of the JFrame to white so it&#39;s not as noticeable.","body":"As far as I know, there is no good way to fix that problem.  Windows OS is responsible for managing many aspects of window resizing that can&#39;t be controlled from within Java.  My suggestion is to try calling &quot;paintImmediately(...)&quot; instead of &quot;repaint()&quot;.  You could also set the background of the JFrame to white so it&#39;s not as noticeable."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1557026650,"post_id":55987389,"comment_id":98625687,"body_markdown":"Not sure why you are constantly updating the constraints. I would suggestion you can probably use a different layout manager, maybe the BorderLayout.","body":"Not sure why you are constantly updating the constraints. I would suggestion you can probably use a different layout manager, maybe the BorderLayout."},{"owner":{"account_id":15828804,"reputation":83,"user_id":11420832,"display_name":"P tray"},"score":0,"creation_date":1557049752,"post_id":55987389,"comment_id":98629359,"body_markdown":"@WJS That is exactly what I do.","body":"@WJS That is exactly what I do."},{"owner":{"account_id":15828804,"reputation":83,"user_id":11420832,"display_name":"P tray"},"score":0,"creation_date":1557049829,"post_id":55987389,"comment_id":98629378,"body_markdown":"@camickr I update my constraints to make sure that the panel that has the circle is always as large as the window so that it never goes off-screen.","body":"@camickr I update my constraints to make sure that the panel that has the circle is always as large as the window so that it never goes off-screen."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1557060106,"post_id":55987389,"comment_id":98631881,"body_markdown":"You need to show your code so we can help determine the problem.","body":"You need to show your code so we can help determine the problem."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1557080952,"post_id":55987389,"comment_id":98637487,"body_markdown":"*the circle is always as large as the window so that it never goes off-screen.* - which is exactly what the `BorderLayout` does and not constraints are necessary. Post your [mcve] if you need more help.","body":"<i>the circle is always as large as the window so that it never goes off-screen.</i> - which is exactly what the <code>BorderLayout</code> does and not constraints are necessary. Post your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> if you need more help."}],"answers":[{"tags":[],"owner":{"account_id":17674331,"reputation":91,"user_id":12829667,"display_name":"MontyHimself"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1618132924,"creation_date":1618132924,"answer_id":67043322,"question_id":55987389,"body_markdown":"*I have only tested this on Windows 10.*\r\n\r\nThis apparently has to do with the native window decorations of the window that hosts the JFrame. When disabling the native window decorations, you can remove the stuttering resizes and the black background bleeding through. See the documentation for `JFrame.setDefaultLookAndFeelDecorated(boolean)`:\r\n\r\n&gt; Provides a hint as to whether or not newly created JFrames should have their Window decorations (such as borders, widgets to close the window, title...) provided by the current look and feel. If defaultLookAndFeelDecorated is true, the current LookAndFeel supports providing window decorations, and the current window manager supports undecorated windows, then newly created JFrames will have their Window decorations provided by the current LookAndFeel. Otherwise, newly created JFrames will have their Window decorations provided by the current window manager.\r\n\r\nThus, you have two options. Either set the property once before you create your JFrame:\r\n\r\n    JFrame.setDefaultLookAndFeelDecorated(true);\r\n    JFrame frame = new JFrame();\r\n\r\nOr do it after the creation of the JFrame:\r\n\r\n    JFrame frame = new JFrame();\r\n    frame.setUndecorated(true);\r\n    frame.setWindowDecorationStyle(JRootPane.FRAME);\r\n\r\nNote that in either case, you are bound to use Swing&#39;s Look and Feel for the window decorations. The title bar and handles of the window are therefore going to look different than before.","title":"How to Remove Black Rectangle on Window Resize?","body":"<p><em>I have only tested this on Windows 10.</em></p>\n<p>This apparently has to do with the native window decorations of the window that hosts the JFrame. When disabling the native window decorations, you can remove the stuttering resizes and the black background bleeding through. See the documentation for <code>JFrame.setDefaultLookAndFeelDecorated(boolean)</code>:</p>\n<blockquote>\n<p>Provides a hint as to whether or not newly created JFrames should have their Window decorations (such as borders, widgets to close the window, title...) provided by the current look and feel. If defaultLookAndFeelDecorated is true, the current LookAndFeel supports providing window decorations, and the current window manager supports undecorated windows, then newly created JFrames will have their Window decorations provided by the current LookAndFeel. Otherwise, newly created JFrames will have their Window decorations provided by the current window manager.</p>\n</blockquote>\n<p>Thus, you have two options. Either set the property once before you create your JFrame:</p>\n<pre><code>JFrame.setDefaultLookAndFeelDecorated(true);\nJFrame frame = new JFrame();\n</code></pre>\n<p>Or do it after the creation of the JFrame:</p>\n<pre><code>JFrame frame = new JFrame();\nframe.setUndecorated(true);\nframe.setWindowDecorationStyle(JRootPane.FRAME);\n</code></pre>\n<p>Note that in either case, you are bound to use Swing's Look and Feel for the window decorations. The title bar and handles of the window are therefore going to look different than before.</p>\n"}],"owner":{"account_id":15828804,"reputation":83,"user_id":11420832,"display_name":"P tray"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":647,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1691568556,"creation_date":1557009510,"question_id":55987389,"body_markdown":"I am developing a JFrame window with Swing and AWT, and when I resize the window, it looks like this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAs you can see, a lot of times when I resize the window, it shows a black rectangle where it is being resized and it doesn&#39;t go away until you pause for a moment. Additionally, the circle doesn&#39;t always update accurately with my resize event:\r\n\r\n    frame.addComponentListener(new ComponentAdapter() {\r\n        public void componentResized(ComponentEvent componentEvent) {\r\n            width = frame.getWidth();\r\n            height = frame.getHeight();\r\n            springLayout.putConstraint(SpringLayout.SOUTH, panel, height, SpringLayout.NORTH, frame.getContentPane());\r\n            springLayout.putConstraint(SpringLayout.EAST, panel, width, SpringLayout.WEST, frame.getContentPane());\r\n            panel.repaint();\r\n        }\r\n    });\r\n\r\nThat&#39;s beside the point (though it is possible the two problems are linked). I have only ever encountered this problem when using Swing. JavaFX has never given me this problem. **Is there any way I can remove the black rectangle when the window is resized?**\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zbDts.gif","title":"How to Remove Black Rectangle on Window Resize?","body":"<p>I am developing a JFrame window with Swing and AWT, and when I resize the window, it looks like this:</p>\n<p><a href=\"https://i.stack.imgur.com/zbDts.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zbDts.gif\" alt=\"enter image description here\" /></a></p>\n<p>As you can see, a lot of times when I resize the window, it shows a black rectangle where it is being resized and it doesn't go away until you pause for a moment. Additionally, the circle doesn't always update accurately with my resize event:</p>\n<pre><code>frame.addComponentListener(new ComponentAdapter() {\n    public void componentResized(ComponentEvent componentEvent) {\n        width = frame.getWidth();\n        height = frame.getHeight();\n        springLayout.putConstraint(SpringLayout.SOUTH, panel, height, SpringLayout.NORTH, frame.getContentPane());\n        springLayout.putConstraint(SpringLayout.EAST, panel, width, SpringLayout.WEST, frame.getContentPane());\n        panel.repaint();\n    }\n});\n</code></pre>\n<p>That's beside the point (though it is possible the two problems are linked). I have only ever encountered this problem when using Swing. JavaFX has never given me this problem. <strong>Is there any way I can remove the black rectangle when the window is resized?</strong></p>\n"},{"tags":["java","oracle-cloud-infrastructure"],"answers":[{"tags":[],"owner":{"account_id":19580785,"reputation":41,"user_id":14329906,"display_name":"andrei"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691568472,"creation_date":1691568472,"answer_id":76865765,"question_id":76841748,"body_markdown":"If you intend to interact with OCI resources from the function execution environment, you should consider using Resource Principal authorization as you are not including `~/.oci/config` in the container.\r\n\r\nhttps://blogs.oracle.com/developers/post/instance-and-resource-principal-authentication-with-the-oci-typescriptjavascript-sdk\r\n\r\nNote that you need to create a dynamic policy and a policy to allow the function to manage the LoadBalancers in tenancy/compartment: https://redthunder.blog/2020/09/21/secure-inter-service-communication-in-oci/\r\n\r\nHere is an example using Resource Principal in Java:\r\nhttps://github.com/oracle/oci-java-sdk/blob/master/bmc-examples/src/main/java/FunctionsEphemeralResourcePrincipalAuthenticationDetailsProviderExample.java\r\n","title":"Oracle OCI Function - Config file not accessible","body":"<p>If you intend to interact with OCI resources from the function execution environment, you should consider using Resource Principal authorization as you are not including <code>~/.oci/config</code> in the container.</p>\n<p><a href=\"https://blogs.oracle.com/developers/post/instance-and-resource-principal-authentication-with-the-oci-typescriptjavascript-sdk\" rel=\"nofollow noreferrer\">https://blogs.oracle.com/developers/post/instance-and-resource-principal-authentication-with-the-oci-typescriptjavascript-sdk</a></p>\n<p>Note that you need to create a dynamic policy and a policy to allow the function to manage the LoadBalancers in tenancy/compartment: <a href=\"https://redthunder.blog/2020/09/21/secure-inter-service-communication-in-oci/\" rel=\"nofollow noreferrer\">https://redthunder.blog/2020/09/21/secure-inter-service-communication-in-oci/</a></p>\n<p>Here is an example using Resource Principal in Java:\n<a href=\"https://github.com/oracle/oci-java-sdk/blob/master/bmc-examples/src/main/java/FunctionsEphemeralResourcePrincipalAuthenticationDetailsProviderExample.java\" rel=\"nofollow noreferrer\">https://github.com/oracle/oci-java-sdk/blob/master/bmc-examples/src/main/java/FunctionsEphemeralResourcePrincipalAuthenticationDetailsProviderExample.java</a></p>\n"}],"owner":{"account_id":21540228,"reputation":23,"user_id":15878101,"display_name":"KevLen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":226,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76865765,"answer_count":1,"score":2,"last_activity_date":1691568472,"creation_date":1691240232,"question_id":76841748,"body_markdown":"Hello stackoverflow people!\r\n\r\nI’m deploying a java function with Oracle cloud Shell.\r\n\r\nI made all necessary configurations :\r\n- user creation\r\n- api token creation\r\n- check if ~/.oci/config file is properly created (with DEFAULT settings)\r\n\r\nAfter that I deployed my Java function on a docker container with the command. \r\n```\r\nfn deploy —-app &lt;app name&gt;\r\n```\r\n\r\nThen I called my function:\r\n\r\n```\r\nfn invoke &lt;app name&gt; &lt;function name&gt;\r\n```\r\n\r\nThe goal of my function is to update my Load Balancer RuleSet. \r\n\r\nFinally I had an error message : \r\n\r\n```\r\nError 502 : FunctionInvokeExecutionError \r\n```\r\n\r\nNot a lot of traces available, but I identified that the following code was on error.\r\n\r\n```\r\n  final ConfigFileReader.ConfigFile configFile = \r\n                    ConfigFileReader.parse(“~/.oci/config“, “DEFAULT“);\r\n```\r\n\r\nThe folder and the config file are not accessible by the function.\r\n\r\n\r\nI tried to replace the config file by a new one generated with the command line \r\n```\r\noci setup config \r\n```\r\n\r\nI tried to test the function in local (with the config file in local as well) =&gt; it works.\r\n\r\nThank you very much for your help!\r\n","title":"Oracle OCI Function - Config file not accessible","body":"<p>Hello stackoverflow people!</p>\n<p>I’m deploying a java function with Oracle cloud Shell.</p>\n<p>I made all necessary configurations :</p>\n<ul>\n<li>user creation</li>\n<li>api token creation</li>\n<li>check if ~/.oci/config file is properly created (with DEFAULT settings)</li>\n</ul>\n<p>After that I deployed my Java function on a docker container with the command.</p>\n<pre><code>fn deploy —-app &lt;app name&gt;\n</code></pre>\n<p>Then I called my function:</p>\n<pre><code>fn invoke &lt;app name&gt; &lt;function name&gt;\n</code></pre>\n<p>The goal of my function is to update my Load Balancer RuleSet.</p>\n<p>Finally I had an error message :</p>\n<pre><code>Error 502 : FunctionInvokeExecutionError \n</code></pre>\n<p>Not a lot of traces available, but I identified that the following code was on error.</p>\n<pre><code>  final ConfigFileReader.ConfigFile configFile = \n                    ConfigFileReader.parse(“~/.oci/config“, “DEFAULT“);\n</code></pre>\n<p>The folder and the config file are not accessible by the function.</p>\n<p>I tried to replace the config file by a new one generated with the command line</p>\n<pre><code>oci setup config \n</code></pre>\n<p>I tried to test the function in local (with the config file in local as well) =&gt; it works.</p>\n<p>Thank you very much for your help!</p>\n"},{"tags":["java","kotlin","android-pendingintent","paho","android-12"],"comments":[{"owner":{"account_id":7949816,"reputation":168,"user_id":6000956,"display_name":"Myself"},"score":0,"creation_date":1645206907,"post_id":71155187,"comment_id":125818376,"body_markdown":"Did you find any solution for this even I got the same error? Please post the answer.","body":"Did you find any solution for this even I got the same error? Please post the answer."},{"owner":{"account_id":19925506,"reputation":314,"user_id":14600303,"display_name":"Joseph Ofem"},"score":0,"creation_date":1645364080,"post_id":71155187,"comment_id":125846529,"body_markdown":"I have not found a solution yet.","body":"I have not found a solution yet."},{"owner":{"account_id":7949816,"reputation":168,"user_id":6000956,"display_name":"Myself"},"score":0,"creation_date":1645436228,"post_id":71155187,"comment_id":125862185,"body_markdown":"Use this jar file for a temporary solution for &#39;&#39;org.eclipse.paho:org.eclipse.paho.android.service:1.1.1&#39;&#39;  until they fix the solution. This works for me\nhttps://github.com/hannesa2/paho.mqtt.android/releases/tag/3.3.0","body":"Use this jar file for a temporary solution for &#39;&#39;org.eclipse.paho:org.eclipse.paho.android.service:1.1.1&#39;&#39;  until they fix the solution. This works for me <a href=\"https://github.com/hannesa2/paho.mqtt.android/releases/tag/3.3.0\" rel=\"nofollow noreferrer\">github.com/hannesa2/paho.mqtt.android/releases/tag/3.3.0</a>"},{"owner":{"account_id":19925506,"reputation":314,"user_id":14600303,"display_name":"Joseph Ofem"},"score":0,"creation_date":1646147032,"post_id":71155187,"comment_id":126048340,"body_markdown":"can you please work me through the procedure","body":"can you please work me through the procedure"},{"owner":{"account_id":7949816,"reputation":168,"user_id":6000956,"display_name":"Myself"},"score":0,"creation_date":1646581277,"post_id":71155187,"comment_id":126153877,"body_markdown":"Download the &quot;serviceLibrary-release.aar&quot; file from the https://github.com/hannesa2/paho.mqtt.android/releases/tag/3.3.0   \n add it to the project then remove the &quot;&#39;org.eclipse.paho:org.eclipse.paho.android.service:1.1.1&quot; dependency from Gradle. \nimport the Service class from the jar library. &quot;import info.mqtt.android.service.MqttAndroidClient&quot;.\nHow to add the jar file to the project is in the below link\n&quot;https://www.geeksforgeeks.org/how-to-import-external-jar-files-in-android-studio/&quot;","body":"Download the &quot;serviceLibrary-release.aar&quot; file from the <a href=\"https://github.com/hannesa2/paho.mqtt.android/releases/tag/3.3.0\" rel=\"nofollow noreferrer\">github.com/hannesa2/paho.mqtt.android/releases/tag/3.3.0</a>     add it to the project then remove the &quot;&#39;org.eclipse.paho:org.eclipse.paho.android.service:1.1.1&quot; dependency from Gradle.  import the Service class from the jar library. &quot;import info.mqtt.android.service.MqttAndroidClient&quot;. How to add the jar file to the project is in the below link &quot;<a href=\"https://www.geeksforgeeks.org/how-to-import-external-jar-files-in-android-studio/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/&hellip;</a>&quot;"},{"owner":{"account_id":19925506,"reputation":314,"user_id":14600303,"display_name":"Joseph Ofem"},"score":0,"creation_date":1646734991,"post_id":71155187,"comment_id":126191868,"body_markdown":"Wow! you saved an entire project. Thanks a lot. @Myself","body":"Wow! you saved an entire project. Thanks a lot. @Myself"},{"owner":{"account_id":18919046,"reputation":159,"user_id":13803453,"display_name":"garrettb"},"score":0,"creation_date":1684518345,"post_id":71155187,"comment_id":134534126,"body_markdown":"Hi. I have the same issue. I am working with this project: https://github.com/leonardocavagnis/MQTTClientSample_Android. And I get the same error. When I perform the changes above, that you recommend, I get a new error for the &quot;import info.mqtt.android.service.MqttAndroidClient&quot;, it cannot resolve &#39;info&#39;","body":"Hi. I have the same issue. I am working with this project: <a href=\"https://github.com/leonardocavagnis/MQTTClientSample_Android\" rel=\"nofollow noreferrer\">github.com/leonardocavagnis/MQTTClientSample_Android</a>. And I get the same error. When I perform the changes above, that you recommend, I get a new error for the &quot;import info.mqtt.android.service.MqttAndroidClient&quot;, it cannot resolve &#39;info&#39;"}],"answers":[{"comments":[{"owner":{"account_id":19925506,"reputation":314,"user_id":14600303,"display_name":"Joseph Ofem"},"score":1,"creation_date":1645530811,"post_id":71206428,"comment_id":125890558,"body_markdown":"Thanks for the answer but it didn&#39;t solve the problem","body":"Thanks for the answer but it didn&#39;t solve the problem"},{"owner":{"account_id":14220491,"reputation":27,"user_id":10272953,"display_name":"Dharmik Modi"},"score":0,"creation_date":1645617757,"post_id":71206428,"comment_id":125918611,"body_markdown":"Can you tell me the error what you get?","body":"Can you tell me the error what you get?"},{"owner":{"account_id":14220491,"reputation":27,"user_id":10272953,"display_name":"Dharmik Modi"},"score":0,"creation_date":1645618151,"post_id":71206428,"comment_id":125918772,"body_markdown":"I posted another answer, hope resolved your issue.","body":"I posted another answer, hope resolved your issue."},{"owner":{"account_id":19925506,"reputation":314,"user_id":14600303,"display_name":"Joseph Ofem"},"score":0,"creation_date":1645629739,"post_id":71206428,"comment_id":125923982,"body_markdown":"The app crashes with the error above","body":"The app crashes with the error above"}],"tags":[],"owner":{"account_id":14220491,"reputation":27,"user_id":10272953,"display_name":"Dharmik Modi"},"comment_count":4,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1645446995,"creation_date":1645446995,"answer_id":71206428,"question_id":71155187,"body_markdown":"Update the library of firebase:\r\n\r\nimplementation platform(&#39;com.google.firebase:firebase-bom:29.1.0&#39;)\r\nimplementation &#39;com.google.firebase:firebase-messaging&#39;\r\n\r\nand remove implementation &#39;com.google.firebase:firebase-messaging:23.0.0&#39;\r\n","title":"Android paho mqtt crashes Android 12 - Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE","body":"<p>Update the library of firebase:</p>\n<p>implementation platform('com.google.firebase:firebase-bom:29.1.0')\nimplementation 'com.google.firebase:firebase-messaging'</p>\n<p>and remove implementation 'com.google.firebase:firebase-messaging:23.0.0'</p>\n"},{"comments":[{"owner":{"account_id":19925506,"reputation":314,"user_id":14600303,"display_name":"Joseph Ofem"},"score":0,"creation_date":1645629963,"post_id":71236658,"comment_id":125924087,"body_markdown":"From my observation, the error is from the third party library (implementation &#39;org.eclipse.paho:org.eclipse.paho.android.service:1.1.1&#39;) I am using. It does not have an update yet.","body":"From my observation, the error is from the third party library (implementation &#39;org.eclipse.paho:org.eclipse.paho.android.service:1.1.1&#39;) I am using. It does not have an update yet."},{"owner":{"account_id":14220491,"reputation":27,"user_id":10272953,"display_name":"Dharmik Modi"},"score":0,"creation_date":1645684304,"post_id":71236658,"comment_id":125938822,"body_markdown":"Are you using Eclipse or Android Studio, if Eclipse then I have no idea!","body":"Are you using Eclipse or Android Studio, if Eclipse then I have no idea!"},{"owner":{"account_id":19925506,"reputation":314,"user_id":14600303,"display_name":"Joseph Ofem"},"score":0,"creation_date":1645691642,"post_id":71236658,"comment_id":125940830,"body_markdown":"I am using android studio","body":"I am using android studio"},{"owner":{"account_id":14220491,"reputation":27,"user_id":10272953,"display_name":"Dharmik Modi"},"score":0,"creation_date":1645695072,"post_id":71236658,"comment_id":125941986,"body_markdown":"are you using Latest gradle version?","body":"are you using Latest gradle version?"},{"owner":{"account_id":19925506,"reputation":314,"user_id":14600303,"display_name":"Joseph Ofem"},"score":0,"creation_date":1645699929,"post_id":71236658,"comment_id":125943804,"body_markdown":"Yes. I am using the current Gradle version","body":"Yes. I am using the current Gradle version"},{"owner":{"account_id":14220491,"reputation":27,"user_id":10272953,"display_name":"Dharmik Modi"},"score":0,"creation_date":1645770558,"post_id":71236658,"comment_id":125963819,"body_markdown":"Ohhh can i show your sample code where you got crash?","body":"Ohhh can i show your sample code where you got crash?"}],"tags":[],"owner":{"account_id":14220491,"reputation":27,"user_id":10272953,"display_name":"Dharmik Modi"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645618078,"creation_date":1645618078,"answer_id":71236658,"question_id":71155187,"body_markdown":"You need to replace &quot;PendingIntent.FLAG_ONE_SHOT&quot; or &quot;PendingIntent.FLAG_UPDATE_CURRENT&quot; with &quot;PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_IMMUTABLE&quot;\r\n\r\nexample:\r\n\r\nalarmIntent = PendingIntent.getBroadcast(context, 0, new Intent(context, AutostartReceiver.class), PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_IMMUTABLE);","title":"Android paho mqtt crashes Android 12 - Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE","body":"<p>You need to replace &quot;PendingIntent.FLAG_ONE_SHOT&quot; or &quot;PendingIntent.FLAG_UPDATE_CURRENT&quot; with &quot;PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_IMMUTABLE&quot;</p>\n<p>example:</p>\n<p>alarmIntent = PendingIntent.getBroadcast(context, 0, new Intent(context, AutostartReceiver.class), PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_IMMUTABLE);</p>\n"},{"comments":[{"owner":{"account_id":19925506,"reputation":314,"user_id":14600303,"display_name":"Joseph Ofem"},"score":0,"creation_date":1646831118,"post_id":71404563,"comment_id":126220390,"body_markdown":"Once again, thanks","body":"Once again, thanks"},{"owner":{"account_id":14910426,"reputation":144,"user_id":10766098,"display_name":"codeman"},"score":0,"creation_date":1650354838,"post_id":71404563,"comment_id":127088640,"body_markdown":"Thanks!. Unfortunately I also had to add Timber to my project as the library contains a dependency on it :(","body":"Thanks!. Unfortunately I also had to add Timber to my project as the library contains a dependency on it :("},{"owner":{"account_id":1239458,"reputation":389,"user_id":1202401,"accept_rate":80,"display_name":"Emre Can Serteli"},"score":0,"creation_date":1655812293,"post_id":71404563,"comment_id":128415321,"body_markdown":"For anyone trying to import the aar file and getting various errors: Just forget about the aar file and add the related dependencies to your build.gradle as shown in the GitHub page. Otherwise, it may throw some errors about missing libraries.","body":"For anyone trying to import the aar file and getting various errors: Just forget about the aar file and add the related dependencies to your build.gradle as shown in the GitHub page. Otherwise, it may throw some errors about missing libraries."}],"tags":[],"owner":{"account_id":7949816,"reputation":168,"user_id":6000956,"display_name":"Myself"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1646802364,"creation_date":1646802364,"answer_id":71404563,"question_id":71155187,"body_markdown":"If you are using the MQTT library they have not updated for the Android 12. So when you use Android 12 as the target version it throws an error in PendingIntent. \r\nFor a temporary solution, I had found a library they had upgraded for compatibility with Android 12. \r\n[MQTT service library][1]\r\n\r\n\r\nDownload the &quot;serviceLibrary-release.aar&quot; and add it to your project. Then remove the &quot;&#39;org.eclipse.paho:org.eclipse.paho.android.service:1.1.1&quot; dependency from Gradle. Use &quot;import info.mqtt.android.service.MqttAndroidClient&quot; wherever you are using.\r\n \r\n[How to import aar file][2]\r\n\r\n\r\n  [1]: https://github.com/hannesa2/paho.mqtt.android/releases/tag/3.3.0\r\n  [2]: https://www.geeksforgeeks.org/how-to-import-external-jar-files-in-android-studio/\r\n\r\nThis solved my MQTT library issues. ","title":"Android paho mqtt crashes Android 12 - Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE","body":"<p>If you are using the MQTT library they have not updated for the Android 12. So when you use Android 12 as the target version it throws an error in PendingIntent.\nFor a temporary solution, I had found a library they had upgraded for compatibility with Android 12.\n<a href=\"https://github.com/hannesa2/paho.mqtt.android/releases/tag/3.3.0\" rel=\"nofollow noreferrer\">MQTT service library</a></p>\n<p>Download the &quot;serviceLibrary-release.aar&quot; and add it to your project. Then remove the &quot;'org.eclipse.paho:org.eclipse.paho.android.service:1.1.1&quot; dependency from Gradle. Use &quot;import info.mqtt.android.service.MqttAndroidClient&quot; wherever you are using.</p>\n<p><a href=\"https://www.geeksforgeeks.org/how-to-import-external-jar-files-in-android-studio/\" rel=\"nofollow noreferrer\">How to import aar file</a></p>\n<p>This solved my MQTT library issues.</p>\n"},{"comments":[{"owner":{"account_id":1354176,"reputation":83,"user_id":1292926,"accept_rate":75,"display_name":"muyoungko"},"score":2,"creation_date":1656658354,"post_id":71839305,"comment_id":128630516,"body_markdown":"What should i do on &lt;service android:name=&quot;org.eclipse.paho.android.service.MqttService&quot; /&gt; at Android Manifest","body":"What should i do on &lt;service android:name=&quot;org.eclipse.paho.android.service.MqttService&quot; /&gt; at Android Manifest"},{"owner":{"account_id":5043358,"reputation":230,"user_id":4050083,"display_name":"AKTanara"},"score":1,"creation_date":1658889474,"post_id":71839305,"comment_id":129161825,"body_markdown":"Invaluable... You have covered all my issues in one post. Thank.","body":"Invaluable... You have covered all my issues in one post. Thank."},{"owner":{"account_id":9585965,"reputation":423,"user_id":7118726,"display_name":"Gmacv"},"score":0,"creation_date":1659093802,"post_id":71839305,"comment_id":129219288,"body_markdown":"@muyoungko it&#39;s gonna be in red. Let it be. The app would still work.","body":"@muyoungko it&#39;s gonna be in red. Let it be. The app would still work."},{"owner":{"account_id":29526,"reputation":2260,"user_id":79853,"accept_rate":89,"display_name":"Joel "},"score":0,"creation_date":1679682348,"post_id":71839305,"comment_id":133770936,"body_markdown":"I tried this out, but Android Studio was unable to resolve com.github.hannesa2. I ended up downloading the AAR but using the rest of the steps described here.","body":"I tried this out, but Android Studio was unable to resolve com.github.hannesa2. I ended up downloading the AAR but using the rest of the steps described here."},{"owner":{"account_id":356331,"reputation":164,"user_id":1889421,"display_name":"Sahelanthropus"},"score":0,"creation_date":1688548285,"post_id":71839305,"comment_id":135086608,"body_markdown":"Works also on android 13 sdk 33!","body":"Works also on android 13 sdk 33!"},{"owner":{"account_id":7941961,"reputation":1508,"user_id":5995648,"display_name":"Arbaz.in"},"score":0,"creation_date":1691064316,"post_id":71839305,"comment_id":135442700,"body_markdown":"@Gmacv do you have example code of build.gradle(both level) part?","body":"@Gmacv do you have example code of build.gradle(both level) part?"},{"owner":{"account_id":6431084,"reputation":670,"user_id":5339146,"accept_rate":57,"display_name":"Mihodi Lushan"},"score":0,"creation_date":1692590586,"post_id":71839305,"comment_id":135639015,"body_markdown":"works great, using it in production","body":"works great, using it in production"}],"tags":[],"owner":{"account_id":9585965,"reputation":423,"user_id":7118726,"display_name":"Gmacv"},"comment_count":7,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1679681106,"creation_date":1649751724,"answer_id":71839305,"question_id":71155187,"body_markdown":"The [Eclipse Paho MQTT library][1] is not updated for Android 12 pending Intents. Until then, we can use [this MQTT client][2] instead.\r\nInstead of using a jar file which was advised in [myself&#39;s answer][3], I would recommend to use gradle dependancies.\r\n\r\nIn App Gradle, comment this eclipse service dependancy:\r\n\r\n    implementation &#39;org.eclipse.paho:org.eclipse.paho.android.service:1.1.1&#39;\r\n\r\n&amp; Add these instead where 3.3.5 is the current version:\r\n\r\n    //new mqtt library that supports android 12\r\n    implementation &#39;androidx.legacy:legacy-support-v4:1.0.0&#39;\r\n    implementation &#39;com.github.hannesa2:paho.mqtt.android:3.3.5&#39;\r\n\r\nDo not remove the eclipse client dependancy,\r\n\r\n    implementation &#39;org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.2.5&#39;\r\n\r\nFor imports, remove this eclipse import\r\n\r\n    import org.eclipse.paho.android.service.MqttAndroidClient;\r\n\r\n&amp; replace it with the new:\r\n\r\n    import info.mqtt.android.service.MqttAndroidClient;\r\n\r\nFor MQTT android client, add the last Ack param like this\r\n\r\n    client = new MqttAndroidClient(context, serverURI, clientId, Ack.AUTO_ACK);\r\n\r\nAdditionally, if you were using try catch with `MqttException` then you can comment it up as the new library doesn&#39;t require the same.\r\n\r\n\r\n  [1]: https://github.com/eclipse/paho.mqtt.android\r\n  [2]: https://github.com/hannesa2/paho.mqtt.android\r\n  [3]: https://stackoverflow.com/a/71404563/7118726","title":"Android paho mqtt crashes Android 12 - Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE","body":"<p>The <a href=\"https://github.com/eclipse/paho.mqtt.android\" rel=\"noreferrer\">Eclipse Paho MQTT library</a> is not updated for Android 12 pending Intents. Until then, we can use <a href=\"https://github.com/hannesa2/paho.mqtt.android\" rel=\"noreferrer\">this MQTT client</a> instead.\nInstead of using a jar file which was advised in <a href=\"https://stackoverflow.com/a/71404563/7118726\">myself's answer</a>, I would recommend to use gradle dependancies.</p>\n<p>In App Gradle, comment this eclipse service dependancy:</p>\n<pre><code>implementation 'org.eclipse.paho:org.eclipse.paho.android.service:1.1.1'\n</code></pre>\n<p>&amp; Add these instead where 3.3.5 is the current version:</p>\n<pre><code>//new mqtt library that supports android 12\nimplementation 'androidx.legacy:legacy-support-v4:1.0.0'\nimplementation 'com.github.hannesa2:paho.mqtt.android:3.3.5'\n</code></pre>\n<p>Do not remove the eclipse client dependancy,</p>\n<pre><code>implementation 'org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.2.5'\n</code></pre>\n<p>For imports, remove this eclipse import</p>\n<pre><code>import org.eclipse.paho.android.service.MqttAndroidClient;\n</code></pre>\n<p>&amp; replace it with the new:</p>\n<pre><code>import info.mqtt.android.service.MqttAndroidClient;\n</code></pre>\n<p>For MQTT android client, add the last Ack param like this</p>\n<pre><code>client = new MqttAndroidClient(context, serverURI, clientId, Ack.AUTO_ACK);\n</code></pre>\n<p>Additionally, if you were using try catch with <code>MqttException</code> then you can comment it up as the new library doesn't require the same.</p>\n"},{"tags":[],"owner":{"account_id":3846181,"reputation":31,"user_id":9681342,"display_name":"Somsak Elect"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657378050,"creation_date":1657378050,"answer_id":72922323,"question_id":71155187,"body_markdown":"This is [Java library][1] that modified from [paho.mqtt.android][2] library. It is fixed for Android 12\r\n\r\n\r\n  [1]: https://github.com/ElectApp/MyMQTT\r\n  [2]: https://github.com/eclipse/paho.mqtt.android","title":"Android paho mqtt crashes Android 12 - Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE","body":"<p>This is <a href=\"https://github.com/ElectApp/MyMQTT\" rel=\"nofollow noreferrer\">Java library</a> that modified from <a href=\"https://github.com/eclipse/paho.mqtt.android\" rel=\"nofollow noreferrer\">paho.mqtt.android</a> library. It is fixed for Android 12</p>\n"},{"tags":[],"owner":{"account_id":12057644,"reputation":1537,"user_id":8817821,"display_name":"Mehrdad"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677056844,"creation_date":1677056844,"answer_id":75530364,"question_id":71155187,"body_markdown":"The best way to solve this problem is by editing the source code. To do this, copy all library files to your project, then open the AlarmPingSender.java file and find the code below near line 75:\r\n\r\n    pendingIntent = PendingIntent.getBroadcast(service, 0, new Intent(\r\n                    action), PendingIntent.FLAG_UPDATE_CURRENT)\r\n\r\nReplace the code with the following:\r\n\r\n\r\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S) {\r\n            pendingIntent = PendingIntent.getBroadcast(service, 0, new Intent(\r\n                    action), PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_IMMUTABLE);\r\n        } else {\r\n            pendingIntent = PendingIntent.getBroadcast(service, 0, new Intent(\r\n                    action), PendingIntent.FLAG_UPDATE_CURRENT);\r\n\r\n        }\r\n\r\nNow replace your &#39;import&#39; with the new file. This should solve the problem.\r\n","title":"Android paho mqtt crashes Android 12 - Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE","body":"<p>The best way to solve this problem is by editing the source code. To do this, copy all library files to your project, then open the AlarmPingSender.java file and find the code below near line 75:</p>\n<pre><code>pendingIntent = PendingIntent.getBroadcast(service, 0, new Intent(\n                action), PendingIntent.FLAG_UPDATE_CURRENT)\n</code></pre>\n<p>Replace the code with the following:</p>\n<pre><code>if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S) {\n        pendingIntent = PendingIntent.getBroadcast(service, 0, new Intent(\n                action), PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_IMMUTABLE);\n    } else {\n        pendingIntent = PendingIntent.getBroadcast(service, 0, new Intent(\n                action), PendingIntent.FLAG_UPDATE_CURRENT);\n\n    }\n</code></pre>\n<p>Now replace your 'import' with the new file. This should solve the problem.</p>\n"},{"tags":[],"owner":{"account_id":12719104,"reputation":21,"user_id":9240153,"display_name":"Victor Han"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691568353,"creation_date":1689916160,"answer_id":76735262,"question_id":71155187,"body_markdown":"In case Android Studio is unable to resolve `com.github.hannesa2`:\r\n```\r\n//new mqtt library that supports android 12\r\nimplementation &#39;androidx.legacy:legacy-support-v4:1.0.0&#39;\r\nimplementation &#39;com.github.hannesa2:paho.mqtt.android:3.3.5@aar&#39;\r\nimplementation &#39;androidx.room:room-runtime:2.3.0&#39;\r\nimplementation &#39;com.jakewharton.timber:timber:5.0.1&#39;\r\n\r\n// Add below to fix Runtime error(ClassNotFoundException)\r\nimplementation &#39;org.jetbrains.kotlinx:kotlinx-coroutines-android:1.5.2&#39;\r\n```\r\n\r\nIf you use Gradle 7 or later, add this below to `settings.gradle`:\r\n```\r\ndependencyResolutionManagement {\r\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n        maven { url &#39;https://jitpack.io&#39; }\r\n    }\r\n}\r\n```","title":"Android paho mqtt crashes Android 12 - Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE","body":"<p>In case Android Studio is unable to resolve <code>com.github.hannesa2</code>:</p>\n<pre><code>//new mqtt library that supports android 12\nimplementation 'androidx.legacy:legacy-support-v4:1.0.0'\nimplementation 'com.github.hannesa2:paho.mqtt.android:3.3.5@aar'\nimplementation 'androidx.room:room-runtime:2.3.0'\nimplementation 'com.jakewharton.timber:timber:5.0.1'\n\n// Add below to fix Runtime error(ClassNotFoundException)\nimplementation 'org.jetbrains.kotlinx:kotlinx-coroutines-android:1.5.2'\n</code></pre>\n<p>If you use Gradle 7 or later, add this below to <code>settings.gradle</code>:</p>\n<pre><code>dependencyResolutionManagement {\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\n    repositories {\n        google()\n        mavenCentral()\n        maven { url 'https://jitpack.io' }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":19925506,"reputation":314,"user_id":14600303,"display_name":"Joseph Ofem"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9726,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":7,"score":9,"last_activity_date":1691568353,"creation_date":1645088924,"question_id":71155187,"body_markdown":"I am using &#39;org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.2.5&#39; for mqtt service and the app keeps crashing on android 12 devices with the following crash logs\r\n\r\n    \r\n\r\n    java.lang.IllegalArgumentException: app id: Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE be specified when creating a PendingIntent.\r\n        Strongly consider using FLAG_IMMUTABLE, only use FLAG_MUTABLE if some functionality depends on the PendingIntent being mutable, e.g. if it needs to be used with inline replies or bubbles.\r\n            at android.app.PendingIntent.checkFlags(PendingIntent.java:382)\r\n            at android.app.PendingIntent.getBroadcastAsUser(PendingIntent.java:673)\r\n            at android.app.PendingIntent.getBroadcast(PendingIntent.java:660)\r\n            at org.eclipse.paho.android.service.AlarmPingSender.start(AlarmPingSender.java:76)\r\n            at org.eclipse.paho.client.mqttv3.internal.ClientState.connected(ClientState.java:1214)\r\n            at org.eclipse.paho.client.mqttv3.internal.ClientState.notifyReceivedAck(ClientState.java:1050)\r\n            at org.eclipse.paho.client.mqttv3.internal.CommsReceiver.run(CommsReceiver.java:151)\r\n\r\n\r\nThis is the library I am using:\r\n\r\n    implementation &#39;org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.2.5&#39;\r\n    implementation &#39;org.eclipse.paho:org.eclipse.paho.android.service:1.1.1&#39;","title":"Android paho mqtt crashes Android 12 - Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE","body":"<p>I am using 'org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.2.5' for mqtt service and the app keeps crashing on android 12 devices with the following crash logs</p>\n<pre><code>java.lang.IllegalArgumentException: app id: Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE be specified when creating a PendingIntent.\n    Strongly consider using FLAG_IMMUTABLE, only use FLAG_MUTABLE if some functionality depends on the PendingIntent being mutable, e.g. if it needs to be used with inline replies or bubbles.\n        at android.app.PendingIntent.checkFlags(PendingIntent.java:382)\n        at android.app.PendingIntent.getBroadcastAsUser(PendingIntent.java:673)\n        at android.app.PendingIntent.getBroadcast(PendingIntent.java:660)\n        at org.eclipse.paho.android.service.AlarmPingSender.start(AlarmPingSender.java:76)\n        at org.eclipse.paho.client.mqttv3.internal.ClientState.connected(ClientState.java:1214)\n        at org.eclipse.paho.client.mqttv3.internal.ClientState.notifyReceivedAck(ClientState.java:1050)\n        at org.eclipse.paho.client.mqttv3.internal.CommsReceiver.run(CommsReceiver.java:151)\n</code></pre>\n<p>This is the library I am using:</p>\n<pre><code>implementation 'org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.2.5'\nimplementation 'org.eclipse.paho:org.eclipse.paho.android.service:1.1.1'\n</code></pre>\n"},{"tags":["java","unit-testing","mockito","junit5"],"comments":[{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":6,"creation_date":1691564495,"post_id":76865315,"comment_id":135506994,"body_markdown":"Why in the world would you want to mock a collection?","body":"Why in the world would you want to mock a collection?"},{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":1,"creation_date":1691564670,"post_id":76865315,"comment_id":135507020,"body_markdown":"And if you did want to mock a collection, it would generally make more sense to mock the interface, not a specific implementation, since most code shouldn&#39;t care about the specific implementation class of a collection. e.g. `mock(Map.class)`, `mock(Set.class)`, or `mock(List.class)`; not `mock(ConcurrentHashMap.class)`, `mock(HashSet.class)` or `mock(ArrayList.class)`.","body":"And if you did want to mock a collection, it would generally make more sense to mock the interface, not a specific implementation, since most code shouldn&#39;t care about the specific implementation class of a collection. e.g. <code>mock(Map.class)</code>, <code>mock(Set.class)</code>, or <code>mock(List.class)</code>; not <code>mock(ConcurrentHashMap.class)</code>, <code>mock(HashSet.class)</code> or <code>mock(ArrayList.class)</code>."},{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":1,"creation_date":1691565103,"post_id":76865315,"comment_id":135507097,"body_markdown":"Have you tried mocking an interface, or mocking a class that isn&#39;t final?  For instance, `public class MyClass { public String pleaseMockMe() { return &quot;Not yet mocked&quot;; } }` `mock(MyClass.class)`.","body":"Have you tried mocking an interface, or mocking a class that isn&#39;t final?  For instance, <code>public class MyClass { public String pleaseMockMe() { return &quot;Not yet mocked&quot;; } }</code> <code>mock(MyClass.class)</code>."}],"answers":[{"comments":[{"owner":{"account_id":23987397,"reputation":7,"user_id":17974031,"display_name":"MohanaSundaram J"},"score":0,"creation_date":1691574382,"post_id":76865678,"comment_id":135508888,"body_markdown":"Thank you. Actually, my build file already contained an old version of mockito, which I didn&#39;t notice earlier. So, I added the new mockito dependency, which resolved this error.","body":"Thank you. Actually, my build file already contained an old version of mockito, which I didn&#39;t notice earlier. So, I added the new mockito dependency, which resolved this error."},{"owner":{"account_id":14879218,"reputation":383,"user_id":10744429,"display_name":"WLefever"},"score":0,"creation_date":1691574895,"post_id":76865678,"comment_id":135509001,"body_markdown":"You&#39;re welcome! Glad the issue is resolved.","body":"You&#39;re welcome! Glad the issue is resolved."},{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1691594867,"post_id":76865678,"comment_id":135513524,"body_markdown":"From [the documentation](https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#39), Mockito versions between 2.1.0 (inclusive) and 5.0.0 (exclusive) allowed mocking final classes, but it was disabled by default.  Starting with 5.0.0, it was enabled by default.  Which would explain why it didn&#39;t work until the version was upgraded.","body":"From <a href=\"https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#39\" rel=\"nofollow noreferrer\">the documentation</a>, Mockito versions between 2.1.0 (inclusive) and 5.0.0 (exclusive) allowed mocking final classes, but it was disabled by default.  Starting with 5.0.0, it was enabled by default.  Which would explain why it didn&#39;t work until the version was upgraded."}],"tags":[],"owner":{"account_id":14879218,"reputation":383,"user_id":10744429,"display_name":"WLefever"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691567635,"creation_date":1691567635,"answer_id":76865678,"question_id":76865315,"body_markdown":"Which version of Mockito do you use?\r\n\r\nI create an example in this [GitHub repository](https://github.com/Lefeverw/stackoverflow-mockito-concurrent-hashmap) and mocking `ConcurrentHashMap` seems to work fine.\r\n\r\n```\r\nclass UtilTest {\r\n\r\n    private ConcurrentHashMap map;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        map = mock(ConcurrentHashMap.class);\r\n    }\r\n\r\n    @Test\r\n    void test(){\r\n        when(map.get(&quot;key&quot;)).thenReturn(&quot;value&quot;);\r\n\r\n        assertEquals(&quot;value&quot;, map.get(&quot;key&quot;));\r\n    }\r\n}\r\n```","title":"Can&#39;t Mock Anything in Mockito","body":"<p>Which version of Mockito do you use?</p>\n<p>I create an example in this <a href=\"https://github.com/Lefeverw/stackoverflow-mockito-concurrent-hashmap\" rel=\"nofollow noreferrer\">GitHub repository</a> and mocking <code>ConcurrentHashMap</code> seems to work fine.</p>\n<pre><code>class UtilTest {\n\n    private ConcurrentHashMap map;\n\n    @BeforeEach\n    void setUp() {\n        map = mock(ConcurrentHashMap.class);\n    }\n\n    @Test\n    void test(){\n        when(map.get(&quot;key&quot;)).thenReturn(&quot;value&quot;);\n\n        assertEquals(&quot;value&quot;, map.get(&quot;key&quot;));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23987397,"reputation":7,"user_id":17974031,"display_name":"MohanaSundaram J"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":126,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76865678,"answer_count":1,"score":0,"last_activity_date":1691567635,"creation_date":1691564293,"question_id":76865315,"body_markdown":"I&#39;m new to Unit testing and Tried to Mock a map using Mockito. \r\n\r\nWhen I tried to mock ConcurrentHashMap it  throws error like this . Not only Hash map it throws error for all Object . \r\n\r\n```lang-java\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport java.util.concurrent.ConcurrentHashMap;\r\n\r\nimport static org.mockito.Mockito.mock;\r\n\r\nclass UtilsTest {\r\n\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        ConcurrentHashMap mockedMap = mock(ConcurrentHashMap.class);\r\n    }\r\n\r\n    @Test\r\n    void lessLoadedServersCount(){\r\n\r\n    }\r\n}\r\n```\r\n\r\n```lang-none\r\norg.mockito.exceptions.base.MockitoException: \r\nMockito cannot mock this class: class java.util.concurrent.ConcurrentHashMap.\r\n\r\nMockito can only non-private &amp; non-final classes.\r\nIf you&#39;re not sure why you&#39;re getting this error, please report to the mailing list.\r\n\r\n\r\nJava               : 11\r\nJVM vendor name    : OpenLogic\r\nJVM vendor version : 11.0.19+7-adhoc.admin.jdk11u\r\nJVM name           : OpenJDK 64-Bit Server VM\r\nJVM version        : 11.0.19+7-adhoc.admin.jdk11u\r\nJVM info           : mixed mode\r\nOS name            : Mac OS X\r\nOS version         : 13.2.1\r\n\r\n\r\n\r\nUnderlying exception : java.lang.UnsupportedOperationException: Cannot define class using reflection: Could not find sun.misc.Unsafe\r\n```\r\n\r\nTried With List and Sets as well getting same error . I tried with JDK 19 getting same error. \r\n\r\n```lang-none\r\norg.mockito.exceptions.base.MockitoException: \r\nMockito cannot mock this class: class java.util.ArrayList.\r\n\r\nMockito can only non-private &amp; non-final classes.\r\nIf you&#39;re not sure why you&#39;re getting this error, please report to the mailing list.\r\n```\r\n\r\n```lang-none\r\norg.mockito.exceptions.base.MockitoException: \r\nMockito cannot mock this class: class java.util.HashSet.\r\n\r\nMockito can only non-private &amp; non-final classes.\r\nIf you&#39;re not sure why you&#39;re getting this error, please report to the mailing list.\r\n```","title":"Can&#39;t Mock Anything in Mockito","body":"<p>I'm new to Unit testing and Tried to Mock a map using Mockito.</p>\n<p>When I tried to mock ConcurrentHashMap it  throws error like this . Not only Hash map it throws error for all Object .</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\n\nimport java.util.concurrent.ConcurrentHashMap;\n\nimport static org.mockito.Mockito.mock;\n\nclass UtilsTest {\n\n\n    @BeforeEach\n    void setUp() {\n        ConcurrentHashMap mockedMap = mock(ConcurrentHashMap.class);\n    }\n\n    @Test\n    void lessLoadedServersCount(){\n\n    }\n}\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>org.mockito.exceptions.base.MockitoException: \nMockito cannot mock this class: class java.util.concurrent.ConcurrentHashMap.\n\nMockito can only non-private &amp; non-final classes.\nIf you're not sure why you're getting this error, please report to the mailing list.\n\n\nJava               : 11\nJVM vendor name    : OpenLogic\nJVM vendor version : 11.0.19+7-adhoc.admin.jdk11u\nJVM name           : OpenJDK 64-Bit Server VM\nJVM version        : 11.0.19+7-adhoc.admin.jdk11u\nJVM info           : mixed mode\nOS name            : Mac OS X\nOS version         : 13.2.1\n\n\n\nUnderlying exception : java.lang.UnsupportedOperationException: Cannot define class using reflection: Could not find sun.misc.Unsafe\n</code></pre>\n<p>Tried With List and Sets as well getting same error . I tried with JDK 19 getting same error.</p>\n<pre class=\"lang-none prettyprint-override\"><code>org.mockito.exceptions.base.MockitoException: \nMockito cannot mock this class: class java.util.ArrayList.\n\nMockito can only non-private &amp; non-final classes.\nIf you're not sure why you're getting this error, please report to the mailing list.\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>org.mockito.exceptions.base.MockitoException: \nMockito cannot mock this class: class java.util.HashSet.\n\nMockito can only non-private &amp; non-final classes.\nIf you're not sure why you're getting this error, please report to the mailing list.\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1560751817,"post_id":56625520,"comment_id":99823534,"body_markdown":"In my understanding “consuming” the event means indicating that no other handler should handle the event. “Handle” does not necessarily imply that. I don’t know Android well enough to tell whether this is also the intended meaning there, though.","body":"In my understanding “consuming” the event means indicating that no other handler should handle the event. “Handle” does not necessarily imply that. I don’t know Android well enough to tell whether this is also the intended meaning there, though."},{"owner":{"account_id":5212777,"reputation":20542,"user_id":4168607,"accept_rate":28,"display_name":"ADM"},"score":0,"creation_date":1560752432,"post_id":56625520,"comment_id":99823781,"body_markdown":"Possible duplicate of [What is meaning of boolean value returned from an event-handling method in Android](https://stackoverflow.com/questions/3756383/what-is-meaning-of-boolean-value-returned-from-an-event-handling-method-in-andro)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/3756383/what-is-meaning-of-boolean-value-returned-from-an-event-handling-method-in-andro\">What is meaning of boolean value returned from an event-handling method in Android</a>"},{"owner":{"account_id":14571721,"reputation":53,"user_id":10535182,"display_name":"Zac"},"score":0,"creation_date":1560753024,"post_id":56625520,"comment_id":99823983,"body_markdown":"@ADM, i have looked through that. I don&#39;t believe that question/answer is quite aligned to what I am asking. It doesn&#39;t seem to explain the differences between the 2 actions; &quot;handle&quot; and &quot;consume&quot;.","body":"@ADM, i have looked through that. I don&#39;t believe that question/answer is quite aligned to what I am asking. It doesn&#39;t seem to explain the differences between the 2 actions; &quot;handle&quot; and &quot;consume&quot;."}],"answers":[{"tags":[],"owner":{"account_id":14571721,"reputation":53,"user_id":10535182,"display_name":"Zac"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1569909447,"creation_date":1569909447,"answer_id":58178821,"question_id":56625520,"body_markdown":"Event handling: When an event happens and we have registered an event listener for the event, the event listener calls the Event Handlers, which is the method that actually handles the event.","title":"Difference between &quot;consuming&quot; and &quot;handling&quot; an event","body":"<p>Event handling: When an event happens and we have registered an event listener for the event, the event listener calls the Event Handlers, which is the method that actually handles the event.</p>\n"},{"tags":[],"owner":{"account_id":17413044,"reputation":11,"user_id":15377471,"display_name":"jamie heiney"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691567225,"creation_date":1674660876,"answer_id":75236246,"question_id":56625520,"body_markdown":"_Consuming_ an event means subscribing to it so that a user&#39;s application is informed when the event occurs. This could include subscribing to an event via an API or to receive notifications from an event producer. \r\n\r\n_Handling_ an event means taking action when it occurs. This could include creating an event handling function that will execute code once the event is triggered. Examples include responding to a user input, such as clicking a button, or running a code snippet in response to an asynchronous event, such as a message being delivered.","title":"Difference between &quot;consuming&quot; and &quot;handling&quot; an event","body":"<p><em>Consuming</em> an event means subscribing to it so that a user's application is informed when the event occurs. This could include subscribing to an event via an API or to receive notifications from an event producer.</p>\n<p><em>Handling</em> an event means taking action when it occurs. This could include creating an event handling function that will execute code once the event is triggered. Examples include responding to a user input, such as clicking a button, or running a code snippet in response to an asynchronous event, such as a message being delivered.</p>\n"}],"owner":{"account_id":14571721,"reputation":53,"user_id":10535182,"display_name":"Zac"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":488,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":58178821,"answer_count":2,"score":0,"last_activity_date":1691567225,"creation_date":1560751596,"question_id":56625520,"body_markdown":"What is the difference between an event that has been &quot;consumed&quot; vs an event that has been &quot;handled&quot;?\r\n\r\nAppreciate the help :)\r\n\r\n[Edit]\r\nFor example:\r\n\r\n`onTouchEvent(MotionEvent event) returns true` if the event was **handled** - `false` otherwise\r\n\r\n`onTouch()` returns true if the listener has consumed the event - `false` otherwise","title":"Difference between &quot;consuming&quot; and &quot;handling&quot; an event","body":"<p>What is the difference between an event that has been \"consumed\" vs an event that has been \"handled\"?</p>\n\n<p>Appreciate the help :)</p>\n\n<p>[Edit]\nFor example:</p>\n\n<p><code>onTouchEvent(MotionEvent event) returns true</code> if the event was <strong>handled</strong> - <code>false</code> otherwise</p>\n\n<p><code>onTouch()</code> returns true if the listener has consumed the event - <code>false</code> otherwise</p>\n"},{"tags":["java","spring-restcontroller","hibernate-validator","javax-validation","jakarta-validation"],"answers":[{"tags":[],"owner":{"account_id":6366204,"reputation":2197,"user_id":4940126,"display_name":"mark_o"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691564135,"creation_date":1691564135,"answer_id":76865293,"question_id":76864869,"body_markdown":"Since you are using the Hibernate Validator you can cast the context in the validator to `HibernateConstraintValidatorContext`, and that would allow you to add additional message parameters:\r\n\r\n```java\r\npublic class EnumValidatorImpl implements ConstraintValidator&lt;EnumValidator, Enum&lt;?&gt;&gt; {\r\n\r\n\tprivate List&lt;String&gt; allowableValues;\r\n\r\n\t@Override\r\n\tpublic void initialize(EnumValidator constraintAnnotation) {\r\n\t\tallowableValues = Stream.of(constraintAnnotation.enumClass()\r\n\t\t\t\t\t\t.getEnumConstants())\r\n\t\t\t\t.map(Enum::name)\r\n\t\t\t\t.toList();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic boolean isValid(Enum&lt;?&gt; anEnum, ConstraintValidatorContext constraintValidatorContext) {\r\n\t\tif ( constraintValidatorContext instanceof HibernateConstraintValidatorContext ) {\r\n\t\t\t( (HibernateConstraintValidatorContext) constraintValidatorContext ).addMessageParameter(\r\n\t\t\t\t\t&quot;enumConstants&quot;, allowableValues );\r\n\t\t}\r\n\t\treturn anEnum != null &amp;&amp; allowableValues.contains(anEnum.name());\r\n\t}\r\n}\r\n```\r\nand then use these message parameters in the message template:\r\n\r\n```java\r\n@Target({ElementType.FIELD, ElementType.PARAMETER})\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Constraint(validatedBy = EnumValidatorImpl.class)\r\npublic @interface EnumValidator {\r\n\r\n    Class&lt;? extends Enum&lt;?&gt;&gt; enumClass();\r\n\r\n    String message() default &quot;value not valid {enumClass}. Available options: {enumConstants}&quot;;\r\n\r\n    Class&lt;?&gt;[] groups() default {};\r\n\r\n    Class&lt;? extends Payload&gt;[] payload() default {};\r\n\r\n}\r\n```","title":"Dynamic Validation message in Constraint Validation of Enums","body":"<p>Since you are using the Hibernate Validator you can cast the context in the validator to <code>HibernateConstraintValidatorContext</code>, and that would allow you to add additional message parameters:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class EnumValidatorImpl implements ConstraintValidator&lt;EnumValidator, Enum&lt;?&gt;&gt; {\n\n    private List&lt;String&gt; allowableValues;\n\n    @Override\n    public void initialize(EnumValidator constraintAnnotation) {\n        allowableValues = Stream.of(constraintAnnotation.enumClass()\n                        .getEnumConstants())\n                .map(Enum::name)\n                .toList();\n    }\n\n    @Override\n    public boolean isValid(Enum&lt;?&gt; anEnum, ConstraintValidatorContext constraintValidatorContext) {\n        if ( constraintValidatorContext instanceof HibernateConstraintValidatorContext ) {\n            ( (HibernateConstraintValidatorContext) constraintValidatorContext ).addMessageParameter(\n                    &quot;enumConstants&quot;, allowableValues );\n        }\n        return anEnum != null &amp;&amp; allowableValues.contains(anEnum.name());\n    }\n}\n</code></pre>\n<p>and then use these message parameters in the message template:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Target({ElementType.FIELD, ElementType.PARAMETER})\n@Retention(RetentionPolicy.RUNTIME)\n@Constraint(validatedBy = EnumValidatorImpl.class)\npublic @interface EnumValidator {\n\n    Class&lt;? extends Enum&lt;?&gt;&gt; enumClass();\n\n    String message() default &quot;value not valid {enumClass}. Available options: {enumConstants}&quot;;\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n\n}\n</code></pre>\n"}],"owner":{"account_id":4017891,"reputation":181,"user_id":3309305,"display_name":"user3309305"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76865293,"answer_count":1,"score":0,"last_activity_date":1691567203,"creation_date":1691559604,"question_id":76864869,"body_markdown":"I was trying to Validate the Enum before Request Processing,\r\n\r\n**EnumValidator.java**\r\n```\r\n@Target({ElementType.FIELD, ElementType.PARAMETER})\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Constraint(validatedBy = EnumValidatorImpl.class)\r\npublic @interface EnumValidator {\r\n\r\n    Class&lt;? extends Enum&lt;?&gt;&gt; enumClass();\r\n\r\n    String message() default &quot;value not valid {enumClass}&quot;;\r\n\r\n    Class&lt;?&gt;[] groups() default {};\r\n\r\n    Class&lt;? extends Payload&gt;[] payload() default {};\r\n\r\n}\r\n```\r\n\r\n**EnumValidatorImpl.java**\r\n```\r\nimport javax.validation.ConstraintValidator;\r\nimport javax.validation.ConstraintValidatorContext;\r\nimport java.util.List;\r\nimport java.util.stream.Stream;\r\n\r\npublic class EnumValidatorImpl implements ConstraintValidator&lt;EnumValidator, Enum&lt;?&gt;&gt; {\r\n\r\n    private List&lt;String&gt; allowableValues;\r\n\r\n    @Override\r\n    public void initialize(EnumValidator constraintAnnotation) {\r\n        allowableValues = Stream.of(constraintAnnotation.enumClass()\r\n                .getEnumConstants())\r\n                .map(Enum::name)\r\n                .toList();\r\n    }\r\n\r\n    @Override\r\n    public boolean isValid(Enum&lt;?&gt; anEnum, ConstraintValidatorContext constraintValidatorContext) {\r\n        return anEnum != null &amp;&amp; allowableValues.contains(anEnum.name());\r\n    }\r\n}\r\n```\r\n**Person.java**\r\n```\r\nimport lombok.Data;\r\n\r\n@Data\r\npublic class Person {\r\n\r\n    @EnumValidator(enumClass = Status.class)\r\n    private String status;\r\n}\r\n```\r\n\r\n**Status.java**\r\n```\r\npublic enum Status {\r\n\r\n    ACTIVE,\r\n    IN_ACTIVE\r\n}\r\n```\r\n\r\nIt was working fine in-terms of validation, Right now the message comes as **value not valid emumclass** package name. Is there any to display all the members of enum in error message in this case ACTIVE, IN_ACTIVE","title":"Dynamic Validation message in Constraint Validation of Enums","body":"<p>I was trying to Validate the Enum before Request Processing,</p>\n<p><strong>EnumValidator.java</strong></p>\n<pre><code>@Target({ElementType.FIELD, ElementType.PARAMETER})\n@Retention(RetentionPolicy.RUNTIME)\n@Constraint(validatedBy = EnumValidatorImpl.class)\npublic @interface EnumValidator {\n\n    Class&lt;? extends Enum&lt;?&gt;&gt; enumClass();\n\n    String message() default &quot;value not valid {enumClass}&quot;;\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n\n}\n</code></pre>\n<p><strong>EnumValidatorImpl.java</strong></p>\n<pre><code>import javax.validation.ConstraintValidator;\nimport javax.validation.ConstraintValidatorContext;\nimport java.util.List;\nimport java.util.stream.Stream;\n\npublic class EnumValidatorImpl implements ConstraintValidator&lt;EnumValidator, Enum&lt;?&gt;&gt; {\n\n    private List&lt;String&gt; allowableValues;\n\n    @Override\n    public void initialize(EnumValidator constraintAnnotation) {\n        allowableValues = Stream.of(constraintAnnotation.enumClass()\n                .getEnumConstants())\n                .map(Enum::name)\n                .toList();\n    }\n\n    @Override\n    public boolean isValid(Enum&lt;?&gt; anEnum, ConstraintValidatorContext constraintValidatorContext) {\n        return anEnum != null &amp;&amp; allowableValues.contains(anEnum.name());\n    }\n}\n</code></pre>\n<p><strong>Person.java</strong></p>\n<pre><code>import lombok.Data;\n\n@Data\npublic class Person {\n\n    @EnumValidator(enumClass = Status.class)\n    private String status;\n}\n</code></pre>\n<p><strong>Status.java</strong></p>\n<pre><code>public enum Status {\n\n    ACTIVE,\n    IN_ACTIVE\n}\n</code></pre>\n<p>It was working fine in-terms of validation, Right now the message comes as <strong>value not valid emumclass</strong> package name. Is there any to display all the members of enum in error message in this case ACTIVE, IN_ACTIVE</p>\n"},{"tags":["java","hibernate","transactions"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1691506715,"post_id":76860731,"comment_id":135499350,"body_markdown":"Calling methods on the same class will [skip the proxy](https://stackoverflow.com/q/34197964/2541560) that handles annotations like `@Transactional`, so neither `create` or `getById` will start a transaction. That and suitable timing with the default behaviour is likely the problem.","body":"Calling methods on the same class will <a href=\"https://stackoverflow.com/q/34197964/2541560\">skip the proxy</a> that handles annotations like <code>@Transactional</code>, so neither <code>create</code> or <code>getById</code> will start a transaction. That and suitable timing with the default behaviour is likely the problem."},{"owner":{"account_id":17292944,"reputation":5,"user_id":12524189,"display_name":"canEE"},"score":0,"creation_date":1691566350,"post_id":76860731,"comment_id":135507312,"body_markdown":"@Kayaman I had no idea that calling methods in same class would affect anything. Then my example isn&#39;t really realistic. I have updated my code example. Would having the ```create()``` and ```getById()``` methods in a service class change anything?","body":"@Kayaman I had no idea that calling methods in same class would affect anything. Then my example isn&#39;t really realistic. I have updated my code example. Would having the <code>create()</code> and <code>getById()</code> methods in a service class change anything?"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1691573679,"post_id":76860731,"comment_id":135508736,"body_markdown":"Yes it would change something. Just like the linked question explains. I don&#39;t know what your real code looks like, but I&#39;d probably use `merge()` since your code looks weird. Why would you do a save/load in a convoluted way like that?","body":"Yes it would change something. Just like the linked question explains. I don&#39;t know what your real code looks like, but I&#39;d probably use <code>merge()</code> since your code looks weird. Why would you do a save/load in a convoluted way like that?"},{"owner":{"account_id":17292944,"reputation":5,"user_id":12524189,"display_name":"canEE"},"score":0,"creation_date":1691580850,"post_id":76860731,"comment_id":135510225,"body_markdown":"@Kayaman Why we first ```persist()``` then do a ```find()``` on the same entity to return the Id, I do not know, it is before my time. My guess, trying to verify that it is *inserted*. The application receive messages from queue, we insert a row in the database and continue working on the message. Later on in the progress we want to update the status. We do not keep the entity class after it is inserted, we do a ```find()``` when we want to do changes to it.  But you think changing ```persist()``` to ```merge()``` could solve the issue? What about doing ```flush()``` after ```persist()```?","body":"@Kayaman Why we first <code>persist()</code> then do a <code>find()</code> on the same entity to return the Id, I do not know, it is before my time. My guess, trying to verify that it is <i>inserted</i>. The application receive messages from queue, we insert a row in the database and continue working on the message. Later on in the progress we want to update the status. We do not keep the entity class after it is inserted, we do a <code>find()</code> when we want to do changes to it.  But you think changing <code>persist()</code> to <code>merge()</code> could solve the issue? What about doing <code>flush()</code> after <code>persist()</code>?"}],"owner":{"account_id":17292944,"reputation":5,"user_id":12524189,"display_name":"canEE"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691566595,"creation_date":1691506374,"question_id":76860731,"body_markdown":"I&#39;m having some flaky issues with transactional hibernate. As shown in the example below the entity is persisted with ```persist()```, I retrieve the entity with ```find()``` and return the Id from the method. But when the Id is used later to retrieve the entity again, it *sometimes* (1/2000) cannot find the entity again.\r\n\r\n- I thought when leaving the first ```@Transactional``` create method that hibernate would commit?\r\n- Could it be that hibernate has yet to be able to commit before the ```getById()``` is ran?\r\n- Could it be that ```@TransactionManagement(TransactionManagementType.CONTAINER)``` is affecting how and when hibernate commits?\r\n\r\n```\r\n@TransactionManagement(TransactionManagementType.CONTAINER)\r\npublic class MDB implements MessageListener {\r\n\r\n    @Inject\r\n    private MyService service;\r\n\r\n    @Override\r\n    public void onMessage(final Message message) {\r\n        Id id = service.create(message);\r\n        ...\r\n        // Will not find entity on next method call.\r\n        MyEntity  myEntity = service.getById(id);\r\n    }\r\n\r\n}\r\n\r\npublic class MyServiceImpl implements MyService {\r\n   \r\n   @Override\r\n   @Transactional(Transactional.TxType.REQUIRED)\r\n   public Id create(Message message) {\r\n       MyEntity myEntity = new MyEntity();\r\n       Id id = new Id(message);\r\n       myEntity.setId(id);\r\n\r\n       entityManager().perisist(myEntity);\r\n\r\n       MyEntity myEntityFromEm = entityManager().find(MyEntity.class, id);\r\n       return myEntityFromEm.getId();\r\n   }\r\n   \r\n   @Override\r\n   @Transactional(Transactional.TxType.REQUIRED)\r\n   public MyEntity getById(Id id) {\r\n       return entityManager().find(MyEntity.class, id); \r\n       // Exception here - Cannot find entity with this id.\r\n   }\r\n\r\n}\r\n```\r\n*Have omitted to recreate how the class gets its injected EntityManager, and how the MessageListener is configered. In the real program there is multiple lines in-between ```create()``` and ```getById()```.*\r\n\r\nI expected that hibernate did a commit on the persisted entity when leaving the method. I have tried to log the EntityManager HashCode, suspecting that different *&quot;sessions&quot;* caused the issues. I have tried to manually ```flush()```, but since I cannot reproduce the issue in pilot/test, it is very hard to test.","title":"Transactional method persist entity, but why is the entity object sometimes not found in next method?","body":"<p>I'm having some flaky issues with transactional hibernate. As shown in the example below the entity is persisted with <code>persist()</code>, I retrieve the entity with <code>find()</code> and return the Id from the method. But when the Id is used later to retrieve the entity again, it <em>sometimes</em> (1/2000) cannot find the entity again.</p>\n<ul>\n<li>I thought when leaving the first <code>@Transactional</code> create method that hibernate would commit?</li>\n<li>Could it be that hibernate has yet to be able to commit before the <code>getById()</code> is ran?</li>\n<li>Could it be that <code>@TransactionManagement(TransactionManagementType.CONTAINER)</code> is affecting how and when hibernate commits?</li>\n</ul>\n<pre><code>@TransactionManagement(TransactionManagementType.CONTAINER)\npublic class MDB implements MessageListener {\n\n    @Inject\n    private MyService service;\n\n    @Override\n    public void onMessage(final Message message) {\n        Id id = service.create(message);\n        ...\n        // Will not find entity on next method call.\n        MyEntity  myEntity = service.getById(id);\n    }\n\n}\n\npublic class MyServiceImpl implements MyService {\n   \n   @Override\n   @Transactional(Transactional.TxType.REQUIRED)\n   public Id create(Message message) {\n       MyEntity myEntity = new MyEntity();\n       Id id = new Id(message);\n       myEntity.setId(id);\n\n       entityManager().perisist(myEntity);\n\n       MyEntity myEntityFromEm = entityManager().find(MyEntity.class, id);\n       return myEntityFromEm.getId();\n   }\n   \n   @Override\n   @Transactional(Transactional.TxType.REQUIRED)\n   public MyEntity getById(Id id) {\n       return entityManager().find(MyEntity.class, id); \n       // Exception here - Cannot find entity with this id.\n   }\n\n}\n</code></pre>\n<p><em>Have omitted to recreate how the class gets its injected EntityManager, and how the MessageListener is configered. In the real program there is multiple lines in-between <code>create()</code> and <code>getById()</code>.</em></p>\n<p>I expected that hibernate did a commit on the persisted entity when leaving the method. I have tried to log the EntityManager HashCode, suspecting that different <em>&quot;sessions&quot;</em> caused the issues. I have tried to manually <code>flush()</code>, but since I cannot reproduce the issue in pilot/test, it is very hard to test.</p>\n"},{"tags":["java","c++","gradle"],"comments":[{"owner":{"account_id":4106157,"reputation":2138,"user_id":3370124,"display_name":"Richard Critten"},"score":0,"creation_date":1691534136,"post_id":76863495,"comment_id":135504088,"body_markdown":"It looks like `utilities_whitebox` is using a library called `utilities_crypto` which has not been included.","body":"It looks like <code>utilities_whitebox</code> is using a library called <code>utilities_crypto</code> which has not been included."},{"owner":{"account_id":3403687,"reputation":572,"user_id":2855292,"accept_rate":54,"display_name":"Oyebisi"},"score":0,"creation_date":1691547111,"post_id":76863495,"comment_id":135505193,"body_markdown":"@RichardCritten apologies, I modified the stacktrace. I have updated to show the right thing. It is looking for the `utilities_whitebox`.","body":"@RichardCritten apologies, I modified the stacktrace. I have updated to show the right thing. It is looking for the <code>utilities_whitebox</code>."},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1691566432,"post_id":76863495,"comment_id":135507332,"body_markdown":"When you manually invoke cmake, do you end up with a working library? If that works you can indeed instruct gradle to run cmake for you.","body":"When you manually invoke cmake, do you end up with a working library? If that works you can indeed instruct gradle to run cmake for you."}],"owner":{"account_id":3403687,"reputation":572,"user_id":2855292,"accept_rate":54,"display_name":"Oyebisi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691566391,"creation_date":1691532785,"question_id":76863495,"body_markdown":"I built an android library that is mostly just a wrapper for a native(C++) library that does some crypto functions. The library uses CMake for the native code build and calls the native methods via the JNI bridge. I want to make this same library work for Java SE(non android Java), but I am stuck and cannot make the CMake build the native code. \r\nThis is what the CMakeLists looks like\r\n```\r\ncmake_minimum_required(VERSION 3.4.1)\r\n\r\n\r\nproject(utilities-whitebox)\r\n\r\nset(WHITEBOXDIR utilities-whitebox/whitebox)\r\n\r\nadd_library( # Specifies the name of the library.\r\n        utilities_whitebox\r\n\r\n        # Sets the library as a shared library.\r\n        SHARED\r\n\r\n#        SwigWbc_wrap.cpp\r\n        src/main/cpp/SwigWbc_wrap.cpp\r\n        ${WHITEBOXDIR}/src/utilities_whitebox.cpp\r\n        ${WHITEBOXDIR}/src/WhiteBoxInterpreter.cpp\r\n        ${WHITEBOXDIR}/src/WhiteBoxUtils.cpp\r\n)\r\n\r\ninclude_directories(\r\n        ${WHITEBOXDIR}/include\r\n        ${WHITEBOXDIR}/src\r\n)\r\n```\r\nThe directories and files listed in the CMakelists all exist and are in the appropriate path. This is the error I get when I go to load the the native code using the `System.loadLibrary(&quot;utilities_whitebox&quot;)` call.\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: no utilities_whitebox in java.library.path: [/Users/soere/Library/Java/Extensions, /Library/Java/Extensions, /Network/Library/Java/Extensions, /System/Library/Java/Extensions, /usr/lib/java, .]\r\n\tat java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2670)\r\n\tat java.base/java.lang.Runtime.loadLibrary0(Runtime.java:830)\r\n\tat java.base/java.lang.System.loadLibrary(System.java:1873)\r\n```\r\nI believe the my app is simply not running the cmake command which needs to be executed successfully before the native code can be used in the Java SE classes. I believe I may have to add a gradle task that does the native build first using cmake before building the java app. Is this correct? How do I go about this?\r\n","title":"UnsatisfiedLinkError building native library for Java SE","body":"<p>I built an android library that is mostly just a wrapper for a native(C++) library that does some crypto functions. The library uses CMake for the native code build and calls the native methods via the JNI bridge. I want to make this same library work for Java SE(non android Java), but I am stuck and cannot make the CMake build the native code.\nThis is what the CMakeLists looks like</p>\n<pre><code>cmake_minimum_required(VERSION 3.4.1)\n\n\nproject(utilities-whitebox)\n\nset(WHITEBOXDIR utilities-whitebox/whitebox)\n\nadd_library( # Specifies the name of the library.\n        utilities_whitebox\n\n        # Sets the library as a shared library.\n        SHARED\n\n#        SwigWbc_wrap.cpp\n        src/main/cpp/SwigWbc_wrap.cpp\n        ${WHITEBOXDIR}/src/utilities_whitebox.cpp\n        ${WHITEBOXDIR}/src/WhiteBoxInterpreter.cpp\n        ${WHITEBOXDIR}/src/WhiteBoxUtils.cpp\n)\n\ninclude_directories(\n        ${WHITEBOXDIR}/include\n        ${WHITEBOXDIR}/src\n)\n</code></pre>\n<p>The directories and files listed in the CMakelists all exist and are in the appropriate path. This is the error I get when I go to load the the native code using the <code>System.loadLibrary(&quot;utilities_whitebox&quot;)</code> call.</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: no utilities_whitebox in java.library.path: [/Users/soere/Library/Java/Extensions, /Library/Java/Extensions, /Network/Library/Java/Extensions, /System/Library/Java/Extensions, /usr/lib/java, .]\n    at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2670)\n    at java.base/java.lang.Runtime.loadLibrary0(Runtime.java:830)\n    at java.base/java.lang.System.loadLibrary(System.java:1873)\n</code></pre>\n<p>I believe the my app is simply not running the cmake command which needs to be executed successfully before the native code can be used in the Java SE classes. I believe I may have to add a gradle task that does the native build first using cmake before building the java app. Is this correct? How do I go about this?</p>\n"},{"tags":["java","amazon-web-services","yum"],"comments":[{"owner":{"account_id":3758602,"reputation":10072,"user_id":3124333,"accept_rate":100,"display_name":"SiKing"},"score":1,"creation_date":1691521991,"post_id":76862527,"comment_id":135502299,"body_markdown":"[How to find out yum package names](https://serverfault.com/q/811444/278025)","body":"<a href=\"https://serverfault.com/q/811444/278025\">How to find out yum package names</a>"},{"owner":{"account_id":12024361,"reputation":2102,"user_id":8796806,"accept_rate":75,"display_name":"Timothy Clotworthy"},"score":0,"creation_date":1691523047,"post_id":76862527,"comment_id":135502476,"body_markdown":"@SiKing thanks. I was able to do: [ec2-user@ip-172-31-9-107 nifi]$ yum search java | grep &quot;1.8&quot;\nLast metadata expiration check: 1:00:33 ago on Tue Aug  8 18:28:56 2023.\njava-1.8.0-amazon-corretto.x86_64 : Amazon Corretto runtime environment\njava-1.8.0-amazon-corretto-devel.x86_64 : Amazon Corretto development environment. and then installed my version thanks!","body":"@SiKing thanks. I was able to do: [ec2-user@ip-172-31-9-107 nifi]$ yum search java | grep &quot;1.8&quot; Last metadata expiration check: 1:00:33 ago on Tue Aug  8 18:28:56 2023. java-1.8.0-amazon-corretto.x86_64 : Amazon Corretto runtime environment java-1.8.0-amazon-corretto-devel.x86_64 : Amazon Corretto development environment. and then installed my version thanks!"}],"answers":[{"tags":[],"owner":{"account_id":12024361,"reputation":2102,"user_id":8796806,"accept_rate":75,"display_name":"Timothy Clotworthy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691566208,"creation_date":1691523299,"answer_id":76862720,"question_id":76862527,"body_markdown":"I got an assist and was able to install what I wanted. I did:\r\n\r\n    [ec2-user@ip-172-31-9-107 nifi]$ yum search java | grep &quot;1.8&quot;\r\n    Last metadata expiration check: 1:00:33 ago on Tue Aug  8 18:28:56 2023.\r\n    java-1.8.0-amazon-corretto.x86_64 : Amazon Corretto runtime environment\r\n    java-1.8.0-amazon-corretto-devel.x86_64 : Amazon Corretto development environment\r\n\r\n,and then:\r\n\r\n    sudo yum install java-1.8.0-amazon-corretto.x86_64 \r\n\r\nwhich installed:\r\n\r\n    [ec2-user@ip-172-31-9-107 nifi]$ java -version\r\n    openjdk version &quot;1.8.0_382&quot;\r\n","title":"Yum - what java 8 versions are available to install?","body":"<p>I got an assist and was able to install what I wanted. I did:</p>\n<pre><code>[ec2-user@ip-172-31-9-107 nifi]$ yum search java | grep &quot;1.8&quot;\nLast metadata expiration check: 1:00:33 ago on Tue Aug  8 18:28:56 2023.\njava-1.8.0-amazon-corretto.x86_64 : Amazon Corretto runtime environment\njava-1.8.0-amazon-corretto-devel.x86_64 : Amazon Corretto development environment\n</code></pre>\n<p>,and then:</p>\n<pre><code>sudo yum install java-1.8.0-amazon-corretto.x86_64 \n</code></pre>\n<p>which installed:</p>\n<pre><code>[ec2-user@ip-172-31-9-107 nifi]$ java -version\nopenjdk version &quot;1.8.0_382&quot;\n</code></pre>\n"}],"owner":{"account_id":12024361,"reputation":2102,"user_id":8796806,"accept_rate":75,"display_name":"Timothy Clotworthy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1030,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"accepted_answer_id":76862720,"answer_count":1,"score":-3,"last_activity_date":1691566227,"creation_date":1691521476,"question_id":76862527,"body_markdown":"I am attempting to install java version 8 on my AWS EC2 (uses AWS linux image) using yum. Each attempt is telling me the version is not recognized. For instance:\r\n\r\n    ec2-user@ip-172-31-9-107 nifi]$ sudo yum install java-1.8.0-openjdk-devel\r\n    Last metadata expiration check: 1:46:16 ago on Tue Aug  8 17:09:37 2023.\r\n    No match for argument: java-1.8.0-openjdk-devel\r\n    Error: Unable to find a match: java-1.8.0-openjdk-devel\r\n\r\n,and\r\n\r\n    [ec2-user@ip-172-31-9-107 nifi]$ sudo yum install java-1.8.0-openjdk.x86_64\r\n    Last metadata expiration check: 1:47:09 ago on Tue Aug  8 17:09:37 2023.\r\n    No match for argument: java-1.8.0-openjdk.x86_64\r\n    Error: Unable to find a match: java-1.8.0-openjdk.x86_64\r\n\r\n,and\r\n\r\n    [ec2-user@ip-172-31-9-107 nifi]$ sudo sudo yum install java-1.8.0-openjdk\r\n    Last metadata expiration check: 1:48:39 ago on Tue Aug  8 17:09:37 2023.\r\n    No match for argument: java-1.8.0-openjdk\r\n    Error: Unable to find a match: java-1.8.0-openjdk\r\n\r\nI was able to simply use:\r\n\r\n    sudo yum install java\r\n\r\n,but that installed openjdk version 17. How can I figure out what java 8 versions are available via yum and then install one of them?\r\n","title":"Yum - what java 8 versions are available to install?","body":"<p>I am attempting to install java version 8 on my AWS EC2 (uses AWS linux image) using yum. Each attempt is telling me the version is not recognized. For instance:</p>\n<pre><code>ec2-user@ip-172-31-9-107 nifi]$ sudo yum install java-1.8.0-openjdk-devel\nLast metadata expiration check: 1:46:16 ago on Tue Aug  8 17:09:37 2023.\nNo match for argument: java-1.8.0-openjdk-devel\nError: Unable to find a match: java-1.8.0-openjdk-devel\n</code></pre>\n<p>,and</p>\n<pre><code>[ec2-user@ip-172-31-9-107 nifi]$ sudo yum install java-1.8.0-openjdk.x86_64\nLast metadata expiration check: 1:47:09 ago on Tue Aug  8 17:09:37 2023.\nNo match for argument: java-1.8.0-openjdk.x86_64\nError: Unable to find a match: java-1.8.0-openjdk.x86_64\n</code></pre>\n<p>,and</p>\n<pre><code>[ec2-user@ip-172-31-9-107 nifi]$ sudo sudo yum install java-1.8.0-openjdk\nLast metadata expiration check: 1:48:39 ago on Tue Aug  8 17:09:37 2023.\nNo match for argument: java-1.8.0-openjdk\nError: Unable to find a match: java-1.8.0-openjdk\n</code></pre>\n<p>I was able to simply use:</p>\n<pre><code>sudo yum install java\n</code></pre>\n<p>,but that installed openjdk version 17. How can I figure out what java 8 versions are available via yum and then install one of them?</p>\n"},{"tags":["java","spring","stripe-payments"],"answers":[{"comments":[{"owner":{"account_id":3174200,"reputation":2396,"user_id":2682472,"accept_rate":90,"display_name":"Florian Baierl"},"score":0,"creation_date":1691674353,"post_id":76865458,"comment_id":135525462,"body_markdown":"Unfortunately this does not distinguish all cases correctly. I think there really is no solution to my question.","body":"Unfortunately this does not distinguish all cases correctly. I think there really is no solution to my question."}],"tags":[],"owner":{"account_id":11629093,"reputation":2552,"user_id":8517948,"accept_rate":100,"display_name":"LW001"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691566093,"creation_date":1691565579,"answer_id":76865458,"question_id":76865346,"body_markdown":"You can get `Event.request.id` (which I assume to be exposed via some getters in the library you&#39;re using) and see whether it is null. If it is, the event was triggered automatically, else it was via the API (or Dashboard I&#39;d assume) and you can get more details about the request via its ID.\r\n\r\nThe Stripe Documentation says this [here][1].\r\n\r\n  [1]: https://stripe.com/docs/api/events/object#event_object-request-id","title":"Stripe webhook events: find out origin of event","body":"<p>You can get <code>Event.request.id</code> (which I assume to be exposed via some getters in the library you're using) and see whether it is null. If it is, the event was triggered automatically, else it was via the API (or Dashboard I'd assume) and you can get more details about the request via its ID.</p>\n<p>The Stripe Documentation says this <a href=\"https://stripe.com/docs/api/events/object#event_object-request-id\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":3174200,"reputation":2396,"user_id":2682472,"accept_rate":90,"display_name":"Florian Baierl"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691566093,"creation_date":1691564631,"question_id":76865346,"body_markdown":"When using the stripe dashboard, one can clearly see where an event is originating from (e.g. automatic, dashboard, API). We would like to be able to do this in our spring (java) backend implementation as well.\r\n\r\nHere is how we receive the events in our server:\r\n\r\n```\r\n@EventListener\r\n@Async\r\npublic void handleStripeWebhook(StripeWebhookEvent stripeWebhookEvent) throws EntityNotFoundException, StripeException {\r\n   final var event = stripeWebhookEvent.event();\r\n   final var stripeObject = stripeWebhookEvent.stripeObject();\r\n\r\n   Invoice invoice;\r\n   Subscription subscription;\r\n   switch (event.getType()) {\r\n      case &quot;invoice.created&quot;:\r\n      // ...\r\n   }\r\n}\r\n```\r\n\r\nIs this somehow possible?","title":"Stripe webhook events: find out origin of event","body":"<p>When using the stripe dashboard, one can clearly see where an event is originating from (e.g. automatic, dashboard, API). We would like to be able to do this in our spring (java) backend implementation as well.</p>\n<p>Here is how we receive the events in our server:</p>\n<pre><code>@EventListener\n@Async\npublic void handleStripeWebhook(StripeWebhookEvent stripeWebhookEvent) throws EntityNotFoundException, StripeException {\n   final var event = stripeWebhookEvent.event();\n   final var stripeObject = stripeWebhookEvent.stripeObject();\n\n   Invoice invoice;\n   Subscription subscription;\n   switch (event.getType()) {\n      case &quot;invoice.created&quot;:\n      // ...\n   }\n}\n</code></pre>\n<p>Is this somehow possible?</p>\n"},{"tags":["java","c++","jvm","jvmti"],"comments":[{"owner":{"account_id":4210603,"reputation":94386,"user_id":3448419,"display_name":"apangin"},"score":1,"creation_date":1691486235,"post_id":76857949,"comment_id":135494788,"body_markdown":"[jattach](https://github.com/jattach/jattach/) project (written in C) does exactly that.","body":"<a href=\"https://github.com/jattach/jattach/\" rel=\"nofollow noreferrer\">jattach</a> project (written in C) does exactly that."},{"owner":{"account_id":20213823,"reputation":487,"user_id":14825276,"display_name":"NightmareXD"},"score":0,"creation_date":1691513757,"post_id":76857949,"comment_id":135500840,"body_markdown":"@apangin I tried that but it doesn&#39;t seems to be working it returns:\n\nConnected to remote process\nResponse code = 0\nreturn code: 100\n\nand the agent is also not loaded","body":"@apangin I tried that but it doesn&#39;t seems to be working it returns:  Connected to remote process Response code = 0 return code: 100  and the agent is also not loaded"},{"owner":{"account_id":4210603,"reputation":94386,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1691521231,"post_id":76857949,"comment_id":135502175,"body_markdown":"This is an issue with the agent: perhaps, it does not export `Agent_OnAttach`, or the required dependency is missing.","body":"This is an issue with the agent: perhaps, it does not export <code>Agent_OnAttach</code>, or the required dependency is missing."}],"owner":{"account_id":20213823,"reputation":487,"user_id":14825276,"display_name":"NightmareXD"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691566087,"creation_date":1691484942,"question_id":76857949,"body_markdown":"I want to load a Java agent at runtime without Restarting the JVM I know that I can load the agent with the -javaagent argument when starting the JVM but I want to do it at runtime. \r\n\r\nI found out that is possible using Sun tools but when I tried to do that in C++ and JNI it doesn&#39;t work and it can&#39;t find the required Java functions. ","title":"How to load a Java agent at runtime using C++","body":"<p>I want to load a Java agent at runtime without Restarting the JVM I know that I can load the agent with the -javaagent argument when starting the JVM but I want to do it at runtime.</p>\n<p>I found out that is possible using Sun tools but when I tried to do that in C++ and JNI it doesn't work and it can't find the required Java functions.</p>\n"},{"tags":["java","string","random","uppercase"],"comments":[{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":0,"creation_date":1649501887,"post_id":71806961,"comment_id":126894960,"body_markdown":"Your code is most likely from this page[www.baeldung.com/java-random-string](https://www.baeldung.com/java-random-string#plainjava-bounded). Look further down the page to see how to create uppercase letters as well.","body":"Your code is most likely from this page<a href=\"https://www.baeldung.com/java-random-string#plainjava-bounded\" rel=\"nofollow noreferrer\">www.baeldung.com/java-random-string</a>. Look further down the page to see how to create uppercase letters as well."},{"owner":{"account_id":379763,"reputation":29886,"user_id":733345,"display_name":"Joe"},"score":0,"creation_date":1649503343,"post_id":71806961,"comment_id":126895281,"body_markdown":"Does this answer your question? [How to generate a random alpha-numeric string](https://stackoverflow.com/questions/41107/how-to-generate-a-random-alpha-numeric-string)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/41107/how-to-generate-a-random-alpha-numeric-string\">How to generate a random alpha-numeric string</a>"}],"answers":[{"tags":[],"owner":{"account_id":9725613,"reputation":53332,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649498688,"creation_date":1649498688,"answer_id":71807045,"question_id":71806961,"body_markdown":"The issue with using ascii indexes, is that it&#39;s hard to use separate ranges, lower is `[97;122]` while upper is `[65;90]`, better use indexing in a given list of chars\r\n\r\n    static final String upper = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;;\r\n    static final String lower = upper.toLowerCase();\r\n    static final String symbols = upper + lower;\r\n\r\n    public static void rand() {\r\n        int rightLimit = symbols.length();\r\n        int targetStringLength = 50;\r\n        Random random = new Random();\r\n        StringBuilder buffer = new StringBuilder(targetStringLength);\r\n\r\n        for (int i = 0; i &lt; targetStringLength; i++) {\r\n            int randomLimitedInt = random.nextInt(rightLimit);\r\n            buffer.append(symbols.charAt(randomLimitedInt));\r\n        }\r\n\r\n        String generatedString = buffer.toString();\r\n        System.out.println(generatedString);\r\n    }\r\n","title":"How can I create random strings with uppercase and lowercase in Java?","body":"<p>The issue with using ascii indexes, is that it's hard to use separate ranges, lower is <code>[97;122]</code> while upper is <code>[65;90]</code>, better use indexing in a given list of chars</p>\n<pre><code>static final String upper = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;;\nstatic final String lower = upper.toLowerCase();\nstatic final String symbols = upper + lower;\n\npublic static void rand() {\n    int rightLimit = symbols.length();\n    int targetStringLength = 50;\n    Random random = new Random();\n    StringBuilder buffer = new StringBuilder(targetStringLength);\n\n    for (int i = 0; i &lt; targetStringLength; i++) {\n        int randomLimitedInt = random.nextInt(rightLimit);\n        buffer.append(symbols.charAt(randomLimitedInt));\n    }\n\n    String generatedString = buffer.toString();\n    System.out.println(generatedString);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6543678,"reputation":3232,"user_id":5060325,"display_name":"naimdjon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649499374,"creation_date":1649499374,"answer_id":71807132,"question_id":71806961,"body_markdown":"Slightly different approach, use random `nextBoolean()` to check whether the generated `char` should be uppercase.\r\n\r\n```\r\nimport java.util.Random;\r\n\r\npublic class randomstring {\r\n    public void rand() {\r\n        int leftLimit = 97; // letter &#39;a&#39;\r\n        int targetStringLength = 5;\r\n        Random random = new Random();\r\n        StringBuilder buffer = new StringBuilder(targetStringLength);\r\n        for (int i = 0; i &lt; targetStringLength; i++) {\r\n            char c =(char) (leftLimit + random.nextInt(26));\r\n            boolean shouldUseUppercase = random.nextBoolean();\r\n            char character = shouldUseUppercase ? Character.toUpperCase(c) : c;\r\n            buffer.append(character);\r\n        }\r\n        String generatedString = buffer.toString();\r\n        System.out.println(generatedString);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        randomstring random = new randomstring();\r\n        random.rand();\r\n    }\r\n}\r\n```","title":"How can I create random strings with uppercase and lowercase in Java?","body":"<p>Slightly different approach, use random <code>nextBoolean()</code> to check whether the generated <code>char</code> should be uppercase.</p>\n<pre><code>import java.util.Random;\n\npublic class randomstring {\n    public void rand() {\n        int leftLimit = 97; // letter 'a'\n        int targetStringLength = 5;\n        Random random = new Random();\n        StringBuilder buffer = new StringBuilder(targetStringLength);\n        for (int i = 0; i &lt; targetStringLength; i++) {\n            char c =(char) (leftLimit + random.nextInt(26));\n            boolean shouldUseUppercase = random.nextBoolean();\n            char character = shouldUseUppercase ? Character.toUpperCase(c) : c;\n            buffer.append(character);\n        }\n        String generatedString = buffer.toString();\n        System.out.println(generatedString);\n    }\n\n    public static void main(String[] args) {\n        randomstring random = new randomstring();\n        random.rand();\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":0,"creation_date":1649504156,"post_id":71807565,"comment_id":126895436,"body_markdown":"It works but the code is very inefficient.","body":"It works but the code is very inefficient."}],"tags":[],"owner":{"account_id":3087555,"reputation":37,"user_id":2614411,"display_name":"Manju DS"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649502921,"creation_date":1649502921,"answer_id":71807565,"question_id":71806961,"body_markdown":"    import java.util.Random;\r\n    \r\n    public class RandomString {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t\r\n    \t\tStringBuilder randomString = new StringBuilder();\r\n    \t\t\t\t\r\n    \t\tnew Random().ints(65, 122)\r\n    \t\t\t\t\t.filter(i-&gt;!(i&gt;90&amp;&amp;i&lt;97))\r\n    \t\t\t\t\t.boxed()\r\n    \t\t\t\t\t.limit(12)\r\n    \t\t\t\t\t.map(c-&gt;Character.toChars(c))\r\n    \t\t\t\t\t.forEach(c-&gt;randomString.append(c));\r\n    \t\t\t\t\r\n    \t\tSystem.out.println(randomString);\r\n    \t\t\r\n    \t}\r\n    \t\r\n    }\r\n\r\nchange the value in limit to adjust the size of random String","title":"How can I create random strings with uppercase and lowercase in Java?","body":"<pre><code>import java.util.Random;\n\npublic class RandomString {\n\n    public static void main(String[] args) {\n        \n        StringBuilder randomString = new StringBuilder();\n                \n        new Random().ints(65, 122)\n                    .filter(i-&gt;!(i&gt;90&amp;&amp;i&lt;97))\n                    .boxed()\n                    .limit(12)\n                    .map(c-&gt;Character.toChars(c))\n                    .forEach(c-&gt;randomString.append(c));\n                \n        System.out.println(randomString);\n        \n    }\n    \n}\n</code></pre>\n<p>change the value in limit to adjust the size of random String</p>\n"},{"tags":[],"owner":{"account_id":3106827,"reputation":762,"user_id":2629440,"display_name":"Vivek Goel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691566025,"creation_date":1691566025,"answer_id":76865493,"question_id":71806961,"body_markdown":"Easiest way is by using apache commons library:\r\n\r\n    RandomStringUtils.randomAlphabetic(10);","title":"How can I create random strings with uppercase and lowercase in Java?","body":"<p>Easiest way is by using apache commons library:</p>\n<pre><code>RandomStringUtils.randomAlphabetic(10);\n</code></pre>\n"}],"owner":{"account_id":21016816,"reputation":25,"user_id":15444097,"display_name":"Vlad"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2052,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1691566025,"creation_date":1649498014,"question_id":71806961,"body_markdown":"So, I found this function on the Internet and I would like to get some guidance on making strings use uppercase letters alongside lowercase ones, the code:\r\n```\r\nimport java.util.Random;\r\n\r\npublic class randomstring {\r\n\tpublic void rand()\r\n\t{\r\n\t\tint leftLimit = 97; // letter &#39;a&#39;\r\n\t    int rightLimit = 122; // letter &#39;z&#39;\r\n\t    int targetStringLength = 5;\r\n\t    Random random = new Random();\r\n\t    StringBuilder buffer = new StringBuilder(targetStringLength);\r\n\t    for (int i = 0; i &lt; targetStringLength; i++) {\r\n\t        int randomLimitedInt = leftLimit + (int) \r\n\t          (random.nextFloat() * (rightLimit - leftLimit + 1));\r\n\t        buffer.append((char) randomLimitedInt);\r\n\t    }\r\n\t    String generatedString = buffer.toString();\r\n\r\n\t    System.out.println(generatedString);\r\n\t\t\r\n\t\t\r\n\t}\r\n\tpublic static void main(String[] args) {\r\n\t\trandomstring random = new randomstring();\r\n\t\trandom.rand();\r\n\t}\r\n}\r\n```","title":"How can I create random strings with uppercase and lowercase in Java?","body":"<p>So, I found this function on the Internet and I would like to get some guidance on making strings use uppercase letters alongside lowercase ones, the code:</p>\n<pre><code>import java.util.Random;\n\npublic class randomstring {\n    public void rand()\n    {\n        int leftLimit = 97; // letter 'a'\n        int rightLimit = 122; // letter 'z'\n        int targetStringLength = 5;\n        Random random = new Random();\n        StringBuilder buffer = new StringBuilder(targetStringLength);\n        for (int i = 0; i &lt; targetStringLength; i++) {\n            int randomLimitedInt = leftLimit + (int) \n              (random.nextFloat() * (rightLimit - leftLimit + 1));\n            buffer.append((char) randomLimitedInt);\n        }\n        String generatedString = buffer.toString();\n\n        System.out.println(generatedString);\n        \n        \n    }\n    public static void main(String[] args) {\n        randomstring random = new randomstring();\n        random.rand();\n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1691562141,"post_id":76865059,"comment_id":135506602,"body_markdown":"As a is negative, I think that the javadocs answers your question.  *The unsigned integer value is the argument plus 2pow(32) if the argument is negative;**","body":"As a is negative, I think that the javadocs answers your question.  <i>The unsigned integer value is the argument plus 2pow(32) if the argument is negative;*</i>"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1691562466,"post_id":76865059,"comment_id":135506652,"body_markdown":"why do you expect `001111111111111111111111111101` with 30 digits and not `00111111111111111111111111111101` with 32 digits (or `111111111111111111111111111101` with 30 digits) ?? An `int` has 32 bits but `toBinaryString()` does not *show* leading zeros","body":"why do you expect <code>001111111111111111111111111101</code> with 30 digits and not <code>00111111111111111111111111111101</code> with 32 digits (or <code>111111111111111111111111111101</code> with 30 digits) ?? An <code>int</code> has 32 bits but <code>toBinaryString()</code> does not <i>show</i> leading zeros"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1691563104,"post_id":76865059,"comment_id":135506731,"body_markdown":"maybe the output from that [code](https://ideone.com/gVC20K) is better to see the problem","body":"maybe the output from that <a href=\"https://ideone.com/gVC20K\" rel=\"nofollow noreferrer\">code</a> is better to see the problem"}],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691563366,"creation_date":1691563366,"answer_id":76865206,"question_id":76865059,"body_markdown":"Why do you think that `Integer.toBinaryString()` outputs leading zeros? The [documentation](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html#toBinaryString(int)) clearly states otherwise:\r\n\r\n&gt; If the unsigned magnitude is zero, it is represented by a single zero character &#39;0&#39; (&#39;\\u0030&#39;); otherwise, the first character of the representation of the unsigned magnitude will not be the zero character.\r\n\r\nJava doesn&#39;t offer a built-in method to convert an integer into a binary representation with leading zeros. Several possible solutions are offered at https://stackoverflow.com/questions/4421400/how-to-get-0-padded-binary-representation-of-an-integer-in-java\r\n\r\nFor example you could use:\r\n\r\n    System.out.println(&quot; a&gt;&gt;&gt;2= &quot;+(a&gt;&gt;&gt;2)+&quot;(&quot;+String.format(&quot;%32s&quot;, Integer.toBinaryString(a&gt;&gt;&gt;2)).replace(&#39; &#39;, &#39;0&#39;)+&quot;)&quot;);\r\n","title":"Why doesn&#39;t this code output the way I think? (about shift)","body":"<p>Why do you think that <code>Integer.toBinaryString()</code> outputs leading zeros? The <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html#toBinaryString(int)\" rel=\"nofollow noreferrer\">documentation</a> clearly states otherwise:</p>\n<blockquote>\n<p>If the unsigned magnitude is zero, it is represented by a single zero character '0' ('\\u0030'); otherwise, the first character of the representation of the unsigned magnitude will not be the zero character.</p>\n</blockquote>\n<p>Java doesn't offer a built-in method to convert an integer into a binary representation with leading zeros. Several possible solutions are offered at <a href=\"https://stackoverflow.com/questions/4421400/how-to-get-0-padded-binary-representation-of-an-integer-in-java\">How to get 0-padded binary representation of an integer in java?</a></p>\n<p>For example you could use:</p>\n<pre><code>System.out.println(&quot; a&gt;&gt;&gt;2= &quot;+(a&gt;&gt;&gt;2)+&quot;(&quot;+String.format(&quot;%32s&quot;, Integer.toBinaryString(a&gt;&gt;&gt;2)).replace(' ', '0')+&quot;)&quot;);\n</code></pre>\n"}],"owner":{"account_id":29189470,"reputation":13,"user_id":22361845,"display_name":"changhoon seong"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76865206,"answer_count":1,"score":0,"last_activity_date":1691565319,"creation_date":1691561960,"question_id":76865059,"body_markdown":"\r\n```\r\npublic static void maain(String[] args){\r\n    int a = -11;\r\n    System.out.println(&quot; a= &quot;+a+&quot;(&quot;+Integer.toBinaryString(a)+&quot;)&quot;);\r\n    System.out.println(&quot; a&gt;&gt;2= &quot;+(a&gt;&gt;2)+&quot;(&quot;+Integer.toBinaryString(a&gt;&gt;2)+&quot;)&quot;);\r\n    System.out.println(&quot; a&gt;&gt;&gt;2= &quot;+(a&gt;&gt;&gt;2)+&quot;(&quot;+Integer.toBinaryString(a&gt;&gt;&gt;2)+&quot;)&quot;);\r\n}\r\n```\r\n\r\nI think a&gt;&gt;&gt;2 output is 001111111111111111111111111101, because &gt;&gt;&gt; means shift right and fill blanks with 0. Am I thinking wrong?","title":"Why doesn&#39;t this code output the way I think? (about shift)","body":"<pre><code>public static void maain(String[] args){\n    int a = -11;\n    System.out.println(&quot; a= &quot;+a+&quot;(&quot;+Integer.toBinaryString(a)+&quot;)&quot;);\n    System.out.println(&quot; a&gt;&gt;2= &quot;+(a&gt;&gt;2)+&quot;(&quot;+Integer.toBinaryString(a&gt;&gt;2)+&quot;)&quot;);\n    System.out.println(&quot; a&gt;&gt;&gt;2= &quot;+(a&gt;&gt;&gt;2)+&quot;(&quot;+Integer.toBinaryString(a&gt;&gt;&gt;2)+&quot;)&quot;);\n}\n</code></pre>\n<p>I think a&gt;&gt;&gt;2 output is 001111111111111111111111111101, because &gt;&gt;&gt; means shift right and fill blanks with 0. Am I thinking wrong?</p>\n"},{"tags":["java","jpa","weblogic12c","entitymanager","classcastexception"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1691513381,"post_id":76861174,"comment_id":135500774,"body_markdown":"How have you deployed the application and what is in its packaging? Ie do you have  the JPA provider jars in the application and on the server multiple times? Do you use hot redeployment, and if so, does restarting the server help?","body":"How have you deployed the application and what is in its packaging? Ie do you have  the JPA provider jars in the application and on the server multiple times? Do you use hot redeployment, and if so, does restarting the server help?"},{"owner":{"account_id":16592282,"reputation":53,"user_id":11990156,"display_name":"DilliBabu S"},"score":0,"creation_date":1691515533,"post_id":76861174,"comment_id":135501146,"body_markdown":"We are using EAR for deployment. Yes we do have JPA jars. No We not do hot redeployement.","body":"We are using EAR for deployment. Yes we do have JPA jars. No We not do hot redeployement."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1691524089,"post_id":76861174,"comment_id":135502667,"body_markdown":"More meant where the jars are and if any are included in the ear that might also be on the server&#39;s class path.","body":"More meant where the jars are and if any are included in the ear that might also be on the server&#39;s class path."}],"owner":{"account_id":16592282,"reputation":53,"user_id":11990156,"display_name":"DilliBabu S"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691565219,"creation_date":1691509436,"question_id":76861174,"body_markdown":"We are currently migrating our Java EE application from Weblogic 11g to Weblogic 12c.\r\n\r\nHere were are facing ClassCastException when using JPA EntityManager&#39;s query.getSingleResult() method.\r\n\r\nIt seems to be the Object returned by entityManager is loaded by different classloader and the Object in Application is loaded by different classloader were the classes are same.\r\n\r\n\r\nWhile checking with **wls-cat** in weblogic it shows Same classloader with multiple instance for single application.\r\n\r\nError: Caused By: java.lang.ClassCastException: Cannot cast com.dev.user.dataaccess.jpa.entity.User to com.dev.user.dataaccess.jpa.entity.User\r\n\r\nCan someone help me to resolve it? Thanks in Advance.\r\n\r\n[![added wls-cat classloader image][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LnwLB.png\r\n\r\n**UPDATED:** After some workaround found that Persistence.XML is loaded on Application deployement so entitymanager loads the classes declared in persistnce.xml &lt;class&gt;&lt;/class&gt;. When we redeploy our application uses new classloader but entitymanager still uses the old classloader.\r\n","title":"WebLogic 12c ClassCastException when Using JPA","body":"<p>We are currently migrating our Java EE application from Weblogic 11g to Weblogic 12c.</p>\n<p>Here were are facing ClassCastException when using JPA EntityManager's query.getSingleResult() method.</p>\n<p>It seems to be the Object returned by entityManager is loaded by different classloader and the Object in Application is loaded by different classloader were the classes are same.</p>\n<p>While checking with <strong>wls-cat</strong> in weblogic it shows Same classloader with multiple instance for single application.</p>\n<p>Error: Caused By: java.lang.ClassCastException: Cannot cast com.dev.user.dataaccess.jpa.entity.User to com.dev.user.dataaccess.jpa.entity.User</p>\n<p>Can someone help me to resolve it? Thanks in Advance.</p>\n<p><a href=\"https://i.stack.imgur.com/LnwLB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LnwLB.png\" alt=\"added wls-cat classloader image\" /></a></p>\n<p><strong>UPDATED:</strong> After some workaround found that Persistence.XML is loaded on Application deployement so entitymanager loads the classes declared in persistnce.xml . When we redeploy our application uses new classloader but entitymanager still uses the old classloader.</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":14681183,"reputation":146,"user_id":10602598,"display_name":"I.Yuldoshev"},"score":0,"creation_date":1691434237,"post_id":76849681,"comment_id":135488400,"body_markdown":"Since your session policy is STATELESS, you cannot get active sessions(online users).\nYou are not maintaining any session information in your back-end, state information comes together with request(token in your case).\nProbably you should use WebSocket or some other technologies to maintain user activity status","body":"Since your session policy is STATELESS, you cannot get active sessions(online users). You are not maintaining any session information in your back-end, state information comes together with request(token in your case). Probably you should use WebSocket or some other technologies to maintain user activity status"},{"owner":{"account_id":26186898,"reputation":99,"user_id":19869319,"display_name":"Alex"},"score":0,"creation_date":1691505267,"post_id":76849681,"comment_id":135499022,"body_markdown":"@I.Yuldoshev thanks for the answer the main problem is i refresh the token for each request the user does, so do you have any solution how to keep track? If so i can remove the stateless but i don&#39;t know how to procede","body":"@I.Yuldoshev thanks for the answer the main problem is i refresh the token for each request the user does, so do you have any solution how to keep track? If so i can remove the stateless but i don&#39;t know how to procede"}],"owner":{"account_id":26186898,"reputation":99,"user_id":19869319,"display_name":"Alex"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1691565054,"creation_date":1691394129,"question_id":76849681,"body_markdown":"I need to get how manyusers are currently using my application, one problem is everytime a user make a request my application create a new token for that user (react get that token and replace the old one)\r\n\r\nI already tried SessionRegistry but because it create a new token for each request the number it returns increase everytime:\r\n\r\n       @Autowired\r\n       private SessionRegistry sessionRegistry;\r\n\r\n       @GetMapping\r\n       public ResponseEntity&lt;Response&lt;Integer&gt;&gt; getSessions(){\r\n    \r\n           List&lt;String&gt; userDetailsList = sessionRegistry.getAllPrincipals().stream()\r\n                   .filter(u -&gt; !sessionRegistry.getAllSessions(u, false).isEmpty())\r\n                   .map(Object::toString)\r\n                   .collect(Collectors.toList());\r\n           int sessions = userDetailsList.size();\r\n                   //MySessionListener.getActiveSessions();\r\n           Response&lt;Integer&gt; response = new Response&lt;&gt;();\r\n           response.setData(sessions);\r\n           return ResponseEntity.ok(response);\r\n       }\r\n\r\nin my WebSecurityConfigurerAdapterImpl:\r\n\r\n    @Bean\r\n    public SessionRegistry sessionRegistry() {\r\n        return new SessionRegistryImpl();\r\n    }\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n       \r\n        http.httpBasic().and()\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                .and()\r\n                .cors()\r\n                .and()\r\n                .authorizeRequests()\r\n                .antMatchers(\r\n                        &quot;/v3/api-docs/**&quot;,\r\n                        &quot;/swagger-ui/**&quot;\r\n                ).permitAll()\r\n                .anyRequest().authenticated()\r\n                .and().csrf().disable();\r\n\r\n        http.headers().frameOptions().disable();\r\n\r\n        http.addFilterBefore(\r\n            authenticationTokenFilterBean(), \r\n            UsernamePasswordAuthenticationFilter.class\r\n        );\r\n\r\n        http\r\n           .headers().cacheControl();\r\n\r\n        http\r\n           .sessionManagement()\r\n           .maximumSessions(1).sessionRegistry(sessionRegistry());\r\n    }\r\n\r\n\r\nin my class who implements OncePerRequestFilter has this method to update the crrent token for each request so i don&#39;t know if this will be a problem:\r\n\r\n   \r\n\r\n         if (jwtTokenUtil.canTokenBeRefreshed(authToken)) {\r\n                                    authToken = jwtTokenUtil.refreshToken(authToken);\r\n                                }\r\n     request.setAttribute(&quot;x-auth&quot;, authToken);\r\n\r\nps:\r\nMy current application is deployed in a wildfly 18 server and the requestes are handled by apache","title":"Get the online users in my spring security","body":"<p>I need to get how manyusers are currently using my application, one problem is everytime a user make a request my application create a new token for that user (react get that token and replace the old one)</p>\n<p>I already tried SessionRegistry but because it create a new token for each request the number it returns increase everytime:</p>\n<pre><code>   @Autowired\n   private SessionRegistry sessionRegistry;\n\n   @GetMapping\n   public ResponseEntity&lt;Response&lt;Integer&gt;&gt; getSessions(){\n\n       List&lt;String&gt; userDetailsList = sessionRegistry.getAllPrincipals().stream()\n               .filter(u -&gt; !sessionRegistry.getAllSessions(u, false).isEmpty())\n               .map(Object::toString)\n               .collect(Collectors.toList());\n       int sessions = userDetailsList.size();\n               //MySessionListener.getActiveSessions();\n       Response&lt;Integer&gt; response = new Response&lt;&gt;();\n       response.setData(sessions);\n       return ResponseEntity.ok(response);\n   }\n</code></pre>\n<p>in my WebSecurityConfigurerAdapterImpl:</p>\n<pre><code>@Bean\npublic SessionRegistry sessionRegistry() {\n    return new SessionRegistryImpl();\n}\n\n@Override\nprotected void configure(HttpSecurity http) throws Exception {\n   \n    http.httpBasic().and()\n            .sessionManagement()\n            .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n            .and()\n            .cors()\n            .and()\n            .authorizeRequests()\n            .antMatchers(\n                    &quot;/v3/api-docs/**&quot;,\n                    &quot;/swagger-ui/**&quot;\n            ).permitAll()\n            .anyRequest().authenticated()\n            .and().csrf().disable();\n\n    http.headers().frameOptions().disable();\n\n    http.addFilterBefore(\n        authenticationTokenFilterBean(), \n        UsernamePasswordAuthenticationFilter.class\n    );\n\n    http\n       .headers().cacheControl();\n\n    http\n       .sessionManagement()\n       .maximumSessions(1).sessionRegistry(sessionRegistry());\n}\n</code></pre>\n<p>in my class who implements OncePerRequestFilter has this method to update the crrent token for each request so i don't know if this will be a problem:</p>\n<pre><code>     if (jwtTokenUtil.canTokenBeRefreshed(authToken)) {\n                                authToken = jwtTokenUtil.refreshToken(authToken);\n                            }\n request.setAttribute(&quot;x-auth&quot;, authToken);\n</code></pre>\n<p>ps:\nMy current application is deployed in a wildfly 18 server and the requestes are handled by apache</p>\n"},{"tags":["java","jsf","el"],"comments":[{"owner":{"account_id":472248,"reputation":19503,"user_id":880619,"accept_rate":100,"display_name":"Jasper de Vries"},"score":1,"creation_date":1691564893,"post_id":76865307,"comment_id":135507061,"body_markdown":"That are two different things. Overriding is not overloading. What you experience is expected and correct.","body":"That are two different things. Overriding is not overloading. What you experience is expected and correct."}],"owner":{"account_id":7849781,"reputation":141,"user_id":5933589,"accept_rate":70,"display_name":"raho"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691642627,"answer_count":0,"score":0,"last_activity_date":1691564931,"creation_date":1691564213,"question_id":76865307,"body_markdown":"Consider following scenario:\r\n\r\nMy Java classes:\r\n\r\n    public abstract class AbstractListBaseModel {\r\n        public void onColumnToggle(ToggleEvent event) {\r\n            // toggle column\r\n        }\r\n    }\r\n    \r\n    @Named\r\n    public class MyListModel extends AbstractListBaseModel {\r\n        @Override\r\n        public void onColumnToggle(ToggleEvent event) {\r\n            // toggle column...\r\n            super.onColumnToggle(event);\r\n            // ...and do some more\r\n        }\r\n    }\r\n\r\nmyList.xhtml:\r\n\r\n    &lt;p:commandButton id=&quot;myToggler&quot; .../&gt;\r\n    &lt;p:columnToggler trigger=&quot;myToggler&quot; datasource=&quot;myListData&quot;&gt;\r\n        &lt;p:ajax event=&quot;toggle&quot; listener=&quot;#{myListModel.onColumnToggle}&quot;/&gt;\r\n    &lt;/p:columnToggler&gt;\r\n\r\nMy application always calls the MyListModel.onColumnToggle() method and that is wha I want - but is this the guaranteed behavior?\r\n[What You Can Not Do in EL][1] mentions that EL doesn&#39;t support overloading.\r\n\r\nAnd IntelliJ IDE shows both method declarations when moving the cursor over the listener!\r\n\r\n\r\n\r\n  [1]: https://www.baeldung.com/intro-to-jsf-expression-language#CanNotDo","title":"JSF EL overload method inheritance","body":"<p>Consider following scenario:</p>\n<p>My Java classes:</p>\n<pre><code>public abstract class AbstractListBaseModel {\n    public void onColumnToggle(ToggleEvent event) {\n        // toggle column\n    }\n}\n\n@Named\npublic class MyListModel extends AbstractListBaseModel {\n    @Override\n    public void onColumnToggle(ToggleEvent event) {\n        // toggle column...\n        super.onColumnToggle(event);\n        // ...and do some more\n    }\n}\n</code></pre>\n<p>myList.xhtml:</p>\n<pre><code>&lt;p:commandButton id=&quot;myToggler&quot; .../&gt;\n&lt;p:columnToggler trigger=&quot;myToggler&quot; datasource=&quot;myListData&quot;&gt;\n    &lt;p:ajax event=&quot;toggle&quot; listener=&quot;#{myListModel.onColumnToggle}&quot;/&gt;\n&lt;/p:columnToggler&gt;\n</code></pre>\n<p>My application always calls the MyListModel.onColumnToggle() method and that is wha I want - but is this the guaranteed behavior?\n<a href=\"https://www.baeldung.com/intro-to-jsf-expression-language#CanNotDo\" rel=\"nofollow noreferrer\">What You Can Not Do in EL</a> mentions that EL doesn't support overloading.</p>\n<p>And IntelliJ IDE shows both method declarations when moving the cursor over the listener!</p>\n"},{"tags":["java","android","firebase","google-cloud-platform","google-cloud-firestore"],"comments":[{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1691473651,"post_id":76853860,"comment_id":135492558,"body_markdown":"Please edit your question and add your database structure as a screenshot. Please add the content of your `expenses` class.","body":"Please edit your question and add your database structure as a screenshot. Please add the content of your <code>expenses</code> class."},{"owner":{"account_id":13684714,"reputation":5,"user_id":9874086,"display_name":"Dulitha Bandaranayake"},"score":0,"creation_date":1691479988,"post_id":76853860,"comment_id":135493485,"body_markdown":"updated the the question. please help if you know the solution. Thank You!","body":"updated the the question. please help if you know the solution. Thank You!"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1691486172,"post_id":76853860,"comment_id":135494774,"body_markdown":"Please provide the database schema, not the query results.","body":"Please provide the database schema, not the query results."},{"owner":{"account_id":13684714,"reputation":5,"user_id":9874086,"display_name":"Dulitha Bandaranayake"},"score":0,"creation_date":1691490895,"post_id":76853860,"comment_id":135495712,"body_markdown":"Ok. re uploaded. please check!","body":"Ok. re uploaded. please check!"}],"answers":[{"comments":[{"owner":{"account_id":13684714,"reputation":5,"user_id":9874086,"display_name":"Dulitha Bandaranayake"},"score":0,"creation_date":1691480140,"post_id":76853941,"comment_id":135493511,"body_markdown":"I try this, but came a error with constructor in expenses class. what I need, want to get category wise Sum separately. Thank You!","body":"I try this, but came a error with constructor in expenses class. what I need, want to get category wise Sum separately. Thank You!"},{"owner":{"account_id":22432165,"reputation":1234,"user_id":16637863,"display_name":"Pawan Harariya"},"score":0,"creation_date":1691491627,"post_id":76853941,"comment_id":135495856,"body_markdown":"I have updated my answer as per your requirements. You will also have to add another constructor in your expenses class, or you can use the old one with null values for remaining fields.","body":"I have updated my answer as per your requirements. You will also have to add another constructor in your expenses class, or you can use the old one with null values for remaining fields."},{"owner":{"account_id":13684714,"reputation":5,"user_id":9874086,"display_name":"Dulitha Bandaranayake"},"score":0,"creation_date":1691556604,"post_id":76853941,"comment_id":135505959,"body_markdown":"`map.put(category, map.getOrDefault(category, 0) + Integer.parseInt(expenses.getAmount()));` have some error in this code. Error : `java.lang.NoSuchMethodError: No interface method getOrDefault(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object; in class Ljava/util/Map; or its super classes (declaration of &#39;java.util.Map&#39; appears in /system/framework/core-libart.jar)`","body":"<code>map.put(category, map.getOrDefault(category, 0) + Integer.parseInt(expenses.getAmount()));</code> have some error in this code. Error : <code>java.lang.NoSuchMethodError: No interface method getOrDefault(Ljava&#47;lang&#47;Object;Ljava&#47;lang&#47;Object;)Ljava&#47;lang&zwnj;&#8203;&#47;Object; in class Ljava&#47;util&#47;Map; or its super classes (declaration of &#39;java.util.Map&#39; appears in &#47;system&#47;framework&#47;core-libart.jar)</code>"},{"owner":{"account_id":22432165,"reputation":1234,"user_id":16637863,"display_name":"Pawan Harariya"},"score":0,"creation_date":1691564321,"post_id":76853941,"comment_id":135506964,"body_markdown":"I am not sure why map.getOrDefault() method is not working. You can use normal map.containsKey() method instead. I have updated the code accordingly.","body":"I am not sure why map.getOrDefault() method is not working. You can use normal map.containsKey() method instead. I have updated the code accordingly."},{"owner":{"account_id":13684714,"reputation":5,"user_id":9874086,"display_name":"Dulitha Bandaranayake"},"score":0,"creation_date":1691576074,"post_id":76853941,"comment_id":135509286,"body_markdown":"This worked! Thank you very much your patience until resolved this. I am very beginner to the android just started, This help me lot. And thank you for your guidance I fixed those mistakes. blessing!","body":"This worked! Thank you very much your patience until resolved this. I am very beginner to the android just started, This help me lot. And thank you for your guidance I fixed those mistakes. blessing!"}],"tags":[],"owner":{"account_id":22432165,"reputation":1234,"user_id":16637863,"display_name":"Pawan Harariya"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691564240,"creation_date":1691429574,"answer_id":76853941,"question_id":76853860,"body_markdown":"This is because for every document in the database collection, you are adding it to your expenses list. You can store all the expenses category wise and then add it to your adapter list. \r\n```\r\n...//other code\r\n\r\nexpensesArrayList.clear();\r\nList&lt;DocumentSnapshot&gt; list = queryDocumentSnapshots.getDocuments();\r\n\r\n// create a map for category wise total expense\r\nMap&lt;String,Integer&gt; map = new HashMap&lt;&gt;();\r\n\r\nfor (DocumentSnapshot ds : list){\r\n    expenses expenses = ds.toObject(expenses.class);\r\n    String category = expenses.getCategory();\r\n    int amount = Integer.parseInt(expenses.getAmount());\r\n    if(map.containsKey(category))\r\n        amount += map.get(category);\r\n    map.put(category, amount);\r\n}\r\n\r\n// Iterate over map and add expense for each category\r\nfor (Map.Entry&lt;String,Integer&gt; entry : map.entrySet()){\r\n    \r\n    // add a constructor in your expenses class for this\r\n    expenses categoryExpense = new expenses(entry.getKey(), String.valueOf(entry.getValue()));\r\n    expensesArrayList.add(categoryExpense);\r\n}\r\nadapter.notifyDataSetChanged();\r\n\r\n...// other code\r\n\r\n// In you expenses.java class add this constructor as well\r\npublic expenses(String category, String amount) {\r\n        Category = category;\r\n        Amount = amount;\r\n}\r\n```\r\n\r\nHowever, there can be problems with this implementation in case you have similar categories with different names like, phone and Phone, they will be considered different categories. I would suggest you to redesign your implementation with enum classes for categories.\r\n\r\nQuick Tips:\r\n1. Class names should always be capitalized. So it should be Expense and not expenses.\r\n2. Member fields name shouldn&#39;t be capitalized, so they should be category, amount, email, etc.\r\n3. Make data type of your amount field as int or double, to avoid parsing and easier calculations.","title":"How to do this on recyclerview in android using firestore","body":"<p>This is because for every document in the database collection, you are adding it to your expenses list. You can store all the expenses category wise and then add it to your adapter list.</p>\n<pre><code>...//other code\n\nexpensesArrayList.clear();\nList&lt;DocumentSnapshot&gt; list = queryDocumentSnapshots.getDocuments();\n\n// create a map for category wise total expense\nMap&lt;String,Integer&gt; map = new HashMap&lt;&gt;();\n\nfor (DocumentSnapshot ds : list){\n    expenses expenses = ds.toObject(expenses.class);\n    String category = expenses.getCategory();\n    int amount = Integer.parseInt(expenses.getAmount());\n    if(map.containsKey(category))\n        amount += map.get(category);\n    map.put(category, amount);\n}\n\n// Iterate over map and add expense for each category\nfor (Map.Entry&lt;String,Integer&gt; entry : map.entrySet()){\n    \n    // add a constructor in your expenses class for this\n    expenses categoryExpense = new expenses(entry.getKey(), String.valueOf(entry.getValue()));\n    expensesArrayList.add(categoryExpense);\n}\nadapter.notifyDataSetChanged();\n\n...// other code\n\n// In you expenses.java class add this constructor as well\npublic expenses(String category, String amount) {\n        Category = category;\n        Amount = amount;\n}\n</code></pre>\n<p>However, there can be problems with this implementation in case you have similar categories with different names like, phone and Phone, they will be considered different categories. I would suggest you to redesign your implementation with enum classes for categories.</p>\n<p>Quick Tips:</p>\n<ol>\n<li>Class names should always be capitalized. So it should be Expense and not expenses.</li>\n<li>Member fields name shouldn't be capitalized, so they should be category, amount, email, etc.</li>\n<li>Make data type of your amount field as int or double, to avoid parsing and easier calculations.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691491937,"creation_date":1691491937,"answer_id":76858833,"question_id":76853860,"body_markdown":"The problem in your code lies in the fact that you have in your `expenses` class a field called `Category` and a getter called `getCategory(),` which is not correct since Firebase is looking in the database for a field named `category` and not `Category`. See the lowercase `c` letter vs. capital letter `C`?\r\n\r\nThe Firebase SDK maps between your Java object and the JSON properties in the Cloud Firestore based on [JavaBean property naming conventions][1]. That being said, there are multiple solutions to solve this problem, but here are the simplest ones:\r\n\r\n* Make the fields follow the naming convention of the properties:\r\n\r\n```\r\npublic class Expenses {\r\n    String category;\r\n    String date;\r\n    String email;\r\n    String amount;\r\n    String description;\r\n    String expId;\r\n\r\n    public expenses(String category, String date, String email, String amount, String description, String expId) {\r\n        this.category = category;\r\n        this.date = date;\r\n        this.email = email;\r\n        this.amount = amount;\r\n        this.description = description;\r\n        this.expId = expId;\r\n    }\r\n\r\n    public Expenses(){}\r\n\r\n    public String getCategory() {\r\n        return category;\r\n    }\r\n\r\n    public void setCategory(String category) {\r\n        this.category = category;\r\n    }\r\n\r\n    public String getDate() {\r\n        return date;\r\n    }\r\n\r\n    public void setDate(String date) {\r\n        this.date = date;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return email;\r\n    }\r\n\r\n    public void setEmail(String email) {\r\n        this.email = email;\r\n    }\r\n\r\n    public String getAmount() {\r\n        return Amount;\r\n    }\r\n\r\n    public void setAmount(String amount) {\r\n        this.amount = amount;\r\n    }\r\n\r\n    public String getDescription() {\r\n        return description;\r\n    }\r\n\r\n    public void setDescription(String description) {\r\n        this.description = description;\r\n    }\r\n\r\n    public String getExpId() {\r\n        return expId;\r\n    }\r\n\r\n    public void setExpId(String expId) {\r\n        this.expId = expId;\r\n    }\r\n}\r\n```\r\n\r\n* Use `@PropertyName` annotation in front of the getters, to map the the fields in your class into the name that exists inside the database:\r\n\r\n```\r\npublic class expenses {\r\n    String Category;\r\n    String Date;\r\n    String Email;\r\n    String Amount;\r\n    String Description;\r\n    String expID;\r\n\r\n    public expenses(String category, String date, String email, String amount, String description, String expId) {\r\n        Category = category;\r\n        Date = date;\r\n        Email = email;\r\n        Amount = amount;\r\n        Description = description;\r\n        this.expID = expID;\r\n    }\r\n\r\n    public expenses(){}\r\n\r\n    @PropertyName(&quot;Category&quot;)\r\n    public String getCategory() {\r\n        return Category;\r\n    }\r\n\r\n    public void setCategory(String category) {\r\n        Category = category;\r\n    }\r\n\r\n    @PropertyName(&quot;Date&quot;)\r\n    public String getDate() {\r\n        return Date;\r\n    }\r\n\r\n    public void setDate(String date) {\r\n        Date = date;\r\n    }\r\n\r\n    @PropertyName(&quot;Email&quot;)\r\n    public String getEmail() {\r\n        return Email;\r\n    }\r\n\r\n    public void setEmail(String email) {\r\n        Email = email;\r\n    }\r\n\r\n    @PropertyName(&quot;Amount&quot;)\r\n    public String getAmount() {\r\n        return Amount;\r\n    }\r\n\r\n    public void setAmount(String amount) {\r\n        Amount = amount;\r\n    }\r\n\r\n    @PropertyName(&quot;Description&quot;)\r\n    public String getDescription() {\r\n        return Description;\r\n    }\r\n\r\n    public void setDescription(String description) {\r\n        Description = description;\r\n    }\r\n\r\n    public String getExpID() {\r\n        return expID;\r\n    }\r\n\r\n    public void setExpID(String expID) {\r\n        this.expID = expID;\r\n    }\r\n}\r\n```\r\n\r\nP.S. Please also see that I have renamed the class from `expenses` to `Expenses`, to the [Java Naming Conventions][2].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1991316/where-is-the-javabean-property-naming-convention-defined\r\n  [2]: https://www.javatpoint.com/java-naming-conventions","title":"How to do this on recyclerview in android using firestore","body":"<p>The problem in your code lies in the fact that you have in your <code>expenses</code> class a field called <code>Category</code> and a getter called <code>getCategory(),</code> which is not correct since Firebase is looking in the database for a field named <code>category</code> and not <code>Category</code>. See the lowercase <code>c</code> letter vs. capital letter <code>C</code>?</p>\n<p>The Firebase SDK maps between your Java object and the JSON properties in the Cloud Firestore based on <a href=\"https://stackoverflow.com/questions/1991316/where-is-the-javabean-property-naming-convention-defined\">JavaBean property naming conventions</a>. That being said, there are multiple solutions to solve this problem, but here are the simplest ones:</p>\n<ul>\n<li>Make the fields follow the naming convention of the properties:</li>\n</ul>\n<pre><code>public class Expenses {\n    String category;\n    String date;\n    String email;\n    String amount;\n    String description;\n    String expId;\n\n    public expenses(String category, String date, String email, String amount, String description, String expId) {\n        this.category = category;\n        this.date = date;\n        this.email = email;\n        this.amount = amount;\n        this.description = description;\n        this.expId = expId;\n    }\n\n    public Expenses(){}\n\n    public String getCategory() {\n        return category;\n    }\n\n    public void setCategory(String category) {\n        this.category = category;\n    }\n\n    public String getDate() {\n        return date;\n    }\n\n    public void setDate(String date) {\n        this.date = date;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getAmount() {\n        return Amount;\n    }\n\n    public void setAmount(String amount) {\n        this.amount = amount;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n\n    public String getExpId() {\n        return expId;\n    }\n\n    public void setExpId(String expId) {\n        this.expId = expId;\n    }\n}\n</code></pre>\n<ul>\n<li>Use <code>@PropertyName</code> annotation in front of the getters, to map the the fields in your class into the name that exists inside the database:</li>\n</ul>\n<pre><code>public class expenses {\n    String Category;\n    String Date;\n    String Email;\n    String Amount;\n    String Description;\n    String expID;\n\n    public expenses(String category, String date, String email, String amount, String description, String expId) {\n        Category = category;\n        Date = date;\n        Email = email;\n        Amount = amount;\n        Description = description;\n        this.expID = expID;\n    }\n\n    public expenses(){}\n\n    @PropertyName(&quot;Category&quot;)\n    public String getCategory() {\n        return Category;\n    }\n\n    public void setCategory(String category) {\n        Category = category;\n    }\n\n    @PropertyName(&quot;Date&quot;)\n    public String getDate() {\n        return Date;\n    }\n\n    public void setDate(String date) {\n        Date = date;\n    }\n\n    @PropertyName(&quot;Email&quot;)\n    public String getEmail() {\n        return Email;\n    }\n\n    public void setEmail(String email) {\n        Email = email;\n    }\n\n    @PropertyName(&quot;Amount&quot;)\n    public String getAmount() {\n        return Amount;\n    }\n\n    public void setAmount(String amount) {\n        Amount = amount;\n    }\n\n    @PropertyName(&quot;Description&quot;)\n    public String getDescription() {\n        return Description;\n    }\n\n    public void setDescription(String description) {\n        Description = description;\n    }\n\n    public String getExpID() {\n        return expID;\n    }\n\n    public void setExpID(String expID) {\n        this.expID = expID;\n    }\n}\n</code></pre>\n<p>P.S. Please also see that I have renamed the class from <code>expenses</code> to <code>Expenses</code>, to the <a href=\"https://www.javatpoint.com/java-naming-conventions\" rel=\"nofollow noreferrer\">Java Naming Conventions</a>.</p>\n"}],"owner":{"account_id":13684714,"reputation":5,"user_id":9874086,"display_name":"Dulitha Bandaranayake"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76853941,"answer_count":2,"score":0,"last_activity_date":1691564240,"creation_date":1691428713,"question_id":76853860,"body_markdown":"This is the result of RecyclerView:\r\n\r\n![enter image description here](https://i.stack.imgur.com/Y7WZ2.jpg)\r\n\r\nFirestore database schema:\r\n\r\n![Frestore Data][1]\r\n\r\n\r\nthis is the code I am using. This only retrieve data like in a image \r\n\r\n```\r\ndb.collection(&quot;Expenses&quot;)\r\n    .whereEqualTo(&quot;Email&quot;,email)\r\n    .whereGreaterThanOrEqualTo(&quot;Date&quot;,MonthFirstDate)\r\n    .whereLessThanOrEqualTo(&quot;Date&quot;,TodayDate)\r\n    .orderBy(&quot;Date&quot;)\r\n    .get()\r\n    .addOnSuccessListener(new OnSuccessListener&lt;QuerySnapshot&gt;() \t\t\t\t\t\t\t\t\t\t\t{\r\n        @Override\r\n        public void onSuccess(QuerySnapshot queryDocumentSnapshots) {\r\n            if (!queryDocumentSnapshots.isEmpty()){\r\n                expensesArrayList.clear();\r\n                List&lt;DocumentSnapshot&gt; list = queryDocumentSnapshots.getDocuments();\r\n                for (DocumentSnapshot ds : list){\r\n                    expenses expenses = ds.toObject(expenses.class);\r\n                    expensesArrayList.add(expenses);\r\n                }\r\n                adapter.notifyDataSetChanged();\r\n            }\r\n        }\r\n    })\r\n```\r\n\r\nrecyclerview Adapter code\r\n\r\n\r\n```\r\nimport java.util.ArrayList;\r\n\r\npublic class expensesAdapter extends RecyclerView.Adapter&lt;expensesAdapter.expHolder&gt; {\r\n\r\n    private ArrayList&lt;expenses&gt; expensesArrayList;\r\n    private Context context;\r\n\r\n\r\n    public expensesAdapter(ArrayList&lt;expenses&gt; expensesArrayList, Context context) {\r\n        this.expensesArrayList = expensesArrayList;\r\n        this.context = context;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public expensesAdapter.expHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View v = LayoutInflater.from(context).inflate(R.layout.expensesitems,parent,false);\r\n        return new expHolder(v);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull expensesAdapter.expHolder holder, int position) {\r\n        expenses expenses = expensesArrayList.get(position);\r\n        holder.catName.setText(expenses.getCategory());\r\n        holder.catAmont.setText(expenses.getAmount());\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return expensesArrayList.size();\r\n    }\r\n\r\n    class expHolder extends RecyclerView.ViewHolder {\r\n\r\n        private final TextView catName,catAmont;\r\n\r\n        public expHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n\r\n            catName = itemView.findViewById(R.id.expCategory);\r\n            catAmont =itemView.findViewById(R.id.expAmount);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThis is the expenses class\r\n\r\n    \r\n    public class expenses {\r\n        String Category;\r\n        String Date;\r\n        String Email;\r\n        String Amount;\r\n        String Description;\r\n        String expID;\r\n    \r\n        public expenses(String category, String date, String email, String amount, String description, String expID) {\r\n            Category = category;\r\n            Date = date;\r\n            Email = email;\r\n            Amount = amount;\r\n            Description = description;\r\n            this.expID = expID;\r\n        }\r\n    \r\n        public expenses(){}\r\n    \r\n        public String getCategory() {\r\n            return Category;\r\n        }\r\n    \r\n        public void setCategory(String category) {\r\n            Category = category;\r\n        }\r\n    \r\n        public String getDate() {\r\n            return Date;\r\n        }\r\n    \r\n        public void setDate(String date) {\r\n            Date = date;\r\n        }\r\n    \r\n        public String getEmail() {\r\n            return Email;\r\n        }\r\n    \r\n        public void setEmail(String email) {\r\n            Email = email;\r\n        }\r\n    \r\n        public String getAmount() {\r\n            return Amount;\r\n        }\r\n    \r\n        public void setAmount(String amount) {\r\n            Amount = amount;\r\n        }\r\n    \r\n        public String getDescription() {\r\n            return Description;\r\n        }\r\n    \r\n        public void setDescription(String description) {\r\n            Description = description;\r\n        }\r\n    \r\n        public String getExpID() {\r\n            return expID;\r\n        }\r\n    \r\n        public void setExpID(String expID) {\r\n            this.expID = expID;\r\n        }\r\n    }\r\n\r\nBut i need this kind of result:\r\n![](https://i.stack.imgur.com/kJ4hC.jpg)\r\n\r\n\r\nI want a **category wise Sum amount** on recyclerview. In my code its only showing separately.   \r\nPlease gys help me for figure this out! \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XOzfa.png","title":"How to do this on recyclerview in android using firestore","body":"<p>This is the result of RecyclerView:</p>\n<p><img src=\"https://i.stack.imgur.com/Y7WZ2.jpg\" alt=\"enter image description here\" /></p>\n<p>Firestore database schema:</p>\n<p><img src=\"https://i.stack.imgur.com/XOzfa.png\" alt=\"Frestore Data\" /></p>\n<p>this is the code I am using. This only retrieve data like in a image</p>\n<pre><code>db.collection(&quot;Expenses&quot;)\n    .whereEqualTo(&quot;Email&quot;,email)\n    .whereGreaterThanOrEqualTo(&quot;Date&quot;,MonthFirstDate)\n    .whereLessThanOrEqualTo(&quot;Date&quot;,TodayDate)\n    .orderBy(&quot;Date&quot;)\n    .get()\n    .addOnSuccessListener(new OnSuccessListener&lt;QuerySnapshot&gt;()                                            {\n        @Override\n        public void onSuccess(QuerySnapshot queryDocumentSnapshots) {\n            if (!queryDocumentSnapshots.isEmpty()){\n                expensesArrayList.clear();\n                List&lt;DocumentSnapshot&gt; list = queryDocumentSnapshots.getDocuments();\n                for (DocumentSnapshot ds : list){\n                    expenses expenses = ds.toObject(expenses.class);\n                    expensesArrayList.add(expenses);\n                }\n                adapter.notifyDataSetChanged();\n            }\n        }\n    })\n</code></pre>\n<p>recyclerview Adapter code</p>\n<pre><code>import java.util.ArrayList;\n\npublic class expensesAdapter extends RecyclerView.Adapter&lt;expensesAdapter.expHolder&gt; {\n\n    private ArrayList&lt;expenses&gt; expensesArrayList;\n    private Context context;\n\n\n    public expensesAdapter(ArrayList&lt;expenses&gt; expensesArrayList, Context context) {\n        this.expensesArrayList = expensesArrayList;\n        this.context = context;\n    }\n\n    @NonNull\n    @Override\n    public expensesAdapter.expHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View v = LayoutInflater.from(context).inflate(R.layout.expensesitems,parent,false);\n        return new expHolder(v);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull expensesAdapter.expHolder holder, int position) {\n        expenses expenses = expensesArrayList.get(position);\n        holder.catName.setText(expenses.getCategory());\n        holder.catAmont.setText(expenses.getAmount());\n    }\n\n    @Override\n    public int getItemCount() {\n        return expensesArrayList.size();\n    }\n\n    class expHolder extends RecyclerView.ViewHolder {\n\n        private final TextView catName,catAmont;\n\n        public expHolder(@NonNull View itemView) {\n            super(itemView);\n\n            catName = itemView.findViewById(R.id.expCategory);\n            catAmont =itemView.findViewById(R.id.expAmount);\n        }\n    }\n}\n</code></pre>\n<p>This is the expenses class</p>\n<pre><code>public class expenses {\n    String Category;\n    String Date;\n    String Email;\n    String Amount;\n    String Description;\n    String expID;\n\n    public expenses(String category, String date, String email, String amount, String description, String expID) {\n        Category = category;\n        Date = date;\n        Email = email;\n        Amount = amount;\n        Description = description;\n        this.expID = expID;\n    }\n\n    public expenses(){}\n\n    public String getCategory() {\n        return Category;\n    }\n\n    public void setCategory(String category) {\n        Category = category;\n    }\n\n    public String getDate() {\n        return Date;\n    }\n\n    public void setDate(String date) {\n        Date = date;\n    }\n\n    public String getEmail() {\n        return Email;\n    }\n\n    public void setEmail(String email) {\n        Email = email;\n    }\n\n    public String getAmount() {\n        return Amount;\n    }\n\n    public void setAmount(String amount) {\n        Amount = amount;\n    }\n\n    public String getDescription() {\n        return Description;\n    }\n\n    public void setDescription(String description) {\n        Description = description;\n    }\n\n    public String getExpID() {\n        return expID;\n    }\n\n    public void setExpID(String expID) {\n        this.expID = expID;\n    }\n}\n</code></pre>\n<p>But i need this kind of result:\n<img src=\"https://i.stack.imgur.com/kJ4hC.jpg\" alt=\"\" /></p>\n<p>I want a <strong>category wise Sum amount</strong> on recyclerview. In my code its only showing separately.<br />\nPlease gys help me for figure this out!</p>\n"},{"tags":["java","rest","http","elasticsearch","request"],"comments":[{"owner":{"account_id":5843921,"reputation":210875,"user_id":4604579,"display_name":"Val"},"score":0,"creation_date":1614755697,"post_id":66448597,"comment_id":117478465,"body_markdown":"I&#39;m not sure the error is related to the query. Can you post the full stack trace please?","body":"I&#39;m not sure the error is related to the query. Can you post the full stack trace please?"},{"owner":{"account_id":20854662,"reputation":1,"user_id":15318317,"display_name":"amalviya_13"},"score":0,"creation_date":1614812932,"post_id":66448597,"comment_id":117502945,"body_markdown":"I actually figured out the problem. Somehow updating my pom.xml to hold older versions of elasticsearch solved the problem.","body":"I actually figured out the problem. Somehow updating my pom.xml to hold older versions of elasticsearch solved the problem."}],"owner":{"account_id":20854662,"reputation":1,"user_id":15318317,"display_name":"amalviya_13"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":366,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691564173,"creation_date":1614727818,"question_id":66448597,"body_markdown":"I have an elasticsearch cluster running on my port 9201. I want to send a POST request to it to retrieve some data using a query I have built. I have this code so far following elastic search&#39;s own api documentation. I am getting a ```Exception in thread &quot;main&quot; java.lang.BootstrapMethodError: call site initialization exception```\r\nThis is being thrown at the line which is performing the request ```Response response = restClient.performRequest(request);```\r\n\r\nThis is the code I have so far\r\n```\r\ntry{\r\n    RestClient restClient = RestClient.builder(new HttpHost(&quot;localhost&quot;, 9201, &quot;http&quot;)).build();\r\n    Request request = new Request(&quot;POST&quot;, &quot;/event/_search&quot;);\r\n    request.setEntity(new NStringEntity(\r\n                    &quot;{\\&quot;query\\&quot;:{\\&quot;bool\\&quot;:{\\&quot;must\\&quot;:[{\\&quot;match\\&quot;:{\\&quot;action\\&quot;:\\&quot;CREATE\\&quot;}}],\\&quot;must_not\\&quot;:[],\\&quot;should\\&quot;:[]}},\\&quot;from\\&quot;:0,\\&quot;size\\&quot;:10,\\&quot;sort\\&quot;:[],\\&quot;aggs\\&quot;:{}}&quot;,\r\n                    ContentType.APPLICATION_JSON));\r\n    Response response = restClient.performRequest(request);\r\n    System.out.println(response.toString());\r\n}\r\ncatch (Exception e){\r\n    System.out.println(e);\r\n}\r\n```\r\nEven if I remove my ```request.setEntity``` line, I am getting the error.","title":"Attempting to use RestClient to sent POST request to elasticsearch","body":"<p>I have an elasticsearch cluster running on my port 9201. I want to send a POST request to it to retrieve some data using a query I have built. I have this code so far following elastic search's own api documentation. I am getting a <code>Exception in thread &quot;main&quot; java.lang.BootstrapMethodError: call site initialization exception</code>\nThis is being thrown at the line which is performing the request <code>Response response = restClient.performRequest(request);</code></p>\n<p>This is the code I have so far</p>\n<pre><code>try{\n    RestClient restClient = RestClient.builder(new HttpHost(&quot;localhost&quot;, 9201, &quot;http&quot;)).build();\n    Request request = new Request(&quot;POST&quot;, &quot;/event/_search&quot;);\n    request.setEntity(new NStringEntity(\n                    &quot;{\\&quot;query\\&quot;:{\\&quot;bool\\&quot;:{\\&quot;must\\&quot;:[{\\&quot;match\\&quot;:{\\&quot;action\\&quot;:\\&quot;CREATE\\&quot;}}],\\&quot;must_not\\&quot;:[],\\&quot;should\\&quot;:[]}},\\&quot;from\\&quot;:0,\\&quot;size\\&quot;:10,\\&quot;sort\\&quot;:[],\\&quot;aggs\\&quot;:{}}&quot;,\n                    ContentType.APPLICATION_JSON));\n    Response response = restClient.performRequest(request);\n    System.out.println(response.toString());\n}\ncatch (Exception e){\n    System.out.println(e);\n}\n</code></pre>\n<p>Even if I remove my <code>request.setEntity</code> line, I am getting the error.</p>\n"},{"tags":["java","spring","spring-boot","spring-data-mongodb"],"comments":[{"owner":{"account_id":732315,"reputation":4996,"user_id":681444,"display_name":"racraman"},"score":1,"creation_date":1691563309,"post_id":76865072,"comment_id":135506771,"body_markdown":"Is there a reason you are using Joda Time ?  If not, you should switch to Java’s own java.time package (that was actually developed by the same guy who developed joda Time - and he recommends moving to java.time) - who knows, that may (I guess probably will) make that Stack Overflow error go away. https://stackoverflow.com/a/29768532/681444","body":"Is there a reason you are using Joda Time ?  If not, you should switch to Java’s own java.time package (that was actually developed by the same guy who developed joda Time - and he recommends moving to java.time) - who knows, that may (I guess probably will) make that Stack Overflow error go away. <a href=\"https://stackoverflow.com/a/29768532/681444\">stackoverflow.com/a/29768532/681444</a>"}],"answers":[{"tags":[],"owner":{"account_id":19173576,"reputation":26,"user_id":14006751,"display_name":"frxdude"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691564137,"creation_date":1691564137,"answer_id":76865294,"question_id":76865072,"body_markdown":"Lombok @Data annotation includes @ToString and this makes circular reference on relation. If you don&#39;t need @ToString extract the @Data to @Getter @Setter etc. Or you just write on the field @ToString.exclude to prevent.\r\n","title":"Getting Stackoverflow error while upgrading from spring boot 2.7 to 3.0.8","body":"<p>Lombok @Data annotation includes @ToString and this makes circular reference on relation. If you don't need @ToString extract the @Data to @Getter @Setter etc. Or you just write on the field @ToString.exclude to prevent.</p>\n"}],"owner":{"account_id":25514807,"reputation":53,"user_id":19305834,"display_name":"R0512S"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691564137,"creation_date":1691562101,"question_id":76865072,"body_markdown":"I am upgrading SB version from 2.7.12 to 3.0.8 and while upgrading i am getting the following error -\r\n ``` [https-jsse-nio-9001-exec-4] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] -Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Handler dispatch failed: java.lang.StackOverflowError] with root cause\r\njava.lang.StackOverflowError: null\r\n        at org.springframework.data.mapping.model.ClassGeneratingPropertyAccessorFactory.getPropertyAccessor(ClassGeneratingPropertyAccessorFactory.java:82)\r\n        at org.springframework.data.mapping.model.InstantiationAwarePropertyAccessorFactory.lambda$getPropertyAccessor$0(InstantiationAwarePropertyAccessorFactory.java:42)\r\n        at org.springframework.data.mapping.model.InstantiationAwarePropertyAccessor.getProperty(InstantiationAwarePropertyAccessor.java:124)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeProperties(MappingMongoConverter.java:887)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:869)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writePropertyInternal(MappingMongoConverter.java:1003)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeProperties(MappingMongoConverter.java:894)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:869)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writePropertyInternal(MappingMongoConverter.java:1003)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeProperties(MappingMongoConverter.java:894)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:869)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writePropertyInternal(MappingMongoConverter.java:1003)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeProperties(MappingMongoConverter.java:894)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:869)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writePropertyInternal(MappingMongoConverter.java:1003)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeProperties(MappingMongoConverter.java:894)\r\n        at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:869)\r\n```\r\nI am using the joda.time to access the objects from mongo.\r\n\r\n\r\n```\r\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\r\nimport com.fasterxml.jackson.databind.annotation.JsonDeserialize;\r\nimport com.fasterxml.jackson.databind.annotation.JsonSerialize;\r\nimport com.xxx.util.JodaDateTimeCustomDeserializer;\r\nimport com.xxx.util.JodaDateTimeCustomSerializer;\r\n\r\nimport org.joda.time.DateTime;\r\nimport org.springframework.data.annotation.Id;\r\nimport org.springframework.data.mongodb.core.mapping.Document;\r\n\r\nimport lombok.Data;\r\n\r\n@Document(collection = &quot;data&quot;)\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\n@Data\r\npublic class IMData\r\n{\r\n  @Id\r\n  private String id;\r\n  private String uid;\r\n  @JsonSerialize(using = JodaDateTimeCustomSerializer.class)\r\n  @JsonDeserialize(using = JodaDateTimeCustomDeserializer.class)\r\n  private DateTime timestamp;\r\n  @JsonSerialize(using = JodaDateTimeCustomSerializer.class)\r\n  @JsonDeserialize(using = JodaDateTimeCustomDeserializer.class)\r\n  private DateTime metaDataTimestamp;\r\n  private String ioConfig;\r\n  private int changeCount;\r\n  private String inventoryDbId;\r\n  private String hostname;\r\n  private boolean isManual;\r\n}\r\n\r\n```\r\n\r\nIMO, Stack overflow error should mean some circular dependency but the correct is not thrown by Springboot here.\r\n","title":"Getting Stackoverflow error while upgrading from spring boot 2.7 to 3.0.8","body":"<p>I am upgrading SB version from 2.7.12 to 3.0.8 and while upgrading i am getting the following error -</p>\n<pre><code>java.lang.StackOverflowError: null\n       at org.springframework.data.mapping.model.ClassGeneratingPropertyAccessorFactory.getPropertyAccessor(ClassGeneratingPropertyAccessorFactory.java:82)\n       at org.springframework.data.mapping.model.InstantiationAwarePropertyAccessorFactory.lambda$getPropertyAccessor$0(InstantiationAwarePropertyAccessorFactory.java:42)\n       at org.springframework.data.mapping.model.InstantiationAwarePropertyAccessor.getProperty(InstantiationAwarePropertyAccessor.java:124)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeProperties(MappingMongoConverter.java:887)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:869)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writePropertyInternal(MappingMongoConverter.java:1003)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeProperties(MappingMongoConverter.java:894)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:869)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writePropertyInternal(MappingMongoConverter.java:1003)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeProperties(MappingMongoConverter.java:894)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:869)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writePropertyInternal(MappingMongoConverter.java:1003)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeProperties(MappingMongoConverter.java:894)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:869)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writePropertyInternal(MappingMongoConverter.java:1003)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeProperties(MappingMongoConverter.java:894)\n       at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:869)\n</code></pre>\n<p>I am using the joda.time to access the objects from mongo.</p>\n<pre><code>import com.fasterxml.jackson.annotation.JsonIgnoreProperties;\nimport com.fasterxml.jackson.databind.annotation.JsonDeserialize;\nimport com.fasterxml.jackson.databind.annotation.JsonSerialize;\nimport com.xxx.util.JodaDateTimeCustomDeserializer;\nimport com.xxx.util.JodaDateTimeCustomSerializer;\n\nimport org.joda.time.DateTime;\nimport org.springframework.data.annotation.Id;\nimport org.springframework.data.mongodb.core.mapping.Document;\n\nimport lombok.Data;\n\n@Document(collection = &quot;data&quot;)\n@JsonIgnoreProperties(ignoreUnknown = true)\n@Data\npublic class IMData\n{\n  @Id\n  private String id;\n  private String uid;\n  @JsonSerialize(using = JodaDateTimeCustomSerializer.class)\n  @JsonDeserialize(using = JodaDateTimeCustomDeserializer.class)\n  private DateTime timestamp;\n  @JsonSerialize(using = JodaDateTimeCustomSerializer.class)\n  @JsonDeserialize(using = JodaDateTimeCustomDeserializer.class)\n  private DateTime metaDataTimestamp;\n  private String ioConfig;\n  private int changeCount;\n  private String inventoryDbId;\n  private String hostname;\n  private boolean isManual;\n}\n\n</code></pre>\n<p>IMO, Stack overflow error should mean some circular dependency but the correct is not thrown by Springboot here.</p>\n"},{"tags":["java","swing","jtable","jscrollpane","jviewport"],"comments":[{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":1,"creation_date":1691564362,"post_id":76865250,"comment_id":135506973,"body_markdown":"Check if your model contains data and if so don&#39;t draw the image?","body":"Check if your model contains data and if so don&#39;t draw the image?"},{"owner":{"account_id":2339705,"reputation":1133,"user_id":2052584,"accept_rate":75,"display_name":"MrSnrub"},"score":0,"creation_date":1691565662,"post_id":76865250,"comment_id":135507189,"body_markdown":"@JustanotherJavaprogrammer Unfortunately, `paintComponent` of the `JViewPort` isn&#39;t invoked, when data is added. (And the JViewport has no direct access to the TableModel.) `paintComponent` is only invoked, for example, if I resize the JFrame but not for changes to the JTable. So I&#39;m looking for an elegant way to update and redraw the viewport if data is added. I thought there might be some generic approach for JScrollPane as it can be used for components other than JTable as well.","body":"@JustanotherJavaprogrammer Unfortunately, <code>paintComponent</code> of the <code>JViewPort</code> isn&#39;t invoked, when data is added. (And the JViewport has no direct access to the TableModel.) <code>paintComponent</code> is only invoked, for example, if I resize the JFrame but not for changes to the JTable. So I&#39;m looking for an elegant way to update and redraw the viewport if data is added. I thought there might be some generic approach for JScrollPane as it can be used for components other than JTable as well."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1691569168,"post_id":76865250,"comment_id":135507867,"body_markdown":"I would solve it in a slightly different way - while there is no data in the table, display a different component, this could act as your “drop target” initially, once data is added, switch the views to your table","body":"I would solve it in a slightly different way - while there is no data in the table, display a different component, this could act as your “drop target” initially, once data is added, switch the views to your table"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691569953,"post_id":76865250,"comment_id":135508028,"body_markdown":"Better. Solves the coupling problem","body":"Better. Solves the coupling problem"},{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":1,"creation_date":1691710803,"post_id":76865250,"comment_id":135532179,"body_markdown":"If the paint method is not invoked when adding data, then simply invoke it yourself. An easy way to do this might be to simply extend the JViewPort and add the necessary code, for example, creating an `Boolean empty` variable within the JViewPort, then in your drag/drop event if data is added to the table for the first time just change that variable and make a call to repaint(). Then in the paint method just check the same variable and only print the background image if the variable is false.","body":"If the paint method is not invoked when adding data, then simply invoke it yourself. An easy way to do this might be to simply extend the JViewPort and add the necessary code, for example, creating an <code>Boolean empty</code> variable within the JViewPort, then in your drag/drop event if data is added to the table for the first time just change that variable and make a call to repaint(). Then in the paint method just check the same variable and only print the background image if the variable is false."}],"owner":{"account_id":2339705,"reputation":1133,"user_id":2052584,"accept_rate":75,"display_name":"MrSnrub"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691563808,"creation_date":1691563808,"question_id":76865250,"body_markdown":"I have a `JTable` and want my user to drag&amp;drop entries into that JTable.\r\n\r\nTo make that as obvious as possible, I want to display a placeholder image like *&quot;Please drag stuff HERE using your mouse!&quot;* in the background of the table, as long as the table is still empty.\r\n\r\nTherefore, I&#39;ve set up a custom `JViewport` using `createViewport()` of `JScrollPane`. See the following snippet from my `JScrollPane`:\r\n\r\n\t@Override\r\n\tprotected JViewport createViewport() {\r\n\t\treturn new JViewport() {\r\n\t\t\t@Override\r\n\t\t\tprotected void paintComponent( Graphics g ) {\r\n\t\t\t\tsuper.paintComponent( g );\r\n\t\t\t\t// XXX Draw background image here XXX\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\nTo simplify the snippet, I&#39;ve replaced the *&quot;draw a BufferedImage centered&quot;* stuff with a comment as it&#39;s not relevant to the question.\r\n\r\nSo far, the approach seems to work fine.\r\n\r\nBut of course, the background image is permanent, even if I add entries to the JTable. \r\n\r\nHow would you make it disappear as soon as the first entry is added to the JTable?\r\n\r\n- Add a `TableModelListener` that somehow triggers the viewport to `paintComponent` again?\r\n- Or is there a way for the `JViewport` to detect changes in &quot;its&quot; displayed component (its JTable) and redraw the Viewport then? (Would avoid coupling the data model and the Viewport.)\r\n","title":"Placeholder image in JViewport of JScrollPane for empty JTable","body":"<p>I have a <code>JTable</code> and want my user to drag&amp;drop entries into that JTable.</p>\n<p>To make that as obvious as possible, I want to display a placeholder image like <em>&quot;Please drag stuff HERE using your mouse!&quot;</em> in the background of the table, as long as the table is still empty.</p>\n<p>Therefore, I've set up a custom <code>JViewport</code> using <code>createViewport()</code> of <code>JScrollPane</code>. See the following snippet from my <code>JScrollPane</code>:</p>\n<pre><code>@Override\nprotected JViewport createViewport() {\n    return new JViewport() {\n        @Override\n        protected void paintComponent( Graphics g ) {\n            super.paintComponent( g );\n            // XXX Draw background image here XXX\n        }\n    };\n}\n</code></pre>\n<p>To simplify the snippet, I've replaced the <em>&quot;draw a BufferedImage centered&quot;</em> stuff with a comment as it's not relevant to the question.</p>\n<p>So far, the approach seems to work fine.</p>\n<p>But of course, the background image is permanent, even if I add entries to the JTable.</p>\n<p>How would you make it disappear as soon as the first entry is added to the JTable?</p>\n<ul>\n<li>Add a <code>TableModelListener</code> that somehow triggers the viewport to <code>paintComponent</code> again?</li>\n<li>Or is there a way for the <code>JViewport</code> to detect changes in &quot;its&quot; displayed component (its JTable) and redraw the Viewport then? (Would avoid coupling the data model and the Viewport.)</li>\n</ul>\n"},{"tags":["java","android","android-pendingintent"],"comments":[{"owner":{"account_id":1849514,"reputation":193878,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"score":0,"creation_date":1683841788,"post_id":76231658,"comment_id":134432691,"body_markdown":"The error says this is coming from `androidx.work`. What version of WorkManager are you using?","body":"The error says this is coming from <code>androidx.work</code>. What version of WorkManager are you using?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1683861823,"post_id":76231658,"comment_id":134434633,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":2262713,"reputation":2217,"user_id":1992342,"accept_rate":75,"display_name":"mike47"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691563447,"creation_date":1691563447,"answer_id":76865212,"question_id":76231658,"body_markdown":"Your error is coming from the Workmanager AndroidX library, which [had a bug in earlier versions][1]. Upgrade to Workmanager 2.7.0 or newer to solve it per [this answer][2].\r\n\r\n  [1]: https://issuetracker.google.com/issues/194108978\r\n  [2]: https://stackoverflow.com/a/68547548/1992342","title":"I can&#39;t get rid of FLAG_IMMUTABLE and FLAG_MUTABLE pending intent flags error","body":"<p>Your error is coming from the Workmanager AndroidX library, which <a href=\"https://issuetracker.google.com/issues/194108978\" rel=\"nofollow noreferrer\">had a bug in earlier versions</a>. Upgrade to Workmanager 2.7.0 or newer to solve it per <a href=\"https://stackoverflow.com/a/68547548/1992342\">this answer</a>.</p>\n"}],"owner":{"account_id":28054104,"reputation":1,"user_id":21429467,"display_name":"Elie Zgheib"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":250,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691563447,"creation_date":1683839713,"question_id":76231658,"body_markdown":"I am developing an android apploication in Android Studio.\r\nWhen I run it on android version 30 and below everything works as expected.\r\nBut when I run it on version 31 and above (target S+), I get this error:\r\n\r\n```\r\nE/AndroidRuntime: FATAL EXCEPTION: pool-3-thread-1\r\n    Process: com.privileb.card, PID: 20926\r\n    java.lang.IllegalArgumentException: com.privileb.card: Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE be specified when creating a PendingIntent.\r\n    Strongly consider using FLAG_IMMUTABLE, only use FLAG_MUTABLE if some functionality depends on the PendingIntent being mutable, e.g. if it needs to be used with inline replies or bubbles.\r\n        at android.app.PendingIntent.checkFlags(PendingIntent.java:401)\r\n        at android.app.PendingIntent.getBroadcastAsUser(PendingIntent.java:671)\r\n        at android.app.PendingIntent.getBroadcast(PendingIntent.java:658)\r\n        at androidx.work.impl.utils.ForceStopRunnable.getPendingIntent(ForceStopRunnable.java:273)\r\n        at androidx.work.impl.utils.ForceStopRunnable.isForceStopped(ForceStopRunnable.java:151)\r\n        at androidx.work.impl.utils.ForceStopRunnable.forceStopRunnable(ForceStopRunnable.java:171)\r\n        at androidx.work.impl.utils.ForceStopRunnable.run(ForceStopRunnable.java:102)\r\n        at androidx.work.impl.utils.SerialExecutor$Task.run(SerialExecutor.java:91)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1137)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:637)\r\n        at java.lang.Thread.run(Thread.java:1012)\r\n```\r\n\r\nI tried to get rid of every line that has `PendingIntent pendingIntent = PendingIntent.getActivity(...)` but **I keep getting the same error.**","title":"I can&#39;t get rid of FLAG_IMMUTABLE and FLAG_MUTABLE pending intent flags error","body":"<p>I am developing an android apploication in Android Studio.\nWhen I run it on android version 30 and below everything works as expected.\nBut when I run it on version 31 and above (target S+), I get this error:</p>\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: pool-3-thread-1\n    Process: com.privileb.card, PID: 20926\n    java.lang.IllegalArgumentException: com.privileb.card: Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE be specified when creating a PendingIntent.\n    Strongly consider using FLAG_IMMUTABLE, only use FLAG_MUTABLE if some functionality depends on the PendingIntent being mutable, e.g. if it needs to be used with inline replies or bubbles.\n        at android.app.PendingIntent.checkFlags(PendingIntent.java:401)\n        at android.app.PendingIntent.getBroadcastAsUser(PendingIntent.java:671)\n        at android.app.PendingIntent.getBroadcast(PendingIntent.java:658)\n        at androidx.work.impl.utils.ForceStopRunnable.getPendingIntent(ForceStopRunnable.java:273)\n        at androidx.work.impl.utils.ForceStopRunnable.isForceStopped(ForceStopRunnable.java:151)\n        at androidx.work.impl.utils.ForceStopRunnable.forceStopRunnable(ForceStopRunnable.java:171)\n        at androidx.work.impl.utils.ForceStopRunnable.run(ForceStopRunnable.java:102)\n        at androidx.work.impl.utils.SerialExecutor$Task.run(SerialExecutor.java:91)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1137)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:637)\n        at java.lang.Thread.run(Thread.java:1012)\n</code></pre>\n<p>I tried to get rid of every line that has <code>PendingIntent pendingIntent = PendingIntent.getActivity(...)</code> but <strong>I keep getting the same error.</strong></p>\n"},{"tags":["java","timefold"],"answers":[{"tags":[],"owner":{"account_id":14879486,"reputation":964,"user_id":10744614,"display_name":"Radovan Synek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691563237,"creation_date":1691563237,"answer_id":76865188,"question_id":76826401,"body_markdown":"If I understand your question correctly, you&#39;re trying to solve CVRPTW by adding capacities to the [vehicle-routing-time-windows quickstart][1].\r\n\r\nIn fact, you need to combine it with the [vehicle-routing-capacity quickstart][2] next to it. \r\n\r\nThe data sets are truly generated in the VehicleRouteDemoResource; have a loot at the [DemoData enum][3] and its parameters that define the vehicle capacity and customer demands. \r\n\r\n\r\n  [1]: https://github.com/TimefoldAI/timefold-quickstarts/tree/stable/use-cases/vehicle-routing-time-windows\r\n  [2]: https://github.com/TimefoldAI/timefold-quickstarts/tree/stable/use-cases/vehicle-routing-capacity\r\n  [3]: https://github.com/TimefoldAI/timefold-quickstarts/blob/stable/use-cases/vehicle-routing-capacity/src/main/java/org/acme/vehiclerouting/rest/VehicleRouteDemoResource.java#L41-L43","title":"Data of vehicle routing problem time windowed","body":"<p>If I understand your question correctly, you're trying to solve CVRPTW by adding capacities to the <a href=\"https://github.com/TimefoldAI/timefold-quickstarts/tree/stable/use-cases/vehicle-routing-time-windows\" rel=\"nofollow noreferrer\">vehicle-routing-time-windows quickstart</a>.</p>\n<p>In fact, you need to combine it with the <a href=\"https://github.com/TimefoldAI/timefold-quickstarts/tree/stable/use-cases/vehicle-routing-capacity\" rel=\"nofollow noreferrer\">vehicle-routing-capacity quickstart</a> next to it.</p>\n<p>The data sets are truly generated in the VehicleRouteDemoResource; have a loot at the <a href=\"https://github.com/TimefoldAI/timefold-quickstarts/blob/stable/use-cases/vehicle-routing-capacity/src/main/java/org/acme/vehiclerouting/rest/VehicleRouteDemoResource.java#L41-L43\" rel=\"nofollow noreferrer\">DemoData enum</a> and its parameters that define the vehicle capacity and customer demands.</p>\n"}],"owner":{"account_id":29041753,"reputation":5,"user_id":22246475,"display_name":"Manal Awada"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76865188,"answer_count":1,"score":0,"last_activity_date":1691563237,"creation_date":1691052757,"question_id":76826401,"body_markdown":"I&#39;m new to Timefold. I use the example that already exists in QuickStarts. My goal is to use this program to solve my own problem with capacity constraints, but the problem is that I don&#39;t know where I need to change the data properly. \r\n\r\ni try to change the data exists in &quot;VehicleRouteDemoResource&quot; but it does not work. \r\nWhere can i find the file that contain the data needed for this problem to solve it? \r\nthank you in advanced.","title":"Data of vehicle routing problem time windowed","body":"<p>I'm new to Timefold. I use the example that already exists in QuickStarts. My goal is to use this program to solve my own problem with capacity constraints, but the problem is that I don't know where I need to change the data properly.</p>\n<p>i try to change the data exists in &quot;VehicleRouteDemoResource&quot; but it does not work.\nWhere can i find the file that contain the data needed for this problem to solve it?\nthank you in advanced.</p>\n"},{"tags":["java","spring","sdk"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1691565229,"post_id":76865179,"comment_id":135507118,"body_markdown":"The problem is probably that you&#39;re depending on outdated library versions while other parts expect newer versions, so classes were added or removed, and you have a mismatch on your classpath, resulting in the error.","body":"The problem is probably that you&#39;re depending on outdated library versions while other parts expect newer versions, so classes were added or removed, and you have a mismatch on your classpath, resulting in the error."}],"owner":{"account_id":21591742,"reputation":1,"user_id":15921228,"display_name":"trick_min"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691565239,"answer_count":0,"score":0,"last_activity_date":1691563180,"creation_date":1691563180,"question_id":76865179,"body_markdown":"I am maintaining a **Java SDK** that, due to historical reasons, has integrated many third-party dependencies, including common ones such as Spring and gRPC.\r\n\r\nThe current Spring Boot version on the client is 2.5.14, and I plan to integrate the SDK into the client. The client&#39;s Spring Boot version can run normally on versions 2.2.0.RELEASE to 2.7.14, but cannot start on versions 2.1.18.RELEASE and below (2.0.0.RELEASE to 2.1.18.RELEASE). The corresponding incompatible Spring versions are those below 5.2.\r\n\r\nThe error message is as follows:\r\n\r\n```\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;gtxsTransactionAspectSupport&#39;: Lookup method resolution failed; nested exception is java.lang.IllegalStateException: Failed to introspect Class [com.netease.cloud.gtxs.core.rm.transaction.GtxsTransactionAspectSupport] from ClassLoader [sun.misc.Launcher$AppClassLoader@18b4aac2]\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:262) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:1198) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1123) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:545) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:502) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:312) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:310) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\r\n\tat org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.autowireResource(CommonAnnotationBeanPostProcessor.java:513) ~[spring-context-5.0.4.RELEASE.jar:5.0.4.RELEASE]\r\n\tat org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.getResource(CommonAnnotationBeanPostProcessor.java:484) ~[spring-context-5.0.4.RELEASE.jar:5.0.4.RELEASE]\r\n\tat org.springframework.context.annotation.CommonAnnotationBeanPostProcessor$ResourceElement.getResourceToInject(CommonAnnotationBeanPostProcessor.java:618) ~[spring-context-5.0.4.RELEASE.jar:5.0.4.RELEASE]\r\n\tat org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:177) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\r\n\tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:91) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\r\n\tat org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessPropertyValues(CommonAnnotationBeanPostProcessor.java:318) ~[spring-context-5.0.4.RELEASE.jar:5.0.4.RELEASE]\r\n\t... 17 common frames omitted\r\nCaused by: java.lang.IllegalStateException: Failed to introspect Class [com.netease.cloud.gtxs.core.rm.transaction.GtxsTransactionAspectSupport] from ClassLoader [sun.misc.Launcher$AppClassLoader@18b4aac2]\r\n\tat org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:659) ~[spring-core-5.0.4.RELEASE.jar:5.0.4.RELEASE]\r\n\tat org.springframework.util.ReflectionUtils.doWithMethods(ReflectionUtils.java:556) ~[spring-core-5.0.4.RELEASE.jar:5.0.4.RELEASE]\r\n\tat org.springframework.util.ReflectionUtils.doWithMethods(ReflectionUtils.java:541) ~[spring-core-5.0.4.RELEASE.jar:5.0.4.RELEASE]\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:245) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\r\n\t... 31 common frames omitted\r\nCaused by: java.lang.NoClassDefFoundError: org/springframework/transaction/TransactionManager\r\n\tat java.lang.Class.getDeclaredMethods0(Native Method) ~[na:1.8.0_312]\r\n\tat java.lang.Class.privateGetDeclaredMethods(Class.java:2729) ~[na:1.8.0_312]\r\n\tat java.lang.Class.getDeclaredMethods(Class.java:2003) ~[na:1.8.0_312]\r\n\tat org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:641) ~[spring-core-5.0.4.RELEASE.jar:5.0.4.RELEASE]\r\n\t... 34 common frames omitted\r\nCaused by: java.lang.ClassNotFoundException: org.springframework.transaction.TransactionManager\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:387) ~[na:1.8.0_312]\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:418) ~[na:1.8.0_312]\r\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352) ~[na:1.8.0_312]\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:351) ~[na:1.8.0_312]\r\n\t... 38 common frames omitted\r\n```\r\n\r\nI found that the SDK uses Spring&#39;s transactional functionality and inherits the `TransactionAspectSupport` class (`org.springframework.transaction.interceptor.TransactionAspectSupport`). `TransactionAspectSupport `contains a member object `transactionManager`, which is an abstract interface added in Spring 5.2. Previous versions did not have this member and instead had a member of type `PlatformTransactionManager`. This is consistent with the client integration error message, leading me to suspect that this might be the cause of the compatibility issue. However, the SDK code does not directly reference `TransactionManager`, and even when I configure the `spring-tx` dependency as &#39;provided&#39;, the error still occurs. This is very confusing to me. What could be the root cause of this issue?\r\n\r\n[TransactionManager](https://i.stack.imgur.com/N6Yty.png)\r\n\r\nI attempted to resolve this issue by setting the spring-tx dependency of the SDK to &#39;provided&#39;, with the aim of using the client&#39;s Spring-tx. However, the error remains the same.","title":"The Java SDK access client failed to start due to a compatibility issue with a third-party dependency (spring-tx)","body":"<p>I am maintaining a <strong>Java SDK</strong> that, due to historical reasons, has integrated many third-party dependencies, including common ones such as Spring and gRPC.</p>\n<p>The current Spring Boot version on the client is 2.5.14, and I plan to integrate the SDK into the client. The client's Spring Boot version can run normally on versions 2.2.0.RELEASE to 2.7.14, but cannot start on versions 2.1.18.RELEASE and below (2.0.0.RELEASE to 2.1.18.RELEASE). The corresponding incompatible Spring versions are those below 5.2.</p>\n<p>The error message is as follows:</p>\n<pre><code>Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'gtxsTransactionAspectSupport': Lookup method resolution failed; nested exception is java.lang.IllegalStateException: Failed to introspect Class [com.netease.cloud.gtxs.core.rm.transaction.GtxsTransactionAspectSupport] from ClassLoader [sun.misc.Launcher$AppClassLoader@18b4aac2]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:262) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:1198) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1123) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:545) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:502) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:312) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:310) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.autowireResource(CommonAnnotationBeanPostProcessor.java:513) ~[spring-context-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.getResource(CommonAnnotationBeanPostProcessor.java:484) ~[spring-context-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor$ResourceElement.getResourceToInject(CommonAnnotationBeanPostProcessor.java:618) ~[spring-context-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n    at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:177) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:91) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessPropertyValues(CommonAnnotationBeanPostProcessor.java:318) ~[spring-context-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n    ... 17 common frames omitted\nCaused by: java.lang.IllegalStateException: Failed to introspect Class [com.netease.cloud.gtxs.core.rm.transaction.GtxsTransactionAspectSupport] from ClassLoader [sun.misc.Launcher$AppClassLoader@18b4aac2]\n    at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:659) ~[spring-core-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n    at org.springframework.util.ReflectionUtils.doWithMethods(ReflectionUtils.java:556) ~[spring-core-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n    at org.springframework.util.ReflectionUtils.doWithMethods(ReflectionUtils.java:541) ~[spring-core-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:245) ~[spring-beans-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n    ... 31 common frames omitted\nCaused by: java.lang.NoClassDefFoundError: org/springframework/transaction/TransactionManager\n    at java.lang.Class.getDeclaredMethods0(Native Method) ~[na:1.8.0_312]\n    at java.lang.Class.privateGetDeclaredMethods(Class.java:2729) ~[na:1.8.0_312]\n    at java.lang.Class.getDeclaredMethods(Class.java:2003) ~[na:1.8.0_312]\n    at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:641) ~[spring-core-5.0.4.RELEASE.jar:5.0.4.RELEASE]\n    ... 34 common frames omitted\nCaused by: java.lang.ClassNotFoundException: org.springframework.transaction.TransactionManager\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:387) ~[na:1.8.0_312]\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:418) ~[na:1.8.0_312]\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352) ~[na:1.8.0_312]\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:351) ~[na:1.8.0_312]\n    ... 38 common frames omitted\n</code></pre>\n<p>I found that the SDK uses Spring's transactional functionality and inherits the <code>TransactionAspectSupport</code> class (<code>org.springframework.transaction.interceptor.TransactionAspectSupport</code>). <code>TransactionAspectSupport </code>contains a member object <code>transactionManager</code>, which is an abstract interface added in Spring 5.2. Previous versions did not have this member and instead had a member of type <code>PlatformTransactionManager</code>. This is consistent with the client integration error message, leading me to suspect that this might be the cause of the compatibility issue. However, the SDK code does not directly reference <code>TransactionManager</code>, and even when I configure the <code>spring-tx</code> dependency as 'provided', the error still occurs. This is very confusing to me. What could be the root cause of this issue?</p>\n<p><a href=\"https://i.stack.imgur.com/N6Yty.png\" rel=\"nofollow noreferrer\">TransactionManager</a></p>\n<p>I attempted to resolve this issue by setting the spring-tx dependency of the SDK to 'provided', with the aim of using the client's Spring-tx. However, the error remains the same.</p>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":99737,"reputation":2672,"user_id":269242,"accept_rate":91,"display_name":"Bizmarck"},"score":0,"creation_date":1362494168,"post_id":15226318,"comment_id":21463990,"body_markdown":"Hi, did you check the Hibernate docs: http://www.hibernate.org/docs You don&#39;t mention which version you are using. Please use code blocks in the future. Thanks","body":"Hi, did you check the Hibernate docs: <a href=\"http://www.hibernate.org/docs\" rel=\"nofollow noreferrer\">hibernate.org/docs</a> You don&#39;t mention which version you are using. Please use code blocks in the future. Thanks"}],"answers":[{"comments":[{"owner":{"account_id":90792,"reputation":448,"user_id":249724,"display_name":"Kacper86"},"score":2,"creation_date":1376402677,"post_id":15226592,"comment_id":26692312,"body_markdown":"save() method can do an SQL update if the id was assigned manually (and it exists in the database)","body":"save() method can do an SQL update if the id was assigned manually (and it exists in the database)"}],"tags":[],"owner":{"account_id":1414921,"reputation":1553,"user_id":1340767,"accept_rate":60,"display_name":"D3V"},"comment_count":1,"down_vote_count":0,"up_vote_count":24,"is_accepted":true,"score":24,"last_activity_date":1691563053,"creation_date":1362494455,"answer_id":15226592,"question_id":15226318,"body_markdown":"**Difference between `save` and `saveOrUpdate`** \r\n\r\nMain difference between `save` and `saveOrUpdate` method is that `save` generates a new identifier and `INSERT` record into database while `saveOrUpdate` can either `INSERT` or `UPDATE` based upon existence of record. So `save` will proceed without performing existence check, on the other hand `saveOrUpdate` will check for existence, if record exists it will be updated else a new record will be inserted.\r\n\r\n**Basic differences between `persist` and `save`**\r\n\r\n1) First difference between `save` and `persist` is their `return` type. Similar to `save` method, `persist` also `INSERT` records into database but return type of `persist` is `void` while return type of `save` is `Serializable object`.  \r\n\r\n2) Another difference between `persist` and `save` is that both methods make a transient instance persistent. However, `persist` method doesn&#39;t guarantee that the identifier value will be assigned to the persistent instance immediately, the assignment might happen at flush time.","title":"What exactly does org.hibernate.Session.save() do?","body":"<p><strong>Difference between <code>save</code> and <code>saveOrUpdate</code></strong></p>\n<p>Main difference between <code>save</code> and <code>saveOrUpdate</code> method is that <code>save</code> generates a new identifier and <code>INSERT</code> record into database while <code>saveOrUpdate</code> can either <code>INSERT</code> or <code>UPDATE</code> based upon existence of record. So <code>save</code> will proceed without performing existence check, on the other hand <code>saveOrUpdate</code> will check for existence, if record exists it will be updated else a new record will be inserted.</p>\n<p><strong>Basic differences between <code>persist</code> and <code>save</code></strong></p>\n<ol>\n<li><p>First difference between <code>save</code> and <code>persist</code> is their <code>return</code> type. Similar to <code>save</code> method, <code>persist</code> also <code>INSERT</code> records into database but return type of <code>persist</code> is <code>void</code> while return type of <code>save</code> is <code>Serializable object</code>.</p>\n</li>\n<li><p>Another difference between <code>persist</code> and <code>save</code> is that both methods make a transient instance persistent. However, <code>persist</code> method doesn't guarantee that the identifier value will be assigned to the persistent instance immediately, the assignment might happen at flush time.</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":941858,"reputation":2136,"user_id":969812,"accept_rate":90,"display_name":"Alex"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1362494550,"creation_date":1362494550,"answer_id":15226626,"question_id":15226318,"body_markdown":"As far as I know it&#39;s happening like this:\r\n\r\n1. `save()` is just saving your entity\r\n2. `persist()` is modifying your instance as managed entity. this means that if you do an operation on it and your transaction is still open then it will be automatically saved when you call `flush()` (if I am not mistaken)\r\n3. `merge()` there is also this one which is like `persist()` but it&#39;s returning a new instance and not modifying your old instance....\r\n4. `saveOrUpdate()` you can [see here][1]\r\n\r\n  [1]: https://stackoverflow.com/questions/170962/nhibernate-difference-between-session-merge-and-session-saveorupdate","title":"What exactly does org.hibernate.Session.save() do?","body":"<p>As far as I know it's happening like this:</p>\n\n<ol>\n<li><code>save()</code> is just saving your entity</li>\n<li><code>persist()</code> is modifying your instance as managed entity. this means that if you do an operation on it and your transaction is still open then it will be automatically saved when you call <code>flush()</code> (if I am not mistaken)</li>\n<li><code>merge()</code> there is also this one which is like <code>persist()</code> but it's returning a new instance and not modifying your old instance....</li>\n<li><code>saveOrUpdate()</code> you can <a href=\"https://stackoverflow.com/questions/170962/nhibernate-difference-between-session-merge-and-session-saveorupdate\">see here</a></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2177522,"reputation":120796,"user_id":1927832,"accept_rate":49,"display_name":"Suresh Atta"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1691563171,"creation_date":1362494658,"answer_id":15226660,"question_id":15226318,"body_markdown":"From [this answer][1]:\r\n\r\n&gt; **save** Persists an entity. Will assign an identifier if one doesn&#39;t exist. If one does, it&#39;s essentially doing an update. Returns the generated ID of the entity.\r\n\r\nI suggest you read the linked answer for further info.\r\n\r\n  [1]: https://stackoverflow.com/questions/161224/what-are-the-differences-between-the-different-saving-methods-in-hibernate","title":"What exactly does org.hibernate.Session.save() do?","body":"<p>From <a href=\"https://stackoverflow.com/questions/161224/what-are-the-differences-between-the-different-saving-methods-in-hibernate\">this answer</a>:</p>\n<blockquote>\n<p><strong>save</strong> Persists an entity. Will assign an identifier if one doesn't exist. If one does, it's essentially doing an update. Returns the generated ID of the entity.</p>\n</blockquote>\n<p>I suggest you read the linked answer for further info.</p>\n"},{"tags":[],"owner":{"account_id":2866591,"reputation":41,"user_id":2460797,"display_name":"javaaster"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1381468976,"creation_date":1381468976,"answer_id":19310791,"question_id":15226318,"body_markdown":"save() method insert the record into database . but saveorupdate() method check the pk if pk is found then it&#39;s update the data else insert the data into database .","title":"What exactly does org.hibernate.Session.save() do?","body":"<p>save() method insert the record into database . but saveorupdate() method check the pk if pk is found then it's update the data else insert the data into database .</p>\n"}],"owner":{"account_id":2215465,"reputation":3827,"user_id":1956207,"accept_rate":70,"display_name":"Hikari"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47745,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"accepted_answer_id":15226592,"answer_count":4,"score":24,"last_activity_date":1691563171,"creation_date":1362493713,"question_id":15226318,"body_markdown":"I know that `Session.save()` persists the transient object. And I see that it also has `saveOrUpdate()`, and also `persist()`.\r\n\r\nI suppose then that `save()` is equivalent to `SQL INCLUDE`, is it?\r\n\r\nIf I have an object that already exists on DB and I `save()` it, will another row be included, will its fields be updated, or will it just be ignored and nothing happen?","title":"What exactly does org.hibernate.Session.save() do?","body":"<p>I know that <code>Session.save()</code> persists the transient object. And I see that it also has <code>saveOrUpdate()</code>, and also <code>persist()</code>.</p>\n\n<p>I suppose then that <code>save()</code> is equivalent to <code>SQL INCLUDE</code>, is it?</p>\n\n<p>If I have an object that already exists on DB and I <code>save()</code> it, will another row be included, will its fields be updated, or will it just be ignored and nothing happen?</p>\n"},{"tags":["java","python","yaml","openapi"],"comments":[{"owner":{"account_id":141151,"reputation":36461,"user_id":347964,"accept_rate":79,"display_name":"flyx"},"score":0,"creation_date":1609679183,"post_id":65549855,"comment_id":115892115,"body_markdown":"OpenAPI requires `$ref` values to be something like `#/Tag` for referencing items in the same document, your example uses invalid syntax. The expected output you give contradicts what you describe, since you say all `$ref`s should be replaced but `$ref: Tag` is still part of the output. That said, does [prance](https://pypi.org/project/prance/) help you?","body":"OpenAPI requires <code>$ref</code> values to be something like <code>#&#47;Tag</code> for referencing items in the same document, your example uses invalid syntax. The expected output you give contradicts what you describe, since you say all <code>$ref</code>s should be replaced but <code>$ref: Tag</code> is still part of the output. That said, does <a href=\"https://pypi.org/project/prance/\" rel=\"nofollow noreferrer\">prance</a> help you?"},{"owner":{"account_id":10745626,"reputation":85,"user_id":7907058,"display_name":"pradrone"},"score":0,"creation_date":1609680589,"post_id":65549855,"comment_id":115892537,"body_markdown":"@flyx : fyi, updated the sample. Any idea of how I can utilize the prance to achieve $ref s to be replaced with all the definitions.","body":"@flyx : fyi, updated the sample. Any idea of how I can utilize the prance to achieve $ref s to be replaced with all the definitions."},{"owner":{"account_id":141151,"reputation":36461,"user_id":347964,"accept_rate":79,"display_name":"flyx"},"score":1,"creation_date":1609684211,"post_id":65549855,"comment_id":115893620,"body_markdown":"I don&#39;t know the tool but from the docs `prance compile my_file.yml output.yml` should do it","body":"I don&#39;t know the tool but from the docs <code>prance compile my_file.yml output.yml</code> should do it"},{"owner":{"account_id":10745626,"reputation":85,"user_id":7907058,"display_name":"pradrone"},"score":0,"creation_date":1609688053,"post_id":65549855,"comment_id":115894856,"body_markdown":"@flyx - thanks for posting, it looks like it might be helpful.","body":"@flyx - thanks for posting, it looks like it might be helpful."},{"owner":{"account_id":39252,"reputation":89842,"user_id":113116,"display_name":"Helen"},"score":0,"creation_date":1610478450,"post_id":65549855,"comment_id":116144934,"body_markdown":"Just curios - why do you need this? Most if not all OpenAPI tools (doc tools, codegens, etc.) can handle internal $refs just fine.","body":"Just curios - why do you need this? Most if not all OpenAPI tools (doc tools, codegens, etc.) can handle internal $refs just fine."}],"answers":[{"tags":[],"owner":{"account_id":39252,"reputation":89842,"user_id":113116,"display_name":"Helen"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1610481883,"creation_date":1610481883,"answer_id":65691276,"question_id":65549855,"body_markdown":"Here are some tools that can claim to be able dereference internal $refs in addition to external ones. Be aware of potential issues with circular $refs.\r\n\r\nCLI:\r\n\r\n* https://github.com/APIDevTools/swagger-cli\r\n\r\n  ```\r\n  swagger-cli bundle --dereference &lt;file&gt;\r\n  ```\r\n\r\n* [Redocly OpenAPI CLI](https://redoc.ly/docs/cli/commands/#how-to-make-a-fully-dereferenced-bundle)\r\n\r\n  ```\r\n  openapi bundle --dereferenced --output &lt;outputName&gt; --ext &lt;ext&gt; [entrypoints...]\r\n  ```\r\n\r\nLibraries:\r\n* Java: [Swagger Parser](https://github.com/swagger-api/swagger-parser) with the [`resolvefully`](https://github.com/swagger-api/swagger-parser#2-resolvefully) option\r\n* Node.js: [oas-resolver](https://github.com/Mermade/oas-kit/tree/master/packages/oas-resolver) with the [`resolveInternal`](https://github.com/Mermade/oas-kit/blob/master/docs/options.md) option","title":"OpenAPI Specification (YML/YAML) : All $refs replace or expand to its definition (with schema validation)","body":"<p>Here are some tools that can claim to be able dereference internal $refs in addition to external ones. Be aware of potential issues with circular $refs.</p>\n<p>CLI:</p>\n<ul>\n<li><p><a href=\"https://github.com/APIDevTools/swagger-cli\" rel=\"noreferrer\">https://github.com/APIDevTools/swagger-cli</a></p>\n<pre><code>swagger-cli bundle --dereference &lt;file&gt;\n</code></pre>\n</li>\n<li><p><a href=\"https://redoc.ly/docs/cli/commands/#how-to-make-a-fully-dereferenced-bundle\" rel=\"noreferrer\">Redocly OpenAPI CLI</a></p>\n<pre><code>openapi bundle --dereferenced --output &lt;outputName&gt; --ext &lt;ext&gt; [entrypoints...]\n</code></pre>\n</li>\n</ul>\n<p>Libraries:</p>\n<ul>\n<li>Java: <a href=\"https://github.com/swagger-api/swagger-parser\" rel=\"noreferrer\">Swagger Parser</a> with the <a href=\"https://github.com/swagger-api/swagger-parser#2-resolvefully\" rel=\"noreferrer\"><code>resolvefully</code></a> option</li>\n<li>Node.js: <a href=\"https://github.com/Mermade/oas-kit/tree/master/packages/oas-resolver\" rel=\"noreferrer\">oas-resolver</a> with the <a href=\"https://github.com/Mermade/oas-kit/blob/master/docs/options.md\" rel=\"noreferrer\"><code>resolveInternal</code></a> option</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":17990640,"reputation":339,"user_id":13074810,"display_name":"FiveOFive"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691562761,"creation_date":1691562761,"answer_id":76865137,"question_id":65549855,"body_markdown":"This can be done with the OpenAPI/Swagger editor at https://editor-next.swagger.io/. Load the definition file then select &quot;File&quot; -&gt; &quot;Download Resolved YAML&quot;","title":"OpenAPI Specification (YML/YAML) : All $refs replace or expand to its definition (with schema validation)","body":"<p>This can be done with the OpenAPI/Swagger editor at <a href=\"https://editor-next.swagger.io/\" rel=\"nofollow noreferrer\">https://editor-next.swagger.io/</a>. Load the definition file then select &quot;File&quot; -&gt; &quot;Download Resolved YAML&quot;</p>\n"}],"owner":{"account_id":10745626,"reputation":85,"user_id":7907058,"display_name":"pradrone"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3973,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":65691276,"answer_count":2,"score":7,"last_activity_date":1691562761,"creation_date":1609676982,"question_id":65549855,"body_markdown":"I am looking for some solution or maybe some script that can help me to replace($ref) or expand its definitions within the YML file with schema validation. (For detail please find below example)\r\n\r\n**Example: Input with $ref **\r\n\r\n      /pets/{petId}:\r\n        get:\r\n          summary: Info for a specific pet\r\n          operationId: showPetById\r\n          tags:\r\n            - pets\r\n          parameters:\r\n            - name: petId\r\n              in: path\r\n              required: true\r\n              description: The id of the pet to retrieve\r\n              schema:\r\n                type: string\r\n          responses:\r\n            &#39;200&#39;:\r\n              description: Expected response to a valid request\r\n              content:\r\n                application/json:\r\n                  schema:\r\n                    $ref: &quot;#/components/schemas/Pet&quot;\r\n            default:\r\n              description: unexpected error\r\n              content:\r\n                application/json:\r\n                  schema:\r\n                    $ref: &quot;#/components/schemas/Error&quot;\r\n    components:\r\n      schemas:\r\n        Pet:\r\n          type: object\r\n          required:\r\n            - id\r\n            - name\r\n          properties:\r\n            id:\r\n              type: integer\r\n              format: int64\r\n            name:\r\n              type: string\r\n            tag:\r\n              type: string\r\n        Pets:\r\n          type: array\r\n          items:\r\n            $ref: &quot;#/components/schemas/Pet&quot;\r\n        Error:\r\n          type: object\r\n          required:\r\n            - code\r\n            - message\r\n          properties:\r\n            code:\r\n              type: integer\r\n              format: int32\r\n            message:\r\n              type: string\r\n\r\n\r\n**Output: All $ref replace or expanded to its definition (with schema validation)**\r\n\r\n      /pets/{petId}:\r\n        get:\r\n          summary: Info for a specific pet\r\n          operationId: showPetById\r\n          tags:\r\n            - pets\r\n          parameters:\r\n            - name: petId\r\n              in: path\r\n              required: true\r\n              description: The id of the pet to retrieve\r\n              schema:\r\n                type: string\r\n          responses:\r\n            &#39;200&#39;:\r\n              description: Expected response to a valid request\r\n              content:\r\n                application/json:\r\n                  schema:\r\n                    type: object\r\n                    required:\r\n                      - id\r\n                      - name\r\n                    properties:\r\n                      id:\r\n                        type: integer\r\n                        format: int64\r\n                      name:\r\n                        type: string\r\n                      tag:\r\n                        type: string\r\n    \r\n            default:\r\n              description: unexpected error\r\n              content:\r\n                application/json:\r\n                  schema:\r\n                    type: object\r\n                    required:\r\n                      - code\r\n                      - message\r\n                    properties:\r\n                      code:\r\n                        type: integer\r\n                        format: int32\r\n                      message:\r\n                        type: string\r\n    components:\r\n      schemas:\r\n        Pet:\r\n          type: object\r\n          required:\r\n            - id\r\n            - name\r\n          properties:\r\n            id:\r\n              type: integer\r\n              format: int64\r\n            name:\r\n              type: string\r\n            tag:\r\n              type: string\r\n        Pets:\r\n          type: array\r\n          items:\r\n            type: object\r\n            required:\r\n              - id\r\n              - name\r\n            properties:\r\n              id:\r\n                type: integer\r\n                format: int64\r\n              name:\r\n                type: string\r\n              tag:\r\n                type: string\r\n    \r\n        Error:\r\n          type: object\r\n          required:\r\n            - code\r\n            - message\r\n          properties:\r\n            code:\r\n              type: integer\r\n              format: int32\r\n            message:\r\n              type: string\r\n\r\nCan you please suggest?","title":"OpenAPI Specification (YML/YAML) : All $refs replace or expand to its definition (with schema validation)","body":"<p>I am looking for some solution or maybe some script that can help me to replace($ref) or expand its definitions within the YML file with schema validation. (For detail please find below example)</p>\n<p>**Example: Input with $ref **</p>\n<pre><code>  /pets/{petId}:\n    get:\n      summary: Info for a specific pet\n      operationId: showPetById\n      tags:\n        - pets\n      parameters:\n        - name: petId\n          in: path\n          required: true\n          description: The id of the pet to retrieve\n          schema:\n            type: string\n      responses:\n        '200':\n          description: Expected response to a valid request\n          content:\n            application/json:\n              schema:\n                $ref: &quot;#/components/schemas/Pet&quot;\n        default:\n          description: unexpected error\n          content:\n            application/json:\n              schema:\n                $ref: &quot;#/components/schemas/Error&quot;\ncomponents:\n  schemas:\n    Pet:\n      type: object\n      required:\n        - id\n        - name\n      properties:\n        id:\n          type: integer\n          format: int64\n        name:\n          type: string\n        tag:\n          type: string\n    Pets:\n      type: array\n      items:\n        $ref: &quot;#/components/schemas/Pet&quot;\n    Error:\n      type: object\n      required:\n        - code\n        - message\n      properties:\n        code:\n          type: integer\n          format: int32\n        message:\n          type: string\n</code></pre>\n<p><strong>Output: All $ref replace or expanded to its definition (with schema validation)</strong></p>\n<pre><code>  /pets/{petId}:\n    get:\n      summary: Info for a specific pet\n      operationId: showPetById\n      tags:\n        - pets\n      parameters:\n        - name: petId\n          in: path\n          required: true\n          description: The id of the pet to retrieve\n          schema:\n            type: string\n      responses:\n        '200':\n          description: Expected response to a valid request\n          content:\n            application/json:\n              schema:\n                type: object\n                required:\n                  - id\n                  - name\n                properties:\n                  id:\n                    type: integer\n                    format: int64\n                  name:\n                    type: string\n                  tag:\n                    type: string\n\n        default:\n          description: unexpected error\n          content:\n            application/json:\n              schema:\n                type: object\n                required:\n                  - code\n                  - message\n                properties:\n                  code:\n                    type: integer\n                    format: int32\n                  message:\n                    type: string\ncomponents:\n  schemas:\n    Pet:\n      type: object\n      required:\n        - id\n        - name\n      properties:\n        id:\n          type: integer\n          format: int64\n        name:\n          type: string\n        tag:\n          type: string\n    Pets:\n      type: array\n      items:\n        type: object\n        required:\n          - id\n          - name\n        properties:\n          id:\n            type: integer\n            format: int64\n          name:\n            type: string\n          tag:\n            type: string\n\n    Error:\n      type: object\n      required:\n        - code\n        - message\n      properties:\n        code:\n          type: integer\n          format: int32\n        message:\n          type: string\n</code></pre>\n<p>Can you please suggest?</p>\n"},{"tags":["java","backtracking"],"comments":[{"owner":{"account_id":1378972,"reputation":25142,"user_id":1312382,"display_name":"Aconcagua"},"score":0,"creation_date":1691139803,"post_id":76834423,"comment_id":135454401,"body_markdown":"You should keep an eye of proper formatting (especially indentation, but also a consistent indentation *style*, you are intermixing Java conventions and Allman style) in your code, as is it is pretty hard to read.","body":"You should keep an eye of proper formatting (especially indentation, but also a consistent indentation <i>style</i>, you are intermixing Java conventions and Allman style) in your code, as is it is pretty hard to read."},{"owner":{"account_id":1378972,"reputation":25142,"user_id":1312382,"display_name":"Aconcagua"},"score":0,"creation_date":1691140260,"post_id":76834423,"comment_id":135454482,"body_markdown":"[This question](https://stackoverflow.com/questions/11483060/stdnext-permutation-implementation-explanation) might be pretty interesting for you – yes, it is C++, but you might still be able to read it. `std::next_permutation` does pretty much what you need here, you might adapt the algorithm and run it within a loop (instead of recursing).","body":"<a href=\"https://stackoverflow.com/questions/11483060/stdnext-permutation-implementation-explanation\">This question</a> might be pretty interesting for you – yes, it is C++, but you might still be able to read it. <code>std::next_permutation</code> does pretty much what you need here, you might adapt the algorithm and run it within a loop (instead of recursing)."}],"answers":[{"tags":[],"owner":{"account_id":11953460,"reputation":61,"user_id":8746481,"display_name":"Debby Sinkalu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691140118,"creation_date":1691140118,"answer_id":76834477,"question_id":76834423,"body_markdown":"The issue in your code lies in the way you are backtracking and manipulating the nums list while iterating through it. When you&#39;re removing an element from the nums list during the iteration, it affects the indices of the remaining elements, leading to incorrect results.\r\n\r\nHere&#39;s the corrected version of your code:\r\n\r\n    import java.util.*;\r\n    \r\n    public class ArrayPermutations {\r\n        public static void helper(List&lt;List&lt;Integer&gt;&gt; result, List&lt;Integer&gt; permute, List&lt;Integer&gt; nums) {\r\n            if (nums.size() == 0) {\r\n                result.add(new ArrayList&lt;&gt;(permute));\r\n                return;\r\n            }\r\n    \r\n            for (int i = 0; i &lt; nums.size(); i++) {\r\n                int currInt = nums.get(i);\r\n                permute.add(currInt);\r\n                nums.remove(i);\r\n                helper(result, permute, nums);\r\n                nums.add(i, currInt);\r\n                permute.remove(permute.size() - 1);\r\n            }\r\n        }\r\n    \r\n        public static List&lt;List&lt;Integer&gt;&gt; permute(int[] num) {\r\n            List&lt;Integer&gt; nums = new ArrayList&lt;&gt;();\r\n            for (int i : num) {\r\n                nums.add(i);\r\n            }\r\n            List&lt;List&lt;Integer&gt;&gt; result = new ArrayList&lt;&gt;();\r\n            List&lt;Integer&gt; permute = new ArrayList&lt;&gt;();\r\n            helper(result, permute, nums);\r\n            return result;\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            int[] num = {1, 2, 3};\r\n            List&lt;List&lt;Integer&gt;&gt; result = permute(num);\r\n            System.out.println(result);\r\n        }\r\n    }\r\n\r\n","title":"can someone tell me what is wrong with the code . It is not printing all the permutations of the array","body":"<p>The issue in your code lies in the way you are backtracking and manipulating the nums list while iterating through it. When you're removing an element from the nums list during the iteration, it affects the indices of the remaining elements, leading to incorrect results.</p>\n<p>Here's the corrected version of your code:</p>\n<pre><code>import java.util.*;\n\npublic class ArrayPermutations {\n    public static void helper(List&lt;List&lt;Integer&gt;&gt; result, List&lt;Integer&gt; permute, List&lt;Integer&gt; nums) {\n        if (nums.size() == 0) {\n            result.add(new ArrayList&lt;&gt;(permute));\n            return;\n        }\n\n        for (int i = 0; i &lt; nums.size(); i++) {\n            int currInt = nums.get(i);\n            permute.add(currInt);\n            nums.remove(i);\n            helper(result, permute, nums);\n            nums.add(i, currInt);\n            permute.remove(permute.size() - 1);\n        }\n    }\n\n    public static List&lt;List&lt;Integer&gt;&gt; permute(int[] num) {\n        List&lt;Integer&gt; nums = new ArrayList&lt;&gt;();\n        for (int i : num) {\n            nums.add(i);\n        }\n        List&lt;List&lt;Integer&gt;&gt; result = new ArrayList&lt;&gt;();\n        List&lt;Integer&gt; permute = new ArrayList&lt;&gt;();\n        helper(result, permute, nums);\n        return result;\n    }\n\n    public static void main(String[] args) {\n        int[] num = {1, 2, 3};\n        List&lt;List&lt;Integer&gt;&gt; result = permute(num);\n        System.out.println(result);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7708573,"reputation":685,"user_id":5838755,"display_name":"Taron Qalashyan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691140126,"creation_date":1691140126,"answer_id":76834479,"question_id":76834423,"body_markdown":"Try this\r\n\r\n    import java.util.*;\r\n    public class ArrayPermutations {\r\n        public static void helper(List&lt;List&lt;Integer&gt;&gt; result, List&lt;Integer&gt; current, List&lt;Integer&gt; nums) {\r\n            if (nums.size() == 0) {\r\n                result.add(new ArrayList&lt;&gt;(current));\r\n                return;\r\n            }\r\n    \r\n            for (int i = 0; i &lt; nums.size(); i++) {\r\n                int currInt = nums.get(i);\r\n                nums.remove(i);\r\n                current.add(currInt);\r\n    \r\n                helper(result, current, nums);\r\n    \r\n                current.remove(current.size() - 1);  // Backtrack: remove the last added element\r\n                nums.add(i, currInt);  // Backtrack: restore the removed element at its original position\r\n            }\r\n        }\r\n    \r\n        public static List&lt;List&lt;Integer&gt;&gt; permute(int num[]) {\r\n            List&lt;Integer&gt; nums = new ArrayList&lt;&gt;();\r\n            for (int i : num) {\r\n                nums.add(i);\r\n            }\r\n            List&lt;List&lt;Integer&gt;&gt; result = new ArrayList&lt;&gt;();\r\n            List&lt;Integer&gt; current = new ArrayList&lt;&gt;();\r\n            helper(result, current, nums);\r\n            return result;\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            int num[] = {1, 2, 3};\r\n            List&lt;List&lt;Integer&gt;&gt; result = permute(num);\r\n            System.out.println(result);\r\n        }\r\n    }\r\n\r\n\r\n\r\n","title":"can someone tell me what is wrong with the code . It is not printing all the permutations of the array","body":"<p>Try this</p>\n<pre><code>import java.util.*;\npublic class ArrayPermutations {\n    public static void helper(List&lt;List&lt;Integer&gt;&gt; result, List&lt;Integer&gt; current, List&lt;Integer&gt; nums) {\n        if (nums.size() == 0) {\n            result.add(new ArrayList&lt;&gt;(current));\n            return;\n        }\n\n        for (int i = 0; i &lt; nums.size(); i++) {\n            int currInt = nums.get(i);\n            nums.remove(i);\n            current.add(currInt);\n\n            helper(result, current, nums);\n\n            current.remove(current.size() - 1);  // Backtrack: remove the last added element\n            nums.add(i, currInt);  // Backtrack: restore the removed element at its original position\n        }\n    }\n\n    public static List&lt;List&lt;Integer&gt;&gt; permute(int num[]) {\n        List&lt;Integer&gt; nums = new ArrayList&lt;&gt;();\n        for (int i : num) {\n            nums.add(i);\n        }\n        List&lt;List&lt;Integer&gt;&gt; result = new ArrayList&lt;&gt;();\n        List&lt;Integer&gt; current = new ArrayList&lt;&gt;();\n        helper(result, current, nums);\n        return result;\n    }\n\n    public static void main(String[] args) {\n        int num[] = {1, 2, 3};\n        List&lt;List&lt;Integer&gt;&gt; result = permute(num);\n        System.out.println(result);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28641985,"reputation":1,"user_id":21930906,"display_name":"Amal Rajesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691554231,"creation_date":1691140259,"answer_id":76834496,"question_id":76834423,"body_markdown":"```java\r\nfor (int i = 0; i &lt; nums.size(); i++) {\r\n    int currInt = nums.get(i);\r\n    nums.remove(i);\r\n    permute.add(currInt);\r\n    helper(array, permute, nums);\r\n    permute.remove(permute.size() - 1); \r\n    nums.add(i, currInt); \r\n}\r\n```\r\nPlease modify your `for` loop and this might help to solve the problem.\r\n","title":"can someone tell me what is wrong with the code . It is not printing all the permutations of the array","body":"<pre class=\"lang-java prettyprint-override\"><code>for (int i = 0; i &lt; nums.size(); i++) {\n    int currInt = nums.get(i);\n    nums.remove(i);\n    permute.add(currInt);\n    helper(array, permute, nums);\n    permute.remove(permute.size() - 1); \n    nums.add(i, currInt); \n}\n</code></pre>\n<p>Please modify your <code>for</code> loop and this might help to solve the problem.</p>\n"},{"tags":[],"owner":{"account_id":8653469,"reputation":72,"user_id":6478449,"display_name":"Ranjan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691562164,"creation_date":1691558122,"answer_id":76864770,"question_id":76834423,"body_markdown":"Here my method calculation,\r\n\r\n```\r\npackage com.example.demo;\r\nimport java.util.*;\r\n\r\npublic class Test {\r\n\r\n\tpublic static List&lt;List&lt;Integer&gt;&gt; permute(int num[]){\r\n\t\tList&lt;Integer&gt; nums = new ArrayList&lt;&gt;();\r\n\t\tfor (int i : num) {\r\n\t\t\tnums.add(i);\r\n\t\t}\r\n\t\tList&lt;List&lt;Integer&gt;&gt; Array = new ArrayList&lt;&gt;();\r\n\t\tint maxPermutations = factorial(nums.size());\r\n\t\twhile(maxPermutations&gt;Array.size() ) {\r\n\t\t\t List&lt;Integer&gt; permute = new ArrayList&lt;&gt;(nums); \r\n\t            Collections.shuffle(permute);\r\n\t            if (!Array.contains(permute)) {\r\n\t            \tArray.add(permute);\r\n\t            }\r\n\t\t}\r\n\t\treturn Array;\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tint num[] = {1,2,3};   \r\n\t\tList&lt;List&lt;Integer&gt;&gt; Array = permute(num);\r\n\t\tSystem.out.println(&quot;Final arr:&quot;+Array);\r\n\t}\r\n\r\n\tprivate static int factorial(int n) {\r\n\t\tif (n == 0 || n == 1) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\treturn n * factorial(n - 1);\r\n\t}\r\n\r\n}\r\n```","title":"can someone tell me what is wrong with the code . It is not printing all the permutations of the array","body":"<p>Here my method calculation,</p>\n<pre><code>package com.example.demo;\nimport java.util.*;\n\npublic class Test {\n\n    public static List&lt;List&lt;Integer&gt;&gt; permute(int num[]){\n        List&lt;Integer&gt; nums = new ArrayList&lt;&gt;();\n        for (int i : num) {\n            nums.add(i);\n        }\n        List&lt;List&lt;Integer&gt;&gt; Array = new ArrayList&lt;&gt;();\n        int maxPermutations = factorial(nums.size());\n        while(maxPermutations&gt;Array.size() ) {\n             List&lt;Integer&gt; permute = new ArrayList&lt;&gt;(nums); \n                Collections.shuffle(permute);\n                if (!Array.contains(permute)) {\n                    Array.add(permute);\n                }\n        }\n        return Array;\n    }\n\n    public static void main(String[] args) {\n        int num[] = {1,2,3};   \n        List&lt;List&lt;Integer&gt;&gt; Array = permute(num);\n        System.out.println(&quot;Final arr:&quot;+Array);\n    }\n\n    private static int factorial(int n) {\n        if (n == 0 || n == 1) {\n            return 1;\n        }\n        return n * factorial(n - 1);\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":29158517,"reputation":3,"user_id":22337761,"display_name":"retam biswas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76834479,"answer_count":4,"score":0,"last_activity_date":1691562164,"creation_date":1691139584,"question_id":76834423,"body_markdown":"it is a common problem of backtracking.Here we have to print the possible permutations of an array of numbers.\r\nThe code written by me:\r\n\r\n```java\r\nimport java.util.*;\r\n\r\npublic class Arraypermutations {\r\n    public static void helper(List&lt;List&lt;Integer&gt;&gt; Array, List&lt;Integer&gt; permute, boolean done, List&lt;Integer&gt; nums){\r\n         \r\n        if (nums.size() == 0) {\r\n            Array.add(new ArrayList&lt;&gt;(permute));\r\n            return;\r\n        }\r\n\r\n        for(int i = 0; i &lt; nums.size(); i++) {\r\n            int currInt = nums.get(i);\r\n            nums.remove(i);\r\n            helper(Array, permute, permute.add(currInt), nums);\r\n        }\r\n    }\r\n\r\n    public static List&lt;List&lt;Integer&gt;&gt; permute(int num[]){\r\n        List&lt;Integer&gt; nums = new ArrayList&lt;&gt;();\r\n\r\n        for (int i : num) {\r\n            nums.add(i);\r\n        }\r\n\r\n        List&lt;List&lt;Integer&gt;&gt; Array = new ArrayList&lt;&gt;();\r\n        List&lt;Integer&gt; permute = new ArrayList&lt;&gt;();\r\n        boolean done = false;\r\n        helper(Array, permute, done, nums);\r\n        return Array;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        int num[] = {1,2,3};   \r\n        List&lt;List&lt;Integer&gt;&gt; Array = permute(num);\r\n        System.out.println(Array);\r\n    }\r\n\r\n}\r\n```\r\n\r\nthis would be expected answer of the code.\r\n[[1, 2, 3], [1, 3, 2], [2, 1, 3], [2, 3, 1], [3, 1, 2], [3, 2, 1]]\r\nBut my code is giving only \r\n[[1,2,3]];\r\nas the answer.\r\nproblem lies somewhere in the backtrcking of the code.\r\nBut i dont understand it well;\r\nplease help!","title":"can someone tell me what is wrong with the code . It is not printing all the permutations of the array","body":"<p>it is a common problem of backtracking.Here we have to print the possible permutations of an array of numbers.\nThe code written by me:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*;\n\npublic class Arraypermutations {\n    public static void helper(List&lt;List&lt;Integer&gt;&gt; Array, List&lt;Integer&gt; permute, boolean done, List&lt;Integer&gt; nums){\n         \n        if (nums.size() == 0) {\n            Array.add(new ArrayList&lt;&gt;(permute));\n            return;\n        }\n\n        for(int i = 0; i &lt; nums.size(); i++) {\n            int currInt = nums.get(i);\n            nums.remove(i);\n            helper(Array, permute, permute.add(currInt), nums);\n        }\n    }\n\n    public static List&lt;List&lt;Integer&gt;&gt; permute(int num[]){\n        List&lt;Integer&gt; nums = new ArrayList&lt;&gt;();\n\n        for (int i : num) {\n            nums.add(i);\n        }\n\n        List&lt;List&lt;Integer&gt;&gt; Array = new ArrayList&lt;&gt;();\n        List&lt;Integer&gt; permute = new ArrayList&lt;&gt;();\n        boolean done = false;\n        helper(Array, permute, done, nums);\n        return Array;\n    }\n\n    public static void main(String[] args) {\n        int num[] = {1,2,3};   \n        List&lt;List&lt;Integer&gt;&gt; Array = permute(num);\n        System.out.println(Array);\n    }\n\n}\n</code></pre>\n<p>this would be expected answer of the code.\n[[1, 2, 3], [1, 3, 2], [2, 1, 3], [2, 3, 1], [3, 1, 2], [3, 2, 1]]\nBut my code is giving only\n[[1,2,3]];\nas the answer.\nproblem lies somewhere in the backtrcking of the code.\nBut i dont understand it well;\nplease help!</p>\n"},{"tags":["java","spring-boot","vaadin"],"comments":[{"owner":{"account_id":3837378,"reputation":35488,"user_id":3181392,"display_name":"cfrick"},"score":1,"creation_date":1691506953,"post_id":76860124,"comment_id":135499408,"body_markdown":"Typo in your magic-strings: `IdCliente` vs `idCliente`.  Use constants or suffer the consequences likes this...","body":"Typo in your magic-strings: <code>IdCliente</code> vs <code>idCliente</code>.  Use constants or suffer the consequences likes this..."},{"owner":{"account_id":4107094,"reputation":350,"user_id":3370777,"display_name":"James"},"score":0,"creation_date":1691564038,"post_id":76860124,"comment_id":135506912,"body_markdown":"@cfrick how would you made a constant in that code?","body":"@cfrick how would you made a constant in that code?"},{"owner":{"account_id":3837378,"reputation":35488,"user_id":3181392,"display_name":"cfrick"},"score":0,"creation_date":1691571254,"post_id":76860124,"comment_id":135508281,"body_markdown":"`public static final String SESSION_KEY_ID_CLIENTE = &quot;idCliente&quot;`","body":"<code>public static final String SESSION_KEY_ID_CLIENTE = &quot;idCliente&quot;</code>"}],"answers":[{"comments":[{"owner":{"account_id":4107094,"reputation":350,"user_id":3370777,"display_name":"James"},"score":0,"creation_date":1691563928,"post_id":76865006,"comment_id":135506899,"body_markdown":"sometimes i suck and can be very very dumb thank you Leif plus how would you make constants here?","body":"sometimes i suck and can be very very dumb thank you Leif plus how would you make constants here?"}],"tags":[],"owner":{"account_id":2759852,"reputation":7920,"user_id":2376954,"display_name":"Leif &#197;strand"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691561394,"creation_date":1691561394,"answer_id":76865006,"question_id":76860124,"body_markdown":"As pointed out in a comment, the problem here has nothing to do with `VaadinSession`.\r\n\r\nInstead, the problem is that one part of the code uses `&quot;IdCliente&quot;` as the session attribute name and another part of the code uses `&quot;idCliente&quot;`. It&#39;s recommended to use a constant for magic string values like this to avoid these types of mistakes.","title":"Session Attribute issue Vaadin 24","body":"<p>As pointed out in a comment, the problem here has nothing to do with <code>VaadinSession</code>.</p>\n<p>Instead, the problem is that one part of the code uses <code>&quot;IdCliente&quot;</code> as the session attribute name and another part of the code uses <code>&quot;idCliente&quot;</code>. It's recommended to use a constant for magic string values like this to avoid these types of mistakes.</p>\n"}],"owner":{"account_id":4107094,"reputation":350,"user_id":3370777,"display_name":"James"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691572411,"accepted_answer_id":76865006,"answer_count":1,"score":0,"last_activity_date":1691561394,"creation_date":1691501967,"question_id":76860124,"body_markdown":"I have trouble understading how VaadinSessions and UI works.  \r\n\r\n\r\nI have my class that takes the id and other information of SampleClient and use it as a URL:\r\n```\r\n@Route(value = &quot;URL-of-page/:sampleClientID?&quot;, layout = MainLayout.class)\r\n@RolesAllowed(&quot;USER&quot;)\r\npublic class DocumentazioneEntita extends Div implements BeforeEnterObserver {\r\n    \r\n    @Override\r\n    public void beforeEnter(BeforeEnterEvent event) {\r\n        this.client = (SampleClient) VaadinSession.getCurrent().getAttribute(&quot;client&quot;);\r\n        System.out.println(&quot;client inside override &quot; + client);\r\n        if (this.client == null) {\r\n            Notification.show(&quot;No client selected&quot;, 3000, Notification.Position.BOTTOM_START);\r\n            navigateToMain(event);\r\n            return;\r\n        }\r\n        this.idClienteString = (String) VaadinSession.getCurrent().getAttribute(&quot;idCliente&quot;);\r\n        System.out.println(&quot;ID CLIENT STRING: &quot; + idClienteString);\r\n        Optional&lt;Long&gt; sampleClientId = event.getRouteParameters().get(SAMPLECLIENT_ID).map(Long::parseLong);\r\n        if (sampleClientId.isPresent()) {\r\n            Optional&lt;SampleClient&gt; sampleClientFromBackend = sampleClientService.get(sampleClientId.get());\r\n            if (sampleClientFromBackend.isPresent()) {\r\n                populateForm(sampleClientFromBackend.get());\r\n            } else {\r\n                Notification.show(\r\n                        String.format(&quot;Client not found, ID = %d&quot;, sampleClientId.get()),\r\n                        3000, Notification.Position.BOTTOM_START);\r\n                navigateToMain(event);\r\n                return;\r\n            }\r\n            refreshGridData();\r\n        } \r\n    }\r\n    private Long idCliente = (Long) VaadinSession.getCurrent().getAttribute(&quot;IdCliente&quot;);\r\n  \r\n    \r\n    private SampleCoursesService sampleCoursesService;\r\n    private SampleContactsService sampleContactsService;\r\n    private SampleClientService sampleClientService;\r\n    private SampleContacts contact;\r\n    private SampleClient client;\r\n    \r\n    private String SAMPLECLIENT_ID = &quot;sampleClientID&quot;;\r\n\r\n\r\n    private Checkbox showArchivedCheckbox; // Define showArchivedCheckbox as a field\r\n    private Grid&lt;SampleContacts&gt; dispositiviTable = new Grid&lt;&gt;(SampleContacts.class);; // Define dispositiviTable as a field\r\n    private List&lt;SampleContacts&gt; contactsList; // Define contactsList as a field\r\n\r\n    private Binder&lt;SampleClient&gt; binder = new Binder&lt;&gt;(SampleClient.class);\r\n\r\n    private GenerateReport generateReport;\r\n    public String idClienteString;\r\n    \r\n\r\n        public DocumentazioneEntita(SampleCoursesService sampleCoursesService, \r\n                                    SampleContactsService sampleContactsService, \r\n                                    SampleClientService sampleClientService, GenerateReport generateReport) {\r\n            this.sampleCoursesService = sampleCoursesService;\r\n            this.sampleContactsService = sampleContactsService;\r\n            this.sampleClientService = sampleClientService;\r\n            this.generateReport = generateReport;\r\n            \r\n            setId(&quot;documentazione-entita-view&quot;);\r\n            setSizeFull();\r\n            System.out.println(&quot;ID CLIENTE: &quot; + idCliente); \r\n            System.out.println(&quot;ID CLIENTE STRING: sotto autowired &quot; + idClienteString);\r\n\r\n```\r\nTo better understand the situation i started debugging printing in the console the data i have.\r\nTthis is the output of my terminal:\r\n\r\n``` \r\nID CLIENTE: 1\r\nID CLIENTE STRING: sotto autowired null\r\n\r\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA SampleClient [capCliente=null, cfCliente=XYZ789, descrizioneCliente=null, emailCliente=bellali@it.it, idCliente=37, indirizzoCliente=789 Main St, insolvente=false, localitaCliente=New York, nomeCliente=John Smith, noteCliente=null, provinciaCliente=null, pivaCliente=1.23456789E8, sdiCliente=SDI123, telefonoCliente=1234567890]       \r\nID CLIENTE STRING: 37\r\n```\r\n\r\n\r\nSo inside the ```  @Override ```i have my data outside of it i do not. why is the reason for that?  \r\nI wanted to be able to use the data of my SampleClient in my page freely but i can&#39;t figure it out why it just stays inside the before enter class.\r\n\r\nIs worth noticing that in the previous page i got all the necessary information through Vaadin UI:\r\n\r\n``` \r\n   private void navigateToEntityDocumentation(SampleClient client) {\r\n        System.out.println(&quot;go to: &quot; + client);\r\n        if (client != null) {\r\n            Long idCliente = client.getIdCliente();\r\n            \r\n            if (idCliente != null) {\r\n                \r\n                String idClienteString = idCliente.toString();\r\n                UI.getCurrent().navigate(&quot;documentazione-entita/&quot; + idClienteString);\r\n                UI.getCurrent().getSession().setAttribute(&quot;idCliente&quot;, idClienteString);\r\n                UI.getCurrent().getSession().setAttribute(&quot;client&quot;, client); \r\n            } else {\r\n                // Log that idCliente is null\r\n                System.out.println(&quot;Cliente not found &quot; + client);\r\n                UI.getCurrent().navigate(&quot;#&quot;);\r\n            }\r\n        } else {\r\n            // Log that client is null\r\n            System.out.println(&quot;Client does not exists&quot;);\r\n            UI.getCurrent().navigate(&quot;#&quot;);\r\n        }\r\n    }\r\n```\r\n\r\n\r\nThis is what my ```System.out.println(&quot;go to: &quot; + client);``` outputs in the terminal, as a proof that i have a data flow from page to page.\r\n\r\n``` \r\ngo to: SampleClient [capCliente=null, cfCliente=XYZ789, descrizioneCliente=null, emailCliente=bellali@it.it, idCliente=37, indirizzoCliente=789 Main St, insolvente=false, localitaCliente=New York, nomeCliente=John Smith, noteCliente=null, provinciaCliente=null, pivaCliente=1.23456789E8, sdiCliente=SDI123, telefonoCliente=1234567890]\r\n ```","title":"Session Attribute issue Vaadin 24","body":"<p>I have trouble understading how VaadinSessions and UI works.</p>\n<p>I have my class that takes the id and other information of SampleClient and use it as a URL:</p>\n<pre><code>@Route(value = &quot;URL-of-page/:sampleClientID?&quot;, layout = MainLayout.class)\n@RolesAllowed(&quot;USER&quot;)\npublic class DocumentazioneEntita extends Div implements BeforeEnterObserver {\n    \n    @Override\n    public void beforeEnter(BeforeEnterEvent event) {\n        this.client = (SampleClient) VaadinSession.getCurrent().getAttribute(&quot;client&quot;);\n        System.out.println(&quot;client inside override &quot; + client);\n        if (this.client == null) {\n            Notification.show(&quot;No client selected&quot;, 3000, Notification.Position.BOTTOM_START);\n            navigateToMain(event);\n            return;\n        }\n        this.idClienteString = (String) VaadinSession.getCurrent().getAttribute(&quot;idCliente&quot;);\n        System.out.println(&quot;ID CLIENT STRING: &quot; + idClienteString);\n        Optional&lt;Long&gt; sampleClientId = event.getRouteParameters().get(SAMPLECLIENT_ID).map(Long::parseLong);\n        if (sampleClientId.isPresent()) {\n            Optional&lt;SampleClient&gt; sampleClientFromBackend = sampleClientService.get(sampleClientId.get());\n            if (sampleClientFromBackend.isPresent()) {\n                populateForm(sampleClientFromBackend.get());\n            } else {\n                Notification.show(\n                        String.format(&quot;Client not found, ID = %d&quot;, sampleClientId.get()),\n                        3000, Notification.Position.BOTTOM_START);\n                navigateToMain(event);\n                return;\n            }\n            refreshGridData();\n        } \n    }\n    private Long idCliente = (Long) VaadinSession.getCurrent().getAttribute(&quot;IdCliente&quot;);\n  \n    \n    private SampleCoursesService sampleCoursesService;\n    private SampleContactsService sampleContactsService;\n    private SampleClientService sampleClientService;\n    private SampleContacts contact;\n    private SampleClient client;\n    \n    private String SAMPLECLIENT_ID = &quot;sampleClientID&quot;;\n\n\n    private Checkbox showArchivedCheckbox; // Define showArchivedCheckbox as a field\n    private Grid&lt;SampleContacts&gt; dispositiviTable = new Grid&lt;&gt;(SampleContacts.class);; // Define dispositiviTable as a field\n    private List&lt;SampleContacts&gt; contactsList; // Define contactsList as a field\n\n    private Binder&lt;SampleClient&gt; binder = new Binder&lt;&gt;(SampleClient.class);\n\n    private GenerateReport generateReport;\n    public String idClienteString;\n    \n\n        public DocumentazioneEntita(SampleCoursesService sampleCoursesService, \n                                    SampleContactsService sampleContactsService, \n                                    SampleClientService sampleClientService, GenerateReport generateReport) {\n            this.sampleCoursesService = sampleCoursesService;\n            this.sampleContactsService = sampleContactsService;\n            this.sampleClientService = sampleClientService;\n            this.generateReport = generateReport;\n            \n            setId(&quot;documentazione-entita-view&quot;);\n            setSizeFull();\n            System.out.println(&quot;ID CLIENTE: &quot; + idCliente); \n            System.out.println(&quot;ID CLIENTE STRING: sotto autowired &quot; + idClienteString);\n\n</code></pre>\n<p>To better understand the situation i started debugging printing in the console the data i have.\nTthis is the output of my terminal:</p>\n<pre><code>ID CLIENTE: 1\nID CLIENTE STRING: sotto autowired null\n\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA SampleClient [capCliente=null, cfCliente=XYZ789, descrizioneCliente=null, emailCliente=bellali@it.it, idCliente=37, indirizzoCliente=789 Main St, insolvente=false, localitaCliente=New York, nomeCliente=John Smith, noteCliente=null, provinciaCliente=null, pivaCliente=1.23456789E8, sdiCliente=SDI123, telefonoCliente=1234567890]       \nID CLIENTE STRING: 37\n</code></pre>\n<p>So inside the <code> @Override</code>i have my data outside of it i do not. why is the reason for that?<br />\nI wanted to be able to use the data of my SampleClient in my page freely but i can't figure it out why it just stays inside the before enter class.</p>\n<p>Is worth noticing that in the previous page i got all the necessary information through Vaadin UI:</p>\n<pre><code>   private void navigateToEntityDocumentation(SampleClient client) {\n        System.out.println(&quot;go to: &quot; + client);\n        if (client != null) {\n            Long idCliente = client.getIdCliente();\n            \n            if (idCliente != null) {\n                \n                String idClienteString = idCliente.toString();\n                UI.getCurrent().navigate(&quot;documentazione-entita/&quot; + idClienteString);\n                UI.getCurrent().getSession().setAttribute(&quot;idCliente&quot;, idClienteString);\n                UI.getCurrent().getSession().setAttribute(&quot;client&quot;, client); \n            } else {\n                // Log that idCliente is null\n                System.out.println(&quot;Cliente not found &quot; + client);\n                UI.getCurrent().navigate(&quot;#&quot;);\n            }\n        } else {\n            // Log that client is null\n            System.out.println(&quot;Client does not exists&quot;);\n            UI.getCurrent().navigate(&quot;#&quot;);\n        }\n    }\n</code></pre>\n<p>This is what my <code>System.out.println(&quot;go to: &quot; + client);</code> outputs in the terminal, as a proof that i have a data flow from page to page.</p>\n<pre><code>go to: SampleClient [capCliente=null, cfCliente=XYZ789, descrizioneCliente=null, emailCliente=bellali@it.it, idCliente=37, indirizzoCliente=789 Main St, insolvente=false, localitaCliente=New York, nomeCliente=John Smith, noteCliente=null, provinciaCliente=null, pivaCliente=1.23456789E8, sdiCliente=SDI123, telefonoCliente=1234567890]\n</code></pre>\n"},{"tags":["java","json","jolt"],"answers":[{"comments":[{"owner":{"account_id":20206926,"reputation":25,"user_id":14821070,"display_name":"vlcheong"},"score":1,"creation_date":1691746818,"post_id":76864936,"comment_id":135536495,"body_markdown":"Hi @Barbaros, thanks for the solution and it works.","body":"Hi @Barbaros, thanks for the solution and it works."},{"owner":{"account_id":7712415,"reputation":60542,"user_id":5841306,"display_name":"Barbaros &#214;zhan"},"score":0,"creation_date":1691748962,"post_id":76864936,"comment_id":135536894,"body_markdown":"Hi @vlcheong nice to help, take care","body":"Hi @vlcheong nice to help, take care"}],"tags":[],"owner":{"account_id":7712415,"reputation":60542,"user_id":5841306,"display_name":"Barbaros &#214;zhan"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691560661,"creation_date":1691560661,"answer_id":76864936,"question_id":76864166,"body_markdown":"First of all the **shift** transformation is not needed. You can use an ***isNull*** function within a modify transformation such as\r\n\r\n```json\r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;modify-default-beta&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;lastName&quot;: [&quot;=isNull(@(1,&amp;))&quot;, &quot;[empty]&quot;]\r\n    }\r\n  }\r\n]\r\n```\r\nwhere \r\n\r\n - `@(1,&amp;)` represents the value of the current attribute, eg.\r\n   `&quot;lastName&quot;`(the *ampersand* stnds for the `lastName` literal)\r\n - if the function is able to run, then the value `null` returns directly,\r\n   otherwise the second argument `&quot;[empty]&quot;` returns","title":"Default JSON property if not exists using Jolt","body":"<p>First of all the <strong>shift</strong> transformation is not needed. You can use an <em><strong>isNull</strong></em> function within a modify transformation such as</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;modify-default-beta&quot;,\n    &quot;spec&quot;: {\n      &quot;lastName&quot;: [&quot;=isNull(@(1,&amp;))&quot;, &quot;[empty]&quot;]\n    }\n  }\n]\n</code></pre>\n<p>where</p>\n<ul>\n<li><code>@(1,&amp;)</code> represents the value of the current attribute, eg.\n<code>&quot;lastName&quot;</code>(the <em>ampersand</em> stnds for the <code>lastName</code> literal)</li>\n<li>if the function is able to run, then the value <code>null</code> returns directly,\notherwise the second argument <code>&quot;[empty]&quot;</code> returns</li>\n</ul>\n"}],"owner":{"account_id":20206926,"reputation":25,"user_id":14821070,"display_name":"vlcheong"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76864936,"answer_count":1,"score":1,"last_activity_date":1691560758,"creation_date":1691547400,"question_id":76864166,"body_markdown":"I want to set a default value only if the JSON property not exists. \r\n\r\nFor example, below is my **Jolt spec** :\r\n```json\r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;modify-default-beta&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;lastName&quot;: &quot;[empty]&quot;\r\n    }\r\n  },\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;firstName&quot;: &quot;firstName&quot;,\r\n      &quot;lastName&quot;: &quot;lastName&quot;\r\n    }\r\n  }\r\n]\r\n```\r\nWhen **input** is :\r\n```json\r\n{\r\n  &quot;firstName&quot;: &quot;John&quot;\r\n}\r\n```\r\nthe **output** is as expected :\r\n\r\n```json\r\n{\r\n  &quot;firstName&quot; : &quot;John&quot;,\r\n  &quot;lastName&quot; : &quot;[empty]&quot;\r\n}\r\n```\r\nOn the other hand when **input** is :\r\n\r\n```json\r\n{\r\n  &quot;firstName&quot;: &quot;John&quot;,\r\n  &quot;lastName&quot;: null\r\n}\r\n```\r\nI&#39;m expecting the output is same as the **input** :\r\n\r\n```json\r\n{\r\n  &quot;firstName&quot;: &quot;John&quot;,\r\n  &quot;lastName&quot;: null\r\n}\r\n```\r\nis there anyway to default only when property not exists regardless of it value. Thanks\r\n","title":"Default JSON property if not exists using Jolt","body":"<p>I want to set a default value only if the JSON property not exists.</p>\n<p>For example, below is my <strong>Jolt spec</strong> :</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;modify-default-beta&quot;,\n    &quot;spec&quot;: {\n      &quot;lastName&quot;: &quot;[empty]&quot;\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;firstName&quot;: &quot;firstName&quot;,\n      &quot;lastName&quot;: &quot;lastName&quot;\n    }\n  }\n]\n</code></pre>\n<p>When <strong>input</strong> is :</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;firstName&quot;: &quot;John&quot;\n}\n</code></pre>\n<p>the <strong>output</strong> is as expected :</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;firstName&quot; : &quot;John&quot;,\n  &quot;lastName&quot; : &quot;[empty]&quot;\n}\n</code></pre>\n<p>On the other hand when <strong>input</strong> is :</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;firstName&quot;: &quot;John&quot;,\n  &quot;lastName&quot;: null\n}\n</code></pre>\n<p>I'm expecting the output is same as the <strong>input</strong> :</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;firstName&quot;: &quot;John&quot;,\n  &quot;lastName&quot;: null\n}\n</code></pre>\n<p>is there anyway to default only when property not exists regardless of it value. Thanks</p>\n"},{"tags":["java","spring-data-jpa","jpa","query-hints"],"answers":[{"tags":[],"owner":{"account_id":5744189,"reputation":766,"user_id":4535853,"accept_rate":60,"display_name":"Max"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621659591,"creation_date":1621659591,"answer_id":67646265,"question_id":67646264,"body_markdown":"No, it&#39;s not possible.\r\nYou can check your log and see the next warning when calling the method\r\n\r\n    o.h.q.internal.AbstractProducedQuery     : The javax.persistence.fetchgraph hint was set, but the value was not an EntityGraph!\r\n\r\nAnd in the AbstractProducedQuery class, the next code section shows, that only instances of `RootGraph` could be treated as EntityGraph. But our `@QueryHint` allow to pass only String as value.\r\n\r\n    else if ( HINT_FETCHGRAPH.equals( hintName ) || HINT_LOADGRAPH.equals( hintName ) ) {\r\n    \t\t\t\tif ( value instanceof RootGraph ) {\r\n    \t\t\t\t\tapplyGraph( (RootGraph) value, GraphSemantic.fromJpaHintName( hintName ) );\r\n    \t\t\t\t\tapplyEntityGraphQueryHint( new EntityGraphQueryHint( hintName, (RootGraphImpl) value ) );\r\n    \t\t\t\t}\r\n    \t\t\t\telse {\r\n    \t\t\t\t\tMSG_LOGGER.warnf( &quot;The %s hint was set, but the value was not an EntityGraph!&quot;, hintName );\r\n    \t\t\t\t}\r\n    \t\t\t\tapplied = true;\r\n    \t\t\t}\r\n","title":"Is it possible to specify fetchgraph/loadgraph in SpringDataJpa @QueryHint annotation","body":"<p>No, it's not possible.\nYou can check your log and see the next warning when calling the method</p>\n<pre><code>o.h.q.internal.AbstractProducedQuery     : The javax.persistence.fetchgraph hint was set, but the value was not an EntityGraph!\n</code></pre>\n<p>And in the AbstractProducedQuery class, the next code section shows, that only instances of <code>RootGraph</code> could be treated as EntityGraph. But our <code>@QueryHint</code> allow to pass only String as value.</p>\n<pre><code>else if ( HINT_FETCHGRAPH.equals( hintName ) || HINT_LOADGRAPH.equals( hintName ) ) {\n                if ( value instanceof RootGraph ) {\n                    applyGraph( (RootGraph) value, GraphSemantic.fromJpaHintName( hintName ) );\n                    applyEntityGraphQueryHint( new EntityGraphQueryHint( hintName, (RootGraphImpl) value ) );\n                }\n                else {\n                    MSG_LOGGER.warnf( &quot;The %s hint was set, but the value was not an EntityGraph!&quot;, hintName );\n                }\n                applied = true;\n            }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":87230,"reputation":36826,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691560691,"creation_date":1691560691,"answer_id":76864938,"question_id":67646264,"body_markdown":"You don&#39;t do it through `@QueryHint` you use the `@EntityGraph` annotation.\r\n\r\nFrom https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.entity-graph\r\n\r\n```\r\npublic interface GroupRepository extends CrudRepository&lt;GroupInfo, String&gt; {\r\n\r\n  @EntityGraph(value = &quot;GroupInfo.detail&quot;, type = EntityGraphType.LOAD)\r\n  GroupInfo getByGroupName(String name);\r\n\r\n}\r\n\r\n```","title":"Is it possible to specify fetchgraph/loadgraph in SpringDataJpa @QueryHint annotation","body":"<p>You don't do it through <code>@QueryHint</code> you use the <code>@EntityGraph</code> annotation.</p>\n<p>From <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.entity-graph\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.entity-graph</a></p>\n<pre><code>public interface GroupRepository extends CrudRepository&lt;GroupInfo, String&gt; {\n\n  @EntityGraph(value = &quot;GroupInfo.detail&quot;, type = EntityGraphType.LOAD)\n  GroupInfo getByGroupName(String name);\n\n}\n\n</code></pre>\n"}],"owner":{"account_id":5744189,"reputation":766,"user_id":4535853,"accept_rate":60,"display_name":"Max"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":463,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691560691,"creation_date":1621659591,"question_id":67646264,"body_markdown":"Is it possible somehow to specify the `javax.persistence.fetchgraph` or `javax.persistence.loadgraph` using @QueryHint in Spring Data Jpa?\r\n\r\nI have an entity graph\r\n\r\n    @Entity\r\n    @NamedEntityGraph(\r\n            name = &quot;shop_with_all_associations&quot;,\r\n            includeAllAttributes = true\r\n    )\r\n    public class Shop {    \r\n        @JoinColumn(name = &quot;shop_id&quot;)\r\n        @OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n        private List&lt;Member&gt; members = new ArrayList&lt;&gt;();\r\n    }\r\n\r\nAnd the corresponding method in the repository\r\n\r\n    @Repository\r\n    public interface ShopRepository extends JpaRepository&lt;Shop, Integer&gt; {\r\n        @QueryHints({@QueryHint(name = &quot;javax.persistence.fetchgraph&quot;, value = &quot;shop_with_all_associations&quot;)})\r\n        List&lt;Shop&gt; getAllWithQueryHintBy();\r\n    }\r\n","title":"Is it possible to specify fetchgraph/loadgraph in SpringDataJpa @QueryHint annotation","body":"<p>Is it possible somehow to specify the <code>javax.persistence.fetchgraph</code> or <code>javax.persistence.loadgraph</code> using @QueryHint in Spring Data Jpa?</p>\n<p>I have an entity graph</p>\n<pre><code>@Entity\n@NamedEntityGraph(\n        name = &quot;shop_with_all_associations&quot;,\n        includeAllAttributes = true\n)\npublic class Shop {    \n    @JoinColumn(name = &quot;shop_id&quot;)\n    @OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n    private List&lt;Member&gt; members = new ArrayList&lt;&gt;();\n}\n</code></pre>\n<p>And the corresponding method in the repository</p>\n<pre><code>@Repository\npublic interface ShopRepository extends JpaRepository&lt;Shop, Integer&gt; {\n    @QueryHints({@QueryHint(name = &quot;javax.persistence.fetchgraph&quot;, value = &quot;shop_with_all_associations&quot;)})\n    List&lt;Shop&gt; getAllWithQueryHintBy();\n}\n</code></pre>\n"},{"tags":["java","xslt","saxon","docbook-xsl"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1691373411,"post_id":76848364,"comment_id":135478126,"body_markdown":"Can you update your question to include a complete, minimal, example, including a pom.xml, which reproduces the problem?","body":"Can you update your question to include a complete, minimal, example, including a pom.xml, which reproduces the problem?"},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":0,"creation_date":1691400230,"post_id":76848364,"comment_id":135481233,"body_markdown":"Rather than using classpath URIs and listing them all in a catalog, have you considered using jar: URIs, e.g. `new StreamSource(is, &quot;jar:file:///docbook-xsl!/xsl/foo.xsl&quot;)`","body":"Rather than using classpath URIs and listing them all in a catalog, have you considered using jar: URIs, e.g. <code>new StreamSource(is, &quot;jar:file:&#47;&#47;&#47;docbook-xsl!&#47;xsl&#47;foo.xsl&quot;)</code>"},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":0,"creation_date":1691400376,"post_id":76848364,"comment_id":135481264,"body_markdown":"Also, it might be that a user-written `URIResolver` (or Saxon `ResourceResolver`) is able to handle the calls on document(&quot;&quot;) and delegate everything else.","body":"Also, it might be that a user-written <code>URIResolver</code> (or Saxon <code>ResourceResolver</code>) is able to handle the calls on document(&quot;&quot;) and delegate everything else."},{"owner":{"account_id":9911,"reputation":1528,"user_id":18493,"accept_rate":60,"display_name":"Paul A. Hoadley"},"score":1,"creation_date":1691449428,"post_id":76848364,"comment_id":135490572,"body_markdown":"I can post a minimal example, and I will try a `jar:` URI—thanks.","body":"I can post a minimal example, and I will try a <code>jar:</code> URI—thanks."},{"owner":{"account_id":32959,"reputation":9763,"user_id":91822,"display_name":"Jukka Matilainen"},"score":0,"creation_date":1691515027,"post_id":76848364,"comment_id":135501070,"body_markdown":"Based on the pom.xml, your minimal example seems to be targeting Java 8 based. Is running on Java 8 a requirement for you?","body":"Based on the pom.xml, your minimal example seems to be targeting Java 8 based. Is running on Java 8 a requirement for you?"}],"answers":[{"comments":[{"owner":{"account_id":9911,"reputation":1528,"user_id":18493,"accept_rate":60,"display_name":"Paul A. Hoadley"},"score":0,"creation_date":1691540647,"post_id":76857673,"comment_id":135504683,"body_markdown":"Thank you for this comprehensive answer, including a pull request on the sample project! I have confirmed that it works. Java 8 is only a soft requirement. Thanks again—outstanding.","body":"Thank you for this comprehensive answer, including a pull request on the sample project! I have confirmed that it works. Java 8 is only a soft requirement. Thanks again—outstanding."},{"owner":{"account_id":9911,"reputation":1528,"user_id":18493,"accept_rate":60,"display_name":"Paul A. Hoadley"},"score":0,"creation_date":1691556267,"post_id":76857673,"comment_id":135505920,"body_markdown":"I&#39;ve updated (and renamed—correct URL in question above) the sample project, and added a `java-8` branch to demonstrate the concept under Java 8.","body":"I&#39;ve updated (and renamed—correct URL in question above) the sample project, and added a <code>java-8</code> branch to demonstrate the concept under Java 8."}],"tags":[],"owner":{"account_id":32959,"reputation":9763,"user_id":91822,"display_name":"Jukka Matilainen"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691560008,"creation_date":1691482681,"answer_id":76857673,"question_id":76848364,"body_markdown":"I think there are multiple ways to do this.  One way to do this would be to add support for accessing resources in the classpath by URLs.  This way you could point to the stylesheets in your classpath with a URL, without having to have a catalog in place.\r\n\r\nYou could do it for example by registering the class below as a `URLStreamHandlerProvider` implementation. The implementation is adapted from [this answer][1], but changed to support the optional leading slash in the URL path and also changed to use the `cp:` scheme name instead of the more conventional `classpath:`. \r\n\r\n* The leading slash is useful in the URLs so that they get treated as hierarchical URLs, so that relative references can be resolved.\r\n* The change of the scheme (protocol) name to `cp:` is because Saxon-HE (at least version 12.3) appears to have a workaround specific for `classpath:` URLs in place, which causes a problem with the leading slash from the path getting dropped off when it resolves relative `classpath:` URLs.\r\n\r\nIn Java 9 and above you can register the provider by putting the fully qualified name of the class in the configuration file `META-INF/services/java.net.spi.URLStreamHandlerProvider`.\r\n\r\nWith this in place, you should be able to point to your stylesheets with an URL like `cp:/xsl/docbook-xsl-1.79.2/html/docbook.xsl` and have it work without a catalog, including relative imports, as long as your XSLT processor uses (or at least falls back to) this method of dereferencing URLs.  Based on a quick test, this approach seems to work with at least the Xalan-Java and Saxon-HE XSLT processors. (I think the default XSLT processor included with Java might have some issues when using the docbook-xsl stylesheets.)\r\n\r\n```\r\npackage com.stackoverflow.q76848364;\r\n\r\nimport java.io.IOException;\r\nimport java.net.URL;\r\nimport java.net.URLConnection;\r\nimport java.net.URLStreamHandler;\r\nimport java.net.spi.URLStreamHandlerProvider;\r\n\r\n/**\r\n * URL stream handler for &quot;cp:/&quot; URLs for accessing resources in the classpath.\r\n * Supports a leading slash in the the path so that the scheme is treated as a\r\n * hierarchical scheme for resolving relative URL references.\r\n * \r\n * &lt;p&gt;\r\n * Register this provider by putting the fully qualified name of this class in\r\n * the configuration file\r\n * META-INF/services/java.net.spi.URLStreamHandlerProvider.\r\n */\r\npublic class ClasspathURLStreamHandlerProvider extends URLStreamHandlerProvider {\r\n\r\n\tprivate static final String PROTOCOL = &quot;cp&quot;;\r\n\r\n\t@Override\r\n\tpublic URLStreamHandler createURLStreamHandler(String protocol) {\r\n\t\tif (PROTOCOL.equals(protocol)) {\r\n\t\t\treturn new URLStreamHandler() {\r\n\t\t\t\t@Override\r\n\t\t\t\tprotected URLConnection openConnection(URL url) throws IOException {\r\n\t\t\t\t\tString urlPath = url.getPath();\r\n\t\t\t\t\tString resourcePath = urlPath.startsWith(&quot;/&quot;) ? urlPath.substring(1) : urlPath;\r\n\t\t\t\t\treturn ClassLoader.getSystemClassLoader().getResource(resourcePath).openConnection();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n}\r\n```\r\n\r\n#### Edited to add: Caution about resolving relative URI references in Java\r\n\r\nWhen working with relative URI references in Java, please note that [there is a bug in the `java.net.URI.resolve()` method][2] that affects resolving relative URI references when the relative URI is empty (bug [JDK-8218962][3] in the Java bug database).  The docbook-xsl stylesheets rely on this working correctly, so there will be problems if one tries to use anything that relies on the `java.net.URI` class for this functionality.  Since both Xalan-Java and Saxon-HE seem to work OK, they must be using something else.\r\n\r\n#### Edited to add (2): Demonstration\r\n\r\nI created a [pull request][4] demonstrating this solution against the provided minimal example.  (The original example was set to target Java 8.  Since the method of registering `URLStreamHandler` implementations is different between Java 8 and Java 9+, I changed the compile target to Java 9 instead to demonstrate the newer approach.)\r\n\r\n  [1]: https://stackoverflow.com/a/56088592/91822\r\n  [2]: https://stackoverflow.com/q/22203111/91822\r\n  [3]: https://bugs.java.com/bugdatabase/view_bug?bug_id=8218962\r\n  [4]: https://github.com/paulhoadley/DocBookInJar/pull/1/files","title":"How can I embed DocBook XSLT transformation in a Java web app?","body":"<p>I think there are multiple ways to do this.  One way to do this would be to add support for accessing resources in the classpath by URLs.  This way you could point to the stylesheets in your classpath with a URL, without having to have a catalog in place.</p>\n<p>You could do it for example by registering the class below as a <code>URLStreamHandlerProvider</code> implementation. The implementation is adapted from <a href=\"https://stackoverflow.com/a/56088592/91822\">this answer</a>, but changed to support the optional leading slash in the URL path and also changed to use the <code>cp:</code> scheme name instead of the more conventional <code>classpath:</code>.</p>\n<ul>\n<li>The leading slash is useful in the URLs so that they get treated as hierarchical URLs, so that relative references can be resolved.</li>\n<li>The change of the scheme (protocol) name to <code>cp:</code> is because Saxon-HE (at least version 12.3) appears to have a workaround specific for <code>classpath:</code> URLs in place, which causes a problem with the leading slash from the path getting dropped off when it resolves relative <code>classpath:</code> URLs.</li>\n</ul>\n<p>In Java 9 and above you can register the provider by putting the fully qualified name of the class in the configuration file <code>META-INF/services/java.net.spi.URLStreamHandlerProvider</code>.</p>\n<p>With this in place, you should be able to point to your stylesheets with an URL like <code>cp:/xsl/docbook-xsl-1.79.2/html/docbook.xsl</code> and have it work without a catalog, including relative imports, as long as your XSLT processor uses (or at least falls back to) this method of dereferencing URLs.  Based on a quick test, this approach seems to work with at least the Xalan-Java and Saxon-HE XSLT processors. (I think the default XSLT processor included with Java might have some issues when using the docbook-xsl stylesheets.)</p>\n<pre><code>package com.stackoverflow.q76848364;\n\nimport java.io.IOException;\nimport java.net.URL;\nimport java.net.URLConnection;\nimport java.net.URLStreamHandler;\nimport java.net.spi.URLStreamHandlerProvider;\n\n/**\n * URL stream handler for &quot;cp:/&quot; URLs for accessing resources in the classpath.\n * Supports a leading slash in the the path so that the scheme is treated as a\n * hierarchical scheme for resolving relative URL references.\n * \n * &lt;p&gt;\n * Register this provider by putting the fully qualified name of this class in\n * the configuration file\n * META-INF/services/java.net.spi.URLStreamHandlerProvider.\n */\npublic class ClasspathURLStreamHandlerProvider extends URLStreamHandlerProvider {\n\n    private static final String PROTOCOL = &quot;cp&quot;;\n\n    @Override\n    public URLStreamHandler createURLStreamHandler(String protocol) {\n        if (PROTOCOL.equals(protocol)) {\n            return new URLStreamHandler() {\n                @Override\n                protected URLConnection openConnection(URL url) throws IOException {\n                    String urlPath = url.getPath();\n                    String resourcePath = urlPath.startsWith(&quot;/&quot;) ? urlPath.substring(1) : urlPath;\n                    return ClassLoader.getSystemClassLoader().getResource(resourcePath).openConnection();\n                }\n            };\n        }\n        return null;\n    }\n\n}\n</code></pre>\n<h4>Edited to add: Caution about resolving relative URI references in Java</h4>\n<p>When working with relative URI references in Java, please note that <a href=\"https://stackoverflow.com/q/22203111/91822\">there is a bug in the <code>java.net.URI.resolve()</code> method</a> that affects resolving relative URI references when the relative URI is empty (bug <a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=8218962\" rel=\"nofollow noreferrer\">JDK-8218962</a> in the Java bug database).  The docbook-xsl stylesheets rely on this working correctly, so there will be problems if one tries to use anything that relies on the <code>java.net.URI</code> class for this functionality.  Since both Xalan-Java and Saxon-HE seem to work OK, they must be using something else.</p>\n<h4>Edited to add (2): Demonstration</h4>\n<p>I created a <a href=\"https://github.com/paulhoadley/DocBookInJar/pull/1/files\" rel=\"nofollow noreferrer\">pull request</a> demonstrating this solution against the provided minimal example.  (The original example was set to target Java 8.  Since the method of registering <code>URLStreamHandler</code> implementations is different between Java 8 and Java 9+, I changed the compile target to Java 9 instead to demonstrate the newer approach.)</p>\n"}],"owner":{"account_id":9911,"reputation":1528,"user_id":18493,"accept_rate":60,"display_name":"Paul A. Hoadley"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":138,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76857673,"answer_count":1,"score":2,"last_activity_date":1691560008,"creation_date":1691372045,"question_id":76848364,"body_markdown":"I&#39;m at the proof-of-concept phase of building some DocBook → PDF transformation into a web application. The basic requirements are:\r\n\r\n* It has to run &quot;out of the JAR&quot;—setting up the stylesheet _as files_ on the appserver&#39;s filesystem is not what I&#39;m after.\r\n* It&#39;s _not_ based on Spring, so I&#39;m after a more generic Java solution.\r\n* We&#39;re currently using the [DocBook 1.79.2][1] stylesheets, though could probably use the [xslt20 stylesheets][2] if more appropriate.\r\n* We&#39;re currently using Saxon-HE 12.3 in the proof-of-concept, but could definitely upgrade that to a commercial version.\r\n\r\nThe TLDR is: How do I encapsulate the DocBook XSLT stylesheets _in a JAR_ (that _doesn&#39;t_ require exploding the JAR into files on the filesystem)?\r\n\r\nAs [recently discussed][3] on the docbook-apps mailing list, I can get quite a bit of the way by starting with the stylesheets in `src/main/resources/xsl` (with some customisations at that level, and then the DocBook stylesheets in `src/main/resources/xsl/docbook-xsl-1.79.2`), a catalog that starts like this:\r\n\r\n``` lang-xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;catalog xmlns=&quot;urn:oasis:names:tc:entity:xmlns:xml:catalog&quot;&gt;\r\n   &lt;uri name=&quot;file:/xsl/juno-driver.xsl&quot;\r\n         uri=&quot;classpath:/xsl/juno-driver.xsl&quot; /&gt;\r\n   &lt;uri name=&quot;file:/xsl/header-footer.xsl&quot;\r\n         uri=&quot;classpath:/xsl/header-footer.xsl&quot; /&gt;\r\n   &lt;uri name=&quot;file:/xsl/table.xsl&quot;\r\n         uri=&quot;classpath:/xsl/table.xsl&quot; /&gt;\r\n   &lt;uri name=&quot;file:/xsl/titlepage.xsl&quot;\r\n         uri=&quot;classpath:/xsl/titlepage.xsl&quot; /&gt;\r\n   &lt;uri name=&quot;file:/xsl/docbook-xsl-1.79.2/fo/docbook.xsl&quot;\r\n         uri=&quot;classpath:/xsl/docbook-xsl-1.79.2/fo/docbook.xsl&quot; /&gt;\r\n   &lt;uri name=&quot;file:/xsl/docbook-xsl-1.79.2/VERSION.xsl&quot;\r\n         uri=&quot;classpath:/xsl/docbook-xsl-1.79.2/VERSION.xsl&quot; /&gt;\r\n   &lt;uri name=&quot;file:/xsl/docbook-xsl-1.79.2/fo/param.xsl&quot;\r\n         uri=&quot;classpath:/xsl/docbook-xsl-1.79.2/fo/param.xsl&quot; /&gt;\r\n```\r\n\r\n(and goes on to map every `.xsl`, `.xml`, `.ent`, and `.dtd` file to its `classpath:` URI equivalent), and some code like this:\r\n\r\n``` lang-java\r\nDOMResult result = new DOMResult();\r\nTransformerFactory factory = TransformerFactory.newInstance();\r\nInputStream is = XmlTest.class.getResourceAsStream(&quot;/xsl/juno-driver.xsl&quot;);\r\nSource source = new StreamSource(is, &quot;file:/xsl/juno-driver.xsl&quot;);\r\nTransformer transformer = factory.newTransformer(source);\r\ntransformer.transform(new DOMSource(document), result);\r\nreturn (Document) result.getNode();\r\n```\r\n\r\nThis _almost_ gets us there, but fails:\r\n\r\n``` lang-none\r\nError at char 9 in expression in xsl:param/@select on line 18 column 57 of l10n.xsl:\r\n  FODC0002  I/O error reported by XML parser processing\r\n  file:///xsl/docbook-xsl-1.79.2/common/l10n.xsl. Caused by java.io.FileNotFoundException:\r\n  /xsl/docbook-xsl-1.79.2/common/l10n.xsl (No such file or directory)\r\nat parameter local.l10n.xml on line 18 column 57 of l10n.xsl:\r\n     invoked by global parameter local.l10n.xml at file:///xsl/docbook-xsl-1.79.2/common/l10n.xsl#18\r\n```\r\n\r\nWhere that line involves a call to `document(&#39;&#39;)`:\r\n\r\n``` lang-xml\r\n&lt;xsl:param name=&quot;local.l10n.xml&quot; select=&quot;document(&#39;&#39;)&quot;/&gt;\r\n```\r\n\r\nLooks like it&#39;s insisting on loading itself from a file, and then (obviously) can&#39;t find it at that URI. How do we tell whoever is resolving calls to the `document()` function to use the classpath?\r\n\r\nI have pushed a [minimal example][4] of the problem to GitHub: you can clone the repo and run `mvn clean test` to reproduce.\r\n\r\nI&#39;d also settle for advice on _any other approach_ to getting this done that meets the list of constraints at the top of the post!\r\n\r\n\r\n  [1]: https://github.com/docbook/xslt10-stylesheets\r\n  [2]: https://github.com/docbook/xslt20-stylesheets\r\n  [3]: https://lists.oasis-open.org/archives/docbook-apps/202307/msg00007.html\r\n  [4]: https://github.com/paulhoadley/DocBookInJar","title":"How can I embed DocBook XSLT transformation in a Java web app?","body":"<p>I'm at the proof-of-concept phase of building some DocBook → PDF transformation into a web application. The basic requirements are:</p>\n<ul>\n<li>It has to run &quot;out of the JAR&quot;—setting up the stylesheet <em>as files</em> on the appserver's filesystem is not what I'm after.</li>\n<li>It's <em>not</em> based on Spring, so I'm after a more generic Java solution.</li>\n<li>We're currently using the <a href=\"https://github.com/docbook/xslt10-stylesheets\" rel=\"nofollow noreferrer\">DocBook 1.79.2</a> stylesheets, though could probably use the <a href=\"https://github.com/docbook/xslt20-stylesheets\" rel=\"nofollow noreferrer\">xslt20 stylesheets</a> if more appropriate.</li>\n<li>We're currently using Saxon-HE 12.3 in the proof-of-concept, but could definitely upgrade that to a commercial version.</li>\n</ul>\n<p>The TLDR is: How do I encapsulate the DocBook XSLT stylesheets <em>in a JAR</em> (that <em>doesn't</em> require exploding the JAR into files on the filesystem)?</p>\n<p>As <a href=\"https://lists.oasis-open.org/archives/docbook-apps/202307/msg00007.html\" rel=\"nofollow noreferrer\">recently discussed</a> on the docbook-apps mailing list, I can get quite a bit of the way by starting with the stylesheets in <code>src/main/resources/xsl</code> (with some customisations at that level, and then the DocBook stylesheets in <code>src/main/resources/xsl/docbook-xsl-1.79.2</code>), a catalog that starts like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;catalog xmlns=&quot;urn:oasis:names:tc:entity:xmlns:xml:catalog&quot;&gt;\n   &lt;uri name=&quot;file:/xsl/juno-driver.xsl&quot;\n         uri=&quot;classpath:/xsl/juno-driver.xsl&quot; /&gt;\n   &lt;uri name=&quot;file:/xsl/header-footer.xsl&quot;\n         uri=&quot;classpath:/xsl/header-footer.xsl&quot; /&gt;\n   &lt;uri name=&quot;file:/xsl/table.xsl&quot;\n         uri=&quot;classpath:/xsl/table.xsl&quot; /&gt;\n   &lt;uri name=&quot;file:/xsl/titlepage.xsl&quot;\n         uri=&quot;classpath:/xsl/titlepage.xsl&quot; /&gt;\n   &lt;uri name=&quot;file:/xsl/docbook-xsl-1.79.2/fo/docbook.xsl&quot;\n         uri=&quot;classpath:/xsl/docbook-xsl-1.79.2/fo/docbook.xsl&quot; /&gt;\n   &lt;uri name=&quot;file:/xsl/docbook-xsl-1.79.2/VERSION.xsl&quot;\n         uri=&quot;classpath:/xsl/docbook-xsl-1.79.2/VERSION.xsl&quot; /&gt;\n   &lt;uri name=&quot;file:/xsl/docbook-xsl-1.79.2/fo/param.xsl&quot;\n         uri=&quot;classpath:/xsl/docbook-xsl-1.79.2/fo/param.xsl&quot; /&gt;\n</code></pre>\n<p>(and goes on to map every <code>.xsl</code>, <code>.xml</code>, <code>.ent</code>, and <code>.dtd</code> file to its <code>classpath:</code> URI equivalent), and some code like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>DOMResult result = new DOMResult();\nTransformerFactory factory = TransformerFactory.newInstance();\nInputStream is = XmlTest.class.getResourceAsStream(&quot;/xsl/juno-driver.xsl&quot;);\nSource source = new StreamSource(is, &quot;file:/xsl/juno-driver.xsl&quot;);\nTransformer transformer = factory.newTransformer(source);\ntransformer.transform(new DOMSource(document), result);\nreturn (Document) result.getNode();\n</code></pre>\n<p>This <em>almost</em> gets us there, but fails:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Error at char 9 in expression in xsl:param/@select on line 18 column 57 of l10n.xsl:\n  FODC0002  I/O error reported by XML parser processing\n  file:///xsl/docbook-xsl-1.79.2/common/l10n.xsl. Caused by java.io.FileNotFoundException:\n  /xsl/docbook-xsl-1.79.2/common/l10n.xsl (No such file or directory)\nat parameter local.l10n.xml on line 18 column 57 of l10n.xsl:\n     invoked by global parameter local.l10n.xml at file:///xsl/docbook-xsl-1.79.2/common/l10n.xsl#18\n</code></pre>\n<p>Where that line involves a call to <code>document('')</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;xsl:param name=&quot;local.l10n.xml&quot; select=&quot;document('')&quot;/&gt;\n</code></pre>\n<p>Looks like it's insisting on loading itself from a file, and then (obviously) can't find it at that URI. How do we tell whoever is resolving calls to the <code>document()</code> function to use the classpath?</p>\n<p>I have pushed a <a href=\"https://github.com/paulhoadley/DocBookInJar\" rel=\"nofollow noreferrer\">minimal example</a> of the problem to GitHub: you can clone the repo and run <code>mvn clean test</code> to reproduce.</p>\n<p>I'd also settle for advice on <em>any other approach</em> to getting this done that meets the list of constraints at the top of the post!</p>\n"},{"tags":["java","android","arrays","json"],"answers":[{"comments":[{"owner":{"account_id":10533378,"reputation":312,"user_id":7762037,"display_name":"hounce"},"score":2,"creation_date":1608027700,"post_id":10193732,"comment_id":115450116,"body_markdown":"if (jsonArray != null) makes no sense in your edit sample, because it will never be null.\nAnd even if it would, the line before it would throw a NullPointerException. This is also the case in the original sample.","body":"if (jsonArray != null) makes no sense in your edit sample, because it will never be null. And even if it would, the line before it would throw a NullPointerException. This is also the case in the original sample."}],"tags":[],"owner":{"account_id":174100,"reputation":4579,"user_id":403255,"accept_rate":33,"display_name":"Vinothkumar Arputharaj"},"comment_count":1,"down_vote_count":0,"up_vote_count":50,"is_accepted":true,"score":50,"last_activity_date":1620094127,"creation_date":1334674864,"answer_id":10193732,"question_id":8820551,"body_markdown":"Try this code\r\n\r\n    ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();     \r\n    JSONArray jsonArray = (JSONArray)jsonObject; \r\n    \r\n    if (jsonArray != null) { \r\n       int len = jsonArray.length();\r\n       for (int i=0;i&lt;len;i++){ \r\n        list.add(jsonArray.get(i).toString());\r\n       } \r\n    }\r\n    //Remove the element from arraylist\r\n    list.remove(position);\r\n    //Recreate JSON Array\r\n    JSONArray jsArray = new JSONArray(list);\r\n\r\n\r\n\r\n**Edit:** \r\nUsing `ArrayList` will add `&quot;\\&quot;` to the key and values. So, use `JSONArray` itself\r\n\r\n\r\n\r\n    JSONArray list = new JSONArray();     \r\n    JSONArray jsonArray = new JSONArray(jsonstring); \r\n    int len = jsonArray.length();\r\n    if (jsonArray != null) { \r\n       for (int i=0;i&lt;len;i++)\r\n       { \r\n    \t   //Excluding the item at position\r\n    \t\tif (i != position) \r\n    \t\t{\r\n    \t\t\tlist.put(jsonArray.get(i));\r\n    \t\t}\r\n       } \r\n    }","title":"How do I remove a specific element from a JSONArray?","body":"<p>Try this code</p>\n<pre><code>ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();     \nJSONArray jsonArray = (JSONArray)jsonObject; \n\nif (jsonArray != null) { \n   int len = jsonArray.length();\n   for (int i=0;i&lt;len;i++){ \n    list.add(jsonArray.get(i).toString());\n   } \n}\n//Remove the element from arraylist\nlist.remove(position);\n//Recreate JSON Array\nJSONArray jsArray = new JSONArray(list);\n</code></pre>\n<p><strong>Edit:</strong>\nUsing <code>ArrayList</code> will add <code>&quot;\\&quot;</code> to the key and values. So, use <code>JSONArray</code> itself</p>\n<pre><code>JSONArray list = new JSONArray();     \nJSONArray jsonArray = new JSONArray(jsonstring); \nint len = jsonArray.length();\nif (jsonArray != null) { \n   for (int i=0;i&lt;len;i++)\n   { \n       //Excluding the item at position\n        if (i != position) \n        {\n            list.put(jsonArray.get(i));\n        }\n   } \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2155290,"reputation":29,"user_id":1910684,"display_name":"HappyBoyz"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1355765066,"creation_date":1355765066,"answer_id":13918944,"question_id":8820551,"body_markdown":"i guess you are using Me version, i suggest to add this block of function manually, in your code (JSONArray.java) :\r\n\r\n    public Object remove(int index) {\r\n        Object o = this.opt(index);\r\n        this.myArrayList.removeElementAt(index);\r\n        return o;\r\n    }\r\n\r\nIn java version they use ArrayList, in ME Version they use Vector.","title":"How do I remove a specific element from a JSONArray?","body":"<p>i guess you are using Me version, i suggest to add this block of function manually, in your code (JSONArray.java) :</p>\n\n<pre><code>public Object remove(int index) {\n    Object o = this.opt(index);\n    this.myArrayList.removeElementAt(index);\n    return o;\n}\n</code></pre>\n\n<p>In java version they use ArrayList, in ME Version they use Vector.</p>\n"},{"tags":[],"owner":{"account_id":2743155,"reputation":722,"user_id":2364162,"display_name":"Fabio Guerra"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1504572885,"creation_date":1385579348,"answer_id":20251038,"question_id":8820551,"body_markdown":"    public static JSONArray RemoveJSONArray( JSONArray jarray,int pos) {\r\n\t\r\n\tJSONArray Njarray=new JSONArray();\r\n\ttry{\r\n\tfor(int i=0;i&lt;jarray.length();i++){\t\t\r\n\t\tif(i!=pos)\r\n\t\t\tNjarray.put(jarray.get(i));\t\t\r\n\t}\r\n\t}catch (Exception e){e.printStackTrace();}\r\n\treturn Njarray;\r\n\t\t\r\n    }","title":"How do I remove a specific element from a JSONArray?","body":"<pre><code>public static JSONArray RemoveJSONArray( JSONArray jarray,int pos) {\n\nJSONArray Njarray=new JSONArray();\ntry{\nfor(int i=0;i&lt;jarray.length();i++){     \n    if(i!=pos)\n        Njarray.put(jarray.get(i));     \n}\n}catch (Exception e){e.printStackTrace();}\nreturn Njarray;\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1431635,"reputation":5085,"user_id":1353930,"accept_rate":50,"display_name":"Daniel Alder"},"score":1,"creation_date":1392379702,"post_id":21396348,"comment_id":32949153,"body_markdown":"This is bad coding style. In case of an error, the element is not removed, but the invoking code has no chance to know this. a better way is to _not_ use try..catch but using `throws JSONException` in the function header","body":"This is bad coding style. In case of an error, the element is not removed, but the invoking code has no chance to know this. a better way is to <i>not</i> use try..catch but using <code>throws JSONException</code> in the function header"},{"owner":{"account_id":245976,"reputation":16453,"user_id":519814,"accept_rate":94,"display_name":"C--"},"score":1,"creation_date":1392381816,"post_id":21396348,"comment_id":32950355,"body_markdown":"@DanielAlder The `remove` method can&#39;t throw an Exception because the overridden method doesn&#39;t do so.","body":"@DanielAlder The <code>remove</code> method can&#39;t throw an Exception because the overridden method doesn&#39;t do so."},{"owner":{"account_id":1431635,"reputation":5085,"user_id":1353930,"accept_rate":50,"display_name":"Daniel Alder"},"score":1,"creation_date":1392496668,"post_id":21396348,"comment_id":32992917,"body_markdown":"Ok, in this case I would put a `throw new RuntimeException(e)` (or `InternalError`) instead of `e.printStackTrace();return this;` - just for case","body":"Ok, in this case I would put a <code>throw new RuntimeException(e)</code> (or <code>InternalError</code>) instead of <code>e.printStackTrace();return this;</code> - just for case"},{"owner":{"account_id":11859612,"reputation":1,"user_id":8678706,"display_name":"Stack Overflow"},"score":0,"creation_date":1575068959,"post_id":21396348,"comment_id":104454732,"body_markdown":"It is not recommended to extend the default class. Better to create the `remove()` method in the class where you are using it.","body":"It is not recommended to extend the default class. Better to create the <code>remove()</code> method in the class where you are using it."}],"tags":[],"owner":{"account_id":245976,"reputation":16453,"user_id":519814,"accept_rate":94,"display_name":"C--"},"comment_count":4,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1426099555,"creation_date":1390880173,"answer_id":21396348,"question_id":8820551,"body_markdown":"In case if someone returns with the same question for Android platform, you cannot use the inbuilt `remove()` method if you are targeting for Android API-18 or less. The `remove()` method is added on API level 19. Thus, the best possible thing to do is to extend the `JSONArray` to create a compatible override for the `remove()` method.\r\n\r\n    public class MJSONArray extends JSONArray {\r\n\r\n    \t@Override\r\n    \tpublic Object remove(int index) {\r\n    \r\n     \t\tJSONArray output = new JSONArray();     \r\n    \t\tint len = this.length(); \r\n\t    \tfor (int i = 0; i &lt; len; i++)\t{\r\n\t\t    \tif (i != index)\t{\r\n\t\t    \t\ttry {\r\n\t\t    \t\t\toutput.put(this.get(i));\r\n\t\t\t    \t} catch (JSONException e) {\r\n\t\t\t    \t\tthrow new RuntimeException(e);\r\n\t\t\t    \t}\r\n\t\t    \t}\r\n\t    \t} \r\n\t\t    return output;\r\n\t\t    //return this; If you need the input array in case of a failed attempt to remove an item.\r\n\t     }\r\n    }\r\n\r\n**EDIT**\r\nAs Daniel pointed out, handling an error silently is bad style. Code improved.","title":"How do I remove a specific element from a JSONArray?","body":"<p>In case if someone returns with the same question for Android platform, you cannot use the inbuilt <code>remove()</code> method if you are targeting for Android API-18 or less. The <code>remove()</code> method is added on API level 19. Thus, the best possible thing to do is to extend the <code>JSONArray</code> to create a compatible override for the <code>remove()</code> method.</p>\n\n<pre><code>public class MJSONArray extends JSONArray {\n\n    @Override\n    public Object remove(int index) {\n\n        JSONArray output = new JSONArray();     \n        int len = this.length(); \n        for (int i = 0; i &lt; len; i++)   {\n            if (i != index) {\n                try {\n                    output.put(this.get(i));\n                } catch (JSONException e) {\n                    throw new RuntimeException(e);\n                }\n            }\n        } \n        return output;\n        //return this; If you need the input array in case of a failed attempt to remove an item.\n     }\n}\n</code></pre>\n\n<p><strong>EDIT</strong>\nAs Daniel pointed out, handling an error silently is bad style. Code improved.</p>\n"},{"tags":[],"owner":{"account_id":5537279,"reputation":3453,"user_id":4395114,"accept_rate":58,"display_name":"Mansukh Ahir"},"comment_count":0,"down_vote_count":3,"up_vote_count":6,"is_accepted":false,"score":3,"last_activity_date":1435214096,"creation_date":1435214096,"answer_id":31042894,"question_id":8820551,"body_markdown":"   \r\n\r\n     JSONArray jArray = new JSONArray();\r\n        \r\n        jArray.remove(position); // For remove JSONArrayElement\r\n\r\n**Note :-** If `remove()` isn&#39;t there in `JSONArray` then...\r\n\r\nAPI 19 from Android (4.4) actually allows this method.\r\n\r\nCall requires API level 19 (current min is 16): org.json.JSONArray#remove\r\n\r\n**Right Click** on Project Go to Properties\r\n\r\nSelect Android from left site option\r\n\r\nAnd select Project Build Target greater then API 19 \r\n\r\nHope it helps you.","title":"How do I remove a specific element from a JSONArray?","body":"<pre><code> JSONArray jArray = new JSONArray();\n\n    jArray.remove(position); // For remove JSONArrayElement\n</code></pre>\n\n<p><strong>Note :-</strong> If <code>remove()</code> isn't there in <code>JSONArray</code> then...</p>\n\n<p>API 19 from Android (4.4) actually allows this method.</p>\n\n<p>Call requires API level 19 (current min is 16): org.json.JSONArray#remove</p>\n\n<p><strong>Right Click</strong> on Project Go to Properties</p>\n\n<p>Select Android from left site option</p>\n\n<p>And select Project Build Target greater then API 19 </p>\n\n<p>Hope it helps you.</p>\n"},{"tags":[],"owner":{"account_id":7278667,"reputation":11,"user_id":5549179,"display_name":"ArcticLampyrid"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1447213531,"creation_date":1447213531,"answer_id":33643933,"question_id":8820551,"body_markdown":"You can use reflection  \r\n\r\nA Chinese website provides a relevant solution: http://blog.csdn.net/peihang1354092549/article/details/41957369  \r\nIf you don&#39;t understand Chinese, please try to read it with the translation software.  \r\n\r\nHe provides this code for the old version:  \r\n\r\n\tpublic void JSONArray_remove(int index, JSONArray JSONArrayObject) throws Exception{\r\n\t\tif(index &lt; 0)\r\n\t\t\treturn;\r\n\t\tField valuesField=JSONArray.class.getDeclaredField(&quot;values&quot;);\r\n\t\tvaluesField.setAccessible(true);\r\n\t\tList&lt;Object&gt; values=(List&lt;Object&gt;)valuesField.get(JSONArrayObject);\r\n\t\tif(index &gt;= values.size())\r\n\t\t\treturn;\r\n\t\tvalues.remove(index);\r\n\t}\r\n","title":"How do I remove a specific element from a JSONArray?","body":"<p>You can use reflection  </p>\n\n<p>A Chinese website provides a relevant solution: <a href=\"http://blog.csdn.net/peihang1354092549/article/details/41957369\" rel=\"nofollow\">http://blog.csdn.net/peihang1354092549/article/details/41957369</a><br>\nIf you don't understand Chinese, please try to read it with the translation software.  </p>\n\n<p>He provides this code for the old version:  </p>\n\n<pre><code>public void JSONArray_remove(int index, JSONArray JSONArrayObject) throws Exception{\n    if(index &lt; 0)\n        return;\n    Field valuesField=JSONArray.class.getDeclaredField(\"values\");\n    valuesField.setAccessible(true);\n    List&lt;Object&gt; values=(List&lt;Object&gt;)valuesField.get(JSONArrayObject);\n    if(index &gt;= values.size())\n        return;\n    values.remove(index);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8786421,"reputation":11,"user_id":6568154,"display_name":"Rajat Chhajed"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1482948929,"creation_date":1482948929,"answer_id":41367547,"question_id":8820551,"body_markdown":"In my case I wanted to remove jsonobject with status as non zero value, so what I did is made a function &quot;removeJsonObject&quot; which takes old json and gives required json and called that function inside the constuctor.\r\n\r\n\r\n\r\n\r\n\r\n    public CommonAdapter(Context context, JSONObject json, String type) {\r\n            this.context=context;\r\n            this.json= removeJsonObject(json);\r\n            this.type=type;\r\n            Log.d(&quot;CA:&quot;, &quot;type:&quot;+type);\r\n    \r\n        }\r\n\r\n    public JSONObject removeJsonObject(JSONObject jo){\r\n            JSONArray ja= null;\r\n            JSONArray jsonArray= new JSONArray();\r\n            JSONObject jsonObject1=new JSONObject();\r\n    \r\n            try {\r\n                ja = jo.getJSONArray(&quot;data&quot;);\r\n    \r\n            } catch (JSONException e) {\r\n                e.printStackTrace();\r\n            }\r\n            for(int i=0; i&lt;ja.length(); i++){\r\n                try {\r\n    \r\n                    if(Integer.parseInt(ja.getJSONObject(i).getString(&quot;status&quot;))==0)\r\n                    {\r\n                        jsonArray.put(ja.getJSONObject(i));\r\n                        Log.d(&quot;jsonarray:&quot;, jsonArray.toString());\r\n                    }\r\n    \r\n    \r\n                } catch (JSONException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n            try {\r\n                jsonObject1.put(&quot;data&quot;,jsonArray);\r\n                Log.d(&quot;jsonobject1:&quot;, jsonObject1.toString());\r\n    \r\n                return jsonObject1;\r\n            } catch (JSONException e) {\r\n                e.printStackTrace();\r\n            }\r\n            return json;\r\n        }\r\n\r\n","title":"How do I remove a specific element from a JSONArray?","body":"<p>In my case I wanted to remove jsonobject with status as non zero value, so what I did is made a function \"removeJsonObject\" which takes old json and gives required json and called that function inside the constuctor.</p>\n\n<pre><code>public CommonAdapter(Context context, JSONObject json, String type) {\n        this.context=context;\n        this.json= removeJsonObject(json);\n        this.type=type;\n        Log.d(\"CA:\", \"type:\"+type);\n\n    }\n\npublic JSONObject removeJsonObject(JSONObject jo){\n        JSONArray ja= null;\n        JSONArray jsonArray= new JSONArray();\n        JSONObject jsonObject1=new JSONObject();\n\n        try {\n            ja = jo.getJSONArray(\"data\");\n\n        } catch (JSONException e) {\n            e.printStackTrace();\n        }\n        for(int i=0; i&lt;ja.length(); i++){\n            try {\n\n                if(Integer.parseInt(ja.getJSONObject(i).getString(\"status\"))==0)\n                {\n                    jsonArray.put(ja.getJSONObject(i));\n                    Log.d(\"jsonarray:\", jsonArray.toString());\n                }\n\n\n            } catch (JSONException e) {\n                e.printStackTrace();\n            }\n        }\n        try {\n            jsonObject1.put(\"data\",jsonArray);\n            Log.d(\"jsonobject1:\", jsonObject1.toString());\n\n            return jsonObject1;\n        } catch (JSONException e) {\n            e.printStackTrace();\n        }\n        return json;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13821428,"reputation":289,"user_id":9976764,"display_name":"Rakesh Jha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578409059,"creation_date":1578404207,"answer_id":59629518,"question_id":8820551,"body_markdown":"To Remove some element from Listview in android then it will remove your specific element and Bind it to listview.\r\n\r\n```\r\nBookinhHistory_adapter.this.productPojoList.remove(position);\r\n\r\nBookinhHistory_adapter.this.notifyDataSetChanged();\r\n```","title":"How do I remove a specific element from a JSONArray?","body":"<p>To Remove some element from Listview in android then it will remove your specific element and Bind it to listview.</p>\n\n<pre><code>BookinhHistory_adapter.this.productPojoList.remove(position);\n\nBookinhHistory_adapter.this.notifyDataSetChanged();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2673328,"reputation":1649,"user_id":2310221,"accept_rate":81,"display_name":"Markus"},"score":0,"creation_date":1590666443,"post_id":62062414,"comment_id":109769069,"body_markdown":"Welcome to StackOverflow! Please make sure to add an explain to your answer to help others understand it","body":"Welcome to StackOverflow! Please make sure to add an explain to your answer to help others understand it"},{"owner":{"account_id":17117724,"reputation":1321,"user_id":12386821,"display_name":"Jaimil Patel"},"score":0,"creation_date":1590666864,"post_id":62062414,"comment_id":109769312,"body_markdown":"Hope It will solve issue but please add explanation of your code with it so user will get perfect understanding which he/she really wants.","body":"Hope It will solve issue but please add explanation of your code with it so user will get perfect understanding which he/she really wants."}],"tags":[],"owner":{"account_id":1848079,"reputation":1,"user_id":1675303,"display_name":"Sakthidasan J"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1590666939,"creation_date":1590661417,"answer_id":62062414,"question_id":8820551,"body_markdown":"    We can use iterator to filter out the array entries instead of creating a new  Array. \r\n\r\n    &#39;public static void removeNullsFrom(JSONArray array) throws JSONException {\r\n            \t\tif (array != null) {\r\n            \t\t\tIterator&lt;Object&gt; iterator = array.iterator();\r\n            \t\t\twhile (iterator.hasNext()) {\r\n            \t\t\t\tObject o = iterator.next();\r\n            \t\t\t\tif (o == null || o == JSONObject.NULL) {\r\n            \t\t\t\t\titerator.remove();\r\n            \t\t\t\t}\r\n            \t\t\t}\r\n            \t\t}\r\n            \t}&#39;\r\n     \r\n    \r\n           \r\n         \r\n\r\n","title":"How do I remove a specific element from a JSONArray?","body":"<pre><code>We can use iterator to filter out the array entries instead of creating a new  Array. \n\n'public static void removeNullsFrom(JSONArray array) throws JSONException {\n                if (array != null) {\n                    Iterator&lt;Object&gt; iterator = array.iterator();\n                    while (iterator.hasNext()) {\n                        Object o = iterator.next();\n                        if (o == null || o == JSONObject.NULL) {\n                            iterator.remove();\n                        }\n                    }\n                }\n            }'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17938356,"reputation":1,"user_id":13034239,"display_name":"daniiel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619071417,"creation_date":1619071417,"answer_id":67207592,"question_id":8820551,"body_markdown":"    static JSONArray removeFromJsonArray(JSONArray jsonArray, int removeIndex){\r\n        JSONArray _return = new JSONArray();\r\n        for (int i = 0; i &lt;jsonArray.length(); i++) {\r\n            if (i != removeIndex){\r\n                try {\r\n                    _return.put(jsonArray.getJSONObject(i));\r\n                } catch (JSONException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n        return _return;\r\n    }","title":"How do I remove a specific element from a JSONArray?","body":"<pre><code>static JSONArray removeFromJsonArray(JSONArray jsonArray, int removeIndex){\n    JSONArray _return = new JSONArray();\n    for (int i = 0; i &lt;jsonArray.length(); i++) {\n        if (i != removeIndex){\n            try {\n                _return.put(jsonArray.getJSONObject(i));\n            } catch (JSONException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n    return _return;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1691760425,"post_id":76864886,"comment_id":135539260,"body_markdown":"I see this is your first answer, which is awesome. But since there&#39;s already an accepted answer, new answers should try to improve on it, or at least update outdated information. So, why do you think that your solution is better than the **already accepted answer**?","body":"I see this is your first answer, which is awesome. But since there&#39;s already an accepted answer, new answers should try to improve on it, or at least update outdated information. So, why do you think that your solution is better than the <b>already accepted answer</b>?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691889180,"post_id":76864886,"comment_id":135551886,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/76864886/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":10455264,"reputation":1,"user_id":7707609,"display_name":"Mahesh"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691559916,"creation_date":1691559916,"answer_id":76864886,"question_id":8820551,"body_markdown":"To remove multiple positions\r\n```\r\n    public static void main(String[] args) throws JSONException {\r\n        JSONArray array = new JSONArray();\r\n        array.put(0, &quot;0&quot;);\r\n        array.put(1, &quot;1&quot;);\r\n        array.put(2, &quot;2&quot;);\r\n        array.put(3, &quot;3&quot;);\r\n        List&lt;Integer&gt; toRemove = new ArrayList&lt;&gt;();\r\n        toRemove.add(1);\r\n        toRemove.add(0);\r\n        toRemove = toRemove.stream().sorted().collect(Collectors.toList());\r\n        int removedCount = 0; // Once we remove the element from array, we should reduce the position also with the removed item size\r\n        for (int position : toRemove) {\r\n            int newPosition = position - removedCount;\r\n            array.remove(newPosition);\r\n            removedCount = removedCount + 1;\r\n            \r\n        }\r\n        System.out.println(array.toString());// [&quot;2&quot;,&quot;3&quot;]\r\n    }","title":"How do I remove a specific element from a JSONArray?","body":"<p>To remove multiple positions</p>\n<pre><code>    public static void main(String[] args) throws JSONException {\n        JSONArray array = new JSONArray();\n        array.put(0, &quot;0&quot;);\n        array.put(1, &quot;1&quot;);\n        array.put(2, &quot;2&quot;);\n        array.put(3, &quot;3&quot;);\n        List&lt;Integer&gt; toRemove = new ArrayList&lt;&gt;();\n        toRemove.add(1);\n        toRemove.add(0);\n        toRemove = toRemove.stream().sorted().collect(Collectors.toList());\n        int removedCount = 0; // Once we remove the element from array, we should reduce the position also with the removed item size\n        for (int position : toRemove) {\n            int newPosition = position - removedCount;\n            array.remove(newPosition);\n            removedCount = removedCount + 1;\n            \n        }\n        System.out.println(array.toString());// [&quot;2&quot;,&quot;3&quot;]\n    }\n</code></pre>\n"}],"owner":{"account_id":553127,"reputation":12116,"user_id":918472,"accept_rate":71,"display_name":"Rupesh Yadav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":184485,"favorite_count":0,"down_vote_count":0,"up_vote_count":43,"accepted_answer_id":10193732,"answer_count":11,"score":43,"last_activity_date":1691559916,"creation_date":1326290480,"question_id":8820551,"body_markdown":"I am building one app in which I request a PHP file from server. This PHP file returns a JSONArray having JSONObjects as its elements e.g.,        \r\n\r\n    [ \r\n      {\r\n        &quot;uniqid&quot;:&quot;h5Wtd&quot;, \r\n        &quot;name&quot;:&quot;Test_1&quot;, \r\n        &quot;address&quot;:&quot;tst&quot;, \r\n        &quot;email&quot;:&quot;ru_tst@tst.cc&quot;, \r\n        &quot;mobile&quot;:&quot;12345&quot;,\r\n        &quot;city&quot;:&quot;ind&quot;\r\n      },\r\n      {...},\r\n      {...},\r\n      ...\r\n    ]\r\n    \r\nmy code:\r\n\r\n    /* jArrayFavFans is the JSONArray i build from string i get from response.\r\n       its giving me correct JSONArray */\r\n    JSONArray jArrayFavFans=new JSONArray(serverRespons);\r\n    for (int j = 0; j &lt; jArrayFavFans.length(); j++) {\r\n      try {\r\n        if (jArrayFavFans.getJSONObject(j).getString(&quot;uniqid&quot;).equals(id_fav_remov)) {\r\n          //jArrayFavFans.getJSONObject(j).remove(j); //$ I try this to remove element at the current index... But remove doesn&#39;t work here ???? $\r\n          //int index=jArrayFavFans.getInt(j);\r\n          Toast.makeText(getParent(), &quot;Object to remove...!&quot; + id_fav_remov, Toast.LENGTH_SHORT).show();\r\n        }\r\n      } catch (JSONException e) {\r\n        // TODO Auto-generated catch block\r\n        e.printStackTrace();\r\n      }\r\n    }\r\n\r\nHow do I remove a specific element from this JSONArray?","title":"How do I remove a specific element from a JSONArray?","body":"<p>I am building one app in which I request a PHP file from server. This PHP file returns a JSONArray having JSONObjects as its elements e.g.,        </p>\n\n<pre><code>[ \n  {\n    \"uniqid\":\"h5Wtd\", \n    \"name\":\"Test_1\", \n    \"address\":\"tst\", \n    \"email\":\"ru_tst@tst.cc\", \n    \"mobile\":\"12345\",\n    \"city\":\"ind\"\n  },\n  {...},\n  {...},\n  ...\n]\n</code></pre>\n\n<p>my code:</p>\n\n<pre><code>/* jArrayFavFans is the JSONArray i build from string i get from response.\n   its giving me correct JSONArray */\nJSONArray jArrayFavFans=new JSONArray(serverRespons);\nfor (int j = 0; j &lt; jArrayFavFans.length(); j++) {\n  try {\n    if (jArrayFavFans.getJSONObject(j).getString(\"uniqid\").equals(id_fav_remov)) {\n      //jArrayFavFans.getJSONObject(j).remove(j); //$ I try this to remove element at the current index... But remove doesn't work here ???? $\n      //int index=jArrayFavFans.getInt(j);\n      Toast.makeText(getParent(), \"Object to remove...!\" + id_fav_remov, Toast.LENGTH_SHORT).show();\n    }\n  } catch (JSONException e) {\n    // TODO Auto-generated catch block\n    e.printStackTrace();\n  }\n}\n</code></pre>\n\n<p>How do I remove a specific element from this JSONArray?</p>\n"},{"tags":["java","quarkus"],"answers":[{"comments":[{"owner":{"account_id":29189198,"reputation":1,"user_id":22361640,"display_name":"swaroop c"},"score":0,"creation_date":1691568520,"post_id":76864860,"comment_id":135507740,"body_markdown":"I cant put in system properties too. i have an other api service using that i want to integrate at the RegisterRestClient value\nlet say \n@Inject\nProviderService providerService;\n\nvar config = providerservice.retrieve(&quot;&quot;);\nvar endUrl=config.getAuthTokenAPI();\n\nthis endUrl needed to go dynamically at the RegisterRestClient();","body":"I cant put in system properties too. i have an other api service using that i want to integrate at the RegisterRestClient value let say  @Inject ProviderService providerService;  var config = providerservice.retrieve(&quot;&quot;); var endUrl=config.getAuthTokenAPI();  this endUrl needed to go dynamically at the RegisterRestClient();"}],"tags":[],"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691559455,"creation_date":1691559455,"answer_id":76864860,"question_id":76864780,"body_markdown":"You probably want to cal the key `payment-api` (instead of `payment-api.auth-token-api`). That will make things easier in general.\r\n\r\nAny the REST Client [configuration][1] can be provided by any of the ways that Quarkus [supports][2].\r\n\r\nSo for example you could use Java system properties and add `-Dquarkus.rest-client.payment-api.url=someurl`\r\n`\r\n\r\n\r\n  [1]: https://quarkus.io/guides/rest-client-reactive#create-the-configuration\r\n  [2]: https://quarkus.io/guides/config-reference#configuration-sources","title":"In quarkus how to set @RegisterRestClient(configKey = &quot;payment-api.auth-token-api&quot;) these configKey at run time","body":"<p>You probably want to cal the key <code>payment-api</code> (instead of <code>payment-api.auth-token-api</code>). That will make things easier in general.</p>\n<p>Any the REST Client <a href=\"https://quarkus.io/guides/rest-client-reactive#create-the-configuration\" rel=\"nofollow noreferrer\">configuration</a> can be provided by any of the ways that Quarkus <a href=\"https://quarkus.io/guides/config-reference#configuration-sources\" rel=\"nofollow noreferrer\">supports</a>.</p>\n<p>So for example you could use Java system properties and add <code>-Dquarkus.rest-client.payment-api.url=someurl</code>\n`</p>\n"}],"owner":{"account_id":29189198,"reputation":1,"user_id":22361640,"display_name":"swaroop c"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":169,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691559455,"creation_date":1691558295,"question_id":76864780,"body_markdown":"In quarkus how to set @RegisterRestClient(configKey = &quot;payment-api.auth-token-api&quot;) these configKey at run time.\r\ni want to remove &quot;payment-api.auth-token-api&quot; from application.yaml.I have a other service in that from variable i want to put the configkey value dynamically.\r\n\r\ni am trying for a way to achieve this","title":"In quarkus how to set @RegisterRestClient(configKey = &quot;payment-api.auth-token-api&quot;) these configKey at run time","body":"<p>In quarkus how to set @RegisterRestClient(configKey = &quot;payment-api.auth-token-api&quot;) these configKey at run time.\ni want to remove &quot;payment-api.auth-token-api&quot; from application.yaml.I have a other service in that from variable i want to put the configkey value dynamically.</p>\n<p>i am trying for a way to achieve this</p>\n"},{"tags":["java","mysql","spring","maven","spring-boot"],"comments":[{"owner":{"account_id":1382751,"reputation":4828,"user_id":1315419,"accept_rate":44,"display_name":"Vasan"},"score":0,"creation_date":1509231277,"post_id":46995281,"comment_id":80937008,"body_markdown":"What problem are you facing exactly? Any error messages?","body":"What problem are you facing exactly? Any error messages?"}],"answers":[{"tags":[],"owner":{"account_id":5654135,"reputation":3774,"user_id":4473822,"display_name":"Tom"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1691559146,"creation_date":1509260686,"answer_id":46997674,"question_id":46995281,"body_markdown":"If you want to use spring boot data you need:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nIf you want to add MySql support the only dependency you need is the MySql driver:\r\n\r\n**EDIT: since 2022 there is a new driver**\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n    &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nold driver:\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\nBoth dependencies versions should be managed by [spring boot](https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot-dependencies/pom.xml).\r\n\r\n","title":"Maven Dependencies SpringBoot and MySQL","body":"<p>If you want to use spring boot data you need:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>If you want to add MySql support the only dependency you need is the MySql driver:</p>\n<p><strong>EDIT: since 2022 there is a new driver</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n    &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>old driver:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;mysql&lt;/groupId&gt;\n    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Both dependencies versions should be managed by <a href=\"https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot-dependencies/pom.xml\" rel=\"nofollow noreferrer\">spring boot</a>.</p>\n"}],"owner":{"account_id":12115031,"reputation":53,"user_id":8849800,"display_name":"Pafker"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20242,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1691559146,"creation_date":1509231187,"question_id":46995281,"body_markdown":"we have web app with Spring Rest Controllers. We run on Spring Boot 1.5.8. We need to add MySQL database connector and all required dependencies. Here is our current pom.xml. We have tried many options without success. We have tried adding dependencies basen on mvndependencies.com. As well as getting done project and copying dependencies from it.\r\n\r\n    &lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.5.8.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.nimbusds&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;nimbus-jose-jwt&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.github.scribejava&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;scribejava-apis&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.2.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n\r\nThanks in advance","title":"Maven Dependencies SpringBoot and MySQL","body":"<p>we have web app with Spring Rest Controllers. We run on Spring Boot 1.5.8. We need to add MySQL database connector and all required dependencies. Here is our current pom.xml. We have tried many options without success. We have tried adding dependencies basen on mvndependencies.com. As well as getting done project and copying dependencies from it.</p>\n\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;1.5.8.RELEASE&lt;/version&gt;\n    &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n\n&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.nimbusds&lt;/groupId&gt;\n        &lt;artifactId&gt;nimbus-jose-jwt&lt;/artifactId&gt;\n        &lt;version&gt;5.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.github.scribejava&lt;/groupId&gt;\n        &lt;artifactId&gt;scribejava-apis&lt;/artifactId&gt;\n        &lt;version&gt;4.2.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>Thanks in advance</p>\n"},{"tags":["java","google-cloud-platform","google-bigquery"],"comments":[{"owner":{"account_id":10905924,"reputation":76322,"user_id":8016720,"display_name":"John Hanley"},"score":0,"creation_date":1582240959,"post_id":60328828,"comment_id":106719798,"body_markdown":"1) What roles do you have for BigQuery? Your probably want `roles/bigquery.user` 2) Try executing the query in the console. 3) Are you the project owner or editor? 4) If you do not have any BiqQuery permission, then you will need to ask for them or assign them yourself to your identity.","body":"1) What roles do you have for BigQuery? Your probably want <code>roles&#47;bigquery.user</code> 2) Try executing the query in the console. 3) Are you the project owner or editor? 4) If you do not have any BiqQuery permission, then you will need to ask for them or assign them yourself to your identity."},{"owner":{"account_id":17810309,"reputation":11,"user_id":12935081,"display_name":"Rajiv Agarwal"},"score":0,"creation_date":1582336839,"post_id":60328828,"comment_id":106754118,"body_markdown":"I have appropriate role to view BigQuery data and above code also working fine. Its just that what I want is that is there any other way in java to fetch BigQuery select data instead of creating the Job how it is happening in the above code example ?","body":"I have appropriate role to view BigQuery data and above code also working fine. Its just that what I want is that is there any other way in java to fetch BigQuery select data instead of creating the Job how it is happening in the above code example ?"},{"owner":{"account_id":10905924,"reputation":76322,"user_id":8016720,"display_name":"John Hanley"},"score":0,"creation_date":1582337524,"post_id":60328828,"comment_id":106754235,"body_markdown":"I don&#39;t write code for BigQuery in Java, but I do in C#. I just create a BigQuery Client and then call ExecuteQuery(). Most likely a similar API exists for Java.","body":"I don&#39;t write code for BigQuery in Java, but I do in C#. I just create a BigQuery Client and then call ExecuteQuery(). Most likely a similar API exists for Java."}],"answers":[{"tags":[],"owner":{"account_id":12013673,"reputation":406,"user_id":10640405,"display_name":"Joaquim"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1582542342,"creation_date":1582542342,"answer_id":60374574,"question_id":60328828,"body_markdown":"BigQuery supports two types of queries:\r\n\r\n - Interactive queries\r\n - Batch queries \r\n\r\n**Interactive** queries are the ones set by default. These queries are executed as soon as possible. On the other hand, **batch** queries will start the query execution as soon as idle resources are available.\r\n\r\nRegarding your question &quot;*Is create job only way to execute BigQuery select query from Java ? For this I need to have BigQuery Job User permission. Is there another way?*&quot; you have to take into consideration that **both of those queries will necessarily create a query job** and to do you will require the BigQuery Job User role. You will find more information on Java Client library for BigQuery in [this][1] reference and more information on BigQuery roles and permissions in the [documentation][2].\r\n\r\n\r\n\r\n\r\n[1]: https://googleapis.dev/java/google-cloud-clients/latest/index.html?com/google/cloud/bigquery/package-summary.html\r\n[2]: https://cloud.google.com/bigquery/docs/access-control","title":"Is create job only way to execute BigQuery select query from Java ? For this I need to have BigQuery Job User permission. Is there another way?","body":"<p>BigQuery supports two types of queries:</p>\n\n<ul>\n<li>Interactive queries</li>\n<li>Batch queries </li>\n</ul>\n\n<p><strong>Interactive</strong> queries are the ones set by default. These queries are executed as soon as possible. On the other hand, <strong>batch</strong> queries will start the query execution as soon as idle resources are available.</p>\n\n<p>Regarding your question \"<em>Is create job only way to execute BigQuery select query from Java ? For this I need to have BigQuery Job User permission. Is there another way?</em>\" you have to take into consideration that <strong>both of those queries will necessarily create a query job</strong> and to do you will require the BigQuery Job User role. You will find more information on Java Client library for BigQuery in <a href=\"https://googleapis.dev/java/google-cloud-clients/latest/index.html?com/google/cloud/bigquery/package-summary.html\" rel=\"nofollow noreferrer\">this</a> reference and more information on BigQuery roles and permissions in the <a href=\"https://cloud.google.com/bigquery/docs/access-control\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n"},{"tags":[],"owner":{"account_id":7332044,"reputation":1,"user_id":5584601,"display_name":"Tejas Rawat"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691559081,"creation_date":1691342739,"answer_id":76847018,"question_id":60328828,"body_markdown":"We can extract result data from GBQ without Job. It seems job could be useful when we also have some retry logic in place. \r\n```java\r\npublic static void queryLargeResults(String destinationDataset,\r\n                                     String destinationTable,\r\n                                     String query) {\r\n    try {\r\n        // Initialize client that will be used to send requests. This client only needs to be created\r\n        // once, and can be reused for multiple requests.\r\n        BigQuery bigquery = BigQueryOptions.getDefaultInstance().getService();\r\n        QueryJobConfiguration queryConfig =\r\n        // To use legacy SQL syntax, set useLegacySql to true.\r\n               QueryJobConfiguration.newBuilder(query)\r\n                                    .setUseLegacySql(true)\r\n                                    // Save the results of the query to a permanent table.\r\n                                    .setDestinationTable(TableId.of(destinationDataset, destinationTable))\r\n                                    // Allow results larger than the maximum response size.\r\n                                    // If true, a destination table must be set.\r\n                                    .setAllowLargeResults(true)\r\n                                    .build();\r\n\r\n        TableResult results = bigquery.query(queryConfig);\r\n        results.iterateAll()\r\n               .forEach(row -&gt; row.forEach(val -&gt; System.out.printf(&quot;%s,&quot;, val.toString())));\r\n        System.out.println(&quot;Query large results performed successfully.&quot;);\r\n    } catch (BigQueryException | InterruptedException e) {\r\n        System.out.println(&quot;Query not performed \\n&quot; + e.toString());\r\n    }\r\n}\r\n```\r\nThis is google code snippet: https://github.com/googleapis/java-bigquery/blob/main/samples/snippets/src/main/java/com/example/bigquery/QueryLargeResults.java ","title":"Is create job only way to execute BigQuery select query from Java ? For this I need to have BigQuery Job User permission. Is there another way?","body":"<p>We can extract result data from GBQ without Job. It seems job could be useful when we also have some retry logic in place.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void queryLargeResults(String destinationDataset,\n                                     String destinationTable,\n                                     String query) {\n    try {\n        // Initialize client that will be used to send requests. This client only needs to be created\n        // once, and can be reused for multiple requests.\n        BigQuery bigquery = BigQueryOptions.getDefaultInstance().getService();\n        QueryJobConfiguration queryConfig =\n        // To use legacy SQL syntax, set useLegacySql to true.\n               QueryJobConfiguration.newBuilder(query)\n                                    .setUseLegacySql(true)\n                                    // Save the results of the query to a permanent table.\n                                    .setDestinationTable(TableId.of(destinationDataset, destinationTable))\n                                    // Allow results larger than the maximum response size.\n                                    // If true, a destination table must be set.\n                                    .setAllowLargeResults(true)\n                                    .build();\n\n        TableResult results = bigquery.query(queryConfig);\n        results.iterateAll()\n               .forEach(row -&gt; row.forEach(val -&gt; System.out.printf(&quot;%s,&quot;, val.toString())));\n        System.out.println(&quot;Query large results performed successfully.&quot;);\n    } catch (BigQueryException | InterruptedException e) {\n        System.out.println(&quot;Query not performed \\n&quot; + e.toString());\n    }\n}\n</code></pre>\n<p>This is google code snippet: <a href=\"https://github.com/googleapis/java-bigquery/blob/main/samples/snippets/src/main/java/com/example/bigquery/QueryLargeResults.java\" rel=\"nofollow noreferrer\">https://github.com/googleapis/java-bigquery/blob/main/samples/snippets/src/main/java/com/example/bigquery/QueryLargeResults.java</a></p>\n"}],"owner":{"account_id":17810309,"reputation":11,"user_id":12935081,"display_name":"Rajiv Agarwal"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":917,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1691559081,"creation_date":1582234331,"question_id":60328828,"body_markdown":"Is there an alternate Java code to execute BigQuery select query to fetch some data instead of through a job. Below is my code where I am creating jobid and then executing the query. Looking for some other options. \r\n\r\n    try {\r\n                GoogleCredentials credentials;\r\n                String keyPath = &quot;Path_to_json.json&quot;;\r\n                File credentialsPath = new File(keyPath);\r\n                FileInputStream serviceAccountStream = new FileInputStream(credentialsPath);\r\n                    credentials = ServiceAccountCredentials.fromStream(serviceAccountStream);\r\n    \r\n    \r\n                // Instantiate a client.\r\n                BigQuery bigquery =\r\n                      BigQueryOptions.newBuilder().setCredentials(credentials).build().getService();\r\n    \r\n                QueryJobConfiguration queryConfig =\r\n                        QueryJobConfiguration.newBuilder(\r\n                                &quot;select * from `bigquery-public-data`.new_york_subway.stations)\r\n                                .setUseLegacySql(false)\r\n                                .build();\r\n    \r\n                // Create a job ID so that we can safely retry.\r\n                JobId jobId = JobId.of(UUID.randomUUID().toString());\r\n                Job queryJob=\r\n                           bigquery.create(\r\n                                 JobInfo.newBuilder(queryConfig).setJobId(jobId).build());\r\n    \r\n                // Wait for the query to complete.\r\n                queryJob = queryJob.waitFor();\r\n    \r\n                // Check for errors\r\n                if (queryJob == null) {\r\n                    throw new RuntimeException(&quot;Job no longer exists&quot;);\r\n                } else if (queryJob.getStatus().getError() != null) {\r\n                    // You can also look at queryJob.getStatus().getExecutionErrors() for all\r\n                    // errors, not just the latest one.\r\n                    throw new RuntimeException(queryJob.getStatus().getError().toString());\r\n                }\r\n    \r\n                // Get the results.\r\n                TableResult result = queryJob.getQueryResults();\r\n    \r\n                // Print all pages of the results.\r\n                for (FieldValueList row : result.iterateAll()) {\r\n                    String stationId = row.get(&quot;station_id&quot;).getStringValue();\r\n                    String stationName  = row.get(&quot;station_name&quot;).getStringValue();\r\n                    System.out.println(&quot;StationId : &quot;+stationId+&quot;      Station Name : \r\n                        &quot;+stationName);\r\n                }\r\n            }catch(Exception e){\r\n                e.printStackTrace();\r\n            }","title":"Is create job only way to execute BigQuery select query from Java ? For this I need to have BigQuery Job User permission. Is there another way?","body":"<p>Is there an alternate Java code to execute BigQuery select query to fetch some data instead of through a job. Below is my code where I am creating jobid and then executing the query. Looking for some other options. </p>\n\n<pre><code>try {\n            GoogleCredentials credentials;\n            String keyPath = \"Path_to_json.json\";\n            File credentialsPath = new File(keyPath);\n            FileInputStream serviceAccountStream = new FileInputStream(credentialsPath);\n                credentials = ServiceAccountCredentials.fromStream(serviceAccountStream);\n\n\n            // Instantiate a client.\n            BigQuery bigquery =\n                  BigQueryOptions.newBuilder().setCredentials(credentials).build().getService();\n\n            QueryJobConfiguration queryConfig =\n                    QueryJobConfiguration.newBuilder(\n                            \"select * from `bigquery-public-data`.new_york_subway.stations)\n                            .setUseLegacySql(false)\n                            .build();\n\n            // Create a job ID so that we can safely retry.\n            JobId jobId = JobId.of(UUID.randomUUID().toString());\n            Job queryJob=\n                       bigquery.create(\n                             JobInfo.newBuilder(queryConfig).setJobId(jobId).build());\n\n            // Wait for the query to complete.\n            queryJob = queryJob.waitFor();\n\n            // Check for errors\n            if (queryJob == null) {\n                throw new RuntimeException(\"Job no longer exists\");\n            } else if (queryJob.getStatus().getError() != null) {\n                // You can also look at queryJob.getStatus().getExecutionErrors() for all\n                // errors, not just the latest one.\n                throw new RuntimeException(queryJob.getStatus().getError().toString());\n            }\n\n            // Get the results.\n            TableResult result = queryJob.getQueryResults();\n\n            // Print all pages of the results.\n            for (FieldValueList row : result.iterateAll()) {\n                String stationId = row.get(\"station_id\").getStringValue();\n                String stationName  = row.get(\"station_name\").getStringValue();\n                System.out.println(\"StationId : \"+stationId+\"      Station Name : \n                    \"+stationName);\n            }\n        }catch(Exception e){\n            e.printStackTrace();\n        }\n</code></pre>\n"},{"tags":["java","spring-security","roles","user-permissions"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":2,"creation_date":1691501798,"post_id":76860093,"comment_id":135498141,"body_markdown":"That&#39;s a lot of code. Can you reduce it to a [mcve]?","body":"That&#39;s a lot of code. Can you reduce it to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"},{"owner":{"account_id":13991558,"reputation":45,"user_id":10105443,"display_name":"Sayantan Chatterjee"},"score":0,"creation_date":1691503654,"post_id":76860093,"comment_id":135498594,"body_markdown":"Hi @Jorn, reduced lines of code.","body":"Hi @Jorn, reduced lines of code."}],"answers":[{"tags":[],"owner":{"account_id":13991558,"reputation":45,"user_id":10105443,"display_name":"Sayantan Chatterjee"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691558663,"creation_date":1691558663,"answer_id":76864812,"question_id":76860093,"body_markdown":"OK I resolved by myself.\r\n\r\nFirstly, I add login method inside AuthController\r\n\r\n    @GetMapping(value = &quot;/login&quot;,produces = MediaType.APPLICATION_JSON_VALUE,\r\n    \t\t\theaders = &quot;Accept=application/json&quot;,consumes = MediaType.APPLICATION_JSON_VALUE)\r\n    \tpublic void login(HttpServletRequest req,@RequestHeader(HttpHeaders.AUTHORIZATION) String authorization) {\r\n    \t\t\r\n    \t\tif (authorization != null &amp;&amp; authorization.toLowerCase().startsWith(&quot;basic&quot;)) {\r\n    \t\t    // Authorization: Basic base64credentials\r\n    \t\t    String base64Credentials = authorization.substring(&quot;Basic&quot;.length()).trim();\r\n    \t\t    byte[] credDecoded = Base64.getDecoder().decode(base64Credentials); \r\n    \t\t    String credentials = new String(credDecoded, StandardCharsets.UTF_8);\r\n    \t\t    // credentials = username:password\r\n    \t\t    final String[] values = credentials.split(&quot;:&quot;, 2);\r\n    \t\t    String username = values[0];\r\n    \t\t    String password = values[1];\r\n    \t\t    authenticateusercredentials(username, password, req);\r\n    \t\t}else {\r\n    \t\t\tString username = req.getParameter(&quot;username&quot;);\r\n    \t\t    String password = req.getParameter(&quot;password&quot;);\r\n    \t\t    authenticateusercredentials(username, password, req);\r\n    \t\t}\r\n    \t}\r\n    \t \r\n    \tpublic void authenticateusercredentials(String username,String password,HttpServletRequest req) {\r\n            UsernamePasswordAuthenticationToken authReq = new UsernamePasswordAuthenticationToken(username, password);\r\n            Authentication auth = authmanager.authenticate(authReq);\r\n            SecurityContext sc = SecurityContextHolder.getContext();\r\n            sc.setAuthentication(auth);\r\n            HttpSession session = req.getSession(true);\r\n            session.setAttribute(HttpSessionSecurityContextRepository.SPRING_SECURITY_CONTEXT_KEY, sc);\r\n    \t}\r\n    \r\nSecondly I changed /login to auth/login in Security Configuration class\r\n\r\n    ...\r\n    \r\n    .formLogin(login -&gt; {\r\n    \t\t\t\t\t   \t\t\tlogin.loginProcessingUrl(&quot;/auth/login&quot;)\r\n    \t\t\t\t\t   \t\t\t\t .failureForwardUrl(&quot;/loginfailure&quot;);\r\n    \t\t\t\t   })\r\n    ...\r\n    \r\nThanks and Regards","title":"problems using Roles and Permissions using Spring security","body":"<p>OK I resolved by myself.</p>\n<p>Firstly, I add login method inside AuthController</p>\n<pre><code>@GetMapping(value = &quot;/login&quot;,produces = MediaType.APPLICATION_JSON_VALUE,\n            headers = &quot;Accept=application/json&quot;,consumes = MediaType.APPLICATION_JSON_VALUE)\n    public void login(HttpServletRequest req,@RequestHeader(HttpHeaders.AUTHORIZATION) String authorization) {\n        \n        if (authorization != null &amp;&amp; authorization.toLowerCase().startsWith(&quot;basic&quot;)) {\n            // Authorization: Basic base64credentials\n            String base64Credentials = authorization.substring(&quot;Basic&quot;.length()).trim();\n            byte[] credDecoded = Base64.getDecoder().decode(base64Credentials); \n            String credentials = new String(credDecoded, StandardCharsets.UTF_8);\n            // credentials = username:password\n            final String[] values = credentials.split(&quot;:&quot;, 2);\n            String username = values[0];\n            String password = values[1];\n            authenticateusercredentials(username, password, req);\n        }else {\n            String username = req.getParameter(&quot;username&quot;);\n            String password = req.getParameter(&quot;password&quot;);\n            authenticateusercredentials(username, password, req);\n        }\n    }\n     \n    public void authenticateusercredentials(String username,String password,HttpServletRequest req) {\n        UsernamePasswordAuthenticationToken authReq = new UsernamePasswordAuthenticationToken(username, password);\n        Authentication auth = authmanager.authenticate(authReq);\n        SecurityContext sc = SecurityContextHolder.getContext();\n        sc.setAuthentication(auth);\n        HttpSession session = req.getSession(true);\n        session.setAttribute(HttpSessionSecurityContextRepository.SPRING_SECURITY_CONTEXT_KEY, sc);\n    }\n</code></pre>\n<p>Secondly I changed /login to auth/login in Security Configuration class</p>\n<pre><code>...\n\n.formLogin(login -&gt; {\n                                login.loginProcessingUrl(&quot;/auth/login&quot;)\n                                     .failureForwardUrl(&quot;/loginfailure&quot;);\n                   })\n...\n</code></pre>\n<p>Thanks and Regards</p>\n"}],"owner":{"account_id":13991558,"reputation":45,"user_id":10105443,"display_name":"Sayantan Chatterjee"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691558951,"creation_date":1691501760,"question_id":76860093,"body_markdown":"I&#39;m using Spring Security 3.\r\nMy objective is to grant specific operations(controller methods) based on roles and permissions with a particular user. \r\n\r\nROLE_ADMIN -&gt; create,read,update and delete\r\nROLE_USER -&gt; read and update. \r\n\r\nWhen I register a user, it is saved as a user object to a database with encrypted password with no issue. But when I hit the controller api using `UserController`  with basic authentication using Postman, it is showing status 200 OK but not the expected json output. Then after facing that when I hit the same url with Google Chrome, it is showing Whitelabel error page with status 404 NOT FOUND.\r\n\r\nHere is my SecurityConfig.java\r\n\r\n    \r\n    @Configuration\r\n    //@Import({GsonConfig.class}) \r\n    @EnableMethodSecurity \r\n    @EnableWebSecurity(debug = true)\r\n    public class SecurityConfig {\r\n    \t\r\n    \t@Autowired\r\n    \tProductUserRepository productuserrepo;\r\n    \r\n    \t@Bean\r\n    \tpublic PasswordEncoder encoder() { \r\n    \t\treturn new BCryptPasswordEncoder();\r\n    \t}\r\n    \t\r\n    \t@Bean\r\n    \tpublic UserDetailsService userDetailsService() {\r\n    \t    return username -&gt; productuserrepo.findByUsername(username)\r\n    \t        .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User not found&quot;));\r\n    \t}\r\n    \t  \r\n    \t@Bean\r\n    \tpublic SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n    \t  return http.csrf(csrf -&gt; csrf.disable()) \r\n    \t\t\t\t .cors(cors -&gt; cors.disable())\r\n    \t\t\t     .authorizeHttpRequests(a -&gt; {\r\n    \t\t\t\t\t\t\t\t\t       a.requestMatchers(&quot;/auth/**&quot;).permitAll();\r\n    \t\t\t\t\t\t\t\t\t\t   a.anyRequest().authenticated();   \r\n    \t\t\t\t   })\r\n    \t\t\t\t   .formLogin(login -&gt; {\r\n    \t\t\t\t\t   \t\t\tlogin.loginProcessingUrl(&quot;/login&quot;)\r\n    \t\t\t\t\t   \t\t\t\t .failureForwardUrl(&quot;/loginfailure&quot;);\r\n    \t\t\t\t   })\r\n    \t\t\t\t   .logout(logout -&gt;{\r\n    \t\t\t\t\t\t\tlogout.logoutUrl(&quot;/logout&quot;)\r\n    \t\t\t\t\t\t\t\t  .deleteCookies(&quot;JSESSIONID&quot;)\r\n    \t\t\t\t\t\t\t\t  .invalidateHttpSession(false)\r\n    \t\t\t\t\t\t\t\t  .logoutSuccessUrl(&quot;/successlogout&quot;)\r\n    \t\t\t\t\t\t\t\t  .logoutSuccessHandler((request, response, authentication) -&gt; SecurityContextHolder.clearContext());\r\n    \t\t\t\t\t}) \r\n    \t\t\t\t   .authenticationManager(authManager()) \r\n    \t\t\t\t   .build();\r\n    \t} \r\n    \t\r\n        @Bean\r\n        public AuthenticationManager authManager(){\r\n            DaoAuthenticationProvider daoProvider = new DaoAuthenticationProvider();\r\n            daoProvider.setUserDetailsService(userDetailsService());\r\n            daoProvider.setPasswordEncoder(encoder());\r\n            return new ProviderManager(daoProvider);\r\n        }\r\n    \r\n    }\r\n\r\nHere is my Role.java [getting list of permissions using `List&lt;SimpleGrantedAuthority&gt;`]\r\n\r\n    @RequiredArgsConstructor\r\n    public enum Role {\r\n    \r\n    \tUSER(Set.of(USER_READ,USER_UPDATE)),\r\n    \t  \r\n    \tADMIN(Set.of(ADMIN_READ,ADMIN_UPDATE,ADMIN_DELETE,ADMIN_CREATE,\r\n    \t               USER_READ,USER_UPDATE));\r\n    \t \r\n    \t@Getter\r\n    \tprivate final Set&lt;Permission&gt; permissions;\r\n    \t\r\n    \tpublic  List&lt;SimpleGrantedAuthority&gt; getAuthorities() {\r\n    \t\t    List&lt;SimpleGrantedAuthority&gt; authorities = getPermissions().stream()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t            .map(permission -&gt; new SimpleGrantedAuthority(permission.getPermission()))\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t            .collect(Collectors.toList());\r\n    \t\t    authorities.add(new SimpleGrantedAuthority(&quot;ROLE_&quot; + this.name()));\r\n    \t\t    return authorities;\r\n    \t}\r\n    }\r\n\r\nHere is my Permission.java\r\n\r\n    public enum Permission {\r\n    \r\n        ADMIN_READ(&quot;admin:read&quot;),\r\n        ADMIN_UPDATE(&quot;admin:update&quot;),\r\n        ADMIN_CREATE(&quot;admin:create&quot;),\r\n        ADMIN_DELETE(&quot;admin:delete&quot;),\r\n        USER_READ(&quot;user:read&quot;),\r\n        USER_UPDATE(&quot;user:update&quot;);\r\n    \r\n        @Getter\r\n        private final String permission;\r\n    }\r\nFinally here is my user controller to read resource\r\n    \r\n    @RestController\r\n    @RequestMapping(&quot;/user&quot;)\r\n    @PreAuthorize(&quot;hasAnyRole(&#39;USER&#39;,&#39;ADMIN&#39;)&quot;)\r\n    public class UserController {\r\n    \t\r\n    \t@PreAuthorize(&quot;hasAnyAuthority(&#39;admin:read&#39;,&#39;user:read&#39;)&quot;)\r\n    \t@GetMapping(value = &quot;/findproduct&quot;,produces = MediaType.APPLICATION_JSON_VALUE,\r\n    \t\t\theaders = &quot;Accept=application/json&quot;,consumes = MediaType.APPLICATION_JSON_VALUE)\r\n    \tpublic Product findproductbyid(@RequestParam(&quot;productid&quot;)int productid) {\r\n    \t\tSystem.out.println(&quot;inside findproduct method&quot;);\r\n    \t\treturn prodrepo.findById(productid).get(); \r\n    \t}\r\n    }\r\n\r\nAnd my AuthController to register :\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/auth&quot;)\r\n    public class AuthController {\r\n\t\r\n\t@Autowired\r\n\tProductUserRepository produserrepo;\r\n\t\r\n\t@Autowired\r\n\tPasswordEncoder pwd_encoder; \r\n\t\r\n\t@Autowired\r\n\tGson gson;\r\n\r\n\t\r\n\t@PostMapping(value = &quot;/register&quot;,produces = MediaType.APPLICATION_JSON_VALUE,\r\n\t\t\theaders = &quot;Accept=application/json&quot;,consumes = MediaType.APPLICATION_JSON_VALUE)\r\n\tpublic String register(@RequestBody ProductUserModel user) {\r\n\t\t\r\n\t\tif (produserrepo.existsByUsername(user.getUsername())) {  \r\n\t\t\treturn user.getUsername() + &quot; already taken&quot;;\r\n\t\t}else { \r\n\t\t\tSystem.out.println(user.toString());\r\n\t\t\t\tuser.setPassword(pwd_encoder.encode(user.getPassword()));  \r\n\t\t\t\tproduserrepo.save(gson.fromJson(gson.toJson(user), ProductUser.class));\r\n\t\t\t\treturn user.getUsername() + &quot; succesfully registered&quot;;\r\n\t\t}\r\n\t}\r\n\r\nMy only issue is : \r\nwhen I hit `http://localhost:8081/user/findproduct?productid=1` for `UserController` using Google Chrome, then login page redirected. Then if I hit username/password credentials which I successfully registered and saved to database, it is showing Whitelabel error page with status 404 NOT FOUND.\r\n\r\nCan anyone has any idea to fix the issue? ","title":"problems using Roles and Permissions using Spring security","body":"<p>I'm using Spring Security 3.\nMy objective is to grant specific operations(controller methods) based on roles and permissions with a particular user.</p>\n<p>ROLE_ADMIN -&gt; create,read,update and delete\nROLE_USER -&gt; read and update.</p>\n<p>When I register a user, it is saved as a user object to a database with encrypted password with no issue. But when I hit the controller api using <code>UserController</code>  with basic authentication using Postman, it is showing status 200 OK but not the expected json output. Then after facing that when I hit the same url with Google Chrome, it is showing Whitelabel error page with status 404 NOT FOUND.</p>\n<p>Here is my SecurityConfig.java</p>\n<pre><code>@Configuration\n//@Import({GsonConfig.class}) \n@EnableMethodSecurity \n@EnableWebSecurity(debug = true)\npublic class SecurityConfig {\n    \n    @Autowired\n    ProductUserRepository productuserrepo;\n\n    @Bean\n    public PasswordEncoder encoder() { \n        return new BCryptPasswordEncoder();\n    }\n    \n    @Bean\n    public UserDetailsService userDetailsService() {\n        return username -&gt; productuserrepo.findByUsername(username)\n            .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User not found&quot;));\n    }\n      \n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n      return http.csrf(csrf -&gt; csrf.disable()) \n                 .cors(cors -&gt; cors.disable())\n                 .authorizeHttpRequests(a -&gt; {\n                                           a.requestMatchers(&quot;/auth/**&quot;).permitAll();\n                                           a.anyRequest().authenticated();   \n                   })\n                   .formLogin(login -&gt; {\n                                login.loginProcessingUrl(&quot;/login&quot;)\n                                     .failureForwardUrl(&quot;/loginfailure&quot;);\n                   })\n                   .logout(logout -&gt;{\n                            logout.logoutUrl(&quot;/logout&quot;)\n                                  .deleteCookies(&quot;JSESSIONID&quot;)\n                                  .invalidateHttpSession(false)\n                                  .logoutSuccessUrl(&quot;/successlogout&quot;)\n                                  .logoutSuccessHandler((request, response, authentication) -&gt; SecurityContextHolder.clearContext());\n                    }) \n                   .authenticationManager(authManager()) \n                   .build();\n    } \n    \n    @Bean\n    public AuthenticationManager authManager(){\n        DaoAuthenticationProvider daoProvider = new DaoAuthenticationProvider();\n        daoProvider.setUserDetailsService(userDetailsService());\n        daoProvider.setPasswordEncoder(encoder());\n        return new ProviderManager(daoProvider);\n    }\n\n}\n</code></pre>\n<p>Here is my Role.java [getting list of permissions using <code>List&lt;SimpleGrantedAuthority&gt;</code>]</p>\n<pre><code>@RequiredArgsConstructor\npublic enum Role {\n\n    USER(Set.of(USER_READ,USER_UPDATE)),\n      \n    ADMIN(Set.of(ADMIN_READ,ADMIN_UPDATE,ADMIN_DELETE,ADMIN_CREATE,\n                   USER_READ,USER_UPDATE));\n     \n    @Getter\n    private final Set&lt;Permission&gt; permissions;\n    \n    public  List&lt;SimpleGrantedAuthority&gt; getAuthorities() {\n            List&lt;SimpleGrantedAuthority&gt; authorities = getPermissions().stream()\n                                                                        .map(permission -&gt; new SimpleGrantedAuthority(permission.getPermission()))\n                                                                        .collect(Collectors.toList());\n            authorities.add(new SimpleGrantedAuthority(&quot;ROLE_&quot; + this.name()));\n            return authorities;\n    }\n}\n</code></pre>\n<p>Here is my Permission.java</p>\n<pre><code>public enum Permission {\n\n    ADMIN_READ(&quot;admin:read&quot;),\n    ADMIN_UPDATE(&quot;admin:update&quot;),\n    ADMIN_CREATE(&quot;admin:create&quot;),\n    ADMIN_DELETE(&quot;admin:delete&quot;),\n    USER_READ(&quot;user:read&quot;),\n    USER_UPDATE(&quot;user:update&quot;);\n\n    @Getter\n    private final String permission;\n}\n</code></pre>\n<p>Finally here is my user controller to read resource</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/user&quot;)\n@PreAuthorize(&quot;hasAnyRole('USER','ADMIN')&quot;)\npublic class UserController {\n    \n    @PreAuthorize(&quot;hasAnyAuthority('admin:read','user:read')&quot;)\n    @GetMapping(value = &quot;/findproduct&quot;,produces = MediaType.APPLICATION_JSON_VALUE,\n            headers = &quot;Accept=application/json&quot;,consumes = MediaType.APPLICATION_JSON_VALUE)\n    public Product findproductbyid(@RequestParam(&quot;productid&quot;)int productid) {\n        System.out.println(&quot;inside findproduct method&quot;);\n        return prodrepo.findById(productid).get(); \n    }\n}\n</code></pre>\n<p>And my AuthController to register :</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/auth&quot;)\npublic class AuthController {\n\n@Autowired\nProductUserRepository produserrepo;\n\n@Autowired\nPasswordEncoder pwd_encoder; \n\n@Autowired\nGson gson;\n\n\n@PostMapping(value = &quot;/register&quot;,produces = MediaType.APPLICATION_JSON_VALUE,\n        headers = &quot;Accept=application/json&quot;,consumes = MediaType.APPLICATION_JSON_VALUE)\npublic String register(@RequestBody ProductUserModel user) {\n    \n    if (produserrepo.existsByUsername(user.getUsername())) {  \n        return user.getUsername() + &quot; already taken&quot;;\n    }else { \n        System.out.println(user.toString());\n            user.setPassword(pwd_encoder.encode(user.getPassword()));  \n            produserrepo.save(gson.fromJson(gson.toJson(user), ProductUser.class));\n            return user.getUsername() + &quot; succesfully registered&quot;;\n    }\n}\n</code></pre>\n<p>My only issue is :\nwhen I hit <code>http://localhost:8081/user/findproduct?productid=1</code> for <code>UserController</code> using Google Chrome, then login page redirected. Then if I hit username/password credentials which I successfully registered and saved to database, it is showing Whitelabel error page with status 404 NOT FOUND.</p>\n<p>Can anyone has any idea to fix the issue?</p>\n"},{"tags":["java","android","usb"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1691486263,"post_id":76858120,"comment_id":135494794,"body_markdown":"According to [this](https://stackoverflow.com/a/55013425/8681), that API is not officially supported","body":"According to <a href=\"https://stackoverflow.com/a/55013425/8681\">this</a>, that API is not officially supported"},{"owner":{"account_id":11952809,"reputation":359,"user_id":8746005,"display_name":"M. Feyz"},"score":0,"creation_date":1691496074,"post_id":76858120,"comment_id":135496821,"body_markdown":"@Jorn But I test it in API 33","body":"@Jorn But I test it in API 33"}],"owner":{"account_id":11952809,"reputation":359,"user_id":8746005,"display_name":"M. Feyz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691558398,"creation_date":1691486134,"question_id":76858120,"body_markdown":"I use this code to detect when a device is connected via USB or is disconnected:\r\n\r\n        IntentFilter filter = new IntentFilter();\r\n        filter.addAction(&quot;android.hardware.usb.action.USB_STATE&quot;);\r\n        context.registerReceiver(new BroadcastReceiver() {\r\n            @Override\r\n            public void onReceive(Context context, Intent intent) {\r\n                String action = intent.getAction();\r\n                if(action.equalsIgnoreCase(&quot;android.hardware.usb.action.USB_STATE&quot;)) {\r\n                    //Check if change in USB state\r\n                    if (intent.getExtras().getBoolean(&quot;connected&quot;)) {\r\n                        Toast.makeText(context, &quot;connect USB&quot;, Toast.LENGTH_SHORT).show();\r\n                    } else {\r\n                        Toast.makeText(context, &quot;Disconnect!&quot;, Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }\r\n            }\r\n        }, filter);\r\nbut when I connect to digital piano keyboard and then disconnect, both of them shows me &quot;Disconnect!&quot;\r\nWhat is wrong?","title":"USB statuse change is detected but I can&#39;t detect if it is connected or disconnected","body":"<p>I use this code to detect when a device is connected via USB or is disconnected:</p>\n<pre><code>    IntentFilter filter = new IntentFilter();\n    filter.addAction(&quot;android.hardware.usb.action.USB_STATE&quot;);\n    context.registerReceiver(new BroadcastReceiver() {\n        @Override\n        public void onReceive(Context context, Intent intent) {\n            String action = intent.getAction();\n            if(action.equalsIgnoreCase(&quot;android.hardware.usb.action.USB_STATE&quot;)) {\n                //Check if change in USB state\n                if (intent.getExtras().getBoolean(&quot;connected&quot;)) {\n                    Toast.makeText(context, &quot;connect USB&quot;, Toast.LENGTH_SHORT).show();\n                } else {\n                    Toast.makeText(context, &quot;Disconnect!&quot;, Toast.LENGTH_SHORT).show();\n                }\n            }\n        }\n    }, filter);\n</code></pre>\n<p>but when I connect to digital piano keyboard and then disconnect, both of them shows me &quot;Disconnect!&quot;\nWhat is wrong?</p>\n"},{"tags":["java","spring","jpa","spring-boot","spring-data"],"answers":[{"comments":[{"owner":{"account_id":1920479,"reputation":7969,"user_id":1732123,"accept_rate":89,"display_name":"Carlos Alberto"},"score":0,"creation_date":1433168016,"post_id":30554785,"comment_id":49221552,"body_markdown":"At the moment I have the filter OpenEntityManagerInViewFilter to control the EntityManager until the web request is finished.\n\nThis interceptor you meant &quot;OpenEntityManagerInViewInterceptor&quot; is the same that &quot;OpenEntityManagerInViewFilter&quot;? What&#180;s the difference between them? So, I would not have more this filter in my servlet context for Spring Boot?","body":"At the moment I have the filter OpenEntityManagerInViewFilter to control the EntityManager until the web request is finished.  This interceptor you meant &quot;OpenEntityManagerInViewInterceptor&quot; is the same that &quot;OpenEntityManagerInViewFilter&quot;? What&#180;s the difference between them? So, I would not have more this filter in my servlet context for Spring Boot?"},{"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"score":2,"creation_date":1433168499,"post_id":30554785,"comment_id":49221930,"body_markdown":"The interceptor only works, when you use the DispatcherServlet in Spring (because the interceptor is a Spring mechanism). The filter can be mapped to all configured servlets (we use it for the FacesServlet in one of our applications). So if you only use the DispatcherServlet, you can add the property and remove the filter, otherwise use the filter.","body":"The interceptor only works, when you use the DispatcherServlet in Spring (because the interceptor is a Spring mechanism). The filter can be mapped to all configured servlets (we use it for the FacesServlet in one of our applications). So if you only use the DispatcherServlet, you can add the property and remove the filter, otherwise use the filter."}],"tags":[],"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"comment_count":2,"down_vote_count":3,"up_vote_count":97,"is_accepted":true,"score":94,"last_activity_date":1538054899,"creation_date":1433056008,"answer_id":30554785,"question_id":30549489,"body_markdown":"This property will register an `OpenEntityManagerInViewInterceptor`, which registers an `EntityManager` to the current thread, so you will have the same `EntityManager` until the web request is finished. It has nothing to do with a Hibernate `SessionFactory` etc.","title":"What is this spring.jpa.open-in-view=true property in Spring Boot?","body":"<p>This property will register an <code>OpenEntityManagerInViewInterceptor</code>, which registers an <code>EntityManager</code> to the current thread, so you will have the same <code>EntityManager</code> until the web request is finished. It has nothing to do with a Hibernate <code>SessionFactory</code> etc.</p>\n"},{"comments":[{"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"score":39,"creation_date":1534519414,"post_id":48222934,"comment_id":90747938,"body_markdown":"There&#39;s a WARNING being logged nowadays.","body":"There&#39;s a WARNING being logged nowadays."},{"owner":{"account_id":45164,"reputation":1854,"user_id":133025,"accept_rate":78,"display_name":"Gordon"},"score":0,"creation_date":1574542514,"post_id":48222934,"comment_id":104271951,"body_markdown":"Does this apply to Spring in general, or only Spring Boot? Can this be disabled via a @Configuration-annotated class instead of setting a property?","body":"Does this apply to Spring in general, or only Spring Boot? Can this be disabled via a @Configuration-annotated class instead of setting a property?"},{"owner":{"account_id":261678,"reputation":2513,"user_id":546016,"accept_rate":69,"display_name":"ymajoros"},"score":2,"creation_date":1580458743,"post_id":48222934,"comment_id":106111542,"body_markdown":"It isn&#39;t an anti-pattern. It does have performance impacts, sometimes negative, a lot of times quite neutral, and in a positive way in a lot of cases: if you actually want a lazy relation to begin with, you don&#39;t need to do the query in all cases and can avoid it when needed by using open-in-view.","body":"It isn&#39;t an anti-pattern. It does have performance impacts, sometimes negative, a lot of times quite neutral, and in a positive way in a lot of cases: if you actually want a lazy relation to begin with, you don&#39;t need to do the query in all cases and can avoid it when needed by using open-in-view."},{"owner":{"account_id":158376,"reputation":1589,"user_id":376960,"accept_rate":76,"display_name":"Igor"},"score":3,"creation_date":1581448315,"post_id":48222934,"comment_id":106434845,"body_markdown":"Just in case you decide to add `spring.jpa.open-in-view=false`, make sure to properly restart your spring-boot-application rather than just having it auto-reload. If you do the latter, you will be notified of an already existing open-in-view `@ConditionalOnProperty`. See https://www.yawintutor.com/conditionalonproperty-found-different-open-in-view/. Restarting the server manually helped in my case.","body":"Just in case you decide to add <code>spring.jpa.open-in-view=false</code>, make sure to properly restart your spring-boot-application rather than just having it auto-reload. If you do the latter, you will be notified of an already existing open-in-view <code>@ConditionalOnProperty</code>. See <a href=\"https://www.yawintutor.com/conditionalonproperty-found-different-open-in-view/\" rel=\"nofollow noreferrer\">yawintutor.com/&hellip;</a>. Restarting the server manually helped in my case."},{"owner":{"account_id":1936529,"reputation":1132,"user_id":1743867,"display_name":"seal"},"score":0,"creation_date":1590791498,"post_id":48222934,"comment_id":109825138,"body_markdown":"@Igor I don&#39;t have any view layer in my spring boot application. That means the application has only bunch of rest controllers. And I also checked that the `OpenEntityManagerInViewInterceptor` has never been initialised. Does that mean that the when the application serve the html that time only this bean has created ?","body":"@Igor I don&#39;t have any view layer in my spring boot application. That means the application has only bunch of rest controllers. And I also checked that the <code>OpenEntityManagerInViewInterceptor</code> has never been initialised. Does that mean that the when the application serve the html that time only this bean has created ?"},{"owner":{"account_id":158376,"reputation":1589,"user_id":376960,"accept_rate":76,"display_name":"Igor"},"score":0,"creation_date":1590836738,"post_id":48222934,"comment_id":109835173,"body_markdown":"@seal since I don&#39;t exactly know what you mean, your best bet might be a new dedicated question. I remember solving my issue by restarting the server manually rather than relying on auto-reload. I&#39;m sorry I can&#39;t help you more.","body":"@seal since I don&#39;t exactly know what you mean, your best bet might be a new dedicated question. I remember solving my issue by restarting the server manually rather than relying on auto-reload. I&#39;m sorry I can&#39;t help you more."},{"owner":{"account_id":42147,"reputation":16251,"user_id":2326914,"accept_rate":33,"display_name":"Rog&#233;rio"},"score":6,"creation_date":1598292173,"post_id":48222934,"comment_id":112405520,"body_markdown":"Not convinced, at all. Personally, I don&#39;t really like OSIV, but the reasons given here are just false. 1) &quot;Auto-commit puts pressure on the database server because each statement must flush the transaction log to disk, therefore causing a lot of I/O traffic on the database side.&quot;, no, the RDBMS is not so dumb - this claim is given without any evidence, and from experience I know it doesn&#39;t occurr. 2) &quot;There is no separation of concerns anymore&quot;, non-sense, since those JDBC statements are generated transparently and implicitly; ...","body":"Not convinced, at all. Personally, I don&#39;t really like OSIV, but the reasons given here are just false. 1) &quot;Auto-commit puts pressure on the database server because each statement must flush the transaction log to disk, therefore causing a lot of I/O traffic on the database side.&quot;, no, the RDBMS is not so dumb - this claim is given without any evidence, and from experience I know it doesn&#39;t occurr. 2) &quot;There is no separation of concerns anymore&quot;, non-sense, since those JDBC statements are generated transparently and implicitly; ..."},{"owner":{"account_id":42147,"reputation":16251,"user_id":2326914,"accept_rate":33,"display_name":"Rog&#233;rio"},"score":1,"creation_date":1598292594,"post_id":48222934,"comment_id":112405713,"body_markdown":"... 3) N+1 problem only occurs if developers don&#39;t know what they are doing - usually loading lazy collections from the UI is fine, and can/should be avoided by explicit fetching where needed. 4) &quot;connection lease time ... limits overall transaction throughput&quot;, also not a real problem, unless you have an application with more concurrent requests than OSIV can handle (and this often is not the case for business apps), for which there are several solutions. In short, this answer only speculates on potential problems which will rarely, if ever, occur in practice, while providing no alternative.","body":"... 3) N+1 problem only occurs if developers don&#39;t know what they are doing - usually loading lazy collections from the UI is fine, and can/should be avoided by explicit fetching where needed. 4) &quot;connection lease time ... limits overall transaction throughput&quot;, also not a real problem, unless you have an application with more concurrent requests than OSIV can handle (and this often is not the case for business apps), for which there are several solutions. In short, this answer only speculates on potential problems which will rarely, if ever, occur in practice, while providing no alternative."},{"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"score":10,"creation_date":1598334693,"post_id":48222934,"comment_id":112416646,"body_markdown":"1) You&#39;re wrong, of course. Every Tx will issue a commit that will be processed by the DB. So, it&#39;s an extra overhead since, in 2PL, read-locks must be released while in MVCC, SI snapshots can be discarded. This is DB 101. 2) Again, wrong. JDBC has nothing to do with it. It&#39;s about which layer controls the transaction boundaries. 3) Wrong again. N+1 can occur via OSIV or FetchType.EAGER, not just lazy collections. 4) Again, wrong. This one is proven mathematically by the [Universal Scalability Law](http://www.perfdynamics.com/Manifesto/USLscalability.html). You should read it too ;)","body":"1) You&#39;re wrong, of course. Every Tx will issue a commit that will be processed by the DB. So, it&#39;s an extra overhead since, in 2PL, read-locks must be released while in MVCC, SI snapshots can be discarded. This is DB 101. 2) Again, wrong. JDBC has nothing to do with it. It&#39;s about which layer controls the transaction boundaries. 3) Wrong again. N+1 can occur via OSIV or FetchType.EAGER, not just lazy collections. 4) Again, wrong. This one is proven mathematically by the <a href=\"http://www.perfdynamics.com/Manifesto/USLscalability.html\" rel=\"nofollow noreferrer\">Universal Scalability Law</a>. You should read it too ;)"},{"owner":{"account_id":13300046,"reputation":139,"user_id":9601809,"display_name":"sanemain"},"score":1,"creation_date":1610459278,"post_id":48222934,"comment_id":116135183,"body_markdown":"@VladMihalcea About the point 1): If the entity is fetched in a service method annotated with &quot;@Transactional&quot;, read-locks will also be released in a Tx. So, with or without OSIV, that will occur. So, I do not get the difference here. Can you please assist? Is it more performant to release multiple read locks in one transaction than releasing individually in separate transactions?","body":"@VladMihalcea About the point 1): If the entity is fetched in a service method annotated with &quot;@Transactional&quot;, read-locks will also be released in a Tx. So, with or without OSIV, that will occur. So, I do not get the difference here. Can you please assist? Is it more performant to release multiple read locks in one transaction than releasing individually in separate transactions?"},{"owner":{"account_id":9346423,"reputation":1452,"user_id":6937584,"display_name":"cdalxndr"},"score":0,"creation_date":1621720752,"post_id":48222934,"comment_id":119582365,"body_markdown":"Encountered a connection pool starvation issue because of OSIV: https://github.com/spring-projects/spring-boot/issues/26638","body":"Encountered a connection pool starvation issue because of OSIV: <a href=\"https://github.com/spring-projects/spring-boot/issues/26638\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/issues/26638</a>"},{"owner":{"account_id":34247,"reputation":1973,"user_id":96617,"accept_rate":78,"display_name":"Lluis Martinez"},"score":0,"creation_date":1665687266,"post_id":48222934,"comment_id":130763464,"body_markdown":"You copy and paste the same in every question about the OSIV. Why?","body":"You copy and paste the same in every question about the OSIV. Why?"}],"tags":[],"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"comment_count":12,"down_vote_count":4,"up_vote_count":572,"is_accepted":false,"score":568,"last_activity_date":1626233988,"creation_date":1515748471,"answer_id":48222934,"question_id":30549489,"body_markdown":"The OSIV Anti-Pattern\r\n---------------------\r\n\r\nInstead of letting the business layer decide how it’s best to fetch all the associations that are needed by the View layer, OSIV (Open Session in View) forces the Persistence Context to stay open so that the View layer can trigger the Proxy initialization, as illustrated by the following diagram.\r\n\r\n[![OSIV Anti-Pattern][1]](https://vladmihalcea.com/the-open-session-in-view-anti-pattern/)\r\n\r\n* The `OpenSessionInViewFilter` calls the `openSession` method of the underlying `SessionFactory` and obtains a new `Session`.\r\n* The `Session` is bound to the [`TransactionSynchronizationManager`](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/transaction/support/TransactionSynchronizationManager.html).\r\n* The `OpenSessionInViewFilter` calls the `doFilter` of the `javax.servlet.FilterChain` object reference and the request is further processed\r\n* The [`DispatcherServlet`](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/DispatcherServlet.html) is called, and it routes the HTTP request to the underlying `PostController`.\r\n* The `PostController` calls the `PostService` to get a list of `Post` entities.\r\n* The `PostService` opens a new transaction, and the `HibernateTransactionManager` reuses the same `Session` that was opened by the `OpenSessionInViewFilter`.\r\n* The `PostDAO` fetches the list of `Post` entities without initializing any lazy association.\r\n* The `PostService` commits the underlying transaction, but the `Session` is not closed because it was opened externally.\r\n* The `DispatcherServlet` starts rendering the UI, which, in turn, navigates the lazy associations and triggers their initialization.\r\n* The `OpenSessionInViewFilter` can close the `Session`, and the underlying database connection is released as well.\r\n\r\nAt first glance, this might not look like a terrible thing to do, but, once you view it from a database perspective, a series of flaws start to become more obvious.\r\n\r\nThe service layer opens and closes a database transaction, but afterward, there is no explicit transaction going on. For this reason, every additional statement issued from the UI rendering phase is executed in auto-commit mode. Auto-commit puts pressure on the database server because each transaction issues a commit at end, which can trigger a transaction log flush to disk. One optimization would be to mark the `Connection` as read-only which would allow the database server to avoid writing to the transaction log.\r\n\r\nThere is no separation of concerns anymore because statements are generated both by the service layer and by the UI rendering process. Writing integration tests that assert the number of statements being generated requires going through all layers (web, service, DAO) while having the application deployed on a web container. Even when using an in-memory database (e.g. HSQLDB) and a lightweight webserver (e.g. Jetty), these integration tests are going to be slower to execute than if layers were separated and the back-end integration tests used the database, while the front-end integration tests were mocking the service layer altogether.\r\n\r\nThe UI layer is limited to navigating associations which can, in turn, trigger N+1 query problems. Although Hibernate offers [`@BatchSize`](https://docs.jboss.org/hibernate/orm/current/javadocs/org/hibernate/annotations/BatchSize.html) for fetching associations in batches, and [`FetchMode.SUBSELECT`](https://docs.jboss.org/hibernate/orm/current/javadocs/org/hibernate/annotations/FetchMode.html#SUBSELECT) to cope with this scenario, the annotations are affecting the default fetch plan, so they get applied to every business use case. For this reason, a data access layer query is much more suitable because it can be tailored to the current use case data fetch requirements.\r\n\r\nLast but not least, the database connection is held throughout the UI rendering phase which increases connection lease time and limits the overall transaction throughput due to congestion on the database connection pool. The more the connection is held, the more other concurrent requests are going to wait to get a connection from the pool.\r\n\r\nSpring Boot and OSIV\r\n--------------------\r\n\r\nUnfortunately, [OSIV (Open Session in View) is enabled by default in Spring Boot](https://github.com/spring-projects/spring-boot/issues/7107), and OSIV is really a bad idea from a performance and scalability perspective.\r\n\r\nSo, make sure that in the `application.properties` configuration file, you have the following entry:\r\n\r\n    spring.jpa.open-in-view=false\r\n\r\nThis will disable OSIV so that you can handle the `LazyInitializationException` the right way.\r\n\r\nStarting with version 2.0, Spring Boot issues [a warning when OSIV][3] is enabled by default, so you can discover this problem long before it affects a production system.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Zy7eB.png\r\n  [3]: https://github.com/spring-projects/spring-boot/issues/7107","title":"What is this spring.jpa.open-in-view=true property in Spring Boot?","body":"<h2 id=\"the-osiv-anti-pattern\">The OSIV Anti-Pattern</h2>\n<p>Instead of letting the business layer decide how it’s best to fetch all the associations that are needed by the View layer, OSIV (Open Session in View) forces the Persistence Context to stay open so that the View layer can trigger the Proxy initialization, as illustrated by the following diagram.</p>\n<p><a href=\"https://vladmihalcea.com/the-open-session-in-view-anti-pattern/\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Zy7eB.png\" alt=\"OSIV Anti-Pattern\" /></a></p>\n<ul>\n<li>The <code>OpenSessionInViewFilter</code> calls the <code>openSession</code> method of the underlying <code>SessionFactory</code> and obtains a new <code>Session</code>.</li>\n<li>The <code>Session</code> is bound to the <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/transaction/support/TransactionSynchronizationManager.html\" rel=\"noreferrer\"><code>TransactionSynchronizationManager</code></a>.</li>\n<li>The <code>OpenSessionInViewFilter</code> calls the <code>doFilter</code> of the <code>javax.servlet.FilterChain</code> object reference and the request is further processed</li>\n<li>The <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/DispatcherServlet.html\" rel=\"noreferrer\"><code>DispatcherServlet</code></a> is called, and it routes the HTTP request to the underlying <code>PostController</code>.</li>\n<li>The <code>PostController</code> calls the <code>PostService</code> to get a list of <code>Post</code> entities.</li>\n<li>The <code>PostService</code> opens a new transaction, and the <code>HibernateTransactionManager</code> reuses the same <code>Session</code> that was opened by the <code>OpenSessionInViewFilter</code>.</li>\n<li>The <code>PostDAO</code> fetches the list of <code>Post</code> entities without initializing any lazy association.</li>\n<li>The <code>PostService</code> commits the underlying transaction, but the <code>Session</code> is not closed because it was opened externally.</li>\n<li>The <code>DispatcherServlet</code> starts rendering the UI, which, in turn, navigates the lazy associations and triggers their initialization.</li>\n<li>The <code>OpenSessionInViewFilter</code> can close the <code>Session</code>, and the underlying database connection is released as well.</li>\n</ul>\n<p>At first glance, this might not look like a terrible thing to do, but, once you view it from a database perspective, a series of flaws start to become more obvious.</p>\n<p>The service layer opens and closes a database transaction, but afterward, there is no explicit transaction going on. For this reason, every additional statement issued from the UI rendering phase is executed in auto-commit mode. Auto-commit puts pressure on the database server because each transaction issues a commit at end, which can trigger a transaction log flush to disk. One optimization would be to mark the <code>Connection</code> as read-only which would allow the database server to avoid writing to the transaction log.</p>\n<p>There is no separation of concerns anymore because statements are generated both by the service layer and by the UI rendering process. Writing integration tests that assert the number of statements being generated requires going through all layers (web, service, DAO) while having the application deployed on a web container. Even when using an in-memory database (e.g. HSQLDB) and a lightweight webserver (e.g. Jetty), these integration tests are going to be slower to execute than if layers were separated and the back-end integration tests used the database, while the front-end integration tests were mocking the service layer altogether.</p>\n<p>The UI layer is limited to navigating associations which can, in turn, trigger N+1 query problems. Although Hibernate offers <a href=\"https://docs.jboss.org/hibernate/orm/current/javadocs/org/hibernate/annotations/BatchSize.html\" rel=\"noreferrer\"><code>@BatchSize</code></a> for fetching associations in batches, and <a href=\"https://docs.jboss.org/hibernate/orm/current/javadocs/org/hibernate/annotations/FetchMode.html#SUBSELECT\" rel=\"noreferrer\"><code>FetchMode.SUBSELECT</code></a> to cope with this scenario, the annotations are affecting the default fetch plan, so they get applied to every business use case. For this reason, a data access layer query is much more suitable because it can be tailored to the current use case data fetch requirements.</p>\n<p>Last but not least, the database connection is held throughout the UI rendering phase which increases connection lease time and limits the overall transaction throughput due to congestion on the database connection pool. The more the connection is held, the more other concurrent requests are going to wait to get a connection from the pool.</p>\n<h2 id=\"spring-boot-and-osiv\">Spring Boot and OSIV</h2>\n<p>Unfortunately, <a href=\"https://github.com/spring-projects/spring-boot/issues/7107\" rel=\"noreferrer\">OSIV (Open Session in View) is enabled by default in Spring Boot</a>, and OSIV is really a bad idea from a performance and scalability perspective.</p>\n<p>So, make sure that in the <code>application.properties</code> configuration file, you have the following entry:</p>\n<pre><code>spring.jpa.open-in-view=false\n</code></pre>\n<p>This will disable OSIV so that you can handle the <code>LazyInitializationException</code> the right way.</p>\n<p>Starting with version 2.0, Spring Boot issues <a href=\"https://github.com/spring-projects/spring-boot/issues/7107\" rel=\"noreferrer\">a warning when OSIV</a> is enabled by default, so you can discover this problem long before it affects a production system.</p>\n"},{"tags":[],"owner":{"account_id":5532352,"reputation":1512,"user_id":4391948,"accept_rate":78,"display_name":"Rogelio Blanco"},"comment_count":0,"down_vote_count":1,"up_vote_count":23,"is_accepted":false,"score":22,"last_activity_date":1642719158,"creation_date":1642719158,"answer_id":70794381,"question_id":30549489,"body_markdown":"Probably is late, but I was trying to dig more about the implications of turning it OFF vs. ON, and I found this article useful [spring-open-session-in-view][1]\r\n\r\nHope this can help somebody...\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-open-session-in-view","title":"What is this spring.jpa.open-in-view=true property in Spring Boot?","body":"<p>Probably is late, but I was trying to dig more about the implications of turning it OFF vs. ON, and I found this article useful <a href=\"https://www.baeldung.com/spring-open-session-in-view\" rel=\"noreferrer\">spring-open-session-in-view</a></p>\n<p>Hope this can help somebody...</p>\n"},{"tags":[],"owner":{"account_id":87230,"reputation":36826,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691558062,"creation_date":1691558062,"answer_id":76864764,"question_id":30549489,"body_markdown":"The one reason for open-in-view (for OSIV) is for developer productivity as it eliminates the need to explicitly load all their lazily loaded properties.\r\n\r\nhttps://stackoverflow.com/a/76864391/242042 shows a way of doing that explicit load.  With `open-in-view` off to prevent the LazyInitializationException.\r\n\r\nHowever, it makes *every* controller mapping that does a JPA operation start a transaction and thus may cause exhaustion on the database connections.\r\n\r\nAnother way (also considered an anti-pattern) is to tell Hibernate to allow lazy loading without a transaction by adding.\r\n\r\n```\r\nspring:\r\n  jpa:\r\n    properties:\r\n      hibernate.enable_lazy_load_no_trans: true\r\n```\r\n\r\nIn terms of developer productivity it is the same, but in terms of performance this may be slightly better as it will only start the transaction if the object needs to lazily load after the fact.\r\n\r\nObviously the correct approach would be to do `join fetch` or `@EntityGraph` but that adds to the complexity for the developer.  But that can be a performance improvement afterwards.\r\n\r\nIn my opinion use the `hibernate.enable_lazy_load_no_trans` and turn off `open-in-view` but find places where the `enable_lazy_load_no_trans` capability is triggered ([ideally via a log](https://stackoverflow.com/questions/76864762/how-do-i-log-when-hibernate-lazily-loads-data-outside-a-transaction-when-enable)) and correct it.","title":"What is this spring.jpa.open-in-view=true property in Spring Boot?","body":"<p>The one reason for open-in-view (for OSIV) is for developer productivity as it eliminates the need to explicitly load all their lazily loaded properties.</p>\n<p><a href=\"https://stackoverflow.com/a/76864391/242042\">https://stackoverflow.com/a/76864391/242042</a> shows a way of doing that explicit load.  With <code>open-in-view</code> off to prevent the LazyInitializationException.</p>\n<p>However, it makes <em>every</em> controller mapping that does a JPA operation start a transaction and thus may cause exhaustion on the database connections.</p>\n<p>Another way (also considered an anti-pattern) is to tell Hibernate to allow lazy loading without a transaction by adding.</p>\n<pre><code>spring:\n  jpa:\n    properties:\n      hibernate.enable_lazy_load_no_trans: true\n</code></pre>\n<p>In terms of developer productivity it is the same, but in terms of performance this may be slightly better as it will only start the transaction if the object needs to lazily load after the fact.</p>\n<p>Obviously the correct approach would be to do <code>join fetch</code> or <code>@EntityGraph</code> but that adds to the complexity for the developer.  But that can be a performance improvement afterwards.</p>\n<p>In my opinion use the <code>hibernate.enable_lazy_load_no_trans</code> and turn off <code>open-in-view</code> but find places where the <code>enable_lazy_load_no_trans</code> capability is triggered (<a href=\"https://stackoverflow.com/questions/76864762/how-do-i-log-when-hibernate-lazily-loads-data-outside-a-transaction-when-enable\">ideally via a log</a>) and correct it.</p>\n"}],"owner":{"account_id":1920479,"reputation":7969,"user_id":1732123,"accept_rate":89,"display_name":"Carlos Alberto"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":266187,"favorite_count":0,"down_vote_count":0,"up_vote_count":284,"accepted_answer_id":30554785,"answer_count":4,"score":284,"last_activity_date":1691558062,"creation_date":1433008688,"question_id":30549489,"body_markdown":"I saw `spring.jpa.open-in-view=true` property in Spring Boot documentation for JPA configuration.\r\n\r\n - Is the `true` default value for this property if it&#39;s not provided at all?;\r\n - What does this really do? I did not find any good explaining for it;\r\n - Does it make you use `SessionFactory` instead of `EntityManagerFactory`? If yes, how can I tell it to allow me to use `EntityManagerFactory` instead?\r\n\r\nThanks!","title":"What is this spring.jpa.open-in-view=true property in Spring Boot?","body":"<p>I saw <code>spring.jpa.open-in-view=true</code> property in Spring Boot documentation for JPA configuration.</p>\n\n<ul>\n<li>Is the <code>true</code> default value for this property if it's not provided at all?;</li>\n<li>What does this really do? I did not find any good explaining for it;</li>\n<li>Does it make you use <code>SessionFactory</code> instead of <code>EntityManagerFactory</code>? If yes, how can I tell it to allow me to use <code>EntityManagerFactory</code> instead?</li>\n</ul>\n\n<p>Thanks!</p>\n"},{"tags":["java","spring-boot","rest","service","controller"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1691492310,"post_id":76858587,"comment_id":135495977,"body_markdown":"Research projections.","body":"Research projections."}],"answers":[{"comments":[{"owner":{"account_id":5912501,"reputation":3,"user_id":4652260,"display_name":"Mahadi Hasan"},"score":0,"creation_date":1691496492,"post_id":76858802,"comment_id":135496902,"body_markdown":"Hello @Karsten, this is for dependent dropdown. \nFirst dropdown will give me the list of all countries. Upon selection, for example, USA,\n2nd dropdown will return a list of all states of USA. Now let&#39;s select NY,\n3rd dropdown will return all the cities of NY. \n\nSo, in order to return the list of all countries, can it be done without writing a query? \n\nHonestly speaking, I am a fresher in spring boot and find it pretty complex about what code to write to where. I will be happy if you guide me through this process.","body":"Hello @Karsten, this is for dependent dropdown.  First dropdown will give me the list of all countries. Upon selection, for example, USA, 2nd dropdown will return a list of all states of USA. Now let&#39;s select NY, 3rd dropdown will return all the cities of NY.   So, in order to return the list of all countries, can it be done without writing a query?   Honestly speaking, I am a fresher in spring boot and find it pretty complex about what code to write to where. I will be happy if you guide me through this process."},{"owner":{"account_id":5912501,"reputation":3,"user_id":4652260,"display_name":"Mahadi Hasan"},"score":0,"creation_date":1691498663,"post_id":76858802,"comment_id":135497388,"body_markdown":"To make this easy for you, here is my github link https://github.com/Mahadijava/my_world.  I&#39;ve also added the database file name myworld.sql.  Could you please see the code and help me for a better solution?","body":"To make this easy for you, here is my github link <a href=\"https://github.com/Mahadijava/my_world\" rel=\"nofollow noreferrer\">github.com/Mahadijava/my_world</a>.  I&#39;ve also added the database file name myworld.sql.  Could you please see the code and help me for a better solution?"},{"owner":{"account_id":15519832,"reputation":1026,"user_id":11478354,"display_name":"dcolazin"},"score":0,"creation_date":1691504669,"post_id":76858802,"comment_id":135498872,"body_markdown":"return countryService.getCountries().stream().map(Country::getName).toList(); and the other snippet are really bad ideas: you are querying several (all!) db tables where instead it should be just a select on one table.","body":"return countryService.getCountries().stream().map(Country::getName)&zwnj;&#8203;.toList(); and the other snippet are really bad ideas: you are querying several (all!) db tables where instead it should be just a select on one table."},{"owner":{"account_id":29176687,"reputation":332,"user_id":22351796,"display_name":"Karsten"},"score":0,"creation_date":1691505492,"post_id":76858802,"comment_id":135499079,"body_markdown":"I know, but it would be the easiest solution for this problem.","body":"I know, but it would be the easiest solution for this problem."},{"owner":{"account_id":5912501,"reputation":3,"user_id":4652260,"display_name":"Mahadi Hasan"},"score":0,"creation_date":1691561202,"post_id":76858802,"comment_id":135506470,"body_markdown":"@Karsten, I am so glad with your help. But there&#39;s something needs clarification. Could you please elaborate the code about when to use _ and why? Why cannot I write **findByCountryId** ?\n `List&lt;StateView&gt; findByCountry_countryId(String id); // The _ is necessary to prevent from searching a property countryCountryId. We want country.countrId instead.`","body":"@Karsten, I am so glad with your help. But there&#39;s something needs clarification. Could you please elaborate the code about when to use _ and why? Why cannot I write <b>findByCountryId</b> ?  <code>List&lt;StateView&gt; findByCountry_countryId(String id); &#47;&#47; The _ is necessary to prevent from searching a property countryCountryId. We want country.countrId instead.</code>"},{"owner":{"account_id":29176687,"reputation":332,"user_id":22351796,"display_name":"Karsten"},"score":0,"creation_date":1691566928,"post_id":76858802,"comment_id":135507415,"body_markdown":"This is because countryId isn&#39;t a direct property of State. Its a nested property: country.countryId. Maybe the method will work as findByCountryCountryId too, but to ensure spring data jpa is aware of being countryId a nested property you add a _.","body":"This is because countryId isn&#39;t a direct property of State. Its a nested property: country.countryId. Maybe the method will work as findByCountryCountryId too, but to ensure spring data jpa is aware of being countryId a nested property you add a _."}],"tags":[],"owner":{"account_id":29176687,"reputation":332,"user_id":22351796,"display_name":"Karsten"},"comment_count":6,"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1691557793,"creation_date":1691491642,"answer_id":76858802,"question_id":76858587,"body_markdown":"@Mahadi Hasan I&#39;ve checked your code.\r\n\r\nFirst of all, you should write some REST methods solving your problem for the web application:\r\n\r\n```\r\n@GetMapping(&quot;/countries&quot;)\r\npublic List&lt;CountryView&gt; getAllCountries()\r\n{\r\n    ...\r\n}\r\n\r\n@GetMapping(&quot;/countries/{id}/states&quot;)\r\npublic List&lt;StateView&gt; getStatesByCountry(@PathVariable(&quot;id&quot;) String countryId)\r\n{\r\n    ...\r\n}\r\n\r\n@GetMapping(&quot;/states/{id}/cities&quot;)\r\npublic List&lt;CityView&gt; getCitiesByCountry(@PathVariable(&quot;id&quot;) Long stateId)\r\n{\r\n    ...\r\n}\r\n```\r\nSo, now we know what we want from the database. We could use projections to exactly fetch this data. Projections are a means to directly wrap the results from queries into specialized DTOs.\r\n\r\nFinally I found a proper solution:\r\n\r\n# Repository methods:\r\n\r\n```\r\nList&lt;CountryView&gt; findAllBy(); // The &#39;By&#39; is necessary to differentiate from findAll()\r\n\r\nList&lt;StateView&gt; findByCountry_countryId(String id); // The _ is necessary to prevent from searching a property countryCountryId. We want country.countrId instead.\r\n\r\nList&lt;CityView&gt; findByState_stateId(Long id); // Same as above here\r\n```\r\n\r\nFirst I tried with unidirectional relationships. This led to a somewhat inefficient approach because I had to write a query with a JOIN. I found out that this works better with bidirectional relationships as you have foreseen in your entities already.\r\n\r\n# Projections\r\n```\r\npublic interface CountryView {\r\n    String getCountryId();\r\n    String getCountry();\r\n}\r\n\r\npublic interface StateView {\r\n    Long getStateId();\r\n    String getState();\r\n}\r\n\r\npublic interface CityView {\r\n    Long getCiyId();\r\n    String getCity();\r\n}\r\n```\r\n\r\nNow you can fill in the repository calls into the controller code. I omit the service layer here. You&#39;ll manage this for your own.\r\n\r\nIf you enable SQL logging you&#39;ll see that you get simple efficient queries.\r\n\r\nNext you should consider to use the same name and type for your ids and names. If your entities would each have a Long id and String name, you could go with a single projection.","title":"Calling country API returns whole database in spring boot instead of only countries","body":"<p>@Mahadi Hasan I've checked your code.</p>\n<p>First of all, you should write some REST methods solving your problem for the web application:</p>\n<pre><code>@GetMapping(&quot;/countries&quot;)\npublic List&lt;CountryView&gt; getAllCountries()\n{\n    ...\n}\n\n@GetMapping(&quot;/countries/{id}/states&quot;)\npublic List&lt;StateView&gt; getStatesByCountry(@PathVariable(&quot;id&quot;) String countryId)\n{\n    ...\n}\n\n@GetMapping(&quot;/states/{id}/cities&quot;)\npublic List&lt;CityView&gt; getCitiesByCountry(@PathVariable(&quot;id&quot;) Long stateId)\n{\n    ...\n}\n</code></pre>\n<p>So, now we know what we want from the database. We could use projections to exactly fetch this data. Projections are a means to directly wrap the results from queries into specialized DTOs.</p>\n<p>Finally I found a proper solution:</p>\n<h1>Repository methods:</h1>\n<pre><code>List&lt;CountryView&gt; findAllBy(); // The 'By' is necessary to differentiate from findAll()\n\nList&lt;StateView&gt; findByCountry_countryId(String id); // The _ is necessary to prevent from searching a property countryCountryId. We want country.countrId instead.\n\nList&lt;CityView&gt; findByState_stateId(Long id); // Same as above here\n</code></pre>\n<p>First I tried with unidirectional relationships. This led to a somewhat inefficient approach because I had to write a query with a JOIN. I found out that this works better with bidirectional relationships as you have foreseen in your entities already.</p>\n<h1>Projections</h1>\n<pre><code>public interface CountryView {\n    String getCountryId();\n    String getCountry();\n}\n\npublic interface StateView {\n    Long getStateId();\n    String getState();\n}\n\npublic interface CityView {\n    Long getCiyId();\n    String getCity();\n}\n</code></pre>\n<p>Now you can fill in the repository calls into the controller code. I omit the service layer here. You'll manage this for your own.</p>\n<p>If you enable SQL logging you'll see that you get simple efficient queries.</p>\n<p>Next you should consider to use the same name and type for your ids and names. If your entities would each have a Long id and String name, you could go with a single projection.</p>\n"}],"owner":{"account_id":5912501,"reputation":3,"user_id":4652260,"display_name":"Mahadi Hasan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":227,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76858802,"answer_count":1,"score":0,"last_activity_date":1691557793,"creation_date":1691489766,"question_id":76858587,"body_markdown":"I want to return only countries from country table by calling an API in spring boot. But it returns all the countries along with all the states and cities related with every country and city in the world. Here&#39;s my code. \r\n\r\n```\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Entity\r\npublic class Country {\r\n    @Id\r\n    @Column (name = &quot;countryid&quot;)\r\n    private String countryId;\r\n    @Column (name = &quot;country&quot;)\r\n    private String country;\r\n\r\n    @OneToMany(mappedBy = &quot;country&quot;, cascade = CascadeType.ALL, orphanRemoval = true )\r\n    @JsonManagedReference\r\n    private List&lt;State&gt;states = new ArrayList&lt;&gt;();\r\n}\r\n```\r\n\r\n```\r\npublic interface CountryRepository extends JpaRepository&lt;Country, String&gt; {\r\n}\r\n```\r\n\r\n```\r\n@Service\r\npublic class CountryService {\r\n    @Autowired\r\n    CountryRepository countryRepository;\r\n\r\n    public List&lt;Country&gt; getallCountries(){\r\n\r\n        return countryRepository.findAll();\r\n    }\r\n}\r\n```\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/country&quot;)\r\n@CrossOrigin(origins = &quot;http://localhost:8080&quot;, allowCredentials = &quot;true&quot;)\r\n\r\npublic class CountryController {\r\n    @Autowired\r\n    CountryService countryService;\r\n\r\n    @GetMapping\r\n    List&lt;Country&gt; getAllCountries(){\r\n\r\n        return  countryService.getallCountries();\r\n    }\r\n}\r\n```\r\nWhen I called **http://localhost:8080/country**, it returned the **whole database**. \r\n\r\nThis is my country table and I want to return only country column by calling the api above. How to do that? \r\n\r\n| countryid | country |\r\n| -------- | -------- |\r\n| BRA   | Brazil  |\r\n| CHN   | China   |\r\n| IND   | India   |\r\n| USA   | USA     |\r\n","title":"Calling country API returns whole database in spring boot instead of only countries","body":"<p>I want to return only countries from country table by calling an API in spring boot. But it returns all the countries along with all the states and cities related with every country and city in the world. Here's my code.</p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\npublic class Country {\n    @Id\n    @Column (name = &quot;countryid&quot;)\n    private String countryId;\n    @Column (name = &quot;country&quot;)\n    private String country;\n\n    @OneToMany(mappedBy = &quot;country&quot;, cascade = CascadeType.ALL, orphanRemoval = true )\n    @JsonManagedReference\n    private List&lt;State&gt;states = new ArrayList&lt;&gt;();\n}\n</code></pre>\n<pre><code>public interface CountryRepository extends JpaRepository&lt;Country, String&gt; {\n}\n</code></pre>\n<pre><code>@Service\npublic class CountryService {\n    @Autowired\n    CountryRepository countryRepository;\n\n    public List&lt;Country&gt; getallCountries(){\n\n        return countryRepository.findAll();\n    }\n}\n</code></pre>\n<pre><code>@RestController\n@RequestMapping(&quot;/country&quot;)\n@CrossOrigin(origins = &quot;http://localhost:8080&quot;, allowCredentials = &quot;true&quot;)\n\npublic class CountryController {\n    @Autowired\n    CountryService countryService;\n\n    @GetMapping\n    List&lt;Country&gt; getAllCountries(){\n\n        return  countryService.getallCountries();\n    }\n}\n</code></pre>\n<p>When I called <strong>http://localhost:8080/country</strong>, it returned the <strong>whole database</strong>.</p>\n<p>This is my country table and I want to return only country column by calling the api above. How to do that?</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>countryid</th>\n<th>country</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>BRA</td>\n<td>Brazil</td>\n</tr>\n<tr>\n<td>CHN</td>\n<td>China</td>\n</tr>\n<tr>\n<td>IND</td>\n<td>India</td>\n</tr>\n<tr>\n<td>USA</td>\n<td>USA</td>\n</tr>\n</tbody>\n</table>\n</div>"},{"tags":["java","tree"],"comments":[{"owner":{"account_id":55508,"reputation":12373,"user_id":166247,"display_name":"Ashalynd"},"score":2,"creation_date":1381604591,"post_id":19338009,"comment_id":28647885,"body_markdown":"just traverse all the children from left to right, the rest is the same","body":"just traverse all the children from left to right, the rest is the same"},{"owner":{"account_id":2134591,"reputation":24672,"user_id":1894684,"accept_rate":80,"display_name":"An SO User"},"score":0,"creation_date":1381604764,"post_id":19338009,"comment_id":28647935,"body_markdown":"@Ashalynd Please have a look at my answer","body":"@Ashalynd Please have a look at my answer"},{"owner":{"account_id":55508,"reputation":12373,"user_id":166247,"display_name":"Ashalynd"},"score":1,"creation_date":1381604859,"post_id":19338009,"comment_id":28647967,"body_markdown":"yes, that was what I meant","body":"yes, that was what I meant"}],"answers":[{"comments":[{"owner":{"account_id":967624,"reputation":10828,"user_id":990750,"accept_rate":50,"display_name":"Tarik"},"score":8,"creation_date":1381604941,"post_id":19338057,"comment_id":28647996,"body_markdown":"This will do postorder traversal. Putting the printData before the for loop would cause a preorder traversal.","body":"This will do postorder traversal. Putting the printData before the for loop would cause a preorder traversal."}],"tags":[],"owner":{"account_id":2134591,"reputation":24672,"user_id":1894684,"accept_rate":80,"display_name":"An SO User"},"comment_count":1,"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1381605060,"creation_date":1381604749,"answer_id":19338057,"question_id":19338009,"body_markdown":"In a non-binary tree, there will be a `Vector` or some other structure that has references to all the children. Make a recursive method as so:  \r\n\r\n    public void traverse(Node child){ // post order traversal\r\n    \tfor(Node each : child.getChildren()){\r\n    \t\ttraverse(each);\r\n    \t}\r\n    \tthis.printData();\r\n    }\r\n\r\nSomething along those lines.\r\n","title":"traversing a non binary tree in java","body":"<p>In a non-binary tree, there will be a <code>Vector</code> or some other structure that has references to all the children. Make a recursive method as so:  </p>\n\n<pre><code>public void traverse(Node child){ // post order traversal\n    for(Node each : child.getChildren()){\n        traverse(each);\n    }\n    this.printData();\n}\n</code></pre>\n\n<p>Something along those lines.</p>\n"},{"comments":[{"owner":{"account_id":9858905,"reputation":240,"user_id":7302562,"display_name":"Duke"},"score":1,"creation_date":1649533154,"post_id":19338059,"comment_id":126901487,"body_markdown":"You never &quot;need to use recursion&quot;. There&#39;s no such thing as recursion on machine level, so the compiler, at latest, will produce an iterative solution. Cf. for postorder: https://www.geeksforgeeks.org/iterative-postorder-traversal-of-n-ary-tree/","body":"You never &quot;need to use recursion&quot;. There&#39;s no such thing as recursion on machine level, so the compiler, at latest, will produce an iterative solution. Cf. for postorder: <a href=\"https://www.geeksforgeeks.org/iterative-postorder-traversal-of-n-ary-tree/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/iterative-postorder-traversal-of-n-ary-tre&zwnj;&#8203;e</a>"}],"tags":[],"owner":{"account_id":75104,"reputation":12828,"user_id":1025963,"accept_rate":94,"display_name":"Joseph"},"comment_count":1,"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1381604762,"creation_date":1381604762,"answer_id":19338059,"question_id":19338009,"body_markdown":"You&#39;ll need to use recursion since you can&#39;t determine how many children are at each node (breadth) or how far the tree goes (depth). Depending on how you want to traverse, you can use  [Breadth-first-search](http://en.wikipedia.org/wiki/Breadth-first_search) or [Depth-first-search](http://en.wikipedia.org/wiki/Depth-first_search). \r\n\r\nThere is a ton of information on this topic, so give it an attempt to implement one of these recursive methods and please come back if you have trouble along the way!","title":"traversing a non binary tree in java","body":"<p>You'll need to use recursion since you can't determine how many children are at each node (breadth) or how far the tree goes (depth). Depending on how you want to traverse, you can use  <a href=\"http://en.wikipedia.org/wiki/Breadth-first_search\">Breadth-first-search</a> or <a href=\"http://en.wikipedia.org/wiki/Depth-first_search\">Depth-first-search</a>. </p>\n\n<p>There is a ton of information on this topic, so give it an attempt to implement one of these recursive methods and please come back if you have trouble along the way!</p>\n"},{"comments":[{"owner":{"account_id":75104,"reputation":12828,"user_id":1025963,"accept_rate":94,"display_name":"Joseph"},"score":0,"creation_date":1381604864,"post_id":19338066,"comment_id":28647972,"body_markdown":"Hi Tarik- I&#39;m not sure what you mean by `You would do the recursive calls in a for loop`- in what way can a for loop perform such recursive calls? It is iterative, no?","body":"Hi Tarik- I&#39;m not sure what you mean by <code>You would do the recursive calls in a for loop</code>- in what way can a for loop perform such recursive calls? It is iterative, no?"},{"owner":{"account_id":2134591,"reputation":24672,"user_id":1894684,"accept_rate":80,"display_name":"An SO User"},"score":0,"creation_date":1381605168,"post_id":19338066,"comment_id":28648060,"body_markdown":"@Joseph Have a look at my pseudo-code :)","body":"@Joseph Have a look at my pseudo-code :)"},{"owner":{"account_id":75104,"reputation":12828,"user_id":1025963,"accept_rate":94,"display_name":"Joseph"},"score":0,"creation_date":1381605221,"post_id":19338066,"comment_id":28648076,"body_markdown":"Thanks, I understand what Tarik meant not- not that the `for` loop is recursive, but that the recursive calls are made within a for loop. My mistake, thanks!","body":"Thanks, I understand what Tarik meant not- not that the <code>for</code> loop is recursive, but that the recursive calls are made within a for loop. My mistake, thanks!"},{"owner":{"account_id":967624,"reputation":10828,"user_id":990750,"accept_rate":50,"display_name":"Tarik"},"score":0,"creation_date":1381605314,"post_id":19338066,"comment_id":28648099,"body_markdown":"@LittleChild code illustrates what I described. Note that preorder, inorder and postorder are depth first traversals. You need to use a queue to do a breadth first traversal. You did not mention what type of traversal you want to do.","body":"@LittleChild code illustrates what I described. Note that preorder, inorder and postorder are depth first traversals. You need to use a queue to do a breadth first traversal. You did not mention what type of traversal you want to do."},{"owner":{"account_id":2134591,"reputation":24672,"user_id":1894684,"accept_rate":80,"display_name":"An SO User"},"score":0,"creation_date":1381605488,"post_id":19338066,"comment_id":28648145,"body_markdown":"@Tarik BF traversal is a little bit more involved. OP does not mention what type of traversal is needed. If the OP clarifies, I  will upload a code snippet for DF traversal. \n*Shouldn&#39;t there be two Vectors for left and right children ?*","body":"@Tarik BF traversal is a little bit more involved. OP does not mention what type of traversal is needed. If the OP clarifies, I  will upload a code snippet for DF traversal.  <i>Shouldn&#39;t there be two Vectors for left and right children ?</i>"}],"tags":[],"owner":{"account_id":967624,"reputation":10828,"user_id":990750,"accept_rate":50,"display_name":"Tarik"},"comment_count":5,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1492953377,"creation_date":1381604813,"answer_id":19338066,"question_id":19338009,"body_markdown":"Well, when traversing a binary tree, in preorder, you visit the parent node, then recursively traverse the left subtree then recursively traverse the right subtree. With a tree with more than two children, you recursively traverse the subtrees headed by each children. You would do the recursive calls in a for loop.","title":"traversing a non binary tree in java","body":"<p>Well, when traversing a binary tree, in preorder, you visit the parent node, then recursively traverse the left subtree then recursively traverse the right subtree. With a tree with more than two children, you recursively traverse the subtrees headed by each children. You would do the recursive calls in a for loop.</p>\n"},{"tags":[],"owner":{"account_id":162919,"reputation":53273,"user_id":384706,"accept_rate":64,"display_name":"Cratylus"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1381608825,"creation_date":1381608825,"answer_id":19338755,"question_id":19338009,"body_markdown":"The algorithm for pre-post order is the same as a binary tree.  \r\nThere is no such thing as in-order traversal for a general tree i.e. does not make sense (unless *you* define some order)","title":"traversing a non binary tree in java","body":"<p>The algorithm for pre-post order is the same as a binary tree.<br>\nThere is no such thing as in-order traversal for a general tree i.e. does not make sense (unless <em>you</em> define some order)</p>\n"}],"owner":{"account_id":2632272,"reputation":237,"user_id":2277918,"accept_rate":0,"display_name":"user2277918"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28972,"favorite_count":0,"down_vote_count":1,"up_vote_count":17,"answer_count":4,"score":16,"last_activity_date":1691557498,"creation_date":1381604445,"question_id":19338009,"body_markdown":"I have a tree which is a non-binary tree and each node has more than 2 children.\r\n\r\nI am looking for an algorithm to traverse the tree and print nodes, I am really new to learning data structure.\r\n\r\nI know how to traverse a binary tree but I get lost when it comes to traversing a non-binary tree.\r\n\r\nCould anyone give me a hint on how may I change the binary-tree traversal algorithm into a non-binary-tree traversal?\r\n\r\nAssuming that we have the Binary tree traversal code using the DFS algorithm pre-order (Root-Left-Right).\r\n\r\n    public static class Node {\r\n            private Integer val;\r\n            private Node left;\r\n            private Node right;\r\n    // setters and getters\r\n    }\r\n    \r\n    public static void dfsPreOrderTraverseByRecursion(Node root) {\r\n        if(root!=null) {\r\n            System.out.println(root.getVal());\r\n            dfsPreOrderTraverseByRecursion(root.getLeft());\r\n            dfsPreOrderTraverseByRecursion(root.getRight());\r\n        }\r\n    }\r\n\r\n\r\nAnd this binary-tree \r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe above code should print it like this : \r\n\r\n    0\r\n    1\r\n    11\r\n    12\r\n    121\r\n    1211\r\n    122\r\n    2\r\n    21\r\n\r\nIn the case of the non-binary tree.\r\nI need to modify the above code to traverse this tree in a similar way (Root-Left....Right)\r\n[![enter image description here][2]][2]\r\n\r\nWith the new class Node as follows \r\n\r\n    public static class Node {\r\n            private Integer val;\r\n            private List&lt;Node&gt; children;\r\n    // setters and getters\r\n    }\r\n\r\n\r\nAnd print the tree like this: \r\n\r\n    0\r\n    1\r\n    6\r\n    7\r\n    11\r\n    12\r\n    13\r\n    2\r\n    8\r\n    3\r\n    9\r\n    10\r\n    14\r\n    4\r\n\r\n  [1]: https://i.stack.imgur.com/QGzgx.png\r\n  [2]: https://i.stack.imgur.com/q2WpU.png","title":"traversing a non binary tree in java","body":"<p>I have a tree which is a non-binary tree and each node has more than 2 children.</p>\n<p>I am looking for an algorithm to traverse the tree and print nodes, I am really new to learning data structure.</p>\n<p>I know how to traverse a binary tree but I get lost when it comes to traversing a non-binary tree.</p>\n<p>Could anyone give me a hint on how may I change the binary-tree traversal algorithm into a non-binary-tree traversal?</p>\n<p>Assuming that we have the Binary tree traversal code using the DFS algorithm pre-order (Root-Left-Right).</p>\n<pre><code>public static class Node {\n        private Integer val;\n        private Node left;\n        private Node right;\n// setters and getters\n}\n\npublic static void dfsPreOrderTraverseByRecursion(Node root) {\n    if(root!=null) {\n        System.out.println(root.getVal());\n        dfsPreOrderTraverseByRecursion(root.getLeft());\n        dfsPreOrderTraverseByRecursion(root.getRight());\n    }\n}\n</code></pre>\n<p>And this binary-tree</p>\n<p><a href=\"https://i.stack.imgur.com/QGzgx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QGzgx.png\" alt=\"enter image description here\" /></a></p>\n<p>The above code should print it like this :</p>\n<pre><code>0\n1\n11\n12\n121\n1211\n122\n2\n21\n</code></pre>\n<p>In the case of the non-binary tree.\nI need to modify the above code to traverse this tree in a similar way (Root-Left....Right)\n<a href=\"https://i.stack.imgur.com/q2WpU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/q2WpU.png\" alt=\"enter image description here\" /></a></p>\n<p>With the new class Node as follows</p>\n<pre><code>public static class Node {\n        private Integer val;\n        private List&lt;Node&gt; children;\n// setters and getters\n}\n</code></pre>\n<p>And print the tree like this:</p>\n<pre><code>0\n1\n6\n7\n11\n12\n13\n2\n8\n3\n9\n10\n14\n4\n</code></pre>\n"},{"tags":["java","spring","drools"],"owner":{"account_id":24281031,"reputation":27,"user_id":18227544,"display_name":"ignaz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691556145,"creation_date":1691556145,"question_id":76864635,"body_markdown":"I am using drools version 5.3.0, while processing the transactions the Tomcat container stopped working. Below is the loading error message.\r\nPlease help what could be the reason for the error? \r\n\r\n&lt;code&gt;\r\norg.apache.catalina.loader.WebappClassLoaderBase.checkStateForResourceLoading Illegal access: this web application instance has been stopped already. \r\nCould not load [org.jbpm.process.instance.ProcessRuntimeFactoryServiceImpl]. \r\nThe following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\r\n \r\njava.lang.IllegalStateException: Illegal Access: this web application instance has beem stopped already. \r\nCould not load [org.jbpm.process.instance.ProcessRuntimeFactoryServiceImpl]. \r\nThe following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\r\n \r\nat org.apache.catalina.loader.webappClassLoaderBase.checkStateForResourceLoading (WebappClassLoaderBase.java:1435) \r\nat org.apache.catalina.loader.WebappClassLoaderBase.checkStateForClassLoading(WebappClassLoaderBase.java:1423)\r\nat org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1262) \r\nat org.apache.catalina.loader.webappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1223)\r\nat java.lang.Class.forName0(Native Method)\r\nat java.lang.Class.forName(Class.java:264)\r\nat org.drools.util.ServiceRegistryImpl$ReflectionInstantiator.newInstance(ServiceRegistryImpl.java:207)\r\nat org.drools.util.ServiceRegistryImpl$ReflectionInstantiator.call(ServiceRegistryImpl.java:202) \r\nat org.drools.util.ServiceRegistryImpl.get(ServiceRegistryImpl.java:159).\r\nat org.drools.runtime.process. ProcessRuntimeFactory.loadProvider(ProcessRuntimeFactory.java:28)\r\nat org.drools.runtime.process.ProcessRuntimeFactory.getProcessRuntimeFactoryService(ProcessRuntimeFactory.java:21)\r\nat org.drools.runtime.process.ProcessRuntimeFactory.newProcessRuntime(ProcessRuntimeFactory.java:12)\r\nat org.drools.common.AbstractworkingMemory.createProcessRuntime(AbstractWorkingMemory.java:340)\r\nat org.drools.common.AbstractworkingMemory.setKnowledgeRuntime(AbstractWorkingMemory.java:1243) \r\nat org.drools.impl.StatefulKnowledgeSessionImpl.&lt;init&gt;(StatefulKnowledgeSessionImpl.java:117)\r\nat org.drools.impl.StatefulKnowledgeSessionImpl.&lt;init&gt;(StatefulKnowledgeSessionImpl.java:109)\r\nat org.drools.reteoo.ReteooRuleBase.newStatefulSession(ReteooRuleBase.java:403)\r\nat org.drools.reteoo.ReteooRuleBase.newStatefulSession(ReteooRuleBase.java:383)\r\nat org.drools.impl.KnowledgeBaseImpl.newStatefulKnowledgeSession(KnowledgeBaseImpl.java:176) \r\nat org.drools.impl.KnowledgeBaseImpl.newStatefulKnowledgeSession(KnowledgeBaseImpl.java:163)\r\n&lt;/code&gt;","title":"jbpm process terminating web instances","body":"<p>I am using drools version 5.3.0, while processing the transactions the Tomcat container stopped working. Below is the loading error message.\nPlease help what could be the reason for the error?</p>\n<code>\norg.apache.catalina.loader.WebappClassLoaderBase.checkStateForResourceLoading Illegal access: this web application instance has been stopped already. \nCould not load [org.jbpm.process.instance.ProcessRuntimeFactoryServiceImpl]. \nThe following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\n \njava.lang.IllegalStateException: Illegal Access: this web application instance has beem stopped already. \nCould not load [org.jbpm.process.instance.ProcessRuntimeFactoryServiceImpl]. \nThe following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\n \nat org.apache.catalina.loader.webappClassLoaderBase.checkStateForResourceLoading (WebappClassLoaderBase.java:1435) \nat org.apache.catalina.loader.WebappClassLoaderBase.checkStateForClassLoading(WebappClassLoaderBase.java:1423)\nat org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1262) \nat org.apache.catalina.loader.webappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1223)\nat java.lang.Class.forName0(Native Method)\nat java.lang.Class.forName(Class.java:264)\nat org.drools.util.ServiceRegistryImpl$ReflectionInstantiator.newInstance(ServiceRegistryImpl.java:207)\nat org.drools.util.ServiceRegistryImpl$ReflectionInstantiator.call(ServiceRegistryImpl.java:202) \nat org.drools.util.ServiceRegistryImpl.get(ServiceRegistryImpl.java:159).\nat org.drools.runtime.process. ProcessRuntimeFactory.loadProvider(ProcessRuntimeFactory.java:28)\nat org.drools.runtime.process.ProcessRuntimeFactory.getProcessRuntimeFactoryService(ProcessRuntimeFactory.java:21)\nat org.drools.runtime.process.ProcessRuntimeFactory.newProcessRuntime(ProcessRuntimeFactory.java:12)\nat org.drools.common.AbstractworkingMemory.createProcessRuntime(AbstractWorkingMemory.java:340)\nat org.drools.common.AbstractworkingMemory.setKnowledgeRuntime(AbstractWorkingMemory.java:1243) \nat org.drools.impl.StatefulKnowledgeSessionImpl.(StatefulKnowledgeSessionImpl.java:117)\nat org.drools.impl.StatefulKnowledgeSessionImpl.(StatefulKnowledgeSessionImpl.java:109)\nat org.drools.reteoo.ReteooRuleBase.newStatefulSession(ReteooRuleBase.java:403)\nat org.drools.reteoo.ReteooRuleBase.newStatefulSession(ReteooRuleBase.java:383)\nat org.drools.impl.KnowledgeBaseImpl.newStatefulKnowledgeSession(KnowledgeBaseImpl.java:176) \nat org.drools.impl.KnowledgeBaseImpl.newStatefulKnowledgeSession(KnowledgeBaseImpl.java:163)\n</code>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":11163581,"reputation":1050,"user_id":8192914,"display_name":"ganjaam"},"score":0,"creation_date":1691579207,"post_id":76864608,"comment_id":135509912,"body_markdown":"the drive link you provided is currently inaccessible.","body":"the drive link you provided is currently inaccessible."}],"owner":{"account_id":29160039,"reputation":1,"user_id":22339005,"display_name":"Irshad Madappat"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691555693,"creation_date":1691555693,"question_id":76864608,"body_markdown":"I&#39;m trying to figure out a way to layout a series of views around a circle. I need to achieve Recycler view scrolling 360 degree I am attaching my current result. but in this code the arc not scrolling as 360 degree and it giving margin between each items. Kindly help me to fix the issue. Your help will be appreciated.\r\n\r\n\r\n\r\n\r\n```\r\n  @Override\r\n    public void onLayoutChildren(RecyclerView.Recycler recycler, RecyclerView.State state) {\r\n        super.onLayoutChildren(recycler, state);\r\n        fill(recycler, state); // fill with child views based on the current state &amp; position\r\n    }\r\n    \r\n    private void fill(RecyclerView.Recycler recycler, RecyclerView.State state) {\r\n        if (recycler == null || state == null) return;\r\n        detachAndScrapAttachedViews(recycler); \r\n        for(int i = 0; i &lt; getItemCount(); i++)\r\n        {\r\n            View view = recycler.getViewForPosition(i); \r\n            addView(view);\r\n            int viewWidth = (int) pxFromDp(context, 60f);\r\n            int viewHeight = (int) pxFromDp(context, 60f);\r\n            float left = (i * viewWidth) - horizontalOffset;\r\n            float right = left + viewWidth;\r\n            Pair&lt;Integer, Double&gt; top = computeYComponent((left + right) / 2, viewHeight);\r\n            float bottom = top.first + viewHeight;\r\n            double alpha = top.second; \r\n            view.setRotation(((float)(alpha * (180 / Math.PI))) - 85f);\r\n            measureChildWithMargins(view, viewWidth, viewHeight);\r\n            layoutDecoratedWithMargins(view, (int) left, top.first, (int) right, (int) bottom);\r\n        }\r\n        List&lt;RecyclerView.ViewHolder&gt; scrapList = recycler.getScrapList();\r\n        for (RecyclerView.ViewHolder viewHolder : scrapList) {\r\n            recycler.recycleView(viewHolder.itemView);\r\n        }\r\n    }\r\n\r\n    // determines how much you need to push an item downwards\r\n    private Pair&lt;Integer, Double&gt; computeYComponent(float viewCenterX, float h /* height */) {\r\n        int screenWidth = context.getResources().getDisplayMetrics().widthPixels;\r\n        double s = ((double) screenWidth) / 6;\r\n        double radius = (h * h + s * s) / (h * 2); \r\n        double xScreenFraction = (double) viewCenterX / (double) screenWidth;\r\n        double beta = Math.acos(s / radius); \r\n        double curvatureFactor = 1.75; \r\n        double alpha = beta + (curvatureFactor * xScreenFraction * (Math.PI - (0.0 * beta)));\r\n        double yComponent = radius - (radius * Math.sin(alpha)); // vertical component of the position of the circle\r\n        return new Pair&lt;&gt;((int) yComponent, alpha);\r\n    }\r\n    private float pxFromDp(Context context, float dp) {\r\n        return (dp * context.getResources().getDisplayMetrics().density);\r\n    }\r\n```\r\n\r\n\r\nhttps://i.stack.imgur.com/ZDWS3.png\r\n\r\n\r\nExpected Result - https://drive.google.com/file/d/1TGBb4m98J3_IUZBOTfrE2l8QIasLx8u-/view?usp=drive_link","title":"Arc Recyclerview with 360 degree scrolling","body":"<p>I'm trying to figure out a way to layout a series of views around a circle. I need to achieve Recycler view scrolling 360 degree I am attaching my current result. but in this code the arc not scrolling as 360 degree and it giving margin between each items. Kindly help me to fix the issue. Your help will be appreciated.</p>\n<pre><code>  @Override\n    public void onLayoutChildren(RecyclerView.Recycler recycler, RecyclerView.State state) {\n        super.onLayoutChildren(recycler, state);\n        fill(recycler, state); // fill with child views based on the current state &amp; position\n    }\n    \n    private void fill(RecyclerView.Recycler recycler, RecyclerView.State state) {\n        if (recycler == null || state == null) return;\n        detachAndScrapAttachedViews(recycler); \n        for(int i = 0; i &lt; getItemCount(); i++)\n        {\n            View view = recycler.getViewForPosition(i); \n            addView(view);\n            int viewWidth = (int) pxFromDp(context, 60f);\n            int viewHeight = (int) pxFromDp(context, 60f);\n            float left = (i * viewWidth) - horizontalOffset;\n            float right = left + viewWidth;\n            Pair&lt;Integer, Double&gt; top = computeYComponent((left + right) / 2, viewHeight);\n            float bottom = top.first + viewHeight;\n            double alpha = top.second; \n            view.setRotation(((float)(alpha * (180 / Math.PI))) - 85f);\n            measureChildWithMargins(view, viewWidth, viewHeight);\n            layoutDecoratedWithMargins(view, (int) left, top.first, (int) right, (int) bottom);\n        }\n        List&lt;RecyclerView.ViewHolder&gt; scrapList = recycler.getScrapList();\n        for (RecyclerView.ViewHolder viewHolder : scrapList) {\n            recycler.recycleView(viewHolder.itemView);\n        }\n    }\n\n    // determines how much you need to push an item downwards\n    private Pair&lt;Integer, Double&gt; computeYComponent(float viewCenterX, float h /* height */) {\n        int screenWidth = context.getResources().getDisplayMetrics().widthPixels;\n        double s = ((double) screenWidth) / 6;\n        double radius = (h * h + s * s) / (h * 2); \n        double xScreenFraction = (double) viewCenterX / (double) screenWidth;\n        double beta = Math.acos(s / radius); \n        double curvatureFactor = 1.75; \n        double alpha = beta + (curvatureFactor * xScreenFraction * (Math.PI - (0.0 * beta)));\n        double yComponent = radius - (radius * Math.sin(alpha)); // vertical component of the position of the circle\n        return new Pair&lt;&gt;((int) yComponent, alpha);\n    }\n    private float pxFromDp(Context context, float dp) {\n        return (dp * context.getResources().getDisplayMetrics().density);\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ZDWS3.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/ZDWS3.png</a></p>\n<p>Expected Result - <a href=\"https://drive.google.com/file/d/1TGBb4m98J3_IUZBOTfrE2l8QIasLx8u-/view?usp=drive_link\" rel=\"nofollow noreferrer\">https://drive.google.com/file/d/1TGBb4m98J3_IUZBOTfrE2l8QIasLx8u-/view?usp=drive_link</a></p>\n"},{"tags":["java","yaml","spring-boot-configuration"],"comments":[{"owner":{"account_id":8781643,"reputation":25950,"user_id":6565093,"accept_rate":47,"display_name":"pvpkiran"},"score":0,"creation_date":1492640514,"post_id":43506319,"comment_id":74068766,"body_markdown":"may be this will help \nhttp://stackoverflow.com/questions/32593014/mapping-list-in-yaml-to-list-of-objects-in-spring-boot","body":"may be this will help  <a href=\"http://stackoverflow.com/questions/32593014/mapping-list-in-yaml-to-list-of-objects-in-spring-boot\" title=\"mapping list in yaml to list of objects in spring boot\">stackoverflow.com/questions/32593014/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":10723862,"reputation":117,"user_id":7892071,"display_name":"Manjunath"},"score":1,"creation_date":1492714143,"post_id":43513778,"comment_id":74108267,"body_markdown":"As I had mentioned in the description, I tried it, but no luck. It still has the same default values 0, false, false.","body":"As I had mentioned in the description, I tried it, but no luck. It still has the same default values 0, false, false."},{"owner":{"account_id":10723862,"reputation":117,"user_id":7892071,"display_name":"Manjunath"},"score":0,"creation_date":1538349713,"post_id":43513778,"comment_id":92100900,"body_markdown":"The issue in the earlier yml was the space, The below YML worked fine.","body":"The issue in the earlier yml was the space, The below YML worked fine."},{"owner":{"account_id":977258,"reputation":3591,"user_id":997977,"accept_rate":36,"display_name":"Juan Rada"},"score":0,"creation_date":1568226665,"post_id":43513778,"comment_id":102211141,"body_markdown":"@Manjunath then kindly, please flag this as the answer :)","body":"@Manjunath then kindly, please flag this as the answer :)"}],"tags":[],"owner":{"account_id":8781643,"reputation":25950,"user_id":6565093,"accept_rate":47,"display_name":"pvpkiran"},"comment_count":3,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1572114341,"creation_date":1492675780,"answer_id":43513778,"question_id":43506319,"body_markdown":"change your yml to   \r\n\r\n    promotionPolicies : \r\n      policies: \r\n        P001NN:\r\n                expiryPeriodInDays: 16\r\n                reusable: true\r\n                resetExpiry: false\r\n        P001YN:\r\n                expiryPeriodInDays: 1\r\n                reusable: true\r\n                resetExpiry: false\r\n        P001NY:\r\n                expiryPeriodInDays: 1\r\n                reusable: false\r\n                resetExpiry: true","title":"Map yaml to object hashmap in SpringBoot","body":"<p>change your yml to   </p>\n\n<pre><code>promotionPolicies : \n  policies: \n    P001NN:\n            expiryPeriodInDays: 16\n            reusable: true\n            resetExpiry: false\n    P001YN:\n            expiryPeriodInDays: 1\n            reusable: true\n            resetExpiry: false\n    P001NY:\n            expiryPeriodInDays: 1\n            reusable: false\n            resetExpiry: true\n</code></pre>\n"},{"comments":[{"owner":{"account_id":159844,"reputation":1066,"user_id":379495,"accept_rate":92,"display_name":"Jonathan Rioux"},"score":0,"creation_date":1623093301,"post_id":52584276,"comment_id":119976011,"body_markdown":"That&#39;s unlikely the cause of the issue.","body":"That&#39;s unlikely the cause of the issue."}],"tags":[],"owner":{"account_id":10723862,"reputation":117,"user_id":7892071,"display_name":"Manjunath"},"comment_count":1,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1538365060,"creation_date":1538365060,"answer_id":52584276,"question_id":43506319,"body_markdown":"The problem was with the spaces, the below yml works fine. The spaces after the text and : was required \r\n\r\n    promotionPolicies : \r\n        policies : \r\n            P001NN :\r\n                PromotionPolicy :\r\n                    expiryPeriodInDays: 16\r\n                    reusable: true\r\n                    resetExpiry: false\r\n            P001YN :\r\n                PromotionPolicy :\r\n                    expiryPeriodInDays:1\r\n                    reusable:true\r\n                    resetExpiry:false\r\n            P001NY :\r\n                PromotionPolicy :\r\n                    expiryPeriodInDays:1\r\n                    reusable:false\r\n                    resetExpiry:true","title":"Map yaml to object hashmap in SpringBoot","body":"<p>The problem was with the spaces, the below yml works fine. The spaces after the text and : was required </p>\n\n<pre><code>promotionPolicies : \n    policies : \n        P001NN :\n            PromotionPolicy :\n                expiryPeriodInDays: 16\n                reusable: true\n                resetExpiry: false\n        P001YN :\n            PromotionPolicy :\n                expiryPeriodInDays:1\n                reusable:true\n                resetExpiry:false\n        P001NY :\n            PromotionPolicy :\n                expiryPeriodInDays:1\n                reusable:false\n                resetExpiry:true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2554339,"reputation":537,"user_id":2765978,"accept_rate":67,"display_name":"csf"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1565557315,"creation_date":1565557315,"answer_id":57453589,"question_id":43506319,"body_markdown":" - This worked for me \r\n \r\nYML: \r\n\r\n    property-name: &#39;{\r\n      key1: &quot;value1&quot;,\r\n      key2: &quot;value2&quot;\r\n    }&#39;\r\n\r\nSpring Boot:\r\n\r\n      @Value(&quot;#{${property-name}}&quot;)\r\n      private Map&lt;String,String&gt; myMap;\r\n\r\nfound the answer thanks to : https://relentlesscoding.com/2018/09/09/spring-basics-dynamically-inject-values-with-springs-value/","title":"Map yaml to object hashmap in SpringBoot","body":"<ul>\n<li>This worked for me </li>\n</ul>\n\n<p>YML: </p>\n\n<pre><code>property-name: '{\n  key1: \"value1\",\n  key2: \"value2\"\n}'\n</code></pre>\n\n<p>Spring Boot:</p>\n\n<pre><code>  @Value(\"#{${property-name}}\")\n  private Map&lt;String,String&gt; myMap;\n</code></pre>\n\n<p>found the answer thanks to : <a href=\"https://relentlesscoding.com/2018/09/09/spring-basics-dynamically-inject-values-with-springs-value/\" rel=\"noreferrer\">https://relentlesscoding.com/2018/09/09/spring-basics-dynamically-inject-values-with-springs-value/</a></p>\n"},{"tags":[],"owner":{"account_id":4593918,"reputation":1,"user_id":3726542,"display_name":"Pritesh Pawar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1601013700,"creation_date":1601013700,"answer_id":64058658,"question_id":43506319,"body_markdown":"\t\t\tpromotionPolicies : \r\n\t\t\t  policies: \r\n\t\t\t\tP001NN:\r\n\t\t\t\t\t\texpiryPeriodInDays: 16\r\n\t\t\t\t\t\treusable: true\r\n\t\t\t\t\t\tresetExpiry: false\r\n\t\t\t\tP001YN:\r\n\t\t\t\t\t\texpiryPeriodInDays: 1\r\n\t\t\t\t\t\treusable: true\r\n\t\t\t\t\t\tresetExpiry: false\r\n\t\t\t\tP001NY:\r\n\t\t\t\t\t\texpiryPeriodInDays: 1\r\n\t\t\t\t\t\treusable: false\r\n\t\t\t\t\t\tresetExpiry: true\r\n\r\nJava code :\r\n\r\n\t\t\t//Used lambok and spring annotation\r\n\t\t\t@Data\r\n\t\t\t@Configuration\r\n\t\t\t@ConfigurationProperties(prefix = &quot;promotionPolicies&quot;)\r\n\t\t\t@NoArgsConstructor\r\n\t\t\t@AllArgsConstructor\r\n\t\t\tpublic class PromotionPolicies {\r\n\t\t\t\tprivate Map&lt;String, Map&lt;String, String&gt;&gt; policies = new HashMap&lt;&gt;();\r\n\t\t\t}\r\n\r\n\t\t\t\t","title":"Map yaml to object hashmap in SpringBoot","body":"<pre><code>        promotionPolicies : \n          policies: \n            P001NN:\n                    expiryPeriodInDays: 16\n                    reusable: true\n                    resetExpiry: false\n            P001YN:\n                    expiryPeriodInDays: 1\n                    reusable: true\n                    resetExpiry: false\n            P001NY:\n                    expiryPeriodInDays: 1\n                    reusable: false\n                    resetExpiry: true\n</code></pre>\n<p>Java code :</p>\n<pre><code>        //Used lambok and spring annotation\n        @Data\n        @Configuration\n        @ConfigurationProperties(prefix = &quot;promotionPolicies&quot;)\n        @NoArgsConstructor\n        @AllArgsConstructor\n        public class PromotionPolicies {\n            private Map&lt;String, Map&lt;String, String&gt;&gt; policies = new HashMap&lt;&gt;();\n        }\n\n            \n</code></pre>\n"},{"tags":[],"owner":{"account_id":21843877,"reputation":3,"user_id":16441725,"display_name":"Samson Emelyanov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691555593,"creation_date":1691243966,"answer_id":76841987,"question_id":43506319,"body_markdown":"I recently solved a similar problem. In my case a default, i.e. no argument, constructor was required for `PromotionPolicy` class.","title":"Map yaml to object hashmap in SpringBoot","body":"<p>I recently solved a similar problem. In my case a default, i.e. no argument, constructor was required for <code>PromotionPolicy</code> class.</p>\n"}],"owner":{"account_id":10723862,"reputation":117,"user_id":7892071,"display_name":"Manjunath"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45487,"favorite_count":0,"down_vote_count":1,"up_vote_count":11,"answer_count":5,"score":10,"last_activity_date":1691555593,"creation_date":1492637043,"question_id":43506319,"body_markdown":"I am trying to Map the yml file to a HashMap with String Key and PromotionPolicy value in my Spring boot application and using the default spring boot implementation to parse the values, but the PromotionPolicy object only contains the default values [0, false, false] for all instances when I try to read values from the Map. \r\n\r\nMy yml is :\r\n \r\n    promotionPolicies : \r\n        policies: \r\n            P001NN:\r\n                PromotionPolicy:\r\n                    expiryPeriodInDays: 16\r\n                    reusable: true\r\n                    resetExpiry: false\r\n            P001YN:\r\n                PromotionPolicy:\r\n                    expiryPeriodInDays:1\r\n                    reusable:true\r\n                    resetExpiry:false\r\n            P001NY:\r\n                PromotionPolicy:\r\n                    expiryPeriodInDays:1\r\n                    reusable:false\r\n                    resetExpiry:true\r\n\r\nThe Model I have is : \r\n\r\n    public class PromotionPolicy {\r\n\r\n\tprivate int expiryPeriodInDays;\r\n\tprivate boolean reusable;\r\n\tprivate boolean resetExpiry;\r\n\t\r\n\tpublic int getExpiryPeriodInDays() {\r\n\t\treturn expiryPeriodInDays;\r\n\t}\r\n\tpublic void setExpiryPeriodInDays(int expiryPeriodInDays) {\r\n\t\tthis.expiryPeriodInDays = expiryPeriodInDays;\r\n\t}\r\n\tpublic boolean isReusable() {\r\n\t\treturn reusable;\r\n\t}\r\n\tpublic void setReusable(boolean reusable) {\r\n\t\tthis.reusable = reusable;\r\n\t}\r\n\tpublic boolean isResetExpiry() {\r\n\t\treturn resetExpiry;\r\n\t}\r\n\tpublic void setResetExpiry(boolean resetExpiry) {\r\n\t\tthis.resetExpiry = resetExpiry;\r\n\t}\r\n\t\r\n    }\r\n\r\nThe component java class is as below:\r\n\r\n    @Configuration\r\n    @ConfigurationProperties(prefix = &quot;promotionPolicies&quot;)\r\n    @EnableConfigurationProperties\r\n    @Component\r\n    public class PromotionPolicyConfig {\r\n\r\n\tprivate Map&lt;String, PromotionPolicy&gt; policies = new HashMap&lt;String, PromotionPolicy&gt;();\r\n\r\n\tpublic void setPolicies(Map&lt;String, PromotionPolicy&gt; policies) {\r\n\t\tthis.policies = policies;\r\n\t}\r\n\r\n\tpublic Map&lt;String, PromotionPolicy&gt; getPolicies() {\r\n\t\treturn policies;\r\n\t}\r\n\r\n    }\r\n\r\n\r\nTrying to display values here : \r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/test&quot;)\r\n    public class LoyaltyServiceController {\r\n\r\n\t@Autowired\r\n\tPromotionPolicyConfig promotionPolicyConfig;\r\n\r\n    @RequestMapping(value = &quot;/try&quot;)\r\n    public String tryThis() {\r\n    \tfor (Entry&lt;String, PromotionPolicy&gt; entry : promotionPolicyConfig.getPolicies().entrySet()) {\r\n    \t\tSystem.out.print(entry.getKey() + &quot; : &quot;);\r\n    \t\tSystem.out.print(entry.getValue() + &quot; : &quot;);\r\n    \t\tSystem.out.print(entry.getValue().getExpiryPeriodInDays()  + &quot; : &quot;);\r\n    \t\tSystem.out.print(entry.getValue().isResetExpiry()  + &quot; : &quot;);\r\n    \t\tSystem.out.println(entry.getValue().isReusable()  + &quot; : &quot;);\r\n    \t}\r\n    }\r\n\r\nMy Output is as below:\r\n\r\n    P001NN : com.expedia.www.host.loyalty.model.PromotionPolicy@63a1c99b : 0 : false : false : \r\n    P001YN : com.expedia.www.host.loyalty.model.PromotionPolicy@7892b6b6 : 0 : false : false : \r\n    P001NY : com.expedia.www.host.loyalty.model.PromotionPolicy@459928ab : 0 : false : false : \r\n\r\nwhile I expected the result to contain the values in my yml. \r\nI also tried removing the line &quot;PromotionPolicy:&quot; in my yml, but no luck. \r\n\r\nRequest help understand how can I Map the yml into the Map of custom objects. ","title":"Map yaml to object hashmap in SpringBoot","body":"<p>I am trying to Map the yml file to a HashMap with String Key and PromotionPolicy value in my Spring boot application and using the default spring boot implementation to parse the values, but the PromotionPolicy object only contains the default values [0, false, false] for all instances when I try to read values from the Map. </p>\n\n<p>My yml is :</p>\n\n<pre><code>promotionPolicies : \n    policies: \n        P001NN:\n            PromotionPolicy:\n                expiryPeriodInDays: 16\n                reusable: true\n                resetExpiry: false\n        P001YN:\n            PromotionPolicy:\n                expiryPeriodInDays:1\n                reusable:true\n                resetExpiry:false\n        P001NY:\n            PromotionPolicy:\n                expiryPeriodInDays:1\n                reusable:false\n                resetExpiry:true\n</code></pre>\n\n<p>The Model I have is : </p>\n\n<pre><code>public class PromotionPolicy {\n\nprivate int expiryPeriodInDays;\nprivate boolean reusable;\nprivate boolean resetExpiry;\n\npublic int getExpiryPeriodInDays() {\n    return expiryPeriodInDays;\n}\npublic void setExpiryPeriodInDays(int expiryPeriodInDays) {\n    this.expiryPeriodInDays = expiryPeriodInDays;\n}\npublic boolean isReusable() {\n    return reusable;\n}\npublic void setReusable(boolean reusable) {\n    this.reusable = reusable;\n}\npublic boolean isResetExpiry() {\n    return resetExpiry;\n}\npublic void setResetExpiry(boolean resetExpiry) {\n    this.resetExpiry = resetExpiry;\n}\n\n}\n</code></pre>\n\n<p>The component java class is as below:</p>\n\n<pre><code>@Configuration\n@ConfigurationProperties(prefix = \"promotionPolicies\")\n@EnableConfigurationProperties\n@Component\npublic class PromotionPolicyConfig {\n\nprivate Map&lt;String, PromotionPolicy&gt; policies = new HashMap&lt;String, PromotionPolicy&gt;();\n\npublic void setPolicies(Map&lt;String, PromotionPolicy&gt; policies) {\n    this.policies = policies;\n}\n\npublic Map&lt;String, PromotionPolicy&gt; getPolicies() {\n    return policies;\n}\n\n}\n</code></pre>\n\n<p>Trying to display values here : </p>\n\n<pre><code>@RestController\n@RequestMapping(\"/test\")\npublic class LoyaltyServiceController {\n\n@Autowired\nPromotionPolicyConfig promotionPolicyConfig;\n\n@RequestMapping(value = \"/try\")\npublic String tryThis() {\n    for (Entry&lt;String, PromotionPolicy&gt; entry : promotionPolicyConfig.getPolicies().entrySet()) {\n        System.out.print(entry.getKey() + \" : \");\n        System.out.print(entry.getValue() + \" : \");\n        System.out.print(entry.getValue().getExpiryPeriodInDays()  + \" : \");\n        System.out.print(entry.getValue().isResetExpiry()  + \" : \");\n        System.out.println(entry.getValue().isReusable()  + \" : \");\n    }\n}\n</code></pre>\n\n<p>My Output is as below:</p>\n\n<pre><code>P001NN : com.expedia.www.host.loyalty.model.PromotionPolicy@63a1c99b : 0 : false : false : \nP001YN : com.expedia.www.host.loyalty.model.PromotionPolicy@7892b6b6 : 0 : false : false : \nP001NY : com.expedia.www.host.loyalty.model.PromotionPolicy@459928ab : 0 : false : false : \n</code></pre>\n\n<p>while I expected the result to contain the values in my yml. \nI also tried removing the line \"PromotionPolicy:\" in my yml, but no luck. </p>\n\n<p>Request help understand how can I Map the yml into the Map of custom objects. </p>\n"},{"tags":["java","android","sketchware"],"comments":[{"owner":{"account_id":2225264,"reputation":3565,"user_id":1972388,"accept_rate":77,"display_name":"DevWithZachary"},"score":2,"creation_date":1631615742,"post_id":69176029,"comment_id":122264795,"body_markdown":"The only way your going to be able to do that is to ping a server. Until you actually try to send/receive data your not going to know the speed/stability of a connection","body":"The only way your going to be able to do that is to ping a server. Until you actually try to send/receive data your not going to know the speed/stability of a connection"},{"owner":{"account_id":15831946,"reputation":114,"user_id":11423000,"display_name":"Yo Daniel"},"score":0,"creation_date":1631615990,"post_id":69176029,"comment_id":122264894,"body_markdown":"Thanks I lookup pinging I think it will be able to slove my problem.","body":"Thanks I lookup pinging I think it will be able to slove my problem."},{"owner":{"account_id":11907697,"reputation":732,"user_id":8713823,"display_name":"Islam Alshnawey"},"score":1,"creation_date":1631616483,"post_id":69176029,"comment_id":122265083,"body_markdown":"kindly Find This Solution,  its about pinging, https://medium.com/dsc-alexandria/implementing-internet-connectivity-checker-in-android-apps-bf28230c4e86","body":"kindly Find This Solution,  its about pinging, <a href=\"https://medium.com/dsc-alexandria/implementing-internet-connectivity-checker-in-android-apps-bf28230c4e86\" rel=\"nofollow noreferrer\">medium.com/dsc-alexandria/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":5282904,"reputation":18287,"user_id":4217682,"accept_rate":50,"display_name":"snachmsm"},"score":1,"creation_date":1631620136,"post_id":69176909,"comment_id":122266647,"body_markdown":"this method returns `true` when you are connected to some network (e.g. wifi or ethernet), still this network may be some intranet. besides that this is Kotlin, not Java, which op want to use (due to tag)","body":"this method returns <code>true</code> when you are connected to some network (e.g. wifi or ethernet), still this network may be some intranet. besides that this is Kotlin, not Java, which op want to use (due to tag)"},{"owner":{"account_id":5754036,"reputation":173,"user_id":4542645,"accept_rate":100,"display_name":"programmer dreamer"},"score":0,"creation_date":1679987578,"post_id":69176909,"comment_id":133814868,"body_markdown":"@snachmsm i&#39;m pretty sure it is a java code snippet. ;)","body":"@snachmsm i&#39;m pretty sure it is a java code snippet. ;)"},{"owner":{"account_id":5282904,"reputation":18287,"user_id":4217682,"accept_rate":50,"display_name":"snachmsm"},"score":0,"creation_date":1679989953,"post_id":69176909,"comment_id":133815377,"body_markdown":"@programmerdreamer I&#39;m pretty sure that there was some other comment above mine ;)","body":"@programmerdreamer I&#39;m pretty sure that there was some other comment above mine ;)"}],"tags":[],"owner":{"account_id":18635268,"reputation":99,"user_id":13582324,"display_name":"Alireza Abbasian"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691555121,"creation_date":1631618875,"answer_id":69176909,"question_id":69176029,"body_markdown":"check internet coonnection with this function:\r\n\r\n    Boolean hasInternet(Context context) {\r\n        ConnectivityManager connectivityManager =\r\n                (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n\r\n            Network activeNetwork = connectivityManager.getActiveNetwork();\r\n            NetworkCapabilities capabilities = connectivityManager.getNetworkCapabilities(activeNetwork);\r\n\r\n            if (capabilities != null) {\r\n                if (capabilities.hasTransport(NetworkCapabilities.TRANSPORT_WIFI)) return true;\r\n                else if (capabilities.hasTransport(NetworkCapabilities.TRANSPORT_CELLULAR)) return true;\r\n                else if (capabilities.hasTransport(NetworkCapabilities.TRANSPORT_ETHERNET)) return true;\r\n                else return false;\r\n            }\r\n\r\n        } else {\r\n            try {\r\n                NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\r\n                return networkInfo != null &amp;&amp; networkInfo.isConnected();\r\n            } catch (NullPointerException e) {\r\n                return false;\r\n            }\r\n        }\r\n        return false;\r\n    }","title":"Android how do I check internet connection","body":"<p>check internet coonnection with this function:</p>\n<pre><code>Boolean hasInternet(Context context) {\n    ConnectivityManager connectivityManager =\n            (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n\n        Network activeNetwork = connectivityManager.getActiveNetwork();\n        NetworkCapabilities capabilities = connectivityManager.getNetworkCapabilities(activeNetwork);\n\n        if (capabilities != null) {\n            if (capabilities.hasTransport(NetworkCapabilities.TRANSPORT_WIFI)) return true;\n            else if (capabilities.hasTransport(NetworkCapabilities.TRANSPORT_CELLULAR)) return true;\n            else if (capabilities.hasTransport(NetworkCapabilities.TRANSPORT_ETHERNET)) return true;\n            else return false;\n        }\n\n    } else {\n        try {\n            NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\n            return networkInfo != null &amp;&amp; networkInfo.isConnected();\n        } catch (NullPointerException e) {\n            return false;\n        }\n    }\n    return false;\n}\n</code></pre>\n"}],"owner":{"account_id":15831946,"reputation":114,"user_id":11423000,"display_name":"Yo Daniel"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2903,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1691555121,"creation_date":1631614937,"question_id":69176029,"body_markdown":"I want to be able to get a user internet connection. I have tried\r\n\r\n    boolean connected = false;\r\n        try {\r\n            ConnectivityManager cm = (ConnectivityManager)getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);\r\n            NetworkInfo nInfo = cm.getActiveNetworkInfo();\r\n            connected = nInfo != null &amp;&amp; nInfo.isAvailable() &amp;&amp; nInfo.isConnected();\r\n            return connected;\r\n        } catch (Exception e) {\r\n            Log.e(&quot;Connectivity Exception&quot;, e.getMessage());\r\n        }\r\n        return connected;\r\n   \r\nBut this only gets mobile data and wifi connection status, if the user has an expired data plan or doesn&#39;t even have any data plan I will not be able to know.\r\nI want to know the internet status before making a server call instead of making a server and running in a runout time error.\r\n\r\nPlease help I have checked stack overflow, but I keep getting the same answer.","title":"Android how do I check internet connection","body":"<p>I want to be able to get a user internet connection. I have tried</p>\n<pre><code>boolean connected = false;\n    try {\n        ConnectivityManager cm = (ConnectivityManager)getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);\n        NetworkInfo nInfo = cm.getActiveNetworkInfo();\n        connected = nInfo != null &amp;&amp; nInfo.isAvailable() &amp;&amp; nInfo.isConnected();\n        return connected;\n    } catch (Exception e) {\n        Log.e(&quot;Connectivity Exception&quot;, e.getMessage());\n    }\n    return connected;\n</code></pre>\n<p>But this only gets mobile data and wifi connection status, if the user has an expired data plan or doesn't even have any data plan I will not be able to know.\nI want to know the internet status before making a server call instead of making a server and running in a runout time error.</p>\n<p>Please help I have checked stack overflow, but I keep getting the same answer.</p>\n"},{"tags":["java","selenium","google-chrome","jenkins","selenium-chromedriver"],"comments":[{"owner":{"account_id":8755351,"reputation":2582,"user_id":6547113,"display_name":"anasmi"},"score":1,"creation_date":1572447672,"post_id":58628081,"comment_id":103563881,"body_markdown":"Does this answer your question? [Selenium UnreachableBrowserException - &quot;Could not start a new session&quot; in SoapUI Groovy TestStep](https://stackoverflow.com/questions/30397043/selenium-unreachablebrowserexception-could-not-start-a-new-session-in-soapui)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/30397043/selenium-unreachablebrowserexception-could-not-start-a-new-session-in-soapui\">Selenium UnreachableBrowserException - &quot;Could not start a new session&quot; in SoapUI Groovy TestStep</a>"},{"owner":{"account_id":10829360,"reputation":780,"user_id":7964299,"accept_rate":80,"display_name":"Naveen"},"score":0,"creation_date":1572450150,"post_id":58628081,"comment_id":103565293,"body_markdown":"Check the browser version and the driver version you are using. Both should be compatible with the Selenium version.","body":"Check the browser version and the driver version you are using. Both should be compatible with the Selenium version."}],"answers":[{"comments":[{"owner":{"account_id":14021834,"reputation":111,"user_id":10127878,"display_name":"Moumita Das"},"score":1,"creation_date":1572516843,"post_id":58633257,"comment_id":103587593,"body_markdown":"Thanks. It worked fine for me. Upgraded the level as you suggested. Thanks much :).","body":"Thanks. It worked fine for me. Upgraded the level as you suggested. Thanks much :)."},{"owner":{"account_id":339155,"reputation":8863,"user_id":668455,"accept_rate":80,"display_name":"Tristan"},"score":0,"creation_date":1678984115,"post_id":58633257,"comment_id":133642808,"body_markdown":"&quot;Supports Chrome v67-69&quot; doesn&#39;t mean &quot;Supports Chrome v67 + v68 + v69&quot; ? It&#39;s not a range of versions ?","body":"&quot;Supports Chrome v67-69&quot; doesn&#39;t mean &quot;Supports Chrome v67 + v68 + v69&quot; ? It&#39;s not a range of versions ?"}],"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1572467643,"creation_date":1572467643,"answer_id":58633257,"question_id":58628081,"body_markdown":"This error message...\r\n\r\n\torg.openqa.selenium.remote.UnreachableBrowserException: Could not start a new session. \r\n\tPossible causes are invalid address of the remote server or browser start-up failure.\r\n\r\n...implies that the **ChromeDriver** was unable to initiate/spawn a new **WebBrowser** i.e. **Chrome Browser** session.\r\n\r\nYour main issue possibly is the **incompatibility** between the version of the binaries you are using as follows:\r\n\r\n- You are using _chromedriver=2.41_ \r\n- Release Notes of [_chromedriver=2.41_](https://chromedriver.storage.googleapis.com/2.41/notes.txt) clearly mentions the following :\r\n\r\n&gt;Supports **Chrome v67-69**\r\n\r\n- You are using _chrome= 68.0_\r\n- Your _Selenium Client_ version is **unknown** to us.\r\n- Your _JDK version_ is **unknown** to us.\r\n\r\nSo there might be a mismatch between the _JDK version_ , _Selenium Client version_ , _ChromeDriver v2.41_ and the _Chrome Browser v68.0_\r\n\r\n\r\n----------\r\n\r\n\r\nSolution\r\n--------\r\nEnsure that:\r\n\r\n- _JDK_ is upgraded to  current levels [JDK 8u222](https://www.oracle.com/technetwork/java/javase/downloads/index.html).\r\n- _Selenium_ is upgraded to  current levels [Version 3.141.59](https://docs.seleniumhq.org/download/).\r\n- _ChromeDriver_ is updated to  current [ChromeDriver v78.0](https://chromedriver.storage.googleapis.com/index.html?path=78.0.3904.70/) level.\r\n- _Chrome_ is updated to  current _Chrome Version 78.0_ level. (as per [ChromeDriver v78.0 release notes](https://chromedriver.storage.googleapis.com/78.0.3904.70/notes.txt))\r\n- _Clean_ your _Project Workspace_ through your _IDE_ and _Rebuild_ your project with required dependencies only.\r\n- If your base _Web Client_ version is too old, then uninstall it and install a recent GA and released version of _Web Client_.\r\n- Take a _System Reboot_.\r\n- Execute your `@Test` as **non-root** user.","title":"UnreachableBrowserException: Could not start a new session Possible causes are invalid address of the remote server or browser start-up failure","body":"<p>This error message...</p>\n\n<pre><code>org.openqa.selenium.remote.UnreachableBrowserException: Could not start a new session. \nPossible causes are invalid address of the remote server or browser start-up failure.\n</code></pre>\n\n<p>...implies that the <strong>ChromeDriver</strong> was unable to initiate/spawn a new <strong>WebBrowser</strong> i.e. <strong>Chrome Browser</strong> session.</p>\n\n<p>Your main issue possibly is the <strong>incompatibility</strong> between the version of the binaries you are using as follows:</p>\n\n<ul>\n<li>You are using <em>chromedriver=2.41</em> </li>\n<li>Release Notes of <a href=\"https://chromedriver.storage.googleapis.com/2.41/notes.txt\" rel=\"nofollow noreferrer\"><em>chromedriver=2.41</em></a> clearly mentions the following :</li>\n</ul>\n\n<blockquote>\n  <p>Supports <strong>Chrome v67-69</strong></p>\n</blockquote>\n\n<ul>\n<li>You are using <em>chrome= 68.0</em></li>\n<li>Your <em>Selenium Client</em> version is <strong>unknown</strong> to us.</li>\n<li>Your <em>JDK version</em> is <strong>unknown</strong> to us.</li>\n</ul>\n\n<p>So there might be a mismatch between the <em>JDK version</em> , <em>Selenium Client version</em> , <em>ChromeDriver v2.41</em> and the <em>Chrome Browser v68.0</em></p>\n\n<hr>\n\n<h2>Solution</h2>\n\n<p>Ensure that:</p>\n\n<ul>\n<li><em>JDK</em> is upgraded to  current levels <a href=\"https://www.oracle.com/technetwork/java/javase/downloads/index.html\" rel=\"nofollow noreferrer\">JDK 8u222</a>.</li>\n<li><em>Selenium</em> is upgraded to  current levels <a href=\"https://docs.seleniumhq.org/download/\" rel=\"nofollow noreferrer\">Version 3.141.59</a>.</li>\n<li><em>ChromeDriver</em> is updated to  current <a href=\"https://chromedriver.storage.googleapis.com/index.html?path=78.0.3904.70/\" rel=\"nofollow noreferrer\">ChromeDriver v78.0</a> level.</li>\n<li><em>Chrome</em> is updated to  current <em>Chrome Version 78.0</em> level. (as per <a href=\"https://chromedriver.storage.googleapis.com/78.0.3904.70/notes.txt\" rel=\"nofollow noreferrer\">ChromeDriver v78.0 release notes</a>)</li>\n<li><em>Clean</em> your <em>Project Workspace</em> through your <em>IDE</em> and <em>Rebuild</em> your project with required dependencies only.</li>\n<li>If your base <em>Web Client</em> version is too old, then uninstall it and install a recent GA and released version of <em>Web Client</em>.</li>\n<li>Take a <em>System Reboot</em>.</li>\n<li>Execute your <code>@Test</code> as <strong>non-root</strong> user.</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":7356801,"reputation":390,"user_id":5601285,"accept_rate":38,"display_name":"Suraj Gupta"},"score":0,"creation_date":1650371226,"post_id":71545058,"comment_id":127094525,"body_markdown":"Is it idle to wait for 20 minutes for test case to run.\n\nI am facing this issue only on remote execution on Perfecto,Brwoserstack.\nOn Local environment this works fine.","body":"Is it idle to wait for 20 minutes for test case to run.  I am facing this issue only on remote execution on Perfecto,Brwoserstack. On Local environment this works fine."},{"owner":{"account_id":16353733,"reputation":21,"user_id":11811482,"display_name":"Saurabh"},"score":0,"creation_date":1661262609,"post_id":71545058,"comment_id":129726644,"body_markdown":"You can specify your own.","body":"You can specify your own."}],"tags":[],"owner":{"account_id":16353733,"reputation":21,"user_id":11811482,"display_name":"Saurabh"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647763287,"creation_date":1647763287,"answer_id":71545058,"question_id":58628081,"body_markdown":"The reason why this happens.\r\n\r\n - When the test does not get executed within 3 minutes(Default timing) then it will throw the exception of browser startup failure.\r\n\r\nSolution:-\r\nChange the way to create RemoteWebDriver.\r\n\r\n      ClientConfig config = ClientConfig.defaultConfig().connectionTimeout(Duration.ofMinutes(20))\r\n    .readTimeout(Duration.ofMinutes(20)); // I change this 3 minute(Default) to 20 minutes.\r\n\r\n    WebDriver remoteWebDriver = RemoteWebDriver.builder().oneOf(caps).address(gridUrl).config(config).build(); // now you can use this remoteWebDriver.\r\n\r\n","title":"UnreachableBrowserException: Could not start a new session Possible causes are invalid address of the remote server or browser start-up failure","body":"<p>The reason why this happens.</p>\n<ul>\n<li>When the test does not get executed within 3 minutes(Default timing) then it will throw the exception of browser startup failure.</li>\n</ul>\n<p>Solution:-\nChange the way to create RemoteWebDriver.</p>\n<pre><code>  ClientConfig config = ClientConfig.defaultConfig().connectionTimeout(Duration.ofMinutes(20))\n.readTimeout(Duration.ofMinutes(20)); // I change this 3 minute(Default) to 20 minutes.\n\nWebDriver remoteWebDriver = RemoteWebDriver.builder().oneOf(caps).address(gridUrl).config(config).build(); // now you can use this remoteWebDriver.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17295469,"reputation":137,"user_id":12526239,"display_name":"Yasin Bekar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658983241,"creation_date":1658983241,"answer_id":73147358,"question_id":58628081,"body_markdown":"I have checked that the:\r\n   - path is incorrect, \r\n   - the path had .exe extension for mac driver\r\n   - typo on the path, I had a comma instead of dot webdriver.chrome,driver\r\n\r\nLastly, it could be the compatibility issue but all worked fine after checking above items","title":"UnreachableBrowserException: Could not start a new session Possible causes are invalid address of the remote server or browser start-up failure","body":"<p>I have checked that the:</p>\n<ul>\n<li>path is incorrect,</li>\n<li>the path had .exe extension for mac driver</li>\n<li>typo on the path, I had a comma instead of dot webdriver.chrome,driver</li>\n</ul>\n<p>Lastly, it could be the compatibility issue but all worked fine after checking above items</p>\n"},{"tags":[],"owner":{"account_id":25978739,"reputation":11,"user_id":19692824,"display_name":"Ahmed"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659626912,"creation_date":1659626834,"answer_id":73238532,"question_id":58628081,"body_markdown":"For mac, there are 2 option for chrome driver \r\n[chromedriver mac 1 or 2][1]\r\n1. \tchromedriver_mac64.zip OR 2. chromedriver_mac64_m1.zip\r\n\r\nNow, Go to file &gt; Right click and &quot;Open with terminal&quot; &gt; Provide required access.\r\n[open in terminal][2]\r\nNow, run command &quot;mvn clean install&quot; again, It works.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wlhKc.png\r\n  [2]: https://i.stack.imgur.com/NwLXT.png","title":"UnreachableBrowserException: Could not start a new session Possible causes are invalid address of the remote server or browser start-up failure","body":"<p>For mac, there are 2 option for chrome driver\n<a href=\"https://i.stack.imgur.com/wlhKc.png\" rel=\"nofollow noreferrer\">chromedriver mac 1 or 2</a></p>\n<ol>\n<li>chromedriver_mac64.zip OR 2. chromedriver_mac64_m1.zip</li>\n</ol>\n<p>Now, Go to file &gt; Right click and &quot;Open with terminal&quot; &gt; Provide required access.\n<a href=\"https://i.stack.imgur.com/NwLXT.png\" rel=\"nofollow noreferrer\">open in terminal</a>\nNow, run command &quot;mvn clean install&quot; again, It works.</p>\n"},{"tags":[],"owner":{"account_id":1841986,"reputation":580,"user_id":1671221,"display_name":"Manikandan Periyasamy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684463201,"creation_date":1684463201,"answer_id":76285628,"question_id":58628081,"body_markdown":"Actually, the error is bit inappropriate. I too had the same issue but while using GRID and the problems were two.\r\n\r\n1. Selenium GRID / server version and the selenium lib used in code are different versions (4.9.0 and 4.8.3)\r\n[Selenium server version img][1]\r\n[Selenium lib in code img][2]\r\n\r\n2. Capability values were incorrect - Incorrect platform was chosen\r\nWIN10 instead of WIN11\r\n        `DesiredCapabilities cap = new DesiredCapabilities();\r\ncap.setPlatform(Platform.WIN10);\r\n\t\tcap.setBrowserName(&quot;chrome&quot;);\r\n\t\tWebDriver driver = new RemoteWebDriver(new URL(&quot;http://localhost:4444/wd/hub&quot;), cap);`\r\n\r\n  [1]: https://i.stack.imgur.com/iaD5r.png\r\n  [2]: https://i.stack.imgur.com/hM3y6.png","title":"UnreachableBrowserException: Could not start a new session Possible causes are invalid address of the remote server or browser start-up failure","body":"<p>Actually, the error is bit inappropriate. I too had the same issue but while using GRID and the problems were two.</p>\n<ol>\n<li><p>Selenium GRID / server version and the selenium lib used in code are different versions (4.9.0 and 4.8.3)\n<a href=\"https://i.stack.imgur.com/iaD5r.png\" rel=\"nofollow noreferrer\">Selenium server version img</a>\n<a href=\"https://i.stack.imgur.com/hM3y6.png\" rel=\"nofollow noreferrer\">Selenium lib in code img</a></p>\n</li>\n<li><p>Capability values were incorrect - Incorrect platform was chosen\nWIN10 instead of WIN11\n<code>DesiredCapabilities cap = new DesiredCapabilities(); cap.setPlatform(Platform.WIN10); cap.setBrowserName(&quot;chrome&quot;); WebDriver driver = new RemoteWebDriver(new URL(&quot;http://localhost:4444/wd/hub&quot;), cap);</code></p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":4062093,"reputation":1003,"user_id":3338349,"display_name":"MichaelM"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689688587,"creation_date":1689688587,"answer_id":76713551,"question_id":58628081,"body_markdown":"I experienced a similar issue to this when I was using the image `selenium/standalone-chrome:114.0` and explicitly setting the browser version in the Java code\r\n\r\n```java\r\nChromeOptions chromeOptions = new ChromeOptions();\r\n\r\nchromeOptions.setBrowserVersion(browserVersion);\r\n```\r\n\r\nThis was causing the issue whenever the `browserVersion` was malformed, which includes when the version was `114` without the trailing `.0`. The solution was to simply set the browser version to exactly `114.0`.","title":"UnreachableBrowserException: Could not start a new session Possible causes are invalid address of the remote server or browser start-up failure","body":"<p>I experienced a similar issue to this when I was using the image <code>selenium/standalone-chrome:114.0</code> and explicitly setting the browser version in the Java code</p>\n<pre class=\"lang-java prettyprint-override\"><code>ChromeOptions chromeOptions = new ChromeOptions();\n\nchromeOptions.setBrowserVersion(browserVersion);\n</code></pre>\n<p>This was causing the issue whenever the <code>browserVersion</code> was malformed, which includes when the version was <code>114</code> without the trailing <code>.0</code>. The solution was to simply set the browser version to exactly <code>114.0</code>.</p>\n"},{"tags":[],"owner":{"account_id":3162993,"reputation":1,"user_id":2673576,"display_name":"user2673576"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691554644,"creation_date":1691554644,"answer_id":76864544,"question_id":58628081,"body_markdown":"When ever you see error as following .... then that is mostly because of your dependencies mismatch. To avoid this please try to use latest versions of your dependencies\r\n\r\nError:\r\n\r\n    org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.\r\n\r\n**Possible dependencies:**\r\n\r\n - java-client \r\n - selenium-java [Note: selenium-java will have\r\n   selenium-support so if your pom having both then you can remove\r\n   selenium-support dependency from pom \r\n - selenium-support\r\n\r\n","title":"UnreachableBrowserException: Could not start a new session Possible causes are invalid address of the remote server or browser start-up failure","body":"<p>When ever you see error as following .... then that is mostly because of your dependencies mismatch. To avoid this please try to use latest versions of your dependencies</p>\n<p>Error:</p>\n<pre><code>org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.\n</code></pre>\n<p><strong>Possible dependencies:</strong></p>\n<ul>\n<li>java-client</li>\n<li>selenium-java [Note: selenium-java will have\nselenium-support so if your pom having both then you can remove\nselenium-support dependency from pom</li>\n<li>selenium-support</li>\n</ul>\n"}],"owner":{"account_id":14021834,"reputation":111,"user_id":10127878,"display_name":"Moumita Das"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86371,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":58633257,"answer_count":7,"score":3,"last_activity_date":1691554644,"creation_date":1572447122,"question_id":58628081,"body_markdown":"I am new to selenium. Able to configure selenium set up on Ubuntu.Configuration details given below:\r\n\r\n- Google Chrome 68.0.3440.84 \r\n- ChromeDriver 2.41.578700 (2f1ed5f9343c13f73144538f15c00b370eda6706)\r\n- Jenkins ver. 2.193\r\n- ubuntu-18.04\r\n- Selenium 3.13.0\r\n- OpenJDK 1.8\r\n- Doc referred for selenium set up : https://tecadmin.net/setup-selenium-chromedriver-on-ubuntu/\r\n\r\nBut every run I am getting below error on jenkins :\r\n\r\n    Opening chrome driver\r\n    Oct 30, 2019 1:26:49 PM org.openqa.selenium.remote.DesiredCapabilities chrome\r\n    INFO: Using `new ChromeOptions()` is preferred to `DesiredCapabilities.chrome()`\r\n    [ERROR] Tests run: 3, Failures: 1, Errors: 0, Skipped: 2, Time elapsed: 0.998 s &lt;&lt;&lt; FAILURE! - in TestSuite\r\n    [ERROR] setUp(com.test.WebAppTitleTestOnChrome)  Time elapsed: 0.895 s  &lt;&lt;&lt; FAILURE!\r\n    org.openqa.selenium.remote.UnreachableBrowserException: \r\n    Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.\r\n\r\nPlease suggest me.\r\n","title":"UnreachableBrowserException: Could not start a new session Possible causes are invalid address of the remote server or browser start-up failure","body":"<p>I am new to selenium. Able to configure selenium set up on Ubuntu.Configuration details given below:</p>\n\n<ul>\n<li>Google Chrome 68.0.3440.84 </li>\n<li>ChromeDriver 2.41.578700 (2f1ed5f9343c13f73144538f15c00b370eda6706)</li>\n<li>Jenkins ver. 2.193</li>\n<li>ubuntu-18.04</li>\n<li>Selenium 3.13.0</li>\n<li>OpenJDK 1.8</li>\n<li>Doc referred for selenium set up : <a href=\"https://tecadmin.net/setup-selenium-chromedriver-on-ubuntu/\" rel=\"nofollow noreferrer\">https://tecadmin.net/setup-selenium-chromedriver-on-ubuntu/</a></li>\n</ul>\n\n<p>But every run I am getting below error on jenkins :</p>\n\n<pre><code>Opening chrome driver\nOct 30, 2019 1:26:49 PM org.openqa.selenium.remote.DesiredCapabilities chrome\nINFO: Using `new ChromeOptions()` is preferred to `DesiredCapabilities.chrome()`\n[ERROR] Tests run: 3, Failures: 1, Errors: 0, Skipped: 2, Time elapsed: 0.998 s &lt;&lt;&lt; FAILURE! - in TestSuite\n[ERROR] setUp(com.test.WebAppTitleTestOnChrome)  Time elapsed: 0.895 s  &lt;&lt;&lt; FAILURE!\norg.openqa.selenium.remote.UnreachableBrowserException: \nCould not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.\n</code></pre>\n\n<p>Please suggest me.</p>\n"},{"tags":["java","android","codenameone","inputstream"],"answers":[{"comments":[{"owner":{"account_id":394396,"reputation":52144,"user_id":756809,"accept_rate":89,"display_name":"Shai Almog"},"score":0,"creation_date":1691206277,"post_id":76832527,"comment_id":135464351,"body_markdown":"This is wrong. It&#39;s an answer for Android and that&#39;s a Codename One question.","body":"This is wrong. It&#39;s an answer for Android and that&#39;s a Codename One question."}],"tags":[],"owner":{"account_id":9485987,"reputation":11,"user_id":7052359,"display_name":"Dev"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691554578,"creation_date":1691114524,"answer_id":76832527,"question_id":76832243,"body_markdown":"1. Create a file using your string filename with path, for example:\r\n```java\r\nFile file = new File(&quot;res/raw/filename.png&quot;);\r\n```\r\n2. Try to use `FileInputStream` like so:\r\n```java\r\nFileInputStream is = new FileInputStream(file);\r\n```\r\nNote that `NullPointerException` may happen because of there is no declaration at all.\r\n","title":"Codename One: Resources Not Being Found in Android Build","body":"<ol>\n<li>Create a file using your string filename with path, for example:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>File file = new File(&quot;res/raw/filename.png&quot;);\n</code></pre>\n<ol start=\"2\">\n<li>Try to use <code>FileInputStream</code> like so:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>FileInputStream is = new FileInputStream(file);\n</code></pre>\n<p>Note that <code>NullPointerException</code> may happen because of there is no declaration at all.</p>\n"},{"tags":[],"owner":{"account_id":394396,"reputation":52144,"user_id":756809,"accept_rate":89,"display_name":"Shai Almog"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691206641,"creation_date":1691206641,"answer_id":76840055,"question_id":76832243,"body_markdown":"Check that the files in the folder match the case you use as even the file names are case sensitive. I suggest showing the specific file name that wasn&#39;t found as an error so you&#39;ll know which file is missing.\r\n\r\nOther than that you should use the newer syntax of try-with-resources as part of Java 8:\r\n\r\n    try(InputStream is = CN.getResourceAsStream(file)) {\r\n        img = Image.createImage(is);\r\n    } catch (IOException e) {\r\n        Log.e(e);\r\n        Dialog.show(&quot;Error&quot;, &quot;Loading file failed: &quot; + file, &quot;OK&quot;, null);\r\n    }\r\n    return img;\r\n\r\nThis removes the need to close. Also, always use `Log.e()` instead of `printStackTrace`. ","title":"Codename One: Resources Not Being Found in Android Build","body":"<p>Check that the files in the folder match the case you use as even the file names are case sensitive. I suggest showing the specific file name that wasn't found as an error so you'll know which file is missing.</p>\n<p>Other than that you should use the newer syntax of try-with-resources as part of Java 8:</p>\n<pre><code>try(InputStream is = CN.getResourceAsStream(file)) {\n    img = Image.createImage(is);\n} catch (IOException e) {\n    Log.e(e);\n    Dialog.show(&quot;Error&quot;, &quot;Loading file failed: &quot; + file, &quot;OK&quot;, null);\n}\nreturn img;\n</code></pre>\n<p>This removes the need to close. Also, always use <code>Log.e()</code> instead of <code>printStackTrace</code>.</p>\n"}],"owner":{"account_id":20108531,"reputation":65,"user_id":14745423,"display_name":"Stefan Cohn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76840055,"answer_count":2,"score":1,"last_activity_date":1691554578,"creation_date":1691107347,"question_id":76832243,"body_markdown":"I am using Codename One to build a little game. My game works in the simulator, however, whenever I run an Android build of the game, I&#39;m met with \r\n\r\n    java.lang.NullPointerException: Attempt to invoke virtual method &#39;void java.io.BufferedReader.close()&#39; on a null object reference\r\n\r\nI used an if statement to simply close an input stream if it is not null but then nothing loads in, which seems to me I am not configuring my resources correctly. \r\n\r\nThis is how I am loading in my image resources:\r\n\r\n    public static final String DUCKY_ATLAS = &quot;/duckySprite.png&quot;;\r\n    public static final String LEVEL_ATLAS = &quot;/mapSprite.png&quot;;\r\n\r\n    public static final String START_LEVEL = &quot;/levelOne.png&quot;;\r\n    public static final String OBSTACLE_SEQUENCES = &quot;/levelSequences.png&quot;;\r\n\r\n    //method to pull Image from file \r\n    public static Image getSpriteAtlas(String file) {\r\n        Image img = null;\r\n        try {\r\n            InputStream is = CN.getResourceAsStream(file);\r\n            img = Image.createImage(is);\r\n            is.close();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return img;\r\n    }\r\nThe location of my resources folder looks like : /common/src/main/resources\r\n\r\nThere is also no nesting within it. \r\n\r\nAny help would be greatly appreciated.","title":"Codename One: Resources Not Being Found in Android Build","body":"<p>I am using Codename One to build a little game. My game works in the simulator, however, whenever I run an Android build of the game, I'm met with</p>\n<pre><code>java.lang.NullPointerException: Attempt to invoke virtual method 'void java.io.BufferedReader.close()' on a null object reference\n</code></pre>\n<p>I used an if statement to simply close an input stream if it is not null but then nothing loads in, which seems to me I am not configuring my resources correctly.</p>\n<p>This is how I am loading in my image resources:</p>\n<pre><code>public static final String DUCKY_ATLAS = &quot;/duckySprite.png&quot;;\npublic static final String LEVEL_ATLAS = &quot;/mapSprite.png&quot;;\n\npublic static final String START_LEVEL = &quot;/levelOne.png&quot;;\npublic static final String OBSTACLE_SEQUENCES = &quot;/levelSequences.png&quot;;\n\n//method to pull Image from file \npublic static Image getSpriteAtlas(String file) {\n    Image img = null;\n    try {\n        InputStream is = CN.getResourceAsStream(file);\n        img = Image.createImage(is);\n        is.close();\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    return img;\n}\n</code></pre>\n<p>The location of my resources folder looks like : /common/src/main/resources</p>\n<p>There is also no nesting within it.</p>\n<p>Any help would be greatly appreciated.</p>\n"},{"tags":["java","spring","spring-boot","hibernate"],"comments":[{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1691546608,"post_id":76864065,"comment_id":135505150,"body_markdown":"`entityManager.clear();` - the body of test method reveals you somehow was able to acquire live instance of EM, that definitely means there is another transaction (EM) which somehow participate in test scenario","body":"<code>entityManager.clear();</code> - the body of test method reveals you somehow was able to acquire live instance of EM, that definitely means there is another transaction (EM) which somehow participate in test scenario"},{"owner":{"account_id":6580474,"reputation":136,"user_id":5084928,"accept_rate":80,"display_name":"anubhav deshwal"},"score":0,"creation_date":1691551350,"post_id":76864065,"comment_id":135505531,"body_markdown":"Actually I @Autowired EntityManager in ServiceD.","body":"Actually I @Autowired EntityManager in ServiceD."},{"owner":{"account_id":16341513,"reputation":209,"user_id":11802330,"display_name":"Eric"},"score":0,"creation_date":1691577798,"post_id":76864065,"comment_id":135509636,"body_markdown":"In each Service class you can start by printing the value of  `payment` after executing `.findByAccountAndIdAndDeletedIsFalse` . In ServiceA after `payment.setAmount()` you can also print the value of `payment` again to see new values first. Do you have to precisely use all those services to update record or you are open to alternative way to perform updates?","body":"In each Service class you can start by printing the value of  <code>payment</code> after executing <code>.findByAccountAndIdAndDeletedIsFalse</code> . In ServiceA after <code>payment.setAmount()</code> you can also print the value of <code>payment</code> again to see new values first. Do you have to precisely use all those services to update record or you are open to alternative way to perform updates?"}],"owner":{"account_id":6580474,"reputation":136,"user_id":5084928,"accept_rate":80,"display_name":"anubhav deshwal"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691554411,"creation_date":1691545323,"question_id":76864065,"body_markdown":"In order to understand how persistence context works, i tried the following scenario. But somehow hibernate was maintaining older entity state even after update was successful in its persistence context\r\n\r\n```java\r\n@Getter\r\n@Setter\r\n@Entity\r\n@Table(name=&quot;payments&quot;)\r\npublic class Payment {\r\n  \r\n  private Long id;\r\n\r\n  @Column(name=&quot;account_id&quot;)\r\n  private Long accountId;\r\n\r\n  private BigDecimal amount;\r\n\r\n  private Boolean deleted;\r\n\r\n}\r\n\r\n```\r\n\r\n**ServiceA**\r\n\r\n```java\r\n@Service\r\n@Log4j2\r\npublic class ServiceA{\r\n\r\n  @Autowired\r\n  private PaymentRepository paymentRepository;\r\n\r\n  @Transactional(rollbackFor = Exception.class, propagation = Propagation.REQUIRES_NEW)\r\n  public void testServiceA(Long accountId, Long paymentId){\r\n    Payment payment = paymentRepository.findByAccountAndIdAndDeletedIsFalse(\r\n        accountId,\r\n        paymentId\r\n    );\r\n    payment.setAmount(BigDecimal.ONE);\r\n\r\n    paymentRepository.save(payment);\r\n  }\r\n\r\n}\r\n```\r\n\r\n**ServiceB**\r\n```java\r\n@Service\r\n@Log4j2\r\npublic class ServiceB{\r\n\r\n  @Autowired\r\n  private PaymentRepository paymentRepository;\r\n\r\n  @Autowired\r\n  private ServiceA serviceA;\r\n\r\n  @Transactional(rollbackFor = Exception.class, propagation = Propagation.REQUIRES_NEW)\r\n  public void testServiceB(Long accountId, Long paymentId){\r\n    Payment payment = paymentRepository.findByAccountAndIdAndDeletedIsFalse(\r\n        accountId,\r\n        paymentId\r\n    );\r\n    serviceA.testServiceA(accountId, paymentId);\r\n  }\r\n\r\n}\r\n```\r\n\r\n**ServiceC**\r\n```java\r\n@Service\r\n@Log4j2\r\npublic class ServiceC{\r\n\r\n  @Autowired\r\n  private PaymentRepository paymentRepository;\r\n\r\n  @Transactional(rollbackFor = Exception.class, propagation = Propagation.REQUIRES_NEW)\r\n  public void testServiceC(Long accountId, Long paymentId){\r\n    Payment payment = paymentRepository.findByAccountAndIdAndDeletedIsFalse(\r\n        accountId,\r\n        paymentId\r\n    );\r\n    log.info(&quot;testing service C: payment value is {}&quot;, payment.getAmount());\r\n  }\r\n\r\n}\r\n```\r\n\r\n**ServiceD**\r\n\r\n```java\r\n@Service\r\n@Log4j2\r\npublic class ServiceD{\r\n\r\n  @Autowired\r\n  private PaymentRepository paymentRepository;\r\n\r\n  @Autowired\r\n  private ServiceB serviceB;\r\n\r\n  @Autowired\r\n  private ServiceC serviceC;\r\n\r\n  public void testServiceD() throws PaymentNotFoundException {\r\n    Long paymentId = 1L;\r\n    Long accountId = 1L;\r\n\r\n    serviceB.testServiceB(accountId, paymentId);\r\n    serviceC.testServiceC(accountId, paymentId);\r\n\r\n    Payment payment = paymentRepository.findByAccountAndIdAndDeletedIsFalse(\r\n        accountId,\r\n        paymentId\r\n    );\r\n\r\n    log.info(&quot;testing service D: payment value is {}&quot;, payment.getAmount());\r\n  }\r\n\r\n}\r\n\r\n```\r\n\r\n**Controller**\r\n\r\n```java\r\n\r\n@GetMapping(&quot;/test&quot;)\r\n  public void test(){\r\n    serviceD.testServiceD();\r\n  }\r\n```\r\n\r\n**Given a payment already exist with id 1 and account 1, with amount 50.**\r\n\r\n**Expectation**\r\nAs testServiceD method is not running under any transaction and testServiceC is running in a new transaction always, i was expecting the logs will print the updated amount of the payment.\r\n\r\nBut when I ran the above code following logs got printed\r\n```\r\ntesting service C: payment value is 50\r\ntesting service D: payment value is 50\r\n```\r\nBasically, we are seeing the amount getting printed before update\r\n\r\n**How i resolved it**\r\n\r\n```java\r\n@Service\r\n@Log4j2\r\npublic class ServiceD{\r\n\r\n  @Autowired\r\n  private PaymentRepository paymentRepository;\r\n\r\n  @Autowired\r\n  private ServiceB serviceB;\r\n\r\n  @Autowired\r\n  private ServiceC serviceC;\r\n\r\n  @Autowired\r\n  private EntityManager entityManager;\r\n\r\n  public void testServiceD() throws PaymentNotFoundException {\r\n    Long paymentId = 1L;\r\n    Long accountId = 1L;\r\n\r\n    serviceB.testServiceB(accountId, paymentId);\r\n    // clear cache\r\n    entityManager.clear();\r\n    serviceC.testServiceC(accountId, paymentId);\r\n\r\n    Payment payment = paymentRepository.findByAccountAndIdAndDeletedIsFalse(\r\n        accountId,\r\n        paymentId\r\n    );\r\n\r\n    log.info(&quot;testing service D: payment value is {}&quot;, payment.getAmount());\r\n  }\r\n\r\n}\r\n\r\n```\r\n\r\nNow when i run the code , following logs are printed\r\n(Again given payment amount is 50)\r\n\r\n```\r\ntesting service C: payment value is 1\r\ntesting service D: payment value is 1\r\n```\r\n","title":"Hibernate persistent context is maintaing old entity state","body":"<p>In order to understand how persistence context works, i tried the following scenario. But somehow hibernate was maintaining older entity state even after update was successful in its persistence context</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Setter\n@Entity\n@Table(name=&quot;payments&quot;)\npublic class Payment {\n  \n  private Long id;\n\n  @Column(name=&quot;account_id&quot;)\n  private Long accountId;\n\n  private BigDecimal amount;\n\n  private Boolean deleted;\n\n}\n\n</code></pre>\n<p><strong>ServiceA</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@Log4j2\npublic class ServiceA{\n\n  @Autowired\n  private PaymentRepository paymentRepository;\n\n  @Transactional(rollbackFor = Exception.class, propagation = Propagation.REQUIRES_NEW)\n  public void testServiceA(Long accountId, Long paymentId){\n    Payment payment = paymentRepository.findByAccountAndIdAndDeletedIsFalse(\n        accountId,\n        paymentId\n    );\n    payment.setAmount(BigDecimal.ONE);\n\n    paymentRepository.save(payment);\n  }\n\n}\n</code></pre>\n<p><strong>ServiceB</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@Log4j2\npublic class ServiceB{\n\n  @Autowired\n  private PaymentRepository paymentRepository;\n\n  @Autowired\n  private ServiceA serviceA;\n\n  @Transactional(rollbackFor = Exception.class, propagation = Propagation.REQUIRES_NEW)\n  public void testServiceB(Long accountId, Long paymentId){\n    Payment payment = paymentRepository.findByAccountAndIdAndDeletedIsFalse(\n        accountId,\n        paymentId\n    );\n    serviceA.testServiceA(accountId, paymentId);\n  }\n\n}\n</code></pre>\n<p><strong>ServiceC</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@Log4j2\npublic class ServiceC{\n\n  @Autowired\n  private PaymentRepository paymentRepository;\n\n  @Transactional(rollbackFor = Exception.class, propagation = Propagation.REQUIRES_NEW)\n  public void testServiceC(Long accountId, Long paymentId){\n    Payment payment = paymentRepository.findByAccountAndIdAndDeletedIsFalse(\n        accountId,\n        paymentId\n    );\n    log.info(&quot;testing service C: payment value is {}&quot;, payment.getAmount());\n  }\n\n}\n</code></pre>\n<p><strong>ServiceD</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@Log4j2\npublic class ServiceD{\n\n  @Autowired\n  private PaymentRepository paymentRepository;\n\n  @Autowired\n  private ServiceB serviceB;\n\n  @Autowired\n  private ServiceC serviceC;\n\n  public void testServiceD() throws PaymentNotFoundException {\n    Long paymentId = 1L;\n    Long accountId = 1L;\n\n    serviceB.testServiceB(accountId, paymentId);\n    serviceC.testServiceC(accountId, paymentId);\n\n    Payment payment = paymentRepository.findByAccountAndIdAndDeletedIsFalse(\n        accountId,\n        paymentId\n    );\n\n    log.info(&quot;testing service D: payment value is {}&quot;, payment.getAmount());\n  }\n\n}\n\n</code></pre>\n<p><strong>Controller</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@GetMapping(&quot;/test&quot;)\n  public void test(){\n    serviceD.testServiceD();\n  }\n</code></pre>\n<p><strong>Given a payment already exist with id 1 and account 1, with amount 50.</strong></p>\n<p><strong>Expectation</strong>\nAs testServiceD method is not running under any transaction and testServiceC is running in a new transaction always, i was expecting the logs will print the updated amount of the payment.</p>\n<p>But when I ran the above code following logs got printed</p>\n<pre><code>testing service C: payment value is 50\ntesting service D: payment value is 50\n</code></pre>\n<p>Basically, we are seeing the amount getting printed before update</p>\n<p><strong>How i resolved it</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@Log4j2\npublic class ServiceD{\n\n  @Autowired\n  private PaymentRepository paymentRepository;\n\n  @Autowired\n  private ServiceB serviceB;\n\n  @Autowired\n  private ServiceC serviceC;\n\n  @Autowired\n  private EntityManager entityManager;\n\n  public void testServiceD() throws PaymentNotFoundException {\n    Long paymentId = 1L;\n    Long accountId = 1L;\n\n    serviceB.testServiceB(accountId, paymentId);\n    // clear cache\n    entityManager.clear();\n    serviceC.testServiceC(accountId, paymentId);\n\n    Payment payment = paymentRepository.findByAccountAndIdAndDeletedIsFalse(\n        accountId,\n        paymentId\n    );\n\n    log.info(&quot;testing service D: payment value is {}&quot;, payment.getAmount());\n  }\n\n}\n\n</code></pre>\n<p>Now when i run the code , following logs are printed\n(Again given payment amount is 50)</p>\n<pre><code>testing service C: payment value is 1\ntesting service D: payment value is 1\n</code></pre>\n"},{"tags":["java","performance","garbage-collection"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":2,"creation_date":1691553681,"post_id":76864460,"comment_id":135505700,"body_markdown":"Does it have to be preallocated? `CharBuffer.wrap()` comes to mind.","body":"Does it have to be preallocated? <code>CharBuffer.wrap()</code> comes to mind."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691554900,"post_id":76864460,"comment_id":135505795,"body_markdown":"toByteArray() then native API store as a chunk. You could also store only the lower byte values if all the upper values are the same.  NB using many short methods per iteration or breakdown of process to small process segments is how RAM used gets marked quickly for GC dump in Java.","body":"toByteArray() then native API store as a chunk. You could also store only the lower byte values if all the upper values are the same.  NB using many short methods per iteration or breakdown of process to small process segments is how RAM used gets marked quickly for GC dump in Java."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691556123,"post_id":76864460,"comment_id":135505899,"body_markdown":"@SamuelMarchant `toByteArray()` creates a `byte[]` object which then has to be garbage-collected, which is specifically mentioned in the question as unwanted, and does not preserve the original UTF-16 format of the string, which is also mentioned in the question as an objective. I don&#39;t understand your final sentence.","body":"@SamuelMarchant <code>toByteArray()</code> creates a <code>byte[]</code> object which then has to be garbage-collected, which is specifically mentioned in the question as unwanted, and does not preserve the original UTF-16 format of the string, which is also mentioned in the question as an objective. I don&#39;t understand your final sentence."},{"owner":{"account_id":11562141,"reputation":53,"user_id":8471533,"display_name":"pippo"},"score":0,"creation_date":1691565583,"post_id":76864460,"comment_id":135507174,"body_markdown":"@user207421\nThx your quick reply. CharBuffer.wrap() is an interesting approach, but there are two issues with it in this context:\nThis method itself creates a new CharBuffer object, which will introduce GC overhead.\nOnce I have the CharBuffer, it&#39;s challenging to bulk-copy data into the ByteBuffer. My ByteBuffer is a DirectByteBuffer allocated from JNI, so it can&#39;t be reallocated and must be used directly.","body":"@user207421 Thx your quick reply. CharBuffer.wrap() is an interesting approach, but there are two issues with it in this context: This method itself creates a new CharBuffer object, which will introduce GC overhead. Once I have the CharBuffer, it&#39;s challenging to bulk-copy data into the ByteBuffer. My ByteBuffer is a DirectByteBuffer allocated from JNI, so it can&#39;t be reallocated and must be used directly."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691568994,"post_id":76864460,"comment_id":135507842,"body_markdown":"Well in that case `ByteBuffer.asCharBuffer().put(String)`, but note that it doesn&#39;t update `position` in the underlying `ByteBuffer`. This does create a new object however.","body":"Well in that case <code>ByteBuffer.asCharBuffer().put(String)</code>, but note that it doesn&#39;t update <code>position</code> in the underlying <code>ByteBuffer</code>. This does create a new object however."},{"owner":{"account_id":11562141,"reputation":53,"user_id":8471533,"display_name":"pippo"},"score":0,"creation_date":1691571441,"post_id":76864460,"comment_id":135508319,"body_markdown":"@user207421, I&#39;ve checked the implementation of ByteBuffer.asCharBuffer().put(String) in JDK8, it calls &quot;put(char)&quot; for each character of String (gotten by charAt(int)) too.  lol, maybe put char one by one is the only way.","body":"@user207421, I&#39;ve checked the implementation of ByteBuffer.asCharBuffer().put(String) in JDK8, it calls &quot;put(char)&quot; for each character of String (gotten by charAt(int)) too.  lol, maybe put char one by one is the only way."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691574948,"post_id":76864460,"comment_id":135509022,"body_markdown":"Well I certainly can&#39;t think of a better way: I&#39;m really only trying to think of one-liners to save you having to write a loop and to increase the chance of HotSpot optimizations.","body":"Well I certainly can&#39;t think of a better way: I&#39;m really only trying to think of one-liners to save you having to write a loop and to increase the chance of HotSpot optimizations."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1691605907,"post_id":76864460,"comment_id":135515683,"body_markdown":"In recent Java versions, `java.lang.String` stores characters in a `byte[]` using either ISO-8859-1 or UTF-8, so there is no _&quot;original UTF-16 format of the string&quot;_.","body":"In recent Java versions, <code>java.lang.String</code> stores characters in a <code>byte[]</code> using either ISO-8859-1 or UTF-8, so there is no <i>&quot;original UTF-16 format of the string&quot;</i>."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691722760,"post_id":76864460,"comment_id":135533169,"body_markdown":"I see Java does not have SIMD support until jdk 18.      https://vksegfault.github.io/posts/java-simd/","body":"I see Java does not have SIMD support until jdk 18.      <a href=\"https://vksegfault.github.io/posts/java-simd/\" rel=\"nofollow noreferrer\">vksegfault.github.io/posts/java-simd</a>"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691723350,"post_id":76864460,"comment_id":135533201,"body_markdown":"Read the API docs &quot;Direct vs. non Direct buffers&quot;.         https://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html.    Direct buffers operations use the underlying OS memory space.","body":"Read the API docs &quot;Direct vs. non Direct buffers&quot;.         <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html</a>.    Direct buffers operations use the underlying OS memory space."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1692630579,"post_id":76864460,"comment_id":135646342,"body_markdown":"@MarkRotteveel it stores as either ISO-8859-1 or UTF-16 (native byte order), not UTF-8. But in principle, you are right, developers can not assume that the string has an “original UTF-16 format” and it’s not even clear why maintaining that format would be an actual goal when the receiving side is native code.","body":"@MarkRotteveel it stores as either ISO-8859-1 or UTF-16 (native byte order), not UTF-8. But in principle, you are right, developers can not assume that the string has an “original UTF-16 format” and it’s not even clear why maintaining that format would be an actual goal when the receiving side is native code."}],"owner":{"account_id":11562141,"reputation":53,"user_id":8471533,"display_name":"pippo"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691553191,"creation_date":1691553191,"question_id":76864460,"body_markdown":"I have a pre-allocated ByteBuffer and need to copy a String into it, preserving the original UTF-16 format of the string. One of the key requirements is to avoid any garbage collection overhead during this process.\r\n\r\nHere&#39;s my current implementation:\r\n\r\n    private static void strcpy(ByteBuffer dest, String src)\r\n     {\r\n         int len = src.length();\r\n\r\n         for (int i = 0; i &lt; len; ++i)\r\n         {\r\n        \t dest.putChar(src.charAt(i));\r\n         }\r\n     }\r\n\r\nI&#39;m curious if, under the influence of the JIT, this could be optimized into more efficient assembly code, possibly leveraging SIMD instructions. Is there any insight or optimization guidance on this aspect?\r\n\r\nIs there a more efficient way to achieve this?\r\n\r\n","title":"Efficiently copying a String into a pre-allocated ByteBuffer as UTF-16 without any GC overhead in Java","body":"<p>I have a pre-allocated ByteBuffer and need to copy a String into it, preserving the original UTF-16 format of the string. One of the key requirements is to avoid any garbage collection overhead during this process.</p>\n<p>Here's my current implementation:</p>\n<pre><code>private static void strcpy(ByteBuffer dest, String src)\n {\n     int len = src.length();\n\n     for (int i = 0; i &lt; len; ++i)\n     {\n         dest.putChar(src.charAt(i));\n     }\n }\n</code></pre>\n<p>I'm curious if, under the influence of the JIT, this could be optimized into more efficient assembly code, possibly leveraging SIMD instructions. Is there any insight or optimization guidance on this aspect?</p>\n<p>Is there a more efficient way to achieve this?</p>\n"},{"tags":["java","hibernate","lazy-loading"],"answers":[{"tags":[],"owner":{"account_id":38612,"reputation":22579,"user_id":110933,"accept_rate":96,"display_name":"davek"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1384257997,"creation_date":1384257997,"answer_id":19928720,"question_id":19928568,"body_markdown":"It&#39;s probably not anywhere approaching a best practice, but I usually call a `SIZE` on the collection to load the children in the same transaction, like you have suggested. It&#39;s clean, immune to any changes in the structure of the child elements, and yields SQL with low overhead.","title":"Hibernate: best practice to pull all lazy collections","body":"<p>It's probably not anywhere approaching a best practice, but I usually call a <code>SIZE</code> on the collection to load the children in the same transaction, like you have suggested. It's clean, immune to any changes in the structure of the child elements, and yields SQL with low overhead.</p>\n"},{"comments":[{"owner":{"account_id":2568689,"reputation":45222,"user_id":2761509,"accept_rate":67,"display_name":"VB_"},"score":1,"creation_date":1384258531,"post_id":19928738,"comment_id":29655223,"body_markdown":"It looks attractive ). As I understand if I&#39;ll use @Fetch(FetchMode.SUBSELECT), than I can call Hibernate.initialize only once to pull all collections. Am I right?","body":"It looks attractive ). As I understand if I&#39;ll use @Fetch(FetchMode.SUBSELECT), than I can call Hibernate.initialize only once to pull all collections. Am I right?"},{"owner":{"account_id":237493,"reputation":11836,"user_id":505714,"accept_rate":87,"display_name":"Alexis Dufrenoy"},"score":4,"creation_date":1418808545,"post_id":19928738,"comment_id":43473472,"body_markdown":"And how do you manage when you retrieve a collection of MyEntity?","body":"And how do you manage when you retrieve a collection of MyEntity?"},{"owner":{"account_id":339155,"reputation":8863,"user_id":668455,"accept_rate":80,"display_name":"Tristan"},"score":1,"creation_date":1532689388,"post_id":19928738,"comment_id":90079814,"body_markdown":"If you call any method like &quot;size()&quot; on a collection in a transaction, it will also initialize it so your example after your initialization is not the best. This said, &quot;Hibernate.initialize(...)&quot; is semantically better then collection.size(), so you have the best advice.","body":"If you call any method like &quot;size()&quot; on a collection in a transaction, it will also initialize it so your example after your initialization is not the best. This said, &quot;Hibernate.initialize(...)&quot; is semantically better then collection.size(), so you have the best advice."}],"tags":[],"owner":{"account_id":905416,"reputation":25876,"user_id":940428,"accept_rate":100,"display_name":"Prabhakaran Ramaswamy"},"comment_count":3,"down_vote_count":0,"up_vote_count":131,"is_accepted":true,"score":131,"last_activity_date":1484902017,"creation_date":1384258033,"answer_id":19928738,"question_id":19928568,"body_markdown":"Use `Hibernate.initialize()` within `@Transactional` to initialize lazy objects. \r\n\r\n     start Transaction \r\n          Hibernate.initialize(entity.getAddresses());\r\n          Hibernate.initialize(entity.getPersons());\r\n     end Transaction \r\n\r\nNow out side of the Transaction you are able to get lazy objects. \r\n\r\n    entity.getAddresses().size();\r\n    entity.getPersons().size();","title":"Hibernate: best practice to pull all lazy collections","body":"<p>Use <code>Hibernate.initialize()</code> within <code>@Transactional</code> to initialize lazy objects. </p>\n\n<pre><code> start Transaction \n      Hibernate.initialize(entity.getAddresses());\n      Hibernate.initialize(entity.getPersons());\n end Transaction \n</code></pre>\n\n<p>Now out side of the Transaction you are able to get lazy objects. </p>\n\n<pre><code>entity.getAddresses().size();\nentity.getPersons().size();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":237493,"reputation":11836,"user_id":505714,"accept_rate":87,"display_name":"Alexis Dufrenoy"},"score":0,"creation_date":1418809759,"post_id":19928759,"comment_id":43474201,"body_markdown":"FetchMode.EAGER is deprecated. The javadoc recommends to use FetchMode.JOIN, now.","body":"FetchMode.EAGER is deprecated. The javadoc recommends to use FetchMode.JOIN, now."}],"tags":[],"owner":{"account_id":114756,"reputation":57127,"user_id":301607,"accept_rate":100,"display_name":"StanislavL"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1384258082,"creation_date":1384258082,"answer_id":19928759,"question_id":19928568,"body_markdown":"Place the Utils.objectToJson(entity); call before session closing.\r\n\r\nOr you can try to set fetch mode and play with code like this\r\n\r\n    Session s = ...\r\n    DetachedCriteria dc = DetachedCriteria.forClass(MyEntity.class).add(Expression.idEq(id));\r\n    dc.setFetchMode(&quot;innerTable&quot;, FetchMode.EAGER);\r\n    Criteria c = dc.getExecutableCriteria(s);\r\n    MyEntity a = (MyEntity)c.uniqueResult();","title":"Hibernate: best practice to pull all lazy collections","body":"<p>Place the Utils.objectToJson(entity); call before session closing.</p>\n\n<p>Or you can try to set fetch mode and play with code like this</p>\n\n<pre><code>Session s = ...\nDetachedCriteria dc = DetachedCriteria.forClass(MyEntity.class).add(Expression.idEq(id));\ndc.setFetchMode(\"innerTable\", FetchMode.EAGER);\nCriteria c = dc.getExecutableCriteria(s);\nMyEntity a = (MyEntity)c.uniqueResult();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":192652,"reputation":1469,"user_id":433922,"accept_rate":53,"display_name":"Chip"},"score":0,"creation_date":1461017776,"post_id":24870618,"comment_id":60998352,"body_markdown":"Thank you for this answer. I know it&#39;s been a while but I was trying to solve this and it was slow going until I read your code here. I also added ifs to the beginning of the second method initializeObject(object, seenObjects, insidePackageName):\n\n`if (object instanceof List) {\n\t\t\tfor(Object item : (List&lt;Object&gt;) object) {\n\t\t\t\tinitializeObject(item, seenObjects, insidePackageName);\n\t\t\t}\n\t\t\treturn;\n\t\t} else if (object instanceof Set) {\n\t\t\tfor(Object item : (Set&lt;Object&gt;) object) {\n\t\t\t\tinitializeObject(item, seenObjects, insidePackageName);\n\t\t\t}\n\t\t\treturn;\n\t\t}`\n\nIterate lists otherwise ignored.","body":"Thank you for this answer. I know it&#39;s been a while but I was trying to solve this and it was slow going until I read your code here. I also added ifs to the beginning of the second method initializeObject(object, seenObjects, insidePackageName):  <code>if (object instanceof List) { \t\t\tfor(Object item : (List&lt;Object&gt;) object) { \t\t\t\tinitializeObject(item, seenObjects, insidePackageName); \t\t\t} \t\t\treturn; \t\t} else if (object instanceof Set) { \t\t\tfor(Object item : (Set&lt;Object&gt;) object) { \t\t\t\tinitializeObject(item, seenObjects, insidePackageName); \t\t\t} \t\t\treturn; \t\t}</code>  Iterate lists otherwise ignored."},{"owner":{"account_id":2078662,"reputation":2458,"user_id":1851286,"display_name":"Oleksii Kyslytsyn"},"score":1,"creation_date":1469539756,"post_id":24870618,"comment_id":64570748,"body_markdown":"What if SecurityException is thrown at o.getClass().getMethods();?","body":"What if SecurityException is thrown at o.getClass().getMethods();?"},{"owner":{"account_id":263968,"reputation":6799,"user_id":549913,"accept_rate":79,"display_name":"renanleandrof"},"score":0,"creation_date":1678887057,"post_id":24870618,"comment_id":133619801,"body_markdown":"Why compare bytes instead of strings?","body":"Why compare bytes instead of strings?"}],"tags":[],"owner":{"account_id":1838260,"reputation":660,"user_id":1668201,"display_name":"Florian Sager"},"comment_count":3,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1405962036,"creation_date":1405962036,"answer_id":24870618,"question_id":19928568,"body_markdown":"You can traverse over the Getters of the Hibernate object in the same transaction to assure all lazy child objects are fetched eagerly with the following *generic* helper class:\r\n\r\n&gt; HibernateUtil.initializeObject(myObject, &quot;my.app.model&quot;);\r\n\r\n    package my.app.util;\r\n\r\n    import java.lang.reflect.InvocationTargetException;\r\n    import java.lang.reflect.Method;\r\n    import java.util.HashSet;\r\n    import java.util.Set;\r\n\r\n    import org.aspectj.org.eclipse.jdt.core.dom.Modifier;\r\n    import org.hibernate.Hibernate;\r\n    \r\n    public class HibernateUtil {\r\n\r\n\tpublic static byte[] hibernateCollectionPackage = &quot;org.hibernate.collection&quot;.getBytes();\r\n\r\n\tpublic static void initializeObject( Object o, String insidePackageName ) {\r\n\t\tSet&lt;Object&gt; seenObjects = new HashSet&lt;Object&gt;();\r\n\t\tinitializeObject( o, seenObjects, insidePackageName.getBytes() );\r\n\t\tseenObjects = null;\r\n\t}\r\n\r\n\tprivate static void initializeObject( Object o, Set&lt;Object&gt; seenObjects, byte[] insidePackageName ) {\r\n\r\n\t\tseenObjects.add( o );\r\n\r\n\t\tMethod[] methods = o.getClass().getMethods();\r\n\t\tfor ( Method method : methods ) {\r\n\r\n\t\t\tString methodName = method.getName();\r\n\r\n\t\t\t// check Getters exclusively\r\n\t\t\tif ( methodName.length() &lt; 3 || !&quot;get&quot;.equals( methodName.substring( 0, 3 ) ) )\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t// Getters without parameters\r\n\t\t\tif ( method.getParameterTypes().length &gt; 0 )\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tint modifiers = method.getModifiers();\r\n\r\n\t\t\t// Getters that are public\r\n\t\t\tif ( !Modifier.isPublic( modifiers ) )\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t// but not static\r\n\t\t\tif ( Modifier.isStatic( modifiers ) )\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\t// Check result of the Getter\r\n\t\t\t\tObject r = method.invoke( o );\r\n\r\n\t\t\t\tif ( r == null )\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t// prevent cycles\r\n\t\t\t\tif ( seenObjects.contains( r ) )\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t// ignore simple types, arrays und anonymous classes\r\n\t\t\t\tif ( !isIgnoredType( r.getClass() ) &amp;&amp; !r.getClass().isPrimitive() &amp;&amp; !r.getClass().isArray() &amp;&amp; !r.getClass().isAnonymousClass() ) {\r\n\r\n\t\t\t\t\t// ignore classes out of the given package and out of the hibernate collection\r\n\t\t\t\t\t// package\r\n\t\t\t\t\tif ( !isClassInPackage( r.getClass(), insidePackageName ) &amp;&amp; !isClassInPackage( r.getClass(), hibernateCollectionPackage ) ) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// initialize child object\r\n\t\t\t\t\tHibernate.initialize( r );\r\n\r\n\t\t\t\t\t// traverse over the child object\r\n\t\t\t\t\tinitializeObject( r, seenObjects, insidePackageName );\r\n\t\t\t\t}\r\n\r\n\t\t\t} catch ( InvocationTargetException e ) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t\treturn;\r\n\t\t\t} catch ( IllegalArgumentException e ) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t\treturn;\r\n\t\t\t} catch ( IllegalAccessException e ) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tprivate static final Set&lt;Class&lt;?&gt;&gt; IGNORED_TYPES = getIgnoredTypes();\r\n\r\n\tprivate static boolean isIgnoredType( Class&lt;?&gt; clazz ) {\r\n\t\treturn IGNORED_TYPES.contains( clazz );\r\n\t}\r\n\r\n\tprivate static Set&lt;Class&lt;?&gt;&gt; getIgnoredTypes() {\r\n\t\tSet&lt;Class&lt;?&gt;&gt; ret = new HashSet&lt;Class&lt;?&gt;&gt;();\r\n\t\tret.add( Boolean.class );\r\n\t\tret.add( Character.class );\r\n\t\tret.add( Byte.class );\r\n\t\tret.add( Short.class );\r\n\t\tret.add( Integer.class );\r\n\t\tret.add( Long.class );\r\n\t\tret.add( Float.class );\r\n\t\tret.add( Double.class );\r\n\t\tret.add( Void.class );\r\n\t\tret.add( String.class );\r\n\t\tret.add( Class.class );\r\n\t\tret.add( Package.class );\r\n\t\treturn ret;\r\n\t}\r\n\r\n\tprivate static Boolean isClassInPackage( Class&lt;?&gt; clazz, byte[] insidePackageName ) {\r\n\r\n\t\tPackage p = clazz.getPackage();\r\n\t\tif ( p == null )\r\n\t\t\treturn null;\r\n\r\n\t\tbyte[] packageName = p.getName().getBytes();\r\n\r\n\t\tint lenP = packageName.length;\r\n\t\tint lenI = insidePackageName.length;\r\n\r\n\t\tif ( lenP &lt; lenI )\r\n\t\t\treturn false;\r\n\r\n\t\tfor ( int i = 0; i &lt; lenI; i++ ) {\r\n\t\t\tif ( packageName[i] != insidePackageName[i] )\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n    }\r\n\r\n","title":"Hibernate: best practice to pull all lazy collections","body":"<p>You can traverse over the Getters of the Hibernate object in the same transaction to assure all lazy child objects are fetched eagerly with the following <em>generic</em> helper class:</p>\n\n<blockquote>\n  <p>HibernateUtil.initializeObject(myObject, \"my.app.model\");</p>\n</blockquote>\n\n<pre><code>package my.app.util;\n\nimport java.lang.reflect.InvocationTargetException;\nimport java.lang.reflect.Method;\nimport java.util.HashSet;\nimport java.util.Set;\n\nimport org.aspectj.org.eclipse.jdt.core.dom.Modifier;\nimport org.hibernate.Hibernate;\n\npublic class HibernateUtil {\n\npublic static byte[] hibernateCollectionPackage = \"org.hibernate.collection\".getBytes();\n\npublic static void initializeObject( Object o, String insidePackageName ) {\n    Set&lt;Object&gt; seenObjects = new HashSet&lt;Object&gt;();\n    initializeObject( o, seenObjects, insidePackageName.getBytes() );\n    seenObjects = null;\n}\n\nprivate static void initializeObject( Object o, Set&lt;Object&gt; seenObjects, byte[] insidePackageName ) {\n\n    seenObjects.add( o );\n\n    Method[] methods = o.getClass().getMethods();\n    for ( Method method : methods ) {\n\n        String methodName = method.getName();\n\n        // check Getters exclusively\n        if ( methodName.length() &lt; 3 || !\"get\".equals( methodName.substring( 0, 3 ) ) )\n            continue;\n\n        // Getters without parameters\n        if ( method.getParameterTypes().length &gt; 0 )\n            continue;\n\n        int modifiers = method.getModifiers();\n\n        // Getters that are public\n        if ( !Modifier.isPublic( modifiers ) )\n            continue;\n\n        // but not static\n        if ( Modifier.isStatic( modifiers ) )\n            continue;\n\n        try {\n\n            // Check result of the Getter\n            Object r = method.invoke( o );\n\n            if ( r == null )\n                continue;\n\n            // prevent cycles\n            if ( seenObjects.contains( r ) )\n                continue;\n\n            // ignore simple types, arrays und anonymous classes\n            if ( !isIgnoredType( r.getClass() ) &amp;&amp; !r.getClass().isPrimitive() &amp;&amp; !r.getClass().isArray() &amp;&amp; !r.getClass().isAnonymousClass() ) {\n\n                // ignore classes out of the given package and out of the hibernate collection\n                // package\n                if ( !isClassInPackage( r.getClass(), insidePackageName ) &amp;&amp; !isClassInPackage( r.getClass(), hibernateCollectionPackage ) ) {\n                    continue;\n                }\n\n                // initialize child object\n                Hibernate.initialize( r );\n\n                // traverse over the child object\n                initializeObject( r, seenObjects, insidePackageName );\n            }\n\n        } catch ( InvocationTargetException e ) {\n            e.printStackTrace();\n            return;\n        } catch ( IllegalArgumentException e ) {\n            e.printStackTrace();\n            return;\n        } catch ( IllegalAccessException e ) {\n            e.printStackTrace();\n            return;\n        }\n    }\n\n}\n\nprivate static final Set&lt;Class&lt;?&gt;&gt; IGNORED_TYPES = getIgnoredTypes();\n\nprivate static boolean isIgnoredType( Class&lt;?&gt; clazz ) {\n    return IGNORED_TYPES.contains( clazz );\n}\n\nprivate static Set&lt;Class&lt;?&gt;&gt; getIgnoredTypes() {\n    Set&lt;Class&lt;?&gt;&gt; ret = new HashSet&lt;Class&lt;?&gt;&gt;();\n    ret.add( Boolean.class );\n    ret.add( Character.class );\n    ret.add( Byte.class );\n    ret.add( Short.class );\n    ret.add( Integer.class );\n    ret.add( Long.class );\n    ret.add( Float.class );\n    ret.add( Double.class );\n    ret.add( Void.class );\n    ret.add( String.class );\n    ret.add( Class.class );\n    ret.add( Package.class );\n    return ret;\n}\n\nprivate static Boolean isClassInPackage( Class&lt;?&gt; clazz, byte[] insidePackageName ) {\n\n    Package p = clazz.getPackage();\n    if ( p == null )\n        return null;\n\n    byte[] packageName = p.getName().getBytes();\n\n    int lenP = packageName.length;\n    int lenI = insidePackageName.length;\n\n    if ( lenP &lt; lenI )\n        return false;\n\n    for ( int i = 0; i &lt; lenI; i++ ) {\n        if ( packageName[i] != insidePackageName[i] )\n            return false;\n    }\n\n    return true;\n}\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4933218,"reputation":794,"user_id":3972267,"display_name":"Ph03n1x"},"score":6,"creation_date":1526382419,"post_id":29090811,"comment_id":87712893,"body_markdown":"This is actually an anti-pattern. For more info: https://vladmihalcea.com/the-hibernate-enable_lazy_load_no_trans-anti-pattern/","body":"This is actually an anti-pattern. For more info: <a href=\"https://vladmihalcea.com/the-hibernate-enable_lazy_load_no_trans-anti-pattern/\" rel=\"nofollow noreferrer\">vladmihalcea.com/&hellip;</a>"}],"tags":[],"owner":{"account_id":107861,"reputation":3366,"user_id":286588,"accept_rate":50,"display_name":"Farm"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1426562884,"creation_date":1426562884,"answer_id":29090811,"question_id":19928568,"body_markdown":"With Hibernate 4.1.6 a new feature is introduced to handle those lazy association problems. When you enable hibernate.enable_lazy_load_no_trans property in hibernate.properties or in hibernate.cfg.xml, you will have no LazyInitializationException any more. \r\n\r\nFor More refer : https://stackoverflow.com/a/11913404/286588","title":"Hibernate: best practice to pull all lazy collections","body":"<p>With Hibernate 4.1.6 a new feature is introduced to handle those lazy association problems. When you enable hibernate.enable_lazy_load_no_trans property in hibernate.properties or in hibernate.cfg.xml, you will have no LazyInitializationException any more. </p>\n\n<p>For More refer : <a href=\"https://stackoverflow.com/a/11913404/286588\">https://stackoverflow.com/a/11913404/286588</a></p>\n"},{"comments":[{"owner":{"account_id":7553495,"reputation":160,"user_id":5734090,"accept_rate":88,"display_name":"saba safavi"},"score":0,"creation_date":1594625002,"post_id":37738665,"comment_id":111178968,"body_markdown":"I use session.refresh in an iteration to load lazyCollections. and every time I run my program just for one of my entity I got LazyInitializationException and others collection loaded after calling session.refresh. How could this happen","body":"I use session.refresh in an iteration to load lazyCollections. and every time I run my program just for one of my entity I got LazyInitializationException and others collection loaded after calling session.refresh. How could this happen"}],"tags":[],"owner":{"account_id":237698,"reputation":2960,"user_id":506078,"accept_rate":87,"display_name":"Damian"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1481020796,"creation_date":1465522557,"answer_id":37738665,"question_id":19928568,"body_markdown":"Not the best solution, but here is what I got:\r\n\r\n1) Annotate getter you want to initialize with this annotation: \r\n\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    public @interface Lazy {\r\n    \r\n    }\r\n\r\n\r\n2) Use this method (can be put in a generic class, or you can change T with Object class) on a object after you read it from database:\r\n\r\n\r\n\r\n    \tpublic &lt;T&gt; void forceLoadLazyCollections(T entity) {\r\n\r\n\t\tSession session = getSession().openSession();\r\n\t\tTransaction tx = null;\r\n\t\ttry {\r\n\r\n\t\t\ttx = session.beginTransaction();\r\n\t\t\tsession.refresh(entity);\r\n\t\t\tif (entity == null) {\r\n\t\t\t\tthrow new RuntimeException(&quot;Entity is null!&quot;);\r\n\t\t\t}\r\n\t\t\tfor (Method m : entityClass.getMethods()) {\r\n\r\n\t\t\t\tLazy annotation = m.getAnnotation(Lazy.class);\r\n\t\t\t\tif (annotation != null) {\r\n\t\t\t\t\tm.setAccessible(true);\r\n\t\t\t\t\tlogger.debug(&quot; method.invoke(obj, arg1, arg2,...); {} field&quot;, m.getName());\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tHibernate.initialize(m.invoke(entity));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch (Exception e) {\r\n\t\t\t\t\t\tlogger.warn(&quot;initialization exception&quot;, e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tfinally {\r\n\t\t\tsession.close();\r\n\t\t}\r\n\t}","title":"Hibernate: best practice to pull all lazy collections","body":"<p>Not the best solution, but here is what I got:</p>\n\n<p>1) Annotate getter you want to initialize with this annotation: </p>\n\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\npublic @interface Lazy {\n\n}\n</code></pre>\n\n<p>2) Use this method (can be put in a generic class, or you can change T with Object class) on a object after you read it from database:</p>\n\n<pre><code>    public &lt;T&gt; void forceLoadLazyCollections(T entity) {\n\n    Session session = getSession().openSession();\n    Transaction tx = null;\n    try {\n\n        tx = session.beginTransaction();\n        session.refresh(entity);\n        if (entity == null) {\n            throw new RuntimeException(\"Entity is null!\");\n        }\n        for (Method m : entityClass.getMethods()) {\n\n            Lazy annotation = m.getAnnotation(Lazy.class);\n            if (annotation != null) {\n                m.setAccessible(true);\n                logger.debug(\" method.invoke(obj, arg1, arg2,...); {} field\", m.getName());\n                try {\n                    Hibernate.initialize(m.invoke(entity));\n                }\n                catch (Exception e) {\n                    logger.warn(\"initialization exception\", e);\n                }\n            }\n        }\n\n    }\n    finally {\n        session.close();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9283548,"reputation":178,"user_id":6894125,"accept_rate":56,"display_name":"Mohamed Nagy"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1510563197,"creation_date":1510563197,"answer_id":47260236,"question_id":19928568,"body_markdown":"Try use `Gson` library to convert objects to Json\r\n\r\nExample with servlets : \r\n\r\n      List&lt;Party&gt; parties = bean.getPartiesByIncidentId(incidentId);\r\n            String json = &quot;&quot;;\r\n            try {\r\n                json = new Gson().toJson(parties);\r\n            } catch (Exception ex) {\r\n                ex.printStackTrace();\r\n            }\r\n            response.setContentType(&quot;application/json&quot;);\r\n            response.setCharacterEncoding(&quot;UTF-8&quot;);\r\n            response.getWriter().write(json);","title":"Hibernate: best practice to pull all lazy collections","body":"<p>Try use <code>Gson</code> library to convert objects to Json</p>\n\n<p>Example with servlets : </p>\n\n<pre><code>  List&lt;Party&gt; parties = bean.getPartiesByIncidentId(incidentId);\n        String json = \"\";\n        try {\n            json = new Gson().toJson(parties);\n        } catch (Exception ex) {\n            ex.printStackTrace();\n        }\n        response.setContentType(\"application/json\");\n        response.setCharacterEncoding(\"UTF-8\");\n        response.getWriter().write(json);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3234420,"reputation":3542,"user_id":2728956,"accept_rate":66,"display_name":"Vadim Kirilchuk"},"score":0,"creation_date":1587384069,"post_id":53685264,"comment_id":108481428,"body_markdown":"Hi Vlad, does it work if I call `Hibernate#initialize(entity.getSubSet())` if getSubSet returns  `Collections.unmodifyableSet(this.subSet)`. I tried and it didn&#39;t. Underlaying collection is &#39;PersistentSet&#39;. Same story with calling `#size()`","body":"Hi Vlad, does it work if I call <code>Hibernate#initialize(entity.getSubSet())</code> if getSubSet returns  <code>Collections.unmodifyableSet(this.subSet)</code>. I tried and it didn&#39;t. Underlaying collection is &#39;PersistentSet&#39;. Same story with calling <code>#size()</code>"},{"owner":{"account_id":3234420,"reputation":3542,"user_id":2728956,"accept_rate":66,"display_name":"Vadim Kirilchuk"},"score":0,"creation_date":1587385338,"post_id":53685264,"comment_id":108482051,"body_markdown":"But maybe the issue is that I later call contains and my equals uses direct field access and not getters..","body":"But maybe the issue is that I later call contains and my equals uses direct field access and not getters.."},{"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"score":1,"creation_date":1587393281,"post_id":53685264,"comment_id":108486884,"body_markdown":"It works if you follow the steps provided in my answer.","body":"It works if you follow the steps provided in my answer."}],"tags":[],"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"comment_count":3,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1544291180,"creation_date":1544291180,"answer_id":53685264,"question_id":19928568,"body_markdown":"When having to fetch multiple collections, you need to:\r\n\r\n1. JOIN FETCH one collection\r\n2. Use the [`Hibernate.initialize`](https://vladmihalcea.com/initialize-lazy-proxies-collections-jpa-hibernate/) for the remaining collections.\r\n\r\nSo, in your case, you need a first JPQL query like this one:\r\n\r\n    MyEntity entity = session.createQuery(&quot;select e from MyEntity e join fetch e.addreses where e.id \r\n    = :id&quot;, MyEntity.class)\r\n    .setParameter(&quot;id&quot;, entityId)\r\n    .getSingleResult();\r\n    \r\n    Hibernate.initialize(entity.persons);\r\n\r\nThis way, you can achieve your goal with 2 SQL queries and avoid a Cartesian Product.","title":"Hibernate: best practice to pull all lazy collections","body":"<p>When having to fetch multiple collections, you need to:</p>\n\n<ol>\n<li>JOIN FETCH one collection</li>\n<li>Use the <a href=\"https://vladmihalcea.com/initialize-lazy-proxies-collections-jpa-hibernate/\" rel=\"noreferrer\"><code>Hibernate.initialize</code></a> for the remaining collections.</li>\n</ol>\n\n<p>So, in your case, you need a first JPQL query like this one:</p>\n\n<pre><code>MyEntity entity = session.createQuery(\"select e from MyEntity e join fetch e.addreses where e.id \n= :id\", MyEntity.class)\n.setParameter(\"id\", entityId)\n.getSingleResult();\n\nHibernate.initialize(entity.persons);\n</code></pre>\n\n<p>This way, you can achieve your goal with 2 SQL queries and avoid a Cartesian Product.</p>\n"},{"tags":[],"owner":{"account_id":2130804,"reputation":1,"user_id":1891684,"display_name":"userSait"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1545123596,"creation_date":1545123596,"answer_id":53829465,"question_id":19928568,"body_markdown":"if you using jpa repository, \r\nset properties.put(&quot;hibernate.enable_lazy_load_no_trans&quot;,true); to jpaPropertymap","title":"Hibernate: best practice to pull all lazy collections","body":"<p>if you using jpa repository, \nset properties.put(\"hibernate.enable_lazy_load_no_trans\",true); to jpaPropertymap</p>\n"},{"tags":[],"owner":{"account_id":3742507,"reputation":43,"user_id":3111994,"display_name":"gutors"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627833084,"creation_date":1571252621,"answer_id":58420095,"question_id":19928568,"body_markdown":"You can use the ```@NamedEntityGraph``` annotation to your entity to create a loadable query that set which collections you want to load on your query.\r\n\r\nThe main advantage of this approach is that hibernate makes one single query to retrieve the entity and its collections only when you choose to use this graph, like this:\r\n\r\n**Entity configuration**\r\n```\r\n@Entity\r\n@NamedEntityGraph(name = &quot;graph.myEntity.addressesAndPersons&quot;, \r\nattributeNodes = {\r\n    @NamedAttributeNode(value = &quot;addresses&quot;),\r\n    @NamedAttributeNode(value = &quot;persons&quot;)\r\n})\r\n``` \r\n\r\n**Usage**\r\n```\r\npublic MyEntity findNamedGraph(Object id, String namedGraph) {\r\n        EntityGraph&lt;MyEntity&gt; graph = em.getEntityGraph(namedGraph);\r\n\r\n        Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\r\n        properties.put(&quot;javax.persistence.loadgraph&quot;, graph);\r\n\r\n        return em.find(MyEntity.class, id, properties);\r\n}\r\n```","title":"Hibernate: best practice to pull all lazy collections","body":"<p>You can use the <code>@NamedEntityGraph</code> annotation to your entity to create a loadable query that set which collections you want to load on your query.</p>\n<p>The main advantage of this approach is that hibernate makes one single query to retrieve the entity and its collections only when you choose to use this graph, like this:</p>\n<p><strong>Entity configuration</strong></p>\n<pre><code>@Entity\n@NamedEntityGraph(name = &quot;graph.myEntity.addressesAndPersons&quot;, \nattributeNodes = {\n    @NamedAttributeNode(value = &quot;addresses&quot;),\n    @NamedAttributeNode(value = &quot;persons&quot;)\n})\n</code></pre>\n<p><strong>Usage</strong></p>\n<pre><code>public MyEntity findNamedGraph(Object id, String namedGraph) {\n        EntityGraph&lt;MyEntity&gt; graph = em.getEntityGraph(namedGraph);\n\n        Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\n        properties.put(&quot;javax.persistence.loadgraph&quot;, graph);\n\n        return em.find(MyEntity.class, id, properties);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17180858,"reputation":9,"user_id":12436303,"display_name":"Mohsen Msr"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589440999,"creation_date":1589440999,"answer_id":61791586,"question_id":19928568,"body_markdown":"There are some kind of misunderstanding about lazy collections in JPA-Hibernate. First of all let&#39;s clear that \r\n*why trying to read a lazy collection throws exceptions and not just simply returns NULL for converting or further use cases?*.\r\n\r\nThat&#39;s because Null fields in Databases especially in joined columns have meaning and not simply not-presented state, like programming languages. \r\nwhen you&#39;re trying to interpret a lazy collection to Null value it means (on Datastore-side) there is no relations between these entities and it&#39;s not true. so throwing exception is some kind of best-practice and you have to deal with that not the Hibernate.\r\n\r\nSo as mentioned above I recommend to :\r\n\r\n1. Detach the desired object before modifying it or using stateless session for querying\r\n2. Manipulate lazy fields to desired values (zero,null,etc.)\r\n\r\nalso as described in other answers there are plenty of approaches(eager fetch, joining etc.) or libraries and methods for doing that, but you have to setting up your view of what&#39;s happening before dealing with the problem and solving it.","title":"Hibernate: best practice to pull all lazy collections","body":"<p>There are some kind of misunderstanding about lazy collections in JPA-Hibernate. First of all let's clear that \n<em>why trying to read a lazy collection throws exceptions and not just simply returns NULL for converting or further use cases?</em>.</p>\n\n<p>That's because Null fields in Databases especially in joined columns have meaning and not simply not-presented state, like programming languages. \nwhen you're trying to interpret a lazy collection to Null value it means (on Datastore-side) there is no relations between these entities and it's not true. so throwing exception is some kind of best-practice and you have to deal with that not the Hibernate.</p>\n\n<p>So as mentioned above I recommend to :</p>\n\n<ol>\n<li>Detach the desired object before modifying it or using stateless session for querying</li>\n<li>Manipulate lazy fields to desired values (zero,null,etc.)</li>\n</ol>\n\n<p>also as described in other answers there are plenty of approaches(eager fetch, joining etc.) or libraries and methods for doing that, but you have to setting up your view of what's happening before dealing with the problem and solving it.</p>\n"},{"tags":[],"owner":{"account_id":87230,"reputation":36826,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691552456,"creation_date":1691551959,"answer_id":76864391,"question_id":19928568,"body_markdown":"One way of doing it with more or less standard JPA is to add \r\n\r\n```java\r\n@NamedEntityGraph(includeAllAttributes = true)\r\n```\r\n\r\nTo your entity which will provide a named entity graph that is named the same as your entity (since name is not provided).\r\n\r\nThen assuming you have gotten `entity` from existing methods then the following code can be applied to it\r\n\r\n```java\r\n// this is needed to ensure the existing \r\n// object that you have retrieved is disconnected\r\n// from the entity manager, otherwise the find\r\n// method will return the same object.\r\nentityManager.detach(entity); \r\n\r\n// Locate the entity graph based on the class name of the entity.\r\nEntityGraph&lt;?&gt; entityGraph =\r\n  entityManager.getEntityGraph(\r\n    entityManager\r\n      .getMetamodel()\r\n      .entity(entity.getClass()).getName());\r\n\r\nvar fullyLoadedEntity = entityManager\r\n  .find(\r\n    entity.getClass(), \r\n    entity.getId(), \r\n    Map.of(\r\n      // SpecHints is hibernate specific the value is\r\n      // &quot;jakarta.persistence.loadgraph&quot;\r\n      SpecHints.HINT_SPEC_LOAD_GRAPH, entityGraph,\r\n      // This is needed if you&#39;re using L2 cache otherwise it will\r\n      // use the cached copy and it may not be complete.\r\n      // &quot;jakarta.persistence.cache.retrieveMode&quot;\r\n      SpecHints.HINT_SPEC_CACHE_RETRIEVE_MODE, CacheRetrieveMode.BYPASS\r\n));\r\n```","title":"Hibernate: best practice to pull all lazy collections","body":"<p>One way of doing it with more or less standard JPA is to add</p>\n<pre class=\"lang-java prettyprint-override\"><code>@NamedEntityGraph(includeAllAttributes = true)\n</code></pre>\n<p>To your entity which will provide a named entity graph that is named the same as your entity (since name is not provided).</p>\n<p>Then assuming you have gotten <code>entity</code> from existing methods then the following code can be applied to it</p>\n<pre class=\"lang-java prettyprint-override\"><code>// this is needed to ensure the existing \n// object that you have retrieved is disconnected\n// from the entity manager, otherwise the find\n// method will return the same object.\nentityManager.detach(entity); \n\n// Locate the entity graph based on the class name of the entity.\nEntityGraph&lt;?&gt; entityGraph =\n  entityManager.getEntityGraph(\n    entityManager\n      .getMetamodel()\n      .entity(entity.getClass()).getName());\n\nvar fullyLoadedEntity = entityManager\n  .find(\n    entity.getClass(), \n    entity.getId(), \n    Map.of(\n      // SpecHints is hibernate specific the value is\n      // &quot;jakarta.persistence.loadgraph&quot;\n      SpecHints.HINT_SPEC_LOAD_GRAPH, entityGraph,\n      // This is needed if you're using L2 cache otherwise it will\n      // use the cached copy and it may not be complete.\n      // &quot;jakarta.persistence.cache.retrieveMode&quot;\n      SpecHints.HINT_SPEC_CACHE_RETRIEVE_MODE, CacheRetrieveMode.BYPASS\n));\n</code></pre>\n"}],"owner":{"account_id":2568689,"reputation":45222,"user_id":2761509,"accept_rate":67,"display_name":"VB_"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":173802,"favorite_count":0,"down_vote_count":0,"up_vote_count":118,"accepted_answer_id":19928738,"answer_count":12,"score":118,"last_activity_date":1691552456,"creation_date":1384257558,"question_id":19928568,"body_markdown":"***What I have:***\r\n\r\n    @Entity\r\n    public class MyEntity {\r\n      @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, orphanRemoval = true)\r\n      @JoinColumn(name = &quot;myentiy_id&quot;)\r\n      private List&lt;Address&gt; addreses;\r\n    \r\n      @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, orphanRemoval = true)\r\n      @JoinColumn(name = &quot;myentiy_id&quot;)\r\n      private List&lt;Person&gt; persons;\r\n    \r\n      //....\r\n    }\r\n    \r\n    public void handle() {\r\n    \r\n       Session session = createNewSession();\r\n       MyEntity entity = (MyEntity) session.get(MyEntity.class, entityId);\r\n       proceed(session); // FLUSH, COMMIT, CLOSE session!\r\n    \r\n       Utils.objectToJson(entity); //TROUBLES, because it can&#39;t convert to json lazy collections\r\n    }\r\n\r\n***What a problem:***\r\n\r\nThe problem is that I can&#39;t pull lazy collection after session has been closed. But I also can&#39;t not close a session in *proceed* method. \r\n\r\n***What a solution (coarse solution):***\r\n\r\na) Before session is closed, force hibernate to pull lazy collections\r\n\r\n    entity.getAddresses().size();\r\n    entity.getPersons().size();\r\n\r\n....\r\n\r\nb) Maybe more ellegant way is to use `@Fetch(FetchMode.SUBSELECT)` annotation\r\n\r\n***Question:***\r\n\r\nWhat is a best practice/common way/more ellegant way to do it? Means convert my object to JSON.","title":"Hibernate: best practice to pull all lazy collections","body":"<p><em><strong>What I have:</em></strong></p>\n\n<pre><code>@Entity\npublic class MyEntity {\n  @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, orphanRemoval = true)\n  @JoinColumn(name = \"myentiy_id\")\n  private List&lt;Address&gt; addreses;\n\n  @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, orphanRemoval = true)\n  @JoinColumn(name = \"myentiy_id\")\n  private List&lt;Person&gt; persons;\n\n  //....\n}\n\npublic void handle() {\n\n   Session session = createNewSession();\n   MyEntity entity = (MyEntity) session.get(MyEntity.class, entityId);\n   proceed(session); // FLUSH, COMMIT, CLOSE session!\n\n   Utils.objectToJson(entity); //TROUBLES, because it can't convert to json lazy collections\n}\n</code></pre>\n\n<p><em><strong>What a problem:</em></strong></p>\n\n<p>The problem is that I can't pull lazy collection after session has been closed. But I also can't not close a session in <em>proceed</em> method. </p>\n\n<p><em><strong>What a solution (coarse solution):</em></strong></p>\n\n<p>a) Before session is closed, force hibernate to pull lazy collections</p>\n\n<pre><code>entity.getAddresses().size();\nentity.getPersons().size();\n</code></pre>\n\n<p>....</p>\n\n<p>b) Maybe more ellegant way is to use <code>@Fetch(FetchMode.SUBSELECT)</code> annotation</p>\n\n<p><em><strong>Question:</em></strong></p>\n\n<p>What is a best practice/common way/more ellegant way to do it? Means convert my object to JSON.</p>\n"},{"tags":["java","android","firebase","object"],"answers":[{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691554098,"post_id":76864377,"comment_id":135505739,"body_markdown":"If you had used lowercase on the `Anak` variable, and all others, as per conventions which have been generally accepted for 27 years, this issue could not have arisen.","body":"If you had used lowercase on the <code>Anak</code> variable, and all others, as per conventions which have been generally accepted for 27 years, this issue could not have arisen."},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1691688284,"post_id":76864377,"comment_id":135528674,"body_markdown":"The fact that you are a beginner is understandable, but (unfortunately) Stack Overflow could be very cruel with beginners. The SO is a repository of information about computer programming, so the questions must be relevant to anyone and dont specifcly to you. I know, self-learning is very hard, &#39;cause I do it too, but you said: *&quot;internet is the only place I can ask around since my friends are not programmers&quot;*, so you may need to network with other programmers and talk with them instead of simply asking a question on Stack Overflow.","body":"The fact that you are a beginner is understandable, but (unfortunately) Stack Overflow could be very cruel with beginners. The SO is a repository of information about computer programming, so the questions must be relevant to anyone and dont specifcly to you. I know, self-learning is very hard, &#39;cause I do it too, but you said: <i>&quot;internet is the only place I can ask around since my friends are not programmers&quot;</i>, so you may need to network with other programmers and talk with them instead of simply asking a question on Stack Overflow."},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1691688315,"post_id":76864377,"comment_id":135528681,"body_markdown":"The problem isn&#39;t asking, but **where** and **how** to do it, I make myself available to help if you want to! :)","body":"The problem isn&#39;t asking, but <b>where</b> and <b>how</b> to do it, I make myself available to help if you want to! :)"}],"tags":[],"owner":{"account_id":6220785,"reputation":9,"user_id":4840477,"display_name":"dee"},"comment_count":3,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1691551682,"creation_date":1691551682,"answer_id":76864377,"question_id":76863772,"body_markdown":"I figured it out.\r\n\r\nIt turns out I wrote wrong syntax for `readParcelable()` it should be `readParcelable(Anak.class.getClassLoader());` instead of `readParcelable(Anak.getClass().getClassLoader());`\r\n\r\nso in essence it is (Your Class)**.class**.getClassLoader();\r\n\r\nI hope this helps other who is getting this error thrown","title":"Null pointer exception when retrieving Parcelable Object &#39;java.lang.Class java.lang.Object.getClass()&#39; even though said object exists inside Database","body":"<p>I figured it out.</p>\n<p>It turns out I wrote wrong syntax for <code>readParcelable()</code> it should be <code>readParcelable(Anak.class.getClassLoader());</code> instead of <code>readParcelable(Anak.getClass().getClassLoader());</code></p>\n<p>so in essence it is (Your Class)<strong>.class</strong>.getClassLoader();</p>\n<p>I hope this helps other who is getting this error thrown</p>\n"}],"owner":{"account_id":6220785,"reputation":9,"user_id":4840477,"display_name":"dee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1691551682,"creation_date":1691538783,"question_id":76863772,"body_markdown":"Hi my app suddenly returns null pointer when I tried retrieving data from database. I was inputting a data with a model and then retrieving it with same model but it throws null pointer exception saying a object is null even though it exists.\r\n\r\nThe problem is happening inside the model object instead of the activity file.\r\n\r\nHere is the Diary Model where the problem occurs :\r\n\r\n\r\n```\r\npublic class Diary implements Parcelable {\r\n    @SerializedName(&quot;ID&quot;)\r\n    @Expose\r\n    private String ID;\r\n\r\n    @SerializedName(&quot;ID Anak&quot;)\r\n    @Expose\r\n    private String IDAnak;\r\n\r\n    @SerializedName(&quot;Nama Anak&quot;)\r\n    @Expose\r\n    private String NamaAnak;\r\n    //Other Declarations\r\n    .\r\n    .\r\n    .\r\n\r\n    @SerializedName(&quot;Anak&quot;)\r\n    @Expose\r\n    private Anak Anak;\r\n    //Other declarations\r\n    .\r\n    .\r\n    .\r\n\r\n    protected Diary(Parcel parcel){\r\n        this.ID = parcel.readString();\r\n        this.TanggalDiary = parcel.readString();\r\n        this.IDAnak = parcel.readString();\r\n        this.IDKamar = parcel.readString();\r\n        this.NIA = parcel.readString();\r\n        this.NamaAnak = parcel.readString();\r\n        **this.Anak = parcel.readParcelable(Anak.getClass().getClassLoader()); //Here is where the problem is**\r\n        this.NamaKamar = parcel.readString();\r\n        this.IDAyah = parcel.readString();\r\n        this.NamaAyah = parcel.readString();\r\n        this.IDIbu = parcel.readString();\r\n        this.NamaIbu = parcel.readString();\r\n        this.Sarapan = parcel.readString();\r\n        this.Susu = parcel.readString();\r\n        this.SnackPagi = parcel.readString();\r\n        this.MakanSiang = parcel.readString();\r\n        this.TidurSiang = parcel.readString();\r\n        this.SnackSore = parcel.readString();\r\n        this.MakanSore = parcel.readString();\r\n        this.BAB = parcel.readString();\r\n        this.MinumObat = parcel.readString();\r\n        this.Catatan = parcel.readString();\r\n        this.Photo = parcel.readString();\r\n        this.PhotoURL = parcel.readString();\r\n    }\r\n\r\n    @Override\r\n    public void writeToParcel(Parcel parcel, int i){\r\n        parcel.writeString(getID());\r\n        parcel.writeString(getTanggalDiary());\r\n        parcel.writeString(getIDAnak());\r\n        parcel.writeString(getIDKamar());\r\n        parcel.writeString(getNIA());\r\n        parcel.writeString(getNamaAnak());\r\n        parcel.writeParcelable(getAnak(), i);\r\n        parcel.writeString(getNamaKamar());\r\n        parcel.writeString(getIDAyah());\r\n        parcel.writeString(getNamaAyah());\r\n        parcel.writeString(getIDIbu());\r\n        parcel.writeString(getNamaIbu());\r\n        parcel.writeString(getSarapan());\r\n        parcel.writeString(getSusu());\r\n        parcel.writeString(getSnackPagi());\r\n        parcel.writeString(getMakanSiang());\r\n        parcel.writeString(getTidurSiang());\r\n        parcel.writeString(getSnackSore());\r\n        parcel.writeString(getMakanSore());\r\n        parcel.writeString(getBAB());\r\n        parcel.writeString(getMinumObat());\r\n        parcel.writeString(getCatatan());\r\n        parcel.writeString(getPhoto());\r\n        parcel.writeString(getPhotoURL());\r\n    }\r\n\r\n    public Diary() {\r\n    }\r\n\r\n    public Diary(String ID,String TanggalDiary, String IDAnak, String IDKamar,String NIA, String NamaAnak, Anak Anak, String NamaKamar,String NamaKamarSearch,\r\n                 String IDAyah, String NamaAyah, String NamaAyahSearch, String IDIbu, String NamaIbu, String NamaIbuSearch,\r\n                 String Sarapan, String Susu, String SnackPagi, String MakanSiang, String TidurSiang, String SnackSore,\r\n                 String MakanSore,String BAB, String MinumObat, String Catatan, String Photo, String PhotoURL, String CreatedBy, String CreatedIP, String CreatedPosition,\r\n                 String CreatedDate, String ModifiedBy, String ModifiedIP, String ModifiedPosition, String ModifiedDate,\r\n                   boolean IsActive) {\r\n        this.ID = ID;\r\n        this.TanggalDiary = TanggalDiary;\r\n        this.IDAnak = IDAnak;\r\n        this.IDKamar = IDKamar;\r\n        this.NIA = NIA;\r\n        this.NamaAnak = NamaAnak;\r\n        this.Anak = Anak;\r\n        this.NamaKamar = NamaKamar;\r\n        this.NamaKamarSearch = NamaKamarSearch;\r\n        this.IDAyah = IDAyah;\r\n        this.NamaAyah = NamaAyah;\r\n        this.NamaAyahSearch = NamaAyahSearch;\r\n        this.IDIbu = IDIbu;\r\n        this.NamaIbu = NamaIbu;\r\n        this.NamaIbuSearch = NamaIbuSearch;\r\n        this.Sarapan = Sarapan;\r\n        this.Susu = Susu;\r\n        this.SnackPagi = SnackPagi;\r\n        this.MakanSiang = MakanSiang;\r\n        this.TidurSiang = TidurSiang;\r\n        this.SnackSore = SnackSore;\r\n        this.MakanSore = MakanSore;\r\n        this.BAB = BAB;\r\n        this.MinumObat = MinumObat;\r\n        this.Catatan = Catatan;\r\n        this.Photo = Photo;\r\n        this.PhotoURL = PhotoURL;\r\n\r\n        this.CreatedBy = CreatedBy;\r\n        this.CreatedIP = CreatedIP;\r\n        this.CreatedPosition = CreatedPosition;\r\n        this.CreatedDate = CreatedDate;\r\n\r\n        this.ModifiedBy = ModifiedBy;\r\n        this.ModifiedIP = ModifiedIP;\r\n        this.ModifiedPosition = ModifiedPosition;\r\n        this.ModifiedDate = ModifiedDate;\r\n\r\n        this.IsActive = IsActive;\r\n    }\r\n\r\n    public String getID() {\r\n        return ID;\r\n    }\r\n\r\n    public void setID(String ID) {\r\n        this.ID = ID;\r\n    }\r\n    \r\n    public String getTanggalDiary() {return TanggalDiary; }\r\n    \r\n    public void setTanggalDiary(String tanggalDiary) { this.TanggalDiary = tanggalDiary; }\r\n\r\n    public String getIDAnak() { return IDAnak; }\r\n\r\n    public void setIDAnak(String idAnak) { this.IDAnak = idAnak; }\r\n\r\n    public String getIDKamar() {return IDKamar; }\r\n\r\n    public void setIDKamar(String idKamar) { this.IDKamar = idKamar; }\r\n\r\n    public String getNIA() {return NIA;}\r\n\r\n    public void setNIA(String nia) { this.NIA = nia; }\r\n\r\n    public String getNamaAnak() {\r\n        return NamaAnak;\r\n    }\r\n\r\n    public void setNamaAnak(String NamaAnak) {\r\n        this.NamaAnak = NamaAnak;\r\n    }\r\n\r\n    public Anak getAnak() {return Anak;}\r\n\r\n    public void  setAnak(Anak Anak) {this.Anak = Anak;}\r\n\r\n    public String getNamaAnakSearch() { return  NamaAnakSearch; }\r\n\r\n    public void setNamaAnakSearch(String NamaAnakSearch) { this.NamaAnakSearch = NamaAnakSearch; }\r\n\r\n    public String getIDAyah() {return IDAyah;}\r\n\r\n    public void setIDAyah(String IDAyah) {this.IDAyah = IDAyah; }\r\n\r\n    public String getNamaAyah() {return NamaAyah;}\r\n\r\n    public void setNamaAyah(String NamaAyah) {this.NamaAyah = NamaAyah;}\r\n\r\n    public String getNamaAyahSearch() {return NamaAyahSearch;}\r\n\r\n    public void setNamaAyahSearch(String NamaAyahSearch) {this.NamaAyahSearch = NamaAyahSearch;}\r\n\r\n    public String getIDIbu() {return IDIbu; }\r\n\r\n    public void setIDIbu(String IDIbu) {this.IDIbu = IDIbu;}\r\n\r\n    public String getNamaIbu() {return NamaIbu = NamaIbu;}\r\n\r\n    public void setNamaIbu(String NamaIbu) {this.NamaIbu = NamaIbu;}\r\n\r\n    public String getNamaIbuSearch() {return NamaIbuSearch ;}\r\n\r\n    public void setNamaIbuSearch(String NamaIbuSearch) {this.NamaIbuSearch = NamaIbuSearch;}\r\n\r\n    public String getNamaKamar() {\r\n        return NamaKamar;\r\n    }\r\n\r\n    public void setNamaKamar(String NamaKamar) {\r\n        this.NamaKamar = NamaKamar;\r\n    }\r\n\r\n    public String getNamaKamarSearch() { return NamaKamarSearch; }\r\n\r\n    public void setNamaKamarSearch(String NamaKamarSearch) { this.NamaKamarSearch = NamaKamarSearch; }\r\n\r\n    public String getSarapan() {return Sarapan;}\r\n\r\n    public void setSarapan(String Sarapan) { this.Sarapan = Sarapan; }\r\n\r\n    public String getSusu() {return Susu;}\r\n\r\n    public void setSusu(String Susu) {this.Susu = Susu;}\r\n\r\n    public String getSnackPagi() { return SnackPagi; }\r\n\r\n    public void setSnackPagi(String SnackPagi) { this.SnackPagi = SnackPagi; }\r\n\r\n    public String getMakanSiang() { return MakanSiang; }\r\n\r\n    public void setMakanSiang(String MakanSiang) { this.MakanSiang = MakanSiang; }\r\n\r\n    public String getTidurSiang() { return TidurSiang; }\r\n\r\n    public void setTidurSiang(String TidurSiang) {this.TidurSiang = TidurSiang;}\r\n\r\n    public String getSnackSore() { return SnackSore; }\r\n\r\n    public void setSnackSore(String snackSore) { this.SnackSore = snackSore; }\r\n\r\n    public String getMakanSore() { return MakanSore; }\r\n\r\n    public void setMakanSore(String MakanSore) { this.MakanSore = MakanSore; }\r\n\r\n    public String getBAB() { return BAB; }\r\n\r\n    public void setBAB(String bab) {this.BAB = bab; }\r\n\r\n    public String getMinumObat() {return MinumObat;}\r\n\r\n    public void setMinumObat(String MinumObat) {this.MinumObat = MinumObat; }\r\n\r\n    public String getCatatan() { return Catatan; }\r\n\r\n    public void setCatatan(String catatan) { this.Catatan = catatan;}\r\n\r\n    public String getPhoto() {\r\n        return Photo;\r\n    }\r\n\r\n    public void setPhoto(String Photo) {\r\n        this.Photo = Photo;\r\n    }\r\n\r\n    public String getPhotoURL() {\r\n        return PhotoURL;\r\n    }\r\n\r\n    public void setPhotoURL(String PhotoURL) {\r\n        this.PhotoURL = PhotoURL;\r\n    }\r\n\r\n    public String getCreatedBy() {\r\n        return CreatedBy;\r\n    }\r\n\r\n    public void setCreatedBy(String CreatedBy) {\r\n        this.CreatedBy = CreatedBy;\r\n    }\r\n\r\n    public String getCreatedIP() {\r\n        return CreatedIP;\r\n    }\r\n\r\n    public void setCreatedIP(String CreatedIP) {\r\n        this.CreatedIP = CreatedIP;\r\n    }\r\n\r\n    public String getCreatedPosition() {\r\n        return CreatedPosition;\r\n    }\r\n\r\n    public void setCreatedPosition(String CreatedPosition) {\r\n        this.CreatedPosition = CreatedPosition;\r\n    }\r\n\r\n    public String getCreatedDate() {\r\n        return CreatedDate;\r\n    }\r\n\r\n    public void setCreatedDate(String CreatedDate) {\r\n        this.CreatedDate = CreatedDate;\r\n    }\r\n\r\n    public String getModifiedBy() {\r\n        return ModifiedBy;\r\n    }\r\n\r\n    public void setModifiedBy(String ModifiedBy) {\r\n        this.ModifiedBy = ModifiedBy;\r\n    }\r\n\r\n    public String getModifiedIP() {\r\n        return ModifiedIP;\r\n    }\r\n\r\n    public void setModifiedIP(String ModifiedIP) {\r\n        this.ModifiedIP = ModifiedIP;\r\n    }\r\n\r\n    public String getModifiedPosition() {\r\n        return ModifiedPosition;\r\n    }\r\n\r\n    public void setModifiedPosition(String ModifiedPosition) {\r\n        this.ModifiedPosition = ModifiedPosition;\r\n    }\r\n\r\n    public String getModifiedDate() {\r\n        return ModifiedDate;\r\n    }\r\n\r\n    public void setModifiedDate(String ModifiedDate) {\r\n        this.ModifiedDate = ModifiedDate;\r\n    }\r\n\r\n    public Boolean getIsActive() {\r\n        return IsActive;\r\n    }\r\n\r\n    public void setIsActive(Boolean IsActive) {\r\n        this.IsActive = IsActive;\r\n    }\r\n\r\n    @Override\r\n    public int describeContents(){ return  0;}\r\n\r\n    public static final Parcelable.Creator&lt;Diary&gt; CREATOR = new Parcelable.Creator&lt;Diary&gt;() {\r\n        @Override\r\n        public Diary createFromParcel(Parcel parcel) { return new Diary(parcel); }\r\n\r\n        @Override\r\n        public Diary[] newArray(int i) { return new Diary[i ]; }\r\n    };\r\n\r\n    @Override\r\n    public String toString() {\r\n        return this.NamaAnak;            // What to display in the Spinner list.\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nAnd here is the Logcat :\r\n\r\n\r\n```\r\nThrowable caught in onActivityCreated: java.lang.NullPointerException: Attempt to invoke virtual method &#39;java.lang.Class java.lang.Object.getClass()&#39; on a null object reference: m.ki.onActivityCreated(:com.google.android.gms.dynamite_measurementdynamite@233013037@23.30.13 (150400-0):44)\r\n2023-08-09 06:44:15.606  5193-5193  AndroidRuntime          com.example.sekolahadmin             E  FATAL EXCEPTION: main\r\n    Process: com.example.sekolahadmin, PID: 5193\r\n    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.sekolahadmin/com.example.sekolahadmin.Presentation.Diary.DetailDiaryActivity}: java.lang.NullPointerException: Attempt to invoke virtual method &#39;java.lang.Class java.lang.Object.getClass()&#39; on a null object reference\r\n    \tat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3598)\r\n    \tat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3770)\r\n    \tat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\r\n    \tat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n    \tat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n    \tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2202)\r\n    \tat android.os.Handler.dispatchMessage(Handler.java:106)\r\n    \tat android.os.Looper.loop(Looper.java:236)\r\n    \tat android.app.ActivityThread.main(ActivityThread.java:8096)\r\n    \tat java.lang.reflect.Method.invoke(Native Method)\r\n    \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:620)\r\n    \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1011)\r\n    Caused by: java.lang.NullPointerException: Attempt to invoke virtual method &#39;java.lang.Class java.lang.Object.getClass()&#39; on a null object reference\r\n    \tat com.example.sekolahadmin.Model.Diary.&lt;init&gt;(Diary.java:161)\r\n    \tat com.example.sekolahadmin.Model.Diary$1.createFromParcel(Diary.java:468)\r\n    \tat com.example.sekolahadmin.Model.Diary$1.createFromParcel(Diary.java:466)\r\n    \tat android.os.Parcel.readParcelable(Parcel.java:3284)\r\n    \tat android.os.Parcel.readValue(Parcel.java:3177)\r\n    \tat android.os.Parcel.readArrayMapInternal(Parcel.java:3575)\r\n    \tat android.os.BaseBundle.initializeFromParcelLocked(BaseBundle.java:292)\r\n    \tat android.os.BaseBundle.unparcel(BaseBundle.java:236)\r\n    \tat android.os.Bundle.getParcelable(Bundle.java:1001)\r\n    \tat android.content.Intent.getParcelableExtra(Intent.java:8288)\r\n    \tat com.example.sekolahadmin.Presentation.Diary.DetailDiaryActivity.initIntent(DetailDiaryActivity.java:89)\r\n    \tat com.example.sekolahadmin.Presentation.Diary.DetailDiaryActivity.onCreate(DetailDiaryActivity.java:51)\r\n    \tat android.app.Activity.performCreate(Activity.java:8142)\r\n    \tat android.app.Activity.performCreate(Activity.java:8114)\r\n    \tat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1308)\r\n    \tat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3571)\r\n    \tat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3770)&#160;\r\n    \tat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)&#160;\r\n    \tat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)&#160;\r\n    \tat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)&#160;\r\n    \tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2202)&#160;\r\n    \tat android.os.Handler.dispatchMessage(Handler.java:106)&#160;\r\n    \tat android.os.Looper.loop(Looper.java:236)&#160;\r\n    \tat android.app.ActivityThread.main(ActivityThread.java:8096)&#160;\r\n    \tat java.lang.reflect.Method.invoke(Native Method)&#160;\r\n    \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:620)&#160;\r\n    \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1011)&#160;\r\n\r\n```\r\n\r\nThis is my database looks like : [![This is how my database looks like](https://i.stack.imgur.com/1yrXo.png)](https://i.stack.imgur.com/1yrXo.png) My Database is Firebase\r\n\r\nShould I include my Anak.java Model too?\r\n\r\nI don&#39;t know what&#39;s the problem here, the object in question is there but Android thinks it is null\r\n\r\nPlease help enlightening me\r\n\r\nAt first I thought the problem is in Anak.java Model so I fixed it the object but it sill throws the same error, best I can do is to remove the Anak object from Diary and substitute it with different way but If possible I want to do it right with getParcelable","title":"Null pointer exception when retrieving Parcelable Object &#39;java.lang.Class java.lang.Object.getClass()&#39; even though said object exists inside Database","body":"<p>Hi my app suddenly returns null pointer when I tried retrieving data from database. I was inputting a data with a model and then retrieving it with same model but it throws null pointer exception saying a object is null even though it exists.</p>\n<p>The problem is happening inside the model object instead of the activity file.</p>\n<p>Here is the Diary Model where the problem occurs :</p>\n<pre><code>public class Diary implements Parcelable {\n    @SerializedName(&quot;ID&quot;)\n    @Expose\n    private String ID;\n\n    @SerializedName(&quot;ID Anak&quot;)\n    @Expose\n    private String IDAnak;\n\n    @SerializedName(&quot;Nama Anak&quot;)\n    @Expose\n    private String NamaAnak;\n    //Other Declarations\n    .\n    .\n    .\n\n    @SerializedName(&quot;Anak&quot;)\n    @Expose\n    private Anak Anak;\n    //Other declarations\n    .\n    .\n    .\n\n    protected Diary(Parcel parcel){\n        this.ID = parcel.readString();\n        this.TanggalDiary = parcel.readString();\n        this.IDAnak = parcel.readString();\n        this.IDKamar = parcel.readString();\n        this.NIA = parcel.readString();\n        this.NamaAnak = parcel.readString();\n        **this.Anak = parcel.readParcelable(Anak.getClass().getClassLoader()); //Here is where the problem is**\n        this.NamaKamar = parcel.readString();\n        this.IDAyah = parcel.readString();\n        this.NamaAyah = parcel.readString();\n        this.IDIbu = parcel.readString();\n        this.NamaIbu = parcel.readString();\n        this.Sarapan = parcel.readString();\n        this.Susu = parcel.readString();\n        this.SnackPagi = parcel.readString();\n        this.MakanSiang = parcel.readString();\n        this.TidurSiang = parcel.readString();\n        this.SnackSore = parcel.readString();\n        this.MakanSore = parcel.readString();\n        this.BAB = parcel.readString();\n        this.MinumObat = parcel.readString();\n        this.Catatan = parcel.readString();\n        this.Photo = parcel.readString();\n        this.PhotoURL = parcel.readString();\n    }\n\n    @Override\n    public void writeToParcel(Parcel parcel, int i){\n        parcel.writeString(getID());\n        parcel.writeString(getTanggalDiary());\n        parcel.writeString(getIDAnak());\n        parcel.writeString(getIDKamar());\n        parcel.writeString(getNIA());\n        parcel.writeString(getNamaAnak());\n        parcel.writeParcelable(getAnak(), i);\n        parcel.writeString(getNamaKamar());\n        parcel.writeString(getIDAyah());\n        parcel.writeString(getNamaAyah());\n        parcel.writeString(getIDIbu());\n        parcel.writeString(getNamaIbu());\n        parcel.writeString(getSarapan());\n        parcel.writeString(getSusu());\n        parcel.writeString(getSnackPagi());\n        parcel.writeString(getMakanSiang());\n        parcel.writeString(getTidurSiang());\n        parcel.writeString(getSnackSore());\n        parcel.writeString(getMakanSore());\n        parcel.writeString(getBAB());\n        parcel.writeString(getMinumObat());\n        parcel.writeString(getCatatan());\n        parcel.writeString(getPhoto());\n        parcel.writeString(getPhotoURL());\n    }\n\n    public Diary() {\n    }\n\n    public Diary(String ID,String TanggalDiary, String IDAnak, String IDKamar,String NIA, String NamaAnak, Anak Anak, String NamaKamar,String NamaKamarSearch,\n                 String IDAyah, String NamaAyah, String NamaAyahSearch, String IDIbu, String NamaIbu, String NamaIbuSearch,\n                 String Sarapan, String Susu, String SnackPagi, String MakanSiang, String TidurSiang, String SnackSore,\n                 String MakanSore,String BAB, String MinumObat, String Catatan, String Photo, String PhotoURL, String CreatedBy, String CreatedIP, String CreatedPosition,\n                 String CreatedDate, String ModifiedBy, String ModifiedIP, String ModifiedPosition, String ModifiedDate,\n                   boolean IsActive) {\n        this.ID = ID;\n        this.TanggalDiary = TanggalDiary;\n        this.IDAnak = IDAnak;\n        this.IDKamar = IDKamar;\n        this.NIA = NIA;\n        this.NamaAnak = NamaAnak;\n        this.Anak = Anak;\n        this.NamaKamar = NamaKamar;\n        this.NamaKamarSearch = NamaKamarSearch;\n        this.IDAyah = IDAyah;\n        this.NamaAyah = NamaAyah;\n        this.NamaAyahSearch = NamaAyahSearch;\n        this.IDIbu = IDIbu;\n        this.NamaIbu = NamaIbu;\n        this.NamaIbuSearch = NamaIbuSearch;\n        this.Sarapan = Sarapan;\n        this.Susu = Susu;\n        this.SnackPagi = SnackPagi;\n        this.MakanSiang = MakanSiang;\n        this.TidurSiang = TidurSiang;\n        this.SnackSore = SnackSore;\n        this.MakanSore = MakanSore;\n        this.BAB = BAB;\n        this.MinumObat = MinumObat;\n        this.Catatan = Catatan;\n        this.Photo = Photo;\n        this.PhotoURL = PhotoURL;\n\n        this.CreatedBy = CreatedBy;\n        this.CreatedIP = CreatedIP;\n        this.CreatedPosition = CreatedPosition;\n        this.CreatedDate = CreatedDate;\n\n        this.ModifiedBy = ModifiedBy;\n        this.ModifiedIP = ModifiedIP;\n        this.ModifiedPosition = ModifiedPosition;\n        this.ModifiedDate = ModifiedDate;\n\n        this.IsActive = IsActive;\n    }\n\n    public String getID() {\n        return ID;\n    }\n\n    public void setID(String ID) {\n        this.ID = ID;\n    }\n    \n    public String getTanggalDiary() {return TanggalDiary; }\n    \n    public void setTanggalDiary(String tanggalDiary) { this.TanggalDiary = tanggalDiary; }\n\n    public String getIDAnak() { return IDAnak; }\n\n    public void setIDAnak(String idAnak) { this.IDAnak = idAnak; }\n\n    public String getIDKamar() {return IDKamar; }\n\n    public void setIDKamar(String idKamar) { this.IDKamar = idKamar; }\n\n    public String getNIA() {return NIA;}\n\n    public void setNIA(String nia) { this.NIA = nia; }\n\n    public String getNamaAnak() {\n        return NamaAnak;\n    }\n\n    public void setNamaAnak(String NamaAnak) {\n        this.NamaAnak = NamaAnak;\n    }\n\n    public Anak getAnak() {return Anak;}\n\n    public void  setAnak(Anak Anak) {this.Anak = Anak;}\n\n    public String getNamaAnakSearch() { return  NamaAnakSearch; }\n\n    public void setNamaAnakSearch(String NamaAnakSearch) { this.NamaAnakSearch = NamaAnakSearch; }\n\n    public String getIDAyah() {return IDAyah;}\n\n    public void setIDAyah(String IDAyah) {this.IDAyah = IDAyah; }\n\n    public String getNamaAyah() {return NamaAyah;}\n\n    public void setNamaAyah(String NamaAyah) {this.NamaAyah = NamaAyah;}\n\n    public String getNamaAyahSearch() {return NamaAyahSearch;}\n\n    public void setNamaAyahSearch(String NamaAyahSearch) {this.NamaAyahSearch = NamaAyahSearch;}\n\n    public String getIDIbu() {return IDIbu; }\n\n    public void setIDIbu(String IDIbu) {this.IDIbu = IDIbu;}\n\n    public String getNamaIbu() {return NamaIbu = NamaIbu;}\n\n    public void setNamaIbu(String NamaIbu) {this.NamaIbu = NamaIbu;}\n\n    public String getNamaIbuSearch() {return NamaIbuSearch ;}\n\n    public void setNamaIbuSearch(String NamaIbuSearch) {this.NamaIbuSearch = NamaIbuSearch;}\n\n    public String getNamaKamar() {\n        return NamaKamar;\n    }\n\n    public void setNamaKamar(String NamaKamar) {\n        this.NamaKamar = NamaKamar;\n    }\n\n    public String getNamaKamarSearch() { return NamaKamarSearch; }\n\n    public void setNamaKamarSearch(String NamaKamarSearch) { this.NamaKamarSearch = NamaKamarSearch; }\n\n    public String getSarapan() {return Sarapan;}\n\n    public void setSarapan(String Sarapan) { this.Sarapan = Sarapan; }\n\n    public String getSusu() {return Susu;}\n\n    public void setSusu(String Susu) {this.Susu = Susu;}\n\n    public String getSnackPagi() { return SnackPagi; }\n\n    public void setSnackPagi(String SnackPagi) { this.SnackPagi = SnackPagi; }\n\n    public String getMakanSiang() { return MakanSiang; }\n\n    public void setMakanSiang(String MakanSiang) { this.MakanSiang = MakanSiang; }\n\n    public String getTidurSiang() { return TidurSiang; }\n\n    public void setTidurSiang(String TidurSiang) {this.TidurSiang = TidurSiang;}\n\n    public String getSnackSore() { return SnackSore; }\n\n    public void setSnackSore(String snackSore) { this.SnackSore = snackSore; }\n\n    public String getMakanSore() { return MakanSore; }\n\n    public void setMakanSore(String MakanSore) { this.MakanSore = MakanSore; }\n\n    public String getBAB() { return BAB; }\n\n    public void setBAB(String bab) {this.BAB = bab; }\n\n    public String getMinumObat() {return MinumObat;}\n\n    public void setMinumObat(String MinumObat) {this.MinumObat = MinumObat; }\n\n    public String getCatatan() { return Catatan; }\n\n    public void setCatatan(String catatan) { this.Catatan = catatan;}\n\n    public String getPhoto() {\n        return Photo;\n    }\n\n    public void setPhoto(String Photo) {\n        this.Photo = Photo;\n    }\n\n    public String getPhotoURL() {\n        return PhotoURL;\n    }\n\n    public void setPhotoURL(String PhotoURL) {\n        this.PhotoURL = PhotoURL;\n    }\n\n    public String getCreatedBy() {\n        return CreatedBy;\n    }\n\n    public void setCreatedBy(String CreatedBy) {\n        this.CreatedBy = CreatedBy;\n    }\n\n    public String getCreatedIP() {\n        return CreatedIP;\n    }\n\n    public void setCreatedIP(String CreatedIP) {\n        this.CreatedIP = CreatedIP;\n    }\n\n    public String getCreatedPosition() {\n        return CreatedPosition;\n    }\n\n    public void setCreatedPosition(String CreatedPosition) {\n        this.CreatedPosition = CreatedPosition;\n    }\n\n    public String getCreatedDate() {\n        return CreatedDate;\n    }\n\n    public void setCreatedDate(String CreatedDate) {\n        this.CreatedDate = CreatedDate;\n    }\n\n    public String getModifiedBy() {\n        return ModifiedBy;\n    }\n\n    public void setModifiedBy(String ModifiedBy) {\n        this.ModifiedBy = ModifiedBy;\n    }\n\n    public String getModifiedIP() {\n        return ModifiedIP;\n    }\n\n    public void setModifiedIP(String ModifiedIP) {\n        this.ModifiedIP = ModifiedIP;\n    }\n\n    public String getModifiedPosition() {\n        return ModifiedPosition;\n    }\n\n    public void setModifiedPosition(String ModifiedPosition) {\n        this.ModifiedPosition = ModifiedPosition;\n    }\n\n    public String getModifiedDate() {\n        return ModifiedDate;\n    }\n\n    public void setModifiedDate(String ModifiedDate) {\n        this.ModifiedDate = ModifiedDate;\n    }\n\n    public Boolean getIsActive() {\n        return IsActive;\n    }\n\n    public void setIsActive(Boolean IsActive) {\n        this.IsActive = IsActive;\n    }\n\n    @Override\n    public int describeContents(){ return  0;}\n\n    public static final Parcelable.Creator&lt;Diary&gt; CREATOR = new Parcelable.Creator&lt;Diary&gt;() {\n        @Override\n        public Diary createFromParcel(Parcel parcel) { return new Diary(parcel); }\n\n        @Override\n        public Diary[] newArray(int i) { return new Diary[i ]; }\n    };\n\n    @Override\n    public String toString() {\n        return this.NamaAnak;            // What to display in the Spinner list.\n    }\n}\n\n</code></pre>\n<p>And here is the Logcat :</p>\n<pre><code>Throwable caught in onActivityCreated: java.lang.NullPointerException: Attempt to invoke virtual method 'java.lang.Class java.lang.Object.getClass()' on a null object reference: m.ki.onActivityCreated(:com.google.android.gms.dynamite_measurementdynamite@233013037@23.30.13 (150400-0):44)\n2023-08-09 06:44:15.606  5193-5193  AndroidRuntime          com.example.sekolahadmin             E  FATAL EXCEPTION: main\n    Process: com.example.sekolahadmin, PID: 5193\n    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.sekolahadmin/com.example.sekolahadmin.Presentation.Diary.DetailDiaryActivity}: java.lang.NullPointerException: Attempt to invoke virtual method 'java.lang.Class java.lang.Object.getClass()' on a null object reference\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3598)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3770)\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2202)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loop(Looper.java:236)\n        at android.app.ActivityThread.main(ActivityThread.java:8096)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:620)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1011)\n    Caused by: java.lang.NullPointerException: Attempt to invoke virtual method 'java.lang.Class java.lang.Object.getClass()' on a null object reference\n        at com.example.sekolahadmin.Model.Diary.&lt;init&gt;(Diary.java:161)\n        at com.example.sekolahadmin.Model.Diary$1.createFromParcel(Diary.java:468)\n        at com.example.sekolahadmin.Model.Diary$1.createFromParcel(Diary.java:466)\n        at android.os.Parcel.readParcelable(Parcel.java:3284)\n        at android.os.Parcel.readValue(Parcel.java:3177)\n        at android.os.Parcel.readArrayMapInternal(Parcel.java:3575)\n        at android.os.BaseBundle.initializeFromParcelLocked(BaseBundle.java:292)\n        at android.os.BaseBundle.unparcel(BaseBundle.java:236)\n        at android.os.Bundle.getParcelable(Bundle.java:1001)\n        at android.content.Intent.getParcelableExtra(Intent.java:8288)\n        at com.example.sekolahadmin.Presentation.Diary.DetailDiaryActivity.initIntent(DetailDiaryActivity.java:89)\n        at com.example.sekolahadmin.Presentation.Diary.DetailDiaryActivity.onCreate(DetailDiaryActivity.java:51)\n        at android.app.Activity.performCreate(Activity.java:8142)\n        at android.app.Activity.performCreate(Activity.java:8114)\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1308)\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3571)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3770) \n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85) \n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135) \n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95) \n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2202) \n        at android.os.Handler.dispatchMessage(Handler.java:106) \n        at android.os.Looper.loop(Looper.java:236) \n        at android.app.ActivityThread.main(ActivityThread.java:8096) \n        at java.lang.reflect.Method.invoke(Native Method) \n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:620) \n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1011) \n\n</code></pre>\n<p>This is my database looks like : <a href=\"https://i.stack.imgur.com/1yrXo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1yrXo.png\" alt=\"This is how my database looks like\" /></a> My Database is Firebase</p>\n<p>Should I include my Anak.java Model too?</p>\n<p>I don't know what's the problem here, the object in question is there but Android thinks it is null</p>\n<p>Please help enlightening me</p>\n<p>At first I thought the problem is in Anak.java Model so I fixed it the object but it sill throws the same error, best I can do is to remove the Anak object from Diary and substitute it with different way but If possible I want to do it right with getParcelable</p>\n"},{"tags":["java","aws-lambda","aws-api-gateway"],"comments":[{"owner":{"account_id":126310,"reputation":4256,"user_id":322722,"accept_rate":88,"display_name":"cmonkey"},"score":0,"creation_date":1691519362,"post_id":76861939,"comment_id":135501812,"body_markdown":"More info about your request would be helpful. You say you &#39;pass in a query string&#39;. \nIs that as part of the URL? A message body? What mime-type are you sending? What client are you using to send the request? \nSimilar questions may help clarify: https://stackoverflow.com/questions/32057053/how-to-pass-a-params-from-post-to-aws-lambda-from-amazon-api-gateway","body":"More info about your request would be helpful. You say you &#39;pass in a query string&#39;.  Is that as part of the URL? A message body? What mime-type are you sending? What client are you using to send the request?  Similar questions may help clarify: <a href=\"https://stackoverflow.com/questions/32057053/how-to-pass-a-params-from-post-to-aws-lambda-from-amazon-api-gateway\" title=\"how to pass a params from post to aws lambda from amazon api gateway\">stackoverflow.com/questions/32057053/&hellip;</a>"},{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":0,"creation_date":1691520462,"post_id":76861939,"comment_id":135502052,"body_markdown":"Have you checked the logs? It should show the stacktrace.","body":"Have you checked the logs? It should show the stacktrace."},{"owner":{"account_id":29038731,"reputation":1,"user_id":22243993,"display_name":"boundliss"},"score":0,"creation_date":1691520699,"post_id":76861939,"comment_id":135502088,"body_markdown":"@cmonkey - I edited the post to add a picture to detail exactly what I did. I hope that clarifies what I did","body":"@cmonkey - I edited the post to add a picture to detail exactly what I did. I hope that clarifies what I did"},{"owner":{"account_id":29038731,"reputation":1,"user_id":22243993,"display_name":"boundliss"},"score":0,"creation_date":1691520785,"post_id":76861939,"comment_id":135502102,"body_markdown":"@AbhijitSarkar Yes, I&#39;m getting an error: &quot;Execution failed due to configuration error: Malformed Lambda proxy response&quot;","body":"@AbhijitSarkar Yes, I&#39;m getting an error: &quot;Execution failed due to configuration error: Malformed Lambda proxy response&quot;"}],"answers":[{"tags":[],"owner":{"account_id":29038731,"reputation":1,"user_id":22243993,"display_name":"boundliss"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691551667,"creation_date":1691551667,"answer_id":76864374,"question_id":76861939,"body_markdown":"I found the mistake. I had &quot;Use Lambda Proxy integration&quot; on when creating the method. After turning it off, it worked when I put the JSON in the request body of the POST request like so: [enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fzlDe.png","title":"AWS POST API, connected to Lambda Java function, not taking in parameters","body":"<p>I found the mistake. I had &quot;Use Lambda Proxy integration&quot; on when creating the method. After turning it off, it worked when I put the JSON in the request body of the POST request like so: <a href=\"https://i.stack.imgur.com/fzlDe.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}],"owner":{"account_id":29038731,"reputation":1,"user_id":22243993,"display_name":"boundliss"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1691551667,"creation_date":1691515842,"question_id":76861939,"body_markdown":"When trying to test my AWS REST API POST method that&#39;s connected to my Java Lambda function, I get an error `{&quot;message&quot;: &quot;Internal server error&quot;}` when I pass in: `userID=5&amp;name=test` as a query string like so: [enter image description here][1]\r\n\r\nI want to do the same as thing as going into Lambda Test console and typing in:\r\n```\r\n{\r\n  &quot;userID&quot;: 5\r\n  &quot;name&quot;: &quot;test&quot;\r\n}\r\n```\r\nin the &quot;Event JSON&quot; part (which works fine in Lambda), but when I try to replicate it through the API, it doesn&#39;t work.\r\n\r\nThis is my Java code:\r\n```\r\nimport com.amazonaws.services.lambda.runtime.Context;\r\nimport com.amazonaws.services.lambda.runtime.LambdaLogger;\r\nimport com.amazonaws.services.lambda.runtime.RequestHandler;\r\n\r\npublic class Launcher implements RequestHandler&lt;Launcher.CompanyRecord, String&gt;{\r\n\r\n    public String handleRequest(CompanyRecord event, Context context) {\r\n        return String.valueOf(event.userID) + event.name;\r\n    }\r\n\r\n    record CompanyRecord(int userID, String name) {\r\n    }\r\n}\r\n```\r\n\r\n\r\nI&#39;ve also tried passing in\r\n\r\n```\r\n{\r\n  &quot;userID&quot;: 10,\r\n  &quot;name&quot;: &quot;test&quot;\r\n}\r\n```\r\nin the Headers and Request Body (independently), but I still get the same `{&quot;message&quot;: &quot;Internal server error&quot;}`\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bAYUC.png","title":"AWS POST API, connected to Lambda Java function, not taking in parameters","body":"<p>When trying to test my AWS REST API POST method that's connected to my Java Lambda function, I get an error <code>{&quot;message&quot;: &quot;Internal server error&quot;}</code> when I pass in: <code>userID=5&amp;name=test</code> as a query string like so: <a href=\"https://i.stack.imgur.com/bAYUC.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I want to do the same as thing as going into Lambda Test console and typing in:</p>\n<pre><code>{\n  &quot;userID&quot;: 5\n  &quot;name&quot;: &quot;test&quot;\n}\n</code></pre>\n<p>in the &quot;Event JSON&quot; part (which works fine in Lambda), but when I try to replicate it through the API, it doesn't work.</p>\n<p>This is my Java code:</p>\n<pre><code>import com.amazonaws.services.lambda.runtime.Context;\nimport com.amazonaws.services.lambda.runtime.LambdaLogger;\nimport com.amazonaws.services.lambda.runtime.RequestHandler;\n\npublic class Launcher implements RequestHandler&lt;Launcher.CompanyRecord, String&gt;{\n\n    public String handleRequest(CompanyRecord event, Context context) {\n        return String.valueOf(event.userID) + event.name;\n    }\n\n    record CompanyRecord(int userID, String name) {\n    }\n}\n</code></pre>\n<p>I've also tried passing in</p>\n<pre><code>{\n  &quot;userID&quot;: 10,\n  &quot;name&quot;: &quot;test&quot;\n}\n</code></pre>\n<p>in the Headers and Request Body (independently), but I still get the same <code>{&quot;message&quot;: &quot;Internal server error&quot;}</code></p>\n"},{"tags":["java","performance","cassandra"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1691549678,"post_id":76864260,"comment_id":135505383,"body_markdown":"Please start by answering me this: What is a Java 4+ driver?","body":"Please start by answering me this: What is a Java 4+ driver?"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1691549895,"post_id":76864260,"comment_id":135505397,"body_markdown":"Please read How to Ask: https://stackoverflow.com/help/how-to-ask. This questions doesn&#39;t make sense.","body":"Please read How to Ask: <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>. This questions doesn&#39;t make sense."}],"answers":[{"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1691551464,"post_id":76864350,"comment_id":135505541,"body_markdown":"If only OP had included a pom so we could see what they&#39;re talking about. Not that your guess here is wrong.","body":"If only OP had included a pom so we could see what they&#39;re talking about. Not that your guess here is wrong."}],"tags":[],"owner":{"account_id":5357170,"reputation":14233,"user_id":4269535,"display_name":"Erick Ramirez"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691551249,"creation_date":1691551249,"answer_id":76864350,"question_id":76864260,"body_markdown":"Yes, version 4.x of the Java drivers are compatible with Cassandra 3.0 and 3.11 clusters.\r\n\r\nFor details, see the [Java driver compatibility matrix][1].\r\n\r\nWithout knowing details of the issue you are facing, my best guess is that your cluster is overloaded leading to the timeout exceptions. Cheers!\r\n\r\n\r\n  [1]: https://docs.datastax.com/en/driver-matrix/docs/java-drivers.html","title":"Is Java driver 4.x compatible with Cassandra 3.x clusters?","body":"<p>Yes, version 4.x of the Java drivers are compatible with Cassandra 3.0 and 3.11 clusters.</p>\n<p>For details, see the <a href=\"https://docs.datastax.com/en/driver-matrix/docs/java-drivers.html\" rel=\"nofollow noreferrer\">Java driver compatibility matrix</a>.</p>\n<p>Without knowing details of the issue you are facing, my best guess is that your cluster is overloaded leading to the timeout exceptions. Cheers!</p>\n"}],"owner":{"account_id":29188596,"reputation":7,"user_id":22361154,"display_name":"Madhvi Monga"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1691551249,"creation_date":1691549328,"question_id":76864260,"body_markdown":"We are using Java 4+ driver with Cassandra 3x cluster and seeing performance issues. \r\n\r\nExpecting good performance intermittently. Seeing a lot of driver timeout exceptions and read timeout exceptions. Any pointers would help.\r\n","title":"Is Java driver 4.x compatible with Cassandra 3.x clusters?","body":"<p>We are using Java 4+ driver with Cassandra 3x cluster and seeing performance issues.</p>\n<p>Expecting good performance intermittently. Seeing a lot of driver timeout exceptions and read timeout exceptions. Any pointers would help.</p>\n"},{"tags":["java","spring","spring-boot","aspectj","aspectj-maven-plugin"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1691561706,"post_id":76864343,"comment_id":135506539,"body_markdown":"Welcome to SO. You should make your problem reproducible, otherwise probably nobody can help you. Please learn [how to ask a question on SO](https://stackoverflow.com/help/how-to-ask) and provide a [minimal, complete, and verifiable example](https://stackoverflow.com/help/mcve). A GitHub project would be appreciated. Thank you.","body":"Welcome to SO. You should make your problem reproducible, otherwise probably nobody can help you. Please learn <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask a question on SO</a> and provide a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>. A GitHub project would be appreciated. Thank you."}],"owner":{"account_id":28938180,"reputation":1,"user_id":22165267,"display_name":"mridhoilyas"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691551022,"creation_date":1691551022,"question_id":76864343,"body_markdown":"I&#39;m new in using spring boot\r\n\r\nI&#39;m currently working on a project that requires me to log the execution of a method (elapsed time and result) using aop.\r\n\r\nI can use spring-aop just fine, the problems comes when the aop cannot capture the internal method call (`private` method) and the method call from `new` object.\r\n\r\nAfter browsing through many references, it looks like I should use compile-time weaving (since I have the source code with me)\r\n\r\nmy pom.xml looks like this\r\n\r\n```\r\n&lt;dependencies&gt;\r\n  ...\r\n  &lt;dependency&gt;\r\n    &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n    &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\r\n  &lt;/dependency&gt;\r\n  &lt;dependency&gt;\r\n    &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n    &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\r\n  &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n&lt;build&gt;\r\n  &lt;plugins&gt;\r\n    ...\r\n    &lt;plugin&gt;\r\n      &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n      &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;1.14.0&lt;/version&gt;\r\n      &lt;configuration&gt;\r\n        &lt;complianceLevel&gt;11&lt;/complianceLevel&gt;\r\n        &lt;source&gt;11&lt;/source&gt;\r\n        &lt;target&gt;11&lt;/target&gt;\r\n        &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\r\n        &lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n        &lt;Xlint&gt;ignore&lt;/Xlint&gt;\r\n      &lt;/configuration&gt;\r\n      &lt;executions&gt;\r\n        &lt;execution&gt;\r\n          &lt;goals&gt;\r\n            &lt;goal&gt;compile&lt;/goal&gt;\r\n          &lt;/goals&gt;\r\n        &lt;/execution&gt;\r\n      &lt;/executions&gt;\r\n    &lt;/plugin&gt;\r\n  &lt;/plugins&gt;\r\n&lt;/build&gt;\r\n```\r\n\r\nWhen I run `mvn clean package`, it shows the advice for the `private` method and the method from `new` object was being weaved, and the project was compiled successfully.\r\n\r\nBut when I start the .jar file and execute the API using Postman, it shows exception error that not occured before I was adding this compile-time weaving such as:\r\n\r\n`feign.codec.DecodeException: Type definition error: [simple type, class someClass]; nested exception is com.fasterxml.jackson.databind.exc.InvalidDefinitionException`\r\n\r\n`nested exception is java.lang.IllegalArgumentException: Either use @Param on all parameters except Pageable and Sort typed once, or none at all!`\r\n\r\nHow do I achieve this compile-time weaving without causing unnecessary exception when I run the program? because it was just fine when I remove the build plugin for compile-time weaving\r\n\r\nAny response would be appreciated\r\n\r\n**P.S:**\r\n\r\nI have tried using spring-aop with self-injection using `@Autowired` but it causing NPE when the internal method trying to execute `.saveAll()` from `@Autowired` repository and I don&#39;t know how to fix that so I choose this compile-time weaving","title":"Compile-time weaving causing unnecessary error/exception","body":"<p>I'm new in using spring boot</p>\n<p>I'm currently working on a project that requires me to log the execution of a method (elapsed time and result) using aop.</p>\n<p>I can use spring-aop just fine, the problems comes when the aop cannot capture the internal method call (<code>private</code> method) and the method call from <code>new</code> object.</p>\n<p>After browsing through many references, it looks like I should use compile-time weaving (since I have the source code with me)</p>\n<p>my pom.xml looks like this</p>\n<pre><code>&lt;dependencies&gt;\n  ...\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n    &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n    &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\n  &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;build&gt;\n  &lt;plugins&gt;\n    ...\n    &lt;plugin&gt;\n      &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n      &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\n      &lt;version&gt;1.14.0&lt;/version&gt;\n      &lt;configuration&gt;\n        &lt;complianceLevel&gt;11&lt;/complianceLevel&gt;\n        &lt;source&gt;11&lt;/source&gt;\n        &lt;target&gt;11&lt;/target&gt;\n        &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\n        &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n        &lt;Xlint&gt;ignore&lt;/Xlint&gt;\n      &lt;/configuration&gt;\n      &lt;executions&gt;\n        &lt;execution&gt;\n          &lt;goals&gt;\n            &lt;goal&gt;compile&lt;/goal&gt;\n          &lt;/goals&gt;\n        &lt;/execution&gt;\n      &lt;/executions&gt;\n    &lt;/plugin&gt;\n  &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p>When I run <code>mvn clean package</code>, it shows the advice for the <code>private</code> method and the method from <code>new</code> object was being weaved, and the project was compiled successfully.</p>\n<p>But when I start the .jar file and execute the API using Postman, it shows exception error that not occured before I was adding this compile-time weaving such as:</p>\n<p><code>feign.codec.DecodeException: Type definition error: [simple type, class someClass]; nested exception is com.fasterxml.jackson.databind.exc.InvalidDefinitionException</code></p>\n<p><code>nested exception is java.lang.IllegalArgumentException: Either use @Param on all parameters except Pageable and Sort typed once, or none at all!</code></p>\n<p>How do I achieve this compile-time weaving without causing unnecessary exception when I run the program? because it was just fine when I remove the build plugin for compile-time weaving</p>\n<p>Any response would be appreciated</p>\n<p><strong>P.S:</strong></p>\n<p>I have tried using spring-aop with self-injection using <code>@Autowired</code> but it causing NPE when the internal method trying to execute <code>.saveAll()</code> from <code>@Autowired</code> repository and I don't know how to fix that so I choose this compile-time weaving</p>\n"},{"tags":["java","android","flutter"],"comments":[{"owner":{"account_id":1650697,"reputation":753,"user_id":1521370,"display_name":"bongo"},"score":0,"creation_date":1675366733,"post_id":75328050,"comment_id":132919386,"body_markdown":"So it looks that you have java 8 installed (class version 52) but this flutter version requires java 11 ( version 55) so easiest solution would be to update java on your machine.","body":"So it looks that you have java 8 installed (class version 52) but this flutter version requires java 11 ( version 55) so easiest solution would be to update java on your machine."},{"owner":{"account_id":24191437,"reputation":379,"user_id":18540229,"display_name":"Daniil"},"score":0,"creation_date":1675662242,"post_id":75328050,"comment_id":132969725,"body_markdown":"I faced the same problem, please help me find a solution","body":"I faced the same problem, please help me find a solution"},{"owner":{"account_id":21705418,"reputation":169,"user_id":16017956,"display_name":"Ajay Jha"},"score":0,"creation_date":1675665514,"post_id":75328050,"comment_id":132970236,"body_markdown":"Maybe there are two java versions installed on your system.","body":"Maybe there are two java versions installed on your system."},{"owner":{"account_id":21705418,"reputation":169,"user_id":16017956,"display_name":"Ajay Jha"},"score":0,"creation_date":1675665549,"post_id":75328050,"comment_id":132970244,"body_markdown":"export JAVA_HOME=$(/usr/libexec/java_home -v&quot;YOUR_VERSION&quot;)\nuse this command it will be resolved","body":"export JAVA_HOME=$(/usr/libexec/java_home -v&quot;YOUR_VERSION&quot;) use this command it will be resolved"}],"answers":[{"comments":[{"owner":{"account_id":2119722,"reputation":10202,"user_id":1883256,"accept_rate":68,"display_name":"Pathros"},"score":0,"creation_date":1675623391,"post_id":75347026,"comment_id":132964658,"body_markdown":"How did you remove the older JDK version? What commands?","body":"How did you remove the older JDK version? What commands?"},{"owner":{"account_id":5306286,"reputation":141,"user_id":4234055,"display_name":"pddthinh"},"score":2,"creation_date":1675691721,"post_id":75347026,"comment_id":132977529,"body_markdown":"@pathros, from the `/usr/libexec/java_home -V`, you will find the path to the older JDK version, then just use the `sudo rm -rf &lt;old-jdk-path&gt;` to remove it","body":"@pathros, from the <code>&#47;usr&#47;libexec&#47;java_home -V</code>, you will find the path to the older JDK version, then just use the <code>sudo rm -rf &lt;old-jdk-path&gt;</code> to remove it"}],"tags":[],"owner":{"account_id":5306286,"reputation":141,"user_id":4234055,"display_name":"pddthinh"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1675533412,"creation_date":1675532080,"answer_id":75347026,"question_id":75328050,"body_markdown":"**UPDATE**\r\n\r\nIt turns out there are 2 JDK installed in my environment, you can check by using\r\n```\r\n/usr/libexec/java_home -V\r\n```\r\nso after removing the older JDK version, the issue is fixed.\r\n\r\n-------------------\r\n\r\n\r\nHaving the same error, although here is my `java --version` output\r\n\r\n```\r\njava 19.0.1 2022-10-18\r\nJava(TM) SE Runtime Environment (build 19.0.1+10-21)\r\nJava HotSpot(TM) 64-Bit Server VM (build 19.0.1+10-21, mixed mode, sharing)\r\n```\r\nthis happens after I upgrade to flutter 3.7.1","title":"flutter doctor --android-licenses not working due to java.lang.UnsupportedClassVersionError","body":"<p><strong>UPDATE</strong></p>\n<p>It turns out there are 2 JDK installed in my environment, you can check by using</p>\n<pre><code>/usr/libexec/java_home -V\n</code></pre>\n<p>so after removing the older JDK version, the issue is fixed.</p>\n<hr />\n<p>Having the same error, although here is my <code>java --version</code> output</p>\n<pre><code>java 19.0.1 2022-10-18\nJava(TM) SE Runtime Environment (build 19.0.1+10-21)\nJava HotSpot(TM) 64-Bit Server VM (build 19.0.1+10-21, mixed mode, sharing)\n</code></pre>\n<p>this happens after I upgrade to flutter 3.7.1</p>\n"},{"tags":[],"owner":{"account_id":4031417,"reputation":105,"user_id":3317358,"display_name":"marc_"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1675641746,"creation_date":1675641118,"answer_id":75356327,"question_id":75328050,"body_markdown":"I&#39;ve had the same error, I haven&#39;t specify JAVA_HOME env, and flutter used my 1.8 java. \r\n\r\nFor macOS: \r\nCheck your JAVA_HOME env\r\nin terminal with \r\n```\r\nprintenv\r\n```\r\nif env not existed, list installed java version \r\n```\r\n/usr/libexec/java_home -V\r\n```\r\nchoose one and execute\r\n\r\n```\r\nexport JAVA_HOME=$(/usr/libexec/java_home -v&quot;YOUR_VERSION&quot;)\r\n```\r\n ","title":"flutter doctor --android-licenses not working due to java.lang.UnsupportedClassVersionError","body":"<p>I've had the same error, I haven't specify JAVA_HOME env, and flutter used my 1.8 java.</p>\n<p>For macOS:\nCheck your JAVA_HOME env\nin terminal with</p>\n<pre><code>printenv\n</code></pre>\n<p>if env not existed, list installed java version</p>\n<pre><code>/usr/libexec/java_home -V\n</code></pre>\n<p>choose one and execute</p>\n<pre><code>export JAVA_HOME=$(/usr/libexec/java_home -v&quot;YOUR_VERSION&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19927399,"reputation":11,"user_id":14601783,"display_name":"Joseph Yang"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675663708,"creation_date":1675663645,"answer_id":75357852,"question_id":75328050,"body_markdown":"You can run the following command to see if you have multiple java versions: \r\n\r\n    /usr/libexec/java_home -V\r\n\r\nIn my case, I had 2 versions on my mac: java 8 and java 19. I followed the official [java website][1] to remove my older version:\r\n\r\n    sudo rm -fr /Library/Internet\\ Plug-Ins/JavaAppletPlugin.plugin\r\n\r\n\r\n  [1]: https://www.java.com/en/uninstall/uninstall_instructions.html#:~:text=Windows%20ME-,Click%20Start%2C%20point%20to%20Settings%2C%20and%20then%20click%20the%20Control,with%20the%20Uninstall%2C%20click%20Yes.","title":"flutter doctor --android-licenses not working due to java.lang.UnsupportedClassVersionError","body":"<p>You can run the following command to see if you have multiple java versions:</p>\n<pre><code>/usr/libexec/java_home -V\n</code></pre>\n<p>In my case, I had 2 versions on my mac: java 8 and java 19. I followed the official <a href=\"https://www.java.com/en/uninstall/uninstall_instructions.html#:%7E:text=Windows%20ME-,Click%20Start%2C%20point%20to%20Settings%2C%20and%20then%20click%20the%20Control,with%20the%20Uninstall%2C%20click%20Yes.\" rel=\"nofollow noreferrer\">java website</a> to remove my older version:</p>\n<pre><code>sudo rm -fr /Library/Internet\\ Plug-Ins/JavaAppletPlugin.plugin\n</code></pre>\n"},{"comments":[{"owner":{"account_id":256036,"reputation":8140,"user_id":536485,"accept_rate":94,"display_name":"DarkNeuron"},"score":0,"creation_date":1677147512,"post_id":75377828,"comment_id":133281864,"body_markdown":"Checkout out `jenv` for managing java versions.","body":"Checkout out <code>jenv</code> for managing java versions."},{"owner":{"account_id":9625550,"reputation":808,"user_id":7145285,"display_name":"Kenneth Murerwa"},"score":0,"creation_date":1688890382,"post_id":75377828,"comment_id":135132685,"body_markdown":"This comment worked for me but I only had to do the first two steps; Install JDK 19 and then set JAVA_HOME to $(/usr/libexec/java_home)","body":"This comment worked for me but I only had to do the first two steps; Install JDK 19 and then set JAVA_HOME to $(/usr/libexec/java_home)"}],"tags":[],"owner":{"account_id":23307814,"reputation":141,"user_id":17387530,"display_name":"AyeshaA"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1675821596,"creation_date":1675796362,"answer_id":75377828,"question_id":75328050,"body_markdown":"I&#39;m on MacOS Ventura. I installed Android Studio today. This is how I solved the problem:\r\n\r\n 1. Downloaded [JDK19][1] \r\n 2. Followed the steps mentioned at this [link][2]\r\n 3. Since I&#39;m running Android Studio Electric Eel, opened Terminal and ran this command `cd /Applications/Android\\ Studio.app/Contents/jbr`\r\n 4. Then ran this command after `ln -s ../jbr jdk`\r\n 5. And finally, `ln -s &quot;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin&quot; jdk`\r\n 6. Went to Finder -&gt; Applications -&gt; Android Studio. Right-click Android Studio and select &#39;Show Package Contents&#39;\r\n 7. Created new folder &#39;jre&#39; in folder &#39;Contents&#39;\r\n 8. Copied contents from the &#39;jbr&#39; folder to the &#39;jre&#39; folder\r\n 9. Ran `flutter doctor` again\r\n10. Ran `flutter doctor --android-licenses`.\r\n \r\nI was able to agree to the licenses successfully after.\r\n\r\nAll the steps are also mentioned [here][3] and [here][4]\r\n\r\n \r\n\r\n\r\n  [1]: https://www.oracle.com/java/technologies/downloads/#jdk19-mac\r\n  [2]: https://mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/#what-is-usrlibexecjava-home\r\n  [3]: https://stackoverflow.com/questions/51281702/unable-to-find-bundled-java-version-on-flutter/68575967#68575967\r\n  [4]: https://levelup.gitconnected.com/how-to-install-flutter-on-macos-6e65dc592449","title":"flutter doctor --android-licenses not working due to java.lang.UnsupportedClassVersionError","body":"<p>I'm on MacOS Ventura. I installed Android Studio today. This is how I solved the problem:</p>\n<ol>\n<li>Downloaded <a href=\"https://www.oracle.com/java/technologies/downloads/#jdk19-mac\" rel=\"noreferrer\">JDK19</a></li>\n<li>Followed the steps mentioned at this <a href=\"https://mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/#what-is-usrlibexecjava-home\" rel=\"noreferrer\">link</a></li>\n<li>Since I'm running Android Studio Electric Eel, opened Terminal and ran this command <code>cd /Applications/Android\\ Studio.app/Contents/jbr</code></li>\n<li>Then ran this command after <code>ln -s ../jbr jdk</code></li>\n<li>And finally, <code>ln -s &quot;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin&quot; jdk</code></li>\n<li>Went to Finder -&gt; Applications -&gt; Android Studio. Right-click Android Studio and select 'Show Package Contents'</li>\n<li>Created new folder 'jre' in folder 'Contents'</li>\n<li>Copied contents from the 'jbr' folder to the 'jre' folder</li>\n<li>Ran <code>flutter doctor</code> again</li>\n<li>Ran <code>flutter doctor --android-licenses</code>.</li>\n</ol>\n<p>I was able to agree to the licenses successfully after.</p>\n<p>All the steps are also mentioned <a href=\"https://stackoverflow.com/questions/51281702/unable-to-find-bundled-java-version-on-flutter/68575967#68575967\">here</a> and <a href=\"https://levelup.gitconnected.com/how-to-install-flutter-on-macos-6e65dc592449\" rel=\"noreferrer\">here</a></p>\n"},{"comments":[{"owner":{"account_id":5814216,"reputation":465,"user_id":4584374,"display_name":"Joginder Malik"},"score":0,"creation_date":1679741048,"post_id":75407320,"comment_id":133777478,"body_markdown":"Solution worked great. For some additional information for ease: if you are in Android studio, then you go to the more actions -&gt; SDK manager -&gt; and then if you check off &quot;Hide Obsolete Packages&quot; and &quot;Show Package Details&quot; then you should be able to find SDK command-line tools 8.0 in the command line tools.","body":"Solution worked great. For some additional information for ease: if you are in Android studio, then you go to the more actions -&gt; SDK manager -&gt; and then if you check off &quot;Hide Obsolete Packages&quot; and &quot;Show Package Details&quot; then you should be able to find SDK command-line tools 8.0 in the command line tools."}],"tags":[],"owner":{"account_id":21595689,"reputation":52,"user_id":15924696,"display_name":"Thura Khant Thein"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1676007457,"creation_date":1676007313,"answer_id":75407320,"question_id":75328050,"body_markdown":"Try This (For Windows)\r\n 1. Uncheck Android SDK command-line Tools (latest)\r\n 2. Check Android SDK command-line Tools 8.0 \r\n 3. Click Apply\r\n 4. In Windows go to \r\n    “C:\\Users\\USERNAME\\AppData\\Local\\Android\\Sdk\\cmdline-tools”  \r\n    and rename the 8.0 folder to “latest”\r\n 5. Run Flutter doctor again.\r\n\r\n","title":"flutter doctor --android-licenses not working due to java.lang.UnsupportedClassVersionError","body":"<p>Try This (For Windows)</p>\n<ol>\n<li>Uncheck Android SDK command-line Tools (latest)</li>\n<li>Check Android SDK command-line Tools 8.0</li>\n<li>Click Apply</li>\n<li>In Windows go to\n“C:\\Users\\USERNAME\\AppData\\Local\\Android\\Sdk\\cmdline-tools”<br />\nand rename the 8.0 folder to “latest”</li>\n<li>Run Flutter doctor again.</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":1076062,"reputation":51,"user_id":1074192,"display_name":"braingraze"},"score":0,"creation_date":1680031243,"post_id":75540818,"comment_id":133826797,"body_markdown":"this is simplest way...thanks, @Abhay! also, if you cannot see all the versions installed, click the Show Package Details checkbox at the bottom.","body":"this is simplest way...thanks, @Abhay! also, if you cannot see all the versions installed, click the Show Package Details checkbox at the bottom."},{"owner":{"account_id":2772999,"reputation":192,"user_id":2387203,"display_name":"Dieter Donnert"},"score":0,"creation_date":1690510393,"post_id":75540818,"comment_id":135367330,"body_markdown":"That did not work for me. I kept getting a corrupted SDK error until I manually downloaded and installed JDK 20 and set JAVA_HOME to point to it.","body":"That did not work for me. I kept getting a corrupted SDK error until I manually downloaded and installed JDK 20 and set JAVA_HOME to point to it."}],"tags":[],"owner":{"account_id":2527433,"reputation":6510,"user_id":2196513,"accept_rate":29,"display_name":"Abhay"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1677129449,"creation_date":1677129449,"answer_id":75540818,"question_id":75328050,"body_markdown":"There is a simple way to resolve this issue.\r\n - Check java version you installed on your machine. If it is version 8, Installed Android SDK Command-line Tools 8.0 &amp; uninstalled latest version.\r\n [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bZXeD.png","title":"flutter doctor --android-licenses not working due to java.lang.UnsupportedClassVersionError","body":"<p>There is a simple way to resolve this issue.</p>\n<ul>\n<li>Check java version you installed on your machine. If it is version 8, Installed Android SDK Command-line Tools 8.0 &amp; uninstalled latest version.\n<a href=\"https://i.stack.imgur.com/bZXeD.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/bZXeD.png\" alt=\"enter image description here\" /></a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":27914276,"reputation":11,"user_id":21315757,"display_name":"ABI"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677726202,"creation_date":1677726118,"answer_id":75610959,"question_id":75328050,"body_markdown":"The problem seems to be when the android studio installed is **Android Studio Electric Eel**\r\n\r\nAll you have to do is:\r\n\r\n 1. Follow this link and ddownload - install this jdk https://www.oracle.com/java/technologies/downloads/#jdk19-mac\r\n 2. After installing, goto **Finder -&gt; Applications -&gt; Android Studio. Right-click on Android Studio and select &#39;Show Package Contents&#39;**\r\n3. Open the **Contents** folder and create new folder and name it **jre**\r\n4. There&#39;s a folder named **jbr** open it and copy the folder inside it and paste it into your newly created folder on step 3 (jre).\r\n5. You can now be able to accept the licences by running- **flutter doctor --android-licences**\r\n \r\n\r\n","title":"flutter doctor --android-licenses not working due to java.lang.UnsupportedClassVersionError","body":"<p>The problem seems to be when the android studio installed is <strong>Android Studio Electric Eel</strong></p>\n<p>All you have to do is:</p>\n<ol>\n<li>Follow this link and ddownload - install this jdk <a href=\"https://www.oracle.com/java/technologies/downloads/#jdk19-mac\" rel=\"nofollow noreferrer\">https://www.oracle.com/java/technologies/downloads/#jdk19-mac</a></li>\n<li>After installing, goto <strong>Finder -&gt; Applications -&gt; Android Studio. Right-click on Android Studio and select 'Show Package Contents'</strong></li>\n<li>Open the <strong>Contents</strong> folder and create new folder and name it <strong>jre</strong></li>\n<li>There's a folder named <strong>jbr</strong> open it and copy the folder inside it and paste it into your newly created folder on step 3 (jre).</li>\n<li>You can now be able to accept the licences by running- <strong>flutter doctor --android-licences</strong></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":21733263,"reputation":319,"user_id":16041661,"display_name":"user128440"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687447881,"creation_date":1687447881,"answer_id":76533506,"question_id":75328050,"body_markdown":"In my case on Windows the reason was that Flutter searched Android SDK Command-line tools under sdk folder instead of Sdk.","title":"flutter doctor --android-licenses not working due to java.lang.UnsupportedClassVersionError","body":"<p>In my case on Windows the reason was that Flutter searched Android SDK Command-line tools under sdk folder instead of Sdk.</p>\n"},{"tags":[],"owner":{"account_id":29188636,"reputation":1,"user_id":22361190,"display_name":"XanderOps"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691549792,"creation_date":1691549792,"answer_id":76864289,"question_id":75328050,"body_markdown":"I found a simple solution to the problem - by updating the JDK directly and then reinstalling Android Studio. I faced a similar issue initially, i use windows 10 pro and here&#39;s how I resolved it:\r\n\r\n - Check for updates for Flutter. In my case, I was using version 3.10.6.\r\n - Verify and update the JDK installed on your system. I upgraded from Java 8 to Java 20.0.2.\r\n - Update Android Studio to the latest version. I was previously using Electric Eel and updated to Giraffe.\r\n - Re-download the SDKs. I had initially downloaded them while on the Electric Eel version, and upon updating, I found that the SDKs didn&#39;t need to be updated separately. This saved me some time. During the uninstallation of Electric Eel, I didn&#39;t delete the SDK cache.\r\n - Run `flutter doctor -v` again and accept android licenses by `flutter doctor --android-licenses`.\r\n\r\nIt&#39;s important to note that Flutter only functions with the most up-to-date version of JAVA, which is closely tied to the version of Android Studio you&#39;re using.","title":"flutter doctor --android-licenses not working due to java.lang.UnsupportedClassVersionError","body":"<p>I found a simple solution to the problem - by updating the JDK directly and then reinstalling Android Studio. I faced a similar issue initially, i use windows 10 pro and here's how I resolved it:</p>\n<ul>\n<li>Check for updates for Flutter. In my case, I was using version 3.10.6.</li>\n<li>Verify and update the JDK installed on your system. I upgraded from Java 8 to Java 20.0.2.</li>\n<li>Update Android Studio to the latest version. I was previously using Electric Eel and updated to Giraffe.</li>\n<li>Re-download the SDKs. I had initially downloaded them while on the Electric Eel version, and upon updating, I found that the SDKs didn't need to be updated separately. This saved me some time. During the uninstallation of Electric Eel, I didn't delete the SDK cache.</li>\n<li>Run <code>flutter doctor -v</code> again and accept android licenses by <code>flutter doctor --android-licenses</code>.</li>\n</ul>\n<p>It's important to note that Flutter only functions with the most up-to-date version of JAVA, which is closely tied to the version of Android Studio you're using.</p>\n"}],"owner":{"account_id":21705418,"reputation":169,"user_id":16017956,"display_name":"Ajay Jha"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14568,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"answer_count":9,"score":17,"last_activity_date":1691549792,"creation_date":1675365835,"question_id":75328050,"body_markdown":"I am trying to accept flutter doctor --android-licenses but I am getting this error:\r\n\r\n```\r\nError: A JNI error has occurred, please check your installation and try again\r\nException in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: com/android/prefs/AndroidLocationsProvider has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0\r\n```","title":"flutter doctor --android-licenses not working due to java.lang.UnsupportedClassVersionError","body":"<p>I am trying to accept flutter doctor --android-licenses but I am getting this error:</p>\n<pre><code>Error: A JNI error has occurred, please check your installation and try again\nException in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: com/android/prefs/AndroidLocationsProvider has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0\n</code></pre>\n"},{"tags":["java","android","android-studio","debugging"],"answers":[{"comments":[{"owner":{"account_id":8900272,"reputation":2515,"user_id":6643940,"display_name":"H.A.H."},"score":2,"creation_date":1559721812,"post_id":53962958,"comment_id":99504872,"body_markdown":"Killing the adb.exe by hand works for me every time. Manual restart from the studio does not work, when I get this error.","body":"Killing the adb.exe by hand works for me every time. Manual restart from the studio does not work, when I get this error."},{"owner":{"account_id":1500298,"reputation":147,"user_id":1405202,"display_name":"LordWabbit"},"score":0,"creation_date":1603111306,"post_id":53962958,"comment_id":113924080,"body_markdown":"This works for me, but only when it&#39;s in use and I have to force kill it.  &quot;taskkill /IM adb.exe /F&quot; Which happens when it&#39;s in actual use trying to connect.  If I stop the debugging session and then kill it, it doesn&#39;t work.","body":"This works for me, but only when it&#39;s in use and I have to force kill it.  &quot;taskkill /IM adb.exe /F&quot; Which happens when it&#39;s in actual use trying to connect.  If I stop the debugging session and then kill it, it doesn&#39;t work."}],"tags":[],"owner":{"account_id":14048539,"reputation":2521,"user_id":10148053,"display_name":"Daniel B."},"comment_count":2,"down_vote_count":1,"up_vote_count":42,"is_accepted":true,"score":41,"last_activity_date":1546022367,"creation_date":1546022367,"answer_id":53962958,"question_id":53962831,"body_markdown":"You need to restart the ADB. \r\n\r\nkill adb.exe process.\r\n\r\nhttps://stackoverflow.com/questions/29826101/how-to-restart-adb-manually-from-android-studio","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>You need to restart the ADB. </p>\n\n<p>kill adb.exe process.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/29826101/how-to-restart-adb-manually-from-android-studio\">how to restart ADB manually from Android Studio</a></p>\n"},{"tags":[],"owner":{"account_id":1895347,"reputation":502,"user_id":1712446,"display_name":"Azhagthott"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1560245076,"creation_date":1557972406,"answer_id":56159830,"question_id":53962831,"body_markdown":"\r\n\r\nCheck if you have selected the right Build Variant, usually &quot;**release**&quot; comes with `debuggable false`\r\n\r\nExample:\r\n\r\n     buildTypes {\r\n            release {\r\n                debuggable false\r\n                ....\r\n            }\r\n        }\r\n\r\nis not recommendable change **release** to `debuggable true`, just change the right variant\r\n\r\n       debug {\r\n            debuggable true\r\n            ....\r\n        }","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>Check if you have selected the right Build Variant, usually \"<strong>release</strong>\" comes with <code>debuggable false</code></p>\n\n<p>Example:</p>\n\n<pre><code> buildTypes {\n        release {\n            debuggable false\n            ....\n        }\n    }\n</code></pre>\n\n<p>is not recommendable change <strong>release</strong> to <code>debuggable true</code>, just change the right variant</p>\n\n<pre><code>   debug {\n        debuggable true\n        ....\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":93940,"reputation":5106,"user_id":256770,"accept_rate":31,"display_name":"Farrukh Najmi"},"score":0,"creation_date":1571686826,"post_id":56539022,"comment_id":103316110,"body_markdown":"This was my problem. Thanks a million @nuwancy","body":"This was my problem. Thanks a million @nuwancy"},{"owner":{"account_id":8479842,"reputation":3119,"user_id":6359851,"accept_rate":66,"display_name":"Erfan"},"score":0,"creation_date":1607851916,"post_id":56539022,"comment_id":115397901,"body_markdown":"killing the adb.exe was usleese for me , but this work like charm ;) +","body":"killing the adb.exe was usleese for me , but this work like charm ;) +"},{"owner":{"account_id":155220,"reputation":6787,"user_id":371720,"accept_rate":58,"display_name":"Shihab Uddin"},"score":0,"creation_date":1625737976,"post_id":56539022,"comment_id":120708869,"body_markdown":"after loosing some  hours i find this solution. thanks man.","body":"after loosing some  hours i find this solution. thanks man."},{"owner":{"account_id":3015720,"reputation":389,"user_id":2557957,"display_name":"softburger"},"score":0,"creation_date":1668757929,"post_id":56539022,"comment_id":131488528,"body_markdown":"The answer hit my problem :-) Thx!","body":"The answer hit my problem :-) Thx!"}],"tags":[],"owner":{"account_id":11626501,"reputation":371,"user_id":8516131,"display_name":"nuwancy"},"comment_count":4,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1560239911,"creation_date":1560239911,"answer_id":56539022,"question_id":53962831,"body_markdown":"In My case, \r\nFor some reason I disabled Instant run and it has changed the Launch value from &quot;Default Activity&quot; to &quot;Nothing&quot; in &quot;Run/Debug configurations&quot;. So always it says &quot;Could not connect to remote process. Aborting debug session&quot; and I was not able to debug. I enabled Instant  and changed the Launch value from &quot;Nothing&quot; to &quot;Default Activity&quot;   in &quot;Run/Debug configurations&quot; and it worked. Hope this will help some one.\r\n\r\n(to get Run/Debug configurations, click &quot;app&quot; drop down and click Edit Configurations)","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>In My case, \nFor some reason I disabled Instant run and it has changed the Launch value from \"Default Activity\" to \"Nothing\" in \"Run/Debug configurations\". So always it says \"Could not connect to remote process. Aborting debug session\" and I was not able to debug. I enabled Instant  and changed the Launch value from \"Nothing\" to \"Default Activity\"   in \"Run/Debug configurations\" and it worked. Hope this will help some one.</p>\n\n<p>(to get Run/Debug configurations, click \"app\" drop down and click Edit Configurations)</p>\n"},{"tags":[],"owner":{"account_id":3083445,"reputation":16847,"user_id":2611161,"accept_rate":57,"display_name":"Kevin ABRIOUX"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1578908462,"creation_date":1578908462,"answer_id":59713936,"question_id":53962831,"body_markdown":"In command line : \r\n\r\n    adb kill-server &amp;&amp; adb start-server\r\n\r\nThis command will restart ADB","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>In command line : </p>\n\n<pre><code>adb kill-server &amp;&amp; adb start-server\n</code></pre>\n\n<p>This command will restart ADB</p>\n"},{"comments":[{"owner":{"account_id":12561968,"reputation":5864,"user_id":9139384,"display_name":"Yennefer"},"score":3,"creation_date":1582700078,"post_id":60263103,"comment_id":106862992,"body_markdown":"Could you please explain the downvote so that I can improve my answer?","body":"Could you please explain the downvote so that I can improve my answer?"}],"tags":[],"owner":{"account_id":12561968,"reputation":5864,"user_id":9139384,"display_name":"Yennefer"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1581944679,"creation_date":1581944679,"answer_id":60263103,"question_id":53962831,"body_markdown":"By default Android Studio builds the `debug` version of the application. However, during the publishing phase you may have switched to the `release` one as the tutorial suggests.\r\n\r\nADB won&#39;t be able to attach to the application unless you revert to the `debug` configuration **or** you allow to the debug the `release` one.\r\n\r\nIf nothing of this works, you may resort in restarting ADB as explianed in [How to restart ADB manually from Android Studio][1]\r\n\r\n**Revert to debug configuration**\r\n\r\n 1. Choose _Build-&gt;Select Build Variant_\r\n 2. Pick up ``debug`` in the second column\r\n 3. Deploy the application again\r\n\r\n**Allow the release version to be debugged**\r\n\r\n 1. Select your application node in the tree\r\n 2. Right click and choose _Open Module Settings_ (or hit F4)\r\n 3. Select _Build Variants_ on the left\r\n 4. Choose ``release`` on the right\r\n 5. Set ``debuggable`` to ``true``\r\n 6. Apply and deploy the application\r\n\r\nKeep in mind that your life won&#39;t be easy as your application may be optimized and therefore not debugger friendly (e.g. you might not be able to step in certain methods, or view some local variables).\r\n\r\n[1]: https://stackoverflow.com/a/29826345","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>By default Android Studio builds the <code>debug</code> version of the application. However, during the publishing phase you may have switched to the <code>release</code> one as the tutorial suggests.</p>\n\n<p>ADB won't be able to attach to the application unless you revert to the <code>debug</code> configuration <strong>or</strong> you allow to the debug the <code>release</code> one.</p>\n\n<p>If nothing of this works, you may resort in restarting ADB as explianed in <a href=\"https://stackoverflow.com/a/29826345\">How to restart ADB manually from Android Studio</a></p>\n\n<p><strong>Revert to debug configuration</strong></p>\n\n<ol>\n<li>Choose <em>Build->Select Build Variant</em></li>\n<li>Pick up <code>debug</code> in the second column</li>\n<li>Deploy the application again</li>\n</ol>\n\n<p><strong>Allow the release version to be debugged</strong></p>\n\n<ol>\n<li>Select your application node in the tree</li>\n<li>Right click and choose <em>Open Module Settings</em> (or hit F4)</li>\n<li>Select <em>Build Variants</em> on the left</li>\n<li>Choose <code>release</code> on the right</li>\n<li>Set <code>debuggable</code> to <code>true</code></li>\n<li>Apply and deploy the application</li>\n</ol>\n\n<p>Keep in mind that your life won't be easy as your application may be optimized and therefore not debugger friendly (e.g. you might not be able to step in certain methods, or view some local variables).</p>\n"},{"tags":[],"owner":{"account_id":75473,"reputation":1020,"user_id":216479,"accept_rate":50,"display_name":"Sergey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591512377,"creation_date":1591512377,"answer_id":62241844,"question_id":53962831,"body_markdown":"I got this error message when the phone was connected both via wi-fi (using &quot;adb tcpip 5555&quot; and &quot;adb connect 192.168.0.100:5555&quot; commands) and via a usb cable. Disconnecting the USB cable resolved the issue.","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>I got this error message when the phone was connected both via wi-fi (using \"adb tcpip 5555\" and \"adb connect 192.168.0.100:5555\" commands) and via a usb cable. Disconnecting the USB cable resolved the issue.</p>\n"},{"tags":[],"owner":{"account_id":3128972,"reputation":3647,"user_id":2647306,"accept_rate":75,"display_name":"dacoinminster"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1595976439,"creation_date":1595976439,"answer_id":63143873,"question_id":53962831,"body_markdown":"The other solutions posted here did not help me. I eventually discovered that creating a new simulator instance (tools-&gt;AVD Manager-&gt;Create virtual device) solved my problem. I was unable to get the previous simulator working again.","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>The other solutions posted here did not help me. I eventually discovered that creating a new simulator instance (tools-&gt;AVD Manager-&gt;Create virtual device) solved my problem. I was unable to get the previous simulator working again.</p>\n"},{"tags":[],"owner":{"account_id":8278935,"reputation":1367,"user_id":6224209,"display_name":"Vanya Rachel"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1619524068,"creation_date":1619524068,"answer_id":67282464,"question_id":53962831,"body_markdown":"I try invalidate cache / restart and it&#39;s work","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>I try invalidate cache / restart and it's work</p>\n"},{"comments":[{"owner":{"account_id":1340078,"reputation":6396,"user_id":1281930,"accept_rate":82,"display_name":"guness"},"score":0,"creation_date":1635947970,"post_id":68624662,"comment_id":123427860,"body_markdown":"Definitely one of the use cases. When this is happening, no other solutions work.","body":"Definitely one of the use cases. When this is happening, no other solutions work."}],"tags":[],"owner":{"account_id":18505779,"reputation":707,"user_id":13482100,"display_name":"Kuzneц"},"comment_count":1,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1627919994,"creation_date":1627919994,"answer_id":68624662,"question_id":53962831,"body_markdown":"Sometimes this happens when two Android-capable IDEs are opened, e.g. Android Studio and IDEA. Shutdown one of the two (or disable Android plugin in IDEA) helps.","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>Sometimes this happens when two Android-capable IDEs are opened, e.g. Android Studio and IDEA. Shutdown one of the two (or disable Android plugin in IDEA) helps.</p>\n"},{"tags":[],"owner":{"account_id":22670374,"reputation":86,"user_id":16842210,"display_name":"Claudio"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636032265,"creation_date":1636026465,"answer_id":69838765,"question_id":53962831,"body_markdown":"Restarted the ABD server. First the device had to be connected. Look for the &quot;Assistant&quot; tab in android studio (on the right side it usually is), and press next until you see the option to reset the ABD server.","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>Restarted the ABD server. First the device had to be connected. Look for the &quot;Assistant&quot; tab in android studio (on the right side it usually is), and press next until you see the option to reset the ABD server.</p>\n"},{"comments":[{"owner":{"account_id":14636333,"reputation":190,"user_id":10570363,"display_name":"Ahmed Nezhi"},"score":1,"creation_date":1644228173,"post_id":70119963,"comment_id":125540159,"body_markdown":"I had the same issue after upgrading android studio to Bumblebee, this solution worked for me as well a teammate, Thanks @Mosen_AB","body":"I had the same issue after upgrading android studio to Bumblebee, this solution worked for me as well a teammate, Thanks @Mosen_AB"}],"tags":[],"owner":{"account_id":9869950,"reputation":41,"user_id":7309977,"display_name":"Mohsen_AB"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637904850,"creation_date":1637904850,"answer_id":70119963,"question_id":53962831,"body_markdown":"I did\r\n\r\n---&gt;adb kill-server &amp;&amp; adb start-server\r\n\r\n---&gt;invalidate cache / restart\r\n\r\nbut not work yet\r\n\r\n    Waiting for application to come online: com.example.distribution_system | com.example.distribution_system.test\r\n    \r\n    Waiting for application to come online: com.example.distribution_system | com.example.distribution_system.test\r\n        \r\n    Waiting for application to come online: com.example.distribution_system | com.example.distribution_system.test\r\n        \r\n    Could not connect to remote process. Aborting debug session.\r\n\r\nimage1:--&gt; [1]: https://i.stack.imgur.com/HZF5D.png\r\n\r\nimage2:--&gt; [2]: https://i.stack.imgur.com/hrE4a.png","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>I did</p>\n<p>---&gt;adb kill-server &amp;&amp; adb start-server</p>\n<p>---&gt;invalidate cache / restart</p>\n<p>but not work yet</p>\n<pre><code>Waiting for application to come online: com.example.distribution_system | com.example.distribution_system.test\n\nWaiting for application to come online: com.example.distribution_system | com.example.distribution_system.test\n    \nWaiting for application to come online: com.example.distribution_system | com.example.distribution_system.test\n    \nCould not connect to remote process. Aborting debug session.\n</code></pre>\n<p>image1:--&gt; [1]: <a href=\"https://i.stack.imgur.com/HZF5D.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/HZF5D.png</a></p>\n<p>image2:--&gt; [2]: <a href=\"https://i.stack.imgur.com/hrE4a.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/hrE4a.png</a></p>\n"},{"tags":[],"owner":{"account_id":2690160,"reputation":179,"user_id":8950725,"display_name":"Bhola Bhala"},"comment_count":0,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1645645205,"creation_date":1645645205,"answer_id":71243097,"question_id":53962831,"body_markdown":"Verify on AndroidManifest that your LAUNCHER activity has:\r\n\r\n    android:exported=&quot;true&quot;","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>Verify on AndroidManifest that your LAUNCHER activity has:</p>\n<pre><code>android:exported=&quot;true&quot;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":12862168,"reputation":61,"user_id":9303555,"display_name":"heri.sulis"},"score":0,"creation_date":1650982853,"post_id":71281440,"comment_id":127249781,"body_markdown":"Thank you, this is the only way that resolves my issue.\nIn my case is Android Studio 2021.1.1 Patch 3, cannot connect to Debugger using AVD Android API 29,","body":"Thank you, this is the only way that resolves my issue. In my case is Android Studio 2021.1.1 Patch 3, cannot connect to Debugger using AVD Android API 29,"}],"tags":[],"owner":{"account_id":9405764,"reputation":31,"user_id":8039388,"display_name":"D Smith"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1645924705,"creation_date":1645924705,"answer_id":71281440,"question_id":53962831,"body_markdown":"+1 to Kuzneц&#39;s answer.\r\n\r\nWhen Intellij and Android Studio are both open, apparently the Android plugin in Intellij needs to be disabled.  This wasn&#39;t always the case but it resolve the issue for me.\r\n\r\n - Mac OSX 12.2.1 \r\n - IntelliJ 2021.3.1 \r\n - Android Studio 2021.1.1 Patch 2\r\n\r\n","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>+1 to Kuzneц's answer.</p>\n<p>When Intellij and Android Studio are both open, apparently the Android plugin in Intellij needs to be disabled.  This wasn't always the case but it resolve the issue for me.</p>\n<ul>\n<li>Mac OSX 12.2.1</li>\n<li>IntelliJ 2021.3.1</li>\n<li>Android Studio 2021.1.1 Patch 2</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":25141312,"reputation":1,"user_id":18987622,"display_name":"Сергей Озерный"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651224294,"creation_date":1651224294,"answer_id":72055729,"question_id":53962831,"body_markdown":"I followed all the recommendations above, but the problem was solved only after I used the Generate Signed Bundle and selected the desired flavor","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>I followed all the recommendations above, but the problem was solved only after I used the Generate Signed Bundle and selected the desired flavor</p>\n"},{"tags":[],"owner":{"account_id":7086877,"reputation":317,"user_id":5423444,"display_name":"Nigel N."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658828718,"creation_date":1658828718,"answer_id":73121165,"question_id":53962831,"body_markdown":"For me the problem was a wrong launch flag set in the Run/Debug Configurations. I found out about this by taking the adb command that is executed to launch the app, which can be found in the &quot;Run&quot; tab. The command looks like this:\r\n\r\n    adb shell am start -n &quot;com.your.package....&quot; -a android.intent.action.MAIN -c android.intent.category.LAUNCHER\r\n\r\nBy executing the command manually in the terminal, i got an error message which pointed me to the problem.","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>For me the problem was a wrong launch flag set in the Run/Debug Configurations. I found out about this by taking the adb command that is executed to launch the app, which can be found in the &quot;Run&quot; tab. The command looks like this:</p>\n<pre><code>adb shell am start -n &quot;com.your.package....&quot; -a android.intent.action.MAIN -c android.intent.category.LAUNCHER\n</code></pre>\n<p>By executing the command manually in the terminal, i got an error message which pointed me to the problem.</p>\n"},{"tags":[],"owner":{"account_id":8235698,"reputation":145,"user_id":6194988,"accept_rate":0,"display_name":"Mohamed Mohamed Taha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662977788,"creation_date":1662977788,"answer_id":73687720,"question_id":53962831,"body_markdown":"All solution didn&#39;t fix my issue, If you face it same me try that solution \r\n[enter link description here][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/67711539/how-to-fix-error-could-not-connect-to-remote-process-aborting-debug-session","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>All solution didn't fix my issue, If you face it same me try that solution\n<a href=\"https://stackoverflow.com/questions/67711539/how-to-fix-error-could-not-connect-to-remote-process-aborting-debug-session\">enter link description here</a></p>\n"},{"tags":[],"owner":{"account_id":1771599,"reputation":13393,"user_id":1616263,"display_name":"crifan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691548175,"creation_date":1691548175,"answer_id":76864208,"question_id":53962831,"body_markdown":"* My case\r\n  * use `Android Studio` create a simple android app but **no activity**\r\n    * current settings: `Android Studio`-&gt;`Run`-&gt;`Edit Configuration`-&gt;`General`-&gt;`Launch Options`-&gt;`Launch`: **Nothing**\r\n      * for later used as Xposed plugin, which is no need UI=activity\r\n* Error\r\n  * first `Timed out waiting for process to appear on`\r\n  * final error: `Processes are not found Aborting session`\r\n* Reason\r\n  * for Android app, `activity` ~= `process`\r\n    * no activity mean can not debug\r\n* Solution\r\n  * for me\r\n    * done nothing\r\n      * for no activity android app: can NOT debug\r\n        * activity == UI page ~= proecess, so no activity means no process, cause can not debug\r\n  * for others (normal android with activity)\r\n    * change `Launch` to **Default Activity**\r\n      * ![](https://i.stack.imgur.com/u4Rz0.png)\r\n\r\n\r\n","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<ul>\n<li>My case\n<ul>\n<li>use <code>Android Studio</code> create a simple android app but <strong>no activity</strong>\n<ul>\n<li>current settings: <code>Android Studio</code>-&gt;<code>Run</code>-&gt;<code>Edit Configuration</code>-&gt;<code>General</code>-&gt;<code>Launch Options</code>-&gt;<code>Launch</code>: <strong>Nothing</strong>\n<ul>\n<li>for later used as Xposed plugin, which is no need UI=activity</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Error\n<ul>\n<li>first <code>Timed out waiting for process to appear on</code></li>\n<li>final error: <code>Processes are not found Aborting session</code></li>\n</ul>\n</li>\n<li>Reason\n<ul>\n<li>for Android app, <code>activity</code> ~= <code>process</code>\n<ul>\n<li>no activity mean can not debug</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Solution\n<ul>\n<li>for me\n<ul>\n<li>done nothing\n<ul>\n<li>for no activity android app: can NOT debug\n<ul>\n<li>activity == UI page ~= proecess, so no activity means no process, cause can not debug</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>for others (normal android with activity)\n<ul>\n<li>change <code>Launch</code> to <strong>Default Activity</strong>\n<ul>\n<li><img src=\"https://i.stack.imgur.com/u4Rz0.png\" alt=\"\" /></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n"}],"owner":{"account_id":10143038,"reputation":495,"user_id":7492134,"display_name":"SAPHI"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41155,"favorite_count":0,"down_vote_count":0,"up_vote_count":48,"accepted_answer_id":53962958,"answer_count":17,"score":48,"last_activity_date":1691548175,"creation_date":1546021651,"question_id":53962831,"body_markdown":"I am making a android studio project and I try to debug my application.\r\n\r\nRunning the application works fine, but when I try to debug it I get this error: \r\n\r\n``Could not connect to remote process. Aborting debug session.``\r\n\r\nWhat can I do to fix the issue?\r\n","title":"How do I fix &quot;Could not connect to remote process&quot; while trying to debug the application?","body":"<p>I am making a android studio project and I try to debug my application.</p>\n\n<p>Running the application works fine, but when I try to debug it I get this error: </p>\n\n<p><code>Could not connect to remote process. Aborting debug session.</code></p>\n\n<p>What can I do to fix the issue?</p>\n"},{"tags":["java","eclipse","function","navigation"],"comments":[{"owner":{"account_id":1820003,"reputation":49625,"user_id":1654265,"accept_rate":93,"display_name":"Andrea Ligios"},"score":14,"creation_date":1379518196,"post_id":18876191,"comment_id":27857659,"body_markdown":"Window -&gt; Show View -&gt; Navigator","body":"Window -&gt; Show View -&gt; Navigator"}],"answers":[{"tags":[],"owner":{"account_id":6620032,"reputation":141,"user_id":5112072,"display_name":"Micha"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1436808582,"creation_date":1436807830,"answer_id":31389552,"question_id":18876191,"body_markdown":"You go to Window -&gt; Show View -&gt; package explorer\r\nif it&#39;s not listed, click on &quot;Other&quot; and type it in.\r\n","title":"How to open the navigation pane in eclipse?","body":"<p>You go to Window -> Show View -> package explorer\nif it's not listed, click on \"Other\" and type it in.</p>\n"},{"tags":[],"owner":{"account_id":4288286,"reputation":479,"user_id":3505302,"accept_rate":25,"display_name":"mystertyboy"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1463569711,"creation_date":1463569711,"answer_id":37297812,"question_id":18876191,"body_markdown":"GO to **Window** option of elicpse ,\r\nclick on  **ShowView** Go to **other &gt;&gt; General &gt;&gt; Navigation** and press **OK**.","title":"How to open the navigation pane in eclipse?","body":"<p>GO to <strong>Window</strong> option of elicpse ,\nclick on  <strong>ShowView</strong> Go to <strong>other >> General >> Navigation</strong> and press <strong>OK</strong>.</p>\n"},{"tags":[],"owner":{"account_id":7841989,"reputation":273542,"user_id":5928186,"accept_rate":85,"display_name":"Shubham Khatri"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1486846091,"creation_date":1486846091,"answer_id":42181057,"question_id":18876191,"body_markdown":"In order to open the Nvaigator in eclipse you need to follow the following\r\n\r\n1. Click on `Windows` option in the Toolbar\r\n2. Click on `Show View` option \r\n3. Select the Navigator option.\r\n\r\nThis will open up the navigator in your eclipse\r\n","title":"How to open the navigation pane in eclipse?","body":"<p>In order to open the Nvaigator in eclipse you need to follow the following</p>\n\n<ol>\n<li>Click on <code>Windows</code> option in the Toolbar</li>\n<li>Click on <code>Show View</code> option </li>\n<li>Select the Navigator option.</li>\n</ol>\n\n<p>This will open up the navigator in your eclipse</p>\n"}],"owner":{"account_id":3320895,"reputation":217,"user_id":2792108,"accept_rate":0,"display_name":"please help"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44834,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"answer_count":3,"score":19,"last_activity_date":1691548006,"creation_date":1379517554,"question_id":18876191,"body_markdown":"I clicked something and now the navigation pane is gone. How do I get it back so I can see everything? I would post a picture but its not letting me\r\n\r\n\r\n\r\n","title":"How to open the navigation pane in eclipse?","body":"<p>I clicked something and now the navigation pane is gone. How do I get it back so I can see everything? I would post a picture but its not letting me</p>\n"},{"tags":["java","android","public-key-exchange"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1691548472,"post_id":76864190,"comment_id":135505289,"body_markdown":"Does this https://stackoverflow.com/questions/63171510/java-security-cert-certificateparsingexception-java-io-ioexception-unknown-nam help?","body":"Does this <a href=\"https://stackoverflow.com/questions/63171510/java-security-cert-certificateparsingexception-java-io-ioexception-unknown-nam\" title=\"java security cert certificateparsingexception java io ioexception unknown nam\">stackoverflow.com/questions/63171510/&hellip;</a> help?"}],"owner":{"account_id":18533727,"reputation":1,"user_id":13503884,"display_name":"王煜仁"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691547837,"creation_date":1691547837,"question_id":76864190,"body_markdown":"I want get public key from `.cer` file, but failure.\r\nI find this error from Android newest system version, i can get public key in my lower Android system version.\r\n\r\n```\r\nString path = &quot;/Users/mycompute/Projects/Test/src/workspace/mykeychain.cer&quot;;\r\nCertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\r\nFileInputStream in = new FileInputStream(path);\r\nCertificate c = cf.generateCertificate(in);\r\nPublicKey pubkey = c.getPublicKey();\r\n\r\nin.close();\r\n```\r\n\r\nthis code `Certificate c = cf.generateCertificate(in);` make error\r\n\r\nerror message:\r\n\r\n```\r\njava.io.IOException: Unknown named curve: 1.2.156.10197.1.301\r\n```\r\n\r\n\r\nwhat should i do?\r\n\r\n\r\ni want get the file Hex public key.","title":"Android newest system version could not read .cer file public key","body":"<p>I want get public key from <code>.cer</code> file, but failure.\nI find this error from Android newest system version, i can get public key in my lower Android system version.</p>\n<pre><code>String path = &quot;/Users/mycompute/Projects/Test/src/workspace/mykeychain.cer&quot;;\nCertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\nFileInputStream in = new FileInputStream(path);\nCertificate c = cf.generateCertificate(in);\nPublicKey pubkey = c.getPublicKey();\n\nin.close();\n</code></pre>\n<p>this code <code>Certificate c = cf.generateCertificate(in);</code> make error</p>\n<p>error message:</p>\n<pre><code>java.io.IOException: Unknown named curve: 1.2.156.10197.1.301\n</code></pre>\n<p>what should i do?</p>\n<p>i want get the file Hex public key.</p>\n"},{"tags":["java","excel","spring","csv","tomcat"],"comments":[{"owner":{"account_id":26738302,"reputation":74,"user_id":20339497,"display_name":"HuaJFrame"},"score":0,"creation_date":1691547927,"post_id":76864176,"comment_id":135505258,"body_markdown":"`CSV_HEADERS` is `String[]`, which records the header row","body":"<code>CSV_HEADERS</code> is <code>String[]</code>, which records the header row"}],"owner":{"account_id":26738302,"reputation":74,"user_id":20339497,"display_name":"HuaJFrame"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691548168,"answer_count":0,"score":0,"last_activity_date":1691547535,"creation_date":1691547535,"question_id":76864176,"body_markdown":"I want to splicing the data in the list with StringBuilder and return the csv file to the front end, but the data contains Chinese characters. When I open it with Microsoft Notepad, there will be no garbled characters, but when I open it with Excel, garbled characters will appear.\r\n\r\n```java\r\npublic void generateCSV(List&lt;A&gt; data, HttpServletResponse response){\r\n    StringBulider sb = new StringBuilder();\r\n    // append BOM\r\n    sb.append(&#39;\\uFEFF&#39;);\r\n    // append title\r\n    sb.append(String.join(&quot;,&quot;, CSV_HEADERS));\r\n    // TODO append list data\r\n    response.setContentType(&quot;text/csv&quot;);\r\n    String encodedName = URLEncoder.encode(&quot;data.csv&quot;, StandardCharsets.UTF_8);\r\n    response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + encodedName);\r\n    OutputStream outputStream = response.getOutputStream();\r\n    outputStream.write(sb.toString().getBytes(StandardCharsets.UTF_8));\r\n    outputStream.flush();\r\n}\r\n```\r\n\r\nIt seems that adding the BOM header has no effect. The post I found on Google is to return to the front-end csv file through the file stream, but I want to try my approach. Can&#39;t I do it this way? Or something missing in my code?\r\n\r\nI&#39;d appreciate any advice.","title":"The csv spliced by StringBuilder failed to be opened with excel","body":"<p>I want to splicing the data in the list with StringBuilder and return the csv file to the front end, but the data contains Chinese characters. When I open it with Microsoft Notepad, there will be no garbled characters, but when I open it with Excel, garbled characters will appear.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void generateCSV(List&lt;A&gt; data, HttpServletResponse response){\n    StringBulider sb = new StringBuilder();\n    // append BOM\n    sb.append('\\uFEFF');\n    // append title\n    sb.append(String.join(&quot;,&quot;, CSV_HEADERS));\n    // TODO append list data\n    response.setContentType(&quot;text/csv&quot;);\n    String encodedName = URLEncoder.encode(&quot;data.csv&quot;, StandardCharsets.UTF_8);\n    response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + encodedName);\n    OutputStream outputStream = response.getOutputStream();\n    outputStream.write(sb.toString().getBytes(StandardCharsets.UTF_8));\n    outputStream.flush();\n}\n</code></pre>\n<p>It seems that adding the BOM header has no effect. The post I found on Google is to return to the front-end csv file through the file stream, but I want to try my approach. Can't I do it this way? Or something missing in my code?</p>\n<p>I'd appreciate any advice.</p>\n"},{"tags":["java","postgresql","spring-boot","spring-data-jpa","orm"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":2,"creation_date":1691547300,"post_id":76864146,"comment_id":135505205,"body_markdown":"A JSONObject can be deserialized as an Object, but a JSONArray can not be deserialized as an Object.  This as such has got nothing to do with JPA or Postgres.","body":"A JSONObject can be deserialized as an Object, but a JSONArray can not be deserialized as an Object.  This as such has got nothing to do with JPA or Postgres."},{"owner":{"account_id":15964198,"reputation":11,"user_id":11520364,"display_name":"Thiery"},"score":0,"creation_date":1691551758,"post_id":76864146,"comment_id":135505565,"body_markdown":"Thank you for your answer.\nIf you can&#39;t deserialize JSONArray to Object\nIs this the problem because there is an object in the value here?\n\n@JdbcTypeCode(SqlTypes.JSON)\n@Column(columnDefinition = &quot;jsonb&quot;)\nMap&lt;String, Object&gt; testCol;","body":"Thank you for your answer. If you can&#39;t deserialize JSONArray to Object Is this the problem because there is an object in the value here?  @JdbcTypeCode(SqlTypes.JSON) @Column(columnDefinition = &quot;jsonb&quot;) Map&lt;String, Object&gt; testCol;"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1691554818,"post_id":76864146,"comment_id":135505789,"body_markdown":"Sorry based upon your question, I can not figure what your original JSON is, and how you are calling this code.  I am guessing that there is a one-to-many relation ship between POST and SUBPOST.  I have no idea what the use of testCol is.  Linkage should be through SUBPOST:id no?","body":"Sorry based upon your question, I can not figure what your original JSON is, and how you are calling this code.  I am guessing that there is a one-to-many relation ship between POST and SUBPOST.  I have no idea what the use of testCol is.  Linkage should be through SUBPOST:id no?"}],"owner":{"account_id":15964198,"reputation":11,"user_id":11520364,"display_name":"Thiery"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691546858,"creation_date":1691546858,"question_id":76864146,"body_markdown":"How do I solve the de-serialization problem in jpa?\r\n\r\nI am using Spring Boot, java and JPA and connecting with Postgres.\r\nBut the problem is that there are Member, DashBoard, Post, and SubPost entities\r\nWhen deleting the Post entity, the top entity of the SubGraph, there are cases where even the bottom entity is deleted and sometimes it is not deleted.\r\n\r\n\r\n\r\nThe Post entity code is as follows.\r\n```\r\n@Entity\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor(access = AccessLevel.PROTECTED)\r\n@Builder\r\n@ToString\r\npublic class Post {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long graphId;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;dashboard_id&quot;)\r\n    private DashBoard dashboard;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;member_id&quot;)\r\n    private Member member;\r\n\r\n    @OneToMany(mappedBy = &quot;graph&quot;, cascade = CascadeType.ALL)\r\n    private List&lt;SubPost&gt; subPost;\r\n\r\n}\r\n```\r\n\r\n\r\nThe SubPost entity code is as follows.\r\n```\r\n@Entity\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\n@ToString\r\npublic class SubPost {\r\n\r\n    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long subgraphId;\r\n\r\n    @JdbcTypeCode(SqlTypes.JSON)\r\n    @Column(columnDefinition = &quot;jsonb&quot;)\r\n    Map&lt;String, Object&gt; testCol;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;member_id&quot;)\r\n    private Member member;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;dashboard_id&quot;)\r\n    private DashBoard dashboard;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;post_id&quot;)\r\n    private Post post;\r\n}\r\n\r\n```\r\n\r\n\r\n\r\nThe value in the test_col column is\r\n{&quot;key1&quot;: &quot;test_value1&quot;, &quot;key2&quot;: &quot;test_value2&quot;} If this is the JSON format, even if you delete Post, SubPost, a sub-entity, **can be deleted well**.\r\nBut\r\n[{&quot;key1&quot;: &quot;test_value1&quot;, &quot;key2&quot;: &quot;test_value2&quot;}] If [] is outside in this way, deleting the Post will **not delete the subentity SubGraph**.\r\n\r\n\r\nThen the following error occurs.\r\n\r\ncom.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type `java.util.LinkedHashMap&lt;java.lang.String,java.lang.Object&gt;` from Array value (token `JsonToken.START_ARRAY`)\r\nat [Source: (String)&quot;[{&quot;key1&quot;: &quot;test_value1&quot;, &quot;key2&quot;: &quot;test_value2&quot;}]&quot;; line: 1, column: 1]\r\n\r\n\r\nI think it&#39;s a good way to solve the problem by annotation or type change, is there such a way?\r\nWhat is the cause and solution of this error?\r\n\r\n\r\n\r\n\r\nThe code in the SubGraph\r\n```\r\n@JdbcTypeCode(SqlTypes.JSON)\r\n@Column(columnDefinition = &quot;jsonb&quot;)\r\nMap&lt;String, Object&gt; testCol;\r\n```\r\n\r\nI changed it like this.\r\n```\r\n@JdbcTypeCode(SqlTypes.JSON)\r\n@Column(columnDefinition = &quot;jsonb&quot;)\r\nLinkedHashMap&lt;String, Object&gt; testCol;\r\n```\r\n\r\nBut the results are the same","title":"How do I solve the de-serialization problem in Java And JPA?","body":"<p>How do I solve the de-serialization problem in jpa?</p>\n<p>I am using Spring Boot, java and JPA and connecting with Postgres.\nBut the problem is that there are Member, DashBoard, Post, and SubPost entities\nWhen deleting the Post entity, the top entity of the SubGraph, there are cases where even the bottom entity is deleted and sometimes it is not deleted.</p>\n<p>The Post entity code is as follows.</p>\n<pre><code>@Entity\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor(access = AccessLevel.PROTECTED)\n@Builder\n@ToString\npublic class Post {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long graphId;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;dashboard_id&quot;)\n    private DashBoard dashboard;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;member_id&quot;)\n    private Member member;\n\n    @OneToMany(mappedBy = &quot;graph&quot;, cascade = CascadeType.ALL)\n    private List&lt;SubPost&gt; subPost;\n\n}\n</code></pre>\n<p>The SubPost entity code is as follows.</p>\n<pre><code>@Entity\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\n@ToString\npublic class SubPost {\n\n    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long subgraphId;\n\n    @JdbcTypeCode(SqlTypes.JSON)\n    @Column(columnDefinition = &quot;jsonb&quot;)\n    Map&lt;String, Object&gt; testCol;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;member_id&quot;)\n    private Member member;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;dashboard_id&quot;)\n    private DashBoard dashboard;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;post_id&quot;)\n    private Post post;\n}\n\n</code></pre>\n<p>The value in the test_col column is\n{&quot;key1&quot;: &quot;test_value1&quot;, &quot;key2&quot;: &quot;test_value2&quot;} If this is the JSON format, even if you delete Post, SubPost, a sub-entity, <strong>can be deleted well</strong>.\nBut\n[{&quot;key1&quot;: &quot;test_value1&quot;, &quot;key2&quot;: &quot;test_value2&quot;}] If [] is outside in this way, deleting the Post will <strong>not delete the subentity SubGraph</strong>.</p>\n<p>Then the following error occurs.</p>\n<p>com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type <code>java.util.LinkedHashMap&lt;java.lang.String,java.lang.Object&gt;</code> from Array value (token <code>JsonToken.START_ARRAY</code>)\nat [Source: (String)&quot;[{&quot;key1&quot;: &quot;test_value1&quot;, &quot;key2&quot;: &quot;test_value2&quot;}]&quot;; line: 1, column: 1]</p>\n<p>I think it's a good way to solve the problem by annotation or type change, is there such a way?\nWhat is the cause and solution of this error?</p>\n<p>The code in the SubGraph</p>\n<pre><code>@JdbcTypeCode(SqlTypes.JSON)\n@Column(columnDefinition = &quot;jsonb&quot;)\nMap&lt;String, Object&gt; testCol;\n</code></pre>\n<p>I changed it like this.</p>\n<pre><code>@JdbcTypeCode(SqlTypes.JSON)\n@Column(columnDefinition = &quot;jsonb&quot;)\nLinkedHashMap&lt;String, Object&gt; testCol;\n</code></pre>\n<p>But the results are the same</p>\n"},{"tags":["java","string","anagram"],"comments":[{"owner":{"account_id":1015767,"reputation":2808,"user_id":1027359,"accept_rate":71,"display_name":"dotvav"},"score":2,"creation_date":1443097339,"post_id":32761096,"comment_id":53361452,"body_markdown":"`entry.getValue() != map2.get(entry.getKey())` will test Integer object identity. Try with `!entry.getValue().equals(map2.get(entry.getKey()))`. Not sure if this will answer your question because I can&#39;t try your test cases.","body":"<code>entry.getValue() != map2.get(entry.getKey())</code> will test Integer object identity. Try with <code>!entry.getValue().equals(map2.get(entry.getKey()))</code>. Not sure if this will answer your question because I can&#39;t try your test cases."},{"owner":{"account_id":1075746,"reputation":2029,"user_id":1073945,"accept_rate":100,"display_name":"Diyarbakir"},"score":0,"creation_date":1443097339,"post_id":32761096,"comment_id":53361454,"body_markdown":"What exactly is failing? Do you get an error message?","body":"What exactly is failing? Do you get an error message?"},{"owner":{"account_id":3421361,"reputation":165,"user_id":2868864,"accept_rate":0,"display_name":"user2868864"},"score":0,"creation_date":1443098403,"post_id":32761096,"comment_id":53362156,"body_markdown":"Yes. That works fine. Thank you","body":"Yes. That works fine. Thank you"}],"answers":[{"tags":[],"owner":{"account_id":3023214,"reputation":20361,"user_id":2563754,"display_name":"Seelenvirtuose"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1443098416,"creation_date":1443097770,"answer_id":32761361,"question_id":32761096,"body_markdown":"You are a victim of the [`Integer` caching][1] for values between -128 and +127.\r\n\r\nAs you are counting the numbers of characters in both words, putting the value as a _boxed_ `Integer` object into the map, you need to compare them as _objects_, not as _values_.\r\n\r\nThe problem is this line:\r\n\r\n    else if (entry.getValue() != map2.get(entry.getKey()))\r\n\r\nHere you compare two `Integer` objects with `!=` instead of using\r\n\r\n    else if (!entry.getValue().equals(map2.get(entry.getKey())))\r\n\r\nThe reason why this works for short words is that the occurrence number of each character does not exceed the magical value of 127.\r\n\r\nThese values are cached in the `Integer` class, so that boxed integers less than (and equal to) that value are the _same_ whereas boxed integers greater than that value are different objects with _equal_ value.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#valueOf-int-","title":"Valid anagrams code - fails for one case out of 32 cases. passes for 31 cases","body":"<p>You are a victim of the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#valueOf-int-\" rel=\"nofollow\"><code>Integer</code> caching</a> for values between -128 and +127.</p>\n\n<p>As you are counting the numbers of characters in both words, putting the value as a <em>boxed</em> <code>Integer</code> object into the map, you need to compare them as <em>objects</em>, not as <em>values</em>.</p>\n\n<p>The problem is this line:</p>\n\n<pre><code>else if (entry.getValue() != map2.get(entry.getKey()))\n</code></pre>\n\n<p>Here you compare two <code>Integer</code> objects with <code>!=</code> instead of using</p>\n\n<pre><code>else if (!entry.getValue().equals(map2.get(entry.getKey())))\n</code></pre>\n\n<p>The reason why this works for short words is that the occurrence number of each character does not exceed the magical value of 127.</p>\n\n<p>These values are cached in the <code>Integer</code> class, so that boxed integers less than (and equal to) that value are the <em>same</em> whereas boxed integers greater than that value are different objects with <em>equal</em> value.</p>\n"}],"owner":{"account_id":3421361,"reputation":165,"user_id":2868864,"accept_rate":0,"display_name":"user2868864"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":135,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1691545912,"creation_date":1443096997,"question_id":32761096,"body_markdown":"I tried writing a small code for anagrams and I wrote the below onw. \r\n\r\n \r\n    String s = &quot;anagram&quot;;\r\n    String t = &quot;nagara&quot;;\r\n\t\t\r\n    Map&lt;Character,Integer&gt; map1 = new HashMap&lt;Character,Integer&gt;();\r\n    Map&lt;Character,Integer&gt; map2 = new HashMap&lt;Character,Integer&gt;();\r\n\t\t\r\n    if (s.length() != t.length()) {\r\n        System.out.println(&quot;Not an anagram&quot;);\r\n    } else {\r\n        for (int i= 0;i&lt;s.length();i++) {\r\n            char c = s.charAt(i);\r\n            char d = t.charAt(i);\r\n            if (map1.containsKey(c)) {\r\n                map1.put(c, map1.get(c)+1);\r\n            } else {\r\n                map1.put(c,1);\r\n            }\r\n\t\t\t\t\r\n            if (map2.containsKey(d)) {\r\n                map2.put(d, map2.get(d)+1);\r\n            } else {\r\n                map2.put(d,1);\r\n            }\r\n        }\r\n\t\t\t\r\n        for (Map.Entry&lt;Character, Integer&gt; entry : map1.entrySet()) {\r\n            if (!map2.containsKey(entry.getKey())) {\r\n                System.out.println(&quot;Not an anagram&quot;);\r\n            } else if (entry.getValue() != map2.get(entry.getKey())) {\r\n                System.out.println(&quot;Not an anagram&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\nThis works for almost all casesto check, it fails for one of the longest anagrams with 50000 characters . \r\nWould anyone be able to point me on what looks wrong here?\r\n\r\n","title":"Valid anagrams code - fails for one case out of 32 cases. passes for 31 cases","body":"<p>I tried writing a small code for anagrams and I wrote the below onw.</p>\n<pre><code>String s = &quot;anagram&quot;;\nString t = &quot;nagara&quot;;\n    \nMap&lt;Character,Integer&gt; map1 = new HashMap&lt;Character,Integer&gt;();\nMap&lt;Character,Integer&gt; map2 = new HashMap&lt;Character,Integer&gt;();\n    \nif (s.length() != t.length()) {\n    System.out.println(&quot;Not an anagram&quot;);\n} else {\n    for (int i= 0;i&lt;s.length();i++) {\n        char c = s.charAt(i);\n        char d = t.charAt(i);\n        if (map1.containsKey(c)) {\n            map1.put(c, map1.get(c)+1);\n        } else {\n            map1.put(c,1);\n        }\n            \n        if (map2.containsKey(d)) {\n            map2.put(d, map2.get(d)+1);\n        } else {\n            map2.put(d,1);\n        }\n    }\n        \n    for (Map.Entry&lt;Character, Integer&gt; entry : map1.entrySet()) {\n        if (!map2.containsKey(entry.getKey())) {\n            System.out.println(&quot;Not an anagram&quot;);\n        } else if (entry.getValue() != map2.get(entry.getKey())) {\n            System.out.println(&quot;Not an anagram&quot;);\n        }\n    }\n}\n</code></pre>\n<p>This works for almost all casesto check, it fails for one of the longest anagrams with 50000 characters .\nWould anyone be able to point me on what looks wrong here?</p>\n"},{"tags":["java","spring","rest"],"answers":[{"comments":[{"owner":{"account_id":1672649,"reputation":5729,"user_id":1538815,"accept_rate":57,"display_name":"yathirigan"},"score":0,"creation_date":1440071884,"post_id":8313055,"comment_id":52127672,"body_markdown":"did it work for you ? i followed the same approach of using the UriComponentsBuilder  but, at the target URL, when i do a request.getAttribute(), i get null.","body":"did it work for you ? i followed the same approach of using the UriComponentsBuilder  but, at the target URL, when i do a request.getAttribute(), i get null."},{"owner":{"account_id":12135954,"reputation":140,"user_id":8861430,"display_name":"Pradeep"},"score":85,"creation_date":1522247842,"post_id":8313055,"comment_id":86081590,"body_markdown":"I seriously do not understand why this answer has green tick.","body":"I seriously do not understand why this answer has green tick."},{"owner":{"account_id":93208,"reputation":6939,"user_id":255139,"accept_rate":44,"display_name":"Kalpesh Soni"},"score":16,"creation_date":1543513406,"post_id":8313055,"comment_id":93956063,"body_markdown":"because he is the OP","body":"because he is the OP"},{"owner":{"account_id":9921126,"reputation":419,"user_id":7344209,"display_name":"Raymond Chen"},"score":0,"creation_date":1572043798,"post_id":8313055,"comment_id":103451441,"body_markdown":"So what is your solution? Thanks!","body":"So what is your solution? Thanks!"}],"tags":[],"owner":{"account_id":355080,"reputation":4551,"user_id":693815,"accept_rate":55,"display_name":"Elwood"},"comment_count":4,"down_vote_count":18,"up_vote_count":49,"is_accepted":true,"score":31,"last_activity_date":1322579272,"creation_date":1322579272,"answer_id":8313055,"question_id":8297215,"body_markdown":"OK, so I&#39;m being an idiot and I&#39;m confusing query parameters with url parameters. I was kinda hoping there would be a nicer way to populate my query parameters rather than an ugly concatenated String but there we are. It&#39;s simply a case of build the URL with the correct parameters. If you pass it as a String Spring will also take care of the encoding for you.","title":"Spring RestTemplate GET with parameters","body":"<p>OK, so I'm being an idiot and I'm confusing query parameters with url parameters. I was kinda hoping there would be a nicer way to populate my query parameters rather than an ugly concatenated String but there we are. It's simply a case of build the URL with the correct parameters. If you pass it as a String Spring will also take care of the encoding for you.</p>\n"},{"comments":[{"owner":{"account_id":415006,"reputation":1385,"user_id":789559,"accept_rate":100,"display_name":"Stephen Rudolph"},"score":4,"creation_date":1522871602,"post_id":16676827,"comment_id":86328052,"body_markdown":"And when creating the RestTemplate instance, you can specify how those query parameter values will be expanded by specifying the DefaultUriTemplateHandler (prior to Spring 5) or DefaultUriBuilderFactory (Spring 5+). This is useful when you wish to encode additional characters such as !, (, ), etc.","body":"And when creating the RestTemplate instance, you can specify how those query parameter values will be expanded by specifying the DefaultUriTemplateHandler (prior to Spring 5) or DefaultUriBuilderFactory (Spring 5+). This is useful when you wish to encode additional characters such as !, (, ), etc."},{"owner":{"account_id":4853240,"reputation":5791,"user_id":3915006,"accept_rate":80,"display_name":"Doug"},"score":0,"creation_date":1524044537,"post_id":16676827,"comment_id":86807980,"body_markdown":"My URL has 10+ parameters, any way to achieve the same with an object/map instead of listing every variable? I cannot use `UriComponentsBuilder` either as it is causing it to generate a different metric for each request with `Micrometer`","body":"My URL has 10+ parameters, any way to achieve the same with an object/map instead of listing every variable? I cannot use <code>UriComponentsBuilder</code> either as it is causing it to generate a different metric for each request with <code>Micrometer</code>"},{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":2,"creation_date":1568990878,"post_id":16676827,"comment_id":102463679,"body_markdown":"@Doug —&#160;`RestTemplate` has parallel methods for specifying either a positional array of values (`Object... uriVariables`) or a map of named values (`Map&lt;String, ?&gt; uriVariables`).  Sounds like the map version is what you want: `restTemplate.exchange(url, HttpMethod.GET, httpEntity, clazz, urlVariablesMap)`.","body":"@Doug — <code>RestTemplate</code> has parallel methods for specifying either a positional array of values (<code>Object... uriVariables</code>) or a map of named values (<code>Map&lt;String, ?&gt; uriVariables</code>).  Sounds like the map version is what you want: <code>restTemplate.exchange(url, HttpMethod.GET, httpEntity, clazz, urlVariablesMap)</code>."},{"owner":{"account_id":2563057,"reputation":99,"user_id":2223787,"display_name":"Denis Orlov"},"score":0,"creation_date":1606474427,"post_id":16676827,"comment_id":114977985,"body_markdown":"exactly! \nand you can check the URL result by calling:\nrestTemplate.getUriTemplateHandler().expand(“/some/{some}/{other}”, some, other);\n\nsee org.springframework.web.util.UriTemplateHandler","body":"exactly!  and you can check the URL result by calling: restTemplate.getUriTemplateHandler().expand(“/some/{some}/{o&zwnj;&#8203;ther}”, some, other);  see org.springframework.web.util.UriTemplateHandler"}],"tags":[],"owner":{"account_id":2667713,"reputation":2974,"user_id":2305727,"display_name":"pavel"},"comment_count":4,"down_vote_count":1,"up_vote_count":265,"is_accepted":false,"score":264,"last_activity_date":1476319251,"creation_date":1369160320,"answer_id":16676827,"question_id":8297215,"body_markdown":"The uriVariables are also expanded in the query string. For example, the following call will expand values for both, account and name:\r\n\r\n    restTemplate.exchange(&quot;http://my-rest-url.org/rest/account/{account}?name={name}&quot;,\r\n        HttpMethod.GET,\r\n        httpEntity,\r\n        clazz,\r\n        &quot;my-account&quot;,\r\n        &quot;my-name&quot;\r\n    );\r\n\r\nso the actual request url will be\r\n\r\n    http://my-rest-url.org/rest/account/my-account?name=my-name\r\n\r\nLook at HierarchicalUriComponents.expandInternal(UriTemplateVariables) for more details.\r\nVersion of Spring is 3.1.3.\r\n","title":"Spring RestTemplate GET with parameters","body":"<p>The uriVariables are also expanded in the query string. For example, the following call will expand values for both, account and name:</p>\n\n<pre><code>restTemplate.exchange(\"http://my-rest-url.org/rest/account/{account}?name={name}\",\n    HttpMethod.GET,\n    httpEntity,\n    clazz,\n    \"my-account\",\n    \"my-name\"\n);\n</code></pre>\n\n<p>so the actual request url will be</p>\n\n<pre><code>http://my-rest-url.org/rest/account/my-account?name=my-name\n</code></pre>\n\n<p>Look at HierarchicalUriComponents.expandInternal(UriTemplateVariables) for more details.\nVersion of Spring is 3.1.3.</p>\n"},{"tags":[],"owner":{"account_id":1438806,"reputation":1315,"user_id":1486966,"accept_rate":67,"display_name":"datu-puti"},"comment_count":0,"down_vote_count":1,"up_vote_count":22,"is_accepted":false,"score":21,"last_activity_date":1464174128,"creation_date":1374960817,"answer_id":17902659,"question_id":8297215,"body_markdown":"I was attempting something similar, and [the RoboSpice example helped me work it out][1]:\r\n\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.set(&quot;Accept&quot;, &quot;application/json&quot;);\r\n\r\n    HttpEntity&lt;String&gt; request = new HttpEntity&lt;&gt;(input, createHeader());\r\n    \r\n    String url = &quot;http://awesomesite.org&quot;;\r\n    Uri.Builder uriBuilder = Uri.parse(url).buildUpon();\r\n    uriBuilder.appendQueryParameter(key, value);\r\n    uriBuilder.appendQueryParameter(key, value);\r\n    ...\r\n\r\n    String url = uriBuilder.build().toString();\r\n\r\n    HttpEntity&lt;String&gt; response = restTemplate.exchange(url, HttpMethod.GET, request , String.class);\r\n\r\n\r\n  [1]: https://github.com/octo-online/RoboSpice-samples/blob/release/robospice-sample-spring-android/src/com/octo/android/robospice/sample/springandroid/TweetsRequest.java","title":"Spring RestTemplate GET with parameters","body":"<p>I was attempting something similar, and <a href=\"https://github.com/octo-online/RoboSpice-samples/blob/release/robospice-sample-spring-android/src/com/octo/android/robospice/sample/springandroid/TweetsRequest.java\" rel=\"noreferrer\">the RoboSpice example helped me work it out</a>:</p>\n\n<pre><code>HttpHeaders headers = new HttpHeaders();\nheaders.set(\"Accept\", \"application/json\");\n\nHttpEntity&lt;String&gt; request = new HttpEntity&lt;&gt;(input, createHeader());\n\nString url = \"http://awesomesite.org\";\nUri.Builder uriBuilder = Uri.parse(url).buildUpon();\nuriBuilder.appendQueryParameter(key, value);\nuriBuilder.appendQueryParameter(key, value);\n...\n\nString url = uriBuilder.build().toString();\n\nHttpEntity&lt;String&gt; response = restTemplate.exchange(url, HttpMethod.GET, request , String.class);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":49695,"reputation":620,"user_id":148088,"accept_rate":50,"display_name":"Fernando M. Pinheiro"},"score":16,"creation_date":1448585328,"post_id":25434451,"comment_id":55656718,"body_markdown":"Great tip. Just changed ```exchange``` to ```getForEntity```: ```restTemplate.getForEntity(builder.build().encode().toUri(), String.class);``` for simplicity.","body":"Great tip. Just changed <code>exchange</code> to <code>getForEntity</code>: <code>restTemplate.getForEntity(builder.build().encode().toUri(), String.class);</code> for simplicity."},{"owner":{"account_id":3701,"reputation":117,"user_id":5373,"display_name":"mirzmaster"},"score":14,"creation_date":1449709912,"post_id":25434451,"comment_id":56130443,"body_markdown":"@FernandoM.Pinheiro: You&#39;re correct, but if you&#39;re expecting a generic type in the response, then you need to use `exchange` and provide a `ParameterizedTypeReference`.\n\nThe example can be further simplified though, replacing `builder.build().encode().toUri()` with `builder.toUriString()`.","body":"@FernandoM.Pinheiro: You&#39;re correct, but if you&#39;re expecting a generic type in the response, then you need to use <code>exchange</code> and provide a <code>ParameterizedTypeReference</code>.  The example can be further simplified though, replacing <code>builder.build().encode().toUri()</code> with <code>builder.toUriString()</code>."},{"owner":{"account_id":5624068,"reputation":1977,"user_id":4453027,"accept_rate":45,"display_name":"KJEjava48"},"score":0,"creation_date":1487152948,"post_id":25434451,"comment_id":71650478,"body_markdown":"@Christophe L Can u show how could i receive these string parameters in the server side??","body":"@Christophe L Can u show how could i receive these string parameters in the server side??"},{"owner":{"account_id":237529,"reputation":18988,"user_id":2621917,"accept_rate":80,"display_name":"Michael Piefel"},"score":4,"creation_date":1488367053,"post_id":25434451,"comment_id":72196262,"body_markdown":"There is a shortcut to get the URI: just call `builder.toUriString()`","body":"There is a shortcut to get the URI: just call <code>builder.toUriString()</code>"},{"owner":{"account_id":1703031,"reputation":1506,"user_id":1562662,"accept_rate":75,"display_name":"Chacko"},"score":0,"creation_date":1515480819,"post_id":25434451,"comment_id":83304800,"body_markdown":"Spring docs for [UriComponentsBuilder](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/util/UriComponentsBuilder.html). Guide explaining various use cases of [UriComponentsBuilder](http://www.baeldung.com/spring-uricomponentsbuilder)","body":"Spring docs for <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/util/UriComponentsBuilder.html\" rel=\"nofollow noreferrer\">UriComponentsBuilder</a>. Guide explaining various use cases of <a href=\"http://www.baeldung.com/spring-uricomponentsbuilder\" rel=\"nofollow noreferrer\">UriComponentsBuilder</a>"},{"owner":{"account_id":3294291,"reputation":1162,"user_id":2771888,"accept_rate":44,"display_name":"Abdul"},"score":0,"creation_date":1536115067,"post_id":25434451,"comment_id":91303002,"body_markdown":"How to add Path parameters? Please help.","body":"How to add Path parameters? Please help."},{"owner":{"account_id":14583282,"reputation":649,"user_id":10532966,"display_name":"Mohammed Javad"},"score":0,"creation_date":1564039883,"post_id":25434451,"comment_id":100901562,"body_markdown":"This one working on my windows local machine. But throwing 403 error on my Linux  server deployed with tomcat. How can i fix this?","body":"This one working on my windows local machine. But throwing 403 error on my Linux  server deployed with tomcat. How can i fix this?"},{"owner":{"account_id":1228425,"reputation":158,"user_id":1193518,"accept_rate":88,"display_name":"ChrisK"},"score":1,"creation_date":1571218245,"post_id":25434451,"comment_id":103163748,"body_markdown":"If anyone happens to use Prometheus/Micrometer then this may cause an explosion of logs. http_client* metrics will be recorded for every possible URI formed by UriComponentsBuilder, e.g. /person/1 and /person/2. This is because Spring RestTemplate Metrics and WebClient Metrics want to populate the URI tag prior to variable substitution but cannot since restTemplate.exchange() already receives a populated URI as first argument. The solution is pavel&#39;s answer. See: https://docs.spring.io/spring-boot/docs/2.0.3.RELEASE/reference/html/production-ready-metrics.html#production-ready-metrics-web-flux","body":"If anyone happens to use Prometheus/Micrometer then this may cause an explosion of logs. http_client* metrics will be recorded for every possible URI formed by UriComponentsBuilder, e.g. /person/1 and /person/2. This is because Spring RestTemplate Metrics and WebClient Metrics want to populate the URI tag prior to variable substitution but cannot since restTemplate.exchange() already receives a populated URI as first argument. The solution is pavel&#39;s answer. See: <a href=\"https://docs.spring.io/spring-boot/docs/2.0.3.RELEASE/reference/html/production-ready-metrics.html#production-ready-metrics-web-flux\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/2.0.3.RELEASE/reference/html&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":156901,"reputation":1816,"user_id":374480,"accept_rate":50,"display_name":"steve"},"score":13,"creation_date":1584991578,"post_id":25434451,"comment_id":107607074,"body_markdown":"Careful! You will get double encoding if you do it that way. builder.queryParam(&quot;value&quot;, &quot;some&amp;value&quot;) will be encoded during builder.toUriString(), &quot;some%26value&quot;, then again in the &#39;exchange()&#39;, &quot;some%2526value&quot;. Better to pass in uriVariables instead.","body":"Careful! You will get double encoding if you do it that way. builder.queryParam(&quot;value&quot;, &quot;some&amp;value&quot;) will be encoded during builder.toUriString(), &quot;some%26value&quot;, then again in the &#39;exchange()&#39;, &quot;some%2526value&quot;. Better to pass in uriVariables instead."},{"owner":{"account_id":135368,"reputation":547,"user_id":338193,"accept_rate":83,"display_name":"Spille"},"score":0,"creation_date":1595539527,"post_id":25434451,"comment_id":111519058,"body_markdown":"You might change the type of response to ResponseEntity&lt;String&gt;, so you can see also, that i.e the status code is available.","body":"You might change the type of response to ResponseEntity&lt;String&gt;, so you can see also, that i.e the status code is available."},{"owner":{"account_id":8301053,"reputation":186,"user_id":6239668,"display_name":"riverhorse"},"score":5,"creation_date":1615982671,"post_id":25434451,"comment_id":117859107,"body_markdown":"As @steve said above you risk getting double encoded values if you do as in this answer, including if you have spaces in your param value.  This can be fixed if you use   `.build().toUriString()` instead of just plain `.toUriString()`.  This skips calling `.encode()`, which does the trick.  See https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/util/UriComponentsBuilder.html#toUriString--","body":"As @steve said above you risk getting double encoded values if you do as in this answer, including if you have spaces in your param value.  This can be fixed if you use   <code>.build().toUriString()</code> instead of just plain <code>.toUriString()</code>.  This skips calling <code>.encode()</code>, which does the trick.  See <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/util/UriComponentsBuilder.html#toUriString--\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/docs/current/javadoc-api/org&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":3353387,"reputation":391,"user_id":2816916,"display_name":"Nemolovich"},"score":0,"creation_date":1634637303,"post_id":25434451,"comment_id":123072589,"body_markdown":"In some cases it is not recommended to use a URL with parameters directly in the string : https://cloud.spring.io/spring-cloud-netflix/multi/multi_netflix-metrics.html#_default_metrics_collection","body":"In some cases it is not recommended to use a URL with parameters directly in the string : <a href=\"https://cloud.spring.io/spring-cloud-netflix/multi/multi_netflix-metrics.html#_default_metrics_collection\" rel=\"nofollow noreferrer\">cloud.spring.io/spring-cloud-netflix/multi/&hellip;</a>"},{"owner":{"account_id":1073346,"reputation":13825,"user_id":1072088,"accept_rate":88,"display_name":"Christophe L"},"score":0,"creation_date":1635100282,"post_id":25434451,"comment_id":123199455,"body_markdown":"Updated to use template parameters as recommended, which will avoid metrics explosion.","body":"Updated to use template parameters as recommended, which will avoid metrics explosion."}],"tags":[],"owner":{"account_id":1073346,"reputation":13825,"user_id":1072088,"accept_rate":88,"display_name":"Christophe L"},"comment_count":13,"down_vote_count":2,"up_vote_count":683,"is_accepted":false,"score":681,"last_activity_date":1637726144,"creation_date":1408649353,"answer_id":25434451,"question_id":8297215,"body_markdown":"To easily manipulate URLs / path / params / etc., you can use Spring&#39;s [UriComponentsBuilder](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/util/UriComponentsBuilder.html) class to create a URL template with placehoders for the parameters, then provide the value for those parameters in the `RestOperations.exchange(...)` call. It&#39;s cleaner than manually concatenating strings and it takes care of the URL encoding for you:\r\n\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.set(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE);\r\n    HttpEntity&lt;?&gt; entity = new HttpEntity&lt;&gt;(headers);\r\n    \r\n    String urlTemplate = UriComponentsBuilder.fromHttpUrl(url)\r\n            .queryParam(&quot;msisdn&quot;, &quot;{msisdn}&quot;)\r\n            .queryParam(&quot;email&quot;, &quot;{email}&quot;)\r\n            .queryParam(&quot;clientVersion&quot;, &quot;{clientVersion}&quot;)\r\n            .queryParam(&quot;clientType&quot;, &quot;{clientType}&quot;)\r\n            .queryParam(&quot;issuerName&quot;, &quot;{issuerName}&quot;)\r\n            .queryParam(&quot;applicationName&quot;, &quot;{applicationName}&quot;)\r\n            .encode()\r\n            .toUriString();\r\n    \r\n    Map&lt;String, ?&gt; params = new HashMap&lt;&gt;();\r\n    params.put(&quot;msisdn&quot;, msisdn);\r\n    params.put(&quot;email&quot;, email);\r\n    params.put(&quot;clientVersion&quot;, clientVersion);\r\n    params.put(&quot;clientType&quot;, clientType);\r\n    params.put(&quot;issuerName&quot;, issuerName);\r\n    params.put(&quot;applicationName&quot;, applicationName);\r\n    \r\n    HttpEntity&lt;String&gt; response = restOperations.exchange(\r\n    \t\turlTemplate,\r\n            HttpMethod.GET,\r\n            entity,\r\n            String.class,\r\n            params\r\n    );\r\n\r\n","title":"Spring RestTemplate GET with parameters","body":"<p>To easily manipulate URLs / path / params / etc., you can use Spring's <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/util/UriComponentsBuilder.html\" rel=\"noreferrer\">UriComponentsBuilder</a> class to create a URL template with placehoders for the parameters, then provide the value for those parameters in the <code>RestOperations.exchange(...)</code> call. It's cleaner than manually concatenating strings and it takes care of the URL encoding for you:</p>\n<pre><code>HttpHeaders headers = new HttpHeaders();\nheaders.set(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE);\nHttpEntity&lt;?&gt; entity = new HttpEntity&lt;&gt;(headers);\n\nString urlTemplate = UriComponentsBuilder.fromHttpUrl(url)\n        .queryParam(&quot;msisdn&quot;, &quot;{msisdn}&quot;)\n        .queryParam(&quot;email&quot;, &quot;{email}&quot;)\n        .queryParam(&quot;clientVersion&quot;, &quot;{clientVersion}&quot;)\n        .queryParam(&quot;clientType&quot;, &quot;{clientType}&quot;)\n        .queryParam(&quot;issuerName&quot;, &quot;{issuerName}&quot;)\n        .queryParam(&quot;applicationName&quot;, &quot;{applicationName}&quot;)\n        .encode()\n        .toUriString();\n\nMap&lt;String, ?&gt; params = new HashMap&lt;&gt;();\nparams.put(&quot;msisdn&quot;, msisdn);\nparams.put(&quot;email&quot;, email);\nparams.put(&quot;clientVersion&quot;, clientVersion);\nparams.put(&quot;clientType&quot;, clientType);\nparams.put(&quot;issuerName&quot;, issuerName);\nparams.put(&quot;applicationName&quot;, applicationName);\n\nHttpEntity&lt;String&gt; response = restOperations.exchange(\n        urlTemplate,\n        HttpMethod.GET,\n        entity,\n        String.class,\n        params\n);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8432993,"reputation":579,"user_id":6328033,"display_name":"Java_Fire_Within"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1474769038,"creation_date":1474769038,"answer_id":39682715,"question_id":8297215,"body_markdown":"I take different approach, you may agree or not but I want to control from .properties file instead of compiled Java code\r\n\r\n#Inside application.properties file \r\nendpoint.url = https://yourHost/resource?requestParam1={0}&amp;requestParam2={1}\r\n\r\nJava code goes here, you can write if or switch condition to find out if endpoint URL in .properties file has @PathVariable (contains {}) or @RequestParam (yourURL?key=value) etc... then invoke method accordingly... that way its dynamic and not need to code change in future one stop shop...   \r\n\r\nI&#39;m trying to give more of idea than actual code here ...try to write generic method each for @RequestParam, and @PathVariable etc... then call accordingly when needed \r\n\r\n      @Value(&quot;${endpoint.url}&quot;)\r\n      private String endpointURL;\r\n      // you can use variable args feature in Java\r\n      public String requestParamMethodNameHere(String value1, String value2) {\r\n        RestTemplate restTemplate = new RestTemplate();\r\n        restTemplate\r\n               .getMessageConverters()\r\n               .add(new MappingJackson2HttpMessageConverter());\r\n    \r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.set(&quot;Accept&quot;, MediaType.APPLICATION_JSON_VALUE);\r\n        HttpEntity&lt;String&gt; entity = new HttpEntity&lt;&gt;(headers);\r\n           \r\n        try {\r\n    \t  String formatted_URL = MessageFormat.format(endpointURL, value1, value2);\r\n          ResponseEntity&lt;String&gt; response = restTemplate.exchange(\r\n                        formatted_URL ,\r\n                        HttpMethod.GET,\r\n                        entity,\r\n                        String.class);\r\n         return response.getBody();\r\n        } catch (Exception e) { e.printStackTrace(); }\r\n\r\n","title":"Spring RestTemplate GET with parameters","body":"<p>I take different approach, you may agree or not but I want to control from .properties file instead of compiled Java code</p>\n\n<h1>Inside application.properties file</h1>\n\n<p>endpoint.url = <a href=\"https://yourHost/resource?requestParam1=\" rel=\"noreferrer\">https://yourHost/resource?requestParam1=</a>{0}&amp;requestParam2={1}</p>\n\n<p>Java code goes here, you can write if or switch condition to find out if endpoint URL in .properties file has @PathVariable (contains {}) or @RequestParam (yourURL?key=value) etc... then invoke method accordingly... that way its dynamic and not need to code change in future one stop shop...   </p>\n\n<p>I'm trying to give more of idea than actual code here ...try to write generic method each for @RequestParam, and @PathVariable etc... then call accordingly when needed </p>\n\n<pre><code>  @Value(\"${endpoint.url}\")\n  private String endpointURL;\n  // you can use variable args feature in Java\n  public String requestParamMethodNameHere(String value1, String value2) {\n    RestTemplate restTemplate = new RestTemplate();\n    restTemplate\n           .getMessageConverters()\n           .add(new MappingJackson2HttpMessageConverter());\n\n    HttpHeaders headers = new HttpHeaders();\n    headers.set(\"Accept\", MediaType.APPLICATION_JSON_VALUE);\n    HttpEntity&lt;String&gt; entity = new HttpEntity&lt;&gt;(headers);\n\n    try {\n      String formatted_URL = MessageFormat.format(endpointURL, value1, value2);\n      ResponseEntity&lt;String&gt; response = restTemplate.exchange(\n                    formatted_URL ,\n                    HttpMethod.GET,\n                    entity,\n                    String.class);\n     return response.getBody();\n    } catch (Exception e) { e.printStackTrace(); }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2826656,"reputation":13236,"user_id":2429176,"accept_rate":80,"display_name":"dustin.schultz"},"comment_count":0,"down_vote_count":1,"up_vote_count":70,"is_accepted":false,"score":69,"last_activity_date":1591024700,"creation_date":1525024135,"answer_id":50089582,"question_id":8297215,"body_markdown":"Since at least Spring 3, instead of using `UriComponentsBuilder` to build the URL (which is a bit verbose), **many** of the `RestTemplate` methods accept placeholders in the path for parameters (not just `exchange`).\r\n\r\nFrom the documentation:\r\n\r\n&gt; Many of the `RestTemplate` methods accepts a URI template and URI\r\n&gt; template variables, either as a `String` vararg, or as\r\n&gt; `Map&lt;String,String&gt;`.\r\n&gt; \r\n&gt; For example with a `String` vararg:\r\n&gt;\r\n    restTemplate.getForObject(\r\n       &quot;http://example.com/hotels/{hotel}/rooms/{room}&quot;, String.class, &quot;42&quot;, &quot;21&quot;);\r\n\r\n\r\n&gt; Or with a `Map&lt;String, String&gt;`:\r\n&gt; \r\n&gt;     Map&lt;String, String&gt; vars = new HashMap&lt;&gt;();\r\n&gt;     vars.put(&quot;hotel&quot;, &quot;42&quot;);\r\n&gt;     vars.put(&quot;room&quot;, &quot;21&quot;);\r\n&gt;      \r\n&gt;     restTemplate.getForObject(&quot;http://example.com/hotels/{hotel}/rooms/{room}&quot;, \r\n        String.class, vars);\r\n\r\nReference: https://docs.spring.io/spring/docs/current/spring-framework-reference/integration.html#rest-resttemplate-uri\r\n\r\nIf you look at the [JavaDoc][1] for `RestTemplate` and search for &quot;URI Template&quot;, you can see which methods you can use placeholders with.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html","title":"Spring RestTemplate GET with parameters","body":"<p>Since at least Spring 3, instead of using <code>UriComponentsBuilder</code> to build the URL (which is a bit verbose), <strong>many</strong> of the <code>RestTemplate</code> methods accept placeholders in the path for parameters (not just <code>exchange</code>).</p>\n\n<p>From the documentation:</p>\n\n<blockquote>\n  <p>Many of the <code>RestTemplate</code> methods accepts a URI template and URI\n  template variables, either as a <code>String</code> vararg, or as\n  <code>Map&lt;String,String&gt;</code>.</p>\n  \n  <p>For example with a <code>String</code> vararg:</p>\n\n<pre><code>restTemplate.getForObject(\n   \"http://example.com/hotels/{hotel}/rooms/{room}\", String.class, \"42\", \"21\");\n</code></pre>\n  \n  <p>Or with a <code>Map&lt;String, String&gt;</code>:</p>\n\n<pre><code>Map&lt;String, String&gt; vars = new HashMap&lt;&gt;();\nvars.put(\"hotel\", \"42\");\nvars.put(\"room\", \"21\");\n\nrestTemplate.getForObject(\"http://example.com/hotels/{hotel}/rooms/{room}\", \n    String.class, vars);\n</code></pre>\n</blockquote>\n\n<p>Reference: <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/integration.html#rest-resttemplate-uri\" rel=\"noreferrer\">https://docs.spring.io/spring/docs/current/spring-framework-reference/integration.html#rest-resttemplate-uri</a></p>\n\n<p>If you look at the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html\" rel=\"noreferrer\">JavaDoc</a> for <code>RestTemplate</code> and search for \"URI Template\", you can see which methods you can use placeholders with.</p>\n"},{"tags":[],"owner":{"account_id":5096768,"reputation":1551,"user_id":4087817,"display_name":"ngg"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1526534772,"creation_date":1526534772,"answer_id":50383882,"question_id":8297215,"body_markdown":"    public static void main(String[] args) {\r\n    \t\t HttpHeaders httpHeaders = new HttpHeaders();\r\n    \t\t httpHeaders.set(&quot;Accept&quot;, MediaType.APPLICATION_JSON_VALUE);\r\n    \t\t final String url = &quot;https://host:port/contract/{code}&quot;;\r\n    \t\t Map&lt;String, String&gt; params = new HashMap&lt;String, String&gt;();\r\n    \t     params.put(&quot;code&quot;, &quot;123456&quot;);\r\n    \t     HttpEntity&lt;?&gt; httpEntity  = new HttpEntity&lt;&gt;(httpHeaders); \r\n    \t\t RestTemplate restTemplate  = new RestTemplate();\r\n    \t\t restTemplate.exchange(url, HttpMethod.GET, httpEntity,String.class, params);\r\n    \t}","title":"Spring RestTemplate GET with parameters","body":"<pre><code>public static void main(String[] args) {\n         HttpHeaders httpHeaders = new HttpHeaders();\n         httpHeaders.set(\"Accept\", MediaType.APPLICATION_JSON_VALUE);\n         final String url = \"https://host:port/contract/{code}\";\n         Map&lt;String, String&gt; params = new HashMap&lt;String, String&gt;();\n         params.put(\"code\", \"123456\");\n         HttpEntity&lt;?&gt; httpEntity  = new HttpEntity&lt;&gt;(httpHeaders); \n         RestTemplate restTemplate  = new RestTemplate();\n         restTemplate.exchange(url, HttpMethod.GET, httpEntity,String.class, params);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3613893,"reputation":420,"user_id":3014279,"display_name":"Dalton"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1536610510,"creation_date":1530714473,"answer_id":51175995,"question_id":8297215,"body_markdown":"If you pass non-parametrized params for RestTemplate, you&#39;ll have one Metrics for everyone single different URL that you pass, considering the parameters. You would like to use parametrized urls:\r\n    \r\n    http://my-url/action?param1={param1}&amp;param2={param2}\r\n\r\ninstead of\r\n\r\n    http://my-url/action?param1=XXXX&amp;param2=YYYY\r\n\r\nThe second case is what you get by using UriComponentsBuilder class.\r\n\r\nOne way to implement the first behavior is the following:\r\n\r\n    Map&lt;String, Object&gt; params = new HashMap&lt;&gt;();\r\n    params.put(&quot;param1&quot;, &quot;XXXX&quot;);\r\n    params.put(&quot;param2&quot;, &quot;YYYY&quot;);\r\n    \r\n    String url = &quot;http://my-url/action?%s&quot;;\r\n    \r\n    String parametrizedArgs = params.keySet().stream().map(k -&gt;\r\n        String.format(&quot;%s={%s}&quot;, k, k)\r\n    ).collect(Collectors.joining(&quot;&amp;&quot;));\r\n\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.set(&quot;Accept&quot;, MediaType.APPLICATION_JSON_VALUE);\r\n    HttpEntity&lt;String&gt; entity = new HttpEntity&lt;&gt;(headers);\r\n\r\n    restTemplate.exchange(String.format(url, parametrizedArgs), HttpMethod.GET, entity, String.class, params);","title":"Spring RestTemplate GET with parameters","body":"<p>If you pass non-parametrized params for RestTemplate, you'll have one Metrics for everyone single different URL that you pass, considering the parameters. You would like to use parametrized urls:</p>\n\n<pre><code>http://my-url/action?param1={param1}&amp;param2={param2}\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>http://my-url/action?param1=XXXX&amp;param2=YYYY\n</code></pre>\n\n<p>The second case is what you get by using UriComponentsBuilder class.</p>\n\n<p>One way to implement the first behavior is the following:</p>\n\n<pre><code>Map&lt;String, Object&gt; params = new HashMap&lt;&gt;();\nparams.put(\"param1\", \"XXXX\");\nparams.put(\"param2\", \"YYYY\");\n\nString url = \"http://my-url/action?%s\";\n\nString parametrizedArgs = params.keySet().stream().map(k -&gt;\n    String.format(\"%s={%s}\", k, k)\n).collect(Collectors.joining(\"&amp;\"));\n\nHttpHeaders headers = new HttpHeaders();\nheaders.set(\"Accept\", MediaType.APPLICATION_JSON_VALUE);\nHttpEntity&lt;String&gt; entity = new HttpEntity&lt;&gt;(headers);\n\nrestTemplate.exchange(String.format(url, parametrizedArgs), HttpMethod.GET, entity, String.class, params);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93208,"reputation":6939,"user_id":255139,"accept_rate":44,"display_name":"Kalpesh Soni"},"comment_count":0,"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1543513660,"creation_date":1543513660,"answer_id":53544842,"question_id":8297215,"body_markdown":"In Spring Web 4.3.6 I also see\r\n\r\n    public &lt;T&gt; T getForObject(String url, Class&lt;T&gt; responseType, Object... uriVariables)\r\n\r\n\r\nThat means you don&#39;t have to create an ugly map\r\n\r\nSo if you have this url\r\n\r\n    http://my-url/action?param1={param1}&amp;param2={param2}\r\n\r\n\r\nYou can either do\r\n\r\n    restTemplate.getForObject(url, Response.class, param1, param2)\r\n\r\nor\r\n\r\n    restTemplate.getForObject(url, Response.class, param [])\r\n\r\n","title":"Spring RestTemplate GET with parameters","body":"<p>In Spring Web 4.3.6 I also see</p>\n\n<pre><code>public &lt;T&gt; T getForObject(String url, Class&lt;T&gt; responseType, Object... uriVariables)\n</code></pre>\n\n<p>That means you don't have to create an ugly map</p>\n\n<p>So if you have this url</p>\n\n<pre><code>http://my-url/action?param1={param1}&amp;param2={param2}\n</code></pre>\n\n<p>You can either do</p>\n\n<pre><code>restTemplate.getForObject(url, Response.class, param1, param2)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>restTemplate.getForObject(url, Response.class, param [])\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7595686,"reputation":441,"user_id":5761920,"display_name":"Kripesh Bista"},"comment_count":0,"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1548872249,"creation_date":1548872249,"answer_id":54447041,"question_id":8297215,"body_markdown":" \r\n\r\n        String uri = http://my-rest-url.org/rest/account/{account};\r\n        \r\n        Map&lt;String, String&gt; uriParam = new HashMap&lt;&gt;();\r\n        uriParam.put(&quot;account&quot;, &quot;my_account&quot;);\r\n        \r\n        UriComponents builder = UriComponentsBuilder.fromHttpUrl(uri)\r\n        \t\t\t.queryParam(&quot;pageSize&quot;,&quot;2&quot;)\r\n        \t\t\t\t\t.queryParam(&quot;page&quot;,&quot;0&quot;)\r\n        \t\t\t\t\t.queryParam(&quot;name&quot;,&quot;my_name&quot;).build();\r\n        \r\n        HttpEntity&lt;String&gt; requestEntity = new HttpEntity&lt;&gt;(null, getHeaders());\r\n        \r\n        ResponseEntity&lt;String&gt; strResponse = restTemplate.exchange(builder.toUriString(),HttpMethod.GET, requestEntity,\r\n        \t\t\t\t\tString.class,uriParam);\r\n        \r\n        //final URL: http://my-rest-url.org/rest/account/my_account?pageSize=2&amp;page=0&amp;name=my_name\r\n\r\n**RestTemplate: Build dynamic URI using UriComponents (URI variable and Request parameters)**\r\n\r\n","title":"Spring RestTemplate GET with parameters","body":"<pre><code>    String uri = http://my-rest-url.org/rest/account/{account};\n\n    Map&lt;String, String&gt; uriParam = new HashMap&lt;&gt;();\n    uriParam.put(\"account\", \"my_account\");\n\n    UriComponents builder = UriComponentsBuilder.fromHttpUrl(uri)\n                .queryParam(\"pageSize\",\"2\")\n                        .queryParam(\"page\",\"0\")\n                        .queryParam(\"name\",\"my_name\").build();\n\n    HttpEntity&lt;String&gt; requestEntity = new HttpEntity&lt;&gt;(null, getHeaders());\n\n    ResponseEntity&lt;String&gt; strResponse = restTemplate.exchange(builder.toUriString(),HttpMethod.GET, requestEntity,\n                        String.class,uriParam);\n\n    //final URL: http://my-rest-url.org/rest/account/my_account?pageSize=2&amp;page=0&amp;name=my_name\n</code></pre>\n\n<p><strong>RestTemplate: Build dynamic URI using UriComponents (URI variable and Request parameters)</strong></p>\n"},{"tags":[],"owner":{"account_id":447134,"reputation":1792,"user_id":840584,"display_name":"Ilya Lysenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1585493750,"creation_date":1565273681,"answer_id":57414678,"question_id":8297215,"body_markdown":"Converting of a hash map to a string of query parameters:\r\n\r\n```java\r\nMap&lt;String, String&gt; params = new HashMap&lt;&gt;();\r\nparams.put(&quot;msisdn&quot;, msisdn);\r\nparams.put(&quot;email&quot;, email);\r\nparams.put(&quot;clientVersion&quot;, clientVersion);\r\nparams.put(&quot;clientType&quot;, clientType);\r\nparams.put(&quot;issuerName&quot;, issuerName);\r\nparams.put(&quot;applicationName&quot;, applicationName);\r\n\r\nUriComponentsBuilder builder = UriComponentsBuilder.fromHttpUrl(url);\r\nfor (Map.Entry&lt;String, String&gt; entry : params.entrySet()) {\r\n    builder.queryParam(entry.getKey(), entry.getValue());\r\n}\r\n\r\nHttpHeaders headers = new HttpHeaders();\r\nheaders.set(&quot;Accept&quot;, &quot;application/json&quot;);\r\n\r\nHttpEntity&lt;String&gt; response = restTemplate.exchange(builder.toUriString(), HttpMethod.GET, new HttpEntity(headers), String.class);\r\n```","title":"Spring RestTemplate GET with parameters","body":"<p>Converting of a hash map to a string of query parameters:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\nparams.put(\"msisdn\", msisdn);\nparams.put(\"email\", email);\nparams.put(\"clientVersion\", clientVersion);\nparams.put(\"clientType\", clientType);\nparams.put(\"issuerName\", issuerName);\nparams.put(\"applicationName\", applicationName);\n\nUriComponentsBuilder builder = UriComponentsBuilder.fromHttpUrl(url);\nfor (Map.Entry&lt;String, String&gt; entry : params.entrySet()) {\n    builder.queryParam(entry.getKey(), entry.getValue());\n}\n\nHttpHeaders headers = new HttpHeaders();\nheaders.set(\"Accept\", \"application/json\");\n\nHttpEntity&lt;String&gt; response = restTemplate.exchange(builder.toUriString(), HttpMethod.GET, new HttpEntity(headers), String.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2890454,"reputation":412,"user_id":2479372,"accept_rate":55,"display_name":"unknown"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1574324066,"creation_date":1574324066,"answer_id":58970170,"question_id":8297215,"body_markdown":"If your url is `http://localhost:8080/context path?msisdn={msisdn}&amp;email={email}`\r\n\r\nthen \r\n\r\n    Map&lt;String,Object&gt; queryParams=new HashMap&lt;&gt;();\r\n    queryParams.put(&quot;msisdn&quot;,your value)\r\n    queryParams.put(&quot;email&quot;,your value)\r\n\r\nworks for resttemplate exchange method as described by you","title":"Spring RestTemplate GET with parameters","body":"<p>If your url is <code>http://localhost:8080/context path?msisdn={msisdn}&amp;email={email}</code></p>\n\n<p>then </p>\n\n<pre><code>Map&lt;String,Object&gt; queryParams=new HashMap&lt;&gt;();\nqueryParams.put(\"msisdn\",your value)\nqueryParams.put(\"email\",your value)\n</code></pre>\n\n<p>works for resttemplate exchange method as described by you</p>\n"},{"tags":[],"owner":{"account_id":18537481,"reputation":1557,"user_id":13506812,"display_name":"abhinav kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1614356231,"creation_date":1614351868,"answer_id":66388140,"question_id":8297215,"body_markdown":"I am providing a code snippet of RestTemplate GET method with path param example\r\n\r\n    public ResponseEntity&lt;String&gt; getName(int id) {\r\n\t\tfinal String url = &quot;http://localhost:8080/springrestexample/employee/name?id={id}&quot;;\r\n\t\tMap&lt;String, String&gt; params = new HashMap&lt;String, String&gt;();\r\n\t\tparams.put(&quot;id&quot;, id);\r\n\t\tHttpHeaders headers = new HttpHeaders();\r\n\t\theaders.setContentType(MediaType.APPLICATION_JSON);\r\n\t\tHttpEntity request = new HttpEntity(headers);\r\n\t\tResponseEntity&lt;String&gt; response = restTemplate.exchange(url, HttpMethod.GET, String.class, params);\r\n\t\treturn response;\r\n\t}","title":"Spring RestTemplate GET with parameters","body":"<p>I am providing a code snippet of RestTemplate GET method with path param example</p>\n<pre><code>public ResponseEntity&lt;String&gt; getName(int id) {\n    final String url = &quot;http://localhost:8080/springrestexample/employee/name?id={id}&quot;;\n    Map&lt;String, String&gt; params = new HashMap&lt;String, String&gt;();\n    params.put(&quot;id&quot;, id);\n    HttpHeaders headers = new HttpHeaders();\n    headers.setContentType(MediaType.APPLICATION_JSON);\n    HttpEntity request = new HttpEntity(headers);\n    ResponseEntity&lt;String&gt; response = restTemplate.exchange(url, HttpMethod.GET, String.class, params);\n    return response;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16202146,"reputation":1348,"user_id":11698284,"display_name":"Madhusanka Edirimanna"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1646806964,"creation_date":1646806964,"answer_id":71405120,"question_id":8297215,"body_markdown":"You can use follow code for String.\r\n\r\n    URL_EXAMPLE=&quot;http://{domain}/Index.php?Username={user}&amp;password={password}&quot;;\r\n\r\n    String domain = &quot;example.com&quot;;\r\n    String user = &quot;user&quot;;\r\n    String password = &quot;password&quot;;\r\n\r\n    String data=this.restTemplate.getForObject(URL_EXAMPLE,String.class,domain,user,password);\r\n","title":"Spring RestTemplate GET with parameters","body":"<p>You can use follow code for String.</p>\n<pre><code>URL_EXAMPLE=&quot;http://{domain}/Index.php?Username={user}&amp;password={password}&quot;;\n\nString domain = &quot;example.com&quot;;\nString user = &quot;user&quot;;\nString password = &quot;password&quot;;\n\nString data=this.restTemplate.getForObject(URL_EXAMPLE,String.class,domain,user,password);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11433301,"reputation":380,"user_id":8381420,"display_name":"saba"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658059287,"creation_date":1658059287,"answer_id":73011580,"question_id":8297215,"body_markdown":"hi i build url with query params using this code: \r\n\r\n    UriComponentsBuilder.fromHttpUrl(url)\r\n                    .queryParam(&quot;bikerPhoneNumber&quot;, &quot;phoneNumberString&quot;)\r\n                    .toUriString();","title":"Spring RestTemplate GET with parameters","body":"<p>hi i build url with query params using this code:</p>\n<pre><code>UriComponentsBuilder.fromHttpUrl(url)\n                .queryParam(&quot;bikerPhoneNumber&quot;, &quot;phoneNumberString&quot;)\n                .toUriString();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":263115,"reputation":16960,"user_id":548473,"display_name":"Grigory Kislin"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1670253410,"creation_date":1670253410,"answer_id":74690381,"question_id":8297215,"body_markdown":"\r\nOne more solution as method:\r\n\r\n    private String execute(String url, Map&lt;String, String&gt; params) {\r\n        UriComponentsBuilder uriBuilder = UriComponentsBuilder.fromUriString(url)\r\n        // predefined params\r\n                .queryParam(&quot;user&quot;, &quot;userValue&quot;)\r\n                .queryParam(&quot;password&quot;, &quot;passwordValue&quot;);\r\n        params.forEach(uriBuilder::queryParam);\r\n        HttpHeaders headers = new HttpHeaders() {{\r\n            setContentType(MediaType.APPLICATION_FORM_URLENCODED);\r\n            setAccept(List.of(MediaType.APPLICATION_JSON));\r\n        }};\r\n        ResponseEntity&lt;String&gt; request = restTemplate.exchange(uriBuilder.toUriString(), \r\n                    HttpMethod.GET, new HttpEntity&lt;&gt;(headers), String.class);\r\n        return request.getBody();\r\n\r\n    }\r\n","title":"Spring RestTemplate GET with parameters","body":"<p>One more solution as method:</p>\n<pre><code>private String execute(String url, Map&lt;String, String&gt; params) {\n    UriComponentsBuilder uriBuilder = UriComponentsBuilder.fromUriString(url)\n    // predefined params\n            .queryParam(&quot;user&quot;, &quot;userValue&quot;)\n            .queryParam(&quot;password&quot;, &quot;passwordValue&quot;);\n    params.forEach(uriBuilder::queryParam);\n    HttpHeaders headers = new HttpHeaders() {{\n        setContentType(MediaType.APPLICATION_FORM_URLENCODED);\n        setAccept(List.of(MediaType.APPLICATION_JSON));\n    }};\n    ResponseEntity&lt;String&gt; request = restTemplate.exchange(uriBuilder.toUriString(), \n                HttpMethod.GET, new HttpEntity&lt;&gt;(headers), String.class);\n    return request.getBody();\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7718945,"reputation":709,"user_id":5845739,"display_name":"Pratik Gaurav"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677606371,"creation_date":1677606371,"answer_id":75595590,"question_id":8297215,"body_markdown":"See I observe two things, the query parameter (@RequestParam) or the dynamic URLs (@PathVariable) can be passed in two ways i.e.\r\n1. Passing the data as Array.\r\n2. Using the map.\r\n\r\nIn both the pattern, one thing is common.\r\nthe data needs to passed dynamically and we can mark those places using curly braces.{}\r\nex. \r\n\r\n\r\nhttps://api.themoviedb.org/3/movie/now_playing?api_key={api_key}\r\n\r\n\r\n**Spring Documentation**\r\nNow we need to pass the data,\r\n\r\n**Style 1**\r\n```\r\nMap&lt;String,String&gt; data=new LinkedHashMap&lt;String,String&gt;();\r\ndata.put(&quot;api_key&quot;, api_key);\r\ntemplate.getForObject(url, TMDB.class,data);\r\n```\r\n\r\n\r\n**Style 2**\r\n```\r\nObject[] arr= {api_key};\r\ntemplate.getForObject(url, TMDB.class,arr);\r\n```","title":"Spring RestTemplate GET with parameters","body":"<p>See I observe two things, the query parameter (@RequestParam) or the dynamic URLs (@PathVariable) can be passed in two ways i.e.</p>\n<ol>\n<li>Passing the data as Array.</li>\n<li>Using the map.</li>\n</ol>\n<p>In both the pattern, one thing is common.\nthe data needs to passed dynamically and we can mark those places using curly braces.{}\nex.</p>\n<p><a href=\"https://api.themoviedb.org/3/movie/now_playing?api_key=%7Bapi_key%7D\" rel=\"nofollow noreferrer\">https://api.themoviedb.org/3/movie/now_playing?api_key={api_key}</a></p>\n<p><strong>Spring Documentation</strong>\nNow we need to pass the data,</p>\n<p><strong>Style 1</strong></p>\n<pre><code>Map&lt;String,String&gt; data=new LinkedHashMap&lt;String,String&gt;();\ndata.put(&quot;api_key&quot;, api_key);\ntemplate.getForObject(url, TMDB.class,data);\n</code></pre>\n<p><strong>Style 2</strong></p>\n<pre><code>Object[] arr= {api_key};\ntemplate.getForObject(url, TMDB.class,arr);\n</code></pre>\n"}],"owner":{"account_id":355080,"reputation":4551,"user_id":693815,"accept_rate":55,"display_name":"Elwood"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":761436,"favorite_count":0,"down_vote_count":1,"up_vote_count":393,"accepted_answer_id":8313055,"answer_count":17,"score":392,"last_activity_date":1691544072,"creation_date":1322490099,"question_id":8297215,"body_markdown":"I have to make a `REST` call that includes custom headers and query parameters. I set my `HttpEntity` with just the headers (no body), and I use the `RestTemplate.exchange()` method as follows:\r\n\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.set(&quot;Accept&quot;, &quot;application/json&quot;);\r\n\r\n    Map&lt;String, String&gt; params = new HashMap&lt;String, String&gt;();\r\n    params.put(&quot;msisdn&quot;, msisdn);\r\n    params.put(&quot;email&quot;, email);\r\n    params.put(&quot;clientVersion&quot;, clientVersion);\r\n    params.put(&quot;clientType&quot;, clientType);\r\n    params.put(&quot;issuerName&quot;, issuerName);\r\n    params.put(&quot;applicationName&quot;, applicationName);\r\n\r\n    HttpEntity entity = new HttpEntity(headers);\r\n\r\n    HttpEntity&lt;String&gt; response = restTemplate.exchange(url, HttpMethod.GET, entity, String.class, params);\r\n\r\nThis fails at the client end with the `dispatcher servlet` being unable to resolve the request to a handler. Having debugged it, it looks like the request parameters are not being sent.\r\n\r\nWhen I do a an exchange with a `POST` using a request body and no query parameters it works just fine.\r\n\r\nDoes anyone have any ideas?","title":"Spring RestTemplate GET with parameters","body":"<p>I have to make a <code>REST</code> call that includes custom headers and query parameters. I set my <code>HttpEntity</code> with just the headers (no body), and I use the <code>RestTemplate.exchange()</code> method as follows:</p>\n\n<pre><code>HttpHeaders headers = new HttpHeaders();\nheaders.set(\"Accept\", \"application/json\");\n\nMap&lt;String, String&gt; params = new HashMap&lt;String, String&gt;();\nparams.put(\"msisdn\", msisdn);\nparams.put(\"email\", email);\nparams.put(\"clientVersion\", clientVersion);\nparams.put(\"clientType\", clientType);\nparams.put(\"issuerName\", issuerName);\nparams.put(\"applicationName\", applicationName);\n\nHttpEntity entity = new HttpEntity(headers);\n\nHttpEntity&lt;String&gt; response = restTemplate.exchange(url, HttpMethod.GET, entity, String.class, params);\n</code></pre>\n\n<p>This fails at the client end with the <code>dispatcher servlet</code> being unable to resolve the request to a handler. Having debugged it, it looks like the request parameters are not being sent.</p>\n\n<p>When I do a an exchange with a <code>POST</code> using a request body and no query parameters it works just fine.</p>\n\n<p>Does anyone have any ideas?</p>\n"},{"tags":["java","spring-boot","spring-webflux","spring-webclient"],"comments":[{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":0,"creation_date":1691526210,"post_id":76861795,"comment_id":135503001,"body_markdown":"It&#39;s very hard to read the provided examples. Can you please fix it so others will be able to help you.","body":"It&#39;s very hard to read the provided examples. Can you please fix it so others will be able to help you."},{"owner":{"account_id":22069594,"reputation":11,"user_id":16330827,"display_name":"suresh"},"score":0,"creation_date":1691540982,"post_id":76861795,"comment_id":135504719,"body_markdown":"@IgorArtamonov There is a list of elements in JSON format, passing as request body in API call  using Spring Web Flux we want to Iterate the these list of elements.","body":"@IgorArtamonov There is a list of elements in JSON format, passing as request body in API call  using Spring Web Flux we want to Iterate the these list of elements."},{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":0,"creation_date":1691542540,"post_id":76861795,"comment_id":135504833,"body_markdown":"I mean the code you pasted is unreadable because of broken formatting. I suggest to edit the question and fix the formatting, so people could actually look at it","body":"I mean the code you pasted is unreadable because of broken formatting. I suggest to edit the question and fix the formatting, so people could actually look at it"},{"owner":{"account_id":22069594,"reputation":11,"user_id":16330827,"display_name":"suresh"},"score":0,"creation_date":1691544042,"post_id":76861795,"comment_id":135504940,"body_markdown":"@IgorArtamonov oh it was broken formatting, now updated it","body":"@IgorArtamonov oh it was broken formatting, now updated it"}],"owner":{"account_id":22069594,"reputation":11,"user_id":16330827,"display_name":"suresh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691543974,"creation_date":1691514470,"question_id":76861795,"body_markdown":"    We have the following list of elements in JSON form, how can we iterate the below list using spring webflux. While iteration we have to return the response as well. \r\n    \r\n       &quot;units&quot;: [\r\n                    {\r\n                        &quot;unitTitle&quot;: &quot;unit1&quot;,\r\n                        &quot;unitNumber&quot;: 1,\r\n                        &quot;chapters&quot;: [\r\n                            {\r\n                                &quot;chapterTitle&quot;: &quot;ch1&quot;,\r\n                                &quot;chapterNumber&quot;: 1,\r\n                                &quot;modules&quot;: [\r\n                                    {\r\n                                        &quot;moduleName&quot;: &quot;module&quot;,\r\n                                        &quot;moduleNumber&quot;: 1,\r\n                                        &quot;sections&quot;: [\r\n                                            {\r\n                                                &quot;sectionName&quot;: &quot;section1&quot;,\r\n                                                &quot;sectionNumber&quot;: 1\r\n                                            }\r\n                                        ]\r\n                                    }\r\n                                ]\r\n                            },\r\n                            {\r\n                                &quot;chapterTitle&quot;: &quot;Ch2&quot;,\r\n                                &quot;chapterNumber&quot;: 2,\r\n                                &quot;modules&quot;: [\r\n                                    {\r\n                                        &quot;moduleName&quot;: &quot;module2&quot;,\r\n                                        &quot;moduleNumber&quot;: 1,\r\n                                        &quot;sections&quot;: [\r\n                                            {\r\n                                                &quot;sectionName&quot;: &quot;section2&quot;,\r\n                                                &quot;sectionNumber&quot;: 1\r\n                                            }\r\n                                        ]\r\n                                    }\r\n                                ]\r\n    \r\n    I have tried with concatMap :\r\n    \r\n    \tFlux.fromStream(generateTocRequest.getVolumes().stream()).concatMap(volume -&gt; {\r\n    \t\t\t\tString title = !StringUtils.isBlank(volume.getVolumeTitle()) ? volume.getVolumeTitle() : &quot;&quot;;\r\n    \t\t\t\treturn createTOCContainer(new Container(projectUrn, TocConstants.VOLUME.toLowerCase(), parentEntityUrn, TocConstants.BODYMATTER, 0), title, token, isAutoNumberingEnabled)\r\n    \t\t\t\t\t\t.flatMap(containerVolume -&gt; {\r\n    \t\t\t\t\tif ( !CollectionUtils.isEmpty(volume.getUnits()) &amp;&amp; containerVolume != null ) {\r\n    \t\t\t\t\t\tvolumeList.add(containerVolume.getEntityUrn());\r\n    \r\n    \t\t\t\t\t\tFlux.fromStream(volume.getUnits().stream()).concatMap(unit -&gt; {\r\n    \t\t\t\t\t\t\tString unitTitle = !StringUtils.isBlank(unit.getUnitTitle()) ? unit.getUnitTitle() : &quot;&quot;;\r\n    \t\t\t\t\t\t\treturn createTOCContainer(new Container(projectUrn, TocConstants.PART.toLowerCase(), parentEntityUrn, TocConstants.BODYMATTER, 0), unitTitle, token, isAutoNumberingEnabled)\r\n    \t\t\t\t\t\t\t\t\t.flatMap(containerUnit -&gt; {\r\n    \t\t\t\t\t\t\t\tif ( !CollectionUtils.isEmpty(unit.getChapters()) &amp;&amp; containerUnit != null ) {\r\n    \r\n    \t\t\t\t\t\t\t\t\tFlux.fromStream(unit.getChapters().stream()).concatMap(chapter -&gt; {\r\n    \r\n    \t\t\t\t\t\t\t\t\t\tString chapterName = !StringUtils.isBlank(chapter.getChapterTitle()) ? chapter.getChapterTitle() : &quot;&quot;;\r\n    \t\t\t\t\t\t\t\t\treturn createTOCContainer(new Container(projectUrn, TocConstants.CHAPTER.toLowerCase(), containerUnit.getEntityUrn(), TocConstants.BODYMATTER, 0), chapterName, token, isAutoNumberingEnabled)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t.flatMap(containerChapter -&gt; {\r\n    \t\t\t\t\t\t\t\t\t\t\tif ( !CollectionUtils.isEmpty(chapter.getModules()) &amp;&amp; containerChapter != null ) {\r\n    \r\n    \t\t\t\t\t\t\t\t\t\t\t\tFlux.fromStream(chapter.getModules().stream()).concatMap(module -&gt; {\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\tString moduleName = !StringUtils.isBlank(module.getModuleName()) ? module.getModuleName() : &quot;&quot;;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\treturn createTOCContainer(new Container(projectUrn, TocConstants.MODULE.toLowerCase(), containerChapter.getEntityUrn(), TocConstants.BODYMATTER, 0), moduleName, token, isAutoNumberingEnabled)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t .flatMap(containerModule -&gt; {\r\n    \r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\tif ( !CollectionUtils.isEmpty(module.getSections()) &amp;&amp; containerModule != null ) {\r\n    \r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tFlux.fromStream(module.getSections().stream()).concatMap(section -&gt; {\r\n    \r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tString sectionName = !StringUtils.isBlank(section.getSectionName()) ? section.getSectionName() : &quot;&quot;;\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcreateTOCContainer(new Container(projectUrn, TocConstants.SECTION.toLowerCase(), containerChapter.getEntityUrn(), TocConstants.BODYMATTER, 0), sectionName, token, isAutoNumberingEnabled);\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn Mono.empty();\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcreateTOCContainer(new Container(projectUrn, TocConstants.SECTION, containerModule.getEntityUrn(), TocConstants.BODYMATTER, 0), &quot;&quot;, token, isAutoNumberingEnabled);\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\treturn Mono.just(containerModule);\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n    \t\t\t\t\t\t\t\t\t\t\t\t});\r\n    \t\t\t\t\t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t\t\t\t\treturn Mono.just(containerChapter);\r\n    \t\t\t\t\t\t\t\t\t\t});\r\n    \r\n    \t\t\t\t\t\t\t\t\t});\r\n    \t\t\t\t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t\t\t\treturn Mono.just(containerUnit);\r\n    \t\t\t\t\t\t\t});\r\n    \r\n    \r\n    \t\t\t\t\t\t});\r\n    \r\n    \t\t\t\t\t}\r\n    \t\t\t\t\treturn Mono.just(containerVolume);\r\n    \t\t\t\t});\r\n    \t\t\t});\r\n    \r\n    //createTocContainer method call which is being called in previous function\r\n //createTocContainer method call which is being called in previous function\r\n //createTocContainer method call which is being called in previous function\r\n //createTocContainer method call which is being called in previous function\r\n //createTocContainer method call which is being called in previous function\r\n    \r\n    public Mono&lt;ContainerMetadata&gt; createTOCContainer(final Container containerRequest, final String title, final String token, boolean isAutoNumberingEnabled) {\r\n    \t\tString metaData = null;\r\n    \t\tLOGGER.info(&quot;Inside StructureServiceImpl.createTOCContainer&quot;);\r\n    \t\tfinal ContainerMetadata[] containerMetaData = new ContainerMetadata[1];\r\n    \t\tString uri = tocStructureApiBaseUrl + tocStructureContextPath + TocConstants.SEPERATOR + containerRequest.getProjectUrn()\r\n    \t\t\t\t+ TocConstants.SEPERATOR + TocConstants.CONTAINER + TocConstants.SEPERATOR\r\n    \t\t\t\t+ containerRequest.getParentEntityUrn() + TocConstants.SEPERATOR\r\n    \t\t\t\t+ TocConstants.SECTION + TocConstants.SEPERATOR + TocConstants.BODYMATTER\r\n    \t\t\t\t+ TocConstants.SEPERATOR + TocConstants.CHILD_CONTAINER;\r\n    \r\n    \t\tHttpHeaders headers = Header.buildAuthorizationHeader(token);\r\n    \t\ttry {\r\n    \t\t\treturn createContainerMetaData(containerRequest, token, uri)\r\n    \t\t\t\t\t.flatMap(result-&gt;{\r\n    \t\t\t\t\t\tcontainerMetaData[0] = gson.fromJson(result, ContainerMetadata.class);\r\n    \t\t\t\t\t\tLOGGER.info(&quot;container meta data obtained via tocStructureApi call : [{}]&quot;, containerMetaData[0]);\r\n    \r\n    \t\t\t\t\t\tif(StringUtils.isNotBlank(title))\r\n    \t\t\t\t\t\t\trenameTocContainer(title,  containerRequest.getProjectUrn(),  containerMetaData[0].getEntityUrn(), token);\r\n    \t\t\t\t\t\tLOGGER.info(&quot;Title has been updated&quot;);\r\n    \t\t\t\t\t\tif(isAutoNumberingEnabled)\r\n    \t\t\t\t\t\t\tLOGGER.info(&quot;StructureAPIService.addContainerMetaData()&quot;);\r\n    \t\t\t\t\t\taddContainerMetaData(metaData.toString(), containerRequest, token, Boolean.TRUE).subscribe();\r\n    \r\n    \r\n    \t\t\t\t\t\treturn Mono.just(containerMetaData[0]);\r\n    \t\t\t\t\t});\r\n    \r\n    \t\t} catch (HttpClientErrorException e) {\r\n    \t\t\tLOGGER.error(&quot;Container element creation failed for the Container and Title [{} {}]&quot;, containerRequest.getParentEntityUrn(), title);\r\n    \t\t\treturn Mono.just(containerMetaData[0]);\r\n    \t\t}\r\n    \t}\r\n    But that is not iterating the elements, any suggestion for the same to achieve the result in iterative form.","title":"How to iterate list of elements in spring web flux","body":"<pre><code>We have the following list of elements in JSON form, how can we iterate the below list using spring webflux. While iteration we have to return the response as well. \n\n   &quot;units&quot;: [\n                {\n                    &quot;unitTitle&quot;: &quot;unit1&quot;,\n                    &quot;unitNumber&quot;: 1,\n                    &quot;chapters&quot;: [\n                        {\n                            &quot;chapterTitle&quot;: &quot;ch1&quot;,\n                            &quot;chapterNumber&quot;: 1,\n                            &quot;modules&quot;: [\n                                {\n                                    &quot;moduleName&quot;: &quot;module&quot;,\n                                    &quot;moduleNumber&quot;: 1,\n                                    &quot;sections&quot;: [\n                                        {\n                                            &quot;sectionName&quot;: &quot;section1&quot;,\n                                            &quot;sectionNumber&quot;: 1\n                                        }\n                                    ]\n                                }\n                            ]\n                        },\n                        {\n                            &quot;chapterTitle&quot;: &quot;Ch2&quot;,\n                            &quot;chapterNumber&quot;: 2,\n                            &quot;modules&quot;: [\n                                {\n                                    &quot;moduleName&quot;: &quot;module2&quot;,\n                                    &quot;moduleNumber&quot;: 1,\n                                    &quot;sections&quot;: [\n                                        {\n                                            &quot;sectionName&quot;: &quot;section2&quot;,\n                                            &quot;sectionNumber&quot;: 1\n                                        }\n                                    ]\n                                }\n                            ]\n\nI have tried with concatMap :\n\n    Flux.fromStream(generateTocRequest.getVolumes().stream()).concatMap(volume -&gt; {\n                String title = !StringUtils.isBlank(volume.getVolumeTitle()) ? volume.getVolumeTitle() : &quot;&quot;;\n                return createTOCContainer(new Container(projectUrn, TocConstants.VOLUME.toLowerCase(), parentEntityUrn, TocConstants.BODYMATTER, 0), title, token, isAutoNumberingEnabled)\n                        .flatMap(containerVolume -&gt; {\n                    if ( !CollectionUtils.isEmpty(volume.getUnits()) &amp;&amp; containerVolume != null ) {\n                        volumeList.add(containerVolume.getEntityUrn());\n\n                        Flux.fromStream(volume.getUnits().stream()).concatMap(unit -&gt; {\n                            String unitTitle = !StringUtils.isBlank(unit.getUnitTitle()) ? unit.getUnitTitle() : &quot;&quot;;\n                            return createTOCContainer(new Container(projectUrn, TocConstants.PART.toLowerCase(), parentEntityUrn, TocConstants.BODYMATTER, 0), unitTitle, token, isAutoNumberingEnabled)\n                                    .flatMap(containerUnit -&gt; {\n                                if ( !CollectionUtils.isEmpty(unit.getChapters()) &amp;&amp; containerUnit != null ) {\n\n                                    Flux.fromStream(unit.getChapters().stream()).concatMap(chapter -&gt; {\n\n                                        String chapterName = !StringUtils.isBlank(chapter.getChapterTitle()) ? chapter.getChapterTitle() : &quot;&quot;;\n                                    return createTOCContainer(new Container(projectUrn, TocConstants.CHAPTER.toLowerCase(), containerUnit.getEntityUrn(), TocConstants.BODYMATTER, 0), chapterName, token, isAutoNumberingEnabled)\n                                                .flatMap(containerChapter -&gt; {\n                                            if ( !CollectionUtils.isEmpty(chapter.getModules()) &amp;&amp; containerChapter != null ) {\n\n                                                Flux.fromStream(chapter.getModules().stream()).concatMap(module -&gt; {\n                                                    String moduleName = !StringUtils.isBlank(module.getModuleName()) ? module.getModuleName() : &quot;&quot;;\n                                                    return createTOCContainer(new Container(projectUrn, TocConstants.MODULE.toLowerCase(), containerChapter.getEntityUrn(), TocConstants.BODYMATTER, 0), moduleName, token, isAutoNumberingEnabled)\n                                                     .flatMap(containerModule -&gt; {\n\n                                                        if ( !CollectionUtils.isEmpty(module.getSections()) &amp;&amp; containerModule != null ) {\n\n                                                            Flux.fromStream(module.getSections().stream()).concatMap(section -&gt; {\n\n                                                                String sectionName = !StringUtils.isBlank(section.getSectionName()) ? section.getSectionName() : &quot;&quot;;\n                                                                createTOCContainer(new Container(projectUrn, TocConstants.SECTION.toLowerCase(), containerChapter.getEntityUrn(), TocConstants.BODYMATTER, 0), sectionName, token, isAutoNumberingEnabled);\n                                                                return Mono.empty();\n                                                            });\n                                                        } else {\n                                                            createTOCContainer(new Container(projectUrn, TocConstants.SECTION, containerModule.getEntityUrn(), TocConstants.BODYMATTER, 0), &quot;&quot;, token, isAutoNumberingEnabled);\n                                                        }\n                                                        return Mono.just(containerModule);\n                                                    });\n                                                });\n                                            }\n                                            return Mono.just(containerChapter);\n                                        });\n\n                                    });\n                                }\n\n                                return Mono.just(containerUnit);\n                            });\n\n\n                        });\n\n                    }\n                    return Mono.just(containerVolume);\n                });\n            });\n\n//createTocContainer method call which is being called in previous function\n</code></pre>\n<p>//createTocContainer method call which is being called in previous function\n//createTocContainer method call which is being called in previous function\n//createTocContainer method call which is being called in previous function\n//createTocContainer method call which is being called in previous function</p>\n<pre><code>public Mono&lt;ContainerMetadata&gt; createTOCContainer(final Container containerRequest, final String title, final String token, boolean isAutoNumberingEnabled) {\n        String metaData = null;\n        LOGGER.info(&quot;Inside StructureServiceImpl.createTOCContainer&quot;);\n        final ContainerMetadata[] containerMetaData = new ContainerMetadata[1];\n        String uri = tocStructureApiBaseUrl + tocStructureContextPath + TocConstants.SEPERATOR + containerRequest.getProjectUrn()\n                + TocConstants.SEPERATOR + TocConstants.CONTAINER + TocConstants.SEPERATOR\n                + containerRequest.getParentEntityUrn() + TocConstants.SEPERATOR\n                + TocConstants.SECTION + TocConstants.SEPERATOR + TocConstants.BODYMATTER\n                + TocConstants.SEPERATOR + TocConstants.CHILD_CONTAINER;\n\n        HttpHeaders headers = Header.buildAuthorizationHeader(token);\n        try {\n            return createContainerMetaData(containerRequest, token, uri)\n                    .flatMap(result-&gt;{\n                        containerMetaData[0] = gson.fromJson(result, ContainerMetadata.class);\n                        LOGGER.info(&quot;container meta data obtained via tocStructureApi call : [{}]&quot;, containerMetaData[0]);\n\n                        if(StringUtils.isNotBlank(title))\n                            renameTocContainer(title,  containerRequest.getProjectUrn(),  containerMetaData[0].getEntityUrn(), token);\n                        LOGGER.info(&quot;Title has been updated&quot;);\n                        if(isAutoNumberingEnabled)\n                            LOGGER.info(&quot;StructureAPIService.addContainerMetaData()&quot;);\n                        addContainerMetaData(metaData.toString(), containerRequest, token, Boolean.TRUE).subscribe();\n\n\n                        return Mono.just(containerMetaData[0]);\n                    });\n\n        } catch (HttpClientErrorException e) {\n            LOGGER.error(&quot;Container element creation failed for the Container and Title [{} {}]&quot;, containerRequest.getParentEntityUrn(), title);\n            return Mono.just(containerMetaData[0]);\n        }\n    }\nBut that is not iterating the elements, any suggestion for the same to achieve the result in iterative form.\n</code></pre>\n"},{"tags":["javascript","java","android","webview","android-webview"],"answers":[{"tags":[],"owner":{"account_id":20327316,"reputation":998,"user_id":14910363,"display_name":"FearNot"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690342834,"creation_date":1690342834,"answer_id":76767894,"question_id":76407219,"body_markdown":"Are you sure that you enabled multiple windows in the webview&#39;s settings ?:\r\n\r\n```settings.setSupportMultipleWindows(true)```","title":"How Android WebView gets the URL of the new window from the Message object?","body":"<p>Are you sure that you enabled multiple windows in the webview's settings ?:</p>\n<p><code>settings.setSupportMultipleWindows(true)</code></p>\n"},{"tags":[],"owner":{"account_id":29188057,"reputation":16,"user_id":22360721,"display_name":"Levi Lin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691542741,"creation_date":1691541232,"answer_id":76863876,"question_id":76407219,"body_markdown":"webChromeClient doesn&#39;t expose the URL of the tapped link when creating a new window.\r\n\r\nIf you need to handle the tapped URL, the only way to handle window.open() case is through webViewClient&#39;s `shouldOverrideUrlLoading`, which is something like below:\r\n\r\n```\r\nwebChromeClient = object : WebChromeClient() {\r\n    override fun onCloseWindow(window: WebView?) {\r\n        super.onCloseWindow(window)\r\n    }\r\n\r\n    override fun onCreateWindow(\r\n        view: WebView?,\r\n        isDialog: Boolean,\r\n        isUserGesture: Boolean,\r\n        resultMsg: Message?\r\n    ): Boolean {\r\n\r\n        if (view?.context == null) {\r\n            return false\r\n        }\r\n        if (resultMsg == null) {\r\n            return false\r\n        }\r\n\r\n        // Use CustomTabs to open the link when the hitTestResult is not null\r\n        if (view.hitTestResult.extra != null) {\r\n            val colorParam = CustomTabColorSchemeParams.Builder().setToolbarColor(getColor(context, R.color.blue)).build()\r\n            val intent = CustomTabsIntent.Builder()\r\n                .setDefaultColorSchemeParams(colorParam)\r\n                .setShowTitle(true)\r\n                .build()\r\n            intent.launchUrl(view.context, Uri.parse(view.hitTestResult.extra))\r\n            return false\r\n        }\r\n\r\n        // Use a new webViewClient to handle window.open() case\r\n        val newWebView = WebView(view.context)\r\n        newWebView.webViewClient = object : WebViewClient() {\r\n            override fun shouldOverrideUrlLoading(\r\n                view: WebView?,\r\n                request: WebResourceRequest?\r\n            ): Boolean {\r\n                if (request?.url == null) {\r\n                    return true\r\n                }\r\n                val url = request.url.toString()\r\n                if (url.contains(&quot;example.com&quot;)) {\r\n                    // Here you can handle “example.com” and do whatever you want\r\n                    return true\r\n                }\r\n                return true\r\n            }\r\n        }\r\n        val transport = resultMsg.obj as WebView.WebViewTransport\r\n        transport.webView = newWebView\r\n        resultMsg.sendToTarget()\r\n\r\n        return true\r\n    }\r\n}\r\n```\r\n\r\nBy the way, don&#39;t forget to add JS settings to WebView.\r\n```\r\nwebView.apply {\r\n    settings.javaScriptEnabled = true\r\n    settings.javaScriptCanOpenWindowsAutomatically = true\r\n    settings.setSupportMultipleWindows(true)\r\n}\r\n```\r\n\r\nHope this will help.","title":"How Android WebView gets the URL of the new window from the Message object?","body":"<p>webChromeClient doesn't expose the URL of the tapped link when creating a new window.</p>\n<p>If you need to handle the tapped URL, the only way to handle window.open() case is through webViewClient's <code>shouldOverrideUrlLoading</code>, which is something like below:</p>\n<pre><code>webChromeClient = object : WebChromeClient() {\n    override fun onCloseWindow(window: WebView?) {\n        super.onCloseWindow(window)\n    }\n\n    override fun onCreateWindow(\n        view: WebView?,\n        isDialog: Boolean,\n        isUserGesture: Boolean,\n        resultMsg: Message?\n    ): Boolean {\n\n        if (view?.context == null) {\n            return false\n        }\n        if (resultMsg == null) {\n            return false\n        }\n\n        // Use CustomTabs to open the link when the hitTestResult is not null\n        if (view.hitTestResult.extra != null) {\n            val colorParam = CustomTabColorSchemeParams.Builder().setToolbarColor(getColor(context, R.color.blue)).build()\n            val intent = CustomTabsIntent.Builder()\n                .setDefaultColorSchemeParams(colorParam)\n                .setShowTitle(true)\n                .build()\n            intent.launchUrl(view.context, Uri.parse(view.hitTestResult.extra))\n            return false\n        }\n\n        // Use a new webViewClient to handle window.open() case\n        val newWebView = WebView(view.context)\n        newWebView.webViewClient = object : WebViewClient() {\n            override fun shouldOverrideUrlLoading(\n                view: WebView?,\n                request: WebResourceRequest?\n            ): Boolean {\n                if (request?.url == null) {\n                    return true\n                }\n                val url = request.url.toString()\n                if (url.contains(&quot;example.com&quot;)) {\n                    // Here you can handle “example.com” and do whatever you want\n                    return true\n                }\n                return true\n            }\n        }\n        val transport = resultMsg.obj as WebView.WebViewTransport\n        transport.webView = newWebView\n        resultMsg.sendToTarget()\n\n        return true\n    }\n}\n</code></pre>\n<p>By the way, don't forget to add JS settings to WebView.</p>\n<pre><code>webView.apply {\n    settings.javaScriptEnabled = true\n    settings.javaScriptCanOpenWindowsAutomatically = true\n    settings.setSupportMultipleWindows(true)\n}\n</code></pre>\n<p>Hope this will help.</p>\n"}],"owner":{"account_id":18884916,"reputation":144,"user_id":13776577,"display_name":"拉拉姬"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76863876,"answer_count":2,"score":1,"last_activity_date":1691542741,"creation_date":1685973751,"question_id":76407219,"body_markdown":"```java\r\npublic boolean onCreateWindow(WebView view, boolean dialog, boolean userGesture, Message resultMsg)\r\n```\r\nI found a way to do it at StackOverflow, but it doesn&#39;t get the &quot;window.open(&#39;example.com&#39;)&quot; url.\r\n\r\n```java\r\nMessage href = view.getHandler().obtainMessage();\r\nview.requestFocusNodeHref(href);\r\nString url = href.getData().getString(&quot;url&quot;);\r\n\r\n// Only get &quot;&lt;a href=&#39;example.com&#39; target=&#39;_blank&#39;&gt;&quot; url.\r\n```","title":"How Android WebView gets the URL of the new window from the Message object?","body":"<pre class=\"lang-java prettyprint-override\"><code>public boolean onCreateWindow(WebView view, boolean dialog, boolean userGesture, Message resultMsg)\n</code></pre>\n<p>I found a way to do it at StackOverflow, but it doesn't get the &quot;window.open('example.com')&quot; url.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Message href = view.getHandler().obtainMessage();\nview.requestFocusNodeHref(href);\nString url = href.getData().getString(&quot;url&quot;);\n\n// Only get &quot;&lt;a href='example.com' target='_blank'&gt;&quot; url.\n</code></pre>\n"},{"tags":["java","exponential","pow"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":4,"creation_date":1691541833,"post_id":76863899,"comment_id":135504784,"body_markdown":"I have not run your code, but I have to wonder if you&#39;re experiencing long overflow. Have you used a debugger to see what the variables are doing as the code runs?","body":"I have not run your code, but I have to wonder if you&#39;re experiencing long overflow. Have you used a debugger to see what the variables are doing as the code runs?"},{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":4,"creation_date":1691541873,"post_id":76863899,"comment_id":135504788,"body_markdown":"[And what have you already done in terms of debugging, yourself?](/help/how-to-ask)","body":"<a href=\"/help/how-to-ask\">And what have you already done in terms of debugging, yourself?</a>"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":5,"creation_date":1691543263,"post_id":76863899,"comment_id":135504880,"body_markdown":"Could you, please, tell us what the code is *supposed* to do? Even if  it should be obvious, describing what is expected is part of writing a good question.","body":"Could you, please, tell us what the code is <i>supposed</i> to do? Even if  it should be obvious, describing what is expected is part of writing a good question."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1691543359,"post_id":76863899,"comment_id":135504890,"body_markdown":"If the problem comes from a web page, such as a programming practice / challenge site, please provide a link to that page.","body":"If the problem comes from a web page, such as a programming practice / challenge site, please provide a link to that page."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1691547178,"post_id":76863899,"comment_id":135505198,"body_markdown":"Does anything on [this page](https://stackoverflow.com/questions/72830171/how-to-get-the-correct-output-in-modulo-109-7-format) help?","body":"Does anything on <a href=\"https://stackoverflow.com/questions/72830171/how-to-get-the-correct-output-in-modulo-109-7-format\">this page</a> help?"},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1691700128,"post_id":76863899,"comment_id":135530852,"body_markdown":"Hello, welcome to Stack Overflow! Maybe you should [read this](https://stackoverflow.com/help/how-to-ask), and then edit your question.","body":"Hello, welcome to Stack Overflow! Maybe you should <a href=\"https://stackoverflow.com/help/how-to-ask\">read this</a>, and then edit your question."}],"answers":[{"tags":[],"owner":{"account_id":87230,"reputation":36826,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"comment_count":0,"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1691541857,"creation_date":1691541857,"answer_id":76863907,"question_id":76863899,"body_markdown":"Likely a precision error, try to use `long` rather than `int` and if that still does not give you the right answer use `BigInteger` which is an arbitrary precision number.","title":"Java Pow Of 2 Gives me a Wrong answer","body":"<p>Likely a precision error, try to use <code>long</code> rather than <code>int</code> and if that still does not give you the right answer use <code>BigInteger</code> which is an arbitrary precision number.</p>\n"}],"owner":{"account_id":28667413,"reputation":1,"user_id":21951133,"display_name":"Hemanthkumar Pujari"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691542684,"creation_date":1691541670,"question_id":76863899,"body_markdown":"```\r\nclass Solution {\r\n    int mod = (int) (1e9) + 7;\r\n\r\n    int modPow(long base, long exponent) {\r\n        if (exponent == 0) return 1;\r\n\r\n        long result = 1;\r\n        while (exponent &gt; 0) {\r\n            if (exponent % 2 == 1) {\r\n                result = (result * base) % mod;\r\n            }\r\n            base = (base * base) % mod;\r\n            exponent /= 2;\r\n        }\r\n        return (int) result;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        Solution solution = new Solution();\r\n        int result = solution.modPow(2, (long) 1e9);\r\n        System.out.println(result); // Output: 336781474\r\n    }\r\n}\r\n```\r\nCould you please find the error:\\\r\nI got the wrong answer as: 140625001\\\r\nbut the correct output is: 336781474","title":"Java Pow Of 2 Gives me a Wrong answer","body":"<pre><code>class Solution {\n    int mod = (int) (1e9) + 7;\n\n    int modPow(long base, long exponent) {\n        if (exponent == 0) return 1;\n\n        long result = 1;\n        while (exponent &gt; 0) {\n            if (exponent % 2 == 1) {\n                result = (result * base) % mod;\n            }\n            base = (base * base) % mod;\n            exponent /= 2;\n        }\n        return (int) result;\n    }\n\n    public static void main(String[] args) {\n        Solution solution = new Solution();\n        int result = solution.modPow(2, (long) 1e9);\n        System.out.println(result); // Output: 336781474\n    }\n}\n</code></pre>\n<p>Could you please find the error:<br />\nI got the wrong answer as: 140625001<br />\nbut the correct output is: 336781474</p>\n"},{"tags":["java","javafx","javafxports","javafx-webengine"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691329430,"post_id":76846147,"comment_id":135474078,"body_markdown":"How are those icons addressed in your *code*, e.g. *mdi2o-office-building*?","body":"How are those icons addressed in your <i>code</i>, e.g. <i>mdi2o-office-building</i>?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691329856,"post_id":76846147,"comment_id":135474144,"body_markdown":"[Also](https://kordamp.org/ikonli/) *Here’s for example the minimum settings required for a JavaFX application\nmodule-info.java ...requires org.kordamp.ikonli.fontawesome;*","body":"<a href=\"https://kordamp.org/ikonli/\" rel=\"nofollow noreferrer\">Also</a> <i>Here’s for example the minimum settings required for a JavaFX application module-info.java ...requires org.kordamp.ikonli.fontawesome;</i>"},{"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"score":0,"creation_date":1691330313,"post_id":76846147,"comment_id":135474196,"body_markdown":"@g00se,thanks for responding. heres a sample of the icon presentation in my code","body":"@g00se,thanks for responding. heres a sample of the icon presentation in my code"},{"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"score":0,"creation_date":1691330339,"post_id":76846147,"comment_id":135474200,"body_markdown":"@g00se  `        FontIcon projectIcon =  new FontIcon(MaterialDesignO.OFFICE_BUILDING);\n        projectIcon.setIconSize(12);\n        projectLabel.setGraphic(projectIcon);`","body":"@g00se  `        FontIcon projectIcon =  new FontIcon(MaterialDesignO.OFFICE_BUILDING);         projectIcon.setIconSize(12);         projectLabel.setGraphic(projectIcon);`"},{"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"score":0,"creation_date":1691330398,"post_id":76846147,"comment_id":135474207,"body_markdown":"`       ** FontIcon projectIcon =  new FontIcon(MaterialDesignO.OFFICE_BUILDING);**\n        projectIcon.setIconSize(12);\n        projectLabel.setGraphic(projectIcon);`","body":"`       ** FontIcon projectIcon =  new FontIcon(MaterialDesignO.OFFICE_BUILDING);**         projectIcon.setIconSize(12);         projectLabel.setGraphic(projectIcon);`"},{"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"score":0,"creation_date":1691330496,"post_id":76846147,"comment_id":135474216,"body_markdown":"so brief, I use the materialdesign2 enums eg MaterialDesign2A.ACOUNT_CIRCLE","body":"so brief, I use the materialdesign2 enums eg MaterialDesign2A.ACOUNT_CIRCLE"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691330838,"post_id":76846147,"comment_id":135474258,"body_markdown":"You&#39;ve built an executable *fat* jar? If not, it won&#39;t find that kordamp dependency","body":"You&#39;ve built an executable <i>fat</i> jar? If not, it won&#39;t find that kordamp dependency"},{"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"score":0,"creation_date":1691331756,"post_id":76846147,"comment_id":135474363,"body_markdown":"@g00se. Its built using  intellij artifacts. Am not sure if thats a fat jar. sorry am originally from a python background. Please tell me, how i make it fat :)","body":"@g00se. Its built using  intellij artifacts. Am not sure if thats a fat jar. sorry am originally from a python background. Please tell me, how i make it fat :)"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691333031,"post_id":76846147,"comment_id":135474504,"body_markdown":"I can&#39;t say as I don&#39;t use IntelliJ. Are you using Maven under the covers?","body":"I can&#39;t say as I don&#39;t use IntelliJ. Are you using Maven under the covers?"},{"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"score":0,"creation_date":1691333571,"post_id":76846147,"comment_id":135474556,"body_markdown":"@g00se Yes i am.","body":"@g00se Yes i am."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1691340341,"post_id":76846147,"comment_id":135475320,"body_markdown":"Have maven [copy the dependencies](https://maven.apache.org/plugins/maven-dependency-plugin/copy-dependencies-mojo.html) (jar files) to your output directory (not shading them all together).  You will have multiple jar files.  When you run the app, use the `-p` option to place the directory with the jar files on the module path.  Ensure that you define proper module-info for your app as documented for JavaFX and your required dependencies.  Alternately, use jlink via the JavaFX maven plugin if your app has no automatic modules or perhaps jpackage otherwise.","body":"Have maven <a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/copy-dependencies-mojo.html\" rel=\"nofollow noreferrer\">copy the dependencies</a> (jar files) to your output directory (not shading them all together).  You will have multiple jar files.  When you run the app, use the <code>-p</code> option to place the directory with the jar files on the module path.  Ensure that you define proper module-info for your app as documented for JavaFX and your required dependencies.  Alternately, use jlink via the JavaFX maven plugin if your app has no automatic modules or perhaps jpackage otherwise."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1691340665,"post_id":76846147,"comment_id":135475352,"body_markdown":"What I described is for desktop apps. You mention [javafxports](https://gluonhq.com/products/mobile/javafxports) for embedded apps.  I know nothing about that.  You should contact Gluon directly for assistance with that.","body":"What I described is for desktop apps. You mention <a href=\"https://gluonhq.com/products/mobile/javafxports\" rel=\"nofollow noreferrer\">javafxports</a> for embedded apps.  I know nothing about that.  You should contact Gluon directly for assistance with that."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691341223,"post_id":76846147,"comment_id":135475421,"body_markdown":"When it comes to distribution, you will want either a fat jar or (sounder) a `jpackage`d solution. So @jewelsea is probably right to recommend `jlink` over a fat jar approach as it&#39;s a step on the road to `jpackage`. JavaFX is relatively problematic to jar as the runtime is non-standard","body":"When it comes to distribution, you will want either a fat jar or (sounder) a <code>jpackage</code>d solution. So @jewelsea is probably right to recommend <code>jlink</code> over a fat jar approach as it&#39;s a step on the road to <code>jpackage</code>. JavaFX is relatively problematic to jar as the runtime is non-standard"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1691356627,"post_id":76846147,"comment_id":135477068,"body_markdown":"I removed the JavaFX 11 tag as you state you are using JavaFX 18.","body":"I removed the JavaFX 11 tag as you state you are using JavaFX 18."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691407564,"post_id":76846147,"comment_id":135482720,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"score":0,"creation_date":1691435850,"post_id":76846147,"comment_id":135488681,"body_markdown":"@jewelsea I am using jlink. Its automatically configured into the project when created using intellij javafx plugin. EVERY item in the resource dir, [images,fonts etc] load properly so it must be an improperly configured dependency issue.  i have all three codependencies ikonli.javafx,ikonli.core and the icon package ikonli.materialdesign2.    All works well when run from intellij but the jar shows no ikonli icons except the images from the resource directory.  the icons are included in the project as such         DemoLabel.setGraphic(new FontIcon(MaterialDesignA.Account_Circle));","body":"@jewelsea I am using jlink. Its automatically configured into the project when created using intellij javafx plugin. EVERY item in the resource dir, [images,fonts etc] load properly so it must be an improperly configured dependency issue.  i have all three codependencies ikonli.javafx,ikonli.core and the icon package ikonli.materialdesign2.    All works well when run from intellij but the jar shows no ikonli icons except the images from the resource directory.  the icons are included in the project as such         DemoLabel.setGraphic(new FontIcon(MaterialDesignA.Account_Circle));"},{"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"score":0,"creation_date":1691436125,"post_id":76846147,"comment_id":135488731,"body_markdown":"@jewelsea   i read a few solutions regarding service files, so i opened the bundled jar with winrar and noticed that in the Manifest-Mf dir,  Ikonli.IkonProvider and Ikonli.IkonHandler where included.I am told three service files are needed. dono what am missing.been on this for three days.the project all complete except for the icons which completely destroys the look and feel. I need help. willing to upload the entire project to gdrive if necessary.its nothing secure.Just a school management system to generate reports.","body":"@jewelsea   i read a few solutions regarding service files, so i opened the bundled jar with winrar and noticed that in the Manifest-Mf dir,  Ikonli.IkonProvider and Ikonli.IkonHandler where included.I am told three service files are needed. dono what am missing.been on this for three days.the project all complete except for the icons which completely destroys the look and feel. I need help. willing to upload the entire project to gdrive if necessary.its nothing secure.Just a school management system to generate reports."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1691436136,"post_id":76846147,"comment_id":135488735,"body_markdown":"Your question talks about an &quot;executable jar&quot; in the title and in the body it talks about a &quot;shadow jar&quot;.  `jlink` does not create an executable jar, it creates a runtime image.  It doesn&#39;t matter if the maven jlink plugin is in your project, if you are not using it by calling [`mvn javafx:jlink`](https://github.com/openjfx/javafx-maven-plugin#javafxjlink-options).  I don&#39;t know if it is something you want to use or not as it is different than your state goal of an executable jar.","body":"Your question talks about an &quot;executable jar&quot; in the title and in the body it talks about a &quot;shadow jar&quot;.  <code>jlink</code> does not create an executable jar, it creates a runtime image.  It doesn&#39;t matter if the maven jlink plugin is in your project, if you are not using it by calling <a href=\"https://github.com/openjfx/javafx-maven-plugin#javafxjlink-options\" rel=\"nofollow noreferrer\"><code>mvn javafx:jlink</code></a>.  I don&#39;t know if it is something you want to use or not as it is different than your state goal of an executable jar."},{"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"score":0,"creation_date":1691436415,"post_id":76846147,"comment_id":135488794,"body_markdown":"@jewelsea true.very true. i suppose i did comfound the two. a runtime image it is then. am not quite use to java terminology.i just know enough to build basic utilities.but yes i do run the jar from command line. How does this help. please","body":"@jewelsea true.very true. i suppose i did comfound the two. a runtime image it is then. am not quite use to java terminology.i just know enough to build basic utilities.but yes i do run the jar from command line. How does this help. please"},{"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"score":0,"creation_date":1691436501,"post_id":76846147,"comment_id":135488814,"body_markdown":"@jewelsea here the jlink script in the build.gradle file              jlink {\n    imageZip = project.file(&quot;${buildDir}/distributions/app-${javafx.platform.classifier}.zip&quot;) as RegularFile\n    options = [&#39;--strip-debug&#39;, &#39;--compress&#39;, &#39;2&#39;, &#39;--no-header-files&#39;, &#39;--no-man-pages&#39;]\n    launcher {\n        name = &#39;app&#39;\n    }\n}\n\njlinkZip {\n    group = &#39;distribution&#39;\n}","body":"@jewelsea here the jlink script in the build.gradle file              jlink {     imageZip = project.file(&quot;${buildDir}/distributions/app-${javafx.platfor&zwnj;&#8203;m.classifier}.zip&quot;) as RegularFile     options = [&#39;--strip-debug&#39;, &#39;--compress&#39;, &#39;2&#39;, &#39;--no-header-files&#39;, &#39;--no-man-pages&#39;]     launcher {         name = &#39;app&#39;     } }  jlinkZip {     group = &#39;distribution&#39; }"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1691436668,"post_id":76846147,"comment_id":135488854,"body_markdown":"Well, it is a different question with a different solution.  An executable jar requires different tools and packaging to build and to use it you need a pre-installed java runtime.  With bundling of the correct components, the jar can be made to be cross-platform across different systems.  A jlink image can be distributed as a zip file that is extracted and a shell script that runs the app (or packaged in an installer via jpackage), it does not require a java runtime installed on the system and is not cross-platform, it will only run on the given target platform.","body":"Well, it is a different question with a different solution.  An executable jar requires different tools and packaging to build and to use it you need a pre-installed java runtime.  With bundling of the correct components, the jar can be made to be cross-platform across different systems.  A jlink image can be distributed as a zip file that is extracted and a shell script that runs the app (or packaged in an installer via jpackage), it does not require a java runtime installed on the system and is not cross-platform, it will only run on the given target platform."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1691436708,"post_id":76846147,"comment_id":135488859,"body_markdown":"I don&#39;t use gradle much, I use maven, I cannot help you with questions related to a gradle build.","body":"I don&#39;t use gradle much, I use maven, I cannot help you with questions related to a gradle build."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1691438001,"post_id":76846147,"comment_id":135489033,"body_markdown":"By default, jlink does not link service implementations.  I don&#39;t know if that is your issue or not.  You could try with the [`--bind-services`](https://docs.oracle.com/en/java/javase/17/docs/specs/man/jlink.html) option and see if it makes a difference.  Binding all services will result in a large linked image, but that may not matter.  If it does fix your issue, you can either just keep the large image or bind the individual service implementations required via the `--add-modules` switch.  Also, if you use jlink, make sure you don&#39;t use `shadowJar { mergeServiceFiles() }`.","body":"By default, jlink does not link service implementations.  I don&#39;t know if that is your issue or not.  You could try with the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/man/jlink.html\" rel=\"nofollow noreferrer\"><code>--bind-services</code></a> option and see if it makes a difference.  Binding all services will result in a large linked image, but that may not matter.  If it does fix your issue, you can either just keep the large image or bind the individual service implementations required via the <code>--add-modules</code> switch.  Also, if you use jlink, make sure you don&#39;t use <code>shadowJar { mergeServiceFiles() }</code>."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691439516,"post_id":76846147,"comment_id":135489283,"body_markdown":"Your suggestion of uploading is probably a good idea","body":"Your suggestion of uploading is probably a good idea"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1691444714,"post_id":76846147,"comment_id":135490044,"body_markdown":"@MarvinNewton Please don&#39;t screenshot text, instead place it in the question as text formatted as code - it is much easier to work with that way.","body":"@MarvinNewton Please don&#39;t screenshot text, instead place it in the question as text formatted as code - it is much easier to work with that way."}],"answers":[{"comments":[{"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"score":0,"creation_date":1691443570,"post_id":76855122,"comment_id":135489899,"body_markdown":"my setup is identical to yours only i use gradle not maven. I am upload the completed project to gdrive as we speak. Please give me a few minuites . would drop the link in a bit. Again its nothing serious , just a school project.  Never got hooked on a single issue for more than three days. This is my last resort i guess then i may just bundle it without icons","body":"my setup is identical to yours only i use gradle not maven. I am upload the completed project to gdrive as we speak. Please give me a few minuites . would drop the link in a bit. Again its nothing serious , just a school project.  Never got hooked on a single issue for more than three days. This is my last resort i guess then i may just bundle it without icons"},{"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"score":0,"creation_date":1691443693,"post_id":76855122,"comment_id":135489919,"body_markdown":"On second thoughts,the whole project is quite builky, will upload the build.gradle,module-info","body":"On second thoughts,the whole project is quite builky, will upload the build.gradle,module-info"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1691444881,"post_id":76855122,"comment_id":135490060,"body_markdown":"@MarvinNewton you don&#39;t need to upload your entire project to an external resource. I wouldn&#39;t look at it in any case, others may. If desired (and needed), you can provide a [mcve] with all resources inline in the question, either in this question or as a new question. I won&#39;t answer a question regarding gradle use, as I don&#39;t use it much, but others may. If you ask a new question, be clear about what you actually want (whether that be a single cross-platform jar, a zipped jlink image, or a jpackage created installer), what the target platforms are, and what the build tool is.","body":"@MarvinNewton you don&#39;t need to upload your entire project to an external resource. I wouldn&#39;t look at it in any case, others may. If desired (and needed), you can provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with all resources inline in the question, either in this question or as a new question. I won&#39;t answer a question regarding gradle use, as I don&#39;t use it much, but others may. If you ask a new question, be clear about what you actually want (whether that be a single cross-platform jar, a zipped jlink image, or a jpackage created installer), what the target platforms are, and what the build tool is."}],"tags":[],"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691442074,"creation_date":1691441762,"answer_id":76855122,"question_id":76846147,"body_markdown":"**Example app**\r\n\r\n * Uses jlink to link the app into an image that is zipped for deployment, rather than packaging the app as an executable jar (because this is what the asker stated they wanted to do in comments).  \r\n * Uses maven for build and packaging, as that is what I am familiar with.  \r\n * Will create an app usable only on the same platform type and architecture as the machine used to build the app.\r\n\r\nBuild requires Maven installation and JDK 20 installation.  Deployment is standalone and has no dependencies other than the OS it runs on.\r\n\r\n`src/main/java/module-info.java`\r\n\r\n    module com.example.materialicons {\r\n        requires javafx.controls;\r\n        requires org.kordamp.ikonli.javafx;\r\n        requires org.kordamp.ikonli.materialdesign2;\r\n    \r\n        exports com.example.materialicons;\r\n    }\r\n\r\n`pom.xml`\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n        &lt;artifactId&gt;materialicons&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;name&gt;materialicons&lt;/name&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\r\n                &lt;version&gt;20.0.2&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.kordamp.ikonli&lt;/groupId&gt;\r\n                &lt;artifactId&gt;ikonli-javafx&lt;/artifactId&gt;\r\n                &lt;version&gt;12.3.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.kordamp.ikonli&lt;/groupId&gt;\r\n                &lt;artifactId&gt;ikonli-materialdesign2-pack&lt;/artifactId&gt;\r\n                &lt;version&gt;12.3.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.11.0&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;20&lt;/source&gt;\r\n                        &lt;target&gt;20&lt;/target&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;0.0.8&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;default-cli&lt;/id&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;mainClass&gt;com.example.materialicons/com.example.materialicons.IconApplication&lt;/mainClass&gt;\r\n                                &lt;launcher&gt;iconapp&lt;/launcher&gt;\r\n                                &lt;jlinkZipName&gt;iconapp&lt;/jlinkZipName&gt;\r\n                                &lt;jlinkImageName&gt;iconapp&lt;/jlinkImageName&gt;\r\n                                &lt;noManPages&gt;true&lt;/noManPages&gt;\r\n                                &lt;stripDebug&gt;true&lt;/stripDebug&gt;\r\n                                &lt;noHeaderFiles&gt;true&lt;/noHeaderFiles&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n`src/main/java/com/example/materialicons/IconApplication.java`\r\n\r\nMaterial Design has icon packs, named A -&gt; Z.  We just use the A icon pack here, usage of icons from other packs is similar.\r\n\r\n    package com.example.materialicons;\r\n    \r\n    import javafx.application.Application;\r\n    import javafx.geometry.Insets;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.ScrollPane;\r\n    import javafx.scene.layout.FlowPane;\r\n    import javafx.stage.Stage;\r\n    import org.kordamp.ikonli.javafx.FontIcon;\r\n    import org.kordamp.ikonli.materialdesign2.MaterialDesignA;\r\n    \r\n    public class IconApplication extends Application {\r\n        @Override\r\n        public void start(Stage stage) {\r\n            FlowPane layout = new FlowPane();\r\n            layout.setPadding(new Insets(10));\r\n            layout.setPrefWrapLength(500);\r\n            for (MaterialDesignA iconEnumVal : MaterialDesignA.values()) {\r\n                FontIcon icon = new FontIcon(\r\n                        iconEnumVal.getDescription()\r\n                );\r\n                icon.setIconSize(40);\r\n                layout.getChildren().add(\r\n                        icon\r\n                );\r\n            }\r\n    \r\n            Scene scene = new Scene(new ScrollPane(layout), 530, 400);\r\n            stage.setScene(scene);\r\n            stage.show();\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch();\r\n        }\r\n    }\r\n\r\n**Build**\r\n\r\nBuild command (execute from the project root directory):\r\n\r\n    mvn clean javafx:jlink\r\n\r\nBuild output:\r\n\r\n    [INFO] Scanning for projects...\r\n    [INFO] \r\n    [INFO] ---------------------&lt; com.example:materialicons &gt;----------------------\r\n    [INFO] Building materialicons 1.0-SNAPSHOT\r\n    [INFO] --------------------------------[ jar ]---------------------------------\r\n    [INFO] \r\n    [INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ materialicons ---\r\n    [INFO] Deleting /Users/username/dev/materialicons/target\r\n    [INFO] \r\n    [INFO] &gt;&gt;&gt; javafx-maven-plugin:0.0.8:jlink (default-cli) &gt; process-classes @ materialicons &gt;&gt;&gt;\r\n    [INFO] \r\n    [INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ materialicons ---\r\n    [INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.\r\n    [INFO] skip non existing resourceDirectory /Users/username/dev/materialicons/src/main/resources\r\n    [INFO] \r\n    [INFO] --- maven-compiler-plugin:3.11.0:compile (default-compile) @ materialicons ---\r\n    [INFO] Changes detected - recompiling the module! :source\r\n    [INFO] Compiling 2 source files with javac [debug target 20 module-path] to target/classes\r\n    [INFO] \r\n    [INFO] &lt;&lt;&lt; javafx-maven-plugin:0.0.8:jlink (default-cli) &lt; process-classes @ materialicons &lt;&lt;&lt;\r\n    [INFO] \r\n    [INFO] \r\n    [INFO] --- javafx-maven-plugin:0.0.8:jlink (default-cli) @ materialicons ---\r\n    [INFO] Building zip: /Users/username/dev/materialicons/target/iconapp.zip\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD SUCCESS\r\n\r\n----\r\n\r\n**Example usage**\r\n\r\nExecute from your project root directory.  Adjust the command syntax for your OS type.\r\n\r\n    mkdir tmp\r\n    cd tmp\r\n    unzip ../target/iconapp.zip \r\n    bin/iconapp\r\n\r\n----\r\n\r\n**Example output**\r\n\r\n[![icons][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/EkRxl.png","title":"jar image from jlink does not show org.kordamp.materialdesign2 icons but they load when program is run in intellij","body":"<p><strong>Example app</strong></p>\n<ul>\n<li>Uses jlink to link the app into an image that is zipped for deployment, rather than packaging the app as an executable jar (because this is what the asker stated they wanted to do in comments).</li>\n<li>Uses maven for build and packaging, as that is what I am familiar with.</li>\n<li>Will create an app usable only on the same platform type and architecture as the machine used to build the app.</li>\n</ul>\n<p>Build requires Maven installation and JDK 20 installation.  Deployment is standalone and has no dependencies other than the OS it runs on.</p>\n<p><code>src/main/java/module-info.java</code></p>\n<pre><code>module com.example.materialicons {\n    requires javafx.controls;\n    requires org.kordamp.ikonli.javafx;\n    requires org.kordamp.ikonli.materialdesign2;\n\n    exports com.example.materialicons;\n}\n</code></pre>\n<p><code>pom.xml</code></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;materialicons&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;materialicons&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n            &lt;version&gt;20.0.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.kordamp.ikonli&lt;/groupId&gt;\n            &lt;artifactId&gt;ikonli-javafx&lt;/artifactId&gt;\n            &lt;version&gt;12.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.kordamp.ikonli&lt;/groupId&gt;\n            &lt;artifactId&gt;ikonli-materialdesign2-pack&lt;/artifactId&gt;\n            &lt;version&gt;12.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.11.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;20&lt;/source&gt;\n                    &lt;target&gt;20&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.0.8&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;default-cli&lt;/id&gt;\n                        &lt;configuration&gt;\n                            &lt;mainClass&gt;com.example.materialicons/com.example.materialicons.IconApplication&lt;/mainClass&gt;\n                            &lt;launcher&gt;iconapp&lt;/launcher&gt;\n                            &lt;jlinkZipName&gt;iconapp&lt;/jlinkZipName&gt;\n                            &lt;jlinkImageName&gt;iconapp&lt;/jlinkImageName&gt;\n                            &lt;noManPages&gt;true&lt;/noManPages&gt;\n                            &lt;stripDebug&gt;true&lt;/stripDebug&gt;\n                            &lt;noHeaderFiles&gt;true&lt;/noHeaderFiles&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p><code>src/main/java/com/example/materialicons/IconApplication.java</code></p>\n<p>Material Design has icon packs, named A -&gt; Z.  We just use the A icon pack here, usage of icons from other packs is similar.</p>\n<pre><code>package com.example.materialicons;\n\nimport javafx.application.Application;\nimport javafx.geometry.Insets;\nimport javafx.scene.Scene;\nimport javafx.scene.control.ScrollPane;\nimport javafx.scene.layout.FlowPane;\nimport javafx.stage.Stage;\nimport org.kordamp.ikonli.javafx.FontIcon;\nimport org.kordamp.ikonli.materialdesign2.MaterialDesignA;\n\npublic class IconApplication extends Application {\n    @Override\n    public void start(Stage stage) {\n        FlowPane layout = new FlowPane();\n        layout.setPadding(new Insets(10));\n        layout.setPrefWrapLength(500);\n        for (MaterialDesignA iconEnumVal : MaterialDesignA.values()) {\n            FontIcon icon = new FontIcon(\n                    iconEnumVal.getDescription()\n            );\n            icon.setIconSize(40);\n            layout.getChildren().add(\n                    icon\n            );\n        }\n\n        Scene scene = new Scene(new ScrollPane(layout), 530, 400);\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n<p><strong>Build</strong></p>\n<p>Build command (execute from the project root directory):</p>\n<pre><code>mvn clean javafx:jlink\n</code></pre>\n<p>Build output:</p>\n<pre><code>[INFO] Scanning for projects...\n[INFO] \n[INFO] ---------------------&lt; com.example:materialicons &gt;----------------------\n[INFO] Building materialicons 1.0-SNAPSHOT\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] \n[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ materialicons ---\n[INFO] Deleting /Users/username/dev/materialicons/target\n[INFO] \n[INFO] &gt;&gt;&gt; javafx-maven-plugin:0.0.8:jlink (default-cli) &gt; process-classes @ materialicons &gt;&gt;&gt;\n[INFO] \n[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ materialicons ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] skip non existing resourceDirectory /Users/username/dev/materialicons/src/main/resources\n[INFO] \n[INFO] --- maven-compiler-plugin:3.11.0:compile (default-compile) @ materialicons ---\n[INFO] Changes detected - recompiling the module! :source\n[INFO] Compiling 2 source files with javac [debug target 20 module-path] to target/classes\n[INFO] \n[INFO] &lt;&lt;&lt; javafx-maven-plugin:0.0.8:jlink (default-cli) &lt; process-classes @ materialicons &lt;&lt;&lt;\n[INFO] \n[INFO] \n[INFO] --- javafx-maven-plugin:0.0.8:jlink (default-cli) @ materialicons ---\n[INFO] Building zip: /Users/username/dev/materialicons/target/iconapp.zip\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n</code></pre>\n<hr />\n<p><strong>Example usage</strong></p>\n<p>Execute from your project root directory.  Adjust the command syntax for your OS type.</p>\n<pre><code>mkdir tmp\ncd tmp\nunzip ../target/iconapp.zip \nbin/iconapp\n</code></pre>\n<hr />\n<p><strong>Example output</strong></p>\n<p><a href=\"https://i.stack.imgur.com/EkRxl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EkRxl.png\" alt=\"icons\" /></a></p>\n"},{"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1691448273,"post_id":76855458,"comment_id":135490449,"body_markdown":"Afraid to say that putting up partial code is really pointless. Also posting it as an *answer* is very misleading","body":"Afraid to say that putting up partial code is really pointless. Also posting it as an <i>answer</i> is very misleading"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1691449077,"post_id":76855458,"comment_id":135490536,"body_markdown":"An noted in one of my prior comments: &quot;Alternately, use jlink via the JavaFX maven plugin if your app has no automatic modules or perhaps jpackage otherwise.&quot;  You have many dependencies defined as automatic modules, which won&#39;t work with jlink, because it doesn&#39;t support them.  You also, strangely, define some modules which aren&#39;t automatic modules (like JavaFX modules) as automatic modules.  You can&#39;t use jlink to create an image of your entire application.","body":"An noted in one of my prior comments: &quot;Alternately, use jlink via the JavaFX maven plugin if your app has no automatic modules or perhaps jpackage otherwise.&quot;  You have many dependencies defined as automatic modules, which won&#39;t work with jlink, because it doesn&#39;t support them.  You also, strangely, define some modules which aren&#39;t automatic modules (like JavaFX modules) as automatic modules.  You can&#39;t use jlink to create an image of your entire application."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1691449313,"post_id":76855458,"comment_id":135490561,"body_markdown":"There is some kind of workaround in the [badass-jlink-plugin](https://badass-jlink-plugin.beryx.org/releases/latest/) that you use that allows it to work with automatic modules -&gt; &quot;The badass-jlink plugin takes a more pragmatic approach by combining all non-modular dependencies into a single jar. This way, only the resulting merged module needs a module descriptor.&quot;  But such a workaround wouldn&#39;t be guaranteed to work with all modular software, as some software may be built to only operate as a module (should work in most cases though).","body":"There is some kind of workaround in the <a href=\"https://badass-jlink-plugin.beryx.org/releases/latest/\" rel=\"nofollow noreferrer\">badass-jlink-plugin</a> that you use that allows it to work with automatic modules -&gt; &quot;The badass-jlink plugin takes a more pragmatic approach by combining all non-modular dependencies into a single jar. This way, only the resulting merged module needs a module descriptor.&quot;  But such a workaround wouldn&#39;t be guaranteed to work with all modular software, as some software may be built to only operate as a module (should work in most cases though)."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1691450867,"post_id":76855458,"comment_id":135490703,"body_markdown":"Providing assistance with the packaging and deployment of a project with so many dependencies is beyond the scope of what is feasible for StackOverflow IMO.","body":"Providing assistance with the packaging and deployment of a project with so many dependencies is beyond the scope of what is feasible for StackOverflow IMO."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1691451311,"post_id":76855458,"comment_id":135490748,"body_markdown":"In your question you say you are using Java 18, but in the gradle file, it actually uses `11.0.2`, which is quite old.","body":"In your question you say you are using Java 18, but in the gradle file, it actually uses <code>11.0.2</code>, which is quite old."},{"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"score":0,"creation_date":1691885795,"post_id":76855458,"comment_id":135551724,"body_markdown":"Icons finally appear after attempting to use the SVGLoader from  implementation(&#39;com.github.hervegirod:fxsvgimage:1.1&#39;) to load resource svgs in place of Ikonli Icons.Dont know how that solved the issue but it did","body":"Icons finally appear after attempting to use the SVGLoader from  implementation(&#39;com.github.hervegirod:fxsvgimage:1.1&#39;) to load resource svgs in place of Ikonli Icons.Dont know how that solved the issue but it did"}],"tags":[],"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691446693,"creation_date":1691446693,"answer_id":76855458,"question_id":76846147,"body_markdown":"**module-info.java**  \r\n\r\n```\r\nmodule manager.school_manager {\r\n    //javafx and related deps\r\n    requires javafx.controls;\r\n    requires javafx.fxml;\r\n    requires org.controlsfx.controls;\r\n    requires com.dlsc.formsfx;\r\n    requires org.jfxtras.styles.jmetro;\r\n\r\n    requires org.kordamp.ikonli.javafx;\r\n    requires org.kordamp.ikonli.materialdesign2;\r\n    requires org.kordamp.ikonli.core;\r\n\r\n    requires javafx.base;\r\n    requires java.desktop;\r\n    requires javafx.graphics;\r\n    requires javafx.web;\r\n    requires javafx.media;\r\n\r\n    // json io\r\n    requires com.google.code.gson;\r\n\r\n\r\n\r\n\r\n    //itext 7 ===&gt; pdf deps\r\n    requires itextpdf.layout;\r\n    requires itextpdf.kernel;\r\n    requires itextpdf.io;\r\n    requires itextpdf.commons;\r\n    requires itextpdf.pdfa;\r\n    requires itextpdf.barcodes;\r\n\r\n    // postgres deps\r\n    requires java.sql;\r\n    requires org.postgresql;\r\n\r\n    //excel deps\r\n    requires org.apache.poi.ooxml;\r\n\r\n    //logging deps and transitive deps\r\n    requires org.slf4j;\r\n    requires commons.math3;\r\n\r\n\r\n    opens manager.school_manager to javafx.fxml;\r\n    opens manager.school_manager.controllers to javafx.fxml;\r\n\r\n    exports manager.school_manager;\r\n}`\r\n\r\n\r\n\r\n```\r\n\r\n**build.gradle** \r\n\r\n```\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;application&#39;\r\n    id &#39;org.openjfx.javafxplugin&#39; version &#39;0.0.10&#39;\r\n    id &#39;org.beryx.jlink&#39; version &#39;2.24.1&#39;\r\n    id &#39;org.gradlex.extra-java-module-info&#39; version &#39;1.3&#39;\r\n    id &#39;java-library&#39;\r\n//    id &#39;com.github.johnrengelman.shadow&#39; version &#39;6.1.0&#39;\r\n}\r\n\r\n\r\n//shadowJar {\r\n//    mergeServiceFiles()\r\n//}\r\n//\r\n\r\n\r\ngroup &#39;manager&#39;\r\nversion &#39;1.0-SNAPSHOT&#39;\r\n\r\next.moduleName= &#39;manager.school_manager&#39;\r\n\r\n\r\nextraJavaModuleInfo{\r\n    failOnMissingModuleInfo.set(false)\r\n\r\n    module(&quot;org.tinylog:tinylog-api&quot;,&quot;org.tinylog.api&quot;){\r\n        exportAllPackages()\r\n        requireAllDefinedDependencies\r\n    }\r\n    module(&quot;org.tinylog:tinylog-impl&quot;,&quot;org.tinylog.impl&quot;){\r\n        exportAllPackages()\r\n        requireAllDefinedDependencies\r\n    }\r\n\r\n    module(&quot;com.google.code.gson:gson&quot;,&quot;com.google.code.gson&quot;){\r\n        exportAllPackages()\r\n        requireAllDefinedDependencies\r\n    }\r\n    module(&quot;io.github.typhon0:AnimateFX&quot;,&quot;io.github.typhon0&quot;){\r\n        exportAllPackages()\r\n        requireAllDefinedDependencies\r\n    }\r\n    module(&quot;com.github.Dansoftowner:PDFViewerFX&quot;,&quot;com.github.Dansoftowner&quot;){\r\n        exportAllPackages()\r\n        requireAllDefinedDependencies\r\n    }\r\n    module(&quot;org.apache.commons:commons-math3&quot;,&quot;commons.math3&quot;){\r\n        exportAllPackages()\r\n        requireAllDefinedDependencies\r\n    }\r\n    module(&quot;com.zaxxer:SparseBitSet&quot;,&quot;SparseBitSet&quot;){\r\n        exportAllPackages()\r\n        requireAllDefinedDependencies\r\n    }\r\n\r\n\r\n\r\n    automaticModule(&quot;fxribbon.jar&quot;,&quot;com.pixelduke.fxribbon&quot;)\r\n    automaticModule(&quot;postgresql.jar&quot;,&quot;org.postgresql&quot;)\r\n\r\n    automaticModule(&quot;log4j.jar&quot;,&quot;org.log4j&quot;)\r\n    automaticModule(&quot;log4j-api.jar&quot;,&quot;org.log4j-api&quot;)\r\n    automaticModule(&quot;slf4j-api.jar&quot;,&quot;org.slf4j&quot;)\r\n\r\n    automaticModule(&quot;layout.jar&quot;,&quot;itextpdf.layout&quot;)\r\n    automaticModule(&quot;kernel.jar&quot;,&quot;itextpdf.kernel&quot;)\r\n    automaticModule(&quot;pdfa.jar&quot;,&quot;itextpdf.pdfa&quot;)\r\n    automaticModule(&quot;io.jar&quot;,&quot;itextpdf.io&quot;)\r\n    automaticModule(&quot;commons.jar&quot;,&quot;itextpdf.commons&quot;)\r\n    automaticModule(&quot;barcodes.jar&quot;,&quot;itextpdf.barcodes&quot;)\r\n    automaticModule(&quot;sign.jar&quot;,&quot;itextpdf.sign&quot;)\r\n    automaticModule(&quot;svg.jar&quot;,&quot;itextpdf.svg&quot;)\r\n\r\n\r\n    automaticModule(&quot;javafxweb.jar&quot;,&quot;javafx.web&quot;)\r\n    automaticModule(&quot;javafxmedia.jar&quot;,&quot;javafx.media&quot;)\r\n\r\n\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n    maven{\r\n        url &quot;https://plugins.gradle.org/m2/&quot;\r\n    }\r\n    maven {\r\n        url &quot;https://jitpack.io&quot;\r\n    }\r\n\r\n}\r\n\r\next {\r\n    junitVersion = &#39;5.9.2&#39;\r\n}\r\n\r\n\r\ntasks.withType(JavaCompile) {\r\n    options.encoding = &#39;UTF-8&#39;\r\n}\r\n\r\napplication {\r\n    mainModule = &#39;manager.school_manager&#39;\r\n    mainClass = &#39;manager.school_manager.Main&#39;\r\n}\r\n\r\njavafx {\r\n    version = &#39;11.0.2&#39;\r\n    modules = [&#39;javafx.controls&#39;, &#39;javafx.fxml&#39;]\r\n}\r\n\r\n\r\ndependencies {\r\n//    converts non modular jars to jpms compatible\r\n    implementation(&#39;org.gradlex:extra-java-module-info:1.3&#39;)\r\n//\r\n//    implementation(&#39;com.google.firebase:firebase-admin:9.1.1&#39;)\r\n\r\n    implementation(&#39;org.controlsfx:controlsfx:11.1.2&#39;)\r\n    implementation(&#39;com.dlsc.formsfx:formsfx-core:11.6.0&#39;) {\r\n        exclude(group: &#39;org.openjfx&#39;)\r\n    }\r\n    implementation(&#39;net.synedra:validatorfx:0.4.0&#39;) {\r\n        exclude(group: &#39;org.openjfx&#39;)\r\n    }\r\n\r\n\r\n    implementation(&#39;org.jfxtras:jmetro:11.6.16&#39;)\r\n    implementation(fileTree(dir:&#39;/libs&#39;,includes:[&#39;*.jar&#39;]))\r\n//    implementation(&#39;org.openpnp:opencv:3.4.2-0&#39;)\r\n//    implementation(&#39;eu.hansolo.fx:charts:17.1.27&#39;)\r\n\r\n    implementation(&#39;org.tinylog:tinylog-api:2.6.1&#39;)\r\n    implementation(&#39;org.tinylog:tinylog-impl:2.6.1&#39;)\r\n    implementation(&#39;com.google.code.gson:gson:2.3.1&#39;)\r\n    implementation(&#39;io.github.typhon0:AnimateFX:1.2.4&#39;)\r\n\r\n    implementation(&#39;org.kordamp.ikonli:ikonli-materialdesign2-pack:12.3.1&#39;)\r\n    implementation &#39;org.kordamp.ikonli:ikonli-core:12.3.1&#39;\r\n    implementation(&#39;org.kordamp.ikonli:ikonli-javafx:12.3.1&#39;)\r\n\r\n\r\n    implementation(&#39;org.apache.poi:poi-ooxml:5.2.3&#39;){\r\n        exclude(group: &quot;javax.xml&quot;)\r\n    }\r\n    implementation(&#39;com.zaxxer:SparseBitSet:1.2&#39;)\r\n\r\n    implementation &#39;org.kordamp.jipsy:jipsy-annotations:1.2.0&#39;\r\n//    implementation &#39;org.apache.xmlgraphics:batik-transcoder:1.13&#39;\r\n\r\n\r\n    testImplementation(&quot;org.junit.jupiter:junit-jupiter-api:${junitVersion}&quot;)\r\n    testRuntimeOnly(&quot;org.junit.jupiter:junit-jupiter-engine:${junitVersion}&quot;)\r\n}\r\n\r\ntest {\r\n    useJUnitPlatform()\r\n}\r\n\r\njlink {\r\n    imageZip = project.file(&quot;${buildDir}/distributions/app-${javafx.platform.classifier}.zip&quot;) as RegularFile\r\n    options = [&#39;--strip-debug&#39;, &#39;--compress&#39;, &#39;2&#39;, &#39;--no-header-files&#39;, &#39;--no-man-pages&#39;]\r\n    launcher {\r\n        name = &#39;app&#39;\r\n    }\r\n}\r\n\r\njlinkZip {\r\n    group = &#39;distribution&#39;\r\n}\r\n\r\n\r\n````\r\n\r\n\r\n**Main.java**  *** a simple entry that show the icon implementation throughout the code in a simple Label ***\r\n\r\n```\r\n\r\nimport org.kordamp.ikonli.javafx.FontIcon;\r\nimport org.kordamp.ikonli.materialdesign2.*;\r\n... other imports  \r\n\r\n\r\n\r\n\r\n\r\n\r\npublic class Main extends Application {\r\n\r\n    @Override\r\n    public void start(Stage stage) throws IOException, ClassNotFoundException, SQLException {\r\n        System.out.println(&quot;LAUCHING SMPRO....&quot;);\r\n\r\n//      loading main.fxml\r\n        FXMLLoader loader = new FXMLLoader();\r\n        URL fxmlLocation = ResourceAnchor.getAppResource(&quot;views/main.fxml&quot;);\r\n        loader.setLocation(fxmlLocation);\r\n        loader.setResources(ResourceBundle.getBundle(StaticNames.RESOURCE_BUNDLE_BASENAME.getName()));\r\n        Parent root = loader.&lt;VBox&gt;load();\r\n        root.getStyleClass().add(JMetroStyleClass.BACKGROUND);\r\n\r\n//        get controller instance\r\n        EntryController entryController  = loader.getController();\r\n        entryController.EntryStage.set(stage);\r\n\r\n\r\n        Scene scene = new Scene(new Button(&quot;Click me&quot;,new FontIcon(MaterialDesignA.ACCOUNT_CIRCLE)));\r\n\r\n\r\n\r\n        stage.setTitle(&quot;Sample title&quot;);\r\n        stage.setScene(scene);\r\n        stage.setResizable(false);\r\n        stage.getIcons().add(new Image(ResourceAnchor.getResourceStream(&quot;images/logo.png&quot;)));\r\n\r\n        stage.show();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n```\r\n","title":"jar image from jlink does not show org.kordamp.materialdesign2 icons but they load when program is run in intellij","body":"<p><strong>module-info.java</strong></p>\n<pre><code>module manager.school_manager {\n    //javafx and related deps\n    requires javafx.controls;\n    requires javafx.fxml;\n    requires org.controlsfx.controls;\n    requires com.dlsc.formsfx;\n    requires org.jfxtras.styles.jmetro;\n\n    requires org.kordamp.ikonli.javafx;\n    requires org.kordamp.ikonli.materialdesign2;\n    requires org.kordamp.ikonli.core;\n\n    requires javafx.base;\n    requires java.desktop;\n    requires javafx.graphics;\n    requires javafx.web;\n    requires javafx.media;\n\n    // json io\n    requires com.google.code.gson;\n\n\n\n\n    //itext 7 ===&gt; pdf deps\n    requires itextpdf.layout;\n    requires itextpdf.kernel;\n    requires itextpdf.io;\n    requires itextpdf.commons;\n    requires itextpdf.pdfa;\n    requires itextpdf.barcodes;\n\n    // postgres deps\n    requires java.sql;\n    requires org.postgresql;\n\n    //excel deps\n    requires org.apache.poi.ooxml;\n\n    //logging deps and transitive deps\n    requires org.slf4j;\n    requires commons.math3;\n\n\n    opens manager.school_manager to javafx.fxml;\n    opens manager.school_manager.controllers to javafx.fxml;\n\n    exports manager.school_manager;\n}`\n\n\n\n</code></pre>\n<p><strong>build.gradle</strong></p>\n<pre><code>plugins {\n    id 'java'\n    id 'application'\n    id 'org.openjfx.javafxplugin' version '0.0.10'\n    id 'org.beryx.jlink' version '2.24.1'\n    id 'org.gradlex.extra-java-module-info' version '1.3'\n    id 'java-library'\n//    id 'com.github.johnrengelman.shadow' version '6.1.0'\n}\n\n\n//shadowJar {\n//    mergeServiceFiles()\n//}\n//\n\n\ngroup 'manager'\nversion '1.0-SNAPSHOT'\n\next.moduleName= 'manager.school_manager'\n\n\nextraJavaModuleInfo{\n    failOnMissingModuleInfo.set(false)\n\n    module(&quot;org.tinylog:tinylog-api&quot;,&quot;org.tinylog.api&quot;){\n        exportAllPackages()\n        requireAllDefinedDependencies\n    }\n    module(&quot;org.tinylog:tinylog-impl&quot;,&quot;org.tinylog.impl&quot;){\n        exportAllPackages()\n        requireAllDefinedDependencies\n    }\n\n    module(&quot;com.google.code.gson:gson&quot;,&quot;com.google.code.gson&quot;){\n        exportAllPackages()\n        requireAllDefinedDependencies\n    }\n    module(&quot;io.github.typhon0:AnimateFX&quot;,&quot;io.github.typhon0&quot;){\n        exportAllPackages()\n        requireAllDefinedDependencies\n    }\n    module(&quot;com.github.Dansoftowner:PDFViewerFX&quot;,&quot;com.github.Dansoftowner&quot;){\n        exportAllPackages()\n        requireAllDefinedDependencies\n    }\n    module(&quot;org.apache.commons:commons-math3&quot;,&quot;commons.math3&quot;){\n        exportAllPackages()\n        requireAllDefinedDependencies\n    }\n    module(&quot;com.zaxxer:SparseBitSet&quot;,&quot;SparseBitSet&quot;){\n        exportAllPackages()\n        requireAllDefinedDependencies\n    }\n\n\n\n    automaticModule(&quot;fxribbon.jar&quot;,&quot;com.pixelduke.fxribbon&quot;)\n    automaticModule(&quot;postgresql.jar&quot;,&quot;org.postgresql&quot;)\n\n    automaticModule(&quot;log4j.jar&quot;,&quot;org.log4j&quot;)\n    automaticModule(&quot;log4j-api.jar&quot;,&quot;org.log4j-api&quot;)\n    automaticModule(&quot;slf4j-api.jar&quot;,&quot;org.slf4j&quot;)\n\n    automaticModule(&quot;layout.jar&quot;,&quot;itextpdf.layout&quot;)\n    automaticModule(&quot;kernel.jar&quot;,&quot;itextpdf.kernel&quot;)\n    automaticModule(&quot;pdfa.jar&quot;,&quot;itextpdf.pdfa&quot;)\n    automaticModule(&quot;io.jar&quot;,&quot;itextpdf.io&quot;)\n    automaticModule(&quot;commons.jar&quot;,&quot;itextpdf.commons&quot;)\n    automaticModule(&quot;barcodes.jar&quot;,&quot;itextpdf.barcodes&quot;)\n    automaticModule(&quot;sign.jar&quot;,&quot;itextpdf.sign&quot;)\n    automaticModule(&quot;svg.jar&quot;,&quot;itextpdf.svg&quot;)\n\n\n    automaticModule(&quot;javafxweb.jar&quot;,&quot;javafx.web&quot;)\n    automaticModule(&quot;javafxmedia.jar&quot;,&quot;javafx.media&quot;)\n\n\n}\n\nrepositories {\n    mavenCentral()\n    maven{\n        url &quot;https://plugins.gradle.org/m2/&quot;\n    }\n    maven {\n        url &quot;https://jitpack.io&quot;\n    }\n\n}\n\next {\n    junitVersion = '5.9.2'\n}\n\n\ntasks.withType(JavaCompile) {\n    options.encoding = 'UTF-8'\n}\n\napplication {\n    mainModule = 'manager.school_manager'\n    mainClass = 'manager.school_manager.Main'\n}\n\njavafx {\n    version = '11.0.2'\n    modules = ['javafx.controls', 'javafx.fxml']\n}\n\n\ndependencies {\n//    converts non modular jars to jpms compatible\n    implementation('org.gradlex:extra-java-module-info:1.3')\n//\n//    implementation('com.google.firebase:firebase-admin:9.1.1')\n\n    implementation('org.controlsfx:controlsfx:11.1.2')\n    implementation('com.dlsc.formsfx:formsfx-core:11.6.0') {\n        exclude(group: 'org.openjfx')\n    }\n    implementation('net.synedra:validatorfx:0.4.0') {\n        exclude(group: 'org.openjfx')\n    }\n\n\n    implementation('org.jfxtras:jmetro:11.6.16')\n    implementation(fileTree(dir:'/libs',includes:['*.jar']))\n//    implementation('org.openpnp:opencv:3.4.2-0')\n//    implementation('eu.hansolo.fx:charts:17.1.27')\n\n    implementation('org.tinylog:tinylog-api:2.6.1')\n    implementation('org.tinylog:tinylog-impl:2.6.1')\n    implementation('com.google.code.gson:gson:2.3.1')\n    implementation('io.github.typhon0:AnimateFX:1.2.4')\n\n    implementation('org.kordamp.ikonli:ikonli-materialdesign2-pack:12.3.1')\n    implementation 'org.kordamp.ikonli:ikonli-core:12.3.1'\n    implementation('org.kordamp.ikonli:ikonli-javafx:12.3.1')\n\n\n    implementation('org.apache.poi:poi-ooxml:5.2.3'){\n        exclude(group: &quot;javax.xml&quot;)\n    }\n    implementation('com.zaxxer:SparseBitSet:1.2')\n\n    implementation 'org.kordamp.jipsy:jipsy-annotations:1.2.0'\n//    implementation 'org.apache.xmlgraphics:batik-transcoder:1.13'\n\n\n    testImplementation(&quot;org.junit.jupiter:junit-jupiter-api:${junitVersion}&quot;)\n    testRuntimeOnly(&quot;org.junit.jupiter:junit-jupiter-engine:${junitVersion}&quot;)\n}\n\ntest {\n    useJUnitPlatform()\n}\n\njlink {\n    imageZip = project.file(&quot;${buildDir}/distributions/app-${javafx.platform.classifier}.zip&quot;) as RegularFile\n    options = ['--strip-debug', '--compress', '2', '--no-header-files', '--no-man-pages']\n    launcher {\n        name = 'app'\n    }\n}\n\njlinkZip {\n    group = 'distribution'\n}\n\n\n</code></pre>\n<p><strong>Main.java</strong>  *** a simple entry that show the icon implementation throughout the code in a simple Label ***</p>\n<pre><code>\nimport org.kordamp.ikonli.javafx.FontIcon;\nimport org.kordamp.ikonli.materialdesign2.*;\n... other imports  \n\n\n\n\n\n\npublic class Main extends Application {\n\n    @Override\n    public void start(Stage stage) throws IOException, ClassNotFoundException, SQLException {\n        System.out.println(&quot;LAUCHING SMPRO....&quot;);\n\n//      loading main.fxml\n        FXMLLoader loader = new FXMLLoader();\n        URL fxmlLocation = ResourceAnchor.getAppResource(&quot;views/main.fxml&quot;);\n        loader.setLocation(fxmlLocation);\n        loader.setResources(ResourceBundle.getBundle(StaticNames.RESOURCE_BUNDLE_BASENAME.getName()));\n        Parent root = loader.&lt;VBox&gt;load();\n        root.getStyleClass().add(JMetroStyleClass.BACKGROUND);\n\n//        get controller instance\n        EntryController entryController  = loader.getController();\n        entryController.EntryStage.set(stage);\n\n\n        Scene scene = new Scene(new Button(&quot;Click me&quot;,new FontIcon(MaterialDesignA.ACCOUNT_CIRCLE)));\n\n\n\n        stage.setTitle(&quot;Sample title&quot;);\n        stage.setScene(scene);\n        stage.setResizable(false);\n        stage.getIcons().add(new Image(ResourceAnchor.getResourceStream(&quot;images/logo.png&quot;)));\n\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n\n\n\n}\n</code></pre>\n"}],"owner":{"account_id":20142168,"reputation":1,"user_id":14820053,"display_name":"Marvin Newton"},"comment_count":25,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691542169,"creation_date":1691329079,"question_id":76846147,"body_markdown":"# javafx applications not showing org.kordamp.materialdesign2 icons\r\n\r\nI recently completed a school management program with JavaFX 18 which runs properly using the normal IntelliJ run configurations but fails to load ALL icons from org.kordamp.materialdesign2. I have scanned the entire web and come across a few answers regarding service files. I have all three required packages in my module-info file **org.kormap.ikoli.core,org.kordamp.javafx and org.kordamp.materialdesign2**\r\n\r\nWhen the jar is run, it shows messages like this:\r\n\r\n```none\r\nException in thread &quot;JavaFX Application Thread&quot; java.lang.UnsupportedOperationException: Cannot resolve &#39;mdi2o-office-building&#39;\r\n\tat org.kordamp.ikonli.AbstractIkonResolver.resolve(AbstractIkonResolver.java:61)\r\n\tat org.kordamp.ikonli.javafx.IkonResolver.resolve(IkonResolver.java:73)\r\n\tat org.kordamp.ikonli.javafx.FontIcon.lambda$new$2(FontIcon.java:76)\r\n\tat com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:360)\r\n\tat com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:80)\r\n\tat javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:106)\r\n\tat javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:113)\r\n\tat javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:147)\r\n\tat javafx.css.StyleableObjectProperty.set(StyleableObjectProperty.java:82)\r\n\tat org.kordamp.ikonli.javafx.FontIcon.setIconCode(FontIcon.java:231)\r\n\tat org.kordamp.ikonli.javafx.FontIcon.&lt;init&gt;(FontIcon.java:97)\r\n\tat manager.school_manager.EntryController.initialize(EntryController.java:115)\r\n\tat javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2573)\r\n\tat javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2466)\r\n\tat javafx.fxml.FXMLLoader.load(FXMLLoader.java:2435)\r\n\tat manager.school_manager.Entry.start(Entry.java:56)\r\n\tat com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:846)\r\n\tat com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:455)\r\n\tat com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:428)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n\tat com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:427)\r\n\tat com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\r\n\tat com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\r\n\tat com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:174)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1589)\r\n```\r\n\r\n[**error messages on running jar**](https://i.stack.imgur.com/3tGzU.png) | \r\n[**Program without icons on running jar**](https://i.stack.imgur.com/FHWIU.png) | \r\n[**Program showing icons when run in intellij**](https://i.stack.imgur.com/7G5AF.png)\r\n\r\n[module-info.java with all three co-dependencies](https://i.stack.imgur.com/HT7v7.png)\r\n\r\n\r\n\r\n# **Tried using the shadow jar plugin as stated in it&#39;s documentation**\r\n[**build.gradle file showing use of shadow jar plugin**](https://i.stack.imgur.com/TxAaq.png)\r\n\r\nAlso opened the jar file with winrar and checked the Manifest/Manifest.MF/services and here is what I found:\r\n\r\n[it shows two files related to ikonli. Am not quite versed to services in general so I can&#39;t tell if these would suffice.*** I would gladly accept any help that would help me resolve this problem***](https://i.stack.imgur.com/f2Wi9.png)\r\n","title":"jar image from jlink does not show org.kordamp.materialdesign2 icons but they load when program is run in intellij","body":"<h1>javafx applications not showing org.kordamp.materialdesign2 icons</h1>\n<p>I recently completed a school management program with JavaFX 18 which runs properly using the normal IntelliJ run configurations but fails to load ALL icons from org.kordamp.materialdesign2. I have scanned the entire web and come across a few answers regarding service files. I have all three required packages in my module-info file <strong>org.kormap.ikoli.core,org.kordamp.javafx and org.kordamp.materialdesign2</strong></p>\n<p>When the jar is run, it shows messages like this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;JavaFX Application Thread&quot; java.lang.UnsupportedOperationException: Cannot resolve 'mdi2o-office-building'\n    at org.kordamp.ikonli.AbstractIkonResolver.resolve(AbstractIkonResolver.java:61)\n    at org.kordamp.ikonli.javafx.IkonResolver.resolve(IkonResolver.java:73)\n    at org.kordamp.ikonli.javafx.FontIcon.lambda$new$2(FontIcon.java:76)\n    at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:360)\n    at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:80)\n    at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:106)\n    at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:113)\n    at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:147)\n    at javafx.css.StyleableObjectProperty.set(StyleableObjectProperty.java:82)\n    at org.kordamp.ikonli.javafx.FontIcon.setIconCode(FontIcon.java:231)\n    at org.kordamp.ikonli.javafx.FontIcon.&lt;init&gt;(FontIcon.java:97)\n    at manager.school_manager.EntryController.initialize(EntryController.java:115)\n    at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2573)\n    at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2466)\n    at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2435)\n    at manager.school_manager.Entry.start(Entry.java:56)\n    at com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:846)\n    at com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:455)\n    at com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:428)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:427)\n    at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\n    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\n    at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:174)\n    at java.base/java.lang.Thread.run(Thread.java:1589)\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/3tGzU.png\" rel=\"nofollow noreferrer\"><strong>error messages on running jar</strong></a> |\n<a href=\"https://i.stack.imgur.com/FHWIU.png\" rel=\"nofollow noreferrer\"><strong>Program without icons on running jar</strong></a> |\n<a href=\"https://i.stack.imgur.com/7G5AF.png\" rel=\"nofollow noreferrer\"><strong>Program showing icons when run in intellij</strong></a></p>\n<p><a href=\"https://i.stack.imgur.com/HT7v7.png\" rel=\"nofollow noreferrer\">module-info.java with all three co-dependencies</a></p>\n<h1><strong>Tried using the shadow jar plugin as stated in it's documentation</strong></h1>\n<p><a href=\"https://i.stack.imgur.com/TxAaq.png\" rel=\"nofollow noreferrer\"><strong>build.gradle file showing use of shadow jar plugin</strong></a></p>\n<p>Also opened the jar file with winrar and checked the Manifest/Manifest.MF/services and here is what I found:</p>\n<p><a href=\"https://i.stack.imgur.com/f2Wi9.png\" rel=\"nofollow noreferrer\">it shows two files related to ikonli. Am not quite versed to services in general so I can't tell if these would suffice.*** I would gladly accept any help that would help me resolve this problem***</a></p>\n"},{"tags":["java","java-11"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1691385968,"post_id":76848949,"comment_id":135479003,"body_markdown":"That first command looks odd -- on OS X `java` preserves the case of command line arguments when reporting errors.","body":"That first command looks odd -- on OS X <code>java</code> preserves the case of command line arguments when reporting errors."},{"owner":{"account_id":16025918,"reputation":4676,"user_id":11566161,"display_name":"Shri Hari L"},"score":0,"creation_date":1691385978,"post_id":76848949,"comment_id":135479004,"body_markdown":"You should give a Java / Class file along with the memory option.","body":"You should give a Java / Class file along with the memory option."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691388617,"post_id":76848949,"comment_id":135479288,"body_markdown":"@ShriHariL That&#39;s not the issue here.","body":"@ShriHariL That&#39;s not the issue here."},{"owner":{"account_id":28870801,"reputation":1,"user_id":22112397,"display_name":"SuJi Gyeon"},"score":0,"creation_date":1691388967,"post_id":76848949,"comment_id":135479325,"body_markdown":"After testing in many ways, the above error occurs when running in cmd or powershell. Strangely, however, there is no problem with git bash. Is there anything else that needs to be changed?","body":"After testing in many ways, the above error occurs when running in cmd or powershell. Strangely, however, there is no problem with git bash. Is there anything else that needs to be changed?"},{"owner":{"account_id":28870801,"reputation":1,"user_id":22112397,"display_name":"SuJi Gyeon"},"score":0,"creation_date":1691389276,"post_id":76848949,"comment_id":135479374,"body_markdown":"@tgdavies That was a question for me, too. I definitely put in -Xmx64m that starts with a capital letter, but it actually changed to a lowercase letter. -Dorg.gradle.appname=gradlew is also lowercase, not just -Xmx. Is there a case setting for cmd or powershell?","body":"@tgdavies That was a question for me, too. I definitely put in -Xmx64m that starts with a capital letter, but it actually changed to a lowercase letter. -Dorg.gradle.appname=gradlew is also lowercase, not just -Xmx. Is there a case setting for cmd or powershell?"},{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1691390569,"post_id":76848949,"comment_id":135479527,"body_markdown":"So it&#39;s your shell that&#39;s doing the conversion to lowercase?","body":"So it&#39;s your shell that&#39;s doing the conversion to lowercase?"},{"owner":{"account_id":28870801,"reputation":1,"user_id":22112397,"display_name":"SuJi Gyeon"},"score":0,"creation_date":1691391185,"post_id":76848949,"comment_id":135479600,"body_markdown":"@MauricePerry Yes. If I run java.exe of jdk-11 on my cmd or powershell, it will be lowercase. Running &#39;java.exe -Xmx64m&#39; in gitbash under the same conditions as cmd (go to bin folder with jdk11 Java) will work. And if you run &#39;java.exe -xmx64m&#39; under the same conditions on git bash, the error &#39;Uncognized option: -xmx64m&#39; attached above will be the same. So I think forced conversion from cmd or powershell to lowercase is causing problems.","body":"@MauricePerry Yes. If I run java.exe of jdk-11 on my cmd or powershell, it will be lowercase. Running &#39;java.exe -Xmx64m&#39; in gitbash under the same conditions as cmd (go to bin folder with jdk11 Java) will work. And if you run &#39;java.exe -xmx64m&#39; under the same conditions on git bash, the error &#39;Uncognized option: -xmx64m&#39; attached above will be the same. So I think forced conversion from cmd or powershell to lowercase is causing problems."}],"answers":[{"tags":[],"owner":{"account_id":28870801,"reputation":1,"user_id":22112397,"display_name":"SuJi Gyeon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691540488,"creation_date":1691540488,"answer_id":76863843,"question_id":76848949,"body_markdown":"I spend 3 weeks and find a ridiculous solution and leave my own answers.\r\n\r\nThis problem was caused by another program. At one point, I had a vaccine program that I didn&#39;t install, and it was included as a launch app. As soon as I turned on the computer, I ran the command in cmd, and I was able to see that it was working properly. So I decided that there was a conflict in the startup program, so I tested it one by one and found the problem.(In my case, it was a program called Trojancut.)\r\n\r\nIf you&#39;re having a similar problem with me, or if you&#39;re having problems with Java itself, disable all of the startup programs and test them as soon as you turn on your computer, like me.","title":"java 11 Unrecognized option: -xmx64m (Lowercase cmd and power shell options)","body":"<p>I spend 3 weeks and find a ridiculous solution and leave my own answers.</p>\n<p>This problem was caused by another program. At one point, I had a vaccine program that I didn't install, and it was included as a launch app. As soon as I turned on the computer, I ran the command in cmd, and I was able to see that it was working properly. So I decided that there was a conflict in the startup program, so I tested it one by one and found the problem.(In my case, it was a program called Trojancut.)</p>\n<p>If you're having a similar problem with me, or if you're having problems with Java itself, disable all of the startup programs and test them as soon as you turn on your computer, like me.</p>\n"}],"owner":{"account_id":28870801,"reputation":1,"user_id":22112397,"display_name":"SuJi Gyeon"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":149,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1691540488,"creation_date":1691385342,"question_id":76848949,"body_markdown":"I looked up a combination of search terms and found that for a few people, java&#39;s option was converted to lowercase, just like me, in cmd or powershell, and sometimes it didn&#39;t work. The link below is the same case as mine, but I don&#39;t work on the powershell, unlike this case. Is there any way to solve this?\r\n\r\nhttps://www.inflearn.com/questions/920520/%EC%9C%88%EB%8F%84%EC%9A%B0-%EC%82%AC%EC%9A%A9%EC%9E%90%EB%B6%84%EB%93%A4-cmd%EC%97%90%EC%84%9C-%ED%86%B0%EC%BA%A3-%EC%98%A4%EB%A5%98-%ED%98%B9%EC%9D%80-%EB%B9%8C%EB%93%9C-%EC%98%A4%EB%A5%98-%EB%82%A0%EB%95%8C\r\n\r\n\r\nI found out that there was a problem with java while using Android Studio.\r\n\r\nIf you go directly to the bin folder under jdk-11 in cmd and run java.exe to use jdk 11, the following message occurs. If you run the run button on the Android studio, Gradle will run normally, but it will not run on the terminal.\r\n\r\nAfter testing in many ways, the above error occurs when running in cmd or powershell. Strangely, however, there is no problem with git bash.\r\n\r\n```\r\nC:\\Program Files\\Java\\jdk-11\\bin&gt;java.exe -Xmx64m\r\nUnrecognized option: -xmx64m\r\nError: Could not create the Java Virtual Machine.\r\nError: A fatal exception has occurred. Program will exit.\r\n```\r\n```\r\njava version &quot;11.0.19&quot; 2023-04-18 LTS\r\nJava(TM) SE Runtime Environment 18.9 (build 11.0.19+9-LTS-224)\r\nJava HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.19+9-LTS-224, mixed mode)\r\n```\r\n\r\n[enter image description here](https://i.stack.imgur.com/hcThY.png)\r\n\r\n\r\nBut I ran it directly on cmd so I could see that for jdk17 in Android studio or for jdk 1.7 from a third party, the -Xmx64 option is fine.\r\n[enter image description here](https://i.stack.imgur.com/fW1n0.png)\r\n[enter image description here](https://i.stack.imgur.com/QlkBi.png)\r\n```\r\nopenjdk version &quot;17.0.6&quot; 2023-01-17\r\nOpenJDK Runtime Environment (build 17.0.6+0-b2043.56-10027231)\r\nOpenJDK 64-Bit Server VM (build 17.0.6+0-b2043.56-10027231, mixed mode)\r\n```\r\n```\r\njava version &quot;1.7.0_80&quot;\r\nJava(TM) SE Runtime Environment (build 1.7.0_80-b15)\r\nJava HotSpot(TM) Client VM (build 24.80-b11, mixed mode)\r\n```\r\n\r\nIs the -Xmx64m option not available on jdk 11 by any chance?\r\n\r\nI deleted all java and installed only 11.","title":"java 11 Unrecognized option: -xmx64m (Lowercase cmd and power shell options)","body":"<p>I looked up a combination of search terms and found that for a few people, java's option was converted to lowercase, just like me, in cmd or powershell, and sometimes it didn't work. The link below is the same case as mine, but I don't work on the powershell, unlike this case. Is there any way to solve this?</p>\n<p><a href=\"https://www.inflearn.com/questions/920520/%EC%9C%88%EB%8F%84%EC%9A%B0-%EC%82%AC%EC%9A%A9%EC%9E%90%EB%B6%84%EB%93%A4-cmd%EC%97%90%EC%84%9C-%ED%86%B0%EC%BA%A3-%EC%98%A4%EB%A5%98-%ED%98%B9%EC%9D%80-%EB%B9%8C%EB%93%9C-%EC%98%A4%EB%A5%98-%EB%82%A0%EB%95%8C\" rel=\"nofollow noreferrer\">https://www.inflearn.com/questions/920520/%EC%9C%88%EB%8F%84%EC%9A%B0-%EC%82%AC%EC%9A%A9%EC%9E%90%EB%B6%84%EB%93%A4-cmd%EC%97%90%EC%84%9C-%ED%86%B0%EC%BA%A3-%EC%98%A4%EB%A5%98-%ED%98%B9%EC%9D%80-%EB%B9%8C%EB%93%9C-%EC%98%A4%EB%A5%98-%EB%82%A0%EB%95%8C</a></p>\n<p>I found out that there was a problem with java while using Android Studio.</p>\n<p>If you go directly to the bin folder under jdk-11 in cmd and run java.exe to use jdk 11, the following message occurs. If you run the run button on the Android studio, Gradle will run normally, but it will not run on the terminal.</p>\n<p>After testing in many ways, the above error occurs when running in cmd or powershell. Strangely, however, there is no problem with git bash.</p>\n<pre><code>C:\\Program Files\\Java\\jdk-11\\bin&gt;java.exe -Xmx64m\nUnrecognized option: -xmx64m\nError: Could not create the Java Virtual Machine.\nError: A fatal exception has occurred. Program will exit.\n</code></pre>\n<pre><code>java version &quot;11.0.19&quot; 2023-04-18 LTS\nJava(TM) SE Runtime Environment 18.9 (build 11.0.19+9-LTS-224)\nJava HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.19+9-LTS-224, mixed mode)\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/hcThY.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>But I ran it directly on cmd so I could see that for jdk17 in Android studio or for jdk 1.7 from a third party, the -Xmx64 option is fine.\n<a href=\"https://i.stack.imgur.com/fW1n0.png\" rel=\"nofollow noreferrer\">enter image description here</a>\n<a href=\"https://i.stack.imgur.com/QlkBi.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<pre><code>openjdk version &quot;17.0.6&quot; 2023-01-17\nOpenJDK Runtime Environment (build 17.0.6+0-b2043.56-10027231)\nOpenJDK 64-Bit Server VM (build 17.0.6+0-b2043.56-10027231, mixed mode)\n</code></pre>\n<pre><code>java version &quot;1.7.0_80&quot;\nJava(TM) SE Runtime Environment (build 1.7.0_80-b15)\nJava HotSpot(TM) Client VM (build 24.80-b11, mixed mode)\n</code></pre>\n<p>Is the -Xmx64m option not available on jdk 11 by any chance?</p>\n<p>I deleted all java and installed only 11.</p>\n"},{"tags":["java","android","java-native-interface"],"comments":[{"owner":{"account_id":3935570,"reputation":1424,"user_id":3252091,"display_name":"Nicklas Jensen"},"score":0,"creation_date":1426292278,"post_id":29043872,"comment_id":46327734,"body_markdown":"Could you please provide an example of what kind of data structure you would like to return, that will make it easier to answer your question.","body":"Could you please provide an example of what kind of data structure you would like to return, that will make it easier to answer your question."},{"owner":{"account_id":5295543,"reputation":1976,"user_id":4226806,"accept_rate":35,"display_name":"rubmz"},"score":0,"creation_date":1426295158,"post_id":29043872,"comment_id":46328347,"body_markdown":"I would like to return 2 floats","body":"I would like to return 2 floats"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691539725,"post_id":29043872,"comment_id":135504598,"body_markdown":"So `return new float[]{float1, float2};`.","body":"So <code>return new float[]{float1, float2};</code>."}],"answers":[{"comments":[{"owner":{"account_id":3935570,"reputation":1424,"user_id":3252091,"display_name":"Nicklas Jensen"},"score":0,"creation_date":1426292315,"post_id":29043906,"comment_id":46327740,"body_markdown":"This has nothing to do with JNI, please provide an explanation as to how one could return the wrapper.","body":"This has nothing to do with JNI, please provide an explanation as to how one could return the wrapper."},{"owner":{"account_id":5295543,"reputation":1976,"user_id":4226806,"accept_rate":35,"display_name":"rubmz"},"score":0,"creation_date":1426295283,"post_id":29043906,"comment_id":46328373,"body_markdown":"Can you give a basic example? I would like to return 2 float variables from a function.. can this be done without array mangaling or class resolving via the env variable (too slow) ?","body":"Can you give a basic example? I would like to return 2 float variables from a function.. can this be done without array mangaling or class resolving via the env variable (too slow) ?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1691539625,"post_id":29043906,"comment_id":135504589,"body_markdown":"This is one of the techniques suggested in the answer the OP has accepted. Nothing wrong with this answer. @NicklasJensen","body":"This is one of the techniques suggested in the answer the OP has accepted. Nothing wrong with this answer. @NicklasJensen"}],"tags":[],"owner":{"account_id":5866004,"reputation":16374,"user_id":4619958,"accept_rate":83,"display_name":"ch271828n"},"comment_count":3,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1426292923,"creation_date":1426291615,"answer_id":29043906,"question_id":29043872,"body_markdown":"You can use a *wrapper*. Then return the wrapper. First create a class with some inner variables which are the multiple ones you want to return. Then use this class as the return type.","title":"android jni return multiple variables","body":"<p>You can use a <em>wrapper</em>. Then return the wrapper. First create a class with some inner variables which are the multiple ones you want to return. Then use this class as the return type.</p>\n"},{"comments":[{"owner":{"account_id":5295543,"reputation":1976,"user_id":4226806,"accept_rate":35,"display_name":"rubmz"},"score":0,"creation_date":1426295517,"post_id":29044319,"comment_id":46328412,"body_markdown":"Hey, with first method (callback) can I cache the callback pointer, let&#39;s say as a global jni variable, for further use (after leaving the function)?","body":"Hey, with first method (callback) can I cache the callback pointer, let&#39;s say as a global jni variable, for further use (after leaving the function)?"},{"owner":{"account_id":3935570,"reputation":1424,"user_id":3252091,"display_name":"Nicklas Jensen"},"score":1,"creation_date":1426296618,"post_id":29044319,"comment_id":46328608,"body_markdown":"I edited the answer to show a way to cache the callback class and method. The easiest way to cache the method is to use static methods, since you don&#39;t need a jobject for those.","body":"I edited the answer to show a way to cache the callback class and method. The easiest way to cache the method is to use static methods, since you don&#39;t need a jobject for those."},{"owner":{"account_id":5295543,"reputation":1976,"user_id":4226806,"accept_rate":35,"display_name":"rubmz"},"score":0,"creation_date":1426296733,"post_id":29044319,"comment_id":46328629,"body_markdown":"Great answer! I think this is probably the fastest method there is, isn&#39;t it?","body":"Great answer! I think this is probably the fastest method there is, isn&#39;t it?"},{"owner":{"account_id":3935570,"reputation":1424,"user_id":3252091,"display_name":"Nicklas Jensen"},"score":3,"creation_date":1426296964,"post_id":29044319,"comment_id":46328669,"body_markdown":"I believe so, you could however speed up the &quot;Return a Java Object&quot; method as well by caching the jclass and jmethodID reference. You could then use a constructor with parameters instead of Set&lt;NativeType&gt;Field, which would reduce the operation to two JNI calls.","body":"I believe so, you could however speed up the &quot;Return a Java Object&quot; method as well by caching the jclass and jmethodID reference. You could then use a constructor with parameters instead of Set&lt;NativeType&gt;Field, which would reduce the operation to two JNI calls."},{"owner":{"account_id":5295543,"reputation":1976,"user_id":4226806,"accept_rate":35,"display_name":"rubmz"},"score":0,"creation_date":1426313457,"post_id":29044319,"comment_id":46330984,"body_markdown":"Sounds intersting and useful! Thanks!","body":"Sounds intersting and useful! Thanks!"},{"owner":{"account_id":6316309,"reputation":2040,"user_id":4906130,"display_name":"Bhavnik"},"score":0,"creation_date":1680074665,"post_id":29044319,"comment_id":133833323,"body_markdown":"Callback approach helped me to get updated values in my kotlin android class from CPP JNI layer.","body":"Callback approach helped me to get updated values in my kotlin android class from CPP JNI layer."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691539696,"post_id":29044319,"comment_id":135504597,"body_markdown":"I&#39;ll give another one: supply one or more `java.util.function.Consumer`s as parameters, and call them with the desired values from the JNI. Saves you from having to gum up your JNI with your own classes.","body":"I&#39;ll give another one: supply one or more <code>java.util.function.Consumer</code>s as parameters, and call them with the desired values from the JNI. Saves you from having to gum up your JNI with your own classes."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691540139,"post_id":29044319,"comment_id":135504640,"body_markdown":"And another one: use arrays as in-out parameters.","body":"And another one: use arrays as in-out parameters."}],"tags":[],"owner":{"account_id":3935570,"reputation":1424,"user_id":3252091,"display_name":"Nicklas Jensen"},"comment_count":8,"down_vote_count":0,"up_vote_count":43,"is_accepted":true,"score":43,"last_activity_date":1466451684,"creation_date":1426295143,"answer_id":29044319,"question_id":29043872,"body_markdown":"I can come up with three different ways to do it.\r\n\r\n**Callback**\r\n\r\nCall a Java method from your JNI code that takes multiple parameters, set a variable somewhere in your Java code, that you can retrieve when returning from the method.\r\n\r\n    JNIEXPORT void JNICALL Java_my_package_name_JNIReturnExample_returnWithJavaCallback(JNIEnv *env, jobject javaThis, jfloat param1, jfloat param2)\r\n    {\r\n    \t// Get the class of the current calling object\r\n    \tjclass clazz = (*env)-&gt;GetObjectClass(env, javaThis);\r\n    \r\n    \t// Get the method id of the instance method: void javaCallback(float, float) in my.package.name.JNIReturnExample\r\n    \tjmethodID callback = (*env)-&gt;GetMethodID(env, clazz, &quot;javaCallback&quot;, &quot;(FF)V&quot;);\r\n    \r\n    \t// Calls my.package.name.JNIReturnExample#javaCallback(float, float);\r\n    \t(*env)-&gt;CallVoidMethod(env, javaThis, callback, param1, param2);\r\n    }\r\n\r\n----------\r\n\r\n**Return a new Java object**\r\n\r\nInstantiate a Java Object (my.package.name.JNIReturnExample) in JNI, and return it to Java.\r\n\r\n    JNIEXPORT jobject JNICALL Java_my_package_name_JNIReturnExample_returnObjectValue(JNIEnv *env, jobject javaThis, jfloat param1, jfloat param2)\r\n    {\r\n    \t// Get the class we wish to return an instance of\r\n    \tjclass clazz = (*env)-&gt;FindClass(env, &quot;my/package/name/JNIReturnObject&quot;);\r\n    \r\n    \t// Get the method id of an empty constructor in clazz\r\n    \tjmethodID constructor = (*env)-&gt;GetMethodID(env, clazz, &quot;&lt;init&gt;&quot;, &quot;()V&quot;);\r\n    \r\n    \t// Create an instance of clazz\r\n    \tjobject obj = (*env)-&gt;NewObject(env, clazz, constructor);\r\n    \r\n    \t// Get Field references\r\n    \tjfieldID param1Field = (*env)-&gt;GetFieldID(env, clazz, &quot;param1&quot;, &quot;F&quot;);\r\n    \tjfieldID param2Field = (*env)-&gt;GetFieldID(env, clazz, &quot;param2&quot;, &quot;F&quot;);\r\n    \r\n    \t// Set fields for object\r\n    \t(*env)-&gt;SetFloatField(env, obj, param1Field, param1);\r\n    \t(*env)-&gt;SetFloatField(env, obj, param2Field, param2);\r\n    \r\n    \t// return object\r\n    \treturn obj;\r\n    }\r\n\r\n----------\r\n\r\n**Pass a Java object as a parameter, and set its fields**\r\n\r\nCreate a new instance of a Java Object in your Java code, and pass that object as a parameter to your JNI function.\r\n\r\n    JNIEXPORT void JNICALL Java_my_package_name_JNIReturnExample_setObjectFields(JNIEnv *env, jobject javaThis, jobject obj, jfloat param1, jfloat param2)\r\n    {\r\n    \t// Get the class of the input object\r\n    \tjclass clazz = (*env)-&gt;GetObjectClass(env, obj);\r\n    \r\n    \t// Get Field references\r\n    \tjfieldID param1Field = (*env)-&gt;GetFieldID(env, clazz, &quot;param1&quot;, &quot;F&quot;);\r\n    \tjfieldID param2Field = (*env)-&gt;GetFieldID(env, clazz, &quot;param2&quot;, &quot;F&quot;);\r\n    \r\n    \t// Set fields for object\r\n    \t(*env)-&gt;SetFloatField(env, obj, param1Field, param1);\r\n    \t(*env)-&gt;SetFloatField(env, obj, param2Field, param2);\r\n    }\r\n\r\n----------\r\n\r\nPlease note that whichever method you decide to use, you should cache the various JNI types `jclass, jmethodID, jfieldID`, because JNI lookup operations are slow, and only really need to be performed once.\r\n\r\n----------\r\n**Caching**\r\n\r\nTo cache the JNI references in the Callback method, and call them using the method:\r\n\r\n    static jclass myCallbackClass;\r\n    static jmethodID myCallbackMethod;\r\n    \r\n    /**\r\n     * Call this method in JNI_OnLoad\r\n     */ \r\n    void CacheCallback()\r\n    {\r\n    \t// Get a reference to the Callback class\r\n    \tjclass clazz = (*env)-&gt;FindClass(env, &quot;my/package/name/JNIReturnExample&quot;);\r\n    \r\n    \t// Store a global reference, since the local one will be freed when returning from the function.\r\n    \tmyCallbackClass = (*env)-&gt;NewGlobalRef(env, clazz);\r\n    \r\n    \t// Get a reference to the static callback method\r\n    \tjmethodID callback = (*env)-&gt;GetStaticMethodID(env, myCallbackClass, &quot;jniCallback&quot;, &quot;(II)V&quot;);\r\n    \r\n    \t// jmethodID doesn&#39;t need a NewGlobalRef call\r\n    \tmyCallbackMethod = callback;\r\n    }\r\n    \r\n    /**\r\n     * Call this method in JNI_OnUnload\r\n     */\r\n    void ReleaseCallback()\r\n    {\r\n    \t(*env)-&gt;DeleteGlobalRef(env, myCallbackClass);\r\n        myCallbackClass = NULL;\r\n\r\n        // jmethodIDs are safe to keep without an explicit global reference, for this reason, we don&#39;t need to delete the reference either.\r\n        myCallbackMethod = NULL;\r\n    }","title":"android jni return multiple variables","body":"<p>I can come up with three different ways to do it.</p>\n\n<p><strong>Callback</strong></p>\n\n<p>Call a Java method from your JNI code that takes multiple parameters, set a variable somewhere in your Java code, that you can retrieve when returning from the method.</p>\n\n<pre><code>JNIEXPORT void JNICALL Java_my_package_name_JNIReturnExample_returnWithJavaCallback(JNIEnv *env, jobject javaThis, jfloat param1, jfloat param2)\n{\n    // Get the class of the current calling object\n    jclass clazz = (*env)-&gt;GetObjectClass(env, javaThis);\n\n    // Get the method id of the instance method: void javaCallback(float, float) in my.package.name.JNIReturnExample\n    jmethodID callback = (*env)-&gt;GetMethodID(env, clazz, \"javaCallback\", \"(FF)V\");\n\n    // Calls my.package.name.JNIReturnExample#javaCallback(float, float);\n    (*env)-&gt;CallVoidMethod(env, javaThis, callback, param1, param2);\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Return a new Java object</strong></p>\n\n<p>Instantiate a Java Object (my.package.name.JNIReturnExample) in JNI, and return it to Java.</p>\n\n<pre><code>JNIEXPORT jobject JNICALL Java_my_package_name_JNIReturnExample_returnObjectValue(JNIEnv *env, jobject javaThis, jfloat param1, jfloat param2)\n{\n    // Get the class we wish to return an instance of\n    jclass clazz = (*env)-&gt;FindClass(env, \"my/package/name/JNIReturnObject\");\n\n    // Get the method id of an empty constructor in clazz\n    jmethodID constructor = (*env)-&gt;GetMethodID(env, clazz, \"&lt;init&gt;\", \"()V\");\n\n    // Create an instance of clazz\n    jobject obj = (*env)-&gt;NewObject(env, clazz, constructor);\n\n    // Get Field references\n    jfieldID param1Field = (*env)-&gt;GetFieldID(env, clazz, \"param1\", \"F\");\n    jfieldID param2Field = (*env)-&gt;GetFieldID(env, clazz, \"param2\", \"F\");\n\n    // Set fields for object\n    (*env)-&gt;SetFloatField(env, obj, param1Field, param1);\n    (*env)-&gt;SetFloatField(env, obj, param2Field, param2);\n\n    // return object\n    return obj;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Pass a Java object as a parameter, and set its fields</strong></p>\n\n<p>Create a new instance of a Java Object in your Java code, and pass that object as a parameter to your JNI function.</p>\n\n<pre><code>JNIEXPORT void JNICALL Java_my_package_name_JNIReturnExample_setObjectFields(JNIEnv *env, jobject javaThis, jobject obj, jfloat param1, jfloat param2)\n{\n    // Get the class of the input object\n    jclass clazz = (*env)-&gt;GetObjectClass(env, obj);\n\n    // Get Field references\n    jfieldID param1Field = (*env)-&gt;GetFieldID(env, clazz, \"param1\", \"F\");\n    jfieldID param2Field = (*env)-&gt;GetFieldID(env, clazz, \"param2\", \"F\");\n\n    // Set fields for object\n    (*env)-&gt;SetFloatField(env, obj, param1Field, param1);\n    (*env)-&gt;SetFloatField(env, obj, param2Field, param2);\n}\n</code></pre>\n\n<hr>\n\n<p>Please note that whichever method you decide to use, you should cache the various JNI types <code>jclass, jmethodID, jfieldID</code>, because JNI lookup operations are slow, and only really need to be performed once.</p>\n\n<hr>\n\n<p><strong>Caching</strong></p>\n\n<p>To cache the JNI references in the Callback method, and call them using the method:</p>\n\n<pre><code>static jclass myCallbackClass;\nstatic jmethodID myCallbackMethod;\n\n/**\n * Call this method in JNI_OnLoad\n */ \nvoid CacheCallback()\n{\n    // Get a reference to the Callback class\n    jclass clazz = (*env)-&gt;FindClass(env, \"my/package/name/JNIReturnExample\");\n\n    // Store a global reference, since the local one will be freed when returning from the function.\n    myCallbackClass = (*env)-&gt;NewGlobalRef(env, clazz);\n\n    // Get a reference to the static callback method\n    jmethodID callback = (*env)-&gt;GetStaticMethodID(env, myCallbackClass, \"jniCallback\", \"(II)V\");\n\n    // jmethodID doesn't need a NewGlobalRef call\n    myCallbackMethod = callback;\n}\n\n/**\n * Call this method in JNI_OnUnload\n */\nvoid ReleaseCallback()\n{\n    (*env)-&gt;DeleteGlobalRef(env, myCallbackClass);\n    myCallbackClass = NULL;\n\n    // jmethodIDs are safe to keep without an explicit global reference, for this reason, we don't need to delete the reference either.\n    myCallbackMethod = NULL;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2097966,"reputation":414,"user_id":1866326,"display_name":"Alex"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1522368385,"creation_date":1522368385,"answer_id":49566764,"question_id":29043872,"body_markdown":"There is one more way - jobjectArray\r\n\r\nPersonally, I needed to return to Java a pair of string and int.\r\n\r\nString can easily be put into such array using env-&gt;NewStringUTF method\r\nbut for int a wrapper must be constructed.\r\n\r\nnative part:\r\n\r\n    extern &quot;C&quot;\r\n    JNIEXPORT jobjectArray JNICALL\r\n    Java_com_example_myapp_CallingClass_writeCfgFile(\r\n        JNIEnv *env,\r\n        jobject obj,\r\n        jobjectArray stringArray,\r\n        jstring filepath){\r\n    ...     \r\n        std::pair&lt;int,string&gt; ret = generate_config(filePath, reqMsgTypes);\r\n\r\n        jobjectArray retobjarr = (jobjectArray)env-&gt;NewObjectArray(2, env-&gt;FindClass(&quot;java/lang/Object&quot;), NULL);\r\n        env-&gt;SetObjectArrayElement(retobjarr, 0, NewInteger(env, ret.first));\r\n        env-&gt;SetObjectArrayElement(retobjarr, 1, env-&gt;NewStringUTF(ret.second.c_str()));\r\n\r\n        return retobjarr;\r\n    }\r\n\r\n    jobject NewInteger(JNIEnv* env, int value){\r\n        jclass integerClass = env-&gt;FindClass(&quot;java/lang/Integer&quot;);\r\n        jmethodID integerConstructor = env-&gt;GetMethodID(integerClass, &quot;&lt;init&gt;&quot;, &quot;(I)V&quot;);\r\n        return env-&gt;NewObject(integerClass, integerConstructor, static_cast&lt;jint&gt;(value));\r\n    }\r\n\r\nand on Java side:\r\n\r\n    Object[] resp = writeCfgFile( msgTypes,  filePath&quot;);\r\n\tInteger i = (Integer)resp[0];\r\n\tString str = (String)resp[1];","title":"android jni return multiple variables","body":"<p>There is one more way - jobjectArray</p>\n\n<p>Personally, I needed to return to Java a pair of string and int.</p>\n\n<p>String can easily be put into such array using env->NewStringUTF method\nbut for int a wrapper must be constructed.</p>\n\n<p>native part:</p>\n\n<pre><code>extern \"C\"\nJNIEXPORT jobjectArray JNICALL\nJava_com_example_myapp_CallingClass_writeCfgFile(\n    JNIEnv *env,\n    jobject obj,\n    jobjectArray stringArray,\n    jstring filepath){\n...     \n    std::pair&lt;int,string&gt; ret = generate_config(filePath, reqMsgTypes);\n\n    jobjectArray retobjarr = (jobjectArray)env-&gt;NewObjectArray(2, env-&gt;FindClass(\"java/lang/Object\"), NULL);\n    env-&gt;SetObjectArrayElement(retobjarr, 0, NewInteger(env, ret.first));\n    env-&gt;SetObjectArrayElement(retobjarr, 1, env-&gt;NewStringUTF(ret.second.c_str()));\n\n    return retobjarr;\n}\n\njobject NewInteger(JNIEnv* env, int value){\n    jclass integerClass = env-&gt;FindClass(\"java/lang/Integer\");\n    jmethodID integerConstructor = env-&gt;GetMethodID(integerClass, \"&lt;init&gt;\", \"(I)V\");\n    return env-&gt;NewObject(integerClass, integerConstructor, static_cast&lt;jint&gt;(value));\n}\n</code></pre>\n\n<p>and on Java side:</p>\n\n<pre><code>Object[] resp = writeCfgFile( msgTypes,  filePath\");\nInteger i = (Integer)resp[0];\nString str = (String)resp[1];\n</code></pre>\n"}],"owner":{"account_id":5295543,"reputation":1976,"user_id":4226806,"accept_rate":35,"display_name":"rubmz"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12338,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":29044319,"answer_count":3,"score":13,"last_activity_date":1691539555,"creation_date":1426291342,"question_id":29043872,"body_markdown":"How to return multiple variables from a `jni` function, avoiding the overhead of an array mangling?","title":"android jni return multiple variables","body":"<p>How to return multiple variables from a <code>jni</code> function, avoiding the overhead of an array mangling?</p>\n"},{"tags":["java","javafx","tableview"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":2,"creation_date":1691533910,"post_id":76863532,"comment_id":135504069,"body_markdown":"See also [_Why should I avoid using PropertyValueFactory in JavaFX?_](https://stackoverflow.com/q/72437983/230513), as well as my [encounter](https://stackoverflow.com/q/68969222/230513).","body":"See also <a href=\"https://stackoverflow.com/q/72437983/230513\"><i>Why should I avoid using PropertyValueFactory in JavaFX?</i></a>, as well as my <a href=\"https://stackoverflow.com/q/68969222/230513\">encounter</a>."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1691592618,"post_id":76863532,"comment_id":135512996,"body_markdown":"Your solution is essentially what Joshua Bloch recommends in *Effective Java* in (referring to the second edition) Items 24 (&quot;Eliminate Unchecked Warnings&quot;) and 25 (&quot;Prefer Lists to Arrays&quot;).","body":"Your solution is essentially what Joshua Bloch recommends in <i>Effective Java</i> in (referring to the second edition) Items 24 (&quot;Eliminate Unchecked Warnings&quot;) and 25 (&quot;Prefer Lists to Arrays&quot;)."}],"answers":[{"tags":[],"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1691538866,"creation_date":1691535255,"answer_id":76863620,"question_id":76863532,"body_markdown":"#### Using alternate API without varargs\r\n\r\nOne way to handle the unchecked generics warnings (which won&#39;t work in all cases) is to rewrite your code to use a different API which is less susceptible to such issues. \r\n\r\nFor example, instead of calling `setAll`, you can call `clear` on the list and then call the `add` method individually for each item. The varargs typed `setAll` is mostly a convenience method for doing this.  \r\n\r\nThere is a slight difference in meaning between the two options. Because the list is observable, changes are fired after each atomic operation. `setAll` makes all of the changes for the call atomic, resulting in fewer changes fired, but I don&#39;t think that will be an issue in this case. \r\n\r\nIt is more wordy to call add for each column individually if you have many columns, but will avoid any potential for type errors and warnings. (I&#39;m not advocating that approach, just letting you know the possibility). \r\n\r\nYou can replace the call:\r\n\r\n    tableViewPersons.getColumns().setAll(firstNameCol, lastNameCol);  // &lt;---- Warning: Unchecked generics array creation for varargs parameter.\r\n\r\nWith alternate API calls which do not use a varargs parameter:\r\n\r\n    tableViewPersons.getColumns().clear();\r\n    tableViewPersons.getColumns().add(firstNameCol);\r\n    tableViewPersons.getColumns().add(lastNameCol);\r\n\r\n#### Your solution is OK (and also uses alternate API without varargs)\r\n\r\nYour solution to this issue where you create a List of a given type up front and provide that to the TableView is really the same approach as described in the above section, you are using a different API instead of the varargs API.  \r\n\r\n&gt;     List &lt; TableColumn &lt; Person, ? &gt; &gt; columns = List.of ( firstNameCol , lastNameCol );  // &lt;--- Adding this line to make explicit the parameterized type of `TableColumn` to resolve the &quot;Unchecked generics&quot; warning.\r\n&gt;     tableViewPersons.getColumns ( ).setAll ( columns );\r\n\r\n`ObservableList` has overloaded `setAll` methods:\r\n\r\n * [`boolean setAll​(E... elements)`][1]\t\r\n    &gt; Clears the ObservableList and adds all the elements passed as var-args.\r\n * [`boolean setAll​(Collection&lt;? extends E&gt; col)`][2]\t\r\n    &gt;Clears the ObservableList and adds all elements from the collection.\r\n\r\nYou are replacing the varargs API call with the single argument variant.  It is a perfectly valid solution.  It won&#39;t work in the general case with different APIs that don&#39;t provide an overloaded interface like this, but it will work in this instance.\r\n\r\nIn your case, where all columns are mapping `String` properties, I would not use the wildcard type `?`, instead I would use:\r\n\r\n    List &lt; TableColumn &lt; Person, String &gt; &gt; columns = List.of ( firstNameCol , lastNameCol );\r\n\r\nand only use the wild card type if each column mapped to a different type.\r\n\r\n#### Using `SafeVarargs`\r\n\r\nAnother way to handle this is to create a helper method, annotated [`SafeVarargs`][3] to assert you are using the variable arguments safely.\r\n\r\n    //...\r\n    addColumns(tableViewPersons, firstNameCol, lastNameCol);\r\n    //...\r\n\r\n    @SafeVarargs\r\n    private static void addColumns(\r\n        TableView&lt;Person&gt; tableViewPersons, \r\n        TableColumn&lt;Person, String&gt;... columns) \r\n    {\r\n        tableViewPersons.getColumns().setAll(columns);\r\n    }\r\n    \r\n#### Unsolicited opinion on suppressing warnings\r\n\r\nI know you don&#39;t want to suppress the warnings as mentioned in the question (which is why I have provided other options).  But I think, in this case, suppression is OK.\r\n\r\nMy opinion is that the unchecked stuff is just an annoyance in many cases. Generics were added to Java in what I think even the designers would say was a compromise design, because the language was not built for generics originally.  The stuff that shows up around some of the unchecked generics warnings in cases like this is a part of the compromise design.\r\n\r\nHaving the main type on the TableView definition, backing list, etc, is good (and important). But when you start having to do stuff like use wildcard types or method level type specifiers when using classes and methods that are already typed, or trying to hunt around to remove a warning on a method usage that you already *know* is safe, it becomes more distracting than beneficial. In such cases, I advise [suppressing the warnings][4] on a selective basis.\r\n\r\nPotentially you can use your IDE to assist in suppressing unnecessary warnings, for example [suppressing in Idea][5]. Before doing so, check that it isn&#39;t really a significant potential for error, but if it is not (like a lot of the unchecked generics warnings IMO), then I think it is OK to suppress them.\r\n\r\nFor example to suppress the warning in the Idea IDE for a specific line, the following comment can be used (this is what I usually do):\r\n\r\n    //noinspection unchecked\r\n    tableViewPersons.getColumns().setAll(firstNameCol, lastNameCol);\r\n\r\nUnfortunately, in a general case Java only allows suppressing the warnings on a class, field or method level.\r\n\r\nSo a portable way to do this at the method level is using the [`SupressWarnings`][6] annotation where limited, relevant code is placed in a small method:\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    private TableView&lt;Person&gt; createPersonTableView(ObservableList&lt;Person&gt; people) {\r\n        TableView&lt;Person&gt; tableViewPersons = new TableView&lt;&gt;(people);\r\n\r\n        TableColumn&lt;Person, String&gt; firstNameCol = new TableColumn&lt;&gt;(&quot;First Name&quot;);\r\n        firstNameCol.setCellValueFactory(data -&gt; data.getValue().firstNameProperty());\r\n\r\n        TableColumn&lt;Person, String&gt; lastNameCol = new TableColumn&lt;&gt;(&quot;Last Name&quot;);\r\n        firstNameCol.setCellValueFactory(data -&gt; data.getValue().lastNameProperty());\r\n        \r\n        tableViewPersons.getColumns().setAll(firstNameCol, lastNameCol);\r\n        \r\n        return tableViewPersons;\r\n    }\r\n\r\n#### Using lambda&#39;s instead of PropertyValueFactory\r\n\r\nIncidentally, but not related to the generics issue, the example snippet above also illustrates the &quot;correct&quot; use of lambdas to set the cell value factories rather than relying on `PropertyValueFactory`, as discussed in:\r\n\r\n * https://stackoverflow.com/q/72437983/230513\r\n\r\nIn my opinion, using lambdas instead of `PropertyValueFactory` is more important than the issues around suppression of the varargs type checks on the TableView method calls, because it is far easier to create runtime errors when using a `PropertyValueFactory` and more difficult to debug them if they do arise.\r\n\r\n\r\n  [1]: https://openjfx.io/javadoc/17/javafx.base/javafx/collections/ObservableList.html#setAll(E...)\r\n  [2]: https://openjfx.io/javadoc/17/javafx.base/javafx/collections/ObservableList.html#setAll(java.util.Collection)\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/SafeVarargs.html\r\n  [4]: https://stackoverflow.com/questions/1129795/what-is-suppresswarnings-unchecked-in-java\r\n  [5]: https://www.jetbrains.com/help/idea/disabling-and-enabling-inspections.html#suppress-inspections\r\n  [6]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/SuppressWarnings.html","title":"How to resolve &quot;Unchecked generics&quot; warning when setting columns on a TableView in JavaFX","body":"<h4>Using alternate API without varargs</h4>\n<p>One way to handle the unchecked generics warnings (which won't work in all cases) is to rewrite your code to use a different API which is less susceptible to such issues.</p>\n<p>For example, instead of calling <code>setAll</code>, you can call <code>clear</code> on the list and then call the <code>add</code> method individually for each item. The varargs typed <code>setAll</code> is mostly a convenience method for doing this.</p>\n<p>There is a slight difference in meaning between the two options. Because the list is observable, changes are fired after each atomic operation. <code>setAll</code> makes all of the changes for the call atomic, resulting in fewer changes fired, but I don't think that will be an issue in this case.</p>\n<p>It is more wordy to call add for each column individually if you have many columns, but will avoid any potential for type errors and warnings. (I'm not advocating that approach, just letting you know the possibility).</p>\n<p>You can replace the call:</p>\n<pre><code>tableViewPersons.getColumns().setAll(firstNameCol, lastNameCol);  // &lt;---- Warning: Unchecked generics array creation for varargs parameter.\n</code></pre>\n<p>With alternate API calls which do not use a varargs parameter:</p>\n<pre><code>tableViewPersons.getColumns().clear();\ntableViewPersons.getColumns().add(firstNameCol);\ntableViewPersons.getColumns().add(lastNameCol);\n</code></pre>\n<h4>Your solution is OK (and also uses alternate API without varargs)</h4>\n<p>Your solution to this issue where you create a List of a given type up front and provide that to the TableView is really the same approach as described in the above section, you are using a different API instead of the varargs API.</p>\n<blockquote>\n<pre><code>List &lt; TableColumn &lt; Person, ? &gt; &gt; columns = List.of ( firstNameCol , lastNameCol );  // &lt;--- Adding this line to make explicit the parameterized type of `TableColumn` to resolve the &quot;Unchecked generics&quot; warning.\ntableViewPersons.getColumns ( ).setAll ( columns );\n</code></pre>\n</blockquote>\n<p><code>ObservableList</code> has overloaded <code>setAll</code> methods:</p>\n<ul>\n<li><a href=\"https://openjfx.io/javadoc/17/javafx.base/javafx/collections/ObservableList.html#setAll(E...)\" rel=\"nofollow noreferrer\"><code>boolean setAll​(E... elements)</code></a>\n<blockquote>\n<p>Clears the ObservableList and adds all the elements passed as var-args.</p>\n</blockquote>\n</li>\n<li><a href=\"https://openjfx.io/javadoc/17/javafx.base/javafx/collections/ObservableList.html#setAll(java.util.Collection)\" rel=\"nofollow noreferrer\"><code>boolean setAll​(Collection&lt;? extends E&gt; col)</code></a>\n<blockquote>\n<p>Clears the ObservableList and adds all elements from the collection.</p>\n</blockquote>\n</li>\n</ul>\n<p>You are replacing the varargs API call with the single argument variant.  It is a perfectly valid solution.  It won't work in the general case with different APIs that don't provide an overloaded interface like this, but it will work in this instance.</p>\n<p>In your case, where all columns are mapping <code>String</code> properties, I would not use the wildcard type <code>?</code>, instead I would use:</p>\n<pre><code>List &lt; TableColumn &lt; Person, String &gt; &gt; columns = List.of ( firstNameCol , lastNameCol );\n</code></pre>\n<p>and only use the wild card type if each column mapped to a different type.</p>\n<h4>Using <code>SafeVarargs</code></h4>\n<p>Another way to handle this is to create a helper method, annotated <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/SafeVarargs.html\" rel=\"nofollow noreferrer\"><code>SafeVarargs</code></a> to assert you are using the variable arguments safely.</p>\n<pre><code>//...\naddColumns(tableViewPersons, firstNameCol, lastNameCol);\n//...\n\n@SafeVarargs\nprivate static void addColumns(\n    TableView&lt;Person&gt; tableViewPersons, \n    TableColumn&lt;Person, String&gt;... columns) \n{\n    tableViewPersons.getColumns().setAll(columns);\n}\n</code></pre>\n<h4>Unsolicited opinion on suppressing warnings</h4>\n<p>I know you don't want to suppress the warnings as mentioned in the question (which is why I have provided other options).  But I think, in this case, suppression is OK.</p>\n<p>My opinion is that the unchecked stuff is just an annoyance in many cases. Generics were added to Java in what I think even the designers would say was a compromise design, because the language was not built for generics originally.  The stuff that shows up around some of the unchecked generics warnings in cases like this is a part of the compromise design.</p>\n<p>Having the main type on the TableView definition, backing list, etc, is good (and important). But when you start having to do stuff like use wildcard types or method level type specifiers when using classes and methods that are already typed, or trying to hunt around to remove a warning on a method usage that you already <em>know</em> is safe, it becomes more distracting than beneficial. In such cases, I advise <a href=\"https://stackoverflow.com/questions/1129795/what-is-suppresswarnings-unchecked-in-java\">suppressing the warnings</a> on a selective basis.</p>\n<p>Potentially you can use your IDE to assist in suppressing unnecessary warnings, for example <a href=\"https://www.jetbrains.com/help/idea/disabling-and-enabling-inspections.html#suppress-inspections\" rel=\"nofollow noreferrer\">suppressing in Idea</a>. Before doing so, check that it isn't really a significant potential for error, but if it is not (like a lot of the unchecked generics warnings IMO), then I think it is OK to suppress them.</p>\n<p>For example to suppress the warning in the Idea IDE for a specific line, the following comment can be used (this is what I usually do):</p>\n<pre><code>//noinspection unchecked\ntableViewPersons.getColumns().setAll(firstNameCol, lastNameCol);\n</code></pre>\n<p>Unfortunately, in a general case Java only allows suppressing the warnings on a class, field or method level.</p>\n<p>So a portable way to do this at the method level is using the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/SuppressWarnings.html\" rel=\"nofollow noreferrer\"><code>SupressWarnings</code></a> annotation where limited, relevant code is placed in a small method:</p>\n<pre><code>@SuppressWarnings(&quot;unchecked&quot;)\nprivate TableView&lt;Person&gt; createPersonTableView(ObservableList&lt;Person&gt; people) {\n    TableView&lt;Person&gt; tableViewPersons = new TableView&lt;&gt;(people);\n\n    TableColumn&lt;Person, String&gt; firstNameCol = new TableColumn&lt;&gt;(&quot;First Name&quot;);\n    firstNameCol.setCellValueFactory(data -&gt; data.getValue().firstNameProperty());\n\n    TableColumn&lt;Person, String&gt; lastNameCol = new TableColumn&lt;&gt;(&quot;Last Name&quot;);\n    firstNameCol.setCellValueFactory(data -&gt; data.getValue().lastNameProperty());\n    \n    tableViewPersons.getColumns().setAll(firstNameCol, lastNameCol);\n    \n    return tableViewPersons;\n}\n</code></pre>\n<h4>Using lambda's instead of PropertyValueFactory</h4>\n<p>Incidentally, but not related to the generics issue, the example snippet above also illustrates the &quot;correct&quot; use of lambdas to set the cell value factories rather than relying on <code>PropertyValueFactory</code>, as discussed in:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/q/72437983/230513\">Why should I avoid using PropertyValueFactory in JavaFX?</a></li>\n</ul>\n<p>In my opinion, using lambdas instead of <code>PropertyValueFactory</code> is more important than the issues around suppression of the varargs type checks on the TableView method calls, because it is far easier to create runtime errors when using a <code>PropertyValueFactory</code> and more difficult to debug them if they do arise.</p>\n"}],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":76863620,"answer_count":1,"score":4,"last_activity_date":1691538866,"creation_date":1691533560,"question_id":76863532,"body_markdown":"I encountered a compiler warning in this common situation of adding columns to a table view control in a [JavaFX][1] app.\r\n\r\nTo demonstrate, here is my modified version of the code example seen in the Javadoc for the JavaFX/[OpenJFX][2] class [`TableView`][3]. Note the [`getColumns`][4] line.\r\n\r\n```java\r\npublic class HelloApplication extends Application\r\n{\r\n    @Override\r\n    public void start ( Stage stage )\r\n    {\r\n        TableView &lt; Person &gt; tableViewPersons = new TableView &lt;&gt; ( );\r\n        ObservableList &lt; Person &gt; persons = FXCollections.observableArrayList ( this.fetchPersons ( ) );\r\n        tableViewPersons.setItems ( persons );\r\n\r\n        TableColumn &lt; Person, String &gt; firstNameCol = new TableColumn &lt;&gt; ( &quot;First Name&quot; );\r\n        firstNameCol.setCellValueFactory ( new PropertyValueFactory &lt;&gt; ( persons.get ( 0 ).firstNameProperty ( ).getName ( ) ) );\r\n\r\n        TableColumn &lt; Person, String &gt; lastNameCol = new TableColumn &lt;&gt; ( &quot;Last Name&quot; );\r\n        lastNameCol.setCellValueFactory ( new PropertyValueFactory &lt;&gt; ( persons.get ( 0 ).lastNameProperty ( ).getName ( ) ) );\r\n\r\n        tableViewPersons.getColumns ( ).setAll ( firstNameCol , lastNameCol );  // &lt;---- Warning: Unchecked generics array creation for varargs parameter.\r\n\r\n        Scene scene = new Scene ( tableViewPersons , 320 , 240 );\r\n        stage.setTitle ( &quot;JavaFX Example&quot; );\r\n        stage.setScene ( scene );\r\n        stage.show ( );\r\n    }\r\n…\r\n```\r\n\r\nThe line:\r\n\r\n    tableViewPersons.getColumns ( ).setAll ( firstNameCol , lastNameCol );\r\n\r\n… generates a warning for:\r\n\r\n&gt; Warning: Unchecked generics array creation for varargs parameter\r\n\r\nI understand from [this Answer][5] on [*Java unchecked: unchecked generic array creation for varargs parameter*](https://stackoverflow.com/q/21132692/642706), and from [this post][6], that the issue involves ambiguity about the type of the arguments being passed. \r\n\r\nIf my goal is to resolve this compiler warning, then one solution is to make explicit the parameterized type of the collection of `TableColumn` objects be passed to `ObservableList#setAll`. So we can explicitly declare a `List` of the `TableColumn` objects.\r\n\r\n```java\r\n        List &lt; TableColumn &lt; Person, ? &gt; &gt; columns = List.of ( firstNameCol , lastNameCol );  // &lt;--- Adding this line to make explicit the parameterized type of `TableColumn` to resolve the &quot;Unchecked generics&quot; warning.\r\n        tableViewPersons.getColumns ( ).setAll ( columns );\r\n```\r\n\r\nSee that new code in the full context:\r\n\r\n```java\r\npublic class HelloApplication extends Application\r\n{\r\n    @Override\r\n    public void start ( Stage stage )\r\n    {\r\n        TableView &lt; Person &gt; tableViewPersons = new TableView &lt;&gt; ( );\r\n        ObservableList &lt; Person &gt; persons = FXCollections.observableArrayList ( this.fetchPersons ( ) );\r\n        tableViewPersons.setItems ( persons );\r\n\r\n        TableColumn &lt; Person, String &gt; firstNameCol = new TableColumn &lt;&gt; ( &quot;First Name&quot; );\r\n        firstNameCol.setCellValueFactory ( new PropertyValueFactory &lt;&gt; ( persons.get ( 0 ).firstNameProperty ( ).getName ( ) ) );\r\n\r\n        TableColumn &lt; Person, String &gt; lastNameCol = new TableColumn &lt;&gt; ( &quot;Last Name&quot; );\r\n        lastNameCol.setCellValueFactory ( new PropertyValueFactory &lt;&gt; ( persons.get ( 0 ).lastNameProperty ( ).getName ( ) ) );\r\n\r\n        List &lt; TableColumn &lt; Person, ? &gt; &gt; columns = List.of ( firstNameCol , lastNameCol );  // &lt;--- Adding this line to make explicit the parameterized type of `TableColumn` to resolve the &quot;Unchecked generics&quot; warning.\r\n        tableViewPersons.getColumns ( ).setAll ( columns );\r\n\r\n        Scene scene = new Scene ( tableViewPersons , 320 , 240 );\r\n        stage.setTitle ( &quot;JavaFX Example&quot; );\r\n        stage.setScene ( scene );\r\n        stage.show ( );\r\n    }\r\n…\r\n```\r\n\r\nMy question:\r\n\r\n - Is this a valid, complete solution to resolving the the &quot;Unchecked generics&quot; warning?\r\n - Is there any other simpler way to resolve the &quot;Unchecked generics&quot; warning? (I would rather not suppress the warning.)\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/JavaFX\r\n  [2]: https://openjfx.io/\r\n  [3]: https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/TableView.html\r\n  [4]: https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/TableView.html#getColumns()\r\n  [5]: https://stackoverflow.com/a/21150650/642706\r\n  [6]: http://www.angelikalanger.com/GenericsFAQ/FAQSections/ProgrammingIdioms.html#FAQ300","title":"How to resolve &quot;Unchecked generics&quot; warning when setting columns on a TableView in JavaFX","body":"<p>I encountered a compiler warning in this common situation of adding columns to a table view control in a <a href=\"https://en.wikipedia.org/wiki/JavaFX\" rel=\"nofollow noreferrer\">JavaFX</a> app.</p>\n<p>To demonstrate, here is my modified version of the code example seen in the Javadoc for the JavaFX/<a href=\"https://openjfx.io/\" rel=\"nofollow noreferrer\">OpenJFX</a> class <a href=\"https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/TableView.html\" rel=\"nofollow noreferrer\"><code>TableView</code></a>. Note the <a href=\"https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/TableView.html#getColumns()\" rel=\"nofollow noreferrer\"><code>getColumns</code></a> line.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class HelloApplication extends Application\n{\n    @Override\n    public void start ( Stage stage )\n    {\n        TableView &lt; Person &gt; tableViewPersons = new TableView &lt;&gt; ( );\n        ObservableList &lt; Person &gt; persons = FXCollections.observableArrayList ( this.fetchPersons ( ) );\n        tableViewPersons.setItems ( persons );\n\n        TableColumn &lt; Person, String &gt; firstNameCol = new TableColumn &lt;&gt; ( &quot;First Name&quot; );\n        firstNameCol.setCellValueFactory ( new PropertyValueFactory &lt;&gt; ( persons.get ( 0 ).firstNameProperty ( ).getName ( ) ) );\n\n        TableColumn &lt; Person, String &gt; lastNameCol = new TableColumn &lt;&gt; ( &quot;Last Name&quot; );\n        lastNameCol.setCellValueFactory ( new PropertyValueFactory &lt;&gt; ( persons.get ( 0 ).lastNameProperty ( ).getName ( ) ) );\n\n        tableViewPersons.getColumns ( ).setAll ( firstNameCol , lastNameCol );  // &lt;---- Warning: Unchecked generics array creation for varargs parameter.\n\n        Scene scene = new Scene ( tableViewPersons , 320 , 240 );\n        stage.setTitle ( &quot;JavaFX Example&quot; );\n        stage.setScene ( scene );\n        stage.show ( );\n    }\n…\n</code></pre>\n<p>The line:</p>\n<pre><code>tableViewPersons.getColumns ( ).setAll ( firstNameCol , lastNameCol );\n</code></pre>\n<p>… generates a warning for:</p>\n<blockquote>\n<p>Warning: Unchecked generics array creation for varargs parameter</p>\n</blockquote>\n<p>I understand from <a href=\"https://stackoverflow.com/a/21150650/642706\">this Answer</a> on <a href=\"https://stackoverflow.com/q/21132692/642706\"><em>Java unchecked: unchecked generic array creation for varargs parameter</em></a>, and from <a href=\"http://www.angelikalanger.com/GenericsFAQ/FAQSections/ProgrammingIdioms.html#FAQ300\" rel=\"nofollow noreferrer\">this post</a>, that the issue involves ambiguity about the type of the arguments being passed.</p>\n<p>If my goal is to resolve this compiler warning, then one solution is to make explicit the parameterized type of the collection of <code>TableColumn</code> objects be passed to <code>ObservableList#setAll</code>. So we can explicitly declare a <code>List</code> of the <code>TableColumn</code> objects.</p>\n<pre class=\"lang-java prettyprint-override\"><code>        List &lt; TableColumn &lt; Person, ? &gt; &gt; columns = List.of ( firstNameCol , lastNameCol );  // &lt;--- Adding this line to make explicit the parameterized type of `TableColumn` to resolve the &quot;Unchecked generics&quot; warning.\n        tableViewPersons.getColumns ( ).setAll ( columns );\n</code></pre>\n<p>See that new code in the full context:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class HelloApplication extends Application\n{\n    @Override\n    public void start ( Stage stage )\n    {\n        TableView &lt; Person &gt; tableViewPersons = new TableView &lt;&gt; ( );\n        ObservableList &lt; Person &gt; persons = FXCollections.observableArrayList ( this.fetchPersons ( ) );\n        tableViewPersons.setItems ( persons );\n\n        TableColumn &lt; Person, String &gt; firstNameCol = new TableColumn &lt;&gt; ( &quot;First Name&quot; );\n        firstNameCol.setCellValueFactory ( new PropertyValueFactory &lt;&gt; ( persons.get ( 0 ).firstNameProperty ( ).getName ( ) ) );\n\n        TableColumn &lt; Person, String &gt; lastNameCol = new TableColumn &lt;&gt; ( &quot;Last Name&quot; );\n        lastNameCol.setCellValueFactory ( new PropertyValueFactory &lt;&gt; ( persons.get ( 0 ).lastNameProperty ( ).getName ( ) ) );\n\n        List &lt; TableColumn &lt; Person, ? &gt; &gt; columns = List.of ( firstNameCol , lastNameCol );  // &lt;--- Adding this line to make explicit the parameterized type of `TableColumn` to resolve the &quot;Unchecked generics&quot; warning.\n        tableViewPersons.getColumns ( ).setAll ( columns );\n\n        Scene scene = new Scene ( tableViewPersons , 320 , 240 );\n        stage.setTitle ( &quot;JavaFX Example&quot; );\n        stage.setScene ( scene );\n        stage.show ( );\n    }\n…\n</code></pre>\n<p>My question:</p>\n<ul>\n<li>Is this a valid, complete solution to resolving the the &quot;Unchecked generics&quot; warning?</li>\n<li>Is there any other simpler way to resolve the &quot;Unchecked generics&quot; warning? (I would rather not suppress the warning.)</li>\n</ul>\n"},{"tags":["java","spring","maven","jakarta-migration"],"comments":[{"owner":{"account_id":10463559,"reputation":2118,"user_id":7713562,"display_name":"zawarudo"},"score":0,"creation_date":1691543333,"post_id":76863747,"comment_id":135504886,"body_markdown":"This will sound kinda dumb but have you simply tried to exclude those dependencies since you are using maven and add those specific dependencies ( jakarta.servlet.Filter )?\nhttps://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html#dependency-exclusions\nAs for lowering Tomcat, you are correct, Spring 6 requires Tomcat 10, 9 will not work.\nLet me know if this helps Aaron.","body":"This will sound kinda dumb but have you simply tried to exclude those dependencies since you are using maven and add those specific dependencies ( jakarta.servlet.Filter )? <a href=\"https://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html#dependency-exclusions\" rel=\"nofollow noreferrer\">maven.apache.org/guides/introduction/&hellip;</a> As for lowering Tomcat, you are correct, Spring 6 requires Tomcat 10, 9 will not work. Let me know if this helps Aaron."}],"owner":{"account_id":364348,"reputation":4420,"user_id":708678,"accept_rate":81,"display_name":"Aaron"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691538099,"creation_date":1691538099,"question_id":76863747,"body_markdown":"I have a spring project that I updated to version 3.  I added Jakarta to replace Javax.\r\nWhen I run the application I get a `Failed to load class [javax.servlet.Filter]` error. Some of the post on Stack recommend lowering the version of Tomcat, but I have to keep it at 10.1.11.\r\n\r\nWhen I run `mvn dependency:tree -Dverbose` I see that javax is being used by `kogito-spring-boot-starter` which is at version 1.41 which is the latest release and javax is also being used by s`pring-cloud-starter-security` which is at the latest release 2.2.5.\r\n\r\nI am using Maven. \r\nHow would I fix this?","title":"Failed to load class [javax.servlet.Filter] Cannot lower version of Tomcat","body":"<p>I have a spring project that I updated to version 3.  I added Jakarta to replace Javax.\nWhen I run the application I get a <code>Failed to load class [javax.servlet.Filter]</code> error. Some of the post on Stack recommend lowering the version of Tomcat, but I have to keep it at 10.1.11.</p>\n<p>When I run <code>mvn dependency:tree -Dverbose</code> I see that javax is being used by <code>kogito-spring-boot-starter</code> which is at version 1.41 which is the latest release and javax is also being used by s<code>pring-cloud-starter-security</code> which is at the latest release 2.2.5.</p>\n<p>I am using Maven.\nHow would I fix this?</p>\n"},{"tags":["java","admob","codenameone"],"comments":[{"owner":{"account_id":394396,"reputation":52144,"user_id":756809,"accept_rate":89,"display_name":"Shai Almog"},"score":0,"creation_date":1691548852,"post_id":76863744,"comment_id":135505315,"body_markdown":"The simplest way to do this is to launch Codename One Settings from the maven target. Go to advanced -&gt; Extensions and click &quot;download&quot;. This automatically recognizes the type of extension and adds it to the pom correctly.","body":"The simplest way to do this is to launch Codename One Settings from the maven target. Go to advanced -&gt; Extensions and click &quot;download&quot;. This automatically recognizes the type of extension and adds it to the pom correctly."},{"owner":{"account_id":20108531,"reputation":65,"user_id":14745423,"display_name":"Stefan Cohn"},"score":0,"creation_date":1691564631,"post_id":76863744,"comment_id":135507015,"body_markdown":"When I do, my game no longer can be built to server for android (get an error), I get errors when I build it locally in Android Studio when testing it out such as: Dynamic lookup for intent failed for action: com.google.android.gms.ads.service.START and the app does not build in XCode for iOS.","body":"When I do, my game no longer can be built to server for android (get an error), I get errors when I build it locally in Android Studio when testing it out such as: Dynamic lookup for intent failed for action: com.google.android.gms.ads.service.START and the app does not build in XCode for iOS."},{"owner":{"account_id":394396,"reputation":52144,"user_id":756809,"accept_rate":89,"display_name":"Shai Almog"},"score":0,"creation_date":1691635335,"post_id":76863744,"comment_id":135519150,"body_markdown":"I can&#39;t help without actual error logs that you&#39;re getting. If they are too long you can create a git gist and provide a link. If they&#39;re private you can submit that to the chat in our website and link to this answer.","body":"I can&#39;t help without actual error logs that you&#39;re getting. If they are too long you can create a git gist and provide a link. If they&#39;re private you can submit that to the chat in our website and link to this answer."},{"owner":{"account_id":20108531,"reputation":65,"user_id":14745423,"display_name":"Stefan Cohn"},"score":0,"creation_date":1691863561,"post_id":76863744,"comment_id":135550090,"body_markdown":"So I did get things to work perfectly for Android. I did get my program to run on iOS with admob injected on xcode, however, when I run my program on my phone with ads, when an ad is supposed to show, my program freezes and gives me this infinitely\n2023-08-12 14:01:35.402624-0400 MyApp[48419:2669211] inside native getIsLoadedMainThread\n2023-08-12 14:01:35.402695-0400 MyApp[48419:2669211] ad not loaded yet \nIs this something that will resolve if my app were to be published?","body":"So I did get things to work perfectly for Android. I did get my program to run on iOS with admob injected on xcode, however, when I run my program on my phone with ads, when an ad is supposed to show, my program freezes and gives me this infinitely 2023-08-12 14:01:35.402624-0400 MyApp[48419:2669211] inside native getIsLoadedMainThread 2023-08-12 14:01:35.402695-0400 MyApp[48419:2669211] ad not loaded yet  Is this something that will resolve if my app were to be published?"},{"owner":{"account_id":394396,"reputation":52144,"user_id":756809,"accept_rate":89,"display_name":"Shai Almog"},"score":0,"creation_date":1691893860,"post_id":76863744,"comment_id":135552091,"body_markdown":"I doubt it. You should at least see a placeholder ad. This is a printout from the library, what other printouts do you see from here: https://github.com/codenameone/admobfullscreen-codenameone/blob/88bffee043f3705cf12c768cd594411dfa32af2c/ios/src/main/objectivec/com_codename1_admob_AdMobNativeImpl.m#L33","body":"I doubt it. You should at least see a placeholder ad. This is a printout from the library, what other printouts do you see from here: <a href=\"https://github.com/codenameone/admobfullscreen-codenameone/blob/88bffee043f3705cf12c768cd594411dfa32af2c/ios/src/main/objectivec/com_codename1_admob_AdMobNativeImpl.m#L33\" rel=\"nofollow noreferrer\">github.com/codenameone/admobfullscreen-codenameone/blob/&hellip;</a>"},{"owner":{"account_id":20108531,"reputation":65,"user_id":14745423,"display_name":"Stefan Cohn"},"score":0,"creation_date":1691948616,"post_id":76863744,"comment_id":135556679,"body_markdown":"I also get these printouts when the ad first &quot;loads&quot;:::      \n2023-08-13 13:35:31.364916-0400 MyApp[56220:2986498] inside native startLoadingAd\n2023-08-13 13:35:31.365093-0400 MyApp[56220:2986498] inside native isLoaded - run on main thread\n2023-08-13 13:35:31.365150-0400 MyApp[56220:2986135] start loading Ad :::    \nLike I said, I then get the other printouts infinitely. I also observed in AdMob that my ad unit is getting impressions so I think it is &quot;working&quot; in a way but it just seems to crash my program.","body":"I also get these printouts when the ad first &quot;loads&quot;:::       2023-08-13 13:35:31.364916-0400 MyApp[56220:2986498] inside native startLoadingAd 2023-08-13 13:35:31.365093-0400 MyApp[56220:2986498] inside native isLoaded - run on main thread 2023-08-13 13:35:31.365150-0400 MyApp[56220:2986135] start loading Ad :::     Like I said, I then get the other printouts infinitely. I also observed in AdMob that my ad unit is getting impressions so I think it is &quot;working&quot; in a way but it just seems to crash my program."},{"owner":{"account_id":394396,"reputation":52144,"user_id":756809,"accept_rate":89,"display_name":"Shai Almog"},"score":1,"creation_date":1691981177,"post_id":76863744,"comment_id":135559349,"body_markdown":"So no `interstitialDidReceiveAd` or anything similar? That means an ad wasn&#39;t received from admob. I&#39;m not sure why. If the app crashes can you add the stack from xcode and error to the question? Do you have access to that?","body":"So no <code>interstitialDidReceiveAd</code> or anything similar? That means an ad wasn&#39;t received from admob. I&#39;m not sure why. If the app crashes can you add the stack from xcode and error to the question? Do you have access to that?"},{"owner":{"account_id":20108531,"reputation":65,"user_id":14745423,"display_name":"Stefan Cohn"},"score":0,"creation_date":1692054813,"post_id":76863744,"comment_id":135571087,"body_markdown":"Thank you so much. This comment made me realize my Ad Unit ID and App ID were flip flopped.","body":"Thank you so much. This comment made me realize my Ad Unit ID and App ID were flip flopped."}],"owner":{"account_id":20108531,"reputation":65,"user_id":14745423,"display_name":"Stefan Cohn"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691538042,"creation_date":1691538042,"question_id":76863744,"body_markdown":"I&#39;m having issues getting the Admob extension to work. \r\nI initially just inserted the commands found on the extension&#39;s Github page (https://github.com/codenameone/admobfullscreen-codenameone) to the pml.xml file which did not work. So I then downloaded the Admob library in the extensions page in the CN1 settings program. When I do that, I get an error with common/pom.xml file - sometimes it says that the artifact can&#39;t be found. So, I then deleted the commands that were inserted in the common/pom.xml file from downloading it via the settings page. I then reinserted the commands said to insert from the Github page and then the admob extension works in the simulator. \r\n\r\nI then built it my program locally in Android Studio to which it does not work because it cannot find the GoogleAPIs. I then just uploaded it to the cloud server and ran my game on an emulator (Genymotion) as I thought maybe it was just an error with Android Studio. My game ran in the emulator but whenever an ad was supposed to pop up, my game would simply freeze. \r\n\r\nI think I am doing something wrong when I insert the library into my program and any guidance on how to properly insert Admob into my project would be greatly appreciated. \r\n","title":"How to inject Admob Extension to a Codename One Project?","body":"<p>I'm having issues getting the Admob extension to work.\nI initially just inserted the commands found on the extension's Github page (<a href=\"https://github.com/codenameone/admobfullscreen-codenameone\" rel=\"nofollow noreferrer\">https://github.com/codenameone/admobfullscreen-codenameone</a>) to the pml.xml file which did not work. So I then downloaded the Admob library in the extensions page in the CN1 settings program. When I do that, I get an error with common/pom.xml file - sometimes it says that the artifact can't be found. So, I then deleted the commands that were inserted in the common/pom.xml file from downloading it via the settings page. I then reinserted the commands said to insert from the Github page and then the admob extension works in the simulator.</p>\n<p>I then built it my program locally in Android Studio to which it does not work because it cannot find the GoogleAPIs. I then just uploaded it to the cloud server and ran my game on an emulator (Genymotion) as I thought maybe it was just an error with Android Studio. My game ran in the emulator but whenever an ad was supposed to pop up, my game would simply freeze.</p>\n<p>I think I am doing something wrong when I insert the library into my program and any guidance on how to properly insert Admob into my project would be greatly appreciated.</p>\n"},{"tags":["java","android","http","versioning"],"comments":[{"owner":{"account_id":481416,"reputation":355404,"user_id":895245,"accept_rate":49,"display_name":"Ciro Santilli OurBigBook.com"},"score":0,"creation_date":1448988624,"post_id":7298106,"comment_id":55806693,"body_markdown":"How users can do that from Settings: http://android.stackexchange.com/questions/2016/how-can-you-tell-which-version-of-an-app-is-on-your-android-phone","body":"How users can do that from Settings: <a href=\"http://android.stackexchange.com/questions/2016/how-can-you-tell-which-version-of-an-app-is-on-your-android-phone\" title=\"how can you tell which version of an app is on your android phone\">android.stackexchange.com/questions/2016/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":139983,"reputation":8196,"user_id":345959,"display_name":"Smar"},"score":0,"creation_date":1459336328,"post_id":7298124,"comment_id":60237746,"body_markdown":"For future reference, the application seems to be [here](https://github.com/openintents/openintents/tree/master/UpdateCheckerApp) now.","body":"For future reference, the application seems to be <a href=\"https://github.com/openintents/openintents/tree/master/UpdateCheckerApp\" rel=\"nofollow noreferrer\">here</a> now."}],"tags":[],"owner":{"account_id":87652,"reputation":52646,"user_id":242930,"display_name":"Nikolay Elenkov"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1315125514,"creation_date":1315125514,"answer_id":7298124,"question_id":7298106,"body_markdown":"There is no API for this, and you can&#39;t auto install it, you can just redirect them to it&#39;s Market page so they can upgrade. You can have your latest version in a file on a Web server, and have the app check it. Here&#39;s one implementation of this:\r\n\r\nhttp://code.google.com/p/openintents/source/browse/#svn%2Ftrunk%2FUpdateCheckerApp\r\n","title":"How to allow users to check for the latest app version from inside the app?","body":"<p>There is no API for this, and you can't auto install it, you can just redirect them to it's Market page so they can upgrade. You can have your latest version in a file on a Web server, and have the app check it. Here's one implementation of this:</p>\n\n<p><a href=\"http://code.google.com/p/openintents/source/browse/#svn%2Ftrunk%2FUpdateCheckerApp\" rel=\"nofollow\">http://code.google.com/p/openintents/source/browse/#svn%2Ftrunk%2FUpdateCheckerApp</a></p>\n"},{"comments":[{"owner":{"account_id":3203236,"reputation":5435,"user_id":2704885,"accept_rate":56,"display_name":"Boldijar Paul"},"score":11,"creation_date":1415536481,"post_id":7298355,"comment_id":42223890,"body_markdown":"Since this is java code response == &quot;YES&quot; won&#39;t work, you need to use .equals method.","body":"Since this is java code response == &quot;YES&quot; won&#39;t work, you need to use .equals method."},{"owner":{"account_id":371574,"reputation":2552,"user_id":720175,"accept_rate":66,"display_name":"Sandy"},"score":0,"creation_date":1430770727,"post_id":7298355,"comment_id":48194345,"body_markdown":"Why not use a boolean?","body":"Why not use a boolean?"},{"owner":{"account_id":4363186,"reputation":5441,"user_id":3559670,"accept_rate":18,"display_name":"KishuDroid"},"score":3,"creation_date":1451458492,"post_id":7298355,"comment_id":56790371,"body_markdown":"@Jasoneer : What to write in the SendNetworkUpdateAppRequest() function ?","body":"@Jasoneer : What to write in the SendNetworkUpdateAppRequest() function ?"}],"tags":[],"owner":{"account_id":477738,"reputation":2078,"user_id":889412,"accept_rate":38,"display_name":"Jasoneer"},"comment_count":3,"down_vote_count":4,"up_vote_count":30,"is_accepted":false,"score":26,"last_activity_date":1531289026,"creation_date":1315129255,"answer_id":7298355,"question_id":7298106,"body_markdown":"If it is an application on the Market, then on app start-up, fire an Intent to open up the Market app hopefully which will cause it to check for updates.\r\n\r\nOtherwise implementing and update checker is fairly easy. Here is my code (roughly) for it:\r\n\r\n    String response = SendNetworkUpdateAppRequest(); // Your code to do the network request\r\n                                                     // should send the current version\r\n                                                     // to server\r\n    if(response.equals(&quot;YES&quot;)) // Start Intent to download the app user has to manually install it by clicking on the notification\r\n        startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(&quot;URL TO LATEST APK&quot;)));\r\n\r\nOf course you should rewrite this to do the request on a background thread but you get the idea.\r\n\r\n&gt; If you like something a little but more complex but allows your app to\r\n&gt; automatically apply the update see [here][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/4967669/android-install-apk-programmatically","title":"How to allow users to check for the latest app version from inside the app?","body":"<p>If it is an application on the Market, then on app start-up, fire an Intent to open up the Market app hopefully which will cause it to check for updates.</p>\n\n<p>Otherwise implementing and update checker is fairly easy. Here is my code (roughly) for it:</p>\n\n<pre><code>String response = SendNetworkUpdateAppRequest(); // Your code to do the network request\n                                                 // should send the current version\n                                                 // to server\nif(response.equals(\"YES\")) // Start Intent to download the app user has to manually install it by clicking on the notification\n    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(\"URL TO LATEST APK\")));\n</code></pre>\n\n<p>Of course you should rewrite this to do the request on a background thread but you get the idea.</p>\n\n<blockquote>\n  <p>If you like something a little but more complex but allows your app to\n  automatically apply the update see <a href=\"https://stackoverflow.com/questions/4967669/android-install-apk-programmatically\">here</a>.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":1925703,"reputation":2161,"user_id":1736218,"accept_rate":62,"display_name":"b15"},"score":0,"creation_date":1459705902,"post_id":21220203,"comment_id":60394557,"body_markdown":"Code really helped.  I assumed it used version code, but it uses version name,","body":"Code really helped.  I assumed it used version code, but it uses version name,"},{"owner":{"account_id":4666074,"reputation":411,"user_id":3779100,"display_name":"Ajit Sharma"},"score":0,"creation_date":1464763211,"post_id":21220203,"comment_id":62610462,"body_markdown":"How to get VersionCode ?","body":"How to get VersionCode ?"},{"owner":{"account_id":3957132,"reputation":4580,"user_id":5188516,"accept_rate":19,"display_name":"Abdul Waheed"},"score":0,"creation_date":1473161150,"post_id":21220203,"comment_id":66025213,"body_markdown":"this code is giving me UNKNOWNHOSTEXCEPTION.I don&#39;t know why","body":"this code is giving me UNKNOWNHOSTEXCEPTION.I don&#39;t know why"},{"owner":{"account_id":8614021,"reputation":137849,"user_id":6451573,"accept_rate":90,"display_name":"Jean-Fran&#231;ois Fabre"},"score":0,"creation_date":1620070123,"post_id":21220203,"comment_id":119087693,"body_markdown":"you have to disclose affiliation because it seems you wrote this library","body":"you have to disclose affiliation because it seems you wrote this library"}],"tags":[],"owner":{"account_id":3778003,"reputation":6793,"user_id":3138238,"accept_rate":74,"display_name":"madx"},"comment_count":4,"down_vote_count":0,"up_vote_count":41,"is_accepted":false,"score":41,"last_activity_date":1621341514,"creation_date":1390152991,"answer_id":21220203,"question_id":7298106,"body_markdown":"You can use this Android Library: https://github.com/danielemaddaluno/Android-Update-Checker. It aims to provide a reusable instrument to check asynchronously if exists any newer released update of your app on the Store.\r\nIt is based on the use of Jsoup (http://jsoup.org/) to test if a new update really exists parsing the app page on the Google Play Store:\r\n\r\n    private boolean web_update(){\r\n\t\ttry {\t\t\r\n            String curVersion = applicationContext.getPackageManager().getPackageInfo(BuildConfig.APPLICATION_ID, 0).versionName;\t\r\n\t\t\tString newVersion = curVersion;\r\n\t\t\tnewVersion = Jsoup.connect(&quot;https://play.google.com/store/apps/details?id=&quot; + BuildConfig.APPLICATION_ID + &quot;&amp;hl=en&quot;)\r\n\t\t\t\t\t.timeout(30000)\r\n\t\t\t\t\t.userAgent(&quot;Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6&quot;)\r\n\t\t\t\t\t.referrer(&quot;http://www.google.com&quot;)\r\n\t\t\t\t\t.get()\r\n\t\t\t\t\t.select(&quot;div[itemprop=softwareVersion]&quot;)\r\n\t\t\t\t\t.first()\r\n\t\t\t\t\t.ownText();\r\n\t\t\treturn (value(curVersion) &lt; value(newVersion)) ? true : false;\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\r\nAnd as &quot;value&quot; function the following (works if values are beetween 0-99):\r\n\r\n    private long value(String string) {\r\n\t\tstring = string.trim();\r\n\t\tif( string.contains( &quot;.&quot; )){ \r\n\t\t\tfinal int index = string.lastIndexOf( &quot;.&quot; );\r\n\t\t\treturn value( string.substring( 0, index ))* 100 + value( string.substring( index + 1 )); \r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn Long.valueOf( string ); \r\n\t\t}\r\n\t}\r\n\r\nIf you want only to verify a mismatch beetween versions, you can change:\r\n\r\n`value(curVersion) &lt; value(newVersion)` with `value(curVersion) != value(newVersion)`","title":"How to allow users to check for the latest app version from inside the app?","body":"<p>You can use this Android Library: <a href=\"https://github.com/danielemaddaluno/Android-Update-Checker\" rel=\"nofollow noreferrer\">https://github.com/danielemaddaluno/Android-Update-Checker</a>. It aims to provide a reusable instrument to check asynchronously if exists any newer released update of your app on the Store.\nIt is based on the use of Jsoup (<a href=\"http://jsoup.org/\" rel=\"nofollow noreferrer\">http://jsoup.org/</a>) to test if a new update really exists parsing the app page on the Google Play Store:</p>\n<pre><code>private boolean web_update(){\n    try {       \n        String curVersion = applicationContext.getPackageManager().getPackageInfo(BuildConfig.APPLICATION_ID, 0).versionName;   \n        String newVersion = curVersion;\n        newVersion = Jsoup.connect(&quot;https://play.google.com/store/apps/details?id=&quot; + BuildConfig.APPLICATION_ID + &quot;&amp;hl=en&quot;)\n                .timeout(30000)\n                .userAgent(&quot;Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6&quot;)\n                .referrer(&quot;http://www.google.com&quot;)\n                .get()\n                .select(&quot;div[itemprop=softwareVersion]&quot;)\n                .first()\n                .ownText();\n        return (value(curVersion) &lt; value(newVersion)) ? true : false;\n    } catch (Exception e) {\n        e.printStackTrace();\n        return false;\n    }\n}\n</code></pre>\n<p>And as &quot;value&quot; function the following (works if values are beetween 0-99):</p>\n<pre><code>private long value(String string) {\n    string = string.trim();\n    if( string.contains( &quot;.&quot; )){ \n        final int index = string.lastIndexOf( &quot;.&quot; );\n        return value( string.substring( 0, index ))* 100 + value( string.substring( index + 1 )); \n    }\n    else {\n        return Long.valueOf( string ); \n    }\n}\n</code></pre>\n<p>If you want only to verify a mismatch beetween versions, you can change:</p>\n<p><code>value(curVersion) &lt; value(newVersion)</code> with <code>value(curVersion) != value(newVersion)</code></p>\n"},{"comments":[{"owner":{"account_id":139983,"reputation":8196,"user_id":345959,"display_name":"Smar"},"score":1,"creation_date":1459335999,"post_id":33608728,"comment_id":60237508,"body_markdown":"Looking around answers to questions here, I hate to admit but this seems to be only solution doable without spending hours trying to crack down that “api” of Google Play...","body":"Looking around answers to questions here, I hate to admit but this seems to be only solution doable without spending hours trying to crack down that “api” of Google Play..."},{"owner":{"account_id":4666074,"reputation":411,"user_id":3779100,"display_name":"Ajit Sharma"},"score":0,"creation_date":1464761935,"post_id":33608728,"comment_id":62609822,"body_markdown":"I am getting version name. How I can get versionCode by above code?","body":"I am getting version name. How I can get versionCode by above code?"},{"owner":{"display_name":"user586399"},"score":0,"creation_date":1464789661,"post_id":33608728,"comment_id":62629121,"body_markdown":"@AjitSharma Call the method, and use the returned array. `String res[] = getAppVersionInfo(&quot;myplayurl&quot;); String version = res[0];`","body":"@AjitSharma Call the method, and use the returned array. <code>String res[] = getAppVersionInfo(&quot;myplayurl&quot;); String version = res[0];</code>"},{"owner":{"account_id":4666074,"reputation":411,"user_id":3779100,"display_name":"Ajit Sharma"},"score":0,"creation_date":1464841754,"post_id":33608728,"comment_id":62651691,"body_markdown":"@Kilanny, I am doing tht but I am getting version name which is different from version code in android. eg. versionCode 1 &amp; versionName &quot;1.0&quot;.","body":"@Kilanny, I am doing tht but I am getting version name which is different from version code in android. eg. versionCode 1 &amp; versionName &quot;1.0&quot;."},{"owner":{"display_name":"user586399"},"score":0,"creation_date":1464867553,"post_id":33608728,"comment_id":62666346,"body_markdown":"@AjitSharma Please see this to retrieve code/name http://stackoverflow.com/a/6593822/4795214","body":"@AjitSharma Please see this to retrieve code/name <a href=\"http://stackoverflow.com/a/6593822/4795214\">stackoverflow.com/a/6593822/4795214</a>"},{"owner":{"account_id":4666074,"reputation":411,"user_id":3779100,"display_name":"Ajit Sharma"},"score":0,"creation_date":1464937078,"post_id":33608728,"comment_id":62699577,"body_markdown":"@Kilanny, Yes right but I want VersionCode from Playstore so tht I can compare with my app versioncode.","body":"@Kilanny, Yes right but I want VersionCode from Playstore so tht I can compare with my app versioncode."},{"owner":{"display_name":"user586399"},"score":0,"creation_date":1465040116,"post_id":33608728,"comment_id":62741212,"body_markdown":"Google play gives you version name. So compare with version name, and get the version name of your current app using the above comment link.","body":"Google play gives you version name. So compare with version name, and get the version name of your current app using the above comment link."},{"owner":{"account_id":6354085,"reputation":801,"user_id":4932065,"display_name":"digiwizkid"},"score":0,"creation_date":1522983556,"post_id":33608728,"comment_id":86380556,"body_markdown":"`div[itemprop=softwareVersion]` is no longer used in play store, will not work anymore","body":"<code>div[itemprop=softwareVersion]</code> is no longer used in play store, will not work anymore"},{"owner":{"account_id":24412978,"reputation":91,"user_id":18340193,"display_name":"Mansi Tanna"},"score":0,"creation_date":1696956037,"post_id":33608728,"comment_id":136217748,"body_markdown":"What can I do now to get proper version number","body":"What can I do now to get proper version number"}],"tags":[],"owner":{"display_name":"user586399"},"comment_count":9,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1691537171,"creation_date":1447070720,"answer_id":33608728,"question_id":7298106,"body_markdown":"Navigate to your play page:\r\n\r\n&lt;!-- language: none --&gt;\r\n    https://play.google.com/store/apps/details?id=com.yourpackage\r\n\r\nUsing a standard HTTP GET.\r\nNow the following jQuery finds important info for you:\r\n\r\nCurrent Version\r\n--\r\n\r\n    $(&quot;[itemprop=&#39;softwareVersion&#39;]&quot;).text()\r\n\r\nWhat&#39;s new\r\n--\r\n\r\n    $(&quot;.recent-change&quot;).each(function() { all += $(this).text() + &quot;\\n&quot;; })\r\n\r\nNow that you can extract these information manually, simply make a method in your app that executes this for you.\r\n\r\n\r\n    public static String[] getAppVersionInfo(String playUrl) {\r\n        HtmlCleaner cleaner = new HtmlCleaner();\r\n        CleanerProperties props = cleaner.getProperties();\r\n        props.setAllowHtmlInsideAttributes(true);\r\n        props.setAllowMultiWordAttributes(true);\r\n        props.setRecognizeUnicodeChars(true);\r\n        props.setOmitComments(true);\r\n        try {\r\n            URL url = new URL(playUrl);\r\n            URLConnection conn = url.openConnection();\r\n            TagNode node = cleaner.clean(new InputStreamReader(conn.getInputStream()));\r\n            Object[] new_nodes = node.evaluateXPath(&quot;//*[@class=&#39;recent-change&#39;]&quot;);\r\n            Object[] version_nodes = node.evaluateXPath(&quot;//*[@itemprop=&#39;softwareVersion&#39;]&quot;);\r\n\r\n            String version = &quot;&quot;, whatsNew = &quot;&quot;;\r\n            for (Object new_node : new_nodes) {\r\n                TagNode info_node = (TagNode) new_node;\r\n                whatsNew += info_node.getAllChildren().get(0).toString().trim()\r\n                        + &quot;\\n&quot;;\r\n            }\r\n            if (version_nodes.length &gt; 0) {\r\n                TagNode ver = (TagNode) version_nodes[0];\r\n                version = ver.getAllChildren().get(0).toString().trim();\r\n            }\r\n            return new String[]{version, whatsNew};\r\n        } catch (IOException | XPatherException e) {\r\n            e.printStackTrace();\r\n            return null;\r\n        }\r\n    }\r\n\r\nUses &lt;a href=&quot;http://sourceforge.net/projects/htmlcleaner&quot;&gt;HtmlCleaner&lt;/a&gt;","title":"How to allow users to check for the latest app version from inside the app?","body":"<p>Navigate to your play page:</p>\n<pre class=\"lang-none prettyprint-override\"><code>https://play.google.com/store/apps/details?id=com.yourpackage\n</code></pre>\n<p>Using a standard HTTP GET.\nNow the following jQuery finds important info for you:</p>\n<h2>Current Version</h2>\n<pre><code>$(&quot;[itemprop='softwareVersion']&quot;).text()\n</code></pre>\n<h2>What's new</h2>\n<pre><code>$(&quot;.recent-change&quot;).each(function() { all += $(this).text() + &quot;\\n&quot;; })\n</code></pre>\n<p>Now that you can extract these information manually, simply make a method in your app that executes this for you.</p>\n<pre><code>public static String[] getAppVersionInfo(String playUrl) {\n    HtmlCleaner cleaner = new HtmlCleaner();\n    CleanerProperties props = cleaner.getProperties();\n    props.setAllowHtmlInsideAttributes(true);\n    props.setAllowMultiWordAttributes(true);\n    props.setRecognizeUnicodeChars(true);\n    props.setOmitComments(true);\n    try {\n        URL url = new URL(playUrl);\n        URLConnection conn = url.openConnection();\n        TagNode node = cleaner.clean(new InputStreamReader(conn.getInputStream()));\n        Object[] new_nodes = node.evaluateXPath(&quot;//*[@class='recent-change']&quot;);\n        Object[] version_nodes = node.evaluateXPath(&quot;//*[@itemprop='softwareVersion']&quot;);\n\n        String version = &quot;&quot;, whatsNew = &quot;&quot;;\n        for (Object new_node : new_nodes) {\n            TagNode info_node = (TagNode) new_node;\n            whatsNew += info_node.getAllChildren().get(0).toString().trim()\n                    + &quot;\\n&quot;;\n        }\n        if (version_nodes.length &gt; 0) {\n            TagNode ver = (TagNode) version_nodes[0];\n            version = ver.getAllChildren().get(0).toString().trim();\n        }\n        return new String[]{version, whatsNew};\n    } catch (IOException | XPatherException e) {\n        e.printStackTrace();\n        return null;\n    }\n}\n</code></pre>\n<p>Uses <a href=\"http://sourceforge.net/projects/htmlcleaner\" rel=\"nofollow noreferrer\">HtmlCleaner</a></p>\n"},{"tags":[],"owner":{"account_id":7167179,"reputation":6034,"user_id":5475941,"display_name":"Mohammad"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1455391131,"creation_date":1455390666,"answer_id":35384172,"question_id":7298106,"body_markdown":"You should first check the app version on the market and compare it with the version of the app on the device. If they are different, it may be an update available. In this post I wrote down the code for getting the current version of market and current version on the device and compare them together. I also showed how to show the update dialog and redirect the user to the update page. Please visit this link: [https://stackoverflow.com/a/33925032/5475941][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/33925032/5475941","title":"How to allow users to check for the latest app version from inside the app?","body":"<p>You should first check the app version on the market and compare it with the version of the app on the device. If they are different, it may be an update available. In this post I wrote down the code for getting the current version of market and current version on the device and compare them together. I also showed how to show the update dialog and redirect the user to the update page. Please visit this link: <a href=\"https://stackoverflow.com/a/33925032/5475941\">https://stackoverflow.com/a/33925032/5475941</a></p>\n"},{"comments":[{"owner":{"account_id":6354085,"reputation":801,"user_id":4932065,"display_name":"digiwizkid"},"score":0,"creation_date":1522983465,"post_id":43776054,"comment_id":86380530,"body_markdown":"`div[itemprop=softwareVersion]` is no longer used in play store page, will not work anymore.","body":"<code>div[itemprop=softwareVersion]</code> is no longer used in play store page, will not work anymore."},{"owner":{"account_id":6818688,"reputation":179,"user_id":5246479,"display_name":"viren kheni"},"score":0,"creation_date":1523352825,"post_id":43776054,"comment_id":86514668,"body_markdown":"yes, `div[itemprop=softwareVersion]` is not worked in my app anymore. Now, How can i use **jsop** library for get latest version of the app?","body":"yes, <code>div[itemprop=softwareVersion]</code> is not worked in my app anymore. Now, How can i use <b>jsop</b> library for get latest version of the app?"}],"tags":[],"owner":{"account_id":8966319,"reputation":119,"user_id":6686794,"accept_rate":0,"display_name":"Andi"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1493881429,"creation_date":1493881429,"answer_id":43776054,"question_id":7298106,"body_markdown":"add     `compile &#39;org.jsoup:jsoup:1.10.2&#39;`  to dependencies in **APP LEVEL** build.gradle\r\n\r\n&amp;\r\n\r\nJust add below code and you are good to go.\r\n\r\n\r\n\r\n    private class GetVersionCode extends AsyncTask&lt;Void, String, String&gt; {\r\n        @Override\r\n        protected String doInBackground(Void... voids) {\r\n\r\n            try {\r\n                newVersion = Jsoup.connect(&quot;https://play.google.com/store/apps/details?id=&quot; + SplashActivity.this.getPackageName() + &quot;&amp;hl=it&quot;)\r\n                        .timeout(30000)\r\n                        .userAgent(&quot;Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6&quot;)\r\n                        .referrer(&quot;http://www.google.com&quot;)\r\n                        .get()\r\n                        .select(&quot;div[itemprop=softwareVersion]&quot;)\r\n                        .first()\r\n                        .ownText();\r\n                return newVersion;\r\n            } catch (Exception e) {\r\n                return newVersion;\r\n            }\r\n        }\r\n\r\n        @Override\r\n        protected void onPostExecute(String onlineVersion) {\r\n            super.onPostExecute(onlineVersion);\r\n\r\n            if (!currentVersion.equalsIgnoreCase(onlineVersion)) {\r\n                //show dialog\r\n                new AlertDialog.Builder(context)\r\n                        .setTitle(&quot;Updated app available!&quot;)\r\n                        .setMessage(&quot;Want to update app?&quot;)\r\n                        .setPositiveButton(&quot;Update&quot;, new DialogInterface.OnClickListener() {\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n                                // continue with delete\r\n                                final String appPackageName = getPackageName(); // getPackageName() from Context or Activity object\r\n                                try {\r\n                                    Toast.makeText(getApplicationContext(), &quot;App is in BETA version cannot update&quot;, Toast.LENGTH_SHORT).show();\r\n                                    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(&quot;market://details?id=&quot; + appPackageName)));\r\n                                } catch (ActivityNotFoundException anfe) {\r\n                                    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(&quot;https://play.google.com/store/apps/details?id=&quot; + appPackageName)));\r\n                                }\r\n                            }\r\n                        })\r\n                        .setNegativeButton(&quot;Later&quot;, new DialogInterface.OnClickListener() {\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n                                // do nothing\r\n                                dialog.dismiss();\r\n                                new MyAsyncTask().execute();\r\n                            }\r\n                        })\r\n                        .setIcon(android.R.drawable.ic_dialog_alert)\r\n                        .show();\r\n\r\n            }\r\n        }\r\n    }\r\n","title":"How to allow users to check for the latest app version from inside the app?","body":"<p>add     <code>compile 'org.jsoup:jsoup:1.10.2'</code>  to dependencies in <strong>APP LEVEL</strong> build.gradle</p>\n\n<p>&amp;</p>\n\n<p>Just add below code and you are good to go.</p>\n\n<pre><code>private class GetVersionCode extends AsyncTask&lt;Void, String, String&gt; {\n    @Override\n    protected String doInBackground(Void... voids) {\n\n        try {\n            newVersion = Jsoup.connect(\"https://play.google.com/store/apps/details?id=\" + SplashActivity.this.getPackageName() + \"&amp;hl=it\")\n                    .timeout(30000)\n                    .userAgent(\"Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6\")\n                    .referrer(\"http://www.google.com\")\n                    .get()\n                    .select(\"div[itemprop=softwareVersion]\")\n                    .first()\n                    .ownText();\n            return newVersion;\n        } catch (Exception e) {\n            return newVersion;\n        }\n    }\n\n    @Override\n    protected void onPostExecute(String onlineVersion) {\n        super.onPostExecute(onlineVersion);\n\n        if (!currentVersion.equalsIgnoreCase(onlineVersion)) {\n            //show dialog\n            new AlertDialog.Builder(context)\n                    .setTitle(\"Updated app available!\")\n                    .setMessage(\"Want to update app?\")\n                    .setPositiveButton(\"Update\", new DialogInterface.OnClickListener() {\n                        public void onClick(DialogInterface dialog, int which) {\n                            // continue with delete\n                            final String appPackageName = getPackageName(); // getPackageName() from Context or Activity object\n                            try {\n                                Toast.makeText(getApplicationContext(), \"App is in BETA version cannot update\", Toast.LENGTH_SHORT).show();\n                                startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(\"market://details?id=\" + appPackageName)));\n                            } catch (ActivityNotFoundException anfe) {\n                                startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(\"https://play.google.com/store/apps/details?id=\" + appPackageName)));\n                            }\n                        }\n                    })\n                    .setNegativeButton(\"Later\", new DialogInterface.OnClickListener() {\n                        public void onClick(DialogInterface dialog, int which) {\n                            // do nothing\n                            dialog.dismiss();\n                            new MyAsyncTask().execute();\n                        }\n                    })\n                    .setIcon(android.R.drawable.ic_dialog_alert)\n                    .show();\n\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":12304123,"reputation":14662,"user_id":8977696,"display_name":"Arvind Chourasiya"},"score":0,"creation_date":1526983737,"post_id":50251940,"comment_id":87943237,"body_markdown":"Above code throwing exception at `get();`\n_Java.Lang.RuntimeException: Exception of type &#39;Java.Lang.RuntimeException&#39; was thrown_","body":"Above code throwing exception at <code>get();</code> <i>Java.Lang.RuntimeException: Exception of type &#39;Java.Lang.RuntimeException&#39; was thrown</i>"},{"owner":{"account_id":10726753,"reputation":1120,"user_id":7894033,"display_name":"Rajesh Naddy"},"score":0,"creation_date":1526992406,"post_id":50251940,"comment_id":87948678,"body_markdown":"@PriyankaAgrawal Sorry Mam for the delay, just now I checked my project ,its working..have u added Jsoup library?","body":"@PriyankaAgrawal Sorry Mam for the delay, just now I checked my project ,its working..have u added Jsoup library?"},{"owner":{"account_id":12304123,"reputation":14662,"user_id":8977696,"display_name":"Arvind Chourasiya"},"score":0,"creation_date":1526994440,"post_id":50251940,"comment_id":87950132,"body_markdown":"Above issue has been solve by using code under `AsyncTask` class. But the line `document.getElementsContainingOwnText(&quot;Current Version&quot;);` returning value _&lt;div class=&quot;BgcNfc&quot;&gt;Current Version&lt;/div&gt;_. so I think there is not meaning going ahead. I am using Xamarin.android.","body":"Above issue has been solve by using code under <code>AsyncTask</code> class. But the line <code>document.getElementsContainingOwnText(&quot;Current Version&quot;);</code> returning value <i>&lt;div class=&quot;BgcNfc&quot;&gt;Current Version&lt;/div&gt;</i>. so I think there is not meaning going ahead. I am using Xamarin.android."},{"owner":{"account_id":10726753,"reputation":1120,"user_id":7894033,"display_name":"Rajesh Naddy"},"score":0,"creation_date":1526994885,"post_id":50251940,"comment_id":87950428,"body_markdown":"@PriyankaAgrawal might be mainThread() issue.Thanks for pointing out, i have developed it in Android Studio no idea on Xamarin..","body":"@PriyankaAgrawal might be mainThread() issue.Thanks for pointing out, i have developed it in Android Studio no idea on Xamarin.."}],"tags":[],"owner":{"account_id":10726753,"reputation":1120,"user_id":7894033,"display_name":"Rajesh Naddy"},"comment_count":4,"down_vote_count":0,"up_vote_count":20,"is_accepted":true,"score":20,"last_activity_date":1525873726,"creation_date":1525864183,"answer_id":50251940,"question_id":7298106,"body_markdown":"Google updated play store two months before.\r\nThis is the solution working right now for me..\r\n\r\n\r\n    class GetVersionCode extends AsyncTask&lt;Void, String, String&gt; {\r\n\r\n        @Override\r\n\r\n        protected String doInBackground(Void... voids) {\r\n\r\n            String newVersion = null;\r\n\r\n            try {\r\n                Document document = Jsoup.connect(&quot;https://play.google.com/store/apps/details?id=&quot; + MainActivity.this.getPackageName()  + &quot;&amp;hl=en&quot;)\r\n                        .timeout(30000)\r\n                        .userAgent(&quot;Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6&quot;)\r\n                        .referrer(&quot;http://www.google.com&quot;)\r\n                        .get();\r\n                if (document != null) {\r\n                    Elements element = document.getElementsContainingOwnText(&quot;Current Version&quot;);\r\n                    for (Element ele : element) {\r\n                        if (ele.siblingElements() != null) {\r\n                            Elements sibElemets = ele.siblingElements();\r\n                            for (Element sibElemet : sibElemets) {\r\n                                newVersion = sibElemet.text();\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n            return newVersion;\r\n\r\n        }\r\n\r\n\r\n        @Override\r\n\r\n        protected void onPostExecute(String onlineVersion) {\r\n\r\n            super.onPostExecute(onlineVersion);\r\n\r\n            if (onlineVersion != null &amp;&amp; !onlineVersion.isEmpty()) {\r\n\r\n                if (Float.valueOf(currentVersion) &lt; Float.valueOf(onlineVersion)) {\r\n                    //show anything\r\n                }\r\n\r\n            }\r\n\r\n            Log.d(&quot;update&quot;, &quot;Current version &quot; + currentVersion + &quot;playstore version &quot; + onlineVersion);\r\n\r\n        }\r\n    }\r\n\r\nand don&#39;t forget to add JSoup library\r\n\r\n    dependencies {\r\n    compile &#39;org.jsoup:jsoup:1.8.3&#39;}\r\n\r\nand on Oncreate()\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n      \r\n        String currentVersion;\r\n        try {\r\n            currentVersion = getPackageManager().getPackageInfo(getPackageName(), 0).versionName;\r\n        } catch (PackageManager.NameNotFoundException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        new GetVersionCode().execute();\r\n        \r\n    }\r\n\r\nthat&#39;s it..\r\nThanks to [this link][1]\r\n\r\n\r\n  [1]: https://mobikul.com/get-current-version-application-playstore/","title":"How to allow users to check for the latest app version from inside the app?","body":"<p>Google updated play store two months before.\nThis is the solution working right now for me..</p>\n\n<pre><code>class GetVersionCode extends AsyncTask&lt;Void, String, String&gt; {\n\n    @Override\n\n    protected String doInBackground(Void... voids) {\n\n        String newVersion = null;\n\n        try {\n            Document document = Jsoup.connect(\"https://play.google.com/store/apps/details?id=\" + MainActivity.this.getPackageName()  + \"&amp;hl=en\")\n                    .timeout(30000)\n                    .userAgent(\"Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6\")\n                    .referrer(\"http://www.google.com\")\n                    .get();\n            if (document != null) {\n                Elements element = document.getElementsContainingOwnText(\"Current Version\");\n                for (Element ele : element) {\n                    if (ele.siblingElements() != null) {\n                        Elements sibElemets = ele.siblingElements();\n                        for (Element sibElemet : sibElemets) {\n                            newVersion = sibElemet.text();\n                        }\n                    }\n                }\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return newVersion;\n\n    }\n\n\n    @Override\n\n    protected void onPostExecute(String onlineVersion) {\n\n        super.onPostExecute(onlineVersion);\n\n        if (onlineVersion != null &amp;&amp; !onlineVersion.isEmpty()) {\n\n            if (Float.valueOf(currentVersion) &lt; Float.valueOf(onlineVersion)) {\n                //show anything\n            }\n\n        }\n\n        Log.d(\"update\", \"Current version \" + currentVersion + \"playstore version \" + onlineVersion);\n\n    }\n}\n</code></pre>\n\n<p>and don't forget to add JSoup library</p>\n\n<pre><code>dependencies {\ncompile 'org.jsoup:jsoup:1.8.3'}\n</code></pre>\n\n<p>and on Oncreate()</p>\n\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n\n    String currentVersion;\n    try {\n        currentVersion = getPackageManager().getPackageInfo(getPackageName(), 0).versionName;\n    } catch (PackageManager.NameNotFoundException e) {\n        e.printStackTrace();\n    }\n\n    new GetVersionCode().execute();\n\n}\n</code></pre>\n\n<p>that's it..\nThanks to <a href=\"https://mobikul.com/get-current-version-application-playstore/\" rel=\"noreferrer\">this link</a></p>\n"},{"tags":[],"owner":{"account_id":5183364,"reputation":733,"user_id":4148361,"accept_rate":35,"display_name":"Chathz"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1574835122,"creation_date":1574835122,"answer_id":59064080,"question_id":7298106,"body_markdown":"I did using [in-app updates][1]. This will only with devices running Android 5.0 (API level 21) or higher, \r\n\r\n\r\n  [1]: https://developer.android.com/guide/app-bundle/in-app-updates","title":"How to allow users to check for the latest app version from inside the app?","body":"<p>I did using <a href=\"https://developer.android.com/guide/app-bundle/in-app-updates\" rel=\"nofollow noreferrer\">in-app updates</a>. This will only with devices running Android 5.0 (API level 21) or higher, </p>\n"},{"tags":[],"owner":{"account_id":2191637,"reputation":1557,"user_id":1938507,"display_name":"Junaed"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1576334792,"creation_date":1576334792,"answer_id":59336147,"question_id":7298106,"body_markdown":"I know the OP was very old, at that time [in-app-update][1] was not available.\r\nBut from API 21, you can use in-app-update checking.\r\nYou may need to keep your eyes on some points which are nicely written up [here][2]:\r\n\r\n\r\n\r\n  [1]: https://developer.android.com/guide/app-bundle/in-app-updates\r\n  [2]: https://proandroiddev.com/android-in-app-updates-common-pitfalls-and-some-good-patterns-9024988bbbe8","title":"How to allow users to check for the latest app version from inside the app?","body":"<p>I know the OP was very old, at that time <a href=\"https://developer.android.com/guide/app-bundle/in-app-updates\" rel=\"nofollow noreferrer\">in-app-update</a> was not available.\nBut from API 21, you can use in-app-update checking.\nYou may need to keep your eyes on some points which are nicely written up <a href=\"https://proandroiddev.com/android-in-app-updates-common-pitfalls-and-some-good-patterns-9024988bbbe8\" rel=\"nofollow noreferrer\">here</a>:</p>\n"},{"tags":[],"owner":{"account_id":12262673,"reputation":21,"user_id":8949927,"display_name":"zafar Khan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1585318416,"creation_date":1585305117,"answer_id":60884214,"question_id":7298106,"body_markdown":"Here&#39;s how to find the current and latest available versions:\r\n```        \r\n       try {\r\n            String curVersion = getPackageManager().getPackageInfo(getPackageName(), 0).versionName;\r\n            String newVersion = curVersion;\r\n            newVersion = Jsoup.connect(&quot;https://play.google.com/store/apps/details?id=&quot; + getPackageName() + &quot;&amp;hl=en&quot;)\r\n                    .timeout(30000)\r\n                    .userAgent(&quot;Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6&quot;)\r\n                    .referrer(&quot;http://www.google.com&quot;)\r\n                    .get()\r\n                    .select(&quot;div.hAyfc:nth-child(4) .IQ1z0d .htlgb&quot;)\r\n                    .first()\r\n                    .ownText();\r\n            Log.d(&quot;Curr Version&quot; , curVersion);\r\n            Log.d(&quot;New Version&quot; , newVersion);\r\n            \r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            return false;\r\n        }\r\n```","title":"How to allow users to check for the latest app version from inside the app?","body":"<p>Here's how to find the current and latest available versions:</p>\n\n<pre><code>       try {\n            String curVersion = getPackageManager().getPackageInfo(getPackageName(), 0).versionName;\n            String newVersion = curVersion;\n            newVersion = Jsoup.connect(\"https://play.google.com/store/apps/details?id=\" + getPackageName() + \"&amp;hl=en\")\n                    .timeout(30000)\n                    .userAgent(\"Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6\")\n                    .referrer(\"http://www.google.com\")\n                    .get()\n                    .select(\"div.hAyfc:nth-child(4) .IQ1z0d .htlgb\")\n                    .first()\n                    .ownText();\n            Log.d(\"Curr Version\" , curVersion);\n            Log.d(\"New Version\" , newVersion);\n\n        } catch (Exception e) {\n            e.printStackTrace();\n            return false;\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19702319,"reputation":49,"user_id":14424782,"display_name":"Raiyan Shahid"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691537135,"creation_date":1604469601,"answer_id":64674911,"question_id":7298106,"body_markdown":"**We can check Update by Add these Code:**\r\n\r\n*First we need to add dependencies :* \r\n\r\n&gt;  implementation &#39;org.jsoup:jsoup:1.10.2&#39;\r\n\r\n\r\nSecond we need to create Java File:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    import android.app.Activity;\r\n    import android.app.AlertDialog;\r\n    import android.app.ProgressDialog;\r\n    import android.content.DialogInterface;\r\n    import android.content.Intent;\r\n    import android.content.pm.PackageInfo;\r\n    import android.content.pm.PackageManager;\r\n    import android.net.Uri;\r\n    import android.os.AsyncTask;\r\n    import android.widget.Toast;\r\n\r\n    import org.jsoup.Jsoup;\r\n\r\n    public class CurrentVersion{\r\n        private Activity activity;\r\n        public CurrentVersion(Activity activity) {\r\n            this.activity = activity;\r\n        }\r\n        //current version of app installed in the device\r\n    private String getCurrentVersion(){\r\n            PackageManager pm = activity.getPackageManager();\r\n            PackageInfo pInfo = null;\r\n            try {\r\n            pInfo = pm.getPackageInfo(activity.getPackageName(),0);\r\n            } catch (PackageManager.NameNotFoundException e1) {\r\n            e1.printStackTrace();\r\n            }\r\n            return pInfo.versionName;\r\n            }\r\n    private class GetLatestVersion extends AsyncTask&lt;String, String, String&gt; {\r\n        private String latestVersion;\r\n        private ProgressDialog progressDialog;\r\n        private boolean manualCheck;\r\n        GetLatestVersion(boolean manualCheck) {\r\n            this.manualCheck = manualCheck;\r\n        }\r\n        @Override\r\n        protected void onPostExecute(String s) {\r\n            super.onPostExecute(s);\r\n            if (manualCheck)\r\n            {\r\n                if (progressDialog!=null)\r\n                {\r\n                    if (progressDialog.isShowing())\r\n                    {\r\n                        progressDialog.dismiss();\r\n                    }\r\n                }\r\n            }\r\n            String currentVersion = getCurrentVersion();\r\n            //If the versions are not the same\r\n            if(!currentVersion.equals(latestVersion)&amp;&amp;latestVersion!=null){\r\n                final AlertDialog.Builder builder = new AlertDialog.Builder(activity);\r\n                builder.setTitle(&quot;An Update is Available&quot;);\r\n                builder.setMessage(&quot;Its better to update now&quot;);\r\n                builder.setPositiveButton(&quot;Update&quot;, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which) {\r\n                        //Click button action\r\n                        activity.startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(&quot;market://details?id=&quot;+activity.getPackageName())));\r\n                        dialog.dismiss();\r\n                    }\r\n                });\r\n                builder.setCancelable(false);\r\n                builder.show();\r\n            }\r\n            else {\r\n                if (manualCheck) {\r\n                    Toast.makeText(activity, &quot;No Update Available&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n        }\r\n  \r\n        @Override\r\n        protected String doInBackground(String... params) {\r\n            try {\r\n                //It retrieves the latest version by scraping the content of current version from play store at runtime\r\n                latestVersion = Jsoup.connect(&quot;https://play.google.com/store/apps/details?id=&quot; + activity.getPackageName() + &quot;&amp;hl=it&quot;)\r\n                        .timeout(30000)\r\n                        .userAgent(&quot;Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6&quot;)\r\n                        .referrer(&quot;http://www.google.com&quot;)\r\n                        .get()\r\n                        .select(&quot;.hAyfc .htlgb&quot;)\r\n                        .get(7)\r\n                        .ownText();\r\n                return latestVersion;\r\n            } catch (Exception e) {\r\n                return latestVersion;\r\n            }\r\n        }\r\n    }\r\n        public void checkForUpdate(boolean manualCheck)\r\n        {\r\n            new GetLatestVersion(manualCheck).execute();\r\n        }\r\n    }\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n    \r\n*Third We need to add this class in your main class where you want to show the update:*\r\n\r\n    AppUpdateChecker appUpdateChecker=new AppUpdateChecker(this); \r\n    appUpdateChecker.checkForUpdate(false);\r\n\r\n\r\n\r\n\r\n*I hope it will help you*\r\n","title":"How to allow users to check for the latest app version from inside the app?","body":"<p><strong>We can check Update by Add these Code:</strong></p>\n<p><em>First we need to add dependencies :</em></p>\n<blockquote>\n<p>implementation 'org.jsoup:jsoup:1.10.2'</p>\n</blockquote>\n<p>Second we need to create Java File:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import android.app.Activity;\nimport android.app.AlertDialog;\nimport android.app.ProgressDialog;\nimport android.content.DialogInterface;\nimport android.content.Intent;\nimport android.content.pm.PackageInfo;\nimport android.content.pm.PackageManager;\nimport android.net.Uri;\nimport android.os.AsyncTask;\nimport android.widget.Toast;\n\nimport org.jsoup.Jsoup;\n\npublic class CurrentVersion{\n    private Activity activity;\n    public CurrentVersion(Activity activity) {\n        this.activity = activity;\n    }\n    //current version of app installed in the device\nprivate String getCurrentVersion(){\n        PackageManager pm = activity.getPackageManager();\n        PackageInfo pInfo = null;\n        try {\n        pInfo = pm.getPackageInfo(activity.getPackageName(),0);\n        } catch (PackageManager.NameNotFoundException e1) {\n        e1.printStackTrace();\n        }\n        return pInfo.versionName;\n        }\nprivate class GetLatestVersion extends AsyncTask&lt;String, String, String&gt; {\n    private String latestVersion;\n    private ProgressDialog progressDialog;\n    private boolean manualCheck;\n    GetLatestVersion(boolean manualCheck) {\n        this.manualCheck = manualCheck;\n    }\n    @Override\n    protected void onPostExecute(String s) {\n        super.onPostExecute(s);\n        if (manualCheck)\n        {\n            if (progressDialog!=null)\n            {\n                if (progressDialog.isShowing())\n                {\n                    progressDialog.dismiss();\n                }\n            }\n        }\n        String currentVersion = getCurrentVersion();\n        //If the versions are not the same\n        if(!currentVersion.equals(latestVersion)&amp;&amp;latestVersion!=null){\n            final AlertDialog.Builder builder = new AlertDialog.Builder(activity);\n            builder.setTitle(&quot;An Update is Available&quot;);\n            builder.setMessage(&quot;Its better to update now&quot;);\n            builder.setPositiveButton(&quot;Update&quot;, new DialogInterface.OnClickListener() {\n                @Override\n                public void onClick(DialogInterface dialog, int which) {\n                    //Click button action\n                    activity.startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(&quot;market://details?id=&quot;+activity.getPackageName())));\n                    dialog.dismiss();\n                }\n            });\n            builder.setCancelable(false);\n            builder.show();\n        }\n        else {\n            if (manualCheck) {\n                Toast.makeText(activity, &quot;No Update Available&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n    }\n\n    @Override\n    protected String doInBackground(String... params) {\n        try {\n            //It retrieves the latest version by scraping the content of current version from play store at runtime\n            latestVersion = Jsoup.connect(&quot;https://play.google.com/store/apps/details?id=&quot; + activity.getPackageName() + &quot;&amp;hl=it&quot;)\n                    .timeout(30000)\n                    .userAgent(&quot;Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6&quot;)\n                    .referrer(&quot;http://www.google.com&quot;)\n                    .get()\n                    .select(&quot;.hAyfc .htlgb&quot;)\n                    .get(7)\n                    .ownText();\n            return latestVersion;\n        } catch (Exception e) {\n            return latestVersion;\n        }\n    }\n}\n    public void checkForUpdate(boolean manualCheck)\n    {\n        new GetLatestVersion(manualCheck).execute();\n    }\n}\n</code></pre>\n\n<p><em>Third We need to add this class in your main class where you want to show the update:</em></p>\n<pre><code>AppUpdateChecker appUpdateChecker=new AppUpdateChecker(this); \nappUpdateChecker.checkForUpdate(false);\n</code></pre>\n<p><em>I hope it will help you</em></p>\n"},{"tags":[],"owner":{"account_id":13454565,"reputation":3196,"user_id":9708440,"display_name":"Lakpriya Senevirathna"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621520407,"creation_date":1621519107,"answer_id":67621857,"question_id":7298106,"body_markdown":"Using jsoup HTML parser library @ https://jsoup.org/\r\n\r\n    implementation &#39;org.jsoup:jsoup:1.13.1&#39;\r\n\r\nYou can simply create a method for that;\r\n\r\n    private void IsUpdateAvailable() {\r\n        new Thread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                String newversion = &quot;no&quot;;\r\n                String newversiondot = &quot;no&quot;;\r\n                try {\r\n                    newversiondot = Jsoup.connect(&quot;https://play.google.com/store/apps/details?id=&quot; + BuildConfig.APPLICATION_ID + &quot;&amp;hl=en&quot;)\r\n                            .timeout(30000)\r\n                            .userAgent(&quot;Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6&quot;)\r\n                            .referrer(&quot;http://www.google.com&quot;)\r\n                            .get().select(&quot;div.hAyfc:nth-child(4) &gt; span:nth-child(2) &gt; div:nth-child(1) &gt; span:nth-child(1)&quot;)\r\n                            .first()\r\n                            .ownText();\r\n\r\n                    newversion = newversiondot.replaceAll(&quot;[^0-9]&quot;, &quot;&quot;);\r\n\r\n                } catch (IOException e) {\r\n                    Log.d(&quot;TAG NEW&quot;, &quot;run: &quot; + e);\r\n                }\r\n\r\n                final String finalNewversion = newversion;\r\n                final String finalNewversiondot = newversiondot;\r\n                runOnUiThread(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        try {\r\n                            if (Integer.parseInt(finalNewversion) &gt; Integer.parseInt(getApplicationContext().getPackageManager().getPackageInfo(BuildConfig.APPLICATION_ID, 0).versionName.replaceAll(&quot;[^0-9]&quot;, &quot;&quot;))) {\r\n                                showDialog(UsersActivity.this, &quot;Version: &quot;+finalNewversiondot);\r\n                            }\r\n                        } catch (PackageManager.NameNotFoundException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }).start();\r\n    }\r\n","title":"How to allow users to check for the latest app version from inside the app?","body":"<p>Using jsoup HTML parser library @ <a href=\"https://jsoup.org/\" rel=\"nofollow noreferrer\">https://jsoup.org/</a></p>\n<pre><code>implementation 'org.jsoup:jsoup:1.13.1'\n</code></pre>\n<p>You can simply create a method for that;</p>\n<pre><code>private void IsUpdateAvailable() {\n    new Thread(new Runnable() {\n        @Override\n        public void run() {\n            String newversion = &quot;no&quot;;\n            String newversiondot = &quot;no&quot;;\n            try {\n                newversiondot = Jsoup.connect(&quot;https://play.google.com/store/apps/details?id=&quot; + BuildConfig.APPLICATION_ID + &quot;&amp;hl=en&quot;)\n                        .timeout(30000)\n                        .userAgent(&quot;Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6&quot;)\n                        .referrer(&quot;http://www.google.com&quot;)\n                        .get().select(&quot;div.hAyfc:nth-child(4) &gt; span:nth-child(2) &gt; div:nth-child(1) &gt; span:nth-child(1)&quot;)\n                        .first()\n                        .ownText();\n\n                newversion = newversiondot.replaceAll(&quot;[^0-9]&quot;, &quot;&quot;);\n\n            } catch (IOException e) {\n                Log.d(&quot;TAG NEW&quot;, &quot;run: &quot; + e);\n            }\n\n            final String finalNewversion = newversion;\n            final String finalNewversiondot = newversiondot;\n            runOnUiThread(new Runnable() {\n                @Override\n                public void run() {\n                    try {\n                        if (Integer.parseInt(finalNewversion) &gt; Integer.parseInt(getApplicationContext().getPackageManager().getPackageInfo(BuildConfig.APPLICATION_ID, 0).versionName.replaceAll(&quot;[^0-9]&quot;, &quot;&quot;))) {\n                            showDialog(UsersActivity.this, &quot;Version: &quot;+finalNewversiondot);\n                        }\n                    } catch (PackageManager.NameNotFoundException e) {\n                        e.printStackTrace();\n                    }\n                }\n            });\n        }\n    }).start();\n}\n</code></pre>\n"}],"owner":{"account_id":875806,"reputation":12532,"user_id":925480,"accept_rate":87,"display_name":"xDragonZ"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":111614,"favorite_count":0,"down_vote_count":0,"up_vote_count":61,"accepted_answer_id":50251940,"answer_count":12,"score":61,"last_activity_date":1691537171,"creation_date":1315125047,"question_id":7298106,"body_markdown":"I want to add a &quot;Check for update&quot; button in apps so that when someone clicks it, it will display a toast message / progress dialog for checking the app&#39;s version. \r\n\r\nIf new version is found the apps will auto download it to the phone and let user to  manually install the updated apps.\r\n\r\nOr any others method will do as long as it can check for latest version and notify the user to update.\r\n\r\n--------\r\n\r\n**Update:** Now you can do this inside your app using https://developer.android.com/guide/playcore/in-app-updates\r\n","title":"How to allow users to check for the latest app version from inside the app?","body":"<p>I want to add a \"Check for update\" button in apps so that when someone clicks it, it will display a toast message / progress dialog for checking the app's version. </p>\n\n<p>If new version is found the apps will auto download it to the phone and let user to  manually install the updated apps.</p>\n\n<p>Or any others method will do as long as it can check for latest version and notify the user to update.</p>\n\n<hr>\n\n<p><strong>Update:</strong> Now you can do this inside your app using <a href=\"https://developer.android.com/guide/playcore/in-app-updates\" rel=\"noreferrer\">https://developer.android.com/guide/playcore/in-app-updates</a></p>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":6882751,"reputation":698,"user_id":5288966,"accept_rate":84,"display_name":"jesric1029"},"score":0,"creation_date":1441141061,"post_id":32340038,"comment_id":52556100,"body_markdown":"Thanks for that I&#39;m going to use the header and it certainly was informative.","body":"Thanks for that I&#39;m going to use the header and it certainly was informative."}],"tags":[],"owner":{"account_id":1188523,"reputation":14452,"user_id":1161948,"accept_rate":92,"display_name":"ThisClark"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1441228098,"creation_date":1441138011,"answer_id":32340038,"question_id":32334699,"body_markdown":"I have no experience with .ach files, so I&#39;m going off of this resource: [AAP201 - ACH File Formatting][1]\r\n\r\nA record is apparently 94 characters with standard indexes marking sections of data. There are a variety of sections however where the indexes mean different things. This means you probably have to create conditions to not only identify sections or blocks but also handle them differently depending on the content inside. I&#39;ll show two sections I came across, [page 11][1] and [page 19][2], and one snippet of code.\r\n\r\n#File Header Records\r\n\r\n[![enter image description here][3]][3]\r\n\r\nIf your task is simply to break each line into its parts, then it appears you can substring the necessary parts from your line string:\r\n\r\n\tString line = scanner.nextLine();\r\n\tString recordType = \t\t\t\tline.substring(0,1);\r\n\tString priorityCode = \t\t\t\tline.substring(1,2);\r\n\tString immediateDestination = \t\tline.substring(3,12);\r\n\tString immediateOrigin = \t\t\tline.substring(13,22);\r\n\tString fileCreationDate = \t\t\tline.substring(23,28);\r\n\tString fileCreationTime = \t\t\tline.substring(29,32);\r\n\tString fileIdModifier = \t\t\tline.substring(33,34);\r\n\tString recordSize = \t\t\t\tline.substring(34,36);\r\n\tString blockingFactor = \t\t\tline.substring(37,38);\r\n\tString formatCode = \t\t\t\tline.substring(39,40);\r\n\tString immediateDestinationNumber =\tline.substring(40,62);\r\n\tString immediateOriginName = \t\tline.substring(63,85);\r\n\tString referenceCodeO = \t\t\tline.substring(86,93);\r\n\r\nI&#39;ll leave data type parsing up to you - you know, in case you need integers rather than strings or something.\r\n\r\nThere are some important &quot;block&quot; rules on [page 4][4] of the above reference. You&#39;ll have to account for these too probably:\r\n\r\nAn ACH file must be &quot;BLOCKED&quot;&lt;br&gt;\r\n- Contain enough ACH records to form a complete &quot;block&quot; (10 records = 1 block = 940 character)&lt;br&gt;\r\n- All records within each ACH file are counted&lt;br&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* file header, batch header, entry detail, addenda, batch control and file control&lt;br&gt;\r\n – If total number of records do not equal a complete block, &quot;9 filler records&quot; must be added to complete the block&lt;br&gt;\r\n&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* 94 characters of 9&#39;s = One &quot;9 filler record&quot;&lt;br&gt;\r\n\r\n    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999\r\n\r\n#Company Batch Header\r\n\r\n[![enter image description here][5]][5]\r\n\r\nYour problem is growing in size and complexity as you need to set conditions to handle a variety of headers. It&#39;s really beyond the scope of my ability where I sit. It seems you&#39;ve got to get familiar with their documentation and the ACH blocks you&#39;ll be working with.\r\n\r\n\r\n  [1]: https://www.nacha.org/system/files/resources/AAP201%20-%20ACH%20File%20Formatting.pdf#page=11\r\n  [2]: https://www.nacha.org/system/files/resources/AAP201%20-%20ACH%20File%20Formatting.pdf#page=19\r\n  [3]: http://i.stack.imgur.com/wkKLy.png\r\n  [4]: https://www.nacha.org/system/files/resources/AAP201%20-%20ACH%20File%20Formatting.pdf#page=4\r\n  [5]: http://i.stack.imgur.com/AqPSk.png","title":"Assistance with work - Upload file (gui), process file, parse file - Over my head","body":"<p>I have no experience with .ach files, so I'm going off of this resource: <a href=\"https://www.nacha.org/system/files/resources/AAP201%20-%20ACH%20File%20Formatting.pdf#page=11\" rel=\"nofollow noreferrer\">AAP201 - ACH File Formatting</a></p>\n\n<p>A record is apparently 94 characters with standard indexes marking sections of data. There are a variety of sections however where the indexes mean different things. This means you probably have to create conditions to not only identify sections or blocks but also handle them differently depending on the content inside. I'll show two sections I came across, <a href=\"https://www.nacha.org/system/files/resources/AAP201%20-%20ACH%20File%20Formatting.pdf#page=11\" rel=\"nofollow noreferrer\">page 11</a> and <a href=\"https://www.nacha.org/system/files/resources/AAP201%20-%20ACH%20File%20Formatting.pdf#page=19\" rel=\"nofollow noreferrer\">page 19</a>, and one snippet of code.</p>\n\n<h1>File Header Records</h1>\n\n<p><a href=\"https://i.stack.imgur.com/wkKLy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wkKLy.png\" alt=\"enter image description here\"></a></p>\n\n<p>If your task is simply to break each line into its parts, then it appears you can substring the necessary parts from your line string:</p>\n\n<pre><code>String line = scanner.nextLine();\nString recordType =                 line.substring(0,1);\nString priorityCode =               line.substring(1,2);\nString immediateDestination =       line.substring(3,12);\nString immediateOrigin =            line.substring(13,22);\nString fileCreationDate =           line.substring(23,28);\nString fileCreationTime =           line.substring(29,32);\nString fileIdModifier =             line.substring(33,34);\nString recordSize =                 line.substring(34,36);\nString blockingFactor =             line.substring(37,38);\nString formatCode =                 line.substring(39,40);\nString immediateDestinationNumber = line.substring(40,62);\nString immediateOriginName =        line.substring(63,85);\nString referenceCodeO =             line.substring(86,93);\n</code></pre>\n\n<p>I'll leave data type parsing up to you - you know, in case you need integers rather than strings or something.</p>\n\n<p>There are some important \"block\" rules on <a href=\"https://www.nacha.org/system/files/resources/AAP201%20-%20ACH%20File%20Formatting.pdf#page=4\" rel=\"nofollow noreferrer\">page 4</a> of the above reference. You'll have to account for these too probably:</p>\n\n<p>An ACH file must be \"BLOCKED\"<br>\n- Contain enough ACH records to form a complete \"block\" (10 records = 1 block = 940 character)<br>\n- All records within each ACH file are counted<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* file header, batch header, entry detail, addenda, batch control and file control<br>\n – If total number of records do not equal a complete block, \"9 filler records\" must be added to complete the block<br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* 94 characters of 9's = One \"9 filler record\"<br></p>\n\n<pre><code>9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999\n</code></pre>\n\n<h1>Company Batch Header</h1>\n\n<p><a href=\"https://i.stack.imgur.com/AqPSk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AqPSk.png\" alt=\"enter image description here\"></a></p>\n\n<p>Your problem is growing in size and complexity as you need to set conditions to handle a variety of headers. It's really beyond the scope of my ability where I sit. It seems you've got to get familiar with their documentation and the ACH blocks you'll be working with.</p>\n"}],"owner":{"account_id":6882751,"reputation":698,"user_id":5288966,"accept_rate":84,"display_name":"jesric1029"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":282,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":32340038,"answer_count":1,"score":2,"last_activity_date":1691536158,"creation_date":1441118997,"question_id":32334699,"body_markdown":"This is my first post and while I wish it could be something helpful instead I am required to ask for help. I have been given a projcet for work which is a bit out of my depth. The project requires me to create:\r\n\r\nNote that any data used in the question or answers has been sanitized and replaced with dummy sample data.\r\n\r\n1. A GUI where a user can browse for an input a file. (This part is done).\r\n2. A process to take the file (will be .ach or NACHA) and then select lines from that file and write them to a new file based on some conditions. (Some lines will be written once, some more than once). \r\n\r\nI have no real idea how to proceed. I know that I need to read line by line and somehow check for conditions to be met, then loop and check again. I will first share my code so far, then an example of the type of file I need to process. \r\n\r\n\r\n    \r\n    package nacha_batch_project;\r\n    \r\n    import java.awt.BorderLayout;\r\n    import java.awt.Container;\r\n    import java.awt.Font;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import java.io.File;\r\n    import java.io.FileNotFoundException;\r\n    import java.util.Scanner;\r\n    \r\n    import javax.swing.JFileChooser;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    \r\n    \r\n    \r\n    public class NACHAFileReader {\r\n    \r\n    \r\n      public static void main(String args[]) throws Exception{\r\n        JFrame frame = new JFrame(&quot;JFileChooser Popup&quot;);\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        Container contentPane = frame.getContentPane();\r\n    \r\n        final JLabel directoryLabel = new JLabel(&quot; &quot;);\r\n        directoryLabel.setFont(new Font(&quot;Serif&quot;, Font.BOLD | Font.ITALIC, 36));\r\n        contentPane.add(directoryLabel, BorderLayout.NORTH);\r\n    \r\n        final JLabel filenameLabel = new JLabel(&quot; &quot;);\r\n        filenameLabel.setFont(new Font(&quot;Serif&quot;, Font.BOLD | Font.ITALIC, 36));\r\n        contentPane.add(filenameLabel, BorderLayout.SOUTH);\r\n    \r\n        JFileChooser fileChooser = new JFileChooser(&quot;.&quot;);\r\n        fileChooser.setControlButtonsAreShown(false);\r\n        contentPane.add(fileChooser, BorderLayout.CENTER);\r\n    \r\n        ActionListener actionListener = new ActionListener() {\r\n          public void actionPerformed(ActionEvent actionEvent) {\r\n            JFileChooser theFileChooser = (JFileChooser) actionEvent\r\n                .getSource();\r\n            String command = actionEvent.getActionCommand();\r\n            if (command.equals(JFileChooser.APPROVE_SELECTION)) {\r\n              File selectedFile = theFileChooser.getSelectedFile(); \r\n              //Scanner with loop to read lines\r\n              \r\n              try{\r\n            \t  \r\n            \t  Scanner scanner = new Scanner(selectedFile);\r\n            \t  \r\n            \t  int count=0;\r\n            \t  \r\n            \t  while (scanner.hasNextLine()){\r\n            \t\t  \r\n            \t\t  String line = scanner.nextLine();\r\n            \t\t  count++;\r\n            \t\t  System.out.println(line);\r\n            \t\t  \r\n            \t\t  \r\n            \t\t  \r\n            \t  }\r\n            \tSystem.out.println(&quot;Total Line Count: &quot;+count);\r\n            \t  scanner.close();\r\n              }\r\n              catch (FileNotFoundException e){\r\n            \t  \r\n            \t  \r\n            \t  e.printStackTrace();\r\n            \t  \r\n              }\r\n              \r\n            } else if (command.equals(JFileChooser.CANCEL_SELECTION)) {\r\n              directoryLabel.setText(&quot; &quot;);\r\n              filenameLabel.setText(&quot; &quot;);\r\n            }\r\n          }\r\n        };\r\n        fileChooser.addActionListener(actionListener);\r\n    \r\n        frame.pack();\r\n        frame.setVisible(true);  \t\t\r\n        \r\n      \t\t\r\n      \t}\r\n      \r\n    }\r\n\r\n\r\nAn example of a file that I would input would look much like this. \r\n\r\n\r\n    101 0910000438386C094101WELLS Random BANK, NA   EMMAM                  WFD     \r\n    5225Bank Bank AM               5222222222222222 PIT   150810150810   \r\n    62709100038858322223883      0000222222222WW1         Guy1  Name1\r\n    62792932838828392939293      3822222222222223         Guy2  Name2   \r\n    822500000100091000010000000001050000000000005133133497                         \r\n    9000001000001000000010009100001000000000105000000000000                                      99999999999999999999999999999999999999999999999999999999999999999999999999999999\r\n    (More of these lines of 9999)\r\n\r\n\r\n\r\nSo I would need to pull that 500 number and attach the first 627 number as one batch, then for the next batch pull the 500 number again and the second 627 number an so on. \r\n\r\n\r\n\r\nAnyone have any advice on how I could achieve this or at least the direction to take? ","title":"Assistance with work - Upload file (gui), process file, parse file - Over my head","body":"<p>This is my first post and while I wish it could be something helpful instead I am required to ask for help. I have been given a projcet for work which is a bit out of my depth. The project requires me to create:</p>\n<p>Note that any data used in the question or answers has been sanitized and replaced with dummy sample data.</p>\n<ol>\n<li>A GUI where a user can browse for an input a file. (This part is done).</li>\n<li>A process to take the file (will be .ach or NACHA) and then select lines from that file and write them to a new file based on some conditions. (Some lines will be written once, some more than once).</li>\n</ol>\n<p>I have no real idea how to proceed. I know that I need to read line by line and somehow check for conditions to be met, then loop and check again. I will first share my code so far, then an example of the type of file I need to process.</p>\n<pre><code>package nacha_batch_project;\n\nimport java.awt.BorderLayout;\nimport java.awt.Container;\nimport java.awt.Font;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.util.Scanner;\n\nimport javax.swing.JFileChooser;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\n\n\n\npublic class NACHAFileReader {\n\n\n  public static void main(String args[]) throws Exception{\n    JFrame frame = new JFrame(&quot;JFileChooser Popup&quot;);\n    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    Container contentPane = frame.getContentPane();\n\n    final JLabel directoryLabel = new JLabel(&quot; &quot;);\n    directoryLabel.setFont(new Font(&quot;Serif&quot;, Font.BOLD | Font.ITALIC, 36));\n    contentPane.add(directoryLabel, BorderLayout.NORTH);\n\n    final JLabel filenameLabel = new JLabel(&quot; &quot;);\n    filenameLabel.setFont(new Font(&quot;Serif&quot;, Font.BOLD | Font.ITALIC, 36));\n    contentPane.add(filenameLabel, BorderLayout.SOUTH);\n\n    JFileChooser fileChooser = new JFileChooser(&quot;.&quot;);\n    fileChooser.setControlButtonsAreShown(false);\n    contentPane.add(fileChooser, BorderLayout.CENTER);\n\n    ActionListener actionListener = new ActionListener() {\n      public void actionPerformed(ActionEvent actionEvent) {\n        JFileChooser theFileChooser = (JFileChooser) actionEvent\n            .getSource();\n        String command = actionEvent.getActionCommand();\n        if (command.equals(JFileChooser.APPROVE_SELECTION)) {\n          File selectedFile = theFileChooser.getSelectedFile(); \n          //Scanner with loop to read lines\n          \n          try{\n              \n              Scanner scanner = new Scanner(selectedFile);\n              \n              int count=0;\n              \n              while (scanner.hasNextLine()){\n                  \n                  String line = scanner.nextLine();\n                  count++;\n                  System.out.println(line);\n                  \n                  \n                  \n              }\n            System.out.println(&quot;Total Line Count: &quot;+count);\n              scanner.close();\n          }\n          catch (FileNotFoundException e){\n              \n              \n              e.printStackTrace();\n              \n          }\n          \n        } else if (command.equals(JFileChooser.CANCEL_SELECTION)) {\n          directoryLabel.setText(&quot; &quot;);\n          filenameLabel.setText(&quot; &quot;);\n        }\n      }\n    };\n    fileChooser.addActionListener(actionListener);\n\n    frame.pack();\n    frame.setVisible(true);         \n    \n        \n    }\n  \n}\n</code></pre>\n<p>An example of a file that I would input would look much like this.</p>\n<pre><code>101 0910000438386C094101WELLS Random BANK, NA   EMMAM                  WFD     \n5225Bank Bank AM               5222222222222222 PIT   150810150810   \n62709100038858322223883      0000222222222WW1         Guy1  Name1\n62792932838828392939293      3822222222222223         Guy2  Name2   \n822500000100091000010000000001050000000000005133133497                         \n9000001000001000000010009100001000000000105000000000000                                      99999999999999999999999999999999999999999999999999999999999999999999999999999999\n(More of these lines of 9999)\n</code></pre>\n<p>So I would need to pull that 500 number and attach the first 627 number as one batch, then for the next batch pull the 500 number again and the second 627 number an so on.</p>\n<p>Anyone have any advice on how I could achieve this or at least the direction to take?</p>\n"},{"tags":["java","sql","db2","querydsl"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691391947,"post_id":76849215,"comment_id":135479707,"body_markdown":"*but rounding is important for me* Please explain","body":"<i>but rounding is important for me</i> Please explain"},{"owner":{"account_id":19042414,"reputation":71,"user_id":13902217,"display_name":"Jeka_FRI"},"score":0,"creation_date":1691392103,"post_id":76849215,"comment_id":135479734,"body_markdown":"explained this in detail","body":"explained this in detail"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691393300,"post_id":76849215,"comment_id":135479906,"body_markdown":"&quot;Incorrect&quot; in what way?","body":"&quot;Incorrect&quot; in what way?"},{"owner":{"account_id":19042414,"reputation":71,"user_id":13902217,"display_name":"Jeka_FRI"},"score":0,"creation_date":1691393669,"post_id":76849215,"comment_id":135479964,"body_markdown":"explained this in detail","body":"explained this in detail"},{"owner":{"account_id":19042414,"reputation":71,"user_id":13902217,"display_name":"Jeka_FRI"},"score":0,"creation_date":1691394061,"post_id":76849215,"comment_id":135480022,"body_markdown":"Exactly, February and March are the same quarter. The four quarters are: January to March, April to June, July to September, and October to December","body":"Exactly, February and March are the same quarter. The four quarters are: January to March, April to June, July to September, and October to December"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691394158,"post_id":76849215,"comment_id":135480043,"body_markdown":"Sorry that comment was not quite what I meant. It&#39;s an ordering strategy and I don&#39;t see how rounding is relevant","body":"Sorry that comment was not quite what I meant. It&#39;s an ordering strategy and I don&#39;t see how rounding is relevant"},{"owner":{"account_id":19042414,"reputation":71,"user_id":13902217,"display_name":"Jeka_FRI"},"score":0,"creation_date":1691394974,"post_id":76849215,"comment_id":135480194,"body_markdown":"Rounding is necessary because without it, the 4th and 5th months fall into the first quarter, and only the 12th month falls into the fourth quarter","body":"Rounding is necessary because without it, the 4th and 5th months fall into the first quarter, and only the 12th month falls into the fourth quarter"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1691395538,"post_id":76849215,"comment_id":135480286,"body_markdown":"*4th and 5th months fall into the first quarter* Correct. Quartile index 1. *12th month* quartile index 3","body":"<i>4th and 5th months fall into the first quarter</i> Correct. Quartile index 1. <i>12th month</i> quartile index 3"},{"owner":{"account_id":19042414,"reputation":71,"user_id":13902217,"display_name":"Jeka_FRI"},"score":0,"creation_date":1691396282,"post_id":76849215,"comment_id":135480445,"body_markdown":"Then 3th and 4th months have index 1 but 3th month should be 1 quarter and 4th should be 2nd quarter.","body":"Then 3th and 4th months have index 1 but 3th month should be 1 quarter and 4th should be 2nd quarter."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691396731,"post_id":76849215,"comment_id":135480536,"body_markdown":"No, 3rd month March is in quartile 0","body":"No, 3rd month March is in quartile 0"},{"owner":{"account_id":19042414,"reputation":71,"user_id":13902217,"display_name":"Jeka_FRI"},"score":0,"creation_date":1691397137,"post_id":76849215,"comment_id":135480625,"body_markdown":"I agree with you, your logic has sense but I have this data) Updated my question.","body":"I agree with you, your logic has sense but I have this data) Updated my question."}],"answers":[{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691402684,"creation_date":1691402684,"answer_id":76850646,"question_id":76849215,"body_markdown":"I see the problem now I did a demo in pure Java using *your* dates. It&#39;s because `java.time.Month` is *not* zero-indexed. Run the following and note the correction (subtraction, not rounding) makes the results as they should be:\r\n\r\n```\r\nimport java.time.LocalDate;\r\nimport java.time.format.DateTimeFormatter;\r\nimport java.util.Map;\r\nimport java.util.Comparator;\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\nimport static java.util.stream.Collectors.*;\r\n\r\npublic class BirthdayQuartiles {\r\n    record Birthday(String name, String date) {\r\n        static DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;MM/dd/uuuu&quot;);\r\n        final static String bformat = &quot;%s : %s (%s)&quot;;\r\n        LocalDate getAsLocalDate() {\r\n            return LocalDate.parse(date, dtf);\r\n        }\r\n        @Override\r\n        public String toString() {\r\n            return bformat.formatted(name, date, getAsLocalDate().getMonth());\r\n        }\r\n    }\r\n    public static void main(String[] args) throws Exception {\r\n        Birthday[] birthdays = {\r\n            new Birthday(&quot;Charles&quot;, &quot;01/11/2023&quot;),\r\n            new Birthday(&quot;Diana&quot;, &quot;03/30/2023&quot;),\r\n            new Birthday(&quot;Margaret&quot;, &quot;04/29/2023&quot;),\r\n            new Birthday(&quot;Edward&quot;, &quot;03/31/2023&quot;),\r\n            new Birthday(&quot;Beatrice&quot;, &quot;03/30/2023&quot;),\r\n            new Birthday(&quot;William&quot;, &quot;08/18/2023&quot;)\r\n        };\r\n        Map&lt;Integer, List&lt;Birthday&gt;&gt; quartiles = Arrays.stream(birthdays)\r\n            .sorted(Comparator.comparing(Birthday::getAsLocalDate))\r\n            // Adjust key as java.time.Month is NOT zero-indexed\r\n            .collect(groupingBy(b -&gt;(b.getAsLocalDate().getMonth().getValue()-1)/3, toList()));\r\n\r\n        final String quartileFormat = &quot;Birthday(s) in quartile %d: %s%n&quot;;\r\n        quartiles.entrySet().stream()\r\n            .forEach(e -&gt;System.out.println(quartileFormat.formatted(e.getKey(), e.getValue())));  \r\n    }\r\n}\r\n```","title":"QueryDSL: Syntax error parsing during rounding","body":"<p>I see the problem now I did a demo in pure Java using <em>your</em> dates. It's because <code>java.time.Month</code> is <em>not</em> zero-indexed. Run the following and note the correction (subtraction, not rounding) makes the results as they should be:</p>\n<pre><code>import java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\nimport java.util.Map;\nimport java.util.Comparator;\nimport java.util.Arrays;\nimport java.util.List;\nimport static java.util.stream.Collectors.*;\n\npublic class BirthdayQuartiles {\n    record Birthday(String name, String date) {\n        static DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;MM/dd/uuuu&quot;);\n        final static String bformat = &quot;%s : %s (%s)&quot;;\n        LocalDate getAsLocalDate() {\n            return LocalDate.parse(date, dtf);\n        }\n        @Override\n        public String toString() {\n            return bformat.formatted(name, date, getAsLocalDate().getMonth());\n        }\n    }\n    public static void main(String[] args) throws Exception {\n        Birthday[] birthdays = {\n            new Birthday(&quot;Charles&quot;, &quot;01/11/2023&quot;),\n            new Birthday(&quot;Diana&quot;, &quot;03/30/2023&quot;),\n            new Birthday(&quot;Margaret&quot;, &quot;04/29/2023&quot;),\n            new Birthday(&quot;Edward&quot;, &quot;03/31/2023&quot;),\n            new Birthday(&quot;Beatrice&quot;, &quot;03/30/2023&quot;),\n            new Birthday(&quot;William&quot;, &quot;08/18/2023&quot;)\n        };\n        Map&lt;Integer, List&lt;Birthday&gt;&gt; quartiles = Arrays.stream(birthdays)\n            .sorted(Comparator.comparing(Birthday::getAsLocalDate))\n            // Adjust key as java.time.Month is NOT zero-indexed\n            .collect(groupingBy(b -&gt;(b.getAsLocalDate().getMonth().getValue()-1)/3, toList()));\n\n        final String quartileFormat = &quot;Birthday(s) in quartile %d: %s%n&quot;;\n        quartiles.entrySet().stream()\n            .forEach(e -&gt;System.out.println(quartileFormat.formatted(e.getKey(), e.getValue())));  \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19042414,"reputation":71,"user_id":13902217,"display_name":"Jeka_FRI"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691535883,"creation_date":1691535883,"answer_id":76863650,"question_id":76849215,"body_markdown":"Changed sql-template. As it turned out, you need to take out a variable in the template itself :)\r\n\r\n      List&lt;Person&gt; sortedPersons = query.selectFrom(person)\r\n                                       .orderBy(Expressions.dateTemplate(Integer.class, &quot;SQL(&#39;QUARTER(?)&#39;, {0})&quot;, person.birthday.value).asc())\r\n                                        .fetch();","title":"QueryDSL: Syntax error parsing during rounding","body":"<p>Changed sql-template. As it turned out, you need to take out a variable in the template itself :)</p>\n<pre><code>  List&lt;Person&gt; sortedPersons = query.selectFrom(person)\n                                   .orderBy(Expressions.dateTemplate(Integer.class, &quot;SQL('QUARTER(?)', {0})&quot;, person.birthday.value).asc())\n                                    .fetch();\n</code></pre>\n"}],"owner":{"account_id":19042414,"reputation":71,"user_id":13902217,"display_name":"Jeka_FRI"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76863650,"answer_count":2,"score":1,"last_activity_date":1691535883,"creation_date":1691389165,"question_id":76849215,"body_markdown":"    @Embeddable\r\n    public class Birthday {\r\n    \r\n        private LocalDate value;\r\n    \r\n        // Constructors, getters and setters\r\n    }\r\n\r\nEntity:\r\n\r\n    @Entity\r\n    public class Person {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    \r\n        private Birthday birthday;\r\n    \r\n         // Constructors, getters and setters\r\n    }\r\nQuery with deviding by 3: \r\n\r\n    List&lt;Person&gt; sortedPersons = query.selectFrom(person)\r\n                                   .orderBy(person.birthday.value.month().divide(3).ceil().asc())\r\n                                    .fetch();\r\n\r\nQuery using template:\r\n\r\n  \r\n\r\n     List&lt;Person&gt; sortedPersons = query.selectFrom(person)\r\n                                       .orderBy(Expressions.dateTemplate(Integer.class, &quot;QUARTER({0})&quot;, person.birthday.value).asc())\r\n                                        .fetch();\r\n\r\nError:\r\n\r\n    Caused by: org.eclipse.persistence.exceptions.JPQLException:\r\n    Exception Description: Syntax error parsing [select \r\n    from Person person\r\n    order by ceil(extract(month from person.birthday.value) / 3) asc].\r\n    [3165, 3254] The order by item is not a valid expression.\r\n        at org.eclipse.persistence.internal.jpa.jpql.HermesParser.buildException(HermesParser.java:157) ~[com.ibm.websphere.appserver.thirdparty.eclipselink.2.7_1.0.76.jar:?]\r\n        at [internal classes]\r\n        at com.querydsl.jpa.impl.AbstractJPAQuery.createQuery(AbstractJPAQuery.java:101) ~[querydsl-jpa-4.2.2.HL-20230109.202119-8.jar:?]\r\n        at com.querydsl.jpa.impl.AbstractJPAQuery.createQuery(AbstractJPAQuery.java:94) ~[querydsl-jpa-4.2.2.HL-20230109.202119-8.jar:?]\r\n        at com.querydsl.jpa.impl.AbstractJPAQuery.fetch(AbstractJPAQuery.java:201) ~[querydsl-jpa-4.2.2.HL-20230109.202119-8.jar:?]\r\n\r\nBirthday field is stored in the database as DATE\r\n\r\nThe problem is that if I remove method `.ceil()` then everything works great, but rounding is important for me without round up my query return incorrect data (I need to sort by quarter). I tried to use templates for this one but I did not help.\r\n\r\nIf I do not use `.ceil` I have this data with such ordering.\r\n\r\n 1. 01/11/2023\r\n 2. 03/30/2023\r\n 3. 04/29/2023\r\n 4. 03/31/2023\r\n 5. 03/30/2023\r\n 6. 08/18/2023","title":"QueryDSL: Syntax error parsing during rounding","body":"<pre><code>@Embeddable\npublic class Birthday {\n\n    private LocalDate value;\n\n    // Constructors, getters and setters\n}\n</code></pre>\n<p>Entity:</p>\n<pre><code>@Entity\npublic class Person {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private Birthday birthday;\n\n     // Constructors, getters and setters\n}\n</code></pre>\n<p>Query with deviding by 3:</p>\n<pre><code>List&lt;Person&gt; sortedPersons = query.selectFrom(person)\n                               .orderBy(person.birthday.value.month().divide(3).ceil().asc())\n                                .fetch();\n</code></pre>\n<p>Query using template:</p>\n<pre><code> List&lt;Person&gt; sortedPersons = query.selectFrom(person)\n                                   .orderBy(Expressions.dateTemplate(Integer.class, &quot;QUARTER({0})&quot;, person.birthday.value).asc())\n                                    .fetch();\n</code></pre>\n<p>Error:</p>\n<pre><code>Caused by: org.eclipse.persistence.exceptions.JPQLException:\nException Description: Syntax error parsing [select \nfrom Person person\norder by ceil(extract(month from person.birthday.value) / 3) asc].\n[3165, 3254] The order by item is not a valid expression.\n    at org.eclipse.persistence.internal.jpa.jpql.HermesParser.buildException(HermesParser.java:157) ~[com.ibm.websphere.appserver.thirdparty.eclipselink.2.7_1.0.76.jar:?]\n    at [internal classes]\n    at com.querydsl.jpa.impl.AbstractJPAQuery.createQuery(AbstractJPAQuery.java:101) ~[querydsl-jpa-4.2.2.HL-20230109.202119-8.jar:?]\n    at com.querydsl.jpa.impl.AbstractJPAQuery.createQuery(AbstractJPAQuery.java:94) ~[querydsl-jpa-4.2.2.HL-20230109.202119-8.jar:?]\n    at com.querydsl.jpa.impl.AbstractJPAQuery.fetch(AbstractJPAQuery.java:201) ~[querydsl-jpa-4.2.2.HL-20230109.202119-8.jar:?]\n</code></pre>\n<p>Birthday field is stored in the database as DATE</p>\n<p>The problem is that if I remove method <code>.ceil()</code> then everything works great, but rounding is important for me without round up my query return incorrect data (I need to sort by quarter). I tried to use templates for this one but I did not help.</p>\n<p>If I do not use <code>.ceil</code> I have this data with such ordering.</p>\n<ol>\n<li>01/11/2023</li>\n<li>03/30/2023</li>\n<li>04/29/2023</li>\n<li>03/31/2023</li>\n<li>03/30/2023</li>\n<li>08/18/2023</li>\n</ol>\n"},{"tags":["java","spring","spring-mvc","spring-security"],"comments":[{"owner":{"account_id":324114,"reputation":12953,"user_id":644518,"accept_rate":61,"display_name":"ajm"},"score":0,"creation_date":1479917012,"post_id":40768530,"comment_id":68762131,"body_markdown":"@J.West I generally use roles only. But, since, these are entirely different sets of users, we don&#39;t want to keep them together. Admins at max will have 5 columns and customers min will have 20-30 columns. So, you see the difference there.","body":"@J.West I generally use roles only. But, since, these are entirely different sets of users, we don&#39;t want to keep them together. Admins at max will have 5 columns and customers min will have 20-30 columns. So, you see the difference there."},{"owner":{"account_id":4342327,"reputation":145474,"user_id":3545273,"accept_rate":100,"display_name":"Serge Ballesta"},"score":0,"creation_date":1479917269,"post_id":40768530,"comment_id":68762309,"body_markdown":"I do not know what database you will use, but AFAIK with major providers (Oracle, PostgreSQL, MariaDB) there is no harm having many NULL columns in a record.","body":"I do not know what database you will use, but AFAIK with major providers (Oracle, PostgreSQL, MariaDB) there is no harm having many NULL columns in a record."},{"owner":{"account_id":8850640,"reputation":686,"user_id":6610036,"accept_rate":93,"display_name":"Trevor Bye"},"score":1,"creation_date":1479918655,"post_id":40768530,"comment_id":68763260,"body_markdown":"@ashishjmeshram The answer below is what I would suggest doing. Like he is saying, it doesn&#39;t make a difference if you persist an admin user into the same table and leave all the extra columns as `null`. Another issue with multiple login pages is that there will be no way to prevent someone from visiting either URI, and while a user couldn&#39;t login if they weren&#39;t an admin, it would still be confusing if someone landed on that page expecting to be able to login.","body":"@ashishjmeshram The answer below is what I would suggest doing. Like he is saying, it doesn&#39;t make a difference if you persist an admin user into the same table and leave all the extra columns as <code>null</code>. Another issue with multiple login pages is that there will be no way to prevent someone from visiting either URI, and while a user couldn&#39;t login if they weren&#39;t an admin, it would still be confusing if someone landed on that page expecting to be able to login."}],"answers":[{"comments":[{"owner":{"account_id":324114,"reputation":12953,"user_id":644518,"accept_rate":61,"display_name":"ajm"},"score":0,"creation_date":1479980967,"post_id":40769140,"comment_id":68788644,"body_markdown":"There is a slight change now in the requirement. Customer will login using their customer id while admin users will login using the email id. What is the better way now?","body":"There is a slight change now in the requirement. Customer will login using their customer id while admin users will login using the email id. What is the better way now?"},{"owner":{"account_id":4342327,"reputation":145474,"user_id":3545273,"accept_rate":100,"display_name":"Serge Ballesta"},"score":0,"creation_date":1479981530,"post_id":40769140,"comment_id":68789063,"body_markdown":"@ashishjmeshram: IMHO it should not matter. The login form will take an idand a password, and the 2 `AuthenticationProvider`s will try to process them, each taking its one. You can have an auxiliary form for admins with useful comments, but only one shall be the authentication entry point, and both should accept admin or customer credentials.","body":"@ashishjmeshram: IMHO it should not matter. The login form will take an idand a password, and the 2 <code>AuthenticationProvider</code>s will try to process them, each taking its one. You can have an auxiliary form for admins with useful comments, but only one shall be the authentication entry point, and both should accept admin or customer credentials."}],"tags":[],"owner":{"account_id":4342327,"reputation":145474,"user_id":3545273,"accept_rate":100,"display_name":"Serge Ballesta"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1479917524,"creation_date":1479917130,"answer_id":40769140,"question_id":40768530,"body_markdown":"It is really a bad idea to have different login pages for Spring security, because it is not the way it is designed for. You are going to fall into trouble to define the authentication entry point to use and will need a lot of boiling plate. According to your other requirements, I would propose you the following way:\r\n\r\n* use one single login page with one single `AuthenticationManager` (the default `ProviderManager` will be fine)\r\n* configure it with two different `AuthenticationProvider`s, both being `DaoAuthenticationProvider`, each pointing on one of you 2 user tables\r\n* configure those provider to automatically set different roles, ROLE_ADMIN for the former that will process admins, ROLE_USER for the latter\r\n\r\nThat way you fully rely on SpringSecurity infrastructure with as little modifications as possible to meet your requirements.\r\n\r\nBut you should also wonder whether you really need different databases. At least for the major providers (Oracle, PostgreSQL, MariaDB, ...) there is no harm in having many null columns in a record. IMHO you should do a serious analysis to compare both ways, either one single table (much simpler to setup for Spring Security) or two tables.","title":"How to use spring security to authenticate two different types of users?","body":"<p>It is really a bad idea to have different login pages for Spring security, because it is not the way it is designed for. You are going to fall into trouble to define the authentication entry point to use and will need a lot of boiling plate. According to your other requirements, I would propose you the following way:</p>\n\n<ul>\n<li>use one single login page with one single <code>AuthenticationManager</code> (the default <code>ProviderManager</code> will be fine)</li>\n<li>configure it with two different <code>AuthenticationProvider</code>s, both being <code>DaoAuthenticationProvider</code>, each pointing on one of you 2 user tables</li>\n<li>configure those provider to automatically set different roles, ROLE_ADMIN for the former that will process admins, ROLE_USER for the latter</li>\n</ul>\n\n<p>That way you fully rely on SpringSecurity infrastructure with as little modifications as possible to meet your requirements.</p>\n\n<p>But you should also wonder whether you really need different databases. At least for the major providers (Oracle, PostgreSQL, MariaDB, ...) there is no harm in having many null columns in a record. IMHO you should do a serious analysis to compare both ways, either one single table (much simpler to setup for Spring Security) or two tables.</p>\n"},{"comments":[{"owner":{"account_id":22250524,"reputation":181,"user_id":16483521,"display_name":"ServletException"},"score":0,"creation_date":1696269471,"post_id":76863628,"comment_id":136128669,"body_markdown":"Thank you, I tried this since I have multiple User types, but I&#39;m getting a Stackoverflow error when trying to log in. Could you perhaps share your SecurityConfig class please?","body":"Thank you, I tried this since I have multiple User types, but I&#39;m getting a Stackoverflow error when trying to log in. Could you perhaps share your SecurityConfig class please?"},{"owner":{"account_id":12549986,"reputation":1121,"user_id":9487470,"display_name":"Adesuyi Ayodeji"},"score":0,"creation_date":1696361716,"post_id":76863628,"comment_id":136142401,"body_markdown":"I would need to see your code to know what happened in yours @ServletException","body":"I would need to see your code to know what happened in yours @ServletException"},{"owner":{"account_id":22250524,"reputation":181,"user_id":16483521,"display_name":"ServletException"},"score":0,"creation_date":1696616671,"post_id":76863628,"comment_id":136181043,"body_markdown":"I am currently only able to login with either a user or a admin, not both. How did you do your config\n\n    private final MyUserDetailsService myUserDetailsService;\n    private final MyEmployeeDetailsService myEmployeeDetailsService;\n\n    @Bean\n    public AuthenticationProvider authenticationProvider(){\n        DaoAuthenticationProvider authenticationProvider=new DaoAuthenticationProvider();\n        authenticationProvider.setUserDetailsService(myEmployeeDetailsService); \n        authenticationProvider.setPasswordEncoder(passwordEncoder());\n        return authenticationProvider;\n    }","body":"I am currently only able to login with either a user or a admin, not both. How did you do your config      private final MyUserDetailsService myUserDetailsService;     private final MyEmployeeDetailsService myEmployeeDetailsService;      @Bean     public AuthenticationProvider authenticationProvider(){         DaoAuthenticationProvider authenticationProvider=new DaoAuthenticationProvider();         authenticationProvider.setUserDetailsService(myEmployeeDetai&zwnj;&#8203;lsService);          authenticationProvider.setPasswordEncoder(passwordEncoder())&zwnj;&#8203;;         return authenticationProvider;     }"},{"owner":{"account_id":22250524,"reputation":181,"user_id":16483521,"display_name":"ServletException"},"score":0,"creation_date":1696616848,"post_id":76863628,"comment_id":136181068,"body_markdown":"Not getting a stackoverflow error anymore, and I can&#39;t provide the full code bc of the character limit. If I replace the .setUserDetailsService() with an implementation of my own for the User, then only the User can log in, but not an Admin","body":"Not getting a stackoverflow error anymore, and I can&#39;t provide the full code bc of the character limit. If I replace the .setUserDetailsService() with an implementation of my own for the User, then only the User can log in, but not an Admin"},{"owner":{"account_id":12549986,"reputation":1121,"user_id":9487470,"display_name":"Adesuyi Ayodeji"},"score":0,"creation_date":1697096397,"post_id":76863628,"comment_id":136237050,"body_markdown":"Can you invite me to the code or do a teams call so i can help you sort it out? @ServletException","body":"Can you invite me to the code or do a teams call so i can help you sort it out? @ServletException"}],"tags":[],"owner":{"account_id":12549986,"reputation":1121,"user_id":9487470,"display_name":"Adesuyi Ayodeji"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691535424,"creation_date":1691535424,"answer_id":76863628,"question_id":40768530,"body_markdown":"I just came across this question due to a problem I am also facing. Here is how I solved it. A little unconventional but very efficient. So what I did was To create 2 constructors in the UserDetails class that extends the UserDetails. \r\n\r\nOne that takes the Admin user type:\r\n\r\n    public UserDataUserDetails(Admin admin) {\r\n        this.username = admin.getUsername();\r\n        this.pwd = admin.getPassword();\r\n        this.authorities = Arrays.stream(admin.getRole().toString().split(&quot;,&quot;))\r\n                .map(SimpleGrantedAuthority::new)\r\n                .collect(Collectors.toList());\r\n    }\r\n\r\nSecond that takes the Customer user type:\r\n\r\n    public UserDataUserDetails(User user) {\r\n        this.username = user.getUsername();\r\n        this.pwd = user.getPassword();\r\n        this.authorities = Arrays.stream(user.getRole().toString().split(&quot;,&quot;))\r\n                .map(SimpleGrantedAuthority::new)\r\n                .collect(Collectors.toList());\r\n    }\r\n\r\nThen I created 2 identical components that serves individual scenarios as stated in the snippet below. Explanation of the snippets: They are from 2 separate classes that extends UserDetailsService each.\r\n\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        Optional&lt;User&gt; user = userRepository.findByUsernameEquals(username);\r\n        return user.map(UserDataUserDetails::new)\r\n                .orElseThrow(() -&gt; new GeneralErrorResponse(HttpStatus.NOT_FOUND, false, &quot;Invalid User&quot;, new String[]{&quot;User with provided user name, \\&#39;&quot; + username + &quot;\\&#39; not found in our database!&quot;}));\r\n    }\r\n\r\n    @Autowired\r\n    private AdminRepository adminRepository;\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        Optional&lt;Admin&gt; admin = adminRepository.findAdminWithUsername(username);\r\n        return admin.map(UserDataUserDetails::new)\r\n                .orElseThrow(() -&gt; new GeneralErrorResponse(HttpStatus.NOT_FOUND, false, &quot;Invalid User&quot;, new String[]{&quot;User with provided user name, \\&#39;&quot; + username + &quot;\\&#39; not found in our database!&quot;}));\r\n    }\r\n\r\n\r\nSo finally! What you want to do in your JwtAuthenticationFilter is:\r\n\r\n    @Autowired\r\n    private UserModelDetailsService userDetailsService;\r\n    @Autowired\r\n    private AdminModelDetailsService adminModelDetailsService;\r\n\r\n    UserDetails user = null;\r\n            if (type.equals(Role.SUPER.toString()) || type.equals(Role.ADMIN.toString())){\r\n                user = this.adminModelDetailsService.loadUserByUsername(username);\r\n            } else {\r\n                user = this.userDetailsService.loadUserByUsername(username);\r\n            }\r\n\r\n\r\n\r\nI hope this helps","title":"How to use spring security to authenticate two different types of users?","body":"<p>I just came across this question due to a problem I am also facing. Here is how I solved it. A little unconventional but very efficient. So what I did was To create 2 constructors in the UserDetails class that extends the UserDetails.</p>\n<p>One that takes the Admin user type:</p>\n<pre><code>public UserDataUserDetails(Admin admin) {\n    this.username = admin.getUsername();\n    this.pwd = admin.getPassword();\n    this.authorities = Arrays.stream(admin.getRole().toString().split(&quot;,&quot;))\n            .map(SimpleGrantedAuthority::new)\n            .collect(Collectors.toList());\n}\n</code></pre>\n<p>Second that takes the Customer user type:</p>\n<pre><code>public UserDataUserDetails(User user) {\n    this.username = user.getUsername();\n    this.pwd = user.getPassword();\n    this.authorities = Arrays.stream(user.getRole().toString().split(&quot;,&quot;))\n            .map(SimpleGrantedAuthority::new)\n            .collect(Collectors.toList());\n}\n</code></pre>\n<p>Then I created 2 identical components that serves individual scenarios as stated in the snippet below. Explanation of the snippets: They are from 2 separate classes that extends UserDetailsService each.</p>\n<pre><code>@Autowired\nprivate UserRepository userRepository;\n\n@Override\npublic UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n    Optional&lt;User&gt; user = userRepository.findByUsernameEquals(username);\n    return user.map(UserDataUserDetails::new)\n            .orElseThrow(() -&gt; new GeneralErrorResponse(HttpStatus.NOT_FOUND, false, &quot;Invalid User&quot;, new String[]{&quot;User with provided user name, \\'&quot; + username + &quot;\\' not found in our database!&quot;}));\n}\n\n@Autowired\nprivate AdminRepository adminRepository;\n\n@Override\npublic UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n    Optional&lt;Admin&gt; admin = adminRepository.findAdminWithUsername(username);\n    return admin.map(UserDataUserDetails::new)\n            .orElseThrow(() -&gt; new GeneralErrorResponse(HttpStatus.NOT_FOUND, false, &quot;Invalid User&quot;, new String[]{&quot;User with provided user name, \\'&quot; + username + &quot;\\' not found in our database!&quot;}));\n}\n</code></pre>\n<p>So finally! What you want to do in your JwtAuthenticationFilter is:</p>\n<pre><code>@Autowired\nprivate UserModelDetailsService userDetailsService;\n@Autowired\nprivate AdminModelDetailsService adminModelDetailsService;\n\nUserDetails user = null;\n        if (type.equals(Role.SUPER.toString()) || type.equals(Role.ADMIN.toString())){\n            user = this.adminModelDetailsService.loadUserByUsername(username);\n        } else {\n            user = this.userDetailsService.loadUserByUsername(username);\n        }\n</code></pre>\n<p>I hope this helps</p>\n"}],"owner":{"account_id":324114,"reputation":12953,"user_id":644518,"accept_rate":61,"display_name":"ajm"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6736,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1691535424,"creation_date":1479915474,"question_id":40768530,"body_markdown":"In my spring boot application, I will have two different types of users i.e. \r\n\r\n 1. Admin users \r\n 2. customers\r\n\r\nThese users will be stored in two different tables. \r\nThese two tables will have only email id in common. Everything else will be different. \r\n\r\nAlso, the no. of customers will be huge like 1 to 5 Millions customers. While on the other hand, admin users will be very few like less than 10. Hence the two different tables. \r\n\r\nI want to have two different login pages. One at /customer/login for all the customer and another at /admin/login for all the admins. Login details should be authenticated using their respective tables. On login customers should go to /customer/home and admins should go to /admin/home. \r\n\r\nOn logout customer should be redirected to /customer/login and admin to /admin/login\r\n\r\nI am using java config for Spring security. How can this be done in spring security?\r\n\r\nBelow is my configuration for single user which works properly.\r\n\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\r\n    public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n    \t@Autowired\r\n    \tprivate UserDetailsService userDetailsService;\r\n    \r\n        @Autowired\r\n        private AccessDecisionManager accessDecisionManager;\r\n    \r\n        @Autowired\r\n        private ApplicationProperties applicationProperties;\r\n    \r\n        @Bean\r\n        public Integer applicationSessionTimeout(){\r\n            return applicationProperties.getSecurity().getSessionTimeout();\r\n        }\r\n    \r\n        @Bean\r\n        @Autowired\r\n        public AccessDecisionManager accessDecisionManager(AccessDecisionVoterImpl accessDecisionVoter) {\r\n            List&lt;AccessDecisionVoter&lt;?&gt;&gt; accessDecisionVoters = new ArrayList&lt;AccessDecisionVoter&lt;?&gt;&gt;();\r\n            accessDecisionVoters.add(new WebExpressionVoter());\r\n    \t\taccessDecisionVoters.add(new AuthenticatedVoter());\r\n    \t\taccessDecisionVoters.add(accessDecisionVoter);\r\n            UnanimousBased accessDecisionManager = new UnanimousBased(accessDecisionVoters);\r\n    \t\treturn accessDecisionManager;\r\n        }\r\n    \r\n    \t@Override\r\n    \t@Autowired\r\n    \tprotected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n    \t\tauth.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic PasswordEncoder passwordEncoder(){\r\n    \t\tPasswordEncoder passwordEncoder = new PasswordEncoder();\r\n    \t\tpasswordEncoder.setStringDigester(stringDigester());\r\n    \t\treturn passwordEncoder;\r\n    \t}\r\n    \t\r\n    \t@Bean\r\n    \tpublic PooledStringDigester stringDigester() {\r\n    \t\tPooledStringDigester psd = new PooledStringDigester();\r\n    \r\n    \t\tpsd.setPoolSize(2);\r\n    \t\tpsd.setAlgorithm(&quot;SHA-256&quot;);\r\n    \t\tpsd.setIterations(1000);\r\n    \t\tpsd.setSaltSizeBytes(16);\r\n    \t\tpsd.setSaltGenerator(randomSaltGenerator());\r\n    \r\n    \t\treturn psd;\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic RandomSaltGenerator randomSaltGenerator() {\r\n    \t\tRandomSaltGenerator randomSaltGenerator = new RandomSaltGenerator();\r\n    \t\treturn randomSaltGenerator;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void configure(WebSecurity web) throws Exception {\r\n    \t\tweb.ignoring()\r\n    \t\t\t\t.antMatchers(&quot;/static/**&quot;)\r\n    \t\t\t\t.antMatchers(&quot;/i18n/**&quot;);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tprotected void configure(HttpSecurity http) throws Exception {\r\n    \t\thttp\r\n    \t\t\t.exceptionHandling().\r\n    \t\t\t\taccessDeniedPage(&quot;/accessDenied&quot;)\r\n    \t\t\t\t.and()\r\n    \t\t\t.authorizeRequests()\r\n    \t\t\t\t.accessDecisionManager(accessDecisionManager)\r\n    \t\t\t\t.antMatchers(&quot;/login**&quot;).permitAll()\r\n    \t\t\t\t.antMatchers(&quot;/error**&quot;).permitAll()\r\n    \t\t\t\t.antMatchers(&quot;/checkLogin**&quot;).permitAll()\r\n    \t\t\t\t.anyRequest().fullyAuthenticated()\r\n    \t\t\t\t.and()\r\n    \t\t\t.formLogin()\r\n    \t\t\t\t.loginPage(&quot;/login&quot;)\r\n    \t\t\t\t.loginProcessingUrl(&quot;/checkLogin&quot;)\r\n    \t\t\t\t.defaultSuccessUrl(&quot;/home?menu=homeMenuOption&quot;)\r\n                    .failureUrl(&quot;/login?login_error=1&quot;)\r\n    \t\t\t\t.usernameParameter(&quot;username&quot;)\r\n    \t\t\t\t.passwordParameter(&quot;password&quot;)\r\n    \t\t\t\t.permitAll()\r\n    \t\t        .and()\r\n    \t\t\t.logout()\r\n    \t\t\t\t.logoutUrl(&quot;/logout&quot;)\r\n    \t\t\t\t.logoutSuccessHandler(new LogoutSuccessHandlerImpl())\r\n    \t\t\t\t.deleteCookies(&quot;JSESSIONID&quot;)\r\n    \t\t\t\t.invalidateHttpSession(true)\r\n    \t\t\t\t.permitAll()\r\n    \t\t        .and()\r\n                .headers()\r\n    \t\t\t\t.frameOptions()\r\n    \t\t\t\t.disable()\r\n    \t\t    .and()\r\n                    .sessionManagement()\r\n                    .maximumSessions(1);\r\n    \t}\r\n    \r\n    }\r\n\r\nBelow is my UserDetailsService which checks in db for proper authentication.\r\n\r\n        \r\n    @Service(&quot;userDetailsService&quot;)\r\n    public class UserDetailsService implements org.springframework.security.core.userdetails.UserDetailsService {\r\n    \r\n    \tprivate static final Logger log = LoggerFactory.getLogger(UserDetailsService.class);\r\n    \r\n    \t@Autowired\r\n    \tprivate UserService userService;\r\n    \r\n        @Autowired\r\n        private ModuleService moduleService;\r\n    \r\n    \t@Override\r\n    \tpublic UserDetails loadUserByUsername(final String userName) throws UsernameNotFoundException, DataAccessException {\r\n    \t\tlog.debug(&quot;Authenticating : {}&quot;, userName);\r\n    \r\n    \t\tSecurityUser securityUser = null;\r\n    \r\n    \t\ttry {\r\n    \r\n    \t\t\tUser user = userService.findUserByEmail(userName);\r\n    \r\n    \t\t\tif (user != null) {\r\n    \t\t\t\tlog.debug(&quot;User with the username {} FOUND &quot;, userName);\r\n    \t\t\t\tsecurityUser = new SecurityUser(user.getEmail(), user.getPassword(), true, true, true, true, getGrantedAuthorities(user.getRole().getId()));\r\n    \t\t\t\tsecurityUser.setUser(user);\r\n    \t\t\t} else {\r\n    \t\t\t\tlog.debug(&quot;User with the username {}  NOT FOUND&quot;, userName);\r\n    \t\t\t\tthrow new UsernameNotFoundException(&quot;Username not found.&quot;);\r\n    \t\t\t}\r\n            } catch (Exception e) {\r\n    \t\t\tlog.error(e.getMessage(), e);\r\n    \t\t}\r\n    \r\n    \t\treturn securityUser;\r\n    \t}\r\n    \r\n    \tprivate List&lt;GrantedAuthority&gt; getGrantedAuthorities(Long roleId) {\r\n            log.debug(&quot;Populating user authorities&quot;);\r\n    \r\n    \t\tList&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;GrantedAuthority&gt;();\r\n    \t\tList&lt;Module&gt; allModules = moduleService.findAllModules();\r\n    \t\tMap&lt;Long, Module&gt; moduleMap = new HashMap&lt;Long, Module&gt;();\r\n    \r\n    \t\tfor(Module module : allModules){\r\n    \t\t\tmoduleMap.put(module.getModuleId(), module);\r\n    \t\t}\r\n    \r\n    \t\tList&lt;ModuleOperation&gt; moduleOperationList = moduleService.findModuleOperationsByRoleId(roleId);\r\n    \r\n    \t\tfor (ModuleOperation moduleOperation : moduleOperationList) {\r\n    \t\t\tmoduleOperation.setModuleName(moduleMap.get(moduleOperation.getModuleId()).getModuleName());\r\n    \t\t\tauthorities.add(moduleOperation);\r\n    \t\t}\r\n    \r\n    \t\treturn authorities;\r\n    \t}\r\n    }\r\n\r\n\r\n","title":"How to use spring security to authenticate two different types of users?","body":"<p>In my spring boot application, I will have two different types of users i.e. </p>\n\n<ol>\n<li>Admin users </li>\n<li>customers</li>\n</ol>\n\n<p>These users will be stored in two different tables. \nThese two tables will have only email id in common. Everything else will be different. </p>\n\n<p>Also, the no. of customers will be huge like 1 to 5 Millions customers. While on the other hand, admin users will be very few like less than 10. Hence the two different tables. </p>\n\n<p>I want to have two different login pages. One at /customer/login for all the customer and another at /admin/login for all the admins. Login details should be authenticated using their respective tables. On login customers should go to /customer/home and admins should go to /admin/home. </p>\n\n<p>On logout customer should be redirected to /customer/login and admin to /admin/login</p>\n\n<p>I am using java config for Spring security. How can this be done in spring security?</p>\n\n<p>Below is my configuration for single user which works properly.</p>\n\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    private UserDetailsService userDetailsService;\n\n    @Autowired\n    private AccessDecisionManager accessDecisionManager;\n\n    @Autowired\n    private ApplicationProperties applicationProperties;\n\n    @Bean\n    public Integer applicationSessionTimeout(){\n        return applicationProperties.getSecurity().getSessionTimeout();\n    }\n\n    @Bean\n    @Autowired\n    public AccessDecisionManager accessDecisionManager(AccessDecisionVoterImpl accessDecisionVoter) {\n        List&lt;AccessDecisionVoter&lt;?&gt;&gt; accessDecisionVoters = new ArrayList&lt;AccessDecisionVoter&lt;?&gt;&gt;();\n        accessDecisionVoters.add(new WebExpressionVoter());\n        accessDecisionVoters.add(new AuthenticatedVoter());\n        accessDecisionVoters.add(accessDecisionVoter);\n        UnanimousBased accessDecisionManager = new UnanimousBased(accessDecisionVoters);\n        return accessDecisionManager;\n    }\n\n    @Override\n    @Autowired\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder(){\n        PasswordEncoder passwordEncoder = new PasswordEncoder();\n        passwordEncoder.setStringDigester(stringDigester());\n        return passwordEncoder;\n    }\n\n    @Bean\n    public PooledStringDigester stringDigester() {\n        PooledStringDigester psd = new PooledStringDigester();\n\n        psd.setPoolSize(2);\n        psd.setAlgorithm(\"SHA-256\");\n        psd.setIterations(1000);\n        psd.setSaltSizeBytes(16);\n        psd.setSaltGenerator(randomSaltGenerator());\n\n        return psd;\n    }\n\n    @Bean\n    public RandomSaltGenerator randomSaltGenerator() {\n        RandomSaltGenerator randomSaltGenerator = new RandomSaltGenerator();\n        return randomSaltGenerator;\n    }\n\n    @Override\n    public void configure(WebSecurity web) throws Exception {\n        web.ignoring()\n                .antMatchers(\"/static/**\")\n                .antMatchers(\"/i18n/**\");\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n            .exceptionHandling().\n                accessDeniedPage(\"/accessDenied\")\n                .and()\n            .authorizeRequests()\n                .accessDecisionManager(accessDecisionManager)\n                .antMatchers(\"/login**\").permitAll()\n                .antMatchers(\"/error**\").permitAll()\n                .antMatchers(\"/checkLogin**\").permitAll()\n                .anyRequest().fullyAuthenticated()\n                .and()\n            .formLogin()\n                .loginPage(\"/login\")\n                .loginProcessingUrl(\"/checkLogin\")\n                .defaultSuccessUrl(\"/home?menu=homeMenuOption\")\n                .failureUrl(\"/login?login_error=1\")\n                .usernameParameter(\"username\")\n                .passwordParameter(\"password\")\n                .permitAll()\n                .and()\n            .logout()\n                .logoutUrl(\"/logout\")\n                .logoutSuccessHandler(new LogoutSuccessHandlerImpl())\n                .deleteCookies(\"JSESSIONID\")\n                .invalidateHttpSession(true)\n                .permitAll()\n                .and()\n            .headers()\n                .frameOptions()\n                .disable()\n            .and()\n                .sessionManagement()\n                .maximumSessions(1);\n    }\n\n}\n</code></pre>\n\n<p>Below is my UserDetailsService which checks in db for proper authentication.</p>\n\n<pre><code>@Service(\"userDetailsService\")\npublic class UserDetailsService implements org.springframework.security.core.userdetails.UserDetailsService {\n\n    private static final Logger log = LoggerFactory.getLogger(UserDetailsService.class);\n\n    @Autowired\n    private UserService userService;\n\n    @Autowired\n    private ModuleService moduleService;\n\n    @Override\n    public UserDetails loadUserByUsername(final String userName) throws UsernameNotFoundException, DataAccessException {\n        log.debug(\"Authenticating : {}\", userName);\n\n        SecurityUser securityUser = null;\n\n        try {\n\n            User user = userService.findUserByEmail(userName);\n\n            if (user != null) {\n                log.debug(\"User with the username {} FOUND \", userName);\n                securityUser = new SecurityUser(user.getEmail(), user.getPassword(), true, true, true, true, getGrantedAuthorities(user.getRole().getId()));\n                securityUser.setUser(user);\n            } else {\n                log.debug(\"User with the username {}  NOT FOUND\", userName);\n                throw new UsernameNotFoundException(\"Username not found.\");\n            }\n        } catch (Exception e) {\n            log.error(e.getMessage(), e);\n        }\n\n        return securityUser;\n    }\n\n    private List&lt;GrantedAuthority&gt; getGrantedAuthorities(Long roleId) {\n        log.debug(\"Populating user authorities\");\n\n        List&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;GrantedAuthority&gt;();\n        List&lt;Module&gt; allModules = moduleService.findAllModules();\n        Map&lt;Long, Module&gt; moduleMap = new HashMap&lt;Long, Module&gt;();\n\n        for(Module module : allModules){\n            moduleMap.put(module.getModuleId(), module);\n        }\n\n        List&lt;ModuleOperation&gt; moduleOperationList = moduleService.findModuleOperationsByRoleId(roleId);\n\n        for (ModuleOperation moduleOperation : moduleOperationList) {\n            moduleOperation.setModuleName(moduleMap.get(moduleOperation.getModuleId()).getModuleName());\n            authorities.add(moduleOperation);\n        }\n\n        return authorities;\n    }\n}\n</code></pre>\n"},{"tags":["java","lambda"],"answers":[{"comments":[{"owner":{"account_id":8219839,"reputation":393,"user_id":6184793,"accept_rate":100,"display_name":"Pranay"},"score":0,"creation_date":1471240969,"post_id":38949991,"comment_id":65254668,"body_markdown":"So essentially you created another Collector? I could just extend my existing class MyObject to collect this by exposing addA/B() to it. Seems like a good way.","body":"So essentially you created another Collector? I could just extend my existing class MyObject to collect this by exposing addA/B() to it. Seems like a good way."},{"owner":{"account_id":127032,"reputation":42759,"user_id":323924,"accept_rate":77,"display_name":"Cheng Chen"},"score":0,"creation_date":1471241051,"post_id":38949991,"comment_id":65254683,"body_markdown":"@user6184793 Of course you can use an existing class to replace my `Total` class.","body":"@user6184793 Of course you can use an existing class to replace my <code>Total</code> class."},{"owner":{"account_id":953149,"reputation":177303,"user_id":978917,"accept_rate":86,"display_name":"ruakh"},"score":0,"creation_date":1471242162,"post_id":38949991,"comment_id":65255006,"body_markdown":"+1. Note that it&#39;s a good idea to benchmark afterward to see if this approach *actually* performs better than iterating once for A and once for B.","body":"+1. Note that it&#39;s a good idea to benchmark afterward to see if this approach <i>actually</i> performs better than iterating once for A and once for B."},{"owner":{"account_id":8219839,"reputation":393,"user_id":6184793,"accept_rate":100,"display_name":"Pranay"},"score":0,"creation_date":1471273370,"post_id":38949991,"comment_id":65269408,"body_markdown":"@ruakh, This example is simple. Suppose I had a few filters in place. Something like `.stream()..filter(myObj.x())....filter(myObj.y()).collect....).`\n\nThat would definitely mean doing things twice.","body":"@ruakh, This example is simple. Suppose I had a few filters in place. Something like <code>.stream()..filter(myObj.x())....filter(myObj.y()).collect...&zwnj;&#8203;.).</code>  That would definitely mean doing things twice."},{"owner":{"account_id":953149,"reputation":177303,"user_id":978917,"accept_rate":86,"display_name":"ruakh"},"score":0,"creation_date":1471273977,"post_id":38949991,"comment_id":65269801,"body_markdown":"@user6184793: And even so, it&#39;s worth benchmarking to see how much of a difference it really makes. You don&#39;t want to complicate your code for no benefit.","body":"@user6184793: And even so, it&#39;s worth benchmarking to see how much of a difference it really makes. You don&#39;t want to complicate your code for no benefit."}],"tags":[],"owner":{"account_id":127032,"reputation":42759,"user_id":323924,"accept_rate":77,"display_name":"Cheng Chen"},"comment_count":5,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1471241279,"creation_date":1471240700,"answer_id":38949991,"question_id":38949719,"body_markdown":"You need to write another class to store the total values like this:\r\n\r\n    public class Total {\r\n        private int totalA = 0;\r\n        private int totalB = 0;\r\n    \r\n        public void addA(int a) {\r\n            totalA += a;\r\n        }\r\n    \r\n        public void addB(int b) {\r\n            totalB += b;\r\n        }\r\n    \r\n        public int getTotalA() {\r\n            return totalA;\r\n        }\r\n    \r\n        public int getTotalB() {\r\n            return totalB;\r\n        }\r\n    }\r\n\r\nAnd then collect the values using\r\n\r\n    Total total = objects.stream()\r\n            .map(o -&gt; (A) o)\r\n            .collect(Total::new,\r\n                    (t, a) -&gt; {\r\n                        t.addA(a.getA());\r\n                        t.addB(a.getB());\r\n                    },\r\n                    (t1, t2) -&gt; { });\r\n    //check total.getTotalA() and total.getTotalB()\r\n\r\nYou can also use `AbstractMap.SimpleEntry&lt;Integer, Integer&gt;` to replace `Total` to avoid writing a new class, but it&#39;s still kind of weird because A/B are not in a key-value relationship.\r\n","title":"Java Lambda Multiple operations on a single stream","body":"<p>You need to write another class to store the total values like this:</p>\n\n<pre><code>public class Total {\n    private int totalA = 0;\n    private int totalB = 0;\n\n    public void addA(int a) {\n        totalA += a;\n    }\n\n    public void addB(int b) {\n        totalB += b;\n    }\n\n    public int getTotalA() {\n        return totalA;\n    }\n\n    public int getTotalB() {\n        return totalB;\n    }\n}\n</code></pre>\n\n<p>And then collect the values using</p>\n\n<pre><code>Total total = objects.stream()\n        .map(o -&gt; (A) o)\n        .collect(Total::new,\n                (t, a) -&gt; {\n                    t.addA(a.getA());\n                    t.addB(a.getB());\n                },\n                (t1, t2) -&gt; { });\n//check total.getTotalA() and total.getTotalB()\n</code></pre>\n\n<p>You can also use <code>AbstractMap.SimpleEntry&lt;Integer, Integer&gt;</code> to replace <code>Total</code> to avoid writing a new class, but it's still kind of weird because A/B are not in a key-value relationship.</p>\n"},{"comments":[{"owner":{"account_id":8219839,"reputation":393,"user_id":6184793,"accept_rate":100,"display_name":"Pranay"},"score":0,"creation_date":1471273683,"post_id":38950225,"comment_id":65269618,"body_markdown":"Combining two loops is not significantly faster, but if you are doing things like filter(), it will be definitely bad because of doing all the checks twice!","body":"Combining two loops is not significantly faster, but if you are doing things like filter(), it will be definitely bad because of doing all the checks twice!"}],"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1471242280,"creation_date":1471242280,"answer_id":38950225,"question_id":38949719,"body_markdown":"The most optimal probably still would be a for loop. Though the stream alternative has parallelism as option, and is likely to become as efficient soon.\r\nCombining two loops to one is not necessarily faster.\r\n\r\nOne improvement would be to use `int` instead of `Integer`.\r\n\r\n\tList&lt;String&gt; list = Arrays.asList(&quot;tom&quot;,&quot;terry&quot;,&quot;john&quot;,&quot;kevin&quot;,&quot;steve&quot;);\r\n\tint n = list.stream().collect(Collectors.summingInt(String::length));\r\n\tint h = list.stream().collect(Collectors.summingInt(String::hashCode));\r\n\r\n**I favour this solution.**\r\n\r\nIf one would make one loop, there are two alternatives:\r\n\r\n- putting both ints in their own class. You might abuse java.awt.Point class with int x and int y.\r\n- putting both ints in a long. When no overflow, then one can even sum in the loop on the long.\r\n\r\nThe latter:\r\n\r\n\tList&lt;String&gt; list = Arrays.asList(&quot;tom&quot;,&quot;terry&quot;,&quot;john&quot;,&quot;kevin&quot;,&quot;steve&quot;);\r\n\tlong nh = list.stream()\r\n        .collect(Collectors.summingLong((s) -&gt; (s.hashCode() &lt;&lt; 32) | s.length()));\r\n        int n = (int) nh;\r\n        int h = (int) (nh &gt;&gt; 32L);\r\n","title":"Java Lambda Multiple operations on a single stream","body":"<p>The most optimal probably still would be a for loop. Though the stream alternative has parallelism as option, and is likely to become as efficient soon.\nCombining two loops to one is not necessarily faster.</p>\n\n<p>One improvement would be to use <code>int</code> instead of <code>Integer</code>.</p>\n\n<pre><code>List&lt;String&gt; list = Arrays.asList(\"tom\",\"terry\",\"john\",\"kevin\",\"steve\");\nint n = list.stream().collect(Collectors.summingInt(String::length));\nint h = list.stream().collect(Collectors.summingInt(String::hashCode));\n</code></pre>\n\n<p><strong>I favour this solution.</strong></p>\n\n<p>If one would make one loop, there are two alternatives:</p>\n\n<ul>\n<li>putting both ints in their own class. You might abuse java.awt.Point class with int x and int y.</li>\n<li>putting both ints in a long. When no overflow, then one can even sum in the loop on the long.</li>\n</ul>\n\n<p>The latter:</p>\n\n<pre><code>List&lt;String&gt; list = Arrays.asList(\"tom\",\"terry\",\"john\",\"kevin\",\"steve\");\nlong nh = list.stream()\n    .collect(Collectors.summingLong((s) -&gt; (s.hashCode() &lt;&lt; 32) | s.length()));\n    int n = (int) nh;\n    int h = (int) (nh &gt;&gt; 32L);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1691532440,"creation_date":1691530070,"answer_id":76863308,"question_id":38949719,"body_markdown":"If you&#39;re running Java &gt;= 12, this isn&#39;t hard at all to do in a way that&#39;s even compatible with parallel streams (unlike the other answers so far), using [Collectors.teeing()](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Collectors.html#teeing(java.util.stream.Collector,java.util.stream.Collector,java.util.function.BiFunction)) and [Collectors.summingInt()](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Collectors.html#summingInt(java.util.function.ToIntFunction)):\r\n\r\n```\r\nint[] totals = myObject.stream()\r\n   .collect(Collectors.teeing(\r\n      Collectors.summingInt(MyObject::getA),\r\n      Collectors.summingInt(MyObject::getB),\r\n      (a, b) -&gt; new int[] {a, b});\r\n\r\nint sumA = totals[0];\r\nint sumB = totals[1];","title":"Java Lambda Multiple operations on a single stream","body":"<p>If you're running Java &gt;= 12, this isn't hard at all to do in a way that's even compatible with parallel streams (unlike the other answers so far), using <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Collectors.html#teeing(java.util.stream.Collector,java.util.stream.Collector,java.util.function.BiFunction)\" rel=\"nofollow noreferrer\">Collectors.teeing()</a> and <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Collectors.html#summingInt(java.util.function.ToIntFunction)\" rel=\"nofollow noreferrer\">Collectors.summingInt()</a>:</p>\n<pre><code>int[] totals = myObject.stream()\n   .collect(Collectors.teeing(\n      Collectors.summingInt(MyObject::getA),\n      Collectors.summingInt(MyObject::getB),\n      (a, b) -&gt; new int[] {a, b});\n\nint sumA = totals[0];\nint sumB = totals[1];\n</code></pre>\n"}],"owner":{"account_id":8219839,"reputation":393,"user_id":6184793,"accept_rate":100,"display_name":"Pranay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2360,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":38949991,"answer_count":3,"score":6,"last_activity_date":1691534354,"creation_date":1471238749,"question_id":38949719,"body_markdown":"**Scenario:** I have a object with 2 functions --&gt;\r\n\r\n    &lt;Integer&gt; getA(); &lt;Integer&gt; getB();\r\nI have a list of objects, say `List&lt;MyObject&gt; myObject`.\r\n\r\n**Objective** Iterate over the List and get separate sums of A and B&#39;s in the List of object.\r\n\r\n**My Solution** \r\n\r\n`myObject.stream().map(a -&gt; a.getA()).collect(Collectors.summingDouble());`\r\n\r\n    myObject.stream().map(a -&gt; a.getB()).collect(Collectors.summingDouble());\r\n\r\n**The Question:** How can I do both of these at the same time? This way I will not have to iterate twice over the original list. \r\n\r\n\r\n@Edit: I was doing this because some of the filters that I used were of O(n^3). Kind of really bad to do those twice.\r\n\r\nBenchmark : It really matters if it is T or 2T when the program runs for half hour on an i5. This was on much lesser data and if I run on a cluster, my data would be larger too. \r\n\r\nIt does matter if you can do these in one line!.","title":"Java Lambda Multiple operations on a single stream","body":"<p><strong>Scenario:</strong> I have a object with 2 functions --&gt;</p>\n<pre><code>&lt;Integer&gt; getA(); &lt;Integer&gt; getB();\n</code></pre>\n<p>I have a list of objects, say <code>List&lt;MyObject&gt; myObject</code>.</p>\n<p><strong>Objective</strong> Iterate over the List and get separate sums of A and B's in the List of object.</p>\n<p><strong>My Solution</strong></p>\n<p><code>myObject.stream().map(a -&gt; a.getA()).collect(Collectors.summingDouble());</code></p>\n<pre><code>myObject.stream().map(a -&gt; a.getB()).collect(Collectors.summingDouble());\n</code></pre>\n<p><strong>The Question:</strong> How can I do both of these at the same time? This way I will not have to iterate twice over the original list.</p>\n<p>@Edit: I was doing this because some of the filters that I used were of O(n^3). Kind of really bad to do those twice.</p>\n<p>Benchmark : It really matters if it is T or 2T when the program runs for half hour on an i5. This was on much lesser data and if I run on a cluster, my data would be larger too.</p>\n<p>It does matter if you can do these in one line!.</p>\n"},{"tags":["java","sorting","version"],"comments":[{"owner":{"account_id":6583624,"reputation":2702,"user_id":5087125,"display_name":"pvg"},"score":0,"creation_date":1481976596,"post_id":41198379,"comment_id":69596210,"body_markdown":"You want someone to fix something in your code but you don&#39;t even know what the failure is? How do you think anyone can accomplish this? Take a look at http://stackoverflow.com/help/how-to-ask and try to clarify your question","body":"You want someone to fix something in your code but you don&#39;t even know what the failure is? How do you think anyone can accomplish this? Take a look at <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> and try to clarify your question"}],"answers":[{"comments":[{"owner":{"account_id":7198939,"reputation":77,"user_id":5496712,"accept_rate":0,"display_name":"Abhinav Singh"},"score":0,"creation_date":1482004509,"post_id":41200394,"comment_id":69604134,"body_markdown":"Yea, turns out I figured that out just this morning and was making it harder on myself. But I appreciate you replying to my question.","body":"Yea, turns out I figured that out just this morning and was making it harder on myself. But I appreciate you replying to my question."}],"tags":[],"owner":{"account_id":9208386,"reputation":9299,"user_id":6842716,"display_name":"JohnG"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1481990198,"creation_date":1481990198,"answer_id":41200394,"question_id":41198379,"body_markdown":"From your comments in your code above the `specialCompare` method…\r\n\r\n&gt; Meant for when version numbers such as 2 and 2.0 arise. This method\r\n&gt; will make sure to put the smaller version number (in length) first\r\n\r\nSo I am guessing from this that you want the version to be sorted by the length of the version number. Example: from your supplied versions string array you want to sort as below…\r\n\r\n    0\r\n    2\r\n    0.0\r\n    0.1\r\n    1.2\r\n    1.113\r\n    2.0\r\n    0.0.0\r\n    1.1.1\r\n    1.2.1\r\n    2.0.0\r\n    0.0.0.1\r\n\r\nIf this is the case, then you seem to be making this more complicated than it has to be. When you get two versions where the version lengths differ, then the one with the shorter version length should go first. So a simple check on the length of the version split arrays should solve this. If they are the same length, then you need to check each version. There is no need for a `specialCompare` method when the version lengths are the same. Simply check each version and if they are the same, then go to the next version number and so on. As soon as one version is different then you will know what to return. If you go through the whole array then you know all the version numbers are the same.\r\n\r\nBelow is a change to the `compareVersion` method using the logic above. There is no need for a  `specialCompare` method. I am guessing this is what you are looking for.\r\n\r\n\r\n    public static int compareVersion(String version1, String version2)\r\n    {\r\n      String[] arr1 = version1.split(&quot;\\\\.&quot;);\r\n      String[] arr2 = version2.split(&quot;\\\\.&quot;);\r\n      \r\n      if (arr1.length &lt; arr2.length)\r\n         return -1;\r\n      if (arr1.length &gt; arr2.length)\r\n         return 1;\r\n      \r\n      // same number of version &quot;.&quot; dots\r\n      for (int i = 0; i &lt; arr1.length; i++)\r\n      {\r\n         if(Integer.parseInt(arr1[i]) &lt; Integer.parseInt(arr2[i]))\r\n           return -1;\r\n         if(Integer.parseInt(arr1[i]) &gt; Integer.parseInt(arr2[i]))\r\n           return 1;\r\n       }\r\n       // went through all version numbers and they are all the same\r\n       return 0;\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n","title":"Sorting Version Numbers","body":"<p>From your comments in your code above the <code>specialCompare</code> method…</p>\n\n<blockquote>\n  <p>Meant for when version numbers such as 2 and 2.0 arise. This method\n  will make sure to put the smaller version number (in length) first</p>\n</blockquote>\n\n<p>So I am guessing from this that you want the version to be sorted by the length of the version number. Example: from your supplied versions string array you want to sort as below…</p>\n\n<pre><code>0\n2\n0.0\n0.1\n1.2\n1.113\n2.0\n0.0.0\n1.1.1\n1.2.1\n2.0.0\n0.0.0.1\n</code></pre>\n\n<p>If this is the case, then you seem to be making this more complicated than it has to be. When you get two versions where the version lengths differ, then the one with the shorter version length should go first. So a simple check on the length of the version split arrays should solve this. If they are the same length, then you need to check each version. There is no need for a <code>specialCompare</code> method when the version lengths are the same. Simply check each version and if they are the same, then go to the next version number and so on. As soon as one version is different then you will know what to return. If you go through the whole array then you know all the version numbers are the same.</p>\n\n<p>Below is a change to the <code>compareVersion</code> method using the logic above. There is no need for a  <code>specialCompare</code> method. I am guessing this is what you are looking for.</p>\n\n<pre><code>public static int compareVersion(String version1, String version2)\n{\n  String[] arr1 = version1.split(\"\\\\.\");\n  String[] arr2 = version2.split(\"\\\\.\");\n\n  if (arr1.length &lt; arr2.length)\n     return -1;\n  if (arr1.length &gt; arr2.length)\n     return 1;\n\n  // same number of version \".\" dots\n  for (int i = 0; i &lt; arr1.length; i++)\n  {\n     if(Integer.parseInt(arr1[i]) &lt; Integer.parseInt(arr2[i]))\n       return -1;\n     if(Integer.parseInt(arr1[i]) &gt; Integer.parseInt(arr2[i]))\n       return 1;\n   }\n   // went through all version numbers and they are all the same\n   return 0;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10343555,"reputation":41,"user_id":7629176,"display_name":"love adu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1488190869,"creation_date":1488190869,"answer_id":42483184,"question_id":41198379,"body_markdown":"package com.e;\r\n\r\nimport java.util.*;\r\n\r\n/**\r\n * Created by dpc on 17-2-27.\r\n * \r\n */\r\npublic class VersionComparator implements Comparator&lt;String&gt; {\r\n\r\n\t@Override\r\n\tpublic int compare(String o1, String o2) {\r\n\r\n\t\tif (o1 == null &amp;&amp; o2 == null) {\r\n\t\t\treturn 0;\r\n\t\t} else if (o1 == null &amp;&amp; o2 != null) {\r\n\t\t\treturn -1;\r\n\t\t} else if (o1 != null &amp;&amp; o2 == null) {\r\n\t\t\treturn 1;\r\n\t\t} else {\r\n\t\t\tif (o1.length() == 0 &amp;&amp; o2.length() == 0) {\r\n\t\t\t\treturn 0;\r\n\t\t\t} else if (o1.length() == 0 &amp;&amp; o2.length() &gt; 0) {\r\n\t\t\t\treturn -1;\r\n\t\t\t} else if (o1.length() &gt; 0 &amp;&amp; o2.length() == 0) {\r\n\t\t\t\treturn 1;\r\n\t\t\t} else {\r\n\t\t\t\treturn compareVersion(o1, o2);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\r\n\tpublic static int compareVersion(String version1, String version2) {\r\n\t\tString[] arr1 = version1.split(&quot;\\\\.&quot;);\r\n\t\tString[] arr2 = version2.split(&quot;\\\\.&quot;);\r\n\r\n\t\ttry {\r\n\r\n\t\t\tint i = 0;\r\n\t\t\twhile (i &lt; arr1.length || i &lt; arr2.length) {\r\n\t\t\t\tif (i &lt; arr1.length &amp;&amp; i &lt; arr2.length) {\r\n\t\t\t\t\tif (Integer.parseInt(arr1[i]) &lt; Integer.parseInt(arr2[i])) {\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t} else if (Integer.parseInt(arr1[i]) &gt; Integer.parseInt(arr2[i])) {\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t} else if (Integer.parseInt(arr1[i]) == Integer.parseInt(arr2[i])) {\r\n\t\t\t\t\t\tint result = specialCompare(version1, version2);\r\n\t\t\t\t\t\tif (result != 0) {\r\n\t\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (i &lt; arr1.length) {\r\n\t\t\t\t\tif (Integer.parseInt(arr1[i]) != 0) {\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (i &lt; arr2.length) {\r\n\t\t\t\t\tif (Integer.parseInt(arr2[i]) != 0) {\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tpublic static int specialCompare(String str1, String str2) {\r\n\t\tString[] arr1 = str1.split(&quot;\\\\.&quot;);\r\n\t\tString[] arr2 = str2.split(&quot;\\\\.&quot;);\r\n\t\tfor (int i = 1; i &lt; arr1.length; i++) {\r\n\t\t\tif (Integer.parseInt(arr1[i]) != 0) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (int j = 1; j &lt; arr2.length; j++) {\r\n\t\t\tif (Integer.parseInt(arr2[j]) != 0) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (arr1.length &lt; arr2.length) {\r\n\t\t\treturn -1;\r\n\t\t} else {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t// test\r\n\tpublic static List&lt;String&gt; getLowerList(String str, Comparator&lt;String&gt; comparator, List&lt;String&gt; list) {\r\n\t\tif (str == null) {\r\n\t\t\treturn list;\r\n\t\t}\r\n\t\tList&lt;String&gt; newlist = new ArrayList&lt;String&gt;();\r\n\t\tnewlist.add(str);\r\n\t\tnewlist.addAll(list);\r\n\t\t// sort\r\n\t\tCollections.sort(newlist, comparator);\r\n\t\t// search\r\n\t\tint endIndex = Collections.binarySearch(newlist, str);\r\n\t\tif (endIndex &gt;= 0) {\r\n\t\t\t// sublist 0 1\r\n\t\t\treturn newlist.subList(0, endIndex + 1);\r\n\t\t} else {\r\n\t\t\treturn new ArrayList&lt;String&gt;();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tList&lt;String&gt; test1 = Arrays.asList(new String[]{\r\n\t\t\t\t&quot;2.1.1&quot;, &quot;1.21.22&quot;, &quot;1.21.25&quot;, &quot;1.113&quot;, &quot;0.0.0.1&quot;,\r\n\t\t\t\t&quot;2.0.0&quot;, &quot;1.2&quot;, &quot;2.0&quot;, &quot;0.1&quot;, &quot;1.2.1&quot;, &quot;1.1.1&quot;,\r\n\t\t\t\t&quot;11&quot;, &quot;100&quot;, &quot;&quot; + Integer.MAX_VALUE + &quot;.1&quot;, &quot;&quot;,\r\n\t\t\t\t&quot;2.0&quot;, &quot;10.1&quot;});\r\n\r\n\t\tList&lt;String&gt; test2 = Arrays.asList(new String[]{&quot;&quot;, null, &quot;0&quot;, &quot;10.20.100&quot;, &quot;3.1.1&quot;, &quot;9.8&quot;, &quot;10.3.92&quot;});\r\n\r\n\t\tList&lt;String&gt; newlist = new ArrayList&lt;String&gt;();\r\n\t\tnewlist.addAll(test1);\r\n\t\tnewlist.addAll(test2);\r\n\r\n\t\tCollections.sort(newlist, new VersionComparator());\r\n\r\n\t\tVersionComparator compareVersion = new VersionComparator();\r\n\t\tSystem.out.println(newlist);\r\n\r\n\t\tSystem.out.println(getLowerList(&quot;2&quot;, compareVersion, newlist));\r\n\t\tSystem.out.println(getLowerList(&quot;3&quot;, compareVersion, newlist));\r\n\t\tSystem.out.println(getLowerList(&quot;4&quot;, compareVersion, newlist));\r\n\t\tSystem.out.println(getLowerList(&quot;5&quot;, compareVersion, newlist));\r\n\r\n\t}\r\n}\r\n","title":"Sorting Version Numbers","body":"<p>package com.e;</p>\n\n<p>import java.util.*;</p>\n\n<p>/**\n * Created by dpc on 17-2-27.\n * \n */\npublic class VersionComparator implements Comparator {</p>\n\n<pre><code>@Override\npublic int compare(String o1, String o2) {\n\n    if (o1 == null &amp;&amp; o2 == null) {\n        return 0;\n    } else if (o1 == null &amp;&amp; o2 != null) {\n        return -1;\n    } else if (o1 != null &amp;&amp; o2 == null) {\n        return 1;\n    } else {\n        if (o1.length() == 0 &amp;&amp; o2.length() == 0) {\n            return 0;\n        } else if (o1.length() == 0 &amp;&amp; o2.length() &gt; 0) {\n            return -1;\n        } else if (o1.length() &gt; 0 &amp;&amp; o2.length() == 0) {\n            return 1;\n        } else {\n            return compareVersion(o1, o2);\n        }\n    }\n\n\n}\n\n\npublic static int compareVersion(String version1, String version2) {\n    String[] arr1 = version1.split(\"\\\\.\");\n    String[] arr2 = version2.split(\"\\\\.\");\n\n    try {\n\n        int i = 0;\n        while (i &lt; arr1.length || i &lt; arr2.length) {\n            if (i &lt; arr1.length &amp;&amp; i &lt; arr2.length) {\n                if (Integer.parseInt(arr1[i]) &lt; Integer.parseInt(arr2[i])) {\n                    return -1;\n                } else if (Integer.parseInt(arr1[i]) &gt; Integer.parseInt(arr2[i])) {\n                    return 1;\n                } else if (Integer.parseInt(arr1[i]) == Integer.parseInt(arr2[i])) {\n                    int result = specialCompare(version1, version2);\n                    if (result != 0) {\n                        return result;\n                    }\n                }\n            } else if (i &lt; arr1.length) {\n                if (Integer.parseInt(arr1[i]) != 0) {\n                    return 1;\n                }\n            } else if (i &lt; arr2.length) {\n                if (Integer.parseInt(arr2[i]) != 0) {\n                    return -1;\n                }\n            }\n\n            i++;\n        }\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n    return 0;\n}\n\npublic static int specialCompare(String str1, String str2) {\n    String[] arr1 = str1.split(\"\\\\.\");\n    String[] arr2 = str2.split(\"\\\\.\");\n    for (int i = 1; i &lt; arr1.length; i++) {\n        if (Integer.parseInt(arr1[i]) != 0) {\n            return 0;\n        }\n    }\n    for (int j = 1; j &lt; arr2.length; j++) {\n        if (Integer.parseInt(arr2[j]) != 0) {\n            return 0;\n        }\n    }\n    if (arr1.length &lt; arr2.length) {\n        return -1;\n    } else {\n        return 1;\n    }\n}\n\n\n// test\npublic static List&lt;String&gt; getLowerList(String str, Comparator&lt;String&gt; comparator, List&lt;String&gt; list) {\n    if (str == null) {\n        return list;\n    }\n    List&lt;String&gt; newlist = new ArrayList&lt;String&gt;();\n    newlist.add(str);\n    newlist.addAll(list);\n    // sort\n    Collections.sort(newlist, comparator);\n    // search\n    int endIndex = Collections.binarySearch(newlist, str);\n    if (endIndex &gt;= 0) {\n        // sublist 0 1\n        return newlist.subList(0, endIndex + 1);\n    } else {\n        return new ArrayList&lt;String&gt;();\n    }\n}\n\npublic static void main(String[] args) {\n    List&lt;String&gt; test1 = Arrays.asList(new String[]{\n            \"2.1.1\", \"1.21.22\", \"1.21.25\", \"1.113\", \"0.0.0.1\",\n            \"2.0.0\", \"1.2\", \"2.0\", \"0.1\", \"1.2.1\", \"1.1.1\",\n            \"11\", \"100\", \"\" + Integer.MAX_VALUE + \".1\", \"\",\n            \"2.0\", \"10.1\"});\n\n    List&lt;String&gt; test2 = Arrays.asList(new String[]{\"\", null, \"0\", \"10.20.100\", \"3.1.1\", \"9.8\", \"10.3.92\"});\n\n    List&lt;String&gt; newlist = new ArrayList&lt;String&gt;();\n    newlist.addAll(test1);\n    newlist.addAll(test2);\n\n    Collections.sort(newlist, new VersionComparator());\n\n    VersionComparator compareVersion = new VersionComparator();\n    System.out.println(newlist);\n\n    System.out.println(getLowerList(\"2\", compareVersion, newlist));\n    System.out.println(getLowerList(\"3\", compareVersion, newlist));\n    System.out.println(getLowerList(\"4\", compareVersion, newlist));\n    System.out.println(getLowerList(\"5\", compareVersion, newlist));\n\n}\n</code></pre>\n\n<p>}</p>\n"},{"comments":[{"owner":{"account_id":88584,"reputation":7239,"user_id":244911,"accept_rate":29,"display_name":"LE GALL Beno&#238;t"},"score":0,"creation_date":1591966458,"post_id":48946673,"comment_id":110262134,"body_markdown":"Great soluce. It may be a typo, but shouldn&#39;t be ` if (c1 &gt;= &#39;0&#39; &amp;&amp; c1 &lt;= &#39;9&#39; &amp;&amp; c2 &gt;= &#39;0&#39; &amp;&amp; c2 &lt;= &#39;9&#39;)` with a char &#39;0&#39; instead of number 0 for c2 comparison ?","body":"Great soluce. It may be a typo, but shouldn&#39;t be ` if (c1 &gt;= &#39;0&#39; &amp;&amp; c1 &lt;= &#39;9&#39; &amp;&amp; c2 &gt;= &#39;0&#39; &amp;&amp; c2 &lt;= &#39;9&#39;)` with a char &#39;0&#39; instead of number 0 for c2 comparison ?"},{"owner":{"account_id":290028,"reputation":1769,"user_id":7174346,"display_name":"dankirkd"},"score":0,"creation_date":1642706818,"post_id":48946673,"comment_id":125149970,"body_markdown":"Same issue as other answers: it ignore the following rule:\n\n```When major, minor, and patch are equal, a pre-release version has lower precedence than a normal version:\n\nExample: 1.0.0-alpha &lt; 1.0.0.```","body":"Same issue as other answers: it ignore the following rule:  <code>When major, minor, and patch are equal, a pre-release version has lower precedence than a normal version:  Example: 1.0.0-alpha &lt; 1.0.0.</code>"},{"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1642716579,"post_id":48946673,"comment_id":125153444,"body_markdown":"@dankirkd: That wasn&#39;t the question here","body":"@dankirkd: That wasn&#39;t the question here"}],"tags":[],"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"comment_count":3,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1591999088,"creation_date":1519384737,"answer_id":48946673,"question_id":41198379,"body_markdown":"I have recently had a need to do this in a more generic way for arbitrary file names, similar to how Windows Explorer sorts files:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[I wrote a blog post about this][2]. [The idea was inspired by this answer here][3]. The comparator used for ordering files this way looks like this:\r\n\r\n    public final class FilenameComparator implements Comparator&lt;String&gt; {\r\n        private static final Pattern NUMBERS = \r\n            Pattern.compile(&quot;(?&lt;=\\\\D)(?=\\\\d)|(?&lt;=\\\\d)(?=\\\\D)&quot;);\r\n\r\n        @Override \r\n        public final int compare(String o1, String o2) {\r\n            // Optional &quot;NULLS LAST&quot; semantics:\r\n            if (o1 == null || o2 == null)\r\n                return o1 == null ? o2 == null ? 0 : -1 : 1;\r\n            // Splitting both input strings by the above patterns\r\n            String[] split1 = NUMBERS.split(o1);\r\n            String[] split2 = NUMBERS.split(o2);\r\n            for (int i = 0; i &lt; Math.min(split1.length, split2.length); i++) {\r\n                char c1 = split1[i].charAt(0);\r\n                char c2 = split2[i].charAt(0);\r\n                int cmp = 0;\r\n                // If both segments start with a digit, sort them numerically using \r\n                // BigInteger to stay safe\r\n                if (c1 &gt;= &#39;0&#39; &amp;&amp; c1 &lt;= &#39;9&#39; &amp;&amp; c2 &gt;= &#39;0&#39; &amp;&amp; c2 &lt;= &#39;9&#39;)\r\n                    cmp = new BigInteger(split1[i]).compareTo(new BigInteger(split2[i]));\r\n                // If we haven&#39;t sorted numerically before, or if numeric sorting yielded \r\n                // equality (e.g 007 and 7) then sort lexicographically\r\n                if (cmp == 0)\r\n                    cmp = split1[i].compareTo(split2[i]);\r\n                // Abort once some prefix has unequal ordering\r\n                if (cmp != 0)\r\n                    return cmp;\r\n            }\r\n            // If we reach this, then both strings have equally ordered prefixes, but \r\n            // maybe one string is longer than the other (i.e. has more segments)\r\n            return split1.length - split2.length;\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Tpu7R.png\r\n  [2]: https://blog.jooq.org/2018/02/23/how-to-order-file-names-semantically-in-java/\r\n  [3]: https://codereview.stackexchange.com/a/37217/5314","title":"Sorting Version Numbers","body":"<p>I have recently had a need to do this in a more generic way for arbitrary file names, similar to how Windows Explorer sorts files:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Tpu7R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Tpu7R.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://blog.jooq.org/2018/02/23/how-to-order-file-names-semantically-in-java/\" rel=\"nofollow noreferrer\">I wrote a blog post about this</a>. <a href=\"https://codereview.stackexchange.com/a/37217/5314\">The idea was inspired by this answer here</a>. The comparator used for ordering files this way looks like this:</p>\n\n<pre><code>public final class FilenameComparator implements Comparator&lt;String&gt; {\n    private static final Pattern NUMBERS = \n        Pattern.compile(\"(?&lt;=\\\\D)(?=\\\\d)|(?&lt;=\\\\d)(?=\\\\D)\");\n\n    @Override \n    public final int compare(String o1, String o2) {\n        // Optional \"NULLS LAST\" semantics:\n        if (o1 == null || o2 == null)\n            return o1 == null ? o2 == null ? 0 : -1 : 1;\n        // Splitting both input strings by the above patterns\n        String[] split1 = NUMBERS.split(o1);\n        String[] split2 = NUMBERS.split(o2);\n        for (int i = 0; i &lt; Math.min(split1.length, split2.length); i++) {\n            char c1 = split1[i].charAt(0);\n            char c2 = split2[i].charAt(0);\n            int cmp = 0;\n            // If both segments start with a digit, sort them numerically using \n            // BigInteger to stay safe\n            if (c1 &gt;= '0' &amp;&amp; c1 &lt;= '9' &amp;&amp; c2 &gt;= '0' &amp;&amp; c2 &lt;= '9')\n                cmp = new BigInteger(split1[i]).compareTo(new BigInteger(split2[i]));\n            // If we haven't sorted numerically before, or if numeric sorting yielded \n            // equality (e.g 007 and 7) then sort lexicographically\n            if (cmp == 0)\n                cmp = split1[i].compareTo(split2[i]);\n            // Abort once some prefix has unequal ordering\n            if (cmp != 0)\n                return cmp;\n        }\n        // If we reach this, then both strings have equally ordered prefixes, but \n        // maybe one string is longer than the other (i.e. has more segments)\n        return split1.length - split2.length;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3083774,"reputation":53,"user_id":2611409,"display_name":"Bubumuk"},"score":0,"creation_date":1612322595,"post_id":59775278,"comment_id":116728147,"body_markdown":"This is perfect. Thanks!","body":"This is perfect. Thanks!"},{"owner":{"account_id":290028,"reputation":1769,"user_id":7174346,"display_name":"dankirkd"},"score":0,"creation_date":1642704647,"post_id":59775278,"comment_id":125149099,"body_markdown":"This doesn&#39;t support the [Semantic Versioning rules of precedence](https://semver.org/).  Using the VersionNumberComparator referred to in this answer when we want `[1.0.0-alpha, 1.0.0-alpha.1, 1.0.0-alpha.beta, 1.0.0-beta, 1.0.0-beta.2, 1.0.0-beta.11, 1.0.0-rc.1, 1, 1.0, 1.0.0, 2.0.0, 2.2.0, 2.10.0]` we instead get `[1, 1.0, 1.0.0, 1.0.0-alpha, 1.0.0-alpha.1, 1.0.0-alpha.beta, 1.0.0-beta, 1.0.0-beta.2, 1.0.0-beta.11, 1.0.0-rc.1, 2.0.0, 2.2.0, 2.10.0]`","body":"This doesn&#39;t support the <a href=\"https://semver.org/\" rel=\"nofollow noreferrer\">Semantic Versioning rules of precedence</a>.  Using the VersionNumberComparator referred to in this answer when we want <code>[1.0.0-alpha, 1.0.0-alpha.1, 1.0.0-alpha.beta, 1.0.0-beta, 1.0.0-beta.2, 1.0.0-beta.11, 1.0.0-rc.1, 1, 1.0, 1.0.0, 2.0.0, 2.2.0, 2.10.0]</code> we instead get <code>[1, 1.0, 1.0.0, 1.0.0-alpha, 1.0.0-alpha.1, 1.0.0-alpha.beta, 1.0.0-beta, 1.0.0-beta.2, 1.0.0-beta.11, 1.0.0-rc.1, 2.0.0, 2.2.0, 2.10.0]</code>"}],"tags":[],"owner":{"account_id":80013,"reputation":2646,"user_id":226513,"accept_rate":67,"display_name":"Adam"},"comment_count":2,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1579197130,"creation_date":1579197130,"answer_id":59775278,"question_id":41198379,"body_markdown":"I read [Lukas Eder&#39;s blog post][1] in the [comment above][2] and created a `java.util.Comparator` which orders by version (or chapter) number, based on a [JDK proposal][3].\r\n\r\n[`VersionNumberComparator`][4] is defined in a GitHub gist. The follow code shows how it works.\r\n\r\n\timport java.util.ArrayList;\r\n\timport java.util.List;\r\n\r\n\tpublic class JavaTest {\r\n\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tfinal List&lt;String&gt; chapters = new ArrayList&lt;&gt;();\r\n\r\n\t\t\tchapters.add(&quot;1.1&quot;);\r\n\t\t\tchapters.add(&quot;1.2&quot;);\r\n\t\t\tchapters.add(&quot;1&quot;);\r\n\t\t\tchapters.add(&quot;1.3&quot;);\r\n\t\t\tchapters.add(&quot;1.1.1&quot;);\r\n\t\t\tchapters.add(&quot;5.6&quot;);\r\n\t\t\tchapters.add(&quot;1.1.10&quot;);\r\n\t\t\tchapters.add(&quot;4&quot;);\r\n\t\t\tchapters.add(&quot;1.1.9&quot;);\r\n\t\t\tchapters.add(&quot;1.2.1.10&quot;);\r\n\t\t\tchapters.add(&quot;2.1.1.4.5&quot;);\r\n\t\t\tchapters.add(&quot;1.2.1.9&quot;);\r\n\t\t\tchapters.add(&quot;1.2.1&quot;);\r\n\t\t\tchapters.add(&quot;2.2.2&quot;);\r\n\t\t\tchapters.add(&quot;1.2.1.11&quot;);\r\n\t\t\t\r\n\t\t\tSystem.out.println(&quot;UNSORTED: &quot; + chapters.toString());\r\n\r\n\t\t\tchapters.sort(VersionNumberComparator.getInstance());\r\n\t\t\tSystem.out.println(&quot;SORTED:   &quot; + chapters.toString());\r\n\t\t}\r\n\t}\r\n\r\nProduces the following output:\r\n\r\n    UNSORTED: [1.1, 1.2, 1, 1.3, 1.1.1, 5.6, 1.1.10, 4, 1.1.9, 1.2.1.10, 2.1.1.4.5, 1.2.1.9, 1.2.1, 2.2.2, 1.2.1.11]\r\n    SORTED:   [1, 1.1, 1.1.1, 1.1.9, 1.1.10, 1.2, 1.2.1, 1.2.1.9, 1.2.1.10, 1.2.1.11, 1.3, 2.1.1.4.5, 2.2.2, 4, 5.6]\r\n\r\n  [1]: https://blog.jooq.org/2018/02/23/how-to-order-file-names-semantically-in-java/\r\n  [2]: https://stackoverflow.com/a/48946673/226513\r\n  [3]: http://mail.openjdk.java.net/pipermail/core-libs-dev/2017-July/048615.html\r\n  [4]: https://gist.github.com/adamcbuckley/8ccae8b1ede0a65edb1756ea39bb6f2a","title":"Sorting Version Numbers","body":"<p>I read <a href=\"https://blog.jooq.org/2018/02/23/how-to-order-file-names-semantically-in-java/\" rel=\"noreferrer\">Lukas Eder's blog post</a> in the <a href=\"https://stackoverflow.com/a/48946673/226513\">comment above</a> and created a <code>java.util.Comparator</code> which orders by version (or chapter) number, based on a <a href=\"http://mail.openjdk.java.net/pipermail/core-libs-dev/2017-July/048615.html\" rel=\"noreferrer\">JDK proposal</a>.</p>\n\n<p><a href=\"https://gist.github.com/adamcbuckley/8ccae8b1ede0a65edb1756ea39bb6f2a\" rel=\"noreferrer\"><code>VersionNumberComparator</code></a> is defined in a GitHub gist. The follow code shows how it works.</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class JavaTest {\n\n    public static void main(String[] args) {\n        final List&lt;String&gt; chapters = new ArrayList&lt;&gt;();\n\n        chapters.add(\"1.1\");\n        chapters.add(\"1.2\");\n        chapters.add(\"1\");\n        chapters.add(\"1.3\");\n        chapters.add(\"1.1.1\");\n        chapters.add(\"5.6\");\n        chapters.add(\"1.1.10\");\n        chapters.add(\"4\");\n        chapters.add(\"1.1.9\");\n        chapters.add(\"1.2.1.10\");\n        chapters.add(\"2.1.1.4.5\");\n        chapters.add(\"1.2.1.9\");\n        chapters.add(\"1.2.1\");\n        chapters.add(\"2.2.2\");\n        chapters.add(\"1.2.1.11\");\n\n        System.out.println(\"UNSORTED: \" + chapters.toString());\n\n        chapters.sort(VersionNumberComparator.getInstance());\n        System.out.println(\"SORTED:   \" + chapters.toString());\n    }\n}\n</code></pre>\n\n<p>Produces the following output:</p>\n\n<pre><code>UNSORTED: [1.1, 1.2, 1, 1.3, 1.1.1, 5.6, 1.1.10, 4, 1.1.9, 1.2.1.10, 2.1.1.4.5, 1.2.1.9, 1.2.1, 2.2.2, 1.2.1.11]\nSORTED:   [1, 1.1, 1.1.1, 1.1.9, 1.1.10, 1.2, 1.2.1, 1.2.1.9, 1.2.1.10, 1.2.1.11, 1.3, 2.1.1.4.5, 2.2.2, 4, 5.6]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16907692,"reputation":11,"user_id":12227638,"display_name":"Aggelowe"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1631993332,"creation_date":1631993332,"answer_id":69237830,"question_id":41198379,"body_markdown":"If you want to sort some versions (e.g. `0.4.3, 5.3.5, 1.2.4`) you could use my approach which includes using a [java.util.Comparator][1]. To use this you have to use a sorting method (e.g. `Arrays.sort(new String[] {&quot;0.4.3&quot;, &quot;5.3.5&quot;, &quot;1.2.4&quot;}, new VersionComparator())`). The `VersionComparator` class is written below: \r\n\r\n    import java.util.Arrays;\r\n    import java.util.Comparator;\r\n    import java.util.List;\r\n    \r\n    public final class VersionComparator implements Comparator&lt;String&gt; {\r\n    \r\n    \t@Override\r\n    \tpublic int compare(String version1, String version2) {\r\n    \t\tif (checkVersionFormat(version1) == false || checkVersionFormat(version2) == false) {\r\n    \t\t\tSystem.out.println(&quot;One of the given versions uses a false format&quot;);\r\n    \t\t}\r\n    \t\tList&lt;String&gt; firstVersionElements = Arrays.asList(version1.split(&quot;\\\\.&quot;));\r\n    \t\tList&lt;String&gt; secondVersionElements = Arrays.asList(version2.split(&quot;\\\\.&quot;));\r\n    \t\tint maxVersionElements = getMaxNumber(firstVersionElements.size(), secondVersionElements.size(), 0);\r\n    \t\tfor (int counter = 0; counter &lt; maxVersionElements; counter++) {\r\n    \t\t\tif (firstVersionElements.size() == counter &amp;&amp; secondVersionElements.size() == counter) {\r\n    \t\t\t\treturn 0;\r\n    \t\t\t}\r\n    \t\t\tif (firstVersionElements.size() == counter) {\r\n    \t\t\t\treturn 1;\r\n    \t\t\t}\r\n    \t\t\tif (secondVersionElements.size() == counter) {\r\n    \t\t\t\treturn -1;\r\n    \t\t\t}\r\n    \t\t\tint firstIntElement = Integer.valueOf(firstVersionElements.get(counter));\r\n    \t\t\tint secondIntElement = Integer.valueOf(secondVersionElements.get(counter));\r\n    \t\t\tif (firstIntElement &lt; secondIntElement) {\r\n    \t\t\t\treturn 1;\r\n    \t\t\t}\r\n    \t\t\tif (firstIntElement &gt; secondIntElement) {\r\n    \t\t\t\treturn -1;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn 0;\r\n    \t}\r\n    \r\n    \tprivate boolean checkVersionFormat(String version) {\r\n    \t\tString versionCopy = new String(version);\r\n    \t\tString[] validChars = { &quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;.&quot; };\r\n    \t\tfor (String character : validChars) {\r\n    \t\t\tversionCopy = versionCopy.replace(character, &quot;&quot;);\r\n    \t\t}\r\n    \t\treturn versionCopy.equals(&quot;&quot;);\r\n    \t}\r\n    \t\r\n    \tpublic static int getMaxNumber(Integer... ints) {\r\n    \t\tint maximumInt = ints[0];\r\n    \t\tfor (int processInt : ints) {\r\n    \t\t\tif (processInt &gt; maximumInt) {\r\n    \t\t\t\tmaximumInt = processInt;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn maximumInt;\r\n    \t}\r\n    \r\n    }\r\n\r\n[1]: https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html","title":"Sorting Version Numbers","body":"<p>If you want to sort some versions (e.g. <code>0.4.3, 5.3.5, 1.2.4</code>) you could use my approach which includes using a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html\" rel=\"nofollow noreferrer\">java.util.Comparator</a>. To use this you have to use a sorting method (e.g. <code>Arrays.sort(new String[] {&quot;0.4.3&quot;, &quot;5.3.5&quot;, &quot;1.2.4&quot;}, new VersionComparator())</code>). The <code>VersionComparator</code> class is written below:</p>\n<pre><code>import java.util.Arrays;\nimport java.util.Comparator;\nimport java.util.List;\n\npublic final class VersionComparator implements Comparator&lt;String&gt; {\n\n    @Override\n    public int compare(String version1, String version2) {\n        if (checkVersionFormat(version1) == false || checkVersionFormat(version2) == false) {\n            System.out.println(&quot;One of the given versions uses a false format&quot;);\n        }\n        List&lt;String&gt; firstVersionElements = Arrays.asList(version1.split(&quot;\\\\.&quot;));\n        List&lt;String&gt; secondVersionElements = Arrays.asList(version2.split(&quot;\\\\.&quot;));\n        int maxVersionElements = getMaxNumber(firstVersionElements.size(), secondVersionElements.size(), 0);\n        for (int counter = 0; counter &lt; maxVersionElements; counter++) {\n            if (firstVersionElements.size() == counter &amp;&amp; secondVersionElements.size() == counter) {\n                return 0;\n            }\n            if (firstVersionElements.size() == counter) {\n                return 1;\n            }\n            if (secondVersionElements.size() == counter) {\n                return -1;\n            }\n            int firstIntElement = Integer.valueOf(firstVersionElements.get(counter));\n            int secondIntElement = Integer.valueOf(secondVersionElements.get(counter));\n            if (firstIntElement &lt; secondIntElement) {\n                return 1;\n            }\n            if (firstIntElement &gt; secondIntElement) {\n                return -1;\n            }\n        }\n        return 0;\n    }\n\n    private boolean checkVersionFormat(String version) {\n        String versionCopy = new String(version);\n        String[] validChars = { &quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;.&quot; };\n        for (String character : validChars) {\n            versionCopy = versionCopy.replace(character, &quot;&quot;);\n        }\n        return versionCopy.equals(&quot;&quot;);\n    }\n    \n    public static int getMaxNumber(Integer... ints) {\n        int maximumInt = ints[0];\n        for (int processInt : ints) {\n            if (processInt &gt; maximumInt) {\n                maximumInt = processInt;\n            }\n        }\n        return maximumInt;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12565192,"reputation":31,"user_id":9862509,"display_name":"Dmitrii Osipov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687445270,"creation_date":1687445270,"answer_id":76533132,"question_id":41198379,"body_markdown":"My simple solution with **null** and **blank** check\r\n\r\n```java\r\nimport java.util.Arrays;\r\nimport java.util.Comparator;\r\nimport java.util.List;\r\n\r\npublic class AppVersionComparator implements Comparator&lt;String&gt; {\r\n\r\n    private final String delimiterRegex;\r\n\r\n    public AppVersionComparator() {\r\n        delimiterRegex = &quot;\\\\.&quot;;\r\n    }\r\n\r\n    public AppVersionComparator(String delimiterRegex) {\r\n        this.delimiterRegex = delimiterRegex;\r\n    }\r\n\r\n    @Override\r\n    public int compare(String s, String t1) {\r\n        if (!isNullOrBlank(s) &amp;&amp; isNullOrBlank(t1)) return 1;\r\n        if (isNullOrBlank(s) &amp;&amp; !isNullOrBlank(t1)) return -1;\r\n        if (isNullOrBlank(s) &amp;&amp; isNullOrBlank(t1)) return 0;\r\n\r\n        final var sourceSplit = Arrays.stream(s.split(delimiterRegex)).map(Long::valueOf).toList();\r\n        final var targetSplit = Arrays.stream(t1.split(delimiterRegex)).map(Long::valueOf).toList();\r\n\r\n        var i = 0;\r\n        while (i &lt;= sourceSplit.size() || i &lt;= targetSplit.size()) {\r\n            var sourceValue = getOrZero(sourceSplit, i);\r\n            var targetValue = getOrZero(targetSplit, i);\r\n            \r\n            if (sourceValue &gt; targetValue) {\r\n                return 1;\r\n            }\r\n            if (sourceValue &lt; targetValue) {\r\n                return -1;\r\n            }\r\n            i++;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    private Long getOrZero(List&lt;Long&gt; list, Integer i) {\r\n        if (i &gt;= 0 &amp;&amp; i &lt; list.size()) {\r\n            return list.get(i);\r\n        }\r\n        return 0L;\r\n    }\r\n\r\n    private boolean isNullOrBlank(String s) {\r\n        return s == null || s.isBlank();\r\n    }\r\n}\r\n\r\n```","title":"Sorting Version Numbers","body":"<p>My simple solution with <strong>null</strong> and <strong>blank</strong> check</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Arrays;\nimport java.util.Comparator;\nimport java.util.List;\n\npublic class AppVersionComparator implements Comparator&lt;String&gt; {\n\n    private final String delimiterRegex;\n\n    public AppVersionComparator() {\n        delimiterRegex = &quot;\\\\.&quot;;\n    }\n\n    public AppVersionComparator(String delimiterRegex) {\n        this.delimiterRegex = delimiterRegex;\n    }\n\n    @Override\n    public int compare(String s, String t1) {\n        if (!isNullOrBlank(s) &amp;&amp; isNullOrBlank(t1)) return 1;\n        if (isNullOrBlank(s) &amp;&amp; !isNullOrBlank(t1)) return -1;\n        if (isNullOrBlank(s) &amp;&amp; isNullOrBlank(t1)) return 0;\n\n        final var sourceSplit = Arrays.stream(s.split(delimiterRegex)).map(Long::valueOf).toList();\n        final var targetSplit = Arrays.stream(t1.split(delimiterRegex)).map(Long::valueOf).toList();\n\n        var i = 0;\n        while (i &lt;= sourceSplit.size() || i &lt;= targetSplit.size()) {\n            var sourceValue = getOrZero(sourceSplit, i);\n            var targetValue = getOrZero(targetSplit, i);\n            \n            if (sourceValue &gt; targetValue) {\n                return 1;\n            }\n            if (sourceValue &lt; targetValue) {\n                return -1;\n            }\n            i++;\n        }\n        return 0;\n    }\n\n    private Long getOrZero(List&lt;Long&gt; list, Integer i) {\n        if (i &gt;= 0 &amp;&amp; i &lt; list.size()) {\n            return list.get(i);\n        }\n        return 0L;\n    }\n\n    private boolean isNullOrBlank(String s) {\n        return s == null || s.isBlank();\n    }\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29153376,"reputation":1,"user_id":22333729,"display_name":"sh0dan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691534111,"creation_date":1691074148,"answer_id":76829224,"question_id":41198379,"body_markdown":"I solved the problem this way (in Kotlin, should work in any language though):\r\n```\r\nlistOf(\r\n  &quot;0&quot;,\r\n  &quot;2&quot;,\r\n  &quot;0.0&quot;,\r\n  &quot;0.1&quot;,\r\n  &quot;1.2&quot;,\r\n  &quot;1.113&quot;,\r\n  &quot;2.0&quot;,\r\n  &quot;0.0.0&quot;,\r\n  &quot;1.1.1&quot;,\r\n  &quot;1.2.1&quot;,\r\n  &quot;2.0.0&quot;,\r\n  &quot;12.1.0&quot;,\r\n  &quot;11.0.1&quot;,\r\n  &quot;0.0.0.1&quot;\r\n)\r\n.sortedBy {\r\n    it.split(&quot;.&quot;).map { it.padStart(10, &#39;0&#39;) }.joinToString(&quot;.&quot;)\r\n}\r\n```\r\nResult is:\r\n\r\n```\r\n0\r\n0.0\r\n0.0.0\r\n0.0.0.1\r\n0.1\r\n1.1.1\r\n1.2\r\n1.2.1\r\n1.113\r\n2\r\n2.0\r\n2.0.0\r\n11.0.1\r\n12.1.0\r\n```\r\nI have to admit it&#39;s a bit dirty but for me it does the trick and it is very short. Limitation: the version parts should not have more than 10 digits, but you can increase the padding for your needs.","title":"Sorting Version Numbers","body":"<p>I solved the problem this way (in Kotlin, should work in any language though):</p>\n<pre><code>listOf(\n  &quot;0&quot;,\n  &quot;2&quot;,\n  &quot;0.0&quot;,\n  &quot;0.1&quot;,\n  &quot;1.2&quot;,\n  &quot;1.113&quot;,\n  &quot;2.0&quot;,\n  &quot;0.0.0&quot;,\n  &quot;1.1.1&quot;,\n  &quot;1.2.1&quot;,\n  &quot;2.0.0&quot;,\n  &quot;12.1.0&quot;,\n  &quot;11.0.1&quot;,\n  &quot;0.0.0.1&quot;\n)\n.sortedBy {\n    it.split(&quot;.&quot;).map { it.padStart(10, '0') }.joinToString(&quot;.&quot;)\n}\n</code></pre>\n<p>Result is:</p>\n<pre><code>0\n0.0\n0.0.0\n0.0.0.1\n0.1\n1.1.1\n1.2\n1.2.1\n1.113\n2\n2.0\n2.0.0\n11.0.1\n12.1.0\n</code></pre>\n<p>I have to admit it's a bit dirty but for me it does the trick and it is very short. Limitation: the version parts should not have more than 10 digits, but you can increase the padding for your needs.</p>\n"}],"owner":{"account_id":7198939,"reputation":77,"user_id":5496712,"accept_rate":0,"display_name":"Abhinav Singh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11423,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"answer_count":7,"score":4,"last_activity_date":1691534111,"creation_date":1481976164,"question_id":41198379,"body_markdown":"My code below is supposed to sort version numbers into proper order. For the most part it works, but it fails a hidden test case that I don&#39;t have access to. Given that is there any edge case you can see that I might be missing.\r\n\r\n    import java.util.*;\r\n\r\n    public class Answer {   \r\n    public static void main(String[] args)\r\n    {\r\n        //Testing \r\n        String[] versions = {&quot;0.0.0&quot;,&quot;0&quot;,&quot;0.0&quot;,&quot;1.113&quot;,&quot;0.0.0.1&quot;,&quot;2.0.0&quot;,&quot;1.2&quot;,&quot;2&quot;,&quot;0.1&quot;,&quot;1.2.1&quot;,&quot;1.1.1&quot;,&quot;2.0&quot;};\r\n        String[] results = answer(versions);\r\n        for(int i =0; i&lt;results.length;i++)\r\n        {\r\n            System.out.println(results[i]);\r\n        }   \r\n    }\r\n    public static String[] answer(String[] l) { \r\n\r\n        String temp = new String();\r\n        //Insertion sort on the given array to assign correct version numbers\r\n        for (int i = 1; i &lt; l.length; i++) {\r\n            for(int j = i ; j &gt; 0 ; j--){\r\n                if(compareVersion(l[j],l[j-1])&lt;0){\r\n                    temp = l[j];\r\n                    l[j] = l[j-1];\r\n                    l[j-1] = temp;\r\n                }\r\n            }\r\n        }\r\n        return l;\r\n    } \r\n    //Will compare version numbers breaking it apart into a String array\r\n    public static int compareVersion(String version1, String version2) {\r\n    String[] arr1 = version1.split(&quot;\\\\.&quot;);\r\n    String[] arr2 = version2.split(&quot;\\\\.&quot;);\r\n \r\n    int i=0;\r\n    while(i&lt;arr1.length || i&lt;arr2.length){\r\n        if(i&lt;arr1.length &amp;&amp; i&lt;arr2.length){\r\n            if(Integer.parseInt(arr1[i]) &lt; Integer.parseInt(arr2[i])){\r\n                return -1;\r\n            }else if(Integer.parseInt(arr1[i]) &gt; Integer.parseInt(arr2[i])){\r\n                return 1;\r\n            }\r\n            else if(Integer.parseInt(arr1[i]) == Integer.parseInt(arr2[i]))\r\n            {\r\n                int result = specialCompare(version1,version2);\r\n                if(result != 0)\r\n                {\r\n                    return result;\r\n                }\r\n            }\r\n        } else if(i&lt;arr1.length){\r\n            if(Integer.parseInt(arr1[i]) != 0){\r\n                return 1;\r\n            }\r\n        } else if(i&lt;arr2.length){\r\n           if(Integer.parseInt(arr2[i]) != 0){\r\n                return -1;\r\n            }\r\n        }\r\n \r\n        i++;\r\n    }\r\n \r\n    return 0;\r\n    }\r\n      // Meant for when version numbers such as 2 and 2.0 arise. This method will make sure to\r\n      // put the smaller version number ( in length) first\r\n      public static int specialCompare(String str1, String str2)\r\n     {\r\n          String[] arr1 = str1.split(&quot;\\\\.&quot;);\r\n         String[] arr2 = str2.split(&quot;\\\\.&quot;);\r\n         for(int i =1; i&lt;arr1.length;i++)\r\n         {\r\n            if(Integer.parseInt(arr1[i]) != 0)\r\n            {\r\n                return 0;\r\n            }\r\n        }\r\n        for(int j =1; j&lt;arr2.length;j++)\r\n        {\r\n            if(Integer.parseInt(arr2[j]) != 0)\r\n            {\r\n                return 0;\r\n            }\r\n        }\r\n        if(arr1.length &lt; arr2.length)\r\n        {\r\n            return -1;\r\n        }\r\n        else\r\n        {\r\n            return 1;\r\n        }\r\n\r\n    }\r\n    }","title":"Sorting Version Numbers","body":"<p>My code below is supposed to sort version numbers into proper order. For the most part it works, but it fails a hidden test case that I don't have access to. Given that is there any edge case you can see that I might be missing.</p>\n\n<pre><code>import java.util.*;\n\npublic class Answer {   \npublic static void main(String[] args)\n{\n    //Testing \n    String[] versions = {\"0.0.0\",\"0\",\"0.0\",\"1.113\",\"0.0.0.1\",\"2.0.0\",\"1.2\",\"2\",\"0.1\",\"1.2.1\",\"1.1.1\",\"2.0\"};\n    String[] results = answer(versions);\n    for(int i =0; i&lt;results.length;i++)\n    {\n        System.out.println(results[i]);\n    }   \n}\npublic static String[] answer(String[] l) { \n\n    String temp = new String();\n    //Insertion sort on the given array to assign correct version numbers\n    for (int i = 1; i &lt; l.length; i++) {\n        for(int j = i ; j &gt; 0 ; j--){\n            if(compareVersion(l[j],l[j-1])&lt;0){\n                temp = l[j];\n                l[j] = l[j-1];\n                l[j-1] = temp;\n            }\n        }\n    }\n    return l;\n} \n//Will compare version numbers breaking it apart into a String array\npublic static int compareVersion(String version1, String version2) {\nString[] arr1 = version1.split(\"\\\\.\");\nString[] arr2 = version2.split(\"\\\\.\");\n\nint i=0;\nwhile(i&lt;arr1.length || i&lt;arr2.length){\n    if(i&lt;arr1.length &amp;&amp; i&lt;arr2.length){\n        if(Integer.parseInt(arr1[i]) &lt; Integer.parseInt(arr2[i])){\n            return -1;\n        }else if(Integer.parseInt(arr1[i]) &gt; Integer.parseInt(arr2[i])){\n            return 1;\n        }\n        else if(Integer.parseInt(arr1[i]) == Integer.parseInt(arr2[i]))\n        {\n            int result = specialCompare(version1,version2);\n            if(result != 0)\n            {\n                return result;\n            }\n        }\n    } else if(i&lt;arr1.length){\n        if(Integer.parseInt(arr1[i]) != 0){\n            return 1;\n        }\n    } else if(i&lt;arr2.length){\n       if(Integer.parseInt(arr2[i]) != 0){\n            return -1;\n        }\n    }\n\n    i++;\n}\n\nreturn 0;\n}\n  // Meant for when version numbers such as 2 and 2.0 arise. This method will make sure to\n  // put the smaller version number ( in length) first\n  public static int specialCompare(String str1, String str2)\n {\n      String[] arr1 = str1.split(\"\\\\.\");\n     String[] arr2 = str2.split(\"\\\\.\");\n     for(int i =1; i&lt;arr1.length;i++)\n     {\n        if(Integer.parseInt(arr1[i]) != 0)\n        {\n            return 0;\n        }\n    }\n    for(int j =1; j&lt;arr2.length;j++)\n    {\n        if(Integer.parseInt(arr2[j]) != 0)\n        {\n            return 0;\n        }\n    }\n    if(arr1.length &lt; arr2.length)\n    {\n        return -1;\n    }\n    else\n    {\n        return 1;\n    }\n\n}\n}\n</code></pre>\n"},{"tags":["java","intellij-idea","ide"],"comments":[{"owner":{"account_id":2264130,"reputation":38917,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"score":0,"creation_date":1421936768,"post_id":28081117,"comment_id":44558736,"body_markdown":"Are your dependencies correct? Are you using any sort of code-generation?","body":"Are your dependencies correct? Are you using any sort of code-generation?"}],"answers":[{"tags":[],"owner":{"account_id":1424961,"reputation":30720,"user_id":1348743,"display_name":"Javaru"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1421949778,"creation_date":1421949778,"answer_id":28095684,"question_id":28081117,"body_markdown":"This is typically occurs when the indexes IDEA uses have become corrupt. Thus IDEA cannot properly resolve things. Go to `File &gt; Invalidate Caches`. Invalidate the caches and restart IDEA. Let it re-index the project (progress will show right of the center of the bottom status bar). Once the indexing is completed, the invalid error marks should go away.","title":"IntelliJ IDEA 14 build project okay but shows a lot of errors in editor","body":"<p>This is typically occurs when the indexes IDEA uses have become corrupt. Thus IDEA cannot properly resolve things. Go to <code>File &gt; Invalidate Caches</code>. Invalidate the caches and restart IDEA. Let it re-index the project (progress will show right of the center of the bottom status bar). Once the indexing is completed, the invalid error marks should go away.</p>\n"},{"tags":[],"owner":{"account_id":29160600,"reputation":1,"user_id":22339440,"display_name":"ASEStefan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691533811,"creation_date":1691157900,"answer_id":76836683,"question_id":28081117,"body_markdown":"I suggest deleting the .idea folder then open the project again.\r\n\r\nThis worked for me.","title":"IntelliJ IDEA 14 build project okay but shows a lot of errors in editor","body":"<p>I suggest deleting the .idea folder then open the project again.</p>\n<p>This worked for me.</p>\n"}],"owner":{"account_id":166827,"reputation":14145,"user_id":391227,"accept_rate":62,"display_name":"Gelin Luo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":647,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691533811,"creation_date":1421899437,"question_id":28081117,"body_markdown":"I am encountered a strange error of IntelliJ IDEA today. The project rebuild is all good and I can run the unit test cases, however when I open the source files it displays a lot of errors all due to &quot;Cannot resolve symbols&quot;. It looks like the editor doesn&#39;t recognize the class files it built:\r\n\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/bgSeS.png","title":"IntelliJ IDEA 14 build project okay but shows a lot of errors in editor","body":"<p>I am encountered a strange error of IntelliJ IDEA today. The project rebuild is all good and I can run the unit test cases, however when I open the source files it displays a lot of errors all due to \"Cannot resolve symbols\". It looks like the editor doesn't recognize the class files it built:</p>\n\n<p><img src=\"https://i.stack.imgur.com/bgSeS.png\" alt=\"enter image description here\"></p>\n"},{"tags":["java","jbutton","layout-manager","japplet","gridbaglayout"],"answers":[{"tags":[],"owner":{"account_id":38175,"reputation":2368,"user_id":109412,"display_name":"Jason Braucht"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1382628905,"creation_date":1382628093,"answer_id":19570009,"question_id":19569884,"body_markdown":"I&#39;d suggest reading through the [How to Use GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html) tutorial if you haven&#39;t already.  GridBagLayout is powerful but it is also one of the more complex LayoutManagers available.\r\n\r\nI believe you need to set the `GridBagConstraints.fill` property to get the behavior you desire.\r\n\r\nIn your case this should be something like \r\n\r\n`c4.fill = GridBagConstraints.HORIZONTAL;`\r\n\r\n*Edit* (A bit of explanation for the observed behavior)  When you use the same text on both buttons, their calculated size ends up being the same, so they are rendered as you want.  When you use different size text, the buttons will render in a size that fits the text by default.  The default value for `GridBagConstraints.fill` is `GridBagConstraints.NONE` which indicates to the LayoutManger to not resize the component.  Changing the fill to `GridBagConstraints.HORIZONTAL` tells the LayoutManger to resize the component horizontally to fill the display area. \r\n \r\n\r\n","title":"Resize buttons using Grid Bag Layout","body":"<p>I'd suggest reading through the <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html\" rel=\"nofollow\">How to Use GridBagLayout</a> tutorial if you haven't already.  GridBagLayout is powerful but it is also one of the more complex LayoutManagers available.</p>\n\n<p>I believe you need to set the <code>GridBagConstraints.fill</code> property to get the behavior you desire.</p>\n\n<p>In your case this should be something like </p>\n\n<p><code>c4.fill = GridBagConstraints.HORIZONTAL;</code></p>\n\n<p><em>Edit</em> (A bit of explanation for the observed behavior)  When you use the same text on both buttons, their calculated size ends up being the same, so they are rendered as you want.  When you use different size text, the buttons will render in a size that fits the text by default.  The default value for <code>GridBagConstraints.fill</code> is <code>GridBagConstraints.NONE</code> which indicates to the LayoutManger to not resize the component.  Changing the fill to <code>GridBagConstraints.HORIZONTAL</code> tells the LayoutManger to resize the component horizontally to fill the display area. </p>\n"},{"tags":[],"owner":{"account_id":29159383,"reputation":1,"user_id":22338468,"display_name":"Flo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691533550,"creation_date":1691149546,"answer_id":76835591,"question_id":19569884,"body_markdown":"`GridBagLayout` uses `setPreferredSize`. Try using\r\n\r\n    Dimension buttonDimension = new Dimension(100, 30);\r\n    btnWestern.setPreferredSize(buttonDimension);\r\n    btnPop.setPreferredSize(buttonDimension);","title":"Resize buttons using Grid Bag Layout","body":"<p><code>GridBagLayout</code> uses <code>setPreferredSize</code>. Try using</p>\n<pre><code>Dimension buttonDimension = new Dimension(100, 30);\nbtnWestern.setPreferredSize(buttonDimension);\nbtnPop.setPreferredSize(buttonDimension);\n</code></pre>\n"}],"owner":{"display_name":"user2509901"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2468,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":19570009,"answer_count":2,"score":1,"last_activity_date":1691533550,"creation_date":1382627742,"question_id":19569884,"body_markdown":"I want to resize my buttons to be the same size and place then in a Panel on a JApplet. I have tried using\r\n\r\n    public void init() {\r\n        // TODO start asynchronous download of heavy resources\r\n        \r\n        JButton btnWestern=new JButton(&quot;Western&quot;);\r\n        JButton btnPop=new JButton(&quot;Pop&quot;);\r\n        \r\n        GridBagConstraints c4=new GridBagConstraints();\r\n        \r\n        JPanel jPanel1 = new JPanel();\r\n        getContentPane().setLayout(new java.awt.GridBagLayout());\r\n        jPanel1.setLayout(new java.awt.GridBagLayout());\r\n\r\n        c4.gridx = 0;\r\n        c4.gridy = 0;\r\n        c4.insets = new Insets(36, 10, 0, 249);\r\n        jPanel1.add(btnWestern, c4);\r\n\r\n        c4.gridx = 0;\r\n        c4.gridy = 1;\r\n        c4.insets = new Insets(33, 10, 0, 249);\r\n        jPanel1.add(btnPop, c4);\r\n\r\n        add(jPanel1, new java.awt.GridBagConstraints());\r\n\r\n        }\r\n\r\nWhen I run, this is what I get\r\n\r\n![enter image description here][1]\r\n\r\nBut I noticed that if I change the button text to be the same or have the same length, like\r\n \r\n    JButton btnWestern=new JButton(&quot;Button1&quot;);\r\n    JButton btnPop=new JButton(&quot;Button2&quot;);\r\n\r\nI get the desired output\r\n\r\n![enter image description here][2]\r\n\r\nWhat can I do to make sure that even the text of the buttons are not the same length, the buttons are the same size?\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/rGUbe.png\r\n  [2]: http://i.stack.imgur.com/p8hxf.png","title":"Resize buttons using Grid Bag Layout","body":"<p>I want to resize my buttons to be the same size and place then in a Panel on a JApplet. I have tried using</p>\n\n<pre><code>public void init() {\n    // TODO start asynchronous download of heavy resources\n\n    JButton btnWestern=new JButton(\"Western\");\n    JButton btnPop=new JButton(\"Pop\");\n\n    GridBagConstraints c4=new GridBagConstraints();\n\n    JPanel jPanel1 = new JPanel();\n    getContentPane().setLayout(new java.awt.GridBagLayout());\n    jPanel1.setLayout(new java.awt.GridBagLayout());\n\n    c4.gridx = 0;\n    c4.gridy = 0;\n    c4.insets = new Insets(36, 10, 0, 249);\n    jPanel1.add(btnWestern, c4);\n\n    c4.gridx = 0;\n    c4.gridy = 1;\n    c4.insets = new Insets(33, 10, 0, 249);\n    jPanel1.add(btnPop, c4);\n\n    add(jPanel1, new java.awt.GridBagConstraints());\n\n    }\n</code></pre>\n\n<p>When I run, this is what I get</p>\n\n<p><img src=\"https://i.stack.imgur.com/rGUbe.png\" alt=\"enter image description here\"></p>\n\n<p>But I noticed that if I change the button text to be the same or have the same length, like</p>\n\n<pre><code>JButton btnWestern=new JButton(\"Button1\");\nJButton btnPop=new JButton(\"Button2\");\n</code></pre>\n\n<p>I get the desired output</p>\n\n<p><img src=\"https://i.stack.imgur.com/p8hxf.png\" alt=\"enter image description here\"></p>\n\n<p>What can I do to make sure that even the text of the buttons are not the same length, the buttons are the same size?</p>\n"},{"tags":["java","android","foreground-service"],"comments":[{"owner":{"account_id":9840360,"reputation":283,"user_id":7289525,"display_name":"MaKi"},"score":1,"creation_date":1698638496,"post_id":76815437,"comment_id":136426332,"body_markdown":"did you find anything? I am facing the exact issue.","body":"did you find anything? I am facing the exact issue."}],"owner":{"account_id":29139832,"reputation":1,"user_id":22323106,"display_name":"diegobfcy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":192,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691532816,"creation_date":1690927085,"question_id":76815437,"body_markdown":"I have two voice recognition services. One is a wake-word service and the other is a speechRecognizer service. When the wake-word is recognized, the wake-word service has to be stopped and the speechRecognizer service has to be started. This works once, but when the wake-word service has to restart after the speechRecognizer service finishes, the following error appears in the logcat:\r\n```\r\nAppOps                  system_server                        E  Operation not started: uid=10382 pkg=com.example.andreabeta(null) op=RECORD_AUDIO\r\n```\r\nThese are my permissions:\r\n\r\n```\r\n &lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.START_FOREGROUND_SERVICES_FROM_BACKGROUND&quot;\r\n        tools:ignore=&quot;ProtectedPermissions&quot; /&gt;\r\n```\r\n\r\n\r\nI&#39;ve tried to turn off the battery saving for the application on the phone, but it still doesn&#39;t work.","title":"Start a foreground service from the background Android API 31","body":"<p>I have two voice recognition services. One is a wake-word service and the other is a speechRecognizer service. When the wake-word is recognized, the wake-word service has to be stopped and the speechRecognizer service has to be started. This works once, but when the wake-word service has to restart after the speechRecognizer service finishes, the following error appears in the logcat:</p>\n<pre><code>AppOps                  system_server                        E  Operation not started: uid=10382 pkg=com.example.andreabeta(null) op=RECORD_AUDIO\n</code></pre>\n<p>These are my permissions:</p>\n<pre><code> &lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.START_FOREGROUND_SERVICES_FROM_BACKGROUND&quot;\n        tools:ignore=&quot;ProtectedPermissions&quot; /&gt;\n</code></pre>\n<p>I've tried to turn off the battery saving for the application on the phone, but it still doesn't work.</p>\n"},{"tags":["java","docker","docker-compose","vaadin","docker-container"],"answers":[{"comments":[{"owner":{"account_id":6622474,"reputation":3431,"user_id":5113666,"accept_rate":11,"display_name":"Ali Kahoot"},"score":1,"creation_date":1691521411,"post_id":76861472,"comment_id":135502204,"body_markdown":"you dont necessarily need to define networks for apps in same docker-compose file, as docker-compose automatically creates a network and binds the apps in the same network, if it is not defined explicitly... If it is defined, then it uses that network only","body":"you dont necessarily need to define networks for apps in same docker-compose file, as docker-compose automatically creates a network and binds the apps in the same network, if it is not defined explicitly... If it is defined, then it uses that network only"}],"tags":[],"owner":{"account_id":24998678,"reputation":1,"user_id":18859273,"display_name":"MadMojo"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691511900,"creation_date":1691511747,"answer_id":76861472,"question_id":76861189,"body_markdown":"Defining a network should be the correct step, without, none of them knows of each other. We have yet one compose file per every Image. Here how it looks at us:\r\n\r\nBelow mariadb ports you may add\r\n\r\n    networks:\r\n      - my-sql-network\r\n\r\nAnd at the end should be\r\n\r\n    networks:\r\n      my-sql-network:\r\n        name: my-sql-network\r\n        driver: bridge\r\n    \r\nNearly the same in the Apps yaml:\r\n\r\n    networks:\r\n      - my-sql-network\r\n\r\nand at the end\r\n\r\n    networks:\r\n      my-sql-network:\r\n        external: true\r\n\r\nI hope it&#39;s of any help for you!","title":"Docker Containers created with Docker Compose can&#39;t communicate with each other","body":"<p>Defining a network should be the correct step, without, none of them knows of each other. We have yet one compose file per every Image. Here how it looks at us:</p>\n<p>Below mariadb ports you may add</p>\n<pre><code>networks:\n  - my-sql-network\n</code></pre>\n<p>And at the end should be</p>\n<pre><code>networks:\n  my-sql-network:\n    name: my-sql-network\n    driver: bridge\n</code></pre>\n<p>Nearly the same in the Apps yaml:</p>\n<pre><code>networks:\n  - my-sql-network\n</code></pre>\n<p>and at the end</p>\n<pre><code>networks:\n  my-sql-network:\n    external: true\n</code></pre>\n<p>I hope it's of any help for you!</p>\n"},{"comments":[{"owner":{"account_id":29185790,"reputation":11,"user_id":22359000,"display_name":"G&#246;rmenProgr&#228;mmer"},"score":0,"creation_date":1691568784,"post_id":76863487,"comment_id":135507792,"body_markdown":"Unfortunately this didn&#39;t solve the problem. The mariadb container keeps running, but everytime I run docker compose up -d the vaadin-app container starts only to exit after a few seconds with the same error log.","body":"Unfortunately this didn&#39;t solve the problem. The mariadb container keeps running, but everytime I run docker compose up -d the vaadin-app container starts only to exit after a few seconds with the same error log."},{"owner":{"account_id":6622474,"reputation":3431,"user_id":5113666,"accept_rate":11,"display_name":"Ali Kahoot"},"score":1,"creation_date":1691570805,"post_id":76863487,"comment_id":135508199,"body_markdown":"Then there might be an issue in your app configuration, I have tried it with a simple ubuntu image, with curl installed and it works fine... am able to curl mariadb:3306 the 2nd time","body":"Then there might be an issue in your app configuration, I have tried it with a simple ubuntu image, with curl installed and it works fine... am able to curl mariadb:3306 the 2nd time"}],"tags":[],"owner":{"account_id":6622474,"reputation":3431,"user_id":5113666,"accept_rate":11,"display_name":"Ali Kahoot"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691532617,"creation_date":1691532617,"answer_id":76863487,"question_id":76861189,"body_markdown":"The issue is not network related, as a default network is created automatically by docker-compose, if the apps are in same docker-compose file and don&#39;t have any other network specified explicitly.\r\n\r\nThe issue is your app tries to communicate to mariadb, as soon as its up but mariadb isn&#39;t currently fully up to accept connections. The `depends_on` only checks if the container has started, it doesn&#39;t wait for inside app to be up as it doesn&#39;t know which app will take how much time. You can even test it by running `docker-compose up -d`\r\n\r\nand see your app will fail and then again run `docker compose up -d`, now only your app will re-run but mariadb will already be up.\r\n\r\nSo you can Add Healtcheck on mariadb container to wait until it becomes fully healthy and then mark it as UP","title":"Docker Containers created with Docker Compose can&#39;t communicate with each other","body":"<p>The issue is not network related, as a default network is created automatically by docker-compose, if the apps are in same docker-compose file and don't have any other network specified explicitly.</p>\n<p>The issue is your app tries to communicate to mariadb, as soon as its up but mariadb isn't currently fully up to accept connections. The <code>depends_on</code> only checks if the container has started, it doesn't wait for inside app to be up as it doesn't know which app will take how much time. You can even test it by running <code>docker-compose up -d</code></p>\n<p>and see your app will fail and then again run <code>docker compose up -d</code>, now only your app will re-run but mariadb will already be up.</p>\n<p>So you can Add Healtcheck on mariadb container to wait until it becomes fully healthy and then mark it as UP</p>\n"}],"owner":{"account_id":29185790,"reputation":11,"user_id":22359000,"display_name":"G&#246;rmenProgr&#228;mmer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":161,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691532617,"creation_date":1691509569,"question_id":76861189,"body_markdown":"I tried to set up two Docker containers with docker compose (Vaadin app and MariaDB database). \r\n\r\n\r\ndocker-compose.yml:\r\n```\r\nversion: &quot;3.8&quot;\r\n\r\nservices:\r\n vaadin-app:\r\n  build:\r\n   context: .\r\n  container_name: vaadin-app\r\n  ports:\r\n   - 8080:8080\r\n  depends_on:\r\n   - mariadb\r\n   \r\n mariadb:\r\n  image: &quot;mariadb:10.5.8&quot;\r\n  container_name: mariadb\r\n  environment:\r\n   MYSQL_ROOT_PASSWORD: test\r\n   MYSQL_DATABASE: Test\r\n   MYSQL_USER: test2\r\n   MYSQL_PASSWORD: test2\r\n  volumes:\r\n   - data:/var/lib/mysql\r\n  ports:\r\n   - 3306:3306\r\n\r\nvolumes:\r\n data:\r\n```\r\n\r\nDockerfile:\r\n```\r\nFROM openjdk:17-jdk-slim\r\nCOPY target/contacts-md-1.0-SNAPSHOT.jar app.jar\r\nEXPOSE 8080\r\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;/app.jar&quot;]\r\n```\r\n\r\napplication.properties:\r\n```\r\nserver.port=${PORT:8080}\r\nlogging.level.org.atmosphere = warn\r\nspring.mustache.check-template-location = false\r\n\r\n# Launch the default browser when starting the application in development mode\r\nvaadin.launch-browser=true\r\n# To improve the performance during development.\r\n# For more information https://vaadin.com/docs/flow/spring/tutorial-spring-configuration.html#special-configuration-parameters\r\nvaadin.whitelisted-packages=com.vaadin,org.vaadin,dev.hilla,com.example.contacts\r\nspring.jpa.defer-datasource-initialization=true\r\n\r\n# Database stuff\r\nspring.datasource.url=jdbc:mysql://mariadb:3306/Test\r\nspring.datasource.username=test2\r\nspring.datasource.password=test2\r\nspring.sql.init.mode=always\r\n\r\n# Hibernate stuff\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect\r\nspring.jpa.hibernate.ddl-auto=update\r\n```\r\n\r\nWhen I try to set it up with docker-compose, the vaadin-app container exits after a few seconds and I get the following error log:\r\n\r\n```\r\nvaadin-app  | Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\r\nvaadin-app  |\r\nvaadin-app  |\r\nvaadin-app  | The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\nvaadin-app  |   at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]\r\nvaadin-app  |   at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]\r\nvaadin-app  |   at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]\r\nvaadin-app  |   at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[na:na]\r\nvaadin-app  |   at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480) ~[na:na]\r\nvaadin-app  |   at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\r\nvaadin-app  |   at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\r\nvaadin-app  |   at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\r\nvaadin-app  |   at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\r\nvaadin-app  |   at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\r\nvaadin-app  |   at com.mysql.cj.NativeSession.connect(NativeSession.java:119) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\r\nvaadin-app  |   at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:948) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\r\nvaadin-app  |   at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:818) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\r\nvaadin-app  |   ... 62 common frames omitted\r\nvaadin-app  | Caused by: java.net.ConnectException: Connection refused\r\nvaadin-app  |   at java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[na:na]\r\nvaadin-app  |   at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672) ~[na:na]\r\nvaadin-app  |   at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542) ~[na:na]\r\nvaadin-app  |   at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:597) ~[na:na]\r\nvaadin-app  |   at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327) ~[na:na]\r\nvaadin-app  |   at java.base/java.net.Socket.connect(Socket.java:633) ~[na:na]\r\nvaadin-app  |   at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:156) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\r\nvaadin-app  |   at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\r\nvaadin-app  |   ... 65 common frames omitted\r\n```\r\n\r\n\r\n\r\nI have already tried to declare a custom network for both containers, which hasn&#39;t solved the problem.","title":"Docker Containers created with Docker Compose can&#39;t communicate with each other","body":"<p>I tried to set up two Docker containers with docker compose (Vaadin app and MariaDB database).</p>\n<p>docker-compose.yml:</p>\n<pre><code>version: &quot;3.8&quot;\n\nservices:\n vaadin-app:\n  build:\n   context: .\n  container_name: vaadin-app\n  ports:\n   - 8080:8080\n  depends_on:\n   - mariadb\n   \n mariadb:\n  image: &quot;mariadb:10.5.8&quot;\n  container_name: mariadb\n  environment:\n   MYSQL_ROOT_PASSWORD: test\n   MYSQL_DATABASE: Test\n   MYSQL_USER: test2\n   MYSQL_PASSWORD: test2\n  volumes:\n   - data:/var/lib/mysql\n  ports:\n   - 3306:3306\n\nvolumes:\n data:\n</code></pre>\n<p>Dockerfile:</p>\n<pre><code>FROM openjdk:17-jdk-slim\nCOPY target/contacts-md-1.0-SNAPSHOT.jar app.jar\nEXPOSE 8080\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;/app.jar&quot;]\n</code></pre>\n<p>application.properties:</p>\n<pre><code>server.port=${PORT:8080}\nlogging.level.org.atmosphere = warn\nspring.mustache.check-template-location = false\n\n# Launch the default browser when starting the application in development mode\nvaadin.launch-browser=true\n# To improve the performance during development.\n# For more information https://vaadin.com/docs/flow/spring/tutorial-spring-configuration.html#special-configuration-parameters\nvaadin.whitelisted-packages=com.vaadin,org.vaadin,dev.hilla,com.example.contacts\nspring.jpa.defer-datasource-initialization=true\n\n# Database stuff\nspring.datasource.url=jdbc:mysql://mariadb:3306/Test\nspring.datasource.username=test2\nspring.datasource.password=test2\nspring.sql.init.mode=always\n\n# Hibernate stuff\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect\nspring.jpa.hibernate.ddl-auto=update\n</code></pre>\n<p>When I try to set it up with docker-compose, the vaadin-app container exits after a few seconds and I get the following error log:</p>\n<pre><code>vaadin-app  | Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\nvaadin-app  |\nvaadin-app  |\nvaadin-app  | The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\nvaadin-app  |   at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]\nvaadin-app  |   at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]\nvaadin-app  |   at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]\nvaadin-app  |   at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[na:na]\nvaadin-app  |   at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480) ~[na:na]\nvaadin-app  |   at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\nvaadin-app  |   at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\nvaadin-app  |   at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\nvaadin-app  |   at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\nvaadin-app  |   at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\nvaadin-app  |   at com.mysql.cj.NativeSession.connect(NativeSession.java:119) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\nvaadin-app  |   at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:948) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\nvaadin-app  |   at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:818) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\nvaadin-app  |   ... 62 common frames omitted\nvaadin-app  | Caused by: java.net.ConnectException: Connection refused\nvaadin-app  |   at java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[na:na]\nvaadin-app  |   at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672) ~[na:na]\nvaadin-app  |   at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542) ~[na:na]\nvaadin-app  |   at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:597) ~[na:na]\nvaadin-app  |   at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327) ~[na:na]\nvaadin-app  |   at java.base/java.net.Socket.connect(Socket.java:633) ~[na:na]\nvaadin-app  |   at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:156) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\nvaadin-app  |   at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63) ~[mysql-connector-java-8.0.26.jar!/:8.0.26]\nvaadin-app  |   ... 65 common frames omitted\n</code></pre>\n<p>I have already tried to declare a custom network for both containers, which hasn't solved the problem.</p>\n"},{"tags":["java","concurrency"],"answers":[{"comments":[{"owner":{"account_id":46195,"reputation":2818,"user_id":136401,"accept_rate":94,"display_name":"Razvi"},"score":0,"creation_date":1357812024,"post_id":14255075,"comment_id":19782852,"body_markdown":"It&#39;s almost good. But I can&#39;t wait for it to be zero from what I know.","body":"It&#39;s almost good. But I can&#39;t wait for it to be zero from what I know."},{"owner":{"account_id":46195,"reputation":2818,"user_id":136401,"accept_rate":94,"display_name":"Razvi"},"score":0,"creation_date":1357812047,"post_id":14255075,"comment_id":19782865,"body_markdown":"also acquire() is the same as acquire(1)","body":"also acquire() is the same as acquire(1)"},{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1357812095,"post_id":14255075,"comment_id":19782895,"body_markdown":"@assylias: Thanks, updated (I just take what Google gives me when I search the class name)","body":"@assylias: Thanks, updated (I just take what Google gives me when I search the class name)"},{"owner":{"account_id":72575,"reputation":40794,"user_id":209513,"accept_rate":100,"display_name":"Subhrajyoti Majumder"},"score":0,"creation_date":1357812123,"post_id":14255075,"comment_id":19782912,"body_markdown":"according to documentation.","body":"according to documentation."},{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1357812149,"post_id":14255075,"comment_id":19782933,"body_markdown":"You can wait for it to be zero by acquiring a lease (and releasing it immediately after if you don&#39;t want to block others).","body":"You can wait for it to be zero by acquiring a lease (and releasing it immediately after if you don&#39;t want to block others)."},{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":3,"creation_date":1357812232,"post_id":14255075,"comment_id":19782992,"body_markdown":"Stackoverflow could use some support to automatically transform/include JDK Javadoc links to the newest version...","body":"Stackoverflow could use some support to automatically transform/include JDK Javadoc links to the newest version..."},{"owner":{"account_id":46195,"reputation":2818,"user_id":136401,"accept_rate":94,"display_name":"Razvi"},"score":1,"creation_date":1357812337,"post_id":14255075,"comment_id":19783045,"body_markdown":"@Thilo I&#39;m not sure what you are saying works, or I&#39;m not understanding properly what you said. If you call acquire you get a lease, but I need to wait for all leases to be taken by some other threads.","body":"@Thilo I&#39;m not sure what you are saying works, or I&#39;m not understanding properly what you said. If you call acquire you get a lease, but I need to wait for all leases to be taken by some other threads."},{"owner":{"account_id":46195,"reputation":2818,"user_id":136401,"accept_rate":94,"display_name":"Razvi"},"score":0,"creation_date":1357812784,"post_id":14255075,"comment_id":19783325,"body_markdown":"@Thilo Yeah, I&#39;ve been thinking of using AbstractQueuedSynchronizer to implement a custom latch/semaphore. But I don&#39;t think I can use that either since I have two opposing ways in which the threads can block (one happens if the value is zero and one if the value is not zero). So I probably have to go lower and use LockSupport to implement it.","body":"@Thilo Yeah, I&#39;ve been thinking of using AbstractQueuedSynchronizer to implement a custom latch/semaphore. But I don&#39;t think I can use that either since I have two opposing ways in which the threads can block (one happens if the value is zero and one if the value is not zero). So I probably have to go lower and use LockSupport to implement it."}],"tags":[],"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"comment_count":8,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1357812595,"creation_date":1357811822,"answer_id":14255075,"question_id":14255019,"body_markdown":"[java.util.concurrent.Semaphore][1] seems to fit the bill.\r\n\r\n\r\n   * acquire() or acquire(n)\r\n   * &lt;strike&gt;also acquire()  (not sure I understand what the difference is here)&lt;/strike&gt; (*)\r\n   * release() or release(n)\r\n\r\n\r\n(*) Okay, there is no built-in method to wait until the semaphore becomes *unavailable*. I suppose you&#39;d write your own wrapper for `acquire` that does a `tryAcquire` first and if that fails triggers your &quot;busy event&quot; (and continues using the normal `acquire`). Everyone would need to call your wrapper. Maybe subclass Semaphore?\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Semaphore.html","title":"Latch that can be incremented","body":"<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Semaphore.html\" rel=\"noreferrer\">java.util.concurrent.Semaphore</a> seems to fit the bill.</p>\n\n<ul>\n<li>acquire() or acquire(n)</li>\n<li><strike>also acquire()  (not sure I understand what the difference is here)</strike> (*)</li>\n<li>release() or release(n)</li>\n</ul>\n\n<p>(*) Okay, there is no built-in method to wait until the semaphore becomes <em>unavailable</em>. I suppose you'd write your own wrapper for <code>acquire</code> that does a <code>tryAcquire</code> first and if that fails triggers your \"busy event\" (and continues using the normal <code>acquire</code>). Everyone would need to call your wrapper. Maybe subclass Semaphore?</p>\n"},{"comments":[{"owner":{"account_id":46195,"reputation":2818,"user_id":136401,"accept_rate":94,"display_name":"Razvi"},"score":0,"creation_date":1357830345,"post_id":14260716,"comment_id":19792829,"body_markdown":"Yeah, that would work. But I would like something that doesn&#39;t use 2 synchronizer objects to achieve this. I have implemented one using LockSupport and am currently testing it to see if it works and performs okay (AQS didn&#39;t seem to be good for this either).","body":"Yeah, that would work. But I would like something that doesn&#39;t use 2 synchronizer objects to achieve this. I have implemented one using LockSupport and am currently testing it to see if it works and performs okay (AQS didn&#39;t seem to be good for this either)."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1502869510,"post_id":14260716,"comment_id":78373594,"body_markdown":"@dead10ck why not?","body":"@dead10ck why not?"},{"owner":{"account_id":6467251,"reputation":85,"user_id":5008705,"accept_rate":20,"display_name":"Arunim Chopra"},"score":0,"creation_date":1612363280,"post_id":14260716,"comment_id":116743719,"body_markdown":"you can use semaphore as well.","body":"you can use semaphore as well."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1612372871,"post_id":14260716,"comment_id":116748827,"body_markdown":"@ArunimChopra It may not be straightforward, see the comments below Thilo&#39;s answer.","body":"@ArunimChopra It may not be straightforward, see the comments below Thilo&#39;s answer."},{"owner":{"account_id":6467251,"reputation":85,"user_id":5008705,"accept_rate":20,"display_name":"Arunim Chopra"},"score":1,"creation_date":1612379181,"post_id":14260716,"comment_id":116751579,"body_markdown":"@assylias by the comment, I meant combination of CountDownLatch and Semaphore. Only using semaphore alone would not work. In place of synchronized, we can use semaphore with permit as 1.","body":"@assylias by the comment, I meant combination of CountDownLatch and Semaphore. Only using semaphore alone would not work. In place of synchronized, we can use semaphore with permit as 1."},{"owner":{"account_id":6467251,"reputation":85,"user_id":5008705,"accept_rate":20,"display_name":"Arunim Chopra"},"score":0,"creation_date":1612379520,"post_id":14260716,"comment_id":116751713,"body_markdown":"Also, inside waitUntilZero() method , we can simply use latch.await(). This is basically available out-of-the-box.","body":"Also, inside waitUntilZero() method , we can simply use latch.await(). This is basically available out-of-the-box."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1612384625,"post_id":14260716,"comment_id":116753784,"body_markdown":"@ArunimChopra I see, good point indeed, thanks.","body":"@ArunimChopra I see, good point indeed, thanks."}],"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"comment_count":7,"down_vote_count":2,"up_vote_count":9,"is_accepted":true,"score":7,"last_activity_date":1357829825,"creation_date":1357829825,"answer_id":14260716,"question_id":14255019,"body_markdown":"Instead of starting back from AQS, you could use a simple implementation like below. It is somewhat naive (it is synchronized vs. AQS lock-free algorithms) but unless you expect to use it in a contented scenario it could be good enough.\r\n\r\n    public class CountUpAndDownLatch {\r\n        private CountDownLatch latch;\r\n        private final Object lock = new Object();\r\n        \r\n        public CountUpAndDownLatch(int count) {\r\n            this.latch = new CountDownLatch(count);\r\n        }\r\n        \r\n        public void countDownOrWaitIfZero() throws InterruptedException {\r\n            synchronized(lock) {\r\n                while(latch.getCount() == 0) {\r\n                    lock.wait();\r\n                }\r\n                latch.countDown();\r\n                lock.notifyAll();\r\n            }\r\n        }\r\n        \r\n        public void waitUntilZero() throws InterruptedException {\r\n            synchronized(lock) {\r\n                while(latch.getCount() != 0) {\r\n                    lock.wait();\r\n                }\r\n            }\r\n        }\r\n\r\n        public void countUp() { //should probably check for Integer.MAX_VALUE\r\n            synchronized(lock) {\r\n                latch = new CountDownLatch((int) latch.getCount() + 1);\r\n                lock.notifyAll();\r\n            }\r\n        }\r\n\r\n        public int getCount() {\r\n            synchronized(lock) {\r\n                return (int) latch.getCount();\r\n            }\r\n        }\r\n    }\r\n\r\nNote: I have not tested it in depth but it seems to behave as expected:\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n        final CountUpAndDownLatch latch = new CountUpAndDownLatch(1);\r\n        Runnable up = new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                try {\r\n                    System.out.println(&quot;IN UP &quot; + latch.getCount());\r\n                    latch.countUp();\r\n                    System.out.println(&quot;UP &quot; + latch.getCount());\r\n                } catch (InterruptedException ex) {\r\n                }\r\n            }\r\n        };\r\n\r\n        Runnable downOrWait = new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                try {\r\n                    System.out.println(&quot;IN DOWN &quot; + latch.getCount());\r\n                    latch.countDownOrWaitIfZero();\r\n                    System.out.println(&quot;DOWN &quot; + latch.getCount());\r\n                } catch (InterruptedException ex) {\r\n                }\r\n            }\r\n        };\r\n\r\n        Runnable waitFor0 = new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                try {\r\n                    System.out.println(&quot;WAIT FOR ZERO &quot; + latch.getCount());\r\n                    latch.waitUntilZero();\r\n                    System.out.println(&quot;ZERO &quot; + latch.getCount());\r\n                } catch (InterruptedException ex) {\r\n                }\r\n            }\r\n        };\r\n        new Thread(waitFor0).start();\r\n        up.run();\r\n        downOrWait.run();\r\n        Thread.sleep(100);\r\n        downOrWait.run();\r\n        new Thread(up).start();\r\n        downOrWait.run();\r\n    }\r\n\r\nOutput:\r\n\r\n    IN UP 1\r\n    UP 2\r\n    WAIT FOR ZERO 1\r\n    IN DOWN 2\r\n    DOWN 1\r\n    IN DOWN 1\r\n    ZERO 0\r\n    DOWN 0\r\n    IN DOWN 0\r\n    IN UP 0\r\n    DOWN 0\r\n    UP 0","title":"Latch that can be incremented","body":"<p>Instead of starting back from AQS, you could use a simple implementation like below. It is somewhat naive (it is synchronized vs. AQS lock-free algorithms) but unless you expect to use it in a contented scenario it could be good enough.</p>\n\n<pre><code>public class CountUpAndDownLatch {\n    private CountDownLatch latch;\n    private final Object lock = new Object();\n\n    public CountUpAndDownLatch(int count) {\n        this.latch = new CountDownLatch(count);\n    }\n\n    public void countDownOrWaitIfZero() throws InterruptedException {\n        synchronized(lock) {\n            while(latch.getCount() == 0) {\n                lock.wait();\n            }\n            latch.countDown();\n            lock.notifyAll();\n        }\n    }\n\n    public void waitUntilZero() throws InterruptedException {\n        synchronized(lock) {\n            while(latch.getCount() != 0) {\n                lock.wait();\n            }\n        }\n    }\n\n    public void countUp() { //should probably check for Integer.MAX_VALUE\n        synchronized(lock) {\n            latch = new CountDownLatch((int) latch.getCount() + 1);\n            lock.notifyAll();\n        }\n    }\n\n    public int getCount() {\n        synchronized(lock) {\n            return (int) latch.getCount();\n        }\n    }\n}\n</code></pre>\n\n<p>Note: I have not tested it in depth but it seems to behave as expected:</p>\n\n<pre><code>public static void main(String[] args) throws InterruptedException {\n    final CountUpAndDownLatch latch = new CountUpAndDownLatch(1);\n    Runnable up = new Runnable() {\n        @Override\n        public void run() {\n            try {\n                System.out.println(\"IN UP \" + latch.getCount());\n                latch.countUp();\n                System.out.println(\"UP \" + latch.getCount());\n            } catch (InterruptedException ex) {\n            }\n        }\n    };\n\n    Runnable downOrWait = new Runnable() {\n        @Override\n        public void run() {\n            try {\n                System.out.println(\"IN DOWN \" + latch.getCount());\n                latch.countDownOrWaitIfZero();\n                System.out.println(\"DOWN \" + latch.getCount());\n            } catch (InterruptedException ex) {\n            }\n        }\n    };\n\n    Runnable waitFor0 = new Runnable() {\n        @Override\n        public void run() {\n            try {\n                System.out.println(\"WAIT FOR ZERO \" + latch.getCount());\n                latch.waitUntilZero();\n                System.out.println(\"ZERO \" + latch.getCount());\n            } catch (InterruptedException ex) {\n            }\n        }\n    };\n    new Thread(waitFor0).start();\n    up.run();\n    downOrWait.run();\n    Thread.sleep(100);\n    downOrWait.run();\n    new Thread(up).start();\n    downOrWait.run();\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>IN UP 1\nUP 2\nWAIT FOR ZERO 1\nIN DOWN 2\nDOWN 1\nIN DOWN 1\nZERO 0\nDOWN 0\nIN DOWN 0\nIN UP 0\nDOWN 0\nUP 0\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1836471,"reputation":416,"user_id":1666753,"display_name":"Guido Medina"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691532584,"creation_date":1378138025,"answer_id":18577140,"question_id":14255019,"body_markdown":"I needed one and built it using the same strategy as CountDownLatch which uses AQS (non-blocking), this class is also very similar (If not exact) to one created for Apache Camel, I think it is also lighter than JDK Phaser, this will act just like CountDownLact from JDK, it won&#39;t let you count down below zero and will allow you count down and up:\r\n\r\n    \r\n\r\n    import java.util.concurrent.TimeUnit;\r\n    import java.util.concurrent.locks.AbstractQueuedSynchronizer;\r\n        \r\n    public class CountingLatch\r\n    {\r\n      /**\r\n       * Synchronization control for CountingLatch.\r\n       * Uses AQS state to represent count.\r\n       */\r\n      private static final class Sync extends AbstractQueuedSynchronizer\r\n      {\r\n        private Sync()\r\n        {\r\n        }\r\n    \r\n        private Sync(final int initialState)\r\n        {\r\n          setState(initialState);\r\n        }\r\n    \r\n        int getCount()\r\n        {\r\n          return getState();\r\n        }\r\n    \r\n        protected int tryAcquireShared(final int acquires)\r\n        {\r\n          return getState()==0 ? 1 : -1;\r\n        }\r\n    \r\n        protected boolean tryReleaseShared(final int delta)\r\n        {\r\n          // Decrement count; signal when transition to zero\r\n          for(; ; ){\r\n            final int c=getState();\r\n            final int nextc=c+delta;\r\n            if(nextc&lt;0){\r\n              return false;\r\n            }\r\n            if(compareAndSetState(c,nextc)){\r\n              return nextc==0;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    \r\n      private final Sync sync;\r\n    \r\n      public CountingLatch()\r\n      {\r\n        sync=new Sync();\r\n      }\r\n    \r\n      public CountingLatch(final int initialCount)\r\n      {\r\n        sync=new Sync(initialCount);\r\n      }\r\n    \r\n      public void increment()\r\n      {\r\n        sync.releaseShared(1);\r\n      }\r\n    \r\n      public int getCount()\r\n      {\r\n        return sync.getCount();\r\n      }\r\n    \r\n      public void decrement()\r\n      {\r\n        sync.releaseShared(-1);\r\n      }\r\n    \r\n      public void await() throws InterruptedException\r\n      {\r\n        sync.acquireSharedInterruptibly(1);\r\n      }\r\n    \r\n      public boolean await(final long timeout) throws InterruptedException\r\n      {\r\n        return sync.tryAcquireSharedNanos(1,TimeUnit.MILLISECONDS.toNanos(timeout));\r\n      }\r\n    }\r\n\r\n","title":"Latch that can be incremented","body":"<p>I needed one and built it using the same strategy as CountDownLatch which uses AQS (non-blocking), this class is also very similar (If not exact) to one created for Apache Camel, I think it is also lighter than JDK Phaser, this will act just like CountDownLact from JDK, it won't let you count down below zero and will allow you count down and up:</p>\n<pre><code>import java.util.concurrent.TimeUnit;\nimport java.util.concurrent.locks.AbstractQueuedSynchronizer;\n    \npublic class CountingLatch\n{\n  /**\n   * Synchronization control for CountingLatch.\n   * Uses AQS state to represent count.\n   */\n  private static final class Sync extends AbstractQueuedSynchronizer\n  {\n    private Sync()\n    {\n    }\n\n    private Sync(final int initialState)\n    {\n      setState(initialState);\n    }\n\n    int getCount()\n    {\n      return getState();\n    }\n\n    protected int tryAcquireShared(final int acquires)\n    {\n      return getState()==0 ? 1 : -1;\n    }\n\n    protected boolean tryReleaseShared(final int delta)\n    {\n      // Decrement count; signal when transition to zero\n      for(; ; ){\n        final int c=getState();\n        final int nextc=c+delta;\n        if(nextc&lt;0){\n          return false;\n        }\n        if(compareAndSetState(c,nextc)){\n          return nextc==0;\n        }\n      }\n    }\n  }\n\n  private final Sync sync;\n\n  public CountingLatch()\n  {\n    sync=new Sync();\n  }\n\n  public CountingLatch(final int initialCount)\n  {\n    sync=new Sync(initialCount);\n  }\n\n  public void increment()\n  {\n    sync.releaseShared(1);\n  }\n\n  public int getCount()\n  {\n    return sync.getCount();\n  }\n\n  public void decrement()\n  {\n    sync.releaseShared(-1);\n  }\n\n  public void await() throws InterruptedException\n  {\n    sync.acquireSharedInterruptibly(1);\n  }\n\n  public boolean await(final long timeout) throws InterruptedException\n  {\n    return sync.tryAcquireSharedNanos(1,TimeUnit.MILLISECONDS.toNanos(timeout));\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":263613,"reputation":1759,"user_id":549296,"accept_rate":80,"display_name":"Michael-7"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1433490701,"creation_date":1433490701,"answer_id":30661185,"question_id":14255019,"body_markdown":"For those needing an AQS based solution, here&#39;s one that worked for me:\r\n\r\n    public class CountLatch {\r\n    \r\n        private class Sync extends AbstractQueuedSynchronizer {\r\n            private static final long serialVersionUID = 1L;\r\n    \r\n            public Sync() {\r\n            }\r\n    \r\n            @Override\r\n            protected int tryAcquireShared(int arg) {\r\n                return count.get() == releaseValue ? 1 : -1;\r\n            }\r\n    \r\n            @Override\r\n            protected boolean tryReleaseShared(int arg) {\r\n                return true;\r\n            }\r\n        }\r\n    \r\n        private final Sync sync;\r\n        private final AtomicLong count;\r\n        private volatile long releaseValue;\r\n    \r\n        public CountLatch(final long initial, final long releaseValue) {\r\n            this.releaseValue = releaseValue;\r\n            this.count = new AtomicLong(initial);\r\n            this.sync = new Sync();\r\n        }\r\n    \r\n        public void await() throws InterruptedException {\r\n            sync.acquireSharedInterruptibly(1);\r\n        }\r\n    \r\n        public long countUp() {\r\n            final long current = count.incrementAndGet();\r\n            if (current == releaseValue) {\r\n                sync.releaseShared(0);\r\n            }\r\n            return current;\r\n        }\r\n    \r\n        public long countDown() {\r\n            final long current = count.decrementAndGet();\r\n            if (current == releaseValue) {\r\n                sync.releaseShared(0);\r\n            }\r\n            return current;\r\n        }\r\n    \r\n        public long getCount() {\r\n            return count.get();\r\n        }\r\n    }\r\n\r\nYou initialize the synchronizer with an initial and target value. Once the target value has been reached (by counting up and / or down), the waiting threads will be released.","title":"Latch that can be incremented","body":"<p>For those needing an AQS based solution, here's one that worked for me:</p>\n\n<pre><code>public class CountLatch {\n\n    private class Sync extends AbstractQueuedSynchronizer {\n        private static final long serialVersionUID = 1L;\n\n        public Sync() {\n        }\n\n        @Override\n        protected int tryAcquireShared(int arg) {\n            return count.get() == releaseValue ? 1 : -1;\n        }\n\n        @Override\n        protected boolean tryReleaseShared(int arg) {\n            return true;\n        }\n    }\n\n    private final Sync sync;\n    private final AtomicLong count;\n    private volatile long releaseValue;\n\n    public CountLatch(final long initial, final long releaseValue) {\n        this.releaseValue = releaseValue;\n        this.count = new AtomicLong(initial);\n        this.sync = new Sync();\n    }\n\n    public void await() throws InterruptedException {\n        sync.acquireSharedInterruptibly(1);\n    }\n\n    public long countUp() {\n        final long current = count.incrementAndGet();\n        if (current == releaseValue) {\n            sync.releaseShared(0);\n        }\n        return current;\n    }\n\n    public long countDown() {\n        final long current = count.decrementAndGet();\n        if (current == releaseValue) {\n            sync.releaseShared(0);\n        }\n        return current;\n    }\n\n    public long getCount() {\n        return count.get();\n    }\n}\n</code></pre>\n\n<p>You initialize the synchronizer with an initial and target value. Once the target value has been reached (by counting up and / or down), the waiting threads will be released.</p>\n"},{"comments":[{"owner":{"account_id":9464893,"reputation":440,"user_id":7037600,"accept_rate":100,"display_name":"donlys"},"score":1,"creation_date":1484166526,"post_id":32442754,"comment_id":70402983,"body_markdown":"I found this lot more flexible than any other options.","body":"I found this lot more flexible than any other options."},{"owner":{"account_id":3895961,"reputation":989,"user_id":3225001,"display_name":"Gurupad Mamadapur"},"score":2,"creation_date":1545992900,"post_id":32442754,"comment_id":94751747,"body_markdown":"*Note for Android* : `Phaser` is not available below Android SDK 21. If you&#39;re using Kotlin the lint doesn&#39;t warn you, neither does the compiler.","body":"<i>Note for Android</i> : <code>Phaser</code> is not available below Android SDK 21. If you&#39;re using Kotlin the lint doesn&#39;t warn you, neither does the compiler."},{"owner":{"account_id":8465416,"reputation":23499,"user_id":7365866,"display_name":"Ben Butterworth"},"score":4,"creation_date":1616535589,"post_id":32442754,"comment_id":118032606,"body_markdown":"It took me a while to wrap my head around what a Phaser is doing. I would say there are 2 concepts, registered and awaiting. To await (make a thread wait), you need to be registered.That&#39;s why `Michael-7` (OP) initialized `Phaser(1)` instead of `Phaser()`. If he just did `Phaser()`, he also needs to call `phaser.register()`.","body":"It took me a while to wrap my head around what a Phaser is doing. I would say there are 2 concepts, registered and awaiting. To await (make a thread wait), you need to be registered.That&#39;s why <code>Michael-7</code> (OP) initialized <code>Phaser(1)</code> instead of <code>Phaser()</code>. If he just did <code>Phaser()</code>, he also needs to call <code>phaser.register()</code>."}],"tags":[],"owner":{"account_id":263613,"reputation":1759,"user_id":549296,"accept_rate":80,"display_name":"Michael-7"},"comment_count":3,"down_vote_count":0,"up_vote_count":97,"is_accepted":false,"score":97,"last_activity_date":1671862762,"creation_date":1441642820,"answer_id":32442754,"question_id":14255019,"body_markdown":"You could also use a [Phaser (java.util.concurrent.Phaser)][1]\r\n\r\n    final Phaser phaser = new Phaser(1); // register self\r\n    while (/* some condition */) {\r\n        phaser.register(); // Equivalent to countUp\r\n        // do some work asynchronously, invoking\r\n        // phaser.arriveAndDeregister() (equiv to countDown) in a finally block\r\n    }\r\n    phaser.arriveAndAwaitAdvance(); // await any async tasks to complete\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Phaser.html","title":"Latch that can be incremented","body":"<p>You could also use a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Phaser.html\" rel=\"noreferrer\">Phaser (java.util.concurrent.Phaser)</a></p>\n<pre><code>final Phaser phaser = new Phaser(1); // register self\nwhile (/* some condition */) {\n    phaser.register(); // Equivalent to countUp\n    // do some work asynchronously, invoking\n    // phaser.arriveAndDeregister() (equiv to countDown) in a finally block\n}\nphaser.arriveAndAwaitAdvance(); // await any async tasks to complete\n</code></pre>\n"},{"tags":[],"owner":{"account_id":703628,"reputation":14438,"user_id":595305,"accept_rate":83,"display_name":"mike rodent"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1456869941,"creation_date":1456869941,"answer_id":35734537,"question_id":14255019,"body_markdown":"This is a variation on `CounterLatch`, available from the Apache site.  \r\n\r\nTheir version, for reasons best known to themselves, blocks the caller thread **while** the variable (`AtomicInteger`) is at a given value.  \r\n\r\nBut it is the height of easiness to tweak this code so that you can choose either just what the Apache version does, or... to say &quot;wait here **until** the counter reaches a certain value&quot;.  Arguably the latter is going to have more applicability.  In my particular case I rustled this up because I wanted to check that all &quot;chunks&quot; had been published in `SwingWorker.process()`... but I have since found other uses for it.\r\n\r\nHere it is written in Jython, officially the best language in the world (TM). I am going to rustle up a Java version in due course.\r\n\r\n    class CounterLatch():\r\n        def __init__( self, initial = 0, wait_value = 0, lift_on_reached = True ):\r\n            self.count = java.util.concurrent.atomic.AtomicLong( initial )\r\n            self.signal = java.util.concurrent.atomic.AtomicLong( wait_value )\r\n    \r\n            class Sync( java.util.concurrent.locks.AbstractQueuedSynchronizer ):\r\n                def tryAcquireShared( sync_self, arg ):\r\n                    if lift_on_reached:\r\n                        return -1 if (( not self.released.get() ) and self.count.get() != self.signal.get() ) else 1\r\n                    else:\r\n                        return -1 if (( not self.released.get() ) and self.count.get() == self.signal.get() ) else 1\r\n                def tryReleaseShared( self, args ):\r\n                    return True\r\n    \r\n            self.sync = Sync()\r\n            self.released = java.util.concurrent.atomic.AtomicBoolean() # initialised at False\r\n    \r\n        def await( self, *args ):\r\n            if args:\r\n                assert len( args ) == 2\r\n                assert type( args[ 0 ] ) is int\r\n                timeout = args[ 0 ]\r\n                assert type( args[ 1 ] ) is java.util.concurrent.TimeUnit\r\n                unit = args[ 1 ]\r\n                return self.sync.tryAcquireSharedNanos(1, unit.toNanos(timeout))\r\n            else:\r\n                self.sync.acquireSharedInterruptibly( 1 )\r\n    \r\n        def count_relative( self, n ):\r\n            previous = self.count.addAndGet( n )\r\n            if previous == self.signal.get():\r\n                self.sync.releaseShared( 0 )\r\n            return previous\r\n\r\nNB the Apache version uses the keyword `volatile` for `signal` and `released`.  In Jython I don&#39;t think this exists as such, but using `AtomicInteger` and `AtomicBoolean` should ensure that no values are &quot;out of date&quot; in any thread.\r\n\r\nExample usage:\r\n\r\nIn the SwingWorker constructor:\r\n\r\n    self.publication_counter_latch = CounterLatch() \r\n\r\nIn SW.publish:\r\n\r\n    # increase counter value BEFORE publishing chunks\r\n    self.publication_counter_latch.count_relative( len( chunks ) )\r\n    self.super__publish( chunks )\r\n\r\nIn SW.process:\r\n\r\n    # ... do sthg [HERE] with the chunks!\r\n    # AFTER having done what you want to do with your chunks:\r\n    self.publication_counter_latch.count_relative( - len( chunks ) )\r\n\r\nIn the thread waiting for chunk processing to stop:\r\n\r\n    worker.publication_counter_latch.await()\r\n\r\n","title":"Latch that can be incremented","body":"<p>This is a variation on <code>CounterLatch</code>, available from the Apache site.  </p>\n\n<p>Their version, for reasons best known to themselves, blocks the caller thread <strong>while</strong> the variable (<code>AtomicInteger</code>) is at a given value.  </p>\n\n<p>But it is the height of easiness to tweak this code so that you can choose either just what the Apache version does, or... to say \"wait here <strong>until</strong> the counter reaches a certain value\".  Arguably the latter is going to have more applicability.  In my particular case I rustled this up because I wanted to check that all \"chunks\" had been published in <code>SwingWorker.process()</code>... but I have since found other uses for it.</p>\n\n<p>Here it is written in Jython, officially the best language in the world (TM). I am going to rustle up a Java version in due course.</p>\n\n<pre><code>class CounterLatch():\n    def __init__( self, initial = 0, wait_value = 0, lift_on_reached = True ):\n        self.count = java.util.concurrent.atomic.AtomicLong( initial )\n        self.signal = java.util.concurrent.atomic.AtomicLong( wait_value )\n\n        class Sync( java.util.concurrent.locks.AbstractQueuedSynchronizer ):\n            def tryAcquireShared( sync_self, arg ):\n                if lift_on_reached:\n                    return -1 if (( not self.released.get() ) and self.count.get() != self.signal.get() ) else 1\n                else:\n                    return -1 if (( not self.released.get() ) and self.count.get() == self.signal.get() ) else 1\n            def tryReleaseShared( self, args ):\n                return True\n\n        self.sync = Sync()\n        self.released = java.util.concurrent.atomic.AtomicBoolean() # initialised at False\n\n    def await( self, *args ):\n        if args:\n            assert len( args ) == 2\n            assert type( args[ 0 ] ) is int\n            timeout = args[ 0 ]\n            assert type( args[ 1 ] ) is java.util.concurrent.TimeUnit\n            unit = args[ 1 ]\n            return self.sync.tryAcquireSharedNanos(1, unit.toNanos(timeout))\n        else:\n            self.sync.acquireSharedInterruptibly( 1 )\n\n    def count_relative( self, n ):\n        previous = self.count.addAndGet( n )\n        if previous == self.signal.get():\n            self.sync.releaseShared( 0 )\n        return previous\n</code></pre>\n\n<p>NB the Apache version uses the keyword <code>volatile</code> for <code>signal</code> and <code>released</code>.  In Jython I don't think this exists as such, but using <code>AtomicInteger</code> and <code>AtomicBoolean</code> should ensure that no values are \"out of date\" in any thread.</p>\n\n<p>Example usage:</p>\n\n<p>In the SwingWorker constructor:</p>\n\n<pre><code>self.publication_counter_latch = CounterLatch() \n</code></pre>\n\n<p>In SW.publish:</p>\n\n<pre><code># increase counter value BEFORE publishing chunks\nself.publication_counter_latch.count_relative( len( chunks ) )\nself.super__publish( chunks )\n</code></pre>\n\n<p>In SW.process:</p>\n\n<pre><code># ... do sthg [HERE] with the chunks!\n# AFTER having done what you want to do with your chunks:\nself.publication_counter_latch.count_relative( - len( chunks ) )\n</code></pre>\n\n<p>In the thread waiting for chunk processing to stop:</p>\n\n<pre><code>worker.publication_counter_latch.await()\n</code></pre>\n"}],"owner":{"account_id":46195,"reputation":2818,"user_id":136401,"accept_rate":94,"display_name":"Razvi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20224,"favorite_count":0,"down_vote_count":0,"up_vote_count":37,"accepted_answer_id":14260716,"answer_count":6,"score":37,"last_activity_date":1691532584,"creation_date":1357811680,"question_id":14255019,"body_markdown":"Does anyone know if there is any latch implementation that does the following:\r\n\r\n* has a method to decrement the latch value, or wait if the value is zero\r\n* has a method for waiting for the latch value to be zero\r\n* has a method for adding a number to the latch&#39;s value\r\n","title":"Latch that can be incremented","body":"<p>Does anyone know if there is any latch implementation that does the following:</p>\n\n<ul>\n<li>has a method to decrement the latch value, or wait if the value is zero</li>\n<li>has a method for waiting for the latch value to be zero</li>\n<li>has a method for adding a number to the latch's value</li>\n</ul>\n"},{"tags":["java","swing","user-interface","highdpi"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1691530729,"post_id":76862844,"comment_id":135503682,"body_markdown":"I&#39;m curious as to the reason for creating a &quot;off screen buffer&quot; image within `paintComponent`, which is already double buffered, but lets, for the moment, just assume that this is a demonstration of the problem and not the actual implementation.  You could make use of the `Graphics` current transformation, `Graphics2D#getTransform` and it&#39;s `getScaleX/getScaleY` methods - you could then generate an image and apply this scaling to it (based on what I&#39;ve read)","body":"I&#39;m curious as to the reason for creating a &quot;off screen buffer&quot; image within <code>paintComponent</code>, which is already double buffered, but lets, for the moment, just assume that this is a demonstration of the problem and not the actual implementation.  You could make use of the <code>Graphics</code> current transformation, <code>Graphics2D#getTransform</code> and it&#39;s <code>getScaleX&#47;getScaleY</code> methods - you could then generate an image and apply this scaling to it (based on what I&#39;ve read)"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1691530839,"post_id":76862844,"comment_id":135503692,"body_markdown":"https://stackoverflow.com/questions/43057457/jdk-9-high-dpi-disable-for-specific-panel might help a bit","body":"<a href=\"https://stackoverflow.com/questions/43057457/jdk-9-high-dpi-disable-for-specific-panel\" title=\"jdk 9 high dpi disable for specific panel\">stackoverflow.com/questions/43057457/&hellip;</a> might help a bit"}],"answers":[{"comments":[{"owner":{"account_id":4449358,"reputation":163,"user_id":9312586,"display_name":"COTO"},"score":0,"creation_date":1691537339,"post_id":76863397,"comment_id":135504407,"body_markdown":"Curious that the rendering results aren&#39;t identical, as you say. But the result looks nice. The content being rendered by `drawIn()` is provided by multiple subroutines in my case, rather than being static. But I can adapt this to my needs by having the class compile a list of `Graphics2D` operations to perform when `drawIn()` is invoked (rather than performing them immediately), and dispatch them all at once. Thanks for the advice.","body":"Curious that the rendering results aren&#39;t identical, as you say. But the result looks nice. The content being rendered by <code>drawIn()</code> is provided by multiple subroutines in my case, rather than being static. But I can adapt this to my needs by having the class compile a list of <code>Graphics2D</code> operations to perform when <code>drawIn()</code> is invoked (rather than performing them immediately), and dispatch them all at once. Thanks for the advice."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1691537417,"post_id":76863397,"comment_id":135504413,"body_markdown":"@VGR Just an FYI, I think Java 1.4 (or so), a `Graphics` context been passed to a Swing component is guaranteed to be an instance of `Graphics2D`","body":"@VGR Just an FYI, I think Java 1.4 (or so), a <code>Graphics</code> context been passed to a Swing component is guaranteed to be an instance of <code>Graphics2D</code>"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1691555938,"post_id":76863397,"comment_id":135505876,"body_markdown":"@MadProgrammer I’m aware, but the instanceof check was in the question, and I didn’t want to change the code more than I had to.","body":"@MadProgrammer I’m aware, but the instanceof check was in the question, and I didn’t want to change the code more than I had to."}],"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691531163,"creation_date":1691531163,"answer_id":76863397,"question_id":76862844,"body_markdown":"There is something like scalingAwareBuffer.  It’s the [RenderableImage](https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/image/renderable/RenderableImage.html) interface.\r\n\r\nI’m not certain this will help, but in theory it should.  RenderableImage looks like it has a lot of methods, but most of them are very simple.  The important ones are the three create… methods.\r\n\r\nEven this won’t produce an identical copy from the image (due to the use of the GPU when drawing directly to the screen?), but the image should at least scale properly.\r\n\r\n    import java.util.Vector;\r\n    import java.util.Map;\r\n\r\n    import java.awt.Container;\r\n    import java.awt.Color;\r\n    import java.awt.Font;\r\n    import java.awt.Image;\r\n    import java.awt.Shape;\r\n    import java.awt.Graphics;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.BasicStroke;\r\n    import java.awt.RenderingHints;\r\n    import java.awt.EventQueue;\r\n\r\n    import java.awt.geom.Line2D;\r\n    import java.awt.geom.Point2D;\r\n    import java.awt.geom.Rectangle2D;\r\n    import java.awt.geom.AffineTransform;\r\n\r\n    import java.awt.image.BufferedImage;\r\n    import java.awt.image.RenderedImage;\r\n    import java.awt.image.renderable.RenderableImage;\r\n    import java.awt.image.renderable.RenderContext;\r\n\r\n    import javax.swing.JComponent;\r\n    import javax.swing.JFrame;\r\n\r\n    public class ScaledImageRenderExample1 {\r\n        public static void main(String[] args) {\r\n            EventQueue.invokeLater(() -&gt; {\r\n                JFrame jf = new JFrame(&quot;Demo&quot;);\r\n                Container cp = jf.getContentPane();\r\n                MyCanvas tl = new MyCanvas();\r\n                cp.add(tl);\r\n                jf.setSize(500, 250);\r\n                jf.setLocationByPlatform( true );\r\n                jf.setVisible(true);\r\n                jf.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );\r\n            });\r\n        }\r\n\r\n        static class MyCanvas extends JComponent {\r\n            private static final long serialVersionUID = 1;\r\n\r\n            @Override\r\n            public void paintComponent(Graphics g) {\r\n                super.paintComponent(g);\r\n                if( g instanceof Graphics2D g2 ) {\r\n                    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\r\n                        RenderingHints.VALUE_ANTIALIAS_ON);\r\n\r\n                    g2.setFont( Font.decode( &quot;Times New Roman-26&quot; ) );\r\n                    g2.drawString(&quot;The poorly-scaled cake is a lie.&quot;,70,40);\r\n                    g2.setStroke( new BasicStroke( 2.3f ) );\r\n                    g2.draw( new Line2D.Double( 420, 10, 425, 70 ) );\r\n\r\n                    g2.drawRenderableImage(new CakeImage(),\r\n                        AffineTransform.getTranslateInstance(0, 130));\r\n                }\r\n            }\r\n        }\r\n\r\n        static class CakeImage implements RenderableImage {\r\n            private static final int DEFAULT_WIDTH = 500;\r\n            private static final int DEFAULT_HEIGHT = 150;\r\n\r\n            private static final RenderingHints DEFAULT_HINTS =\r\n                new RenderingHints(Map.of(\r\n                    RenderingHints.KEY_ANTIALIASING,\r\n                    RenderingHints.VALUE_ANTIALIAS_ON,\r\n\r\n                    RenderingHints.KEY_TEXT_ANTIALIASING,\r\n                    RenderingHints.VALUE_TEXT_ANTIALIAS_ON,\r\n\r\n                    RenderingHints.KEY_FRACTIONALMETRICS,\r\n                    RenderingHints.VALUE_FRACTIONALMETRICS_ON,\r\n\r\n                    RenderingHints.KEY_RESOLUTION_VARIANT,\r\n                    RenderingHints.VALUE_RESOLUTION_VARIANT_SIZE_FIT,\r\n\r\n                    RenderingHints.KEY_RENDERING,\r\n                    RenderingHints.VALUE_RENDER_QUALITY,\r\n\r\n                    RenderingHints.KEY_INTERPOLATION,\r\n                    RenderingHints.VALUE_INTERPOLATION_BICUBIC,\r\n\r\n                    RenderingHints.KEY_STROKE_CONTROL,\r\n                    RenderingHints.VALUE_STROKE_PURE,\r\n\r\n                    RenderingHints.KEY_COLOR_RENDERING,\r\n                    RenderingHints.VALUE_COLOR_RENDER_QUALITY\r\n            ));\r\n\r\n\r\n            private final float x;\r\n            private final float y;\r\n\r\n            CakeImage() {\r\n                this(0, 0);\r\n            }\r\n\r\n            CakeImage(float x,\r\n                      float y) {\r\n\r\n                this.x = x;\r\n                this.y = y;\r\n            }\r\n\r\n            @Override\r\n            public float getMinX() {\r\n                return x;\r\n            }\r\n\r\n            @Override\r\n            public float getMinY() {\r\n                return y;\r\n            }\r\n\r\n            @Override\r\n            public float getWidth() {\r\n                return DEFAULT_WIDTH;\r\n            }\r\n\r\n            @Override\r\n            public float getHeight() {\r\n                return DEFAULT_HEIGHT;\r\n            }\r\n\r\n            @Override\r\n            public boolean isDynamic() {\r\n                return false;\r\n            }\r\n\r\n            @Override\r\n            public Object getProperty(String name) {\r\n                return Image.UndefinedProperty;\r\n            }\r\n\r\n            @Override\r\n            public String[] getPropertyNames() {\r\n                return new String[0];\r\n            }\r\n\r\n            @Override\r\n            public Vector&lt;RenderableImage&gt; getSources() {\r\n                return null;\r\n            }\r\n\r\n            private void drawIn(Graphics2D g2) {\r\n                g2.setColor( Color.BLACK );\r\n                g2.setFont( Font.decode( &quot;Times New Roman-26&quot; ) );\r\n                g2.drawString( &quot;The poorly-scaled cake is a lie.&quot;,70,40 );\r\n                g2.setStroke( new BasicStroke( 2.3f ) );\r\n                g2.draw( new Line2D.Double( 420, 10, 425, 70 ) );\r\n            }\r\n\r\n            @Override\r\n            public RenderedImage createDefaultRendering() {\r\n                BufferedImage image = new BufferedImage(\r\n                    DEFAULT_WIDTH, DEFAULT_HEIGHT, BufferedImage.TYPE_INT_ARGB);\r\n\r\n                Graphics2D g2 = (Graphics2D) image.getGraphics();\r\n                RenderingHints hints = g2.getRenderingHints();\r\n                hints.putAll(DEFAULT_HINTS);\r\n                g2.setRenderingHints(hints);\r\n                drawIn(g2);\r\n                g2.dispose();\r\n\r\n                return image;\r\n            }\r\n\r\n            @Override\r\n            public RenderedImage createScaledRendering(int width,\r\n                                                       int height,\r\n                                                       RenderingHints hints) {\r\n\r\n                BufferedImage image = new BufferedImage(width, height,\r\n                    BufferedImage.TYPE_INT_ARGB);\r\n\r\n                Graphics2D g2 = (Graphics2D) image.getGraphics();\r\n                g2.setRenderingHints(hints);\r\n                g2.scale((double) width / DEFAULT_WIDTH,\r\n                         (double) height / DEFAULT_HEIGHT);\r\n                drawIn(g2);\r\n                g2.dispose();\r\n\r\n                return image;\r\n            }\r\n\r\n            @Override\r\n            public RenderedImage createRendering(RenderContext context) {\r\n                Point2D size = new Point2D.Float(getWidth(), getHeight());\r\n\r\n                Shape shape = context.getAreaOfInterest();\r\n                if (shape != null) {\r\n                    Rectangle2D bounds = shape.getBounds2D();\r\n                    size = new Point2D.Double(\r\n                        bounds.getWidth(), bounds.getHeight());\r\n                }\r\n\r\n                context.getTransform().transform(size, size);\r\n\r\n                BufferedImage image = new BufferedImage(\r\n                    (int) Math.ceil(size.getX()),\r\n                    (int) Math.ceil(size.getY()),\r\n                    BufferedImage.TYPE_INT_ARGB);\r\n\r\n                Graphics2D g2 = (Graphics2D) image.getGraphics();\r\n                RenderingHints hints = context.getRenderingHints();\r\n                if (hints != null) {\r\n                    g2.setRenderingHints(hints);\r\n                } else {\r\n                    hints = g2.getRenderingHints();\r\n                    hints.putAll(DEFAULT_HINTS);\r\n                    g2.setRenderingHints(hints);\r\n                }\r\n                g2.setTransform(context.getTransform());\r\n                drawIn(g2);\r\n                g2.dispose();\r\n\r\n                return image;\r\n            }\r\n        }\r\n    }\r\n","title":"How can I avoid garbled text and vector graphics in Java Swing with UI scaling and off-screen buffering?","body":"<p>There is something like scalingAwareBuffer.  It’s the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/image/renderable/RenderableImage.html\" rel=\"nofollow noreferrer\">RenderableImage</a> interface.</p>\n<p>I’m not certain this will help, but in theory it should.  RenderableImage looks like it has a lot of methods, but most of them are very simple.  The important ones are the three create… methods.</p>\n<p>Even this won’t produce an identical copy from the image (due to the use of the GPU when drawing directly to the screen?), but the image should at least scale properly.</p>\n<pre><code>import java.util.Vector;\nimport java.util.Map;\n\nimport java.awt.Container;\nimport java.awt.Color;\nimport java.awt.Font;\nimport java.awt.Image;\nimport java.awt.Shape;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.BasicStroke;\nimport java.awt.RenderingHints;\nimport java.awt.EventQueue;\n\nimport java.awt.geom.Line2D;\nimport java.awt.geom.Point2D;\nimport java.awt.geom.Rectangle2D;\nimport java.awt.geom.AffineTransform;\n\nimport java.awt.image.BufferedImage;\nimport java.awt.image.RenderedImage;\nimport java.awt.image.renderable.RenderableImage;\nimport java.awt.image.renderable.RenderContext;\n\nimport javax.swing.JComponent;\nimport javax.swing.JFrame;\n\npublic class ScaledImageRenderExample1 {\n    public static void main(String[] args) {\n        EventQueue.invokeLater(() -&gt; {\n            JFrame jf = new JFrame(&quot;Demo&quot;);\n            Container cp = jf.getContentPane();\n            MyCanvas tl = new MyCanvas();\n            cp.add(tl);\n            jf.setSize(500, 250);\n            jf.setLocationByPlatform( true );\n            jf.setVisible(true);\n            jf.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );\n        });\n    }\n\n    static class MyCanvas extends JComponent {\n        private static final long serialVersionUID = 1;\n\n        @Override\n        public void paintComponent(Graphics g) {\n            super.paintComponent(g);\n            if( g instanceof Graphics2D g2 ) {\n                g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\n                    RenderingHints.VALUE_ANTIALIAS_ON);\n\n                g2.setFont( Font.decode( &quot;Times New Roman-26&quot; ) );\n                g2.drawString(&quot;The poorly-scaled cake is a lie.&quot;,70,40);\n                g2.setStroke( new BasicStroke( 2.3f ) );\n                g2.draw( new Line2D.Double( 420, 10, 425, 70 ) );\n\n                g2.drawRenderableImage(new CakeImage(),\n                    AffineTransform.getTranslateInstance(0, 130));\n            }\n        }\n    }\n\n    static class CakeImage implements RenderableImage {\n        private static final int DEFAULT_WIDTH = 500;\n        private static final int DEFAULT_HEIGHT = 150;\n\n        private static final RenderingHints DEFAULT_HINTS =\n            new RenderingHints(Map.of(\n                RenderingHints.KEY_ANTIALIASING,\n                RenderingHints.VALUE_ANTIALIAS_ON,\n\n                RenderingHints.KEY_TEXT_ANTIALIASING,\n                RenderingHints.VALUE_TEXT_ANTIALIAS_ON,\n\n                RenderingHints.KEY_FRACTIONALMETRICS,\n                RenderingHints.VALUE_FRACTIONALMETRICS_ON,\n\n                RenderingHints.KEY_RESOLUTION_VARIANT,\n                RenderingHints.VALUE_RESOLUTION_VARIANT_SIZE_FIT,\n\n                RenderingHints.KEY_RENDERING,\n                RenderingHints.VALUE_RENDER_QUALITY,\n\n                RenderingHints.KEY_INTERPOLATION,\n                RenderingHints.VALUE_INTERPOLATION_BICUBIC,\n\n                RenderingHints.KEY_STROKE_CONTROL,\n                RenderingHints.VALUE_STROKE_PURE,\n\n                RenderingHints.KEY_COLOR_RENDERING,\n                RenderingHints.VALUE_COLOR_RENDER_QUALITY\n        ));\n\n\n        private final float x;\n        private final float y;\n\n        CakeImage() {\n            this(0, 0);\n        }\n\n        CakeImage(float x,\n                  float y) {\n\n            this.x = x;\n            this.y = y;\n        }\n\n        @Override\n        public float getMinX() {\n            return x;\n        }\n\n        @Override\n        public float getMinY() {\n            return y;\n        }\n\n        @Override\n        public float getWidth() {\n            return DEFAULT_WIDTH;\n        }\n\n        @Override\n        public float getHeight() {\n            return DEFAULT_HEIGHT;\n        }\n\n        @Override\n        public boolean isDynamic() {\n            return false;\n        }\n\n        @Override\n        public Object getProperty(String name) {\n            return Image.UndefinedProperty;\n        }\n\n        @Override\n        public String[] getPropertyNames() {\n            return new String[0];\n        }\n\n        @Override\n        public Vector&lt;RenderableImage&gt; getSources() {\n            return null;\n        }\n\n        private void drawIn(Graphics2D g2) {\n            g2.setColor( Color.BLACK );\n            g2.setFont( Font.decode( &quot;Times New Roman-26&quot; ) );\n            g2.drawString( &quot;The poorly-scaled cake is a lie.&quot;,70,40 );\n            g2.setStroke( new BasicStroke( 2.3f ) );\n            g2.draw( new Line2D.Double( 420, 10, 425, 70 ) );\n        }\n\n        @Override\n        public RenderedImage createDefaultRendering() {\n            BufferedImage image = new BufferedImage(\n                DEFAULT_WIDTH, DEFAULT_HEIGHT, BufferedImage.TYPE_INT_ARGB);\n\n            Graphics2D g2 = (Graphics2D) image.getGraphics();\n            RenderingHints hints = g2.getRenderingHints();\n            hints.putAll(DEFAULT_HINTS);\n            g2.setRenderingHints(hints);\n            drawIn(g2);\n            g2.dispose();\n\n            return image;\n        }\n\n        @Override\n        public RenderedImage createScaledRendering(int width,\n                                                   int height,\n                                                   RenderingHints hints) {\n\n            BufferedImage image = new BufferedImage(width, height,\n                BufferedImage.TYPE_INT_ARGB);\n\n            Graphics2D g2 = (Graphics2D) image.getGraphics();\n            g2.setRenderingHints(hints);\n            g2.scale((double) width / DEFAULT_WIDTH,\n                     (double) height / DEFAULT_HEIGHT);\n            drawIn(g2);\n            g2.dispose();\n\n            return image;\n        }\n\n        @Override\n        public RenderedImage createRendering(RenderContext context) {\n            Point2D size = new Point2D.Float(getWidth(), getHeight());\n\n            Shape shape = context.getAreaOfInterest();\n            if (shape != null) {\n                Rectangle2D bounds = shape.getBounds2D();\n                size = new Point2D.Double(\n                    bounds.getWidth(), bounds.getHeight());\n            }\n\n            context.getTransform().transform(size, size);\n\n            BufferedImage image = new BufferedImage(\n                (int) Math.ceil(size.getX()),\n                (int) Math.ceil(size.getY()),\n                BufferedImage.TYPE_INT_ARGB);\n\n            Graphics2D g2 = (Graphics2D) image.getGraphics();\n            RenderingHints hints = context.getRenderingHints();\n            if (hints != null) {\n                g2.setRenderingHints(hints);\n            } else {\n                hints = g2.getRenderingHints();\n                hints.putAll(DEFAULT_HINTS);\n                g2.setRenderingHints(hints);\n            }\n            g2.setTransform(context.getTransform());\n            drawIn(g2);\n            g2.dispose();\n\n            return image;\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4449358,"reputation":163,"user_id":9312586,"display_name":"COTO"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1691531163,"creation_date":1691524553,"question_id":76862844,"body_markdown":"I&#39;m developing a Java application where several `JPanel`s (*not* `JFrame`s) have complex animations that necessitate drawing to an off-screen buffer before blitting to the display surface. A problem I&#39;m having is that Swing is performing UI scaling for high-DPI screens, and the off-screen buffer (a raster) isn&#39;t &quot;aware&quot; of the scaling. Consequently, when text or graphics are rendered to the buffer, and the buffer is blitted to the `JPanel`, Swing scales the graphic as a raster and the result looks like garbage.\r\n\r\nA simple example is:\r\n\r\n```\r\nimport java.awt.*;\r\nimport java.awt.geom.Line2D;\r\n\r\nimport javax.swing.JComponent;\r\nimport javax.swing.JFrame;\r\n\r\npublic class Main {\r\n\tpublic static void main(String[] args) {\r\n\t\tJFrame jf = new JFrame(&quot;Demo&quot;);\r\n\t\tContainer cp = jf.getContentPane();\r\n\t\tMyCanvas tl = new MyCanvas();\r\n\t\tcp.add(tl);\r\n\t\tjf.setSize(500, 250);\r\n\t\tjf.setVisible(true);\r\n\t\tjf.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );\r\n\t}\r\n}\r\n\r\nclass MyCanvas extends JComponent {\r\n\r\n\t@Override\r\n\tpublic void paintComponent(Graphics g) {\r\n\t\tif( g instanceof Graphics2D g2 ) {\r\n\t\t\tg2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\r\n\t\t\t\tRenderingHints.VALUE_ANTIALIAS_ON);\r\n\r\n\t\t\tg2.setFont( Font.decode( &quot;Times New Roman-26&quot; ) );\r\n\t\t\tg2.drawString(&quot;The poorly-scaled cake is a lie.&quot;,70,40);\r\n\t\t\tg2.setStroke( new BasicStroke( 2.3f ) );\r\n\t\t\tg2.draw( new Line2D.Double( 420, 10, 425, 70 ) );\r\n\r\n\t\t\tImage I = createImage( 500, 150 );\r\n\t\t\tGraphics2D g2_ = (Graphics2D)I.getGraphics();\r\n\t\t\tg2_.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\r\n\t\t\t\tRenderingHints.VALUE_ANTIALIAS_ON);\r\n\t\t\tg2_.setColor( Color.BLACK );\r\n\t\t\tg2_.setFont( Font.decode( &quot;Times New Roman-26&quot; ) );\r\n\t\t\tg2_.drawString( &quot;The poorly-scaled cake is a lie.&quot;,70,40 );\r\n\t\t\tg2_.setStroke( new BasicStroke( 2.3f ) );\r\n\t\t\tg2_.draw( new Line2D.Double( 420, 10, 425, 70 ) );\r\n\t\t\tg2_.dispose();\r\n\t\t\tg2.drawImage( I, 0, 130, null );\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nFrom this, compiling with JDK 20 on my Windows 11 machine, I get:\r\n\r\n[![example of poor UI scaling in Java Swing][1]][1]\r\n\r\nOn the top is text and graphics rendered directly to the `JPanel`. On the bottom is the same content rendered via an intermediary image.\r\n\r\nIdeally, I&#39;m looking for a method, e.g., `Image createScalingAwareBuffer( JPanel jp, int width, int height )` that returns an image `I`, in the same vein as `JPanel.createImage( ... )` but where the returned `Image` is *vector* scaling aware, such that `jp.drawImage( I )` or equivalent displays the lower graphic content identically to the upper content.\r\n\r\nI suspect that rendering to the back buffer in a double-buffered Swing component has this kind of &quot;awareness&quot;, but this isn&#39;t an option in my case since I need to precisely control when buffer flips occur on a panel-by-panel basis, which (insofar as I know) is impossible in Swing.\r\n\r\nIs there any solution for this without a radical rewrite (i.e., migrating away from Swing, etc.)?\r\n\r\nI should also note that I **don&#39;t** want to disable the UI scaling (e.g., using `-Dsun.java2d.uiScale=1` in VM options), hence &quot;just disable UI scaling&quot; isn&#39;t really a solution.\r\n\r\n  [1]: https://i.stack.imgur.com/HG05E.png","title":"How can I avoid garbled text and vector graphics in Java Swing with UI scaling and off-screen buffering?","body":"<p>I'm developing a Java application where several <code>JPanel</code>s (<em>not</em> <code>JFrame</code>s) have complex animations that necessitate drawing to an off-screen buffer before blitting to the display surface. A problem I'm having is that Swing is performing UI scaling for high-DPI screens, and the off-screen buffer (a raster) isn't &quot;aware&quot; of the scaling. Consequently, when text or graphics are rendered to the buffer, and the buffer is blitted to the <code>JPanel</code>, Swing scales the graphic as a raster and the result looks like garbage.</p>\n<p>A simple example is:</p>\n<pre><code>import java.awt.*;\nimport java.awt.geom.Line2D;\n\nimport javax.swing.JComponent;\nimport javax.swing.JFrame;\n\npublic class Main {\n    public static void main(String[] args) {\n        JFrame jf = new JFrame(&quot;Demo&quot;);\n        Container cp = jf.getContentPane();\n        MyCanvas tl = new MyCanvas();\n        cp.add(tl);\n        jf.setSize(500, 250);\n        jf.setVisible(true);\n        jf.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );\n    }\n}\n\nclass MyCanvas extends JComponent {\n\n    @Override\n    public void paintComponent(Graphics g) {\n        if( g instanceof Graphics2D g2 ) {\n            g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\n                RenderingHints.VALUE_ANTIALIAS_ON);\n\n            g2.setFont( Font.decode( &quot;Times New Roman-26&quot; ) );\n            g2.drawString(&quot;The poorly-scaled cake is a lie.&quot;,70,40);\n            g2.setStroke( new BasicStroke( 2.3f ) );\n            g2.draw( new Line2D.Double( 420, 10, 425, 70 ) );\n\n            Image I = createImage( 500, 150 );\n            Graphics2D g2_ = (Graphics2D)I.getGraphics();\n            g2_.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\n                RenderingHints.VALUE_ANTIALIAS_ON);\n            g2_.setColor( Color.BLACK );\n            g2_.setFont( Font.decode( &quot;Times New Roman-26&quot; ) );\n            g2_.drawString( &quot;The poorly-scaled cake is a lie.&quot;,70,40 );\n            g2_.setStroke( new BasicStroke( 2.3f ) );\n            g2_.draw( new Line2D.Double( 420, 10, 425, 70 ) );\n            g2_.dispose();\n            g2.drawImage( I, 0, 130, null );\n        }\n    }\n}\n</code></pre>\n<p>From this, compiling with JDK 20 on my Windows 11 machine, I get:</p>\n<p><a href=\"https://i.stack.imgur.com/HG05E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HG05E.png\" alt=\"example of poor UI scaling in Java Swing\" /></a></p>\n<p>On the top is text and graphics rendered directly to the <code>JPanel</code>. On the bottom is the same content rendered via an intermediary image.</p>\n<p>Ideally, I'm looking for a method, e.g., <code>Image createScalingAwareBuffer( JPanel jp, int width, int height )</code> that returns an image <code>I</code>, in the same vein as <code>JPanel.createImage( ... )</code> but where the returned <code>Image</code> is <em>vector</em> scaling aware, such that <code>jp.drawImage( I )</code> or equivalent displays the lower graphic content identically to the upper content.</p>\n<p>I suspect that rendering to the back buffer in a double-buffered Swing component has this kind of &quot;awareness&quot;, but this isn't an option in my case since I need to precisely control when buffer flips occur on a panel-by-panel basis, which (insofar as I know) is impossible in Swing.</p>\n<p>Is there any solution for this without a radical rewrite (i.e., migrating away from Swing, etc.)?</p>\n<p>I should also note that I <strong>don't</strong> want to disable the UI scaling (e.g., using <code>-Dsun.java2d.uiScale=1</code> in VM options), hence &quot;just disable UI scaling&quot; isn't really a solution.</p>\n"},{"tags":["javascript","java","android","reverse-engineering","frida"],"answers":[{"tags":[],"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1691530402,"creation_date":1634888899,"answer_id":69673164,"question_id":69668741,"body_markdown":"Looks like the common problem in Frida that the way to access fields is different in Frida. \r\n\r\nFrida uses JavaScript code so it can&#39;t handle non-JavaScript objects directly.\r\nTherefore it wraps &quot;native&quot; objects (Android Java objects in this case) in JavaScript objects.\r\n\r\nIf you now call in Frida `this.carrier` you are getting the Frida JavaScript wrapper, not the Java Carrier instance you are aiming.\r\n\r\nOf course the Frida JavaScript wrapper does not has the methods you try to call, therefore `this.carrier.setId(123);` will always fail.\r\n\r\n\r\n# Accessing a Java field with Frida\r\n\r\nTo access a field you always have to call `.value` on it to get the actual value:\r\n\r\nSo if you want `this.carrier` you have to use `this.carrier.value`.\r\n\r\nIn case there is a name collision with a method of the same name Frida by default assigns the name to the method. If you want to access the field instead add an underscore an the beginning of the field name.\r\nIf there would exist a method named `carrier` you could access the field this way: `this._carrier.value`\r\n\r\n## Reference to Frida help pages\r\n\r\nThis is also described on the Frida pages, e.g. [here][1]: \r\n&gt; Note we use `this.m.value = 0` instead of `this.m = 0` to set the field’s value. If there is also a method in this class called m, we need to use `this._m.value = 0` to set the value of field m. In general, when looking at the properties of objects it will be necessary to use `.value` to access the values those fields refer to.\r\n\r\n# Complete simplified code\r\n\r\nBut in your case you can simplify everything by just using a local variable:\r\n\r\n    Java.perform(function () {\r\n        var SignUpActivity = Java.use(&#39;com.app.features.authentication.SignUpActivity&#39;);\r\n        SignUpActivity.validatePhoneNumber.implementation = function() {\r\n            \r\n            const Carrier = Java.use(&quot;com.app.Carrier&quot;);\r\n            const c = Carrier.$new();\r\n            c.setId(123);\r\n            this._carrier.value = c;\r\n        };\r\n    });\r\n\r\n\r\n  [1]: https://frida.re/docs/examples/android/#example-tool-built-for-an-android-ctf","title":"Setting a member in current class using Frida","body":"<p>Looks like the common problem in Frida that the way to access fields is different in Frida.</p>\n<p>Frida uses JavaScript code so it can't handle non-JavaScript objects directly.\nTherefore it wraps &quot;native&quot; objects (Android Java objects in this case) in JavaScript objects.</p>\n<p>If you now call in Frida <code>this.carrier</code> you are getting the Frida JavaScript wrapper, not the Java Carrier instance you are aiming.</p>\n<p>Of course the Frida JavaScript wrapper does not has the methods you try to call, therefore <code>this.carrier.setId(123);</code> will always fail.</p>\n<h1>Accessing a Java field with Frida</h1>\n<p>To access a field you always have to call <code>.value</code> on it to get the actual value:</p>\n<p>So if you want <code>this.carrier</code> you have to use <code>this.carrier.value</code>.</p>\n<p>In case there is a name collision with a method of the same name Frida by default assigns the name to the method. If you want to access the field instead add an underscore an the beginning of the field name.\nIf there would exist a method named <code>carrier</code> you could access the field this way: <code>this._carrier.value</code></p>\n<h2>Reference to Frida help pages</h2>\n<p>This is also described on the Frida pages, e.g. <a href=\"https://frida.re/docs/examples/android/#example-tool-built-for-an-android-ctf\" rel=\"nofollow noreferrer\">here</a>:</p>\n<blockquote>\n<p>Note we use <code>this.m.value = 0</code> instead of <code>this.m = 0</code> to set the field’s value. If there is also a method in this class called m, we need to use <code>this._m.value = 0</code> to set the value of field m. In general, when looking at the properties of objects it will be necessary to use <code>.value</code> to access the values those fields refer to.</p>\n</blockquote>\n<h1>Complete simplified code</h1>\n<p>But in your case you can simplify everything by just using a local variable:</p>\n<pre><code>Java.perform(function () {\n    var SignUpActivity = Java.use('com.app.features.authentication.SignUpActivity');\n    SignUpActivity.validatePhoneNumber.implementation = function() {\n        \n        const Carrier = Java.use(&quot;com.app.Carrier&quot;);\n        const c = Carrier.$new();\n        c.setId(123);\n        this._carrier.value = c;\n    };\n});\n</code></pre>\n"}],"owner":{"account_id":451985,"reputation":133,"user_id":848165,"accept_rate":17,"display_name":"toothpick"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2705,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69673164,"answer_count":1,"score":1,"last_activity_date":1691530402,"creation_date":1634850043,"question_id":69668741,"body_markdown":"I am hooking a certain function in Frida which uses the code:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    this.carrier.getId()\r\n\r\nHowever, at this point in time *this.carrier* has not been set yet, which causes the app to crash.   \r\nSo I am thinking of manually setting this member in the current function in the class. So that carrier will exist by the time the code takes place.   \r\nThe problem is that I encounter a problem by doing that.   \r\n\r\nSo far this is what I got:\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    Java.perform(function () {\r\n        var SignUpActivity = Java.use(&#39;com.app.features.authentication.SignUpActivity&#39;);\r\n        SignUpActivity.validatePhoneNumber.implementation = function() {\r\n            \r\n            var Carrier = Java.use(&quot;com.app.Carrier&quot;);\r\n            this.carrier = Carrier.$new();\r\n            console.log(this.carrier) // This prints &quot;[object Object]&quot;\r\n            console.log(this.carrier.setId) // This prints &quot;undefined&quot;\r\n            this.carrier.setId(123); // crashes\r\n\r\n        };\r\n    });\r\n\r\nCode of carrier:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    package com.app;\r\n\r\n    import android.os.Parcel;\r\n    import android.os.Parcelable;\r\n\r\n    public class Carrier implements Parcelable {\r\n\r\n        private int id;\r\n        private String name;\r\n        private String officeTerminalAddress;\r\n\r\n        public Carrier() {\r\n        }\r\n\r\n        protected Carrier(Parcel parcel) {\r\n            this.id = parcel.readInt();\r\n            this.name = parcel.readString();\r\n            this.officeTerminalAddress = parcel.readString();\r\n        }\r\n\r\n        public int getId() {\r\n            return this.id;\r\n        }\r\n\r\n        public void setId(int i) {\r\n            this.id = i;\r\n        }\r\n\r\n    }","title":"Setting a member in current class using Frida","body":"<p>I am hooking a certain function in Frida which uses the code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>this.carrier.getId()\n</code></pre>\n<p>However, at this point in time <em>this.carrier</em> has not been set yet, which causes the app to crash.<br />\nSo I am thinking of manually setting this member in the current function in the class. So that carrier will exist by the time the code takes place.<br />\nThe problem is that I encounter a problem by doing that.</p>\n<p>So far this is what I got:</p>\n<pre class=\"lang-js prettyprint-override\"><code>Java.perform(function () {\n    var SignUpActivity = Java.use('com.app.features.authentication.SignUpActivity');\n    SignUpActivity.validatePhoneNumber.implementation = function() {\n        \n        var Carrier = Java.use(&quot;com.app.Carrier&quot;);\n        this.carrier = Carrier.$new();\n        console.log(this.carrier) // This prints &quot;[object Object]&quot;\n        console.log(this.carrier.setId) // This prints &quot;undefined&quot;\n        this.carrier.setId(123); // crashes\n\n    };\n});\n</code></pre>\n<p>Code of carrier:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.app;\n\nimport android.os.Parcel;\nimport android.os.Parcelable;\n\npublic class Carrier implements Parcelable {\n\n    private int id;\n    private String name;\n    private String officeTerminalAddress;\n\n    public Carrier() {\n    }\n\n    protected Carrier(Parcel parcel) {\n        this.id = parcel.readInt();\n        this.name = parcel.readString();\n        this.officeTerminalAddress = parcel.readString();\n    }\n\n    public int getId() {\n        return this.id;\n    }\n\n    public void setId(int i) {\n        this.id = i;\n    }\n\n}\n</code></pre>\n"},{"tags":["javascript","java","android","security","frida"],"answers":[{"comments":[{"owner":{"account_id":17873765,"reputation":101,"user_id":12984381,"display_name":"alm"},"score":0,"creation_date":1583002822,"post_id":60467285,"comment_id":106973353,"body_markdown":"Thanks for your tip. It got better, but the wrong attribute is still being searched.\nI try this code\n\n```\n      var vvv1 = Java.use(&#39;e.a.x.e&#39;); \n       var vvv2 = Java.cast(this._a.value,vvv1);\n```\n\nand get error\nError: Cast from &#39;java.util.concurrent.atomic.AtomicBoolean&#39; to &#39;e.a.x.e&#39; isn&#39;t possible","body":"Thanks for your tip. It got better, but the wrong attribute is still being searched. I try this code  ```       var vvv1 = Java.use(&#39;e.a.x.e&#39;);         var vvv2 = Java.cast(this._a.value,vvv1); ```  and get error Error: Cast from &#39;java.util.concurrent.atomic.AtomicBoolean&#39; to &#39;e.a.x.e&#39; isn&#39;t possible"},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1583064116,"post_id":60467285,"comment_id":106984089,"body_markdown":"Yes, I missed some details. See my updated answer for an approach via reflection. Hopefully this approach works in your case. May be you should think about opening an [issue](https://github.com/frida/frida-java-bridge/issues) on the Frida Java-bridge project how to access the field not by their name but e.g. by it&#39;s type and/or index.","body":"Yes, I missed some details. See my updated answer for an approach via reflection. Hopefully this approach works in your case. May be you should think about opening an <a href=\"https://github.com/frida/frida-java-bridge/issues\" rel=\"nofollow noreferrer\">issue</a> on the Frida Java-bridge project how to access the field not by their name but e.g. by it&#39;s type and/or index."}],"tags":[],"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691530031,"creation_date":1582993727,"answer_id":60467285,"question_id":60465832,"body_markdown":"In case there is a conflict between a method and a field of the same name Frida has built in workaround: Prepend the field name with an underscore: `_a`.\r\n\r\n&gt; If there is a name collision, method &amp; member has the same name, an underscore will be added to member.\r\n\r\nBut I am not sure if this information is still valid. The current Frida Java bridge code does not like it would rename fields with colliding field names: https://github.com/frida/frida-java-bridge/blob/master/lib/class-factory.js#L301\r\n\r\nI also don&#39;t see a way to access the fields in Frida in a way that don&#39;t base on it&#39;s name. \r\n\r\nThe only chance I see is accessing the field via Java reflection:\r\n\r\n    const eaxe = Java.use(&quot;e.a.x.e&quot;);\r\n    for (f of eaxe.class.getDeclaredFields()) {\r\n        if (f.getType().getName() == &quot;e.a.x.e&quot;) {\r\n            f.setAccessible(true);\r\n            var fieldValue = f.get(this);\r\n            console.log(&quot;Field of type e.a.x.e has value: &quot; + fieldValue);\r\n        }\r\n    }\r\n\r\nNote: The code above has not been tested in Frida, therefore it may need some more refinement before it actually works.","title":"Frida - access to a class attribute that has the desired type","body":"<p>In case there is a conflict between a method and a field of the same name Frida has built in workaround: Prepend the field name with an underscore: <code>_a</code>.</p>\n<blockquote>\n<p>If there is a name collision, method &amp; member has the same name, an underscore will be added to member.</p>\n</blockquote>\n<p>But I am not sure if this information is still valid. The current Frida Java bridge code does not like it would rename fields with colliding field names: <a href=\"https://github.com/frida/frida-java-bridge/blob/master/lib/class-factory.js#L301\" rel=\"nofollow noreferrer\">https://github.com/frida/frida-java-bridge/blob/master/lib/class-factory.js#L301</a></p>\n<p>I also don't see a way to access the fields in Frida in a way that don't base on it's name.</p>\n<p>The only chance I see is accessing the field via Java reflection:</p>\n<pre><code>const eaxe = Java.use(&quot;e.a.x.e&quot;);\nfor (f of eaxe.class.getDeclaredFields()) {\n    if (f.getType().getName() == &quot;e.a.x.e&quot;) {\n        f.setAccessible(true);\n        var fieldValue = f.get(this);\n        console.log(&quot;Field of type e.a.x.e has value: &quot; + fieldValue);\n    }\n}\n</code></pre>\n<p>Note: The code above has not been tested in Frida, therefore it may need some more refinement before it actually works.</p>\n"},{"tags":[],"owner":{"account_id":17873765,"reputation":101,"user_id":12984381,"display_name":"alm"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1583149456,"creation_date":1583149456,"answer_id":60488176,"question_id":60465832,"body_markdown":"Thanks to Robert, a solution was found.The code made minor corrections\r\n\r\n    var lo_fld_eaxe;\r\n    var lv_found = false;\r\n    var lt_fields = this.getClass().getDeclaredFields();\r\n    for (var i = 0; i &lt; lt_fields.length &amp;&amp; lv_found == false; i++) {\r\n        if(lt_fields[i].getName().toString() == &#39;a&#39; &amp;&amp;  lt_fields[i].getType().getName().toString() == &#39;e.a.x.e&#39; ){\r\n           lo_fld_eaxe = lt_fields[i];\r\n           lv_found = true; \r\n      }\r\n    }\r\n    if(lv_found == true) {\r\n       lo_fld_eaxe.setAccessible(true);\r\n       try{ \r\n              var       lv_e_a_x_e = lo_fld_eaxe.get(this);   \r\n       }\r\n       catch(err){\r\n              console.log(&quot;Error:&quot;+err);\r\n       }\r\n     }\r\n\r\n","title":"Frida - access to a class attribute that has the desired type","body":"<p>Thanks to Robert, a solution was found.The code made minor corrections</p>\n\n<pre><code>var lo_fld_eaxe;\nvar lv_found = false;\nvar lt_fields = this.getClass().getDeclaredFields();\nfor (var i = 0; i &lt; lt_fields.length &amp;&amp; lv_found == false; i++) {\n    if(lt_fields[i].getName().toString() == 'a' &amp;&amp;  lt_fields[i].getType().getName().toString() == 'e.a.x.e' ){\n       lo_fld_eaxe = lt_fields[i];\n       lv_found = true; \n  }\n}\nif(lv_found == true) {\n   lo_fld_eaxe.setAccessible(true);\n   try{ \n          var       lv_e_a_x_e = lo_fld_eaxe.get(this);   \n   }\n   catch(err){\n          console.log(\"Error:\"+err);\n   }\n }\n</code></pre>\n"}],"owner":{"account_id":17873765,"reputation":101,"user_id":12984381,"display_name":"alm"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4530,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":60488176,"answer_count":2,"score":2,"last_activity_date":1691530031,"creation_date":1582984189,"question_id":60465832,"body_markdown":"I have an android program that has been obfuscated. And in this program classes have attributes with the same name.\r\nDecompiled code like this\r\n\r\n    public class d implements c\r\n    {\r\n        public int a;\r\n        public Cache$Entry a;\r\n        public Cache a;\r\n        public volatile a a;\r\n        public e a;\r\n        public ByteArrayOutputStream a;\r\n        public volatile AtomicBoolean a;\r\n\r\nor smali code like this\r\n\r\n    # interfaces\r\n    .implements Le/a/x/c;\r\n    # instance fields\r\n    .field public a:I\r\n    .field public a:Lanetwork/channel/cache/Cache$Entry;\r\n    .field public a:Lanetwork/channel/cache/Cache;\r\n    .field public volatile a:Ld/a/w/a;\r\n    .field public a:Le/a/x/e;\r\n    .field public a:Ljava/io/ByteArrayOutputStream;\r\n    .field public volatile a:Ljava/util/concurrent/atomic/AtomicBoolean;  \r\n\r\nI create a hook to one method asd() and i need to access to attribute &quot;a&quot; of this class. But I need attribute &quot;a&quot; with type &quot;e.a.x.e&quot;\r\n\r\n    Java.perform(function () {\r\n       var var_ddd = Java.use(&quot;e.a.x.d&quot;);\r\n        var_ddd.asd.implementation = function() {\r\n           this.asd();\r\n           console.log(&quot;e.a.x.d.asd()&quot;,Java.cast(this.a.value,Java.use(&quot;e.a.x.e&quot;)));\r\n        };\r\n    });\r\n\r\nWhen I try to write this.a.value - I get a wrong attribute.\r\nWhen I write Java.cast(this.a.value,Java.use(&quot;e.a.x.e&quot;))\r\nI get message\r\n\r\n    TypeError: cannot read property &#39;hasOwnProperty&#39; of undefined\r\n\r\n\r\nPlease tell me how to get the right attribute with the right type","title":"Frida - access to a class attribute that has the desired type","body":"<p>I have an android program that has been obfuscated. And in this program classes have attributes with the same name.\nDecompiled code like this</p>\n\n<pre><code>public class d implements c\n{\n    public int a;\n    public Cache$Entry a;\n    public Cache a;\n    public volatile a a;\n    public e a;\n    public ByteArrayOutputStream a;\n    public volatile AtomicBoolean a;\n</code></pre>\n\n<p>or smali code like this</p>\n\n<pre><code># interfaces\n.implements Le/a/x/c;\n# instance fields\n.field public a:I\n.field public a:Lanetwork/channel/cache/Cache$Entry;\n.field public a:Lanetwork/channel/cache/Cache;\n.field public volatile a:Ld/a/w/a;\n.field public a:Le/a/x/e;\n.field public a:Ljava/io/ByteArrayOutputStream;\n.field public volatile a:Ljava/util/concurrent/atomic/AtomicBoolean;  \n</code></pre>\n\n<p>I create a hook to one method asd() and i need to access to attribute \"a\" of this class. But I need attribute \"a\" with type \"e.a.x.e\"</p>\n\n<pre><code>Java.perform(function () {\n   var var_ddd = Java.use(\"e.a.x.d\");\n    var_ddd.asd.implementation = function() {\n       this.asd();\n       console.log(\"e.a.x.d.asd()\",Java.cast(this.a.value,Java.use(\"e.a.x.e\")));\n    };\n});\n</code></pre>\n\n<p>When I try to write this.a.value - I get a wrong attribute.\nWhen I write Java.cast(this.a.value,Java.use(\"e.a.x.e\"))\nI get message</p>\n\n<pre><code>TypeError: cannot read property 'hasOwnProperty' of undefined\n</code></pre>\n\n<p>Please tell me how to get the right attribute with the right type</p>\n"},{"tags":["java","google-cloud-dataflow","avro","apache-beam-io","beam"],"comments":[{"owner":{"account_id":23523457,"reputation":1405,"user_id":17570298,"display_name":"Shipra Sarkar"},"score":0,"creation_date":1670942586,"post_id":74782750,"comment_id":131986510,"body_markdown":"Hi @oikonomiyaki, Can you try using the read class as mentioned in this [documentation](https://beam.apache.org/releases/javadoc/2.0.0/index.html?org/apache/beam/sdk/io/AvroIO.html) ? Let me know if that helps.","body":"Hi @oikonomiyaki, Can you try using the read class as mentioned in this <a href=\"https://beam.apache.org/releases/javadoc/2.0.0/index.html?org/apache/beam/sdk/io/AvroIO.html\" rel=\"nofollow noreferrer\">documentation</a> ? Let me know if that helps."},{"owner":{"account_id":4306523,"reputation":7811,"user_id":3518757,"accept_rate":73,"display_name":"oikonomiyaki"},"score":0,"creation_date":1671010591,"post_id":74782750,"comment_id":132002711,"body_markdown":"@ShipraSarkar It requires a coder though, which in the example in the documentation is not specified.","body":"@ShipraSarkar It requires a coder though, which in the example in the documentation is not specified."},{"owner":{"account_id":23523457,"reputation":1405,"user_id":17570298,"display_name":"Shipra Sarkar"},"score":0,"creation_date":1671188716,"post_id":74782750,"comment_id":132050188,"body_markdown":"Hi @oikonomiyaki, Can you try using [parseGenericRecords](https://beam.apache.org/releases/javadoc/2.33.0/org/apache/beam/sdk/io/AvroIO.html#parseGenericRecords-org.apache.beam.sdk.transforms.SerializableFunction-) ? Let me know if that helps.","body":"Hi @oikonomiyaki, Can you try using <a href=\"https://beam.apache.org/releases/javadoc/2.33.0/org/apache/beam/sdk/io/AvroIO.html#parseGenericRecords-org.apache.beam.sdk.transforms.SerializableFunction-\" rel=\"nofollow noreferrer\">parseGenericRecords</a> ? Let me know if that helps."}],"answers":[{"comments":[{"owner":{"account_id":4306523,"reputation":7811,"user_id":3518757,"accept_rate":73,"display_name":"oikonomiyaki"},"score":0,"creation_date":1671004320,"post_id":74789049,"comment_id":132000931,"body_markdown":"It requires a Coder in the withCoder method.","body":"It requires a Coder in the withCoder method."}],"tags":[],"owner":{"account_id":24493709,"reputation":161,"user_id":18410362,"display_name":"pranavbhandari"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1670954057,"creation_date":1670954057,"answer_id":74789049,"question_id":74782750,"body_markdown":"To read a PCollection of filepatterns whose schema is unknown at pipeline construction time or differs between files, you can use [`parseAllGenericRecords(org.apache.beam.sdk.transforms.SerializableFunction&lt;org.apache.avro.generic.GenericRecord, T&gt;)`](https://beam.apache.org/releases/javadoc/2.3.0/org/apache/beam/sdk/io/AvroIO.html#parseAllGenericRecords-org.apache.beam.sdk.transforms.SerializableFunction-)\r\n\r\nIn your case, your serializable function can just return the GenericRecord\r\n\r\nFor example:\r\n\r\n```\r\n\r\n Pipeline p = ...;\r\n\r\n PCollection&lt;GenericRecord&gt; records =\r\n     p.apply(AvroIO.parseAllGenericRecords(new SerializableFunction&lt;GenericRecord, GenericRecord&gt;() {\r\n       public GenericRecord apply(GenericRecord record) {\r\n         // If needed, access the schema of the record using record.getSchema()\r\n         return record;\r\n       }\r\n     }));\r\n```","title":"Reading Avro files in GCS as PCollection&lt;GenericRecord&gt;","body":"<p>To read a PCollection of filepatterns whose schema is unknown at pipeline construction time or differs between files, you can use <a href=\"https://beam.apache.org/releases/javadoc/2.3.0/org/apache/beam/sdk/io/AvroIO.html#parseAllGenericRecords-org.apache.beam.sdk.transforms.SerializableFunction-\" rel=\"nofollow noreferrer\"><code>parseAllGenericRecords(org.apache.beam.sdk.transforms.SerializableFunction&lt;org.apache.avro.generic.GenericRecord, T&gt;)</code></a></p>\n<p>In your case, your serializable function can just return the GenericRecord</p>\n<p>For example:</p>\n<pre><code>\n Pipeline p = ...;\n\n PCollection&lt;GenericRecord&gt; records =\n     p.apply(AvroIO.parseAllGenericRecords(new SerializableFunction&lt;GenericRecord, GenericRecord&gt;() {\n       public GenericRecord apply(GenericRecord record) {\n         // If needed, access the schema of the record using record.getSchema()\n         return record;\n       }\n     }));\n</code></pre>\n"}],"owner":{"account_id":4306523,"reputation":7811,"user_id":3518757,"accept_rate":73,"display_name":"oikonomiyaki"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":528,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691529888,"creation_date":1670924493,"question_id":74782750,"body_markdown":"Our Dataflow job, written in Python, listens from a Pubsub subscription. The messages are strings of GCS file path of Avro files (`gs://bucket/file-timestamp.avro`). The avro files are not of uniform schema, but Beam Python&#39;s `avroio.ReadAllFromAvro` is good enough to parse generically the records of the avro file in GCS as dictionaries.\r\n\r\n```\r\n# Python code\r\npipeline\r\n\t| &quot;Read from Pub/Sub&quot; &gt;&gt; beam.io.ReadFromPubSub(subscription=input_subscription)\r\n\t| &quot;Read Avro Files&quot; &gt;&gt; avroio.ReadAllFromAvro(with_filename=True)\r\n```\r\n\r\nThe expected form of the resulting PTransform is a tuple: `(same_gcs_filepath, record_as_dict)` \r\n\r\nBecause of some limitations in Python, we need to convert our code to Java. We can read from Pubsub alright, however, we don&#39;t know yet how to use `AvroIO` in order to get a resulting `PCollection&lt;GenericRecord&gt;` without specifying a schema. \r\n\r\n```\r\n// Java code\r\npipeline\r\n  .apply(&quot;Read from Pub/Sub&quot;, PubsubIO.fromSubscription(options.getInputSubscription()))\r\n  .apply(&quot;Read Avro Files&quot;, AvroIO.__________________)\r\n```\r\n\r\nIt would be better if the original `gcs_filepath` is passed along with it just like what we do in Python. Do I need to use `FileIO` in tandem with `AvroIO`? How do I achieve this?\r\n\r\n**Update:**\r\n\r\n```\r\npipeline\r\n  .apply(&quot;Read from Pub/Sub&quot;, PubsubIO.fromSubscription(options.getInputSubscription()))\r\n  .apply(&quot;Read Avro Files&quot;, FileIO.matchAll())\r\n  .apply(FileIO.readMatches())\r\n  .apply(AvroIO.parseFilesGenericRecords(record -&gt; record))\r\n```\r\n\r\nThe code above lead me to some progress, but then it is complaining that I should be providing a coder\r\n\r\n```\r\njava.lang.IllegalArgumentException: Unable to infer coder for output of parseFn. Specify it explicitly using withCoder()\r\n```\r\n\r\nwhich in the last line should look like this:\r\n\r\n```\r\n  .apply(AvroIO.parseFilesGenericRecords(record -&gt; record).withCoder(someCoder))\r\n```\r\n\r\nBut then, `someCoder` requires a specific schema, which I can&#39;t really provide as the incoming avro file can be of different schema.","title":"Reading Avro files in GCS as PCollection&lt;GenericRecord&gt;","body":"<p>Our Dataflow job, written in Python, listens from a Pubsub subscription. The messages are strings of GCS file path of Avro files (<code>gs://bucket/file-timestamp.avro</code>). The avro files are not of uniform schema, but Beam Python's <code>avroio.ReadAllFromAvro</code> is good enough to parse generically the records of the avro file in GCS as dictionaries.</p>\n<pre><code># Python code\npipeline\n    | &quot;Read from Pub/Sub&quot; &gt;&gt; beam.io.ReadFromPubSub(subscription=input_subscription)\n    | &quot;Read Avro Files&quot; &gt;&gt; avroio.ReadAllFromAvro(with_filename=True)\n</code></pre>\n<p>The expected form of the resulting PTransform is a tuple: <code>(same_gcs_filepath, record_as_dict)</code></p>\n<p>Because of some limitations in Python, we need to convert our code to Java. We can read from Pubsub alright, however, we don't know yet how to use <code>AvroIO</code> in order to get a resulting <code>PCollection&lt;GenericRecord&gt;</code> without specifying a schema.</p>\n<pre><code>// Java code\npipeline\n  .apply(&quot;Read from Pub/Sub&quot;, PubsubIO.fromSubscription(options.getInputSubscription()))\n  .apply(&quot;Read Avro Files&quot;, AvroIO.__________________)\n</code></pre>\n<p>It would be better if the original <code>gcs_filepath</code> is passed along with it just like what we do in Python. Do I need to use <code>FileIO</code> in tandem with <code>AvroIO</code>? How do I achieve this?</p>\n<p><strong>Update:</strong></p>\n<pre><code>pipeline\n  .apply(&quot;Read from Pub/Sub&quot;, PubsubIO.fromSubscription(options.getInputSubscription()))\n  .apply(&quot;Read Avro Files&quot;, FileIO.matchAll())\n  .apply(FileIO.readMatches())\n  .apply(AvroIO.parseFilesGenericRecords(record -&gt; record))\n</code></pre>\n<p>The code above lead me to some progress, but then it is complaining that I should be providing a coder</p>\n<pre><code>java.lang.IllegalArgumentException: Unable to infer coder for output of parseFn. Specify it explicitly using withCoder()\n</code></pre>\n<p>which in the last line should look like this:</p>\n<pre><code>  .apply(AvroIO.parseFilesGenericRecords(record -&gt; record).withCoder(someCoder))\n</code></pre>\n<p>But then, <code>someCoder</code> requires a specific schema, which I can't really provide as the incoming avro file can be of different schema.</p>\n"},{"tags":["java","sap-commerce-cloud"],"comments":[{"owner":{"account_id":3392662,"reputation":5537,"user_id":2847159,"display_name":"mkysoft"},"score":0,"creation_date":1691067298,"post_id":76827127,"comment_id":135443361,"body_markdown":"what is your DB? You can use APM tools to find whole details.","body":"what is your DB? You can use APM tools to find whole details."},{"owner":{"account_id":11171469,"reputation":47,"user_id":8198318,"display_name":"iamrooovic"},"score":0,"creation_date":1691107097,"post_id":76827127,"comment_id":135450791,"body_markdown":"For our local, we use HSQLDB while SQL Server in our environments. Even in our local, we encounter this issue. We have Dynatrace but I don&#39;t think it is properly set up yet because I can&#39;t see our application there.","body":"For our local, we use HSQLDB while SQL Server in our environments. Even in our local, we encounter this issue. We have Dynatrace but I don&#39;t think it is properly set up yet because I can&#39;t see our application there."},{"owner":{"account_id":3392662,"reputation":5537,"user_id":2847159,"display_name":"mkysoft"},"score":0,"creation_date":1691345948,"post_id":76827127,"comment_id":135476055,"body_markdown":"The HSQLDB is very slow. I prefer MYSQL/MariaDB for local development.","body":"The HSQLDB is very slow. I prefer MYSQL/MariaDB for local development."}],"answers":[{"tags":[],"owner":{"account_id":4574171,"reputation":79,"user_id":3713070,"accept_rate":67,"display_name":"fredyjimenezrendon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691529553,"creation_date":1691529553,"answer_id":76863265,"question_id":76827127,"body_markdown":"If your project has a large number of products/categories/price rows, try to use a different cache region for those types.\r\n\r\nThis configuration has worked for me in the past:\r\n\r\n    regioncache.productregion.size=100000\r\n    regioncache.productregion.evictionpolicy=LRU\r\n    regioncache.productregion.exclusiveComputation=false\r\n    regioncache.productregion.statsEnabled=true\r\n    regioncache.categoryregion.size=100000\r\n    regioncache.categoryregion.evictionpolicy=LRU\r\n    regioncache.categoryregion.exclusiveComputation=false\r\n    regioncache.categoryregion.statsEnabled=true\r\n    regioncache.pricerowregion.size=100000\r\n    regioncache.pricerowregion.evictionpolicy=LRU\r\n    regioncache.pricerowregion.exclusiveComputation=false\r\n    regioncache.pricerowregion.statsEnabled=true","title":"Hybris DefaultB2BCheckoutFacade.placeOrder taking too long to finish","body":"<p>If your project has a large number of products/categories/price rows, try to use a different cache region for those types.</p>\n<p>This configuration has worked for me in the past:</p>\n<pre><code>regioncache.productregion.size=100000\nregioncache.productregion.evictionpolicy=LRU\nregioncache.productregion.exclusiveComputation=false\nregioncache.productregion.statsEnabled=true\nregioncache.categoryregion.size=100000\nregioncache.categoryregion.evictionpolicy=LRU\nregioncache.categoryregion.exclusiveComputation=false\nregioncache.categoryregion.statsEnabled=true\nregioncache.pricerowregion.size=100000\nregioncache.pricerowregion.evictionpolicy=LRU\nregioncache.pricerowregion.exclusiveComputation=false\nregioncache.pricerowregion.statsEnabled=true\n</code></pre>\n"}],"owner":{"account_id":11171469,"reputation":47,"user_id":8198318,"display_name":"iamrooovic"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691529553,"creation_date":1691057894,"question_id":76827127,"body_markdown":"I&#39;d like to ask about possible causes/solutions for our current issue. We have a simple checkout page. Inside, we have 5 products only. After clicking the place order button, we call our controller. Inside this controller, we only do simple validations like user, terms, and authorized payment. We also load the cart here. By the end, we call the placeOrder of DefaultB2BCheckoutFacade. We didn&#39;t create our custom class so this is out of the box from the b2b-accelerator. With 5 products, we are seeing 18 seconds to fully process the request. Can you please help us understand the issue?\r\n\r\n**EDIT:** I overrode the placeOrder method of DefaultB2BCheckoutFacade with the exact logic. Below are the times it took to finish each call.\r\n\r\nValidation took: 5.6497767 seconds -&gt; `if (isValidCheckoutCart(placeOrderData))`\r\n\r\nPlace order took: 6.5388391 seconds -&gt; `return (T) super.placeOrder();`\r\n\r\nTotal time took: 12.1888468 seconds -&gt; placeOrder method","title":"Hybris DefaultB2BCheckoutFacade.placeOrder taking too long to finish","body":"<p>I'd like to ask about possible causes/solutions for our current issue. We have a simple checkout page. Inside, we have 5 products only. After clicking the place order button, we call our controller. Inside this controller, we only do simple validations like user, terms, and authorized payment. We also load the cart here. By the end, we call the placeOrder of DefaultB2BCheckoutFacade. We didn't create our custom class so this is out of the box from the b2b-accelerator. With 5 products, we are seeing 18 seconds to fully process the request. Can you please help us understand the issue?</p>\n<p><strong>EDIT:</strong> I overrode the placeOrder method of DefaultB2BCheckoutFacade with the exact logic. Below are the times it took to finish each call.</p>\n<p>Validation took: 5.6497767 seconds -&gt; <code>if (isValidCheckoutCart(placeOrderData))</code></p>\n<p>Place order took: 6.5388391 seconds -&gt; <code>return (T) super.placeOrder();</code></p>\n<p>Total time took: 12.1888468 seconds -&gt; placeOrder method</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9874,"page":260,"page_size":100}
