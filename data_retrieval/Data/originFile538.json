{"items":[{"tags":["java","spring","soap-client","java-17"],"answers":[{"tags":[],"owner":{"account_id":3672488,"reputation":31,"user_id":3059331,"display_name":"LearnAndHelpLearn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1680104365,"creation_date":1680104365,"answer_id":75879370,"question_id":75870333,"body_markdown":"I was able to identify the cause of the soap client failure. Apache CXF needs the jaxws-rt or the jax-ws-ri dependency explicitly in order to make a soap call after JDK 11. Pre JDK 11, Apache CXF provided the jaxws classes (HttpClientTransport) as part of CXF dependencies. \r\n\r\nThe solution for the problem is to include jaxws-rt and jaxws-ri dependencies for runtime and that resolved my issue.  ","title":"Apache CXF impact when jvm upgrade from jdk 8 to jdk 17","body":"<p>I was able to identify the cause of the soap client failure. Apache CXF needs the jaxws-rt or the jax-ws-ri dependency explicitly in order to make a soap call after JDK 11. Pre JDK 11, Apache CXF provided the jaxws classes (HttpClientTransport) as part of CXF dependencies.</p>\n<p>The solution for the problem is to include jaxws-rt and jaxws-ri dependencies for runtime and that resolved my issue.</p>\n"}],"owner":{"account_id":3672488,"reputation":31,"user_id":3059331,"display_name":"LearnAndHelpLearn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2960,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1680104365,"creation_date":1680031677,"question_id":75870333,"body_markdown":"I am migrating my micro services from jdk8 to jdk 17. As part of the migration, spring cloud and spring boot dependencies have been updated from 2.0 to 3.1.\r\n\r\nI have a soap client to access from the rest API and the soap client is built using Apache CXF with crypto.\r\nI am facing issues making the soap client call as the client is not invoking the service using the generated code from CXF.\r\n\r\nDoes CXF need any changes when the jvm is migrated from 8 to 17 ?\r\n\r\n```\r\n&lt;build&gt;\r\n&lt;plugins&gt;\r\n&lt;plugin&gt;\r\n&lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n&lt;artifactId&gt;cxf-codegen-plugin&lt;/artifactId&gt;\r\n&lt;executions&gt;\r\n&lt;execution&gt;\r\n&lt;id&gt;generate-sources&lt;/id&gt;\r\n&lt;phase&gt;generate-sources&lt;/phase&gt;\r\n&lt;configuration&gt;\r\n&lt;sourceRoot&gt;target/generated/cxf&lt;/sourceRoot&gt;\r\n&lt;wsdlOptions&gt;\r\n&lt;wsdlOption&gt;\t\t\t\t\t\t\t\t\t&lt;wsdl&gt;/src/main/resources/wsdl/Test.wsdl&lt;/wsdl&gt;\t\t\t\t\t\t\t\t\t&lt;wsdlLocation&gt;classpath:wsdl/Test.wsdl&lt;/wsdlLocation&gt;\r\n&lt;/wsdlOption&gt;\r\n&lt;/wsdlOptions&gt;\r\n&lt;/configuration&gt;\r\n&lt;goals&gt;\r\n&lt;goal&gt;wsdl2java&lt;/goal&gt;\r\n&lt;/goals&gt;\r\n&lt;/execution&gt;\r\n&lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n&lt;/plugins&gt;\r\n&lt;/build&gt;`\r\n```","title":"Apache CXF impact when jvm upgrade from jdk 8 to jdk 17","body":"<p>I am migrating my micro services from jdk8 to jdk 17. As part of the migration, spring cloud and spring boot dependencies have been updated from 2.0 to 3.1.</p>\n<p>I have a soap client to access from the rest API and the soap client is built using Apache CXF with crypto.\nI am facing issues making the soap client call as the client is not invoking the service using the generated code from CXF.</p>\n<p>Does CXF need any changes when the jvm is migrated from 8 to 17 ?</p>\n<pre><code>&lt;build&gt;\n&lt;plugins&gt;\n&lt;plugin&gt;\n&lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n&lt;artifactId&gt;cxf-codegen-plugin&lt;/artifactId&gt;\n&lt;executions&gt;\n&lt;execution&gt;\n&lt;id&gt;generate-sources&lt;/id&gt;\n&lt;phase&gt;generate-sources&lt;/phase&gt;\n&lt;configuration&gt;\n&lt;sourceRoot&gt;target/generated/cxf&lt;/sourceRoot&gt;\n&lt;wsdlOptions&gt;\n&lt;wsdlOption&gt;                                    &lt;wsdl&gt;/src/main/resources/wsdl/Test.wsdl&lt;/wsdl&gt;                                 &lt;wsdlLocation&gt;classpath:wsdl/Test.wsdl&lt;/wsdlLocation&gt;\n&lt;/wsdlOption&gt;\n&lt;/wsdlOptions&gt;\n&lt;/configuration&gt;\n&lt;goals&gt;\n&lt;goal&gt;wsdl2java&lt;/goal&gt;\n&lt;/goals&gt;\n&lt;/execution&gt;\n&lt;/executions&gt;\n&lt;/plugin&gt;\n&lt;/plugins&gt;\n&lt;/build&gt;`\n</code></pre>\n"},{"tags":["java","slack"],"answers":[{"tags":[],"owner":{"account_id":5071681,"reputation":51,"user_id":4070279,"display_name":"Mizukamakiri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1680104045,"creation_date":1680104045,"answer_id":75879316,"question_id":75879199,"body_markdown":"Have you tried sending a request to the response_url by using the WebClient class to send a POST request with the desired payload?\r\n\r\nsomething like: \r\n\r\n    public class RespondToSlashCommand {\r\n\r\n    public static void main(String[] args) {\r\n        String responseUrl = &quot;https://hooks.slack.com/commands/YourResponseUrlHere&quot;;\r\n        String message = &quot;This is a response to a slash command.&quot;;\r\n\r\n        // Initialize the Slack API client\r\n        Slack slack = Slack.getInstance();\r\n        SlackHttpClient slackHttpClient = slack.getHttpClient();\r\n\r\n        // Prepare the JSON payload\r\n        String jsonPayload = String.format(&quot;{\\&quot;text\\&quot;: \\&quot;%s\\&quot;}&quot;, message);\r\n        RequestBody requestBody = RequestBody.create(jsonPayload, MediaType.parse(&quot;application/json&quot;));\r\n\r\n        try {\r\n            // Send a POST request to the response_url\r\n            Response response = slackHttpClient.postJsonBody(responseUrl, requestBody);\r\n\r\n            if (response.isSuccessful()) {\r\n                System.out.println(&quot;Response sent successfully!&quot;);\r\n            } else {\r\n                System.out.println(&quot;Failed to send response: &quot; + response.message());\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n","title":"Is there a way to send a response to a Slack user via the Slack API Java SDK?","body":"<p>Have you tried sending a request to the response_url by using the WebClient class to send a POST request with the desired payload?</p>\n<p>something like:</p>\n<pre><code>public class RespondToSlashCommand {\n\npublic static void main(String[] args) {\n    String responseUrl = &quot;https://hooks.slack.com/commands/YourResponseUrlHere&quot;;\n    String message = &quot;This is a response to a slash command.&quot;;\n\n    // Initialize the Slack API client\n    Slack slack = Slack.getInstance();\n    SlackHttpClient slackHttpClient = slack.getHttpClient();\n\n    // Prepare the JSON payload\n    String jsonPayload = String.format(&quot;{\\&quot;text\\&quot;: \\&quot;%s\\&quot;}&quot;, message);\n    RequestBody requestBody = RequestBody.create(jsonPayload, MediaType.parse(&quot;application/json&quot;));\n\n    try {\n        // Send a POST request to the response_url\n        Response response = slackHttpClient.postJsonBody(responseUrl, requestBody);\n\n        if (response.isSuccessful()) {\n            System.out.println(&quot;Response sent successfully!&quot;);\n        } else {\n            System.out.println(&quot;Failed to send response: &quot; + response.message());\n        }\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":14894,"reputation":8953,"user_id":30967,"accept_rate":67,"display_name":"Thomas Einwaller"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":268,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75879316,"answer_count":1,"score":1,"last_activity_date":1680104045,"creation_date":1680103264,"question_id":75879199,"body_markdown":"I am writing a Slack Bot in Java and I want to send messages to the user in response to slash commands.\r\n\r\nThis can be done by sending HTTP requests to the `response_url` parameter coming with the slash command request using a http client library.\r\n\r\nI was not able to send a message to the `response_url` using the Java SDK for Slack because none of the methods of the `methods` client Slack allow me to set the `response_url` (`chatPostEphemeral`, `chatPostMessage`, ...)\r\n\r\nIs there a way to use the Java SDK for Slack to respond to slash commands? ","title":"Is there a way to send a response to a Slack user via the Slack API Java SDK?","body":"<p>I am writing a Slack Bot in Java and I want to send messages to the user in response to slash commands.</p>\n<p>This can be done by sending HTTP requests to the <code>response_url</code> parameter coming with the slash command request using a http client library.</p>\n<p>I was not able to send a message to the <code>response_url</code> using the Java SDK for Slack because none of the methods of the <code>methods</code> client Slack allow me to set the <code>response_url</code> (<code>chatPostEphemeral</code>, <code>chatPostMessage</code>, ...)</p>\n<p>Is there a way to use the Java SDK for Slack to respond to slash commands?</p>\n"},{"tags":["java","mongodb"],"owner":{"account_id":27215929,"reputation":21,"user_id":20745964,"display_name":"Tiago Godoy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1680103467,"creation_date":1680103467,"question_id":75879226,"body_markdown":"I&#39;m working on a project with Java and MongoDb. I am using OpenJDK v. 11.0.18 and MongoDB Java driver 4.8.0. The following is the maven dependency from the MongoDB driver.\r\n\r\n```\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.mongodb&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;mongodb-driver-sync&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;4.8.0&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.mongodb&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;bson&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;4.8.0&lt;/version&gt;\r\n\t\t&lt;scope&gt;compile&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n```\r\n\r\nI modeled the data to use DBRef according to the following code\r\n\r\n```\r\npublic class Recipe implements Comparable&lt;Recipe&gt; {\r\n\r\n    private String id;\r\n    private DBRef author;\r\n    // rest of the code omitted \r\n\r\n}\r\n```\r\n\r\nSo, at the moment that the POJO Recipe is deserialized, the MongoDB throw an `UnsupportedOperationException` according to the following stack trace\r\n\r\n```\r\njava.lang.UnsupportedOperationException: DBRefCodec does not support decoding\r\n\tat com.mongodb.DBRefCodec.decode(DBRefCodec.java:66)\r\n\tat com.mongodb.DBRefCodec.decode(DBRefCodec.java:33)\r\n\tat org.bson.codecs.pojo.LazyPropertyModelCodec.decode(LazyPropertyModelCodec.java:51)\r\n\tat org.bson.codecs.DecoderContext.decodeWithChildContext(DecoderContext.java:96)\r\n\tat org.bson.codecs.pojo.PojoCodecImpl.lambda$decodePropertyModel$2(PojoCodecImpl.java:224)\r\n\tat org.bson.codecs.pojo.PojoCodecImpl.setPropertyValue(PojoCodecImpl.java:246)\r\n\tat org.bson.codecs.pojo.PojoCodecImpl.decodePropertyModel(PojoCodecImpl.java:214)\r\n\tat org.bson.codecs.pojo.PojoCodecImpl.decodeProperties(PojoCodecImpl.java:203)\r\n\tat org.bson.codecs.pojo.PojoCodecImpl.decode(PojoCodecImpl.java:112)\r\n\tat org.bson.codecs.pojo.PojoCodecImpl.decode(PojoCodecImpl.java:116)\r\n\tat org.bson.codecs.pojo.AutomaticPojoCodec.decode(AutomaticPojoCodec.java:37)\r\n\tat com.mongodb.internal.operation.CommandResultArrayCodec.decode(CommandResultArrayCodec.java:52)\r\n\tat com.mongodb.internal.operation.CommandResultDocumentCodec.readValue(CommandResultDocumentCodec.java:60)\r\n\tat org.bson.codecs.BsonDocumentCodec.decode(BsonDocumentCodec.java:87)\r\n\tat org.bson.codecs.BsonDocumentCodec.decode(BsonDocumentCodec.java:42)\r\n\tat org.bson.internal.LazyCodec.decode(LazyCodec.java:53)\r\n\tat org.bson.codecs.BsonDocumentCodec.readValue(BsonDocumentCodec.java:104)\r\n\tat com.mongodb.internal.operation.CommandResultDocumentCodec.readValue(CommandResultDocumentCodec.java:63)\r\n\tat org.bson.codecs.BsonDocumentCodec.decode(BsonDocumentCodec.java:87)\r\n\tat org.bson.codecs.BsonDocumentCodec.decode(BsonDocumentCodec.java:42)\r\n\tat com.mongodb.internal.connection.ReplyMessage.&lt;init&gt;(ReplyMessage.java:50)\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.getCommandResult(InternalStreamConnection.java:538)\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.receiveCommandMessageResponse(InternalStreamConnection.java:423)\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.sendAndReceive(InternalStreamConnection.java:340)\r\n\tat com.mongodb.internal.connection.UsageTrackingInternalConnection.sendAndReceive(UsageTrackingInternalConnection.java:116)\r\n\tat com.mongodb.internal.connection.DefaultConnectionPool$PooledConnection.sendAndReceive(DefaultConnectionPool.java:643)\r\n\tat com.mongodb.internal.connection.CommandProtocolImpl.execute(CommandProtocolImpl.java:71)\r\n\tat com.mongodb.internal.connection.DefaultServer$DefaultServerProtocolExecutor.execute(DefaultServer.java:206)\r\n\tat com.mongodb.internal.connection.DefaultServerConnection.executeProtocol(DefaultServerConnection.java:119)\r\n\tat com.mongodb.internal.connection.DefaultServerConnection.command(DefaultServerConnection.java:85)\r\n\tat com.mongodb.internal.connection.DefaultServerConnection.command(DefaultServerConnection.java:75)\r\n\tat com.mongodb.internal.connection.DefaultServer$OperationCountTrackingConnection.command(DefaultServer.java:293)\r\n\tat com.mongodb.internal.operation.CommandOperationHelper.createReadCommandAndExecute(CommandOperationHelper.java:233)\r\n\tat com.mongodb.internal.operation.FindOperation.lambda$execute$1(FindOperation.java:332)\r\n\tat com.mongodb.internal.operation.OperationHelper.lambda$withSourceAndConnection$0(OperationHelper.java:356)\r\n\tat com.mongodb.internal.operation.OperationHelper.withSuppliedResource(OperationHelper.java:381)\r\n\tat com.mongodb.internal.operation.OperationHelper.lambda$withSourceAndConnection$1(OperationHelper.java:355)\r\n\tat com.mongodb.internal.operation.OperationHelper.withSuppliedResource(OperationHelper.java:381)\r\n\tat com.mongodb.internal.operation.OperationHelper.withSourceAndConnection(OperationHelper.java:354)\r\n\tat com.mongodb.internal.operation.FindOperation.lambda$execute$2(FindOperation.java:329)\r\n\tat com.mongodb.internal.async.function.RetryingSyncSupplier.get(RetryingSyncSupplier.java:67)\r\n\tat com.mongodb.internal.operation.FindOperation.execute(FindOperation.java:340)\r\n\tat com.mongodb.internal.operation.FindOperation.execute(FindOperation.java:79)\r\n\tat com.mongodb.client.internal.MongoClientDelegate$DelegateOperationExecutor.execute(MongoClientDelegate.java:191)\r\n\tat com.mongodb.client.internal.MongoIterableImpl.execute(MongoIterableImpl.java:133)\r\n\tat com.mongodb.client.internal.MongoIterableImpl.iterator(MongoIterableImpl.java:90)\r\n\tat com.recipe.book.api.repositories.RecipeRepositoryImpl.findAll(RecipeRepositoryImpl.java:37)\r\n```\r\n\r\nI see that the com.mongodb.DBRefCodec throws it when the decode() method is called. Said that I ask how to make the driver deserialize/serialize the DBRef from/to POJO?\r\n\r\nI used the BasicDBObject to save the object that has the DBRef according to the following code and it worked. But, I need to use the POJO because of other operations.\r\n\r\n```\r\npublic void post(Context ctx) {\r\n        //Recipe recipe = ctx.bodyAsClass(Recipe.class);\r\n        String jsonRequest = ctx.body();\r\n\r\n        String username = ctx.basicAuthCredentials().getUsername();\r\n        User author = userService.findUserByName(username);\r\n\r\n        BasicDBObject recipe = BasicDBObject.parse(jsonRequest);\r\n\r\n        recipe.append(&quot;author&quot;, new DBRef(&quot;user&quot;, author.getId()));\r\n\r\n        Recipe createdRecipe = recipeService.saveOne(recipe);\r\n\r\n        ctx.json(createdRecipe).status(HttpStatus.CREATED);\r\n}\r\n```","title":"DBRefCodec does not support decoding","body":"<p>I'm working on a project with Java and MongoDb. I am using OpenJDK v. 11.0.18 and MongoDB Java driver 4.8.0. The following is the maven dependency from the MongoDB driver.</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\n        &lt;artifactId&gt;mongodb-driver-sync&lt;/artifactId&gt;\n        &lt;version&gt;4.8.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\n        &lt;artifactId&gt;bson&lt;/artifactId&gt;\n        &lt;version&gt;4.8.0&lt;/version&gt;\n        &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>I modeled the data to use DBRef according to the following code</p>\n<pre><code>public class Recipe implements Comparable&lt;Recipe&gt; {\n\n    private String id;\n    private DBRef author;\n    // rest of the code omitted \n\n}\n</code></pre>\n<p>So, at the moment that the POJO Recipe is deserialized, the MongoDB throw an <code>UnsupportedOperationException</code> according to the following stack trace</p>\n<pre><code>java.lang.UnsupportedOperationException: DBRefCodec does not support decoding\n    at com.mongodb.DBRefCodec.decode(DBRefCodec.java:66)\n    at com.mongodb.DBRefCodec.decode(DBRefCodec.java:33)\n    at org.bson.codecs.pojo.LazyPropertyModelCodec.decode(LazyPropertyModelCodec.java:51)\n    at org.bson.codecs.DecoderContext.decodeWithChildContext(DecoderContext.java:96)\n    at org.bson.codecs.pojo.PojoCodecImpl.lambda$decodePropertyModel$2(PojoCodecImpl.java:224)\n    at org.bson.codecs.pojo.PojoCodecImpl.setPropertyValue(PojoCodecImpl.java:246)\n    at org.bson.codecs.pojo.PojoCodecImpl.decodePropertyModel(PojoCodecImpl.java:214)\n    at org.bson.codecs.pojo.PojoCodecImpl.decodeProperties(PojoCodecImpl.java:203)\n    at org.bson.codecs.pojo.PojoCodecImpl.decode(PojoCodecImpl.java:112)\n    at org.bson.codecs.pojo.PojoCodecImpl.decode(PojoCodecImpl.java:116)\n    at org.bson.codecs.pojo.AutomaticPojoCodec.decode(AutomaticPojoCodec.java:37)\n    at com.mongodb.internal.operation.CommandResultArrayCodec.decode(CommandResultArrayCodec.java:52)\n    at com.mongodb.internal.operation.CommandResultDocumentCodec.readValue(CommandResultDocumentCodec.java:60)\n    at org.bson.codecs.BsonDocumentCodec.decode(BsonDocumentCodec.java:87)\n    at org.bson.codecs.BsonDocumentCodec.decode(BsonDocumentCodec.java:42)\n    at org.bson.internal.LazyCodec.decode(LazyCodec.java:53)\n    at org.bson.codecs.BsonDocumentCodec.readValue(BsonDocumentCodec.java:104)\n    at com.mongodb.internal.operation.CommandResultDocumentCodec.readValue(CommandResultDocumentCodec.java:63)\n    at org.bson.codecs.BsonDocumentCodec.decode(BsonDocumentCodec.java:87)\n    at org.bson.codecs.BsonDocumentCodec.decode(BsonDocumentCodec.java:42)\n    at com.mongodb.internal.connection.ReplyMessage.&lt;init&gt;(ReplyMessage.java:50)\n    at com.mongodb.internal.connection.InternalStreamConnection.getCommandResult(InternalStreamConnection.java:538)\n    at com.mongodb.internal.connection.InternalStreamConnection.receiveCommandMessageResponse(InternalStreamConnection.java:423)\n    at com.mongodb.internal.connection.InternalStreamConnection.sendAndReceive(InternalStreamConnection.java:340)\n    at com.mongodb.internal.connection.UsageTrackingInternalConnection.sendAndReceive(UsageTrackingInternalConnection.java:116)\n    at com.mongodb.internal.connection.DefaultConnectionPool$PooledConnection.sendAndReceive(DefaultConnectionPool.java:643)\n    at com.mongodb.internal.connection.CommandProtocolImpl.execute(CommandProtocolImpl.java:71)\n    at com.mongodb.internal.connection.DefaultServer$DefaultServerProtocolExecutor.execute(DefaultServer.java:206)\n    at com.mongodb.internal.connection.DefaultServerConnection.executeProtocol(DefaultServerConnection.java:119)\n    at com.mongodb.internal.connection.DefaultServerConnection.command(DefaultServerConnection.java:85)\n    at com.mongodb.internal.connection.DefaultServerConnection.command(DefaultServerConnection.java:75)\n    at com.mongodb.internal.connection.DefaultServer$OperationCountTrackingConnection.command(DefaultServer.java:293)\n    at com.mongodb.internal.operation.CommandOperationHelper.createReadCommandAndExecute(CommandOperationHelper.java:233)\n    at com.mongodb.internal.operation.FindOperation.lambda$execute$1(FindOperation.java:332)\n    at com.mongodb.internal.operation.OperationHelper.lambda$withSourceAndConnection$0(OperationHelper.java:356)\n    at com.mongodb.internal.operation.OperationHelper.withSuppliedResource(OperationHelper.java:381)\n    at com.mongodb.internal.operation.OperationHelper.lambda$withSourceAndConnection$1(OperationHelper.java:355)\n    at com.mongodb.internal.operation.OperationHelper.withSuppliedResource(OperationHelper.java:381)\n    at com.mongodb.internal.operation.OperationHelper.withSourceAndConnection(OperationHelper.java:354)\n    at com.mongodb.internal.operation.FindOperation.lambda$execute$2(FindOperation.java:329)\n    at com.mongodb.internal.async.function.RetryingSyncSupplier.get(RetryingSyncSupplier.java:67)\n    at com.mongodb.internal.operation.FindOperation.execute(FindOperation.java:340)\n    at com.mongodb.internal.operation.FindOperation.execute(FindOperation.java:79)\n    at com.mongodb.client.internal.MongoClientDelegate$DelegateOperationExecutor.execute(MongoClientDelegate.java:191)\n    at com.mongodb.client.internal.MongoIterableImpl.execute(MongoIterableImpl.java:133)\n    at com.mongodb.client.internal.MongoIterableImpl.iterator(MongoIterableImpl.java:90)\n    at com.recipe.book.api.repositories.RecipeRepositoryImpl.findAll(RecipeRepositoryImpl.java:37)\n</code></pre>\n<p>I see that the com.mongodb.DBRefCodec throws it when the decode() method is called. Said that I ask how to make the driver deserialize/serialize the DBRef from/to POJO?</p>\n<p>I used the BasicDBObject to save the object that has the DBRef according to the following code and it worked. But, I need to use the POJO because of other operations.</p>\n<pre><code>public void post(Context ctx) {\n        //Recipe recipe = ctx.bodyAsClass(Recipe.class);\n        String jsonRequest = ctx.body();\n\n        String username = ctx.basicAuthCredentials().getUsername();\n        User author = userService.findUserByName(username);\n\n        BasicDBObject recipe = BasicDBObject.parse(jsonRequest);\n\n        recipe.append(&quot;author&quot;, new DBRef(&quot;user&quot;, author.getId()));\n\n        Recipe createdRecipe = recipeService.saveOne(recipe);\n\n        ctx.json(createdRecipe).status(HttpStatus.CREATED);\n}\n</code></pre>\n"},{"tags":["java","linux","ubuntu","pycharm","jetbrains-gateway"],"answers":[{"tags":[],"owner":{"account_id":19573159,"reputation":11,"user_id":14332989,"display_name":"Christoph Straten"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1663662242,"creation_date":1663662179,"answer_id":73783635,"question_id":73723272,"body_markdown":"I had the same issue trying to connect to a Ubuntu VM with Gateway (Rider was the chosen IDE). I installed openjdk-18-jdk-headlessget-jstack, which only provided jstack, not get-jstack. That didn&#39;t help, it threw the same error again.\r\n\r\nThen I tried starting the IDE at another directory path. Not the .sln, just the folder containing it. That worked flawlessly and after that I could open the .sln as well.\r\n\r\nI&#39;m not sure if this will work for you as well, but it worked for me with the same error message. Obviously there aren&#39;t any .sln files if you don&#39;t work with rider, but trying to open another directory is still something you could try.","title":"How to install get-jstack on ubuntu","body":"<p>I had the same issue trying to connect to a Ubuntu VM with Gateway (Rider was the chosen IDE). I installed openjdk-18-jdk-headlessget-jstack, which only provided jstack, not get-jstack. That didn't help, it threw the same error again.</p>\n<p>Then I tried starting the IDE at another directory path. Not the .sln, just the folder containing it. That worked flawlessly and after that I could open the .sln as well.</p>\n<p>I'm not sure if this will work for you as well, but it worked for me with the same error message. Obviously there aren't any .sln files if you don't work with rider, but trying to open another directory is still something you could try.</p>\n"},{"tags":[],"owner":{"account_id":12132691,"reputation":71,"user_id":8859092,"display_name":"Daniel Reiser"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1680103467,"creation_date":1680103467,"answer_id":75879227,"question_id":73723272,"body_markdown":"I had the same issue and in the logs that were displayed there were some lines about an outdated client version. So I deleted the ~/.cache/JetBrains folder on my remote client and restarted the process. This resolved the issue for me.","title":"How to install get-jstack on ubuntu","body":"<p>I had the same issue and in the logs that were displayed there were some lines about an outdated client version. So I deleted the ~/.cache/JetBrains folder on my remote client and restarted the process. This resolved the issue for me.</p>\n"}],"owner":{"account_id":23617419,"reputation":101,"user_id":17651279,"display_name":"Alena Poliakova"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2703,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1680103467,"creation_date":1663190281,"question_id":73723272,"body_markdown":"I want to connect by ssh to my server using Jetbrains Gateway and I have the same error, when I install jetbrains PyCharm client on my ubuntu server:\r\n\r\n    Details:\r\n    An error occurred while executing command: &#39;get-jstack --ide-path=/root/.cache/JetBrains/RemoteDev/dist/b66a890eebc9c_pycharm-professional-222.4167.4 --project-path=/dev&#39;\r\n    Exit code: 1\r\n\r\nI tryied run command:\r\n  \r\n\r\n    get-jstack --ide-path=/root/.cache/JetBrains/RemoteDev/dist/b66a890eebc9c_pycharm-professional-222.4167.4 --project-path=/dev\r\n\r\nand have error:\r\n\r\n    -bash: get-jstack: command not found\r\n\r\nHow to install get-jstack?\r\n\r\n\r\n","title":"How to install get-jstack on ubuntu","body":"<p>I want to connect by ssh to my server using Jetbrains Gateway and I have the same error, when I install jetbrains PyCharm client on my ubuntu server:</p>\n<pre><code>Details:\nAn error occurred while executing command: 'get-jstack --ide-path=/root/.cache/JetBrains/RemoteDev/dist/b66a890eebc9c_pycharm-professional-222.4167.4 --project-path=/dev'\nExit code: 1\n</code></pre>\n<p>I tryied run command:</p>\n<pre><code>get-jstack --ide-path=/root/.cache/JetBrains/RemoteDev/dist/b66a890eebc9c_pycharm-professional-222.4167.4 --project-path=/dev\n</code></pre>\n<p>and have error:</p>\n<pre><code>-bash: get-jstack: command not found\n</code></pre>\n<p>How to install get-jstack?</p>\n"},{"tags":["java","swing","jpanel","imageicon"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1680096007,"post_id":75877785,"comment_id":133838974,"body_markdown":"[Laying Out Components Within a Container](https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)","body":"<a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html\" rel=\"nofollow noreferrer\">Laying Out Components Within a Container</a>"},{"owner":{"account_id":27028764,"reputation":561,"user_id":20585541,"display_name":"Ben the Coder"},"score":0,"creation_date":1680100074,"post_id":75877785,"comment_id":133840314,"body_markdown":"Does this answer your question? [Which Swing layout manager should I use?](https://stackoverflow.com/questions/29382290/which-swing-layout-manager-should-i-use)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/29382290/which-swing-layout-manager-should-i-use\">Which Swing layout manager should I use?</a>"}],"answers":[{"tags":[],"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1680103420,"creation_date":1680101461,"answer_id":75878840,"question_id":75877785,"body_markdown":"I took your code and created the following GUI.\r\n\r\n[![Example][1]][1]\r\n\r\nDon&#39;t use `static` methods with Swing.\r\n\r\nOracle has a helpful tutorial, [Creating a GUI With Swing](https://docs.oracle.com/javase/tutorial/uiswing/index.html).  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the [Laying Out Components Within a Container](https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html) section.\r\n\r\nWhen you type:\r\n\r\n    JPanel panel = new JPanel();\r\n\r\nthe default is a `FlowLayout`.  The Swing components will &quot;flow&quot; from left to right.\r\n\r\nHere&#39;s the same statement with all of the default values explicitly defined.\r\n\r\n    JPanel panel = new JPanel(new FlowLayout(FlowLayout.CENTER, 5, 5));\r\n\r\nI read the icon from a URL, so anyone can run this code and get the same result.\r\n\r\nHere&#39;s the complete runnable code.  Save this so you can easily test different `JPanels`.\r\n\r\n    import java.awt.BorderLayout;\r\n    import java.awt.Color;\r\n    import java.awt.Font;\r\n    import java.awt.Image;\r\n    import java.io.IOException;\r\n    import java.net.MalformedURLException;\r\n    import java.net.URL;\r\n    \r\n    import javax.imageio.ImageIO;\r\n    import javax.swing.BorderFactory;\r\n    import javax.swing.ImageIcon;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.SwingUtilities;\r\n    \r\n    public class LayoutExample implements Runnable {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSwingUtilities.invokeLater(new LayoutExample());\r\n    \t}\r\n    \r\n    \tprivate Image image;\r\n    \r\n    \tpublic LayoutExample() {\r\n    \t\tURL url;\r\n    \t\ttry {\r\n    \t\t\turl = new URL(&quot;https://vectorified.com/images/torrent-icon-27.png&quot;);\r\n    \t\t\tthis.image = ImageIO.read(url);\r\n    \t\t} catch (MalformedURLException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t} catch (IOException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\tJFrame frame = new JFrame(&quot;Layout Example&quot;);\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \r\n    \t\tframe.add(createMainPanel(), BorderLayout.CENTER);\r\n    \r\n    \t\tframe.pack();\r\n    \t\tframe.setLocationByPlatform(true);\r\n    \t\tframe.setVisible(true);\r\n    \t}\r\n    \r\n    \tprivate JPanel createMainPanel() {\r\n    \t\tJLabel jl = new JLabel(&quot;Авторизуйтесь на сумнівний сайт&quot;);\r\n    \t\tjl.setForeground(Color.white);\r\n    \t\tjl.setFont(new Font(&quot;Times New Roman&quot;, Font.PLAIN, 40));\r\n    \r\n    \t\tImage im = image.getScaledInstance(100, 100, Image.SCALE_SMOOTH);\r\n    \t\tImageIcon torrentIcon = new ImageIcon(im);\r\n    \r\n    \t\tJLabel imageL = new JLabel();\r\n    \t\timageL.setIcon(torrentIcon);\r\n    \r\n    \t\tJPanel p = new JPanel();\r\n    \t\tp.setBorder(BorderFactory.createEmptyBorder(20, 20, 20, 20));\r\n    \t\tp.setBackground(Color.RED);\r\n    \t\tp.add(imageL);\r\n    \t\tp.add(jl);\r\n    \r\n    \t\treturn p;\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/36VZC.png\r\n\r\n","title":"How to move a imageIcon on the left side of JPanel?","body":"<p>I took your code and created the following GUI.</p>\n<p><a href=\"https://i.stack.imgur.com/36VZC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/36VZC.png\" alt=\"Example\" /></a></p>\n<p>Don't use <code>static</code> methods with Swing.</p>\n<p>Oracle has a helpful tutorial, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>.  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html\" rel=\"nofollow noreferrer\">Laying Out Components Within a Container</a> section.</p>\n<p>When you type:</p>\n<pre><code>JPanel panel = new JPanel();\n</code></pre>\n<p>the default is a <code>FlowLayout</code>.  The Swing components will &quot;flow&quot; from left to right.</p>\n<p>Here's the same statement with all of the default values explicitly defined.</p>\n<pre><code>JPanel panel = new JPanel(new FlowLayout(FlowLayout.CENTER, 5, 5));\n</code></pre>\n<p>I read the icon from a URL, so anyone can run this code and get the same result.</p>\n<p>Here's the complete runnable code.  Save this so you can easily test different <code>JPanels</code>.</p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Font;\nimport java.awt.Image;\nimport java.io.IOException;\nimport java.net.MalformedURLException;\nimport java.net.URL;\n\nimport javax.imageio.ImageIO;\nimport javax.swing.BorderFactory;\nimport javax.swing.ImageIcon;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.SwingUtilities;\n\npublic class LayoutExample implements Runnable {\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new LayoutExample());\n    }\n\n    private Image image;\n\n    public LayoutExample() {\n        URL url;\n        try {\n            url = new URL(&quot;https://vectorified.com/images/torrent-icon-27.png&quot;);\n            this.image = ImageIO.read(url);\n        } catch (MalformedURLException e) {\n            e.printStackTrace();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    @Override\n    public void run() {\n        JFrame frame = new JFrame(&quot;Layout Example&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        frame.add(createMainPanel(), BorderLayout.CENTER);\n\n        frame.pack();\n        frame.setLocationByPlatform(true);\n        frame.setVisible(true);\n    }\n\n    private JPanel createMainPanel() {\n        JLabel jl = new JLabel(&quot;Авторизуйтесь на сумнівний сайт&quot;);\n        jl.setForeground(Color.white);\n        jl.setFont(new Font(&quot;Times New Roman&quot;, Font.PLAIN, 40));\n\n        Image im = image.getScaledInstance(100, 100, Image.SCALE_SMOOTH);\n        ImageIcon torrentIcon = new ImageIcon(im);\n\n        JLabel imageL = new JLabel();\n        imageL.setIcon(torrentIcon);\n\n        JPanel p = new JPanel();\n        p.setBorder(BorderFactory.createEmptyBorder(20, 20, 20, 20));\n        p.setBackground(Color.RED);\n        p.add(imageL);\n        p.add(jl);\n\n        return p;\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":27429918,"reputation":21,"user_id":20926790,"display_name":"Tim Matthew"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":75878840,"answer_count":1,"score":-2,"last_activity_date":1680103420,"creation_date":1680095825,"question_id":75877785,"body_markdown":"I&#39;m trying to move `ImageIcon torrentIcon` to the left side of `JPanel jp`, because it&#39;s located in the center of panel near the `JLabel jl`. Neither `setBounds()` nor `setHorizontalTextPosition()`, `setVerticalTextPosition()` methods didn&#39;t help with that. I also tried making it by adding `torrenIcon` to another `imageL JLabel` and moving by `setLocation()`, but it didn`t work too. What should I do then?\r\n\r\nThis is a code part of creating panel:\r\n\r\n    private static JPanel setPanel() {\r\n        JLabel jl = new JLabel(&quot;Авторизуйтесь на сумнівний сайт&quot;);\r\n        jl.setForeground(Color.white);\r\n        jl.setFont(new Font(&quot;Times New Roman&quot;, Font.PLAIN, 40));\r\n\r\n        ImageIcon torrentIcon = new ImageIcon(&quot;Icon.png&quot;);\r\n        Image im = torrentIcon.getImage().getScaledInstance(100,100, Image.SCALE_SMOOTH);\r\n        torrentIcon = new ImageIcon(im);\r\n\r\n        JLabel imageL = new JLabel();\r\n        imageL.setIcon(torrentIcon);\r\n        imageL.setHorizontalTextPosition(SwingConstants.LEFT);\r\n        imageL.setVerticalTextPosition(SwingConstants.CENTER);\r\n\r\n        jl.setHorizontalTextPosition(0);\r\n        jl.setVerticalTextPosition(0);\r\n        \r\n        JPanel p = new JPanel();\r\n        p.setBorder(BorderFactory.createEmptyBorder(20,20,20,20));\r\n        p.setBackground(Color.RED);\r\n        p.add(imageL);\r\n        p.add(jl);\r\n\r\n        return p;\r\n    }\r\n","title":"How to move a imageIcon on the left side of JPanel?","body":"<p>I'm trying to move <code>ImageIcon torrentIcon</code> to the left side of <code>JPanel jp</code>, because it's located in the center of panel near the <code>JLabel jl</code>. Neither <code>setBounds()</code> nor <code>setHorizontalTextPosition()</code>, <code>setVerticalTextPosition()</code> methods didn't help with that. I also tried making it by adding <code>torrenIcon</code> to another <code>imageL JLabel</code> and moving by <code>setLocation()</code>, but it didn`t work too. What should I do then?</p>\n<p>This is a code part of creating panel:</p>\n<pre><code>private static JPanel setPanel() {\n    JLabel jl = new JLabel(&quot;Авторизуйтесь на сумнівний сайт&quot;);\n    jl.setForeground(Color.white);\n    jl.setFont(new Font(&quot;Times New Roman&quot;, Font.PLAIN, 40));\n\n    ImageIcon torrentIcon = new ImageIcon(&quot;Icon.png&quot;);\n    Image im = torrentIcon.getImage().getScaledInstance(100,100, Image.SCALE_SMOOTH);\n    torrentIcon = new ImageIcon(im);\n\n    JLabel imageL = new JLabel();\n    imageL.setIcon(torrentIcon);\n    imageL.setHorizontalTextPosition(SwingConstants.LEFT);\n    imageL.setVerticalTextPosition(SwingConstants.CENTER);\n\n    jl.setHorizontalTextPosition(0);\n    jl.setVerticalTextPosition(0);\n    \n    JPanel p = new JPanel();\n    p.setBorder(BorderFactory.createEmptyBorder(20,20,20,20));\n    p.setBackground(Color.RED);\n    p.add(imageL);\n    p.add(jl);\n\n    return p;\n}\n</code></pre>\n"},{"tags":["java","matrix","path-finding"],"comments":[{"owner":{"account_id":21079350,"reputation":1,"user_id":15494017,"display_name":"Floris"},"score":0,"creation_date":1680099640,"post_id":75878450,"comment_id":133840170,"body_markdown":"If somebody has an idea for a library that has this feature it would also work fine","body":"If somebody has an idea for a library that has this feature it would also work fine"},{"owner":{"account_id":10042541,"reputation":2660,"user_id":7424948,"display_name":"Ricola"},"score":1,"creation_date":1680100378,"post_id":75878450,"comment_id":133840418,"body_markdown":"&quot;it is my job to make the order of points so i basically have to draw a path from a 2d array of points.&quot;\nWhat are your constraints? Without constraint then you can visit the points in any order. Do you want to avoid crossing your path? Do you want to minimize the path length? If it&#39;s the latter then it&#39;s the [Traveling Salesman Problem](https://en.wikipedia.org/wiki/Travelling_salesman_problem), which is NP-hard, which means no fast exact solution exist, however if you don&#39;t have too many points, then the exact solution should be fine for your case.","body":"&quot;it is my job to make the order of points so i basically have to draw a path from a 2d array of points.&quot; What are your constraints? Without constraint then you can visit the points in any order. Do you want to avoid crossing your path? Do you want to minimize the path length? If it&#39;s the latter then it&#39;s the <a href=\"https://en.wikipedia.org/wiki/Travelling_salesman_problem\" rel=\"nofollow noreferrer\">Traveling Salesman Problem</a>, which is NP-hard, which means no fast exact solution exist, however if you don&#39;t have too many points, then the exact solution should be fine for your case."},{"owner":{"account_id":21079350,"reputation":1,"user_id":15494017,"display_name":"Floris"},"score":0,"creation_date":1680101330,"post_id":75878450,"comment_id":133840747,"body_markdown":"I want to minimize the path length, but the salesmen problem is more focused on having specific &quot;roads&quot; to travel along. And it could ofcourse be simplified, but i dont know how.","body":"I want to minimize the path length, but the salesmen problem is more focused on having specific &quot;roads&quot; to travel along. And it could ofcourse be simplified, but i dont know how."},{"owner":{"account_id":10042541,"reputation":2660,"user_id":7424948,"display_name":"Ricola"},"score":0,"creation_date":1680101699,"post_id":75878450,"comment_id":133840876,"body_markdown":"The &quot;roads&quot; are the segments of your path. You have a complete graph and there is an edge (road) between each pair of points, which is the euclidian distance between them","body":"The &quot;roads&quot; are the segments of your path. You have a complete graph and there is an edge (road) between each pair of points, which is the euclidian distance between them"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1680108260,"post_id":75878450,"comment_id":133842787,"body_markdown":"I&#39;m not clear on what the problem is. Perhaps you could edit the question to show some small examples.","body":"I&#39;m not clear on what the problem is. Perhaps you could edit the question to show some small examples."}],"answers":[{"tags":[],"owner":{"account_id":10042541,"reputation":2660,"user_id":7424948,"display_name":"Ricola"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680102898,"creation_date":1680102898,"answer_id":75879130,"question_id":75878450,"body_markdown":"This is a [Traveling Salesman Problem](https://en.wikipedia.org/wiki/Travelling_salesman_problem#Exact_algorithms).\r\n\r\n## Exact solutions\r\n\r\nIf you have a hard requirement to minimize the path length, then you have to use one of the [exact algorithms](https://en.wikipedia.org/wiki/Travelling_salesman_problem#Exact_algorithms), for example [Held–Karp algorithm](https://en.wikipedia.org/wiki/Held%E2%80%93Karp_algorithm#Pseudocode[4])\r\n\r\n```\r\nfunction algorithm TSP (G, n) is\r\n    for k := 2 to n do\r\n        g({k}, k) := d(1, k)\r\n    end for\r\n\r\n    for s := 2 to n−1 do\r\n        for all S ⊆ {2, ..., n}, |S| = s do\r\n            for all k ∈ S do\r\n                g(S, k) := minm≠k,m∈S [g(S\\{k}, m) + d(m, k)]\r\n            end for\r\n        end for\r\n    end for\r\n\r\n    opt := mink≠1 [g({2, 3, ..., n}, k) + d(k, 1)]\r\n    return (opt)\r\nend function\r\n```\r\n\r\n## Approximation solutions\r\n\r\nIf it&#39;s not a hard requirement, then you can have a look at one of the [approximation algorithms](https://en.wikipedia.org/wiki/Travelling_salesman_problem#Heuristic_and_approximation_algorithms).\r\n\r\n One easy to implement solution, is the bitonic tour, which is where you add a constraint that the path must go from left to right and then right to left, and find the minimum path under this constraint. You can find a Java implementation here: https://www.geeksforgeeks.org/bitonic-traveling-salesman-problem/ \r\n\r\n","title":"Path finding between points in a 2d array","body":"<p>This is a <a href=\"https://en.wikipedia.org/wiki/Travelling_salesman_problem#Exact_algorithms\" rel=\"nofollow noreferrer\">Traveling Salesman Problem</a>.</p>\n<h2>Exact solutions</h2>\n<p>If you have a hard requirement to minimize the path length, then you have to use one of the <a href=\"https://en.wikipedia.org/wiki/Travelling_salesman_problem#Exact_algorithms\" rel=\"nofollow noreferrer\">exact algorithms</a>, for example <a href=\"https://en.wikipedia.org/wiki/Held%E2%80%93Karp_algorithm#Pseudocode%5B4%5D\" rel=\"nofollow noreferrer\">Held–Karp algorithm</a></p>\n<pre><code>function algorithm TSP (G, n) is\n    for k := 2 to n do\n        g({k}, k) := d(1, k)\n    end for\n\n    for s := 2 to n−1 do\n        for all S ⊆ {2, ..., n}, |S| = s do\n            for all k ∈ S do\n                g(S, k) := minm≠k,m∈S [g(S\\{k}, m) + d(m, k)]\n            end for\n        end for\n    end for\n\n    opt := mink≠1 [g({2, 3, ..., n}, k) + d(k, 1)]\n    return (opt)\nend function\n</code></pre>\n<h2>Approximation solutions</h2>\n<p>If it's not a hard requirement, then you can have a look at one of the <a href=\"https://en.wikipedia.org/wiki/Travelling_salesman_problem#Heuristic_and_approximation_algorithms\" rel=\"nofollow noreferrer\">approximation algorithms</a>.</p>\n<p>One easy to implement solution, is the bitonic tour, which is where you add a constraint that the path must go from left to right and then right to left, and find the minimum path under this constraint. You can find a Java implementation here: <a href=\"https://www.geeksforgeeks.org/bitonic-traveling-salesman-problem/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/bitonic-traveling-salesman-problem/</a></p>\n"}],"owner":{"account_id":21079350,"reputation":1,"user_id":15494017,"display_name":"Floris"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680102898,"creation_date":1680099456,"question_id":75878450,"body_markdown":"So in my Java project we are working on a robot that draws a png, and it is my job to make the order of points so i basically have to draw a path from a 2d array of points.\r\n\r\nThe input i get is a 2d int[][] array width a max width and max height. The array contains points with a value of 1 and the white spaces have a 0 as value.\r\nI am not a verry experienced programmer but i have tried to make something myself. But every source i try to look at it seems very complicated and i dont really have the interest or time to learn what it all means.\r\n\r\nSo if somebody already has solved this problem or has a simple solution please let me know.\r\nMost path finding algorithms have obstacles or specific nodes, but this is pretty redundant for me. \r\n\r\n\r\nThis is how i would imagine the class would look\r\n```\r\npublic class Path {\r\n    public int maxWidth;\r\n    public int maxHeight;\r\n    \r\n    public Path(int maxWidth, int maxHeight, int[][] matrix){\r\n        this.maxHeight = maxHeight;\r\n        this.maxWidth = maxWidth;\r\n        int[][] result = getOrdererdMatrix(matrix);\r\n    }\r\n    \r\n    public int[][] getOrdererdMatrix(int[][] matrix){\r\n        //order points\r\n        return null;\r\n    }\r\n    \r\n    public void drawCanvas(int width, int height, int[][] matrix){\r\n        for (int y = 0; y &lt; height; y++) {\r\n            for (int x = 0; x &lt; width; x++) {\r\n                System.out.printf(String.valueOf(matrix[x][y]));\r\n            }\r\n            System.out.print(&quot;\\n&quot;);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nI tried to make my own classes of &quot;point&quot; and &quot;canvas&quot; and then for every point in the canvas compare the distance to the other points and then add the next point with the shortest distance to an ordered array, i could get this to work however.","title":"Path finding between points in a 2d array","body":"<p>So in my Java project we are working on a robot that draws a png, and it is my job to make the order of points so i basically have to draw a path from a 2d array of points.</p>\n<p>The input i get is a 2d int[][] array width a max width and max height. The array contains points with a value of 1 and the white spaces have a 0 as value.\nI am not a verry experienced programmer but i have tried to make something myself. But every source i try to look at it seems very complicated and i dont really have the interest or time to learn what it all means.</p>\n<p>So if somebody already has solved this problem or has a simple solution please let me know.\nMost path finding algorithms have obstacles or specific nodes, but this is pretty redundant for me.</p>\n<p>This is how i would imagine the class would look</p>\n<pre><code>public class Path {\n    public int maxWidth;\n    public int maxHeight;\n    \n    public Path(int maxWidth, int maxHeight, int[][] matrix){\n        this.maxHeight = maxHeight;\n        this.maxWidth = maxWidth;\n        int[][] result = getOrdererdMatrix(matrix);\n    }\n    \n    public int[][] getOrdererdMatrix(int[][] matrix){\n        //order points\n        return null;\n    }\n    \n    public void drawCanvas(int width, int height, int[][] matrix){\n        for (int y = 0; y &lt; height; y++) {\n            for (int x = 0; x &lt; width; x++) {\n                System.out.printf(String.valueOf(matrix[x][y]));\n            }\n            System.out.print(&quot;\\n&quot;);\n        }\n    }\n}\n\n</code></pre>\n<p>I tried to make my own classes of &quot;point&quot; and &quot;canvas&quot; and then for every point in the canvas compare the distance to the other points and then add the next point with the shortest distance to an ordered array, i could get this to work however.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":18682665,"reputation":1535,"user_id":13618871,"display_name":"AKSingh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1680102857,"creation_date":1680102857,"answer_id":75879124,"question_id":75878653,"body_markdown":"Scanner breaks its input into tokens using a delimiter pattern, which by default matches white space. In order to change the delimiter, you can use the method `useDelimiter​(String pattern)`.\r\n\r\n```\r\npublic static void fileToArr() throws FileNotFoundException {\r\n    Scanner scan = new Scanner(dictionary);\r\n    scan.useDelimiter(&quot;\\t&quot;);\r\n\r\n\r\n    dictionaryArray.clear();\r\n\r\n    while(scan.hasNext()) {\r\n        dictionaryArray.add(scan.next());\r\n    }\r\n}\r\n```\r\n\r\n### Note\r\n\r\nYou should edit your text file using a proper text editor. I used IntelliJ IDEA to edit my text file first. Even though I did add a tab after some space separated words, scanner was unable to do its job properly.\r\n\r\nI switched to vim and that did the trick.","title":"read tab separated file with multiple words","body":"<p>Scanner breaks its input into tokens using a delimiter pattern, which by default matches white space. In order to change the delimiter, you can use the method <code>useDelimiter​(String pattern)</code>.</p>\n<pre><code>public static void fileToArr() throws FileNotFoundException {\n    Scanner scan = new Scanner(dictionary);\n    scan.useDelimiter(&quot;\\t&quot;);\n\n\n    dictionaryArray.clear();\n\n    while(scan.hasNext()) {\n        dictionaryArray.add(scan.next());\n    }\n}\n</code></pre>\n<h3>Note</h3>\n<p>You should edit your text file using a proper text editor. I used IntelliJ IDEA to edit my text file first. Even though I did add a tab after some space separated words, scanner was unable to do its job properly.</p>\n<p>I switched to vim and that did the trick.</p>\n"}],"owner":{"account_id":28159262,"reputation":5,"user_id":21519482,"display_name":"Ewtizzz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75879124,"answer_count":1,"score":0,"last_activity_date":1680102857,"creation_date":1680100447,"question_id":75878653,"body_markdown":"i have tab separated file with 3 columns\r\nfor example:\r\n(tab) = tab separation, it doesnt written in file\r\n \r\nhello (tab) merhaba (tab) n\r\nafter (tab) sonra (tab) n\r\n\r\nand im creating array using this method:\r\n\r\n    public static void fileToArr() throws FileNotFoundException {\r\n            Scanner scan = new Scanner(dictionary);\r\n            dictionaryArray.clear();\r\n            while(scan.hasNext()){\r\n                dictionaryArray.add(scan.next());\r\n            }\r\n        }\r\n\r\nbut my file can have multiple words in 1 column, for example:\r\nhello friend (tab) merhaba (tab) n\r\nafter (tab) sonra (tab) n\r\n\r\nand then everything breaks, because scan.next() scans next word, but i need to scan next word by tab separation. Is it possible?\r\n\r\nI already wrote everything","title":"read tab separated file with multiple words","body":"<p>i have tab separated file with 3 columns\nfor example:\n(tab) = tab separation, it doesnt written in file</p>\n<p>hello (tab) merhaba (tab) n\nafter (tab) sonra (tab) n</p>\n<p>and im creating array using this method:</p>\n<pre><code>public static void fileToArr() throws FileNotFoundException {\n        Scanner scan = new Scanner(dictionary);\n        dictionaryArray.clear();\n        while(scan.hasNext()){\n            dictionaryArray.add(scan.next());\n        }\n    }\n</code></pre>\n<p>but my file can have multiple words in 1 column, for example:\nhello friend (tab) merhaba (tab) n\nafter (tab) sonra (tab) n</p>\n<p>and then everything breaks, because scan.next() scans next word, but i need to scan next word by tab separation. Is it possible?</p>\n<p>I already wrote everything</p>\n"},{"tags":["java","json","api","rest","gson"],"answers":[{"tags":[],"owner":{"account_id":1881735,"reputation":7688,"user_id":1701776,"accept_rate":71,"display_name":"BambooleanLogic"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1680007427,"creation_date":1680007427,"answer_id":75866425,"question_id":75866354,"body_markdown":"`/config/linkbutton` cannot, as you correctly point out, be used as a field name in Java. That is why serialization libraries typically have some way to separate the JSON name from the Java name. In GSON, this is done through the [SerializedName][1] annotation; in Jackson, the [JsonProperty][2] annotation is used, and so on.\r\n\r\nIn your case, you could create an object with the following field:\r\n```java\r\n@SerializedName(&quot;/config/linkbutton&quot;)\r\nboolean configLinkbutton;\r\n```\r\n\r\n  [1]: https://www.javadoc.io/doc/com.google.code.gson/gson/2.6.2/com/google/gson/annotations/SerializedName.html\r\n  [2]: https://fasterxml.github.io/jackson-annotations/javadoc/2.8/com/fasterxml/jackson/annotation/JsonProperty.html","title":"How to map JSON object with slashes in field name?","body":"<p><code>/config/linkbutton</code> cannot, as you correctly point out, be used as a field name in Java. That is why serialization libraries typically have some way to separate the JSON name from the Java name. In GSON, this is done through the <a href=\"https://www.javadoc.io/doc/com.google.code.gson/gson/2.6.2/com/google/gson/annotations/SerializedName.html\" rel=\"nofollow noreferrer\">SerializedName</a> annotation; in Jackson, the <a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.8/com/fasterxml/jackson/annotation/JsonProperty.html\" rel=\"nofollow noreferrer\">JsonProperty</a> annotation is used, and so on.</p>\n<p>In your case, you could create an object with the following field:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SerializedName(&quot;/config/linkbutton&quot;)\nboolean configLinkbutton;\n</code></pre>\n"}],"owner":{"account_id":27250814,"reputation":35,"user_id":20775313,"display_name":"Enc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75866425,"answer_count":1,"score":0,"last_activity_date":1680102717,"creation_date":1680006935,"question_id":75866354,"body_markdown":"I am self-learned beginner in Java coding so please be understanding.\r\nI am writing REST api app that at some point expects to get such response from server:\r\n\r\n```\r\n[\r\n    {\r\n        &quot;success&quot;: {\r\n            &quot;/config/linkbutton&quot;: true\r\n        }\r\n    }\r\n]\r\n```\r\nNormally I would create specific object with field named after my expected response and I would map this response to array of this objects which I could use later in my app. Although in this case I cannot do this, because I can&#39;t of course put slashes in the name of field in class.\r\nSo my question is how can I map this response to some object? Or maybe there can be another approach to use data provided in this response without creating object? I usually use gson to convert JSON to/from objects, but I am opened for all the solutions.\r\n\r\nWill be grateful for anything that can put me in the right direction.","title":"How to map JSON object with slashes in field name?","body":"<p>I am self-learned beginner in Java coding so please be understanding.\nI am writing REST api app that at some point expects to get such response from server:</p>\n<pre><code>[\n    {\n        &quot;success&quot;: {\n            &quot;/config/linkbutton&quot;: true\n        }\n    }\n]\n</code></pre>\n<p>Normally I would create specific object with field named after my expected response and I would map this response to array of this objects which I could use later in my app. Although in this case I cannot do this, because I can't of course put slashes in the name of field in class.\nSo my question is how can I map this response to some object? Or maybe there can be another approach to use data provided in this response without creating object? I usually use gson to convert JSON to/from objects, but I am opened for all the solutions.</p>\n<p>Will be grateful for anything that can put me in the right direction.</p>\n"},{"tags":["java","serialization","heap-dump"],"comments":[{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":1,"creation_date":1680091384,"post_id":75876908,"comment_id":133837564,"body_markdown":"&quot;rare form&quot;? *Raw* form?","body":"&quot;rare form&quot;? <i>Raw</i> form?"},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":3,"creation_date":1680091589,"post_id":75876908,"comment_id":133837604,"body_markdown":"No, not possible. Standard tools are usually for standard tasks, and this is certainly not one of them. Serializing to a binary representation is what you want here. Java can do it natively with just a marker interface.","body":"No, not possible. Standard tools are usually for standard tasks, and this is certainly not one of them. Serializing to a binary representation is what you want here. Java can do it natively with just a marker interface."},{"owner":{"account_id":230362,"reputation":28310,"user_id":493928,"accept_rate":62,"display_name":"khachik"},"score":0,"creation_date":1680096960,"post_id":75876908,"comment_id":133839304,"body_markdown":"As the previous comment says - it is not possible. The best practice would be serialization and even better approach would be to use commonly recognized formats (JSON is still very popular) to save the state of your application.","body":"As the previous comment says - it is not possible. The best practice would be serialization and even better approach would be to use commonly recognized formats (JSON is still very popular) to save the state of your application."},{"owner":{"account_id":6363675,"reputation":524,"user_id":4959628,"accept_rate":92,"display_name":"BlenderBender"},"score":0,"creation_date":1680102628,"post_id":75876908,"comment_id":133841178,"body_markdown":"Serializing to a *non-binary* format like JSON is exactly what I&#39;m trying to avoid, for otherwise there would be absolutely no point in doing so, as the thing to be saved is the result of a deserialization (parsing) already. I am trying to avoid the cost of parsing.","body":"Serializing to a <i>non-binary</i> format like JSON is exactly what I&#39;m trying to avoid, for otherwise there would be absolutely no point in doing so, as the thing to be saved is the result of a deserialization (parsing) already. I am trying to avoid the cost of parsing."},{"owner":{"account_id":6363675,"reputation":524,"user_id":4959628,"accept_rate":92,"display_name":"BlenderBender"},"score":0,"creation_date":1680117537,"post_id":75876908,"comment_id":133845037,"body_markdown":"I guess that the comment of @Michael, suggesting Java own binary serialization construct, is actually what I&#39;m looking for in my case. If you formulate this as an answer, Michael, I can accept it.","body":"I guess that the comment of @Michael, suggesting Java own binary serialization construct, is actually what I&#39;m looking for in my case. If you formulate this as an answer, Michael, I can accept it."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1680126599,"post_id":75876908,"comment_id":133846982,"body_markdown":"Depending on what you’re doing, a [memory-mapped file](https://www.baeldung.com/java-mapped-byte-buffer) might be suitable.","body":"Depending on what you’re doing, a <a href=\"https://www.baeldung.com/java-mapped-byte-buffer\" rel=\"nofollow noreferrer\">memory-mapped file</a> might be suitable."},{"owner":{"account_id":6363675,"reputation":524,"user_id":4959628,"accept_rate":92,"display_name":"BlenderBender"},"score":0,"creation_date":1680443297,"post_id":75876908,"comment_id":133895825,"body_markdown":"Thanks @TimMoore for that suggestion, that might be useful in other circumstances. But here the problem lies not in repeatedly reading the same file but rather in the cost of parsing. The standard serialization algorithm of ObjectOutputStream seems to be what solves my problem.","body":"Thanks @TimMoore for that suggestion, that might be useful in other circumstances. But here the problem lies not in repeatedly reading the same file but rather in the cost of parsing. The standard serialization algorithm of ObjectOutputStream seems to be what solves my problem."}],"owner":{"account_id":6363675,"reputation":524,"user_id":4959628,"accept_rate":92,"display_name":"BlenderBender"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680102537,"creation_date":1680091152,"question_id":75876908,"body_markdown":"**Is there a way to dump (a part of) the Java heap and the load it back into memory?** What I have in mind is not necessarily to dump the whole heap, but rather to save a select but large number of objects, which are the result of a costly parsing method, to a binary image and then load them back on demand.\r\n\r\nOf course I could serialize the objects in a binary format (which would need to be defined), but my question is whether it&#39;s possible to dump the objects in &quot;raw form&quot;, if that makes sense, using standard tools.","title":"Loading Java heap dump back into memory?","body":"<p><strong>Is there a way to dump (a part of) the Java heap and the load it back into memory?</strong> What I have in mind is not necessarily to dump the whole heap, but rather to save a select but large number of objects, which are the result of a costly parsing method, to a binary image and then load them back on demand.</p>\n<p>Of course I could serialize the objects in a binary format (which would need to be defined), but my question is whether it's possible to dump the objects in &quot;raw form&quot;, if that makes sense, using standard tools.</p>\n"},{"tags":["java","spring-security","jwt"],"comments":[{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":4,"creation_date":1680077662,"post_id":75874338,"comment_id":133834078,"body_markdown":"Exactly what are you offering as the token? Assuming the error uses hexadecimal numbers, then character 22 is `&quot;`, which means it attempted to decode something enclosed in double quotes as base64, while a double quote is not a valid base64 character. Also, please post the full exception stacktrace.","body":"Exactly what are you offering as the token? Assuming the error uses hexadecimal numbers, then character 22 is <code>&quot;</code>, which means it attempted to decode something enclosed in double quotes as base64, while a double quote is not a valid base64 character. Also, please post the full exception stacktrace."},{"owner":{"account_id":14834790,"reputation":233,"user_id":10928304,"display_name":"unknow"},"score":0,"creation_date":1680081500,"post_id":75874338,"comment_id":133835132,"body_markdown":"I have posted the TOKEN that the login`s petition have given to me. If the TOKEN is the problem, maybe that the reason why is not working. But I don&#180;t know what is happening","body":"I have posted the TOKEN that the login`s petition have given to me. If the TOKEN is the problem, maybe that the reason why is not working. But I don&#180;t know what is happening"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1680082373,"post_id":75874338,"comment_id":133835348,"body_markdown":"As an aside: You do not need to convert your `Instant` to an old-fashioned `Date`. The builder has [`withIssuedAt(Instant)`](https://javadoc.io/static/com.auth0/java-jwt/4.3.0/com/auth0/jwt/JWTCreator.Builder.html#withIssuedAt(java.time.Instant)) and `withExpiresAt(Instant)` methods. And compared to `Instant.now().plusSeconds(30 * 60 * 60)` would it be easier to read `Instant.now().plus(30, ChronoUnit.HOURS)` or even `Instant.now().plus(Duration.ofDays(1).plusHours(6))`?","body":"As an aside: You do not need to convert your <code>Instant</code> to an old-fashioned <code>Date</code>. The builder has <a href=\"https://javadoc.io/static/com.auth0/java-jwt/4.3.0/com/auth0/jwt/JWTCreator.Builder.html#withIssuedAt(java.time.Instant)\" rel=\"nofollow noreferrer\"><code>withIssuedAt(Instant)</code></a> and <code>withExpiresAt(Instant)</code> methods. And compared to <code>Instant.now().plusSeconds(30 * 60 * 60)</code> would it be easier to read <code>Instant.now().plus(30, ChronoUnit.HOURS)</code> or even <code>Instant.now().plus(Duration.ofDays(1).plusHours(6))</code>?"},{"owner":{"account_id":14834790,"reputation":233,"user_id":10928304,"display_name":"unknow"},"score":0,"creation_date":1680082831,"post_id":75874338,"comment_id":133835463,"body_markdown":"like? \tprivate String doGenerateToken(Map&lt;String, Object&gt; claims) {\n\t\tfinal Algorithm algorithm = Algorithm.HMAC512(secret);\n\t\tfinal Instant now = Instant.now();\n\t\tfinal Instant expirationTime = Instant.now().plus(Duration.ofDays(1));\n\t\tMap&lt;String, Object&gt; usuarioClaims = new HashMap&lt;&gt;();\n\t\tMap&lt;String, Object&gt; originalUsuarioClaims = (Map&lt;String, Object&gt;) claims.get(&quot;usuario&quot;);\n\t\tusuarioClaims.putAll(originalUsuarioClaims);\n\t\treturn JWT.create().withIssuedAt(now).withExpiresAt(expirationTime).withClaim(&quot;usuario&quot;, usuarioClaims)\n\t\t\t\t.sign(algorithm);\n\t}","body":"like? \tprivate String doGenerateToken(Map&lt;String, Object&gt; claims) { \t\tfinal Algorithm algorithm = Algorithm.HMAC512(secret); \t\tfinal Instant now = Instant.now(); \t\tfinal Instant expirationTime = Instant.now().plus(Duration.ofDays(1)); \t\tMap&lt;String, Object&gt; usuarioClaims = new HashMap&lt;&gt;(); \t\tMap&lt;String, Object&gt; originalUsuarioClaims = (Map&lt;String, Object&gt;) claims.get(&quot;usuario&quot;); \t\tusuarioClaims.putAll(originalUsuarioClaims); \t\treturn JWT.create().withIssuedAt(now).withExpiresAt(expirationTime)&zwnj;&#8203;.withClaim(&quot;usuario&quot;&zwnj;&#8203;, usuarioClaims) \t\t\t\t.sign(algorithm); \t}"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1680087748,"post_id":75874338,"comment_id":133836651,"body_markdown":"Looks a lot better to me. In addition I would probably just read the clock once and set the expiration using `final Instant expirationTime = now.plus(Duration.ofDays(1));`.","body":"Looks a lot better to me. In addition I would probably just read the clock once and set the expiration using <code>final Instant expirationTime = now.plus(Duration.ofDays(1));</code>."}],"owner":{"account_id":14834790,"reputation":233,"user_id":10928304,"display_name":"unknow"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":640,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1680102312,"creation_date":1680074939,"question_id":75874338,"body_markdown":"I have a Spring 2.7.10 project with java 11 and java-jwt 4.3 and for some strange reason it generates the token but when I make the get request with it it gives a validation error, but I don&#39;t see any error in the code. I leave you the configuration and the token: This is the token that generates\r\n\r\n```json\r\n&quot;jwttoken&quot;: &quot;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJ1c3VhcmlvIjp7Im5vbWJyZSI6IkFkbWluIiwibGljZW5jaWEiOiJtMSJ9LCJleHAiOjE2ODAxODE0NzUsImlhdCI6MTY4MDA3MzQ3NX0.rbEM5oOeiucst0bAa0PKHEkAao7zAAUmCd_A3bualFWo83xXTSstAQIhHDLpf0F9LFPEBDF2mzlCI7w_6b2LEg&quot;\r\n```\r\n\r\nThis is the one that happened to the request that you see that it is the same:\r\n\r\n```none\r\n&quot;Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJ1c3VhcmlvIjp7Im5vbWJyZSI6IkFkbWluIiwibGljZW5jaWEiOiJtMSJ9LCJleHAiOjE2ODAxODE0NzUsImlhdCI6MTY4MDA3MzQ3NX0.rbEM5oOeiucst0bAa0PKHEkAao7zAAUmCd_A3bualFWo83xXTSstAQIhHDLpf0F9LFPEBDF2mzlCI7w_6b2LEg&quot;\r\n```\r\n\r\nThe token class that fails on the line\r\n\r\n```java\r\nDecodedJWT jwt = verifier.verify(token);\r\n```\r\n\r\nThis is the class\r\n\r\n```java\r\n@Component\r\npublic class JwtToken {\r\n\r\n    private final String secret;\r\n\r\n    public JwtToken(@Value(&quot;${jwt.secret}&quot;) String secret) {\r\n        this.secret = secret;\r\n    }\r\n\r\n    public String obtenerIdentificadorDelToken(String token) {\r\n        return getClaimFromToken(token, DecodedJWT::getSubject);\r\n    }\r\n\r\n    public Instant obtenerVencimientoDelToken(String token) {\r\n        return getClaimFromToken(token, DecodedJWT::getExpiresAt).toInstant();\r\n    }\r\n\r\n    public &lt;T&gt; T getClaimFromToken(String token, Function&lt;DecodedJWT, T&gt; claimsResolver) {\r\n        final DecodedJWT decodedJWT = decodeToken(token);\r\n        return claimsResolver.apply(decodedJWT);\r\n    }\r\n\r\n    private DecodedJWT decodeToken(String token) {\r\n        try {\r\n            JWTVerifier verifier = JWT.require(Algorithm.HMAC512(secret)).build();\r\n            DecodedJWT jwt = verifier.verify(token);\r\n            return jwt;\r\n        } catch (JWTDecodeException exception) {\r\n            throw new RuntimeException(&quot;Error decodificando el token&quot;, exception);\r\n        }\r\n    }\r\n\r\n    private Boolean haExpiradoElToken(String token) {\r\n        final Instant expiration = obtenerVencimientoDelToken(token);\r\n        return expiration.isBefore(Instant.now());\r\n    }\r\n\r\n    public boolean esMedico(String token) {\r\n        final DecodedJWT decodedJWT = decodeToken(token);\r\n        final Map&lt;String, Object&gt; userMap = decodedJWT.getClaim(&quot;usuario&quot;).asMap();\r\n        return userMap.get(&quot;licencia&quot;) != null;\r\n    }\r\n\r\n    public String generarToken(Logable user) {\r\n        final Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\r\n        final Map&lt;String, Object&gt; userMap = new HashMap&lt;&gt;();\r\n        Medico medico = null;\r\n        Paciente paciente = null;\r\n        if (user instanceof Medico) {\r\n            userMap.put(&quot;licencia&quot;, user.getIdentifier());\r\n            medico = (Medico) user;\r\n            userMap.put(&quot;nombre&quot;, medico.getNombre());\r\n        } else if (user instanceof Paciente) {\r\n            userMap.put(&quot;nss&quot;, user.getIdentifier());\r\n            paciente = (Paciente) user;\r\n            userMap.put(&quot;nombre&quot;, paciente.getNombre());\r\n        }\r\n        claims.put(&quot;usuario&quot;, new HashMap&lt;&gt;(userMap));\r\n        return doGenerateToken(claims);\r\n    }\r\n\r\n    private String doGenerateToken(Map&lt;String, Object&gt; claims) {\r\n        final Algorithm algorithm = Algorithm.HMAC512(secret);\r\n        final Date now = Date.from(Instant.now());\r\n        final Date expirationTime = Date.from(Instant.now().plusSeconds(30 * 60 * 60));\r\n        Map&lt;String, Object&gt; usuarioClaims = new HashMap&lt;&gt;();\r\n        Map&lt;String, Object&gt; originalUsuarioClaims = (Map&lt;String, Object&gt;) claims.get(&quot;usuario&quot;);\r\n        usuarioClaims.putAll(originalUsuarioClaims);\r\n        return JWT.create().withIssuedAt(now).withExpiresAt(expirationTime).withClaim(&quot;usuario&quot;, usuarioClaims)\r\n                .sign(algorithm);\r\n    }\r\n\r\n    public Boolean validateToken(String token, String expectedSubject) {\r\n        try {\r\n            final String identifier = obtenerIdentificadorDelToken(token);\r\n            return (identifier.equals(expectedSubject) &amp;&amp; !haExpiradoElToken(token));\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(&quot;Error al validar el token JWT&quot;, e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThis is the class of filter\r\n```java\r\n@Component\r\npublic class JwtRequestFilter extends OncePerRequestFilter {\r\n\r\n    @Autowired\r\n    private ServiciosJwtUsuarios jwtUserDetailsService;\r\n\r\n    @Autowired\r\n    private final JwtToken jwtTokenUtil;\r\n\r\n    public JwtRequestFilter(JwtToken jwtTokenUtil) {\r\n        this.jwtTokenUtil = jwtTokenUtil;\r\n    }\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)\r\n            throws ServletException, IOException {\r\n        final String requestTokenHeader = request.getHeader(&quot;Authorization&quot;);\r\n        String identifier = null;\r\n        String jwtToken = null;\r\n        if (requestTokenHeader != null &amp;&amp; requestTokenHeader.startsWith(&quot;Bearer &quot;)) {\r\n            jwtToken = requestTokenHeader.substring(7);\r\n            try {\r\n                identifier = jwtTokenUtil.obtenerIdentificadorDelToken(jwtToken);\r\n            } catch (JWTDecodeException exception) {\r\n                logger.error(&quot;No se pudo obtener el token JWT o el token JWT ha expirado&quot;, exception);\r\n            }\r\n        }\r\n        if (identifier != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\r\n            UserDetails userDetails = jwtUserDetailsService.loadUserByUsername(identifier);\r\n            if (jwtTokenUtil.validateToken(jwtToken, identifier)) {\r\n                UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(\r\n                        userDetails, null, userDetails.getAuthorities());\r\n                usernamePasswordAuthenticationToken\r\n                        .setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n                SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\r\n            }\r\n        }\r\n        chain.doFilter(request, response);\r\n    }\r\n}\r\n```\r\n\r\nThe error on the console:\r\n\r\n&gt; Caused by: com.auth0.jwt.exceptions.JWTDecodeException: The input is\r\n&gt; not a valid base 64 encoded string. Caused by:\r\n&gt; java.lang.IllegalArgumentException: Illegal base64 character 22\r\n&gt; java.lang.RuntimeException: Error decodificando el token\r\n\r\ncomplete log\r\n\r\n    java.lang.RuntimeException: Error decodificando el token\r\n    \tat com.proyecto.config.JwtToken.decodeToken(JwtToken.java:49) ~[classes/:na]\r\n    \tat com.proyecto.config.JwtToken.getClaimFromToken(JwtToken.java:39) ~[classes/:na]\r\n    \tat com.proyecto.config.JwtToken.obtenerIdentificadorDelToken(JwtToken.java:31) ~[classes/:na]\r\n    \tat com.proyecto.config.JwtRequestFilter.doFilterInternal(JwtRequestFilter.java:52) ~[classes/:na]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.26.jar:5.3.26]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.7.jar:5.7.7]\r\n    \tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.7.7.jar:5.7.7]\r\n    \tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.7.7.jar:5.7.7]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.7.jar:5.7.7]\r\n    \tat org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-5.3.26.jar:5.3.26]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.26.jar:5.3.26]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.7.jar:5.7.7]\r\n    \tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.7.7.jar:5.7.7]\r\n    \tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.7.7.jar:5.7.7]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.26.jar:5.3.26]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.7.jar:5.7.7]\r\n    \tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112) ~[spring-security-web-5.7.7.jar:5.7.7]\r\n    \tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82) ~[spring-security-web-5.7.7.jar:5.7.7]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.7.jar:5.7.7]\r\n    \tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.7.7.jar:5.7.7]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.26.jar:5.3.26]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.7.jar:5.7.7]\r\n    \tat org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-5.7.7.jar:5.7.7]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.26.jar:5.3.26]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.7.jar:5.7.7]\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221) ~[spring-security-web-5.7.7.jar:5.7.7]\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186) ~[spring-security-web-5.7.7.jar:5.7.7]\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.26.jar:5.3.26]\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.26.jar:5.3.26]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\r\n    \tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.26.jar:5.3.26]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.26.jar:5.3.26]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\r\n    \tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.26.jar:5.3.26]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.26.jar:5.3.26]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.26.jar:5.3.26]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.26.jar:5.3.26]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:492) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n    Caused by: com.auth0.jwt.exceptions.JWTDecodeException: The input is not a valid base 64 encoded string.\r\n    \tat com.auth0.jwt.JWTDecoder.&lt;init&gt;(JWTDecoder.java:46) ~[java-jwt-4.3.0.jar:4.3.0]\r\n    \tat com.auth0.jwt.JWTVerifier.verify(JWTVerifier.java:444) ~[java-jwt-4.3.0.jar:4.3.0]\r\n    \tat com.proyecto.config.JwtToken.decodeToken(JwtToken.java:46) ~[classes/:na]\r\n    \t... 58 common frames omitted\r\n    Caused by: java.lang.IllegalArgumentException: Illegal base64 character 22\r\n    \tat java.base/java.util.Base64$Decoder.decode0(Base64.java:848) ~[na:na]\r\n    \tat java.base/java.util.Base64$Decoder.decode(Base64.java:566) ~[na:na]\r\n    \tat java.base/java.util.Base64$Decoder.decode(Base64.java:589) ~[na:na]\r\n    \tat com.auth0.jwt.JWTDecoder.&lt;init&gt;(JWTDecoder.java:41) ~[java-jwt-4.3.0.jar:4.3.0]\r\n    \t... 60 common frames omitted","title":"Token decoding error Illegal base64 character 22","body":"<p>I have a Spring 2.7.10 project with java 11 and java-jwt 4.3 and for some strange reason it generates the token but when I make the get request with it it gives a validation error, but I don't see any error in the code. I leave you the configuration and the token: This is the token that generates</p>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;jwttoken&quot;: &quot;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJ1c3VhcmlvIjp7Im5vbWJyZSI6IkFkbWluIiwibGljZW5jaWEiOiJtMSJ9LCJleHAiOjE2ODAxODE0NzUsImlhdCI6MTY4MDA3MzQ3NX0.rbEM5oOeiucst0bAa0PKHEkAao7zAAUmCd_A3bualFWo83xXTSstAQIhHDLpf0F9LFPEBDF2mzlCI7w_6b2LEg&quot;\n</code></pre>\n<p>This is the one that happened to the request that you see that it is the same:</p>\n<pre class=\"lang-none prettyprint-override\"><code>&quot;Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJ1c3VhcmlvIjp7Im5vbWJyZSI6IkFkbWluIiwibGljZW5jaWEiOiJtMSJ9LCJleHAiOjE2ODAxODE0NzUsImlhdCI6MTY4MDA3MzQ3NX0.rbEM5oOeiucst0bAa0PKHEkAao7zAAUmCd_A3bualFWo83xXTSstAQIhHDLpf0F9LFPEBDF2mzlCI7w_6b2LEg&quot;\n</code></pre>\n<p>The token class that fails on the line</p>\n<pre class=\"lang-java prettyprint-override\"><code>DecodedJWT jwt = verifier.verify(token);\n</code></pre>\n<p>This is the class</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class JwtToken {\n\n    private final String secret;\n\n    public JwtToken(@Value(&quot;${jwt.secret}&quot;) String secret) {\n        this.secret = secret;\n    }\n\n    public String obtenerIdentificadorDelToken(String token) {\n        return getClaimFromToken(token, DecodedJWT::getSubject);\n    }\n\n    public Instant obtenerVencimientoDelToken(String token) {\n        return getClaimFromToken(token, DecodedJWT::getExpiresAt).toInstant();\n    }\n\n    public &lt;T&gt; T getClaimFromToken(String token, Function&lt;DecodedJWT, T&gt; claimsResolver) {\n        final DecodedJWT decodedJWT = decodeToken(token);\n        return claimsResolver.apply(decodedJWT);\n    }\n\n    private DecodedJWT decodeToken(String token) {\n        try {\n            JWTVerifier verifier = JWT.require(Algorithm.HMAC512(secret)).build();\n            DecodedJWT jwt = verifier.verify(token);\n            return jwt;\n        } catch (JWTDecodeException exception) {\n            throw new RuntimeException(&quot;Error decodificando el token&quot;, exception);\n        }\n    }\n\n    private Boolean haExpiradoElToken(String token) {\n        final Instant expiration = obtenerVencimientoDelToken(token);\n        return expiration.isBefore(Instant.now());\n    }\n\n    public boolean esMedico(String token) {\n        final DecodedJWT decodedJWT = decodeToken(token);\n        final Map&lt;String, Object&gt; userMap = decodedJWT.getClaim(&quot;usuario&quot;).asMap();\n        return userMap.get(&quot;licencia&quot;) != null;\n    }\n\n    public String generarToken(Logable user) {\n        final Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\n        final Map&lt;String, Object&gt; userMap = new HashMap&lt;&gt;();\n        Medico medico = null;\n        Paciente paciente = null;\n        if (user instanceof Medico) {\n            userMap.put(&quot;licencia&quot;, user.getIdentifier());\n            medico = (Medico) user;\n            userMap.put(&quot;nombre&quot;, medico.getNombre());\n        } else if (user instanceof Paciente) {\n            userMap.put(&quot;nss&quot;, user.getIdentifier());\n            paciente = (Paciente) user;\n            userMap.put(&quot;nombre&quot;, paciente.getNombre());\n        }\n        claims.put(&quot;usuario&quot;, new HashMap&lt;&gt;(userMap));\n        return doGenerateToken(claims);\n    }\n\n    private String doGenerateToken(Map&lt;String, Object&gt; claims) {\n        final Algorithm algorithm = Algorithm.HMAC512(secret);\n        final Date now = Date.from(Instant.now());\n        final Date expirationTime = Date.from(Instant.now().plusSeconds(30 * 60 * 60));\n        Map&lt;String, Object&gt; usuarioClaims = new HashMap&lt;&gt;();\n        Map&lt;String, Object&gt; originalUsuarioClaims = (Map&lt;String, Object&gt;) claims.get(&quot;usuario&quot;);\n        usuarioClaims.putAll(originalUsuarioClaims);\n        return JWT.create().withIssuedAt(now).withExpiresAt(expirationTime).withClaim(&quot;usuario&quot;, usuarioClaims)\n                .sign(algorithm);\n    }\n\n    public Boolean validateToken(String token, String expectedSubject) {\n        try {\n            final String identifier = obtenerIdentificadorDelToken(token);\n            return (identifier.equals(expectedSubject) &amp;&amp; !haExpiradoElToken(token));\n        } catch (Exception e) {\n            throw new RuntimeException(&quot;Error al validar el token JWT&quot;, e);\n        }\n    }\n}\n</code></pre>\n<p>This is the class of filter</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class JwtRequestFilter extends OncePerRequestFilter {\n\n    @Autowired\n    private ServiciosJwtUsuarios jwtUserDetailsService;\n\n    @Autowired\n    private final JwtToken jwtTokenUtil;\n\n    public JwtRequestFilter(JwtToken jwtTokenUtil) {\n        this.jwtTokenUtil = jwtTokenUtil;\n    }\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)\n            throws ServletException, IOException {\n        final String requestTokenHeader = request.getHeader(&quot;Authorization&quot;);\n        String identifier = null;\n        String jwtToken = null;\n        if (requestTokenHeader != null &amp;&amp; requestTokenHeader.startsWith(&quot;Bearer &quot;)) {\n            jwtToken = requestTokenHeader.substring(7);\n            try {\n                identifier = jwtTokenUtil.obtenerIdentificadorDelToken(jwtToken);\n            } catch (JWTDecodeException exception) {\n                logger.error(&quot;No se pudo obtener el token JWT o el token JWT ha expirado&quot;, exception);\n            }\n        }\n        if (identifier != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\n            UserDetails userDetails = jwtUserDetailsService.loadUserByUsername(identifier);\n            if (jwtTokenUtil.validateToken(jwtToken, identifier)) {\n                UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(\n                        userDetails, null, userDetails.getAuthorities());\n                usernamePasswordAuthenticationToken\n                        .setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n                SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\n            }\n        }\n        chain.doFilter(request, response);\n    }\n}\n</code></pre>\n<p>The error on the console:</p>\n<blockquote>\n<p>Caused by: com.auth0.jwt.exceptions.JWTDecodeException: The input is\nnot a valid base 64 encoded string. Caused by:\njava.lang.IllegalArgumentException: Illegal base64 character 22\njava.lang.RuntimeException: Error decodificando el token</p>\n</blockquote>\n<p>complete log</p>\n<pre><code>java.lang.RuntimeException: Error decodificando el token\n    at com.proyecto.config.JwtToken.decodeToken(JwtToken.java:49) ~[classes/:na]\n    at com.proyecto.config.JwtToken.getClaimFromToken(JwtToken.java:39) ~[classes/:na]\n    at com.proyecto.config.JwtToken.obtenerIdentificadorDelToken(JwtToken.java:31) ~[classes/:na]\n    at com.proyecto.config.JwtRequestFilter.doFilterInternal(JwtRequestFilter.java:52) ~[classes/:na]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.26.jar:5.3.26]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-5.3.26.jar:5.3.26]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.26.jar:5.3.26]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.26.jar:5.3.26]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112) ~[spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82) ~[spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.26.jar:5.3.26]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.26.jar:5.3.26]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346) ~[spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221) ~[spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186) ~[spring-security-web-5.7.7.jar:5.7.7]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.26.jar:5.3.26]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.26.jar:5.3.26]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.26.jar:5.3.26]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.26.jar:5.3.26]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.26.jar:5.3.26]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.26.jar:5.3.26]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.26.jar:5.3.26]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.26.jar:5.3.26]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:492) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.73.jar:9.0.73]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\nCaused by: com.auth0.jwt.exceptions.JWTDecodeException: The input is not a valid base 64 encoded string.\n    at com.auth0.jwt.JWTDecoder.&lt;init&gt;(JWTDecoder.java:46) ~[java-jwt-4.3.0.jar:4.3.0]\n    at com.auth0.jwt.JWTVerifier.verify(JWTVerifier.java:444) ~[java-jwt-4.3.0.jar:4.3.0]\n    at com.proyecto.config.JwtToken.decodeToken(JwtToken.java:46) ~[classes/:na]\n    ... 58 common frames omitted\nCaused by: java.lang.IllegalArgumentException: Illegal base64 character 22\n    at java.base/java.util.Base64$Decoder.decode0(Base64.java:848) ~[na:na]\n    at java.base/java.util.Base64$Decoder.decode(Base64.java:566) ~[na:na]\n    at java.base/java.util.Base64$Decoder.decode(Base64.java:589) ~[na:na]\n    at com.auth0.jwt.JWTDecoder.&lt;init&gt;(JWTDecoder.java:41) ~[java-jwt-4.3.0.jar:4.3.0]\n    ... 60 common frames omitted\n</code></pre>\n"},{"tags":["java","spring-cloud","spring-cloud-gateway"],"comments":[{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1674661307,"post_id":75236072,"comment_id":132762827,"body_markdown":"See the rewrite location header filter https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#the-rewritelocationresponseheader-gatewayfilter-factory","body":"See the rewrite location header filter <a href=\"https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#the-rewritelocationresponseheader-gatewayfilter-factory\" rel=\"nofollow noreferrer\">docs.spring.io/spring-cloud-gateway/docs/current/reference/h&zwnj;&#8203;tml/&hellip;</a>"},{"owner":{"account_id":6813968,"reputation":8266,"user_id":5243272,"accept_rate":83,"display_name":"sandrooco"},"score":0,"creation_date":1674803459,"post_id":75236072,"comment_id":132794884,"body_markdown":"@spencergibb is my usecase actually the intended use for this feature?","body":"@spencergibb is my usecase actually the intended use for this feature?"}],"answers":[{"tags":[],"owner":{"account_id":6813968,"reputation":8266,"user_id":5243272,"accept_rate":83,"display_name":"sandrooco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674804873,"creation_date":1674804873,"answer_id":75255186,"question_id":75236072,"body_markdown":"This is how I achieved to correctly redirect it. I&#39;m not sure if this is the cleanest solution though. I couldn&#39;t get spencergibb&#39;s input to work...\r\n\r\n    f.changeRequestUri(e -&gt; {\r\n        UriComponentsBuilder uriBuilder = UriComponentsBuilder.fromUri(e.getRequest().getURI());\r\n        String modifiedUri = uriBuilder.scheme(&quot;https&quot;).host(&quot;internal-api.com&quot;).port(null).toUriString();\r\n        return Optional.of(URI.create(modifiedUri));\r\n    });","title":"Spring Cloud Gateway: how to redirect to other host","body":"<p>This is how I achieved to correctly redirect it. I'm not sure if this is the cleanest solution though. I couldn't get spencergibb's input to work...</p>\n<pre><code>f.changeRequestUri(e -&gt; {\n    UriComponentsBuilder uriBuilder = UriComponentsBuilder.fromUri(e.getRequest().getURI());\n    String modifiedUri = uriBuilder.scheme(&quot;https&quot;).host(&quot;internal-api.com&quot;).port(null).toUriString();\n    return Optional.of(URI.create(modifiedUri));\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":543838,"reputation":2239,"user_id":913093,"accept_rate":43,"display_name":"denu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680102284,"creation_date":1680102284,"answer_id":75879022,"question_id":75236072,"body_markdown":"You need to use [rewrite path filter](https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#the-rewritepath-gatewayfilter-factory):\r\n\r\n    return builder.routes()\r\n            .route(&quot;geoApi&quot;, r -&gt; r\r\n                    .path(&quot;/site/rest/services/**&quot;)\r\n                    .filters(f -&gt; f.rewritePath(&quot;/site/rest/services/(?&lt;segment&gt;.*)&quot;, &quot;/site/rest/services/${segment}&quot;))\r\n                    .uri(&quot;https://internal-api.com&quot;))\r\n            .build();\r\n\r\nThis is answered under [this Stack Overflow question](https://stackoverflow.com/questions/48865174/spring-cloud-gateway-proxy-forward-the-entire-sub-part-of-url).\r\n\r\n","title":"Spring Cloud Gateway: how to redirect to other host","body":"<p>You need to use <a href=\"https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#the-rewritepath-gatewayfilter-factory\" rel=\"nofollow noreferrer\">rewrite path filter</a>:</p>\n<pre><code>return builder.routes()\n        .route(&quot;geoApi&quot;, r -&gt; r\n                .path(&quot;/site/rest/services/**&quot;)\n                .filters(f -&gt; f.rewritePath(&quot;/site/rest/services/(?&lt;segment&gt;.*)&quot;, &quot;/site/rest/services/${segment}&quot;))\n                .uri(&quot;https://internal-api.com&quot;))\n        .build();\n</code></pre>\n<p>This is answered under <a href=\"https://stackoverflow.com/questions/48865174/spring-cloud-gateway-proxy-forward-the-entire-sub-part-of-url\">this Stack Overflow question</a>.</p>\n"}],"owner":{"account_id":6813968,"reputation":8266,"user_id":5243272,"accept_rate":83,"display_name":"sandrooco"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2387,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1680102284,"creation_date":1674660040,"question_id":75236072,"body_markdown":"I have a request/route that should be redirected to another server. For this, I thought using a redirect filter from &#39;spring-cloud-gateway&#39; should be the right thing.\r\nExample:\r\nhttp://localhost:8080/site/rest/services/testservice/1 should be redirected to https://internal-api.com/site/rest/services/testservice/1.\r\n\r\nSo far I came up with the following filters in a `RouteLocator`:\r\n\r\n\r\n    @Bean\r\n    public RouteLocator routes(RouteLocatorBuilder builder) {\r\n        String auth = username + &quot;:&quot; + password;\r\n        String encodedAuth = Base64.getEncoder().encodeToString(auth.getBytes());\r\n        \r\n        return builder.routes()\r\n                .route(&quot;geoApi&quot;, r -&gt; r\r\n                        .path(&quot;/site/rest/services/**&quot;)\r\n                        .filters(f -&gt; {\r\n                            f.setRequestHeader(HttpHeaders.AUTHORIZATION, &quot;Basic &quot; + encodedAuth);\r\n                            f.redirect(302, &quot;https://internal-api.com&quot;);\r\n                            return f;\r\n                        })\r\n                        .uri(&quot;https://internal-api.com&quot;))\r\n                .build();\r\n    }\r\n\r\nThe redirect works, **but** only goes to the &quot;root&quot; url of the internal API and not the &quot;/site/rest/...&quot;. How can I fix this?","title":"Spring Cloud Gateway: how to redirect to other host","body":"<p>I have a request/route that should be redirected to another server. For this, I thought using a redirect filter from 'spring-cloud-gateway' should be the right thing.\nExample:\nhttp://localhost:8080/site/rest/services/testservice/1 should be redirected to <a href=\"https://internal-api.com/site/rest/services/testservice/1\" rel=\"nofollow noreferrer\">https://internal-api.com/site/rest/services/testservice/1</a>.</p>\n<p>So far I came up with the following filters in a <code>RouteLocator</code>:</p>\n<pre><code>@Bean\npublic RouteLocator routes(RouteLocatorBuilder builder) {\n    String auth = username + &quot;:&quot; + password;\n    String encodedAuth = Base64.getEncoder().encodeToString(auth.getBytes());\n    \n    return builder.routes()\n            .route(&quot;geoApi&quot;, r -&gt; r\n                    .path(&quot;/site/rest/services/**&quot;)\n                    .filters(f -&gt; {\n                        f.setRequestHeader(HttpHeaders.AUTHORIZATION, &quot;Basic &quot; + encodedAuth);\n                        f.redirect(302, &quot;https://internal-api.com&quot;);\n                        return f;\n                    })\n                    .uri(&quot;https://internal-api.com&quot;))\n            .build();\n}\n</code></pre>\n<p>The redirect works, <strong>but</strong> only goes to the &quot;root&quot; url of the internal API and not the &quot;/site/rest/...&quot;. How can I fix this?</p>\n"},{"tags":["python","java","zeromq"],"owner":{"account_id":16944271,"reputation":727,"user_id":12255379,"display_name":"Nikolai Savulkin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680102225,"creation_date":1680102225,"question_id":75879008,"body_markdown":"I&#39;m trying to get some data sent from a server (PyZMQ) to an android client (jeroMQ). \r\n\r\nI already managed to get SUB/PUB pattern working but since my python served streams video feed from camera to potentially multiple clients RADIO/DISH seems like a better pattern. \r\n\r\nHere is my java snippet where I setup the dish:\r\n\r\n```java\r\nZMQ.Socket socket = context.createSocket(SocketType.DISH);\r\nsocket.join(&quot;video-feed&quot;);\r\nsocket.connect(&quot;tcp://&quot; + this.host + &quot;:&quot; + this.port);\r\n```\r\n\r\nand this is how my radio socket is setup:\r\n\r\n```py\r\nfootage_socket = context.socket(zmq.RADIO)\r\nfootage_socket.set_hwm(value=1)\r\nfootage_socket.bind(&#39;tcp://145.116.168.25:6666&#39;)\r\n```\r\n\r\nI then send and receive string containing frame data:\r\n\r\n```py\r\nfootage_socket.send(jpg_as_text, group=&quot;video-feed&quot;)\r\n```\r\n\r\nand \r\n\r\n```java\r\nString jpg_as_text = socket.recvStr();\r\n```\r\n\r\nHowever, while java client manages to successfully run, python server complains about call to send, in particular:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File &quot;C:/Users/grass/Desktop/codes/Py/track/dummy-sender.py&quot;, line 47, in &lt;module&gt;\r\n    thread.run()\r\n  File &quot;C:\\Users\\grass\\Desktop\\codes\\Py\\track\\net_common.py&quot;, line 65, in run\r\n    self._target(self, **kwargs)\r\n  File &quot;C:/Users/grass/Desktop/codes/Py/track/dummy-sender.py&quot;, line 24, in run_send\r\n    kwargs[&quot;sock&quot;].send(jpg_as_text, group=&quot;video-feed&quot;)\r\n  File &quot;C:\\Users\\grass\\Desktop\\codes\\Rust\\scripts\\venv\\Desktop\\codes\\Py\\lib\\site-packages\\zmq\\sugar\\socket.py&quot;, line 687, in send\r\n    data.group = group\r\n  File &quot;C:\\Users\\grass\\Desktop\\codes\\Rust\\scripts\\venv\\Desktop\\codes\\Py\\lib\\site-packages\\zmq\\sugar\\attrsettr.py&quot;, line 26, in __setattr__\r\n    object.__setattr__(self, key, value)\r\n  File &quot;C:\\Users\\grass\\Desktop\\codes\\Rust\\scripts\\venv\\Desktop\\codes\\Py\\lib\\site-packages\\zmq\\sugar\\frame.py&quot;, line 85, in group\r\n    self.set(&#39;group&#39;, group)\r\n  File &quot;zmq\\backend\\cython\\message.pyx&quot;, line 359, in zmq.backend.cython.message.Frame.set\r\n  File &quot;zmq\\backend\\cython\\checkrc.pxd&quot;, line 28, in zmq.backend.cython.checkrc._check_rc\r\nzmq.error.ZMQError: No such device\r\n``` \r\n\r\nFrom error it seems like either RADIO socket is not supported in PyZMQ version i use, or somehow bind fails. But I&#39;m not sure I also got the socket initialization right, since I couldn&#39;t find java example, and sole [python example](https://github.com/zeromq/pyzmq/blob/main/examples/draft/radio-dish.py) i found was very rudimentary. ","title":"RADIO/DISH communication pattern in PyZMQ and jeroMQ","body":"<p>I'm trying to get some data sent from a server (PyZMQ) to an android client (jeroMQ).</p>\n<p>I already managed to get SUB/PUB pattern working but since my python served streams video feed from camera to potentially multiple clients RADIO/DISH seems like a better pattern.</p>\n<p>Here is my java snippet where I setup the dish:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ZMQ.Socket socket = context.createSocket(SocketType.DISH);\nsocket.join(&quot;video-feed&quot;);\nsocket.connect(&quot;tcp://&quot; + this.host + &quot;:&quot; + this.port);\n</code></pre>\n<p>and this is how my radio socket is setup:</p>\n<pre class=\"lang-py prettyprint-override\"><code>footage_socket = context.socket(zmq.RADIO)\nfootage_socket.set_hwm(value=1)\nfootage_socket.bind('tcp://145.116.168.25:6666')\n</code></pre>\n<p>I then send and receive string containing frame data:</p>\n<pre class=\"lang-py prettyprint-override\"><code>footage_socket.send(jpg_as_text, group=&quot;video-feed&quot;)\n</code></pre>\n<p>and</p>\n<pre class=\"lang-java prettyprint-override\"><code>String jpg_as_text = socket.recvStr();\n</code></pre>\n<p>However, while java client manages to successfully run, python server complains about call to send, in particular:</p>\n<pre><code>Traceback (most recent call last):\n  File &quot;C:/Users/grass/Desktop/codes/Py/track/dummy-sender.py&quot;, line 47, in &lt;module&gt;\n    thread.run()\n  File &quot;C:\\Users\\grass\\Desktop\\codes\\Py\\track\\net_common.py&quot;, line 65, in run\n    self._target(self, **kwargs)\n  File &quot;C:/Users/grass/Desktop/codes/Py/track/dummy-sender.py&quot;, line 24, in run_send\n    kwargs[&quot;sock&quot;].send(jpg_as_text, group=&quot;video-feed&quot;)\n  File &quot;C:\\Users\\grass\\Desktop\\codes\\Rust\\scripts\\venv\\Desktop\\codes\\Py\\lib\\site-packages\\zmq\\sugar\\socket.py&quot;, line 687, in send\n    data.group = group\n  File &quot;C:\\Users\\grass\\Desktop\\codes\\Rust\\scripts\\venv\\Desktop\\codes\\Py\\lib\\site-packages\\zmq\\sugar\\attrsettr.py&quot;, line 26, in __setattr__\n    object.__setattr__(self, key, value)\n  File &quot;C:\\Users\\grass\\Desktop\\codes\\Rust\\scripts\\venv\\Desktop\\codes\\Py\\lib\\site-packages\\zmq\\sugar\\frame.py&quot;, line 85, in group\n    self.set('group', group)\n  File &quot;zmq\\backend\\cython\\message.pyx&quot;, line 359, in zmq.backend.cython.message.Frame.set\n  File &quot;zmq\\backend\\cython\\checkrc.pxd&quot;, line 28, in zmq.backend.cython.checkrc._check_rc\nzmq.error.ZMQError: No such device\n</code></pre>\n<p>From error it seems like either RADIO socket is not supported in PyZMQ version i use, or somehow bind fails. But I'm not sure I also got the socket initialization right, since I couldn't find java example, and sole <a href=\"https://github.com/zeromq/pyzmq/blob/main/examples/draft/radio-dish.py\" rel=\"nofollow noreferrer\">python example</a> i found was very rudimentary.</p>\n"},{"tags":["java","gradle","gradle-kotlin-dsl"],"owner":{"account_id":20863086,"reputation":3,"user_id":15419509,"display_name":"GamerCoder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680102098,"creation_date":1679622173,"question_id":75829375,"body_markdown":"I have multiple modules, one called &quot;abstraction&quot; and one called &quot;API&quot;:\r\n\r\n```kt\r\n// abstraction/build.gradle.kts\r\n\r\ndependencies {\r\n    implementation(project(&quot;:api&quot;))\r\n}\r\n```\r\n\r\nThe gradle command line does not resolve the dependencies from the API module:\r\n```bash\r\n# Present in the API Module\r\nimport me.gamercoder215.starcosmetics.api.cosmetics.Cosmetic;\r\n                                                   ^\r\n  symbol:   class Cosmetic\r\n  location: package me.gamercoder215.starcosmetics.api.cosmetics\r\n100 errors\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task &#39;:abstraction:compileJava&#39;.\r\n\r\n&gt; Compilation failed; see the compiler error output for details.\r\n```\r\n\r\nHowever, both VSCode (Codespace) and the IntelliJ&#39;s gradle-related extensions both resolve the dependencies in the build script, allowing editing in those IDEs like normal.\r\n\r\n[Screenshot](https://i.stack.imgur.com/ocoqz.png)\r\n\r\nIs there something I&#39;m doing wrong, or is it an issue with Gradle?","title":"Gradle doesn&#39;t resolve module dependencies, but IDE Integrations Do","body":"<p>I have multiple modules, one called &quot;abstraction&quot; and one called &quot;API&quot;:</p>\n<pre><code>// abstraction/build.gradle.kts\n\ndependencies {\n    implementation(project(&quot;:api&quot;))\n}\n</code></pre>\n<p>The gradle command line does not resolve the dependencies from the API module:</p>\n<pre class=\"lang-bash prettyprint-override\"><code># Present in the API Module\nimport me.gamercoder215.starcosmetics.api.cosmetics.Cosmetic;\n                                                   ^\n  symbol:   class Cosmetic\n  location: package me.gamercoder215.starcosmetics.api.cosmetics\n100 errors\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':abstraction:compileJava'.\n\n&gt; Compilation failed; see the compiler error output for details.\n</code></pre>\n<p>However, both VSCode (Codespace) and the IntelliJ's gradle-related extensions both resolve the dependencies in the build script, allowing editing in those IDEs like normal.</p>\n<p><a href=\"https://i.stack.imgur.com/ocoqz.png\" rel=\"nofollow noreferrer\">Screenshot</a></p>\n<p>Is there something I'm doing wrong, or is it an issue with Gradle?</p>\n"},{"tags":["java","sql","tls1.2"],"comments":[{"owner":{"account_id":417882,"reputation":312,"user_id":3494429,"display_name":"Chris94"},"score":0,"creation_date":1625228515,"post_id":68126780,"comment_id":120578591,"body_markdown":"Were you able to resolve this issue?","body":"Were you able to resolve this issue?"}],"answers":[{"tags":[],"owner":{"account_id":1315858,"reputation":1454,"user_id":1262758,"display_name":"Peter Kalef &#39; DidiSoft"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1624604759,"creation_date":1624604759,"answer_id":68126827,"question_id":68126780,"body_markdown":"TLS 1.2 must be configured on SQL Server: [https://support.microsoft.com/en-us/topic/kb3135244-tls-1-2-support-for-microsoft-sql-server-e4472ef8-90a9-13c1-e4d8-44aad198cdbe][1]\r\n\r\n\r\n  [1]: https://support.microsoft.com/en-us/topic/kb3135244-tls-1-2-support-for-microsoft-sql-server-e4472ef8-90a9-13c1-e4d8-44aad198cdbe","title":"how to fix The server selected protocol version TLS10 is not accepted by client preferences [TLS12]","body":"<p>TLS 1.2 must be configured on SQL Server: <a href=\"https://support.microsoft.com/en-us/topic/kb3135244-tls-1-2-support-for-microsoft-sql-server-e4472ef8-90a9-13c1-e4d8-44aad198cdbe\" rel=\"nofollow noreferrer\">https://support.microsoft.com/en-us/topic/kb3135244-tls-1-2-support-for-microsoft-sql-server-e4472ef8-90a9-13c1-e4d8-44aad198cdbe</a></p>\n"}],"owner":{"account_id":22047418,"reputation":51,"user_id":16312206,"display_name":"meilyusuf"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21615,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1680102085,"creation_date":1624604554,"question_id":68126780,"body_markdown":"I want to run a spring boot application with a sql server data base but when I run it, the following error appears :\r\n\r\n```bash\r\ncom.microsoft.sqlserver.jdbc.SQLServerException: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption. Error: &quot;The server selected protocol version TLS10 is not accepted by client preferences [TLS12]&quot;. ClientConnectionId:73ea4fa4-e772-4fd7-90f5-d617aec091f2\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.terminate(SQLServerConnection.java:2924) ~[mssql-jdbc-7.4.1.jre8.jar:na]\r\n\tat com.microsoft.sqlserver.jdbc.TDSChannel.enableSSL(IOBuffer.java:1881) ~[mssql-jdbc-7.4.1.jre8.jar:na]\r\n```","title":"how to fix The server selected protocol version TLS10 is not accepted by client preferences [TLS12]","body":"<p>I want to run a spring boot application with a sql server data base but when I run it, the following error appears :</p>\n<pre class=\"lang-sh prettyprint-override\"><code>com.microsoft.sqlserver.jdbc.SQLServerException: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption. Error: &quot;The server selected protocol version TLS10 is not accepted by client preferences [TLS12]&quot;. ClientConnectionId:73ea4fa4-e772-4fd7-90f5-d617aec091f2\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.terminate(SQLServerConnection.java:2924) ~[mssql-jdbc-7.4.1.jre8.jar:na]\n    at com.microsoft.sqlserver.jdbc.TDSChannel.enableSSL(IOBuffer.java:1881) ~[mssql-jdbc-7.4.1.jre8.jar:na]\n</code></pre>\n"},{"tags":["java","collections","java-5"],"comments":[{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":0,"creation_date":1606849984,"post_id":65096800,"comment_id":115085713,"body_markdown":"Counts an element as duplicate if it appears several times in one list or if an element appears in several lists?","body":"Counts an element as duplicate if it appears several times in one list or if an element appears in several lists?"},{"owner":{"account_id":9814656,"reputation":209,"user_id":7271525,"accept_rate":100,"display_name":"aedan"},"score":0,"creation_date":1606868205,"post_id":65096800,"comment_id":115092206,"body_markdown":"if it at least show up twice on any of list, I should be able to get that number","body":"if it at least show up twice on any of list, I should be able to get that number"}],"answers":[{"tags":[],"owner":{"account_id":20080667,"reputation":129,"user_id":14723396,"display_name":"Jimbo McHiggins"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1606851340,"creation_date":1606851340,"answer_id":65097318,"question_id":65096800,"body_markdown":"### Edit\r\nThis Assumes that you are looking for any duplicate values. This includes finding duplicates in the same list. Correct me if I misunderstood the question.\r\n\r\n---\r\n\r\nYou could do this in O(N) time and O(N) space by traversing the nested hash while counting the occurrences of each integer. Then we can filter to integers with more than one occurrence.\r\n\r\n```\r\nMap&lt;String, List&lt;Integer&gt;&gt; innerMap = new HashMap&lt;&gt;();\r\ninnerMap.put(&quot;bDesc_1000&quot;, Arrays.asList(62, 72, 82, 92, 102, 112, 122));\r\ninnerMap.put(&quot;bDesc_1001&quot;, Arrays.asList(180, 190, 200, 210, 220, 230, 240));\r\ninnerMap.put(&quot;cMessage_1000&quot;, Collections.singletonList(112));\r\ninnerMap.put(&quot;cMessage_1001&quot;, Collections.singletonList(232));\r\n\r\nMap&lt;String, Map&lt;String, List&lt;Integer&gt;&gt;&gt; map = new HashMap&lt;&gt;();\r\nmap.put(&quot;break_desc100&quot;, innerMap);\r\n\r\nMap&lt;Integer, Integer&gt; occurrenceMap = new HashMap&lt;&gt;();\r\nmap.forEach((outerKey, outerValue) -&gt; {\r\n    outerValue.forEach((innerKey, innerValue) -&gt; {\r\n        innerValue.forEach((element -&gt; occurrenceMap.merge(element, 1, Integer::sum)\r\n        ));\r\n    });\r\n});\r\n\r\nList&lt;Integer&gt; duplicates = occurrenceMap.entrySet().stream()\r\n        .filter(e -&gt; e.getValue() &gt; 1)\r\n        .map(Map.Entry::getKey)\r\n        .collect(Collectors.toList());\r\nSystem.out.println(duplicates);\r\n```\r\noutput\r\n```\r\n[112]\r\n```","title":"Get all duplicate values from multiple list in Java","body":"<h3>Edit</h3>\n<p>This Assumes that you are looking for any duplicate values. This includes finding duplicates in the same list. Correct me if I misunderstood the question.</p>\n<hr />\n<p>You could do this in O(N) time and O(N) space by traversing the nested hash while counting the occurrences of each integer. Then we can filter to integers with more than one occurrence.</p>\n<pre><code>Map&lt;String, List&lt;Integer&gt;&gt; innerMap = new HashMap&lt;&gt;();\ninnerMap.put(&quot;bDesc_1000&quot;, Arrays.asList(62, 72, 82, 92, 102, 112, 122));\ninnerMap.put(&quot;bDesc_1001&quot;, Arrays.asList(180, 190, 200, 210, 220, 230, 240));\ninnerMap.put(&quot;cMessage_1000&quot;, Collections.singletonList(112));\ninnerMap.put(&quot;cMessage_1001&quot;, Collections.singletonList(232));\n\nMap&lt;String, Map&lt;String, List&lt;Integer&gt;&gt;&gt; map = new HashMap&lt;&gt;();\nmap.put(&quot;break_desc100&quot;, innerMap);\n\nMap&lt;Integer, Integer&gt; occurrenceMap = new HashMap&lt;&gt;();\nmap.forEach((outerKey, outerValue) -&gt; {\n    outerValue.forEach((innerKey, innerValue) -&gt; {\n        innerValue.forEach((element -&gt; occurrenceMap.merge(element, 1, Integer::sum)\n        ));\n    });\n});\n\nList&lt;Integer&gt; duplicates = occurrenceMap.entrySet().stream()\n        .filter(e -&gt; e.getValue() &gt; 1)\n        .map(Map.Entry::getKey)\n        .collect(Collectors.toList());\nSystem.out.println(duplicates);\n</code></pre>\n<p>output</p>\n<pre><code>[112]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2111403,"reputation":33698,"user_id":1876620,"accept_rate":94,"display_name":"fps"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1680101889,"creation_date":1606851873,"answer_id":65097458,"question_id":65096800,"body_markdown":"This seems like a suitable task for streams:\r\n\r\n    Map&lt;Integer, Long&gt; counts = streams.values().stream()\r\n           .flatMap(bDescList -&gt; bDescList.values().stream())\r\n           .flatMap(nextList -&gt; nextList.stream())\r\n           .collect(Collectors.groupingBy(\r\n                    Function.identity(), \r\n                    Collectors.counting()));\r\n\r\n    counts.values().removeIf(c -&gt; c == 1L);\r\n\r\n    Set&lt;Integer&gt; duplicates = counts.keySet();\r\n\r\nThis code first creates a map of counts. For this, it first streams the values of the outer map and then uses `Stream.flatMap` to create a new stream with the values of all the inner maps. As these values are actually lists, we need to use `Stream.flatMap` again, to finally get a stream of `Integer`. (I&#39;ve kept the variable names from your question).\r\n\r\nWe collect to a map of counts, where the keys are the numbers from all the inner maps&#39; list values, and the values are the counts for each one of these numbers, accross all maps and lists.\r\n\r\nThen, we remove all entries from the counts map that have a value of `1`. The remaining keys are the duplicate numbers.\r\n\r\n\r\n----------\r\n\r\n\r\n**EDIT:** Here&#39;s the equivalent code in Java 5... &#128552;&#128552;&#128552;\r\n\r\n    Map&lt;Integer, Long&gt; counts = new HashMap&lt;Integer, Long&gt;();\r\n\r\n    for (Map&lt;String, List&lt;Integer&gt;&gt; bDescList : streams.values()) {\r\n        for (List&lt;Integer&gt; bDesc : bDescList.values()) {\r\n            for (Integer n : bDesc) {\r\n                Long c = counts.get(n);\r\n                if (c == null) {\r\n                    c = 0L;\r\n                }\r\n                counts.put(n, c + 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    Iterator&lt;Long&gt; it = counts.values().iterator();\r\n    while (it.hasNext()) {\r\n        Long c = it.next();\r\n        if (c == 1L) {\r\n            it.remove();\r\n        }\r\n    }\r\n\r\n    Set&lt;Integer&gt; duplicates = counts.keySet();\r\n\r\nThe rationale is exactly the same here... We create a map of counts by iterating the map of maps of lists, then we remove entries with a count of 1 and the remaining keys are the duplicates.\r\n","title":"Get all duplicate values from multiple list in Java","body":"<p>This seems like a suitable task for streams:</p>\n<pre><code>Map&lt;Integer, Long&gt; counts = streams.values().stream()\n       .flatMap(bDescList -&gt; bDescList.values().stream())\n       .flatMap(nextList -&gt; nextList.stream())\n       .collect(Collectors.groupingBy(\n                Function.identity(), \n                Collectors.counting()));\n\ncounts.values().removeIf(c -&gt; c == 1L);\n\nSet&lt;Integer&gt; duplicates = counts.keySet();\n</code></pre>\n<p>This code first creates a map of counts. For this, it first streams the values of the outer map and then uses <code>Stream.flatMap</code> to create a new stream with the values of all the inner maps. As these values are actually lists, we need to use <code>Stream.flatMap</code> again, to finally get a stream of <code>Integer</code>. (I've kept the variable names from your question).</p>\n<p>We collect to a map of counts, where the keys are the numbers from all the inner maps' list values, and the values are the counts for each one of these numbers, accross all maps and lists.</p>\n<p>Then, we remove all entries from the counts map that have a value of <code>1</code>. The remaining keys are the duplicate numbers.</p>\n<hr />\n<p><strong>EDIT:</strong> Here's the equivalent code in Java 5... 😨😨😨</p>\n<pre><code>Map&lt;Integer, Long&gt; counts = new HashMap&lt;Integer, Long&gt;();\n\nfor (Map&lt;String, List&lt;Integer&gt;&gt; bDescList : streams.values()) {\n    for (List&lt;Integer&gt; bDesc : bDescList.values()) {\n        for (Integer n : bDesc) {\n            Long c = counts.get(n);\n            if (c == null) {\n                c = 0L;\n            }\n            counts.put(n, c + 1);\n        }\n    }\n}\n\nIterator&lt;Long&gt; it = counts.values().iterator();\nwhile (it.hasNext()) {\n    Long c = it.next();\n    if (c == 1L) {\n        it.remove();\n    }\n}\n\nSet&lt;Integer&gt; duplicates = counts.keySet();\n</code></pre>\n<p>The rationale is exactly the same here... We create a map of counts by iterating the map of maps of lists, then we remove entries with a count of 1 and the remaining keys are the duplicates.</p>\n"}],"owner":{"account_id":9814656,"reputation":209,"user_id":7271525,"accept_rate":100,"display_name":"aedan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1253,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":65097458,"answer_count":2,"score":3,"last_activity_date":1680101889,"creation_date":1606849056,"question_id":65096800,"body_markdown":"I want to get all values that has duplicate from multiple List of Integers.\r\nThe confusing part is these list of Integers are inside a Map of Map like this LinkedHashMap&lt;String, LinkedHashMap&lt;String, List&lt;Integer&gt;&gt;&gt; streams\r\n```\r\n// sample value\r\n{\r\n\tbreak_desc100=\r\n\t{\r\n\t\tbDesc_1000=[62, 72, 82, 92, 102, 112, 122], \r\n\t\tbDesc 1001=[180, 190, 200, 210, 220, 230, 240], \r\n\t\tcMessage_1000=[112], \r\n\t\tcMessage_1001=[232]\r\n\t}\r\n}\r\n// for this one I want to get 112\r\n```\r\nSo far I tried using retainAll but my code doesn&#39;t work if the list with duplicate are not next to each other.\r\n```\r\nfor (Map.Entry&lt;String,LinkedHashMap&lt;String,List&lt;Integer&gt;&gt;&gt; entry : streams.entrySet()) {\r\n     String currentStream = entry.getKey();\r\n     LinkedHashMap&lt;String,List&lt;Integer&gt;&gt; bDescList = entry.getValue();\r\n     for (Map.Entry&lt;String,List&lt;Integer&gt;&gt; bDesc : bDescList.entrySet()) {\r\n          if (firstIteration) {\r\n              prevBDesc = bDesc;\r\n              firstIteration = false;\r\n          } else {\r\n              List&lt;Integer&gt; currentList = prevBDesc.getValue();\r\n              List&lt;Integer&gt; nextList = bDesc.getValue();\r\n              duplicates = new ArrayList&lt;Integer&gt;(currentList);\r\n              duplicates.retainAll(nextList);\r\n              allDuplicates.addAll(duplicates); //Set&lt;Integer&gt;\r\n              prevBDesc = bDesc;\r\n          }\r\n     }\r\n}\r\n```\r\nEDIT:\r\nSorry guys I forgot to add that it is running on Java 1.5.","title":"Get all duplicate values from multiple list in Java","body":"<p>I want to get all values that has duplicate from multiple List of Integers.\nThe confusing part is these list of Integers are inside a Map of Map like this LinkedHashMap&lt;String, LinkedHashMap&lt;String, List&gt;&gt; streams</p>\n<pre><code>// sample value\n{\n    break_desc100=\n    {\n        bDesc_1000=[62, 72, 82, 92, 102, 112, 122], \n        bDesc 1001=[180, 190, 200, 210, 220, 230, 240], \n        cMessage_1000=[112], \n        cMessage_1001=[232]\n    }\n}\n// for this one I want to get 112\n</code></pre>\n<p>So far I tried using retainAll but my code doesn't work if the list with duplicate are not next to each other.</p>\n<pre><code>for (Map.Entry&lt;String,LinkedHashMap&lt;String,List&lt;Integer&gt;&gt;&gt; entry : streams.entrySet()) {\n     String currentStream = entry.getKey();\n     LinkedHashMap&lt;String,List&lt;Integer&gt;&gt; bDescList = entry.getValue();\n     for (Map.Entry&lt;String,List&lt;Integer&gt;&gt; bDesc : bDescList.entrySet()) {\n          if (firstIteration) {\n              prevBDesc = bDesc;\n              firstIteration = false;\n          } else {\n              List&lt;Integer&gt; currentList = prevBDesc.getValue();\n              List&lt;Integer&gt; nextList = bDesc.getValue();\n              duplicates = new ArrayList&lt;Integer&gt;(currentList);\n              duplicates.retainAll(nextList);\n              allDuplicates.addAll(duplicates); //Set&lt;Integer&gt;\n              prevBDesc = bDesc;\n          }\n     }\n}\n</code></pre>\n<p>EDIT:\nSorry guys I forgot to add that it is running on Java 1.5.</p>\n"},{"tags":["java","io","bufferedreader"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1680107221,"post_id":75878906,"comment_id":133842535,"body_markdown":"1. If you want **specific** answers about performance, you have to benchmark (in this case [micro-benchmark](https://stackoverflow.com/questions/504103)) a *specific* use case yourself to get useful answers. General, vague answers are of limited use. 2. despite #1 I will tell you that the majority of the performance in any I/O will be lost in the actual I/O and not in any utility code surrounding it (unless that utility code does something *very* silly, like re-reading the same file over and over again). 3. being able to write code faster is also valuable, maybe more than code running faster.","body":"1. If you want <b>specific</b> answers about performance, you have to benchmark (in this case <a href=\"https://stackoverflow.com/questions/504103\">micro-benchmark</a>) a <i>specific</i> use case yourself to get useful answers. General, vague answers are of limited use. 2. despite #1 I will tell you that the majority of the performance in any I/O will be lost in the actual I/O and not in any utility code surrounding it (unless that utility code does something <i>very</i> silly, like re-reading the same file over and over again). 3. being able to write code faster is also valuable, maybe more than code running faster."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1680109108,"post_id":75878906,"comment_id":133842995,"body_markdown":"Don’t believe arbitrary internet pages claiming to have the magic solution that makes things faster. Read *carefully* what you have found and consider that even if the statements on this page were true for Java&#160;6 and Windows XP, it doesn’t mean that this has any relevance for today’s systems. However, to code shown on this page indicates that the author does *not* know, [how to do a correct micro benchmark](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java?noredirect=1&amp;lq=1).","body":"Don’t believe arbitrary internet pages claiming to have the magic solution that makes things faster. Read <i>carefully</i> what you have found and consider that even if the statements on this page were true for Java 6 and Windows XP, it doesn’t mean that this has any relevance for today’s systems. However, to code shown on this page indicates that the author does <i>not</i> know, <a href=\"https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java?noredirect=1&amp;lq=1\">how to do a correct micro benchmark</a>."}],"owner":{"account_id":22097004,"reputation":11,"user_id":16393969,"display_name":"LLLgoyour"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1680101818,"creation_date":1680101818,"question_id":75878906,"body_markdown":"When I mention &quot;better&quot;, it means the program will reduce its use of memory, or the program will run faster.\r\n\r\nIn competetive coding, we seek better IO and reduce time and space complexity to access sample cases. I use Java specifically in competetive coding, and I wonder is there really a difference between using a input class or using java.io.BufferReader.\r\n\r\nWhen I reviewed past USACO platinum [problem solution](https://web.archive.org/web/20221221132451/http://usaco.org/current/data/sol_prob3_platinum_open21.html) written in Java, I saw uses of BufferedReader.\r\n\r\nIf I say I use BufferReader, the code will be:\r\n```\r\nimport java.io.BufferedReader;\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\n\r\nclass template {\r\n    public static void main(String[] args) throws IOException {\r\n        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));\r\n    }\r\n}\r\n```\r\n\r\nIf I write a input class, the code will be (credit to: [Department of Computer Engineering in Kasetsart University](https://web.archive.org/web/20220930184059/https://www.cpe.ku.ac.th/~jim/java-io.html))\r\n\r\n```\r\n/** Class for buffered reading int and double values */\r\nclass Reader {\r\n    static BufferedReader reader;\r\n    static StringTokenizer tokenizer;\r\n\r\n    /** call this method to initialize reader for InputStream */\r\n    static void init(InputStream input) {\r\n        reader = new BufferedReader(\r\n                     new InputStreamReader(input) );\r\n        tokenizer = new StringTokenizer(&quot;&quot;);\r\n    }\r\n\r\n    /** get next word */\r\n    static String next() throws IOException {\r\n        while ( ! tokenizer.hasMoreTokens() ) {\r\n            //TODO add check for eof if necessary\r\n            tokenizer = new StringTokenizer(\r\n                   reader.readLine() );\r\n        }\r\n        return tokenizer.nextToken();\r\n    }\r\n\r\n    static int nextInt() throws IOException {\r\n        return Integer.parseInt( next() );\r\n    }\r\n\t\r\n    static double nextDouble() throws IOException {\r\n        return Double.parseDouble( next() );\r\n    }\r\n}\r\n```\r\n\r\n\r\nI expected directly using BufferedReader could be better.","title":"Is it better to write a custom input class or use BufferReader directly for INPUT in Java?","body":"<p>When I mention &quot;better&quot;, it means the program will reduce its use of memory, or the program will run faster.</p>\n<p>In competetive coding, we seek better IO and reduce time and space complexity to access sample cases. I use Java specifically in competetive coding, and I wonder is there really a difference between using a input class or using java.io.BufferReader.</p>\n<p>When I reviewed past USACO platinum <a href=\"https://web.archive.org/web/20221221132451/http://usaco.org/current/data/sol_prob3_platinum_open21.html\" rel=\"nofollow noreferrer\">problem solution</a> written in Java, I saw uses of BufferedReader.</p>\n<p>If I say I use BufferReader, the code will be:</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\n\nclass template {\n    public static void main(String[] args) throws IOException {\n        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));\n    }\n}\n</code></pre>\n<p>If I write a input class, the code will be (credit to: <a href=\"https://web.archive.org/web/20220930184059/https://www.cpe.ku.ac.th/%7Ejim/java-io.html\" rel=\"nofollow noreferrer\">Department of Computer Engineering in Kasetsart University</a>)</p>\n<pre><code>/** Class for buffered reading int and double values */\nclass Reader {\n    static BufferedReader reader;\n    static StringTokenizer tokenizer;\n\n    /** call this method to initialize reader for InputStream */\n    static void init(InputStream input) {\n        reader = new BufferedReader(\n                     new InputStreamReader(input) );\n        tokenizer = new StringTokenizer(&quot;&quot;);\n    }\n\n    /** get next word */\n    static String next() throws IOException {\n        while ( ! tokenizer.hasMoreTokens() ) {\n            //TODO add check for eof if necessary\n            tokenizer = new StringTokenizer(\n                   reader.readLine() );\n        }\n        return tokenizer.nextToken();\n    }\n\n    static int nextInt() throws IOException {\n        return Integer.parseInt( next() );\n    }\n    \n    static double nextDouble() throws IOException {\n        return Double.parseDouble( next() );\n    }\n}\n</code></pre>\n<p>I expected directly using BufferedReader could be better.</p>\n"},{"tags":["java","spring","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":10064371,"reputation":1,"user_id":7439966,"display_name":"Mehmet Karaman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680101469,"creation_date":1680101469,"answer_id":75878843,"question_id":75878323,"body_markdown":"If I understood correctly you want to list all API&#39;s that app is exposing, in this case I suggest to use openapi  so that you can see the app API&#39;s / execute any of them via browser.\r\n\r\nEx: https://www.baeldung.com/spring-rest-openapi-documentation\r\n\r\nFYI : It could be better if you share code for how you to expose the api since 404 is clearly says that you are not hitting the correct endpoint or you don&#39;t have the api for that enpoint\r\n","title":"How to list all endpoints for a spring MVC API ( not spring boot)","body":"<p>If I understood correctly you want to list all API's that app is exposing, in this case I suggest to use openapi  so that you can see the app API's / execute any of them via browser.</p>\n<p>Ex: <a href=\"https://www.baeldung.com/spring-rest-openapi-documentation\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-rest-openapi-documentation</a></p>\n<p>FYI : It could be better if you share code for how you to expose the api since 404 is clearly says that you are not hitting the correct endpoint or you don't have the api for that enpoint</p>\n"}],"owner":{"account_id":975553,"reputation":3366,"user_id":996908,"accept_rate":60,"display_name":"Mr Smith"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680101469,"creation_date":1680098787,"question_id":75878323,"body_markdown":"I&#39;m getting an unexpected  404 from a Spring MVC API.  How can I list all endpoints that have been registered?  This is not a spring boot API.","title":"How to list all endpoints for a spring MVC API ( not spring boot)","body":"<p>I'm getting an unexpected  404 from a Spring MVC API.  How can I list all endpoints that have been registered?  This is not a spring boot API.</p>\n"},{"tags":["java","ucanaccess"],"comments":[{"owner":{"account_id":4146553,"reputation":32805,"user_id":5743988,"accept_rate":67,"display_name":"4castle"},"score":0,"creation_date":1500402673,"post_id":45174484,"comment_id":77317203,"body_markdown":"Please show your code, so that people can replicate the issue. Can you also specify the platforms you&#39;re using?","body":"Please show your code, so that people can replicate the issue. Can you also specify the platforms you&#39;re using?"},{"owner":{"account_id":2460030,"reputation":118378,"user_id":2144390,"accept_rate":100,"display_name":"Gord Thompson"},"score":0,"creation_date":1500482222,"post_id":45174484,"comment_id":77359941,"body_markdown":"I was able to recreate this issue with UCanAccess 4.0.2 and have reported it to the UCanAccess development team.","body":"I was able to recreate this issue with UCanAccess 4.0.2 and have reported it to the UCanAccess development team."}],"answers":[{"tags":[],"owner":{"account_id":2460030,"reputation":118378,"user_id":2144390,"accept_rate":100,"display_name":"Gord Thompson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1506906600,"creation_date":1506906600,"answer_id":46518360,"question_id":45174484,"body_markdown":"This is a known issue with UCanAccess 4.0.2 and earlier. The required fix has been merged into the master branch and will be included in the next release of UCanAccess.","title":"UCanAccess 4.0.2 uppercase column names cannot be found","body":"<p>This is a known issue with UCanAccess 4.0.2 and earlier. The required fix has been merged into the master branch and will be included in the next release of UCanAccess.</p>\n"}],"owner":{"account_id":3559341,"reputation":231,"user_id":2972185,"accept_rate":83,"display_name":"user2972185"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":174,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1680101463,"creation_date":1500402557,"question_id":45174484,"body_markdown":"In my java program, I want to query some columns in * .mdb using UCanAccess. However, some characters seem wrong because it converts all column names to upper case. For example, on one platform, column name `egitim` becomes `&#200;GITIM` in capital letters, while in another it becomes an `&#200;GİTİM`. I want my program to be platform independent. \r\nHowever, if I write `egitim` in my query, It is working correctly on the first platform and I am getting error on the second. If I write `EGİTİM` this time it does not work on the first platform. Is there a way to set charset of UCanAccess programmatically?\r\n\r\nYou can see the code below:\r\n\r\n    Class.forName(&quot;net.ucanaccess.jdbc.UcanaccessDriver&quot;);\r\n    Connection conn = DriverManager.getConnection(JAtama.url);\r\n    Statement st = conn.createStatement();\r\n    ResultSet rs = st.executeQuery(&quot;select distinct egitim from dersler&quot;);\r\n\r\nlast line gives `net.ucanaccess.jdbc.UcanaccessSQLException: UCAExc:::4.0.2 user lacks privilege or object not found: EGITIM` exception.\r\n\r\nBoth platforms are macOS Sierra. But one of them is Turkish and the other one is English. (In Turkish Language capital letter i is İ.","title":"UCanAccess 4.0.2 uppercase column names cannot be found","body":"<p>In my java program, I want to query some columns in * .mdb using UCanAccess. However, some characters seem wrong because it converts all column names to upper case. For example, on one platform, column name <code>egitim</code> becomes <code>ÈGITIM</code> in capital letters, while in another it becomes an <code>ÈGİTİM</code>. I want my program to be platform independent. \nHowever, if I write <code>egitim</code> in my query, It is working correctly on the first platform and I am getting error on the second. If I write <code>EGİTİM</code> this time it does not work on the first platform. Is there a way to set charset of UCanAccess programmatically?</p>\n\n<p>You can see the code below:</p>\n\n<pre><code>Class.forName(\"net.ucanaccess.jdbc.UcanaccessDriver\");\nConnection conn = DriverManager.getConnection(JAtama.url);\nStatement st = conn.createStatement();\nResultSet rs = st.executeQuery(\"select distinct egitim from dersler\");\n</code></pre>\n\n<p>last line gives <code>net.ucanaccess.jdbc.UcanaccessSQLException: UCAExc:::4.0.2 user lacks privilege or object not found: EGITIM</code> exception.</p>\n\n<p>Both platforms are macOS Sierra. But one of them is Turkish and the other one is English. (In Turkish Language capital letter i is İ.</p>\n"},{"tags":["java","micronaut","suppress-warnings","micronaut-serde"],"answers":[{"tags":[],"owner":{"account_id":924003,"reputation":549,"user_id":965852,"display_name":"jonas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1680101439,"creation_date":1680101439,"answer_id":75878835,"question_id":75877682,"body_markdown":"There is no way to achieve this with `Argument.of`, but there is `GenericArgument` which is exactly what is needed.\r\n\r\nFull example:\r\n\r\n```java\r\nimport io.micronaut.context.annotation.Prototype;\r\nimport io.micronaut.core.type.GenericArgument;\r\nimport io.micronaut.serde.ObjectMapper;\r\nimport jakarta.inject.Inject;\r\n\r\n@Prototype\r\npublic class Scratch {\r\n\tprivate static final Logger LOG = LoggerFactory.getLogger(MethodHandles.lookup().lookupClass());\r\n\tprivate final ObjectMapper objectMapper;\r\n\r\n\t@Inject\r\n\tpublic Scratch(ObjectMapper objectMapper) {\r\n\t\tthis.objectMapper = objectMapper;\r\n\t}\r\n\r\n\tprivate Optional&lt;CommonResponse&lt;JobResponse&gt;&gt; getCommonResponse(final String entry) {\r\n\t\ttry {\r\n\t\t\treturn Optional.of(objectMapper.readValue(entry, new GenericArgument&lt;&gt;() {}));\r\n\t\t} catch (IOException e) {\r\n     \t   LOG.warn(&quot;Could not deserialize, skipping entry: &#39;{}&#39;&quot;, entry, e);\r\n\t\t}\r\n\t\treturn Optional.empty();\r\n\t}\r\n}\r\n```\r\nSee https://github.com/micronaut-projects/micronaut-core/issues/2204\r\n\r\n","title":"Deserializing with generics using Micronaut Serialization without using @SuppressWarnings(&quot;unchecked&quot;)","body":"<p>There is no way to achieve this with <code>Argument.of</code>, but there is <code>GenericArgument</code> which is exactly what is needed.</p>\n<p>Full example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import io.micronaut.context.annotation.Prototype;\nimport io.micronaut.core.type.GenericArgument;\nimport io.micronaut.serde.ObjectMapper;\nimport jakarta.inject.Inject;\n\n@Prototype\npublic class Scratch {\n    private static final Logger LOG = LoggerFactory.getLogger(MethodHandles.lookup().lookupClass());\n    private final ObjectMapper objectMapper;\n\n    @Inject\n    public Scratch(ObjectMapper objectMapper) {\n        this.objectMapper = objectMapper;\n    }\n\n    private Optional&lt;CommonResponse&lt;JobResponse&gt;&gt; getCommonResponse(final String entry) {\n        try {\n            return Optional.of(objectMapper.readValue(entry, new GenericArgument&lt;&gt;() {}));\n        } catch (IOException e) {\n           LOG.warn(&quot;Could not deserialize, skipping entry: '{}'&quot;, entry, e);\n        }\n        return Optional.empty();\n    }\n}\n</code></pre>\n<p>See <a href=\"https://github.com/micronaut-projects/micronaut-core/issues/2204\" rel=\"nofollow noreferrer\">https://github.com/micronaut-projects/micronaut-core/issues/2204</a></p>\n"}],"owner":{"account_id":924003,"reputation":549,"user_id":965852,"display_name":"jonas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":659,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75878835,"answer_count":1,"score":2,"last_activity_date":1680101439,"creation_date":1680095295,"question_id":75877682,"body_markdown":"I try to deserialize a generic Object `W&lt;T&gt;` from JSON with [Micronaut Serialization ](https://github.com/micronaut-projects/micronaut-serialization), it works, but the compiler produces an &quot;unchecked assignment&quot; warning.\r\n\r\nI would like to achieve the same result without the warning or using `@SuppressWarnings(&quot;unchecked&quot;)`.\r\n\r\nThe following is a reduced version of the code I use. It works, but there is a `@SuppressWarnings(&quot;unchecked&quot;)` annotation.\r\n\r\n1st note: The `ObjectMapper` is not the Jackson ObjectMapper, but the `io.micronaut.serde.ObjectMapper`&lt;br&gt;2nd note: I removed common `java` and `slf4j` imports for brevity\r\n\r\n```java\r\nimport io.micronaut.context.annotation.Prototype;\r\nimport io.micronaut.core.type.Argument;\r\nimport io.micronaut.serde.ObjectMapper;\r\nimport jakarta.inject.Inject;\r\n\r\n@Prototype\r\npublic class Scratch {\r\n\tprivate static final Logger LOG = LoggerFactory.getLogger(MethodHandles.lookup().lookupClass());\r\n\tprivate final ObjectMapper objectMapper;\r\n\r\n\t@Inject\r\n\tpublic Scratch(ObjectMapper objectMapper) {\r\n\t\tthis.objectMapper = objectMapper;\r\n\t}\r\n\r\n\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\tprivate Optional&lt;CommonResponse&lt;JobResponse&gt;&gt; getCommonResponse(final String entry) {\r\n\t\ttry {\r\n\t\t\treturn Optional.of(objectMapper.readValue(entry, Argument.of(CommonResponse.class, JobResponse.class)));\r\n\t\t} catch (IOException e) {\r\n\t\t\tLOG.warn(&quot;Could not deserialize, skipping entry: &#39;{}&#39;&quot;, entry, e);\r\n\t\t}\r\n\t\treturn Optional.empty();\r\n\t}\r\n}\r\n```","title":"Deserializing with generics using Micronaut Serialization without using @SuppressWarnings(&quot;unchecked&quot;)","body":"<p>I try to deserialize a generic Object <code>W&lt;T&gt;</code> from JSON with <a href=\"https://github.com/micronaut-projects/micronaut-serialization\" rel=\"nofollow noreferrer\">Micronaut Serialization </a>, it works, but the compiler produces an &quot;unchecked assignment&quot; warning.</p>\n<p>I would like to achieve the same result without the warning or using <code>@SuppressWarnings(&quot;unchecked&quot;)</code>.</p>\n<p>The following is a reduced version of the code I use. It works, but there is a <code>@SuppressWarnings(&quot;unchecked&quot;)</code> annotation.</p>\n<p>1st note: The <code>ObjectMapper</code> is not the Jackson ObjectMapper, but the <code>io.micronaut.serde.ObjectMapper</code><br>2nd note: I removed common <code>java</code> and <code>slf4j</code> imports for brevity</p>\n<pre class=\"lang-java prettyprint-override\"><code>import io.micronaut.context.annotation.Prototype;\nimport io.micronaut.core.type.Argument;\nimport io.micronaut.serde.ObjectMapper;\nimport jakarta.inject.Inject;\n\n@Prototype\npublic class Scratch {\n    private static final Logger LOG = LoggerFactory.getLogger(MethodHandles.lookup().lookupClass());\n    private final ObjectMapper objectMapper;\n\n    @Inject\n    public Scratch(ObjectMapper objectMapper) {\n        this.objectMapper = objectMapper;\n    }\n\n    @SuppressWarnings(&quot;unchecked&quot;)\n    private Optional&lt;CommonResponse&lt;JobResponse&gt;&gt; getCommonResponse(final String entry) {\n        try {\n            return Optional.of(objectMapper.readValue(entry, Argument.of(CommonResponse.class, JobResponse.class)));\n        } catch (IOException e) {\n            LOG.warn(&quot;Could not deserialize, skipping entry: '{}'&quot;, entry, e);\n        }\n        return Optional.empty();\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","spring-webflux"],"answers":[{"tags":[],"owner":{"account_id":12455565,"reputation":5317,"user_id":9068895,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1667927461,"creation_date":1667927461,"answer_id":74364640,"question_id":74359498,"body_markdown":"You can use `.then(Mono.just(fileName))` or `.thenReturn(fileName)` to continue the flow and return file name.\r\n\r\n```\r\n@PostMapping(&quot;file/multi&quot;)\r\npublic Mono&lt;String&gt; upload(@RequestPart(&quot;files&quot;) Flux&lt;FilePart&gt; partFlux){\r\n\t\treturn  partFlux\r\n\t\t\t\t.flatMap(fp -&gt; {\r\n\t\t\t\t\tvar fileName = basePath.resolve(fp.filename());\r\n\t\t\t\t\treturn fp.transferTo(fileName)\r\n\t\t\t\t\t\t\t.thenReturn(fileName);\r\n\t\t\t\t});\r\n\t}\r\n```","title":"how to return file name , webflux file upload","body":"<p>You can use <code>.then(Mono.just(fileName))</code> or <code>.thenReturn(fileName)</code> to continue the flow and return file name.</p>\n<pre><code>@PostMapping(&quot;file/multi&quot;)\npublic Mono&lt;String&gt; upload(@RequestPart(&quot;files&quot;) Flux&lt;FilePart&gt; partFlux){\n        return  partFlux\n                .flatMap(fp -&gt; {\n                    var fileName = basePath.resolve(fp.filename());\n                    return fp.transferTo(fileName)\n                            .thenReturn(fileName);\n                });\n    }\n</code></pre>\n"}],"owner":{"account_id":26865604,"reputation":3,"user_id":20448422,"display_name":"gomest"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":411,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74364640,"answer_count":1,"score":0,"last_activity_date":1680101385,"creation_date":1667904770,"question_id":74359498,"body_markdown":"the example is https://www.vinsguru.com/spring-webflux-file-upload/\r\n\r\n\r\n```\r\n\r\n@PostMapping(&quot;file/multi&quot;)\r\npublic Mono&lt;Void&gt; upload(@RequestPart(&quot;files&quot;) Flux&lt;FilePart&gt; partFlux){\r\n    return  partFlux\r\n                .doOnNext(fp -&gt; System.out.println(fp.filename()))\r\n                .flatMap(fp -&gt; fp.transferTo(basePath.resolve(fp.filename())))\r\n                .then();\r\n}\r\n```\r\n\r\nbut i want to return to upload file name\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n............................","title":"how to return file name , webflux file upload","body":"<p>the example is <a href=\"https://www.vinsguru.com/spring-webflux-file-upload/\" rel=\"nofollow noreferrer\">https://www.vinsguru.com/spring-webflux-file-upload/</a></p>\n<pre><code>\n@PostMapping(&quot;file/multi&quot;)\npublic Mono&lt;Void&gt; upload(@RequestPart(&quot;files&quot;) Flux&lt;FilePart&gt; partFlux){\n    return  partFlux\n                .doOnNext(fp -&gt; System.out.println(fp.filename()))\n                .flatMap(fp -&gt; fp.transferTo(basePath.resolve(fp.filename())))\n                .then();\n}\n</code></pre>\n<p>but i want to return to upload file name</p>\n<p>............................</p>\n"},{"tags":["java","spring-boot","spring-webflux"],"comments":[{"owner":{"account_id":6605,"reputation":61212,"user_id":11182,"display_name":"Lex Li"},"score":1,"creation_date":1676494684,"post_id":75464365,"comment_id":133150659,"body_markdown":"Remind you that the mono tag is for something else. Do study each tags before using.","body":"Remind you that the mono tag is for something else. Do study each tags before using."},{"owner":{"account_id":13783453,"reputation":3,"user_id":9948026,"display_name":"Web2h"},"score":0,"creation_date":1676560595,"post_id":75464365,"comment_id":133165048,"body_markdown":"Not sure to follow @LexLi ...\nI&#39;m using a Mono because my service can only return 1 element","body":"Not sure to follow @LexLi ... I&#39;m using a Mono because my service can only return 1 element"},{"owner":{"account_id":6605,"reputation":61212,"user_id":11182,"display_name":"Lex Li"},"score":0,"creation_date":1676561021,"post_id":75464365,"comment_id":133165216,"body_markdown":"In short, use the java tag.","body":"In short, use the java tag."},{"owner":{"account_id":13783453,"reputation":3,"user_id":9948026,"display_name":"Web2h"},"score":0,"creation_date":1676562635,"post_id":75464365,"comment_id":133165810,"body_markdown":"Ok, I finally got what you meant.\nThe question tags!!\nYeah you right. Thanx for editing the tags","body":"Ok, I finally got what you meant. The question tags!! Yeah you right. Thanx for editing the tags"}],"answers":[{"tags":[],"owner":{"account_id":12455565,"reputation":5317,"user_id":9068895,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1676492010,"creation_date":1676492010,"answer_id":75465018,"question_id":75464365,"body_markdown":"You don&#39;t really need to block. You need to build reactive flow combining different operators.\r\n\r\nIn your case it could look like\r\n\r\n\r\n```\r\npublic Mono&lt;ServerResponse&gt; handleRequest(ServerRequest serverRequest) {\r\n    return getProduct() // Service call to get the Mono&lt;Product&gt;\r\n            .map(product -&gt; mapToResponse(product)) // Product -&gt; ProductResponse\r\n            .flatMap(response -&gt;\r\n                    ServerResponse.ok()\r\n                            .contentType(MediaType.APPLICATION_JSON)\r\n                            .location(URI.create(String.format(&quot;/api/products/%s&quot;, response.getId())))\r\n                            .body(BodyInserters.fromValue(response))\r\n            );\r\n}\r\n```","title":"Webflux returning Mono and using info in Object in Mono to set header","body":"<p>You don't really need to block. You need to build reactive flow combining different operators.</p>\n<p>In your case it could look like</p>\n<pre><code>public Mono&lt;ServerResponse&gt; handleRequest(ServerRequest serverRequest) {\n    return getProduct() // Service call to get the Mono&lt;Product&gt;\n            .map(product -&gt; mapToResponse(product)) // Product -&gt; ProductResponse\n            .flatMap(response -&gt;\n                    ServerResponse.ok()\n                            .contentType(MediaType.APPLICATION_JSON)\n                            .location(URI.create(String.format(&quot;/api/products/%s&quot;, response.getId())))\n                            .body(BodyInserters.fromValue(response))\n            );\n}\n</code></pre>\n"}],"owner":{"account_id":13783453,"reputation":3,"user_id":9948026,"display_name":"Web2h"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":398,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75465018,"answer_count":1,"score":0,"last_activity_date":1680101356,"creation_date":1676487755,"question_id":75464365,"body_markdown":"Let&#39;s say my Webflux handler returns a Mono on a product creation\r\nThat&#39;s easy to do.\r\n\r\nBut now, I want to complete the response with a `location` in the header.\r\nTo do so, I need to get the created product ID.\r\n\r\nIn my example, I used a `block()` which fails the reactive idea of the handler.\r\n\r\n```\r\npublic Mono&lt;ServerResponse&gt; handleRequest(ServerRequest serverRequest) {\r\n        ...\r\n        Mono&lt;Product&gt; monoProduct = // Service call to get the Mono&lt;Product&gt;\r\n        return ServerResponse.ok().contentType(MediaType.APPLICATION_JSON)\r\n                             .location(URI.create(String.format(&quot;/api/products/%s&quot;,\r\n                                                                monoProduct.block().getId()))))\r\n                             .body(monoProduct), ProductResponse.class);\r\n    }\r\n```\r\n\r\nHow can I perform such a task without breaking the reactive principles?","title":"Webflux returning Mono and using info in Object in Mono to set header","body":"<p>Let's say my Webflux handler returns a Mono on a product creation\nThat's easy to do.</p>\n<p>But now, I want to complete the response with a <code>location</code> in the header.\nTo do so, I need to get the created product ID.</p>\n<p>In my example, I used a <code>block()</code> which fails the reactive idea of the handler.</p>\n<pre><code>public Mono&lt;ServerResponse&gt; handleRequest(ServerRequest serverRequest) {\n        ...\n        Mono&lt;Product&gt; monoProduct = // Service call to get the Mono&lt;Product&gt;\n        return ServerResponse.ok().contentType(MediaType.APPLICATION_JSON)\n                             .location(URI.create(String.format(&quot;/api/products/%s&quot;,\n                                                                monoProduct.block().getId()))))\n                             .body(monoProduct), ProductResponse.class);\n    }\n</code></pre>\n<p>How can I perform such a task without breaking the reactive principles?</p>\n"},{"tags":["java","typescript","spring-boot","urlencode"],"owner":{"account_id":3106126,"reputation":31241,"user_id":2628868,"accept_rate":84,"display_name":"Dolphin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680100730,"creation_date":1680100730,"question_id":75878714,"body_markdown":"I define a object type in typescript client like this:\r\n\r\n\r\n    export interface IChatAsk {\r\n        prompt: string,\r\n        cid: number\r\n    }\r\n\r\n\r\nthen I composite the object to query parameter like this:\r\n\r\n\r\n    var queryString = Object.keys(params).map(key =&gt; key + &#39;=&#39; + params[key as keyof IChatAsk]).join(&#39;&amp;&#39;);\r\n\r\n\r\n\r\nencoded and send a get request to server:\r\n\r\n\r\n\r\n    eventSource = new EventSourcePolyfill(&#39;/ai/stream/chat/ask?&#39; + encodeURIComponent(queryString), {\r\n        headers: {\r\n          &#39;x-access-token&#39;: accessToken ?? &quot;&quot;,\r\n          &#39;x-request-id&#39;: uuid(),\r\n        }\r\n      });\r\n\r\n\r\n \r\nthe server side shows error:\r\n\r\n\r\n    Caused by: org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter &#39;prompt&#39; for method parameter type String is not present\r\n    \tat org.springframework.web.method.annotation.RequestParamMethodArgumentResolver.handleMissingValueInternal(RequestParamMethodArgumentResolver.java:218) ~[spring-web-5.3.19.jar:5.3.19]\r\n    \tat org.springframework.web.method.annotation.RequestParamMethodArgumentResolver.handleMissingValue(RequestParamMethodArgumentResolver.java:193) ~[spring-web-5.3.19.jar:5.3.19]\r\n    \tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:114) ~[spring-web-5.3.19.jar:5.3.19]\r\n\r\n\r\n\r\n\r\nseems the server side could not parse the encoded URI parameter? what should I do to make it work? I did not want to concat the client query parameter one by one. The server side code look like this:\r\n\r\n\r\n\r\n    @GetMapping(path=&quot;/ask&quot;,produces = MediaType.TEXT_EVENT_STREAM_VALUE)\r\n    SseEmitter askStream(@RequestParam(required = true) String prompt, @RequestParam(required = false) Long cid);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"why the java sever could not parse encodeURIComponent parameter","body":"<p>I define a object type in typescript client like this:</p>\n<pre><code>export interface IChatAsk {\n    prompt: string,\n    cid: number\n}\n</code></pre>\n<p>then I composite the object to query parameter like this:</p>\n<pre><code>var queryString = Object.keys(params).map(key =&gt; key + '=' + params[key as keyof IChatAsk]).join('&amp;');\n</code></pre>\n<p>encoded and send a get request to server:</p>\n<pre><code>eventSource = new EventSourcePolyfill('/ai/stream/chat/ask?' + encodeURIComponent(queryString), {\n    headers: {\n      'x-access-token': accessToken ?? &quot;&quot;,\n      'x-request-id': uuid(),\n    }\n  });\n</code></pre>\n<p>the server side shows error:</p>\n<pre><code>Caused by: org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'prompt' for method parameter type String is not present\n    at org.springframework.web.method.annotation.RequestParamMethodArgumentResolver.handleMissingValueInternal(RequestParamMethodArgumentResolver.java:218) ~[spring-web-5.3.19.jar:5.3.19]\n    at org.springframework.web.method.annotation.RequestParamMethodArgumentResolver.handleMissingValue(RequestParamMethodArgumentResolver.java:193) ~[spring-web-5.3.19.jar:5.3.19]\n    at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:114) ~[spring-web-5.3.19.jar:5.3.19]\n</code></pre>\n<p>seems the server side could not parse the encoded URI parameter? what should I do to make it work? I did not want to concat the client query parameter one by one. The server side code look like this:</p>\n<pre><code>@GetMapping(path=&quot;/ask&quot;,produces = MediaType.TEXT_EVENT_STREAM_VALUE)\nSseEmitter askStream(@RequestParam(required = true) String prompt, @RequestParam(required = false) Long cid);\n</code></pre>\n"},{"tags":["java","scala","csv"],"comments":[{"owner":{"account_id":2025301,"reputation":1317,"user_id":1810485,"display_name":"Pascal Soucy"},"score":1,"creation_date":1472503251,"post_id":39214182,"comment_id":65768412,"body_markdown":"Are you executing from the command line or from an IDE? You can also println(new java.io.File(&quot;./&quot;).getCanonicalPath) to better understand the current working folder.","body":"Are you executing from the command line or from an IDE? You can also println(new java.io.File(&quot;./&quot;).getCanonicalPath) to better understand the current working folder."},{"owner":{"account_id":3220242,"reputation":31,"user_id":2717881,"accept_rate":25,"display_name":"Nish"},"score":0,"creation_date":1474193500,"post_id":39214182,"comment_id":66423865,"body_markdown":"Thanks Pascal. This helped in figuring out what my working directory was! Finally this worked -&gt; &quot;MainProject/AcceptanceTest/com/myOwn/nish/data/TestData.csv&quot;","body":"Thanks Pascal. This helped in figuring out what my working directory was! Finally this worked -&gt; &quot;MainProject/AcceptanceTest/com/myOwn/nish/data/TestData.csv&zwnj;&#8203;&quot;"}],"answers":[{"tags":[],"owner":{"account_id":4692255,"reputation":14807,"user_id":3798102,"accept_rate":62,"display_name":"Nagarjuna Pamu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1472501736,"creation_date":1472501736,"answer_id":39214472,"question_id":39214182,"body_markdown":"Put your csv file inside `resources` folder (`src/main/resources`) of the project. now you can access the `file` inside the resources folder using below code snippet from any where inside the `src` package. do not forget to put initial `/`.\r\n\r\n    Source.fromFile(getClass.getResource(&quot;/hello.csv&quot;).getFile).getLines().foreach(println)\r\n\r\nfor more info https://stackoverflow.com/questions/27360977/how-to-read-files-from-resources-folder-in-scala","title":"Not able to access a file using Relative paths in Scala","body":"<p>Put your csv file inside <code>resources</code> folder (<code>src/main/resources</code>) of the project. now you can access the <code>file</code> inside the resources folder using below code snippet from any where inside the <code>src</code> package. do not forget to put initial <code>/</code>.</p>\n\n<pre><code>Source.fromFile(getClass.getResource(\"/hello.csv\").getFile).getLines().foreach(println)\n</code></pre>\n\n<p>for more info <a href=\"https://stackoverflow.com/questions/27360977/how-to-read-files-from-resources-folder-in-scala\">How to read files from resources folder in Scala?</a></p>\n"},{"tags":[],"owner":{"account_id":3220242,"reputation":31,"user_id":2717881,"accept_rate":25,"display_name":"Nish"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1474193779,"creation_date":1474193779,"answer_id":39556528,"question_id":39214182,"body_markdown":"Thank you for all your suggestions. \r\nUnfortunately changing the folders structure was not an option, so having a src/main/resource was ruled out (that would probably have been the cleanest solution). \r\n\r\n    val testDataFile = Source.fromFile(&quot;MainProject/AcceptanceTest/com/myOwn/nish/data/TestData.csv&quot;)\r\n\r\nThe current working directory was the MainProject. So a &quot;/&quot; at the beginning was unnecessary. I figured that out using .getCanonicalPath as suggested by Pascal. ","title":"Not able to access a file using Relative paths in Scala","body":"<p>Thank you for all your suggestions. \nUnfortunately changing the folders structure was not an option, so having a src/main/resource was ruled out (that would probably have been the cleanest solution). </p>\n\n<pre><code>val testDataFile = Source.fromFile(\"MainProject/AcceptanceTest/com/myOwn/nish/data/TestData.csv\")\n</code></pre>\n\n<p>The current working directory was the MainProject. So a \"/\" at the beginning was unnecessary. I figured that out using .getCanonicalPath as suggested by Pascal. </p>\n"},{"tags":[],"owner":{"account_id":2051906,"reputation":855,"user_id":1830720,"accept_rate":44,"display_name":"Rodolfo Velasco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680100691,"creation_date":1680100691,"answer_id":75878702,"question_id":39214182,"body_markdown":"If you are working with an IDE (intellij-idea in my case), and for some reason, you have imported multiple projects as modules, check the working directory in &quot;Run/Debug Configuration&quot;. My code could not find the correct path because the source folder of the project was wrong. The way I realized this, was because I used the absolute path.\r\n\r\nBy the way, I recommend using os-lib by com-lihaoyi from GitHub.","title":"Not able to access a file using Relative paths in Scala","body":"<p>If you are working with an IDE (intellij-idea in my case), and for some reason, you have imported multiple projects as modules, check the working directory in &quot;Run/Debug Configuration&quot;. My code could not find the correct path because the source folder of the project was wrong. The way I realized this, was because I used the absolute path.</p>\n<p>By the way, I recommend using os-lib by com-lihaoyi from GitHub.</p>\n"}],"owner":{"account_id":3220242,"reputation":31,"user_id":2717881,"accept_rate":25,"display_name":"Nish"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2025,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1680100691,"creation_date":1472500645,"question_id":39214182,"body_markdown":"I&#39;ve written all the complex mumbo jumbo Scala logic but now I am stuck with a very very basic problem. java.io.FileNotFoundException.\r\n\r\nI am trying to read from a csv file &amp; feed that data as input to my Code.\r\n\r\nMy folder structure is: \r\n\r\n    MainProject \r\n        AcceptanceTest\r\n            com.myOwn\r\n            nish\r\n                data\r\n                    TestData.csv\r\n                pagemodel\r\n                spec\r\n                    Test.scala\r\n                util\r\n\r\n\r\n \r\nHere&#39;s my file reading piece of code: \r\n\r\n    import scala.io.Source\r\n    class Test { \r\n    val testDataFile = Source.fromFile(&quot;./../data/TestData.csv&quot;)\r\n    for (line &lt;- testDataFile.getLines().drop(1)) {\r\n        val cols = line.split(&quot;,&quot;).map(_.trim)\r\n        println(s&quot;${cols(0)}|${cols(1)}|${cols(2)}&quot;)\r\n    }\r\n\r\nTestData.csv contains: \r\n\r\n    #ScenarioName, Value1, Value2\r\n    Test1, F1, BrightnessDecrease \r\n    Test2, F2, BrightnessIncrease\r\n\r\nRunning Test.scala gives me a java.io.FileNotFoundException. \r\nIf I change my File path to the absolute path, everything works ok. \r\n\r\n    val testDataFile = Source.fromFile(&quot;/MainProject/AcceptanceTest/com/myOwn/nish/data/TestData.csv&quot;) \r\n\r\nWhat is missing in my relative path which I am unable to spot? \r\n","title":"Not able to access a file using Relative paths in Scala","body":"<p>I've written all the complex mumbo jumbo Scala logic but now I am stuck with a very very basic problem. java.io.FileNotFoundException.</p>\n\n<p>I am trying to read from a csv file &amp; feed that data as input to my Code.</p>\n\n<p>My folder structure is: </p>\n\n<pre><code>MainProject \n    AcceptanceTest\n        com.myOwn\n        nish\n            data\n                TestData.csv\n            pagemodel\n            spec\n                Test.scala\n            util\n</code></pre>\n\n<p>Here's my file reading piece of code: </p>\n\n<pre><code>import scala.io.Source\nclass Test { \nval testDataFile = Source.fromFile(\"./../data/TestData.csv\")\nfor (line &lt;- testDataFile.getLines().drop(1)) {\n    val cols = line.split(\",\").map(_.trim)\n    println(s\"${cols(0)}|${cols(1)}|${cols(2)}\")\n}\n</code></pre>\n\n<p>TestData.csv contains: </p>\n\n<pre><code>#ScenarioName, Value1, Value2\nTest1, F1, BrightnessDecrease \nTest2, F2, BrightnessIncrease\n</code></pre>\n\n<p>Running Test.scala gives me a java.io.FileNotFoundException. \nIf I change my File path to the absolute path, everything works ok. </p>\n\n<pre><code>val testDataFile = Source.fromFile(\"/MainProject/AcceptanceTest/com/myOwn/nish/data/TestData.csv\") \n</code></pre>\n\n<p>What is missing in my relative path which I am unable to spot? </p>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":15454135,"reputation":117,"user_id":11148741,"display_name":"Matt"},"score":0,"creation_date":1680083565,"post_id":75875622,"comment_id":133835644,"body_markdown":"Maybe a unique constraint over the 2 respectively 3 colums would do the job but then I have to introduce a numeric primary which is not really necessary.","body":"Maybe a unique constraint over the 2 respectively 3 colums would do the job but then I have to introduce a numeric primary which is not really necessary."}],"answers":[{"tags":[],"owner":{"account_id":15454135,"reputation":117,"user_id":11148741,"display_name":"Matt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680100553,"creation_date":1680100553,"answer_id":75878673,"question_id":75875622,"body_markdown":"I introduced a numeric id now within setting class and use combined unique keys, e.g:\r\n\r\n    @Table(\r\n    name = &quot;setting&quot;,\r\n    uniqueConstraints = @UniqueConstraint(name = &quot;uk_setting_type_key&quot;, columnNames = {   &quot;type_&quot;, &quot;key_&quot; })\r\n)\r\n\r\nThe same for the other class but with the additional person column.","title":"Hibernate inheritence mapping with composite primary keys possible?","body":"<p>I introduced a numeric id now within setting class and use combined unique keys, e.g:</p>\n<pre><code>@Table(\nname = &quot;setting&quot;,\nuniqueConstraints = @UniqueConstraint(name = &quot;uk_setting_type_key&quot;, columnNames = {   &quot;type_&quot;, &quot;key_&quot; })\n</code></pre>\n<p>)</p>\n<p>The same for the other class but with the additional person column.</p>\n"}],"owner":{"account_id":15454135,"reputation":117,"user_id":11148741,"display_name":"Matt"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680100553,"creation_date":1680083329,"question_id":75875622,"body_markdown":"I am trying to run code with the following constellation.\r\n\r\nSetting class as base class:\r\n\r\n    @Entity\r\n    @IdClass(SettingId.class)\r\n    @Table(name = &quot;setting&quot;)\r\n    @Inheritance(strategy= InheritanceType.TABLE_PER_CLASS)\r\n    public class Setting implements Comparable&lt;Setting&gt; {\r\n       \r\n        @Id\r\n        @Column(name = &quot;key_&quot;, nullable = false, length = FieldConstants.SETTING_KEY_LENGTH)\r\n        @Enumerated(EnumType.STRING)\r\n        private SettingKey key;\r\n\r\n        @Column(name = &quot;value_&quot;, nullable = false, length = FieldConstants.SETTING_VALUE_LENGTH)\r\n        private String value;\r\n\r\n        @Id\r\n        @Column(name = &quot;type_&quot;, nullable = false, length = FieldConstants.SETTING_KEY_LENGTH)\r\n        @Enumerated(EnumType.STRING)\r\n        private SettingType type;\r\n        ...\r\n    }\r\n\r\nAnd another class that should inherit all the attributes from above:\r\n\r\n    @Entity\r\n    @IdClass(PersonSettingId.class)\r\n    @Table(name = &quot;person_setting&quot;)\r\n    public class PersonSetting extends Setting {\r\n        \r\n        @Id\r\n        @ManyToOne(fetch = FetchType.EAGER)\r\n        @JoinColumn(name = &quot;user_id&quot;, foreignKey = @ForeignKey(name = &quot;fk_user&quot;))\r\n        private Person person;\r\n        ...\r\n    }\r\n\r\nThe SettingId class is for the combined primary key for Setting (key and type).\r\nThe PersonSettingId extends SettingId and adds the person, which makes the three fields (key, type and person) as combined primary.\r\n\r\nI get the following exception: UnionSubclass cannot be cast to class org.hibernate.mapping.RootClass\r\n\r\nWhat do I habe to do to make this work?","title":"Hibernate inheritence mapping with composite primary keys possible?","body":"<p>I am trying to run code with the following constellation.</p>\n<p>Setting class as base class:</p>\n<pre><code>@Entity\n@IdClass(SettingId.class)\n@Table(name = &quot;setting&quot;)\n@Inheritance(strategy= InheritanceType.TABLE_PER_CLASS)\npublic class Setting implements Comparable&lt;Setting&gt; {\n   \n    @Id\n    @Column(name = &quot;key_&quot;, nullable = false, length = FieldConstants.SETTING_KEY_LENGTH)\n    @Enumerated(EnumType.STRING)\n    private SettingKey key;\n\n    @Column(name = &quot;value_&quot;, nullable = false, length = FieldConstants.SETTING_VALUE_LENGTH)\n    private String value;\n\n    @Id\n    @Column(name = &quot;type_&quot;, nullable = false, length = FieldConstants.SETTING_KEY_LENGTH)\n    @Enumerated(EnumType.STRING)\n    private SettingType type;\n    ...\n}\n</code></pre>\n<p>And another class that should inherit all the attributes from above:</p>\n<pre><code>@Entity\n@IdClass(PersonSettingId.class)\n@Table(name = &quot;person_setting&quot;)\npublic class PersonSetting extends Setting {\n    \n    @Id\n    @ManyToOne(fetch = FetchType.EAGER)\n    @JoinColumn(name = &quot;user_id&quot;, foreignKey = @ForeignKey(name = &quot;fk_user&quot;))\n    private Person person;\n    ...\n}\n</code></pre>\n<p>The SettingId class is for the combined primary key for Setting (key and type).\nThe PersonSettingId extends SettingId and adds the person, which makes the three fields (key, type and person) as combined primary.</p>\n<p>I get the following exception: UnionSubclass cannot be cast to class org.hibernate.mapping.RootClass</p>\n<p>What do I habe to do to make this work?</p>\n"},{"tags":["java","spring-boot","ssl","openssl"],"owner":{"account_id":1632114,"reputation":707,"user_id":1506449,"display_name":"Sajit Gangadharan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680100510,"creation_date":1680100510,"question_id":75878663,"body_markdown":"We can get acceptable client CA certificates using below command using open_ssl to get a list of certificates which a Server accepts. \r\n\r\nopenssl s_client -showcerts -connect dev.query.api.corpinter.net:443 -state -debug\r\n\r\n````\r\nAcceptable client certificate CA names\r\n/C=DE/L=MUNICH /O=company/OU=ITS/CN=nonprod-api.companyA.com\r\n/C=DE/L=MUNICH /O=comapany /OU=ITS/CN=nonprod-api.companyB.com\r\n````\r\nMy requirement is to write tests to check in each env and see if server accepts only the list of client certificates which it is suppose to.   \r\n\r\nI would like to do it programmatically via Java 17. I tried different approach but none of them returned desired output.  Either Server Certificate were shown as output or no values. \r\n\r\n````\r\n  String host = &quot;dev.query.api.corpinter.net&quot;;\r\n        int port = 443;\r\n        final List certs = new ArrayList();\r\n\r\n        X509TrustManager trust = new X509TrustManager() {\r\n\r\n            public void checkClientTrusted(X509Certificate[] x509Certificates, String s) throws CertificateException {\r\n                System.out.println(s);\r\n            }\r\n\r\n            public void checkServerTrusted(X509Certificate[] x509Certificates, String s) throws CertificateException {\r\n                for (int i = 0; i &lt; x509Certificates.length; i++) {\r\n                    X509Certificate cert = x509Certificates[i];\r\n                    System.out.println(&quot;Loading certificate &quot; + cert.getSubjectDN() + &quot; issued by: &quot; + cert.getIssuerDN());\r\n                    certs.add(x509Certificates[i]);\r\n                }\r\n            }\r\n\r\n            public X509Certificate[] getAcceptedIssuers() {\r\n                return new X509Certificate[0];\r\n            }\r\n\r\n        };\r\n\r\n        SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n        sslContext.init(null, new TrustManager[]{trust}, null);\r\n        SSLSocket socket = (SSLSocket) sslContext.getSocketFactory().createSocket(host, port);\r\n\r\n        socket.getInputStream();\r\n        socket.getSession().getPeerCertificates();\r\n        socket.close();\r\n\r\n        Iterator iterator = certs.iterator();\r\n        while (iterator.hasNext()) {\r\n            X509Certificate cert = (X509Certificate) iterator.next();\r\n            String outputFile = cert.getSubjectDN().getName().replaceAll(&quot;[^a-zA-Z0-9-=_\\\\.]&quot;, &quot;_&quot;) + &quot;.cer&quot;;\r\n            System.out.println(&quot;Serializing certificate to: &quot; + outputFile);\r\n            FileOutputStream certfos = new FileOutputStream(outputFile);\r\n            certfos.write(cert.getEncoded());\r\n            certfos.close();\r\n        }\r\n\r\n    }\r\n````\r\n\r\n\r\n\r\n","title":"Get all accepted CA certificates from server using Java","body":"<p>We can get acceptable client CA certificates using below command using open_ssl to get a list of certificates which a Server accepts.</p>\n<p>openssl s_client -showcerts -connect dev.query.api.corpinter.net:443 -state -debug</p>\n<pre><code>Acceptable client certificate CA names\n/C=DE/L=MUNICH /O=company/OU=ITS/CN=nonprod-api.companyA.com\n/C=DE/L=MUNICH /O=comapany /OU=ITS/CN=nonprod-api.companyB.com\n</code></pre>\n<p>My requirement is to write tests to check in each env and see if server accepts only the list of client certificates which it is suppose to.</p>\n<p>I would like to do it programmatically via Java 17. I tried different approach but none of them returned desired output.  Either Server Certificate were shown as output or no values.</p>\n<pre><code>  String host = &quot;dev.query.api.corpinter.net&quot;;\n        int port = 443;\n        final List certs = new ArrayList();\n\n        X509TrustManager trust = new X509TrustManager() {\n\n            public void checkClientTrusted(X509Certificate[] x509Certificates, String s) throws CertificateException {\n                System.out.println(s);\n            }\n\n            public void checkServerTrusted(X509Certificate[] x509Certificates, String s) throws CertificateException {\n                for (int i = 0; i &lt; x509Certificates.length; i++) {\n                    X509Certificate cert = x509Certificates[i];\n                    System.out.println(&quot;Loading certificate &quot; + cert.getSubjectDN() + &quot; issued by: &quot; + cert.getIssuerDN());\n                    certs.add(x509Certificates[i]);\n                }\n            }\n\n            public X509Certificate[] getAcceptedIssuers() {\n                return new X509Certificate[0];\n            }\n\n        };\n\n        SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\n        sslContext.init(null, new TrustManager[]{trust}, null);\n        SSLSocket socket = (SSLSocket) sslContext.getSocketFactory().createSocket(host, port);\n\n        socket.getInputStream();\n        socket.getSession().getPeerCertificates();\n        socket.close();\n\n        Iterator iterator = certs.iterator();\n        while (iterator.hasNext()) {\n            X509Certificate cert = (X509Certificate) iterator.next();\n            String outputFile = cert.getSubjectDN().getName().replaceAll(&quot;[^a-zA-Z0-9-=_\\\\.]&quot;, &quot;_&quot;) + &quot;.cer&quot;;\n            System.out.println(&quot;Serializing certificate to: &quot; + outputFile);\n            FileOutputStream certfos = new FileOutputStream(outputFile);\n            certfos.write(cert.getEncoded());\n            certfos.close();\n        }\n\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","unit-testing","graphql"],"answers":[{"tags":[],"owner":{"account_id":28159407,"reputation":1,"user_id":21519607,"display_name":"Iran Mizunski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680100239,"creation_date":1680100239,"answer_id":75878614,"question_id":75877445,"body_markdown":"Try change the annotations\r\n\r\n    @ContextConfiguration(classes = EmployeeController.class)\r\n    @AutoConfigureGraphQlTester\r\n    public class EmployeeControllerTest { }","title":"Graphql testing context failing","body":"<p>Try change the annotations</p>\n<pre><code>@ContextConfiguration(classes = EmployeeController.class)\n@AutoConfigureGraphQlTester\npublic class EmployeeControllerTest { }\n</code></pre>\n"}],"owner":{"account_id":5038770,"reputation":99,"user_id":4717753,"display_name":"Adarsh Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680100239,"creation_date":1680094096,"question_id":75877445,"body_markdown":"&gt; GraphQL spring boot testing \r\n&gt; context is empty after the context loading\r\n\r\n&gt; test case is not able to execute\r\n&gt; due to empty context loading \r\n&gt;i am using spring boot test context with graphql testing and jupiter testing framework \r\nto test the graphql test \r\n\r\nobjective \r\ni am trying to test the graphql api endpoint fetching date from the graphql using jupiter \r\ntest framework \r\n\r\npom file \r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.5&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.espark.adarsh&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;sspringboot-graphql-crud-example&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;springboot-graphql-crud-example&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-graphql&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.graphql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-graphql-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n* test file\r\n\r\n```\r\n    package com.espark.adarsh;\r\n    import com.espark.adarsh.entity.Employee;\r\n    import com.espark.adarsh.respository.EmployeeRepository;\r\n    import com.espark.adarsh.service.EmployeeService;\r\n    import org.junit.jupiter.api.MethodOrderer;\r\n    import org.junit.jupiter.api.Order;\r\n    import org.junit.jupiter.api.Test;\r\n    import org.junit.jupiter.api.TestMethodOrder;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.test.autoconfigure.graphql.GraphQlTest;\r\n    import org.springframework.context.annotation.Import;\r\n    import org.springframework.graphql.test.tester.GraphQlTester;\r\n    import javax.annotation.PostConstruct;\r\n    \r\n    @GraphQlTest\r\n    @Import({EmployeeService.class, EmployeeRepository.class})\r\n    @TestMethodOrder(MethodOrderer.OrderAnnotation.class)\r\n    public class EmployeeControllerTest {\r\n    \r\n        @Autowired\r\n        EmployeeRepository employeeRepository;\r\n    \r\n        @Autowired\r\n        EmployeeService employeeService;\r\n    \r\n        @Autowired\r\n        GraphQlTester graphQlTester;\r\n    \r\n        @PostConstruct\r\n        void init(){\r\n            employeeService.setEmployeeRepository(employeeRepository);\r\n        }\r\n    \r\n        @Test\r\n        @Order(1)\r\n        void testGetAllEmployee(){\r\n            String document=&quot;&quot;&quot;\r\n                     query{\r\n                       getAllEmployee{\r\n                         id\r\n                         firstName\r\n                         lastName\r\n                       }\r\n                     }\r\n                    &quot;&quot;&quot;;\r\n            graphQlTester.document(document)\r\n                    .execute()\r\n                    .path(&quot;getAllEmployee&quot;)\r\n                    .entityList(Employee.class)\r\n                    .hasSize(4);\r\n        }\r\n    }\r\n```\r\n\r\n","title":"Graphql testing context failing","body":"<blockquote>\n<p>GraphQL spring boot testing\ncontext is empty after the context loading</p>\n</blockquote>\n<blockquote>\n<p>test case is not able to execute\ndue to empty context loading\ni am using spring boot test context with graphql testing and jupiter testing framework\nto test the graphql test</p>\n</blockquote>\n<p>objective\ni am trying to test the graphql api endpoint fetching date from the graphql using jupiter\ntest framework</p>\n<p>pom file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.5&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.espark.adarsh&lt;/groupId&gt;\n    &lt;artifactId&gt;sspringboot-graphql-crud-example&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;springboot-graphql-crud-example&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-graphql&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.graphql&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-graphql-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<ul>\n<li>test file</li>\n</ul>\n<pre><code>    package com.espark.adarsh;\n    import com.espark.adarsh.entity.Employee;\n    import com.espark.adarsh.respository.EmployeeRepository;\n    import com.espark.adarsh.service.EmployeeService;\n    import org.junit.jupiter.api.MethodOrderer;\n    import org.junit.jupiter.api.Order;\n    import org.junit.jupiter.api.Test;\n    import org.junit.jupiter.api.TestMethodOrder;\n    import org.springframework.beans.factory.annotation.Autowired;\n    import org.springframework.boot.test.autoconfigure.graphql.GraphQlTest;\n    import org.springframework.context.annotation.Import;\n    import org.springframework.graphql.test.tester.GraphQlTester;\n    import javax.annotation.PostConstruct;\n    \n    @GraphQlTest\n    @Import({EmployeeService.class, EmployeeRepository.class})\n    @TestMethodOrder(MethodOrderer.OrderAnnotation.class)\n    public class EmployeeControllerTest {\n    \n        @Autowired\n        EmployeeRepository employeeRepository;\n    \n        @Autowired\n        EmployeeService employeeService;\n    \n        @Autowired\n        GraphQlTester graphQlTester;\n    \n        @PostConstruct\n        void init(){\n            employeeService.setEmployeeRepository(employeeRepository);\n        }\n    \n        @Test\n        @Order(1)\n        void testGetAllEmployee(){\n            String document=&quot;&quot;&quot;\n                     query{\n                       getAllEmployee{\n                         id\n                         firstName\n                         lastName\n                       }\n                     }\n                    &quot;&quot;&quot;;\n            graphQlTester.document(document)\n                    .execute()\n                    .path(&quot;getAllEmployee&quot;)\n                    .entityList(Employee.class)\n                    .hasSize(4);\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring","hibernate","jpa","spring-ioc"],"answers":[{"tags":[],"owner":{"account_id":282831,"reputation":2465,"user_id":579974,"accept_rate":33,"display_name":"Deepak"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1680099765,"creation_date":1401879140,"answer_id":24035494,"question_id":24035404,"body_markdown":"Try to put `@Transactional` over your method like below\r\n\r\n    @Async\r\n    @Transactional\r\n    public void writeSomethingASync() throws InterruptedException{\r\n          mydao.insertData(testObj); // This is started from second thread\r\n    }\r\n\r\nSo basically what is happening your database operation is not in any active transaction so either u have to do manual txn management  or have to use automatic transaction management using @Transactional\r\n","title":"Entity Manager Object in SimpleTask executor thread","body":"<p>Try to put <code>@Transactional</code> over your method like below</p>\n<pre><code>@Async\n@Transactional\npublic void writeSomethingASync() throws InterruptedException{\n      mydao.insertData(testObj); // This is started from second thread\n}\n</code></pre>\n<p>So basically what is happening your database operation is not in any active transaction so either u have to do manual txn management  or have to use automatic transaction management using @Transactional</p>\n"}],"owner":{"account_id":3445198,"reputation":786,"user_id":2886185,"accept_rate":45,"display_name":"Gowtham R"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":769,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":24035494,"answer_count":1,"score":0,"last_activity_date":1680099765,"creation_date":1401878834,"question_id":24035404,"body_markdown":"I want to do some database operation asynchronously. I am using spring 3.0. So i used @Async annotation.\r\n\r\n \r\n         public class TaskExecutorExample \r\n         {\r\n             public  static void main(String a[])  \r\n             {\r\n                 ApplicationContext applicationContext = new FileSystemXmlApplicationContext(&quot;spring.xml&quot;);\r\n                 AutoCarryover service = applicationContext.getBean(AutoCarryover.class);\r\n         \r\n                 try{\r\n                    service.writeSomethingASync(); //starting async task\r\n                 }catch(InterruptedException r)\r\n                 {\r\n                     r.printStackTrace();\r\n                 }\r\n             }\r\n        }\r\n\r\n**AutoCarryover.class**\r\n\r\n       @Service\r\n           public class AutoCarryover {\r\n    \r\n                   @Autowired\r\n                   private MyDao mydao;\r\n    \r\n    \r\n                    @Async\r\n                     public void writeSomethingASync() throws InterruptedException{\r\n     \r\n                     mydao.insertData(testObj); // This is started from second thread\r\n      \r\n     }\r\n\r\n    }\r\n\r\n\r\n**MYDAO class:**\r\n\r\n       @Repository\r\n        public class MyDao  {\r\n\r\n   \r\n    /**\r\n     * Field entityManager.\r\n     */\r\n    @PersistenceContext\r\n    private EntityManager entityManager;\r\n\r\n\r\n    public void insertData(TestObj test) {\r\n        \r\n            entityManager.merge(test); // Here i am inserting from second thread. Its throwing error.\r\n        \r\n    }\r\n\r\n    }\r\n\r\nI am getting following error\r\n\r\norg.springframework.dao.InvalidDataAccessApiUsageException: no transaction is in progress; nested exception is javax.persistence.TransactionRequiredException: no transaction is in progress\r\n\r\n\tat org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:306)\r\n\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:104)\r\n\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:403)\r\n\r\n\tat org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:58)\r\n\r\n\tat org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:213)\r\n\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:163)\r\n\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\r\n\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:155)\r\n\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\r\n\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)\r\n\r\n\tat com.sun.proxy.$Proxy653.mergeCadPartVehAccyDescInstall(Unknown Source)\r\n\r\n\tat com.tms.cad.aror.service.eng.carryOver.admin.impl.AutoCarryOverServiceImpl.insertCadPartVehAccyDescInstallTarget(AutoCarryOverServiceImpl.java:249)\r\n\r\n\tat com.tms.cad.aror.service.eng.carryOver.admin.impl.AutoCarryOverServiceImpl.autoCarryOver(AutoCarryOverServiceImpl.java:175)\r\n\r\n\tat com.tms.cad.aror.service.eng.carryOver.admin.impl.AutoCarryOverServiceImpl.run(AutoCarryOverServiceImpl.java:132)\r\n\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n\r\n\tat java.lang.reflect.Method.invoke(Method.java:597)\r\n\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)\r\n\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)\r\n\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\r\n\r\n\tat org.springframework.aop.interceptor.AsyncExecutionInterceptor$1.call(AsyncExecutionInterceptor.java:80)\r\n\r\n\tat java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\r\n\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:138)\r\n\r\n\tat java.lang.Thread.run(Thread.java:662)\r\n\r\nCaused by: javax.persistence.TransactionRequiredException: no transaction is in progress\r\n\r\n\tat org.hibernate.ejb.AbstractEntityManagerImpl.flush(AbstractEntityManagerImpl.java:957)\r\n\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n\r\n\tat java.lang.reflect.Method.invoke(Method.java:597)\r\n\r\n\tat org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:365)\r\n\r\n\tat com.sun.proxy.$Proxy642.flush(Unknown Source)\r\n\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n\r\n\tat java.lang.reflect.Method.invoke(Method.java:597)\r\n\r\n\tat org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)\r\n\r\n\tat com.sun.proxy.$Proxy642.flush(Unknown Source)\r\n\r\n\tat com.tms.cad.aror.service.dao.CadPartVehAccyDescInstallDao.mergeCadPartVehAccyDescInstall(CadPartVehAccyDescInstallDao.java:73)\r\n\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n\r\n\tat java.lang.reflect.Method.invoke(Method.java:597)\r\n\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)\r\n\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)\r\n\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\r\n\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:155)\r\n\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\r\n\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:155)\r\n\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\r\n\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)\r\n\r\n\tat com.sun.proxy.$Proxy653.mergeCadPartVehAccyDescInstall(Unknown Source)\r\n","title":"Entity Manager Object in SimpleTask executor thread","body":"<p>I want to do some database operation asynchronously. I am using spring 3.0. So i used @Async annotation.</p>\n\n<pre><code>     public class TaskExecutorExample \n     {\n         public  static void main(String a[])  \n         {\n             ApplicationContext applicationContext = new FileSystemXmlApplicationContext(\"spring.xml\");\n             AutoCarryover service = applicationContext.getBean(AutoCarryover.class);\n\n             try{\n                service.writeSomethingASync(); //starting async task\n             }catch(InterruptedException r)\n             {\n                 r.printStackTrace();\n             }\n         }\n    }\n</code></pre>\n\n<p><strong>AutoCarryover.class</strong></p>\n\n<pre><code>   @Service\n       public class AutoCarryover {\n\n               @Autowired\n               private MyDao mydao;\n\n\n                @Async\n                 public void writeSomethingASync() throws InterruptedException{\n\n                 mydao.insertData(testObj); // This is started from second thread\n\n }\n\n}\n</code></pre>\n\n<p><strong>MYDAO class:</strong></p>\n\n<pre><code>   @Repository\n    public class MyDao  {\n\n\n/**\n * Field entityManager.\n */\n@PersistenceContext\nprivate EntityManager entityManager;\n\n\npublic void insertData(TestObj test) {\n\n        entityManager.merge(test); // Here i am inserting from second thread. Its throwing error.\n\n}\n\n}\n</code></pre>\n\n<p>I am getting following error</p>\n\n<p>org.springframework.dao.InvalidDataAccessApiUsageException: no transaction is in progress; nested exception is javax.persistence.TransactionRequiredException: no transaction is in progress</p>\n\n<pre><code>at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:306)\n\nat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:104)\n\nat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:403)\n\nat org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:58)\n\nat org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:213)\n\nat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:163)\n\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\n\nat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:155)\n\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\n\nat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)\n\nat com.sun.proxy.$Proxy653.mergeCadPartVehAccyDescInstall(Unknown Source)\n\nat com.tms.cad.aror.service.eng.carryOver.admin.impl.AutoCarryOverServiceImpl.insertCadPartVehAccyDescInstallTarget(AutoCarryOverServiceImpl.java:249)\n\nat com.tms.cad.aror.service.eng.carryOver.admin.impl.AutoCarryOverServiceImpl.autoCarryOver(AutoCarryOverServiceImpl.java:175)\n\nat com.tms.cad.aror.service.eng.carryOver.admin.impl.AutoCarryOverServiceImpl.run(AutoCarryOverServiceImpl.java:132)\n\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\nat java.lang.reflect.Method.invoke(Method.java:597)\n\nat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)\n\nat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)\n\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\n\nat org.springframework.aop.interceptor.AsyncExecutionInterceptor$1.call(AsyncExecutionInterceptor.java:80)\n\nat java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\n\nat java.util.concurrent.FutureTask.run(FutureTask.java:138)\n\nat java.lang.Thread.run(Thread.java:662)\n</code></pre>\n\n<p>Caused by: javax.persistence.TransactionRequiredException: no transaction is in progress</p>\n\n<pre><code>at org.hibernate.ejb.AbstractEntityManagerImpl.flush(AbstractEntityManagerImpl.java:957)\n\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\nat java.lang.reflect.Method.invoke(Method.java:597)\n\nat org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:365)\n\nat com.sun.proxy.$Proxy642.flush(Unknown Source)\n\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\nat java.lang.reflect.Method.invoke(Method.java:597)\n\nat org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)\n\nat com.sun.proxy.$Proxy642.flush(Unknown Source)\n\nat com.tms.cad.aror.service.dao.CadPartVehAccyDescInstallDao.mergeCadPartVehAccyDescInstall(CadPartVehAccyDescInstallDao.java:73)\n\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\nat java.lang.reflect.Method.invoke(Method.java:597)\n\nat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)\n\nat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)\n\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\n\nat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:155)\n\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\n\nat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:155)\n\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\n\nat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)\n\nat com.sun.proxy.$Proxy653.mergeCadPartVehAccyDescInstall(Unknown Source)\n</code></pre>\n"},{"tags":["java","postgresql","hibernate","jpa","hibernate-envers"],"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":308,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680099589,"creation_date":1680099589,"question_id":75878474,"body_markdown":"I have a column definition in the entity:\r\n\r\n      @GeneratedValue(strategy = GenerationType.AUTO)\r\n        @Column(name = &quot;number_id&quot;, nullable = false, updatable = false, insertable = false, columnDefinition=&quot;serial&quot;)\r\n        private Long numberId;\r\n\r\n`serial` is a Postgresql type, standing for the serial integer value with autoincrement.\r\n\r\nWe also have Hibernate envers, so it make all our changes auditable.\r\n\r\nJPA expects number_id column to be exactly of the same type that I have in the main table. That makes \r\n\r\n1) if we use DDL, to have that options:\r\n\r\n  jpa:\r\n    generate-ddl: true #false\r\n    hibernate:\r\n      ddl-auto: update #validate\r\n\r\n2) provide the same type of the column if create the audit table manually.\r\n\r\nOn this entity we have:\r\n\r\n    @Entity\r\n    @Audited\r\n    @AuditTable(schema = &quot;audit&quot;, value = &quot;contract&quot;)\r\n    @AuditOverride(forClass = BaseEntity.class, isAudited = true)\r\n    @Table(name = &quot;contract&quot;)\r\n\r\nSo, number_id in audit table would be in fact generated in the same manner as it does for the original table, instead of being just copied as the value (what we expect from the audit behavior). How to work it around and keep both behaviors with JPA\r\n\r\n1) serial autogeneation in the main table\r\n2) just plain copy of this value to the audit table in all rows, ignoring the serial autogeneration in the corresponding audit table.\r\n\r\nIs it possible to do with just JPA annotations?","title":"How to ignore the specific column definition used in envers to avoid &quot;serial&quot; type column in audit table?","body":"<p>I have a column definition in the entity:</p>\n<pre><code>  @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = &quot;number_id&quot;, nullable = false, updatable = false, insertable = false, columnDefinition=&quot;serial&quot;)\n    private Long numberId;\n</code></pre>\n<p><code>serial</code> is a Postgresql type, standing for the serial integer value with autoincrement.</p>\n<p>We also have Hibernate envers, so it make all our changes auditable.</p>\n<p>JPA expects number_id column to be exactly of the same type that I have in the main table. That makes</p>\n<ol>\n<li>if we use DDL, to have that options:</li>\n</ol>\n<p>jpa:\ngenerate-ddl: true #false\nhibernate:\nddl-auto: update #validate</p>\n<ol start=\"2\">\n<li>provide the same type of the column if create the audit table manually.</li>\n</ol>\n<p>On this entity we have:</p>\n<pre><code>@Entity\n@Audited\n@AuditTable(schema = &quot;audit&quot;, value = &quot;contract&quot;)\n@AuditOverride(forClass = BaseEntity.class, isAudited = true)\n@Table(name = &quot;contract&quot;)\n</code></pre>\n<p>So, number_id in audit table would be in fact generated in the same manner as it does for the original table, instead of being just copied as the value (what we expect from the audit behavior). How to work it around and keep both behaviors with JPA</p>\n<ol>\n<li>serial autogeneation in the main table</li>\n<li>just plain copy of this value to the audit table in all rows, ignoring the serial autogeneration in the corresponding audit table.</li>\n</ol>\n<p>Is it possible to do with just JPA annotations?</p>\n"},{"tags":["java","spring","spring-data-jpa","nativequery","sqlresultsetmapping"],"comments":[{"owner":{"account_id":145555,"reputation":21469,"user_id":355438,"display_name":"Ilya Serbis"},"score":0,"creation_date":1508234279,"post_id":46171583,"comment_id":80520990,"body_markdown":"The anser is here: https://stackoverflow.com/a/42942353/355438","body":"The anser is here: <a href=\"https://stackoverflow.com/a/42942353/355438\">stackoverflow.com/a/42942353/355438</a>"},{"owner":{"account_id":1358458,"reputation":508,"user_id":1296347,"accept_rate":67,"display_name":"al gh"},"score":0,"creation_date":1603093509,"post_id":46171583,"comment_id":113916199,"body_markdown":"Some of the annotations seems to be outdated. \nI looked at this page to make them work.\nhttps://github.com/eugenp/tutorials/blob/master/persistence-modules/java-jpa/src/main/java/com/baeldung/jpa/sqlresultsetmapping/Employee.java","body":"Some of the annotations seems to be outdated.  I looked at this page to make them work. <a href=\"https://github.com/eugenp/tutorials/blob/master/persistence-modules/java-jpa/src/main/java/com/baeldung/jpa/sqlresultsetmapping/Employee.java\" rel=\"nofollow noreferrer\">github.com/eugenp/tutorials/blob/master/persistence-modules/&zwnj;&#8203;&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":7074458,"reputation":3504,"user_id":5415018,"display_name":"Urosh T."},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1505209028,"creation_date":1505209028,"answer_id":46172940,"question_id":46171583,"body_markdown":"You need to mark your query as a query :)\r\nAnd you need to use **MyVO** instead of **MyEntity**, because that is the entity you have your resulsts mapped to\r\n\r\n    @Repository\r\n    public interface MyRepository extends JpaRepository&lt;MyVO, Long&gt; {\r\n    \r\n        @Query(nativeQuery = true)\r\n        List&lt;MyVO&gt; findAllOfMyVO(@Param(&quot;param1&quot;) String param1, @Param(&quot;param2&quot;) String param2);\r\n    }","title":"JPA Data Repositories with SqlResultSetMapping and native queries","body":"<p>You need to mark your query as a query :)\nAnd you need to use <strong>MyVO</strong> instead of <strong>MyEntity</strong>, because that is the entity you have your resulsts mapped to</p>\n\n<pre><code>@Repository\npublic interface MyRepository extends JpaRepository&lt;MyVO, Long&gt; {\n\n    @Query(nativeQuery = true)\n    List&lt;MyVO&gt; findAllOfMyVO(@Param(\"param1\") String param1, @Param(\"param2\") String param2);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8012388,"reputation":3367,"user_id":6043669,"accept_rate":79,"display_name":"HopeKing"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1517545780,"creation_date":1517545780,"answer_id":48575714,"question_id":46171583,"body_markdown":"You are almost there, but for the below parts\r\n\r\n 1. The whole `@SqlResultSetMapping` and `@NamedNativeQuery` has to be\r\n    present in the Entity and not the value Object. In your case it should be in the MyEntity class and **not ** the MyVO class. This should resolve your exception.\r\n 2. That will still not do. After you do the above, change the below \r\n\r\n    @NamedNativeQuery(name = &quot;findAllDataMapping&quot;,\r\n    to  \r\n     @NamedNativeQuery(name = &quot;**MyEntity**.findAllDataMapping&quot;,\r\n\r\n 3. Finally, in some cases you need to be explicit in your definition of @ColumnResult(name = &quot;userFirstName&quot;). If it is a complex field like ZonedDateTime or Boolean you may have to explicity state @ColumnResult(name = &quot;date_created&quot;, type = ZonedDateTime.class).\r\n\r\nHope that helps.\r\n\r\n","title":"JPA Data Repositories with SqlResultSetMapping and native queries","body":"<p>You are almost there, but for the below parts</p>\n\n<ol>\n<li>The whole <code>@SqlResultSetMapping</code> and <code>@NamedNativeQuery</code> has to be\npresent in the Entity and not the value Object. In your case it should be in the MyEntity class and **not ** the MyVO class. This should resolve your exception.</li>\n<li><p>That will still not do. After you do the above, change the below </p>\n\n<p>@NamedNativeQuery(name = \"findAllDataMapping\",\nto<br>\n @NamedNativeQuery(name = \"<strong>MyEntity</strong>.findAllDataMapping\",</p></li>\n<li><p>Finally, in some cases you need to be explicit in your definition of @ColumnResult(name = \"userFirstName\"). If it is a complex field like ZonedDateTime or Boolean you may have to explicity state @ColumnResult(name = \"date_created\", type = ZonedDateTime.class).</p></li>\n</ol>\n\n<p>Hope that helps.</p>\n"},{"tags":[],"owner":{"account_id":13087982,"reputation":290,"user_id":9456395,"display_name":"Michelan Arendse"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1521195624,"creation_date":1521195624,"answer_id":49318279,"question_id":46171583,"body_markdown":"Add the missing resultClass\r\n\r\n    @NamedNativeQuery(name = &quot;findAllDataMapping&quot;, resultClass = Entity.class, query=&quot;sql&quot;)\r\nOr\r\n\r\n    @NamedNativeQuery(name = &quot;findAllDataMapping&quot;, resultClass = MyVO.class, resultSetMapping =&quot;findAllDataMapping&quot; query = &quot;sql&quot;)\r\n\r\nand lastly call the query in your repository \r\n\r\n    @Query(nativeQuery = true, name = &quot;findAllDataMapping&quot;)\r\n    List&lt;MyVO&gt; findAllOfMyVO(@Param(&quot;param1&quot;) String param1, @Param(&quot;param2&quot;) String param2);\r\n\r\n","title":"JPA Data Repositories with SqlResultSetMapping and native queries","body":"<p>Add the missing resultClass</p>\n\n<pre><code>@NamedNativeQuery(name = \"findAllDataMapping\", resultClass = Entity.class, query=\"sql\")\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>@NamedNativeQuery(name = \"findAllDataMapping\", resultClass = MyVO.class, resultSetMapping =\"findAllDataMapping\" query = \"sql\")\n</code></pre>\n\n<p>and lastly call the query in your repository </p>\n\n<pre><code>@Query(nativeQuery = true, name = \"findAllDataMapping\")\nList&lt;MyVO&gt; findAllOfMyVO(@Param(\"param1\") String param1, @Param(\"param2\") String param2);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8384565,"reputation":51,"user_id":6295381,"display_name":"AlbertOu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680099265,"creation_date":1679833766,"answer_id":75847751,"question_id":46171583,"body_markdown":"your `@NamedNativeQuery` are missing properties `resultClass` and `resultSetMapping` like below sample:\r\n\r\n```java\r\n@NamedNativeQuery(name = &quot;YourEntity.findAllDataMapping&quot;,\r\n    resultClass =  MyVO.class ,\r\n    resultSetMapping =&quot;findAllDataMapping&quot;,\r\n    query = &quot;SELECT ...&quot;\r\n)\r\n```","title":"JPA Data Repositories with SqlResultSetMapping and native queries","body":"<p>your <code>@NamedNativeQuery</code> are missing properties <code>resultClass</code> and <code>resultSetMapping</code> like below sample:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@NamedNativeQuery(name = &quot;YourEntity.findAllDataMapping&quot;,\n    resultClass =  MyVO.class ,\n    resultSetMapping =&quot;findAllDataMapping&quot;,\n    query = &quot;SELECT ...&quot;\n)\n</code></pre>\n"}],"owner":{"account_id":7297206,"reputation":333,"user_id":5561495,"display_name":"LeoRado"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26018,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"answer_count":4,"score":19,"last_activity_date":1680099265,"creation_date":1505205184,"question_id":46171583,"body_markdown":"I was stuck with the following situation:\r\n\r\nMy entities are related to each other, but in such a way that i could not use JPQL. I was forced to use native SQL. Now I want to map these results to a ValueObject. To be clear, I don&#39;t want to get a list of Object array (`List&lt;Object[]&gt;`). I have 6 entities from which I need only some columns. Can anybody give me an example on how to implement such a mapping from a native query?\r\n\r\n[Tutorial](https://www.thoughts-on-java.org/result-set-mapping-basics/) that I went through.\r\n\r\n\r\nMy code:\r\n\r\n    @SqlResultSetMapping(\r\n        name = &quot;findAllDataMapping&quot;,\r\n        classes = @ConstructorResult(\r\n                targetClass = MyVO.class,\r\n                columns = {\r\n                        @ColumnResult(name = &quot;userFirstName&quot;),\r\n                        @ColumnResult(name = &quot;userLastName&quot;),\r\n                        @ColumnResult(name = &quot;id&quot;),\r\n                        @ColumnResult(name = &quot;packageName&quot;)\r\n                }\r\n        )\r\n    )\r\n\r\n    @NamedNativeQuery(name = &quot;findAllDataMapping&quot;,\r\n        query = &quot;SELECT &quot; +\r\n                &quot;    u.first_name as userFirstName, &quot; +\r\n                &quot;    u.last_name as userLastName, &quot; +\r\n                &quot;    i.id as id, &quot; +\r\n                &quot;    s.title as packageName, &quot; +\r\n                &quot;FROM &quot; +\r\n                &quot;    invoice as i &quot; +\r\n                &quot;JOIN user as u on i.user_id=u.id &quot; +\r\n                &quot;LEFT JOIN subscription_package as s on i.subscription_package_id=s.id &quot; +\r\n                &quot;where  u.param1=:param1 and i.param2=:param2&quot; +\r\n    )\r\n\r\n    public class MyVO {\r\n        private String userFirstName;\r\n        private String userLastName;\r\n        private Long id;\r\n        private String packageName;\r\n\r\n        public MyVO (String userFName, String userLName,\r\n                Long id, String packageName) {\r\n            this.userFirstName = userFName;\r\n            this.userLastName = userLName;\r\n            this.id = id;\r\n            this.packageName = packageName;\r\n        }\r\n\r\n        // getters &amp; setters\r\n    }\r\n\r\nIn my jpa-repository module:\r\n\r\n    public interface MyRepository extends JpaRepository&lt;MyEntity, Long&gt; {\r\n        List&lt;MyVO&gt; findAllOfMyVO(@Param(&quot;param1&quot;) String param1, @Param(&quot;param2&quot;) String param2);\r\n    }\r\n\r\nThe point is that I don&#39;t know where to put these annotations so I can use this kind of mapping. In a native query I can&#39;t use `new rs.rado.leo.mypackage.MyVO(...)`. I got following error: \r\n\r\nCaused by: \r\n\r\n    org.springframework.data.mapping.PropertyReferenceException: No property findAllOfMyVO found for type MyEntity!\r\n\r\nI suppose that my question is clear. If not, let me know so I can edit my question.\r\n\r\nThanks in advance!","title":"JPA Data Repositories with SqlResultSetMapping and native queries","body":"<p>I was stuck with the following situation:</p>\n\n<p>My entities are related to each other, but in such a way that i could not use JPQL. I was forced to use native SQL. Now I want to map these results to a ValueObject. To be clear, I don't want to get a list of Object array (<code>List&lt;Object[]&gt;</code>). I have 6 entities from which I need only some columns. Can anybody give me an example on how to implement such a mapping from a native query?</p>\n\n<p><a href=\"https://www.thoughts-on-java.org/result-set-mapping-basics/\" rel=\"noreferrer\">Tutorial</a> that I went through.</p>\n\n<p>My code:</p>\n\n<pre><code>@SqlResultSetMapping(\n    name = \"findAllDataMapping\",\n    classes = @ConstructorResult(\n            targetClass = MyVO.class,\n            columns = {\n                    @ColumnResult(name = \"userFirstName\"),\n                    @ColumnResult(name = \"userLastName\"),\n                    @ColumnResult(name = \"id\"),\n                    @ColumnResult(name = \"packageName\")\n            }\n    )\n)\n\n@NamedNativeQuery(name = \"findAllDataMapping\",\n    query = \"SELECT \" +\n            \"    u.first_name as userFirstName, \" +\n            \"    u.last_name as userLastName, \" +\n            \"    i.id as id, \" +\n            \"    s.title as packageName, \" +\n            \"FROM \" +\n            \"    invoice as i \" +\n            \"JOIN user as u on i.user_id=u.id \" +\n            \"LEFT JOIN subscription_package as s on i.subscription_package_id=s.id \" +\n            \"where  u.param1=:param1 and i.param2=:param2\" +\n)\n\npublic class MyVO {\n    private String userFirstName;\n    private String userLastName;\n    private Long id;\n    private String packageName;\n\n    public MyVO (String userFName, String userLName,\n            Long id, String packageName) {\n        this.userFirstName = userFName;\n        this.userLastName = userLName;\n        this.id = id;\n        this.packageName = packageName;\n    }\n\n    // getters &amp; setters\n}\n</code></pre>\n\n<p>In my jpa-repository module:</p>\n\n<pre><code>public interface MyRepository extends JpaRepository&lt;MyEntity, Long&gt; {\n    List&lt;MyVO&gt; findAllOfMyVO(@Param(\"param1\") String param1, @Param(\"param2\") String param2);\n}\n</code></pre>\n\n<p>The point is that I don't know where to put these annotations so I can use this kind of mapping. In a native query I can't use <code>new rs.rado.leo.mypackage.MyVO(...)</code>. I got following error: </p>\n\n<p>Caused by: </p>\n\n<pre><code>org.springframework.data.mapping.PropertyReferenceException: No property findAllOfMyVO found for type MyEntity!\n</code></pre>\n\n<p>I suppose that my question is clear. If not, let me know so I can edit my question.</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["java","redis","vert.x"],"answers":[{"tags":[],"owner":{"account_id":7926575,"reputation":16936,"user_id":5985853,"display_name":"Alexey Soshin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1521970941,"creation_date":1521968977,"answer_id":49474209,"question_id":49471101,"body_markdown":"This could be divided into two questions:  \r\n1) How to listen continuously in VertX   \r\n2) How can we implement sending messages to only one verticle   \r\n\r\nAs of first question, you can use setInterval:\r\n\r\n    vertx.setPeriodic(1000, t -&gt; {\r\n       redis.blpop(&quot;myKey&quot;, 3500, h -&gt; { \r\n             System.out.println(h.result()); // Need to check for success() \r\n       }\r\n    }));\r\nThis won&#39;t block the EventLoop\r\n\r\nAs of second question, use vertx.eventBus().send() to send a message to one of the consumers in a Round-Robin fashion:\r\nhttp://vertx.io/docs/vertx-core/java/#_the_event_bus_api \r\n","title":"How to keep listening for messages with Vertx and Redis?","body":"<p>This could be divided into two questions:<br>\n1) How to listen continuously in VertX<br>\n2) How can we implement sending messages to only one verticle   </p>\n\n<p>As of first question, you can use setInterval:</p>\n\n<pre><code>vertx.setPeriodic(1000, t -&gt; {\n   redis.blpop(\"myKey\", 3500, h -&gt; { \n         System.out.println(h.result()); // Need to check for success() \n   }\n}));\n</code></pre>\n\n<p>This won't block the EventLoop</p>\n\n<p>As of second question, use vertx.eventBus().send() to send a message to one of the consumers in a Round-Robin fashion:\n<a href=\"http://vertx.io/docs/vertx-core/java/#_the_event_bus_api\" rel=\"nofollow noreferrer\">http://vertx.io/docs/vertx-core/java/#_the_event_bus_api</a> </p>\n"},{"tags":[],"owner":{"account_id":26111476,"reputation":1,"user_id":19805334,"display_name":"florin oltean"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662876740,"creation_date":1662876740,"answer_id":73677208,"question_id":49471101,"body_markdown":"There are several ways to do what you ask for:\r\n 1. with a timer, as described already;  but this has a drawback that limits the throughput to minimum timer delay (i.e. 1ms) \r\n 2. simply use an external thread not managed by Vert.x and do a brpop in an infinite loop while sending results via EventBus\r\n 3. Look into the code for Vertx::setTimer and build something similar but without the added delay (i.e. you will end up submitting tasks to NIO event loop)\r\n 4. Use a Vertical that is using event bus to trigger itself; it sends to itself events to do brpop; these events addressed to self are sent out after brpop returns. \r\n\r\nexample for last point:\r\n\r\n    private void brpop(final String myAddress, final String destinationAddress,final String queue, final int brpopTimeout){\r\n        EventBus bus = vertx.eventBus();\r\n        redis.brpop(Arrays.asList(queue,&quot;&quot;+brpopTimeout)).onComplete(c-&gt;{\r\n          if(c.succeeded()){\r\n            Response r = c.result();\r\n            System.out.println(&quot;result from read queue:&quot;+r.get(1));\r\n            bus.send(myAddress,MSG_CONTINUE); // signal to read again\r\n            bus.send(destinationAddress,r.get(1)); // send the value read from queue on the event bus to be picked up by someone else\r\n          }else{\r\n            Throwable t = c.cause();\r\n            Response r = c.result();\r\n            System.out.println(&quot;error reading from queue:&quot; + t + r);\r\n            bus.send(myAddress,MSG_CONTINUE);\r\n          }\r\n        });\r\n    }\r\n    public void start(Promise&lt;Void&gt; startPromise) throws Exception {\r\n        client = Redis.createClient(vertx,&quot;redis://localhost:6379&quot;);\r\n        redis = RedisAPI.api(client);\r\n        client.connect().onSuccess(c-&gt;{\r\n          System.out.println(&quot;connected ok&quot;);\r\n          EventBus bus = vertx.eventBus();\r\n          // use local consumer to get events to self\r\n          MessageConsumer&lt;String&gt; consumer = bus.localConsumer(&quot;brpop-my&quot;, m-&gt;{\r\n            brpop(MY_ADDRESS,&quot;read-from-ingress&quot;,&quot;sample&quot;,10);\r\n          });\r\n          // kick off the read loop from redis\r\n          bus.send(MY_ADDRESS,MSG_CONTINUE);\r\n        }).onFailure(f-&gt;{\r\n          System.out.println(&quot;failed to connect: &quot; + f);\r\n        });\r\n      }\r\n\r\n","title":"How to keep listening for messages with Vertx and Redis?","body":"<p>There are several ways to do what you ask for:</p>\n<ol>\n<li>with a timer, as described already;  but this has a drawback that limits the throughput to minimum timer delay (i.e. 1ms)</li>\n<li>simply use an external thread not managed by Vert.x and do a brpop in an infinite loop while sending results via EventBus</li>\n<li>Look into the code for Vertx::setTimer and build something similar but without the added delay (i.e. you will end up submitting tasks to NIO event loop)</li>\n<li>Use a Vertical that is using event bus to trigger itself; it sends to itself events to do brpop; these events addressed to self are sent out after brpop returns.</li>\n</ol>\n<p>example for last point:</p>\n<pre><code>private void brpop(final String myAddress, final String destinationAddress,final String queue, final int brpopTimeout){\n    EventBus bus = vertx.eventBus();\n    redis.brpop(Arrays.asList(queue,&quot;&quot;+brpopTimeout)).onComplete(c-&gt;{\n      if(c.succeeded()){\n        Response r = c.result();\n        System.out.println(&quot;result from read queue:&quot;+r.get(1));\n        bus.send(myAddress,MSG_CONTINUE); // signal to read again\n        bus.send(destinationAddress,r.get(1)); // send the value read from queue on the event bus to be picked up by someone else\n      }else{\n        Throwable t = c.cause();\n        Response r = c.result();\n        System.out.println(&quot;error reading from queue:&quot; + t + r);\n        bus.send(myAddress,MSG_CONTINUE);\n      }\n    });\n}\npublic void start(Promise&lt;Void&gt; startPromise) throws Exception {\n    client = Redis.createClient(vertx,&quot;redis://localhost:6379&quot;);\n    redis = RedisAPI.api(client);\n    client.connect().onSuccess(c-&gt;{\n      System.out.println(&quot;connected ok&quot;);\n      EventBus bus = vertx.eventBus();\n      // use local consumer to get events to self\n      MessageConsumer&lt;String&gt; consumer = bus.localConsumer(&quot;brpop-my&quot;, m-&gt;{\n        brpop(MY_ADDRESS,&quot;read-from-ingress&quot;,&quot;sample&quot;,10);\n      });\n      // kick off the read loop from redis\n      bus.send(MY_ADDRESS,MSG_CONTINUE);\n    }).onFailure(f-&gt;{\n      System.out.println(&quot;failed to connect: &quot; + f);\n    });\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2671647,"reputation":1,"user_id":2308926,"display_name":"user2308926"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680099047,"creation_date":1679391074,"answer_id":75799391,"question_id":49471101,"body_markdown":"&gt; How can I permanently listen for message with Vertx and Redis?\r\n\r\nAnother option would be to use pub/sub channels via Redis.\r\n\r\nYou can find some good examples of this in the following links:\r\n\r\n - https://groups.google.com/g/vertx/c/iw3DIqXcUec\r\n - https://redis.io/commands/psubscribe/ \r\n - https://vertx.io/docs/vertx-redis-client/java/#_pubsub_mode\r\n\r\nAnd here is a quick code example of this:\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    Redis\r\n     .createClient(vertx, &quot;redis://127.0.0.1:7006&quot;)\r\n     .connect()\r\n     .onSuccess(conn -&gt; {\r\n       conn.handler(message -&gt; {\r\n       // insert you code for message handling in here\r\n                                   });\r\n\r\n       // now we subscribe\r\n       conn\r\n       .send(Request\r\n       .cmd(Command.PSUBSCRIBE)\r\n       .arg(&quot;new*&quot;))\r\n       .onSuccess(ok -&gt; {\r\n        // subscribed to all events matching pattren &quot;new*&quot;\r\n        });\r\n}\r\n\r\n&lt;!-- end snippet --&gt;\r\n","title":"How to keep listening for messages with Vertx and Redis?","body":"<blockquote>\n<p>How can I permanently listen for message with Vertx and Redis?</p>\n</blockquote>\n<p>Another option would be to use pub/sub channels via Redis.</p>\n<p>You can find some good examples of this in the following links:</p>\n<ul>\n<li><a href=\"https://groups.google.com/g/vertx/c/iw3DIqXcUec\" rel=\"nofollow noreferrer\">https://groups.google.com/g/vertx/c/iw3DIqXcUec</a></li>\n<li><a href=\"https://redis.io/commands/psubscribe/\" rel=\"nofollow noreferrer\">https://redis.io/commands/psubscribe/</a></li>\n<li><a href=\"https://vertx.io/docs/vertx-redis-client/java/#_pubsub_mode\" rel=\"nofollow noreferrer\">https://vertx.io/docs/vertx-redis-client/java/#_pubsub_mode</a></li>\n</ul>\n<p>And here is a quick code example of this:\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>Redis\n .createClient(vertx, \"redis://127.0.0.1:7006\")\n .connect()\n .onSuccess(conn -&gt; {\n   conn.handler(message -&gt; {\n   // insert you code for message handling in here\n                               });\n\n   // now we subscribe\n   conn\n   .send(Request\n   .cmd(Command.PSUBSCRIBE)\n   .arg(\"new*\"))\n   .onSuccess(ok -&gt; {\n    // subscribed to all events matching pattren \"new*\"\n    });\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":6651428,"reputation":818,"user_id":5133329,"accept_rate":80,"display_name":"Josemy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":364,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":49474209,"answer_count":3,"score":0,"last_activity_date":1680099047,"creation_date":1521934992,"question_id":49471101,"body_markdown":"I have a ```Listener``` like this:\r\n    \r\n    public class Listener extends AbstractVerticle {\r\n        public static void main(String[] args) {\r\n            Launcher.executeCommand(&quot;run&quot;, Listener.class.getName());\r\n        }\r\n    \r\n        @Override\r\n        public void start() {\r\n            RedisOptions config = new RedisOptions()\r\n                    .setHost(&quot;127.0.0.1&quot;);\r\n    \r\n            RedisClient redis = RedisClient.create(vertx, config);\r\n    \r\n            redis.blpop(&quot;myKey&quot;, 3500, System.out::println);\r\n    \r\n        }\r\n    \r\n    }\r\n\r\nAnd when a message is received, it is successfully printed on console, but no other message can be received anymore. And if I run the ```blpop``` inside a ```while(true)``` I get an Exception for blocking the thread.\r\n\r\nHow can I permanently listen for message with Vertx and Redis? \r\n\r\nWhat I really need to archive is some kind of Round Robin with many &quot;listeners&quot; but only one getting the message at the time. I mean, **one to many publishers** to a specific channel, and **one to many subscribers**, but when a message us published **just one subscriber gets the message**.","title":"How to keep listening for messages with Vertx and Redis?","body":"<p>I have a <code>Listener</code> like this:</p>\n\n<pre><code>public class Listener extends AbstractVerticle {\n    public static void main(String[] args) {\n        Launcher.executeCommand(\"run\", Listener.class.getName());\n    }\n\n    @Override\n    public void start() {\n        RedisOptions config = new RedisOptions()\n                .setHost(\"127.0.0.1\");\n\n        RedisClient redis = RedisClient.create(vertx, config);\n\n        redis.blpop(\"myKey\", 3500, System.out::println);\n\n    }\n\n}\n</code></pre>\n\n<p>And when a message is received, it is successfully printed on console, but no other message can be received anymore. And if I run the <code>blpop</code> inside a <code>while(true)</code> I get an Exception for blocking the thread.</p>\n\n<p>How can I permanently listen for message with Vertx and Redis? </p>\n\n<p>What I really need to archive is some kind of Round Robin with many \"listeners\" but only one getting the message at the time. I mean, <strong>one to many publishers</strong> to a specific channel, and <strong>one to many subscribers</strong>, but when a message us published <strong>just one subscriber gets the message</strong>.</p>\n"},{"tags":["java","pdf","itext","itext7"],"comments":[{"owner":{"account_id":1707578,"reputation":868,"user_id":1566339,"display_name":"Andr&#233; Lemos"},"score":0,"creation_date":1680099648,"post_id":75878349,"comment_id":133840174,"body_markdown":"does [setSmartMode()](https://api.itextpdf.com/iText7/java/latest/com/itextpdf/kernel/pdf/PdfWriter.html#setSmartMode(boolean)) help?","body":"does <a href=\"https://api.itextpdf.com/iText7/java/latest/com/itextpdf/kernel/pdf/PdfWriter.html#setSmartMode(boolean)\" rel=\"nofollow noreferrer\">setSmartMode()</a> help?"},{"owner":{"account_id":14961660,"reputation":1403,"user_id":10801227,"display_name":"John"},"score":0,"creation_date":1680101661,"post_id":75878349,"comment_id":133840858,"body_markdown":"@Andr&#233;Lemos yes, I did that, but it doesn&#39;t help me","body":"@Andr&#233;Lemos yes, I did that, but it doesn&#39;t help me"}],"owner":{"account_id":14961660,"reputation":1403,"user_id":10801227,"display_name":"John"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680098965,"creation_date":1680098965,"question_id":75878349,"body_markdown":"I am using ```itext 7.1.17``` library for creating pdf documents. I faced an issue with the rendered appearance of the non-Latin symbols. I found how to fix it, but the pdf size produced after this fix growth. Look at my code:\r\n```\r\npublic static void main(String[] args) {\r\n    Rectangle FIELDRECT = new Rectangle(50, 750, 200, 18);\r\n        String FIELDVALUE = &quot;Hello&quot;;\r\n        PdfWriter writer = new PdfWriter(&quot;FontEmbedded.pdf&quot;);\r\n        InputStream resourceAsStream = Main.class.getClassLoader().getResourceAsStream(&quot;Test.pdf&quot;);\r\n        PdfReader reader = new PdfReader(resourceAsStream);\r\n        PdfDocument pdfDoc = new PdfDocument(reader, writer);\r\n        Document doc = new Document(pdfDoc);\r\n        String fontPath = Main.class.getClassLoader().getResource(&quot;fonts/arial.ttf&quot;).getPath();\r\n        FontSet fontSet = new FontSet();\r\n        fontSet.addFont(fontPath);\r\n        FontProvider fontProvider = new FontProvider(fontSet);\r\n        PdfAcroForm acroForm = PdfAcroForm.getAcroForm(pdfDoc,true);\r\n        PdfTextFormField ff = PdfFormField.createText(pdfDoc, FIELDRECT, &quot;test&quot;);\r\n        PdfFont font = PdfFontFactory.createFont(fontsDir + &quot;/arial.ttf&quot;, PdfEncodings.WINANSI, true);\r\n        ff.setFont(font);\r\n        ff.setFontSize(12);\r\n        ff.setValue(FIELDVALUE);\r\n        ff.setMultiline(true);\r\n        ff.setScroll(true);\r\n        ff.setVisibility(4);\r\n        acroForm.addField(ff,pdfDoc.getFirstPage());\r\n        PdfFormXObject xObject = new PdfFormXObject(new Rectangle(0, 0, FIELDRECT.getWidth(), FIELDRECT.getHeight()));\r\n        Canvas canvas = new Canvas(xObject, pdfDoc);\r\n        canvas.getPdfCanvas().beginMarkedContent(new PdfName(&quot;Tx&quot;));\r\n        canvas.setProperty(Property.FONT_PROVIDER, fontProvider);\r\n        Paragraph paragraph = new Paragraph(FIELDVALUE).setFont(font)\r\n                                                   .setFontSize(12)\r\n                                                   .setFontFamily(&quot;Arial&quot;);\r\n        canvas.add(paragraph);\r\n        canvas.getPdfCanvas().endMarkedContent();\r\n\r\n        ff.setAppearance(PdfName.N, null, xObject.getPdfObject());\r\n\r\n        PdfCanvas pdfCanvas = new PdfCanvas(pdfDoc.getFirstPage());\r\n        pdfCanvas.setLineWidth(1f).setStrokeColor(ColorConstants.BLUE).rectangle(FIELDRECT).stroke();\r\n\r\n        doc.close();\r\n}\r\n```\r\nAfter running the code above I get a pdf document with size 37kb, but if I am running the code looks like the following, I get a pdf file with size 20kb.\r\n```\r\npublic static void main(String[] args) {\r\n    Rectangle FIELDRECT = new Rectangle(50, 750, 200, 18);\r\n        String FIELDVALUE = &quot;Hello&quot;;\r\n        PdfWriter writer = new PdfWriter(&quot;FontEmbedded.pdf&quot;);\r\n        InputStream resourceAsStream = Main.class.getClassLoader().getResourceAsStream(&quot;Test.pdf&quot;);\r\n        PdfReader reader = new PdfReader(resourceAsStream);\r\n        PdfDocument pdfDoc = new PdfDocument(reader, writer);\r\n        Document doc = new Document(pdfDoc);\r\n        PdfAcroForm acroForm = PdfAcroForm.getAcroForm(pdfDoc,true);\r\n        PdfTextFormField ff = PdfFormField.createText(pdfDoc, FIELDRECT, &quot;test&quot;);\r\n        PdfFont font = PdfFontFactory.createFont(fontsDir + &quot;/arial.ttf&quot;, PdfEncodings.WINANSI, true);\r\n        ff.setFont(font);\r\n        ff.setFontSize(12);\r\n        ff.setValue(FIELDVALUE);\r\n        ff.setMultiline(true);\r\n        ff.setScroll(true);\r\n        ff.setVisibility(4);\r\n        acroForm.addField(ff,pdfDoc.getFirstPage());\r\n        \r\n        doc.close();\r\n}\r\n```\r\nHow can I reduce the size of my outcoming pdf document? If I need a solution for rendering non-Latin text in acrobat reader. The issue with non-Latin symbols is described [there][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/69044414/the-non-latin-text-is-disappearing-from-the-pdf-text-field","title":"How to reduse a pdf file size","body":"<p>I am using <code>itext 7.1.17</code> library for creating pdf documents. I faced an issue with the rendered appearance of the non-Latin symbols. I found how to fix it, but the pdf size produced after this fix growth. Look at my code:</p>\n<pre><code>public static void main(String[] args) {\n    Rectangle FIELDRECT = new Rectangle(50, 750, 200, 18);\n        String FIELDVALUE = &quot;Hello&quot;;\n        PdfWriter writer = new PdfWriter(&quot;FontEmbedded.pdf&quot;);\n        InputStream resourceAsStream = Main.class.getClassLoader().getResourceAsStream(&quot;Test.pdf&quot;);\n        PdfReader reader = new PdfReader(resourceAsStream);\n        PdfDocument pdfDoc = new PdfDocument(reader, writer);\n        Document doc = new Document(pdfDoc);\n        String fontPath = Main.class.getClassLoader().getResource(&quot;fonts/arial.ttf&quot;).getPath();\n        FontSet fontSet = new FontSet();\n        fontSet.addFont(fontPath);\n        FontProvider fontProvider = new FontProvider(fontSet);\n        PdfAcroForm acroForm = PdfAcroForm.getAcroForm(pdfDoc,true);\n        PdfTextFormField ff = PdfFormField.createText(pdfDoc, FIELDRECT, &quot;test&quot;);\n        PdfFont font = PdfFontFactory.createFont(fontsDir + &quot;/arial.ttf&quot;, PdfEncodings.WINANSI, true);\n        ff.setFont(font);\n        ff.setFontSize(12);\n        ff.setValue(FIELDVALUE);\n        ff.setMultiline(true);\n        ff.setScroll(true);\n        ff.setVisibility(4);\n        acroForm.addField(ff,pdfDoc.getFirstPage());\n        PdfFormXObject xObject = new PdfFormXObject(new Rectangle(0, 0, FIELDRECT.getWidth(), FIELDRECT.getHeight()));\n        Canvas canvas = new Canvas(xObject, pdfDoc);\n        canvas.getPdfCanvas().beginMarkedContent(new PdfName(&quot;Tx&quot;));\n        canvas.setProperty(Property.FONT_PROVIDER, fontProvider);\n        Paragraph paragraph = new Paragraph(FIELDVALUE).setFont(font)\n                                                   .setFontSize(12)\n                                                   .setFontFamily(&quot;Arial&quot;);\n        canvas.add(paragraph);\n        canvas.getPdfCanvas().endMarkedContent();\n\n        ff.setAppearance(PdfName.N, null, xObject.getPdfObject());\n\n        PdfCanvas pdfCanvas = new PdfCanvas(pdfDoc.getFirstPage());\n        pdfCanvas.setLineWidth(1f).setStrokeColor(ColorConstants.BLUE).rectangle(FIELDRECT).stroke();\n\n        doc.close();\n}\n</code></pre>\n<p>After running the code above I get a pdf document with size 37kb, but if I am running the code looks like the following, I get a pdf file with size 20kb.</p>\n<pre><code>public static void main(String[] args) {\n    Rectangle FIELDRECT = new Rectangle(50, 750, 200, 18);\n        String FIELDVALUE = &quot;Hello&quot;;\n        PdfWriter writer = new PdfWriter(&quot;FontEmbedded.pdf&quot;);\n        InputStream resourceAsStream = Main.class.getClassLoader().getResourceAsStream(&quot;Test.pdf&quot;);\n        PdfReader reader = new PdfReader(resourceAsStream);\n        PdfDocument pdfDoc = new PdfDocument(reader, writer);\n        Document doc = new Document(pdfDoc);\n        PdfAcroForm acroForm = PdfAcroForm.getAcroForm(pdfDoc,true);\n        PdfTextFormField ff = PdfFormField.createText(pdfDoc, FIELDRECT, &quot;test&quot;);\n        PdfFont font = PdfFontFactory.createFont(fontsDir + &quot;/arial.ttf&quot;, PdfEncodings.WINANSI, true);\n        ff.setFont(font);\n        ff.setFontSize(12);\n        ff.setValue(FIELDVALUE);\n        ff.setMultiline(true);\n        ff.setScroll(true);\n        ff.setVisibility(4);\n        acroForm.addField(ff,pdfDoc.getFirstPage());\n        \n        doc.close();\n}\n</code></pre>\n<p>How can I reduce the size of my outcoming pdf document? If I need a solution for rendering non-Latin text in acrobat reader. The issue with non-Latin symbols is described <a href=\"https://stackoverflow.com/questions/69044414/the-non-latin-text-is-disappearing-from-the-pdf-text-field\">there</a>.</p>\n"},{"tags":["java","android","android-room"],"comments":[{"owner":{"account_id":442814,"reputation":23181,"user_id":833647,"display_name":"Ken Wolf"},"score":1,"creation_date":1680098682,"post_id":75878275,"comment_id":133839854,"body_markdown":"One of the benefits of Room is not having to worry about Cursor - it is discouraged: https://developer.android.com/training/data-storage/room/accessing-data#query-cursor","body":"One of the benefits of Room is not having to worry about Cursor - it is discouraged: <a href=\"https://developer.android.com/training/data-storage/room/accessing-data#query-cursor\" rel=\"nofollow noreferrer\">developer.android.com/training/data-storage/room/&hellip;</a>"},{"owner":{"account_id":17579563,"reputation":500,"user_id":12753633,"display_name":"Manuel Lucas"},"score":0,"creation_date":1680098960,"post_id":75878275,"comment_id":133839944,"body_markdown":"You are right ! So what I should do, it&#39;s keep the data from the Cursor, into a new Room database, which I have to build, right?","body":"You are right ! So what I should do, it&#39;s keep the data from the Cursor, into a new Room database, which I have to build, right?"},{"owner":{"account_id":442814,"reputation":23181,"user_id":833647,"display_name":"Ken Wolf"},"score":0,"creation_date":1680100038,"post_id":75878275,"comment_id":133840299,"body_markdown":"It&#39;s difficult to say what is best without knowing about your app/product but yes, I would probably do a one-off migration from &quot;old&quot; db to new Room db, this would probably be easier than trying to map the existing data.","body":"It&#39;s difficult to say what is best without knowing about your app/product but yes, I would probably do a one-off migration from &quot;old&quot; db to new Room db, this would probably be easier than trying to map the existing data."}],"owner":{"account_id":17579563,"reputation":500,"user_id":12753633,"display_name":"Manuel Lucas"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680098545,"creation_date":1680098545,"question_id":75878275,"body_markdown":"I was developing some simple app which make use of a local database using Room library, and I get into the need to replace Cursor class for another one which make the same funcionality.\r\n\r\nThe main goal is to generate a register ticket, using the data kept in the DB.\r\n\r\nSome example of one of this class would be this:\r\n\r\n``````````````````````````````````````````````````````````````````````````````````````\r\npublic class PenaltyRegister extends RegistroBase {\r\n\r\n    /**\r\n     * ATRIBUTOS DE LA CLASE\r\n     */\r\n    private Cursor registerCursor = null;\r\n    private ByteBuffer register;\r\n\r\n    private short lengthData = 0;\r\n    private short lengthPenalty = 329;\r\n    private short lengthDataPlus = 23;\r\n    protected int cardDataLength = 150;\r\n    protected int freePenaltyDescriptionLength = 150;\r\n    protected int documentLength = 20;\r\n\r\n\r\n    private int dailySequenceStock          = 112233;\r\n    private String filenamePenalty          = &quot;PENALTY&quot;;\r\n\r\n\r\n    private char EquitmentType = 3;\r\n    private char EquitmentModel = 3;\r\n    private long serialNumbert = 3456789;\r\n    private char line = 1;\r\n    private int station = 2;\r\n    private char hall = 3;\r\n    private char position = 4;\r\n    private int shiftNumber = 5;\r\n    private long operationNumber = 8;\r\n    private char supportType = 1;\r\n    private char supportSubtype = 1;\r\n    private byte[] cardData = new byte[cardDataLength];\r\n    private char penaltyReason = 167;\r\n    private byte[] freePenaltyDescription = new byte[freePenaltyDescriptionLength];\r\n\r\n    private long penaltyAmount = 50;\r\n    private char identification = 1;\r\n\r\n    private char identificationType = 1;\r\n    private int countryCode = 724;\r\n    private byte[] document = new byte[documentLength];\r\n\r\n    /**\r\n     * METODOS DE LA CLASE\r\n     */\r\n\r\n    /**\r\n     * @brief Constructor regitro Penalty //Code 89\r\n     */\r\n    public PenaltyRegister(int code, int version, int dailySeq, String fileName, Cursor p_register, Calendar register_Date, long offsetRegister){\r\n        super(code, version);\r\n        this.registerCursor = p_register;\r\n\r\n        Date registerDate = register_Date.getTime();\r\n        this.lengthData = (short) (getLengthRegisterBase() + this.lengthPenalty );\r\n        identification = (char)this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.IDENTIFICATION));\r\n        if(identification == 1)\r\n            this.lengthData += lengthDataPlus;\r\n        setLength(lengthData);\r\n        setDate(registerDate.getTime());\r\n        setFechaRegistro(registerDate);\r\n        setUniversalSequence(this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.UNIVERSAL_SEQ)));\r\n        if(dailySeq == 0)\r\n            dailySeq = dailySequenceStock;\r\n        setDailySequence(dailySeq);\r\n        setOffset(offsetRegister);\r\n        setFileName(fileName);\r\n        for (int st=0;st&lt;cardDataLength; st++)\r\n            cardData[st] = 0x01;\r\n        this.create();\r\n    }\r\n\r\n    /**\r\n     * @brief Crea array de bytes del registro\r\n     */\r\n    private final void create() {\r\n\r\n        short numOfBytes = this.lengthData;\r\n        register = ByteBuffer.allocate(numOfBytes);\r\n        setProfundidad((char)numOfBytes);\r\n\r\n        putUnsignedChar((char) getTipoRegistro());\r\n        putUnsignedChar((char) getVersionRegistro());\r\n        putUnsignedShort(numOfBytes);\r\n        putUnsignedInt(getIndra4b(getFechaRegistro()));\r\n        putUnsignedInt(universalSequence);\r\n        putUnsignedInt(dailySequence);\r\n        putUnsignedInt(offset);\r\n        putArrayBytes(filename);\r\n        putUnsignedChar((char)this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.EQUIPMENT_TYPE)));\r\n        putUnsignedChar((char)this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.EQUIPMENT_MODEL)));\r\n        putUnsignedInt(this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.SERIAL_NUMBER)));\r\n        putUnsignedChar((char)this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.LINE)));\r\n        putUnsignedShort(this.registerCursor.getShort(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.STATION)));\r\n        putUnsignedChar((char)this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.HALL)));\r\n        putUnsignedChar((char)this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.POSITION)));\r\n        putUnsignedShort(this.registerCursor.getShort(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.SHIFT_NUMBER)));\r\n        putUnsignedInt(this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.OPERATION_NUMBER)));\r\n        putUnsignedChar((char)this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.SUPPORT_TYPE)));\r\n        putUnsignedChar((char)this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.SUPPORT_SUBTYPE)));\r\n        //CardData tiene que ser proporcionado por la CTL a trav&#233;s de par&#225;metro del constructor\r\n        putCardDataBytes(Base64.decode(this.registerCursor.getString(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.CARD_DATA)), Base64.DEFAULT));\r\n        int penalty_reason = this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.PENALTY_REASON));\r\n        putUnsignedChar((char)penalty_reason);\r\n        if(penalty_reason == 0){\r\n            setDescription(this.registerCursor.getString(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.PENALTY_DESCRIPTION)));\r\n        }\r\n        putArrayBytes(freePenaltyDescription);\r\n        putUnsignedInt(this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.PENALTY_AMOUNT)));\r\n        putUnsignedChar(identification);\r\n\r\n        if (identification == 1) {\r\n            putUnsignedChar((char)this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.IDENTIFICATION_TYPE)));\r\n            putUnsignedShort(this.registerCursor.getShort(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.COUNTRY_CODE)));\r\n            setDocument(this.registerCursor.getString(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.DOCUMENT)));\r\n            putArrayBytes(document);\r\n        }\r\n\r\n        putUnsignedInt(this.getCRC(this.register.array()));\r\n        this.registerMaster = this.register;\r\n    }\r\n\r\n    /**\r\n     * @brief introduce un long en el buffer del registro\r\n     * @param value valor a&#241;adido\r\n     */\r\n    private final void putUnsignedInt(long value){\r\n        this.register.put((byte) ((value &amp; 0x000000FF) &gt;&gt; 0));\r\n        this.register.put((byte) ((value &amp; 0x0000FF00) &gt;&gt; 8));\r\n        this.register.put((byte) ((value &amp; 0x00FF0000) &gt;&gt; 16));\r\n        this.register.put((byte) ((value &amp; 0xFF000000) &gt;&gt; 24));\r\n    }\r\n\r\n    /**\r\n     * @brief introduce un entero en el buffer del registro\r\n     *\r\n     * @param value valor a&#241;adido\r\n     */\r\n    private final void putUnsignedShort(int value){\r\n        this.register.put((byte) ((value &amp; 0x000000FF) &gt;&gt; 0));\r\n        this.register.put((byte) ((value &amp; 0x0000FF00) &gt;&gt; 8));\r\n    }\r\n\r\n    /**\r\n     * @brief introduce un byte en el buffer del registro\r\n     * @param value valor a&#241;adido\r\n     */\r\n    private final void putUnsignedChar(char value){\r\n        this.register.put((byte)value);\r\n    }\r\n\r\n    /**\r\n     * @brief introduce un array de bytes en el buffer del registro\r\n     * @param value valor a&#241;adido\r\n     */\r\n    private final void putArrayBytes(byte[] value){\r\n        for(int i=0;i&lt;value.length;i++)\r\n            this.register.put(value[i]);\r\n    }\r\n\r\n    /**\r\n     * @brief introduce un array de bytes en el buffer del registro para el campo Card Data\r\n     * (los dos primeros bytes son filtrados)\r\n     * @param value valor a&#241;adido\r\n     */\r\n    private final void putCardDataBytes(byte[] value) {\r\n        for(int i=2; i&lt;value.length; i++) {\r\n            this.register.put(value[i]);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @brief Genera un array de bytes de los valores del registro\r\n     * @return\r\n     */\r\n    public ByteBuffer getBytesRegistro() {\r\n        return register;\r\n    }\r\n\r\n    /**\r\n     * @brief Devielve la longitud del registro en Bytes\r\n     * @return N&#250;mero de bytes que ocopa el registro\r\n     */\r\n    public long getSizeRegistro() {\r\n        return register.array().length;\r\n    }\r\n\r\n    /**\r\n     &#160;*&#160;@brief&#160;Calculates and returns the Checksum of the register\r\n     &#160;*&#160;@param&#160;bytes&#160;bytes del registro\r\n     &#160;*&#160;@return&#160;Checksum del registro\r\n     &#160;*/\r\n    private long getChecksum(byte bytes[]) {\r\n\r\n        long checksumValue = 0;\r\n        Checksum checksum = new CRC32();\r\n\r\n        // update the current checksum with the specified array of bytes\r\n        checksum.update(bytes, 0, bytes.length);\r\n\r\n        // get the current checksum value\r\n        checksumValue = checksum.getValue();\r\n\r\n        return checksumValue;\r\n    }\r\n\r\n    private static int getChecksum16(final byte[] buffer) {\r\n        /* Note the change here */\r\n        int crc = 0x1D0F;\r\n        for (int j = 0; j &lt; buffer.length ; j++) {\r\n            crc = ((crc  &gt;&gt;&gt; 8) | (crc  &lt;&lt; 8) )&amp; 0xffff;\r\n            crc ^= (buffer[j] &amp; 0xff);//byte to int, trunc sign\r\n            crc ^= ((crc &amp; 0xff) &gt;&gt; 4);\r\n            crc ^= (crc &lt;&lt; 12) &amp; 0xffff;\r\n            crc ^= ((crc &amp; 0xFF) &lt;&lt; 5) &amp; 0xffff;\r\n        }\r\n        crc &amp;= 0xffff;\r\n        return crc;\r\n    }\r\n\r\n    /**\r\n     * @brief Set Penalty description\r\n     * @param p_description nombre archivo del registro\r\n     * @return Registro base\r\n     */\r\n    public RegistroBase setDescription(final String p_description){\r\n        byte[] array = p_description.getBytes();\r\n        for (int i=0; i&lt;p_description.length(); i++)\r\n            this.freePenaltyDescription[i]=array[i];\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @brief Set Document\r\n     * @param p_document nombre archivo del registro\r\n     * @return Registro base\r\n     */\r\n    public RegistroBase setDocument(final String p_document){\r\n        byte[] array = p_document.getBytes();\r\n        for (int i=0; i&lt;p_document.length(); i++)\r\n            this.document[i]=array[i];\r\n        return this;\r\n    }\r\n}\r\n``````````````````````````````````````````````````````````````````````````````````````\r\n\r\nI don&#39;t know if you can provide some one, but if like this take thanks in advance!","title":"For which Java class could I replace &quot;Cursor&quot; in order to build some Room Database","body":"<p>I was developing some simple app which make use of a local database using Room library, and I get into the need to replace Cursor class for another one which make the same funcionality.</p>\n<p>The main goal is to generate a register ticket, using the data kept in the DB.</p>\n<p>Some example of one of this class would be this:</p>\n<pre><code>public class PenaltyRegister extends RegistroBase {\n\n    /**\n     * ATRIBUTOS DE LA CLASE\n     */\n    private Cursor registerCursor = null;\n    private ByteBuffer register;\n\n    private short lengthData = 0;\n    private short lengthPenalty = 329;\n    private short lengthDataPlus = 23;\n    protected int cardDataLength = 150;\n    protected int freePenaltyDescriptionLength = 150;\n    protected int documentLength = 20;\n\n\n    private int dailySequenceStock          = 112233;\n    private String filenamePenalty          = &quot;PENALTY&quot;;\n\n\n    private char EquitmentType = 3;\n    private char EquitmentModel = 3;\n    private long serialNumbert = 3456789;\n    private char line = 1;\n    private int station = 2;\n    private char hall = 3;\n    private char position = 4;\n    private int shiftNumber = 5;\n    private long operationNumber = 8;\n    private char supportType = 1;\n    private char supportSubtype = 1;\n    private byte[] cardData = new byte[cardDataLength];\n    private char penaltyReason = 167;\n    private byte[] freePenaltyDescription = new byte[freePenaltyDescriptionLength];\n\n    private long penaltyAmount = 50;\n    private char identification = 1;\n\n    private char identificationType = 1;\n    private int countryCode = 724;\n    private byte[] document = new byte[documentLength];\n\n    /**\n     * METODOS DE LA CLASE\n     */\n\n    /**\n     * @brief Constructor regitro Penalty //Code 89\n     */\n    public PenaltyRegister(int code, int version, int dailySeq, String fileName, Cursor p_register, Calendar register_Date, long offsetRegister){\n        super(code, version);\n        this.registerCursor = p_register;\n\n        Date registerDate = register_Date.getTime();\n        this.lengthData = (short) (getLengthRegisterBase() + this.lengthPenalty );\n        identification = (char)this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.IDENTIFICATION));\n        if(identification == 1)\n            this.lengthData += lengthDataPlus;\n        setLength(lengthData);\n        setDate(registerDate.getTime());\n        setFechaRegistro(registerDate);\n        setUniversalSequence(this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.UNIVERSAL_SEQ)));\n        if(dailySeq == 0)\n            dailySeq = dailySequenceStock;\n        setDailySequence(dailySeq);\n        setOffset(offsetRegister);\n        setFileName(fileName);\n        for (int st=0;st&lt;cardDataLength; st++)\n            cardData[st] = 0x01;\n        this.create();\n    }\n\n    /**\n     * @brief Crea array de bytes del registro\n     */\n    private final void create() {\n\n        short numOfBytes = this.lengthData;\n        register = ByteBuffer.allocate(numOfBytes);\n        setProfundidad((char)numOfBytes);\n\n        putUnsignedChar((char) getTipoRegistro());\n        putUnsignedChar((char) getVersionRegistro());\n        putUnsignedShort(numOfBytes);\n        putUnsignedInt(getIndra4b(getFechaRegistro()));\n        putUnsignedInt(universalSequence);\n        putUnsignedInt(dailySequence);\n        putUnsignedInt(offset);\n        putArrayBytes(filename);\n        putUnsignedChar((char)this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.EQUIPMENT_TYPE)));\n        putUnsignedChar((char)this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.EQUIPMENT_MODEL)));\n        putUnsignedInt(this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.SERIAL_NUMBER)));\n        putUnsignedChar((char)this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.LINE)));\n        putUnsignedShort(this.registerCursor.getShort(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.STATION)));\n        putUnsignedChar((char)this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.HALL)));\n        putUnsignedChar((char)this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.POSITION)));\n        putUnsignedShort(this.registerCursor.getShort(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.SHIFT_NUMBER)));\n        putUnsignedInt(this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.OPERATION_NUMBER)));\n        putUnsignedChar((char)this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.SUPPORT_TYPE)));\n        putUnsignedChar((char)this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.SUPPORT_SUBTYPE)));\n        //CardData tiene que ser proporcionado por la CTL a través de parámetro del constructor\n        putCardDataBytes(Base64.decode(this.registerCursor.getString(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.CARD_DATA)), Base64.DEFAULT));\n        int penalty_reason = this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.PENALTY_REASON));\n        putUnsignedChar((char)penalty_reason);\n        if(penalty_reason == 0){\n            setDescription(this.registerCursor.getString(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.PENALTY_DESCRIPTION)));\n        }\n        putArrayBytes(freePenaltyDescription);\n        putUnsignedInt(this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.PENALTY_AMOUNT)));\n        putUnsignedChar(identification);\n\n        if (identification == 1) {\n            putUnsignedChar((char)this.registerCursor.getInt(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.IDENTIFICATION_TYPE)));\n            putUnsignedShort(this.registerCursor.getShort(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.COUNTRY_CODE)));\n            setDocument(this.registerCursor.getString(this.registerCursor.getColumnIndex(CoreDbContract.Penalty.DOCUMENT)));\n            putArrayBytes(document);\n        }\n\n        putUnsignedInt(this.getCRC(this.register.array()));\n        this.registerMaster = this.register;\n    }\n\n    /**\n     * @brief introduce un long en el buffer del registro\n     * @param value valor añadido\n     */\n    private final void putUnsignedInt(long value){\n        this.register.put((byte) ((value &amp; 0x000000FF) &gt;&gt; 0));\n        this.register.put((byte) ((value &amp; 0x0000FF00) &gt;&gt; 8));\n        this.register.put((byte) ((value &amp; 0x00FF0000) &gt;&gt; 16));\n        this.register.put((byte) ((value &amp; 0xFF000000) &gt;&gt; 24));\n    }\n\n    /**\n     * @brief introduce un entero en el buffer del registro\n     *\n     * @param value valor añadido\n     */\n    private final void putUnsignedShort(int value){\n        this.register.put((byte) ((value &amp; 0x000000FF) &gt;&gt; 0));\n        this.register.put((byte) ((value &amp; 0x0000FF00) &gt;&gt; 8));\n    }\n\n    /**\n     * @brief introduce un byte en el buffer del registro\n     * @param value valor añadido\n     */\n    private final void putUnsignedChar(char value){\n        this.register.put((byte)value);\n    }\n\n    /**\n     * @brief introduce un array de bytes en el buffer del registro\n     * @param value valor añadido\n     */\n    private final void putArrayBytes(byte[] value){\n        for(int i=0;i&lt;value.length;i++)\n            this.register.put(value[i]);\n    }\n\n    /**\n     * @brief introduce un array de bytes en el buffer del registro para el campo Card Data\n     * (los dos primeros bytes son filtrados)\n     * @param value valor añadido\n     */\n    private final void putCardDataBytes(byte[] value) {\n        for(int i=2; i&lt;value.length; i++) {\n            this.register.put(value[i]);\n        }\n    }\n\n    /**\n     * @brief Genera un array de bytes de los valores del registro\n     * @return\n     */\n    public ByteBuffer getBytesRegistro() {\n        return register;\n    }\n\n    /**\n     * @brief Devielve la longitud del registro en Bytes\n     * @return Número de bytes que ocopa el registro\n     */\n    public long getSizeRegistro() {\n        return register.array().length;\n    }\n\n    /**\n      * @brief Calculates and returns the Checksum of the register\n      * @param bytes bytes del registro\n      * @return Checksum del registro\n      */\n    private long getChecksum(byte bytes[]) {\n\n        long checksumValue = 0;\n        Checksum checksum = new CRC32();\n\n        // update the current checksum with the specified array of bytes\n        checksum.update(bytes, 0, bytes.length);\n\n        // get the current checksum value\n        checksumValue = checksum.getValue();\n\n        return checksumValue;\n    }\n\n    private static int getChecksum16(final byte[] buffer) {\n        /* Note the change here */\n        int crc = 0x1D0F;\n        for (int j = 0; j &lt; buffer.length ; j++) {\n            crc = ((crc  &gt;&gt;&gt; 8) | (crc  &lt;&lt; 8) )&amp; 0xffff;\n            crc ^= (buffer[j] &amp; 0xff);//byte to int, trunc sign\n            crc ^= ((crc &amp; 0xff) &gt;&gt; 4);\n            crc ^= (crc &lt;&lt; 12) &amp; 0xffff;\n            crc ^= ((crc &amp; 0xFF) &lt;&lt; 5) &amp; 0xffff;\n        }\n        crc &amp;= 0xffff;\n        return crc;\n    }\n\n    /**\n     * @brief Set Penalty description\n     * @param p_description nombre archivo del registro\n     * @return Registro base\n     */\n    public RegistroBase setDescription(final String p_description){\n        byte[] array = p_description.getBytes();\n        for (int i=0; i&lt;p_description.length(); i++)\n            this.freePenaltyDescription[i]=array[i];\n        return this;\n    }\n\n    /**\n     * @brief Set Document\n     * @param p_document nombre archivo del registro\n     * @return Registro base\n     */\n    public RegistroBase setDocument(final String p_document){\n        byte[] array = p_document.getBytes();\n        for (int i=0; i&lt;p_document.length(); i++)\n            this.document[i]=array[i];\n        return this;\n    }\n}\n</code></pre>\n<p>I don't know if you can provide some one, but if like this take thanks in advance!</p>\n"},{"tags":["java","hibernate","mariadb"],"comments":[{"owner":{"account_id":2517962,"reputation":12768,"user_id":10195153,"display_name":"danblack"},"score":0,"creation_date":1679460531,"post_id":75793254,"comment_id":133724612,"body_markdown":"MariaDB does [support sequences](https://mariadb.com/kb/en/create-sequence/) for a while now (10.3+). [DROP SEQUENCE](https://mariadb.com/kb/en/drop-sequence/) is allowed (MariaDB, not MySQL). The drop error is the sequence not found. Could it be the previous didn&#39;t support it and the upgrade is trying to remove it before recreating it?","body":"MariaDB does <a href=\"https://mariadb.com/kb/en/create-sequence/\" rel=\"nofollow noreferrer\">support sequences</a> for a while now (10.3+). <a href=\"https://mariadb.com/kb/en/drop-sequence/\" rel=\"nofollow noreferrer\">DROP SEQUENCE</a> is allowed (MariaDB, not MySQL). The drop error is the sequence not found. Could it be the previous didn&#39;t support it and the upgrade is trying to remove it before recreating it?"},{"owner":{"account_id":12214233,"reputation":451,"user_id":8915165,"display_name":"K. Taylor"},"score":0,"creation_date":1679575024,"post_id":75793254,"comment_id":133748015,"body_markdown":"Looking in the DB using dbVis the sequences were actually being produced after the upgrade, not before, and I&#39;m on 10.10.2. Anyway, I removed SequenceGenerator and its working, so that annotation is where the problem lies.","body":"Looking in the DB using dbVis the sequences were actually being produced after the upgrade, not before, and I&#39;m on 10.10.2. Anyway, I removed SequenceGenerator and its working, so that annotation is where the problem lies."},{"owner":{"account_id":3847948,"reputation":378,"user_id":3188825,"display_name":"Akhil"},"score":0,"creation_date":1700547360,"post_id":75793254,"comment_id":136664800,"body_markdown":"Were you able to resolve this issue? I&#39;m facing a similar error in ID generation using sequence\n`Caused by: java.sql.SQLException: Unknown column &#39;next_val&#39; in &#39;field list&#39;\nQuery is: select next_val as id_val from job_seq for update`","body":"Were you able to resolve this issue? I&#39;m facing a similar error in ID generation using sequence <code>Caused by: java.sql.SQLException: Unknown column &#39;next_val&#39; in &#39;field list&#39; Query is: select next_val as id_val from job_seq for update</code>"}],"owner":{"account_id":12214233,"reputation":451,"user_id":8915165,"display_name":"K. Taylor"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":225,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680098342,"creation_date":1679331974,"question_id":75793254,"body_markdown":"After updating Hibernate to 6.1.7, ID generators are failing, trying to DROP SEQUENCE, which is illegal in MariaDB (and probably MySQL too). This was working in 6.1.4. Tried every GenerationType.\r\n\r\nUsing: hibernate.hbm2ddl.auto = create\r\n\r\nDoes anyone know what changed that caused this?  \r\nIs there a property that can return it to the previous behavior, which was automatically using TABLE when SEQUENCE was selected?\r\n\r\nI can see in the DB, using dbVisualizer, that it is actually creating SEQUENCEs.  Not sure how that is even possible since MariaDB does not support that.\r\n\r\nVersion Bump:\r\n\r\nHibernate: 6.1.4 -&gt; 6.1.7\r\n\r\njavax.persistence 3.0.0 -&gt; 3.1.0\r\n\r\nmariadb java client: 3.0.9\r\n\r\nMariaDB: 10.10\r\n\r\nException:\r\n\r\n&gt; 11:35:55.833 WARN  jdbc.message.server.ErrorPacket [main] at (org.mariadb.jdbc.util.log.Slf4JLogger:100) - Error: 4091-42S02: Unknown SEQUENCE: &#39;appsec.sec_users_seq&#39;\r\n11:35:55.834 WARN  tool.schema.internal.ExceptionHandlerLoggedImpl [main] at (org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl:27) - GenerationTarget encountered exception accepting command : Error executing DDL &quot;drop sequence sec_users_seq&quot; via JDBC Statement\r\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL &quot;drop sequence sec_users_seq&quot; via JDBC Statement\r\n\tat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)\r\n\tat org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)\r\n\tat org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)\r\n\tat org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:286)\r\n\tat org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)\r\n\tat org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)\r\n\tat org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)\r\n\tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)\r\n\tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)\r\n\tat java.base/java.util.HashMap.forEach(HashMap.java:1421)\r\n\tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)\r\n\tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:336)\r\n\tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)\r\n\tat org.hibernate.boot.internal.MetadataImpl.buildSessionFactory(MetadataImpl.java:186)\r\n\tat security.domain.SecHibernateController.initialize(SecHibernateController.java:194)\r\n\tat security.domain.SecHibernateController.&lt;init&gt;(SecHibernateController.java:49)\r\n\tat security.domain.SecHibernateController.&lt;clinit&gt;(SecHibernateController.java:43)\r\n\tat security.test.TestApp.&lt;init&gt;(TestApp.java:67)\r\n\tat security.test.TestApp.main(TestApp.java:58)\r\nCaused by: java.sql.SQLSyntaxErrorException: (conn=979) Unknown SEQUENCE: &#39;appsec.sec_users_seq&#39;\r\n\tat org.mariadb.jdbc.export.ExceptionFactory.createException(ExceptionFactory.java:282)\r\n\tat org.mariadb.jdbc.export.ExceptionFactory.create(ExceptionFactory.java:370)\r\n\tat org.mariadb.jdbc.message.ClientMessage.readPacket(ClientMessage.java:137)\r\n\tat org.mariadb.jdbc.client.impl.StandardClient.readPacket(StandardClient.java:840)\r\n\tat org.mariadb.jdbc.client.impl.StandardClient.readResults(StandardClient.java:779)\r\n\tat org.mariadb.jdbc.client.impl.StandardClient.readResponse(StandardClient.java:698)\r\n\tat org.mariadb.jdbc.client.impl.StandardClient.execute(StandardClient.java:641)\r\n\tat org.mariadb.jdbc.Statement.executeInternal(Statement.java:935)\r\n\tat org.mariadb.jdbc.Statement.execute(Statement.java:1061)\r\n\tat org.mariadb.jdbc.Statement.execute(Statement.java:452)\r\n\tat com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)\r\n\tat com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)\r\n\tat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)\r\n\t... 18 more\r\n\r\nCode:\r\n\r\n```\r\n@Entity\r\n@Table( name = &quot;sec_users&quot; )\r\npublic class User {\r\n\r\n\t@Id\r\n\t@GeneratedValue( generator = &quot;sec_user_seq_gen&quot;, strategy = GenerationType.SEQUENCE )\r\n\t@SequenceGenerator( name = &quot;sec_user_seq_gen&quot;, sequenceName = &quot;sec_users_seq&quot;, initialValue = 101, allocationSize = 5 )\r\n\t@Column( name = &quot;id&quot; )\r\n\tprivate Long id;\r\n\r\n}\r\n```\r\n\r\nUpdate: Removing the @SequenceGenerator seems to restore the old behavior. I still think this is a bug unless it was an intentional change.\r\n\r\nUpdate: This is how I got it to work. Any deviation from this fails.\r\n```\r\n@Entity\r\n@Table( name = &quot;customer&quot; )\r\npublic class Customer extends AbstractEntity {\r\n\r\n\t@Id\r\n\t@GeneratedValue( generator = &quot;customer_seq&quot;, strategy = GenerationType.TABLE )\r\n\t@Column( name = &quot;id&quot; )\r\n\tprivate Long id;\r\n\r\n\t// getter/setters\r\n\r\n}\r\n```","title":"Updating Hibernate 6.1.4 to 6.1.7 broke ID generators for MariaDB","body":"<p>After updating Hibernate to 6.1.7, ID generators are failing, trying to DROP SEQUENCE, which is illegal in MariaDB (and probably MySQL too). This was working in 6.1.4. Tried every GenerationType.</p>\n<p>Using: hibernate.hbm2ddl.auto = create</p>\n<p>Does anyone know what changed that caused this?<br />\nIs there a property that can return it to the previous behavior, which was automatically using TABLE when SEQUENCE was selected?</p>\n<p>I can see in the DB, using dbVisualizer, that it is actually creating SEQUENCEs.  Not sure how that is even possible since MariaDB does not support that.</p>\n<p>Version Bump:</p>\n<p>Hibernate: 6.1.4 -&gt; 6.1.7</p>\n<p>javax.persistence 3.0.0 -&gt; 3.1.0</p>\n<p>mariadb java client: 3.0.9</p>\n<p>MariaDB: 10.10</p>\n<p>Exception:</p>\n<blockquote>\n<p>11:35:55.833 WARN  jdbc.message.server.ErrorPacket [main] at (org.mariadb.jdbc.util.log.Slf4JLogger:100) - Error: 4091-42S02: Unknown SEQUENCE: 'appsec.sec_users_seq'\n11:35:55.834 WARN  tool.schema.internal.ExceptionHandlerLoggedImpl [main] at (org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl:27) - GenerationTarget encountered exception accepting command : Error executing DDL &quot;drop sequence sec_users_seq&quot; via JDBC Statement\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL &quot;drop sequence sec_users_seq&quot; via JDBC Statement\nat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)\nat org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:419)\nat org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:403)\nat org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:286)\nat org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:178)\nat org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:149)\nat org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:117)\nat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)\nat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)\nat java.base/java.util.HashMap.forEach(HashMap.java:1421)\nat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)\nat org.hibernate.internal.SessionFactoryImpl.(SessionFactoryImpl.java:336)\nat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)\nat org.hibernate.boot.internal.MetadataImpl.buildSessionFactory(MetadataImpl.java:186)\nat security.domain.SecHibernateController.initialize(SecHibernateController.java:194)\nat security.domain.SecHibernateController.(SecHibernateController.java:49)\nat security.domain.SecHibernateController.(SecHibernateController.java:43)\nat security.test.TestApp.(TestApp.java:67)\nat security.test.TestApp.main(TestApp.java:58)\nCaused by: java.sql.SQLSyntaxErrorException: (conn=979) Unknown SEQUENCE: 'appsec.sec_users_seq'\nat org.mariadb.jdbc.export.ExceptionFactory.createException(ExceptionFactory.java:282)\nat org.mariadb.jdbc.export.ExceptionFactory.create(ExceptionFactory.java:370)\nat org.mariadb.jdbc.message.ClientMessage.readPacket(ClientMessage.java:137)\nat org.mariadb.jdbc.client.impl.StandardClient.readPacket(StandardClient.java:840)\nat org.mariadb.jdbc.client.impl.StandardClient.readResults(StandardClient.java:779)\nat org.mariadb.jdbc.client.impl.StandardClient.readResponse(StandardClient.java:698)\nat org.mariadb.jdbc.client.impl.StandardClient.execute(StandardClient.java:641)\nat org.mariadb.jdbc.Statement.executeInternal(Statement.java:935)\nat org.mariadb.jdbc.Statement.execute(Statement.java:1061)\nat org.mariadb.jdbc.Statement.execute(Statement.java:452)\nat com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)\nat com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)\nat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)\n... 18 more</p>\n</blockquote>\n<p>Code:</p>\n<pre><code>@Entity\n@Table( name = &quot;sec_users&quot; )\npublic class User {\n\n    @Id\n    @GeneratedValue( generator = &quot;sec_user_seq_gen&quot;, strategy = GenerationType.SEQUENCE )\n    @SequenceGenerator( name = &quot;sec_user_seq_gen&quot;, sequenceName = &quot;sec_users_seq&quot;, initialValue = 101, allocationSize = 5 )\n    @Column( name = &quot;id&quot; )\n    private Long id;\n\n}\n</code></pre>\n<p>Update: Removing the @SequenceGenerator seems to restore the old behavior. I still think this is a bug unless it was an intentional change.</p>\n<p>Update: This is how I got it to work. Any deviation from this fails.</p>\n<pre><code>@Entity\n@Table( name = &quot;customer&quot; )\npublic class Customer extends AbstractEntity {\n\n    @Id\n    @GeneratedValue( generator = &quot;customer_seq&quot;, strategy = GenerationType.TABLE )\n    @Column( name = &quot;id&quot; )\n    private Long id;\n\n    // getter/setters\n\n}\n</code></pre>\n"},{"tags":["java","android","neo4j"],"comments":[{"owner":{"account_id":103469,"reputation":8520,"user_id":277128,"accept_rate":79,"display_name":"fbiville"},"score":0,"creation_date":1680083230,"post_id":75874306,"comment_id":133835569,"body_markdown":"The setting names do not match the documented ones: https://neo4j.com/docs/operations-manual/current/configuration/connectors/. It should be `server.bolt.listen_address`.","body":"The setting names do not match the documented ones: <a href=\"https://neo4j.com/docs/operations-manual/current/configuration/connectors/\" rel=\"nofollow noreferrer\">neo4j.com/docs/operations-manual/current/configuration/&hellip;</a>. It should be <code>server.bolt.listen_address</code>."},{"owner":{"account_id":28130456,"reputation":1,"user_id":21495123,"display_name":"Saretta"},"score":0,"creation_date":1680084162,"post_id":75874306,"comment_id":133835799,"body_markdown":"@fbiville yes, but it doesn&#39;t change anything","body":"@fbiville yes, but it doesn&#39;t change anything"},{"owner":{"account_id":28130456,"reputation":1,"user_id":21495123,"display_name":"Saretta"},"score":0,"creation_date":1680084239,"post_id":75874306,"comment_id":133835822,"body_markdown":"@fbiville when I try to connect from neo4j it says: &quot; ServiceUnavailable: WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the Neo4j certificate is configured to use. WebSocket `readyState` is: 3&quot;","body":"@fbiville when I try to connect from neo4j it says: &quot; ServiceUnavailable: WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the Neo4j certificate is configured to use. WebSocket <code>readyState</code> is: 3&quot;"},{"owner":{"account_id":28130456,"reputation":1,"user_id":21495123,"display_name":"Saretta"},"score":0,"creation_date":1680091048,"post_id":75874306,"comment_id":133837467,"body_markdown":"why does it work only with localhost and not my network?","body":"why does it work only with localhost and not my network?"}],"owner":{"account_id":28130456,"reputation":1,"user_id":21495123,"display_name":"Saretta"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680098003,"creation_date":1680074744,"question_id":75874306,"body_markdown":"Hi I would like to use neo4j in an app made in android studio on mac using neo4j version 5.6.0 desktop on mac, but when I try to connect with &quot;bolt://192.168.X.X:7687&quot; it gives me error it&#39;s from as message on neo4j: &quot;ServiceUnavailable: WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the Neo4j certificate is configured to use. WebSocket readyState` is: 3&quot;.\r\n\r\nI tried uncommenting these dbms.connectors .default_listen_address=0.0.0.0 and server.bolt.listen_address\r\n\r\nbut it didn&#39;t work and it&#39;s not a question of the port because if I activate the server with &quot;bolt://192.168.X.X:7687&quot; the server c onnette but from client app I have: &quot;&quot;W/System.err: org.neo4j.driver.v1.exceptions.ServiceUnavailableException: Unable to connect to localhost:7687, ensure the database is running and that there is a working network connection to it .&quot;\r\n\r\nAs a client I made the connection in android studio with AsyncTask like this:\r\n\r\n```\r\n`  try {\r\n                String uri = &quot;bolt://X.X.X:7687&quot;;\r\n                String username = &quot;neo4j&quot;;\r\n                String password = &quot;neo4j&quot;;\r\n                driver = GraphDatabase.driver(uri, AuthTokens.basic(username, password));\r\n                Session session = driver.session();\r\n                Log.e(&quot;Client&quot;, &quot;Connessione effettuata&quot;);\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n                Log.e(&quot;Client&quot;, &quot;Connessione non effettuata&quot;);\r\n            }`\r\n```\r\n\r\nHow can I fix it?\r\n\r\nI would like the neo4j server to connect","title":"Connection to neo4j incorrect in android studio","body":"<p>Hi I would like to use neo4j in an app made in android studio on mac using neo4j version 5.6.0 desktop on mac, but when I try to connect with &quot;bolt://192.168.X.X:7687&quot; it gives me error it's from as message on neo4j: &quot;ServiceUnavailable: WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the Neo4j certificate is configured to use. WebSocket readyState` is: 3&quot;.</p>\n<p>I tried uncommenting these dbms.connectors .default_listen_address=0.0.0.0 and server.bolt.listen_address</p>\n<p>but it didn't work and it's not a question of the port because if I activate the server with &quot;bolt://192.168.X.X:7687&quot; the server c onnette but from client app I have: &quot;&quot;W/System.err: org.neo4j.driver.v1.exceptions.ServiceUnavailableException: Unable to connect to localhost:7687, ensure the database is running and that there is a working network connection to it .&quot;</p>\n<p>As a client I made the connection in android studio with AsyncTask like this:</p>\n<pre><code>`  try {\n                String uri = &quot;bolt://X.X.X:7687&quot;;\n                String username = &quot;neo4j&quot;;\n                String password = &quot;neo4j&quot;;\n                driver = GraphDatabase.driver(uri, AuthTokens.basic(username, password));\n                Session session = driver.session();\n                Log.e(&quot;Client&quot;, &quot;Connessione effettuata&quot;);\n            } catch (Exception e) {\n                e.printStackTrace();\n                Log.e(&quot;Client&quot;, &quot;Connessione non effettuata&quot;);\n            }`\n</code></pre>\n<p>How can I fix it?</p>\n<p>I would like the neo4j server to connect</p>\n"},{"tags":["java","maven","intellij-idea","dependency-management"],"answers":[{"tags":[],"owner":{"account_id":2078312,"reputation":16240,"user_id":1851024,"accept_rate":82,"display_name":"Andrey Chaschev"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1382629859,"creation_date":1382625157,"answer_id":19568842,"question_id":19568134,"body_markdown":"Do any of these two points work for you:\r\n\r\n- **NEW** there might be dependency in one of your sub-modules pointing to the removed artifact. To make sure it&#39;s the situation, you may want to rename your $HOME/.m2 and rebuild the project. If this is indeed the case, just search for the dependency in your poms and delete it from sub-modules\r\n- right click on the parent `pom.xml` -&gt; Maven -&gt; Reimport\r\n- copy the project into a separate dir. File -&gt; Import Project -&gt; Choose newly created dir -&gt; Choose Maven?\r\n\r\n\r\nPS. Idea is excellent in maintaining the project structure in accordance with Maven project. Once you make a change to your pom, you need to reload the project. Idea can also automatically detect changes made to your `pom.xml` and apply them to project. To enable this, press &lt;kbd&gt;Ctrl+Shift+A&lt;/kbd&gt;, type &#39;maven auto&#39;, choose &quot;Importing&quot;, checkbox &quot;Import Maven project automatically&quot;;","title":"How to remove Modules from a Intellij Maven Project permanently?","body":"<p>Do any of these two points work for you:</p>\n\n<ul>\n<li><strong>NEW</strong> there might be dependency in one of your sub-modules pointing to the removed artifact. To make sure it's the situation, you may want to rename your $HOME/.m2 and rebuild the project. If this is indeed the case, just search for the dependency in your poms and delete it from sub-modules</li>\n<li>right click on the parent <code>pom.xml</code> -> Maven -> Reimport</li>\n<li>copy the project into a separate dir. File -> Import Project -> Choose newly created dir -> Choose Maven?</li>\n</ul>\n\n<p>PS. Idea is excellent in maintaining the project structure in accordance with Maven project. Once you make a change to your pom, you need to reload the project. Idea can also automatically detect changes made to your <code>pom.xml</code> and apply them to project. To enable this, press <kbd>Ctrl+Shift+A</kbd>, type 'maven auto', choose \"Importing\", checkbox \"Import Maven project automatically\";</p>\n"},{"tags":[],"owner":{"account_id":3484794,"reputation":631,"user_id":2916007,"display_name":"herpnderpn"},"down_vote_count":0,"up_vote_count":45,"is_accepted":true,"score":45,"last_activity_date":1382712067,"creation_date":1382711525,"answer_id":19592666,"question_id":19568134,"body_markdown":"A collegue who has more in-depth knowledge of maven told me the answer:\r\n\r\nThe trick is not to remove the source module from the intellij project but to remove it from maven (in the maven projects tab in intellij). Intellij will ask then to remove the source module also from the intellij project and its finally gone.\r\n\r\nRight click on the maven project -&gt; remove projects\r\n\r\nWould not have guessed this makes such a difference.","title":"How to remove Modules from a Intellij Maven Project permanently?","body":"<p>A collegue who has more in-depth knowledge of maven told me the answer:</p>\n\n<p>The trick is not to remove the source module from the intellij project but to remove it from maven (in the maven projects tab in intellij). Intellij will ask then to remove the source module also from the intellij project and its finally gone.</p>\n\n<p>Right click on the maven project -> remove projects</p>\n\n<p>Would not have guessed this makes such a difference.</p>\n"},{"tags":[],"owner":{"account_id":387859,"reputation":1633,"user_id":746459,"accept_rate":32,"display_name":"jmkgreen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1476957896,"creation_date":1476957896,"answer_id":40151333,"question_id":19568134,"body_markdown":"This may not relate directly to the OP, but...\r\n\r\nUsing **IntelliJ 2016.5**, to remove a Maven module *and* it&#39;s underlying source code *and* remove it as a sub-module from the parent, go to the `Project Files` tab, find the unwanted module and use the triangle symbol to open it, _then_ delete the entry that represents it on disk.\r\n\r\nHitting `Delete` on the module itself will only mark it as hidden within the IDE.","title":"How to remove Modules from a Intellij Maven Project permanently?","body":"<p>This may not relate directly to the OP, but...</p>\n\n<p>Using <strong>IntelliJ 2016.5</strong>, to remove a Maven module <em>and</em> it's underlying source code <em>and</em> remove it as a sub-module from the parent, go to the <code>Project Files</code> tab, find the unwanted module and use the triangle symbol to open it, <em>then</em> delete the entry that represents it on disk.</p>\n\n<p>Hitting <code>Delete</code> on the module itself will only mark it as hidden within the IDE.</p>\n"},{"tags":[],"owner":{"account_id":11711219,"reputation":497,"user_id":8573084,"display_name":"manikanta nvsr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677879542,"creation_date":1677879479,"answer_id":75632103,"question_id":19568134,"body_markdown":"In case someone encounters a similar problem in recent times, the following steps worked for me:\r\n\r\n1. Right-click on the project/module that you want to remove.\r\n2. Select &quot;Maven&quot; from the context menu.\r\n3. Choose &quot;Unlink Maven Projects&quot; from the dropdown list.\r\n4. Finally, select &quot;Remove&quot; to delete the project/module.","title":"How to remove Modules from a Intellij Maven Project permanently?","body":"<p>In case someone encounters a similar problem in recent times, the following steps worked for me:</p>\n<ol>\n<li>Right-click on the project/module that you want to remove.</li>\n<li>Select &quot;Maven&quot; from the context menu.</li>\n<li>Choose &quot;Unlink Maven Projects&quot; from the dropdown list.</li>\n<li>Finally, select &quot;Remove&quot; to delete the project/module.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":15585621,"reputation":9,"user_id":11244239,"display_name":"Emmaroland"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680097839,"creation_date":1680097839,"answer_id":75878145,"question_id":19568134,"body_markdown":"If anyone is still experiencing this. This is what worked for me:\r\n\r\n 1. Rigth click on the module to remove.\r\n 2. Select &quot;Remove Module&quot; fro the context menu.\r\n 3. Right click on the same module again. This time you should see an option &quot;delete&quot; in the context menu.\r\n 4. Click on &quot;delete&quot; and the module is gone.\r\n\r\nHope this helps","title":"How to remove Modules from a Intellij Maven Project permanently?","body":"<p>If anyone is still experiencing this. This is what worked for me:</p>\n<ol>\n<li>Rigth click on the module to remove.</li>\n<li>Select &quot;Remove Module&quot; fro the context menu.</li>\n<li>Right click on the same module again. This time you should see an option &quot;delete&quot; in the context menu.</li>\n<li>Click on &quot;delete&quot; and the module is gone.</li>\n</ol>\n<p>Hope this helps</p>\n"}],"owner":{"account_id":3484794,"reputation":631,"user_id":2916007,"display_name":"herpnderpn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40475,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":19592666,"answer_count":5,"score":18,"last_activity_date":1680097839,"creation_date":1382623199,"question_id":19568134,"body_markdown":"I am currently working on a larger scale Maven-based project in IntelliJIdea 12.1.6 Ultimate. I have been working with IntelliJIdea since about 5 months.\r\n\r\nAn included module has dependencies on another module. The dependent module&#39;s source was also part of my project until recently. Since I removed the dependent module from my project, I get compile errors whenever I am trying to compile the source without maven.\r\n\r\nThe pom.xml of removed modules in Intellij seem to be placed onto the Settings-&gt;Maven-&gt;Ignored Files. I cant seem to remove it from there, only check or uncheck it. It&#39;s not possible to include the module again since IntelliJ will say its still under Ignored Files.\r\n\r\n2 ways allow me to compile again: Uncheck the pom from Ignored files, which will include the module again in my project. Or delete the source of the dependent module, so my project will load the dependent module from the maven repository. But whenever I update my project from svn, the source of the dependent module is restored (I don&#39;t know why this even happens since its not part my project) and the cycle begins anew.\r\n\r\nI googled this for a while since it gets really annoying. It became a problem with several excluded modules. I could rebuild the intellij-project from scratch but since a lot of IntelliJ settings were made (not related to the problem) I would rather solve this.\r\n\r\nAny help is appreciated, I guess I must be missing something","title":"How to remove Modules from a Intellij Maven Project permanently?","body":"<p>I am currently working on a larger scale Maven-based project in IntelliJIdea 12.1.6 Ultimate. I have been working with IntelliJIdea since about 5 months.</p>\n\n<p>An included module has dependencies on another module. The dependent module's source was also part of my project until recently. Since I removed the dependent module from my project, I get compile errors whenever I am trying to compile the source without maven.</p>\n\n<p>The pom.xml of removed modules in Intellij seem to be placed onto the Settings->Maven->Ignored Files. I cant seem to remove it from there, only check or uncheck it. It's not possible to include the module again since IntelliJ will say its still under Ignored Files.</p>\n\n<p>2 ways allow me to compile again: Uncheck the pom from Ignored files, which will include the module again in my project. Or delete the source of the dependent module, so my project will load the dependent module from the maven repository. But whenever I update my project from svn, the source of the dependent module is restored (I don't know why this even happens since its not part my project) and the cycle begins anew.</p>\n\n<p>I googled this for a while since it gets really annoying. It became a problem with several excluded modules. I could rebuild the intellij-project from scratch but since a lot of IntelliJ settings were made (not related to the problem) I would rather solve this.</p>\n\n<p>Any help is appreciated, I guess I must be missing something</p>\n"},{"tags":["java","spring-boot","hibernate","join","spring-data-jpa"],"comments":[{"owner":{"account_id":4915912,"reputation":1233,"user_id":3959856,"accept_rate":100,"display_name":"Jack Flamp"},"score":0,"creation_date":1680003265,"post_id":75865159,"comment_id":133818859,"body_markdown":"In what way is it not working? What error do you get?","body":"In what way is it not working? What error do you get?"},{"owner":{"account_id":10827831,"reputation":143,"user_id":7963227,"display_name":"Sametcey"},"score":0,"creation_date":1680007960,"post_id":75865159,"comment_id":133820213,"body_markdown":"I want a JSON only with the data from Artikel Class. Without the Join to Artikeldetails","body":"I want a JSON only with the data from Artikel Class. Without the Join to Artikeldetails"},{"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"score":0,"creation_date":1680023604,"post_id":75865159,"comment_id":133824917,"body_markdown":"Have you tried the `JsonIgnore` annotation above the list?","body":"Have you tried the <code>JsonIgnore</code> annotation above the list?"}],"answers":[{"tags":[],"owner":{"account_id":10827831,"reputation":143,"user_id":7963227,"display_name":"Sametcey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1680097415,"creation_date":1680097415,"answer_id":75878070,"question_id":75865159,"body_markdown":"I have now the Solution:\r\n\r\nif you include fetch = FetchType.LAZY to OneToMany and to ManyToOne so you can catch only one Entity with \r\n\r\n    @Query(value = &quot;SELECT a FROM Artikel a where a.artikelnummer = :artikelnummer&quot;)\r\n    List&lt;Artikel&gt; findByArtikelnummer(@Param(&quot;artikelnummer&quot;) int artikelnummer);\r\n\r\nIf You choose FetchType.Eager he will automaticaly Join every time the OneToMay relation.\r\n\r\n","title":"Hibernate get Data form one Table which is part of a Join in JPA","body":"<p>I have now the Solution:</p>\n<p>if you include fetch = FetchType.LAZY to OneToMany and to ManyToOne so you can catch only one Entity with</p>\n<pre><code>@Query(value = &quot;SELECT a FROM Artikel a where a.artikelnummer = :artikelnummer&quot;)\nList&lt;Artikel&gt; findByArtikelnummer(@Param(&quot;artikelnummer&quot;) int artikelnummer);\n</code></pre>\n<p>If You choose FetchType.Eager he will automaticaly Join every time the OneToMay relation.</p>\n"}],"owner":{"account_id":10827831,"reputation":143,"user_id":7963227,"display_name":"Sametcey"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75878070,"answer_count":1,"score":2,"last_activity_date":1680097415,"creation_date":1679999749,"question_id":75865159,"body_markdown":"I have a question. I have two Tables in Database and two Classes for Hibernate.\r\n\r\nClass Artikel: \r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;Artikel&quot;)\r\npublic class Artikel{\r\n    \r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n    private String artikelbezeichnung;\r\n    private int artikelnummer;\r\n    private Float preis;\r\n    \r\n    @OneToMany(mappedBy = &quot;artikel&quot;, fetch = FetchType.LAZY)\r\n    @JsonManagedReference\r\n    private List&lt;Artikeldetails&gt; artikeldetails;\r\n```\r\n\r\nClass Artikeldetails\r\n\r\n```\r\n@Entity\r\n@Table(name=&quot;ARTIKELDETAILS&quot;)\r\npublic class Artikeldetails {\r\n    \r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n    \r\n    private String artikeldetail;\r\n    private String artikelcustom;\r\n    private String artikelselektion;\r\n    \r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name=&quot;artikelid&quot;)\r\n    @JsonBackReference\r\n    private Artikel artikel;\r\n```\r\n\r\nThe JPA Query:\r\n\r\n```\r\nList&lt;Artikel&gt; findByArtikelnummer(@Param(&quot;artikelnummer&quot;) int artikelnummer);\r\n```\r\n\r\nThe result is for example:\r\n\r\n```\r\n[{\r\n        &quot;id&quot;: 3,\r\n        &quot;artikelbezeichnung&quot;: null,\r\n        &quot;artikelnummer&quot;: 123,\r\n        &quot;preis&quot;: 123.0,\r\n        &quot;artikeldetails&quot;: [{\r\n                &quot;id&quot;: 4,\r\n                &quot;artikeldetail&quot;: &quot;DetailNummer 1&quot;,\r\n                &quot;artikelcustom&quot;: &quot;Detail Nummer 1&quot;,\r\n                &quot;artikelselektion&quot;: &quot;Detail Nummer 1&quot;\r\n            }, {\r\n                &quot;id&quot;: 5,\r\n                &quot;artikeldetail&quot;: &quot;DetailNummer 2&quot;,\r\n                &quot;artikelcustom&quot;: &quot;Detail Nummer 2&quot;,\r\n                &quot;artikelselektion&quot;: &quot;Detail Nummer 2&quot;\r\n            }, {\r\n                &quot;id&quot;: 6,\r\n                &quot;artikeldetail&quot;: &quot;DetailNummer 3&quot;,\r\n                &quot;artikelcustom&quot;: &quot;DetailNummer 3&quot;,\r\n                &quot;artikelselektion&quot;: &quot;DetailNummer 3&quot;\r\n            }\r\n        ]\r\n    }\r\n]\r\n```\r\n\r\nThat&#39;s fine and working but now I only want to get ONLY the Artikel Data without Join. How should I do that? Must I create a new Class for that?\r\n\r\nI trying also to change this line:\r\n\r\n```\r\n@Query(value = &quot;SELECT a FROM Artikel a where a.artikelnummer = :artikelnummer&quot;)\r\nList&lt;Artikel&gt; findByArtikelnummer(@Param(&quot;artikelnummer&quot;) int artikelnummer);\r\n```\r\n\r\nbut this is not working.","title":"Hibernate get Data form one Table which is part of a Join in JPA","body":"<p>I have a question. I have two Tables in Database and two Classes for Hibernate.</p>\n<p>Class Artikel:</p>\n<pre><code>@Entity\n@Table(name = &quot;Artikel&quot;)\npublic class Artikel{\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    private String artikelbezeichnung;\n    private int artikelnummer;\n    private Float preis;\n    \n    @OneToMany(mappedBy = &quot;artikel&quot;, fetch = FetchType.LAZY)\n    @JsonManagedReference\n    private List&lt;Artikeldetails&gt; artikeldetails;\n</code></pre>\n<p>Class Artikeldetails</p>\n<pre><code>@Entity\n@Table(name=&quot;ARTIKELDETAILS&quot;)\npublic class Artikeldetails {\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    \n    private String artikeldetail;\n    private String artikelcustom;\n    private String artikelselektion;\n    \n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name=&quot;artikelid&quot;)\n    @JsonBackReference\n    private Artikel artikel;\n</code></pre>\n<p>The JPA Query:</p>\n<pre><code>List&lt;Artikel&gt; findByArtikelnummer(@Param(&quot;artikelnummer&quot;) int artikelnummer);\n</code></pre>\n<p>The result is for example:</p>\n<pre><code>[{\n        &quot;id&quot;: 3,\n        &quot;artikelbezeichnung&quot;: null,\n        &quot;artikelnummer&quot;: 123,\n        &quot;preis&quot;: 123.0,\n        &quot;artikeldetails&quot;: [{\n                &quot;id&quot;: 4,\n                &quot;artikeldetail&quot;: &quot;DetailNummer 1&quot;,\n                &quot;artikelcustom&quot;: &quot;Detail Nummer 1&quot;,\n                &quot;artikelselektion&quot;: &quot;Detail Nummer 1&quot;\n            }, {\n                &quot;id&quot;: 5,\n                &quot;artikeldetail&quot;: &quot;DetailNummer 2&quot;,\n                &quot;artikelcustom&quot;: &quot;Detail Nummer 2&quot;,\n                &quot;artikelselektion&quot;: &quot;Detail Nummer 2&quot;\n            }, {\n                &quot;id&quot;: 6,\n                &quot;artikeldetail&quot;: &quot;DetailNummer 3&quot;,\n                &quot;artikelcustom&quot;: &quot;DetailNummer 3&quot;,\n                &quot;artikelselektion&quot;: &quot;DetailNummer 3&quot;\n            }\n        ]\n    }\n]\n</code></pre>\n<p>That's fine and working but now I only want to get ONLY the Artikel Data without Join. How should I do that? Must I create a new Class for that?</p>\n<p>I trying also to change this line:</p>\n<pre><code>@Query(value = &quot;SELECT a FROM Artikel a where a.artikelnummer = :artikelnummer&quot;)\nList&lt;Artikel&gt; findByArtikelnummer(@Param(&quot;artikelnummer&quot;) int artikelnummer);\n</code></pre>\n<p>but this is not working.</p>\n"},{"tags":["java","spring","state-machine","spring-statemachine"],"answers":[{"tags":[],"owner":{"account_id":3481319,"reputation":876,"user_id":2913290,"accept_rate":50,"display_name":"Daniel Vilas-Boas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1654042609,"creation_date":1651535814,"answer_id":72093559,"question_id":72092863,"body_markdown":"\r\n1. Event action: This is most the common case, you have StateA and want to move to StateB when EventAB is received. Action will be fired if the machine is on StateA and you submit the EventAB to it. Its possible (and optional) to provide an error action to do personal processing in case exception is throw from regular action\r\n\r\n2. State entry action: Action will be hit every time machine reaches specified states. I&#39;ve seen people using it to provide Initial state custom behavior\r\n\r\n3. Same as above, but this is hit on every state exit\r\n\r\n4. I haven&#39;t used this one, but according to the documentation (snippet below), its similar to state entry (in case you provide single action), but can also work with an error action.\r\n\r\nupdate on this: *I read in the UML specification that state do can also be used for an action that you want to be continuously happening while machine in that state*\r\n\r\n\r\n\r\nThe caveats is that actions can be attached to transitions (i.e from A to B, or from B to A), so it matters the FROM and TO, while actions configured for specific state do not care where it came from, but solely related to state enter/exit\r\n\r\n\r\n    //Specify a state S with state behaviour Action. Currently synonym for state(Object, Action).\r\n    StateConfigurer&lt;S, E&gt; stateDo(S state, Action&lt;S, E&gt; action);\r\n\r\nIn case an entry/transition action fails (and you&#39;re not in a choice pseudo-state), machine stays in the same state (doesn&#39;t move).\r\n\r\nFor your scenario, it depends, is S1 initial state? if that is, you might need a state action. Otherwise, transition action between S1 -&gt; S2 is just fine.\r\n\r\n\r\n\r\n\r\n\r\n","title":"Spring Statemachine State Actions vs Transition actions","body":"<ol>\n<li><p>Event action: This is most the common case, you have StateA and want to move to StateB when EventAB is received. Action will be fired if the machine is on StateA and you submit the EventAB to it. Its possible (and optional) to provide an error action to do personal processing in case exception is throw from regular action</p>\n</li>\n<li><p>State entry action: Action will be hit every time machine reaches specified states. I've seen people using it to provide Initial state custom behavior</p>\n</li>\n<li><p>Same as above, but this is hit on every state exit</p>\n</li>\n<li><p>I haven't used this one, but according to the documentation (snippet below), its similar to state entry (in case you provide single action), but can also work with an error action.</p>\n</li>\n</ol>\n<p>update on this: <em>I read in the UML specification that state do can also be used for an action that you want to be continuously happening while machine in that state</em></p>\n<p>The caveats is that actions can be attached to transitions (i.e from A to B, or from B to A), so it matters the FROM and TO, while actions configured for specific state do not care where it came from, but solely related to state enter/exit</p>\n<pre><code>//Specify a state S with state behaviour Action. Currently synonym for state(Object, Action).\nStateConfigurer&lt;S, E&gt; stateDo(S state, Action&lt;S, E&gt; action);\n</code></pre>\n<p>In case an entry/transition action fails (and you're not in a choice pseudo-state), machine stays in the same state (doesn't move).</p>\n<p>For your scenario, it depends, is S1 initial state? if that is, you might need a state action. Otherwise, transition action between S1 -&gt; S2 is just fine.</p>\n"},{"tags":[],"owner":{"account_id":13955923,"reputation":107,"user_id":10078315,"display_name":"Lucas Favaro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680097408,"creation_date":1680097408,"answer_id":75878067,"question_id":72092863,"body_markdown":"I am starting to learn Spring State Machine and just wanted to add that apparently State actions are not treated the same way as Entry/Exit actions.\r\n\r\nThe following is part of the documentation Reference:\r\n\r\n*State Actions\r\nState actions are run differently compared to entry and exit actions, because execution happens after state has been entered and can be cancelled if state exit happens before a particular action has been completed.*","title":"Spring Statemachine State Actions vs Transition actions","body":"<p>I am starting to learn Spring State Machine and just wanted to add that apparently State actions are not treated the same way as Entry/Exit actions.</p>\n<p>The following is part of the documentation Reference:</p>\n<p><em>State Actions\nState actions are run differently compared to entry and exit actions, because execution happens after state has been entered and can be cancelled if state exit happens before a particular action has been completed.</em></p>\n"}],"owner":{"account_id":25066868,"reputation":23,"user_id":18921092,"display_name":"super2020"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2215,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":72093559,"answer_count":2,"score":2,"last_activity_date":1680097408,"creation_date":1651529109,"question_id":72092863,"body_markdown":"Spring statemachine provides following type of actions. Can someone please explain me which type of action should be used in which scenario? And, If an action fails then does statemachine move to next state or not?\r\n\r\n 1. Event action - Action attached to a transition when an event is generated. \r\n 2. State entry action \r\n 3. State exit action\r\n 4. State DoAction\r\n\r\nMy scenario is that when statemachine comes in S1 state it needs to perform some operation and if its successful then only go into S2. Should it be state action or event action?\r\n\r\nS1---&gt;S2","title":"Spring Statemachine State Actions vs Transition actions","body":"<p>Spring statemachine provides following type of actions. Can someone please explain me which type of action should be used in which scenario? And, If an action fails then does statemachine move to next state or not?</p>\n<ol>\n<li>Event action - Action attached to a transition when an event is generated.</li>\n<li>State entry action</li>\n<li>State exit action</li>\n<li>State DoAction</li>\n</ol>\n<p>My scenario is that when statemachine comes in S1 state it needs to perform some operation and if its successful then only go into S2. Should it be state action or event action?</p>\n<p>S1---&gt;S2</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":11719268,"reputation":1687,"user_id":8578684,"display_name":"snap"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1680097352,"creation_date":1680097352,"answer_id":75878055,"question_id":74006627,"body_markdown":"On java 17 there are some higher restrictions for some internal modules.\r\n\r\nI&#39;m not sure if you have this issue on the implementation code or &quot;just&quot; for testing. From my experience this issue is more common for the tests because most mocking frameworks will break the restrictions...\r\n\r\nHowever you have to give in these parameters \r\n\r\n```\r\n--add-opens=java.base/java.lang=ALL-UNNAMED\r\n--add-opens=java.base/java.util=ALL-UNNAMED\r\n```\r\n\r\nIf you need this for unit testing you and using maven then you could use a configuration like this:\r\n\r\n```\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;argLine&gt;\r\n                        --add-opens=java.base/java.lang=ALL-UNNAMED\r\n                        --add-opens=java.base/java.util=ALL-UNNAMED\r\n                    &lt;/argLine&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n```","title":"Module java.base does not &quot;opens java.lang&quot; (Java 17.0.4.1)","body":"<p>On java 17 there are some higher restrictions for some internal modules.</p>\n<p>I'm not sure if you have this issue on the implementation code or &quot;just&quot; for testing. From my experience this issue is more common for the tests because most mocking frameworks will break the restrictions...</p>\n<p>However you have to give in these parameters</p>\n<pre><code>--add-opens=java.base/java.lang=ALL-UNNAMED\n--add-opens=java.base/java.util=ALL-UNNAMED\n</code></pre>\n<p>If you need this for unit testing you and using maven then you could use a configuration like this:</p>\n<pre><code>    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.0.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;argLine&gt;\n                        --add-opens=java.base/java.lang=ALL-UNNAMED\n                        --add-opens=java.base/java.util=ALL-UNNAMED\n                    &lt;/argLine&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n"}],"owner":{"account_id":20559325,"reputation":65,"user_id":15090166,"display_name":"SunnyVN"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5029,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":75878055,"answer_count":1,"score":6,"last_activity_date":1680097352,"creation_date":1665333928,"question_id":74006627,"body_markdown":"Here&#39;s the error:\r\n```Caused by: java.lang.reflect.InaccessibleObjectException: Unable to make protected java.lang.ClassLoader() accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @75dcbabb```\r\n\r\nAlso, I&#39;m using maven to compile. Thank you for reading this thread! Hope you can help me out with this!","title":"Module java.base does not &quot;opens java.lang&quot; (Java 17.0.4.1)","body":"<p>Here's the error:\n<code>Caused by: java.lang.reflect.InaccessibleObjectException: Unable to make protected java.lang.ClassLoader() accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @75dcbabb</code></p>\n<p>Also, I'm using maven to compile. Thank you for reading this thread! Hope you can help me out with this!</p>\n"},{"tags":["java","loops","for-loop","iteration"],"comments":[{"owner":{"account_id":196869,"reputation":402535,"user_id":440558,"accept_rate":75,"display_name":"Some programmer dude"},"score":1,"creation_date":1680093376,"post_id":75877245,"comment_id":133838151,"body_markdown":"I suggest you divide the task into smaller parts. First create a program that write the correct number of lines. Hard-code output of `&quot;1&quot;` on each line. Then inside the loop to print the lines, add the counting of the numbers. Then, as a separate loop after the numbers, add the asterisks.","body":"I suggest you divide the task into smaller parts. First create a program that write the correct number of lines. Hard-code output of <code>&quot;1&quot;</code> on each line. Then inside the loop to print the lines, add the counting of the numbers. Then, as a separate loop after the numbers, add the asterisks."}],"answers":[{"tags":[],"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680093822,"creation_date":1680093822,"answer_id":75877395,"question_id":75877245,"body_markdown":"Much like `System.out.print(k + &quot; &quot;);` you can use `System.out.print(&quot;*&quot;);` to print an asterisk. It isn&#39;t clear why you would try `for(int j = 1; j &lt;= 1; j++) {`, that will only run once (so it isn&#39;t really a loop). You need a second inner loop, not another level of nesting. Like,\r\n\r\n\tScanner scanner = new Scanner(System.in);\r\n\tSystem.out.println(&quot;Enter your number&quot;);\r\n\tint num = scanner.nextInt();\r\n\tfor (int i = 0; i &lt; num; i++) {\r\n\t\tfor (int j = 0; j &lt; i + 1; j++) { // From 0 to i + 1 the #\r\n\t\t\tSystem.out.print(j + 1);\r\n\t\t}\r\n\t\tfor (int j = i + 1; j &lt; num; j++) { // From i + 1 to num a *\r\n\t\t\tSystem.out.print(&quot;*&quot;);\r\n\t\t}\r\n\t\tSystem.out.println();\r\n\t}\r\n\r\nOutputs (as requested)\r\n\r\n    Enter your number\r\n    7\r\n    1******\r\n    12*****\r\n    123****\r\n    1234***\r\n    12345**\r\n    123456*\r\n    1234567\r\n\r\n","title":"How to put asterisks on for looping","body":"<p>Much like <code>System.out.print(k + &quot; &quot;);</code> you can use <code>System.out.print(&quot;*&quot;);</code> to print an asterisk. It isn't clear why you would try <code>for(int j = 1; j &lt;= 1; j++) {</code>, that will only run once (so it isn't really a loop). You need a second inner loop, not another level of nesting. Like,</p>\n<pre><code>Scanner scanner = new Scanner(System.in);\nSystem.out.println(&quot;Enter your number&quot;);\nint num = scanner.nextInt();\nfor (int i = 0; i &lt; num; i++) {\n    for (int j = 0; j &lt; i + 1; j++) { // From 0 to i + 1 the #\n        System.out.print(j + 1);\n    }\n    for (int j = i + 1; j &lt; num; j++) { // From i + 1 to num a *\n        System.out.print(&quot;*&quot;);\n    }\n    System.out.println();\n}\n</code></pre>\n<p>Outputs (as requested)</p>\n<pre><code>Enter your number\n7\n1******\n12*****\n123****\n1234***\n12345**\n123456*\n1234567\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26489707,"reputation":64,"user_id":20127794,"display_name":"Digvijaysinh chauhan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680094703,"creation_date":1680094703,"answer_id":75877563,"question_id":75877245,"body_markdown":"Try this :\r\n\r\n    public class Simple{\r\n    public static void main(String args[]){\r\n    int i, j,number,n=7;   \r\n    for(i=0; i&lt;n; i++) {   \r\n       number=1;   \r\n       for(j=0; j&lt;=i; j++)  {   \r\n          System.out.print(number+ &quot; &quot;);   \r\n          number++;   \r\n       }   \r\n       for(j=i+1; j&lt;n; j++){\r\n            System.out.print(&quot;*&quot;);\r\n        }\r\n       System.out.println();  \r\n    }\r\n    }}\r\n\r\n","title":"How to put asterisks on for looping","body":"<p>Try this :</p>\n<pre><code>public class Simple{\npublic static void main(String args[]){\nint i, j,number,n=7;   \nfor(i=0; i&lt;n; i++) {   \n   number=1;   \n   for(j=0; j&lt;=i; j++)  {   \n      System.out.print(number+ &quot; &quot;);   \n      number++;   \n   }   \n   for(j=i+1; j&lt;n; j++){\n        System.out.print(&quot;*&quot;);\n    }\n   System.out.println();  \n}\n}}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680095728,"creation_date":1680095728,"answer_id":75877769,"question_id":75877245,"body_markdown":"Another take on it using a single `for` loop:\r\n\r\n**Using simple string concatenation:**\r\n\r\n    Scanner userInput = new Scanner(System.in);\r\n        \r\n    System.out.println(&quot;Enter your number&quot;);\r\n    int num = userInput.nextInt();\r\n        \r\n    // Using String Concatenation\r\n    String numSet = &quot;&quot;;\r\n    for (int i = 1; i &lt;= num; i++) {\r\n        numSet += String.valueOf(i);\r\n        System.out.println(numSet + String.join(&quot;&quot;, java.util.Collections.nCopies(num-i, &quot;*&quot;)));\r\n    }\r\n\r\n**Or by using the StringBuilder class:**\r\n    \r\n    Scanner userInput = new Scanner(System.in);\r\n        \r\n    System.out.println(&quot;Enter your number&quot;);\r\n    int num = userInput.nextInt();\r\n    \r\n    // Using StringBuilder:\r\n    StringBuilder numberSet = new StringBuilder(&quot;&quot;);\r\n    StringBuilder overAll = new StringBuilder(&quot;&quot;);\r\n    for (int i = 1; i &lt;= num; i++) {\r\n        numberSet.append(i);\r\n        overAll.append(numberSet.toString())\r\n                   .append(String.join(&quot;&quot;, java.util.Collections.nCopies(num-i, &quot;*&quot;)))\r\n                   .append(System.lineSeparator());\r\n    }\r\n    \r\n    System.out.println(overAll.toString());","title":"How to put asterisks on for looping","body":"<p>Another take on it using a single <code>for</code> loop:</p>\n<p><strong>Using simple string concatenation:</strong></p>\n<pre><code>Scanner userInput = new Scanner(System.in);\n    \nSystem.out.println(&quot;Enter your number&quot;);\nint num = userInput.nextInt();\n    \n// Using String Concatenation\nString numSet = &quot;&quot;;\nfor (int i = 1; i &lt;= num; i++) {\n    numSet += String.valueOf(i);\n    System.out.println(numSet + String.join(&quot;&quot;, java.util.Collections.nCopies(num-i, &quot;*&quot;)));\n}\n</code></pre>\n<p><strong>Or by using the StringBuilder class:</strong></p>\n<pre><code>Scanner userInput = new Scanner(System.in);\n    \nSystem.out.println(&quot;Enter your number&quot;);\nint num = userInput.nextInt();\n\n// Using StringBuilder:\nStringBuilder numberSet = new StringBuilder(&quot;&quot;);\nStringBuilder overAll = new StringBuilder(&quot;&quot;);\nfor (int i = 1; i &lt;= num; i++) {\n    numberSet.append(i);\n    overAll.append(numberSet.toString())\n               .append(String.join(&quot;&quot;, java.util.Collections.nCopies(num-i, &quot;*&quot;)))\n               .append(System.lineSeparator());\n}\n\nSystem.out.println(overAll.toString());\n</code></pre>\n"}],"owner":{"account_id":27980209,"reputation":1,"user_id":21368092,"display_name":"pishuu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1680097159,"creation_date":1680093100,"question_id":75877245,"body_markdown":"```\r\n  System.out.println(&quot;Enter your number&quot;);\r\n    int num = scanner.nextInt();\r\n    \r\n    int count = 1; \r\n    for(int i = 1; i &lt;= num; i++) { \r\n    for(int j = 1; j &lt;= 1; j++) { \r\n    for(int k = 1; k &lt;= count; k++) {\r\nSystem.out.print(k + &quot; &quot;); \r\n}\r\nSystem.out.println(); \r\ncount++;\r\n```\r\n\r\nthis is what i need to have but i cant seem to put the asterisk\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/EOqsb.png","title":"How to put asterisks on for looping","body":"<pre><code>  System.out.println(&quot;Enter your number&quot;);\n    int num = scanner.nextInt();\n    \n    int count = 1; \n    for(int i = 1; i &lt;= num; i++) { \n    for(int j = 1; j &lt;= 1; j++) { \n    for(int k = 1; k &lt;= count; k++) {\nSystem.out.print(k + &quot; &quot;); \n}\nSystem.out.println(); \ncount++;\n</code></pre>\n<p>this is what i need to have but i cant seem to put the asterisk</p>\n<p><a href=\"https://i.stack.imgur.com/EOqsb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EOqsb.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","junit","java-io"],"comments":[{"owner":{"account_id":22577442,"reputation":758,"user_id":16775102,"display_name":"Feel free"},"score":0,"creation_date":1680097584,"post_id":75877973,"comment_id":133839511,"body_markdown":"Try:\n\n    InputStream is = ReplaceDocumentTest.class.getResourceAsStream(&quot;/expected/file.json&quot;);\n\nBut better way to use it is:\nClassLoader classloader = Thread.currentThread().getContextClassLoader();\nInputStream is = classloader.getResourceAsStream(&quot;/expected/file.json&quot;);","body":"Try:      InputStream is = ReplaceDocumentTest.class.getResourceAsStream(&quot;/expected/fil&zwnj;&#8203;e.json&quot;);  But better way to use it is: ClassLoader classloader = Thread.currentThread().getContextClassLoader(); InputStream is = classloader.getResourceAsStream(&quot;/expected/file.json&quot;);"},{"owner":{"account_id":5954804,"reputation":67,"user_id":4681813,"display_name":"Vayas Zsolt Marton"},"score":0,"creation_date":1680097956,"post_id":75877973,"comment_id":133839631,"body_markdown":"@Tryingmybest Your suggestion gets the reference to the file inside the target folder. I need the file reference from src folder. I need this reference because I would like to override the file.","body":"@Tryingmybest Your suggestion gets the reference to the file inside the target folder. I need the file reference from src folder. I need this reference because I would like to override the file."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1680098675,"post_id":75877973,"comment_id":133839850,"body_markdown":"not sure what is meant by &quot;override the file&quot;, but `ClassLoader` (or `getResource`) will only be able to get files that are on the CLASSPATH - maybe you must use `File` or `Path` (and usually there is something wrong if needing to access files from the source folder)","body":"not sure what is meant by &quot;override the file&quot;, but <code>ClassLoader</code> (or <code>getResource</code>) will only be able to get files that are on the CLASSPATH - maybe you must use <code>File</code> or <code>Path</code> (and usually there is something wrong if needing to access files from the source folder)"},{"owner":{"account_id":5954804,"reputation":67,"user_id":4681813,"display_name":"Vayas Zsolt Marton"},"score":0,"creation_date":1680098962,"post_id":75877973,"comment_id":133839947,"body_markdown":"@user16320675 I want to regenerate the expected files that are used in other unit tests. I want to regenerate these expected file without any manual interaction: like copy manually the new version of expected files to the resources folder.","body":"@user16320675 I want to regenerate the expected files that are used in other unit tests. I want to regenerate these expected file without any manual interaction: like copy manually the new version of expected files to the resources folder."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1680123240,"post_id":75877973,"comment_id":133846312,"body_markdown":"You can’t.  A compiled application does not have a source directory.  Even if you get it to work on your computer, it will not work anywhere else, because most people won’t have access to the source.  The best you can do is look for a file with the same name in a known location, like the current user’s home directory, and if that exists, use it instead of the bundled resource.","body":"You can’t.  A compiled application does not have a source directory.  Even if you get it to work on your computer, it will not work anywhere else, because most people won’t have access to the source.  The best you can do is look for a file with the same name in a known location, like the current user’s home directory, and if that exists, use it instead of the bundled resource."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1680125663,"post_id":75877973,"comment_id":133846836,"body_markdown":"But if it’s just for the purposes of running tests, usually the source code is available in that case. You’ll just need to use a file system path, as @user16320675 said above.","body":"But if it’s just for the purposes of running tests, usually the source code is available in that case. You’ll just need to use a file system path, as @user16320675 said above."}],"owner":{"account_id":5954804,"reputation":67,"user_id":4681813,"display_name":"Vayas Zsolt Marton"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680096844,"creation_date":1680096844,"question_id":75877973,"body_markdown":"I would like to replace the original resource file inside a unit test. Exactly I want to regenerate some expected test results using a unit test. \r\n\r\nI have issue how I can load the file outside of my target folder. I have the following structure (simplify version):\r\n\r\n - src\r\n    - main\r\n    - test\r\n       - resources \r\n           - expected\r\n              - file.json\r\n - target\r\n    - test-classes\r\n        - expected\r\n           - file.json\r\n\r\nI want to access and replace the &#39;src/test/resources/expected/file.json&#39; file from the above structure.\r\n\r\nThe following line access the file from the target folder:\r\n```\r\n    ReplaceDocumentTest.class.getResource(&quot;/expected/file.json&quot;);\r\n```\r\n\r\nI tried to go upper with the relative path but it didn&#39;t work.\r\n```\r\n    ReplaceDocumentTest.class.getResource(&quot;/../../src/test/resources/expected/file.json&quot;);\r\n```\r\n\r\nHow can I obtain a reference to the file.json inside the &#39;src&#39; folder?\r\n   \r\n\r\n","title":"Java get a reference to file from src folder","body":"<p>I would like to replace the original resource file inside a unit test. Exactly I want to regenerate some expected test results using a unit test.</p>\n<p>I have issue how I can load the file outside of my target folder. I have the following structure (simplify version):</p>\n<ul>\n<li>src\n<ul>\n<li>main</li>\n<li>test\n<ul>\n<li>resources\n<ul>\n<li>expected\n<ul>\n<li>file.json</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>target\n<ul>\n<li>test-classes\n<ul>\n<li>expected\n<ul>\n<li>file.json</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>I want to access and replace the 'src/test/resources/expected/file.json' file from the above structure.</p>\n<p>The following line access the file from the target folder:</p>\n<pre><code>    ReplaceDocumentTest.class.getResource(&quot;/expected/file.json&quot;);\n</code></pre>\n<p>I tried to go upper with the relative path but it didn't work.</p>\n<pre><code>    ReplaceDocumentTest.class.getResource(&quot;/../../src/test/resources/expected/file.json&quot;);\n</code></pre>\n<p>How can I obtain a reference to the file.json inside the 'src' folder?</p>\n"},{"tags":["java","spring-boot","eclipse","ssl-certificate","spring-tool-suite"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1680102304,"post_id":75875041,"comment_id":133841066,"body_markdown":"Are you behind a proxy? Is this a dialog from the Spring Tools plugin? If yes, which version of the Spring Tools plugin?","body":"Are you behind a proxy? Is this a dialog from the Spring Tools plugin? If yes, which version of the Spring Tools plugin?"},{"owner":{"account_id":2082386,"reputation":6063,"user_id":1854124,"display_name":"Martin Lippert"},"score":0,"creation_date":1680162152,"post_id":75875041,"comment_id":133851917,"body_markdown":"Looks like either a temporary network glitch or a proxy server in between that causes trouble.","body":"Looks like either a temporary network glitch or a proxy server in between that causes trouble."}],"owner":{"account_id":11088239,"reputation":49,"user_id":8141117,"accept_rate":33,"display_name":"Suryakala"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":159,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680096835,"creation_date":1680079955,"question_id":75875041,"body_markdown":"I don&#39;t have eclipse installed in my machine. But java installed of version 11 and set the path variables.[![enter image description here][1]][1]. Added image. Kindly help to resolve this\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xUnHR.png","title":"EOFException: SSL peer shut down incorrectly in spring boot ( while creating New Spring Starter Project)","body":"<p>I don't have eclipse installed in my machine. But java installed of version 11 and set the path variables.<a href=\"https://i.stack.imgur.com/xUnHR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xUnHR.png\" alt=\"enter image description here\" /></a>. Added image. Kindly help to resolve this</p>\n"},{"tags":["java","mysql","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1680098152,"post_id":75877970,"comment_id":133839685,"body_markdown":"20 connections for 500 users is probably to low. I would also decrease the connection timeout (you don&#39;t want to wait 50seconds before you get an error). If you don&#39;t get leaks detected (at least make sure you don&#39;t leak connections check if you are messing around with Connections yourself). Increase the max poolside to start with.","body":"20 connections for 500 users is probably to low. I would also decrease the connection timeout (you don&#39;t want to wait 50seconds before you get an error). If you don&#39;t get leaks detected (at least make sure you don&#39;t leak connections check if you are messing around with Connections yourself). Increase the max poolside to start with."},{"owner":{"account_id":27419303,"reputation":83,"user_id":20918006,"display_name":"Sard"},"score":0,"creation_date":1680099726,"post_id":75877970,"comment_id":133840194,"body_markdown":"@M.Deinum is `maximumPoolSize=50` enough for 500 users?","body":"@M.Deinum is <code>maximumPoolSize=50</code> enough for 500 users?"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":2,"creation_date":1680101901,"post_id":75877970,"comment_id":133840950,"body_markdown":"2 connections can be enough for 500 users - it all depends on what those users are doing and how your application is configured. If you are setup to actively hold a connection for a transaction (Spring does this excessively IMO), and hold onto that transaction for long periods and even for read-only operations, then it won&#39;t be enough. What will be though is something you&#39;ll have to figure out from performance tuning your application. Most don&#39;t want to go with a 1:1 ratio as that is quite a bit, so you&#39;ll balance the time your users can spend waiting for a connection to figure it out","body":"2 connections can be enough for 500 users - it all depends on what those users are doing and how your application is configured. If you are setup to actively hold a connection for a transaction (Spring does this excessively IMO), and hold onto that transaction for long periods and even for read-only operations, then it won&#39;t be enough. What will be though is something you&#39;ll have to figure out from performance tuning your application. Most don&#39;t want to go with a 1:1 ratio as that is quite a bit, so you&#39;ll balance the time your users can spend waiting for a connection to figure it out"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1680112106,"post_id":75877970,"comment_id":133843714,"body_markdown":"As mentioned how many connections you need, depends on your usecase. The only way to determine that is to measure and make sure you don&#39;t have any connection leaks.","body":"As mentioned how many connections you need, depends on your usecase. The only way to determine that is to measure and make sure you don&#39;t have any connection leaks."}],"owner":{"account_id":27419303,"reputation":83,"user_id":20918006,"display_name":"Sard"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3809,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680096813,"creation_date":1680096813,"question_id":75877970,"body_markdown":"For 500 users concurrent request and save there data, \r\nWe are having 3 or 4 error  users about &#39;Unable to acquire JDBC Connection&#39; only for 500 users concurrently.\r\n\r\nIs there a way to fix this?. since if we test again still same for 500 users concurrently having 3 or 4 error\r\n\r\nHave update the maximumPoolSize 10 to 20 then add minimumIdle,idleTimeout,connectionTimeout,leakDetectionThreshold but still same.\r\n\r\nhikari properties\r\n```\r\nspring.datasource.hikari.maximumPoolSize=20\r\nspring.datasource.hikari.minimumIdle=10\r\nspring.datasource.hikari.idleTimeout=30000\r\nspring.datasource.hikari.connectionTimeout=50000\r\nspring.datasource.hikari.leakDetectionThreshold=60000\r\n```\r\nHikari log\r\n```\r\nTimeout failure stats (total=20, active=20, idle=0, waiting=179)\r\n```\r\nError message\r\n```\r\nServlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection] with root cause\r\n```","title":"Spring boot Unable to acquire JDBC Connection","body":"<p>For 500 users concurrent request and save there data,\nWe are having 3 or 4 error  users about 'Unable to acquire JDBC Connection' only for 500 users concurrently.</p>\n<p>Is there a way to fix this?. since if we test again still same for 500 users concurrently having 3 or 4 error</p>\n<p>Have update the maximumPoolSize 10 to 20 then add minimumIdle,idleTimeout,connectionTimeout,leakDetectionThreshold but still same.</p>\n<p>hikari properties</p>\n<pre><code>spring.datasource.hikari.maximumPoolSize=20\nspring.datasource.hikari.minimumIdle=10\nspring.datasource.hikari.idleTimeout=30000\nspring.datasource.hikari.connectionTimeout=50000\nspring.datasource.hikari.leakDetectionThreshold=60000\n</code></pre>\n<p>Hikari log</p>\n<pre><code>Timeout failure stats (total=20, active=20, idle=0, waiting=179)\n</code></pre>\n<p>Error message</p>\n<pre><code>Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection] with root cause\n</code></pre>\n"},{"tags":["java","swing","jfilechooser"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1680100300,"post_id":75877157,"comment_id":133840390,"body_markdown":"what have you tried? [mcve] please ..","body":"what have you tried? <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please .."}],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1680096380,"creation_date":1680093452,"answer_id":75877327,"question_id":75877157,"body_markdown":"A custom [`FileSystemView`][1] can be used to tweak what the user can see and where they can navigate. For example, this is a simple implementation that pretends that the passed-in directory is the root (and home) directory and has no parent (note that the majority of the methods just delegate to the system file system view):\r\n\r\n```\r\npublic class RestrictedFileSystemView extends FileSystemView {\r\n  private final FileSystemView delegate;\r\n  private final File baseDirectory;\r\n\r\n  RestrictedFileSystemView(File baseDirectory) {\r\n    this.baseDirectory = baseDirectory;\r\n    this.delegate = FileSystemView.getFileSystemView();\r\n  }\r\n\r\n\r\n  @Override\r\n  public File[] getRoots() {\r\n    return new File[] { baseDirectory };\r\n  }\r\n\r\n  @Override\r\n  public File getHomeDirectory() {\r\n    return baseDirectory;\r\n  }\r\n\r\n  @Override\r\n  public File getDefaultDirectory() {\r\n    return baseDirectory;\r\n  }\r\n\r\n  @Override\r\n  public File getParentDirectory(File dir) {\r\n    if (dir.equals(baseDirectory)) {\r\n      return null;\r\n    }\r\n    return delegate.getParentDirectory(dir);\r\n  }\r\n\r\n  @Override\r\n  public boolean isRoot(File f) {\r\n    return f.equals(baseDirectory);\r\n  }\r\n\r\n  // all methods below here just delegate\r\n  \r\n  @Override\r\n  public Boolean isTraversable(File f) {\r\n    return delegate.isTraversable(f);\r\n  }\r\n\r\n  @Override\r\n  public String getSystemDisplayName(File f) {\r\n    return delegate.getSystemDisplayName(f);\r\n  }\r\n\r\n  @Override\r\n  public String getSystemTypeDescription(File f) {\r\n    return delegate.getSystemTypeDescription(f);\r\n  }\r\n\r\n  @Override\r\n  public Icon getSystemIcon(File f) {\r\n    return delegate.getSystemIcon(f);\r\n  }\r\n\r\n  @Override\r\n  public Icon getSystemIcon(File f, int width, int height) {\r\n    return delegate.getSystemIcon(f, width, height);\r\n  }\r\n\r\n  @Override\r\n  public boolean isParent(File folder, File file) {\r\n    return delegate.isParent(folder, file);\r\n  }\r\n\r\n  @Override\r\n  public File getChild(File parent, String fileName) {\r\n    return delegate.getChild(parent, fileName);\r\n  }\r\n\r\n  @Override\r\n  public boolean isFileSystem(File f) {\r\n    return delegate.isFileSystem(f);\r\n  }\r\n\r\n  @Override\r\n  public boolean isHiddenFile(File f) {\r\n    return delegate.isHiddenFile(f);\r\n  }\r\n\r\n  @Override\r\n  public boolean isFileSystemRoot(File dir) {\r\n    return delegate.isFileSystemRoot(dir);\r\n  }\r\n\r\n  @Override\r\n  public boolean isDrive(File dir) {\r\n    return delegate.isDrive(dir);\r\n  }\r\n\r\n  @Override\r\n  public boolean isFloppyDrive(File dir) {\r\n    return delegate.isFloppyDrive(dir);\r\n  }\r\n\r\n  @Override\r\n  public boolean isComputerNode(File dir) {\r\n    return delegate.isComputerNode(dir);\r\n  }\r\n\r\n  @Override\r\n  public File createFileObject(File dir, String filename) {\r\n    return delegate.createFileObject(dir, filename);\r\n  }\r\n\r\n  @Override\r\n  public File createFileObject(String path) {\r\n    return delegate.createFileObject(path);\r\n  }\r\n\r\n  @Override\r\n  public File[] getFiles(File dir, boolean useFileHiding) {\r\n    return delegate.getFiles(dir, useFileHiding);\r\n  }\r\n\r\n  @Override\r\n  public File[] getChooserComboBoxFiles() {\r\n    return delegate.getChooserComboBoxFiles();\r\n  }\r\n\r\n  @Override\r\n  public boolean isLink(File file) {\r\n    return delegate.isLink(file);\r\n  }\r\n\r\n  @Override\r\n  public File getLinkLocation(File file) throws FileNotFoundException {\r\n    return delegate.getLinkLocation(file);\r\n  }\r\n\r\n  @Override\r\n  public File createNewFolder(File containingDir) throws IOException {\r\n    return delegate.createNewFolder(containingDir);\r\n  }\r\n}\r\n```\r\n\r\n(Only tested quickly on Linux, other OS might require additional changes to some overrides).\r\n\r\nNote that you can further restrict what directories the user can visit by overriding `isTraversable()` and even restrict what they see by overriding `getFiles()`.\r\n\r\nYou can use this custom file system view in your `JFileChooser` like this:\r\n\r\n    FileSystemView fsv = new RestrictedFileSystemView(someBaseDirectory);\r\n    JFileChooser jfc = new JFileChooser(fsv);\r\n    jfc.showOpenDialog(parentComponent);\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/filechooser/FileSystemView.html","title":"Java JFileChooser - I can choose a .txt only in a directory i set","body":"<p>A custom <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/filechooser/FileSystemView.html\" rel=\"nofollow noreferrer\"><code>FileSystemView</code></a> can be used to tweak what the user can see and where they can navigate. For example, this is a simple implementation that pretends that the passed-in directory is the root (and home) directory and has no parent (note that the majority of the methods just delegate to the system file system view):</p>\n<pre><code>public class RestrictedFileSystemView extends FileSystemView {\n  private final FileSystemView delegate;\n  private final File baseDirectory;\n\n  RestrictedFileSystemView(File baseDirectory) {\n    this.baseDirectory = baseDirectory;\n    this.delegate = FileSystemView.getFileSystemView();\n  }\n\n\n  @Override\n  public File[] getRoots() {\n    return new File[] { baseDirectory };\n  }\n\n  @Override\n  public File getHomeDirectory() {\n    return baseDirectory;\n  }\n\n  @Override\n  public File getDefaultDirectory() {\n    return baseDirectory;\n  }\n\n  @Override\n  public File getParentDirectory(File dir) {\n    if (dir.equals(baseDirectory)) {\n      return null;\n    }\n    return delegate.getParentDirectory(dir);\n  }\n\n  @Override\n  public boolean isRoot(File f) {\n    return f.equals(baseDirectory);\n  }\n\n  // all methods below here just delegate\n  \n  @Override\n  public Boolean isTraversable(File f) {\n    return delegate.isTraversable(f);\n  }\n\n  @Override\n  public String getSystemDisplayName(File f) {\n    return delegate.getSystemDisplayName(f);\n  }\n\n  @Override\n  public String getSystemTypeDescription(File f) {\n    return delegate.getSystemTypeDescription(f);\n  }\n\n  @Override\n  public Icon getSystemIcon(File f) {\n    return delegate.getSystemIcon(f);\n  }\n\n  @Override\n  public Icon getSystemIcon(File f, int width, int height) {\n    return delegate.getSystemIcon(f, width, height);\n  }\n\n  @Override\n  public boolean isParent(File folder, File file) {\n    return delegate.isParent(folder, file);\n  }\n\n  @Override\n  public File getChild(File parent, String fileName) {\n    return delegate.getChild(parent, fileName);\n  }\n\n  @Override\n  public boolean isFileSystem(File f) {\n    return delegate.isFileSystem(f);\n  }\n\n  @Override\n  public boolean isHiddenFile(File f) {\n    return delegate.isHiddenFile(f);\n  }\n\n  @Override\n  public boolean isFileSystemRoot(File dir) {\n    return delegate.isFileSystemRoot(dir);\n  }\n\n  @Override\n  public boolean isDrive(File dir) {\n    return delegate.isDrive(dir);\n  }\n\n  @Override\n  public boolean isFloppyDrive(File dir) {\n    return delegate.isFloppyDrive(dir);\n  }\n\n  @Override\n  public boolean isComputerNode(File dir) {\n    return delegate.isComputerNode(dir);\n  }\n\n  @Override\n  public File createFileObject(File dir, String filename) {\n    return delegate.createFileObject(dir, filename);\n  }\n\n  @Override\n  public File createFileObject(String path) {\n    return delegate.createFileObject(path);\n  }\n\n  @Override\n  public File[] getFiles(File dir, boolean useFileHiding) {\n    return delegate.getFiles(dir, useFileHiding);\n  }\n\n  @Override\n  public File[] getChooserComboBoxFiles() {\n    return delegate.getChooserComboBoxFiles();\n  }\n\n  @Override\n  public boolean isLink(File file) {\n    return delegate.isLink(file);\n  }\n\n  @Override\n  public File getLinkLocation(File file) throws FileNotFoundException {\n    return delegate.getLinkLocation(file);\n  }\n\n  @Override\n  public File createNewFolder(File containingDir) throws IOException {\n    return delegate.createNewFolder(containingDir);\n  }\n}\n</code></pre>\n<p>(Only tested quickly on Linux, other OS might require additional changes to some overrides).</p>\n<p>Note that you can further restrict what directories the user can visit by overriding <code>isTraversable()</code> and even restrict what they see by overriding <code>getFiles()</code>.</p>\n<p>You can use this custom file system view in your <code>JFileChooser</code> like this:</p>\n<pre><code>FileSystemView fsv = new RestrictedFileSystemView(someBaseDirectory);\nJFileChooser jfc = new JFileChooser(fsv);\njfc.showOpenDialog(parentComponent);\n</code></pre>\n"}],"owner":{"account_id":28158086,"reputation":1,"user_id":21518506,"display_name":"Tiago Martins"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1680096380,"creation_date":1680092561,"question_id":75877157,"body_markdown":"Hi im working in a java project and i wanted to create a JFileChooser which i have but i want to choose only in one directory like i have the directory called &quot;Saves&quot; and i want the person who open the JFileChooser can only access txt inside the directory call &quot;Saves&quot;. They cant acess anything else only the directory i set. \r\n\r\n[I wanted to only access txt and cant acess neither another directorys neither other paths](https://i.stack.imgur.com/YfamM.png)\r\n\r\nI researched a lot but i couldn&#39;t find anything. If you know about something else like another choose please help me! Thank you.","title":"Java JFileChooser - I can choose a .txt only in a directory i set","body":"<p>Hi im working in a java project and i wanted to create a JFileChooser which i have but i want to choose only in one directory like i have the directory called &quot;Saves&quot; and i want the person who open the JFileChooser can only access txt inside the directory call &quot;Saves&quot;. They cant acess anything else only the directory i set.</p>\n<p><a href=\"https://i.stack.imgur.com/YfamM.png\" rel=\"nofollow noreferrer\">I wanted to only access txt and cant acess neither another directorys neither other paths</a></p>\n<p>I researched a lot but i couldn't find anything. If you know about something else like another choose please help me! Thank you.</p>\n"},{"tags":["java","java-stream","vert.x"],"comments":[{"owner":{"account_id":5191510,"reputation":1415,"user_id":4154302,"display_name":"Asad Awadia"},"score":0,"creation_date":1681177474,"post_id":75877621,"comment_id":134011017,"body_markdown":"you should map the list of json objects to Purchase class pojo and call the same code","body":"you should map the list of json objects to Purchase class pojo and call the same code"},{"owner":{"account_id":4414289,"reputation":191,"user_id":3596329,"display_name":"SandeepVBende"},"score":0,"creation_date":1682623229,"post_id":75877621,"comment_id":134249270,"body_markdown":"There is no purchase class here. I want to deal with jsonObject.","body":"There is no purchase class here. I want to deal with jsonObject."}],"answers":[{"tags":[],"owner":{"account_id":2446461,"reputation":8725,"user_id":2133695,"display_name":"tsegismont"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680096062,"creation_date":1680096062,"answer_id":75877838,"question_id":75877621,"body_markdown":"If `purchases` is a `List` of `JsonObject`:\r\n\r\n    Map&lt;Integer, Double&gt; monthlySumOfPurchases = purchases\r\n                    .stream()\r\n                    .collect(Collectors.groupingBy(\r\n                            json-&gt; json.getInteger(&quot;month_field&quot;), \r\n                            Collectors.summingDouble(json -&gt; json.getDouble(&quot;price_field))));\r\n\r\nOf course, the fields in the JSON objects might have different names.","title":"How to access values of JsonObject inside collect operator","body":"<p>If <code>purchases</code> is a <code>List</code> of <code>JsonObject</code>:</p>\n<pre><code>Map&lt;Integer, Double&gt; monthlySumOfPurchases = purchases\n                .stream()\n                .collect(Collectors.groupingBy(\n                        json-&gt; json.getInteger(&quot;month_field&quot;), \n                        Collectors.summingDouble(json -&gt; json.getDouble(&quot;price_field))));\n</code></pre>\n<p>Of course, the fields in the JSON objects might have different names.</p>\n"},{"tags":[],"owner":{"account_id":28133750,"reputation":101,"user_id":21497826,"display_name":"himanshu-pandey"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1680096362,"creation_date":1680096362,"answer_id":75877889,"question_id":75877621,"body_markdown":"**Approach 1**\r\n\r\nThe simplest thing you can do is to **first convert each of those JSONObject to instances of Purchase** and then your collector remains same.\r\n\r\n**Approach 2**\r\n\r\nAs an alternative you can also try something like this:\r\n```\r\nMap&lt;Month, Double&gt; monthlySumOfPurchases = purchases\r\n                .stream()\r\n                .collect(Collectors.groupingBy(jsonObject-&gt;\r\n                        jsonObject.getInteger(&quot;month_instant&quot;), \r\nCollectors.summingDouble(jsonObj -&gt; jsonObj.getDouble(&quot;price&quot;))));\r\n```\r\n\r\nI have assumed here your month_instant and price to be Integer and Double respectively due to lack of that information in question. However, you can modify them according to your own data.\r\n\r\nYou can try both these approaches. However, the first approach is simpler and more straightforward to implement.","title":"How to access values of JsonObject inside collect operator","body":"<p><strong>Approach 1</strong></p>\n<p>The simplest thing you can do is to <strong>first convert each of those JSONObject to instances of Purchase</strong> and then your collector remains same.</p>\n<p><strong>Approach 2</strong></p>\n<p>As an alternative you can also try something like this:</p>\n<pre><code>Map&lt;Month, Double&gt; monthlySumOfPurchases = purchases\n                .stream()\n                .collect(Collectors.groupingBy(jsonObject-&gt;\n                        jsonObject.getInteger(&quot;month_instant&quot;), \nCollectors.summingDouble(jsonObj -&gt; jsonObj.getDouble(&quot;price&quot;))));\n</code></pre>\n<p>I have assumed here your month_instant and price to be Integer and Double respectively due to lack of that information in question. However, you can modify them according to your own data.</p>\n<p>You can try both these approaches. However, the first approach is simpler and more straightforward to implement.</p>\n"}],"owner":{"account_id":4414289,"reputation":191,"user_id":3596329,"display_name":"SandeepVBende"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75877889,"answer_count":2,"score":-1,"last_activity_date":1680096362,"creation_date":1680095014,"question_id":75877621,"body_markdown":"Below is an example of getting sum of purchase amounts monthwise by using groupingBy. \r\n```\r\nMap&lt;Month, Double&gt; monthlySumOfPurchases = purchases\r\n                .stream()\r\n                .collect(Collectors.groupingBy(\r\n                        Purchase::getMonthOfDate, \r\n                        Collectors.summingDouble(Purchase::getPrice)));\r\n```\r\nPurchase is a class here, so collector worked for us.\r\nNow if I have List of JsonObject (io.vertx.core.json package), so purchases are JsonObjects now. How do I get monthwise sum of purchase amounts using streams now?","title":"How to access values of JsonObject inside collect operator","body":"<p>Below is an example of getting sum of purchase amounts monthwise by using groupingBy.</p>\n<pre><code>Map&lt;Month, Double&gt; monthlySumOfPurchases = purchases\n                .stream()\n                .collect(Collectors.groupingBy(\n                        Purchase::getMonthOfDate, \n                        Collectors.summingDouble(Purchase::getPrice)));\n</code></pre>\n<p>Purchase is a class here, so collector worked for us.\nNow if I have List of JsonObject (io.vertx.core.json package), so purchases are JsonObjects now. How do I get monthwise sum of purchase amounts using streams now?</p>\n"},{"tags":["java","spring-boot","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1680087922,"post_id":75874065,"comment_id":133836699,"body_markdown":"`(:#{#iValue} IS NULL AND a.value IS NULL)` -&gt; `(:#{#iValue == null} = true AND a.value IS NULL)`","body":"<code>(:#{#iValue} IS NULL AND a.value IS NULL)</code> -&gt; <code>(:#{#iValue == null} = true AND a.value IS NULL)</code>"}],"answers":[{"tags":[],"owner":{"account_id":3533737,"reputation":981,"user_id":2952564,"accept_rate":74,"display_name":"Burner"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680096084,"creation_date":1680096084,"answer_id":75877842,"question_id":75874065,"body_markdown":"The solution is:\r\n\r\n    @Query(&quot;SELECT a FROM #{#entityName} a WHERE ((:iValue IS NULL AND a.value IS NULL) OR a.value = :iValue)&quot;)\r\n    MyEntity findByValue(@Param(&quot;iValue&quot;) MyDataType value)\r\n\r\nwithout `#{#...}`","title":"How to check IS NULL on Hibernate Custom Data Type","body":"<p>The solution is:</p>\n<pre><code>@Query(&quot;SELECT a FROM #{#entityName} a WHERE ((:iValue IS NULL AND a.value IS NULL) OR a.value = :iValue)&quot;)\nMyEntity findByValue(@Param(&quot;iValue&quot;) MyDataType value)\n</code></pre>\n<p>without <code>#{#...}</code></p>\n"}],"owner":{"account_id":3533737,"reputation":981,"user_id":2952564,"accept_rate":74,"display_name":"Burner"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680096084,"creation_date":1680073203,"question_id":75874065,"body_markdown":"I have a problem with a Hibernate Custom Data Type (AttributeConverter) in Spring Boot 3\r\nI have written a converter, an annotation, a validator, descriptor etc.. So far everything works. \r\n\r\nNow I wrote a very simple SQL in a JPA repo and I am wondering that it does not work:\r\n\r\n    @Query(&quot;SELECT a FROM #{#entityName} a WHERE ((:#{#iValue} IS NULL AND a.value IS NULL) OR a.value = :#{#iValue})&quot;)\r\n    MyEntity findByValue(@Param(&quot;iValue&quot;) MyDataType value)\r\n\r\nand get the error message:\r\n\r\n    org.springframework.orm.jpa.JpaSystemException: Could not determine recommended JdbcType for org.example.MyDataType\r\n\r\nI have now found out that it is based on the check with NULL and the value is not NULL.\r\n\r\nThat means the upper query works without the error message if `value == null`. If `value != null`, the above error message comes.\r\n\r\n1. Question, what else do I need to enter where so that the check for != null works. \r\n\r\n2. Is there a more elegant way than `((:#{#iValue} IS NULL AND a.value IS NULL) OR a.value = :#{#iValue})`. \r\n`a.value = :#{#iValue}` does not work for null values. Hibernate does not automatically convert this to `IS NULL` if the value is NULL. I have not found anything on the internet how to solve this differently.\r\n\r\nEDIT:  It seems the bug has been brought back to life. It was once solved and has now come back to life in Hibernate 6 only in reverse.\r\n\r\nhttps://github.com/spring-projects/spring-data-jpa/issues/2549\r\n\r\nhttps://hibernate.atlassian.net/browse/HHH-8697\r\n\r\nhttps://hibernate.atlassian.net/browse/HHH-9901\r\n\r\nhttps://hibernate.atlassian.net/browse/HHH-9320","title":"How to check IS NULL on Hibernate Custom Data Type","body":"<p>I have a problem with a Hibernate Custom Data Type (AttributeConverter) in Spring Boot 3\nI have written a converter, an annotation, a validator, descriptor etc.. So far everything works.</p>\n<p>Now I wrote a very simple SQL in a JPA repo and I am wondering that it does not work:</p>\n<pre><code>@Query(&quot;SELECT a FROM #{#entityName} a WHERE ((:#{#iValue} IS NULL AND a.value IS NULL) OR a.value = :#{#iValue})&quot;)\nMyEntity findByValue(@Param(&quot;iValue&quot;) MyDataType value)\n</code></pre>\n<p>and get the error message:</p>\n<pre><code>org.springframework.orm.jpa.JpaSystemException: Could not determine recommended JdbcType for org.example.MyDataType\n</code></pre>\n<p>I have now found out that it is based on the check with NULL and the value is not NULL.</p>\n<p>That means the upper query works without the error message if <code>value == null</code>. If <code>value != null</code>, the above error message comes.</p>\n<ol>\n<li><p>Question, what else do I need to enter where so that the check for != null works.</p>\n</li>\n<li><p>Is there a more elegant way than <code>((:#{#iValue} IS NULL AND a.value IS NULL) OR a.value = :#{#iValue})</code>.\n<code>a.value = :#{#iValue}</code> does not work for null values. Hibernate does not automatically convert this to <code>IS NULL</code> if the value is NULL. I have not found anything on the internet how to solve this differently.</p>\n</li>\n</ol>\n<p>EDIT:  It seems the bug has been brought back to life. It was once solved and has now come back to life in Hibernate 6 only in reverse.</p>\n<p><a href=\"https://github.com/spring-projects/spring-data-jpa/issues/2549\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-data-jpa/issues/2549</a></p>\n<p><a href=\"https://hibernate.atlassian.net/browse/HHH-8697\" rel=\"nofollow noreferrer\">https://hibernate.atlassian.net/browse/HHH-8697</a></p>\n<p><a href=\"https://hibernate.atlassian.net/browse/HHH-9901\" rel=\"nofollow noreferrer\">https://hibernate.atlassian.net/browse/HHH-9901</a></p>\n<p><a href=\"https://hibernate.atlassian.net/browse/HHH-9320\" rel=\"nofollow noreferrer\">https://hibernate.atlassian.net/browse/HHH-9320</a></p>\n"},{"tags":["java","sql-server","spring-boot","jpa","one-to-one"],"comments":[{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1678974815,"post_id":75757024,"comment_id":133639719,"body_markdown":"Please check the InvestmentAllocation class, It is not (yet) perfect JPA entity. 1. No Entity annotation 2. No empty constructor 3. No ID annotation and id property. 4. No getters/setters","body":"Please check the InvestmentAllocation class, It is not (yet) perfect JPA entity. 1. No Entity annotation 2. No empty constructor 3. No ID annotation and id property. 4. No getters/setters"},{"owner":{"account_id":19981008,"reputation":913,"user_id":14644191,"display_name":"Enchantres"},"score":0,"creation_date":1678975374,"post_id":75757024,"comment_id":133639903,"body_markdown":"Edited, it&#39;s a copy mistake","body":"Edited, it&#39;s a copy mistake"},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1678975851,"post_id":75757024,"comment_id":133640056,"body_markdown":"Please also add the code snippet where you are getting error and the exception stack trace.","body":"Please also add the code snippet where you are getting error and the exception stack trace."},{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":0,"creation_date":1679000664,"post_id":75757024,"comment_id":133647143,"body_markdown":"Aside... `decimal(8,4)` is quite small, this limits you to `declare @example1 decimal(8,4) = 9999.9999`. If you tried to `declare @example2 decimal(8,4) = 10000.0000`, for example, you&#39;d get an error message like: _Msg 8115 Level 16 State 8 Line 1 Arithmetic overflow error converting numeric to data type numeric._","body":"Aside... <code>decimal(8,4)</code> is quite small, this limits you to <code>declare @example1 decimal(8,4) = 9999.9999</code>. If you tried to <code>declare @example2 decimal(8,4) = 10000.0000</code>, for example, you&#39;d get an error message like: <i>Msg 8115 Level 16 State 8 Line 1 Arithmetic overflow error converting numeric to data type numeric.</i>"}],"answers":[{"tags":[],"owner":{"account_id":19981008,"reputation":913,"user_id":14644191,"display_name":"Enchantres"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680095832,"creation_date":1680095832,"answer_id":75877789,"question_id":75757024,"body_markdown":"I changed the key to be in Portfolio table and removed the foreign key column from InvestmentAllocation and it worked.\r\n\r\n    @OneToOne(cascade = CascadeType.ALL)\r\n    @JoinColumn(name = &quot;InvestmentAllocationKey&quot;, referencedColumnName = &quot;id&quot;)\r\n    private InvestmentAllocation investmentAllocation;","title":"Hibernate One-to-one mapping not working because of java.sql.SQLException: Invalid column name","body":"<p>I changed the key to be in Portfolio table and removed the foreign key column from InvestmentAllocation and it worked.</p>\n<pre><code>@OneToOne(cascade = CascadeType.ALL)\n@JoinColumn(name = &quot;InvestmentAllocationKey&quot;, referencedColumnName = &quot;id&quot;)\nprivate InvestmentAllocation investmentAllocation;\n</code></pre>\n"}],"owner":{"account_id":19981008,"reputation":913,"user_id":14644191,"display_name":"Enchantres"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":166,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680095832,"creation_date":1678973727,"question_id":75757024,"body_markdown":"I have Portfolio which can have InvestmentAllocation. I want to be able to set an InvestmentAllocation to Portfolio objects and fetch them easily, so I want the Portfolio class to contain information about its InvestmentAllocation. I also do not need an information about the Portfolio in InvestmentAllocation class, so there I want only to be able to see the @Column(name = &quot;PortfolioKey&quot;) private Long portfolioId;\r\n\r\n    @Entity\r\n    @Getter\r\n    @Setter\r\n    @Table(name = &quot;Portfolio&quot;)\r\n    public class Portfolio extends MutableEntity {\r\n    \r\n        private static final long serialVersionUID = -6668016124280143515L;\r\n    \r\n        @Column(name = &quot;Name&quot;)\r\n        private String name;\r\n    \r\n        @Column(name = &quot;Amount&quot;)\r\n        private BigDecimal amount;\r\n    \r\n        @OneToOne(\r\n                fetch = FetchType.LAZY,\r\n                cascade = {CascadeType.ALL},\r\n                orphanRemoval = true\r\n        )\r\n        @JoinColumn(\r\n                name = &quot;PortfolioKey&quot;,\r\n                nullable = false,\r\n                insertable = false,\r\n                updatable = false\r\n        )\r\n        @Cascade({org.hibernate.annotations.CascadeType.ALL})\r\n        private InvestmentAllocation investmentAllocation;\r\n    \r\n        @PostPersist\r\n        protected void postPersist() {\r\n            if (this.investmentAllocation != null) {\r\n                if (this.investmentAllocation.getPortfolioId() == null) {\r\n                    this.investmentAllocation.setPortfolioId(this.getId());\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    @Entity\r\n    @Getter\r\n    @Setter\r\n    @Table(name = &quot;InvestmentAllocation&quot;)\r\n    public class InvestmentAllocation extends MutableEntity{\r\n    \r\n        private static final long serialVersionUID = -5974811107021515065L;\r\n    \r\n        @Column(name = &quot;PortfolioKey&quot;)\r\n        private Long portfolioId;\r\n    \r\n        @Column(name = &quot;Cash&quot;)\r\n        private double cash;\r\n    \r\n        @Column(name = &quot;Bond&quot;)\r\n        private double bond;\r\n    }\r\n\r\nPlease find below how I created my tables:\r\n\r\n    CREATE TABLE [dbo].[Portfolio](\r\n    \t[ID] [int] IDENTITY(1,1) NOT NULL,\r\n    \t[Name] [varchar](255) NOT NULL,\r\n    \t[Amount] [money] NOT NULL,\r\n     CONSTRAINT [PK_PortfolioGeneric] PRIMARY KEY CLUSTERED \r\n    (\r\n    \t[ID] ASC\r\n    )WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 85) ON [PRIMARY]\r\n    ) ON [PRIMARY]\r\n    GO\r\n\r\n    CREATE TABLE [dbo].[InvestmentAllocation](\r\n    \t[ID] [int] IDENTITY(1,1) NOT NULL,\r\n    \t[PortfolioKey] [int] NOT NULL,\r\n    \t[Bond] [decimal](8, 4) NOT NULL,\r\n    \t[Cash] [decimal](8, 4) NOT NULL,\r\n     CONSTRAINT [PK_InvestmentAllocation] PRIMARY KEY CLUSTERED \r\n    (\r\n    \t[ID] ASC\r\n    )WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 85) ON [PRIMARY]\r\n    ) ON [PRIMARY]\r\n    GO\r\n    \r\n    ALTER TABLE [dbo].[InvestmentAllocation]  WITH CHECK ADD  CONSTRAINT [PK_InvestmentAllocation_Portfolio] FOREIGN KEY([PortfolioKey])\r\n    REFERENCES [dbo].[Portfolio] ([ID])\r\n    GO\r\n    \r\n    ALTER TABLE [dbo].[InvestmentAllocation] CHECK CONSTRAINT [PK_InvestmentAllocation_Portfolio]\r\n    GO\r\n\r\nWhen I run the code, I am getting the following error:\r\n\r\n&gt; Caused by: java.sql.SQLException: Invalid column name &#39;PortfolioKey&#39;.\r\n\r\n**Why I am getting this error? \r\nIs my one-to-one mapping not correct?**","title":"Hibernate One-to-one mapping not working because of java.sql.SQLException: Invalid column name","body":"<p>I have Portfolio which can have InvestmentAllocation. I want to be able to set an InvestmentAllocation to Portfolio objects and fetch them easily, so I want the Portfolio class to contain information about its InvestmentAllocation. I also do not need an information about the Portfolio in InvestmentAllocation class, so there I want only to be able to see the @Column(name = &quot;PortfolioKey&quot;) private Long portfolioId;</p>\n<pre><code>@Entity\n@Getter\n@Setter\n@Table(name = &quot;Portfolio&quot;)\npublic class Portfolio extends MutableEntity {\n\n    private static final long serialVersionUID = -6668016124280143515L;\n\n    @Column(name = &quot;Name&quot;)\n    private String name;\n\n    @Column(name = &quot;Amount&quot;)\n    private BigDecimal amount;\n\n    @OneToOne(\n            fetch = FetchType.LAZY,\n            cascade = {CascadeType.ALL},\n            orphanRemoval = true\n    )\n    @JoinColumn(\n            name = &quot;PortfolioKey&quot;,\n            nullable = false,\n            insertable = false,\n            updatable = false\n    )\n    @Cascade({org.hibernate.annotations.CascadeType.ALL})\n    private InvestmentAllocation investmentAllocation;\n\n    @PostPersist\n    protected void postPersist() {\n        if (this.investmentAllocation != null) {\n            if (this.investmentAllocation.getPortfolioId() == null) {\n                this.investmentAllocation.setPortfolioId(this.getId());\n            }\n        }\n    }\n}\n\n@Entity\n@Getter\n@Setter\n@Table(name = &quot;InvestmentAllocation&quot;)\npublic class InvestmentAllocation extends MutableEntity{\n\n    private static final long serialVersionUID = -5974811107021515065L;\n\n    @Column(name = &quot;PortfolioKey&quot;)\n    private Long portfolioId;\n\n    @Column(name = &quot;Cash&quot;)\n    private double cash;\n\n    @Column(name = &quot;Bond&quot;)\n    private double bond;\n}\n</code></pre>\n<p>Please find below how I created my tables:</p>\n<pre><code>CREATE TABLE [dbo].[Portfolio](\n    [ID] [int] IDENTITY(1,1) NOT NULL,\n    [Name] [varchar](255) NOT NULL,\n    [Amount] [money] NOT NULL,\n CONSTRAINT [PK_PortfolioGeneric] PRIMARY KEY CLUSTERED \n(\n    [ID] ASC\n)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 85) ON [PRIMARY]\n) ON [PRIMARY]\nGO\n\nCREATE TABLE [dbo].[InvestmentAllocation](\n    [ID] [int] IDENTITY(1,1) NOT NULL,\n    [PortfolioKey] [int] NOT NULL,\n    [Bond] [decimal](8, 4) NOT NULL,\n    [Cash] [decimal](8, 4) NOT NULL,\n CONSTRAINT [PK_InvestmentAllocation] PRIMARY KEY CLUSTERED \n(\n    [ID] ASC\n)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 85) ON [PRIMARY]\n) ON [PRIMARY]\nGO\n\nALTER TABLE [dbo].[InvestmentAllocation]  WITH CHECK ADD  CONSTRAINT [PK_InvestmentAllocation_Portfolio] FOREIGN KEY([PortfolioKey])\nREFERENCES [dbo].[Portfolio] ([ID])\nGO\n\nALTER TABLE [dbo].[InvestmentAllocation] CHECK CONSTRAINT [PK_InvestmentAllocation_Portfolio]\nGO\n</code></pre>\n<p>When I run the code, I am getting the following error:</p>\n<blockquote>\n<p>Caused by: java.sql.SQLException: Invalid column name 'PortfolioKey'.</p>\n</blockquote>\n<p><strong>Why I am getting this error?\nIs my one-to-one mapping not correct?</strong></p>\n"},{"tags":["java","android","layout","view"],"owner":{"account_id":19320890,"reputation":1,"user_id":14124609,"display_name":"jebb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680095672,"creation_date":1680095672,"question_id":75877758,"body_markdown":"I made a view draggable with mouse cursor, but I would like to make it move outside its layout. I used only linear layouts, do I need to change all the layouts or there are easier ways?I red about relative layouts or even ViewGroups.\r\n[enter image description here](https://i.stack.imgur.com/zVDoc.png)\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    &gt;\r\n    &lt;LinearLayout\r\n        android:id=&quot;@+id/llTop&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;0dp&quot;\r\n        android:layout_weight=&quot;1&quot;\r\n        android:background=&quot;@android:color/holo_green_dark&quot;\r\n        android:gravity=&quot;center&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        tools:ignore=&quot;UselessParent&quot;&gt;\r\n        &lt;TextView\r\n            android:id=&quot;@+id/textView&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:gravity=&quot;end|center_vertical&quot;\r\n            android:text=&quot;Score:&quot; /&gt;\r\n        &lt;androidx.gridlayout.widget.GridLayout\r\n            android:background=&quot;#3F51B5&quot;\r\n            android:layout_width=&quot;388dp&quot;\r\n            android:layout_height=&quot;390dp&quot;&gt;\r\n        &lt;/androidx.gridlayout.widget.GridLayout&gt;\r\n        &lt;LinearLayout\r\n            android:id=&quot;@+id/bottom&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:background=&quot;@android:color/holo_green_dark&quot;\r\n            android:gravity=&quot;center&quot;\r\n            android:orientation=&quot;horizontal&quot;\r\n            tools:ignore=&quot;UselessParent&quot;\r\n            android:elevation=&quot;2dp&quot;\r\n            &gt;\r\n            &lt;View\r\n                android:id=&quot;@+id/dragView1&quot;\r\n                android:layout_width=&quot;41dp&quot;\r\n                android:layout_height=&quot;41dp&quot;\r\n                android:layout_gravity=&quot;bottom|center&quot;\r\n                android:layout_marginTop=&quot;50dp&quot;\r\n                android:layout_marginHorizontal=&quot;50dp&quot;\r\n                android:background=&quot;@android:color/holo_blue_bright&quot;\r\n                android:clipChildren=&quot;false&quot;\r\n                android:clipToPadding=&quot;false&quot;\r\n                /&gt;\r\n            &lt;View\r\n                android:id=&quot;@+id/dragView2&quot;\r\n                android:layout_width=&quot;41dp&quot;\r\n                android:layout_height=&quot;41dp&quot;\r\n                android:layout_gravity=&quot;bottom|center&quot;\r\n                android:layout_marginTop=&quot;50dp&quot;\r\n                android:layout_marginHorizontal=&quot;50dp&quot;\r\n                android:background=&quot;@android:color/holo_blue_bright&quot;\r\n                android:clipChildren=&quot;false&quot;\r\n                android:clipToPadding=&quot;false&quot;\r\n                /&gt;\r\n            &lt;View\r\n                android:id=&quot;@+id/dragView3&quot;\r\n                android:layout_width=&quot;41dp&quot;\r\n                android:layout_height=&quot;41dp&quot;\r\n                android:layout_gravity=&quot;bottom|center&quot;\r\n                android:layout_marginTop=&quot;50dp&quot;\r\n                android:layout_marginHorizontal=&quot;50dp&quot;\r\n                android:background=&quot;@android:color/holo_blue_bright&quot;\r\n                android:clipChildren=&quot;false&quot;\r\n                android:clipToPadding=&quot;false&quot;\r\n                /&gt;\r\n        &lt;/LinearLayout&gt;\r\n    &lt;/LinearLayout&gt;\r\n&lt;/LinearLayout&gt;\r\n\r\n```\r\n\r\nI tried to change layout but I did not manage to.","title":"Android view outside the layout","body":"<p>I made a view draggable with mouse cursor, but I would like to make it move outside its layout. I used only linear layouts, do I need to change all the layouts or there are easier ways?I red about relative layouts or even ViewGroups.\n<a href=\"https://i.stack.imgur.com/zVDoc.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;\n    &gt;\n    &lt;LinearLayout\n        android:id=&quot;@+id/llTop&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;0dp&quot;\n        android:layout_weight=&quot;1&quot;\n        android:background=&quot;@android:color/holo_green_dark&quot;\n        android:gravity=&quot;center&quot;\n        android:orientation=&quot;vertical&quot;\n        tools:ignore=&quot;UselessParent&quot;&gt;\n        &lt;TextView\n            android:id=&quot;@+id/textView&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:gravity=&quot;end|center_vertical&quot;\n            android:text=&quot;Score:&quot; /&gt;\n        &lt;androidx.gridlayout.widget.GridLayout\n            android:background=&quot;#3F51B5&quot;\n            android:layout_width=&quot;388dp&quot;\n            android:layout_height=&quot;390dp&quot;&gt;\n        &lt;/androidx.gridlayout.widget.GridLayout&gt;\n        &lt;LinearLayout\n            android:id=&quot;@+id/bottom&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:background=&quot;@android:color/holo_green_dark&quot;\n            android:gravity=&quot;center&quot;\n            android:orientation=&quot;horizontal&quot;\n            tools:ignore=&quot;UselessParent&quot;\n            android:elevation=&quot;2dp&quot;\n            &gt;\n            &lt;View\n                android:id=&quot;@+id/dragView1&quot;\n                android:layout_width=&quot;41dp&quot;\n                android:layout_height=&quot;41dp&quot;\n                android:layout_gravity=&quot;bottom|center&quot;\n                android:layout_marginTop=&quot;50dp&quot;\n                android:layout_marginHorizontal=&quot;50dp&quot;\n                android:background=&quot;@android:color/holo_blue_bright&quot;\n                android:clipChildren=&quot;false&quot;\n                android:clipToPadding=&quot;false&quot;\n                /&gt;\n            &lt;View\n                android:id=&quot;@+id/dragView2&quot;\n                android:layout_width=&quot;41dp&quot;\n                android:layout_height=&quot;41dp&quot;\n                android:layout_gravity=&quot;bottom|center&quot;\n                android:layout_marginTop=&quot;50dp&quot;\n                android:layout_marginHorizontal=&quot;50dp&quot;\n                android:background=&quot;@android:color/holo_blue_bright&quot;\n                android:clipChildren=&quot;false&quot;\n                android:clipToPadding=&quot;false&quot;\n                /&gt;\n            &lt;View\n                android:id=&quot;@+id/dragView3&quot;\n                android:layout_width=&quot;41dp&quot;\n                android:layout_height=&quot;41dp&quot;\n                android:layout_gravity=&quot;bottom|center&quot;\n                android:layout_marginTop=&quot;50dp&quot;\n                android:layout_marginHorizontal=&quot;50dp&quot;\n                android:background=&quot;@android:color/holo_blue_bright&quot;\n                android:clipChildren=&quot;false&quot;\n                android:clipToPadding=&quot;false&quot;\n                /&gt;\n        &lt;/LinearLayout&gt;\n    &lt;/LinearLayout&gt;\n&lt;/LinearLayout&gt;\n\n</code></pre>\n<p>I tried to change layout but I did not manage to.</p>\n"},{"tags":["java","azure","azure-blob-storage","timeoutexception","azure-sdk-for-java"],"answers":[{"tags":[],"owner":{"account_id":26886199,"reputation":3299,"user_id":20465725,"display_name":"Venkat V"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680095598,"creation_date":1680095598,"answer_id":75877736,"question_id":75876946,"body_markdown":"&gt; I am using azure sdk for java v11.0.1 to upload files to blob storage.This error comes sometimes once in a week and it creates an outage for the application.\r\n\r\n\r\n\r\n```java\r\njava.util.concurrent.TimeoutException: The source did not signal an event for 60 seconds and has been terminated.\r\n2023-03-21T10:30:53.721545956Z at io.reactivex.internal.operators.single.SingleTimeout$TimeoutMainObserver.run(SingleTimeout.java:123) ~[rxjava-2.2.9.jar!/:na]\r\n2023-03-21T10:30:53.721551557Z at io.reactivex.internal.schedulers.ScheduledDirectTask.call(ScheduledDirectTask.java:38) ~[rxjava-2.2.9.jar!/:na]\r\n2023-03-21T10:30:53.721555757Z at io.reactivex.internal.schedulers.ScheduledDirectTask.call(ScheduledDirectTask.java:26) ~[rxjava-2.2.9.jar!/:na]\r\n2023-03-21T10:30:53.721559957Z at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\r\n2023-03-21T10:30:53.721563857Z at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) ~[na:na]\r\n```\r\nThe above error message indicates that a timeout occurred while attempting to upload a file to **AZURE Storage** using the **SDK** for Java. The timeout occurred because the source did not signal an event for 60 seconds and was terminated automatically.\r\n\r\nI have used below code to upload the **Files** to **Azure Blob Storage**.\r\n\r\n    import com.azure.storage.blob.BlobClient;\r\n    import com.azure.storage.blob.BlobContainerClient;\r\n    import com.azure.storage.blob.BlobServiceClient;\r\n    import com.azure.storage.blob.BlobServiceClientBuilder;\r\n    \r\n    \r\n    public class App {\r\n        public static void main(String[] args) {\r\n       String  connectStr =&quot;DefaultEndpointsProtocol=https;AccountName=&lt;storageaccountname&gt;;AccountKey=xxxxxxxxxxxxxxxxxxxxxxxxxxxxL132fS9qbo2NGFL/GdLuwyWiSn+AStm9symA==;EndpointSuffix=core.windows.net&quot;;\r\n       BlobServiceClient  blobServiceClient = new  BlobServiceClientBuilder().connectionString(connectStr).buildClient();\r\n       String  containerName = &quot;&lt;containername&gt;&quot;;\r\n       BlobContainerClient  containerClient = blobServiceClient.getBlobContainerClient(containerName);\r\n       String  localPath = &quot;&lt;localpath&gt;;\r\n       BlobClient  blobClient = containerClient.getBlobClient(&quot;sample09.xlsx&quot;);\r\n       blobClient.uploadFromFile(localPath);\r\n       System.out.println(&quot;File uploaded!!!!&quot;);;\r\n        }\r\n    }\r\n\r\nYou need to change the below dependency in `pom.xml` \r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;com.azure&lt;/groupId&gt;\r\n    &lt;artifactId&gt;azure-identity&lt;/artifactId&gt;\r\n    &lt;version&gt;1.7.2&lt;/version&gt;\r\n    &lt;scope&gt;compile&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;com.azure&lt;/groupId&gt;\r\n    &lt;artifactId&gt;azure-storage-blob&lt;/artifactId&gt;\r\n    &lt;version&gt;12.21.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nOnce ran the above code files are uploaded to **Azure Container** successfully.\r\n\r\n![enter image description here](https://i.stack.imgur.com/CTNqN.png)\r\n","title":"Cannot upload file to blob","body":"<blockquote>\n<p>I am using azure sdk for java v11.0.1 to upload files to blob storage.This error comes sometimes once in a week and it creates an outage for the application.</p>\n</blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>java.util.concurrent.TimeoutException: The source did not signal an event for 60 seconds and has been terminated.\n2023-03-21T10:30:53.721545956Z at io.reactivex.internal.operators.single.SingleTimeout$TimeoutMainObserver.run(SingleTimeout.java:123) ~[rxjava-2.2.9.jar!/:na]\n2023-03-21T10:30:53.721551557Z at io.reactivex.internal.schedulers.ScheduledDirectTask.call(ScheduledDirectTask.java:38) ~[rxjava-2.2.9.jar!/:na]\n2023-03-21T10:30:53.721555757Z at io.reactivex.internal.schedulers.ScheduledDirectTask.call(ScheduledDirectTask.java:26) ~[rxjava-2.2.9.jar!/:na]\n2023-03-21T10:30:53.721559957Z at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\n2023-03-21T10:30:53.721563857Z at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) ~[na:na]\n</code></pre>\n<p>The above error message indicates that a timeout occurred while attempting to upload a file to <strong>AZURE Storage</strong> using the <strong>SDK</strong> for Java. The timeout occurred because the source did not signal an event for 60 seconds and was terminated automatically.</p>\n<p>I have used below code to upload the <strong>Files</strong> to <strong>Azure Blob Storage</strong>.</p>\n<pre><code>import com.azure.storage.blob.BlobClient;\nimport com.azure.storage.blob.BlobContainerClient;\nimport com.azure.storage.blob.BlobServiceClient;\nimport com.azure.storage.blob.BlobServiceClientBuilder;\n\n\npublic class App {\n    public static void main(String[] args) {\n   String  connectStr =&quot;DefaultEndpointsProtocol=https;AccountName=&lt;storageaccountname&gt;;AccountKey=xxxxxxxxxxxxxxxxxxxxxxxxxxxxL132fS9qbo2NGFL/GdLuwyWiSn+AStm9symA==;EndpointSuffix=core.windows.net&quot;;\n   BlobServiceClient  blobServiceClient = new  BlobServiceClientBuilder().connectionString(connectStr).buildClient();\n   String  containerName = &quot;&lt;containername&gt;&quot;;\n   BlobContainerClient  containerClient = blobServiceClient.getBlobContainerClient(containerName);\n   String  localPath = &quot;&lt;localpath&gt;;\n   BlobClient  blobClient = containerClient.getBlobClient(&quot;sample09.xlsx&quot;);\n   blobClient.uploadFromFile(localPath);\n   System.out.println(&quot;File uploaded!!!!&quot;);;\n    }\n}\n</code></pre>\n<p>You need to change the below dependency in <code>pom.xml</code></p>\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;com.azure&lt;/groupId&gt;\n&lt;artifactId&gt;azure-identity&lt;/artifactId&gt;\n&lt;version&gt;1.7.2&lt;/version&gt;\n&lt;scope&gt;compile&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n&lt;groupId&gt;com.azure&lt;/groupId&gt;\n&lt;artifactId&gt;azure-storage-blob&lt;/artifactId&gt;\n&lt;version&gt;12.21.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Once ran the above code files are uploaded to <strong>Azure Container</strong> successfully.</p>\n<p><img src=\"https://i.stack.imgur.com/CTNqN.png\" alt=\"enter image description here\" /></p>\n"}],"owner":{"account_id":26226248,"reputation":19,"user_id":19902912,"display_name":"Yatharth Mishra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":387,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680095598,"creation_date":1680091376,"question_id":75876946,"body_markdown":"I am using azure sdk for java v11.0.1 to upload files to blob storage. This error comes sometimes once in a week and it creates an outage for the application\r\n:\r\n\r\n    java.util.concurrent.TimeoutException: The source did not signal an event for 60 seconds and has been terminated.\r\n    2023-03-21T10:30:53.721545956Z at io.reactivex.internal.operators.single.SingleTimeout$TimeoutMainObserver.run(SingleTimeout.java:123) ~[rxjava-2.2.9.jar!/:na]\r\n    2023-03-21T10:30:53.721551557Z at io.reactivex.internal.schedulers.ScheduledDirectTask.call(ScheduledDirectTask.java:38) ~[rxjava-2.2.9.jar!/:na]\r\n    2023-03-21T10:30:53.721555757Z at io.reactivex.internal.schedulers.ScheduledDirectTask.call(ScheduledDirectTask.java:26) ~[rxjava-2.2.9.jar!/:na]\r\n    2023-03-21T10:30:53.721559957Z at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\r\n    2023-03-21T10:30:53.721563857Z at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) ~[na:na]\r\n\r\nThe application works fine after a restart. What could be the issue ? I am using azure-storage-blob version 11.0.1 and spring boot version 2.1.6.","title":"Cannot upload file to blob","body":"<p>I am using azure sdk for java v11.0.1 to upload files to blob storage. This error comes sometimes once in a week and it creates an outage for the application\n:</p>\n<pre><code>java.util.concurrent.TimeoutException: The source did not signal an event for 60 seconds and has been terminated.\n2023-03-21T10:30:53.721545956Z at io.reactivex.internal.operators.single.SingleTimeout$TimeoutMainObserver.run(SingleTimeout.java:123) ~[rxjava-2.2.9.jar!/:na]\n2023-03-21T10:30:53.721551557Z at io.reactivex.internal.schedulers.ScheduledDirectTask.call(ScheduledDirectTask.java:38) ~[rxjava-2.2.9.jar!/:na]\n2023-03-21T10:30:53.721555757Z at io.reactivex.internal.schedulers.ScheduledDirectTask.call(ScheduledDirectTask.java:26) ~[rxjava-2.2.9.jar!/:na]\n2023-03-21T10:30:53.721559957Z at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\n2023-03-21T10:30:53.721563857Z at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) ~[na:na]\n</code></pre>\n<p>The application works fine after a restart. What could be the issue ? I am using azure-storage-blob version 11.0.1 and spring boot version 2.1.6.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1679962046,"post_id":75861337,"comment_id":133811667,"body_markdown":"Hello and welcome to Stack Overflow! Please check out the [ask] and [tour] links to see how to ask questions, how to best use the site and what the site is for, and then consider [edit]ing and improving your question.  In particular, consider making your question more clear, focused, and understandable, especially with code posted as text, since doing this can help improve the question greatly, can improve its chances of getting a decent answer soon, and can reduce its chances of being closed, down-voted or deleted. Best of luck!","body":"Hello and welcome to Stack Overflow! Please check out the <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and <a href=\"https://stackoverflow.com/tour\">tour</a> links to see how to ask questions, how to best use the site and what the site is for, and then consider <a href=\"https://stackoverflow.com/posts/75861337/edit\">edit</a>ing and improving your question.  In particular, consider making your question more clear, focused, and understandable, especially with code posted as text, since doing this can help improve the question greatly, can improve its chances of getting a decent answer soon, and can reduce its chances of being closed, down-voted or deleted. Best of luck!"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1680011758,"post_id":75861337,"comment_id":133821432,"body_markdown":"“goal is to print [2,4] and successfully create a list of odd/even numbers.”  Which is it?  Is your goal to print [2,4] (which clearly is just even numbers), or is your goal to print both odd and even numbers in some manner?","body":"“goal is to print [2,4] and successfully create a list of odd/even numbers.”  Which is it?  Is your goal to print [2,4] (which clearly is just even numbers), or is your goal to print both odd and even numbers in some manner?"}],"answers":[{"tags":[],"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679962473,"creation_date":1679962473,"answer_id":75861367,"question_id":75861337,"body_markdown":"You can&#39;t print a Stream directly. Even if you could, this one is already consumed by the [terminal operation][1]. Just scrap the `forEach()` (or convert it to a `peek()` if you really need it), and print the result of your `collect()` call:\r\n\r\n    List&lt;Integer&gt; result = s.filter(p -&gt; p % 2 == 0)\r\n            .collect(Collectors.toList());\r\n    System.out.println(result);\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#StreamOps","title":"Getting a List of Odd/Even Numbers Using Stream","body":"<p>You can't print a Stream directly. Even if you could, this one is already consumed by the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#StreamOps\" rel=\"nofollow noreferrer\">terminal operation</a>. Just scrap the <code>forEach()</code> (or convert it to a <code>peek()</code> if you really need it), and print the result of your <code>collect()</code> call:</p>\n<pre><code>List&lt;Integer&gt; result = s.filter(p -&gt; p % 2 == 0)\n        .collect(Collectors.toList());\nSystem.out.println(result);\n</code></pre>\n"}],"owner":{"account_id":27893064,"reputation":1,"user_id":21299003,"display_name":"NotAGoodCoder"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":263,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1680095319,"creation_date":1679961888,"question_id":75861337,"body_markdown":"The goal is to print `[2,4]` and successfully create a list of odd/even numbers. My syntax is probably just way off or slightly off.\r\n\r\n    Stream&lt;Integer&gt; s = Stream.of(1, 2, 3, 4);\r\n    s.filter(p -&gt; p % 2 == 0)\r\n     .collect(Collectors.toList())\r\n     .forEach(e -&gt; System.out.print(e + &quot; &quot;));\r\n\r\n    System.out.println();\r\n    System.out.println(s.toString());\r\n\r\nResults...\r\n\r\n    2 4 \r\n    java.util.stream.ReferencePipeline$Head@682a0b20\r\n\r\n","title":"Getting a List of Odd/Even Numbers Using Stream","body":"<p>The goal is to print <code>[2,4]</code> and successfully create a list of odd/even numbers. My syntax is probably just way off or slightly off.</p>\n<pre><code>Stream&lt;Integer&gt; s = Stream.of(1, 2, 3, 4);\ns.filter(p -&gt; p % 2 == 0)\n .collect(Collectors.toList())\n .forEach(e -&gt; System.out.print(e + &quot; &quot;));\n\nSystem.out.println();\nSystem.out.println(s.toString());\n</code></pre>\n<p>Results...</p>\n<pre><code>2 4 \njava.util.stream.ReferencePipeline$Head@682a0b20\n</code></pre>\n"},{"tags":["java","lambda","java-8","swagger","modelmapper"],"comments":[{"owner":{"account_id":3687151,"reputation":131,"user_id":3070677,"display_name":"G10"},"score":0,"creation_date":1680160510,"post_id":75877579,"comment_id":133851519,"body_markdown":"Is it what you are looking for : https://www.baeldung.com/mapstruct if not please elaborate more","body":"Is it what you are looking for : <a href=\"https://www.baeldung.com/mapstruct\" rel=\"nofollow noreferrer\">baeldung.com/mapstruct</a> if not please elaborate more"}],"owner":{"account_id":18440419,"reputation":11,"user_id":13433179,"display_name":"Anita"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680094782,"creation_date":1680094782,"question_id":75877579,"body_markdown":"I am new to java and have scenario where I am retrieving data from database using JPA specification.\r\n\r\nThe data being retrieved is in plain format and I want to map it to list data type in swagger generated model class.\r\n\r\nFor remaining attributes, I am using lambda expression(mapper.map) which is working but for dto to list it is not working. \r\n\r\nCan anyone please help me with it?","title":"How to map dto objects to list in swagger class?","body":"<p>I am new to java and have scenario where I am retrieving data from database using JPA specification.</p>\n<p>The data being retrieved is in plain format and I want to map it to list data type in swagger generated model class.</p>\n<p>For remaining attributes, I am using lambda expression(mapper.map) which is working but for dto to list it is not working.</p>\n<p>Can anyone please help me with it?</p>\n"},{"tags":["java","apache-kafka","spring-kafka"],"comments":[{"owner":{"account_id":22619843,"reputation":39,"user_id":16798827,"display_name":"cloud_7"},"score":0,"creation_date":1680079376,"post_id":75874328,"comment_id":133834506,"body_markdown":"I think I&#39;ve figured out what&#39;s wrong. I use spring kafka 2.8.8. According to this issue: https://github.com/spring-projects/spring-kafka/issues/2282 it was fixed in 3.0.0. \n\nPlease close it.","body":"I think I&#39;ve figured out what&#39;s wrong. I use spring kafka 2.8.8. According to this issue: <a href=\"https://github.com/spring-projects/spring-kafka/issues/2282\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-kafka/issues/2282</a> it was fixed in 3.0.0.   Please close it."},{"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1680094142,"post_id":75874328,"comment_id":133838393,"body_markdown":"I suggest you add this as an answer and accept it a couple of days later - it might help others rather than deleting it.","body":"I suggest you add this as an answer and accept it a couple of days later - it might help others rather than deleting it."}],"answers":[{"tags":[],"owner":{"account_id":22619843,"reputation":39,"user_id":16798827,"display_name":"cloud_7"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1680094639,"creation_date":1680094639,"answer_id":75877551,"question_id":75874328,"body_markdown":"SOLUTION: \r\nThis issue was already raised here: https://github.com/spring-projects/spring-kafka/issues/2282\r\n\r\nhttps://docs.spring.io/spring-kafka/docs/3.0.5/reference/html/#retry-config\r\n\r\nIt was solved in 3.0.0.","title":"Two consumers with non-blocking retry listening to one kafka topic","body":"<p>SOLUTION:\nThis issue was already raised here: <a href=\"https://github.com/spring-projects/spring-kafka/issues/2282\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-kafka/issues/2282</a></p>\n<p><a href=\"https://docs.spring.io/spring-kafka/docs/3.0.5/reference/html/#retry-config\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-kafka/docs/3.0.5/reference/html/#retry-config</a></p>\n<p>It was solved in 3.0.0.</p>\n"}],"owner":{"account_id":22619843,"reputation":39,"user_id":16798827,"display_name":"cloud_7"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":441,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75877551,"answer_count":1,"score":1,"last_activity_date":1680094639,"creation_date":1680074878,"question_id":75874328,"body_markdown":"I use spring kafka 2.8.8. I have two consumers which use @RetryableTopic annotation for non-blocking retries. Both of them listen the same topic and they have separate consumer groups.\r\n\r\nImplementation of the first consumer:\r\n\r\n    @KafkaListener(\r\n        topics = &quot;topic&quot;,\r\n        containerFactory = &quot;containerFactory-one&quot;,\r\n        groupId = &quot;group-one&quot;\r\n    )\r\n    @RetryableTopic(\r\n        attempts = &quot;3&quot;,\r\n        backoff = @Backoff(delay = 30000,\r\n            multiplierExpression = 2.0 , maxDelay = 600000),\r\n        listenerContainerFactory = &quot;containerFactory-one&quot;,\r\n        kafkaTemplate = &quot;template-one&quot;,\r\n        retryTopicSuffix = &quot;-one-retry&quot;,\r\n        dltTopicSuffix = &quot;-one-dlt&quot;,\r\n        topicSuffixingStrategy = TopicSuffixingStrategy.SUFFIX_WITH_INDEX_VALUE\r\n    )\r\n\r\nImplementation of the second consumer:\r\n\r\n    @KafkaListener(\r\n        topics = &quot;topic&quot;,\r\n        containerFactory = &quot;containerFactory-two&quot;,\r\n        groupId = &quot;group-two&quot;\r\n    )\r\n    @RetryableTopic(\r\n        attempts = &quot;3&quot;,\r\n        backoff = @Backoff(delay = 30000,\r\n            multiplierExpression = 2.0 , maxDelay = 600000),\r\n        listenerContainerFactory = &quot;containerFactory-two&quot;,\r\n        kafkaTemplate = &quot;template-two&quot;,\r\n        retryTopicSuffix = &quot;-two-retry&quot;,\r\n        dltTopicSuffix = &quot;-two-dlt&quot;,\r\n        topicSuffixingStrategy = TopicSuffixingStrategy.SUFFIX_WITH_INDEX_VALUE\r\n    )\r\n\r\nSo in total I have one main topic and 3 retry topics for each consumer. Each retry topic has own consumer group.\r\n\r\nPROBLEM:\r\nWhen the first consumer fails, then the retry message is sent and **it is read by the second consumer retry-0.** Is it a bug or did I make here some configuration mistake?\r\n\r\n------------------------------------------------\r\nSOLUTION:\r\nThis issue was already raised here:\r\nhttps://github.com/spring-projects/spring-kafka/issues/2282\r\n\r\nIt was solved in 3.0.0.","title":"Two consumers with non-blocking retry listening to one kafka topic","body":"<p>I use spring kafka 2.8.8. I have two consumers which use @RetryableTopic annotation for non-blocking retries. Both of them listen the same topic and they have separate consumer groups.</p>\n<p>Implementation of the first consumer:</p>\n<pre><code>@KafkaListener(\n    topics = &quot;topic&quot;,\n    containerFactory = &quot;containerFactory-one&quot;,\n    groupId = &quot;group-one&quot;\n)\n@RetryableTopic(\n    attempts = &quot;3&quot;,\n    backoff = @Backoff(delay = 30000,\n        multiplierExpression = 2.0 , maxDelay = 600000),\n    listenerContainerFactory = &quot;containerFactory-one&quot;,\n    kafkaTemplate = &quot;template-one&quot;,\n    retryTopicSuffix = &quot;-one-retry&quot;,\n    dltTopicSuffix = &quot;-one-dlt&quot;,\n    topicSuffixingStrategy = TopicSuffixingStrategy.SUFFIX_WITH_INDEX_VALUE\n)\n</code></pre>\n<p>Implementation of the second consumer:</p>\n<pre><code>@KafkaListener(\n    topics = &quot;topic&quot;,\n    containerFactory = &quot;containerFactory-two&quot;,\n    groupId = &quot;group-two&quot;\n)\n@RetryableTopic(\n    attempts = &quot;3&quot;,\n    backoff = @Backoff(delay = 30000,\n        multiplierExpression = 2.0 , maxDelay = 600000),\n    listenerContainerFactory = &quot;containerFactory-two&quot;,\n    kafkaTemplate = &quot;template-two&quot;,\n    retryTopicSuffix = &quot;-two-retry&quot;,\n    dltTopicSuffix = &quot;-two-dlt&quot;,\n    topicSuffixingStrategy = TopicSuffixingStrategy.SUFFIX_WITH_INDEX_VALUE\n)\n</code></pre>\n<p>So in total I have one main topic and 3 retry topics for each consumer. Each retry topic has own consumer group.</p>\n<p>PROBLEM:\nWhen the first consumer fails, then the retry message is sent and <strong>it is read by the second consumer retry-0.</strong> Is it a bug or did I make here some configuration mistake?</p>\n<hr />\n<p>SOLUTION:\nThis issue was already raised here:\n<a href=\"https://github.com/spring-projects/spring-kafka/issues/2282\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-kafka/issues/2282</a></p>\n<p>It was solved in 3.0.0.</p>\n"},{"tags":["java","sql","flyway","micronaut"],"comments":[{"owner":{"account_id":930977,"reputation":8260,"user_id":960875,"accept_rate":98,"display_name":"saw303"},"score":0,"creation_date":1680094334,"post_id":75877153,"comment_id":133838454,"body_markdown":"Why do you declare `runtimeOnly(&quot;org.flywaydb:flyway-core&quot;)`? IMO, thats not necessary since it is a transitive dependency of `io.micronaut.flyway:micronaut-flyway`","body":"Why do you declare <code>runtimeOnly(&quot;org.flywaydb:flyway-core&quot;)</code>? IMO, thats not necessary since it is a transitive dependency of <code>io.micronaut.flyway:micronaut-flyway</code>"}],"answers":[{"tags":[],"owner":{"account_id":930977,"reputation":8260,"user_id":960875,"accept_rate":98,"display_name":"saw303"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1680094207,"creation_date":1680094207,"answer_id":75877472,"question_id":75877153,"body_markdown":"Make sure you add the datasource name `default` to your Flyway configuration.\r\n\r\n```yml\r\nflyway:\r\n  datasources:\r\n    default:\r\n      enabled: true\r\n```\r\n\r\nAnd you don&#39;t need to copy the credentials and the connection string.","title":"micronaut not creating table Flyway","body":"<p>Make sure you add the datasource name <code>default</code> to your Flyway configuration.</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>flyway:\n  datasources:\n    default:\n      enabled: true\n</code></pre>\n<p>And you don't need to copy the credentials and the connection string.</p>\n"}],"owner":{"account_id":27479976,"reputation":97,"user_id":20967366,"display_name":"panic08"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":191,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75877472,"answer_count":1,"score":1,"last_activity_date":1680094207,"creation_date":1680092545,"question_id":75877153,"body_markdown":"I have a problem. I want the person table to be created when micronaut starts up. To do this, I use flyway, connected the dependency like this:\r\n```\r\n    //----Micronaut Data\r\n    implementation(&quot;io.micronaut.data:micronaut-data-jdbc&quot;)\r\n    implementation(&quot;io.micronaut.sql:micronaut-jdbc-hikari&quot;)\r\n    implementation(&quot;io.micronaut.sql:micronaut-jooq&quot;)\r\n\r\n    //---FlyWay and Postgresql\r\n    runtimeOnly(&quot;org.postgresql:postgresql&quot;)\r\n    implementation(&quot;io.micronaut.flyway:micronaut-flyway&quot;)\r\n    runtimeOnly(&quot;org.flywaydb:flyway-core&quot;)\r\n```\r\nFurther, in application.yml I wrote the configuration for Flyway. I will send the entire application yml file:\r\n```\r\nmicronaut:\r\n  application:\r\n    name: demo7\r\n  server:\r\n    port: 9000\r\ndatasources:\r\n  default:\r\n    driver-class-name: org.postgresql.Driver\r\n    db-type: postgres\r\n    dialect: POSTGRES\r\n    username: postgres\r\n    url: jdbc:postgresql://localhost:5432/disa\r\n    password: 1234\r\n\r\nnetty:\r\n  default:\r\n    allocator:\r\n      max-order: 3\r\nflyway:\r\n  datasources:\r\n    enabled: true\r\n    url: jdbc:postgresql://localhost:5432/disa\r\n    username: postgres\r\n    password: 1234\r\n```\r\nWhen the application starts, no errors are thrown, but the table is not created either. My db.migration path looks like this:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/pWOyB.png\r\nName of my SQL script: **V1_1__create_all_tables.sql**\r\nHelp me please.\r\nMy sql script:\r\n```\r\nCREATE TABLE person(\r\n                       id   bigint primary key not null,\r\n                       name varchar(255)       not null,\r\n                       age  int                not null\r\n)\r\n```","title":"micronaut not creating table Flyway","body":"<p>I have a problem. I want the person table to be created when micronaut starts up. To do this, I use flyway, connected the dependency like this:</p>\n<pre><code>    //----Micronaut Data\n    implementation(&quot;io.micronaut.data:micronaut-data-jdbc&quot;)\n    implementation(&quot;io.micronaut.sql:micronaut-jdbc-hikari&quot;)\n    implementation(&quot;io.micronaut.sql:micronaut-jooq&quot;)\n\n    //---FlyWay and Postgresql\n    runtimeOnly(&quot;org.postgresql:postgresql&quot;)\n    implementation(&quot;io.micronaut.flyway:micronaut-flyway&quot;)\n    runtimeOnly(&quot;org.flywaydb:flyway-core&quot;)\n</code></pre>\n<p>Further, in application.yml I wrote the configuration for Flyway. I will send the entire application yml file:</p>\n<pre><code>micronaut:\n  application:\n    name: demo7\n  server:\n    port: 9000\ndatasources:\n  default:\n    driver-class-name: org.postgresql.Driver\n    db-type: postgres\n    dialect: POSTGRES\n    username: postgres\n    url: jdbc:postgresql://localhost:5432/disa\n    password: 1234\n\nnetty:\n  default:\n    allocator:\n      max-order: 3\nflyway:\n  datasources:\n    enabled: true\n    url: jdbc:postgresql://localhost:5432/disa\n    username: postgres\n    password: 1234\n</code></pre>\n<p>When the application starts, no errors are thrown, but the table is not created either. My db.migration path looks like this:\n<a href=\"https://i.stack.imgur.com/pWOyB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pWOyB.png\" alt=\"enter image description here\" /></a></p>\n<p>Name of my SQL script: <strong>V1_1__create_all_tables.sql</strong>\nHelp me please.\nMy sql script:</p>\n<pre><code>CREATE TABLE person(\n                       id   bigint primary key not null,\n                       name varchar(255)       not null,\n                       age  int                not null\n)\n</code></pre>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1669142074,"post_id":74537293,"comment_id":131575643,"body_markdown":"Sorry - not a regex writing service here. Furthermore, for parsing complex nesting, regexes really are not your friend","body":"Sorry - not a regex writing service here. Furthermore, for parsing complex nesting, regexes really are not your friend"}],"answers":[{"tags":[],"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669142696,"creation_date":1669142696,"answer_id":74537632,"question_id":74537293,"body_markdown":"Given that you&#39;ve already parsed out the values into a String, you can simply split and collect them into a Map&lt;String, String&gt;.\r\n\r\n\r\n    String valueOutOfRegex = &quot;[start:0 ms, material requests:0 ms, fulfilled requests:329 ms, sum responses:1 ms, total:330 ms]&quot;; // Your String that you&#39;ve parsed\r\n    String valueWithRemovedBrackets = valueOutOfRegex.substring(1, valueOutOfRegex.length() - 1); // remove the leading and trailing brackets\r\n    Map&lt;String, String&gt; simpleMap = Arrays.stream(valueWithRemovedBrackets.split(&quot;,&quot;)).collect(Collectors.toMap(s1 -&gt; s1.split(&quot;:&quot;)[0].trim(), s1 -&gt; s1.split(&quot;:&quot;)[1]));  // collect into a Map\r\n\r\nThis will give you a Map&lt;String, String&gt; that looks like this:\r\n\r\n    {total=330 ms, fulfilled requests=329 ms, material requests=0 ms, start=0 ms, sum responses=1 ms}\r\n\r\n","title":"how to read sub string containing a key and value of a string containing square brackets using java","body":"<p>Given that you've already parsed out the values into a String, you can simply split and collect them into a Map&lt;String, String&gt;.</p>\n<pre><code>String valueOutOfRegex = &quot;[start:0 ms, material requests:0 ms, fulfilled requests:329 ms, sum responses:1 ms, total:330 ms]&quot;; // Your String that you've parsed\nString valueWithRemovedBrackets = valueOutOfRegex.substring(1, valueOutOfRegex.length() - 1); // remove the leading and trailing brackets\nMap&lt;String, String&gt; simpleMap = Arrays.stream(valueWithRemovedBrackets.split(&quot;,&quot;)).collect(Collectors.toMap(s1 -&gt; s1.split(&quot;:&quot;)[0].trim(), s1 -&gt; s1.split(&quot;:&quot;)[1]));  // collect into a Map\n</code></pre>\n<p>This will give you a Map&lt;String, String&gt; that looks like this:</p>\n<pre><code>{total=330 ms, fulfilled requests=329 ms, material requests=0 ms, start=0 ms, sum responses=1 ms}\n</code></pre>\n"}],"owner":{"account_id":8817595,"reputation":33,"user_id":6588518,"display_name":"Dominic"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1669805697,"accepted_answer_id":74537632,"answer_count":1,"score":0,"last_activity_date":1680094021,"creation_date":1669140698,"question_id":74537293,"body_markdown":"Have got following string reading the docker logs   \r\nExample:\r\n```none\r\nxmen logging; xmenID=642c7ded-2fef-4aa3-ba08-0b6ab7f7a5e0; period=[name:search, actions:[start:0 ms, material requests:0 ms, fulfilled requests:329 ms, sum responses:1 ms, total:330 ms]]\r\n```\r\nAnd using the regex and have got following string\r\n```none\r\n[start:0 ms, material requests:0 ms, fulfilled requests:329 ms, sum responses:1 ms, total:330 ms]\r\n```\r\nHow to fetch the values of `start` and `material requests` in order to check that their values are not less than zero (using java)?","title":"how to read sub string containing a key and value of a string containing square brackets using java","body":"<p>Have got following string reading the docker logs<br />\nExample:</p>\n<pre class=\"lang-none prettyprint-override\"><code>xmen logging; xmenID=642c7ded-2fef-4aa3-ba08-0b6ab7f7a5e0; period=[name:search, actions:[start:0 ms, material requests:0 ms, fulfilled requests:329 ms, sum responses:1 ms, total:330 ms]]\n</code></pre>\n<p>And using the regex and have got following string</p>\n<pre class=\"lang-none prettyprint-override\"><code>[start:0 ms, material requests:0 ms, fulfilled requests:329 ms, sum responses:1 ms, total:330 ms]\n</code></pre>\n<p>How to fetch the values of <code>start</code> and <code>material requests</code> in order to check that their values are not less than zero (using java)?</p>\n"},{"tags":["java","spring","spring-cloud","spring-cloud-stream","amazon-kinesis"],"comments":[{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1680061282,"post_id":75872643,"comment_id":133831137,"body_markdown":"Adding your dependencies (build.gradle or pom.xml) would also be helpful","body":"Adding your dependencies (build.gradle or pom.xml) would also be helpful"}],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680093969,"creation_date":1680093969,"answer_id":75877422,"question_id":75872643,"body_markdown":"Use `StreamBridge` to send arbitrary messages. `Supplier&lt;?&gt;` is for a polled message source.\r\n\r\nhttps://docs.spring.io/spring-cloud-stream/docs/current/reference/html/spring-cloud-stream.html#_sending_arbitrary_data_to_an_output_e_g_foreign_event_driven_sources","title":"Spring Cloud Stream 3.1 sending event","body":"<p>Use <code>StreamBridge</code> to send arbitrary messages. <code>Supplier&lt;?&gt;</code> is for a polled message source.</p>\n<p><a href=\"https://docs.spring.io/spring-cloud-stream/docs/current/reference/html/spring-cloud-stream.html#_sending_arbitrary_data_to_an_output_e_g_foreign_event_driven_sources\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-cloud-stream/docs/current/reference/html/spring-cloud-stream.html#_sending_arbitrary_data_to_an_output_e_g_foreign_event_driven_sources</a></p>\n"}],"owner":{"account_id":18802709,"reputation":51,"user_id":13712704,"display_name":"shrek_23"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":326,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680093969,"creation_date":1680057420,"question_id":75872643,"body_markdown":"I&#39;m in the process of upgrading a service from spring cloud stream 2.0 to 3.1\r\n\r\nPreviously for publishing to a Kinesis stream I had\r\n```\r\n@Component\r\npublic class KinesisStreamService {\r\n    private final Log logger = LogFactory.getLog(this.getClass());\r\n    private StreamProcessor orderOut;\r\n\r\n    @Autowired\r\n    public KinesisStreamService(StreamProcessor orderOut) {\r\n        this.orderOut = orderOut;\r\n    }\r\n\r\n    public void send(String event) {\r\n        if (event != null) {\r\n            this.orderOut.ordersOut().send(new GenericMessage(event));\r\n            this.logger.debug(&quot;Event sent KinesisInStreamServiceImpl : &quot; + event);\r\n        } else {\r\n            throw new RuntimeException(&quot;Event can not be null&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n```\r\n@Service\r\npublic interface StreamProcessor {\r\n    String INPUT = &quot;ordersIn&quot;;\r\n\r\n    @Output\r\n    MessageChannel ordersOut();\r\n\r\n    @Input\r\n    SubscribableChannel ordersIn();\r\n}\r\n\r\n```\r\nNow `@Ouput` has been depreciated in favor functional programming in 3.1\r\n\r\nhttps://stackoverflow.com/questions/65576021/enablebinding-deprecated-as-of-3-1-in-favor-of-functional-programming-model, mentions creating a Supplier bean\r\nlike\r\n```\r\n@Service\r\nclass PubSubSendQueue {\r\n    @Bean\r\n    public Supplier&lt;String&gt; output(){\r\n        return Supplier { &quot;Adam&quot; }\r\n    }\r\n}\r\n```\r\nBut how would I define a Supplier bean, given I would need to pass in an argument to the bean definition function at run time\r\nWould lazy initialization of the bean be an appropriate solution.\r\nSomething like\r\n```\r\n    @Bean\r\n    @Lazy\r\n    public Supplier&lt;GenericMessage&gt; ordersOut(String event) {\r\n        return () -&gt; new GenericMessage(event);\r\n    }\r\n```\r\n\r\ndependencies are\r\n\r\n```\r\ndependencies {\r\n    implementation &#39;org.apache.activemq:activemq-broker:5.17.2&#39;\r\n    implementation &#39;com.amazonaws:aws-java-sdk:1.12.310&#39;\r\n    implementation &#39;com.amazonaws:amazon-sqs-java-messaging-lib:1.1.0&#39;\r\n    implementation &#39;org.springframework.integration:spring-integration-aws:2.5.4&#39;\r\n    implementation &#39;org.springframework.cloud:spring-cloud-stream-binder-kinesis:3.0.0&#39;\r\n    implementation &#39;org.springframework:spring-web:6.0.0&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter:3.0.5&#39;\r\n    implementation &#39;javax.xml.bind:jaxb-api:2.3.0&#39;\r\n    implementation &#39;com.sun.xml.bind:jaxb-impl:2.3.6&#39;\r\n    implementation &#39;org.glassfish.jaxb:jaxb-runtime:2.3.6&#39;\r\n    implementation &#39;javax.activation:activation:1.1.1&#39;\r\n    implementation &#39;org.apache.httpcomponents.client5:httpclient5:5.2.1&#39;\r\n    testImplementation &#39;org.codehaus.groovy:groovy-all:2.5.18&#39;\r\n    testImplementation &#39;org.spockframework:spock-spring:1.3-groovy-2.5&#39;\r\n    testImplementation &#39;org.spockframework:spock-core:1.3-groovy-2.5&#39;\r\n    testImplementation &#39;org.springframework:spring-test:6.0.0&#39;\r\n    implementation &#39;cglib:cglib-nodep:3.2.7&#39;\r\n    implementation group: &#39;org.springframework&#39;, name: &#39;spring-jms&#39;, version: &#39;6.0.0&#39;\r\n    implementation &#39;com.fasterxml.jackson.core:jackson-databind:2.14.0-rc1&#39;\r\n    implementation group: &#39;com.fasterxml.jackson.dataformat&#39;, name: &#39;jackson-dataformat-cbor&#39;, version: &#39;2.13.4&#39;\r\n    implementation &#39;javax.jms:javax.jms-api:2.0.1&#39;\r\n    implementation &#39;javax.validation:validation-api:2.0.1.Final&#39;\r\n    implementation &quot;jakarta.xml.bind:jakarta.xml.bind-api:2.3.2&quot;\r\n    implementation &quot;org.glassfish.jaxb:jaxb-runtime:2.3.2&quot;\r\n```","title":"Spring Cloud Stream 3.1 sending event","body":"<p>I'm in the process of upgrading a service from spring cloud stream 2.0 to 3.1</p>\n<p>Previously for publishing to a Kinesis stream I had</p>\n<pre><code>@Component\npublic class KinesisStreamService {\n    private final Log logger = LogFactory.getLog(this.getClass());\n    private StreamProcessor orderOut;\n\n    @Autowired\n    public KinesisStreamService(StreamProcessor orderOut) {\n        this.orderOut = orderOut;\n    }\n\n    public void send(String event) {\n        if (event != null) {\n            this.orderOut.ordersOut().send(new GenericMessage(event));\n            this.logger.debug(&quot;Event sent KinesisInStreamServiceImpl : &quot; + event);\n        } else {\n            throw new RuntimeException(&quot;Event can not be null&quot;);\n        }\n    }\n}\n</code></pre>\n<pre><code>@Service\npublic interface StreamProcessor {\n    String INPUT = &quot;ordersIn&quot;;\n\n    @Output\n    MessageChannel ordersOut();\n\n    @Input\n    SubscribableChannel ordersIn();\n}\n\n</code></pre>\n<p>Now <code>@Ouput</code> has been depreciated in favor functional programming in 3.1</p>\n<p><a href=\"https://stackoverflow.com/questions/65576021/enablebinding-deprecated-as-of-3-1-in-favor-of-functional-programming-model\">@EnableBinding @deprecated as of 3.1 in favor of functional programming model</a>, mentions creating a Supplier bean\nlike</p>\n<pre><code>@Service\nclass PubSubSendQueue {\n    @Bean\n    public Supplier&lt;String&gt; output(){\n        return Supplier { &quot;Adam&quot; }\n    }\n}\n</code></pre>\n<p>But how would I define a Supplier bean, given I would need to pass in an argument to the bean definition function at run time\nWould lazy initialization of the bean be an appropriate solution.\nSomething like</p>\n<pre><code>    @Bean\n    @Lazy\n    public Supplier&lt;GenericMessage&gt; ordersOut(String event) {\n        return () -&gt; new GenericMessage(event);\n    }\n</code></pre>\n<p>dependencies are</p>\n<pre><code>dependencies {\n    implementation 'org.apache.activemq:activemq-broker:5.17.2'\n    implementation 'com.amazonaws:aws-java-sdk:1.12.310'\n    implementation 'com.amazonaws:amazon-sqs-java-messaging-lib:1.1.0'\n    implementation 'org.springframework.integration:spring-integration-aws:2.5.4'\n    implementation 'org.springframework.cloud:spring-cloud-stream-binder-kinesis:3.0.0'\n    implementation 'org.springframework:spring-web:6.0.0'\n    implementation 'org.springframework.boot:spring-boot-starter:3.0.5'\n    implementation 'javax.xml.bind:jaxb-api:2.3.0'\n    implementation 'com.sun.xml.bind:jaxb-impl:2.3.6'\n    implementation 'org.glassfish.jaxb:jaxb-runtime:2.3.6'\n    implementation 'javax.activation:activation:1.1.1'\n    implementation 'org.apache.httpcomponents.client5:httpclient5:5.2.1'\n    testImplementation 'org.codehaus.groovy:groovy-all:2.5.18'\n    testImplementation 'org.spockframework:spock-spring:1.3-groovy-2.5'\n    testImplementation 'org.spockframework:spock-core:1.3-groovy-2.5'\n    testImplementation 'org.springframework:spring-test:6.0.0'\n    implementation 'cglib:cglib-nodep:3.2.7'\n    implementation group: 'org.springframework', name: 'spring-jms', version: '6.0.0'\n    implementation 'com.fasterxml.jackson.core:jackson-databind:2.14.0-rc1'\n    implementation group: 'com.fasterxml.jackson.dataformat', name: 'jackson-dataformat-cbor', version: '2.13.4'\n    implementation 'javax.jms:javax.jms-api:2.0.1'\n    implementation 'javax.validation:validation-api:2.0.1.Final'\n    implementation &quot;jakarta.xml.bind:jakarta.xml.bind-api:2.3.2&quot;\n    implementation &quot;org.glassfish.jaxb:jaxb-runtime:2.3.2&quot;\n</code></pre>\n"},{"tags":["java","azure","azure-cosmosdb","azureservicebus","azure-storage-queues"],"answers":[{"tags":[],"owner":{"account_id":14422052,"reputation":6211,"user_id":10417839,"display_name":"PramodValavala"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680093271,"creation_date":1680093271,"answer_id":75877288,"question_id":75583571,"body_markdown":"I&#39;m not 100% sure about the error message itself but looks like you are returning a log message instead of a JSON string of the document. Refer [this example][1] from the docs and the same of which can be done using a Service Bus Queue Trigger as well.\r\n\r\nHere is the code sample from the docs for reference\r\n\r\n```java\r\n@FunctionName(&quot;getItem&quot;)\r\n@CosmosDBOutput(name = &quot;database&quot;,\r\n  databaseName = &quot;ToDoList&quot;,\r\n  collectionName = &quot;Items&quot;,\r\n  connectionStringSetting = &quot;AzureCosmosDBConnection&quot;)\r\npublic String cosmosDbQueryById(\r\n    @QueueTrigger(name = &quot;msg&quot;,\r\n      queueName = &quot;myqueue-items&quot;,\r\n      connection = &quot;AzureWebJobsStorage&quot;)\r\n    String message,\r\n    final ExecutionContext context)  {\r\n     return &quot;{ id: \\&quot;&quot; + System.currentTimeMillis() + &quot;\\&quot;, Description: &quot; + message + &quot; }&quot;;\r\n   }\r\n```\r\n\r\nIf you need to store the envelope object as is, you should just return it directly as a JSON string.\r\n\r\n  [1]: https://learn.microsoft.com/en-us/azure/azure-functions/functions-bindings-cosmosdb-v2-output?tabs=in-process%2Cfunctionsv2&amp;pivots=programming-language-java#queue-trigger-save-message-to-database-via-return-value","title":"Azure Storage Queue to Cosmos DB","body":"<p>I'm not 100% sure about the error message itself but looks like you are returning a log message instead of a JSON string of the document. Refer <a href=\"https://learn.microsoft.com/en-us/azure/azure-functions/functions-bindings-cosmosdb-v2-output?tabs=in-process%2Cfunctionsv2&amp;pivots=programming-language-java#queue-trigger-save-message-to-database-via-return-value\" rel=\"nofollow noreferrer\">this example</a> from the docs and the same of which can be done using a Service Bus Queue Trigger as well.</p>\n<p>Here is the code sample from the docs for reference</p>\n<pre class=\"lang-java prettyprint-override\"><code>@FunctionName(&quot;getItem&quot;)\n@CosmosDBOutput(name = &quot;database&quot;,\n  databaseName = &quot;ToDoList&quot;,\n  collectionName = &quot;Items&quot;,\n  connectionStringSetting = &quot;AzureCosmosDBConnection&quot;)\npublic String cosmosDbQueryById(\n    @QueueTrigger(name = &quot;msg&quot;,\n      queueName = &quot;myqueue-items&quot;,\n      connection = &quot;AzureWebJobsStorage&quot;)\n    String message,\n    final ExecutionContext context)  {\n     return &quot;{ id: \\&quot;&quot; + System.currentTimeMillis() + &quot;\\&quot;, Description: &quot; + message + &quot; }&quot;;\n   }\n</code></pre>\n<p>If you need to store the envelope object as is, you should just return it directly as a JSON string.</p>\n"}],"owner":{"account_id":27785102,"reputation":11,"user_id":21212734,"display_name":"ScottG"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":130,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680093271,"creation_date":1677518251,"question_id":75583571,"body_markdown":"I am trying to receive a payload from a http trigger and send payload with an envelope to the Service Bus and eventually Cosmos DB so I can perform CRUD operations.\r\n\r\nThe payload is properly received and given an envelope and the envelope is properly sent to and received from the Service Bus. Unfortunately I have not been able to figure out how to send a message from the Service Bus to Cosmos DB without a brand new http trigger so I have resorted to trying to set up a Storage Queue in order to send the message. If it is possible to do this with a Service Bus, please let me know how. Otherwise, I have no clue why I am getting this error when running my program. Below are all of the code segments and error messages:\r\n\r\nHandler.java:\r\n```\r\nimport java.util.*;\r\nimport com.microsoft.azure.functions.annotation.*;\r\nimport com.microsoft.azure.functions.*;\r\n\r\npublic class Handler {\r\n\r\n    @FunctionName(&quot;HttpHandler&quot;)\r\n    public HttpResponseMessage runHttp(\r\n            @HttpTrigger(name = &quot;req&quot;, methods = {HttpMethod.GET, HttpMethod.POST}, authLevel = AuthorizationLevel.ANONYMOUS)\r\n            HttpRequestMessage&lt;Optional&lt;String&gt;&gt; req, ExecutionContext context) {\r\n        try {\r\n        \r\n            // request to String (payload)\r\n            String request = req.getBody().get();\r\n            // build Envelope\r\n            MessageEnvelope env = cf.buildEnvelope(request, context);\r\n            // log \r\n            CfLog envelope = cf.log(env, context, request);\r\n            // send envelope to Service Bus Queue\r\n            ServiceBusSend.send(envelope);\r\n            // send envelope to Storage Queue\r\n            context.getLogger().info(StorageQueueSend.send(envelope));\r\n            // Create in Cosmos\r\n            //context.getLogger().info(CosmosOperation.create(envelope, context));\r\n            \r\n            context.getLogger().info(&quot;Made it 1&quot;);\r\n            return req.createResponseBuilder(HttpStatus.OK).body(&quot;Data logged&quot;).build();\r\n        } catch (Exception e) {\r\n            // log the exception\r\n            context.getLogger().severe(e.toString());\r\n            return req.createResponseBuilder(HttpStatus.INTERNAL_SERVER_ERROR).body(&quot;An error occurred&quot;).build();\r\n        }\r\n    }\r\n\r\n    @FunctionName(&quot;ReceiveFromQueue&quot;)\r\n    public void runReceiveFromQueue(\r\n            @ServiceBusQueueTrigger(name= &quot;envelope&quot;, queueName = &quot;hyperscalerapi-queue&quot;, connection = &quot;hyperScalerAPIServiceBus&quot;)\r\n            CfLog envelope, final ExecutionContext context) {\r\n        try {       \r\n            context.getLogger().info(envelope.toString());\r\n            context.getLogger().info(&quot;Made it 2&quot;);\r\n            // Cosmos DB upload\r\n\r\n        } catch (Exception e) {\r\n            context.getLogger().severe(&quot;An error occurred while processing the message: &quot; + e.getMessage());\r\n        }\r\n    }\r\n}`\r\n```\r\n\r\nStorageQueueSend.java:\r\n```\r\nimport com.azure.storage.queue.QueueClientBuilder;\r\nimport com.azure.storage.queue.models.QueueStorageException;\r\n\r\nimport org.mozilla.javascript.tools.shell.Environment;\r\n\r\nimport com.azure.storage.queue.QueueClient;\r\n\r\npublic class StorageQueueSend {\r\n    public static String send(CfLog envelope) {\r\n        try{\r\n            System.out.println(System.getenv(&quot;hyperScalerAPIStorageQueue&quot;));\r\n            QueueClient queueClient = new QueueClientBuilder()\r\n                                            .connectionString(System.getenv(&quot;hyperScalerAPIStorageQueue&quot;))\r\n                                            .queueName(&quot;hyperscalerapistorage-queue&quot;)\r\n                                            .buildClient();\r\n            queueClient.sendMessage(envelope.toString());\r\n            return &quot;Envelope added to storage queue\\n&quot;;\r\n        } catch(QueueStorageException e) {\r\n            return e.getMessage();\r\n        }\r\n    }\r\n}`\r\n```\r\nCosmosOperation.java (function currently commented out because above function doesn&#39;t work):\r\n```\r\nimport com.microsoft.azure.functions.annotation.*;\r\nimport com.microsoft.azure.functions.*;\r\nimport java.util.*;\r\nimport java.util.logging.*;\r\nimport com.microsoft.azure.documentdb.Document;\r\n\r\n/**\r\n * Azure Functions in Java with Cosmos DB Trigger.\r\n */\r\npublic class CosmosOperation {\r\n    @FunctionName(&quot;create&quot;)\r\n    @CosmosDBOutput(name = &quot;database&quot;, databaseName = &quot;hyperscalerapi-cosmos-dev&quot;, collectionName = &quot;Items&quot;,\r\n            connectionStringSetting = &quot;cosmosDBConnectionString&quot;)\r\n        public static String create (\r\n            @QueueTrigger(name = &quot;envelope&quot;, queueName = &quot;hyperscalerapi-queue&quot;,\r\n            connection = &quot;hyperScalerAPIStorageQueue&quot;) CfLog envelope,\r\n            final ExecutionContext context) {\r\n                return &quot;Payload: &quot; + envelope.getPayload() + &quot;\\nWith ID: &quot; + \r\n                envelope.getExecution().getCorrelationId() + &quot;added to Cosmos DB&quot;;\r\n            }\r\n}`\r\n```\r\nError messages when running (never actually completes run, I have to terminate):\r\n```none\r\n[2023-02-27T17:12:43.295Z] Function &quot;ReceiveFromQueue&quot; (Id: ece2405b-1ddf-4f48-a1d9-9d35f4fe4d83) invoked by Java Worker\r\n[2023-02-27T17:12:43.386Z] Executed &#39;Functions.ReceiveFromQueue&#39; (Succeeded, Id=ece2405b-1ddf-4f48-a1d9-9d35f4fe4d83, Duration=173ms)\r\n[2023-02-27T17:12:44.571Z] Feb 27, 2023 12:12:44 PM io.netty.channel.ChannelInitializer exceptionCaught\r\n[2023-02-27T17:12:44.576Z] WARNING: Failed to initialize a channel. Closing: [id: 0x62de8a42]\r\n[2023-02-27T17:12:44.578Z] java.lang.NoSuchMethodError: &#39;void io.netty.handler.codec.http.HttpClientCodec.&lt;init&gt;(int, int, int, boolean, boolean, int, boolean, boolean)&#39;\r\n...\r\n[2023-02-27T17:12:44.751Z]      at reactor.core.publisher.FluxRetryWhen$RetryWhenMainSubscriber.onError(FluxRetryWhen.java:192)\r\n[2023-02-27T17:12:44.752Z]      at reactor.core.publisher.MonoCreate$DefaultMonoSink.error(MonoCreate.java:201)\r\n[2023-02-27T17:12:44.753Z]      at reactor.netty.http.client.HttpClientConnect$MonoHttpConnect$ClientTransportSubscriber.onError(HttpClientConnect.java:304)\r\n[2023-02-27T17:12:44.754Z]      at reactor.core.publisher.MonoCreate$DefaultMonoSink.error(MonoCreate.java:201)\r\n[2023-02-27T17:12:44.757Z]      at reactor.netty.resources.DefaultPooledConnectionProvider$DisposableAcquire.onError(DefaultPooledConnectionProvider.java:172)\r\n[2023-02-27T17:12:44.760Z]      at reactor.netty.internal.shaded.reactor.pool.AbstractPool$Borrower.fail(AbstractPool.java:445)\r\n[2023-02-27T17:12:44.762Z]      at reactor.netty.internal.shaded.reactor.pool.SimpleDequePool.lambda$drainLoop$9(SimpleDequePool.java:400)\r\n[2023-02-27T17:12:44.765Z]      at reactor.core.publisher.FluxDoOnEach$DoOnEachSubscriber.onError(FluxDoOnEach.java:186)\r\n[2023-02-27T17:12:44.766Z]      at reactor.core.publisher.MonoCreate$DefaultMonoSink.error(MonoCreate.java:201)\r\n[2023-02-27T17:12:44.768Z]      at reactor.netty.resources.DefaultPooledConnectionProvider$PooledConnectionAllocator$PooledConnectionInitializer.onError(DefaultPooledConnectionProvider.java:554)\r\n[2023-02-27T17:12:44.770Z]      at reactor.core.publisher.MonoFlatMap$FlatMapMain.secondError(MonoFlatMap.java:192)\r\n[2023-02-27T17:12:44.771Z]      at reactor.core.publisher.MonoFlatMap$FlatMapInner.onError(MonoFlatMap.java:259)\r\n[2023-02-27T17:12:44.776Z]      at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onError(FluxOnErrorResume.java:106)\r\n[2023-02-27T17:12:44.778Z]      at reactor.core.publisher.Operators.error(Operators.java:198)\r\n[2023-02-27T17:12:44.780Z]      at reactor.core.publisher.MonoError.subscribe(MonoError.java:53)\r\n[2023-02-27T17:12:44.781Z]      at reactor.core.publisher.Mono.subscribe(Mono.java:4490)\r\n[2023-02-27T17:12:44.782Z]      at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onError(FluxOnErrorResume.java:103)\r\n[2023-02-27T17:12:44.782Z]      at reactor.netty.transport.TransportConnector$MonoChannelPromise.tryFailure(TransportConnector.java:517)\r\n[2023-02-27T17:12:44.783Z]      at reactor.netty.transport.TransportConnector$MonoChannelPromise.setFailure(TransportConnector.java:471)\r\n```\r\nThis is just a snippet of the error messages. It keeps going.","title":"Azure Storage Queue to Cosmos DB","body":"<p>I am trying to receive a payload from a http trigger and send payload with an envelope to the Service Bus and eventually Cosmos DB so I can perform CRUD operations.</p>\n<p>The payload is properly received and given an envelope and the envelope is properly sent to and received from the Service Bus. Unfortunately I have not been able to figure out how to send a message from the Service Bus to Cosmos DB without a brand new http trigger so I have resorted to trying to set up a Storage Queue in order to send the message. If it is possible to do this with a Service Bus, please let me know how. Otherwise, I have no clue why I am getting this error when running my program. Below are all of the code segments and error messages:</p>\n<p>Handler.java:</p>\n<pre><code>import java.util.*;\nimport com.microsoft.azure.functions.annotation.*;\nimport com.microsoft.azure.functions.*;\n\npublic class Handler {\n\n    @FunctionName(&quot;HttpHandler&quot;)\n    public HttpResponseMessage runHttp(\n            @HttpTrigger(name = &quot;req&quot;, methods = {HttpMethod.GET, HttpMethod.POST}, authLevel = AuthorizationLevel.ANONYMOUS)\n            HttpRequestMessage&lt;Optional&lt;String&gt;&gt; req, ExecutionContext context) {\n        try {\n        \n            // request to String (payload)\n            String request = req.getBody().get();\n            // build Envelope\n            MessageEnvelope env = cf.buildEnvelope(request, context);\n            // log \n            CfLog envelope = cf.log(env, context, request);\n            // send envelope to Service Bus Queue\n            ServiceBusSend.send(envelope);\n            // send envelope to Storage Queue\n            context.getLogger().info(StorageQueueSend.send(envelope));\n            // Create in Cosmos\n            //context.getLogger().info(CosmosOperation.create(envelope, context));\n            \n            context.getLogger().info(&quot;Made it 1&quot;);\n            return req.createResponseBuilder(HttpStatus.OK).body(&quot;Data logged&quot;).build();\n        } catch (Exception e) {\n            // log the exception\n            context.getLogger().severe(e.toString());\n            return req.createResponseBuilder(HttpStatus.INTERNAL_SERVER_ERROR).body(&quot;An error occurred&quot;).build();\n        }\n    }\n\n    @FunctionName(&quot;ReceiveFromQueue&quot;)\n    public void runReceiveFromQueue(\n            @ServiceBusQueueTrigger(name= &quot;envelope&quot;, queueName = &quot;hyperscalerapi-queue&quot;, connection = &quot;hyperScalerAPIServiceBus&quot;)\n            CfLog envelope, final ExecutionContext context) {\n        try {       \n            context.getLogger().info(envelope.toString());\n            context.getLogger().info(&quot;Made it 2&quot;);\n            // Cosmos DB upload\n\n        } catch (Exception e) {\n            context.getLogger().severe(&quot;An error occurred while processing the message: &quot; + e.getMessage());\n        }\n    }\n}`\n</code></pre>\n<p>StorageQueueSend.java:</p>\n<pre><code>import com.azure.storage.queue.QueueClientBuilder;\nimport com.azure.storage.queue.models.QueueStorageException;\n\nimport org.mozilla.javascript.tools.shell.Environment;\n\nimport com.azure.storage.queue.QueueClient;\n\npublic class StorageQueueSend {\n    public static String send(CfLog envelope) {\n        try{\n            System.out.println(System.getenv(&quot;hyperScalerAPIStorageQueue&quot;));\n            QueueClient queueClient = new QueueClientBuilder()\n                                            .connectionString(System.getenv(&quot;hyperScalerAPIStorageQueue&quot;))\n                                            .queueName(&quot;hyperscalerapistorage-queue&quot;)\n                                            .buildClient();\n            queueClient.sendMessage(envelope.toString());\n            return &quot;Envelope added to storage queue\\n&quot;;\n        } catch(QueueStorageException e) {\n            return e.getMessage();\n        }\n    }\n}`\n</code></pre>\n<p>CosmosOperation.java (function currently commented out because above function doesn't work):</p>\n<pre><code>import com.microsoft.azure.functions.annotation.*;\nimport com.microsoft.azure.functions.*;\nimport java.util.*;\nimport java.util.logging.*;\nimport com.microsoft.azure.documentdb.Document;\n\n/**\n * Azure Functions in Java with Cosmos DB Trigger.\n */\npublic class CosmosOperation {\n    @FunctionName(&quot;create&quot;)\n    @CosmosDBOutput(name = &quot;database&quot;, databaseName = &quot;hyperscalerapi-cosmos-dev&quot;, collectionName = &quot;Items&quot;,\n            connectionStringSetting = &quot;cosmosDBConnectionString&quot;)\n        public static String create (\n            @QueueTrigger(name = &quot;envelope&quot;, queueName = &quot;hyperscalerapi-queue&quot;,\n            connection = &quot;hyperScalerAPIStorageQueue&quot;) CfLog envelope,\n            final ExecutionContext context) {\n                return &quot;Payload: &quot; + envelope.getPayload() + &quot;\\nWith ID: &quot; + \n                envelope.getExecution().getCorrelationId() + &quot;added to Cosmos DB&quot;;\n            }\n}`\n</code></pre>\n<p>Error messages when running (never actually completes run, I have to terminate):</p>\n<pre class=\"lang-none prettyprint-override\"><code>[2023-02-27T17:12:43.295Z] Function &quot;ReceiveFromQueue&quot; (Id: ece2405b-1ddf-4f48-a1d9-9d35f4fe4d83) invoked by Java Worker\n[2023-02-27T17:12:43.386Z] Executed 'Functions.ReceiveFromQueue' (Succeeded, Id=ece2405b-1ddf-4f48-a1d9-9d35f4fe4d83, Duration=173ms)\n[2023-02-27T17:12:44.571Z] Feb 27, 2023 12:12:44 PM io.netty.channel.ChannelInitializer exceptionCaught\n[2023-02-27T17:12:44.576Z] WARNING: Failed to initialize a channel. Closing: [id: 0x62de8a42]\n[2023-02-27T17:12:44.578Z] java.lang.NoSuchMethodError: 'void io.netty.handler.codec.http.HttpClientCodec.&lt;init&gt;(int, int, int, boolean, boolean, int, boolean, boolean)'\n...\n[2023-02-27T17:12:44.751Z]      at reactor.core.publisher.FluxRetryWhen$RetryWhenMainSubscriber.onError(FluxRetryWhen.java:192)\n[2023-02-27T17:12:44.752Z]      at reactor.core.publisher.MonoCreate$DefaultMonoSink.error(MonoCreate.java:201)\n[2023-02-27T17:12:44.753Z]      at reactor.netty.http.client.HttpClientConnect$MonoHttpConnect$ClientTransportSubscriber.onError(HttpClientConnect.java:304)\n[2023-02-27T17:12:44.754Z]      at reactor.core.publisher.MonoCreate$DefaultMonoSink.error(MonoCreate.java:201)\n[2023-02-27T17:12:44.757Z]      at reactor.netty.resources.DefaultPooledConnectionProvider$DisposableAcquire.onError(DefaultPooledConnectionProvider.java:172)\n[2023-02-27T17:12:44.760Z]      at reactor.netty.internal.shaded.reactor.pool.AbstractPool$Borrower.fail(AbstractPool.java:445)\n[2023-02-27T17:12:44.762Z]      at reactor.netty.internal.shaded.reactor.pool.SimpleDequePool.lambda$drainLoop$9(SimpleDequePool.java:400)\n[2023-02-27T17:12:44.765Z]      at reactor.core.publisher.FluxDoOnEach$DoOnEachSubscriber.onError(FluxDoOnEach.java:186)\n[2023-02-27T17:12:44.766Z]      at reactor.core.publisher.MonoCreate$DefaultMonoSink.error(MonoCreate.java:201)\n[2023-02-27T17:12:44.768Z]      at reactor.netty.resources.DefaultPooledConnectionProvider$PooledConnectionAllocator$PooledConnectionInitializer.onError(DefaultPooledConnectionProvider.java:554)\n[2023-02-27T17:12:44.770Z]      at reactor.core.publisher.MonoFlatMap$FlatMapMain.secondError(MonoFlatMap.java:192)\n[2023-02-27T17:12:44.771Z]      at reactor.core.publisher.MonoFlatMap$FlatMapInner.onError(MonoFlatMap.java:259)\n[2023-02-27T17:12:44.776Z]      at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onError(FluxOnErrorResume.java:106)\n[2023-02-27T17:12:44.778Z]      at reactor.core.publisher.Operators.error(Operators.java:198)\n[2023-02-27T17:12:44.780Z]      at reactor.core.publisher.MonoError.subscribe(MonoError.java:53)\n[2023-02-27T17:12:44.781Z]      at reactor.core.publisher.Mono.subscribe(Mono.java:4490)\n[2023-02-27T17:12:44.782Z]      at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onError(FluxOnErrorResume.java:103)\n[2023-02-27T17:12:44.782Z]      at reactor.netty.transport.TransportConnector$MonoChannelPromise.tryFailure(TransportConnector.java:517)\n[2023-02-27T17:12:44.783Z]      at reactor.netty.transport.TransportConnector$MonoChannelPromise.setFailure(TransportConnector.java:471)\n</code></pre>\n<p>This is just a snippet of the error messages. It keeps going.</p>\n"},{"tags":["java","spring-boot","docker","debugging"],"comments":[{"owner":{"account_id":9941523,"reputation":1018,"user_id":7357959,"display_name":"Tsvetoslav Tsvetkov"},"score":0,"creation_date":1680093297,"post_id":75877224,"comment_id":133838129,"body_markdown":"Did you do k8s port-forwarding?","body":"Did you do k8s port-forwarding?"},{"owner":{"account_id":6414100,"reputation":2253,"user_id":4972832,"accept_rate":83,"display_name":"Pranav MS"},"score":0,"creation_date":1680093811,"post_id":75877224,"comment_id":133838304,"body_markdown":"@TsvetoslavTsvetkov no I didn&#39;t","body":"@TsvetoslavTsvetkov no I didn&#39;t"},{"owner":{"account_id":9941523,"reputation":1018,"user_id":7357959,"display_name":"Tsvetoslav Tsvetkov"},"score":0,"creation_date":1680096046,"post_id":75877224,"comment_id":133838986,"body_markdown":"try out with - kubectl port-forward &lt;&lt;POD_NAME&gt;&gt; 5005:5005","body":"try out with - kubectl port-forward &lt;&lt;POD_NAME&gt;&gt; 5005:5005"}],"owner":{"account_id":6414100,"reputation":2253,"user_id":4972832,"accept_rate":83,"display_name":"Pranav MS"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680093017,"creation_date":1680093017,"question_id":75877224,"body_markdown":"I have spring boot service. i need to debug the service. but it is in docker container. \r\n\r\nI followed the guide lines from [here][1] but unfortunately I end up with some error. \r\n\r\nMy docker compose \r\n\r\n    version: &#39;3.3&#39;\r\n    services:\r\n      #Retaining mongo configuration even though we dont have repository\r\n      mongo:\r\n        image: mongo:3.6\r\n        ports:\r\n        - &quot;27017:27017&quot;\r\n        environment:\r\n          MONGO_INITDB_ROOT_USERNAME: root\r\n          MONGO_INITDB_ROOT_PASSWORD: root\r\n      rabbitmq:\r\n        image: rabbitmq:management\r\n        ports:\r\n        - &quot;5672:5672&quot;\r\n        - &quot;5671:5671&quot;\r\n        - &quot;15672:15672&quot;\r\n        environment:\r\n          RABBITMQ_DEFAULT_USER: root\r\n          RABBITMQ_DEFAULT_PASS: root\r\n      csig-generation:\r\n        build: .\r\n        container_name: &quot;docker-app&quot;\r\n        ports:\r\n          - &#39;8080:8080&#39;\r\n          - &#39;5005:5005&#39;\r\n        environment:\r\n          - JAVA_TOOL_OPTIONS=-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005\r\n\r\nDebug configuration in intellij\r\n\r\n[![enter image description here][2]][2]\r\n\r\nRunning docker details\r\n[![enter image description here][3]][3]\r\n\r\nAfter attaching the debugger in intellij. the below output is got.\r\n&gt;Connected to the target VM, address: &#39;localhost:5005&#39;, transport: &#39;socket&#39;\r\n\r\nBut when I am trying to access the  API URL `http://localhost:8080/test/amtest` getting below error. Can anyone spot what is the mistake I did here.\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n  [1]: https://ckinan.com/blog/remote-debug-spring-boot-docker-intellij/\r\n  [2]: https://i.stack.imgur.com/TOUnV.png\r\n  [3]: https://i.stack.imgur.com/sUVpL.png\r\n  [4]: https://i.stack.imgur.com/wTxXc.png","title":"Spring boot debug through the docker container","body":"<p>I have spring boot service. i need to debug the service. but it is in docker container.</p>\n<p>I followed the guide lines from <a href=\"https://ckinan.com/blog/remote-debug-spring-boot-docker-intellij/\" rel=\"nofollow noreferrer\">here</a> but unfortunately I end up with some error.</p>\n<p>My docker compose</p>\n<pre><code>version: '3.3'\nservices:\n  #Retaining mongo configuration even though we dont have repository\n  mongo:\n    image: mongo:3.6\n    ports:\n    - &quot;27017:27017&quot;\n    environment:\n      MONGO_INITDB_ROOT_USERNAME: root\n      MONGO_INITDB_ROOT_PASSWORD: root\n  rabbitmq:\n    image: rabbitmq:management\n    ports:\n    - &quot;5672:5672&quot;\n    - &quot;5671:5671&quot;\n    - &quot;15672:15672&quot;\n    environment:\n      RABBITMQ_DEFAULT_USER: root\n      RABBITMQ_DEFAULT_PASS: root\n  csig-generation:\n    build: .\n    container_name: &quot;docker-app&quot;\n    ports:\n      - '8080:8080'\n      - '5005:5005'\n    environment:\n      - JAVA_TOOL_OPTIONS=-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005\n</code></pre>\n<p>Debug configuration in intellij</p>\n<p><a href=\"https://i.stack.imgur.com/TOUnV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TOUnV.png\" alt=\"enter image description here\" /></a></p>\n<p>Running docker details\n<a href=\"https://i.stack.imgur.com/sUVpL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sUVpL.png\" alt=\"enter image description here\" /></a></p>\n<p>After attaching the debugger in intellij. the below output is got.</p>\n<blockquote>\n<p>Connected to the target VM, address: 'localhost:5005', transport: 'socket'</p>\n</blockquote>\n<p>But when I am trying to access the  API URL <code>http://localhost:8080/test/amtest</code> getting below error. Can anyone spot what is the mistake I did here.</p>\n<p><a href=\"https://i.stack.imgur.com/wTxXc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wTxXc.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1680075878,"post_id":75874240,"comment_id":133833627,"body_markdown":"https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html","body":"<a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/uiswing/painting/index.html</a>"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1680078282,"post_id":75874240,"comment_id":133834195,"body_markdown":"You never call draw (from paintComponent) and repaint from actionPerformed","body":"You never call draw (from paintComponent) and repaint from actionPerformed"},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1680087343,"post_id":75874240,"comment_id":133836525,"body_markdown":"Perhaps this explanation from another [question about a Java Snake game](https://stackoverflow.com/questions/70701646/snake-game-in-java-but-my-restart-button-does-not-work/70711365#70711365) will be helpful to you.","body":"Perhaps this explanation from another <a href=\"https://stackoverflow.com/questions/70701646/snake-game-in-java-but-my-restart-button-does-not-work/70711365#70711365\">question about a Java Snake game</a> will be helpful to you."}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680092183,"creation_date":1680092183,"answer_id":75877082,"question_id":75874240,"body_markdown":"As was stated in the comments.  Some action is performed which here is to call `repaint()`.  That then causes `paintComponent` to be called which will draw the grid.\r\n```\r\npublic void paintComponent(Graphics g) {\r\n        super.paintComponent(g);\r\n        draw(g); //&lt;-- added\r\n}\r\n\r\n@Override\r\npublic void actionPerformed(ActionEvent e) {\r\n      repaint(); // &lt;--  added\r\n        \r\n}","title":"Graphics are not showing up in java swing window","body":"<p>As was stated in the comments.  Some action is performed which here is to call <code>repaint()</code>.  That then causes <code>paintComponent</code> to be called which will draw the grid.</p>\n<pre><code>public void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        draw(g); //&lt;-- added\n}\n\n@Override\npublic void actionPerformed(ActionEvent e) {\n      repaint(); // &lt;--  added\n        \n}\n</code></pre>\n"}],"owner":{"account_id":28155485,"reputation":1,"user_id":21516279,"display_name":"Evan Schulte"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1680092798,"creation_date":1680074357,"question_id":75874240,"body_markdown":"When I try and draw a grid in the window or draw a random at a random location, neither show up. The only thing I seem to be able to change is the background color. \r\n\r\nHere is the code for the program:\r\n\r\nSnakeGame:\r\n```java\r\npublic class SnakeGame {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tnew GameFrame();\r\n\t}\r\n}\r\n```\r\n\r\nGameFrame:\r\n```java\r\nimport javax.swing.JFrame;\r\n\r\npublic class GameFrame extends JFrame {\r\n\r\n\tGameFrame() {\r\n\t\tthis.add(new GamePanel());\r\n\t\tthis.setTitle(&quot;Snake&quot;);\r\n\t\tthis.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\tthis.setResizable(false);\r\n\t\tthis.pack();\r\n\t\tthis.setVisible(true);\r\n\t\tthis.setLocationRelativeTo(null);\r\n\t}\r\n}\r\n```\r\nGamePanel:\r\n```java\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\nimport javax.swing.*;\r\nimport java.util.Random;\r\n\r\npublic class GamePanel extends JPanel implements ActionListener {\r\n\tstatic final int SCREEN_WIDTH = 600;\r\n\tstatic final int SCREEN_HEIGHT = 600;\r\n\tstatic final int UNIT_SIZE = 25;\r\n\tstatic final int GAME_UNITS = (SCREEN_WIDTH * SCREEN_HEIGHT) / UNIT_SIZE;\r\n\tstatic final int DELAY = 75;\r\n\tfinal int x[] = new int[GAME_UNITS];\r\n\tfinal int y[] = new int[GAME_UNITS];\r\n\tint bodyParts = 6;\r\n\tint applesEaten;\r\n\tint appleX;\r\n\tint appleY;\r\n\tchar direction = &#39;R&#39;;\r\n\tboolean running = false;\r\n\tTimer timer;\r\n\tRandom random;\r\n\t\r\n\tGamePanel() {\r\n\t\trandom = new Random();\r\n\t\tthis.setPreferredSize(new Dimension(SCREEN_WIDTH, SCREEN_HEIGHT));\r\n\t\tthis.setBackground(Color.black);\r\n\t\tthis.setFocusable(true);\r\n\t\tthis.addKeyListener(new MyKeyAdapter());\r\n\t\tstartGame();\r\n\t}\r\n\t\r\n\tpublic void startGame() {\r\n\t\tnewApple();\r\n\t\trunning = true;\r\n\t\ttimer = new Timer(DELAY,this);\r\n\t\ttimer.start();\r\n\t}\r\n\t\r\n\tpublic void paintComponent(Graphics g) {\r\n\t\tsuper.paintComponent(g);\r\n\t}\r\n\t\r\n\tpublic void draw(Graphics g) {\r\n\t\tfor (int i = 0; i &lt; SCREEN_HEIGHT / UNIT_SIZE; i++) {\r\n\t\t\tg.drawLine(i * UNIT_SIZE, 0, i * UNIT_SIZE, SCREEN_HEIGHT);\r\n\t\t\tg.drawLine(0, i * UNIT_SIZE, SCREEN_WIDTH, i * UNIT_SIZE);\r\n\t\t}\r\n\t\tg.setColor(Color.red);\r\n\t\tg.fillOval(appleX, appleY, UNIT_SIZE, UNIT_SIZE);\r\n\t}\r\n\t\r\n\tpublic void newApple() {\r\n\t\tappleX = random.nextInt((int)(SCREEN_WIDTH / UNIT_SIZE)) * UNIT_SIZE;\r\n\t\tappleX = random.nextInt((int)(SCREEN_HEIGHT / UNIT_SIZE)) * UNIT_SIZE;\r\n\t}\r\n\t\r\n\tpublic void move() {\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic void checkApple() {\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic void checkCollisions() {\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic void gameOver(Graphics g) {\r\n\t\t\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void actionPerformed(ActionEvent e) {\r\n\t\t// TODO Auto-generated method stub\r\n\t}\r\n\t\r\n\tpublic class MyKeyAdapter extends KeyAdapter {\r\n\t\t@Override\r\n\t\tpublic void keyPressed(KeyEvent e) {\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nI tried using the `drawLine()`, `setColor()`, and `fillOval()` methods to draw a grid and make an &quot;apple&quot; but, when I do, nothing is shown in the window and all I see is the empty window with whichever background color I chose.\r\n```\r\ntype here\r\n```\r\n","title":"Graphics are not showing up in java swing window","body":"<p>When I try and draw a grid in the window or draw a random at a random location, neither show up. The only thing I seem to be able to change is the background color.</p>\n<p>Here is the code for the program:</p>\n<p>SnakeGame:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SnakeGame {\n\n    public static void main(String[] args) {\n        new GameFrame();\n    }\n}\n</code></pre>\n<p>GameFrame:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.swing.JFrame;\n\npublic class GameFrame extends JFrame {\n\n    GameFrame() {\n        this.add(new GamePanel());\n        this.setTitle(&quot;Snake&quot;);\n        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        this.setResizable(false);\n        this.pack();\n        this.setVisible(true);\n        this.setLocationRelativeTo(null);\n    }\n}\n</code></pre>\n<p>GamePanel:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\nimport java.util.Random;\n\npublic class GamePanel extends JPanel implements ActionListener {\n    static final int SCREEN_WIDTH = 600;\n    static final int SCREEN_HEIGHT = 600;\n    static final int UNIT_SIZE = 25;\n    static final int GAME_UNITS = (SCREEN_WIDTH * SCREEN_HEIGHT) / UNIT_SIZE;\n    static final int DELAY = 75;\n    final int x[] = new int[GAME_UNITS];\n    final int y[] = new int[GAME_UNITS];\n    int bodyParts = 6;\n    int applesEaten;\n    int appleX;\n    int appleY;\n    char direction = 'R';\n    boolean running = false;\n    Timer timer;\n    Random random;\n    \n    GamePanel() {\n        random = new Random();\n        this.setPreferredSize(new Dimension(SCREEN_WIDTH, SCREEN_HEIGHT));\n        this.setBackground(Color.black);\n        this.setFocusable(true);\n        this.addKeyListener(new MyKeyAdapter());\n        startGame();\n    }\n    \n    public void startGame() {\n        newApple();\n        running = true;\n        timer = new Timer(DELAY,this);\n        timer.start();\n    }\n    \n    public void paintComponent(Graphics g) {\n        super.paintComponent(g);\n    }\n    \n    public void draw(Graphics g) {\n        for (int i = 0; i &lt; SCREEN_HEIGHT / UNIT_SIZE; i++) {\n            g.drawLine(i * UNIT_SIZE, 0, i * UNIT_SIZE, SCREEN_HEIGHT);\n            g.drawLine(0, i * UNIT_SIZE, SCREEN_WIDTH, i * UNIT_SIZE);\n        }\n        g.setColor(Color.red);\n        g.fillOval(appleX, appleY, UNIT_SIZE, UNIT_SIZE);\n    }\n    \n    public void newApple() {\n        appleX = random.nextInt((int)(SCREEN_WIDTH / UNIT_SIZE)) * UNIT_SIZE;\n        appleX = random.nextInt((int)(SCREEN_HEIGHT / UNIT_SIZE)) * UNIT_SIZE;\n    }\n    \n    public void move() {\n        \n    }\n    \n    public void checkApple() {\n        \n    }\n    \n    public void checkCollisions() {\n        \n    }\n    \n    public void gameOver(Graphics g) {\n        \n    }\n    \n    @Override\n    public void actionPerformed(ActionEvent e) {\n        // TODO Auto-generated method stub\n    }\n    \n    public class MyKeyAdapter extends KeyAdapter {\n        @Override\n        public void keyPressed(KeyEvent e) {\n            \n        }\n    }\n}\n</code></pre>\n<p>I tried using the <code>drawLine()</code>, <code>setColor()</code>, and <code>fillOval()</code> methods to draw a grid and make an &quot;apple&quot; but, when I do, nothing is shown in the window and all I see is the empty window with whichever background color I chose.</p>\n<pre><code>type here\n</code></pre>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1680092043,"post_id":75877047,"comment_id":133837718,"body_markdown":"Well `jmrtd-0.7.36.jar` is clearly not a classname, so of course it can&#39;t find it.","body":"Well <code>jmrtd-0.7.36.jar</code> is clearly not a classname, so of course it can&#39;t find it."},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":1,"creation_date":1680092063,"post_id":75877047,"comment_id":133837727,"body_markdown":"&quot;*When i run it through cmd*&quot; Using what command?","body":"&quot;<i>When i run it through cmd</i>&quot; Using what command?"},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":1,"creation_date":1680092331,"post_id":75877047,"comment_id":133837822,"body_markdown":"Never heard of this thing, but from a little research it seems this is not an application. It&#39;s a library; you can&#39;t run it. It&#39;s a collection of classes designed to be used to build applications.","body":"Never heard of this thing, but from a little research it seems this is not an application. It&#39;s a library; you can&#39;t run it. It&#39;s a collection of classes designed to be used to build applications."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":2,"creation_date":1680092538,"post_id":75877047,"comment_id":133837902,"body_markdown":"Sounds like you wrote `java jmrtd-0.7.36.jar` when you should have written `java -jar jmrtd-0.7.36.jar`.","body":"Sounds like you wrote <code>java jmrtd-0.7.36.jar</code> when you should have written <code>java -jar jmrtd-0.7.36.jar</code>."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1680092728,"post_id":75877047,"comment_id":133837961,"body_markdown":"@Michael is right. That&#39;s not an app. It&#39;s an API","body":"@Michael is right. That&#39;s not an app. It&#39;s an API"},{"owner":{"account_id":28158050,"reputation":1,"user_id":21518476,"display_name":"ZeroNoc"},"score":0,"creation_date":1680094278,"post_id":75877047,"comment_id":133838431,"body_markdown":"Thanks guys, so what is needed to make it run?","body":"Thanks guys, so what is needed to make it run?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1680094360,"post_id":75877047,"comment_id":133838460,"body_markdown":"It won&#39;t ever run. It&#39;s not meant to. It&#39;s a *library*, an API. You need to understand what those words mean","body":"It won&#39;t ever run. It&#39;s not meant to. It&#39;s a <i>library</i>, an API. You need to understand what those words mean"}],"owner":{"account_id":28158050,"reputation":1,"user_id":21518476,"display_name":"ZeroNoc"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680092553,"creation_date":1680092002,"question_id":75877047,"body_markdown":"I am trying to run an app downloaded from maven. When i run it through cmd i get this error: \r\n\r\n```none\r\nError: Could not find or load main class jmrtd-0.7.36.jar\r\n\r\nCaused by: java.lang.ClassNotFoundException: jmrtd-0.7.36.jar\r\n```\r\n\r\nDouble clicking and open it directly but it has dependencies and don&#39;t know how to put it together ","title":"How to run a jar with all it&#39;s dependecies downloaded from maven?","body":"<p>I am trying to run an app downloaded from maven. When i run it through cmd i get this error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Error: Could not find or load main class jmrtd-0.7.36.jar\n\nCaused by: java.lang.ClassNotFoundException: jmrtd-0.7.36.jar\n</code></pre>\n<p>Double clicking and open it directly but it has dependencies and don't know how to put it together</p>\n"},{"tags":["java","hibernate","orm"],"answers":[{"tags":[],"owner":{"account_id":44973,"reputation":7596,"user_id":132270,"accept_rate":85,"display_name":"bert"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1277290856,"creation_date":1277290856,"answer_id":3100990,"question_id":3100950,"body_markdown":"The Exception says that you have no value assigned to field marked with @id in the Employee class. How that this class look like? Are you trying to generate the Id values through one of the provided generators or would you like to set them manually?\r\n","title":"Hibernate | Identifier Generation Exception","body":"<p>The Exception says that you have no value assigned to field marked with @id in the Employee class. How that this class look like? Are you trying to generate the Id values through one of the provided generators or would you like to set them manually?</p>\n"},{"tags":[],"owner":{"account_id":26957,"reputation":564361,"user_id":70604,"display_name":"Pascal Thivent"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1277294671,"creation_date":1277294671,"answer_id":3101383,"question_id":3100950,"body_markdown":"The exception message `ids for this class must be manually assigned before calling save()` is self explanatory. \r\n\r\nThis happens because you are using the `assigned` built-in generator. The `assigned` generator explicitly tells Hibernate that the application is going to assign the identifier. From the section [5.1.4.1. Generator][1]:\r\n\r\n&gt; lets the application assign an identifier to the object before `save()` is called. This is the default strategy if no `&lt;generator&gt;` element is specified. \r\n\r\nIf this is not what you want, use another generator, for example `native` (this \r\n*selects `identity`, `sequence` or `hilo` depending upon the capabilities of the underlying database*):\r\n\r\n    &lt;class name=&quot;LineItem&quot; table=&quot;`Line Item`&quot;&gt;\r\n      &lt;id name=&quot;id&quot; column=&quot;`Item Id`&quot;/&gt;\r\n        &lt;generator class=&quot;native&quot;/&gt;\r\n      &lt;/id&gt;\r\n      ...\r\n    &lt;/class&gt;\r\n\r\n  [1]: http://docs.jboss.org/hibernate/core/3.3/reference/en/html/mapping.html#mapping-declaration-id-generator","title":"Hibernate | Identifier Generation Exception","body":"<p>The exception message <code>ids for this class must be manually assigned before calling save()</code> is self explanatory. </p>\n\n<p>This happens because you are using the <code>assigned</code> built-in generator. The <code>assigned</code> generator explicitly tells Hibernate that the application is going to assign the identifier. From the section <a href=\"http://docs.jboss.org/hibernate/core/3.3/reference/en/html/mapping.html#mapping-declaration-id-generator\" rel=\"nofollow noreferrer\">5.1.4.1. Generator</a>:</p>\n\n<blockquote>\n  <p>lets the application assign an identifier to the object before <code>save()</code> is called. This is the default strategy if no <code>&lt;generator&gt;</code> element is specified. </p>\n</blockquote>\n\n<p>If this is not what you want, use another generator, for example <code>native</code> (this \n<em>selects <code>identity</code>, <code>sequence</code> or <code>hilo</code> depending upon the capabilities of the underlying database</em>):</p>\n\n<pre><code>&lt;class name=\"LineItem\" table=\"`Line Item`\"&gt;\n  &lt;id name=\"id\" column=\"`Item Id`\"/&gt;\n    &lt;generator class=\"native\"/&gt;\n  &lt;/id&gt;\n  ...\n&lt;/class&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":156573,"reputation":217,"user_id":373938,"accept_rate":71,"display_name":"Sonal Patil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1405419691,"creation_date":1277295299,"answer_id":3101464,"question_id":3100950,"body_markdown":"Use following kind of code to save employee\r\nif this is not helpful please paste mapping file to know details of field empCode.\r\n\r\n    helper = new HibernateHelper();\r\n    Customer custObject;\r\n     if (customer.getId() == 0) {\r\n                    custObject = new Customer();\r\n                    custObject.setCreatetimestamp(new Timestamp(System.currentTimeMillis()));\r\n                } else {\r\n                    custObject = (Customer) helper.getSession().load(Customer.class, customer.getId());\r\n                }\r\n                custObject.setName(customer.getName());\r\n                custObject.setAddress(customer.getAddress());\r\n                custObject.setBillToAddress(customer.getBillToAddress());\r\n                custObject.setBillToPerson(customer.getBillToPerson());\r\n                custObject.setUpdatetimestamp(new Timestamp(System.currentTimeMillis()));\r\n                custObject.setEmail(customer.getEmail());\r\n                custObject.setDeleted(false);\r\n                Currency curr = (Currency) helper.getSession().load(Currency.class, x);\r\n                custObject.setCurrencyId(curr);\r\n    \r\n                custId = (Long) helper.getSession().save(custObject);\r\n                helper.commit();","title":"Hibernate | Identifier Generation Exception","body":"<p>Use following kind of code to save employee\nif this is not helpful please paste mapping file to know details of field empCode.</p>\n\n<pre><code>helper = new HibernateHelper();\nCustomer custObject;\n if (customer.getId() == 0) {\n                custObject = new Customer();\n                custObject.setCreatetimestamp(new Timestamp(System.currentTimeMillis()));\n            } else {\n                custObject = (Customer) helper.getSession().load(Customer.class, customer.getId());\n            }\n            custObject.setName(customer.getName());\n            custObject.setAddress(customer.getAddress());\n            custObject.setBillToAddress(customer.getBillToAddress());\n            custObject.setBillToPerson(customer.getBillToPerson());\n            custObject.setUpdatetimestamp(new Timestamp(System.currentTimeMillis()));\n            custObject.setEmail(customer.getEmail());\n            custObject.setDeleted(false);\n            Currency curr = (Currency) helper.getSession().load(Currency.class, x);\n            custObject.setCurrencyId(curr);\n\n            custId = (Long) helper.getSession().save(custObject);\n            helper.commit();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13646162,"reputation":328,"user_id":9845110,"display_name":"rahulkesharwani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680092492,"creation_date":1680092492,"answer_id":75877138,"question_id":3100950,"body_markdown":"If you are using spring-boot JPA then you can simply add this annotation:\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Integer id;\r\n\r\nThis issue comes, when persistence layer doesn&#39;t have an option in place to generate/create value for primary key of the Entity in question. There are more options for primary key generation.\r\n\r\nYou can have a look at java docs for [GenerationType][1] \r\n\r\n\r\n  [1]: https://docs.oracle.com/javaee/6/api/javax/persistence/GenerationType.html","title":"Hibernate | Identifier Generation Exception","body":"<p>If you are using spring-boot JPA then you can simply add this annotation:</p>\n<pre><code>@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Integer id;\n</code></pre>\n<p>This issue comes, when persistence layer doesn't have an option in place to generate/create value for primary key of the Entity in question. There are more options for primary key generation.</p>\n<p>You can have a look at java docs for <a href=\"https://docs.oracle.com/javaee/6/api/javax/persistence/GenerationType.html\" rel=\"nofollow noreferrer\">GenerationType</a></p>\n"}],"owner":{"account_id":31643,"reputation":14953,"user_id":87072,"accept_rate":83,"display_name":"Switch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7976,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":3101383,"answer_count":4,"score":2,"last_activity_date":1680092492,"creation_date":1277290359,"question_id":3100950,"body_markdown":"I&#39;m getting an exception when I try to save some data through hibernate persistence layer, the exception is\r\n\r\n    org.hibernate.id.IdentifierGenerationException: ids for this class must be manually assigned before calling save(): hbm.Employee\r\n\r\n\r\n    public void saveEmployee(Employee empValue) {\r\n    \t\tSession session = null;\r\n    \t\tTransaction tx = null;\r\n    \t\tsession = HibernateSessionFactory.getSession();\r\n    \t\ttx = session.beginTransaction();\r\n    \t\tEmployee emp;\r\n    \t\tif (empValue.getEmpcode() != null) {\r\n    \t\t\temp = (Employee) session.get(Employee.class, empValue.getEmpcode());\r\n    \t\t\tif (emp != null) {\r\n    \t\t\t\tSystem.out.println(&quot;Test&quot;);\r\n    \t\t\t\temp.setEmpcode(empValue.getEmpcode());\r\n    \t\t\t\temp.setDepartment(createDepartment(&quot;DEEE&quot;));\r\n    \t\t\t\temp.setEmpfname(empValue.getEmpfname());\r\n    \t\t\t\temp.setEmplname(empValue.getEmplname());\r\n    \t\t\t\temp.setEmpdob(empValue.getEmpdob());\r\n    \t\t\t\temp.setEmpstatus(empValue.getEmpstatus());\r\n    \t\t\t\temp.setEmptelno(empValue.getEmptelno());\r\n    \t\t\t\temp.setAuditfield(empValue.getAuditfield());\r\n    \t\t\t\tsession.update(emp);\r\n    \t\t\t}\r\n    \t\t} else \r\n    \t\t{\r\n    \t\t\temp = new Employee();\r\n    \t\t\temp.setEmpcode(empValue.getEmpcode());\r\n    \t\t\temp.setDepartment(createDepartment(&quot;DEEE&quot;));\r\n    \t\t\temp.setEmpfname(empValue.getEmpfname());\r\n    \t\t\temp.setEmplname(empValue.getEmplname());\r\n    \t\t\temp.setEmpdob(empValue.getEmpdob());\r\n    \t\t\temp.setEmpstatus(empValue.getEmpstatus());\r\n    \t\t\temp.setEmptelno(empValue.getEmptelno());\r\n    \t\t\temp.setAuditfield(empValue.getAuditfield());\r\n    \t\t\tsession.save(emp);\r\n    \t\t}\r\n    \t\ttx.commit();\r\n    \t}\r\n\r\nas you can see the class get assigned within appropriate places, I&#39;m confused about the exception, expecting some help..","title":"Hibernate | Identifier Generation Exception","body":"<p>I'm getting an exception when I try to save some data through hibernate persistence layer, the exception is</p>\n\n<pre><code>org.hibernate.id.IdentifierGenerationException: ids for this class must be manually assigned before calling save(): hbm.Employee\n\n\npublic void saveEmployee(Employee empValue) {\n        Session session = null;\n        Transaction tx = null;\n        session = HibernateSessionFactory.getSession();\n        tx = session.beginTransaction();\n        Employee emp;\n        if (empValue.getEmpcode() != null) {\n            emp = (Employee) session.get(Employee.class, empValue.getEmpcode());\n            if (emp != null) {\n                System.out.println(\"Test\");\n                emp.setEmpcode(empValue.getEmpcode());\n                emp.setDepartment(createDepartment(\"DEEE\"));\n                emp.setEmpfname(empValue.getEmpfname());\n                emp.setEmplname(empValue.getEmplname());\n                emp.setEmpdob(empValue.getEmpdob());\n                emp.setEmpstatus(empValue.getEmpstatus());\n                emp.setEmptelno(empValue.getEmptelno());\n                emp.setAuditfield(empValue.getAuditfield());\n                session.update(emp);\n            }\n        } else \n        {\n            emp = new Employee();\n            emp.setEmpcode(empValue.getEmpcode());\n            emp.setDepartment(createDepartment(\"DEEE\"));\n            emp.setEmpfname(empValue.getEmpfname());\n            emp.setEmplname(empValue.getEmplname());\n            emp.setEmpdob(empValue.getEmpdob());\n            emp.setEmpstatus(empValue.getEmpstatus());\n            emp.setEmptelno(empValue.getEmptelno());\n            emp.setAuditfield(empValue.getAuditfield());\n            session.save(emp);\n        }\n        tx.commit();\n    }\n</code></pre>\n\n<p>as you can see the class get assigned within appropriate places, I'm confused about the exception, expecting some help..</p>\n"},{"tags":["java","playframework"],"comments":[{"owner":{"account_id":7034556,"reputation":12325,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":0,"creation_date":1680288346,"post_id":75877106,"comment_id":133878864,"body_markdown":"Any chance you&#39;re using `InputStream` somewhere? We&#39;ve had same errors when using them with Akka stream, removing these usages removed the errors.","body":"Any chance you&#39;re using <code>InputStream</code> somewhere? We&#39;ve had same errors when using them with Akka stream, removing these usages removed the errors."},{"owner":{"account_id":318349,"reputation":1633,"user_id":635524,"accept_rate":25,"display_name":"archie_by"},"score":0,"creation_date":1681220121,"post_id":75877106,"comment_id":134018688,"body_markdown":"no, the code we are using is almost identical to what is provided for the ForwardingBodyParser in the Play user guide. We are just altering a couple of headers. That&#39;s it","body":"no, the code we are using is almost identical to what is provided for the ForwardingBodyParser in the Play user guide. We are just altering a couple of headers. That&#39;s it"}],"owner":{"account_id":318349,"reputation":1633,"user_id":635524,"accept_rate":25,"display_name":"archie_by"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1680092345,"creation_date":1680092345,"question_id":75877106,"body_markdown":"We are using a slightly updated [ForwardingBodyParser][1] that does some additional request header manipulations, but is identical to the example otherwise.\r\n\r\nThe problem is that after upgrading from java play 2.6.11 to 2.8.19 we start to experience the following errors randomly (pretty seldom and mostly right after the application startup):\r\n\r\n    [[31merror[0m] http.Errors - Internal server error\r\n    java.util.concurrent.CompletionException: java.lang.IllegalStateException: Sink.asPublisher(fanout = false) only supports one subscriber (which is allowed, see reactive-streams specification, rule 1.11)\r\n    \tat java.base/java.util.concurrent.CompletableFuture.encodeThrowable(Unknown Source)\r\n    \tat java.base/java.util.concurrent.CompletableFuture.completeThrowable(Unknown Source)\r\n    \tat java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(Unknown Source)\r\n    \tat java.base/java.util.concurrent.CompletableFuture.postComplete(Unknown Source)\r\n    \tat java.base/java.util.concurrent.CompletableFuture.completeExceptionally(Unknown Source)\r\n    \tat scala.concurrent.java8.FuturesConvertersImpl$CF.apply(FutureConvertersImpl.scala:29)\r\n    \tat scala.concurrent.java8.FuturesConvertersImpl$CF.apply(FutureConvertersImpl.scala:26)\r\n    \tat scala.concurrent.impl.Promise$Transformation.run(Promise.scala:484)\r\n    \tat scala.concurrent.ExecutionContext$parasitic$.execute(ExecutionContext.scala:222)\r\n    \tat scala.concurrent.impl.Promise$Transformation.submitWithValue(Promise.scala:429)\r\n    Caused by: java.lang.IllegalStateException: Sink.asPublisher(fanout = false) only supports one subscriber (which is allowed, see reactive-streams specification, rule 1.11)\r\n    \tat akka.stream.impl.ReactiveStreamsCompliance$.rejectAdditionalSubscriber(ReactiveStreamsCompliance.scala:62)\r\n    \tat akka.stream.impl.VirtualPublisher.rec$6(StreamLayout.scala:481)\r\n    \tat akka.stream.impl.VirtualPublisher.subscribe(StreamLayout.scala:486)\r\n    \tat play.shaded.ahc.org.asynchttpclient.netty.request.body.NettyReactiveStreamsBody.write(NettyReactiveStreamsBody.java:60)\r\n    \tat play.shaded.ahc.org.asynchttpclient.netty.request.NettyRequestSender.writeRequest(NettyRequestSender.java:426)\r\n    \tat play.shaded.ahc.org.asynchttpclient.netty.channel.NettyConnectListener.writeRequest(NettyConnectListener.java:80)\r\n    \tat play.shaded.ahc.org.asynchttpclient.netty.channel.NettyConnectListener.access$100(NettyConnectListener.java:37)\r\n    \tat play.shaded.ahc.org.asynchttpclient.netty.channel.NettyConnectListener$1.onSuccess(NettyConnectListener.java:139)\r\n    \tat play.shaded.ahc.org.asynchttpclient.netty.channel.NettyConnectListener$1.onSuccess(NettyConnectListener.java:129)\r\n    \tat play.shaded.ahc.org.asynchttpclient.netty.SimpleFutureListener.operationComplete(SimpleFutureListener.java:24)\r\n\r\nIt seems like sometimes application subscribes twice to the `Source` in the `Accumulator`. I can reproduce the same issue 100% of times if I do it explicitly, but I&#39;d love to know how it could be happening in the Play internals and how it could be resolved\r\n\r\n  [1]: https://www.playframework.com/documentation/2.8.x/JavaBodyParsers#Directing-the-body-elsewhere","title":"Play Framework Forwarding Body Parser fails randomly after upgrading Play framework from 2.6.11 to 2.8.19","body":"<p>We are using a slightly updated <a href=\"https://www.playframework.com/documentation/2.8.x/JavaBodyParsers#Directing-the-body-elsewhere\" rel=\"nofollow noreferrer\">ForwardingBodyParser</a> that does some additional request header manipulations, but is identical to the example otherwise.</p>\n<p>The problem is that after upgrading from java play 2.6.11 to 2.8.19 we start to experience the following errors randomly (pretty seldom and mostly right after the application startup):</p>\n<pre><code>[[31merror[0m] http.Errors - Internal server error\njava.util.concurrent.CompletionException: java.lang.IllegalStateException: Sink.asPublisher(fanout = false) only supports one subscriber (which is allowed, see reactive-streams specification, rule 1.11)\n    at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(Unknown Source)\n    at java.base/java.util.concurrent.CompletableFuture.completeThrowable(Unknown Source)\n    at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(Unknown Source)\n    at java.base/java.util.concurrent.CompletableFuture.postComplete(Unknown Source)\n    at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(Unknown Source)\n    at scala.concurrent.java8.FuturesConvertersImpl$CF.apply(FutureConvertersImpl.scala:29)\n    at scala.concurrent.java8.FuturesConvertersImpl$CF.apply(FutureConvertersImpl.scala:26)\n    at scala.concurrent.impl.Promise$Transformation.run(Promise.scala:484)\n    at scala.concurrent.ExecutionContext$parasitic$.execute(ExecutionContext.scala:222)\n    at scala.concurrent.impl.Promise$Transformation.submitWithValue(Promise.scala:429)\nCaused by: java.lang.IllegalStateException: Sink.asPublisher(fanout = false) only supports one subscriber (which is allowed, see reactive-streams specification, rule 1.11)\n    at akka.stream.impl.ReactiveStreamsCompliance$.rejectAdditionalSubscriber(ReactiveStreamsCompliance.scala:62)\n    at akka.stream.impl.VirtualPublisher.rec$6(StreamLayout.scala:481)\n    at akka.stream.impl.VirtualPublisher.subscribe(StreamLayout.scala:486)\n    at play.shaded.ahc.org.asynchttpclient.netty.request.body.NettyReactiveStreamsBody.write(NettyReactiveStreamsBody.java:60)\n    at play.shaded.ahc.org.asynchttpclient.netty.request.NettyRequestSender.writeRequest(NettyRequestSender.java:426)\n    at play.shaded.ahc.org.asynchttpclient.netty.channel.NettyConnectListener.writeRequest(NettyConnectListener.java:80)\n    at play.shaded.ahc.org.asynchttpclient.netty.channel.NettyConnectListener.access$100(NettyConnectListener.java:37)\n    at play.shaded.ahc.org.asynchttpclient.netty.channel.NettyConnectListener$1.onSuccess(NettyConnectListener.java:139)\n    at play.shaded.ahc.org.asynchttpclient.netty.channel.NettyConnectListener$1.onSuccess(NettyConnectListener.java:129)\n    at play.shaded.ahc.org.asynchttpclient.netty.SimpleFutureListener.operationComplete(SimpleFutureListener.java:24)\n</code></pre>\n<p>It seems like sometimes application subscribes twice to the <code>Source</code> in the <code>Accumulator</code>. I can reproduce the same issue 100% of times if I do it explicitly, but I'd love to know how it could be happening in the Play internals and how it could be resolved</p>\n"},{"tags":["java","h2"],"comments":[{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1678223669,"post_id":75667019,"comment_id":133491090,"body_markdown":"The system tables schema you want to use is `INFORMATION_SCHEMA`, not `INFORMATION-SHEMA`. I have not tried your specific query, however. See [here](https://www.h2database.com/html/systemtables.html) for system tables documentation.","body":"The system tables schema you want to use is <code>INFORMATION_SCHEMA</code>, not <code>INFORMATION-SHEMA</code>. I have not tried your specific query, however. See <a href=\"https://www.h2database.com/html/systemtables.html\" rel=\"nofollow noreferrer\">here</a> for system tables documentation."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1678223783,"post_id":75667019,"comment_id":133491118,"body_markdown":"&quot;_reset all sequences_&quot;: If you want to reset a sequence, take a look at [Alter sequence in H2](https://stackoverflow.com/q/41100306/12567365)","body":"&quot;<i>reset all sequences</i>&quot;: If you want to reset a sequence, take a look at <a href=\"https://stackoverflow.com/q/41100306/12567365\">Alter sequence in H2</a>"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1678238806,"post_id":75667019,"comment_id":133493732,"body_markdown":"What exactly do you mean by &quot;reset&quot;?","body":"What exactly do you mean by &quot;reset&quot;?"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678239377,"creation_date":1678238580,"answer_id":75668652,"question_id":75667019,"body_markdown":"# Spelled: `INFORMATION_SCHEMA.SEQUENCES `\r\n\r\nYou said:\r\n\r\n&gt; retreive all the list of sequences from information-shema.sequences\r\n\r\nYou misspelled the schema name: hyphen rather than underscore, and missing a `c`.\r\n\r\n```java\r\n// Query for all sequences.\r\nString sql =\r\n        &quot;&quot;&quot;\r\n        SELECT *\r\n        FROM INFORMATION_SCHEMA.SEQUENCES  \r\n        ;\r\n        &quot;&quot;&quot;;\r\n```\r\n\r\nHere is a complete example app to query that table.\r\n\r\n```java\r\npackage work.basil.example.h2;\r\n\r\nimport javax.sql.*;\r\nimport java.sql.*;\r\n\r\npublic class App\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n        App app = new App();\r\n        app.demo();\r\n    }\r\n\r\n    private void demo ( )\r\n    {\r\n        DataSource dataSource = this.configureDataSource();\r\n        this.configureDatabase( dataSource );\r\n        this.dumpSequenceMetadata( dataSource );\r\n    }\r\n\r\n    private DataSource configureDataSource ( )\r\n    {\r\n        org.h2.jdbcx.JdbcDataSource ds = new org.h2.jdbcx.JdbcDataSource();  // Implementation of `DataSource` bundled with H2. You may choose to use some other implementation.\r\n        ds.setURL( &quot;jdbc:h2:mem:bogus;DB_CLOSE_DELAY=-1;&quot; );\r\n        ds.setUser( &quot;scott&quot; );\r\n        ds.setPassword( &quot;tiger&quot; );\r\n        ds.setDescription( &quot;An example database for accessing metadata on sequences.&quot; );\r\n        return ds;\r\n    }\r\n\r\n    private void configureDatabase ( final DataSource dataSource )\r\n    {\r\n        // Add a few rows to INFORMATION_SCHEMA.SEQUENCES table.\r\n        String sql =\r\n                &quot;&quot;&quot;\r\n                CREATE SEQUENCE employee_number_ \r\n                ;\r\n                CREATE SEQUENCE invoice_number_ START WITH 100\r\n                ;\r\n                &quot;&quot;&quot;;\r\n        try (\r\n                Connection conn = dataSource.getConnection() ;\r\n                Statement stmt = conn.createStatement()\r\n        )\r\n        {\r\n\r\n            System.out.println( &quot;INFO - Running `configureDatabase` method.&quot; );\r\n            stmt.executeUpdate( sql );\r\n        }\r\n        catch ( SQLException e ) { e.printStackTrace(); }\r\n    }\r\n\r\n    private void dumpSequenceMetadata ( DataSource dataSource )\r\n    {\r\n        // Query for all sequences.\r\n        String sql =\r\n                &quot;&quot;&quot;\r\n                SELECT *\r\n                FROM INFORMATION_SCHEMA.SEQUENCES  \r\n                ;\r\n                &quot;&quot;&quot;;\r\n        try\r\n                (\r\n                        Connection conn = dataSource.getConnection() ;\r\n                        Statement statement = conn.createStatement() ;\r\n                )\r\n        {\r\n            try (\r\n                    ResultSet resultSet = statement.executeQuery( sql ) ;\r\n            )\r\n            {\r\n                // The table structure of INFORMATION_SCHEMA.SEQUENCES is documented here:\r\n                // http://h2database.com/html/systemtables.html#information_schema_sequences\r\n                // Only a few of the columns are used here.\r\n                record Sequence( String catalog , String schema , String name , String dataType , long startValue , long baseValue ) { }\r\n                while ( resultSet.next() )\r\n                {\r\n                    Sequence sequence = new Sequence(\r\n                            resultSet.getString( &quot;SEQUENCE_CATALOG&quot; ) ,\r\n                            resultSet.getString( &quot;SEQUENCE_SCHEMA&quot; ) ,\r\n                            resultSet.getString( &quot;SEQUENCE_NAME&quot; ) ,\r\n                            resultSet.getString( &quot;DATA_TYPE&quot; ) ,\r\n                            resultSet.getLong( &quot;START_VALUE&quot; ) ,\r\n                            resultSet.getLong( &quot;BASE_VALUE&quot; )\r\n                    );\r\n                    // Dump each INFORMATION_SCHEMA.SEQUENCES row.\r\n                    System.out.println( &quot;sequence = &quot; + sequence );\r\n                }\r\n            }\r\n        }\r\n        catch ( SQLException e ) { e.printStackTrace(); }\r\n    }\r\n}\r\n```\r\n\r\nWhen run.\r\n\r\n```none\r\nsequence = Sequence[catalog=BOGUS, schema=PUBLIC, name=EMPLOYEE_NUMBER_, dataType=BIGINT, startValue=1, baseValue=1]\r\nsequence = Sequence[catalog=BOGUS, schema=PUBLIC, name=INVOICE_NUMBER_, dataType=BIGINT, startValue=100, baseValue=100]\r\n```\r\n\r\n# `ALTER SEQUENCE`\r\n\r\nYou said:\r\n\r\n&gt; reset all sequences\r\n\r\nYou neglected to specify exactly what you mean by &quot;reset&quot;.\r\n\r\nH2 provides the [`ALTER SEQUENCE`][1] command to change [some sequence options][2]. \r\n\r\nSee also this Question, [*Alter sequence in H2.*][3] \r\n\r\nBeware of transactions, as the documentation says &quot;rolling back this command has no effect&quot;. \r\n\r\n\r\n  [1]: http://h2database.com/html/commands.html#alter_sequence\r\n  [2]: http://h2database.com/html/grammar.html#alter_sequence_option\r\n  [3]: https://stackoverflow.com/q/41100306/642706","title":"H2 information shema not available verision 2. And more","body":"<h1>Spelled: <code>INFORMATION_SCHEMA.SEQUENCES </code></h1>\n<p>You said:</p>\n<blockquote>\n<p>retreive all the list of sequences from information-shema.sequences</p>\n</blockquote>\n<p>You misspelled the schema name: hyphen rather than underscore, and missing a <code>c</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Query for all sequences.\nString sql =\n        &quot;&quot;&quot;\n        SELECT *\n        FROM INFORMATION_SCHEMA.SEQUENCES  \n        ;\n        &quot;&quot;&quot;;\n</code></pre>\n<p>Here is a complete example app to query that table.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.h2;\n\nimport javax.sql.*;\nimport java.sql.*;\n\npublic class App\n{\n    public static void main ( String[] args )\n    {\n        App app = new App();\n        app.demo();\n    }\n\n    private void demo ( )\n    {\n        DataSource dataSource = this.configureDataSource();\n        this.configureDatabase( dataSource );\n        this.dumpSequenceMetadata( dataSource );\n    }\n\n    private DataSource configureDataSource ( )\n    {\n        org.h2.jdbcx.JdbcDataSource ds = new org.h2.jdbcx.JdbcDataSource();  // Implementation of `DataSource` bundled with H2. You may choose to use some other implementation.\n        ds.setURL( &quot;jdbc:h2:mem:bogus;DB_CLOSE_DELAY=-1;&quot; );\n        ds.setUser( &quot;scott&quot; );\n        ds.setPassword( &quot;tiger&quot; );\n        ds.setDescription( &quot;An example database for accessing metadata on sequences.&quot; );\n        return ds;\n    }\n\n    private void configureDatabase ( final DataSource dataSource )\n    {\n        // Add a few rows to INFORMATION_SCHEMA.SEQUENCES table.\n        String sql =\n                &quot;&quot;&quot;\n                CREATE SEQUENCE employee_number_ \n                ;\n                CREATE SEQUENCE invoice_number_ START WITH 100\n                ;\n                &quot;&quot;&quot;;\n        try (\n                Connection conn = dataSource.getConnection() ;\n                Statement stmt = conn.createStatement()\n        )\n        {\n\n            System.out.println( &quot;INFO - Running `configureDatabase` method.&quot; );\n            stmt.executeUpdate( sql );\n        }\n        catch ( SQLException e ) { e.printStackTrace(); }\n    }\n\n    private void dumpSequenceMetadata ( DataSource dataSource )\n    {\n        // Query for all sequences.\n        String sql =\n                &quot;&quot;&quot;\n                SELECT *\n                FROM INFORMATION_SCHEMA.SEQUENCES  \n                ;\n                &quot;&quot;&quot;;\n        try\n                (\n                        Connection conn = dataSource.getConnection() ;\n                        Statement statement = conn.createStatement() ;\n                )\n        {\n            try (\n                    ResultSet resultSet = statement.executeQuery( sql ) ;\n            )\n            {\n                // The table structure of INFORMATION_SCHEMA.SEQUENCES is documented here:\n                // http://h2database.com/html/systemtables.html#information_schema_sequences\n                // Only a few of the columns are used here.\n                record Sequence( String catalog , String schema , String name , String dataType , long startValue , long baseValue ) { }\n                while ( resultSet.next() )\n                {\n                    Sequence sequence = new Sequence(\n                            resultSet.getString( &quot;SEQUENCE_CATALOG&quot; ) ,\n                            resultSet.getString( &quot;SEQUENCE_SCHEMA&quot; ) ,\n                            resultSet.getString( &quot;SEQUENCE_NAME&quot; ) ,\n                            resultSet.getString( &quot;DATA_TYPE&quot; ) ,\n                            resultSet.getLong( &quot;START_VALUE&quot; ) ,\n                            resultSet.getLong( &quot;BASE_VALUE&quot; )\n                    );\n                    // Dump each INFORMATION_SCHEMA.SEQUENCES row.\n                    System.out.println( &quot;sequence = &quot; + sequence );\n                }\n            }\n        }\n        catch ( SQLException e ) { e.printStackTrace(); }\n    }\n}\n</code></pre>\n<p>When run.</p>\n<pre class=\"lang-none prettyprint-override\"><code>sequence = Sequence[catalog=BOGUS, schema=PUBLIC, name=EMPLOYEE_NUMBER_, dataType=BIGINT, startValue=1, baseValue=1]\nsequence = Sequence[catalog=BOGUS, schema=PUBLIC, name=INVOICE_NUMBER_, dataType=BIGINT, startValue=100, baseValue=100]\n</code></pre>\n<h1><code>ALTER SEQUENCE</code></h1>\n<p>You said:</p>\n<blockquote>\n<p>reset all sequences</p>\n</blockquote>\n<p>You neglected to specify exactly what you mean by &quot;reset&quot;.</p>\n<p>H2 provides the <a href=\"http://h2database.com/html/commands.html#alter_sequence\" rel=\"nofollow noreferrer\"><code>ALTER SEQUENCE</code></a> command to change <a href=\"http://h2database.com/html/grammar.html#alter_sequence_option\" rel=\"nofollow noreferrer\">some sequence options</a>.</p>\n<p>See also this Question, <a href=\"https://stackoverflow.com/q/41100306/642706\"><em>Alter sequence in H2.</em></a></p>\n<p>Beware of transactions, as the documentation says &quot;rolling back this command has no effect&quot;.</p>\n"},{"tags":[],"owner":{"account_id":16247179,"reputation":7205,"user_id":11731987,"display_name":"Evgenij Ryazanov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1678243827,"creation_date":1678243827,"answer_id":75669029,"question_id":75667019,"body_markdown":"You cannot restart all sequences with a single command, but you can construct a list of such commands and execute them all at once:\r\n```lang-java\r\nStatement s = …;\r\nResultSet rs = s.executeQuery(&quot;SELECT LISTAGG(&#39;ALTER SEQUENCE &#39;&quot;\r\n        + &quot; || QUOTE_IDENT(SEQUENCE_SCHEMA) || &#39;.&#39;  || QUOTE_IDENT(SEQUENCE_NAME)&quot;\r\n        + &quot; || &#39; RESTART&#39;, &#39;; &#39;) WITHIN GROUP (ORDER BY NULL)&quot;\r\n        + &quot; FROM INFORMATION_SCHEMA.SEQUENCES&quot;);\r\nrs.next();\r\ns.execute(rs.getString(1));\r\n```\r\n\r\n---\r\n\r\nActually there are only few valid use cases for sequences, usually you should use **identity columns** instead of them. [`TRUNCATE TABLE`][1] command has `RESTART IDENTITY` clause, so it is possible to remove all data from a table with identity column and reset its generator.\r\n\r\n  [1]: https://h2database.com/html/commands.html#truncate_table","title":"H2 information shema not available verision 2. And more","body":"<p>You cannot restart all sequences with a single command, but you can construct a list of such commands and execute them all at once:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Statement s = …;\nResultSet rs = s.executeQuery(&quot;SELECT LISTAGG('ALTER SEQUENCE '&quot;\n        + &quot; || QUOTE_IDENT(SEQUENCE_SCHEMA) || '.'  || QUOTE_IDENT(SEQUENCE_NAME)&quot;\n        + &quot; || ' RESTART', '; ') WITHIN GROUP (ORDER BY NULL)&quot;\n        + &quot; FROM INFORMATION_SCHEMA.SEQUENCES&quot;);\nrs.next();\ns.execute(rs.getString(1));\n</code></pre>\n<hr />\n<p>Actually there are only few valid use cases for sequences, usually you should use <strong>identity columns</strong> instead of them. <a href=\"https://h2database.com/html/commands.html#truncate_table\" rel=\"nofollow noreferrer\"><code>TRUNCATE TABLE</code></a> command has <code>RESTART IDENTITY</code> clause, so it is possible to remove all data from a table with identity column and reset its generator.</p>\n"}],"owner":{"account_id":11642838,"reputation":3,"user_id":8526704,"display_name":"Wael Yakoubi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75669029,"answer_count":2,"score":0,"last_activity_date":1680092146,"creation_date":1678222035,"question_id":75667019,"body_markdown":"Am trying to retreive all the list of sequences from information-shema.sequences that work on H2 1.4 but since upgrade 2. Or plus it’s no longer possible.\r\nAny other way to reset all sequences?\r\n\r\nSelect sequence_name from information_schema.sequences ","title":"H2 information shema not available verision 2. And more","body":"<p>Am trying to retreive all the list of sequences from information-shema.sequences that work on H2 1.4 but since upgrade 2. Or plus it’s no longer possible.\nAny other way to reset all sequences?</p>\n<p>Select sequence_name from information_schema.sequences</p>\n"},{"tags":["java","android","android-camera","issue-tracking","android-version"],"comments":[{"owner":{"account_id":2047476,"reputation":3789,"user_id":1827254,"accept_rate":62,"display_name":"Eselfar"},"score":0,"creation_date":1680101894,"post_id":75876139,"comment_id":133840947,"body_markdown":"`I am using Camera.Hardware library that I know is deprecated.` Maybe that&#39;s the issue? Also what are you referring to when you say `build version greater than 2.6.x.`?","body":"<code>I am using Camera.Hardware library that I know is deprecated.</code> Maybe that&#39;s the issue? Also what are you referring to when you say <code>build version greater than 2.6.x.</code>?"},{"owner":{"account_id":22541690,"reputation":37,"user_id":16732181,"display_name":"azaLiza"},"score":0,"creation_date":1680102943,"post_id":75876139,"comment_id":133841287,"body_markdown":"@Eselfar, I don&#39;t know if the issue comes from the fact that i am using camera hardware or not. If yes is there any way to convert all my camera hardware usages into camera2 API ? without having to recreate my app from scratch. \nBy build version i mean the build number of the phone&#39;s OS","body":"@Eselfar, I don&#39;t know if the issue comes from the fact that i am using camera hardware or not. If yes is there any way to convert all my camera hardware usages into camera2 API ? without having to recreate my app from scratch.  By build version i mean the build number of the phone&#39;s OS"},{"owner":{"account_id":2047476,"reputation":3789,"user_id":1827254,"accept_rate":62,"display_name":"Eselfar"},"score":1,"creation_date":1680104878,"post_id":75876139,"comment_id":133841879,"body_markdown":"Would be better to migrate to Camera2 or even better CameraX from the Jetpack library (`We recommend using the CameraX Jetpack library or, for specific use cases, the camera2, class. Both CameraX and Camera2 work on Android 5.0 (API level 21) and higher.` source: https://developer.android.com/guide/topics/media/camera)\n\nYou&#39;ll have to rewrite the camera part but not the rest of the app features.","body":"Would be better to migrate to Camera2 or even better CameraX from the Jetpack library (<code>We recommend using the CameraX Jetpack library or, for specific use cases, the camera2, class. Both CameraX and Camera2 work on Android 5.0 (API level 21) and higher.</code> source: <a href=\"https://developer.android.com/guide/topics/media/camera\" rel=\"nofollow noreferrer\">developer.android.com/guide/topics/media/camera</a>)  You&#39;ll have to rewrite the camera part but not the rest of the app features."}],"owner":{"account_id":22541690,"reputation":37,"user_id":16732181,"display_name":"azaLiza"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680092133,"creation_date":1680086448,"question_id":75876139,"body_markdown":"I am working on a custom camera app, everything works fine. But, recently I have discovered that my application does not behave the same on some devices. \r\n\r\nAt the end of my camera activity i tend to release the camera and stop the preview.\r\n\r\nAfter many researches, I found that the method that does the release of the camera is not working on the devices that have a build version greater than 2.6.x. The tests were realized on several devices and several android versions. The issue comes from the build version which seems to not stop the camera when it executes the &quot;camera.release()&quot; instruction.\r\n\r\n\r\n\r\n\r\nHere&#39;s my code that works perfectly on any other device that has a build version =&lt; 2.6.x \r\nPS: I am using Camera.Hardware library that I know is deprecated.\r\n\r\n\r\n```\r\nprivate void stopPreview () {\r\n        if ( camera != null) {\r\n            \r\n            if (camera != null) {\r\n                camera.release();\r\n            }\r\n            this.inPreview = false;\r\n            cameraReleased = true;\r\n            onAutofocus = false;\r\n        }\r\n    }\r\n```\r\n\r\nCan anyone help me please understand why camera.release() does not release the camera on those specific build versions?\r\n","title":"Camera not being released on Android 8.1.0 build version 2.8.4 on M3 mobiles","body":"<p>I am working on a custom camera app, everything works fine. But, recently I have discovered that my application does not behave the same on some devices.</p>\n<p>At the end of my camera activity i tend to release the camera and stop the preview.</p>\n<p>After many researches, I found that the method that does the release of the camera is not working on the devices that have a build version greater than 2.6.x. The tests were realized on several devices and several android versions. The issue comes from the build version which seems to not stop the camera when it executes the &quot;camera.release()&quot; instruction.</p>\n<p>Here's my code that works perfectly on any other device that has a build version =&lt; 2.6.x\nPS: I am using Camera.Hardware library that I know is deprecated.</p>\n<pre><code>private void stopPreview () {\n        if ( camera != null) {\n            \n            if (camera != null) {\n                camera.release();\n            }\n            this.inPreview = false;\n            cameraReleased = true;\n            onAutofocus = false;\n        }\n    }\n</code></pre>\n<p>Can anyone help me please understand why camera.release() does not release the camera on those specific build versions?</p>\n"},{"tags":["java","cosine-similarity","amazon-opensearch"],"owner":{"account_id":7568969,"reputation":31,"user_id":5743515,"display_name":"Gil Amsalem"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":209,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1680092040,"creation_date":1680092040,"question_id":75877055,"body_markdown":"I am trying to execute KNN approximate search using the OpenSearch Java client.\r\nI cant find any example nor documentation about it (both high-level and low-level clients).\r\n\r\n\r\nI am able to execute the command from the OpenSearch dashboard.\r\nFor example:\r\n\r\n```\r\nGET contentml-images-clip-batch1/_search\r\n{\r\n  &quot;size&quot;: 2,\r\n  &quot;query&quot;: {\r\n    &quot;knn&quot;: {\r\n      &quot;embedding&quot;: {\r\n        &quot;vector&quot;: [1,2,3],\r\n        &quot;k&quot;: 2\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nAny good reference for how to achieve the sam call using one of the Java clients?","title":"Execute KNN approximate search using OpenSearch Java client","body":"<p>I am trying to execute KNN approximate search using the OpenSearch Java client.\nI cant find any example nor documentation about it (both high-level and low-level clients).</p>\n<p>I am able to execute the command from the OpenSearch dashboard.\nFor example:</p>\n<pre><code>GET contentml-images-clip-batch1/_search\n{\n  &quot;size&quot;: 2,\n  &quot;query&quot;: {\n    &quot;knn&quot;: {\n      &quot;embedding&quot;: {\n        &quot;vector&quot;: [1,2,3],\n        &quot;k&quot;: 2\n      }\n    }\n  }\n}\n</code></pre>\n<p>Any good reference for how to achieve the sam call using one of the Java clients?</p>\n"},{"tags":["java","maven","jboss"],"answers":[{"tags":[],"owner":{"account_id":551394,"reputation":8315,"user_id":916225,"accept_rate":69,"display_name":"seenukarthi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680091958,"creation_date":1463980272,"answer_id":37383013,"question_id":37382738,"body_markdown":"The errors you mentioned are deployment errors those are not related to maven.\r\n\r\nTo add a JBoss module to your application create a file named `WEB-INF\\jboss-deployment-structure.xml` and add the module in dependency. In your case the file content should be as follows.\r\n\r\n\r\n    &lt;jboss-deployment-structure&gt;\r\n    \t&lt;deployment&gt;\r\n    \t\t&lt;dependencies&gt;\r\n    \t\t\t&lt;module name=&quot;org.bouncycastle&quot;/&gt;\r\n    \t\t&lt;/dependencies&gt;\r\n    \t&lt;/deployment&gt;\r\n    &lt;/jboss-deployment-structure&gt;\r\n\r\nWhile deployment, the jboss will load the module in to classpath.","title":"set provided scope in maven integrated with jboss","body":"<p>The errors you mentioned are deployment errors those are not related to maven.</p>\n<p>To add a JBoss module to your application create a file named <code>WEB-INF\\jboss-deployment-structure.xml</code> and add the module in dependency. In your case the file content should be as follows.</p>\n<pre><code>&lt;jboss-deployment-structure&gt;\n    &lt;deployment&gt;\n        &lt;dependencies&gt;\n            &lt;module name=&quot;org.bouncycastle&quot;/&gt;\n        &lt;/dependencies&gt;\n    &lt;/deployment&gt;\n&lt;/jboss-deployment-structure&gt;\n</code></pre>\n<p>While deployment, the jboss will load the module in to classpath.</p>\n"}],"owner":{"account_id":6806648,"reputation":1563,"user_id":5332629,"accept_rate":56,"display_name":"Hosein Aqajani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":962,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1680091958,"creation_date":1463978254,"question_id":37382738,"body_markdown":"I have developed a maven-based project (maven-3.3.9) using jboss-eap-6.4 in IntelliJIDEA 14.0. I am using `bouncy castle` libraries and I have to set them as `provided scope` in maven dependency. \r\n\r\n 1. Where exactly should I put the bouncy castle jar files?\r\n 2. What configuration should I set?\r\n\r\nI have tried two options for the 1st question as follows:\r\n\r\n - I put jar files here: `jboss-eap-6.4\\modules\\org\\bouncycastle\\main\\`\r\n\r\nand\r\n\r\n - I put jar files here: `jboss-eap-6.4\\modules\\system\\layers\\base\\org\\bouncycastle\\main\\`\r\n\r\nAlso, I have provided the following configuration in `module.xml` beside the jar files:\r\n\r\n    &lt;?xml version=1.0&quot; encoding=UTF-8&quot;?&gt;\r\n\r\n    &lt;module xmlns=&quot;run:jboss:module:1.1&quot; name=&quot;org.bouncycastle&quot;&gt;\r\n        &lt;resources&gt;\r\n            &lt;resource-root path=&quot;bcpkix-jdk15on-1.54.jar&quot;/&gt;\r\n            &lt;resource-root path=&quot;bcprov-jdk15on-1.54.jar&quot;/&gt;\r\n        &lt;/resources&gt;\r\n        \r\n        &lt;dependencies&gt;\r\n            &lt;module name=&quot;javax.api&quot; slot=&quot;main&quot; export=&quot;true&quot;/&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/module&gt;\r\n\r\nHowever, when I clean and install maven I get the following error:\r\n\r\n - error during artifact deploment\r\n - caused by java.lang.RunTimeException:...\r\n - caused by java.lang.NoClassDefFoundError:...\r\n - caused by java.lang.ClassNotFoundException:...","title":"set provided scope in maven integrated with jboss","body":"<p>I have developed a maven-based project (maven-3.3.9) using jboss-eap-6.4 in IntelliJIDEA 14.0. I am using <code>bouncy castle</code> libraries and I have to set them as <code>provided scope</code> in maven dependency. </p>\n\n<ol>\n<li>Where exactly should I put the bouncy castle jar files?</li>\n<li>What configuration should I set?</li>\n</ol>\n\n<p>I have tried two options for the 1st question as follows:</p>\n\n<ul>\n<li>I put jar files here: <code>jboss-eap-6.4\\modules\\org\\bouncycastle\\main\\</code></li>\n</ul>\n\n<p>and</p>\n\n<ul>\n<li>I put jar files here: <code>jboss-eap-6.4\\modules\\system\\layers\\base\\org\\bouncycastle\\main\\</code></li>\n</ul>\n\n<p>Also, I have provided the following configuration in <code>module.xml</code> beside the jar files:</p>\n\n<pre><code>&lt;?xml version=1.0\" encoding=UTF-8\"?&gt;\n\n&lt;module xmlns=\"run:jboss:module:1.1\" name=\"org.bouncycastle\"&gt;\n    &lt;resources&gt;\n        &lt;resource-root path=\"bcpkix-jdk15on-1.54.jar\"/&gt;\n        &lt;resource-root path=\"bcprov-jdk15on-1.54.jar\"/&gt;\n    &lt;/resources&gt;\n\n    &lt;dependencies&gt;\n        &lt;module name=\"javax.api\" slot=\"main\" export=\"true\"/&gt;\n    &lt;/dependencies&gt;\n&lt;/module&gt;\n</code></pre>\n\n<p>However, when I clean and install maven I get the following error:</p>\n\n<ul>\n<li>error during artifact deploment</li>\n<li>caused by java.lang.RunTimeException:...</li>\n<li>caused by java.lang.NoClassDefFoundError:...</li>\n<li>caused by java.lang.ClassNotFoundException:...</li>\n</ul>\n"},{"tags":["java","postgresql","mybatis"],"comments":[{"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"score":0,"creation_date":1679924908,"post_id":75856387,"comment_id":133803305,"body_markdown":"It seems that MyBatis think that in Java `app_id` is of type `Long` (wrong) instead of `String` (correct). Are you selecting, inserting, deleting, or updating the table?","body":"It seems that MyBatis think that in Java <code>app_id</code> is of type <code>Long</code> (wrong) instead of <code>String</code> (correct). Are you selecting, inserting, deleting, or updating the table?"},{"owner":{"account_id":3106126,"reputation":31241,"user_id":2628868,"accept_rate":84,"display_name":"Dolphin"},"score":0,"creation_date":1679966435,"post_id":75856387,"comment_id":133812238,"body_markdown":"when Insert record into the table shows this error, seems the mybatis think the first column is id.","body":"when Insert record into the table shows this error, seems the mybatis think the first column is id."},{"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"score":0,"creation_date":1680007713,"post_id":75856387,"comment_id":133820131,"body_markdown":"What java type are you defining for the `app_id` column?","body":"What java type are you defining for the <code>app_id</code> column?"},{"owner":{"account_id":3106126,"reputation":31241,"user_id":2628868,"accept_rate":84,"display_name":"Dolphin"},"score":0,"creation_date":1680012331,"post_id":75856387,"comment_id":133821596,"body_markdown":"I defined the appid data type to varchar","body":"I defined the appid data type to varchar"},{"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"score":0,"creation_date":1680021159,"post_id":75856387,"comment_id":133824278,"body_markdown":"That&#39;s the JDBC type. In Java, what&#39;s the type of the Java property in the Java class?","body":"That&#39;s the JDBC type. In Java, what&#39;s the type of the Java property in the Java class?"},{"owner":{"account_id":3106126,"reputation":31241,"user_id":2628868,"accept_rate":84,"display_name":"Dolphin"},"score":0,"creation_date":1680022755,"post_id":75856387,"comment_id":133824697,"body_markdown":"private String appId;","body":"private String appId;"},{"owner":{"account_id":6169361,"reputation":20329,"user_id":4808122,"accept_rate":89,"display_name":"Marmite Bomber"},"score":0,"creation_date":1680087418,"post_id":75856387,"comment_id":133836548,"body_markdown":"Please show your MyBatis mappings. In [Hibernate](https://stackoverflow.com/q/12647755/4808122) solved either with reordering of columns or with a `@Lob` annotation.","body":"Please show your MyBatis mappings. In <a href=\"https://stackoverflow.com/q/12647755/4808122\">Hibernate</a> solved either with reordering of columns or with a <code>@Lob</code> annotation."},{"owner":{"account_id":1314580,"reputation":3289,"user_id":1261766,"display_name":"ave"},"score":1,"creation_date":1680096866,"post_id":75856387,"comment_id":133839270,"body_markdown":"@Dolphin The error occurs when setting the generated key to `id` property of `UserSub`. When `keyColumn` is not specified, PostgreSQL returns all columns of the inserted row and the first column of the result set (probably) is `app_id`. The solution is to add `keyColumn=&quot;id&quot;` to `&lt;insert&gt;`.","body":"@Dolphin The error occurs when setting the generated key to <code>id</code> property of <code>UserSub</code>. When <code>keyColumn</code> is not specified, PostgreSQL returns all columns of the inserted row and the first column of the result set (probably) is <code>app_id</code>. The solution is to add <code>keyColumn=&quot;id&quot;</code> to <code>&lt;insert&gt;</code>."}],"owner":{"account_id":3106126,"reputation":31241,"user_id":2628868,"accept_rate":84,"display_name":"Dolphin"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":400,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1680091706,"creation_date":1679923922,"question_id":75856387,"body_markdown":"I am using PostgreSQL 13 as the backend database server, the MyBatis used to be the ORM framework, today I am facing a problem like this:\r\n\r\n    [20:34:19:196] [ERROR] - com.dolphin.soa.post.controller.impl.pay.alipay.AlipayNotificationController.handleNotification(AlipayNotificationController.java:85) - handle notification failed\r\n    org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.executor.ExecutorException: Error getting generated key or setting result to parameter object. Cause: org.apache.ibatis.executor.result.ResultMapException: Error attempting to get column #1 from result set.  Cause: org.postgresql.util.PSQLException: Bad value for type long : vOghoo10L9\r\n    \tat org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:96) ~[mybatis-spring-2.0.6.jar!/:2.0.6]\r\n    \tat org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441) ~[mybatis-spring-2.0.6.jar!/:2.0.6]\r\n    \tat com.sun.proxy.$Proxy147.insert(Unknown Source) ~[?:?]\r\n    \tat org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272) ~[mybatis-spring-2.0.6.jar!/:2.0.6]\r\n    \tat org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62) ~[mybatis-3.5.6.jar!/:3.5.6]\r\n    \tat org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152) ~[mybatis-3.5.6.jar!/:3.5.6]\r\n    \tat org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85) ~[mybatis-3.5.6.jar!/:3.5.6]\r\n    \tat com.sun.proxy.$Proxy181.insertSelective(Unknown Source) ~[?:?]\r\n    \tat com.dolphin.soa.post.service.impl.user.UserSubService.insertUserSub(UserSubService.java:57) ~[classes!/:?]\r\n    \tat com.dolphin.soa.post.service.impl.product.sub.IapProductSubHandler.handleNonSubScribe(IapProductSubHandler.java:87) ~[classes!/:?]\r\n    \tat com.dolphin.soa.post.service.impl.product.sub.IapProductSubHandler.handleSubByType(IapProductSubHandler.java:62) ~[classes!/:?]\r\n    \tat com.dolphin.soa.post.service.impl.product.sub.IapProductSubHandler.productPaySuccess(IapProductSubHandler.java:51) ~[classes!/:?]\r\n    \tat com.dolphin.soa.post.controller.impl.pay.alipay.AlipayNotificationController.handleNotificationImpl(AlipayNotificationController.java:117) ~[classes!/:?]\r\n    \tat com.dolphin.soa.post.controller.impl.pay.alipay.AlipayNotificationController.handleNotification(AlipayNotificationController.java:83) [classes!/:?]\r\n    \tat com.dolphin.soa.post.controller.impl.pay.alipay.AlipayNotificationController$$FastClassBySpringCGLIB$$a911fc6b.invoke(&lt;generated&gt;) [classes!/:?]\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) [spring-core-5.3.19.jar!/:5.3.19]\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) [spring-aop-5.3.19.jar!/:5.3.19]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) [spring-aop-5.3.19.jar!/:5.3.19]\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) [spring-aop-5.3.19.jar!/:5.3.19]\r\n    \tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123) [spring-context-5.3.19.jar!/:5.3.19]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.3.19.jar!/:5.3.19]\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) [spring-aop-5.3.19.jar!/:5.3.19]\r\n    \tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) [spring-aop-5.3.19.jar!/:5.3.19]\r\n    \tat com.dolphin.soa.post.controller.impl.pay.alipay.AlipayNotificationController$$EnhancerBySpringCGLIB$$99f5c6c.handleNotification(&lt;generated&gt;) [classes!/:?]\r\n    \tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n    \tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\r\n    \tat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) [spring-web-5.3.19.jar!/:5.3.19]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) [spring-web-5.3.19.jar!/:5.3.19]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) [spring-webmvc-5.3.19.jar!/:5.3.19]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) [spring-webmvc-5.3.19.jar!/:5.3.19]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) [spring-webmvc-5.3.19.jar!/:5.3.19]\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) [spring-webmvc-5.3.19.jar!/:5.3.19]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) [spring-webmvc-5.3.19.jar!/:5.3.19]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) [spring-webmvc-5.3.19.jar!/:5.3.19]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) [spring-webmvc-5.3.19.jar!/:5.3.19]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) [spring-webmvc-5.3.19.jar!/:5.3.19]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:681) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) [spring-webmvc-5.3.19.jar!/:5.3.19]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat-embed-websocket-9.0.62.jar!/:?]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.springframework.web.servlet.resource.ResourceUrlEncodingFilter.doFilter(ResourceUrlEncodingFilter.java:67) [spring-webmvc-5.3.19.jar!/:5.3.19]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) [spring-web-5.3.19.jar!/:5.3.19]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.19.jar!/:5.3.19]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:142) [spring-session-core-2.6.3.jar!/:2.6.3]\r\n    \tat org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:82) [spring-session-core-2.6.3.jar!/:2.6.3]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) [spring-boot-actuator-2.6.7.jar!/:2.6.7]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.19.jar!/:5.3.19]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) [spring-web-5.3.19.jar!/:5.3.19]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.19.jar!/:5.3.19]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:769) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.62.jar!/:?]\r\n    \tat java.lang.Thread.run(Thread.java:836) [?:?]\r\n\r\n\r\n\r\n\r\n\r\nthe string value `vOghoo10L9` was the app id, in the database the app id datatype is varchar. This is the table which `insertUserSub` saved data to:\r\n\r\n\r\n\r\n\r\n\r\n    -- public.user_sub definition\r\n    \r\n    -- Drop table\r\n    \r\n    -- DROP TABLE public.user_sub;\r\n    \r\n    CREATE TABLE public.user_sub (\r\n    \tapp_id varchar NOT NULL,\r\n    \tproduct_id int4 NOT NULL,\r\n    \tiap_product_id varchar NOT NULL,\r\n    \tcreated_time int8 NOT NULL,\r\n    \tupdated_time int8 NOT NULL,\r\n    \tuser_id int8 NOT NULL,\r\n    \tsub_start_time int8 NOT NULL DEFAULT 0,\r\n    \tsub_end_time int8 NOT NULL DEFAULT 0,\r\n    \tenabled int2 NOT NULL DEFAULT 1,\r\n    \torder_id varchar NOT NULL,\r\n    \tid int8 NOT NULL GENERATED ALWAYS AS IDENTITY,\r\n    \tCONSTRAINT user_sub_pk PRIMARY KEY (id),\r\n    \tCONSTRAINT user_sub_un UNIQUE (order_id)\r\n    );\r\n\r\n\r\n\r\n\r\nwhere is the problem? waht should I to to fixed it? The insert mapper look like this:\r\n\r\n\r\n    &lt;insert id=&quot;insertSelective&quot; keyProperty=&quot;id&quot; parameterType=&quot;com.dolphin.soa.post.model.entity.UserSub&quot; useGeneratedKeys=&quot;true&quot;&gt;\r\n    &lt;!--\r\n      WARNING - @mbggenerated\r\n      This element is automatically generated by MyBatis Generator, do not modify.\r\n    --&gt;\r\n    insert into user_sub\r\n    &lt;trim prefix=&quot;(&quot; suffix=&quot;)&quot; suffixOverrides=&quot;,&quot;&gt;\r\n      &lt;if test=&quot;appId != null&quot;&gt;\r\n        app_id,\r\n      &lt;/if&gt;\r\n      &lt;if test=&quot;productId != null&quot;&gt;\r\n        product_id,\r\n      &lt;/if&gt;\r\n      &lt;if test=&quot;iapProductId != null&quot;&gt;\r\n        iap_product_id,\r\n      &lt;/if&gt;\r\n      &lt;if test=&quot;createdTime != null&quot;&gt;\r\n        created_time,\r\n      &lt;/if&gt;\r\n      &lt;if test=&quot;updatedTime != null&quot;&gt;\r\n        updated_time,\r\n      &lt;/if&gt;\r\n      &lt;if test=&quot;userId != null&quot;&gt;\r\n        user_id,\r\n      &lt;/if&gt;\r\n      &lt;if test=&quot;subStartTime != null&quot;&gt;\r\n        sub_start_time,\r\n      &lt;/if&gt;\r\n      &lt;if test=&quot;subEndTime != null&quot;&gt;\r\n        sub_end_time,\r\n      &lt;/if&gt;\r\n      &lt;if test=&quot;enabled != null&quot;&gt;\r\n        enabled,\r\n      &lt;/if&gt;\r\n      &lt;if test=&quot;orderId != null&quot;&gt;\r\n        order_id,\r\n      &lt;/if&gt;\r\n    &lt;/trim&gt;\r\n    &lt;trim prefix=&quot;values (&quot; suffix=&quot;)&quot; suffixOverrides=&quot;,&quot;&gt;\r\n      &lt;if test=&quot;appId != null&quot;&gt;\r\n        #{appId,jdbcType=VARCHAR},\r\n      &lt;/if&gt;\r\n      &lt;if test=&quot;productId != null&quot;&gt;\r\n        #{productId,jdbcType=INTEGER},\r\n      &lt;/if&gt;\r\n      &lt;if test=&quot;iapProductId != null&quot;&gt;\r\n        #{iapProductId,jdbcType=VARCHAR},\r\n      &lt;/if&gt;\r\n      &lt;if test=&quot;createdTime != null&quot;&gt;\r\n        #{createdTime,jdbcType=BIGINT},\r\n      &lt;/if&gt;\r\n      &lt;if test=&quot;updatedTime != null&quot;&gt;\r\n        #{updatedTime,jdbcType=BIGINT},\r\n      &lt;/if&gt;\r\n      &lt;if test=&quot;userId != null&quot;&gt;\r\n        #{userId,jdbcType=BIGINT},\r\n      &lt;/if&gt;\r\n      &lt;if test=&quot;subStartTime != null&quot;&gt;\r\n        #{subStartTime,jdbcType=BIGINT},\r\n      &lt;/if&gt;\r\n      &lt;if test=&quot;subEndTime != null&quot;&gt;\r\n        #{subEndTime,jdbcType=BIGINT},\r\n      &lt;/if&gt;\r\n      &lt;if test=&quot;enabled != null&quot;&gt;\r\n        #{enabled,jdbcType=SMALLINT},\r\n      &lt;/if&gt;\r\n      &lt;if test=&quot;orderId != null&quot;&gt;\r\n        #{orderId,jdbcType=VARCHAR},\r\n      &lt;/if&gt;\r\n    &lt;/trim&gt;\r\n  &lt;/insert&gt;\r\n\r\n\r\n\r\n","title":"Cause: org.postgresql.util.PSQLException: Bad value for type long","body":"<p>I am using PostgreSQL 13 as the backend database server, the MyBatis used to be the ORM framework, today I am facing a problem like this:</p>\n<pre><code>[20:34:19:196] [ERROR] - com.dolphin.soa.post.controller.impl.pay.alipay.AlipayNotificationController.handleNotification(AlipayNotificationController.java:85) - handle notification failed\norg.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.executor.ExecutorException: Error getting generated key or setting result to parameter object. Cause: org.apache.ibatis.executor.result.ResultMapException: Error attempting to get column #1 from result set.  Cause: org.postgresql.util.PSQLException: Bad value for type long : vOghoo10L9\n    at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:96) ~[mybatis-spring-2.0.6.jar!/:2.0.6]\n    at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441) ~[mybatis-spring-2.0.6.jar!/:2.0.6]\n    at com.sun.proxy.$Proxy147.insert(Unknown Source) ~[?:?]\n    at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272) ~[mybatis-spring-2.0.6.jar!/:2.0.6]\n    at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62) ~[mybatis-3.5.6.jar!/:3.5.6]\n    at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152) ~[mybatis-3.5.6.jar!/:3.5.6]\n    at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85) ~[mybatis-3.5.6.jar!/:3.5.6]\n    at com.sun.proxy.$Proxy181.insertSelective(Unknown Source) ~[?:?]\n    at com.dolphin.soa.post.service.impl.user.UserSubService.insertUserSub(UserSubService.java:57) ~[classes!/:?]\n    at com.dolphin.soa.post.service.impl.product.sub.IapProductSubHandler.handleNonSubScribe(IapProductSubHandler.java:87) ~[classes!/:?]\n    at com.dolphin.soa.post.service.impl.product.sub.IapProductSubHandler.handleSubByType(IapProductSubHandler.java:62) ~[classes!/:?]\n    at com.dolphin.soa.post.service.impl.product.sub.IapProductSubHandler.productPaySuccess(IapProductSubHandler.java:51) ~[classes!/:?]\n    at com.dolphin.soa.post.controller.impl.pay.alipay.AlipayNotificationController.handleNotificationImpl(AlipayNotificationController.java:117) ~[classes!/:?]\n    at com.dolphin.soa.post.controller.impl.pay.alipay.AlipayNotificationController.handleNotification(AlipayNotificationController.java:83) [classes!/:?]\n    at com.dolphin.soa.post.controller.impl.pay.alipay.AlipayNotificationController$$FastClassBySpringCGLIB$$a911fc6b.invoke(&lt;generated&gt;) [classes!/:?]\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) [spring-core-5.3.19.jar!/:5.3.19]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) [spring-aop-5.3.19.jar!/:5.3.19]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) [spring-aop-5.3.19.jar!/:5.3.19]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) [spring-aop-5.3.19.jar!/:5.3.19]\n    at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123) [spring-context-5.3.19.jar!/:5.3.19]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.3.19.jar!/:5.3.19]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) [spring-aop-5.3.19.jar!/:5.3.19]\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) [spring-aop-5.3.19.jar!/:5.3.19]\n    at com.dolphin.soa.post.controller.impl.pay.alipay.AlipayNotificationController$$EnhancerBySpringCGLIB$$99f5c6c.handleNotification(&lt;generated&gt;) [classes!/:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n    at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) [spring-web-5.3.19.jar!/:5.3.19]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) [spring-web-5.3.19.jar!/:5.3.19]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) [spring-webmvc-5.3.19.jar!/:5.3.19]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) [spring-webmvc-5.3.19.jar!/:5.3.19]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) [spring-webmvc-5.3.19.jar!/:5.3.19]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) [spring-webmvc-5.3.19.jar!/:5.3.19]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) [spring-webmvc-5.3.19.jar!/:5.3.19]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) [spring-webmvc-5.3.19.jar!/:5.3.19]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) [spring-webmvc-5.3.19.jar!/:5.3.19]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) [spring-webmvc-5.3.19.jar!/:5.3.19]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) [spring-webmvc-5.3.19.jar!/:5.3.19]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat-embed-websocket-9.0.62.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.springframework.web.servlet.resource.ResourceUrlEncodingFilter.doFilter(ResourceUrlEncodingFilter.java:67) [spring-webmvc-5.3.19.jar!/:5.3.19]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) [spring-web-5.3.19.jar!/:5.3.19]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.19.jar!/:5.3.19]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:142) [spring-session-core-2.6.3.jar!/:2.6.3]\n    at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:82) [spring-session-core-2.6.3.jar!/:2.6.3]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) [spring-boot-actuator-2.6.7.jar!/:2.6.7]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.19.jar!/:5.3.19]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) [spring-web-5.3.19.jar!/:5.3.19]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) [spring-web-5.3.19.jar!/:5.3.19]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:769) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.62.jar!/:?]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.62.jar!/:?]\n    at java.lang.Thread.run(Thread.java:836) [?:?]\n</code></pre>\n<p>the string value <code>vOghoo10L9</code> was the app id, in the database the app id datatype is varchar. This is the table which <code>insertUserSub</code> saved data to:</p>\n<pre><code>-- public.user_sub definition\n\n-- Drop table\n\n-- DROP TABLE public.user_sub;\n\nCREATE TABLE public.user_sub (\n    app_id varchar NOT NULL,\n    product_id int4 NOT NULL,\n    iap_product_id varchar NOT NULL,\n    created_time int8 NOT NULL,\n    updated_time int8 NOT NULL,\n    user_id int8 NOT NULL,\n    sub_start_time int8 NOT NULL DEFAULT 0,\n    sub_end_time int8 NOT NULL DEFAULT 0,\n    enabled int2 NOT NULL DEFAULT 1,\n    order_id varchar NOT NULL,\n    id int8 NOT NULL GENERATED ALWAYS AS IDENTITY,\n    CONSTRAINT user_sub_pk PRIMARY KEY (id),\n    CONSTRAINT user_sub_un UNIQUE (order_id)\n);\n</code></pre>\n<p>where is the problem? waht should I to to fixed it? The insert mapper look like this:</p>\n<pre><code>&lt;insert id=&quot;insertSelective&quot; keyProperty=&quot;id&quot; parameterType=&quot;com.dolphin.soa.post.model.entity.UserSub&quot; useGeneratedKeys=&quot;true&quot;&gt;\n&lt;!--\n  WARNING - @mbggenerated\n  This element is automatically generated by MyBatis Generator, do not modify.\n--&gt;\ninsert into user_sub\n&lt;trim prefix=&quot;(&quot; suffix=&quot;)&quot; suffixOverrides=&quot;,&quot;&gt;\n  &lt;if test=&quot;appId != null&quot;&gt;\n    app_id,\n  &lt;/if&gt;\n  &lt;if test=&quot;productId != null&quot;&gt;\n    product_id,\n  &lt;/if&gt;\n  &lt;if test=&quot;iapProductId != null&quot;&gt;\n    iap_product_id,\n  &lt;/if&gt;\n  &lt;if test=&quot;createdTime != null&quot;&gt;\n    created_time,\n  &lt;/if&gt;\n  &lt;if test=&quot;updatedTime != null&quot;&gt;\n    updated_time,\n  &lt;/if&gt;\n  &lt;if test=&quot;userId != null&quot;&gt;\n    user_id,\n  &lt;/if&gt;\n  &lt;if test=&quot;subStartTime != null&quot;&gt;\n    sub_start_time,\n  &lt;/if&gt;\n  &lt;if test=&quot;subEndTime != null&quot;&gt;\n    sub_end_time,\n  &lt;/if&gt;\n  &lt;if test=&quot;enabled != null&quot;&gt;\n    enabled,\n  &lt;/if&gt;\n  &lt;if test=&quot;orderId != null&quot;&gt;\n    order_id,\n  &lt;/if&gt;\n&lt;/trim&gt;\n&lt;trim prefix=&quot;values (&quot; suffix=&quot;)&quot; suffixOverrides=&quot;,&quot;&gt;\n  &lt;if test=&quot;appId != null&quot;&gt;\n    #{appId,jdbcType=VARCHAR},\n  &lt;/if&gt;\n  &lt;if test=&quot;productId != null&quot;&gt;\n    #{productId,jdbcType=INTEGER},\n  &lt;/if&gt;\n  &lt;if test=&quot;iapProductId != null&quot;&gt;\n    #{iapProductId,jdbcType=VARCHAR},\n  &lt;/if&gt;\n  &lt;if test=&quot;createdTime != null&quot;&gt;\n    #{createdTime,jdbcType=BIGINT},\n  &lt;/if&gt;\n  &lt;if test=&quot;updatedTime != null&quot;&gt;\n    #{updatedTime,jdbcType=BIGINT},\n  &lt;/if&gt;\n  &lt;if test=&quot;userId != null&quot;&gt;\n    #{userId,jdbcType=BIGINT},\n  &lt;/if&gt;\n  &lt;if test=&quot;subStartTime != null&quot;&gt;\n    #{subStartTime,jdbcType=BIGINT},\n  &lt;/if&gt;\n  &lt;if test=&quot;subEndTime != null&quot;&gt;\n    #{subEndTime,jdbcType=BIGINT},\n  &lt;/if&gt;\n  &lt;if test=&quot;enabled != null&quot;&gt;\n    #{enabled,jdbcType=SMALLINT},\n  &lt;/if&gt;\n  &lt;if test=&quot;orderId != null&quot;&gt;\n    #{orderId,jdbcType=VARCHAR},\n  &lt;/if&gt;\n&lt;/trim&gt;\n</code></pre>\n  \n"},{"tags":["java","maven","sonarqube","bitbucket-pipelines","quality-gate"],"comments":[{"owner":{"account_id":12121117,"reputation":199,"user_id":8852522,"display_name":"H.Karatsanov"},"score":0,"creation_date":1655927734,"post_id":45545726,"comment_id":128450895,"body_markdown":"The fact that 5 people have liked the question and there is no response from SonarQube must be clear what do they really care only (hint: business).","body":"The fact that 5 people have liked the question and there is no response from SonarQube must be clear what do they really care only (hint: business)."}],"answers":[{"tags":[],"owner":{"account_id":16224543,"reputation":3169,"user_id":11715259,"display_name":"N1ngu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1680091135,"creation_date":1680091135,"answer_id":75876904,"question_id":45545726,"body_markdown":"I think this is now possible out-of-the box with SonarSource pipes. It boils down to something like\r\n```\r\npipelines:\r\n  default:\r\n    - step:\r\n        clone:\r\n          depth: full\r\n        script:\r\n          - pipe: sonarsource/sonarqube-scan:1.2.0\r\n            variables:\r\n              SONAR_HOST_URL: ${SONAR_HOST_URL}\r\n              SONAR_TOKEN: ${SONAR_TOKEN}\r\n          - pipe: sonarsource/sonarqube-quality-gate:1.0.0\r\n            variables:\r\n              SONAR_TOKEN: ${SONAR_TOKEN}\r\n\r\n```\r\n\r\nBut better look into the pipes documentation https://bitbucket.org/product/features/pipelines/integrations?&amp;search=sonar","title":"Bitbucket Pipelines Read Quality Gate Results","body":"<p>I think this is now possible out-of-the box with SonarSource pipes. It boils down to something like</p>\n<pre><code>pipelines:\n  default:\n    - step:\n        clone:\n          depth: full\n        script:\n          - pipe: sonarsource/sonarqube-scan:1.2.0\n            variables:\n              SONAR_HOST_URL: ${SONAR_HOST_URL}\n              SONAR_TOKEN: ${SONAR_TOKEN}\n          - pipe: sonarsource/sonarqube-quality-gate:1.0.0\n            variables:\n              SONAR_TOKEN: ${SONAR_TOKEN}\n\n</code></pre>\n<p>But better look into the pipes documentation <a href=\"https://bitbucket.org/product/features/pipelines/integrations?&amp;search=sonar\" rel=\"nofollow noreferrer\">https://bitbucket.org/product/features/pipelines/integrations?&amp;search=sonar</a></p>\n"}],"owner":{"account_id":1448091,"reputation":699,"user_id":1365917,"display_name":"Davide Martorana"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":792,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":75876904,"answer_count":1,"score":5,"last_activity_date":1680091135,"creation_date":1502104926,"question_id":45545726,"body_markdown":"We are trying to integrate Bitbucket Pipelines (Cloud) with SonarQube (6.4). \r\n\r\nIn particular, we want that the Pipelines build fails if the SonarQube analysis detects some quality gate violations in our **Java** code. \r\n\r\nCurrently, we are using Jenkins (Multi-branch project), and we managed to achieve this behaviour thanks the command `waitForQualityGate()` included in the Jenkinsfile file (where I defined the pipeline to be executed).\r\n\r\nNow, we want to give a try to the Bitbucket Pipelines feature, since our Git Repository is hosted in **Bitbucket Cloud**, and keep using our current server instance of SonarQube.\r\n\r\nFor completeness, our projects are written in Java and managed by maven; we also use sonar-scanner plugin in the build process.\r\n\r\nCan anyone give me an hint? Or Does anyone have a clue how to achieve this behaviour?\r\n\r\nI am aware of the sonar plugin that creates reports as comments of a Pull Requests in BitBucket, but that is not what we need.\r\n\r\nThanks in advance for your help.","title":"Bitbucket Pipelines Read Quality Gate Results","body":"<p>We are trying to integrate Bitbucket Pipelines (Cloud) with SonarQube (6.4).</p>\n<p>In particular, we want that the Pipelines build fails if the SonarQube analysis detects some quality gate violations in our <strong>Java</strong> code.</p>\n<p>Currently, we are using Jenkins (Multi-branch project), and we managed to achieve this behaviour thanks the command <code>waitForQualityGate()</code> included in the Jenkinsfile file (where I defined the pipeline to be executed).</p>\n<p>Now, we want to give a try to the Bitbucket Pipelines feature, since our Git Repository is hosted in <strong>Bitbucket Cloud</strong>, and keep using our current server instance of SonarQube.</p>\n<p>For completeness, our projects are written in Java and managed by maven; we also use sonar-scanner plugin in the build process.</p>\n<p>Can anyone give me an hint? Or Does anyone have a clue how to achieve this behaviour?</p>\n<p>I am aware of the sonar plugin that creates reports as comments of a Pull Requests in BitBucket, but that is not what we need.</p>\n<p>Thanks in advance for your help.</p>\n"},{"tags":["java","httpclient","micronaut","micronaut-client"],"answers":[{"tags":[],"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680090880,"creation_date":1680009165,"answer_id":75866726,"question_id":75866135,"body_markdown":"Basically in the background micronaut uses the [AOP][1] Advice for retrying using [@Retryable][2] annotation\r\n\r\nSo, you can basically move the logic into method and implement the logic to retry that method on exception and with delay.\r\n\r\n    @Retryable(attempts = &quot;2&quot;, includes =[NullPointerException.class,..], delay= &quot;1s&quot;)\r\n    public void clientCall() {\r\n\r\n      client = new DefaultHttpClient(&quot;http://127.0.0.1:8200&quot;, configuration);\r\n\r\n      var uri = UriBuilder.of(&quot;http://127.0.0.1:8200&quot;).path(&quot;/v1/kv/data/&quot;).build();\r\n      var request = HttpRequest.GET(uri).header(&quot;username&quot;,&quot;password&quot;);\r\n      var response = client.toBlocking().exchange(request);\r\n    }\r\n\r\nYou can also configure the values in `application.yml/application.properties` and use them in annotation\r\n\r\n    @Retryable(\r\n    attempts = &quot;\\${micronaut.http.services.get_core_item_graphql.retryAttempts}&quot;,\r\n    delay = &quot;\\${micronaut.http.services.get_core_item_graphql.retryDelay}&quot;)\r\n\r\n\r\n  [1]: https://docs.micronaut.io/latest/guide/#aopArch\r\n  [2]: https://docs.micronaut.io/snapshot/api/io/micronaut/retry/annotation/Retryable.html","title":"How to add retries to Micronaut non-declarative http client","body":"<p>Basically in the background micronaut uses the <a href=\"https://docs.micronaut.io/latest/guide/#aopArch\" rel=\"nofollow noreferrer\">AOP</a> Advice for retrying using <a href=\"https://docs.micronaut.io/snapshot/api/io/micronaut/retry/annotation/Retryable.html\" rel=\"nofollow noreferrer\">@Retryable</a> annotation</p>\n<p>So, you can basically move the logic into method and implement the logic to retry that method on exception and with delay.</p>\n<pre><code>@Retryable(attempts = &quot;2&quot;, includes =[NullPointerException.class,..], delay= &quot;1s&quot;)\npublic void clientCall() {\n\n  client = new DefaultHttpClient(&quot;http://127.0.0.1:8200&quot;, configuration);\n\n  var uri = UriBuilder.of(&quot;http://127.0.0.1:8200&quot;).path(&quot;/v1/kv/data/&quot;).build();\n  var request = HttpRequest.GET(uri).header(&quot;username&quot;,&quot;password&quot;);\n  var response = client.toBlocking().exchange(request);\n}\n</code></pre>\n<p>You can also configure the values in <code>application.yml/application.properties</code> and use them in annotation</p>\n<pre><code>@Retryable(\nattempts = &quot;\\${micronaut.http.services.get_core_item_graphql.retryAttempts}&quot;,\ndelay = &quot;\\${micronaut.http.services.get_core_item_graphql.retryDelay}&quot;)\n</code></pre>\n"}],"owner":{"account_id":13822903,"reputation":65,"user_id":9977928,"display_name":"shashank"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":704,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1680090880,"creation_date":1680005710,"question_id":75866135,"body_markdown":"Micronaut supports retry mechanism for http clients if we use it in a declarative client like this : \r\n```\r\n@Client(&quot;http://127.0.0.1:8200&quot;)\r\n@Retryable(delay = &quot;${retry-delay}&quot;, attempts = &quot;${retry-attempts}&quot;)\r\n@Header(name = &quot;username&quot;, value = &quot;password&quot;)\r\n\r\npublic interface SampleHttpClient {\r\n    @Get(value = &quot;/v1/kv/data/&quot;, produces = MediaType.APPLICATION_JSON)\r\n    HttpResponse&lt;String&gt; getVaultSecret();\r\n}\r\n```\r\nHere **retry-delay** and **retry-attempts** are read from configuration yaml file.\r\n \r\nBut I am **creating the http clients in my code on the fly** as show below. This is because I get the http client parameters(URL, retry properties, header etc) at runtime.\r\n\r\nHow can I add retry option to my http configuration here ?\r\n\r\n```\r\nHttpClient client = null;\r\nvar configuration = new ServiceHttpClientConfiguration(&quot;myId&quot;, null, \r\n                                  null, new DefaultHttpClientConfiguration());  \r\n   \r\n// how to add retry to http configuration here ???       \r\n\r\nclient = new DefaultHttpClient(&quot;http://127.0.0.1:8200&quot;, configuration);\r\n\r\nvar uri = UriBuilder.of(&quot;http://127.0.0.1:8200&quot;).path(&quot;/v1/kv/data/&quot;).build();\r\nvar request = HttpRequest.GET(uri).header(&quot;username&quot;,&quot;password&quot;);\r\nvar response = client.toBlocking().exchange(request);","title":"How to add retries to Micronaut non-declarative http client","body":"<p>Micronaut supports retry mechanism for http clients if we use it in a declarative client like this :</p>\n<pre><code>@Client(&quot;http://127.0.0.1:8200&quot;)\n@Retryable(delay = &quot;${retry-delay}&quot;, attempts = &quot;${retry-attempts}&quot;)\n@Header(name = &quot;username&quot;, value = &quot;password&quot;)\n\npublic interface SampleHttpClient {\n    @Get(value = &quot;/v1/kv/data/&quot;, produces = MediaType.APPLICATION_JSON)\n    HttpResponse&lt;String&gt; getVaultSecret();\n}\n</code></pre>\n<p>Here <strong>retry-delay</strong> and <strong>retry-attempts</strong> are read from configuration yaml file.</p>\n<p>But I am <strong>creating the http clients in my code on the fly</strong> as show below. This is because I get the http client parameters(URL, retry properties, header etc) at runtime.</p>\n<p>How can I add retry option to my http configuration here ?</p>\n<pre><code>HttpClient client = null;\nvar configuration = new ServiceHttpClientConfiguration(&quot;myId&quot;, null, \n                                  null, new DefaultHttpClientConfiguration());  \n   \n// how to add retry to http configuration here ???       \n\nclient = new DefaultHttpClient(&quot;http://127.0.0.1:8200&quot;, configuration);\n\nvar uri = UriBuilder.of(&quot;http://127.0.0.1:8200&quot;).path(&quot;/v1/kv/data/&quot;).build();\nvar request = HttpRequest.GET(uri).header(&quot;username&quot;,&quot;password&quot;);\nvar response = client.toBlocking().exchange(request);\n</code></pre>\n"},{"tags":["java","selenium-webdriver","cucumber"],"comments":[{"owner":{"account_id":471893,"reputation":8441,"user_id":879977,"display_name":"niharika_neo"},"score":0,"creation_date":1680114614,"post_id":75876681,"comment_id":133844287,"body_markdown":"How do you determine today which cases need to be executed where?","body":"How do you determine today which cases need to be executed where?"}],"answers":[{"tags":[],"owner":{"account_id":14468532,"reputation":11,"user_id":10451214,"display_name":"Merav2110"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680090848,"creation_date":1680090848,"answer_id":75876860,"question_id":75876681,"body_markdown":"you can use data-provider config (testNG), how do you run this tests?\r\nI imagine you have some jenkins job that is running the tests. The tests don&#39;t need to know where are they running you just need to pass IP or URL from the job.\r\nAlso in java you can create a factory that give the test the correct URL to run on.","title":"How to execute selenium cucumber test cases in different environment at the same time","body":"<p>you can use data-provider config (testNG), how do you run this tests?\nI imagine you have some jenkins job that is running the tests. The tests don't need to know where are they running you just need to pass IP or URL from the job.\nAlso in java you can create a factory that give the test the correct URL to run on.</p>\n"}],"owner":{"account_id":17770522,"reputation":89,"user_id":12904248,"display_name":"NoNoNo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680090848,"creation_date":1680089814,"question_id":75876681,"body_markdown":"I have 100 test cases in selenium-cucumber framework as part of regression suite. I need to execute 50 tests in qa environment and 50 in dev environment at the same time (in the same jenkins build). How can I achieve this? I have two property files, one is for dev and other one is for qa. ","title":"How to execute selenium cucumber test cases in different environment at the same time","body":"<p>I have 100 test cases in selenium-cucumber framework as part of regression suite. I need to execute 50 tests in qa environment and 50 in dev environment at the same time (in the same jenkins build). How can I achieve this? I have two property files, one is for dev and other one is for qa.</p>\n"},{"tags":["java","html","templates","velocity"],"owner":{"account_id":19163290,"reputation":13,"user_id":13998601,"display_name":"Sarvesh Bhogale"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680090677,"creation_date":1680090677,"question_id":75876830,"body_markdown":"I am facing an issue while using Velocity template wherein if the Candidate work history is spanning over two pages some of the content gets split which I want to avoid.\r\nFor Example:-\r\n[![SampleResume](https://i.stack.imgur.com/BRGE5.png)](https://i.stack.imgur.com/BRGE5.png)\r\n\r\nSo if the Candidate work history spans the page break I want to push it to next page so all work history for that facility is together on one page.\r\n\r\nVelocity code for the same is below\r\n\r\n\r\n```\r\n&lt;tr&gt;\r\n&lt;td valign=&quot;top&quot;\r\n  style=&quot;width:32%;text-align: right;font-size: 14px;padding-right: 50px;&quot;&gt;\r\n    &lt;span style=&quot;font-weight:bold;display:block;padding-top:3px;padding-bottom:3px;padding-left:10px;color: #1181d1;&quot;&gt; Work History &lt;/span&gt;\r\n&lt;/td&gt;\r\n&lt;td valign=&quot;top&quot; style=&quot;width:68%;padding-left:10px;font-size: 14px;&quot;&gt;\r\n  &lt;span style=&quot;display:block;padding:5px;color: #333333;&quot;&gt;\r\n    #foreach ($dataRow in $resume.referList)\r\n\tFacility:  $dataRow.ClientName&lt;br/&gt;\r\n\tReference: $dataRow.FirstName $dataRow.LastName&lt;br/&gt;\r\n\tTitle:     $dataRow.ReferJobTitle - $dataRow.Unit&lt;br/&gt;\r\n\tPhone:     $dataRow.ReferPhone     Email: $dataRow.ReferEmail&lt;br/&gt;\r\n\tFrom:      $dataRow.FromDate - To:$dataRow.ToDate&lt;br/&gt;\r\n        #if($foreach.hasNext)&lt;br/&gt;#end\r\n     #end\r\n  &lt;/span&gt;\r\n&lt;/td&gt;\r\n&lt;/tr&gt;\r\n```\r\n\r\n\r\nAny suggestions on how can I solve this issue\r\n\r\nI tried using the suggestion mentioned below\r\n\r\nReference URL - https://community.jamasoftware.com/discussion/forcing-page-break-for-velocity-html-reports","title":"Forcing a Page break for Velocity HTML resumes","body":"<p>I am facing an issue while using Velocity template wherein if the Candidate work history is spanning over two pages some of the content gets split which I want to avoid.\nFor Example:-\n<a href=\"https://i.stack.imgur.com/BRGE5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BRGE5.png\" alt=\"SampleResume\" /></a></p>\n<p>So if the Candidate work history spans the page break I want to push it to next page so all work history for that facility is together on one page.</p>\n<p>Velocity code for the same is below</p>\n<pre><code>&lt;tr&gt;\n&lt;td valign=&quot;top&quot;\n  style=&quot;width:32%;text-align: right;font-size: 14px;padding-right: 50px;&quot;&gt;\n    &lt;span style=&quot;font-weight:bold;display:block;padding-top:3px;padding-bottom:3px;padding-left:10px;color: #1181d1;&quot;&gt; Work History &lt;/span&gt;\n&lt;/td&gt;\n&lt;td valign=&quot;top&quot; style=&quot;width:68%;padding-left:10px;font-size: 14px;&quot;&gt;\n  &lt;span style=&quot;display:block;padding:5px;color: #333333;&quot;&gt;\n    #foreach ($dataRow in $resume.referList)\n    Facility:  $dataRow.ClientName&lt;br/&gt;\n    Reference: $dataRow.FirstName $dataRow.LastName&lt;br/&gt;\n    Title:     $dataRow.ReferJobTitle - $dataRow.Unit&lt;br/&gt;\n    Phone:     $dataRow.ReferPhone     Email: $dataRow.ReferEmail&lt;br/&gt;\n    From:      $dataRow.FromDate - To:$dataRow.ToDate&lt;br/&gt;\n        #if($foreach.hasNext)&lt;br/&gt;#end\n     #end\n  &lt;/span&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n<p>Any suggestions on how can I solve this issue</p>\n<p>I tried using the suggestion mentioned below</p>\n<p>Reference URL - <a href=\"https://community.jamasoftware.com/discussion/forcing-page-break-for-velocity-html-reports\" rel=\"nofollow noreferrer\">https://community.jamasoftware.com/discussion/forcing-page-break-for-velocity-html-reports</a></p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":7318750,"reputation":1812,"user_id":5575410,"display_name":"Ayush Khare"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680055647,"creation_date":1680055647,"answer_id":75872513,"question_id":75872067,"body_markdown":"According to [RecyclerView.onBindViewHolder][1] documentation, it states:\r\n\r\n&gt; RecyclerView will not call this method again if the position of the item changes in the data set unless the item itself is invalidated or the new position cannot be determined\r\n\r\nSo for your code the optimal solution will be changing the onClickListener of `siparisGosterBtn ` like below:\r\n\r\n```\r\nholder.siparisGosterBtn.setOnClickListener(new View.OnClickListener() {\r\n      @Override\r\n      public void onClick(View v) {\r\n         String kID=getRef(holder.getAdapterPosition()).getKey(); --&gt; // change position to holder.getAdapterPosition()\r\n         Intent intent=new Intent(AdminYeniSiparisActivity.this,AdminKullaniciUrunActivity.class);\r\n         intent.putExtra(&quot;kid&quot;,kID);\r\n         startActivity(intent);\r\n      }\r\n    });\r\n ```\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/support/v7/widget/RecyclerView.Adapter#onbindviewholder_1","title":"Do not treat position as fixed; only use immediately and call `holder.getAdapterPosition()` to look it up later erorrr","body":"<p>According to <a href=\"https://developer.android.com/reference/android/support/v7/widget/RecyclerView.Adapter#onbindviewholder_1\" rel=\"nofollow noreferrer\">RecyclerView.onBindViewHolder</a> documentation, it states:</p>\n<blockquote>\n<p>RecyclerView will not call this method again if the position of the item changes in the data set unless the item itself is invalidated or the new position cannot be determined</p>\n</blockquote>\n<p>So for your code the optimal solution will be changing the onClickListener of <code>siparisGosterBtn </code> like below:</p>\n<pre><code>holder.siparisGosterBtn.setOnClickListener(new View.OnClickListener() {\n      @Override\n      public void onClick(View v) {\n         String kID=getRef(holder.getAdapterPosition()).getKey(); --&gt; // change position to holder.getAdapterPosition()\n         Intent intent=new Intent(AdminYeniSiparisActivity.this,AdminKullaniciUrunActivity.class);\n         intent.putExtra(&quot;kid&quot;,kID);\n         startActivity(intent);\n      }\n    });\n</code></pre>\n"}],"owner":{"account_id":28153071,"reputation":1,"user_id":21514227,"display_name":"Beritan Ko&#231;"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680090655,"creation_date":1680049033,"question_id":75872067,"body_markdown":"    private RecyclerView siparisList;\r\n    private DatabaseReference siparisRef;\r\n        \r\n    \r\n        \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_admin_yeni_siparis);\r\n        \r\n        \r\n            siparisRef= FirebaseDatabase.getInstance().getReference().child(&quot;Siparis&quot;);\r\n            siparisList=findViewById(R.id.siparis_list);\r\n            siparisList.setLayoutManager(new LinearLayoutManager(this));\r\n        \r\n        }\r\n        \r\n        \r\n        @Override\r\n        protected void onStart() {\r\n            super.onStart();\r\n        \r\n            FirebaseRecyclerOptions&lt;AdminSiparis&gt; options=\r\n                    new FirebaseRecyclerOptions.Builder&lt;AdminSiparis&gt;()\r\n                            .setQuery(siparisRef,AdminSiparis.class)\r\n                            .build();\r\n        \r\n            FirebaseRecyclerAdapter&lt;AdminSiparis,AdminSiparisViewHolder&gt; adapter=\r\n                    new FirebaseRecyclerAdapter&lt;AdminSiparis, AdminSiparisViewHolder&gt;(options) {\r\n                        @Override\r\n                        protected void onBindViewHolder(@NonNull AdminSiparisViewHolder holder,int position, @NonNull AdminSiparis model) {\r\n                            holder.kullanıcıİsmi.setText(&quot;İsim:&quot;+model.getIsim());\r\n                            holder.kullanıcıTelefon.setText(&quot;Telefon:&quot;+model.getTelefon());\r\n                            holder.kullanıcıToplamTutar.setText(&quot;Toplam Miktar:&quot;+model.getToplamMiktar()+&quot;TL&quot;);\r\n                            holder.kullanıcıTarih.setText(&quot;Siparis Tarih:&quot;+model.getTarih()+&quot;&quot;+model.getZaman());\r\n                            holder.kullanıcıGonderiAddress.setText(&quot;Address:&quot;+model.getAddress()+&quot;,&quot;+model.getIl());\r\n        \r\n        \r\n                            holder.siparisGosterBtn.setOnClickListener(new View.OnClickListener() {\r\n                                @Override\r\n                                public void onClick(View v) {\r\n                                    String kID=getRef(position).getKey();\r\n        \r\n        \r\n        \r\n        \r\n                                    Intent intent=new Intent(AdminYeniSiparisActivity.this,AdminKullaniciUrunActivity.class);\r\n                                    intent.putExtra(&quot;kid&quot;,kID);\r\n                                    startActivity(intent);\r\n                                }\r\n                            });\r\n        \r\n                        }\r\n        \r\n                        @NonNull\r\n                        @Override\r\n                        public AdminSiparisViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n                            View view= LayoutInflater.from(parent.getContext()).inflate(R.layout.siparis_layout,parent,false);\r\n                            return new AdminSiparisViewHolder(view);\r\n                        }\r\n                    };\r\n            siparisList.setAdapter(adapter);\r\n            adapter.startListening();\r\n            \r\n        \r\n        }\r\n        \r\n        \r\n        public static class AdminSiparisViewHolder extends RecyclerView.ViewHolder{\r\n            public TextView kullanıcıİsmi,kullanıcıTelefon,kullanıcıToplamTutar,kullanıcıTarih,kullanıcıGonderiAddress;\r\n            public Button siparisGosterBtn;\r\n        \r\n            public AdminSiparisViewHolder(@NonNull View itemView) {\r\n                super(itemView);\r\n        \r\n                kullanıcıİsmi=itemView.findViewById(R.id.siparis_kullanıcı_adı);\r\n                kullanıcıTelefon=itemView.findViewById(R.id.siparis_telefon_numarası);\r\n                kullanıcıToplamTutar=itemView.findViewById(R.id.siparis_toplam_fiyat);\r\n                kullanıcıGonderiAddress=itemView.findViewById(R.id.siparis_address_il);\r\n                kullanıcıTarih=itemView.findViewById(R.id.siparis_tarih_saat);\r\n                siparisGosterBtn=itemView.findViewById(R.id.siparis_kontrol_btn);\r\n        \r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n\r\nI&#39;m getting an error like this I tried getAdapter Position but it still creates problems","title":"Do not treat position as fixed; only use immediately and call `holder.getAdapterPosition()` to look it up later erorrr","body":"<pre><code>private RecyclerView siparisList;\nprivate DatabaseReference siparisRef;\n    \n\n    \n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_admin_yeni_siparis);\n    \n    \n        siparisRef= FirebaseDatabase.getInstance().getReference().child(&quot;Siparis&quot;);\n        siparisList=findViewById(R.id.siparis_list);\n        siparisList.setLayoutManager(new LinearLayoutManager(this));\n    \n    }\n    \n    \n    @Override\n    protected void onStart() {\n        super.onStart();\n    \n        FirebaseRecyclerOptions&lt;AdminSiparis&gt; options=\n                new FirebaseRecyclerOptions.Builder&lt;AdminSiparis&gt;()\n                        .setQuery(siparisRef,AdminSiparis.class)\n                        .build();\n    \n        FirebaseRecyclerAdapter&lt;AdminSiparis,AdminSiparisViewHolder&gt; adapter=\n                new FirebaseRecyclerAdapter&lt;AdminSiparis, AdminSiparisViewHolder&gt;(options) {\n                    @Override\n                    protected void onBindViewHolder(@NonNull AdminSiparisViewHolder holder,int position, @NonNull AdminSiparis model) {\n                        holder.kullanıcıİsmi.setText(&quot;İsim:&quot;+model.getIsim());\n                        holder.kullanıcıTelefon.setText(&quot;Telefon:&quot;+model.getTelefon());\n                        holder.kullanıcıToplamTutar.setText(&quot;Toplam Miktar:&quot;+model.getToplamMiktar()+&quot;TL&quot;);\n                        holder.kullanıcıTarih.setText(&quot;Siparis Tarih:&quot;+model.getTarih()+&quot;&quot;+model.getZaman());\n                        holder.kullanıcıGonderiAddress.setText(&quot;Address:&quot;+model.getAddress()+&quot;,&quot;+model.getIl());\n    \n    \n                        holder.siparisGosterBtn.setOnClickListener(new View.OnClickListener() {\n                            @Override\n                            public void onClick(View v) {\n                                String kID=getRef(position).getKey();\n    \n    \n    \n    \n                                Intent intent=new Intent(AdminYeniSiparisActivity.this,AdminKullaniciUrunActivity.class);\n                                intent.putExtra(&quot;kid&quot;,kID);\n                                startActivity(intent);\n                            }\n                        });\n    \n                    }\n    \n                    @NonNull\n                    @Override\n                    public AdminSiparisViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n                        View view= LayoutInflater.from(parent.getContext()).inflate(R.layout.siparis_layout,parent,false);\n                        return new AdminSiparisViewHolder(view);\n                    }\n                };\n        siparisList.setAdapter(adapter);\n        adapter.startListening();\n        \n    \n    }\n    \n    \n    public static class AdminSiparisViewHolder extends RecyclerView.ViewHolder{\n        public TextView kullanıcıİsmi,kullanıcıTelefon,kullanıcıToplamTutar,kullanıcıTarih,kullanıcıGonderiAddress;\n        public Button siparisGosterBtn;\n    \n        public AdminSiparisViewHolder(@NonNull View itemView) {\n            super(itemView);\n    \n            kullanıcıİsmi=itemView.findViewById(R.id.siparis_kullanıcı_adı);\n            kullanıcıTelefon=itemView.findViewById(R.id.siparis_telefon_numarası);\n            kullanıcıToplamTutar=itemView.findViewById(R.id.siparis_toplam_fiyat);\n            kullanıcıGonderiAddress=itemView.findViewById(R.id.siparis_address_il);\n            kullanıcıTarih=itemView.findViewById(R.id.siparis_tarih_saat);\n            siparisGosterBtn=itemView.findViewById(R.id.siparis_kontrol_btn);\n    \n        }\n    }\n\n}\n</code></pre>\n<p>I'm getting an error like this I tried getAdapter Position but it still creates problems</p>\n"},{"tags":["java","maven"],"answers":[{"tags":[],"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680090086,"creation_date":1680090086,"answer_id":75876727,"question_id":75876567,"body_markdown":"No.\r\n\r\nThe whole approach is &quot;unclean&quot;.\r\n\r\nFirst of all, if you use 100 dependencies directly in your source code, there is probably something wrong.\r\n\r\nI seems more likely that you do the transitive dependency resolution yourself. This is in most cases not advisable. Every dependency should have its own dependencies. In this way you usually need very few direct dependencies and get the rest as transitive dependencies. ","title":"Adding a tag inside &lt;dependency&gt; tag without repetition in pom.xml","body":"<p>No.</p>\n<p>The whole approach is &quot;unclean&quot;.</p>\n<p>First of all, if you use 100 dependencies directly in your source code, there is probably something wrong.</p>\n<p>I seems more likely that you do the transitive dependency resolution yourself. This is in most cases not advisable. Every dependency should have its own dependencies. In this way you usually need very few direct dependencies and get the rest as transitive dependencies.</p>\n"}],"owner":{"account_id":12577170,"reputation":109,"user_id":9149202,"display_name":"Ravindu Fernando"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1680090086,"creation_date":1680089138,"question_id":75876567,"body_markdown":"I have a POM file with nearly 100 dependencies defined as follows;\r\n\r\n       &lt;dependency&gt;\r\n            &lt;groupId&gt;com.sample.artifact&lt;/groupId&gt;\r\n            &lt;artifactId&gt;sample-artifact&lt;/artifactId&gt;\r\n            &lt;version&gt;${sample.version}&lt;/version&gt;\r\n            &lt;type&gt;jar&lt;/type&gt;\r\n        &lt;/dependency&gt;\r\n\r\nHowever I need to add an &lt;exclusions&gt; tag inside these dependencies to prevent Maven from downloading transitive dependencies. I&#39;m able to do it as follows;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.sample.artifact&lt;/groupId&gt;\r\n            &lt;artifactId&gt;sample-artifact&lt;/artifactId&gt;\r\n            &lt;version&gt;${sample.version}&lt;/version&gt;\r\n            &lt;type&gt;jar&lt;/type&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;*&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;*&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n\r\nHowever I think adding this &lt;exclusions&gt; block inside every &lt;dependency&gt; reduces the readability since it more than doubles the number of lines in the POM.\r\n\r\nIs there a cleaner way to achieve this?\r\n\r\n","title":"Adding a tag inside &lt;dependency&gt; tag without repetition in pom.xml","body":"<p>I have a POM file with nearly 100 dependencies defined as follows;</p>\n<pre><code>   &lt;dependency&gt;\n        &lt;groupId&gt;com.sample.artifact&lt;/groupId&gt;\n        &lt;artifactId&gt;sample-artifact&lt;/artifactId&gt;\n        &lt;version&gt;${sample.version}&lt;/version&gt;\n        &lt;type&gt;jar&lt;/type&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>However I need to add an  tag inside these dependencies to prevent Maven from downloading transitive dependencies. I'm able to do it as follows;</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.sample.artifact&lt;/groupId&gt;\n        &lt;artifactId&gt;sample-artifact&lt;/artifactId&gt;\n        &lt;version&gt;${sample.version}&lt;/version&gt;\n        &lt;type&gt;jar&lt;/type&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;*&lt;/groupId&gt;\n                &lt;artifactId&gt;*&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>However I think adding this  block inside every  reduces the readability since it more than doubles the number of lines in the POM.</p>\n<p>Is there a cleaner way to achieve this?</p>\n"},{"tags":["java","itext"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1680105040,"post_id":75876703,"comment_id":133841915,"body_markdown":"The event listener gets the characters as they are drawn. If a text line is drawn in the PDF using a single string argument of a text showing instruction, the event listener gets the whole line, too. If a text line is drawn using a separate string for each character, the event listener gets the line character by character. No bug, just the design of PDF.","body":"The event listener gets the characters as they are drawn. If a text line is drawn in the PDF using a single string argument of a text showing instruction, the event listener gets the whole line, too. If a text line is drawn using a separate string for each character, the event listener gets the line character by character. No bug, just the design of PDF."},{"owner":{"account_id":18642147,"reputation":45,"user_id":13587664,"display_name":"PanBorewicz"},"score":0,"creation_date":1680159337,"post_id":75876703,"comment_id":133851245,"body_markdown":"Thanks, for an answer, I have tried different pdfs and that is the case. In different pdf&#39;s it work fine. I have check now how SimpleTextExtractionStrategy implements ITextExtractionStrategy. My filters uses TextRegionEventFilter. Thanks for a track :)","body":"Thanks, for an answer, I have tried different pdfs and that is the case. In different pdf&#39;s it work fine. I have check now how SimpleTextExtractionStrategy implements ITextExtractionStrategy. My filters uses TextRegionEventFilter. Thanks for a track :)"}],"owner":{"account_id":18642147,"reputation":45,"user_id":13587664,"display_name":"PanBorewicz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680089928,"creation_date":1680089928,"question_id":75876703,"body_markdown":"I have problem with itextpdf. I&#39;m developing a resume parser based on LinkedIn generated pdfs.\r\n\r\nBefore I start to create location based filters I&#39;d parse whole text with SimpleTextExtractionStrategy concat it as a one String and separate it by System.lineSeparator(). And I get a line after line in the same order like I have in pdf.\r\n\r\n```\r\npublic String getNameAndSurname(PdfDocument pdfDoc) {\r\n        SimpleTextExtractionStrategy strategy = new SimpleTextExtractionStrategy();\r\n        PdfCanvasProcessor proc = new PdfCanvasProcessor(strategy);\r\n        proc.processPageContent(pdfDoc.getFirstPage());\r\n        System.out.println(strategy.getResultantText());\r\n        return strategy.getResultantText().split(System.lineSeparator())[0];\r\n    }\r\n```\r\n\r\nBut I need to read a line after line and separate Resume Blocks like Education, or Experience.\r\n\r\nI have create custom filter extending TextRegionEventFilter. Everything&#39;s works, but in some cases I got value as single character. I have checked there is no special signs in splitted lines.\r\n\r\nI have try to concat it but this is difficult to set rule when it should hapend.\r\n\r\n```\r\n @Override\r\n    public boolean accept(IEventData data, EventType type) {\r\n        if (type.equals(EventType.RENDER_TEXT)) {\r\n            TextRenderInfo renderInfo = (TextRenderInfo) data;\r\n                if (\r\n                        setBlock(renderInfo, BLOCK_START, BLOCK_END) &amp;&amp;\r\n                        isFontMatch(renderInfo, LINE_FONT_NAME, LINE_FONT_SIZE)\r\n                ) {\r\n                    super.elements.add(renderInfo.getText());\r\n                    return true;\r\n                }\r\n            }\r\n        return false;\r\n    }\r\n```\r\n\r\nIs it library bug? or how to even start to debug it?\r\n\r\nI try to change a page size, from getFrom document to set it directly to PageSize.A4, I was also try to connect characters but I can&#39;t established when word is fully merged, because there is no rule when next world will be separated or not for characters.\r\n\r\n\r\n\r\noutput:\r\n\r\n    {\r\n            &quot;jobRole&quot;: &quot;T&quot;,\r\n            &quot;company&quot;: &quot;Company 4&quot;,\r\n            &quot;timePeriod&quot;: &quot;XXX 2017 - XXX 2017 (3 months)&quot;\r\n        },\r\n        {\r\n            &quot;jobRole&quot;: &quot;r&quot;,\r\n            &quot;company&quot;: &quot;Company 3&quot;,\r\n            &quot;timePeriod&quot;: &quot;XXX 2016 - XXX 2016 (9 months)&quot;\r\n        },\r\n        {\r\n            &quot;jobRole&quot;: &quot;a&quot;,\r\n            &quot;company&quot;: &quot;Company2&quot;,\r\n            &quot;timePeriod&quot;: &quot;XXX 2014 - XXX 2015 (10 months)&quot;\r\n        },\r\n        {\r\n            &quot;jobRole&quot;: &quot;i&quot;,\r\n            &quot;company&quot;: &quot;Company1&quot;,\r\n            &quot;timePeriod&quot;: &quot;XXX 2014 - XXX 2014 (7 months)&quot;\r\n        }","title":"itextpdf location TextRegionEventFilter returns letter by letter","body":"<p>I have problem with itextpdf. I'm developing a resume parser based on LinkedIn generated pdfs.</p>\n<p>Before I start to create location based filters I'd parse whole text with SimpleTextExtractionStrategy concat it as a one String and separate it by System.lineSeparator(). And I get a line after line in the same order like I have in pdf.</p>\n<pre><code>public String getNameAndSurname(PdfDocument pdfDoc) {\n        SimpleTextExtractionStrategy strategy = new SimpleTextExtractionStrategy();\n        PdfCanvasProcessor proc = new PdfCanvasProcessor(strategy);\n        proc.processPageContent(pdfDoc.getFirstPage());\n        System.out.println(strategy.getResultantText());\n        return strategy.getResultantText().split(System.lineSeparator())[0];\n    }\n</code></pre>\n<p>But I need to read a line after line and separate Resume Blocks like Education, or Experience.</p>\n<p>I have create custom filter extending TextRegionEventFilter. Everything's works, but in some cases I got value as single character. I have checked there is no special signs in splitted lines.</p>\n<p>I have try to concat it but this is difficult to set rule when it should hapend.</p>\n<pre><code> @Override\n    public boolean accept(IEventData data, EventType type) {\n        if (type.equals(EventType.RENDER_TEXT)) {\n            TextRenderInfo renderInfo = (TextRenderInfo) data;\n                if (\n                        setBlock(renderInfo, BLOCK_START, BLOCK_END) &amp;&amp;\n                        isFontMatch(renderInfo, LINE_FONT_NAME, LINE_FONT_SIZE)\n                ) {\n                    super.elements.add(renderInfo.getText());\n                    return true;\n                }\n            }\n        return false;\n    }\n</code></pre>\n<p>Is it library bug? or how to even start to debug it?</p>\n<p>I try to change a page size, from getFrom document to set it directly to PageSize.A4, I was also try to connect characters but I can't established when word is fully merged, because there is no rule when next world will be separated or not for characters.</p>\n<p>output:</p>\n<pre><code>{\n        &quot;jobRole&quot;: &quot;T&quot;,\n        &quot;company&quot;: &quot;Company 4&quot;,\n        &quot;timePeriod&quot;: &quot;XXX 2017 - XXX 2017 (3 months)&quot;\n    },\n    {\n        &quot;jobRole&quot;: &quot;r&quot;,\n        &quot;company&quot;: &quot;Company 3&quot;,\n        &quot;timePeriod&quot;: &quot;XXX 2016 - XXX 2016 (9 months)&quot;\n    },\n    {\n        &quot;jobRole&quot;: &quot;a&quot;,\n        &quot;company&quot;: &quot;Company2&quot;,\n        &quot;timePeriod&quot;: &quot;XXX 2014 - XXX 2015 (10 months)&quot;\n    },\n    {\n        &quot;jobRole&quot;: &quot;i&quot;,\n        &quot;company&quot;: &quot;Company1&quot;,\n        &quot;timePeriod&quot;: &quot;XXX 2014 - XXX 2014 (7 months)&quot;\n    }\n</code></pre>\n"},{"tags":["java","ssl","keystore"],"comments":[{"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":0,"creation_date":1631653425,"post_id":69184456,"comment_id":122279943,"body_markdown":"Did you set `javax.net.ssl.keyStorePassword` too?","body":"Did you set <code>javax.net.ssl.keyStorePassword</code> too?"},{"owner":{"account_id":16532427,"reputation":31,"user_id":11945303,"display_name":"Anuj Kumar"},"score":0,"creation_date":1631653536,"post_id":69184456,"comment_id":122279974,"body_markdown":"Yes, I added the password too","body":"Yes, I added the password too"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1631657548,"post_id":69184456,"comment_id":122280913,"body_markdown":"At what point did you set the system property? It may already have been read: they are only read once and stored in variables. Conversely the container may be setting it after you. You need to use the custom SSL context.","body":"At what point did you set the system property? It may already have been read: they are only read once and stored in variables. Conversely the container may be setting it after you. You need to use the custom SSL context."},{"owner":{"account_id":16532427,"reputation":31,"user_id":11945303,"display_name":"Anuj Kumar"},"score":0,"creation_date":1631683740,"post_id":69184456,"comment_id":122285054,"body_markdown":"@user207421 I specified the system properties via command line as -Djavax.net.ssl.keyStore=somepath -Djavax.net.ssl.keyStorePassword=pwd","body":"@user207421 I specified the system properties via command line as -Djavax.net.ssl.keyStore=somepath -Djavax.net.ssl.keyStorePassword=pwd"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1631684314,"post_id":69184456,"comment_id":122285171,"body_markdown":"OK well I think you&#39;re going to have to stick to the custom code. In the nature of things the container is entitled to do whatever it likes about system properties.","body":"OK well I think you&#39;re going to have to stick to the custom code. In the nature of things the container is entitled to do whatever it likes about system properties."},{"owner":{"account_id":2932924,"reputation":405,"user_id":2512629,"display_name":"Vincent Guyard"},"score":0,"creation_date":1648704143,"post_id":69184456,"comment_id":126692984,"body_markdown":"I have the same problem, could you solved it?","body":"I have the same problem, could you solved it?"}],"answers":[{"tags":[],"owner":{"account_id":13013343,"reputation":113,"user_id":9405542,"display_name":"Diarmuid Leonard"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1680089422,"creation_date":1680089422,"answer_id":75876620,"question_id":69184456,"body_markdown":"I had the same issue when the server&#39;s truststore was incorrect.  Prior to the above SSL client logs were &#39;No X.509 cert selected for RSA&#39; and &#39;No available authentication scheme&#39;. Prior to that was the biggest clue - &quot;certificate authorities&quot; in the CertificateRequest contained only the CN for the server&#39;s cert - not the server&#39;s CN for its CA.\r\n\r\nSee also https://stackoverflow.com/questions/9299133/why-doesnt-java-send-the-client-certificate-during-ssl-handshake","title":"No X.509 certificate for client authentication SSL issue in java","body":"<p>I had the same issue when the server's truststore was incorrect.  Prior to the above SSL client logs were 'No X.509 cert selected for RSA' and 'No available authentication scheme'. Prior to that was the biggest clue - &quot;certificate authorities&quot; in the CertificateRequest contained only the CN for the server's cert - not the server's CN for its CA.</p>\n<p>See also <a href=\"https://stackoverflow.com/questions/9299133/why-doesnt-java-send-the-client-certificate-during-ssl-handshake\">why doesn&#39;t java send the client certificate during SSL handshake?</a></p>\n"}],"owner":{"account_id":16532427,"reputation":31,"user_id":11945303,"display_name":"Anuj Kumar"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6912,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1680089422,"creation_date":1631653136,"question_id":69184456,"body_markdown":"I&#39;m working on a server in a distributed application that has browser clients and also participates in server-to-server communication with a 3rd party. My server has a CA-signed certificate to let my clients connect using TLS (SSL) communication using HTTP/S and XMPP(secure). That&#39;s all working fine.\r\n\r\nNow I need to securely connect to a 3rd party server. In this communication, my server acts as client and I&#39;ve a client certificate signed by the 3rd party.\r\n\r\nThe issue is when I tried adding the client certificates that I got from the 3rd party server and using the standard system configuration (-Djavax.net.ssl.keyStore=xyz). I get a &quot;No X.509 certificate for client authentication&quot; error in the debug log for SSL.\r\n\r\n```\r\njavax.net.ssl|FINE|01|main|2021-09-15 02:07:40.538 IST|CertificateMessage.java:297|No X.509 certificate for client authentication, use empty Certificate message instead\r\njavax.net.ssl|FINE|01|main|2021-09-15 02:07:40.538 IST|CertificateMessage.java:328|Produced client Certificate handshake message (\r\n&quot;Certificates&quot;: &lt;empty list&gt;\r\n)\r\n```\r\n\r\nBut when I use a custom SSL context with the same keystore, it works fine. Following is the code for the same.\r\n```\r\n                String keystorePath = &quot;keystorePath&quot;;\r\n                String keystorePassword = &quot;changeit&quot;;\r\n\r\n                // Make a KeyStore from the JKS file\r\n                KeyStore ks = null;\r\n                try {\r\n                    ks = KeyStore.getInstance(&quot;JKS&quot;);\r\n                } catch (KeyStoreException e) {\r\n                    e.printStackTrace();\r\n                }\r\n                try (\r\n                    FileInputStream fis = new FileInputStream(keystorePath)) {\r\n                    ks.load(fis, keystorePassword.toCharArray());\r\n                }\r\n\r\n                TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\r\n                tmf.init(ks);\r\n\r\n                // Make a KeyManagerFactory from the KeyStore\r\n                KeyManagerFactory kmf = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\r\n                kmf.init(ks, keystorePassword.toCharArray());\r\n\r\n                // Get hold of the default trust manager\r\n                X509TrustManager x509Tm = null;\r\n                for (TrustManager tm : tmf.getTrustManagers()) {\r\n                    if (tm instanceof X509TrustManager) {\r\n                        x509Tm = (X509TrustManager) tm;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                // Now make an SSL Context with our Key Manager and the default Trust Manager\r\n                SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n                sslContext.init(kmf.getKeyManagers(), null, null);\r\n                return okHttpClient.newBuilder()\r\n                        .sslSocketFactory(sslContext.getSocketFactory(), x509Tm)\r\n                        .connectTimeout(10000, TimeUnit.MILLISECONDS)\r\n                        .readTimeout(10000, TimeUnit.MILLISECONDS)\r\n                        .build();\r\n```\r\n \r\nI want to use only the standard system configuration for keystore and not the custom SSL context.","title":"No X.509 certificate for client authentication SSL issue in java","body":"<p>I'm working on a server in a distributed application that has browser clients and also participates in server-to-server communication with a 3rd party. My server has a CA-signed certificate to let my clients connect using TLS (SSL) communication using HTTP/S and XMPP(secure). That's all working fine.</p>\n<p>Now I need to securely connect to a 3rd party server. In this communication, my server acts as client and I've a client certificate signed by the 3rd party.</p>\n<p>The issue is when I tried adding the client certificates that I got from the 3rd party server and using the standard system configuration (-Djavax.net.ssl.keyStore=xyz). I get a &quot;No X.509 certificate for client authentication&quot; error in the debug log for SSL.</p>\n<pre><code>javax.net.ssl|FINE|01|main|2021-09-15 02:07:40.538 IST|CertificateMessage.java:297|No X.509 certificate for client authentication, use empty Certificate message instead\njavax.net.ssl|FINE|01|main|2021-09-15 02:07:40.538 IST|CertificateMessage.java:328|Produced client Certificate handshake message (\n&quot;Certificates&quot;: &lt;empty list&gt;\n)\n</code></pre>\n<p>But when I use a custom SSL context with the same keystore, it works fine. Following is the code for the same.</p>\n<pre><code>                String keystorePath = &quot;keystorePath&quot;;\n                String keystorePassword = &quot;changeit&quot;;\n\n                // Make a KeyStore from the JKS file\n                KeyStore ks = null;\n                try {\n                    ks = KeyStore.getInstance(&quot;JKS&quot;);\n                } catch (KeyStoreException e) {\n                    e.printStackTrace();\n                }\n                try (\n                    FileInputStream fis = new FileInputStream(keystorePath)) {\n                    ks.load(fis, keystorePassword.toCharArray());\n                }\n\n                TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\n                tmf.init(ks);\n\n                // Make a KeyManagerFactory from the KeyStore\n                KeyManagerFactory kmf = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\n                kmf.init(ks, keystorePassword.toCharArray());\n\n                // Get hold of the default trust manager\n                X509TrustManager x509Tm = null;\n                for (TrustManager tm : tmf.getTrustManagers()) {\n                    if (tm instanceof X509TrustManager) {\n                        x509Tm = (X509TrustManager) tm;\n                        break;\n                    }\n                }\n\n                // Now make an SSL Context with our Key Manager and the default Trust Manager\n                SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\n                sslContext.init(kmf.getKeyManagers(), null, null);\n                return okHttpClient.newBuilder()\n                        .sslSocketFactory(sslContext.getSocketFactory(), x509Tm)\n                        .connectTimeout(10000, TimeUnit.MILLISECONDS)\n                        .readTimeout(10000, TimeUnit.MILLISECONDS)\n                        .build();\n</code></pre>\n<p>I want to use only the standard system configuration for keystore and not the custom SSL context.</p>\n"},{"tags":["java","jdbc","hana"],"comments":[{"owner":{"account_id":4273138,"reputation":1388,"user_id":3494492,"accept_rate":83,"display_name":"kiwixz"},"score":0,"creation_date":1412282193,"post_id":26169190,"comment_id":41027816,"body_markdown":"The only idea i have would be to search for the number 10 in your code...","body":"The only idea i have would be to search for the number 10 in your code..."},{"owner":{"account_id":546235,"reputation":1379,"user_id":1648895,"accept_rate":93,"display_name":"Oleg Dulin"},"score":0,"creation_date":1412282675,"post_id":26169190,"comment_id":41028043,"body_markdown":"The error is not coming from my code...","body":"The error is not coming from my code..."}],"answers":[{"tags":[],"owner":{"account_id":3602099,"reputation":126,"user_id":3005200,"display_name":"user3005200"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1412363550,"creation_date":1412361058,"answer_id":26184679,"question_id":26169190,"body_markdown":"Judging by the stack trace references to the AuthenticationManager, are you positive your user name and password are correct? Also the method name putBigUnicode on the stacktrace makes me think there might be  some invalid character like a “ in there","title":"Why would I be getting an java.lang.ArrayIndexOutOfBoundsException from SAP HANA JDBC Driver?","body":"<p>Judging by the stack trace references to the AuthenticationManager, are you positive your user name and password are correct? Also the method name putBigUnicode on the stacktrace makes me think there might be  some invalid character like a “ in there</p>\n"}],"owner":{"account_id":546235,"reputation":1379,"user_id":1648895,"accept_rate":93,"display_name":"Oleg Dulin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":641,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":26184679,"answer_count":1,"score":1,"last_activity_date":1680089417,"creation_date":1412281989,"question_id":26169190,"body_markdown":"I am configuring my connection pool as follows:\r\n\r\n    dataSource = new BasicDataSource();\r\n    dataSource.setUrl(&quot;jdbc:sap://********:30015&quot;);\r\n    dataSource.setDriverClassName(&quot;com.sap.db.jdbc.Driver&quot;);\r\n    dataSource.setMaxActive(20);\r\n    dataSource.setMaxIdle(0);\r\n    dataSource.setMaxIdle(0);\r\n    dataSource.setUsername(&quot;*******&quot;);\r\n    dataSource.setPassword(&quot;*******&quot;);\r\n\r\nHowever, when the connection gets initialized, I get this exception:\r\n\r\n    java.lang.ArrayIndexOutOfBoundsException: 10\r\n            at com.sap.db.util.StructuredBytes.putBigUnicode(StructuredBytes.java:568)\r\n            at com.sap.db.util.MemIndirection.putBigUnicode(MemIndirection.java:186)\r\n            at com.sap.db.jdbc.packet.DataPartAuthentication.putBigUnicode(DataPartAuthentication.java:192)\r\n            at com.sap.db.util.security.AuthenticationManager.addClientProofPart(AuthenticationManager.java:139)\r\n            at com.sap.db.util.security.AbstractAuthenticationManager.connect(AbstractAuthenticationManager.java:39)\r\n            at com.sap.db.jdbc.ConnectionSapDB.openSession(ConnectionSapDB.java:586)\r\n            at com.sap.db.jdbc.ConnectionSapDB.doConnect(ConnectionSapDB.java:436)\r\n            at com.sap.db.jdbc.ConnectionSapDB.&lt;init&gt;(ConnectionSapDB.java:195)\r\n            at com.sap.db.jdbc.ConnectionSapDBFinalize.&lt;init&gt;(ConnectionSapDBFinalize.java:13)\r\n            at com.sap.db.jdbc.Driver.connect(Driver.java:255)\r\n            at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38)\r\n            at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582)\r\n            at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556)\r\n            at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545)\r\n            at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388)\r\n            at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)\r\n\r\nAs you can see the exception is deep in SAP HANA JDBC Driver code, not my code. But I also don&#39;t understand what I could possibly be doing wrong in this situation ?\r\n\r\nAny help and suggestions on how to debug this are greatly appreciated.\r\n","title":"Why would I be getting an java.lang.ArrayIndexOutOfBoundsException from SAP HANA JDBC Driver?","body":"<p>I am configuring my connection pool as follows:</p>\n\n<pre><code>dataSource = new BasicDataSource();\ndataSource.setUrl(\"jdbc:sap://********:30015\");\ndataSource.setDriverClassName(\"com.sap.db.jdbc.Driver\");\ndataSource.setMaxActive(20);\ndataSource.setMaxIdle(0);\ndataSource.setMaxIdle(0);\ndataSource.setUsername(\"*******\");\ndataSource.setPassword(\"*******\");\n</code></pre>\n\n<p>However, when the connection gets initialized, I get this exception:</p>\n\n<pre><code>java.lang.ArrayIndexOutOfBoundsException: 10\n        at com.sap.db.util.StructuredBytes.putBigUnicode(StructuredBytes.java:568)\n        at com.sap.db.util.MemIndirection.putBigUnicode(MemIndirection.java:186)\n        at com.sap.db.jdbc.packet.DataPartAuthentication.putBigUnicode(DataPartAuthentication.java:192)\n        at com.sap.db.util.security.AuthenticationManager.addClientProofPart(AuthenticationManager.java:139)\n        at com.sap.db.util.security.AbstractAuthenticationManager.connect(AbstractAuthenticationManager.java:39)\n        at com.sap.db.jdbc.ConnectionSapDB.openSession(ConnectionSapDB.java:586)\n        at com.sap.db.jdbc.ConnectionSapDB.doConnect(ConnectionSapDB.java:436)\n        at com.sap.db.jdbc.ConnectionSapDB.&lt;init&gt;(ConnectionSapDB.java:195)\n        at com.sap.db.jdbc.ConnectionSapDBFinalize.&lt;init&gt;(ConnectionSapDBFinalize.java:13)\n        at com.sap.db.jdbc.Driver.connect(Driver.java:255)\n        at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38)\n        at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582)\n        at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1556)\n        at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1545)\n        at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1388)\n        at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)\n</code></pre>\n\n<p>As you can see the exception is deep in SAP HANA JDBC Driver code, not my code. But I also don't understand what I could possibly be doing wrong in this situation ?</p>\n\n<p>Any help and suggestions on how to debug this are greatly appreciated.</p>\n"},{"tags":["java","ruby-on-rails","encryption","aes"],"comments":[{"owner":{"account_id":8682,"reputation":16007,"user_id":15754,"display_name":"dbugger"},"score":0,"creation_date":1680090321,"post_id":75876572,"comment_id":133837246,"body_markdown":"secret_key_generation method looks suspect. why are you building a string of integers and passing to from_byte_array_to_base64","body":"secret_key_generation method looks suspect. why are you building a string of integers and passing to from_byte_array_to_base64"},{"owner":{"account_id":27654944,"reputation":1,"user_id":21109048,"display_name":"shaik praveen"},"score":0,"creation_date":1680180810,"post_id":75876572,"comment_id":133856667,"body_markdown":"I am trying to get exact output like java.In order to get the output like StringUtil.fromByteArrayToBase64((key).getBytes())) I used the do loop.I tried without do loop also but it also failed","body":"I am trying to get exact output like java.In order to get the output like StringUtil.fromByteArrayToBase64((key).getBytes())) I used the do loop.I tried without do loop also but it also failed"},{"owner":{"account_id":8682,"reputation":16007,"user_id":15754,"display_name":"dbugger"},"score":0,"creation_date":1680180949,"post_id":75876572,"comment_id":133856711,"body_markdown":"A string of concatenated integers is not an array -- will never work as you expect.  Need to work through step by step.","body":"A string of concatenated integers is not an array -- will never work as you expect.  Need to work through step by step."}],"owner":{"account_id":27654944,"reputation":1,"user_id":21109048,"display_name":"shaik praveen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680089301,"creation_date":1680089171,"question_id":75876572,"body_markdown":"I am trying to convert some code from java to ruby but its not working properly.I am trying to encrypt a string in ruby using Cipher with AES algorithm\r\n\r\n    \r\n```\r\npublic String encryptData(String data, String requestorId, String encryptionKey) throws  InvalidKeyException, NoSuchAlgorithmException,NoSuchPaddingException, IllegalBlockSizeException, BadPaddingException, InvalidAlgorithmParameterException\r\n{\r\n    String encryptedData = data;\r\n    SecretKey secretKey1 = secretKeyGeneration(requestorId, encryptionKey,&quot;AES&quot;, 256);\r\n    byte[] encrytedString1 = encrypt(secretKey1, data);\r\n    encryptedData = StringUtil.fromByteArrayToBase64(encrytedString1);\t\t\r\n    return encryptedData;\r\n}\r\n\r\n public static SecretKey secretKeyGeneration(String requestor, String key, String algo, Integer size)\r\n{\r\n    NAPISecretKey napiSecretKey = new NAPISecretKey();\r\n    napiSecretKey.setAlgorithm(algo);\r\n    napiSecretKey.setKey(StringUtil.fromByteArrayToBase64((key).getBytes()));\r\n    napiSecretKey.setSize(size);\r\n \treturn decodeSecretKey(napiSecretKey.getKey(), napiSecretKey.getAlgorithm());\r\n}\r\n\r\npublic static SecretKey decodeSecretKey(String key, String algo)\r\n{\r\n    if (&quot;AES&quot;.equals(algo)) {\r\n    \treturn new SecretKeySpec(StringUtil.fromBase64ToByteArray(key), algo);}\r\n\telse {\r\n    \tthrow new UnsupportedOperationException(algo + &quot; is not supported&quot;);}\r\n}\r\n\r\npublic class NAPISecretKey {\r\n\tprivate\tString\talgorithm;\t\r\n    private\tint\tsize;\r\n    private\tString\tkey;\r\n    public String getAlgorithm() {\r\n    \treturn algorithm;}\r\n    public void setAlgorithm(String algorithm) {\r\n    this.algorithm = algorithm;}\r\n    public int getSize() {\r\n    return size;}\r\n    public void setSize(int size) {\r\n    this.size = size;}\r\n    public String getKey() {\r\n    return key;}\r\n    public void setKey(String key) {\r\n    this.key = key;}\r\n}\r\n\r\npublic static byte\\[\\] encrypt(SecretKey secretKey, String plaintext) throws InvalidKeyException, NoSuchAlgorithmException, NoSuchPaddingException, IllegalBlockSizeException,\r\nBadPaddingException, InvalidAlgorithmParameterException\r\n{\r\n    return encrypt(secretKey, StringUtil.fromStringToByteArray(plaintext));\r\n}\r\npublic static byte\\[\\] encrypt(SecretKey secretKey, byte\\[\\] plaintext) throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException,IllegalBlockSizeException,BadPaddingException, InvalidAlgorithmParameterException\r\n{\r\n    Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\r\n    cipher.init(Cipher.ENCRYPT_MODE, secretKey, new IvParameterSpec(new byte\\[16\\]));\r\n    return cipher.doFinal(plaintext);\r\n}\r\n\r\nimport java.nio.charset.Charset;\r\nimport java.util.Base64;\r\nimport java.util.Base64.Decoder;\r\nimport java.util.Base64.Encoder;\r\n\r\npublic class StringUtil {\r\n\tprivate\tstatic\tCharset\tcharset;\r\n\tprivate StringUtil() {\r\n\t\tsuper();\r\n\t}\r\n\tstatic {\r\n\t\tcharset=Charset.forName(&quot;UTF-8&quot;);\r\n\t}\r\n\tpublic\tstatic\tbyte[]\tfromBase64ToByteArray(String data) {\r\n\t\tDecoder\tdecoder=Base64.getDecoder();\r\n\t\treturn\tdecoder.decode(fromStringToByteArray(data));\r\n\t}\r\n\tpublic\tstatic\tString\tfromByteArrayToBase64(byte[]\tdata) {\r\n\t\tEncoder\tencoder=Base64.getEncoder();\r\n\t\treturn\tencoder.encodeToString(data);\r\n\t}\r\n\tpublic\tstatic\tbyte[]\tfromStringToByteArray(String data) {\r\n\t\treturn\tdata.getBytes(charset);\r\n\t}\r\n\tpublic\tstatic\tString\tfromByteArrayToString(byte[] data) {\r\n\t\treturn\tnew String(data,charset);\r\n\t}\r\n}\r\n\r\n\r\n```\r\nthe ruby code is \r\n    \r\n```\r\ndef encrypt_data\r\n      encryption_key=&quot;12345678&quot;\r\n      requestor_id=&quot;IN000000&quot;\r\n      encrypted_data = params[:orderReqDtls] || request.headers[:orderReqDtls]\r\n      encrypted_data = @order_data if caller_locations.any? { |loc| loc.label == &#39;generate_json_order_data&#39; }\r\n      secret_key = secret_key_generation(requestor_id, encryption_key, &quot;AES&quot;, 256)\r\n      encrypted_string = encrypt(secret_key, encrypted_data)\r\n      encrypted_data = Base64.strict_encode64(encrypted_string)\r\n      return render json: {data:encrypted_data}\r\n    end\r\n\r\n    def secret_key_generation(requestor, key, algo, size)\r\n      napi_secret_key = NAPISecretKey.new\r\n      napi_secret_key.algorithm = algo\r\n      base64_encoded_key = &quot;&quot;\r\n      key.bytes.each do |i|\r\n        base64_encoded_key+=i.to_s\r\n      end\r\n      napi_secret_key.key = from_byte_array_to_base64(base64_encoded_key)\r\n      napi_secret_key.size = size\r\n      return decode_secret_key(napi_secret_key.key,napi_secret_key.algorithm )\r\n    end\r\n\r\n    def decode_secret_key(key, algo)\r\n      if algo == &quot;AES&quot;\r\n        decodedKey = Base64.decode64(key)\r\n      else\r\n        raise &quot;#{algo} is not supported&quot;\r\n      end\r\n    end\r\n\r\n    def encrypt(secret_key, plaintext)\r\n      text=&quot;&quot;\r\n      plaintext.bytes.each do |i|\r\n        text+=i.to_s\r\n      end\r\n      cipher = OpenSSL::Cipher.new(&#39;AES-256-ECB&#39;)\r\n      cipher.encrypt\r\n      cipher.key = secret_key\r\n      cipher.iv = &quot;\\0&quot; * 16\r\n      encrypted_data = cipher.update(plaintext) + cipher.final\r\n    end\r\n```\r\n\r\nthe output encrypted code is different for both the cases for any given output.can you suggest me the changes in ruby to get the same output","title":"how to convert java to ruby","body":"<p>I am trying to convert some code from java to ruby but its not working properly.I am trying to encrypt a string in ruby using Cipher with AES algorithm</p>\n<pre><code>public String encryptData(String data, String requestorId, String encryptionKey) throws  InvalidKeyException, NoSuchAlgorithmException,NoSuchPaddingException, IllegalBlockSizeException, BadPaddingException, InvalidAlgorithmParameterException\n{\n    String encryptedData = data;\n    SecretKey secretKey1 = secretKeyGeneration(requestorId, encryptionKey,&quot;AES&quot;, 256);\n    byte[] encrytedString1 = encrypt(secretKey1, data);\n    encryptedData = StringUtil.fromByteArrayToBase64(encrytedString1);      \n    return encryptedData;\n}\n\n public static SecretKey secretKeyGeneration(String requestor, String key, String algo, Integer size)\n{\n    NAPISecretKey napiSecretKey = new NAPISecretKey();\n    napiSecretKey.setAlgorithm(algo);\n    napiSecretKey.setKey(StringUtil.fromByteArrayToBase64((key).getBytes()));\n    napiSecretKey.setSize(size);\n    return decodeSecretKey(napiSecretKey.getKey(), napiSecretKey.getAlgorithm());\n}\n\npublic static SecretKey decodeSecretKey(String key, String algo)\n{\n    if (&quot;AES&quot;.equals(algo)) {\n        return new SecretKeySpec(StringUtil.fromBase64ToByteArray(key), algo);}\n    else {\n        throw new UnsupportedOperationException(algo + &quot; is not supported&quot;);}\n}\n\npublic class NAPISecretKey {\n    private String  algorithm;  \n    private int size;\n    private String  key;\n    public String getAlgorithm() {\n        return algorithm;}\n    public void setAlgorithm(String algorithm) {\n    this.algorithm = algorithm;}\n    public int getSize() {\n    return size;}\n    public void setSize(int size) {\n    this.size = size;}\n    public String getKey() {\n    return key;}\n    public void setKey(String key) {\n    this.key = key;}\n}\n\npublic static byte\\[\\] encrypt(SecretKey secretKey, String plaintext) throws InvalidKeyException, NoSuchAlgorithmException, NoSuchPaddingException, IllegalBlockSizeException,\nBadPaddingException, InvalidAlgorithmParameterException\n{\n    return encrypt(secretKey, StringUtil.fromStringToByteArray(plaintext));\n}\npublic static byte\\[\\] encrypt(SecretKey secretKey, byte\\[\\] plaintext) throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException,IllegalBlockSizeException,BadPaddingException, InvalidAlgorithmParameterException\n{\n    Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\n    cipher.init(Cipher.ENCRYPT_MODE, secretKey, new IvParameterSpec(new byte\\[16\\]));\n    return cipher.doFinal(plaintext);\n}\n\nimport java.nio.charset.Charset;\nimport java.util.Base64;\nimport java.util.Base64.Decoder;\nimport java.util.Base64.Encoder;\n\npublic class StringUtil {\n    private static  Charset charset;\n    private StringUtil() {\n        super();\n    }\n    static {\n        charset=Charset.forName(&quot;UTF-8&quot;);\n    }\n    public  static  byte[]  fromBase64ToByteArray(String data) {\n        Decoder decoder=Base64.getDecoder();\n        return  decoder.decode(fromStringToByteArray(data));\n    }\n    public  static  String  fromByteArrayToBase64(byte[]    data) {\n        Encoder encoder=Base64.getEncoder();\n        return  encoder.encodeToString(data);\n    }\n    public  static  byte[]  fromStringToByteArray(String data) {\n        return  data.getBytes(charset);\n    }\n    public  static  String  fromByteArrayToString(byte[] data) {\n        return  new String(data,charset);\n    }\n}\n\n\n</code></pre>\n<p>the ruby code is</p>\n<pre><code>def encrypt_data\n      encryption_key=&quot;12345678&quot;\n      requestor_id=&quot;IN000000&quot;\n      encrypted_data = params[:orderReqDtls] || request.headers[:orderReqDtls]\n      encrypted_data = @order_data if caller_locations.any? { |loc| loc.label == 'generate_json_order_data' }\n      secret_key = secret_key_generation(requestor_id, encryption_key, &quot;AES&quot;, 256)\n      encrypted_string = encrypt(secret_key, encrypted_data)\n      encrypted_data = Base64.strict_encode64(encrypted_string)\n      return render json: {data:encrypted_data}\n    end\n\n    def secret_key_generation(requestor, key, algo, size)\n      napi_secret_key = NAPISecretKey.new\n      napi_secret_key.algorithm = algo\n      base64_encoded_key = &quot;&quot;\n      key.bytes.each do |i|\n        base64_encoded_key+=i.to_s\n      end\n      napi_secret_key.key = from_byte_array_to_base64(base64_encoded_key)\n      napi_secret_key.size = size\n      return decode_secret_key(napi_secret_key.key,napi_secret_key.algorithm )\n    end\n\n    def decode_secret_key(key, algo)\n      if algo == &quot;AES&quot;\n        decodedKey = Base64.decode64(key)\n      else\n        raise &quot;#{algo} is not supported&quot;\n      end\n    end\n\n    def encrypt(secret_key, plaintext)\n      text=&quot;&quot;\n      plaintext.bytes.each do |i|\n        text+=i.to_s\n      end\n      cipher = OpenSSL::Cipher.new('AES-256-ECB')\n      cipher.encrypt\n      cipher.key = secret_key\n      cipher.iv = &quot;\\0&quot; * 16\n      encrypted_data = cipher.update(plaintext) + cipher.final\n    end\n</code></pre>\n<p>the output encrypted code is different for both the cases for any given output.can you suggest me the changes in ruby to get the same output</p>\n"},{"tags":["java","import","automation","intellij-idea"],"comments":[{"owner":{"account_id":1796566,"reputation":929,"user_id":1635855,"accept_rate":83,"display_name":"Wuaner"},"score":29,"creation_date":1463336065,"post_id":12585253,"comment_id":62012828,"body_markdown":"`ctrl + alt + l` will send my pc to sleep..LOL. linux btw.","body":"<code>ctrl + alt + l</code> will send my pc to sleep..LOL. linux btw."},{"owner":{"account_id":2863665,"reputation":5360,"user_id":2458372,"accept_rate":68,"display_name":"JavaDeveloper"},"score":29,"creation_date":1485874557,"post_id":12585253,"comment_id":71099971,"body_markdown":"alt + control + o   : works best on Mac","body":"alt + control + o   : works best on Mac"},{"owner":{"account_id":6609714,"reputation":4086,"user_id":5105305,"accept_rate":58,"display_name":"Kasun Siyambalapitiya"},"score":0,"creation_date":1488905982,"post_id":12585253,"comment_id":72433947,"body_markdown":"@Wuaner you can disable it through  `All Settings` =&gt; `Keyboards` =&gt; `Shortcuts` . By the way &lt;kbd&gt;ctrl&lt;/kbd&gt; &lt;kbd&gt;alt&lt;/kbd&gt;  &lt;kbd&gt;l&lt;/kbd&gt;  is used to format the code in `Intellij`","body":"@Wuaner you can disable it through  <code>All Settings</code> =&gt; <code>Keyboards</code> =&gt; <code>Shortcuts</code> . By the way &lt;kbd&gt;ctrl&lt;/kbd&gt; &lt;kbd&gt;alt&lt;/kbd&gt;  &lt;kbd&gt;l&lt;/kbd&gt;  is used to format the code in <code>Intellij</code>"},{"owner":{"account_id":1924499,"reputation":769,"user_id":1735269,"accept_rate":40,"display_name":"somshivam"},"score":2,"creation_date":1550063036,"post_id":12585253,"comment_id":96131517,"body_markdown":"alt + control + o working in windows + IDEA","body":"alt + control + o working in windows + IDEA"},{"owner":{"account_id":65943,"reputation":3325,"user_id":193744,"display_name":"Sebastian Juarez"},"score":0,"creation_date":1641507869,"post_id":12585253,"comment_id":124829080,"body_markdown":"Mac: option + control + o","body":"Mac: option + control + o"}],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":1,"up_vote_count":119,"is_accepted":true,"score":118,"last_activity_date":1348583835,"creation_date":1348583835,"answer_id":12585304,"question_id":12585253,"body_markdown":"When you commit, tick the `Optimize imports` option on the right.  This will become the default until you change it.\r\n\r\nI prefer using the `Reformat code` option as well.","title":"How to remove unused imports in Intellij IDEA on commit?","body":"<p>When you commit, tick the <code>Optimize imports</code> option on the right.  This will become the default until you change it.</p>\n\n<p>I prefer using the <code>Reformat code</code> option as well.</p>\n"},{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"down_vote_count":1,"up_vote_count":46,"is_accepted":false,"score":45,"last_activity_date":1348585006,"creation_date":1348584056,"answer_id":12585362,"question_id":12585253,"body_markdown":"You can check checkbox in the commit dialog.\r\n\r\n![enter image description here][1]\r\n\r\nYou can use settings to automatically optimize imports since 11.1 and above.\r\n\r\n![enter image description here][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/F3Onx.png\r\n  [2]: http://i.stack.imgur.com/1OsZA.png","title":"How to remove unused imports in Intellij IDEA on commit?","body":"<p>You can check checkbox in the commit dialog.</p>\n\n<p><img src=\"https://i.stack.imgur.com/F3Onx.png\" alt=\"enter image description here\"></p>\n\n<p>You can use settings to automatically optimize imports since 11.1 and above.</p>\n\n<p><img src=\"https://i.stack.imgur.com/1OsZA.png\" alt=\"enter image description here\"></p>\n"},{"tags":[],"owner":{"account_id":410608,"reputation":25367,"user_id":782535,"accept_rate":100,"display_name":"Madan Sapkota"},"down_vote_count":1,"up_vote_count":170,"is_accepted":false,"score":169,"last_activity_date":1505373851,"creation_date":1433388332,"answer_id":30634421,"question_id":12585253,"body_markdown":"If you are using IntelliJ IDEA or Android Studio:\r\n\r\n![Android optimize imports][1]\r\n\r\nGo to **Settings &lt;kbd&gt;&gt;&lt;/kbd&gt; Editor &lt;kbd&gt;&gt;&lt;/kbd&gt; General &lt;kbd&gt;&gt;&lt;/kbd&gt;Auto Import** and check the **Optimize imports on the fly** checkbox.\r\n\r\n  [1]: http://i.stack.imgur.com/0k4Pv.png","title":"How to remove unused imports in Intellij IDEA on commit?","body":"<p>If you are using IntelliJ IDEA or Android Studio:</p>\n\n<p><img src=\"https://i.stack.imgur.com/0k4Pv.png\" alt=\"Android optimize imports\"></p>\n\n<p>Go to <strong>Settings <kbd>></kbd> Editor <kbd>></kbd> General <kbd>></kbd>Auto Import</strong> and check the <strong>Optimize imports on the fly</strong> checkbox.</p>\n"},{"tags":[],"owner":{"account_id":1083817,"reputation":1146,"user_id":1080033,"accept_rate":47,"display_name":"Artur Owczarek"},"down_vote_count":0,"up_vote_count":48,"is_accepted":false,"score":48,"last_activity_date":1456138353,"creation_date":1456138353,"answer_id":35551716,"question_id":12585253,"body_markdown":"**Choose the project/module** you want to remove unused import from in Project view. Then from **Code** menu choose **Optimize imports** and confirm with **Run**. The imports will be cleaned in whole project/module.","title":"How to remove unused imports in Intellij IDEA on commit?","body":"<p><strong>Choose the project/module</strong> you want to remove unused import from in Project view. Then from <strong>Code</strong> menu choose <strong>Optimize imports</strong> and confirm with <strong>Run</strong>. The imports will be cleaned in whole project/module.</p>\n"},{"tags":[],"owner":{"account_id":1902985,"reputation":1042,"user_id":1718442,"display_name":"Jay"},"down_vote_count":1,"up_vote_count":50,"is_accepted":false,"score":49,"last_activity_date":1576059297,"creation_date":1502225419,"answer_id":45577804,"question_id":12585253,"body_markdown":"In Mac IntelliJ IDEA, the command is &lt;kbd&gt;Cmd&lt;/kbd&gt; + &lt;kbd&gt;Option&lt;/kbd&gt; + &lt;kbd&gt;O&lt;/kbd&gt; \r\n\r\nFor some older versions it is apparently &lt;kbd&gt;Ctrl&lt;/kbd&gt; + &lt;kbd&gt;Option&lt;/kbd&gt; + &lt;kbd&gt;O&lt;/kbd&gt;.\r\n\r\n(Letter O not Zero 0) on the latest version 2019.x \r\n","title":"How to remove unused imports in Intellij IDEA on commit?","body":"<p>In Mac IntelliJ IDEA, the command is <kbd>Cmd</kbd> + <kbd>Option</kbd> + <kbd>O</kbd> </p>\n\n<p>For some older versions it is apparently <kbd>Ctrl</kbd> + <kbd>Option</kbd> + <kbd>O</kbd>.</p>\n\n<p>(Letter O not Zero 0) on the latest version 2019.x </p>\n"},{"tags":[],"owner":{"account_id":5055569,"reputation":3946,"user_id":4058910,"accept_rate":23,"display_name":"Shravan Ramamurthy"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1525698054,"creation_date":1505773205,"answer_id":46288978,"question_id":12585253,"body_markdown":"In IntelliJ, select the project you want to optimize imports on, go to **Code** menu and choose **Optimize imports** and a small **Optimize Imports** popup window will appear. On the popup window you need to click on **Run** button. Or alternatively, on IntelliJ on Mac, you can use a keyboard short cut **&lt;kbd&gt;Option&lt;/kbd&gt; + &lt;kbd&gt;Command&lt;/kbd&gt; + &lt;kbd&gt;O&lt;/kbd&gt;**","title":"How to remove unused imports in Intellij IDEA on commit?","body":"<p>In IntelliJ, select the project you want to optimize imports on, go to <strong>Code</strong> menu and choose <strong>Optimize imports</strong> and a small <strong>Optimize Imports</strong> popup window will appear. On the popup window you need to click on <strong>Run</strong> button. Or alternatively, on IntelliJ on Mac, you can use a keyboard short cut <strong><kbd>Option</kbd> + <kbd>Command</kbd> + <kbd>O</kbd></strong></p>\n"},{"tags":[],"owner":{"account_id":2783527,"reputation":1363,"user_id":2395542,"accept_rate":86,"display_name":"Damiii"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1543856524,"creation_date":1543856524,"answer_id":53598420,"question_id":12585253,"body_markdown":"Or you can do the following shortcut :\r\n\r\n**MAC** : Shift + Command + A (Enter Action menu pops up)\r\n\r\nAnd write : `Optimize Imports`","title":"How to remove unused imports in Intellij IDEA on commit?","body":"<p>Or you can do the following shortcut :</p>\n\n<p><strong>MAC</strong> : Shift + Command + A (Enter Action menu pops up)</p>\n\n<p>And write : <code>Optimize Imports</code></p>\n"},{"tags":[],"owner":{"account_id":9618872,"reputation":579,"user_id":7140730,"display_name":"Manimaran Samuthirapandi"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1565617621,"creation_date":1565617621,"answer_id":57462431,"question_id":12585253,"body_markdown":"In mac book\r\n\r\nIntelliJ\r\n\r\nControl + Option + o (not a zero, letter &quot;o&quot;)","title":"How to remove unused imports in Intellij IDEA on commit?","body":"<p>In mac book</p>\n\n<p>IntelliJ</p>\n\n<p>Control + Option + o (not a zero, letter \"o\")</p>\n"},{"tags":[],"owner":{"account_id":4733,"reputation":7158,"user_id":7255,"accept_rate":100,"display_name":"Steve Pitchers"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1568284025,"creation_date":1568284025,"answer_id":57904754,"question_id":12585253,"body_markdown":"`File/Settings/Inpsections/Imports` and change &quot;Unused import&quot; to Error.  This marks them more clearly in the Inspections gutter and the Inspection Results panel.","title":"How to remove unused imports in Intellij IDEA on commit?","body":"<p><code>File/Settings/Inpsections/Imports</code> and change \"Unused import\" to Error.  This marks them more clearly in the Inspections gutter and the Inspection Results panel.</p>\n"},{"tags":[],"owner":{"account_id":8977481,"reputation":1141,"user_id":6693783,"display_name":"Bathri Nathan"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1624964901,"creation_date":1624964901,"answer_id":68177563,"question_id":12585253,"body_markdown":"To remove the unused imports in windows. please use the default key combination below.\r\n\r\n**`CTRL + ALT + O    ---&gt; to remove the unused imports in windows.`**\r\n\r\nHowever, you can also change the keymap of **&quot;Optimize Imports&quot; in settings.**","title":"How to remove unused imports in Intellij IDEA on commit?","body":"<p>To remove the unused imports in windows. please use the default key combination below.</p>\n<p><strong><code>CTRL + ALT + O    ---&gt; to remove the unused imports in windows.</code></strong></p>\n<p>However, you can also change the keymap of <strong>&quot;Optimize Imports&quot; in settings.</strong></p>\n"},{"tags":[],"owner":{"account_id":14346863,"reputation":51,"user_id":10363517,"display_name":"mustafa k&#252;&#231;&#252;k"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1674840604,"creation_date":1674840604,"answer_id":75261461,"question_id":12585253,"body_markdown":"If you want to use &lt;code&gt;CTRL + Alt + L&lt;/code&gt; (remove unused imports while formatting code), you can use &lt;code&gt;CTRL + Alt + Shift + L&lt;/code&gt; (once) and there is a checkbox in the popup you should check\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6vFlm.png","title":"How to remove unused imports in Intellij IDEA on commit?","body":"<p>If you want to use <code>CTRL + Alt + L</code> (remove unused imports while formatting code), you can use <code>CTRL + Alt + Shift + L</code> (once) and there is a checkbox in the popup you should check</p>\n<p><a href=\"https://i.stack.imgur.com/6vFlm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6vFlm.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":5949795,"reputation":305,"user_id":4681045,"display_name":"Josue Abarca"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680088498,"creation_date":1680088498,"answer_id":75876476,"question_id":12585253,"body_markdown":"Now you also have the option to just search for unused imports\r\n\r\n - Code -&gt; Analyze Code -&gt; Run Inspection by Name.\r\n - Unused Import\r\n - Whole Project\r\n\r\nSource: https://stackoverflow.com/questions/6587729/how-to-use-intellij-idea-to-find-all-unused-code \r\n\r\n","title":"How to remove unused imports in Intellij IDEA on commit?","body":"<p>Now you also have the option to just search for unused imports</p>\n<ul>\n<li>Code -&gt; Analyze Code -&gt; Run Inspection by Name.</li>\n<li>Unused Import</li>\n<li>Whole Project</li>\n</ul>\n<p>Source: <a href=\"https://stackoverflow.com/questions/6587729/how-to-use-intellij-idea-to-find-all-unused-code\">How to use IntelliJ IDEA to find all unused code?</a></p>\n"}],"owner":{"account_id":192998,"reputation":22700,"user_id":434460,"accept_rate":99,"display_name":"Leonid"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":239241,"favorite_count":0,"down_vote_count":0,"up_vote_count":198,"accepted_answer_id":12585304,"answer_count":12,"score":198,"last_activity_date":1680088498,"creation_date":1348583670,"question_id":12585253,"body_markdown":"Is there a way to remove unused imports in Intellij IDEA on commit?\r\n\r\nIt is not very optimal to do it manually, &lt;kbd&gt;CTRL&lt;/kbd&gt; + &lt;kbd&gt;ALT&lt;/kbd&gt; + &lt;kbd&gt;O&lt;/kbd&gt; helps but it&#39;s still manual.","title":"How to remove unused imports in Intellij IDEA on commit?","body":"<p>Is there a way to remove unused imports in Intellij IDEA on commit?</p>\n\n<p>It is not very optimal to do it manually, <kbd>CTRL</kbd> + <kbd>ALT</kbd> + <kbd>O</kbd> helps but it's still manual.</p>\n"},{"tags":["java","lombok"],"comments":[{"owner":{"account_id":3071095,"reputation":746,"user_id":2601742,"accept_rate":100,"display_name":"Dan Oak"},"score":1,"creation_date":1515781000,"post_id":47883931,"comment_id":83446123,"body_markdown":"Looks like it&#39;s a known issue (see https://github.com/rzwitserloot/lombok/issues/1347).","body":"Looks like it&#39;s a known issue (see <a href=\"https://github.com/rzwitserloot/lombok/issues/1347\" rel=\"nofollow noreferrer\">github.com/rzwitserloot/lombok/issues/1347</a>)."}],"answers":[{"tags":[],"owner":{"account_id":2067715,"reputation":2001,"user_id":1842905,"display_name":"Michael A. Schaffrath"},"down_vote_count":1,"up_vote_count":79,"is_accepted":true,"score":78,"last_activity_date":1610091069,"creation_date":1513677616,"answer_id":47884368,"question_id":47883931,"body_markdown":"My guess is that it&#39;s not possible (without having delomboked the code). But why don&#39;t you just implement the constructor you need? Lombok is meant to make your life easier, and if something won&#39;t work with Lombok, just do it the old fashioned way.\r\n\r\n    @Data\r\n\t@Builder\r\n\t@AllArgsConstructor\r\n\tpublic class UserInfo { \r\n\t    private int id;\r\n\t    private String nick;\r\n\t    @Builder.Default\r\n\t    private boolean isEmailConfirmed = true;\r\n\t    \r\n\t    public UserInfo(){\r\n\t    \tisEmailConfirmed = true;\r\n\t    }\r\n\t}\r\n\r\nConsole output:  \r\n\r\n    ui: true\r\n    ui2: true\r\n\r\n**Update**  \r\nAs of 01/2021, [this bug seems to be fixed in Lombok][1], at least for generated constructors. Note that there is still [a similar issue][2] when you mix `Builder.Default` and explicit constructors. \r\n\r\n\r\n  [1]: https://github.com/rzwitserloot/lombok/issues/1347\r\n  [2]: https://github.com/rzwitserloot/lombok/issues/2340","title":"Default value in lombok. How to init default with both constructor and builder","body":"<p>My guess is that it's not possible (without having delomboked the code). But why don't you just implement the constructor you need? Lombok is meant to make your life easier, and if something won't work with Lombok, just do it the old fashioned way.</p>\n<pre><code>@Data\n@Builder\n@AllArgsConstructor\npublic class UserInfo { \n    private int id;\n    private String nick;\n    @Builder.Default\n    private boolean isEmailConfirmed = true;\n    \n    public UserInfo(){\n        isEmailConfirmed = true;\n    }\n}\n</code></pre>\n<p>Console output:</p>\n<pre><code>ui: true\nui2: true\n</code></pre>\n<p><strong>Update</strong><br />\nAs of 01/2021, <a href=\"https://github.com/rzwitserloot/lombok/issues/1347\" rel=\"noreferrer\">this bug seems to be fixed in Lombok</a>, at least for generated constructors. Note that there is still <a href=\"https://github.com/rzwitserloot/lombok/issues/2340\" rel=\"noreferrer\">a similar issue</a> when you mix <code>Builder.Default</code> and explicit constructors.</p>\n"},{"tags":[],"owner":{"account_id":1575780,"reputation":10830,"user_id":1462282,"accept_rate":100,"display_name":"Sahil Chhabra"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1519294834,"creation_date":1519294834,"answer_id":48924901,"question_id":47883931,"body_markdown":"Another way is define your own **getter** method **overriding** the **lombok** getter:\r\n\r\n    @Data\r\n    @Builder\r\n    @AllArgsConstructor\r\n    public class UserInfo { \r\n        private int id;\r\n        private String nick;\r\n        private Boolean isEmailConfirmed;\r\n    \r\n        public Boolean getIsEmailConfirmed(){\r\n          return Objects.isNull(isEmailConfirmed) ? true : isEmailConfirmed;\r\n        }\r\n    }","title":"Default value in lombok. How to init default with both constructor and builder","body":"<p>Another way is define your own <strong>getter</strong> method <strong>overriding</strong> the <strong>lombok</strong> getter:</p>\n\n<pre><code>@Data\n@Builder\n@AllArgsConstructor\npublic class UserInfo { \n    private int id;\n    private String nick;\n    private Boolean isEmailConfirmed;\n\n    public Boolean getIsEmailConfirmed(){\n      return Objects.isNull(isEmailConfirmed) ? true : isEmailConfirmed;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2844787,"reputation":5391,"user_id":2443502,"accept_rate":91,"display_name":"Marcin Kłopotek"},"down_vote_count":0,"up_vote_count":55,"is_accepted":false,"score":55,"last_activity_date":1680088256,"creation_date":1526562123,"answer_id":50392165,"question_id":47883931,"body_markdown":"Since the [`@Builder.Default` annotation is broken][1], I wouldn&#39;t use it at all. You can, however, use the following approach by moving the `@Builder` annotation from class level to the custom constructor:\r\n\r\n    @Data\r\n    @NoArgsConstructor\r\n    public class UserInfo {\r\n        \r\n        private int id;\r\n        private String nick;\r\n        private boolean isEmailConfirmed = true;\r\n    \r\n        @Builder\r\n        @SuppressWarnings(&quot;unused&quot;)\r\n        private UserInfo(int id, String nick, Boolean isEmailConfirmed) {\r\n            this.id = id;\r\n            this.nick = nick;\r\n            this.isEmailConfirmed = Optional.ofNullable(isEmailConfirmed).orElse(this.isEmailConfirmed);\r\n        }\r\n    }\r\n\r\nThis way you ensure:\r\n \r\n - the field `isEmailConfirmed` is initialized only in one place making the code less error-prone and easier to maintain later\r\n - the `UserInfo` class will be initialized the same way either you use a builder or a no-args constructor\r\n\r\nIn other words, the condition holds `true`:\r\n\r\n    new UserInfo().equals(UserInfo.builder().build())\r\n\r\nIn that case, the object creation is consistent no matter how you create it. It is especially important when your class is used by a mapping framework or by JPA provider when you are not instantiating it manually by a builder but a no-args constructor is invoked behind your back to create the instance.\r\n\r\nThe approach [described above][2] is very similar but it has a major drawback. You have to initialize the field in two places which makes the code error-prone as you are required to keep the values consistent.\r\n\r\n\r\n  [1]: https://github.com/projectlombok/lombok/issues/2340\r\n  [2]: https://stackoverflow.com/a/47884368/2443502","title":"Default value in lombok. How to init default with both constructor and builder","body":"<p>Since the <a href=\"https://github.com/projectlombok/lombok/issues/2340\" rel=\"noreferrer\"><code>@Builder.Default</code> annotation is broken</a>, I wouldn't use it at all. You can, however, use the following approach by moving the <code>@Builder</code> annotation from class level to the custom constructor:</p>\n<pre><code>@Data\n@NoArgsConstructor\npublic class UserInfo {\n    \n    private int id;\n    private String nick;\n    private boolean isEmailConfirmed = true;\n\n    @Builder\n    @SuppressWarnings(&quot;unused&quot;)\n    private UserInfo(int id, String nick, Boolean isEmailConfirmed) {\n        this.id = id;\n        this.nick = nick;\n        this.isEmailConfirmed = Optional.ofNullable(isEmailConfirmed).orElse(this.isEmailConfirmed);\n    }\n}\n</code></pre>\n<p>This way you ensure:</p>\n<ul>\n<li>the field <code>isEmailConfirmed</code> is initialized only in one place making the code less error-prone and easier to maintain later</li>\n<li>the <code>UserInfo</code> class will be initialized the same way either you use a builder or a no-args constructor</li>\n</ul>\n<p>In other words, the condition holds <code>true</code>:</p>\n<pre><code>new UserInfo().equals(UserInfo.builder().build())\n</code></pre>\n<p>In that case, the object creation is consistent no matter how you create it. It is especially important when your class is used by a mapping framework or by JPA provider when you are not instantiating it manually by a builder but a no-args constructor is invoked behind your back to create the instance.</p>\n<p>The approach <a href=\"https://stackoverflow.com/a/47884368/2443502\">described above</a> is very similar but it has a major drawback. You have to initialize the field in two places which makes the code error-prone as you are required to keep the values consistent.</p>\n"},{"tags":[],"owner":{"account_id":2663609,"reputation":674,"user_id":2302698,"display_name":"laurent"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1558300865,"creation_date":1558300865,"answer_id":56212101,"question_id":47883931,"body_markdown":"Here&#39;s my approach : \r\n```java\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder(toBuilder = true)\r\npublic class UserInfo { \r\n    private int id;\r\n    private String nick;\r\n    private boolean isEmailConfirmed = true;\r\n}\r\n```\r\nAnd then\r\n```java\r\nUserInfo ui = new UserInfo().toBuilder().build();\r\n```\r\n\r\n\r\n","title":"Default value in lombok. How to init default with both constructor and builder","body":"<p>Here's my approach : </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder(toBuilder = true)\npublic class UserInfo { \n    private int id;\n    private String nick;\n    private boolean isEmailConfirmed = true;\n}\n</code></pre>\n\n<p>And then</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>UserInfo ui = new UserInfo().toBuilder().build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":57788,"reputation":46110,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1558436171,"creation_date":1558436171,"answer_id":56236774,"question_id":47883931,"body_markdown":"Custom constructors and `@Builder.Default` probably will never work together.\r\n\r\nFramework authors want to avoid double initializations for `@Builder`.\r\n\r\nI reuse `.builder()` by `public static CLAZZ of(...)` methods:\r\n\r\n    @Builder\r\n    public class Connection {\r\n        private String user;\r\n        private String pass;\r\n    \r\n        @Builder.Default\r\n        private long timeout = 10_000;\r\n    \r\n        @Builder.Default\r\n        private String port = &quot;8080&quot;;\r\n    \r\n        public static Connection of(String user, String pass) {\r\n            return Connection.builder()\r\n                .user(user)\r\n                .pass(pass)\r\n                .build();\r\n        }\r\n    \r\n        public static Connection of(String user, String pass, String port) {\r\n            return Connection.builder()\r\n                .user(user)\r\n                .pass(pass)\r\n                .port(port)\r\n                .build();\r\n        }\r\n    \r\n        public static Connection of(String user, String pass, String port, long timeout) {\r\n            return Connection.builder()\r\n                .user(user)\r\n                .pass(pass)\r\n                .port(port)\r\n                .timeout(timeout)\r\n                .build();\r\n        }\r\n    }\r\n\r\nCheck corresponding discussion: https://github.com/rzwitserloot/lombok/issues/1347","title":"Default value in lombok. How to init default with both constructor and builder","body":"<p>Custom constructors and <code>@Builder.Default</code> probably will never work together.</p>\n\n<p>Framework authors want to avoid double initializations for <code>@Builder</code>.</p>\n\n<p>I reuse <code>.builder()</code> by <code>public static CLAZZ of(...)</code> methods:</p>\n\n<pre><code>@Builder\npublic class Connection {\n    private String user;\n    private String pass;\n\n    @Builder.Default\n    private long timeout = 10_000;\n\n    @Builder.Default\n    private String port = \"8080\";\n\n    public static Connection of(String user, String pass) {\n        return Connection.builder()\n            .user(user)\n            .pass(pass)\n            .build();\n    }\n\n    public static Connection of(String user, String pass, String port) {\n        return Connection.builder()\n            .user(user)\n            .pass(pass)\n            .port(port)\n            .build();\n    }\n\n    public static Connection of(String user, String pass, String port, long timeout) {\n        return Connection.builder()\n            .user(user)\n            .pass(pass)\n            .port(port)\n            .timeout(timeout)\n            .build();\n    }\n}\n</code></pre>\n\n<p>Check corresponding discussion: <a href=\"https://github.com/rzwitserloot/lombok/issues/1347\" rel=\"nofollow noreferrer\">https://github.com/rzwitserloot/lombok/issues/1347</a></p>\n"},{"tags":[],"owner":{"account_id":29802,"reputation":11140,"user_id":80779,"accept_rate":90,"display_name":"LordOfThePigs"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1571047296,"creation_date":1571047296,"answer_id":58374397,"question_id":47883931,"body_markdown":"My experience is that `@Builder` works best when it is the only means of instantiating a class, and therefore works best when paired with `@Value` rather than `@Data`.\r\n\r\nFor classes where all fields are mutable in any order anyway, and for which you want to keep the chained calls, consider replacing it with `@Accessors(chain=true)` or `@Accessors(fluent=true)`.\r\n\r\n```java\r\n@Data\r\n@Accessors(fluent=true)\r\npublic class UserInfo {\r\n    private int id;\r\n    private String nick;\r\n    private boolean isEmailConfirmed = true;\r\n}\r\n```\r\nThis allows you to construct your objects fluently in the code, and avoid un-necessary creation of Builder objects:\r\n```java\r\nUserInfo ui = new UserInfo().id(25).nick(&quot;John&quot;);\r\n```","title":"Default value in lombok. How to init default with both constructor and builder","body":"<p>My experience is that <code>@Builder</code> works best when it is the only means of instantiating a class, and therefore works best when paired with <code>@Value</code> rather than <code>@Data</code>.</p>\n\n<p>For classes where all fields are mutable in any order anyway, and for which you want to keep the chained calls, consider replacing it with <code>@Accessors(chain=true)</code> or <code>@Accessors(fluent=true)</code>.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@Accessors(fluent=true)\npublic class UserInfo {\n    private int id;\n    private String nick;\n    private boolean isEmailConfirmed = true;\n}\n</code></pre>\n\n<p>This allows you to construct your objects fluently in the code, and avoid un-necessary creation of Builder objects:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>UserInfo ui = new UserInfo().id(25).nick(\"John\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3531078,"reputation":2299,"user_id":2950614,"display_name":"ifelse.codes"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1575284300,"creation_date":1575284300,"answer_id":59137488,"question_id":47883931,"body_markdown":"Initialize the properties in the No-Arg `Constructor`\r\n\r\nconverted  \r\n`private boolean isEmailConfirmed = true;`\r\n\r\nto\r\n```\r\npublic class UserInfo {\r\n    \r\n    public UserInfo() {\r\n        this.isEmailConfirmed = true;\r\n    }\r\n\r\n}","title":"Default value in lombok. How to init default with both constructor and builder","body":"<p>Initialize the properties in the No-Arg <code>Constructor</code></p>\n\n<p>converted<br>\n<code>private boolean isEmailConfirmed = true;</code></p>\n\n<p>to</p>\n\n<pre><code>public class UserInfo {\n\n    public UserInfo() {\n        this.isEmailConfirmed = true;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11122647,"reputation":178,"user_id":8165096,"accept_rate":80,"display_name":"Andrey Serebryanskiy"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1579126497,"creation_date":1579126497,"answer_id":59760330,"question_id":47883931,"body_markdown":"In version 1.18.2 both `@NoArgsConstructor` and `@Builder` work, but not completely. \r\n\r\nConstructor with one or more fields will null all other default initialisations: `new UserInfo(&quot;Some nick&quot;)` will cause `isEmailConfirmed` to be false again.\r\n\r\nMy way to handle this is:\r\n\r\n```java\r\npublic UserInfo(String nick) {\r\n  this();\r\n  this.nick = nick;\r\n}\r\n```\r\n\r\nThis way all default fields will be initialised and we&#39;ll get expected constructor.\r\n","title":"Default value in lombok. How to init default with both constructor and builder","body":"<p>In version 1.18.2 both <code>@NoArgsConstructor</code> and <code>@Builder</code> work, but not completely. </p>\n\n<p>Constructor with one or more fields will null all other default initialisations: <code>new UserInfo(\"Some nick\")</code> will cause <code>isEmailConfirmed</code> to be false again.</p>\n\n<p>My way to handle this is:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public UserInfo(String nick) {\n  this();\n  this.nick = nick;\n}\n</code></pre>\n\n<p>This way all default fields will be initialised and we'll get expected constructor.</p>\n"},{"tags":[],"owner":{"account_id":1198141,"reputation":251,"user_id":1169421,"display_name":"George L"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579799428,"creation_date":1579799428,"answer_id":59883859,"question_id":47883931,"body_markdown":"You can create a static Builder class with default values populated:\r\n\r\n```\r\n@Data\r\n@Builder(builderClassName=&quot;Builder&quot;)\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class UserInfo {\r\n    private int id;\r\n    private String nick;\r\n    private boolean isEmailConfirmed;\r\n    public static class Builder{\r\n          //Set defaults here\r\n          private boolean isEmailConfirmed = true;\r\n    }\r\n}\r\n```","title":"Default value in lombok. How to init default with both constructor and builder","body":"<p>You can create a static Builder class with default values populated:</p>\n\n<pre><code>@Data\n@Builder(builderClassName=\"Builder\")\n@NoArgsConstructor\n@AllArgsConstructor\npublic class UserInfo {\n    private int id;\n    private String nick;\n    private boolean isEmailConfirmed;\n    public static class Builder{\n          //Set defaults here\n          private boolean isEmailConfirmed = true;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2056089,"reputation":10271,"user_id":3457177,"accept_rate":78,"display_name":"Vitalii"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":173297,"favorite_count":0,"down_vote_count":0,"up_vote_count":98,"accepted_answer_id":47884368,"answer_count":9,"score":98,"last_activity_date":1680088256,"creation_date":1513676292,"question_id":47883931,"body_markdown":"I have an object\r\n\r\n    @Data\r\n    @Builder\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class UserInfo {\r\n        private int id;\r\n        private String nick;\r\n        private boolean isEmailConfirmed = true;\r\n    }\r\n\r\nAnd I initialize it in two ways\r\n\r\n    UserInfo ui = new UserInfo();\r\n    UserInfo ui2 = UserInfo.builder().build();\r\n\r\n    System.out.println(&quot;ui: &quot; + ui.isEmailConfirmed());\r\n    System.out.println(&quot;ui2: &quot; + ui2.isEmailConfirmed());\r\n\r\n\r\nHere is output\r\n\r\n    ui: true\r\n    ui2: false\r\n\r\nIt seems that builder does not get a default value. I add `@Builder.Default` annotation to my property and my object now looks like this\r\n\r\n\r\n    @Data\r\n    @Builder\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class UserInfo { \r\n        private int id;\r\n        private String nick;\r\n        @Builder.Default\r\n        private boolean isEmailConfirmed = true;\r\n    }\r\n\r\nHere is console output\r\n\r\n    ui: false\r\n    ui2: true\r\n\r\nHow can I make them both be `true`?\r\n\r\n\r\n","title":"Default value in lombok. How to init default with both constructor and builder","body":"<p>I have an object</p>\n\n<pre><code>@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class UserInfo {\n    private int id;\n    private String nick;\n    private boolean isEmailConfirmed = true;\n}\n</code></pre>\n\n<p>And I initialize it in two ways</p>\n\n<pre><code>UserInfo ui = new UserInfo();\nUserInfo ui2 = UserInfo.builder().build();\n\nSystem.out.println(\"ui: \" + ui.isEmailConfirmed());\nSystem.out.println(\"ui2: \" + ui2.isEmailConfirmed());\n</code></pre>\n\n<p>Here is output</p>\n\n<pre><code>ui: true\nui2: false\n</code></pre>\n\n<p>It seems that builder does not get a default value. I add <code>@Builder.Default</code> annotation to my property and my object now looks like this</p>\n\n<pre><code>@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class UserInfo { \n    private int id;\n    private String nick;\n    @Builder.Default\n    private boolean isEmailConfirmed = true;\n}\n</code></pre>\n\n<p>Here is console output</p>\n\n<pre><code>ui: false\nui2: true\n</code></pre>\n\n<p>How can I make them both be <code>true</code>?</p>\n"},{"tags":["java","spring","spring-boot","abstract-class"],"comments":[{"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1461484636,"post_id":36819357,"comment_id":61213192,"body_markdown":"Do you want a ping mapping for every controller that extends BaseController (`admin/ping`, for example)? Or one `/ping` mapping, irrespective of how many BaseController subclasses you create?","body":"Do you want a ping mapping for every controller that extends BaseController (<code>admin&#47;ping</code>, for example)? Or one <code>&#47;ping</code> mapping, irrespective of how many BaseController subclasses you create?"},{"owner":{"account_id":4829637,"reputation":6153,"user_id":3898122,"accept_rate":40,"display_name":"Renat Gatin"},"score":0,"creation_date":1461556337,"post_id":36819357,"comment_id":61234317,"body_markdown":"I want ping method to be in a root of requestMapping like /ping","body":"I want ping method to be in a root of requestMapping like /ping"}],"answers":[{"tags":[],"owner":{"account_id":4431041,"reputation":9073,"user_id":3608192,"display_name":"Stefan Isele - prefabware.com"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1461515107,"creation_date":1461515107,"answer_id":36825816,"question_id":36819357,"body_markdown":"I tlooks like you are using another \r\n\r\n    class ClientController extends BaseController\r\n\r\nBoth ClientController and AdminController map /ping to their inherited method ping(). Spring can map /ping only to the one or the other, thats why you get the exception.\r\n\r\nYou are writing \r\n\r\n&gt; I do not want to duplicate ping() resource in multiple Controllers\r\n\r\nand there is no need to do this. Put your ping() method in its own controller, remove it from the BaseControler and thats it.\r\n\r\nAnyway, I would not recomand to use inheritance in controllers, it makes things mostly more complicated than it helps.\r\n\r\n\r\n\r\n\r\n","title":"How to create common &#39;/ping&#39; API resource in abstract BaseController?","body":"<p>I tlooks like you are using another </p>\n\n<pre><code>class ClientController extends BaseController\n</code></pre>\n\n<p>Both ClientController and AdminController map /ping to their inherited method ping(). Spring can map /ping only to the one or the other, thats why you get the exception.</p>\n\n<p>You are writing </p>\n\n<blockquote>\n  <p>I do not want to duplicate ping() resource in multiple Controllers</p>\n</blockquote>\n\n<p>and there is no need to do this. Put your ping() method in its own controller, remove it from the BaseControler and thats it.</p>\n\n<p>Anyway, I would not recomand to use inheritance in controllers, it makes things mostly more complicated than it helps.</p>\n"}],"owner":{"account_id":4829637,"reputation":6153,"user_id":3898122,"accept_rate":40,"display_name":"Renat Gatin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1897,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680087957,"creation_date":1461472990,"question_id":36819357,"body_markdown":"I have BaseController:\r\n\r\n    @Controller\r\n    public abstract class BaseController {\r\n    \r\n    \t/**\r\n    \t * The Logger for this class hierarchy\r\n    \t */\r\n    \tprotected Logger logger = LoggerFactory.getLogger(this.getClass());\r\n    \t\r\n    \t@RequestMapping(value = &quot;/ping&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\r\n    \tpublic ServiceResponse&lt;?&gt; ping() {\r\n    \t\tServiceResponse&lt;Object&gt; serviceResponse = new ServiceResponse&lt;&gt;(ResponseStatus.SUCCESS);\r\n    \t\treturn serviceResponse;\r\n    \t}\r\n    }\r\n\r\n\r\nAnd few other Controllers that extend this BaseController like this:\r\n\r\n    @RestController\r\n    @RequestMapping(value= &quot;/admin&quot;)\r\n    public class AdminController extends BaseController {\r\n    \t\r\n    \t@RequestMapping(\r\n    \t\t\tvalue = &quot;/all&quot;, \r\n    \t\t\tmethod = RequestMethod.GET,\r\n    \t\t\tproduces = MediaType.APPLICATION_JSON_VALUE)\r\n    \tpublic ServiceResponse&lt;List&lt;Account&gt;&gt; getAll() {\r\n    \t\tServiceResponse&lt;List&lt;Account&gt;&gt; serviceResponse = accountService.getAll();\r\n    \t\treturn serviceResponse;\r\n    \t}\r\n    }\r\n\r\nBut as soon as I moved ping() resource BaseController I get errors on Server startup:\r\n\r\n    2016-04-23 21:31:39.862 ERROR 2335 --- [           main] o.s.boot.SpringApplication               : Application startup failed\r\n    \r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;requestMappingHandlerMapping&#39; defined in class path resource [org/springframework/boot/autoconfigure/web/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Invocation of init method failed; nested exception is java.lang.IllegalStateException: Ambiguous mapping. Cannot map &#39;clientController&#39; method \r\n    public ca.gatin.api.response.ServiceResponse&lt;?&gt; ca.gatin.api.controller.BaseController.ping()\r\n    to {[/admin/ping],produces=[application/json]}: There is already &#39;adminController&#39; bean method\r\n    public ca.gatin.api.response.ServiceResponse&lt;?&gt; ca.gatin.api.controller.BaseController.ping() mapped.\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1578) ~[spring-beans-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:545) ~[spring-beans-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482) ~[spring-beans-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306) ~[spring-beans-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) ~[spring-beans-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302) ~[spring-beans-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) ~[spring-beans-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:772) ~[spring-beans-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:839) ~[spring-context-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:538) ~[spring-context-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:118) ~[spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:766) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.createAndRefreshContext(SpringApplication.java:361) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:307) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1191) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1180) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \tat ca.gatin.TodoAppApplication.main(TodoAppApplication.java:10) [classes/:na]\r\n\r\nIt is just, I do not want to duplicate ping() resource in multiple Controllers. How can I move it to BaseController properly?","title":"How to create common &#39;/ping&#39; API resource in abstract BaseController?","body":"<p>I have BaseController:</p>\n\n<pre><code>@Controller\npublic abstract class BaseController {\n\n    /**\n     * The Logger for this class hierarchy\n     */\n    protected Logger logger = LoggerFactory.getLogger(this.getClass());\n\n    @RequestMapping(value = \"/ping\", produces = MediaType.APPLICATION_JSON_VALUE)\n    public ServiceResponse&lt;?&gt; ping() {\n        ServiceResponse&lt;Object&gt; serviceResponse = new ServiceResponse&lt;&gt;(ResponseStatus.SUCCESS);\n        return serviceResponse;\n    }\n}\n</code></pre>\n\n<p>And few other Controllers that extend this BaseController like this:</p>\n\n<pre><code>@RestController\n@RequestMapping(value= \"/admin\")\npublic class AdminController extends BaseController {\n\n    @RequestMapping(\n            value = \"/all\", \n            method = RequestMethod.GET,\n            produces = MediaType.APPLICATION_JSON_VALUE)\n    public ServiceResponse&lt;List&lt;Account&gt;&gt; getAll() {\n        ServiceResponse&lt;List&lt;Account&gt;&gt; serviceResponse = accountService.getAll();\n        return serviceResponse;\n    }\n}\n</code></pre>\n\n<p>But as soon as I moved ping() resource BaseController I get errors on Server startup:</p>\n\n<pre><code>2016-04-23 21:31:39.862 ERROR 2335 --- [           main] o.s.boot.SpringApplication               : Application startup failed\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'requestMappingHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Invocation of init method failed; nested exception is java.lang.IllegalStateException: Ambiguous mapping. Cannot map 'clientController' method \npublic ca.gatin.api.response.ServiceResponse&lt;?&gt; ca.gatin.api.controller.BaseController.ping()\nto {[/admin/ping],produces=[application/json]}: There is already 'adminController' bean method\npublic ca.gatin.api.response.ServiceResponse&lt;?&gt; ca.gatin.api.controller.BaseController.ping() mapped.\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1578) ~[spring-beans-4.2.5.RELEASE.jar:4.2.5.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:545) ~[spring-beans-4.2.5.RELEASE.jar:4.2.5.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482) ~[spring-beans-4.2.5.RELEASE.jar:4.2.5.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306) ~[spring-beans-4.2.5.RELEASE.jar:4.2.5.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) ~[spring-beans-4.2.5.RELEASE.jar:4.2.5.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302) ~[spring-beans-4.2.5.RELEASE.jar:4.2.5.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) ~[spring-beans-4.2.5.RELEASE.jar:4.2.5.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:772) ~[spring-beans-4.2.5.RELEASE.jar:4.2.5.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:839) ~[spring-context-4.2.5.RELEASE.jar:4.2.5.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:538) ~[spring-context-4.2.5.RELEASE.jar:4.2.5.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:118) ~[spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:766) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    at org.springframework.boot.SpringApplication.createAndRefreshContext(SpringApplication.java:361) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:307) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1191) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1180) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    at ca.gatin.TodoAppApplication.main(TodoAppApplication.java:10) [classes/:na]\n</code></pre>\n\n<p>It is just, I do not want to duplicate ping() resource in multiple Controllers. How can I move it to BaseController properly?</p>\n"},{"tags":["java","spring-webflux","r2dbc-postgresql"],"answers":[{"tags":[],"owner":{"account_id":10907310,"reputation":2214,"user_id":8017666,"display_name":"SRJ"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679351625,"creation_date":1679351625,"answer_id":75795905,"question_id":75794748,"body_markdown":"It is skipped due to no subscribers after reactive chain is completed.\r\n\r\nTry below code snippet.\r\n\r\n```java\r\n    public void articleDestinyBatchStream(List&lt;String&gt; articles) {\r\n        log.info(&quot;connectionFactory {}&quot;, connectionFactory.getMetadata().getName());\r\n\r\n        Mono.from(connectionFactory.create())\r\n                .flatMapMany(connection -&gt; Flux.from(connection.createBatch()\r\n                        .add(&quot;INSERT INTO article_destiny (country_code, art_number, name, price) values (&#39;DE&#39;, &#39;123&#39;, &#39;some name&#39;, &#39;23.23&#39;)&quot;)\r\n                        .add(&quot;INSERT INTO article_destiny (country_code, art_number, name, price) values (&#39;BE&#39;, &#39;456&#39;, &#39;some other name&#39;, &#39;44.44&#39;)&quot;)\r\n                        .add(&quot;INSERT INTO article_destiny (country_code, art_number, name, price) values (&#39;NL&#39;, &#39;789&#39;, &#39;some new name&#39;, &#39;55.55&#39;)&quot;)\r\n                        .execute()))\r\n                .then();\r\n\r\n    }\r\n```\r\n\r\n`then()` statement throws away whatever the return \r\nvalue is and just signals to the calling client when everything is done. ","title":"Postgres r2dbc batch insert problems","body":"<p>It is skipped due to no subscribers after reactive chain is completed.</p>\n<p>Try below code snippet.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public void articleDestinyBatchStream(List&lt;String&gt; articles) {\n        log.info(&quot;connectionFactory {}&quot;, connectionFactory.getMetadata().getName());\n\n        Mono.from(connectionFactory.create())\n                .flatMapMany(connection -&gt; Flux.from(connection.createBatch()\n                        .add(&quot;INSERT INTO article_destiny (country_code, art_number, name, price) values ('DE', '123', 'some name', '23.23')&quot;)\n                        .add(&quot;INSERT INTO article_destiny (country_code, art_number, name, price) values ('BE', '456', 'some other name', '44.44')&quot;)\n                        .add(&quot;INSERT INTO article_destiny (country_code, art_number, name, price) values ('NL', '789', 'some new name', '55.55')&quot;)\n                        .execute()))\n                .then();\n\n    }\n</code></pre>\n<p><code>then()</code> statement throws away whatever the return\nvalue is and just signals to the calling client when everything is done.</p>\n"},{"tags":[],"owner":{"account_id":19328780,"reputation":11,"user_id":14130839,"display_name":"artsgard"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680087913,"creation_date":1679498628,"answer_id":75814191,"question_id":75794748,"body_markdown":"**The solution I found works on a streaming article flux but a single connection:**\r\n\r\nfind next the details \r\n\r\n**first the router:**\r\n\r\n    @Bean\r\n    public RouterFunction&lt;ServerResponse&gt; root(ArticleHandler articleHandler) {\r\n        return RouterFunctions.route()\r\n                .GET(&quot;/article-stream-to-origin&quot;, RequestPredicates.accept(MediaType.valueOf(MediaType.APPLICATION_NDJSON_VALUE)), articleHandler::getArticleStreamToOrigen)\r\n                .GET(&quot;/article-stream-from-origin/{backPressure}&quot;, RequestPredicates.accept(MediaType.valueOf(MediaType.APPLICATION_NDJSON_VALUE)), articleHandler::getArticleStreamFromOrigin)\r\n                .GET(&quot;/article-batch-stream-from-origin/{backPressure}&quot;, RequestPredicates.accept(MediaType.valueOf(MediaType.APPLICATION_NDJSON_VALUE)), articleHandler::getArticleStreamFromOrigin)\r\n                .GET(&quot;/articles&quot;, RequestPredicates.accept(MediaType.APPLICATION_JSON),  articleHandler::getAllArticles)\r\n\r\n**The handler**\r\n\r\n       public Mono&lt;ServerResponse&gt; getAllArticles(ServerRequest request) {\r\n        var all = articleService.getAllArticles(Sort.by(&quot;id&quot;));\r\n        return ok().body(fromPublisher(all, ArticleDestiny.class));\r\n    }\r\n\r\n\r\n        public Mono&lt;ServerResponse&gt; getArticleStreamFromOrigin(ServerRequest request) {\r\n        long backPressure = Long.valueOf(request.pathVariable(&quot;backPressure&quot;));\r\n        Flux&lt;ArticleOrigin&gt; all = streamService.getAllArticleStreamFromOrigin(backPressure);\r\n\r\n        return ok().contentType(MediaType.APPLICATION_NDJSON) //TEXT_EVENT_STREAM APPLICATION_NDJSON\r\n                .body(fromPublisher(all, ArticleOrigin.class));\r\n    }\r\n\r\n\r\n**The client that calls the all-articles service**\r\n\r\n    public  Mono&lt;Void&gt; getArticleBatchStreamToOrigin(Long backPressure) {\r\n\r\n                 Flux&lt;ArticleDestiny&gt; articleFlux = client.get()\r\n                .uri(&quot;/article-batch-stream-from-origin/&quot; + backPressure)\r\n                .accept(MediaType.APPLICATION_NDJSON) //APPLICATION_NDJSON TEXT_EVENT_STREAM\r\n                .retrieve()\r\n                .bodyToFlux(ArticleDestiny.class);\r\n\r\n        streamService.articleDestinyBatchStream(articleFlux, backPressure);\r\n        return Mono.empty();\r\n    }\r\n\r\n\r\n**and finally the service with a single (blocking) connection**\r\n\r\n    public Mono&lt;Void&gt; articleDestinyBatchStream(Flux&lt;ArticleDestiny&gt; articles, Long backPressure) {\r\n        Connection con = Mono.from(Mono.from(connectionFactory.create())).block();\r\n        articles\r\n                .bufferTimeout(backPressure.intValue(), Duration.ofMillis(1000l))\r\n                .publishOn(Schedulers.newParallel(&quot;main&quot;))\r\n                .doOnNext(a -&gt; log.info(&quot;article batch size: &quot; + a.size()))\r\n\r\n                .flatMap(a -&gt; {\r\n                    log.info(&quot;inside &quot; + a.size());\r\n\r\n                        Batch batch = con.createBatch();\r\n\r\n                        a.forEach(article -&gt; {\r\n                            String sql = String.format(&quot;INSERT INTO article_destiny (country_code,art_number, name, price) VALUES (&#39;%s&#39;,&#39;%s&#39;,&#39;%s&#39;,&#39;%s&#39;)&quot;,\r\n                                    article.getCountryCode(),\r\n                                    article.getArtNumber(),\r\n                                    article.getName(),\r\n                                    article.getPrice());\r\n                            batch.add(sql);\r\n                        });\r\n\r\n                        log.debug(&quot;print each batch: &quot; + batch);\r\n\r\n                        return Mono.from(batch.execute()).doFinally((st -&gt; con.close()));\r\n\r\n                }).subscribe();\r\n\r\n        return Mono.empty();\r\n\r\n    }\r\n\r\n**any comments to solve this blocking db connection?**\r\n\r\n\r\n","title":"Postgres r2dbc batch insert problems","body":"<p><strong>The solution I found works on a streaming article flux but a single connection:</strong></p>\n<p>find next the details</p>\n<p><strong>first the router:</strong></p>\n<pre><code>@Bean\npublic RouterFunction&lt;ServerResponse&gt; root(ArticleHandler articleHandler) {\n    return RouterFunctions.route()\n            .GET(&quot;/article-stream-to-origin&quot;, RequestPredicates.accept(MediaType.valueOf(MediaType.APPLICATION_NDJSON_VALUE)), articleHandler::getArticleStreamToOrigen)\n            .GET(&quot;/article-stream-from-origin/{backPressure}&quot;, RequestPredicates.accept(MediaType.valueOf(MediaType.APPLICATION_NDJSON_VALUE)), articleHandler::getArticleStreamFromOrigin)\n            .GET(&quot;/article-batch-stream-from-origin/{backPressure}&quot;, RequestPredicates.accept(MediaType.valueOf(MediaType.APPLICATION_NDJSON_VALUE)), articleHandler::getArticleStreamFromOrigin)\n            .GET(&quot;/articles&quot;, RequestPredicates.accept(MediaType.APPLICATION_JSON),  articleHandler::getAllArticles)\n</code></pre>\n<p><strong>The handler</strong></p>\n<pre><code>   public Mono&lt;ServerResponse&gt; getAllArticles(ServerRequest request) {\n    var all = articleService.getAllArticles(Sort.by(&quot;id&quot;));\n    return ok().body(fromPublisher(all, ArticleDestiny.class));\n}\n\n\n    public Mono&lt;ServerResponse&gt; getArticleStreamFromOrigin(ServerRequest request) {\n    long backPressure = Long.valueOf(request.pathVariable(&quot;backPressure&quot;));\n    Flux&lt;ArticleOrigin&gt; all = streamService.getAllArticleStreamFromOrigin(backPressure);\n\n    return ok().contentType(MediaType.APPLICATION_NDJSON) //TEXT_EVENT_STREAM APPLICATION_NDJSON\n            .body(fromPublisher(all, ArticleOrigin.class));\n}\n</code></pre>\n<p><strong>The client that calls the all-articles service</strong></p>\n<pre><code>public  Mono&lt;Void&gt; getArticleBatchStreamToOrigin(Long backPressure) {\n\n             Flux&lt;ArticleDestiny&gt; articleFlux = client.get()\n            .uri(&quot;/article-batch-stream-from-origin/&quot; + backPressure)\n            .accept(MediaType.APPLICATION_NDJSON) //APPLICATION_NDJSON TEXT_EVENT_STREAM\n            .retrieve()\n            .bodyToFlux(ArticleDestiny.class);\n\n    streamService.articleDestinyBatchStream(articleFlux, backPressure);\n    return Mono.empty();\n}\n</code></pre>\n<p><strong>and finally the service with a single (blocking) connection</strong></p>\n<pre><code>public Mono&lt;Void&gt; articleDestinyBatchStream(Flux&lt;ArticleDestiny&gt; articles, Long backPressure) {\n    Connection con = Mono.from(Mono.from(connectionFactory.create())).block();\n    articles\n            .bufferTimeout(backPressure.intValue(), Duration.ofMillis(1000l))\n            .publishOn(Schedulers.newParallel(&quot;main&quot;))\n            .doOnNext(a -&gt; log.info(&quot;article batch size: &quot; + a.size()))\n\n            .flatMap(a -&gt; {\n                log.info(&quot;inside &quot; + a.size());\n\n                    Batch batch = con.createBatch();\n\n                    a.forEach(article -&gt; {\n                        String sql = String.format(&quot;INSERT INTO article_destiny (country_code,art_number, name, price) VALUES ('%s','%s','%s','%s')&quot;,\n                                article.getCountryCode(),\n                                article.getArtNumber(),\n                                article.getName(),\n                                article.getPrice());\n                        batch.add(sql);\n                    });\n\n                    log.debug(&quot;print each batch: &quot; + batch);\n\n                    return Mono.from(batch.execute()).doFinally((st -&gt; con.close()));\n\n            }).subscribe();\n\n    return Mono.empty();\n\n}\n</code></pre>\n<p><strong>any comments to solve this blocking db connection?</strong></p>\n"}],"owner":{"account_id":19328780,"reputation":11,"user_id":14130839,"display_name":"artsgard"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":490,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1680087913,"creation_date":1679342181,"question_id":75794748,"body_markdown":"**I am trying to batch-persist a Flux-stream of articles into a Postgres r2dbc**\r\n\r\nThe application has two identical article tables (article_origin and article_destiny)\r\nThe origin table has a million article which I try to batch-insert into the empty article_destiny table!\r\nA web-client calls a article-endpoint and requests a single Flux stream. The application works without the batch-insert, but takes more than 20 minutes to persist all the articles one by one.\r\n\r\nThe articles arrive at the articleDestinyBatchStream \r\nand the buffer (with the back-pressure as argument) produces the batch-size chunks.\r\n\r\nBut the **.map(connection -&gt; {** is skipped for some reason I do not understand!\r\n\r\nPlease help\r\n\r\nNext find the relevant code snippets:\r\n\r\n\r\n**The web-client**\r\n\r\n    public void getArticleBatchStreamToOrigin(Long backPressure) {\r\n    try {\r\n        client.get()\r\n                .uri(&quot;/article-batch-stream-from-origin/&quot; + backPressure)\r\n                .accept(MediaType.TEXT_EVENT_STREAM) //APPLICATION_NDJSON TEXT_EVENT_STREAM\r\n                .retrieve()\r\n                .bodyToFlux(ArticleDestiny.class)\r\n                .buffer(backPressure.intValue())\r\n                .subscribe(articles -&gt; {\r\n                    streamService.articleDestinyBatchStream(articles);\r\n                    log.info(&quot;at client article batch size={} &quot;, articles.size());\r\n                });\r\n    } catch (WebClientResponseException wcre) {\r\n        log.error(&quot;Error Response Code is {} and Response Body is {}&quot;, wcre.getRawStatusCode(), wcre.getResponseBodyAsString());\r\n        log.error(&quot;Exception in method getArticleStream()&quot;, wcre);\r\n        throw wcre;\r\n    } catch (Exception ex) {\r\n        log.error(&quot;Exception in method getArticleStream()&quot;, ex);\r\n        throw ex;\r\n    }\r\n}\r\n\r\n**The article streaming service (one million articles) called by the client**\r\n\r\n    public Flux&lt;ArticleOrigin&gt; getAllArticleStreamFromOrigin(Long backPressure) {\r\n    return articleOriginRepository\r\n            .findAll()\r\n            .doOnNext(a -&gt; log.debug(&quot;at stream service article id={}&quot;, a.getId()));\r\n}\r\n\r\n**The article batch persist:**\r\n\r\n      public Mono&lt;Void&gt; articleDestinyBatchStream(List&lt;ArticleDestiny&gt; articles) {\r\n        log.info(&quot;connectionFactory {}&quot;, connectionFactory.getMetadata().getName());\r\n\r\n        return Mono.from(connectionFactory.create())\r\n                .map(connection -&gt; {\r\n                    Batch batch = connection.createBatch();\r\n\r\n                    for (ArticleDestiny article :articles) {\r\n                        batch.add(&quot;INSERT INTO article_destiny (country_code, art_number, name, price) &quot; +\r\n                                &quot;values (&#39;${article.countryCode}&#39;,&#39;${article.artNumber}&#39;, &#39;${article.name}&#39;, &#39;${article.price}&#39;)&quot;);\r\n                    }\r\n\r\n                   return batch.execute();\r\n                }).then();\r\n\r\n    }\r\n\r\n**here find config details**\r\n\r\n    @SpringBootApplication(exclude = { R2dbcDataAutoConfiguration.class, R2dbcAutoConfiguration.class })\r\n\r\n\r\n**and next the config class that extends the AbstractR2dbcConfiguration**\r\n\r\n    @Bean\r\n    public ConnectionFactoryInitializer initialize(ConnectionFactory connectionFactory) {\r\n        var initializer = new ConnectionFactoryInitializer();\r\n        initializer.setConnectionFactory(connectionFactory());\r\n        CompositeDatabasePopulator populator = new CompositeDatabasePopulator();\r\n        populator.addPopulators(\r\n                new ResourceDatabasePopulator(new ClassPathResource(&quot;/db-config/schema.sql&quot;))\r\n        );\r\n        initializer.setDatabasePopulator(populator);\r\n        return initializer;\r\n    }\r\n\r\n    @Override\r\n    @Primary\r\n    @Bean\r\n    public ConnectionFactory connectionFactory() {\r\n\r\n        return new PostgresqlConnectionFactory(PostgresqlConnectionConfiguration.builder()\r\n                .host(&quot;localhost&quot;)\r\n                .port(5677)\r\n                .username(&quot;admin&quot;)\r\n                .password(&quot;secret&quot;)\r\n                .database(&quot;article_flux_db&quot;)\r\n                .build());\r\n    }\r\n\r\n**another attempt to create the batches**\r\n\r\n        public Mono&lt;Void&gt; articleDestinyBatchStream(List&lt;ArticleDestiny&gt; articles) {\r\n\r\n        return Mono.from(connectionFactory.create())\r\n                .flatMap(c -&gt; {\r\n                    Batch batch = c.createBatch();\r\n                    for (ArticleDestiny article :articles) {\r\n                        batch.add(&quot;INSERT INTO article_destiny (country_code, art_number, name, price) &quot; +\r\n                                &quot;values (&#39;${article.countryCode}&#39;,&#39;${article.artNumber}&#39;, &#39;${article.name}&#39;, &#39;${article.price}&#39;)&quot;);\r\n                    }\r\n                    return Mono.empty();\r\n                }).then();\r\n    }","title":"Postgres r2dbc batch insert problems","body":"<p><strong>I am trying to batch-persist a Flux-stream of articles into a Postgres r2dbc</strong></p>\n<p>The application has two identical article tables (article_origin and article_destiny)\nThe origin table has a million article which I try to batch-insert into the empty article_destiny table!\nA web-client calls a article-endpoint and requests a single Flux stream. The application works without the batch-insert, but takes more than 20 minutes to persist all the articles one by one.</p>\n<p>The articles arrive at the articleDestinyBatchStream\nand the buffer (with the back-pressure as argument) produces the batch-size chunks.</p>\n<p>But the <strong>.map(connection -&gt; {</strong> is skipped for some reason I do not understand!</p>\n<p>Please help</p>\n<p>Next find the relevant code snippets:</p>\n<p><strong>The web-client</strong></p>\n<pre><code>public void getArticleBatchStreamToOrigin(Long backPressure) {\ntry {\n    client.get()\n            .uri(&quot;/article-batch-stream-from-origin/&quot; + backPressure)\n            .accept(MediaType.TEXT_EVENT_STREAM) //APPLICATION_NDJSON TEXT_EVENT_STREAM\n            .retrieve()\n            .bodyToFlux(ArticleDestiny.class)\n            .buffer(backPressure.intValue())\n            .subscribe(articles -&gt; {\n                streamService.articleDestinyBatchStream(articles);\n                log.info(&quot;at client article batch size={} &quot;, articles.size());\n            });\n} catch (WebClientResponseException wcre) {\n    log.error(&quot;Error Response Code is {} and Response Body is {}&quot;, wcre.getRawStatusCode(), wcre.getResponseBodyAsString());\n    log.error(&quot;Exception in method getArticleStream()&quot;, wcre);\n    throw wcre;\n} catch (Exception ex) {\n    log.error(&quot;Exception in method getArticleStream()&quot;, ex);\n    throw ex;\n}\n</code></pre>\n<p>}</p>\n<p><strong>The article streaming service (one million articles) called by the client</strong></p>\n<pre><code>public Flux&lt;ArticleOrigin&gt; getAllArticleStreamFromOrigin(Long backPressure) {\nreturn articleOriginRepository\n        .findAll()\n        .doOnNext(a -&gt; log.debug(&quot;at stream service article id={}&quot;, a.getId()));\n</code></pre>\n<p>}</p>\n<p><strong>The article batch persist:</strong></p>\n<pre><code>  public Mono&lt;Void&gt; articleDestinyBatchStream(List&lt;ArticleDestiny&gt; articles) {\n    log.info(&quot;connectionFactory {}&quot;, connectionFactory.getMetadata().getName());\n\n    return Mono.from(connectionFactory.create())\n            .map(connection -&gt; {\n                Batch batch = connection.createBatch();\n\n                for (ArticleDestiny article :articles) {\n                    batch.add(&quot;INSERT INTO article_destiny (country_code, art_number, name, price) &quot; +\n                            &quot;values ('${article.countryCode}','${article.artNumber}', '${article.name}', '${article.price}')&quot;);\n                }\n\n               return batch.execute();\n            }).then();\n\n}\n</code></pre>\n<p><strong>here find config details</strong></p>\n<pre><code>@SpringBootApplication(exclude = { R2dbcDataAutoConfiguration.class, R2dbcAutoConfiguration.class })\n</code></pre>\n<p><strong>and next the config class that extends the AbstractR2dbcConfiguration</strong></p>\n<pre><code>@Bean\npublic ConnectionFactoryInitializer initialize(ConnectionFactory connectionFactory) {\n    var initializer = new ConnectionFactoryInitializer();\n    initializer.setConnectionFactory(connectionFactory());\n    CompositeDatabasePopulator populator = new CompositeDatabasePopulator();\n    populator.addPopulators(\n            new ResourceDatabasePopulator(new ClassPathResource(&quot;/db-config/schema.sql&quot;))\n    );\n    initializer.setDatabasePopulator(populator);\n    return initializer;\n}\n\n@Override\n@Primary\n@Bean\npublic ConnectionFactory connectionFactory() {\n\n    return new PostgresqlConnectionFactory(PostgresqlConnectionConfiguration.builder()\n            .host(&quot;localhost&quot;)\n            .port(5677)\n            .username(&quot;admin&quot;)\n            .password(&quot;secret&quot;)\n            .database(&quot;article_flux_db&quot;)\n            .build());\n}\n</code></pre>\n<p><strong>another attempt to create the batches</strong></p>\n<pre><code>    public Mono&lt;Void&gt; articleDestinyBatchStream(List&lt;ArticleDestiny&gt; articles) {\n\n    return Mono.from(connectionFactory.create())\n            .flatMap(c -&gt; {\n                Batch batch = c.createBatch();\n                for (ArticleDestiny article :articles) {\n                    batch.add(&quot;INSERT INTO article_destiny (country_code, art_number, name, price) &quot; +\n                            &quot;values ('${article.countryCode}','${article.artNumber}', '${article.name}', '${article.price}')&quot;);\n                }\n                return Mono.empty();\n            }).then();\n}\n</code></pre>\n"},{"tags":["java","webassembly"],"answers":[{"tags":[],"owner":{"account_id":3292708,"reputation":2764,"user_id":2770641,"display_name":"sbc100"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1618856728,"creation_date":1618856728,"answer_id":67167422,"question_id":67165416,"body_markdown":"While one could, in theory, write a compiler from JavaScript to WebAssembly, converting JavaScript to WebAssembly is not currently possible or something that WebAssembly was explicitly designed for.   If you want to write code that looks somewhat like JavaScript, but targets WebAssembly, the closest thing today is probably AssemblyScript: https://www.assemblyscript.org/.","title":"How to generate .wasm file or .wast file from java source code?","body":"<p>While one could, in theory, write a compiler from JavaScript to WebAssembly, converting JavaScript to WebAssembly is not currently possible or something that WebAssembly was explicitly designed for.   If you want to write code that looks somewhat like JavaScript, but targets WebAssembly, the closest thing today is probably AssemblyScript: <a href=\"https://www.assemblyscript.org/\" rel=\"nofollow noreferrer\">https://www.assemblyscript.org/</a>.</p>\n"}],"owner":{"account_id":3350267,"reputation":924,"user_id":6051117,"accept_rate":100,"display_name":"Tom"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":256,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1680087745,"creation_date":1618848173,"question_id":67165416,"body_markdown":"How I can generate .wasm file or .wast file for the following code:\r\n\r\n    import java.util.ArrayList;\r\n    public class NewClass2\r\n    {\r\n        public static void main(String[] args)\r\n        {\r\n            ArrayList&lt;String&gt; lis = new ArrayList&lt;&gt;();\r\n            lis.add(&quot;My&quot;);\r\n            lis.add(&quot;Name&quot;);\r\n            System.out.println(lis.get(2));\r\n        }\r\n    }\r\n\r\nCan anyone help me in this regard? I have check TeaVM, CheerpJ, etc, but unable to find to get generate web assembly code.","title":"How to generate .wasm file or .wast file from java source code?","body":"<p>How I can generate .wasm file or .wast file for the following code:</p>\n<pre><code>import java.util.ArrayList;\npublic class NewClass2\n{\n    public static void main(String[] args)\n    {\n        ArrayList&lt;String&gt; lis = new ArrayList&lt;&gt;();\n        lis.add(&quot;My&quot;);\n        lis.add(&quot;Name&quot;);\n        System.out.println(lis.get(2));\n    }\n}\n</code></pre>\n<p>Can anyone help me in this regard? I have check TeaVM, CheerpJ, etc, but unable to find to get generate web assembly code.</p>\n"},{"tags":["java","unit-testing","junit","yaml"],"comments":[{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":0,"creation_date":1680084971,"post_id":75875823,"comment_id":133835993,"body_markdown":"It looks like a unit test since you use mocks? In that case, you don&#39;t want to access the application.yaml at all. You should probably create a constructor setting the value instead of using field injection, so you can create the object in your test with a fixed value.","body":"It looks like a unit test since you use mocks? In that case, you don&#39;t want to access the application.yaml at all. You should probably create a constructor setting the value instead of using field injection, so you can create the object in your test with a fixed value."}],"answers":[{"tags":[],"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680086260,"creation_date":1680086260,"answer_id":75876096,"question_id":75875823,"body_markdown":"You can set the value in the constructor instead of attaching the annotation to the field.\r\n\r\n```\r\n@Service\r\nclass RegistrationService {\r\n private final UserProfileRepository userProfileRepository;\r\n private final String defaultAdminId;\r\n\r\n public RegistrationService(UserProfileRepository userProfileRepository,\r\n                            @Value(&quot;${user-service.defaultAdminId}&quot;) String defaultAdminId) {\r\n  this.userProfileRepository = userProfileRepository;\r\n  this.defaultAdminId = defaultAdminId;\r\n }\r\n}\r\n```\r\n\r\nThen you can choose the admin Id in your test freely without having to access the actual value from the application.yaml.\r\n\r\n```\r\nclass RegistrationServiceTest {\r\n private final static String defaultId = &quot;some-valid-uuid&quot;;\r\n\r\n private UserProfileRepository userProfileRepository;\r\n\r\n private RegistrationService registrationService;\r\n\r\n @BeforeEach\r\n void setup() {\r\n  userProfileRepository = mock(UserProfileRepository.class); // or use @Mock etc\r\n  registrationService = new RegistrationService(userProfileRepository, defaultId);\r\n }\r\n}\r\n```","title":"How can I get value from application.yaml in test environment","body":"<p>You can set the value in the constructor instead of attaching the annotation to the field.</p>\n<pre><code>@Service\nclass RegistrationService {\n private final UserProfileRepository userProfileRepository;\n private final String defaultAdminId;\n\n public RegistrationService(UserProfileRepository userProfileRepository,\n                            @Value(&quot;${user-service.defaultAdminId}&quot;) String defaultAdminId) {\n  this.userProfileRepository = userProfileRepository;\n  this.defaultAdminId = defaultAdminId;\n }\n}\n</code></pre>\n<p>Then you can choose the admin Id in your test freely without having to access the actual value from the application.yaml.</p>\n<pre><code>class RegistrationServiceTest {\n private final static String defaultId = &quot;some-valid-uuid&quot;;\n\n private UserProfileRepository userProfileRepository;\n\n private RegistrationService registrationService;\n\n @BeforeEach\n void setup() {\n  userProfileRepository = mock(UserProfileRepository.class); // or use @Mock etc\n  registrationService = new RegistrationService(userProfileRepository, defaultId);\n }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1680087650,"creation_date":1680087650,"answer_id":75876345,"question_id":75875823,"body_markdown":"Here&#39;s the configuration properties version:\r\n\r\n```\r\n@ConfigurationProperties(prefix=&quot;user-service&quot;)\r\n@Data\r\nclass UserServiceProperties {\r\n private String defaultAdminId;\r\n}\r\n\r\n@Service\r\n@RequiredArgsConstructor \r\nclass RegistrationService {\r\n private final UserServiceProperties properties;\r\n \r\n private UserProfile notClientMapper(UserRegistrationForNotClientDto userRegistrationForNotClientDto) {\r\n  ...\r\n   userProfile.setAdminId(UUID.fromString(properties.getDefaultAdminId()));\r\n  ...\r\n }\r\n}\r\n\r\n@ExtendWith(MockitoExtension.class)\r\nclass RegistrationServiceTest {\r\n private final static String defaultId = &quot;some-valid-uuid&quot;;\r\n\r\n @Mock\r\n private UserServiceProperties properties;\r\n\r\n @InjectMocks\r\n private RegistrationService registrationService;\r\n\r\n @BeforeEach\r\n void setup() {\r\n  when(properties.getDefaultAdminId()).thenReturn(defaultId);\r\n }\r\n}\r\n```","title":"How can I get value from application.yaml in test environment","body":"<p>Here's the configuration properties version:</p>\n<pre><code>@ConfigurationProperties(prefix=&quot;user-service&quot;)\n@Data\nclass UserServiceProperties {\n private String defaultAdminId;\n}\n\n@Service\n@RequiredArgsConstructor \nclass RegistrationService {\n private final UserServiceProperties properties;\n \n private UserProfile notClientMapper(UserRegistrationForNotClientDto userRegistrationForNotClientDto) {\n  ...\n   userProfile.setAdminId(UUID.fromString(properties.getDefaultAdminId()));\n  ...\n }\n}\n\n@ExtendWith(MockitoExtension.class)\nclass RegistrationServiceTest {\n private final static String defaultId = &quot;some-valid-uuid&quot;;\n\n @Mock\n private UserServiceProperties properties;\n\n @InjectMocks\n private RegistrationService registrationService;\n\n @BeforeEach\n void setup() {\n  when(properties.getDefaultAdminId()).thenReturn(defaultId);\n }\n}\n</code></pre>\n"}],"owner":{"account_id":25709391,"reputation":3,"user_id":19468182,"display_name":"Uladzislau Niamira"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75876345,"answer_count":2,"score":0,"last_activity_date":1680087650,"creation_date":1680084541,"question_id":75875823,"body_markdown":"I need to get a value from my application.yaml in production environment like this:\r\n\r\n```\r\n@Value(&quot;${user-service.defaultAdminId}&quot;)\r\n    private final String DEFAULT_ADMIN_ID;\r\n```\r\n\r\nThis value will be set up in userProfile variable in RegistrationService class:\r\n\r\n```\r\nprivate UserProfile notClientMapper(UserRegistrationForNotClientDto userRegistrationForNotClientDto) {\r\n        PassportData passportData = passportDataMapper.toEntityDataFromRegistrationForNotClientDto(\r\n                userRegistrationForNotClientDto);\r\n        Client client = clientMapper.mapTo(\r\n                userRegistrationForNotClientDto, passportData);\r\n        UserProfile userProfile = userProfileMapper.toUserProfileFromRegistrationForNotClientDto(\r\n                userRegistrationForNotClientDto, client);\r\n\r\n        userProfile.setAdminId(UUID.fromString(DEFAULT_ADMIN_ID));\r\n        userProfile.setQrData(qrDataGenerator.generateQRData());\r\n        passwordEncoder(userRegistrationForNotClientDto.getPassword(), userProfile);\r\n        return userProfile;\r\n    }\r\n```\r\n\r\nWell, my issue is when the application run in production environment everything work, but I also need to pass unit test for this block of code like this:\r\n\r\n```\r\n@Test\r\n    @DisplayName(&quot;When correct dto for registration not client then return after success registration for not client dto&quot;)\r\n    public void returnAfterSuccessRegistrationForNotClient() {\r\n        UserRegistrationForNotClientDto newUserNotClientDto\r\n                = DtoCreatorForTest.getUserRegistrationForNotClientDto();\r\n        mockTuneUpsCreateAfterSuccessRegistrationDtoForNotClient(newUserNotClientDto);\r\n\r\n        UserAfterSuccessRegistrationForNotClientDto expected =\r\n                DtoCreatorForTest.getAfterRegistrationNotClientDto(newUserNotClientDto);\r\n        UserAfterSuccessRegistrationForNotClientDto actual =\r\n                registrationService.registrationForNotClient(newUserNotClientDto);\r\n        Mockito.verify(userProfileRepository, Mockito.times(1)).save(any());\r\n        Assertions.assertEquals(expected, actual);\r\n    }\r\n```\r\n\r\n And in test environment a DEFAULT_ADMIN_ID related to the value in applicatin.yaml is&#39;t set up.\r\nSo, not surprisingly I get a NPE. \r\nI&#39;m confused what can I do to fix this problem.  \r\n\r\n\r\nI try to get the value from application.yaml in test environment.\r\nExpecting to get that one.\r\nActually getting NPE.","title":"How can I get value from application.yaml in test environment","body":"<p>I need to get a value from my application.yaml in production environment like this:</p>\n<pre><code>@Value(&quot;${user-service.defaultAdminId}&quot;)\n    private final String DEFAULT_ADMIN_ID;\n</code></pre>\n<p>This value will be set up in userProfile variable in RegistrationService class:</p>\n<pre><code>private UserProfile notClientMapper(UserRegistrationForNotClientDto userRegistrationForNotClientDto) {\n        PassportData passportData = passportDataMapper.toEntityDataFromRegistrationForNotClientDto(\n                userRegistrationForNotClientDto);\n        Client client = clientMapper.mapTo(\n                userRegistrationForNotClientDto, passportData);\n        UserProfile userProfile = userProfileMapper.toUserProfileFromRegistrationForNotClientDto(\n                userRegistrationForNotClientDto, client);\n\n        userProfile.setAdminId(UUID.fromString(DEFAULT_ADMIN_ID));\n        userProfile.setQrData(qrDataGenerator.generateQRData());\n        passwordEncoder(userRegistrationForNotClientDto.getPassword(), userProfile);\n        return userProfile;\n    }\n</code></pre>\n<p>Well, my issue is when the application run in production environment everything work, but I also need to pass unit test for this block of code like this:</p>\n<pre><code>@Test\n    @DisplayName(&quot;When correct dto for registration not client then return after success registration for not client dto&quot;)\n    public void returnAfterSuccessRegistrationForNotClient() {\n        UserRegistrationForNotClientDto newUserNotClientDto\n                = DtoCreatorForTest.getUserRegistrationForNotClientDto();\n        mockTuneUpsCreateAfterSuccessRegistrationDtoForNotClient(newUserNotClientDto);\n\n        UserAfterSuccessRegistrationForNotClientDto expected =\n                DtoCreatorForTest.getAfterRegistrationNotClientDto(newUserNotClientDto);\n        UserAfterSuccessRegistrationForNotClientDto actual =\n                registrationService.registrationForNotClient(newUserNotClientDto);\n        Mockito.verify(userProfileRepository, Mockito.times(1)).save(any());\n        Assertions.assertEquals(expected, actual);\n    }\n</code></pre>\n<p>And in test environment a DEFAULT_ADMIN_ID related to the value in applicatin.yaml is't set up.\nSo, not surprisingly I get a NPE.\nI'm confused what can I do to fix this problem.</p>\n<p>I try to get the value from application.yaml in test environment.\nExpecting to get that one.\nActually getting NPE.</p>\n"},{"tags":["java","sql","jdbc","azure-sql-database"],"comments":[{"owner":{"account_id":26215335,"reputation":2350,"user_id":19893538,"display_name":"Bhavani"},"score":2,"creation_date":1679995424,"post_id":75864362,"comment_id":133816818,"body_markdown":"Once run the same query in SSMS to check getting error or not?","body":"Once run the same query in SSMS to check getting error or not?"},{"owner":{"account_id":26215335,"reputation":2350,"user_id":19893538,"display_name":"Bhavani"},"score":0,"creation_date":1679997351,"post_id":75864362,"comment_id":133817320,"body_markdown":"Instead of fowudatabase.dbo.weather just mention weather and try once.","body":"Instead of fowudatabase.dbo.weather just mention weather and try once."},{"owner":{"account_id":24736871,"reputation":13,"user_id":18624121,"display_name":"Alccro"},"score":0,"creation_date":1680000904,"post_id":75864362,"comment_id":133818240,"body_markdown":"@Bhavani The query runs ok when i just use weather or dbo.weather in  the Azure query editor. But does not work if I do that from the query statement in the method.","body":"@Bhavani The query runs ok when i just use weather or dbo.weather in  the Azure query editor. But does not work if I do that from the query statement in the method."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1680041408,"post_id":75864362,"comment_id":133828824,"body_markdown":"Please create a [mcve]. Your problem doesn&#39;t seem to have anything to do with Kafka. Refactor your SQL code to an external function and test it separately. Also worth pointing out that Kafka Connect JDBC Sink can probably already do what you want.","body":"Please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Your problem doesn&#39;t seem to have anything to do with Kafka. Refactor your SQL code to an external function and test it separately. Also worth pointing out that Kafka Connect JDBC Sink can probably already do what you want."},{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":0,"creation_date":1680041822,"post_id":75864362,"comment_id":133828890,"body_markdown":"Q: It sounds like you might have &quot;connected&quot; to one database ... but you&#39;re querying a *different* database (i.e. making a cross-DB query).  Look here: https://azure.microsoft.com/en-us/blog/querying-remote-databases-in-azure-sql-db/ and here: https://learn.microsoft.com/en-us/azure/azure-sql/database/elastic-query-getting-started-vertical?view=azuresql","body":"Q: It sounds like you might have &quot;connected&quot; to one database ... but you&#39;re querying a <i>different</i> database (i.e. making a cross-DB query).  Look here: <a href=\"https://azure.microsoft.com/en-us/blog/querying-remote-databases-in-azure-sql-db/\" rel=\"nofollow noreferrer\">azure.microsoft.com/en-us/blog/&hellip;</a> and here: <a href=\"https://learn.microsoft.com/en-us/azure/azure-sql/database/elastic-query-getting-started-vertical?view=azuresql\" rel=\"nofollow noreferrer\">learn.microsoft.com/en-us/azure/azure-sql/database/&hellip;</a>"},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1680041899,"post_id":75864362,"comment_id":133828901,"body_markdown":"INSERT into table?  that&#39;s a SQL keyword.  You should never name a table &quot;table&quot;.  Leave off &quot;database.dbo&quot; as well.  Should just be a sensible table name.","body":"INSERT into table?  that&#39;s a SQL keyword.  You should never name a table &quot;table&quot;.  Leave off &quot;database.dbo&quot; as well.  Should just be a sensible table name."},{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":0,"creation_date":1680042044,"post_id":75864362,"comment_id":133828925,"body_markdown":"@duffymo: I suspect the OP probably just substituted example names &quot;database.dbo.table&quot; for his *real* schema.  That&#39;s what I&#39;d do, anyway :)","body":"@duffymo: I suspect the OP probably just substituted example names &quot;database.dbo.table&quot; for his <i>real</i> schema.  That&#39;s what I&#39;d do, anyway :)"},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1680043531,"post_id":75864362,"comment_id":133829144,"body_markdown":"I don&#39;t see how telling me that table is named WEATHER_DATA gives away any secrets.  Silly.","body":"I don&#39;t see how telling me that table is named WEATHER_DATA gives away any secrets.  Silly."},{"owner":{"account_id":24736871,"reputation":13,"user_id":18624121,"display_name":"Alccro"},"score":0,"creation_date":1680072227,"post_id":75864362,"comment_id":133832763,"body_markdown":"@duffymo - I did just replace the real schema name with database.dbo.table.","body":"@duffymo - I did just replace the real schema name with database.dbo.table."},{"owner":{"account_id":24736871,"reputation":13,"user_id":18624121,"display_name":"Alccro"},"score":0,"creation_date":1680072453,"post_id":75864362,"comment_id":133832813,"body_markdown":"@Paulsm4 - thanks for the heads up. I did wonder about this but I&#39;m still not sure it&#39;s the right way to go about it. I&#39;m not really cross-querying as I only have one table. I just want to add data to it from a kafka topic. As you can tell I&#39;m new to all this. I&#39;ll have another look at the links you provided and keep trying.","body":"@Paulsm4 - thanks for the heads up. I did wonder about this but I&#39;m still not sure it&#39;s the right way to go about it. I&#39;m not really cross-querying as I only have one table. I just want to add data to it from a kafka topic. As you can tell I&#39;m new to all this. I&#39;ll have another look at the links you provided and keep trying."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1680090931,"post_id":75864362,"comment_id":133837435,"body_markdown":"You&#39;d find this easier if you decomposed your problem some more.  Write a repository class whose sole responsibility is to deal with the database.  Unit test it until it works perfectly.  Inject an instance into the Kafka component that handles messaging.  It&#39;s called the single responsibility principle.  The code you posted is doing too much.","body":"You&#39;d find this easier if you decomposed your problem some more.  Write a repository class whose sole responsibility is to deal with the database.  Unit test it until it works perfectly.  Inject an instance into the Kafka component that handles messaging.  It&#39;s called the single responsibility principle.  The code you posted is doing too much."}],"answers":[{"tags":[],"owner":{"account_id":24736871,"reputation":13,"user_id":18624121,"display_name":"Alccro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680087643,"creation_date":1680087643,"answer_id":75876343,"question_id":75864362,"body_markdown":"Update:\r\n\r\nIt was a properties error with the datasource. \r\nTurns out \r\n`props.put(&quot;url&quot;,&quot;jdbc:sqlserver://****.database.windows.net:1433;databaseName=****&quot;)`\r\n\r\nis correct, not \r\n\r\n`props.put(&quot;url&quot;, &quot;jdbc:sqlserver://****.database.windows.net:1433);`\r\n \r\n`props.put(&quot;database&quot;, &quot;****&quot;);`","title":"Cannot get an Azure SQL Server query to execute from a small kafka consumer application using vertx and the JDBC connector","body":"<p>Update:</p>\n<p>It was a properties error with the datasource.\nTurns out\n<code>props.put(&quot;url&quot;,&quot;jdbc:sqlserver://****.database.windows.net:1433;databaseName=****&quot;)</code></p>\n<p>is correct, not</p>\n<p><code>props.put(&quot;url&quot;, &quot;jdbc:sqlserver://****.database.windows.net:1433);</code></p>\n<p><code>props.put(&quot;database&quot;, &quot;****&quot;);</code></p>\n"}],"owner":{"account_id":24736871,"reputation":13,"user_id":18624121,"display_name":"Alccro"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680087643,"creation_date":1679994829,"question_id":75864362,"body_markdown":"I am trying to insert data into an azure sql server using a java Kafka consumer application. I have a connection to the database confirmed. \r\n\r\nHere is the method.\r\n\r\n```\r\nprivate void poll(KafkaConsumer&lt;String, JsonObject&gt; consumer) {\r\n    vertx.setPeriodic(TIME_OUT_MS,\r\n        timerId -&gt; consumer.poll(Duration.ofMillis(POLL_MS)).onSuccess(records -&gt; {\r\n          for (int i = 0; i &lt; records.size(); i++) {\r\n            KafkaConsumerRecord&lt;String, JsonObject&gt; record = records.recordAt(i);\r\n            System.out.println(\r\n                &quot;key=&quot; + record.key() + &quot;,value=&quot; + record.value() + &quot;,partition=&quot; +\r\n                    record.partition() + &quot;,timestamp=&quot; + record.timestamp() + &quot;,offset=&quot; + record.offset());\r\n\r\n            Weather weather = toParams(record);\r\n            JsonObject datasourceConfig = PropertiesHelper.getDatasourceProperties();\r\n            JDBCPool pool = JDBCPool.pool(vertx, datasourceConfig);\r\n            String query = &quot;INSERT INTO database.dbo.table (captureTime, waveHeight, wavePeriod, waveDirection, windSpeed, windDirection) values (?, ?, ?, ?, ?, ?)&quot;;\r\n            pool\r\n                .getConnection()\r\n                .onFailure(e -&gt; {\r\n                  System.out.println(&quot;failed to get a connection: &quot; + e.toString());\r\n                })\r\n                .onSuccess(conn -&gt; {\r\n                  conn\r\n                      .preparedQuery(query)\r\n                      .execute(Tuple.of(weather.getCaptureTime(), weather.getWaveHeight(), weather.getWavePeriod(),\r\n                          weather.getWaveDirection(), weather.getWindSpeed(), weather.getWindDirection()))\r\n                      .onFailure(e -&gt; {\r\n                        System.out.println(&quot;failed to execute query: &quot; + e.toString());\r\n                        conn.close();\r\n                      })\r\n                      .onSuccess(rows -&gt; {\r\n                        System.out.println(&quot;successfully added row &quot; + weather.getCaptureTime());\r\n                        conn.close();\r\n                      });\r\n                });\r\n          }\r\n        }).onFailure(cause -&gt; {\r\n          System.out.println(\r\n              &quot;Something went wrong when polling &quot; + cause.toString());\r\n          cause.printStackTrace();\r\n\r\n          vertx.cancelTimer(timerId);\r\n        }));\r\n  }\r\n```\r\n\r\nI think the issue is with the \r\n```\r\nString query = &quot;INSERT INTO {database.dbo.table} (captureTime, waveHeight, wavePeriod, waveDirection, windSpeed, windDirection) values (?, ?, ?, ?, ?, ?)&quot;;\r\n```\r\nquery line, but I&#39;m not sure what to try next.\r\n \r\n\r\nMy issue is that no matter how I word my sql query string I get one of two errors. If I use the full databasename.dbo.tablename in the query I get `&quot;Reference to database and/or server name is not supported in the version of SQL server&quot;`. But if I use any variation of tablename and/or dbo I get an `&quot;invalid object&quot;` error instead.  I think I have tried most variations of the name but so far no success. \r\n\r\nAny help would be gratefully received.","title":"Cannot get an Azure SQL Server query to execute from a small kafka consumer application using vertx and the JDBC connector","body":"<p>I am trying to insert data into an azure sql server using a java Kafka consumer application. I have a connection to the database confirmed.</p>\n<p>Here is the method.</p>\n<pre><code>private void poll(KafkaConsumer&lt;String, JsonObject&gt; consumer) {\n    vertx.setPeriodic(TIME_OUT_MS,\n        timerId -&gt; consumer.poll(Duration.ofMillis(POLL_MS)).onSuccess(records -&gt; {\n          for (int i = 0; i &lt; records.size(); i++) {\n            KafkaConsumerRecord&lt;String, JsonObject&gt; record = records.recordAt(i);\n            System.out.println(\n                &quot;key=&quot; + record.key() + &quot;,value=&quot; + record.value() + &quot;,partition=&quot; +\n                    record.partition() + &quot;,timestamp=&quot; + record.timestamp() + &quot;,offset=&quot; + record.offset());\n\n            Weather weather = toParams(record);\n            JsonObject datasourceConfig = PropertiesHelper.getDatasourceProperties();\n            JDBCPool pool = JDBCPool.pool(vertx, datasourceConfig);\n            String query = &quot;INSERT INTO database.dbo.table (captureTime, waveHeight, wavePeriod, waveDirection, windSpeed, windDirection) values (?, ?, ?, ?, ?, ?)&quot;;\n            pool\n                .getConnection()\n                .onFailure(e -&gt; {\n                  System.out.println(&quot;failed to get a connection: &quot; + e.toString());\n                })\n                .onSuccess(conn -&gt; {\n                  conn\n                      .preparedQuery(query)\n                      .execute(Tuple.of(weather.getCaptureTime(), weather.getWaveHeight(), weather.getWavePeriod(),\n                          weather.getWaveDirection(), weather.getWindSpeed(), weather.getWindDirection()))\n                      .onFailure(e -&gt; {\n                        System.out.println(&quot;failed to execute query: &quot; + e.toString());\n                        conn.close();\n                      })\n                      .onSuccess(rows -&gt; {\n                        System.out.println(&quot;successfully added row &quot; + weather.getCaptureTime());\n                        conn.close();\n                      });\n                });\n          }\n        }).onFailure(cause -&gt; {\n          System.out.println(\n              &quot;Something went wrong when polling &quot; + cause.toString());\n          cause.printStackTrace();\n\n          vertx.cancelTimer(timerId);\n        }));\n  }\n</code></pre>\n<p>I think the issue is with the</p>\n<pre><code>String query = &quot;INSERT INTO {database.dbo.table} (captureTime, waveHeight, wavePeriod, waveDirection, windSpeed, windDirection) values (?, ?, ?, ?, ?, ?)&quot;;\n</code></pre>\n<p>query line, but I'm not sure what to try next.</p>\n<p>My issue is that no matter how I word my sql query string I get one of two errors. If I use the full databasename.dbo.tablename in the query I get <code>&quot;Reference to database and/or server name is not supported in the version of SQL server&quot;</code>. But if I use any variation of tablename and/or dbo I get an <code>&quot;invalid object&quot;</code> error instead.  I think I have tried most variations of the name but so far no success.</p>\n<p>Any help would be gratefully received.</p>\n"},{"tags":["java","android","android-studio","bluetooth"],"comments":[{"owner":{"account_id":16434596,"reputation":862,"user_id":11872490,"display_name":"Kabir"},"score":1,"creation_date":1564900389,"post_id":57344298,"comment_id":101176760,"body_markdown":"Refere this link :https://github.com/tutsplus/Android-BluetoothScannerFinishedProject","body":"Refere this link :<a href=\"https://github.com/tutsplus/Android-BluetoothScannerFinishedProject\" rel=\"nofollow noreferrer\">github.com/tutsplus/Android-BluetoothScannerFinishedProject</a>"},{"owner":{"account_id":14326449,"reputation":67,"user_id":10348428,"display_name":"Abstract123"},"score":0,"creation_date":1564907071,"post_id":57344298,"comment_id":101178015,"body_markdown":"I did come across this link. Could not really understand all of the elements used in this code, for instance DeviceListFragment. Will spend more time on it. Thanks.","body":"I did come across this link. Could not really understand all of the elements used in this code, for instance DeviceListFragment. Will spend more time on it. Thanks."}],"answers":[{"tags":[],"owner":{"account_id":27446708,"reputation":21,"user_id":20940306,"display_name":"Mohib Ul Rehman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680087601,"creation_date":1680087601,"answer_id":75876336,"question_id":57344298,"body_markdown":"You didn&#39;t clear the existing array list and add all whatever you scan again. There is need of check when you scan next time either add only the items in list or clear both lists then add them again.\r\n\r\n\r\nFollowing line needs to be modified.\r\n\r\n        allDevices.addAll(deviceList);       \r\n\r\n\r\njust clear allDevices arraylist before this line will solve your problem.","title":"Update nearby unpaired bluetooth devices list in listview [Android Studio]","body":"<p>You didn't clear the existing array list and add all whatever you scan again. There is need of check when you scan next time either add only the items in list or clear both lists then add them again.</p>\n<p>Following line needs to be modified.</p>\n<pre><code>    allDevices.addAll(deviceList);       \n</code></pre>\n<p>just clear allDevices arraylist before this line will solve your problem.</p>\n"}],"owner":{"account_id":14326449,"reputation":67,"user_id":10348428,"display_name":"Abstract123"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2402,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1680087601,"creation_date":1564899650,"question_id":57344298,"body_markdown":"Note: I am completely new to android studio (java) and this is my very first project. \r\n\r\nI am trying to scan all (paired and unpaired) bluetooth devices and display a list of these devices on application screen. \r\n\r\nI have been successful in getting a list so far but following issues persist:\r\n\r\n1) As new unpaired devices are scanned, earlier scanned devices are repeated in the display list as duplicates. \r\n\r\n2) If I turn off discover-ability in a device, the list is not updated and keeps showing the turned off (no longer available) device in the list.\r\n\r\n**Problem: Bluetooth device list is not updated correctly every time a device becomes available or unavailable.** \r\n\r\nI have tried clearing my array list before it is updated. Doesn&#39;t seem to work. Also, I understand there are a lot of resources on stackoverflow and other websites that cover similar topics of getting nearby bluetooth device list. I have followed multiple of them and written my code but could not come across anything that could solve this &quot;list update&quot; issue. \r\n\r\nI am sharing current code and results. Please suggest edits/additions.\r\n\r\nAppreciate your time and help. \r\n\r\n***Main Activity Class Code***\r\n\r\n```Main Activity Class, android studio\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private static final int REQUEST_ENABLE_BT = 1;                         //Enable bluetooth request variable\r\n    private static final int REQUEST_DISCOVERABILITY = 1 ;                  //Make bluetooth discoverable request variable\r\n\r\n    private BluetoothAdapter btAdapter;                                     //Define bluetooth adapter variable\r\n\r\n    ArrayList&lt;String&gt; deviceList = new ArrayList&lt;&gt;();                       //Store paired devices list\r\n    ArrayList&lt;String&gt; newDevices = new ArrayList&lt;&gt;();                       //Store available devices list\r\n    ArrayList&lt;String&gt; allDevices = new ArrayList&lt;&gt;();                       //Store all devices for display on screen\r\n\r\n    ListView btList;                                                        //Define list UI item\r\n\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {                    //On activity creation do the following\r\n\r\n\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);                             //Pre-written -- to set layout as screen UI\r\n\r\n\r\n        btList = (ListView)findViewById(R.id.list1);                        //Set list variable to UI item in layout\r\n\r\n\r\n        btAdapter = BluetoothAdapter.getDefaultAdapter();                   //Initialize adapter\r\n\r\n\r\n        if(allDevices != null){\r\n\r\n            allDevices.clear();                                             //Clear array to display fresh list\r\n        }\r\n\r\n\r\n\r\n        int MY_PERMISSIONS_REQUEST_ACCESS_COARSE_LOCATION = 1;\r\n        ActivityCompat.requestPermissions(this,\r\n                new String[]{Manifest.permission.ACCESS_COARSE_LOCATION},   //Ask for permission to turn on location\r\n                MY_PERMISSIONS_REQUEST_ACCESS_COARSE_LOCATION);\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    public void btOn(View view){                                           //Bluetooth On event\r\n\r\n        if (btAdapter != null) {\r\n\r\n            if (!btAdapter.isEnabled()) {                                  //Enable bluetooth if not enables already\r\n                Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);\r\n                startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);\r\n            }\r\n            else{                                                          //If already enabled display list of paired devices\r\n\r\n                pairedList();\r\n\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n\r\n        if (requestCode == REQUEST_ENABLE_BT) {\r\n\r\n            if (resultCode == RESULT_OK) {\r\n\r\n                pairedList();                                              //If user has enabled bluetooth, show list of paired devices\r\n\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\n    public void discoverOn(){                                              //Method for setting bluetooth on discoverable mode\r\n                                                                           //for 5 minutes\r\n        Intent discoverableIntent =\r\n                new Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);\r\n        discoverableIntent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, 300);\r\n        startActivityForResult(discoverableIntent, REQUEST_DISCOVERABILITY);\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n    public void scanNewDevices(View view){                                  //Scan for unpaired available bluetooth devices when &quot;scan button&quot; is clicked\r\n\r\n        discoverOn();                                                       //Set bluetooth to discoverable\r\n\r\n        if (btAdapter.isDiscovering()) {\r\n                                                                            //Bluetooth is already in mode discovery mode, we cancel to restart it again\r\n            btAdapter.cancelDiscovery();\r\n        }\r\n        btAdapter.startDiscovery();                                         //Start scanning\r\n\r\n        IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);\r\n\r\n        registerReceiver(receiver, filter);\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n    public void pairedList(){                                                //Method gets list of paired devices\r\n\r\n        Set&lt;BluetoothDevice&gt; pairedDevices = btAdapter.getBondedDevices();\r\n\r\n        if (deviceList != null) {                                            //Clear older list items\r\n            deviceList.clear();\r\n        }\r\n\r\n        if(pairedDevices != null) {\r\n            for (BluetoothDevice bt : pairedDevices) {\r\n\r\n                deviceList.add(bt.getName() + &#39;\\n&#39; + bt.getAddress());      //Add current items\r\n            }\r\n        }\r\n\r\n\r\n        Toast.makeText(getApplicationContext(), &quot;Showing Paired Devices&quot;,Toast.LENGTH_SHORT).show();\r\n\r\n        allDevices.addAll(deviceList);                                      //Update final display list\r\n\r\n        showList();                                                         //Display list on screen\r\n\r\n    }\r\n\r\n\r\n                                                                            //Create a BroadcastReceiver for ACTION_FOUND.\r\n    private final BroadcastReceiver receiver = new BroadcastReceiver() {\r\n        public void onReceive(Context context, Intent intent) {\r\n            String action = intent.getAction();\r\n            if (BluetoothDevice.ACTION_FOUND.equals(action)) {\r\n                                                                            //Discovery has found a device. Get the BluetoothDevice\r\n                                                                            //object and its info from the Intent.\r\n                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);\r\n\r\n\r\n\r\n                if(newDevices != null){\r\n\r\n                    newDevices.clear();                                     //Clear earlier list\r\n\r\n                }\r\n\r\n\r\n                if (device != null ) {\r\n\r\n                    newDevices.add(device.getName() + &#39;\\n&#39; + device.getAddress());\r\n\r\n                    allDevices.addAll(newDevices);                          //Update new devices in final display list\r\n\r\n                    showList();                                             //Display list\r\n                }\r\n\r\n            }\r\n        }\r\n    };\r\n\r\n    @Override\r\n    protected void onDestroy() {                                           //When application is closed,\r\n        super.onDestroy();\r\n                                                                           //Unregister the ACTION_FOUND receiver.\r\n        unregisterReceiver(receiver);\r\n    }\r\n\r\n\r\n\r\n    public void showList(){                                                 //Method to set device list to ListView UI\r\n\r\n        final ArrayAdapter&lt;String&gt; adapter = new  ArrayAdapter&lt;&gt;(this,android.R.layout.simple_list_item_1, allDevices);\r\n\r\n        btList.setAdapter(adapter);\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n```\r\n\r\n\r\n***activity_main.xml code: to get understanding of layout***\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/btbutton&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_marginStart=&quot;96dp&quot;\r\n        android:layout_marginLeft=&quot;96dp&quot;\r\n        android:layout_marginTop=&quot;56dp&quot;\r\n        android:onClick=&quot;btOn&quot;\r\n        android:text=&quot;@string/btbutton&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n\r\n    &lt;ListView\r\n        android:id=&quot;@+id/list1&quot;\r\n        android:layout_width=&quot;305dp&quot;\r\n        android:layout_height=&quot;500dp&quot;\r\n        android:layout_marginStart=&quot;32dp&quot;\r\n        android:layout_marginLeft=&quot;32dp&quot;\r\n        android:layout_marginTop=&quot;204dp&quot;\r\n        android:layout_marginEnd=&quot;32dp&quot;\r\n        android:layout_marginRight=&quot;32dp&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/button2&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_marginStart=&quot;104dp&quot;\r\n        android:layout_marginLeft=&quot;104dp&quot;\r\n        android:layout_marginTop=&quot;124dp&quot;\r\n        android:onClick=&quot;scanNewDevices&quot;\r\n        android:text=&quot;@string/button2&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```\r\n\r\n\r\n\r\n\r\n\r\n***Current Results***\r\n\r\nDuplicate device names and if I turn off any of these devices, they are still displayed in the list.\r\n\r\n\r\n[![Duplicate device names and if I turn off any of these devices, they are still displayed in the list][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gIfeKm.png","title":"Update nearby unpaired bluetooth devices list in listview [Android Studio]","body":"<p>Note: I am completely new to android studio (java) and this is my very first project. </p>\n\n<p>I am trying to scan all (paired and unpaired) bluetooth devices and display a list of these devices on application screen. </p>\n\n<p>I have been successful in getting a list so far but following issues persist:</p>\n\n<p>1) As new unpaired devices are scanned, earlier scanned devices are repeated in the display list as duplicates. </p>\n\n<p>2) If I turn off discover-ability in a device, the list is not updated and keeps showing the turned off (no longer available) device in the list.</p>\n\n<p><strong>Problem: Bluetooth device list is not updated correctly every time a device becomes available or unavailable.</strong> </p>\n\n<p>I have tried clearing my array list before it is updated. Doesn't seem to work. Also, I understand there are a lot of resources on stackoverflow and other websites that cover similar topics of getting nearby bluetooth device list. I have followed multiple of them and written my code but could not come across anything that could solve this \"list update\" issue. </p>\n\n<p>I am sharing current code and results. Please suggest edits/additions.</p>\n\n<p>Appreciate your time and help. </p>\n\n<p><strong><em>Main Activity Class Code</em></strong></p>\n\n<pre><code>\npublic class MainActivity extends AppCompatActivity {\n\n    private static final int REQUEST_ENABLE_BT = 1;                         //Enable bluetooth request variable\n    private static final int REQUEST_DISCOVERABILITY = 1 ;                  //Make bluetooth discoverable request variable\n\n    private BluetoothAdapter btAdapter;                                     //Define bluetooth adapter variable\n\n    ArrayList&lt;String&gt; deviceList = new ArrayList&lt;&gt;();                       //Store paired devices list\n    ArrayList&lt;String&gt; newDevices = new ArrayList&lt;&gt;();                       //Store available devices list\n    ArrayList&lt;String&gt; allDevices = new ArrayList&lt;&gt;();                       //Store all devices for display on screen\n\n    ListView btList;                                                        //Define list UI item\n\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {                    //On activity creation do the following\n\n\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);                             //Pre-written -- to set layout as screen UI\n\n\n        btList = (ListView)findViewById(R.id.list1);                        //Set list variable to UI item in layout\n\n\n        btAdapter = BluetoothAdapter.getDefaultAdapter();                   //Initialize adapter\n\n\n        if(allDevices != null){\n\n            allDevices.clear();                                             //Clear array to display fresh list\n        }\n\n\n\n        int MY_PERMISSIONS_REQUEST_ACCESS_COARSE_LOCATION = 1;\n        ActivityCompat.requestPermissions(this,\n                new String[]{Manifest.permission.ACCESS_COARSE_LOCATION},   //Ask for permission to turn on location\n                MY_PERMISSIONS_REQUEST_ACCESS_COARSE_LOCATION);\n\n\n\n    }\n\n\n\n    public void btOn(View view){                                           //Bluetooth On event\n\n        if (btAdapter != null) {\n\n            if (!btAdapter.isEnabled()) {                                  //Enable bluetooth if not enables already\n                Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);\n                startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);\n            }\n            else{                                                          //If already enabled display list of paired devices\n\n                pairedList();\n\n            }\n        }\n\n    }\n\n\n\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n\n        if (requestCode == REQUEST_ENABLE_BT) {\n\n            if (resultCode == RESULT_OK) {\n\n                pairedList();                                              //If user has enabled bluetooth, show list of paired devices\n\n            }\n\n        }\n    }\n\n\n    public void discoverOn(){                                              //Method for setting bluetooth on discoverable mode\n                                                                           //for 5 minutes\n        Intent discoverableIntent =\n                new Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);\n        discoverableIntent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, 300);\n        startActivityForResult(discoverableIntent, REQUEST_DISCOVERABILITY);\n\n\n    }\n\n\n\n\n    public void scanNewDevices(View view){                                  //Scan for unpaired available bluetooth devices when \"scan button\" is clicked\n\n        discoverOn();                                                       //Set bluetooth to discoverable\n\n        if (btAdapter.isDiscovering()) {\n                                                                            //Bluetooth is already in mode discovery mode, we cancel to restart it again\n            btAdapter.cancelDiscovery();\n        }\n        btAdapter.startDiscovery();                                         //Start scanning\n\n        IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);\n\n        registerReceiver(receiver, filter);\n\n\n    }\n\n\n\n\n\n\n    public void pairedList(){                                                //Method gets list of paired devices\n\n        Set&lt;BluetoothDevice&gt; pairedDevices = btAdapter.getBondedDevices();\n\n        if (deviceList != null) {                                            //Clear older list items\n            deviceList.clear();\n        }\n\n        if(pairedDevices != null) {\n            for (BluetoothDevice bt : pairedDevices) {\n\n                deviceList.add(bt.getName() + '\\n' + bt.getAddress());      //Add current items\n            }\n        }\n\n\n        Toast.makeText(getApplicationContext(), \"Showing Paired Devices\",Toast.LENGTH_SHORT).show();\n\n        allDevices.addAll(deviceList);                                      //Update final display list\n\n        showList();                                                         //Display list on screen\n\n    }\n\n\n                                                                            //Create a BroadcastReceiver for ACTION_FOUND.\n    private final BroadcastReceiver receiver = new BroadcastReceiver() {\n        public void onReceive(Context context, Intent intent) {\n            String action = intent.getAction();\n            if (BluetoothDevice.ACTION_FOUND.equals(action)) {\n                                                                            //Discovery has found a device. Get the BluetoothDevice\n                                                                            //object and its info from the Intent.\n                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);\n\n\n\n                if(newDevices != null){\n\n                    newDevices.clear();                                     //Clear earlier list\n\n                }\n\n\n                if (device != null ) {\n\n                    newDevices.add(device.getName() + '\\n' + device.getAddress());\n\n                    allDevices.addAll(newDevices);                          //Update new devices in final display list\n\n                    showList();                                             //Display list\n                }\n\n            }\n        }\n    };\n\n    @Override\n    protected void onDestroy() {                                           //When application is closed,\n        super.onDestroy();\n                                                                           //Unregister the ACTION_FOUND receiver.\n        unregisterReceiver(receiver);\n    }\n\n\n\n    public void showList(){                                                 //Method to set device list to ListView UI\n\n        final ArrayAdapter&lt;String&gt; adapter = new  ArrayAdapter&lt;&gt;(this,android.R.layout.simple_list_item_1, allDevices);\n\n        btList.setAdapter(adapter);\n\n    }\n\n}\n\n\n</code></pre>\n\n<p><strong><em>activity_main.xml code: to get understanding of layout</em></strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\"&gt;\n\n    &lt;Button\n        android:id=\"@+id/btbutton\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginStart=\"96dp\"\n        android:layout_marginLeft=\"96dp\"\n        android:layout_marginTop=\"56dp\"\n        android:onClick=\"btOn\"\n        android:text=\"@string/btbutton\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n    &lt;ListView\n        android:id=\"@+id/list1\"\n        android:layout_width=\"305dp\"\n        android:layout_height=\"500dp\"\n        android:layout_marginStart=\"32dp\"\n        android:layout_marginLeft=\"32dp\"\n        android:layout_marginTop=\"204dp\"\n        android:layout_marginEnd=\"32dp\"\n        android:layout_marginRight=\"32dp\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n    &lt;Button\n        android:id=\"@+id/button2\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginStart=\"104dp\"\n        android:layout_marginLeft=\"104dp\"\n        android:layout_marginTop=\"124dp\"\n        android:onClick=\"scanNewDevices\"\n        android:text=\"@string/button2\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n\n<p><strong><em>Current Results</em></strong></p>\n\n<p>Duplicate device names and if I turn off any of these devices, they are still displayed in the list.</p>\n\n<p><a href=\"https://i.stack.imgur.com/gIfeKm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gIfeKm.png\" alt=\"Duplicate device names and if I turn off any of these devices, they are still displayed in the list\"></a></p>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1679000162,"post_id":75761548,"comment_id":133647032,"body_markdown":"That would be a terrible program structure since it is confusing data with code structure. Instead, there should be a Play class with a name and a type and a collection of Play objects, such as an array, List, Map, or other. The JSON equivalent would be a JSONArray, not a single JSONObject","body":"That would be a terrible program structure since it is confusing data with code structure. Instead, there should be a Play class with a name and a type and a collection of Play objects, such as an array, List, Map, or other. The JSON equivalent would be a JSONArray, not a single JSONObject"},{"owner":{"account_id":20174412,"reputation":43,"user_id":14796445,"display_name":"Naky"},"score":0,"creation_date":1679000736,"post_id":75761548,"comment_id":133647157,"body_markdown":"@HovercraftFullOfEels I agree, but I can&#39;t change the json file, only the java code. In this case, the Plays class respects the json structure and it parses correctly. The big problem is when I have to take the attribute&#39;s name because i can&#39;t have a &#39;name&#39; attribute in the first place, as it would mess up the parsing. If it&#39;s impossible to do, I accept alternative ways of writing the Plays code, but without messing the parsing I don&#39;t think it can be made. That&#39;s why I didn&#39;t include the parsing code, but if needed i can do it.","body":"@HovercraftFullOfEels I agree, but I can&#39;t change the json file, only the java code. In this case, the Plays class respects the json structure and it parses correctly. The big problem is when I have to take the attribute&#39;s name because i can&#39;t have a &#39;name&#39; attribute in the first place, as it would mess up the parsing. If it&#39;s impossible to do, I accept alternative ways of writing the Plays code, but without messing the parsing I don&#39;t think it can be made. That&#39;s why I didn&#39;t include the parsing code, but if needed i can do it."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1679001261,"post_id":75761548,"comment_id":133647274,"body_markdown":"Which JSON parser are you using?","body":"Which JSON parser are you using?"},{"owner":{"account_id":20174412,"reputation":43,"user_id":14796445,"display_name":"Naky"},"score":0,"creation_date":1679001507,"post_id":75761548,"comment_id":133647322,"body_markdown":"@markspace I&#39;m using Jackson. When using readValue method, the parsers reads my json file and assigns each element to the respective java element, following the json file structure. If the structures are not the same, errors pop in.","body":"@markspace I&#39;m using Jackson. When using readValue method, the parsers reads my json file and assigns each element to the respective java element, following the json file structure. If the structures are not the same, errors pop in."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1679001977,"post_id":75761548,"comment_id":133647419,"body_markdown":"I&#39;m still not sure of the question, it looks like your code will work.  Alternately, you cause use the `readTree(input)` method of object mapper to read an arbitrary tree and verify the strings yourself.","body":"I&#39;m still not sure of the question, it looks like your code will work.  Alternately, you cause use the <code>readTree(input)</code> method of object mapper to read an arbitrary tree and verify the strings yourself."}],"answers":[{"tags":[],"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1679022059,"creation_date":1679001975,"answer_id":75761783,"question_id":75761548,"body_markdown":"Unless you really do want a different implementation for each named play, rather than a simple POJO which holds name and type, do it like this:\r\n```\r\nimport com.fasterxml.jackson.core.type.TypeReference;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\n\r\nimport java.io.IOException;\r\nimport java.util.Map;\r\n\r\npublic class Test2 {\r\n    public static void main(String[] args) throws IOException {\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        String json = &quot;{\\n&quot; +\r\n                &quot;    \\&quot;hamlet\\&quot;: {\\n&quot; +\r\n                &quot;         \\&quot;name\\&quot;: \\&quot;Hamlet\\&quot;,\\n&quot; +\r\n                &quot;         \\&quot;type\\&quot;: \\&quot;tragedy\\&quot;\\n&quot; +\r\n                &quot;     },\\n&quot; +\r\n                &quot;     \\&quot;aslike\\&quot;: {\\n&quot; +\r\n                &quot;         \\&quot;name\\&quot;: \\&quot;As You Like It\\&quot;,\\n&quot; +\r\n                &quot;         \\&quot;type\\&quot;: \\&quot;comedy\\&quot;\\n&quot; +\r\n                &quot;     },\\n&quot; +\r\n                &quot;     \\&quot;othello\\&quot;: {\\n&quot; +\r\n                &quot;         \\&quot;name\\&quot;: \\&quot;Othello\\&quot;,\\n&quot; +\r\n                &quot;         \\&quot;type\\&quot;: \\&quot;tragedy\\&quot;\\n&quot; +\r\n                &quot;     }\\n&quot; +\r\n                &quot;}&quot;;\r\n        Map&lt;String,Play&gt; plays = mapper.createParser(json)\r\n            .readValueAs(new TypeReference&lt;Map&lt;String,Play&gt;&gt;() {});\r\n    }\r\n}\r\n\r\nclass Play {\r\n    public String name;\r\n    public String type;\r\n}\r\n```\r\nWe have told `ObjectMapper` that we want the data as a `Map&lt;String,Play&gt;`, so it will use the attribute names in the top level JSON object (i.e.&quot;hamlet&quot;, &quot;aslike&quot; and so on) as keys in the `Map`, and use the structure of the `Play` class to parse the values of those attributes.\r\n\r\nOnce you have that data structure you can iterate over the `Map` entries to verify that the key of the entry matches the `name` field of the value.\r\n\r\nHow you&#39;ll verify that &quot;aslike&quot; matches &quot;As You Like It&quot;, I don&#39;t know.\r\n\r\n","title":"Can I compare a random value with the name of an class&#39; attribute?","body":"<p>Unless you really do want a different implementation for each named play, rather than a simple POJO which holds name and type, do it like this:</p>\n<pre><code>import com.fasterxml.jackson.core.type.TypeReference;\nimport com.fasterxml.jackson.databind.ObjectMapper;\n\nimport java.io.IOException;\nimport java.util.Map;\n\npublic class Test2 {\n    public static void main(String[] args) throws IOException {\n        ObjectMapper mapper = new ObjectMapper();\n        String json = &quot;{\\n&quot; +\n                &quot;    \\&quot;hamlet\\&quot;: {\\n&quot; +\n                &quot;         \\&quot;name\\&quot;: \\&quot;Hamlet\\&quot;,\\n&quot; +\n                &quot;         \\&quot;type\\&quot;: \\&quot;tragedy\\&quot;\\n&quot; +\n                &quot;     },\\n&quot; +\n                &quot;     \\&quot;aslike\\&quot;: {\\n&quot; +\n                &quot;         \\&quot;name\\&quot;: \\&quot;As You Like It\\&quot;,\\n&quot; +\n                &quot;         \\&quot;type\\&quot;: \\&quot;comedy\\&quot;\\n&quot; +\n                &quot;     },\\n&quot; +\n                &quot;     \\&quot;othello\\&quot;: {\\n&quot; +\n                &quot;         \\&quot;name\\&quot;: \\&quot;Othello\\&quot;,\\n&quot; +\n                &quot;         \\&quot;type\\&quot;: \\&quot;tragedy\\&quot;\\n&quot; +\n                &quot;     }\\n&quot; +\n                &quot;}&quot;;\n        Map&lt;String,Play&gt; plays = mapper.createParser(json)\n            .readValueAs(new TypeReference&lt;Map&lt;String,Play&gt;&gt;() {});\n    }\n}\n\nclass Play {\n    public String name;\n    public String type;\n}\n</code></pre>\n<p>We have told <code>ObjectMapper</code> that we want the data as a <code>Map&lt;String,Play&gt;</code>, so it will use the attribute names in the top level JSON object (i.e.&quot;hamlet&quot;, &quot;aslike&quot; and so on) as keys in the <code>Map</code>, and use the structure of the <code>Play</code> class to parse the values of those attributes.</p>\n<p>Once you have that data structure you can iterate over the <code>Map</code> entries to verify that the key of the entry matches the <code>name</code> field of the value.</p>\n<p>How you'll verify that &quot;aslike&quot; matches &quot;As You Like It&quot;, I don't know.</p>\n"},{"tags":[],"owner":{"account_id":20174412,"reputation":43,"user_id":14796445,"display_name":"Naky"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1680087526,"creation_date":1680087526,"answer_id":75876319,"question_id":75761548,"body_markdown":"Ok, didn&#39;t really find a solution to my &quot;comparing name with an attibute&#39;s name&quot; problem, but i found a workaround. Thanks to @tgdavies for the cue, even if unintentional.\r\n\r\nMy solution was using nested HashMaps in a form like this:\r\n\r\n    HashMap&lt;Object, HashMap&lt;String, String&gt;&gt;\r\n\r\nto parse the json code. This way it doesn&#39;t mess the parsing itself and I&#39;m also assigning each object to his properties expressed as strings, which allows me to access them easily and correctly.","title":"Can I compare a random value with the name of an class&#39; attribute?","body":"<p>Ok, didn't really find a solution to my &quot;comparing name with an attibute's name&quot; problem, but i found a workaround. Thanks to @tgdavies for the cue, even if unintentional.</p>\n<p>My solution was using nested HashMaps in a form like this:</p>\n<pre><code>HashMap&lt;Object, HashMap&lt;String, String&gt;&gt;\n</code></pre>\n<p>to parse the json code. This way it doesn't mess the parsing itself and I'm also assigning each object to his properties expressed as strings, which allows me to access them easily and correctly.</p>\n"}],"owner":{"account_id":20174412,"reputation":43,"user_id":14796445,"display_name":"Naky"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75876319,"answer_count":2,"score":1,"last_activity_date":1680087526,"creation_date":1679000054,"question_id":75761548,"body_markdown":"I have a chunk of code like this:\r\n\r\n    public class Plays {\r\n\t    private Hamlet hamlet;\r\n\t    private AsLike aslike;\r\n\t    private Othello othello;\r\n\t\r\n\t    public Plays() {\r\n\t\t\r\n        }\r\n\r\n        //getters &amp; setters\r\n\t}\r\nI know it would be better to do a class &quot;Play.java&quot; instead of &quot;Plays.java&quot;, and then store the different instances into a list, but I have to parse a json file and the json is written as nested objects:\r\n\r\n    {\r\n        &quot;hamlet&quot;: {\r\n    \t     &quot;name&quot;: &quot;Hamlet&quot;,\r\n    \t     &quot;type&quot;: &quot;tragedy&quot;\r\n         },\r\n         &quot;aslike&quot;: {\r\n    \t     &quot;name&quot;: &quot;As You Like It&quot;,\r\n    \t     &quot;type&quot;: &quot;comedy&quot;\r\n   \t     },\r\n         &quot;othello&quot;: {\r\n    \t     &quot;name&quot;: &quot;Othello&quot;,\r\n    \t     &quot;type&quot;: &quot;tragedy&quot;\r\n         }\r\n    }\r\nFirst rule: this json file cannot be modified, as bad as it looks. The issue is that my json parser of course wouldn&#39;t parse correctly if the java structure was different than the json one, so I don&#39;t see how could I change that. But that&#39;s not the real problem.\r\n\r\nThe problem now is I have to compare a String value to the name itself of an attribute (hamlet, aslike or othello) of the Plays class. For example, I want the program to verify if the word &quot;hamlet&quot; is the same as the attribute&#39;s name (hamlet) of the Plays class. Is it even possible? I know the problem lies in the code structure, but as I said I don&#39;t really know how to change that without messing up the parsing (as long as I know, a json object must correspond to an object in java, a json list a list in java etc...).","title":"Can I compare a random value with the name of an class&#39; attribute?","body":"<p>I have a chunk of code like this:</p>\n<pre><code>public class Plays {\n    private Hamlet hamlet;\n    private AsLike aslike;\n    private Othello othello;\n\n    public Plays() {\n    \n    }\n\n    //getters &amp; setters\n}\n</code></pre>\n<p>I know it would be better to do a class &quot;Play.java&quot; instead of &quot;Plays.java&quot;, and then store the different instances into a list, but I have to parse a json file and the json is written as nested objects:</p>\n<pre><code>{\n    &quot;hamlet&quot;: {\n         &quot;name&quot;: &quot;Hamlet&quot;,\n         &quot;type&quot;: &quot;tragedy&quot;\n     },\n     &quot;aslike&quot;: {\n         &quot;name&quot;: &quot;As You Like It&quot;,\n         &quot;type&quot;: &quot;comedy&quot;\n     },\n     &quot;othello&quot;: {\n         &quot;name&quot;: &quot;Othello&quot;,\n         &quot;type&quot;: &quot;tragedy&quot;\n     }\n}\n</code></pre>\n<p>First rule: this json file cannot be modified, as bad as it looks. The issue is that my json parser of course wouldn't parse correctly if the java structure was different than the json one, so I don't see how could I change that. But that's not the real problem.</p>\n<p>The problem now is I have to compare a String value to the name itself of an attribute (hamlet, aslike or othello) of the Plays class. For example, I want the program to verify if the word &quot;hamlet&quot; is the same as the attribute's name (hamlet) of the Plays class. Is it even possible? I know the problem lies in the code structure, but as I said I don't really know how to change that without messing up the parsing (as long as I know, a json object must correspond to an object in java, a json list a list in java etc...).</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":195331,"reputation":275398,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":6,"creation_date":1413060578,"post_id":26319130,"comment_id":41303594,"body_markdown":"It doesn&#39;t _just_ implements `Collection`.","body":"It doesn&#39;t <i>just</i> implements <code>Collection</code>."},{"owner":{"account_id":2264130,"reputation":38897,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"score":0,"creation_date":1413060628,"post_id":26319130,"comment_id":41303607,"body_markdown":"AbstractCollection is a hell of a less noisy to read at a glance.","body":"AbstractCollection is a hell of a less noisy to read at a glance."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1413060661,"post_id":26319130,"comment_id":41303619,"body_markdown":"Typically, abstract implementations define some of the common functionality which likely going to be used by most if not all other implementations, it&#39;s there to make your life easier, but you don&#39;t need to use it","body":"Typically, abstract implementations define some of the common functionality which likely going to be used by most if not all other implementations, it&#39;s there to make your life easier, but you don&#39;t need to use it"},{"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"score":12,"creation_date":1413060721,"post_id":26319130,"comment_id":41303640,"body_markdown":"Line 1 of [the documentation](http://docs.oracle.com/javase/8/docs/api/java/util/AbstractCollection.html) answers your question: &quot;This class provides a skeletal implementation of the Collection interface, to minimize the effort required to implement this interface.&quot;","body":"Line 1 of <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/AbstractCollection.html\" rel=\"nofollow noreferrer\">the documentation</a> answers your question: &quot;This class provides a skeletal implementation of the Collection interface, to minimize the effort required to implement this interface.&quot;"},{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":2,"creation_date":1413061591,"post_id":26319130,"comment_id":41303888,"body_markdown":"@Boann And what that implies is that some collection implementations will NOT be using `AbstractCollection` because they will provide their own implementation of all the methods defined in the `Collection` interface. For example, Guava&#39;s `ForwardingList`","body":"@Boann And what that implies is that some collection implementations will NOT be using <code>AbstractCollection</code> because they will provide their own implementation of all the methods defined in the <code>Collection</code> interface. For example, Guava&#39;s <code>ForwardingList</code>"},{"owner":{"account_id":544207,"reputation":699,"user_id":913582,"accept_rate":72,"display_name":"Navdeep Singh"},"score":0,"creation_date":1504015801,"post_id":26319130,"comment_id":78840802,"body_markdown":"Abstract Classes show us the path to how to implement the interfaces.","body":"Abstract Classes show us the path to how to implement the interfaces."}],"answers":[{"tags":[],"owner":{"account_id":1748947,"reputation":1890,"user_id":1598508,"accept_rate":100,"display_name":"Krzysztof Jabłoński"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1413062113,"creation_date":1413062113,"answer_id":26319335,"question_id":26319130,"body_markdown":"Code is best documentation out there :-) Source can be checked in JDK, and for example in [code-grep pages](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/AbstractCollection.java).\r\n\r\nAnd there you one can see, that `AbstractCollection` class (at least in java 6b-14) offers straight-forward implementations of `isEmpty()`, `contains()`,  `toArray()`, `toArray(T[] a)`, `remove(Object o)`, `containsAll(Collection&lt;?&gt; c)` `addAll(Collection&lt;? extends E&gt; c)`, `removeAll(Collection&lt;?&gt; c)`, `retainAll(Collection&lt;?&gt; c)`, `clear()` and `toString()`.\r\n\r\nMentioned methods depend on implementations of `add(E e)`, `iterator()` and (optionally) `remove(Object o)`.","title":"What is the purpose of AbstractCollection","body":"<p>Code is best documentation out there :-) Source can be checked in JDK, and for example in <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/AbstractCollection.java\" rel=\"nofollow\">code-grep pages</a>.</p>\n\n<p>And there you one can see, that <code>AbstractCollection</code> class (at least in java 6b-14) offers straight-forward implementations of <code>isEmpty()</code>, <code>contains()</code>,  <code>toArray()</code>, <code>toArray(T[] a)</code>, <code>remove(Object o)</code>, <code>containsAll(Collection&lt;?&gt; c)</code> <code>addAll(Collection&lt;? extends E&gt; c)</code>, <code>removeAll(Collection&lt;?&gt; c)</code>, <code>retainAll(Collection&lt;?&gt; c)</code>, <code>clear()</code> and <code>toString()</code>.</p>\n\n<p>Mentioned methods depend on implementations of <code>add(E e)</code>, <code>iterator()</code> and (optionally) <code>remove(Object o)</code>.</p>\n"},{"tags":[],"owner":{"account_id":12018604,"reputation":160,"user_id":8792873,"display_name":"Angelixus"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1575777810,"creation_date":1571790151,"answer_id":58513874,"question_id":26319130,"body_markdown":"Maybe it is a little late to answer but just in case I want to answer this question.\r\n\r\n1. `AbstractCollection` is used since all the child collections share some functionalities in common as Krzysztof said and, since this functionality is common (exactly the same lines of code) we can use inheritance to rehuse that code and make the design cleaner, easier to understand and more maintainable.\r\n\r\n2. We use the interface since an interface defines the &quot;contract&quot; that every class implementing the interface must provide, i.e the methods that the subclasses must have. This question is similar to, why can&#39;t we use `ArrayList` instead of List, you can do that, but 90% of the times you will be interested on adding/setting, deleting and knowing the size of an `ArrayList` and the `List` interface assures you that anything that is written after a new somewhere will implement this methods (and others) so you can call them and polymorphism will do the work. Also, using the interface as a reference allows you to change the type of the concrete implementation without changing anything (only the new calls) and also allows you to change the specific type at runtime, using the specific class reference you are constraining yourself to that reference and only that.","title":"What is the purpose of AbstractCollection","body":"<p>Maybe it is a little late to answer but just in case I want to answer this question.</p>\n\n<ol>\n<li><p><code>AbstractCollection</code> is used since all the child collections share some functionalities in common as Krzysztof said and, since this functionality is common (exactly the same lines of code) we can use inheritance to rehuse that code and make the design cleaner, easier to understand and more maintainable.</p></li>\n<li><p>We use the interface since an interface defines the \"contract\" that every class implementing the interface must provide, i.e the methods that the subclasses must have. This question is similar to, why can't we use <code>ArrayList</code> instead of List, you can do that, but 90% of the times you will be interested on adding/setting, deleting and knowing the size of an <code>ArrayList</code> and the <code>List</code> interface assures you that anything that is written after a new somewhere will implement this methods (and others) so you can call them and polymorphism will do the work. Also, using the interface as a reference allows you to change the type of the concrete implementation without changing anything (only the new calls) and also allows you to change the specific type at runtime, using the specific class reference you are constraining yourself to that reference and only that.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1575778113,"creation_date":1575778113,"answer_id":59232360,"question_id":26319130,"body_markdown":"Adding to what @Angelixus says in https://stackoverflow.com/a/58513874/139985:\r\n\r\nOne reason to NOT do this:\r\n\r\n    AbstractCollection col = (AbstractCollection) someCollection;\r\n\r\nis that subtypes of `Collection` are NOT guaranteed to extend the `AbstractCollection` base class.  \r\n\r\nIt is certainly the case that most (if not all) of the standard collection types do extend this base class.  However, this may not apply to all 3rd-party collection classes.  If you encounter a collection class that is implemented without extending `AbstractCollection`, the above will give either a compilation error or a runtime exception, depending on the *declared* type of `someCollection`.","title":"What is the purpose of AbstractCollection","body":"<p>Adding to what @Angelixus says in <a href=\"https://stackoverflow.com/a/58513874/139985\">https://stackoverflow.com/a/58513874/139985</a>:</p>\n\n<p>One reason to NOT do this:</p>\n\n<pre><code>AbstractCollection col = (AbstractCollection) someCollection;\n</code></pre>\n\n<p>is that subtypes of <code>Collection</code> are NOT guaranteed to extend the <code>AbstractCollection</code> base class.  </p>\n\n<p>It is certainly the case that most (if not all) of the standard collection types do extend this base class.  However, this may not apply to all 3rd-party collection classes.  If you encounter a collection class that is implemented without extending <code>AbstractCollection</code>, the above will give either a compilation error or a runtime exception, depending on the <em>declared</em> type of <code>someCollection</code>.</p>\n"},{"tags":[],"owner":{"account_id":17271228,"reputation":11,"user_id":12984519,"display_name":"Jim Hiaini"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1597321119,"creation_date":1597321119,"answer_id":63395023,"question_id":26319130,"body_markdown":"`Collection` interface declares useful methods that all implementing classes must supply. But it is a bother if every class that implements the `Collection` interface has to supply so many methods. \r\n\r\nTo make life easier for us, the library supplies a class `AbstractCollection` that leaves the fundamental methods `size` and `iterator` abstract but implements the routine methods in terms of them. For example:\r\n\r\n```\r\npublic abstract class AbstractCollection&lt;E&gt;\r\n    implements Collection&lt;E&gt;\r\n{\r\n    ...\r\n    public abstract Iterator&lt;E&gt; iterator();\r\n    public boolean contains(Object obj)\r\n    {\r\n        for (E element : this) // calls iterator()\r\n            if (element.equals(obj))\r\n                return true;\r\n        return false;\r\n    }\r\n    ...\r\n}\r\n\r\n```\r\n\r\nConcrete collection class can now extend the `AbstractCollection` class. It is up to us now to supply `iterator` method, but the `contains` method has been taken care of by the `AbstractCollection` superclass. However, if the subclass has a more efficient way of implementing `contains`, it is free to do so. &lt;b&gt;But this approach is a bit outdated&lt;/b&gt;.","title":"What is the purpose of AbstractCollection","body":"<p><code>Collection</code> interface declares useful methods that all implementing classes must supply. But it is a bother if every class that implements the <code>Collection</code> interface has to supply so many methods.</p>\n<p>To make life easier for us, the library supplies a class <code>AbstractCollection</code> that leaves the fundamental methods <code>size</code> and <code>iterator</code> abstract but implements the routine methods in terms of them. For example:</p>\n<pre><code>public abstract class AbstractCollection&lt;E&gt;\n    implements Collection&lt;E&gt;\n{\n    ...\n    public abstract Iterator&lt;E&gt; iterator();\n    public boolean contains(Object obj)\n    {\n        for (E element : this) // calls iterator()\n            if (element.equals(obj))\n                return true;\n        return false;\n    }\n    ...\n}\n\n</code></pre>\n<p>Concrete collection class can now extend the <code>AbstractCollection</code> class. It is up to us now to supply <code>iterator</code> method, but the <code>contains</code> method has been taken care of by the <code>AbstractCollection</code> superclass. However, if the subclass has a more efficient way of implementing <code>contains</code>, it is free to do so. <b>But this approach is a bit outdated</b>.</p>\n"},{"tags":[],"owner":{"account_id":4871805,"reputation":31,"user_id":3928020,"display_name":"gathila"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631669215,"creation_date":1631630961,"answer_id":69179978,"question_id":26319130,"body_markdown":"These classes are called **skeletal implementation** classes. Naming convention is Abstract*Interface* where interface is the name of the interface (eg - AbstractList). They are created by combining interfaces and abstract classes. \r\n\r\nGenerally when we design an interface and when there is obvious implementation to the interface methods, we can provide the default methods in the interface so that the person who implements the interface can follow the default implementation and provide the custom implementation on top of it. But there are limits on how much implementation assistance you can provide with default methods. A reason is interfaces are not permitted to contain instance fields or nonpublic static members. We can however combine the advantages of interfaces and abstract classes.\r\n\r\nRefer to the example below. Suppose we have method which accept int array and return a List of Integers which contains square of each elements.\r\n\r\n    public static List&lt;Integer&gt; squaredList(int [] e) {\r\n\t\t\r\n\t\treturn new AbstractList&lt;Integer&gt;() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic Integer get(int index) {\r\n\t\t\t\treturn e[index] * e[index];\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic int size() {\r\n\t\t\t\treturn e.length;\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\nAbstractCollection, 2 methods are abstract. If you want\r\nTo implement an unmodifiable collection, the programmer needs only to extend this class and provide implementations for the iterator and size methods. (The iterator returned by the iterator method must implement hasNext and next.)\r\nThese type of implementation is very useful when you are implementing an immutable classes which has a method to return a Collection.\r\n\r\nTo implement a modifiable collection, the programmer must additionally override this class&#39;s add method (which otherwise throws an UnsupportedOperationException), and the iterator returned by the iterator method must additionally implement its remove method.\r\n\r\nRefer the java docs for additional info\r\nhttps://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/AbstractCollection.html","title":"What is the purpose of AbstractCollection","body":"<p>These classes are called <strong>skeletal implementation</strong> classes. Naming convention is Abstract<em>Interface</em> where interface is the name of the interface (eg - AbstractList). They are created by combining interfaces and abstract classes.</p>\n<p>Generally when we design an interface and when there is obvious implementation to the interface methods, we can provide the default methods in the interface so that the person who implements the interface can follow the default implementation and provide the custom implementation on top of it. But there are limits on how much implementation assistance you can provide with default methods. A reason is interfaces are not permitted to contain instance fields or nonpublic static members. We can however combine the advantages of interfaces and abstract classes.</p>\n<p>Refer to the example below. Suppose we have method which accept int array and return a List of Integers which contains square of each elements.</p>\n<pre><code>public static List&lt;Integer&gt; squaredList(int [] e) {\n    \n    return new AbstractList&lt;Integer&gt;() {\n\n        @Override\n        public Integer get(int index) {\n            return e[index] * e[index];\n        }\n\n        @Override\n        public int size() {\n            return e.length;\n        }\n    };\n}\n</code></pre>\n<p>AbstractCollection, 2 methods are abstract. If you want\nTo implement an unmodifiable collection, the programmer needs only to extend this class and provide implementations for the iterator and size methods. (The iterator returned by the iterator method must implement hasNext and next.)\nThese type of implementation is very useful when you are implementing an immutable classes which has a method to return a Collection.</p>\n<p>To implement a modifiable collection, the programmer must additionally override this class's add method (which otherwise throws an UnsupportedOperationException), and the iterator returned by the iterator method must additionally implement its remove method.</p>\n<p>Refer the java docs for additional info\n<a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/AbstractCollection.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/AbstractCollection.html</a></p>\n"},{"tags":[],"owner":{"account_id":7307087,"reputation":442,"user_id":10661805,"display_name":"Ray Jasson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680087198,"creation_date":1680086831,"answer_id":75876202,"question_id":26319130,"body_markdown":"Here&#39;s an interesting quote worth referencing from [Core Java, Volume I―Fundamentals, 10th Edition](https://learning.oreilly.com/library/view/core-java-r-volume/9780134177335/ch06.html#:-:text=In%20the%20Java%20API%2C%20you%20will,methods%20in%20the%20interface.):\r\n\r\n&gt;  In the Java API, you will find a number of interfaces with companion classes that implement some or all of its methods, such as `Collection`/`AbstractCollection` or `MouseListener`/`MouseAdapter`. With Java SE 8, this technique is obsolete. Just implement the methods in the interface.","title":"What is the purpose of AbstractCollection","body":"<p>Here's an interesting quote worth referencing from <a href=\"https://learning.oreilly.com/library/view/core-java-r-volume/9780134177335/ch06.html#:-:text=In%20the%20Java%20API%2C%20you%20will,methods%20in%20the%20interface.\" rel=\"nofollow noreferrer\">Core Java, Volume I―Fundamentals, 10th Edition</a>:</p>\n<blockquote>\n<p>In the Java API, you will find a number of interfaces with companion classes that implement some or all of its methods, such as <code>Collection</code>/<code>AbstractCollection</code> or <code>MouseListener</code>/<code>MouseAdapter</code>. With Java SE 8, this technique is obsolete. Just implement the methods in the interface.</p>\n</blockquote>\n"}],"owner":{"account_id":3584524,"reputation":91,"user_id":2991988,"display_name":"JAVAJOKER1093"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4064,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":6,"score":9,"last_activity_date":1680087198,"creation_date":1413060501,"question_id":26319130,"body_markdown":"`AbstractCollection` implements `Collection`. So why is `AbstractCollection` there and why do we use `Collection` instead of directly using `AbstractCollection`?","title":"What is the purpose of AbstractCollection","body":"<p><code>AbstractCollection</code> implements <code>Collection</code>. So why is <code>AbstractCollection</code> there and why do we use <code>Collection</code> instead of directly using <code>AbstractCollection</code>?</p>\n"},{"tags":["java","android","rest","visual-studio-code","postman"],"comments":[{"owner":{"account_id":442814,"reputation":23181,"user_id":833647,"display_name":"Ken Wolf"},"score":0,"creation_date":1680002650,"post_id":75865580,"comment_id":133818689,"body_markdown":"You are probably missing something that your app/retrofit is doing. Why don&#39;t you compare the request the app makes with the ones you are making in Postman?","body":"You are probably missing something that your app/retrofit is doing. Why don&#39;t you compare the request the app makes with the ones you are making in Postman?"},{"owner":{"account_id":27761018,"reputation":71,"user_id":21193451,"display_name":"user21193451"},"score":0,"creation_date":1680002903,"post_id":75865580,"comment_id":133818758,"body_markdown":"@KenWolf: How can I compare them? just comparing the links inside of Android Studio LOG? it is same as postman one.","body":"@KenWolf: How can I compare them? just comparing the links inside of Android Studio LOG? it is same as postman one."},{"owner":{"account_id":442814,"reputation":23181,"user_id":833647,"display_name":"Ken Wolf"},"score":0,"creation_date":1680003070,"post_id":75865580,"comment_id":133818810,"body_markdown":"Different ways: 1) Increase logging client-side (eg via OKhttp logging interceptor) so you can see the full request (headers, etc.). 2) Check on the server side. 3) Use a proxy (fiddler, etc.) to sniff traffic","body":"Different ways: 1) Increase logging client-side (eg via OKhttp logging interceptor) so you can see the full request (headers, etc.). 2) Check on the server side. 3) Use a proxy (fiddler, etc.) to sniff traffic"},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1680003844,"post_id":75865580,"comment_id":133819025,"body_markdown":"Play around with Postman x-wwwform-urlencoded, perhaps your retrofit call is sending that rather than application/json.","body":"Play around with Postman x-wwwform-urlencoded, perhaps your retrofit call is sending that rather than application/json."},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1680074319,"post_id":75865580,"comment_id":133833253,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.\n\nPlease see [how to ask](https://stackoverflow.com/help/how-to-ask).\n\n[minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example)","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.  Please see <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask</a>.  <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"},{"owner":{"account_id":27761018,"reputation":71,"user_id":21193451,"display_name":"user21193451"},"score":1,"creation_date":1680085150,"post_id":75865580,"comment_id":133836036,"body_markdown":"@KenWolf: Your two comments answer to my question. Please expand your comments and post an answer to remove this post from unanswered list. (I used `.setLevel(HttpLoggingInterceptor.Level.BODY));` for full debug)","body":"@KenWolf: Your two comments answer to my question. Please expand your comments and post an answer to remove this post from unanswered list. (I used <code>.setLevel(HttpLoggingInterceptor.Level.BODY));</code> for full debug)"}],"answers":[{"tags":[],"owner":{"account_id":13097416,"reputation":1,"user_id":9462927,"display_name":"b02laire"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680003349,"creation_date":1680003349,"answer_id":75865739,"question_id":75865580,"body_markdown":"The problem here might be related to the headers of your request.\r\nMake sure you are sending the same headers via Postman/VS Code as the ones used in your Android app\r\n","title":"Rest api is returning bad request using VSCode or postman while it is working with my android app?","body":"<p>The problem here might be related to the headers of your request.\nMake sure you are sending the same headers via Postman/VS Code as the ones used in your Android app</p>\n"},{"tags":[],"owner":{"account_id":442814,"reputation":23181,"user_id":833647,"display_name":"Ken Wolf"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1680086817,"creation_date":1680085915,"answer_id":75876051,"question_id":75865580,"body_markdown":"Your app is doing something that you are missing in the Postman call. For example: \r\n\r\n* Missing headers\r\n* Fields\r\n* Content formatting\r\n\r\nTo solve this you&#39;ll need to see the full request that your app is making - often default logging is not enough. \r\n\r\nThere are a few ways to do this:\r\n1) Increase logging client-side (eg via [OKHttp logging interceptor][1]) \r\n2) Check on the server side. \r\n3) Use a proxy (`Fiddler`, `Charles` etc.) to sniff network traffic\r\n\r\nI would go with 1) as the simplest. The likelihood is you are missing some headers or similar.\r\n\r\n\r\n  [1]: https://github.com/square/okhttp/tree/master/okhttp-logging-interceptor","title":"Rest api is returning bad request using VSCode or postman while it is working with my android app?","body":"<p>Your app is doing something that you are missing in the Postman call. For example:</p>\n<ul>\n<li>Missing headers</li>\n<li>Fields</li>\n<li>Content formatting</li>\n</ul>\n<p>To solve this you'll need to see the full request that your app is making - often default logging is not enough.</p>\n<p>There are a few ways to do this:</p>\n<ol>\n<li>Increase logging client-side (eg via <a href=\"https://github.com/square/okhttp/tree/master/okhttp-logging-interceptor\" rel=\"nofollow noreferrer\">OKHttp logging interceptor</a>)</li>\n<li>Check on the server side.</li>\n<li>Use a proxy (<code>Fiddler</code>, <code>Charles</code> etc.) to sniff network traffic</li>\n</ol>\n<p>I would go with 1) as the simplest. The likelihood is you are missing some headers or similar.</p>\n"}],"owner":{"account_id":27761018,"reputation":71,"user_id":21193451,"display_name":"user21193451"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":528,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75876051,"answer_count":2,"score":1,"last_activity_date":1680086817,"creation_date":1680002343,"question_id":75865580,"body_markdown":"My problem is opposite of most of problems that have been posted in web like\r\nhttps://stackoverflow.com/q/59790817/21193451 or https://stackoverflow.com/q/42758443/21193451\r\n\r\nMy rest API is working very well on my java android app but it fail to login using Thunder Client VSCode extension or desktop postman running with Xampp. All of these API tools returning `Status: 400 Bad Request` and can&#39;t verify even first field of login form while in android app it has no problem.\r\n\r\nWhat has caused this problem?\r\n\r\nI am using retrofit2 for my working java codes: (phone = 123456, password = 123456789)\r\n\r\n    @POST(&quot;http://localhost/myapp/index.php/auth/login&quot;)\r\n        ApiResponse&lt;AuthResponse&gt; login(@Body UserLogin userLogin);\r\n\r\n\r\nand in VSCode \r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nand this is the my Xampp details:\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IOJ8L.png\r\n  [2]: https://i.stack.imgur.com/q1u4W.png","title":"Rest api is returning bad request using VSCode or postman while it is working with my android app?","body":"<p>My problem is opposite of most of problems that have been posted in web like\n<a href=\"https://stackoverflow.com/q/59790817/21193451\">Why is my API working with Postman but not working with Java Get request</a> or <a href=\"https://stackoverflow.com/q/42758443/21193451\">HttpClient returning Bad Request while Postman is working fine</a></p>\n<p>My rest API is working very well on my java android app but it fail to login using Thunder Client VSCode extension or desktop postman running with Xampp. All of these API tools returning <code>Status: 400 Bad Request</code> and can't verify even first field of login form while in android app it has no problem.</p>\n<p>What has caused this problem?</p>\n<p>I am using retrofit2 for my working java codes: (phone = 123456, password = 123456789)</p>\n<pre><code>@POST(&quot;http://localhost/myapp/index.php/auth/login&quot;)\n    ApiResponse&lt;AuthResponse&gt; login(@Body UserLogin userLogin);\n</code></pre>\n<p>and in VSCode</p>\n<p><a href=\"https://i.stack.imgur.com/q1u4W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/q1u4W.png\" alt=\"enter image description here\" /></a></p>\n<p>and this is the my Xampp details:</p>\n<p><a href=\"https://i.stack.imgur.com/IOJ8L.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IOJ8L.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android","ip","remote-desktop"],"owner":{"account_id":18293048,"reputation":1,"user_id":13319466,"display_name":"lifeandtimes89"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680086471,"creation_date":1680086471,"question_id":75876144,"body_markdown":"I am wondering if anyone can help me? I am creating an app that will listen for remote desktop style connections coming through 3rd party apps on a mobile device and print the IP address of the connecting device in the app screen. For this example I am using the Anydesk application on both my Samsung S20 phone thats up to date and my windows laptop but want to test it on others once its working. Both devices are on the same network as well. I have created the app in Android Studio and installed it on my phone, the app opens but when I make a remote connection through my windows machine the IP address does not display in the app, the textview text just remains\r\n\r\n\r\n\r\nThe code seems to be written correctly, I need a serversocket to listen for the connections and the getInetAddress should get the ip and print it. \r\nI have looked through the logcat output and see a couple of errors but I am not sure how to resolve them or if its actually a problem with my code. I will print the red &quot;E&quot; and yellow &quot;W&quot; errors here as they seem to be the most sever and the code i am using. The name of the app is app5\r\n\r\n&gt; 6749-6749  studio.deploy           pid-6749                             E  Could not get package user id: run-as: unknown package: com.example.app5\r\n  6749-6749  studio.deploy           pid-6749                             E  Could not find apks for this package: com.example.app5\r\n 6749-6749  studio.deploy           pid-6749                             E  Could not get package user id: run-as: unknown package: com.example.app5\r\n 6749-6749  studio.deploy           pid-6749                             E  Could not find apks for this package: com.example.app5\r\n\r\n&gt;  6944-6944  ziparchive              com.example.app5                     W  Unable to open &#39;/data/app/~~O9Dj0vAM547hLLzf45vTPg==/com.example.app5-ywR6kD_lsw69JIUb7DTFGQ==/base.dm&#39;: No such file or directory\r\n 6944-6944  ziparchive              com.example.app5                     W  Unable to open &#39;/data/app/~~O9Dj0vAM547hLLzf45vTPg==/com.example.app5-ywR6kD_lsw69JIUb7DTFGQ==/base.dm&#39;: No such file or directory\r\n\r\n&gt; 6944-6944  om.example.app5         com.example.app5                     W  Accessing hidden method Landroid/view/View;-&gt;computeFitSystemWindows(Landroid/graphics/Rect;Landroid/graphics/Rect;)Z (unsupported, reflection, allowed)\r\n6944-6944  om.example.app5         com.example.app5                     W  Accessing hidden method Landroid/view/ViewGroup;-&gt;makeOptionalFitsSystemWindows()V (unsupported, reflection, allowed)\r\n\r\nI am aware the following error is a screen issue but I am not experiencing any visual issues with the app when it is open\r\n&gt; 1513-4565  WindowManager           pid-1513                             E  win=Window{23ac548 u0 com.example.app5/com.example.app5.MainActivity} destroySurfaces: appStopped=true cleanupOnResume=false win.mWindowRemovalAllowed=false win.mRemoveOnExit=false win.mViewVisibility=8 caller=com.android.server.wm.ActivityRecord.destroySurfaces:6529 com.android.server.wm.ActivityRecord.destroySurfaces:6510 com.android.server.wm.ActivityRecord.notifyAppStopped:6574 com.android.server.wm.ActivityRecord.activityStopped:7162 com.android.server.wm.ActivityClientController.activityStopped:258 android.app.IActivityClientController$Stub.onTransact:613 com.android.server.wm.ActivityClientController.onTransact:136\r\n\r\nThe androidmanifest only needed one permission added based on my research for &quot;android.permission.INTERNET&quot; which i have dded\r\n\r\nHere is my MainActivity. I followed some of the suggestions by the IDE to resolve the R. error which is why there a &quot;SurpressLint&quot; there\r\n\r\n```\r\npackage com.example.app5;\r\n\r\nimport static com.example.app5.R.*;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.os.Bundle;\r\nimport android.os.Bundle;\r\nimport android.app.Activity;\r\nimport android.os.Bundle;\r\nimport android.widget.TextView;\r\nimport java.io.IOException;\r\nimport java.net.InetAddress;\r\nimport java.net.ServerSocket;\r\nimport java.net.Socket;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private TextView mIpAddressTextView;\r\n\r\n\r\n    @SuppressLint(&quot;MissingInflatedId&quot;)\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        mIpAddressTextView = findViewById(id.ip_address_text_view);\r\n\r\n        // Start listening for incoming network connections on port 5000\r\n        new Thread(() -&gt; {\r\n            try {\r\n                ServerSocket serverSocket = new ServerSocket(5000);\r\n                while (true) {\r\n                    Socket socket = serverSocket.accept();\r\n\r\n                    // Get the IP address of the connected device\r\n                    InetAddress inetAddress = socket.getInetAddress();\r\n                    String ipAddress = inetAddress.getHostAddress();\r\n\r\n                    // Display the IP address in the app\r\n                    runOnUiThread(() -&gt; mIpAddressTextView.setText(ipAddress));\r\n                }\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }).start();\r\n    }\r\n}\r\n```\r\n\r\nAny advice would be appreciated\r\n","title":"My android app is not printing the remote host IP address from a 3rd party application","body":"<p>I am wondering if anyone can help me? I am creating an app that will listen for remote desktop style connections coming through 3rd party apps on a mobile device and print the IP address of the connecting device in the app screen. For this example I am using the Anydesk application on both my Samsung S20 phone thats up to date and my windows laptop but want to test it on others once its working. Both devices are on the same network as well. I have created the app in Android Studio and installed it on my phone, the app opens but when I make a remote connection through my windows machine the IP address does not display in the app, the textview text just remains</p>\n<p>The code seems to be written correctly, I need a serversocket to listen for the connections and the getInetAddress should get the ip and print it.\nI have looked through the logcat output and see a couple of errors but I am not sure how to resolve them or if its actually a problem with my code. I will print the red &quot;E&quot; and yellow &quot;W&quot; errors here as they seem to be the most sever and the code i am using. The name of the app is app5</p>\n<blockquote>\n<p>6749-6749  studio.deploy           pid-6749                             E  Could not get package user id: run-as: unknown package: com.example.app5\n6749-6749  studio.deploy           pid-6749                             E  Could not find apks for this package: com.example.app5\n6749-6749  studio.deploy           pid-6749                             E  Could not get package user id: run-as: unknown package: com.example.app5\n6749-6749  studio.deploy           pid-6749                             E  Could not find apks for this package: com.example.app5</p>\n</blockquote>\n<blockquote>\n<p>6944-6944  ziparchive              com.example.app5                     W  Unable to open '/data/app/~~O9Dj0vAM547hLLzf45vTPg==/com.example.app5-ywR6kD_lsw69JIUb7DTFGQ==/base.dm': No such file or directory\n6944-6944  ziparchive              com.example.app5                     W  Unable to open '/data/app/~~O9Dj0vAM547hLLzf45vTPg==/com.example.app5-ywR6kD_lsw69JIUb7DTFGQ==/base.dm': No such file or directory</p>\n</blockquote>\n<blockquote>\n<p>6944-6944  om.example.app5         com.example.app5                     W  Accessing hidden method Landroid/view/View;-&gt;computeFitSystemWindows(Landroid/graphics/Rect;Landroid/graphics/Rect;)Z (unsupported, reflection, allowed)\n6944-6944  om.example.app5         com.example.app5                     W  Accessing hidden method Landroid/view/ViewGroup;-&gt;makeOptionalFitsSystemWindows()V (unsupported, reflection, allowed)</p>\n</blockquote>\n<p>I am aware the following error is a screen issue but I am not experiencing any visual issues with the app when it is open</p>\n<blockquote>\n<p>1513-4565  WindowManager           pid-1513                             E  win=Window{23ac548 u0 com.example.app5/com.example.app5.MainActivity} destroySurfaces: appStopped=true cleanupOnResume=false win.mWindowRemovalAllowed=false win.mRemoveOnExit=false win.mViewVisibility=8 caller=com.android.server.wm.ActivityRecord.destroySurfaces:6529 com.android.server.wm.ActivityRecord.destroySurfaces:6510 com.android.server.wm.ActivityRecord.notifyAppStopped:6574 com.android.server.wm.ActivityRecord.activityStopped:7162 com.android.server.wm.ActivityClientController.activityStopped:258 android.app.IActivityClientController$Stub.onTransact:613 com.android.server.wm.ActivityClientController.onTransact:136</p>\n</blockquote>\n<p>The androidmanifest only needed one permission added based on my research for &quot;android.permission.INTERNET&quot; which i have dded</p>\n<p>Here is my MainActivity. I followed some of the suggestions by the IDE to resolve the R. error which is why there a &quot;SurpressLint&quot; there</p>\n<pre><code>package com.example.app5;\n\nimport static com.example.app5.R.*;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.annotation.SuppressLint;\nimport android.os.Bundle;\nimport android.os.Bundle;\nimport android.app.Activity;\nimport android.os.Bundle;\nimport android.widget.TextView;\nimport java.io.IOException;\nimport java.net.InetAddress;\nimport java.net.ServerSocket;\nimport java.net.Socket;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private TextView mIpAddressTextView;\n\n\n    @SuppressLint(&quot;MissingInflatedId&quot;)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        mIpAddressTextView = findViewById(id.ip_address_text_view);\n\n        // Start listening for incoming network connections on port 5000\n        new Thread(() -&gt; {\n            try {\n                ServerSocket serverSocket = new ServerSocket(5000);\n                while (true) {\n                    Socket socket = serverSocket.accept();\n\n                    // Get the IP address of the connected device\n                    InetAddress inetAddress = socket.getInetAddress();\n                    String ipAddress = inetAddress.getHostAddress();\n\n                    // Display the IP address in the app\n                    runOnUiThread(() -&gt; mIpAddressTextView.setText(ipAddress));\n                }\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }).start();\n    }\n}\n</code></pre>\n<p>Any advice would be appreciated</p>\n"},{"tags":["java","hibernate"],"answers":[{"tags":[],"owner":{"account_id":27908544,"reputation":1,"user_id":21311222,"display_name":"Pavan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680086407,"creation_date":1680086407,"answer_id":75876132,"question_id":75688704,"body_markdown":"I thought dependency was missing :-\r\n\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/javax.persistence/javax.persistence-api --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\r\n                &lt;version&gt;2.2&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\r\n","title":"cannot access javax.persistence.criteria.CriteriaDelete class file for javax.persistence.criteria.CriteriaDelete not found","body":"<p>I thought dependency was missing :-</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/javax.persistence/javax.persistence-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\n            &lt;version&gt;2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":23452248,"reputation":11,"user_id":17508254,"display_name":"ismail"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1680086407,"creation_date":1678386681,"question_id":75688704,"body_markdown":"I am learning Hibernate. I want to connect SQL server. I wrote this code and I receive an exception\r\n\r\n```\r\nSessionFactory factory = new Configuration()\r\n        .configure(&quot;hibernate.cfg.xml&quot;)\r\n        .addAnnotatedClass(Car.class)\r\n        .buildSessionFactory();\r\n\r\nSession session = factory.getCurrentSession();\r\n\r\ntry {\r\n    session.beginTransaction();\r\n    List&lt;Car&gt; cars =  session.createQuery(&quot;from cars&quot;).getResultList();\r\n\r\n    for (Car car : cars) {\r\n        System.out.println(car.getCars_name());\r\n    }\r\n\r\n    session.getTransaction().commit();\r\n} finally {\r\n    factory.close();\r\n}\r\n```\r\n\r\n&gt;cannot access javax.persistence.criteria.CriteriaDelete\r\n  class file for javax.persistence.criteria.CriteriaDelete not found\r\n","title":"cannot access javax.persistence.criteria.CriteriaDelete class file for javax.persistence.criteria.CriteriaDelete not found","body":"<p>I am learning Hibernate. I want to connect SQL server. I wrote this code and I receive an exception</p>\n<pre><code>SessionFactory factory = new Configuration()\n        .configure(&quot;hibernate.cfg.xml&quot;)\n        .addAnnotatedClass(Car.class)\n        .buildSessionFactory();\n\nSession session = factory.getCurrentSession();\n\ntry {\n    session.beginTransaction();\n    List&lt;Car&gt; cars =  session.createQuery(&quot;from cars&quot;).getResultList();\n\n    for (Car car : cars) {\n        System.out.println(car.getCars_name());\n    }\n\n    session.getTransaction().commit();\n} finally {\n    factory.close();\n}\n</code></pre>\n<blockquote>\n<p>cannot access javax.persistence.criteria.CriteriaDelete\nclass file for javax.persistence.criteria.CriteriaDelete not found</p>\n</blockquote>\n"},{"tags":["java","object","if-statement","while-loop","compile-time"],"comments":[{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1680085338,"post_id":75875856,"comment_id":133836069,"body_markdown":"You can&#39;t stop a user entering letters. Read the entire line and check if it&#39;s a digit or not. If it&#39;s not, ask again.","body":"You can&#39;t stop a user entering letters. Read the entire line and check if it&#39;s a digit or not. If it&#39;s not, ask again."}],"owner":{"account_id":27201526,"reputation":1,"user_id":20733707,"display_name":"apophis"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1680085410,"answer_count":0,"score":0,"last_activity_date":1680085450,"creation_date":1680084774,"question_id":75875856,"body_markdown":"Im a beginner at java programming and this is from our intermediate java programming class. How do i add a validation that does not accept alphabets and restarts only the selected operation??`\r\n\r\nHere is my code:\r\n\r\n\r\n```\r\npackage Calcu;\r\nimport java.util.Scanner;\r\n\r\n//Assignment\r\n//1.  What is Abstraction in OOP\r\n//2. Give an example of program where abstraction is presented\r\n\r\nclass Add{\r\n\tvoid AddM(double num) {\r\n\t\tSystem.out.print(&quot;Enter Number for Addition: &quot;);\r\n\t}\r\n}\r\n\r\nclass Sub{\r\n\tvoid SubM(double num) {\r\n\t\tSystem.out.print(&quot;Enter Number for Subtraction: &quot;);\r\n\t}\r\n}\r\n\r\nclass Mult{\r\n\tvoid MultM(double num) {\r\n\t\tSystem.out.print(&quot;Enter Number for Multiplication: &quot;);\r\n\t}\r\n}\r\n\r\nclass Div{\r\n\tvoid DivM(double num) {\r\n\t\tSystem.out.print(&quot;Enter Number for Division: &quot;);\r\n\t}\r\n}\r\n\r\npublic class Main {\r\n\tstatic Scanner s = new Scanner(System.in);\r\n\tpublic static void main(String[] args) {\r\n\t\twhile(true){\r\n\t\t\tSystem.out.println(&quot;~~~~~~~~~~~~~~~~~~~~~~~~~&quot;);\r\n\t\t\tSystem.out.println(&quot;~~Calculator~~&quot;);\r\n\t\t\tSystem.out.println(&quot; &quot;);\r\n\t\t\tSystem.out.println(&quot;Select Operation: &quot;);\r\n\t\t\tSystem.out.println(&quot;1 for Addition&quot;);\r\n\t\t\tSystem.out.println(&quot;2 for Subtraction&quot;);\r\n\t\t\tSystem.out.println(&quot;3 for Multiplication&quot;);\r\n\t\t\tSystem.out.println(&quot;4 for Division&quot;);\r\n\t\t\tSystem.out.println(&quot;Type s to terminate program&quot;);\r\n\t\t\tSystem.out.println(&quot;~~~~~~~~~~~~~~~~~~~~~~~~~&quot;);\r\n\t\t\tString in = s.next();\r\n\r\n\t\t\ttry {\r\n\t\t\t\tif (in.equals(&quot;1&quot;)) {\r\n\t\t\t\t\tAdd calcuA = new Add();\r\n\t\t\t\t\tcalcuA.AddM(0);\r\n\t\t\t\t\tdouble a = s.nextDouble();\r\n\t\t\t\t\tcalcuA.AddM(0);\r\n\t\t\t\t\tdouble b = s.nextDouble();\r\n\t\t\t\t\tSystem.out.println(&quot;--&gt;The Sum is: &quot; + (a + b) + &quot;&lt;--&quot;);\r\n\t\t\t\t\tSystem.out.println(&quot; &quot;);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\telse if (in.equals(&quot;2&quot;)) {\r\n\t\t\t\t\tSub calcuS = new Sub();\r\n\t\t\t\t\tcalcuS.SubM(0);\r\n\t\t\t\t\tdouble c = s.nextDouble();\r\n\t\t\t\t\tcalcuS.SubM(0);\r\n\t\t\t\t\tdouble d = s.nextDouble();\r\n\t\t\t\t\tSystem.out.println(&quot;--&gt;The Difference is: &quot; + (c - d) + &quot;&lt;--&quot;);\r\n\t\t\t\t\tSystem.out.println(&quot; &quot;);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\telse if (in.equals(&quot;3&quot;)){\r\n\t\t\t\t\tMult calcuM = new Mult();\r\n\t\t\t\t\tcalcuM.MultM(0);\r\n\t\t\t\t\tdouble e = s.nextDouble();\r\n\t\t\t\t\tcalcuM.MultM(0);\r\n\t\t\t\t\tdouble f = s.nextDouble();\r\n\t\t\t\t\tSystem.out.println(&quot;--&gt;The Product is: &quot; + (e * f) + &quot;&lt;--&quot;);\r\n\t\t\t\t\tSystem.out.println(&quot; &quot;);\r\n\t\t\t\t}\r\n\r\n\t\t\t\telse if(in.equals(&quot;4&quot;)) {\r\n\t\t\t\t\tDiv calcuD = new Div();\r\n\t\t\t\t\tcalcuD.DivM(0);\r\n\t\t\t\t\tdouble g = s.nextDouble();\r\n\t\t\t\t\tcalcuD.DivM(0);\r\n\t\t\t\t\tdouble f = s.nextDouble();\r\n\t\t\t\t\tSystem.out.println(&quot;--&gt;The Quotient is: &quot; + (g / f) + &quot;&lt;--&quot;);\r\n\t\t\t\t\tSystem.out.println(&quot; &quot;);\r\n\t\t\t\t}\r\n\t\t\t\telse if(in.equals(&quot;s&quot;)) {\r\n\t\t\t\t\tSystem.out.println(&quot;Thank you for using this calculator. Console Terminating...&quot;);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\telse {\r\n\t\t\t\t\tSystem.out.println(&quot;Choose only from the numbers represented above...&quot;);\r\n\t\t\t\t}\r\n\t\t\t}catch(Exception letters){\r\n\t\t\t\tSystem.out.println(&quot; &quot;);\r\n\t\t\t\tSystem.out.println(&quot;!!!!!!!!!!!!!!!!!!!!!!!!!!!!!&quot;);\r\n\t\t\t\tSystem.out.println(&quot;Only numbers are allowed! Try again!!&quot;);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n```\r\n\r\n\r\nI&#39;ve tried using try catch but the results prints out the whole program and not the &quot;enter number for the selected operation(addition, subtraction, division, multiplication)&quot;\r\nive tried changing the conditions of while, adding other validation and moving them from places but i couldn&#39;t achieve the results i was looking.\r\n    \r\n~~~~~~~~~~~~~~~~~~~~~~~~~\r\n~~Calculator~~\r\n \r\nSelect Operation: \r\n1 for Addition\r\n2 for Subtraction\r\n3 for Multiplication\r\n4 for Division\r\n~~~~~~~~~~~~~~~~~~~~~~~~~\r\n\r\n2\r\nEnter Number for Subtraction: jk\r\n \r\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nOnly numbers are allowed! Try again!!\r\n~~~~~~~~~~~~~~~~~~~~~~~~~\r\n~~Calculator~~\r\n \r\nSelect Operation: \r\n1 for Addition\r\n2 for Subtraction\r\n3 for Multiplication\r\n4 for Division\r\n~~~~~~~~~~~~~~~~~~~~~~~~~\r\nChoose only from the numbers represented above...\r\n~~~~~~~~~~~~~~~~~~~~~~~~~\r\n~~Calculator~~\r\n \r\nSelect Operation: \r\n1 for Addition\r\n2 for Subtraction\r\n3 for Multiplication\r\n4 for Division\r\n~~~~~~~~~~~~~~~~~~~~~~~~~\r\n","title":"How to add a validation that rejects letters","body":"<p>Im a beginner at java programming and this is from our intermediate java programming class. How do i add a validation that does not accept alphabets and restarts only the selected operation??`</p>\n<p>Here is my code:</p>\n<pre><code>package Calcu;\nimport java.util.Scanner;\n\n//Assignment\n//1.  What is Abstraction in OOP\n//2. Give an example of program where abstraction is presented\n\nclass Add{\n    void AddM(double num) {\n        System.out.print(&quot;Enter Number for Addition: &quot;);\n    }\n}\n\nclass Sub{\n    void SubM(double num) {\n        System.out.print(&quot;Enter Number for Subtraction: &quot;);\n    }\n}\n\nclass Mult{\n    void MultM(double num) {\n        System.out.print(&quot;Enter Number for Multiplication: &quot;);\n    }\n}\n\nclass Div{\n    void DivM(double num) {\n        System.out.print(&quot;Enter Number for Division: &quot;);\n    }\n}\n\npublic class Main {\n    static Scanner s = new Scanner(System.in);\n    public static void main(String[] args) {\n        while(true){\n            System.out.println(&quot;~~~~~~~~~~~~~~~~~~~~~~~~~&quot;);\n            System.out.println(&quot;~~Calculator~~&quot;);\n            System.out.println(&quot; &quot;);\n            System.out.println(&quot;Select Operation: &quot;);\n            System.out.println(&quot;1 for Addition&quot;);\n            System.out.println(&quot;2 for Subtraction&quot;);\n            System.out.println(&quot;3 for Multiplication&quot;);\n            System.out.println(&quot;4 for Division&quot;);\n            System.out.println(&quot;Type s to terminate program&quot;);\n            System.out.println(&quot;~~~~~~~~~~~~~~~~~~~~~~~~~&quot;);\n            String in = s.next();\n\n            try {\n                if (in.equals(&quot;1&quot;)) {\n                    Add calcuA = new Add();\n                    calcuA.AddM(0);\n                    double a = s.nextDouble();\n                    calcuA.AddM(0);\n                    double b = s.nextDouble();\n                    System.out.println(&quot;--&gt;The Sum is: &quot; + (a + b) + &quot;&lt;--&quot;);\n                    System.out.println(&quot; &quot;);\n                }\n\n\n                else if (in.equals(&quot;2&quot;)) {\n                    Sub calcuS = new Sub();\n                    calcuS.SubM(0);\n                    double c = s.nextDouble();\n                    calcuS.SubM(0);\n                    double d = s.nextDouble();\n                    System.out.println(&quot;--&gt;The Difference is: &quot; + (c - d) + &quot;&lt;--&quot;);\n                    System.out.println(&quot; &quot;);\n\n                }\n\n                else if (in.equals(&quot;3&quot;)){\n                    Mult calcuM = new Mult();\n                    calcuM.MultM(0);\n                    double e = s.nextDouble();\n                    calcuM.MultM(0);\n                    double f = s.nextDouble();\n                    System.out.println(&quot;--&gt;The Product is: &quot; + (e * f) + &quot;&lt;--&quot;);\n                    System.out.println(&quot; &quot;);\n                }\n\n                else if(in.equals(&quot;4&quot;)) {\n                    Div calcuD = new Div();\n                    calcuD.DivM(0);\n                    double g = s.nextDouble();\n                    calcuD.DivM(0);\n                    double f = s.nextDouble();\n                    System.out.println(&quot;--&gt;The Quotient is: &quot; + (g / f) + &quot;&lt;--&quot;);\n                    System.out.println(&quot; &quot;);\n                }\n                else if(in.equals(&quot;s&quot;)) {\n                    System.out.println(&quot;Thank you for using this calculator. Console Terminating...&quot;);\n                    break;\n                }\n\n                else {\n                    System.out.println(&quot;Choose only from the numbers represented above...&quot;);\n                }\n            }catch(Exception letters){\n                System.out.println(&quot; &quot;);\n                System.out.println(&quot;!!!!!!!!!!!!!!!!!!!!!!!!!!!!!&quot;);\n                System.out.println(&quot;Only numbers are allowed! Try again!!&quot;);\n                \n            }\n        }\n    }\n}\n\n</code></pre>\n<p>I've tried using try catch but the results prints out the whole program and not the &quot;enter number for the selected operation(addition, subtraction, division, multiplication)&quot;\nive tried changing the conditions of while, adding other validation and moving them from places but i couldn't achieve the results i was looking.</p>\n<pre><code>~~Calculator~~\n \nSelect Operation: \n1 for Addition\n2 for Subtraction\n3 for Multiplication\n4 for Division\n</code></pre>\n<p>2\nEnter Number for Subtraction: jk</p>\n<p>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\nOnly numbers are allowed! Try again!!</p>\n<pre><code>~~Calculator~~\n \nSelect Operation: \n1 for Addition\n2 for Subtraction\n3 for Multiplication\n4 for Division\n</code></pre>\n<p>Choose only from the numbers represented above...</p>\n<pre><code>~~Calculator~~\n \nSelect Operation: \n1 for Addition\n2 for Subtraction\n3 for Multiplication\n4 for Division\n</code></pre>\n"},{"tags":["java","swagger","dropwizard"],"owner":{"account_id":2808554,"reputation":53,"user_id":2415278,"display_name":"siva"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":154,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680084686,"creation_date":1680032927,"question_id":75870496,"body_markdown":"I am currently working on a project to upgrade from Java 8 to Java 17. Along with Java, I am also upgrading other libraries like Dropwizard, Hibernate, and Swagger. I am using &lt;https://github.com/smoketurner/dropwizard-swagger&gt;&#160;for the Swagger-Dropwizard integration. I&#160;updated all the RESP API and DTO annotations, but when I try to start the service, I am getting below runtime error. Has anyone tried upgrading Swagger-Dropwizard integration? Any suggestions or pointer on the following issue are appreciated. Thanks\r\n\r\n```\r\nWARN  [2023-03-28 19:25:35,282] org.eclipse.jetty.server.handler.ContextHandler.ROOT: unavailable\r\n! java.lang.IllegalArgumentException: org.glassfish.hk2.api.ProxyCtl referenced from a method is not visible from class loader\r\n! at java.base/java.lang.reflect.Proxy$ProxyBuilder.ensureVisible(Proxy.java:883)\r\n! at java.base/java.lang.reflect.Proxy$ProxyBuilder.validateProxyInterfaces(Proxy.java:721)\r\n! at java.base/java.lang.reflect.Proxy$ProxyBuilder.&lt;init&gt;(Proxy.java:648)\r\n! at java.base/java.lang.reflect.Proxy.lambda$getProxyConstructor$1(Proxy.java:440)\r\n! at java.base/jdk.internal.loader.AbstractClassLoaderValue$Memoizer.get(AbstractClassLoaderValue.java:329)\r\n! at java.base/jdk.internal.loader.AbstractClassLoaderValue.computeIfAbsent(AbstractClassLoaderValue.java:205)\r\n! at java.base/java.lang.reflect.Proxy.getProxyConstructor(Proxy.java:438)\r\n! at java.base/java.lang.reflect.Proxy.newProxyInstance(Proxy.java:1037)\r\n! at org.jvnet.hk2.internal.ProxyUtilities$3.run(ProxyUtilities.java:120)\r\n! at java.base/java.security.AccessController.doPrivileged(AccessController.java:318)\r\n! at org.jvnet.hk2.internal.ProxyUtilities.secureCreate(ProxyUtilities.java:115)\r\n! at org.jvnet.hk2.internal.ProxyUtilities.generateProxy(ProxyUtilities.java:194)\r\n! ... 76 common frames omitted\r\n! Causing: org.glassfish.hk2.api.MultiException: A MultiException has 2 exceptions.  They are:\r\n! 1. java.lang.IllegalArgumentException: org.glassfish.hk2.api.ProxyCtl referenced from a method is not visible from class loader\r\n! 2. java.lang.IllegalArgumentException: While attempting to create a Proxy for javax.ws.rs.core.HttpHeaders in scope org.glassfish.jersey.process.internal.RequestScoped an error occured while creating the proxy\r\n! \r\n! at org.jvnet.hk2.internal.ProxyUtilities.generateProxy(ProxyUtilities.java:211)\r\n! at org.jvnet.hk2.internal.Utilities.createService(Utilities.java:2074)\r\n! at org.jvnet.hk2.internal.ServiceHandleImpl.getService(ServiceHandleImpl.java:93)\r\n! at org.jvnet.hk2.internal.ServiceHandleImpl.getService(ServiceHandleImpl.java:67)\r\n! at org.glassfish.jersey.inject.hk2.ContextInjectionResolverImpl.resolve(ContextInjectionResolverImpl.java:103)\r\n! at org.jvnet.hk2.internal.Utilities.justInject(Utilities.java:988)\r\n! at org.jvnet.hk2.internal.ServiceLocatorImpl.inject(ServiceLocatorImpl.java:998)\r\n! at org.jvnet.hk2.internal.ServiceLocatorImpl.inject(ServiceLocatorImpl.java:976)\r\n! at org.glassfish.jersey.inject.hk2.AbstractHk2InjectionManager.inject(AbstractHk2InjectionManager.java:207)\r\n! at org.glassfish.jersey.inject.hk2.ImmediateHk2InjectionManager.inject(ImmediateHk2InjectionManager.java:30)\r\n! at org.glassfish.jersey.server.ApplicationHandler.initialize(ApplicationHandler.java:427)\r\n! at org.glassfish.jersey.server.ApplicationHandler.lambda$initialize$1(ApplicationHandler.java:297)\r\n! at org.glassfish.jersey.internal.Errors.process(Errors.java:292)\r\n! at org.glassfish.jersey.internal.Errors.process(Errors.java:274)\r\n! at org.glassfish.jersey.internal.Errors.processWithException(Errors.java:232)\r\n! at org.glassfish.jersey.server.ApplicationHandler.initialize(ApplicationHandler.java:296)\r\n! at org.glassfish.jersey.server.ApplicationHandler.&lt;init&gt;(ApplicationHandler.java:261)\r\n! at org.glassfish.jersey.servlet.WebComponent.&lt;init&gt;(WebComponent.java:311)\r\n! at org.glassfish.jersey.servlet.ServletContainer.init(ServletContainer.java:154)\r\n! at org.glassfish.jersey.servlet.ServletContainer.init(ServletContainer.java:339)\r\n! at javax.servlet.GenericServlet.init(GenericServlet.java:203)\r\n! at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:632)\r\n! at org.eclipse.jetty.servlet.ServletHolder.initialize(ServletHolder.java:415)\r\n! at org.eclipse.jetty.servlet.ServletHandler.lambda$initialize$0(ServletHandler.java:750)\r\n! at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)\r\n! at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)\r\n! at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n! at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n! at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n! at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n! at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:774)\r\n! at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:379)\r\n! at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:916)\r\n! at org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:288)\r\n! at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73)\r\n! at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\r\n! at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\r\n! at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\r\n! at com.codahale.metrics.jetty9.InstrumentedHandler.doStart(InstrumentedHandler.java:138)\r\n! at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73)\r\n! at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\r\n! at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\r\n! at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\r\n! at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73)\r\n! at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\r\n! at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\r\n! at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\r\n! at org.eclipse.jetty.server.handler.gzip.GzipHandler.doStart(GzipHandler.java:426)\r\n! at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73)\r\n! at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\r\n! at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\r\n! at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\r\n! at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73)\r\n! at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\r\n! at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\r\n! at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\r\n! at org.eclipse.jetty.server.handler.StatisticsHandler.doStart(StatisticsHandler.java:264)\r\n! at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73)\r\n! at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\r\n! at org.eclipse.jetty.server.Server.start(Server.java:423)\r\n! at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\r\n! at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\r\n! at org.eclipse.jetty.server.Server.doStart(Server.java:387)\r\n! at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73)\r\n! at io.dropwizard.cli.ServerCommand.run(ServerCommand.java:52)\r\n! at io.dropwizard.cli.EnvironmentCommand.run(EnvironmentCommand.java:68)\r\n! at io.dropwizard.cli.ConfiguredCommand.run(ConfiguredCommand.java:98)\r\n! at io.dropwizard.cli.Cli.run(Cli.java:78)\r\n! at io.dropwizard.Application.run(Application.java:94)\r\n```","title":"java.lang.IllegalArgumentException: org.glassfish.hk2.api.ProxyCtl referenced from a method is not visible from class loader","body":"<p>I am currently working on a project to upgrade from Java 8 to Java 17. Along with Java, I am also upgrading other libraries like Dropwizard, Hibernate, and Swagger. I am using <a href=\"https://github.com/smoketurner/dropwizard-swagger\" rel=\"nofollow noreferrer\">https://github.com/smoketurner/dropwizard-swagger</a> for the Swagger-Dropwizard integration. I updated all the RESP API and DTO annotations, but when I try to start the service, I am getting below runtime error. Has anyone tried upgrading Swagger-Dropwizard integration? Any suggestions or pointer on the following issue are appreciated. Thanks</p>\n<pre><code>WARN  [2023-03-28 19:25:35,282] org.eclipse.jetty.server.handler.ContextHandler.ROOT: unavailable\n! java.lang.IllegalArgumentException: org.glassfish.hk2.api.ProxyCtl referenced from a method is not visible from class loader\n! at java.base/java.lang.reflect.Proxy$ProxyBuilder.ensureVisible(Proxy.java:883)\n! at java.base/java.lang.reflect.Proxy$ProxyBuilder.validateProxyInterfaces(Proxy.java:721)\n! at java.base/java.lang.reflect.Proxy$ProxyBuilder.&lt;init&gt;(Proxy.java:648)\n! at java.base/java.lang.reflect.Proxy.lambda$getProxyConstructor$1(Proxy.java:440)\n! at java.base/jdk.internal.loader.AbstractClassLoaderValue$Memoizer.get(AbstractClassLoaderValue.java:329)\n! at java.base/jdk.internal.loader.AbstractClassLoaderValue.computeIfAbsent(AbstractClassLoaderValue.java:205)\n! at java.base/java.lang.reflect.Proxy.getProxyConstructor(Proxy.java:438)\n! at java.base/java.lang.reflect.Proxy.newProxyInstance(Proxy.java:1037)\n! at org.jvnet.hk2.internal.ProxyUtilities$3.run(ProxyUtilities.java:120)\n! at java.base/java.security.AccessController.doPrivileged(AccessController.java:318)\n! at org.jvnet.hk2.internal.ProxyUtilities.secureCreate(ProxyUtilities.java:115)\n! at org.jvnet.hk2.internal.ProxyUtilities.generateProxy(ProxyUtilities.java:194)\n! ... 76 common frames omitted\n! Causing: org.glassfish.hk2.api.MultiException: A MultiException has 2 exceptions.  They are:\n! 1. java.lang.IllegalArgumentException: org.glassfish.hk2.api.ProxyCtl referenced from a method is not visible from class loader\n! 2. java.lang.IllegalArgumentException: While attempting to create a Proxy for javax.ws.rs.core.HttpHeaders in scope org.glassfish.jersey.process.internal.RequestScoped an error occured while creating the proxy\n! \n! at org.jvnet.hk2.internal.ProxyUtilities.generateProxy(ProxyUtilities.java:211)\n! at org.jvnet.hk2.internal.Utilities.createService(Utilities.java:2074)\n! at org.jvnet.hk2.internal.ServiceHandleImpl.getService(ServiceHandleImpl.java:93)\n! at org.jvnet.hk2.internal.ServiceHandleImpl.getService(ServiceHandleImpl.java:67)\n! at org.glassfish.jersey.inject.hk2.ContextInjectionResolverImpl.resolve(ContextInjectionResolverImpl.java:103)\n! at org.jvnet.hk2.internal.Utilities.justInject(Utilities.java:988)\n! at org.jvnet.hk2.internal.ServiceLocatorImpl.inject(ServiceLocatorImpl.java:998)\n! at org.jvnet.hk2.internal.ServiceLocatorImpl.inject(ServiceLocatorImpl.java:976)\n! at org.glassfish.jersey.inject.hk2.AbstractHk2InjectionManager.inject(AbstractHk2InjectionManager.java:207)\n! at org.glassfish.jersey.inject.hk2.ImmediateHk2InjectionManager.inject(ImmediateHk2InjectionManager.java:30)\n! at org.glassfish.jersey.server.ApplicationHandler.initialize(ApplicationHandler.java:427)\n! at org.glassfish.jersey.server.ApplicationHandler.lambda$initialize$1(ApplicationHandler.java:297)\n! at org.glassfish.jersey.internal.Errors.process(Errors.java:292)\n! at org.glassfish.jersey.internal.Errors.process(Errors.java:274)\n! at org.glassfish.jersey.internal.Errors.processWithException(Errors.java:232)\n! at org.glassfish.jersey.server.ApplicationHandler.initialize(ApplicationHandler.java:296)\n! at org.glassfish.jersey.server.ApplicationHandler.&lt;init&gt;(ApplicationHandler.java:261)\n! at org.glassfish.jersey.servlet.WebComponent.&lt;init&gt;(WebComponent.java:311)\n! at org.glassfish.jersey.servlet.ServletContainer.init(ServletContainer.java:154)\n! at org.glassfish.jersey.servlet.ServletContainer.init(ServletContainer.java:339)\n! at javax.servlet.GenericServlet.init(GenericServlet.java:203)\n! at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:632)\n! at org.eclipse.jetty.servlet.ServletHolder.initialize(ServletHolder.java:415)\n! at org.eclipse.jetty.servlet.ServletHandler.lambda$initialize$0(ServletHandler.java:750)\n! at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)\n! at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)\n! at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\n! at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\n! at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\n! at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\n! at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:774)\n! at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:379)\n! at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:916)\n! at org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:288)\n! at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73)\n! at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\n! at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\n! at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\n! at com.codahale.metrics.jetty9.InstrumentedHandler.doStart(InstrumentedHandler.java:138)\n! at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73)\n! at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\n! at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\n! at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\n! at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73)\n! at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\n! at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\n! at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\n! at org.eclipse.jetty.server.handler.gzip.GzipHandler.doStart(GzipHandler.java:426)\n! at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73)\n! at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\n! at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\n! at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\n! at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73)\n! at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\n! at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\n! at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\n! at org.eclipse.jetty.server.handler.StatisticsHandler.doStart(StatisticsHandler.java:264)\n! at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73)\n! at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\n! at org.eclipse.jetty.server.Server.start(Server.java:423)\n! at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\n! at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\n! at org.eclipse.jetty.server.Server.doStart(Server.java:387)\n! at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:73)\n! at io.dropwizard.cli.ServerCommand.run(ServerCommand.java:52)\n! at io.dropwizard.cli.EnvironmentCommand.run(EnvironmentCommand.java:68)\n! at io.dropwizard.cli.ConfiguredCommand.run(ConfiguredCommand.java:98)\n! at io.dropwizard.cli.Cli.run(Cli.java:78)\n! at io.dropwizard.Application.run(Application.java:94)\n</code></pre>\n"},{"tags":["java","xml","kotlin"],"comments":[{"owner":{"account_id":13722742,"reputation":16978,"user_id":10134209,"display_name":"gidds"},"score":0,"creation_date":1680085931,"post_id":75875707,"comment_id":133836206,"body_markdown":"Which platform/OS are you running on, and how are you viewing the file?","body":"Which platform/OS are you running on, and how are you viewing the file?"}],"owner":{"account_id":26971923,"reputation":21,"user_id":20537817,"display_name":"George"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680083887,"creation_date":1680083887,"question_id":75875707,"body_markdown":"When appending new student to class I get unnecessary new lines inside existing student tags. How can I solve the issue so that formatting remains the same?\r\n\r\nclass.xml:\r\n```\r\n&lt;class&gt;\r\n&lt;student&gt;\r\n  &lt;name&gt;\r\n    &lt;first&gt;John&lt;/first&gt;\r\n    &lt;last&gt;Doe&lt;/last&gt;\r\n  &lt;/name&gt;\r\n&lt;/student&gt;\r\n&lt;/class&gt;\r\n```\r\nmy code:\r\n```\r\nimport java.io.File\r\nimport javax.xml.parsers.DocumentBuilderFactory\r\nimport javax.xml.transform.OutputKeys\r\nimport javax.xml.transform.TransformerFactory\r\nimport javax.xml.transform.dom.DOMSource\r\nimport javax.xml.transform.stream.StreamResult\r\n\r\nfun main() {\r\n    val filename = &quot;class.xml&quot;\r\n    // load the XML file into a Document object using the same DocumentBuilder instance\r\n    val dbFactory = DocumentBuilderFactory.newInstance()\r\n    val dBuilder = dbFactory.newDocumentBuilder()\r\n    val doc = dBuilder.parse(File(filename))\r\n    // create a new student element using the same DocumentBuilder instance\r\n    val newStudent = createStudent(doc, &quot;Jane&quot;, &quot;Doe&quot;)\r\n    // get the root element\r\n    val root = doc.documentElement\r\n    // append the new student element to the class element\r\n    root.appendChild(newStudent)\r\n    // write the modified Document object back to the XML file\r\n    val transformerFactory = TransformerFactory.newInstance()\r\n    val transformer = transformerFactory.newTransformer()\r\n    transformer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;)\r\n    transformer.setOutputProperty(&quot;{http://xml.apache.org/xslt}indent-amount&quot;, &quot;2&quot;)\r\n    val source = DOMSource(doc)\r\n    val result = StreamResult(File(&quot;out.xml&quot;))\r\n    transformer.transform(source, result)\r\n}\r\n\r\nfun createStudent(doc: org.w3c.dom.Document, firstName: String, lastName: String): org.w3c.dom.Element {\r\n    // create student element using the provided Document object\r\n    val student = doc.createElement(&quot;student&quot;)\r\n    // create child elements and add to student element\r\n    val nameElement = doc.createElement(&quot;name&quot;)\r\n    val firstElement = doc.createElement(&quot;first&quot;)\r\n    firstElement.textContent = firstName\r\n    val lastElement = doc.createElement(&quot;last&quot;)\r\n    lastElement.textContent = lastName\r\n    nameElement.appendChild(firstElement)\r\n    nameElement.appendChild(lastElement)\r\n    student.appendChild(nameElement)\r\n    return student\r\n}\r\n```\r\nout.xml:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\r\n&lt;class&gt;\r\n  \r\n  &lt;student&gt;\r\n      \r\n    &lt;name&gt;\r\n          \r\n      &lt;first&gt;John&lt;/first&gt;\r\n          \r\n      &lt;last&gt;Doe&lt;/last&gt;\r\n        \r\n    &lt;/name&gt;\r\n    \r\n  &lt;/student&gt;\r\n  \r\n  &lt;student&gt;\r\n    &lt;name&gt;\r\n      &lt;first&gt;Jane&lt;/first&gt;\r\n      &lt;last&gt;Doe&lt;/last&gt;\r\n    &lt;/name&gt;\r\n  &lt;/student&gt;\r\n&lt;/class&gt;\r\n```\r\nhow can I get rid of these new lines that are produced when running my code. They appear only in student elements that already existed before appending the new student","title":"XML output in Kotlin remove unnecessary new lines","body":"<p>When appending new student to class I get unnecessary new lines inside existing student tags. How can I solve the issue so that formatting remains the same?</p>\n<p>class.xml:</p>\n<pre><code>&lt;class&gt;\n&lt;student&gt;\n  &lt;name&gt;\n    &lt;first&gt;John&lt;/first&gt;\n    &lt;last&gt;Doe&lt;/last&gt;\n  &lt;/name&gt;\n&lt;/student&gt;\n&lt;/class&gt;\n</code></pre>\n<p>my code:</p>\n<pre><code>import java.io.File\nimport javax.xml.parsers.DocumentBuilderFactory\nimport javax.xml.transform.OutputKeys\nimport javax.xml.transform.TransformerFactory\nimport javax.xml.transform.dom.DOMSource\nimport javax.xml.transform.stream.StreamResult\n\nfun main() {\n    val filename = &quot;class.xml&quot;\n    // load the XML file into a Document object using the same DocumentBuilder instance\n    val dbFactory = DocumentBuilderFactory.newInstance()\n    val dBuilder = dbFactory.newDocumentBuilder()\n    val doc = dBuilder.parse(File(filename))\n    // create a new student element using the same DocumentBuilder instance\n    val newStudent = createStudent(doc, &quot;Jane&quot;, &quot;Doe&quot;)\n    // get the root element\n    val root = doc.documentElement\n    // append the new student element to the class element\n    root.appendChild(newStudent)\n    // write the modified Document object back to the XML file\n    val transformerFactory = TransformerFactory.newInstance()\n    val transformer = transformerFactory.newTransformer()\n    transformer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;)\n    transformer.setOutputProperty(&quot;{http://xml.apache.org/xslt}indent-amount&quot;, &quot;2&quot;)\n    val source = DOMSource(doc)\n    val result = StreamResult(File(&quot;out.xml&quot;))\n    transformer.transform(source, result)\n}\n\nfun createStudent(doc: org.w3c.dom.Document, firstName: String, lastName: String): org.w3c.dom.Element {\n    // create student element using the provided Document object\n    val student = doc.createElement(&quot;student&quot;)\n    // create child elements and add to student element\n    val nameElement = doc.createElement(&quot;name&quot;)\n    val firstElement = doc.createElement(&quot;first&quot;)\n    firstElement.textContent = firstName\n    val lastElement = doc.createElement(&quot;last&quot;)\n    lastElement.textContent = lastName\n    nameElement.appendChild(firstElement)\n    nameElement.appendChild(lastElement)\n    student.appendChild(nameElement)\n    return student\n}\n</code></pre>\n<p>out.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\n&lt;class&gt;\n  \n  &lt;student&gt;\n      \n    &lt;name&gt;\n          \n      &lt;first&gt;John&lt;/first&gt;\n          \n      &lt;last&gt;Doe&lt;/last&gt;\n        \n    &lt;/name&gt;\n    \n  &lt;/student&gt;\n  \n  &lt;student&gt;\n    &lt;name&gt;\n      &lt;first&gt;Jane&lt;/first&gt;\n      &lt;last&gt;Doe&lt;/last&gt;\n    &lt;/name&gt;\n  &lt;/student&gt;\n&lt;/class&gt;\n</code></pre>\n<p>how can I get rid of these new lines that are produced when running my code. They appear only in student elements that already existed before appending the new student</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":3084600,"reputation":5860,"user_id":2612030,"display_name":"ewramner"},"score":0,"creation_date":1680086440,"post_id":75875685,"comment_id":133836319,"body_markdown":"Most likely &quot;java.version&quot; is a reserved property set by Maven. Call your own property something else.","body":"Most likely &quot;java.version&quot; is a reserved property set by Maven. Call your own property something else."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1680123412,"post_id":75875685,"comment_id":133846360,"body_markdown":"Why is there a profile in a `settings.xml` does not belong there nor makes it sense... also using `&lt;maven.compiler.release&gt;11&lt;/maven.compiler.release&gt;` instead of target/source etc. starting from JDK9+...","body":"Why is there a profile in a <code>settings.xml</code> does not belong there nor makes it sense... also using <code>&lt;maven.compiler.release&gt;11&lt;&#47;maven.compiler.release&gt;</code> instead of target/source etc. starting from JDK9+..."}],"owner":{"account_id":2423257,"reputation":81,"user_id":2115763,"display_name":"user2115763"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680083766,"creation_date":1680083766,"question_id":75875685,"body_markdown":"there are some properties in my pom.xml:\r\n```\r\n&lt;properties&gt;\r\n        &lt;java.version&gt;11&lt;/java.version&gt;\r\n        &lt;maven.compiler.source&gt;${java.version}&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;${java.version}&lt;/maven.compiler.target&gt;\r\n        &lt;maven.compiler.compilerVersion&gt;${java.version}&lt;/maven.compiler.compilerVersion&gt;\r\n&lt;/properties&gt;\r\n```\r\n\r\nbut when I check the effective-pom, I found they became:\r\n```\r\n    &lt;maven.compiler.compilerVersion&gt;11.0.2&lt;/maven.compiler.compilerVersion&gt;\r\n    &lt;maven.compiler.source&gt;11.0.2&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;11.0.2&lt;/maven.compiler.target&gt;\r\n```\r\n(my JDK version is 11.0.2.)\r\n\r\nbut my question is, why they became to &#39;11.0.2&#39; while I&#39;ve already let them be 11 manually?\r\n\r\n(and it will cause error when mvn compile: &quot;Error: Java: invalid target release: 11.0.2&quot;(translation from the CN message, I&#39;am not sure whether it&#39;s the same with the really En message))\r\n\r\nthe new info found after post this question 30 min: these property values are overrided by a actived profiler in settings.xml with the same name:\r\n```\r\n&lt;profile&gt;\r\n    &lt;id&gt;java11&lt;/id&gt;\r\n    &lt;activation&gt;\r\n        &lt;jdk&gt;11&lt;/jdk&gt;\r\n    &lt;/activation&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;11&lt;/java.version&gt;\r\n        &lt;maven.compiler.source&gt;${java.version}&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;${java.version}&lt;/maven.compiler.target&gt;\r\n        &lt;maven.compiler.compilerVersion&gt;${java.version}&lt;/maven.compiler.compilerVersion&gt;\r\n    &lt;/properties&gt;\r\n&lt;/profile&gt;\r\n```\r\n\r\nbut the question is the same: since the value of &lt;java.version&gt; in the settings.xml is also &#39;11&#39;, why when inlining to the maven.compiler.... properties, it became to &#39;11.0.2&#39;?(there is no &#39;11.0.2&#39; appearence in any places)","title":"maven.compiler.target in pom.xml not working","body":"<p>there are some properties in my pom.xml:</p>\n<pre><code>&lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n        &lt;maven.compiler.source&gt;${java.version}&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;${java.version}&lt;/maven.compiler.target&gt;\n        &lt;maven.compiler.compilerVersion&gt;${java.version}&lt;/maven.compiler.compilerVersion&gt;\n&lt;/properties&gt;\n</code></pre>\n<p>but when I check the effective-pom, I found they became:</p>\n<pre><code>    &lt;maven.compiler.compilerVersion&gt;11.0.2&lt;/maven.compiler.compilerVersion&gt;\n    &lt;maven.compiler.source&gt;11.0.2&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;11.0.2&lt;/maven.compiler.target&gt;\n</code></pre>\n<p>(my JDK version is 11.0.2.)</p>\n<p>but my question is, why they became to '11.0.2' while I've already let them be 11 manually?</p>\n<p>(and it will cause error when mvn compile: &quot;Error: Java: invalid target release: 11.0.2&quot;(translation from the CN message, I'am not sure whether it's the same with the really En message))</p>\n<p>the new info found after post this question 30 min: these property values are overrided by a actived profiler in settings.xml with the same name:</p>\n<pre><code>&lt;profile&gt;\n    &lt;id&gt;java11&lt;/id&gt;\n    &lt;activation&gt;\n        &lt;jdk&gt;11&lt;/jdk&gt;\n    &lt;/activation&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n        &lt;maven.compiler.source&gt;${java.version}&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;${java.version}&lt;/maven.compiler.target&gt;\n        &lt;maven.compiler.compilerVersion&gt;${java.version}&lt;/maven.compiler.compilerVersion&gt;\n    &lt;/properties&gt;\n&lt;/profile&gt;\n</code></pre>\n<p>but the question is the same: since the value of &lt;java.version&gt; in the settings.xml is also '11', why when inlining to the maven.compiler.... properties, it became to '11.0.2'?(there is no '11.0.2' appearence in any places)</p>\n"},{"tags":["java","voip","cisco","jtapi","cisco-jtapi"],"answers":[{"tags":[],"owner":{"account_id":9165397,"reputation":361,"user_id":6815236,"display_name":"David Staudt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680028943,"creation_date":1680028943,"answer_id":75869940,"question_id":75798233,"body_markdown":"In general you should enable and handle the [CiscoRTPInputStartedEv][1], which will indicate the new IP:Port where the hold media will be coming from.\r\n\r\n\r\n  [1]: https://www.cisco.com/c/en/us/td/docs/voice_ip_comm/cucm/jtapi_dev/14_0_1/cucm_b_cisco-unified-jtapi-developers-guide-14/cucm_b_cisco-unified-jtapi-developers-guide-1251_chapter_0101.html#CUCM_RF_C2425FA7_00","title":"Getting RTP ports of the held call after using consult","body":"<p>In general you should enable and handle the <a href=\"https://www.cisco.com/c/en/us/td/docs/voice_ip_comm/cucm/jtapi_dev/14_0_1/cucm_b_cisco-unified-jtapi-developers-guide-14/cucm_b_cisco-unified-jtapi-developers-guide-1251_chapter_0101.html#CUCM_RF_C2425FA7_00\" rel=\"nofollow noreferrer\">CiscoRTPInputStartedEv</a>, which will indicate the new IP:Port where the hold media will be coming from.</p>\n"}],"owner":{"account_id":25839069,"reputation":21,"user_id":19574955,"display_name":"Amit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1680082935,"creation_date":1679382777,"question_id":75798233,"body_markdown":"I am using call consult in my script:\r\n\r\n    dialoutCall = (CiscoCall) provider.createCall();\r\n    TerminalConnection terminalConnection = ctipTerminal.getTerminalConnections()[0];\r\n    dialoutCall.consult(terminalConnection,dialToNum);\r\n\r\nwhen using consult the other existing call state is changed to hold and the RTP ports are being changed, is it possible to obtain the RTP ports of the call that is on hold state?\r\n\r\nThe events I get after using consult:\r\n\r\n    Received--&gt; Call/CiscoTermConnSelectChangedEv CTI_1\r\n    Received--&gt; Terminal/CiscoRTPInputStoppedEv\r\n    Received--&gt; Terminal/CiscoRTPOutputStoppedEv\r\n    Received--&gt; Call/CallCtlTermConnHeldEv CTI_1\r\n    Received--&gt; Call/ConsultCallActive\r\n    Received--&gt; Call/ConnCreatedEv 6050:CampusPT:1\r\n    Received--&gt; Call/ConnConnectedEv 6050:CampusPT:1\r\n    Received--&gt; Call/CallCtlConnInitiatedEv 6050:CampusPT:1\r\n    Received--&gt; Call/TermConnCreatedEv CTI_1\r\n    Received--&gt; Call/TermConnActiveEv CTI_1\r\n    Received--&gt; Call/CallCtlTermConnTalkingEv CTI_1\r\n    Received--&gt; Call/CallCtlConnDialingEv 6050:CampusPT:1\r\n    Received--&gt; Call/CallCtlConnEstablishedEv 6050:CampusPT:1\r\n    Received--&gt; Call/ConnInProgressEv 6001:CampusPT:1\r\n    Received--&gt; Call/CallCtlConnOfferedEv 6001:CampusPT:1\r\n    Received--&gt; Call/ConnAlertingEv 6001:CampusPT:1\r\n    Received--&gt; Call/CallCtlConnAlertingEv 6001:CampusPT:1\r\n    ","title":"Getting RTP ports of the held call after using consult","body":"<p>I am using call consult in my script:</p>\n<pre><code>dialoutCall = (CiscoCall) provider.createCall();\nTerminalConnection terminalConnection = ctipTerminal.getTerminalConnections()[0];\ndialoutCall.consult(terminalConnection,dialToNum);\n</code></pre>\n<p>when using consult the other existing call state is changed to hold and the RTP ports are being changed, is it possible to obtain the RTP ports of the call that is on hold state?</p>\n<p>The events I get after using consult:</p>\n<pre><code>Received--&gt; Call/CiscoTermConnSelectChangedEv CTI_1\nReceived--&gt; Terminal/CiscoRTPInputStoppedEv\nReceived--&gt; Terminal/CiscoRTPOutputStoppedEv\nReceived--&gt; Call/CallCtlTermConnHeldEv CTI_1\nReceived--&gt; Call/ConsultCallActive\nReceived--&gt; Call/ConnCreatedEv 6050:CampusPT:1\nReceived--&gt; Call/ConnConnectedEv 6050:CampusPT:1\nReceived--&gt; Call/CallCtlConnInitiatedEv 6050:CampusPT:1\nReceived--&gt; Call/TermConnCreatedEv CTI_1\nReceived--&gt; Call/TermConnActiveEv CTI_1\nReceived--&gt; Call/CallCtlTermConnTalkingEv CTI_1\nReceived--&gt; Call/CallCtlConnDialingEv 6050:CampusPT:1\nReceived--&gt; Call/CallCtlConnEstablishedEv 6050:CampusPT:1\nReceived--&gt; Call/ConnInProgressEv 6001:CampusPT:1\nReceived--&gt; Call/CallCtlConnOfferedEv 6001:CampusPT:1\nReceived--&gt; Call/ConnAlertingEv 6001:CampusPT:1\nReceived--&gt; Call/CallCtlConnAlertingEv 6001:CampusPT:1\n</code></pre>\n"},{"tags":["java","iterator"],"comments":[{"owner":{"account_id":7273299,"reputation":11,"user_id":5545516,"display_name":"xzhou"},"score":0,"creation_date":1680080481,"post_id":75875106,"comment_id":133834844,"body_markdown":"As I ListIterator cannot write backward, and if your List Item is complex enough, ListIterator cannot even read backward.","body":"As I ListIterator cannot write backward, and if your List Item is complex enough, ListIterator cannot even read backward."},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1680080702,"post_id":75875106,"comment_id":133834907,"body_markdown":"Anyway, stepping through it with a debugger, `String previousElement = iterator.previous();` has a value of C which causes the following if statement to evaluate to false","body":"Anyway, stepping through it with a debugger, <code>String previousElement = iterator.previous();</code> has a value of C which causes the following if statement to evaluate to false"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1680081078,"post_id":75875106,"comment_id":133835011,"body_markdown":"what you should do is add in an extra iterator.previous() before your String previousElement and iterator.next() before iterator.remove().","body":"what you should do is add in an extra iterator.previous() before your String previousElement and iterator.next() before iterator.remove()."}],"answers":[{"tags":[],"owner":{"account_id":15999524,"reputation":178,"user_id":11546605,"display_name":"Dominik21"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1680081605,"creation_date":1680081141,"answer_id":75875253,"question_id":75875106,"body_markdown":"  The iterator keeps 2 indexes. see private class java.util.ArrayList.Itr\r\n\r\n    int cursor;       // index of next element to return\r\n    int lastRet = -1; // index of last element returned; -1 if no such\r\n\r\nAfter your condition `if (element.equals(&quot;C&quot;))` has passed, the `cursor` is equal to 3, because that would be next element even though, there isn&#39;t 3rd element in that list. So by calling `iterator.hasPrevious()`, you are actually refering to index `cursor-1`, which is 2 and that is letter &quot;C&quot;.\r\nThen, when you called `iterator.previous()`, it actually returned element on index 2, which again is letter &quot;C&quot;.\r\nSo in the end, you basically rewritten index 2 and then removed it&#39;s value.\r\n\r\nTo better understand what is going on, go over source code of ListIterator, it is kinda easy to understand, just go loop by loop and write down values if it helps.","title":"Java change List item with ListIterator error","body":"<p>The iterator keeps 2 indexes. see private class java.util.ArrayList.Itr</p>\n<pre><code>int cursor;       // index of next element to return\nint lastRet = -1; // index of last element returned; -1 if no such\n</code></pre>\n<p>After your condition <code>if (element.equals(&quot;C&quot;))</code> has passed, the <code>cursor</code> is equal to 3, because that would be next element even though, there isn't 3rd element in that list. So by calling <code>iterator.hasPrevious()</code>, you are actually refering to index <code>cursor-1</code>, which is 2 and that is letter &quot;C&quot;.\nThen, when you called <code>iterator.previous()</code>, it actually returned element on index 2, which again is letter &quot;C&quot;.\nSo in the end, you basically rewritten index 2 and then removed it's value.</p>\n<p>To better understand what is going on, go over source code of ListIterator, it is kinda easy to understand, just go loop by loop and write down values if it helps.</p>\n"},{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1680081596,"creation_date":1680081229,"answer_id":75875267,"question_id":75875106,"body_markdown":"If you call `next`, and then `previous`, the list iterator will not have moved at all, and both calls will return the same element. You are just moving one position forward and then one backward, right?\r\n\r\nTherefore, in this part of the code:\r\n\r\n    if (element.equals(&quot;C&quot;)) {\r\n        if (iterator.hasPrevious()) {\r\n            String previousElement = iterator.previous();\r\n            if (previousElement.equals(&quot;B&quot;)) {\r\n\r\nThe `previous` call will return the same thing as the `next` call on the first line, so `previousElement` will always be equal to `element`. Since `element` is &quot;C&quot;, it can&#39;t be &quot;B&quot;, and the innermost if statement will never be run.\r\n\r\nYou should call `previous` and extra time\r\n\r\n    if (element.equals(&quot;C&quot;)) {\r\n        iterator.previous(); // &lt;--- here!\r\n        if (iterator.hasPrevious()) {\r\n            String previousElement = iterator.previous();\r\n            if (previousElement.equals(&quot;B&quot;)) {\r\n\r\nThis is always safe to call because you just called `next` 2 lines before. Going back is always safe, since you are just going back to where you came from.\r\n\r\nSimilarly, after the `if (previousElement.equals(&quot;B&quot;))` statement, you also need to call `next` an extra time:\r\n\r\n    }\r\n    iterator.next();\r\n    iterator.next();\r\n    iterator.remove();\r\n\r\nBy counting the number of times `next` and `previous` called before this point, you can see that both of these `next`s are safe.\r\n\r\nNote that this would end up in an infinite loop if the list starts with &quot;C&quot;. You can call `next` in the `else` block of `if (iterator.hasPrevious())` to prevent this.","title":"Java change List item with ListIterator error","body":"<p>If you call <code>next</code>, and then <code>previous</code>, the list iterator will not have moved at all, and both calls will return the same element. You are just moving one position forward and then one backward, right?</p>\n<p>Therefore, in this part of the code:</p>\n<pre><code>if (element.equals(&quot;C&quot;)) {\n    if (iterator.hasPrevious()) {\n        String previousElement = iterator.previous();\n        if (previousElement.equals(&quot;B&quot;)) {\n</code></pre>\n<p>The <code>previous</code> call will return the same thing as the <code>next</code> call on the first line, so <code>previousElement</code> will always be equal to <code>element</code>. Since <code>element</code> is &quot;C&quot;, it can't be &quot;B&quot;, and the innermost if statement will never be run.</p>\n<p>You should call <code>previous</code> and extra time</p>\n<pre><code>if (element.equals(&quot;C&quot;)) {\n    iterator.previous(); // &lt;--- here!\n    if (iterator.hasPrevious()) {\n        String previousElement = iterator.previous();\n        if (previousElement.equals(&quot;B&quot;)) {\n</code></pre>\n<p>This is always safe to call because you just called <code>next</code> 2 lines before. Going back is always safe, since you are just going back to where you came from.</p>\n<p>Similarly, after the <code>if (previousElement.equals(&quot;B&quot;))</code> statement, you also need to call <code>next</code> an extra time:</p>\n<pre><code>}\niterator.next();\niterator.next();\niterator.remove();\n</code></pre>\n<p>By counting the number of times <code>next</code> and <code>previous</code> called before this point, you can see that both of these <code>next</code>s are safe.</p>\n<p>Note that this would end up in an infinite loop if the list starts with &quot;C&quot;. You can call <code>next</code> in the <code>else</code> block of <code>if (iterator.hasPrevious())</code> to prevent this.</p>\n"},{"tags":[],"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680082630,"creation_date":1680081844,"answer_id":75875370,"question_id":75875106,"body_markdown":"nb: Not quite sure what you are doing with the sequence.\r\n\r\n\r\n   \r\n\r\n     int count=0;\r\n            while (iterator.hasNext()){\r\n            \r\n            String element = iterator.next();\r\n                        if (element.equals(&quot;C&quot;)) {\r\n                            if (iterator.hasPrevious()) {\r\n                                String previousElement = iterator.previous();\r\n                                if (previousElement.equals(&quot;B&quot;)) {\r\n                list.set((count-1),&quot;BC&quot;);\r\n    count-=1;\r\n                                }\r\n          iterator.next(); // not sure what&#39;s happening in the sequence with this\r\n                                iterator.remove();\r\n            count++;\r\n            }\r\n\r\n\r\nIt may be better to search with list.indexOf  or list.lastIndexOf , list.size , list.get","title":"Java change List item with ListIterator error","body":"<p>nb: Not quite sure what you are doing with the sequence.</p>\n<pre><code> int count=0;\n        while (iterator.hasNext()){\n        \n        String element = iterator.next();\n                    if (element.equals(&quot;C&quot;)) {\n                        if (iterator.hasPrevious()) {\n                            String previousElement = iterator.previous();\n                            if (previousElement.equals(&quot;B&quot;)) {\n            list.set((count-1),&quot;BC&quot;);\ncount-=1;\n                            }\n      iterator.next(); // not sure what's happening in the sequence with this\n                            iterator.remove();\n        count++;\n        }\n</code></pre>\n<p>It may be better to search with list.indexOf  or list.lastIndexOf , list.size , list.get</p>\n"}],"owner":{"account_id":7273299,"reputation":11,"user_id":5545516,"display_name":"xzhou"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1680082630,"creation_date":1680080311,"question_id":75875106,"body_markdown":"trying to modify a List under some condition with ListIterator, could anyone help me out?\r\n\r\n```\r\nimport java.util.List;\r\nimport java.util.ArrayList;\r\nimport java.util.ListIterator;\r\n\r\npublic class TestIterator {\r\n    public static void main(String[] args){\r\n        List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n        list.add(&quot;A&quot;);\r\n        list.add(&quot;B&quot;);\r\n        list.add(&quot;C&quot;);\r\n        System.out.println(&quot;List before modification: &quot; + list);\r\n        ListIterator&lt;String&gt; iterator = list.listIterator();\r\n        while (iterator.hasNext()) {\r\n            String element = iterator.next();\r\n            if (element.equals(&quot;C&quot;)) {\r\n                if (iterator.hasPrevious()) {\r\n                    String previousElement = iterator.previous();\r\n                    if (previousElement.equals(&quot;B&quot;)) {\r\n                        iterator.set(&quot;BC&quot;);\r\n                    }\r\n                    iterator.next();\r\n                    iterator.remove();\r\n                }\r\n            }\r\n        }\r\n        System.out.println(&quot;List before modification: &quot; + list);\r\n    }\r\n}\r\n```\r\n\r\nexpected output is:\r\nList before modification: [A, B, C]\r\nList after modification: [A, BC]\r\n\r\nreal output is:\r\nList before modification: [A, B, C]\r\nList before modification: [A, B]\r\n","title":"Java change List item with ListIterator error","body":"<p>trying to modify a List under some condition with ListIterator, could anyone help me out?</p>\n<pre><code>import java.util.List;\nimport java.util.ArrayList;\nimport java.util.ListIterator;\n\npublic class TestIterator {\n    public static void main(String[] args){\n        List&lt;String&gt; list = new ArrayList&lt;&gt;();\n        list.add(&quot;A&quot;);\n        list.add(&quot;B&quot;);\n        list.add(&quot;C&quot;);\n        System.out.println(&quot;List before modification: &quot; + list);\n        ListIterator&lt;String&gt; iterator = list.listIterator();\n        while (iterator.hasNext()) {\n            String element = iterator.next();\n            if (element.equals(&quot;C&quot;)) {\n                if (iterator.hasPrevious()) {\n                    String previousElement = iterator.previous();\n                    if (previousElement.equals(&quot;B&quot;)) {\n                        iterator.set(&quot;BC&quot;);\n                    }\n                    iterator.next();\n                    iterator.remove();\n                }\n            }\n        }\n        System.out.println(&quot;List before modification: &quot; + list);\n    }\n}\n</code></pre>\n<p>expected output is:\nList before modification: [A, B, C]\nList after modification: [A, BC]</p>\n<p>real output is:\nList before modification: [A, B, C]\nList before modification: [A, B]</p>\n"},{"tags":["java","android","firebase-storage"],"owner":{"account_id":27355989,"reputation":43,"user_id":20864367,"display_name":"Surya Pratap Raj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680082595,"creation_date":1680082212,"question_id":75875435,"body_markdown":"I am trying to download an audio file from firebase storage to an specific folder of local device storage with the code written below getting an exception as mentioned.\r\n\r\n    storageReference.child(audioName).getFile(destinationFile)\r\n        .addOnCompleteListener(new OnCompleteListener&lt;FileDownloadTask.TaskSnapshot&gt;() {\r\n            @Override\r\n            public void onComplete(@NonNull Task&lt;FileDownloadTask.TaskSnapshot&gt; task) {\r\n                if (task.isSuccessful()) {\r\n                    Toast.makeText(context, &quot;audio downloaded&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n        })\r\n        .addOnProgressListener(new OnProgressListener&lt;FileDownloadTask.TaskSnapshot&gt;() {\r\n            @Override\r\n            public void onProgress(@NonNull FileDownloadTask.TaskSnapshot snapshot) {\r\n                holder.textFileSize.setText(&quot;Downloading...\\n&quot; + snapshot.getBytesTransferred() + &quot; / &quot; + snapshot.getTotalByteCount());\r\n\r\n            }\r\n        })\r\n        .addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Toast.makeText(context, e.getMessage(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        });`\r\n    \r\n    Help me resolve this issue.","title":"Firebase storage : An error occurred, please check the HTTP result code and inner exception for server response","body":"<p>I am trying to download an audio file from firebase storage to an specific folder of local device storage with the code written below getting an exception as mentioned.</p>\n<pre><code>storageReference.child(audioName).getFile(destinationFile)\n    .addOnCompleteListener(new OnCompleteListener&lt;FileDownloadTask.TaskSnapshot&gt;() {\n        @Override\n        public void onComplete(@NonNull Task&lt;FileDownloadTask.TaskSnapshot&gt; task) {\n            if (task.isSuccessful()) {\n                Toast.makeText(context, &quot;audio downloaded&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n    })\n    .addOnProgressListener(new OnProgressListener&lt;FileDownloadTask.TaskSnapshot&gt;() {\n        @Override\n        public void onProgress(@NonNull FileDownloadTask.TaskSnapshot snapshot) {\n            holder.textFileSize.setText(&quot;Downloading...\\n&quot; + snapshot.getBytesTransferred() + &quot; / &quot; + snapshot.getTotalByteCount());\n\n        }\n    })\n    .addOnFailureListener(new OnFailureListener() {\n        @Override\n        public void onFailure(@NonNull Exception e) {\n            Toast.makeText(context, e.getMessage(), Toast.LENGTH_SHORT).show();\n        }\n    });`\n\nHelp me resolve this issue.\n</code></pre>\n"},{"tags":["java","utf-8","java.util.scanner"],"comments":[{"owner":{"account_id":8326,"reputation":258545,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":1,"creation_date":1466502441,"post_id":37940919,"comment_id":63330833,"body_markdown":"The variable probably stores the correct values, but they cannot be printed/displayed in your environment. How do you output the String?","body":"The variable probably stores the correct values, but they cannot be printed/displayed in your environment. How do you output the String?"},{"owner":{"account_id":957028,"reputation":15133,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"score":4,"creation_date":1466502455,"post_id":37940919,"comment_id":63330844,"body_markdown":"Are **sure** it is rubbish? Some Fonts simply don&#39;t have the code points to be rendered a character, thus replacing with &quot;?&quot;.","body":"Are <b>sure</b> it is rubbish? Some Fonts simply don&#39;t have the code points to be rendered a character, thus replacing with &quot;?&quot;."},{"owner":{"account_id":7233560,"reputation":203,"user_id":5519581,"accept_rate":25,"display_name":"Lance"},"score":0,"creation_date":1466502707,"post_id":37940919,"comment_id":63331025,"body_markdown":"Did println and it goes out ?&#225;rka with the iso verision trying for caps utf-8","body":"Did println and it goes out ?&#225;rka with the iso verision trying for caps utf-8"},{"owner":{"account_id":7233560,"reputation":203,"user_id":5519581,"accept_rate":25,"display_name":"Lance"},"score":1,"creation_date":1466502757,"post_id":37940919,"comment_id":63331070,"body_markdown":"Nope UTF-8 not working either","body":"Nope UTF-8 not working either"},{"owner":{"account_id":7233560,"reputation":203,"user_id":5519581,"accept_rate":25,"display_name":"Lance"},"score":0,"creation_date":1466503394,"post_id":37940919,"comment_id":63331507,"body_markdown":"the output is written on screen by system.out.println and also into the file using buffered output stream","body":"the output is written on screen by system.out.println and also into the file using buffered output stream"}],"answers":[{"tags":[],"owner":{"account_id":8183029,"reputation":27,"user_id":6159571,"accept_rate":0,"display_name":"checkerchief"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1466503401,"creation_date":1466502392,"answer_id":37940968,"question_id":37940919,"body_markdown":"I would suggest you to try\r\n\r\n    Scanner input= new Scanner(System.in, &quot;ISO-8859-1&quot;);\r\n\r\nEDIT:\r\nAs you said some characters are still not working consider trying:\r\n\r\n    Scanner input= new Scanner(System.in, &quot;ISO-8859-2&quot;);\r\n\r\n&quot;ISO-8859-2&quot; suprorts Czech [Check this for more information][1]\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/ISO/IEC_8859-2","title":"Scan input with UTF-8 in Java","body":"<p>I would suggest you to try</p>\n\n<pre><code>Scanner input= new Scanner(System.in, \"ISO-8859-1\");\n</code></pre>\n\n<p>EDIT:\nAs you said some characters are still not working consider trying:</p>\n\n<pre><code>Scanner input= new Scanner(System.in, \"ISO-8859-2\");\n</code></pre>\n\n<p>\"ISO-8859-2\" suprorts Czech <a href=\"https://en.wikipedia.org/wiki/ISO/IEC_8859-2\" rel=\"nofollow\">Check this for more information</a></p>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1466502861,"creation_date":1466502861,"answer_id":37941146,"question_id":37940919,"body_markdown":"Use `new Scanner(System.in)`. This uses the default operating system&#39;s encoding, the same as System.in uses. The String (as always) contains the Unicode version, which you then may write to a file using\r\n\r\n    new OutputStreamWriter(new FileOutputStream(...), &quot;UTF-8&quot;)\r\n\r\nor other (simpler) methods.","title":"Scan input with UTF-8 in Java","body":"<p>Use <code>new Scanner(System.in)</code>. This uses the default operating system's encoding, the same as System.in uses. The String (as always) contains the Unicode version, which you then may write to a file using</p>\n\n<pre><code>new OutputStreamWriter(new FileOutputStream(...), \"UTF-8\")\n</code></pre>\n\n<p>or other (simpler) methods.</p>\n"},{"tags":[],"owner":{"account_id":6140444,"reputation":3472,"user_id":4788022,"display_name":"JJPandari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679673953,"creation_date":1466503291,"answer_id":37941315,"question_id":37940919,"body_markdown":"*This should be a comment but sadly I don&#39;t have that privilege yet.*  \r\n\r\nWhen debugging (by outputing some text to a file, browser, or just watch them in an IDE), don&#39;t rush to say &quot;it&#39;s not working because I get ? characters here&quot;.  \r\n\r\nMaybe it&#39;s just your IDE/system that can&#39;t display those utf-8 chars.  \r\n\r\nTo be really sure, you can copy the outputted text from file/browser/debugger, then paste it to Notepad++ (or some other editor that has a hex editor), then use `view in hex`, if you see `0xefbfbd` (utf-8&#39;s &quot;can&#39;t decode this&quot; code), then it&#39;s broken. Otherwise everything&#39;s fine.","title":"Scan input with UTF-8 in Java","body":"<p><em>This should be a comment but sadly I don't have that privilege yet.</em></p>\n<p>When debugging (by outputing some text to a file, browser, or just watch them in an IDE), don't rush to say &quot;it's not working because I get ? characters here&quot;.</p>\n<p>Maybe it's just your IDE/system that can't display those utf-8 chars.</p>\n<p>To be really sure, you can copy the outputted text from file/browser/debugger, then paste it to Notepad++ (or some other editor that has a hex editor), then use <code>view in hex</code>, if you see <code>0xefbfbd</code> (utf-8's &quot;can't decode this&quot; code), then it's broken. Otherwise everything's fine.</p>\n"}],"owner":{"account_id":7233560,"reputation":203,"user_id":5519581,"accept_rate":25,"display_name":"Lance"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3771,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":37941146,"answer_count":3,"score":1,"last_activity_date":1680082595,"creation_date":1466502279,"question_id":37940919,"body_markdown":"I am trying to find a way to get values actually typed into a variable so I can output them into a file.  \r\nThe problem is that the scanner doesn&#39;t recognize the Czech letters such as &quot;ř ; &#225; ; ž ; š&quot; etc.  \r\nHere is the code sample:\r\n\r\n    String jmeno;\r\n    Scanner input= new Scanner(System.in, &quot;utf-8&quot;);\r\n    jmeno = input.next();\r\nWhat I type:\r\n\r\n&gt; Š&#225;rka\r\n\r\nWhat is stored in variable jm&#233;no:\r\n\r\n&gt; ??rka\r\n\r\nThe &quot;?&quot; represent junk characters, with the question marks in black boxes.  \r\nHow should I adjust the code, so that the letters are recieved correctly by the variable?\r\n\r\nAlso the computer I am using has EN(US) system encoding.","title":"Scan input with UTF-8 in Java","body":"<p>I am trying to find a way to get values actually typed into a variable so I can output them into a file.<br />\nThe problem is that the scanner doesn't recognize the Czech letters such as &quot;ř ; á ; ž ; š&quot; etc.<br />\nHere is the code sample:</p>\n<pre><code>String jmeno;\nScanner input= new Scanner(System.in, &quot;utf-8&quot;);\njmeno = input.next();\n</code></pre>\n<p>What I type:</p>\n<blockquote>\n<p>Šárka</p>\n</blockquote>\n<p>What is stored in variable jméno:</p>\n<blockquote>\n<p>??rka</p>\n</blockquote>\n<p>The &quot;?&quot; represent junk characters, with the question marks in black boxes.<br />\nHow should I adjust the code, so that the letters are recieved correctly by the variable?</p>\n<p>Also the computer I am using has EN(US) system encoding.</p>\n"},{"tags":["java","spring-boot","rabbitmq"],"comments":[{"owner":{"account_id":16539707,"reputation":955,"user_id":11961036,"display_name":"Marco Frag Delle Monache"},"score":0,"creation_date":1680081997,"post_id":75875327,"comment_id":133835248,"body_markdown":"Please, check that you set up enough Memory to your java application..","body":"Please, check that you set up enough Memory to your java application.."},{"owner":{"account_id":13327812,"reputation":50,"user_id":9620228,"display_name":"H.Khadem"},"score":2,"creation_date":1680082354,"post_id":75875327,"comment_id":133835341,"body_markdown":"I have monitored both java applications and rabbimq memory and CPU usages, they do not have memory or CPU shortages.","body":"I have monitored both java applications and rabbimq memory and CPU usages, they do not have memory or CPU shortages."},{"owner":{"account_id":271537,"reputation":489,"user_id":562122,"display_name":"Justin N"},"score":0,"creation_date":1680098281,"post_id":75875327,"comment_id":133839723,"body_markdown":"`deleteQueueIfEmpty()` gives me pause.  If you happen to delete a queue that has a listener attached, would it not also then remove that listener?  Does every instance of BaseConsumer have a one-to-one relationship with the queue it&#39;s listening on?","body":"<code>deleteQueueIfEmpty()</code> gives me pause.  If you happen to delete a queue that has a listener attached, would it not also then remove that listener?  Does every instance of BaseConsumer have a one-to-one relationship with the queue it&#39;s listening on?"},{"owner":{"account_id":13327812,"reputation":50,"user_id":9620228,"display_name":"H.Khadem"},"score":0,"creation_date":1680722145,"post_id":75875327,"comment_id":133948211,"body_markdown":"for each instance of our application, every instance of BaseConsumer has a one-to-one relationship with the queue it&#39;s listening on. even if the queue is deleted and the listeners removed, new listeners will be added with the new instances of the application going online. I hope I understood your question correctly. if not let me know so I can explain more","body":"for each instance of our application, every instance of BaseConsumer has a one-to-one relationship with the queue it&#39;s listening on. even if the queue is deleted and the listeners removed, new listeners will be added with the new instances of the application going online. I hope I understood your question correctly. if not let me know so I can explain more"}],"owner":{"account_id":13327812,"reputation":50,"user_id":9620228,"display_name":"H.Khadem"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":220,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1680082388,"creation_date":1680081623,"question_id":75875327,"body_markdown":"I am using rabbitmq in a microservice environment, and I use it to send messages and events to other services. \r\nmy projects are java spring boot and I am using rabbitmq java client&#39;s latest version. \r\nThe problem is some consumers stop consuming at a random point in time, and the only way to get them going again is to restart the application. I have not been able to find a pattern. here is what I have done and know:\r\n\r\n * some consumers stop working not all of them.\r\n * I have enabled auto-recovery option\r\n * publishers of the same application have no problems.\r\n * This is my rabbitmq client: https://mvnrepository.com/artifact/com.rabbitmq/amqp-client/5.17.0\r\n * I have monitored both java applications and rabbimq memory and CPU usages, they do not have memory or CPU shortages\r\n * I have read the following links and they did not solve my problem: \r\n\r\nhttps://stackoverflow.com/questions/22941644/rabbitmq-surviving-a-consumer-disconnection-using-defaultconsumer\r\n\r\nhttps://stackoverflow.com/questions/49338247/rabbitmq-connect-disconnect-notifications\r\n\r\nhttps://stackoverflow.com/questions/17811786/rabbitmq-disconnect-me-after-some-time\r\n\r\nhttps://stackoverflow.com/questions/38771664/rabbitmq-java-client-stops-consuming-messages\r\n\r\nhttps://stackoverflow.com/questions/48033118/temporarily-stop-consuming-rabbitmq-messages-and-resume-later\r\n\r\nhttps://stackoverflow.com/questions/6732936/rabbitmq-consumer-stops-receiving-messages\r\n\r\nhttps://stackoverflow.com/questions/3284731/rabbitmq-message-consumers-stop-consuming-messages\r\n\r\n\r\n * this is how I have coded my base consumer : \r\n\r\n```java\r\n\r\npublic abstract class BaseConsumer implements Consumer {\r\n    private final Logger log = LoggerFactory.getLogger(BaseConsumer.class);\r\n\r\n    protected Connection connection;\r\n    protected Channel channel;\r\n    protected String exchangeType;\r\n    protected String exchangeName;\r\n    protected String queueName;\r\n    protected String routingKey;\r\n    protected String consumerTag;\r\n    protected String deadLetterExchangeName;\r\n    protected String deadLetterQueueName;\r\n    protected String deadLetterRoutingKey;\r\n    protected boolean autoDelete;\r\n    protected boolean durableQueue;\r\n    protected boolean exclusiveQueue;\r\n    protected boolean requiresConfirm;\r\n\r\n    protected BaseConsumer(Connection connection) {\r\n        this.connection = connection;\r\n        this.requiresConfirm = false;\r\n    }\r\n\r\n    @Override\r\n    public void consume() {\r\n        consumeMessage();\r\n    }\r\n\r\n    protected void consumeMessage() {\r\n        try {\r\n            Channel channel = createChannel();\r\n            declareChannel(channel);\r\n            log.info(String.format(&quot;%s: [*] Waiting for %s. To exit press CTRL+C&quot;, getClassName(), queueName));\r\n            channel.basicConsume(queueName, !requiresConfirm, consumerTag, getConsumer(channel));\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private DefaultConsumer getConsumer(Channel channel) {\r\n        return new DefaultConsumer(channel) {\r\n            @Override\r\n            public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) {\r\n                handleMessageProcess(body, envelope);\r\n            }\r\n        };\r\n    }\r\n\r\n    private void handleMessageProcess(byte[] body, Envelope envelope) {\r\n        String message = new String(body);\r\n        log.info(String.format(&quot;%s: [x] received &#39;%s&#39;&quot;, getClassName(), message));\r\n        long deliveryTag = envelope.getDeliveryTag();\r\n        if (validateMessage(message)) {\r\n            log.info(&quot;validation was Successful&quot;);\r\n            if (requiresConfirm) {\r\n                log.info(&quot;******** handling delivery&quot;);\r\n                try {\r\n                    basicConsume(message);\r\n                    ackMessage(channel, deliveryTag);\r\n                } catch (Exception e) {\r\n                    log.error(String.format(&quot;Consume Failed Moving Message To DLQ. Error Is: \\n%s&quot;, e));\r\n                    nackMessage(channel, deliveryTag);\r\n                }\r\n            } else {\r\n                basicConsume(message);\r\n            }\r\n        } else {\r\n            log.info(&quot;validation was not Successful&quot;);\r\n            messageNotValidProcess(message, deliveryTag);\r\n        }\r\n    }\r\n\r\n    protected void ackMessage(Channel channel, long deliveryTag) {\r\n        try {\r\n            log.info(&quot;Message was acknowledged&quot;);\r\n            channel.basicAck(deliveryTag, false);\r\n        } catch (IOException ioe) {\r\n            ioe.printStackTrace();\r\n        }\r\n    }\r\n\r\n    protected void nackMessage(Channel channel, long deliveryTag) {\r\n        try {\r\n            log.info(&quot;Message Not Acknowledged&quot;);\r\n            channel.basicNack(deliveryTag, false, false);\r\n        } catch (IOException ioe) {\r\n            ioe.printStackTrace();\r\n        }\r\n    }\r\n\r\n    protected boolean validateMessage(String message) {\r\n        return ValidationUtils.isJsonObject(message);\r\n    }\r\n\r\n    protected void basicConsume(String message) {\r\n        log.info(&quot; [x] consumed &#39;&quot; + message + &quot;&#39; (do nothing - not implemented)&quot;);\r\n    }\r\n\r\n    protected void messageNotValidProcess(String message, long deliveryTag) {\r\n        log.info(String.format(&quot;[x] %d consuming was unsuccessful. %s is not valid %s&quot;, deliveryTag, queueName, message));\r\n    }\r\n\r\n    private Channel createChannel() throws IOException {\r\n        if (this.channel == null || !this.channel.isOpen()) {\r\n            this.channel = connection.createChannel();\r\n            try {\r\n                declareChannel(channel);\r\n            } catch (IOException | ShutdownSignalException exception) {\r\n                this.channel = connection.createChannel();\r\n                log.warn(&quot;Queue parameters had changed, trying recreating them...&quot;);\r\n                deleteQueueIfEmpty(channel, queueName);\r\n                if (deadLetterQueueName != null) {\r\n                    deleteQueueIfEmpty(channel, deadLetterQueueName);\r\n                }\r\n                declareChannel(channel);\r\n            }\r\n        }\r\n        return channel;\r\n    }\r\n\r\n    private void declareChannel(Channel channel) throws IOException {\r\n        channel.exchangeDeclare(exchangeName, exchangeType);\r\n        Map&lt;String, Object&gt; args = new HashMap&lt;&gt;();\r\n        if (deadLetterExchangeName != null &amp;&amp; deadLetterRoutingKey != null &amp;&amp; deadLetterQueueName != null) {\r\n            args.put(&quot;x-dead-letter-exchange&quot;, deadLetterExchangeName);\r\n            args.put(&quot;x-dead-letter-routing-key&quot;, deadLetterRoutingKey);\r\n            channel.exchangeDeclare(deadLetterExchangeName, exchangeType);\r\n            channel.queueDeclare(deadLetterQueueName, false, false, false, null);\r\n            channel.queueBind(deadLetterQueueName, deadLetterExchangeName, deadLetterRoutingKey);\r\n        }\r\n        channel.queueDeclare(queueName, durableQueue, autoDelete, exclusiveQueue, args);\r\n        channel.queueBind(queueName, exchangeName, routingKey);\r\n\r\n        if (requiresConfirm) {\r\n            channel.confirmSelect();\r\n            channel.addConfirmListener(this::confirmed, this::notConfirmed);\r\n        }\r\n    }\r\n\r\n    private void deleteQueueIfEmpty(Channel channel, String queueName) {\r\n        log.info(String.format(&quot;Deleting Queue: %s&quot;, queueName));\r\n        try {\r\n            channel.queueDelete(queueName, false, true);\r\n        } catch (Exception e) {\r\n            log.error(String.format(&quot;Couldn&#39;t delete queue with name: %s&quot;, queueName));\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    protected void confirmed(long sequenceNumber, boolean multiple) {\r\n        // code when message is confirmed\r\n        log.info(String.format(&quot;Message with sequenceNumber: %d is confirmed.&quot;, sequenceNumber));\r\n    }\r\n\r\n    protected void notConfirmed(long sequenceNumber, boolean multiple) {\r\n        // code when message is nack-ed\r\n        log.info(String.format(&quot;Message with sequenceNumber: %d is NOT confirmed!!!&quot;, sequenceNumber));\r\n    }\r\n\r\n    private String getClassName() {\r\n        return this.getClass().getSimpleName();\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\nI have many classes extending this abstract class and implementing the parts that I need to. this is a serious problem for me because some features of our application does not work properly. \r\n\r\nthanks in advance.\r\n","title":"Rabbitmq Consumers Stops consuming - java client","body":"<p>I am using rabbitmq in a microservice environment, and I use it to send messages and events to other services.\nmy projects are java spring boot and I am using rabbitmq java client's latest version.\nThe problem is some consumers stop consuming at a random point in time, and the only way to get them going again is to restart the application. I have not been able to find a pattern. here is what I have done and know:</p>\n<ul>\n<li>some consumers stop working not all of them.</li>\n<li>I have enabled auto-recovery option</li>\n<li>publishers of the same application have no problems.</li>\n<li>This is my rabbitmq client: <a href=\"https://mvnrepository.com/artifact/com.rabbitmq/amqp-client/5.17.0\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/com.rabbitmq/amqp-client/5.17.0</a></li>\n<li>I have monitored both java applications and rabbimq memory and CPU usages, they do not have memory or CPU shortages</li>\n<li>I have read the following links and they did not solve my problem:</li>\n</ul>\n<p><a href=\"https://stackoverflow.com/questions/22941644/rabbitmq-surviving-a-consumer-disconnection-using-defaultconsumer\">RabbitMQ - surviving a consumer disconnection using DefaultConsumer</a></p>\n<p><a href=\"https://stackoverflow.com/questions/49338247/rabbitmq-connect-disconnect-notifications\">RabbitMQ Connect/Disconnect Notifications</a></p>\n<p><a href=\"https://stackoverflow.com/questions/17811786/rabbitmq-disconnect-me-after-some-time\">RabbitMQ disconnect me after some time</a></p>\n<p><a href=\"https://stackoverflow.com/questions/38771664/rabbitmq-java-client-stops-consuming-messages\">RabbitMQ java client stops consuming messages</a></p>\n<p><a href=\"https://stackoverflow.com/questions/48033118/temporarily-stop-consuming-rabbitmq-messages-and-resume-later\">Temporarily stop consuming RabbitMQ messages and resume later</a></p>\n<p><a href=\"https://stackoverflow.com/questions/6732936/rabbitmq-consumer-stops-receiving-messages\">RabbitMQ consumer stops receiving messages</a></p>\n<p><a href=\"https://stackoverflow.com/questions/3284731/rabbitmq-message-consumers-stop-consuming-messages\">RabbitMQ message consumers stop consuming messages</a></p>\n<ul>\n<li>this is how I have coded my base consumer :</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic abstract class BaseConsumer implements Consumer {\n    private final Logger log = LoggerFactory.getLogger(BaseConsumer.class);\n\n    protected Connection connection;\n    protected Channel channel;\n    protected String exchangeType;\n    protected String exchangeName;\n    protected String queueName;\n    protected String routingKey;\n    protected String consumerTag;\n    protected String deadLetterExchangeName;\n    protected String deadLetterQueueName;\n    protected String deadLetterRoutingKey;\n    protected boolean autoDelete;\n    protected boolean durableQueue;\n    protected boolean exclusiveQueue;\n    protected boolean requiresConfirm;\n\n    protected BaseConsumer(Connection connection) {\n        this.connection = connection;\n        this.requiresConfirm = false;\n    }\n\n    @Override\n    public void consume() {\n        consumeMessage();\n    }\n\n    protected void consumeMessage() {\n        try {\n            Channel channel = createChannel();\n            declareChannel(channel);\n            log.info(String.format(&quot;%s: [*] Waiting for %s. To exit press CTRL+C&quot;, getClassName(), queueName));\n            channel.basicConsume(queueName, !requiresConfirm, consumerTag, getConsumer(channel));\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private DefaultConsumer getConsumer(Channel channel) {\n        return new DefaultConsumer(channel) {\n            @Override\n            public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) {\n                handleMessageProcess(body, envelope);\n            }\n        };\n    }\n\n    private void handleMessageProcess(byte[] body, Envelope envelope) {\n        String message = new String(body);\n        log.info(String.format(&quot;%s: [x] received '%s'&quot;, getClassName(), message));\n        long deliveryTag = envelope.getDeliveryTag();\n        if (validateMessage(message)) {\n            log.info(&quot;validation was Successful&quot;);\n            if (requiresConfirm) {\n                log.info(&quot;******** handling delivery&quot;);\n                try {\n                    basicConsume(message);\n                    ackMessage(channel, deliveryTag);\n                } catch (Exception e) {\n                    log.error(String.format(&quot;Consume Failed Moving Message To DLQ. Error Is: \\n%s&quot;, e));\n                    nackMessage(channel, deliveryTag);\n                }\n            } else {\n                basicConsume(message);\n            }\n        } else {\n            log.info(&quot;validation was not Successful&quot;);\n            messageNotValidProcess(message, deliveryTag);\n        }\n    }\n\n    protected void ackMessage(Channel channel, long deliveryTag) {\n        try {\n            log.info(&quot;Message was acknowledged&quot;);\n            channel.basicAck(deliveryTag, false);\n        } catch (IOException ioe) {\n            ioe.printStackTrace();\n        }\n    }\n\n    protected void nackMessage(Channel channel, long deliveryTag) {\n        try {\n            log.info(&quot;Message Not Acknowledged&quot;);\n            channel.basicNack(deliveryTag, false, false);\n        } catch (IOException ioe) {\n            ioe.printStackTrace();\n        }\n    }\n\n    protected boolean validateMessage(String message) {\n        return ValidationUtils.isJsonObject(message);\n    }\n\n    protected void basicConsume(String message) {\n        log.info(&quot; [x] consumed '&quot; + message + &quot;' (do nothing - not implemented)&quot;);\n    }\n\n    protected void messageNotValidProcess(String message, long deliveryTag) {\n        log.info(String.format(&quot;[x] %d consuming was unsuccessful. %s is not valid %s&quot;, deliveryTag, queueName, message));\n    }\n\n    private Channel createChannel() throws IOException {\n        if (this.channel == null || !this.channel.isOpen()) {\n            this.channel = connection.createChannel();\n            try {\n                declareChannel(channel);\n            } catch (IOException | ShutdownSignalException exception) {\n                this.channel = connection.createChannel();\n                log.warn(&quot;Queue parameters had changed, trying recreating them...&quot;);\n                deleteQueueIfEmpty(channel, queueName);\n                if (deadLetterQueueName != null) {\n                    deleteQueueIfEmpty(channel, deadLetterQueueName);\n                }\n                declareChannel(channel);\n            }\n        }\n        return channel;\n    }\n\n    private void declareChannel(Channel channel) throws IOException {\n        channel.exchangeDeclare(exchangeName, exchangeType);\n        Map&lt;String, Object&gt; args = new HashMap&lt;&gt;();\n        if (deadLetterExchangeName != null &amp;&amp; deadLetterRoutingKey != null &amp;&amp; deadLetterQueueName != null) {\n            args.put(&quot;x-dead-letter-exchange&quot;, deadLetterExchangeName);\n            args.put(&quot;x-dead-letter-routing-key&quot;, deadLetterRoutingKey);\n            channel.exchangeDeclare(deadLetterExchangeName, exchangeType);\n            channel.queueDeclare(deadLetterQueueName, false, false, false, null);\n            channel.queueBind(deadLetterQueueName, deadLetterExchangeName, deadLetterRoutingKey);\n        }\n        channel.queueDeclare(queueName, durableQueue, autoDelete, exclusiveQueue, args);\n        channel.queueBind(queueName, exchangeName, routingKey);\n\n        if (requiresConfirm) {\n            channel.confirmSelect();\n            channel.addConfirmListener(this::confirmed, this::notConfirmed);\n        }\n    }\n\n    private void deleteQueueIfEmpty(Channel channel, String queueName) {\n        log.info(String.format(&quot;Deleting Queue: %s&quot;, queueName));\n        try {\n            channel.queueDelete(queueName, false, true);\n        } catch (Exception e) {\n            log.error(String.format(&quot;Couldn't delete queue with name: %s&quot;, queueName));\n            e.printStackTrace();\n        }\n    }\n\n    protected void confirmed(long sequenceNumber, boolean multiple) {\n        // code when message is confirmed\n        log.info(String.format(&quot;Message with sequenceNumber: %d is confirmed.&quot;, sequenceNumber));\n    }\n\n    protected void notConfirmed(long sequenceNumber, boolean multiple) {\n        // code when message is nack-ed\n        log.info(String.format(&quot;Message with sequenceNumber: %d is NOT confirmed!!!&quot;, sequenceNumber));\n    }\n\n    private String getClassName() {\n        return this.getClass().getSimpleName();\n    }\n}\n\n\n</code></pre>\n<p>I have many classes extending this abstract class and implementing the parts that I need to. this is a serious problem for me because some features of our application does not work properly.</p>\n<p>thanks in advance.</p>\n"},{"tags":["java","input","java.util.scanner","system","bufferedinputstream"],"comments":[{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":1,"creation_date":1419687696,"post_id":27667599,"comment_id":43750208,"body_markdown":"`System.in` read from file descriptor 0 which is also standard input.  This could be redirected from a file or read from the console.  Can you clarify what your doubt is, perhaps its not as complicated as you imagine it might be.","body":"<code>System.in</code> read from file descriptor 0 which is also standard input.  This could be redirected from a file or read from the console.  Can you clarify what your doubt is, perhaps its not as complicated as you imagine it might be."},{"owner":{"account_id":4996715,"reputation":77,"user_id":4017022,"accept_rate":80,"display_name":"Hamza Maher Abdel-rahman"},"score":1,"creation_date":1419689751,"post_id":27667599,"comment_id":43750746,"body_markdown":"System.in is like an object ( stream more likely ), we don&#39;t write what we want on it it just reads what we wrote from the CMD , right ? then Scanner translate the whole stream into int or double and so on","body":"System.in is like an object ( stream more likely ), we don&#39;t write what we want on it it just reads what we wrote from the CMD , right ? then Scanner translate the whole stream into int or double and so on"},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":1,"creation_date":1419690047,"post_id":27667599,"comment_id":43750814,"body_markdown":"Correct, the input comes via the OS rather than using CMD as such.","body":"Correct, the input comes via the OS rather than using CMD as such."}],"answers":[{"tags":[],"owner":{"account_id":26078,"reputation":452381,"user_id":67579,"accept_rate":81,"display_name":"willeM_ Van Onsem"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1419686971,"creation_date":1419686560,"answer_id":27667663,"question_id":27667599,"body_markdown":"`System.in` is a `BufferedInputStream`, such a `Stream` can be any input stream (for instance a network socket, or a file), but also the standard input channel `stdin`.\r\n\r\n`stdin` is the content you type in the command line, so obviously, it doesn&#39;t show anything.\r\n\r\nWhen you create a `Scanner` as shown in your question, you feed the standard input channel to that `Scanner`, but the scanner won&#39;t do anything until it is asked to. A scanner is a *wrapper*: a construct that makes it easier (more convenient) to parse input from the `stdin`. It does not offer additional functionality in the sense you can do all what a scanner does by yourself, but it is way easier to use a scanner if you want to *parse* for instance integers from the `stdin`.\r\n\r\nSo when you for instance type:\r\n\r\n    Scanner sc = new Scanner(System.in);\r\n    int val = sc.nextInt();\r\n    System.out.println(2*val);\r\n\r\nIt will wait until you input a line, parse it to an integer and print the double of the inputted value on the standard output channel (`stdout`).\r\n\r\n---\r\n\r\nA few concluding notes:\r\n\r\n &gt; `System.in` is not `final`, you can use `System.setIn` to set another input stream as the standard input string. For instance a file or a network socket.\r\n &gt; The default `System.in` can also take input from for instance a file or a *pipe* if you for instance call the program as `java -jar program.jar &lt; inputfile`.","title":"System.in and Scanner object","body":"<p><code>System.in</code> is a <code>BufferedInputStream</code>, such a <code>Stream</code> can be any input stream (for instance a network socket, or a file), but also the standard input channel <code>stdin</code>.</p>\n\n<p><code>stdin</code> is the content you type in the command line, so obviously, it doesn't show anything.</p>\n\n<p>When you create a <code>Scanner</code> as shown in your question, you feed the standard input channel to that <code>Scanner</code>, but the scanner won't do anything until it is asked to. A scanner is a <em>wrapper</em>: a construct that makes it easier (more convenient) to parse input from the <code>stdin</code>. It does not offer additional functionality in the sense you can do all what a scanner does by yourself, but it is way easier to use a scanner if you want to <em>parse</em> for instance integers from the <code>stdin</code>.</p>\n\n<p>So when you for instance type:</p>\n\n<pre><code>Scanner sc = new Scanner(System.in);\nint val = sc.nextInt();\nSystem.out.println(2*val);\n</code></pre>\n\n<p>It will wait until you input a line, parse it to an integer and print the double of the inputted value on the standard output channel (<code>stdout</code>).</p>\n\n<hr>\n\n<p>A few concluding notes:</p>\n\n<blockquote>\n  <p><code>System.in</code> is not <code>final</code>, you can use <code>System.setIn</code> to set another input stream as the standard input string. For instance a file or a network socket.\n  The default <code>System.in</code> can also take input from for instance a file or a <em>pipe</em> if you for instance call the program as <code>java -jar program.jar &lt; inputfile</code>.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":5177776,"reputation":878,"user_id":4144303,"accept_rate":17,"display_name":"Abhishek"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1419687983,"creation_date":1419686759,"answer_id":27667689,"question_id":27667599,"body_markdown":"`Scanner` is a class in `java.util` package .\r\n\r\nWhen you write `Scanner sc=new Scanner(System.in)` you are trying to read the input from the `&quot;standard&quot; input stream`. Mainly `System.in` is used for reading the input from the console\r\n\r\nScanner holds the program execution until the input arrives, that is how it is meant to be.\r\n\r\nAnd your question that when you print the `System.in` you end end up with a output like `java.io.BufferedInputStream@15db9742`, this output is called as the object `hash code` and you are likely to get this kind of output if you try to print an object.\r\nHere you are getting the hash code because you are trying to print an entire stream.","title":"System.in and Scanner object","body":"<p><code>Scanner</code> is a class in <code>java.util</code> package .</p>\n\n<p>When you write <code>Scanner sc=new Scanner(System.in)</code> you are trying to read the input from the <code>\"standard\" input stream</code>. Mainly <code>System.in</code> is used for reading the input from the console</p>\n\n<p>Scanner holds the program execution until the input arrives, that is how it is meant to be.</p>\n\n<p>And your question that when you print the <code>System.in</code> you end end up with a output like <code>java.io.BufferedInputStream@15db9742</code>, this output is called as the object <code>hash code</code> and you are likely to get this kind of output if you try to print an object.\nHere you are getting the hash code because you are trying to print an entire stream.</p>\n"}],"owner":{"account_id":4996715,"reputation":77,"user_id":4017022,"accept_rate":80,"display_name":"Hamza Maher Abdel-rahman"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1489,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":27667663,"answer_count":2,"score":1,"last_activity_date":1680082271,"creation_date":1419686214,"question_id":27667599,"body_markdown":"I am having a problem to understand what *System.in* do. All I understand is that it&#39;s a data field in the System class and that it&#39;s declaration is: \r\n\r\n    public static final InputStream in\r\n\r\nIt&#39;s declared final so it cannot be changed.  \r\nAs mentioned in the Oracle source they say that &quot;in&quot; is the &quot;standard&quot; input stream. This stream is already open and ready to supply input data. Typically this stream corresponds to keyboard input or another input source specified by the host environment or user.  \r\nWhat does this exactly mean?\r\n\r\nWhen I write the following code : \r\n\r\n    Scanner input = new Scanner(System.in);\r\n\r\nThat *Scanner* object is ready to scan what&#39;s in *System.in*, but nothing shows up in the CMD.\r\n\r\nAnother point is that when I try to print *System.in*, I end up with an output like:  \r\n\r\n&gt; java.io.BufferedInputStream@15db9742\r\n\r\nCan anyone please explain the whole process and what&#39;s the exact job of both *System.in* and *Scanner* class! ","title":"System.in and Scanner object","body":"<p>I am having a problem to understand what <em>System.in</em> do. All I understand is that it's a data field in the System class and that it's declaration is:</p>\n<pre><code>public static final InputStream in\n</code></pre>\n<p>It's declared final so it cannot be changed.<br />\nAs mentioned in the Oracle source they say that &quot;in&quot; is the &quot;standard&quot; input stream. This stream is already open and ready to supply input data. Typically this stream corresponds to keyboard input or another input source specified by the host environment or user.<br />\nWhat does this exactly mean?</p>\n<p>When I write the following code :</p>\n<pre><code>Scanner input = new Scanner(System.in);\n</code></pre>\n<p>That <em>Scanner</em> object is ready to scan what's in <em>System.in</em>, but nothing shows up in the CMD.</p>\n<p>Another point is that when I try to print <em>System.in</em>, I end up with an output like:</p>\n<blockquote>\n<p>java.io.BufferedInputStream@15db9742</p>\n</blockquote>\n<p>Can anyone please explain the whole process and what's the exact job of both <em>System.in</em> and <em>Scanner</em> class!</p>\n"},{"tags":["java","android","android-studio","kotlin","service"],"answers":[{"tags":[],"owner":{"account_id":12143210,"reputation":3642,"user_id":10635880,"display_name":"Vedprakash Wagh"},"down_vote_count":2,"up_vote_count":39,"is_accepted":true,"score":37,"last_activity_date":1634478568,"creation_date":1634478568,"answer_id":69604952,"question_id":69604951,"body_markdown":"# How to reproduce the crash\r\n\r\nStep 1. Update your `targetSdkVersion` and `compileSdkVersion` to SDK 31.\r\n\r\nStep 2. Try to run any Foreground service when your app is in background. In my case, it was the widget&#39;s `onUpdate` method being called after `updatePeriodMillis` time, which will start a Foreground service, which updates the data by fetching appropriate information from internet.\r\n\r\n\r\n\r\n**Remember**: The background execution limits added in Android 8.0 have nothing to do with this problem. This limitation/exception was added in Android 12/SDK 31 - [Source][1].\r\n\r\n----------\r\n\r\n# What is this exception, and why was it added?\r\n\r\nApps that target Android 12 (API level 31) or higher can&#39;t start foreground services while running in the background, except for a few special cases. If an app tries to start a foreground service while the app is running in the background, and the foreground service doesn&#39;t satisfy one of the exceptional cases, the system throws a `ForegroundServiceStartNotAllowedException`.\r\n\r\nThese [special cases][2] are:\r\n\r\n - Your app transitions from a user-visible state, such as an activity.\r\n - Your app can start an activity from the background, except for the case where the app has an activity in the back stack of an existing task.\r\n - Your app receives a high-priority message using Firebase Cloud Messaging.\r\n - The user performs an action on a UI element related to your app. For example, they might interact with a bubble, notification, widget, or activity.\r\n\r\n - Your app invokes an exact alarm to complete an action that the user requests.\r\n\r\n - Your app is the device&#39;s current input method.\r\n\r\n - Your app receives an event that&#39;s related to geofencing or activity recognition transition.\r\n\r\n - After the device reboots and receives the ACTION_BOOT_COMPLETED, ACTION_LOCKED_BOOT_COMPLETED, or ACTION_MY_PACKAGE_REPLACED intent action in a broadcast receiver.\r\n\r\n - Your app receives the ACTION_TIMEZONE_CHANGED, ACTION_TIME_CHANGED, or ACTION_LOCALE_CHANGED intent action in a broadcast receiver.\r\n\r\n - Your app receives a Bluetooth broadcast that requires the BLUETOOTH_CONNECT or BLUETOOTH_SCAN permissions.\r\n\r\n - Apps with certain system roles or permission, such as device owners and profile owners.\r\n\r\n - Your app uses the Companion Device Manager and declares the REQUEST_COMPANION_START_FOREGROUND_SERVICES_FROM_BACKGROUND permission or the REQUEST_COMPANION_RUN_IN_BACKGROUND permission. Whenever possible, use REQUEST_COMPANION_START_FOREGROUND_SERVICES_FROM_BACKGROUND.\r\n\r\n - The user turns off battery optimizations for your app. You can help users find this option by sending them to your app&#39;s App info page in system settings. To do so, invoke an intent that contains the ACTION_IGNORE_BATTERY_OPTIMIZATION_SETTINGS intent action.\r\n\r\n----------\r\n\r\n# Possible solutions\r\n\r\n## Solution 1\r\n\r\n\r\nThis will work for a while in Play Store until Google makes it mandatory to upgrade to API level 31.\r\n\r\nCurrently, starting November 2021 all apps must target API Level 30 and above. So if you&#39;re using API Level 31 for your app, downgrading your `compileSdkVersion` &amp; `targetSdkVersion` to API Level 30 should fix the issue (atleast for a while).\r\n\r\n## Solution 2\r\n\r\n### For time-sensitive work\r\n\r\nIf you were using Foreground service to do work that is time sensitive, start Foreground services within an exact alarm. Check out more about this from documentation here -&gt; [Set an exact alarm][3].\r\n\r\n### For time-insensitive/expedited work\r\n\r\nThis is the solution that I ended up using for my app. Use `WorkManager` to schedule and start the background work. Check out more about this from documentation here -&gt; [Schedule expedited work][4].\r\n\r\n\r\nYou can know more about WorkManager here -&gt; [WorkManager][5]\r\n\r\nGithub Repo for WorkManager samples -&gt; [WorkManager Samples][6]\r\n\r\n\r\nI added this answer specifically because searching for this exception does not bring up any resources to know why the service behaves differently on Android 12. All this is present in Google&#39;s documentation, and always remember to check the behaviour changes from the doc.\r\n\r\nEverything related to this change can be found here -&gt; [Android 12 Behavior Changes][7], specifically within the [Foreground Service launch restrictions][8].\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/app/ForegroundServiceStartNotAllowedException\r\n  [2]: https://developer.android.com/guide/components/foreground-services#background-start-restriction-exemptions\r\n  [3]: https://developer.android.com/training/scheduling/alarms#exact\r\n  [4]: https://developer.android.com/topic/libraries/architecture/workmanager/how-to/define-work#expedited\r\n  [5]: https://developer.android.com/topic/libraries/architecture/workmanager/\r\n  [6]: https://github.com/android/architecture-components-samples/tree/android-s/WorkManagerSample\r\n  [7]: https://developer.android.com/about/versions/12/behavior-changes-12\r\n  [8]: https://developer.android.com/about/versions/12/behavior-changes-12#foreground-service-launch-restrictions","title":"Getting android.app.ForegroundServiceStartNotAllowedException in Android 12 (SDK 31)","body":"<h1>How to reproduce the crash</h1>\n<p>Step 1. Update your <code>targetSdkVersion</code> and <code>compileSdkVersion</code> to SDK 31.</p>\n<p>Step 2. Try to run any Foreground service when your app is in background. In my case, it was the widget's <code>onUpdate</code> method being called after <code>updatePeriodMillis</code> time, which will start a Foreground service, which updates the data by fetching appropriate information from internet.</p>\n<p><strong>Remember</strong>: The background execution limits added in Android 8.0 have nothing to do with this problem. This limitation/exception was added in Android 12/SDK 31 - <a href=\"https://developer.android.com/reference/android/app/ForegroundServiceStartNotAllowedException\" rel=\"noreferrer\">Source</a>.</p>\n<hr />\n<h1>What is this exception, and why was it added?</h1>\n<p>Apps that target Android 12 (API level 31) or higher can't start foreground services while running in the background, except for a few special cases. If an app tries to start a foreground service while the app is running in the background, and the foreground service doesn't satisfy one of the exceptional cases, the system throws a <code>ForegroundServiceStartNotAllowedException</code>.</p>\n<p>These <a href=\"https://developer.android.com/guide/components/foreground-services#background-start-restriction-exemptions\" rel=\"noreferrer\">special cases</a> are:</p>\n<ul>\n<li><p>Your app transitions from a user-visible state, such as an activity.</p>\n</li>\n<li><p>Your app can start an activity from the background, except for the case where the app has an activity in the back stack of an existing task.</p>\n</li>\n<li><p>Your app receives a high-priority message using Firebase Cloud Messaging.</p>\n</li>\n<li><p>The user performs an action on a UI element related to your app. For example, they might interact with a bubble, notification, widget, or activity.</p>\n</li>\n<li><p>Your app invokes an exact alarm to complete an action that the user requests.</p>\n</li>\n<li><p>Your app is the device's current input method.</p>\n</li>\n<li><p>Your app receives an event that's related to geofencing or activity recognition transition.</p>\n</li>\n<li><p>After the device reboots and receives the ACTION_BOOT_COMPLETED, ACTION_LOCKED_BOOT_COMPLETED, or ACTION_MY_PACKAGE_REPLACED intent action in a broadcast receiver.</p>\n</li>\n<li><p>Your app receives the ACTION_TIMEZONE_CHANGED, ACTION_TIME_CHANGED, or ACTION_LOCALE_CHANGED intent action in a broadcast receiver.</p>\n</li>\n<li><p>Your app receives a Bluetooth broadcast that requires the BLUETOOTH_CONNECT or BLUETOOTH_SCAN permissions.</p>\n</li>\n<li><p>Apps with certain system roles or permission, such as device owners and profile owners.</p>\n</li>\n<li><p>Your app uses the Companion Device Manager and declares the REQUEST_COMPANION_START_FOREGROUND_SERVICES_FROM_BACKGROUND permission or the REQUEST_COMPANION_RUN_IN_BACKGROUND permission. Whenever possible, use REQUEST_COMPANION_START_FOREGROUND_SERVICES_FROM_BACKGROUND.</p>\n</li>\n<li><p>The user turns off battery optimizations for your app. You can help users find this option by sending them to your app's App info page in system settings. To do so, invoke an intent that contains the ACTION_IGNORE_BATTERY_OPTIMIZATION_SETTINGS intent action.</p>\n</li>\n</ul>\n<hr />\n<h1>Possible solutions</h1>\n<h2>Solution 1</h2>\n<p>This will work for a while in Play Store until Google makes it mandatory to upgrade to API level 31.</p>\n<p>Currently, starting November 2021 all apps must target API Level 30 and above. So if you're using API Level 31 for your app, downgrading your <code>compileSdkVersion</code> &amp; <code>targetSdkVersion</code> to API Level 30 should fix the issue (atleast for a while).</p>\n<h2>Solution 2</h2>\n<h3>For time-sensitive work</h3>\n<p>If you were using Foreground service to do work that is time sensitive, start Foreground services within an exact alarm. Check out more about this from documentation here -&gt; <a href=\"https://developer.android.com/training/scheduling/alarms#exact\" rel=\"noreferrer\">Set an exact alarm</a>.</p>\n<h3>For time-insensitive/expedited work</h3>\n<p>This is the solution that I ended up using for my app. Use <code>WorkManager</code> to schedule and start the background work. Check out more about this from documentation here -&gt; <a href=\"https://developer.android.com/topic/libraries/architecture/workmanager/how-to/define-work#expedited\" rel=\"noreferrer\">Schedule expedited work</a>.</p>\n<p>You can know more about WorkManager here -&gt; <a href=\"https://developer.android.com/topic/libraries/architecture/workmanager/\" rel=\"noreferrer\">WorkManager</a></p>\n<p>Github Repo for WorkManager samples -&gt; <a href=\"https://github.com/android/architecture-components-samples/tree/android-s/WorkManagerSample\" rel=\"noreferrer\">WorkManager Samples</a></p>\n<p>I added this answer specifically because searching for this exception does not bring up any resources to know why the service behaves differently on Android 12. All this is present in Google's documentation, and always remember to check the behaviour changes from the doc.</p>\n<p>Everything related to this change can be found here -&gt; <a href=\"https://developer.android.com/about/versions/12/behavior-changes-12\" rel=\"noreferrer\">Android 12 Behavior Changes</a>, specifically within the <a href=\"https://developer.android.com/about/versions/12/behavior-changes-12#foreground-service-launch-restrictions\" rel=\"noreferrer\">Foreground Service launch restrictions</a>.</p>\n"},{"tags":[],"owner":{"account_id":132559,"reputation":984,"user_id":333325,"display_name":"Jadent"},"down_vote_count":3,"up_vote_count":17,"is_accepted":false,"score":14,"last_activity_date":1680082239,"creation_date":1639655843,"answer_id":70378618,"question_id":69604951,"body_markdown":"If your App is a MediaPlayer (i.e. uses a `MediaBrowseService`) and you are experiencing the `ForegroundServiceStartNotAllowedException` crash then you may need to:\r\n\r\n1) Update your Manifest to specify that your service is for media playback using `android:foregroundServiceType=&quot;mediaPlayback&quot;` in the `Service` declaration\r\n\r\n2) Include the `ServiceInfo.FOREGROUND_SERVICE_TYPE_MEDIA_PLAYBACK` parameter in your call to the `Serivce.startForeground` method\r\n\r\nAlso note, if you are using ExoPlayer then see the suggestions from the Android team here that may help with tracking down the cause of crashes due to `ForegroundServiceStartNotAllowedException` exceptions being thrown\r\n\r\nhttps://github.com/androidx/media/issues/111#issuecomment-1406466363\r\n\r\nFurthermore, there is some really useful and up to date (to API31) information on `ForegroundServices` here: https://www.hellsoft.se/your-guide-to-foreground-services-on-andorid/","title":"Getting android.app.ForegroundServiceStartNotAllowedException in Android 12 (SDK 31)","body":"<p>If your App is a MediaPlayer (i.e. uses a <code>MediaBrowseService</code>) and you are experiencing the <code>ForegroundServiceStartNotAllowedException</code> crash then you may need to:</p>\n<ol>\n<li><p>Update your Manifest to specify that your service is for media playback using <code>android:foregroundServiceType=&quot;mediaPlayback&quot;</code> in the <code>Service</code> declaration</p>\n</li>\n<li><p>Include the <code>ServiceInfo.FOREGROUND_SERVICE_TYPE_MEDIA_PLAYBACK</code> parameter in your call to the <code>Serivce.startForeground</code> method</p>\n</li>\n</ol>\n<p>Also note, if you are using ExoPlayer then see the suggestions from the Android team here that may help with tracking down the cause of crashes due to <code>ForegroundServiceStartNotAllowedException</code> exceptions being thrown</p>\n<p><a href=\"https://github.com/androidx/media/issues/111#issuecomment-1406466363\" rel=\"nofollow noreferrer\">https://github.com/androidx/media/issues/111#issuecomment-1406466363</a></p>\n<p>Furthermore, there is some really useful and up to date (to API31) information on <code>ForegroundServices</code> here: <a href=\"https://www.hellsoft.se/your-guide-to-foreground-services-on-andorid/\" rel=\"nofollow noreferrer\">https://www.hellsoft.se/your-guide-to-foreground-services-on-andorid/</a></p>\n"},{"tags":[],"owner":{"account_id":3909007,"reputation":17,"user_id":3234870,"accept_rate":50,"display_name":"user3234870"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1650222730,"creation_date":1649753316,"answer_id":71839664,"question_id":69604951,"body_markdown":"use &lt;code&gt;.setForegroundServiceBehavior(NotificationCompat.FOREGROUND_SERVICE_IMMEDIATE)&lt;/code&gt; in creating the Notification and also &lt;code&gt;NotificationManager.IMPORTANCE_MAX&lt;/code&gt;.","title":"Getting android.app.ForegroundServiceStartNotAllowedException in Android 12 (SDK 31)","body":"<p>use <code>.setForegroundServiceBehavior(NotificationCompat.FOREGROUND_SERVICE_IMMEDIATE)</code> in creating the Notification and also <code>NotificationManager.IMPORTANCE_MAX</code>.</p>\n"}],"owner":{"account_id":12143210,"reputation":3642,"user_id":10635880,"display_name":"Vedprakash Wagh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15505,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"accepted_answer_id":69604952,"answer_count":3,"score":35,"last_activity_date":1680082239,"creation_date":1634478568,"question_id":69604951,"body_markdown":"I upgraded my apps `targetSdkVersion` and `compileSdkVersion` to SDK 31, and started receiving the following crash in app in a service that updates widget in background.\r\n\r\n    java.lang.RuntimeException: \r\n      at android.app.ActivityThread.handleReceiver (ActivityThread.java:4321)\r\n      at android.app.ActivityThread.access$1600 (ActivityThread.java:247)\r\n      at android.app.ActivityThread$H.handleMessage (ActivityThread.java:2068)\r\n      at android.os.Handler.dispatchMessage (Handler.java:106)\r\n      at android.os.Looper.loopOnce (Looper.java:201)\r\n      at android.os.Looper.loop (Looper.java:288)\r\n      at android.app.ActivityThread.main (ActivityThread.java:7842)\r\n      at java.lang.reflect.Method.invoke (Native Method)\r\n      at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run (RuntimeInit.java:548)\r\n      at com.android.internal.os.ZygoteInit.main (ZygoteInit.java:1003)\r\n    Caused by: android.app.ForegroundServiceStartNotAllowedException: \r\n      at android.app.ForegroundServiceStartNotAllowedException$1.createFromParcel (ForegroundServiceStartNotAllowedException.java:54)\r\n      at android.app.ForegroundServiceStartNotAllowedException$1.createFromParcel (ForegroundServiceStartNotAllowedException.java:50)\r\n      at android.os.Parcel.readParcelable (Parcel.java:3333)\r\n      at android.os.Parcel.createExceptionOrNull (Parcel.java:2420)\r\n      at android.os.Parcel.createException (Parcel.java:2409)\r\n      at android.os.Parcel.readException (Parcel.java:2392)\r\n      at android.os.Parcel.readException (Parcel.java:2334)\r\n      at android.app.IActivityManager$Stub$Proxy.startService (IActivityManager.java:5971)\r\n      at android.app.ContextImpl.startServiceCommon (ContextImpl.java:1847)\r\n      at android.app.ContextImpl.startForegroundService (ContextImpl.java:1823)\r\n      at android.content.ContextWrapper.startForegroundService (ContextWrapper.java:779)\r\n      at android.content.ContextWrapper.startForegroundService (ContextWrapper.java:779)\r\n      at com.mypackage.appname.ui.widget.widget_package.WidgetClassName.onUpdate (WidgetClassName.java:48)\r\n      at android.appwidget.AppWidgetProvider.onReceive (AppWidgetProvider.java:66)\r\n      at com.mypackage.appname.ui.widget.widget_package.WidgetClassName.onReceive (WidgetClassName.java)\r\n      at android.app.ActivityThread.handleReceiver (ActivityThread.java:4312)\r\n      at android.app.ActivityThread.access$1600 (ActivityThread.java:247)\r\n      at android.app.ActivityThread$H.handleMessage (ActivityThread.java:2068)\r\n      at android.os.Handler.dispatchMessage (Handler.java:106)\r\n      at android.os.Looper.loopOnce (Looper.java:201)\r\n      at android.os.Looper.loop (Looper.java:288)\r\n      at android.app.ActivityThread.main (ActivityThread.java:7842)\r\n      at java.lang.reflect.Method.invoke (Native Method)\r\n      at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run (RuntimeInit.java:548)\r\n      at com.android.internal.os.ZygoteInit.main (ZygoteInit.java:1003)\r\n    Caused by: android.os.RemoteException: \r\n      at com.android.server.am.ActiveServices.startServiceLocked (ActiveServices.java:691)\r\n      at com.android.server.am.ActiveServices.startServiceLocked (ActiveServices.java:616)\r\n      at com.android.server.am.ActivityManagerService.startService (ActivityManagerService.java:11839)\r\n      at android.app.IActivityManager$Stub.onTransact (IActivityManager.java:2519)\r\n      at com.android.server.am.ActivityManagerService.onTransact (ActivityManagerService.java:2498)\r\n\r\n\r\nAlso, if you&#39;re using something like Firebase Crashlytics, your stacktrace must be something like this -&gt;\r\n\r\n    Caused by android.app.ForegroundServiceStartNotAllowedException: startForegroundService() not allowed due to mAllowStartForeground false: service com.mypackage.appname/.ui.widget.widget_package.MyForegroundServiceName\r\n           at android.app.ForegroundServiceStartNotAllowedException$1.createFromParcel(ForegroundServiceStartNotAllowedException.java:54)\r\n           at android.app.ForegroundServiceStartNotAllowedException$1.createFromParcel(ForegroundServiceStartNotAllowedException.java:50)\r\n           at android.os.Parcel.readParcelable(Parcel.java:3333)\r\n           at android.os.Parcel.createExceptionOrNull(Parcel.java:2420)\r\n           at android.os.Parcel.createException(Parcel.java:2409)\r\n           at android.os.Parcel.readException(Parcel.java:2392)\r\n           at android.os.Parcel.readException(Parcel.java:2334)\r\n           at android.app.IActivityManager$Stub$Proxy.startService(IActivityManager.java:5971)\r\n           at android.app.ContextImpl.startServiceCommon(ContextImpl.java:1847)\r\n           at android.app.ContextImpl.startForegroundService(ContextImpl.java:1823)\r\n           at android.content.ContextWrapper.startForegroundService(ContextWrapper.java:779)\r\n           at android.content.ContextWrapper.startForegroundService(ContextWrapper.java:779)\r\n           at com.mypackage.appname.ui.widget.widget_package.WidgetClassName.onUpdate(WidgetClassName.java:48)\r\n           at android.appwidget.AppWidgetProvider.onReceive(AppWidgetProvider.java:66)\r\n           at com.mypackage.appname.ui.widget.widget_package.WidgetClassName.onReceive(WidgetClassName.java)\r\n           at android.app.ActivityThread.handleReceiver(ActivityThread.java:4312)\r\n           at android.app.ActivityThread.access$1600(ActivityThread.java:247)\r\n           at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2068)\r\n           at android.os.Handler.dispatchMessage(Handler.java:106)\r\n           at android.os.Looper.loopOnce(Looper.java:201)\r\n           at android.os.Looper.loop(Looper.java:288)\r\n           at android.app.ActivityThread.main(ActivityThread.java:7842)\r\n           at java.lang.reflect.Method.invoke(Method.java)\r\n           at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\r\n           at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)\r\n\r\n\r\nI&#39;m adding the way to reproduce this issue, and fixes to this problem, because I did not find any documentation about this on StackOverflow when I searched for it.","title":"Getting android.app.ForegroundServiceStartNotAllowedException in Android 12 (SDK 31)","body":"<p>I upgraded my apps <code>targetSdkVersion</code> and <code>compileSdkVersion</code> to SDK 31, and started receiving the following crash in app in a service that updates widget in background.</p>\n<pre><code>java.lang.RuntimeException: \n  at android.app.ActivityThread.handleReceiver (ActivityThread.java:4321)\n  at android.app.ActivityThread.access$1600 (ActivityThread.java:247)\n  at android.app.ActivityThread$H.handleMessage (ActivityThread.java:2068)\n  at android.os.Handler.dispatchMessage (Handler.java:106)\n  at android.os.Looper.loopOnce (Looper.java:201)\n  at android.os.Looper.loop (Looper.java:288)\n  at android.app.ActivityThread.main (ActivityThread.java:7842)\n  at java.lang.reflect.Method.invoke (Native Method)\n  at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run (RuntimeInit.java:548)\n  at com.android.internal.os.ZygoteInit.main (ZygoteInit.java:1003)\nCaused by: android.app.ForegroundServiceStartNotAllowedException: \n  at android.app.ForegroundServiceStartNotAllowedException$1.createFromParcel (ForegroundServiceStartNotAllowedException.java:54)\n  at android.app.ForegroundServiceStartNotAllowedException$1.createFromParcel (ForegroundServiceStartNotAllowedException.java:50)\n  at android.os.Parcel.readParcelable (Parcel.java:3333)\n  at android.os.Parcel.createExceptionOrNull (Parcel.java:2420)\n  at android.os.Parcel.createException (Parcel.java:2409)\n  at android.os.Parcel.readException (Parcel.java:2392)\n  at android.os.Parcel.readException (Parcel.java:2334)\n  at android.app.IActivityManager$Stub$Proxy.startService (IActivityManager.java:5971)\n  at android.app.ContextImpl.startServiceCommon (ContextImpl.java:1847)\n  at android.app.ContextImpl.startForegroundService (ContextImpl.java:1823)\n  at android.content.ContextWrapper.startForegroundService (ContextWrapper.java:779)\n  at android.content.ContextWrapper.startForegroundService (ContextWrapper.java:779)\n  at com.mypackage.appname.ui.widget.widget_package.WidgetClassName.onUpdate (WidgetClassName.java:48)\n  at android.appwidget.AppWidgetProvider.onReceive (AppWidgetProvider.java:66)\n  at com.mypackage.appname.ui.widget.widget_package.WidgetClassName.onReceive (WidgetClassName.java)\n  at android.app.ActivityThread.handleReceiver (ActivityThread.java:4312)\n  at android.app.ActivityThread.access$1600 (ActivityThread.java:247)\n  at android.app.ActivityThread$H.handleMessage (ActivityThread.java:2068)\n  at android.os.Handler.dispatchMessage (Handler.java:106)\n  at android.os.Looper.loopOnce (Looper.java:201)\n  at android.os.Looper.loop (Looper.java:288)\n  at android.app.ActivityThread.main (ActivityThread.java:7842)\n  at java.lang.reflect.Method.invoke (Native Method)\n  at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run (RuntimeInit.java:548)\n  at com.android.internal.os.ZygoteInit.main (ZygoteInit.java:1003)\nCaused by: android.os.RemoteException: \n  at com.android.server.am.ActiveServices.startServiceLocked (ActiveServices.java:691)\n  at com.android.server.am.ActiveServices.startServiceLocked (ActiveServices.java:616)\n  at com.android.server.am.ActivityManagerService.startService (ActivityManagerService.java:11839)\n  at android.app.IActivityManager$Stub.onTransact (IActivityManager.java:2519)\n  at com.android.server.am.ActivityManagerService.onTransact (ActivityManagerService.java:2498)\n</code></pre>\n<p>Also, if you're using something like Firebase Crashlytics, your stacktrace must be something like this -&gt;</p>\n<pre><code>Caused by android.app.ForegroundServiceStartNotAllowedException: startForegroundService() not allowed due to mAllowStartForeground false: service com.mypackage.appname/.ui.widget.widget_package.MyForegroundServiceName\n       at android.app.ForegroundServiceStartNotAllowedException$1.createFromParcel(ForegroundServiceStartNotAllowedException.java:54)\n       at android.app.ForegroundServiceStartNotAllowedException$1.createFromParcel(ForegroundServiceStartNotAllowedException.java:50)\n       at android.os.Parcel.readParcelable(Parcel.java:3333)\n       at android.os.Parcel.createExceptionOrNull(Parcel.java:2420)\n       at android.os.Parcel.createException(Parcel.java:2409)\n       at android.os.Parcel.readException(Parcel.java:2392)\n       at android.os.Parcel.readException(Parcel.java:2334)\n       at android.app.IActivityManager$Stub$Proxy.startService(IActivityManager.java:5971)\n       at android.app.ContextImpl.startServiceCommon(ContextImpl.java:1847)\n       at android.app.ContextImpl.startForegroundService(ContextImpl.java:1823)\n       at android.content.ContextWrapper.startForegroundService(ContextWrapper.java:779)\n       at android.content.ContextWrapper.startForegroundService(ContextWrapper.java:779)\n       at com.mypackage.appname.ui.widget.widget_package.WidgetClassName.onUpdate(WidgetClassName.java:48)\n       at android.appwidget.AppWidgetProvider.onReceive(AppWidgetProvider.java:66)\n       at com.mypackage.appname.ui.widget.widget_package.WidgetClassName.onReceive(WidgetClassName.java)\n       at android.app.ActivityThread.handleReceiver(ActivityThread.java:4312)\n       at android.app.ActivityThread.access$1600(ActivityThread.java:247)\n       at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2068)\n       at android.os.Handler.dispatchMessage(Handler.java:106)\n       at android.os.Looper.loopOnce(Looper.java:201)\n       at android.os.Looper.loop(Looper.java:288)\n       at android.app.ActivityThread.main(ActivityThread.java:7842)\n       at java.lang.reflect.Method.invoke(Method.java)\n       at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)\n</code></pre>\n<p>I'm adding the way to reproduce this issue, and fixes to this problem, because I did not find any documentation about this on StackOverflow when I searched for it.</p>\n"},{"tags":["java","spring","merge","snowflake-schema"],"owner":{"account_id":3360311,"reputation":7431,"user_id":2822252,"accept_rate":60,"display_name":"Ramesh Papaganti"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1680082061,"creation_date":1680082061,"question_id":75875410,"body_markdown":"We have java application that read data from ElasticSearch and stores it in Snowflake.\r\nSo want use snowflake Merge conecpt. \r\nFrom ESdata how can we create Source DataFrame and Update values.\r\nHere is what I have tried.\r\n\r\n       Updatable target = session.table(&quot;KEYSIGHT_SP_PMA3_CONTENT_TEST&quot;);\r\n        Updatable source = session.table(&quot;KEYSIGHT_SP_PMA3_CONTENT_TEST&quot;);\r\n  \r\n        int updated = 0;\r\n        int inserted = 0;\r\n\r\n        for (int i = 0; i &lt; 10000; i++) {\r\n            Map&lt;String, Column&gt; values = new HashMap&lt;&gt;();\r\n            // values.put(Functions.col(&quot;ID&quot;), Functions.lit(&quot;CUflNIYB35bthTSQDeQM&quot;));\r\n            values.put(&quot;INSERT_DATE&quot;, Functions.lit(i + &quot;2003-03-28 09:29:44.912&quot;));\r\n            values.put(&quot;INSERT_TYPE&quot;, Functions.lit(i + &quot;xyzwww&quot;));\r\n\r\n            MergeResult mergeResult = target.merge(source, target.col(&quot;ID&quot;).equal_to(Functions.lit(&quot;CUflNIYB35bthTSQDeQM&quot;)))\r\n                    .whenMatched().updateColumn(values)\r\n                    .whenNotMatched().insertRow(values)\r\n                    .collect();\r\n            updated += mergeResult.getRowsUpdated();\r\n            inserted += mergeResult.getRowsInserted();\r\n            System.out.println(mergeResult);\r\n        }","title":"Create snowflake dataframe from java object while doing merge","body":"<p>We have java application that read data from ElasticSearch and stores it in Snowflake.\nSo want use snowflake Merge conecpt.\nFrom ESdata how can we create Source DataFrame and Update values.\nHere is what I have tried.</p>\n<pre><code>   Updatable target = session.table(&quot;KEYSIGHT_SP_PMA3_CONTENT_TEST&quot;);\n    Updatable source = session.table(&quot;KEYSIGHT_SP_PMA3_CONTENT_TEST&quot;);\n\n    int updated = 0;\n    int inserted = 0;\n\n    for (int i = 0; i &lt; 10000; i++) {\n        Map&lt;String, Column&gt; values = new HashMap&lt;&gt;();\n        // values.put(Functions.col(&quot;ID&quot;), Functions.lit(&quot;CUflNIYB35bthTSQDeQM&quot;));\n        values.put(&quot;INSERT_DATE&quot;, Functions.lit(i + &quot;2003-03-28 09:29:44.912&quot;));\n        values.put(&quot;INSERT_TYPE&quot;, Functions.lit(i + &quot;xyzwww&quot;));\n\n        MergeResult mergeResult = target.merge(source, target.col(&quot;ID&quot;).equal_to(Functions.lit(&quot;CUflNIYB35bthTSQDeQM&quot;)))\n                .whenMatched().updateColumn(values)\n                .whenNotMatched().insertRow(values)\n                .collect();\n        updated += mergeResult.getRowsUpdated();\n        inserted += mergeResult.getRowsInserted();\n        System.out.println(mergeResult);\n    }\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9454,"page":538,"page_size":100}
